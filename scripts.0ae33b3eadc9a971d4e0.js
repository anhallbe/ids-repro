!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],i=t.document,a=Object.getPrototypeOf,s=n.slice,r=n.concat,o=n.push,l=n.indexOf,c={},d=c.toString,h=c.hasOwnProperty,u=h.toString,p=u.call(Object),f={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},m=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var a,s,r=(n=n||i).createElement("script");if(r.text=t,e)for(a in v)(s=e[a]||e.getAttribute&&e.getAttribute(a))&&r.setAttribute(a,s);n.head.appendChild(r).parentNode.removeChild(r)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function C(t){var e=!!t&&"length"in t&&t.length,n=y(t);return!g(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.4.1",constructor:w,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var t,e,n,i,a,s,r=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[o]||{},o++),"object"==typeof r||g(r)||(r={}),o===l&&(r=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&(c&&i&&(w.isPlainObject(i)||(a=Array.isArray(i)))?(n=r[e],s=a&&!Array.isArray(n)?[]:a||w.isPlainObject(n)?n:{},a=!1,r[e]=w.extend(c,s,i)):void 0!==i&&(r[e]=i));return r},w.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=a(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||u.call(n)!==p))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){b(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(C(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(x,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(C(Object(t))?w.merge(n,"string"==typeof t?[t]:t):o.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,a=t.length;i<n;i++)t[a++]=e[i];return t.length=a,t},grep:function(t,e,n){for(var i=[],a=0,s=t.length,r=!n;a<s;a++)!e(t[a],a)!==r&&i.push(t[a]);return i},map:function(t,e,n){var i,a,s=0,o=[];if(C(t))for(i=t.length;s<i;s++)null!=(a=e(t[s],s,n))&&o.push(a);else for(s in t)null!=(a=e(t[s],s,n))&&o.push(a);return r.apply([],o)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var k=function(t){var e,n,i,a,s,r,o,l,c,d,h,u,p,f,g,m,v,b,y,w="sizzle"+1*new Date,x=t.document,C=0,k=0,T=lt(),S=lt(),A=lt(),$=lt(),E=function(t,e){return t===e&&(h=!0),0},D={}.hasOwnProperty,I=[],M=I.pop,L=I.push,P=I.push,N=I.slice,_=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+B+"*("+O+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+B+"*\\]",z=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(B+"+","g"),q=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),V=new RegExp("^"+B+"*,"+B+"*"),j=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp(B+"|>"),U=new RegExp(z),G=new RegExp("^"+O+"$"),Y={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,at=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){u()},rt=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(I=N.call(x.childNodes),x.childNodes)}catch(St){P={apply:I.length?function(t,e){L.apply(t,N.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,i,a){var s,o,c,d,h,f,v,b=e&&e.ownerDocument,C=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==C&&9!==C&&11!==C)return i;if(!a&&((e?e.ownerDocument||e:x)!==p&&u(e),e=e||p,g)){if(11!==C&&(h=Z.exec(t)))if(s=h[1]){if(9===C){if(!(c=e.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(b&&(c=b.getElementById(s))&&y(e,c)&&c.id===s)return i.push(c),i}else{if(h[2])return P.apply(i,e.getElementsByTagName(t)),i;if((s=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!$[t+" "]&&(!m||!m.test(t))&&(1!==C||"object"!==e.nodeName.toLowerCase())){if(v=t,b=e,1===C&&W.test(t)){for((d=e.getAttribute("id"))?d=d.replace(it,at):e.setAttribute("id",d=w),o=(f=r(t)).length;o--;)f[o]="#"+d+" "+yt(f[o]);v=f.join(","),b=tt.test(t)&&vt(e.parentNode)||e}try{return P.apply(i,b.querySelectorAll(v)),i}catch(k){$(t,!0)}finally{d===w&&e.removeAttribute("id")}}}return l(t.replace(q,"$1"),e,i,a)}function lt(){var t=[];return function e(n,a){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=a}}function ct(t){return t[w]=!0,t}function dt(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(St){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),a=n.length;a--;)i.attrHandle[n[a]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct((function(e){return e=+e,ct((function(n,i){for(var a,s=t([],n.length,e),r=s.length;r--;)n[a=s[r]]&&(n[a]=!(i[a]=n[a]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},s=ot.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!K.test(t.namespaceURI||e&&e.nodeName||"HTML")},u=ot.setDocument=function(t){var e,a,r=t?t.ownerDocument||t:x;return r!==p&&9===r.nodeType&&r.documentElement?(f=(p=r).documentElement,g=!s(p),x!==p&&(a=p.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",st,!1):a.attachEvent&&a.attachEvent("onunload",st)),n.attributes=dt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=dt((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=dt((function(t){return f.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,a,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(a=e.getElementsByName(t),i=0;s=a[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],a=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(p.querySelectorAll))&&(dt((function(t){f.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+B+"*(?:value|"+R+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")})),dt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&dt((function(t){n.disconnectedMatch=b.call(t,"*"),b.call(t,"[s!='']:x"),v.push("!=",z)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(f.compareDocumentPosition),y=e||J.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},E=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===p||t.ownerDocument===x&&y(x,t)?-1:e===p||e.ownerDocument===x&&y(x,e)?1:d?_(d,t)-_(d,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,a=t.parentNode,s=e.parentNode,r=[t],o=[e];if(!a||!s)return t===p?-1:e===p?1:a?-1:s?1:d?_(d,t)-_(d,e):0;if(a===s)return ut(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;r[i]===o[i];)i++;return i?ut(r[i],o[i]):r[i]===x?-1:o[i]===x?1:0},p):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&u(t),n.matchesSelector&&g&&!$[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=b.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(St){$(e,!0)}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==p&&u(t),y(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==p&&u(t);var a=i.attrHandle[e.toLowerCase()],s=a&&D.call(i.attrHandle,e.toLowerCase())?a(t,e,!g):void 0;return void 0!==s?s:n.attributes||!g?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},ot.escape=function(t){return(t+"").replace(it,at)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],a=0,s=0;if(h=!n.detectDuplicates,d=!n.sortStable&&t.slice(0),t.sort(E),h){for(;e=t[s++];)e===t[s]&&(a=i.push(s));for(;a--;)t.splice(i[a],1)}return d=null,t},a=ot.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=a(e);return n},(i=ot.selectors={cacheLength:50,createPseudo:ct,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=r(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&T(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var a=ot.attr(i,t);return null==a?"!="===e:!e||(a+="","="===e?a===n:"!="===e?a!==n:"^="===e?n&&0===a.indexOf(n):"*="===e?n&&a.indexOf(n)>-1:"$="===e?n&&a.slice(-n.length)===n:"~="===e?(" "+a.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,a){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===a?function(t){return!!t.parentNode}:function(e,n,l){var c,d,h,u,p,f,g=s!==r?"nextSibling":"previousSibling",m=e.parentNode,v=o&&e.nodeName.toLowerCase(),b=!l&&!o,y=!1;if(m){if(s){for(;g;){for(u=e;u=u[g];)if(o?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&b){for(y=(p=(c=(d=(h=(u=m)[w]||(u[w]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]||[])[0]===C&&c[1])&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(y=p=0)||f.pop();)if(1===u.nodeType&&++y&&u===e){d[t]=[C,p,y];break}}else if(b&&(y=p=(c=(d=(h=(u=e)[w]||(u[w]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]||[])[0]===C&&c[1]),!1===y)for(;(u=++p&&u&&u[g]||(y=p=0)||f.pop())&&((o?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++y||(b&&((d=(h=u[w]||(u[w]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]=[C,y]),u!==e)););return(y-=a)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,a=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return a[w]?a(e):a.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){for(var i,s=a(t,e),r=s.length;r--;)t[i=_(t,s[r])]=!(n[i]=s[r])})):function(t){return a(t,0,n)}):a}},pseudos:{not:ct((function(t){var e=[],n=[],i=o(t.replace(q,"$1"));return i[w]?ct((function(t,e,n,a){for(var s,r=i(t,null,a,[]),o=t.length;o--;)(s=r[o])&&(t[o]=!(e[o]=s))})):function(t,a,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return ot(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||a(e)).indexOf(t)>-1}})),lang:ct((function(t){return G.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:mt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function bt(){}function yt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,a=e.next,s=a||i,r=n&&"parentNode"===s,o=k++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,a);return!1}:function(e,n,l){var c,d,h,u=[C,o];if(l){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(d=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),a&&a===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=d[s])&&c[0]===C&&c[1]===o)return u[2]=c[2];if(d[s]=u,u[2]=t(e,n,l))return!0}return!1}}function xt(t){return t.length>1?function(e,n,i){for(var a=t.length;a--;)if(!t[a](e,n,i))return!1;return!0}:t[0]}function Ct(t,e,n,i,a){for(var s,r=[],o=0,l=t.length,c=null!=e;o<l;o++)(s=t[o])&&(n&&!n(s,i,a)||(r.push(s),c&&e.push(o)));return r}function kt(t,e,n,i,a,s){return i&&!i[w]&&(i=kt(i)),a&&!a[w]&&(a=kt(a,s)),ct((function(s,r,o,l){var c,d,h,u=[],p=[],f=r.length,g=s||function(t,e,n){for(var i=0,a=e.length;i<a;i++)ot(t,e[i],n);return n}(e||"*",o.nodeType?[o]:o,[]),m=!t||!s&&e?g:Ct(g,u,t,o,l),v=n?a||(s?t:f||i)?[]:r:m;if(n&&n(m,v,o,l),i)for(c=Ct(v,p),i(c,[],o,l),d=c.length;d--;)(h=c[d])&&(v[p[d]]=!(m[p[d]]=h));if(s){if(a||t){if(a){for(c=[],d=v.length;d--;)(h=v[d])&&c.push(m[d]=h);a(null,v=[],c,l)}for(d=v.length;d--;)(h=v[d])&&(c=a?_(s,h):u[d])>-1&&(s[c]=!(r[c]=h))}}else v=Ct(v===r?v.splice(f,v.length):v),a?a(null,r,v,l):P.apply(r,v)}))}function Tt(t){for(var e,n,a,s=t.length,r=i.relative[t[0].type],o=r||i.relative[" "],l=r?1:0,d=wt((function(t){return t===e}),o,!0),h=wt((function(t){return _(e,t)>-1}),o,!0),u=[function(t,n,i){var a=!r&&(i||n!==c)||((e=n).nodeType?d(t,n,i):h(t,n,i));return e=null,a}];l<s;l++)if(n=i.relative[t[l].type])u=[wt(xt(u),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[w]){for(a=++l;a<s&&!i.relative[t[a].type];a++);return kt(l>1&&xt(u),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,l<a&&Tt(t.slice(l,a)),a<s&&Tt(t=t.slice(a)),a<s&&yt(t))}u.push(n)}return xt(u)}return bt.prototype=i.filters=i.pseudos,i.setFilters=new bt,r=ot.tokenize=function(t,e){var n,a,s,r,o,l,c,d=S[t+" "];if(d)return e?0:d.slice(0);for(o=t,l=[],c=i.preFilter;o;){for(r in n&&!(a=V.exec(o))||(a&&(o=o.slice(a[0].length)||o),l.push(s=[])),n=!1,(a=j.exec(o))&&(n=a.shift(),s.push({value:n,type:a[0].replace(q," ")}),o=o.slice(n.length)),i.filter)!(a=Y[r].exec(o))||c[r]&&!(a=c[r](a))||(n=a.shift(),s.push({value:n,type:r,matches:a}),o=o.slice(n.length));if(!n)break}return e?o.length:o?ot.error(t):S(t,l).slice(0)},o=ot.compile=function(t,e){var n,a=[],s=[],o=A[t+" "];if(!o){for(e||(e=r(t)),n=e.length;n--;)(o=Tt(e[n]))[w]?a.push(o):s.push(o);(o=A(t,function(t,e){var n=e.length>0,a=t.length>0,s=function(s,r,o,l,d){var h,f,m,v=0,b="0",y=s&&[],w=[],x=c,k=s||a&&i.find.TAG("*",d),T=C+=null==x?1:Math.random()||.1,S=k.length;for(d&&(c=r===p||r||d);b!==S&&null!=(h=k[b]);b++){if(a&&h){for(f=0,r||h.ownerDocument===p||(u(h),o=!g);m=t[f++];)if(m(h,r||p,o)){l.push(h);break}d&&(C=T)}n&&((h=!m&&h)&&v--,s&&y.push(h))}if(v+=b,n&&b!==v){for(f=0;m=e[f++];)m(y,w,r,o);if(s){if(v>0)for(;b--;)y[b]||w[b]||(w[b]=M.call(l));w=Ct(w)}P.apply(l,w),d&&!s&&w.length>0&&v+e.length>1&&ot.uniqueSort(l)}return d&&(C=T,c=x),y};return n?ct(s):s}(s,a))).selector=t}return o},l=ot.select=function(t,e,n,a){var s,l,c,d,h,u="function"==typeof t&&t,p=!a&&r(t=u.selector||t);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&g&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=Y.needsContext.test(t)?0:l.length;s--&&!i.relative[d=(c=l[s]).type];)if((h=i.find[d])&&(a=h(c.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(s,1),!(t=a.length&&yt(l)))return P.apply(n,a),n;break}}return(u||o(t,p))(a,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=w.split("").sort(E).join("")===w,n.detectDuplicates=!!h,u(),n.sortDetached=dt((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),dt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&dt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),dt((function(t){return null==t.getAttribute("disabled")}))||ht(R,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),ot}(t);w.find=k,w.expr=k.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=k.uniqueSort,w.text=k.getText,w.isXMLDoc=k.isXML,w.contains=k.contains,w.escapeSelector=k.escape;var T=function(t,e,n){for(var i=[],a=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&w(t).is(n))break;i.push(t)}return i},S=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},A=w.expr.match.needsContext;function $(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,n){return g(e)?w.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?w.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?w.grep(t,(function(t){return l.call(e,t)>-1!==n})):w.filter(e,t,n)}w.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?w.find.matchesSelector(i,t)?[i]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,n,i=this.length,a=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<i;e++)if(w.contains(a[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)w.find(t,a[e],n);return i>1?w.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&A.test(t)?w(t):t||[],!1).length}});var I,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var a,s;if(!t)return this;if(n=n||I,"string"==typeof t){if(!(a="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:M.exec(t))||!a[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(a[1]){if(w.merge(this,w.parseHTML(a[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:i,!0)),E.test(a[1])&&w.isPlainObject(e))for(a in e)g(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return(s=i.getElementById(a[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,I=w(i);var L=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,a=this.length,s=[],r="string"!=typeof t&&w(t);if(!A.test(t))for(;i<a;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?w.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?l.call(w(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:($(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(n,i){var a=w.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=w.filter(i,a)),this.length>1&&(P[t]||w.uniqueSort(a),L.test(t)&&a.reverse()),this.pushStack(a)}}));var _=/[^\x20\t\r\n\f]+/g;function R(t){return t}function B(t){throw t}function O(t,e,n,i){var a;try{t&&g(a=t.promise)?a.call(t).done(e).fail(n):t&&g(a=t.then)?a.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(_)||[],(function(t,n){e[n]=!0})),e}(t):w.extend({},t);var e,n,i,a,s=[],r=[],o=-1,l=function(){for(a=a||t.once,i=e=!0;r.length;o=-1)for(n=r.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&t.stopOnFalse&&(o=s.length,n=!1);t.memory||(n=!1),e=!1,a&&(s=n?[]:"")},c={add:function(){return s&&(n&&!e&&(o=s.length-1,r.push(n)),function e(n){w.each(n,(function(n,i){g(i)?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==y(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return w.each(arguments,(function(t,e){for(var n;(n=w.inArray(e,s,n))>-1;)s.splice(n,1),n<=o&&o--})),this},has:function(t){return t?w.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return a=r=[],s=n="",this},disabled:function(){return!s},lock:function(){return a=r=[],n||e||(s=n=""),this},locked:function(){return!!a},fireWith:function(t,n){return a||(n=[t,(n=n||[]).slice?n.slice():n],r.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(n,(function(n,i){var a=g(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=a&&a.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,a?[t]:arguments)}))})),t=null})).promise()},then:function(e,i,a){var s=0;function r(e,n,i,a){return function(){var o=this,l=arguments,c=function(){var t,c;if(!(e<s)){if((t=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");g(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?a?c.call(t,r(s,n,R,a),r(s,n,B,a)):(s++,c.call(t,r(s,n,R,a),r(s,n,B,a),r(s,n,R,n.notifyWith))):(i!==R&&(o=void 0,l=[t]),(a||n.resolveWith)(o,l))}},d=a?c:function(){try{c()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,d.stackTrace),e+1>=s&&(i!==B&&(o=void 0,l=[t]),n.rejectWith(o,l))}};e?d():(w.Deferred.getStackHook&&(d.stackTrace=w.Deferred.getStackHook()),t.setTimeout(d))}}return w.Deferred((function(t){n[0][3].add(r(0,t,g(a)?a:R,t.notifyWith)),n[1][3].add(r(0,t,g(e)?e:R)),n[2][3].add(r(0,t,g(i)?i:B))})).promise()},promise:function(t){return null!=t?w.extend(t,a):a}},s={};return w.each(n,(function(t,e){var r=e[2],o=e[5];a[e[1]]=r.add,o&&r.add((function(){i=o}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),r.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=r.fireWith})),a.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),a=s.call(arguments),r=w.Deferred(),o=function(t){return function(n){i[t]=this,a[t]=arguments.length>1?s.call(arguments):n,--e||r.resolveWith(i,a)}};if(e<=1&&(O(t,r.done(o(n)).resolve,r.reject,!e),"pending"===r.state()||g(a[n]&&a[n].then)))return r.then();for(;n--;)O(a[n],o(n),r.reject);return r.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&F.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var z=w.Deferred();function H(){i.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),w.ready()}w.fn.ready=function(t){return z.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||z.resolveWith(i,[w]))}}),w.ready.then=z.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?t.setTimeout(w.ready):(i.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var q=function(t,e,n,i,a,s,r){var o=0,l=t.length,c=null==n;if("object"===y(n))for(o in a=!0,n)q(t,e,o,n[o],!0,s,r);else if(void 0!==i&&(a=!0,g(i)||(r=!0),c&&(r?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(w(t),n)})),e))for(;o<l;o++)e(t[o],n,r?i:i.call(t[o],o,e(t[o],n)));return a?t:c?e.call(t):l?e(t[0],n):s},V=/^-ms-/,j=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function U(t){return t.replace(V,"ms-").replace(j,W)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,a=this.cache(t);if("string"==typeof e)a[U(e)]=n;else for(i in e)a[U(i)]=e[i];return a},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][U(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(U):(e=U(e))in i?[e]:e.match(_)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||w.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var K=new Y,X=new Y,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Q.test(t)?JSON.parse(t):t)}(n)}catch(a){}X.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return X.hasData(t)||K.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return K.access(t,e,n)},_removeData:function(t,e){K.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,i,a,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(a=X.get(s),1===s.nodeType&&!K.get(s,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&(i=U(i.slice(5)),Z(s,i,a[i]));K.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof t?this.each((function(){X.set(this,t)})):q(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=X.get(s,t))||void 0!==(n=Z(s,t))?n:void 0;this.each((function(){X.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){X.remove(this,t)}))}}),w.extend({queue:function(t,e,n){var i;if(t)return i=K.get(t,e=(e||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=K.access(t,e,w.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){var n=w.queue(t,e=e||"fx"),i=n.length,a=n.shift(),s=w._queueHooks(t,e);"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===e&&n.unshift("inprogress"),delete s.stop,a.call(t,(function(){w.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return K.get(t,n)||K.access(t,n,{empty:w.Callbacks("once memory").add((function(){K.remove(t,[e+"queue",n])}))})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each((function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,a=w.Deferred(),s=this,r=this.length,o=function(){--i||a.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=K.get(s[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),a.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=i.documentElement,at=function(t){return w.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(at=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===w.css(t,"display")},ot=function(t,e,n,i){var a,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];for(s in a=n.apply(t,i||[]),e)t.style[s]=r[s];return a};function lt(t,e,n,i){var a,s,r=20,o=i?function(){return i.cur()}:function(){return w.css(t,e,"")},l=o(),c=n&&n[3]||(w.cssNumber[e]?"":"px"),d=t.nodeType&&(w.cssNumber[e]||"px"!==c&&+l)&&et.exec(w.css(t,e));if(d&&d[3]!==c){for(c=c||d[3],d=+(l/=2)||1;r--;)w.style(t,e,d+c),(1-s)*(1-(s=o()/l||.5))<=0&&(r=0),d/=s;w.style(t,e,(d*=2)+c),n=n||[]}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}var ct={};function dt(t){var e,n=t.ownerDocument,i=t.nodeName,a=ct[i];return a||(e=n.body.appendChild(n.createElement(i)),a=w.css(e,"display"),e.parentNode.removeChild(e),"none"===a&&(a="block"),ct[i]=a,a)}function ht(t,e){for(var n,i,a=[],s=0,r=t.length;s<r;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(a[s]=K.get(i,"display")||null,a[s]||(i.style.display="")),""===i.style.display&&rt(i)&&(a[s]=dt(i))):"none"!==n&&(a[s]="none",K.set(i,"display",n)));for(s=0;s<r;s++)null!=a[s]&&(t[s].style.display=a[s]);return t}w.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){rt(this)?w(this).show():w(this).hide()}))}});var ut=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&$(t,e)?w.merge([t],n):n}function vt(t,e){for(var n=0,i=t.length;n<i;n++)K.set(t[n],"globalEval",!e||K.get(e[n],"globalEval"))}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td;var bt,yt,wt=/<|&#?\w+;/;function xt(t,e,n,i,a){for(var s,r,o,l,c,d,h=e.createDocumentFragment(),u=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===y(s))w.merge(u,s.nodeType?[s]:s);else if(wt.test(s)){for(r=r||h.appendChild(e.createElement("div")),o=(pt.exec(s)||["",""])[1].toLowerCase(),r.innerHTML=(l=gt[o]||gt._default)[1]+w.htmlPrefilter(s)+l[2],d=l[0];d--;)r=r.lastChild;w.merge(u,r.childNodes),(r=h.firstChild).textContent=""}else u.push(e.createTextNode(s));for(h.textContent="",p=0;s=u[p++];)if(i&&w.inArray(s,i)>-1)a&&a.push(s);else if(c=at(s),r=mt(h.appendChild(s),"script"),c&&vt(r),n)for(d=0;s=r[d++];)ft.test(s.type||"")&&n.push(s);return h}bt=i.createDocumentFragment().appendChild(i.createElement("div")),(yt=i.createElement("input")).setAttribute("type","radio"),yt.setAttribute("checked","checked"),yt.setAttribute("name","t"),bt.appendChild(yt),f.checkClone=bt.cloneNode(!0).cloneNode(!0).lastChild.checked,bt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!bt.cloneNode(!0).lastChild.defaultValue;var Ct=/^key/,kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Tt=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function At(){return!1}function $t(t,e){return t===function(){try{return i.activeElement}catch(t){}}()==("focus"===e)}function Et(t,e,n,i,a,s){var r,o;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=void 0),e)Et(t,o,n,i,e[o],s);return t}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),!1===a)a=At;else if(!a)return t;return 1===s&&(r=a,(a=function(t){return w().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=w.guid++)),t.each((function(){w.event.add(this,e,a,i,n)}))}function Dt(t,e,n){n?(K.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var i,a,r=K.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),K.set(this,e,r),i=n(this,e),this[e](),r!==(a=K.get(this,e))||i?K.set(this,e,!1):a={},r!==a)return t.stopImmediatePropagation(),t.preventDefault(),a.value}else r.length&&(K.set(this,e,{value:w.event.trigger(w.extend(r[0],w.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===K.get(t,e)&&w.event.add(t,e,St)}w.event={global:{},add:function(t,e,n,i,a){var s,r,o,l,c,d,h,u,p,f,g,m=K.get(t);if(m)for(n.handler&&(n=(s=n).handler,a=s.selector),a&&w.find.matchesSelector(it,a),n.guid||(n.guid=w.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(_)||[""]).length;c--;)p=g=(o=Tt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),p&&(h=w.event.special[p]||{},h=w.event.special[p=(a?h.delegateType:h.bindType)||p]||{},d=w.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:f.join(".")},s),(u=l[p])||((u=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,r)||t.addEventListener&&t.addEventListener(p,r)),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),a?u.splice(u.delegateCount++,0,d):u.push(d),w.event.global[p]=!0)},remove:function(t,e,n,i,a){var s,r,o,l,c,d,h,u,p,f,g,m=K.hasData(t)&&K.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(_)||[""]).length;c--;)if(p=g=(o=Tt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},u=l[p=(i?h.delegateType:h.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=u.length;s--;)d=u[s],!a&&g!==d.origType||n&&n.guid!==d.guid||o&&!o.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(t,d));r&&!u.length&&(h.teardown&&!1!==h.teardown.call(t,f,m.handle)||w.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[c],n,i,!0);w.isEmptyObject(l)&&K.remove(t,"handle events")}},dispatch:function(t){var e,n,i,a,s,r,o=w.event.fix(t),l=new Array(arguments.length),c=(K.get(this,"events")||{})[o.type]||[],d=w.event.special[o.type]||{};for(l[0]=o,e=1;e<arguments.length;e++)l[e]=arguments[e];if(o.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,o)){for(r=w.event.handlers.call(this,o,c),e=0;(a=r[e++])&&!o.isPropagationStopped();)for(o.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==s.namespace&&!o.rnamespace.test(s.namespace)||(o.handleObj=s,o.data=s.data,void 0!==(i=((w.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,o),o.result}},handlers:function(t,e){var n,i,a,s,r,o=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],r={},n=0;n<l;n++)void 0===r[a=(i=e[n]).selector+" "]&&(r[a]=i.needsContext?w(a,this).index(c)>-1:w.find(a,this,null,[c]).length),r[a]&&s.push(i);s.length&&o.push({elem:c,handlers:s})}return c=this,l<e.length&&o.push({elem:c,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ut.test(e.type)&&e.click&&$(e,"input")&&Dt(e,"click",St),!1},trigger:function(t){var e=this||t;return ut.test(e.type)&&e.click&&$(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return ut.test(e.type)&&e.click&&$(e,"input")&&K.get(e,"click")||$(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:At,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:At,isPropagationStopped:At,isImmediatePropagationStopped:At,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Ct.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&kt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return Dt(this,t,$t),!1},trigger:function(){return Dt(this,t),!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,a=t.relatedTarget,s=t.handleObj;return a&&(a===i||w.contains(i,a))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}})),w.fn.extend({on:function(t,e,n,i){return Et(this,t,e,n,i)},one:function(t,e,n,i){return Et(this,t,e,n,i,1)},off:function(t,e,n){var i,a;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,w(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=At),this.each((function(){w.event.remove(this,t,n,e)}))}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Mt=/<script|<style|<link/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Nt(t,e){return $(t,"table")&&$(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function _t(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,i,a,s,r,o,l,c;if(1===e.nodeType){if(K.hasData(t)&&(s=K.access(t),r=K.set(e,s),c=s.events))for(a in delete r.handle,r.events={},c)for(n=0,i=c[a].length;n<i;n++)w.event.add(e,a,c[a][n]);X.hasData(t)&&(o=X.access(t),l=w.extend({},o),X.set(e,l))}}function Ot(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ut.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ft(t,e,n,i){e=r.apply([],e);var a,s,o,l,c,d,h=0,u=t.length,p=u-1,m=e[0],v=g(m);if(v||u>1&&"string"==typeof m&&!f.checkClone&&Lt.test(m))return t.each((function(a){var s=t.eq(a);v&&(e[0]=m.call(this,a,s.html())),Ft(s,e,n,i)}));if(u&&(s=(a=xt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===a.childNodes.length&&(a=s),s||i)){for(l=(o=w.map(mt(a,"script"),_t)).length;h<u;h++)c=a,h!==p&&(c=w.clone(c,!0,!0),l&&w.merge(o,mt(c,"script"))),n.call(t[h],c,h);if(l)for(d=o[o.length-1].ownerDocument,w.map(o,Rt),h=0;h<l;h++)ft.test((c=o[h]).type||"")&&!K.access(c,"globalEval")&&w.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):b(c.textContent.replace(Pt,""),c,d))}return t}function zt(t,e,n){for(var i,a=e?w.filter(e,t):t,s=0;null!=(i=a[s]);s++)n||1!==i.nodeType||w.cleanData(mt(i)),i.parentNode&&(n&&at(i)&&vt(mt(i,"script")),i.parentNode.removeChild(i));return t}w.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,n){var i,a,s,r,o=t.cloneNode(!0),l=at(t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(r=mt(o),i=0,a=(s=mt(t)).length;i<a;i++)Ot(s[i],r[i]);if(e)if(n)for(s=s||mt(t),r=r||mt(o),i=0,a=s.length;i<a;i++)Bt(s[i],r[i]);else Bt(t,o);return(r=mt(o,"script")).length>0&&vt(r,!l&&mt(t,"script")),o},cleanData:function(t){for(var e,n,i,a=w.event.special,s=0;void 0!==(n=t[s]);s++)if(G(n)){if(e=n[K.expando]){if(e.events)for(i in e.events)a[i]?w.event.remove(n,i):w.removeEvent(n,i,e.handle);n[K.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),w.fn.extend({detach:function(t){return zt(this,t,!0)},remove:function(t){return zt(this,t)},text:function(t){return q(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ft(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Nt(this,t).appendChild(t)}))},prepend:function(){return Ft(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Nt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return q(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!gt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(a){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,(function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(mt(this)),n&&n.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var n,i=[],a=w(t),s=a.length-1,r=0;r<=s;r++)n=r===s?this:this.clone(!0),w(a[r])[e](n),o.apply(i,n.get());return this.pushStack(i)}}));var Ht=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),qt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Vt=new RegExp(nt.join("|"),"i");function jt(t,e,n){var i,a,s,r,o=t.style;return(n=n||qt(t))&&(""!==(r=n.getPropertyValue(e)||n[e])||at(t)||(r=w.style(t,e)),!f.pixelBoxStyles()&&Ht.test(r)&&Vt.test(e)&&(i=o.width,a=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=i,o.minWidth=a,o.maxWidth=s)),void 0!==r?r+"":r}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(c).appendChild(d);var e=t.getComputedStyle(d);a="1%"!==e.top,l=12===n(e.marginLeft),d.style.right="60%",o=36===n(e.right),s=36===n(e.width),d.style.position="absolute",r=12===n(d.offsetWidth/3),it.removeChild(c),d=null}}function n(t){return Math.round(parseFloat(t))}var a,s,r,o,l,c=i.createElement("div"),d=i.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===d.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),a},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r}}))}();var Ut=["Webkit","Moz","ms"],Gt=i.createElement("div").style,Yt={};function Kt(t){return w.cssProps[t]||Yt[t]||(t in Gt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Ut.length;n--;)if((t=Ut[n]+e)in Gt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,a,s){var r="width"===e?1:0,o=0,l=0;if(n===(i?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=w.css(t,n+nt[r],!0,a)),i?("content"===n&&(l-=w.css(t,"padding"+nt[r],!0,a)),"margin"!==n&&(l-=w.css(t,"border"+nt[r]+"Width",!0,a))):(l+=w.css(t,"padding"+nt[r],!0,a),"padding"!==n?l+=w.css(t,"border"+nt[r]+"Width",!0,a):o+=w.css(t,"border"+nt[r]+"Width",!0,a));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))||0),l}function ne(t,e,n){var i=qt(t),a=(!f.boxSizingReliable()||n)&&"border-box"===w.css(t,"boxSizing",!1,i),s=a,r=jt(t,e,i),o="offset"+e[0].toUpperCase()+e.slice(1);if(Ht.test(r)){if(!n)return r;r="auto"}return(!f.boxSizingReliable()&&a||"auto"===r||!parseFloat(r)&&"inline"===w.css(t,"display",!1,i))&&t.getClientRects().length&&(a="border-box"===w.css(t,"boxSizing",!1,i),(s=o in t)&&(r=t[o])),(r=parseFloat(r)||0)+ee(t,e,n||(a?"border":"content"),s,i,r)+"px"}function ie(t,e,n,i,a){return new ie.prototype.init(t,e,n,i,a)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,s,r,o=U(e),l=Qt.test(e),c=t.style;if(l||(e=Kt(o)),r=w.cssHooks[e]||w.cssHooks[o],void 0===n)return r&&"get"in r&&void 0!==(a=r.get(t,!1,i))?a:c[e];"string"==(s=typeof n)&&(a=et.exec(n))&&a[1]&&(n=lt(t,e,a),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=a&&a[3]||(w.cssNumber[o]?"":"px")),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var a,s,r,o=U(e);return Qt.test(e)||(e=Kt(o)),(r=w.cssHooks[e]||w.cssHooks[o])&&"get"in r&&(a=r.get(t,!0,n)),void 0===a&&(a=jt(t,e,i)),"normal"===a&&e in Zt&&(a=Zt[e]),""===n||n?(s=parseFloat(a),!0===n||isFinite(s)?s||0:a):a}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,n,i){if(n)return!Xt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):ot(t,Jt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var a,s=qt(t),r=!f.scrollboxSize()&&"absolute"===s.position,o=(r||i)&&"border-box"===w.css(t,"boxSizing",!1,s),l=i?ee(t,e,i,o,s):0;return o&&r&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-ee(t,e,"border",!1,s)-.5)),l&&(a=et.exec(n))&&"px"!==(a[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),te(0,n,l)}}})),w.cssHooks.marginLeft=Wt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(jt(t,"marginLeft"))||t.getBoundingClientRect().left-ot(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];i<4;i++)a[t+nt[i]+e]=s[i]||s[i-2]||s[0];return a}},"margin"!==t&&(w.cssHooks[t+e].set=te)})),w.fn.extend({css:function(t,e){return q(this,(function(t,e,n){var i,a,s={},r=0;if(Array.isArray(e)){for(i=qt(t),a=e.length;r<a;r++)s[e[r]]=w.css(t,e[r],!1,i);return s}return void 0!==n?w.style(t,e,n):w.css(t,e)}),t,e,arguments.length>1)}}),w.Tween=ie,(ie.prototype={constructor:ie,init:function(t,e,n,i,a,s){this.elem=t,this.prop=n,this.easing=a||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}}).init.prototype=ie.prototype,(ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ie.prototype.init,w.fx.step={};var ae,se,re=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function le(){se&&(!1===i.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(le):t.setTimeout(le,w.fx.interval),w.fx.tick())}function ce(){return t.setTimeout((function(){ae=void 0})),ae=Date.now()}function de(t,e){var n,i=0,a={height:t};for(e=e?1:0;i<4;i+=2-e)a["margin"+(n=nt[i])]=a["padding"+n]=t;return e&&(a.opacity=a.width=t),a}function he(t,e,n){for(var i,a=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),s=0,r=a.length;s<r;s++)if(i=a[s].call(n,e,t))return i}function ue(t,e,n){var i,a,s=0,r=ue.prefilters.length,o=w.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var e=ae||ce(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),s=0,r=c.tweens.length;s<r;s++)c.tweens[s].run(i);return o.notifyWith(t,[c,i,n]),i<1&&r?n:(r||o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c]),!1)},c=o.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:ae||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var i=w.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return e?(o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c,e])):o.rejectWith(t,[c,e]),this}}),d=c.props;for(function(t,e){var n,i,a,s,r;for(n in t)if(a=e[i=U(n)],s=t[n],Array.isArray(s)&&(a=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(r=w.cssHooks[i])&&"expand"in r)for(n in s=r.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=a);else e[i]=a}(d,c.opts.specialEasing);s<r;s++)if(i=ue.prefilters[s].call(c,t,d,c.opts))return g(i.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return w.map(d,he,c),g(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(ue,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(_);for(var n,i=0,a=t.length;i<a;i++)(ue.tweeners[n=t[i]]=ue.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var i,a,s,r,o,l,c,d,h="width"in e||"height"in e,u=this,p={},f=t.style,g=t.nodeType&&rt(t),m=K.get(t,"fxshow");for(i in n.queue||(null==(r=w._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,o=r.empty.fire,r.empty.fire=function(){r.unqueued||o()}),r.unqueued++,u.always((function(){u.always((function(){r.unqueued--,w.queue(t,"fx").length||r.empty.fire()}))}))),e)if(re.test(a=e[i])){if(delete e[i],s=s||"toggle"===a,a===(g?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||w.style(t,i)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(i in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=K.get(t,"display")),"none"===(d=w.css(t,"display"))&&(c?d=c:(ht([t],!0),c=t.style.display||c,d=w.css(t,"display"),ht([t]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===w.css(t,"float")&&(l||(u.done((function(){f.display=c})),null==c&&(c="none"===(d=f.display)?"":d)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=K.access(t,"fxshow",{display:c}),s&&(m.hidden=!g),g&&ht([t],!0),u.done((function(){for(i in g||ht([t]),K.remove(t,"fxshow"),p)w.style(t,i,p[i])}))),l=he(g?m[i]:0,i,u),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),w.speed=function(t,e,n){var i=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return w.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in w.fx.speeds?w.fx.speeds[i.duration]:w.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g(i.old)&&i.old.call(this),i.queue&&w.dequeue(this,i.queue)},i},w.fn.extend({fadeTo:function(t,e,n,i){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var a=w.isEmptyObject(t),s=w.speed(e,n,i),r=function(){var e=ue(this,w.extend({},t),s);(a||K.get(this,"finish"))&&e.stop(!0)};return r.finish=r,a||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,a=null!=t&&t+"queueHooks",s=w.timers,r=K.get(this);if(a)r[a]&&r[a].stop&&i(r[a]);else for(a in r)r[a]&&r[a].stop&&oe.test(a)&&i(r[a]);for(a=s.length;a--;)s[a].elem!==this||null!=t&&s[a].queue!==t||(s[a].anim.stop(n),e=!1,s.splice(a,1));!e&&n||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=K.get(this),i=n[t+"queue"],a=n[t+"queueHooks"],s=w.timers,r=i?i.length:0;for(n.finish=!0,w.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var n=w.fn[e];w.fn[e]=function(t,i,a){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(de(e,!0),t,i,a)}})),w.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(ae=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),ae=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){se||(se=!0,le())},w.fx.stop=function(){se=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,this.queue(n=n||"fx",(function(n,i){var a=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(a)}}))},function(){var t=i.createElement("input"),e=i.createElement("select").appendChild(i.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=e.selected,(t=i.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var pe,fe=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return q(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,n){var i,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?w.prop(t,e,n):(1===s&&w.isXMLDoc(t)||(a=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:(t.setAttribute(e,n+""),n):a&&"get"in a&&null!==(i=a.get(t,e))?i:null==(i=w.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&$(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,a=e&&e.match(_);if(a&&1===t.nodeType)for(;n=a[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=fe[e]||w.find.attr;fe[e]=function(t,e,i){var a,s,r=e.toLowerCase();return i||(s=fe[r],fe[r]=a,a=null!=n(t,e,i)?r:null,fe[r]=s),a}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match(_)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(_)||[]}w.fn.extend({prop:function(t,e){return q(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,n){var i,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&w.isXMLDoc(t)||(a=w.propHooks[e=w.propFix[e]||e]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:t[e]=n:a&&"get"in a&&null!==(i=a.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,n,i,a,s,r,o,l=0;if(g(t))return this.each((function(e){w(this).addClass(t.call(this,e,be(this)))}));if((e=ye(t)).length)for(;n=this[l++];)if(a=be(n),i=1===n.nodeType&&" "+ve(a)+" "){for(r=0;s=e[r++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a!==(o=ve(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,a,s,r,o,l=0;if(g(t))return this.each((function(e){w(this).removeClass(t.call(this,e,be(this)))}));if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;n=this[l++];)if(a=be(n),i=1===n.nodeType&&" "+ve(a)+" "){for(r=0;s=e[r++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");a!==(o=ve(i))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):g(t)?this.each((function(n){w(this).toggleClass(t.call(this,n,be(this),e),e)})):this.each((function(){var e,a,s,r;if(i)for(a=0,s=w(this),r=ye(t);e=r[a++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=be(this))&&K.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":K.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ve(be(n))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;w.fn.extend({val:function(t){var e,n,i,a=this[0];return arguments.length?(i=g(t),this.each((function(n){var a;1===this.nodeType&&(null==(a=i?t.call(this,n,w(this).val()):t)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,a,"value")||(this.value=a))}))):a?(e=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(we,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ve(w.text(t))}},select:{get:function(t){var e,n,i,a=t.options,s=t.selectedIndex,r="select-one"===t.type,o=r?null:[],l=r?s+1:a.length;for(i=s<0?l:r?s:0;i<l;i++)if(((n=a[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!$(n.parentNode,"optgroup"))){if(e=w(n).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,a=t.options,s=w.makeArray(e),r=a.length;r--;)((i=a[r]).selected=w.inArray(w.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},f.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),f.focusin="onfocusin"in t;var xe=/^(?:focusinfocus|focusoutblur)$/,Ce=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,n,a,s){var r,o,l,c,d,u,p,f,v=[a||i],b=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=f=l=a=a||i,3!==a.nodeType&&8!==a.nodeType&&!xe.test(b+w.event.triggered)&&(b.indexOf(".")>-1&&(y=b.split("."),b=y.shift(),y.sort()),d=b.indexOf(":")<0&&"on"+b,(e=e[w.expando]?e:new w.Event(b,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=a),n=null==n?[e]:w.makeArray(n,[e]),p=w.event.special[b]||{},s||!p.trigger||!1!==p.trigger.apply(a,n))){if(!s&&!p.noBubble&&!m(a)){for(xe.test((c=p.delegateType||b)+b)||(o=o.parentNode);o;o=o.parentNode)v.push(o),l=o;l===(a.ownerDocument||i)&&v.push(l.defaultView||l.parentWindow||t)}for(r=0;(o=v[r++])&&!e.isPropagationStopped();)f=o,e.type=r>1?c:p.bindType||b,(u=(K.get(o,"events")||{})[e.type]&&K.get(o,"handle"))&&u.apply(o,n),(u=d&&o[d])&&u.apply&&G(o)&&(e.result=u.apply(o,n),!1===e.result&&e.preventDefault());return e.type=b,s||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),n)||!G(a)||d&&g(a[b])&&!m(a)&&((l=a[d])&&(a[d]=null),w.event.triggered=b,e.isPropagationStopped()&&f.addEventListener(b,Ce),a[b](),e.isPropagationStopped()&&f.removeEventListener(b,Ce),w.event.triggered=void 0,l&&(a[d]=l)),e.result}},simulate:function(t,e,n){var i=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(i,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var i=this.ownerDocument||this,a=K.access(i,e);a||i.addEventListener(t,n,!0),K.access(i,e,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=K.access(i,e)-1;a?K.access(i,e,a):(i.removeEventListener(t,n,!0),K.remove(i,e))}}}));var ke=t.location,Te=Date.now(),Se=/\?/;w.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),n};var Ae=/\[\]$/,$e=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Ie(t,e,n,i){var a;if(Array.isArray(e))w.each(e,(function(e,a){n||Ae.test(t)?i(t,a):Ie(t+"["+("object"==typeof a&&null!=a?e:"")+"]",a,n,i)}));else if(n||"object"!==y(e))i(t,e);else for(a in e)Ie(t+"["+a+"]",e[a],n,i)}w.param=function(t,e){var n,i=[],a=function(t,e){var n=g(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){a(this.name,this.value)}));else for(n in t)Ie(n,t[n],e,a);return i.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&De.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!ut.test(t))})).map((function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(t){return{name:e.name,value:t.replace($e,"\r\n")}})):{name:e.name,value:n.replace($e,"\r\n")}})).get()}});var Me=/%20/g,Le=/#.*$/,Pe=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,_e=/^(?:GET|HEAD)$/,Re=/^\/\//,Be={},Oe={},Fe="*/".concat("*"),ze=i.createElement("a");function He(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,a=0,s=e.toLowerCase().match(_)||[];if(g(n))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function qe(t,e,n,i){var a={},s=t===Oe;function r(o){var l;return a[o]=!0,w.each(t[o]||[],(function(t,o){var c=o(e,n,i);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)})),l}return r(e.dataTypes[0])||!a["*"]&&r("*")}function Ve(t,e){var n,i,a=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((a[n]?t:i||(i={}))[n]=e[n]);return i&&w.extend(!0,t,i),t}ze.href=ke.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,w.ajaxSettings),e):Ve(w.ajaxSettings,t)},ajaxPrefilter:He(Be),ajaxTransport:He(Oe),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var a,s,r,o,l,c,d,h,u,p,f=w.ajaxSetup({},n=n||{}),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),b=w.Callbacks("once memory"),y=f.statusCode||{},x={},C={},k="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(d){if(!o)for(o={};e=Ne.exec(r);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?r:null},setRequestHeader:function(t,e){return null==d&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==d&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)T.always(t[T.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||k;return a&&a.abort(e),S(0,e),this}};if(v.promise(T),f.url=((e||f.url||ke.href)+"").replace(Re,ke.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(_)||[""],null==f.crossDomain){c=i.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=ze.protocol+"//"+ze.host!=c.protocol+"//"+c.host}catch(A){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),qe(Be,f,n,T),d)return T;for(u in(h=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!_e.test(f.type),s=f.url.replace(Le,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Me,"+")):(p=f.url.slice(s.length),f.data&&(f.processData||"string"==typeof f.data)&&(s+=(Se.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(Pe,"$1"),p=(Se.test(s)?"&":"?")+"_="+Te+++p),f.url=s+p),f.ifModified&&(w.lastModified[s]&&T.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&T.setRequestHeader("If-None-Match",w.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Fe+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(g,T,f)||d))return T.abort();if(k="abort",b.add(f.complete),T.done(f.success),T.fail(f.error),a=qe(Oe,f,n,T)){if(T.readyState=1,h&&m.trigger("ajaxSend",[T,f]),d)return T;f.async&&f.timeout>0&&(l=t.setTimeout((function(){T.abort("timeout")}),f.timeout));try{d=!1,a.send(x,S)}catch(A){if(d)throw A;S(-1,A)}}else S(-1,"No Transport");function S(e,n,i,o){var c,u,p,x,C,k=n;d||(d=!0,l&&t.clearTimeout(l),a=void 0,r=o||"",T.readyState=e>0?4:0,c=e>=200&&e<300||304===e,i&&(x=function(t,e,n){for(var i,a,s,r,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in o)if(o[a]&&o[a].test(i)){l.unshift(a);break}if(l[0]in n)s=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){s=a;break}r||(r=a)}s=s||r}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,T,i)),x=function(t,e,n,i){var a,s,r,o,l,c={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=d.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(a in c)if((o=a.split(" "))[1]===s&&(r=c[l+" "+o[0]]||c["* "+o[0]])){!0===r?r=c[a]:!0!==c[a]&&(s=o[0],d.unshift(o[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(A){return{state:"parsererror",error:r?A:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(f,x,T,c),c?(f.ifModified&&((C=T.getResponseHeader("Last-Modified"))&&(w.lastModified[s]=C),(C=T.getResponseHeader("etag"))&&(w.etag[s]=C)),204===e||"HEAD"===f.type?k="nocontent":304===e?k="notmodified":(k=x.state,u=x.data,c=!(p=x.error))):(p=k,!e&&k||(k="error",e<0&&(e=0))),T.status=e,T.statusText=(n||k)+"",c?v.resolveWith(g,[u,k,T]):v.rejectWith(g,[T,k,p]),T.statusCode(y),y=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[T,f,c?u:p]),b.fireWith(g,[T,k]),h&&(m.trigger("ajaxComplete",[T,f]),--w.active||w.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,n,i,a){return g(n)&&(a=a||i,i=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:a,data:n,success:i},w.isPlainObject(t)&&t))}})),w._evalUrl=function(t,e){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(n){w(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var je={0:200,1223:204},We=w.ajaxSettings.xhr();f.cors=!!We&&"withCredentials"in We,f.ajax=We=!!We,w.ajaxTransport((function(e){var n,i;if(f.cors||We&&!e.crossDomain)return{send:function(a,s){var r,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];for(r in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)o.setRequestHeader(r,a[r]);n=function(t){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(je[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout((function(){n&&i()}))},n=n("abort");try{o.send(e.hasContent&&e.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(a,s){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),i.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ue,Ge=[],Ye=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||w.expando+"_"+Te++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,n,i){var a,s,r,o=!1!==e.jsonp&&(Ye.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Ye,"$1"+a):!1!==e.jsonp&&(e.url+=(Se.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return r||w.error(a+" was not called"),r[0]},e.dataTypes[0]="json",s=t[a],t[a]=function(){r=arguments},i.always((function(){void 0===s?w(t).removeProp(a):t[a]=s,e[a]&&(e.jsonpCallback=n.jsonpCallback,Ge.push(a)),r&&g(s)&&s(r[0]),r=s=void 0})),"script"})),f.createHTMLDocument=((Ue=i.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ue.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(f.createHTMLDocument?((a=(e=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,e.head.appendChild(a)):e=i),r=!n&&[],(s=E.exec(t))?[e.createElement(s[1])]:(s=xt([t],e,r),r&&r.length&&w(r).remove(),w.merge([],s.childNodes)));var a,s,r},w.fn.load=function(t,e,n){var i,a,s,r=this,o=t.indexOf(" ");return o>-1&&(i=ve(t.slice(o)),t=t.slice(0,o)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(a="POST"),r.length>0&&w.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done((function(t){s=arguments,r.html(i?w("<div>").append(w.parseHTML(t)).find(i):t)})).always(n&&function(t,e){r.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,n){var i,a,s,r,o,l,c=w.css(t,"position"),d=w(t),h={};"static"===c&&(t.style.position="relative"),o=d.offset(),s=w.css(t,"top"),l=w.css(t,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(r=(i=d.position()).top,a=i.left):(r=parseFloat(s)||0,a=parseFloat(l)||0),g(e)&&(e=e.call(t,n,w.extend({},o))),null!=e.top&&(h.top=e.top-o.top+r),null!=e.left&&(h.left=e.left-o.left+a),"using"in e?e.using.call(t,h):d.css(h)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?{top:(e=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],a={top:0,left:0};if("fixed"===w.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((a=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),a.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-a.top-w.css(i,"marginTop",!0),left:e.left-a.left-w.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||it}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;w.fn[t]=function(i){return q(this,(function(t,i,a){var s;if(m(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===a)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:a,n?a:s.pageYOffset):t[i]=a}),t,i,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Wt(f.pixelPosition,(function(t,n){if(n)return n=jt(t,e),Ht.test(n)?w(t).position()[e]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){w.fn[i]=function(a,s){var r=arguments.length&&(n||"boolean"!=typeof a),o=n||(!0===a||!0===s?"margin":"border");return q(this,(function(e,n,a){var s;return m(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===a?w.css(e,n,o):w.style(e,n,a,o)}),e,r?a:void 0,r)}}))})),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),w.proxy=function(t,e){var n,i,a;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return i=s.call(arguments,2),(a=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||w.guid++,a},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=$,w.isFunction=g,w.isWindow=m,w.camelCase=U,w.type=y,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return w}));var Ke=t.jQuery,Xe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Xe),e&&t.jQuery===w&&(t.jQuery=Ke),w},e||(t.jQuery=t.$=w),w})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,(function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,i){return e(n(t),i)}),{left:function(e,n,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){var s=i+a>>>1;t(e[s],n)<0?i=s+1:a=s}return i},right:function(e,n,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){var s=i+a>>>1;t(e[s],n)>0?a=s:i=s+1}return i}}}var i=n(e),a=i.right,s=i.left;function r(t,e){return[t,e]}function o(t){return null===t?NaN:+t}function l(t,e){var n,i,a=t.length,s=0,r=-1,l=0,c=0;if(null==e)for(;++r<a;)isNaN(n=o(t[r]))||(c+=(i=n-l)*(n-(l+=i/++s)));else for(;++r<a;)isNaN(n=o(e(t[r],r,t)))||(c+=(i=n-l)*(n-(l+=i/++s)));if(s>1)return c/(s-1)}function c(t,e){var n=l(t,e);return n?Math.sqrt(n):n}function d(t,e){var n,i,a,s=t.length,r=-1;if(null==e){for(;++r<s;)if(null!=(n=t[r])&&n>=n)for(i=a=n;++r<s;)null!=(n=t[r])&&(i>n&&(i=n),a<n&&(a=n))}else for(;++r<s;)if(null!=(n=e(t[r],r,t))&&n>=n)for(i=a=n;++r<s;)null!=(n=e(t[r],r,t))&&(i>n&&(i=n),a<n&&(a=n));return[i,a]}var h=Array.prototype,u=h.slice,p=h.map;function f(t){return function(){return t}}function g(t){return t}function m(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(a);++i<a;)s[i]=t+i*n;return s}var v=Math.sqrt(50),b=Math.sqrt(10),y=Math.sqrt(2);function w(t,e,n){var i,a,s,r,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),0===(r=x(t,e,n))||!isFinite(r))return[];if(r>0)for(t=Math.ceil(t/r),e=Math.floor(e/r),s=new Array(a=Math.ceil(e-t+1));++o<a;)s[o]=(t+o)*r;else for(t=Math.floor(t*r),e=Math.ceil(e*r),s=new Array(a=Math.ceil(t-e+1));++o<a;)s[o]=(t-o)/r;return i&&s.reverse(),s}function x(t,e,n){var i=(e-t)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,a);return a>=0?(s>=v?10:s>=b?5:s>=y?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(s>=v?10:s>=b?5:s>=y?2:1)}function C(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/a;return s>=v?a*=10:s>=b?a*=5:s>=y&&(a*=2),e<t?-a:a}function k(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function T(t,e,n){if(null==n&&(n=o),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,s=Math.floor(a),r=+n(t[s],s,t);return r+(+n(t[s+1],s+1,t)-r)*(a-s)}}function S(t){for(var e,n,i,a=t.length,s=-1,r=0;++s<a;)r+=t[s].length;for(n=new Array(r);--a>=0;)for(e=(i=t[a]).length;--e>=0;)n[--r]=i[e];return n}function A(t,e){var n,i,a=t.length,s=-1;if(null==e){for(;++s<a;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<a;)null!=(n=t[s])&&i>n&&(i=n)}else for(;++s<a;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<a;)null!=(n=e(t[s],s,t))&&i>n&&(i=n);return i}function $(t){if(!(a=t.length))return[];for(var e=-1,n=A(t,E),i=new Array(n);++e<n;)for(var a,s=-1,r=i[e]=new Array(a);++s<a;)r[s]=t[s][e];return i}function E(t){return t.length}var D=Array.prototype.slice;function I(t){return t}function M(t){return"translate("+(t+.5)+",0)"}function L(t){return"translate(0,"+(t+.5)+")"}function P(t){return function(e){return+t(e)}}function N(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function _(){return!this.__axis}function R(t,e){var n=[],i=null,a=null,s=6,r=6,o=3,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",d=1===t||3===t?M:L;function h(h){var u=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==a?e.tickFormat?e.tickFormat.apply(e,n):I:a,f=Math.max(s,0)+o,g=e.range(),m=+g[0]+.5,v=+g[g.length-1]+.5,b=(e.bandwidth?N:P)(e.copy()),y=h.selection?h.selection():h,w=y.selectAll(".domain").data([null]),x=y.selectAll(".tick").data(u,e).order(),C=x.exit(),k=x.enter().append("g").attr("class","tick"),T=x.select("line"),S=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(k),T=T.merge(k.append("line").attr("stroke","#000").attr(c+"2",l*s)),S=S.merge(k.append("text").attr("fill","#000").attr(c,l*f).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==y&&(w=w.transition(h),x=x.transition(h),T=T.transition(h),S=S.transition(h),C=C.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=b(t))?d(t):this.getAttribute("transform")})),k.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return d(e&&isFinite(e=e(t))?e:b(t))}))),C.remove(),w.attr("d",4===t||2==t?"M"+l*r+","+m+"H0.5V"+v+"H"+l*r:"M"+m+","+l*r+"V0.5H"+v+"V"+l*r),x.attr("opacity",1).attr("transform",(function(t){return d(b(t))})),T.attr(c+"2",l*s),S.attr(c,l*f).text(p),y.filter(_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),y.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=D.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:D.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:D.call(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(a=t,h):a},h.tickSize=function(t){return arguments.length?(s=r=+t,h):s},h.tickSizeInner=function(t){return arguments.length?(s=+t,h):s},h.tickSizeOuter=function(t){return arguments.length?(r=+t,h):r},h.tickPadding=function(t){return arguments.length?(o=+t,h):o},h}var B={value:function(){}};function O(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new F(i)}function F(t){this._=t}function z(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function H(t,e){for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).name===e)return n.value}function q(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=B,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}F.prototype=O.prototype={constructor:F,on:function(t,e){var n,i=this._,a=z(t+"",i),s=-1,r=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(t=a[s]).type)i[n]=q(i[n],t.name,e);else if(null==e)for(n in i)i[n]=q(i[n],t.name,null);return this}for(;++s<r;)if((n=(t=a[s]).type)&&(n=H(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,a=new Array(n),s=0;s<n;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,s=i.length;a<s;++a)i[a].value.apply(e,n)}};var V="http://www.w3.org/1999/xhtml",j={svg:"http://www.w3.org/2000/svg",xhtml:V,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function W(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),j.hasOwnProperty(e)?{space:j[e],local:t}:t}function U(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===V&&e.documentElement.namespaceURI===V?e.createElement(t):e.createElementNS(n,t)}}function G(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Y(t){var e=W(t);return(e.local?G:U)(e)}function K(){}function X(t){return null==t?K:function(){return this.querySelector(t)}}function Q(){return[]}function J(t){return null==t?Q:function(){return this.querySelectorAll(t)}}var Z=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var tt=document.documentElement;if(!tt.matches){var et=tt.webkitMatchesSelector||tt.msMatchesSelector||tt.mozMatchesSelector||tt.oMatchesSelector;Z=function(t){return function(){return et.call(this,t)}}}}var nt=Z;function it(t){return new Array(t.length)}function at(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function st(t,e,n,i,a,s){for(var r,o=0,l=e.length,c=s.length;o<c;++o)(r=e[o])?(r.__data__=s[o],i[o]=r):n[o]=new at(t,s[o]);for(;o<l;++o)(r=e[o])&&(a[o]=r)}function rt(t,e,n,i,a,s,r){var o,l,c,d={},h=e.length,u=s.length,p=new Array(h);for(o=0;o<h;++o)(l=e[o])&&(p[o]=c="$"+r.call(l,l.__data__,o,e),c in d?a[o]=l:d[c]=l);for(o=0;o<u;++o)(l=d[c="$"+r.call(t,s[o],o,s)])?(i[o]=l,l.__data__=s[o],d[c]=null):n[o]=new at(t,s[o]);for(o=0;o<h;++o)(l=e[o])&&d[p[o]]===l&&(a[o]=l)}function ot(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lt(t){return function(){this.removeAttribute(t)}}function ct(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dt(t,e){return function(){this.setAttribute(t,e)}}function ht(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ut(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function pt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ft(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gt(t){return function(){this.style.removeProperty(t)}}function mt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vt(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function bt(t,e){return t.style.getPropertyValue(e)||ft(t).getComputedStyle(t,null).getPropertyValue(e)}function yt(t){return function(){delete this[t]}}function wt(t,e){return function(){this[t]=e}}function xt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ct(t){return t.trim().split(/^|\s+/)}function kt(t){return t.classList||new Tt(t)}function Tt(t){this._node=t,this._names=Ct(t.getAttribute("class")||"")}function St(t,e){for(var n=kt(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function At(t,e){for(var n=kt(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function $t(t){return function(){St(this,t)}}function Et(t){return function(){At(this,t)}}function Dt(t,e){return function(){(e.apply(this,arguments)?St:At)(this,t)}}function It(){this.textContent=""}function Mt(t){return function(){this.textContent=t}}function Lt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Pt(){this.innerHTML=""}function Nt(t){return function(){this.innerHTML=t}}function _t(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Rt(){this.nextSibling&&this.parentNode.appendChild(this)}function Bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ot(){return null}function Ft(){var t=this.parentNode;t&&t.removeChild(this)}function zt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Ht(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}at.prototype={constructor:at,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var qt={};function Vt(t,e,n){return t=jt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function jt(e,n,i){return function(a){var s=t.event;t.event=a;try{e.call(this,this.__data__,n,i)}finally{t.event=s}}}function Wt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Ut(t){return function(){var e=this.__on;if(e){for(var n,i=0,a=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?e.length=a:delete this.__on}}}function Gt(t,e,n){var i=qt.hasOwnProperty(t.type)?Vt:jt;return function(a,s,r){var o,l=this.__on,c=i(e,s,r);if(l)for(var d=0,h=l.length;d<h;++d)if((o=l[d]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=n),void(o.value=e);this.addEventListener(t.type,c,n),o={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(o):this.__on=[o]}}function Yt(e,n,i,a){var s=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,a)}finally{t.event=s}}function Kt(t,e,n){var i=ft(t),a=i.CustomEvent;"function"==typeof a?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Xt(t,e){return function(){return Kt(this,t,e)}}function Qt(t,e){return function(){return Kt(this,t,e.apply(this,arguments))}}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(qt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Jt=[null];function Zt(t,e){this._groups=t,this._parents=e}function te(){return new Zt([[document.documentElement]],Jt)}function ee(t){return"string"==typeof t?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Jt)}Zt.prototype=te.prototype={constructor:Zt,select:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r,o=e[a],l=o.length,c=i[a]=new Array(l),d=0;d<l;++d)(s=o[d])&&(r=t.call(s,s.__data__,d,o))&&("__data__"in s&&(r.__data__=s.__data__),c[d]=r);return new Zt(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,i=[],a=[],s=0;s<n;++s)for(var r,o=e[s],l=o.length,c=0;c<l;++c)(r=o[c])&&(i.push(t.call(r,r.__data__,c,o)),a.push(r));return new Zt(i,a)},filter:function(t){"function"!=typeof t&&(t=nt(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r=e[a],o=r.length,l=i[a]=[],c=0;c<o;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&l.push(s);return new Zt(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n=e?rt:st,i=this._parents,a=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=a.length,r=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var d=i[c],h=a[c],u=h.length,p=t.call(d,d&&d.__data__,c,i),f=p.length,g=o[c]=new Array(f),m=r[c]=new Array(f);n(d,h,g,m,l[c]=new Array(u),p,e);for(var v,b,y=0,w=0;y<f;++y)if(v=g[y]){for(y>=w&&(w=y+1);!(b=m[w])&&++w<f;);v._next=b||null}}return(r=new Zt(r,i))._enter=o,r._exit=l,r},enter:function(){return new Zt(this._enter||this._groups.map(it),this._parents)},exit:function(){return new Zt(this._exit||this._groups.map(it),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,a=Math.min(i,n.length),s=new Array(i),r=0;r<a;++r)for(var o,l=e[r],c=n[r],d=l.length,h=s[r]=new Array(d),u=0;u<d;++u)(o=l[u]||c[u])&&(h[u]=o);for(;r<i;++r)s[r]=e[r];return new Zt(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,a=t[e],s=a.length-1,r=a[s];--s>=0;)(i=a[s])&&(r&&r!==i.nextSibling&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ot);for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var r,o=n[s],l=o.length,c=a[s]=new Array(l),d=0;d<l;++d)(r=o[d])&&(c[d]=r);c.sort(e)}return new Zt(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,s=i.length;a<s;++a){var r=i[a];if(r)return r}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a,s=e[n],r=0,o=s.length;r<o;++r)(a=s[r])&&t.call(a,a.__data__,r,s);return this},attr:function(t,e){var n=W(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?ct:lt:"function"==typeof e?n.local?pt:ut:n.local?ht:dt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?gt:"function"==typeof e?vt:mt)(t,e,null==n?"":n)):bt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?yt:"function"==typeof e?xt:wt)(t,e)):this.node()[t]},classed:function(t,e){var n=Ct(t+"");if(arguments.length<2){for(var i=kt(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?Dt:e?$t:Et)(n,e))},text:function(t){return arguments.length?this.each(null==t?It:("function"==typeof t?Lt:Mt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Pt:("function"==typeof t?_t:Nt)(t)):this.node().innerHTML},raise:function(){return this.each(Rt)},lower:function(){return this.each(Bt)},append:function(t){var e="function"==typeof t?t:Y(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Y(t),i=null==e?Ot:"function"==typeof e?e:X(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Ft)},clone:function(t){return this.select(t?Ht:zt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,a,s=Wt(t+""),r=s.length;if(!(arguments.length<2)){for(o=e?Gt:Ut,null==n&&(n=!1),i=0;i<r;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var l,c=0,d=o.length;c<d;++c)for(i=0,l=o[c];i<r;++i)if((a=s[i]).type===l.type&&a.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Qt:Xt)(t,e))}};var ne=0;function ie(){return new ae}function ae(){this._="@"+(++ne).toString(36)}function se(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function re(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function oe(t){var e=se();return e.changedTouches&&(e=e.changedTouches[0]),re(t,e)}function le(t,e,n){arguments.length<3&&(n=e,e=se().changedTouches);for(var i,a=0,s=e?e.length:0;a<s;++a)if((i=e[a]).identifier===n)return re(t,i);return null}function ce(){t.event.stopImmediatePropagation()}function de(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function he(t){var e=t.document.documentElement,n=ee(t).on("dragstart.drag",de,!0);"onselectstart"in e?n.on("selectstart.drag",de,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ue(t,e){var n=t.document.documentElement,i=ee(t).on("dragstart.drag",null);e&&(i.on("click.drag",de,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function pe(t){return function(){return t}}function fe(t,e,n,i,a,s,r,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=s,this.y=r,this.dx=o,this.dy=l,this._=c}function ge(){return!t.event.button}function me(){return this.parentNode}function ve(e){return null==e?{x:t.event.x,y:t.event.y}:e}function be(){return"ontouchstart"in this}function ye(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function we(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function xe(){}ae.prototype=ie.prototype={constructor:ae,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},fe.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ce="\\s*([+-]?\\d+)\\s*",ke="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Se=/^#([0-9a-f]{3})$/,Ae=/^#([0-9a-f]{6})$/,$e=new RegExp("^rgb\\("+[Ce,Ce,Ce]+"\\)$"),Ee=new RegExp("^rgb\\("+[Te,Te,Te]+"\\)$"),De=new RegExp("^rgba\\("+[Ce,Ce,Ce,ke]+"\\)$"),Ie=new RegExp("^rgba\\("+[Te,Te,Te,ke]+"\\)$"),Me=new RegExp("^hsl\\("+[ke,Te,Te]+"\\)$"),Le=new RegExp("^hsla\\("+[ke,Te,Te,ke]+"\\)$"),Pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ne(t){var e;return t=(t+"").trim().toLowerCase(),(e=Se.exec(t))?new Fe((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Ae.exec(t))?_e(parseInt(e[1],16)):(e=$e.exec(t))?new Fe(e[1],e[2],e[3],1):(e=Ee.exec(t))?new Fe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=De.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=Ie.exec(t))?Re(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Me.exec(t))?ze(e[1],e[2]/100,e[3]/100,1):(e=Le.exec(t))?ze(e[1],e[2]/100,e[3]/100,e[4]):Pe.hasOwnProperty(t)?_e(Pe[t]):"transparent"===t?new Fe(NaN,NaN,NaN,0):null}function _e(t){return new Fe(t>>16&255,t>>8&255,255&t,1)}function Re(t,e,n,i){return i<=0&&(t=e=n=NaN),new Fe(t,e,n,i)}function Be(t){return t instanceof xe||(t=Ne(t)),t?new Fe((t=t.rgb()).r,t.g,t.b,t.opacity):new Fe}function Oe(t,e,n,i){return 1===arguments.length?Be(t):new Fe(t,e,n,null==i?1:i)}function Fe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ze(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ve(t,e,n,i)}function He(t){if(t instanceof Ve)return new Ve(t.h,t.s,t.l,t.opacity);if(t instanceof xe||(t=Ne(t)),!t)return new Ve;if(t instanceof Ve)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),s=Math.max(e,n,i),r=NaN,o=s-a,l=(s+a)/2;return o?(r=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=l<.5?s+a:2-s-a,r*=60):o=l>0&&l<1?0:r,new Ve(r,o,l,t.opacity)}function qe(t,e,n,i){return 1===arguments.length?He(t):new Ve(t,e,n,null==i?1:i)}function Ve(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function je(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ye(xe,Ne,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ye(Fe,Oe,we(xe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Fe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Fe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ye(Ve,qe,we(xe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ve(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ve(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new Fe(je(t>=240?t-240:t+120,a,i),je(t,a,i),je(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var We=Math.PI/180,Ue=180/Math.PI,Ge=6/29*3*(6/29);function Ye(t){if(t instanceof Xe)return new Xe(t.l,t.a,t.b,t.opacity);if(t instanceof an){var e=t.h*We;return new Xe(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Fe||(t=Be(t));var n=tn(t.r),i=tn(t.g),a=tn(t.b),s=Qe((.4124564*n+.3575761*i+.1804375*a)/.95047),r=Qe((.2126729*n+.7151522*i+.072175*a)/1);return new Xe(116*r-16,500*(s-r),200*(r-Qe((.0193339*n+.119192*i+.9503041*a)/1.08883)),t.opacity)}function Ke(t,e,n,i){return 1===arguments.length?Ye(t):new Xe(t,e,n,null==i?1:i)}function Xe(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Qe(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ge+4/29}function Je(t){return t>6/29?t*t*t:Ge*(t-4/29)}function Ze(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function tn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function en(t){if(t instanceof an)return new an(t.h,t.c,t.l,t.opacity);t instanceof Xe||(t=Ye(t));var e=Math.atan2(t.b,t.a)*Ue;return new an(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function nn(t,e,n,i){return 1===arguments.length?en(t):new an(t,e,n,null==i?1:i)}function an(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}ye(Xe,Ke,we(xe,{brighter:function(t){return new Xe(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Xe(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*Je(t),new Fe(Ze(3.2404542*(e=.95047*Je(e))-1.5371385*t-.4985314*(n=1.08883*Je(n))),Ze(-.969266*e+1.8760108*t+.041556*n),Ze(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),ye(an,nn,we(xe,{brighter:function(t){return new an(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new an(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ye(this).rgb()}}));var sn=-.14861,rn=1.78277,on=-.29227,ln=-.90649,cn=1.97294,dn=cn*ln,hn=cn*rn,un=rn*on-ln*sn;function pn(t){if(t instanceof gn)return new gn(t.h,t.s,t.l,t.opacity);t instanceof Fe||(t=Be(t));var e=t.g/255,n=t.b/255,i=(un*n+dn*(t.r/255)-hn*e)/(un+dn-hn),a=n-i,s=(cn*(e-i)-on*a)/ln,r=Math.sqrt(s*s+a*a)/(cn*i*(1-i)),o=r?Math.atan2(s,a)*Ue-120:NaN;return new gn(o<0?o+360:o,r,i,t.opacity)}function fn(t,e,n,i){return 1===arguments.length?pn(t):new gn(t,e,n,null==i?1:i)}function gn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function mn(t,e,n,i,a){var s=t*t,r=s*t;return((1-3*t+3*s-r)*e+(4-6*s+3*r)*n+(1+3*t+3*s-3*r)*i+r*a)/6}function vn(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],s=t[i+1];return mn((n-i/e)*e,i>0?t[i-1]:2*a-s,a,s,i<e-1?t[i+2]:2*s-a)}}function bn(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e);return mn((n-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}}function yn(t){return function(){return t}}function wn(t,e){return function(n){return t+n*e}}function xn(t,e){var n=e-t;return n?wn(t,n>180||n<-180?n-360*Math.round(n/360):n):yn(isNaN(t)?e:t)}function Cn(t,e){var n=e-t;return n?wn(t,n):yn(isNaN(t)?e:t)}ye(gn,fn,we(xe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new gn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new gn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*We,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new Fe(255*(e+n*(sn*i+rn*a)),255*(e+n*(on*i+ln*a)),255*(e+n*(cn*i)),this.opacity)}}));var kn=function t(e){var n=function(t){return 1==(t=+t)?Cn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):yn(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Oe(t)).r,(e=Oe(e)).r),a=n(t.g,e.g),s=n(t.b,e.b),r=Cn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=a(e),t.b=s(e),t.opacity=r(e),t+""}}return i.gamma=t,i}(1);function Tn(t){return function(e){var n,i,a=e.length,s=new Array(a),r=new Array(a),o=new Array(a);for(n=0;n<a;++n)i=Oe(e[n]),s[n]=i.r||0,r[n]=i.g||0,o[n]=i.b||0;return s=t(s),r=t(r),o=t(o),i.opacity=1,function(t){return i.r=s(t),i.g=r(t),i.b=o(t),i+""}}}var Sn=Tn(vn),An=Tn(bn);function $n(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,s=new Array(a),r=new Array(i);for(n=0;n<a;++n)s[n]=Nn(t[n],e[n]);for(;n<i;++n)r[n]=e[n];return function(t){for(n=0;n<a;++n)r[n]=s[n](t);return r}}function En(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}function Dn(t,e){return e-=t=+t,function(n){return t+e*n}}function In(t,e){var n,i={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Nn(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}}var Mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ln=new RegExp(Mn.source,"g");function Pn(t,e){var n,i,a,s=Mn.lastIndex=Ln.lastIndex=0,r=-1,o=[],l=[];for(t+="",e+="";(n=Mn.exec(t))&&(i=Ln.exec(e));)(a=i.index)>s&&(a=e.slice(s,a),o[r]?o[r]+=a:o[++r]=a),(n=n[0])===(i=i[0])?o[r]?o[r]+=i:o[++r]=i:(o[++r]=null,l.push({i:r,x:Dn(n,i)})),s=Ln.lastIndex;return s<e.length&&(a=e.slice(s),o[r]?o[r]+=a:o[++r]=a),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)o[(n=l[i]).i]=n.x(t);return o.join("")})}function Nn(t,e){var n,i=typeof e;return null==e||"boolean"===i?yn(e):("number"===i?Dn:"string"===i?(n=Ne(e))?(e=n,kn):Pn:e instanceof Ne?kn:e instanceof Date?En:Array.isArray(e)?$n:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?In:Dn)(t,e)}function _n(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}var Rn,Bn,On,Fn,zn=180/Math.PI,Hn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qn(t,e,n,i,a,s){var r,o,l;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,r=-r),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*zn,skewX:Math.atan(l)*zn,scaleX:r,scaleY:o}}function Vn(t,e,n,i){function a(t){return t.length?t.pop()+" ":""}return function(s,r){var o=[],l=[];return s=t(s),r=t(r),function(t,i,a,s,r,o){if(t!==a||i!==s){var l=r.push("translate(",null,e,null,n);o.push({i:l-4,x:Dn(t,a)},{i:l-2,x:Dn(i,s)})}else(a||s)&&r.push("translate("+a+e+s+n)}(s.translateX,s.translateY,r.translateX,r.translateY,o,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(a(n)+"rotate(",null,i)-2,x:Dn(t,e)})):e&&n.push(a(n)+"rotate("+e+i)}(s.rotate,r.rotate,o,l),function(t,e,n,s){t!==e?s.push({i:n.push(a(n)+"skewX(",null,i)-2,x:Dn(t,e)}):e&&n.push(a(n)+"skewX("+e+i)}(s.skewX,r.skewX,o,l),function(t,e,n,i,s,r){if(t!==n||e!==i){var o=s.push(a(s)+"scale(",null,",",null,")");r.push({i:o-4,x:Dn(t,n)},{i:o-2,x:Dn(e,i)})}else 1===n&&1===i||s.push(a(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,r.scaleX,r.scaleY,o,l),s=r=null,function(t){for(var e,n=-1,i=l.length;++n<i;)o[(e=l[n]).i]=e.x(t);return o.join("")}}}var jn=Vn((function(t){return"none"===t?Hn:(Rn||(Rn=document.createElement("DIV"),Bn=document.documentElement,On=document.defaultView),Rn.style.transform=t,t=On.getComputedStyle(Bn.appendChild(Rn),null).getPropertyValue("transform"),Bn.removeChild(Rn),qn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Wn=Vn((function(t){return null==t?Hn:(Fn||(Fn=document.createElementNS("http://www.w3.org/2000/svg","g")),Fn.setAttribute("transform",t),(t=Fn.transform.baseVal.consolidate())?qn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Hn)}),", ",")",")"),Un=Math.SQRT2;function Gn(t){return((t=Math.exp(t))+1/t)/2}function Yn(t,e){var n,i,a=t[0],s=t[1],r=t[2],o=e[2],l=e[0]-a,c=e[1]-s,d=l*l+c*c;if(d<1e-12)i=Math.log(o/r)/Un,n=function(t){return[a+t*l,s+t*c,r*Math.exp(Un*t*i)]};else{var h=Math.sqrt(d),u=(o*o-r*r+4*d)/(2*r*2*h),p=(o*o-r*r-4*d)/(2*o*2*h),f=Math.log(Math.sqrt(u*u+1)-u),g=Math.log(Math.sqrt(p*p+1)-p);i=(g-f)/Un,n=function(t){var e=t*i,n=Gn(f),o=r/(2*h)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Un*e+f)-function(t){return((t=Math.exp(t))-1/t)/2}(f));return[a+o*l,s+o*c,r*n/Gn(Un*e+f)]}}return n.duration=1e3*i,n}function Kn(t){return function(e,n){var i=t((e=qe(e)).h,(n=qe(n)).h),a=Cn(e.s,n.s),s=Cn(e.l,n.l),r=Cn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=s(t),e.opacity=r(t),e+""}}}var Xn=Kn(xn),Qn=Kn(Cn);function Jn(t){return function(e,n){var i=t((e=nn(e)).h,(n=nn(n)).h),a=Cn(e.c,n.c),s=Cn(e.l,n.l),r=Cn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=a(t),e.l=s(t),e.opacity=r(t),e+""}}}var Zn=Jn(xn),ti=Jn(Cn);function ei(t){return function e(n){function i(e,i){var a=t((e=fn(e)).h,(i=fn(i)).h),s=Cn(e.s,i.s),r=Cn(e.l,i.l),o=Cn(e.opacity,i.opacity);return function(t){return e.h=a(t),e.s=s(t),e.l=r(Math.pow(t,n)),e.opacity=o(t),e+""}}return n=+n,i.gamma=e,i}(1)}var ni,ii,ai=ei(xn),si=ei(Cn),ri=0,oi=0,li=0,ci=0,di=0,hi=0,ui="object"==typeof performance&&performance.now?performance:Date,pi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fi(){return di||(pi(gi),di=ui.now()+hi)}function gi(){di=0}function mi(){this._call=this._time=this._next=null}function vi(t,e,n){var i=new mi;return i.restart(t,e,n),i}function bi(){fi(),++ri;for(var t,e=ni;e;)(t=di-e._time)>=0&&e._call.call(null,t),e=e._next;--ri}function yi(){di=(ci=ui.now())+hi,ri=oi=0;try{bi()}finally{ri=0,function(){for(var t,e,n=ni,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ni=e);ii=t,xi(i)}(),di=0}}function wi(){var t=ui.now(),e=t-ci;e>1e3&&(hi-=e,ci=t)}function xi(t){ri||(oi&&(oi=clearTimeout(oi)),t-di>24?(t<1/0&&(oi=setTimeout(yi,t-ui.now()-hi)),li&&(li=clearInterval(li))):(li||(ci=ui.now(),li=setInterval(wi,1e3)),ri=1,pi(yi)))}function Ci(t,e,n){var i=new mi;return i.restart((function(n){i.stop(),t(n+e)}),e=null==e?0:+e,n),i}mi.prototype=vi.prototype={constructor:mi,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fi():+n)+(null==e?0:+e),this._next||ii===this||(ii?ii._next=this:ni=this,ii=this),this._call=t,this._time=n,xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,xi())}};var ki=O("start","end","interrupt"),Ti=[];function Si(t,e,n,i,a,s){var r=t.__transition;if(r){if(n in r)return}else t.__transition={};!function(t,e,n){var i,a=t.__transition;function s(l){var c,d,h,u;if(1!==n.state)return o();for(c in a)if((u=a[c]).name===n.name){if(3===u.state)return Ci(s);4===u.state?(u.state=6,u.timer.stop(),u.on.call("interrupt",t,t.__data__,u.index,u.group),delete a[c]):+c<e&&(u.state=6,u.timer.stop(),delete a[c])}if(Ci((function(){3===n.state&&(n.state=4,n.timer.restart(r,n.delay,n.time),r(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(u=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=u);i.length=d+1}}function r(e){for(var a=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=5,1),s=-1,r=i.length;++s<r;)i[s].call(null,a);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var i in n.state=6,n.timer.stop(),delete a[e],a)return;delete t.__transition}a[e]=n,n.timer=vi((function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:a,on:ki,tween:Ti,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Ai(t,e){var n=Ei(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function $i(t,e){var n=Ei(t,e);if(n.state>2)throw new Error("too late; already started");return n}function Ei(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Di(t,e){var n,i,a,s=t.__transition,r=!0;if(s){for(a in e=null==e?null:e+"",s)(n=s[a]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete s[a]):r=!1;r&&delete t.__transition}}function Ii(t,e){var n,i;return function(){var a=$i(this,t),s=a.tween;if(s!==n)for(var r=0,o=(i=n=s).length;r<o;++r)if(i[r].name===e){(i=i.slice()).splice(r,1);break}a.tween=i}}function Mi(t,e,n){var i,a;if("function"!=typeof n)throw new Error;return function(){var s=$i(this,t),r=s.tween;if(r!==i){a=(i=r).slice();for(var o={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=o;break}l===c&&a.push(o)}s.tween=a}}function Li(t,e,n){var i=t._id;return t.each((function(){var t=$i(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ei(t,i).value[e]}}function Pi(t,e){var n;return("number"==typeof e?Dn:e instanceof Ne?kn:(n=Ne(e))?(e=n,kn):Pn)(t,e)}function Ni(t){return function(){this.removeAttribute(t)}}function _i(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ri(t,e,n){var i,a;return function(){var s=this.getAttribute(t);return s===n?null:s===i?a:a=e(i=s,n)}}function Bi(t,e,n){var i,a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===i?a:a=e(i=s,n)}}function Oi(t,e,n){var i,a,s;return function(){var r,o=n(this);if(null!=o)return(r=this.getAttribute(t))===o?null:r===i&&o===a?s:s=e(i=r,a=o);this.removeAttribute(t)}}function Fi(t,e,n){var i,a,s;return function(){var r,o=n(this);if(null!=o)return(r=this.getAttributeNS(t.space,t.local))===o?null:r===i&&o===a?s:s=e(i=r,a=o);this.removeAttributeNS(t.space,t.local)}}function zi(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function Hi(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}function qi(t,e){return function(){Ai(this,t).delay=+e.apply(this,arguments)}}function Vi(t,e){return e=+e,function(){Ai(this,t).delay=e}}function ji(t,e){return function(){$i(this,t).duration=+e.apply(this,arguments)}}function Wi(t,e){return e=+e,function(){$i(this,t).duration=e}}function Ui(t,e){if("function"!=typeof e)throw new Error;return function(){$i(this,t).ease=e}}function Gi(t,e,n){var i,a,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ai:$i;return function(){var r=s(this,t),o=r.on;o!==i&&(a=(i=o).copy()).on(e,n),r.on=a}}var Yi=te.prototype.constructor;function Ki(t,e,n){function i(){var i=this,a=e.apply(i,arguments);return a&&function(e){i.style.setProperty(t,a(e),n)}}return i._value=e,i}var Xi=0;function Qi(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Ji(t){return te().transition(t)}function Zi(){return++Xi}var ta=te.prototype;function ea(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function na(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Qi.prototype=Ji.prototype={constructor:Qi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=X(t));for(var i=this._groups,a=i.length,s=new Array(a),r=0;r<a;++r)for(var o,l,c=i[r],d=c.length,h=s[r]=new Array(d),u=0;u<d;++u)(o=c[u])&&(l=t.call(o,o.__data__,u,c))&&("__data__"in o&&(l.__data__=o.__data__),h[u]=l,Si(h[u],e,n,u,h,Ei(o,n)));return new Qi(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=J(t));for(var i=this._groups,a=i.length,s=[],r=[],o=0;o<a;++o)for(var l,c=i[o],d=c.length,h=0;h<d;++h)if(l=c[h]){for(var u,p=t.call(l,l.__data__,h,c),f=Ei(l,n),g=0,m=p.length;g<m;++g)(u=p[g])&&Si(u,e,n,g,p,f);s.push(p),r.push(l)}return new Qi(s,r,e,n)},filter:function(t){"function"!=typeof t&&(t=nt(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r=e[a],o=r.length,l=i[a]=[],c=0;c<o;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&l.push(s);return new Qi(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=Math.min(i,n.length),s=new Array(i),r=0;r<a;++r)for(var o,l=e[r],c=n[r],d=l.length,h=s[r]=new Array(d),u=0;u<d;++u)(o=l[u]||c[u])&&(h[u]=o);for(;r<i;++r)s[r]=e[r];return new Qi(s,this._parents,this._name,this._id)},selection:function(){return new Yi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Zi(),i=this._groups,a=i.length,s=0;s<a;++s)for(var r,o=i[s],l=o.length,c=0;c<l;++c)if(r=o[c]){var d=Ei(r,e);Si(r,t,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Qi(i,this._parents,t,n)},call:ta.call,nodes:ta.nodes,node:ta.node,size:ta.size,empty:ta.empty,each:ta.each,on:function(t,e){var n=this._id;return arguments.length<2?Ei(this.node(),n).on.on(t):this.each(Gi(n,t,e))},attr:function(t,e){var n=W(t),i="transform"===n?Wn:Pi;return this.attrTween(t,"function"==typeof e?(n.local?Fi:Oi)(n,i,Li(this,"attr."+t,e)):null==e?(n.local?_i:Ni)(n):(n.local?Bi:Ri)(n,i,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=W(t);return this.tween(n,(i.local?zi:Hi)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?jn:Pi;return null==e?this.styleTween(t,function(t,e){var n,i,a;return function(){var s=bt(this,t),r=(this.style.removeProperty(t),bt(this,t));return s===r?null:s===n&&r===i?a:a=e(n=s,i=r)}}(t,i)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var i,a,s;return function(){var r=bt(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=bt(this,t)),r===o?null:r===i&&o===a?s:s=e(i=r,a=o)}}(t,i,Li(this,"style."+t,e)):function(t,e,n){var i,a;return function(){var s=bt(this,t);return s===n?null:s===i?a:a=e(i=s,n)}}(t,i,e+""),n)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Ki(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Li(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,a=Ei(this.node(),n).tween,s=0,r=a.length;s<r;++s)if((i=a[s]).name===t)return i.value;return null}return this.each((null==e?Ii:Mi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?qi:Vi)(e,t)):Ei(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ji:Wi)(e,t)):Ei(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ui(e,t)):Ei(this.node(),e).ease}};var ia=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),aa=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),sa=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),ra=Math.PI,oa=ra/2;function la(t){return(1-Math.cos(ra*t))/2}function ca(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function da(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ha=7.5625;function ua(t){return(t=+t)<4/11?ha*t*t:t<8/11?ha*(t-=6/11)*t+3/4:t<10/11?ha*(t-=9/11)*t+15/16:ha*(t-=21/22)*t+63/64}var pa=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),fa=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),ga=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),ma=2*Math.PI,va=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ma);function a(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return a.amplitude=function(e){return t(e,n*ma)},a.period=function(n){return t(e,n)},a}(1,.3),ba=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ma);function a(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return a.amplitude=function(e){return t(e,n*ma)},a.period=function(n){return t(e,n)},a}(1,.3),ya=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ma);function a(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return a.amplitude=function(e){return t(e,n*ma)},a.period=function(n){return t(e,n)},a}(1,.3),wa={time:null,delay:0,duration:250,ease:na};function xa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return wa.time=fi(),wa;return n}te.prototype.interrupt=function(t){return this.each((function(){Di(this,t)}))},te.prototype.transition=function(t){var e,n;t instanceof Qi?(e=t._id,t=t._name):(e=Zi(),(n=wa).time=fi(),t=null==t?null:t+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var r,o=i[s],l=o.length,c=0;c<l;++c)(r=o[c])&&Si(r,t,e,c,o,n||xa(r,e));return new Qi(i,this._parents,t,e)};var Ca=[null];function ka(t){return function(){return t}}function Ta(t,e,n){this.target=t,this.type=e,this.selection=n}function Sa(){t.event.stopImmediatePropagation()}function Aa(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var $a={name:"drag"},Ea={name:"space"},Da={name:"handle"},Ia={name:"center"},Ma={name:"x",handles:["e","w"].map(Fa),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},La={name:"y",handles:["n","s"].map(Fa),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Pa={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Fa),input:function(t){return t},output:function(t){return t}},Na={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_a={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ra={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ba={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Oa={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Fa(t){return{type:t}}function za(){return!t.event.button}function Ha(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function qa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Va(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function ja(e){var n,i=Ha,a=za,s=O(o,"start","brush","end"),r=6;function o(t){var n=t.property("__brush",u).selectAll(".overlay").data([Fa("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Na.overlay).merge(n).each((function(){var t=qa(this).extent;ee(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),t.selectAll(".selection").data([Fa("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Na.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Na[t.type]})),t.each(l).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function l(){var t=ee(this),e=qa(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-r/2:e[0][0]-r/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-r/2:e[0][1]-r/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+r:r})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+r:r}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e){return t.__brush.emitter||new d(t,e)}function d(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return Aa()}else if(n)return;if(a.apply(this,arguments)){var i,s,r,o,d,h,u,p,f,g,m,v,b,y=this,w=t.event.target.__data__.type,x="selection"===(t.event.metaKey?w="overlay":w)?$a:t.event.altKey?Ia:Da,C=e===La?null:Ba[w],k=e===Ma?null:Oa[w],T=qa(y),S=T.extent,A=T.selection,$=S[0][0],E=S[0][1],D=S[1][0],I=S[1][1],M=C&&k&&t.event.shiftKey,L=oe(y),P=L,N=c(y,arguments).beforestart();"overlay"===w?T.selection=A=[[i=e===La?$:L[0],r=e===Ma?E:L[1]],[d=e===La?D:i,u=e===Ma?I:r]]:(i=A[0][0],r=A[0][1],d=A[1][0],u=A[1][1]),s=i,o=r,h=d,p=u;var _=ee(y).attr("pointer-events","none"),R=_.selectAll(".overlay").attr("cursor",Na[w]);if(t.event.touches)_.on("touchmove.brush",O,!0).on("touchend.brush touchcancel.brush",z,!0);else{var B=ee(t.event.view).on("keydown.brush",H,!0).on("keyup.brush",q,!0).on("mousemove.brush",O,!0).on("mouseup.brush",z,!0);he(t.event.view)}Sa(),Di(y),l.call(y),N.start()}function O(){var t=oe(y);!M||v||b||(Math.abs(t[0]-P[0])>Math.abs(t[1]-P[1])?b=!0:v=!0),P=t,m=!0,Aa(),F()}function F(){var t;switch(f=P[0]-L[0],g=P[1]-L[1],x){case Ea:case $a:C&&(f=Math.max($-i,Math.min(D-d,f)),s=i+f,h=d+f),k&&(g=Math.max(E-r,Math.min(I-u,g)),o=r+g,p=u+g);break;case Da:C<0?(f=Math.max($-i,Math.min(D-i,f)),s=i+f,h=d):C>0&&(f=Math.max($-d,Math.min(D-d,f)),s=i,h=d+f),k<0?(g=Math.max(E-r,Math.min(I-r,g)),o=r+g,p=u):k>0&&(g=Math.max(E-u,Math.min(I-u,g)),o=r,p=u+g);break;case Ia:C&&(s=Math.max($,Math.min(D,i-f*C)),h=Math.max($,Math.min(D,d+f*C))),k&&(o=Math.max(E,Math.min(I,r-g*k)),p=Math.max(E,Math.min(I,u+g*k)))}h<s&&(C*=-1,t=i,i=d,d=t,t=s,s=h,h=t,w in _a&&R.attr("cursor",Na[w=_a[w]])),p<o&&(k*=-1,t=r,r=u,u=t,t=o,o=p,p=t,w in Ra&&R.attr("cursor",Na[w=Ra[w]])),T.selection&&(A=T.selection),v&&(s=A[0][0],h=A[1][0]),b&&(o=A[0][1],p=A[1][1]),A[0][0]===s&&A[0][1]===o&&A[1][0]===h&&A[1][1]===p||(T.selection=[[s,o],[h,p]],l.call(y),N.brush())}function z(){if(Sa(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),_.on("touchmove.brush touchend.brush touchcancel.brush",null)}else ue(t.event.view,m),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);_.attr("pointer-events","all"),R.attr("cursor",Na.overlay),T.selection&&(A=T.selection),Va(A)&&(T.selection=null,l.call(y)),N.end()}function H(){switch(t.event.keyCode){case 16:M=C&&k;break;case 18:x===Da&&(C&&(d=h-f*C,i=s+f*C),k&&(u=p-g*k,r=o+g*k),x=Ia,F());break;case 32:x!==Da&&x!==Ia||(C<0?d=h-f:C>0&&(i=s-f),k<0?u=p-g:k>0&&(r=o-g),x=Ea,R.attr("cursor",Na.selection),F());break;default:return}Aa()}function q(){switch(t.event.keyCode){case 16:M&&(v=b=M=!1,F());break;case 18:x===Ia&&(C<0?d=h:C>0&&(i=s),k<0?u=p:k>0&&(r=o),x=Da,F());break;case 32:x===Ea&&(t.event.altKey?(C&&(d=h-f*C,i=s+f*C),k&&(u=p-g*k,r=o+g*k),x=Ia):(C<0?d=h:C>0&&(i=s),k<0?u=p:k>0&&(r=o),x=Da),R.attr("cursor",Na[w]),F());break;default:return}Aa()}}function u(){var t=this.__brush||{selection:null};return t.extent=i.apply(this,arguments),t.dim=e,t}return o.move=function(t,n){t.selection?t.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var t=this,i=t.__brush,a=c(t,arguments),s=i.selection,r=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),o=Nn(s,r);function d(e){i.selection=1===e&&Va(r)?null:o(e),l.call(t),a.brush()}return s&&r?d:d(1)})):t.each((function(){var t=this,i=arguments,a=t.__brush,s=e.input("function"==typeof n?n.apply(t,i):n,a.extent),r=c(t,i).beforestart();Di(t),a.selection=null==s||Va(s)?null:s,l.call(t),r.start().brush().end()}))},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Yt(new Ta(o,t,e.output(this.state.selection)),s.apply,s,[t,this.that,this.args])}},o.extent=function(t){return arguments.length?(i="function"==typeof t?t:ka([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),o):i},o.filter=function(t){return arguments.length?(a="function"==typeof t?t:ka(!!t),o):a},o.handleSize=function(t){return arguments.length?(r=+t,o):r},o.on=function(){var t=s.on.apply(s,arguments);return t===s?o:t},o}var Wa=Math.cos,Ua=Math.sin,Ga=Math.PI,Ya=Ga/2,Ka=2*Ga,Xa=Math.max;function Qa(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Ja=Array.prototype.slice;function Za(t){return function(){return t}}var ts=Math.PI,es=2*ts,ns=es-1e-6;function is(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function as(){return new is}function ss(t){return t.source}function rs(t){return t.target}function os(t){return t.radius}function ls(t){return t.startAngle}function cs(t){return t.endAngle}function ds(){}function hs(t,e){var n=new ds;if(t instanceof ds)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,a=-1,s=t.length;if(null==e)for(;++a<s;)n.set(a,t[a]);else for(;++a<s;)n.set(e(i=t[a],a,t),i)}else if(t)for(var r in t)n.set(r,t[r]);return n}function us(){return{}}function ps(t,e,n){t[e]=n}function fs(){return hs()}function gs(t,e,n){t.set(e,n)}function ms(){}is.prototype=as.prototype={constructor:is,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+s)},arcTo:function(t,e,n,i,a){var s=this._x1,r=this._y1,o=(n=+n)-(t=+t),l=(i=+i)-(e=+e),c=s-t,d=r-e,h=c*c+d*d;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(d*o-l*c)>1e-6&&a){var u=n-s,p=i-r,f=o*o+l*l,g=u*u+p*p,m=Math.sqrt(f),v=Math.sqrt(h),b=a*Math.tan((ts-Math.acos((f+h-g)/(2*m*v)))/2),y=b/v,w=b/m;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*c)+","+(e+y*d)),this._+="A"+a+","+a+",0,0,"+ +(d*u>c*p)+","+(this._x1=t+w*o)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,a,s){t=+t,e=+e;var r=(n=+n)*Math.cos(i),o=n*Math.sin(i),l=t+r,c=e+o,d=1^s,h=s?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%es+es),h>ns?this._+="A"+n+","+n+",0,1,"+d+","+(t-r)+","+(e-o)+"A"+n+","+n+",0,1,"+d+","+(this._x1=l)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=ts)+","+d+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},ds.prototype=hs.prototype={constructor:ds,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var vs=hs.prototype;function bs(t,e){var n=new ms;if(t instanceof ms)t.each((function(t){n.add(t)}));else if(t){var i=-1,a=t.length;if(null==e)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}ms.prototype=bs.prototype={constructor:ms,has:vs.has,add:function(t){return this["$"+(t+="")]=t,this},remove:vs.remove,clear:vs.clear,values:vs.keys,size:vs.size,empty:vs.empty,each:vs.each};var ys={},ws={};function xs(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}function Cs(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,a=[],s=t.length,r=0,o=0,l=s<=0,c=!1;function d(){if(l)return ws;if(c)return c=!1,ys;var e,i,a=r;if(34===t.charCodeAt(a)){for(;r++<s&&34!==t.charCodeAt(r)||34===t.charCodeAt(++r););return(e=r)>=s?l=!0:10===(i=t.charCodeAt(r++))?c=!0:13===i&&(c=!0,10===t.charCodeAt(r)&&++r),t.slice(a+1,e-1).replace(/""/g,'"')}for(;r<s;){if(10===(i=t.charCodeAt(e=r++)))c=!0;else if(13===i)c=!0,10===t.charCodeAt(r)&&++r;else if(i!==n)continue;return t.slice(a,e)}return l=!0,t.slice(a,s)}for(10===t.charCodeAt(s-1)&&--s,13===t.charCodeAt(s-1)&&--s;(i=d())!==ws;){for(var h=[];i!==ys&&i!==ws;)h.push(i),i=d();e&&null==(h=e(h,o++))||a.push(h)}return a}function a(e){return e.map(s).join(t)}function s(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,a,s=i(t,(function(t,i){if(n)return n(t,i-1);a=t,n=e?function(t,e){var n=xs(t);return function(i,a){return e(n(i),a,t)}}(t,e):xs(t)}));return s.columns=a||[],s},parseRows:i,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}(e)),[n.map(s).join(t)].concat(e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(a).join("\n")}}}var ks=Cs(","),Ts=ks.parse,Ss=ks.parseRows,As=ks.format,$s=ks.formatRows,Es=Cs("\t"),Ds=Es.parse,Is=Es.parseRows,Ms=Es.format,Ls=Es.formatRows;function Ps(t){return function(){return t}}function Ns(){return 1e-6*(Math.random()-.5)}function _s(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,s,r,o,l,c,d,h,u,p=t._root,f={data:i},g=t._x0,m=t._y0,v=t._x1,b=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(s=(g+v)/2))?g=s:v=s,(d=n>=(r=(m+b)/2))?m=r:b=r,a=p,!(p=p[h=d<<1|c]))return a[h]=f,t;if(o=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===o&&n===l)return f.next=p,a?a[h]=f:t._root=f,t;do{a=a?a[h]=new Array(4):t._root=new Array(4),(c=e>=(s=(g+v)/2))?g=s:v=s,(d=n>=(r=(m+b)/2))?m=r:b=r}while((h=d<<1|c)==(u=(l>=r)<<1|o>=s));return a[u]=p,a[h]=f,t}function Rs(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function Bs(t){return t[0]}function Os(t){return t[1]}function Fs(t,e,n){var i=new zs(null==e?Bs:e,null==n?Os:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function zs(t,e,n,i,a,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=s,this._root=void 0}function Hs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var qs=Fs.prototype=zs.prototype;function Vs(t){return t.x+t.vx}function js(t){return t.y+t.vy}function Ws(t){return t.index}function Us(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Gs(t){return t.x}function Ys(t){return t.y}qs.copy=function(){var t,e,n=new zs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Hs(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var a=0;a<4;++a)(e=i.source[a])&&(e.length?t.push({source:e,target:i.target[a]=new Array(4)}):i.target[a]=Hs(e));return n},qs.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return _s(this.cover(e,n),e,n,t)},qs.addAll=function(t){var e,n,i,a,s=t.length,r=new Array(s),o=new Array(s),l=1/0,c=1/0,d=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(r[n]=i,o[n]=a,i<l&&(l=i),i>d&&(d=i),a<c&&(c=a),a>h&&(h=a));for(d<l&&(l=this._x0,d=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(l,c).cover(d,h),n=0;n<s;++n)_s(this,r[n],o[n],t[n]);return this},qs.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,s=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{if(!(n>t||t>a||i>e||e>s))return this;var r,o,l=a-n,c=this._root;switch(o=(e<(i+s)/2)<<1|t<(n+a)/2){case 0:do{(r=new Array(4))[o]=c,c=r}while(s=i+(l*=2),t>(a=n+l)||e>s);break;case 1:do{(r=new Array(4))[o]=c,c=r}while(s=i+(l*=2),(n=a-l)>t||e>s);break;case 2:do{(r=new Array(4))[o]=c,c=r}while(i=s-(l*=2),t>(a=n+l)||i>e);break;case 3:do{(r=new Array(4))[o]=c,c=r}while(i=s-(l*=2),(n=a-l)>t||i>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=a,this._y1=s,this},qs.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},qs.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},qs.find=function(t,e,n){var i,a,s,r,o,l,c,d=this._x0,h=this._y0,u=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new Rs(g,d,h,u,p)),null==n?n=1/0:(d=t-n,h=e-n,u=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(a=l.x0)>u||(s=l.y0)>p||(r=l.x1)<d||(o=l.y1)<h))if(g.length){var m=(a+r)/2,v=(s+o)/2;f.push(new Rs(g[3],m,v,r,o),new Rs(g[2],a,v,m,o),new Rs(g[1],m,s,r,v),new Rs(g[0],a,s,m,v)),(c=(e>=v)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var b=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),w=b*b+y*y;if(w<n){var x=Math.sqrt(n=w);d=t-x,h=e-x,u=t+x,p=e+x,i=g.data}}return i},qs.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t)))return this;var e,n,i,a,s,r,o,l,c,d,h,u,p=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=s>=(o=(f+m)/2))?f=o:m=o,(d=r>=(l=(g+v)/2))?g=l:v=l,e=p,!(p=p[h=d<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,u=h)}for(;p.data!==t;)if(i=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,i?(a?i.next=a:delete i.next,this):e?(a?e[h]=a:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[u]=p:this._root=p),this):(this._root=a,this)},qs.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},qs.root=function(){return this._root},qs.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},qs.visit=function(t){var e,n,i,a,s,r,o=[],l=this._root;for(l&&o.push(new Rs(l,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(l=e.node,i=e.x0,a=e.y0,s=e.x1,r=e.y1)&&l.length){var c=(i+s)/2,d=(a+r)/2;(n=l[3])&&o.push(new Rs(n,c,d,s,r)),(n=l[2])&&o.push(new Rs(n,i,d,c,r)),(n=l[1])&&o.push(new Rs(n,c,a,s,d)),(n=l[0])&&o.push(new Rs(n,i,a,c,d))}return this},qs.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Rs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var s,r=e.x0,o=e.y0,l=e.x1,c=e.y1,d=(r+l)/2,h=(o+c)/2;(s=a[0])&&n.push(new Rs(s,r,o,d,h)),(s=a[1])&&n.push(new Rs(s,d,o,l,h)),(s=a[2])&&n.push(new Rs(s,r,h,d,c)),(s=a[3])&&n.push(new Rs(s,d,h,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},qs.x=function(t){return arguments.length?(this._x=t,this):this._x},qs.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ks,Xs=Math.PI*(3-Math.sqrt(5));function Qs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Js(t){return(t=Qs(Math.abs(t)))?t[1]:NaN}function Zs(t,e){var n=Qs(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}var tr={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,a=1,s=-1;a<i;++a)switch(t[a]){case".":s=n=a;break;case"0":0===s&&(s=a),n=a;break;case"e":break t;default:s>0&&(s=0)}return s>0?t.slice(0,s)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Zs(100*t,e)},r:Zs,s:function(t,e){var n=Qs(t,e);if(!n)return t+"";var i=n[0],a=n[1],s=a-(Ks=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,r=i.length;return s===r?i:s>r?i+new Array(s-r+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Qs(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},er=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function nr(t){return new ir(t)}function ir(t){if(!(e=er.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",a=e[3]||"-",s=e[4]||"",r=!!e[5],o=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),d=e[9]||"";"n"===d?(l=!0,d="g"):tr[d]||(d=""),(r||"0"===n&&"="===i)&&(r=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=a,this.symbol=s,this.zero=r,this.width=o,this.comma=l,this.precision=c,this.type=d}function ar(t){return t}nr.prototype=ir.prototype,ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var sr,rr=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function or(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var a=t.length,s=[],r=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(t.substring(a-=o,a+o)),!((l+=o+1)>i));)o=e[r=(r+1)%e.length];return s.reverse().join(n)}):ar,a=t.currency,s=t.decimal,r=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):ar,o=t.percent||"%";function l(t){var e=(t=nr(t)).fill,n=t.align,l=t.sign,c=t.symbol,d=t.zero,h=t.width,u=t.comma,p=t.precision,f=t.type,g="$"===c?a[0]:"#"===c&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",m="$"===c?a[1]:/[%p]/.test(f)?o:"",v=tr[f],b=!f||/[defgprs%]/.test(f);function y(t){var a,o,c,y=g,w=m;if("c"===f)w=v(t)+w,t="";else{var x=(t=+t)<0;if(t=v(Math.abs(t),p),x&&0==+t&&(x=!1),y=(x?"("===l?l:"-":"-"===l||"("===l?"":l)+y,w=("s"===f?rr[8+Ks/3]:"")+w+(x&&"("===l?")":""),b)for(a=-1,o=t.length;++a<o;)if(48>(c=t.charCodeAt(a))||c>57){w=(46===c?s+t.slice(a+1):t.slice(a))+w,t=t.slice(0,a);break}}u&&!d&&(t=i(t,1/0));var C=y.length+t.length+w.length,k=C<h?new Array(h-C+1).join(e):"";switch(u&&d&&(t=i(k+t,k.length?h-w.length:1/0),k=""),n){case"<":t=y+t+w+k;break;case"=":t=y+k+t+w;break;case"^":t=k.slice(0,C=k.length>>1)+y+t+w+k.slice(C);break;default:t=k+y+t+w}return r(t)}return p=null==p?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),y.toString=function(){return t+""},y}return{format:l,formatPrefix:function(t,e){var n=l(((t=nr(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Js(e)/3))),a=Math.pow(10,-i),s=rr[8+i/3];return function(t){return n(a*t)+s}}}}function lr(e){return sr=or(e),t.format=sr.format,t.formatPrefix=sr.formatPrefix,sr}function cr(t){return Math.max(0,-Js(Math.abs(t)))}function dr(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Js(e)/3)))-Js(Math.abs(t)))}function hr(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Js(e)-Js(t))+1}function ur(){return new pr}function pr(){this.reset()}lr({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),pr.prototype={constructor:pr,reset:function(){this.s=this.t=0},add:function(t){gr(fr,t,this.t),gr(this,fr.s,this.s),this.s?this.t+=fr.t:this.s=fr.t},valueOf:function(){return this.s}};var fr=new pr;function gr(t,e,n){var i=t.s=e+n,a=i-e;t.t=e-(i-a)+(n-a)}var mr=Math.PI,vr=mr/2,br=mr/4,yr=2*mr,wr=180/mr,xr=mr/180,Cr=Math.abs,kr=Math.atan,Tr=Math.atan2,Sr=Math.cos,Ar=Math.ceil,$r=Math.exp,Er=Math.log,Dr=Math.pow,Ir=Math.sin,Mr=Math.sign||function(t){return t>0?1:t<0?-1:0},Lr=Math.sqrt,Pr=Math.tan;function Nr(t){return t>1?0:t<-1?mr:Math.acos(t)}function _r(t){return t>1?vr:t<-1?-vr:Math.asin(t)}function Rr(t){return(t=Ir(t/2))*t}function Br(){}function Or(t,e){t&&zr.hasOwnProperty(t.type)&&zr[t.type](t,e)}var Fr={Feature:function(t,e){Or(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)Or(n[i].geometry,e)}},zr={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){Hr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)Hr(n[i],e,0)},Polygon:function(t,e){qr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)qr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)Or(n[i],e)}};function Hr(t,e,n){var i,a=-1,s=t.length-n;for(e.lineStart();++a<s;)e.point((i=t[a])[0],i[1],i[2]);e.lineEnd()}function qr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Hr(t[n],e,1);e.polygonEnd()}function Vr(t,e){t&&Fr.hasOwnProperty(t.type)?Fr[t.type](t,e):Or(t,e)}var jr,Wr,Ur,Gr,Yr,Kr,Xr,Qr,Jr,Zr,to,eo,no,io=ur(),ao=ur(),so={point:Br,lineStart:Br,lineEnd:Br,polygonStart:function(){io.reset(),so.lineStart=ro,so.lineEnd=oo},polygonEnd:function(){var t=+io;ao.add(t<0?yr+t:t),this.lineStart=this.lineEnd=this.point=Br},sphere:function(){ao.add(yr)}};function ro(){so.point=lo}function oo(){co(jr,Wr)}function lo(t,e){so.point=co,jr=t,Wr=e,Ur=t*=xr,Gr=Sr(e=(e*=xr)/2+br),Yr=Ir(e)}function co(t,e){var n=(t*=xr)-Ur,i=n>=0?1:-1,a=i*n,s=Sr(e=(e*=xr)/2+br),r=Ir(e),o=Yr*r,l=Gr*s+o*Sr(a),c=o*i*Ir(a);io.add(Tr(c,l)),Ur=t,Gr=s,Yr=r}function ho(t){return[Tr(t[1],t[0]),_r(t[2])]}function uo(t){var e=t[0],n=t[1],i=Sr(n);return[i*Sr(e),i*Ir(e),Ir(n)]}function po(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function go(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function vo(t){var e=Lr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var bo,yo,wo,xo,Co,ko,To,So,Ao,$o,Eo,Do,Io,Mo,Lo,Po,No,_o,Ro=ur(),Bo={point:Oo,lineStart:zo,lineEnd:Ho,polygonStart:function(){Bo.point=qo,Bo.lineStart=Vo,Bo.lineEnd=jo,Ro.reset(),so.polygonStart()},polygonEnd:function(){so.polygonEnd(),Bo.point=Oo,Bo.lineStart=zo,Bo.lineEnd=Ho,io<0?(Kr=-(Qr=180),Xr=-(Jr=90)):Ro>1e-6?Jr=90:Ro<-1e-6&&(Xr=-90),yo[0]=Kr,yo[1]=Qr}};function Oo(t,e){bo.push(yo=[Kr=t,Qr=t]),e<Xr&&(Xr=e),e>Jr&&(Jr=e)}function Fo(t,e){var n=uo([t*xr,e*xr]);if(no){var i=fo(no,n),a=fo([i[1],-i[0],0],i);vo(a),a=ho(a);var s,r=t-Zr,o=r>0?1:-1,l=a[0]*wr*o,c=Cr(r)>180;c^(o*Zr<l&&l<o*t)?(s=a[1]*wr)>Jr&&(Jr=s):c^(o*Zr<(l=(l+360)%360-180)&&l<o*t)?(s=-a[1]*wr)<Xr&&(Xr=s):(e<Xr&&(Xr=e),e>Jr&&(Jr=e)),c?t<Zr?Wo(Kr,t)>Wo(Kr,Qr)&&(Qr=t):Wo(t,Qr)>Wo(Kr,Qr)&&(Kr=t):Qr>=Kr?(t<Kr&&(Kr=t),t>Qr&&(Qr=t)):t>Zr?Wo(Kr,t)>Wo(Kr,Qr)&&(Qr=t):Wo(t,Qr)>Wo(Kr,Qr)&&(Kr=t)}else bo.push(yo=[Kr=t,Qr=t]);e<Xr&&(Xr=e),e>Jr&&(Jr=e),no=n,Zr=t}function zo(){Bo.point=Fo}function Ho(){yo[0]=Kr,yo[1]=Qr,Bo.point=Oo,no=null}function qo(t,e){if(no){var n=t-Zr;Ro.add(Cr(n)>180?n+(n>0?360:-360):n)}else to=t,eo=e;so.point(t,e),Fo(t,e)}function Vo(){so.lineStart()}function jo(){qo(to,eo),so.lineEnd(),Cr(Ro)>1e-6&&(Kr=-(Qr=180)),yo[0]=Kr,yo[1]=Qr,no=null}function Wo(t,e){return(e-=t)<0?e+360:e}function Uo(t,e){return t[0]-e[0]}function Go(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Yo={sphere:Br,point:Ko,lineStart:Qo,lineEnd:tl,polygonStart:function(){Yo.lineStart=el,Yo.lineEnd=nl},polygonEnd:function(){Yo.lineStart=Qo,Yo.lineEnd=tl}};function Ko(t,e){t*=xr;var n=Sr(e*=xr);Xo(n*Sr(t),n*Ir(t),Ir(e))}function Xo(t,e,n){++wo,Co+=(t-Co)/wo,ko+=(e-ko)/wo,To+=(n-To)/wo}function Qo(){Yo.point=Jo}function Jo(t,e){t*=xr;var n=Sr(e*=xr);Po=n*Sr(t),No=n*Ir(t),_o=Ir(e),Yo.point=Zo,Xo(Po,No,_o)}function Zo(t,e){t*=xr;var n=Sr(e*=xr),i=n*Sr(t),a=n*Ir(t),s=Ir(e),r=Tr(Lr((r=No*s-_o*a)*r+(r=_o*i-Po*s)*r+(r=Po*a-No*i)*r),Po*i+No*a+_o*s);xo+=r,So+=r*(Po+(Po=i)),Ao+=r*(No+(No=a)),$o+=r*(_o+(_o=s)),Xo(Po,No,_o)}function tl(){Yo.point=Ko}function el(){Yo.point=il}function nl(){al(Mo,Lo),Yo.point=Ko}function il(t,e){Mo=t,Lo=e,t*=xr,e*=xr,Yo.point=al;var n=Sr(e);Po=n*Sr(t),No=n*Ir(t),_o=Ir(e),Xo(Po,No,_o)}function al(t,e){t*=xr;var n=Sr(e*=xr),i=n*Sr(t),a=n*Ir(t),s=Ir(e),r=No*s-_o*a,o=_o*i-Po*s,l=Po*a-No*i,c=Lr(r*r+o*o+l*l),d=_r(c),h=c&&-d/c;Eo+=h*r,Do+=h*o,Io+=h*l,xo+=d,So+=d*(Po+(Po=i)),Ao+=d*(No+(No=a)),$o+=d*(_o+(_o=s)),Xo(Po,No,_o)}function sl(t){return function(){return t}}function rl(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function ol(t,e){return[t>mr?t-yr:t<-mr?t+yr:t,e]}function ll(t,e,n){return(t%=yr)?e||n?rl(dl(t),hl(e,n)):dl(t):e||n?hl(e,n):ol}function cl(t){return function(e,n){return[(e+=t)>mr?e-yr:e<-mr?e+yr:e,n]}}function dl(t){var e=cl(t);return e.invert=cl(-t),e}function hl(t,e){var n=Sr(t),i=Ir(t),a=Sr(e),s=Ir(e);function r(t,e){var r=Sr(e),o=Sr(t)*r,l=Ir(t)*r,c=Ir(e),d=c*n+o*i;return[Tr(l*a-d*s,o*n-c*i),_r(d*a+l*s)]}return r.invert=function(t,e){var r=Sr(e),o=Sr(t)*r,l=Ir(t)*r,c=Ir(e),d=c*a-l*s;return[Tr(l*a+c*s,o*n+d*i),_r(d*n-o*i)]},r}function ul(t){function e(e){return(e=t(e[0]*xr,e[1]*xr))[0]*=wr,e[1]*=wr,e}return t=ll(t[0]*xr,t[1]*xr,t.length>2?t[2]*xr:0),e.invert=function(e){return(e=t.invert(e[0]*xr,e[1]*xr))[0]*=wr,e[1]*=wr,e},e}function pl(t,e,n,i,a,s){if(n){var r=Sr(e),o=Ir(e),l=i*n;null==a?(a=e+i*yr,s=e-l/2):(a=fl(r,a),s=fl(r,s),(i>0?a<s:a>s)&&(a+=i*yr));for(var c,d=a;i>0?d>s:d<s;d-=l)c=ho([r,-o*Sr(d),-o*Ir(d)]),t.point(c[0],c[1])}}function fl(t,e){(e=uo(e))[0]-=t,vo(e);var n=Nr(-e[1]);return((-e[2]<0?-n:n)+yr-1e-6)%yr}function gl(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Br,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ml(t,e){return Cr(t[0]-e[0])<1e-6&&Cr(t[1]-e[1])<1e-6}function vl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function bl(t,e,n,i,a){var s,r,o=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(ml(i,r)){for(a.lineStart(),s=0;s<e;++s)a.point((i=t[s])[0],i[1]);a.lineEnd()}else o.push(n=new vl(i,t,null,!0)),l.push(n.o=new vl(i,null,n,!1)),o.push(n=new vl(r,t,null,!1)),l.push(n.o=new vl(r,null,n,!0))}})),o.length){for(l.sort(e),yl(o),yl(l),s=0,r=l.length;s<r;++s)l[s].e=n=!n;for(var c,d,h=o[0];;){for(var u=h,p=!0;u.v;)if((u=u.n)===h)return;c=u.z,a.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(s=0,r=c.length;s<r;++s)a.point((d=c[s])[0],d[1]);else i(u.x,u.n.x,1,a);u=u.n}else{if(p)for(s=(c=u.p.z).length-1;s>=0;--s)a.point((d=c[s])[0],d[1]);else i(u.x,u.p.x,-1,a);u=u.p}c=(u=u.o).z,p=!p}while(!u.v);a.lineEnd()}}}function yl(t){if(e=t.length){for(var e,n,i=0,a=t[0];++i<e;)a.n=n=t[i],n.p=a,a=n;a.n=n=t[0],n.p=a}}ol.invert=ol;var wl=ur();function xl(t,e){var n=e[0],i=e[1],a=[Ir(n),-Sr(n),0],s=0,r=0;wl.reset();for(var o=0,l=t.length;o<l;++o)if(d=(c=t[o]).length)for(var c,d,h=c[d-1],u=h[0],p=h[1]/2+br,f=Ir(p),g=Sr(p),m=0;m<d;++m,u=b,f=w,g=x,h=v){var v=c[m],b=v[0],y=v[1]/2+br,w=Ir(y),x=Sr(y),C=b-u,k=C>=0?1:-1,T=k*C,S=T>mr,A=f*w;if(wl.add(Tr(A*k*Ir(T),g*x+A*Sr(T))),s+=S?C+k*yr:C,S^u>=n^b>=n){var $=fo(uo(h),uo(v));vo($);var E=fo(a,$);vo(E);var D=(S^C>=0?-1:1)*_r(E[2]);(i>D||i===D&&($[0]||$[1]))&&(r+=S^C>=0?1:-1)}}return(s<-1e-6||s<1e-6&&wl<-1e-6)^1&r}function Cl(t,e,n,i){return function(a){var s,r,o,l=e(a),c=gl(),d=e(c),h=!1,u={point:p,lineStart:g,lineEnd:m,polygonStart:function(){u.point=v,u.lineStart=b,u.lineEnd=y,r=[],s=[]},polygonEnd:function(){u.point=p,u.lineStart=g,u.lineEnd=m,r=S(r);var t=xl(s,i);r.length?(h||(a.polygonStart(),h=!0),bl(r,Tl,t,n,a)):t&&(h||(a.polygonStart(),h=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),h&&(a.polygonEnd(),h=!1),r=s=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(e,n){t(e,n)&&a.point(e,n)}function f(t,e){l.point(t,e)}function g(){u.point=f,l.lineStart()}function m(){u.point=p,l.lineEnd()}function v(t,e){o.push([t,e]),d.point(t,e)}function b(){d.lineStart(),o=[]}function y(){v(o[0][0],o[0][1]),d.lineEnd();var t,e,n,i,l=d.clean(),u=c.result(),p=u.length;if(o.pop(),s.push(o),o=null,p)if(1&l){if((e=(n=u[0]).length-1)>0){for(h||(a.polygonStart(),h=!0),a.lineStart(),t=0;t<e;++t)a.point((i=n[t])[0],i[1]);a.lineEnd()}}else p>1&&2&l&&u.push(u.pop().concat(u.shift())),r.push(u.filter(kl))}return u}}function kl(t){return t.length>1}function Tl(t,e){return((t=t.x)[0]<0?t[1]-vr-1e-6:vr-t[1])-((e=e.x)[0]<0?e[1]-vr-1e-6:vr-e[1])}var Sl=Cl((function(){return!0}),(function(t){var e,n=NaN,i=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,r){var o=s>0?mr:-mr,l=Cr(s-n);Cr(l-mr)<1e-6?(t.point(n,i=(i+r)/2>0?vr:-vr),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(o,i),t.point(s,i),e=0):a!==o&&l>=mr&&(Cr(n-a)<1e-6&&(n-=1e-6*a),Cr(s-o)<1e-6&&(s-=1e-6*o),i=function(t,e,n,i){var a,s,r=Ir(t-n);return Cr(r)>1e-6?kr((Ir(e)*(s=Sr(i))*Ir(n)-Ir(i)*(a=Sr(e))*Ir(t))/(a*s*r)):(e+i)/2}(n,i,s,r),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(o,i),e=0),t.point(n=s,i=r),a=o},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var a;if(null==t)i.point(-mr,a=n*vr),i.point(0,a),i.point(mr,a),i.point(mr,0),i.point(mr,-a),i.point(0,-a),i.point(-mr,-a),i.point(-mr,0),i.point(-mr,a);else if(Cr(t[0]-e[0])>1e-6){var s=t[0]<e[0]?mr:-mr;i.point(-s,a=n*s/2),i.point(0,a),i.point(s,a)}else i.point(e[0],e[1])}),[-mr,-vr]);function Al(t){var e=Sr(t),n=6*xr,i=e>0,a=Cr(e)>1e-6;function s(t,n){return Sr(t)*Sr(n)>e}function r(t,n,i){var a=[1,0,0],s=fo(uo(t),uo(n)),r=po(s,s),o=s[0],l=r-o*o;if(!l)return!i&&t;var c=e*r/l,d=-e*o/l,h=fo(a,s),u=mo(a,c);go(u,mo(s,d));var p=h,f=po(u,p),g=po(p,p),m=f*f-g*(po(u,u)-1);if(!(m<0)){var v=Lr(m),b=mo(p,(-f-v)/g);if(go(b,u),b=ho(b),!i)return b;var y,w=t[0],x=n[0],C=t[1],k=n[1];x<w&&(y=w,w=x,x=y);var T=x-w,S=Cr(T-mr)<1e-6;if(!S&&k<C&&(y=C,C=k,k=y),S||T<1e-6?S?C+k>0^b[1]<(Cr(b[0]-w)<1e-6?C:k):C<=b[1]&&b[1]<=k:T>mr^(w<=b[0]&&b[0]<=x)){var A=mo(p,(-f+v)/g);return go(A,u),[b,ho(A)]}}}function o(e,n){var a=i?t:mr-t,s=0;return e<-a?s|=1:e>a&&(s|=2),n<-a?s|=4:n>a&&(s|=8),s}return Cl(s,(function(t){var e,n,l,c,d;return{lineStart:function(){c=l=!1,d=1},point:function(h,u){var p,f=[h,u],g=s(h,u),m=i?g?0:o(h,u):g?o(h+(h<0?mr:-mr),u):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(p=r(e,f))||ml(e,p)||ml(f,p))&&(f[0]+=1e-6,f[1]+=1e-6,g=s(f[0],f[1])),g!==l)d=0,g?(t.lineStart(),p=r(f,e),t.point(p[0],p[1])):(p=r(e,f),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(a&&e&&i^g){var v;m&n||!(v=r(f,e,!0))||(d=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&ml(e,f)||t.point(f[0],f[1]),e=f,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return d|(c&&l)<<1}}}),(function(e,i,a,s){pl(s,t,n,a,e,i)}),i?[0,-t]:[-mr,t-mr])}function $l(t,e,n,i){function a(a,s){return t<=a&&a<=n&&e<=s&&s<=i}function s(a,s,o,c){var d=0,h=0;if(null==a||(d=r(a,o))!==(h=r(s,o))||l(a,s)<0^o>0)do{c.point(0===d||3===d?t:n,d>1?i:e)}while((d=(d+o+4)%4)!==h);else c.point(s[0],s[1])}function r(i,a){return Cr(i[0]-t)<1e-6?a>0?0:3:Cr(i[0]-n)<1e-6?a>0?2:1:Cr(i[1]-e)<1e-6?a>0?1:0:a>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var l,c,d,h,u,p,f,g,m,v,b,y=r,w=gl(),x={point:C,lineStart:function(){x.point=k,c&&c.push(d=[]),v=!0,m=!1,f=g=NaN},lineEnd:function(){l&&(k(h,u),p&&m&&w.rejoin(),l.push(w.result())),x.point=C,m&&y.lineEnd()},polygonStart:function(){y=w,l=[],c=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,a=c.length;n<a;++n)for(var s,r,o=c[n],l=1,d=o.length,h=o[0],u=h[0],p=h[1];l<d;++l)s=u,r=p,u=(h=o[l])[0],p=h[1],r<=i?p>i&&(u-s)*(i-r)>(p-r)*(t-s)&&++e:p<=i&&(u-s)*(i-r)<(p-r)*(t-s)&&--e;return e}(),n=b&&e,a=(l=S(l)).length;(n||a)&&(r.polygonStart(),n&&(r.lineStart(),s(null,null,1,r),r.lineEnd()),a&&bl(l,o,e,s,r),r.polygonEnd()),y=r,l=c=d=null}};function C(t,e){a(t,e)&&y.point(t,e)}function k(s,r){var o=a(s,r);if(c&&d.push([s,r]),v)h=s,u=r,p=o,v=!1,o&&(y.lineStart(),y.point(s,r));else if(o&&m)y.point(s,r);else{var l=[f=Math.max(-1e9,Math.min(1e9,f)),g=Math.max(-1e9,Math.min(1e9,g))],w=[s=Math.max(-1e9,Math.min(1e9,s)),r=Math.max(-1e9,Math.min(1e9,r))];!function(t,e,n,i,a,s){var r,o=t[0],l=t[1],c=0,d=1,h=e[0]-o,u=e[1]-l;if(r=n-o,h||!(r>0)){if(r/=h,h<0){if(r<c)return;r<d&&(d=r)}else if(h>0){if(r>d)return;r>c&&(c=r)}if(r=a-o,h||!(r<0)){if(r/=h,h<0){if(r>d)return;r>c&&(c=r)}else if(h>0){if(r<c)return;r<d&&(d=r)}if(r=i-l,u||!(r>0)){if(r/=u,u<0){if(r<c)return;r<d&&(d=r)}else if(u>0){if(r>d)return;r>c&&(c=r)}if(r=s-l,u||!(r<0)){if(r/=u,u<0){if(r>d)return;r>c&&(c=r)}else if(u>0){if(r<c)return;r<d&&(d=r)}return c>0&&(t[0]=o+c*h,t[1]=l+c*u),d<1&&(e[0]=o+d*h,e[1]=l+d*u),!0}}}}}(l,w,t,e,n,i)?o&&(y.lineStart(),y.point(s,r),b=!1):(m||(y.lineStart(),y.point(l[0],l[1])),y.point(w[0],w[1]),o||y.lineEnd(),b=!1)}f=s,g=r,m=o}return x}}var El,Dl,Il,Ml=ur(),Ll={sphere:Br,point:Br,lineStart:function(){Ll.point=Nl,Ll.lineEnd=Pl},lineEnd:Br,polygonStart:Br,polygonEnd:Br};function Pl(){Ll.point=Ll.lineEnd=Br}function Nl(t,e){El=t*=xr,Dl=Ir(e*=xr),Il=Sr(e),Ll.point=_l}function _l(t,e){t*=xr;var n=Ir(e*=xr),i=Sr(e),a=Cr(t-El),s=Sr(a),r=i*Ir(a),o=Il*n-Dl*i*s,l=Dl*n+Il*i*s;Ml.add(Tr(Lr(r*r+o*o),l)),El=t,Dl=n,Il=i}function Rl(t){return Ml.reset(),Vr(t,Ll),+Ml}var Bl=[null,null],Ol={type:"LineString",coordinates:Bl};function Fl(t,e){return Bl[0]=t,Bl[1]=e,Rl(Ol)}var zl={Feature:function(t,e){return ql(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(ql(n[i].geometry,e))return!0;return!1}},Hl={Sphere:function(){return!0},Point:function(t,e){return Vl(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(Vl(n[i],e))return!0;return!1},LineString:function(t,e){return jl(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(jl(n[i],e))return!0;return!1},Polygon:function(t,e){return Wl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(Wl(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(ql(n[i],e))return!0;return!1}};function ql(t,e){return!(!t||!Hl.hasOwnProperty(t.type))&&Hl[t.type](t,e)}function Vl(t,e){return 0===Fl(t,e)}function jl(t,e){var n=Fl(t[0],t[1]);return Fl(t[0],e)+Fl(e,t[1])<=n+1e-6}function Wl(t,e){return!!xl(t.map(Ul),Gl(e))}function Ul(t){return(t=t.map(Gl)).pop(),t}function Gl(t){return[t[0]*xr,t[1]*xr]}function Yl(t,e,n){var i=m(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Kl(t,e,n){var i=m(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Xl(){var t,e,n,i,a,s,r,o,l,c,d,h,u=10,p=u,f=90,g=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return m(Ar(i/f)*f,n,f).map(d).concat(m(Ar(o/g)*g,r,g).map(h)).concat(m(Ar(e/u)*u,t,u).filter((function(t){return Cr(t%f)>1e-6})).map(l)).concat(m(Ar(s/p)*p,a,p).filter((function(t){return Cr(t%g)>1e-6})).map(c))}return b.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(r).slice(1),d(n).reverse().slice(1),h(o).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(o=+t[0][1],r=+t[1][1],(i=+t[0][0])>(n=+t[1][0])&&(t=i,i=n,n=t),o>r&&(t=o,o=r,r=t),b.precision(v)):[[i,o],[n,r]]},b.extentMinor=function(n){return arguments.length?(s=+n[0][1],a=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),s>a&&(n=s,s=a,a=n),b.precision(v)):[[e,s],[t,a]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(f=+t[0],g=+t[1],b):[f,g]},b.stepMinor=function(t){return arguments.length?(u=+t[0],p=+t[1],b):[u,p]},b.precision=function(u){return arguments.length?(v=+u,l=Yl(s,a,90),c=Kl(e,t,v),d=Yl(o,r,90),h=Kl(i,n,v),b):v},b.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ql(t){return t}var Jl,Zl,tc,ec,nc=ur(),ic=ur(),ac={point:Br,lineStart:Br,lineEnd:Br,polygonStart:function(){ac.lineStart=sc,ac.lineEnd=lc},polygonEnd:function(){ac.lineStart=ac.lineEnd=ac.point=Br,nc.add(Cr(ic)),ic.reset()},result:function(){var t=nc/2;return nc.reset(),t}};function sc(){ac.point=rc}function rc(t,e){ac.point=oc,Jl=tc=t,Zl=ec=e}function oc(t,e){ic.add(ec*t-tc*e),tc=t,ec=e}function lc(){oc(Jl,Zl)}var cc,dc,hc,uc,pc=1/0,fc=pc,gc=-pc,mc=gc,vc={point:function(t,e){t<pc&&(pc=t),t>gc&&(gc=t),e<fc&&(fc=e),e>mc&&(mc=e)},lineStart:Br,lineEnd:Br,polygonStart:Br,polygonEnd:Br,result:function(){var t=[[pc,fc],[gc,mc]];return gc=mc=-(fc=pc=1/0),t}},bc=0,yc=0,wc=0,xc=0,Cc=0,kc=0,Tc=0,Sc=0,Ac=0,$c={point:Ec,lineStart:Dc,lineEnd:Lc,polygonStart:function(){$c.lineStart=Pc,$c.lineEnd=Nc},polygonEnd:function(){$c.point=Ec,$c.lineStart=Dc,$c.lineEnd=Lc},result:function(){var t=Ac?[Tc/Ac,Sc/Ac]:kc?[xc/kc,Cc/kc]:wc?[bc/wc,yc/wc]:[NaN,NaN];return bc=yc=wc=xc=Cc=kc=Tc=Sc=Ac=0,t}};function Ec(t,e){bc+=t,yc+=e,++wc}function Dc(){$c.point=Ic}function Ic(t,e){$c.point=Mc,Ec(hc=t,uc=e)}function Mc(t,e){var n=t-hc,i=e-uc,a=Lr(n*n+i*i);xc+=a*(hc+t)/2,Cc+=a*(uc+e)/2,kc+=a,Ec(hc=t,uc=e)}function Lc(){$c.point=Ec}function Pc(){$c.point=_c}function Nc(){Rc(cc,dc)}function _c(t,e){$c.point=Rc,Ec(cc=hc=t,dc=uc=e)}function Rc(t,e){var n=t-hc,i=e-uc,a=Lr(n*n+i*i);xc+=a*(hc+t)/2,Cc+=a*(uc+e)/2,kc+=a,Tc+=(a=uc*t-hc*e)*(hc+t),Sc+=a*(uc+e),Ac+=3*a,Ec(hc=t,uc=e)}function Bc(t){this._context=t}Bc.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,yr)}},result:Br};var Oc,Fc,zc,Hc,qc,Vc=ur(),jc={point:Br,lineStart:function(){jc.point=Wc},lineEnd:function(){Oc&&Uc(Fc,zc),jc.point=Br},polygonStart:function(){Oc=!0},polygonEnd:function(){Oc=null},result:function(){var t=+Vc;return Vc.reset(),t}};function Wc(t,e){jc.point=Uc,Fc=Hc=t,zc=qc=e}function Uc(t,e){Vc.add(Lr((Hc-=t)*Hc+(qc-=e)*qc)),Hc=t,qc=e}function Gc(){this._string=[]}function Yc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kc(t){return function(e){var n=new Xc;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Xc(){}function Qc(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Vr(n,t.stream(vc)),e(vc.result()),null!=i&&t.clipExtent(i),t}function Jc(t,e,n){return Qc(t,(function(n){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),r=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+e[0][1]+(a-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([r,o])}),n)}function Zc(t,e,n){return Jc(t,[[0,0],e],n)}function td(t,e,n){return Qc(t,(function(n){var i=+e,a=i/(n[1][0]-n[0][0]),s=(i-a*(n[1][0]+n[0][0]))/2,r=-a*n[0][1];t.scale(150*a).translate([s,r])}),n)}function ed(t,e,n){return Qc(t,(function(n){var i=+e,a=i/(n[1][1]-n[0][1]),s=-a*n[0][0],r=(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([s,r])}),n)}Gc.prototype={_radius:4.5,_circle:Yc(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Yc(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Xc.prototype={constructor:Xc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nd=Sr(30*xr);function id(t,e){return+e?function(t,e){function n(i,a,s,r,o,l,c,d,h,u,p,f,g,m){var v=c-i,b=d-a,y=v*v+b*b;if(y>4*e&&g--){var w=r+u,x=o+p,C=l+f,k=Lr(w*w+x*x+C*C),T=_r(C/=k),S=Cr(Cr(C)-1)<1e-6||Cr(s-h)<1e-6?(s+h)/2:Tr(x,w),A=t(S,T),$=A[0],E=A[1],D=$-i,I=E-a,M=b*D-v*I;(M*M/y>e||Cr((v*D+b*I)/y-.5)>.3||r*u+o*p+l*f<nd)&&(n(i,a,s,r,o,l,$,E,S,w/=k,x/=k,C,g,m),m.point($,E),n($,E,S,w,x,C,c,d,h,u,p,f,g,m))}}return function(e){var i,a,s,r,o,l,c,d,h,u,p,f,g={point:m,lineStart:v,lineEnd:y,polygonStart:function(){e.polygonStart(),g.lineStart=w},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){d=NaN,g.point=b,e.lineStart()}function b(i,a){var s=uo([i,a]),r=t(i,a);n(d,h,c,u,p,f,d=r[0],h=r[1],c=i,u=s[0],p=s[1],f=s[2],16,e),e.point(d,h)}function y(){g.point=m,e.lineEnd()}function w(){v(),g.point=x,g.lineEnd=C}function x(t,e){b(i=t,e),a=d,s=h,r=u,o=p,l=f,g.point=b}function C(){n(d,h,c,u,p,f,a,s,i,r,o,l,16,e),g.lineEnd=y,y()}return g}}(t,e):function(t){return Kc({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var ad=Kc({point:function(t,e){this.stream.point(t*xr,e*xr)}});function sd(t){return rd((function(){return t}))()}function rd(t){var e,n,i,a,s,r,o,l,c,d,h=150,u=480,p=250,f=0,g=0,m=0,v=0,b=0,y=null,w=Sl,x=null,C=Ql,k=.5,T=id($,k);function S(t){return[(t=s(t[0]*xr,t[1]*xr))[0]*h+n,i-t[1]*h]}function A(t){return(t=s.invert((t[0]-n)/h,(i-t[1])/h))&&[t[0]*wr,t[1]*wr]}function $(t,a){return[(t=e(t,a))[0]*h+n,i-t[1]*h]}function E(){s=rl(a=ll(m,v,b),e);var t=e(f,g);return n=u-t[0]*h,i=p+t[1]*h,D()}function D(){return c=d=null,S}return S.stream=function(t){return c&&d===t?c:c=ad(function(t){return Kc({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(a)(w(T(C(d=t)))))},S.preclip=function(t){return arguments.length?(w=t,y=void 0,D()):w},S.postclip=function(t){return arguments.length?(C=t,x=r=o=l=null,D()):C},S.clipAngle=function(t){return arguments.length?(w=+t?Al(y=t*xr):(y=null,Sl),D()):y*wr},S.clipExtent=function(t){return arguments.length?(C=null==t?(x=r=o=l=null,Ql):$l(x=+t[0][0],r=+t[0][1],o=+t[1][0],l=+t[1][1]),D()):null==x?null:[[x,r],[o,l]]},S.scale=function(t){return arguments.length?(h=+t,E()):h},S.translate=function(t){return arguments.length?(u=+t[0],p=+t[1],E()):[u,p]},S.center=function(t){return arguments.length?(f=t[0]%360*xr,g=t[1]%360*xr,E()):[f*wr,g*wr]},S.rotate=function(t){return arguments.length?(m=t[0]%360*xr,v=t[1]%360*xr,b=t.length>2?t[2]%360*xr:0,E()):[m*wr,v*wr,b*wr]},S.precision=function(t){return arguments.length?(T=id($,k=t*t),D()):Lr(k)},S.fitExtent=function(t,e){return Jc(S,t,e)},S.fitSize=function(t,e){return Zc(S,t,e)},S.fitWidth=function(t,e){return td(S,t,e)},S.fitHeight=function(t,e){return ed(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&A,E()}}function od(t){var e=0,n=mr/3,i=rd(t),a=i(e,n);return a.parallels=function(t){return arguments.length?i(e=t[0]*xr,n=t[1]*xr):[e*wr,n*wr]},a}function ld(t,e){var n=Ir(t),i=(n+Ir(e))/2;if(Cr(i)<1e-6)return function(t){var e=Sr(t);function n(t,n){return[t*e,Ir(n)/e]}return n.invert=function(t,n){return[t/e,_r(n*e)]},n}(t);var a=1+n*(2*i-n),s=Lr(a)/i;function r(t,e){var n=Lr(a-2*i*Ir(e))/i;return[n*Ir(t*=i),s-n*Sr(t)]}return r.invert=function(t,e){var n=s-e;return[Tr(t,Cr(n))/i*Mr(n),_r((a-(t*t+n*n)*i*i)/(2*i))]},r}function cd(){return od(ld).scale(155.424).center([0,33.6442])}function dd(){return cd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hd(t){return function(e,n){var i=Sr(e),a=Sr(n),s=t(i*a);return[s*a*Ir(e),s*Ir(n)]}}function ud(t){return function(e,n){var i=Lr(e*e+n*n),a=t(i),s=Ir(a),r=Sr(a);return[Tr(e*s,i*r),_r(i&&n*s/i)]}}var pd=hd((function(t){return Lr(2/(1+t))}));pd.invert=ud((function(t){return 2*_r(t/2)}));var fd=hd((function(t){return(t=Nr(t))&&t/Ir(t)}));function gd(t,e){return[t,Er(Pr((vr+e)/2))]}function md(t){var e,n,i,a=sd(t),s=a.center,r=a.scale,o=a.translate,l=a.clipExtent,c=null;function d(){var s=mr*r(),o=a(ul(a.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:t===gd?[[Math.max(o[0]-s,c),e],[Math.min(o[0]+s,n),i]]:[[c,Math.max(o[1]-s,e)],[n,Math.min(o[1]+s,i)]])}return a.scale=function(t){return arguments.length?(r(t),d()):r()},a.translate=function(t){return arguments.length?(o(t),d()):o()},a.center=function(t){return arguments.length?(s(t),d()):s()},a.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),d()):null==c?null:[[c,e],[n,i]]},d()}function vd(t){return Pr((vr+t)/2)}function bd(t,e){var n=Sr(t),i=t===e?Ir(t):Er(n/Sr(e))/Er(vd(e)/vd(t)),a=n*Dr(vd(t),i)/i;if(!i)return gd;function s(t,e){a>0?e<1e-6-vr&&(e=1e-6-vr):e>vr-1e-6&&(e=vr-1e-6);var n=a/Dr(vd(e),i);return[n*Ir(i*t),a-n*Sr(i*t)]}return s.invert=function(t,e){var n=a-e,s=Mr(i)*Lr(t*t+n*n);return[Tr(t,Cr(n))/i*Mr(n),2*kr(Dr(a/s,1/i))-vr]},s}function yd(t,e){return[t,e]}function wd(t,e){var n=Sr(t),i=t===e?Ir(t):(n-Sr(e))/(e-t),a=n/i+t;if(Cr(i)<1e-6)return yd;function s(t,e){var n=a-e,s=i*t;return[n*Ir(s),a-n*Sr(s)]}return s.invert=function(t,e){var n=a-e;return[Tr(t,Cr(n))/i*Mr(n),a-Mr(i)*Lr(t*t+n*n)]},s}function xd(t,e){var n=Sr(e),i=Sr(t)*n;return[n*Ir(t)/i,Ir(e)/i]}function Cd(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Ql:Kc({point:function(a,s){this.stream.point(a*t+n,s*e+i)}})}function kd(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Td(t,e){return[Sr(e)*Ir(t),Ir(e)]}function Sd(t,e){var n=Sr(e),i=1+Sr(t)*n;return[n*Ir(t)/i,Ir(e)/i]}function Ad(t,e){return[Er(Pr((vr+e)/2)),-t]}function $d(t,e){return t.parent===e.parent?1:2}function Ed(t,e){return t+e.x}function Dd(t,e){return Math.max(t,e.y)}function Id(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Md(t,e){var n,i,a,s,r,o=new _d(t),l=+t.value&&(o.value=t.value),c=[o];for(null==e&&(e=Ld);n=c.pop();)if(l&&(n.value=+n.data.value),(a=e(n.data))&&(r=a.length))for(n.children=new Array(r),s=r-1;s>=0;--s)c.push(i=n.children[s]=new _d(a[s])),i.parent=n,i.depth=n.depth+1;return o.eachBefore(Nd)}function Ld(t){return t.children}function Pd(t){t.data=t.data.data}function Nd(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function _d(t){this.data=t,this.depth=this.height=0,this.parent=null}fd.invert=ud((function(t){return t})),gd.invert=function(t,e){return[t,2*kr($r(e))-vr]},yd.invert=yd,xd.invert=ud(kr),kd.invert=function(t,e){var n,i=e,a=25;do{var s=i*i,r=s*s;i-=n=(i*(1.007226+s*(.015085+r*(.028874*s-.044475-.005916*r)))-e)/(1.007226+s*(.045255+r*(.259866*s-.311325-.005916*11*r)))}while(Cr(n)>1e-6&&--a>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},Td.invert=ud(_r),Sd.invert=ud((function(t){return 2*kr(t)})),Ad.invert=function(t,e){return[-e,2*kr($r(t))-vr]},_d.prototype=Md.prototype={constructor:_d,count:function(){return this.eachAfter(Id)},each:function(t){var e,n,i,a,s=this,r=[s];do{for(e=r.reverse(),r=[];s=e.pop();)if(t(s),n=s.children)for(i=0,a=n.length;i<a;++i)r.push(n[i])}while(r.length);return this},eachAfter:function(t){for(var e,n,i,a=this,s=[a],r=[];a=s.pop();)if(r.push(a),e=a.children)for(n=0,i=e.length;n<i;++n)s.push(e[n]);for(;a=r.pop();)t(a);return this},eachBefore:function(t){for(var e,n,i=this,a=[i];i=a.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)a.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}(e,t),i=[e];e!==n;)i.push(e=e.parent);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Md(this).eachBefore(Pd)}};var Rd=Array.prototype.slice;function Bd(t){for(var e,n,i=0,a=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Rd.call(t))).length,s=[];i<a;)e=t[i],n&&zd(n,e)?++i:(n=qd(s=Od(s,e)),i=0);return n}function Od(t,e){var n,i;if(Hd(e,t))return[e];for(n=0;n<t.length;++n)if(Fd(e,t[n])&&Hd(Vd(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Fd(Vd(t[n],t[i]),e)&&Fd(Vd(t[n],e),t[i])&&Fd(Vd(t[i],e),t[n])&&Hd(jd(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Fd(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function zd(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function Hd(t,e){for(var n=0;n<e.length;++n)if(!zd(t,e[n]))return!1;return!0}function qd(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Vd(t[0],t[1]);case 3:return jd(t[0],t[1],t[2])}}function Vd(t,e){var n=t.x,i=t.y,a=t.r,s=e.x,r=e.y,o=e.r,l=s-n,c=r-i,d=o-a,h=Math.sqrt(l*l+c*c);return{x:(n+s+l/h*d)/2,y:(i+r+c/h*d)/2,r:(h+a+o)/2}}function jd(t,e,n){var i=t.x,a=t.y,s=t.r,r=e.x,o=e.y,l=e.r,c=n.x,d=n.y,h=n.r,u=i-r,p=i-c,f=a-o,g=a-d,m=l-s,v=h-s,b=i*i+a*a-s*s,y=b-r*r-o*o+l*l,w=b-c*c-d*d+h*h,x=p*f-u*g,C=(f*w-g*y)/(2*x)-i,k=(g*m-f*v)/x,T=(p*y-u*w)/(2*x)-a,S=(u*v-p*m)/x,A=k*k+S*S-1,$=2*(s+C*k+T*S),E=C*C+T*T-s*s,D=-(A?($+Math.sqrt($*$-4*A*E))/(2*A):E/$);return{x:i+C+k*D,y:a+T+S*D,r:D}}function Wd(t,e,n){var i=t.x,a=t.y,s=e.r+n.r,r=t.r+n.r,o=e.x-i,l=e.y-a,c=o*o+l*l;if(c){var d=.5+((r*=r)-(s*=s))/(2*c),h=Math.sqrt(Math.max(0,2*s*(r+c)-(r-=c)*r-s*s))/(2*c);n.x=i+d*o+h*l,n.y=a+d*l-h*o}else n.x=i+r,n.y=a}function Ud(t,e){var n=e.x-t.x,i=e.y-t.y,a=t.r+e.r;return a*a-1e-6>n*n+i*i}function Gd(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return a*a+s*s}function Yd(t){this._=t,this.next=null,this.previous=null}function Kd(t){if(!(a=t.length))return 0;var e,n,i,a,s,r,o,l,c,d,h;if((e=t[0]).x=0,e.y=0,!(a>1))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;Wd(n,e,i=t[2]),e=new Yd(e),n=new Yd(n),i=new Yd(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<a;++o){Wd(e._,n._,i=t[o]),i=new Yd(i),l=n.next,c=e.previous,d=n._.r,h=e._.r;do{if(d<=h){if(Ud(l._,i._)){e.next=n=l,n.previous=e,--o;continue t}d+=l._.r,l=l.next}else{if(Ud(c._,i._)){(e=c).next=n,n.previous=e,--o;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,s=Gd(e);(i=i.next)!==n;)(r=Gd(i))<s&&(e=i,s=r);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Bd(e),o=0;o<a;++o)(e=t[o]).x-=i.x,e.y-=i.y;return i.r}function Xd(t){return null==t?null:Qd(t)}function Qd(t){if("function"!=typeof t)throw new Error;return t}function Jd(){return 0}function Zd(t){return function(){return t}}function th(t){return Math.sqrt(t.value)}function eh(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function nh(t,e){return function(n){if(i=n.children){var i,a,s,r=i.length,o=t(n)*e||0;if(o)for(a=0;a<r;++a)i[a].r+=o;if(s=Kd(i),o)for(a=0;a<r;++a)i[a].r-=o;n.r=s+o}}}function ih(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function ah(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function sh(t,e,n,i,a){for(var s,r=t.children,o=-1,l=r.length,c=t.value&&(i-e)/t.value;++o<l;)(s=r[o]).y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*c}var rh={depth:-1},oh={};function lh(t){return t.id}function ch(t){return t.parentId}function dh(t,e){return t.parent===e.parent?1:2}function hh(t){var e=t.children;return e?e[0]:t.t}function uh(t){var e=t.children;return e?e[e.length-1]:t.t}function ph(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function fh(t,e,n){return t.a.parent===e.parent?t.a:n}function gh(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function mh(t,e,n,i,a){for(var s,r=t.children,o=-1,l=r.length,c=t.value&&(a-n)/t.value;++o<l;)(s=r[o]).x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}gh.prototype=Object.create(_d.prototype);var vh=(1+Math.sqrt(5))/2;function bh(t,e,n,i,a,s){for(var r,o,l,c,d,h,u,p,f,g,m,v=[],b=e.children,y=0,w=0,x=b.length,C=e.value;y<x;){l=a-n,c=s-i;do{d=b[w++].value}while(!d&&w<x);for(h=u=d,m=d*d*(g=Math.max(c/l,l/c)/(C*t)),f=Math.max(u/m,m/h);w<x;++w){if(d+=o=b[w].value,o<h&&(h=o),o>u&&(u=o),m=d*d*g,(p=Math.max(u/m,m/h))>f){d-=o;break}f=p}v.push(r={value:d,dice:l<c,children:b.slice(y,w)}),r.dice?sh(r,n,i,a,C?i+=c*d/C:s):mh(r,n,i,C?n+=l*d/C:a,s),C-=d,y=w}return v}var yh=function t(e){function n(t,n,i,a,s){bh(e,t,n,i,a,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(vh),wh=function t(e){function n(t,n,i,a,s){if((r=t._squarify)&&r.ratio===e)for(var r,o,l,c,d,h=-1,u=r.length,p=t.value;++h<u;){for(l=(o=r[h]).children,c=o.value=0,d=l.length;c<d;++c)o.value+=l[c].value;o.dice?sh(o,n,i,a,i+=(s-i)*o.value/p):mh(o,n,i,n+=(a-n)*o.value/p,s),p-=o.value}else t._squarify=r=bh(e,t,n,i,a,s),r.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(vh);function xh(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ch(t,e){return t[0]-e[0]||t[1]-e[1]}function kh(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;++a){for(;i>1&&xh(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}var Th=[].slice,Sh={};function Ah(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function $h(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,a=n[i];n[i]=Eh(t,e),--t._waiting,++t._active,n=a.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Sh)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Dh(t,e);else if(!t._data)throw e}}function Eh(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Dh(t,n):(t._data[e]=i,t._waiting?$h(t):Ih(t))))}}function Dh(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,Ih(t)}function Ih(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Mh(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Ah(t)}function Lh(){return Math.random()}Ah.prototype=Mh.prototype={constructor:Ah,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=Th.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),$h(this),this},abort:function(){return null==this._error&&Dh(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},Ih(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,Ih(this),this}};var Ph=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Lh),Nh=function t(e){function n(t,n){var i,a;return t=null==t?0:+t,n=null==n?1:+n,function(){var s;if(null!=i)s=i,i=null;else do{i=2*e()-1,s=2*e()-1,a=i*i+s*s}while(!a||a>1);return t+n*s*Math.sqrt(-2*Math.log(a)/a)}}return n.source=t,n}(Lh),_h=function t(e){function n(){var t=Nh.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Lh),Rh=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(Lh),Bh=function t(e){function n(t){var n=Rh.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Lh),Oh=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Lh);function Fh(t,e){var n,i,a,s,r=O("beforesend","progress","load","error"),o=hs(),l=new XMLHttpRequest,c=null,d=null,h=0;function u(t){var e,i=l.status;if(!i&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||i>=200&&i<300||304===i){if(a)try{e=a.call(n,l)}catch(s){return void r.call("error",n,s)}else e=l;r.call("load",n,e)}else r.call("error",n,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=u:l.onreadystatechange=function(t){l.readyState>3&&u(t)},l.onprogress=function(t){r.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o.get(t):(null==e?o.remove(t):o.set(t,e+""),n)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",n):i},responseType:function(t){return arguments.length?(s=t,n):s},timeout:function(t){return arguments.length?(h=+t,n):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?d:(d=null==t?null:t+"",n)},response:function(t){return a=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,a,u){return l.open(e,t,!0,c,d),null==i||o.has("accept")||o.set("accept",i+",*/*"),l.setRequestHeader&&o.each((function(t,e){l.setRequestHeader(e,t)})),null!=i&&l.overrideMimeType&&l.overrideMimeType(i),null!=s&&(l.responseType=s),h>0&&(l.timeout=h),null==u&&"function"==typeof a&&(u=a,a=null),null!=u&&1===u.length&&(u=function(t){return function(e,n){t(null==e?n:null)}}(u)),null!=u&&n.on("error",u).on("load",(function(t){u(null,t)})),r.call("beforesend",n,l),l.send(null==a?null:a),n},abort:function(){return l.abort(),n},on:function(){var t=r.on.apply(r,arguments);return t===r?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}function zh(t,e){return function(n,i){var a=Fh(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return a.get(i)}return a}}var Hh=zh("text/html",(function(t){return document.createRange().createContextualFragment(t.responseText)})),qh=zh("application/json",(function(t){return JSON.parse(t.responseText)})),Vh=zh("text/plain",(function(t){return t.responseText})),jh=zh("application/xml",(function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}));function Wh(t,e){return function(n,i,a){arguments.length<3&&(a=i,i=null);var s=Fh(n).mimeType(t);return s.row=function(t){return arguments.length?s.response(Uh(e,i=t)):i},s.row(i),a?s.get(a):s}}function Uh(t,e){return function(n){return t(n.responseText,e)}}var Gh=Wh("text/csv",Ts),Yh=Wh("text/tab-separated-values",Ds),Kh=Array.prototype,Xh=Kh.map,Qh=Kh.slice,Jh={name:"implicit"};function Zh(t){var e=hs(),n=[],i=Jh;function a(a){var s=a+"",r=e.get(s);if(!r){if(i!==Jh)return i;e.set(s,r=n.push(a))}return t[(r-1)%t.length]}return t=null==t?[]:Qh.call(t),a.domain=function(t){if(!arguments.length)return n.slice();n=[],e=hs();for(var i,s,r=-1,o=t.length;++r<o;)e.has(s=(i=t[r])+"")||e.set(s,n.push(i));return a},a.range=function(e){return arguments.length?(t=Qh.call(e),a):t.slice()},a.unknown=function(t){return arguments.length?(i=t,a):i},a.copy=function(){return Zh().domain(n).range(t).unknown(i)},a}function tu(){var t,e,n=Zh().unknown(void 0),i=n.domain,a=n.range,s=[0,1],r=!1,o=0,l=0,c=.5;function d(){var n=i().length,d=s[1]<s[0],h=s[d-0],u=s[1-d];t=(u-h)/Math.max(1,n-o+2*l),r&&(t=Math.floor(t)),h+=(u-h-t*(n-o))*c,e=t*(1-o),r&&(h=Math.round(h),e=Math.round(e));var p=m(n).map((function(e){return h+t*e}));return a(d?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),d()):i()},n.range=function(t){return arguments.length?(s=[+t[0],+t[1]],d()):s.slice()},n.rangeRound=function(t){return s=[+t[0],+t[1]],r=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(r=!!t,d()):r},n.padding=function(t){return arguments.length?(o=l=Math.max(0,Math.min(1,t)),d()):o},n.paddingInner=function(t){return arguments.length?(o=Math.max(0,Math.min(1,t)),d()):o},n.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),d()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),d()):c},n.copy=function(){return tu().domain(i()).range(s).round(r).paddingInner(o).paddingOuter(l).align(c)},d()}function eu(t){return function(){return t}}function nu(t){return+t}var iu=[0,1];function au(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:eu(e)}function su(t,e,n,i){var a=t[0],s=t[1],r=e[0],o=e[1];return s<a?(a=n(s,a),r=i(o,r)):(a=n(a,s),r=i(r,o)),function(t){return r(a(t))}}function ru(t,e,n,i){var s=Math.min(t.length,e.length)-1,r=new Array(s),o=new Array(s),l=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<s;)r[l]=n(t[l],t[l+1]),o[l]=i(e[l],e[l+1]);return function(e){var n=a(t,e,1,s)-1;return o[n](r[n](e))}}function ou(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function lu(t,e){var n,i,a,s=iu,r=iu,o=Nn,l=!1;function c(){return n=Math.min(s.length,r.length)>2?ru:su,i=a=null,d}function d(e){return(i||(i=n(s,r,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,o)))(+e)}return d.invert=function(t){return(a||(a=n(r,s,au,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},d.domain=function(t){return arguments.length?(s=Xh.call(t,nu),c()):s.slice()},d.range=function(t){return arguments.length?(r=Qh.call(t),c()):r.slice()},d.rangeRound=function(t){return r=Qh.call(t),o=_n,c()},d.clamp=function(t){return arguments.length?(l=!!t,c()):l},d.interpolate=function(t){return arguments.length?(o=t,c()):o},c()}function cu(e){var n=e.domain;return e.ticks=function(t){var e=n();return w(e[0],e[e.length-1],null==t?10:t)},e.tickFormat=function(e,i){return function(e,n,i){var a,s=e[0],r=e[e.length-1],o=C(s,r,null==n?10:n);switch((i=nr(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(s),Math.abs(r));return null!=i.precision||isNaN(a=dr(o,l))||(i.precision=a),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=hr(o,Math.max(Math.abs(s),Math.abs(r))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=cr(o))||(i.precision=a-2*("%"===i.type))}return t.format(i)}(n(),e,i)},e.nice=function(t){null==t&&(t=10);var i,a=n(),s=0,r=a.length-1,o=a[s],l=a[r];return l<o&&(i=o,o=l,l=i,i=s,s=r,r=i),(i=x(o,l,t))>0?i=x(o=Math.floor(o/i)*i,l=Math.ceil(l/i)*i,t):i<0&&(i=x(o=Math.ceil(o*i)/i,l=Math.floor(l*i)/i,t)),i>0?(a[s]=Math.floor(o/i)*i,a[r]=Math.ceil(l/i)*i,n(a)):i<0&&(a[s]=Math.ceil(o*i)/i,a[r]=Math.floor(l*i)/i,n(a)),e},e}function du(t,e){var n,i=0,a=(t=t.slice()).length-1,s=t[i],r=t[a];return r<s&&(n=i,i=a,a=n,n=s,s=r,r=n),t[i]=e.floor(s),t[a]=e.ceil(r),t}function hu(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:eu(e)}function uu(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function pu(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fu(t){return 10===t?pu:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function gu(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function mu(t){return function(e){return-t(-e)}}function vu(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function bu(){var t=1,e=lu((function(e,n){return(n=vu(n,t)-(e=vu(e,t)))?function(i){return(vu(i,t)-e)/n}:eu(n)}),(function(e,n){return n=vu(n,t)-(e=vu(e,t)),function(i){return vu(e+n*i,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return ou(e,bu().exponent(t))},cu(e)}var yu=new Date,wu=new Date;function xu(t,e,n,i){function a(e){return t(e=new Date(+e)),e}return a.floor=a,a.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(n,i,s){var r,o=[];if(n=a.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return o;do{o.push(r=new Date(+n)),e(n,s),t(n)}while(r<n&&n<i);return o},a.filter=function(n){return xu((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(a.count=function(e,i){return yu.setTime(+e),wu.setTime(+i),t(yu),t(wu),Math.floor(n(yu,wu))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(i?function(e){return i(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}var Cu=xu((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Cu.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?xu((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Cu:null};var ku=Cu.range,Tu=xu((function(t){t.setTime(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Su=Tu.range,Au=xu((function(t){t.setTime(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),$u=Au.range,Eu=xu((function(t){var e=6e4*t.getTimezoneOffset()%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Du=Eu.range,Iu=xu((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),Mu=Iu.range;function Lu(t){return xu((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Pu=Lu(0),Nu=Lu(1),_u=Lu(2),Ru=Lu(3),Bu=Lu(4),Ou=Lu(5),Fu=Lu(6),zu=Pu.range,Hu=Nu.range,qu=_u.range,Vu=Ru.range,ju=Bu.range,Wu=Ou.range,Uu=Fu.range,Gu=xu((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Yu=Gu.range,Ku=xu((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Ku.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xu((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Xu=Ku.range,Qu=xu((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),Ju=Qu.range,Zu=xu((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),tp=Zu.range,ep=xu((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),np=ep.range;function ip(t){return xu((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var ap=ip(0),sp=ip(1),rp=ip(2),op=ip(3),lp=ip(4),cp=ip(5),dp=ip(6),hp=ap.range,up=sp.range,pp=rp.range,fp=op.range,gp=lp.range,mp=cp.range,vp=dp.range,bp=xu((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),yp=bp.range,wp=xu((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));wp.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xu((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var xp=wp.range;function Cp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tp(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Sp(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,s=t.days,r=t.shortDays,o=t.months,l=t.shortMonths,c=Pp(a),d=Np(a),h=Pp(s),u=Np(s),p=Pp(r),f=Np(r),g=Pp(o),m=Np(o),v=Pp(l),b=Np(l),y={a:function(t){return r[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:tf,e:tf,f:rf,H:ef,I:nf,j:af,L:sf,m:of,M:lf,p:function(t){return a[+(t.getHours()>=12)]},Q:Rf,s:Bf,S:cf,u:df,U:hf,V:uf,w:pf,W:ff,x:null,X:null,y:gf,Y:mf,Z:vf,"%":_f},w={a:function(t){return r[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:bf,e:bf,f:kf,H:yf,I:wf,j:xf,L:Cf,m:Tf,M:Sf,p:function(t){return a[+(t.getUTCHours()>=12)]},Q:Rf,s:Bf,S:Af,u:$f,U:Ef,V:Df,w:If,W:Mf,x:null,X:null,y:Lf,Y:Pf,Z:Nf,"%":_f},x={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=u[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=b[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return T(t,e,n,i)},d:jp,e:jp,f:Xp,H:Up,I:Up,j:Wp,L:Kp,m:Vp,M:Gp,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=d[i[0].toLowerCase()],n+i[0].length):-1},Q:Jp,s:Zp,S:Yp,u:Rp,U:Bp,V:Op,w:_p,W:Fp,x:function(t,e,i){return T(t,n,e,i)},X:function(t,e,n){return T(t,i,e,n)},y:Hp,Y:zp,Z:qp,"%":Qp};function C(t,e){return function(n){var i,a,s,r=[],o=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===t.charCodeAt(o)&&(r.push(t.slice(l,o)),null!=(a=$p[i=t.charAt(++o)])?i=t.charAt(++o):a="e"===i?" ":"0",(s=e[i])&&(i=s(n,a)),r.push(i),l=o+1);return r.push(t.slice(l,o)),r.join("")}}function k(t,e){return function(n){var i,a,s=Tp(1900);if(T(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(i=kp(Tp(s.y))).getUTCDay(),i=a>4||0===a?sp.ceil(i):sp(i),i=ep.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(a=(i=e(Tp(s.y))).getDay(),i=a>4||0===a?Nu.ceil(i):Nu(i),i=Iu.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?kp(Tp(s.y)).getUTCDay():e(Tp(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,kp(s)):e(s)}}function T(t,e,n,i){for(var a,s,r=0,o=e.length,l=n.length;r<o;){if(i>=l)return-1;if(37===(a=e.charCodeAt(r++))){if(a=e.charAt(r++),!(s=x[a in $p?e.charAt(r++):a])||(i=s(t,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}return y.x=C(n,y),y.X=C(i,y),y.c=C(e,y),w.x=C(n,w),w.X=C(i,w),w.c=C(e,w),{format:function(t){var e=C(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Cp);return e.toString=function(){return t},e},utcFormat:function(t){var e=C(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,kp);return e.toString=function(){return t},e}}}var Ap,$p={"-":"",_:" ",0:"0"},Ep=/^\s*\d+/,Dp=/^%/,Ip=/[\\^$*+?|[\]().{}]/g;function Mp(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(e)+a:a)}function Lp(t){return t.replace(Ip,"\\$&")}function Pp(t){return new RegExp("^(?:"+t.map(Lp).join("|")+")","i")}function Np(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function _p(t,e,n){var i=Ep.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Rp(t,e,n){var i=Ep.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Bp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Op(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Fp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function zp(t,e,n){var i=Ep.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Hp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function qp(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Vp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function jp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Wp(t,e,n){var i=Ep.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Up(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Gp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Yp(t,e,n){var i=Ep.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Kp(t,e,n){var i=Ep.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Xp(t,e,n){var i=Ep.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Qp(t,e,n){var i=Dp.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Jp(t,e,n){var i=Ep.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Zp(t,e,n){var i=Ep.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function tf(t,e){return Mp(t.getDate(),e,2)}function ef(t,e){return Mp(t.getHours(),e,2)}function nf(t,e){return Mp(t.getHours()%12||12,e,2)}function af(t,e){return Mp(1+Iu.count(Ku(t),t),e,3)}function sf(t,e){return Mp(t.getMilliseconds(),e,3)}function rf(t,e){return sf(t,e)+"000"}function of(t,e){return Mp(t.getMonth()+1,e,2)}function lf(t,e){return Mp(t.getMinutes(),e,2)}function cf(t,e){return Mp(t.getSeconds(),e,2)}function df(t){var e=t.getDay();return 0===e?7:e}function hf(t,e){return Mp(Pu.count(Ku(t),t),e,2)}function uf(t,e){var n=t.getDay();return t=n>=4||0===n?Bu(t):Bu.ceil(t),Mp(Bu.count(Ku(t),t)+(4===Ku(t).getDay()),e,2)}function pf(t){return t.getDay()}function ff(t,e){return Mp(Nu.count(Ku(t),t),e,2)}function gf(t,e){return Mp(t.getFullYear()%100,e,2)}function mf(t,e){return Mp(t.getFullYear()%1e4,e,4)}function vf(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mp(e/60|0,"0",2)+Mp(e%60,"0",2)}function bf(t,e){return Mp(t.getUTCDate(),e,2)}function yf(t,e){return Mp(t.getUTCHours(),e,2)}function wf(t,e){return Mp(t.getUTCHours()%12||12,e,2)}function xf(t,e){return Mp(1+ep.count(wp(t),t),e,3)}function Cf(t,e){return Mp(t.getUTCMilliseconds(),e,3)}function kf(t,e){return Cf(t,e)+"000"}function Tf(t,e){return Mp(t.getUTCMonth()+1,e,2)}function Sf(t,e){return Mp(t.getUTCMinutes(),e,2)}function Af(t,e){return Mp(t.getUTCSeconds(),e,2)}function $f(t){var e=t.getUTCDay();return 0===e?7:e}function Ef(t,e){return Mp(ap.count(wp(t),t),e,2)}function Df(t,e){var n=t.getUTCDay();return t=n>=4||0===n?lp(t):lp.ceil(t),Mp(lp.count(wp(t),t)+(4===wp(t).getUTCDay()),e,2)}function If(t){return t.getUTCDay()}function Mf(t,e){return Mp(sp.count(wp(t),t),e,2)}function Lf(t,e){return Mp(t.getUTCFullYear()%100,e,2)}function Pf(t,e){return Mp(t.getUTCFullYear()%1e4,e,4)}function Nf(){return"+0000"}function _f(){return"%"}function Rf(t){return+t}function Bf(t){return Math.floor(+t/1e3)}function Of(e){return Ap=Sp(e),t.timeFormat=Ap.format,t.timeParse=Ap.parse,t.utcFormat=Ap.utcFormat,t.utcParse=Ap.utcParse,Ap}Of({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ff=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),zf=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");function Hf(t){return new Date(t)}function qf(t){return t instanceof Date?+t:+new Date(+t)}function Vf(t,e,i,a,s,r,o,l,c){var d=lu(au,Dn),h=d.invert,u=d.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),y=c("%B"),w=c("%Y"),x=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[r,1,6e4],[r,5,3e5],[r,15,9e5],[r,30,18e5],[s,1,36e5],[s,3,108e5],[s,6,216e5],[s,12,432e5],[a,1,864e5],[a,2,1728e5],[i,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function k(n){return(o(n)<n?p:r(n)<n?f:s(n)<n?g:a(n)<n?m:e(n)<n?i(n)<n?v:b:t(n)<n?y:w)(n)}function T(e,i,a,s){if(null==e&&(e=10),"number"==typeof e){var r=Math.abs(a-i)/e,o=n((function(t){return t[2]})).right(x,r);o===x.length?(s=C(i/31536e6,a/31536e6,e),e=t):o?(s=(o=x[r/x[o-1][2]<x[o][2]/r?o-1:o])[1],e=o[0]):(s=Math.max(C(i,a,e),1),e=l)}return null==s?e:e.every(s)}return d.invert=function(t){return new Date(h(t))},d.domain=function(t){return arguments.length?u(Xh.call(t,qf)):u().map(Hf)},d.ticks=function(t,e){var n,i=u(),a=i[0],s=i[i.length-1],r=s<a;return r&&(n=a,a=s,s=n),n=(n=T(t,a,s,e))?n.range(a,s+1):[],r?n.reverse():n},d.tickFormat=function(t,e){return null==e?k:c(e)},d.nice=function(t,e){var n=u();return(t=T(t,n[0],n[n.length-1],e))?u(du(n,t)):d},d.copy=function(){return ou(d,Vf(t,e,i,a,s,r,o,l,c))},d}function jf(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}var Wf=jf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uf=jf("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Gf=jf("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Yf=jf("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Kf=si(fn(300,.5,0),fn(-240,.5,1)),Xf=si(fn(-100,.75,.35),fn(80,1.5,.8)),Qf=si(fn(260,.75,.35),fn(80,1.5,.8)),Jf=fn();function Zf(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var tg=Zf(jf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),eg=Zf(jf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ng=Zf(jf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ig=Zf(jf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ag(t){return function(){return t}}var sg=Math.abs,rg=Math.atan2,og=Math.cos,lg=Math.max,cg=Math.min,dg=Math.sin,hg=Math.sqrt,ug=Math.PI,pg=ug/2,fg=2*ug;function gg(t){return t>1?0:t<-1?ug:Math.acos(t)}function mg(t){return t>=1?pg:t<=-1?-pg:Math.asin(t)}function vg(t){return t.innerRadius}function bg(t){return t.outerRadius}function yg(t){return t.startAngle}function wg(t){return t.endAngle}function xg(t){return t&&t.padAngle}function Cg(t,e,n,i,a,s,r,o){var l=n-t,c=i-e,d=r-a,h=o-s,u=(d*(e-s)-h*(t-a))/(h*l-d*c);return[t+u*l,e+u*c]}function kg(t,e,n,i,a,s,r){var o=t-n,l=e-i,c=(r?s:-s)/hg(o*o+l*l),d=c*l,h=-c*o,u=t+d,p=e+h,f=n+d,g=i+h,m=(u+f)/2,v=(p+g)/2,b=f-u,y=g-p,w=b*b+y*y,x=a-s,C=u*g-f*p,k=(y<0?-1:1)*hg(lg(0,x*x*w-C*C)),T=(C*y-b*k)/w,S=(-C*b-y*k)/w,A=(C*y+b*k)/w,$=(-C*b+y*k)/w,E=T-m,D=S-v,I=A-m,M=$-v;return E*E+D*D>I*I+M*M&&(T=A,S=$),{cx:T,cy:S,x01:-d,y01:-h,x11:T*(a/x-1),y11:S*(a/x-1)}}function Tg(t){this._context=t}function Sg(t){return new Tg(t)}function Ag(t){return t[0]}function $g(t){return t[1]}function Eg(){var t=Ag,e=$g,n=ag(!0),i=null,a=Sg,s=null;function r(r){var o,l,c,d=r.length,h=!1;for(null==i&&(s=a(c=as())),o=0;o<=d;++o)!(o<d&&n(l=r[o],o,r))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(l,o,r),+e(l,o,r));if(c)return s=null,c+""||null}return r.x=function(e){return arguments.length?(t="function"==typeof e?e:ag(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:ag(+t),r):e},r.defined=function(t){return arguments.length?(n="function"==typeof t?t:ag(!!t),r):n},r.curve=function(t){return arguments.length?(a=t,null!=i&&(s=a(i)),r):a},r.context=function(t){return arguments.length?(null==t?i=s=null:s=a(i=t),r):i},r}function Dg(){var t=Ag,e=null,n=ag(0),i=$g,a=ag(!0),s=null,r=Sg,o=null;function l(l){var c,d,h,u,p,f=l.length,g=!1,m=new Array(f),v=new Array(f);for(null==s&&(o=r(p=as())),c=0;c<=f;++c){if(!(c<f&&a(u=l[c],c,l))===g)if(g=!g)d=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=c-1;h>=d;--h)o.point(m[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(m[c]=+t(u,c,l),v[c]=+n(u,c,l),o.point(e?+e(u,c,l):m[c],i?+i(u,c,l):v[c]))}if(p)return o=null,p+""||null}function c(){return Eg().defined(a).curve(r).context(s)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:ag(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:ag(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:ag(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:ag(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:ag(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ag(+t),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(t){return arguments.length?(a="function"==typeof t?t:ag(!!t),l):a},l.curve=function(t){return arguments.length?(r=t,null!=s&&(o=r(s)),l):r},l.context=function(t){return arguments.length?(null==t?s=o=null:o=r(s=t),l):s},l}function Ig(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Mg(t){return t}Tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Lg=Ng(Sg);function Pg(t){this._curve=t}function Ng(t){function e(e){return new Pg(t(e))}return e._curve=t,e}function _g(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Ng(t)):e()._curve},t}function Rg(){return _g(Eg().curve(Lg))}function Bg(){var t=Dg().curve(Lg),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,s=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return _g(n())},delete t.lineX0,t.lineEndAngle=function(){return _g(i())},delete t.lineX1,t.lineInnerRadius=function(){return _g(a())},delete t.lineY0,t.lineOuterRadius=function(){return _g(s())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Ng(t)):e()._curve},t}function Og(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Pg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Fg=Array.prototype.slice;function zg(t){return t.source}function Hg(t){return t.target}function qg(t){var e=zg,n=Hg,i=Ag,a=$g,s=null;function r(){var r,o=Fg.call(arguments),l=e.apply(this,o),c=n.apply(this,o);if(s||(s=r=as()),t(s,+i.apply(this,(o[0]=l,o)),+a.apply(this,o),+i.apply(this,(o[0]=c,o)),+a.apply(this,o)),r)return s=null,r+""||null}return r.source=function(t){return arguments.length?(e=t,r):e},r.target=function(t){return arguments.length?(n=t,r):n},r.x=function(t){return arguments.length?(i="function"==typeof t?t:ag(+t),r):i},r.y=function(t){return arguments.length?(a="function"==typeof t?t:ag(+t),r):a},r.context=function(t){return arguments.length?(s=null==t?null:t,r):s},r}function Vg(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function jg(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function Wg(t,e,n,i,a){var s=Og(e,n),r=Og(e,n=(n+a)/2),o=Og(i,n),l=Og(i,a);t.moveTo(s[0],s[1]),t.bezierCurveTo(r[0],r[1],o[0],o[1],l[0],l[1])}var Ug={draw:function(t,e){var n=Math.sqrt(e/ug);t.moveTo(n,0),t.arc(0,0,n,0,fg)}},Gg={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Yg=Math.sqrt(1/3),Kg=2*Yg,Xg={draw:function(t,e){var n=Math.sqrt(e/Kg),i=n*Yg;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Qg=Math.sin(ug/10)/Math.sin(7*ug/10),Jg=Math.sin(fg/10)*Qg,Zg=-Math.cos(fg/10)*Qg,tm={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=Jg*n,a=Zg*n;t.moveTo(0,-n),t.lineTo(i,a);for(var s=1;s<5;++s){var r=fg*s/5,o=Math.cos(r),l=Math.sin(r);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*a,l*i+o*a)}t.closePath()}},em={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},nm=Math.sqrt(3),im={draw:function(t,e){var n=-Math.sqrt(e/(3*nm));t.moveTo(0,2*n),t.lineTo(-nm*n,-n),t.lineTo(nm*n,-n),t.closePath()}},am=-.5,sm=Math.sqrt(3)/2,rm=1/Math.sqrt(12),om=3*(rm/2+1),lm={draw:function(t,e){var n=Math.sqrt(e/om),i=n/2,a=n*rm,s=i,r=n*rm+n,o=-s,l=r;t.moveTo(i,a),t.lineTo(s,r),t.lineTo(o,l),t.lineTo(am*i-sm*a,sm*i+am*a),t.lineTo(am*s-sm*r,sm*s+am*r),t.lineTo(am*o-sm*l,sm*o+am*l),t.lineTo(am*i+sm*a,am*a-sm*i),t.lineTo(am*s+sm*r,am*r-sm*s),t.lineTo(am*o+sm*l,am*l-sm*o),t.closePath()}},cm=[Ug,Gg,Xg,em,tm,im,lm];function dm(){}function hm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function um(t){this._context=t}function pm(t){this._context=t}function fm(t){this._context=t}function gm(t,e){this._basis=new um(t),this._beta=e}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},pm.prototype={areaStart:dm,areaEnd:dm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:hm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},gm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,a=t[0],s=e[0],r=t[n]-a,o=e[n]-s,l=-1;++l<=n;)this._basis.point(this._beta*t[l]+(1-this._beta)*(a+(i=l/n)*r),this._beta*e[l]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var mm=function t(e){function n(t){return 1===e?new um(t):new gm(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function vm(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function bm(t,e){this._context=t,this._k=(1-e)/6}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vm(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ym=function t(e){function n(t){return new bm(t,e)}return n.tension=function(e){return t(+e)},n}(0);function wm(t,e){this._context=t,this._k=(1-e)/6}wm.prototype={areaStart:dm,areaEnd:dm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xm=function t(e){function n(t){return new wm(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Cm(t,e){this._context=t,this._k=(1-e)/6}Cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var km=function t(e){function n(t){return new Cm(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Tm(t,e,n){var i=t._x1,a=t._y1,s=t._x2,r=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/d,r=(r*c+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(i,a,s,r,t._x2,t._y2)}function Sm(t,e){this._context=t,this._alpha=e}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Tm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Am=function t(e){function n(t){return e?new Sm(t,e):new bm(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function $m(t,e){this._context=t,this._alpha=e}$m.prototype={areaStart:dm,areaEnd:dm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Tm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Em=function t(e){function n(t){return e?new $m(t,e):new wm(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Dm(t,e){this._context=t,this._alpha=e}Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Im=function t(e){function n(t){return e?new Dm(t,e):new Cm(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Mm(t){this._context=t}function Lm(t){return t<0?-1:1}function Pm(t,e,n){var i=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(i||a<0&&-0),r=(n-t._y1)/(a||i<0&&-0),o=(s*a+r*i)/(i+a);return(Lm(s)+Lm(r))*Math.min(Math.abs(s),Math.abs(r),.5*Math.abs(o))||0}function Nm(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _m(t,e,n){var i=t._x0,a=t._x1,s=t._y1,r=(a-i)/3;t._context.bezierCurveTo(i+r,t._y0+r*e,a-r,s-r*n,a,s)}function Rm(t){this._context=t}function Bm(t){this._context=new Om(t)}function Om(t){this._context=t}function Fm(t){this._context=t}function zm(t){var e,n,i=t.length-1,a=new Array(i),s=new Array(i),r=new Array(i);for(a[0]=0,s[0]=2,r[0]=t[0]+2*t[1],e=1;e<i-1;++e)a[e]=1,s[e]=4,r[e]=4*t[e]+2*t[e+1];for(a[i-1]=2,s[i-1]=7,r[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)s[e]-=n=a[e]/s[e-1],r[e]-=n*r[e-1];for(a[i-1]=r[i-1]/s[i-1],e=i-2;e>=0;--e)a[e]=(r[e]-a[e+1])/s[e];for(s[i-1]=(t[i]+a[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function Hm(t,e){this._context=t,this._t=e}function qm(t,e){if((a=t.length)>1)for(var n,i,a,s=1,r=t[e[0]],o=r.length;s<a;++s)for(i=r,r=t[e[s]],n=0;n<o;++n)r[n][1]+=r[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Vm(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function jm(t,e){return t[e]}function Wm(t){var e=t.map(Um);return Vm(t).sort((function(t,n){return e[t]-e[n]}))}function Um(t){for(var e,n=0,i=-1,a=t.length;++i<a;)(e=+t[i][1])&&(n+=e);return n}function Gm(t){return function(){return t}}function Ym(t){return t[0]}function Km(t){return t[1]}function Xm(){this._=null}function Qm(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Jm(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Zm(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function tv(t){for(;t.L;)t=t.L;return t}function ev(t,e,n,i){var a=[null,null],s=Sv.push(a)-1;return a.left=t,a.right=e,n&&iv(a,t,e,n),i&&iv(a,e,t,i),kv[t.index].halfedges.push(s),kv[e.index].halfedges.push(s),a}function nv(t,e,n){var i=[e,n];return i.left=t,i}function iv(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function av(t,e,n,i,a){var s,r=t[0],o=t[1],l=r[0],c=r[1],d=0,h=1,u=o[0]-l,p=o[1]-c;if(s=e-l,u||!(s>0)){if(s/=u,u<0){if(s<d)return;s<h&&(h=s)}else if(u>0){if(s>h)return;s>d&&(d=s)}if(s=i-l,u||!(s<0)){if(s/=u,u<0){if(s>h)return;s>d&&(d=s)}else if(u>0){if(s<d)return;s<h&&(h=s)}if(s=n-c,p||!(s>0)){if(s/=p,p<0){if(s<d)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>d&&(d=s)}if(s=a-c,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>d&&(d=s)}else if(p>0){if(s<d)return;s<h&&(h=s)}return!(d>0||h<1)||(d>0&&(t[0]=[l+d*u,c+d*p]),h<1&&(t[1]=[l+h*u,c+h*p]),!0)}}}}}function sv(t,e,n,i,a){var s=t[1];if(s)return!0;var r,o,l=t[0],c=t.left,d=t.right,h=c[0],u=c[1],p=d[0],f=d[1],g=(h+p)/2;if(f===u){if(g<e||g>=i)return;if(h>p){if(l){if(l[1]>=a)return}else l=[g,n];s=[g,a]}else{if(l){if(l[1]<n)return}else l=[g,a];s=[g,n]}}else if(o=(u+f)/2-(r=(h-p)/(f-u))*g,r<-1||r>1)if(h>p){if(l){if(l[1]>=a)return}else l=[(n-o)/r,n];s=[(a-o)/r,a]}else{if(l){if(l[1]<n)return}else l=[(a-o)/r,a];s=[(n-o)/r,n]}else if(u<f){if(l){if(l[0]>=i)return}else l=[e,r*e+o];s=[i,r*i+o]}else{if(l){if(l[0]<e)return}else l=[i,r*i+o];s=[e,r*e+o]}return t[0]=l,t[1]=s,!0}function rv(t,e){var n=t.site,i=e.left,a=e.right;return n===a&&(a=i,i=n),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(n===i?(i=e[1],a=e[0]):(i=e[0],a=e[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function ov(t,e){return e[+(e.left!==t.site)]}function lv(t,e){return e[+(e.left===t.site)]}Mm.prototype={areaStart:dm,areaEnd:dm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_m(this,this._t0,Nm(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_m(this,Nm(this,n=Pm(this,t,e)),n);break;default:_m(this,this._t0,n=Pm(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Bm.prototype=Object.create(Rm.prototype)).point=function(t,e){Rm.prototype.point.call(this,e,t)},Om.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,s){this._context.bezierCurveTo(e,t,i,n,s,a)}},Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=zm(t),a=zm(e),s=0,r=1;r<n;++s,++r)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],t[r],e[r]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Xm.prototype={constructor:Xm,insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=tv(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(a=i.R)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(Jm(this,n),n=(t=n).U),n.C=!1,i.C=!0,Zm(this,i)):(a=i.L)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(Zm(this,n),n=(t=n).U),n.C=!1,i.C=!0,Jm(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,a=t.U,s=t.L,r=t.R;if(n=s?r?tv(r):s:r,a?a.L===t?a.L=n:a.R=n:this._=n,s&&r?(i=n.C,n.C=t.C,n.L=s,s.U=n,n!==r?(a=n.U,n.U=t.U,a.L=t=n.R,n.R=r,r.U=n):(n.U=a,a=n,t=n.R)):(i=t.C,t=n),t&&(t.U=a),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Jm(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Zm(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Jm(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,Zm(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Jm(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,Zm(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}};var cv,dv=[];function hv(){Qm(this),this.x=this.y=this.arc=this.site=this.cy=null}function uv(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,a=t.site,s=n.site;if(i!==s){var r=a[0],o=a[1],l=i[0]-r,c=i[1]-o,d=s[0]-r,h=s[1]-o,u=2*(l*h-c*d);if(!(u>=-$v)){var p=l*l+c*c,f=d*d+h*h,g=(h*p-c*f)/u,m=(l*f-d*p)/u,v=dv.pop()||new hv;v.arc=t,v.site=a,v.x=g+r,v.y=(v.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=v;for(var b=null,y=Tv._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}Tv.insert(b,v),b||(cv=v)}}}}function pv(t){var e=t.circle;e&&(e.P||(cv=e.N),Tv.remove(e),dv.push(e),Qm(e),t.circle=null)}var fv=[];function gv(){Qm(this),this.edge=this.site=this.circle=null}function mv(t){var e=fv.pop()||new gv;return e.site=t,e}function vv(t){pv(t),Cv.remove(t),fv.push(t),Qm(t)}function bv(t){var e=t.circle,n=e.x,i=e.cy,a=[n,i],s=t.P,r=t.N,o=[t];vv(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Av&&Math.abs(i-l.circle.cy)<Av;)s=l.P,o.unshift(l),vv(l),l=s;o.unshift(l),pv(l);for(var c=r;c.circle&&Math.abs(n-c.circle.x)<Av&&Math.abs(i-c.circle.cy)<Av;)r=c.N,o.push(c),vv(c),c=r;o.push(c),pv(c);var d,h=o.length;for(d=1;d<h;++d)iv((c=o[d]).edge,(l=o[d-1]).site,c.site,a);(c=o[h-1]).edge=ev((l=o[0]).site,c.site,null,a),uv(l),uv(c)}function yv(t){for(var e,n,i,a,s=t[0],r=t[1],o=Cv._;o;)if((i=wv(o,r)-s)>Av)o=o.L;else{if(!((a=s-xv(o,r))>Av)){i>-Av?(e=o.P,n=o):a>-Av?(e=o,n=o.N):e=n=o;break}if(!o.R){e=o;break}o=o.R}!function(t){kv[t.index]={site:t,halfedges:[]}}(t);var l=mv(t);if(Cv.insert(e,l),e||n){if(e===n)return pv(e),n=mv(e.site),Cv.insert(l,n),l.edge=n.edge=ev(e.site,l.site),uv(e),void uv(n);if(n){pv(e),pv(n);var c=e.site,d=c[0],h=c[1],u=t[0]-d,p=t[1]-h,f=n.site,g=f[0]-d,m=f[1]-h,v=2*(u*m-p*g),b=u*u+p*p,y=g*g+m*m,w=[(m*b-p*y)/v+d,(u*y-g*b)/v+h];iv(n.edge,c,f,w),l.edge=ev(c,t,null,w),n.edge=ev(t,f,null,w),uv(e),uv(n)}else l.edge=ev(e.site,l.site)}}function wv(t,e){var n=t.site,i=n[0],a=n[1],s=a-e;if(!s)return i;var r=t.P;if(!r)return-1/0;var o=(n=r.site)[0],l=n[1],c=l-e;if(!c)return o;var d=o-i,h=1/s-1/c,u=d/c;return h?(-u+Math.sqrt(u*u-2*h*(d*d/(-2*c)-l+c/2+a-s/2)))/h+i:(i+o)/2}function xv(t,e){var n=t.N;if(n)return wv(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Cv,kv,Tv,Sv,Av=1e-6,$v=1e-12;function Ev(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Dv(t,e){return e[1]-t[1]||e[0]-t[0]}function Iv(t,e){var n,i,a,s=t.sort(Dv).pop();for(Sv=[],kv=new Array(t.length),Cv=new Xm,Tv=new Xm;;)if(a=cv,s&&(!a||s[1]<a.y||s[1]===a.y&&s[0]<a.x))s[0]===n&&s[1]===i||(yv(s),n=s[0],i=s[1]),s=t.pop();else{if(!a)break;bv(a.arc)}if(function(){for(var t,e,n,i,a=0,s=kv.length;a<s;++a)if((t=kv[a])&&(i=(e=t.halfedges).length)){var r=new Array(i),o=new Array(i);for(n=0;n<i;++n)r[n]=n,o[n]=rv(t,Sv[e[n]]);for(r.sort((function(t,e){return o[e]-o[t]})),n=0;n<i;++n)o[n]=e[r[n]];for(n=0;n<i;++n)e[n]=o[n]}}(),e){var r=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var a,s=Sv.length;s--;)sv(a=Sv[s],t,e,n,i)&&av(a,t,e,n,i)&&(Math.abs(a[0][0]-a[1][0])>Av||Math.abs(a[0][1]-a[1][1])>Av)||delete Sv[s]}(r,o,l,c),function(t,e,n,i){var a,s,r,o,l,c,d,h,u,p,f,g,m=kv.length,v=!0;for(a=0;a<m;++a)if(s=kv[a]){for(r=s.site,o=(l=s.halfedges).length;o--;)Sv[l[o]]||l.splice(o,1);for(o=0,c=l.length;o<c;)f=(p=lv(s,Sv[l[o]]))[0],g=p[1],h=(d=ov(s,Sv[l[++o%c]]))[0],u=d[1],(Math.abs(f-h)>Av||Math.abs(g-u)>Av)&&(l.splice(o,0,Sv.push(nv(r,p,Math.abs(f-t)<Av&&i-g>Av?[t,Math.abs(h-t)<Av?u:i]:Math.abs(g-i)<Av&&n-f>Av?[Math.abs(u-i)<Av?h:n,i]:Math.abs(f-n)<Av&&g-e>Av?[n,Math.abs(h-n)<Av?u:e]:Math.abs(g-e)<Av&&f-t>Av?[Math.abs(u-e)<Av?h:t,e]:null))-1),++c);c&&(v=!1)}if(v){var b,y,w,x=1/0;for(a=0,v=null;a<m;++a)(s=kv[a])&&(w=(b=(r=s.site)[0]-t)*b+(y=r[1]-e)*y)<x&&(x=w,v=s);if(v){var C=[t,e],k=[t,i],T=[n,i],S=[n,e];v.halfedges.push(Sv.push(nv(r=v.site,C,k))-1,Sv.push(nv(r,k,T))-1,Sv.push(nv(r,T,S))-1,Sv.push(nv(r,S,C))-1)}}for(a=0;a<m;++a)(s=kv[a])&&(s.halfedges.length||delete kv[a])}(r,o,l,c)}this.edges=Sv,this.cells=kv,Cv=Tv=Sv=kv=null}function Mv(t){return function(){return t}}function Lv(t,e,n){this.target=t,this.type=e,this.transform=n}function Pv(t,e,n){this.k=t,this.x=e,this.y=n}Iv.prototype={constructor:Iv,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ov(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(s=(a=n.halfedges).length)for(var a,s,r,o=n.site,l=-1,c=e[a[s-1]],d=c.left===o?c.right:c.left;++l<s;)r=d,d=(c=e[a[l]]).left===o?c.right:c.left,r&&d&&i<r.index&&i<d.index&&Ev(o,r,d)<0&&t.push([o.data,r.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,a,s=this,r=s._found||0,o=s.cells.length;!(a=s.cells[r]);)if(++r>=o)return null;var l=t-a.site[0],c=e-a.site[1],d=l*l+c*c;do{a=s.cells[i=r],r=null,a.halfedges.forEach((function(n){var i=s.edges[n],o=i.left;if(o!==a.site&&o||(o=i.right)){var l=t-o[0],c=e-o[1],h=l*l+c*c;h<d&&(d=h,r=o.index)}}))}while(null!==r);return s._found=i,null==n||d<=n*n?a.site:null}},Pv.prototype={constructor:Pv,scale:function(t){return 1===t?this:new Pv(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Pv(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Nv=new Pv(1,0,0);function _v(t){return t.__zoom||Nv}function Rv(){t.event.stopImmediatePropagation()}function Bv(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ov(){return!t.event.button}function Fv(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function zv(){return this.__zoom||Nv}function Hv(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function qv(){return"ontouchstart"in this}function Vv(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}_v.prototype=Pv.prototype,t.version="4.13.0",t.bisect=a,t.bisectRight=a,t.bisectLeft=s,t.ascending=e,t.bisector=n,t.cross=function(t,e,n){var i,a,s,o,l=t.length,c=e.length,d=new Array(l*c);for(null==n&&(n=r),i=s=0;i<l;++i)for(o=t[i],a=0;a<c;++a,++s)d[s]=n(o,e[a]);return d},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=c,t.extent=d,t.histogram=function(){var t=g,e=d,n=k;function i(i){var s,r,o=i.length,l=new Array(o);for(s=0;s<o;++s)l[s]=t(i[s],s,i);var c=e(l),d=c[0],h=c[1],u=n(l,d,h);Array.isArray(u)||(u=C(d,h,u),u=m(Math.ceil(d/u)*u,Math.floor(h/u)*u,u));for(var p=u.length;u[0]<=d;)u.shift(),--p;for(;u[p-1]>h;)u.pop(),--p;var f,g=new Array(p+1);for(s=0;s<=p;++s)(f=g[s]=[]).x0=s>0?u[s-1]:d,f.x1=s<p?u[s]:h;for(s=0;s<o;++s)d<=(r=l[s])&&r<=h&&g[a(u,r,0,p)].push(i[s]);return g}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:f(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:f([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?f(u.call(t)):f(t),i):n},i},t.thresholdFreedmanDiaconis=function(t,n,i){return t=p.call(t,o).sort(e),Math.ceil((i-n)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*c(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=k,t.max=function(t,e){var n,i,a=t.length,s=-1;if(null==e){for(;++s<a;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<a;)null!=(n=t[s])&&n>i&&(i=n)}else for(;++s<a;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<a;)null!=(n=e(t[s],s,t))&&n>i&&(i=n);return i},t.mean=function(t,e){var n,i=t.length,a=i,s=-1,r=0;if(null==e)for(;++s<i;)isNaN(n=o(t[s]))?--a:r+=n;else for(;++s<i;)isNaN(n=o(e(t[s],s,t)))?--a:r+=n;if(a)return r/a},t.median=function(t,n){var i,a=t.length,s=-1,r=[];if(null==n)for(;++s<a;)isNaN(i=o(t[s]))||r.push(i);else for(;++s<a;)isNaN(i=o(n(t[s],s,t)))||r.push(i);return T(r.sort(e),.5)},t.merge=S,t.min=A,t.pairs=function(t,e){null==e&&(e=r);for(var n=0,i=t.length-1,a=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(a,a=t[++n]);return s},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.quantile=T,t.range=m,t.scan=function(t,n){if(i=t.length){var i,a,s=0,r=0,o=t[r];for(null==n&&(n=e);++s<i;)(n(a=t[s],o)<0||0!==n(o,o))&&(o=a,r=s);return 0===n(o,o)?r:void 0}},t.shuffle=function(t,e,n){for(var i,a,s=(null==n?t.length:n)-(e=null==e?0:+e);s;)a=Math.random()*s--|0,i=t[s+e],t[s+e]=t[a+e],t[a+e]=i;return t},t.sum=function(t,e){var n,i=t.length,a=-1,s=0;if(null==e)for(;++a<i;)(n=+t[a])&&(s+=n);else for(;++a<i;)(n=+e(t[a],a,t))&&(s+=n);return s},t.ticks=w,t.tickIncrement=x,t.tickStep=C,t.transpose=$,t.variance=l,t.zip=function(){return $(arguments)},t.axisTop=function(t){return R(1,t)},t.axisRight=function(t){return R(2,t)},t.axisBottom=function(t){return R(3,t)},t.axisLeft=function(t){return R(4,t)},t.brush=function(){return ja(Pa)},t.brushX=function(){return ja(Ma)},t.brushY=function(){return ja(La)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){var t=0,e=null,n=null,i=null;function a(a){var s,r,o,l,c,d,h=a.length,u=[],p=m(h),f=[],g=[],v=g.groups=new Array(h),b=new Array(h*h);for(s=0,c=-1;++c<h;){for(r=0,d=-1;++d<h;)r+=a[c][d];u.push(r),f.push(m(h)),s+=r}for(e&&p.sort((function(t,n){return e(u[t],u[n])})),n&&f.forEach((function(t,e){t.sort((function(t,i){return n(a[e][t],a[e][i])}))})),l=(s=Xa(0,Ka-t*h)/s)?t:Ka/h,r=0,c=-1;++c<h;){for(o=r,d=-1;++d<h;){var y=p[c],w=f[y][d],x=a[y][w],C=r,k=r+=x*s;b[w*h+y]={index:y,subindex:w,startAngle:C,endAngle:k,value:x}}v[y]={index:y,startAngle:o,endAngle:r,value:u[y]},r+=l}for(c=-1;++c<h;)for(d=c-1;++d<h;){var T=b[d*h+c],S=b[c*h+d];(T.value||S.value)&&g.push(T.value<S.value?{source:S,target:T}:{source:T,target:S})}return i?g.sort(i):g}return a.padAngle=function(e){return arguments.length?(t=Xa(0,e),a):t},a.sortGroups=function(t){return arguments.length?(e=t,a):e},a.sortSubgroups=function(t){return arguments.length?(n=t,a):n},a.sortChords=function(t){return arguments.length?(null==t?i=null:(i=Qa(t))._=t,a):i&&i._},a},t.ribbon=function(){var t=ss,e=rs,n=os,i=ls,a=cs,s=null;function r(){var r,o=Ja.call(arguments),l=t.apply(this,o),c=e.apply(this,o),d=+n.apply(this,(o[0]=l,o)),h=i.apply(this,o)-Ya,u=a.apply(this,o)-Ya,p=d*Wa(h),f=d*Ua(h),g=+n.apply(this,(o[0]=c,o)),m=i.apply(this,o)-Ya,v=a.apply(this,o)-Ya;if(s||(s=r=as()),s.moveTo(p,f),s.arc(0,0,d,h,u),h===m&&u===v||(s.quadraticCurveTo(0,0,g*Wa(m),g*Ua(m)),s.arc(0,0,g,m,v)),s.quadraticCurveTo(0,0,p,f),s.closePath(),r)return s=null,r+""||null}return r.radius=function(t){return arguments.length?(n="function"==typeof t?t:Za(+t),r):n},r.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Za(+t),r):i},r.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Za(+t),r):a},r.source=function(e){return arguments.length?(t=e,r):t},r.target=function(t){return arguments.length?(e=t,r):e},r.context=function(t){return arguments.length?(s=null==t?null:t,r):s},r},t.nest=function(){var t,e,n,i=[],a=[];function s(n,a,r,o){if(a>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,c,d,h=-1,u=n.length,p=i[a++],f=hs(),g=r();++h<u;)(d=f.get(l=p(c=n[h])+""))?d.push(c):f.set(l,[c]);return f.each((function(t,e){o(g,e,s(t,a,r,o))})),g}return n={object:function(t){return s(t,0,us,ps)},map:function(t){return s(t,0,fs,gs)},entries:function(t){return function t(n,s){if(++s>i.length)return n;var r,o=a[s-1];return null!=e&&s>=i.length?r=n.entries():(r=[],n.each((function(e,n){r.push({key:n,values:t(e,s)})}))),null!=o?r.sort((function(t,e){return o(t.key,e.key)})):r}(s(t,0,fs,gs),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return a[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.set=bs,t.map=hs,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.color=Ne,t.rgb=Oe,t.hsl=qe,t.lab=Ke,t.hcl=nn,t.cubehelix=fn,t.dispatch=O,t.drag=function(){var e,n,i,a,s=ge,r=me,o=ve,l=be,c={},d=O("start","drag","end"),h=0,u=0;function p(t){t.on("mousedown.drag",f).filter(l).on("touchstart.drag",v).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!a&&s.apply(this,arguments)){var o=w("mouse",r.apply(this,arguments),oe,this,arguments);o&&(ee(t.event.view).on("mousemove.drag",g,!0).on("mouseup.drag",m,!0),he(t.event.view),ce(),i=!1,e=t.event.clientX,n=t.event.clientY,o("start"))}}function g(){if(de(),!i){var a=t.event.clientX-e,s=t.event.clientY-n;i=a*a+s*s>u}c.mouse("drag")}function m(){ee(t.event.view).on("mousemove.drag mouseup.drag",null),ue(t.event.view,i),de(),c.mouse("end")}function v(){if(s.apply(this,arguments)){var e,n,i=t.event.changedTouches,a=r.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(n=w(i[e].identifier,a,le,this,arguments))&&(ce(),n("start"))}}function b(){var e,n,i=t.event.changedTouches,a=i.length;for(e=0;e<a;++e)(n=c[i[e].identifier])&&(de(),n("drag"))}function y(){var e,n,i=t.event.changedTouches,s=i.length;for(a&&clearTimeout(a),a=setTimeout((function(){a=null}),500),e=0;e<s;++e)(n=c[i[e].identifier])&&(ce(),n("end"))}function w(e,n,i,a,s){var r,l,u,f=i(n,e),g=d.copy();if(Yt(new fe(p,"beforestart",r,e,h,f[0],f[1],0,0,g),(function(){return null!=(t.event.subject=r=o.apply(a,s))&&(l=r.x-f[0]||0,u=r.y-f[1]||0,!0)})))return function t(o){var d,m=f;switch(o){case"start":c[e]=t,d=h++;break;case"end":delete c[e],--h;case"drag":f=i(n,e),d=h}Yt(new fe(p,o,r,e,d,f[0]+l,f[1]+u,f[0]-m[0],f[1]-m[1],g),g.apply,g,[o,a,s])}}return p.filter=function(t){return arguments.length?(s="function"==typeof t?t:pe(!!t),p):s},p.container=function(t){return arguments.length?(r="function"==typeof t?t:pe(t),p):r},p.subject=function(t){return arguments.length?(o="function"==typeof t?t:pe(t),p):o},p.touchable=function(t){return arguments.length?(l="function"==typeof t?t:pe(!!t),p):l},p.on=function(){var t=d.on.apply(d,arguments);return t===d?p:t},p.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,p):Math.sqrt(u)},p},t.dragDisable=he,t.dragEnable=ue,t.dsvFormat=Cs,t.csvParse=Ts,t.csvParseRows=Ss,t.csvFormat=As,t.csvFormatRows=$s,t.tsvParse=Ds,t.tsvParseRows=Is,t.tsvFormat=Ms,t.tsvFormatRows=Ls,t.easeLinear=function(t){return+t},t.easeQuad=ea,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=ea,t.easeCubic=na,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=na,t.easePoly=sa,t.easePolyIn=ia,t.easePolyOut=aa,t.easePolyInOut=sa,t.easeSin=la,t.easeSinIn=function(t){return 1-Math.cos(t*oa)},t.easeSinOut=function(t){return Math.sin(t*oa)},t.easeSinInOut=la,t.easeExp=ca,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=ca,t.easeCircle=da,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=da,t.easeBounce=ua,t.easeBounceIn=function(t){return 1-ua(1-t)},t.easeBounceOut=ua,t.easeBounceInOut=function(t){return((t*=2)<=1?1-ua(1-t):ua(t-1)+1)/2},t.easeBack=ga,t.easeBackIn=pa,t.easeBackOut=fa,t.easeBackInOut=ga,t.easeElastic=ba,t.easeElasticIn=va,t.easeElasticOut=ba,t.easeElasticInOut=ya,t.forceCenter=function(t,e){var n;function i(){var i,a,s=n.length,r=0,o=0;for(i=0;i<s;++i)r+=(a=n[i]).x,o+=a.y;for(r=r/s-t,o=o/s-e,i=0;i<s;++i)(a=n[i]).x-=r,a.y-=o}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},t.forceCollide=function(t){var e,n,i=1,a=1;function s(){for(var t,s,o,l,c,d,h,u=e.length,p=0;p<a;++p)for(s=Fs(e,Vs,js).visitAfter(r),t=0;t<u;++t)h=(d=n[(o=e[t]).index])*d,l=o.x+o.vx,c=o.y+o.vy,s.visit(f);function f(t,e,n,a,s){var r=t.data,u=t.r,p=d+u;if(!r)return e>l+p||a<l-p||n>c+p||s<c-p;if(r.index>o.index){var f=l-r.x-r.vx,g=c-r.y-r.vy,m=f*f+g*g;m<p*p&&(0===f&&(m+=(f=Ns())*f),0===g&&(m+=(g=Ns())*g),m=(p-(m=Math.sqrt(m)))/m*i,o.vx+=(f*=m)*(p=(u*=u)/(h+u)),o.vy+=(g*=m)*p,r.vx-=f*(p=1-p),r.vy-=g*p)}}}function r(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function o(){if(e){var i,a,s=e.length;for(n=new Array(s),i=0;i<s;++i)n[(a=e[i]).index]=+t(a,i,e)}}return"function"!=typeof t&&(t=Ps(null==t?1:+t)),s.initialize=function(t){e=t,o()},s.iterations=function(t){return arguments.length?(a=+t,s):a},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ps(+e),o(),s):t},s},t.forceLink=function(t){var e,n,i,a,s,r=Ws,o=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},l=Ps(30),c=1;function d(i){for(var a=0,r=t.length;a<c;++a)for(var o,l,d,h,u,p,f,g=0;g<r;++g)h=(d=(o=t[g]).target).x+d.vx-(l=o.source).x-l.vx||Ns(),u=d.y+d.vy-l.y-l.vy||Ns(),u*=p=((p=Math.sqrt(h*h+u*u))-n[g])/p*i*e[g],d.vx-=(h*=p)*(f=s[g]),d.vy-=u*f,l.vx+=h*(f=1-f),l.vy+=u*f}function h(){if(i){var o,l,c=i.length,d=t.length,h=hs(i,r);for(o=0,a=new Array(c);o<d;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=Us(h,l.source)),"object"!=typeof l.target&&(l.target=Us(h,l.target)),a[l.source.index]=(a[l.source.index]||0)+1,a[l.target.index]=(a[l.target.index]||0)+1;for(o=0,s=new Array(d);o<d;++o)s[o]=a[(l=t[o]).source.index]/(a[l.source.index]+a[l.target.index]);e=new Array(d),u(),n=new Array(d),p()}}function u(){if(i)for(var n=0,a=t.length;n<a;++n)e[n]=+o(t[n],n,t)}function p(){if(i)for(var e=0,a=t.length;e<a;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t){i=t,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(r=t,d):r},d.iterations=function(t){return arguments.length?(c=+t,d):c},d.strength=function(t){return arguments.length?(o="function"==typeof t?t:Ps(+t),u(),d):o},d.distance=function(t){return arguments.length?(l="function"==typeof t?t:Ps(+t),p(),d):l},d},t.forceManyBody=function(){var t,e,n,i,a=Ps(-30),s=1,r=1/0,o=.81;function l(i){var a,s=t.length,r=Fs(t,Gs,Ys).visitAfter(d);for(n=i,a=0;a<s;++a)e=t[a],r.visit(h)}function c(){if(t){var e,n,s=t.length;for(i=new Array(s),e=0;e<s;++e)i[(n=t[e]).index]=+a(n,e,t)}}function d(t){var e,n,a,s,r,o=0,l=0;if(t.length){for(a=s=r=0;r<4;++r)(e=t[r])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,a+=n*e.x,s+=n*e.y);t.x=a/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=i[e.data.index]}while(e=e.next)}t.value=o}function h(t,a,l,c){if(!t.value)return!0;var d=t.x-e.x,h=t.y-e.y,u=c-a,p=d*d+h*h;if(u*u/o<p)return p<r&&(0===d&&(p+=(d=Ns())*d),0===h&&(p+=(h=Ns())*h),p<s&&(p=Math.sqrt(s*p)),e.vx+=d*t.value*n/p,e.vy+=h*t.value*n/p),!0;if(!(t.length||p>=r)){(t.data!==e||t.next)&&(0===d&&(p+=(d=Ns())*d),0===h&&(p+=(h=Ns())*h),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(e.vx+=d*(u=i[t.data.index]*n/p),e.vy+=h*u)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:Ps(+t),c(),l):a},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(r=t*t,l):Math.sqrt(r)},l.theta=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l},t.forceRadial=function(t,e,n){var i,a,s,r=Ps(.1);function o(t){for(var r=0,o=i.length;r<o;++r){var l=i[r],c=l.x-e||1e-6,d=l.y-n||1e-6,h=Math.sqrt(c*c+d*d),u=(s[r]-h)*a[r]*t/h;l.vx+=c*u,l.vy+=d*u}}function l(){if(i){var e,n=i.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(i[e],e,i),a[e]=isNaN(s[e])?0:+r(i[e],e,i)}}return"function"!=typeof t&&(t=Ps(+t)),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){i=t,l()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:Ps(+t),l(),o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ps(+e),l(),o):t},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(t){return arguments.length?(n=+t,o):n},o},t.forceSimulation=function(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),s=0,r=.6,o=hs(),l=vi(d),c=O("tick","end");function d(){h(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function h(){var e,i,l=t.length;for(n+=(s-n)*a,o.each((function(t){t(n)})),e=0;e<l;++e)null==(i=t[e]).fx?i.x+=i.vx*=r:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=r:(i.y=i.fy,i.vy=0)}function u(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var a=10*Math.sqrt(n),s=n*Xs;e.x=a*Math.cos(s),e.y=a*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),u(),e={tick:h,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,u(),o.each(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(a=+t,e):+a},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(r=1-t,e):1-r},force:function(t,n){return arguments.length>1?(null==n?o.remove(t):o.set(t,p(n)),e):o.get(t)},find:function(e,n,i){var a,s,r,o,l,c=0,d=t.length;for(null==i?i=1/0:i*=i,c=0;c<d;++c)(r=(a=e-(o=t[c]).x)*a+(s=n-o.y)*s)<i&&(l=o,i=r);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},t.forceX=function(t){var e,n,i,a=Ps(.1);function s(t){for(var a,s=0,r=e.length;s<r;++s)(a=e[s]).vx+=(i[s]-a.x)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+a(e[s],s,e)}}return"function"!=typeof t&&(t=Ps(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Ps(+t),r(),s):a},s.x=function(e){return arguments.length?(t="function"==typeof e?e:Ps(+e),r(),s):t},s},t.forceY=function(t){var e,n,i,a=Ps(.1);function s(t){for(var a,s=0,r=e.length;s<r;++s)(a=e[s]).vy+=(i[s]-a.y)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+a(e[s],s,e)}}return"function"!=typeof t&&(t=Ps(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Ps(+t),r(),s):a},s.y=function(e){return arguments.length?(t="function"==typeof e?e:Ps(+e),r(),s):t},s},t.formatDefaultLocale=lr,t.formatLocale=or,t.formatSpecifier=nr,t.precisionFixed=cr,t.precisionPrefix=dr,t.precisionRound=hr,t.geoArea=function(t){return ao.reset(),Vr(t,so),2*ao},t.geoBounds=function(t){var e,n,i,a,s,r,o;if(Jr=Qr=-(Kr=Xr=1/0),bo=[],Vr(t,Bo),n=bo.length){for(bo.sort(Uo),e=1,s=[i=bo[0]];e<n;++e)Go(i,(a=bo[e])[0])||Go(i,a[1])?(Wo(i[0],a[1])>Wo(i[0],i[1])&&(i[1]=a[1]),Wo(a[0],i[1])>Wo(i[0],i[1])&&(i[0]=a[0])):s.push(i=a);for(r=-1/0,e=0,i=s[n=s.length-1];e<=n;i=a,++e)(o=Wo(i[1],(a=s[e])[0]))>r&&(r=o,Kr=a[0],Qr=i[1])}return bo=yo=null,Kr===1/0||Xr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Kr,Xr],[Qr,Jr]]},t.geoCentroid=function(t){wo=xo=Co=ko=To=So=Ao=$o=Eo=Do=Io=0,Vr(t,Yo);var e=Eo,n=Do,i=Io,a=e*e+n*n+i*i;return a<1e-12&&(e=So,n=Ao,i=$o,xo<1e-6&&(e=Co,n=ko,i=To),(a=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[Tr(n,e)*wr,_r(i/Lr(a))*wr]},t.geoCircle=function(){var t,e,n=sl([0,0]),i=sl(90),a=sl(6),s={point:function(n,i){t.push(n=e(n,i)),n[0]*=wr,n[1]*=wr}};function r(){var r=n.apply(this,arguments),o=i.apply(this,arguments)*xr,l=a.apply(this,arguments)*xr;return t=[],e=ll(-r[0]*xr,-r[1]*xr,0).invert,pl(s,o,l,1),r={type:"Polygon",coordinates:[t]},t=e=null,r}return r.center=function(t){return arguments.length?(n="function"==typeof t?t:sl([+t[0],+t[1]]),r):n},r.radius=function(t){return arguments.length?(i="function"==typeof t?t:sl(+t),r):i},r.precision=function(t){return arguments.length?(a="function"==typeof t?t:sl(+t),r):a},r},t.geoClipAntimeridian=Sl,t.geoClipCircle=Al,t.geoClipExtent=function(){var t,e,n,i=0,a=0,s=960,r=500;return n={stream:function(n){return t&&e===n?t:t=$l(i,a,s,r)(e=n)},extent:function(o){return arguments.length?(i=+o[0][0],a=+o[0][1],s=+o[1][0],r=+o[1][1],t=e=null,n):[[i,a],[s,r]]}}},t.geoClipRectangle=$l,t.geoContains=function(t,e){return(t&&zl.hasOwnProperty(t.type)?zl[t.type]:ql)(t,e)},t.geoDistance=Fl,t.geoGraticule=Xl,t.geoGraticule10=function(){return Xl()()},t.geoInterpolate=function(t,e){var n=t[0]*xr,i=t[1]*xr,a=e[0]*xr,s=e[1]*xr,r=Sr(i),o=Ir(i),l=Sr(s),c=Ir(s),d=r*Sr(n),h=r*Ir(n),u=l*Sr(a),p=l*Ir(a),f=2*_r(Lr(Rr(s-i)+r*l*Rr(a-n))),g=Ir(f),m=f?function(t){var e=Ir(t*=f)/g,n=Ir(f-t)/g,i=n*d+e*u,a=n*h+e*p,s=n*o+e*c;return[Tr(a,i)*wr,Tr(s,Lr(i*i+a*a))*wr]}:function(){return[n*wr,i*wr]};return m.distance=f,m},t.geoLength=Rl,t.geoPath=function(t,e){var n,i,a=4.5;function s(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Vr(t,n(i))),i.result()}return s.area=function(t){return Vr(t,n(ac)),ac.result()},s.measure=function(t){return Vr(t,n(jc)),jc.result()},s.bounds=function(t){return Vr(t,n(vc)),vc.result()},s.centroid=function(t){return Vr(t,n($c)),$c.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,Ql):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new Gc):new Bc(e=t),"function"!=typeof a&&i.pointRadius(a),s):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t).context(e)},t.geoAlbers=dd,t.geoAlbersUsa=function(){var t,e,n,i,a,s,r=dd(),o=cd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=cd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){s=[t,e]}};function d(t){var e=t[0],r=t[1];return s=null,n.point(e,r),s||(i.point(e,r),s)||(a.point(e,r),s)}function h(){return t=e=null,d}return d.invert=function(t){var e=r.scale(),n=r.translate(),i=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&i>=-.425&&i<-.214?o:a>=.166&&a<.234&&i>=-.214&&i<-.115?l:r).invert(t)},d.stream=function(n){return t&&e===n?t:(i=[r.stream(e=n),o.stream(n),l.stream(n)],a=i.length,t={point:function(t,e){for(var n=-1;++n<a;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<a;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<a;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<a;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<a;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<a;)i[t].polygonEnd()}});var i,a},d.precision=function(t){return arguments.length?(r.precision(t),o.precision(t),l.precision(t),h()):r.precision()},d.scale=function(t){return arguments.length?(r.scale(t),o.scale(.35*t),l.scale(t),d.translate(r.translate())):r.scale()},d.translate=function(t){if(!arguments.length)return r.translate();var e=r.scale(),s=+t[0],d=+t[1];return n=r.translate(t).clipExtent([[s-.455*e,d-.238*e],[s+.455*e,d+.238*e]]).stream(c),i=o.translate([s-.307*e,d+.201*e]).clipExtent([[s-.425*e+1e-6,d+.12*e+1e-6],[s-.214*e-1e-6,d+.234*e-1e-6]]).stream(c),a=l.translate([s-.205*e,d+.212*e]).clipExtent([[s-.214*e+1e-6,d+.166*e+1e-6],[s-.115*e-1e-6,d+.234*e-1e-6]]).stream(c),h()},d.fitExtent=function(t,e){return Jc(d,t,e)},d.fitSize=function(t,e){return Zc(d,t,e)},d.fitWidth=function(t,e){return td(d,t,e)},d.fitHeight=function(t,e){return ed(d,t,e)},d.scale(1070)},t.geoAzimuthalEqualArea=function(){return sd(pd).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=pd,t.geoAzimuthalEquidistant=function(){return sd(fd).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=fd,t.geoConicConformal=function(){return od(bd).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=bd,t.geoConicEqualArea=cd,t.geoConicEqualAreaRaw=ld,t.geoConicEquidistant=function(){return od(wd).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=wd,t.geoEquirectangular=function(){return sd(yd).scale(152.63)},t.geoEquirectangularRaw=yd,t.geoGnomonic=function(){return sd(xd).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=xd,t.geoIdentity=function(){var t,e,n,i,a,s,r=1,o=0,l=0,c=1,d=1,h=Ql,u=null,p=Ql;function f(){return i=a=null,s}return s={stream:function(t){return i&&a===t?i:i=h(p(a=t))},postclip:function(i){return arguments.length?(p=i,u=t=e=n=null,f()):p},clipExtent:function(i){return arguments.length?(p=null==i?(u=t=e=n=null,Ql):$l(u=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),f()):null==u?null:[[u,t],[e,n]]},scale:function(t){return arguments.length?(h=Cd((r=+t)*c,r*d,o,l),f()):r},translate:function(t){return arguments.length?(h=Cd(r*c,r*d,o=+t[0],l=+t[1]),f()):[o,l]},reflectX:function(t){return arguments.length?(h=Cd(r*(c=t?-1:1),r*d,o,l),f()):c<0},reflectY:function(t){return arguments.length?(h=Cd(r*c,r*(d=t?-1:1),o,l),f()):d<0},fitExtent:function(t,e){return Jc(s,t,e)},fitSize:function(t,e){return Zc(s,t,e)},fitWidth:function(t,e){return td(s,t,e)},fitHeight:function(t,e){return ed(s,t,e)}}},t.geoProjection=sd,t.geoProjectionMutator=rd,t.geoMercator=function(){return md(gd).scale(961/yr)},t.geoMercatorRaw=gd,t.geoNaturalEarth1=function(){return sd(kd).scale(175.295)},t.geoNaturalEarth1Raw=kd,t.geoOrthographic=function(){return sd(Td).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=Td,t.geoStereographic=function(){return sd(Sd).scale(250).clipAngle(142)},t.geoStereographicRaw=Sd,t.geoTransverseMercator=function(){var t=md(Ad),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Ad,t.geoRotation=ul,t.geoStream=Vr,t.geoTransform=function(t){return{stream:Kc(t)}},t.cluster=function(){var t=$d,e=1,n=1,i=!1;function a(a){var s,r=0;a.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Ed,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Dd,0)}(n)):(e.x=s?r+=t(e,s):0,e.y=0,s=e)}));var o=function(t){for(var e;e=t.children;)t=e[0];return t}(a),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(a),c=o.x-t(o,l)/2,d=l.x+t(l,o)/2;return a.eachAfter(i?function(t){t.x=(t.x-a.x)*e,t.y=(a.y-t.y)*n}:function(t){t.x=(t.x-c)/(d-c)*e,t.y=(1-(a.y?t.y/a.y:1))*n})}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],a):i?null:[e,n]},a.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],a):i?[e,n]:null},a},t.hierarchy=Md,t.pack=function(){var t=null,e=1,n=1,i=Jd;function a(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(eh(t)).eachAfter(nh(i,.5)).eachBefore(ih(1)):a.eachBefore(eh(th)).eachAfter(nh(Jd,1)).eachAfter(nh(i,a.r/Math.min(e,n))).eachBefore(ih(Math.min(e,n)/(2*a.r))),a}return a.radius=function(e){return arguments.length?(t=Xd(e),a):t},a.size=function(t){return arguments.length?(e=+t[0],n=+t[1],a):[e,n]},a.padding=function(t){return arguments.length?(i="function"==typeof t?t:Zd(+t),a):i},a},t.packSiblings=function(t){return Kd(t),t},t.packEnclose=Bd,t.partition=function(){var t=1,e=1,n=0,i=!1;function a(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/s,a.eachBefore(function(t,e){return function(i){i.children&&sh(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var a=i.x0,s=i.y0,r=i.x1-n,o=i.y1-n;r<a&&(a=r=(a+r)/2),o<s&&(s=o=(s+o)/2),i.x0=a,i.y0=s,i.x1=r,i.y1=o}}(e,s)),i&&a.eachBefore(ah),a}return a.round=function(t){return arguments.length?(i=!!t,a):i},a.size=function(n){return arguments.length?(t=+n[0],e=+n[1],a):[t,e]},a.padding=function(t){return arguments.length?(n=+t,a):n},a},t.stratify=function(){var t=lh,e=ch;function n(n){var i,a,s,r,o,l,c,d=n.length,h=new Array(d),u={};for(a=0;a<d;++a)o=h[a]=new _d(i=n[a]),null!=(l=t(i,a,n))&&(l+="")&&(u[c="$"+(o.id=l)]=c in u?oh:o);for(a=0;a<d;++a)if(o=h[a],null!=(l=e(n[a],a,n))&&(l+="")){if(!(r=u["$"+l]))throw new Error("missing: "+l);if(r===oh)throw new Error("ambiguous: "+l);r.children?r.children.push(o):r.children=[o],o.parent=r}else{if(s)throw new Error("multiple roots");s=o}if(!s)throw new Error("no root");if(s.parent=rh,s.eachBefore((function(t){t.depth=t.parent.depth+1,--d})).eachBefore(Nd),s.parent=null,d>0)throw new Error("cycle");return s}return n.id=function(e){return arguments.length?(t=Qd(e),n):t},n.parentId=function(t){return arguments.length?(e=Qd(t),n):e},n},t.tree=function(){var t=dh,e=1,n=1,i=null;function a(a){var l=function(t){for(var e,n,i,a,s,r=new gh(t,0),o=[r];e=o.pop();)if(i=e._.children)for(e.children=new Array(s=i.length),a=s-1;a>=0;--a)o.push(n=e.children[a]=new gh(i[a],a)),n.parent=e;return(r.parent=new gh(null,0)).children=[r],r}(a);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(r),i)a.eachBefore(o);else{var c=a,d=a,h=a;a.eachBefore((function(t){t.x<c.x&&(c=t),t.x>d.x&&(d=t),t.depth>h.depth&&(h=t)}));var u=c===d?1:t(c,d)/2,p=u-c.x,f=e/(d.x+u+p),g=n/(h.depth||1);a.eachBefore((function(t){t.x=(t.x+p)*f,t.y=t.depth*g}))}return a}function s(e){var n=e.children,i=e.parent.children,a=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,a=t.children,s=a.length;--s>=0;)(e=a[s]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var s=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+t(e._,a._),e.m=e.z-s):e.z=s}else a&&(e.z=a.z+t(e._,a._));e.parent.A=function(e,n,i){if(n){for(var a,s=e,r=e,o=n,l=s.parent.children[0],c=s.m,d=r.m,h=o.m,u=l.m;o=uh(o),s=hh(s),o&&s;)l=hh(l),(r=uh(r)).a=e,(a=o.z+h-s.z-c+t(o._,s._))>0&&(ph(fh(o,e,i),e,a),c+=a,d+=a),h+=o.m,c+=s.m,u+=l.m,d+=r.m;o&&!uh(r)&&(r.t=o,r.m+=h-d),s&&!hh(l)&&(l.t=s,l.m+=c-u,i=e)}return i}(e,a,e.parent.A||i[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t){t.x*=e,t.y=t.depth*n}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],a):i?null:[e,n]},a.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],a):i?[e,n]:null},a},t.treemap=function(){var t=yh,e=!1,n=1,i=1,a=[0],s=Jd,r=Jd,o=Jd,l=Jd,c=Jd;function d(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),a=[0],e&&t.eachBefore(ah),t}function h(e){var n=a[e.depth],i=e.x0+n,d=e.y0+n,h=e.x1-n,u=e.y1-n;h<i&&(i=h=(i+h)/2),u<d&&(d=u=(d+u)/2),e.x0=i,e.y0=d,e.x1=h,e.y1=u,e.children&&(n=a[e.depth+1]=s(e)/2,i+=c(e)-n,d+=r(e)-n,(h-=o(e)-n)<i&&(i=h=(i+h)/2),(u-=l(e)-n)<d&&(d=u=(d+u)/2),t(e,i,d,h,u))}return d.round=function(t){return arguments.length?(e=!!t,d):e},d.size=function(t){return arguments.length?(n=+t[0],i=+t[1],d):[n,i]},d.tile=function(e){return arguments.length?(t=Qd(e),d):t},d.padding=function(t){return arguments.length?d.paddingInner(t).paddingOuter(t):d.paddingInner()},d.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:Zd(+t),d):s},d.paddingOuter=function(t){return arguments.length?d.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):d.paddingTop()},d.paddingTop=function(t){return arguments.length?(r="function"==typeof t?t:Zd(+t),d):r},d.paddingRight=function(t){return arguments.length?(o="function"==typeof t?t:Zd(+t),d):o},d.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Zd(+t),d):l},d.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Zd(+t),d):c},d},t.treemapBinary=function(t,e,n,i,a){var s,r,o=t.children,l=o.length,c=new Array(l+1);for(c[0]=r=s=0;s<l;++s)c[s+1]=r+=o[s].value;!function t(e,n,i,a,s,r,l){if(e>=n-1){var d=o[e];return d.x0=a,d.y0=s,d.x1=r,void(d.y1=l)}for(var h=c[e],u=i/2+h,p=e+1,f=n-1;p<f;){var g=p+f>>>1;c[g]<u?p=g+1:f=g}u-c[p-1]<c[p]-u&&e+1<p&&--p;var m=c[p]-h,v=i-m;if(r-a>l-s){var b=(a*v+r*m)/i;t(e,p,m,a,s,b,l),t(p,n,v,b,s,r,l)}else{var y=(s*v+l*m)/i;t(e,p,m,a,s,r,y),t(p,n,v,a,y,r,l)}}(0,l,t.value,e,n,i,a)},t.treemapDice=sh,t.treemapSlice=mh,t.treemapSliceDice=function(t,e,n,i,a){(1&t.depth?mh:sh)(t,e,n,i,a)},t.treemapSquarify=yh,t.treemapResquarify=wh,t.interpolate=Nn,t.interpolateArray=$n,t.interpolateBasis=vn,t.interpolateBasisClosed=bn,t.interpolateDate=En,t.interpolateNumber=Dn,t.interpolateObject=In,t.interpolateRound=_n,t.interpolateString=Pn,t.interpolateTransformCss=jn,t.interpolateTransformSvg=Wn,t.interpolateZoom=Yn,t.interpolateRgb=kn,t.interpolateRgbBasis=Sn,t.interpolateRgbBasisClosed=An,t.interpolateHsl=Xn,t.interpolateHslLong=Qn,t.interpolateLab=function(t,e){var n=Cn((t=Ke(t)).l,(e=Ke(e)).l),i=Cn(t.a,e.a),a=Cn(t.b,e.b),s=Cn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=a(e),t.opacity=s(e),t+""}},t.interpolateHcl=Zn,t.interpolateHclLong=ti,t.interpolateCubehelix=ai,t.interpolateCubehelixLong=si,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.path=as,t.polygonArea=function(t){for(var e,n=-1,i=t.length,a=t[i-1],s=0;++n<i;)s+=(e=a)[1]*(a=t[n])[0]-e[0]*a[1];return s/2},t.polygonCentroid=function(t){for(var e,n,i=-1,a=t.length,s=0,r=0,o=t[a-1],l=0;++i<a;)l+=n=(e=o)[0]*(o=t[i])[1]-o[0]*e[1],s+=(e[0]+o[0])*n,r+=(e[1]+o[1])*n;return[s/(l*=3),r/l]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),a=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Ch),e=0;e<n;++e)a[e]=[i[e][0],-i[e][1]];var s=kh(i),r=kh(a),o=r[0]===s[0],l=r[r.length-1]===s[s.length-1],c=[];for(e=s.length-1;e>=0;--e)c.push(t[i[s[e]][2]]);for(e=+o;e<r.length-l;++e)c.push(t[i[r[e]][2]]);return c},t.polygonContains=function(t,e){for(var n,i,a=t.length,s=t[a-1],r=e[0],o=e[1],l=s[0],c=s[1],d=!1,h=0;h<a;++h)n=(s=t[h])[0],(i=s[1])>o!=c>o&&r<(l-n)*(o-i)/(c-i)+n&&(d=!d),l=n,c=i;return d},t.polygonLength=function(t){for(var e,n,i=-1,a=t.length,s=t[a-1],r=s[0],o=s[1],l=0;++i<a;)e=r,n=o,e-=r=(s=t[i])[0],n-=o=s[1],l+=Math.sqrt(e*e+n*n);return l},t.quadtree=Fs,t.queue=Mh,t.randomUniform=Ph,t.randomNormal=Nh,t.randomLogNormal=_h,t.randomBates=Bh,t.randomIrwinHall=Rh,t.randomExponential=Oh,t.request=Fh,t.html=Hh,t.json=qh,t.text=Vh,t.xml=jh,t.csv=Gh,t.tsv=Yh,t.scaleBand=tu,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(tu().paddingInner(1))},t.scaleIdentity=function t(){var e=[0,1];function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Xh.call(t,nu),n):e.slice()},n.copy=function(){return t().domain(e)},cu(n)},t.scaleLinear=function t(){var e=lu(au,Dn);return e.copy=function(){return ou(e,t())},cu(e)},t.scaleLog=function e(){var n=lu(hu,uu).domain([1,10]),i=n.domain,a=10,s=gu(10),r=fu(10);function o(){return s=gu(a),r=fu(a),i()[0]<0&&(s=mu(s),r=mu(r)),n}return n.base=function(t){return arguments.length?(a=+t,o()):a},n.domain=function(t){return arguments.length?(i(t),o()):i()},n.ticks=function(t){var e,n=i(),o=n[0],l=n[n.length-1];(e=l<o)&&(u=o,o=l,l=u);var c,d,h,u=s(o),p=s(l),f=null==t?10:+t,g=[];if(!(a%1)&&p-u<f){if(u=Math.round(u)-1,p=Math.round(p)+1,o>0){for(;u<p;++u)for(d=1,c=r(u);d<a;++d)if(!((h=c*d)<o)){if(h>l)break;g.push(h)}}else for(;u<p;++u)for(d=a-1,c=r(u);d>=1;--d)if(!((h=c*d)<o)){if(h>l)break;g.push(h)}}else g=w(u,p,Math.min(p-u,f)).map(r);return e?g.reverse():g},n.tickFormat=function(e,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var o=Math.max(1,a*e/n.ticks().length);return function(t){var e=t/r(Math.round(s(t)));return e*a<a-.5&&(e*=a),e<=o?i(t):""}},n.nice=function(){return i(du(i(),{floor:function(t){return r(Math.floor(s(t)))},ceil:function(t){return r(Math.ceil(s(t)))}}))},n.copy=function(){return ou(n,e().base(a))},n},t.scaleOrdinal=Zh,t.scaleImplicit=Jh,t.scalePow=bu,t.scaleSqrt=function(){return bu().exponent(.5)},t.scaleQuantile=function t(){var n=[],i=[],s=[];function r(){var t=0,e=Math.max(1,i.length);for(s=new Array(e-1);++t<e;)s[t-1]=T(n,t/e);return o}function o(t){if(!isNaN(t=+t))return i[a(s,t)]}return o.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?s[e-1]:n[0],e<s.length?s[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var i,a=0,s=t.length;a<s;++a)null==(i=t[a])||isNaN(i=+i)||n.push(i);return n.sort(e),r()},o.range=function(t){return arguments.length?(i=Qh.call(t),r()):i.slice()},o.quantiles=function(){return s.slice()},o.copy=function(){return t().domain(n).range(i)},o},t.scaleQuantize=function t(){var e=0,n=1,i=1,s=[.5],r=[0,1];function o(t){if(t<=t)return r[a(s,t,0,i)]}function l(){var t=-1;for(s=new Array(i);++t<i;)s[t]=((t+1)*n-(t-i)*e)/(i+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],l()):[e,n]},o.range=function(t){return arguments.length?(i=(r=Qh.call(t)).length-1,l()):r.slice()},o.invertExtent=function(t){var a=r.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,s[0]]:a>=i?[s[i-1],n]:[s[a-1],s[a]]},o.copy=function(){return t().domain([e,n]).range(r)},cu(o)},t.scaleThreshold=function t(){var e=[.5],n=[0,1],i=1;function s(t){if(t<=t)return n[a(e,t,0,i)]}return s.domain=function(t){return arguments.length?(e=Qh.call(t),i=Math.min(e.length,n.length-1),s):e.slice()},s.range=function(t){return arguments.length?(n=Qh.call(t),i=Math.min(e.length,n.length-1),s):n.slice()},s.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},s.copy=function(){return t().domain(e).range(n)},s},t.scaleTime=function(){return Vf(Ku,Gu,Pu,Iu,Eu,Au,Tu,Cu,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Vf(wp,bp,ap,ep,Zu,Qu,Tu,Cu,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Wf,t.schemeCategory20b=Uf,t.schemeCategory20c=Gf,t.schemeCategory20=Yf,t.interpolateCubehelixDefault=Kf,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Jf.h=360*t-100,Jf.s=1.5-1.5*e,Jf.l=.8-.9*e,Jf+""},t.interpolateWarm=Xf,t.interpolateCool=Qf,t.interpolateViridis=tg,t.interpolateMagma=eg,t.interpolateInferno=ng,t.interpolatePlasma=ig,t.scaleSequential=function t(e){var n=0,i=1,a=!1;function s(t){var s=(t-n)/(i-n);return e(a?Math.max(0,Math.min(1,s)):s)}return s.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],s):[n,i]},s.clamp=function(t){return arguments.length?(a=!!t,s):a},s.interpolator=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t(e).domain([n,i]).clamp(a)},cu(s)},t.create=function(t){return ee(Y(t).call(document.documentElement))},t.creator=Y,t.local=ie,t.matcher=nt,t.mouse=oe,t.namespace=W,t.namespaces=j,t.clientPoint=re,t.select=ee,t.selectAll=function(t){return"string"==typeof t?new Zt([document.querySelectorAll(t)],[document.documentElement]):new Zt([null==t?[]:t],Jt)},t.selection=te,t.selector=X,t.selectorAll=J,t.style=bt,t.touch=le,t.touches=function(t,e){null==e&&(e=se().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=re(t,e[n]);return a},t.window=ft,t.customEvent=Yt,t.arc=function(){var t=vg,e=bg,n=ag(0),i=null,a=yg,s=wg,r=xg,o=null;function l(){var l,c,d=+t.apply(this,arguments),h=+e.apply(this,arguments),u=a.apply(this,arguments)-pg,p=s.apply(this,arguments)-pg,f=sg(p-u),g=p>u;if(o||(o=l=as()),h<d&&(c=h,h=d,d=c),h>1e-12)if(f>fg-1e-12)o.moveTo(h*og(u),h*dg(u)),o.arc(0,0,h,u,p,!g),d>1e-12&&(o.moveTo(d*og(p),d*dg(p)),o.arc(0,0,d,p,u,g));else{var m,v,b=u,y=p,w=u,x=p,C=f,k=f,T=r.apply(this,arguments)/2,S=T>1e-12&&(i?+i.apply(this,arguments):hg(d*d+h*h)),A=cg(sg(h-d)/2,+n.apply(this,arguments)),$=A,E=A;if(S>1e-12){var D=mg(S/d*dg(T)),I=mg(S/h*dg(T));(C-=2*D)>1e-12?(w+=D*=g?1:-1,x-=D):(C=0,w=x=(u+p)/2),(k-=2*I)>1e-12?(b+=I*=g?1:-1,y-=I):(k=0,b=y=(u+p)/2)}var M=h*og(b),L=h*dg(b),P=d*og(x),N=d*dg(x);if(A>1e-12){var _=h*og(y),R=h*dg(y),B=d*og(w),O=d*dg(w);if(f<ug){var F=C>1e-12?Cg(M,L,B,O,_,R,P,N):[P,N],z=M-F[0],H=L-F[1],q=_-F[0],V=R-F[1],j=1/dg(gg((z*q+H*V)/(hg(z*z+H*H)*hg(q*q+V*V)))/2),W=hg(F[0]*F[0]+F[1]*F[1]);$=cg(A,(d-W)/(j-1)),E=cg(A,(h-W)/(j+1))}}k>1e-12?E>1e-12?(m=kg(B,O,M,L,h,E,g),v=kg(_,R,P,N,h,E,g),o.moveTo(m.cx+m.x01,m.cy+m.y01),E<A?o.arc(m.cx,m.cy,E,rg(m.y01,m.x01),rg(v.y01,v.x01),!g):(o.arc(m.cx,m.cy,E,rg(m.y01,m.x01),rg(m.y11,m.x11),!g),o.arc(0,0,h,rg(m.cy+m.y11,m.cx+m.x11),rg(v.cy+v.y11,v.cx+v.x11),!g),o.arc(v.cx,v.cy,E,rg(v.y11,v.x11),rg(v.y01,v.x01),!g))):(o.moveTo(M,L),o.arc(0,0,h,b,y,!g)):o.moveTo(M,L),d>1e-12&&C>1e-12?$>1e-12?(m=kg(P,N,_,R,d,-$,g),v=kg(M,L,B,O,d,-$,g),o.lineTo(m.cx+m.x01,m.cy+m.y01),$<A?o.arc(m.cx,m.cy,$,rg(m.y01,m.x01),rg(v.y01,v.x01),!g):(o.arc(m.cx,m.cy,$,rg(m.y01,m.x01),rg(m.y11,m.x11),!g),o.arc(0,0,d,rg(m.cy+m.y11,m.cx+m.x11),rg(v.cy+v.y11,v.cx+v.x11),g),o.arc(v.cx,v.cy,$,rg(v.y11,v.x11),rg(v.y01,v.x01),!g))):o.arc(0,0,d,x,w,g):o.lineTo(P,N)}else o.moveTo(0,0);if(o.closePath(),l)return o=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-ug/2;return[og(i)*n,dg(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ag(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ag(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:ag(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ag(+t),l):i},l.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:ag(+t),l):a},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:ag(+t),l):s},l.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:ag(+t),l):r},l.context=function(t){return arguments.length?(o=null==t?null:t,l):o},l},t.area=Dg,t.line=Eg,t.pie=function(){var t=Mg,e=Ig,n=null,i=ag(0),a=ag(fg),s=ag(0);function r(r){var o,l,c,d,h,u=r.length,p=0,f=new Array(u),g=new Array(u),m=+i.apply(this,arguments),v=Math.min(fg,Math.max(-fg,a.apply(this,arguments)-m)),b=Math.min(Math.abs(v)/u,s.apply(this,arguments)),y=b*(v<0?-1:1);for(o=0;o<u;++o)(h=g[f[o]=o]=+t(r[o],o,r))>0&&(p+=h);for(null!=e?f.sort((function(t,n){return e(g[t],g[n])})):null!=n&&f.sort((function(t,e){return n(r[t],r[e])})),o=0,c=p?(v-u*y)/p:0;o<u;++o,m=d)g[l=f[o]]={data:r[l],index:o,value:h=g[l],startAngle:m,endAngle:d=m+(h>0?h*c:0)+y,padAngle:b};return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:ag(+e),r):t},r.sortValues=function(t){return arguments.length?(e=t,n=null,r):e},r.sort=function(t){return arguments.length?(n=t,e=null,r):n},r.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ag(+t),r):i},r.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ag(+t),r):a},r.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:ag(+t),r):s},r},t.areaRadial=Bg,t.radialArea=Bg,t.lineRadial=Rg,t.radialLine=Rg,t.pointRadial=Og,t.linkHorizontal=function(){return qg(Vg)},t.linkVertical=function(){return qg(jg)},t.linkRadial=function(){var t=qg(Wg);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=ag(Ug),e=ag(64),n=null;function i(){var i;if(n||(n=i=as()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:ag(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:ag(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},t.symbols=cm,t.symbolCircle=Ug,t.symbolCross=Gg,t.symbolDiamond=Xg,t.symbolSquare=em,t.symbolStar=tm,t.symbolTriangle=im,t.symbolWye=lm,t.curveBasisClosed=function(t){return new pm(t)},t.curveBasisOpen=function(t){return new fm(t)},t.curveBasis=function(t){return new um(t)},t.curveBundle=mm,t.curveCardinalClosed=xm,t.curveCardinalOpen=km,t.curveCardinal=ym,t.curveCatmullRomClosed=Em,t.curveCatmullRomOpen=Im,t.curveCatmullRom=Am,t.curveLinearClosed=function(t){return new Mm(t)},t.curveLinear=Sg,t.curveMonotoneX=function(t){return new Rm(t)},t.curveMonotoneY=function(t){return new Bm(t)},t.curveNatural=function(t){return new Fm(t)},t.curveStep=function(t){return new Hm(t,.5)},t.curveStepAfter=function(t){return new Hm(t,1)},t.curveStepBefore=function(t){return new Hm(t,0)},t.stack=function(){var t=ag([]),e=Vm,n=qm,i=jm;function a(a){var s,r,o=t.apply(this,arguments),l=a.length,c=o.length,d=new Array(c);for(s=0;s<c;++s){for(var h,u=o[s],p=d[s]=new Array(l),f=0;f<l;++f)p[f]=h=[0,+i(a[f],u,f,a)],h.data=a[f];p.key=u}for(s=0,r=e(d);s<c;++s)d[r[s]].index=s;return n(d,r),d}return a.keys=function(e){return arguments.length?(t="function"==typeof e?e:ag(Fg.call(e)),a):t},a.value=function(t){return arguments.length?(i="function"==typeof t?t:ag(+t),a):i},a.order=function(t){return arguments.length?(e=null==t?Vm:"function"==typeof t?t:ag(Fg.call(t)),a):e},a.offset=function(t){return arguments.length?(n=null==t?qm:t,a):n},a},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,a,s=0,r=t[0].length;s<r;++s){for(a=n=0;n<i;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<i;++n)t[n][s][1]/=a}qm(t,e)}},t.stackOffsetDiverging=function(t,e){if((o=t.length)>1)for(var n,i,a,s,r,o,l=0,c=t[e[0]].length;l<c;++l)for(s=r=0,n=0;n<o;++n)(a=(i=t[e[n]][l])[1]-i[0])>=0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=r,i[0]=r+=a):i[0]=s},t.stackOffsetNone=qm,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,a=t[e[0]],s=a.length;i<s;++i){for(var r=0,o=0;r<n;++r)o+=t[r][i][1]||0;a[i][1]+=a[i][0]=-o/2}qm(t,e)}},t.stackOffsetWiggle=function(t,e){if((a=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,a,s=0,r=1;r<i;++r){for(var o=0,l=0,c=0;o<a;++o){for(var d=t[e[o]],h=d[r][1]||0,u=(h-(d[r-1][1]||0))/2,p=0;p<o;++p){var f=t[e[p]];u+=(f[r][1]||0)-(f[r-1][1]||0)}l+=h,c+=u*h}n[r-1][1]+=n[r-1][0]=s,l&&(s-=c/l)}n[r-1][1]+=n[r-1][0]=s,qm(t,e)}},t.stackOrderAscending=Wm,t.stackOrderDescending=function(t){return Wm(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,a=t.map(Um),s=Vm(t).sort((function(t,e){return a[e]-a[t]})),r=0,o=0,l=[],c=[];for(e=0;e<i;++e)n=s[e],r<o?(r+=a[n],l.push(n)):(o+=a[n],c.push(n));return c.reverse().concat(l)},t.stackOrderNone=Vm,t.stackOrderReverse=function(t){return Vm(t).reverse()},t.timeInterval=xu,t.timeMillisecond=Cu,t.timeMilliseconds=ku,t.utcMillisecond=Cu,t.utcMilliseconds=ku,t.timeSecond=Tu,t.timeSeconds=Su,t.utcSecond=Tu,t.utcSeconds=Su,t.timeMinute=Au,t.timeMinutes=$u,t.timeHour=Eu,t.timeHours=Du,t.timeDay=Iu,t.timeDays=Mu,t.timeWeek=Pu,t.timeWeeks=zu,t.timeSunday=Pu,t.timeSundays=zu,t.timeMonday=Nu,t.timeMondays=Hu,t.timeTuesday=_u,t.timeTuesdays=qu,t.timeWednesday=Ru,t.timeWednesdays=Vu,t.timeThursday=Bu,t.timeThursdays=ju,t.timeFriday=Ou,t.timeFridays=Wu,t.timeSaturday=Fu,t.timeSaturdays=Uu,t.timeMonth=Gu,t.timeMonths=Yu,t.timeYear=Ku,t.timeYears=Xu,t.utcMinute=Qu,t.utcMinutes=Ju,t.utcHour=Zu,t.utcHours=tp,t.utcDay=ep,t.utcDays=np,t.utcWeek=ap,t.utcWeeks=hp,t.utcSunday=ap,t.utcSundays=hp,t.utcMonday=sp,t.utcMondays=up,t.utcTuesday=rp,t.utcTuesdays=pp,t.utcWednesday=op,t.utcWednesdays=fp,t.utcThursday=lp,t.utcThursdays=gp,t.utcFriday=cp,t.utcFridays=mp,t.utcSaturday=dp,t.utcSaturdays=vp,t.utcMonth=bp,t.utcMonths=yp,t.utcYear=wp,t.utcYears=xp,t.timeFormatDefaultLocale=Of,t.timeFormatLocale=Sp,t.isoFormat=Ff,t.isoParse=zf,t.now=fi,t.timer=vi,t.timerFlush=bi,t.timeout=Ci,t.interval=function(t,e,n){var i=new mi,a=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?fi():+n,i.restart((function s(r){r+=a,i.restart(s,a+=e,n),t(r)}),e,n),i)},t.transition=Ji,t.active=function(t,e){var n,i,a=t.__transition;if(a)for(i in e=null==e?null:e+"",a)if((n=a[i]).state>1&&n.name===e)return new Qi([[t]],Ca,e,+i);return null},t.interrupt=Di,t.voronoi=function(){var t=Ym,e=Km,n=null;function i(i){return new Iv(i.map((function(n,a){var s=[Math.round(t(n,a,i)/Av)*Av,Math.round(e(n,a,i)/Av)*Av];return s.index=a,s.data=n,s})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Gm(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Gm(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},t.zoom=function(){var e,n,i=Ov,a=Fv,s=Vv,r=Hv,o=qv,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=Yn,u=[],p=O("start","zoom","end"),f=0;function g(t){t.property("__zoom",zv).on("wheel.zoom",C).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",S).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new Pv(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,a=e[1]-n[1]*t.k;return i===t.x&&a===t.y?t:new Pv(t.k,i,a)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n){t.on("start.zoom",(function(){w(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,s=w(t,i),r=a.apply(t,i),o=n||b(r),l=Math.max(r[1][0]-r[0][0],r[1][1]-r[0][1]),c=t.__zoom,d="function"==typeof e?e.apply(t,i):e,u=h(c.invert(o).concat(l/c.k),d.invert(o).concat(l/d.k));return function(t){if(1===t)t=d;else{var e=u(t),n=l/e[2];t=new Pv(n,o[0]-e[0]*n,o[1]-e[1]*n)}s.zoom(null,t)}}))}function w(t,e){for(var n,i=0,a=u.length;i<a;++i)if((n=u[i]).that===t)return n;return new x(t,e)}function x(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=a.apply(t,e)}function C(){if(i.apply(this,arguments)){var t=w(this,arguments),e=this.__zoom,n=Math.max(l[0],Math.min(l[1],e.k*Math.pow(2,r.apply(this,arguments)))),a=oe(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[a,e.invert(a)],Di(this),t.start()}Bv(),t.wheel=setTimeout(o,150),t.zoom("mouse",s(v(m(e,n),t.mouse[0],t.mouse[1]),t.extent,c))}function o(){t.wheel=null,t.end()}}function k(){if(!n&&i.apply(this,arguments)){var e=w(this,arguments),a=ee(t.event.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",h,!0),r=oe(this),o=t.event.clientX,l=t.event.clientY;he(t.event.view),Rv(),e.mouse=[r,this.__zoom.invert(r)],Di(this),e.start()}function d(){if(Bv(),!e.moved){var n=t.event.clientX-o,i=t.event.clientY-l;e.moved=n*n+i*i>f}e.zoom("mouse",s(v(e.that.__zoom,e.mouse[0]=oe(e.that),e.mouse[1]),e.extent,c))}function h(){a.on("mousemove.zoom mouseup.zoom",null),ue(t.event.view,e.moved),Bv(),e.end()}}function T(){if(i.apply(this,arguments)){var e=this.__zoom,n=oe(this),r=e.invert(n),o=e.k*(t.event.shiftKey?.5:2),l=s(v(m(e,o),n,r),a.apply(this,arguments),c);Bv(),d>0?ee(this).transition().duration(d).call(y,l,n):ee(this).call(g.transform,l)}}function S(){if(i.apply(this,arguments)){var n,a,s,r,o=w(this,arguments),l=t.event.changedTouches,c=l.length;for(Rv(),a=0;a<c;++a)r=[r=le(this,l,(s=l[a]).identifier),this.__zoom.invert(r),s.identifier],o.touch0?o.touch1||(o.touch1=r):(o.touch0=r,n=!0);if(e&&(e=clearTimeout(e),!o.touch1))return o.end(),void((r=ee(this).on("dblclick.zoom"))&&r.apply(this,arguments));n&&(e=setTimeout((function(){e=null}),500),Di(this),o.start())}}function A(){var n,i,a,r,o=w(this,arguments),l=t.event.changedTouches,d=l.length;for(Bv(),e&&(e=clearTimeout(e)),n=0;n<d;++n)a=le(this,l,(i=l[n]).identifier),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=a:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=a);if(i=o.that.__zoom,o.touch1){var h=o.touch0[0],u=o.touch0[1],p=o.touch1[0],f=o.touch1[1],g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g,b=(b=f[0]-u[0])*b+(b=f[1]-u[1])*b;i=m(i,Math.sqrt(g/b)),a=[(h[0]+p[0])/2,(h[1]+p[1])/2],r=[(u[0]+f[0])/2,(u[1]+f[1])/2]}else{if(!o.touch0)return;a=o.touch0[0],r=o.touch0[1]}o.zoom("touch",s(v(i,a,r),o.extent,c))}function $(){var e,i,a=w(this,arguments),s=t.event.changedTouches,r=s.length;for(Rv(),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),e=0;e<r;++e)i=s[e],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}return g.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",zv),t!==n?y(t,e):n.interrupt().each((function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e){g.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}))},g.scaleTo=function(t,e){g.transform(t,(function(){var t=a.apply(this,arguments),n=this.__zoom,i=b(t),r=n.invert(i),o="function"==typeof e?e.apply(this,arguments):e;return s(v(m(n,o),i,r),t,c)}))},g.translateBy=function(t,e,n){g.transform(t,(function(){return s(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),c)}))},g.translateTo=function(t,e,n){g.transform(t,(function(){var t=a.apply(this,arguments),i=this.__zoom,r=b(t);return s(Nv.translate(r[0],r[1]).scale(i.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}))},x.prototype={start:function(){return 1==++this.active&&(this.index=u.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(u.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Yt(new Lv(g,t,this.that.__zoom),p.apply,p,[t,this.that,this.args])}},g.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:Mv(+t),g):r},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:Mv(!!t),g):i},g.touchable=function(t){return arguments.length?(o="function"==typeof t?t:Mv(!!t),g):o},g.extent=function(t){return arguments.length?(a="function"==typeof t?t:Mv([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):a},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(s=t,g):s},g.duration=function(t){return arguments.length?(d=+t,g):d},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=p.on.apply(p,arguments);return t===p?g:t},g.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,g):Math.sqrt(f)},g},t.zoomTransform=_v,t.zoomIdentity=Nv,Object.defineProperty(t,"__esModule",{value:!0})}));var Soho=function(t){"use strict";var e=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function(t){},logTimeEnd:function(t){},enableConsoleLogging:!1,log:function(t,e){},getComponents:function(t){var e=(t?$(t):$("body")).find("*"),n=[];return e.each((function(t,e){var i=$(e).data();i&&Object.keys(i).length&&n.push({data:i,element:e})})),n}});function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,n){return(s=a()?Reflect.construct:function(t,e,n){var a=[null];a.push.apply(a,e);var s=new(Function.bind.apply(t,a));return n&&i(s,n.prototype),s}).apply(null,arguments)}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}));var o={stripHTML:function(t){return t?t.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(t,e){if(!t)return"";if("number"==typeof t)return t;var n=("".concat(e||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(i,(function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""})).replace(i,(function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""})).replace(i,(function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""}))},sanitizeConsoleMethods:function(t){var e=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof t?t:t.replace(e,"")},sanitizeHTML:function(t){var e=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"");return e=e.replace(/<[^>]+/g,(function(t){return t.replace(/(\/|\s)on\w+=(\'|")?[^"]*(\'|")?/g,"")})),(e=this.sanitizeConsoleMethods(e)).replace(/<\/script>/g,"")},ensureAlphaNumeric:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9 ]/gi,"","")},escapeHTML:function(t){var e=t;if("string"==typeof e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return e.replace(/[&<>"']/gi,(function(t){return n[t]}))}return e},unescapeHTML:function(t){return""===t?"":"string"==typeof t?(new DOMParser).parseFromString(t,"text/html").documentElement.textContent:t},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},isUrlLocal:function(t){return!(""===t)&&("/"===t[0]&&(1===t.length||"/"!==t[1]&&"\\"!==t[1])||t.length>1&&"~"===t[0]&&"/"===t[1])||t.length>=1&&"#"===t[0]}},l={isValidElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement},getAttributes:function(t){return t&&(t instanceof HTMLElement||t instanceof SVGElement)?t.attributes:{}},classNameExists:function(t){var e=t.className;return e&&e.length>0},hasClass:function(t,e){if(!t.classList)return!1;if(t.className)return new RegExp("\\b".concat(e,"\\b")).test(t.className);var n=t.getAttribute("class");return!(!n||!n.length)&&n.indexOf(e)>-1},addClass:function(t){if(t){for(var e="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)t.classList?t.classList.add(i[s]):l.hasClass(t,[s])||(e.length&&(e+=" "),e+=i[s]);e.length&&$(t).addClass(e)}},removeClass:function(t){if(t){for(var e="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)t.classList?t.classList.remove(i[s]):l.hasClass(t,[s])||(e.length&&(e+=" "),e+=i[s]);e.length&&$(t).removeClass(e)}},isElement:function(t){return!!(t instanceof HTMLElement||t instanceof SVGElement||t instanceof $&&t.length)},getDimensions:function(t){if(!l.isElement(t))return{};if(t instanceof $){if(!t.length)return{};t=t[0]}var e=t.getBoundingClientRect(),n={};for(var i in e)isNaN(e[i])||(n[i]=e[i]);return n},append:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("beforeend",this.xssClean(e,n))},remove:function(t){var e=t;t instanceof $&&t.length&&(e=e[0]),(e instanceof HTMLElement||e instanceof SVGElement)&&t.parentNode&&t.parentNode.removeChild(t)},setAttribute:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.setAttribute("attribute",n)},xssClean:function(t,e){var n=t;return e&&"*"!==e&&(n=o.stripTags(t,e)),"*"===e&&(n=o.sanitizeHTML(t)),n},html:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&(i.innerHTML=this.xssClean(e,n))},parents:function(t,e,n){var i,a=[];if(!l.isValidElement(t))return a;for(;t.parentNode&&(!n||!a.length);)(i=t=t.parentNode)!==document&&i.matches(e)&&a.push(i);return n?a[0]:a},getNextSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var n=t.nextElementSibling;if(!e)return n;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}},getPreviousSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var n=t.previousElementSibling;if(!e)return n;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}},c={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},d=Object.keys(c);function h(t,e,n){var i;return function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var o=this;function l(){n||t.apply(o,s),i=null}i?clearTimeout(i):n&&t.apply(o,s),i=setTimeout(l,e||250)}}c.available=d,c.current=function(){var t=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return t?(t.getPropertyValue("content")||"").replace(/"/g,""):""},c.isAbove=function(t){var e=c[t];return!!e&&$(window).width()>e-1},c.isBelow=function(t){var e=c[t];return!!e&&$(window).width()<e},c.compare=function(){this.last||(this.last="");var t=this.current();this.last!==t&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:t}]),this.last=t)},c.isHidden=function(t){if(!t||!l.isElement(t))return!1;var e=t.classList;if(!e.length)return!1;if(e.contains("hidden"))return!0;var n={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],i="hidden-".concat(n),a="visible-".concat(n,"-");return!!e.contains(i)||(e.toString().indexOf(a),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&c.isHidden($(this).first()[0])},$.fn.debouncedResize=function(t){return t?this.bind("resize",h(t)):this.trigger("debouncedResize")};var u={browser:{},features:{touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.27.3"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var t=navigator.userAgent||navigator.vendor||window.opera,e=navigator.platform,n=$("html"),i="";if(-1!==t.indexOf("Safari")&&-1===t.indexOf("Chrome")&&-1===t.indexOf("Android")&&(i+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)){var a=/constructor/i.test(window.HTMLElement),s=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!a||s)&&(this.browser.name="wkwebview",i+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}if(-1!==t.indexOf("Chrome")&&(i+="is-chrome ",this.browser.name="chrome"),["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)>-1&&!/Linux/.test(e)&&(i+="is-mac ",this.os.name="Mac OS X"),t.indexOf("Firefox")>0&&(i+="is-firefox ",this.browser.name="firefox"),t.match(/Edge\//)&&(i+="ie ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",i+="ie-edge".concat(this.browser.version)),t.match(/Trident/)&&(i+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||t.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(i+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(i+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(i+="ie10 ",this.browser.version="10"):t.match(/Trident\/7\./)&&(i+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(t)){i+="ios ",this.os.name="ios";for(var r=["iPod","iPad","iPhone"],o=0;o<r.length;o++)new RegExp(r[o]).test(t)&&(i+="".concat(r[o].toLowerCase()," "),this.device=r[o])}/Android/.test(t)&&(i+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(e)&&(this.os.name="linux"),n.addClass(i)},addDeviceSpecs:function(){var t,e,n,i=navigator.appVersion,a=navigator.userAgent,s=navigator.appName,r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10),l="";-1!==(e=a.indexOf("Opera"))&&(s="Opera",r=a.substring(e+6),-1!==(e=a.indexOf("Version"))&&(r=a.substring(e+8))),-1!==(e=a.indexOf("OPR"))?(s="Opera",r=a.substring(e+4)):-1!==(e=a.indexOf("Edge"))?(s="Microsoft Edge",r=a.substring(e+5)):-1!==(e=a.indexOf("MSIE"))?(s="Microsoft Internet Explorer",r=a.substring(e+5)):-1!==(e=a.indexOf("Chrome"))?(s="Chrome",r=a.substring(e+7),a.indexOf("Edg")>-1&&(l="Microsoft Edge")):-1!==(e=a.indexOf("Safari"))?(s="Safari",r=a.substring(e+7),-1!==(e=a.indexOf("Version"))&&(r=a.substring(e+8))):this.browser.isWKWebView()?(s="WKWebView",r="",o=""):-1!==(e=a.indexOf("Firefox"))?(s="Firefox",r=a.substring(e+8)):-1!==a.indexOf("Trident/")?(s="Microsoft Internet Explorer",r=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(e=a.lastIndexOf("/"))&&(s=a.substring(t,e),r=a.substring(e+1),s.toLowerCase()===s.toUpperCase()&&(s=navigator.appName)),-1!==(n=r.indexOf(";"))&&(r=r.substring(0,n)),-1!==(n=r.indexOf(" "))&&(r=r.substring(0,n)),-1!==(n=r.indexOf(")"))&&(r=r.substring(0,n)),o=" ".concat(parseInt(r,10)),isNaN(o)&&(r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),d="-",h=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var u in h){var p=h[u];if(p.r.test(a)){d=p.s;break}}var f="-";switch(/Windows/.test(d)&&(f=/Windows (.*)/.exec(d)[1]),d){case"Mac OS X":f=/Mac OS X (10[\.\_\d]+)/.exec(a)[1].replace(/\_/g,".");break;case"Android":f=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":f=/OS (\d+)_?(\d+)?/.exec(a),f="".concat(f[1],".").concat(f[2],".").concat(0|f[3])}this.devicespecs={currentBrowser:s,browserVersion:r.trim(),browserMajorVersion:o,isMobile:c,os:d,currentOSVersion:f,browserVersionName:l}},addGlobalResize:function(){$(window).debouncedResize((function(){$("body").triggerHandler("resize",[window]),c.compare()})),$(window).on("orientationchange load",(function(){return c.compare()}))},removeGlobalEvents:function(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function p(t){return this.init(t)}function f(t,e,n){var i=$.Deferred();if(!l.isElement(t))return i.reject();if(t instanceof $&&t.length&&(t=t[0]),null==e)return i.resolve();if(isNaN(n)&&(n=0),e=Math.round(e),(n=Math.round(n))<0)return i.fail();if(0===n)return t.scrollLeft+=e,i.resolve();var a=Date.now(),s=a+n,r=t.scrollLeft,o=e,c=t.scrollLeft;return setTimeout((function e(){if(t.scrollLeft===c){var n=Date.now(),l=function(t,e,n){if(n<=t)return 0;if(n>=e)return 1;var i=(n-t)/(e-t);return i*i*(3-2*i)}(a,s,n),d=Math.round(r+o*l);t.scrollLeft=d,n>=s?i.resolve():t.scrollLeft!==c||t.scrollLeft===d?(c=t.scrollLeft,setTimeout(e,0)):i.resolve()}else i.reject()}),0),i}function g(t,e){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(t,e)}u.browser.isEdge=function(){return"edge"===u.browser.name},u.browser.isIE11=function(){return"ie"===u.browser.name&&"11"===u.browser.version},u.browser.isSafari=function(){return"safari"===u.browser.name||"wkwebview"===u.browser.name},u.browser.isIE10=function(){return"ie"===u.browser.name&&"10"===u.browser.version},u.set(),p.prototype={init:function(t){!this.element&&(t instanceof HTMLElement||t instanceof SVGElement)&&(this.element=t);var e=$(this.element),n=!1,i=!1,a=!1;if(e.is(".checkbox, .radio, .switch")){var s=e.next();s.is('[type="hidden"]')&&(s=s.next()),this.label=s[0],e.addClass("hide-focus").on("focusin.hide-focus",(function(t){n||i||a||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),n=!1,i=!0,a=!1})).on("focusout.hide-focus",(function(t){e.addClass("hide-focus"),a=s.is(a),n=!1,i=!1,e.triggerHandler("hidefocusadd",[t])})),s.on("mousedown.hide-focus",(function(t){a=this,n=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])}))}else{var r=function(t){n=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])};u.features.touch&&e.on("touchstart.hide-focus",(function(t){r(t)})),e.addClass("hide-focus").on("mousedown.hide-focus",(function(t){r(t)})).on("focusin.hide-focus",(function(t){n||i||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),n=!1,i=!0})).on("focusout.hide-focus",(function(t){e.addClass("hide-focus"),n=!1,i=!1,e.triggerHandler("hidefocusadd",[t])}))}return this},updated:function(){return this.teardown().init()},teardown:function(){return this.label&&$(this.label).off("mousedown.hide-focus"),$(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),this.element.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each((function(){var t=$.data(this,"hidefocus");t?t.updated():(t=$.data(this,"hidefocus",new p(this))).destroy=function(){this.teardown(),$.removeData(this,"hidefocus")}}))},$.fn.smoothScroll=function(t,e){return f(this,t,e)},$.fn.bindFirst=function(t,e){this.on(t,e),this.each((function(){var e=$._data(this,"events")[t.split(".")[0]],n=e.pop();e.splice(0,0,n)}))};var m=[];function v(t){return $.expr.filters.visible(t)&&!$(t).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.fn.cssPropSupport=function(t){if(!t)return null;var e=$("<div></div>")[0],n=t.toString(),i=["Moz","Webkit","O","ms"],a=n.charAt(0).toUpperCase()+n.substr(1);if(t in e.style)return $(e).remove(),t;for(var s=0;s<i.length;s++){var r=i[s]+a;if(r in e.style)return $(e).remove(),r}return $(e).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(t){return function(t){var e,n,i,a=t.nodeName.toLowerCase(),s=!isNaN($.attr(t,"tabindex"));return"area"===a?(n=(e=t.parentNode).name,!(!t.href||!n||"map"!==e.nodeName.toLowerCase())&&!!(i=$("img[usemap=#".concat(n,"]"))[0])&&v(i)):!!v(t)&&(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a&&void 0!==t.href||s)}(t,isNaN($.attr(t,"tabindex")))}}),$.fn.listEvents=function(){var t={};return this.each((function(){t=$._data(this,"events")})),t};var b={};function y(t){return"object"===n(t)||"function"==typeof t}function w(t){return"function"==typeof t?t():t}b.uniqueId=function(t,e,n,i){var a=t.id;if(a&&$("#".concat(a)).length<2)return a;n=n?"".concat(n,"-"):"",i=i?"-".concat(i):"",e=e||b.getArrayFromList(t.classList).join("-"),m[e]||(m[e]=1);var s="".concat(n).concat(e,"-").concat(m[e]).concat(i);return m[e]+=1,s},b.parseSettings=function(t,e){var n={};if(!t||!(t instanceof HTMLElement)&&!(t instanceof $)||t instanceof $&&!t.length)return n;t instanceof $&&(t=t[0]);var i=t.getAttribute(e=e||"data-options");if(!i||"string"!=typeof i||-1===i.indexOf("{"))return n;function a(t){return t.replace(/'/g,'"')}try{n=JSON.parse(a(i))}catch(s){n=JSON.parse(a(i.replace(/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,'$1"$2":').replace(/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,':"$2"')))}return n},b.parseOptions=function(t,e){return b.parseSettings(t,e)},$.fn.parseOptions=function(t,e){var n=[],i=this;return t instanceof HTMLElement||t instanceof SVGElement||t instanceof $?i=$(t):(e=t,t=void 0),i.each((function(t,i){n.push({element:this,options:b.parseOptions(i,e)})})),1===n.length?n[0].options:n},b.coerceToBoolean=function(t){return!/^(false|0)$/i.test(t)&&!!t},b.coerceSettingsToBoolean=function(t,e){var n,i;for(e&&Array.isArray(e)||Object.keys(t).forEach((function(t){e.push(t)})),n=0,i=e.length;n<i;n++)t[e[n]]=b.coerceToBoolean(t[e[n]]);return t},$.fn.timer=function(t,e){var n,i=$(this),a=0;function s(){n=setInterval((function(){i.triggerHandler("update",[{counter:a+=10}]),a>e&&(i.triggerHandler("timeout"),t.apply(arguments),clearInterval(n),a=0)}),10)}return s(),{event:this,cancel:function(){i.triggerHandler("cancel"),clearInterval(n),a=0},pause:function(){i.triggerHandler("pause"),clearInterval(n)},resume:function(){i.triggerHandler("resume"),s()}}},$.copyToClipboard=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(e)}}},$.fn.clearable=function(){var t=this;this.element=$(this),this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),this.clear=function(){t.element.val("").trigger("change").focus().trigger("cleared"),t.checkContents()},this.handleKeydown=function(e){var n=e.key;("Enter"===n||e.altKey&&("Delete"===n||"Backspace"===n))&&(e.preventDefault(),t.clear())},this.checkContents=function(){var e=t.element.val();e&&e.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(t.element),this.xButton[0].tabIndex=0,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown);var e=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(e).on(e,(function(){t.checkContents()})),this.checkContents()},b.actualChar=function(t){var e=t.which,n={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},i={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(n,e)&&(e=n[e]),e>=96&&e<=105&&(e-=48),!t.shiftKey&&e>=65&&e<=90?String.fromCharCode(e+32):!t.shiftKey&&e>=37&&e<=40?"":t.shiftKey&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:String.fromCharCode(e)},$.actualChar=function(t){return b.actualChar(t)},b.equals=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},l.convertToHTMLElement=function(t){return t instanceof HTMLElement?t:t instanceof $?t=t.length?t[0]:void 0:void 0},l.focusableElems=function(t){var e=t.querySelectorAll(["button","[href]","input","select","textarea",'[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].join(", "));return b.getArrayFromList(e).filter((function(t){return"use"!==t.tagName.toLowerCase()}))},b.extend=$.extend,b.fixSVGIcons=function t(e){if(("ie"===u.browser.name||"11"===u.browser.version)&&void 0!==e){var n="http://www.w3.org/1999/xlink";if(e instanceof $){if(!e.length)return;if(1!==e.length)return void e.each((function(e,n){t(n)}));e=e[0]}e instanceof NodeList?Array.prototype.forEach.call(e,(function(e){t(e)})):setTimeout((function(){for(var t=e.getElementsByTagName("use"),i=0;i<t.length;i++){var a=t[i].getAttributeNS(n,"href");t[i].setAttributeNS(n,"href","x"),t[i].setAttributeNS(n,"href",a)}}),1)}},b.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},b.getContainerScrollDistance=function(t){if(!l.isElement(t))return[];var e=[];return $(t).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each((function(){e.push({element:this,left:this.scrollLeft,top:this.scrollTop})})),document.body.classList.contains("no-scroll")||e.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),e},b.getHiddenSize=function(t,e){var n={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!l.isElement(t))return n.dims;t=$(t),e=$.extend({},n,e);var i=l.isElement(e.parentElement);i&&(t=t.clone().appendTo(e.parentElement));var a=e.dims,s=t.parents().add(t),r={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},o=[];return s.each((function(){var t=this,e={};Object.keys(r).forEach((function(n){t.style[n]&&(e[n]=t.style[n],t.style[n]=r[n])})),o.push(e)})),a.padding={bottom:t.css("padding-bottom"),left:t.css("padding-left"),right:t.css("padding-right"),top:t.css("padding-top")},a.width=t.width(),a.outerWidth=t.outerWidth(e.includeMargin),a.innerWidth=t.innerWidth(),a.scrollWidth=t[0].scrollWidth,a.height=t.height(),a.innerHeight=t.innerHeight(),a.outerHeight=t.outerHeight(e.includeMargin),a.scrollHeight=t[0].scrollHeight,s.each((function(t){var e=this,n=o[t];Object.keys(r).forEach((function(t){n[t]&&(e.style[t]=n[t])}))})),i&&t.remove(),a},$.fn.getHiddenSize=function(t){return b.getHiddenSize(this,t)},b.isString=function(t){return"string"==typeof t||t instanceof String},b.isNumber=function(t){return"number"==typeof t&&void 0===t.length&&!isNaN(t)},b.safeSetSelection=function(t,e,n){t instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(t.type)&&(e&&void 0===n&&(n=e),document.activeElement===t&&("android"===u.os.name?g((function(){t.setSelectionRange(e,n,"none")}),0):t.setSelectionRange(e,n,"none")))},b.mergeSettings=function(t,e,n){return e&&y(e)||(e=y(n)?n:{}),b.extend(!0,{},w(n||{}),w(e),void 0!==t?b.parseSettings(t):{})},b.isHTML=function(t){return/(<([^>]+)>)/i.test(t)};var x={convertDelayToFPS:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return t/16.7},convertFPSToDelay:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return 16.7*t},isFinite:function(t){return"number"==typeof t&&t==t&&t!==1/0&&t!==-1/0}};b.forEach=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n,t[i],i,t)},b.hasClass=function(t,e){var n=!1;if(t)if("classList"in t)n=t.classList.contains(e);else{var i=t.getAttribute("class");n=!!i&&-1!==i.split(/\s+/).indexOf(e)}return n},x.sign=function(t){return Math.sign?Math.sign(t):0==(t=+t)||isNaN(t)?t:t>0?1:-1},b.getArrayFromList=function(t){return Function.prototype.call.bind(Array.prototype.slice)(t)},b.getScrollbarWidth=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var i=n.offsetWidth;return t.parentNode.removeChild(t),e-i},b.deepCopy=function(t){return function t(e){if("object"!==n(e)||null===e)return e;var i=Array.isArray(e)?[]:{};return Object.keys(e).forEach((function(a){var s=e[a];i[a]="object"===n(s)&&null!==s?t(s):s})),i}(t)};var C={isEmpty:function(t){return 0===Object.keys(t).length&&t.constructor===Object}},k={EMPTY:"",splice:function(t,e,n,i){return t.slice(0,e)+i+t.slice(e+Math.abs(n))},removeDuplicates:function(t){return t.split("").filter((function(t,e,n){return n.indexOf(t)===e})).join("")},containsHTML:function(t){return/<[a-z][\s\S]*>/i.test(t)},stripWhitespace:function(t){return t.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toBoolean:function(t){var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},textWidth:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");n.font="".concat(e,"px arial");var i=n.measureText(t);return Math.round(i.width)},padDate:function(t,e,n){return t+"0".concat(e+1).slice(-2)+"0".concat(n).slice(-2)}};k.textWidth=function(t,e,n){this.canvasTW=this.canvasTW||(this.canvasTW=document.createElement("canvas"));var i=this.canvasTW.getContext("2d");i.font=n||"14px arial";var a=i.measureText(t);return Math.round(a.width+(e||0))},k.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},k.count=function(t,e){return t.split(e).length-1};var T={truncate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString(),i=n.split(".");return i[1]=i[1]?i[1].substr(0,e):"","".concat(i[0],".").concat(i[1])},round:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return T.toFixed(t,e)},fixTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(+(Math.round(+(t+"e"+e))+"e"+-e)).toFixed(e)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString(),i="",a=n.split("."),s=[a[0].substr(0,10),a[0].substr(10),a[1]],r=s[0],o=s[1];return i=this.fixTo((o||r)+(s[2]?".".concat(s[2]):""),e).toString(),o&&11===i.length&&"10000000000"===i&&(i="0000000000",r=(parseInt(r,10)+1).toString()),o&&(i=r+i),i},decimalPlaces:function(t){return Math.floor(t)===t||-1===t.toString().indexOf(".")?0:t.toString().split(".")[1].length||0}},S=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],A="",E=!1;"object"===n(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(A=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(E=window.SohoConfig.minifyCultures));var D={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:A,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pl-PL","pt-PT"],defaultLocale:"en-US",minify:E,updateLanguageTag:function(t){var e=$("html");2===t.length&&(t=this.defaultLocales.filter((function(e){return e.lang===t}))),e.attr("lang",t),this.isRTL()?e.attr("dir","rtl"):e.removeAttr("dir"),this.isRTL()&&D.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var t=document.getElementsByTagName("script"),e=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,n=0;n<t.length;n++){var i=t[n].src,a=i.indexOf("?");if(""!==i&&a>-1&&(i=i.substr(0,a)),"sohoxi-script"===t[n].id)return"".concat(i.substring(0,i.lastIndexOf("/")),"/");i.match(e)&&(this.culturesPath="".concat(i.replace(e,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var t=!1,e=document.getElementsByTagName("script"),n=0;n<e.length;n++)e[n].src.indexOf("cultures")>-1&&(t=!0);return t},correctLocale:function(t){"in-ID"===t&&(t="id-ID"),"iw"===t.substr(0,2)&&(t="he-IL");var e=t.split("-")[0];if(-1===this.supportedLocales.indexOf(t)){if((t=this.defaultLocales.filter((function(t){return t.lang===e})))&&t[0])return t[0].default;t=this.defaultLocale}return t},correctLanguage:function(t){var e=this.defaultLocales.filter((function(e){return e.lang===t}));return e&&e[0]?this.remapLanguage(t):e=this.remapLanguage(t)},remapLanguage:function(t){var e=t;return"in"===t&&(e="id"),"iw"===t&&(e="he"),"nb"!==t&&"nn"!==t||(e="no"),e},addCulture:function(t,e,n){var i=t.substr(0,2);if(this.cultures[t]=e,this.cultures[t].name=t,!this.languages[i]&&e.messages)this.languages[i]={name:i,direction:e.direction||(n?n.direction:""),nativeName:e.nativeName||(n?n.nativeName:""),messages:e.messages||(n?n.messages:{})},this.languages[t]={name:t,direction:e.direction||(n?n.direction:""),nativeName:e.nativeName||(n?n.nativeName:""),messages:e.messages||(n?n.messages:{})};else if(!this.languages[i]&&!e.messages){var a=this.parentLocale(t);a.default&&a.default!==t&&!this.cultures[a.default]&&this.appendLocaleScript(a.default)}},parentLocale:function(t){var e=t.substr(0,2),n=this.defaultLocales.filter((function(t){return t.lang===e}))[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(t)>-1?{lang:"fr",default:"fr-CA"}:n},appendedLocales:[],appendLocaleScript:function(t,e,i,a){var s=this,r=document.createElement("script"),o=this.minify?".min":"";r.async=!1,this.appendedLocales.indexOf(t)>-1||(this.appendedLocales.push(t),r.src=a?"".concat(this.getCulturesPath()+a).concat(o,".js"):"".concat(this.getCulturesPath()+t).concat(o,".js"),r.onload=function(){e&&!i&&(s.setCurrentLocale(t,s.cultures[t]),s.dff[t].resolve(t)),i&&s.dff[i]&&(s.setCurrentLocale(t,s.cultures[t]),s.setCurrentLocale(i,s.cultures[i]),s.dff[i].resolve(i)),i&&s.dff[t]&&s.cultures[t]&&(s.setCurrentLocale(t,s.cultures[t]),s.dff[t].resolve(t)),e||i||!s.dff[t]||s.dff[t].resolve(t)},r.onerror=function(){s.dff[t]&&s.dff[t].reject()},"object"===n(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&r.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(r))},set:function(t){if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===t);var e=!1,n=this.parentLocale(t);return n.default&&n.default!==t&&!this.cultures[n.default]&&(e=!0),e||!t||this.cultures[t]||this.currentLocale.name===t||"en-US"===t||(this.setCurrentLocale(t),this.appendLocaleScript(t,!0)),e&&("en-US"!==n.default&&this.appendLocaleScript(n.default,!1),this.appendLocaleScript(t,!1,n.default)),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(this.currentLocale.name),this.setCurrentLocale(t,this.cultures[t]),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(this.currentLocale.name),this.dff[t].promise()},getLocale:function(t,e){if(!t)return null;if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t){var n=$.Deferred();return n.resolve(),n.promise()}return t&&"en-US"!==t&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),t&&!this.cultures[t]&&this.currentLocale.name!==t&&"en-US"!==t&&this.appendLocaleScript(t,!1,!1,e),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(t),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(t),this.dff[t].promise()},setLanguage:function(t){var e=this,n=this.currentLocale.name;t=this.correctLanguage(t),this.languages[t]||this.set(t).done((function(){e.set(n),e.setLanguage(t)}));var i=this.correctLocale(t);return this.languages[t]?(this.currentLanguage=this.languages[t],this.updateLanguageTag(t),this.dff[i]=$.Deferred(),this.dff[i].resolve()):(this.currentLanguage.name=t,this.dff[i])},setCurrentLocale:function(t,e){var n=this.remapLanguage(t.substr(0,2));this.currentLocale.name=t,e&&(this.currentLocale.data=e,this.currentLocale.dataName=t,this.currentLanguage={},this.currentLanguage.name=n,this.languages[n]&&(this.currentLanguage=this.languages[n],this.updateLanguageTag(t)),this.translatedLocales.indexOf(t)>-1&&(this.languages[n].direction=e.direction,this.languages[n].messages=e.messages,this.languages[n].name=n,this.languages[n].nativeName=e.nativeName,this.languages[t]={direction:e.direction,messages:e.messages,name:t,nativeName:e.nativeName}))},formatDate:function(t,e){e||(e={date:"short"});var n=this.useLocale(e);if(t){if("0000"===t||"000000"===t||"00000000"===t)return"";if("string"==typeof t&&/T|Z/g.test(t)&&(t=this.newDateObj(t)),!(t instanceof Date)&&"string"==typeof t){var i=D.parseDate(t,e);isNaN(i)&&"datetime"===e.date&&"-"===t.substr(4,1)&&"-"===t.substr(7,1)&&(i=new Date(t.substr(0,4),t.substr(5,2)-1,t.substr(8,2),t.substr(11,2),t.substr(14,2),t.substr(17,2))),t=i}if(t instanceof Date||"number"!=typeof t||(t=new Date(t)),t){var a,s="",r=n.calendars?n.calendars[0]:null;e.pattern&&(a=e.pattern),e.date&&(a=r.dateFormat[e.date]),"string"==typeof e&&""!==e&&(a=e),a||(a=r.dateFormat.short);var o=t instanceof Array?t[0]:t.getFullYear(),l=t instanceof Array?t[1]:t.getMonth(),c=t instanceof Array?t[2]:t.getDate(),d=t.getDay?t.getDay():"",h=t instanceof Array?t[3]:t.getHours(),u=t instanceof Array?t[4]:t.getMinutes(),p=t instanceof Array?t[5]:t.getSeconds(),f=t instanceof Array?t[6]:t.getMilliseconds();if(r&&r.conversions)if(e.fromGregorian){var g=this.gregorianToUmalqura(t);c=g[2],l=g[1],o=g[0]}else if(e.toGregorian){var m=this.umalquraToGregorian(o,l,c);c=m.getDate(),l=m.getMonth(),o=m.getFullYear()}var v=(s=(s=(s=(s=(s=(a=(a=(a=(a=a.replace("de","nnnnn")).replace("ngÃ y","nnnn")).replace("thÃ¡ng","t1Ã¡ng")).replace("den","nnn")).replace("dd",this.pad(c,2))).replace("d",c)).replace("yyyy",o)).replace("yy",o.toString().substr(2))).replace("y",o)).indexOf(" a")>-1||0===s.indexOf("a");if(v&&0===h&&(s=(s=s.replace("hh",12)).replace("h",12)),s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace("hh",this.pad(h>12?h-12:h,2))).replace("h",h>12?h-12:h)).replace("HH",this.pad(h,2))).replace("H",h)).replace("mm",this.pad(u,2))).replace("ss",this.pad(p,2))).replace("SSS",this.pad(f,3))).replace("MMMM",r?r.months.wide[l]:null)).replace("MMM",r?r.months.abbreviated[l]:null),-1===a.indexOf("MMM")&&(s=(s=s.replace("MM",this.pad(l+1,2))).replace("M",l+1)),v&&r&&(0===(s=s.replace(" a"," ".concat(h>=12?r.dayPeriods[1]:r.dayPeriods[0]))).indexOf("a")&&(s=s.replace("a"," ".concat(h>=12?r.dayPeriods[1]:r.dayPeriods[0]))),s=s.replace("EEEE",r.days.wide[d])),r&&(s=s.replace("EEEE",r.days.wide[d])),r&&(s=s.replace("EEE",r.days.abbreviated[d])),r&&(s=s.replace("EE",r.days.narrow[d])),(s=(s=(s=(s=s.replace("nnnnn","de")).replace("nnnn","ngÃ y")).replace("t1Ã¡ng","thÃ¡ng")).replace("nnn","den")).indexOf("zz")>-1){var b=new Date,y=this.getTimeZone(b,"short"),w=this.getTimeZone(b,"long");s=(s=s.replace("zzzz",w)).replace("zz",y)}return s.trim()}}},newDateObj:function(t){var e=new Date(t);if("safari"===u.browser.name&&"string"==typeof t&&/T|Z/g.test(t)){var n=t.replace(/Z/,"").replace(/T|:/g,"-").split("-");n=n.map((function(t,e){return+(1===e?t-1:t)})),e=s(Date,r(n))}return e},formatHour:function(t,e){var i=this.calendar().dateFormat.timeSeparator,a=this.currentLocale.name;"object"===n(e)&&(a=e.locale||a,i=e.timeSeparator||this.calendar(a).dateFormat.timeSeparator),"string"==typeof t&&-1===t.indexOf(i)&&(i=":");var s=new Date;if("number"==typeof t){var r=t.toString().split(".");s.setHours(r[0]),s.setMinutes(r[1]?60*parseFloat("0.".concat(r[1])):0)}else{var o=t.split(i);s.setHours(o[0]),s.setMinutes(o[1]||0)}return this.formatDate(s,{date:"hour"})},formatHourRange:function(t,e,i){var a=this.currentLocale.name,s=this.calendar(a).dayPeriods,r=!1;"object"===n(i)&&(s=this.calendar(a=i.locale||a).dayPeriods);var o="".concat(D.formatHour(t,i)," - ").concat(D.formatHour(e,i));return(o.indexOf(":00 AM -")>-1||o.indexOf(":00 PM -")>-1)&&(r=!0),k.count(o,s[0])>1&&(o=o.replace(s[0],"")),k.count(o,s[1])>1&&(o=o.replace(" ".concat(s[1]),"")),o=o.replace("  "," "),r&&(o=o.replace(":00 -"," -")),o},getTimeZone:function(t,e){var n=D.currentLocale.name||"en-US";return"ie"===u.browser.name&&"11"===u.browser.version?t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join(""):t.toLocaleTimeString(n,"long"===e?{timeZoneName:"long"}:{timeZoneName:"short"}).replace(/[0-9:AMP]/g,"").split(" ").join(" ").trimLeft()},dateToTimeZone:function(t,e,n){return"ie"===u.browser.name&&"11"===u.browser.version?"".concat(t.toLocaleString(D.currentLocale.name)," ").concat(t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):t.toLocaleString(D.currentLocale.name,{timeZone:e,timeZoneName:n})},dateToUTC:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},toLocaleString:function(t,e,i,a){if("number"!=typeof t)return"";var s={locale:e||D.currentLocale.name,options:i||void 0},r=t.toLocaleString(s.locale,s.options);if(!/undefined|null/.test(n(a))){var o=this.getSeparator(s.locale,"group");r=r.replace(new RegExp(o,"g"),a.toString())}return r},getSeparator:function(t,e){return Intl.NumberFormat(t).formatToParts(1000.1).find((function(t){return t.type===e})).value},convertNumberToEnglish:function(t){for(var e=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],n=["à¥¦","à¥§","à¥¨","à¥©","à¥ª","à¥«","à¥¬","à¥­","à¥®","à¥¯"],i=["é¶","å£¹","è²³","å","è","ä¼","é¸","æ","æ","ç"],a=["é¶","å£¹","è´°","å","è","ä¼","é","æ","æ","ç"],s=["ã","ä¸","äº","ä¸","å","äº","å­","ä¸","å«","ä¹"],r=0;r<=9;r++)t=(t=(t=(t=(t=(t=(t=t.replace(e[r],r)).replace("Ù¬","")).replace(",","")).replace(n[r],r)).replace(i[r],r)).replace(a[r],r)).replace(s[r],r),0===r&&(t=t.replace("é¶",r));return parseFloat(t)},isValidDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},parseDate:function(t,e,i){if(t){var a=e,s=this.currentLocale.name,r=this.calendar();"object"===n(e)&&(s=e.locale||s,a=e.dateFormat||this.calendar(s).dateFormat[a.date]),"object"===n(e)&&e.pattern&&(a=e.dateFormat||e.pattern),"object"===n(e)&&e.calendarName&&e.locale&&(r=this.calendar(e.locale,e.calendarName)),a||(a=this.calendar(s).dateFormat.short);var o=t;if("0000"!==t&&"000000"!==t&&"00000000"!==t){var l,c;a.pattern&&(a=a.pattern);var d,h,u={},p=a.toLowerCase().indexOf("h")>-1,f=t.toLowerCase().indexOf("z")>-1,g=3===(a.match(/M/g)||[]).length&&r&&r.months&&r.months.abbreviated&&r.months.abbreviated.filter((function(t){return/\./.test(t)})).length;if(p){var m=D.getTimeZone(new Date,"short"),v=D.getTimeZone(new Date,"long");t=(t=t.replace(" ".concat(m),"")).replace(" ".concat(v),"");var b=g?/[T\s:-]/g:/[T\s:.-]/g;a=(a=a.replace(" zzzz","").replace(" zz","")).replace(b,"/").replace(/z/i,""),t=t.replace(b,"/").replace(/z/i,"")}if(a=a.replace(" de "," "),t=t.replace(" de "," "),a=a.replace("/ah/","/a/h/"),t=t.replace("å","å/"),a=a.replace(",",""),t=t.replace(",",""),"Mdyyyy"!==a&&"dMyyyy"!==a||(t="".concat(t.substr(0,t.length-4),"/").concat(t.substr(t.length-4,t.length)),t="".concat(t.substr(0,t.indexOf("/")/2),"/").concat(t.substr(t.indexOf("/")/2))),"Mdyyyy"===a&&(a="M/d/yyyy"),"dMyyyy"===a&&(a="d/M/yyyy"),-1!==a.indexOf(" ")){var y=g?/[\s:]/g:/[\s:.]/g;a=a.replace(y,"/"),t=t.replace(y,"/")}if(a.indexOf("MMMM")>-1&&D.isRTL()&&a){var w=t.lastIndexOf("/");t=t.substr(0,w-1).replace("/"," ")+t.substr(w)}if(-1===a.indexOf(" ")&&-1===a.indexOf(".")&&-1===a.indexOf("/")&&-1===a.indexOf("-")){-1!==t.indexOf(" ")?t=t.split(" ").join(""):-1!==t.indexOf(".")?t=t.split(".").join(""):-1!==t.indexOf("/")?t=t.split("/").join(""):-1!==t.indexOf("-")&&(t=t.split("-").join(""));var x=a[0],C="",k="";for(d=0,h=a.length;d<h;d++)k+=a[d]!==x?"/".concat(t[d]):t[d],C+=a[d]!==x?"/".concat(a[d]):a[d],d>1&&(x=a[d]);t=k,a=C}l=a.split("/"),c=t.split("/"),1===l.length&&(l=a.split(".")),1===c.length&&(c=t.split(".")),1===l.length&&(l=a.split("-")),1===c.length&&(c=t.split("-")),1===l.length&&(l=a.split(" ")),1===c.length&&(c=t.split(" "));var T=this.getDatePart(l,c,"M","MM","MMM","MMMM"),S=this.getDatePart(l,c,"yy","yyyy"),A=!1,E=!1;for(d=0,h=c.length;d<h;d++){var I="".concat(l[d]),M=c[d],L=parseInt(M,10);A||(A=I.toLowerCase().indexOf("d")>-1);var P=void 0,N=void 0,_=void 0;switch(I){case"d":if(P=new Date(S,T,0).getDate(),L<1||L>31||L>P)return;u.day=M;break;case"dd":if(L<1||L>31||L<10&&"0"!==M.substr(0,1))return;u.day=M;break;case"M":if(L<1||L>12)return;u.month=M-1;break;case"MM":if(L<1||L>12||L<10&&"0"!==M.substr(0,1))return;u.month=M-1;break;case"MMM":N=this.calendar(s).months.abbreviated;for(var R=0;R<N.length;R++)o.indexOf(N[R])>-1&&(u.month=R);break;case"MMMM":_=this.calendar(s).months.wide;for(var B=0;B<_.length;B++)o.indexOf(_[B])>-1&&(u.month=B);break;case"yy":u.year=this.twoToFourDigitYear(M);break;case"yyyy":u.year=2===M.length?this.twoToFourDigitYear(M):M;break;case"h":if(L<0||L>12)return;u.h=E?u.h:M;break;case"hh":if(L<0||L>12)return;u.h=E?u.h:1===M.length?"0".concat(M):M;break;case"H":if(L<0||L>24)return;u.h=E?u.h:M;break;case"HH":if(L<0||L>24)return;u.h=E?u.h:1===M.length?"0".concat(M):M;break;case"ss":if(L<0||L>60){u.ss=0;break}u.ss=M;break;case"SSS":u.ms=M;break;case"mm":if(L<0||L>60){u.mm=0;break}u.mm=M;break;case"a":M.toLowerCase()!==r.dayPeriods[0]&&M.toUpperCase()!==r.dayPeriods[0]||(u.a="AM",u.h||"h"!==l[d+1].toLowerCase().substr(0,1)||(u.h=c[d+1],E=!0),u.h&&(12!==u.h&&"12"!==u.h||(u.h=0))),M.toLowerCase()!==r.dayPeriods[1]&&M.toUpperCase()!==r.dayPeriods[1]||(u.a="PM",u.h&&u.h<12&&(u.h=parseInt(u.h,10)+12))}}var O=function(t){return t%4==0&&t%100!=0||t%400==0};if(u.return=void 0,u.leapYear=O(u.year),!p||u.h||u.mm){if(!u.year&&0!==u.year&&!i){for(u.isUndefindedYear=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("y")>-1&&void 0!==c[d]){u.isUndefindedYear=!1;break}if(u.isUndefindedYear){var F=29===parseInt(u.day,10)&&1===parseInt(u.month,10);u.year=F?function(t){for(var e=(new Date).getFullYear(),n=0;n<4&&!O(e);n++)e--;return e}():(new Date).getFullYear()}else delete u.year}if(u.year&&2===u.year.length&&(u.year="20".concat(u.year)),u.year=$.trim(u.year),u.day=$.trim(u.day),(""===u.year||u.year&&2!=="".concat(u.year).length&&4!=="".concat(u.year).length)&&delete u.year,!u.month&&0!==u.month&&!i){for(u.isUndefindedMonth=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("M")>-1&&void 0!==c[d]){u.isUndefindedMonth=!1;break}u.isUndefindedMonth&&(u.month=(new Date).getMonth())}if(!(u.day||0===u.day||i&&A)){for(u.isUndefindedDay=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("d")>-1&&void 0!==c[d]){u.isUndefindedDay=!1;break}u.isUndefindedDay?u.day=1:delete u.day}return p?f?(void 0!==u.h&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm))),void 0!==u.ss&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss))),void 0!==u.ms&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms)))):(void 0!==u.h&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm)),void 0!==u.ss&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss)),void 0!==u.ms&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms))):u.return=new Date(u.year,u.month,u.day),"islamic-umalqura"===r.name?[parseInt(u.year,10),parseInt(u.month,10),parseInt(u.day,10),parseInt(u.h||0,10),parseInt(u.ss||0,10),parseInt(u.ms||0,10)]:this.isValidDate(u.return)?u.return:void 0}}}},twoToFourDigitYear:function(t){return parseInt((t>39?"19":"20")+t,10)},getDatePart:function(t,e,n,i,a,s){var r=0;return $.each(e,(function(o){n!==t[o]&&i!==t[o]&&a!==t[o]&&s!==t[o]||(r=e[o])})),r},useLocale:function(t){var e=this.currentLocale.data;if(t&&t.locale&&this.cultures[t.locale]&&(e=this.cultures[t.locale]),t&&t.language&&this.languages[t.language]){var n=b.extend(!0,{},this.currentLocale.data);if(n.calendars)return n.calendars[0]=this.calendar(t.locale||this.currentLocale.name,t.language),n}return e.numbers||(e.numbers=this.numbers()),e},useLanguage:function(t){var e=this.currentLanguage;if(t&&t.locale){var n=t.locale.split("-")[0];e=this.languages[n]}return t&&t.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(e=this.languages[this.currentLanguage.name]),t&&t.language&&this.languages[t.language]&&(e=this.languages[t.language]),e},formatNumber:function(t,e){var n,i,a,s=this.useLocale(e),r=e&&e.decimal?e.decimal:s.numbers.decimal,o=e&&void 0!==e.minimumFractionDigits?e.minimumFractionDigits:e&&e.style&&"currency"===e.style?2:e&&e.style&&"percent"===e.style?0:2,l=e&&void 0!==e.maximumFractionDigits?e.maximumFractionDigits:e&&e.style&&("currency"===e.style||"percent"===e.style)?2:e&&e.minimumFractionDigits?e.minimumFractionDigits:3;if(null!=t&&""!==t){if(e&&"integer"===e.style&&(l=0,o=0),e&&"currency"===e.style){var c=e&&e.currencyFormat?e.currencyFormat:s.currencyFormat;c||(c="Â¤#,##0.00"),i=c.replace("Â¤",e&&e.currencySign?e.currencySign:s.currencySign)}e&&"percent"===e.style&&(a=(a=s.numbers?s.numbers.percentFormat:"### %").replace("Â¤",s.numbers?s.numbers.percentSign:"%")),"string"==typeof t&&(t=D.parseNumber(t)),t.toString().indexOf("e")>-1&&(t=t.toFixed(l+1)),e&&"percent"===e.style&&(t=(100*t).toFixed(o));var d=this.truncateDecimals(t,o,l,e&&e.round).split("."),h=[3,3];s&&s.numbers&&s.numbers.groupSizes&&(h=s.numbers.groupSizes),e&&e.groupSizes&&(h=e.groupSizes);var u=this.expandNumber(d[0],h,e&&void 0!==e.group?e.group:s.numbers.group);d[0]=u,n=d.join(r);var p=s&&s.numbers&&s.numbers.minusSign?s.numbers.minusSign:"-",f=n.indexOf(p)>-1;n=n.replace(p,"");var g=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},m="";return 0===o&&(m=new RegExp("(".concat(g(r),"[0-9]*?)0+$")),n=n.replace(m,"$1")),o>0&&(m=new RegExp("(".concat(g(r),".{").concat(o,"}[0-9]*?)0+$")),n=n.replace(m,"$1")),m=new RegExp("".concat(g(r),"$")),n=n.replace(m,""),e&&"currency"===e.style&&(n=i.replace("###",n)),e&&"percent"===e.style&&(n=a.replace("###",n)),f&&(n=p+n),n}},expandNumber:function(t,e,n){var i=t.length,a=!1;if("-"===t.substr(0,1)&&(i=(t=t.substr(1)).length,a=!0),i<=3)return(a?"-":"")+t;if(0===e[0])return(a?"-":"")+t;var s=t.substr(t.length-e[0]),r=t.substr(0,t.length-e[0]);if(0===e[1])return(a?"-":"")+r+(""===r?"":n)+s;var o=r.split("").reverse().join(""),l=new RegExp(".{1,".concat(e[1],"}"),"g");return(a?"-":"")+o.match(l).join(n).split("").reverse().join("")+n+s},truncateDecimals:function(t,e,n,i){var a=t;a=i?T.round(t,n):T.truncate(t,n);var s=T.decimalPlaces(a);return s<e&&(a=a.toString()+new Array(e-s+1).join("0")),a.toString()},parseNumber:function(t,e){var n,i=this.useLocale(e),a=i.numbers;if(!(n=t))return NaN;"number"==typeof t&&(n=n.toString());var s=a?a.group:",",r=a?a.decimal:".",o=a?a.percentSign:"%",l=i.currencySign||"$",c=" "===s?new RegExp(/\s/g):new RegExp("\\".concat(s),"g");return(n=(n=(n=(n=(n=(n=n.replace(c,"")).replace(r,".")).replace(o,"")).replace(l,"")).replace("$","")).replace(" ","")).length>=19?n:parseFloat(n)},translate:function(t,e){var i=this.useLanguage(e),a=!1,s=!0;return"&nsbp;"===t?"":("boolean"==typeof e&&(a=e),"object"===n(e)&&void 0!==e.showAsUndefined&&(a=e.showAsUndefined),"object"===n(e)&&void 0!==e.showBrackets&&(s=e.showBrackets),void 0===i||void 0===i.messages?a?void 0:"".concat(s?"[":"").concat(t).concat(s?"]":""):void 0===i.messages[t]?this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[t]?this.languages.en.messages[t].value:a?void 0:"".concat(s?"[":"").concat(t).concat(s?"]":""):i.messages[t].value)},extendTranslations:function(t,e){this.languages[t]&&(this.languages[t].messages=$.extend(!1,this.languages[t].messages,e))},calendar:function(t,e,n){var i=[];if(this.currentLocale.data.calendars&&!t&&(i=this.currentLocale.data.calendars),e&&e.length>2&&(e=e.substr(0,2)),t&&this.cultures[t]&&(i=this.cultures[t].calendars),n&&i)for(var a=0;a<i.length;a++){var s=i[a];if(s.name===n)return s}if(!i[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var r=b.extend({},i[0]);if(e&&t.substr(0,2)!==e){var o=this.defaultLocales.filter((function(t){return t.lang===e}));if(o[0]){var l=this.cultures[o[0].default];r.days=l.calendars[0].days,r.months=l.calendars[0].months,r.dayPeriods=l.calendars[0].dayPeriods}}return r},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},toUpperCase:function(t){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(t):t.toLocaleUpperCase()},toLowerCase:function(t){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(t):t.toString().toLocaleLowerCase()},capitalize:function(t){return this.toUpperCase(t.charAt(0))+t.slice(1)},capitalizeWords:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)e[n]=this.capitalize(e[n]);return e.join(" ")},gregorianToUmalqura:function(t){if("function"!=typeof t.getMonth)return null;var e=function(t){for(var e=t-24e5+.5,n=0,i=0;i<S.length&&!(S[i]>e);i++)n++;var a=n+15292,s=Math.floor((a-1)/12);return{year:s+1,month:a-12*s-1,day:e-S[n-1]+1}}(function(t,e,n){t<0&&t++,e<3&&(e+=12,t--);var i=Math.floor(t/100),a=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+n+a-1524.5}(t.getFullYear(),t.getMonth()+1,t.getDate()));return[e.year,e.month,e.day,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]},umalquraToGregorian:function(t,e,n){var i=function(t){return"number"==typeof t&&!isNaN(t)};if(!i(t)||!i(e)||!i(n))return null;var a=function(t){var e=Math.floor(t+.5),n=Math.floor((e-1867216.25)/36524.25),i=1524+(n=e+1+n-Math.floor(n/4)),a=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*a),r=Math.floor((i-s)/30.6001),o=r-(r>13.5?13:1),l=a-(o>2.5?4716:4715);return l<=0&&l--,{year:l,month:o-1,day:i-s-Math.floor(30.6001*r)}}(n+S[12*(t-1)+(e+1)-15292-1]-1+24e5-.5);return new Date(a.year,a.month,a.day,0,0,0,0)},flipIconsHorizontally:function(){var t=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each((function(){var e=$(this).getIconName();e&&-1!==$.inArray(e,t)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")}))}};function I(t){if("function"!=typeof t){if("string"==typeof t)return t;throw new Error("".concat(n(t)," was provided where a function was expected."))}if("string"==typeof t.name)return"".concat(t.name,"()");var e=/^function\s+([\w$]+)\s*\(/.exec(t.toString());return e?"".concat(e[1],"()"):"(anonymous function)"}function M(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===("undefined"==typeof console?"undefined":n(console))){var a=I(t),s=I(e);i.length&&(i=" (".concat(i,")")),console.warn("IDS Enterprise".concat(i,': "').concat(s,'" is deprecated. Please use "').concat(a,'" instead.'))}}function L(t){"object"===("undefined"==typeof console?"undefined":n(console))&&console.warn('IDS Enterprise: "'.concat(t,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function P(t,e){var n=function(){M(t,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.apply(this,i)};return n.prototype=t.prototype,n}function N(t){return this.element=$(t),this}N.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return M("url","getCurrentURL"),this.url},getBaseURL:function(t){return this.element.length&&this.href&&"/"!==this.href?t?0===t.indexOf("/")?t:(t=(-1===t.indexOf("#")?"#":"")+t,this.url+t):this.url:t||""}};var _=new N($("base[href]"));$.getBaseURL=function(t){return _.getBaseURL(t)};var R={noAutoStart:!1},B={};function O(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function F(t){if(this.id=t.id,this.duration=t.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=t.updateDuration||1,this.setFuncs(t),this.paused=!1,this.elapsedTime=0,this.startTime=O(),this}function z(t){return this.items=[],this.element=$("body"),this.settings=b.mergeSettings(null,t,R),!0!==this.settings.noAutoStart&&this.start(),this}"object"===n(window.SohoConfig)&&"object"===n(window.SohoConfig.renderLoop)&&(B=b.extend({},R,window.SohoConfig.renderLoop)),F.prototype={setFuncs:function(t){if("function"!=typeof t.updateCallback&&"function"!=typeof t.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof t.updateCallback&&(this.updateCallback=t.updateCallback),"function"==typeof t.timeoutCallback&&(this.timeoutCallback=t.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(t){t&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},z.prototype={start:function(){this.doLoop=!0,this.startTime=O();var t,e,n=this,i=O();!function a(){n.doLoop&&(t=O(),e=(t-i)/1e3,n.items.forEach((function(a){if(a.doRemoveOnNextTick)n.remove(a);else if(a.paused||a.elapsedTime++,"number"==typeof a.duration&&a.duration>-1&&(a.startTime||(a.startTime=t),a.elapsedTime>=a.duration))a.destroy();else if("function"==typeof a.updateCallback){if(a.updateDuration&&a.updateDuration>1&&(isNaN(a.timeUntilNextUpdate)&&(a.timeUntilNextUpdate=a.updateDuration),a.timeUntilNextUpdate>0))return void--a.timeUntilNextUpdate;a.updateCallback.apply(null,[a,{last:i,delta:e,now:t}])}})),i=t,requestAnimationFrame(a))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return O()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(t,e,n,i){var a="string"!=typeof i||!i.length;if("string"==typeof n)if(a)i=n,n=-1,a=!1;else{var s=Number(n);isNaN(s)||(n=s)}else"number"!=typeof n&&(n=-1);return"string"==typeof i&&i.length||(i=""),new F({id:i,updateCallback:t,timeoutCallback:e,duration:n})},register:function(t,e,n,i){return t instanceof F||(t=this.buildRenderLoopItem(t,e,n,i)),this.items.push(t),t},unregister:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof t&&(e=t,t=void 0),this.remove({cb:t,id:e})},getFromQueue:function(t,e){var n;return"string"==typeof callback&&(e=t,t=void 0),"function"==typeof callback?this.items.forEach((function(e){return"".concat(e.updateCallback)!=="".concat(t)||(n=e,!1)})):"string"==typeof e&&this.items.forEach((function(t){return t.id!==e||(n=t,!1)})),n},remove:function(t){var e;return t instanceof F?(e=t,this.items=this.items.filter((function(e){return e!==t}))):"function"==typeof t.updateCallback?this.items=this.items.filter((function(n){return"".concat(n.updateCallback)!=="".concat(t.updateCallback)||(e=n,!1)})):"string"==typeof t.id&&(this.items=this.items.filter((function(n){return n.id!==t.id||(e=n,!1)}))),"function"!=typeof e.timeoutCallback||e.noTimeout||e.timeoutCallback.apply(null,e),this.element.triggerHandler("remove.renderLoop",[e]),e},pause:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(t,e);return n.pause(),n},resume:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(t,e);return n.resume(),n}};var H=new z(B);function q(){this.pressedKeys=new Map,this.init()}q.prototype={init:function(){var t=this;$(document).on("keydown.".concat("keyboard"),(function(e){t.press(e.key),t.announceKeys()})).on("keyup.".concat("keyboard"),(function(e){t.unpress(e.key),t.announceKeys()}))},announceKeys:function(){var t=[];this.pressedKeys.forEach((function(e,n){t.push(n)})),$("body").triggerHandler("keys",[t])},press:function(t){return this.pressedKeys.set("".concat(t),!0)},unpress:function(t){return this.pressedKeys.delete("".concat(t))},isPressed:function(t){return this.pressedKeys.has("".concat(t))}};var V=new q,j={hexToRgba:function(t,e){var n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3===(n=t.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x".concat(n.join("")),"rgba(".concat([n>>16&255,n>>8&255,255&n].join(","),",").concat(e.toString(),")")):""},getLuminousColorShade:function(t,e){t=this.validateHex(t).substr(1),e=e||0;var n,i,a="#";for(i=0;i<3;i++)n=parseInt(t.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),a+="00".concat(n).substr(n.length);return a},validateHex:function(t){return(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#".concat(t)},getContrastColor:function(t,e,n){t=t?t.replace("#",""):"";var i=function(e){return parseInt(t.substr(e,2),16)};return(299*i(0)+587*i(2)+114*i(4))/1e3>=128?n||"black":e||"white"}},W={currentTheme:{id:"theme-soho-light",name:D.translate("SohoLightTheme"),legacyId:"light"},allColors:[{id:"theme-soho-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"light"},{id:"theme-soho-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"dark"},{id:"theme-soho-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#133c59",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#134d71"},alt:{name:"theme-color-brand-primary-alt",value:"#133c59"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"high-contrast"},{id:"theme-uplift-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0066D4",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0072ED",paletteName:"{theme.color.brand.primary.base.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#003876",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#004A99"},alt:{name:"theme-color-brand-primary-alt",value:"#003876"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#47474C"},base:{name:"theme-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"theme-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}}],themes:function(){return[{id:"theme-soho-light",name:D.translate("SohoLightTheme"),themeId:"theme-soho",variantId:"light",variantName:D.translate("Light"),legacyId:"light"},{id:"theme-soho-dark",name:D.translate("SohoDarkTheme"),themeId:"theme-soho",variantId:"dark",variantName:D.translate("Dark"),legacyId:"dark"},{id:"theme-soho-contrast",name:D.translate("SohoHighContrastTheme"),themeId:"theme-soho",variantId:"contrast",variantName:D.translate("Contrast"),legacyId:"high-contrast"},{id:"theme-uplift-light",name:D.translate("UpliftLightTheme"),themeId:"theme-uplift",variantId:"light",variantName:D.translate("Light")},{id:"theme-uplift-dark",name:D.translate("UpliftDarkTheme"),themeId:"theme-uplift",variantId:"dark",variantName:D.translate("Dark")},{id:"theme-uplift-contrast",name:D.translate("UpliftHighContrastTheme"),themeId:"theme-uplift",variantId:"contrast",variantName:D.translate("Contrast")}]},themeColors:function(){var t=this,e=this.allColors.filter((function(e){return e.id===t.currentTheme.id}));return e[0]?e[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var t=this.themeColors().palette,e=this.themeColors().brand,n={},i={showBrackets:!1};return n.default={id:"default",name:D.translate("Default",i),backgroundColorClass:"primary-bg-color",value:e.primary.base.value},n.amber={id:"amber",name:D.translate("Amber",i),backgroundColorClass:"amber09",value:t.amber[90].value},n.amethyst={id:"amethyst",name:D.translate("Amethyst",i),backgroundColorClass:"amethyst06",value:t.amethyst[60].value},n.azure={id:"azure",name:D.translate("Azure",i),backgroundColorClass:"azure07",value:t.azure[70].value},n.emerald={id:"emerald",name:D.translate("Emerald",i),backgroundColorClass:"emerald08",value:t.emerald[80].value},n.graphite={id:"graphite",name:D.translate("Graphite",i),backgroundColorClass:"graphite06",value:t.graphite[60].value},n.ruby={id:"ruby",name:D.translate("Ruby",i),backgroundColorClass:"ruby09",value:t.ruby[90].value},n.slate={id:"slate",name:D.translate("Slate",i),backgroundColorClass:"slate06",value:t.slate[60].value},n.turquoise={id:"turquoise",name:D.translate("Turquoise",i),backgroundColorClass:"turquoise09",value:t.turquoise[90].value},n},setTheme:function(t){var e=this.themes().filter((function(e){return e.id===t||e.legacyId&&e.legacyId===t}));return 0===e.length?"":(this.currentTheme=e[0],e)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1}},U={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function G(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,U),this.init()}G.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.setTheme(this.settings.theme?this.settings.theme:this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var t=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),(function(){t.updated()})),this},appendStyleSheet:function(t){var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),(e=document.createElement("style")).setAttribute("id","soho-personalization"),e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},getColorStyleSheet:function(t){if(t||(t={}),"string"==typeof t&&(t={header:t}),!t||""===t)return this;var e={header:"2578A9"},n={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","368AC0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},i=!1,a="".concat(t.header||e.header).toLowerCase();a=j.validateHex(a),Object.keys(n).forEach((function(t){i=i||n[t].indexOf(a)>-1})),a=i?"white":null;var s=j.validateHex(t.lightest||j.getLuminousColorShade(t.header||e.header,.3));"white"===j.getContrastColor(s,null,a)?(e.text="ffffff",e.subtext="f0f0f0"):(e.text="000000",e.subtext="292929"),t.header=j.validateHex(t.header||e.header),t.text=j.validateHex(t.text||e.text),t.subtext=j.validateHex(t.subtext||e.subtext),t.btnColorHeader=j.validateHex(t.btnColorHeader||j.getLuminousColorShade(t.header,.3)),t.subheader=j.validateHex(t.subheader||j.getLuminousColorShade(t.header,.2)),t.verticalBorder=j.validateHex(t.verticalBorder||j.getLuminousColorShade(t.header,.1)),t.btnColorSubheader=j.validateHex(t.btnColorSubheader||j.getLuminousColorShade(t.header,-.1)),t.inactive=j.validateHex(t.inactive||j.getLuminousColorShade(t.header,-.2)),t.horizontalBorder=j.validateHex(t.horizontalBorder||j.getLuminousColorShade(t.header,-.3)),t.hover=j.validateHex(t.hover||j.getLuminousColorShade(t.header,-.5)),t.button=j.validateHex(t.button||j.getLuminousColorShade(t.text,-.8)),t.lightest=t.btnColorHeader,t.lighter=t.subheader,t.light=t.verticalBorder,t.base=t.header,t.contrast=t.text,t.dark=t.btnColorSubheader,t.darker=t.inactive,t.darkest=t.horizontalBorder;var r=j.getContrastColor(t.darkest);return e.tooltipText="white"===r?"ffffff":"000000",t.tooltipText=j.validateHex(t.tooltipText||e.tooltipText),function(t){return"\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ".concat(t.darkest," !important;\n  border-bottom: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(t.lighter," !important;\n  color: ").concat(t.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(t.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(t.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable h1 {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable .header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable button:not(:disabled):hover,\n.header.is-personalizable button:not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class*='btn']:hover:not([disabled]) {\n  color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.lightest,";\n  border-color:").concat(t.lightest,";\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(t.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(t.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-uplift-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-uplift-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ').concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(t.contrast," !important;\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.dark,";\n  border-color: ").concat(t.dark,";\n  color: ").concat(t.contrast,";\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(t.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent !important;\n  color: ').concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(t.darker," !important;\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(t.base," , ").concat(j.hexToRgba(t.base,0),") !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(j.hexToRgba(t.base,0),", ").concat(t.base,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(t.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(t.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable {\n  background-color: ").concat(t.lighter,";\n  border-right: ").concat(t.light,";\n}\n\n.application-menu.is-personalizable .application-menu-header {\n  background-color: ").concat(t.lighter,";\n  border-bottom-color: ").concat(t.light,";\n}\n\n.application-menu.is-personalizable .application-menu-footer {\n  background-color: ").concat(t.lighter,";\n  border-top-color: ").concat(t.light,";\n}\n\n.application-menu.is-personalizable button .icon,\n.application-menu.is-personalizable button span,\n.application-menu.is-personalizable .hyperlink {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable button:not(:disabled):hover .icon,\n.application-menu.is-personalizable button:not(:disabled):hover span,\n.application-menu.is-personalizable .hyperlink:hover {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .accordion.panel {\n  background-color: ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .name-xl,\n.application-menu.is-personalizable .name,\n.application-menu.is-personalizable .accordion-heading {\n  color: ").concat(t.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ").concat(t.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(t.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header:hover {\n  background-color: ").concat(t.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(t.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ").concat(t.contrast,";\n}\n\n.application-menu.is-personalizable button:focus:not(.hide-focus),\n.application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(t.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu .application-menu-header button:hover,\n.application-menu .application-menu-footer button:hover {\n  background-color: ").concat(t.base," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(t.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(t.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(t.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(t.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(t.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(t.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(t.lighter,";\n  border-left: ").concat(t.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(t.dark,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(t.dark," !important;\n  color: ").concat(t.subtext,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(t.darker," !important;\n  border-color: ").concat(t.darker,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(t.dark,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(t.darkest," !important;\n  background-color: ").concat(t.darkest," !important;\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(t.dark," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg {\n  color: ").concat(t.contrast,";\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(t.contrast,";\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(t.contrast,";\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(t.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(t.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(t.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(t.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(t.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(t.text,";\n  fill: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .axis path, .chart-container .axis line,\n.hero-widget.is-personalizable .hero-header .chart-container .axis .tick0 line {\n  stroke: ").concat(t.subtext," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n.header.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n.tooltip.is-personalizable {\n  background-color: ").concat(t.darkest,";\n  border-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(t.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(t.darkest,";\n}\n\n    ")}(t)},setFont:function(t){$("html").addClass("font-".concat(t))},setColors:function(t){return""===t?(this.setColorsToDefault(),this):t?(this.appendStyleSheet(this.getColorStyleSheet(t)),this.settings.colors=t,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||W.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-soho-light"}),this):this},setColorsToDefault:function(){this.settings.colors="";var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),this.element.triggerHandler("colorschanged",{colors:W.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-soho-light"})},getThemeFromStylesheet:function(){var t=$("#stylesheet, #sohoxi-stylesheet"),e="";if(t.length>0){var n=t.attr("href"),i=(e=n.substring(n.lastIndexOf("/")+1)).lastIndexOf("?");i>-1&&(e=e.slice(0,i)),e=e.replace(".min","").replace(".css","")}return e},setTheme:function(t){var e=$("html");if(t)if(this.currentTheme=t,W.currentTheme.id!==t){["light","dark","high-contrast"].indexOf(t)>-1&&(t+="-theme"),e.removeClass((function(t,e){return e.split(" ").filter((function(t){return t.indexOf("theme")>-1})).join()})).addClass(t),this.blockUi();var n=this,i=$("#stylesheet, #sohoxi-stylesheet"),a=$('<link rel="stylesheet">'),s=i.attr("href");a.on("load",(function(){i.remove(),n.unBlockUi(),n.triggerEvent(t)})).on("error",(function(){n.unBlockUi()}));var r=s?s.substring(0,s.lastIndexOf("/")):"",l=!!s&&s.indexOf(".min")>-1;a.attr({id:i.attr("id"),href:o.stripTags("".concat(r,"/").concat(t).concat(l?".min":"",".css"))}),i.removeAttr("id"),i.before(a),this.settings.theme=t,W.setTheme(t)}else e.hasClass(t)||e.addClass(t)},blockUi:function(){if(this.settings.blockUI){var t="#bdbdbd";switch(W){case"light":t="#f0f0f0";break;case"dark":t="#313236";break;case"high-contrast":t="#d8d8d8";break;default:t="#f0f0f0"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",t),$("body").append(this.pageOverlay)}},triggerEvent:function(t){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||W.themeColors().brand.primary.alt.value,theme:t||"theme-soho-light"}),$("body").trigger("resize")},unBlockUi:function(){var t=this;t.settings.blockUI&&t.pageOverlay&&t.pageOverlay.fadeOut(300,(function(){t.pageOverlay.remove(),t.pageOverlay=void 0}))},updated:function(t){if(!t)return this;var e=b.extend({},this.settings);return this.settings=b.mergeSettings(this.element[0],t,this.settings),this.settingsDidChange(e,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(e,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(e,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(t,e){return this.settings[e]&&this.settings[e]!==t[e]},teardown:function(){return this.element.off("updated.".concat("personalize")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"personalize")}};var Y={theme:"theme-soho-light"};"object"===n(window.SohoConfig)&&"object"===n(window.SohoConfig.personalize)&&(Y=window.SohoConfig.personalize);var K=new G(document.documentElement,Y);$.fn.personalize=function(t){return this.each((function(){var e=$.data(this,"personalize");e||(e=$.data(this,"personalize",K)),e.updated(t)}))},$.fn.disable=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.disable&&e.disable()})),this.prop("disabled",!0),this},$.fn.enable=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.enable&&e.enable()})),this.prop({disabled:!1,readonly:!1}),this},$.fn.readonly=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.readonly&&e.readonly()})),this.prop("readonly",!0),this},$((function(){var t,e;$(".label-text").closest("label, .label").each((function(){e=$("input, textarea, select",this),t=e.attr("class"),$(this).addClass((function(){return"inline".concat(t?" inline-".concat(-1===t.indexOf(" ")?t:t.substr(0,t.indexOf(" "))):"")}))}))})),$((function(){$("input:radio").on("click.radios",(function(){this.focus()}))})),$((function(){var t=function(t,e){for(var n=0,i=t.length;n<i;n++)$(t[n]).parent().addClass(e)};t($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),t($(".field > input:radio, .field > .inline-radio"),"field-radio")})),$((function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach((function(t){-1!==t.className.indexOf("accessible")&&(t.querySelector(".required-asterisk")||t.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))}));var t=[].slice.call(document.body.querySelectorAll("[data-validate]"));t.forEach((function(t){var e=t.getAttribute("data-validate");e&&e.indexOf("required")>-1&&t.setAttribute("aria-required",!0)})),(t=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach((function(t){var e=t.getAttribute("id");if(e){var n=document.body.querySelector('label[for="'.concat(e,'"]'));n&&n.setAttribute("aria-hidden",!0)}}))})),$.fn.highlight=function(t){return this.length&&t&&t.length?this.each((function(){!function t(e,n){var i,a,s,r,o=0;if(3===e.nodeType)i=e.data.toUpperCase().indexOf(n),(i-=e.data.substr(0,i).toUpperCase().length-e.data.substr(0,i).length)>=0&&((a=document.createElement("mark")).className="highlight",(s=e.splitText(i)).splitText(n.length),r=s.cloneNode(!0),a.appendChild(r),s.parentNode.replaceChild(a,s),o=1);else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=t(e.childNodes[l],n);return o}(this,t.toUpperCase())})):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each((function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()})).end()};var X={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder"};function Q(t,e){this.settings=b.mergeSettings(t,e,X),this.element=$(t),this.init()}Q.prototype={init:function(){this.isTouch=u.features.touch,this.isIe="ie"===u.browser.name,this.handleEvents()},getElementByTouchInList:function(t,e,n){for(var i=!1,a=$(t),s=0,r=a.length;s<r;s++){var o=$(a[s]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||n<=l.top||n>=l.top+o.outerHeight()||(i=o)}return i},dragTouchElement:function(t,e){var n=t.originalEvent.changedTouches[0];e[0].style.top="".concat(n.pageY-this.offset.y,"px"),e[0].style.left="".concat(n.pageX-this.offset.x,"px")},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,X)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function(t){var e=this.settings,n=null;if(e.isVisualItems){var i=this.element.children().not('[data-arrange-exclude="true"]');e.itemsSelector&&(i=$(e.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),n=i.index(t)}return n},handleEvents:function(){var t,e,n=this,i=this.settings,a={},s=this.element.children().not('[data-arrange-exclude="true"]'),r=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));i.itemsSelector&&(s=$(i.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),r=$("<".concat(s.first()[0].tagName," />"))),i.placeholder&&(r=$(i.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=i.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=r,this.isTouch||this.placeholders.addClass("".concat(i.placeholderCssClass," draggable")),$(this.handle,s).addClass("draggable").on("mousedown.arrange touchstart.arrange",(function(){e=!0})).on("mouseup.arrange touchend.arrange",(function(){e=!1})),this.connectWith&&(s=s.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=s,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,r]).not("a[href], img").on("selectstart.arrange",(function(){return this.dragDrop&&this.dragDrop(),this.isIe})).end().each((function(){$(this).on(n.dragStart,(function(s){if(n.handle&&!e){if(n.isTouch)return;return!1}e=!1,n.dragging=$(this),t=n.dragging.addClass("arrange-dragging").index();var r=i.isVisualItems?n.getVisualIndex(n.dragging):t;$.extend(a,{start:n.dragging,startIndex:r});var o=n.element.triggerHandler("beforearrange",a);if("boolean"==typeof o&&!o||"string"==typeof o&&"false"===o.toLowerCase())n.dragging=null;else if(n.isTouch){var l=n.dragging[0].getBoundingClientRect(),c=s.originalEvent.changedTouches[0];n.offset={x:c.pageX-l.left,y:c.pageY-l.top},n.placeholderTouch=n.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(n.dragging),n.dragTouchElement(s,n.placeholderTouch)}else{var d=s.originalEvent.dataTransfer;d.effectAllowed="move",d.setData("Text","dummy")}})).on(n.dragEnd,(function(){if(n.dragging){if(n.isTouch&&(n.dragging.css("opacity",1),n.placeholderTouch.remove()),n.placeholders.filter(":visible").after(n.dragging),n.dragging.removeClass("arrange-dragging").show(),n.placeholders.detach(),t!==n.dragging.index()){var e=i.isVisualItems?n.getVisualIndex(n.dragging):n.dragging.index();$.extend(a,{end:n.dragging,endIndex:e}),n.element.triggerHandler("arrangeupdate",a)}n.dragging=null,n.placeholderTouch=null}})).on(n.dragWhileDragging,(function(t){if(n.dragging){var e,o,l=this;if(t.preventDefault(),"drop"===t.type)return t.stopPropagation(),n.dragging.trigger("dragend.arrange"),!1;if(n.isTouch){var c=t.originalEvent.touches[0];l=n.getElementByTouchInList(s,c.pageX,c.pageY)||l}if(l=$(l),n.isTouch||(t.originalEvent.dataTransfer.dropEffect="move"),s.is(l)&&r.index()!==l.index()?(n.isTouch?n.dragging.css("opacity",0):n.dragging.hide(),r.index()<l.index()?(r.insertAfter(l),e=l.index(),o=i.isVisualItems?n.getVisualIndex(l):e):(r.insertBefore(l),e=r.index(),o=i.isVisualItems?n.getVisualIndex(r):e),$.extend(a,{over:l,overIndex:o}),n.element.triggerHandler("draggingarrange",a),b.fixSVGIcons(l),n.placeholders.not(r).detach()):n.placeholders.is(this)||(n.placeholders.detach(),n.element.append(r)),!n.isTouch)return!1;n.dragTouchElement(t,n.placeholderTouch)}}))}))}},$.fn.arrange=function(t){return this.each((function(){var e=$.data(this,"arrange");e?e.updated(t):e=$.data(this,"arrange",new Q(this,t))}))};var J={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function Z(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,J),this.init()}Z.prototype={init:function(){this.handleEvents()},finish:function(t,e){var n={top:e,left:t};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("dragend",n),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(t,e){var n={left:t,top:e};if("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.settings.containment&&(this.container=this.settings.containment instanceof jQuery?this.settings.containment:"parent"===this.settings.containment?this.element.parent():"window"===this.settings.containment?$(window):"container"===this.settings.containment?this.element.closest(".page-container"):$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),n.top>this.upperYLimit&&(n.top=this.upperYLimit),n.left>this.upperXLimit&&(n.left=this.upperXLimit),n.top<0&&(n.top=0),n.left<0&&(n.left=0),"container"===this.settings.containment&&n.left<=1&&(n.left=1)),this.settings.obstacle){var i=this.clone?this.clone.offset():this.element.offset(),a=this.clone?this.clone.outerWidth():this.element.outerWidth(),s=n.left>i.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var r=$(this.obstacle).offset();this.constraints={top:r.top,left:r.left,bottom:r.top+this.obstacle.outerHeight(),right:r.left+this.obstacle.outerWidth()}}!s&&this.originalPos.left>this.constraints.left&&n.left<=this.constraints.right&&(n.left=this.constraints.right),s&&this.originalPos.left+a<=this.constraints.left&&n.left+a>=this.constraints.left&&(n.left=this.constraints.left-this.obstacle.outerWidth())}var o=function(t,e,n){void 0!==e[n]&&(t[0].style[n]="".concat(e[n],"px"))};o(this.clone||this.element,n,"top"),o(this.clone||this.element,n,"left"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("drag",n)},getElementsFromPoint:function(t,e){var n=[];if(document.elementsFromPoint)n=document.elementsFromPoint(t,e);else if(document.msElementsFromPoint)n=document.msElementsFromPoint(t,e);else{for(var i,a,s,r,o=999,l=[];(r=document.elementFromPoint(t,e))&&-1===n.indexOf(r)&&null!==r&&o>-1;)o--,n.push(r),l.push({value:r.style.getPropertyValue("pointer-events")||"",priority:r.style.getPropertyPriority("pointer-events")}),r.style.setProperty("pointer-events","none","important");for(i=0,a=n.length;i<a;i++)n[i].style.setProperty("pointer-events",(s=l[i]).value,s.priority)}return n},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings))},destroy:function(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var t=this;t.offset=null,t.element.attr("draggable",!1),"onpointerdown"in window||"onmspointerdown"in window||t.element.on("touchstart.draggable gesturestart.draggable",(function(e){var n=$(this).position(),i=e.originalEvent;t.offset={x:i.changedTouches[0].pageX-n.left,y:i.changedTouches[0].pageY-n.top},t.originalPos=n,t.element.addClass("is-dragging"),n.offset=t.offset,n.clone=t.clone,t.element.trigger("dragstart",n)})).on("touchmove.draggable gesturechange.draggable",(function(e){e.preventDefault();var n=e.originalEvent;n.targetTouches.length>1||t.move(n.changedTouches[0].pageX-t.offset.x,n.changedTouches[0].pageY-t.offset.y)})).on("touchend.draggable gestureend.draggable touchcancel.draggable",(function(e){e.preventDefault();var n=e.originalEvent.changedTouches[0];t.finish(n.pageX-t.offset.x,n.pageY-t.offset.y)})),t.element.on("mousedown.draggable",(function(e){e.preventDefault();var n=t.settings.clonePosIsFixed?t.element[0].getBoundingClientRect():t.element.position();t.offset={x:e.pageX-n.left,y:e.pageY-n.top},t.originalPos=n,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",(function(e){e.preventDefault(),t.move(e.pageX-t.offset.x,e.pageY-t.offset.y)})),$(document).on("mouseup.draggable",(function(n){n.preventDefault(),t.finish(e.pageX-t.offset.x,n.pageY-t.offset.y)})),t.element.on("mouseup.draggable",(function(e){e.preventDefault(),t.finish(e.pageX-t.offset.x,e.pageY-t.offset.y)})),!t.clone&&t.settings.clone&&(t.clone=t.element.clone(!0),"parent"===t.settings.cloneAppendTo&&(t.settings.cloneAppendTo=t.element.parent()),t.clone.addClass(t.settings.cloneCssClass).appendTo(t.settings.cloneAppendTo||"body")),t.element.addClass("is-dragging"),t.element.trigger("dragstart",[n,t.clone])}))}},$.fn.drag=function(t){return this.each((function(){var e=$.data(this,"drag");e?e.updated(t):e=$.data(this,"drag",new Z(this,t))}))};var tt={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},et=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],nt=["top","left","right","bottom","center"],it=["left","center","right"],at=["top","center","bottom"],st=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function rt(t){var e=this;return st.forEach((function(n){if(null!==t[n])return"x"===n||"y"===n?(e.setCoordinate(n,t[n]),void(e["original".concat(n)]=t[n])):void(e[n]=t[n])})),this.modified=!1,this.sanitize()}function ot(t,e){this.settings=b.mergeSettings(t,e,tt),this.element=$(t),this.init()}rt.prototype={isReasonableDefault:function(t,e){return $.inArray(t,e)>-1},sanitize:function(){var t=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:tt.callback,this.container=this.container instanceof $&&this.container.length?this.container:tt.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:tt.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,it)?this.parentXAlignment:tt.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,at)?this.parentYAlignment:tt.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,nt)?this.placement:tt.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach((function(e,n){t.strategies[n]=t.isReasonableDefault(e,et)?e:t.strategies[n]}))},setCoordinate:function(t,e){this.isReasonableDefault(t,["x","y"])&&(isNaN(e)&&(e=0),this[t]=Math.round(e))}},ot.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var t=this.element[0].style.height,e=this.element[0].style.width;return t&&(this.originalStyles.height=t),e&&(this.originalStyles.width=e),this},handleEvents:function(){var t=this;return this.element.on("place.".concat("place"),(function(e,n,i){t.place(new rt({x:n,y:i}))})).on("updated.".concat("place"),(function(){t.updated()})),this},render:function(t){var e=/(px|%)/i;this.element.offset({left:t.x,top:t.y}),t.height&&(this.element[0].style.height=t.height+(e.test("".concat(t.height))?"":"px")),t.width&&(this.element[0].style.width=t.width+(e.test("".concat(t.width))?"":"px"))},place:function(t){var e=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[e])?(t instanceof rt||(t=new rt(t)),null==t.x&&null==t.y?e:(this.clearOldStyles(),t.parent?this.placeWithParent(t):this.placeWithCoords(t))):e},placeWithParent:function(t){if(!t.parent||!t.parent.length)return[void 0,void 0];var e,n=this,i=this.getContainer(t),a=i.length&&i[0]===document.body;u.rtl&&i.length&&(e=l.getDimensions(i[0]),this.element.css({left:"".concat(e.left,"px"),top:"".concat(e.right,"px")}));var s=l.getDimensions(t.parent[0]),r=l.getDimensions(this.element[0]),o=a?$(window).scrollLeft():i.scrollLeft(),c=a?$(window).scrollTop():i.scrollTop();function d(t){var e=function(t){var e,n,i=t.placement,l=t.parentXAlignment,d=t.parentYAlignment;switch(i){case"top":n=s.top-r.height-t.y+(a?c:0);break;case"left":e=s.left-r.width-t.x+(a?o:0);break;case"right":e=s.right+t.x+(a?o:0);break;default:n=s.bottom+t.y+(a?c:0)}if("top"===i||"bottom"===i){var h=Math.round(a?document.body.offsetWidth:null);switch(l){case"left":e=a&&h<Math.round(r.left)+Math.round(r.width)?s.left+t.x+o:s.left-t.x+(a?o:0);break;case"right":e=a&&Math.round(r.right)-Math.round(r.width)<0?s.left-t.x+o:s.right-r.width+t.x+(a?o:0);break;default:e=s.left+(s.width-r.width)/2+t.x+(a?o:0)}}if("right"===i||"left"===i)switch(d){case"top":n=s.top-t.y+(a?c:0);break;case"bottom":n=s.bottom-r.height+t.y+(a?c:0);break;default:n=s.top+(s.height-r.height)/2+t.y+(a?c:0)}return[e,n]}(t);return t.setCoordinate("x",e[0]),t.setCoordinate("y",e[1]),n.render(t),n.handlePlacementCallback(t)}return t.useParentWidth&&(t.width=s.width),t.useParentHeight&&(t.height=s.height),(t=d(t)).strategies.forEach((function(e){(t=n.checkBleeds(t)).bleeds&&(t=function(){switch(e){case"nudge":return n.nudge(t);case"clockwise":return n.clockwise(t);case"flip":return(t=n.flip(t)).setCoordinate("x",t.originalx),t.setCoordinate("y",t.originaly),t=d(t);case"shrink":return n.shrink(t);case"shrink-x":return n.shrink(t,"x");case"shrink-y":return n.shrink(t,"y");default:return t}}(),n.render(t))})),t.element=this.element,this.element.trigger("afterplace",[t]),t},placeWithCoords:function(t){return this.render(t),t=this.handlePlacementCallback(t),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.nudge(t)),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.shrink(t)),this.render(t),this.element.trigger("afterplace",[t]),t},handlePlacementCallback:function(t){var e=t.callback||this.settings.callback;return t.element=this.element,e&&"function"==typeof e&&(t=e(t)),this.render(t),t},accountForScrolling:function(t){var e=t.container,n=window.getComputedStyle(this.element[0]).position;if("fixed"===n)return!1;if(e&&e.length||(e=this.element.parents().filter((function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===n}))),!e||!e.length)return!0;if(e[0]===document.body)return!1;var i=window.getComputedStyle(e[0]);return"fixed"!==(n=i.position)&&("absolute"!==n||"hidden"!==i.overflow)},getContainer:function(t){if(t.container instanceof $&&t.container.length)return t.container;var e=this.element.parents(".modal");return e.length?e:$(document.body)},checkBleeds:function(t){var e=this.settings.bleedFromContainer,n=this.getContainer(t),i=n.length&&n[0]===document.body,a=this.element[0].getBoundingClientRect(),s={},r=n?n[0].getBoundingClientRect():{},o=i?$(window).scrollLeft():n.scrollLeft(),l=i?$(window).scrollTop():n.scrollTop(),c=Math.max(document.documentElement.clientHeight,window.innerHeight||0),d=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function h(t){switch(t){case"top":return(e?0:r.top)-(i?-1*l:0);case"left":return(e?0:r.left)-(i?-1*o:0);case"right":return(e?d:r.right)-(i?-1*o:0);default:return(e?c:r.bottom)-(i?-1*l:0)}}s.width=a.width,s.height=a.height,s.top=a.top,s.right=a.right,s.bottom=a.bottom,s.left=a.left;var u=h("right");if(s.width>=u){var p=s.width-(s.width-u+20);t.width=p,this.element[0].style.width="".concat(p,"px"),s.width=p}var f=h("bottom");if(s.height>=f){var g=s.height-(s.height-f+20);t.height=g,this.element[0].style.height="".concat(g,"px"),s.height=g}var m=s.right>h("right"),v=s.left<h("left"),b=s.top<h("top"),y=s.bottom>h("bottom");return m||v||b||y?(t.bleeds={},t.bleeds.right=m?s.right-h("right"):null,t.bleeds.left=v?-(s.left-h("left")):null,t.bleeds.top=b?-(s.top-h("top")):null,t.bleeds.bottom=y?s.bottom-h("bottom"):null,t):(t.bleeds=void 0,t)},nudge:function(t){t.nudges||(t.nudges={x:0,y:0});var e=0;return t.bleeds.right&&(e=Math.abs(t.bleeds.right)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x-e),t.nudges.x-=e),t.bleeds.left&&(e=Math.abs(t.bleeds.left)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x+e),t.nudges.x+=e),t.bleeds.top&&(e=Math.abs(t.bleeds.top)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y+e),t.nudges.y+=e),t.bleeds.bottom&&(e=Math.abs(t.bleeds.bottom)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y-e),t.nudges.y-=e),t.wasNudged=!0,t.bleeds=void 0,t},flip:function(t){if(!t.bleeds[t.placement])return t;if(t.attemptedFlips||(t.attemptedFlips=[]),t.attemptedFlips.push(t.placement),t.attemptedFlips.length>3)return t=this.giveup(t);var e=this.accountForScrolling(t),n=["left","right"].indexOf(t.placement)>-1,i=this.settings.bleedFromContainer,a=this.getContainer(t),s=a.length&&a[0]===document.body,r=a?a[0].getBoundingClientRect():{},o=t.parent[0].getBoundingClientRect(),l=s?$(window).scrollLeft():a.scrollLeft(),c=s?$(window).scrollTop():a.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function u(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function p(n){var a=0;switch(n){case"left":a=(i?0:r.left)-(e?l:0)-o.left+t.containerOffsetX;break;case"right":a=(i?h:r.right)-(e?l:0)-o.right-t.containerOffsetX;break;case"top":a=(i?0:r.top)-(e?c:0)-o.top+t.containerOffsetY;break;default:a=(i?d:r.bottom)-(e?c:0)-o.bottom-t.containerOffsetY}return Math.abs(a)}function f(e){return $.inArray(e,t.attemptedFlips)>-1}return t.placement=function(e){var i=u(e),a=n?"top":"left",s=u(a),r=p(e),o=p(i);if(!f(i))return r>=o?e:(t.wasFlipped=!0,i);var l=t.originalx;t.originalx=t.originaly,t.originaly=l;var c=p(a),d=p(s);if(!f(a)){if(c>=d)return a;if(!f(s))return s}return e}(t.placement),t},clockwise:function(t){return t},shrink:function(t,e){var n=null==e||"x"===e,i=null==e||"y"===e,a=this.accountForScrolling(t),s=l.getDimensions(this.element[0]),r=this.settings.bleedFromContainer,o=this.getContainer(t),c=o?o[0].getBoundingClientRect():{},d=o.length&&o[0]===document.body,h=null===t.parent,u=d?$(window).scrollLeft():o.scrollLeft(),p=d?$(window).scrollTop():o.scrollTop(),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=Math.max(document.documentElement.clientWidth,window.innerWidth||0),m=(a?u:0)+(r?0:c.left)+t.containerOffsetX,v=(a?p:0)+(r?0:c.top)+t.containerOffsetY,b=(a?u:0)+(r?g:c.right)-t.containerOffsetX,y=(a?p:0)+(r?f:c.bottom)-t.containerOffsetY,w=b-m,x=y-v;if(!h){var C=l.getDimensions(t.parent[0]),k=C.top-v,T=y-C.bottom,S=C.left-m,A=b-C.right;w=S>A?S:A,x=k>T?k:T}return n&&(s.width>w&&(t.width=w),s.left<m&&t.setCoordinate("x",t.x+(m-s.left))),i&&(s.height>x&&(t.height=x),s.top<v&&t.setCoordinate("y",t.y+(v-s.top))),t},giveup:function(t){return t.giveup=!0,t.strategy=this.settings.strategy,t.placement=this.settings.placement,t},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var t=this.originalStyles;return t&&(t.width&&(this.element[0].style.width=t.width),t.height&&(this.element[0].style.height=t.height)),this},setArrowPosition:function(t,e,n){var i=e.parent,a=n.find("div.arrow"),s=e.placement,r={},o=n[0].getBoundingClientRect(),l={},c={},d=!1;if(i&&i.length&&a.length){a[0].removeAttribute("style"),n.removeClass("top right bottom left").addClass(s),i.is(".colorpicker")&&(i=i.next(".trigger")),i.is(".datepicker, .timepicker")&&(i=i.next(".icon")),i.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(i=i.find(".icon").last()),i.is(".searchfield-category-button")&&(i=i.find(".icon.icon-dropdown")),i.is(".colorpicker-editor-button")&&(i=i.find(".trigger .icon")),i.is(".fontpicker")&&(i=i.find(".icon.icon-dropdown")),i.length||(i=e.parent),r=i.length?i[0].getBoundingClientRect():r,l=a.length?a[0].getBoundingClientRect():l,c={};var h,u,p={};p[(u=s,"right"===u||"left"===u?"margin-top":"margin-left")]=(h=0,"left"!==s&&"right"!==s||(c.top=l.top+(h=r.top+r.height/2-(l.top+l.height/2)),c.bottom=l.bottom+h,(c.top<=o.top||c.bottom>=o.bottom)&&(d=!0)),"top"!==s&&"bottom"!==s||(c.left=l.left+(h=r.left+r.width/2-(l.left+l.width/2)),c.right=l.right+h,(c.left<=o.left||c.right>=o.right)&&(d=!0)),h),d&&(p.display="none"),a.css(p)}},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(t){return this.each((function(){var e=$.data(this,"place");e?e.updated(t):e=$.data(this,"place",new ot(this,t))}))};var lt={use:"user-profile",focusable:!1};function ct(t,e){this.settings=b.mergeSettings(t,e,lt),this.element=$(t),this.init()}ct.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var t=this.element[0].getElementsByTagName("use")[0];return t?(t.getAttribute("href")!==this.getBasedUseTag()&&t.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return _.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var t=this.element.children("use");if(!t.length)return this;var e=t.attr("href");!e&&t.attr("xlink:href")&&(e=t.attr("xlink:href"));var n=_.url;return e&&_.element.length&&n.length&&(e=e.replace(n,"")),e=e.replace("#icon-",""),this.settings.use=e,this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("icon"),(function(){t.updated()})),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("icon")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(t){return this.each((function(){var e=$.data(this,"icon");e?e.updated(t):e=$.data(this,"icon",new ct(this,t))}))},function(){function t(t){var e={icon:"user-profile",classes:["icon"]};return"string"==typeof(t=t||$.extend({},e))&&(t=$.extend({},e,{icon:t.replace("icon-","")})),!t.classes&&t.class&&(t.classes=t.class,delete t.class),t.classes||(t.classes=[].concat(e.classes)),"string"==typeof t.classes&&(t.classes=t.classes.split(" ")),-1===t.classes.indexOf("icon")&&t.classes.push("icon"),t.icon||(t.icon=""),t}$.createIcon=function(e){return e=t(e),['<svg class="'.concat(e.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(e.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(e){return e=t(e),$.getBaseURL("#icon-".concat(e.icon.replace("icon-","")))},$.fn.changeIcon=function(t){t&&$(this).find("use").attr("href",$.createIconPath({icon:t}))},$.fn.getIconName=function(){var t=$(this),e=t.find("use");return 1===e.length&&e.attr("href")?e.attr("href").substr(e.attr("href").indexOf("#icon-")+6):1===e.length&&e.attr("xlink:href")?e.attr("xlink:href").substr(e.attr("xlink:href").indexOf("#icon-")+6):t.attr("data-icon")}}();var dt={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null};function ht(t,e){this.settings=b.mergeSettings(t,e,dt),this.element=$(t),this.init()}ht.prototype={get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!l.hasClass(this.element[0],"hidden")&&!l.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var t=document.activeElement;return!!this.activeElement.is($(t))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(t))},init:function(){this.uniqueId=b.uniqueId(this.element,"tooltip"),this.isTouch=u.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var t=this.element.attr("title");(!this.settings.popover&&t&&t.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:t,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.isPopover=null!==this.settings.content&&"object"===n(this.settings.content)||!0===this.settings.popover,this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),this.isRTL=D.isRTL(),l.addClass(this.element[0],"has-tooltip")},addAria:function(){this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.removeAttr("title").attr("aria-describedby",this.description.attr("id")),this.isPopover&&"click"===this.settings.trigger&&this.element.attr("aria-haspopup",!0))},addClassToLinks:function(t,e){if(t instanceof $&&t.length>0)return t;var n=$("<div/>").html(t);return $("a",n).addClass(e),n.html()},appendTooltip:function(){if(this.tooltip=this.settings.tooltipElement?$(this.settings.tooltipElement):$("#tooltip"),!this.tooltip.length){var t=this.settings.tooltipElement?this.settings.tooltipElement.substring(1,this.settings.tooltipElement.length):"tooltip";this.tooltip=$('<div class="'.concat(this.isPopover?"popover":"tooltip",' bottom is-hidden" role="tooltip" id="').concat(t,'"><div class="arrow"></div><div class="tooltip-content"></div></div>'))}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],"tooltip",this),this.setTargetContainer()},handleEvents:function(){var t,e=this;function n(){t&&t.destroy&&t.destroy()}function i(){n(),e.show()}function a(){n(),e.hide()}function s(){e.visible?a():i()}"hover"!==this.settings.trigger||this.settings.isError||(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),(function(){e.isTouch||(n(),t=new F({duration:400/30,timeoutCallback:function(){e.show()}}),H.register(t))})).on("mouseleave.".concat("tooltip"),(function(){n(),t=new F({duration:400/30,timeoutCallback:function(){e.hide()}}),H.register(t)})).on("click.".concat("tooltip"),(function(){e.isTouch||i()})).on("longpress.".concat("tooltip"),(function(){i()})).on("updated.".concat("tooltip"),(function(){e.updated()})),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),(function(){s()})),"immediate"===this.settings.trigger&&(t=setTimeout((function(){s()}),1)),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),(function(){i()})).on("blur.".concat("tooltip"),(function(){e.settings.keepOpen||a()})),$(window).on("orientationchange.".concat("tooltip"),(function(){e.visible&&a()}),!1)},setContent:function(t,e){var n=this,i=this.settings.content,a=null==t;function s(){!0!==e&&(n.addAria(),n.render())}if(a&&null==i)return!1;if("function"==typeof i&&(t=i),a&&(t=i),t===this.content)return s(),!0;if(t instanceof $&&t.length)return this.content=t.addClass("hidden"),s(),!0;if("string"==typeof t){if(!t.length)return!1;if(0===(t=D.translate(t,{showAsUndefined:!0})||t).indexOf("#")){var r=$("".concat(t));return!!r.length&&(this.content=r,s(),!0)}}else{if("function"!=typeof t)return!1;var l=t.call(this.element);if(!l||"string"!=typeof l||!l.length)return!1;t=l}return this.content=o.sanitizeHTML(t),this.content="<p>".concat(this.content,"</p>"),s(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var t=this.tooltip[0].querySelectorAll(".tooltip-title")[0],e=this.tooltip[0].querySelectorAll(".tooltip-content")[0],n=this.settings.extraClass,i=this.content,a=this.tooltip[0],s="tooltip is-hidden";n&&(s+=" ".concat(n)),a.setAttribute("class",s),t&&(t.style.display="none"),e&&e.previousElementSibling&&!e.previousElementSibling.classList.contains("arrow")&&e.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>'),l.html(e,"string"==typeof this.content?i:i[0].innerHTML,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var t=this,e=this.settings.extraClass,n=this.tooltip.find(".tooltip-content"),i=this.tooltip[0].querySelector(".tooltip-title"),a=this.content,s="popover is-hidden";e&&(s+=" ".concat(e)),this.tooltip[0].setAttribute("class",s);var r="ie"===u.browser.name&&u.browser.isIE11()&&a instanceof $&&a.length&&"hover"===this.settings.trigger;if("string"==typeof a)a=$(a),n.html(a),n.find(".hidden").removeClass("hidden");else if(r){var o=a[0].cloneNode(!0),c=o.id;c&&(o.id="".concat(c,"-").concat(this.uniqueId)),n.html(o.outerHTML)}else n.html(a);var d=n.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),r||a[0].classList.remove("hidden"),n[0].firstElementChild.classList.remove("hidden");var h=this.settings.placementOpts.parent.width();if(this.settings.placementOpts.parentXAlignment=D.isRTL()?h>d?"left":"right":h>d?"right":"left",null!==this.settings.title)if(i)i.style.display="",i.childNodes[0].nodeValue=this.settings.title;else{var p=document.createDocumentFragment();i=document.createElement("div"),l.html(i,this.settings.title,"*"),i.classList.add("tooltip-title"),this.settings.headerClass&&l.addClass(i,this.settings.headerClass,"filled"),p.appendChild(i),this.tooltip[0].insertBefore(p,this.tooltip[0].firstChild)}else i&&(i.style.display="none");if(this.settings.closebutton&&i&&!i.firstElementChild){var f=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",(function(){t.hide(!0)}));i.appendChild(f[0])}this.settings.initializeContent&&a.initialize()},open:function(){return this.show()},show:function(t,e){var n=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.settings.beforeShow&&!e){var i=function(t){("boolean"!=typeof t||t)&&(n.content=t,n.show({content:t},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](i,this.element):void this.settings.beforeShow(i,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),l.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),b.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var a=this.isTouch?"touchend":"mouseup",s=n.element.closest(".is-personalizable").length>0;n.tooltip[0].classList[s?"add":"remove"]("is-personalizable"),setTimeout((function(){$(document).on("".concat(a,".").concat("tooltip","-").concat(n.uniqueId),(function(t){var e=$(t.target);n.settings.isError||"focus"===n.settings.trigger||e.is(n.element)&&e.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||(0===e.closest(".popover").length&&0===e.closest(".dropdown-list").length&&n.hide(),1===e.closest(".popover").length&&e.closest(".popover").not(".monthview-popup").length&&n.element.prev().is(".datepicker")&&n.hide())})).on("keydown.".concat("tooltip","-").concat(n.uniqueId),(function(t){(27===t.which||n.settings.isError)&&n.hide()})),n.settings.isError&&!n.element.is(":visible, .dropdown")&&n.element.is("[aria-describedby]")&&n.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),(function(){n.hide()})),$("body").on("scroll.".concat("tooltip"),(function(){n.hide()})),n.element.closest(".modal-body-wrapper").on("scroll.tooltip",(function(){n.hide()})),n.element.closest(".scrollable").on("scroll.tooltip",(function(){n.hide()})),n.element.closest(".datagrid-wrapper").on("scroll.tooltip",(function(){n.hide()})),n.settings.isError&&n.tooltip.on("click.".concat("tooltip"),(function(){n.hide()})),n.element.trigger("aftershow",[n.tooltip])}),400)}}},setTargetContainer:function(){var t=$("body");this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(t=this.scrollparent),this.settings.parentElement&&(t=this.settings.parentElement),t[0].appendChild(this.tooltip[0])},handleAfterPlace:function(t,e){var n=this;this.tooltip.data("place").setArrowPosition(t,e,this.tooltip),setTimeout((function(){n.tooltip.triggerHandler("tooltipafterplace",[e])}))},position:function(){this.setTargetContainer(),this.tooltip[0].classList.remove("is-hidden");var t=this,e=this.isPopover?20:10,n=this.settings.placementOpts||{},i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),s=this.tooltip[0].getBoundingClientRect(),r=$.extend({},{x:0,y:e,container:this.scrollparent,containerOffsetX:n.containerOffsetX||this.settings.offset.left,containerOffsetY:n.containerOffsetY||this.settings.offset.top,parent:n.parent||this.activeElement,placement:n.placement||this.settings.placement,strategies:["flip","nudge"]},n);return"left"!==r.placement&&"right"!==r.placement||(r.x=e,r.y=0),s.width>=i&&/left|right/g.test(r.placement)||s.height>=a&&/top|bottom/g.test(r.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",(function(e,n){t.handleAfterPlace(e,n)})),this.tooltip.data("place")||this.tooltip.place(r),this.tooltip.data("place").place(r),this},close:function(){return this.hide()},hide:function(t){this.settings.keepOpen&&!t||!this.visible||(this.isInPopup?this.settings.content.addClass("hidden"):(l.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.triggerHandler("hide",[this.tooltip])))},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings));var e=this;return"immediate"===e.settings.trigger?setTimeout((function(){e.show()}),100):e.setContent(),this},detachOpenEvents:function(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(self.uniqueId),"mouseup.".concat("tooltip","-").concat(self.uniqueId),"touchend.".concat("tooltip","-").concat(self.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function(){return this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.element.removeAttr("aria-describedby").removeAttr("aria-haspopup"),this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data("tooltip")&&$.removeData(this.tooltip[0],"tooltip")),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),l.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tooltip")}},$.fn.tooltip=function(t){return this.each((function(){var e=$.data(this,"tooltip");e?e.updated(t):e=$.data(this,"tooltip",new ht(this,t))}))};var ut=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],pt=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],ft=["icon-favorite","btn-toggle"],gt={style:ut[0],type:pt[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,validate:!1};function mt(t,e){this.element=$(t),this.settings=b.mergeSettings(t,e,gt),this.init()}mt.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element[0].disabled},set disabled(t){var e=!0===t;this.settings.disabled=e,this.element[0].disabled=e,this.element[0].classList[e?"add":"remove"]("is-disabled")},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},animateWithJS:function(t){var e=t[0].style,n="".concat(parseFloat(e.left)-100,"px"),i="".concat(parseFloat(e.top)-100,"px");t[0].style.opacity="0.4",t.animate({opacity:0,left:n,top:i,width:200,height:200},1e3)},createRipple:function(t){if(!(this.disabled||t&&(void 0!==t.which&&1!==t.which||-1===["click","touchstart"].indexOf(t.type)))){$("svg.ripple-effect",this.element).remove();var e,n,i=this.element.offset();t&&(u.features.touch?(t=t.originalEvent)&&t.touches&&1===t.touches.length&&(e=t.touches[0].pageX-i.left,n=t.touches[0].pageY-i.top):(e=t.pageX-i.left,n=t.pageY-i.top)),e=e<0?this.element.outerWidth()/2:e,n=n<0?this.element.outerHeight()/2:n;var a=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');a[0].style.left="".concat(e,"px"),a[0].style.top="".concat(n,"px"),this.element.prepend(a),!$.fn.cssPropSupport("animation")||u.browser.isSafari&&!u.features.touch||"firefox"===u.browser.name?(a.removeClass("is-animation"),this.animateWithJS(a)):$("svg.ripple-effect",this.element).addClass("is-animation"),setTimeout((function(){a.remove()}),1e3)}},render:function(){var t=this,e=this.element[0].classList;ut.indexOf(this.settings.style)>0&&e.add(this.settings.style),pt.indexOf(this.settings.type)>0&&e.add(this.settings.type);var n=this.buttonsetAPI,i=!1;if(n&&("modal"===n.settings.style&&(i=!0),["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn"),e[i?"add":"remove"]("btn-modal")),["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn-primary"),e[i?"add":"remove"]("btn-modal-primary")),["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn-secondary"),e[i?"add":"remove"]("btn-modal-secondary"))),this.settings.isDefault&&(this.settings.style="btn-primary",e.remove("btn-primary"),e.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=o.stripHTML(this.settings.cssClass)),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled),this.settings.text){var a=this.element[0].querySelector("span"),s=a instanceof HTMLElement;s||(a=this.element);var r=this.settings.text||$(a).text().trim();r=o.stripHTML(r),s||(this.element[0].innerText="",a=document.createElement("span"),this.element.append($(a)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&a.classList.add("audible")),a.innerText=r}var l,c=this.icon;if(this.settings.icon?l=this.settings.icon:"btn-toggle"===this.settings.type?l=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?l=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(l="icon-more"),l&&(l=o.stripHTML(l),c instanceof SVGElement||c instanceof HTMLElement?c.querySelector("use").setAttribute("href","#".concat(l)):(c=$.createIconElement({icon:l.replace("icon-","")}),this.element.prepend($(c)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var d=this.element.children("svg.icon"),h=d.find("use"),u=!1;if(d.length>0&&h.length>=1){var p=h.last().attr("href");!p&&h.last().attr("xlink:href")&&(p=h.last().attr("xlink:href")),u=p.indexOf("#icon-dropdown")>-1}u||(d=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(d)),d.hasClass("icon-dropdown")||d.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",(function(t,e){$(this).find("span").text(e.text())})),this.settings.hideMenuArrow&&d.remove()}if(ft.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",(function(){t.toggle()})),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){var f=D.translate("More");this.element.attr("title",f).tooltip({content:f})}e[this.settings.ripple?"add":"remove"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",(function(e){t.createRipple(e)})),this.element.data("hidefocus")||this.element.hideFocus()},getSettingsFromElement:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={},a=this.element.parents(".buttonset, .modal-buttonset");a.length&&(t=a.data("buttonset"))&&(this.buttonsetAPI=t);var s=this.element[0].classList||"";if(ut.forEach((function(t){"default"!==t&&s.contains(t)&&(i.style=t)})),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var r={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(r).forEach((function(t){s.contains(t)&&(i.style=r[t])}))}pt.forEach((function(t){"default"!==t&&s.contains(t)&&(i.type=t)})),this.settings.disabled||(i.disabled=this.disabled);var o=this.element[0].getAttribute("aria-pressed");void 0!==o&&(i.pressed=!0===o,"icon-favorite"===i.type&&(i.toggleOnIcon="icon-star-filled",i.toggleOffIcon="icon-star-outlined"));var l=this.element[0].id;"string"==typeof l&&l.length&&(i.id=l);var c=this.element[0].title;"string"==typeof c&&c.length&&(i.title=c),s.contains("no-ripple")&&(i.ripple=!1);var d=this.element[0].querySelector("span.audible");return d&&(i.audible=!0),n||Object.keys(i).forEach((function(t){e.settings[t]=i[t]})),i},toData:function(t){var e=this,n={};return Object.keys(this.settings).forEach((function(t){n[t]=e.settings[t]})),n.pressed=this.pressed,t&&(n.element=this.element[0]),n},get pressed(){return-1!==ft.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(t){var e,n=!0===t,i=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,a=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",n),this.element[0].classList[n?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":e=n?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":i&&(e=n?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==a.length&&"string"==typeof e&&(a.changeIcon(e),b.fixSVGIcons(a))},toggle:function(){this.pressed=!this.pressed},teardown:function(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var t=this.tooltipAPI;this.element.hasClass("btn-actions")&&t&&t.destroy();var e=this.element.data("hidefocus");return e&&e.destroy(),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function(t){return this.each((function(){var e=$.data(this,"button");e?e.updated(t):e=$.data(this,"button",new mt(this,t))}))};var vt={buttons:[],detectHTMLButtons:!1,style:"default"};function bt(t,e){if(!(t instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=t,this.settings=b.mergeSettings(t,e,vt),this.init()}bt.prototype={set disabled(t){this.element.classList[(t=!0===t)?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach((function(e){e.disabled=t}))},init:function(){this.build(),this.render()},build:function(t){var e=this;this.buttons&&t||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach((function(t){e.add(t)})):this.detectHTMLButtons()},render:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.element.classList,i={default:"buttonset",modal:"modal-buttonset"};Object.keys(i).forEach((function(e){t.settings.style!==e&&n.remove(i[e])})),n.add(i[this.settings.style]),e||this.buttons.forEach((function(t){t.render()}))},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||"object"!==n(t))throw new Error("Settings object is required to add a new button to the ButtonSet");var i=t.element,a=i instanceof HTMLElement;a||(i=document.createElement("button"));var s=o.stripHTML(t.id);"string"==typeof s&&s.length>0&&(i.id=s);var r=$(i);!e&&a||$(this.element).append(r),t.buttonsetAPI=this,r.button(t);var l=r.data("button");this.buttons.push(l)},remove:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===n||"function"!=typeof n.destroy){if(n instanceof HTMLElement?t=n:"string"==typeof n&&(t=$(this.element).find("#".concat(n.replace("#","")))),e=$(t),void 0===(n=$(t).data("button"))||"function"!=typeof n.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else e=n.element;n.destroy(),i&&e.remove(),this.buttons=this.buttons.filter((function(t){return t!==n}))},removeAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach((function(n){t.remove(n,e)}))},reset:function(){this.buttons=[]},at:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[t]},detectHTMLButtons:function(){var t=this;this.settings.detectHTMLButtons&&(this.reset(),(b.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach((function(e){var n=$(e).data("button");n||($(e).button(),n=$(e).data("button"));var i=n.getSettingsFromElement(!0);i.element=e,t.add(i)})))},toData:function(){var t=b.extend({},this.settings);return this.buttons.forEach((function(e){t.buttons.push(e.toData())})),t},teardown:function(t){return this.removeAll(t),this.reset(),this},updated:function(t){var e=this.settings.buttons;return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),Array.isArray(t.buttons)&&e!==t.buttons?(this.settings.buttons=t.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach((function(t){t.updated()}))),this},destroy:function(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function(t){return this.each((function(){var e=$.data(this,"buttonset");e?e.updated(t):e=$.data(this,"buttonset",new bt(this,t))}))};var yt={};function wt(t,e){return this.init(t,e)}wt.prototype={init:function(t,e){return!this.element&&t instanceof HTMLElement&&(this.element=t),"object"===n(e)&&(this.settings=b.mergeSettings(this.element,e,this.settings||yt)),this.focusBehavior||(this.focusBehavior=new p(this.element)),this},handleEvents:function(){return this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(t){return this.each((function(){var e=$.data(this,"hyperlink");e?e.updated(t):(e=$.data(this,"hyperlink",new wt(this,t))).destroy=function(){this.teardown(),$.removeData(this,"hyperlink")}}))};var xt={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};xt.LEGACY_DEFS={"#":xt.DIGITS_REGEX,0:xt.DIGITS_REGEX,x:xt.ALPHAS_REGEX,"*":xt.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},xt.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:xt.EMPTY_STRING,placeholderChar:xt.PLACEHOLDER_CHAR,placeholder:xt.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var Ct={prefix:xt.EMPTY_STRING,suffix:xt.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function kt(t){return t.split(xt.EMPTY_STRING).map((function(t){return xt.DIGITS_REGEX.test(t)?xt.DIGITS_REGEX:t}))}function Tt(t,e){var n={any:xt.ANY_REGEX,digits:xt.DIGITS_REGEX,alphas:xt.ALPHAS_REGEX};n[e]||(e="any");for(var i=t.toString().length,a=[];i>0;)a.push(n[e]),i-=1;return a}xt.numberMask=function(t,e){(e=b.mergeSettings(void 0,e,Ct)).locale&&e.locale.length||(e.locale=D.currentLocale.name),e.allowLeadingZeroes&&(M("allowLeadingZeros","allowLeadingZeroes","Number Mask"),e.allowLeadingZeros=e.allowLeadingZeroes,e.allowLeadingZeroes=void 0);var n=e.prefix,i=e.suffix,a=e.symbols.decimal,s=e.symbols.thousands,r=n&&n.length||0,o=i&&i.length||0,l=s&&s.length||0;function c(t){"string"!=typeof t&&(t=xt.EMPTY_STRING);var c=t.length;if(t===xt.EMPTY_STRING||t[0]===n[0]&&1===c)return n.split(xt.EMPTY_STRING).concat([xt.DIGITS_REGEX]).concat(i.split(xt.EMPTY_STRING));if(t===a&&e.allowDecimal)return n.split(xt.EMPTY_STRING).concat(["0",a,xt.DIGITS_REGEX]).concat(i.split(xt.EMPTY_STRING));var d,h,u,p=t.lastIndexOf(a),f=-1!==p,g=t[0]===e.symbols.negative&&e.allowNegative;if(t.slice(-1*o)===i&&(t=t.slice(0,-1*o)),f?(d=t.slice(t.slice(0,r)===n?r:0,p),h=kt((h=t.slice(p+1,c)).replace(xt.NON_DIGITS_REGEX,xt.EMPTY_STRING))):d=t.slice(0,r)===n?t.slice(r):t,e.integerLimit&&"number"==typeof e.integerLimit){var m="."===s?"[.]":"".concat(s),v=(d.match(new RegExp(m,"g"))||[]).length;d=d.slice(0,e.integerLimit+(g?1:0)+v*l)}return d=d.replace(xt.NON_DIGITS_REGEX,xt.EMPTY_STRING),e.allowLeadingZeros||(d=d.replace(/^0+(0$|[^0])/,"$1")),u=kt(d=e.allowThousandsSeparator?function(t,e,n,i){if(""===t||isNaN(t))return t;var a=D.toLocaleString(Number(t),n.locale,i,e);if(n&&n.allowLeadingZeros&&0===t.indexOf("0")){var s="".concat(t).match(/^0*/)[0].length;for(0===a.indexOf("0")&&(a=a.substring(1));s>0;)s-=1,a="0".concat(a)}return a}(d,s,e,{maximumFractionDigits:e.decimalLimit,style:"decimal",useGrouping:!0}):d),(f&&e.allowDecimal||!0===e.requireDecimal)&&(t[p-1]!==a&&u.push(xt.CARET_TRAP),u.push(a,xt.CARET_TRAP),h&&("number"==typeof e.decimalLimit&&(h=h.slice(0,e.decimalLimit)),u=u.concat(h)),!0===e.requireDecimal&&t[p-1]===a&&u.push(xt.DIGITS_REGEX)),r>0&&(u=n.split(xt.EMPTY_STRING).concat(u)),g&&(u.length===r&&u.push(xt.DIGITS_REGEX),u=[/-/].concat(u)),i.length>0&&(u=u.concat(i.split(xt.EMPTY_STRING))),u}return c.instanceOf="createNumberMask",c(t)};var St={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},At={dd:31,d:31,MMM:void 0,MM:12,M:12,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function $t(t){return this.configure(t),this}xt.dateMask=function(t,e){e=b.mergeSettings(void 0,e,St);var n=[],i=xt.DIGITS_REGEX,a=e.format,s=k.removeDuplicates(a.replace(/[dMyHhmsa]+/g,"")),r=new RegExp("[".concat(s,"]+")),o=a.split(/[^dMyHhmsa]+/),l=t.split(r),c=At;return o.forEach((function(t,e){var s,r=c[t];if("a"===t||"ah"===t){var d="AM",h="PM";if(D.calendar()){d=D.calendar().dayPeriods[0],h=D.calendar().dayPeriods[1];for(var u=[],p=0;p<d.length;p++)d[p]&&h[p]&&d[p].toLowerCase()===h[p].toLowerCase()?u.push(d[p].toLowerCase()):u.push(d[p].toLowerCase()+(h[p]?h[p].toLowerCase():""));for(var f=0;f<u.length;f++)n.push(new RegExp("[".concat(u[f],"]"),"i"))}else n.push(/[aApP]/,/[Mm]/);if("ah"===t){var g=l[e].replace(d,"").replace(h,"");n=n.concat(Tt(g,"digits"))}}else if(r)if(l[e]){var m=l[e].toString(),v=parseInt(m.substr(0,1),10),b=parseInt(c[t].toString().substr(0,1),10);1===t.length&&v>b||"0"!==m&&1===m.length&&v<=b&&void 0!==l[e+1]&&"HH"!==t.toUpperCase()?n.push(i):n=n.concat(Tt(r,"digits"))}else for(s=r.toString().length;s>0;)n.push(i),s-=1;else n=n.concat(Tt(t,"alphas"));var y=o[e+1];if(void 0!==y){var w=t.toString().length,x=a.indexOf(t)+w,C=a.indexOf(y),k=a.substring(x,C).split(xt.EMPTY_STRING);n=n.concat(k)}})),n},xt.rangeDateMask=function(t,e){var n=t.split(e.delimeter),i=e.delimeter.split(""),a=xt.dateMask(n[0],e),s=[];return n[1]&&(s=xt.dateMask(n[1],e)),a.concat(i.concat(s))},xt.autocorrectedDatePipe=function(t,e){e.dateFormat||(e.dateFormat=D.calendar().dateFormat.short);var n=[],i=e.dateFormat.split(/[^dMy]+/),a={d:31,M:12,yy:99,yyyy:9999},s={d:1,M:1,yy:0,yyyy:1},r=t.conformedValue.split("");i.forEach((function(t){var i=e.dateFormat.indexOf(t),s=parseInt(a[t].toString().substr(0,1),10);parseInt(r[i],10)>s&&(r[i+1]=r[i],r[i]=0,n.push(i))}));var o=new RegExp("[^".concat(t.placeholderChar,"]")),l=t.placeholder.split(o),c=t.conformedValue.split(/\D/g);return!i.some((function(t,e){var n=l[e].length>t.length?l[e].length:t.length,i=c[e]||"",r=parseInt(i,10);return r>a[t]||i.length===n&&r<s[t]}))&&{value:r.join(""),characterIndexes:n}},$t.prototype={configure:function(t){if(this.settings||(this.settings={}),!t)return this;if(t.locale&&(this.locale=t.locale),t.pattern)if(Array.isArray(t.pattern)||"function"==typeof t.pattern)this.pattern=t.pattern;else if("string"==typeof t.pattern){var e=b.mergeSettings(void 0,t.definitions||{},xt.LEGACY_DEFS);this.pattern=this._convertPatternFromString(t.pattern,e)}return t.patternOptions&&(this.patternOptions=t.patternOptions),this},process:function(t,e){if("string"!=typeof t)throw new Error("No string provided");var n,i={originalValue:t,caretPos:e.selection.start,maskResult:!1};if("function"==typeof this.pattern){e.patternOptions||(e.patternOptions={});var a=b.extend({},this.patternOptions,e.patternOptions,{caretPos:e.selection.start,previousMaskResult:e.previousMaskResult});n=this.pattern(t,a);var s=this._processCaretTraps(n);n=s.maskWithoutCaretTraps,e.caretTrapIndexes=s.indexes}else n=this.pattern;if(!1===n)return i;try{i=this._conformToMask(t,n,e)}catch(o){return i}if(e.patternOptions&&e.patternOptions.delimeter&&i.conformedValue&&i.conformedValue!==t&&(i.caretPos=i.conformedValue.length),"function"==typeof e.pipe){var r={};try{r=e.pipe(i,e)}catch(o){r=!1}!1===r?(i.pipeResult=!1,i.pipedValue=e.previousMaskResult):b.isString(r)?(i.pipeResult=!0,i.pipedValue=r,i.pipedCharIndexes=[]):i=b.extend({},i,{pipeResult:r.result,pipedValue:r.value,pipedCharIndexes:r.characterIndexes})}return i},_conformToMask:function(t,e,n){(n=b.mergeSettings(void 0,n,xt.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(e,n.placeholderChar);var i=!1,a=!1===n.guide&&void 0!==n.previousMaskResult,s=t.length,r=n.previousMaskResult.length,o=this.pattern.length,l=n.placeholder.length||0,c=n.placeholderChar,d=n.selection.start,h=xt.EMPTY_STRING,u=s-r,p=u>0,f=d+(p?-u:0),g=f+Math.abs(u);if(!0===n.keepCharacterPositions&&!p){for(var m=xt.EMPTY_STRING,v=f;v<g;v++)n.placeholder[v]===c&&(m+=c);t=t.slice(0,f)+m+t.slice(f,s)}for(var y=t.split(xt.EMPTY_STRING).map((function(t,e){return{char:t,isNew:e>=f&&e<g}})),w=s-1;w>=0;w--){var x=y[w];x!==n.placeholderChar&&x===n.placeholder[w>=f&&r===o?w-u:w]&&y.splice(w,1)}t:for(var C=0;C<l;C++){var k=n.placeholder[C];if(k===c){if(y.length>0)for(;y.length>0;){var T=y.shift();if(T.char===c&&!0!==a){h+=c;continue t}if(e[C].test(T.char)){if(!0===n.keepCharacterPositions&&!1!==T.isNew&&n.previousMaskResult!==xt.EMPTY_STRING&&!1!==n.guide&&p){for(var S=y.length,A=null,$=0;$<S;$++){var E=y[$];if(E.char!==c&&!1===E.isNew)break;if(E.char===c){A=$;break}}null!==A?(h+=T.char,y.splice(A,1)):C--}else h+=T.char;continue t}i=!0}!1===a&&(h+=n.placeholder.substr(C,l));break}h+=k}if(a&&!1===p){for(var D=null,I=0;I<h.length;I++)n.placeholder[I]===c&&(D=I);h=null!==D?h.substr(0,D+1):xt.EMPTY_STRING}return{caretPos:d,caretTrapIndexes:n.caretTrapIndexes,conformedValue:h,charactersRejected:i,placeholder:n.placeholder,placeholderChar:c,maskResult:!0}},_processCaretTraps:function(t){for(var e=[],n=t.indexOf(xt.CARET_TRAP);-1!==n;)e.push(n),t.splice(n,1),n=t.indexOf(xt.CARET_TRAP);return{maskWithoutCaretTraps:t,indexes:e}},_convertMaskToPlaceholder:function(t,e){if(Array.isArray(t)||(t=[]),e||(e=xt.PLACEHOLDER_CHAR),-1!==t.indexOf(e))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(e),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(t)));return t.map((function(t){return t instanceof RegExp?e:t})).join(xt.EMPTY_STRING)},adjustCaretPosition:function(t){if(0===t.caretPos)return 0;function e(t){return t!==e}var n=t.previousMaskResult.length,i=t.placeholder?t.placeholder.length:0,a=t.conformedValue?t.conformedValue.length:0,s=t.rawValue.length-n,r=s>0;if(s>1&&!r&&0!==n)return t.caretPos;var o,l,c=0;if(!r||t.previousMaskResult!==t.conformedValue&&t.conformedValue!==t.placeholder){var d=t.conformedValue.toLowerCase(),h=t.rawValue.toLowerCase().substr(0,t.caretPos).split(xt.EMPTY_STRING).filter((function(t){return-1!==d.indexOf(t)}));l=h[h.length-1];var u=t.previousPlaceholder.substr(0,h.length).split(xt.EMPTY_STRING).filter(e).length,p=t.placeholder.substr(0,h.length).split(xt.EMPTY_STRING).filter(e).length;!r&&(p!==u||void 0!==t.previousPlaceholder[h.length-1]&&void 0!==t.placeholder[h.length-2]&&t.previousPlaceholder[h.length-1]!==t.placeholderChar&&t.previousPlaceholder[h.length-1]!==t.placeholder[h.length-1]&&t.previousPlaceholder[h.length-1]===t.placeholder[h.length-2])&&u>0&&t.placeholder.indexOf(l)>-1&&void 0!==t.rawValue[t.caretPos]&&(o=!0,l=t.rawValue[t.caretPos]);var f=[];t.indexesOfPipedChars&&(f=t.indexesOfPipedChars.map((function(t){return d[t]})));for(var g=f.filter((function(t){return t===l})).length,m=h.filter((function(t){return t===l})).length,v=t.placeholder.substr(0,t.placeholder.indexOf(t.placeholderChar)).split(xt.EMPTY_STRING).filter((function(e,n){return e===l&&t.rawValue[n]!==e})).length+m+g+(o?1:0),b=0,y=0;y<a&&(c=y+1,d[y]===l&&b++,!(b>=v));y++);}else c=t.caretPos-s;if(r)for(var w=c,x=c;x<=i;x++){if(!t.placeholder)return w;if(t.placeholder[x]===t.placeholderChar&&(w=x),t.placeholder[x]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(x)||x===i)return w}else if(o){for(var C=c-1;C>=0;C--)if(t.conformedValue[C]===l||-1!==t.caretTrapIndexes.indexOf(C)||0===C)return C}else for(var k=c;k>=0;k--)if(t.placeholder[k-1]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(k)||0===k)return k},_convertPatternFromString:function(t,e){for(var n,i,a=[],s=Object.keys(e),r=0;r<t.length;r++)a.push(((i=s.indexOf(n=t[r]))>-1&&(n=e[s[i]]),n));return a}};var Et={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:$t,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function Dt(t,e){return this.element=t,this.settings=b.mergeSettings(this.element,e,Et),this.init()}Dt.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){if(this._replaceLegacySettings(),"string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=xt.numberMask,this.element.classList.add("is-number-mask");break;case"date":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=t.settings.dateFormat)),this.settings.pattern=xt.dateMask;break;case"rangeDate":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=e.settings.dateFormat),this.settings.pattern=xt.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var t=this;this.locale=D.currentLocale,this.settings.locale?D.getLocale(this.settings.locale).done((function(e){t.locale=D.cultures[e],t.build()})):this.build()},handleEvents:function(){var t=this;return this.changeEventHandler=function(){t.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){t.state.previousMaskResult=t.element.value,t.state.initialValue=t.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(e){return t.hasTriggeredChangeEvent=!1,t.process(e)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(e){if(!0===this.processingJustHappenedOnInput)return e.preventDefault(),!1;if(t.settings.processOnBlur){if(t.element.readOnly)return e.preventDefault(),!1;!t._hasChangedValue()||!t._isEdgeIE()&&t.hasTriggeredChangeEvent||($(t.element).trigger("change"),t.hasTriggeredChangeEvent=!0)}return delete t.state.initialValue,t.process(e)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(t){if(!this.settings.pattern)return!0;var e=this.mask,n=this.settings.patternOptions||{},i=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(i=this.locale.data.numbers.decimal),n.symbols&&n.symbols.decimal&&(i=n.symbols.decimal),e.pattern||e.configure({pattern:this.settings.pattern,patternOptions:n});var a=this.element.value,s=!1;if(t&&"input"===t.type&&"insertText"===t.inputType&&(""===a?(a=this.state.previousMaskResult,s=!0):t.data===i&&a.indexOf(i)>-1&&(s=!0)),a===this.state.previousMaskResult)return s&&(this.element.value="",this.element.value="".concat(a)),!1;var r=this.element.selectionStart||0,o=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&r!==o&&(b.safeSetSelection(a.length,a.length),r=a.length,o=a.length),a=this._getSafeRawValue(a);var l={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:r,end:o}};r!==o&&(l.selection.contents=a.substring(r,o)),"function"==typeof this.settings.pipe&&(l.pipe=this.settings.pipe);var c=e.process(a,l);if(!c.maskResult)return c.maskResult;var d=c.pipedValue?c.pipedValue:c.conformedValue;""!==d&&n&&n.suffix&&d.indexOf(n.suffix)<0&&(d+=this.settings.patternOptions.suffix),l.patternOptions&&l.patternOptions.delimeter&&d&&d!==a&&(a=d);var h={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:d,placeholder:c.placeholder,rawValue:a,caretPos:c.caretPos,placeholderChar:this.settings.placeholderChar};c.pipedCharIndexes&&(h.indexesOfPipedChars=c.pipedCharIndexes),c.caretTrapIndexes&&(h.caretTrapIndexes=c.caretTrapIndexes),c.caretPos=e.adjustCaretPosition(h);var p=this.state.previousMaskResult;return this.state.previousMaskResult=d,this.state.previousPlaceholder=c.placeholder,"firefox"===u.browser.name?this.element.value!==d&&(this.element.value=d):this.element.value=d,b.safeSetSelection(this.element,c.caretPos),p!==d&&($(this.element).trigger("write.mask",[d]),c.maskResult)},_isAndroid:function(){return"android"===(u&&u.os&&u.os.name?u.os.name:"")},_isEdgeIE:function(){var t=u&&u.browser&&u.browser.name?u.browser.name:"";return"ie"===t||"edge"===t},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(t){if(b.isString(t))return t;if(b.isNumber(t))return String(t);if(null==t)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(t)))},_replaceLegacySettings:function(){var t=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var e=this.element.getAttribute("data-mask")||!1;"string"==typeof e&&e.length&&(this.settings.pattern=e);var n=this.element.getAttribute("data-mask-mode")||!1;if(n&&t.indexOf(n)>-1&&(this.settings.mode=n),this.settings.mode&&(-1===t.indexOf(this.settings.mode)&&delete this.settings.mode,this.settings.process="group"===this.settings.mode?void 0:"date"===this.settings.mode?"date":this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var i=this.element.getAttribute("data-thousands")||!1;if(i&&(this.settings.patternOptions.allowThousandsSeparator="true"===i),"string"==typeof this.settings.pattern){var a=-1!==this.settings.pattern.indexOf("-");a&&(this.settings.patternOptions.allowNegative=a,this.settings.patternOptions.symbols.negative="-");var s=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:D.currentLocale.data.numbers?D.currentLocale.data.numbers.group:",",r=-1!==this.settings.pattern.indexOf(s);this.settings.patternOptions.allowThousandsSeparator=r,r&&(this.settings.patternOptions.symbols.thousands=s);var o="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",l=this.settings.pattern.split(o);this.settings.patternOptions.integerLimit=l[0].replace(/[^#0]/g,"").length,l[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=l[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=o))}}var c=this.element.getAttribute("data-must-complete")||!1;c&&(this.settings.mustComplete=c),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var d,h,u=this.settings.showSymbol;if(["currency","percent"].indexOf(u)>-1){d="currency"===(h=this.settings.showSymbol)?{char:D.currentLocale.data.currencySign,format:D.currentLocale.data.currencyFormat}:"percent"===h?{char:D.currentLocale.data.numbers.percentSign,format:D.currentLocale.data.numbers.percentFormat}:{};var p,f,g,m="currency"===u?"Â¤":d.char,v=new RegExp(m,"g").exec(d.format),b=-1;if(v&&v.length){if(0===(b=d.format.indexOf(v[0])))g="prefix",p=new RegExp("[^".concat(m,"]\\S"),"g"),f=d.format.replace(p,"");else if(b>0){for(g="suffix",p=new RegExp("\\S[^".concat(m,"]"),"g");/\s/.test(d.format.charAt(b-1));)--b;f=d.format.substr(b).replace(p,"")}"currency"===u&&(f=f.replace("Â¤",d.char)),this.settings.patternOptions[g]=f}}},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(t){return this.each((function(){var e=$.data(this,"mask");e?e.updated(t):(e=$.data(this,"mask",new Dt(this,t))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}}))},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var It={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new rt({containerOffsetX:10,containerOffsetY:"ios"===u.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1};function Mt(t,e){this.settings=b.mergeSettings(t,e,It),this.element=$(t),this.init()}Mt.prototype={init:function(){this.isFirefox="firefox"===u.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return u.rtl},get isOpen(){return l.hasClass(this.element[0],"is-open")},setup:function(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(t){if(t&&t.length){var e=t.parent();e.is("body")||(this.menuOrgContainment={parent:e,index:e.children().index(t)})}},insertAtContainment:function(t,e){var n=function(t){return t&&t.length};if(e=e||this.menuOrgContainment||{},n(t)&&n(e.parent)){var i=e.index,a=e.parent,s=a.children().length;i<0&&(i=Math.max(0,s+1+i)),i<s?a.children().eq(i).before(t):a.append(t)}},addMarkup:function(){var t,e,i;if(!this.menu||!this.menu.length)switch(n(this.settings.menu)){case"string":t=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),i=this.menu.data("trigger")[0].id,e=this.menu.clone(),this.setMenuOrgContainment(e),e.detach().appendTo("body"),e.attr("data-trigger",i),this.menu.attr("data-trigger",i));break;case"object":this.menu=null===this.settings.menu?this.element.next(".popupmenu, .popupmenu-wrapper"):$(this.settings.menu),(t=this.menu.attr("id"))&&""!==t||(this.menu.attr("id","popupmenu-".concat(this.id)),t=this.menu.attr("id"))}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu"),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each((function(){$(this).data("icon")||$(this).icon()})),0===this.wrapper.parents().filter((function(){var t=this?this.style.overflow:null;return"auto"!==t&&"visible"!==t&&"scroll"!==t})).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each((function(t,e){var n=$(e);n.parent().hasClass("wrapper")||n.wrap('<div class="wrapper"></div>')}));var a=!1,s=this.element.parent().attr("class");if(!0===this.settings.showArrow)a=!1;else if(null===this.settings.showArrow){var r=this.element.closest(".toolbar"),o=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||r.length>0&&!r.is(".formatter-toolbar")||o.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||s&&s.indexOf("more")>=0||s&&s.indexOf("btn-group")>=0)&&(a=!0)}if(a){var l=$('<div class="arrow"></div>'),c=this.menu.parent(".popupmenu-wrapper");0===c.find(".arrow").length&&c.addClass("bottom").append(l)}var d=this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0;if(this.menu[d?"addClass":"removeClass"]("popupmenu-short"),void 0!==s&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",t),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem){var h=window.getComputedStyle(this.element[0]),u=0;h&&h.getPropertyValue("padding-left")&&(u=parseInt(h.getPropertyValue("padding-left"),10)+parseInt(h.getPropertyValue("padding-right"),10)),this.element.width(parseInt(this.getMaxMenuWidth(),10)-u)}}},renderItem:function(t){if(void 0===t)return"";var e=this;function n(t){var n="";return t.forEach((function(t){n+=e.renderItem(t)})),n}if(Array.isArray(t)){var i=n(t),a='<ul class="popupmenu">'.concat(i,"</ul>");return k.stripWhitespace(a)}var s="",r="";if(void 0!==t.separator)return t.heading&&(s+='<li class="heading">'.concat(t.heading,"</li>")),"single"===t.nextSectionSelect?r=" single-selectable-section":"multiple"===t.nextSectionSelect&&(r=" multi-selectable-section"),k.stripWhitespace('\n        <li class="separator'.concat(r,'"></li>\n        ').concat(s,"\n      "));if(t.menu){var o="";t.menuId&&(o=' id="'.concat(t.menuId,'"'));var l="";t.hasIcons&&(l+=" has-icons");var c="";return Array.isArray(t.menu)&&(c=n(t.menu)),t.noMenuWrap?c:k.stripWhitespace("\n        <ul".concat(o,' class="popupmenu').concat(l,'">\n          ').concat(c,"\n        </ul>\n      "))}var d="",h="",u="",p="",f="",g="",m="",v="";return t.disabled&&(d+=" is-disabled"),!1===t.visible&&(h+=" hidden"),t.id&&(p=' id="'.concat(t.id,'"')),"single"===t.selectable&&(f+=" is-selectable"),"multiple"===t.selectable&&(f+=" is-multiselectable"),t.icon&&(u='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(t.icon,'"></use>\n      </svg>')),Array.isArray(t.submenu)&&(g+=" submenu",m+=this.renderItem(t.submenu),v+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),k.stripWhitespace('<li class="popupmenu-item'.concat(d).concat(h).concat(f).concat(g,'">\n      <a').concat(p,' href="#">').concat(u,"<span>").concat(t.text,"</span>\n        ").concat(v,"\n      </a>\n      ").concat(m,"\n    </li>"))},toData:function(t){var e={},n=[],i=this;(t=t||{}).contextElement||(t.contextElement=this.menu),t.contextElement instanceof HTMLElement&&(t.contextElement=$(t.contextElement)),t.contextElement.is(".popupmenu-wrapper")&&(t.contextElement=t.contextElement.children("ul"));var a=t.contextElement.attr("id");a&&a.length&&(e.menuId="".concat(a));var s,r,o=t.contextElement.hasClass("has-icons");return e.hasIcons=o,t.contextElement.children("li").each((function(t,a){var o=function t(n){var a=$(n),o={};if(!a.hasClass("heading")){if(a.hasClass("separator")){o.separator=!0,a.hasClass("single-selectable-section")&&(s=!0,o.nextSectionSelect="single"),a.hasClass("multi-selectable-section")&&(r=!0,o.nextSectionSelect="multiple");var l=a.next();return l.hasClass("heading")&&(o.heading=l.text().trim()),o}var c=a.children("a"),d=c.children(".icon:not(.close):not(.icon-dropdown)"),h=c.attr("id");o.text=c.text().trim(),o.disabled=a.hasClass("is-disabled"),o.visible=!a.hasClass("hidden"),"string"==typeof h&&h.length&&(o.id=h),d.length&&d[0]instanceof SVGElement&&(o.icon=d[0].querySelector("use").getAttribute("href").replace("#icon-",""));var u=!s&&!r,p=!i.hasSelectableSeparator(a);o.selectable&&u&&p&&("single"===o.selectable?s=!0:"multiple"===o.selectable&&(r=!0),e.selectable=o.selectable);var f=a.find(".popupmenu");return f.length&&(o.submenu=[],f.first().children().each((function(e,n){var i=t(n);i&&o.submenu.push(i)}))),o}}(a);o&&n.push(o)})),t.noMenuWrap?e=n:e.menu=n,e},markupItems:function(t){var e=this;t?t instanceof HTMLElement&&(t=$(t)):t=this.menu;var n=t.find("li:not(.heading):not(.separator)"),i=!1;t[0].setAttribute("role","menu"),n.each((function(t,n){var a=$(n).children("a")[0],s=$(a).children("span")[0],r=$(n).children("ul")[0],o=$(n).find(".icon:not(.close):not(.icon-dropdown)"),c=$(n).children(".wrapper")[0];if(n.setAttribute("role",e.settings.ariaListbox?"option":"menuitem"),a){a.setAttribute("tabindex","-1");var d=$(a),h=$(n);if(h.hasClass("is-disabled")||"true"===a.getAttribute("disabled")||"disabled"===a.getAttribute("disabled")?(h.addClass("is-disabled"),a.setAttribute("aria-disabled","true"),a.setAttribute("disabled",!0)):(h.removeClass("is-disabled"),d.removeAttr("aria-disabled"),a.removeAttribute("disabled")),r instanceof HTMLElement&&r.classList.add("popupmenu"),c instanceof HTMLElement&&(n.className+="".concat(l.classNameExists(n)?" ":"","submenu"),(r=$(c).children("ul")[0])instanceof HTMLElement&&r.classList.add("popupmenu")),l.hasClass(n,"submenu")&&(s||(a.innerHTML="<span>".concat(a.innerHTML,"</span>"),s=d.children("span")[0]),0===d.find("svg.arrow").length&&d.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),a.setAttribute("aria-haspopup","true")),l.hasClass(n,"is-checked")&&(a.setAttribute("role","menuitemcheckbox"),a.setAttribute("aria-checked",!0),!e.hasSelectableSeparator(n))){var u="is-selectable";e.menu.is(".is-multiselectable")&&(u="is-multiselectable"),e.getAdjacentSelectables(n).addClass(u)}l.hasClass(n,"is-not-checked")&&(n.className=n.className.replace("is-not-checked",""),a.setAttribute("role","menuitemcheckbox"),a.removeAttribute("aria-checked"))}o&&o.length>0&&(i=!0)})),i?t.addClass("has-icons"):t.removeClass("has-icons")},refreshMenuItem:function(t,e,n){if(t&&t instanceof HTMLElement&&e&&$(this.menu)[0].contains(t)){var i,a=t.querySelector("a"),s=t.querySelector(".icon:not(.close):not(.icon-dropdown)");if(e.text&&a.innerText.trim()!==e.text&&(a.innerText="".concat(e.text)),!0===e.disabled?-1===t.className.indexOf("hidden")&&t.classList.add("is-disabled"):t.className.indexOf("is-disabled")>-1&&t.classList.remove("is-disabled"),!0===e.visible?t.className.indexOf("hidden")>-1&&t.classList.remove("hidden"):-1===t.className.indexOf("hidden")&&t.classList.add("visible"),e.icon?s&&((i=s.querySelector("use"))&&i.getAttribute("href").replace("#icon-","")!==e.icon&&s.remove(),i.setAttribute("href","#icon-".concat(e.icon))):s&&s.remove(),e.submenu){t.classList.add("submenu");var r=t.querySelector(".popupmenu");if(r)for(var o=r.children,l=0;l<e.submenu.length;l++)e.submenu[l].isSubmenuItem=!0,this.refreshMenuItem(o.item(l),e.submenu[l],n)}"function"==typeof n&&n.apply(this,[t,e])}},handleEvents:function(){var t=this,e="rightClick"!==this.settings.trigger;function n(t){return t.stopPropagation(),t.preventDefault(),!1}function i(e,n){t.keydownThenClick?delete t.keydownThenClick:e.button>(!0===n?0:2)||t.element.is(":disabled")||(["android","ios"].indexOf(u.os.name)>-1&&(t.holdingDownClick=!0),function(e){if(t.element.hasClass("is-disabled"))return e.stopPropagation(),void e.preventDefault();var n="rightClick"===t.settings.trigger;if(e.stopPropagation(),e.preventDefault(),n&&t.menu.hasClass("is-open"))return t.close(),void t.open(e);t.menu.add(t.element).hasClass("is-open")?t.close():t.open(e)}(e))}"immediate"===this.settings.trigger||(e&&this.element.on("click.popupmenu",(function(t){i(t,!0)})),e)||(this.menu.parent().on("contextmenu.popupmenu",n),-1===["android","ios"].indexOf(u.os.name)?this.element.on("contextmenu.popupmenu",(function(t){n(t),i(t)})):this.element.on("touchstart.popupmenu",(function(t){"ios"===u.os.name&&"INPUT"!==t.target.tagName&&t.preventDefault(),$(t.target).addClass("longpress-target")})).on("touchend.popupmenu",(function(t){$(t.target).removeClass("longpress-target")})).on("longpress.popupmenu",(function(e,n){t.openedWithTouch=!0,i(n)}))),this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",(function(){return!1})),this.element.not(".autocomplete, ul").on("keydown.popupmenu",(function(e){switch(e.which){case 13:case 32:"click"===t.settings.trigger&&(t.keydownThenClick=!0,t.open(e));break;case 121:e.shiftKey&&t.open(e)}})).on("updated.popupmenu",(function(e,n){e.stopPropagation(),t.updated(n)}))},handleKeys:function(){var t=this;this.menu.on("click.popupmenu","li",(function(e){var n=$(this).find("a");t.handleItemClick(e,n)}));var e="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",(function(){t.highlight($(this).children("a"))})),setTimeout((function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),(function(n){var i=n.which;if(27===i)return n.stopPropagation(),n.stopImmediatePropagation(),t.close(!0),!1;if(9===i&&(n.stopPropagation(),t.close(!0)),32===i){n.stopPropagation();var a=$(n.target),s=a.find("input:checkbox");if(s.length)return s.trigger("click"),!0;var r=$();if(a.is(".tab")||a.parent().is(".tab")||a.is(".tab-more"))return n.preventDefault(),!0;if(a.is("li")&&(r=a.children("a")),a.is("a")&&(r=a),r.length)return r.trigger("click"),!0}var o=t.menu.find(":focus");o[0]||(o=$(t.menu[0].querySelector(".is-focused a")));var l,c,d,h,u="colorpicker-menu"===t.settings.menu,p=t.element.is(".autocomplete");37!==i||p||(n.stopPropagation(),n.preventDefault(),o.closest(".popupmenu")[0]!==t.menu[0]&&o.closest(".popupmenu").length>0&&(o.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),t.highlight(o.closest(".popupmenu").parent().prev("a")))),l=function(t){var n;return t.parent().prevAll(e).each((function(){if(!n){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(n=e)}})),n||h(t)},h=function(t){var n=t.parent().prevAll(e).last(),i=n.children("a");return n.is(".is-disabled")||!0===i.prop("disabled")?c(i):i},c=function(t){var n;return t.parent().nextAll(e).each((function(){if(!n){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(n=e)}})),n||h(t)},d=function(t){var n=t.parent().nextAll(e).last(),i=n.children("a");return n.is(".is-disabled")||!0===i.prop("disabled")?l(i):i};for(var f=0,g=t.menu.children(e),m=g.length,v=0,b=0;b<m;b++){var y=g[b];if(0===v&&(v=y.offsetTop),y.offsetTop!==v)break;f++}if(!u&&38===i||u&&i===(D.isRTL()?39:37)){if(n.stopPropagation(),n.preventDefault(),0===o.parent().prevAll(e).length)return void t.highlight(0===o.length?t.menu.children(e).last().find("a"):d(o));t.highlight(l(o))}if(u&&38===i&&(n.stopPropagation(),n.preventDefault(),o.parent().prevAll(e).length>0&&t.highlight($(o.parent().prevAll(e)[f-1]).find("a"))),39!==i||p||(n.stopPropagation(),n.preventDefault(),o.parent().hasClass("submenu")&&(t.openSubmenu(o.parent()),t.highlight(o.parent().find(".popupmenu a:first")))),!u&&40===i||u&&i===(D.isRTL()?37:39)&&!p){if(n.stopPropagation(),n.preventDefault(),0===o.parent().nextAll(e).length)return void t.highlight(0===o.length?t.menu.children(e).first().find("a"):h(o));t.highlight(c(o))}if(u&&40===i&&(n.stopPropagation(),n.preventDefault(),o.parent().nextAll(e).length>0&&t.highlight($(o.parent().nextAll(e)[f-1]).find("a"))),t.isFirefox&&p&&!/37|39|38|40/.test(i)){t.element.triggerHandler(n),t.element[0].focus();var w=t.element[0].value;t.element[0].value="",t.element[0].value=w}}))}),1)},handleItemClick:function(t,e){var n=e.attr("href"),i=[e];return!(!t&&!e||!e.length||(e.parent().is(".submenu, .hidden, .is-disabled")||e[0].disabled?(t.preventDefault(),1):e.find("input[checkbox]").length>0||(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(e),t.preventDefault()),this.isSelectable(e.parent())&&(i=this.select(e)),e.parent().hasClass("is-toggleable")&&e.parent().toggleClass("is-checked"),t&&this.settings.triggerSelect&&(1===i.length&&i.push(void 0),i.push(!0),this.element.triggerHandler("selected",i)),!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(e)&&(this.close(),!this.element.is(".autocomplete")&&(n&&"#"!==n.charAt(0)?("_blank"===e.attr("target")?window.open(n,"_blank"):window.location.href=n,0):(t&&(t.preventDefault(),t.stopPropagation()),0))))))},iconFilteringSetup:function(t){if(this.element.hasClass("btn-filter")){var e=this.element.find("svg.icon-dropdown"),n=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=n.find("span").text();1===e.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),e.first().changeIcon(n.find("svg").getIconName()),this.element.find(".audible").text(i)}},iconFilteringUpdate:function(t){if(this.element.hasClass("btn-filter")){var e=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=e.find("span").text();this.element.find(".audible").text(n),this.element.find("svg:not(.ripple-effect):first").changeIcon(e.find("svg").getIconName())}},getPositionFromEvent:function(t){var e=0,n=0;if(t||(t=window.event),!t)return{};if(t.changedTouches){var i=t.changedTouches[0];e=i.pageX,n=i.pageY}else t.pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:e,y:n}},position:function(t){var e=this,n=this.element,i=this.isRTL(),a=this.menu.parent(".popupmenu-wrapper"),s=this.getPositionFromEvent(t),r=this.menu[0].offsetWidth;if(a.length){var o=this.element[0].offsetWidth;"click"===this.settings.trigger&&o>r&&this.menu.width(o),n.is("svg, .icon")&&n.closest(".tab").length&&(n=n.closest(".tab")),a.find(".arrow").removeAttr("style");var l=$.extend({},this.settings.placementOpts),c=["flip"];c.push("shrink-y"),l.strategies=c,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(l.x=m(0,"x")-(i?r:0)+(i?-1:1)*this.settings.offset.x,l.y=m(0,"y")+this.settings.offset.y,0===l.x&&0===l.y&&(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.parentXAlignment=i?"right":"left")):(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.strategies.push("nudge"));var d=n.parents(".toolbar"),h=d.length>0,u=n.parents(".title").length>0,p=h&&d.children(".buttonset, .title").length>1,f=n.parents(".pager-pagesize").length>0;n.is(".btn-menu")?f?b():h&&p?u?v():b():v():n.is(".btn-actions")||n.is(".tab-more")?b():n.is(".btn-split-menu, .tab, .searchfield-category-button")&&!n.parent(".pager-pagesize").length&&v(),n.parents(".masthead").length>0&&(l.y+=15);var g=this.element.parents(".page-container:not(.tab-container)");g.length&&(l.container=g.first()),a.one("afterplace.popupmenu",(function(t,n){e.handleAfterPlace(t,n)})),this.wrapperPlace=new ot(a,l),this.wrapperPlace.place(l)}function m(t,e){return s[e="x"===e||"y"===e?e:"x"]}function v(){l.parentXAlignment=i?"right":"left"}function b(){l.parentXAlignment=i?"left":"right"}},handleAfterPlace:function(t,e){var n=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(t,e,n),e.height&&(n[0].style.height="",this.menu[0].style.height=e.height+(/(px|%)/i.test("".concat(e.height))?"":"px")),e.width&&(n[0].style.width="",this.menu[0].style.width=e.width+(/(px|%)/i.test("".concat(e.width))?"":"px")),n.triggerHandler("popupmenuafterplace",[e]),e},callSource:function(t,e,n,i){if("function"==typeof this.settings.beforeOpen){var a=this,s=this.menu;if(!(l.isElement(n)&&$(n).is(".popupmenu, .submenu")&&(s=$(n),n.hasClass("is-open")))){var r=function(n){if(s.children().filter((function(t,e){return-1===a.predefinedItems.index(e)})).off().remove(),!1===n)return!1;var i=$(n);s.append(i);var r=s.parent(".wrapper, .popupmenu-wrapper");return r.length||(r=s.wrap('<div class="wrapper">').parent()),r.removeAttr("style"),a.markupItems(s),e&&(s.is(a.menu)?a.open(t,!0):a.openSubmenu(r.parent("li"),!0)),!0},o={};s.is(this.menu)||(o.contextElement=s),o.element=this.element,o.isSubmenu=i,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(r,o):window[this.settings.beforeOpen](r,o)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var t=!this.isOpen;t&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var e=this.menu.width();return t&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),e},open:function(t,e,n){var i=this;if(this.menu&&this.menu.length&&(this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu]))&&(e||(this.callSource(t,!0),!this.settings.beforeOpen)))if(n||"ios"!==u.os.name){$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).not(this.menu).each((function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}}));var a=this.element.data("tooltip");a&&a.visible&&a.hide();var s=$(".dropdown.is-open");if(s.length>0){var r=s.parent().prev().data("dropdown");r&&r.closeList("cancel")}var o=document.querySelector(".application-menu.is-open");o instanceof HTMLElement&&!o.contains(this.element[0])&&!o.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(t),b.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each((function(){var t=$(this),e=t.parent();e.hasClass("is-disabled")?(e.addClass("is-disabled"),t.attr("aria-disabled","true"),t.attr("disabled","disabled")):(e.removeClass("is-disabled"),t.removeAttr("aria-disabled"),t.removeAttr("disabled"))})),setTimeout((function(){$(document).on("touchend.popupmenu.".concat(i.id," click.popupmenu.").concat(i.id),(function(t){var e="colorpicker-menu"===i.settings.menu;2!==t.button&&(i.holdingDownClick?delete i.holdingDownClick:$(t.target).is(i.element)&&!e&&"rightClick"!==i.settings.trigger||(0===$(t.target).closest(".popupmenu").length&&i.close(!0,"rightClick"===i.settings.trigger),$(t.target).hasClass("colorpicker")&&i.close()))})),void 0===window.orientation&&$("body").on("resize.popupmenu",(function(){i.handleCloseEvent()})),$(window).on("scroll.popupmenu",(function(){i.close()})),$(".datagrid-wrapper").on("scroll.popupmenu",(function(){i.close()})),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",(function(){var t=i.isInViewport(i.element[0])?0:150;setTimeout((function(){i.close()}),t)})),i.element.triggerHandler("open",[i.menu])}),300),$("iframe").each((function(){var t=$(this);t.ready((function(){try{t.contents().find("body").on("click.popupmenu",(function(){i.close()}))}catch(e){}}))})),this.handleKeys();var l,c,d=0;i.menu.find(".popupmenu").removeClass("is-open"),i.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",(function(t){if(!$(t.target).hasClass("popupmenu")){var e=$(this);l=t.pageX,clearTimeout(i.submenuOpenTimeout),i.submenuOpenTimeout=setTimeout((function(){i.openSubmenu(e)}),300),$(document).on("mousemove.popupmenu.".concat(this.id),(function(t){d=t.pageX}))}})).on("mouseleave.popupmenu",".submenu",(function(){$(document).off("mousemove.popupmenu.".concat(this.id));var t=((c=$(this).find("ul")).parent(".wrapper").length>0?parseInt(c.parent(".wrapper")[0].style.left,10):0)<0,e=d-l<3.5;t&&(e=d-l>=0),e&&(c.removeClass("is-open").removeAttr("style"),c.parent(".wrapper").removeAttr("style"),c.parent().parent().removeClass("is-submenu-open"),c=null),clearTimeout(i.submenuOpenTimeout)})),i.settings.autoFocus&&setTimeout((function(){var t=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",e=i.menu.children(t).find(".is-selected").children("a");e.length||(e=i.menu.children(t).first().children("a")),i.highlight(e),i.element.triggerHandler("afteropen",[i.menu])}),1)}else setTimeout((function(){i.open(t,e,!0)}),400)},isInViewport:function(t){var e=t.getBoundingClientRect();return e.top>0&&e.left>0&&e.bottom<(window.innerHeight||document.documentElement.clientHeight)&&e.right<(window.innerWidth||document.documentElement.clientWidth)},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(t,e){if(!l.hasClass(t,"is-disabled")&&!t[0].disabled){var n=t.children(".wrapper, .popupmenu");n.length&&n.is(".wrapper")&&(n=n.children(".popupmenu"));var i=this.element.triggerHandler("beforeopen",[n]);!1!==i&&(!e&&(i=this.callSource(null,!0,n,!0),this.settings.beforeOpen)||this.showSubmenu(t))}},showSubmenu:function(t){this.element.triggerHandler("show-submenu",[t]);var e=t.children(".wrapper").filter(":first"),n=this.isRTL();if(0===e.length){var i=t.children("ul").filter(":first");i.wrap('<div class="wrapper"></div>'),e=i.parent()}var a,s=e.children(".popupmenu"),r=t.position().left+t.outerWidth();t.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),e.children(".popupmenu").addClass("is-open"),a=e.outerWidth(),n&&(r=t.position().left-a),e[0].style.left="".concat(r,"px"),e[0].style.top="".concat(parseInt(t.position().top,10)-5,"px");var o=s.outerWidth();if((e.offset().left+o>$(window).width()+$(document).scrollLeft()||n&&e.offset().left<0)&&(e[0].style.left="-9999px",o=s.outerWidth(),r=t.position().left-o,n&&(r=e.closest(".popupmenu").outerWidth()-4),e[0].style.left="".concat(r,"px"),(e.offset().left<0||n&&e.offset().left+o>$(window).width()+$(document).scrollLeft())&&(r=t.position().left-o+Math.abs(e.offset().left)+40,n&&(r=t.position().left-o-30),e[0].style.left="".concat(r,"px"),o=s.outerWidth()),e.offset().left+o>$(window).width()+$(document).scrollLeft()||n&&e.offset().left<0)){var l=e.offset().left+o-($(window).width()+$(document).scrollLeft());s[0].style.width="".concat(o-=l,"px")}var c=s.outerHeight(),d=this.settings.placementOpts.containerOffsetY;if(e.offset().top+c>window.innerHeight-d+$(document).scrollTop()){var h=e.offset().top+c-(window.innerHeight+$(document).scrollTop());if(e[0].style.top="".concat(e.position().top-h-d,"px"),e.offset().top+c>window.innerHeight+$(document).scrollTop()){var u=t.parents(".popupmenu-wrapper:first").offset().top;e[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-c-u,"px")}if(e.offset().top-$(document).scrollTop()<0&&(e[0].style.top=0,e[0].style.top="".concat(-1*e.offset().top,"px"),c=s.outerHeight()),e.offset().top+c>window.innerHeight+$(document).scrollTop()){var p=e.offset().top+c-(window.innerHeight+$(document).scrollTop());s[0].style.height="".concat(c=c-p-32,"px")}}t.parent().find(".is-submenu-open").removeClass("is-submenu-open"),t.addClass("is-submenu-open")},highlight:function(t){if(t&&t.length){var e=t.parent();e.parent().children("li").removeClass("is-focused"),e.addClass("is-focused"),t&&t.focus(),e.closest(".header").scrollTop(0)}},select:function(t){var e=this.menu.is(".is-selectable"),n=this.menu.is(".is-multiselectable"),i=this.isInSingleSelectSection(t),a=this.isInMultiselectSection(t),s=t.parent(),r=[t];return s.hasClass("is-selectable")||e||i?(s.prevUntil(".heading, .separator").add(s.nextUntil(".heading, .separator")).removeClass("is-checked"),s.addClass("is-checked"),r.push("selected"),r):s.hasClass("is-multiselectable")||n||a?s.hasClass("is-checked")?(s.removeClass("is-checked"),r.push("deselected"),r):(s.addClass("is-checked"),r.push("selected"),r):r},getSelected:function(){return this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(t){return $(t).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(t)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(t){return $(t).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(t){var e=this.getSelectableSeparator(t);return e&&e.length},getAdjacentSelectables:function(t){var e=this.getSelectableSeparator(t),n=":not(.heading):not(.separator):not(.submenu)";return e&&e.length?$(e).nextUntil(".separator").filter(n):$(t).parent().children("li".concat(n))},isInSelectableSection:function(t){M("hasSelectableSeparator()","isInSelectableSection()");var e=t.parent().prevAll().filter(".separator").first();return e.hasClass("multi-selectable-section")||e.hasClass("single-selectable-section")},isInSingleSelectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu"),$("iframe").each((function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch(e){}}))},close:function(t,e){if(t&&void 0!==t||(t=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var n=this.menu.parent(".popupmenu-wrapper"),i=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),n[0]&&(n[0].style.left="-999px",n[0].style.height="",n[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),i[0]&&(i[0].style.left="",i[0].style.top="",i[0].style.height="",i[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[t]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch,e||!this.settings.returnFocus||u.features.touch||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){var t=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var e=this.menu.parent();e.find(".arrow").remove(),e.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&e.removeClass("bottom"),this.menu.off("dragstart.popupmenu"),!this.preExistingWrapper&&this.menu.parent().is(".popupmenu-wrapper")&&this.menu.unwrap();var n=this.element.parent().children(".searchfield");return n.length?this.menu.insertAfter(n.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each((function(t,e){var n=$(e).find("span").text()||$(e).text();$(e).find("span, svg").remove(),$(e).text(n)})),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each((function(){var t;(t=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&t.unwrap()})),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),t.off().remove(),this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(t){return this.settings=b.mergeSettings(this.element[0],t,this.settings),this.teardown().init()},destroy:function(){this.menu&&(this.close(),this.teardown(),this.menu.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(t){return this.each((function(){var e=$.data(this,"popupmenu");e?e.updated(t):e=$.data(this,"popupmenu",new Mt(this,t))}))};var Lt={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function Pt(t,e){this.settings=b.mergeSettings(t,e,Lt),this.element=$(t),this.init()}Pt.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==t?t.toString():this.settings.appName;var e=this.element.attr("data-about-content");this.settings.content=void 0!==e?e.toString():this.settings.content;var n=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==n?n.toString():this.settings.copyrightYear;var i=this.element.attr("data-device-specs");i&&(this.settings.deviceSpecs="true"===i);var a=this.element.attr("data-product-name");this.settings.productName=void 0!==a?a.toString():this.settings.productName;var s=this.element.attr("data-use-default");void 0!==s&&(this.settings.useDefaultCopyright="true"===s);var r=this.element.attr("data-version");return this.settings.version=void 0!==r?r.toString():this.settings.version,this.defaultCopyright="".concat(D.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var t=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(D.translate("Close"),"'</span>"))).appendTo(t),$.createIconElement({icon:"logo-trademark",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(t),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var e=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var n=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(n).appendTo(e)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(e),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(e),this.settings.deviceSpecs){var i=this.getDeviceSpecs(),a='<span class="ds">'.concat(D.translate("OperatingSystem")," : ").concat(u.devicespecs.os.replace(u.devicespecs.currentOSVersion,"")," ").concat(u.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(D.translate("Platform")," : ").concat(i.os,'</span><br>\n        <span class="ds">').concat(D.translate("Mobile")," : ").concat(u.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(D.translate("Locale")," : ").concat(D.currentLocale.name,'</span><br>\n        <span class="locale">').concat(D.translate("Language")," : ").concat(D.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(D.translate("Browser")," :"," ".concat(u.devicespecs.browserVersionName)," ").concat(u.devicespecs.currentBrowser," (").concat(u.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(D.translate("BrowserLanguage")," : ").concat(i.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(D.translate("CookiesEnabled")," : ").concat(i.cookiesEnabled,'</span><br>\n        <span class="version">').concat(D.translate("Version")," : ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p></p>").html(a).appendTo(e)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",(function(){$(this).removeClass("hide-focus")})),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click"}),this},getDeviceSpecs:function(){var t,e,n,i="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(t=navigator.userAgent,e=[],n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE '".concat(e[1])):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:i}},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this},close:function(){var t=this.modal.data("modal");t&&t.close(),this.isBody&&this.destroy()},destroy:function(){var t=this.modal.data("modal");t&&(t.element.off("beforeopen.about"),t.destroy()),this.buttons.off(),this.element.off("open.about"),this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function(){var t=this;return this.element.on("open.about",(function(e){e.stopPropagation(),t.element.trigger("click")})),this.buttons.filter('[name="done"], [name="close"]').on("click.about",(function(){t.close()})),this.modal.data("modal").element.on("beforeopen.about",(function(){t.modal.find(".modal-body").scrollTop(0)})),$(document).on("keydown.about",(function(e){0!==e.which&&27!==e.which||t.close()})),this}},$.fn.about=function(t){return this.each((function(){var e=$.data(this,"about");e?e.updated(t):e=$.data(this,"about",new Pt(this,t))}))};var Nt={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(t){var e=$.fn.transitionEndName();return t=b.mergeSettings(void 0,t,Nt),this.each((function(){var n,i=this,a=$(this),s="horizontal"===t.direction?"width":"height",r=s.charAt(0).toUpperCase()+s.slice(1),o=isNaN(t.distance)?"auto":"".concat(parseInt(t.distance,10),"px");function l(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(e,".animateopen")),i.style.transition="",i.style[s]=o,a.trigger("animateopencomplete")}a.one("animateopenstart.animation",(function(t){t.stopPropagation(),a.off("".concat(e,".animateopen"))})),a.trigger("animateopenstart"),e&&a.one("".concat(e,".animateopen"),l),a.data("is-animating",!0);var c=this.style[s];this.style[s]=o;var d=getComputedStyle(this)[s];this.style[s]=c,"offset".concat(r),this.style.transition="".concat(s," ").concat(t.timing,"ms ").concat(t.transition),n=setTimeout(l,t.timing),this.style[s]=d,(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&l()}))};var _t={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(t){var e=$.fn.transitionEndName();return t=b.mergeSettings(void 0,t,_t),this.each((function(){var n,i=this,a=$(this),s="horizontal"===t.direction?"width":"height",r=s.charAt(0).toUpperCase()+s.slice(1);function o(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(e,".animatedclosed")),i.style.transition="",i.style[s]="0px",a.trigger("animateclosedcomplete")}a.one("animateclosedstart",(function(t){t.stopPropagation(),a.off("".concat(e,".animatedclosed"))})),a.trigger("animateclosedstart"),e&&a.one("".concat(e,".animatedclosed"),o),a.data("is-animating",!0),this.style[s]=getComputedStyle(this)[s],"offset".concat(r),this.style.transition="".concat(s," ").concat(t.timing,"ms ").concat(t.transition),n=setTimeout(o,t.timing),this.style[s]="0px",(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&o()}))},$.fn.isAnimating=function(){return this.each((function(){return!0===$(this).data("is-animating")}))};var Rt=["classic","plus-minus","chevron"],Bt={allowOnePane:!0,expanderDisplay:Rt[0],enableTooltips:!0,rerouteOnLinkClick:!0,source:null};function Ot(t){return void 0!==t.displayChevron&&(M("expanderDisplay setting","displayChevron setting"),t.expanderDisplay=!1===t.displayChevron?Rt[1]:Rt[0],delete t.displayChevron),t}function Ft(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Bt),this.settings=Ot(this.settings),this.init()}Ft.prototype={init:function(t){this.build(t).handleEvents(t).setupTooltips()},build:function(t,e){var n,i,a,s=this,r=this,o=!0;t&&t instanceof jQuery?(n=t.children("a"),a=(i=t.next(".accordion-pane")).children(".accordion-content"),o=!1,this.headers=this.headers.add(t),this.anchors=this.anchors.add(n),this.panes=this.panes.add(i),this.contentAreas=this.contentAreas.add(a)):(this.headers=this.element.find(".accordion-header"),t=this.element.find(".accordion-header"),this.anchors=t.children("a"),n=this.anchors,this.panes=t.next(".accordion-pane"),this.contentAreas=(i=this.panes).children(".accordion-content"),a=this.contentAreas);var l=!1;if(t.each((function(){var t=$(this),e=!1,n=t.parent(),i=n.is(".accordion");function a(){i||(e?n.addClass("has-icons"):t.addClass("no-icon"))}t.hideFocus(),t.children("a").find("svg").detach().insertBefore(t.children("a"));var s=t.children(".icon, svg");if(s.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),i&&s.length&&(l=!0),(t.is(".list-item")||!i&&t.find("button").length||!i&&t.find("svg").length)&&(e=!0),t.hasClass("is-disabled")&&t.children("a, button").attr("tabindex","-1"),t.next(".accordion-pane").length){e=!0;var o=t.children(".btn");if(!o.length){o=$('<button class="btn" type="button"></button>');var c="insertBefore";"plus-minus"!==r.settings.expanderDisplay&&i&&(t.addClass("has-chevron"),c="insertAfter"),o[c](t.children("a")),t.data("addedExpander",o)}o.hideFocus(),s.length&&"plus-minus"===r.settings.expanderDisplay&&s.appendTo(o);var d=o.children(".icon, .svg, .plus-minus");if(!d.length){if("classic"===r.settings.expanderDisplay&&i||"chevron"===r.settings.expanderDisplay)d=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var h=r.isExpanded(t)?" active":"";d=$('<span class="icon plus-minus'.concat(h,'" aria-hidden="true" role="presentation"></span>'))}d.appendTo(o)}var u={role:"presentation","aria-hidden":"true"};d.is("span")||(u.focusable="false"),d.attr(u),d.is(".chevron")&&i?(t.addClass("has-chevron"),o.insertAfter(t.children("a"))):(t.removeClass("has-chevron"),o.insertBefore(t.children("a"))),"plus-minus"===r.settings.expanderDisplay&&i&&(l=!0),a();var p=o.children(".audible");p.length||(p=$('<span class="audible"></span>').appendTo(o)),p.text(D.translate("Expand"))}else a()})),l&&this.element.addClass("has-icons"),o&&!this.element.data("updating")){var c=t.filter(".is-selected, .is-expanded");c.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(c=c.first(),this.expand(c)):c.each((function(t){s.expand($(c[t]))})),this.select(c.last()),c.next(".accordion-pane").removeClass("no-transition")}return i.each((function(){var t=$(this),n=t.prev(".accordion-header");n.children("a").attr({"aria-haspopup":"true",role:"button"});var i=t.children(),a=!0;if(i.each((function(t,e){$(e).is(".accordion-header, .accordion-content")&&!$(e).hasClass("filtered")&&(a=!1)})),t[a?"addClass":"removeClass"]("all-children-filtered"),a&&(t.data("ignore-animation-once",!0),r.collapse(n,!1)),!e){var s="0px";r.isExpanded(n)&&(s="auto"),t.attr("style","height: ".concat(s))}})),e||(this.currentlyFiltered=$()),this},handleHeaderClick:function(t,e){if(!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||e.data("is-animating"))t.preventDefault();else{if(!$(t.target).is('[class^="btn"]')){var n=e.children("a");return this.handleAnchorClick(t,n)}t.preventDefault()}},handleAnchorClick:function(t,e){var n,i=e.parent(".accordion-header"),a=i.next(".accordion-pane"),s=e.attr("ng-reflect-href");return t&&!s&&t.preventDefault(),!(!i.length||this.isDisabled(i)||this.isFiltered(i))&&(!1!==this.element.triggerHandler("beforeselect",[e])?(this.originalSelection=e,this.select(e),this.closePopups(t),!(n=e.attr("href"))||""===n||"#"===n||this.settings.rerouteOnLinkClick&&(window.location.href=n,0)?a.length?(this.toggle(i),this.focusOriginalType(i),!0):(this.isControllingDetails?a.length||this.element.trigger("drilldown",[i[0]]):(this.orignalSelection=e,this.focusOriginalType(i)),this.element.trigger("selected",i),!0):(this.element.trigger("followlink",[e]),!0)):void 0)},closePopups:function(t){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each((function(){return $(this).data("popupmenu").close(),void 0!==t&&(t.stopPropagation(),t.stopImmediatePropagation()),!1}))},handleExpanderClick:function(t,e){var n=e.parent(".accordion-header");if(n.length&&!this.isDisabled(n)&&!this.isFiltered(n)&&!n.data("is-animating"))return this.originalSelection=e,t&&t.stopPropagation(),this.closePopups(),n.next(".accordion-pane").length?(this.toggle(n),this.select(n),void this.focusOriginalType(n)):this.handleAnchorClick(t,n.children("a"))},handleKeys:function(t){var e=this,n=t.which,i=$(t.target),a=i.parent(),s=a.children('[class^="btn"]').first(),r=a.children("a");function o(t){t||(t=i),e.originalSelection||(e.originalSelection=t)}if(9===n&&(this.headers.removeClass("is-selected"),i.is("a")&&s.length?o(s):o(r)),32===n){if(t.preventDefault(),i.is('[class^="btn"]')&&(t.stopPropagation(),t.stopImmediatePropagation(),$("html").hasClass("is-firefox")))return;return s.length?(o(s),this.handleExpanderClick(null,i)):(o(r),this.handleAnchorClick(null,i))}return 37===n||38===n?(t.preventDefault(),o(),t.shiftKey?this.ascend(a):this.prevHeader(a)):39===n||40===n?(t.preventDefault(),o(),t.shiftKey?this.descend(a):this.nextHeader(a)):void 0},toData:function(t,e){var n=[];return this.element.children(".accordion-header").each((function(i,a){!function n(i,a,s,r){var o=$(i),l=$(i).next(".accordion-pane"),c=i.classList.contains("accordion-content"),d={index:"".concat(void 0!==s?"".concat(s,"."):"").concat(a),type:c?"content":"header"};e&&(d.element=i),i.getAttribute("id")&&(d.id=i.getAttribute("id")),c?(d.content="".concat(o.html()),d.contentText="".concat(o.text().trim().replace(/\n|\s{2,}/g," "))):d.text=o.children("a, span").text().trim();var h=o.children(".icon");if(h.length&&(d.icon="svg"===h[0].tagName.toLowerCase()?h[0].getElementsByTagName("use")[0].getAttribute("href"):""),o.hasClass("is-disabled")&&(d.disabled=!0),l.length){var u=l.children(".accordion-header, .accordion-content"),p=[];if(u.length){var f=p;t&&(f=r),u.each((function(t,e){n(e,t,d.index,f)})),d.children=p}}r.push(d)}(a,i,void 0,n)})),n},select:function(t){if(t&&t.length){var e=t,n=e.parent();t.is(".accordion-header")&&(e=(n=t).children("a")),e.is('[class^="btn"]')&&(e=t.next("a")),this.isDisabled(n)||this.isFiltered(n)||(this.headers.removeClass("child-selected").removeClass("is-selected"),n.addClass("is-selected"),n.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected"))}},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(t){return!!this.element.hasClass("is-disabled")||!!t&&t.hasClass("is-disabled")},isFiltered:function(t){if(!t||!t.length)return!1;var e=t[0].classList;return e.contains("filtered")&&!e.contains("has-filtered-children")},isExpanded:function(t){if(t&&t instanceof Element&&(t=$(t)),t&&t.length)return"true"===t.children("a").attr("aria-expanded")},toggle:function(t){var e=this;!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||this.isAnimating||(this.isAnimating=!0,setTimeout((function(){e.isAnimating=!1}),500),this.isExpanded(t)?this.collapse(t):this.expand(t))},expand:function(t,e){if(t&&t.length){var n=this,i=t.next(".accordion-pane"),a=t.children("a"),s=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[a])?s.reject():(this.callSource(a,r)||r.apply(this),s)}function r(){if(!(i=t.next(".accordion-pane"))||!i.length)return s.reject();var r=t.children(".btn");r.length&&(r.children(".plus-minus, .chevron").addClass("active"),r.children(".audible").text(D.translate("Collapse")));var o=t.parentsUntil(n.element).filter(".accordion-pane").prev(".accordion-header").add(t),l=[];n.settings.allowOnePane&&!e&&n.headers.not(o).each((function(){var t=$(this);n.isExpanded(t)&&l.push(n.collapse(t))}));var c=[];function d(t){var e;t&&t.stopPropagation(),i.triggerHandler("afterexpand",[a]),n.element.trigger("afterexpand",[a]),(e=$).when.apply(e,c.concat(l)).done((function(){s.resolve()}))}o.not(t).each((function(){var t=$(this);n.isExpanded(t)||c.push(n.expand(t))})),t.add(i).addClass("is-expanded"),t.children("a").attr("aria-expanded","true"),n.element.trigger("expand",[a]),i.hasClass("no-transition")?d():i.one("animateopencomplete",d).animateOpen()}},expandAll:function(){var t;if(!0!==this.settings.allowOnePane){var e=this,n=$.Deferred(),i=[];return this.headers.each((function(){var t=$(this);e.isExpanded(t)||i.push(e.expand(t))})),(t=$).when.apply(t,i).always((function(){n.resolve()})),n}},collapse:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&t.length){var n=this,i=t.next(".accordion-pane"),a=t.children("a"),s=$.Deferred(),r=this.element.triggerHandler("beforecollapse",[a]);if(!1===r)return s.reject();var o=t.children(".btn");return o.length&&(o.children(".plus-minus, .chevron").removeClass("active"),o.children(".audible").text(D.translate("Expand"))),t.add(i).removeClass("is-expanded"),a.attr("aria-expanded","false"),e&&i.closeChildren(),n.element.trigger("collapse",[a]),i.hasClass("no-transition")?l():i.one("animateclosedcomplete",l).animateClosed(),s}function l(t){t&&t.stopPropagation(),i.triggerHandler("aftercollapse",[a]),n.element.trigger("aftercollapse",[a]),s.resolve()}},collapseAll:function(){var t,e=this,n=$.Deferred(),i=[];return this.headers.each((function(){var t=$(this);e.isExpanded(t)&&i.push(e.collapse(t))})),(t=$).when.apply(t,i).always((function(){n.resolve()})),n},callSource:function(t,e){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var n=this,i=t.parent(),a=i.next(".accordion-pane");return this.settings.source({anchor:t,header:i,pane:a},(function(){n.updated(),setTimeout((function(){e.apply(n)}),1)}))},getElements:function(t){var e,n,i,a,s=$(t);return s.is(".accordion-header")&&(e=s,i=s.children('[class^="btn"]'),n=s.children("a")),s.is(".btn")&&(n=(e=(i=s).parent()).children("a")),s.is("a")&&(i=(e=(n=s).parent()).children(".btn")),a=e.next(".accordion-pane"),{header:e,expander:i,anchor:n,pane:a}},prevHeader:function(t,e){var n=this.getElements(t),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get(o.ensureAlphaNumeric(a)-1));if(!i.length||0===a){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);s=i.last()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":first-child"))return this.ascend(n.header);s=s.prev()}if(s.is(".accordion-pane")){var r=s.prev(".accordion-header");if(this.isExpanded(r)&&r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r,-1);if(!(s=r).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);for(s=i.last();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.prev()}}this.focusOriginalType(s)},nextHeader:function(t,e){var n=this.getElements(t),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get(o.ensureAlphaNumeric(a)+1));if(!i.length||a===i.length-1){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);s=i.first()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":last-child"))return this.ascend(n.header);s=s.next()}if(s.is(".accordion-pane")){var r=s.prev(".accordion-header");if(this.isExpanded(r)&&r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r);if(!(s=$(i.get(o.ensureAlphaNumeric(a)+2))).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);for(s=i.first();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.next()}}this.focusOriginalType(s)},ascend:function(t,e){e||(e=0);var n=t.parent(".accordion-pane"),i=n.prev();if(-1===e&&!(i=n.next(".accordion-header")).length)return n.parent(".accordion").length?this.nextHeader(n.prev().children("a"),!0):this.ascend(n.prev(),-1);this.focusOriginalType(i)},descend:function(t,e){e||(e=0);var n=t.next(".accordion-pane"),i=n.children(".accordion-header").first();return-1===e&&(i=n.children(".accordion-header").last()),i.length?this.isExpanded(i)?this.descend(i,-1):void this.focusOriginalType(i):this.focusOriginalType(t)},focusOriginalType:function(t){var e=t.children('[class*="btn"]');this.headers.not(t).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&e.length?e.first()[0].focus():(t.children("a")[0].focus(),t.addClass("is-focused").removeClass("hide-focus"))},filter:function(t){var e=this;if(t&&t.length){var n=this;this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var i=t.not(this.currentlyFiltered),a=$(),s=$();this.headers.add(this.contentAreas).not(i).addClass("filtered"),i.each((function(t,e){var n=$(e).is(".accordion-content"),i=$(e).parents(".accordion-pane");if(n){s.push($(e));var r=$(i[0]).prev(".accordion-header").filter((function(t,e){return-1===a.index(e)}));r.length&&(a=a.add(r))}if(i.length){var o=i.prev(".accordion-header").filter((function(t,e){return-1===i.index(e)}));a=a.add(o)}})),a.addClass("has-filtered-children");var r=this.expand(a,!0);$.when(r).done((function(){e.currentlyFiltered=i,n.build(void 0,!0)}))}},unfilter:function(t){var e=this;if(this.currentlyFiltered.length){t&&t.length||(t=this.currentlyFiltered);var n=$();this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),t.each((function(t,e){var i=$(e).parents(".accordion-pane");if(i.length){var a=i.prev(".accordion-header").filter((function(t,e){return-1===n.index(e)}));n=n.add(a)}})),n.removeClass("has-filtered-children");var i=[this.collapse(t),this.collapse(n)];$.when(i).done((function(){e.currentlyFiltered=e.currentlyFiltered.not(t)}))}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(t,e){this.element.data("updating",!0),e&&(this.settings=b.mergeSettings(this.element[0],e,this.settings),this.settings=Ot(this.settings));var n=$(document.activeElement);return $.contains(this.element[0],n[0])||(n=void 0),t&&t instanceof jQuery?this.teardown(t).init(t):this.teardown().init(),n&&n.length&&n.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(t){var e=!1,n=t;return this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),t&&t instanceof jQuery||(n=this.headers,e=!0),n&&n.length&&(n.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each((function(){var t=$(this),e=t.children(".icon"),n=t.data("hidefocus");if(n&&n.destroy(),e.length){var i=e.data("icon");i&&i.destroy()}var a=t.data("addedExpander");a&&(a.remove(),$.removeData(this,"addedExpander"))})),n.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),n.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion")),e&&this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(t){var e=this,n=null,i=t,a=!1;t&&t instanceof jQuery||(i=this.headers,a=!0);var s=i.find("a");function r(t,n){var i=function(t){var e="Header";return t.is("a")&&(e="Anchor"),t.is("button")&&(e="Expander"),e}(n);return $("body").children().not(".application-menu, .modal-page-container, .page-container").closeChildren(),e["handle".concat(i,"Click")](t,n)}return i.on("click.accordion",(function(t){return r(t,$(this))})).on("focusin.accordion",(function(t){var n=$(t.target);e.originalSelection||(e.originalSelection=n),i.not($(this)).removeClass("is-focused"),n.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")})).on("focusout.accordion",(function(){$.contains(this,n)&&!$(this).is($(n))||$(this).removeClass("is-focused")})).on("keydown.accordion",(function(t){e.handleKeys(t)})).on("mousedown.accordion",(function(t){$(this).addClass("is-focused").removeClass("hide-focus"),n=t.target})).on("mouseup.accordion",(function(){n=null})),s.on("click.accordion",(function(t){return r(t,$(this))})),i.children('[class^="btn"]').on("click.accordion",(function(t){return r(t,$(this))})).on("keydown.accordion",(function(t){e.handleKeys(t)})),a&&this.element.on("selected.accordion",(function(t){t.stopPropagation()})).on("updated.accordion",(function(t,n){t.stopPropagation(),e.updated(n)})),this},hideTooltip:function(){var t=this,e=window;e.tooltip&&(this.removeTooltipData(e.tooltip),e.tooltip.classList.add("is-hidden"),e.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",(function(){t.hideTooltip()}))},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("spantooltip")&&$.removeData(t[0],"spantooltip")},setupTooltips:function(){if(this.settings.enableTooltips){var t,e=this,n=".accordion-header a span";this.element.off("mouseenter.spantooltip",n).on("mouseenter.spantooltip",n,(function(){var e;(e=this).style.width="auto",e.offsetWidth>e.parentElement.offsetWidth-parseInt($(e).parent().css("padding-left"),10)&&(e.style.width="",t=setTimeout((function(){$(e).tooltip({trigger:"immediate",content:"".concat(e.innerText),extraClass:"tooltip-accordion-style"})}),400))})).off("mouseleave.spantooltip click.spantooltip",n).on("mouseleave.spantooltip click.spantooltip",n,(function(){var n;(n=this).style.width="auto",n.offsetWidth>n.parentElement.offsetWidth-parseInt($(n).parent().css("padding-left"),10)&&(n.style.width="",e.hideTooltip(),clearTimeout(t))}))}}},$.fn.accordion=function(t){return this.each((function(){var e=$.data(this,"accordion");e?e.updated(t):e=$.data(this,"accordion",new Ft(this,t))}))};var zt=[".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],Ht=[];function qt(t,e,n){if(t&&e){var i=(t=$(t)).find("*").add(t);n&&(i=i.not(n.join(", ")));var a=function(t,e){var n=[];return $.each(t,(function(t,i){$.each($(i).data(),(function(t,a){(function(t,e){return!!function(t,e){return!!function(t){return t&&!(t instanceof jQuery)}(t)&&t[e]&&"function"==typeof t[e]}(t,e)&&(t[e](),!0)})(a,e)&&n.push({elem:$(i),control:a})}))})),n}(i,e);return t.trigger("sift-".concat(e,"-complete"),[a]),t}}$.fn.destroy=function(){return qt($(this),"destroy")},$.fn.closeChildren=function(){return qt($(this),"close",zt)},$.fn.handleResize=function(){return qt($(this),"handleResize",Ht)};var Vt=setTimeout;function jt(t){return Boolean(t&&void 0!==t.length)}function Wt(){}function Ut(t){if(!(this instanceof Ut))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Jt(t,this)}function Gt(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Ut._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(a){return void Kt(e.promise,a)}Yt(e.promise,i)}else(1===t._state?Yt:Kt)(e.promise,t._value)}))):t._deferreds.push(e)}function Yt(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Ut)return t._state=3,t._value=e,void Xt(t);if("function"==typeof n)return void Jt((i=n,a=e,function(){i.apply(a,arguments)}),t)}t._state=1,t._value=e,Xt(t)}catch(s){Kt(t,s)}var i,a}function Kt(t,e){t._state=2,t._value=e,Xt(t)}function Xt(t){2===t._state&&0===t._deferreds.length&&Ut._immediateFn((function(){t._handled||Ut._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)Gt(t,t._deferreds[e]);t._deferreds=null}function Qt(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function Jt(t,e){var n=!1;try{t((function(t){n||(n=!0,Yt(e,t))}),(function(t){n||(n=!0,Kt(e,t))}))}catch(i){if(n)return;n=!0,Kt(e,i)}}Ut.prototype.catch=function(t){return this.then(null,t)},Ut.prototype.then=function(t,e){var n=new this.constructor(Wt);return Gt(this,new Qt(t,e,n)),n},Ut.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},Ut.all=function(t){return new Ut((function(e,n){if(!jt(t))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var a=i.length;function s(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,(function(e){s(t,e)}),n)}i[t]=r,0==--a&&e(i)}catch(l){n(l)}}for(var r=0;r<i.length;r++)s(r,i[r])}))},Ut.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Ut?t:new Ut((function(e){e(t)}))},Ut.reject=function(t){return new Ut((function(e,n){n(t)}))},Ut.race=function(t){return new Ut((function(e,n){if(!jt(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,a=t.length;i<a;i++)Ut.resolve(t[i]).then(e,n)}))},Ut._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){Vt(t,0)},Ut._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var Zt=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"],te={caseSensitive:!1,filterMode:Zt[3],searchableTextCallback:void 0};function ee(t){this.settings=b.mergeSettings(void 0,t,te),this.init()}ee.prototype={init:function(){for(var t,e,n=[{setting:this.settings.filterMode,limits:Zt,preset:te.filterMode}],i=0;i<n.length;i++)t=n[i].setting,e=n[i].preset,-1===$.inArray(t,n[i].limits)&&(t=e);return this.settings.filterMode===Zt[0]&&M("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(t,e){if(!t)return!1;if(!($.isArray(t)||t instanceof jQuery))return!1;if(!e||"string"!=typeof e||!e.length)return!1;var i=this,a=[],s=!1;return this.settings.caseSensitive||(e=e.toLowerCase()),$.isArray(t)||(t instanceof jQuery||"object"===n(t))&&(t=$.makeArray(t),s=!0),t.forEach((function(t){var n=function(t){var e,n,a,s=!0;if("function"==typeof i.settings.searchableTextCallback)return i.settings.searchableTextCallback(t);"string"==typeof t?e=t:t instanceof $?e=$(t).text():t instanceof HTMLElement?(s=!1,e=t.innerText):(n=t,a="",Object.keys(n).forEach((function(t){a+="".concat(a.length?" ":"").concat(n[t])})),e=a);var r=e;return s&&(r=o.sanitizeHTML(e)),r}(t);i.settings.caseSensitive||(n=n.toLowerCase());var s=!1;if(["startsWith","wordStartsWith"].indexOf(i.settings.filterMode)>-1&&(s=function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)if(0===n[i].indexOf(e))return!0;return 0===t.indexOf(e)||e.indexOf(" ")>0&&t.indexOf(e)>0}(n,e)),"phraseStartsWith"===i.settings.filterMode&&0===n.indexOf(e)&&(s=!0),"contains"===i.settings.filterMode&&n.indexOf(e)>=0&&(s=!0),"keyword"===i.settings.filterMode)for(var r=e.split(" "),l=0;l<r.length;l++)if(n.indexOf(r[l])>=0){s=!0;break}null===i.settings.filterMode&&(s=!0),s&&a.push(t)})),s&&(a=$(a)),!(!s&&!a.length)&&a},updated:function(t){return this.settings=b.mergeSettings(void 0,t,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var ne={compile:function t(e,i,a,s){var r,o=t,l="";function c(t,e){return t=t[(e=e.pop?e:e.split(".")).shift()]||"",0 in e?c(t,e):t}i=Array.isArray(i)?i:i?[i]:[],i=s?0 in i?[]:[1]:i;var d=function(){var t="",s=0,d=void 0,h="object"===n(i[r])?i[r]:{};(h=b.extend({},a,h))[""]={"":i[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(e,i,a,r,u,p,f){s?t+=s&&!u||s>1?e:i:(l+=i.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(t,e,n,i,a,s){return e?c(h,e):i?c(h,s):a?o(c(h,s),h):n?"":new Option(c(h,s)).innerHTML})),d=p),u?--s||(f=c(h,f),/^f/.test(n(f))?l+=f.call(h,t,(function(t){return o(t,h)})):l+=o(t,f,h,d),t=""):++s}))};for(r=0;r<i.length;r++)d();return l}},ie={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(t,e){var n=t,i=!1;if("string"==typeof e.alias&&void 0!==t[e.alias]&&(i=!0,n=t[e.alias]),"contains"===e.filterMode)n=n.replace(new RegExp("("+e.term+")","ig"),"<i>$1</i>");else if("keyword"===e.filterMode)for(var a=e.term.split(" "),s=0;s<a.length;s++){var r=a[s];r&&(n=n.replace(new RegExp("("+r+")","ig"),"<i>$1</i>"))}else{var o=n,l="".concat(o);e.caseSensitive||(l=D.toLowerCase(l));var c=l.indexOf(e.term);c>0?n=o.substr(0,c)+"<i>"+o.substr(c,e.term.length)+"</i>"+o.substr(e.term.length+c):0===c&&(n="<i>"+o.substr(0,e.term.length)+"</i>"+o.substr(e.term.length))}return i?t[e.alias]=n:t=n,t},resultIteratorCallback:function(t,e){var n="string"==typeof t,i={highlightTarget:"label",index:e,listItemId:"ac-list-option".concat(e)};return n?i.label=t:i=b.extend({},i,t),i.hasValue=void 0!==t.value,i.hasValue&&(i.value=t.value),i},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(t){return"string"==typeof t?t:t.label}};function ae(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,ie),this.init()}ae.prototype={init:function(){var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"));var e={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(e):this.listFilter=new ee(e),this.addMarkup(),this.handleEvents()},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"})},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(t,e){if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield")&&!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var n=this;this.settings.caseSensitive||(t=D.toLowerCase(t)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var i=$(this.element.attr("data-tmpl"));this.tmpl=$(i).length?$(i).text():"string"==typeof i?i:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var a=this.listFilter.filter(e,t),s=[];!1!==a&&a.forEach((function(e,i){"string"==typeof e&&(e={label:e,value:e});var a=b.extend(!0,{},e);if(a=n.settings.resultIteratorCallback(a,i),n.settings.highlightMatchedText){var r={filterMode:n.settings.filterMode,caseSensitive:n.settings.caseSensitive,term:t};a.highlightTarget&&(r.alias=a.highlightTarget),n.settings.displayResultsCallback||(a=n.settings.highlightCallback(a,r))}s.push(a)})),this.currentDataSet=s,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(t,e,s):this.settings.displayResultsCallback(s,(function(){n.element.trigger("listopen",[s])}),t)}},handleListResults:function(t,e,n){var i=this;n.forEach((function(t){if(void 0!==ne){var e=ne.compile(i.tmpl,t);l.append(i.list,e,"*")}})),this.element.trigger("beforepopulated",[n]);var a={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(t){return!0===t.wasFlipped&&(i.list.add(i.element).addClass("is-ontop"),t.y+=1),t}}};if(this.previouslyOpened){var s=this.element.data("popupmenu");s&&s.position()}else this.element.addClass("is-open").popupmenu(a).one("close.autocomplete",(function(){i.closeList(!0)}));var r=i.list.find("li"),o=$(r[0]).find("span").outerWidth()+20;if(o>parseInt(this.element.outerWidth(),10)){for(var c=0;c<r.length;c++)r.width(o+"px");this.maxWidth=o}if(i.settings.autoSelectFirstItem&&i.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[n]).focus(),!this.previouslyOpened){i.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",(function(t){i.select(t)})).on("focusout.".concat("autocomplete"),(function(){i.checkActiveElement()}));var d=i.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),(function(){i.highlight($(this),d)}));if(this.settings.offset){var h=this.list.parent()[0];this.settings.offset.left&&(h.style.left="".concat(parseInt(h.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(h.style.top="".concat(parseInt(h.style.top,10)+this.settings.offset.top,"px"))}}var u=document.querySelectorAll("#ac-is-arialive");u&&u.forEach((function(t){t.parentNode.removeChild(t)})),l.append(i.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[n])},closeList:function(t){if(this.list.off(["click.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var e=this.element.data("popupmenu");e&&(t||e.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(t){if(this.isLoading())return t.preventDefault(),!1;if(!this.listIsOpen())return null;function e(t){t.removeClass("is-selected is-focused")}function n(t){t.addClass("is-selected").find("a").focus()}var i=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),a=function(t){return t.filter(".is-selected")}(i);return 40===t.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,e(a),n(i.eq(i.index(a)+1)),t.preventDefault(),t.stopPropagation()),38===t.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,e(a),n(i.eq(i.index(a)-1)),t.preventDefault(),t.stopPropagation()),9!==t.keyCode&&13!==t.keyCode||!this.listIsOpen()||(a.length?(t.stopPropagation(),t.preventDefault(),this.noSelect=!0,this.select(a)):this.closeList()),null},handleAutocompleteInput:function(t){var e=this;return e.isLoading()?(t.preventDefault(),!1):(this.getDataFromSource().done((function(t,n){e.currentDataSet=n,e.openList(t,n)})),null)},checkActiveElement:function(){var t=this;setTimeout((function(){var e=document.activeElement;t.listIsOpen()&&$.contains(t.list[0],e)||t.element.is(e)||t.element.trigger("safe-blur")}),0)},getDataFromSource:function(){var t=this;if(t.isLoading())return!1;var e,i=this.element,a=$.Deferred();function s(e,n,i){return t.element.triggerHandler("complete"),t.element.trigger("requestend",[e,n]),!1===i?a.reject(e):a.resolve(o.stripTags(e),n)}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout((function(){if(!t.isLoading())if(""!==(e=i.val())){var r=n(t.settings.source);if(t.element.triggerHandler("start"),t.element.trigger("requeststart",[e]),"function"===r)t.settings.source(e,s,t.settings.sourceArguments);else if("object"===r){var o=$.isArray(t.settings.source)?t.settings.source:[t.settings.source];s(e,o,!0)}else if(t.settings.source)if("keyword"===t.settings.filterMode){var l=[],c=function(t){if(0===l.length)l=t;else for(var e=0;e<t.length;e++){for(var n=t[e],i=!1,a=0;a<l.length;a++)for(var s=l[a],r=0;r<Object.getOwnPropertyNames(s).length;r++)if(n[Object.getOwnPropertyNames(n)[r]]===s[Object.getOwnPropertyNames(s)[r]]){i=!0;break}i||l.push(n)}},d=function(t){c(t),s(e,l,!0)},h=e.split(" ");""===h[h.length-1]&&h.splice(-1,1);for(var u=0;u<h.length;u++){var p=h[u];if(p.length>0){var f=t.settings.source.toString(),g=$.getJSON(f+p);u<h.length-1?g.done(c).fail(c):g.done(d).fail(d)}}}else{var m=t.settings.source.toString();$.getJSON(m+e).done((function(t){s(e,t,!0)})).fail((function(){s(e,[],!1)}))}else a.reject(e)}else t.element.data("popupmenu")&&t.element.data("popupmenu").close()}),t.settings.delay),a},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(t,e){var n=t.text().trim();t.find(".display-value").length>0&&(n=t.find(".display-value").text().trim()),e&&e.length&&e.parent("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(n).focus()},select:function(t,e){var i,a,s={},r=!1;t instanceof $.Event?(r=!0,i=$(t.currentTarget)):i=t,i.is("li")&&(a=i,i=i.children("a"));var l=(a=i.parent("li")).attr("data-index"),c=a.attr("data-value");if(this.element.attr("aria-activedescendant",a.attr("id")),e&&e.length||(e=this.currentDataSet),l)s=e[parseInt(l,10)];else if(c)for(var d,h=0;h<e.length;h++)(d="object"===n(e[h])&&void 0!==e[h].value?e[h].value.toString():e[h].toString())===c&&("object"===n(e[h])&&(s=e[h]),s.value=d);return s.value&&0!==!s.value.length||(s.value=i.text().trim()),this.highlight(i),this.noSelect=!0,s.label=o.stripHTML(s.label),s.highlightTarget||(s.highlightTarget="label",s.index=parseInt(l,10),s.listItemId="ac-list-option"+s.index,s.hasValue=!0),this.element.trigger("selected",[i,s]),r&&t.preventDefault(),this.closeList(),this.element.focus(),s},handleAfterListOpen:function(){return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),t&&t.source&&(this.settings.source=t.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var t=this.element.data("popupmenu");return t&&t.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function(){var t=this;this.element.on("updated.".concat("autocomplete"),(function(){t.updated()})).on("keydown.".concat("autocomplete"),(function(e){t.handleAutocompleteKeydown(e)})).on("input.".concat("autocomplete"),(function(e){t.handleAutocompleteInput(e)})).on("focus.".concat("autocomplete"),(function(){t.handleAutocompleteFocus()})).on("focusout.".concat("autocomplete"),(function(){t.checkActiveElement()})).on("listopen.".concat("autocomplete"),(function(){t.handleAfterListOpen()})).on("resetfilter.".concat("autocomplete"),(function(){t.resetFilters()}))}},$.fn.autocomplete=function(t){return this.each((function(){var e=$.data(this,"autocomplete");if("string"==typeof e){var n="".concat(e),i=b.extend({},t,{source:n||t.source});e=$.data(this,"autocomplete",new ae(this,i))}else e?e.updated(t):e=$.data(this,"autocomplete",new ae(this,t))}))};var se=[!1,"mobile",!0],re={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:se[0],collapseSize:void 0};function oe(t,e){this.element=$(t),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==e&&(void 0===e.clearable&&(e.clearable=!0),void 0===e.collapsible&&(e.collapsible=!0)),this.settings=b.mergeSettings(t,e,re),this.init()}oe.prototype={get toolbarParent(){var t=this.element.parents(".toolbar"),e=this.element.parents(".flex-toolbar");if(!(t.add(e).length<1))return e.length>0?e.first()[0]:t.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var t=this.element.closest(".module-tabs");return t.length?t.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var t;return this.isContainedByFlexToolbar&&(t=$(this.element).data("toolbarflexitem")),t},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=b.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.element.attr("autocomplete","off");var e=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();e&&""!==e||(e=D.translate("Keyword")),this.element.attr({"aria-label":e}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.wrapper=this.isInlineLabel?this.inlineLabel.addClass("searchfield-wrapper"):this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var n="remove";this.settings.collapsible&&this.settings.collapseSize&&(n="add"),this.wrapper[0].classList[n]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var i,a=["context","alternate"],s=0;s<a.length;s++)this.element.hasClass(a[s])&&(this.wrapper.addClass(i=a[s]),this.element.removeClass(i));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=se[1]),this.wrapper[0].classList[1==!this.settings.collapsible?"add":"remove"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var r=this.wrapper.find(".icon:not(.icon-dropdown)");if(r&&r.length||(r=$.createIconElement("search")),r[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),r.appendTo(this.categoryButton),r=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var o=r.find(".icon-dropdown");if(o.length||(o=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),o.appendTo(r),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>')),this.list.addClass(this.settings.categoryMultiselect?"is-multiselectable":"is-selectable");var l="is-selectable";this.settings.categoryMultiselect||(l="is-multiselectable"),this.list.removeClass(l),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var d=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){d.isFocused&&d.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(D.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var h=this.wrapper.next(".go-button");h.length||(h=this.wrapper.find(".go-button")),h.length&&(this.settings.showGoButton=!0,this.goButton=h,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||D.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton.attr("id",b.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&(this.element.clearable(),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close"));var u=this,p=new F({duration:1,updateCallback:function(){},timeoutCallback:function(){u.calculateSearchfieldWidth()}});return H.register(p),(!1===this.settings.collapsible||"mobile"===this.settings.collapsible&&c.isAbove("phone-to-tablet"))&&this.expand(!0),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var t=this,e=new F({duration:1,updateCallback:function(){},timeoutCallback:function(){t.focusElem&&(t.focusElem.focus(),delete t.focusElem)}});H.register(e)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),b.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),b.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var t=this.wrapper.closest(".header"),e=!1;return t.length&&(e=t.width()<c.phone),e||c.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=b.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},setupEvents:function(){var t=this,e=this;return e.element.on("updated.".concat(this.id),(function(t,n){e.updated(n)})).on("focus.".concat(this.id),(function(t){e.handleFocus(t)})).on("blur.".concat(this.id),(function(t){e.isContainedByFlexToolbar&&e.handleSafeBlur(t)})).on("click.".concat(this.id),(function(t){e.handleClick(t)})).on("keydown.".concat(this.id),(function(t){e.handleKeydown(t)})).on("beforeopen.".concat(this.id),(function(t,n){e.handlePopupBeforeOpen(t,n)})).on("safe-blur.".concat(this.id),(function(){e.handleSafeBlur()})).on("listclose.".concat(this.id),(function(){e.handleSafeBlur()})).on("input.".concat(this.id),(function(){e.checkContents()})),e.wrapper.on("mouseenter.".concat(this.id),(function(){$(this).addClass("is-hovered")})).on("mouseleave.".concat(this.id),(function(){$(this).removeClass("is-hovered")})),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),(function(t,n){e.handleCategorySelected(t,n)})).on("focus.".concat(this.id),(function(t){e.handleCategoryFocus(t)})).on("blur.".concat(this.id),(function(){e.handleSafeBlur()})).on("close.".concat(this.id),(function(){e.handleSafeBlur()})).on("beforeopen.".concat(this.id),(function(t,n){e.handlePopupBeforeOpen(t,n)})),e.hasGoButton()&&e.goButton.on("click.".concat(this.id),(function(t){return e.handleGoButtonClick(t)})).on("click.".concat(this.id),(function(t){return e.handleGoButtonFocus(t)})).on("blur.".concat(this.id),(function(){return e.handleSafeBlur()})),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),(function(t){e.handleFocus(t)})).on("focusout.".concat(this.id),(function(t){e.handleBlur(t)})).on("keydown.".concat(this.id),(function(t){e.handleKeydown(t)})).on("collapse.".concat(this.id),(function(){e.collapse()})),$("body").on("resize.".concat(this.id),(function(){e.adjustOnBreakpoint()})),e.adjustOnBreakpoint()):($("body").on("resize.".concat(this.id),(function(){e.simpleAdjustOnBreakpoint()})),e.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),(function(t){e.collapseResponsive(t)})).on("click.".concat(this.id),(function(t){e.collapseResponsive(t)})).on("blur.".concat(this.id),(function(){return e.handleSafeBlur()})),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),(function(){!e.isFocused&&e.isCurrentlyCollapsible&&e.collapse()})).on("rendered.".concat(this.id),(function(){e.element.removeClass("no-transition no-animation"),e.wrapper.removeClass("no-transition no-animation")})),e.element.on("beforepopulated.".concat(this.id),(function(t,n){n.length>0?e.settings.showAllResults&&e.addMoreLink():e.addNoneLink()})),e.settings.clearable&&(e.element.on("cleared.".concat(this.id),(function(){e.autocomplete&&e.autocomplete.closeList()})),e.xButton.on("blur.".concat(this.id),(function(t){e.handleSafeBlur(t)}))),e.element.on("listopen.".concat(this.id),(function(){var n=$("#autocomplete-list");e.wrapper.addClass("popup-is-open"),e.element.on("selected.".concat(t.id),(function(t,n,i){if(n.hasClass("more-results")){var a=e.settings.allResultsCallback;a&&"function"==typeof a&&a(i)}})),n.find(".more-results, .no-results").on("focus.".concat(t.id),(function(){var t=$(this);n.find("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),e.element.val("")}))})).on("listclose.".concat(this.id),(function(){var n=$("#autocomplete-list");e.element.off("selected.".concat(t.id)),n.off("focus.".concat(t.id))})),this},setAsActive:function(t,e){var n=this;if(t||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var i=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&i.push("is-open")),i.forEach((function(t){n.wrapper[0].classList.add(t)})),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===e&&this.element.focus()}},get isFocused(){var t=document.activeElement;if(this.wrapper[0].contains(t))return!0;if(this.autocomplete){var e=this.autocomplete.list;if(e&&e[0].contains(t))return!0}return!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)||!!(this.xButton&&this.xButton.length&&this.xButton.has(t).length)},hasFocus:function(){return M("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var t=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new F({duration:1,updateCallback:function(){},timeoutCallback:function(){t.isFocused||(t.wrapper[0].classList.remove("has-focus","active"),t.removeDocumentDeactivationEvents(),t.clearResponsiveState(),t.isCurrentlyCollapsible?t.collapse():t.isContainedByFlexToolbar&&t.wrapper[0].classList.remove("is-open"))}}),H.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var t=this;$(document).on("click.".concat(this.id),(function(e){t.handleOutsideClick(e)})).on("keydown.".concat(this.id),(function(e){t.handleOutsideKeydown(e)})),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(t){this.isSearchfieldElement(t.target)||this.handleSafeBlur()},handleKeydown:function(t){var e=t.which,n=t.key;27===e&&u.browser.isIE11()&&t.preventDefault(),t.ctrlKey&&8===e&&this.element.val(""),9===e&&this.handleSafeBlur(),this.isContainedByFlexToolbar&&["ArrowUp","Up","ArrowDown","Down"].indexOf(n)>-1&&this.collapse()},handleOutsideKeydown:function(t){9!==t.which||this.isSearchfieldElement(t.target)||this.handleSafeBlur()},handlePopupBeforeOpen:function(t,e){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!e)return!1;var n=this.wrapper.hasClass("context")?"addClass":"removeClass",i=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return e[n]("context"),e[i]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(t){var e=this.settings.goButtonAction;if("function"==typeof e){var n,i=this.element.val();return this.hasCategories()&&(n=this.getCategoryData()),e(t,i,n)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(t){if(this.settings.showCategoryText&&this.categoryButton.length){var e="",n=this.wrapper.find(".btn"),i=n.find("span");if(i&&i.length||(i=$('<span class="category"></span>').insertAfter(n.find(".icon").first())),i.empty(),"string"==typeof t&&t.length)i.text(t.trim());else{var a=this.getSelectedCategories();a.length&&(e=a.length>1?"".concat(a.length," ").concat(D.translate("Selected")):a.text().trim(),i.text(e))}}},isSearchfieldElement:function(t){return!!$.contains(this.wrapper[0],t)||!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)},getFillSize:function(t,e){var n,i,a;function s(t){if(!t)return 0;if(!isNaN(parseInt(t,10)))return parseInt(t,10);if(t instanceof jQuery){if(!t.length)return 0;t.is(".title")&&(t=t.next(".buttonset")),t=t[0]}return t}function r(t,e){if(!isNaN(t))return null==t?0:t;e&&"string"==typeof e||(e="left");var n,i=["left","right"];return-1===$.inArray(e,i)&&(e=i[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t.getBoundingClientRect()),n[e]}if(t=s(t),e=s(e),n=r(t),i=r(e,(a="left",(t===e||$(e).length&&$(e).is(".buttonset"))&&(a="right"),a)),!n&&!i)return 280;var o=i-n;return o<=280?280:o>=450?450:o},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var t=0;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var e=window.getComputedStyle(this.categoryButton[0]);t+=this.categoryButton.width()+(parseInt(e.paddingLeft,10)+parseInt(e.paddingRight,10))+2*parseInt(e.borderLeftWidth,10)}if(this.hasGoButton()){var n=window.getComputedStyle(this.goButton[0]);t+=this.goButton.width()+(parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10))+2*parseInt(n.borderLeftWidth,10)}t>0&&(this.input.style.width="calc(100% - ".concat(t,"px)")),delete this.openWidth},calculateOpenWidth:function(){var t,e=this.element.parents(".toolbar").children(".buttonset"),n=this.wrapper.next();if(e.length){if(n.is(".title")&&(n=e),this.shouldBeFullWidth())return t="100%",$(this.toolbarParent).closest(".header").length&&(t="calc(100% - 40px)"),$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(t="calc(100% - 1px)"),void(this.openWidth=t);var i=e.offset().left+10,a=n;a.length||(a=e.offset().left+10+e.outerWidth(!0)),t=this.getFillSize(i,a),this.openWidth="".concat(t-6,"px")}},calculateSearchfieldWidth:function(){var t,e="100%",n=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var i=window.getComputedStyle(this.element[0]);i.width&&!this.isContextSearch&&(e=i.width),this.hasCategories()&&(n+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(n+=this.goButton.outerWidth(!0)),n>0&&(t="calc(".concat(e," - ").concat(n,"px)")),t&&(this.element[0].style.width=t)},handleCategorySelected:function(t,e){this.element.trigger("selected",[e]),this.settings.showCategoryText&&(this.setCategoryButtonText(t,e.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(t){var e=this.getCategories(),n=[];return e.each((function(){var e=this.classList.contains("is-checked");if(!0!==t||!1!==e){var i={name:this.innerText,checked:e};this.id&&(i.id=this.id);var a=this.getAttribute("data-value");void 0!==a&&(i.value=a),n.push(i)}})),n},updateCategories:function(t){this.settings.categories=t,this.setCategories(this.settings.categories)},setCategories:function(t){this.list.empty();var e=this,i=["string","number"],a=!1;t.forEach((function(t){if("string"==typeof t&&(t={name:t}),t.name){var s="";"string"==typeof t.id&&t.id.length&&(s=' id="'.concat(t.id,'"'));var r="";i.indexOf(n(t.value))>-1&&(r=' data-value="'.concat(t.value,'"'));var o="";!0===t.checked&&!0!==a&&(o=' class="is-checked"',e.settings.categoryMultiselect||(a=!0)),e.list.append("<li".concat(o).concat(s).concat(r,'><a href="#">').concat(t.name,"</a></li>"))}}));var s=this.categoryButton.data("popupmenu");s&&"function"==typeof s.updated&&s.updated()},expand:function(t){var e=this,n=this;return new Ut((function(i){if(n.isExpanded||n.isExpanding||n.isCollapsing)i();else{var a=!n.shouldBeFullWidth();n.isExpanding=!0,a||n.appendToParent(),n.wrapper.removeAttr("style"),n.input.removeAttribute("style");var s=0;n.buttonsetElem&&(s=parseInt(window.getComputedStyle(n.buttonsetElem).width,10));var r={buttonset:s+280};e.isContainedByFlexToolbar&&!c.isAbove("phone-to-tablet")||e.wrapper[0].classList.add("is-open"),e.calculateOpenWidth(),e.setOpenWidth(),(!t||"ios"===u.os.name||n.isFocused&&document.activeElement!==n.input)&&(n.focusElem&&(n.focusElem=n.input),n.input.focus());var o=[];r&&o.push(r),n.element.trigger("beforeexpand"),$(n.toolbarParent).triggerHandler("recalculate-buttons",o);var l=new F({duration:10,updateCallback:function(){},timeoutCallback:function(){$(n.toolbarParent).triggerHandler("recalculate-buttons",o),n.element.trigger("expanded"),delete n.isExpanding,n.isExpanded=!0,!n.isCurrentlyCollapsible||n.isFocused||n.focusElem||n.handleSafeBlur()}});H.register(l)}}))},collapse:function(){var t=this,e=this;return new Ut((function(n){if(e.isExpanded||!e.isExpanding||e.isCollapsing){e.isCollapsing=!0,e.wrapper.removeAttr("style"),e.appendToButtonset(),e.checkContents(),e.toolbarParent&&e.setInitalWidth(),e.clearResponsiveState(),e.wrapper[0].classList.remove("active","is-open"),u.browser.isIE11&&e.wrapper[0].classList.remove("is-open"),!t.isContainedByFlexToolbar&&t.isFocused||e.wrapper[0].classList.remove("has-focus"),e.categoryButton&&e.categoryButton.length&&e.categoryButton.data("popupmenu").close(!1,!0),e.element.trigger("beforecollapse"),delete e.isExpanded,delete e.isExpanding;var i=new F({duration:10,updateCallback:function(){},timeoutCallback:function(){delete e.isCollapsing,$(e.toolbarParent).triggerHandler("recalculate-buttons"),e.element.trigger("collapsed"),n()}});H.register(i)}else n()}))},collapseResponsive:function(t){if(this.previouslyCollapsedByKey&&"click"===t.type)delete this.previouslyCollapsedByKey;else{var e=this,n=1;t&&!t.key&&(n=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(n=1)),"keydown"===t.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then((function(){e.wrapper.trigger("collapsed-responsive",[n])}))}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var t;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(t="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(t)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(t,"px")))},addMoreLink:function(){var t=$("#autocomplete-list"),e=this.element.val();if(!($(".more-results",t).length>0)){var n=$('<li class="separator" role="presentation"></li>').appendTo(t),i=$('<li role="presentation"></li>').appendTo(t);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(D.translate("AllResults"),' "').concat(o.ensureAlphaNumericWithSpaces(e),'"</span>')).appendTo(i),this.autocomplete.maxWidth&&n.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var t=$("#autocomplete-list");if(!($(".no-results",t).length>0)){var e=$('<li role="presentation" class="is-placeholder"></li>').appendTo(t);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(D.translate("NoResults"),"</span>")).appendTo(e)}},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings),Object.prototype.hasOwnProperty.call(t,"collapseSize")&&void 0===t.collapseSize&&(this.settings.collapseSize=t.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){return this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.categoryButton&&this.categoryButton.length&&(this.categoryButton.off().remove(),delete this.categoryButton),this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),this.xButton.remove()),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(t){return this.each((function(){var e=$.data(this,"searchfield");e?e.updated(t):e=$.data(this,"searchfield",new oe(this,t))}))};var le={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function ce(t,e){return this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,le),this.init()}ce.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function(){this.setup().handleEvents()},setup:function(){var t=this;this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var e=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==e?"true"===e:this.settings.openOnLarge;var n=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==c[n]?n:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var i=this.menu.prevAll(".masthead"),a=this.menu.prevAll(".module-tabs");i.length>0&&(this.scrollTarget=i,this.menu.addClass("short")),a.length>0&&(this.scrollTarget=a),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var s=this.accordion.data("accordion");if(s||(this.accordion.accordion(),s=this.accordion.data("accordion")),this.accordionAPI=s,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$("".concat('<div class="searchfield-wrapper"><label for="application-menu-searchfield">').concat(D.translate("Search"),"</label>")+'<input id="application-menu-searchfield" class="searchfield" /></div>').prependTo(this.element),this.element.addClass("has-searchfield");var r=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function(t,e,n){e(t,r.accordion.data("accordion").toData(!0,!0),n)},searchableTextCallback:function(t){return t.text||t.contentText||""},resultIteratorCallback:function(t){return t.highlightTarget="text",t},clearResultsCallback:function(){r.searchfieldAPI&&!r.searchfieldAPI.isFocused&&r.accordionAPI.unfilter()},displayResultsCallback:function(t,e,n){return r.filterResultsCallback(t,e,n)}}),this.searchfield.on("cleared.".concat("applicationmenu"),(function(){r.accordionAPI.unfilter()}))}this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var o=this.element.find(".application-menu-switcher-trigger");return o.length>0&&(this.switcherPanel=o.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea(),this.switcherPanel.on("beforeexpand.applicationmenu",(function(){var e=t.element.height();t.element.addClass("has-open-switcher"),t.switcherPanel.find(".content").height(e-71),t.settings.onExpandSwitcher&&t.settings.onExpandSwitcher(t,t.element,t.settings)})).on("aftercollapse.applicationmenu",(function(){t.element.removeClass("has-open-switcher"),t.settings.onCollapseSwitcher&&t.settings.onCollapseSwitcher(t,t.element,t.settings)}))),this},getAdjacentContainerElement:function(){var t=this.element.next(".page-container");return t.length||(t=$("body")),t},handleTriggerEvents:function(){var t=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",(function(e){return!$(e.currentTarget).find(".icon.app-header").hasClass("go-back")&&!t.isAnimating&&(t.menu.hasClass("is-open")?t.closeMenu(!0):t.openMenu(void 0,!0),!0)})),$(document).on("keydown.applicationmenu",(function(e){t.handleKeyDown(e)}))},handleKeyDown:function(t){return!(121===t.which&&!t.shiftKey&&(t.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),1))},notify:function(t,e){if(t&&void 0!==t&&(t instanceof HTMLElement&&(t=$(t)),t.is("a"))){var n=t.find(".tag");if(e&&void 0!==e&&0!==parseInt(e,10))return n.length||(n=$('<span class="tag"></span>').appendTo(t)),n.text(e.toString()),n;n.length&&n.remove()}},adjustHeight:function(){var t=this.scrollTarget.is(".is-sticky"),e=this.scrollTarget.outerHeight(!0)-(t?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(e+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=e>0?"calc(100% - ".concat(e,"px)"):"100%"},toggleScrollClass:function(){if("ie"===u.browser.name&&"11"===u.browser.version){var t=this.element[0];t&&t.classList.contains("has-menu-footer")&&(t.scrollHeight>t.clientHeight?t.classList.add("has-scrollbar"):t.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return c.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(c.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else c.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},openMenu:function(t,e,n){if(!0!==this.isAnimating){var i=this,a=$.fn.transitonEndName;n||(this.isAnimating=!0),this.adjustHeight(),this.triggers.each((function(){var t=$(this);if(t.parents(".header").length>0||t.parents(".masthead").length>0){if(t.parents(".header, .masthead").parents(".page-container").length)return;t.find(".icon.app-header").removeClass("go-back").addClass("close"),t.trigger("icon-change")}})),n||(this.menu.off("".concat(a,".applicationmenu")),this.menu[0].style.display="",this.menu.addClass("is-open"),u.features.touch&&$("body").addClass("is-open-touch")),c.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),t&&!0===t||this.menu.find(".is-selected > a").focus(),"ios"===u.os.name&&this.getAdjacentContainerElement().addClass("ios-click-target"),n?s():(this.menu.one("".concat(a,".applicationmenu"),s),this.timeout=setTimeout(s,300)),setTimeout((function(){$(document).on("click.applicationmenu",(function(t){$(t.target).parents(".application-menu").length<1&&!i.isLargerThanBreakpoint()&&i.closeMenu(!0)}))}),0)}function s(){null!==i.timeout&&(clearTimeout(i.timeout),i.timeout=null),e&&(i.userOpened=!0,i.userClosed=void 0),n||(i.isAnimating=!1,i.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),i.toggleScrollClass(),i.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(t){if(!0!==this.isAnimating){var e=this,n=$.fn.transitionEndName();this.isAnimating=!0,this.triggers.each((function(){var t=$(this);(t.parents(".header").length>0||t.parents(".masthead").length>0)&&(t.find(".icon.app-header").removeClass("close"),t.trigger("icon-change"))})),"ios"===u.os.name&&this.getAdjacentContainerElement().removeClass("ios-click-target"),this.menu.one("".concat(n,".applicationmenu"),i),this.timeout=setTimeout(i,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),u.features.touch&&$("body").removeClass("is-open-touch")}function i(){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.menu.off("".concat(n,".applicationmenu")),e.menu[0].style.display="none",e.isAnimating=!1,t&&(e.userOpened=void 0,e.userClosed=!0),e.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(t,e,n){if(t&&t.length){var i=$();$.each(t,(function(t,e){i=i.add($(e))})),this.triggers=this.triggers[e?"not":"add"](i),this.handleTriggerEvents(),n&&!0===n||this.updated()}},filterResultsCallback:function(t,e){if(!t||!t.length)return this.accordionAPI.unfilter(),void e();var n=$(t.map((function(t){return t.element})));this.accordionAPI.filter(n,!0),this.element.triggerHandler("filtered",[t]),e()},handleSearchfieldInputEvent:function(){if(this.searchfield&&this.searchfield.length){var t=this.searchfield.val();if(!t||""===t){var e=this.accordion.find(".has-filtered-children");this.accordionAPI.headers.removeClass("filtered has-filtered-children"),this.accordionAPI.collapse(e),this.accordionAPI.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var t=this.switcherPanel.data("expandablearea");if(t&&(t.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.accordionAPI&&"function"==typeof this.accordionAPI.destroy&&(this.isFiltered&&this.accordionAPI.collapse(),this.accordionAPI.destroy()),this.switcherPanel&&this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var t=this.searchfield.data("searchfield");t&&t.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function(){var t=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",(function(e,n,i){t.notify(n,i)})).on("updated.applicationmenu",(function(){t.updated()})),"ie"===u.browser.name&&"11"===u.browser.version&&t.element.find(".expandable-area").on("beforeexpand.applicationmenu",(function(){t.element[0].classList.remove("has-scrollbar")})).on("aftercollapse.applicationmenu",(function(){t.toggleScrollClass()})),this.accordion.on("blur.applicationmenu",(function(){t.closeMenu()})).on("selected.applicationmenu",(function(){t.handleDismissOnClick()})).on("followlink.applicationmenu",(function(){t.handleDismissOnClick()})).on("afterexpand.applicationmenu aftercollapse.applicationmenu",(function(){t.toggleScrollClass()})),$(document).on("open-applicationmenu",(function(){t.openMenu(void 0,!0)})).on("close-applicationmenu",(function(){t.closeMenu()})).on("dismiss-applicationmenu",(function(){t.handleDismissOnClick()})),$(window).on("scroll.applicationmenu",(function(){t.adjustHeight()})),$("body").on("resize.applicationmenu",(function(){t.testWidth(),t.toggleScrollClass()})),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",(function(e){t.handleSearchfieldInputEvent(e)})),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout((function(){t.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}),800),this}},$.fn.applicationmenu=function(t){return this.each((function(){var e=$.data(this,"applicationmenu");return e?e.updated(t):e=$.data(this,"applicationmenu",new ce(this,t)),e}))};var de={dataset:[],selectable:!1,paging:!1,pagesize:25,pagesizes:[10,25,50,75]};function he(t,e){this.element=$(t),this.settings=b.mergeSettings(t,e,de),e.dataset&&(this.settings.dataset=e.dataset),this.init()}he.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var t=this,e=this;return this.element.on("click.".concat("blockgrid"),".block",(function(t){var n=$(t.currentTarget),i=$(t.target),a=i.is(".checkbox-label")||i.is(".checkbox");setTimeout((function(){e.select(n,a)}),0),t.stopPropagation(),t.preventDefault()})),this.element.on("focus.".concat("blockgrid"),".checkbox",(function(t){$(t.currentTarget).parent().addClass("has-focus")})),this.element.on("blur.".concat("blockgrid"),".checkbox",(function(t){$(t.currentTarget).parent().removeClass("has-focus")})),this.element.on("keypress.".concat("blockgrid"),".block",(function(t){if(32===t.which){var n=$(t.target);e.select(n,!1)}})),this.element.on("updated.".concat("blockgrid"),(function(){e.updated()})),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),(function(){t.previousFocusedElement=!0,t.build()})).on("pagesizechange.".concat("blockgrid"),(function(){t.previousFocusedElement=!0,t.build()})),this},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.element.pager({componentAPI:this,dataset:this.settings.dataset,pagesize:this.settings.pagesize,pagesizes:this.settings.pagesizes}))},selectBlock:function(t,e){return P(this.select,this.selectBlock).apply(this,[t,e])},select:function(t,e){var n=this.element.find(".block"),i=this.element.find(".checkbox"),a=t.find(".checkbox"),s=a.is(":checked"),r="",o=Number(a.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],n.removeClass("is-selected").removeAttr("aria-selected"),i.prop("checked",!1)),"multiple"===this.settings.selectable&&s||"mixed"===this.settings.selectable&&e&&s){t.removeClass("is-selected").removeAttr("aria-selected"),a.prop("checked",!1);for(var l=0;l<this.selectedRows.length;l++)o===this.selectedRows[l].idx&&this.selectedRows.splice(l,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!e||(s||(t.addClass("is-selected").attr("aria-selected","true"),a.prop("checked",!0)),this.selectedRows.push({idx:o,data:this.settings.dataset[o],elem:t}),r=s?"deselected":"selected"),"mixed"===this.settings.selectable&&!e){var c=t.hasClass("is-activated");return n.removeClass("is-activated"),void(c?(t.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:o,item:this.settings.dataset[o]}])):(t.addClass("is-activated"),this.element.triggerHandler("activated",[{row:o,item:this.settings.dataset[o]}])))}this.element.triggerHandler(s?"deselected":"selected",[{selectedRows:this.selectedRows,action:r}])}},render:function(){var t=this,e="",n=this.settings.dataset,i=D?D.translate("Select"):"Select";if(this.pagerAPI){var a=this.pagerAPI.state;if(a.pages>1){var s=a.activePage>0?a.activePage-1:0,r=a.pagesize*s,o=a.pagesize*(s+1);if((n=n.slice(r,o)).length!==this.settings.dataset.length)for(var l=0;l<o-r+1&&!n[l].id;l++)n[l].id=r+l}}var c=[];this.selectedRows.forEach((function(t){c.push(t.idx)}));for(var d=0;d<n.length;d++){var h=n[d],u="mixed"===this.settings.selectable?"0":"-1",p="",f="";c.indexOf(h.id)>-1&&(p=" is-selected",f=" checked"),e+='<div class="block is-selectable'.concat(p,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(d,'" tabindex="').concat(u,'" data-idx="').concat(h.id||d,'"').concat(f,'>\n        <label for="checkbox').concat(d,'" class="checkbox-label">\n          <span class="audible">').concat(i,'</span>\n        </label>\n        <img alt="Placeholder Image" src="').concat(h.img||h.image,'" class="image-round">\n        <p> ').concat(h.maintxt||h.title," <br> ").concat(h.subtxt||h.subtitle," </p>\n      </div>")}this.element.attr("role","list").append(e),this.previousFocusedElement&&setTimeout((function(){t.element.find(".block").first().focus(),delete t.previousFocusedElement}),0)},renderBlock:function(){return P(this.render,this.renderBlock).apply(this)},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(t){return this.each((function(){var e=$.data(this,"blockgrid");e?e.updated(t):e=$.data(this,"blockgrid",new he(this,t))}))};var ue={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1};function pe(t,e){this.settings=b.mergeSettings(t,e,ue),this.element=$(t),this.init()}pe.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var t=this.element.attr("data-block-ui"),e=this.element.attr("data-display-delay"),n=this.element.attr("data-completion-time");this.blockUI=void 0!==t?t:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:D.translate("Loading"),this.label&&this.label.text(this.loadingText));var i=void 0!==e&&!isNaN(e)&&parseInt(e,10)>20,a=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=i?e:a,this.completionTime=void 0===n||isNaN(n)?this.settings.timeToComplete:parseInt(n,10),this},activate:function(){var t=this;if(!t.isActive()){if(this.container)return t.closeTimeout&&clearTimeout(t.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var e="";if(this.blockUI&&(this.settings.transparentOverlay&&(e=" transparent"),this.originalPositionProp=this.element[0].style.position,this.element[0].style.position="relative",this.overlay=$('<div class="overlay busy is-hidden'.concat(e,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var n;if(this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input"))n=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element);else{var i=this.element.data("dropdown");this.container.appendTo((n=i.pseudoElem).parent())}this.overlay&&this.overlay.insertAfter(this.container);for(var a=n.position(),s=n.outerHeight(),r=n.outerWidth(),o=this.container.add(this.overlay),l=function(t,e,n){t.style[e]="".concat(n,"px")},c=0,d=o.length;c<d;c++)l(o[c],"left",a.left),l(o[c],"top",a.top),l(o[c],"bottom",a.bottom),l(o[c],"right",a.right),l(o[c],"height",s),l(o[c],"width",r)}else this.container.appendTo(this.element);setTimeout((function(){t.container&&t.container.removeClass("is-hidden"),t.overlay&&t.overlay.removeClass("is-hidden"),t.blockUI&&t.addScrollParent()}),t.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(t.isAnimating=!0,t.animateWithJS()),this.completionTime>0&&setTimeout((function(){t.element.trigger("complete")}),t.completionTime)}},close:function(t){var e=this;e.isActive()&&(this.removeScrollParent(),t&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),e.closeTimeout=setTimeout((function(){clearTimeout(e.closeTimeout),e.container&&e.container.remove(),e.container=void 0,e.loader=void 0,e.label=void 0,e.overlay&&(e.overlay.remove(),e.element[0].style.position=e.originalPositionProp,e.originalPositionProp=void 0),e.overlay=void 0,e.element.trigger("aftercomplete.busyindicator"),e.element.off("complete.busyindicator")}),600))},animateWithJS:function(){var t=this,e=this.container.find(".bar.one"),n=this.container.find(".bar.two"),i=this.container.find(".bar.three"),a=this.container.find(".bar.four"),s=this.container.find(".bar.five"),r=0;setInterval((function(){t.isAnimating?(1===(r+=1)&&e.addClass("half"),13===r&&(e.removeClass("half").addClass("full"),n.addClass("half")),26===r&&(e.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),i.addClass("half")),39===r&&(e.removeClass("half"),n.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),a.addClass("half")),51===r&&(n.removeClass("half"),i.removeClass("full").addClass("half"),a.removeClass("half").addClass("full"),s.addClass("half")),64===r&&(i.removeClass("half"),a.removeClass("full").addClass("half"),s.removeClass("half").addClass("full")),77===r&&(a.removeClass("half"),s.removeClass("full").addClass("half")),90===r&&s.removeClass("half"),103===r&&(r=0)):clearInterval(null)}),10)},addScrollParent:function(){var t=this;if(this.blockUI){this.scrollParent=$(this.getScrollParent(this.element[0]));var e=this.scrollParent[0]?this.scrollParent[0].offsetHeight:0;if(e&&this.container&&e<this.element[0].offsetHeight){var n=e/2-58,i=function(){return t.container.css({top:n+t.scrollParent[0].scrollTop})};i(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",(function(){t.container&&i()}))}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(t){var e=["overflow","overflow-x","overflow-y"],n=/(auto|scroll)/,i=function(t){return n.test(function(t){return e.reduce((function(e,n){return e+function(t,e){return getComputedStyle(t,null).getPropertyValue(e)}(t,n)}),0)}(t))};return function(t){for(var e=!1,n=t.parentNode;!e&&n&&n.tagName&&"body"!==n.tagName.toLowerCase();){if(i(n)){e=!0;break}n=n.parentNode}return e?n:null}(t)},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function(){var t=this;return this.element.on("start.busyindicator",(function(e){e.stopPropagation(),t.activate()})).on("afterstart.busyindicator",(function(){t.element.on("complete.busyindicator",(function(e){e.stopPropagation(),t.close(!0)}))})).on("updated.busyindicator",(function(){t.close(!0),t.updated()})),this}},$.fn.busyindicator=function(t){return this.each((function(){var e=$.data(this,"busyindicator");e?e.updated(t):e=$.data(this,"busyindicator",new pe(this,t))}))};var fe={tooltip:{}};fe.isIE="ie"===u.browser.name,fe.isIEEdge="edge"===u.browser.name,fe.tooltipSize=function(t){return l.html(this.tooltip.find(".tooltip-content"),t,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},fe.formatToSettings=function(t,e){var n=t.data?t.data:t;return"value"===e.show?e.formatter?d3.format(e.formatter)(n.value):n.value:"label"===e.show?n.name:"label (percent)"===e.show?"".concat(n.name," (").concat(isNaN(n.percentRound)?0:n.percentRound,"%)"):"label (value)"===e.show?"".concat(n.name," (").concat(e.formatter?d3.format(e.formatter)(n.value):n.value,")"):"percent"===e.show?"".concat(isNaN(n.percentRound)?0:n.percentRound,"%"):"function"==typeof e.show?e.show(n):n.value},fe.appendTooltip=function(t){var e=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(this.tooltip=$('<div id="svg-tooltip" class="tooltip '.concat(t,' right is-hidden">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",(function(){e.hideTooltip()}))))},fe.hideTooltip=function(){var t=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",(function(){t.hideTooltip()}))},fe.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},fe.colorRange=function(){var t=W.themeColors().palette;return W.uplift?[t.azure[80].value,t.turquoise[40].value,t.amethyst[60].value,t.graphite[40].value,t.amber[40].value,t.emerald[70].value,t.ruby[60].value,t.azure[30].value,t.amber[70].value,t.graphite[60].value,t.turquoise[60].value,t.emerald[90].value,t.amethyst[30].value,t.azure[50].value,t.ruby[30].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[80].value,t.graphite[20].value,t.amber[90].value]:[t.azure[70].value,t.turquoise[30].value,t.amethyst[30].value,t.graphite[60].value,t.amber[50].value,t.emerald[60].value,t.ruby[60].value,t.azure[30].value,t.amber[90].value,t.turquoise[80].value,t.ruby[20].value,t.graphite[50].value,t.emerald[50].value,t.azure[50].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[50].value,t.amber[70].value,t.graphite[20].value,t.azure[20].value]},fe.colorNameRange=function(){return W.uplift?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},fe.chartColor=function(t,e,n){var i=fe.colorRange(),a=n&&n.color?n.color:null;if(a){if("error"===a)return W.themeColors().status.danger.value;if("alert"===a)return W.themeColors().status.warning.value;if("alertYellow"===a)return W.themeColors().status.caution.value;if("good"===a)return W.themeColors().status.success.value;if("neutral"===a)return W.themeColors().palette.graphite[30].value;if(a&&0===a.indexOf("#"))return n.color}return/^(pie|donut)$/.test(e)?i[t]:/^(bar-single|column-single)$/.test(e)?i[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?i[t]:""},fe.chartColorName=function(t,e,n){var i=n&&n.color?n.color:null;if(i){if("error"===i)return"alert01";if("alert"===i)return"alert02";if("alertYellow"===i)return"alert03";if("good"===i)return"alert04";if("neutral"===i)return"graphite03";if(i&&0===i.indexOf("#"))return n.color}return/^(pie|donut)$/.test(e)?this.colorNameRange()[t]:/^(bar-single|column-single)$/.test(e)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?this.colorNameRange()[t]:""},fe.showTooltip=function(t,e,n,i){var a=this;t<0&&(t=2),this.tooltip[0].style.left="".concat(t,"px"),this.tooltip[0].style.top="".concat(e,"px"),l.html(this.tooltip.find(".tooltip-content"),n,"*"),this.tooltip.removeClass("bottom top left right").addClass(i),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){a.hideTooltip()})),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){a.hideTooltip()}))},fe.addLegend=function(t,e,n,i){var a;if(0!==t.length){var s=t[0].display&&"twocolumn"===t[0].display,r=s?$('<div class="chart-legend '.concat(t[0].placement?"is-".concat(t[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');"pie"!==e&&"donut"!==e||!n.showMobile||(r=$('<div class="chart-legend"><div class="container"></div></div>'));var l,c=0;for(a=0;a<t.length;a++)l=t[a].name?6*t[a].name.length:6,c=t[a].name&&l>c?l:c;var d=(c+=55)/$(i).width()*100;for(a=0;a<t.length;a++)if(t[a].name){var h="";(s||t[a].display&&"block"===t[a].display)&&(h+=" lg"),"column-positive-negative"===n.type&&t[a].option&&(h+=" ".concat(t[a].option));var u='<span class="chart-legend-item'.concat(h,'" tabindex="0"></span>'),p=fe.chartColor(a,e||(1===t.length?"bar-single":"bar"),t[a]),f=fe.chartColorName(a,e||(1===t.length?"bar-single":"bar"),t[a]),g="";"#"===f.substr(0,1)?(g=$('<span class="chart-legend-color"></span>'),t[a].pattern||g.css("background-color",p)):g=$('<span class="chart-legend-color '.concat(t[a].pattern?"":f,'"></span>')),"scatterplot"===e&&(g=$('<span class="chart-legend-color"></span>'));var m=$('<span class="chart-legend-item-text">'.concat(o.stripTags(t[a].name),"</span>"));if(t[a].pattern&&(g.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(t[a].pattern,')"/></svg>')),g.find("rect").css("fill",p)),t[a].percent){var v=$('<span class="chart-legend-percent"></span>').text(t[a].percent);m.append(v)}t[a].display&&"block"===t[a].display&&(u='<span class="chart-legend-item'.concat(h,'" tabindex="0"></span>')),s&&(u='<span class="chart-legend-item'.concat(h,d>45&&"right"!==n.legendPlacement?'" tabindex="0"></span>':' is-two-column" tabindex="0" ></span>')),(u=$(u)).append(g,m),"pie"!==e&&"donut"!==e||!n.showMobile?r.append(u):r.find(".container").append(u),(t[a].display&&"block"===t[a].display||s&&d>45&&"right"!==n.legendPlacement)&&u.css({float:"none",display:"block",margin:"0 auto",width:"".concat(c,"px")}),"scatterplot"===e&&(self.svg=d3.select(g[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type((function(){return d3.symbols[a]}))).style("fill",p)),innerWidth<=480&&t[a].data&&t[a].data.legendAbbrName&&m.replaceWith('<span class="chart-legend-item-text">'.concat(t[a].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&t[a].data&&t[a].data.legendShortName&&m.replaceWith('<span class="chart-legend-item-text">'.concat(t[a].data.legendShortName,"</span>"))}r instanceof $&&(r.on("click.chart",".chart-legend-item",(function(){fe.handleElementClick(this,t,n)})).on("keypress.chart",".chart-legend-item",(function(e){13!==e.which&&32!==e.which||fe.handleElementClick(this,t,n)})),$(i).append(r))}},fe.handleElementClick=function(t,e,n){var i,a=$(t).index(),s=e[a];"radar"===n.type&&(i=d3.select(n.svg.selectAll(".chart-radar-area").nodes()[a])),"pie"===n.type||"donut"===n.type?i=d3.select(n.svg.selectAll(".slice").nodes()[a]):"column-positive-negative"===n.type?i=n.svg.select(!s.option||s.option&&"target"===s.option?".target-bar":".bar.".concat(s.option)):-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative"].indexOf(n.type)&&(n.isGrouped||n.isSingle?i=n.svg.select(".series-".concat(a)):n.isStacked&&!n.isSingle&&(i=d3.select(n.svg.selectAll("bar"===n.type||"bar-stacked"===n.type||"bar-normalized"===n.type?".series-group":".g").nodes()[a]).select(".bar"))),-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative"].indexOf(n.type)&&(fe.clickedLegend=!0,i.dispatch("click")),s.selectionObj&&fe.selectElement(d3.select(s.selectionObj.nodes()[a]),s.selectionInverse,s.data)},fe.selected=[],fe.selectElement=function(t,e,n,i){var a=t.node()&&t.classed("is-selected"),s=[{elem:t.nodes(),data:a?{}:n}];e.classed("is-selected",!1).classed("is-not-selected",!a),t.classed("is-not-selected",!1).classed("is-selected",!a),fe.selected=$.isEmptyObject(s[0].data)?[]:s,$(i).triggerHandler("selected",[s])},fe.setSelectedElement=function(t){var e,n=t.dataset,i="column-positive-negative"===t.type,a=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(t.type),s="pie"===t.type||"donut"===t.type,r=/^(column|column-grouped|column-stacked|column-positive-negative)$/.test(t.type),o=t.svg,l=t.isSingle,c=t.isGrouped,d=t.isStacked,h="selected"===t.task,u=d3.select(t.selector),p=u.classed("positive"),f=t.svg.selectAll(".axis.x .tick"),g=t.svg.selectAll(".axis.y .tick"),m=t.svg.selectAll(".bartext.positive, .target-bartext.positive"),v=t.svg.selectAll(".bartext.negative, .target-bartext.negative"),b=t.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),y=d3.select(t.selector.parentNode),w=parseInt(y.node()?y.attr("data-group-id"):0,10),x=[],C=[];if(n=d||s?n||null:n&&n[w]?n[w].data||n[w]:null,f.style("font-weight","normal"),g.style("font-weight","normal"),m.style("font-weight","normal"),v.style("font-weight","normal"),o.selectAll(".is-selected").classed("is-selected",!1),s&&o.selectAll(".is-not-selected").classed("is-not-selected",!1),h)if(o.selectAll(".bar, .target-bar").style("opacity",.6),fe.clickedLegend&&!s)i?(t.isTargetBar?(t.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),b.style("font-weight","bolder")):(t.svg.selectAll(p?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(p?m:v).style("font-weight","bolder")),o.selectAll(".bar").each((function(t,e){var i=d3.select(this);i.classed("is-selected")&&C.push({elem:i.node(),data:n?n[e]:t})})),x=C):(r||a)&&(c||l?t.svg.selectAll(".series-"+t.i).classed("is-selected",!0).style("opacity",1):y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each((function(n,i){var s=d3.select(this);(e=t.dataset)||(e=n),a?(e[i][t.i]&&(e=e[i][t.i]),e[t.i]&&e[t.i][i]&&(e=e[t.i][i]),e[i]&&e[i][t.i]&&(e=e[i][t.i])):d&&!l?e[w]&&e[w].data[i]&&(e=e[w].data[i]):(e[i].data[t.i]&&(e=e[i].data[t.i]),e[t.i]&&e[t.i].data[i]&&(e=e[t.i].data[i]),e[i]&&e[i].data[t.i]&&(e=e[i].data[t.i])),C.push({elem:s.node(),data:e})})),x=C);else if(l&&d&&r)e=n[0]&&n[0].data?n[0].data:t.d,u.classed("is-selected",!0).style("opacity",1),x.push({elem:u.nodes(),data:e[t.i]});else if(!l&&!c||d||!r&&!a){if(r||a)o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat(t.i+2,")")).style("font-weight","bolder"),o.selectAll(".bar:nth-child(".concat(t.i+1,")")).classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each((function(e,i){var s=d3.select(this),r=e;n&&(r=a&&d?n[i][t.i]:n[i].data[t.i]),C.push({elem:s.node(),data:r})})),x=C;else if(s){o.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var k=n&&n[0]&&n[0].data?n[0].data[t.i]:t.d?t.d.data:t.d;u.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),x.push({elem:u.nodes(),data:k,index:t.i})}}else{if(o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat((c?w:t.i)+2,")")).style("font-weight","bolder"),u.classed("is-selected",!0).style("opacity",1),i){var T=t.isTargetBar?t.i:t.i-t.dataset[0].data.length;o.select(".target-bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),o.select(".bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),d3.select(o.selectAll(".bartext").nodes()[T]).style("font-weight","bolder"),d3.select(o.selectAll(".target-bartext").nodes()[T]).style("font-weight","bolder")}(c||i||r)&&((!i&&!r||r&&c)&&y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),y.selectAll(".bar").each((function(t,e){var i=d3.select(this);i.classed("is-selected")&&C.push({elem:i.node(),data:n?n[e]:t})})),c?x.push({groupIndex:w,groupElem:y.nodes()[0],groupItems:C}):x=C)}else o.selectAll(".bar, .target-bar").style("opacity",1),m.style("font-weight","bolder"),v.style("font-weight","bolder"),s&&u.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");fe.clickedLegend&&(fe.clickedLegend=!1),fe.selected=x,t.isTrigger&&$(t.container).triggerHandler(h?"selected":"unselected",[x])},fe.setSelected=function(t,e,n){if(t){var i,a,s,r,o,l=0,c=b.equals,d=n.isPie?n.svg.node().nextSibling:n.svg.node().parentNode.nextSibling,h=d3.select(d),u=h.node()&&h.classed("chart-legend"),p=function(e){var r=!!e;(e=r?d3.select(e):n.svg).selectAll(".bar").each((function(e,o){e&&l<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&c(t.data,n.chartData[e.index].data[o])||t.elem&&$(this).is(t.elem))&&(l++,a=d3.select(this),i=o,r&&!n.isStacked&&(s=!0))}))};n.isGrouped||n.isStacked&&!n.isSingle?(n.chartData.forEach((function(e,o){l<1&&(r=$(n.svg.select('[data-group-id="'+o+'"]').node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===o||t.data&&c(t.data,e)||t.elem&&r.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(l++,a=n.svg.select('[data-group-id="'+o+'"]').select(".bar"),i=o,n.isStacked&&!n.isGrouped&&(s=!0)))})),l<1&&(o=n.svg.selectAll(".series-group")).nodes().length&&o.each((function(){p(this)}))):p(),l>0&&(e||!a.classed("is-selected"))&&(s?u&&$(h.selectAll(".chart-legend-item").nodes()[i]).trigger("click.chart"):a.on("click").call(a.node(),a.datum(),i))}},fe.labelsColide=function(t){var e=t.selectAll(".x text"),n=!1;return e.each((function(t,i){var a,s=this.getBoundingClientRect();e.each((function(t,e){i!==e&&(a=this.getBoundingClientRect(),!(s.right<a.left||s.left>a.right||s.bottom<a.top||s.top>a.bottom)&&(n=!0))}))})),n},fe.applyAltLabels=function(t,e,n,i,a){t.selectAll(i||".x text").each((function(t,i){var s=e[i]?e[i][n]:"";s=s||(a?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(s)}))},fe.triggerContextMenu=function(t,e,n){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var i=$.Event("contextmenu");i.target=e,i.pageX=d3.event.pageX,i.pageY=d3.event.pageY,$(t).trigger(i,[e,n])},fe.wrap=function(t,e,n){n||(n=1.27),e||(n=60),t.each((function(){var t=d3.select(this),i=t.text().split(/\s+/).reverse(),a="",s=[],r=0;if(!(i.length<=1))for(var o=n,l=t.attr("y"),c=t.attr("x"),d=parseFloat(t.attr("dy")),h=t.text(null).append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(d,"em"));a=i.pop();)s.push(a),h.text(s.join(" ")),h.node().getComputedTextLength()>e&&(s.pop(),h.text(s.join(" ")),s=[a],h=t.append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(++r*o+d,"em")).text(a))}))};var ge={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function me(t,e){this.settings=b.mergeSettings(t,e,ge),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}me.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t=this,e=this.settings.dataset[0],i=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var a=0,s=[],r=e.data[0]?e.data[0].tooltip:[],o=!1,l=this.element.parent(),c=l.width()-40-35,d=l.height()-30-35-30;d=d<0?50:d;for(var h=d3.select(this.element[0]).append("svg").attr("width",c+40+35).attr("height",d+30+35).append("g").attr("transform","translate(".concat(40,",").concat(30,")")),u=function(n,i,a){function s(t,e,n){var i=t(e,n);return void 0!==i?i:e}return e.format&&"function"==typeof e.format[n]?s(e.format[n],i,a):e.format&&"string"==typeof e.format[n]?d3.format(e.format[n])(i):t.settings.format&&"function"==typeof t.settings.format[n]?s(t.settings.format[n],i,a):t.settings.format&&"string"==typeof t.settings.format[n]?d3.format(t.settings.format[n])(i):i},p=function(t,e){return u("ranges",t,e)},f=function(l){var d=t.settings.animate?400:0,f=t,g=e.data[l],m=g.ranges.slice().sort(d3.descending),v=g.markers?g.markers.slice().sort(d3.descending):[],b=g.measures?g.measures.slice().sort(d3.descending):[],y=g.ranges.slice().sort(d3.ascending),w=g.markers?g.markers.slice().sort(d3.ascending):[],x=g.measures?g.measures.slice().sort(d3.ascending):[];0===v.length&&(v=b,w=x,o=!0);var C=h.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*l,")"));C.append("g").append("text").attr("class","title").attr("dy","-10px").text((function(){return g.title})).append("tspan").attr("class","subtitle").attr("dx","15px").text((function(){return g.subtitle}));var k=Math.max(m[0],v[0],b[0]),T=Math.min(y[0],w[0],x[0]);T=T<0?T:0;var S,A,E=d3.scaleLinear().domain([T,k]).range([0,c]).nice(),D=(A=(S=E)(0),function(t){return Math.abs(S(t)-A)}),I=C.selectAll("rect.range").data(m);I.enter().append("rect").attr("class",(function(t,e){return"range s".concat(e)})).attr("data-idx",l).attr("width",0).attr("x",(function(t){return E(t<0?t:0)})).style("fill",(function(t,n){return e.barColors?e.barColors[n]:""})).attr("height",20).on("click.".concat(f.namespace),(function(){var t=d3.select(this);f.element.trigger("selected",[t,e.data[t.attr("data-idx")]])})).on("mouseenter.".concat(f.namespace),(function(t,o){var c=d3.select(this),d=e.data[c.attr("data-idx")],h=this.getBoundingClientRect(),u="<p>".concat(p(t,o),"</p>"),f=function(){var t=fe.tooltipSize(u),e=h.left+h.width-t.width/2,n=h.top-t.height+$(window).scrollTop()-5;""!==u&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[i?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(e,n,u,"top"))};if(d.tooltip&&d.tooltip[o]&&(u=d.tooltip[d.tooltip.length-o-1]),r&&"function"==typeof r&&!s[o]){u="";var g=!0;a=setInterval((function(){g&&(g=!1,r((function(t){u=t,s[l]=t}))),""!==u&&(clearInterval(a),f())}),10)}else r="object"===n(r)?"":r,u=s[l]||r||u||"",f()})).on("mouseleave.".concat(f.namespace),(function(){clearInterval(a),fe.hideTooltip()})).on("contextmenu.".concat(f.namespace),(function(t){fe.triggerContextMenu(f.element,d3.select(this).nodes()[0],t)})).merge(I).transition().duration(d).attr("width",D);var M=C.selectAll("rect.measure").data(b);M.enter().append("rect").attr("class",(function(t,e){return"measure s".concat(e)})).attr("width",0).attr("height",3).attr("x",(function(t){return E(t<0?t:0)})).style("fill",(function(t,n){return e.lineColors?e.lineColors[n]:""})).attr("y",8.5).merge(M).transition().duration(d).attr("width",D);var L=C.selectAll("line.marker").data(v);L.enter().append("line").attr("class",o?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",(function(t,n){return e.markerColors?e.markerColors[n]:""})).attr("y1",20/6).attr("y2",100/6).merge(L).transition().duration(d).attr("x1",E).attr("x2",E).attr("y1",20/6).attr("y2",100/6);var P,N=(v[0]>b[0]?"-":"+")+Math.abs(v[0]-b[0]);0!==Math.abs(v[0]-b[0])&&L.enter().append("text").attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",fe.isRTL?"-20px":"20px").attr("x",0).text((P=N,u("difference",P))).merge(L).transition().duration(d).attr("x",(function(){var t=0;return C.selectAll(".measure").each((function(e){var n=D(e),i=E(e);n>t&&(t=n),i>t&&(t=i)})),fe.isRTL?-t:t})).style("opacity",1);var _=C.selectAll("g.tick").data(E.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);_.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),_.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",(function(t){return t<0?"negative-value":"positive-value"})).text((function(t,e){return p(t,e)})),_.transition().duration(d).attr("transform",(function(t){return"translate(".concat(E(t),",0)")})).style("opacity",1),fe.isRTL&&fe.isIE&&h.selectAll("text").attr("transform","scale(-1, 1)")},g=0;g<e.data.length;g++)f(g);return fe.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".range").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var ve={dataset:[]};function be(t,e){this.settings=b.mergeSettings(t,e,ve),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}be.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var t=this.settings.dataset[0];0===this.settings.dataset.length&&((t={}).data=[{name:{text:D?D.translate("NoData"):"No Data Available"},completed:{value:0}}]);var e=t.data[0],n="completion-target"===this.settings.type,i="targeted-achievement"===this.settings.type;$(this.element).addClass("completion-chart".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")),e.total=$.extend({},{value:100},e.total);var a,s=function(t){return void 0===t},r=function(t,e){var n=e?0:"";return s(t)?n:t},o=function(t,n){return n=n||e,Math.round(t/r(n.total.value,!0)*100)},c=function(t){return D.formatNumber(t/100,{style:"percent",maximumFractionDigits:0})},d=function(t,n){var i=t.toString();return-1!==i.indexOf("%")?function(t,n){return t/100*r((n=n||e).total.value,!0)}(i.replace(/%/g,""),n):t},h=function(t,e,n){var i=o(e,n),a=(i=i<0?0:i)>100?100:i;t[0].style.width="".concat(a,"%"),0===a&&(t[0].className+="is-empty")},u=function(t,e,n){var i=n?t._value:t.value;return t&&!s(i)&&t.format?function(t,e,n){return".0%"===e?c(o(t,n)):d3.format(e||"")(t)}(d(i,e),t.format,e):t?d(i,e):0},p=this,f=$.extend({},{show:!1,color1:"",color2:"inverse"},e.percentText);s(f.color)||""!==f.color1||(f.color1=f.color);var g,m={body:$('<div class="total bar" />')},v=function(t){var n={};return(t=t||e).info&&!s(t.info.color)&&0===e.info.color.indexOf("#")&&(n.info=!0),t.completed&&!s(t.completed.color)&&0===t.completed.color.indexOf("#")&&(n.completed=!0),t.remaining&&!s(t.remaining.color)&&0===t.remaining.color.indexOf("#")&&(n.remaining=!0),t.targetline&&!s(t.targetline.color)&&0===t.targetline.color.indexOf("#")&&(n.targetline=!0),n}();if(n||i){var b=function(t){var n,a={};return(t=t||e).total.difference&&(a.value=t.total.value-t.completed.value,a.format=e.total.format),n=(t.total.textOnly?"":u(t.total.difference?a:t.total))+(t.total.text||""),i&&t.remaining?(t.remaining.textOnly?"":u(t.remaining))+(t.remaining.text||""):n}();m.body.addClass("chart-completion-target".concat(i?" chart-targeted-achievement":"")),m.label='<span class="label">\n        <span class="name">'.concat(r(e.name.text)," ").concat(e.completed.color&&"error"===e.completed.color?$.createIcon({icon:"error",classes:"icon-error"}):"",'</span>\n        <span class="l-pull-right total value">').concat(b,"</span>\n      </span>")}else{m.body.addClass("chart-completion");var y=r(e.name.text),w=r(e.completed.color),x=r(e.info.color),C=e.info.color&&!v.info?x:"",k=r(e.info.text);v.completed||(C=w);var T="";e.info.color&&v.info&&(T=x),v.completed&&(T=w);var S=e.info&&!s(e.info.value)?r(e.info.value):u(e.completed);m.label='<b class="label name">'.concat(y,'</b>\n      <b class="label info ').concat(C,' colored">\n      <span class="value ').concat(C,'" ').concat(T?'style="color:'.concat(T):"",'">').concat(S,'</span>\n      <span class="text ').concat(C,'" ').concat(T?'style="color:'.concat(T):"",'">').concat(k,"</span>\n      </b>")}return m.remaining=e.remaining?"".concat('<div class="target remaining bar').concat(v.remaining?"":" ".concat(r(e.remaining.color)),'"').concat(v.remaining?' style="color:'.concat(e.remaining.color,";background-color:").concat(e.remaining.color,';"'):"",'">').concat(i?"":'<span aria-hidden="true"'.concat(n||i?"":' class="audible"',">")+'<span class="value'.concat(v.remaining?"":" ".concat(r(e.remaining.color)),'"').concat(v.remaining?' style="color:'.concat(e.remaining.color,';"'):"",'">').concat(u(e.remaining),"</span><br />")+'<span class="text'.concat(v.remaining?"":" ".concat(r(e.remaining.color)),'"').concat(v.remaining?' style="color:'.concat(e.remaining.color,';"'):"",'">').concat(r(e.remaining.text),"</span>")+"</span>","</div>"):'<div class="target remaining bar" style="opacity: 0"></div>',e.completed&&i&&(f._value=(g=g||e).completed?g.completed.value:0,f.percent=o(r(f._value,!0),g),f.format=".0%",f._text=void 0!==f.text?f.text:void 0!==f.value?c(f.value):u(f,g,!0),f.color=f[f.percent>55?"color2":"color1"],v.percentText=0===f.color.indexOf("#"),m.completed="".concat('<div class="completed bar').concat(v.completed?"":" ".concat(r(e.completed.color)),'"').concat(v.completed?' style="color:'.concat(e.completed.color,";background-color:").concat(e.completed.color,';"'):"",'"></div>').concat(f.show?'<div class="chart-percent-text'.concat(v.percentText||""===f.color?"":" ".concat(f.color),'"').concat(v.percentText?' style="color:'.concat(f.color,';"'):"",">").concat(f._text,"</div>"):"",'<span class="completed-label" aria-hidden="true"').concat(n||i?"":' class="audible"',">")+'<span class="text">'.concat(r(e.completed.text),"</span>")+"</span>"),(e.completed.text||e.completed.format&&!i)&&this.element.addClass("chart-completion-target-padding"),e.completed&&!i&&(m.completed="".concat('<div class="completed bar').concat(v.completed?"":" ".concat(r(e.completed.color)),'"').concat(v.completed?' style="color:'.concat(e.completed.color,";background-color:").concat(e.completed.color,';"'):"",">")+'<span aria-hidden="true"'.concat(n||i?"":' class="audible"',">")+'<span class="value'.concat(v.completed?"":" ".concat(r(e.completed.color)),'"').concat(v.completed?' style="color:'.concat(e.completed.color,';"'):"",'">').concat(u(e.completed),"</span><br />")+'<span class="text'.concat(v.completed?"":" ".concat(r(e.completed.color)),'"').concat(v.completed?' style="color:'.concat(e.completed.color,';"'):"",'">').concat(r(e.completed.text),"</span>")+"</span></div>"),e.targetline&&(m.targetline="".concat('<div class="target-line targetline bar').concat(v.targetline?"":" ".concat(r(e.targetline.color)),'"').concat(v.targetline?' style="color:'.concat(e.targetline.color,";background-color:").concat(e.targetline.color,';"'):"",'">')+'<span aria-hidden="true"'.concat(n||i?"":' class="audible"',">")+'<span class="value'.concat(v.targetline?"":" ".concat(r(e.targetline.color)),'"').concat(v.targetline?' style="color:'.concat(e.targetline.color,';"'):"",'">').concat(u(e.targetline),"</span><br />")+'<span class="text'.concat(v.targetline?"":" ".concat(r(e.targetline.color)),'"').concat(v.targetline?' style="color:'.concat(e.targetline.color,';"'):"",'">').concat(r(e.targetline.text),"</span>")+"</span></div>"),l.append(m.body,(m.remaining||"")+(m.completed||"")+(m.targetline||""),"<a><use><svg><div><span><br>"),l.append(this.element,m.label+m.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),a={name:$(".name",this.element),info:{value:$(".info .value",this.element),text:$(".info .text",this.element)},completed:{bar:$(".completed.bar",this.element),value:$(".completed .value",this.element),text:$(".completed .text, .completed-label .text",this.element)},remaining:{bar:$(".remaining.bar",this.element),value:$(".remaining .value",this.element),text:$(".remaining .text",this.element)},targetline:{bar:$(".targetline",this.element),value:$(".targetline .value",this.element),text:$(".targetline .text",this.element)},total:{bar:$(".total.bar",this.element),value:$(".total.value",this.element)},percentText:$(".chart-percent-text",this.element)},function(t){a.name.data("jsonData",{name:(t=t||e).name}),a.info.value.add(a.info.text).data("jsonData",{info:t.info}),a.completed.bar.add(a.completed.value).add(a.completed.text).data("jsonData",{completed:t.completed}),a.remaining.bar.add(a.remaining.value).add(a.remaining.text).data("jsonData",{remaining:t.remaining}),a.targetline.bar.add(a.targetline.value).add(a.targetline.text).data("jsonData",{targetline:t.targetline}),a.total.bar.add(a.total.value).data("jsonData",{total:t.total}),a.percentText.data("jsonData",{percentText:t.percentText})}(),function(t){var s,r;(t=t||e).completed&&(s=d(t.completed.value,t),h(a.completed.bar,s,t)),t.remaining&&(s=d(t.completed.value,t)+d(t.remaining.value,t),h(a.remaining.bar,s,t),n&&!i&&setTimeout((function(){var t=$(".remaining",p.element),e=$(".total",p.element),n=$(".completed .value",p.element)[0].getBoundingClientRect(),i=t.find(".value")[0].getBoundingClientRect();t.add(e)[n.right>i.left-20?"addClass":"removeClass"]("overlap")}),500)),t.targetline&&(s=d(t.targetline.value,t),a.targetline.bar[0].style.left="".concat((r=s)>100?100:r<0?0:r,"%"))}(),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("completion-chart"),(function(){t.updated()})),this},updated:function(t){var e=t.type||this.settings.type;return this.settings=t,this.settings.type=e,t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function(){this.element.empty().removeClass("completion-chart"),fe.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var ye={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function we(t,e){this.settings=b.mergeSettings(t,e,ye),this.element=$(t),this.init()}we.prototype={init:function(){if(!this.settings.colors){var t=W.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=t.azure[W.uplift?"80":"70"].value,this.settings.colors[1]=t.graphite[40].value,this.settings.colors[2]=t.graphite[30].value,this.settings.colors[3]=t.graphite[20].value}return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var t,e,i,a=this,s=this.element.closest(".is-personalizable").length>0,r=[],o=[],l=a.settings.tooltip,c=0,d=0,h=0,u=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),p=u.width>300?4:3,f=a.settings.dataset;for(i=0;i<f.length;i++)d=d3.min([d3.min(f[i].data),d]),c=d3.max([d3.max(f[i].data),c]),h=d3.max([f[i].data.length,h]);var g=u.width,m=u.height,v=d3.scaleLinear().domain([0,h]).range([10,g-10]),b=d3.scaleLinear().domain([d,c]).range([m-10,10]),y=d3.line().x((function(t,e){return v(e)})).y((function(t){return b(t)}));fe.appendTooltip();var w=d3.select(this.element[0]).append("svg").attr("height",m).attr("width",g);if(a.settings.isMedianRange){c=d3.max(f[0].data),d=d3.min(f[0].data);var x=g-45,C=d3.median(f[0].data),k=c-d,T=d3.scaleLinear().domain([d,c]).range([0,m]),S=m-T(C>k?C:k),A=m-T(C<k?C:k);w.append("g").attr("class","medianrange").attr("transform",(function(){return"translate(".concat(10,",").concat(S,")")})).append("rect").attr("width",x).attr("height",A).style("opacity","0.06").on("mouseenter.".concat(a.namespace),(function(){var e=this.getBoundingClientRect(),o='<p class="sparkline-tooltip">'+D.translate("Median")+": <b>"+C+"</b><br>"+D.translate("Range")+": <b>"+k+"</b>"+(a.settings.isPeakDot?"<br>"+D.translate("Peak")+": <b>"+c+"</b>":"")+"</p>",d=function(){var t=fe.tooltipSize(o),n=e.left+(e.width-t.width)/2,i=e.top-t.height-5;""!==o&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[s?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(n,i,o,"top"))};if(l&&"function"==typeof l&&!r[i]){o="";var h=!0;t=setInterval((function(){h&&(h=!1,l((function(t){o=t,r[i]=t}))),""!==o&&(clearInterval(t),d())}),10)}else l="object"===n(l)?"":l,o=r[i]||l||f[0].tooltip||o||"",d()})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(t),fe.hideTooltip()}))}for(i=0;i<f.length;i++){var $=f[i];w.append("g").append("path").attr("d",y($.data)).attr("stroke",a.settings.isMinMax?"#999999":this.sparklineColors(i)).attr("class","team connected-line")}return d=d3.min(f[0].data),w.selectAll(".point").data(f[0].data).enter().append("circle").attr("r",(function(t){return a.settings.isMinMax&&c===t||a.settings.isMinMax&&d===t?p+1:a.settings.isDots||a.settings.isPeakDot&&c===t?p:0})).attr("class",(function(t){return a.settings.isPeakDot&&c===t&&!a.settings.isMinMax?"point peak":a.settings.isMinMax&&c===t?"point max":a.settings.isMinMax&&d===t?"point min":"point"})).style("fill",(function(t){return a.settings.isPeakDot&&c===t&&!a.settings.isMinMax?"#ffffff":a.settings.isMinMax&&c===t?"#56932E":a.settings.isMinMax&&d===t?"#941E1E":a.sparklineColors(0)})).style("stroke",(function(t){return a.settings.isPeakDot&&c===t&&!a.settings.isMinMax?a.sparklineColors(0):a.settings.isMinMax&&c===t||a.settings.isMinMax&&d===t?"none":"#ffffff"})).style("cursor","pointer").attr("cx",(function(t,e){return v(e)})).attr("cy",(function(t){return b(t)})).on("mouseenter.".concat(a.namespace),(function(t){var r=this.getBoundingClientRect(),h="<p>".concat(f[0].name?"".concat(f[0].name,"<br> ").concat(a.settings.isMinMax&&c===t?"".concat(D.translate("Highest"),": "):a.settings.isMinMax&&d===t?"".concat(D.translate("Lowest"),": "):a.settings.isPeakDot&&c===t?"".concat(D.translate("Peak"),": "):""):"","<b>").concat(t,"</b></p>"),u=function(){var t=fe.tooltipSize(h),e=r.left-t.width/2+6,n=r.top-t.height-8;""!==h&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[s?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(e,n,h,"top"))};if(l&&"function"==typeof l&&!o[i]){h="";var g=!0;e=setInterval((function(){g&&(g=!1,l((function(t){h=t,o[i]=t}))),""!==h&&(clearInterval(e),u())}),10)}else l="object"===n(l)?"":l,h=o[i]||l||f[0].tooltip||h||"",u();d3.select(this).attr("r",a.settings.isMinMax&&c===t||a.settings.isMinMax&&d===t?p+2:p+1)})).on("mouseleave.".concat(a.namespace),(function(t){clearInterval(e),fe.hideTooltip(),d3.select(this).attr("r",a.settings.isMinMax&&c===t||a.settings.isMinMax&&d===t?p+1:p)})).on("contextmenu.".concat(a.namespace),(function(t){var e={value:t,name:f[0].name||""};a.settings.isMinMax&&c===t&&(e.highest=!0),a.settings.isMinMax&&d===t&&(e.lowest=!0),a.settings.isPeakDot&&c===t&&(e.peak=!0),fe.triggerContextMenu(a.element,d3.select(this).nodes()[0],e)})),this.element.trigger("rendered",w),this},calculateAspectRatioFit:function(t){var e=Math.min(t.maxWidth/t.srcWidth,t.maxHeight/t.srcHeight);return{width:t.srcWidth*e,height:t.srcHeight*e}},handleEvents:function(){var t=this;return this.element.on("updated.".concat("sparkline"),(function(e,n){t.updated(n)})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".medianrange").off(e(["mouseenter","mouseleave"])),this.element.find(".point").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var xe={title:null,info:null,icon:null,button:null,color:"graphite"};function Ce(t,e){this.settings=b.mergeSettings(t,e,xe),this.element=$(t),this.init()}Ce.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var t=this.settings;return t.icon&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(t.icon,'"></use>\n          </svg></div>')).appendTo(this.element),t.title&&("[NoData]"===t.title&&(t.title=D?D.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(t.title,"</div>")).appendTo(this.element)),t.info&&$('<div class="empty-info">'.concat(t.info,"</div>")).appendTo(this.element),t.button&&($("".concat('<div class="empty-actions"><button type="button" class="btn-secondary hide-focus ').concat(t.button.cssClass,'" id="').concat(t.button.id,'">')+"<span>".concat(t.button.text,"</span>")+"</button></div>").appendTo(this.element),t.button.click&&this.element.on("click","button",t.button.click)),this},updated:function(t){this.settings=b.mergeSettings(this.element,t,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(t){return this.each((function(){var e=$.data(this,"emptymessage");e?e.updated(t):e=$.data(this,"emptymessage",new Ce(this,t))}))};var ke={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,hideDots:!1,animate:!0,redrawOnResize:!0,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Te(t,e){this.settings=b.mergeSettings(t,e,ke),this.element=$(t),this.init()}Te.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,i=this,a=this.settings,s=this.element.closest(".is-personalizable").length>0,r=!!a.formatterString;if(this.element.addClass("line-chart".concat(a.isBubble?" bubble":"")),this.element.addClass("line-chart".concat(a.isScatterPlot?" scatterplot":"")),0===a.dataset.length)return i.element.emptymessage(a.emptyMessage),this;var o={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};a.isBubble&&(o.radius=0,o.radiusOnHover=0,o.strokeWidth=0),a.isScatterPlot&&(o.radius=0,o.strokeWidth=50),$.extend(!0,o,a.dots),i.dots=o;var c,d,h,u=D.isRTL(),p=[],f=a.tooltip,g={},m={atLeastOne:!1},v=["left","top","right","bottom"];if(a.axisLabels&&$.extend(!0,g,a.axisLabels),!$.isEmptyObject(g))for(d=0,h=v.length;d<h;d++){var y=g[v[d]];y&&"string"==typeof y&&""!==$.trim(y)&&(m[v[d]]=!0,m.atLeastOne=!0)}var w="",x=0,C=a.dataset,k=a.hideDots,T=this.element.parent(),S=!!$(".widget-chart-action",T).length,A=T.width()<450,E=function(t){return void 0!==t&&"function"!=typeof t&&null!==t?"boolean"==typeof t?t?"-45":null:t:null},I={large:E(null===(t=a.xAxis)||void 0===t||null==t?void 0:t.rotate),small:E(null===(e=a.xAxis)||void 0===e||null==e?void 0:e.rotateOnSmallView)},M=!!I.large;M&&(I.use=I.large),A&&I.small&&(M=!0,I.use=I.small);var L=function(t,e){return d3.max(t.data,(function(t){return e?t.value[e]:t.value}))};if(M){C[0].data.map((function(t){t.name.length>w.length&&(w=t.name)}));var P=Math.abs(I.use);P=isNaN(P)?0:P,x=w.length*(P>50?5:2)}var N={top:m.top?S?15:40:S?5:30,right:m.right?65:55,bottom:m.bottom?M?60:50:x+35,left:m.right?75:65},_=T.width()-N.left-N.right,R=T.height()-N.top-N.bottom-30;S&&(R-=40),i.svg=d3.select(this.element[0]).append("svg").attr("width",_+N.left+N.right).attr("height",R+N.top+N.bottom).append("g").attr("transform","translate(".concat(N.left,",").concat(N.top,")"));var B=C[0].data.map((function(t){return t.name})),O={};C[0]&&C[0].valueFormatterString&&$.extend(!0,O,C[0].valueFormatterString);var F,z=function(t,e){return!$.isEmptyObject(O)&&t?d3.format(t)("0.0%"===t?e/100:e):e},H={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};C[0]&&C[0].labels&&$.extend(!0,H,C[0].labels);var q,V=(a.xAxis&&a.xAxis.scale?a.xAxis.scale:d3.scaleLinear()).range([0,_]),j=d3.scaleLinear().range([R,0]),W=d3.scaleLinear().range([1,25]);F=a.isBubble?{x:C.map((function(t){return L(t,"x")})),y:C.map((function(t){return L(t,"y")})),z:C.map((function(t){return L(t,"z")}))}:a.isScatterPlot?{x:C.map((function(t){return L(t,"x")})),y:C.map((function(t){return L(t,"y")}))}:C.map((function(t){return L(t)})),q=d3.max(C.map((function(t){return t.data.length})))<=1?d3.max(C.map((function(t){return t.data.length}))):d3.max(C.map((function(t){return t.data.length})))-1;var U,G,Y=V.domain(a.xAxis&&a.xAxis.domain?a.xAxis.domain:[0,a.isBubble||a.isScatterPlot?d3.max(F.x):q]),K=j.domain([0,d3.max(a.isBubble||a.isScatterPlot?F.y:F)]).nice(),X=W.domain([0,d3.max(a.isBubble?F.z:F)]).nice(),Q=q;a.xAxis&&a.xAxis.ticks&&(Q="auto"===a.xAxis.ticks?Math.max(_/85,2):a.xAxis.ticks,(a.isBubble||a.isScatterPlot&&A)&&(Q=Math.round(q/2))),A&&(null===(U=a.xAxis)||void 0===U||null==U?void 0:U.numTicksOnSmallView)&&(Q=null===(G=a.xAxis)||void 0===G||null==G?void 0:G.numTicksOnSmallView);var J,Z=d3.axisBottom(Y).ticks(Q).tickPadding(10).tickSize(a.isBubble||a.isScatterPlot?-(R+10):0).tickFormat((function(t,e){if(a.xAxis){if(a.xAxis.formatter)return a.xAxis.formatter(t,e);if("auto"===a.xAxis.ticks)return B[t]}return a.isBubble||a.isScatterPlot?t:B[t]})),tt=d3.axisLeft(K).ticks(8).tickSize(-(_+20)).tickPadding(u?-18:20);if(a.yAxis&&a.yAxis.formatter&&tt.tickFormat((function(t,e){return"function"==typeof a.yAxis.formatter?a.yAxis.formatter(t,e):t})),a.yAxis&&a.yAxis.ticks&&tt.ticks(a.yAxis.ticks.number,a.yAxis.ticks.format),m.atLeastOne){var et=i.svg.append("g").attr("class","axis-labels"),nt={top:"translate(".concat(_/2,",").concat(-10,")"),right:"translate(".concat(_+28,",").concat(R/2,")rotate(90)"),bottom:"translate(".concat(_/2,",").concat(R+40,")"),left:"translate(".concat(-40,",").concat(R/2,")rotate(-90)")},it={top:"rotate(0deg) scaleX(-1) translate(-".concat(_/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(R/2+5,"px, -").concat(_+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(_/2,"px, ").concat(R+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(R/2-5,"px, ",55,"px)")};for(d=0,h=v.length;d<h;d++)m[J=v[d]]&&et.append("text").attr("class","axis-label-".concat(J)).attr("text-anchor","middle").attr("transform",u?"":nt[J]).style("font-size","1.25em").style("transform",u?it[J]:"").text(g[J])}i.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(R,")")).call(Z),i.svg.append("g").attr("class","y axis").call(tt),i.svg.selectAll(".tick line").attr("x1","-10"),(a.isBubble||a.isScatterPlot)&&(i.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0),i.svg.select(".x.axis .tick line").attr("x2","-10").style("opacity",1),i.svg.select(".y.axis .tick line").style("opacity",1)),u&&(i.svg.selectAll("text").attr("transform","scale(-1, 1)"),i.svg.selectAll(".y.axis text").style("text-anchor","end")),M&&i.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",(function(){return-(this.getBBox().width+10)})).attr("dy","1em").attr("transform","rotate(".concat(I.use,")")).style("text-anchor","start"),a.xAxis&&a.xAxis.formatText&&i.svg.selectAll(".x.axis .tick text").each((function(t){var e=d3.select(this),n=d3.select(this).text(),i=a.xAxis.formatText(n,t);l.html(e.node(),i,"<tspan><text><glyph>")}));var at=d3.line().x((function(t,e){return Y(a.xAxis&&a.xAxis.parser?a.xAxis.parser(t,e):a.isBubble||a.isScatterPlot?t.value.x:e)})).y((function(t){return K(a.isBubble||a.isScatterPlot?t.value.y:t.value)}));C.forEach((function(t,e){var l=i.svg.append("g").attr("data-group-id",e).attr("class","line-group");if(a.isArea){var h=d3.area().x((function(t,e){return Y(e)})).y0(R).y1((function(t){return K(a.isBubble||a.isScatterPlot?t.value.y:t.value)}));l.append("path").datum(t.data).attr("fill",(function(){return fe.chartColor(e,"line",t)})).style("opacity",".2").attr("class","area").attr("d",h)}var u=l.append("path").datum(t.data).attr("d",at(t.data)).attr("stroke",(function(){return a.isBubble||a.isScatterPlot?"":fe.chartColor(e,"line",t)})).attr("stroke-width",2).attr("fill","none").attr("class","line").on("click.".concat(i.namespace),(function(){fe.selectElement(d3.select(this.parentNode),i.svg.selectAll(".line-group"),t,i.element)})).on("contextmenu.".concat(i.namespace),(function(){fe.triggerContextMenu(i.element,d3.select(this).nodes()[0],t)})),g=u.node().getTotalLength();u.attr("stroke-dasharray","".concat(g," ").concat(g)).attr("stroke-dashoffset",g).transition().duration(a.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var m=function(e,i){var l,h=e.getBoundingClientRect(),u="<p><b>".concat(i.name," </b> ").concat((l=i.value,r?d3.format(a.formatterString)(l):l),"</p>"),g=function(){var t=fe.tooltipSize(u),e=h.left-t.width/2+6,n=h.top-t.height-18;e=a.isBubble||a.isScatterPlot?h.left+h.width/2-t.width/2:e,""!==u&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[s?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(e,n,u,"top"))};if(a.isBubble||a.isScatterPlot){for(var m in u='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(i.name,"</b></div>"),i)if(i.hasOwnProperty(m))if("object"!==n(i[m]))H[m]&&(u+="".concat('<div class="swatch-row"><span>').concat(H[m],"</span>")+"<b>".concat(t.name,"</b>")+"</div>");else{var v=i[m];for(var b in v)v.hasOwnProperty(b)&&(u+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(H[m][b],"</span>")+"<b>".concat(z(O[b],v[b]),"</b>")+"</div>")}u+="</div>"}if(f&&"function"==typeof f&&!p[d]){u="";var y=!0;c=setInterval((function(){y&&(y=!1,f((function(t){u=t,p[d]=t}))),""!==u&&(clearInterval(c),g())}),10)}else{f="object"===n(f)?"":f,u=p[d]||f||i.tooltip||t.tooltip||u||"",g();for(var w=document.querySelectorAll("#svg-tooltip .swatch-caption span"),x=0;x<w.length;x++)w[x].style.backgroundColor=fe.chartColor(a.isBubble||a.isScatterPlot?i.lineIdx:x,"line",i)}d3.select(this).attr("r",(function(t){return a.isBubble?2+X(t.value.z):o.radiusOnHover}))};k||(a.isScatterPlot||l.selectAll("circle").data(t.data).enter().append("circle").attr("class",o.class).attr("cx",(function(t,e){return Y(a.xAxis&&a.xAxis.parser?a.xAxis.parser(t,e):a.isBubble||a.isScatterPlot?t.value.x:e)})).attr("cy",(function(t){return K(a.isBubble||a.isScatterPlot?0:t.value)})).attr("r",o.radius).style("stroke-width",o.strokeWidth).style("fill",(function(){return fe.chartColor(e,"line",t)})).style("opacity",a.isBubble||a.isScatterPlot?".7":"1").on("mouseenter.".concat(i.namespace),(function(t){t.lineIdx=e,m(this,t)})).on("mouseleave.".concat(i.namespace),(function(){clearInterval(c),fe.hideTooltip(),d3.select(this).attr("r",(function(t){return a.isBubble?X(t.value.z):o.radius}))})).on("click.".concat(i.namespace),(function(t){fe.selectElement(d3.select(this.parentNode),i.svg.selectAll(".line-group"),t,i.element)})).on("contextmenu.".concat(i.namespace),(function(t){fe.triggerContextMenu(i.element,d3.select(this).nodes()[0],t)})),a.isScatterPlot&&l.selectAll(".symbol").data(t.data).enter().append("path").attr("class","symbol").attr("transform",(function(t){return"translate(".concat(Y(t.value.x),",").concat(K(t.value.y),")")})).attr("d",d3.symbol().size(o.strokeWidth).type((function(){return d3.symbols[e]}))).style("opacity",0).style("fill",(function(){return fe.chartColor(e,"line",t)})).on("mouseenter.".concat(i.namespace),(function(t){t.lineIdx=e,m(this,t)})).on("mouseleave.".concat(i.namespace),(function(){clearInterval(c),fe.hideTooltip(),d3.select(this).attr("r",(function(){return o.radius}))})).on("click.".concat(i.namespace),(function(t){fe.selectElement(d3.select(this.parentNode),i.svg.selectAll(".line-group"),t,i.element)})).on("contextmenu.".concat(i.namespace),(function(t){fe.triggerContextMenu(i.element,d3.select(this).nodes()[0],t)})),a.isBubble&&l.selectAll("circle").attr("cy",(function(t){return K(t.value.y)})).transition().duration(a.animate?750:0).ease(d3.easeCubic).attr("r",(function(t){return X(t.value.z)})),a.isScatterPlot&&l.selectAll(".symbol").transition().duration(a.animate?750:0).ease(d3.easeCubic).style("opacity",1))})),i.svg.selectAll(".y.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")}));var st=C.map((function(t){return{color:t.color,name:t.name,selectionObj:i.svg.selectAll(".line-group"),selectionInverse:i.svg.selectAll(".line-group"),data:t}}));return a.showLegend&&fe.addLegend(st,a.isScatterPlot?"scatterplot":"line",a,this.element),fe.appendTooltip(),fe.setSelected=function(t,e){var n,a,s,r=0,o=b.equals,l=function(e,l,c,d){c?(s=i.svg.select('[data-group-id="'.concat(l,'"]')).select(".dot:nth-child(".concat(d+2,")")),("number"==typeof t.groupIndex&&void 0!==t.fieldName&&void 0!==t.fieldValue&&t.groupIndex===l&&t.fieldValue===c[t.fieldName]||void 0!==t.index&&"number"==typeof t.groupIndex&&t.groupIndex===l&&t.index===d||t.elem&&$(s.node()).is(t.elem)||t.data&&o(t.data,c))&&(r++,a=c,n=i.svg.select('[data-group-id="'.concat(l,'"]')))):(s=i.svg.select('[data-group-id="'.concat(l,'"]')),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===l||t.elem&&$(s.node()).is(t.elem)||t.data&&o(t.data,e))&&(r++,a=e,n=s))};C.forEach((function(t,e){r<1&&t&&t.data&&(t.data.forEach((function(n,i){r<1&&n&&l(t,e,n,i)})),r<1&&l(t,e))})),r>0&&(e||!n.classed("is-selected"))&&fe.selectElement(n,i.svg.selectAll(".line-group"),a,i.element)},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,n=this,i=0,a=function(a,s,r){a.selected&&i<1&&(i++,t=d3.select(n.svg.selectAll(".line-group").nodes()[r]),e=s)};this.settings.dataset.forEach((function(t,e){t&&a(t,t,e)})),this.settings.dataset.forEach((function(t,e){(t||t.data)&&t.data.forEach((function(n){a(n,t,e)}))})),i>0&&fe.selectElement(t,n.svg.selectAll(".line-group"),e,n.element)},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},width:0,getSelected:function(){return fe.selected},setSelected:function(t,e){fe.setSelected(t,e,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout((function(){return e()}),300):e()},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this.element.empty(),t&&t.dataset&&(this.settings.dataset=t.dataset),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".line-group .line").off(e(["click","contextmenu"])),this.element.find(".line-group .symbol").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(e(["mouseenter","mouseleave","click","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var Se={dataset:[],isStacked:!1,showLegend:!0,animate:!0,format:null,redrawOnResize:!0,ticks:9,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ae(t,e){this.settings=b.mergeSettings(t,e,Se),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ae.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t,e=this,n=this.element.closest(".is-personalizable").length>0,i=!!this.settings.formatterString,a=function(t){return i?d3.format(e.settings.formatterString)(t):t},s=this.settings.dataset;if(this.dataset=s,0===s.length)return e.element.emptymessage(e.settings.emptyMessage),this;var o=this.element.parent(),c=D.isRTL(),d="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,h=1===s.length;this.isSingle=h;var u=!(h||!h&&e.settings.isStacked);this.isGrouped=u;var p,f,g,m,v,y,w,x,C,k=h&&void 0===s[0].name?e.settings.isStacked?20:50:35,T=o.width()-45-40-10,S=o.height()-40-k-(h&&void 0===s[0].name?e.settings.isStacked||d?30:0:40),A=d3.min(s,(function(t){return d3.min(t.data,(function(t){return t.value}))})),E=d3.max(s,(function(t){return d3.max(t.data,(function(t){return t.value}))}));d&&(p=d3.min(s,(function(t){return d3.min(t.data,(function(t){return t.target}))})),f=d3.max(s,(function(t){return d3.max(t.data,(function(t){return t.target}))})),A=d3.min([A,p]),E=d3.max([E,f]),w={target:"Target",positive:"Positive",negative:"Negative"},v={target:"neutral",positive:"good",negative:"error"},y={},s[0]&&(s[0].colors&&$.extend(!0,v,s[0].colors),s[0].legends&&$.extend(!0,w,s[0].legends),s[0].patterns&&$.extend(!0,y,s[0].patterns)),x=[],$.each(w,(function(t,e){x.push({name:e,color:v[t],pattern:y[t],option:t})}))),this.element.addClass("column-chart");var I=[],M=e.settings.tooltip,L=d3.scaleBand().range([0,T]).round(!0).padding(.1),P=d3.scaleBand(),N=d3.scaleLinear().range([S,0]),_=null,R=null;if(e.settings.isStacked){var B={y1:[],y2:[]};t=h?s[0].data.map((function(t,e){var n=0;return 0===e?(B.y1.push(t.value),B.y2.push(0)):(n=B.y1[0]+B.y2[0],B.y1[0]=t.value,B.y2[0]=n),[$.extend({},t,{y0:n,y:t.value,x:t.name,color:t.color,pattern:t.pattern,parentName:t.name,tooltip:t.tooltip})]})):s.map((function(t,e){return t.data.map((function(n,i){var a=0;return 0===e?(B.y1.push(n.value),B.y2.push(0)):(a=B.y1[i]+B.y2[i],B.y1[i]=n.value,B.y2[i]=a),$.extend({},n,{y0:a,y:n.value,x:n.name,color:n.color,pattern:n.pattern,parentName:t.name,tooltip:t.tooltip})}))})),d3.stack()(t),_=d3.scaleBand().domain(d3.range(t[0].length)).rangeRound([0,T],.05),h&&e.settings.isStacked&&_.paddingInner(.095),R=d3.scaleLinear().domain([0,d3.max(t,(function(t){return d3.max(t,(function(t){return t.y0+t.y}))}))]).range([0,S])}var O=s[0].data.map((function(t){return t.name})),F=d3.axisBottom(L).tickSize(0).tickPadding(12),z=d3.axisLeft(N).tickSize(-T).tickPadding(c?-12:12).ticks(e.settings.ticks||9,d3.format(e.settings.format||"s"));e.settings.yAxis&&(e.settings.yAxis.formatter&&z.tickFormat((function(t,n){return"function"==typeof e.settings.yAxis.formatter?e.settings.yAxis.formatter(t,n):t})),e.settings.yAxis.ticks&&e.settings.yAxis.ticks.number>1&&e.settings.yAxis.ticks.format&&z.ticks(e.settings.yAxis.ticks.number,e.settings.yAxis.ticks.format));var H=d3.select(this.element[0]).append("svg").attr("width",T+45+40).attr("height",S+40+k).append("g").attr("transform","translate(".concat(45,",").concat(40,")"));this.svg=H;var q,V=s.map((function(t){return t.name})),j=s.map((function(t){return d3.max(t.data,(function(t){return d?t.target:t.value}))}));if(e.settings.isStacked&&(q=t.map((function(t){return d3.max(t,(function(t){return t.y+t.y0}))}))),h&&(V=s[0].data.map((function(t){return t.name}))),d&&(A+=A/N.ticks().length,j[0]+=j[0]/(N.ticks().length/2)),function(){if(e.settings.isStacked&&h)g=s[0].data;else for(var t,n=s.length-1;n>-1;n--)t=s[n].data.map((function(t){return t})),$.extend(!0,g,t),g=$.map(g,(function(t){return t}))}(),e.settings.isStacked&&!h&&(m=V.map((function(t,e){return s[e]}))),L.domain(e.settings.isStacked?O:V),P.domain(O).rangeRound([0,h||e.settings.isStacked?T:L.bandwidth()]),N.domain([A<0?A:e.settings.minValue||0,d3.max(e.settings.isStacked?q:j)]).nice(),(!h||h&&!e.settings.isStacked)&&H.append("g").attr("class","x axis").attr("transform","translate(0,".concat(S+(d?10:0),")")).call(F),H.append("g").attr("class","y axis").call(z),c&&A<0){var W,U=0;H.selectAll(".axis.y text").attr("class",(function(t){return W=d3.select(this).text().length,U=W>U?W:U,t<0?"negative-value":"positive-value"})).attr("x",(function(t){return U*(t<0?9:5)}))}var G,Y,K=[];s.forEach((function(t){K.push($.extend({},t,{values:t.data}))})),h&&(K=[],V=s[0].data.forEach((function(t){K.push(t)})));var X=T/K.length>35*((K[0]&&K[0].values?K[0].values.length:0)+1),Q=function(t){return fe.chartColor(0,"",{color:t})},J=function(t,n){var i;t.empty()?n():(i=t.size(),t.on("end.".concat(e.namespace),(function(){0==--i&&n()})))},Z=function(n){var i;return n=d&&n,h||d?(i=e.svg.selectAll("rect".concat(n?".target-bar":".bar")).data(e.settings.isStacked?t:K).enter().append("rect").attr("class",(function(t,e){var i="bar series-".concat(e);return d&&(i=(n?"target-bar series-".concat(e):i)+(t.value>0?" positive":" negative")),i})).attr("width",Math.min.apply(null,[P.bandwidth()-2,35])).attr("x",(function(t){return e.settings.isStacked?_(0):P(t.name)+(P.bandwidth()-35)/2})).attr("y",(function(){return N(0)>S?S:N(0)})).attr("height",(function(){return 0})).attr("mask",(function(t){return d?n?y.target?"url(#".concat(y.target,")"):null:t.value<0?y.negative?"url(#".concat(y.negative,")"):null:y.positive?"url(#".concat(y.positive,")"):null:null})).style("fill",(function(t){return d?Q(n?v.target:t.value<0?v.negative:v.positive):null})),d&&H.selectAll(n?".target-bartext":".bartext").data(K).enter().append("text").attr("class",(function(t){return(n?"target-bartext":"bartext")+(t.value>0?" positive":" negative")})).attr("text-anchor","middle").attr("x",(function(t){return(P(t.name)+P.bandwidth()/2)*(c?-1:1)})).attr("y",(function(t){return n?N(t.target)-6:N(t.value>0?0:t.value)+12})).style("opacity",0).style("fill",(function(t){return n?"":Q(t.value<0?v.negative:v.positive)})).style("font-weight","bold").text((function(t){return a(n?t.target:t.value)})),i.transition().duration(e.settings.animate?1e3:0).call(J,(function(){H.selectAll(".target-bartext, .bartext").transition().duration(e.settings.animate?300:0).style("opacity",1)})).attr("y",(function(t){var i=e.settings.isStacked?S-R(t[0].y)-R(t[0].y0):N(t.value<0?0:t.value);return n?N(t.target):t.value<0?i:i>S-3?S-2:i})).attr("height",(function(t){var i;return i=e.settings.isStacked?R(t[0].y):t.value<0?S-N(0)-(S-N(t.value)):S-N(t.value)-(S-N(0)),i=t.value<0?i:i<3?2:i>S?S-N(t.value):i,n?S-N(t.target)-(S-N(0)):i}))):(i=H.selectAll(".x-value").data(e.settings.isStacked?t:K).enter().append("g").attr("class","series-group g").attr("data-group-id",(function(t,e){return e})).attr("transform",(function(t){var n=L(e.settings.isStacked?O[0]:t.name),i=L.bandwidth();return!e.settings.isStacked&&X&&i>35*K.length*2&&(n+=L.bandwidth()/2/K.length/2),e.isGrouped&&!e.settings.isStacked&&(n-=35/(L.bandwidth()>150?2:4)),"translate(".concat(n,",0)")})).selectAll("rect").data((function(t){return e.settings.isStacked?t:t.values})).enter().append("rect").attr("class",(function(t,e){return"series-".concat(e," bar")})).attr("width",Math.min.apply(null,[P.bandwidth()-2,35])).attr("x",(function(t,n){var i=Math.min.apply(null,[P.bandwidth()-2,35]);return e.settings.isStacked?_(n):P.bandwidth()/2+(i+2)*n-(1===K[0].values.length||5===K[0].values.length||4===K[0].values.length?i/2:0)})).attr("y",(function(){return N(0)>S?S:N(0)})).attr("height",(function(){return 0}))).transition().duration(e.settings.animate?600:0).attr("y",(function(t){var n=e.settings.isStacked?S-R(t.y)-R(t.y0):N(t.value<0?0:t.value);return t.value<0?n:n>S-3?S-2:n})).attr("height",(function(t){var n;return n=e.settings.isStacked?R(t.y):t.value<0?S-N(0)-(S-N(t.value)):S-N(t.value)-(S-N(0)),t.value<0?n:n<3?2:n>S?S-N(t.value):n})),i};d&&(G=Z(!0));var tt=Z();return d&&(Y=d3.selectAll([].concat(r(G.nodes()),r(tt.nodes())))),d||(e.settings.isStacked?e.settings.isStacked&&!h?tt.style("fill",(function(){var t=d3.select(this.parentNode).attr("data-group-id");return fe.chartColor(t,"bar",s[t])})).attr("mask",(function(){var t=d3.select(this.parentNode).attr("data-group-id");return s[t].pattern?"url(#".concat(s[t].pattern,")"):null})):e.settings.isStacked&&h&&tt.style("fill",(function(t,e){return fe.chartColor(e,"bar",t[0])})).attr("mask",(function(t){return t[0].pattern?"url(#".concat(t[0].pattern,")"):null})):tt.style("fill",(function(t,e){return h?fe.chartColor(e,"column-single",s[0].data[e]):fe.chartColor(e,"bar",g[e])})).attr("mask",(function(t,e){return h?s[0].data[e].pattern?"url(#".concat(s[0].data[e].pattern,")"):null:g[e].pattern?"url(#".concat(g[e].pattern,")"):null}))),$.extend(fe.settings,{svg:H,chartType:"Column",isSingle:h,isGrouped:u,isStacked:e.settings.isStacked}),(d?Y:tt).on("mouseenter.".concat(e.namespace),(function(i,r){var o,l,c,u,p,f,m,b=this,x=$(this),k="",T=d3.event.pageY,S=function(t,e){return t&&e?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(e,'" mask="url(#').concat(t,')" height="12" width="12" />')+"</svg>":""},A=function(t){f=fe.tooltipSize(k),o=x[0].getBoundingClientRect().left-f.width/2+x.attr("width")/2,e.settings.isStacked?l=x[0].getBoundingClientRect().top-f.height-10:(l=T-fe.tooltip.outerHeight()-25,s.length>1&&(o=b.parentNode.getBoundingClientRect().left-f.width/2+b.parentNode.getBoundingClientRect().width/2,t?(l+=fe.tooltip.outerHeight()+50)>b.parentNode.getBoundingClientRect().bottom+10&&(l=b.parentNode.getBoundingClientRect().bottom+10):l=b.parentNode.getBoundingClientRect().top-fe.tooltip.outerHeight()+25)),""!==k&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[n?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(o,l,k,t?"bottom":"top"))},E=function(){"string"==typeof k?k=function(t,e,n){if(null==n?n=/{{(\w+)}}/g:"string"==typeof n&&(n=new RegExp(n,"g")),"string"==typeof t&&n instanceof RegExp)for(var i=9999;n.test(t)&&i>0;)t=t.replace(n,(function(t,n){return e(0,n)})),i--;return t}(k,(function(t,e){return a(i[e])})):"number"==typeof k&&(k=k.toString())},D=function(t){k="";var e={index:r,data:i},n=function(t){"string"!=typeof t&&"number"!=typeof t||(k=t,E(),I[r]=k)},a=!0;C=setInterval((function(){a&&(a=!1,t(n,e)),""!==k&&(clearInterval(C),A())}),10)};if(e.settings.isStacked){if(h)k="<p><b>".concat(a(i[0].value),"</b> ").concat(i[0].name,"</p>");else{for(k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(t[0][r].name,"</b></div>"),c=t.length-1,u=0;c>=u;c--)p=fe.chartColor(c,"bar",s[c]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(s[c].pattern?"transparent":p,';">').concat(S(s[c].pattern,p),"</div>")+"<span>".concat(t[c][r].parentName,"</span><b>").concat(a(t[c][r].value),"</b>")+"</div>";k+="</div>"}f=fe.tooltipSize(k),o=x[0].getBoundingClientRect().left-f.width/2+x.attr("width")/2,l=x[0].getBoundingClientRect().top-f.height-10}else{if(d)k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(i.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(y.target?"transparent":Q(v.target),';">').concat(S(y.target,Q(v.target)),"</div>")+"<span>".concat(w.target,"</span><b>").concat(a(i.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(i.value<0?y.negative?"transparent":Q(v.negative):y.positive?"transparent":Q(v.positive),';">').concat(i.value<0?S(y.negative,Q(v.negative)):S(y.positive,Q(v.positive)),"</div>")+"<span>".concat(w[i.value<0?"negative":"positive"],"</span><b>").concat(a(i.value),"</b>")+"</div></div>";else if(1===s.length)k="<p><b>".concat(a(i.value),"</b> ").concat(i.name,"</p>");else{var L=d3.select(this.parentNode).datum().values;for(k='<div class="chart-swatch">',c=0,u=L.length;c<u;c++)p=fe.chartColor(c,"bar",g[c]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(g[c].pattern?"transparent":p,';">').concat(S(g[c].pattern,p),"</div>")+"<span>".concat(L[c].name,"</span><b>").concat(a(L[c].value),"</b>")+"</div>";k+="</div>",m=L.length>6}f=fe.tooltipSize(k),o=x[0].getBoundingClientRect().left-f.width/2+x.attr("width")/2,l=T-fe.tooltip.outerHeight()-25,s.length>1&&(o=this.parentNode.getBoundingClientRect().left-f.width/2+this.parentNode.getBoundingClientRect().width/2,l=this.parentNode.getBoundingClientRect().top-fe.tooltip.outerHeight()+25)}M&&"function"==typeof M&&void 0===i.tooltip&&!I[r]?D(M):(k=I[r]||M||k||"",I[r]||!1===i.tooltip||null==i.tooltip||("function"==typeof i.tooltip?D(i.tooltip):(k=i.tooltip.toString(),E(),I[r]=k)),"string"==typeof k&&""!==k&&A(m))})).on("mouseleave.".concat(e.namespace),(function(){clearInterval(C),fe.hideTooltip()})).on("click.".concat(e.namespace),(function(t,n,i){var a=this&&d3.select(this).classed("target-bar"),s=this&&d3.select(this).classed("is-selected"),r=parseInt(d3.select(this.parentNode).attr("data-group-id"),10);if(a)for(var o=d3.selectAll(".bar").nodes(),l=o.length,c=0;c<l;c++)if(d3.select(o[c]).classed("is-selected")){s=!1;break}fe.setSelectedElement({task:s?"unselected":"selected",container:e.element,selector:this,isTrigger:!s,isTargetBar:a,triggerGroup:u,d:t,i:n,type:e.settings.type,dataset:e.dataset,isSingle:e.isSingle,isGrouped:e.isGrouped,isStacked:e.settings.isStacked,svg:e.svg,clickedLegend:!0===i}),s&&e.element.triggerHandler("selected",[d3.select(this).nodes(),{},u?r:n])})).on("contextmenu.".concat(e.namespace),(function(t){fe.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),e.settings.isGrouped=u,e.settings.isSingle=h,e.settings.svg=this.svg,e.settings.showLegend&&(h&&s[0].name?fe.addLegend(s,"column-single",e.settings,e.element):d?fe.addLegend(x,e.settings.type,e.settings,e.element):e.settings.isStacked&&h?fe.addLegend(g,e.settings.type,e.settings,e.element):h||fe.addLegend(e.settings.isStacked?m:g,e.settings.type,e.settings,e.element)),e.settings.xAxis&&e.settings.xAxis.formatText&&e.svg.selectAll(".x.axis .tick text").each((function(t){var n=d3.select(this),i=d3.select(this).text(),a=e.settings.xAxis.formatText(i,t);l.html(n.node(),a,"<tspan>")})),fe.isRTL&&fe.isIE&&(H.selectAll("text").attr("transform","scale(-1, 1)"),H.selectAll(".y.axis text").style("text-anchor","start"),d&&H.selectAll(".negative-value").style("text-anchor","end")),H.selectAll(".y.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")})),fe.appendTooltip(),fe.labelsColide(H)&&fe.applyAltLabels(H,K,"shortName"),fe.labelsColide(H)&&fe.applyAltLabels(H,K,"abbrName"),fe.labelsColide(H)&&(fe.applyAltLabels(H,K,null,null,!0),d&&H.selectAll(".target-bartext, .bartext").attr("x",(function(){return+d3.select(this).attr("x")-(c?-6:6)}))),fe.setSelected=function(t,n){var i,a,r,o,l,c=0,d=b.equals,p=H.node().parentNode.nextSibling,f=d3.select(p),g=f.node()&&f.classed("chart-legend"),m=function(n,o){var l=!!n;n=l?d3.select(n):H,o=void 0!==o?o:0,n.selectAll(".bar").each((function(n,u){n&&c<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===(h&&e.settings.isStacked?n[0][t.fieldName]:n[t.fieldName])||void 0!==t.index&&t.index===u||t.data&&d(t.data,s[o].data[u])||t.elem&&$(this).is(t.elem))&&(c++,a=d3.select(this),i=u,l&&!e.settings.isStacked&&(r=!0))}))};u||e.settings.isStacked&&!h&&!u?(s.forEach((function(n,s){c<1&&(o=$(H.select('[data-group-id="'.concat(s,'"]')).node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===n[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===s||t.data&&d(t.data,n)||t.elem&&o.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(c++,a=H.select('[data-group-id="'.concat(s,'"]')).select(".bar"),i=s,e.settings.isStacked&&!u&&(r=!0)))})),c<1&&(l=H.selectAll(".series-group")).nodes().length&&l.each((function(t,e){m(this,e)}))):m(),c>0&&(n||!a.classed("is-selected"))&&(r?g&&$(f.selectAll(".chart-legend-item")[0][i]).trigger("click.chart"):a.on("click.".concat(e.namespace)).call(a.node(),a.datum(),i))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,n,i,a=0,s=this,r=s.svg.node().parentNode.nextSibling,o=d3.select(r),l=o.node()&&o.classed("chart-legend"),c=function(n){(n=n?d3.select(n):s.svg).selectAll(".bar").each((function(n,i){n&&(s.isSingle&&s.settings.isStacked?n[0].selected:n.selected)&&a<1&&(a++,e=d3.select(this),t=i)}))};s.isGrouped||s.settings.isStacked&&!s.isSingle&&!s.isGrouped?(s.dataset.forEach((function(i,r){i.selected&&a<1&&(a++,e=s.svg.select('[data-group-id="'.concat(r,'"]')).select(".bar"),t=r,!s.settings.isStacked||s.isSingle||s.isGrouped||(n=!0))})),a<1&&(i=s.svg.selectAll(".series-group")).nodes().length&&i.each((function(){c(this)}))):c(),a>0&&(n?l&&$(o.selectAll(".chart-legend-item")[0][t]).trigger("click.chart"):e.on("click.".concat(s.namespace)).call(e.node(),e.datum(),t))},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return fe.selected},setSelected:function(t,e){fe.setSelected(t,e,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var $e={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,showLines:!0,labelFactor:1.27,wrapWidth:60,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ee(t,e){this.settings=b.mergeSettings(t,e,$e),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ee.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,n,i,a,s,r,o,l,c=this,d=D.isRTL(),h=this.element.closest(".is-personalizable").length>0,u=!!this.settings.formatterString,p=function(t){return u?d3.format(c.settings.formatterString)(t):t},f=[],g=[],m=c.settings.tooltip,v=0,b=30,y=this.element.parent().width()<450,w=innerWidth<=480,C=innerWidth>=481&&innerWidth<=992,k=innerWidth>992,T=this.settings.dataset,S={top:20,left:30,right:30,bottom:1===T.length?5:30};if(c.settings.isGrouped&&1===T.length&&(S.bottom=30,v=2),this.element.addClass("bar-chart"),this.settings.isGrouped&&this.element.addClass("bar-chart-grouped"),this.settings.isStacked&&this.element.addClass("bar-chart-stacked"),0===T.length)return c.element.emptymessage(c.settings.emptyMessage),this;var A=parseInt(this.element.parent().height(),10)-S.top-S.bottom-30,E=T.map((function(t){return{name:t.name,color:t.color,pattern:t.pattern}})),I={y1:[],y2:[]};T=T.map((function(t,e){return t.data.map((function(t,n){var i=0;return 0===e?(I.y1.push(t.value),I.y2.push(0)):(i=I.y1[n]+I.y2[n],I.y1[n]=t.value,I.y2[n]=i),$.extend({},t,{y0:i,y:t.value,x:t.name,color:t.color,pattern:t.pattern})}))})),t=0,T=T.map((function(e,n){return c.settings.isStacked||E[n]&&(t=E[n].name.length>t?E[n].name.length:t),e.map((function(e){return c.settings.isStacked&&(t=e.x.length>t?e.x.length:t),$.extend({},e,{x:e.y,y:e.x,x0:e.y0,color:e.color,pattern:e.pattern})}))}));var M,L=this.settings.longText,P=parseInt(this.element.parent().height(),10)-S.bottom-(c.settings.isStacked?0:15),N=parseInt(this.element.parent().width(),10)-S.left;w?M=S.left+1*t:C?M=S.left+4*t:k&&(M=S.left+6*t),L||(M=S.left+6*t),c.svg=d3.select(this.element[0]).append("svg").attr("width",N).attr("height",P).append("g").attr("class","group").attr("transform","translate(".concat(M,",").concat(S.top,")"));var _=d3.min(T,(function(t){return d3.min(t,(function(t){return c.settings.isStacked?t.x+t.x0:t.x}))})),R=d3.max(T,(function(t){return d3.max(t,(function(t){return c.settings.isStacked?t.x+t.x0:t.x}))}));if(c.settings.isStacked&&c.settings.isNormalized){var B=[];T.forEach((function(t){t.forEach((function(t,e){B[e]=(void 0===B[e]?0:B[e])+t.x}))})),T.forEach((function(t){t.forEach((function(t,e){var n=B[e]/100;t.x/=n,t.x0/=n}))})),R=100}var O,F=N-M-S.left;O=c.settings.useLogScale?d3.scaleLog().domain([_>0?_:1,R]).range([1,F]).nice():d3.scaleLinear().domain([_<0?_:0,R]).range([0,F]).nice(),c.settings.isStacked?(e=T[0].map((function(t){return t.y})),o=.32):(e=E.map((function(t){return t.name})),function(){var t,e;for(t=T.length-1;t>-1;t--)e=T[t].map((function(t){return t})),$.extend(!0,f,e),f=$.map(f,(function(t){return t}))}(),n=0,o=(a=A/e.length)/(i=f.length),r=a-(s=i>1?a-.6*o:b),b=s/i,o=0);var z=d3.scaleBand().domain(e).rangeRound([0,A]).padding(o,o),H=d3.axisBottom().scale(O).tickSize(-A);y&&H.ticks(M<100?5:3),c.settings.isStacked&&c.settings.isNormalized&&H.tickFormat((function(t){return"".concat(t,"%")})),c.settings.useLogScale&&(H.ticks(10,",.1s"),!1===c.settings.showLines&&H.tickSize(0)),c.settings.ticks&&!c.settings.useLogScale&&(w?H.ticks(c.settings.ticks.smallNumber,c.settings.ticks.format):C?H.ticks(c.settings.ticks.mediumNumber,c.settings.ticks.format):k&&H.ticks(c.settings.ticks.largeNumber,c.settings.ticks.format));var q=d3.axisLeft().scale(z).tickPadding(15).tickSize(0);c.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(A,")")).call(H),c.svg.append("g").attr("class","axis y").call(q);var V=c.svg.selectAll("g.group").data(T).enter().append("g").attr("class","series-group").attr("data-group-id",(function(t,e){return e}));if(c.settings.isGrouped=c.svg.selectAll(".series-group").nodes().length>1&&!c.settings.isStacked||c.settings.isGrouped&&1===T.length,c.settings.isSingle=1===c.svg.selectAll(".series-group").nodes().length&&c.settings.isStacked,V.selectAll("rect").data((function(t,e){return t.forEach((function(t){t.index=e,c.settings.isStacked||(t.gindex=n++)})),t})).enter().append("rect").attr("class",(function(t,e){return"bar series-".concat(e)})).style("fill",(function(t,e){return c.settings.isStacked?1===E.length?fe.chartColor(e,"bar-single",t):fe.chartColor(t.index,"bar",E[t.index]):fe.chartColor(e,"bar",f[e])})).attr("mask",(function(t,e){return 1===T.length&&T[0][e].pattern?"url(#".concat(T[0][e].pattern,")"):c.settings.isStacked&&E[t.index].pattern?"url(#".concat(E[t.index].pattern,")"):!c.settings.isStacked&&f[e]&&f[e].pattern?"url(#".concat(f[e].pattern,")"):""})).attr("x",(function(t){return c.settings.useLogScale?0:c.settings.isStacked&&!c.settings.isSingle?O(t.x0)+1:O(0)+1})).attr("y",(function(t){return c.settings.isStacked?z(t.y):(a-s)/2+(t.gindex*b+t.gindex*v)+t.index*r})).attr("height",(function(){return c.settings.isStacked?z.bandwidth():b})).attr("width",0).on("mouseenter.".concat(c.namespace),(function(t,e){var n,i,a,s=0,r=[],o="",d=d3.select(this.parentNode).datum(),v=Math.round(d.length/2),b=d3.select(this),y=function(t,e){return t&&e?'<svg width="12" height="12"><rect mask="url(#'.concat(t,')" height="12" width="12" /></svg>'):""},w=function(t,e,n){var i=fe.tooltipSize(o),a=t+parseFloat(b.attr("width"))/2-i.width/2,s=n?e:e-i.height-13;""!==o&&(fe.tooltip&&fe.tooltip.length&&fe.tooltip[h?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(a,s,o,n?"bottom":"top"))},x=function(){"string"==typeof o?o=function(t,e,n){if(null==n?n=/{{(\w+)}}/g:"string"==typeof n&&(n=new RegExp(n,"g")),"string"==typeof t&&n instanceof RegExp)for(var i=9999;n.test(t)&&i>0;)t=t.replace(n,(function(t,n){return e(0,n)})),i--;return t}(o,(function(e,n){return p(t[n])})):"number"==typeof o&&(o=o.toString())};if(1===T.length)o="<p><b>".concat(t.y," </b>").concat(t.x,"</p>");else{if(o='<div class="chart-swatch">',c.settings.isStacked)for(n=0,i=T.length;n<i;n++){s=0,a=fe.chartColor(n,"bar",E[n]);for(var C=0,k=T.length;C<k;C++)s+=T[C][e].x,r[C]=T[C][e].x;o+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(y(E[n].pattern,a),"</div>\n                  <span>").concat(E[n].name,"</span>\n                  <b> ").concat(u?p(r[n]):"".concat(Math.round(r[n]/s*100),"%")," </b>\n                </div>")}else for(v>1&&(b=d3.select(this.parentNode).select(".series-".concat(v))),n=0,i=d.length;n<i;n++)a=fe.chartColor(n,"bar",f[n]),o+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(y(f[n].pattern,a),"</div>\n                  <span>").concat(d[n].name,"</span><b>").concat(p(d[n].value),"</b>\n                </div>");o+="</div>"}s>0&&(o='<span class="chart-tooltip-total"><b>'.concat(s,"</b> ").concat(D.translate("Total"),"</span>").concat(o));var S=b.nodes()[0].getBoundingClientRect().top+$(window).scrollTop(),A=b.nodes()[0].getBoundingClientRect().left+$(window).scrollLeft(),I=!c.settings.isStacked&&d.length>6;if(m&&"function"==typeof m&&!g[e]){o="";var M=!0;l=setInterval((function(){M&&(M=!1,m((function(t){o=t,g[e]=t}))),""!==o&&(clearInterval(l),w(A,S,I))}),10)}else if(o=g[e]||m||o||"",g[e]||!1===t.tooltip||null==t.tooltip||("function"==typeof t.tooltip?function(n){o="";var i={index:e,data:t},a=function(t){"string"!=typeof t&&"number"!=typeof t||(o=t,x(),g[e]=o)},s=!0;l=setInterval((function(){s&&(s=!1,n(a,i)),""!==o&&(clearInterval(l),w())}),10)}(t.tooltip):(o=t.tooltip.toString(),x(),g[e]=o)),"string"==typeof o&&""!==o&&w(A,S,I),c.settings.isStacked)for(n=0,i=T.length;n<i;n++){a=fe.chartColor(n,"bar",E[n]);var L=$("#svg-tooltip").find(".swatch-row").eq(n);E[n].pattern||L.find("div").css("background-color",a),L.find("rect").css("fill",a)}else for(n=0,i=d.length;n<i;n++){a=fe.chartColor(n,"bar",f[n]);var P=$("#svg-tooltip").find(".swatch-row").eq(n);f[n].pattern||P.find("div").css("background-color",a),P.find("rect").css("fill",a)}})).on("mouseleave.".concat(c.namespace),(function(){clearInterval(l),fe.hideTooltip()})).on("click",(function(t,e){var n=this&&d3.select(this).classed("is-selected");parseInt(d3.select(this.parentNode).attr("data-group-id"),10),fe.setSelectedElement({task:n?"unselected":"selected",container:c.element,selector:this,isTrigger:!n,triggerGroup:c.settings.isGrouped,d:t,i:e,type:c.settings.type,dataset:T,isSingle:c.isSingular,isGrouped:c.settings.isGrouped,isStacked:c.settings.isStacked,svg:c.svg,clickedLegend:c.settings.clickedLegend}),n&&c.element.triggerHandler("selected",[d3.select(this).nodes(),{},e])})).on("contextmenu.".concat(c.namespace),(function(t){fe.triggerContextMenu(c.element,d3.select(this).nodes()[0],t)})),c.svg.selectAll(".axis.y text").attr("x",(function(){return d?15:-15})),c.svg.selectAll(".axis.x text").attr("class",(function(t){return t<0?"negative-value":"positive-value"})),d&&(fe.isIE||fe.isIEEdge)&&(c.svg.selectAll("text").attr("transform","scale(-1, 1)"),c.svg.selectAll(".y.axis text").style("text-anchor","start")),y&&c.settings.useLogScale){var j=d3.selectAll(".x .tick text"),W=!1;j.attr("class",(function(t,e){var n=Math.round(j.size()/2);e>=n&&!W&&t.toString().startsWith("1")&&(W=!0,n=t),0!==e&&e!==j.size()-1&&(c.settings.useLogScale?t!==n:e!==n)&&d3.select(this).remove()}))}return c.svg.selectAll(".x.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")})),c.svg.selectAll(".bar").transition().duration(c.settings.animate?600:0).attr("width",(function(t){var e=O(t.x),n=O(0);return!isNaN(e)&&x.isFinite(e)||(e=0),!isNaN(n)&&x.isFinite(n)||(n=0),Math.abs(e-n)})).attr("x",(function(t){return c.settings.useLogScale?0:c.settings.isStacked&&!c.settings.isSingle?O(t.x0)+1:t.x<0?O(t.x)+1:O(0)+1})),c.settings.svg=c.svg,c.settings.showLegend&&fe.addLegend(c.settings.isStacked?E:f,c.settings.type,c.settings,this.element),fe.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){if(!this.settings.isGrouped)for(var t=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),e=this.settings.dataset,n=function(n){Object.keys(e[n]).map((function(t){return e[n][t]})).forEach((function(e){if(e&&e.constructor===Array)for(var n=0;n<e.length;n++)innerWidth<=480?t[n].textContent=e[n].shortName||e[n].name:innerWidth>=481&&innerWidth<=992?t[n].textContent=e[n].abbrName||e[n].name:innerWidth>992&&(t[n].textContent=e[n].name)}))},i=0;i<e.length;i++)n(i)},setInitialSelected:function(){var t,e,n,i,a=0,s=this,r=s.svg.node().parentNode.nextSibling,o=d3.select(r),l=o.node()&&o.classed("chart-legend"),c=function(n){(n=n?d3.select(n):s.svg).selectAll(".bar").each((function(n,i){n&&n.selected&&a<1&&(a++,e=d3.select(this),t=i)}))};s.settings.isGrouped||s.settings.isStacked&&!s.settings.isSingle?(s.settings.dataset.forEach((function(i,r){i.selected&&a<1&&(a++,e=s.svg.select('[data-group-id="'.concat(r,'"]')).select(".bar"),t=r,s.settings.isStacked&&!s.settings.isGrouped&&(n=!0))})),a<1&&(i=s.svg.selectAll(".series-group")).nodes().length&&i.each((function(){c(this)}))):c(),a>0&&(n?l&&$(o.selectAll(".chart-legend-item")[0][t]).trigger("click.chart"):e.on("click").call(e.node(),e.datum(),t))},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return fe.selected},setSelected:function(t,e){fe.setSelected(t,e,{svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle})},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout((function(){return e()}),300):e()},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var De={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ie(t,e){this.settings=b.mergeSettings(t,e,De),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ie.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===u.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var t=this;t.svg=d3.select(this.element[0]).append("svg"),t.mainGroup=t.svg.append("g"),t.mainGroup.append("g").attr("class","slices"),t.mainGroup.append("g").attr("class","labels"),t.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),this.settings.showMobile&&(this.settings.legendPlacement="bottom"),t.settings.legendPlacement&&this.element.addClass("has-".concat(t.settings.legendPlacement,"-legend"));var e=parseInt(this.element.width(),10),n=parseInt(this.element.height(),10),i={height:n,width:e};("label"===this.settings.lines.show&&"bottom"===this.settings.legendPlacement||"label"===this.settings.lines.show&&"false"===this.settings.showLegend)&&t.mainGroup.attr("transform","translate(".concat(.67777*i.width,", ").concat(i.height/2,")")),"right"===t.settings.legendPlacement&&(i.width=.75*e),this.settings.showMobile&&(i.height=.8*n,this.element.addClass("is-mobile")),i.radius=Math.min(i.width,i.height)/2,t.dims=i,t.pie=d3.pie().sort(null).value((function(t){return t.value})),t.arc=d3.arc().outerRadius(.75*i.radius).innerRadius(t.settings.isDonut?.5*i.radius:0),t.outerArc=d3.arc().innerRadius(.75*i.radius).outerRadius(.75*i.radius+20),t.svg.attr("width","right"===t.settings.legendPlacement?"75%":"100%").attr("height",t.settings.showMobile?"80%":"100%"),t.mainGroup.attr("transform","translate(".concat(i.width/2,",").concat(i.height/2,")")),i.center={x:i.width/2,y:i.height/2},t.key=function(t){return t.data.name};var a=!t.settings.dataset||0===t.settings.dataset.length;this.chartData=a?[]:t.settings.dataset[0].data,this.sum=d3.sum(this.chartData,(function(t){return t.value}));var s=this.chartData.map((function(e){return e.value/t.sum*100})),r=this.roundLargestRemainer(s);this.chartData=this.chartData.map((function(e,n){return e.percent=e.value/t.sum,e.percentRound=r[n],e}));var o=0;if(this.chartData.map((function(t){o+=t.percentRound})),a||0===o||isNaN(o)){var l=W.themeColors().palette;this.chartData.push({data:{},color:l.graphite[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(t.updateData(t.chartData),t.settings.showTooltips&&fe.appendTooltip("is-pie"),this.settings.showLegend){var c=t.chartData.map((function(e){var n=fe.formatToSettings(e,t.settings.legend);return t.settings.legendFormatter&&(n="".concat(e.name," (").concat(d3.format(t.settings.legendFormatter)(e.value),")")),"Empty-Pie"===e.name&&(n=""),{name:n,display:"twocolumn",placement:t.settings.legendPlacement,color:e.color}}));this.settings.svg=t.svg,fe.addLegend(c,"pie",this.settings,this.element)}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(t){var e=this;this.chartData=this.chartData.map((function(e){return e.value=t?0:Math.random(),e})),this.sum=d3.sum(this.chartData,(function(t){return t.value}));var n=this.chartData.map((function(t){return t.value/e.sum*100})),i=this.roundLargestRemainer(n);return this.chartData=this.chartData.map((function(t,n){return t.percent=t.value/e.sum,t.percentRound=i[n],t})),this.chartData},addCenterLabel:function(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var t=this.settings.dataset[0].centerLabel,e=this.svg.selectAll(".slices");if(e.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(t),fe.isIE&&!fe.isIEEdge)if(b.isHTML(t)){var n=e.select(".chart-donut-text"),i=document.createElement("text");i.innerHTML=t,Array.prototype.slice.call(i.childNodes).forEach((function(t){n.append("tspan").attr("style",t.getAttribute&&t.getAttribute("style")).attr("x",t.getAttribute&&t.getAttribute("x")).attr("dy",t.getAttribute&&t.getAttribute("dy")).text(t.textContent)}))}else e.select(".chart-donut-text").text(t)}},updateData:function(t){var e,n=this,i=this.element.closest(".is-personalizable").length>0,a=!n.settings.dataset||0===n.settings.dataset.length,s=n.svg.select(".slices").selectAll("path.slice").data(n.pie(t),n.key);if(n.isRTL=D.isRTL(),s.enter().insert("path").style("fill",(function(t,e){return fe.chartColor(e,"pie",t.data)})).attr("class","slice").on("contextmenu.".concat(n.namespace),(function(t){fe.triggerContextMenu(n.element,d3.select(this).nodes()[0],t)})).on("click.".concat(n.namespace),(function(t,i){clearTimeout(e);var a=this&&d3.select(this).classed("is-selected");fe.setSelectedElement({task:a?"unselected":"selected",container:n.element,selector:a?".chart-container .is-selected":this,isTrigger:!a,d:t.data,i:i,type:n.settings.type,dataset:n.settings.dataset,svg:n.svg}),a&&n.element.triggerHandler("selected",[d3.select(this).nodes(),{},i])})).on("mouseenter.".concat(n.namespace),(function(t,a){if(n.settings.showTooltips){var s=function(t){var e,i=document.body;if(n.isFirefox&&0===n.settings.dotSize){var a=d3.select(t);a.attr("r",2),e=t.getBoundingClientRect(),a.attr("r",n.settings.dotSize)}else e=t.getBoundingClientRect();return{top:e.top+i.scrollTop,left:e.left+i.scrollLeft}}(n.svg.selectAll("circle").nodes()[a]),r=n.midAngle(t),o=r<=Math.PI/4&&r>=0||r>7*Math.PI/4,l=r<=3*Math.PI/4&&r>=Math.PI/4,c=r<=5*Math.PI/4&&r>=3*Math.PI/4,d=r<=7*Math.PI/4&&r>=5*Math.PI/4,h="",u=fe.formatToSettings(t,n.settings.tooltip);-1===(h=(h=(h=(h=(h=t.data.tooltip||u).replace("{{percent}}","".concat(t.data.percentRound,"%"))).replace("{{value}}",t.value)).replace("%percent%","".concat(t.data.percentRound,"%"))).replace("%value%",t.value)).indexOf("<b>")&&(h=(h=h.replace("(","<b>")).replace(")","</b>")),null!=e&&clearTimeout(e),e=setTimeout((function(){!function(){if(""!==h){var t=fe.tooltipSize(h),e=s.left,n=s.top;fe.tooltip&&fe.tooltip.length&&(o||l||c||d)&&fe.tooltip[i?"addClass":"removeClass"]("is-personalizable"),o&&fe.showTooltip(e-=t.width/2,n-=t.height-5,h,"top"),l&&fe.showTooltip(e,n-=t.height/2,h,"right"),c&&fe.showTooltip(e-=t.width/2,n,h,"bottom"),d&&fe.showTooltip(e-=t.width-5,n-=t.height/2,h,"left")}}()}),300)}})).on("mouseleave.".concat(n.namespace),(function(){clearTimeout(e),fe.hideTooltip()})).merge(s).transition().duration(n.settings.animationSpeed).attrTween("d",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){return n.arc(e(t))}})),s.exit().remove(),!a){var r=n.element.parent().width()<520,o=n.settings.showLines;if(!n.settings.showLinesMobile&&o&&(o=!r),n.settings.dotSize=o?2:0,o){var l=n.svg.select(".labels").selectAll("text").data(n.pie(t),n.key);l.enter().append("text").attr("dy",".35em").text((function(t){return r?t.data.shortName:fe.formatToSettings(t,n.settings.lines)})).merge(l).transition().duration(n.settings.animationSpeed).attrTween("transform",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t),a=n.outerArc.centroid(i);return a[0]=n.dims.radius*(n.midAngle(i)<Math.PI?1:-1),a[0]-=n.midAngle(i)<Math.PI?20:-20,"translate(".concat(a,")")}})).styleTween("text-anchor",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t);return n.isRTL?n.midAngle(i)>Math.PI?"start":"end":n.midAngle(i)<Math.PI?"start":"end"}})),l.exit().remove();var c=n.svg.select(".lines").selectAll("polyline").data(n.pie(t),n.key);c.enter().append("polyline").merge(c).transition().duration(n.settings.animationSpeed).attrTween("points",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t),a=n.outerArc.centroid(i);return a[0]=.85*n.dims.radius*(n.midAngle(i)<Math.PI?1:-1),[n.outerArc.centroid(i),n.outerArc.centroid(i),a]}})),c.exit().remove()}var d=n.svg.select(".lines").selectAll("circle").data(n.pie(t),n.key);d.enter().append("circle").attr("class","circles").attr("r",n.settings.dotSize).merge(d).transition().duration(n.settings.animationSpeed).attrTween("transform",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t);return"translate(".concat(n.outerArc.centroid(i)," )")}})),d.exit().remove()}},setInitialSelected:function(){var t,e=this,n=0;this.svg.selectAll(".slice").each((function(i,a){i&&i.data&&i.data.selected&&n<1&&(n++,(t=d3.select(this)).on("click.".concat(e.namespace)).call(t.node(),t.datum(),a))}))},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return fe.selected},setSelected:function(t,e){var n,i,a=this,s=0,r=b.equals;this.svg.selectAll(".slice").each((function(e,o){e&&e.data&&s<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e.data[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&r(t.data,a.chartData[o].data)||t.elem&&$(this).is(t.elem))&&(s++,n=d3.select(this),i=o)})),s>0&&(e||!n.classed("is-selected"))&&n.on("click.".concat(a.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(t){for(var e=0,n=0,i=[],a=0;a<t.length;a++)e+=parseInt(t[a],10),i[a]=a;var s=100-e;i.sort((function(e,i){return n=t[e]-parseInt(t[e],10),t[i]-parseInt(t[i],10)-n})),t.sort((function(t,e){return n=t-parseInt(t,10),e-parseInt(e,10)-n}));for(var r=0;r<t.length;r++)t[r]=r<s?parseInt(t[r],10)+1:parseInt(t[r],10);for(var o=[],l=0;l<t.length;l++)o[i[l]]=t[l];return o},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".slice").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var Me={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Le(t,e){this.settings=b.mergeSettings(t,e,Me),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Le.prototype={init:function(){return this.namespace=b.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=fe.colorRange(),this.useBuiltInColors=!0),this},updateData:function(t){var e=this,n=this.settings,i=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==t.length){var a=this.element.parent(),s={w:a.width(),h:a.height(),extra:.957};"right"===n.legendPlacement&&(s.w*=.75),s.transform={x:s.w/2+(n.margin.left+n.margin.right)/2,y:s.h/2*s.extra+(n.margin.top+n.margin.bottom)/2};var r,o=d3.scaleOrdinal(n.colors),l=Math.max(n.maxValue,d3.max(t,(function(t){return d3.max(t.data.map((function(t){return t.value})))}))),c=t[0].data.map((function(t){return function(t){var e="";return s.w<=328?e=t.shortName||t.abbrName||t.name||"":s.w>=329&&s.w<=469?e=t.abbrName||t.name||"":s.w>469&&(e=t.name||""),e}(t)})),d=2*Math.PI/c.length,h=Math.min(s.w/3,s.h/3)*s.extra,u=d3.scaleLinear().range([0,h]).domain([0,l]),p=this.element[0];d3.select(p).select("svg").remove();var f=d3.select(p).append("svg").attr("width",s.w+n.margin.left+n.margin.right).attr("height",s.h+n.margin.top+n.margin.bottom).attr("class","chart-radar");this.svg=f;var g=f.append("g").attr("transform","translate(".concat(s.transform.x,",").concat(s.transform.y,")"));if(n.opacityCircles>0){var m=g.append("defs").append("filter").attr("id","glow");m.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var v=m.append("feMerge");v.append("feMergeNode").attr("in","coloredBlur"),v.append("feMergeNode").attr("in","SourceGraphic")}var b=g.append("g").attr("class","chart-radar-axis-wrapper");b.selectAll(".levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",(function(t){return h/n.levels*t})).style("fill-opacity",n.opacityCircles).style("filter",n.opacityCircles>0?"url(#glow)":""),n.showAxisLabels&&b.selectAll(".axis-label").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",(function(t){return-t*h/n.levels})).attr("dy","0.4em").style("font-size",W.uplift?"12px":"10px").attr("fill","#737373").text((function(t){var e=Math.round(10*l)/10;return n.axisFormatter.indexOf("%")>-1?d3.format(n.axisFormatter)(e*t/n.levels):d3.format(n.axisFormatter)(t/n.levels)}));var y=b.selectAll(".axis").data(c).enter().append("g").attr("class","axis");n.showCrosslines&&y.append("line").attr("x1",0).attr("y1",0).attr("x2",(function(t,e){return u(1.05*l)*Math.cos(d*e-Math.PI/2)})).attr("y2",(function(t,e){return u(1.05*l)*Math.sin(d*e-Math.PI/2)})).attr("class","chart-radar-crossline").style("stroke-width","1px"),y.append("text").attr("class","legend").style("font-size",W.uplift?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",(function(t,e){return u(l*n.labelFactor)*Math.cos(d*e-Math.PI/2)})).attr("y",(function(t,e){return u(l*n.labelFactor)*Math.sin(d*e-Math.PI/2)})).text((function(t){return t})),this.element[s.w<420?"addClass":"removeClass"]("is-small"),s.w>456&&f.selectAll(".chart-radar-axis-wrapper .axis .legend").each((function(){fe.wrap(d3.select(this),n.wrapWidth,n.labelFactor)}));var w=d3.lineRadial().curve(d3.curveBasisClosed).radius((function(t){return u(t.value)})).angle((function(t,e){return e*d}));n.roundStrokes&&w.curve(d3.curveCardinalClosed);var x=g.selectAll(".radarWrapper").data(t.map((function(t){return t.data}))).enter().append("g").attr("class","chart-radar-wrapper");if(x.append("path").attr("class","chart-radar-area").attr("d",(function(t){return w(t)})).style("fill",(function(t,e){return o(e)})).style("fill-opacity",n.opacityArea).on("click.".concat(e.namespace),(function(t,i){clearTimeout(r);var a=d3.select(this),s=a.classed("is-selected");f.selectAll(".is-selected").classed("is-selected",!1),f.selectAll(".is-not-selected").classed("is-not-selected",!1),s||(f.selectAll(".chart-radar-area").classed("is-not-selected",!0),a.classed("is-selected",!0).classed("is-not-selected",!1),a.style("fill-opacity",n.opacityArea));var o={elem:a.nodes(),data:t,index:i};e.element.triggerHandler(s?"deselected":"selected",o),fe.selected=s?[]:o})).on("contextmenu.".concat(e.namespace),(function(t){fe.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),x.append("path").attr("class","chart-radar-stroke").attr("d",(function(t){return w(t)})).style("stroke-width","".concat(n.strokeWidth,"px")).style("stroke",(function(t,e){return o(e)})).style("fill","none").style("filter",n.opacityCircles>0?"url(#glow)":""),x.selectAll(".chart-radar-circle").data((function(t){return t})).enter().append("circle").attr("class","chart-radar-circle").attr("r",n.dotRadius).attr("cx",(function(t,e){return u(t.value)*Math.cos(d*e-Math.PI/2)})).attr("cy",(function(t,e){return u(t.value)*Math.sin(d*e-Math.PI/2)})).style("fill",(function(){return o($(this.parentNode).index()-1)})).style("fill-opacity",.6),g.selectAll(".radar-circle-wrapper").data(t.map((function(t){return t.data}))).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data((function(t){return t})).enter().append("circle").attr("class","radar-invisible-circle").attr("r",1.5*n.dotRadius).attr("cx",(function(t,e){return u(t.value)*Math.cos(d*e-Math.PI/2)})).attr("cy",(function(t,e){return u(t.value)*Math.sin(d*e-Math.PI/2)})).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(e.namespace),(function(t){if(n.showTooltips){var e=$(this).offset(),a=fe.formatToSettings(t,n.tooltip);-1===a.indexOf("<b>")&&(a=(a=a.replace("(","<b>")).replace(")","</b>"));var s=fe.tooltipSize(a),o=e.left,l=e.top;o-=s.width/2-6,l-=s.height+6,null!=r&&clearTimeout(r),r=setTimeout((function(){fe.tooltip&&fe.tooltip.length&&fe.tooltip[i?"addClass":"removeClass"]("is-personalizable"),fe.showTooltip(o,l,a,"top")}),300)}})).on("mouseleave.".concat(e.namespace),(function(){clearTimeout(r),fe.hideTooltip()})).on("contextmenu.".concat(e.namespace),(function(t){fe.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),n.showTooltips&&fe.appendTooltip("is-pie"),n.showLegend){n.legendPlacement&&this.element.addClass("has-".concat(n.legendPlacement,"-legend"));var C=n.dataset.map((function(t,e){return{name:t.name,display:"twocolumn",placement:n.legendPlacement,color:o(e)}}));n.svg=e.svg,fe.addLegend(C,"pie",n,this.element)}}else e.element.emptymessage(n.emptyMessage)},setInitialSelected:function(){},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return fe.selected},setSelected:function(t,e){var n,i,a=0,s=this;this.svg.selectAll(".chart-radar-area").each((function(e,r){var o=s.settings.dataset[r];o&&o.data&&a<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===o[t.fieldName]||void 0!==t.index&&t.index===r||t.elem&&$(this).is(t.elem))&&(a++,n=d3.select(this),i=r)})),a>0&&(e||!n.classed("is-selected"))&&n.on("click.".concat(s.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=t.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(e(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),fe.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(t){var e=null;switch(this.empty(),t.type){case"targeted-achievement":case"completion":case"completion-target":if(e=this.data(t.type))return e.updated(t),this;var n=new be(this,t);this.data("completion-chart",n),this.data("chart",n),this.data(t.type,n);break;case"bullet":if(e=this.data("bullet"))return e.updated(t),this;var i=new me(this,t);this.data("bullet",i),this.data("chart",i);break;case"radar":if(e=this.data("radar"))return e.updated(t),this;var a=new Le(this,t);this.data("radar",a),this.data("chart",a);break;case"sparkline":if(e=this.data("sparkline"))return e.updated(t),this;var s=new we(this,t);this.data("sparkline",s),this.data("chart",s);break;case"sparkline-dots":if(t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var r=new we(this,t);this.data("sparkline",r),this.data("chart",r);break;case"sparkline-peak":if(t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var o=new we(this,t);this.data("sparkline",o),this.data("chart",o);break;case"sparkline-dots-n-peak":if(t.isPeakDot=!0,t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var l=new we(this,t);this.data("sparkline",l),this.data("chart",l);break;case"sparkline-minmax":if(t.isMinMax=!0,e=this.data("sparkline"))return e.updated(t),this;var c=new we(this,t);this.data("sparkline",c),this.data("chart",c);break;case"sparkline-medianrange":if(t.isMedianRange=!0,e=this.data("sparkline"))return e.updated(t),this;var d=new we(this,t);this.data("sparkline",d),this.data("chart",d);break;case"sparkline-medianrange-n-peak":if(t.isMedianRange=!0,t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var h=new we(this,t);this.data("sparkline",h),this.data("chart",h);break;case"line":if(e=this.data("line"))return e.updated(t),this;var u=new Te(this,t);this.data("line",u),this.data("chart",u);break;case"area":if(t.isArea=!0,e=this.data("line"))return e.updated(t),this;var p=new Te(this,t);this.data("line",p),this.data("chart",p);break;case"bubble":if(t.isBubble=!0,e=this.data("line"))return e.updated(t),this;var f=new Te(this,t);this.data("line",f),this.data("chart",f);break;case"scatterplot":if(t.isScatterPlot=!0,e=this.data("line"))return e.updated(t),this;var g=new Te(this,t);this.data("line",g),this.data("chart",g);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(e=this.data("column"))return e.updated(t),this;var m=new Ae(this,t);this.data("column",m),this.data("chart",m);break;case"column-stacked":if(t.isStacked=!0,e=this.data("column"))return e.updated(t),this;var v=new Ae(this,t);this.data("column",v),this.data("chart",v);break;case"bar":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var b=new Ee(this,t);this.data("bar",b),this.data("chart",b);break;case"bar-stacked":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var y=new Ee(this,t);this.data("bar",y),this.data("chart",y);break;case"bar-normalized":if(t.isNormalized=!0,e=this.data("bar"))return e.updated(t),this;var w=new Ee(this,t);this.data("bar",w),this.data("chart",w);break;case"bar-grouped":if(t.isStacked=!1,t.isGrouped=!0,e=this.data("bar"))return e.updated(t),this;var x=new Ee(this,t);this.data("bar",x),this.data("chart",x);break;case"pie":if(e=this.data("pie"))return e.updated(t),this;var C=new Ie(this,t);this.data("pie",C),this.data("chart",C);break;case"donut":if(t.isDonut=!0,e=this.data("pie"))return e.updated(t),this;var k=new Ie(this,t);this.data("pie",k),this.data("chart",k);break;default:e=null}return this};var Pe={isToday:function(t){var e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},firstDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getDay(),i=new Date(t),a=n>=e?n-e:6-n;return i.setDate(t.getDate()-a),i.setHours(0,0,0,0),i},lastDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.firstDayOfWeek(t,e);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),n},dateDiff:function(t,e,n){var i=new Date;return Math.round((e-t)/(36e5*(n?1:Math.abs(i.getTimezoneOffset()))))}},Ne={addCalculatedFields:function(t,e,n,i){var a=function(t,n){return D.formatDate(t,b.extend(!0,{locale:e.name},n))},s={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:e.name},r=function(t){return D.parseDate(t,s)},o=function(t){return D.translate(t,{locale:e.name,language:n})};t.color=this.getEventTypeColor(t.type,i),t.duration=Math.abs(Pe.dateDiff(new Date(t.ends),new Date(t.starts),!1));var l=new Date,c=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),d=new Date(t.starts),h=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear()),p="".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear());t.durationUnits=o(t.duration>1?"Days":"Day"),t.daysUntil=t.starts?Pe.dateDiff(h,c):0;var f,g,m=(new Date(t.ends)-new Date(t.starts))/36e5;if(t.durationHours=m>0&&m<.5?1:Math.round(m),t.isDays=!0,c>h&&u!==p&&(t.daysUntil=1),void 0===t.isAllDay&&(t.isAllDay=!0),t.durationHours<24&&(t.isDays=!1,t.isAllDay=!1,t.durationUnits=o(t.durationHours>1?"Hours":"Hour")),"true"===t.isAllDay.toString()&&(t.duration=(f=new Date(t.starts),g=new Date(t.ends),Math.abs(Math.round((g-f)/864e5))||1),t.durationUnits=o(t.duration>1?"Days":"Day"),t.isDays=!0,delete t.durationHours),t.starts){var v=r(t.starts);t.startsLocale=a(v),t.startsHourLocale=a(v,{date:"hour"}),t.startsHour=Array.isArray(v)?parseFloat(v[3]+v[4]/60):parseFloat(v.getHours()+v.getMinutes()/60)}if(t.ends){var y=r(t.ends);t.endsLocale=a(y),t.endsHourLocale=a(y,{date:"hour"}),t.endsHour=Array.isArray(y)?parseFloat(y[3]+y[4]/60):parseFloat(y.getHours()+y.getMinutes()/60)}if(t.eventTypes=i,t.isAllDay=t.isAllDay.toString(),"false"===t.isAllDay.toString()&&delete t.isAllDay,!t.isAllDay&&t.durationHours>=24&&(t.isAllDay=!1,t.durationUnits=o("Hours"),t.isDays=!1,delete t.duration),t.starts&&t.ends){var w=this.timeDiffInSeconds(r(t.starts),r(t.ends));t.durationInTime=this.timeBySeconds(w)}else t.durationInTime&&delete t.durationInTime;return t},timeDiffInSeconds:function(t,e){var n=Math.abs(e.getTime()-t.getTime());return Math.ceil(n/1e3)},timeBySeconds:function(t){return t=Number(t),{days:Math.floor(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(t%3600/60),seconds:Math.floor(t%60)}},formateTimeString:function(t,e,n){if(t.durationInTime){var i=function(t){return D.translate(t,{locale:e.name,language:n})},a=t.durationInTime,s="";if(a.days){var r=i(a.days>1?"Days":"Day");s+="".concat(a.days," ").concat(r)}if(a.hours){var o=i(a.hours>1?"Hours":"Hour");a.days&&(s+="".concat(a.minutes||a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.hours," ").concat(o)}if(a.minutes){var l=i(a.minutes>1?"Minutes":"Minute");(a.days||a.hours)&&(s+="".concat(a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.minutes," ").concat(l)}if(a.seconds){var c=i(a.seconds>1?"Seconds":"Second");s+="".concat(a.days||a.hours||a.minutes?" ".concat(i("And")," "):""),s+="".concat(a.seconds," ").concat(c)}""!==s&&(t.duration="",t.durationUnits="",t.durationHours=s)}},getEventTypeColor:function(t,e){var n="azure";if(!t)return n;var i=e.filter((function(e){return e.id===t}));return 1===i.length&&(n=i[0].color||"azure"),n},cleanEventData:function(t,e,n,i,a,s,r){var o={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:i.name},l=function(t){return D.formatDate(t,o)},c=function(t,e){return D.parseDate(t,b.extend(!0,{locale:i.name},e))},d="on"===t.isAllDay||"true"===t.isAllDay||t.isAllDay,h=n,p=n;if(t.startsLocale&&t.endsLocale&&(h=new Date(c(t.startsLocale)),p=new Date(c(t.endsLocale))),"string"!=typeof t.starts||t.startsLocale||(h=new Date(t.starts)),"string"!=typeof t.ends||t.endsLocale||(p=new Date(t.ends)),D.isValidDate(h)||(h=n),D.isValidDate(p)||(p=n),d)h.setHours(0,0,0,0),t.starts=l(new Date(h)),p.setHours(23,59,59,999),t.ends=l(new Date(p)),t.duration=t.starts===t.ends?1:null,t.isAllDay=!0;else{if(h===p)p.setHours(p.getHours()+parseInt(t.durationHours,10)),t.ends=l("safari"===u.browser.name?p:p.toISOString()),t.duration=null;else if(t.endsHourLocale&&t.startsHourLocale){var f=c(t.startsHourLocale,{date:"hour"}),g=c(t.endsHourLocale,{date:"hour"});h.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()),p.setHours(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()),"safari"===u.browser.name?(t.starts=l(h),t.ends=l(p)):(t.starts=l(h.toISOString()),t.ends=l(p.toISOString())),t.duration=Pe.dateDiff(new Date(t.starts),new Date(t.ends))}else t.ends=l(new Date(p));t.starts=l(new Date(h)),t.isAllDay=!1}if(void 0===t.comments&&e&&(t.comments=D.translate("NoCommentsEntered",{locale:i.name,language:a}),t.noComments=!0),!t.subject&&e&&(t.subject=D.translate("NoTitle",{locale:i.name,language:a})),t.type||(t.type=r[0].id),void 0===t.id&&e){var m=0===s.length?0:parseInt(s[s.length-1].id,10);t.id=(m+1).toString()}"NewEvent"===t.title&&(t.title=D.translate("NewEvent",{locale:i.name,language:a}))}},_e={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1};function Re(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,_e),this.init()}Re.prototype={init:function(){this.setLocale().build().handleEvents()},build:function(){return this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false"),this.settings.isAlternate?(this.element[0].classList.add("is-alternate"),this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(this.settings.isMenuButton?'<button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n        <span class="month">november</span>\n        <span class="year">2019</span>\n        <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n        <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </button>':'<span class="month">november</span><span class="year">2015</span>','\n        </div>\n        <div class="toolbar-section buttonset l-align-').concat(this.isRTL?"left":"right",'">\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(D.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>').concat(D.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(D.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n          </button>\n        </div>\n      ")):this.element[0].innerHTML='\n        <div class="toolbar-section">\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>'.concat(D.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(D.translate("NextMonth",{locale:this.locale.name,language:this.language}),'</span>\n          </button>\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(D.translate("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(D.translate("Today",{locale:this.locale.name,language:this.language}),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(D.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(this.settings.showViewChanger?'<label for="calendar-view-changer" class="label audible">'.concat(D.translate("ChangeView",{locale:this.locale.name,language:this.language}),'</label>\n            <select id="calendar-view-changer" name="calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===this.settings.viewChangerValue?" selected":"",">").concat(D.translate("Month",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="week"').concat("week"===this.settings.viewChangerValue?" selected":"",">").concat(D.translate("Week",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="day" ').concat("day"===this.settings.viewChangerValue?" selected":"",">").concat(D.translate("Day",{locale:this.locale.name,language:this.language}),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      "),this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:D.calendar(this.locale.name,this.settings.language,this.settings.calendarName).dateFormat.year,locale:this.settings.locale,language:this.settings.language,onOpenCalendar:this.settings.onOpenCalendar,isMonthPicker:this.settings.isMonthPicker,showToday:this.settings.showToday}),this.settings.showViewChanger&&(this.viewChanger=this.element.find("#calendar-view-changer").dropdown()),this.todayLink=this.element.find(".hyperlink.today"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(new Date(this.settings.year,this.settings.month,1)),this},setInternalDate:function(t){this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth(),this.currentDay=t.getDate(),this.currentDate=t,this.monthPicker.text(D.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language})),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=D.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var e=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(e),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var n=D.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" ")[0];this.element.find("span.year").text("".concat(n," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=D.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var t=this;return this.settings.language?(D.getLocale(this.settings.language),this.language=this.settings.language):this.language=D.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=D.currentLocale,this.setCurrentCalendar()):D.getLocale(this.settings.locale).done((function(e){t.locale=D.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar()})),this},setViewChangerValue:function(t){this.settings.viewChangerValue=t,this.viewChanger.val(t).trigger("updated")},handleEvents:function(){var t=this,e=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",(function(){var t=$(this).data("datepicker");e.setInternalDate(t.currentDate),e.element.trigger("change-date",{selectedDate:t.currentDate,isToday:!1})})),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",(function(e){t.element.trigger("change-date",{selectedDate:t.currentDate,isToday:!0}),e.preventDefault()})),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){t.element.trigger("change-prev",{selectedDate:t.currentDate,isToday:!1})})),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){t.element.trigger("change-next",{selectedDate:t.currentDate,isToday:!1})})),this.settings.onChangeView&&this.element.find("#calendar-view-changer").off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",(function(e){t.settings.onChangeView({viewName:e.currentTarget.value,elem:e.currentTarget,api:t})})),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,_e)),this.teardown().init()},teardown:function(){return this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"calendartoolbar")}};var Be={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,headerStyle:"full",firstDayOfWeek:null,disable:{dates:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],hideDays:!1,showMonthYearPicker:!0,yearsAhead:5,yearsBack:4,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,onChangeView:null,isMonthPicker:!1};function Oe(t,e){this.settings=b.mergeSettings(t,e,Be),this.element=$(t),this.init()}Oe.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=D.getLocale(this.settings.language),n=D.getLocale(this.settings.locale);$.when(n,e).done((function(e,n){t.locale=D.cultures[e]||D.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()}))},build:function(){var t=this;return"false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(D.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(D.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(D.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(this.settings.showMonthYearPicker?'<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n      <div class="expandable-pane">\n        <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n      </div>\n    </div>'):""),this.settings.hideDays&&(this.table=""),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(D.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.table),this.settings.isPopup||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new Re(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:"full"!==this.settings.headerStyle&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView}),this.handleEvents(),this},setCurrentCalendar:function(){this.currentCalendar=D.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},showMonth:function(t,e){var n=this,i=this,a=this.settings,s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0);var r=a.activeDate&&a.activeDate.getDate()?a.activeDate:s;if(this.setCurrentCalendar(),this.isIslamic)if(a.activeDateIslamic)r=a.activeDateIslamic;else{var l=new Date;this.todayDateIslamic=D.gregorianToUmalqura(l),a.activeDateIslamic=[],a.activeDateIslamic[0]=this.todayDateIslamic[0],a.activeDateIslamic[1]=this.todayDateIslamic[1],a.activeDateIslamic[2]=this.todayDateIslamic[2],e=a.activeDateIslamic[0],t=a.activeDateIslamic[1],r=D.gregorianToUmalqura(s)}e.toString().length<4&&(e=(new Date).getFullYear()),12===t&&(e++,this.currentMonth=t=0,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),t<0&&(e--,this.currentMonth=t=11,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=D.calendar(this.locale.name,this.language,this.settings.calendarName));var c=this.currentCalendar.days.narrow;c=c||this.currentCalendar.days.abbreviated,a.isPopup||(c=this.currentCalendar.days.abbreviated);var d=this.currentCalendar.months.wide[t];this.currentMonth=t,this.currentYear=e;var h=this.currentCalendar.firstDayofWeek||0;if(a.firstDayOfWeek&&(h=a.firstDayOfWeek),this.dayNames.find("th").each((function(t){$(this).text(c[(t+h)%7])})),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",t).text("".concat(o.stripTags(d)," ")),this.header.find(".year").text(" ".concat(e)),this.yearFirst&&!this.isIslamic&&!this.isRTL){r.setFullYear(e);var u=D.formatDate(r,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(u," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===a.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(new Date(e,t,1)),this.appendMonthYearPicker(t,e);var p,f,g,m=(this.firstDayOfMonth(e,t)-h+7)%7,v=this.daysInMonth(e,t+(this.isIslamic?1:0)),b=this.daysInMonth(e,t+(this.isIslamic?0:1)),y=1,w=1,x=!1,C=function(t,e){x=e,t.addClass("is-selected".concat(a.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each((function(n){var a=$(this).removeClass("alternate prev-month next-month is-selected range is-today");if(a.removeAttr("aria-selected"),a.removeAttr("tabindex"),n<m&&(i.setDisabled(a,p=0===t?e-1:e,f=0===t?11:t-1,g=v-m+1+n),i.setLegendColor(a,p,f,g),i.dayMap.push({key:k.padDate(p,f,g),elem:a}),a.addClass("alternate prev-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(o.stripTags(g),"</span></span>")),a.attr("data-key",k.padDate(p,f,g))),n>=m&&w<=b){if(i.dayMap.push({key:k.padDate(e,t,w),elem:a}),a.html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(o.stripTags(w),"</span></span>")),a.attr("data-key",k.padDate(e,t,w)),i.isIslamic)e===r[0]&&t===r[1]&&w===r[2]&&C(a,!0);else{var s=r.getHours(),l=r.getMinutes(),c=i.isSeconds?r.getSeconds():0,d=function(t){return t?t.setHours(s,l,c,0):0},h=d(new Date(e,t,w));h!==d(r)&&h!==d(i.currentDate)||C(a,!0)}w===i.todayDay&&i.currentMonth===i.todayMonth&&i.currentYear===i.todayYear&&a.addClass("is-today"),a.attr("aria-label",D.formatDate(new Date(i.currentYear,i.currentMonth,w),{date:"full",locale:i.locale.name}));var u=k.padDate(i.currentYear,i.currentMonth,w);return a.attr("data-key",u),i.setDisabled(a,e,t,w),i.setLegendColor(a,e,t,w),a.attr("role","link"),void w++}w>=b+1&&(i.dayMap.push({key:k.padDate(p=11===t?e+1:e,f=11===t?0:t+1,g=y),elem:a}),i.setDisabled(a,p,f,g),i.setLegendColor(a,p,f,g),a.addClass("alternate next-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(y,"</span></span>")),a.attr("data-key",k.padDate(p,f,g)),y++)})),!x&&!a.range.useRange){var T=i.dayMap.filter((function(i){return i.key===k.padDate(e,t,n.settings.day)}));T.length&&C(T[0].elem,!1)}var S=this.days.find("tr").eq(5);7===S.find("td.alternate").length?S.hide():S.show(),this.currentDate||(this.isIslamic?(this.currentIslamicDate=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=D.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),a.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:e,month:t,elem:this.element,api:this})},setRangeSelection:function(){if(this.settings.range.useRange){var t={};t.date=new Date(this.currentYear,this.currentMonth,1),t.date.setDate(t.date.getDate()-(this.days.find(".prev-month:visible").length+1)),t.formatedDate=D.formatDate(t.date,{date:"full",locale:this.locale.name}),t.cell=this.days.find('[aria-label="'.concat(t.formatedDate,'"]')),this.setRangeOnCell(!this.settings.range.second&&t.cell)}},appendMonthYearPicker:function(t,e){if(this.settings.showMonthYearPicker){var n='<ul class="picklist is-month">';this.currentCalendar.months.wide.map((function(e,i){n+='<li class="picklist-item'.concat(i===t?" is-selected ":"",'"><a href="#" ').concat(i===t?'tabindex="0" ':'tabindex="-1" ','data-month="').concat(i,'">').concat(e,"</a></li>")})),n+="</ul>",this.monthYearPane.find(".picklist-section.is-month").empty().append(n);var i=[],a='<ul class="picklist is-year">';a+='<li class="picklist-item up"><a href="#" tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>';for(var s=this.settings.yearsBack;s>=1;s--)i.push(parseInt(e,10)-s);i.push(e);for(var r=1;r<=this.settings.yearsAhead;r++)i.push(parseInt(e,10)+r);i.map((function(t){a+='<li class="picklist-item'.concat(e===t?" is-selected ":"",'"><a href="#" ').concat(e===t?'tabindex="0" ':'tabindex="-1" ','data-year="').concat(t,'">').concat(t,"</a></li>")})),a+='<li class="picklist-item down"><a tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>',a+="</ul>",this.monthYearPane.find(".picklist-section.is-year").empty().append(a),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst")}},firstDayOfMonth:function(t,e){if(this.isIslamic){var n=D.umalquraToGregorian(t,e,1);return null===n?1:n.getDay()}return new Date(t,e,1).getDay()},daysInMonth:function(t,e){if(this.isIslamic){for(var n=this.conversions.yearInfo[this.islamicYearIndex(t)][0],i=0;i<=e;i++){if(i===e)return 29+(1&n);n>>=1}return 0}return new Date(t,e,0).getDate()},islamicYearIndex:function(t){var e=t-1318;return e<0||e>=this.conversions.yearInfo.length?0:e},setDisabled:function(t,e,n,i){var a=this.settings,s=this.isDateDisabled(e,n,i);t.removeClass("is-disabled").removeAttr("aria-disabled"),(s&&!a.disable.isEnable||!s&&a.disable.isEnable)&&t.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")},isDateDisabled:function(t,e,n){var i=this.settings,a=new Date(i.disable.minDate).setHours(0,0,0,0),s=new Date(i.disable.maxDate).setHours(0,0,0,0),r=this.isIslamic?D.umalquraToGregorian(t,e,n):new Date(t,e,n);if(!r)return!1;if(-1!==i.disable.dayOfWeek.indexOf(r.getDay()))return!0;if((r=r.setHours(0,0,0,0))<=a||r>=s)return!0;i.disable.dates.length&&"string"==typeof i.disable.dates&&(i.disable.dates=[i.disable.dates]);for(var o=0,l=i.disable.dates.length;o<l;o++)if(r===new Date(i.disable.dates[o]).setHours(0,0,0,0))return!0;return!1},getDateRange:function(t,e,n){var i=[],a=new Date(t);for(n=void 0!==n?n:this.settings.range.includeDisabled;e.getTime()>=a.getTime();)(n||!n&&!this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate()))&&i.push(new Date(a)),a.setDate(a.getDate()+1);return i},setLegendColor:function(t,e,n,i){if(this.settings.showLegend&&t[0]){var a=this.getLegendColor(e,n,i);if(t[0].style.backgroundColor="",t.off("mouseenter.legend mouseleave.legend"),a){if(-1===a.indexOf("#")){var s=a.replace(/[0-9]/g,""),r=10*a.substr(a.length-2,2);a=W.themeColors().palette[s][r].value}t.addClass("is-colored"),t[0].style.backgroundColor=j.hexToRgba(a,.3);var o=j.hexToRgba(a,.3),l=j.hexToRgba(a,.7);t.on("mouseenter.legend",(function(){var t=$(this);t[0].style.backgroundColor=l,t.find("span")[0].style.backgroundColor="transparent",t.find(".day-text")[0].style.backgroundColor="transparent"})).on("mouseleave.legend",(function(){var t=$(this);t[0].style.backgroundColor=o,t.find("span")[0].style.backgroundColor="",t.find(".day-text")[0].style.backgroundColor=""}))}}},getLegendColor:function(t,e,n){var i=this.settings;if(i.showLegend){for(var a=new Date(t,e,n),s=a.setHours(0,0,0,0),r=0;r<i.legend.length;r++){var o=i.legend[r];if(o.dayOfWeek&&-1!==o.dayOfWeek.indexOf(a.getDay()))return o.color;if(o.dates)for(var l=0;l<o.dates.length;l++)if(s===new Date(o.dates[l]).setHours(0,0,0,0))return o.color}return""}},handleEvents:function(){var t=this,e=this,n=this.settings;return this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),(function(){t.updated()})),this.header.off("click.monthview").on("click.monthview",".btn-icon",(function(){var t=$(this).is(".next"),i={},a={month:e.currentMonth,year:e.currentYear};n.range.useRange?(t?i.date=new Date(a.year,a.month+1,e.element.find(".next-month:visible").length+1):(i.date=new Date(a.year,a.month,1),i.date.setDate(i.date.getDate()-(e.days.find(".prev-month:visible").length+1))),a.month+=t?1:-1):(e.currentMonth+=t?1:-1,e.currentDate.setMonth(e.currentMonth),e.currentYear=parseInt(e.element[0].querySelector("span.year").innerText,10),e.currentDate.setFullYear(e.currentYear),a.month=e.currentMonth,a.year=e.currentYear),e.showMonth(a.month,a.year),n.range.useRange&&(i.formatedDate=D.formatDate(i.date,{date:"full",locale:e.locale.name}),i.cell=e.days.find('[aria-label="'.concat(i.formatedDate,'"]')),e.setRangeOnCell(!n.range.second&&i.cell))})),n.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",(function(){n.range.extra&&e.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)})).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",(function(){n.range.extra&&e.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)})),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",(function(){e.setRangeOnCell(this)}))),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",(function(e,n){n.isToday&&t.settings.isPopup||(n.isToday?t.setToday():t.selectDay(n.selectedDate,!1,!0))})),n.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",(function(e){var n=e.currentTarget.getAttribute("data-key");t.lastClickedKey=n,e.currentTarget.classList.contains("is-disabled")||t.selectDay(n,!1,!0)})),this.handleMonthYearPane().handleKeys(),this},handleMonthYearPane:function(){var t=this,e=this.settings,n=function(e){var n=t.monthYearPane[0].querySelector(".picklist.is-year"),i=n.children,a=i["up"===e?1:i.length-2].querySelector("a").getAttribute("data-year"),s=parseInt(a,10)+("up"===e?-1:1);l.remove(i["up"===e?i.length-2:1]);var r=document.createElement("a");r.setAttribute("href","#"),r.setAttribute("tabindex","-1"),r.setAttribute("data-year",s),r.innerHTML=s;var o=document.createElement("li");l.addClass(o,"picklist-item"),o.appendChild(r),n.insertBefore(o,i["up"===e?1:i.length-1]),t.monthYearPane[0].querySelector(".picklist.is-year li.is-selected")||(l.addClass(o,"is-selected"),r.setAttribute("tabindex","0"))},i=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",(function(t){return i=setInterval((function(){return t.currentTarget.classList.contains("up")&&n("up"),t.currentTarget.classList.contains("down")&&n("down"),t.stopImmediatePropagation(),t.stopPropagation(),!1}),200),!0})).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",(function(){return clearInterval(i),!0}));var a=function(n,i){var a=function(e){return t.monthYearPane[0].querySelector(".is-".concat(e," .is-selected a"))},s="is-month"===i?{month:parseInt(n.getAttribute("data-month"),10),year:parseInt(a("year").getAttribute("data-year"),10)}:{month:parseInt(a("month").getAttribute("data-month"),10),year:parseInt(n.getAttribute("data-year"),10)};e.range.useRange||(t.currentMonth=s.month,t.currentDate.setMonth(t.currentMonth),t.currentYear=s.year,t.currentDate.setFullYear(t.currentYear),s.month=t.currentMonth,s.year=t.currentYear),function(e,n){var i=t.monthYearPane[0].querySelector(".picklist.".concat(n," .is-selected"));l.removeClass(i,"is-selected"),i.querySelector("a").setAttribute("tabindex","-1"),l.addClass(e.parentNode,"is-selected"),e.setAttribute("tabindex","0")}(n,i),t.element.hasClass("".concat(i,"only"))&&t.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",(function(t){a(t.target,"is-month"),t.preventDefault()})),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",(function(t){t.preventDefault()})),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",(function(t){t.currentTarget.classList.contains("up")?n("up"):t.currentTarget.classList.contains("down")?n("down"):(a(t.target,"is-year"),t.preventDefault())})),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",(function(t){t.preventDefault()})),this.monthYearPane.on("expand.monthviewpane",(function(){e.hideDays||(t.element.find(".btn-icon, td.is-selected").attr("disabled","true"),t.element.find("td.is-selected").removeAttr("tabindex"),t.monthYearPane.find(".content").css("height",t.header.parent().height()-t.header.height()-55),t.element.find(".hyperlink.today").hide(),t.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),t.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(D.translate("Cancel",{locale:t.locale.name,language:t.language}))),setTimeout((function(){t.monthYearPane.find(".is-month .is-selected a").focus(),t.monthYearPane.parent().hasClass("is-yearonly")&&t.monthYearPane.find(".is-year .is-selected a").focus()}))})).on("collapse.monthviewpane",(function(){e.hideDays||(t.element.find(".btn-icon").removeAttr("disabled"),t.element.find("td.is-selected").attr("tabindex","0"),t.element.find(".hyperlink.today").show(),t.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),t.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(D.translate("Clear",{locale:t.locale.name,language:t.language})))}));var s=function(t,e){var n=t.currentTarget,i=t.currentTarget.parentNode,a="prev"===e?i.previousSibling:i.nextSibling;a||(a=i.parentNode.children["prev"===e?i.parentNode.children.length-1:0]);var s=a.querySelector("a");n.setAttribute("tabindex","-1"),i.parentNode.querySelector(".is-selected").classList.remove("is-selected"),l.addClass(a,"is-selected"),s.setAttribute("tabindex","0"),s.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",(function(t){var e=t.currentTarget.parentNode.classList.contains("up"),i=t.currentTarget.parentNode.classList.contains("down"),r=t.currentTarget.parentNode.parentNode.classList.contains("is-year"),o=t.currentTarget.parentNode.parentNode.classList.contains("is-month"),l=!1;"ArrowUp"===t.key&&(r||o)?(s(t,"prev"),l=!0):"ArrowDown"===t.key&&(r||o)?(s(t,"next"),l=!0):"Enter"===t.key&&(e||i?(n(e?"up":"down"),l=!0):(r||o)&&(a(t.target,r?"is-year":"is-month"),l=!0)),l&&t.preventDefault()})),this},selectDay:function(t,e,n){this.isIslamic&&"string"!=typeof t&&(this.currentIslamicDate=D.gregorianToUmalqura(t),t=k.padDate(this.currentIslamicDate[0],this.currentIslamicDate[1],this.currentIslamicDate[2])),this.isIslamic||"string"==typeof t||(t=k.padDate(t.getFullYear(),t.getMonth(),t.getDate()));var i=this.dayMap.filter((function(e){return e.key===t})),a=parseInt(t.substr(0,4),10),s=parseInt(t.substr(4,2),10)-1,r=parseInt(t.substr(6,2),10);if(this.isIslamic?(this.currentIslamicDate=t,this.currentDate=D.umalquraToGregorian(a,s,r)):this.currentDate=new Date(a,s,r),this.currentYear=a,this.currentMonth=s,this.currentDay=r,(0===i.length||i[0].elem.hasClass("alternate"))&&(this.showMonth(s,a),i=this.dayMap.filter((function(e){return e.key===t}))),0!==!i.length){var o=i[0].elem[0],l={node:o,key:t,day:r,month:s,year:a,close:e};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(o).addClass("is-selected").attr("tabindex","0").focus(),(n="full"===this.settings.headerStyle||n)&&this.settings.onSelected&&this.settings.onSelected(o,l),n&&this.element.trigger("selected",l)}},setToday:function(){this.selectDay(new Date,!1,!0)},handleKeys:function(){var t=this,e=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",(function(n){var i=n.keyCode||n.charCode||0,a=$(n.target),s=t.days.find("td:visible"),r=s.length,o=null,l=null,c=!1,d=new Date(e.disable.minDate),h=new Date(e.disable.maxDate),u=function(){t.datepickerApi&&e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&t.datepickerApi.resetRange({isData:!0})};if(t.settings.onKeyDown&&!1===t.settings.onKeyDown({e:n,key:i,cell:a,node:t.element}))return n.stopPropagation(),n.preventDefault(),!1;if(40===i&&(c=!0,e.range.useRange?(o=s.index(n.target)+7,l=s.eq(o),o<r&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<h.getMonth()||h.getDate()-1>=t.currentDate.getDate()+7)&&t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1))),38===i&&(c=!0,e.range.useRange?(o=s.index(n.target)-7,l=s.eq(o),o>-1&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1<=t.currentDate.getDate()-7)&&t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1))),37===i&&(c=!0,e.range.useRange?(o=s.index(n.target)-1,l=s.eq(o),o>-1&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1))),39===i&&(c=!0,e.range.useRange?(o=s.index(n.target)+1,l=s.eq(o),o<r&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<h.getMonth()||h.getDate()-1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1))),33!==i||n.altKey||(c=!0,u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1))),34!==i||n.altKey||(c=!0,u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==h.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1))),33===i&&n.ctrlKey&&(c=!0,u(),t.currentDate.setFullYear(t.currentDate.getFullYear()-1),t.selectDay(t.currentDate,!1,!1)),34===i&&n.ctrlKey&&(c=!0,u(),t.currentDate.setFullYear(t.currentDate.getFullYear()+1),t.selectDay(t.currentDate,!1,!1)),36===i){c=!0;var p,f=t.currentDate;u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()?p=new Date(f.getFullYear(),f.getMonth(),1):(p=new Date(d.getFullYear(),d.getMonth(),d.getDate())).setDate(p.getDate()+1):p=new Date(f.getFullYear(),f.getMonth(),1),t.currentDate=p,t.isIslamic&&(t.currentIslamicDate=D.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(35===i){c=!0;var g,m=t.currentDate;u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==h.getMonth()?g=new Date(m.getFullYear(),m.getMonth()+1,0):(g=new Date(h.getFullYear(),h.getMonth(),h.getDate())).setDate(g.getDate()-1):g=new Date(m.getFullYear(),m.getMonth()+1,0),t.currentDate=g,t.isIslamic&&(t.currentIslamicDate=D.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(84===i){if(e.range.useRange&&t.datepickerApi){u();var v=!(e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date));t.datepickerApi.setToday(v),!v&&t.datepickerApi&&"function"==typeof t.datepickerApi.closeCalendar&&t.datepickerApi.closeCalendar()}else t.setToday();c=!0}if(32===i||13===i){if(c=!0,e.range.useRange)return(!e.range.first||e.range.first&&!e.range.first.date)&&s.removeClass("is-selected"),a.focus().trigger("click"),!1;var b=t.getCellDate(a);t.isIslamic?(t.currentIslamicDate=[b.year,b.month,b.day],t.currentDate=D.umalquraToGregorian(t.currentIslamicDate[0],t.currentIslamicDate[1],t.currentIslamicDate[2])):t.currentDate=new Date(b.year,b.month,b.day),t.selectDay(t.currentDate,!0,!0)}return!c||(n.stopPropagation(),n.preventDefault(),!1)}))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var t=new Date(this.settings.disable.minDate),e=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),t.getFullYear()>this.currentYear||this.currentYear>e.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<t.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>e.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var t=this.settings;if(t.showLegend){this.legend&&this.legend.length&&this.legend.remove(),this.legend=$('<div class="monthview-legend"></div>');for(var e=0;e<t.legend.length;e++){var n=t.legend[e],i=n.color;if(-1===i.indexOf("#")){var a=i.replace(/[0-9]/g,""),s=10*i.substr(i.length-2,2);i=W.themeColors().palette[a][s].value}var r=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(j.hexToRgba(i,.3),'"></span>\n          <span class="monthview-legend-text">').concat(n.name,"</span>\n        </div>");this.legend.append(r)}this.table.after(this.legend)}},setRangeOnCell:function(t){var e=this.settings;if(e.range.useRange&&e.range.first&&!e.range.second){var n=e.range.first,i=e.range.extra,a=i.cellLength-1,s=n.rowIdx+n.cellIdx+a*n.rowIdx;if((t=$(t)).length&&!t.is(".is-disabled, .is-selected")){var r=t.closest("tr"),o=t.index(),l=r.index(),c=l+o+a*l,d=this.getCellDate(t),h=new Date(d.year,d.month,d.day),u=this.getDifferenceToDate(e.range.first.date,e.range.maxDays);this.days.find("td:visible").each((function(t){var n=$(this);h>e.range.first.date&&!e.range.selectBackward&&(!e.range.maxDays||e.range.maxDays>0&&h.getTime()<=u.aftertime)&&(t>s&&t<=c||h>i.max&&t<=c)?n.addClass("range-next"):h<e.range.first.date&&!e.range.selectForward&&(!e.range.maxDays||e.range.maxDays>0&&h.getTime()>=u.beforetime)&&(t<s&&t>=c||h<i.min&&t>=c)?n.addClass("range-prev"):n.removeClass("range-next range-prev")}))}else t.length||this.days.find("td").removeClass("range-next range-prev")}!t&&e.range.second&&this.setRangeSelected()},getDifferenceToDate:function(t,e,n){var i=this,a={},s=function(t,e,s){for(t=new Date(t);e>0;)t.setDate(t.getDate()+(s?1:-1)),(n||!n&&!i.isDateDisabled(t.getFullYear(),t.getMonth(),t.getDate()))&&(e--,a[s?"after":"before"]=new Date(t));s&&a.after?a.aftertime=a.after.getTime():a.before&&(a.beforetime=a.before.getTime())};return n=void 0!==n?n:this.settings.range.includeDisabled,s(t,e),s(t,e,!0),a},setRangeSelected:function(){var t=this,e=this.settings;e.range.useRange&&e.range.second&&e.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each((function(){var n,i=$(this),a=i.is(".is-disabled")&&!e.range.includeDisabled,s=i.is(".is-disabled")&&e.range.includeDisabled?" include-disabled":"",r=function(t){return(t=new Date(t)).setHours(0,0,0),t.getTime()},o=r((n=t.getCellDate(i),new Date(n.year,n.month,n.day))),l=r(e.range.first.date),c=r(e.range.second.date);o!==l&&o!==c||a?o>l&&o<c&&!a&&i.addClass("range-selection".concat(s)):i.addClass("is-selected".concat(s).concat(l!==c?" range-selection".concat(o===c?" end-date":""):""))})))},setRangeSelByClick:function(){var t=0,e=this.settings;if(e.range.useRange)if(e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date){if(e.showTime&&this.datepickerApi){var n=function(t){return new Date(t).getTime()},i={time1:n(e.range.first.date),time2:n(e.range.second.date),first:this.datepickerApi.setTime(e.range.first.date),second:this.datepickerApi.setTime(e.range.second.date)};i.time1!==n(i.first)&&(this.datepickerApi.setRangeToElem(i.first,!0),this.datepickerApi.setRangeToElem(i.second,!1),t=2)}t=0===t?1:t}else{var a;!e.range.first||e.range.first&&!e.range.first.date?(a=this.dayMap.filter((function(t){return t.elem.is(".is-selected")})))&&a.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),a[0].elem.focus().trigger("click"),t=3):(!e.range.second||e.range.second&&!e.range.second.date)&&((a=this.days.find("td.range-prev:visible").first()).length||(a=this.days.find("td.range-next:visible").last()),a.length||(a=this.dayMap.filter((function(t){return t.elem.is(".is-selected")}))),a&&a.length&&((a[0].elem||a).focus().trigger("click"),t=3))}return t},getCellDate:function(t){var e=parseInt(t.text(),10),n=parseInt(this.header.find(".month").attr("data-month"),10),i=parseInt(this.header.find(".year").text(),10);return t.hasClass("prev-month")?0===n?(n=11,i--):n--:t.hasClass("next-month")&&(11===n?(n=0,i++):n++),{year:i,month:n,day:e}},setRangeSelBeforeFirstSel:function(t){var e=this.settings;e.range.useRange&&$("#monthview-popup:visible")&&(e.range.first||($("td",this.element).removeClass("is-selected"),t.addClass("is-selected")))},activeTabindex:function(t,e){return $("td",this.element).removeAttr("tabindex"),t.attr("tabindex",0),e&&t.focus(),t},updated:function(){return this.teardown().init()},teardown:function(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){return this.teardown(),this.element&&(this.element.empty(),$.removeData(this.element[0],"monthview")),this}};var Fe={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,showToday:!0,showViewChanger:!0,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function ze(t,e){this.settings=b.mergeSettings(t,e,Fe),this.element=$(t),this.init()}ze.prototype={init:function(){return this.settings.startDate||(this.settings.startDate=Pe.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=Pe.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=D.getLocale(this.settings.language),n=D.getLocale(this.settings.locale);return $.when(n,e).done((function(e,n){t.locale=D.cultures[e]||D.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build()})),this},setCurrentCalendar:function(){return this.currentCalendar=D.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),this},renderAllEvents:function(t){if(!this.settings.onRenderWeek||t){var e=this.settings.events.slice(0);e.sort((function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0})),this.removeAllEvents();for(var n=0;n<e.length;n++){var i=e[n];this.settings.filteredTypes.indexOf(i.type)>-1||this.renderEvent(i)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var t=this;this.settings.onRenderWeek(this.element,(function(e,n){n&&n.length>0&&(t.settings.eventTypes=n),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0))}),{api:t,settings:this.settings})},removeAllEvents:function(){for(var t=this.element[0].querySelectorAll(".calendar-event"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var n=0;n<this.dayMap.length;n++)this.dayMap[n].events=[]},renderEvent:function(t){var e=new Date(t.starts),n=k.padDate(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.ends),a=k.padDate(i.getFullYear(),i.getMonth(),i.getDate()),s=this.dayMap.filter((function(t){return t.key>=n&&t.key<=a}));if(t.endKey=a,t.startKey=n,t=Ne.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),1!==s.length||t.isAllDay||this.appendEventToHours(s[0].elem,t),1===s.length&&t.isAllDay&&this.appendEventToAllDay(s[0].elem,t),s.length>1)for(var r=0;r<s.length;r++){var o=0===r?"calendar-event-start":"calendar-event-continue";r===s.length-1&&(o="calendar-event-ends"),this.appendEventToAllDay(s[r].elem,t,o)}},appendEventToAllDay:function(t,e,n){var i=t.querySelector(".week-view-all-day-wrapper");if(i){var a=document.createElement("a");l.addClass(a,"calendar-event",e.color,n),a.setAttribute("data-id",e.id),a.setAttribute("data-key",e.startKey),a.setAttribute("href","#"),"calendar-event-continue"!==n&&"calendar-event-ends"!==n||a.setAttribute("tabindex","-1"),a.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>");var s=i.querySelectorAll(".calendar-event").length;if(s>=1&&(a.style.top="".concat(22*s,"px")),s>2)for(var r=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),o=0;o<r.length;o++)r[o].style.height="".concat(44+23*(s-1),"px");i.appendChild(a),this.attachTooltip(a,e)}},appendEventToHours:function(t,e){for(var n=this.element[0].querySelectorAll("td:nth-child(".concat(t.cellIndex+1,")")),i=0;i<n.length;i++){var a=n[i],s=parseFloat(a.parentNode.getAttribute("data-hour"),10),r=Math.round(e.startsHour);if(r>e.startsHour?s===r-.5:s===r){var o=e.endsHour-e.startsHour,c="",d=document.createElement("a");l.addClass(d,"calendar-event",e.color),d.setAttribute("data-id",e.id),d.setAttribute("data-key",e.startKey),d.setAttribute("href","#"),o<.5&&l.addClass(d,"reduced-padding",e.color),o<1.5&&l.addClass(d,"is-ellipsis"),o>2&&(c=" ".concat(D.formatHourRange(e.startsHour,e.endsHour,{locale:this.locale}))),e.startsHour+o>this.settings.endHour&&(l.addClass(d,"is-cutoff",e.color),o=this.settings.endHour+1-e.startsHour),o<.25&&(o=.25),e.startsHour>s&&(d.style.top="".concat((e.startsHour-s)/.016666666666666784*(a.parentNode.offsetHeight/30),"px")),d.style.height="".concat(2*o*25+1.5*o,"px"),d.innerHTML='<div class="calendar-event-content">\n          '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(e.shortSubject||e.subject).concat(c,"</span>\n        </div>");var h=a.querySelector(".week-view-cell-wrapper"),u=a.querySelectorAll(".calendar-event"),p=u.length;if(p>0){var f=100/(p+1),g=0;for(g=0;g<p;g++)u[g].style.width="".concat(f,"%"),g>0&&this.isRTL&&(u[g].style.right="".concat(f*g,"%")),g>0&&!this.isRTL&&(u[g].style.left="".concat(f*g,"%"));d.style.width="".concat(f,"%"),this.isRTL?d.style.right="".concat(f*g,"%"):d.style.left="".concat(f*g,"%")}h.appendChild(d),this.attachTooltip(d,e)}}},attachTooltip:function(t,e){var n=this;if("overflow"!==this.settings.iconTooltip){var i=t.querySelector(".calendar-event-icon");i&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:e}):e[this.settings.iconTooltip]&&(i.setAttribute("title",e[this.settings.iconTooltip]),$(i).tooltip({content:i.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:e}):e[this.settings.eventTooltip]&&(t.setAttribute("title",e[this.settings.eventTooltip]),$(t).tooltip({content:t.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(t.setAttribute("title",e.subject),$(t).tooltip({beforeShow:function(t,e){var i=e[0].querySelector(".calendar-event-title"),a=e[0].querySelector(".calendar-event-icon"),s=a?a.querySelector(".icon").getAttribute("data-status"):"";t(i.offsetWidth>e[0].scrollWidth-(a?a.offsetWidth:0)&&"".concat(i.innerText).concat(s?" (".concat(D.translate(s,{locale:n.locale.name},!1),")"):""))}}))},showWeek:function(t,e){var n=this;this.numberOfDays=Math.round((e-t)/864e5),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(D.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(D.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var i=new Date(t.getTime());i<=e;i.setDate(i.getDate()+1)){var a=D.formatDate(i,{pattern:"d",locale:this.locale.name}),s=D.formatDate(i,{pattern:"EEE",locale:this.locale.name}),r=this.currentCalendar.dateFormat.dayOfWeek,o=r?"EEE"===r.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(k.padDate(i.getFullYear(),i.getMonth(),i.getDate()),'"><div class="week-view-header-wrapper').concat(Pe.isToday(i)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(o?"":" is-emphasis",'">').concat(o?s:a,'</span><span class="week-view-header-day-of-week').concat(o?" is-emphasis":"",'">').concat(o?a:s,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var l=this.settings.startHour;l<=this.settings.endHour;l++){for(var c='<tr class="week-view-hour-row" data-hour="'.concat(l,'"><td><div class="week-view-cell-wrapper">').concat(D.formatHour(l,{locale:this.locale}),"</div></td>"),d='<tr class="week-view-half-hour-row" data-hour="'.concat(l,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),h=new Date(t.getTime());h<=e;h.setDate(h.getDate()+1))c+='<td><div class="week-view-cell-wrapper"></div></td>',d+='<td><div class="week-view-cell-wrapper"></div></td>';this.weekBody+=(c+="</tr>")+(d+="</tr>")}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var u={isDayView:this.isDayView,startDate:t,endDate:e,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",u),this.settings.onChangeWeek&&this.settings.onChangeWeek(u),this.element.find("th").each((function(t,e){var i=e.getAttribute("data-key");i&&n.dayMap.push({key:i,elem:e})})),this.addTimeLine(),this.showToolbarMonth(t,e),this.renderAllEvents(),this.settings.startDate=t,this.settings.endDate=e},showToolbarMonth:function(t,e){var n=D.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),i=D.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),a=D.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),s=D.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),r=D.formatDate(e,{date:"year",locale:this.locale.name});i!==n&&(r="".concat(D.formatDate(t,{pattern:"MMM",locale:this.locale.name})," - ").concat(D.formatDate(e,{pattern:"MMMM yyyy",locale:this.locale.name}))),s!==a&&(r="".concat(D.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(D.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(r)},addTimeLine:function(){var t=this;if(this.settings.showTimeLine){var e=function(){var e=new Date,n=e.getHours(),i=e.getMinutes();t.markers.css("top",52*(n-t.settings.startHour+i/60))};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),e(),this.timer=setInterval((function(){e()}),3e4))}},addToolbar:function(){var t=this;this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new Re(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,viewChangerValue:this.isDayView?"day":"week"}),this.monthField=this.header.find("#monthview-datepicker-field")},handleEvents:function(){var t=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),(function(){t.updated()})),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),(function(e,n){var i=n.isToday?new Date:n.selectedDate;t.isDayView?(t.settings.startDate=i,t.settings.endDate=i):(t.settings.startDate=t.hasIrregularDays?i:Pe.firstDayOfWeek(i,t.settings.firstDayOfWeek),t.settings.startDate.setHours(0,0,0,0),t.settings.endDate=new Date(t.settings.startDate),t.settings.endDate.setDate(t.settings.endDate.getDate()+t.numberOfDays-1),t.settings.endDate.setHours(23,59,59,59)),t.showWeek(t.settings.startDate,t.settings.endDate)})),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),(function(){t.advanceDays(!0)})),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),(function(){t.advanceDays(!1)}));var e=function(e,n){var i=e.getAttribute("data-id"),a=t.settings.events.filter((function(t){return t.id===i}));a&&0!==a.length&&t.element.trigger(n,{settings:t.settings,event:a[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",(function(t){e(t.currentTarget,"eventclick"),t.preventDefault()})),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",(function(t){e(t.currentTarget,"eventdblclick")})),this},advanceDays:function(t){var e=this.isDayView?1:this.numberOfDays;t||(e=-e),this.settings.startDate.setDate(this.settings.startDate.getDate()+e),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+e),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(t){t.startsLocale||(t=Ne.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes)),Ne.cleanEventData(t,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t)},selectHeader:function(t){var e=t instanceof Date?k.padDate(t.getFullYear(),t.getMonth(),t.getDate()):t,n={all:".week-view-table-header th"};n.current="".concat(n.all,'[data-key="').concat(e,'"]'),[].slice.call(this.element[0].querySelectorAll(n.all)).forEach((function(t){t.classList.remove("is-selected")}));var i=this.element[0].querySelector(n.current);i&&i.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&(this.settings.events[n]=b.extend(!0,this.settings.events[n],t),Ne.cleanEventData(this.settings.events[n],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&this.settings.events.splice(n,1);this.renderAllEvents()},updated:function(t){return t||(t={}),t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),t.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),this}};var He={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0}};function qe(t,e){this.settings=b.mergeSettings(t,e,He),this.element=$(t),this.init()}qe.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents(),this},setLocaleThenBuild:function(){var t=this,e=D.getLocale(this.settings.language),n=D.getLocale(this.settings.locale);return $.when(n,e).done((function(e,n){t.locale=D.cultures[e]||D.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()})),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var t="",e=0;e<this.settings.eventTypes.length;e++){var n=this.settings.eventTypes[e];t+='<input type="checkbox" class="checkbox '.concat(n.color,'07" name="').concat(n.id,'" id="').concat(n.id,'" ').concat(n.checked?'checked="true"':""," ").concat(n.disabled?'disabled="true"':"",' />\n        <label for="').concat(n.id,'" class="checkbox-label">').concat(n.translationKey?D.translate(n.translationKey,{locale:this.locale.name,language:this.language}):n.label,"</label><br/>")}return this.eventTypeContainer.innerHTML=t,this},renderMonthView:function(){var t=this;return this.monthViewContainer=document.querySelector(".calendar .calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)},this.monthView=new Oe(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),this},renderWeekView:function(){var t=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)};var e=Pe.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),n=Pe.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return e.setHours(0,0,0,0),n.setHours(23,59,59,999),this.weekView=new ze(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:e,endDate:n,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(e){t.monthView.selectDay(e.startDate,!1,!0)},this.weekView.renderAllEvents(),this},changeView:function(t){if(t!==this.activeView&&this.weekViewContainer){var e=this.currentDate(),n=new Date(e),i=new Date(e);switch(n.setHours(0,0,0,0),i.setHours(23,59,59,999),t){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",n=Pe.firstDayOfWeek(n,this.settings.firstDayOfWeek),i=Pe.lastDayOfWeek(n,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(e,!1,!0),this.weekView.selectHeader(e);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(e,!1,!0)}}},appendUpcomingEvent:function(t){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(t.daysUntil>0)){var e=Math.abs(t.daysUntil);if(!(e<0||e>this.settings.upcomingEventDays)){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-key",t.startKey),l.addClass(n,"calendar-upcoming-event");var i="",a=D.formatDate(t.starts,{pattern:"d",locale:this.locale.name}),s=D.formatDate(t.ends,{pattern:"d",locale:this.locale.name}),r="".concat(D.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a===s?a:"".concat(a,"-").concat(s),", ").concat(D.formatDate(t.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(s,10)<parseInt(a,10)){var o=new Date(t.starts);o.setDate(1),o.setMonth(o.getMonth()+1);var c=o.getFullYear();r="".concat(D.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a," - ").concat(D.formatDate(o,{pattern:"MMMM",locale:this.locale.name})," ").concat(s,", ").concat(c)}i+='\n      <span class="calendar-upcoming-date">'.concat(r,'</span>\n      <span class="calendar-upcoming-event-color ').concat(t.color||"",'">').concat(t.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(t.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(t.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(t.isDays?t.duration:t.durationHours," ").concat(t.durationUnits||"","</span>"),n.innerHTML=i,this.upcomingEventsContainer.appendChild(n)}}},renderEventDetails:function(t,e){if(this.settings.events&&"month"===this.activeView){var n=this.settings.events.filter((function(e){return e.id===t}));if(n&&0!==n.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var i=$.extend(!0,{},n[0]);i.durationHours&&!i.isDays&&Ne.formateTimeString(i,this.locale,this.language),this.renderTmpl(i,this.settings.template,this.eventDetailsContainer,e>1);var a=$(this.eventDetailsContainer).data("accordion");a&&a.destroy(),$(this.eventDetailsContainer).accordion(),l.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click")}}},renderSelectedEventDetails:function(){var t=this.getDayEvents();if(this.clearEventDetails(),t.events&&0!==t.events.length)for(var e=0;e<t.events.length;e++)this.renderEventDetails(t.events[e].id,t.events.length)},renderDay:function(t){this.monthView.selectDay(t);var e=new Date(this.currentDate()),n=new Date(this.currentDate());e.setHours(0,0,0,0),n.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(e,n),"week"===this.activeView&&(e=Pe.firstDayOfWeek(e,this.settings.firstDayOfWeek),n=Pe.lastDayOfWeek(e,this.settings.firstDayOfWeek),this.weekView.showWeek(e,n))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var t=[];if(!this.eventTypeContainer)return t;for(var e=this.eventTypeContainer.querySelectorAll(".checkbox"),n=0;n<e.length;n++){var i=e[n];i.checked||t.push(i.getAttribute("id"))}return t},renderAllEvents:function(t){if(this.settings.onRenderMonth&&!t)return this.callOnRenderMonth(),this;var e=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var n=this.settings.events.slice(0);n.sort((function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0}));for(var i=0;i<n.length;i++){var a=n[i];e.indexOf(a.type)>-1||this.renderEvent(a)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=e,this.weekView.renderAllEvents()),this},renderEvent:function(t){var e=D.newDateObj(t.starts),n=k.padDate(e.getFullYear(),e.getMonth(),e.getDate()),i=D.newDateObj(t.ends),a=k.padDate(i.getFullYear(),i.getMonth(),i.getDate()),s=this.monthView.dayMap.filter((function(t){return t.key>=n&&t.key<=a}));t.endKey=a,t.startKey=n,t=Ne.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes);for(var r=-1,o=0;o<this.monthView.dayMap.length;++o)if(this.monthView.dayMap[o].key>=n&&this.monthView.dayMap[o].key<=a){r=o;break}if(1===s.length&&this.appendEvent(s[0].elem[0],t,"event-day-start-end",r),s.length>1)for(var l=0;l<s.length;l++){var c=0===l?"event-day-start":"event-day-span";s.length-1===l&&(c="event-day-end"),this.appendEvent(s[l].elem[0],t,c,r+l)}this.appendUpcomingEvent(t,s,r)},removeAllEvents:function(){for(var t=this.monthViewContainer.querySelectorAll(".calendar-event-more"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var n=this.monthViewContainer.querySelectorAll(".calendar-event"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);for(var a=0;a<this.monthView.dayMap.length;a++)this.monthView.dayMap[a].events=[]},appendEvent:function(t,e,n,i){var a,s=this,r=t.querySelectorAll(".calendar-event").length;if(i>-1&&(this.monthView.dayMap[i].events||(this.monthView.dayMap[i].events=[]),this.monthView.dayMap[i].events.push(e)),r>=2){var o=t.querySelector(".calendar-event-more"),c=function(t,e){t.setAttribute("data-count",e),t.innerHTML="<span>+ ".concat(e," ").concat(D.translate("More",{locale:s.locale.name,language:s.language}).replace("...",""),"</span>")};return o?c(o,parseInt(o.getAttribute("data-count"),10)+1):(a=document.createElement("span"),l.addClass(a,"calendar-event-more"),c(a,1),t.querySelector(".day-container").appendChild(a),$(t).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",(function(){s.monthView.selectDay(s.monthView.dayMap[i].key,!1,!0),s.changeView("day")}))),this}if(a=document.createElement("a"),l.addClass(a,"calendar-event",e.color,n),a.setAttribute("data-id",e.id),a.setAttribute("data-key",e.startKey),a.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>"),t.querySelector(".day-container").appendChild(a),"overflow"!==this.settings.iconTooltip){var d=a.querySelector(".calendar-event-icon");d&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.iconTooltip]&&(d.setAttribute("title",e[this.settings.iconTooltip]),$(d).tooltip({content:d.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.eventTooltip]&&(a.setAttribute("title",e[this.settings.eventTooltip]),$(a).tooltip({content:a.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(a.setAttribute("title",e.subject),$(a).tooltip({beforeShow:function(t,e){var n=e[0].querySelector(".calendar-event-title"),i=e[0].querySelector(".calendar-event-icon"),a=i?i.querySelector(".icon").getAttribute("data-status"):"";t(n.offsetWidth>e[0].scrollWidth-(i?i.offsetWidth:0)&&"".concat(n.innerText).concat(a?" (".concat(D.translate(a,{locale:s.locale.name,language:s.language},!1),")"):""))}})),this},getEventTypeLabel:function(t){var e="";if(!t)return e;var n=this.settings.eventTypes.filter((function(e){return e.id===t}));return 1===n.length&&(e=n[0].label),e},handleEvents:function(){var t=this,e=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),(function(){t.updated()})),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),(function(e,n){t.isSwitchingMonth=!0,t.modalVisible()&&t.removeModal(),t.settings.year=n.year,t.settings.month=n.month,t.renderAllEvents(),setTimeout((function(){t.isSwitchingMonth=!1}),500)})),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",(function(){t.renderAllEvents(!0)})),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),(function(){t.renderSelectedEventDetails()})),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",(function(e){var n=e.currentTarget.getAttribute("data-key");t.renderDay(n)})),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",(function(n){n.stopPropagation();var i=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0},a=n.currentTarget.getAttribute("data-id"),s=t.settings.events.filter((function(t){return t.id===a}));if(t.element.triggerHandler("contextmenu",{originalEvent:n,month:t.settings.month,year:t.settings.year,event:s[0]}),!e.isSubscribedTo(n,"contextmenu")&&!i())return!0;if(n.preventDefault(),e.closePrevPopupmenu(),!i())return!0;var r=$(n.currentTarget);return r.popupmenu({attachToBody:!0,menuId:t.settings.menuId,eventObj:n,trigger:"immediate",offset:{y:5}}),r.off("selected.calendar").on("selected.calendar",(function(t,n){if(e.settings.menuSelected&&e.settings.menuSelected(t,n,a),"delete-event"===n.attr("data-action")&&e.deleteEvent({id:a}),"show-event"===n.attr("data-action")){var i=this.getAttribute("data-key");e.monthView.selectDay(i)}})),!1}));var n=function(e,n,i){t.showEventModal(e,(function(e,i){for(var a=e.querySelectorAll("input, textarea, select"),s=0;s<a.length;s++)i[a[s].id]="checkbox"===a[s].getAttribute("type")?a[s].checked:a[s].value;n?t.addEvent(i):t.updateEvent(i)}),i)},i=0,a=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",(function(s){i=setTimeout((function(){if(!a){var i=s.currentTarget.getAttribute("data-id"),r=t.settings.events.filter((function(t){return t.id===i}));if(!r||0===r.length)return;var o=$(s.currentTarget),l=o.find(".calendar-event-title");(s.currentTarget.classList.contains("event-day-span")||s.currentTarget.classList.contains("event-day-end"))&&(l=e.element.find('.event-day-start[data-id="'.concat(o.attr("data-id"),'"] .calendar-event-title'))),n(r[0],!1,l),t.element.triggerHandler("eventclick",{month:t.settings.month,year:t.settings.year,event:r[0]})}a=!1}),100)})),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",(function(e){clearTimeout(i),a=!0;var n=e.currentTarget.getAttribute("data-id"),s=t.settings.events.filter((function(t){return t.id===n}));s&&0!==s.length&&t.element.trigger("eventdblclick",{month:t.settings.month,year:t.settings.year,event:s[0]})})),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",(function(e){var i=e.currentTarget.getAttribute("data-key");if(i&&!t.isSwitchingMonth){var a=new Date(i.substr(0,4),i.substr(4,2)-1,i.substr(6,2)),s=b.extend({},t.settings.newEventDefaults);s.startKey=i,s.endKey=i,s.starts=a,s.ends=a,e.stopPropagation(),Ne.cleanEventData(s,!1,t.currentDate(),t.locale,t.language,t.settings.events,t.settings.eventTypes),n(s,!0),t.element.triggerHandler("dblclick",{eventData:s,api:t})}})),this},isSubscribedTo:function(t,e){var n=$._data(this.element[0]).events;for(var i in n)if(i===e&&(1!==n[i].length||"calendar"!==n[i][0].namespace))return!0;return!1},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")}))},callOnRenderMonth:function(){var t=this;this.settings.onRenderMonth(this.element,(function(e,n){n&&n.length>0&&(t.settings.eventTypes=n,t.weekView&&(t.weekView.settings.eventTypes=n),t.renderEventTypes()),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0),t.weekView&&(t.weekView.settings.events=e,t.weekView.renderAllEvents(!0)))}),{api:t,month:this.settings.month,year:this.settings.year})},currentDate:function(){var t=this.isIslamic?this.monthView.currentIslamicDate:this.monthView.currentDate;return D.isValidDate(t)?t:new Date},getDayEvents:function(t){t||(t=this.currentDate()),"string"==typeof t||this.isRTL||(t=k.padDate(t.getFullYear(),t.getMonth(),t.getDate())),this.isRTL&&(t=k.padDate(t[0],t[1],t[2]));var e=this.monthView.dayMap.filter((function(e){return e.key===t}));"month"!==this.activeView&&(e=this.weekView.dayMap.filter((function(e){return e.key===t})));var n={date:this.monthView.currentDate,events:[]};return 0===e.length?[]:(n.events=e[0].events,n.elem=e[0].elem,n)},renderTmpl:function(t,e,i,a){if("object"===n(ne)&&e){e instanceof $?e="".concat(e.html()):"string"==typeof e&&(k.containsHTML(e)||(e=$("#".concat(e)).html())),t.color=Ne.getEventTypeColor(t.type,this.settings.eventTypes),t.startsLong=D.formatDate(t.starts,{date:"long",locale:this.locale.name}),t.endsLong=D.formatDate(t.ends,{date:"long",locale:this.locale.name}),t.startsHoursLong="".concat(D.formatDate(t.starts,{date:"long",locale:this.locale.name})," ").concat(D.formatDate(t.starts,{date:"hour",locale:this.locale.name})),t.endsHoursLong="".concat(D.formatDate(t.ends,{date:"long",locale:this.locale.name})," ").concat(D.formatDate(t.ends,{date:"hour",locale:this.locale.name})),t.typeLabel=this.getEventTypeLabel(t.type);var s=ne.compile(e,{event:t});i.classList.remove("has-only-one"),a?l.append(i,s,"*"):(i.innerHTML=s,i.classList.add("has-only-one"))}},addEvent:function(t){Ne.cleanEventData(t,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t),this.renderSelectedEventDetails(),this.weekView&&this.weekView.addEvent(t)},updateEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&(this.settings.events[n]=b.extend(!0,this.settings.events[n],t),Ne.cleanEventData(this.settings.events[n],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(t)},deleteEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&this.settings.events.splice(n,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(t)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function(t,e,n){var i=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),l.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),t=Ne.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(t||{},this.settings.modalTemplate,this.modalContents);var a=this.getDayEvents(),s=!0;a.elem=$(a.elem);var r=6===a.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";n||"day"!==this.activeView||(n=$(".week-view-header-wrapper"),r=this.isRTL?"left":"right"),n||(n=a.elem);var o=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:n,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:r},title:t.title||t.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup",tooltipElement:"#calendar-popup",headerClass:t.color,initializeContent:!1};n.off("hide.calendar").on("hide.calendar",(function(){s?i.removeModal():(e(i.modalContents,t),i.element.trigger("hidemodal",{elem:i.modalContents,event:t}),i.removeModal(),s=!0)})).popover(o).off("show.calendar").on("show.calendar",(function(e,a){i.element.trigger("showmodal",{elem:i.modalContents,event:t}),a.find("#isAllDay").off().on("click.calendar",(function(t){$(t.currentTarget).prop("checked")?(a.find("#durationHours").prop("disabled",!0),a.find("#endsHourLocale").prop("disabled",!0),a.find("#startsHourLocale").prop("disabled",!0)):(a.find("#durationHours").prop("disabled",!1),a.find("#endsHourLocale").prop("disabled",!1),a.find("#startsHourLocale").prop("disabled",!1))})),a.find("#type").val(t.type).dropdown(),a.find("#comments").val(t.comments),a.find("#subject").focus(),a.find("button").on("click",(function(t){var e=n.data("tooltip"),i=t.currentTarget.getAttribute("data-action");s="submit"!==i,e&&e.hide(!0)})),a.find(".datepicker").datepicker({locale:i.settings.locale,language:i.settings.language}),a.find(".timepicker").timepicker({locale:i.settings.locale,language:i.settings.language}),a.find('[data-translate="text"]').each((function(t,e){var n=$(e);n.text(D.translate(n.attr("data-translate-key")||n.text(),{showAsUndefined:!1,showBrackets:!1,language:i.settings.language,locale:i.settings.locale}))}))})),$("#calendar-popup").one("tooltipafterplace.calendar",(function(t,e){var n=e.element.find(".arrow"),i=parseInt(n.css("margin-top"),10);if(a.elem.parent().index()>=3){var s=parseInt(e.element.offset().top,10),r=s+e.element.height(),o=$("html").height()+10;if(r>o){var l=s-(r-o)-25;e.element.css("top","".concat(l,"px")),n.css("margin-top","".concat(i+(s-l)-18,"px"))}}else e.element.height()>580&&n.css("margin-top","".concat(i-18,"px"))})),this.activeElem=n}},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("tooltip")&&this.activeElem.data("tooltip").destroy()),l.remove(document.getElementById("calendar-popup")),l.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t||(t={}),t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),t.locale||t.template||t.upcomingEventDays?(this.destroy().init(),this):(this.weekView&&t.events&&(this.weekView.settings.events=t.events),this.weekView&&t.eventTypes&&(this.weekView.settings.events=t.events),this.weekView&&t.weekViewSettings&&(this.weekView.settings=b.mergeSettings(this.element[0],t.weekViewSettings,this.weekViews.settings)),this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&t.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(t){return this.each((function(){var e=$.data(this,"calendar");e?e.updated(t):e=$.data(this,"calendar",new qe(this,t))}))};var Ve={slidesToShow:1,startingSlide:null,loop:!1};function je(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Ve),this.init()}je.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView())},setElements:function(){var t=this.settings;this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=t.slidesToShow,this.slides=[],this.isVisible=!0;for(var e=0,n=this.slidesJQ.length;e<n;e++)this.slides.push({node:$(this.slidesJQ[e])});this.activeIndex=null!==t.startingSlide&&t.startingSlide>-1&&t.startingSlide<this.slides.length?t.startingSlide:0},createControls:function(){for(var t,e,n,i,a,s,r,o,l,c=this.slides.length,d='<div class="controls">',h="",u=0,p=0,f=c;p<f;p+=this.slidesToShow){e="",u++,i=D.translate((o=1===this.slidesToShow||c-p==1)?"SlideOf":"SlidesOf"),n=o?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var g=0;g<this.slidesToShow&&p+g<c;g++)e+="".concat(p+g+1,", ");i=i.replace(o?"{1}":"{2}",c),n=n.replace(o?"{1}":"{2}",c),r=(e=e.slice(0,-2)).lastIndexOf(","),s=e.substr(r+2),o?(l="",(t=this.slides[p].node).is(".is-disabled, [disabled]")&&!t.is('[disabled="false"]')&&(l=' disabled tabindex="-1"',this.slides[p].isDisabled=!0),t.is(".active")&&null===this.settings.startingSlide&&""===l&&(this.activeIndex=p),i=(a=t.attr("data-button-text"))&&a.length?a:i.replace("{0}",e),n=n.replace("{0}",e)):(e=e.substr(0,r),i=i.replace("{1}",s).replace("{0}",e),n=n.replace("{1}",s).replace("{0}",e)),n=n.toLowerCase().replace(/[\s,--]+/g,"-"),h+='<a href="'.concat(n,'" class="control-button hyperlink hide-focus"').concat(l,'><span class="audible">').concat(i,"</span></a>")}d+="".concat(h,"</div>"),this.isBulletsNav=this.element.width()>29*u;var m=$(".btn-previous",this.element),v=$(".btn-next",this.element);this.isBulletsNav?m.add(v).remove():(m.length||(d+=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(D.translate("Previous"),"</span>\n          </button>")),v.length||(d+=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(D.translate("Next"),"</span>\n          </button>"))),this.activeIndex>0&&this.activeIndex>u-1&&(this.activeIndex=u-1),u>1&&this.element.append(d)},isVisibleInContainer:function(t){if(t&&t[0]){var e=t[0].getBoundingClientRect(),n=this.element[0].getBoundingClientRect();return e.left>n.left&&e.left<n.left+n.width&&e.top>n.top&&e.top<n.top+n.height}return-1},updateSlidesToShow:function(t){if(this.isActive)return this.settings.slidesToShow=t||1,this.updated(),this},responsiveSlidesToShow:function(t){var e=this;this.isActive&&(this.slidesToShow=t||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout((function(){e.createControls(),e.handleEvents(),e.initActiveSlide(),e.showCollapsedView()}),0))},show:function(t){if(this.isActive){this.activeIndex=t=void 0!==t?t:this.activeIndex;var e=t>0?"".concat((D.isRTL()?"":"-")+100*t,"%"):0;this.controlButtons.removeClass("is-active").eq(t).addClass("is-active"),this.container[0].style.left=e,this.isBulletsNav?(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")):(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(t).find("span").removeClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(t).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var t,e=this;if(t=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[t].isDisabled)return setTimeout((function(){e.prev()}),0),this.activeIndex=t,!1;this.show(t)},next:function(){var t,e=this;if(t=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[t].isDisabled)return setTimeout((function(){e.next()}),0),this.activeIndex=t,!1;this.show(t)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var t=0,e=this.slidesJQ.length;t<e;t++)this.slidesJQ[t].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},unbind:function(){return $("body").off("resize.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons&&this.controlButtons.off("click.circlepager keydown.circlepager"),$(".btn-previous, .btn-next",this.element).off("click.circlepager"),$(".controls",this.element).remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,Ve)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function(){var t=this,e=this;$(".btn-previous",this.element).on("click.circlepager",(function(e){t.prev(),e.stopImmediatePropagation()})),$(".btn-next",this.element).on("click.circlepager",(function(e){t.next(),e.stopImmediatePropagation()})),this.controlButtons=$(".control-button",this.element);for(var n=function(e,n){var i=$(t.controlButtons[e]);i.hideFocus(),i.on("click.circlepager",(function(n){n.preventDefault(),t.slides[e].isDisabled||t.show(e)}))},i=0,a=this.controlButtons.length;i<a;i++)n(i);this.element.on("focus.circlepager","*",(function(t){var n=!1;if(!e.isVisibleInContainer($(this)))for(var i=e.element.find(":focusable"),a=0,s=i.length;a<s;a++)if(e.isVisibleInContainer(i.eq(a))){i.eq(a).focus(),n=!0;break}if(t.stopPropagation(),n)return!1})),this.element.on("keydown.circlepager","*",(function(t){var n=!1,i=t.which||t.keyCode||t.charCode||0,a=$(":focusable"),s=a.index(this);if(9===i)if(t.shiftKey){for(var r=s-1;r>=0;r--)if(e.element.has(a.eq(r)).length<1||e.isVisibleInContainer(a.eq(r))){a.eq(r).focus(),n=!0;break}}else e.isVisibleInContainer(a.eq(s+1))||(e.controlButtons.first().focus(),n=!0);if(t.stopPropagation(),n)return!1})),this.controlButtons.on("keydown.circlepager",(function(t){var n=!1,i=t.which||t.keyCode||t.charCode||0,a=D.isRTL();if(-1!==[37,39].indexOf(i)&&(e.isFocus=!0,t.altKey?37===i&&!a||39===i&&a?e.first():e.last():(!a&&37===i||a&&39===i?e.prev():e.next(),n=!0)),n)return t.preventDefault(),t.stopPropagation(),!1})),$("body").on("resize.circlepager",(function(){e.responsiveSlidesToShow()})),e.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",(function(){e.responsiveSlidesToShow()}))}},$.fn.circlepager=function(t){return this.each((function(){var e=$.data(this,"circlepager");e?e.updated(t):e=$.data(this,"circlepager",new je(this,t))}))},$.fn.calendartoolbar=function(t){return this.each((function(){var e=$.data(this,"calendartoolbar");e?e.updated(t):e=$.data(this,"calendartoolbar",new Re(this,t))}))};var We={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function Ue(t,e){this.settings=b.mergeSettings(t,e,We),e&&e.colors&&(this.settings.colors=e.colors),this.element=$(t),this.init()}Ue.prototype={init:function(){this.isIe="ie"===u.browser.name,this.isIeEdge="edge"===u.browser.name,this.isIe11=this.isIe&&"11"===u.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=D?D.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var t=this.element,e=this.isEditor?this.element.attr("data-value"):this.element.val(),n="swatch".concat(e&&""!==$.trim(e)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),t.wrap(this.container)),this.container=t.parent(),this.swatch=$('<span class="'.concat(n,'"></span>')).prependTo(this.container),this.settings.showLabel){var i=t.data("mask");i&&"function"==typeof i.destroy&&i.destroy()}else t.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]});var a=this.element.children(".trigger");this.container&&this.container.length&&(a=this.container.children(".trigger")),a&&a.length&&a.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),e&&this.setColor(e),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria()},getHexFromLabel:function(t){for(var e=0;e<this.settings.colors.length;e++){var n=this.settings.colors[e],i=D.translate(n.label,!0);if(t===n.label+n.number||t===i+n.number){var a=n.value;return"#"!==a.substr(0,1)&&(a="#".concat(a)),a}}return""},getLabelFromHex:function(t){if(!t)return"";for(var e=0;e<this.settings.colors.length;e++){var n=this.settings.colors[e];if(t.replace("#","")===n.value.replace("#",""))return this.translateColorLabel(n.label)+n.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var t=parseInt(this.element[0].style.width,10);this.container.css({width:t}),this.element.css({width:t-4-this.swatch.width()})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(D.translate("UseArrow"),"</span>"))},toggleList:function(){var t=this,e=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||e.length&&this.isPickerOpen)){e=this.updateColorMenu();var n=b.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:D.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(n).on("open.colorpicker",(function(){t.element.parent().addClass("is-open"),t.isPickerOpen=!0})).on("close.colorpicker",(function(){[].slice.call(t.menu[0].querySelectorAll("a")).forEach((function(t){var e=$(t).data("tooltip");e&&e.hide()})),e.on("destroy.colorpicker",(function(){t.element.off("open.colorpicker selected.colorpicker close.colorpicker"),t.menu.off("destroy.colorpicker").remove()})),t.element.parent().removeClass("is-open"),t.isPickerOpen=!1,t.element.trigger("listclosed","select")})).on("selected.colorpicker",(function(e,n){t.isEditor||t.setColor(n.data("value"),n.data("label")),t.element.focus(),t.element.trigger("change")})),this.menu=$("#colorpicker-menu"),setTimeout((function(){t.menu.find(".is-selected").focus()}),1)}},setColor:function(t,e){var n=this.settings,i=t=t||"",a=e;"#"!==t.substr(0,1)&&""!==t&&(i="#".concat(i));var s=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(i);if(n.showLabel&&e===n.clearableText)this.setValueOnField({hex:i,label:n.clearableText,isEmpty:!0});else{if(!s){if(!n.showLabel)return void this.setValueOnField({hex:i="#"!==i?i:"",invalid:!0});a=t.replace("#",""),i=this.getHexFromLabel(a)}a||(a=this.getLabelFromHex(i)),this.setValueOnField({hex:i,label:a})}},setValueOnField:function(t){var e=this.settings,n=this.isEditor?"data-value":"value",i="";t.isEmpty||"string"!=typeof t.hex||(i=e.uppercase?t.hex.toUpperCase():t.hex.toLowerCase()),this.swatch&&(t.isEmpty||t.invalid?(this.swatch.addClass(t.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=i)),this.element[0].value=e.showLabel?t.label:i,this.element[0].setAttribute(n,i),this.element[0].setAttribute("aria-describedby",t.label||"")},translateColorLabel:function(t){return t?"string"==typeof D.translate(t,!0)?D.translate(t,!0):t:""},getThemeVariant:function(t){var e=Object.keys(We.themes).filter((function(e){return t.indexOf(e)>-1})),n="light";return e.length>0&&(n=e[0]),n},updateColorMenu:function(){for(var t=this,e=this.settings,n=!!$("#colorpicker-menu").length,i=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),a=K.currentTheme,s=this.getThemeVariant(a),r="all"===e.themes[s].border,o=e.themes[s].checkmark,l="",c=function(s,c){var d=$("<li></li>"),h=$('<a href="#"><span class="swatch"></span></a>').appendTo(d),u=(t.translateColorLabel(e.colors[s].label)||e.colors[s].label)+(e.colors[s].number||""),p=parseInt(e.colors[s].number,10),f=new RegExp("\\b".concat(a,"\\b")),g=e.colors[s].value,m=!1,v=t.isEditor?t.element.attr("data-value"):t.element.val();e.showLabel&&!t.isEditor&&(v=t.getHexFromLabel(v)),(r||f.test(e.colors[s].border))&&(m=!0),v&&"".concat(v).toLowerCase().replace("#","")==="".concat(g).toLowerCase()&&(o&&$.each(o,(function(t,e){p>=e[0]&&p<=e[1]&&(l=" checkmark-".concat(t))})),h.addClass("is-selected".concat(l))),g=e.uppercase?g.toUpperCase():g.toLowerCase();var b=h.find(".swatch");b[0]&&(b[0].style.backgroundColor="#".concat(g)),b.addClass(m?"is-border":""),h.data("label",u).data("value",g).attr("title","".concat(u," #").concat(g)).tooltip(),n||i.append(d)},d=0,h=e.colors.length;d<h;d++)c(d);if(!n){if(e.clearable){var u=$("<li></li>"),p="foreColor"===this.element.attr("data-action")?"000000":"";$('<a href="#" title="'.concat(e.clearableText,'"><span class="swatch is-empty').concat(r?" is-border":"",'"></span></a>')).appendTo(u).data("label",e.clearableText).data("value",p).tooltip(),i.append(u)}$("body").append(i)}return i},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(t){return"number"!=typeof t?t:"rgb(".concat(255&t,", ").concat((65280&t)>>8,", ").concat((16711680&t)>>16,")")},rgb2hex:function(t){if(!t||-1===t.search("rgb"))return t;if("rgba(0, 0, 0, 0)"===t)return"transparent";var e=function(t){return"0".concat(parseInt(t,10).toString(16)).slice(-2)},n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(e(n[1])).concat(e(n[2])).concat(e(n[3]))},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var t=this.element.data("mask");if(t&&t.destroy(),this.icon&&this.icon.length){var e=this.icon.parent(".trigger");this.icon.off().remove(),e.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function(){var t,e=this,n=this.element,i=n.parent();this.icon.parent().on("click.colorpicker",(function(){e.toggleList()})),n.on("focus.colorpicker",(function(){t=n.val(),i.addClass("is-focused")})).on("blur.colorpicker",(function(){i.removeClass("is-focused"),e.isIeEdge&&!n.is(".is-open")&&t!==n.val()&&n.triggerHandler("change")})).on("openlist.colorpicker",(function(){e.toggleList()}));var a="blur.colorpicker paste.colorpicker change.colorpicker";n.on(a+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",(function(){var t=e.isEditor?n.attr("data-value"):n.val();e.settings.showLabel?e.setColor(n.attr("value"),t):e.setColor(t)})),n.on("keydown.colorpicker",(function(t){38!==t.keyCode&&40!==t.keyCode||e.toggleList(),13===t.keyCode&&e.setColor(n.val())}))}},$.fn.colorpicker=function(t){return this.each((function(){var e=$.data(this,"colorpicker");e?e.updated(t):e=$.data(this,"colorpicker",new Ue(this,t))}))};var Ge={trigger:null,bottomBorder:!1,animationSpeed:300};function Ye(t,e){this.settings=b.mergeSettings(t,e,Ge),this.element=$(t),this.init()}Ye.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var t,e=this,n=this.element.hasClass("is-expanded");return this.header.attr({"aria-expanded":"".concat(n),"aria-controls":"".concat(this.id,"-content"),id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=!0===this.isCard?((t=this.header.find("expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(D.translate("ShowMore"),"</span>")+"</a>").appendTo(this.header)),t):((t=this.footer.find(".expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" class="expandable-expander hyperlink"><span data-translated="true">').concat(D.translate("ShowMore"),"</span>")+"</a>").prependTo(this.footer)),t),this.expander.attr("href","#").hideFocus(),0===this.expander.length&&(this.expander=$("#".concat(this.settings.trigger))),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),n&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",(function(){e.content.removeClass("no-transition")})),this.open()),n||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",(function(){e.content.removeClass("no-transition")})),this.close()),this.resize(),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var t=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),this.header.attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(D.translate("ShowLess")?D.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",(function(){t.element.triggerHandler("afterexpand",[t.element])})).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var t=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(D.translate("ShowMore")?D.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",(function(){t.element.removeClass("is-expanded"),t.header.attr("aria-expanded","false"),t.element.triggerHandler("aftercollapse",[t.element]),t.content[0].style.display="none"})).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var t=this,e=$("html").hasClass("ie11");setTimeout((function(){e&&t.element.hasClass("is-expanded")?t.element.css("min-height",t.element.children(".expandable-pane").outerHeight(!0)+t.element.children(".expandable-footer").outerHeight(!0)):e&&!t.element.hasClass("is-expanded")&&t.element.css("min-height","auto")}),300)},resize:function(){var t=this;$("body").on("resize.expandablearea",(function(){t.applyIE11Fix()}))},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){this.header.children("a").off(),this.header.off(),this.header.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this},handleEvents:function(){var t=this;return this.expander.on("click.expandablearea",(function(e){t.isDisabled()||(e.preventDefault(),t.toggleExpanded())})),this}},$.fn.expandablearea=function(t){return this.each((function(){var e=$.data(this,"expandablearea");e?e.updated(t):e=$.data(this,"expandablearea",new Ye(this,t))}))};var Ke={breakpoint:"phone-to-tablet",trigger:null,expandedText:D.translate("ShowLess"),collapsedText:D.translate("ShowMore")};function Xe(t,e){this.settings=b.mergeSettings(t,e,Ke),this.element=$(t),this.init(),L("CompositeForm")}Xe.prototype={init:function(){return this.build().handleEvents()},build:function(){var t=this.element[0].classList;t.contains("composite-form")||t.add("composite-form");var e=this.element.find(".expandable-area");return e.length?(this.hasSummary=!0,this.expandableArea=e,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var t=this;function e(){var e=t.expandableAreaAPI.isExpanded();t.setExpanderText(t.settings[e?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),(function(e){t.checkResponsive(e)})),this.element.on("updated.".concat("compositeform"),(function(){t.updated()})),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),e).on("collapse.".concat("compositeform"),e),this},checkResponsive:function(){var t=this.element[0].classList;c.isBelow(this.settings.breakpoint)?t.add("is-in-responsive-mode"):(t.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(t){if(this.hasSummary&&t instanceof String&&t.length){var e=this.expander.find("span");e||(e=this.expander),e.text(t)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(t){return this.each((function(){var e=$.data(this,"compositeform");e?e.updated(t):e=$.data(this,"compositeform",new Xe(this,t))}))};var Qe={content:null,initializeContent:!0,title:"Contextual Action Panel",modalSettings:{buttons:null,centerTitle:!1,id:"contextual-action-modal-".concat(parseInt($(".modal").length,10)+1),showCloseBtn:!1,trigger:"click",useFlexToolbar:!1}},Je=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function Ze(t){var e={showCloseButton:"showCloseBtn"};return Je.forEach((function(n){if(-1===[null,void 0].indexOf(t[n])){var i=n;t.modalSettings||(t.modalSettings={}),e[n]?t.modalSettings[i=e[n]]=t[n]:t.modalSettings[n]=t[n],delete t[n],M("settings.modalSettings.".concat(i),"settings.".concat(n))}})),t}function tn(t,e){this.settings=b.mergeSettings(t,e,Qe),this.settings=Ze(this.settings),this.element=$(t),this.init()}tn.prototype={get modalAPI(){var t;return this.panel&&this.panel.length&&(t=this.panel.data("modal")),t},init:function(){this.setup().build().handleEvents()},setup:function(){var t=this.element.next(".contextual-action-panel"),e=this.element.data("modal"),i=function(e){var n=$("#".concat(e));n.length&&(t=n)};return"string"==typeof e?i(e):"object"===n(e)&&i(this.element.attr("data-modal")),1===this.element.closest(".popupmenu").length&&(t=this.element.closest(".popupmenu").next(".contextual-action-panel")),t[0]&&(t[0].style.display="none",t.addClass("is-animating"),this.panel=t),this},build:function(){var t=this,e=this.settings.content;if(!this.panel||!this.panel.length)if(e instanceof jQuery){if(e.is(".contextual-action-panel")?this.panel=e:(e.wrap('<div class="contextual-action-panel"></div>'),this.panel=e.parent()),this.panel.addClass("modal").appendTo("body"),e.is("iframe"))return e.ready((function(){t.completeBuild(),e.show()})),t;e.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(e,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.completeBuild(),this},completeBuild:function(){var t,e,n=!1,i=!1,a=!0;this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((t=this.panel.children()).is("iframe")&&(e=t.contents(),this.toolbar=e.find(".toolbar, .flex-toolbar"),n=!0),n||(t.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var s=this.panel.find(".modal-header");0===s.length&&(s=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=s;var r=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset");if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar")),!this.toolbar.length)if(a=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach((function(t){"input"===t.type&&(i=!0)})),this.settings.title&&this.settings.modalSettings.centerTitle){var o=i?'<div class="toolbar-section search"></div>':"",l='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.settings.title,"</h2>\n          </div>\n          ").concat(o,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(l)}else if(!r.length){var c=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",d=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.settings.title,"</h2></div>"):"",h='<div class="'.concat(this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",'"></div>'),u=this.settings.modalSettings.useFlexToolbar&&i?'<div class="toolbar-section search"></div>':"",p='<div class="'.concat(c,'">\n          ').concat(d,"\n          ").concat(u,"\n          ").concat(h,"\n        </div>"),f=$(p);f.appendTo(this.panel.find(".modal-header")),this.toolbar=f,r=f.children(".buttonset")}if(this.toolbar.appendTo(this.header),!a){r&&(r.length||this.settings.modalSettings.centerTitle)||(r=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var g=this.toolbar.find(".title");g.length||(g=$('\n          <div class="toolbar-section title'.concat(this.settings.modalSettings.centerTitle?" center-text":"",'">\n            <h2>').concat(this.settings.title,"</h2>\n          </div>\n        ")),r?g.insertBefore(r):this.toolbar.prepend(g)),g.length||(g=$('\n          <div class="title">\n            '.concat(this.settings.title,"\n          </div>\n        ")),this.toolbar.prepend(g))}if(n||this.panel.detach().appendTo("body"),this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var m=D.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(m,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(m,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var v=$('<div class="toolbar-section static"></div>').append(this.closeButton),y=this.toolbar.find(".toolbar-section.more");v.insertAfter(y.length?y:r)}else r.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),b.fixSVGIcons(this.element),this},handleEvents:function(){var t=this;function e(e){t.element.triggerHandler(e.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",(function(n){e(n),t.panel.removeClass("is-animating")})).off("close.contextualactionpanel").on("close.contextualactionpanel",(function(t){e(t)})).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",(function(n){t.settings.initializeContent&&$(this).initialize(),e(n)})).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",(function(){if(t.toolbar&&t.toolbar.trigger("recalculate-buttons"),t.toolbar.length){var e=t.toolbar.find(".buttonset > .is-selected");if(e.length||(e=t.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(e=e.children(".searchfield")),!e.length&&t.toolbar.is(".flex-toolbar"))return void(e=t.toolbar.find("button").first()).focus();var n=t.toolbar.data("toolbar");n&&n.setActiveButton(e,!0)}t.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),b.fixSVGIcons(t.panel)})),t.closeButton&&t.closeButton.length&&t.closeButton.on("click.contextualactionpanel",(function(){t.handleToolbarSelected()})),this},handleToolbarSelected:function(){this.close()},teardown:function(){var t=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),t.children("*:not(.searchfield)").off("click.contextualactionpanel"),t.children(".btn-menu").each((function(){var t=$(this).data("popupmenu");t&&t.destroy()})),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function(){var t;"immediate"===this.settings.modalSettings.trigger&&(t=!0),this.modalAPI&&this.modalAPI.close(t)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this.settings=Ze(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel")}},$.fn.contextualactionpanel=function(t){return this.each((function(){var e=$.data(this,"contextualactionpanel");e?e.updated(t):e=$.data(this,"contextualactionpanel",new tn(this,t))}))},$.fn.popover=$.fn.tooltip;var en=["default","neutral","secondary","error","alert","good","info"],nn={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:en[0],value:void 0};function an(t,e){var n;if(this.settings=b.mergeSettings(t,e,nn),t instanceof HTMLElement?t.querySelector(".tag-content")?n=t:((n=document.createElement("span")).className+="".concat(t.className),t.id&&t.id.length?(n.id=t.id,t.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id),t.insertAdjacentElement("beforebegin",n),n.appendChild(t),n.classList.add("tag"),t.className="",t.classList.add("tag-content")):((n=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(n),"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id)),t){var i=t.querySelector(".audible");i&&n.insertAdjacentElement("afterbegin",i)}this.element=n,this.getSettingsFromElement(),this.init()}an.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var t=this.element.classList,e=b.getArrayFromList(this.element.classList),n=this.settings.style;e.forEach((function(e){en.indexOf(e)>-1&&t.remove(e)})),-1===this.element.className.indexOf(n)&&"default"!==n&&t.add(n),this.settings.disabled&&t.add("is-disabled");var i="";this.settings.audibleContent&&(i='<span class="audible">'.concat(o.stripHTML(this.settings.audibleContent),"</span>"));var a="span",s="",r="",l="",c=this.settings.href&&this.settings.href.length;(c||this.originallyAnchor)&&(a="a",this.settings.disabled&&(l=' tabIndex="-1"')),c&&(s=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(t.add("is-linkable"),r='<button class="linkable-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),"\n      </button>"));var d="<".concat(a,' class="tag-content"').concat(s).concat(l,">").concat(o.sanitizeHTML(this.settings.content),"</").concat(a,">"),h="";this.settings.dismissible&&(t.add("is-dismissible"),h='<button class="dismissible-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(D.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(i).concat(d).concat(r).concat(h),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".dismissible-btn")},getSettingsFromElement:function(){var t=this.element.className,e="";en.forEach((function(n){t.indexOf(n)>-1&&(e=n)})),e&&(this.settings.style=e),this.settings.disabled=this.disabled;var n=this.dismissibleBtn,i=this.element.className.indexOf("is-dismissible")>-1;(n||i)&&(this.settings.dismissible=!0);var a=this.element.querySelector("a"),s=this.element.className.indexOf("is-linkable")>-1,r=this.element.querySelector(".linkable-btn");if(a||s||r){this.originallyAnchor=!0;var l=a.getAttribute("href");l&&l.length&&(l=o.stripTags(l),this.settings.href=l)}(s||r)&&(this.settings.clickable=!0);var c=this.element.querySelector(".audible");c instanceof HTMLElement&&(this.settings.audibleContent=o.stripHTML(c.innerText));var d=this.contentElement;d&&(this.settings.content=o.sanitizeHTML(d.innerText))},remove:function(){var t=this.element,e=t.parentNode;this.settings.parentAPI&&(e=this.settings.parentAPI.element),$(e).triggerHandler("beforetagremove",[this]),this.destroy(),t.remove(),$(e).triggerHandler("aftertagremove",[this])},dismiss:function(t){if(!this.disabled){this.remove(t),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var e=this.settings.parentAPI;e&&e.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var t=$(this.element);t.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var e=this.dismissibleBtn;e&&e.parentNode.removeChild(e);var n=t.data("hidefocus");return n&&"function"==typeof n.destroy&&n.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,nn)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var t=this;$(this.element).on("focusin.tag",(function(){t.element.classList.add("is-focused")})).on("focusout.tag",(function(){t.element.classList.remove("is-focused")}));var e=this;$(this.element).on("click.tag","a, .linkable-btn",(function(t){var n;return"function"==typeof e.settings.clickHandler&&(n=e.settings.clickHandler(e)),!(!1===n||e.settings.href&&"#"===e.settings.href)||(t.preventDefault(),!1)})),this.settings.dismissible&&($(this.element).on("click.tag",".dismissible-btn",(function(e){t.dismiss(e)})),$(this.element).on("keydown.tag","a",(function(e){8===e.keyCode&&t.dismiss(e)})))}};var sn={tags:[]};function rn(t,e){var n=this;if(!(t instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=b.mergeSettings(t,e,sn),this.element=t;var i=b.getArrayFromList(this.element.querySelectorAll(".tag"));i.length&&(this.settings.tags=[],i.forEach((function(t){n.settings.tags.push(new an(t))}))),this.init()}rn.prototype={get length(){return this.tags.length},get elements(){return this.tags.map((function(t){return t.element}))},init:function(){var t=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach((function(e){t.add(e)})),this.render()},getTargetProp:function(){return"content"},add:function(t){var e,n=this;if(!t)throw new Error("No object was provided");if(Array.isArray(t)){var i=[];return t.forEach((function(t){i.push(n.add(t))})),i}if(C.isEmpty(t))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return t instanceof an?(e=t,t.settings.parentAPI=this):(t.parent=this.element,t.parentAPI=this,e=new an(void 0,t)),-1===this.tags.indexOf(e)&&this.tags.push(e),e},remove:function(t,e){t instanceof an&&(t=t.settings);var n,i=this.getTargetProp(t),a=this.tags.filter((function(e){return e.settings[i]===t[i]||(n=e,!1)}));return a.length<this.tags.length&&(this.tags=a),e&&n.remove(),n},removeAll:function(){this.tags.forEach((function(t){t.remove()})),this.tags=[]},render:function(){this.tags.forEach((function(t){t.render()})),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.elements,n=0,i=e.length;t<n&&(t=n),t>i&&(t=i);var a=e[t],s=a.querySelector("a");return s&&s.focus(),a},focusPreviousElement:function(t){if(!(t instanceof HTMLElement))throw new Error("".concat(t," is not an HTMLElement"));var e=this.elements.indexOf(t);if(!(e>-1))throw new Error("".concat(t," does not exist within this TagList"));return this.focusByIndex(e-1)},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings),Array.isArray(t.tags)&&(this.settings.tags=t.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach((function(t){t.remove()})),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var on=["none","all","group"],ln={closeOnSelect:!0,cssClass:null,filterMode:"contains",maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{}};function cn(t,e){this.settings=b.mergeSettings(t,e,ln),this.element=$(t),this.init()}cn.prototype={get value(){var t=this.settings.multiple;if("typeahead"===this.settings.reload)return t?this.selectedValues:this.element.val();for(var e,n=[],i=this.element[0].options,a=0;a<i.length;a++)(e=i[a]).selected&&n.push(e.value||e.text);return t||1!==n.length?n:n[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var t=this.pseudoElem.find("span").css("max-width","");if(Math.round(t.width())>Math.round(this.pseudoElem.width()))return t.css("max-width","100%"),!0}return!1},get isFocused(){var t=document.activeElement;return!!(this.pseudoElem&&this.pseudoElem.length&&this.pseudoElem.is($(t)))||!!(this.list&&this.list.length&&this.list[0].contains(t))},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map((function(t){return t.value}))},get selectedOptions(){return b.getArrayFromList(this.element[0].querySelectorAll("option")).filter((function(t){return t.selected}))},init:function(){var t=this,e=this.element.attr("id");e=e?o.stripTags(e):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",e||(e=b.uniqueId(this.element,"dropdown"),l.setAttribute(this.element[0],"id",e),l.setAttribute(this.element.parent().find("label").first()[0],"for",e)),"ios"!==u.os.name&&"android"!==u.os.name||(this.settings.noSearch=!0);var n=this.element[0].classList;0===n.length&&(this.element[0].classList="dropdown");var i=n.contains("dropdown-xs")?"dropdown input-xs":n.contains("dropdown-sm")?"dropdown input-sm":n.contains("dropdown-lg")?"dropdown input-lg":"dropdown",a=this.element.attr("style");this.isHidden=a&&a.indexOf("display: none")>=0;var s=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=s.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(s)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(i)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(e,"-shdo")),n.contains("text-align-reverse")?i+=" text-align-reverse":n.contains("text-align-center")&&(i+=" text-align-center"),this.label=$('label[for="'.concat(o.stripTags(e),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",i):this.pseudoElem=$('<div class="'.concat(i,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var r=l.getAttributes(this.element[0]),c=this.getDataAttributes(r,["data-validate"]);this.pseudoElem.attr(c.obj).attr({role:"button","aria-haspopup":"listbox"}),function(t){var e=t.element.prop("disabled"),n=t.element.prop("readonly");e?t.disable():n?t.readonly():t.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var d=this.element.attr("data-source");d&&"source"!==d&&(this.settings.source=d);var h=this.element.attr("data-maxselected");function p(t,e){switch(t){case!e||"true":return"all";case!!e&&"false":return"none";default:return on.indexOf(t)>-1?t:"none"}}h&&!isNaN(h)&&(this.settings.maxSelected=parseInt(h,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var f=this.element.attr("data-move-selected");this.settings.moveSelected=f?p(f,!0):p(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var g=this.element.attr("data-close-on-select");g&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===g);var m=this.element.attr("data-no-search");m&&!this.settings.noSearch&&(this.settings.noSearch="true"===m);for(var v=["-xs","-sm","-mm","-md","-lg"],y=this.element.attr("class"),w=null,x=0;x<v.length;x++)y.match(w=v[x])&&this.pseudoElem.addClass("dropdown".concat(w));return this.dataset=[],this.listfilter=new ee({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout((function(){t.toggleTooltip()}),0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var t=this;function e(e){t.settings.dismissHandler&&t.settings.dismissHandler(e);var n=t.selectedOptions.filter((function(t){return o.stripHTML(t.value)===e.settings.value}));n.length&&t.deselect(n[0]),t.tagListAPI.element.classList[t.selectedOptions.length?"remove":"add"]("empty"),t.isOpen()&&t.updateList()}var n=this.toTagData();n.forEach((function(n){n.dismissHandler=e,t.settings.clickHandler&&(n.clickHandler=t.settings.clickHandler),t.isDisabled()&&(n.disabled=!0)}));var i=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:n}):(this.tagListAPI=new rn(i,{tags:n}),i.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),this.isOpen()&&this.position()},inputTimer:function(){if(this.inputTimeout)return!1;var t=this;return this.inputTimeout=setTimeout((function(){clearTimeout(t.inputTimeout),t.inputTimeout=null}),100),!0},setWidth:function(){var t=this.element[0].style;t.width&&(this.pseudoElem[0].style.width=t.width),"absolute"===t.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=t.left,this.pseudoElem[0].style.top=t.top,this.pseudoElem[0].style.bottom=t.bottom,this.pseudoElem[0].style.right=t.right)},setItemIcon:function(t){if(!t.icon)return t.isIcon=!1,t.html="",void this.listIcon.items.push(t);"object"===n(t.icon)&&(t.obj=t.icon,t.icon=t.icon.icon,t.obj.color?0===t.obj.color.indexOf("#")?t.specColor=t.obj.color:t.classList=" ".concat(t.obj.color):t.obj.class&&(0===t.obj.class.indexOf("#")?t.specColor=t.obj.class:t.classList=" ".concat(t.obj.class)),t.obj.colorOver?0===t.obj.colorOver.indexOf("#")?t.specColorOver=t.obj.colorOver:t.classListOver=" ".concat(t.obj.colorOver):t.obj.classOver&&(0===t.obj.classOver.indexOf("#")?t.specColorOver=t.obj.classOver:t.classListOver=" ".concat(t.obj.classOver))),t.isIcon=t.icon&&t.icon.length,t.classList&&t.classList.length&&(t.isClassList=!0),t.classListOver&&t.classListOver.length&&(t.isClassListOver=!0),t.html=$.createIcon({icon:t.isIcon?t.icon:"",class:"listoption-icon".concat(t.isClassList?" ".concat(t.classList):"")}),"swatch"===t.icon&&(t.isSwatch=!0,t.html='<span class="swatch '.concat(t.isClassList?t.classList:"",'"></span>')),this.listIcon.items.push(t)},setListIcon:function(){var t=this,e=!t.settings.multiple&&t.element.find("[data-icon]").length>0,n=e?this.element.find("option"):[];if(t.listIcon={hasIcons:e,items:[]},e){var i=0;n.each((function(e){var n=$(this).attr("data-icon"),a=null;"string"==typeof n&&n.length&&(a=0!==n.indexOf("{")?n:$.fn.parseOptions(this,"data-icon"),t.setItemIcon({html:"",icon:a}),t.listIcon.items[e]&&t.listIcon.items[e].isIcon&&i++)})),e=i>0}e&&(t.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),t.listIcon.pseudoElemIcon=t.pseudoElem.find("> .listoption-icon"),t.listIcon.idx=-1),t.listIcon.hasIcons=e},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var t=this,e=this.element.find("option:selected"),n=this.getOptionText(e);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:o.escapeHTML(n),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",(function(){t.removeTooltip()})).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(t){var e=this;if(e.listIcon.hasIcons){var n=t?t.find(".listoption-icon"):null;e.list.find("li").each((function(i){var a=$(this),s=a.find(".listoption-icon"),r=e.listIcon.items[i];r&&(a.is(".is-focused")&&r.isClassListOver&&s.removeClass(r.classListOver).addClass(r.classList),n&&a.is(t)&&r.isClassListOver&&(n.removeClass(r.classList),n.addClass(r.classListOver)))}))}},updateItemIcon:function(t){if(this.listIcon.hasIcons){var e=this.listIcon.pseudoElemIcon,n=t.index(),i=this.listIcon.idx,a=this.listIcon.items[n],s=a&&a.isIcon?a.icon:"";if(!a)return;if(i>-1){var r=this.listIcon.items[i];r&&(e.removeClass("".concat(r.classList," ").concat(r.classListOver)),e[0].style.fill="")}this.listIcon.idx=n,e.changeIcon(s),a.isClassList&&e.addClass(a.classList)}},updateList:function(t){var e=this,n=e.isMobile(),i=null!=e.list&&e.list.length>0,a="",s="",r=0,o=this.element.find("optgroup").length,c="",d=!0===this.settings.multiple,h="".concat(this.settings.moveSelected),u=!0===this.settings.showSelectAll;this.element[0].classList.contains("text-align-reverse")?c=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(c=" text-align-center"),i||(a='<div class="dropdown-list'.concat(c).concat(n?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="dropdown-list" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(D.translate("TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(c,'" id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(n?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),'<span class="audible">').concat(D.translate(n?"Close":"Collapse"),'</span></span>\n        <ul role="listbox" aria-label="').concat(D.translate("Dropdown"),'">'));var p=this.element.find("option"),f=this.element.find("optgroup"),g=":selected",m=[];"typeahead"===this.settings.reload&&(g=function(t,n){return!!e.selectedValues&&e.selectedValues.indexOf(n.value)>-1});var v=p.filter(g);function b(t){return'<li role="presentation" class="group-label" focusable="false">\n        '.concat(t,"\n      </li>")}function y(n,i){var a=n.innerHTML,s=l.getAttributes(n),r=s.getNamedItem("value"),o=s.getNamedItem("title"),c=o?'" title="'.concat(o.value,'"'):"",d=s.getNamedItem("data-badge"),h=s.getNamedItem("data-badge-color"),u="",p=n.selected?" is-selected":"",f=n.disabled?" is-disabled":"",g=n.className?" ".concat(n.className.value):"",m=g.indexOf("clear")>-1?' class="clear-selection"':"",v=' tabIndex="'.concat(i&&0===i?0:-1,'"'),b=" ".concat(e.getDataAttributes(s,["data-badge","data-badge-color","data-val","data-icon"]).str),y=(r&&"value"in r?r.value:a).replace(/"/g,"/quot/"),w="";if(e.listIcon.hasIcons&&e.listIcon.items[i]&&(w=e.listIcon.items[i].html),d&&(u='<span class="badge '.concat(h?h.value:"azure07",'">').concat(d.value,"</span>")),g.indexOf("clear")>-1&&""===a&&(a=D.translate("ClearSelection")),t&&t.length>0){var x=e.getSearchRegex(t);a=a.replace(x,"<i>$1</i>").trim()}return e.listIcon.hasIcons&&e.listIcon.items[i]&&e.listIcon.items[i].isSwatch&&(g+=" is-swatch"),""+'<li class="dropdown-option'.concat(p).concat(f).concat(g,'" ').concat(p?'aria-selected="true"':"",' data-val="').concat(y,'" ').concat(b).concat(v).concat(c,' role="option">\n        <a id="list-option-').concat(i,'" href="#" ').concat(m,' role="option">').concat(w).concat(a).concat(u,"</a></li>")}if("typeahead"===this.settings.reload&&v.prop("selected",!0),d&&u){var w=p.not("[disabled], .hidden").length===v.not("[disabled], .hidden").length;s+='<li role="presentation" class="dropdown-select-all-list-item'.concat(w?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(D.translate("SelectAll"),"</a>")+"</li>"}"group"===h&&(f&&f.length?f.each((function(t,e){var n=v.filter((function(){return $.contains(e,this)}));m.push(n)})):h="all"),"all"===h&&(p=p.not(v),v.length>0&&(s+=b("".concat(D.translate("Selected")," ").concat(e.isInlineLabel?e.inlineLabelText.text():this.label.text()))),v.each((function(t){s+=y(this,t),r++})),!o&&p.length>0&&(s+=b("".concat(D.translate("All")," ").concat(e.isInlineLabel?e.inlineLabelText.text():this.label.text())))),p.each((function(t){var e,n=t+r,i=$(this),a=i.parent();a.is("optgroup")&&f.length&&(e=a.index(),f.index(a)>-1&&(f=f.not(a),s+=b("".concat(a.attr("label"))),"group"===h&&m[e].each((function(t){s+=y(this,t),r++})))),"none"!==h&&i.is(":selected")||(s+=y(this,n))})),i?this.listUl.html(s):(a+="".concat(s,"</ul>")+"</div>",this.list=$(a),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),o&&this.listUl.addClass("has-groups"),$.fn.tooltip&&this.listUl.find("[title]").addClass("has-tooltip").tooltip(),this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},setDisplayedValues:function(){var t=this.element.find("option:selected"),e=this.getOptionText(t);if(t.hasClass("clear")&&(e=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===t.length){var n=this.pseudoElem.find("span").first();return l.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),n=$("#".concat(this.element.attr("id"))).next().find("span").first(),l.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),void this.setPlaceholder(e)}var i=this.element.attr("maxlength");i&&(e=e.substr(0,i)),e=e.trim();var a=this.pseudoElem.find("span");a.length>0&&(a[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(o.escapeHTML(e)))}this.setPlaceholder(e),this.previousActiveDescendant=t.first().val(),this.updateItemIcon(t),this.setBadge(t)},copyClass:function(t,e,n){t.hasClass(n)&&e.addClass(n)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function(t){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var e="string"!=typeof t||"string"==typeof t&&""===t;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",e?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(t,e){return e.altKey&&38===e.which?(e.stopPropagation(),e.preventDefault(),!1):t.is(":disabled")||t.hasClass("is-readonly")?void 0:!e.ctrlKey||!this.settings.onKeyDown||!1!==this.settings.onKeyDown(e)||(e.stopPropagation(),e.preventDefault(),!1)},handleSearchEvents:function(){var t=this;this.settings.noSearch&&this.searchInput.prop("readonly",!0),this.filterTerm||(this.searchKeyMode=!1),this.searchInput.on("keydown.".concat("dropdown"),(function(e){var n=$(t);return!!t.ignoreKeys(n,e)&&t.handleKeyDown(n,e)})).on("input.".concat("dropdown"),(function(e){t.isFiltering=!0,t.handleAutoComplete(e)}))},filterList:function(t){var e=!1;this.settings.source&&"typeahead"===this.settings.reload&&(e=!0,this.callSource());var n,i=this,a=!1,s=$(".dropdown-option",this.listUl),r=$(".group-label",this.listUl),l=!1;s.length&&this.list&&(!this.list||this.list.length)&&(t||(t=""),n=!e&&t&&t.length?this.listfilter.filter(s,t):s,this.list.addClass("search-mode"),this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.searchInput.removeAttr("aria-activedescendant"),this.unhighlightOptions(),n&&(n.length||t)?(n.removeClass("hidden"),s.not(n).add(r).addClass("hidden"),s.filter(n).each((function(e){var n=$(this),s=n.children("a");n.attr("tabindex",0===e?"0":"-1"),a||(i.highlightOption(n),a=!0);var r=i.getSearchRegex(t),c=n.text();c=(c=(c=(c=(c=(c=(c=(c=(c=(c=(c=o.escapeHTML(c)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(r,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var d=0!==n.children("a").find("svg").length?(new XMLSerializer).serializeToString(n.children("a").find("svg")[0]):"",h=n.children("a").find(".swatch");d&&(l=!0),s[0]&&(s[0].innerHTML=(0!==h.length?h[0].outerHTML:"")+d+c)})),r.each((function(){var t=$(this).nextUntil(".group-label, .selector").not(".hidden");(i.settings.showEmptyGroupHeaders||t.length)&&$(this).removeClass("hidden")})),t="",this.position(),l&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle")):this.resetList())},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var t=this.listUl.find("li"),e=!1;t.removeAttr("style").each((function(){var t=$(this).children("a"),n=$(this),i=o.escapeHTML(t.text()),a=0!==n.children("a").find("svg").length?(new XMLSerializer).serializeToString(n.children("a").find("svg")[0]):"",s=n.children("a").find(".swatch");a&&(e=!0),t[0]&&(t[0].innerHTML=(0!==s.length?s[0].outerHTML:"")+a+i)})),this.list.hasClass("is-ontop")&&(this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px")),this.settings.multiple&&this.updateList(),t.removeClass("hidden"),this.position(),e&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle"),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var t=this.element.find("option").filter((function(){return!this.value||0===$.trim(this.value).length}));t.length&&(t[0].selected=!0,t[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.triggerHandler("change"))},handleKeyDown:function(t,e){var n,i=this.element[0].selectedIndex||-1,a=this.element[0].options,s=e.which;if(!this.isLoading()){if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;switch(this.isOpen()&&(a=this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),i=-1,$(a).each((function(t){$(this).is(".is-focused")&&(i=t)}))),s){case 37:case 8:case 46:if(!this.isOpen())return this.selectBlank(),e.stopPropagation(),e.preventDefault(),!1;break;case 9:return this.isOpen()&&(this.closeList("tab"),this.activate()),!0;case 27:if(this.isOpen()){this.element.closest(".modal.is-visible").data("listclosed",!0);var r=this.pseudoElem?this.pseudoElem.parents("td"):null;return this.closeList("cancel"),this.activate(),r&&r.focus(),e.stopPropagation(),!1}break;case 32:case 13:if(this.isOpen()){if(32===s&&!0===this.searchKeyMode)break;e.preventDefault(),a.length&&i>-1&&this.selectOption(this.correctValue($(a[i]))),this.settings.closeOnSelect&&(this.closeList("select"),this.activate())}return e.stopPropagation(),!1;case 38:if(e.shiftKey)return;return this.searchKeyMode=!1,i>0&&(n=$(a[i-1]),this.highlightOption(n),this.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 40:if(e.shiftKey)return;return this.searchKeyMode=!1,i<a.length-1&&(n=$(a[i+1]),this.highlightOption(n),this.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 35:this.searchKeyMode=!1;var o=$(a[a.length-1]);return this.highlightOption(o),e.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var l=$(a[0]);return this.highlightOption(l),e.stopPropagation(),!1}return this.isOpen()||this.isControl(s)||this.settings.source||this.settings.noSearch||(this.isFiltering=!0,this.filterTerm=$.actualChar(e),this.searchInput&&this.searchInput.length&&this.searchInput.val($.actualChar(e)),this.toggle()),this.searchKeyMode=!0,this.searchInput&&this.searchInput.attr("aria-activedescendant",""),!0}},handlePseudoElemKeydown:function(t){var e=$(t.target),n=t.key;if(e.is(".is-readonly"))return!0;var i="Esc"===n||"Escape"===n;if(["Alt","Shift","Control","Meta"].indexOf(n)>-1)return!1;if(!this.ignoreKeys(e,t))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(n)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!t.ctrlKey&&this.handleKeyDown(e,t),!1;var a="Mac OS X"===u.os.name;return!a&&"Delete"===n||a&&"Backspace"===n?(this.selectBlank(),"Backspace"===n&&(t.stopPropagation(),t.preventDefault()),!0):i||"Tab"===n?!this.settings.noSearch||!this.isOpen()||this.handleKeyDown(e,t):(this.handleAutoComplete(t),!0)},handleAutoComplete:function(t){var e=this;if(!this.isLoading()){var n=this;if(this.timer&&clearTimeout(this.timer),"input"===t.type)this.filterTerm=this.searchInput.val();else{if(this.filterTerm+=$.actualChar(t).toLowerCase(),""===this.filterTerm)return;t.key===this.filterTerm||t.key.toLowerCase()!==this.filterTerm||n.settings.noSearch||(this.filterTerm=t.key)}this.timer=setTimeout((function(){n.settings.noSearch?n.selectStartsWith(n.filterTerm):(e.searchKeyMode=!0,n.isOpen()?i():n.open(i))}),n.settings.delay)}function i(){""===n.filterTerm?n.resetList():n.filterList(n.filterTerm.toLowerCase())}},isControl:function(t){return t>7&&t<48||t>90&&t<94||t>111&&t<146},activate:function(t){var e=this.pseudoElem;(t||this.isMobile())&&(e=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),t&&e&&(e.hasClass("is-readonly")||!0===e.prop("readonly"))||(this.isMobile()||this.filterTerm||!e||(e[0].setSelectionRange?e[0].setSelectionRange(0,e[0].value.length):"INPUT"===e[0].tagName&&e[0].select()),e&&e[0].focus())},getSearchRegex:function(t){var e;try{e=new RegExp("(".concat(k.escapeRegExp(t),")"),"i")}catch(n){e=/[\s\S]*/i}return e},getOptionText:function(t){var e="";return t||(t=this.element.find("option:selected")),t.each((function(){e.length>0&&(e+=", "),e+=$(this).text().trim()})),e},open:function(t){var e=this;function n(){e.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),e.updateList(),e.openList(),t&&"function"==typeof t&&t.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||e.callSource(n)||n())},openList:function(){var t,e=this.list.find(this.previousActiveDescendant?'.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]'):".is-selected"),n=this;if(this.touchPrevented=!1,$("select").each((function(){var t=$(this).data();t.dropdown&&t.dropdown.closeList("cancel")})),$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).each((function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}})),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.isShortField&&this.list[0].classList.add("dropdown-short"),this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),this.settings.showTags&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var i=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(i))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var a=this.settings.cssClass;if(a&&"string"==typeof a&&this.list.addClass(a),this.position(),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showTags){var s=$(this.selectedOptions),r=this.getOptionText(s);this.searchInput.val(r)}function o(t){return t.closest(".dropdown, .multiselect").length>0||t.closest(".dropdown-list").length>0||!0===n.touchmove}function l(t){var e=$(t.target);if(n.touchPrevented||o(e)&&!e.is(".icon"))return t.preventDefault(),void(n.touchPrevented=!1);n.closeList("cancel")}this.highlightOption(e,this.settings.multiple),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout((function(){n.listUl.scrollTop(0)}),0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&n.searchInput.on("keypress.dropdown",(function(t){13===t.which&&n.closeList("select")})),n.list.removeClass("dropdown-tall").on("touchend.list click.list","li",(function(t){if(!n.touchPrevented){var e=n.selectListItem($(this));t.preventDefault(),e&&t.stopPropagation()}})).on("mouseenter.list","li",(function(){n.highlightOption($(this),!0)})),setTimeout((function(){n.list.addClass("is-closable")}),100),$(document).on("touchstart.dropdown",(function(e){n.touchPrevented=!1,t={x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",(function(e){var i=e.originalEvent.touches[0].pageX,a=e.originalEvent.touches[0].pageY;(i>=t.x+10||i<=t.x-10||a>=t.y+10||a<=t.y-10)&&(n.touchPrevented=!0)}))})).on("touchend.dropdown touchcancel.dropdown",(function(t){if($(document).off("touchmove.dropdown"),t.preventDefault(),n.touchPrevented)return t.stopPropagation(),!1;l(t)})).on("click.dropdown",l);var c=$(".modal.is-visible .modal-body-wrapper"),d=n.element.closest(".scrollable, .scrollable-x, .scrollable-y",".datagrid-wrapper");d.length&&(c=d),c.length&&(this.parentScrollableArea=c,this.parentScrollableArea.on("scroll.dropdown",(function(t){var e=$("*:focus");n.touchPrevented||o($(t.target))||e.is(".timepicker")?n.touchPrevented=!1:n.closeList("cancel")}))),$("body").on("resize.dropdown",(function(){n.position(),void 0===window.orientation&&n.closeList("cancel")})),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",(function(){n.closeList("cancel")}))},position:function(){var t=this,e={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var n=this.pseudoElem;this.isInGrid&&(n=this.element.closest(".datagrid-cell-wrapper"));var i=window.getComputedStyle(n[0]),a=2*parseInt(i.borderLeftWidth,10),s=Math.round(parseInt(n[0].clientWidth,10)+a);this.searchInput[0].style.cssText="width: ".concat(s,"px !important");var r=Math.round(this.list.width())<=s;if(this.searchInput[0].style.width="",e.parent=n,e.useParentWidth=r,!this.settings.showTags){var o=window.devicePixelRatio>1,l="chrome"===u.browser.name;e.y=-(parseInt(n[0].clientHeight,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)-(!l&&o?1:0)),e.x=0}t.settings.placementOpts&&t.settings.placementOpts.x&&(e.x=t.settings.placementOpts.x),this.list.one("afterplace.dropdown",(function(e,n){!0===n.wasFlipped&&(t.list.addClass("is-ontop"),t.listUl.prependTo(t.list));var i=window.getComputedStyle(t.list[0]),a=i.top?parseInt(i.top,10):0,s=0;"firefox"===u.browser.name&&(s=4);var r,o=parseInt(t.listUl[0].offsetHeight,10),l=parseInt(t.list[0].offsetHeight,10)+5,c=parseInt(t.searchInput[0].offsetHeight,10),d=parseInt(t.list[0].offsetTop,10)+parseInt(t.list[0].offsetHeight,10)>=window.innerHeight;return c<l-2*c&&o+c>=l&&(r="".concat(l-c-5,"px"),d&&(t.list[0].style.height="".concat(parseInt(l,10)-10,"px"))),n.wasFlipped&&(r="".concat(l-c-s-5,"px"),t.isShortField||(t.list[0].style.top="".concat(a,"px"))),r&&(t.listUl[0].style.height=r),n})).place(e),this.list.data("place").place(e)},selectListItem:function(t){var e=t.closest("li");if(e.length&&(t=e),t.is(".separator, .group-label"))return!1;if(t.is(".dropdown-select-all-anchor")&&(t=t.parent()),this.settings.multiple&&t[0].classList.contains("dropdown-select-all-list-item")){var n=!t[0].classList.contains("is-selected");return t[0].classList[n?"add":"remove"]("is-selected"),n?t[0].setAttribute("aria-selected","true"):t[0].removeAttribute("aria-selected"),this.selectAll(n),!0}var i=this.correctValue(t);if(i.is(":disabled"))return!1;if(this.selectOption(i),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var a=this.element.find("option"),s=a.filter(":selected");a.length>s.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").removeAttr("aria-selected"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(t){var e=t.attr("data-val").replace(/"/g,"/quot/"),n=this.element.find('option[value="'.concat(e,'"]'));return(0===n.length||n.length>1)&&(n=this.element.find("option").filter((function(){var t=$(this),n=t.attr("value");return t.text()===e||n&&n.replace(/"/g,"/quot/")===e}))),n},close:function(){return this.closeList("cancel")},closeList:function(t){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.listUl.find(".has-tooltip").each((function(){var t=$(this).data("tooltip");t&&t.destroy()})),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",t),this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function(t){t&&0!==t.length&&(this.listUl.scrollTop(0),this.listUl.scrollTop(t.offset().top-this.listUl.offset().top-this.listUl.scrollTop()-40))},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return P(this.toggle,this.toggleList).apply(this)},highlightOption:function(t,e){if(t&&(0===t.length&&(t=this.list.find(".dropdown-option").eq(0)),!t.is(".separator, .group-label"))){var n=this.element.find('option[value="'.concat(t.attr("data-val"),'"]'));n.hasClass(".is-disabled")||n.is(":disabled")||this.isOpen()&&(this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").attr({tabindex:"-1"}),n.hasClass("clear")||(this.setItemIconOverColor(t),t.addClass("is-focused").attr({tabindex:"0"})),this.searchInput.attr("aria-activedescendant",t.children("a").attr("id")),e&&!1!==e&&void 0!==e||this.scrollToOption(t))}},unhighlightOptions:function(t,e){t&&t.length||(t=this.list.find(".is-selected")),this.setItemIconOverColor(),t.removeClass("is-focused").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),e&&!1!==e&&void 0!==e||this.scrollToOption(t.first())},renderListItem:function(t){var e=t.selected,n=this.listUl.find('li[data-val="'.concat(t.value,'"]'));if(e)return n[0].classList.add("is-selected"),void n[0].setAttribute("aria-selected",!0);n[0].classList.remove("is-selected"),n[0].removeAttribute("aria-selected")},selectAll:function(t){var e=[].slice.call(this.element[0].querySelectorAll("option:not(.is-disabled):not(:disabled)")),n=[].slice.call(this.listUl[0].querySelectorAll("li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)")),i=e[e.length-1],a="";if(t){n.forEach((function(t){t.classList.add("is-selected"),t.setAttribute("aria-selected",!0)})),e.forEach((function(t){t.selected=!0,t.setAttribute("selected",!0)})),a=this.getOptionText($(e));var s=this.element[0].getAttribute("maxlength");s&&(a=a.substr(0,s))}else n.forEach((function(t){t.classList.remove("is-selected"),t.removeAttribute("aria-selected")})),e.forEach((function(t){t.selected=!1,t.setAttribute("selected",!1),t.removeAttribute("selected")}));this.previousActiveDescendant=i.value||"",this.pseudoElem[0].querySelector("span").textContent=a,this.searchInput[0].value=a,this.updateItemIcon(i),this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(i),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(t,e){Array.isArray(t)&&(t=$(t));var n=this;t.each((function(){n.selectOption($(this),e)})),n.element.trigger("change").triggerHandler("selected")},selectOption:function(t,e){var n;if(t&&t.length&&(!t.is("li")||(n=t,0===(t=this.element.find('option[value="'.concat(t.attr("data-val"),'"]'))).length&&(t=this.element.find("option").filter((function(){return $(this).text()===n.attr("data-val")}))),!t.prop("disabled")))){var i=t.val();"string"==typeof t?(n=this.listUl.find('li[data-val="'.concat(t,'"]')),t=this.element.find('option[value="'.concat(i=t,'"]'))):"string"==typeof i&&(i=i.replace(/"/g,"/quot/"),n=this.listUl.find('li[data-val="'.concat(i,'"]')));var a=!0,s=this.selectedValues,r=!1;!t.hasClass("clear")&&n||(r=!0),r&&this.deselectAll(),this.settings.multiple&&(Array.isArray(s)||(s=[s]),s.indexOf(i)>-1&&(a=!1)),a?(this.select(t[0]),this.previousActiveDescendant=i):(this.deselect(t[0]),this.previousActiveDescendant=void 0);var o=this.listUl[0].scrollTop;o>0&&(this.currentlyScrolledPos=o),this.renderListItem(t[0]),this.setDisplayedValues(),this.updateItemIcon(t),e||(this.element.trigger("change").triggerHandler("selected",[t,a]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(t);var l=this.element.attr("id");if(u.browser.isIE11()&&l){var c=$("#".concat(l)).html(),d=$("#".concat(l)).val();c&&this.element.html(c),d&&this.element.val(d)}}},select:function(t){t&&t instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(t.selected=!0))},selectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.select(e[0]),this.updated())}},deselect:function(t){t&&t instanceof HTMLOptionElement&&(t.selected=!1)},deselectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.deselect(e[0]),this.updated())}},deselectAll:function(){var t=this;this.element.find("option").each((function(e){$(e).prop("selected",!1),t.deselectValue(e)}))},selectStartsWith:function(t){if("string"==typeof t){var e=this.element[0];this.filterTerm="";var n=-1,i=0;this.searchMatches&&this.searchMatches[t]||(this.searchMatches={},this.searchMatches[t]=[]);for(var a=0;a<e.options.length;a++)if(0===e.options[a].innerText.toLowerCase().indexOf(t)){if(-1===this.searchMatches[t].indexOf(a)){this.searchMatches[t].push(a),n=a;break}i++}if(-1===n){if(!this.searchMatches[t].length)return;i===this.searchMatches[t].length&&(n=this.searchMatches[t][0],this.searchMatches[t].length=1)}e.selectedIndex=n,this.updated(),this.element.trigger("change")}},setBadge:function(t){if(this.badges){var e=this.element.parent().find(".badge");0===e.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),e=this.element.parent().find(".badge")),e.attr("class","badge ".concat(t.attr("data-badge-color")?t.attr("data-badge-color"):"azure07")).text(t.attr("data-badge"))}},callSource:function(t,e){var i=this,a="";if(e||!this.isOpen()||this.element.hasClass("search-mode")||(a=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var s=n(this.settings.source),r=function(e,n){var s="",r=i.element.val();function o(t){return t.replace(/"/g,"'")}function l(t){if(null!=t){var e="",n="",a="";"string"==typeof t&&(t={value:t}),void 0!==t.value&&(t.value=o(t.value)),void 0!==t.id&&(isNaN(t.id)||(t.id="".concat(t.id)),t.id=o(t.id),e=' id="'.concat(t.id,'"')),void 0!==t.label&&t.label.length&&(t.label=o(t.label),a=t.label);var l=i.selectedValues.indexOf(r)>-1;i.settings.multiple?r.forEach((function(e){e===t.value&&(t.selected=!0,n=" selected")})):(t.value===r||l)&&(t.selected=!0,n=" selected"),a.length||a===t.value||(a+=t.value),s+="<option".concat(e,' value="').concat(t.value,'"').concat(n,">\n          ").concat(a,"\n        </option>")}}if(!i.isFiltering&&!b.equals(e,i.dataset)){if(i.dataset=e,!n){i.element.empty();for(var c=0;c<e.length;c++){var d=void 0;if(e[c].group){d=e[c].options,s+='<optgroup label="'.concat(e[c].group,'">');for(var h=0;h<d.length;h++)l(d[h]);s+="</optgroup>"}else l(e[c])}i.element.append(s)}i.updateList(a)}i.element.triggerHandler("complete"),i.element.trigger("requestend",[a,e]),"function"==typeof t&&t()};if(i.element.triggerHandler("start"),i.element.trigger("requeststart"),"function"===s)this.settings.source(r,a,this.settings.sourceArguments);else if("object"===s){var o=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];r(o)}else{var l=this.settings.source.toString();$.getJSON(l).done((function(t){r(t)})).fail((function(){r([])}))}return!0},getDataAttributes:function(t,e){if(t){"string"==typeof t&&(t=[t]);var n=e||[];"string"==typeof n&&(n=[n]);var i={obj:{},str:"",isExclude:function(t){return $.inArray(t,n)>-1}};for(var a in t)t.hasOwnProperty(a)&&(i.name="".concat(t[a].name),i.isData="data-"===i.name.substr(0,5),i.isData&&!i.isExclude(i.name)&&(i.obj[i.name]=t[a].value,i.str+=" ".concat(i.name,'="').concat(t[a].value,'"')));return{str:i.str,obj:i.obj}}},setCode:function(t){M(this.setCode,this.element.val);var e=this,n=function(){e.element.val(t),e.updated()};e.callSource(n)||n()},isMobile:function(){return["ios","android"].indexOf(u.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var t=[],e=this.element[0].id;return e||(e=b.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach((function(n){t.push({content:n.innerText.trim(),dismissible:!0,href:"#",id:"".concat(e,"-tag-").concat(n.value),style:"secondary",value:n.value})})),t},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.element.prop("multiple",!(!this.settings.multiple||!0!==this.settings.multiple)),!0===this.element.prop("readonly")?this.readonly():this.pseudoElem.removeClass("is-readonly"),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var t=document.body.querySelector("#dropdown-list");t&&this.isOpen()&&t.parentNode.removeChild(t)},handleEvents:function(){var t=this,e=this;this.pseudoElem.on("keydown.dropdown",(function(e){return t.handlePseudoElemKeydown(e)})).on("click.dropdown",(function(t){t.originalEvent.ctrlKey&&t.originalEvent.shiftKey||t.stopPropagation()})).on("mouseup.dropdown",(function(t){if(2!==t.button){var n=$(t.target).parents(".tag").length>0,i=!1;t.target instanceof HTMLElement&&"string"==typeof t.target.className&&(i=t.target.classList.contains("tag")),i||n||e.toggle()}})).on("touchend.dropdown touchcancel.dropdown",(function(t){t.stopPropagation(),e.toggle(),t.preventDefault()})),e.element.on("activated.dropdown",(function(){e.label.trigger("click")})).on("updated.dropdown",(function(t){t.stopPropagation(),e.updated()})).on("openlist.dropdown",(function(){e.toggle()})),e.element.closest("form").on("reset.dropdown",(function(){setTimeout((function(){e.element.triggerHandler("updated")}),1)})),this.label.on("click",(function(){e.pseudoElem.focus()}))}},$.fn.dropdown=function(t){return this.each((function(){var e=$.data(this,"dropdown");e?e.updated(t):e=$.data(this,"dropdown",new cn(this,t))}))};var dn=["standard","range"],hn=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:dn[0],roundToInterval:!0,parentElement:null,returnFocus:!0}};function un(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,hn),this.init()}un.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=D.getLocale(this.settings.language),n=D.getLocale(this.settings.locale);return $.when(n,e).done((function(e,n){t.locale=D.cultures[e]||D.currentLocale,t.language=n||t.settings.language||t.locale.language||null,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()})),this},setCurrentCalendar:function(){return this.currentCalendar=D.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function t(t,e){(!e||["minute","second"].indexOf(e)<0)&&(e="minute");var n=hn()["".concat(e,"Interval")];if(void 0===t||isNaN(t))return n;var i=parseInt(t,10);return i>0&&i<60?i:n}function e(t){return!0===t}var n;return this.id="".concat(b.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=e(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=t(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(n=24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat)&&n.toUpperCase().match("H")&&n.match("mm")?n:hn().timeFormat,this.settings.minuteInterval=t(this.settings.minuteInterval,"minute"),this.settings.secondInterval=t(this.settings.secondInterval,"second"),this.settings.mode=function(t){return $.inArray(t,["standard","range"])>-1?t:hn().mode}(this.settings.mode),this.settings.roundToInterval=e(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){return this.setup(),this.settings.parentElement?(this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this):(this.trigger=this.element.next("svg.icon"),0===this.trigger.length&&(this.trigger=$.createIconElement("clock").insertAfter(this.element)),this.addAria().addMask().handleEvents().roundMinutes(),this)},addAria:function(){return this.element.attr({"aria-expanded":"false",role:"combobox"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(D.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>")),this},handleKeys:function(){var t=this;this.element.on("keydown.timepicker",(function(e){var n=!1;return 27===e.which&&t.isOpen()&&(n=!0,t.closeTimePopup()),40!==e.which||t.isOpen()||(n=!0,t.openTimePopup()),!n||(e.stopPropagation(),e.preventDefault(),!1)}))},handleBlur:function(){var t=this;this.element.on("blur.timepicker",(function(){t.roundMinutes(),setTimeout((function(){t.isOpen()&&0===t.popup.find(":focus").length&&t.closeTimePopup()}),20)}))},is24HourFormat:function(t){return t||(t=this.settings.timeFormat),!!t&&(t.match("H")||[]).length>0},hourText:function(t){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&t<10?"0":"")+t},hasSeconds:function(t){return t||(t=this.settings.timeFormat),(t.match("ss")||[]).length>0},hasDayPeriods:function(t){return t||(t=this.settings.timeFormat),(t.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(k.toBoolean(this.settings.roundToInterval)){var t=this.element.val(),e=this.getTimeSeparator(),n=t?t.split(e):[],i=this.settings.minuteInterval;if(n[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var a=n[1].split(" ");n[1]=a[0],a[1]&&n.push(a[1])}if(n[1]=parseInt(n[1],10),n[1]%i!=0){n[1]=Math.round(n[1]/i)*i,n[1]=n[1].toString(),n[1]=(n[1].length<2?"0":"")+n[1],"60"===n[1]&&(n[1]="00",n[0]=(parseInt(n[0],10)+1).toString());var s="".concat(n[0]+e+n[1]," ").concat(n[2]?n[2]:"");this.element.val(s)}}}},addMask:function(){this.element.data("mask")&&"object"===n(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var t={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),t&&this.element.mask(t),this},buildStandardPopup:function(){var t,e=this,n=$('<div class="timepicker-popup-content"></div>'),i=this.getTimeSeparator(),a="";this.initValues=e.getTimeFromField();var s=$('<div class="time-parts"></div>').appendTo(n),r=this.is24HourFormat(),o=this.hasSeconds(),l=this.hasDayPeriods(),c=r?0:1,d=r?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));c<d;)t="",parseInt(e.initValues.hours,10)===c&&(t=" selected"),e.hourSelect.append($("<option".concat(t,">").concat(e.hourText(c),"</option>"))),c++;s.append($('<label for="'.concat(this.hoursId,'" class="audible">').concat(D.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),s.append(this.hourSelect),s.append($('<span class="label colons">'.concat(i,"</span>")));var h=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));h<=59;)a=h<10?"0".concat(h):h,t="",parseInt(e.initValues.minutes,10)===h&&(t=" selected"),e.minuteSelect.append($("<option".concat(t,">").concat(a,"</option>"))),h+=e.settings.minuteInterval;if(this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(e.initValues.minutes,"</option>"))),s.append($('<label for="'.concat(this.minutesId,'" class="audible">').concat(D.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),s.append(this.minuteSelect),o){var u=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));u<=59;)a=u<10?"0".concat(u):u,t="",(parseInt(e.initValues.seconds,10)===u||!e.initValues.seconds&&"00"===a)&&(t=" selected"),this.secondSelect.append($("<option".concat(t,">").concat(a,"</option>"))),u+=e.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(e.initValues.seconds,"</option>"))),s.append($('<span class="label colons">'.concat(i,"</span>"))),s.append($('<label for="'.concat(this.secondsId,'" class="audible">').concat(D.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),s.append(this.secondSelect)}if(!r&&l){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),s.append($('<span class="label colons"></span>'));for(var p=this.currentCalendar.dayPeriods,f=0,g=new RegExp(e.initValues.period,"i");f<2;)t="",g.test(p[f])&&(t=" selected"),this.periodSelect.append($('<option value="'.concat(p[f],'"').concat(t,">").concat(p[f],"</option>"))),f++;s.append($('<label for="'.concat(this.periodId,'" class="audible">').concat(D.translate("TimePeriod",{locale:this.locale.name,language:this.language}),"</label>"))),s.append(this.periodSelect)}if(this.settings.parentElement)this.settings.parentElement.append(n),e.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{n.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(D.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var m=this.element,v=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(v="center",m=this.element.next(".icon")),this.trigger.popover({content:n,trigger:"immediate",placement:"bottom",placementOpts:{parent:m,parentXAlignment:v,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",(function(t,n){e.afterShow(n)})).on("hide.timepicker",(function(){e.settings.returnFocus&&e.element.focus()}))}this.trigger.data("tooltip")&&(e.popup=this.trigger.data("tooltip").tooltip,e.popup.addClass("timepicker-popup"))},afterShow:function(t){var e=this;t.find("button").button(),this.hourSelect.val(this.initValues.hours),this.hourSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.hours),this.minuteSelect.val(this.initValues.minutes),this.minuteSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.minutes),this.secondSelect&&(this.secondSelect.val(this.initValues.seconds),this.secondSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.seconds)),e.hasDayPeriods()&&(this.periodSelect.val(this.initValues.period),this.periodSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.period)),t.find("div.dropdown").first().focus(),t.find(".set-time").off("click.timepicker").on("click.timepicker",(function(t){t.preventDefault(),e.setTimeOnField(),e.closeTimePopup()})),this.settings.parentElement||t.on("keydown.timepicker","button, div.dropdown",(function(t){return 9!==(t.keyCode||t.charCode||0)||(e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)}))},containFocus:function(t){var e=t.shiftKey,n=this.popup.find(":focusable"),i=n.index($(":focus"));n.eq(i=e?i-1<0?n.length:i-1:i+1>=n.length?0:i+1).focus()},setupStandardEvents:function(){var t=this;t.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",(function(t){t.preventDefault(),t.target.click()})).on("keydown.timepicker","input.dropdown",(function(e){var n=!1;if(27===e.which&&(n=!0,t.closeTimePopup(),t.element.focus()),32===e.which&&(n=!0,t.popup.find(".set-time").click()),37===e.which||39===e.which){n=!0;var i=t.popup.find('input[id$="-shdo"]');if(37===e.which){var a=i.eq(i.index(this)-1);a&&0!==a.length||(a=i.eq(i.length)),a.focus()}if(39===e.which){var s=i.eq(i.index(this)+1);s&&0!==s.length||(s=i.eq(0)),s.focus()}}return!n||(e.preventDefault(),e.stopPropagation(),!1)})),t.trigger.on("hide.timepicker",(function(){t.onPopupHide()}))},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(t){var e,n,i=this,a=t||this.element.val(),s=this.getTimeSeparator(),r={};e=(a=(a=a.replace(/[T\s:.-]/g,s).replace(/z/i,"")).replace("å","å".concat(s))).split(s);var o,l=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),c=-1!==l&&l<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");function d(t){return t.replace(/^\s+|\s+$/g,"")}function h(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}return!this.is24HourFormat()&&c&&(e=[e[1],e[2],e[0]]),this.is24HourFormat()||c||(n=e[e.length-1].split(" "),e.pop(),e=e.concat(n)),e[0]&&e[0].length&&!isNaN(e[0])||(e[0]="1"),e[0]=parseInt(e[0],10),isNaN(e[0])||(e[0]="".concat(parseInt(e[0],10))),r.hours=i.hourText(e[0]),e[1]?(e[1]=d(e[1]),e[1]=h(e[1]),r.minutes=e[1]):r.minutes="00",(o=e[2])?(o=d(o),i.hasSeconds()?(o=h(o),r.seconds=o):(function(t){return i.dayPeriods.indexOf(t)>-1}(o)||(o=i.translateDayPeriod("AM")),r.period=o)):(i.hasSeconds()&&(r.seconds=o="00"),i.is24HourFormat()||(o=i.translateDayPeriod("AM"),r.period=o)),e[3]?(e[3]=d(e[3]),r.period=e[3]):!this.is24HourFormat()&&this.hasSeconds()&&(r.period=this.translateDayPeriod("AM")),r},getTimeFromField2:function(t){function e(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}var n=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,i=this.hasSeconds()?"timestamp":"hour",a=D.parseDate(t||this.element.val(),{date:i}),s=(a?a.getHours():"1").toString(),r=this.translateDayPeriod(s>=12?"PM":"AM").toString();!this.is24HourFormat()&&s>12&&(s=(parseInt(s,10)-12).toString()),this.is24HourFormat()||"0"!==s||(s="12");var o=n.indexOf("a")>-1?r:void 0,l=a?a.getMinutes():"00",c=a?a.getSeconds():"00";return{hours:e(s),minutes:e(l),seconds:e(c),period:o}},translateDayPeriod:function(t){return/am|pm|AM|PM/i.test(t)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(t)?0:1]:t},setTimeOnField:function(){var t=$("#".concat(this.hoursId)).val()||"",e=$("#".concat(this.minutesId)).val()||"",n=$("#".concat(this.secondsId)).val()||"",i=($("#".concat(this.periodId)).val()||"").toUpperCase(),a=this.getTimeSeparator(),s="".concat(t).concat(a).concat(e).concat(this.hasSeconds()?a+n:"");s+=(i=this.is24HourFormat()||""!==i?i:$("#".concat(this.periodId,"-shdo")).val())?" ".concat(this.translateDayPeriod(i)):"",this.element.val(s).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){this.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&this.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===this.settings.mode?(this.buildRangePopup(),this.setupRangeEvents()):(this.buildStandardPopup(),this.setupStandardEvents()),this.element.attr({"aria-expanded":"true"}),this.popup.find("div.dropdown").first().focus())},closeTimePopup:function(){this.trigger.data("tooltip")&&this.trigger.data("tooltip").hide()},onPopupHide:function(){if("standard"===this.settings.mode){var t=$("#".concat(this.hoursId)),e=$("#".concat(this.minutesId)),n=$("#".concat(this.secondsId)),i=$("#".concat(this.periodId));t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),this.hasSeconds()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.hasDayPeriods()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.element.attr({"aria-expanded":"false"}),this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("tooltip").destroy(),this.trigger.data("tooltip",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(t){var e=this.element.val();if(!t||!1===t)return e;var n=new RegExp(this.currentCalendar.dateFormat.timeSeparator,"g"),i=(e=e.replace(n,"")).split(" ");return i[0].length<4&&(e="0".concat(i[0]).concat(i[1]?i[1]:"")),e},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var t=this.element.data("mask");return t&&"function"==typeof t.destroy&&t.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function(){var t=this;return this.trigger.off("click.timepicker").on("click.timepicker",(function(){t.toggleTimePopup()})),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(t){return this.each((function(){var e=$.data(this,"timepicker");e?e.updated(t):e=$.data(this,"timepicker",new un(this,t))}))};var pn=new function(){var t=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,e){return!(!("placeholder"in document.createElement("input"))&&e&&(t===e.attr("placeholder")||t===D.translate("Required")))&&("string"==typeof t?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),0!==$.trim(t).length):"number"==typeof t?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var e=t.attr("name");return e&&e.length&&$('input[name="'.concat(e,'"]:radio:checked')).length},check:function(t,e){return this.message=D.translate("Required"),!(!$(e).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(e.is(":radio")?this.isRadioChecked(e):this.isNotEmpty(t,e))},message:"Required",type:"error",id:"required"},date:{check:function(t,e){if(this.message=D.translate("InvalidDate"),t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var n=t.indexOf(":")>-1?D.calendar().dateFormat.datetime:D.calendar().dateFormat.short,i=null;e&&e.data("datepicker")&&(n=(i=e.data("datepicker")).pattern);var a=!("MMMM"===n||"MMM"===n||"MM"===n||"MMMM d"===n||"yyyy"===n);return i&&(n={locale:i.locale.name,pattern:n,calendarName:i.currentCalendar.name}),!(void 0===D.parseDate(t,n,a)&&""!==t)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(e,n){this.message=D.translate("UnavailableDate");var i=!0;if(""===e)return i;if(!t.rules.date.check(e,n))return i=!1,this.message="",i;var a,s,r,o,l=n.data("datepicker"),c=l?l.settings:{},d=Object.keys(c).length>0,h=e;if("string"==typeof h){var u="locale"!==c.dateFormat?c.dateFormat:D.calendar().dateFormat.short;if(c.showTime){var p=c.timeFormat||D.calendar().timeFormat;u+=" ".concat(p)}l&&l.isIslamic&&(u={pattern:l.pattern,locale:l.locale.name}),h=D.parseDate(h,u)}l&&l.isIslamic&&h instanceof Date&&(h=D.umalquraToGregorian(h.getFullYear(),h.getMonth(),h.getDate()));var f=c.useUTC?D.dateToUTC(h):h;if(f instanceof Array)return i;if(f&&d)for(r=c.useUTC?D.dateToUTC(new Date(c.disable.minDate)).setHours(0,0,0,0):new Date(c.disable.minDate).setHours(0,0,0,0),o=c.useUTC?D.dateToUTC(new Date(c.disable.maxDate)).setHours(0,0,0,0):new Date(c.disable.maxDate).setHours(0,0,0,0),-1!==c.disable.dayOfWeek.indexOf(f.getDay())&&(i=!1),((f=f.setHours(0,0,0,0))<=r||f>=o)&&(i=!1),c.disable.dates.length&&"string"==typeof c.disable.dates&&(c.disable.dates=[c.disable.dates]),a=0,s=c.disable.dates.length;a<s;a++)if(f===(c.useUTC?D.dateToUTC(c.disable.dates[a]):new Date(c.disable.dates[a])).setHours(0,0,0,0)){i=!1;break}return d&&(i=!!(i&&!c.disable.isEnable||!i&&c.disable.isEnable)),i},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(e,n){var i=this;this.message=D.translate("rangeDate");var a=!0,s=n.data("datepicker");if(s){var r=e.split(s.settings.range.separator),o=function(e,s){n.val(s),i.message="".concat(t.rules[e].message," (").concat(s,")"),t.rules[e].check(s,n)||(a=!1)};if(e.indexOf(s.pattern)>-1){if(1===r.length)o("date",r[0]);else if(2===r.length){var l=r[0]===s.pattern?1:0;o("date",r[l]),a&&o("availableDate",r[l])}}else 1===r.length?(o("date",r[0]),a&&o("availableDate",r[0])):2===r.length&&(o("date",r[0]),a&&o("date",r[1]),a&&o("availableDate",r[0]),a&&o("availableDate",r[1]))}return n.val(e),a},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){return this.message=D.translate("EmailValidation"),!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(e,n){var i=n.closest(".signin").find('button[type="submit"]');return e.length&&(t.rules.email.check(e)||t.rules.passwordConfirm.check(e,n))?i.enable():i.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(e,n){if($.trim(e).length&&!n.is("[readonly]")){t.rules.emailPositive.positive=!0,this.message=D.translate("EmailValidation");var i=t.rules.email.check(e,n);return i&&(this.message=""),i}return t.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){return this.message=D.translate("PasswordValidation"),!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(e,n){this.message=D.translate("PasswordConfirmValidation");var i=$('input[type="password"]:not('.concat(n.attr("id"),")"),n.closest(".signin")).eq(0).val(),a=e===i&&t.rules.passwordReq.check(i);return!e.length||a},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,e){t=t.replace(/ /g,""),this.message=D.translate("InvalidTime");var n=e&&e.data("timepicker"),i=n?e.data("timepicker").settings:{},a=i&&i.timeFormat?i.timeFormat:D.calendar().timeFormat;if(e.attr("data-options")&&i&&!i.timeFormat){var s=JSON.parse(e.attr("data-options"));s.patternOptions&&s.patternOptions.format&&(a=s.patternOptions.format)}var r,o=(a.match("HH")||a.match("H")||[]).length>0,l=o?24:12,c=t.indexOf(D.calendar().dateFormat.timeSeparator),d=0,h=0,u=0;if(""===t)return!0;if(d=parseInt(t.substring(0,c),10),h=parseInt(t.substring(c+1,c+3),10),n&&(d=(r=n.getTimeFromField()).hours,h=r.minutes,n.hasSeconds()&&(u=r.seconds)),d.toString().length<1||isNaN(d)||parseInt(d,10)<0||parseInt(d,10)>l)return!1;if(h.toString().length<1||isNaN(h)||parseInt(h,10)<0||parseInt(h,10)>59)return!1;if(u.toString().length<1||isNaN(u)||parseInt(u,10)<0||parseInt(u,10)>59)return!1;if(!o){if(parseInt(d,10)<1)return!1;var p=new RegExp(D.calendar().dayPeriods[0],"i"),f=new RegExp(D.calendar().dayPeriods[1],"i");if(0===(t.match(p)||t.match(f)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return"1"===t},message:"Value is not valid (test).",type:"error",id:"test"}}},fn={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function gn(t,e){this.element=$(t),this.settings=b.mergeSettings(t,e,fn),this.init()}gn.prototype={init:function(){this.show()},show:function(){var t=this,e=this.settings,n=parseFloat(x.convertDelayToFPS(e.timeout)),i=e.allowLink?o.stripTags(e.message,"<a><br><p>"):o.stripHTML(e.message),a=!1,s=100;this.uniqueId=e.uniqueid?this.generateUniqueId("usersettings-position"):"";var r=$("#toast-container".concat(this.uniqueId)),l=$('\n      <div class="toast">\n        <span class="toast-title">'.concat(o.stripHTML(e.title),'</span>\n        <span class="toast-message">').concat(i,"</span>\n      </div>")),c=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(D.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(D.translate("Close"),"</span>\n      </button>\n    ")),d=$('<div class="toast-progress"></div>');r.length||(r=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container" aria-relevant="additions" aria-live="polite"></div>')).appendTo("body")),r.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(e.position.replace(" ","-"))),e.timeout=e.audibleOnly?100:e.timeout,e.progressBar&&l.append(d);var h=new F({duration:x.convertDelayToFPS(e.timeout),timeoutCallback:function(){t.remove(l)},updateCallback:function(t){s=(t.duration-t.elapsedTime)/n*100,D.isRTL()&&(s=100-s),e.progressBar&&(d[0].style.width="".concat(s,"%"))}});H.register(h),r.append(l),l.addClass(e.audibleOnly?"audible":"effect-scale"),l.append(c),t.createDraggable(l,r),$(document).on("keydown.toast keyup.toast",(function(t){(t=t||window.event).ctrlKey&&t.altKey&&80===t.keyCode&&h[(a="keydown"===t.type)?"pause":"resume"]()})),l.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",(function(t){a=!!/mousedown|touchstart/i.test(t.type),h[a?"pause":"resume"]()})),c.on("click.toast",(function(){h.destroy(),t.remove(l)}))},createDraggable:function(t,e){var n=this;if(this.settings.draggable&&t[0]&&e[0]){var i=u.features.touch,a=e.parent();e.css({top:"",left:"",right:""});var s=e[0].getBoundingClientRect(),r=this.restorePosition(),o=s;r&&((o={top:r.top,left:r.left,width:t.outerWidth(),height:t.outerHeight()}).right=o.left+o.width,o.bottom=o.top+o.height,this.isPosInViewport(o)||(o=s));var l={top:"".concat(o.top,"px"),left:"".concat(o.left,"px")};e.is(".toast-bottom-right, .toast-top-right")&&(l.right="auto"),e.css(l),e.addClass("is-draggable"),t.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",(function(t){i||t.preventDefault(),$(t.target).is("a, .btn-close")||e.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",(function(){t.stopImmediatePropagation(),e.attr("aria-grabbed","true"),a.attr("aria-dropeffect","move")})).off("dragend.toast").on("dragend.toast",(function(){e.removeAttr("aria-grabbed"),a.removeAttr("aria-dropeffect"),n.savePosition({left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))});var t=e.data("drag");t&&"function"==typeof t.destroy&&t.destroy()}))}));var c=function(t){var e=t.dragApi.getElementsFromPoint(t.x,t.y)[0];return!$(e).closest(".toast").length},d=function(t){var e=$.Event("keyup");$.extend(e,{ctrlKey:!0,altKey:!0,keyCode:80}),t.trigger(e)},h=$(document);h.off("mouseup.toast").on("mouseup.toast",(function(t){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var i=e.data("drag");i&&"function"==typeof i.getElementsFromPoint&&c({dragApi:i,x:t.pageX,y:t.pageY})&&d(h)}})).off("touchend.toast").on("touchend.toast",(function(t){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var i=e.data("drag");if(i&&"function"==typeof i.getElementsFromPoint){var a=t.originalEvent;if(a.targetTouches.length>1)return;var s=a.changedTouches[0];c({dragApi:i,x:s.pageX,y:s.pageY})&&d(h)}}}))}},savePosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(t)&&(localStorage[this.uniqueId]=JSON.stringify(t),this.element.triggerHandler("settingschanged",[t]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var t=localStorage[this.uniqueId];return t?JSON.parse(t):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},generateUniqueId:function(t){return t=null==t?"":t,"toast-".concat(this.settings.uniqueid||"","-").concat(t).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(t){return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(t){return t.closest(".toast-container").off("dragstart.toast dragend.toast"),t.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),t.find(".btn-close").off("click.toast"),this},remove:function(t){var e=this,n=function(){t.remove(),!$("#toast-container".concat(e.uniqueId," .toast")).length&&e.destroy()};if(this.unbind(t),this.settings.audibleOnly)n();else{t.addClass("effect-scale-hide");var i=new F({duration:20,updateCallback:function(){},timeoutCallback:function(){n()}});H.register(i)}},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,fn)),this.show()},destroy:function(){var t=this,e=$("#toast-container".concat(this.uniqueId));e[0]&&[].slice.call(e[0].querySelectorAll(".toast")).forEach((function(e){t.settings.audibleOnly=!0,t.remove($(e))})),$(document).off("keydown.toast keyup.toast mouseup.toast touchend.toast"),e.remove(),delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(t){return this.each((function(){var e=$.data(this,"toast");e?e.updated(t):e=$.data(this,"toast",new gn(this,t))}))};var mn={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function vn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,mn),this.init()}vn.prototype={init:function(){this.fields="input, textarea, select, div[data-validate], div[data-validation]",this.isPlaceholderSupport=!!("placeholder"in document.createElement("input")),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(t){if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===n(t)){var e="";for(var i in t)-1===e.indexOf(t[i])&&(e+="".concat(t[i]," "));t=e=e.split(" ").join(".validate ")}return t},filterValidations:function(t,e){var i=[];if(!t)return[];if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===n(t))for(var a in t)e&&t[a].indexOf(e)>-1&&i.push(a);return i},setErrorIconOpacity:function(t){if(t.is(":text")&&t.is('[data-error-type="tooltip"]')){var e=this.calculateTextWidth(t.val()),n=t.outerWidth()-35;t.closest(".field, .field-short").find(".icon-error")[e>n?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");return n.font=e||"14px arial",n.measureText(t).width},attachEvents:function(){var t=this,e="[data-validate],[data-validation]";this.inputs.each((function(){var t=$(this),e=t.attr("data-validate")||t.attr("data-validation");e&&e.indexOf("required")>-1&&t.addClass("required")})),this.inputs.filter("input, textarea, div").filter(e).not("input[type=file]").each((function(){var e=$(this),n=e.attr("data-validation-events"),i=t.extractEvents(n||"blur.validate change.validate keyup.validate");i.indexOf("enter.validate")>-1&&e.off("keypress.enter.validate").on("keypress.enter.validate",(function(e){var n=$(this);13===e.which&&t.validate(n,!0,e)})),e.off(i).on(i,(function(n){if("keyup"===n.type){if(9===n.keyCode)return;t.setErrorIconOpacity(e)}var i=$(this),a=i.data("handleEvent".concat([n.type||""]));i.is("[readonly]")&&!i.parent().is(".field-fileupload")||a&&a.type===n.type&&"validate"===n.handleObj.namespace&&!i.closest(".modal:visible").length||(i.data("handleEvent".concat([n.type||""]),n.handleObj),setTimeout((function(){i.closest(".modal-engaged").length&&!i.closest(".modal-body").length||t.validate(e,!0,n)}),300))}))})),this.inputs.filter("input[type=checkbox]").filter(e).off("click.validate").on("click.validate",(function(e){t.validate($(this),!0,e)})),this.inputs.filter(":radio").off("click.validate").on("click.validate",(function(e){var n=$(this).parent().find(".radio").first();t.validate(n,!0,e)}));var n=this.inputs.filter("select").filter(e);n.length&&(n.off("change.validate listopened.validate listclosed.validate").on("change.validate",(function(e){t.validate($(this),!0,e)})).on("listopened.validate",(function(){var t=$(this),e=t.data("tooltip");e&&document.activeElement===t.data("dropdown").searchInput[0]&&e.hide(),$("#validation-tooltip").hide()})).on("listclosed.validate",(function(){var t=$(this),e=t.data("tooltip"),n=t.data("dropdown");u.features.touch&&(n.pseudoElem.focus(),setTimeout((function(){n.pseudoElem.blur()}),100)),n&&n.wrapper&&(e=n.wrapper.find(".icon-error").data("tooltip")),e&&document.activeElement!==t.data("dropdown").searchInput[0]&&e.show()})),n.filter((function(){return void 0!==$(this).data("dropdown")})).each((function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",(function(e){var n=$(this).closest(".field, .field-short").find("select");t.validate(n,!0,e)}))}))),this.element.is("form")&&this.element.attr("data-validate-on")&&this.element.off("submit.validate").on("submit.validate",(function e(n){n.stopPropagation(),n.preventDefault(),t.validateForm((function(n){t.element.off("submit.validate"),t.element.triggerHandler("validated",n),t.element.data("isValid",n),t.element.on("submit.validate",e)}))}))},validateForm:function(t){var e,n=this,i=[];n.inputs=this.element.find(n.fields),n.inputs.each((function(t){var e=$(this);if(e.attr("data-validate")){if("true"===e.attr("data-disable-validation")||e.hasClass("disable-validation"))return;for(var a=n.validate(e,!1,t),s=0;s<a.length;s++)i.push(a[s])}})),(e=$).when.apply(e,i).then((function(){t(!0)}),(function(){t(!1)}))},setPrimaryBtn:function(t,e){var n=t.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),i=!0;n.length>0&&n.each((function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var e=null!==t[0].offsetParent;t.is(".required")&&(e&&t.is(".editor")&&!t.html()&&(i=!1),!e&&!t.is("select, :checkbox")||t.val()||t.is(".editor")||(i=!1)),!e&&!t.is("select, :checkbox")||t.isValid()||(i=!1)}})),i?e.removeAttr("disabled"):e.attr("disabled","disabled")},value:function(t){return t.is("input[type=checkbox]")?t.prop("checked"):t.is("div")?t[0].innerHTML:t.val()},getTypes:function(t,e){var n,i=this.filterValidations(t.attr("data-validation-events"),e.type);return n=t.is("input.dropdown")&&t.prev().prev("select").attr("data-validate")?t.prev().prev("select").attr("data-validate").split(" "):t.is("input.dropdown")&&t.prev().prev("select").attr("data-validation")?t.prev().prev("select").attr("data-validation").split(" "):t.attr("data-validation")?t.attr("data-validation").split(" "):t.attr("data-validate")?t.attr("data-validate").split(" "):[],i.length>0&&(n=n.filter((function(t){return-1!==i.indexOf(t)}))),"keyup"===e.type&&(n=n.filter((function(t){return"date"!==t&&"time"!==t}))),n},setIconOnParent:function(t,e){var n,i,a,s=$.createIcon({classes:["icon-".concat(e)],icon:"".concat(e,"-alert")}),r=t.closest(".tab-panel, .expandable-pane"),o=t.closest(".row.flex-align-bottom"),l=r.attr("id"),c=t.closest(".tab-container, .tab-panel-container, .expandable-area");if(o&&o.length&&($(".".concat(e),o).length?o.addClass("has-messages"):o.removeClass("has-messages")),c.is(".tab-panel-container")&&(c=c.prev(".tab-container")),c.is(".tab-container"))(n=$('.tab-list a[href="#'.concat(l,'"]'),c).closest(".tab")).length?$(".count",n).length&&(n=$(".count",n)):(l=$('a[href="#'.concat(l,'"]'),".popupmenu").closest(".popupmenu").attr("id"),n=$('.tab-list .tab[aria-controls="'.concat(l,'"]'),c),i=l);else{if(!c.is(".expandable-area"))return;n=$('.expandable-header[aria-controls="'.concat(l,'"] .title'),c)}i&&i.length&&(a=r.add($($(i).attr("href"))),$('a[role="menuitem"]',"#".concat(i)).each((function(){a=a.add($($(this).attr("href")))})));var d=$('a[href="#'.concat(r.attr("id"),'"]'),"#".concat(l));r&&$(".".concat(e),r).length||a&&$(".".concat(e),a).length?($(".".concat(e),r).length||(d.removeClass("is-".concat(e)),$(".icon-".concat(e),d).remove()),$(".".concat(e),r).length&&$(".".concat(e),a).length&&!$(".icon-".concat(e),d).length&&d.addClass("is-".concat(e)).append(s),$(".icon-".concat(e),n).length||n.addClass("is-".concat(e)).append(s)):((n=n.add(d)).removeClass("is-".concat(e)),$(".icon-".concat(e),n).remove())},validate:function(t,e,n){if(t.data("handleEvent".concat([n.type||""]),null),"true"===t.attr("data-disable-validation")||t.hasClass("disable-validation")||t.is(":disabled"))return[];var i,a,s,r,o,l=this,c=l.getTypes(t,n)||[],d=[],h=[],u=l.value(t),p=t.attr("placeholder");function f(e,n,a,s){!1===(i=pn.rules[a]).positive&&l.removePositive(t);var r="tooltip"!==t.attr("data-".concat((o=pn.ValidationTypes[i.type]||pn.ValidationTypes.error).type,"-type"));if(e)0===$.grep(h,(function(t){return t===o.type})).length?(s.resolve(),i.positive&&(l.addMessage(t,i,r,n),l.removeMessage(t,i,!0),s.resolve(),l.addPositive(t))):o.errorsForm||s.resolve();else{if(!l.isPlaceholderSupport&&u===p&&i.message!==D.translate("Required"))return;l.addMessage(t,i,r,n),h.push(i.type),o.errorsForm?s.reject():s.resolve()}l.setIconOnParent(t,i.type);var c=l.getField(t).data("".concat(o.type,"message"));e&&c&&c.filter((function(t){return t.id===i.id||i.message})).length>0&&l.removeMessage(t,i,!0);var d=t.closest(".modal").find(".btn-modal-primary").not(".no-validation");d.length&&l.setPrimaryBtn(t.closest(".modal"),d);var f=t.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");f.length&&l.setPrimaryBtn(t.closest("#calendar-popup"),f),"error"===i.type&&t.closest("form").triggerHandler("aftervalidate",{field:t,rule:i,isValid:e})}for(s=0,r=c.length;s<r;s++)i=pn.rules[c[s]],a=$.Deferred(),i&&(i.async?i.check(u,t,f,a):f(i.check(u,t),e,c[s],a),d.push(a));return d},getField:function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},hasError:function(t){return this.getField(t).hasClass("error")},addMessage:function(t,e,n,i,a){if(!(""===e.message||t.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){a=a||!1;var s=this.getField(t),r=s.data("".concat(e.type,"message")),o=pn.ValidationTypes[e.type]||pn.ValidationTypes.error;if(a||s.addClass("icon"===e.type?"custom-icon":e.type),!(r&&r===e.message||r&&r.filter((function(t){return(t.id||t.message)===(e.id||e.message)&&t.message===e.message})).length>0)){var l=e.message;if(r){for(var c=0;c<r.length;c++)l="â¢ ".concat(r[c].message);l+="<br>â¢ ".concat(e.message)}r||(r=[]),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),(r=r.filter((function(t){return t.id!==e.id}))).push({id:e.id,message:e.message,type:e.type}),s.data("".concat(o.type,"message"),r),void 0!==$.fn.toast&&$("body").toast({title:D.translate(o.titleMessageID),audibleOnly:!0,message:l}),n?(t.data("isValid",!1),this.showInlineMessage(t,e,a)):this.showTooltipMessage(t,l,o.type,i)}}},showIcon:function(t,e){var n=this.getField(t).addClass("icon"===e?"custom-icon":e),i=$.createIconElement({classes:["icon-".concat(e)],icon:e}),a=n.closest(".field, .field-short"),s=t.parent();return 0===a.find("svg.icon-".concat(e)).length?(s.is(".editor-container")&&t.parent().addClass("is-error"),1===t.parent(":not(.editor-container)").find(".btn-actions").length?s.find(".btn-actions").before(i):1===s.find(".data-description").length?s.find(".data-description").before(i):1===s.find(".field-info").length?s.find(".field-info").before(i):t.is("textarea")?t.after(i):t.is(".dropdown, .multiselect")?s.find(".dropdown-wrapper").append(i):(t.is(".spinbox")||t.is(".lookup"),s.append(i)),$(".icon-success",a).remove()):i=a.find("svg.icon-error"),i},showTooltipMessage:function(t,e,n,i){if(!t.is(":radio")){var a=this.showIcon(t,n),s=t;if(t.is(".dropdown, .multiselect")&&void 0!==t.data("dropdown")){var r=t.data("dropdown").pseudoElem;s=r,r.addClass("icon"===n?"custom-icon":n)}t.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===n?"custom-icon":n);var o=a.data("tooltip");o?o.content=e:(a.tooltip({content:e,placement:"bottom",placementOpts:{callback:function(t){var e=s[0].getBoundingClientRect(),n=o.tooltip[0].getBoundingClientRect(),i=0;return $("html").is('[dir="rtl"]')?n.left<e.left&&(i+=e.left-n.left):n.right>e.right&&(i+=-1*(n.right-e.right)),t.setCoordinate("x",t.x+i),t.nudges||(t.nudges={}),t.nudges.x=i,t}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),o=a.data("tooltip")),t.on("focus.validate",(function(){o&&o.show()})).on("blur.validate",(function(){o&&o.hide()})),o&&t.attr("data-error-type","tooltip"),this.setErrorIconOpacity(t),i&&o&&o.show()}},toggleRadioMessage:function(t,e,n,i,a){var s,r,o=t.attr("name");o&&o.length&&(s=$(':radio[name="'.concat(o,'"], :radio[name="').concat(o,'"] + label')),r=t.parent().is(".inline")?$(':radio[name="'.concat(o,'"]:last')).parent():$(':radio[name="'.concat(o,'"]:last + label')),a?(s.addClass("icon"===n?"custom-icon":n),$(i).addClass("radio-group-".concat(n)).insertAfter(r)):(s.removeClass(n),r.next(".radio-group-".concat(n)).remove()))},showInlineMessage:function(t,e,n){n=n||!1;var i,a=this.getField(t),s=pn.ValidationTypes[e.type]||pn.ValidationTypes.error;e.icon=e.icon||s.icon;var r=W.currentTheme.id&&W.currentTheme.id.indexOf("uplift")>-1?"".concat(s.type,"-alert"):"".concat(s.type);i="icon"===e.type?""+'<div class="custom-icon-message" data-rule-id="'.concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:e.icon}),'\n          <pre class="audible">\n            ').concat(D.translate(s.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"):""+'<div class="'.concat(s.type,'-message" data-rule-id="').concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(s.type)],icon:r}),'\n          <pre class="audible">\n            ').concat(D.translate(s.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"),n||a.addClass("icon"===e.type?"custom-icon":e.type),t.is(":radio")?this.toggleRadioMessage(t,e.message,s.type,i,!0):(a.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===s.type?"custom-icon":s.type),a.closest(".field, .field-short").append(i),a.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===s.type?"custom-icon":s.type)),t.is(".spinbox")&&a.closest(".spinbox-wrapper").addClass("icon"===s.type?"custom-icon":s.type),"error"===s.type&&t.parent().find(".icon-success").remove(),t.triggerHandler(s.type,{field:t,message:e.message}),t.closest("form").triggerHandler(s.type,{field:t,message:e.message})},addPositive:function(t){var e=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",t.parent(".field, .field-short")).length||t.parent(".field, .field-short").append(e)},removeMessage:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getField(t),a=i.data("".concat(e.type,"message")),s=e.id||e.message;if(e&&("error"!==e.type||a)&&0!==a.filter((function(t){return t.id===s})).length){var r=a.filter((function(t){return t.id!==s})),o=0===r.length;if(o?i.removeData("".concat(e.type,"message")):i.data("".concat(e.type,"message"),r),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),o&&"error"===e.type&&n&&(t.triggerHandler("valid",{field:t,message:""}),t.closest("form").triggerHandler("valid",{field:t,message:""})),o&&(t.removeClass("".concat(e.type," custom-icon")).data("isValid",!0),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&(t.next().next().removeClass("".concat(e.type," custom-icon")),t.next().find("div.dropdown").removeClass("".concat(e.type," custom-icon"))),t.is(":radio")&&this.toggleRadioMessage(t,"",e.type,"",!1),t.hasClass("spinbox")&&t.closest(".spinbox-wrapper").removeClass("".concat(e.type," custom-icon")),t.hasClass("colorpicker")&&t.parent(".colorpicker-container").removeClass(e.type),t.closest(".field-fileupload").length>0&&t.closest(".field-fileupload").find("input.".concat(e.type)).removeClass(e.type),"tooltip"===t.attr("data-".concat(e.type,"-type")))){var l=t.closest(".field, .field-short").find(".icon-error"),c=l.data("tooltip");c&&c.destroy(),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),t.parent().find(".dropdown-wrapper > .icon-".concat(e.type)).off("click.validate").remove(),t.parent().find(".icon-".concat(e.type)).remove(),t.next(".icon-".concat(e.type)).off("click.validate").remove(),t.parent(".field, .field-short").find(".icon-".concat(e.type)).remove(),t.next(".inforCheckboxLabel").next(".icon-".concat(e.type)).remove()}}},removePositive:function(t){$(".icon-success",t.parent(".field, .field-short")).remove()},resetForm:function(t){var e=t.find("input, select, textarea");e.removeClass("error"),t.find(".error").removeClass("error"),t.find(".icon-error").remove(),t.find(".icon-success").remove(),t.find(".error-message").remove(),e.removeClass("alert"),t.find(".alert").removeClass("alert"),t.find(".icon-alert").remove(),t.find(".alert-message").remove(),e.removeClass("info"),t.find(".info").removeClass("info"),t.find(".icon-info").remove(),t.find(".info-message").remove(),setTimeout((function(){$("#validation-errors").addClass("is-hidden")}),300),e.data("isDirty",!1).removeClass("isDirty"),t.find(".isDirty").removeClass("isDirty"),t.is("form")&&t[0].reset();var n=$.fn.validation.ValidationTypes;Object.keys(n).forEach((function(t){e.removeData("".concat(t,"message"))}))},isFormValid:function(t){if($(t).find(".error-message").length>0)return!1;for(var e=$(t).find('[data-validate*="required"]'),n=0;n<e.length;n++){var i=$(e[n]),a=this.value(i);if((i.is(":visible")||i.is("select"))&&!a)return!1}return!0},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.init()}};var bn={type:"error",inline:!0};$.fn.validation=pn,$.fn.getMessage=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),n=$.fn.getField($(this)).data(e),i="";if(n){if(1===n.length)return n[0].message;for(var a=0;a<n.length;a++)i+="â¢ ".concat(n[a].message)}return i},$.fn.getMessages=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),n=$.fn.getField($(this)).data(e);return n||(n=[]),n},$.fn.getField=function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},$.fn.getErrorMessage=function(t){return M("$.fn.getMessage","$.fn.getErrorMessage"),t=b.extend({},t,bn),$(this).getMessage(t)},$.fn.scrollIntoView=function(t,e){"boolean"!=typeof t&&(t=void 0);var n=new vn(this,e).getField($(this));n[0].scrollIntoView(t),n.focus(),n.is("input.checkbox")&&(n=n.next(".checkbox-label"))[0]&&n[0].scrollIntoView(t)},$.fn.addMessage=function(t){return this.each((function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new vn(this,t)));var n={message:t.message,type:t.type,triggerEvents:t.triggerEvents,icon:t.icon,id:t.id||t.message},i=$(this);e.addMessage(i,n,t.inline,t.showTooltip,t.isAlert),e.setIconOnParent(i,t.type)}))},$.fn.addError=function(t){M("$.fn.addMessage","$.fn.addError");var e=!0;return"boolean"==typeof t.inline&&!1===t.inline&&(e=!1),(t=b.extend({},t,bn)).inline=e,this.each((function(){$(this).addMessage(t)}))},$.fn.removeMessage=function(t){return t||(t={type:"error"}),this.each((function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new vn(this,t)));var n=$(this),i="".concat(t.type,"message"),a=$.fn.getField(n).data(i);if(n.hasClass("error")&&"error"===t.type&&n.removeClass("error"),a){for(var s=0;s<a.length;s++)e.removeMessage(n,a[s],t.triggerEvents);e.setIconOnParent(n,t.type),$.removeData(this,"Validator")}}))},$.fn.removeError=function(t){return M("$.fn.removeMessage","$.fn.removeError"),t=b.extend({},t,bn),this.each((function(){return $(this).removeMessage(t)}))},$.fn.validate=function(t,e){var n="string"==typeof t;return this.each((function(){var i=$.data(this,"validate");if(i&&"string"!=typeof i){if(n)return void("function"==typeof i[t]&&i[t](e));i.updated(t)}else i=$.data(this,"validate",new vn(this,t))}))},$.fn.isValid=function(){var t=$(this).data("isValid");return null==t||t},$.fn.validateField=function(){var t=$(this),e=Soho.components.Validator.prototype;e&&e.validate&&e.validate(t,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var yn={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{dates:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,yearsAhead:5,yearsBack:4,legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1};function wn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,yn),this.init()}wn.prototype={init:function(){this.build(),this.handleEvents()},build:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.element.attr("autocomplete","off"),this.trigger=this.element.next().is("svg")?this.element.next():$.createIconElement("calendar").insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar()},setLocale:function(){var t=this,e=this.settings;this.locale=D.currentLocale,this.settings.language?(D.getLocale(this.settings.language),this.language=this.settings.language):this.language=D.currentLanguage.name,e.locale&&D.getLocale(e.locale).done((function(e){var n=t.getSimilarApi("locale",e);n.forEach((function(n){n.locale=D.cultures[e],n.language=t.settings.language||n.locale.language,n.setCurrentCalendar()})),0===n.length&&(t.locale=D.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar())})),e.language&&D.getLocale(e.language).done((function(){t.getSimilarApi("language",e.language).forEach((function(t){t.language=e.language}))}))},getSimilarApi:function(t,e){var n=[].slice.call(document.querySelectorAll(".datepicker")),i=[];return n.forEach((function(n){var a=$(n).data("datepicker");a&&a.settings[t]===e&&i.push(a)})),i},setCurrentCalendar:function(){this.currentCalendar=D.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.append('<span class="audible">'.concat(D.translate("PressDown",{locale:this.locale.name,language:this.language}),"</span>"))},handleKeys:function(t){var e=this,n=this.settings;if(t.is("#monthview-popup"))return t.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",(function(t){var n=!1,i=t.keyCode||t.charCode||0;return 9===i&&(e.containFocus(t),n=!0),27===i&&(e.closeCalendar(),e.element.focus(),t.stopImmediatePropagation(),n=!0),84===i&&(e.closeCalendar(),e.element.focus(),n=!0),!n||(t.stopPropagation(),t.preventDefault(),!1)})),void t.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",(function(t){return 9!==(t.keyCode||t.charCode||0)||(n.range.useRange&&$(t.target).is(".next")&&!n.range.selectWeek?e.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)}));t.off("keydown.datepicker").on("keydown.datepicker",(function(t){var n=!1,i=t.keyCode||t.charCode||0;return 40!==i||e.isOpen()||(n=!0,e.openCalendar(),setTimeout((function(){e.setFocusAfterOpen()}),200)),84===i&&(n=!0,e.setToday()),!n||(t.stopPropagation(),t.preventDefault(),!1)}))},containFocus:function(t){var e=t.shiftKey,n=this.popup.find(":focusable"),i=$(t.currentTarget);(i.is(".monthview-monthyear-pane, #btn-monthyear-pane")||i.closest(".is-monthyear.is-monthonly").length>0)&&(n=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var a=n.index($(":focus"));n.eq(a=e?a-1<0?n.length-1:a-1:a+1>=n.length?0:a+1).focus()},setFormat:function(){var t=this.settings,e="object"===n(D)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,i="object"===n(D)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===n(D)&&this.settings.calendarName&&(e=D.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,i=D.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===n(e)&&void 0!==e.short&&(e=e.short),"locale"===t.dateFormat?(this.pattern=e+(t.showTime?" ".concat(t.timeFormat||i):""),t.dateFormat=this.pattern):this.pattern=t.dateFormat+(t.showTime&&t.timeFormat?" ".concat(t.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){this.setFormat();var t=this.settings,e={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},n="date availableDate",i={date:"change blur enter",availableDate:"change blur"};t.range.useRange&&(e.process="rangeDate",e.patternOptions.delimeter=t.range.separator,n="rangeDate",i={rangeDate:"change blur"}),e.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(e),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":n,"data-validation-events":JSON.stringify(i)}).validate()),this.setPlaceholder()},setPlaceholder:function(){var t=this.settings,e=this.pattern;!t.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(t.range.useRange&&(e=t.range.first&&t.range.first.date?D.formatDate(t.range.first.date,{pattern:this.pattern,locale:this.locale.name})+t.range.separator+this.pattern:this.pattern+t.range.separator+this.pattern),this.element[0].setAttribute("placeholder",e))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},openCalendar:function(){var t,e=this,n=this,i=this.settings,a={};if(this.lastValue="string"==typeof this.currentDate?this.currentDate:null===(t=this.currentDate)||void 0===t||null==t?void 0:t.getTime(),!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var s='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(D.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),r=' <button type="button" class="is-select btn-primary">\n      '.concat(D.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?r+s:s+r,"\n      </div>")),i.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(D.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(D.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),i.hideButtons&&(this.footer=$("")),i.showTime&&(a.timeFormat=void 0===i.timeFormat?this.pattern.slice(this.pattern.indexOf(" ")).trim():i.timeFormat,void 0!==i.minuteInterval&&(a.minuteInterval=i.minuteInterval),void 0!==i.secondInterval&&(a.secondInterval=i.minuteInterval),void 0!==i.mode&&(a.mode=i.mode),void 0!==i.roundToInterval&&(a.roundToInterval=i.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var o=this.settings.timeFormat?this.settings.timeFormat:null;o||(o=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),a.parentElement=this.timepickerContainer,a.locale=this.settings.locale,a.language=this.settings.language,this.time=D.formatDate(this.currentDate,{pattern:o,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(a).data("timepicker"),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",(function(){e.currentDate=e.setTime(e.currentDate),e.setValue(e.currentDate,!0,!0)})),setTimeout((function(){e.timepicker.initValues=e.timepicker.getTimeFromField(e.time),e.timepicker.afterShow(e.timepickerContainer)}),1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=D.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.month=this.currentMonth,this.settings.year=this.currentYear,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?D.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.settings.month=this.settings.activeDate.getMonth(),this.settings.year=this.settings.activeDate.getFullYear(),this.isIslamic&&(this.settings.activeDateIslamic=D.gregorianToUmalqura(this.settings.activeDate))):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentIslamicDate||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(t,i){if(e.currentDate=new Date(i.year,i.month,i.day),n.settings.range.useRange&&n.settings.range.first&&n.settings.range.selectWeek){var a=Pe.firstDayOfWeek(new Date,e.settings.firstDayOfWeek),s=Pe.lastDayOfWeek(new Date,e.settings.firstDayOfWeek);return n.settings.range.first={},n.settings.range.second=void 0,n.setWeekRange({day:a.getDate(),month:a.getMonth(),year:a.getFullYear()},{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()}),n.closeCalendar(),void n.element.focus()}n.settings.range.useRange&&n.settings.range.first&&!n.settings.range.selectWeek||(n.insertDate(e.currentDate),i.close&&(n.closeCalendar(),n.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(t){return 37!==t.key&&39!==t.key&&38!==t.key&&40!==t.key&&13!==t.key}),this.settings.language||(this.settings.language=this.language),this.calendarAPI=new Oe(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,i.showTime&&this.calendar.addClass("is-timepicker"),i.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==i.dateFormat&&"MMM"!==i.dateFormat&&"MM"!==i.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===i.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(i.showTime?this.timepickerContainer:"",this.footer);var l=this.element,c=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(c="center",l=this.element.next(".icon")),this.trigger.popover({content:this.calendar,placementOpts:{parent:l,parentXAlignment:c,strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1}).off("show.datepicker").on("show.datepicker",(function(){if(window.innerHeight<400&&e.popupClosestScrollable&&(e.popup.find(".arrow").hide(),e.popup.css({"min-height":$("html").hasClass("theme-uplift-light")?"":"".concat(e.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),e.popupClosestScrollable.css("min-height","375px")),i.range.useRange&&i.range.first&&i.range.first.date&&i.range.second&&i.range.second.date&&e.popup.addClass("is-hidden"),e.settings.hideButtons&&e.popup.addClass("hide-buttons"),e.settings.showMonthYearPicker&&(e.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),e.popup.find(".btn-monthyear-pane").button()),e.settings.range.selectWeek){var t=e.popup.find("tbody");e.popup.find(".monthview-table tr").hover((function(e){var n=$(e.currentTarget);t.find("td").removeClass("is-selected range-selection end-date"),n.find("td").addClass("range-selection")}))}})).off("hide.datepicker").on("hide.datepicker",(function(){e.popupClosestScrollable.add(e.popup).css("min-height",""),e.closeCalendar()})),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentIslamicDate=this.currentIslamicDate,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",(function(){var t=$(this);if(t.hasClass("is-disabled"))n.calendarAPI.activeTabindex(t,!0);else{if(!i.range.useRange||i.range.first&&!i.range.second||i.range.selectWeek||n.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),i.range.useRange&&i.range.selectWeek){var e=n.calendarAPI.getCellDate(n.calendar.find("td.range-selection").first()),a=n.calendarAPI.getCellDate(n.calendar.find("td.range-selection").last());return void n.setWeekRange(e,a)}i.range.useRange||n.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var s=$(this);s.addClass("is-selected".concat(i.range.useRange?" range":"")).attr("aria-selected","true"),n.insertSelectedDate(s),i.range.useRange?n.isFocusAfterClose=!0:(n.closeCalendar(),n.element.focus())}})),this.footer.off("click.datepicker").on("click.datepicker","button",(function(t){var e=$(this);if(e.hasClass("is-cancel")&&(n.settings.isMonthPicker||(n.element.val("").trigger("change").trigger("input"),n.currentDate=null,n.clearRangeDates()),n.closeCalendar()),e.hasClass("is-cancel-month-pane")&&n.calendarAPI.monthYearPane.data("expandablearea").close(),e.hasClass("is-select-month")||e.hasClass("is-select-month-pane")){var a=parseInt(n.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),s=parseInt(n.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);n.currentDate=new Date(a,s,1),n.isIslamic&&(n.currentDateIslamic[0]=a,n.currentDateIslamic[1]=s,n.currentDateIslamic[2]=1,n.currentYear=a,n.currentMonth=s,n.currentDay=1,n.currentDate=D.umalquraToGregorian(a,s,1)),i.range.useRange?n.isFocusAfterClose=!1:e.hasClass("is-select-month")&&(n.insertDate(n.isIslamic?n.currentDateIslamic:n.currentDate),n.closeCalendar()),e.hasClass("is-select-month-pane")&&n.calendarAPI.showMonth(s,a)}if(e.hasClass("is-select")){var r=n.calendarAPI.setRangeSelByClick();if(1===r)n.closeCalendar();else if(2===r)n.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]),n.closeCalendar();else{if(3===r)return void t.preventDefault();n.insertSelectedDate(),n.closeCalendar()}}n.element.focus(),t.preventDefault(),e.hasClass("is-select-month-pane")&&n.calendarAPI.monthYearPane.data("expandablearea").close()})),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today",(function(t){t.preventDefault(),i.range.useRange?(n.setToday(!0),(!i.range.second||i.range.second&&!i.range.second.date)&&t.preventDefault()):(n.setToday(),n.closeCalendar())})),setTimeout((function(){n.calendarAPI.validatePrevNext(),n.setFocusAfterOpen()}),50)}},clearRangeDates:function(){var t=this.settings;t.range.useRange&&(t.range.start=yn.range.start,t.range.end=yn.range.end,t.range.data&&delete t.range.data)},insertSelectedDate:function(t){var e=this.calendarAPI.getCellDate(t||this.calendar.find("td.is-selected").last()),n=e.day,i=e.month,a=e.year;this.currentDate=new Date(a,i,n),this.isIslamic&&(this.currentDateIslamic[0]=a,this.currentDateIslamic[1]=i,this.currentDateIslamic[2]=n,this.currentYear=a,this.currentMonth=i,this.currentDay=n,this.currentDate=D.umalquraToGregorian(a,i,n)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function(t,e){var n=this.settings;n.range.first.date=new Date(t.year,t.month,t.day),n.range.second=void 0,this.setValue(new Date(e.year,e.month,e.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){return P(this.closeCalendar,this.close).apply(this)},closeCalendar:function(){var t=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:t}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var e=this.trigger.data("tooltip");e&&e.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var t=this.settings;if(this.calendar){if(t.range.useRange&&(t.range.first&&t.range.first.label&&(!t.range.second||t.range.second&&!t.range.second.date)&&this.setRangeFirstPart(t.range.first.date),this.calendarAPI.setRangeSelected(),t.range.second&&t.range.first.date&&t.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,t.range.useRange&&t.range.selectWeek){var e=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void e.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(t){var e=this.settings,n=function(t){return new Date(t.year,t.month,t.day)},i=this.calendarAPI.days.find("td:visible:first"),a=this.calendarAPI.days.find("td:visible:last"),s=D.formatDate(t,{date:"full",locale:this.locale.name}),r=this.calendarAPI.days.find('[aria-label="'.concat(s,'"]')),o=r.closest("tr");this.currentDate=t,e.range.first={date:t,label:s,cell:r,row:o,rowIdx:o.index(),cellIdx:r.index()},e.range.extra={minCell:i,maxCell:a,min:n(this.calendarAPI.getCellDate(i)),max:n(this.calendarAPI.getCellDate(a)),cellLength:o.children("td").length},this.calendarAPI.settings.range.first=e.range.first,this.calendarAPI.settings.range.extra=e.range.extra},insertDate:function(t,e){var n=this.settings,i=t instanceof Array?t[0]:t.getFullYear(),a=t instanceof Array?t[1]:t.getMonth(),s=(t instanceof Array?t[2]:t.getDate()).toString();if(this.calendarAPI.currentMonth===a&&this.calendarAPI.currentYear===i||this.calendarAPI.showMonth(a,i),this.isOpen()){var r=this.calendarAPI.days.find("td:not(.alternate)").filter((function(){return $(this).text().toLowerCase()===s}));r.hasClass("is-disabled")||(this.settings.showTime&&(e?(this.time=D.formatDate(t,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),t=this.setTime(t))):t=this.setTime(t)),this.setValue(t,!0),n.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),r.addClass("is-selected".concat(n.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(r,!0)}},setValue:function(t,e,n){var i,a=this.settings;this.currentDate=t,t instanceof Array&&(this.currentIslamicDate=t,this.currentDate=D.umalquraToGregorian(t[0],t[1],t[2])),a.range.useRange?n||this.setRangeToElem(t,!1):this.element.val(D.formatDate(t,{pattern:this.pattern,locale:this.locale.name}));var s="string"==typeof this.currentDate?this.currentDate:null===(i=this.currentDate)||void 0===i||null==i?void 0:i.getTime(),r=this.lastValue!==s;this.lastValue=s,e&&r&&(a.range.useRange?n||this.element.trigger("change",[a.range.data]).trigger("input",[a.range.data]):this.element.trigger("change").trigger("input"))},setRangeToElem:function(t,e){var n=this,i=this.settings,a=function(t){return D.formatDate(t,{pattern:n.pattern,locale:n.locale.name})},s=a(t),r=!1;if(this.isOpen()){var o=function(t){return D.formatDate(t,{date:"full",locale:n.locale.name})}(t),l=this.calendarAPI.days.find('[aria-label="'.concat(o,'"]')),c=l.closest("tr");i.range.second&&(i.range.second.date?this.resetRange({cell:l}):(delete i.range.second.date,$.isEmptyObject(i.range.second)&&delete i.range.second));var d={};i.range.first&&(d.date=t.getTime(),d.firstdate=i.range.first.date.getTime(),d.min=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.minDays),d.max=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.maxDays)),!i.range.first||e?(this.setRangeFirstPart(t),s=this.getRangeValue(),this.setPlaceholder()):!i.range.second&&i.range.selectBackward&&d.date>d.firstdate||i.range.selectForward&&d.date<d.firstdate||i.range.maxDays>0&&d.date>d.max.aftertime||d.date<d.max.beforetime?(this.resetRange({cell:l}),this.setRangeFirstPart(t),s=this.getRangeValue(),this.setPlaceholder()):(r=!0,this.currentDate=t,i.range.minDays>0&&(d.date>=d.firstdate&&d.date<d.min.aftertime?(t=d.min.after,d.date===d.firstdate&&(d.date=t.getTime())):d.date<d.firstdate&&d.date>d.min.beforetime&&(t=d.min.before),c=(l=this.calendarAPI.days.find('[aria-label="'.concat(o,'"]'))).closest("tr")),d.date>d.firstdate?i.range.second={date:t,label:o,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}:(i.range.second=i.range.first,i.range.first={date:t,label:o,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}),s=this.getRangeValue())}else if(!e){r=!0;var h=t||new Date;this.currentMonth=h.getMonth(),this.currentYear=h.getFullYear(),this.currentDay=h.getDate(),this.currentDate=h,i.range.first=i.range.first||{},i.range.second=i.range.second||{},i.range.first.date=h,i.range.second.date=h,s=this.getRangeValue()}this.element.val(s),r?(i.range.data={value:s,dates:this.calendarAPI?this.calendarAPI.getDateRange(i.range.first.date,i.range.second.date):[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date),endDate:i.range.second.date,end:a(i.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):i.range.data={value:s,dates:[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date)}},resetRange:function(t){t=t||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,t.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,t.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),t.cell&&t.cell.addClass("is-selected"))},setRangeValueFromField:function(){var t,e=this,n=function(t){return D.formatDate(t,{pattern:e.pattern,locale:e.locale.name})},i=function(t){return D.parseDate(t,{pattern:e.pattern,locale:e.locale.name},!1)},a=function(t){return t&&"function"==typeof t.getTime?t.getTime():(new Date).getTime()},s=function(t){var e=i(t[0]),n=i(t[1]);return e&&n?(e=a(e))>(n=a(n))?[t[1],t[0]]:[t[0],t[1]]:t},r=this.settings,o={};if(o.value=r.range.value||this.element.val().trim(),o.isEmpty=""===o.value,!o.isEmpty&&o.value.indexOf(r.range.separator)>-1?o.dates=s(o.value.split(r.range.separator)):!o.isEmpty&&o.value.indexOf(r.range.separator.slice(0,-1))>-1?o.dates=o.value.split(r.range.separator.slice(0,-1)):o.isEmpty||-1!==o.value.indexOf(r.range.separator)||(o.dates=[n(o.value)]),!r.range.data&&r.range.start&&r.range.end&&o.isEmpty&&(t=s("string"==typeof r.range.start&&"string"==typeof r.range.end?[r.range.start,r.range.end]:"string"!=typeof r.range.start&&"string"==typeof r.range.end?[n(r.range.start),r.range.end]:"string"==typeof r.range.start&&"string"!=typeof r.range.end?[r.range.start,n(r.range.end)]:[n(r.range.start),n(r.range.end)]),r.range.start=n(t[0]),r.range.end=n(t[1])),r.range.first=r.range.first||{},r.range.second=r.range.second||{},r.range.data&&r.range.data.startDate?r.range.first.date=r.range.data.startDate:r.range.start&&"string"==typeof r.range.start?r.range.first.date=i(r.range.start):o.dates&&(r.range.first.date=i(o.dates[0])),r.range.data&&r.range.data.endDate?r.range.second.date=r.range.data.endDate:r.range.end&&"string"==typeof r.range.end?r.range.second.date=i(r.range.end):o.dates&&(r.range.second.date=i(o.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!o.isEmpty&&(o.isEmpty||r.range.data))return!1;var l=n(r.range.first.date);return l&&this.element.val(l),!0},setValueFromField:function(){var t=this,e=this.settings;if(this.setCurrentCalendar(),e.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),e.range.useRange&&(""!==this.element.val().trim()||e.range.start&&e.range.end||e.range.data&&e.range.data.startDate&&e.range.data.endDate)&&!this.setRangeValueFromField())this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());else{var n=this.element.val(),i=n;if(this.isIslamic&&n){var a=D.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});a instanceof Date?i=D.umalquraToGregorian(a.getFullYear(),a.getMonth(),a.getDate()):a instanceof Array&&(i=D.umalquraToGregorian(a[0],a[1],a[2]))}var s=function(){var e=(new Date).getDate();if(t.calendarAPI){var n=t.calendarAPI.dayMap.filter((function(t){return t.elem.is(".is-selected")}));n.length&&(e=parseInt(n[0].key.substr(6),10))}return e}();this.currentDate=i||new Date,"string"==typeof this.currentDate&&(this.currentDate=D.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(s)),void 0===this.currentDate&&(this.currentDate=D.parseDate(i,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=D.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2],this.currentIslamicDate=this.currentDateIslamic):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var r=this.pattern,o=!("MMMM d"===r||"yyyy"===r||"MMMM"===r),l=this.element.val().trim();if(""!==l&&!e.range.useRange){var c=D.parseDate(l,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},o),d=c?c.getHours():0;c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&c.setHours(d+12),this.pattern&&-1===this.pattern.indexOf("d")&&c.setDate(s),void 0===c||""===this.element.val().trim()||e.range.useRange||this.setValue(c)}e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&(e.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))}},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},setToday:function(t){var e=this.settings;if(this.currentDate=new Date,this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var n=D.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=n}var i=this.isIslamic?this.currentDateIslamic:this.currentDate;if(this.isOpen())if(e.range.useRange)if(!e.range.first||e.range.first&&!e.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(i,!0),t&&this.calendarAPI){var a=this.calendarAPI.dayMap.filter((function(t){return t.elem.is(".is-selected")}));a&&a.length&&setTimeout((function(){a[0].elem.focus()}),0)}}else e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date)?this.setRangeToElem(i,!1):e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(i,!0));else this.insertDate(i,!0);else{if(e.range.useRange)this.setRangeToElem(this.currentDate);else{var s=D.formatDate(i,{pattern:this.pattern,locale:this.locale.name});this.element.val(s)}e.range.useRange?this.element.trigger("change",[e.range.data]).trigger("input",[e.range.data]):this.element.trigger("change").trigger("input")}},setTime:function(t){if(!this.timepicker||void 0===this.popup)return this.settings.useCurrentTime||t.setHours(0,0,0,0),t;var e=this.popup.find(".dropdown.hours").val(),n=this.popup.find(".dropdown.minutes").val(),i=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,a=this.popup.find(".dropdown.period"),s=a.val();return e=a.length&&s===this.currentCalendar.dayPeriods[1]&&e<12?parseInt(e,10)+12:e,e=!a.length||s!==this.currentCalendar.dayPeriods[0]&&s||12!==parseInt(e,10)?e:0,(t=new Date(t)).setHours(e,n,i),t},getCurrentDate:function(){return this.currentDate},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,yn)),this.teardown().init()},getRangeValue:function(){var t=this,e=this.settings,n=function(e){return D.formatDate(e,{pattern:t.pattern,locale:t.locale.name})};return e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date?"".concat(n(e.range.first.date)+e.range.separator+n(e.range.second.date)):e.range.useRange&&e.range.first&&e.range.first.date?e.placeholder?"".concat(n(e.range.first.date)+e.range.separator+this.pattern):n(e.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var t=this.element.data("mask");return t&&t.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function(){var t=this,e=this,n=this.settings;if(this.trigger.on("click.datepicker",(function(){e.isOpen()?e.closeCalendar():e.openCalendar()})),this.handleKeys(this.element),e.element.on("blur.datepicker",(function(){var e;t.lastValue=null===(e=t.currentDate)||void 0===e||null==e?void 0:e.getTime,""!==t.element.val().trim()&&t.setValueFromField()})),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",(function(){t.isOpen()||""!==t.element.val().trim()||e.clearRangeDates()})),!this.isOpen()&&n.range.useRange&&!n.range.first){this.setRangeValueFromField();var i=this.getRangeValue();i&&this.element.val(i)}}},$.fn.datepicker=function(t){return this.each((function(){var e=$.data(this,"datepicker");e?e.updated(t):e=$.data(this,"datepicker",new wn(this,t))}))};var xn=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function Cn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;if(!t||"string"!=typeof t||!e.length)throw new Error('"id" property must be defined and unique.');if(this.id=t,!e||"string"!=typeof e||!e.length)throw new Error('"displayName" property must be defined.');return this.displayName=e,n=n.toLowerCase(),-1===xn.indexOf(n)&&(n="p"),this.tagName=n,"string"==typeof i&&i.length&&(this.className=i),a instanceof CSSStyleDeclaration&&(this.styleProps=a),this}function kn(){return{popupmenuSettings:{offset:{y:10}},styles:[new Cn("default",D.translate("FontPickerNormal")),new Cn("header1",D.translate("FontPickerHeader").replace("{0}","1"),"h3"),new Cn("header2",D.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function Tn(t,e){if(!(t instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=b.mergeSettings(t,e,kn()),e&&Array.isArray(e.styles)&&(this.settings.styles=e.styles),this.element=t,this.init()}Cn.prototype={render:function(t){return t=o.stripHTML(t),"<".concat(this.tagName,">").concat(t,"</").concat(this.tagName,">")}},Tn.prototype={get menuAPI(){var t=$(this.element).data("popupmenu");if(t)return t},get selected(){var t;return this.settings.styles.forEach((function(e){e.selected&&(t=e)})),t||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(t){var e;if(this.settings.styles.forEach((function(n){n.id===t&&(e=n)})),!e)throw new Error('No FontPickerStyle available with id "'.concat(t,'"'));return e},getStyleByTagName:function(t){var e;if(this.settings.styles.forEach((function(n){n.tagName===t&&(e=n)})),!e)throw new Error('No FontPickerStyle available with tagName "'.concat(t,'"'));return e},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,this.element.disabled=!0===t},get supportedTagNames(){var t=[];return this.settings.styles.forEach((function(e){t.push(e.tagName)})),t},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=kn().styles),this.build().handleEvents()},build:function(){var t=$(this.element),e=this.element.querySelector("svg.icon.icon-dropdown");e||(e=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",e)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),t.button();var n=t.next(".popupmenu");n&&n.length||(n=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),n.html(this.buildMenuHTML());var i=b.extend({},this.settings.popupmenuSettings,{menu:n,stretchToWidestMenuItem:!0});return t.popupmenu(i),this.render(),this},render:function(){var t=this.selected,e=this.element.querySelector("span");$(e).html(t.displayName)},buildMenuHTML:function(){var t="";return this.settings.styles.forEach((function(e){var n=e.render(e.displayName);t+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(e.id,'">').concat(n,"</a>\n      </li>")})),"".concat(t)},handleEvents:function(){var t=this,e=this;return $(this.element).on("selected.".concat("fontpicker"),(function(e,n){var i=n.attr("data-val");t.select(i)})).on("updated.".concat("fontpicker"),(function(t,n){e.updated(n)})),this},select:function(t,e){if(!t||"string"!=typeof t&&!(t instanceof Cn))throw new Error('"id" property must be defined in order to select.');var n;n=t instanceof Cn?t:this.getStyleById(t),this.settings.styles.forEach((function(t){t.selected=!1})),n.selected=!0,this.render(n),e||$(this.element).triggerHandler("font-selected",[n])},updated:function(t){var e;return void 0!==t&&(Array.isArray(t.styles)&&(e=t.styles),this.settings=b.mergeSettings(this.element,t,this.settings),e&&(this.settings.styles=e)),this.teardown().init()},teardown:function(){var t=this.element.querySelector("svg.icon.icon-dropdown");t.parentNode.removeChild(t);var e=this.menuAPI;e&&"function"==typeof e.destroy&&e.destroy();var n=$(this.element).data("button");return n&&"function"==typeof n.destroy&&n.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,"fontpicker")}};var Sn=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(t){return!$(t).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(t){if("A"!==t.nodeName)throw new Error("Unspecified error occured");return $(t).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],An={actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},$n={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1};function En(t,e){this.element=t,this.settings=b.mergeSettings(this.element,e,$n),this.init()}En.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(t){var e=!1;if(Sn.forEach((function(n){$(t).is(n.selector)&&("function"!=typeof n.filter||n.filter(t))&&(e=n.type)})),!e)throw new Error("Element ".concat(t," is not a valid Toolbar Item Type."));return e}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&!0!==this.overflowed&&this.visible)},get focused(){return 0===this.element.tabIndex},set focused(t){this.element.tabIndex=t?0:-1},get selected(){return this.trueSelected},set selected(t){if(t)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var t=$(this.element),e=An[this.type];if(e)return t.data(e)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["colorpicker","searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var t=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&t.push(this.selectedAnchor),$(this.element).trigger("selected",t)}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(t){var e="searchfield"===this.type||"toolbarsearchfield"===this.type;if(t)return e&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");e&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(t){if(t)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(t){if(this.hasReadOnly)return t?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var t=u.rtl,e=this.element.getBoundingClientRect(),n=this.section.getBoundingClientRect();return t?e.left<n.left:e.right>n.right},set hasNoOverflowedItems(t){if("actionbutton"===this.type&&this.componentAPI){var e=this.componentAPI.toData({noMenuWrap:!0}).length;if(t&&e-this.predefinedItems.length<1)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},handleEvents:function(){var t=this,e=this,n=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&n.on("selected.".concat("toolbarflexitem"),(function(n,i){if(!t.selectedAnchor){if(n.stopPropagation(),"actionbutton"===t.type){var a,s=$(i).parent(),r=s.data("originalButton"),o=$(r).data("toolbarflexitem");if(s.parents("ul").length>1&&(a=s.data("original-menu-element"),r=s.parents("li").last().data("originalButton"),o=$(r).data("toolbarflexitem")),o)return a?(n.preventDefault(),o.selectedAnchor=$(a).children("a")):o.selectedAnchor=i,void(o.selected=!0)}e.selectedAnchor=i,e.selected=!0}})),"actionbutton"===this.type&&(n.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||n.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(t){t.target&&t.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly);var t=$(this.element),e=An[this.type];if(e){var n=t.data(e);n?n.updated(this.settings.componentSettings):t[e](this.settings.componentSettings)}"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var t=this.componentAPI;if(t&&this.toolbarAPI){var e=t.menu;e&&e.length||(e=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var n=this.toolbarAPI.toPopupmenuData();!function t(e,n){e.menuId&&delete e.menuId;var i=n?"submenu":"menu";Array.isArray(e[i])&&e[i].forEach((function(e){t(e,!0)}))}(n);var i=$(t.renderItem(n));this.predefinedItems=i,this.linkToolbarItems(n),e.prepend(this.predefinedItems),t.updated({menu:e,predefined:i}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var t=this.componentAPI;if(t&&this.toolbarAPI&&!t.isOpen){this.hasNoOverflowedItems=!0,t.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var e=!0;this.toolbarAPI.items.forEach((function(e){if(e.actionButtonLink){var i=e.toPopupmenuData();i.overflowed=e.overflowed,i.id&&delete i.id,t.refreshMenuItem(e.actionButtonLink,i,n)}})),this.hasNoOverflowedItems=e}}function n(t,n){if(!n.isSubmenuItem){if(!0===n.overflowed)return t.classList.add("is-overflowed"),n.visible&&t.classList.remove("hidden"),void(e=!1);t.classList.remove("is-overflowed"),t.classList.add("hidden")}}},unlinkToolbarItems:function(){function t(e){var n=$($(e).data("original-menu-element"));if(n.removeData("action-button-link"),$(e).removeData("original-menu-element"),n.hasClass("submenu"))for(var i=e.querySelector(".popupmenu").children,a=0;a<i.length;a++)t(i[a])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each((function(e,n){var i=$(n).data("originalButton"),a=$(i).data("toolbarflexitem");if(a.actionButtonLink=null,$(n).removeData("original-button"),"menubutton"===a.type)for(var s=n.querySelector(".popupmenu").children,r=0;r<s.length;r++)t(s[r])}))},linkToolbarItems:function(t){function e(t,n){var i=t.elementLink;$(i).data("action-button-link",n),$(n).data("original-menu-element",i);var a=t.submenu;if(a&&a.length)for(var s=n.querySelector(".popupmenu").children,r=0;r<s.length;r++)e(a[r],s[r])}"actionbutton"===this.type&&t&&(Array.isArray(t)||(t=t.menu),this.predefinedItems.each((function(n,i){var a=t[n].itemLink;a.actionButtonLink=i,$(i).data("original-button",a.element);var s=t[n].submenu;if(s&&s.length)for(var r=i.querySelector(".popupmenu").children,o=0;o<r.length;o++)e(s[o],r[o])})))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var t={itemLink:this,disabled:this.disabled,visible:this.visible},e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(t.text=this.element.textContent.trim()),"menubutton"===this.type){var n=this.componentAPI.menu;if(n.length){var i=this.componentAPI.toData({noMenuWrap:!0}),a=this.componentAPI.element[0].id;a&&(t.id="".concat(this.toolbarAPI.uniqueId,"-").concat(a)),t.submenu=function t(e,n){var i=e.querySelectorAll("li:not(.heading)");return n.forEach((function(e,n){if(e.elementLink=i[n],e.submenu){var a=i[n].querySelector(".popupmenu");e.submenu=t(a,e.submenu)}})),n}(n[0],i)}else t.submenu=[]}return t}},toData:function(){var t={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(t.readOnly=this.readOnly),this.actionButtonLink&&(t.actionButtonLink=this.actionButtonLink),this.componentAPI&&(t.componentAPI=this.componentAPI);var e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(t.text=this.element.textContent.trim()),"actionbutton"===this.type&&(t.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(t.submenu=this.componentAPI.toData({noMenuWrap:!0})),t},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered}};var Dn=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],In={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!1,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}}};function Mn(t,e){this.settings=b.mergeSettings(t,e,In),this.element=$(t),this.init()}Mn.prototype={get toolbarAPI(){var t;return this.toolbar&&this.toolbar.length&&(t=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),t},init:function(){var t=this;if(this.id="".concat(b.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var e=this.settings;if(e.anchor=$.extend({},In.anchor,e.anchor),e.image=$.extend({},In.image,e.image),e.anchor.defaultUrl=e.anchor.url,e.anchor.defaultClass=e.anchor.class,e.anchor.defaultTargetText=e.anchor.target,e.anchor.defaultIsClickable=e.anchor.isClickable,e.anchor.targets=e.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,(function(e,n){t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(t.settings.anchor.target=n,t.settings.anchor.defaultTarget=n)})),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new Cn("legacyDefault","Default")),this.settings.firstHeader&&(M("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Cn("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(M("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Cn("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),e.buttons&&e.buttons.editor){for(var n=!1,i=[new Cn("default","Default","p")],a=e.buttons.editor.filter((function(t){return"header"===t.substr(0,6)})),s=0;s<a.length;s++){var r=a[s].substr(6,1);n=!0,i.push(new Cn("header".concat(r),"Header ".concat(r),"h".concat(r)))}n&&(e.buttons.editor=e.buttons.editor.filter((function(t){return"header"!==t.substr(0,6)})),e.fontpickerSettings={styles:i}),"seperator"===e.buttons.editor[0]&&e.buttons.editor.splice(0,1),n&&(e.buttons.editor=["fontPicker"].concat(e.buttons.editor))}return e.anchor.defaultTarget||(e.anchor.target&&$.trim(e.anchor.target).length?e.anchor.defaultTarget=e.anchor.target:(e.anchor.defaultTargetText=D.translate("SameWindow"),e.anchor.defaultTarget=e.anchor.targets[e.anchor.defaultTargetText])),this.setup(),"string"==typeof e.paragraphSeparator&&/^(p|br|div)$/.test(e.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,e.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindParagraphCreation:function(){var t=this;return this.getCurrentElement().on("keyup.editor",(function(e){var n,i=t.getSelectionStart();i&&i.getAttribute("data-editor")&&0===i.children.length&&document.execCommand("formatBlock",!1,"p"),13===e.which&&("li"===(n=(i=t.getSelectionStart()).tagName.toLowerCase())||t.isListItemChild(i)||(e.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===n&&document.execCommand("unlink",!1,null)))})),this},bindTab:function(){var t=this;return this.getCurrentElement().on("keydown.editor",(function(e){if(9===e.which){var n=t.getSelectionStart().tagName.toLowerCase();"pre"===n&&(e.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===n&&(e.preventDefault(),document.execCommand(e.shiftKey?"outdent":"indent",e))}if(8===e.which){var i=t.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===i&&t.element.html("")}})),this},setExcludedButtons:function(){var t,e,n,i=function(t,e){var n=-1,i=0;return t.filter((function(t,a){var s=!0;return e.indexOf(t)>-1&&"separator"!==t?(i++,s=!1):"separator"===t&&a-i-1===n&&(i=0,s=!1),"separator"===t&&(n=a),s}))};return e=(t=this.settings).buttons,n=t.excludeButtons,this.sourceViewActive()?n&&n.source&&n.source.length?i(e.source,n.source):e.source:n&&n.editor&&n.editor.length?i(e.editor,n.editor):e.editor},createToolbar:function(){if(this.toolbar)return this;var t=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),e="",n="";this.settings.useFlexToolbar&&(e="toolbar-section ",n='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var i=this.setExcludedButtons(),a="",s=0,r=i.length;s<r;s+=1){var o=this.buttonTemplate(i[s]);o&&this.element.hasClass("source-view-active")&&"visual"!==i[s]&&(o=o.replace('type="button"','type="button" disabled')),o&&(a+=o)}var l='<div class="'.concat(t,'" id="editor-toolbar-').concat(this.id,'">\n      <div class="').concat(e,'buttonset">\n        ').concat(a,"\n      </div>\n      ").concat(n,"\n    </div>");this.toolbar=this.element.parent().find(".icon-dirty").length?$(l).insertBefore(this.element.parent().find(".icon-dirty")):$(l).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var c=this.toolbar.find('[data-action="fontStyle"]').first();c&&c.length&&(c.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=c);var d=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return d.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",d).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),this},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var t=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(o.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",h((function(e){t.textarea.text(o.sanitizeHTML(t.element.html().toString())),t.resetEmptyEditor(e),t.element.trigger("change")}),300)),$("html").on("themechanged.".concat("editor"),(function(){t.setRowsHeight(),t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()})),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var t,e,n,i,a,s,r,o,l=W.currentTheme.id&&W.currentTheme.id.indexOf("uplift")>-1;(null===(t=this.settings)||void 0===t||null===(e=null==t?void 0:t.rows)||void 0===e||null==e?void 0:e.editor)&&this.element.height((null===(a=this.settings)||void 0===a||null===(s=null==a?void 0:a.rows)||void 0===s||null==s?void 0:s.editor)*(l?26:22.2)),(null===(n=this.settings)||void 0===n||null===(i=null==n?void 0:n.rows)||void 0===i||null==i?void 0:i.source)&&this.element.parent().find(".editor-source").height(26*(null===(r=this.settings)||void 0===r||null===(o=null==r?void 0:r.rows)||void 0===o||null==o?void 0:o.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var t="p"===this.settings.paragraphSeparator?"p":"div",e=this.element.html().toString().trim();"<br>"!==(e=this.element.html().toString().trim())&&e!=="<".concat(t,"><br></").concat(t,">")||this.element.html(""),this.element.contents().filter((function(){return 3===this.nodeType&&""!==this.textContent.trim()})).wrap("<".concat(t,"></").concat(t,">")),e=this.element.html().toString().trim(),this.textarea.html(o.sanitizeHTML(e)),this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var t=this.element.html().toString().trim();((t||"").match(/>\s+</g)||[]).length>0&&this.element.html(t.replace(/>\s+</g,"><"))},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var t=$('<div class="text-container"></div>').appendTo(this.sourceView),e="source-textarea-".concat($('[id^="source-textarea-"]').length+1),n="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(e,'">').concat(n,"</label>")).appendTo(t),$('<textarea id="'.concat(e,'" class="editable"></textarea>')).appendTo(t)},triggerClick:function(t,e){$('button[data-action="'.concat(e,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var t=this,e=this.getCurrentElement(),n={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return e.on("keydown.editor",(function(i){switch(i=i||window.event,n.charCode=i.which?i.which:!!i.keyCode&&i.keyCode,i.ctrlKey&&n.charCode){case n.h3:t.triggerClick(i,"append-".concat(t.settings.firstHeader));break;case n.h4:t.triggerClick(i,"append-".concat(t.settings.secondHeader));break;case n.b:t.triggerClick(i,"bold"),i.preventDefault();break;case n.e:t.triggerClick(i,"justifyCenter");break;case n.h:t.triggerClick(i,"anchor"),i.preventDefault();break;case n.i:t.triggerClick(i,i.shiftKey?"image":"italic"),i.shiftKey||i.preventDefault();break;case n.bl:i.shiftKey&&t.triggerClick(i,"insertunorderedlist"),i.preventDefault();break;case n.l:i.shiftKey||t.triggerClick(i,"justifyLeft"),i.preventDefault();break;case n.n:i.shiftKey&&t.triggerClick(i,"insertorderedlist");break;case n.q:t.triggerClick(i,"append-blockquote");break;case n.r:t.triggerClick(i,"justifyRight");break;case n.u:t.triggerClick(i,"underline"),i.preventDefault();break;case n.space:t.triggerClick(i,"clearFormatting");break;case n.sv:t.triggerClick(i,e===t.element?"source":"visual")}})),this.element.on("mousedown.editor","a",(function(t){var e=$(this).attr("href");"firefox"!==u.browser.name&&"Mac OS X"===u.os.name&&(t.metaKey||t.ctrlKey)&&(window.open(e,"_blank"),t.preventDefault())})),this.element.on("updated.editor",(function(){t.updated()})),this},setupTextareaEvents:function(){var t=this;return this.textarea.off(".editor").on("input.editor keyup.editor",(function(){t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()})).on("focus.editor",(function(){t.sourceView.addClass("is-focused")})).on("blur.editor",(function(e){t.sourceView.removeClass("is-focused"),t.element.empty().html(o.sanitizeHTML(t.textarea.val())),t.element.data("validate")&&t.element.data("validate").validate(t.element,!0,e)})),this},adjustSourceLineNumbers:function(){var t=this.textarea.parent(),e=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),n=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var i=this.textarea[0].scrollHeight,a=Math.floor((i-n)/e),s=this.sourceView.find(".line-numbers"),r=s.find("li").length,o="",l=0;if(!this.lineNumbers||a!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<a){for(;l<a-this.lineNumbers;)o+='<li role="presentation"><span>'.concat(r+l+1,"</span></li>"),l++;s.append(o)}else this.lineNumbers>a&&(l=this.lineNumbers-a,s.find("li").slice(-l).remove());else{for(this.lineNumbers=a;l<this.lineNumbers;)o+='<li role="presentation"><span>'.concat(l+1,"</span></li>"),l++;s.append(o)}this.lineNumbers=a}t[0].style.width="calc(100% - ".concat(s.outerWidth()+2,"px)"),i===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(s[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(t,e,n){var i,a;switch(n){case"bold":i=["<b>","</b>"];break;case"italic":i=["<i>","</i>"];break;case"underline":i=["<u>","</u>"];break;case"strikethrough":i=["<strike>","</strike>"];break;case"append-blockquote":i=["<blockquote>","</blockquote>"];break;default:i=["",""]}if("anchor"===n){var s=$('<a href="'.concat(t,'">').concat(e,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&s.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&s.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?s.attr("contenteditable",!1):s.removeAttr("contenteditable"),a=s[0].outerHTML}else a=i[0]+t+e+i[1];return a},insertTextAreaContent:function(t,e){var n,i,a,s,r=this.textarea[0],o=r.value;t=t||"",document.selection&&"TEXTAREA"===r.tagName?($(r).focus(),(n=document.selection.createRange()).text=this.wrapTextInTags(t,n.text,e),$(r).focus()):r.selectionStart||"0"===r.selectionStart?(s=r.scrollTop,n=this.wrapTextInTags(t,o.substring(i=r.selectionStart,a=r.selectionEnd),e),r.value=o.substring(0,i)+n+o.substring(a,o.length),$(r).focus(),r.selectionStart=i+n.length,r.selectionEnd=i+n.length,r.scrollTop=s):(r.value+=this.wrapTextInTags(t,r.value,e),$(r).focus(),r.value=r.value)},buttonTemplate:function(t){var e=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(e.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(e.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(D.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(e.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(e.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(D.translate("TextColor"),'" data-action="foreColor" data-element="foreColor">').concat(e.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(D.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(e.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(e.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(e.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("InsertAnchor"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(e.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(e.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(e.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(e.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(e.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(e.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(e.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" data-action="fontStyle"><span>'.concat("FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(e.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(e.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("JustifyRight"),'" data-action="justifyRight" >').concat(e.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(e.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ViewSource"),'" data-action="source" >').concat(e.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(D.translate("ViewVisual"),'" data-action="visual" >').concat(e.visual,"</button>")}[t]||!1},getIcon:function(t,e,n){return'<span class="audible">'.concat(D.translate(t),"</span>").concat($.createIcon({classes:n||"",icon:e}))},getButtonLabels:function(t){var e,i={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertAnchor","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewSource","visual","visual-icon")};if("object"===n(t)&&(e=t),"object"===n(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);return i},activateButton:function(t){this.toolbar.find('[data-element="'.concat(t,'"]')).addClass("is-active")},bindButtons:function(){var t=this,e=this;function n(t,n){var i=n instanceof En?$(n.element):$(t.target);if(!i.is(".btn-actions")){var a=i.attr("data-action"),s=e.getCurrentElement();return t.preventDefault(),s.focus(),void 0===e.selection&&e.checkSelection(),e.sourceViewActive()||i.toggleClass("is-active"),a&&e.execAction(a,t),("ie"===u.browser.name||u.browser.isEdge())&&s.trigger("change"),!i[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",n),this.toolbar.on("click.editor",".colorpicker-editor-button",n)):this.toolbar.on("click.editor","button",n),this.fontPickerElem&&this.fontPickerElem.on("font-selected",(function(e,n){t.execFormatBlock(n.tagName)})),this},bindModals:function(){var t=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!0}).on("beforeopen",(function(){t.savedSelection=t.saveSelection(),$(this).attr("id"),"modal-url-".concat(t.id)})).off("open").on("open",(function(){var e=u.features.touch,n=$(this).attr("id"),i=$("input:first",this),a=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(t.id,'"]')).val(t.settings.anchor.url),$('[name="em-class-'.concat(t.id,'"]')).val(t.settings.anchor.class),$('[name="em-target-'.concat(t.id,'"]')).val(t.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",t.settings.anchor.isClickable),setTimeout((function(){e&&n==="modal-image-".concat(t.id)?a.focus():i.focus().select()}),10)})).off("close").on("close",(function(e,n){if(t.restoreSelection(t.savedSelection),!n)if($(this).attr("id")==="modal-url-".concat(t.id)){var i=$(t.findElementInSelection("a",t.element[0]));i.length?t.updateCurrentLink(i):t.createLink($('[name="em-url-'.concat(t.id,'"]'),this))}else t.insertImage($("#image-".concat(t.id)).val())})),this},createURLModal:function(){var t=this,e=this.settings,n=$("#modal-url-".concat(this.id));if(n.length>0)return n;var i="",a=!0;return $.each(e.anchor.targets,(function(e,n){i+='<option value="'.concat(n,'">').concat(D.translate(e),"</option>"),t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(a=!1)})),a&&(i+='<option value="'.concat(e.anchor.target,'">').concat(e.anchor.target,"</option>")),$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(D.translate("InsertAnchor"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(D.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(e.anchor.url,'">\n          </div>\n          ').concat(e.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(e.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(D.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(D.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(e.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(D.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown">\n              ').concat(i,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(D.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(D.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},createImageModal:function(){var t=$("#modal-image-".concat(this.id));return t.length>0?t:$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(D.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(D.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(D.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(D.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(t){var e=o.stripTags($('[name="em-url-'.concat(this.id,'"]')).val()),n=o.stripTags($('[name="em-class-'.concat(this.id,'"]')).val()),i=o.stripTags($('[name="em-target-'.concat(this.id,'"]')).val()),a=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;t&&(t[0].setAttribute("href",this.fixLinkFormat(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl)),t[0].setAttribute("class",n&&$.trim(n).length?n:this.settings.anchor.defaultClass),t[0].setAttribute("data-url",(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl).replace("http://",""))),a?t.attr("contenteditable",!1):t.removeAttr("contenteditable"),i&&$.trim(i).length?t.attr("target",i):t.removeAttr("target")},createLink:function(t){var e=this;this.restoreSelection(this.savedSelection);var n=o.stripTags(this.fixLinkFormat(t[0].value));t.val(n),this.settings.anchor.url=t.val(),this.settings.anchor.class=$('[name="em-class-'.concat(this.id,'"]')).val(),this.settings.anchor.target=$('[name="em-target-'.concat(this.id,'"]')).val(),this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;var i=$('<a data-url="'.concat(n,'" href="').concat(n,'">').concat(n,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&i.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&i.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?i.attr("contenteditable",!1):i.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(t.val(),"anchor");else{var a,s,r,l,c;if(!this.selection.isCollapsed||u.browser.isIE11()){if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){s=a.getRangeAt(0),""!==(l="".concat(s)).trim()&&i.html(l);for(var d=(r=s.commonAncestorContainer.children)?r.length:0,h=0;h<d;h++){var p=r[h];p instanceof HTMLImageElement&&(c=p)}c&&i.html(c.outerHTML),s.deleteContents();var f=document.createElement("div");f.innerHTML=i[0].outerHTML;for(var g,m,v=document.createDocumentFragment();g=f.firstChild;)m=v.appendChild(g);s.insertNode(v),m&&((s=s.cloneRange()).setStartAfter(m),s.collapse(!0),a.removeAllRanges(),a.addRange(s))}}else document.execCommand("insertHtml",null,i[0].outerHTML),setTimeout((function(){e.getCurrentElement().focus()}),1);this.bindAnchorPreview()}},fixLinkFormat:function(t){return t.match(/^https?:\/\//)?t:"http://".concat(t)},bindSelect:function(){var t=this,e="";return this.selectionHandler=function(){clearTimeout(e),e=setTimeout((function(){t.checkSelection()}),t.settings.delay)},this.getCurrentElement().off("mouseup.editor keyup.editor").on("mouseup.editor keyup.editor",this.selectionHandler),this},checkSelection:function(){var t;if(void 0===this.selection&&this.sourceViewActive())return t=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();t=window.getSelection();var e=this.getSelectionElement();return e?this.checkSelectionElement(t,e):this.hideToolbarActions(),this},getSelectionElement:function(){var t,e,n,i=window.getSelection(),a=function(t){var e=t;try{for(;!e.getAttribute("data-editor");)e=e.parentNode}catch(n){return!1}return e};try{e=(t=i.getRangeAt(0).commonAncestorContainer).parentNode,n=t.getAttribute("data-editor")?t:a(e)}catch(s){n=a(e)}return n},checkSelectionElement:function(t,e){var n=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=t,this.selectionRange=this.selection.getRangeAt(0),n!==e?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var t=this.getSelectedParentElement();void 0!==t.tagName&&-1===Dn.indexOf(t.tagName.toLowerCase)&&(this.activateButton(t.tagName.toLowerCase()),!this.element.is(t));)t=t.parentNode},checkButtonState:function(t){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===t){for(var e,n,i=this.fontPickerElem.data("fontpicker"),a=i.supportedTagNames,s=this.getSelectionParentElement(),r=$(s).add($(s).parentsUntil(this.element)),o=0;o<r.length&&void 0===n;o++)if(e=r[o].tagName.toLowerCase(),a.indexOf(e)>-1){n=i.getStyleByTagName(e),i.select(n,!0);break}}else document.queryCommandState(t)?this.toolbar.find('[data-action="'.concat(t,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(t,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=this.selectionRange;return this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var t=this,e=t.getCurrentElement();return this.pasteWrapper=function(e){var n,i,a;n=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var s="";if(t.sourceViewActive())return this;if(n&&!e.defaultPrevented){for(e.preventDefault(),a=n.split(/[\r\n]/g),i=0;i<a.length;i+=1)""!==a[i]&&(navigator.userAgent.match(/firefox/i)&&0===i?s+="<p>".concat(t.htmlEntities(a[i]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(a[i])?s+='<img src="'.concat(t.htmlEntities(a[i]),'" />'):s+="<p>".concat(t.htmlEntities(a[i]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,s),!1;t.pasteHtmlAtCaret(s)}},this.pasteWrapperHtml=function(e){if(t.sourceViewActive())return this;var i,a,s,r,o;if((e.clipboardData||e.originalEvent)&&(e.clipboardData&&e.clipboardData.types?a=e.clipboardData:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(a=e.originalEvent.clipboardData)),a&&a.types)((i=a.types)instanceof DOMStringList&&i.contains("text/html")||i.indexOf&&-1!==i.indexOf("text/html")||u.browser.isEdge())&&(s=e.originalEvent.clipboardData.getData("text/html")),i instanceof DOMStringList&&i.contains("text/plain")&&(s=e.originalEvent.clipboardData.getData("text/plain")),"object"===n(i)&&i[0]&&"text/plain"===i[0]&&!i[1]&&(s=e.originalEvent.clipboardData.getData("text/plain"));else for(o=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),s="",r=0;r<o.length;r+=1)""!==o[r]&&(navigator.userAgent.match(/firefox/i)&&0===r?s+="<p>".concat(t.htmlEntities(o[r]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(o[r])?s+='<img src="'.concat(t.htmlEntities(o[r]),'" />'):s+="<p>".concat(t.htmlEntities(o[r]),"</p>"));return t.pastedData=u.browser.isIE11()?s:t.getCleanedHtml(s),$.when(t.element.triggerHandler("beforepaste",[{pastedData:t.pastedData}])).done((function(){if(t.pastedData&&!e.defaultPrevented){if(u.browser.isIE11()||u.browser.isEdge()||e.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,t.pastedData),!1;t.pasteHtmlAtCaret(t.pastedData)}t.element.triggerHandler("afterpaste",[{pastedData:t.pastedData}]),t.pastedData=null})),!!u.browser.isIE11()&&void 0},e.on("paste.editor",t.settings.pasteAsPlainText?t.pasteWrapper:t.pasteWrapperHtml),this},pasteHtmlAtCaret:function(t){var e,n,i=this,a="x-text-content-templ-x";if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents(),u.browser.isIE11()&&(t=a);var s=document.createElement("div");s.innerHTML=t;for(var r,o,c=document.createDocumentFragment();r=s.firstChild;)o=c.appendChild(r);if(n.insertNode(c),o&&((n=n.cloneRange()).setStartAfter(o),n.collapse(!0),e.removeAllRanges(),e.addRange(n)),u.browser.isIE11()){for(var d=50,h=$.Deferred(),p=document.createDocumentFragment();i.element[0].childNodes.length>0;)p.appendChild(i.element[0].childNodes[0]);!function e(n,i){--d<0?h.reject():n.childNodes&&n.childNodes.length>0?(t=n.innerHTML,n.innerHTML="",n.appendChild(i),h.resolve()):setTimeout((function(){e(n,i)}),5)}(i.element[0],p),$.when(h).done((function(){var e="",n=i.element.find(":contains(+ ".concat(a,")")).filter((function(){return this.textContent===a}));n.length||(n=i.element.find(":contains(+ ".concat(a,")")).filter((function(){return this.textContent.indexOf(a)>-1&&"UL"!==this.tagName}))),t=i.getCleanedHtml(t);var s="";/(^(\s+?)?<li)/gi.test(t)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)?(n.is("li")||(t="<ul>".concat(t,"</ul>")),s=t):s=n.is("li")?"".concat(t,"</li>"):(e=t.match(/<\/ul|<\/ol/gi)||[]).length?t:"".concat(t,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)&&(n.is("li")?s="<li>".concat(t):((e=t.match(/<ul|<ol/gi)||[]).length?t+=e[e.length-1].replace(/<(ul|ol)/gi,"<$1>"):t="<ul>".concat(t,"</ul>"),s=t)),s&&l.html(n,s,"*"),(e=i.element[0].innerHTML).indexOf(a)>-1&&(e=e.replace(a,t)),i.element[0].innerHTML=i.getCleanedHtml(e)}))}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(t)},getCleanedHtml:function(t){var e,n=t||"",i=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(n)&&(n=this.cleanWordHtml(n));for(var a=0,s=i.length;a<s;a++)e=new RegExp(" ".concat(i[a],'="(.*?)"'),"gi"),n=this.stripAttribute(n,i[a],e),e=new RegExp(" ".concat(i[a],"='(.*?)'"),"gi"),n=this.stripAttribute(n,i[a],e);return(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul|ol)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<[^/>]+>[\s]*<\/[^>]+>/gi,"")).indexOf("Â·")>-1&&(n=[(n=[(n=(n=(n=n.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>Â·<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,n.indexOf("<li>")),"<ul>",n.slice(n.indexOf("<li>"))].join("")).slice(0,n.lastIndexOf("</li>")),"</ul>",n.slice(n.lastIndexOf("</li>"))].join("")),n},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var t=this,e=this.container,n=this.getCurrentElement(),i=this;return this.element.on("DOMNodeInserted",(function(t){var e=$(t.target),n=$("<b>helper</b>");"IMG"===t.target.tagName?e.removeAttr("id style srcset"):"SPAN"===t.target.tagName&&(e.before(n),n.after(e.contents()),n.add(e).remove())})),this.container.on("focusin.".concat("editor"),".editor, .editor-source",(function(){var t=$(this);e.addClass("is-active"),setTimeout((function(){t.hasClass("error")&&(e.parent().find(".editor-toolbar").addClass("error"),e.parent().find(".editor-source").addClass("error"))}),100)})).on("focusout.".concat("editor"),".editor, .editor-source",(function(){e.removeClass("is-active"),e.parent().find(".editor-toolbar").removeClass("error"),e.parent().find(".editor-source").removeClass("error")})),this.container.on("mouseenter.".concat("editor"),(function(){t.element.hasClass("error")||t.container.addClass("is-hover")})).on("mouseleave.".concat("editor"),(function(){t.container.removeClass("is-hover")})),i.settings.onLinkClick&&e.on("click.editorlinks","a",(function(e){i.settings.onLinkClick(e,{elem:t,url:e.currentTarget.getAttribute("data-url")}),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()})),this.label.on("click.editor",(function(){n.focus()})),n.attr("aria-label",this.label.text()),this},restoreSelection:function(t){var e=window.getSelection();if(t||(t=this.savedSelection),t){e.removeAllRanges();for(var n=0,i=t.length;n<i;n+=1)e.addRange(t[n])}},saveSelection:function(){var t,e=window.getSelection();if(e.getRangeAt&&e.rangeCount){t=[];for(var n=0,i=e.rangeCount;n<i;n+=1)t.push(e.getRangeAt(n));return t}return null},getSelectionStart:function(){var t=document.getSelection().anchorNode;return t&&3===t.nodeType?t.parentNode:t},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(t,e){var n,i,a,s=this.getrange();if(s){for(n=a=s.commonAncestorContainer||s.parentElement();n!==e;n=n.parentNode)if(n&&n.tagName&&n.tagName.toLowerCase()===t)return n;if(!s.collapsed&&(void 0===s.text||s.text)&&a.getElementsByTagName){n=a.getElementsByTagName(t),i=document.createRange?document.createRange():document.body.createTextRange();for(var r=0,o=n.length;r<o;r++)if(document.createRange){if(i.selectNodeContents(n[r]),s.compareBoundaryPoints(Range.END_TO_START,i)<0&&s.compareBoundaryPoints(Range.START_TO_END,i)>0)return n[r]}else if(i.moveToElementText(n[r]),s.compareEndPoints("StartToEnd",i)<0&&s.compareEndPoints("EndToStart",i)>0)return n[r]}}},restoreLinkSelection:function(){var t=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,t.length){this.settings.anchor.url=t.attr("href"),this.settings.anchor.class=t.attr("class"),this.settings.anchor.target=t.attr("target");var e=t.attr("contenteditable");!1!==e&&"false"!==e||(this.settings.anchor.isClickable=!0)}},execAction:function(t){if(this.getCurrentElement()===this.element)t.indexOf("append-")>-1?this.execFormatBlock(t.replace("append-","")):"anchor"===t?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===t?this.modals.image.data("modal").open():"foreColor"===t||"backColor"===t?this.execColorActions(t):"clearFormatting"===t?this.clearFormatting():"source"===t||"visual"===t?this.toggleSource():document.execCommand(t,!1,null);else switch(t){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,t)}this.checkSelection()},insertImage:function(t){document.execCommand("insertImage",!1,t)},toggleSource:function(t){var e=this,n=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};if(this.sourceViewActive()&&!t){var i=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",i)).done((function(t){n(t)||function(t){var n=t||e.textarea.val();n=o.sanitizeHTML(n),n=e.getCleanedHtml(n),e.element.empty().removeClass("source-view-active hidden"),e.sourceView.addClass("hidden").removeClass("is-focused"),e.element.trigger("focus.editor"),e.switchToolbars(),e.textarea.off("input.editor-firechange"),setTimeout((function(){e.element.html(n),n=e.element.html(),e.element.triggerHandler("afterpreviewmode",n),e.element.focus()}),0)}(t)}))}else{var a=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",a)).done((function(t){n(t)||function(t){var n=t||e.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");e.settings.useSourceFormatter&&(n=e.formatHtml(n)),e.element.addClass("source-view-active"),e.switchToolbars(),e.textarea.val(n).focus(),e.sourceView.removeClass("hidden"),e.element.addClass("hidden"),e.adjustSourceLineNumbers(),e.textarea.focus(),n=e.textarea.val(),e.textarea.off("input.editor-firechange").on("input.editor-firechange",(function(){e.element.trigger("change")})),e.element.triggerHandler("aftersourcemode",n)}(t)}))}},clearFormatting:function(){var t,e=this,n=this.getSelectionParentElement(),i=n.tagName,a={};n&&i&&(i=i.toLowerCase(),a=function(){for(var t=function(t){return t&&t.style&&""!==t.style.textAlign},i=n,a=t(i),s=9999;!a&&s>0;)s--,a=(i=i?i.parentNode:null)&&i===e.element[0]||t(i);var r={found:i&&i!==n&&i!==e.element[0]};return r.found&&(r.elem=i,r.textAlign=i.style.textAlign),r}(),function(){var t=function(t){var e=[].slice.call(t.querySelectorAll("li"));if(e.length>0){var n=document.createDocumentFragment();e.forEach((function(t){var e=document.createTextNode(t.textContent);n.appendChild(e),n.appendChild(document.createElement("br"))}));var i=e[0].parentNode;i.parentNode.insertBefore(n,i.nextSibling),i.parentNode.removeChild(i)}};if("li"===i)t(n.parentNode);else if(/ul|ol/.test(i))t(n);else{var e=n.classList.contains("editor")?n:$(n).closest(".editor").length?n.parentNode:null;e&&[].slice.call(e.querySelectorAll("ul, ol")).forEach((function(e){return t(e)}))}}(),function(){var t=function(t){var e=t.parentNode,n=document.createElement("p");n.innerHTML=t.innerHTML,e.replaceChild(n,t)};Dn.indexOf(i)>-1?"p"!==i&&(document.execCommand("removeFormat",!1,null),t(n)):Dn.forEach((function(e){"p"!==e&&[].slice.call(n.querySelectorAll(e)).forEach((function(e){return t(e)}))}));for(var a=[].slice.call(e.element[0].querySelectorAll("blockquote, pre")),s=function(e,i){var s=!1;!function t(e){for(var i=0,a=e.length;i<a;i++){var r=e[i],o=[].slice.call(r.children);r===n&&(s=!0),o.length&&!s&&t(o)}}([].slice.call(a[e].children)),s&&(document.execCommand("removeFormat",!1,null),t(a[e]))},r=0,o=a.length;r<o;r++)s(r)}(),t=function(t){var e=t.parentNode;e.insertBefore(t.firstChild,t),e.removeChild(t),e.normalize()},"a"===i?t(n):[].slice.call(n.querySelectorAll("a")).forEach((function(e){(function(t){var e=window.getSelection(),n=!1;if(u.browser.isIE11()){var i=e.getRangeAt(0),a=document.createRange();a.selectNode(t);var s=i.compareBoundaryPoints(Range.START_TO_END,a),r=i.compareBoundaryPoints(Range.START_TO_START,a),o=i.compareBoundaryPoints(Range.END_TO_START,a),l=i.compareBoundaryPoints(Range.END_TO_END,a);n=s!==r||o!==l||s!==l}else n=e.containsNode(t,!0);return n})(e)&&t(e)})));var s=n.parentNode;s&&s!==this.element[0]&&[].slice.call(s.querySelectorAll("[align]")).forEach((function(t){return t.removeAttribute("align")})),document.execCommand("removeFormat",!1,null),a.found&&(a.elem.style.textAlign=a.textAlign)},getSelectionParentElement:function(){var t,e=null;return window.getSelection?(t=window.getSelection()).rangeCount&&1!==(e=t.getRangeAt(0).commonAncestorContainer).nodeType&&(e=e.parentNode):(t=document.selection)&&"Control"!==t.type&&(e=t.createRange().parentElement()),e},checkColorButtonState:function(t){var e=$('[data-action="'.concat(t,'"]'),this.toolbar),n=e.data("colorpicker"),i=document.queryCommandValue(t);return n&&"rgb(0, 0, 0)"!==i&&("firefox"===u.browser.name&&"backColor"===t&&(i=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof i&&(i=n.decimal2rgb(i)),i=i?n.rgb2hex(i):"",e.attr("data-value",i).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(i.toLowerCase())>-1?"":i)),{cpBtn:e,cpApi:n,color:i}},execColorActions:function(t){var e=this,n=this.checkColorButtonState(t),i=n.cpBtn,a=n.cpApi;i.one("selected.editor",(function(n,a){var s=a;void 0===s||s instanceof $||!s.element||(s=$(a.element));var r="".concat(s.data("value")).toLowerCase();if(-1===(r="#"!==r?r:"").indexOf("#")&&(r="#".concat(r)),"#"===r&&(r=""),i.attr("data-value",r).find(".icon").css("color",r),"ie"===u.browser.name||"foreColor"===t)r?document.execCommand(t,!1,r):document.execCommand("removeFormat",!1,t);else{document.execCommand("fontSize",!1,"2");for(var o=e.getSelectionParentElement().parentNode.getElementsByTagName("font"),l=0,c=o.length;l<c;l++)o[l].hasAttribute("style")&&(o[l].style.backgroundColor="");setTimeout((function(){for(var t=0,e=o.length;t<e;t++)o[t].hasAttribute("size")&&(o[t].style.backgroundColor=r,o[t].removeAttribute("size"))}),0)}setTimeout((function(){e.getCurrentElement().focus()}),0)})),a.toggleList()},execFormatBlock:function(t){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var e=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&e.el&&"blockquote"===e.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(e.tagName===t&&(t="p"),"ie"===u.browser.name){if("blockquote"===t)return document.execCommand("indent",!1,t);t="<".concat(t,">")}return document.queryCommandState("bold")&&document.execCommand("bold",!1,t),document.queryCommandState("italic")&&document.execCommand("italic",!1,t),document.queryCommandState("underline")&&document.execCommand("underline",!1,t),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,t),e.el&&e.el.innerHTML&&e.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),e.el&&e.el.innerHTML&&"<ul>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),e.el&&e.el.innerHTML&&"<ol>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.checkActiveButtons(),document.execCommand("formatBlock",!1,t)}},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===Dn.indexOf(e);)(t=t.parentNode)&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},isListItemChild:function(t){for(var e=t.parentNode,n=e.tagName.toLowerCase();-1===Dn.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(!(e=e.parentNode)||!e.tagName)return!1;n=e.tagName.toLowerCase()}return!1},destroyToolbar:function(){var t=function(t){return t||$()};this.toolbar=t(this.toolbar),this.element=t(this.element),this.textarea=t(this.textarea);var e=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");e&&e.destroy();for(var n=this.toolbar.find("button"),i=0,a=n.length;i<a;i++){var s=$(n[i]).data("tooltip");s&&"function"==typeof s.destroy&&s.destroy();var r=$(n[i]).data("button");r&&"function"==typeof r.destroy&&r.destroy()}for(var o=$('[data-action="foreColor"], [data-action="backColor"]',this.element),l=0,c=o.length;l<c;l++){var d=$(o[l]).data("colorpicker");d&&"function"==typeof d.destroy&&d.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var h=this.fontPickerElem.data("fontpicker");h&&h.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var u=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(u),this.textarea.off(u),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var p=this.checkColorButtonState("foreColor"),f=p.cpBtn;if(f.off("selected.editor"),(f=(p=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var g=Object.keys(this.modals),m=0,v=g.length;m<v;m++){var b=$("#modal-".concat(g[m],"-").concat(this.id)),y=b.data("modal");b.off("beforeclose.editor close.editor open.editor beforeopen.editor"),y&&"function"==typeof y.destroy&&y.destroy(),b.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var t=this.container[0].classList,e=this.element[0].classList;if(!t.contains("is-preview")){if(!this.isEditable()){var n=["is-disabled","is-readonly","is-preview"];t.remove.apply(t,n),e.remove.apply(e,n)}this.sourceViewActive()&&this.toggleSource(),t.add("is-preview"),e.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){var e=$(t).data("tooltip");e&&"function"==typeof e.destroy&&e.destroy()}))}},destroyPreviewMode:function(){if(this.container[0]){var t=this.container[0].classList;t.contains("is-preview")&&(t.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var t=this,e=!0,n=function(t,e){return t.classList.contains(e)};return["is-disabled","is-readonly","is-preview"].forEach((function(i){(n(t.container[0],i)||n(t.element[0],i))&&(e=!1)})),e},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,In)),this.teardown().init()},teardown:function(){return this.destroyToolbar(),this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==u.browser.name&&document.addEventListener&&document.addEventListener("paste",(function(t){if(void 0!==t.clipboardData){var e=t.clipboardData.items[0];if(0===e.type.indexOf("image")){var n=e.getAsFile(),i=new FileReader;i.onload=function(t){document.execCommand("insertImage",!1,t.target.result)},i.readAsDataURL(n)}}}),!1)},isWordFormat:function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)},cleanWordHtml:function(t){var e=t;e=(e=(e=(e=(e=(e=e.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"Â ")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join("Â "):""}))).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var n=["style","script","applet","embed","noframes","noscript"],i=0,a=n.length;i<a;i++){var s=new RegExp("<".concat(n[i],".*?").concat(n[i],"(.*?)>"),"gi");e=e.replace(s,"")}return e},stripAttribute:function(t,e,n){return"style"===e?this.stripStyles(t,n):t.replace(n,"")},stripStyles:function(t,e){var n=["color","background","font-weight","font-style","text-decoration","text-align"];return t.replace(e,(function(t){for(var e=(t=t.replace(/( style=|("|\'))/gi,"")).split(";"),i="",a=0;a<e.length;a++){var s=e[a].split(":");i+=n.indexOf(s[0])>-1?"".concat(s[0],":").concat(s[1],";"):""}return""!==i?' style="'.concat(i,'"'):""}))},formatHtml:function(t){t=t.trim();var e=this.settings,n=t.split(/</),i=0,a="";function s(t){var n="",i=t*("number"==typeof e.formatterTabsize?e.formatterTabsize:4);if(t>-1)for(;i--;)n+=" ";return n}for(var r=0,o=n.length;r<o;r++){var l=n[r].split(/>/);2===l.length?("/"===n[r][0]&&i--,a+=s(i),"/"!==n[r][0]&&i++,r>0&&(a+="<"),a+="".concat(l[0].trim(),">\n"),""!==l[1].trim()&&(a+="".concat(s(i)+l[1].trim().replace(/\s+/g," "),"\n")),l[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&i--):a+="".concat(s(i)+l[0],"\n")}return a.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(t){return this.each((function(){var e=$.data(this,"editor");e?e.updated(t):e=$.data(this,"editor",new Mn(this,t))}))};var Ln={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Pn(t,e){this.settings=b.mergeSettings(t,e,Ln),this.element=$(t),this.init()}Pn.prototype={init:function(){var t=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",t.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==t.dataset&&0!==t.dataset.length&&Array.isArray(t.dataset)){if(t.dataset[0]&&t.dataset[0].children&&t.dataset[0].children.length>0||this.isStackedLayout()?this.render(t.dataset[0]):t.dataset&&t.dataset.children.length>0&&this.render(t.dataset),null!==t.leafHeight&&null!==t.leafWidth){var e="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(t.leafWidth,"px;  height: ").concat(t.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(e,"</style>")).appendTo("body")}t.layout&&this.setLayout(t.layout)}else this.element.emptymessage(t.emptyMessage)},setLayout:function(t){switch(this.isPagingLayout()&&(t="paging"),this.isMobileOnly()&&(t="mobile-only"),t){case"horizontal":this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only");break;default:this.element.addClass("layout-is-horizontal")}},handleEvents:function(){var t=this,e=this,n=this.settings;e.element.off("click.hierarchy").on("click.hierarchy",".btn",(function(t){if(!e.isStackedLayout()){n.newData.length>0&&(n.newData=[]);var i=$(this).closest(".leaf").attr("id"),a=$("#".concat(i)).data(),s={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};a.isExpanded?e.collapse(t,a,s):e.expand(t,a,s)}})),this.element.on("keypress",".leaf",(function(t){var n=$(this).attr("id"),i=$("#".concat(n));13===t.which&&(i.isExpanded?e.collapse(t,i):e.expand(t,i))})),e.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",(function(e){var n={event:e,data:$("#".concat(e.currentTarget.id)).data()};e.stopImmediatePropagation(),t.element.trigger("dblclick",n)})),e.element.on("mouseup",".leaf, .back button",(function(t){var e=$(this),n=$(t.target),i=e.closest(".hierarchy").data("hierarchy"),a=e.data(),s=$(this).attr("id"),r={target:t.target,pageX:t.pageX,pageY:t.pageY},o=n.is("button"),l=!n.hasClass("btn-back"),c=n.is(".btn-back"),d=n.find("use").prop("href"),h=!!d&&"#icon-caret-up"===d.baseVal,u=!!d&&"#icon-caret-down"===d.baseVal,p=!!d&&"#icon-caret-right"===d.baseVal,f=n.hasClass("btn-actions"),g=n.is("a")&&n.parent().parent().is("ul.popupmenu"),m=e.hasClass("ancestor"),v="selected";if(t.stopImmediatePropagation(),(!g||!$(n).parent().data("disabled"))&&($(".is-selected").removeClass("is-selected"),$("#".concat(s)).addClass("is-selected"),o&&h&&l&&(v=m?"back":"collapse"),o&&u&&l&&(v="expand"),c&&(v="back"),f&&(v="actions",i.buildActionsMenu(a,e)),g&&(v="action"),o&&p&&l&&(v="forward"),3===t.which&&(v="rightClick"),i)){var b={id:s,data:a,actionReference:g?n.data("actionReference"):null,targetInfo:r,eventType:v,isForwardEvent:i.isForwardEvent(v),isBackEvent:i.isBackEvent(v),isAddEvent:i.isAddEvent(v),isExpandEvent:i.isExpandEvent(v),isCollapseEvent:i.isCollapseEvent(v),isSelectedEvent:i.isSelectedEvent(v),isActionsEvent:i.isActionsEvent(v),isActionEvent:i.isActionEvent(v),allowLazyLoad:i.allowLazyLoad(a,v)};e.trigger("selected",b)}}))},selectLeaf:function(t){var e=$("#".concat(t));$(".is-selected").removeClass("is-selected"),e.addClass("is-selected");var n={data:e.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};e.trigger("selected",n)},updateActions:function(t,e){var n=$(t.targetInfo.target).closest(".leaf"),i=t.data,a=$(n).find(".popupmenu"),s=a.find("li").not(":eq(0)");$(s).each((function(t,e){$(e).remove()})),i.menu.actions=e,a.append(this.getActionMenuItems(i))},buildActionsMenu:function(t,e){var n=$(e).find(".popupmenu"),i=[];void 0!==t.menu&&(n.empty(),t.menu.details&&(n.addClass("has-detail-fields"),i.push('<li><div class="detail-fields">'.concat(t.menu.details.map((function(t){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(t.key,'</div><div class="dt-fields-cell">').concat(t.value,"</div></div>")})).join(""),"</div></li>"))),t.menu.actions&&i.push(this.getActionMenuItems(t)),i.forEach((function(t){n.append(t)})))},getActionMenuItems:function(t){var e=t.menu.actions.map((function(t){return void 0===t.disabled&&(t.disabled=!1),t}));return"".concat(e.map((function(t){return"\n      <li data-disabled='".concat(t.disabled,"' class='").concat(t.menu?"submenu":"","'>\n        <a href='").concat(t.url,"' data-action-reference='")+JSON.stringify(t.data)+"'>\n          ".concat(t.value,"\n          ").concat(t.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n        </a>\n        ").concat(t.menu?'<div class="wrapper" role="application" aria-hidden="true">\n          <ul class="popupmenu">\n            '.concat(t.menu.map((function(e){return"\n            <li data-disabled='".concat(t.disabled,"'>\n              <a href='").concat(t.url,"' data-action-reference='")+JSON.stringify(t.data)+"'>".concat(e.value,"</a>\n            </li>")})).join(""),"\n          </ul>\n        </div>"):"","\n      </li>")})).join(""))},isBackEvent:function(t){return"back"===t},isForwardEvent:function(t){return"forward"===t},isAddEvent:function(t){return"add"===t},isExpandEvent:function(t){return"expand"===t},isCollapseEvent:function(t){return"collapse"===t},isSelectedEvent:function(t){return"selected"===t},isActionsEvent:function(t){return"actions"===t},isActionEvent:function(t){return"action"===t},allowLazyLoad:function(t,e){return void 0!==t&&void 0!==e&&!t.isLoaded&&!t.isLeaf&&"expand"===e},data:function(t,e,n,i){void 0===i&&(i={});var a=this.settings,s=e.isRootNode?e:e[0],r=[];function o(e,a,s){Object.keys(a).forEach((function(e){"id"===e&&t===a.id&&(a.isLoaded||a.isRootNode||function(t,e){e.insert&&(delete t.isLeaf,t.isExpanded=!0),t.children=0!==n.length&&e.insert?[n]:n}(a,i),r.push(a))})),a.children&&l(e,a.children)}function l(t,e,n){if(void 0===e.length)o(t,e);else for(var i=0,a=e.length;i<a;i++)o(t,e[i])}return a.newData.length>0&&(a.newData=[]),void 0!==n&&l(this,s),0!==r.length&&$("#".concat(r[0].id)).data(r[0]),r[0]},add:function(t,e,n){var i=this.settings,a=$("#".concat(void 0!==e.id?e.id:t)),s=a.parent().hasClass("leaf-container")?a.parent().parent():a.parent(),r={},o="sub-level"!==s.parent().attr("class"),l=1===s.children(".sublist").length;if(o?l?r.element=s.children(".sublist"):(r.el=s.append("<ul class='sublist'></ul>"),r.element=$(r.el).find(".sublist")):(r.el=s.children("ul"),r.element=$(r.el)),0===r.element.length&&(r.el=s.append("<ul></ul>"),r.element=$(r.el).find("ul")),!e.isRootNode){for(var c=0,d=n.length;c<d;c++)i.newData.push(n[c]);this.createLeaf(n,r.element)}this.updateState(a,!1,null,"add")},closePopupMenu:function(t){var e=t.find(".btn-actions");0!==e.length&&e.data("popupmenu").close()},expand:function(t,e,n){var i=this.settings,a=n.leaf,s=a.next();this.closePopupMenu(a),s.animateOpen(),this.element.trigger("expanded",[e,i.dataset]),a.hasClass("root")&&(s=s.next("ul")).animateOpen(),a.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(a,!1,null,"expand")},collapse:function(t,e,n){var i=this,a=this.settings,s=n.leaf,r=s.next();this.closePopupMenu(s),r.animateClosed().on("animateclosedcomplete",(function(){i.element.trigger("collapsed",[e,a.dataset])})),s.hasClass("root")&&(r=r.next("ul")).animateClosed(),s.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(s,!1,null,"collapse")},render:function(t){var e=this,n=this.settings,i=n.legend,a=t.children,s=[],r={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(r.chart);var l=$("#".concat(this.settings.rootId," .chart"));if(0!==i.length){$("#".concat(this.settings.rootId)).prepend(r.legend);var c=$("#".concat(this.settings.rootId," legend"));this.createLegend(c)}if(this.isSingleChildWithChildren()&&$(l).addClass("has-single-child"),this.setColor(t),this.isPagingLayout()&&t.parentDataSet){var d=$('<div class="back"><button type="button" class="btn-icon hide-focus btn-back"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg><span>Back</span></button></div>').appendTo(l);setTimeout((function(){return d.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')})),d.children("button").data(t),$(l).addClass("has-back")}if(t.isMultiRoot){var h='<div class="leaf multiRoot"><div><h2>'.concat(t.multiRootText,"</h2></div></div>");h=o.sanitizeHTML(h),s.push(h),$(s[0]).addClass("root").appendTo(l)}else if(null!=t.ancestorPath){t.ancestorPath.push(t.centeredNode);var u="".concat(t.ancestorPath.map((function(t){return" ".concat(e.getTemplate(t)," ")})).join(""));u=o.sanitizeHTML(u),s.push(u),$(s[0]).addClass("root ancestor").appendTo(l);var p=this.element.find(".leaf.root");p.each((function(n,i){e.updateState(i,!1,t.ancestorPath[n],"add"),n===p.length-1&&$(i).addClass("is-selected")}))}else{var f,g=t.centeredNode;this.isStackedLayout()&&null!==g?f=this.getTemplate(g):this.isStackedLayout()||(f=this.getTemplate(t)),f&&(f=o.sanitizeHTML(f),s.push(f),$(s[0]).addClass("root is-selected").appendTo(l)),this.updateState(this.element.find(".leaf.root"),!0,g&&null!==g?g:t,void 0)}function m(t,e,n){if(null!=e)for(var i=0,a=e.length;i<a;i++)w(t,e[i])}if(a&&a.length>0)for(var v=0,b=a.length;v<b;v++){var y=t.children[v].children;this.isLeaf(a[v])&&!this.isPagingLayout()&&n.renderSubLevel||this.isPagingLayout()?this.createLeaf(t.children[v],$(r.toplevel)):this.createLeaf(t.children[v],$(r.sublevel)),null!=y&&m(this,t.children[v].children)}function w(t,e,n){Object.keys(e).forEach((function(n){if("children"===n){var i=e.children;return null!=i&&i.length>0&&t.add(e.id,e,i),m(t,i)}return!0}))}var x=this.element.find(".container").outerWidth(),C=$(window).width();this.element.scrollLeft((x-C)/2);var k=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===k.length&&k.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var t=this.settings;if(t.dataset&&t.dataset[0]&&t.dataset[0].children){for(var e=t.dataset[0].children.length,n=0;e--;)t.dataset[0].children[e].isLeaf||n++;return 1===n}return!1},getTemplate:function(t){var e=ne.compile("{{#dataset}}".concat($("#".concat(o.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:t});return setTimeout((function(){var e=$("#btn-".concat(o.stripTags(t.id)));0!==e.length&&e.hideFocus().popupmenu({attachToBody:!1})}),1),$(e).prop("outerHTML")},createLegend:function(t){for(var e=this.settings,n=0,i=0,a=e.legend.length;i<a;i++){var s=e.legend[i].label,r=e.colorClass[i];i-1+1==4&&(t.append("<ul></ul>"),n++),t.children("ul").eq(n).append(""+'<li>\n          <span class="key '.concat(r,'"></span>\n          <span>').concat(s,"</span>\n        </li>"))}},createLeaf:function(t,e){var n=this,i=$("#".concat(n.settings.rootId," .chart"),n.container),a=e.attr("class"),s=void 0!==a?$("#".concat(n.settings.rootId," .").concat(a)):e;function r(t){n.setColor(t);var i=n.getTemplate(t),a=n.settings.rootId,r=1===s.length?s:e,l=t.isExpanded||void 0===t.isExpanded?"branch-expanded":"branch-collapsed";if(t.isLeaf&&(l=""),1!==$("#".concat(a," #").concat(t.id)).length&&(r.append("<li class=".concat(l,">").concat($(i)[0].outerHTML,"</li>")),t.children)){for(var c="",d=0,h=t.children.length;d<h;d++){n.setColor(t.children[d]);var u=n.getTemplate(t.children[d]);c+="<li>".concat($(u)[0].outerHTML,"</li>")}(r=$("#".concat(a," #").concat(o.stripTags(t.id))).parent()).append("<ul>".concat(c,"</ul>"));for(var p=t.children.length;p--;){var f=$("#".concat(a," #").concat(o.stripTags(t.children[p].id)));n.updateState(f,!1,t.children[p],void 0)}}}if(s.length<1&&("top-level"===a?e.insertAfter(".root"):e.appendTo(i)),t.length)for(var l=0,c=t.length;l<c;l++)r(t[l]),n.updateState($("#".concat(n.settings.rootId," #").concat(o.stripTags(t[l].id))),!1,t[l],void 0);else r(t),n.updateState($("#".concat(n.settings.rootId," #").concat(o.stripTags(t.id))),!1,t,void 0)},setColor:function(t){var e=this,n=this.settings;if(this.setRootColor(t),this.isStackedLayout()&&(t.ancestorPath&&null!==t.ancestorPath&&t.ancestorPath.forEach((function(t){e.setRootColor(t)})),t.centeredNode&&null!==t.centeredNode&&this.setRootColor(t.centeredNode)),t.children&&!t.isRootNode)for(var i=0,a=t.children.length;i<a;i++)for(var s=0,r=n.legend.length;s<r;s++)t.children[i][n.legendKey]===n.legend[s].value&&(t.children[i].colorClass=n.colorClass[s])},setRootColor:function(t){for(var e=this.settings,n=0,i=e.legend.length;n<i;n++){if(t[e.legendKey]===e.legend[n].value){t.colorClass=e.colorClass[n];break}""===t[e.legendKey]&&(t.colorClass="default-color")}},isLeaf:function(t){return t.isLeaf||this.settings.beforeExpand?t.isLeaf:!(t.children&&t.children.length>0)},updateState:function(t,e,n,i){if($.isEmptyObject($(t).data())&&n){var a=void 0===n?{}:n;$(t).data(a)}var s=this.settings,r=$(t).find(".btn"),o=this.isPagingLayout()?"caret-right":"caret-up",l=$(t).data();void 0===l&&void 0!==n&&(l=n),(l.children&&0!==l.children.length||"add"===i)&&(l.isExpanded=!0,l.isLoaded=!0),e&&(l.isRootNode=!0,l.isLoaded=!0),(void 0===l.isExpanded&&l.children||"expand"===i)&&(l.isExpanded=!0),void 0!==l.isExpanded&&"collapse"!==i||(l.isExpanded=!1),l.isExpanded?(r.find("svg.icon").changeIcon(o),r.addClass("btn-expand").removeClass("btn-collapse")):(r.find("svg.icon").changeIcon("caret-down"),r.addClass("btn-collapse").removeClass("btn-expand")),(l.isLeaf||l.isRootNode)&&r.addClass("btn-hidden"),l.isLeaf&&(l.isLoaded=!1,l.isExpanded=!1),this.isPagingLayout()&&(l.parentDataSet=s.dataset),$(t).data(l)},reload:function(t){this.destroy(),this.element.hierarchy(t)},unbind:function(){this.element.empty()},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,Ln)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(t){return this.each((function(){var e=$.data(this,"hierarchy");e?e.updated(t):e=$.data(this,"hierarchy",new Pn(this,t))}))};var Nn={dataset:[],dropdownOpts:{},template:""+"<label>".concat(D.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function _n(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Nn),this.init()}_n.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(t){var e=this.settings;if(t=t||e.dataset,"object"===n(ne)&&t&&e.template){e.template instanceof $?e.template="".concat(e.template.html()):"string"==typeof e.template&&(k.containsHTML(e.template)||(e.template=$("#".concat(e.template)).html()));var i=ne.compile(e.template,{dataset:e.dropdownOpts.source?[]:t}),a=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(D.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');t.length>0?this.element.before(i):0===t.length&&this.element.before(i||a);var s=this.element.attr("id")||this.element.attr("name");void 0===s&&(s=b.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",s));var r="".concat(s,"-ff");this.field=this.element.closest(".field, .field-short");var o=D.isRTL();e.dropdownOpts=e.dropdownOpts||{},o&&"object"===n(e.dropdownOpts)&&(e.dropdownOpts.placementOpts?e.dropdownOpts.placementOpts.x=this.element.outerWidth():e.dropdownOpts.placementOpts={x:this.element.outerWidth()}),e.dropdownOpts.cssClass=e.dropdownOpts.cssClass?"".concat(e.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",e.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(e.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",r),this.ffdropdown[0].setAttribute("name",r),this.ffdropdown.prev("label")[0].setAttribute("for",r);var l=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(l),this.field.find("div.dropdown span").addClass("audible"),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon")}},setFiltered:function(){if(this.ddApi){var t=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(t)}return this},getTriggerData:function(t){var e=this.settings,n=e.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:e.dataset;return{idx:t.index(),item:t,data:n[t.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(t){if(this.ddApi){var e=-1,n=this.settings;if("number"==typeof t&&t>-1&&t<(n.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:n.dataset).length)e=t;else if("string"==typeof t){var i=this.ffdropdown.find('option[value="'.concat(t,'"]'));i.length||(i=this.ffdropdown.find("option").filter((function(){return $(this).text()===t}))),i.length&&(e=i.index())}-1!==e&&e!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=e,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var t=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),(function(){var e=t.field.is(".field-short")?42:52;$("#dropdown-list ul").width(t.element.outerWidth()+e)})).on("selected.".concat("fieldfilter"),(function(e,n){var i=t.getTriggerData(n);t.element.triggerHandler("filtered",[i])})),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element[0],t,Nn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(t){return this.each((function(){var e=$.data(this,"fieldfilter");e?e.updated(t):e=$.data(this,"fieldfilter",new _n(this,t))}))};var Rn={};function Bn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Rn),this.init(),L("FieldOptions")}Bn.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var t=this;this.isFirefox="firefox"===u.browser.name,this.isSafari=u.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var e=this.field.find("label");return e&&(this.label=e),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),(function(t){9!==(t.which||t.keyCode||t.charCode||0)&&(t.preventDefault(),t.stopPropagation())}))),setTimeout((function(){t.popupmenuApi=t.trigger.data("popupmenu"),t.popupmenuApi&&(t.popupmenuApi.settings.returnFocus=!1,t.popupmenuApi.settings.offset.y=10)}),100),this},handleEvents:function(){var t,e=this,n=this,i=this.element.data("datepicker"),a=this.element.data("timepicker"),s=this.element.data("dropdown"),r=this.element.data("lookup")||this.element.hasClass("lookup"),o=this.element.is(".checkbox"),l=this.element.is(".fileupload"),c=this.element.is(".searchfield"),d=this.element.is(".colorpicker"),h=this.element.closest(".radio-group").length>0,p=this.element.is(".data")&&this.element.closest(".summary-form").length>0,f=function(t){return $(":focus").is(t)},g=function(t){(t||e.element).addClass("is-focused")},m=function(t){(t||e.element).removeClass("is-focused")},v=function(){n.element.add(n.trigger).add(n.field).add(n.fieldParent).addClass("is-active")},b=function(){n.element.add(n.trigger).add(n.field).add(n.fieldParent).removeClass("is-active")},y=function(t){var n=!f(e.element);return n=!e.trigger.is(t.relatedTarget)&&n,n=!e.trigger.is(".is-open")&&n,n=(!i||!i.isOpen())&&n,n=(!a||!a.isOpen())&&n,n=!$(t.relatedTarget).prev().is(e.element)&&n,n=(!s||!s.isOpen())&&n,n=!(r&&r.modal&&r.modal.isOpen())&&n,(!d||!e.element.is(".is-open"))&&n},w=function(){var t,n=e.element.height();if(p){var i=parseInt(e.element.css("line-height"),10);n>i?(e.element.css({"margin-bottom":"","padding-bottom":""}),t=(n-i)/2*-1):(e.element.css({"margin-bottom":"8px","padding-bottom":"12px"}),t=6)}else h&&(t=(n-e.trigger.height())/2*-1);return t},x=function(){e.trigger.css({top:"".concat(w()-1,"px")})};return u.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),(function(t){var n;n=f(e.element),n=(!i||!i.isOpen())&&n,n=(!a||!a.isOpen())&&n,(n=(!s||!s.isOpen())&&n)&&v()})).on("close.".concat("fieldoptions"),(function(t){y(t)&&b()}))):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),(function(){n.element.prop("disabled")||n.element.closest("is-disabled").length||n.field[0].className.indexOf("visible")<0&&n.field[0].classList.add("visible")})).on("mouseout.".concat("fieldoptions"),(function(){n.field[0].className.indexOf("visible")>-1&&n.field[0].classList.remove("visible")}))),s&&setTimeout((function(){var t=e.trigger.data("popupmenu");t&&t.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})}),0),(i||a)&&(t=i||a).trigger&&t.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),(function(){v()})).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),(function(t){y(t)&&(b(),e.element.removeClass("is-open"))})),a&&(a.settings.returnFocus=!1),(r||d)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",(function(){v()})),d&&this.element.on("beforeopen.".concat("fieldoptions"),(function(){v()}))),o&&(this.trigger.addClass("is-checkbox"),!u.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",(function(){v()})).on("mouseout.".concat("fieldoptions"),".checkbox-label",(function(){b()}))),l&&(this.element.on("change.".concat("fieldoptions"),(function(){e.targetElem.focus()})),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",(function(){v()}))),c&&setTimeout((function(){e.trigger.add(e.trigger.next(".popupmenu")).appendTo(e.element.closest(".searchfield-wrapper"))}),0),p&&(x(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),(function(t){13===(t.which||t.keyCode||t.charCode||0)&&setTimeout((function(){v()}),0)})),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),(function(){v()})),$(document).on("click.".concat("fieldoptions"),(function(t){$(t.target).is(e.element)||b()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),h&&(x(),this.element.on("focusin.".concat("fieldoptions"),".radio",(function(){var t=e.isSafari?200:0;g(),setTimeout((function(){v()}),t)})).on("focusout.".concat("fieldoptions"),".radio",(function(){m()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),this.targetElem.on("focusin.".concat("fieldoptions"),(function(){v(),h&&e.isSafari&&g()})).on("focusout.".concat("fieldoptions"),(function(t){var n=e.isSafari?200:0;h&&e.isSafari&&m(),setTimeout((function(){y(t)&&b()}),n)})),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),(function(){v()})).on("focusout.".concat("fieldoptions"),(function(t){y(t)&&b()})).on("selected.".concat("fieldoptions"),(function(){e.popupmenuApi.settings.returnFocus=!0})).on("close.".concat("fieldoptions"),(function(t){y(t)&&b()})),(this.isSafari||l)&&(h&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),(function(t){9!==(t.which||t.keyCode||t.charCode||0)||t.shiftKey||(h?(e.targetElem.find(":checked, .radio:first").not(":disabled").focus(),e.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),(function(n){9!==(n.which||n.keyCode||n.charCode||0)||t.shiftKey||setTimeout((function(){e.trigger.focus()}),0)}))):e.trigger.focus(),v(),t.preventDefault(),t.stopPropagation())}))),this.element.on("listopened.".concat("fieldoptions"),(function(){v()})).on("listclosed.".concat("fieldoptions"),(function(){b()})),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,Rn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(t){return this.each((function(){var e=$.data(this,"fieldoptions");e?e.updated(t):e=$.data(this,"fieldoptions",new Bn(this,t))}))};var On={};function Fn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,On),this.init()}Fn.prototype={init:function(){this.build()},build:function(){var t=this,e=this,n=this.element,i=!n.is("input.fileupload");this.fileInput=i?n.find("input"):n,n.closest(".field, .field-short").addClass("field-fileupload");var a=n.find("input").attr("name");i||(a=n.attr("id")||n.attr("name"));var s=i?n.find("input").attr("class"):n.attr("class");s=s?" ".concat(s):"";var r=D.translate("FileUpload"),o=$('<label for="'.concat(a,'-filename">').concat(n.text(),' <span class="audible">').concat(r,"</span></label>")),l=$('<input readonly id="'.concat(a,'-filename" class="fileupload-background-transparent').concat(s,'" type="text">')),c='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),d='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!i){var h=n.prev("label");0===h.length&&(h=n.parent().prev("label")),o.html("".concat(h.text(),' <span class="audible">').concat(r,"</span>")),h.addClass("audible").add(this.fileInput).attr("tabindex","-1")}n.before(o,l),this.fileInput.after(c,d);var p=this.fileInput.attr("value");p&&p.length>0&&(l.val(p),this.fileInput.attr("value","")),this.textInput=l,this.svg=n.parent().find(".trigger"),this.svgClose=n.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",(function(e){var i=!1;13===e.which||32===e.which?(n.parent().find('[type="file"]').trigger("click"),i=!0):8===e.which&&(u.browser.isIE11()&&e.preventDefault(),t.clearUploadFile(),i=!0),i&&e.stopPropagation()})),this.svg.on("click.fileupload",(function(e){t.fileInput.trigger("click"),i&&t.fileInput.data("handleEvent".concat([e.type||""]),e.handleObj)})),this.svgClose.on("click.fileupload",(function(e){t.clearUploadFile(),i&&t.fileInput.data("handleEvent +".concat([e.type||""]),e.handleObj)})),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),n.hasClass("required")&&(o.addClass("required"),n.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate()),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",(function(){this.files.length>0?(e.textInput.val(this.files[0].name).trigger("change"),e.svgClose.show().addClass("is-visible")):e.clearing||e.clearUploadFile()})),this.fileInput.on("click.fileupload",(function(e){var n=t.fileInput.data("handleEvent".concat([e.type||""]));n&&n.type===e.type&&"fileupload"===e.handleObj.namespace&&(t.fileInput.data("handleEvent".concat([e.type||""]),null),e.preventDefault())})),e.fileInput.css({position:"static",left:0}),setTimeout((function(){e.fileInput.css({position:"fixed",left:"-10000px"})}),0)},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.textInput.off("keydown.fileupload"),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,On)),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"fileupload")},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(t){return this.each((function(){var e=$.data(this,"fileupload");e?e.updated(t):e=$.data(this,"fileupload",new Fn(this,t))}))};var zn={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFilesInProcess:null};function Hn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,zn),this.init()}Hn.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var t,e=this.settings,n=e.isStandalone?e.standaloneClass:"";if(e.textDropArea=e.textDropArea||D.translate("TextDropArea"),e.textDropAreaWithBrowse=e.textDropAreaWithBrowse||D.translate("TextDropAreaWithBrowse"),e.textBtnCancel=e.textBtnCancel||D.translate("TextBtnCancel"),e.textBtnCloseError=e.textBtnCloseError||D.translate("TextBtnCloseError"),e.textBtnRemove=e.textBtnRemove||D.translate("TextBtnRemove"),e.errorAllowedTypes=e.errorAllowedTypes||"<em>".concat(D.translate("Error"),"</em>: ").concat(D.translate("ErrorAllowedTypes")),e.errorMaxFileSize=e.errorMaxFileSize||"<em>".concat(D.translate("Error"),"</em>: ").concat(D.translate("ErrorMaxFileSize")),e.errorMaxFilesInProcess=e.errorMaxFilesInProcess||"<em>".concat(D.translate("Error"),"</em>: ").concat(D.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(e.isDisabled=!0),e.isDisabled&&(n+=" is-disabled"),e.showBrowseButton){var i="",a=b.uniqueId(this.element,"fileupload-adv-"),s=e.allowedTypes.split(/[\s|]+/g),r=e.maxFilesInProcess>1?" multiple":"";if(r+=e.isDisabled?" disabled":"",1===s.length)"*"!==s[0]&&(i=".".concat(s[0]));else for(var o=0,c=s.length;o<c;o++)i+=".".concat(s[o]+(o!==c-1?",":""));t=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(e.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(a,'" accept="').concat(i,'"').concat(r," />\n            </label>\n          </div>\n        </div>")}else t=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(e.textDropArea,"</p>\n          </div>\n        </div>");l.append(this.element,t,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element)},handleEvents:function(){var t=this,e=this,n=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",(function(t){e.element.triggerHandler("filesdragenter"),t.stopPropagation(),t.preventDefault(),n.isDisabled||$(this).addClass("hover")})).on("dragover.fileuploadadvanced",(function(t){t.stopPropagation(),t.preventDefault()})).on("drop.fileuploadadvanced",(function(t){var i=t.originalEvent.dataTransfer.files;t.preventDefault(),n.isDisabled||(e.element.triggerHandler("filesdroped",[i]),$(this).removeClass("hover is-focus"),$("span.msg",this.element).closest(".error").remove(),i.length+$(".progress",this.element).length>n.maxFilesInProcess?e.showError(n.errorMaxFilesInProcess):e.handleFileUpload(i))})),n.showBrowseButton&&!n.isDisabled){var i=this.dropArea.find(".fileupload-adv-browse-lbl"),a=i.find('input[type="file"]');i.click((function(t){$(t.target).is('.hyperlink, input[type="file"]')||t.preventDefault()})),a.hideFocus(),a.on("hidefocusremove.fileuploadadvanced",(function(e){e.stopPropagation(),t.dropArea.addClass("is-focus")})).on("hidefocusadd.fileuploadadvanced",(function(e){e.stopPropagation(),t.dropArea.removeClass("is-focus")})).on("change.fileuploadadvanced",(function(t){t.stopPropagation(),e.handleFileUpload(this.files)}))}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",(function(t){t.stopPropagation(),t.preventDefault(),"dragover"===t.type&&e.dropArea.removeClass("hover")}))},handleFileUpload:function(t){for(var e=this.settings,n=e.fileName.replace("[]",""),i=0,a=t.length;i<a;i++)if(this.isFileTypeAllowed(t[i].name))if(-1!==e.maxFileSize&&t[i].size>e.maxFileSize)this.showError(e.errorMaxFileSize,t[i]);else{this.element.triggerHandler("beforecreatestatus",[t[i]]);var s=new FormData;s.append("".concat(n,"[]"),t[i]);var r=this.createStatus(t[i]);r.container.find(".status-icon .action").focus(),this.element.triggerHandler("aftercreatestatus",[t[i]]),"function"==typeof e.send?e.send(s,r):this.sendFileToServer(s,r)}else this.showError(e.errorAllowedTypes,t[i]);e.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")},createStatus:function(t){var e=this,n=this,i=this.settings,a=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(i.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(t.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(t.size),'</span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),s=$(".action",a).button(),r=$(".l-pull-right",a),o=$(".progress-bar",a).progress({animationLength:10});return this.dropArea.after(a),{file:t,container:a,setProgress:function(n){e.element.triggerHandler("fileprogress",[{file:t,progress:n}]),o.attr("data-value",n).triggerHandler("updated")},setAbort:function(n){s.on("click.fileuploadadvanced",(function(){e.element.triggerHandler("fileaborted",[t]),n.abort(),s.off("click.fileuploadadvanced"),a.remove()}))},setCompleted:function(e){a.addClass("completed"),s.after($.createIcon("check")),r.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(i.textBtnRemove,"</span>\n        </button>")),$(".action",r).button().on("click.fileuploadadvanced",(function(){$(this).off("click.fileuploadadvanced"),a.remove(),e.remove()})),s.off("click.fileuploadadvanced"),s.add(o.closest(".progress-row")).remove(),n.element.triggerHandler("filecompleteuploading",[t])}}},sendFileToServer:function(t,e){var n={remove:function(){}},i=0,a=parseFloat(e.file.size),s=new $.fn.timer((function(){e.setCompleted(n)}),a);$(s.event).on("update",(function(t,n){i=Math.ceil(n.counter/a*100),e.setProgress(i)})),e.setAbort({abort:function(){}})},showError:function(t,e){var n,i=this.settings;n=t===i.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(i.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="msg">').concat(t,"</span>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(i.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="description">').concat(e.name,'</span>\n            <div class="l-pull-right">\n              <span class="size">').concat(this.formatFileSize(e.size),'</span>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(t,"</p>\n          </div>\n        </div>")),$(".action",n).button().on("click.fileuploadadvanced",(function(){n.remove()})),this.dropArea.after(n)},isFileTypeAllowed:function(t){var e=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),n=t.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(n,e)<0)},formatFileSize:function(t){return"number"!=typeof t?"":t>=1e9?"".concat((t/1e9).toFixed(2)," GB"):t>=1e6?"".concat((t/1e6).toFixed(2)," MB"):"".concat((t/1e3).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.unbind(),this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled"),this.handleEvents()},disable:function(){this.settings.isDisabled=!0,this.unbind(),this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled"),this.handleEvents()},unbind:function(){return this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,zn)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(t){return this.each((function(){var e=$.data(this,"fileuploadadvanced");e?e.updated(t):e=$.data(this,"fileuploadadvanced",new Hn(this,t))}))},$.fn.fontpicker=function(t){return this.each((function(){var e=$.data(this,"fontpicker");e?e.updated(t):e=$.data(this,"fontpicker",new Tn(this,t))}))};var qn={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,timeout:100};function Vn(t,e){this.settings=b.mergeSettings(t,e,qn),this.element=$(t),this.init()}Vn.prototype={get state(){var t=this.rowsAndCols.length,e=t?this.rowsAndCols[0].length:0,n=this.settings;return-1===this.rowsAndCols[t-1].indexOf(!1)&&(t-=1),void 0===this.editing&&(this.editing=n.editing),{rows:t,cols:e,containerHeight:n.gutterSize+(n.gutterSize+n.widgetHeight)*t,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){this.isTransitionsSupports=this.supportsTransitions(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},initColumns:function(t){this.rowsAndCols[t=t||0]=[];for(var e=0,n=this.settings.columns;e<n;e++)this.rowsAndCols[t][e]=!0},initHeroWidget:function(){var t=$(".hero-widget");t.length>1&&(t=t.not(":first").remove()),this.heroWidget=t},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var t=this,e=this,n=e.element.find(".card, .widget");e.editing?(n.attr("draggable",!0),n.css("cursor","move"),e.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),n.each((function(n,i){var a=$(i),s=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!a.hasClass("no-remove")){var r=a.children(".widget-header");s.insertBefore(r).on("click.card-remove",(function(){if(t.settings&&"function"==typeof t.settings.onBeforeRemoveCard){var n=t.settings.onBeforeRemoveCard(a);n&&n.then&&"function"==typeof n.then?n.then((function(){a.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[a,e.state])})):n&&(a.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[a,e.state]))}else a.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[a,e.state])}))}})),n.on("mouseenter.card",(function(){var t=$(this),n=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",(function(i){i.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(i){var a=i.clientX-t.offset().left;a<e.settings.widgetWidth/2?n.css({left:e.settings.widgetWidth/2}):t.width(a)})).on("mouseup.handle",(function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-width triple-width quad-width");var n=t.width()/e.settings.widgetWidth;n>3.5?t.addClass("quad-width"):n>2.5?t.addClass("triple-width"):n>1.5&&t.addClass("double-width"),$(".ui-resizable-handle").remove(),t.css({opacity:1,width:""}),e.refresh(!1),e.element.triggerHandler("resizecard",[t,e.state])}))})),i=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",(function(n){n.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(n){var a=n.clientY-t.offset().top;a<e.settings.widgetHeight?i.css({top:e.settings.widgetHeight}):t.height(a)})).on("mouseup.handle",(function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-height"),t.height()/e.settings.widgetHeight>1.5&&t.addClass("double-height"),$(".ui-resizable-handle").remove(),t.css({opacity:1,height:""}),e.refresh(!1),e.element.triggerHandler("resizecard",[t,e.state])}))}));0===t.has(".ui-resizable-handle").length&&t.append(n,i),t.css({border:"1px solid #078cd9"})})).on("mouseleave.card",(function(){var t=$(this);t.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),t.css({border:"1px solid #bdbdbd"})})).on("dragstart.card",(function(){$(this).addClass("is-dragging")})).on("dragover.card",(function(t){t.preventDefault()})).on("dragenter.card",(function(t){t.preventDefault();var n=$(this),i=$(".is-dragging");n.is(i)&&0===$(".drop-indicator").length||(i.index()<n.index()?(e.guide.css("right","-14px"),e.guide.css("left","")):(e.guide.css("left","-14px"),e.guide.css("right","")),n.append(e.guide),e.refresh(!1))})).on("dragend.card",(function(){var t=$(this),i=$(n).has(".drop-indicator");t.index()<i.index()?t.insertAfter(i):t.insertBefore(i),t.removeClass("is-dragging"),e.guide.remove(),e.refresh(!1),e.element.triggerHandler("reordercard",[t,e.state])}))):(n.attr("draggable",!1),n.css("cursor","auto"),n.children(".card-remove").remove(),n.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function(t){void 0!==t&&(this.editing=t,this.initEdit(),this.refresh(!1))},getAvailability:function(t){for(var e=!1,n={},i=this.rowsAndCols.length,a=0,s=i;a<s&&!e;a++)for(var r=0,o=!0,l=this.rowsAndCols[a].length;r<l&&!e;r++)if(this.rowsAndCols[a][r]&&t.w+r<=l){if(t.w>1&&l>r+1)for(var c=0;c<t.w;c++)if(!this.rowsAndCols[a][r+c]){o=!1;break}if(t.h>1&&i>a+1)for(var d=0;d<t.h;d++)if(!this.rowsAndCols[a+d][r]){o=!1;break}o&&(n.row=a,n.col=r,e=!0)}return Object.getOwnPropertyNames(n).length||(this.initColumns(i),n.row=i,n.col=0),n},fitBlock:function(t,e,n){var i=!0;if(n.x=e,n.y=t,1===n.w&&1===n.h)this.rowsAndCols[t][e]=!1;else if(1!==n.w)for(var a=t,s=n.h+t;a<s;a++)for(var r=e,o=n.w+e;r<o;r++)this.rowsAndCols[a]||this.initColumns(a),this.rowsAndCols[a][r]=!1;else for(var l=t,c=n.h+t;l<c;l++)for(var d=e,h=n.h+e;d<h;d++)this.rowsAndCols[l]||this.initColumns(l),this.rowsAndCols[l][e]=!1;for(var u=0,p=this.rowsAndCols[t].length;u<p;u++)this.rowsAndCols[t][u]&&(i=!1);i&&(this.rowsAndCols[t+1]||this.initColumns(t+1))},setBlocks:function(){var t=this.element.find(".card, .widget");this.blocks=[];for(var e=0,n=t.length;e<n;e++){var i,a=$(t[e]),s=a.hasClass("double-height")?2:1;i=a.hasClass("quad-width")?4:a.hasClass("triple-width")?3:a.hasClass("double-width")?2:1,this.blocks.push({w:i,h:s,elem:a,text:a.text()})}if(this.settings.columns>1)for(var r=0,o=0,l=0,c=this.blocks.length;r<c;r++)this.blocks[r].w>=this.settings.columns&&r&&l&&l<=this.settings.columns/2&&this.arrayIndexMove(this.blocks,r,o),(l+=this.blocks[r].w)>=this.settings.columns&&(l=0,o=this.blocks[o].w>=this.settings.columns?o+1:r)},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},resize:function(t,e){var n=4*t.settings.widgetWidth+3*t.settings.gutterSize,i=3*t.settings.widgetWidth+2*t.settings.gutterSize,a=2*t.settings.widgetWidth+t.settings.gutterSize,s=t.settings.widgetWidth,r=n,o=t.element.outerWidth(),l=o>=n,c=o>=i&&o<=n,d=o>=a&&o<=i,h=o<=a,u=this.element.attr("data-columns"),p=t.element.find("> .content");this.settings.columns=parseInt(u||this.settings.columns,10),l&&4===t.settings.columns&&(t.settings.columns=4,r=n),(c||l&&3===t.settings.columns)&&(t.settings.columns=3,r=i),d&&(t.settings.columns=2,r=a),h&&(t.settings.columns=1,r=s),p.length&&(p[0].style.marginLeft="-".concat(r/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var f=0,g=t.blocks.length;f<g;f++){var m=t.blocks[f];m.elem.removeClass("to-single to-double to-triple"),m.w>t.settings.columns&&(m.w=t.settings.columns,1===t.settings.columns?m.elem.addClass("to-single"):2===t.settings.columns?m.elem.addClass("to-double"):3===t.settings.columns&&m.elem.addClass("to-triple"));var v=t.getAvailability(m),b=t.settings.widgetWidth+t.settings.gutterSize,y=b*t.settings.columns,w={left:D.isRTL()?y-(b*m.w+b*v.col):b*v.col,top:(t.settings.widgetHeight+t.settings.gutterSize)*v.row};if(e&&!this.editing){var x=t.settings.easing;"blockslide"===x?t.isTransitionsSupports?(t.applyCubicBezier(m.elem,[.09,.11,.24,.91]),m.elem[0].style.left="".concat(w.left,"px"),m.elem[0].style.top="".concat(w.top,"px")):m.elem.animate(w,t.settings.timeout):m.elem.animate(w,t.settings.timeout,x)}else t.isTransitionsSupports&&t.applyCubicBezier(m.elem,null),m.elem[0].style.left="".concat(w.left,"px"),m.elem[0].style.top="".concat(w.top,"px");t.fitBlock(v.row,v.col,m)}t.element.triggerHandler("resize",[t.settings.columns,t.state])},applyCubicBezier:function(t,e){var n=e?"all .3s cubic-bezier(".concat(e,")"):"none";t[0].style["-webkit-transition"]=n,t[0].style["-moz-transition"]=n,t[0].style["-ms-transition"]=n,t[0].style["-o-transition"]=n,t[0].style.transition=n},supportsTransitions:function(){var t=document.createElement("p").style,e="transition";if("string"==typeof t[e])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0,a=n.length;i<a;i++)if("string"==typeof t[n[i]+e])return!0;return!1},refresh:function(t){this.resize(this,t=void 0!==t?t:this.settings.animate)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,qn)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function(){var t=this;$("body").on("resize.homepage",(function(){t.resize(t,t.settings.animate)})),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",(function(){t.resize(t,t.settings.animate)}))}},$.fn.homepage=function(t){return this.each((function(){var e=$.data(this,"homepage");e?e.updated(t):e=$.data(this,"homepage",new Vn(this,t))}))};var jn=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),Wn={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1}};function Un(t,e){this.settings=b.mergeSettings(t,e,Wn),this.settings.dataset=e.dataset,this.element=$(t),this.init()}Un.prototype={get state(){var t,e,n,i=0,a=1,s=this.settings.indeterminate,r=this.settings.pagesize,o=this.previousOperation,l=this.previousTrigger,c=this.settings.dataset;return isNaN(this.serverDatasetTotal)?c&&c.length&&(i=c.length,this.isFilteredClientside&&(i=c.filter((function(t){return!t._isFilteredOut})).length)):i=this.serverDatasetTotal,this.grandTotal&&(n=this.grandTotal),a=s?999999999:i<1?1:Math.ceil(i/r),isNaN(this.filteredTotal)||(e=this.filteredTotal,s?a=999999999:t=e<1?1:Math.ceil(e/r)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:n,pagesize:r,pages:a,trigger:l,total:i,type:o,filteredActivePage:this.filteredActivePage,filteredTotal:e,filteredPages:t}},get pagingInfo(){return M("state","pagingInfo"),this.state},get focusableElements(){return b.getArrayFromList(this.pagerBar[0].querySelectorAll(jn))},get numberButtons(){if(!this.isTable){var t=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return b.getArrayFromList(t)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var t=Number(this.element.attr("data-pagesize"));isNaN(t)||(this.settings.pagesize=t),this.element.removeAttr("data-pagesize")}-1===this.settings.pagesizes.indexOf(this.settings.pagesize)&&(this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort((function(t,e){return t-e}))),this.handleDeprecatedSettings();var e=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),e.length&&e[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this},createPagerBar:function(){if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length)){var t=this;["widget","card"].forEach((function(e){var n=t.element.closest(".".concat(e,"-content"));if(n.length){var i=n.next(".".concat(e,"-footer"));i.length||(i=$('<div class="'.concat(e,'-footer"></div>')).insertAfter(n)),t.pagerBar.appendTo(i)}}))}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(M("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var t=this;this.pagerBar.on("click.pager",".btn-icon",(function(e){var n=e.currentTarget,i=n.parentNode;if(e.preventDefault(),$(this).attr("disabled"))return!1;var a=t.state,s=a.activePage;if(a.filteredTotal&&(s=a.filteredActivePage),l.hasClass(i,"pager-prev"))return t.setActivePage(s-1,!1,"prev"),t.triggerPagingEvents(s),!1;if(l.hasClass(i,"pager-next"))return t.setActivePage((-1===s?1:s)+1,!1,"next"),t.triggerPagingEvents(s),!1;if(l.hasClass(i,"pager-first"))return t.setActivePage(1,!1,"first"),t.triggerPagingEvents(s),!1;if(l.hasClass(i,"pager-last"))return t.setActivePage(t.pageCount(),!1,"last"),t.triggerPagingEvents(s),!1;var r=Number(n.getAttribute("data-page"));return(isNaN(r)||r<1)&&(r=1),t.setActivePage(r,!1,"page"),t.triggerPagingEvents(s),!1})),t.pagerBar.on("keydown.pager",$(t.focusableElements),(function(t){var e=(t=t||window.event).which||t.keyCode||t.charCode||!1,n=37===e||40===e,i=39===e||38===e,a=t.target;if("INPUT"===a.nodeName&&(n=40===e,i=38===e),!n&&!i)return!0;var s="INPUT"===a.nodeName?a.parentNode.parentNode:a.parentNode,r=s.nextSibling,o=s.previousSibling,l=null===o,c=null===r;if(t.preventDefault(),n&&!l){var d=o.querySelector("button, input");return d.removeAttribute("tabindex"),a.setAttribute("tabindex","-1"),d.focus(),!1}if(n&&l){var h=s.parentNode.lastChild.querySelector("button, input");return h.removeAttribute("tabindex"),a.setAttribute("tabindex","-1"),h.focus(),!1}if(i&&!c){var u=r.querySelector("button, input");return u.removeAttribute("tabindex"),a.setAttribute("tabindex","-1"),u.focus(),!1}if(i&&c){var p=s.parentNode.firstChild.querySelector("button, input");p.removeAttribute("tabindex"),a.setAttribute("tabindex","-1"),p.focus()}return!1}))},reset:function(t,e){this.activePage=this.settings.activePage,this.previousOperation=t,this.previousTrigger=e,this.teardown(),this.init()},showPageSizeSelector:function(t){t="true"==="".concat(t).toLowerCase(),this.settings.showPageSizeSelector=t,t&&(this.isShowPageSizeSelectorCall=t)},showButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var n=".pager-".concat(t," .btn-icon");"previous"===t&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);e="true"==="".concat(e).toLowerCase(),this.settings["show".concat(k.capitalize(t),"Button")]=e,i&&(e?i.parentNode.classList.remove("hidden"):i.parentNode.classList.add("hidden"))}},enableButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var n=".pager-".concat(t," .btn-icon");"previous"===t&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);e="true"==="".concat(e).toLowerCase(),this.settings["enable".concat(k.capitalize(t),"Button")]=e,i&&(e?(i.disabled=!1,i.parentNode.classList.remove("is-disabled"),$(i).removeAttr("disabled")):(i.disabled=!0,i.parentNode.classList.add("is-disabled"),$(i).attr("disabled","disabled")))}},setActivePage:function(t,e,i){var a="number"==typeof t.searchActivePage||"number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage,s=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===n(t)?s=a?t.filteredActivePage||t.searchActivePage:t.activePage?t.activePage:1:isNaN(t)||(s=t),a?this.filteredActivePage=s:this.activePage=s,this.previousOperation=i,this.render(),void 0===s||0===s||isNaN(s)||s===this.activePage&&!e?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),s)},adjustPageCount:function(t){var e=this.state,n=e.pages;return("number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage)&&e.filteredPages&&(n=e.filteredPages),(t<1||t>n)&&(t=this.filteredActivePage||this.activePage),t},pageCount:function(t){var e=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===t&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==t||this.settings.source||e?(void 0!==t&&(this._pageCount=t),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function(){var t=this.activePage,e=this.state.pages,n="",i=!1,a=!1,s=!1,r=!1,o=!this.settings.enableFirstButton,l=!this.settings.enablePreviousButton,c=!this.settings.enableNextButton,d=!this.settings.enableLastButton,h=this.settings.indeterminate&&!0===this.firstPage,u=this.settings.indeterminate&&!0===this.lastPage,p=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(t=this.state.filteredActivePage,e=this.state.filteredPages),this.settings.showFirstButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===t)&&(o=!0),i=!0),this.settings.showPreviousButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===t)&&(l=!0),a=!0),this.settings.showNextButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&t===e)&&(c=!0),s=!0),this.settings.showLastButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&t===e)&&(d=!0),r=!0);var f=[],g=this.settings.showPageSizeSelector?190:0,m=(this.pagerBar.width()-g)/40,v=Math.floor(m);if((a||s)&&(v-=1),(r||i)&&(v-=1),!this.isTable&&"standalone"!==this.settings.type&&p&&v>=e&&(o=!0,d=!0),!this.settings.indeterminate){for(var b=Math.floor(v/2),y=t-b,w=t+b;y<1;)++y,w<e&&++w;for(;w>e;)y>1&&--y,--w;for(var x=y;x<w+1;x++)f.push(x)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="",c="",d="",h="",u="";i&&(u=' data-page="'.concat(i,'"')),n&&(h=' title="'.concat(n,'"')),o&&(a+=" hidden"),s&&(a+=" selected",l=' aria-disabled="true"'),r&&(c=" disabled",l=' aria-disabled="true"',d='<div class="disabled-tooltip"'.concat(h,"></div>"),i||(h=""));var p='<li class="'.concat(a,'">\n        <button type="button" class="btn-icon"').concat(h).concat(u).concat(l).concat(c,">\n          ").concat(d,"<span>").concat(e,"</span>\n          ").concat(t,"\n        </button>\n      </li>");return p}if($(this.numberButtons).remove(),i&&(n+=C($.createIcon({icon:"first-page"}),D.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,o,!1)),a&&(n+=C($.createIcon({icon:"previous-page"}),D.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,l,!1)),!this.isTable&&p){var k="";f.forEach((function(e){k+=e===(t||1)?C(e,D.translate("PageOn"),null,e,"pager-no",!0,!1,!1):C(e,D.translate("Page"),null,e,"pager-no",!1,!1,!1)})),n+=k}s&&(n+=C($.createIcon({icon:"next-page"}),D.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,c,!1)),r&&(n+=C($.createIcon({icon:"last-page"}),D.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,d,!1)),this.pagerBar[0].innerHTML=n,r||i||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate){var t=this.activePage,e=this.state.pages||1;if(this.state.filteredPages&&(t=this.state.filteredActivePage,e=this.state.filteredPages),this.pageSelectorInput)e>1&&this.pagerBar.find(".pager-total-pages").text(e),this.pagerBar.find(".pager-count input").val(t);else{var n=D.translate("PageOf");n=(n=n.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(t,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(e,"</span>")),$('<li class="pager-count"><label>'.concat(n," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var i=null,a="".concat(e).replace(/\d/g,"#"),s=this,r={pattern:a,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(r).on("focus",(function(){i=parseInt($(this).val(),10)})).on("blur",(function(){o($(this)),i=null})).on("keydown",(function(t){return 13!==t.which||(o($(this)),t.stopPropagation(),t.preventDefault(),!1)}))}function o(t){var e=s.adjustPageCount(parseInt(t.val(),10));if(i!==e){var n=s.activePage;s.state.filteredPages&&(n=s.state.filteredActivePage),t.val(s.setActivePage(e,!1,"page")),s.triggerPagingEvents(n)}else t.val(i)}},renderPageSizeSelectorButton:function(){var t=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var e=$('<li class="pager-pagesize"></li>'),n=$.createIcon({icon:"dropdown"}),i=D.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),a="",s="<span>".concat(i,"</span>");this.showSmallPageSizeSelector&&(a=' class="audible"',i=D.translate(this.settings.pageSizeSelectorText).replace("{0}",""),s='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(a,">").concat(i,"</span>"));var r=$('<button type="button" class="btn-menu">\n        '.concat(s,"\n        ").concat(n,"\n      </button>")).appendTo(e);e.appendTo(this.pagerBar);var o="";this.showSmallPageSizeSelector&&(o='<li class="heading">'.concat(i,"</li>"));for(var l=0;l<this.settings.pagesizes.length;l++){var c=this.settings.pagesizes[l];o+='<li class="'.concat(c===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(c,"</a></li>")}var d=$('<ul class="popupmenu is-selectable">'.concat(o,"</ul>"));r.after(d)}var h=$(this.pageSizeSelectorButton),u=b.extend({},{placementOpts:{parent:h,parentXAlignment:D.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);h.popupmenu(u),h.on("selected.pager",(function(e,n){t.changePageSize(n)}))}},render:function(){var t=this.state,e=t.pages;t.filteredPages&&(e=t.filteredPages),this.pageCount(e),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar()},renderBar:function(t){var e=(t=t?b.extend({},this.state,t):this.state).activePage;t.filteredActivePage&&(e=t.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==t.firstPage&&(!1===t.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==t.firstPage&&1!==e||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==t.lastPage&&(!1===t.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==t.lastPage&&e!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var n=this.pagerBar[0]?this.pagerBar[0].classList:null;this.hidePagerBar(t)&&n?n.add("hidden"):this.settings.hideOnOnePage&&n&&n.contains("hidden")&&n.remove("hidden"),this.initTabIndexes()},initTabIndexes:function(){var t=$(this.focusableElements);t.attr("tabindex","-1"),t.filter(":not([disabled])").first().removeAttr("tabindex")},triggerPagingEvents:function(t){var e=this.state;t||(t=this.state.activePage),"first"===e.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,e),this.element.trigger("firstpage",e)),"prev"===e.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,e),this.element.trigger("previouspage",e)),"next"===e.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,e),this.element.trigger("nextpage",e)),"last"===e.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,e),this.element.trigger("lastpage",e)),"pageinfo"!==e.type&&this.element.trigger("page",e)},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),Array.isArray(t.pagesizes)&&t.pagesizes.length&&(this.settings.pagesizes=t.pagesizes);var e={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(e),this},changePageSize:function(t){var e=t;e.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),e.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(e.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:t,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:t,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(t,e){if(t){if(t.pagesize&&(this.settings.pagesize=t.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=t.pagesize)),t.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==t.firstPage&&(this.firstPage=t.firstPage,this.settings.enableFirstButton=!t.firstPage,this.settings.enablePreviousButton=!t.firstPage),void 0!==t.lastPage&&(this.lastPage=t.lastPage,this.settings.enableNextButton=!t.lastPage,this.settings.enableLastButton=!t.lastPage),isNaN(t.grandTotal)||(this.grandTotal=t.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=t.total),isNaN(t.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=t.filteredTotal,this.filteredActivePage=t.searchActivePage||t.filteredActivePage||1),t.type||(t.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(t,!1,t.type),void("initial"===t.type||e||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(t){return!!(this.settings.hideOnOnePage&&t.total<=t.pagesize)||!(!t||!0!==t.firstPage||!0!==t.lastPage||!t.hideDisabledPagers)},teardown:function(){this.numberButtons&&this.numberButtons.forEach((function(t){var e=t.querySelector(".btn-icon"),n=$(e).data("button"),i=$(e).data("tooltip");n&&n.destroy(),i&&i.destroy()})),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),$(this.pageSelectorInput).data("mask").destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var t=$(this.pageSizeSelectorButton).data("popupmenu");if(t&&t.menu){var e=t.menu;t.destroy(),e.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(t){return this.each((function(){var e=$.data(this,"pager");e?e.updated(t):e=$.data(this,"pager",new Un(this,t))}))};var Gn={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1};function Yn(t,e){return this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Gn),this.init(),this}Yn.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var t={};this.settings.pagerSettings&&(t=this.settings.pagerSettings),t.dataset=this.settings.dataset,t.source=this.settings.source,t.type="list";for(var e=["pagesize","showPageSizeSelector"],n=0;n<e.length;n++)void 0===this.settings[e[n]]||t[e[n]]||(t[e[n]]=this.settings[e[n]]);return t},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var t=this,e=this.element.closest(".card, .widget"),i=this.element.attr("data-selectable"),a=this.element.attr("data-select-onfocus");if(this.element.attr("data-pagesize")){var s=Number(this.element.attr("data-pagesize"));isNaN(s)||(this.settings.pagesize=s),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var r=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),r.each((function(e,n){t.settings.dataset.push({text:$(n).text()})})),r.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var o=window[this.settings.dataset];o&&o.length&&(this.settings.dataset=o)}i&&i.length&&(this.settings.selectable=i),a&&a.length&&(this.settings.selectOnFocus=JSON.parse(a)),this.actionButton=e.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var l=this.element.parent(".card-content, .widget-content");if(l[0]&&(l[0].style.overflow="hidden"),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete");var c={filterMode:"contains"};"object"===n(this.settings.listFilterSettings)&&(c=b.extend({},c,this.settings.listFilterSettings)),this.listfilter=new ee(c)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(t){var e,n={count:t.length};if(t[0]){for(e in t[0])n[e]=0;for(var i=0;i<t.length;i++)for(e in t[i])n[e]+=parseFloat(t[i][e]);return n}},render:function(t,e){var i=this,a={},s=t,r=0,o=this.settings.pagesize,c=t.length;if(e&&(o=e.pagesize||o,c=e.filteredTotal||c),!("function"==typeof this.settings.source)&&this.pagerAPI&&(this.renderPager(e,!0),e=this.pagerAPI.state),c>o&&(this.filteredDataset?e.filteredPages:e.pages)>1){var d=e.activePage>0?e.activePage-1:0;this.filteredDataset&&(d=e.filteredActivePage-1),s=t.slice(r=e.pagesize*d,e.pagesize*(d+1))}if("object"===n(ne)&&s&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(k.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(t));var h=ne.compile(this.settings.template,{dataset:s,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),s.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(h):i.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),l.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):i.emptyMessageContainer?(this.element.empty(),l.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===s.length&&this.element.html(h||"<ul></ul>")}var u=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||u.find(".card-title, .widget-title").text()||"List"});var p=this.element.find("li, tbody > tr").first(),f=this.element.find("li, tr"),g="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=p.attr("tabindex",0),this.settings.selectable||1!==p.find("a").length||p.removeAttr("tabindex");var m=f.length>s.length;f.each((function(t){var e=$(this);if(e.attr("role","option"),g){i.element.addClass("is-multiselect");var n=i.element.prevAll(".toolbar");n.length&&n.data("toolbar")&&n.data("toolbar").toggleMoreMenu(),i.settings.showCheckboxes&&0===e.children(".listview-selection-checkbox").length&&e.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(D.translate("Checkbox")," ").concat(D.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}if(m){var a=r+t;if(a<i.settings.dataset.length){var s=i.settings.dataset[a];e.css("display",void 0===s._isFilteredOut||s._isFilteredOut?"":"none")}}else e.css("display","");e.attr({"aria-posinset":r+t+1,"aria-setsize":c}),e.hasClass("is-disabled")&&e.attr("aria-disabled","true"),i.settings.highlight&&i.searchTerm&&e.highlight(i.searchTerm)})),i.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[s]),this.element.off("updated.listview").on("updated.listview",(function(t,e){i.updated(e)}))},renderPager:function(t,e){this.pagerAPI&&this.pagerAPI.updatePagingInfo(t,e)},getPageableElements:function(){var t=this.element.children();return t.is("ul")&&(t=t.children()),t},refresh:function(t,e){this.loadData(t,e),this.list&&this.render(this.list.data)},loadData:function(t,e,i){var a=!1,s=this;if(t=t||this.settings.dataset,this.filteredDataset&&(t=this.filteredDataset),e||(this.pagerAPI?(t.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:t}),e=this.pagerAPI.state):e={activePage:1}),this.filteredDataset?e.filteredTotal=t.length:e.total=t.length,Array.isArray(t)){var r=this.settings.source;if("string"!=typeof t||0!==t.indexOf("http")&&0!==t.indexOf("/")||(r=t,a=!0),!r&&!a||this.filteredDataset||i)this.render(t,e);else switch(n(r)){case"function":r(e,o);break;case"string":return void(0!==r.indexOf("http")&&0!==r.indexOf("/")||$.getJSON(r,o));default:this.settings.dataset=r,t=r,this.render(r,e)}}function o(e,n){s.settings.dataset=e,t=e,"string"==typeof n&&(n={activePage:s.pagerAPI?s.pagerAPI.activePage:1,pagesize:s.settings.pagesize,total:t.length,type:n}),s.pagerAPI&&(s.renderPager(n,!0),n=s.pagerAPI.state),s.render(t,n)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(t){this.clearSelection(),t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++){var n=$("li, tbody tr",this.element).eq(e);n.is(".is-disabled, .is-selected")||this.select(n)}},deselectItemsBetweenIndexes:function(t){t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++){var n=$("li, tbody tr",this.element).eq(e);!n.is(".is-disabled")&&n.is(".is-selected")&&this.select(n)}},clearSelection:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},handleResize:function(){var t=$("li .listview-heading, tr .listview-heading",this.element),e=t.eq(1),n=e.width();e.length&&n&&(t[0].style.width="".concat(n,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(t,e){this.filter(e)},filter:function(t){if(t){var e=(t=$(t)).val().trim(),n={searchActivePage:1};if(e){if(e.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==e){this.searchTerm=e,this.element.unhighlight(),this.settings.dataset.forEach((function(t){t._isFilteredOut=!1}));var i=this.listfilter.filter(this.settings.dataset,this.searchTerm);i.length||(i=[]),n.filteredTotal=i.length,n.searchActivePage=1,i.forEach((function(t){t._isFilteredOut=!0})),this.filteredDataset=i,this.loadData(null,n),this.element.trigger("filtered",{elem:this.element,filteredResults:i,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach((function(t){delete t._isFilteredOut})),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this.refresh(null,{activePage:1,filteredTotal:void 0,searchActivePage:void 0})},focus:function(t){t.is(":hidden")||t.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=t.attr("tabindex",0).focus(),this.settings.selectable||1!==t.find("a").length||(t.find("a").focus(),t.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(t))},remove:function(t){"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t,!0),t.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var t=this;$.each(this.selectedItems,(function(e,n){t.remove(n)}))},clearAllSelected:function(){var t=this;$.each(this.selectedItems,(function(e,n){t.select(n)}))},sortInit:function(t,e,n){n&&""!==$.trim(n)&&$("[".concat(n,"]")).each((function(){var i=$(this),a=$.fn.parseOptions(i,n);i.on(e,(function(e){$(a.list).data(t).setSortColumn(a),e.preventDefault()}))}))},setSortColumn:function(t){var e=t.orderBy||this.list.sort.field,n=t.order;if(this.list.data||e){n=n?"desc"===n:!(this.list.sort&&this.list.sort[e]&&this.list.sort[e].reverse),(t.reloadApi||t.reloadApiNoSort)&&this.loadData(),t.reloadApiNoSort&&(n=this.list.sort[e=this.list.sort.field].reverse);var i=this.sortFunction(e,n);this.list.data.sort(i),this.render(this.list.data),this.list.sort={field:e},this.list.sort[e]={reverse:n},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(t,e,n){n||(n=function(t){return"string"==typeof(t=null==t?"":t)&&(t=t.toUpperCase(),isNaN(parseFloat(t))||(t=parseFloat(t))),t});var i=n?function(e){return n(e[t])}:function(e){return e[t]};return e=e?-1:1,function(t,n){return t=i(t),n=i(n),e*((t>n)-(n>t))}},deselect:function(t){"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t)},unselect:function(t){return P(this.deselect,this.unselect).apply(this,[t])},select:function(t,e){var n,i=this,a="mixed"===i.settings.selectable;if(i.selectedItems=[],"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),n=t.hasClass("is-selected"),t.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),t.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(t.parent().children().removeAttr("aria-selected"),t.parent().find(".is-selected").removeClass("is-selected"),i.selectedItems[0]=$(this)),n?(i.selectedItems=[],t.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(t.addClass("is-selected".concat(a?" hide-selected-color":"")),i.lastSelectedItem=t.index()),t.parent().find(".is-selected").each((function(t){i.selectedItems[t]=$(this)})),t.find(".listview-selection-checkbox input").prop("checked",!n),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var s=n?"NotSelected":"Selected";t.attr("aria-selected",!n),t.find(".label-text .audible").text("".concat(D.translate("Checkbox")," ").concat(s,"."))}if(!e){for(var r=n?"unselected":"selected",o=[],l=0;l<this.selectedItems.length;l++){var c=this.selectedItems[l][0].getAttribute("aria-posinset");o.push(this.settings.dataset[c-1])}this.element.triggerHandler(r,{selectedItems:this.selectedItems,elem:t,selectedData:o}),"unselected"===r&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:t,selectedData:o})}var d=this.element.closest(".card, .widget");d.length||(d=this.element.parent());var h=d.find(".listview-toolbar, .contextual-toolbar"),u=h.data("toolbar");if(i.selectedItems.length>0){u&&u.toggleMoreMenu(),h.one("animateopencomplete",(function(){i.element.addClass("is-toolbar-open"),h.trigger("recalculate-buttons").removeClass("is-hidden")})),h[0]&&(h[0].style.display="block"),h.animateOpen({distance:40});var p=h.find(".title, .selection-count");p&&p.length||(p=$('<div class="title selection-count"></div>'),h.prepend(p)),p.text("".concat(i.selectedItems.length," ").concat(D?D.translate("Selected"):"Selected"))}else h.addClass("is-hidden").one("animateclosedcomplete",(function(t){t.stopPropagation(),this.style.display="none",i.element.removeClass("is-toolbar-open")})).animateClosed()}},toggleItemActivation:function(t){t.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(t):this.activateItem(t)},activateItem:function(t){var e="number"==typeof t?t:t.index(),n=this.element.find("li.is-activated");"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),this.deactivateItem(n),!1!==this.element.triggerHandler("beforeactivate",[{index:e,elem:t,data:this.settings.dataset[e]}])&&(t.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:e,elem:t,data:this.settings.dataset[e]}]))},activatedItem:function(){var t=this.element.find("li.is-activated"),e=t.index();return{index:e,elem:t,data:this.settings.dataset[e]}},deactivateItem:function(t){"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),void 0===t&&(t=this.element.find("li.is-activated")),t.removeClass("is-activated");var e=t.index();e<0||this.element.triggerHandler("itemdeactivated",[{index:e,elem:t,data:this.settings.dataset[e]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var t=this.searchfield.data("searchfield");t&&t.xButton&&t.xButton.trigger("click")}},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset)),this.updateSearch(),this.refresh(t&&t.dataset?t.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData("listview")},handleEvents:function(){var t=this,e=!1,n=!1,i="multiple"===t.settings.selectable||"mixed"===t.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",(function(i){var a=$(this);if(!(i.originalEvent&&i.originalEvent.target&&$(i.originalEvent.target).is(".icon-favorite"))){if(a.is(":first-child")&&a.hasClass("is-disabled")){var s=$.Event("keydown.listview");s.keyCode=40,e=!0,a.trigger(s)}e||a.hasClass("is-disabled")||!t.settings.selectOnFocus||"multiple"===t.settings.selectable||"mixed"===t.settings.selectable||(t.select(a),e=!0,n=!0)}})),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",(function(e){var n=$(this),a=n.is("a")?n.closest("li"):$(this),s=a.is("a")?a.closest("ul"):a.parent(),r=e.keyCode||e.charCode||0,o=e.metaKey;if(0===a.index()&&38===e.keyCode)return!1;if((40===r||38===r)&&!o){var l=40===e.keyCode?a.nextAll(":not(.is-disabled):visible:first"):a.prevAll(":not(.is-disabled):visible:first");l.length&&($(e.target).is(a)||e.shiftKey||n.is("a"))&&t.focus(l),e.preventDefault(),e.stopPropagation()}if(35===r||40===r&&o){var c=s.children().last();return t.focus(c),e.stopPropagation(),!1}if(36===r||38===r&&o){var d=s.children().first();return t.focus(d),e.stopPropagation(),!1}return 32===r&&$(e.target).is(a)&&(i&&e.shiftKey?t.selectItemsBetweenIndexes([t.lastSelectedItem,a.index()]):t.select(a),e.preventDefault()),i&&(e.ctrlKey||e.metaKey)&&65===r&&(t.toggleAll(),t.focus(a),e.preventDefault()),!0})),this.settings.selectable){this.element.addClass("is-selectable");var a=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",(function(s){var r=$(this),o=$(s.target).closest(".listview-selection-checkbox").length>0,l="mixed"===t.settings.selectable,c=$(s.target);c.hasClass("icon-favorite")||c.hasClass("hyperlink")||(n||r.hasClass("is-disabled")||l&&!o||(e=!0,i&&s.shiftKey?(t.selectItemsBetweenIndexes([t.lastSelectedItem,r.index()]),s.preventDefault()):t.select(r),r.focus()),r.hasClass("is-disabled")||!l||o||(r.focus(),t.toggleItemActivation(r)),a.length>0&&$(window).outerWidth()<767&&!r.hasClass("is-disabled")&&!o&&t.element.trigger("drilldown",[r]),n=!1,s.preventDefault(),s.stopPropagation(),t.element.trigger("click",[{elem:r,data:t.settings.dataset[r.attr("aria-posinset")-1],index:r.index(),originalEvent:s}]))})),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",(function(e){var n=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("dblclick",[{elem:$(this),data:t.settings.dataset[n.attr("aria-posinset")-1],index:n.index(),originalEvent:e}]),!1})),this.element.off("contextmenu.listview","li, tr").on("contextmenu.listview","li, tr",(function(e){var n=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("contextmenu",[{elem:$(this),data:t.settings.dataset[n.attr("aria-posinset")-1],index:n.index(),originalEvent:e}]),!1}))}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",(function(t){$(this).parent().trigger("click"),t.stopPropagation()})),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",(function(e){t.handleSearch(e,$(this))})).off("cleared.searchable-listview").on("cleared.searchable-listview",(function(){t.resetSearch(),t.element.trigger("filtered",{elem:t.element,filteredResults:[],term:""})})),this.pagerAPI&&this.element.off("page.listview").on("page.listview",(function(e,n){t.handlePageChange(n)})).off("pagesizechange.listview").on("pagesizechange.listview",(function(e,n){t.handlePageSizeChange(n)})),$("body").off("resize.listview").on("resize.listview",(function(e){t.handleResize(e)})),t.element.prev(".listview-header").off("click.listview").on("click.listview",(function(){var e=$(this).find(".plus-minus");e.hasClass("active")?(e.removeClass("active"),t.element.animateClosed()):(e.addClass("active"),t.element.animateOpen())}))},handlePageSizeChange:function(t){t.activePage=1,this.loadData(void 0,t)},handlePageChange:function(t){this.loadData(void 0,t)}},$.fn.listview=function(t){var e=$(this),n=e.attr("data-dataset"),i=e.attr("data-tmpl"),a=b.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var s=b.extend({},t,a);return this.each((function(){var t=$.data(this,"listview");t?t.updated(s):t=$.data(this,"listview",new Yn(this,s))}))};var Kn={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function Xn(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Kn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.init()}Xn.prototype={init:function(){var t=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout((function(){t.setSelected()}),0)},loadListview:function(){var t=this.settings,e=$(".listview",this.element);return!t.dataset.length&&e.length&&$("li",e).length?this.listApi=e.listview({selectable:"single"}).data("listview"):e.length&&(this.listApi=e.listview({dataset:t.dataset,template:t.template,selectable:"single"}).data("listview")),this},initDataset:function(){var t=this.settings,e=$(".listview li",this.element);this.dataset=[];for(var n=0,i=e.length;n<i;n++){var a=void 0,s=$(e[n]);t.dataset?(a=JSON.parse(JSON.stringify(t.dataset[n]))).node=s:a=this.extractNodeData(s),this.dataset.push(a)}return this},extractNodeData:function(t){var e={node:t,text:$.trim($(".item-content",t).text())},n=t.attr("data-value");return void 0!==n&&(e.value=n),e},setElements:function(){var t=this,e=this.settings,n=function(e){return t.isjQuery(e)?e:"string"==typeof e?$('[data-action="'.concat(e,'"]'),t.element):null};return e.btnAdd=n(e.btnAdd),e.btnGoUp=n(e.btnGoUp),e.btnGoDown=n(e.btnGoDown),e.btnEdit=n(e.btnEdit),e.btnDelete=n(e.btnDelete),this.topButtons=e.btnAdd.add(e.btnGoUp).add(e.btnGoDown).add(e.btnEdit).add(e.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:e.handle,placeholder:e.templateNewItem}).data("arrange"),this},handleEvents:function(){var t,e=this,n=this,i=n.settings,a=function(t,e){t.off("click.listbuilder").on("click.listbuilder",(function(){n[e]()}))};return a(i.btnAdd,"addItem"),a(i.btnGoUp,"moveItemUp"),a(i.btnGoDown,"moveItemDown"),a(i.btnEdit,"editItem"),a(i.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",(function(t,n){var a=e.getDataByNode(n.start),s=i.templateItemContent.replace(/{{text}}/g,a.data.text);e.arrangeApi.placeholders.attr("data-value",a.data.text).find(".item-content").html(s)})).on("arrangeupdate.listbuilder",(function(n,i){e.updateAttributes(),e.arrayIndexMove(e.dataset,i.startIndex,i.endIndex),(t=e.getDataByNode(i.end)).indexBeforeMove=i.startIndex,e.element.triggerHandler("arrangeupdate",[t])})),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",(function(){var t=$(this);t.is(".is-selected")||t.trigger("click")})),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",(function(n,i){t=e.getDataByNode(i.elem[0]),e.element.triggerHandler("selected",[t])})),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,(function(t,n){e.element.triggerHandler("updated",[n])})),this},addItem:function(){var t=this,e=this.settings;$.when(this.element.triggerHandler("beforeadd")).done((function(){var n,i=0,a=t.listApi.selectedItems[0],s=e.templateNewItem.replace(/{{text}}/g,D.translate("NewItem"));a&&a.length>0?(i=t.getDataByNode(a).index+1,$(s).insertAfter(a),n=$("li",t.ul).eq(i)):(t.ul.prepend(s),n=$("li:first-child",t.ul)),t.dataset.push(t.extractNodeData(n)),t.arrayIndexMove(t.dataset,t.dataset.length-1,i),t.updateAttributes(),n.trigger("click"),t.arrangeApi.updated(),t.editItem(!0),t.element.triggerHandler("afteradd",[{index:i,data:t.dataset[i]}])}))},moveItemUp:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&n.index>0&&$.when(t.element.triggerHandler("beforegoup",[n])).done((function(){var i=e.prev();e.insertBefore(i),t.updateAttributes(),t.arrayIndexMove(t.dataset,n.index,n.index-1),n.indexBeforeMove=n.index,n.index--,t.element.triggerHandler("aftergoup",[n])}))}},moveItemDown:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&n.index<t.dataset.length-1&&$.when(t.element.triggerHandler("beforegodown",[n])).done((function(){var i=e.next();e.insertAfter(i),t.updateAttributes(),t.arrayIndexMove(t.dataset,n.index,n.index+1),n.indexBeforeMove=n.index,n.index++,t.element.triggerHandler("aftergodown",[n])}))}},editItem:function(t){var e=this.listApi.selectedItems[0];e&&e.length>0&&(e.is(".is-editing")?this.commitEdit(e,t):this.makeEditable(e,t))},makeEditable:function(t,e){var n=this,i=n.getDataByNode(t),a=$(".item-content",t);void 0!==i.index&&i.index<n.dataset.length&&$.when(n.element.triggerHandler("beforeedit",[i])).done((function(){var s=o.escapeHTML((a.text().trim()||"").toString()),r=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(s,'" />'));t.addClass("is-editing"),a.html(r),setTimeout((function(){r.focus().select()}),0),r.on("click.listbuilder",(function(){return!1})).on("blur.listbuilder",(function(){return n.commitEdit(t,e)})).on("keypress.listbuilder",(function(i){13===(i.keyCode||i.charCode||0)&&(n.commitEdit(t,e),t.focus())})),n.element.triggerHandler("entereditmode",[i])}))},commitEdit:function(t,e){var n=this.settings,i=this.getDataByNode(t),a=$(".item-content",t),s=$(".edit-input",a);s.val(o.escapeHTML((s.val()||"").toString())),e&&(i.data.value=s.val()),i.data.text=s.val(),s.off("click.listbuilder blur.listbuilder keypress.listbuilder"),a.html(n.templateItemContent.replace(/{{text}}/g,s.val())),t.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[i])},deleteItem:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&$.when(t.element.triggerHandler("beforedelete",[n])).done((function(){t.listApi.removeAllSelected(),t.updateAttributes(),t.dataset.splice(n.index,1),t.element.triggerHandler("afterdelete",[n])}))}},getDataByNode:function(t){for(var e={},n=0,i=this.dataset.length;n<i;n++){var a=this.dataset[n];if($(a.node).is(t)){e={index:n,data:a};break}}return e},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},moveCursorToEnd:function(t){setTimeout((function(){if("number"==typeof t.selectionStart)t.selectionEnd=t.value.length,t.selectionStart=t.value.length;else if(void 0!==t.createTextRange){var e=t.createTextRange();e.collapse(!1),e.select()}}),100)},updateAttributes:function(){for(var t=$("li",this.ul),e=0,n=t.length;e<n;e++)$(t[e]).attr({"aria-posinset":e+1,"aria-setsize":n})},updateDataset:function(t){var e=this,n=$("li",this.ul),i=$(".listview",this.element).data("listview");i.deselectItemsBetweenIndexes([0,n.length-1]),this.settings.dataset=t,i.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout((function(){e.setSelected()}),0)},setSelected:function(){for(var t=$("li[selected]",this.ul),e=0,n=t.length;e<n;e++){var i=$(t[e]);i.removeAttr("selected"),i.is(".is-selected")||i.trigger("click")}return this},select:function(t){var e=this.getListItem(t);e&&!e.is(".is-selected")&&e.trigger("click")},unselect:function(t){var e=this.getListItem(t);e&&e.is(".is-selected")&&e.trigger("click")},getListItem:function(t){var e=$();if(this.isElement(t)&&$.contains(this.ul,t))e=this.isjQuery(t)?t:$(t);else{var n=parseInt(t,10),i=$("li",this.ul);!isNaN(n)&&n>-1&&n<i.length?e=i.eq(n):"first"==="".concat(t).toLowerCase()?e=i.first():"last"==="".concat(t).toLowerCase()&&(e=i.last())}return e.length<1?null:e.length>1?e.eq(0):e},isElement:function(t){return this.isjQuery(t)&&t.get(0)instanceof Element||t instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").addClass("is-disabled").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var t=0,e=this.topButtons.length;t<e;t++){var n=$(this.topButtons[t]).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,Kn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(t){return this.each((function(){var e=$.data(this,"listbuilder");e?e.updated(t):e=$.data(this,"listbuilder",new Xn(this,t))}))};var Qn=["click","immediate"],Jn=[!1,"responsive","always"],Zn={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:46,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,maxWidth:null,fullsize:Jn[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null};function ti(t){return t.trigger&&-1===Qn.indexOf(t.trigger)&&(t.trigger=Zn.trigger),t.fullsize&&-1===Jn.indexOf(t.fullsize)&&(t.fullsize=Zn.fullsize),t.breakpoint&&-1===c.available.indexOf(t.breakpoint)&&(t.breakpoint=Zn.breakpoint),t}function ei(t,e){this.settings=b.mergeSettings(t,e,Zn),this.settings=ti(this.settings),this.element=$(t),this.init(),this.reStructure()}ei.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var t;return this.trigger&&this.trigger.length?t=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(t=this.mainContent.data("contextualactionpanel")),t},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},get isOnTop(){var t=0,e=this.element;return $(".modal.is-visible").each((function(){t<this.style.zIndex&&(t=this.style.zIndex)})),t===e[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&c.isBelow(this.settings.breakpoint)},get closeBtn(){var t=this.capAPI;return t&&t.element instanceof $?t.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var t=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.overlay||(this.overlay=$('<div class="overlay" style="opacity: '.concat(t.settings.overlayOpacity,';"></div>'))),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(t.namespace),(function(e){$(e.currentTarget).is(t.trigger)&&t.open()})),"immediate"===this.settings.trigger){var e=new F({duration:1,timeoutCallback:function(){t.open()}});H.register(e)}if(t.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var n=new F({duration:1,timeoutCallback:function(){t.open()}});H.register(n)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function(){var t=this,e=!1,n=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(n,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var i=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(D.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(D.translate("Close"),"</span>\n        </button>\n      "));this.element.find(".modal-content").append(i),i.on("click.".concat(this.namespace),(function(){return t.close()})).tooltip()}this.settings.id&&this.element.attr("id",this.settings.id),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),e=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(e=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),e||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=o.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),e||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),b.fixSVGIcons(this.element)},reStructure:function(){var t=$(".modal-body",this.element),e=$("hr:first-child",t),n=$(".modal-buttonset",this.element);t&&t.length&&!t.parent().hasClass("modal-body-wrapper")&&t.wrap('<div class="modal-body-wrapper"></div>'),e&&e.length&&!e.parent().hasClass("modal-content")&&e.insertAfter(this.element.find(".modal-header")),n&&n.length&&!n.parent().hasClass("modal-content")&&n.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var t=this.element,e=t.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),n=t.find("select.dropdown[data-validate]"),i=t.find("[data-validate]:visible");if(n.each((function(){$(this).next(".dropdown-wrapper").is(":visible")&&(i=i.add(this))})),i.length>0){e.removeAttr("disabled");var a=!0;i.each((function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var n=t.is(".dropdown")&&t.next(".dropdown-wrapper").is(":visible")||null!==t[0].offsetParent;t.is(".required")?n&&!t.val()&&(a=!1):(t.validateField(),n&&!t.isValid()&&(a=!1)),n&&t.is(".error")&&(a=!1),a&&e.removeAttr("disabled")}})),a||e.is(":disabled")||e.attr("disabled","true")}},renderButtonset:function(){var t=this.settings.buttons,e={style:"modal"},n=this;if(!this.buttonsetElem){var i=this.element.find(".modal-buttonset");if(i&&i.length)e.detectHTMLButtons=!0;else{if(!Array.isArray(t)||!t.length)return;var a=this.element.find(".modal-body").parent(),s='<div class="'.concat(this.settings.useFlexToolbar?"toolbar-section ":"",'modal-buttonset"></div>');(i=$(s)).insertAfter(a),e.buttons=t}this.buttonsetElem=i,i.buttonset(e),this.buttonsetAPI=i.data("buttonset"),t=this.buttonsetAPI.toData().buttons}var r=this.buttonsetAPI.buttons,o=$(),l=100/r.length;r.forEach((function(e,i){var a=Array.isArray(t)&&t.length?t[i]:void 0,s=!1;a&&(e.element[0].setAttribute("id",t[i].id||b.uniqueId(e.element,"button","modal")),$(e.element).on("click.".concat(n.namespace),(function(t){var e=a.click;e&&(e.apply(n.element[0],[t,n]),s=!0)})),$(e.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(n.namespace),(function(t){s||($(t.target).is(".btn-cancel")&&(n.isCancelled=!0),n.close())})),a.validate&&e.element[0].classList.add("no-validation")),e.element[0].style.width="".concat(l,"%"),o.add(e)}))},addButtons:function(t){var e,n=this,i=this.element.find(".modal-body").parent(),a=this.element.find(".flex-toolbar"),s=100,r=!1;if(this.modalButtons=t,!t){var o=this.element.find(".modal-buttonset button");s=100/o.length;for(var l=0,c=o.length;l<c;l++)o[l].style.width="".concat(s,"%");return o.button(),void o.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(n.namespace),(function(t){$(t.target).is(".btn-cancel")&&(n.isCancelled=!0),n.close()}))}this.isCAP?(r=!0,e=this.element.find(".buttonset")):(e=this.element.find(".modal-buttonset")).length||(e=$('<div class="modal-buttonset"></div>').insertAfter(i)),s=100/t.length,t&&e.empty();for(var d=function(i,o){var l=$('<button type="button">\n        <span></span>\n      </button>'),c=l.find("span");c.text(i.text),l.attr("type",i.type||"button"),"separator"===i.cssClass&&(l=$('<div class="separator"></div>')),i.cssClass?l.attr("class",i.cssClass):l.addClass(i.isDefault?"btn-modal-primary":"btn-modal"),i.disabled&&(l[0].disabled=!0===i.disabled),i.audible&&c.addClass("audible"),void 0===i.validate||i.validate||l.addClass("no-validation");for(var d={},h=["id","name","text"],u=0;u<h.length;u++)i[h[u]]&&(d[h[u]]=i[h[u]]);if("input"===i.type){var p=$('<label class="audible" for="filter">'.concat(i.text,"</label>")),f=$('<input class="searchfield">').attr(d);return a.length?a.find(".toolbar-section.search").append(p,f):e.append(p,f),void f.searchfield(i.searchfieldSettings)}i.icon&&"#"===i.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===i.icon?"icon-close":""],icon:i.icon.substr("#icon-".length)}).prependTo(l),l[0].setAttribute("id",i.id||b.uniqueId(n.element,"button","modal"));var g=t[o].click;l.on("click.".concat(n.namespace),(function(t){g?g.apply(n.element[0],[t,n]):n.close()})),r||(l[0].style.width="".concat(s,"%")),l.button(),(n.settings.useFlexToolbar||n.settings.centerTitle)&&i.align?("left"===i.align&&a.find(".toolbar-section").eq(0).append(l),"center"===i.align&&a.find(".toolbar-section").eq(1).find("h2").append(l),"right"===i.align&&a.find(".toolbar-section").eq(2).append(l)):e.append(l)},h=0;h<t.length;h++)d(t[h],h)},sizeInner:function(){var t=this.element.find(".detailed-message"),e=$(window).height()-t.offset().top-150;t[0].style.maxHeight="".concat(e,"px"),t[0].style.overflow="auto",t[0].style.width="".concat(t.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var t=this;this.settings.beforeShow((function(e){return!1!==e&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===e?(t.busyIndicator&&(t.busyIndicator.remove(),delete t.busyIndicator),!0):(e instanceof jQuery||(e=$(e)),t.open(!0),t.element.find(".modal-body").empty(),t.element.find(".modal-body").append(e),e.show(),!0))}),{})}},open:function(t){var e,n=this;if($("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.element.next().is(".overlay")||this.element.after(this.overlay),this.element&&!this.element.parent().hasClass("modal-wrapper")&&this.element.wrap('<div class="modal-page-container"><div class="modal-wrapper"></div>'),this.root=this.element.closest(".modal-page-container"),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),(function(){n.sizeInner()})),this.sizeInner()),e=this.element.triggerHandler("beforeopen",[this]),$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1===e)return this.overlay.remove(),void(this.root[0].style.display="none");if(t||(this.callSource(),!this.settings.beforeShow)){var i=this,a=$(".modal"),s=a.length-1;if(a.each((function(t){var e=$(this);if(this.style.zIndex=(1020+(t+1)).toString(),e.data("modal")&&e.data("modal").overlay&&(e.data("modal").overlay[0].style.zIndex=(1020+t).toString()),!e.data("modal")){var n=e.closest(".modal-page-container").next(".overlay");n&&n[0]&&(n[0].style.zIndex=(1020+t).toString())}if(t===s){var a={element:parseInt(i.element[0].style.zIndex,10),overlay:parseInt(i.overlay[0].style.zIndex,10)};a.overlay||(i.overlay[0].style.zIndex=a.element-1)}})),$("body > *").not(this.element).not(".modal, .overlay, .modal-page-container").attr("aria-hidden","true"),this.settings.isAlert)this.element.attr("aria-labelledby","message-title"),this.element.attr("aria-describedby","message-text");else{var r=this.element.find("h1:first"),o=r.attr("id");o||(o="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),r.attr("id",o));var l=this.element.find(".modal-body"),c="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",o),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",c),this.element.attr("aria-describedby",c)):(l.attr("id",c),this.element.attr("aria-describedby",c))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),(function(){n.resize()})),this.root[0].style.display="",this.element[0].style.display="";var d=this,h=new F({duration:1,timeoutCallback:function(){d.resize(),d.element.attr("role",d.settings.isAlert?"alertdialog":"dialog"),d.root.removeAttr("aria-hidden"),d.overlay.attr("aria-hidden","true"),d.element.attr("aria-modal","true")}}),u=new F({duration:2,timeoutCallback:function(){d.element.addClass("is-visible")}});H.register(h),H.register(u),$("body").addClass("modal-engaged"),$(this.element).on("keypress.".concat(this.namespace),(function(t){var e=$(t.target);e.is(".editor, .searchfield, textarea, :button")||e.closest(".tab-list").length||$("#dropdown-list").length||13===t.which&&n.isOnTop&&!e.closest("form").find(":submit").length&&n.element.find(".btn-modal-primary:enabled").length&&(t.stopPropagation(),t.preventDefault(),(!e.hasClass("fileupload")&&!$(e).is(":input")||e.hasClass("colorpicker"))&&n.element.find(".btn-modal-primary:enabled").trigger("click"))})),$(".skip-link").on("focus.".concat(this.namespace),(function(t){t.preventDefault(),n.element.find(":focusable").first().focus()})),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),(function(){n.resize()}));var p=new F({duration:5,timeoutCallback:function(){d.disableSubmit()}});H.register(p),this.element.find("[data-validate]").removeClass("disable-validation");var f=new F({duration:20,timeoutCallback:function(){var t,e,n,i;i=(t=d).element.find(":focusable").not(".modal-header .searchfield").first(),t.keepFocus(),d.element.trigger("open",[t]),0===i.length&&(i=t.element.find(".btn-modal-primary")),1===i.length&&i.is(".btn-modal")&&(i=t.element.find(".btn-modal-primary")),1===i.length&&i.is("button")&&!i.is(":disabled")&&i.addClass("hide-focus"),d.settings.autoFocus&&(i.is(".tab:not(.is-selected) a")&&(e=(n=i.closest(".tab-container")).find(".is-selected")).length?(i=e,n.data("tabs").select(e.children("a").attr("href"))):i.focus())}});H.register(f);var g=new F({duration:30,timeoutCallback:function(){d.element.trigger("afteropen")}});H.register(g)}},resize:function(){var t,e,n=this.currentlyNeedsFullsize;n?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),t=.9*$(window).height()-this.settings.frameHeight,e=1*$(window).width()-this.settings.frameWidth);var i=this.element.find(".modal-body-wrapper");if(i.length&&(n?(i[0].style.maxHeight="",i[0].style.maxWidth=""):(i[0].style.maxHeight="".concat(t,"px"),i[0].style.maxWidth="".concat(e,"px"))),this.element.hasClass("lookup-modal")){var a=this.element.find(".datagrid-wrapper"),s=this.element.find(".pager-toolbar"),r=a.closest(".datagrid-container");t=t-(r.prev().is(".toolbar")?130:67)-(r.next().is(".pager-toolbar")?35:0)+(s.length?-15:0),n?(a[0].style.maxHeight="",a[0].style.maxWidth=""):(a[0].style.maxHeight="".concat(t,"px"),a[0].style.maxWidth="".concat(e,"px"))}this.element.hasClass("datagrid-columns-dialog")&&(i[0].style.overflow="hidden",t>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(t,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0));var o=this.element.find(".toolbar");o.length&&o.triggerHandler("recalculate-buttons")},isOpen:function(){return M("visible","isOpen"),this.visible},get isFocused(){var t=!1,e=document.activeElement;l.focusableElems(this.element[0]).forEach((function(n){if(!t){var i,a,s,r=$(n);(r.is($(e))||n.contains(e))&&(t=!0),r.is("div.dropdown, div.multiselect")&&(t=null===(i=r.parent().prev("select").data("dropdown"))||void 0===i||null==i?void 0:i.isFocused),r.is(".lookup")&&(t=null===(a=r.data("lookup"))||void 0===a||null==a?void 0:a.isFocused),r.is(".searchfield")&&(t=null===(s=r.data("searchfield"))||void 0===s||null==s?void 0:s.isFocused)}}));var n=$(e).parents(".tooltip, .popover");return n.length&&n.each((function(e,n){var i=$(n).data("tooltip");i&&i.isFocused&&(t=!0)})),t},keepFocus:function(){var t=this;$(document).off("keydown.".concat(t.namespace)).on("keydown.".concat(t.namespace),(function(e){if(27===(e.which||e.keyCode)){var n=$(".modal.is-visible");if(t.isCancelled=!0,n.length>1){n.not(":last").on("beforeclose.".concat(t.namespace),(function(){return!1})),n.on("afterclose.".concat(t.namespace),(function(){n.off("beforeclose.".concat(t.namespace))}));var i=n.last().data("modal");i&&i.close&&i.close()}else t.close()}}));var e=":focusable, [contenteditable], iframe",n=t.element.find(e),i=n.first(),a=n.last();this.changeObserver=new MutationObserver((function(){n=t.element.find(e),i=n.first(),a=n.last()})),this.changeObserver.observe(t.element[0],{childList:!0,subtree:!0}),$(t.element).off("keypress.".concat(t.namespace," keydown.").concat(t.namespace)).on("keypress.".concat(t.namespace," keydown.").concat(t.namespace),(function(t){if(9===(t.which||t.keyCode)){var e=$(t.target);!t.shiftKey&&e.is(a)?(t.preventDefault(),n.first().removeClass("hide-focus").focus()):t.shiftKey&&e.is(i)&&(t.preventDefault(),n.last().removeClass("hide-focus").focus())}})),this.settings.autoFocus&&$("body").on("focusin.".concat(t.namespace),(function(e){if(!t.dontCheckFocus&&t.isOnTop&&1!==$(e.target).closest(t.element).length&&!t.isFocused){t.dontCheckFocus=!0;var n=new F({duration:20,timeoutCallback:function(){delete t.dontCheckFocus}});H.register(n),i.removeClass("hide-focus").focus()}}))},close:function(t){if(!this.visible)return!0;this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver);var e=this.element.triggerHandler("beforeclose"),n=this,i=this.element.find("[data-validate]");if(this.root=this.element.closest(".modal-page-container"),i.addClass("disable-validation"),!1===e)return!1;this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(n.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.element.removeClass("is-visible"),this.overlay.attr("aria-hidden","true"),this.root&&this.root.attr("aria-hidden","true");var a=$(".modal-page-container");a.filter((function(t,e){var n=$(e).is("[aria-hidden]"),i="none"===$(e).css("display");return!n&&!i})).length<1&&($("body").removeClass("modal-engaged"),a.not(this.root).removeAttr("aria-hidden"),$(".overlay:not(.busy)").remove()),delete this.dontCheckFocus,n.element.trigger("close",n.isCancelled),this.settings.noRefocus||(this.isFocused&&document.activeElement.blur(),!this.oldActive&&this.settings.triggerButton&&(this.oldActive=this.useJqEl(this.settings.triggerButton)),this.oldActive&&$(this.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?this.oldActive.focus():this.trigger.parents(".toolbar, .formatter-toolbar").length<1&&this.trigger.focus()),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var s=$(this.closeBtn).data("tooltip");s&&(s.hide(),s.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var r=new F({duration:20,timeoutCallback:function(){n.overlay.remove(),n.root[0].style.display="none",n.element.trigger("afterclose"),s&&delete s.reopenDelay,("immediate"===n.settings.trigger||t)&&(!n.isCAP||n.isCAP&&!n.capAPI)&&n.destroy()}});return H.register(r),!1},useJqEl:function(t){return t instanceof jQuery?t:$(t)},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element,t,this.settings),this.settings=ti(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(){var t=this,e=this.element.trigger("beforedestroy");function n(){t.trigger.off("click.".concat(t.namespace)),t.element.off("keypress.".concat(t.namespace," keydown.").concat(t.namespace," beforeclose.").concat(t.namespace," afterclose.").concat(t.namespace)),t.element.find("button, .btn-close").off("click.".concat(t.namespace)),t.element.find(".paginated").off("afterpaging.".concat(t.namespace)),$(".skip-link").off("focus.".concat(t.namespace)),$("body").off("resize.".concat(t.namespace)),$(document).off("keydown.".concat(t.namespace)),1===t.element.find(".detailed-message").length&&$("body").off("resize.".concat(t.namespace)),t.isCAP&&t.capAPI&&t.capAPI.destroy(),t.buttonsetAPI&&(t.buttonsetAPI.buttons.forEach((function(e){$(e.element).off("click.".concat(t.namespace))})),t.buttonsetAPI.destroy(),t.buttonsetElem.remove(),delete t.buttonsetAPI,delete t.buttonsetElem),t.trigger.off("click.".concat(t.namespace)),t.root&&t.root.length?t.root.remove():t.element.closest(".modal-page-container").remove(),t.element[0].removeAttribute("data-modal");var e=new F({duration:21,timeoutCallback:function(){var e=null,n=t.element?t.element.data("modal"):null;n?e=t.element[0]:(n=t.trigger?t.trigger.data("modal"):null)&&(e=t.trigger[0]),e&&n&&n.overlay&&(n.overlay.remove(),$.removeData(e,"modal"))}});H.register(e),$.removeData(t.element[0],"modal")}this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),e&&(this.visible?(this.element.one("afterclose.".concat(t.namespace),(function(){n()})),this.close(!0)):n())}};var ni={title:"Message Title",status:"",message:"Message Summary",width:"auto",buttons:null,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7};function ii(t,e){this.element=$(t),this.settings=b.mergeSettings(t,e,ni),this.init()}ii.prototype={init:function(){var t,e=this,n=this.settings.allowedTags,i=!0;this.settings.allowedTags.length>0||(i=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(i?o.stripTags(this.settings.title,n):o.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><p class="message" id="message-text">'.concat(i?o.stripTags(this.settings.message,n):o.stripHTML(this.settings.message),"</p></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(D.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(t=this.element,this.content.empty().append(t.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,isAlert:!0,overlayOpacity:this.settings.overlayOpacity}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.message.on("beforeclose.message",(function(){return e.element.triggerHandler("beforeclose")})).on("beforeopen.message",(function(){return e.element.triggerHandler("beforeopen")})).on("open.message",(function(){e.element.trigger("open")})).on("afterclose.message",(function(){e.destroy(),e.settings.returnFocus&&e.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")})),$(document).on("keypress.message keydown.message",(function(t){27===(t.which||t.keyCode)&&setTimeout((function(){var t=e.message.data("modal");void 0!==t&&t.close()}),0)})),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):this.title.removeClass("has-status is-error is-alert is-success").find("svg").remove()},destroy:function(){var t=this.message.data("modal");void 0!==t&&t.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(t){return this.each((function(){return new ii(this,t)}))},$.fn.modal=function(t){return this.each((function(){var e=$.data(this,"modal"),n=$(this);if(n.is(".modal")||(e=n.closest(".modal").data("modal")),e&&t)return e.updated(t),void("function"==typeof e[t]&&e[t]());e&&!t||(e=$.data(this,"modal",new ei(this,t)))}))},$.fn.monthview=function(t){return this.each((function(){var e=$.data(this,"monthview");e?e.updated(t):e=$.data(this,"monthview",new Oe(this,t))}))};var ai={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0};function si(t,e){this.settings=b.mergeSettings(t,e,ai),this.element=$(t),this.init()}si.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(t){return this.each((function(){var e=$.data(this,"multiselect");e?e.updated(t):e=$.data(this,"multiselect",new si(this,t))}))};var ri={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view."};function oi(t,e){this.settings=b.mergeSettings(t,e,ri),this.element=$(t),this.init()}oi.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var t='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),e='<p class="notification-text">'.concat(this.settings.message);this.settings.linkText&&(e+='<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>")),e+="</p>";var n='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(D.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=t.concat(e,n);var i=document.querySelector(this.settings.parent);return i.parentNode.insertBefore(this.notificationEl,i.nextSibling),$(this.notificationEl).animateOpen(),this},handleEvents:function(){var t=this;return this.element.off("updated.".concat("notification")).on("updated.".concat("notification"),(function(){t.updated()})),$(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",(function(){t.destroy()})),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,ri)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("notification")),this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),this.teardown(),$.removeData(this.element[0],"notification")}},$.fn.notification=function(t){return this.each((function(){$.data(this,"notification",new oi(this,t))}))};var li={value:0};function ci(t,e){this.settings=b.mergeSettings(t,e,li),this.element=$(t),this.init()}ci.prototype={init:function(){var t=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",(function(e){e.stopPropagation(),t.update()})),this},updateAria:function(t){this.element.attr({role:"progressbar","aria-valuenow":t,"aria-valuemax":"100"});var e=this.element.parent();e.data("tooltip")?e.data("tooltip").content="".concat(t,"%"):(e[0].setAttribute("title","".concat(t,"%")),e.tooltip())},unbind:function(){return this.element.off("updated.progress"),this},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.element.attr("data-value",t),this.element[0].style.width="".concat(t.toString(),"%"),this.updateAria(t)},updated:function(t){return void 0!==t&&t.value&&(this.settings.value=t.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(t){return this.each((function(){var e=$.data(this,"progress");e?e.updated(t):e=$.data(this,"progress",new ci(this,t))}))};var di={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function hi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,di),this.init(),M("Popover","Popdown")}hi.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this;function e(e){return!!e&&("string"==typeof e&&(e.match("#")&&0===e.indexOf("#")||(e="#".concat(e)),e=$(e)),!!e.length&&(t.popdown=e,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||l.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),e(this.trigger.attr("data-popdown"))||e(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var t=this.trigger.attr("aria-expanded");return t&&void 0!==t||this.trigger.attr("aria-expanded",""),"true"===t&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var t=this,e=this;return this.trigger.on("click.popdown",(function(){e.toggle()})).on("updated.popdown",(function(){e.updated()})),this.setFirstLastTab(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",(function(){t.toggle()})),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||l.isElement(this.settings.trigger)},hasFocus:function(t){var e=t||document.activeElement;if(this.trigger.is(e))return!0;if(this.popdown[0].contains(e))return!0;var n=this.popdown[0].querySelectorAll(".dropdown, .multiselect"),i=!1;return n.forEach((function(t){var n=$(t).data("dropdown");n&&n.list&&n.list.length&&n.list[0].contains(e)&&(i=!0)})),i},setFirstLastTab:function(){var t=this,e=this.settings;if(e.firstLastTab&&/function|boolean|object/.test(n(e.firstLastTab))){var i=null,a=null,s=null;if("object"===n(e.firstLastTab)?(e.firstLastTab.first&&((i=e.firstLastTab.first instanceof jQuery?e.firstLastTab.first:$(e.firstLastTab.first)).first(),this.popdown[0].contains(i[0])||(i=null)),e.firstLastTab.last&&((a=e.firstLastTab.last instanceof jQuery?e.firstLastTab.last:$(e.firstLastTab.last)).first(),this.popdown[0].contains(a[0])||(a=null)),"function"==typeof e.firstLastTab.callback&&(s=e.firstLastTab.callback)):"function"==typeof e.firstLastTab?s=e.firstLastTab:("boolean"==typeof e.firstLastTab||e.firstLastTab)&&(s=this.closeAndContinue),s){if(!i||!a||i&&!i.length||a&&!a.length){var r=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!i||i&&!i.length)&&(i=r.first()),(!a||a&&!a.length)&&(a=r.last())}this.focusableElem={first:i,last:a},i.on("keydown.popdown",(function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),s({e:e,self:t,first:i}))})),a.on("keydown.popdown",(function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),s({e:e,self:t,last:a}))}))}}},closeAndContinue:function(t){var e=$(document).find(":focusable"),n=e.index(t.self.trigger);-1!==(n=t.e.shiftKey?n-1<0?-1:n-1:n+1>=e.length?-1:n+1)&&e.eq(n).focus(),t.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},open:function(){if(!this.isAnimating){var t=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus&&(this.focusableElem?this.focusableElem.first:this.popdown.find(":focusable").first()).focus(),setTimeout((function(){$("body").on("resize.popdown",(function(){t.hasFocus()||t.close()})),t.settings.keepOpen||$(document).on("click.popdown",e).on("focusin.popdown",e),t.isAnimating=!1}),400)}function e(e){t.hasFocus(e.target)||t.close()}},close:function(){if(!this.isAnimating){var t=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusin.popdown"),setTimeout((function(){t.popdown[0].style.display="none",t.isAnimating=!1}),400)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var t={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},e=window.innerHeight+$(document).scrollTop(),n=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(t.offset=this.scrollparent.offset(),t.scrollDistance.top=this.scrollparent.scrollTop(),t.scrollDistance.left=this.scrollparent.scrollLeft(),e-=t.offset.top+t.scrollDistance.top,n-=t.offset.left+t.scrollDistance.left);var i,a=!1,s=!1,r=this.trigger,o=r.offset(),l=0,c=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(o.left,"px"),this.popdown[0].style.top="".concat(o.top+r.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(r.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(i=this.popdown.offset()).left<0&&(a=!0,l=0-i.left);var d=i.left+this.popdown.outerWidth(!0);if(d>n&&(a=!0,l=d-n+(D.isRTL()?20:0)),a){this.popdown[0].style.left="".concat(i.left+-1*l,"px");var h=this.popdown[0].getBoundingClientRect(),u=r[0].getBoundingClientRect(),p=h.right-u.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(p,"px"),i=this.popdown.offset()}i.top<0&&(s=!0,c=0-i.top);var f=i.top+this.popdown.outerHeight(!0);f>e&&(s=!0,c=f-e),s&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(i.top+-1*c,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*c,"px"),i=this.popdown.offset()),(i.top<0||i.top+this.popdown.outerHeight(!0)>e)&&(this.popdown[0].style.top=0,f=(i=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(f-e),"px"))},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger.off("updated.popdown click.popdown focus.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.focusableElem&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(t){return this.each((function(){var e=$.data(this,"popdown");e?e.updated(t):e=$.data(this,"popdown",new hi(this,t))}))};var ui={};function pi(t,e){this.settings=b.mergeSettings(t,e,ui),this.element=$(t),this.init()}pi.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.readonly()},handleEvents:function(){for(var t=this,e=$("input",this.element),n=function(n,i){$(e[n]).on("change.".concat("rating"),(function(){t.element.hasClass("is-readonly")||t.val(n+1)}))},i=0,a=e.length;i<a;i++)n(i)},fillStar:function(t,e){$(t).addClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-filled")},emptyStar:function(t,e){$(t).removeClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-outlined")},halfStar:function(t,e){$(t).addClass("is-half").removeClass("is-filled").next(e).find("svg").changeIcon("star-half")},val:function(t){if(0===arguments.length||""===t||isNaN(t)||-1===x.sign(t))return this.currentValue;this.currentValue=parseFloat(t,10);for(var e=Math.floor(this.currentValue),n=0,i=this.allInputs.length;n<i;n++){var a=$(this.allInputs[n]),s=a.parent().is(".inline")?"svg":"label",r=t%1!=0&&e===n;r?this.halfStar(a,s):n<t?this.fillStar(a,s):this.emptyStar(a,s),n+1===e&&a.prop("checked",!0)}return e<=0&&t>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var t=$(this.element);t.hasClass("is-readonly")&&t.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("change.".concat("rating")),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,ui)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(t){return this.each((function(){var e=$.data(this,"rating");e?e.updated(t):e=$.data(this,"rating",new pi(this,t))}))};var fi={};function gi(t,e){this.settings=b.mergeSettings(t,e,fi),this.element=$(t),this.init()}gi.prototype={init:function(){this.handleKeys()},isCapslock:function(t){var e=!1,n=!1;return(t=t||window.event).which?e=t.which:t.keyCode&&(e=t.keyCode),t.shiftKey?n=t.shiftKey:t.modifiers&&(n=!!(4&t.modifiers)),!!(e>=97&&e<=122&&n)||e>=65&&e<=90&&!n},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,fi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function(){var t=this,e=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',(function(n){var i=$(this),a=i.parent(".field"),s=$(".icon-capslock",a);t.isCapslock(n)&&!i.hasClass("error")?s.length||(a.append(e),$("body").toast({audibleOnly:!0,message:D.translate("CapsLockOn")})):s.remove()})).on("blur.signin change.signin",'[type="password"]',(function(){var t=$(this),n=t.closest(".field"),i=$(".icon-capslock",n);setTimeout((function(){i&&i.length&&(t.hasClass("error")?i.remove():n.append(e))}),150)}))}},$.fn.signin=function(t){return this.each((function(){var e=$.data(this,"signin");e?e.updated(t):e=$.data(this,"signin",new gi(this,t))}))};var mi={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,persistTooltip:!1};function vi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,mi),this.init()}function bi(t){return t%1==0}function yi(t,e){return e&&!isNaN(e)&&0!==e||(e=1),Math.round(t/e)*e}function wi(t,e){var n=t[1],i=e[1];return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(i-n,2))}vi.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var t,e=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),void 0!==this.element.attr("data-ticks")){try{t=JSON.parse(e.element.attr("data-ticks"))}catch(u){t=[]}$.isArray(t)&&(this.settings.ticks=t)}var n="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?n:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{e.settings.tooltip=JSON.parse(e.element.attr("data-tooltip-content"))}catch(u){e.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var i=this.settings.tooltip.split(",");this.settings.tooltip=[i[0]],this.settings.tooltip.push(i[1]?i[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var a={value:this.settings.min,description:e.getModifiedTextValue(this.settings.min)},s={value:this.settings.max,description:e.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var r=e.settings.ticks||[];if($.isArray(r)&&r.length>0){var o=r.filter((function(t){return t.value===e.settings.min})),l=r.filter((function(t){return t.value===e.settings.max}));o.length>0&&(a.description=o[0].description,a.color=o[0].color,r=$.grep(r,(function(t){return t!==o[0]}))),l.length>0&&(s.description=l[0].description,s.color=l[0].color,r=$.grep(r,(function(t){return t!==l[0]})))}e.ticks.push(a);for(var c=0;c<r.length;c++){var d={};void 0!==r[c].value&&(d.value=r[c].value,d.description=void 0!==r[c].description?r[c].description:"",d.color=r[c].color,e.ticks.push(d))}e.ticks.push(s)}else this.ticks.push(a,s);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var h=this.settings.value.split(",");h[0]=isNaN(h[0])?this.settings.min:parseInt(h[0],10),h[1]=isNaN(h[1])?this.settings.max:parseInt(h[1],10),this.settings.value=h}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var t=this,e=!1;if("INPUT"!==t.element[0].tagName)throw new Error('Element with ID "'.concat(t.element.id,"\" cannot invoke a slider;  it's not an Input element."));t.originalElement={type:t.element.attr("type")},t.element.attr("type","hidden"),t.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(t.element.attr("id"),"-slider")).insertAfter(t.element),t.hitarea=$('<div class="slider-hit-area"></div>').appendTo(t.wrapper),t.range=$('<div class="slider-range"></div>').appendTo(t.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),e=!0),this.isRtlHorizontal=D.isRTL()&&!e,this.isRtlVertical=D.isRTL()&&e;var n=this.element.attr("style");n&&(n.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,n=n.replace("min-height","")),n.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),n.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,n=n.replace("min-width","")),n.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),t.handles=[];var i=t.element.prev("label").text(),a=$('<div class="slider-handle'.concat(t.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(D.translate(t.settings.range?"SliderMinimumHandle":"SliderHandle")," ").concat(i));if(t.handles.push(a),t.settings.range){var s=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(D.translate("SliderMaximumHandle")," ").concat(i));t.handles.push(s)}return $.each(t.handles,(function(n,i){i.attr({role:"slider","aria-orientation":e?"vertical":"horizontal","aria-valuemin":t.settings.min,"aria-valuemax":t.settings.max}).hideFocus(),i.appendTo(t.wrapper)})),t.ticks.forEach((function(n){!function(n){var i=t.isRtlHorizontal?100-t.convertValueToPercentage(n.value):t.convertValueToPercentage(n.value),a="calc(".concat(i,"% - 4px)");n.element=$('<div class="tick" data-value="'.concat(n.value,'"></div>')),n.label=$('<span class="label">'.concat(n.description,"</span>")),n.element[0].style[e?"bottom":"left"]=a,n.element.append(n.label),t.wrapper.append(n.element),e||(n.label[0].style.left="".concat(-(n.label.outerWidth()/2-n.element.width()/2),"px"))}(n)})),t.value(t.settings.value),t.updateRange(),$.each(t.handles,(function(n,i){t.settings.tooltip&&(i.tooltip({content:function(){return"".concat(t.getModifiedTextValue(Math.floor(t.value()[n])))},placement:e?"right":"bottom",trigger:"focus",keepOpen:t.settings.persistTooltip}),i.removeAttr("aria-describedby"))})),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),t},handleRangeClick:function(t){if(t.preventDefault(),!this.isDisabled()){var e=this,n=this.wrapper.hasClass("vertical"),i="click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageY:t.pageY,a=("click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageX:t.pageX)-e.wrapper.offset().left-$(document).scrollLeft(),s=i-e.wrapper.offset().top-$(document).scrollTop(),r=[a,s],o=[e.handles[0].offset().left+e.handles[0].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[0].offset().top+e.handles[0].height()/2-e.wrapper.offset().top-$(document).scrollTop()],l=e.value(),c=wi(r,o),d=l[0],h=e.handles[0];h.addClass("hide-focus");var u=function(){if(n){var t=e.wrapper.height();return(t-s)/t*100}return a/e.wrapper.width()*100}(),p=e.convertPercentageToValue(u);e.handles[1]&&c>wi(r,[e.handles[1].offset().left+e.handles[1].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[1].offset().top+e.handles[1].height()/2-e.wrapper.offset().top-$(document).scrollTop()])?(e.value([void 0,p]),h=e.handles[1],d=l[1]):e.value([p]),e.checkHandleDifference(h,d,p);var f=e.settings.step?e.settings.step:0;p<d?e.decreaseValue(t,h,p,f):e.increaseValue(t,h,p,f),e.settings.tooltip||h.focus()}},activateHandle:function(t){t.addClass("is-active")},deactivateHandle:function(t){t.removeClass("is-active")},enableHandleDrag:function(t){if(!this.isDisabled()){var e=this,n={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};t.drag(n).on("drag.slider",(function(t,n){!function(t,n,i){if(!e.isDisabled()){var a=function(){if(e.isVertical()){var t=e.wrapper.height()-n.outerHeight();return(t-i.top)/t*100}return i.left/(e.wrapper.width()-n.outerWidth())*100}(),s=e.convertPercentageToValue(a);if(e.settings.range){var r=e.value();n.hasClass("higher")&&s<=r[0]&&(s=r[0]),n.hasClass("lower")&&s>=r[1]&&(s=r[1])}e.settings.step&&(s=Math.round(s/e.settings.step)*e.settings.step),t.defaultPrevented||(e.value(n.hasClass("higher")?[void 0,s]:[s]),e.updateRange(),e.updateTooltip(n),e.element.trigger("sliding",n,s))}}(t,$(t.currentTarget),n)})).on("dragstart",(function(){$(this).addClass("is-dragging"),e.range.addClass("is-dragging"),e.element.trigger("slidestart",t)})).on("dragend",(function(){$(this).removeClass("is-dragging"),e.range.removeClass("is-dragging"),e.element.trigger("slidestop",t)}))}},disableHandleDrag:function(t){t.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),t.removeClass("is-dragging");var e=t.data("drag");e&&e.destroy()},convertValueToPercentage:function(t){return(t-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(t){var e=t/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-e+this.settings.min:e},getIncrement:function(){var t=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&t<=this.settings.step&&(t=this.settings.step),t},handleKeys:function(t,e){if(!e.isDisabled()){var n=t.which,i=$(t.currentTarget);switch(i.removeClass("hide-focus"),n){case 33:e.increaseValue(t,i,void 0,this.getIncrement());break;case 34:e.decreaseValue(t,i,void 0,this.getIncrement());break;case 35:e.increaseValue(t,i,this.settings.max);break;case 36:e.decreaseValue(t,i,this.settings.min);break;case 38:case 39:e.isRtlHorizontal&&39===n?e.decreaseValue(t,i):e.increaseValue(t,i);break;case 37:case 40:e.isRtlHorizontal&&37===n?e.increaseValue(t,i):e.decreaseValue(t,i)}}},increaseValue:function(t,e,n,i){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var a,s,r,o=this.value().slice(0),l=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher"))r=(s=(a=void 0!==n?n:o[1])+(l=bi(a)?l:isNaN(a%l)?0:a%l)<this.settings.max?a+l:this.settings.max)%l?s:yi(s,l),this.value([void 0,r]);else{var c=void 0===o[1]?this.settings.max:o[1];r=(s=(a=void 0!==n?n:o[0])+(l=bi(a)?l:isNaN(a%l)?0:l-a%l)<c?a+l:c)%l?s:yi(s,l),this.value([r])}this.checkHandleDifference(e,a,r),this.updateRange(),this.updateTooltip(e)},decreaseValue:function(t,e,n,i){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var a,s,r,o=this.value(),l=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher")){var c=void 0===o[0]?this.settings.min:o[0];r=(s=(a=void 0!==n?n:o[1])-(l=bi(a)?l:isNaN(a%l)?0:l-a%l)>c?a-l:c)%l?s:yi(s,l),this.value([void 0,r])}else r=(s=(a=void 0!==n?n:o[0])-(l=bi(a)?l:isNaN(a%l)?0:a%l)>this.settings.min?a-l:this.settings.min)%l?s:yi(s,l),this.value([r]);this.checkHandleDifference(e,a,r),this.updateRange(),this.updateTooltip(e)},updateRange:function(){for(var t=this,e=this.value(),n=[],i=this.getColorClosestToValue(),a=t.wrapper.hasClass("vertical"),s=0;s<this.ticks.length;s++)(this.settings.range?e[0]<this.ticks[s].value&&this.ticks[s].value<=e[1]:this.ticks[s].value<=e[0])?(this.ticks[s].element.addClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor=i,this.ticks[s].element.addClass("inherit"))):(this.ticks[s].element.removeClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor="",this.ticks[s].element.removeClass("inherit")));i&&(this.range[0].style.backgroundColor=i,$.each(this.handles,(function(t,e){e[0].style.backgroundColor=i,e[0].style.borderColor=i}))),$.each(t.ticks,(function(e){t.ticks[e].label[0].style.color=""})),n[0]=this.convertValueToPercentage(e[0]),void 0!==e[1]&&(n[1]=this.convertValueToPercentage(e[1]));var r=a?["bottom","top"]:t.isRtlHorizontal?["right","left"]:["left","right"],o={};function l(t,e){t.css(a?r[1]:r[0],"calc(".concat(a?100-e:e,"% - ").concat(t.outerWidth()/2,"px)"))}this.handles[1]?(o[r[0]]="".concat(n[0],"%"),o[r[1]]="".concat(100-n[1],"%")):(o[r[0]]="0%",o[r[1]]="".concat(100-n[0],"%")),this.range.css(o),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout((function(){t.handles[0].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")}),201)),l(this.handles[0],n[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout((function(){t.handles[1].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")}),201)),l(this.handles[1],n[1]),this.handles[0].attr("aria-valuemax",e[1]),this.handles[1].attr("aria-valuemin",e[0]))},checkHandleDifference:function(t,e,n){if(!$("html").hasClass("ie9")){var i=this.convertValueToPercentage(e),a=this.convertValueToPercentage(n);Math.abs(i-a)>3&&(t.addClass("is-animated"),this.range.addClass("is-animated"))}},updateTooltip:function(t){if(this.settings.tooltip){if(!t){var e,n=this.handles[0].data("tooltip");return this.handles[1]&&(e=this.handles[1].data("tooltip")),n.hide(),void(e&&e.hide())}var i=t.data("tooltip");t.hasClass("is-animated")?(i.hide(),t.one("slide-animation-end",(function(){a()}))):a()}function a(){i.position(),t.focus()}},getColorClosestToValue:function(){for(var t,e,n={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[W.currentTheme.id.split("-")[2]],i=this.value()[0],a=0;a<this.ticks.length;a++)(e=this.ticks[a].color)&&i>=this.ticks[a].value&&(t=e,t=e.indexOf("#")>-1?e:n[e]||n.default);return t},value:function(t,e){var n=this;return void 0===t&&void 0===e||(t&&$.isArray(t)&&(void 0!==t[1]&&(e=t[1]),t=t[0]),void 0===t&&$.isArray(n._value)&&void 0!==n._value[0]&&(t=n._value[0]),void 0===e&&$.isArray(n._value)&&void 0!==n._value[1]&&(e=n._value[1]),n._value=[t,e],n.element.val(void 0!==e?n._value:n._value[0]),$.each(n.handles,(function(t,e){var i=n._value[t],a=n.getModifiedTextValue(i);$.each(n.ticks,(function(t,e){e.value===i&&(a=e.description)})),e.attr({"aria-valuenow":n._value[t],"aria-valuetext":a})})),n.element.trigger("change")),n._value},getModifiedTextValue:function(t){return this.settings.tooltip?this.settings.tooltip[0]+t+this.settings.tooltip[1]:t},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var t=this;return $.each(this.handles,(function(e,n){t.enableHandleDrag(n)})),this},disable:function(){this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.addClass("is-disabled");var t=this;return $.each(this.handles,(function(e,n){t.disableHandleDrag(n)})),this},readonly:function(){var t=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,(function(e,n){t.disableHandleDrag(n)})),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(t,e){var n=this.value();this.checkHandleDifference(this.handles[0],n[0],t),this.handles[1]&&this.checkHandleDifference(this.handles[1],n[1],e);var i=this.value(t,e);return this.updateRange(),this.updateTooltip(),i},refresh:function(t,e){return P(this.setValue,this.refresh).apply(this,[t,e])},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var t=this;return $.each(t.handles,(function(e,n){t.disableHandleDrag(n),n.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")})),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",o.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function(){var t=this;return $.each(t.handles,(function(e,n){n.on("mousedown.slider",(function(){t.isDisabled()||$(this).focus()})).on("click.slider",(function(t){t.preventDefault()})).on("keydown.slider",(function(e){t.activateHandle(n),t.handleKeys(e,t)})).on("keyup.slider blur.slider",(function(){t.deactivateHandle(n)})),t.enableHandleDrag(n)})),t.wrapper.on("click.slider touchend.slider touchcancel.slider",(function(e){t.handleRangeClick(e)})),t.element.on("updated.slider",(function(){t.updated()})),t}},$.fn.slider=function(t){return this.each((function(){var e=$.data(this,"slider");e?e.updated(t):e=$.data(this,"slider",new vi(this,t))}))};var xi={autocorrectOnBlur:!1,min:-2147483647,max:2147483647,step:null,validateOnInput:!0};function Ci(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,xi),this.init()}Ci.prototype={get isTouch(){return u.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var t=this.element[0].style;return t.width&&(this.element.parent()[0].style.width="".concat(parseInt(t.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var t=this.checkForNumeric(this.element.val());return this.element.val(t),this.element.attr("data-trackdirty")&&this.element.data("original",t),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.max=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.max=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var t=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped)if(this.element.is(".field-options")){var e=this.element.closest(".field").find(".btn-actions");this.element.add(e).add(e.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>');this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var i=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach((function(e){if(i.indexOf(e)>-1){var n=e.replace("input","spinbox");t.isWrapped?t.element.parent(".spinbox-wrapper").addClass(n):t.isInlineLabel&&t.inlineLabel.addClass(n)}}));var a=this.element.attr("min"),s=this.element.attr("max"),r=this.element.attr("data-mask"),o="",l={role:"spinbutton"},c=0;if(a||s||r||(s="9999999"),(a||s)&&!r){var d="",h=a||"",u=s||"",p=h.length>u.length?h:u;for(c=0;c<=p.length;)d+="#",c++;-1===h.indexOf("-")&&-1===u.indexOf("-")||(d="-".concat(d.substring(0,d.length-1))),l["data-mask"]=d,r=d}var f=r.length;for(c=0;c<=f;)o+="9",c++;return-1===r.indexOf("-")?(l.min=a||0,l.max=s||o):(l.min=a||o,l.max=s||o.substring(0,o.length-1)),this.element.attr("data-mask-mode")&&"number"===this.element.attr("data-mask-mode")||(l["data-mask-mode"]="number"),this.element.data("mask")&&"object"===n(this.element.data("mask"))&&this.element.data("mask").destroy(),l["aria-valuemin"]=a||0,l["aria-valuemax"]=s||0,this.element.attr(l),this.updateAria(this.element.val()),this.element.mask(),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),this},enableLongPress:function(t,e){e.addButtonStyle(t),e.longPressInterval=setInterval((function(){$(t.currentTarget).is(":hover")&&e.handleClick(t)}),250)},disableLongPress:function(t,e){e.removeButtonStyle(t),clearInterval(e.longPressInterval),e.longPressInterval=null},handleClick:function(t){t.preventDefault(),this.isDisabled()||1!==t.which||this.isReadonly()||($(t.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(t,e){var n=t.which;if(-1!==$.inArray(n,[35,36,37,38,39,40])&&!this.isReadonly())switch(n){case 35:e.element.attr("min")&&e.element.val(e.element.attr("min"));break;case 36:e.element.attr("max")&&e.element.val(e.element.attr("max"));break;case 38:e.addButtonStyle(e.buttons.up),e.increaseValue();break;case 40:e.addButtonStyle(e.buttons.down),e.decreaseValue()}},handleKeyPress:function(t,e){var n=t.which;if(!(n<48||n>57&&n<96||n>105))return this.handleInput(t,e)},handleInput:function(t,e){if(!e.isDisabled()&&!this.isReadonly()&&!this.settings.autocorrectOnBlur)return this.correctValue(t)},handleKeyup:function(t,e){if(!e.isDisabled()&&!this.isReadonly()){var n=t.which;switch(n){case 38:case 39:D.isRTL()&&39===n?e.removeButtonStyle(e.buttons.down):e.removeButtonStyle(e.buttons.up);break;case 37:case 40:D.isRTL()&&39===n?e.removeButtonStyle(e.buttons.up):e.removeButtonStyle(e.buttons.down)}e.updateAria(e.element.val())}},handleAfterPaste:function(t){var e=Number(t.element.attr("min")),n=Number(t.element.attr("max")),i=Number(t.element.val());i<e&&(i=e),i>n&&(i=n),t.updateVal(i)},correctValue:function(t){var e=Number(this.element.val()),n=this.element.attr("min"),i=this.element.attr("max");return e<n?(t&&t.preventDefault(),this.updateVal(n)):e>i?(t&&t.preventDefault(),this.updateVal(i)):void 0},increaseValue:function(){var t=this.element.attr("max"),e=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return this.updateVal(t&&e>t?t:e)},decreaseValue:function(){var t=this.element.attr("min"),e=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return this.updateVal(t&&e<t?t:e)},updateVal:function(t){this.element.val(t).trigger("change"),this.updateAria(t)},checkForNumeric:function(t){return""===t?t:$.isNumeric(t)?Number(t):(t=parseInt(t,10),$.isNumeric(t)?Number(t):0)},updateAria:function(t){var e=this.element.attr("min"),n=this.element.attr("max");t=this.checkForNumeric(t),this.element[0].setAttribute("aria-valuenow",t||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==t&&n&&t>=n?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==t&&e&&t<=e?"disable":"enable")},addButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.addClass("is-active")}},removeButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){this.element.prop("disabled",!0),this.element.parent(".spinbox-wrapper").addClass("is-disabled")},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(t,e){t[(e=void 0===e||!(!e||"enable"===e))?"addClass":"removeClass"]("is-disabled")},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this},destroy:function(){var t=this.element.data("mask");for(var e in t&&"function"==typeof t.destroy&&t.destroy(),this.buttons){var n=$(e).data("button");n&&n.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function(){var t=this,e=!1;return this.element.on("focus.spinbox",(function(){t.element.parent(".spinbox-wrapper").addClass("is-focused")})).on("blur.spinbox",(function(){t.element.parent(".spinbox-wrapper").removeClass("is-focused"),t.settings.autocorrectOnBlur&&t.correctValue()})).on("keydown.spinbox",(function(e){t.handleKeyDown(e,t)})).on("input.spinbox",(function(e){t.handleInput(e,t)})).on("keyup.spinbox",(function(e){t.handleKeyup(e,t)})).on("afterpaste.mask",(function(){t.handleAfterPaste(t)})),this.buttons.up.add(this.buttons.down[0]).on("touchstart.spinbox mousedown.spinbox",(function(n){if(1===n.which){if(e||t.handleClick(n),t.isTouch)return;e=!0,t.enableLongPress(n,t),$(document).one("mouseup",(function(){t.disableLongPress(n,t),e=!1,t.element.focus()}))}})),this}},$.fn.spinbox=function(t){return this.each((function(){var e=$.data(this,"spinbox");e?e.updated(t):e=$.data(this,"spinbox",new Ci(this,t))}))};var ki={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"}};function Ti(t,e){this.settings=b.mergeSettings(t,e,ki),this.element=$(t),this.init()}Ti.prototype={init:function(){return this.build().handleEvents()},build:function(){var t,e=this,n=this.settings,i=this.element,a=i.parent(),s="x"===n.axis?"left":"top",r=a.is(".content")?a.parent():a,o=a.width();if(setTimeout((function(){t=a.height()}),0),this.docBody=$("body"),this.isSplitterRightSide=i.is(".splitter-right")||"x"===n.axis&&"right"===n.side,this.isSplitterHorizontal=i.is(".splitter-horizontal")||"y"===n.axis,n.uniqueId=b.uniqueId(this.element,"splitter"),this.isSplitterRightSide){var l=r.prev();if(l.is(".main")?(this.leftSide=l,o=r.parent().outerWidth()-o):(this.leftSide=r,i.addClass("splitter-right")),r.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),n.collapseButton){var c=0;this.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>'),this.splitterCollapseButton.appendTo(i),i[0].offsetLeft>10&&this.splitterCollapseButton.addClass("rotate"),this.splitterCollapseButton.click((function(){c<=0?i[0].offsetLeft<=10?(e.splitTo(299,t),$(this).addClass("rotate")):(c=i[0].offsetLeft,e.splitTo(0,t),$(this).removeClass("rotate")):i[0].offsetLeft>10?(c=i[0].offsetLeft,e.splitTo(0,t),$(this).removeClass("rotate")):(e.splitTo(c,t),$(this).addClass("rotate"),c=0)}))}}else this.isSplitterHorizontal?(this.topPanel=i.prev(),o=this.topPanel.height(),a.addClass("splitter-container is-horizontal"),i.next().addClass("flex-grow-shrink"),i.addClass("splitter-horizontal")):(this.rightSide=r,this.leftSide=r.prev().parent(),r.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"));return localStorage&&n.save&&!isNaN(parseInt(localStorage[n.uniqueId],10))&&(o=localStorage[n.uniqueId]),o=parseInt(o,10),i[0].style.top=this.isSplitterHorizontal?"".concat(o,"px"):0,this.splitTo(o,t),o<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:n.axis,containment:n.containment||"x"===n.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",(function(){var t=$("iframe");if(e.documentWidth=$(document).width(),t.length>0)for(var n=0,i=t.length;n<i;n++){var a=$(t[n]),s="".concat(parseInt(getComputedStyle(a.parent()[0]).width,10)-40,"px"),r=$('<div class="overlay splitter-overlay"></div>');r.css("width",s),a.before(r)}})).on("dragend.splitter",(function(i,a){$(".overlay").remove(),n.collapseButton&&(a[s]<=10?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===n.resize&&e.splitTo(a[s],t)})).on("drag.splitter",(function(i,a){return!(a.left<=0||("immediate"===n.resize&&e.splitTo(a[s],t),0))})),"y"===n.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),this},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(t,e,n){(e>n||e<0)&&(e=parseInt(n,10)/2),this.topPanel[0].style.height="".concat(e,"px")},resizeLeft:function(t,e){var n=this.leftSide.outerWidth()-e;this.rightSide[0].style.width="".concat(n,"px"),t[0].style.left=""},resizeRight:function(t,e){this.leftSide[0].style.width="".concat(e,"px"),t[0].style.left="".concat(e-1,"px")},splitTo:function(t,e){var n=this.settings,i=this.element;this.isSplitterRightSide?(t>n.maxWidth.right&&(t=n.maxWidth.right),this.resizeRight(i,t)):this.isSplitterHorizontal?this.resizeTop(i,t,e):(t>n.maxWidth.left&&(t=n.maxWidth.left),this.resizeLeft(i,t)),this.element.trigger("split",[t]),this.docBody.triggerHandler("resize",[this]),localStorage&&(localStorage[this.settings.uniqueId]=t),this.split=t,this.parentHeight=e},unbind:function(){return this.element.off("updated.".concat("splitter")),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,ki)),this.destroy().init()},destroy:function(){this.unbind(),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),$.removeData(this.element[0],"splitter")},handleEvents:function(){var t=this;return this.element.on("updated.".concat("splitter"),(function(){t.updated()})).on("keydown.".concat("splitter"),(function(e){32===e.which&&(t.toggleSelection(),e.preventDefault()),37===e.which&&t.splitTo(t.split-15,t.parentHeight),39===e.which&&t.splitTo(t.split+15,t.parentHeight)})),this}},$.fn.splitter=function(t){return this.each((function(){var e=$.data(this,"splitter");e?e.updated(t):e=$.data(this,"splitter",new Ti(this,t))}))};var Si={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function Ai(t,e){this.settings=b.mergeSettings(t,e,Si),this.element=$(t),this.init()}Ai.prototype={init:function(){var t=this,e=this.settings;e.draggable=$.extend(!0,Si.draggable,e.draggable),this.isTouch=u.features.touch,this.isAdditional=$("".concat(e.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout((function(){t.makeDraggable(),t.handleEvents(),t.initSelected(e.availableClass),t.initSelected(e.additionalClass)}),0)},loadListview:function(){for(var t=this.settings,e=[{dataset:t.available,class:t.availableClass,draggable:t.draggable.available},{dataset:t.selected,class:t.selectedClass,draggable:t.draggable.selected},{dataset:t.additional,class:t.additionalClass,draggable:t.draggable.additional}],i=0,a=e.length;i<a;i++){var s=e[i],r=$("".concat(s.class," .listview"),this.element),o=r.data("listview"),l={dataset:s.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===t.searchable||"true"===t.searchable)&&$("".concat(s.class," .searchfield"),this.element).length>0&&(l.searchable=!0),!s.dataset&&r.length&&$("li",r).length?r.listview(l):r.length&&(o&&o.destroy(),-1===t.template.indexOf('data-id="{{id}}"')&&(t.template=t.template.replace("<li",'<li data-id="{{id}}"')),l.template=t.template,l.dataset=s.dataset||[],l.dataset.forEach((function(t){/string|number/.test(n(t.id))&&""!==t.id||(t.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))})),0===l.dataset.length&&(l.forceToRenderOnEmptyDs=!0),r.listview(l)),s.draggable||$("ul",r).addClass("is-not-droppable")}},setElements:function(){var t=this.settings,e="";this.offset=null,this.containers=$("".concat(t.availableClass,",").concat(t.selectedClass,",").concat(t.additionalClass),this.element),this.actionButtons=$("".concat(t.availableBtn,",").concat(t.additionalBtn,",").concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.selectedButtons=$("".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.tabButtonsStr="".concat(t.availableBtn,", ").concat(t.additionalBtn,", ").concat(this.selectedButtons.length>1?t.selectedBtnRight:t.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},t.numOfSelectionsClass="num-of-selections",t.itemContentClass="swaplist-item-content",t.itemContentTempl=$('<div><p><span class="'.concat(t.numOfSelectionsClass,'">###</span> ').concat(D?D.translate("ItemsSelected"):" Items Selected ","</p><div/>")),t.draggable.available||(e="".concat(t.availableClass," ").concat(t.availableBtn,",").concat(t.selectedBtnLeft),$(e,this.element).prop("disabled",!0)),t.draggable.selected||(e="".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),t.draggable.available||(e+=",".concat(t.additionalClass," ").concat(t.additionalBtn)),this.isAdditional&&t.draggable.additional||(e+=",".concat(t.availableClass," ").concat(t.availableBtn)),$(e,this.element).prop("disabled",!0),$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element).addClass("is-rotate")),t.draggable.additional||$("".concat(t.additionalClass," ").concat(t.additionalBtn,",").concat(t.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var t=this.settings,e=[t.availableClass,t.selectedClass,t.additionalClass],n=0,i=e.length;n<i;n++){var a=$("".concat(e[n]," .listview"),this.element);$("li",a).length||a.addClass("is-multiselect")}},initSelected:function(t){if((t=this.isjQuery(t)?t:$(t,this.element)).length){for(var e=$(".listview",t).data("listview"),n=$("li[selected]",t),i=0,a=n.length;i<a;i++){var s=$(n[i]);s.removeAttr("selected"),e.select(s)}this.moveElements(t,this.settings.selectedClass)}},moveElements:function(t,e){if(null!==e){t="string"!=typeof t?t:$(t,this.element),e="string"!=typeof e?e:$(e,this.element);var n=$(".listview",t).data("listview");if(this.clearSelections(),this.selections.owner=t,this.selections.droptarget=e,this.isTouch){if(n.selectedItems)for(var i=0,a=n.selectedItems.length;i<a;i++)this.selections.items[i]=n.selectedItems[i].closest("li")}else this.selections.items=n.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(n),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var s=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof s&&!s||"string"==typeof s&&"false"===s.toLowerCase())return;var r=$("ul",e),o=$("li",r).length,l=this.selections.items.length+o;if(this.selections.items)for(var c=0,d=this.selections.items.length;c<d;c++){var h=$(this.selections.items[c]);h.attr({"aria-posinset":o+c+1,"aria-setsize":l}).find("mark.highlight").contents().unwrap(),r.append(h)}this.afterUpdate($(".listview",e).data("listview"))}}},getContainer:function(t){var e=this.settings;if("object"===n(t[0])&&t[0].node){var i=t[0].node.closest(".card"),a="";return i.is(e.availableClass)?a=e.availableClass:i.is(e.selectedClass)?a=e.selectedClass:i.is(e.additionalClass)&&(a=e.additionalClass),{container:i,class:a}}return null},unselectElements:function(t){if(t.selectedItems)for(var e=0,n=t.selectedItems.length;e<n;e++)t.select($(t.selectedItems[e]));t&&t.element&&t.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var t=document.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},isMatchMediaSupports:function(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t["".concat(e,"Width")],height:t["".concat(e,"Height")]}},isMaxWidth:function(t){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(t,"px)")).matches||this.viewport().width<=t},makeDraggable:function(){var t=this,e=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=e.first().attr("data-swap-handle"),this.handle=$(this.handle,e).length>0?this.handle:null,$(this.handle,e).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",(function(){t.selections.isHandle=!0})).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",(function(){t.selections.isHandle=!1})),this.targets=e.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",(function(){return this.dragDrop&&this.dragDrop(),!1})).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(t,e,n){for(var i=!1,a=$(t),s=0,r=a.length;s<r;s++){var o=$(a[s]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||n<=l.top||n>=l.top+o.outerHeight()||(i=o)}return i},draggTouchElement:function(t,e){var n=t.originalEvent.changedTouches[0];e[0].style.top="".concat(n.pageY-this.offset.y,"px"),e[0].style.left="".concat(n.pageX-this.offset.x,"px")},hasModifier:function(t){return t.ctrlKey||t.metaKey||t.shiftKey},addDropeffects:function(){if(this.targets)for(var t=0,e=this.targets.length;t<e;t++)$(this.targets[t]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var n=0,i=this.selections.items.length;n<i;n++)$(this.selections.items[n]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var t=0,e=this.selections.items.length;t<e;t++){var n=$(this.selections.items[t]);n.removeAttr("aria-grabbed".concat(n.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(t){t=this.isjQuery(t)?t:$(t,this.element);var e=$(".listview li",t),n=t.find(".listview").data("listview"),i=this.getDataList(t),a=!1;n&&n.filteredDataset&&(i=r(n.filteredDataset),a=!0);for(var s=0,o=e.length;s<o;s++){var l=$(e[s]),c=i[s];a&&(c.node=l,delete c._isFilteredOut),l.is(".is-selected")&&this.selections.itemsData.push(c)}},initDataset:function(){var t=this.settings,e=[{type:"available",dataset:t.available,class:t.availableClass},{type:"selected",dataset:t.selected,class:t.selectedClass},{type:"additional",dataset:t.additional,class:t.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var n=0,i=e.length;n<i;n++)for(var a=e[n],s=$("".concat(a.class," .listview li"),this.element),r=0,o=s.length;r<o;r++){var l=void 0,c=void 0,d=$(s[r]);a.dataset?delete(l=JSON.parse(JSON.stringify(a.dataset[r]))).selected:(l={text:$.trim($(".swaplist-item-content",d).text())},(c=d.attr("data-value"))&&(l.value=c)),this.dataset[a.type]&&(l.node=d,this.dataset[a.type].push(l))}},getDataList:function(t){var e=this.settings,n=this.dataset;return(t=this.isjQuery(t)?t:$(t,this.element)).is(e.additionalClass)?n.additional:t.is(e.selectedClass)?n.selected:t.is(e.availableClass)?n.available:[]},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},syncDataset:function(t,e){for(var n=$(".listview li",e),i=t.find(".listview").data("listview"),a=e.find(".listview").data("listview"),s=this.getDataList(t),r=this.getDataList(e),o=function(t,e){if(t&&e){var n={owner:t.getAttribute("data-id"),item:e.getAttribute("data-id")};return void 0!==n.owner&&void 0!==n.item&&n.owner===n.item}return!1},l=0,c=this.selections.items.length;l<c;l++)for(var d=this.selections.items[l],h=0,u=n.length;h<u;h++)if($(n[h]).is(d))for(var p=0,f=s.length;p<f;p++){var g=s[p];if(o(g.node[0],d[0])){r.push(g),s.splice(p,1),this.arrayIndexMove(r,r.length-1,h);break}}i.updated({dataset:s}),a.updated({dataset:r}),this.makeDraggable()},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},updateAttributes:function(t){for(var e=$("li",t),n=0,i=e.length;n<i;n++)$(e[n]).attr({"aria-posinset":n+1,"aria-setsize":i})},afterUpdate:function(t){var e=this.selections.droptarget.find("li:focus").index(),n=".card.".concat(this.selections.droptarget[0].classList[1]," li");t&&(this.selections.placeholder&&(t.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(t),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach((function(t){t.show()})),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),e>=0&&this.element.find(n).eq(e).focus()},getItems:function(t){return t=this.isjQuery(t)?t:$(t,this.element),this.getDataList(t)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(t,e){var n=!1;if(!this.selections.isInSelection){if(t.selectedItems)for(var i=0,a=t.selectedItems.length;i<a;i++)if(e.is(t.selectedItems[i]))return n=!0,!1;n||(t.select(e),this.selections.isInSelection=!0)}return!0},updateDataset:function(t){for(var e=this.settings,n=[{type:"available",dataset:t.available,class:e.availableClass},{type:"selected",dataset:t.selected,class:e.selectedClass},{type:"additional",dataset:t.additional,class:e.additionalClass}],i=0,a=n.length;i<a;i++){var s=n[i],r=$("".concat(s.class," .listview"),this.element),o=r.data("listview");o&&(o.deselectItemsBetweenIndexes([0,$("li",r).length-1]),e[s.type]=s.dataset||[],o.loadData(e[s.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(e.availableClass),this.initSelected(e.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,Si)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function(){var t=this,e=t.settings,n=t.selections;t.actionButtons.off("click.swaplist").on("click.swaplist",(function(){var n=$(this),i=n.closest(".card");i.is(e.availableClass)?t.moveElements(e.availableClass,e.draggable.selected?e.selectedClass:t.isAdditional&&e.draggable.additional?e.additionalClass:null):i.is(e.additionalClass)?t.moveElements(e.additionalClass,e.draggable.selected?e.selectedClass:e.draggable.available?e.availableClass:null):i.is(e.selectedClass)&&(n.is(e.selectedBtnLeft)?t.moveElements(e.selectedClass,e.availableClass):n.is(e.selectedBtnRight)&&t.moveElements(e.selectedClass,e.additionalClass))})),t.containers.on("keydown.swaplist",".listview",(function(n){var i=$(this).closest(t.containers);77===(n=n||window.event).keyCode&&t.hasModifier(n)&&(!i.is(e.selectedClass)||i.is(e.selectedClass)&&1===t.selectedButtons.length?i.find(t.actionButtons).trigger("click.swaplist"):t.selectedButtons.first().focus(),n.preventDefault())})),t.selectedButtons.on("keydown.swaplist",(function(e){var n,i=$(this);13!==(e=e||window.event).keyCode&&32!==e.keyCode||(i.trigger("click.swaplist"),e.preventDefault()),(37===e.keyCode||39===e.keyCode)&&t.selectedButtons.length>1&&(n=t.selectedButtons.index(this),t.selectedButtons[37===e.keyCode?n>0?n-1:t.selectedButtons.length-1:n<t.selectedButtons.length-1?n+1:0].focus())})),t.element.on("keydown.swaplist",t.tabButtonsStr,(function(t){var e=$(this);if(9===(t.keyCode||t.which)&&!t.shiftKey){var n=e.closest(".card")[0],i=[].slice.call(n.querySelectorAll("li[tabindex]")),a=!1;if(i.length&&i.forEach((function(t){-1!==parseInt(t.getAttribute("tabindex"),10)&&(a=!0)})),!a){var s=n.querySelector("li");s&&s.setAttribute("tabindex",0)}}})),t.containers.on("filtered.swaplist",".listview",(function(){t.makeDraggable()})),t.element.on("mousedown.swaplist",t.dragElements,(function(e){t.handle&&$(e.target).closest("li").attr({draggable:$(e.target).is(".draggable")}),e.stopPropagation()})).on(t.dragStart,t.dragElements,(function(i){if(i.stopImmediatePropagation(),!t.handle||n.isHandle){var a,s,r=$(i.target).closest("li"),o=$(".listview",r.closest(".card")).data("listview");if(o){t.isTouch||t.draggedMakeSelected(o,r),t.clearSelections(),n.owner=r.closest(".card"),n.dragged=r,n.draggedIndex=r.index(),n.placeholder=r.clone(!0),n.placeholder.attr("id","sl-placeholder"),t.setSelectionsItems(n.owner),n.items=o.selectedItems,t.selections.move={items:t.selections.itemsData,from:t.getContainer(t.selections.itemsData)};var l=t.element.triggerHandler("beforeswap",[t.selections.move]);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())n.dragged=null;else{if($(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(n.items.length),t.addDropeffects(),t.isTouch){a=r[0].getBoundingClientRect(),t.offset={x:(s=i.originalEvent.changedTouches[0]).pageX-a.left,y:s.pageY-a.top};for(var c=0,d=t.containers.length;c<d;c++)t.containers[c].style.zIndex="1";n.placeholderTouch=n.dragged.clone(!0),n.items.length>1&&!$("#sl-placeholder-touch2").length&&n.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(n.dragged).hide(),n.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(t.element.is(".one-third")&&t.isMaxWidth(766)?t.element.parent():t.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(n.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(n.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(n.owner.width(),"px"),t.draggTouchElement(i,n.placeholderTouch)}else n.dragged.addClass("is-dragging"),i.originalEvent.dataTransfer.setData("text",""),n.items.length>1&&$(".".concat(e.itemContentClass),n.dragged).html(e.itemContentTempl.html());i.stopPropagation()}}}else i.stopPropagation()})).on(t.dragEnterWhileDragging,t.dragElements,(function(e){n.dragged&&(t.element.triggerHandler("draggingswap",[n.move]),n.related=e.target,$("ul, li",t.element).removeClass("over"),$(e.target).closest("ul, li").addClass("over"),n.droptarget=$(n.related).closest(".card"),$('[aria-grabbed="true"]',t.element).not(n.dragged).slideUp(),e.stopPropagation())})).on(t.dragOverWhileDragging,t.dragElements,(function(i){if(n.dragged){var a,s=$(this),r=$(".listview",n.dragged.closest(".card")).data("listview");if(t.isTouch){if(t.handle&&!n.isHandle)return;n.isInSelection||(t.draggedMakeSelected(r,n.dragged),n.items=r.selectedItems,$(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(n.items.length)),a=i.originalEvent.touches[0],s=t.getElementByTouchInList($("ul, li",t.element),a.pageX,a.pageY)||s,n.dragged.addClass("is-dragging"),n.placeholderTouch.addClass("is-dragging is-dragging-touch"),n.placeholderTouch.show(),$('[aria-grabbed="true"]',t.element).not(n.dragged).not(n.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),n.items.length>1&&($(".".concat(e.itemContentClass),n.placeholderTouch.add("#sl-placeholder-touch2")).html(e.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),n.dragged.hide()),t.draggTouchElement(i,n.placeholderTouch),t.element.triggerHandler("draggingswap",[n.move]),n.related=s,$("ul, li",this.element).removeClass("over"),s.closest("ul, li").addClass("over"),n.droptarget=n.related.closest(".card")}i.preventDefault(),i.stopPropagation()}})).on(t.dragEnd,t.dragElements,(function(i){if(n.dragged){var a=$(n.related).closest("li"),s=$("ul",n.droptarget),r=$("li",s).length,o=n.items.length+r;if(t.unselectElements($(".listview",n.owner).data("listview")),$.each(n.items,(function(t,e){if((e=$(e)).find("mark.highlight").contents().unwrap(),r&&!$(n.related).is("ul")){var i=a.index()<n.draggedIndex,l=i?e:$(n.items[n.items.length-1-t]),c=a.index()+(i?t+1:t+2);e.attr({"aria-posinset":c,"aria-setsize":o}),a[i?"before":"after"](l)}else e.attr({"aria-posinset":r+t+1,"aria-setsize":o}),s.append(e);e.focus()})),n.items.length>1&&($(".".concat(e.itemContentClass),n.dragged).html($(".".concat(e.itemContentClass),n.placeholder).html()),t.isTouch&&n.dragged.show()),t.isTouch)for(var l=0,c=t.containers.length;l<c;l++)t.containers[l].style.zIndex="";t.makeDraggable(),n.isHandle=null,$('[aria-grabbed="true"]',t.element).show(),t.afterUpdate($(".listview",n.droptarget).data("listview")),i.preventDefault(),i.stopPropagation()}}))}},$.fn.swaplist=function(t){return this.each((function(){var e=$.data(this,"swaplist");e?e.updated(t):e=$.data(this,"swaplist",new Ai(this,t))}))};var $i={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function Ei(t,e){this.settings=b.mergeSettings(t,e,$i),this.element=$(t),this.init()}Ei.prototype={init:function(){this.handleEvents()},unbind:function(){var t=this.settings;return this.element.off("scroll.scrollaction"),t&&$(t.scrollActionTarget).removeClass(t.classToAdd),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,$i)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function(){var t=this,e=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",(function(){var n=t.element.scrollTop();n>t.lastScrollTop?$(e.scrollActionTarget).addClass(e.classToAdd):$(e.scrollActionTarget).removeClass(e.classToAdd),t.lastScrollTop=n}))}},$.fn.scrollaction=function(t){return this.each((function(){var e=$.data(this,"scrollaction");e?e.updated(t):e=$.data(this,"scrollaction",new Ei(this,t))}))};var Di={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null};function Ii(t,e){return this.init(t,e)}Ii.prototype={init:function(t,e){return!this.element&&t instanceof HTMLElement&&(this.element=$(t)),("object"===n(e)||void 0===this.settings)&&(this.settings=b.mergeSettings(this.element[0],e,this.settings||Di)),this.render()},render:function(){var t=$('<div class="step-chart-steps"></div>'),e='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',n=null===this.settings.completed&&null===this.settings.steps;if(n&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=b.parseSettings(this.element)),this.element.children().length>0)return this;for(var i=0;i<this.settings.steps;i++){var a=$('<div class="step-chart-step"></div>');i<this.settings.completed&&(a.addClass("is-complete"),this.settings.completedColor&&a.css("background-color",this.settings.completedColor)),i===this.settings.inProgress-1&&(a.addClass("is-inprogress"),this.settings.inProgressColor&&a.css("background-color",this.settings.inProgressColor)),t.append(a)}var s=this.settings.completedText||D.translate("StepsCompleted");s=(s=s.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),n&&(s=D?D.translate("NoData"):"No Data Available");var r=$('<span class="step-chart-label">'.concat(s,"</span>"));if(this.settings.steps===this.settings.completed&&(t.addClass("is-complete"),r.append(e.replace("{icon-name}","icon-success"))),this.settings.iconType&&r.append(e.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var o=this.settings.extraText;o=(o=(o="{1} Days Overdue"===(o="{0} Days Remaining"===o?D.translate("DaysRemaining"):o)?D.translate("DaysOverdue"):o).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),r.append('<span class="step-chart-label-small">'.concat(o,"</span>"))}return this.element.append(r,t),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(t.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),r.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),this},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this.element.empty(),this.render()},destroy:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this}},$.fn.stepchart=function(t){return this.each((function(){var e=$.data(this,"stepchart");e?e.updated(t):(e=$.data(this,"stepchart",new Ii(this,t))).destroy=function(){this.teardown(),$.removeData(this,"stepchart")}}))};var Mi=["horizontal","vertical","module-tabs","header-tabs"],Li={addTabButton:!1,addTabButtonCallback:null,appMenuTrigger:!1,appMenuTriggerText:void 0,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1};function Pi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Li),this.init()}Pi.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var t,e=this,n=this,i=!1;(t=this.element.next(".tab-panel-container")).length||(t=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(i=!0));var a=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&a.length&&(t=a),this.element.next(".application-menu").length&&(t=this.element.next().next(".page-container"),i=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(t=$(this.settings.containerElement),i=!1),t&&t.length||(t=$('<div class="tab-panel-container"></div>'),i=!0),t[0].classList.contains("tab-panel-container")||t[0].classList.add("tab-panel-container"),i&&t.insertAfter(this.element),this.container=t;var s=this.element.children(".tab-list-container");!s.length&&this.isScrollableTabs()&&(s=$('<div class="tab-list-container"></div>').prependTo(this.element)),s.length&&(this.tablistContainer=s);var r=!0,o=this.element.closest(".header");Mi.forEach((function(t,n){e.element.hasClass(Mi[n])&&(r=!1)})),r&&n.element.addClass(o.length?"header-tabs":"horizontal"),n.settings.tabCounts&&n.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablist.appendTo(this.tablistContainer?this.tablistContainer:this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",(function(t){t.deltaY&&(this.scrollLeft+=t.deltaY)}))),n.tablist.attr({class:"tab-list",role:"tablist","aria-multiselectable":"false"}),this.checkResponsive(!1),this.renderHelperMarkup(),n.anchors=n.tablist.children("li:not(.separator)").children("a"),n.anchors.each((function(){var t=$(this);t.attr({role:"tab","aria-expanded":"false","aria-selected":"false",tabindex:"-1"}).parent().attr("role","presentation").addClass("tab"),t.parent().hasClass("dismissible")&&!t.parent().children(".icon").length&&$.createIconElement({icon:"close",classes:"icon close"}).insertAfter(t);var e=t.nextAll("ul").first();e.length>0&&(e.addClass("dropdown-tab"),t.parent().addClass("has-popupmenu").popupmenu({menu:e,trigger:"click",attachToBody:!0}),t.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),t.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(t)),n.settings.tabCounts&&0===$(this).find(".count").length&&$(this).prepend('<span class="count">0 </span>'),(n.settings.moduleTabsTooltips||n.settings.multiTabsTooltips)&&t.on("beforeshow.toolbar",(function(){return"yes"===t.data("cutoffTitle")})).tooltip({content:"".concat(t.text().trim())})})),n.panels=$(),n.anchors.each((function(){var t,e=$(this),i=e.parent(),a=i.data("popupmenu"),s=e.attr("href");if("#"===s.substr(0,1)){if("#/"===s.substr(0,2)&&(s=s.replace("#/","#")),void 0!==s&&"#"!==s){if(t=$(s),i.is(":not(.has-popupmenu)")&&!t.length)return;e.data("panel-link",t),t.data("tab-link",e),n.panels=n.panels.add(t)}a&&a.menu.children("li").each((function(){var t=$(this),e=t.children("a"),i=e.attr("href"),a=$(i);if(e.data("panel-link",a),a.data("tab-link",e),n.panels=n.panels.add(a),n.anchors=n.anchors.add(e),t.hasClass("dismissible")){var s=t.children(".icon");s.length||(s=$.createIconElement({icon:"close",classes:"icon close"})),s.detach().appendTo(e)}})).on("click.popupmenu",".icon",(function(t){var e=$(this),i=e.closest("li");i.is(".dismissible")&&e.is(".icon")&&(t.preventDefault(),t.stopPropagation(),n.closeDismissibleTab(i.children("a").attr("href")))}))}})),n.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),n.panels.appendTo(n.container);var l,c,d=":not(.separator):not(.is-disabled):not(.is-hidden)",h=this.tablist.children("li".concat(d)),u=this.tablist.children("li.is-selected".concat(d)),p=u.children("a");return n.nestedTabControls=n.panels.find(".tab-container"),h.length&&(this.settings.changeTabOnHashChange&&(l=window.location.hash)&&l.length&&(c=h.find('a[href="'.concat(l,'"]'))).length&&(p=(u=c.first().parent()).children("a")),u.length||(p=(u=h.not(".add-tab-button, .application-menu-trigger").first()).children("a")),u.length&&this.activate(p.attr("href"),p)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.setOverflow(),this.positionFocusState(p),this.hasAnimatedBar()&&(this.animatedBar.addClass("no-transition"),this.focusBar(void 0,(function(){setTimeout((function(){e.animatedBar.removeClass("no-transition")}),0)}))),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",(function(){e.renderEdgeFading()})),this.renderEdgeFading()),this},renderHelperMarkup:function(){var t=this.tablistContainer||this.tablist;this.isModuleTabs()&&(t=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.hasAnimatedBar()?(this.animatedBar=this.element.find(".animated-bar"),this.animatedBar.length||(this.animatedBar=$('<div class="animated-bar" role="presentation"></div>')),this.animatedBar.insertBefore(this.tablist)):this.animatedBar&&this.animatedBar.length&&(this.animatedBar.off().removeData().remove(),this.animatedBar=void 0),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=t.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(D.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),t.after(this.moreButton));var e=this.tablist.find(".application-menu-trigger");return!0===this.settings.appMenuTrigger?this.isModuleTabs()?e.length||(e=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span>'.concat(this.settings.appMenuTriggerText||D.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(e)):this.isVerticalTabs()&&e.length&&e.off().removeData().remove():e.length&&(this.isVerticalTabs()?e.off().removeData().remove():this.tablist.prepend(e)),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="0" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(D.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),this},setupEvents:function(){var t=this,e=this,n=e.element.closest(".modal");return n.length&&n.on("afteropen.tabs",(function(){e.hasAnimatedBar()&&e.focusBar()})),this.tablist.on("mousedown.tabs","> li",(function(t){if(e.handleAddFocusData(t,$(this)),$(t.target).hasClass("close")&&$(t.target).parent().hasClass("has-popupmenu")){var n=$(this).data("popupmenu").menu,i=[];$.each(n[0].children,(function(t,e){i.push(e.children[0].href)})),e.closeDismissibleTabs(i)}return 3!==t.which&&e.handleTabClick(t,$(this))})).on("click.tabs","a",(function(t){var e=$(t.currentTarget);!0!==this.wasTapped?("touchend"===t.type&&(this.wasTapped=!0),"#"===e.attr("href").substr(0,1)&&t.preventDefault()):this.wasTapped=!1})).on("click.tabs",".icon",(function(t){var n=$(this);if(!n.is("[disabled]")&&!n.parent().hasClass("is-disabled")){var i=$(n).parent();i.hasClass("dismissible")&&(t.preventDefault(),t.stopPropagation(),e.closeDismissibleTab(i.children("a").attr("href")))}})).on("focus.tabs","a",(function(t){return e.handleTabFocus(t,$(this))})).on("blur.tabs","a",(function(){$(this).parent().removeClass("is-focused")})).on("keydown.tabs","a",(function(e){return t.handleTabKeyDown(e)})),e.tablist.find("li").filter(".has-popupmenu").each((function(t,n){var i=$(n),a=i.children("a");i.data("popupmenu").menu.on("keydown.popupmenu","a",(function(t){switch(t.which){case 27:i.addClass("is-selected"),a.focus();break;case 8:case 46:!function(t){t.altKey&&i.is(".dismissible")&&e.closeDismissibleTab(a.attr("href"))}(t)}})),i.on("selected.tabs",(function(t,n){var i=$(this),s=$(n).attr("href");return!!e.activate(s,$(n))&&(e.positionFocusState(a),e.hasAnimatedBar()&&e.focusBar(i),a.focus(),e.scrollTabList(i),i.addClass("is-selected"),!1)}))})),e.tablist.find("li").filter(".dismissible").each((function(t,n){$(n).children("a").on("keydown.tabs",(function(t){e.handleDismissibleTabKeydown(t)}))})),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",(function(t){e.handlePanelKeydown(t)})),this.element.on("focusout.tabs",(function(){var t=!$.contains(e.element[0],document.activeElement),n=0===e.tablist.children(".has-popupmenu.is-open").length;t&&n&&!e.moreButton.is(".is-selected, .popup-is-open")&&e.hideFocusState()})).on("updated.tabs",(function(t,n){e.updated(n)})).on("activated.tabs",(function(t){t.stopPropagation()})).on("add.tabs",(function(t,n,i,a){e.add(n,i,a)})).on("remove.tabs",(function(t,n){e.remove(n)})),$("body").on("resize.tabs".concat(this.tabsIndex),(function(){e.handleResize()})),e.handleResize(!0),$(".tab-panel input").on("error.tabs, valid.tabs",(function(){var t=$(".tab.is-selected");e.focusBar(t)})),this},setupHelperMarkupEvents:function(){var t=this;this.moreButton.on("click.tabs",(function(e){t.handleMoreButtonClick(e)})).on("keydown.tabs",(function(e){t.handleMoreButtonKeydown(e)})).on("focus.tabs",(function(e){t.handleMoreButtonFocus(e)})).on("mousedown.tabs",(function(e){t.handleAddFocusData(e,$(this))})),this.settings.addTabButton&&this.addTabButton.on("click.tabs",(function(){t.handleAddButton()})).on("keydown.tabs",(function(e){t.handleAddButtonKeydown(e)})).on("focus.tabs",(function(e){t.handleAddButtonFocus(e)}))},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(t,e){var n=e;return n.is(".is-disabled")?(t.preventDefault(),!1):(n.is(this.moreButton)||(n=n.children("a")),this.hideFocusState(),n.data("focused-by-click",!0),!0)},handleTabClick:function(t,e){if(this.element.is(".is-disabled")||e&&(e.is(".is-disabled")||e.is(".separator")))return t.stopPropagation(),t.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(t))return!0;var n=e.children("a");if(n.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),e.is(".has-popupmenu"))return this.positionFocusState(n),!0;var i=n.attr("href");return e.is(".add-tab-button")&&(e=(n=this.handleAddButton()).parent(),i=n.attr("href"),this.element.trigger("tab-added",[n])),2===t.which?(e.is(".dismissible")&&$(t.target).is(".close")&&this.closeDismissibleTab(i),t.preventDefault(),!0):!this.activate(i,n)||(this.changeHash(i),this.focusState.removeClass("is-visible"),n.focus(),this.isScrollableTabs()&&this.scrollTabList(e),this.focusBar(e),this.positionFocusState(n),!0!==this.settings.lazyLoad||!this.isURL(i))},handleMoreButtonClick:function(t){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(t.preventDefault(),t.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||t.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},handleTabFocus:function(t,e){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var n=e.parent(),i=e.data("focused-by-click"),a=void 0===i||i&&!1===i;return $.removeData(e[0],"focused-by-click"),this.isTabOverflowed(n)?(this.buildPopupMenu(e.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(n.addClass("is-focused"),this.positionFocusState(e,a)),!0},handleMoreButtonFocus:function(t){if(this.element.is(".is-disabled"))t.preventDefault();else{var e=this.moreButton.data("focused-by-click"),n=e&&!1===e;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,n)}},handleTabKeyDown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey&&8!==t.which)return!0;var e=this,n=[8,13,32];function i(){return $.inArray(t.which,n)>-1}if(t.which<32&&!i()||t.which>46)return!0;if(i()&&!this.handleAppMenuTabKeydown(t))return!0;function a(n){t.preventDefault(),setTimeout((function(){e.buildPopupMenu(n)}),0)}var s,r=":not(.separator):not(.is-disabled):not(:hidden)",o=$(t.currentTarget).parent(),l=o.children("a"),c=e.tablist.children("li".concat(r)),d=D.isRTL();function h(){for(var t=c.index(o)-1;t>-1&&!s;){if(c.eq(t).is(r))return c.eq(t);t-=1}if(e.settings.addTabButton)return e.addTabButton;var n=e.tablist.children("li".concat(r)).last();return e.hasMoreButton()&&e.isScrollableTabs()&&a(n.find("a").attr("href")),n}function u(){for(var t=c.index(o)+1;t<c.length&&!s;){if(c.eq(t).is(r))return c.eq(t);t++}var n=e.tablist.children("li".concat(r)).first();return e.hasMoreButton()&&e.isScrollableTabs()?(a(n.find("a").attr("href")),n):e.settings.addTabButton?e.addTabButton:n}switch(t.which){case 8:return t.altKey&&o.is(".dismissible")&&(t.preventDefault(),e.closeDismissibleTab(l.attr("href"))),!0;case 13:case 32:return function(){if(o.hasClass("has-popupmenu"))o.data("popupmenu").open();else{var t=l.attr("href");o.is(".add-tab-button")&&(l=e.handleAddButton(),o=l.parent(),t=l.attr("href"),e.element.trigger("tab-added",[l])),e.activate(t)&&(e.changeHash(t),e.focusBar(o),(l.attr("ng-click")||l.attr("data-ng-click"))&&l.click(),l[0].focus(),e.hideFocusState(),e.handleOutboundLink(t))}}(),!1;case 38:s=h(),t.preventDefault();break;case 37:s=d?u():h(),t.preventDefault();break;case 40:s=u(),t.preventDefault();break;case 39:s=d?h():u(),t.preventDefault()}if(s){var p=s.is(".add-tab-button"),f=p?s:s.children("a");if(this.isTabOverflowed(s))return a(s.children("a").attr("href"));p?e.addTabButton.focus():f.focus(),this.isScrollableTabs()&&this.scrollTabList(f),e.positionFocusState(f,!0)}return!0},handleDismissibleTabKeydown:function(t){var e=t.which,n=$(t.target);if(n.is("a")&&(n=n.parent()),t.altKey&&46===e){if(n.children("a").is("[disabled]")||n.hasClass("is-disabled"))return;t.preventDefault(),this.closeDismissibleTab(n.children("a").attr("href"))}},handleAppMenuTabKeydown:function(t){var e=$(t.target);if(!e.parent().is(".application-menu-trigger")&&!e.is(".application-menu-trigger"))return!0;var n=$("#application-menu");return!!n.length&&(t.preventDefault(),this.hideFocusState(),n.hasClass("is-open")?(n.trigger("close-applicationmenu"),!1):(n.trigger("open-applicationmenu"),!1))},handleMoreButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=this,n=D.isRTL();function i(){t.preventDefault(),e.buildPopupMenu(e.tablist.find(".is-selected").children("a").attr("href")),e.positionFocusState(e.moreButton,!0)}function a(){t.preventDefault(),e.findLastVisibleTab()}switch(t.which){case 37:if(n){i();break}a();break;case 38:a();break;case 13:case 32:t.preventDefault();break;case 39:if(n){a();break}i();break;case 40:i()}return!0},handlePanelKeydown:function(t){var e=t.which,n=$(t.target),i=this.anchors.filter("#".concat(n.attr("id")));return this.anchors.filter("#".concat(n.attr("id"))).parent().is(".dismissible")&&t.altKey&&46===e?(t.preventDefault(),this.closeDismissibleTab(i.attr("href"))):t.ctrlKey&&38===e&&$.contains(document.activeElement,n[0])?(t.preventDefault(),this.activate(i.attr("href"),i)):void 0},handleAddButton:function(){var t=this.settings.addTabButtonCallback;if(t&&"function"==typeof t){var e=t();return this.anchors.filter('[href="#'.concat(e,'"]'))}var i,a=this.tablist.children().index(this.addTabButton),s=(this.idCounter="number"==typeof this.idCounter?this.idCounter:-1,this.idCounter++,"new-tab-".concat(this.idCounter)),r={name:((i=s.toString().split("-")).forEach((function(t,e){i[e]=t.charAt(0).toUpperCase()+t.slice(1)})),i.join(" ")),content:"&nbsp;",isDismissible:!0};a<0&&(a=this.tablist.find("li:not(.separator)").length);var o=this.element.triggerHandler("before-tab-added",[s,r,a]);return o?(o.newId&&o.newId.length&&"string"==typeof o.newId&&(s=o.newId),o.settings&&"object"===n(o.settings)&&(r=o.settings),isNaN(o.newIndex)||(a=o.newIndex),this.add(s,r,a),this.anchors.filter('[href="#'.concat(s,'"]'))):(this.add(s,r,a),this.anchors.filter('[href="#'.concat(s,'"]')))},handleAddButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=t.which;if([13,32,37,38,39,40].indexOf(e)<0)return!1;var n,i=this,a=D.isRTL(),s="li:not(.separator):not(.is-disabled):not(:hidden)";function r(){t.preventDefault(),n=i.tablist.find(s).last(),i.isTabOverflowed(n)&&(i.buildPopupMenu(n.children("a").attr("href")),i.positionFocusState(i.moreButton,!0))}function o(){n=i.tablist.find(s).first()}switch(e){case 37:if(a){o();break}r();break;case 38:r();break;case 13:case 32:return t.preventDefault(),this.handleAddButton();case 39:if(a){r();break}o();break;case 40:o()}return n.children("a").focus(),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function(t){t||this.checkResponsive(!0),this.setOverflow();var e=this.tablist.find(".is-selected");(!e.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(e))&&(e=this.moreButton),e.length?(this.focusBar(e),this.positionFocusState(e)):(this.defocusBar(),this.hideFocusState()),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(t){var e=this,n=e.element[0].classList;function i(){e.removeHelperMarkupEvents(),e.renderHelperMarkup(),e.setupHelperMarkupEvents()}this.isResponsiveVerticalTabs()&&c.isBelow("phone-to-tablet")?n.contains("is-in-responsive-mode")||(n.add("is-in-responsive-mode"),n.add("header-tabs"),n.contains("is-personalizable")||n.add("alternate"),n.remove("vertical"),t&&i()):n.contains("is-in-responsive-mode")&&(n.add("vertical"),n.remove("is-in-responsive-mode"),n.remove("header-tabs"),n.remove("alternate"),t&&i())},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var t=window.getComputedStyle(this.element[0]),e=t.getPropertyValue("height")+t.getPropertyValue("margin-top")+t.getPropertyValue("margin-bottom");this.tablist[0].style.height=e}},handleOutboundLink:function(t,e){"#"!==t.charAt(0)&&("/"!==t.charAt(0)||e&&!1!==e||(t=window.location.origin+t),window.location=t)},hasAnimatedBar:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(t){return!(!t||!t.length||1===t.length&&t.indexOf("#")<1)&&this.getPanel(t)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var t=this.element.closest(".module-tabs").length,e=this.element.closest(".header-tabs").length,n=this.element.closest(".tab-panel-container").length;return t>0||e>0||n>0},isTab:function(t){return t instanceof jQuery&&t.length&&t.is("li.tab")},isAnchor:function(t){return t instanceof jQuery&&t.length&&t.is("a")},getAnchor:function(t){return this.isAnchor(t)?t:(-1===t.indexOf("#")&&"/"!==t.charAt(0)&&(t="#".concat(t)),this.anchors.filter('[href="'.concat(t,'"]')))},getPanel:function(t){return this.isTab(t)&&(t=t.children("a")),this.isAnchor(t)&&(t=t.attr("href")),t&&""!==t&&"#"!==t?("#/"===t.substr(0,2)&&(t=t.replace("#/","#")),this.panels.filter('[id="'.concat(t.replace(/#/g,""),'"]'))):$()},getMenuItem:function(t){return this.isAnchor(t)&&(t=t.attr("href")),-1===t.indexOf("#")&&(t="#".concat(t)),this.moreMenu.children().children().filter('[data-href="'.concat(t,'"]')).parent()},getPreviousTab:function(t){for(var e=this.getTab(null,t),n="li:not(.separator):not(:hidden):not(.is-disabled)",i=this.tablist.find(n),a=i.index(e),s=i.eq(0===a?1:a-1);s.length&&!s.is(n);)s=i.eq(i.index(s)-1);if(s.is(".has-popupmenu")){var r=s.data("popupmenu");r&&(s=r.menu.children("li").first())}return s},activateAdjacentTab:function(t,e){var n=this.doGetTab(t,e);"string"==typeof t&&(e=t),n.is(".is-selected")?n.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(n.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):n.nextAll("li.tab").not(".hidden").length>0&&this.select($(n.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(t,e){var n=this.getTab(null,t);if(e&&e instanceof jQuery||(e=this.getPreviousTab(t)),!e.length)return this.hideFocusState(),this.defocusBar(),e;var i=e.children("a");if(n.is(".is-selected")){if(!this.activate(i.attr("href"),i))return e;i.focus()}return this.positionFocusState(i),this.focusBar(e),e},isURL:function(t){return!(!t||0===t.indexOf("#"))},activate:function(t,e){var n=this;if(n.isURL(t))return this.callSource(t,e,!0);for(var i,a,s,r=n.getAnchor(t),o=r.parent(),l=n.getPanel(t),c=l[0],d=n.anchors.parents().filter(".is-selected"),h=0;h<n.panels.length;h++)n.panels[h].classList.contains("is-visible")&&(i=$(n.panels[h]));if(i||(i=n.panels),!n.element.trigger("beforeactivated",[r]))return!1;function u(e){if(l.length<1){if(n.settings.source)return n.callSource(t,r),!0}else{i[0].classList.remove("can-show"),i[0].classList.remove("is-visible"),i.closeChildren(),n.element.trigger("activated",[r]),c.classList.add("can-show"),n.renderVisiblePanel();var h=new F({duration:x.convertDelayToFPS(150),timeoutCallback:function(){n.element.trigger("afteractivated",[r])}});H.register(h),c.classList.add("is-visible")}n.updateAria(r),d.add(n.moreButton).removeClass("is-selected"),o[0]&&o[0].classList.contains("tab")&&(a=o,s=o);var u,p=o.parents(".popupmenu");p.length&&(u=p.data("trigger")).length&&(a=u,s=u),n.isTabOverflowed(s)&&(s=n.moreButton,a=n.moreButton),n.focusBar(s),a&&a.addClass("is-selected");var f=l.find(".toolbar");return f.length&&f.each((function(){var t=$(this).data("toolbar");t&&"function"==typeof t.handleResize&&t.handleResize()})),b.fixSVGIcons(l[0]),e||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(d,o,u):u(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var t=D.isRTL(),e=this.tablistContainer[0],n=e.scrollLeft,i=e.scrollWidth,a=parseInt(window.getComputedStyle(e).getPropertyValue("width"),10);t?(this.element[0].classList[n>0?"add":"remove"]("scrolled-left"),this.element[0].classList[i-n<=a?"remove":"add"]("scrolled-right")):(this.element[0].classList[n>0?"add":"remove"]("scrolled-right"),this.element[0].classList[i-n<=a?"remove":"add"]("scrolled-left"))}},callSource:function(t,e,i){var a=this;if((null==i||!1===i)&&!this.settings.source)return!1;if(!0!==this.settings.lazyLoad)return!1;var s=n(this.settings.source),r=function(n){if(null!=n){if(n=o.sanitizeHTML(n),i){var s=b.uniqueId(e,"tab",a.element[0].id||"");t="#".concat(s),e[0].setAttribute("href",t)}a.createTabPanel(t,n,!0),a.activate(t),a.element.triggerHandler("complete"),a.element.trigger("requestend",[t,n])}};function l(t,e){var n=$.extend({dataType:"html"},e,{url:t}),i=$.ajax(n);return i.done(r),i}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),i)return l(t,this.ajaxOptions);if("function"===s)return this.settings.source(r,t,this.settings.sourceArguments);if("string"===s){var c=t.replace(/#/g,""),d=this.settings.source.toString();if(!(d.indexOf(c)>-1)){var h="tab=".concat(c),u=d.indexOf("?"),p=d.indexOf("#"),f=d.length;u<0?(h="?".concat(h),p>-1&&(f=p+1)):(h+="&",f=u+1),d=k.splice(d,f,0,h)}return l(d,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(t){if(this.settings.changeTabOnHashChange){t||(t=""),t.replace(/#/g,"");var e=this.settings.hashChangeCallback;e&&"function"==typeof e?e(t):window.location.hash=t,this.element.triggerHandler("hash-change",[t])}},updateAria:function(t){t&&(this.anchors.attr({"aria-selected":"false","aria-expanded":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),t.length&&this.element.is(":not(.is-disabled)")&&(t.parent().removeClass("is-selected"),this.isTabOverflowed(t.parent())?this.moreButton.attr({tabindex:"0"}):t.attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each((function(t,e){var n=$(e).data("tabs");n&&n.handleResize&&"function"==typeof n.handleResize&&n.handleResize(!0)}))},add:function(t,e,i){if(!t)return this;e||(e={});var a=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function s(t){switch(n(t)){case"string":if(null!==t.match(/#/g)){var e=$(t);t=e.length?e:t}}return t}t="".concat(t.replace(/#/g,"")),e.name=e.name?e.name.toString():"&nbsp;",e.isDismissible=!!e.isDismissible&&!0===e.isDismissible,e.isDropdown=!!e.isDropdown&&!0===e.isDropdown,e.content&&(e.content=s(e.content)),e.dropdown&&(e.dropdown=s(e.dropdown));var r=$('<li role="presentation" class="tab"></li>'),l=$('<a href="#'.concat(t,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(o.escapeHTML(e.name),"</a>")),c=this.createTabPanel(t,e.content);if(r.html(l),e.isDismissible&&(r.addClass("dismissible"),r.append($.createIconElement({icon:"close",classes:"close icon"}))),this.settings.tabCounts&&l.prepend('<span class="count">0 </span>'),function(t,e){var n,i=t.tablist.children("li"),a=i.not(".application-menu-trigger, .add-tab-button"),s=i.length-1;if(!i.length)return r.appendTo(t.tablist),void c.appendTo(t.container);var o=i.filter(".add-tab-button"),l=i.filter(".application-menu-trigger");(null==e||isNaN(e))&&(e=i.length),i.length>a.length&&(e>i.length-1&&o&&o.length&&(e-=1),e<=0&&l&&l.length&&(e+=1));var d=i.eq(e).length>0;n="insertAfter",d&&(n="insertBefore"),r[n](i.eq(s=d?e:s)),c.appendTo(t.container)}(this,i),this.panels=$(this.panels.add(c)),this.anchors=$(this.anchors.add(l)),l.data("panel-link",c),c.data("tab-link",l),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&l.on("beforeshow.toolbar",(function(){return"yes"===l.data("cutoffTitle")})).tooltip({content:"".concat(l.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),a){if(this.positionFocusState(l),this.focusBar(r),!this.activate(l.attr("href")))return this;l.focus()}return e.doActivate&&this.activate(l.attr("href")),this},remove:function(t,e){var n=this,i=this.doGetTab(null,t);if(!i||!i.length)return!1;var a=i.children("a"),s=this.getPanel(t),r=s&&s.length,o=this.tablist.children("li").index(i),l=".application-menu-trigger, .separator, .is-disabled, :hidden",c=i.prev();if(!e&&!1===this.element.triggerHandler("beforeclose",[i]))return!1;var d=!1;i.hasClass("is-selected")?d=!0:c=$(this.tablist.children("li").not(l).filter(".is-selected")),r&&(this.panels=$(this.panels.not(s))),this.anchors=$(this.anchors.not(a)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&a.off("beforeshow.toolbar").data("tooltip").destroy();var h=i.data("popupmenu");i.hasClass("has-popupmenu")&&h&&(h.menu.children("li").each((function(){n.remove($(this).children("a").attr("href"))})),h.destroy());var u=i.closest(".dropdown-tab"),p=u.data("trigger");i.find(".icon").off().removeData().remove(),i.off(),a.off(),i.removeData().remove(),r&&s.removeData().remove();var f,g=a.data("moremenu-link");g&&(g.parent().off().removeData().remove(),a.removeData()),(f=u).length&&0===f.children("li:not(.separator)").length&&(c=this.getPreviousTab(p),setTimeout((function(){n.remove(p)}),1)),p&&p.length&&p.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[i]);for(var m=o-1;m>-1;)m=-1,c.is(l)&&(c=this.tablist.children("li").not(l)[0],m-=1);if(c.length||(c=this.tablist.children("li").not(l).first()),!c.length)return this.hideFocusState(),this.defocusBar(),this.element.trigger("afterclose",[i]),this;var v=c.children("a"),b=v;return this.positionFocusState(v),d&&(c.is(".has-popupmenu")&&c.data("popupmenu")&&(b=c.data("popupmenu").menu.children().first().children("a")),!this.activate(b.attr("href")))||(this.focusBar(c),v.focus(),this.element.trigger("afterclose",[i])),this},createTabPanel:function(t,e,n){t=t.replace(/#/g,"");var i=$('<div id="'.concat(o.stripTags(t),'" class="tab-panel" role="tabpanel"></div>'));return e instanceof $&&(e=e[0]),l.html(i[0],e||"","*"),!0===n&&this.container.append(i),this.panels=$(this.panels.add(i)),i},checkPopupMenuItems:function(t){function e(t){if(!t||!t.menu)return $();var e=t.menu.children("li");return e.length?e:(t.destroy(),$())}if(t.is(".has-popupmenu"))return e(t.data("popupmenu"));var n=t.closest(".dropdown-tab");return n.length?e(n.data("popupmenu")):$()},getTab:function(t,e){var n,i=this,a=$();return e instanceof $&&e.length>0?e.is("a")?e.parent():e:t?(n=$(t.currentTarget)).is(".tab")?n:n.closest(".tab").length?n.closest(".tab").first():null:e?function(t){if(!t||""===t||"#"===t)return null;-1===t.indexOf("#")&&(t="#".concat(t));var e=i.anchors.filter('[href="'.concat(t,'"]'));return e.length?e.parent():null}(e):a},doGetTab:function(t,e){return(t||e)&&(!t||t instanceof $.Event||"string"==typeof t)?t?"string"!=typeof t?this.getTab(t):this.getTab(null,t):this.getTab(null,e):$()},hide:function(t,e){var n=this.doGetTab(t,e);return this.activateAdjacentTab(t,e),n.addClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},show:function(t,e){return this.doGetTab(t,e).removeClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},disableTab:function(t,e){var n=this.doGetTab(t,e);return this.activateAdjacentTab(t,e),n.addClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},enableTab:function(t,e){return this.doGetTab(t,e).removeClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},rename:function(t,e,n){if(t&&"string"==typeof t&&(n=e,e=t),n){var i,a=this.doGetTab(t,e),s=this.settings.tabCounts,r=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,o=a.children("a");s&&(i=o.find(".count").clone()),o.text(n.toString()),s&&o.prepend(i),r&&o.data("tooltip").setContent(n.trim());var l=this.tablist.children("li").length<2?a:void 0;this.positionFocusState(l),this.focusBar(l)}},updateCount:function(t,e,n){if(t&&"string"==typeof t&&(n=e,e=t),this.settings.tabCounts&&n){var i=this.doGetTab(t,e);i.children("a").find(".count").text("".concat(n.toString()," "));var a=this.tablist.children("li").length<2?i:void 0;this.positionFocusState(a),this.focusBar(a)}},getActiveTab:function(){var t=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(t.first().attr("id"),'"]'))},getVisibleTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var n=$(this);t.isTabOverflowed(n)||(e=e.add(n))})),e},getOverflowTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var n=$(this);t.isTabOverflowed(n)&&(e=e.add(n))})),e},setOverflow:function(){var t,e,n,i=this,a=this.element[0],s=this.tablist[0],r=this.hasMoreButton(),o=this.isScrollableTabs();function l(){i.isModuleTabs()&&i.adjustModuleTabs()}l(),o?n=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(t=window.getComputedStyle(s,null),e=parseInt(t.getPropertyValue("height"),10)+1,n=s.scrollHeight>e),n?r||(a.classList.add("has-more-button"),l()):r&&(a.classList.remove("has-more-button"),l()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var t=this,e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),n=this.tablist.find(".application-menu-trigger"),i=n.length>0,a=this.tablist.outerWidth(),s=120,r=i?n.outerWidth():0;if(e.children("a").removeAttr("style"),e.removeAttr("style").each((function(){var n=$(this);t.isTabOverflowed(n)&&(e=e.not(n))})),e.length){var o,l=window.getComputedStyle(e.eq(0).children()[0]),c=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(s=(a-r)/e.length-1)<120&&(s=120);for(var d="no",h=1===this.element.closest(".side-by-side").length,p=0;p<e.length;p++){(o=e.eq(p).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(d="no",parseInt(window.getComputedStyle(e[p]).width,10)>s-c&&(d="yes"),o.data("cutoffTitle",d));var f=0;"ios"===u.os.name&&u.devicespecs.isMobile&&h&&(f=25),e[p].style.width="".concat(s-f,"px"),o[0].style.width="".concat(s-f,"px")}this.adjustSpilloverNumber()}else this.moreButton[0].style.width="".concat(s=a-r+101,"px")},adjustSpilloverNumber:function(){var t=this.moreButton.find(".more-text"),e=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),n=this.getOverflowTabs();t.text("".concat(D.translate(e.length<=n.length?"Tabs":"More")));var i=this.moreButton.find(".count");i.length||(i=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(i)),i.text("".concat(n.length," "))},select:function(t,e){var n=t.replace(/#/g,""),i=this.getAnchor(n);this.positionFocusState(void 0,!1),this.focusBar(i.parent()),this.activate(i.attr("href"))&&(this.changeHash(n),e||i.focus())},buildPopupMenu:function(t){var e=this;e.popupmenu&&(e.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var n=$("#tab-container-popupmenu"),i="";this.isScrollableTabs()&&(i=" is-selectable"),0===n.length?n=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(i,'">')).appendTo("body"):n.html("");var a=e.tablist.children("li"),s=D.isRTL();function r(t){var i=$(t),a=i.children("a");if(!i.is(":hidden")&&(e.isScrollableTabs()||e.isTabOverflowed(i)))if(i.is(".separator"))i.clone().appendTo(n);else{var s=i.clone(),r=s.children("a");if(s[0].classList.remove("tab"),s[0].classList.contains("is-selected")&&(s[0].classList.remove("is-selected"),e.isScrollableTabs()&&s[0].classList.add("is-checked")),s[0].removeAttribute("style"),s.children(".icon").off().appendTo(r),s.appendTo(n),i.data("moremenu-link",r),r.find(".icon-more").removeData().remove(),r.data("original-tab",a),r.onclick=void 0,i.is(".has-popupmenu")){var o=$("#".concat(t.getAttribute("aria-controls"))),l=o.clone(),c=l.children("li");l[0].classList.remove("has-popupmenu"),c.each((function(t){var e=$(this).children("a"),n=o.children("li").eq(t).children("a");e.data("original-tab",n),n.data("moremenu-link",e)})),l.insertAfter(r)}}}for(var o=0;o<a.length;o++)r(a[o]);e.tablist.children("li:not(.separator)").removeClass("is-focused");var l=1;this.isScrollableTabs()||(l=3),e.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:l}}),e.moreButton.addClass("popup-is-open"),e.popupmenu=e.moreButton.data("popupmenu"),e.positionFocusState(e.moreButton),e.moreButton.on("close.tabs",(function(){$(this).off("close.tabs selected.tabs"),e.moreButton.removeClass("popup-is-open"),e.positionFocusState(void 0),e.focusBar()})).on("selected.tabs",(function(t,n){var i=n.attr("href"),a=i.substr(1,i.length),s=e.doGetTab(a)||$(),r=s?s.children("a"):$(),o=n.data("original-tab").parent();o.is(".add-tab-button")&&(o=(r=e.handleAddButton()).parent(),i=r.attr("href"),e.element.trigger("tab-added",[r])),e.activate(i),s.length&&r.length&&"function"==typeof r[0].onclick&&r[0].onclick.apply(r[0]),e.moreButton.focus(),e.scrollTabList(s)}));var c=e.popupmenu.menu;function d(t){var n=$(this),i=n.closest("li");if(i.is(".dismissible")&&n.is(".close")){if(t.preventDefault(),t.stopPropagation(),i.is(".dismissible")&&i.is(".has-popupmenu")&&i.is(".submenu")){var a=i.find(".wrapper").children().children(),s=[];$.each(a,(function(t,e){s.push(e.children[0].href)})),e.closeDismissibleTabs(s)}else e.closeDismissibleTab(i.children("a").attr("href"));e.popupmenu.close()}}c.on("destroy.popupmenu",(function(){c.off(),e.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()})).on("touchend.popupmenu touchcancel.popupmenu",".icon",d).on("click.popupmenu",".icon",d),t?e.popupmenu.highlight(c.find('a[href="'.concat(t,'"]'))):e.tablist.children(".is-selected").length>0?e.popupmenu.highlight(c.find('a[href="'.concat(e.tablist.children(".is-selected").children("a").attr("href"),'"]'))):e.popupmenu.highlight(c.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",(function(t){var n,i=t.which,a=$(t.target);function r(){return this===document.activeElement}switch(i){case 8:case 46:t.altKey&&a.parent().is(".dismissible")&&e.closeDismissibleTab(a.attr("href"));break;case 37:n=s?40:38,a.is("a")&&(a.parent().is(":not(:first-child)")&&t.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:n}));break;case 38:c.find("li:first-child > a").filter(r).length>0&&(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.findLastVisibleTab());break;case 39:n=s?38:40,a.is("a")&&!a.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:n});break;case 40:!function(){var n=c.find("li:last-child > a");if(n.filter(r).length>0&&n.parent().is(":not(.submenu)")){if(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.settings.addTabButton)return void e.addTabButton.focus();e.focusFirstVisibleTab()}}()}}))},isTabOverflowed:function(t){if(this.isVerticalTabs()||this.isScrollableTabs())return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var e=Math.round(t[0].getBoundingClientRect().top),n=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(n+=1),e>n},findLastVisibleTab:function(){var t=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),e=t.first();if(this.isScrollableTabs())return t.last().find("a").focus();for(;!this.isTabOverflowed(e);)e=t.eq(t.index(e)+1);return t.eq(t.index(e)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},focusBar:function(t,e){if(this.hasAnimatedBar()&&t instanceof $&&t.length){var n,i,a=t,s=this.tablistContainer,r=D.isRTL();if(this.animatedBar.removeClass("no-transition"),a&&void 0!==a&&a.length&&this.anchors.length){var o=window.getComputedStyle(a[0],null),l=parseInt(o.getPropertyValue("padding-right"),10)||0,c=parseInt(o.getPropertyValue("width"),10)||0;a.is(".tab")&&(i=window.getComputedStyle(a.children("a")[0]),l+=parseInt(i.getPropertyValue("padding-right"),10)||0);var d,h,u=r?l+a.position().left+a.outerWidth(!0):a.position().left;clearTimeout(this.animationTimeout),this.animatedBar.addClass("visible"),d=e,h=this.animatedBar[0].style,n=s[0].scrollLeft,r?h.right="".concat(s[0].scrollWidth+l-(u+n),"px"):h.left="".concat(u+n,"px"),h.width="".concat(c,"px"),d&&"function"==typeof d&&d()}else this.animatedBar.removeClass("visible")}},defocusBar:function(){if(this.hasAnimatedBar()){var t=this,e=D.isRTL()?0:t.animatedBar.position().left+t.animatedBar.outerWidth()/2;clearTimeout(t.animationTimeout),this.animatedBar[0].style.left="".concat(e,"px"),this.animatedBar[0].style.width=0,this.animationTimeout=setTimeout((function(){t.animatedBar&&t.animatedBar.length&&t.animatedBar.removeClass("visible").removeAttr("style")}),350)}},scrollTabList:function(t){if(this.tablistContainer&&t&&t instanceof $&&t.length){var e,n=l.getDimensions(t[0]),i=l.getDimensions(this.tablistContainer[0]),a=n.left,s=n.right;a<i.left+40&&(e=-1*Math.round(Math.abs(i.left-a))-40),s>i.right-40&&(e=Math.round(Math.abs(s-i.right))+40),0===e&&(e=void 0),this.tablistContainer.smoothScroll(e,250)}},hideFocusState:function(){this.focusState.removeClass("is-visible")},positionFocusState:function(t,e){if(void 0!==t?t=$(t):this.moreButton.hasClass("is-selected")?t=this.moreButton:this.tablist.children(".is-selected").length>0&&(t=this.tablist.children(".is-selected").children("a")),!t||void 0===t||!t.length||t.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{t.is("a")&&(t=t.parent()),t.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var n=this.focusState[0],i=l.getDimensions(t[0]),a=t[0].classList,s=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),r=this.isVerticalTabs(),o=D.isRTL(),c=r?0:this.moreButton.outerWidth(!0),d=this.element,h=this.tablistContainer,u=h&&this.focusState.parent().is(h);i=function(e,n,i){var a,l,d,h,p=n[0].getBoundingClientRect();if(e.top-=p.top,r&&(e.top+=n[0].scrollTop),o?e.right=p.right-e.right:e.left-=p.left,i){if(h=i?i[0].scrollLeft:0,d=i?i[0].scrollWidth:0,o&&!r){var f=e.left;s?(l=parseInt(window.getComputedStyle(t[0]).marginLeft,10),e.left=d-l-e.right+h,e.right=d-l-f+h):(e.left=d-(e.right+h+c+32),e.right=d-(f+h+c+32))}else e.left+=h,e.right+=h;u&&(a=parseInt(window.getComputedStyle(n[0])["padding".concat(o?"Right":"Left")],10),e.left+=o?a:-1*a,e.right+=o?a:-1*a)}return s&&!r&&(e.height-=1),e}(i,d,h);var p="";Object.keys(i).forEach((function(t){p.length&&(p+=" "),p+="".concat(t,": ").concat(i[t],"px;")})),n.style.cssText=p;var f=a.contains("is-selected")?"add":"remove";n.classList[f]("is-selected"),n.classList[!0===e?"add":"remove"]("is-visible")}},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},disableOtherTabs:function(){return this.disable(!0)},disable:function(t){t||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var e=this,n=this.tablist.children("li:not(.separator)");t&&(n=n.filter(":not(.application-menu-trigger)")),n.each((function(){var n=$(this),i=n.children("a");if(!(t&&e.isActive(i.attr("href"))||((n.is(".is-disabled")||!0===i.prop("disabled"))&&e.disabledElems.push({elem:n,originalTabindex:n.attr("tabindex"),originalDisabled:i.prop("disabled")}),n.addClass("is-disabled"),i.prop("disabled",!0),n.is(".application-menu-trigger")||n.is(".add-tab-button")))){var a=$(i.attr("href"));a.addClass("is-disabled"),a.find("*").each((function(){var t=$(this);t.is("input.dropdown, input.multiselect")||(("-1"===t.attr("tabindex")||t.attr("disabled"))&&e.disabledElems.push({elem:t,originalTabindex:t.attr("tabindex"),originalDisabled:t.prop("disabled")}),t.disable())}))}})),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!t&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var t=this;this.tablist.children("li:not(.separator)").each((function(){var e=$(this),n=e.children("a");if(e.removeClass("is-disabled"),n.prop("disabled",!1),!e.is(".application-menu-trigger")&&!e.is(".add-tab-button")){var i=$(n.attr("href"));i.removeClass("is-disabled"),i.find("*").each((function(){var t=$(this);t.enable&&"function"==typeof t.enable&&t.enable()})),$.each(t.disabledElems,(function(t,e){var n=e.elem.is(".tab")?e.elem.children("a"):e.elem;e.elem.disable&&"function"==typeof e.elem.disable&&e.elem.disable(),e.elem.is("li")?e.elem.addClass("is-disabled"):e.elem.is("input.dropdown, input.multiselect")||(e.elem.attr("tabindex",e.originalTabindex),n.prop("disabled",e.originalDisabled))}))}})),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(t){return this.remove(t)},closeDismissibleTabs:function(t){var e=this;t.forEach((function(t){var n=t.match(/#.*/);return e.remove(n[0])}))},teardown:function(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var t=this.tablist.children("li");if(t.off().removeAttr("role").removeClass("is-selected"),t.filter(".has-popupmenu").each((function(){var t=$(this).data("popupmenu");t&&(t.menu.children("li:not(.separator)").each((function(){var t=$(this).children("a"),e=t.data("panel-link");$.removeData(t[0],"panel-link"),e&&e.length&&$.removeData(e[0],"tab-link")})),t.destroy())})),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each((function(){var t=$(this).data("tooltip");t&&"function"==typeof t.destroy&&t.destroy()})),this.element.off("focusout.tabs updated.tabs activated.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var e=this.moreButton.data("popupmenu");e.menu.find("li:not(.separator)").each((function(){var t=$(this).children("a");t.data("original-tab")&&$.removeData(t[0],"original-tab")})),e.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,this.hasAnimatedBar()&&(this.animatedBar.removeData().remove(),this.animatedBar=void 0),$(".tab-panel input").off("error.tabs valid.tabs"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(t){return this.each((function(){var e=$.data(this,"tabs");e?e.updated(t):e=$.data(this,"tabs",new Pi(this,t))}))},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(t){return this.each((function(){var e=$.data(this,"tag");e?e.updated(t):e=$.data(this,"tag",new an(this,t))}))},$.fn.taglist=function(t){return this.each((function(){var e=$.data(this,"taglist");e?e.updated(t):e=$.data(this,"taglist",new rn(this,t))}))};var Ni={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null};function _i(t,e){this.settings=b.mergeSettings(t,e,Ni),this.element=$(t),this.init()}_i.prototype={init:function(){this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(t){return"number"==typeof t.selectionStart?0===t.selectionStart&&t.selectionEnd===t.value.length:void 0!==document.selection&&document.selection.createRange().text===t.value},isPrintable:function(t,e){return e?t>64&&t<91||t>=33&&t<=38||t>=40&&t<=43||126===t||58===t||60===t||t>=123&&t<=125||94===t||95===t||t>=62&&t<=64:13===t||t>=48&&t<=57||t>=97&&t<=122||59===t||61===t||t>=44&&t<=47||96===t||t>=91&&t<=93||39===t},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var t=this.element[0];this.settings.autoGrowMaxHeight&&(t.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),t.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var t=this.element[0],e=t.offSetHeight,n=this.settings.autoGrowMaxHeight||0,i=t.scrollHeight;if(n>0&&n<i){if(i=n,t.style.overflow="",e===i)return}else t.style.overflow="hidden";t.style.height="5px",t.style.height="".concat(t.scrollHeight+2,"px")}},countLinebreaks:function(t){return(t.match(/\n/g)||[]).length},updateCounter:function(){var t=this.element.val(),e=t.length+(this.isChrome||this.isSafari?this.countLinebreaks(t):0),n=this.getMaxLength(),i=parseInt(n,10)-e,a=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===D.translate("CharactersLeft")?"Characters Left":D.translate("CharactersLeft")).replace("{0}",i.toString());this.counter&&(e>=n?(a=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",n):D.translate("CharactersMax")+n,this.counter.text(a),this.counter.removeClass("almost-empty")):(this.counter.text(a),i<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1)},disable:function(){this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.destroy(),this.init()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var t=this;this.element.on("keyup.textarea",(function(e){var n=t.element.val(),i=n.length+(t.isChrome||t.isSafari?t.countLinebreaks(n):0),a=t.getMaxLength();return t.updateCounter(),i>=a?(e.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)})).on("focus.textarea",(function(){t.counter&&t.counter.addClass("focus")})).on("updated.textarea",(function(){t.updated()})).on("keypress.textarea",(function(e){var n=t.element.val(),i=n.length+(t.isChrome||t.isSafari?t.countLinebreaks(n):0),a=t.getMaxLength();[97,99,118,120].indexOf(e.which)>-1&&(e.metaKey||e.ctrlKey)?t.updateCounter():t.isPrintable(e.which,e.shiftKey)&&i>=a&&!t.isSelected(this)&&e.preventDefault()})).on("blur.textarea",(function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")}))}},$.fn.textarea=function(t){return this.each((function(){var e=$.data(this,"textarea");e?e.updated(t):e=$.data(this,"textarea",new _i(this,t))}))};var Ri={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1};function Bi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Ri),this.init()}Bi.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=Ri.maxVisibleButtons),this},build:function(){var t=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",(function(){return t.cutoffTitle})).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var e=this.element.find(".more");e.length||(e=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(D.translate("MoreActions"),"</span>")).attr("title",D.translate("More")).appendTo(e)}this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each((function(){$(this).data("button")||$(this).button(),!$(this).data("tooltip")&&$(this).attr("title")&&$(this).tooltip()})),this.settings.noSearchfieldReinvoke||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each((function(t,e){var n=$(e);if(n.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(n=n.children(".searchfield")),!n.data("searchfield")){var i=$.extend({},b.parseSettings(n[0]));n.searchfield(i)}}));var n=this.more.data("popupmenu"),i=this.more.attr("aria-controls");n?this.moreMenu=n.menu:(this.moreMenu=$("#".concat(i)),this.moreMenu.length||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var a=[];this.items.not(this.more).not(".ignore-in-menu").filter((function(){return $(this).parent(".buttonset, .inline").length})).each((function(){a.push(t.buildMoreActionsMenuItem($(this)))})),a.reverse(),$.each(a,(function(e,n){""!==n.text()&&n.prependTo(t.moreMenu)})),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0;var s=b.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});n?this.more.on("beforeopen.toolbar",(function(){t.refreshMoreActionsMenu(t.moreMenu)})).triggerHandler("updated",[s]):this.more.popupmenu(s).on("beforeopen.toolbar",(function(){t.refreshMoreActionsMenu(t.moreMenu)})),function(){t.items.attr("tabindex","-1");var e=t.items.filter(".is-selected");if(e.length)return t.activeButton=e.first().attr("tabindex","0"),void t.items.not(t.activeButton).removeClass("is-selected");e=t.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),t.activeButton=e,t.element.is(":hidden, .is-hidden")?t.activeButton=t.items.filter(":not(:disabled)").first().attr("tabindex","0"):t.isItemOverflowed(e)&&(e.attr("tabindex","-1"),t.activeButton=t.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var r=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");return r.length&&r.trigger("reanimate"),this},buildMoreActionsMenuItem:function(t){var e;if(!0===t.data("skipit"))return t.data("skipit",void 0),e;var n=t.data("action-button-link");n&&n.length?e=n.parent():(e=$("<li></li>"),n=$('<a href="#"></a>').appendTo(e),t.data("action-button-link",n),n.data("original-button",t)),t.hasClass("hidden")&&e.addClass("hidden"),t.is(":disabled")?(e.addClass("is-disabled"),n.prop("disabled",!0)):(e.removeClass("is-disabled"),n.prop("disabled",!1)),n.text(this.getItemText(t));var i=$.getBaseURL("#icon-dropdown"),a=t.children(".icon").filter((function(){var t=$(this).getIconName();return t&&t!==i&&-1===t.indexOf("dropdown")}));a&&a.length&&(n.html("<span>".concat(n.text(),"</span>")),a.clone().detach().prependTo(n));var s=e.find("b");if(s.length&&(this.moreMenu.addClass("has-icons"),s.detach().prependTo(e)),t.is(".btn-menu")){t.data("popupmenu")?n.children(".icon.arrow").length||n.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):t.popupmenu();var r=t.data("popupmenu").menu,o=r.clone();!function t(n,i,a){var s,r=n.children("li"),o=i.attr("id");i.children("li").each((function(e,n){var i=$(n),a=r.eq(e),s=i.children("a"),o=a.children("a"),l=i.attr("id"),c=s.attr("id");l&&i.removeAttr("id").attr("data-original-menu-item",l),c&&s.removeAttr("id").attr("data-original-menu-anchor",c),o.data("action-button-link",s),s.data("original-button",o);var d=a.children(".wrapper").children(".popupmenu"),h=i.children(".wrapper").children(".popupmenu");d.length&&h.length&&t(d,h,i)})),i.removeAttr("id").attr("data-original-menu",o),a.addClass("submenu"),a.is(e)&&((s=a.children(".wrapper"))&&s.length||(s=$('<div class="wrapper"></div>')),s.html(i),a.append(s))}(r,o,e)}return t.is("[data-popdown]")&&t.popdown(),e},refreshMoreActionsMenu:function(t){var e=this;$("li > a",t).each((function(){var t,n=$(this),i=n.parent(),a=n.data("originalButton"),s=e.getItemText(a);a&&(n.find("span").length?n.find("span").text(s.trim()):n.text(s.trim()),a.isHiddenAtBreakpoint()||a.parent().isHiddenAtBreakpoint()?i.addClass("hidden"):i.removeClass("hidden"),a.parent().is(".is-disabled")||a.is(":disabled")?(i.addClass("is-disabled"),n.prop("disabled",!0),n.attr("tabindex","-1")):(i.removeClass("is-disabled"),n.prop("disabled",!1)),a.is("a")&&(a.parent("li").is(".is-checked")?i.addClass("is-checked"):i.removeClass("is-checked")),a.is(".btn-menu")&&(t=n.parent().find(".popupmenu").first(),e.refreshMoreActionsMenu(t)))}))},getItemText:function(t){if(!t)return"";var e,n=t.find("span").first(),i=t.attr("title"),a=t.data("tooltip");return e=""!==i&&void 0!==i?i:(a&&"string"==typeof a.content?a.content:void 0)||(n.length?n.text():t.text()),o.stripHTML(e)},handleEvents:function(){var t=this;return this.items.on("keydown.toolbar",(function(e){t.handleKeys(e)})).on("click.toolbar",(function(e){t.handleClick(e)})),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",(function(){var e,n=$(this);n.is(".is-overflowed")?(e=t.getLastVisibleButton())&&e.length&&e[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(n&&n.focus(),t.buttonset.scrollTop(0))})),this.items.not(this.more).on("selected.toolbar",(function(e,n){e.stopPropagation(),t.handleSelected(e,n)})),this.more.on("keydown.toolbar",(function(e){t.handleKeys(e)})).on("beforeopen.toolbar",(function(){t.adjustMenuItemVisibility()})).on("selected.toolbar",(function(e,n){e.stopPropagation(),t.handleSelected(e,n)})),this.more.on("show-submenu.toolbar",(function(e,n){t.handleTransferToMenuButtonItem(e,n)})),this.element.on("updated.toolbar",(function(e,n){e.stopPropagation(),t.updated(n)})).on("recalculate-buttons.toolbar",(function(e,n){t.handleResize(n)})).on("scrollup.toolbar",(function(){var e=t.element.parents(".tab-container.module-tabs");e.length&&e.scrollTop(0)})),$("body").on("resize.toolbar-".concat(this.id),(function(){t.handleResize()})),this.handleResize(),this},handleTransferToMenuButtonItem:function(t,e){var n=e.children("a").data("original-button");if(n){var i=n.data("popupmenu");i&&"function"==typeof i.settings.beforeOpen&&(i.callSource(t),this.buildMoreActionsMenuItem(n))}},handleSelected:function(t,e){var n,i,a,s,r=e.data("original-button");if(e.parent().is(".hidden, .is-disabled")||e.is("[readonly], [disabled]"))t.preventDefault();else{if(r&&r.length>0){if(n=r.listEvents(),i=this.element.listEvents(),this.setActiveButton(r),r.is("[data-popdown]")&&(s=r.data("popdown"),this.isItemOverflowed(r)&&(s.settings.trigger=this.more,s.updated())),r.attr("ng-click")||r.attr("data-ng-click"))return void r.trigger("click");for(var o=["click","touchend","touchcancel"],l=0;l<o.length;l++){var c=o[l];if(i&&i[c]&&i[c].delegateCount>0){var d=this.element,h=$.Event(c);return h.target=d.find(r)[0],void d.trigger(h)}if(n&&n[c]||r[0]["on".concat(c)])return void r.trigger(c)}return s=(a=r.parents(".popupmenu")).data("trigger"),a.length&&s instanceof $&&s.length?void s.triggerHandler("selected",[r]):void this.triggerSelect(r)}this.triggerSelect(e)}},handleClick:function(t){return this.setActiveButton($(t.currentTarget)),this.triggerSelect($(t.currentTarget)),!1},handleKeys:function(t){var e=t.which,n=$(t.target),i=n.is(".btn-actions"),a=D.isRTL();(37===e&&n.is(":not(input)")||38===e&&n.is(":not(input.is-open)"))&&(t.preventDefault(),i?this.setActiveButton(a?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(a?1:-1)),(39===e&&n.is(":not(input)")||40===e&&n.is(":not(input.is-open)"))&&(t.preventDefault(),i?this.setActiveButton(a?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(a?-1:1))},handleResize:function(t){this.settings.resizeContainers&&this.sizeContainers(t?t.title:void 0,t?t.buttonset:void 0);for(var e=this.getButtonsetButtons(),n=0;n<e.length;n++)e[n].removeClass("is-overflowed");this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(t,e){var n=this.element[0],i=this.title[0],a=this.buttonset[0],s=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return a.style.width="",i.style.width="",void n.classList.remove("do-resize");a.style.width="",i.style.width="",n.classList.contains("do-resize")||n.classList.add("do-resize");var r=$(n).getHiddenSize(),o=$(a).getHiddenSize(),l=$(i).getHiddenSize(),c=$(s).getHiddenSize(),d=parseInt(r.padding.left,10)+parseInt(r.padding.right,10);isNaN(c.width)&&(c.width=50),(isNaN(o.width)||o.width<0)&&(o.width=0);var h,u=void 0!==t&&!isNaN(t),p=void 0!==e&&!isNaN(e);this.cutoffTitle=!1;var f=u?parseInt(t,10):!0===this.settings.favorButtonset?r.width-(d+(p?parseInt(e,10):o.width)+c.width):l.scrollWidth,g=p?parseInt(e,10):!0===this.settings.favorButtonset?o.width:r.width-(d+(u?parseInt(t,10):l.scrollWidth)+c.width);if(this.settings.favorButtonset)return f<74&&(this.cutoffTitle=!0,h=Math.abs(f-74),f=74,g-=h),a.style.width=m(g+2),i.style.width=m(f-2),i.textContent&&f<k.textWidth(i.textContent.trim())&&(this.cutoffTitle=!0),void(f>k.textWidth($(i).find("h1").text().trim())&&(this.cutoffTitle=!1));g<0&&(this.cutoffTitle=!0,h=Math.abs(g-0),g=0,f-=h),i.style.width=m(f+2),a.style.width=m(g-2)}function m(t){return"".concat(t,"px")}},navigate:function(t){var e,n=this.items.filter(":visible:not(:disabled)"),i=n.index(this.activeButton)+t;i>=0&&i<n.length&&(e=n.eq(i)),i>=n.length&&(e=n.first()),-1===i&&(e=n.last()),this.isItemOverflowed(e)&&(e=this.more),this.setActiveButton(e)},getLastVisibleButton:function(){for(var t,e,n=$(this.items.get().reverse()).not(this.more),i=0;!t&&i<n.length;){if(e=$(n[i]),!this.isItemOverflowed(e)){t=e;break}i++}for(t&&0!==t.length||(t=n.first());t.length&&t.is(".separator, *:disabled, *:hidden");)t=t.prev();return t},getFirstVisibleButton:function(){for(var t=0,e=this.items,n=e.eq(t);n.is(".separator, *:disabled, *:hidden");)t++,n=e.eq(t);return n},setActiveButton:function(t,e){if(t[0]!==this.activeButton[0]){var n=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(t.is("a"))return i();var e=n.more.data("tooltip");return t[0]===n.more[0]?(e&&e.tooltip.is(":not(.hidden)")&&e.hide(),i()):n.isItemOverflowed(t)&&!t.is(".searchfield")?i():t}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!e&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function i(){return n.moreButtonIsDisabled()||!n.element.hasClass("has-more-button")?n.getLastVisibleButton():n.more}},triggerSelect:function(t){var e=$(t);e.is(this.more)||e.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[e])},getButtonsetButtons:function(){for(var t,e=[],n=this.buttonsetItems,i=0;i<n.length;i++)void 0!==(t=n.eq(i)).data("action-button-link")&&t.is(":not(.searchfield)")&&e.push(t);return e},getVisibleButtons:function(t){var e,n=[],i=[];t&&Array.isArray(t)||(t=this.getButtonsetButtons());for(var a=0;a<t.length;a++)t[a][0].classList.remove("is-overflowed");for(var s=0;s<t.length;s++)this.isItemOverflowed(e=t[s])?n.push(e):i.push(e);return{visible:i,hidden:n}},adjustMenuItemVisibility:function(t){var e="removeClass";function n(t,n){var i=t[0],a=t.data("action-button-link").parent()[0],s=t.isHiddenAtBreakpoint();if(n)return a.classList.add("hidden"),void i.classList.remove("is-overflowed");s||a.classList.remove("hidden"),i.classList.add("is-overflowed"),t.find(".icon").length&&(e="addClass")}t||(t=this.getVisibleButtons());for(var i=0;i<t.visible.length;i++)n(t.visible[i],!0);for(i=0;i<t.hidden.length;i++)n(t.hidden[i],!1);var a=0;this.moreMenu.find(".icon").each((function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||a++})),a>0&&(e="addClass"),this.moreMenu[e]("has-icons")},isItemOverflowed:function(t){if(this.moreButtonIsDisabled())return!1;if(!t||0===t.length)return!0;var e=this.buttonsetItems.filter(":not(.hidden)").index(t),n=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(n-=1),this.title.length&&e>=n)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),t instanceof $&&t.length&&(t=t[0]);var i=t.classList,a=window.getComputedStyle(t);if(i.contains("btn-actions"))return!0;if(i.contains("searchfield"))return!1;if("none"===a.display)return!0;var s=D.isRTL(),r=t.getBoundingClientRect(),o=this.buttonset[0].getBoundingClientRect();return 1==r.bottom>=o.bottom||1==(s?r.left<=o.left:r.right>=o.right)},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return P(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){if(!this.moreButtonIsDisabled()){var t="removeClass";this.moreMenu.children("li:not(.separator)").not(".hidden").length>0&&(t="addClass"),this.element[t]("has-more-button");var e=this.more.data("popupmenu");if("removeClass"===t){if(!e)return;e.close();var n=e.menu.find("li:not(.separator)").children("a"),i=!1;if(n.add(this.more).each((function(){document.activeElement===this&&(i=!0)})),i){var a=this.getLastVisibleButton()[0];a&&a.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var t=1===this.element.closest(".header").length,e=this.element.attr("id")||"",n=this.element.children(".title"),i=this.element.prev("label"),a=this.element.prev(".label"),s=t?$("header.header").find("h1").text():n.length?n.filter("div").text():i.length?i.text():a.length?a.text():"".concat(e," ").concat(D.translate("Toolbar"));this.element.attr("aria-label",s.replace(/\s+/g," ").trim())}},updated:function(t){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var t=this;$("body").off("resize.toolbar-".concat(this.id));var e=this.moreMenu.children("li");if(e.each((function(){t.teardownMoreActionsMenuItem($(this),!0)})),e.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each((function(t,e){var n=$(e).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy();var i=$(e).data("button");i&&"function"==typeof i.destroy&&i.destroy(),e.classList.remove("is-overflowed"),e.removeAttribute("tabindex")})),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var n=this.title.off("beforeshow.toolbar").data("tooltip");n&&"function"==typeof n.destroy&&n.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var i=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),a=i.data("searchfield");a&&"function"==typeof a.destroy&&i.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(t,e){var n=this,i=$(t),a=i.children("a"),s=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var r,o=i.find(".icon");o.length&&o.remove(),i.is(".submenu")&&(r=i.children(".wrapper").children(".popupmenu")).children("li").each((function(){n.teardownMoreActionsMenuItem($(this),!0)})),s&&s.length&&($.removeData(a[0],"original-button"),$.removeData(s[0],"action-button-link"),a.remove(),r&&r.off().parent(".wrapper").off().remove(),e&&i.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(t){return this.each((function(){var e=$.data(this,"toolbar");e?e.updated(t):e=$.data(this,"toolbar",new Bi(this,t))}))},$.fn.toolbarflexitem=function(t){return this.each((function(){var e=$.data(this,"toolbarflexitem");if(e)e.updated(t);else{var n=(e=$.data(this,"toolbarflexitem",new En(this,t))).destroy;e.destroy=function(){"function"==typeof n&&n.call(this),$.removeData(this,"toolbarflexitem")}}}))};var Oi={allowTabs:!1,beforeMoreMenuOpen:null,moreMenuSettings:{}};function Fi(t,e){this.element=t,this.settings=b.mergeSettings(this.element,e,Oi),this.init()}Fi.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var t=this;this.uniqueId=b.uniqueId(this.element),this.sections=b.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.items=this.getElements().map((function(e){var n={};return $(e).hasClass("btn-actions")&&(n=t.settings.moreMenuSettings||n,t.settings.beforeMoreMenuOpen&&(M("settings.moreMenuSettings.beforeOpen","settings.beforeMoreMenuOpen","Flex Toolbar"),n.beforeOpen=t.settings.beforeMoreMenuOpen)),$(e).toolbarflexitem({toolbarAPI:t,componentSettings:n,allowTabs:t.settings.allowTabs}),$(e).data("toolbarflexitem")})),this.items&&(this.settings.allowTabs||(this.items.forEach((function(e){e.focused&&(void 0===t.focusedItem?t.focusedItem=e:e.focused=!1)})),this.focusedItem||(this.focusedItem=this.items[0])),this.render(),this.handleEvents())},render:function(){this.element.setAttribute("role","toolbar"),this.items.forEach((function(t){t.render()}))},handleEvents:function(){var t=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]})),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),(function(e,n){e.stopPropagation(),t.navigate(n,null,!0)}))},handleKeydown:function(t){$(t.target).data("toolbarflexitem")&&this.handleItemKeydown(t)},handleItemKeydown:function(t){var e=D.isRTL(),n=t.key,i=this.getItemFromElement(t.target);function a(){t.preventDefault()}if("Enter"!==n)if(" "!==n){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(n)>-1){if("searchfield"===i.type&&("ArrowLeft"===n||"Left"===n))return;return this.navigate(e?1:-1,void 0,!0),void a()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(n)>-1){if("searchfield"===i.type&&("ArrowRight"===n||"Right"===n))return;this.navigate(e?-1:1,void 0,!0),a()}}else"hyperlink"===i.type&&this.select(t.target);else this.clickByEnterKey=!0},handleKeyup:function(t){this.clearClickByEnter(t)},handleClick:function(t){$(t.target).data("toolbarflexitem")&&this.handleItemClick(t),this.clearClickByEnter()},handleItemClick:function(t){var e=this.getItemFromElement(t.target);this.select(e),this.focusedItem=e},clearClickByEnter:function(t){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||t.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var t=[],e=[];return Sn.forEach((function(t){e.push(t.selector)})),e=e.join(", "),b.getArrayFromList(this.element.querySelectorAll(e)).forEach((function(e){var n=!1;Sn.forEach((function(i){!n&&$(e).is(i.selector)&&("function"!=typeof i.filter||i.filter(e))&&(n=!0,t.push(e))}))})),t},getItemFromElement:function(t){if(t instanceof En||t.isToolbarFlexItem)return t;for(var e,n=0;n<this.items.length;n++)this.items[n].element.innerHTML===t.innerHTML&&(e=this.items[n]);if(!e)throw new Error("No Toolbar Item instance available for element ".concat(t,"."));return e},get searchfieldAPI(){for(var t=0;t<this.items.length;t++)if("searchfield"===this.items[t].type)return this.items[t].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focused)return this.items[t]},set focusedItem(t){if(0!==this.items.length){for(var e=0;e<this.items.length;e++)this.items[e].focused=!1;t.focused=!0,this.trueFocusedItem=t}},get hasFocusableItems(){for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focusable)return!0;return!1},get canManageFocus(){var t=document.activeElement;if(this.element.contains(t))return!0;for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type&&this.items[e].componentAPI.isFocused)return!0;return"BODY"===t.tagName},get overflowedItems(){for(var t=[],e=0;e<this.items.length;e++)!0===this.items[e].overflowed&&t.push(this.items[e]);return t},navigate:function(t,e,n){if(!1!==this.hasFocusableItems){var i=0+t;for(null==e&&(e=this.items.indexOf(this.focusedItem));0!==t;)t>0&&(e===this.items.length-1?e=0:e++,--t),t<0&&(0===e?e=this.items.length-1:--e,t++);var a=this.items[e];!1!==a.focusable?(this.focusedItem=a,n&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(i>0?1:-1,e,n)}},select:function(t){var e=this.getItemFromElement(t);switch(e.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;e.selected=!0;break;default:e.selected=!0}},toPopupmenuData:function(){var t={noMenuWrap:!0};return t.menu=this.items.filter((function(t){return"actionbutton"!==t.type&&"searchfield"!==t.type})).map((function(e){return function(e){var n=e.toPopupmenuData();return n&&(n.icon&&(t.hasIcons=!0),n.selectable&&(t.selectable=n.selectable)),n}(e)})),t},toData:function(){var t={};return t.items=this.items.map((function(t){return t.toData()})),t},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,!0!==t?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(t){if(!t)return!1;var e;if(t instanceof HTMLElement||t instanceof $){if(!(e=$(t).data("toolbarflexitem")))return!1;t=e}return!(this.items.indexOf(t)<0)&&t.overflowed},updated:function(t){"object"===n(t)&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.settings.allowTabs||(this.element.removeEventListener("keydown",this.keydownListener),this.element.removeEventListener("keyup",this.keyupListener),this.element.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach((function(t){t.teardown()})),delete this.items,delete this.sections},destroy:function(){this.teardown()}},$.fn.toolbarflex=function(t){return this.each((function(){var e=$.data(this,"toolbar-flex");if(e)e.updated(t);else{var n=(e=$.data(this,"toolbar-flex",new Fi(this,t))).destroy;e.destroy=function(){"function"==typeof n&&n.call(this),$.removeData(this,"toolbar-flex")}}}))},$.fn.toolbarsearchfield=$.fn.searchfield;var zi={};function Hi(t,e){this.settings=b.mergeSettings(t,e,zi),this.element=$(t),this.init()}Hi.prototype={init:function(){this.isIe="ie"===u.browser.name,this.isIeEdge="edge"===u.browser.name,this.handleEvents()},valMethod:function(t,e){switch(t.attr("type")){case"checkbox":case"radio":return t.prop("checked");case"file":if("boolean"==typeof e&&e){var n=t.attr("original");return void 0!==n?n:""}return t.parent().find('[type="text"]').val();default:if(t.is("textarea")&&1===t.closest(".editor-source").length){var i=t.is(":visible")?t.val():t.text();return this.trimEditorText(i)}return t.val()}},trimEditorText:function(t){return t.trim().replace(/>\s+</g,"").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n")},getAbsolutePosition:function(t){var e=t.position();return t.parents().each((function(){if("relative"===window.getComputedStyle(this,null).position)return!1;e.left+=this.scrollLeft,e.top+=this.scrollTop})),{left:e.left,top:e.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===n(this.settings.d)){var t=this.settings.d;$(".icon-dirty, .msg-dirty",t.field).add(t.icon).add(t.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,zi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function(){var t=this,e=this.element;if(e.is(".editor")){var n=e.parent().find("textarea");n.data("original",this.trimEditorText(this.valMethod(n)))}e.data("original",this.valMethod(e,!0)).on("resetdirty.dirty",(function(){if(e.is(".editor")){var n=e.parent().find("textarea");n.data("original",t.trimEditorText(t.valMethod(n)))}e.data("original",t.valMethod(e)).triggerHandler("doresetdirty.dirty")})).on("change.dirty doresetdirty.dirty",(function(n){var i=e,a=e.closest(".field, .radio-group"),s=$("label:visible",a),r={class:"",style:""};if(a.is(".field-fileupload")&&(i=a.find("input.fileupload-background-transparent")),a.is(".editor-container")&&(i=a.find(".editor-source")),s[0]||(s=e.next("label")),"true"===e.attr("data-trackdirty")){if(e.addClass("dirty"),e.is('[type="checkbox"], [type="radio"]')&&(r.class+=" dirty-".concat(e.attr("type")),r.class+=e.is(":checked")?" is-checked":""),e.is("select")&&(r.class+=" is-select",i=e.next(".dropdown-wrapper").find(".dropdown")),r.icon=i.prev(),!r.icon.is(".icon-dirty")){e.is(".colorpicker")&&!D.isRTL()&&(r.rect=t.getAbsolutePosition(e),r.style="left:".concat(r.rect.left,"px; top:").concat(r.rect.top,"px;")),r.icon='<span class="icon-dirty'.concat(r.class,'"></span>'),r.msg=D.translate("MsgDirty")||"",r.msg='<span class="audible msg-dirty">'.concat(r.msg,"</span>");var o=$($(i[0].parentElement).find("input")[0]);i=e.is('[type="radio"]')?o:i,0===$(i[0].parentElement).find(".icon-dirty").length&&(i.before(r.icon),s.append(r.msg),r.style&&i.prev(".icon-dirty")[0]&&(i.prev(".icon-dirty")[0].style.cssText=r.style)),r.icon=i.prev(),r.msg=s.find(".msg-dirty")}var l=e.data("original"),c=t.valMethod(e);if(r.field=a,t.settings.d=r,a.is(".editor-container")){var d=a.find("textarea");l=d.data("original"),c=a.find(".editor-source").is(":visible")?d.val():t.isIe||t.isIeEdge?e[0].innerHTML:d.text(),c=t.trimEditorText(c)}if(c===l||e.attr("multiple")&&b.equals(c,l))return e.removeClass("dirty"),$(".icon-dirty, .msg-dirty",a).add(r.icon).add(r.msg).remove(),void e.trigger("doresetdirty"===n.type?"afterresetdirty":"pristine");e.trigger("dirty")}}))}},$.fn.trackdirty=function(t){return this.each((function(){var e=$.data(this,"trackdirty");e?e.updated(t):e=$.data(this,"trackdirty",new Hi(this,t))}))};var qi={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null};function Vi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,qi),this.init()}Vi.prototype={init:function(){this.isIe11="ie"===u.browser.name&&"11"===u.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable())},initTree:function(){var t=this,e=this.settings,n=this.element.find("a"),i=this.element.attr("data-selectable");e.selectable=void 0===i||"single"!==i.toLowerCase()&&"multiple"!==i.toLowerCase()?e.selectable:i,this.isMultiselect="multiple"===e.selectable,e.hideCheckboxes=e.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),n.each((function(){var e=$(this);t.decorateNode(e)}))},initSelected:function(){var t=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(e){return t.setNodeStatus($(e.querySelector("a")))}))},focusFirst:function(){var t=this.element[0].querySelector("a");t&&t.setAttribute("tabindex","0")},setFocus:function(t){(t=this.isjQuery(t)?t[0]:t)&&(t.focus(),t.classList.remove("hide-focus"))},decorateNode:function(t,e,n){var i,a=(t=this.isjQuery(t)?t:$(t))[0].getAttribute("data-badge"),s=t[0].getAttribute("data-alert-icon"),r=t.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,o=t[0].classList.contains("is-disabled")||r;if(void 0!==a&&(a=b.parseSettings(t,"data-badge")),t[0].setAttribute("role","treeitem"),t[0].setAttribute("tabindex","-1"),t[0].setAttribute("aria-selected","false"),o){t[0].classList.add("is-disabled"),t[0].setAttribute("aria-disabled","true");var l=t.next();l[0]&&"ul"===l[0].tagName.toLowerCase()&&l[0].classList.contains("is-open")&&([].slice.call(l[0].querySelectorAll("a")).forEach((function(t){t.classList.add("is-disabled"),t.setAttribute("aria-disabled","true")})),[].slice.call(t[0].parentNode.querySelectorAll("ul")).forEach((function(t){return t.classList.add("is-disabled")})))}i=t.parentsUntil(this.element,"ul").length-1,t[0].setAttribute("aria-level",i+1);var c=t.parent().index();t[0].setAttribute("aria-posinset",c+1);var d=t.closest("li").siblings().length+1;t[0].setAttribute("aria-setsize",d);var h=t.next("ul");h[0]&&h.children().length>0&&t[0].setAttribute("aria-expanded",h[0].classList.contains("is-open")?"true":"false");var u=t.contents().filter((function(){return!$(this).is(".tree-badge")})).text();t[0].textContent="",0===t.children("svg.icon-tree").length&&(t[0].insertAdjacentHTML("afterbegin",e||""===e?$.createIcon({icon:e,classes:["icon-tree"]}):$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:s,classes:["step-alert","icon-".concat(s)]}))),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==n||t[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var p=this.getBadgeHtml(a);""!==p&&t[0].insertAdjacentHTML("beforeend",p);var f=document.createElement("span");if(f.classList.add("tree-text"),f.textContent=u,t[0].appendChild(f),this.hasIconClass(t)&&this.setTreeIcon(t.find("svg.icon-tree"),t[0].getAttribute("class")),h[0]&&"ul"===h[0].tagName.toLowerCase()){var g=t[0].getAttribute("class");h[0].setAttribute("role","group"),h[0].parentNode.classList.add("folder"),this.setTreeIcon(t.find("svg.icon-tree"),h[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed),g&&-1===g.indexOf("open")&&-1===g.indexOf("closed")&&(t[0].setAttribute("class",o?"is-disabled":""),this.setTreeIcon(t.find("svg.icon-tree"),h[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed)),this.hasIconClass(t)&&(g=t[0].getAttribute("class"),this.setTreeIcon(t.find("svg.icon-tree"),h[0].classList.contains("is-open")?g:g.replace("open","closed")))}t.hideFocus()},setTreeIcon:function(t,e){if(t&&"string"==typeof e){t=this.isjQuery(t)?t:$(t);var n=e.replace(/#?icon-|hide-focus|\s?/gi,"");t.changeIcon(n)}},expandAll:function(t){var e=this,n=t;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(t){var n=t.previousElementSibling;if(t.parentNode.classList.add("is-open"),t.classList.add("is-open"),t.style.height="",n&&"a"===n.tagName.toLowerCase()){var i=n.querySelector("svg.icon-tree");e.setTreeIcon(i,e.settings.folderIconOpen),n.setAttribute("aria-expanded",!0),e.hasIconClass(n)&&e.setTreeIcon(i,n.getAttribute("class"))}}))},collapseAll:function(t){var e=this,n=t;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(t){var n=t.previousElementSibling;if(t.parentNode.classList.remove("is-open"),t.classList.remove("is-open"),t.style.height=0,n&&"a"===n.tagName.toLowerCase()){var i=n.querySelector("svg.icon-tree");e.setTreeIcon(i,e.settings.folderIconClosed),n.setAttribute("aria-expanded",!1),n.classList.remove("is-selected"),e.hasIconClass(n)&&e.setTreeIcon(i,n.getAttribute("class").replace("open","closed"))}}))},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},selectNodeById:function(t){this.selectNodeByJquerySelector("#".concat(t))},selectNodeByJquerySelector:function(t){var e=this.isjQuery(t)?t:$(t);if(e.length&&!e.is(".is-disabled")){var n=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(n),this.selectNode(e,!0)}},unSelectedNode:function(t,e){if(0!==t.length){var n=this;$("a",this.element).attr("tabindex","-1"),t.attr("tabindex","0"),$("a:not(.is-disabled)",t.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(t),this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(t){return t.classList.remove("is-active")})),t[0].parentNode.classList.add("is-active"),setTimeout((function(){var e=t.data("jsonData")||{};n.element.triggerHandler("unselected",{node:t,data:e})}),0)}},selectNode:function(t,e){var n,i=this,a=this.settings;0!==t.length&&("function"==typeof a.onBeforeSelect?(n=a.onBeforeSelect(t))&&n.done&&"function"==typeof n.done?n.done((function(n){n&&i.selectNodeFinish(t,e)})):n&&i.selectNodeFinish(t,e):i.selectNodeFinish(t,e))},selectNodeFinish:function(t,e,n){if(this.isMultiselect&&n)if("click"===n.type||"touch"===n.type){if(n.target.classList.contains("icon")&&t[0].parentNode.classList.contains("folder"))return}else if("keydown"===n.type){var i=n.charCode||n.keyCode;if(37===i||39===i)return}var a=this,s=[].slice.call(this.element[0].querySelectorAll("a"));if(s.forEach((function(t){return t.setAttribute("tabindex","-1")})),t[0].setAttribute("tabindex","0"),this.isMultiselect)[].slice.call(t[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach((function(t){t.setAttribute("aria-selected","true"),t.classList.add("is-selected"),t.parentNode.classList.add("is-selected")}));else{if(t[0].classList.contains("is-selected"))return;s.forEach((function(t){var e=$(t),n=e.data("jsonData");n&&(delete n.selected,e.data("jsonData",n)),t.setAttribute("aria-selected","false"),t.classList.remove("is-selected"),t.parentNode.classList.remove("is-selected")})),t[0].setAttribute("aria-selected","true"),t[0].classList.add("is-selected"),t[0].parentNode.classList.add("is-selected")}this.syncNode(t),this.loading||this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(t){return t.classList.remove("is-active")})),t[0].parentNode.classList.add("is-active"),setTimeout((function(){var e=t.data("jsonData")||{};a.element.triggerHandler("selected",{node:t,data:e})}),0)},setNodeStatus:function(t){var e,n=this,i=t.data("jsonData");if(this.isMultiselect){var a=function(t,e){t.forEach((function(t){var i=$(t.querySelector("a")),a=n.getSelectedStatus(i,e);"mixed"===a?(t.classList.remove("is-selected","is-partial"),t.classList.add("is-partial")):a?(t.classList.remove("is-selected","is-partial"),t.classList.add("is-selected")):t.classList.remove("is-selected","is-partial"),n.syncNode(i)}))},s=!1;a(e=[].slice.call(t[0].parentNode.querySelectorAll("li.folder")),s),s=!(!e.length&&i&&!i.selected),e=t.parentsUntil(this.element,"li.folder"),a(e=[].slice.call(e.toArray()),s)}else{var r=t[0],o=r.parentNode;i&&i.selected?(o.classList.add("is-selected"),r.classList.add("is-selected"),r.setAttribute("aria-selected",!0)):(o.classList.remove("is-selected","is-partial"),r.classList.remove("is-selected","is-partial"),r.setAttribute("aria-selected",!1))}},getSelectedStatus:function(t,e){var n,i=0,a=0,s=0;return t.parent().find("a").each((function(t){e&&0===t||(i++,(n=$(this).data("jsonData"))&&n.selected?a++:s++)})),i===a||i!==s&&"mixed"},toggleNode:function(t,e){var n,i=t.next(),a=this,s=this.settings;if(i[0]&&"ul"===i[0].tagName.toLowerCase()&&"group"===i[0].getAttribute("role"))if(i[0].classList.contains("is-open"))"function"==typeof s.onCollapse?(n=s.onCollapse(t))&&n.done&&"function"==typeof n.done?n.done((function(n){n&&a.selectNodeFinish(t,focus,e)})):n&&a.selectNodeFinish(t,focus,e):a.selectNodeFinish(t,focus,e),a.setTreeIcon(t.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),s.folderIconClosed),a.hasIconClass(t.closest(".folder a"))&&a.setTreeIcon(t.closest(".folder a").find("svg.icon-tree"),t.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),a.isAnimating=!0,a.isMultiselect||(a.unSelectedNode(t.parent().find("li.is-selected"),!1),t[0].classList.remove("is-selected")),i.one("animateclosedcomplete",(function(){i[0].classList.remove("is-open"),a.isAnimating=!1})).animateClosed(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded"));else{"function"==typeof s.onExpand?(n=s.onExpand(t))&&n.done&&"function"==typeof n.done?n.done((function(n){n&&a.selectNodeFinish(t,focus,e)})):n&&a.selectNodeFinish(t,focus,e):a.selectNodeFinish(t,focus,e);var r=t.data("jsonData");if(s.source&&r.children&&0===r.children.length){var o={node:t,data:t.data("jsonData")};return t[0].classList.add("is-loading"),a.loading=!0,void a.settings.source(o,(function(e){var n=a.findById(r.id);n.children=e,a.addChildNodes(n,t.parent()),t[0].classList.remove("is-loading"),a.loading=!1,a.accessNode(i,t),r.children=e,t.data("jsonData",r),a.selectNode(t,!0),a.initSelected()}))}a.accessNode(i,t)}},accessNode:function(t,e){var n=this,i=e.attr("class");this.setTreeIcon(e.closest(".folder").addClass("is-open").end().find("svg.icon-tree"),this.settings.folderIconOpen),this.hasIconClass(i)&&this.setTreeIcon(e.find("svg.icon-tree"),i.replace("is-selected","")),this.isAnimating=!0,t.one("animateopencomplete",(function(){n.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded"))},openNode:function(t,e){var n=this,i=e.data("jsonData");if(n.settings.source&&i.children&&0===i.children.length){var a={node:e,data:e.data("jsonData")};return e.addClass("is-loading"),n.loading=!0,void n.settings.source(a,(function(a){var s=n.findById(i.id);s.children=a,n.addChildNodes(s,e.parent()),e.removeClass("is-loading"),n.loading=!1,n.accessNode(t,e),i.children=a,e.data("jsonData",i),n.selectNode(e,!0),n.initSelected()}))}n.accessNode(t,e)},hasIconClass:function(t){return"string"!=typeof t&&(this.isjQuery(t)&&(t=t.length>1?t.first()[0]:t[0]),t=t.getAttribute("class")),t&&t.indexOf("icon")>-1},closeNode:function(t,e){var n=this;n.setTreeIcon(e.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),n.settings.folderIconClosed),n.hasIconClass(e.closest(".folder a"))&&n.setTreeIcon(e.closest(".folder a").find("svg.icon-tree"),e.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),n.isAnimating=!0,n.isMultiselect||(n.unSelectedNode(e.parent().find("li.is-selected"),!1),e.removeClass("is-selected")),t.one("animateclosedcomplete",(function(){t.removeClass("is-open"),n.isAnimating=!1})).animateClosed(),e.attr("aria-expanded","true"!==e.attr("aria-expanded"))},setupEvents:function(){var t=this;t.element.on("updated.tree",(function(e,n){t.updated(n),t.initTree()}))},handleKeys:function(){var t=this;this.element.on("click.tree","a:not(.is-clone)",(function(e){var n=$(this),i=this.parentNode;return n[0].classList.contains("is-disabled")||n[0].classList.contains("is-loading")||(t.isMultiselect?e.target.classList.contains("icon")&&i.classList.contains("folder")?t.toggleNode(n,e):i.classList.contains("is-selected")||i.classList.contains("is-partial")?t.unSelectedNode(n,!0):t.selectNode(n,!0):(t.selectNode(n,!0),t.toggleNode(n,e)),e.stopPropagation()),t.popupEl&&t.popupEl.data("popupmenu")&&(t.popupEl.data("popupmenu").close(),t.popupEl=null),!1})),this.element.on("focus.tree","a",(function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&this.classList.contains("is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}})),this.element.on("keydown.tree","a",(function(e){var n,i,a=e.charCode||e.keyCode,s=$(this);if(!t.isAnimating){if(40===a){var r=t.getNextNode(s);t.setFocus(r)}if(38===a){var o=t.getPreviousNode(s);t.setFocus(o)}if(32===e.keyCode&&s.trigger("click.tree"),37===a)return D.isRTL()?s.next().hasClass("is-open")?(i=s.next().find("a:first"),t.setFocus(i)):t.toggleNode(s,e):s.next().hasClass("is-open")?t.toggleNode(s,e):(i=s.closest(".folder").find("a:first"),t.setFocus(i)),e.stopPropagation(),!1;if(39===a)return D.isRTL()?s.next().hasClass("is-open")?t.toggleNode(s,e):(n=s.closest(".folder").find("a:first"),t.setFocus(n)):s.next().hasClass("is-open")?(n=s.next().find("a:first"),t.setFocus(n)):(t.toggleNode(s,e),t.setFocus(s)),e.stopPropagation(),!1;36===a&&(n=t.element.find("a:first:visible"),t.setFocus(n)),35===a&&(n=t.element.find("a:last:visible"),t.setFocus(n))}})),this.element.on("keypress.tree","a",(function(e){var n=e.charCode||e.keyCode,i=$(this);if(n>=37&&n<=40||32===n)return e.stopPropagation(),!1;0!==e.which&&i.closest("li").nextAll().find("a:visible").each((function(){var n=$(this);if(n.text().substr(0,1).toLowerCase()===String.fromCharCode(e.which).toLowerCase())return t.setFocus(n),!1}))}))},loadData:function(t){if(!t)return-1;var e=this;e.element.empty(),e.loading=!0,t=this.arrangeDataset(t);var n="";e.jsonData=[];for(var i=0,a=t.length;i<a;i++)n+=e.getNodeHtml(t[i],i);e.element[0].insertAdjacentHTML("beforeend",n),[].slice.call(e.element[0].querySelectorAll('a[role="treeitem"]')).forEach((function(t,n){var i=$(t),a=e.jsonData[n];i.data("jsonData",a),a.selected&&e.selectNode(i,a.focus)}));for(var s=[].slice.call(e.element[0].querySelectorAll("select.dropdown")),r=0;r<s.length;r++){var o=s[r];e.jsonData[r].disabled?$(o).dropdown().disable():$(o).dropdown().on("selected.tree",(function(){var t=e.findById(this.parentElement.previousElementSibling.id);t.text=this.value,e.updateNode(t)}))}e.jsonData=void 0,e.loading=!1,e.syncDataset(),e.initSelected(),e.focusFirst(),e.attachMenu(e.settings.menuId),e.createSortable()},arrangeDataset:function(t){if(!this.hasKeyInData("parent",t))return t;t=t||this.settings.dataset;var e=JSON.parse(JSON.stringify(t));return function t(n){for(var i=0;i<n.length;i++)void 0!==n[i].parent&&(a=n[i],s=void 0,s=!1,function t(e){for(var n=0;n<e.length&&!s;n++)e[n].id===a.parent&&((i=e[n]).children=i.children||[],i.children.push(a),s=!0),void 0!==e[n].children&&t(e[n].children);var i}(e)),void 0!==n[i].children&&t(n[i].children);var a,s}(t),function t(e,n){for(var i=0;i<e.length;i++)void 0!==e[i].children&&t(e[i].children,e[i].id),void 0===n&&void 0!==e[i].parent||void 0!==n&&void 0!==e[i].parent&&n!==e[i].parent?(e.splice(i,1),i--):delete e[i].parent}(e),this.settings.dataset=e,e},hasKeyInData:function(t,e){for(var i=!1,a=function e(a){for(var s in a)if(a.hasOwnProperty(s)){var r=a[s];if("object"!==n(r)||i?t===s&&(i=!0):e(r),i)break}},s=0,r=(e=e||this.settings.dataset).length;s<r&&!i;s++)a(e[s]);return i},getNodeHtml:function(t,e,i,a){var s="",r="";i=i||0,e+=1;var o=this.settings,l=a||t.disabled||!1,c={id:void 0!==t.id?' id="'.concat(t.id,'"'):"",href:' href="'.concat(void 0!==t.href?t.href:"#",'"'),expanded:' aria-expanded="'.concat(t.open?"true":"false",'"'),icon:t.icon||""===t.icon?t.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==t.alertIcon?' data-alert-icon="'.concat(t.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(t.text,"</span>"),class:["hide-focus"],ariaDisabled:l?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==t.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===n(t.badge)?this.getBadgeHtml(t.badge):""};this.jsonData.push(t),o.useStepUI&&(c.alertIcon='<svg class="icon step-alert icon-'.concat(t.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(t.alertIcon,'"></use>'));var d=t.children&&Array.isArray(t.children),h=d?"folder":"";if(""!=(h+=t.selected?" is-selected":"")&&(h=' class="'.concat(h+=t.open?" is-open":"",'"')),l&&c.class.push("is-disabled"),t.icon&&(c.icon=t.icon,(!d||d&&/open|closed/i.test(t.icon))&&c.class.push(t.icon)),d&&(t.open?(c.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon:o.folderIconOpen,a=l):c.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon.replace("open","closed"):o.folderIconClosed),c.icon="#icon-".concat(c.icon.replace(/^#?icon-?/,"")),c.class=' class="'.concat(c.class.join(" "),'"'),c.style="","dropdown"===t.type&&(c.style='style="display: none"',t.data)){s='<select class="dropdown" close-on-select="true">';for(var u=0;u<t.data.length;u++){var p=t.data[u];p.value===t.text?(r=p.text,s+='<option value="'.concat(p.value,'" selected>').concat(p.text,"</option>")):s+='<option value="'.concat(p.value,'">').concat(p.text,"</option>")}s+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(r),s='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(s+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var f="\n      <li".concat(h,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(c.style,'\n          aria-level="').concat(i,'"\n          aria-position="').concat(e,'"\n          aria-setsize="').concat(e,'"\n          ').concat(c.id+c.href+c.class+c.expanded+c.ariaDisabled+c.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(c.icon,'"></use>\n            </svg>').concat(c.checkbox+c.alertIcon+c.badge+c.text,"\n        </a>\n        ").concat(s);if(d){f+='<ul class="folder'.concat(t.open?" is-open":"",'" role="group">');for(var g=0,m=t.children.length;g<m;g++)f+=this.getNodeHtml(t.children[g],g,i+1,a);f+="</ul>"}return f+"</li>"},getBadgeHtml:function(t){var e={html:"",style:"",class:["badge","tree-badge"]};return t&&!t.remove&&(e.text="",void 0!==t.text&&(e.text=t.text.toString(),1===e.text.length&&e.class.push("round")),/info|good|error|alert|pending/i.test(t.type)?e.class.push(t.type):t.type&&"#"===t.type.charAt(0)&&7===t.type.length&&(e.style="background-color: ".concat(t.type," !important;")),t.backColor&&(e.style="background-color: ".concat(t.backColor," !important;")),t.foreColor&&(e.style+="color: ".concat(t.foreColor," !important;")),""!==e.style&&(e.style=' style="'.concat(e.style,'"')),""!==e.text&&(t.type&&-1!==t.type.indexOf("pending")&&(e.text=""),e.html='<span class="'.concat(e.class.join(" "),'"').concat(e.style,">").concat(e.text,"</span>"))),e.html},addToDataset:function(t,e){var n,i,a;if(t.parent&&(n=this.findById(t.parent)),e instanceof jQuery&&e.is("li")){var s=(i=this.findById($(e[0].parentNode.parentNode).find("a")[0].id)).children||i.node.data("jsonData").children;a=s.findIndex((function(t){return t.text.trim()===$(e).text().trim()})),s.splice(a,0,t)}return"bottom"!==e||t.parent||n||this.settings.dataset.push(t),"top"!==e||t.parent||n||this.settings.dataset.unshift(t),t.parent&&n&&(n.children||(n.children=[]),"bottom"===e?n.children.push(t):n.children.unshift(t)),!(t.parent&&!n)},findById:function(t,e){for(var n in e||(e=this.settings.dataset),e){var i=e[n];if(i.id===t)return i;if(i.children||i.node.data("jsonData").children){var a=this.findById(t,i.children||i.node.data("jsonData").children);if(a)return a}}return null},getNodeByIdIfSelected:function(t,e){var n=this.findById(t,e);return n&&n.selected?n:null},getSelectedNodes:function(){var t,e,n=[];return $("li.is-selected",this.element).each((function(){t=$("a:first",this),e=t.data("jsonData"),n.push({node:t,data:e})})),n},getNextNode:function(t){var e=t.parent().next().find("a:first"),n=t.next();if(n.is("ul.is-open")&&(e=n.find("a:first")),e.hasClass("is-disabled")&&(e=e.parent().next().find("a:first")),0===e.length)for(var i=0,a=t;i<1e3&&!(e=(a=a.parent().closest(".folder")).next().find("a:first")).length;i++);return e.hasClass("is-disabled")&&(e=this.getNextNode(e)),e},getPreviousNode:function(t){var e=t.parent().prev().find("a:first"),n=e.parent();return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(e=n.find("ul.is-open a:last")),e.hasClass("is-disabled")&&(n=(e=e.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(e=n.find("ul.is-open a:last")),0===e.length&&(e=t.closest("ul").prev("a")),e.hasClass("is-disabled")&&(e=this.getPreviousNode(e)),e},syncDataset:function(t){var e=[],n=this;[].slice.call((t=t||this.element).children("li").toArray()).forEach((function(t){e.push(n.syncNode(t.querySelector("a")))})),this.settings.dataset=e,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(t){var e=this,n=this.isjQuery(t)?t:$(t),i=(t=n[0]).parentNode,a=function(t,e){return t.classList.contains(e)},s={node:n,id:t.getAttribute("id"),text:t.querySelector(".tree-text").textContent};(a(t,"is-open")||i&&"li"===i.tagName.toLowerCase()&&a(i,"is-open"))&&(s.open=!0);var r=t.getAttribute("href");r&&(s.href=r),a(i,"is-selected")&&(s.selected=!0),a(t,"is-disabled")&&(s.disabled=!0);var o=t.getAttribute("class");o&&o.indexOf("icon")>-1&&(s.icon=o);var l=n.next();l[0]&&"ul"===l[0].tagName.toLowerCase()&&(s.children=[],[].slice.call(l.children("li").toArray()).forEach((function(t){s.children.push(e.syncNode(t.querySelector("a")))})));var c=n.data("jsonData");return c&&(delete c.selected,delete c.children,s=$.extend({},c,s)),n.data("jsonData",s),s},addNode:function(t,e,i){var a,s,r,o=this,l="object"===n(t.badge)?JSON.stringify(t.badge):t.badge;t.href=void 0!==t.href?t.href:"#",e=e||"bottom";var c=document.createElement("a");c.setAttribute("id",t.id),c.setAttribute("href",t.href),void 0!==l&&c.setAttribute("data-badge",l),void 0!==t.alertIcon&&c.setAttribute("data-alert-icon",t.alertIcon),t.text&&(c.textContent=t.text),t.disabled&&c.classList.add("is-disabled"),t.icon&&c.classList.add(t.icon);var d=document.createElement("li");if(t.open&&d.classList.add("is-open"),d.appendChild(c),"dropdown"===t.type&&(c.setAttribute("style","display: none"),t.data)){s='<select class="dropdown" close-on-select="true">';for(var h=0;h<t.data.length;h++)(r=t.data[h]).value===t.text?(a=r.text,s+='<option value="'.concat(r.value,'" selected>').concat(r.text,"</option>")):s+='<option value="'.concat(r.value,'">').concat(r.text,"</option>");s+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(a),s+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(s,"</div>")).appendTo(d),t.disabled?$(d).find("select.dropdown").dropdown().disable():$(d).find("select.dropdown").dropdown().on("selected.tree",(function(){var t=o.findById(this.parentElement.previousElementSibling.id);t.text=this.value,o.updateNode(t)}))}var u=!!this.loading||this.addToDataset(t,e);return t.parent instanceof jQuery&&(u=!0),e instanceof jQuery&&"before"===i?($(d).insertBefore(e),u=!0):e instanceof jQuery&&"after"===i&&($(d).insertAfter(e),u=!0),!(e instanceof jQuery)||t.parent&&u||t.parent instanceof jQuery||"before"===i||"after"===i||(e[0].appendChild(d),u=!0),"bottom"!==e||t.parent&&u||this.element[0].appendChild(d),"top"!==e||t.parent&&u||this.element.prepend(d),t.parent?(u&&"string"==typeof t.parent&&(d=this.element.find("#".concat(t.parent)).parent(),!t.disabled&&d.is(".is-selected")&&void 0===t.selected&&(t.selected=!0),this.addAsChild(t,d)),t.parent&&t.parent instanceof jQuery&&(d=t.parent,t.parent.is("a")&&(d=t.parent.parent()),this.addAsChild(t,d)),this.isjQuery(d)&&(t.node=d.find("ul li a#".concat(t.id)))):(d=$(d),this.addChildNodes(t,d),t.node=d.children("a").first()),c=$(c),this.decorateNode(c,t.icon,t.hideCheckbox),t.selected&&this.selectNode(c,t.focus),c.data("jsonData",t),d},addAsChild:function(t,e){var n=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");n||(e.insertAdjacentHTML("beforeend",'<ul class="folder"></ul>'),n=e.querySelector("ul")),t.open&&n.classList.add("is-open"),this.decorateNode(e.querySelector("a")),t.parent="",this.addNode(t,$(n))},addChildNodes:function(t,e){var n=this,i=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");t.children?(i||(e.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(t.open?" is-open":"",'"></ul>')),i=e.querySelector("ul")),i.innerHTML="",t.children&&t.children.forEach((function(t){return n.addNode(t,$(i))}))):i&&i.parentNode.removeChild(i)},isTrue:function(t){return null!=t&&("boolean"==typeof t&&!0===t||"string"==typeof t&&"true"===t.toLowerCase())},isFalse:function(t){return null!=t&&("boolean"==typeof t&&!1===t||"string"==typeof t&&"false"===t.toLowerCase())},updateNode:function(t){var e=t.node?{node:t.node}:this.findById(t.id);if(e&&e.node[0]){var n=e.node[0].parentNode,i=e.node[0].querySelector(".tree-text"),a=this.isTrue(t.disabled)||this.isFalse(t.enabled),s=this.isTrue(t.enabled)||this.isFalse(t.disabled);if(t.badge){var r=e.node[0].querySelector(".tree-badge");if(!r&&!t.badge.remove&&void 0!==t.badge.text&&""!==$.trim(t.badge.text)){var o=document.createElement("span");o.classList.add("tree-badge","badge"),i.parentNode.insertBefore(o,i),r=e.node[0].querySelector(".tree-badge")}r&&(void 0!==t.badge.text&&(t.badge.text=t.badge.text.toString(),r.textContent=t.badge.text,r.classList.remove("round"),1===t.badge.text.length&&r.classList.add("round")),void 0!==t.badge.type&&(r.classList.remove("info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(t.badge.type)?r.classList.add(t.badge.type):"#"===t.badge.type.charAt(0)&&7===t.badge.type.length&&(r.style.backgroundColor=t.badge.type),-1!==t.badge.type.indexOf("pending")&&(r.textContent="")),e.badge=t.badge,this.parseBool(t.badge.remove)&&(r.parentNode.removeChild(r),void 0!==e.badge&&delete e.badge))}t.text&&(i.textContent=t.text,e.text=t.text),t.icon?(this.setTreeIcon(e.node[0].querySelector("svg.icon-tree"),t.icon),e.icon=t.icon):t.children&&t.children.length&&!n.classList.contains("folder")&&this.convertFileToFolder(e.node),a&&(e.node[0].classList.add("is-disabled"),e.node[0].setAttribute("aria-disabled","true"),n.classList.contains("folder")&&n.classList.contains("is-open")&&[].slice.call(n.querySelectorAll("a, ul[role=group]")).forEach((function(t){t.classList.add("is-disabled"),t.setAttribute("aria-disabled","true")}))),s&&(e.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0||(e.node[0].classList.remove("is-disabled"),e.node[0].removeAttribute("aria-disabled"),n.classList.contains("folder")&&n.classList.contains("is-open")&&[].slice.call(n.querySelectorAll("a, ul[role=group]")).forEach((function(t){t.classList.remove("is-disabled"),t.removeAttribute("aria-disabled")})))),t.node&&this.syncDataset(),t.children&&(t.children.length?this.addChildNodes(t,n):this.removeChildren(t,n)),this.createSortable()}},parseBool:function(t){return!/^(false|0)$/i.test(t)&&!!t},removeChildren:function(t,e){var n=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");this.setTreeIcon(e.querySelector("svg.icon-tree"),t.icon||"icon-tree-node"),e.classList.remove("folder","is-open"),n&&n.parentNode.removeChild(n)},removeNode:function(t){var e=this.findById(t.id);t instanceof jQuery?(e=t).parent().remove():e&&e.node.parent().remove(),e&&this.syncDataset()},attachMenu:function(t){var e=this;t&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",(function(n){var i=$(this);return n.preventDefault(),e.popupEl=$(n.currentTarget).popupmenu({menuId:t,eventObj:n,trigger:"immediate",attachToBody:!0}).off("selected").on("selected",(function(t,n){e.element.triggerHandler("menuselect",{node:i,item:n})})),e.element.triggerHandler("menuopen",{menu:$("#".concat(t)),node:i}),!1}))},createSortable:function(){if(this.settings.sortable){var t,e,n,i=this;if(i.targetArrow=i.element[0].previousElementSibling,i.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!i.targetArrow||i.targetArrow&&!i.targetArrow.classList.contains("tree-drag-target-arrow")){var a=document.createElement("div");a.classList.add("tree-drag-target-arrow"),i.element[0].parentNode.insertBefore(a,i.element[0]),i.targetArrow=i.element[0].previousElementSibling}e=setInterval((function(){i.loading||(clearInterval(e),[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach((function(e){var a=$(e);a.data("drag")||a.on("mousedown.tree",(function(t){t.preventDefault(),n=!(3===t.which||t.target.classList.contains("icon")&&e.parentNode.classList.contains("folder"))})).drag({clone:!0,cloneAppendTo:a.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",(function(s,r,o){if(!o||!n)return e.classList.remove("is-dragging"),void(o&&o[0].parentNode.removeChild(o[0]));(t=o)[0].removeAttribute("id"),t[0].classList.add("is-dragging-clone"),[].slice.call(t[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach((function(t){return t.parentNode.removeChild(t)}));var l=a.closest("ul");i.sortable={startIndex:$(i.linkSelector,i.element).index(a),startNode:a,startIcon:$("svg.icon-tree",a).getIconName(),startUl:l,startLi:a.closest("li"),startFolderNode:l.prev("a"),startWidth:a.outerWidth()},i.element.triggerHandler("sortstart",i.sortable),s.preventDefault(),s.stopImmediatePropagation()})).on("drag.tree",(function(e,n){t&&(t[0].style.left="".concat(n.left,"px"),t[0].style.top="".concat(n.top,"px"),t[0].style.opacity="1",i.setDragOver(t,n))})).on("dragend.tree",(function(e,n){if(i.targetArrow.style.display="none",[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach((function(t){return t.classList.remove("is-over")})),t&&i.sortable.overDirection){t[0].style.left="".concat(n.left,"px"),t[0].style.top="".concat(n.top,"px");var a=i.sortable.startNode.parent(),s=i.sortable.overNode.parent();"over"===i.sortable.overDirection?(s[0].classList.contains("folder")||i.convertFileToFolder(i.sortable.overNode),s[0].querySelector("ul").appendChild(a[0]),s[0].classList.contains("is-open")||i.toggleNode(i.sortable.overNode,e)):"up"===i.sortable.overDirection?a.insertBefore(s):"down"===i.sortable.overDirection&&(s[0].classList.contains("is-open")&&s[0].classList.contains("folder")?$("ul:first",s).prepend(a):a.insertAfter(s)),!i.sortable.startUl[0].querySelector("li")&&i.sortable.startFolderNode.data("oldData")&&"file"===i.sortable.startFolderNode.data("oldData").type&&i.convertFolderToFile(i.sortable.startFolderNode),b.fixSVGIcons(a),i.element.triggerHandler("sortend",i.sortable),i.syncDataset(),i.isMultiselect&&i.initSelected()}}))})))}),10)}},setDragOver:function(t,e){var n,i,a,s,r,o,l,c,d,h,u,p,f=this,g=t[0].querySelector("svg.icon-tree"),m=f.element[0].getBoundingClientRect(),v=20,b=function(){f.sortable.overNode=null,f.sortable.overIndex=null,f.sortable.overDirection=null,f.targetArrow.style.display="none",f.setTreeIcon(g,"icon-cancel")};e.top>m.top-v&&e.top<m.bottom+v&&e.left>m.left-v-f.sortable.startWidth&&e.left<m.left+m.height+v?(v=2,(l=[].slice.call(f.element[0].querySelectorAll(f.linkSelector))).forEach((function(t,m){if(u=null,c=t.getBoundingClientRect(),e.top>c.top-v&&e.top<c.bottom+v){if((r=$(t)).parentsUntil(f.element,".folder").filter((function(){return $("a:first",this).is(f.sortable.startNode)&&f.sortable.startLi.is(".folder")})).length)return void b();s=t.parentNode,d=c.left,o=r.closest("ul"),n=parseInt(s.style.marginTop,10)>0?2:0,i=m-1===f.sortable.startIndex&&o.is(f.sortable.startUl),a=m+1===f.sortable.startIndex&&o.is(f.sortable.startUl),l.forEach((function(t){return t.classList.remove("is-over")})),p=function(){u?(f.setTreeIcon(g,f.sortable.startIcon),"over"===u?(f.targetArrow.style.display="none",t.classList.contains("is-disabled")||t.classList.add("is-over")):(l.forEach((function(t){return t.classList.remove("is-over")})),h="up"===u?c.top-1.5-(s.classList.contains("is-active")?3:0):c.bottom+(s.nextElementSibling&&s.nextElementSibling.classList.contains("is-active")?-1:1.5)+n,f.targetArrow.style.left="".concat(d,"px"),f.targetArrow.style.top="".concat(h,"px"),f.targetArrow.style.display="block"),f.sortable.overNode=r,f.sortable.overIndex=m,f.sortable.overDirection=u):b()},m!==f.sortable.startIndex&&(e.left>c.left-v-f.sortable.startWidth&&e.left<c.right+v?u=!i&&e.top<c.top?"up":!a&&e.top>c.top+2*v?"down":"over":!i&&e.top<c.top?u="up":a||(u="down")),p()}}))):b()},convertFileToFolder:function(t){var e=document.createElement("ul");e.setAttribute("role","group");var n={icon:$("svg.icon-tree",t).getIconName(),type:"file"};if(this.hasIconClass(t)){var i=t.attr("class").replace(/\s?is-selected/,"");n.iconClass=i,t.removeClass(i)}t.data("oldData",n);var a=t[0].parentNode;a&&"li"===a.tagName.toLowerCase()&&(a.classList.add("folder"),a.appendChild(e)),this.setTreeIcon($("svg.icon-tree",t),this.settings.folderIconClosed)},convertFolderToFile:function(t){var e=t.parent(".folder");e.removeClass("folder is-open"),$("ul:first",e).remove(),e.length&&(this.setTreeIcon($("svg.icon-tree",t),t.data("oldData")?t.data("oldData").icon:"tree-node"),t.data("oldData")&&t.data("oldData").iconClass&&t.addClass(t.data("oldData").iconClass),t.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each((function(){var t=$(this),e=t.data("drag");t.off("mousedown.tree"),e&&e.destroy&&e.destroy()})),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,qi)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){t.classList.add("is-disabled"),t.setAttribute("aria-disabled","true")}))},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){t.classList.remove("is-disabled"),t.removeAttribute("aria-disabled")}))},preserveEnablementState:function(){var t=[].slice.call(this.element[0].querySelectorAll("a")),e=[];return t.forEach((function(t){t.classList.contains("is-disabled")||!0===t.getAttribute("aria-disabled")?e.push({nodeId:t.id,state:"disabled"}):e.push({nodeId:t.id,state:"enabled"})})),this.settings.originalEnablementState=e,e},restoreEnablementState:function(){var t=this.settings,e=[].slice.call(this.element[0].querySelectorAll("a"));null!=t.originalEnablementState&&e.forEach((function(e){t.originalEnablementState.forEach((function(t){t.nodeId===e.id&&("disabled"===t.state?(e.classList.add("is-disabled"),e.setAttribute("aria-disabled","true")):(e.classList.remove("is-disabled"),e.removeAttribute("aria-disabled")))}))}))}},$.fn.tree=function(t){return this.each((function(){var e=$.data(this,"tree");e?e.updated(t):e=$.data(this,"tree",new Vi(this,t))}))};var ji={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Wi(t,e){this.settings=b.mergeSettings(t,e,ji),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Wi.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var t=W.themeColors().palette;this.settings.colors=[t.azure[100].value,t.azure[90].value,t.azure[80].value,t.azure[70].value,t.azure[60].value,t.azure[40].value,t.azure[30].value,t.azure[20].value,t.amethyst[100].value,t.amethyst[90].value,t.amethyst[80].value,t.amethyst[70].value,t.amethyst[60].value,t.amethyst[50].value,t.amethyst[40].value,t.amethyst[40].value,t.amethyst[30].value,t.amethyst[20].value,t.turquoise[100].value,t.turquoise[90].value,t.turquoise[80].value,t.turquoise[70].value,t.turquoise[60].value,t.turquoise[50].value,t.turquoise[40].value,t.turquoise[40].value,t.turquoise[30].value,t.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(t){var e=this,n=Object.create(this.settings.margin),i=this.element.parent().width()-n.left-n.right,a=this.element.parent().height()-n.top-n.bottom,s=d3.scaleOrdinal().range(this.settings.colors);if(0!==t.length){this.settings.showTitle&&t.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(t.name),a-=35,n.top-=19);var r=d3.treemap().size([i,a]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(i+n.left+n.right,"px")).style("height","".concat(a+n.top+n.bottom,"px")).style("left","".concat(n.left,"px")).style("top","".concat(n.top,"px"));var o=d3.hierarchy(t,(function(t){return t.children})).sum((function(t){return t.value})),l=r(o);this.total=d3.sum(l.leaves(),(function(t){return t.value})),this.root.datum(o).selectAll(".chart-treemap-node").data(l.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",(function(t){return"".concat(t.x0,"px")})).style("top",(function(t){return"".concat(t.y0,"px")})).style("width",(function(t){return"".concat(Math.max(0,t.x1-t.x0-1),"px")})).style("height",(function(t){return"".concat(Math.max(0,t.y1-t.y0-1),"px")})).style("background",(function(t){return t&&t.parent&&t.parent.data?s(t.parent.data.name):""})).text((function(t){return t.data.name})),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text((function(t){return d3.format(e.settings.labelFormatter)(t.value/e.total)}))}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var t=this;return this.element.on("updated.".concat("treemap"),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),(function(){t.handleResize()})),this.element.on("resize.".concat("treemap"),(function(){t.handleResize()}))),$("html").on("themechanged.".concat("treemap"),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),fe.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(t){return this.each((function(){var e=$.data(this,"treemap");e?e.updated(t):e=$.data(this,"treemap",new Wi(this,t))}))},$.fn.weekview=function(t){return this.each((function(){var e=$.data(this,"weekview");e?e.updated(t):e=$.data(this,"weekview",new ze(this,t))}))};var Ui={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function Gi(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,Ui),this.init()}function Yi(t,e,n,i,a,s){var r=a.placeholder;return r&&""===t?("[object Function]"==={}.toString.call(r)?r=r(e,n,i,a,s):s&&r in s&&(r=s[r]),r):""}Gi.prototype={init:function(){this.namespace=b.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var t=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&t.ticks){for(var e=function(t,e){return t.replace(/{{(\w+)}}/g,(function(t,n){return e[n]}))},n={state:"",href:"#",label:""},i=0;i<t.ticks.length;i++){var a=e(t.ticksTemplate,$.extend({},n,t.ticks[i]));a=a.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var s=$(a);t.ticks[i].ngClick&&s.attr("ng-click",t.ticks[i].ngClick),this.bar.append(s)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach((function(t){t.classList.contains("is-disabled")&&["onclick","ng-click"].forEach((function(e){return t.removeAttribute(e)}))})),this.header[0].style.opacity="1",this},setLabelsData:function(){var t=this,e=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],e.forEach((function(e){var n=e.textContent,i=e.getAttribute("data-shortlabel");i||(i=e.getAttribute("shortlabel"));var a={label:n,shortLabel:i,node:e,jqEl:$(e)};i&&"undefined"!==i||(e.removeAttribute("data-shortlabel"),e.removeAttribute("shortlabel"),delete a.shortLabel),t.labels.push(a)})),this},adjustLabels:function(){var t=this,e=this.header[0].getBoundingClientRect(),n=parseFloat(window.getComputedStyle(this.bar[0]).width),i=100/(this.labels.length-1)/100*n-15,a=[],s=[],r=function(e){delete e.isEllipsis,e.node.classList.remove("is-ellipsis"),e.node.style.width="",t.removeTooltip(e)},o=function(e){var n=t.labels[e].node;if(-1===a.indexOf(e)){var s=t.labels[e].shortLabel;s?(n.textContent=s,a.push(e),r(t.labels[e])):(n.classList.add("is-ellipsis"),n.style.width="".concat(i,"px"),t.setTooltip(t.labels[e]),t.labels[e].isEllipsis=!0)}n.style.left="-".concat((n.offsetWidth-n.parentNode.offsetWidth)/2,"px")},l=function(){var n=function(t,e,n){if(t.isEllipsis){var i=parseFloat(t.node.style.width)-e;t.node.style.width="".concat(i,"px"),t.node.style.left="-".concat((i-t.node.parentNode.offsetWidth)/2,"px")}else{var a=parseFloat(t.node.style.left)+e*(n?-1:1);t.node.style.left="".concat(a,"px")}},i=t.labels[0],a=i.node.rect||i.node.getBoundingClientRect();e.left>a.left&&n(i,e.left-a.left),a=(i=t.labels[t.labels.length-1]).node.rect||i.node.getBoundingClientRect(),e.right<a.right&&n(i,a.right-e.right,!0)};this.labels.forEach((function(t){var e=t.node;e.textContent=t.label,e.style.left="-".concat((e.offsetWidth-e.parentNode.offsetWidth)/2,"px"),r(t)})),l();var c=function(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)},d=function(){t.labels.forEach((function(t){t.rect=t.node.getBoundingClientRect()})),s=[];for(var e=0,n=t.labels.length;e<n;e++)if(e<n-1){var i=e+1;c(t.labels[e].rect,t.labels[i].rect)&&s.push([e,i])}},h=50;do{d(),s.forEach((function(e){var n=t.labels[e[0]].node.offsetWidth>t.labels[e[1]].node.offsetWidth?0:1,i=e[n],a=n?e[0]:e[1];o(i),c(t.labels[i].rect,t.labels[a].rect)&&o(a)})),l(),d(),h--}while(s.length&&h>0);return l(),this.labels.forEach((function(t){delete t.isEllipsis,delete t.rect})),this},setTooltip:function(t){var e=this;t.jqEl.tooltip({content:t.label,placement:"bottom"}).on("blur.".concat("wizard"),(function(){return e.removeTooltip(t)}))},removeTooltip:function(t){var e=t.jqEl.data("tooltip");e&&(e.element.off("blur.".concat("wizard")),e.destroy())},positionTicks:function(){var t=this.ticks.length,e=100/(t-1);this.ticks.toArray().forEach((function(n,i){var a=function(n){return n===t-1?100:e*n}(i),s=D&&D.isRTL()?100-a:a;n.style.left="".concat(s,"%"),n.classList.contains("is-disabled")&&n.setAttribute("tabindex","-1")}))},updateRange:function(){var t=function(t,e){return parseFloat(window.getComputedStyle(t)[e])},e=this.ticks.filter(".current").last(),n=0;return e.length&&(n=100*t(e[0],"left")/t(e.parent()[0],"width"),n=D&&D.isRTL()?100-n:n),this.completedRange[0].style.width="".concat(n,"%"),this},updated:function(t){return t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var t=this;return this.labels.forEach((function(e){t.removeTooltip(e),e.jqEl.off().removeData()})),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(t,e){return P(this.activate,this.select).apply(this,[t,e])},activate:function(t,e){if(void 0===t&&!e)return this;var n,i=this;if(void 0===t||null!=t&&t.type&&t.target||e||(e=t),e=void 0===e?(n=$(t.target)).is(".label")?n.parent():n:"number"==typeof e?i.ticks.eq(e):e,t&&(e.is("[disabled], .is-disabled")||!e.is("a")))return t.preventDefault(),t.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[e]))return this;var a=this.ticks.index(e);return this.ticks.removeClass("complete current").eq(a).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[e]),setTimeout((function(){i.element.trigger("afteractivated",[e])}),300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("wizard"),(function(){e.updated()})),this.ticks.on("click.".concat("wizard"),(function(t){e.activate(t,$(this))})),$("body").on("resize.".concat(this.namespace),(function(){t.adjustLabels()})),this}},$.fn.wizard=function(t){return this.each((function(){var e=$.data(this,"wizard");e?e.updated(t):e=$.data(this,"wizard",new Gi(this,t))}))};var Ki={Text:function(t,e,n){return null==n||""===n?"":n.toString()},Input:function(t,e,n,i){return i.inlineEditor?'<label for="datagrid-inline-input-'.concat(t,"-").concat(e,'" class="audible">').concat(i.name,'</label><input id="datagrid-inline-input-').concat(t,"-").concat(e,'" class="').concat("right"===i.align?"is-number-mask":"",'" value="').concat(n,'">'):null==n||""===n?"":n.toString()},Placeholder:function(t,e,n,i,a){var s=Yi(n,t,e,n,i,a);return""!==s?'<span class="is-placeholder">'.concat(s,"</span>"):null==n||""===n?"":n.toString()},Ellipsis:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.textOverflow="ellipsis",a},Password:function(t,e,n){return(null==n||""===n?"":n.toString()).replace(/./g,"*")},Readonly:function(t,e,n){return'<span class="is-readonly">'.concat(null==n?"":n,"</span>")},Date:function(t,e,n,i,a){var s,r=null==n?"":n;return"string"==typeof n&&n?(s=D.parseDate(n,i.sourceFormat?"string"==typeof i.sourceFormat?{pattern:i.sourceFormat}:i.sourceFormat:"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat))?r=D.formatDate(s,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat):"NaN/NaN/NaN"!==(r=D.formatDate(n,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat))&&r||""===r||(r=n):n&&(r=D.formatDate(n,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat)),i.editor&&!0!==a?'<span class="trigger">'.concat(r,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):r},Time:function(t,e,i,a,s){var r,o=null==i?"":i,l="object"===n(D)&&D.calendar().dateFormat?D.calendar().dateFormat.short:null,c="object"===n(D)&&D.calendar().timeFormat?D.calendar().timeFormat:null;return"string"==typeof i&&i?(r=D.formatDate(function(t){if(""===t)return null;var e=t.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===e)return null;var n=new Date;return n.setHours(parseInt(e[1],10)+(e[4]?12:0)),n.setMinutes(parseInt(e[2],10)||0),n.setSeconds(parseInt(e[3],10)||0),n}(i),{pattern:"".concat(l," ").concat(a.sourceFormat||a.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))):i&&(r=D.formatDate(i,{pattern:"".concat(l," ").concat(a.sourceFormat||a.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))),o=o.replace(/^\s/,""),a.editor&&!0!==s?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(t,e,n){return null==n?"":n},Lookup:function(t,e,n,i,a){var s=null==n?"":n,r=!1,o=Yi(s,t,e,n,i,a);return""!==o&&(r=!0),i.editor?(i.editorOptions&&"function"==typeof i.editorOptions.field&&(s=i.editorOptions.field(a,null,null),r=!1),null!=s&&""!==s||(s="",o&&(r=!0,s=o)),'<span class="trigger '.concat(r?"is-placeholder":"").concat("right"===i.align?"align-text-right":"",'">').concat(s,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):r?'<span class="is-placeholder">'.concat(o,"</span>"):s},Decimal:function(t,e,n,i,a){var s=n;void 0!==D&&null!=s&&""!==s&&(s=D.formatNumber(n,i.numberFormat));var r=Yi(s=null==s||"NaN"===s?"":s,t,e,n,i,a);return""!==r?'<span class="is-placeholder">'.concat(r,"</span>"):s},Integer:function(t,e,n,i){var a=n;return void 0!==D&&null!=a&&""!==a&&(a=D.formatNumber(n,i.numberFormat||{style:"integer"})),null==a||"NaN"===a?"":a},Hyperlink:function(t,e,n,i,a,s){var r=i.href||"#";if(i.href&&"function"==typeof i.href){if(null==(r=i.href(t,e,a,i)))return i.text||n}else r=r.replace("{{value}}",n);var o=i.text||n;return o||i.icon?i.icon?'<a href="'.concat(r,'" class="btn-icon row-btn ').concat(i.cssClass||"",'" ').concat(s.settings.rowNavigation?'tabindex="-1"':"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:i.icon,file:i.iconFile}),'\n          <span class="audible">').concat(o,"</span>\n        </a>"):'<a href="'.concat(r,'" ').concat(s.settings.rowNavigation?'tabindex="-1"':"",' role="presentation" class="hyperlink ').concat(i.cssClass||"",'"').concat(i.target?' target="'.concat(i.target,'"'):"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">").concat(o,"</a>"):""},Template:function(t,e,n,i,a){var s=i.template,r="";return ne&&a&&s&&(r=ne.compile("{{#dataset}}".concat(s,"{{/dataset}}"),{dataset:a})),r},Drilldown:function(){var t=D.translate("Drilldown");return void 0===t&&(t=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(t,"</span>\n      </button>")},RowReorder:function(){var t=D.translate("ReorderRows");return void 0===t&&(t="Reorder Rows"),'<div class="datagrid-reorder-icon">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(t,"</span>\n      </div>")},Checkbox:function(t,e,n,i,a,s){var r;r=i.isChecked?i.isChecked(n):void 0!==n&&(!0===n||1===parseInt(n,10));var o='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(D.translate(r?"Yes":"No"),"</span>"),l=s.wasJustUpdated;return s.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(i.name,'" class="datagrid-checkbox\n     ').concat(r?"is-checked ".concat(l?" ":" no-animation"):"",'" aria-checked="').concat(r,'"></span>').concat(o,"</div>")},SelectionCheckbox:function(t,e,n,i,a,s){var r=void 0!==n&&!0===n;n||(r=s.isRowSelected(a));var l=" ";if(s.settings.columnIds.length>0)for(var c=0;c<s.settings.columnIds.length;c++)l+=a[s.settings.columnIds[c]];return l=o.ensureAlphaNumericWithSpaces(l),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(i.name?i.name:D.translate("Select")+l,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(r?" is-checked no-animate":"",'" aria-checked="').concat(r,'"></span></div>')},Actions:function(t,e,n,i){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(i.menuId,'">\n        <span class="audible">').concat(i.title||D.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(t,e,n){return'<span class="datagrid-multiline-text">'.concat(null==n?"":n,"</span>")},Editor:function(t,e,n,i){var a=null==n?"":n,s="is-editor";return s+=i.singleline?" is-singleline":" datagrid-multiline-text",'<div class="'.concat(s+=i.contentTooltip?" content-tooltip":"",'">').concat(o.unescapeHTML(a),"</div>")},Expander:function(t,e,n){return'<button type="button" aria-label="'.concat(D.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(n?"<span> ".concat(n,"</span>"):"")},GroupRow:function(t,e,n,i,a,s){var r=s.settings.groupable,o={left:"",center:"",right:""},l="",c=void 0===r.expanded||r.expanded;r.expanded&&"function"==typeof r.expanded&&(c=r.expanded(t,e,n,i,a,s));for(var d=0;d<r.fields.length;d++)l+=a[r.fields[d]]+(0===d?"":",");r.groupRowFormatter&&(l=r.groupRowFormatter(t,e,n,i,a,s));var h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(c?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(c?" active":"",'"></span>\n    <span class="audible">').concat(D.translate("ExpandCollapse"),"</span>\n    </button><span> ").concat(l,"</span>");return o[s.getContainer(r.fields?r.fields[0]:"")]=h,o},GroupFooterRow:function(t,e,n,i,a,s){var r=s.settings.groupable,o={left:"",center:"",right:""},l=s.settings.frozenColumns.left.length,c=s.settings.frozenColumns.right.length,d=s.columnIdxById(r.aggregate),h=s.getContainer(r.aggregate);return o.left='<td role="gridcell" colspan="'.concat(l,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===h?a.sum:"<span>&nbsp;</span>","</div></td>"),o.center='<td role="gridcell" colspan="'.concat(d-l-c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===h?a.sum:"<span>&nbsp;</span>","</div></td>"),o.right='<td role="gridcell" colspan="'.concat(c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===h?a.sum:"<span>&nbsp;</span>","</div></td>"),r.groupFooterRowFormatter&&(o[h]=r.groupFooterRowFormatter(d,t,e,n,i,a,s)),o},SummaryRow:function(t,e,n,i){var a="",s=i.summaryText||"";return"after"===i.summaryTextPlacement&&(a=s,s=""),void 0!==D&&i.numberFormat&&null!=n&&""!==n&&(n=D.formatNumber(+n,i.numberFormat)),s+(null==n||""===n?"":n.toString())+a},Tree:function(t,e,n,i,a,s){var r=!a||a.expanded,o=s&&s.settings.treeDepth&&s.settings.treeDepth[t]?s.settings.treeDepth[t].depth:0,l=a&&a.isAllChildrenFiltered,c=l?" disabled":"";r&&l&&(r=!1);var d="short"===s.settings.rowHeight?22:30,h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(r?" is-expanded":"",'" tabindex="-1"').concat(o?' style="margin-left: '.concat(o?"".concat(d*(o-1),"px"):"",'"'):"").concat(c,'>\n      <span class="icon plus-minus ').concat(r?" active":"",'"></span>\n      <span class="audible">').concat(D.translate("ExpandCollapse"),"</span>\n      </button>").concat(n?" <span>".concat(n,"</span>"):""),u=' <span class="datagrid-tree-node"'.concat(o?' style="margin-left: '.concat(o?"".concat(d*o,"px"):"",'"'):"",">").concat(n,"</span>");return a&&a[i.children?i.children:"children"]?h:u},ClassRange:function(t,e,n,i){var a=i.ranges,s="",r="";if(!a)return{};for(var o=0;o<a.length;o++)n>=a[o].min&&n<=a[o].max&&(s=a[o].classes,r=a[o].text?a[o].text:s.split(" ")[0]),n===a[o].value&&(s=a[o].classes,r=a[o].text?a[o].text:n);return{classes:s,text:r}},Badge:function(t,e,n,i){var a=i.color,s=i.name;if(i.ranges){var r=Ki.ClassRange(t,e,n,i);a=r.classes,s=r.text}return'<span class="badge '.concat(a,'">').concat(n,' <span class="audible">').concat(s,"</span></span>")},Tag:function(t,e,n,i){var a=Ki.ClassRange(t,e,n,i);return'<span class="tag '.concat(a.classes,'">').concat(n,"</span>")},Alert:function(t,e,n,i){var a=Ki.ClassRange(t,e,n,i),s=$.createIcon({icon:a.classes,classes:["icon","datagrid-alert-icon","icon-".concat(a.classes)]});return"".concat(s,'<span class="datagrid-alert-text">').concat("value"===a.text?n:a.text,"</span>")},Image:function(t,e,n,i){return'<img class="datagrid-img" src="'.concat(n,'" alt="').concat(i.alt?i.alt:D.translate("Image"),'"').concat(i.dimensions?' style="height:'.concat(i.dimensions.height,";width:").concat(i.dimensions.height,'"'):"","/>")},Color:function(t,e,n,i){var a=Ki.ClassRange(t,e,n,i),s=null==n||""===n?"":n.toString();return'<span class="'.concat(a.classes,'">').concat(s,"</span>")},Colorpicker:function(t,e,n,i){var a=null==n||""===n?"":n.toString();if(i.inlineEditor)return a;var s="swatch".concat(""===n?" is-empty":"");return(a='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(s,'" style="background-color: ').concat(n,'"></span><input class="colorpicker" id="colorpicker-').concat(e,'" name="colorpicker-').concat(e,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(n,'" aria-describedby="">'))+'<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(t,e,n,i,a,s){var r;r=i.text?i.text:null==n||""===n?"":n.toString();var o='<button type="button" class="'.concat(i.icon?"btn-icon":"btn-secondary"," row-btn ").concat(i.cssClass?i.cssClass:"",'"').concat(s.settings.rowNavigation?' tabindex="-1"':""," >");return i.icon&&(o+=$.createIcon({icon:i.icon,file:i.iconFile})),o+"<span>".concat(r,"</span></button>")},Dropdown:function(t,e,n,i,a){var s,r,o=n,l=!1;if(i.options&&void 0!==n){s=i.caseInsensitive&&"string"==typeof n?n.toLowerCase():n;for(var c=0,d=i.options.length;c<d;c++)if(r=i.options[c],(i.caseInsensitive&&"string"==typeof r.value?r.value.toLowerCase():r.value)===s){o=r.label;break}}var h=Yi(o,t,e,n,i,a);""!==h&&(l=!0,o=h);var u='<span class="trigger dropdown-trigger '.concat(l?"is-placeholder":"",'">').concat(o,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){u='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(t,'" class="dropdown">');for(var p=0,f=i.options.length;p<f;p++){var g,m=i.options[p];g=void 0!==m.label?m.label:void 0!==m.value?m.value:"",u+="<option".concat(void 0===m.id?"":' id="'.concat(m.id,'"'),'  value="').concat(m.value,'"').concat(m.selected||m.value===s?" selected ":"",">").concat(g,"</option>")}u+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(o,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return u},Fileupload:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor||(a=""===$.trim(a)?'<span class="trigger">'.concat(a,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(a,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),a},Spinbox:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor&&(a='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="').concat(n,'">\n        <span class="spinbox-control up">+</span></span>')),a},Favorite:function(t,e,n,i,a,s){var r;r=i.isChecked?i.isChecked(n):void 0!==n&&!0===n;var o=i.editor&&s.settings.editable;return r?'<span aria-label="'.concat(D.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):i.showEmpty?'<span aria-label="'.concat(D.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(t,e,n,i,a){return a&&a.rowStatus?"".concat($.createIcon({icon:a.rowStatus.icon,classes:["icon","icon-".concat(a.rowStatus.icon)]}),'<span class="audible">').concat(a.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(t,e,n,i){var a=100*n,s="".concat(a,"%"),r=Ki.ClassRange(t,e,a,i),o=i.target;i.text&&(s=(s=(s=(s=(s=(s=(s=i.text).replace("{{value}}",n)).replace("<% value %>",n)).replace("<%value%>",n)).replace("{{percent}}",a)).replace("<% percent %>",a)).replace("<%percent%>",a),i.showPercentText=!0);var l=i.ranges&&r.classes?r.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(o||0,'%;"></div>\n              <div class="completed bar ').concat(l,'" style="width: ').concat(a,'%;"></div>\n              ').concat(i.showPercentText?'<div class="chart-targeted-text l-center">'.concat(s,"</div>\n            </div>"):'<div class="audible">'.concat(a,"%</div>"))}};function Xi(t,e,n,i,a,s,r,o,l){if(s.align&&t.addClass("l-".concat(s.align,"-text")),s.maxLength&&t.attr("maxlength",s.maxLength),s.uppercase&&t.addClass("uppercase-text"),s.mask&&"function"==typeof s.mask){var c=s.mask(e,n,i,s,l);t.mask({pattern:c,mode:s.maskMode})}else if(s.maskOptions&&"function"==typeof s.maskOptions){var d=s.maskOptions(e,n,i,s,l);t.mask(d)}else s.mask&&t.mask({pattern:s.mask,mode:s.maskMode});var h={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:D.currentLocale.data.numbers?D.currentLocale.data.numbers.group:",",decimal:D.currentLocale.data.numbers?D.currentLocale.data.numbers.decimal:".",negative:D.currentLocale.data.numbers?D.currentLocale.data.numbers.minusSign:"-"}},process:"number"},u=!1;s.maskOptions&&(u=!0),s.numberFormat&&(u=!0,h={patternOptions:{decimalLimit:s.numberFormat.maximumFractionDigits}}),s.maskOptions&&"function"==typeof s.maskOptions&&(u=!1),u&&(s.maskOptions=b.extend(!0,{},h,s.maskOptions),t.mask(s.maskOptions)),s.align&&"right"===s.align||t.removeClass("is-number-mask")}var Qi,Ji,Zi,ta,ea={Input:function(t,e,n,i,a,s,r,o){this.name="input",this.originalValue=n,this.useValue=!!a.inlineEditor,this.init=function(){this.input=a.inlineEditor?i.find("input"):$('<input type="'.concat(a.inputType||"text",'" autocomplete="off"/>')).appendTo(i),Xi(this.input,t,e,n,0,a,0,0,o)},this.val=function(t){var e;return t&&this.input.val(t),a&&a.numberFormat&&"percent"===a.numberFormat.style?(e=this.input.val().trim().replace(/(\s%?|%)$/g,""),D.parseNumber(e)/100):this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var t=this;a.inlineEditor||setTimeout((function(){t.input.remove()}),0)},this.init()},Textarea:function(t,e,n,i,a){this.name="textarea",this.originalValue=n,this.init=function(){i.addClass("datagrid-textarea-cell-wrapper");var t=i.get(0).scrollHeight,e=a.editorOptions&&a.editorOptions.minHeight?'style="min-height: '.concat(a.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(e,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(i);var n=a.editorOptions?a.editorOptions:{};"characterCounter"in n||(n.characterCounter=!1),this.api=this.input.data("autogrow-start-height",t).textarea(a.editorOptions).data("textarea"),this.input.on("click.textareaeditor",(function(t){t.stopPropagation()})),a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text")},this.val=function(t){return t&&this.input.focus().val(t),this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var t=this;i.removeClass("datagrid-textarea-cell-wrapper"),setTimeout((function(){t.input.off("click.textareaeditor"),t.input.remove()}),0)},this.init()},Editor:function(t,e,n,i,a,s,r){this.name="editor",this.originalValue=n,this.init=function(){var t=this,e=$.extend({},{buttons:{editor:["bold","italic","underline","strikethrough","separator","foreColor"],source:[]},excludeButtons:{editor:[]}},a.editorOptions);this.editorWidth=r.setUnit(e.width||i.outerWidth()),delete e.width,i[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(o.unescapeHTML(n),"</div>\n        </div>"),this.td=i.closest("td"),this.input=$(".editor",i),this.input.popover({content:$(".editor-wrapper",i),placementOpts:{x:0,y:"-".concat(parseInt(i[0].style.height,10)+35),parent:this.td,parentXAlignment:D.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup"}).editor(e).on("hide.editor",(function(){r.commitCellEdit(t.input)})).on("keydown.editor",(function(e){var n=e.which||e.keyCode||e.charCode||0;if((e.ctrlKey||e.metaKey)&&(13===n||10===n)){var i=t.input.data("tooltip");i&&(i.hide(),r.setNextActiveCell(e))}})),b.fixSVGIcons($("#editor-popup"))},this.val=function(){return this.input.html()},this.focus=function(){var t=this;setTimeout((function(){t.input.focus()}),0)},this.destroy=function(){var t=this;i.removeAttr("style"),r.quickEditMode=!1,t.input.off("hide.editor keydown.editor"),setTimeout((function(){t.input.remove()}),0)},this.init()},Checkbox:function(t,e,n,i,a,s,r){this.name="checkbox",this.originalValue=n,this.useValue=!0,this.container=i,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(i),this.input.after('<label class="checkbox-label"></label>'),a.align&&this.input.addClass("l-".concat(a.align,"-text"))},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=a.isChecked?a.isChecked(t):t,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(s)),this.input.prop("checked",e)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var t=this;setTimeout((function(){t.input.next(".checkbox-label").remove(),t.input.remove()}),0)},this.init()},Colorpicker:function(t,e,n,i,a,s,r){this.name="colorpicker",this.originalValue=n,this.useValue=!0,n=o.stripTags(n),this.init=function(){this.input=$('<input id="colorpicker-'.concat(e,'" name="colorpicker-').concat(e,'" class="colorpicker" value="').concat(n,'" type="text" autocomplete="off"/>')).appendTo(i),this.input.colorpicker(a.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var e=this;this.input.trigger("openlist"),r.rowNodes(t).removeClass("is-hover-row"),this.input.focus().select(),this.input.off("listclosed").on("listclosed",(function(){r.commitCellEdit(e.input),i.parent("td").focus()}))},this.destroy=function(){},this.init()},Dropdown:function(t,e,i,a,s,r,o,l){this.name="dropdown",this.originalValue=i,this.useValue=!0,this.cell=o.activeCell,this.init=function(){var c=this;if(s.inlineEditor)this.input=a.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(a),s.options){var d,h,u;i=o.fieldValue(l,s.field);for(var p=s.caseInsensitive&&"string"==typeof i?i.toLowerCase():i,f=0;f<s.options.length;f++)d=$("<option></option>"),h=s.options[f],u=s.caseInsensitive&&"string"==typeof h.value?h.value.toLowerCase():h.value,(h.selected||p===u)&&(d.attr("selected","true"),this.originalValue=u),d.attr("value",h.value).attr("id",h.id).attr("data-type",n(h.value)),d.text(h.label),this.input.append(d)}var g=s.editorOptions||{};g.cssClass&&/is-editing/g.test(g.cssClass)||(g.cssClass=g.cssClass||"",g.cssClass+=" is-editing"),this.input.dropdown(g),this.input.on("requestend",(function(){c.val(c.datasetValue)})),this.input.data("dropdown").settings.sourceArguments={column:s,container:a,grid:o,cell:e,event:r,row:t,rowData:l,value:i}}},this.val=function(t){if(this.datasetValue=t,void 0!==t){var e=s.caseInsensitive&&"string"==typeof t?t.toLowerCase():t;this.input.val(t),this.input.find("option").each((function(){var t=$(this),n=t.attr("value"),i=t.attr("data-type"),a=n;"number"===i?a=parseFloat(n):"boolean"===i?a="true"===n:"string"===i&&s.caseInsensitive&&(a=n.toLowerCase()),a===e&&t.attr("selected","true")}))}var n=this.input.find(":selected"),i=n.attr("value"),a=n.attr("data-type");return"number"===a?i=parseFloat(i):"boolean"===a&&(i="true"===i),void 0===i&&(i=n.text()),i},this.focus=function(){var e=this;"click"===r.type?(this.input.trigger("openlist"),o.rowNodes(t).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),this.input.off("listclosed").on("listclosed",(function(t,n){o.commitCellEdit(e.input),"select"!==n?"tab"===n&&setTimeout((function(){a.parent("td").focus()}),100):a.parent("td").focus()}))},this.destroy=function(){},this.init()},Date:function(t,e,n,i,a,s,r){this.name="date",this.originalValue=n,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(i),this.input.datepicker(a.editorOptions||{dateFormat:a.dateFormat})},this.val=function(n){return"0000"!==n&&"000000"!==n&&"00000000"!==n||(n=""),n&&this.input.val(n),Ki.Date(t,e,this.input.val(),a,!0)},this.focus=function(){var t=this;this.input.select().focus(),"click"===s.type&&$(s.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.input.on("listclosed",(function(){t.input.closest("td").removeClass("is-focused"),setTimeout((function(){t.input.trigger("focusout"),i.parent().focus(),r.setNextActiveCell(s)}),1)}))},this.destroy=function(){var t=this;setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Fileupload:function(t,e,n,i,a,s,r){var l=this,c=b.mergeSettings(void 0,a.editorOptions,{allowedTypes:"*"}),d=c.allowedTypes.split(/[\s|]+/g),h=b.uniqueId(this,"fileupload-".concat(t,"-").concat(e,"-")),u=c.useMultiple?" multiple":"",p=c.isDisabled?" disabled":"",f="";if(1===d.length)"*"!==d[0]&&(f=".".concat(o.ensureAlphaNumeric(d[0])));else for(var g=0,m=d.length;g<m;g++)f+=".".concat(o.ensureAlphaNumeric(d[g])+(g!==m-1?",":""));""!==f&&(f=' accept="'.concat(f,'"')),this.name="fileupload",this.originalValue=n,this.status="init",this.useValue=!0,this.init=function(){h=o.ensureAlphaNumeric(h),u=o.ensureAlphaNumeric(u),p=o.ensureAlphaNumeric(p),this.input=$('<input id="'.concat(h,'" name="').concat(h,'" class="fileupload" type="file" ').concat(f).concat(u).concat(p,' autocomplete="off"/>')),i.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(a.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(t){return t?(t=o.stripTags(t),this.input.attr("value",t),t):this.input.val()},this.focus=function(){var t=function(){""!==l.originalValue&&(l.status="clear"),r.commitCellEdit(l.input)},e=function(){l.api&&($("body").one("focusin.fileuploadeditor",(function(){setTimeout((function(){"change"!==l.status&&(l.status="cancel",r.commitCellEdit(l.input))}),100)})),l.api.fileInput.trigger("click"))};if(l.input.on("change.fileuploadeditor",(function(){l.status="change",r.commitCellEdit(l.input)})),"keydown"===s.type){var n=s.which||s.keyCode||s.charCode||0;8===n||46===n?t():13===n||10===n?e():r.commitCellEdit(l.input)}if("click"===s.type){var i=$(s.target);i.is(".icon-close")?t():i.is(".icon-fileupload")?e():r.commitCellEdit(l.input)}},this.destroy=function(){l.input.off("change.fileuploadeditor"),r.quickEditMode=!1,l.api&&l.api.destroy()},this.init()},Time:function(t,e,n,i,a,s,r){this.name="time",this.originalValue=n,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(i),this.api=this.input.timepicker(a.editorOptions||"").data("timepicker")},this.val=function(t){return t&&this.input.val(t),this.input.val()},this.focus=function(){var t=this;this.input.select().focus(),"click"===s.type&&$(s.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.api.trigger.on("hide.editortime",(function(){t.input.closest("td").removeClass("is-focused"),setTimeout((function(){t.input.trigger("focusout"),i.parent().focus(),r.setNextActiveCell(s)}),1)}))},this.destroy=function(){var t=this;t.api&&t.api.trigger&&t.api.trigger.off("hide.editortime"),setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Lookup:function(t,e,n,i,a,s,r,o){this.name="lookup",this.originalValue=n,this.init=function(){this.input=$('<input class="lookup '.concat("right"===a.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(i),Xi(this.input,t,e,n,0,a,0,0,o),this.input.lookup(a.editorOptions),i.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:a,container:i,grid:r,cell:e,event:s,row:t,rowData:o,value:n}},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var t=this.input.data("lookup"),e=this.input.closest("td");"keydown"===s.type&&(this.input.select().focus(),e.on("keydown.editorlookup",(function(t){40===t.keyCode&&(t.preventDefault(),t.stopPropagation())}))),"click"===s.type&&($(s.target).is("svg")?t.openDialog(s):(this.input.select().focus(),e.on("touchcancel.editorlookup touchend.editorlookup",".trigger",(function(){t.openDialog()})))),this.input.on("change.editorlookup",(function(){r.quickEditMode=!1}))},this.destroy=function(){var t=this,e=this.input.closest("td");setTimeout((function(){r.quickEditMode=!1,e.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),t.input.remove()}),0)},this.init()},Autocomplete:function(t,e,n,i,a,s,r){this.name="autocomplete",this.originalValue=n,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.width=i.parent().width(),a.editorOptions.offset={left:-1,top:"medium"===r.settings.rowHeight?1:5},a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(a.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){r.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var t=this;setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Spinbox:function(t,e,n,i,a,s,r){this.name="spinbox",this.originalValue=n,this.useValue=!0,this.init=function(){if(a.inlineEditor)this.input=i.find("input");else{var t='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="\'+ ').concat(n,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');l.append(i,t,"<label><span><input>"),this.input=i.find("input"),a.editorOptions||(a.editorOptions={}),this.input.spinbox(a.editorOptions)}},this.val=function(t){return t&&this.input.val(t),parseInt(this.input.val(),10)},this.focus=function(){r.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var t=this;a.inlineEditor||setTimeout((function(){r.quickEditMode=!1;var e=t.val();t.input&&t.input.data("spinbox")&&t.input.data("spinbox").destroy(),t.input&&t.input.remove(),i.text(e)}),0)},this.init()},Favorite:function(t,e,n,i,a,s,r){this.name="favorite",this.useValue=!0,this.originalValue=n,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:n?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(i),this.input=this.input.find("input")},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=a.isChecked?a.isChecked(t):t,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(s)),this.input.prop("checked",e),this.input.find("use").attr("href",e?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var t=this;setTimeout((function(){t.input.parent().remove()}),0)},this.init()}},na={cleanExtra:function(t,e){var n=[];if(n=!e&&t?na.datasetToHtml(t):na.appendRows(e.settings.dataset,e.table[0].cloneNode(!0),e),!t&&!n[0].querySelector("thead")){for(var i=n[0].querySelector("tbody"),a=n[0].createTHead(),s=a.insertRow(0),r=e.headerNodes(),o=0;o<r.length;o++){var l=r[o],c=s.insertCell(o);c.innerHTML=l.querySelector(".datagrid-header-text").textContent.trim(),c.setAttribute("class",l.classList),c.setAttribute("id",l.getAttribute("id")),l.getAttribute("data-exportable")&&c.setAttribute("data-exportable",l.getAttribute("data-exportable"))}i.parentNode.insertBefore(a,i)}return n=function(t){var e=function(t){t.parentNode&&t.parentNode.removeChild(t)},n=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach((function(t){t.classList.contains("is-hidden")||t.classList.contains("datagrid-expandable-row")?e(t):[].slice.call(t.querySelectorAll("th, td, div, span")).forEach((function(t){if(t.classList.contains("is-hidden"))e(t);else{var i=t.getAttribute("data-exportable");if(i&&"no"===i){var a=parseInt(t.id.slice(-1),10);return n.push(a+1),void e(t)}var s=t.getAttribute("aria-colindex");if("td"===t.tagName.toLowerCase()&&s&&-1!==n.indexOf(parseInt(s,10)))e(t);else{for([].slice.call(t.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach((function(t){return e(t)}));t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);var r=t.textContent;"="===r.substr(0,1)&&""!==r.substr(1,1)&&(t.textContent="'".concat(r,"'"))}}}))})),t}(n),e&&e.settings.exportConvertNegative&&[].slice.call(n[0].querySelectorAll("td")).forEach((function(t){t.textContent=t.textContent.replace(/^(.+)(-$)/,"$2$1")})),n},save:function(t,e){var n=(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],i="string"==typeof n&&/\b(xlsx|xls)\b/g.test(n);if("ie"===u.browser.name||"edge"===u.browser.name){if(window.navigator.msSaveBlob){var a=new Blob([t],{type:"application/csv;charset=utf-8;"});navigator.msSaveBlob(a,e)}}else if(window.URL.createObjectURL){var s=new Blob([t],{type:"application/".concat(i?"vnd.ms-excel":"csv",";charset=utf-8;")}),r=URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}else{var l=document.createElement("a");l.href=this.base64(t),l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},datasetToHtml:function(t){for(var e="<tbody>",n=function(n,i){e+="<tr>",Object.keys(t[n]).forEach((function(i,a){t[n]&&Object.prototype.hasOwnProperty.call(t[n],i)&&(e+="<td>".concat(t[n][i],"</td>"))})),e+="</tr>"},i=0,a=t.length;i<a;i++)n(i);return e+="</tbody>",$("<table></table>").append(e)},appendRows:function(t,e,n){var i,a=(i=e)&&(i instanceof jQuery||i.constructor.prototype.jquery)?e:$(e),s="",r=(e=a[0]).querySelector("tbody");return r.innerHTML="",t.forEach((function(t,e){!function t(e,i){if(!e._isFilteredOut){var a=n.rowHtml(e,i,i,!1,!1,i,!0),r=document.createElement("tr");if(r.innerHTML=a.left+a.center+a.right,s+=r.outerHTML,e.children)for(var o=0,l=e.children.length;o<l;o++)t(e.children[o],o)}}(t,e)})),r.insertAdjacentHTML("beforeend",s),a},base64:function(t){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(t)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(t)))},copyToDataSet:function(t,e,n,i,a){for(var s=function(t,e,n,i){for(var a=0,s=t.length;a<s;a++){var r=e.columns[i];r.formatter!==Ki.Readonly&&(r.editor.name===ea.Input.name?("integer"===r.filterType||"decimal"===r.filterType||"number"===r.filterType)&&isNaN(t[a].trim())||(n[r.field]=t[a]):r.editor.name===ea.Input.name&&(isNaN(Date.parse(t[a]))||(n[r.field]=new Date(t[a])))),i++}},r=t.length,o=a.settings.columns.length,l=0;l<r;l++){var c=t[l].split("\t"),d=n;if(e<i.length)s(c,a.settings,i[e],d);else{for(var h={},u=0;u<o;u++)h[a.settings.columns[u].field]="";s(c,a.settings,h,d),i.push(h)}e++}a.renderRows(),a.syncSelectedUI(),a.pagerRefresh("bottom")},exportToExcel:function(t,e,n,i){var a,s={worksheet:e||"Worksheet",table:na.cleanExtra(n,i)[0].innerHTML};t="".concat(t||i.element[0].id||"Export",".xls"),na.save((a=s,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,(function(t,e){return a[e]}))),t)},exportToCsv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",a=arguments.length>3?arguments[3]:void 0,s=function(t){return t&&"object"===n(t)&&t.constructor===Object},r=function(t){return/^(false|0+|null)$/gi.test(t)},o={firstLine:!0,char:","};if("sep=,"!==i&&!r(i)){var l=function(t){return'"'!==t?t:o.char};if(s(i))o.firstLine=!r(i.firstLine),"string"!=typeof i.char||1!==i.char.length||r(i.char)||(o.char=l(i.char));else if("string"==typeof i)if(1!==i.length||r(i)){if(/^sep=.$/.test(i)){var c=i.replace("sep=","");o.char=r(c)?o.char:l(c)}}else o.char=l(i)}var d=function(t){var e=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach((function(t){var n=[];[].slice.call(t.querySelectorAll("td, th")).forEach((function(t){return n.push(t.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())})),e.push(n.join('"'.concat(o.char,'"')))})),o.firstLine&&e.unshift(["sep=".concat(o.char)]),'"'.concat(e.join('"\n"'),'"')},h=na.cleanExtra(e,a);t="".concat(t||a.element[0].id||"Export",".csv"),na.save(d(h),t)}},ia=(Qi=b.equals,Ji=function(t,e){return t.reduce((function(t,n){var i,a=function(t,e){for(var n={},i=0,a=e.length;i<a;i++)n[e[i]]=t[e[i]];return n}(n,e);return i=a,t.some((function(t){return Qi(t,i)}))||t.push(a),t}),[])},Zi=function(t,e){var n=[];return t.map((function(t,i){for(var a in e)if(e[a]!==t[a])return;t.idx=i,n.push(t)})),n},(ta=function(t,e){return Ji(t,e).map((function(e){return{key:e,values:Zi(t,e).map((function(t){return t}))}}))}).register=function(t,e){return ta[t]=function(t,n,i){return this.extra=i,ta(t,n).map(e,this)}},ta);ia.register("none",(function(t){return $.extend({},t.key,{values:t.values})})),ia.register("sum",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{sum:t.values.reduce((function(t,n){return t+Number(n[e])}),0)})})),ia.register("max",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{max:t.values.reduce((function(t,n){return Math.max(t,Number(n[e]))}),Number.NEGATIVE_INFINITY)})})),ia.register("list",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{list:t.values.map((function(t){for(var n=[],i=0,a=e.list.length;i<a;i++)t[e.list[i]]&&(!e.exclude||!t[e.exclude])&&n.push({value:t[e.list[i]],key:e.list[i]});return n}))})}));var aa={aggregate:function(t,e){for(var n={},i=this,a=0,s=e.length;a<s;a++)e[a].aggregator&&function(){var s=e[a].field;i.sum=function(t,e){if(e._isFilteredOut)return t;var n;n=s.indexOf(".")>-1?s.split(".").reduce((function(t,e){return t?t[e]:""}),e):e[s],n=Number(n);var i=T.decimalPlaces(n),a=T.decimalPlaces(t);return Number((t+n).toFixed(Math.max(i,a)))};var r=t.reduce(i[e[a].aggregator],0);if(s.indexOf(".")>-1)for(var o=n,l=0,c=s.split(".").length;l<c;l++)l===s.split(".").length-1?o[s.split(".")[l]]=r:(s.split(".")[l]in o||(o[s.split(".")[l]]={}),o=o[s.split(".")[l]]);else n[s]=r}();return n}},sa={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"normal",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,twoLineHeader:!1,clickToSelect:!0,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:D?D.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"},searchExpandableRow:!0,allowChildExpandOnMatch:!1};function ra(t,e){this.settings=b.mergeSettings(t,e,sa),this.element=$(t),e.dataset&&(this.settings.dataset=e.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=sa.frozenColumns.expandRowAcrossAllCells),this.init()}ra.prototype={get pagerAPI(){var t;return this.tableBody&&this.tableBody.length&&(t=this.tableBody.data("pager")),t},get pager(){return M("pagerAPI","pager"),this.pagerAPI},init:function(){var t=$("html");this.isTouch=u.features.touch,this.isSafari=t.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.isInModal=!1,this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerBar])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(t){var e=this.settings;if(t&&e.columns&&(!e.columns||e.columns.length)){for(var n={index:-1},i=0,a=e.columns.length;i<a;i++)e.columns[i].id===t&&(n.index=i);n.index>-1&&e.columns.splice(n.index,1)}},setInlineActionableMode:function(){var t=this.settings;if(t.columns&&(!t.columns||t.columns.length)){for(var e={index:-1},n=0,i=t.columns.length;n<i;n++)t.columns[n].inlineEditor&&(e.index=n);this.inlineMode=e.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(t,e){if(e||(e={}),t&&(e.type="filterrow"),this.settings.source)return e.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(e);this.loadData(this.settings.dataset,e)},firstRender:function(){this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scroll-x'.concat(this.hasRightPane?"":" scroll-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scroll-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),"normal"!==this.settings.rowHeight&&(this.hasLeftPane&&this.tableLeft.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.table.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.element.addClass("".concat(this.settings.rowHeight,"-rowheight"))),this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},addRow:function(t,e){var n,i=this,a=this,s=!1,r=0;e&&"top"!==e||(e="top",s=!0);var o={icon:"new",text:D.translate("New"),tooltip:D.translate("New")};(t=t||{}).rowStatus=t.rowStatus||o,this.saveDirtyRows();var l=this.settings.dataset;if(this.settings.groupable){l=this.originalDataset||l;var c=-1;if("string"==typeof e){var d=this.settings.groupable.fields[0],h=function(t,e,n,i){for(var a=0,s=t.length;a<s;a++){var r=i?s-1-a:a;if(t[r][e]===n)return r}return-1}(l,d,t[d],!s);l.splice(c=h>-1?s?h:h+1:0,0,t),r=c}else l.splice(e,0,t),r=e}else"string"==typeof e?(l[s?"unshift":"push"](t),r=s?r:l.length-1):(l.splice(e,0,t),r=e);this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(e),this._selectedRows.forEach((function(t){void 0!==t.pagingIdx&&t.pagingIdx>=r&&(t.idx++,t.pagingIdx++)})),this.clearCache(),this.renderRows(),this.settings.groupable&&(n=this.dataRowNode(r),r=this.visualRowIndex(n)),this.syncSelectedUI(),setTimeout((function(){a.setActiveCell(r,0),i.settings.groupable||(n=i.visualRowNode(r)),a.element.triggerHandler("addrow",{row:r,cell:0,target:n,value:t,oldValue:{}})}),100)},pagerRefresh:function(t,e){if(this.pagerAPI){var n={};"string"==typeof t?n.activePage="top"===t?1:this.pagerAPI.state.pages:"number"==typeof t&&(n.activePage=Math.floor(t/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(n.total=this.settings.dataset.length,n.pagesize=this.settings.pagesize),e&&(n.activePage=this.settings.pagesize*this.pagerAPI.activePage>this.settings.dataset.length?1:this.pagerAPI.activePage),this.renderPager(n,!0)}},removeRow:function(t,e,n){var i=this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')),a=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,s=a[t];this.saveDirtyRows(),this.unselectRow(t,e),a.splice(t,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,e||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(e){return e.row!==t})),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var r={row:t,cell:null,target:i,item:s,oldValue:s};return n?r:(this.element.trigger("rowremove",r),!0)},removeSelected:function(t){this._selectedRows.sort((function(t,e){return t.idx<e.idx?-1:t.idx>e.idx?1:0}));for(var e=[],n=this._selectedRows.length-1;n>=0;n--)e.push({row:this._selectedRows[n].idx,item:this._selectedRows[n],cell:null,target:null}),this.removeRow(this._selectedRows[n].idx,n>0,t);t&&this.element.trigger("rowremove",e)},updateDataset:function(t,e){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var n=this.element.parent().find(".toolbar").find(".searchfield");n.val(""),n.parent().removeClass("has-text"),this.clearFilter()}this.loadData(t,e)},triggerSource:function(t,e,n){if(this.settings.source){var i=this,a={};this.pagerAPI&&(a=this.pagerAPI.state),"string"==typeof t?(a.type=t,a.trigger=n):t&&(a=b.extend({},a,t)),e&&"function"!=typeof e&&"string"==typeof e.type&&(a.type=e.type),!1!==this.element.triggerHandler("beforepaging",a)&&(this.sortColumn&&this.sortColumn.sortId&&(a.sortAsc=this.sortColumn.sortAsc,a.sortField=this.sortColumn.sortField,a.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(a.filterExpr=this.filterExpr),this.element.trigger("paging",a),this.settings.source(a,(function(t,n){n.activePage>-1&&(i.activePage=n.activePage),n.grandTotal&&(i.grandTotal=n.grandTotal),i.loadData(t,n),e&&"function"==typeof e&&e(!0),i.element.trigger("afterpaging",a),i.afterPaging(a)})))}},afterPaging:function(t){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(t)?this.element.removeClass("paginated"):this.element.addClass("paginated"),t.total&&(this.recordCount=t.total,this.displayCounts(t.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(t,e){this.settings.dataset=t,e||(e={}),"filterrow"===e.type&&(e.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,e.pagesize=this.settings.pagesize,e.total=e.total||-1,e.type="filterrow"),e.activePage||(e.activePage=1,e.pagesize=this.settings.pagesize,e.total=-1,this.settings.treeGrid&&(e.preserveSelected=!0)),this.grandTotal=this.settings.source&&e.grandTotal?e.grandTotal:null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(e.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),e.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||this.unSelectAllRows(),e.preserveSelected||"initial"!==e.type&&e.type||this.unSelectAllRows(),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===e.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(e,!0),this.displayCounts()},uniqueId:function(t){return t=null==t?"":t,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(t):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(t)).replace(/--/g,"-")},visibleColumns:function(t){for(var e=[],n=0;n<this.settings.columns.length;n++){var i=this.settings.columns[n];i.hidden||t&&"selectionCheckbox"===i.id||e.push(i)}return e},getColumnGroup:function(t){for(var e=0,n=this.settings.columnGroups,i=0;i<n.length;i++)if(!n[i].hidden&&(e+=n[i].colspan)>=t)return this.uniqueId("-header-group-".concat(i));return""},updateColumnGroup:function(){var t,e=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=b.deepCopy(e)),this.settings.groupable)for(var n=this.tableBody.find(".datagrid-rowgroup-header"),i=this.visibleColumns().length,a=0;a<n.length;a++)n[a].children[0].setAttribute("colspan",i);else if(e&&this.colGroups){var s,r=[].slice.call(this.colGroups[0].querySelectorAll("th")),o=this.settings.columns,l=o.length,c=this.visibleColumns().length,d=e.map((function(t){return parseInt(t.colspan,10)})),h=function(){return d.reduce((function(t,e){return t+e}),0)};if(h()>l)for(var u=!0,p=d.length-1;p>=0&&u;p--)void 0,t=h(),d[p]>=(s=t>l?t-l:l-t)?(d[p]-=s,u=!1):d[p]=0;var f=0,g=0;d.forEach((function(t,n){for(var i=t,a=f+t;f<a;f++)f<l&&o[f].hidden&&i--;i>0&&(g+=i);var s=r[n];s.setAttribute("colspan",i>0?i:1),e[n].hidden||i<1?s.classList.add("hidden"):s.classList.remove("hidden")})),g<c&&r[r.length-1].setAttribute("colspan",(s=c-g)>0?s:1)}},updateGroupHeadersAfterColumnReorder:function(t,e){var n=this.settings.columnGroups;if(n){this.originalColGroups||(this.originalColGroups=b.deepCopy(n));var i=n.map((function(t){return parseInt(t.colspan,10)})),a={from:null,to:null,total:0};i.forEach((function(n,i){a.total+=n,a.total>t&&null===a.from&&(a.from=i),a.total>e&&null===a.to&&(a.to=i)})),a.from!==a.to&&(n[a.from].colspan-=1,n[a.to].colspan+=1)}},headerText:function(t){var e=t.name?t.name:"";return e||"drilldown"!==t.id?e:(e=D.translate("Drilldown"),'<span class="audible">'.concat(e,"</span>"))},getContainer:function(t){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(t)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(t)>-1?"right":"center"},renderHeader:function(){var t,e,n=this,i={left:"",center:"",right:""},a=this.settings.columnGroups;if(a){this.element.addClass("has-group-headers");var s,r=this.settings.columns,o=r.length,c=this.visibleColumns().length,d=a.map((function(t){return parseInt(t.colspan,10)})),h=function(){return d.reduce((function(t,e){return t+e}),0)};if(i.left+='<tr role="row" class="datagrid-header-groups">',i.center+='<tr role="row" class="datagrid-header-groups">',i.right+='<tr role="row" class="datagrid-header-groups">',h()>o)for(var u=!0,p=d.length-1;p>=0&&u;p--)void 0,e=h(),d[p]>=(s=e>o?e-o:o-e)?(d[p]-=s,u=!1):d[p]=0;var f=0,g=0;if(d.forEach((function(e,s){for(var l=e,c=f+e;f<c;f++)f<o&&r[f].hidden&&l--;var d=a[s].hidden||l<1?' class="hidden"':"",h=' colspan="'.concat(l>0?l:1,'"'),u=a[s].align?"l-".concat(a[s].align,"-text"):"";t=n.uniqueId("-header-group-".concat(s)),l>0&&(g+=l);var p=n.getContainer(n.settings.columns[s].id);i[p]+="<th".concat(d).concat(h,' id="').concat(t,'" class="').concat(u,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(a[s].name,"</span></div></th>")})),g<c){var m=' colspan="'.concat((s=c-g)>0?s:1,'"');n.hasRightPane?i.right+="<th".concat(m,"></th>"):i.center+="<th".concat(m,"></th>")}i.left+="</tr><tr>",i.center+="</tr><tr>",i.right+="</tr><tr>"}else i.left+='<tr role="row">',i.center+='<tr role="row">',i.right+='<tr role="row">';for(var v=0;v<this.settings.columns.length;v++){var b=n.settings.columns[v],y=n.getContainer(b.id),w=n.uniqueId("-header-".concat(v)),x=void 0===b.sortable||b.sortable,C=void 0===b.resizable||b.resizable,k=void 0===b.exportable||b.exportable,T="selectionCheckbox"===b.id,S=this.getHeaderAlignmentClass(b);(n.hasLeftPane||n.hasRightPane)&&(n.settings.frozenColumns.left&&n.settings.frozenColumns.left.indexOf(b.id)>-1||n.settings.frozenColumns.right&&n.settings.frozenColumns.right.indexOf(b.id)>-1)&&(b.hideable=!1),void 0===b.hideable&&(b.hideable=!0);var A="";A+=x?" is-sortable":"",A+=C?" is-resizable":"",A+=b.hidden?" is-hidden":"",A+=b.filterType?" is-filterable":"",A+="ellipsis"===b.textOverflow?" text-ellipsis":"",A=""!==(A+=""!==S?S:"")?' class="'.concat(A.substr(1),'"'):"",i[y]+='<th scope="col" role="columnheader" id="'.concat(w,'" data-column-id="').concat(b.id,'"').concat(b.field?' data-field="'.concat(b.field,'"'):"").concat(b.headerTooltip?' title="'.concat(b.headerTooltip,'"'):"").concat(!1===b.reorderable?' data-reorder="false"':"").concat(a?' headers="'.concat(n.getColumnGroup(v),'"'):"",' data-exportable="').concat(k?"yes":"no",'"').concat(A,">");var E="";x&&(E="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>")),i[y]+='<div class="'.concat(T?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(S,'">\n      <span class="datagrid-header-text').concat(b.required?" required":"",'">').concat(n.headerText(this.settings.columns[v])).concat(" l-center-text"===S?E:"","</span>"),T&&(i[y]+=n.settings.showSelectAllCheckBox?'<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox"></span>':'<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none"></span>'),x&&" l-center-text"!==S&&(i[y]+=E),i[y]+="</div>".concat(n.filterRowHtml(b,v),"</th>")}i.left+="</tr>",i.center+="</tr>",i.right+="</tr>",void 0===n.headerRow?(n.hasLeftPane&&(n.headerRowLeft=$('<thead class="datagrid-header left">'.concat(i.left,"</thead>")),n.tableLeft.find("colgroup").after(n.headerRowLeft)),n.headerRow=$('<thead class="datagrid-header center">'.concat(i.center,"</thead>")),n.table.find("colgroup").after(n.headerRow),n.hasRightPane&&(n.headerRowRight=$('<thead class="datagrid-header right">'.concat(i.right,"</thead>")),n.tableRight.find("colgroup").after(n.headerRowRight))):(n.hasLeftPane&&l.html(n.headerRowLeft,i.left,"*"),l.html(n.headerRow,i.center,"*"),n.hasRightPane&&l.html(n.headerRowRight,i.right,"*")),a&&n.headerRow&&(n.colGroups=n.headerRow.find(".datagrid-header-groups")),n.syncHeaderCheckbox(this.settings.dataset),n.setScrollClass(),n.attachFilterRowEvents(),n.settings.columnReorder&&n.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(t){return void 0===t.headerAlign?t.align?" l-".concat(t.align,"-text"):"":" l-".concat(t.headerAlign,"-text")},filterSetDatepicker:function(t,e,n){var i=t.data("datepicker"),a=t.data("is-range");n=n||{};var s=function(){i&&"function"==typeof i.destroy&&i.destroy(),t.datepicker(n)};i&&a||"in-range"!==e?i&&!a||"in-range"===e||(n.range={useRange:!1},t.removeData("is-range"),s()):(t.data("is-range",!0),n.range={useRange:!0},s())},filterRowHtml:function(t,e){var n="",i=this.getHeaderAlignmentClass(t);if(t.filterType){var a=t,s=this.uniqueId("-header-filter-".concat(e)),r=Array.isArray(a.filterRowEditorOptions)?a.filterRowEditorOptions:a.options,o="";if("select"===a.filterType&&r){for(var l=!1,c=0,d=r.length;c<d;c++)if(!r[c].label){l=!0;break}l||(o="<option></option>")}switch(n='<div class="datagrid-filter-wrapper'.concat(i,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(a),'<label class="audible" for="').concat(s,'">').concat(a.name,"</label>"),a.filterType){case"checkbox":break;case"date":n+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="datepicker" id="').concat(s,'"/>');break;case"integer":a.maskOptions=b.extend(!0,{},{patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:D.currentLocale.data.numbers?D.currentLocale.data.numbers.group:",",decimal:D.currentLocale.data.numbers?D.currentLocale.data.numbers.decimal:".",negative:D.currentLocale.data.numbers?D.currentLocale.data.numbers.minusSign:"-"}},process:"number"},a.maskOptions),n+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(s,'" />');break;case"percent":case"decimal":var h={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:D.currentLocale.data.numbers?D.currentLocale.data.numbers.group:",",decimal:D.currentLocale.data.numbers?D.currentLocale.data.numbers.decimal:".",negative:D.currentLocale.data.numbers?D.currentLocale.data.numbers.minusSign:"-"}},process:"number"};a.maskOptions=a.numberFormat?b.extend(!0,{},{patternOptions:{decimalLimit:a.numberFormat.maximumFractionDigits}},h,a.maskOptions):b.extend(!0,{},h,a.maskOptions),n+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(s,'" />');break;case"contents":case"select":if(n+='<select id="'.concat(s,'" ').concat("select"===a.filterType?'class="dropdown"':'multiple class="multiselect"').concat(a.filterDisabled?" disabled":"",">").concat(o),r)for(var u=0,p=r.length;u<p;u++){var f=r[u],g=a.caseInsensitive&&"string"==typeof f.value?f.value.toLowerCase():f.value;f&&""!==g&&(n+='<option value = "'.concat(g,'">').concat(f.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(n+='<select id="'.concat(s,'" class="multiselect" multiple').concat(a.filterDisabled?" disabled":"",">"),r)for(var m=0,v=r.length;m<v;m++){var y=r[m],w=a.caseInsensitive&&"string"==typeof y.value?y.value.toLowerCase():y.value;y&&"string"==typeof y.label&&(n+='<option value = "'.concat(w,'">').concat(y.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":n+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="timepicker" id="').concat(s,'"/>');break;case"lookup":n+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="lookup" id="').concat(s,'" >');break;default:n+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(s,'"/>')}n+="</div>"}return t.filterType||(n='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(i),'"></div>')),n},attachFilterRowEvents:function(){var t,e=this,n=this;this.settings.filterable&&(this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",(function(){var t=$(this),e=t.data("popupmenu");return e?e.close(!0,!0):t.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",(function(){var e=t.next(".popupmenu-wrapper");b.fixSVGIcons(e),n.hideTooltip()})).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",(function(){var e=t.closest('th[role="columnheader"]'),i=n.columnById(e.attr("data-column-id"))[0];if(i&&"date"===i.filterType){var a=e.find("input"),s=e.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");n.filterSetDatepicker(a,s,i.editorOptions)}n.applyFilter(null,"selected")})).off("close.datagrid-filter").on("close.datagrid-filter",(function(){var t=$(this).data("popupmenu");t&&t.destroy()})),!1})),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",(function(e){return clearTimeout(t),e.stopPropagation(),13!==e.which||(n.applyFilter(null,"enter"),e.preventDefault(),e.stopPropagation(),!1)})),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",(function(i){13!==i.which&&(e.activeCell&&e.activeCell.isFocused&&(e.activeCell.isFocused=!1),clearTimeout(t),t=setTimeout((function(){n.applyFilter(null,"keyup")}),400))})),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each((function(){var t=n.columnById($(this).attr("data-column-id"))[0],e=$(this);if(!t)return!0;e.find("select.dropdown").each((function(){var i=$(this);i.dropdown(t.editorOptions).on("selected.datagrid",(function(){n.applyFilter(null,"selected")})).on("listopened.datagrid",(function(){var t=i.data("dropdown");t&&(n.isInViewport(t.list[0])||n.adjustPosLeft(t.list[0]))})),i.data("dropdown").settings.sourceArguments={column:t,container:e,grid:n,cell:t,event:void 0,row:-1,rowData:{},value:void 0}})),e.find("select.multiselect").each((function(){var i=this,a=$(this);a.multiselect(t.editorOptions).on("selected.datagrid",(function(){var t=$(i);$("#".concat(t.attr("id"))).val(t.val()),n.applyFilter(null,"selected")})),a.data("dropdown").settings.sourceArguments={column:t,container:e,grid:n,cell:t,event:void 0,row:-1,rowData:{},value:void 0}})),t.maskOptions&&e.find("input").mask(t.maskOptions),t.mask&&e.find("input").mask(t.mask);var i=e.find(".datepicker");i.length&&"function"==typeof $().datepicker&&i.datepicker(t.editorOptions||{dateFormat:t.dateFormat}).on("listclosed.datepicker",(function(){n.applyFilter(null,"selected")}));var a=e.find(".lookup");a.length&&"function"==typeof $().lookup&&(t.editorOptions&&(t.editorOptions.clickArguments?t.editorOptions.clickArguments.grid=n:t.editorOptions.clickArguments={grid:n}),a.lookup(t.editorOptions||{}).on("change",(function(){n.applyFilter(null,"selected")})));var s=e.find(".timepicker");return s.length&&"function"==typeof $().timepicker&&s.timepicker(t.editorOptions||{timeFormat:t.timeFormat}),t.mask&&e.find("input").mask({pattern:t.mask,mode:t.maskMode}),null})),n.filterRowRendered=!0)},filterItemHtml:function(t,e,n){var i=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(t)});return'<li class="'.concat(t," ").concat(n?" is-checked":"",'"><a href="#">').concat(i,"<span>").concat(D.translate(e),"</span></a></li>")},filterButtonHtml:function(t){if(!t.filterType)return"";var e=this,n=t.filterDisabled,i=$.isArray(t.filterConditions)?t.filterConditions:[],a=function(t,n,a){var s,r=!(!i.length||i[0]!==t)||a;return!i.length||(s=s||i,$.inArray(t,s)>-1)?e.filterItemHtml(t,n,r):""},s=function(t){return'<button type="button" class="btn-menu btn-filter" data-init="false" '.concat(n?" disabled":"").concat(t?' data-default="'.concat(t,'"'):"",' type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},r="",o="";return"contents"===t.filterType||"select"===t.filterType||"multiselect"===t.filterType?"":("text"===t.filterType&&(r=(r=s(o=i.length?i[0]:"contains")+a("contains","Contains",!0)+a("does-not-contain","DoesNotContain")+a("equals","Equals")+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")).replace("{{icon}}",o)),"checkbox"===t.filterType&&(r=(r+=s(o=i.length?i[0]:"selected-notselected")+a("selected-notselected","All",!0)+a("selected","Selected")+a("not-selected","NotSelected")).replace("{{icon}}",o)),"checkbox"!==t.filterType&&"text"!==t.filterType&&(r=(r+=s(o=i.length?i[0]:"equals")+a("equals","Equals","lookup"===t.filterType||"integer"===t.filterType||"decimal"===t.filterType||"date"===t.filterType||"time"===t.filterType)+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")).replace("{{icon}}",o)),"date"===t.filterType&&(r+=a("in-range","InRange")),/\b(integer|decimal|date|time|percent)\b/g.test(t.filterType)&&(r=(r+="".concat(a("less-than","LessThan")).concat(a("less-equals","LessOrEquals")).concat(a("greater-than","GreaterThan")).concat(a("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"text"===t.filterType&&(r=(r+="".concat(a("end-with","EndsWith")).concat(a("does-not-end-with","DoesNotEndWith")).concat(a("start-with","StartsWith")).concat(a("does-not-start-with","DoesNotStartWith"))).replace("{{icon}}","end-with")),"lookup"===t.filterType&&(r=(r=s(o=i.length?i[0]:"contains")+a("contains","Contains",!0)+a("does-not-contain","DoesNotContain")+a("equals","Equals")+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")+a("end-with","EndsWith")+a("does-not-end-with","DoesNotEndWith")+a("start-with","StartsWith")+a("does-not-start-with","DoesNotStartWith")+a("less-than","LessThan")+a("less-equals","LessOrEquals")+a("greater-than","GreaterThan")+a("greater-equals","GreaterOrEquals")).replace("{{icon}}",o)),r+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(t,e){var i=this,a=!1;t?this.setFilterConditions(t):t=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(t)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=t,a=!0);var s,r,o,l,c,d,h=function(e){for(var a=!0,s=function(n){var s=i.columnById(t[n].columnId)[0],r=e&&void 0!==e[s.field]?e[s.field]:i.fieldValue(e,s.field),o=null==r?"":r.toString().toLowerCase(),l=t[n].value.toString().toLowerCase(),c=null,d=null,h=null;if("percent"===s.filterType&&(l=(l/100).toString(),"decimal"==="".concat(s.name).toLowerCase()?(r=Ki.Decimal(!1,!1,r,s),l=Ki.Decimal(!1,!1,l,s)):"integer"==="".concat(s.name).toLowerCase()&&(r=Ki.Integer(!1,!1,r,s),l=Ki.Integer(!1,!1,l,s))),"text"===s.filterType&&(o=null==(r=(r=i.formatValue(s.formatter,n,t[n].columnId,r,s,e,i)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":r.toString().toLowerCase()),"contents"!==s.filterType&&"select"!==s.filterType&&"multiselect"!==s.filterType||(r=null==r?"":r.toString().toLowerCase()),"number"!=typeof r&&(isNaN(r)||""===r||t[n].value instanceof Array)||/^(date|time|text)$/.test(s.filterType)||(r=null===r?r:parseFloat(r),l=D.parseNumber(l)),"date"===s.filterType||"time"===s.filterType){"string"==typeof r&&(r=s.formatter(!1,!1,r,s,!0));var u=function(e,i){return(i=D.parseDate(i,t[n].format))&&("time"===s.filterType&&(i.setDate(1),i.setMonth(0),i.setYear(0)),i=i.getTime()),e instanceof Date?(e=new Date(e.getTime()),"time"===s.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):s.editorOptions&&s.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()):"string"==typeof e&&e&&(e=D.parseDate(e,s.sourceFormat?"string"==typeof s.sourceFormat?{pattern:s.sourceFormat}:s.sourceFormat:{pattern:t[n].format}))&&("time"===s.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):s.editorOptions&&s.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()),{rValue:e,cValue:i}},p=null;if("in-range"===t[n].operator){var f=i.settings.columns.indexOf(s),g=i.element.find(".datagrid-header th:eq(".concat(f,") .datagrid-filter-wrapper input")).data("datepicker");g&&(d=g.settings.range.separator,(c=g.settings.range.data)&&c.start?p=u(r,c.start):d&&l.indexOf(d)>-1&&(p=u(r,(h=l.split(d))[0])))}else p=u(r,t[n].value);r=p?p.rValue:r,l=p?p.cValue:l}switch(t[n].operator){case"equals":if(t[n].value instanceof Array){a=!1;for(var m=0;m<t[n].value.length;m++)t[n].value[m].toLowerCase()===r&&(""!==r.toString()||""===t[n].value[m])&&(a=!0)}else a=r===l&&""!==r;break;case"does-not-equal":a=r!==l;break;case"contains":a=o.indexOf(l)>-1&&""!==r.toString();break;case"does-not-contain":a=-1===o.indexOf(l);break;case"end-with":a=o.lastIndexOf(l)===o.length-l.toString().length&&""!==o&&o.length>=l.toString().length;break;case"start-with":a=0===o.indexOf(l)&&""!==o;break;case"does-not-end-with":a=!(a=o.lastIndexOf(l)===o.length-l.toString().length&&""!==o&&o.length>=l.toString().length);break;case"does-not-start-with":a=!(0===o.indexOf(l)&&""!==o);break;case"is-empty":a=""===o;break;case"is-not-empty":if(""===r){a=""!==r;break}a=!(null===r);break;case"in-range":if(a=!1,c&&c.startDate&&c.endDate){var v=c.startDate.getTime(),b=c.endDate.getTime();a=r>=v&&r<=b&&null!==r}else if(h){var y=D.parseDate(h[0],t[n].format),w=D.parseDate(h[1],t[n].format);y&&w&&(y=y.getTime(),w=w.getTime(),a=r>=y&&r<=w&&null!==r)}break;case"less-than":a=r<l&&""!==r&&null!==r;break;case"less-equals":a=r<=l&&""!==r&&null!==r;break;case"greater-than":a=r>l&&""!==r&&null!==r;break;case"greater-equals":a=r>=l&&""!==r&&null!==r;break;case"selected":if(s&&s.isChecked){a=s.isChecked(r);break}a=("1"===o||"true"===o||!0===r||1===r)&&""!==o;break;case"not-selected":if(s&&s.isChecked){a=!s.isChecked(r);break}a="0"===o||"false"===o||!1===r||0===r||""===o;break;case"selected-notselected":a=!0}if(!a)return{v:!1}},r=0;r<t.length;r++){var o=s(r);if("object"===n(o))return o.v}return a};if(!this.settings.disableClientFilter)if(this.settings.treeGrid){var u=function t(e,n){for(var i=0;i<e.length;i++){var a=e[i];r&&(r=!h(a)),a._isFilteredOut=!h(a),n&&!a._isFilteredOut&&(n._isFilteredOut=!1),a.children&&a.children.length&&t(a.children,a)}};for(o=0,c=(s=this.settings.dataset).length;o<c;o++)r=!h(s[o]),s[o].children&&s[o].children.length&&u(s[o].children),s[o]._isFilteredOut=r}else if(this.settings.groupable)for(o=0,c=this.settings.dataset.length;o<c;o++){var p=!0;for(l=0,d=this.settings.dataset[o].values.length;l<d;l++)r=!h(this.settings.dataset[o].values[l]),this.settings.dataset[o].values[l]._isFilteredOut=r,r||(p=!1);this.settings.dataset[o]._isFilteredOut=p}else for(o=0,c=this.settings.dataset.length;o<c;o++)r=!h(this.settings.dataset[o]),this.settings.dataset[o]._isFilteredOut=r;this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),a&&this.setSearchActivePage({trigger:e,type:"filtered"}),this.settings.disableClientFilter&&"restore"===e||(this.element.trigger("filtered",{op:"apply",conditions:t,trigger:e}),this.saveUserSettings())},adjustPosLeft:function(t){var e=t.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth;e.left<0&&e.right<=n?t.style.left="".concat(20,"px"):e.left>=0&&!(e.right<=n)&&(t.style.left="".concat(n-e.width-20,"px"))},isInViewport:function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},setChildExpandOnMatch:function(){var t=this.settings;t.treeGrid&&function e(n,i){for(var a=0,s=n.length;a<s;a++){var r=n[a],o=r.children,l=o?o.length:0;if(l){if(!r._isFilteredOut)if(t.allowChildExpandOnMatch)for(var c=0;c<l;c++)o[c]._isFilteredOut=!1;else{for(var d=!0,h=0;h<l;h++)o[h]._isFilteredOut||(d=!1);r.isAllChildrenFiltered=d}e(o)}}}(t.dataset)},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each((function(){var t=$(this);t.val(""),t.is("select")&&t.find("option").each((function(){$(this).prop("selected",!1)})),t.trigger("updated")})),this.element.find(".datagrid-header .btn-filter").each((function(){var t=$(this),e=t.next(),n=e.find("li:first");t.find("svg:first > use").attr("href","#icon-filter-".concat(t.attr("data-default"))),e.find(".is-checked").removeClass("is-checked"),n.addClass("is-checked")})))},setFilterConditions:function(t){this.clearFilterFields();for(var e=0;e<t.length;e++){var n=this.element.find('.datagrid-header th[data-column-id="'.concat(t[e].columnId,'"]')),i=n.find("input, select"),a=n.find(".btn-filter"),s=a.next();if(void 0===t[e].value&&(t[e].value=""),i.val(t[e].value),i.is("select")){var r=t[e].value instanceof Array?t[e].value[0]:t[e].value;if(t[e].innerHTML&&(i[0].innerHTML=t[e].innerHTML),i.find('option[value="'.concat(r,'"]')).length)if(t[e].value instanceof Array&&!t[e].selectedOptions){var o=i[0].querySelectorAll("option");i.val("");for(var l=0;l<o.length;l++)o[l].selected=!1;for(var c=0;c<t[e].value.length;c++)i.find('option[value="'.concat(t[e].value[c],'"]')).prop("selected",!0)}else i.find('option[value="'.concat(t[e].value,'"]')).prop("selected",!0);else{var d=i.data("dropdown");d&&d.setCode(t[e].value)}i.trigger("updated")}a.find("svg:first > use").attr("href","#icon-filter-".concat(t[e].operator)),s.find(".is-checked").removeClass("is-checked"),s.find(".".concat(t[e].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var t=[],e=this;return this.element.find("th.is-filterable").each((function(){var n,i=$(this),a=i.find(".btn-filter"),s=i.find("input, select"),r=s.is("select"),o=a.find(".icon-dropdown:first"),l=null;if((a.length||r)&&"selected-notselected"!==(n=r?"equals":o.getIconName().replace("filter-",""))&&!(""===s.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(n)||s.val()instanceof Array&&0===s.val().length)){var c=s.val()?s.val():"";s.attr("data-mask-mode")&&"number"===s.attr("data-mask-mode")&&(c=D.parseNumber(c));var d={columnId:i.attr("data-column-id"),operator:n,value:c};s.data("datepicker")&&(l=s.data("datepicker").pattern,d.format=l),s.data("timepicker")&&(l=s.data("timepicker").settings.timeFormat,d.format=l),s.is("select")&&(d.innerHTML=s[0].innerHTML);var h=e.columnById(d.columnId);h&&h[0]&&(d.filterType=h[0].filterType),t.push(d)}})),t},getExtraTop:function(){var t=this.settings,e={default:{short:0,medium:0,normal:0},filterable:{short:0,medium:0,normal:0},group:{short:-25,medium:-30,normal:-39},groupFilterable:{short:-29,medium:-30,normal:-41}};return t.columnGroups?t.filterable?e.groupFilterable[t.rowHeight]:e.group[t.rowHeight]:t.filterable?e.filterable[t.rowHeight]:e.default[t.rowHeight]},getTargetHeight:function(){var t=this.settings,e={default:{short:20,medium:28,normal:35},filterable:{short:53,medium:54,normal:60},group:{short:46,medium:56,normal:74},groupFilterable:{short:83,medium:87,normal:103}};return t.columnGroups?t.filterable&&this.filterRowRendered?e.groupFilterable[t.rowHeight]:e.group[t.rowHeight]:t.filterable&&this.filterRowRendered?e.filterable[t.rowHeight]:e.default[t.rowHeight]},createDraggableColumns:function(){var t=this,e=t.headerNodes().not('[data-column-id="selectionCheckbox"]'),n=$(".drag-target-arrows",t.element);n.length||(t.element.prepend('<span class="drag-target-arrows" style="height: '.concat(t.getTargetHeight(),'px;"></span>')),n=$(".drag-target-arrows",t.element)),e.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),e.prepend('<span class="is-draggable-target"></span>'),e.last().append('<span class="is-draggable-target last"></span>'),t.element.addClass("has-draggable-columns"),$(".handle",e).each((function(){var i=null,a=null,s=null,r=0,o=$(this),l=o.parent();o.on("mousedown.datagrid",(function(o){o.preventDefault(),l.drag({clone:!0,cloneAppendTo:e.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",(function(e,n,c){(i=c).removeAttr("id").addClass("is-dragging-clone").css({left:D.isRTL()?n.right-i.width():n.left,top:n.top,height:l.height(),border:0}),$(".is-draggable-target",i).remove(),t.setDraggableColumnTargets(),r=t.getExtraTop(),a=l.position(),s={top:n.top-a.top,left:n.left-a.left};var d=t.targetColumn(a);t.draggableStatus.startIndex=d,o.stopImmediatePropagation()})).on("drag.datagrid",(function(l,c){i[0].style.left="".concat(parseInt(D.isRTL()?c.left+c.offset.x-c.clone.width():c.left,10),"px"),i[0].style.top="".concat(parseInt(c.top,10),"px"),a={top:c.top-s.top,left:c.left-s.left},D.isRTL()&&(a.left=parseInt(i[0].style.left,10));var d=0,h=null,u=null,p=t.targetColumn(a);if($(".is-draggable-target",e).add(n).removeClass("is-over"),-1!==p)for(var f=0,g=t.draggableColumnTargets.length;f<g;f++)d=f+1,(h=t.draggableColumnTargets[f]).index===p&&h.index!==t.draggableStatus.startIndex&&(h.index>t.draggableStatus.startIndex&&d<g&&(h=t.draggableColumnTargets[d]),h.el.addClass("is-over"),n.addClass("is-over"),u=h.el[0].getBoundingClientRect(),n[0].style.left="".concat(parseInt(u.left+(D.isRTL()?2:0),10),"px"),n[0].style.top="".concat(parseInt(u.top,10)+1+r,"px"));o.stopImmediatePropagation()})).on("dragend.datagrid",(function(r,o){D.isRTL()||(i[0].style.left="".concat(parseInt(o.left,10),"px"),i[0].style.top="".concat(parseInt(o.top,10),"px")),a={top:o.top-s.top,left:o.left-s.left},D.isRTL()&&(a.left=parseInt(i[0].style.left,10));var c,d,h,u,p=t.targetColumn(a),f=l.data("drag"),g=[];if(f&&f.destroy&&f.destroy(),t.draggableStatus.endIndex=p,$(".is-draggable-target",e).add(n).removeClass("is-over"),-1!==t.draggableStatus.endIndex&&t.draggableStatus.startIndex!==t.draggableStatus.endIndex){for(c=0,d=t.settings.columns.length;c<d;c++)t.settings.columns[c].hidden||"selectionCheckbox"===t.settings.columns[c].id||g.push(c);t.updateGroupHeadersAfterColumnReorder(h=g[t.draggableStatus.startIndex]||0,u=g[t.draggableStatus.endIndex]||0),t.arrayIndexMove(t.settings.columns,h,u),t.updateColumns(t.settings.columns)}}))}))}))},setDraggableColumnTargets:function(){var t,e,n=this,i=n.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]');n.draggableColumnTargets=[],n.draggableStatus={},$(".is-draggable-target.last",i.last()).length||i.last().append($(".is-draggable-target.last",n.headerNodes())),$(".is-draggable-target",i).each((function(a){var s=$(this).is(".last")?a-1:a;t=i.eq(s),e=t.position(),n.draggableColumnTargets.push({el:$(this),index:s,pos:e,width:t.outerWidth(),height:t.outerHeight(),dropArea:{x1:e.left-20,x2:e.left+t.outerWidth()+20,y1:e.top-20+n.getExtraTop(),y2:e.top+t.outerHeight()+20}})}))},targetColumn:function(t){var e,n,i,a=-1;for(n=0,i=this.draggableColumnTargets.length-1;n<i;n++)if(t.left>(e=this.draggableColumnTargets[n]).dropArea.x1&&t.left<e.dropArea.x2&&t.top>e.dropArea.y1&&t.top<e.dropArea.y2&&(a=e.index,D.isRTL()))return a;return a},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},createDraggableRows:function(){var t=this;this.settings.rowReorder&&(this.tableBody.children().filter((function(){return $(this).find(".datagrid-reorder-icon").length<1})).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",(function(e,n){t.isSafari&&n.start.css({display:"inline-block"})})).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",(function(e,n){t.isSafari&&n.end.css({display:""}),t.reorderRow(n.startIndex,n.endIndex,n)})))},reorderRow:function(t,e,n){var i=e>t,a=this.tableBody.find("tr").eq(t),s=this.tableBody.find("tr").eq(e),r=this.settings.dataset.splice(t,1)[0];this.settings.dataset.splice(e,0,r),!n&&i&&a.insertAfter(s),n||i||a.insertBefore(s),(this.settings.rowTemplate||this.settings.expandableRow)&&i&&(this.tableBody.find("tr").eq(2*t).insertAfter(n.end),n.end.next().next().insertAfter(n.over)),!this.settings.rowTemplate&&!this.settings.expandableRow||i||this.tableBody.find("tr").eq(2*t).next().insertAfter(n.end);for(var o=this.tableBody.find("tr:not(.datagrid-expandable-row)"),l=0;l<o.length;l++)o[l].setAttribute("data-index",l),o[l].setAttribute("aria-rowindex",l+1);this.element.trigger("rowreorder",[{endIndex:e,startIndex:t,over:s,start:a}]),this.syncSelectedRowsIdx()},fieldValue:function(t,e){if(!e||!t)return"";if(e.indexOf(".")>-1)return e.split(".").reduce((function(t,e){return t?t[e]:""}),t);var n=t[e];return o.escapeHTML(n||0===n||!1===n?n:"")},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter((function(t){return 1===t.depth})))},setTreeDepth:function(t){if(this.settings.treeGrid){var e=this,n=0,i=function t(i,a){n++,e.settings.treeDepth.push({idx:n,depth:a,node:i});for(var s=i.children||[],r=0,o=s.length;r<o;r++)t(s[r],a+1)};t=t||this.settings.dataset,e.settings.treeDepth=[];for(var a=0,s=t.length;a<s;a++)i(t[a],1)}},setRowGrouping:function(){var t=this.settings.groupable;t&&(this.originalDataset?this.settings.dataset=this.originalDataset:this.originalDataset=this.settings.dataset.slice(),this.settings.dataset=t.aggregator&&"none"!==t.aggregator?"sum"!==t.aggregator?"max"!==t.aggregator?"list"!==t.aggregator?ia(this.settings.dataset,t.fields):ia.list(this.settings.dataset,t.fields,t.aggregatorOptions):ia.max(this.settings.dataset,t.fields,t.aggregate):ia.sum(this.settings.dataset,t.fields,t.aggregate):ia.none(this.settings.dataset,t.fields))},renderRows:function(){var t="",e="",n="",i=0,a=this.settings,s=this.table.find("tbody"),r=1;if(this.pagerAPI){var o=this.pagerAPI.state;r=o.filteredActivePage?o.filteredActivePage:o.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),i=0;i<this.settings.columns.length;i++){var c=this.settings.columns[i],d=this.getContainer(c.id),h=this.columnWidth(c,i);switch(d){case"left":this.bodyColGroupHtmlLeft+="<col".concat(h).concat(c.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(h).concat(c.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(h).concat(c.hidden?' class="is-hidden"':"","></col>")}c.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===s.length&&(this.hasLeftPane&&(this.tableBodyLeft=$("<tbody></tbody>"),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$("<tbody></tbody>"),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$("<tbody></tbody>"),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,a.treeGrid&&a.paging&&!a.source&&r>1&&(this.recordCount=a.treeRootNodes[a.pagesize*r-a.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();for(var u=!1,p=0;p<a.dataset.length;p++){if(a.paging&&!a.source){if(1===r&&p-this.filteredCount>=a.pagesize){a.dataset[p]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(r>1&&!(p-this.filteredCount>=a.pagesize*(r-1)&&p-this.filteredCount<a.pagesize*r)){a.dataset[p]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!a.virtualized||this.isRowVisible(this.recordCount))if((!a.treeGrid&&a.dataset[p])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(a.dataset[p].values){for(var f=a.dataset[p].values.length,g=0,m=0;m<f;m++)a.dataset[p].values[m]._isFilteredOut&&g++;if(g===f)continue}if(!this.settings.groupable.suppressGroupRow){var v=this.rowHtml(a.dataset[p],this.recordCount,p,!0);this.hasLeftPane&&v.left&&(e+=v.left),v.center&&(t+=v.center),this.hasRightPane&&v.right&&(n+=v.right)}if(this.settings.groupable.showOnlyGroupRow&&a.dataset[p].values[0]){var b=a.dataset[p].values[0];a.dataset[p].list&&(b.list=a.dataset[p].list),b.values=a.dataset[p].values;var y=this.rowHtml(b,this.recordCount,p);this.hasLeftPane&&y.left&&(e+=y.left),y.center&&(t+=y.center),this.hasRightPane&&y.right&&(n+=y.right),this.recordCount++,this.groupArray.push({group:p,node:0});continue}for(var w=0;w<a.dataset[p].values.length;w++)if(!a.dataset[p].values[w]._isFilteredOut){var x=this.rowHtml(a.dataset[p].values[w],this.recordCount,a.dataset[p].values[w].idx);this.hasLeftPane&&x.left&&(e+=x.left),x.center&&(t+=x.center),this.hasRightPane&&x.right&&(n+=x.right),this.recordCount++,this.groupArray.push({group:p,node:w})}if(this.settings.groupable.groupFooterRow){var C=this.rowHtml(a.dataset[p],this.recordCount,p,!0,!0);this.hasLeftPane&&C.left&&(e+=C.left),C.center&&(t+=C.center),this.hasRightPane&&C.right&&(n+=C.right)}}else{var k=p;a.treeGrid&&(k=this.recordCount);var T=this.rowHtml(a.dataset[p],k,p);this.hasLeftPane&&T.left&&(e+=T.left),T.center&&(t+=T.center),this.hasRightPane&&T.right&&(n+=T.right),a.dataset[p]._isFilteredOut||this.recordCount++,this.visibleRowCount=k+1,a.dataset[p].rowStatus&&(u=!0)}else this.recordCount++}if(this.settings.summaryRow){var S=this.calculateTotals(),A=this.rowHtml(S,this.recordCount,null,!1,!0);this.hasLeftPane&&A.left&&(e+=A.left),A.center&&(t+=A.center),this.hasRightPane&&A.right&&(n+=A.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.headerRowLeft||this.tableBodyLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.headerRowRight||this.tableBodyRight).before(this.bodyColGroupRight))),this.hasLeftPane&&l.html(this.tableBodyLeft,e,"*"),l.html(this.tableBody,t,"*"),this.hasRightPane&&l.html(this.tableBodyRight,n,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(u),this.afterRender()},afterRender:function(){var t=this,e=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&e.tableBody.find("tr").each((function(t){var n,i=0,a=0,s=$(this);n=s.height(),e.tableBodyLeft&&(i=e.tableBodyLeft.find("tr").eq(t).height()),e.tableBodyRight&&(a=e.tableBodyLeft.find("tr").eq(t).height());var r=Math.max(i,n,a);return s.css("height",r),e.tableBodyLeft&&(i=e.tableBodyLeft.find("tr").eq(t).css("height",r)),e.tableBodyRight&&(a=e.tableBodyLeft.find("tr").eq(t).css("height",r)),!0})),this.settings.onPostRenderCell)for(var n=function(t){var n=e.settings.columns[t];n.component&&e.tableBody.find("tr").each((function(){var t=$(this),i=e.settings.treeGrid?e.actualPagingRowIndex(e.actualRowIndex(t)):e.dataRowIndex(t),a=t.attr("data-lineage"),s=e.rowData(i),r=e.columnIdxById(n.id),o={row:a||i,cell:r,value:s,rowData:s,col:n,api:e};e.settings.onPostRenderCell(t.find("td").eq(r).find(".datagrid-cell-wrapper .content")[0],o)}))},i=0;i<this.settings.columns.length;i++)n(i);var a=e.tableBody.find("select.dropdown");a.dropdown&&a.dropdown(),e.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",(function(){var t=$(this),n=t.val(),i=t.closest("tr");e.updateCellNode(i.attr("aria-rowindex"),t.closest("td").index(),n,!1,!0)}));var s=e.tableBody.find(".spinbox");s.spinbox&&s.spinbox(),e.settings.source||e.displayCounts(),e.setAlternateRowShading(),e.createDraggableRows();var r=document.activeElement;e.activeCell.isFocused&&(!r||r&&"body"===r.tagName.toLowerCase())&&e.setActiveCell(e.activeCell.row,e.activeCell.cell),e.settings.paging&&e.settings.source&&!e.settings.allowSelectAcrossPages&&(e.preventSelection||(e._selectedRows=[]),e.syncSelectedUI()),e.settings.paging&&e.settings.source&&e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),e.settings.paging&&!e.settings.source&&null===e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),setTimeout((function(){e.element.trigger("afterrender",{body:e.bodyContainer,header:e.headerContainer,pager:e.pagerBar}),t.activateFirstCell()}))},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var t=this,e=this;if(e.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var n=e.tableBody.find("tr");if(0===n.length)return;for(var i=function(i){var a=t.settings.columns[i];a.component&&n.each((function(){var t=$(this),n=t.index(),i=e.columnIdxById(a.id),s={row:t.index(),cell:i,value:e.settings.dataset[n],col:a,api:e};e.settings.onDestroyCell(t.find("td").eq(i).find(".datagrid-cell-wrapper .content")[0],s)}))},a=0;a<this.settings.columns.length;a++)i(a)}},cacheVirtualStats:function(){var t=this.bodyWrapperCenter[0].scrollTop,e=this.element[0].offsetHeight-("normal"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25),n="normal"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;this.virtualRange={rowHeight:n,top:Math.max(t-(this.settings.virtualRowBuffer-1)*n,0),bottom:t+e+(this.settings.virtualRowBuffer-1)*n,totalHeight:n*this.settings.dataset.length,bodyHeight:e}},isRowVisible:function(t){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&t&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=t&&this.pagerAPI.activePage*this.settings.pagesize>=t;0===t&&this.cacheVirtualStats();var e=t*this.virtualRange.rowHeight;return e>=this.virtualRange.top&&e<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var t=this.virtualRange.totalHeight-this.virtualRange.bottom,e=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),e>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),e>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(e,"px")),0===e&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),t>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),t>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(t,"px")),t<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(t,e,n,i,a,s,r){return r=r||this,void 0===t&&(t=this.defaultFormatter),"string"==typeof t?Ki[t](e,n,i,a,s,r).toString():t(e,n,i,a,s,r).toString()},rowHtml:function(t,e,n,i,a,s,r){var o,l,c,d=this.settings.summaryRow&&!i&&a,h=this.pagerAPI?this.pagerAPI.activePage:1,u={left:"",center:"",right:""},p=this.settings.treeDepth?this.settings.treeDepth[e]:0,f=null,g=0,m=!1;if(!t)return"";var v=!1;if(this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&this.settings.isRowDisabled(n,t)&&(v=!0),t.isRowDisabled&&(v=!0),f=p=p?p.depth:0,this.settings.treeDepth&&this.settings.treeDepth.length)for(var b=0;b<this.settings.treeDepth.length;b++){var y=this.settings.treeDepth[b];if(e===y.idx-1){for(var w=null,x=0,C=b;C>=0&&!((x=this.settings.treeDepth[C].depth<x||0===x?this.settings.treeDepth[C].depth:x)<y.depth&&(w=this.settings.treeDepth[C],1===x||void 0!==w.node.expanded&&!w.node.expanded));C--);m=!(!w||void 0===w.node.expanded||w.node.expanded)||t._isFilteredOut,f=y.depth;break}}if(this.settings.groupable&&!a){var k=this.settings.groupable;m=void 0!==k.expanded&&!k.expanded,k.expanded&&"function"==typeof k.expanded&&(m=!k.expanded(e,0,null,null,t,this),this.isFooterHidden=m)}var T=this.settings.frozenColumns.left.length,S=this.settings.frozenColumns.right.length,A=this.visibleColumns().length-T-S;if(this.settings.groupable&&i&&!a){var $=Ki.GroupRow(e,0,null,null,t,this);return u.left='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(T,'">').concat($.left||"<span>&nbsp;</span>","</td></tr>"),u.center='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(A,'">').concat($.center||"<span>&nbsp;</span>","</td></tr>"),u.right='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(S,'">').concat($.right||"<span>&nbsp;</span>","</td></tr>"),u}if(this.settings.groupable&&i&&a){var E=Ki.GroupFooterRow(e,0,null,null,t,this);return u.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.left||"<span>&nbsp;</span>","</tr>"),u.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.center||"<span>&nbsp;</span>","</tr>"),u.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,u}var D=e+1+(this.settings.source&&!this.settings.indeterminate?(h-1)*this.settings.pagesize:0);o=this.recordCount%2==0;var I=this.isRowSelected(t),M=t._rowactivated,L={class:"",svg:""};t&&t.rowStatus&&("new"!==t.rowStatus.icon||this.settings.showNewRowIndicator)&&(L.show=!0,L.class=" rowstatus-row-".concat(t.rowStatus.icon),L.icon="success"===t.rowStatus.icon?"#icon-check":"#icon-exclamation",L.title=""!==t.rowStatus.tooltip?' title="'.concat(t.rowStatus.tooltip,'"'):"",L.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(L.title,'><use href="').concat(L.icon,'"></use></svg>'));var P="";for(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(P=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,D,n,t),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(P=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),u.center='<tr role="row" aria-rowindex="'.concat(D,'"')+' data-index="'.concat(n,'"').concat(s?' data-lineage="'.concat(s,'"'):"").concat(this.settings.treeGrid&&t.children?' aria-expanded="'.concat(t.expanded?'true"':'false"'):"").concat(this.settings.treeGrid?' aria-level="'.concat(f,'"'):"").concat(v?' aria-disabled="true"':"").concat(I?' aria-selected="true"':"",' class="datagrid-row').concat(L.class).concat(m?" is-hidden":"").concat(t._isFilteredOut?" is-filtered":"").concat(M?" is-rowactivated":"").concat(v?" is-rowdisabled":"").concat(I?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(this.settings.alternateRowShading&&!o?" alt-shading":"").concat(d?" datagrid-summary-row":"").concat(this.settings.cellNavigation||!1===this.settings.selectable?"":" is-clickable").concat(this.settings.treeGrid?t.children?" datagrid-tree-parent":f>1?" datagrid-tree-child":"":"",'"').concat(P,">"),u.left=u.center,u.right=u.center,g=0;g<this.settings.columns.length;g++){var N=this.settings.columns[g],_=this.getContainer(N.id),R="",B=d?N.summaryRowFormatter||N.formatter||this.defaultFormatter:N.formatter||this.defaultFormatter,O=this.formatValue(B,e,g,this.fieldValue(t,this.settings.columns[g].field),this.settings.columns[g],t,this);if(0===O.indexOf('<span class="is-readonly">')&&(N.readonly=!0),(O.indexOf("datagrid-checkbox")>-1||O.indexOf("btn-actions")>-1)&&(R+=" l-center-text"),O.indexOf("trigger")>-1&&(R+=" datagrid-trigger-cell"),-1===O.indexOf("trigger")&&N&&N.editor){var F=this.getEditorName(N.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(F)>=0&&(R+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(N.editor&&this.settings.editable&&(R+=" has-editor"),N.expanded&&(this.treeExpansionField=N.expanded),N.align&&(R+=" l-".concat(N.align,"-text")),"ellipsis"===N.textOverflow&&(R+=" text-ellipsis"),N.uppercase&&(R+=" uppercase-text"),R+=N.readonly?" is-readonly":"",R+=N.hidden?" is-hidden":"",N.isEditable&&!N.readonly){var z=this.fieldValue(t,this.settings.columns[g].field);N.isEditable(D-1,g,z,N,t)||(R+=" is-readonly")}var H="selectionCheckbox"===N.id||!N.readonly&&void 0!==N.editor?"":'aria-readonly="true"';if(N.isReadonly&&!N.readonly&&"selectionCheckbox"!==N.id){var q=this.fieldValue(t,this.settings.columns[g].field);N.isReadonly(this.recordCount,g,q,N,t)&&(R+=" is-cell-readonly",H='aria-readonly="true"')}var V=this.fieldValue(t,this.settings.columns[g].field);N.cssClass&&"function"==typeof N.cssClass&&(R+=" ".concat(N.cssClass(this.recordCount,g,V,N,t))),N.cssClass&&"string"==typeof N.cssClass&&(R+=" ".concat(N.cssClass)),R+=N.focusable?" is-focusable":"",R+="Actions"===B.name?" has-btn-actions":"";var j=this.calculateRowspan(V,e,N);if(""!==j){var W=null,U=null;l>0&&!N.hidden&&(l-=1,R+=" is-hidden",this.settings.frozenColumns.left&&this.settings.frozenColumns.left.length>0&&"center"===this.getContainer(N.id)&&(g===this.settings.frozenColumns.left.length&&(R=R.replace(" is-hidden"," is-invisible"),1+(U=c-this.settings.frozenColumns.left.length+1)==this.settings.columns.length-g&&(R+=" is-last-visible")),0===l&&1===this.settings.frozenColumns.left.length&&g<this.visibleColumns().length&&(R=R.replace(" is-hidden","")),0===l&&c===g&&(R+=" is-invisible")));var G=this.settings.frozenColumns.left.length;if(N.colspan&&"function"==typeof N.colspan){var Y=this.fieldValue(t,this.settings.columns[g].field);W=N.colspan(D-1,g,Y,N,t,this);var K=this.settings.columns.length-g;(W=W&&W>K?K:W)&&W>1?(c=W,l=W-1,G>0&&W-G>0&&((W-=1===G&&W===this.visibleColumns().length-1?0:G)===g||G+g===W||G>g&&W>g)&&(R+=" is-last-visible"),N.align&&(R=R.replace(" l-".concat(N.align,"-text"),"")),this.settings.frozenColumns.left&&G>0&&G===W&&(R+=" is-last-visible"),this.visibleColumns().length===g+W&&(R+=" is-last-visible"),R+=" l-left-text"):W=null}U&&(W=U),0!==g&&(L.class="",L.svg=""),""!==L.class&&(R+=" rowstatus-cell"),this.isCellDirty(this.settings.groupable?n:e,g)&&(R+=" is-dirty-cell"),""!==R&&(R=R.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")),u[_]+='<td role="gridcell" '.concat(H,' aria-colindex="').concat(g+1,'"')+' aria-describedby="'.concat(this.uniqueId("-header-".concat(g)),'"').concat(I?' aria-selected="true"':"").concat(R?' class="'.concat(R,'"'):"").concat(W?' colspan="'.concat(W,'"'):"").concat(N.tooltip&&"string"==typeof N.tooltip?' title="'.concat(N.tooltip.replace("{{value}}",V),'"'):"").concat(this.settings.columnGroups?'headers = "'.concat(this.uniqueId("-header-".concat(g))," ").concat(this.getColumnGroup(g),'"'):"").concat(j||"",">").concat(L.svg,'<div class="datagrid-cell-wrapper">'),N.contentVisible&&(N.contentVisible(e+1,g,V,N,t)||(O="")),this.settings.onPostRenderCell&&N.component&&(u[_]+='<div class="content"></div>',O=""),u[_]+="".concat(O,"</div></td>")}}if(u.left+="</tr>",u.center+="</tr>",u.right+="</tr>",this.settings.rowTemplate){var X=t,Q=this.settings.rowTemplateHeight||107,J="";ne&&X&&(J=ne.compile("{{#dataset}}".concat(this.settings.rowTemplate,"{{/dataset}}"),{dataset:X})),this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(Q,'px"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(A,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(J,"</div></div>\n        </td></tr>"),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(Q,'px"></div></div>\n          </td></tr>'))}if(this.settings.expandableRow&&(this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(A,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),t.children&&!r&&!t._isFilteredOut)for(var Z=0,tt=t.children.length;Z<tt;Z++){var et=s?"".concat(s,".").concat(n):"".concat(n);this.recordCount++;var nt=this.rowHtml(t.children[Z],this.recordCount,Z,!1,!1,et);u.left+=nt.left,u.center+=nt.center,u.right+=nt.right}return u},getEditorName:function(t){if(!t)return"";var e=t.name;return(function(){}).name||(e=(t.toString().match(/function (.+?)\(/)||[,""])[1]),e?e.toLowerCase():""},calculateTextWidth:function(t){var e=t.name||"",n=0,i=0,a=0,s="",r=!1;if(t.formatter===Ki.Colorpicker)s="";else if(t.formatter===Ki.Dropdown&&t.options){for(var l="",c=0;c<t.options.length;c++)t.options[c].label.length>l.length&&(l=t.options[c].label);l=this.formatValue(t.formatter,0,0,l,t,null,this),s=l=o.stripHTML(l)}else{var d=0,h=this.settings.dataset;this.settings.groupable&&(h=this.originalDataset);for(var u=0;u<h.length;u++){var p=this.fieldValue(h[u],t.field),f=h[u];if(r=(p=this.formatValue(t.formatter,u,0,p,t,f,this)).toString().indexOf("btn-secondary")>-1,d=(p=o.stripHTML(p)).toString().length,this.settings.groupable&&f)for(var g=0;g<f.length;g++){var m=this.fieldValue(f[g],t.field);m=this.formatValue(t.formatter,u,0,m,t,f,this),(d=(m=o.stripHTML(m)).toString().length)>n&&(n=d,s=m)}d>n&&(n=d,s=p)}if(this.filterExpr&&this.filterExpr.length>0){var v=$.grep(this.filterExpr,(function(e){return e.columnId===t.id}));if(v&&1===v.length){var b=v[0].value;(d=b.toString().length)>n&&(n=d,s=b)}}if(""===s&&(t.formatter===Ki.Date||t.formatter===Ki.Time)){var y=new Date(9999,11,31,23,59,59,999);y=this.formatValue(t.formatter,0,0,y,t,null,this),s=y=o.stripHTML(y)}}var w=!!t.formatter&&t.formatter.toString().indexOf('<span class="tag')>-1;a+=45,!!t.formatter&&t.formatter.toString().indexOf("datagrid-alert-icon")>-1&&(a+=20),w&&(a+=10),r&&(a+=50),this.settings.editable&&t.editor===ea.Spinbox&&(a+=46),!this.settings.editable||t.formatter!==Ki.Dropdown&&t.formatter!==Ki.Lookup&&t.editor!==ea.Time||(a+=10),this.settings.editable&&t.editor===ea.Date&&(a+=5),i=this.calculateTextRenderWidth(s)+a,t.formatter===Ki.Colorpicker&&(i=150);var x=void 0===t.sortable||t.sortable?48:40,C=this.calculateTextRenderWidth(e,!0)+x;return t.filterType&&this.settings.filterable&&(C<40&&(C=40),"checkbox"!==t.filterType&&(""!==s?C<i+40&&""!==s&&(C=i+55):C<120&&(C=120))),Math.ceil(Math.max(i,C))},calculateTextRenderWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");return this.fontCached&&this.fontHeaderCached||(this.fontCached=W.currentTheme.id&&W.currentTheme.id.indexOf("uplift")>-1?"400 16px arial":"400 14px arial",this.fontHeaderCached=W.currentTheme.id&&W.currentTheme.id.indexOf("uplift")>-1?"600 14px arial":"700 12px arial"),n.font=this.fontCached,e&&(n.font=this.fontHeaderCached),n.measureText(t).width},setScrollClass:function(){if(this.hasLeftPane||this.hasRightPane){this.element.removeClass("has-vertical-scroll has-less-rows");var t=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),e=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>t,n=parseInt(this.bodyWrapperCenter[0].offsetHeight,10);parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>n+2&&this.element.addClass("has-vertical-scroll"),e&&this.element.addClass("has-horizontal-scroll")}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fixColumnIds()},fixColumnIds:function(){for(var t=0;t<this.settings.columns.length;t++){var e=this.columnById(this.settings.columns[t].id);if(e.length>1)for(var n=1;n<e.length;n++)e[n].id="".concat(e[n].id,"-").concat(n)}},getStretchColumnIdx:function(){var t=this,e=t.stretchColumnIdx;return-1===e&&"last"!==t.settings.stretchColumn&&t.headerNodes().each((function(n){$(this).attr("data-column-id")===t.settings.stretchColumn&&(e=n)})),e},columnWidth:function(t,e){return this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1),this.calculateColumnWidth(t,e)},calculateColumnWidth:function(t,e){var n,i=this.visibleColumns(!0),a=e===this.visibleColumns().length-1,s=this.getContainer(t.id);this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),!this.elemWidth&&this.element.parent().is(".datagrid-default-modal-width")?(this.elemWidth=this.settings.paging?466:300,this.isInModal=!0):this.element.parent().is(".modal-body")&&(this.elemWidth=this.settings.paging?466:300,this.element.css("min-width")&&(this.elemWidth=parseInt(this.element.css("min-width"),10)),this.isInModal=!0),this.widthSpecified=!1,this.widthPixel=!1),t.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&t.width&&(this.widthPixel="string"!=typeof t.width);var r=t.width;"string"==typeof t.width&&-1===t.width.indexOf("px")&&(this.widthPercent=!0,n=t.width.replace("%",""));var o=this.calculateTextWidth(t);if(this.widthSpecified&&r||(r=Math.max(o,r||0)),(!this.widthSpecified||void 0===t.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(t.id)){var l=Math.round(this.elemWidth/i.length);r=l-(a?2:0),l<o&&(r=o)}if("selectionCheckbox"!==t.id&&"favorite"!==t.id||(t.width=r=43),"favorite"===t.id&&(t.width=r=62),"expander"===t.id&&(t.width=r=55),"rowStatus"===t.id&&(t.width=r=62),"rowReorder"===t.id&&(t.width=r=62),"drilldown"===t.id&&(t.width=r=78),t.minWidth&&r<t.minWidth&&(r=t.minWidth),t.minWidth&&r>t.maxWidth&&(r=t.maxWidth),this.totalWidths[s]+=t.hidden?0:r,"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===t.id)return this.stretchColumnIdx=e,this.stretchColumnWidth=r,' style="width: 99%"';if(a){var c=this.elemWidth-this.totalWidths[s];this.isInModal&&null===this.settings.stretchColumn&&!this.settings.sizeColumnsEqually&&c>0&&!this.widthPercent&&!t.width&&(t.width=r=this.elemWidth),"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=c),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return this.widthPercent||void 0!==r?' style="width: '.concat(this.widthPercent?"".concat(n,"%"):"".concat(r,"px"),'"'):""},calculateRowspan:function(t,e,n){var i=0,a=null;if(!n.rowspan)return null;for(var s=0;s<this.settings.dataset.length;s++)t===this.settings.dataset[s][n.field]&&(i++,null===a&&(a=s));return e===a?' rowspan ="'.concat(i,'"'):""},calculateTotals:function(){return this.settings.totals=aa.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(t){return t+(/(px|%)/i.test("".concat(t))?"":"px")},setupTooltips:function(t,e){if(t||e||this.settings.enableTooltips){var n,i=this,a={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};this.settings.filterable?(a.headerColumn="".concat(a.th," .datagrid-column-wrapper"),a.headerFilter="".concat(a.th," .datagrid-filter-wrapper .btn-menu"),a.header="".concat(a.headerColumn,", ").concat(a.headerFilter)):a.header=a.th,a.iconAlert="".concat(a.td," .icon-alert"),a.iconSuccess="".concat(a.td," .icon-success"),a.iconError="".concat(a.td," .icon-error"),a.iconInfo="".concat(a.td," .icon-info"),a.icons="".concat(a.iconAlert,", ").concat(a.iconSuccess,", ").concat(a.iconError,", ").concat(a.iconInfo),a.str=t&&this.settings.enableTooltips?"".concat(a.header,", ").concat(a.td,", ").concat(a.icons,", ").concat(a.rowstatus):t?"".concat(a.header,", ").concat(a.rowstatus):"".concat(a.header,", ").concat(a.td,", ").concat(a.icons);var s=function(t,e){e=void 0===e?400:e,n=setTimeout((function(){var e=b.hasClass(t,"datagrid-column-wrapper"),n=!!b.hasClass(t.parentNode,"datagrid-filter-wrapper")&&t.parentNode.querySelectorAll(".popupmenu.is-open").length>0,a=$(t).data("gridtooltip")||i.cacheTooltip(t),s=i.getOuterWidth(e?t.parentNode:t);a&&(a.forced||a.textwidth>s-35)&&!n&&i.showTooltip(a)}),e)},r=function(t,e){e=void 0===e?400:e,clearTimeout(n),setTimeout((function(){i.hideTooltip(),b.hasClass(t.parentNode,"datagrid-filter-wrapper")&&i.removeTooltipData(t)}),e)};this.element.off("mouseenter.gridtooltip",a.str).on("mouseenter.gridtooltip",a.str,(function(){s(this)})).off("mouseleave.gridtooltip click.gridtooltip",a.str).on("mouseleave.gridtooltip click.gridtooltip",a.str,(function(){r(this)})).off("longpress.gridtooltip",a.str).on("longpress.gridtooltip",a.str,(function(){s(this,0)})).off("keydown.gridtooltip",a.str).on("keydown.gridtooltip",a.str,(function(t){var e=t.which||t.keyCode||t.charCode||0,n=!1;return t.shiftKey&&112===e?s(this,0):27===e&&(n=i.isGridtooltip(),r(this,0)),n&&t.preventDefault(),!n})),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",(function(){s(this)})).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",(function(){r(this)})).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",(function(){s(this,0)}))}},getOuterWidth:function(t){var e=getComputedStyle(t);return t.offsetWidth+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10))},closest:function(t,e){return t&&(e(t)?t:this.closest(t.parentNode,e))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(t,e){var n=this.settings,i=e;i||(i=n.treeGrid?n.treeDepth[t].node:this.getActiveDataset()[t]);for(var a=0;a<this.settings.columns.length;a++){var s=this.settings.columns[a];s.hidden||this.updateCellNode(t,a,this.fieldValue(i,s.field),!0)}},updateColumns:function(t,e){void 0===e&&(e=null);var n=[];this.settings.filterable&&this.filterRowRendered&&(n=this.filterConditions()),this.settings.columns=t,e&&(this.settings.columnGroups=e),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(n)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var t=this.settings.saveUserSettings;!$.isEmptyObject(t)&&this.canUseLocalStorage()&&(t.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),t.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),t.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),t.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),t.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),t.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),t.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},setOriginalColumns:function(){this.originalColumns=b.deepCopy(this.settings.columns)},columnsFromString:function(t,e){if(!t)return[];var n=JSON.parse(t);if(!n)return[];for(var i=0;i<n.length;i++){var a=void 0,s=this.columnById(n[i].id),r=s.width;s&&(a=n[i].hidden,$.extend(n[i],s[0]),void 0!==a?n[i].hidden=a:delete n[i].hidden,e&&(n[i].width=r))}return n},restoreColumns:function(t){if(this.settings.saveColumns&&this.canUseLocalStorage())if(t)this.updateColumns(t);else{var e=localStorage[this.uniqueId("columns")];!t&&e&&(this.originalColumns=b.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(e))}},restoreUserSettings:function(t){var e=this.settings.saveUserSettings;if(t||!$.isEmptyObject(e)&&this.canUseLocalStorage())if(t){if(t.columns&&this.updateColumns(t.columns),t.rowHeight&&this.rowHeight(t.rowHeight),t.sortOrder&&this.setSortColumn(t.sortOrder.sortId,t.sortOrder.sortAsc),t.pagesize&&(this.settings.pagesize=parseInt(t.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(t.pagesize,10),t.activePage||this.pagerAPI.setActivePage(1,!0)),t.showPageSizeSelector&&(this.settings.showPageSizeSelector=t.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(t.showPageSizeSelector)),t.filter&&this.applyFilter(t.filter,"restore"),t.activePage){var n=parseInt(t.activePage,10);this.pagerAPI.setActivePage(n,!0),this.restoreActivePage=!0}}else{if(e.columns){var i=localStorage[this.uniqueId("usersettings-columns")];i&&(this.settings.columns=this.columnsFromString(i))}if(e.rowHeight){var a=localStorage[this.uniqueId("usersettings-row-height")];a&&(this.settings.rowHeight=a)}if(e.sortOrder){var s=localStorage[this.uniqueId("usersettings-sort-order")];s&&(this.sortColumn=JSON.parse(s),this.restoreSortOrder=!0)}if(e.pagesize){var r=localStorage[this.uniqueId("usersettings-pagesize")];r&&(this.settings.pagesize=parseInt(r,10))}if(e.showPageSizeSelector){var o=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(o="true"===o.toString().toLowerCase())&&(this.settings.showPageSizeSelector=o)}if(e.activePage){var l=localStorage[this.uniqueId("usersettings-active-page")];l&&(this.savedActivePage=parseInt(l,10),this.restoreActivePage=!0)}if(e.filter){var c=localStorage[this.uniqueId("usersettings-filter")];c&&(this.savedFilter=JSON.parse(c),this.restoreFilter=!0)}}},copyThenStringify:function(t){if(!t)return JSON.stringify(t);var e=t.map((function(t){var e=b.extend({},t);return e.editorOptions&&delete e.editorOptions,e}));return JSON.stringify(e)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var t=b.deepCopy(this.originalColumns);this.updateColumns(t,this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null)}this.clearFilter()},hideColumn:function(t){var e=this.columnIdxById(t);if(-1!==e){if(this.settings.columns[e].hidden=!0,this.headerNodes().eq(e).addClass("is-hidden"),this.colGroupNodes().eq(e).addClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(e+1,")")).addClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var n=this.element.find(".datagrid-header th").eq(e).attr("colspan");if(n&&n>0){n-=1;for(var i=0;i<n;i++)this.tableBody.find("> tr > td:nth-child(".concat((e+=n)+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:e,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var t=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",t)},showColumn:function(t){var e=this.columnIdxById(t);if(-1!==e){if(this.settings.columns[e].hidden=!1,this.headerNodes().eq(e).removeClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(e+1,")")).removeClass("is-hidden"),this.bodyColGroup&&this.bodyColGroup.find("col").eq(e).removeClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var n=this.element.find(".datagrid-header th").eq(e).attr("colspan");if(n&&n>0){n-=1;for(var i=0;i<n;i++)this.tableBody.find("> tr > td:nth-child(".concat((e+=n)+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:e,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(t,e,n){na.exportToCsv(t,e,n,this)},exportToExcel:function(t,e,n){na.exportToExcel(t,e,n,this)},copyToDataSet:function(t,e,n,i){na.copyToDataSet(t,e,n,i,this)},personalizeColumns:function(){var t=this,e=this,n='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(D.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');n+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:D.translate("PersonalizeColumns"),content:n,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:D.translate("Close"),click:function(t,e){e.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",(function(n,i){i&&(e.isColumnsChanged=!1,i.element.find(".searchfield").searchfield({clearable:!0}),i.element.find(".listview").listview({source:t.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(t){return t.name}}}).off("selected.datagrid").on("selected.datagrid",(function(t,n){var i=n.elem.find(".checkbox"),a=i.attr("data-column-id"),s=i.prop("checked");if(n.elem.removeClass("is-selected hide-selected-color"),!i.is(":disabled")){e.isColumnsChanged=!0;var r={node:{},api:$(this).data("listview")};if(r.api){var o=e.columnIdxById(a);-1!==o&&r.api.settings.dataset[o]&&(r.node=r.api.settings.dataset[o])}s?(e.hideColumn(a),i.prop("checked",!1),r.node.hidden=!0):(e.showColumn(a),i.prop("checked",!0),r.node.hidden=!1),e.settings.groupable&&e.rerender()}})),i.element.on("close.datagrid",(function(){e.isColumnsChanged=!1})),i.element.on("keydown.datagrid",(function(t){27===t.keyCode&&(i.close(),$("body").off("beforeopen.datagrid"))})))}))},setColumnWidth:function(t,e,n){var i=parseFloat(e),a=this.columnById(t)[0],s=-1;!i||("string"==typeof t&&this.headerNodes().each((function(e){$(this).attr("data-column-id")===t&&(s=e)})),"number"!=typeof e&&(e=i/100*this.element.width()),Math.abs(e-a.width)<2)||("number"==typeof a.colspan&&(e/=a.colspan),a&&(a.width=e),n&&(this.bodyColGroup.find("col").eq(s)[0].style.width="".concat(e,"px")),this.element.trigger("columnchange",[{type:"resizecolumn",index:s,columns:this.settings.columns}]),this.saveUserSettings())},isEllipsisActiveHeader:function(t){return(void 0===(t=t||{}).sortable||t.sortable)&&"ellipsis"===t.textOverflow},activeEllipsisHeaderAll:function(){for(var t=0,e=this.settings.columns.length;t<e;t++){var n=this.settings.columns[t].id,i=this.columnById(n)[0];if(this.isEllipsisActiveHeader(i)){var a=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(n,'"]'));this.activeEllipsisHeader(a)}}},activeEllipsisHeader:function(t){if(t){var e=t.querySelector(".datagrid-column-wrapper .datagrid-header-text");t.classList[t.scrollWidth<e.scrollWidth+65?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var t=this,e=this;if(!this.resizeHandle){var n,i,a,s,r;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var o=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",(function(){e.currentHeader&&(e.dragging=!0,o=!1,i=e.currentHeader.attr("data-column-id"),n=e.columnById(i)[0],e.isEllipsisActiveHeader(n)&&e.currentHeader[0].classList.add("is-ellipsis-active"))})).on("drag.datagrid",(function(i,c){if(e.currentHeader){var d=n.minWidth||12,h=n.maxWidth||1e3,u=e.currentHeader.index();t.dragging=!0;var p=c.left+5,f=t.bodyColGroup.find("col").eq(u)[0],g=parseInt(e.currentHeader.width(),10),m=parseInt(f.style.width||g,10);f.style.width.indexOf("%")>-1&&(m=g);var v=parseFloat(e.currentHeader.offsetParent().offset().left),b=parseFloat(e.currentHeader.offset().left),y=g-(p-(0===u?0:b-v-2));if((a=m-y)<d||a>h)e.resizeHandle.css("cursor","inherit");else if(a!==m&&(f.style.width="".concat(a,"px"),V.pressedKeys.get("Shift")&&(o=!0),"fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o)){var w=D.isRTL()?u+1:u-1,x=e.settings.columns[w];if(!x)return;var C=x.minWidth||12,k=x.maxWidth||1e3,T=D.isRTL()?l.getPreviousSibling(e.currentHeader,":not(.is-hidden)"):l.getNextSibling(e.currentHeader,":not(.is-hidden)");r=T.getAttribute("data-column-id");var S=D.isRTL()?l.getPreviousSibling(f,":not(.is-hidden)"):l.getNextSibling(f,":not(.is-hidden)"),A=parseInt(T.offsetWidth,10),$=parseInt(S.style.width||A,10);if(S.style.width.indexOf("%")>-1&&($=A),(s=$+y)<C||s>k)return void e.resizeHandle.css("cursor","inherit");if(s===$||!S)return;S.style.width="".concat(s,"px")}}})).on("dragend.datagrid",(function(){t.dragging=!1,e.isEllipsisActiveHeader(n)&&e.activeEllipsisHeader(e.currentHeader[0]),e.setColumnWidth(i,a),r&&("fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o)&&e.setColumnWidth(r,s)}))}},displayCounts:function(t){var e,n=this.tableBody.find("tr:visible").length,i=0,a="",s=this.settings.paging&&!this.settings.source,r=function(t){return D.formatNumber(t,{style:"integer"})};!s&&t||(this.recordCount=this.settings.dataset.length,n=this.settings.dataset.length),(this.settings.treeGrid&&s||!t)&&(this.filteredCount=this.settings.dataset.filter((function(t){return t._isFilteredOut})).length,n=this.settings.dataset.length,this.recordCount=this.settings.dataset.filter((function(t){return!t._isFilteredOut})).length),this.settings.groupable&&(i=n,n=this.originalDataset.length,a=(a="({0} ".concat(D.translate(1===i?"Group":"Groups"),")")).replace("{0}",r(i))),this.contextualToolbar&&this.contextualToolbar.length&&this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(D.translate("Selected"))),t&&-1!==t&&(n=t),void 0===t&&this.settings.source&&(n=this.lastCount||0),e=this.settings.showFilterTotal&&this.filteredCount>0?(e=(e="(".concat(D.translate(1===n?"ResultOf":"ResultsOf"),")")).replace("{0}",r(n-this.filteredCount))).replace("{1}",r(n)):(e="({0} ".concat(D.translate(1===n?"Result":"Results"),")")).replace("{0}",r(n)),this.settings.resultsText&&(e="function"==typeof this.settings.resultsText?this.grandTotal?this.settings.resultsText(this,this.grandTotal,n):this.settings.resultsText(this,n,0===this.filteredCount?0:n-this.filteredCount):this.settings.resultsText),this.toolbar&&(l.html(this.toolbar.find(".datagrid-result-count"),e,"<span>"),l.html(this.toolbar.find(".datagrid-group-count"),a,"<span>"),this.toolbar[0].setAttribute("aria-label",this.toolbar.find(".title").text()),this.toolbar.find(".datagrid-row-count").text(n)),l.html(this.element.closest(".modal").find(".datagrid-result-count"),e,"<span>"),this.lastCount=n,this.checkEmptyMessage()},setEmptyMessage:function(t){this.emptyMessage?(this.emptyMessage.settings=t,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(t).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(t,e,n){var i=$(e.target),a=i.closest("tr"),s=i.closest("td"),r=s.index(),o=this.settings.treeGrid?this.actualRowIndex(a):this.dataRowIndex(a),l=!0;i.is("a")&&(n=!1),n&&(e.stopPropagation(),e.preventDefault());var c=this.settings.dataset[o];return this.settings.groupable&&(a.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?l=!1:(o=this.actualPagingRowIndex(this.actualRowIndex(a)),(c=this.settings.dataset[this.groupArray[o].group])&&c.values&&(c=c.values[this.groupArray[o].node]))),l&&this.element.trigger(t,[{row:o,rowElem:a,cell:r,cellElem:s,item:c,originalEvent:e}]),!1},handleScrollY:function(t){var e=t.currentTarget.scrollTop;e!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=e,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var t=this,e=this,n="multiple"===this.settings.selectable,i="mixed"===this.settings.selectable;if(!e.settings.cellNavigation&&e.settings.rowNavigation&&e.element.on("focus.datagrid","tbody > tr",(function(){$(this).addClass("is-active-row")})).on("blur.datagrid","tbody > tr",(function(){$("tbody > tr",e.table).removeClass("is-active-row")})),this.settings.paging&&this.tableBody.on("page.".concat("datagrid"),(function(n,i){"filtered"===i.type&&t.settings.source||(e.saveUserSettings(),e.render(null,i),e.afterPaging(i))})).on("pagesizechange.".concat("datagrid"),(function(t,n){e.render(null,n),e.afterPaging(n)})),e.settings.showHoverState&&e.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",(function(){e.rowNodes($(this)).addClass("is-hover-row")})).on("mouseleave.datagrid","tbody > tr",(function(){e.rowNodes($(this)).removeClass("is-hover-row")})),(this.hasLeftPane||this.hasRightPane)&&(e.element.find(".datagrid-wrapper").on("scroll.table",(function(t){e.handleScrollY(t)})),e.element.find(".datagrid-wrapper").on("wheel.table",(function(t){0!==t.originalEvent.deltaY&&(t.currentTarget.scrollTop+=t.originalEvent.deltaY,t.preventDefault(),e.handleScrollY(t))}))),this.settings.virtualized){var a=0,s=0;e.bodyWrapperCenter.on("scroll.vtable",h((function(){var t=this.scrollTop;t!==a&&(t<e.virtualRange.top+25||t>e.virtualRange.bottom-e.virtualRange.bodyHeight-25)&&(a=this.scrollTop,e.clearCache(),e.renderRows())}),0)),$("body").on("resize.vtable",(function(){this.offsetHeight!==s&&(s=this.scrollTop,e.clearCache(),e.renderRows())}))}this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",(function(t){return $(t.target).parent().is(".datagrid-filter-wrapper")||$(t.target).parent().is(".lookup-wrapper")||(t.stopPropagation(),e.setSortColumn($(this).attr("data-column-id"))),!1})),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",(function(t){var e=t.currentTarget.getAttribute("href");e&&"#"!==e||t.preventDefault()})),e.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",(function(t){var n;n=t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData?t.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var i=/\n/.exec(n),a=/\r/.exec(n),s=/\r\n/.exec(n);if((!e.activeCell||!e.activeCell.node.hasClass("is-readonly"))&&(n&&a||i||s)){var r=n.split(i?"\n":"\r");s&&(r=n.split("\r\n")),r.pop();var o=parseInt($(t.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),l=parseInt($(t.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;e.editor&&e.editor.input&&e.commitCellEdit(),e.copyToDataSet(r,o,l,e.settings.dataset)}})),this.element.off("click.datagrid").on("click.datagrid","tbody td",(function(t){var a=null,s=null,r=$(t.target),o=r.closest("td");if(!$(t.currentTarget).parent().hasClass(".datagrid-row-detail"))if(!o.is(".has-btn-actions")||r.is(".btn-actions")){if(r.parents("td").length>1&&(t.preventDefault(),t.stopPropagation()),e.triggerRowEvent("click",t,!0),e.setActiveCell(o),r.is(".datagrid-expand-btn"))return a=$(this).closest("tr"),s=e.actualRowIndex(a),e.toggleRowDetail(s),e.toggleGroupChildren(a),e.toggleChildren(t,s),!1;var l=r.is(".datagrid-selection-checkbox")||1===r.find(".datagrid-selection-checkbox").length,c=!!e.settings.clickToSelect||l;r.is(".datagrid-drilldown")&&(c=!1),i&&((c=l)||(t.shiftKey&&e.activatedRow().length&&(e.selectRowsBetweenIndexes([e.activatedRow()[0].row,r.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()),e.toggleRowActivation(r.closest("tr")))),c&&n&&t.shiftKey?(e.selectRowsBetweenIndexes([e.lastSelectedRow,r.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()):c&&e.toggleRowSelection(r.closest("tr"));var d=e.makeCellEditable(e.activeCell.rowIndex,e.activeCell.cell,t),h=o.attr("aria-colindex")-1,u=e.columnSettings(h);if(u.click&&"function"==typeof u.click&&r.is("button, input[checkbox], a")||r.parent().is("button")){var p=$(this).closest("tr"),f=e.actualRowIndex(p);s=e.dataRowIndex(p);var g=e.settings.treeGrid?e.settings.treeDepth[f].node:e.settings.dataset[s];if(o.hasClass("is-focusable")&&!r.is(e.buttonSelector)&&!r.parent("button").is(e.buttonSelector))return;e.settings.groupable&&(p.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(f=e.actualPagingRowIndex(e.actualRowIndex(p)),(g=e.settings.dataset[e.groupArray[f].group])&&g.values&&(g=g.values[e.groupArray[f].node]))),(!o.hasClass("is-cell-readonly")&&r.is("button, input[checkbox], a")||r.parent().is("button"))&&u.click(t,[{row:f,cell:e.activeCell.cell,item:g,originalEvent:t}])}if(u.menuId){e.closePrevPopupmenu();var m=$(this).find("button");m.popupmenu({attachToBody:!0,menuId:u.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return o.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",(function(){var t=$(this);t.data("popupmenu")&&!t.data("tooltip")&&t.data("popupmenu").destroy()})),u.selected&&m.off("selected.gridpopupbtn").on("selected.gridpopupbtn",u.selected)}d&&setTimeout((function(){$("textarea, input",o).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",o).length&&(e.quickEditMode=!0)}),0)}else e.setActiveCell(o)})),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",(function(){t.rerender()})),$(window).on("resize.datagrid",(function(){var n=0;for(t.clearCache(),n=0;n<e.settings.columns.length;n++)e.columnWidth(e.settings.columns[n],n);(e.stretchColumnDiff>0||e.stretchColumnWidth>0)&&(e.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(e.stretchColumnDiff>0?"99%":"".concat(e.stretchColumnWidth,"px")))}))),this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",(function(t){e.triggerRowEvent("dblclick",t,!0)})),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody tr",(function(t){t.stopPropagation(),e.closePrevPopupmenu(),e.triggerRowEvent("contextmenu",t,!!e.settings.menuId);var n=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0};return!n()||!e.isSubscribedTo(t,"contextmenu")&&!n()||(t.preventDefault(),$(t.currentTarget).popupmenu({menuId:e.settings.menuId,eventObj:t,beforeOpen:e.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",(function(t,n){e.settings.menuSelected&&e.settings.menuSelected(t,n)})).off("close.gridpopuptr").on("close.gridpopuptr",(function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()})),!1)})),this.headerRow.off("mousemove.datagrid").on("mousemove.datagrid","th",(function(t){if(!e.dragging&&(e.currentHeader=$(t.target).closest("th"),e.currentHeader.hasClass("is-resizable"))){var n=e.currentHeader.closest(".header-detail"),i=n.length?parseInt(n.css("margin-left"),10):0,a=parseInt(e.currentHeader.position().left,10)-(i||0)+e.element.scrollLeft(),s=a+e.currentHeader.outerWidth(),r=t.pageX-a>s-t.pageX,o=0;o=r?s-5:a-5;var l=e.currentHeader.parent().find("th:visible").index(e.currentHeader);(0===l&&(D.isRTL()?r:!r)||l===e.visibleColumns().length)&&(o="-999"),D.isRTL()||r||(e.currentHeader=e.currentHeader.prevAll(":visible").not(".is-hidden").first()),D.isRTL()&&!r&&(e.currentHeader=e.currentHeader.nextAll(":visible").not(".is-hidden").first()),e.currentHeader.hasClass("is-resizable")&&(e.createResizeHandle(),e.resizeHandle[0].style.left="".concat(o,"px"),e.resizeHandle[0].style.cursor="")}})).off("contextmenu.datagrid").on("contextmenu.datagrid","th",(function(t){return!e.settings.headerMenuId||(t.preventDefault(),e.closePrevPopupmenu(),$(t.currentTarget).popupmenu({menuId:e.settings.headerMenuId,eventObj:t,attachToBody:!0,beforeOpen:e.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",(function(t,n){e.settings.headerMenuSelected(t,n)})).off("close.gridpopupth").on("close.gridpopupth",(function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()})),!1)})),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",(function(){var t=$(this);t.hasClass("is-checked")?(t.removeClass("is-checked").attr("aria-checked","false"),e.unSelectAllRows()):(t.addClass("is-checked").attr("aria-checked","true"),e.selectAllRows())})),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",(function(t){var n=t.target;$(n).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout((function(){var t=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&e.editor){if(t.is(".spinbox, .trigger, .code-block-actions")||!$(n).is(":visible"))return;if(t&&e.editor.className&&t.closest(e.editor.className).length>0)return;e.commitCellEdit()}}),150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||e.editor&&e.editor.input&&e.commitCellEdit()}))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")}))},isSubscribedTo:function(t,e){var n=$._data(this.element[0]).events;for(var i in n)if(i===e&&(1!==n[i].length||"datagrid"!==n[i][0].namespace))return!0;return!1},refreshSelectedRowHeight:function(){var t=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),e=t.find('[data-option="row-short"]'),n=t.find('[data-option="row-medium"]'),i=t.find('[data-option="row-normal"]');"short"===this.settings.rowHeight&&(e.parent().addClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(e.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),i.parent().removeClass("is-checked")),"normal"===this.settings.rowHeight&&(e.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))},appendToolbar:function(){var t=null,e="",i=null,a=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar)").length)t=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{t=$('<div class="toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(e=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),e||(e=t.find(".title")),t.append(e),this.settings.toolbar.results&&e.append('<span class="datagrid-result-count"></span>');var s=$('<div class="buttonset"></div>').appendTo(t);if(this.settings.toolbar.keywordFilter){var r=$('<label class="audible" for="gridfilter">'.concat(D.translate("Keyword"),"</label>")),o=$('<input class="searchfield" name="searchfield" placeholder="'.concat(D.translate("Keyword"),'" id="gridfilter">'));s.append(r),this.settings.toolbar.collapsibleFilter||o.attr("data-options",'{ "collapsible": false }'),s.append(o)}this.settings.toolbar.dateFilter&&s.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(D.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((i=$('<div class="more"></div>').insertAfter(s)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),t.addClass("has-more-button"));var l=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&l.append('<li><a href="#" data-option="personalize-columns">'.concat(D.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&l.append('<li><a href="#" data-option="reset-layout">'.concat(D.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&l.append('<li><a href="#" data-option="export-to-excel">'.concat(D.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.advancedFilter&&l.append('<li><a href="#">'.concat(D.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&l.append('<li><a href="#">'.concat(D.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(D.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&l.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(D.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-short">').concat(D.translate("Short"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(D.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-normal">').concat(D.translate("Normal"),"</a></li>")),!0===this.settings.toolbar.filterRow&&l.append("".concat('<li class="separator"></li><li class="heading">').concat(D.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(D.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(D.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(D.translate("ClearFilter"),"</a></li>")),"object"===n(this.settings.toolbar.filterRow)){var c='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(c+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(D.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(c+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(D.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(c+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(D.translate("ClearFilter"),"</a></li>")),l.append(c)}this.settings.toolbar.actions&&i.append(l),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(t):this.element.before(t)}if(t.find(".btn-actions").popupmenu().on("selected",(function(t,e){var n=e.attr("data-option");"row-short"!==n&&"row-medium"!==n&&"row-normal"!==n||a.rowHeight(n.substr(4)),"personalize-columns"===n&&a.personalizeColumns(),"reset-layout"===n&&a.resetColumns(),"export-to-excel"===n&&a.exportToCsv(),"show-filter-row"===n&&a.toggleFilterRow(),"run-filter"===n&&a.applyFilter(null,"menu"),"clear-filter"===n&&a.clearFilter()})),this.settings.initializeToolbar&&!t.data("toolbar")){var d=$.fn.parseOptions(t);this.settings.toolbar.fullWidth&&(d.rightAligned=!0),t.toolbar(d)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var h=t.find(".searchfield"),u=h.parent().find(".close.icon");h.off("keypress.datagrid").on("keypress.datagrid",(function(t){13!==t.keyCode&&"change"!==t.type||(t.preventDefault(),a.keywordSearch(h.val()))})),u.off("click.datagrid").on("click.datagrid",(function(){a.keywordSearch(h.val())}))}this.settings.toolbar&&this.settings.toolbar.contextualToolbar&&(this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")),this.toolbar=t,this.element.addClass("has-toolbar")}},rowHeight:function(t){var e=[];return t&&(this.settings.rowHeight!==t&&e.push({before:this.settings.rowHeight,after:t}),this.settings.rowHeight=t),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("short-rowheight medium-rowheight normal-rowheight").addClass("".concat(this.settings.rowHeight,"-rowheight")),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===t?40:"medium"===t?30:25),this.saveUserSettings(),this.refreshSelectedRowHeight(),e.length&&this.element.triggerHandler("rowheightchanged",e),this.settings.rowHeight},keywordSearch:function(t){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each((function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")})),this.element.find(".search-mode").each((function(){var t=$(this),e=t.text();t.text(e.replace("<i>","").replace("</i>",""))})),t=(t||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:t,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(t)},setSearchActivePage:function(t){if(this.pagerAPI){var e=this;t||(t={}),this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?t.activePage=this.pagerAPI.filteredActivePage||1:""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(t=n(t)):this.restoreActivePage||(t=n(t),this.restoreActivePage=!1),t.activePage=this.activePage,this.renderPager(t)}function n(t){return t.activePage=1,e.grandTotal&&(t.grandTotal=e.grandTotal),t}},filterKeywordSearch:function(){var t,e,n,i,a=this,s=a.filterExpr,r=function(t,e){var n=!1,i=function(n){var i=a.columnById(n)[0],r=a.fieldValue(t,i.field),o=a.settings.columns.indexOf(i);return a.formatValue(i.formatter,e,o,r,i,t,a).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(s.value)>-1};return"all"===s.column?a.element.find("th:visible").each((function(){var t=$(this).attr("data-column-id");if(n=i(t))return!1})):s.columnId&&(n=i(s.columnId)),n};if(s&&1===s.length)if(s=s[0],a.settings.treeGrid)for(n=0,i=(t=a.settings.treeDepth).length;n<i;n++)e=""!==s.value&&!r(t[n].node,n),t[n].node._isFilteredOut=e;else for(n=0,i=(t=a.settings.dataset).length;n<i;n++)e=""!==s.value&&!r(t[n],n),t[n]._isFilteredOut=e},highlightSearchRows:function(t){var e=this,n=this;t&&""!==t&&n.tableBody.find("tr").toArray().forEach((function(i){var a=n.rowNodes(i.getAttribute("aria-rowindex")-1),s=function(i){var a=!1;return i.toArray().forEach((function(i){[].slice.call(i.querySelectorAll("td")).forEach((function(i){var s=i.innerText.toLowerCase(),r=!!n.settings.searchExpandableRow||!l.hasClass(e,"datagrid-expandable-row");s.indexOf(t)>-1&&r&&(a=!0,[].slice.call(i.querySelectorAll("*")).forEach((function(e){if(o.unescapeHTML(e.innerHTML)===e.textContent){var n=e.textContent,i=new RegExp("(".concat(k.escapeRegExp(t),")"),"gi");l.addClass(e,"search-mode"),l.html(e,n.replace(i,"<i>$1</i>"))}})))}))})),a}(a);s||a.find(".datagrid-row-detail").length?n.settings.searchExpandableRow&&s&&a.is(".datagrid-expandable-row")&&""!==t&&(a.prev().show(),a.prev().find(".datagrid-expand-btn").addClass("is-expanded"),a.prev().find(".plus-minus").addClass("active"),a.addClass("is-expanded").css("display","table-row"),a.find(".datagrid-row-detail").css("height","auto")):a.addClass("is-filtered").hide()}))},getActiveDataset:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;return t.groupable&&(e=this.originalDataset),e},getDataset:function(){return this.settings.dataset.map((function(t){return delete t._isFilteredOut,t}))},selectAllRows:function(){for(var t=[],e=this.getActiveDataset(),n=0,i=e.length;n<i;n++){var a=this.settings.groupable?n:this.pagingRowIndex(n);(this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch)&&e[n]._isFilteredOut||t.push(a)}this.dontSyncUi=!0,this.selectRows(t,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(t,e){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var n=this._selectedRows.length-1;n>=0;n--)if(this._selectedRows[n]){var i=this.settings.groupable?this._selectedRows[n].idx:this.pagingRowIndex(this._selectedRows[n].idx);this.unselectRow(i,!0,!0)}this.settings.dataset.map((function(t){delete t._selected})),this.dontSyncUi=!1,this._selectedRows=[],t||this.syncSelectedUI(),e||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map((function(t){delete t._selected}))},isRowSelected:function(t){return!!t&&!0===t._selected},selectNode:function(t,e,n,i){var a=null,s="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(n&&!this.isRowSelected(n)||i)&&(a=t.find(".datagrid-selection-checkbox").closest("td"),t.addClass(s).attr("aria-selected","true"),a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true").attr("aria-selected","true").attr("aria-label","Selected"),n&&(n._selected=!0))},selectRow:function(t,e,n){var i,a=this,s=null,r=this,o=this.settings;if(void 0!==t&&-1!==t&&o.selectable&&!this.isRowDisabled(t)&&(s=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),i=this.dataRowIndex(s),isNaN(i)&&(i=t),s&&(s.length||!o.source))){if("function"==typeof o.onBeforeSelect&&!n&&!1===o.onBeforeSelect({node:s,idx:i}))return;var l=function(t,e){return!!a._selectedRows.filter((function(n){return function(t,e,n){return n&&n.idx===t&&n.elem&&n.elem.is(e)}(t,e,n)})).length};if("single"===o.selectable){var c=-1;this._selectedRows.length>0?c=this._selectedRows[0].pagingIdx:s[0]&&s[0].classList.contains("is-selected")&&(c=i),-1!==c&&(this.unselectRow(c,!0,!0),!s.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var d=o.source&&"multiple"===o.selectable&&o.allowSelectAcrossPages;if(!s.hasClass("is-selected")||d){var h;if(o.treeGrid){var u=parseInt(s.attr("aria-level"),10);if(h=o.treeDepth[r.pagerAPI&&o.source?s.index():t].node,s.is(".datagrid-tree-parent")&&"multiple"===o.selectable)s.add(s.nextUntil('[aria-level="'.concat(u,'"]'))).each((function(t){var e=$(this),n=e.attr("aria-rowindex")-1,i=r.actualPagingRowIndex(n),a=o.treeDepth[i].node;if(o.selectChildren||!o.selectChildren&&0===t){var c=!e.is(s)&&!e.hasClass("is-selected");r.selectNode(e,n,a),c&&!l(i,e)&&r._selectedRows.push({idx:i,data:a,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.pagesize})}}));else if("siblings"===o.selectable){var p,f;this.unSelectAllRows(!0,!0),1===u?p=s.parent().find('[aria-level="1"]'):u>1&&(p=s.nextUntil('[aria-level="'.concat(u-1,'"]')).filter('[aria-level="'.concat(u,'"]')),f=s.prevUntil('[aria-level="'.concat(u-1,'"]')).filter('[aria-level="'.concat(u,'"]'))),s.add(p).add(f).each((function(t){var e=$(this),n=e.attr("aria-rowindex")-1,i=r.actualPagingRowIndex(n),a=o.treeDepth[i].node;if(o.selectChildren||!o.selectChildren&&0===t){var c=!e.is(s)&&!e.hasClass("is-selected");r.selectNode(e,n,a),c&&!l(i,e)&&r._selectedRows.push({idx:i,data:a,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.pagesize})}}))}else r.selectNode(s,t,h);r.setNodeStatus(s)}else{if(h=o.dataset[i],o.groupable){var g=r.actualPagingRowIndex(r.actualRowIndex(s));if(isNaN(g))return;var m=r.groupArray[g];l((h=r.settings.dataset[m.group].values[m.node]).idx,s)||this._selectedRows.push({idx:h.idx,data:h,elem:s,group:o.dataset[r.groupArray[g].group],page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:r.settings.pagesize})}r.selectNode(s,i,h),r.lastSelectedRow=t}if(!o.groupable){var v=r.actualPagingRowIndex(t);-1===v&&(v=t),l(v,r.visualRowNode(v))||this._selectedRows.push({idx:v,data:h,elem:r.visualRowNode(v),page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:t,pagesize:r.settings.pagesize})}}e||r.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(t){t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++)this.selectRow(e);this.displayCounts()},syncHeaderCheckbox:function(t){if(0!==this.headerNodes().length){var e=this.headerNodes().find(".datagrid-checkbox"),n=t.length,i=this._selectedRows.length,a=e.data("selected");this.settings.source&&this.settings.allowSelectAcrossPages&&(i=this.settings.dataset.filter((function(t){return t._selected})).length),i!==n&&i>0&&"partial"===a||i===n&&"all"===a&&0!==i||0===i&&"none"===a||(i>0&&e.data("selected","partial").addClass("is-checked is-partial"),i===n&&e.data("selected","all").addClass("is-checked").removeClass("is-partial"),0===i&&e.data("selected","none").removeClass("is-checked is-partial"))}},syncSelectedRows:function(){for(var t=this,e=this.settings,n=e.groupable&&this.originalDataset?this.originalDataset:e.dataset,i=null,a=function(a){var s=e.groupable?t.dataRowNode(i):t.visualRowNode(i);s[0]&&(t._selectedRows[a].elem=s,t.selectNode(s,i,n[i],!0))},s=0;s<this._selectedRows.length;s++)this.pagerAPI&&this._selectedRows[s].page===this.pagerAPI.activePage&&(i=this._selectedRows[s].idx,a(s)),this._selectedRows[s].pagesize===e.pagesize||e.groupable||(e.dataset[i=this._selectedRows[s].pagingIdx]?(a(s),this._selectedRows[s].idx=i,this._selectedRows[s].page=this.pagerAPI.activePage,this._selectedRows[s].pagesize=e.pagesize):(this._selectedRows[s].idx=i%e.pagesize,this._selectedRows[s].page=Math.round(i/e.pagesize)+1,this._selectedRows[s].pagesize=e.pagesize))},calculatePagerInfo:function(t,e,n){for(var i=this.settings,a={idx:t,page:1,pagesize:n="number"==typeof n&&n>0?n:i.pagesize,numOfPages:Math.ceil((e||i.treeGrid?i.treeDepth:i.dataset).length/n)},s=0;s<a.numOfPages;s++){if(t>=(a.page-1)*a.pagesize&&t<a.page*a.pagesize){a.pagingIdx=t-a.pagesize*s;break}a.page++}return a},syncSelectedRowsIdx:function(){var t=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset;if(0!==this._selectedRows.length&&0!==t.length){this._selectedRows=[];for(var e=0;e<t.length;e++)if(t[e]._selected){var n={idx:e,data:t[e],elem:this.dataRowNode(e),pagingIdx:e,pagesize:this.settings.pagesize};if(this.settings.groupable){var i=this.rowNodesByDataIndex(e);if(i.length){var a=this.actualPagingRowIndex(this.actualRowIndex(i)),s=this.groupArray[a].group;n.group=this.settings.dataset[s],n.page=this.calculatePagerInfo(s).page}}else n.page=this.calculatePagerInfo(e).page;this._selectedRows.push(n)}}},syncSelectedUI:function(){var t=this.getActiveDataset(),e=t;if(this.filterRowRendered){e=[];for(var n=0,i=t.length;n<i;n++)t[n]._isFilteredOut||e.push(n)}this.syncHeaderCheckbox(e),1!==this.contextualToolbar.length||this.dontSyncUi||(0===this._selectedRows.length&&this.contextualToolbar.animateClosed(),this._selectedRows.length>0&&0===this.contextualToolbar.height()&&this.contextualToolbar.css("display","block").one("animateopencomplete.datagrid",(function(){$(this).triggerHandler("recalculate-buttons")})).animateOpen())},activateRow:function(t){this.activatedRow()[0].row!==t&&this.toggleRowActivation(t)},deactivateRow:function(){var t=this.activatedRow()[0].row;t>=0&&this.toggleRowActivation(t)},activatedRow:function(){var t=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var e=this.settings,n=e.treeGrid?e.treeDepth:e.dataset,i=this.tableBody.find("tr.is-rowactivated");if(i.length){var a=this.dataRowIndex(i),s=e.indeterminate?a:this.actualRowIndex(i);t=[{row:s,item:n[s],elem:i}]}else{t=null;for(var r=0;r<n.length;r++)if(n[r]._rowactivated){t=[{row:r,item:n[r],elem:void 0}];break}null===t&&(t=[{row:-1,item:void 0,elem:i}])}}return t},toggleRowActivation:function(t){var e,n,i,a=this.settings,s=a.treeGrid?a.treeDepth:a.dataset;"number"==typeof t?(e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(t+1,'"]')),i=t,this.pagerAPI&&a.source&&a.indeterminate&&(e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(t+(this.pagerAPI.activePage-1)*a.pagesize+1,'"]')))):(e=(n=t instanceof jQuery?t:$(t))[0],i=a.treeGrid||a.groupable?this.actualRowIndex(n):this.dataRowIndex(n)),a.indeterminate&&!e&&(e=(n=this.actualRowNode(i))[0]),s[i]&&s[i]._rowactivated?this.deactivateRowNode(i,s):(this.deactivateAllRowNodes(s),this.activateAllRowNodes(i,s))},activateAllRowNodes:function(t,e){var n=this;if(!("number"!=typeof t||t<0)){var i=this.settings;void 0===e&&(e=i.treeGrid?i.treeDepth:i.dataset);var a=[{row:t,item:e[t]}];e[t]&&$.when(this.element.triggerHandler("beforerowactivated",a)).done((function(i){var s;"string"==typeof(s=i)&&"false"===s.toLowerCase()||"boolean"==typeof s&&!1===s||"number"==typeof s&&0===s||(n.rowNodes(t).toArray().forEach((function(t){t.classList.add("is-rowactivated")})),e[t]._rowactivated=!0,n.element.triggerHandler("rowactivated",a=[{row:t,item:e[t]}]))}))}},deactivateRowNode:function(t,e){if(!("number"!=typeof t||t<0)){var n=this.settings;void 0===e&&(e=n.treeGrid?n.treeDepth:n.dataset),e[t]&&!n.disableRowDeactivation&&(this.rowNodes(t).toArray().forEach((function(t){t.classList.remove("is-rowactivated")})),delete e[t]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:t,item:e[t]}]))}},deactivateAllRowNodes:function(t){var e=this.settings,n=null;void 0===t&&(t=e.treeGrid?e.treeDepth:e.dataset);var i=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(i.length>0){i.forEach((function(t){t.classList.remove("is-rowactivated")}));var a=e.treeGrid||e.groupable?this.actualRowIndex($(i)):this.dataRowIndex($(i));n={row:a,item:t[a]},t[a]&&delete t[a]._rowactivated}else for(var s=0;s<t.length;s++){var r=t[s];if(r._rowactivated){delete r._rowactivated,n={row:s,item:r};break}}null!==n&&this.element.triggerHandler("rowdeactivated",[n])},toggleRowSelection:function(t){var e="number"==typeof t?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):t,n="single"===this.settings.selectable,i="number"==typeof t?t:this.actualRowIndex(e);if(this.settings.groupable&&(i=this.dataRowIndex(e)),!(!1===this.settings.selectable||this.editor&&e.hasClass("is-selected")))return n&&e.hasClass("is-selected")?(this.unselectRow(i),this.displayCounts(),this._selectedRows):(e.hasClass("is-selected")?this.unselectRow(i):this.selectRow(i),this.displayCounts(),this._selectedRows)},unselectRow:function(t,e,n){var i=this,a=i.settings,s=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),r=a.source&&"multiple"===a.selectable&&a.allowSelectAcrossPages;if(s&&void 0!==t){var o=function(t,e){var n=function(n,a){delete n._selected,void 0===a&&(a=e);for(var s=0;s<i._selectedRows.length;s++)if(i._selectedRows[s].idx===a){if(r&&i._selectedRows[s].elem&&!i._selectedRows[s].elem.is(t))continue;i._selectedRows.splice(s,1);break}};if(i.cellNode(t,i.columnIdxById("selectionCheckbox")),t.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==i.columnIdxById("selectionCheckbox")&&i.cellNode(t,i.columnIdxById("selectionCheckbox")).find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").attr("aria-checked","false").removeAttr("aria-selected").removeAttr("aria-label"),a.treeGrid)for(var s=0;s<a.treeDepth.length;s++)i.isRowSelected(a.treeDepth[s].node)&&(void 0!==e?e===a.treeDepth[s].idx-1&&n(a.treeDepth[s].node):n(a.treeDepth[s].node));else{var o,l=t.length?i.dataRowIndex(t):e;void 0!==l&&l>-1&&(o=a.dataset[l]),a.groupable&&(o=i.originalDataset[l]),void 0!==o&&(a.paging&&a.source?n(o,l):n(o))}};if(a.treeGrid){var l=parseInt(s.attr("aria-level"),10);if(s.is(".datagrid-tree-parent")&&"multiple"===a.selectable)s.add(s.nextUntil('[aria-level="'.concat(l,'"]'))).each((function(t){var e=$(this),n=e.attr("aria-rowindex")-1,s=i.actualPagingRowIndex(n);(a.selectChildren||!a.selectChildren&&0===t)&&o(e,s)}));else if("siblings"===a.selectable)s.parent().find(".is-selected").each((function(t){var e=$(this),n=e.attr("aria-rowindex")-1,s=i.actualPagingRowIndex(n);(a.selectChildren||!a.selectChildren&&0===t)&&o(e,s)}));else{var c=i.actualPagingRowIndex(t);o(s,c)}i.setNodeStatus(s)}else o(s,t);e||i.syncSelectedUI(),n||i.element.triggerHandler("selected",[i._selectedRows,"deselect"])}},setNodeStatus:function(t){var e,n=this,i="multiple"===n.settings.selectable,a=n.settings,s=n.cellNode(t,n.columnIdxById("selectionCheckbox"));if(!i)return s.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),void(t.is(".is-selected")&&s.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"));var r=function(t,e){t.each((function(){var t=$(this),i=n.cellNode(t,n.columnIdxById("selectionCheckbox")),a=n.getSelectedStatus(t,e);i.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),"mixed"===a?i.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"):a&&i.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true")}))};e=t.add(t.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),a.selectChildren&&r(e),e=t,+t.attr("aria-level")>1&&(e=e.add(t.prevUntil('[aria-level="1"]')).add(t.prevAll('[aria-level="1"]:first'))),e=e.filter(".datagrid-tree-parent"),a.selectChildren&&r(e)},getSelectedStatus:function(t){var e=this.settings,n=0,i=0,a=0,s=t.add(t.nextUntil('[aria-level="1"]'));if(e.treeGrid&&"multiple"===e.selectable){var r=t.attr("aria-level");s=t.add(t.nextUntil('[aria-level="'.concat(r,'"]')))}return s.each((function(){n++,$(this).is(".is-selected")?i++:a++})),n===i||n!==a&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(t,e,n){var i=-1,a=this.settings,s="single"===a.selectable,r="multiple"===a.selectable||"mixed"===a.selectable,o="siblings"===a.selectable,l=this.getActiveDataset();if("number"==typeof t&&(t=[t]),!t||0===t.length)return this._selectedRows;if(s&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),i="[object Array]"===Object.prototype.toString.call(t)?t[0]:t.index(),this.selectRow(i,!0,!0)),r||o)if("[object Array]"===Object.prototype.toString.call(t)){for(var c=0;c<t.length;c++)this.selectRow(t[c],!0,!0);if(0===t.length)for(var d=0,h=l.length;d<h;d++)this.unselectRow(d,!0,!0)}else this.selectRow(t.index(),!0,!0);return this.displayCounts(),e||this.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(t,e){for(var n=this.settings,i=this.getActiveDataset(),a=-1,s=[],r=0;r<i.length;r++)if(n.groupable)for(var o=0;o<i[r].values.length;o++)a++,i[r].values[o][t]===e&&s.push(a);else(n.treeGrid?i[r].node:i[r])[t]===e&&s.push(r);return s},rowStatus:function(t,e,n){var i=this.getActiveDataset();if(!e)return delete i[t].rowStatus,void this.updateRow(t);if(!/dirty/.test(e)&&i[t]){i[t].rowStatus={};var a=i[t].rowStatus;a.icon=e,e=(e=e.charAt(0).toUpperCase()+e.slice(1)).replace("-progress","Progress"),a.text=D.translate(e),n=n?n.charAt(0).toUpperCase()+n.slice(1):a.text,a.tooltip=n,this.updateRow(t),this.setupTooltips(!0)}},columnById:function(t){return $.grep(this.settings.columns,(function(e){return e.id===t}))},columnIdxById:function(t){for(var e=this.settings.columns,n=-1,i=0;i<e.length;i++)if(e[i].id===t){n=i;break}return n},handleKeys:function(){var t=this,e=this,n="multiple"===e.settings.selectable,i=$("th .datagrid-checkbox",e.headerRow);e.element.on("keydown.datagrid","th",(function(t){var i,a=t.which||t.keyCode||t.charCode||0,s=$(this),r=e.columnIdxById(s.attr("data-column-id")),o=e.visibleColumns().length-1;$(t.target).closest(".popupmenu").length>0||(13!==a&&32!==a||((n&&0===r?$(".datagrid-checkbox",s):s).trigger("click.datagrid").focus(),32===a&&t.preventDefault()),-1!==[35,36,37,39].indexOf(a)&&(i=/35|36/i.test(a)||(t.ctrlKey||t.metaKey)&&/37|39/i.test(a)?D.isRTL()?36===a||(t.ctrlKey||t.metaKey)&&37===a?o:0:35===a||(t.ctrlKey||t.metaKey)&&39===a?o:0:D.isRTL()?39===a?r>0?r-1:r:r<o?r+1:o:37===a?r>0?r-1:r:r<o?r+1:o,e.activeCell.cell=i,s.removeAttr("tabindex").removeClass("is-active"),$("th:not(.is-hidden)",this.headerContainer).eq(i).attr("tabindex","0").addClass("is-active").focus(),t.preventDefault()),40===a&&(s.removeAttr("tabindex"),e.activeCell.node=e.cellNode(0,e.settings.groupable?0:e.activeCell.cell).attr("tabindex","0").focus(),t.preventDefault()))})),e.element.on("keydown.datagrid","td, input",(function(n){var i=!1;if(113!==(n.which||n.keyCode||n.charCode||0)||t.inlineMode||(e.settings.actionableMode=!e.settings.actionableMode,i=!0),i)return n.preventDefault(),n.stopPropagation(),i})),e.element.on("keydown.datagrid","td",(function(t){var a=t.which||t.keyCode||t.charCode||0,s=!1,r=$(t.target),o=D.isRTL(),l=e.activeCell.node,c=$(this).parent(),d=c.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),h=c.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),u=e.activeCell.row,p=e.activeCell.cell,f=e.columnSettings(p),g=c.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),m=e.settings.dataset[e.dataRowIndex(c)],v=e.tableBody.find("tr:visible"),b=function(t){var n=v.filter('[aria-rowindex="'.concat(t+1,'"]'));return n.is(".datagrid-rowgroup-header")?n.index():e.dataRowIndex(n)};l.length||(e.activeCell.node=e.cellNode(u,p),l=e.activeCell.node);var y=function(t,n,i){if(g)return function(t,n,i){var a=e.activeCell.groupNode||l;return t+(i?-1:1)>n?i?a.prevAll(":visible").last():a.nextAll(":visible").last():i?a.prevAll(":visible").first():a.nextAll(":visible").first()}(t,n,i);var a=t+(i?-1:1);if(a>n)return n;for(;e.settings.columns[a]&&e.settings.columns[a].hidden;)a=i?a-1:a+1;return a},w=!!$(".datagrid-selection-checkbox",l).length,x=v.last(),C=e.settings.columns.length-1;if(e.settings.onKeyDown){var k=function(e){e||(t.stopPropagation(),t.preventDefault())};if(!1===e.settings.onKeyDown(t,{activeCell:e.activeCell,row:u,cell:p},k)||!k)return t.stopPropagation(),void t.preventDefault()}if(-1!==[9,37,38,39,40].indexOf(a)){if(r.closest(".code-block").length&&(9!==a||!t.shiftKey||0!==e.getFocusables(l).index))return;if(9!==a){if(r.is(".code-block-actions"))return;if(r.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))return}}if(-1!==[9,37,39].indexOf(a)){if(9===a&&!e.settings.actionableMode)return;if(9!==a&&t.altKey)e.setActiveCell(u,p=37===a&&!o||39===a&&o?0:C);else if(!e.quickEditMode||9===a){if(9===a&&t.shiftKey&&r.is(".code-block-actions")?e.focusNextPrev("prev",l):p=!o&&(37===a||9===a&&t.shiftKey)||o&&(39===a||9===a)?y(p,C,!0):y(p,C),-1===p&&!e.settings.actionableMode)return;if(-1===p&&e.settings.actionableMode&&(p=C,-1==--u))return;if(p===C&&C===e.activeCell.cell&&e.settings.actionableMode&&(p=0,++u===e.visibleRowCount))return;p instanceof jQuery?e.setActiveCell(p):e.setActiveCell(u,p),e.settings.actionableMode&&(e.makeCellEditable(e.activeCell.rowIndex,p,t),e.containsTextField(l)&&e.containsTriggerField(l)&&(e.quickEditMode=!0)),e.quickEditMode=!1,s=!0}}if(38===a&&!e.quickEditMode)if(t.altKey||t.metaKey){var T=b(0);e.setActiveCell(T,p),s=!0}else{if(0===u&&!d.is(".datagrid-rowgroup-header"))return l.removeAttr("tabindex"),void e.element.find("th").eq(p).attr("tabindex","0").focus();e.setActiveCell(d,p),s=!0}if(40!==a||e.quickEditMode||(t.altKey||t.metaKey?(e.setActiveCell(x,p),s=!0):(e.setActiveCell(h,p),s=!0)),32===a&&t.ctrlKey&&l){var S="";(u=l.closest("tr")).children().each((function(){var t=$(this);S+="".concat(t.text()," ")})),$("body").toast({title:"",audibleOnly:!0,message:S}),s=!0}if(36===a&&(e.setActiveCell(u,0),s=!0),35===a&&(e.setActiveCell(u,C),s=!0),34===a&&(e.setActiveCell(x,p),s=!0),33===a&&(e.setActiveCell(b(0),p),s=!0),32===a&&(!e.settings.editable||w)){if(u=l.closest("tr"),1===r.closest(".datagrid-row-detail").length)return;t.preventDefault();var A=r.find(".datagrid-expand-btn, .datagrid-drilldown");if(A&&A.length)return A.trigger("click.datagrid"),void t.preventDefault();n&&t.shiftKey?e.selectRowsBetweenIndexes([e.lastSelectedRow,u.attr("aria-rowindex")-1]):e.toggleRowSelection(u)}if(e.settings.editable&&32===a&&(e.editor||e.makeCellEditable(e.activeCell.rowIndex,p,t)),13===a&&l.is(".has-btn-actions")){var E=l.find(".btn-actions");E.length&&E.trigger("click")}if(13===a&&f.click&&"function"==typeof f.click&&(l.hasClass("is-cell-readonly")||f.click(t,[{row:u,cell:p,item:m,originalEvent:t}])),e.settings.editable&&13===a){if(r.is("textarea")&&t.shiftKey)return;if(r.is(".btn-menu")||r.closest(".popupmenu.is-open").length)return;e.editor?(e.quickEditMode=!1,e.commitCellEdit(),e.setNextActiveCell(t)):(e.makeCellEditable(e.activeCell.rowIndex,p,t),e.containsTextField(l)&&e.containsTriggerField(l)&&(e.quickEditMode=!0)),s=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(a)||t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||!e.settings.editable||e.editor||e.makeCellEditable(e.activeCell.rowIndex,p,t),n&&!e.editor&&(t.ctrlKey||t.metaKey)&&65===a&&(i.addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),e.selectAllRows(),s=!0),s)return t.preventDefault(),t.stopPropagation(),!1}))},getFocusables:function(t){var e=$(":focusable",t);return{elements:e,index:e.index($(":focus"))}},focusNextPrev:function(t,e){if(e&&"string"==typeof t){t=t.toLowerCase();var n=this.getFocusables(e),i=n.elements,a=i.length,s=n.index;/\b(next|prev)\b/g.test(t)&&i.eq(s="next"===t?s+1>=a?0:s+1:s-1<0?a:s-1).focus()}},containsTextField:function(t){var e,n=["image","button","submit","reset","checkbox","radio"],i="textarea, input",a=n.length;for(i+=a?":not(":"",e=0;e<a;e++)i+="[type=".concat(n[e],"],");return i=a?"".concat(i.slice(0,-1),")"):"",!!$(i,t).length},containsTriggerField:function(t){return!$(".dropdown, .datepicker, .lookup",t).length},isRowDisabled:function(t){return!(!this.settings.isRowDisabled||"function"!=typeof this.settings.isRowDisabled||"true"!==this.rowNodes(t).attr("aria-disabled"))},isCellEditable:function(t,e){if(!this.settings.editable)return!1;var n=this.columnSettings(e);if(n.readonly)return!1;if(this.isRowDisabled(t)||!this.activeCell.node)return!1;var i=this.activeCell.node.find(".datagrid-cell-wrapper"),a=i.text()?i.text():this.fieldValue(this.settings.dataset[t],n.field);if(n.isEditable){var s=this.settings.dataset[t];if(this.settings.treeDepth&&this.settings.treeDepth[t]&&(s=this.settings.treeDepth[t].node),!n.isEditable(t,e,a,n,s,this,"is-editable"))return!1}return!!n.editor},makeCellEditable:function(t,e,n){if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var i=this.activeCell.node.find(".datagrid-cell-wrapper"),a=i.parent("td"),s=$(".datagrid-tree-node",i).length>0,r=$(".datagrid-expand-btn",i).length>0;if(a.hasClass("is-editing")||a.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var l=this.columnSettings(e);if(!l.editor)return 32!==n.keyCode||$(n.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var c=this.actualRowNode(t),d=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(c)):this.dataRowIndex(c),h=this.rowData(d),u=$(".is-editor",a).length>0,p=$(".is-placeholder",i).length>0,f=i.text()?i.text():this.fieldValue(h,l.field);if((u||p)&&(f=this.fieldValue(h,l.field)),!this.isCellEditable(d,e))return!1;if((r||s)&&(r&&(f=$("> span",i).text()),"string"==typeof f&&(f=f.replace(/^\s/,""))),l.inlineEditor?a.addClass("is-editing-inline"):(u&&i.css({position:"static",height:i.outerHeight()}),a.addClass("is-editing"),i.empty()),f=o.sanitizeConsoleMethods(f),this.element.triggerHandler("beforeentereditmode",[{row:d,cell:e,item:h,target:i,value:f,column:l,editor:this.editor}]),1===this.visibleColumns().length&&a.addClass("has-singlecolumn"),this.editor=new l.editor(d,e,f,i,l,n,this,h),this.editor.row=d,this.editor.cell=e,this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(f=this.fieldValue(h,l.field)),this.editor.val(f),this.settings.showDirty){var g=f;""===g&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(g=!1),this.addToDirtyArray(d,e,{originalVal:g,isDirty:!1})}return this.editor.focus(),this.element.triggerHandler("entereditmode",[{row:d,cell:e,item:h,target:i,value:f,column:l,editor:this.editor}]),!0}},rowData:function(t){return this.settings.groupable?this.originalDataset[t]:this.settings.treeGrid?this.settings.treeDepth[t].node:this.settings.dataset[t]},commitCellEdit:function(t){if(this.editor){var e,n,i,a,s=this.editor.input,r=this.getEditorName(this.editor),l="editor"===r,c="fileupload"===r,d=!s.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");"function"==typeof this.editor.val&&(e=this.editor.val()),l?n=this.editor.td:c?("clear"===this.editor.status?e="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(e=this.editor.originalValue),n=this.tableBody.find("#".concat(s.attr("id"))).closest("td"),e=o.escapeHTML(e)):(n=s.closest("td"),e=o.escapeHTML(e)),null!==this.settings.source&&d?(i=this.activeCell.rowIndex,a=this.activeCell.dataRow):(i=this.actualRowIndex(n.parent()),a=this.dataRowIndex(n.parent()));var h=n.attr("aria-colindex")-1,u=this.columnSettings(h),p=this.settings.treeGrid?this.settings.treeDepth[a].node:this.getActiveDataset()[a],f=this.fieldValue(p,u.field);if(u.beforeCommitCellEdit&&!t&&!1===u.beforeCommitCellEdit({cell:h,row:a,item:p,editor:this.editor,api:this}))return;if(this.editor){f=o.sanitizeConsoleMethods(f),e=o.sanitizeConsoleMethods(e);var g=n.hasClass("is-editing-inline");n.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?a:i,h,e,!1,g);var m=this.fieldValue(p,u.field);this.element.triggerHandler("exiteditmode",[{row:i,cell:h,item:p,target:n,value:m,oldValue:f,column:u,editor:this.editor}])}}},validateCell:function(t,e){var n,i,a=this,s=this,r=this.columnSettings(e);if(r.validate){var o,l,c=[],d=r.validate.split(" "),h=$.fn.validation,u=this.fieldValue(this.settings.dataset[t],r.field),p=[],f="";for(l=0;l<d.length;l++){var g=h.rules[d[l]],m={row:t,cell:e,item:this.settings.dataset[t],column:r,grid:s};o=$.Deferred(),g.async?g.check(u,$("<input>").val(u),m,v,o):v(g.check(u,$("<input>").val(u),m),!0,d[l],o),c.push(o)}(n=$).when.apply(n,c).then((function(){var n=$.fn.validation.ValidationTypes;for(var o in n)if(f="",p[(i=n[o]).type]&&(f=p[i.type]),""!==f){s.showCellError(t,e,f,i.type);var l=a.dataRowNode(t);s.element.trigger("cell".concat(i.type),{row:t,cell:e,message:f,target:a.cellNode(l,e),value:u,column:r})}else s.clearCellError(t,e,i.type)}))}function v(t,e,n,a){var s=h.rules[n];i=$.fn.validation.ValidationTypes[s.type]||$.fn.validation.ValidationTypes.error,f="",p[i.type]&&(f=p[i.type]),!t&&e&&(f?(f=(/^\u2022/.test(f)?"":"â¢ ")+f,f+="<br/>".concat("â¢ ",s.message)):f=s.message,p[i.type]=f),a.resolve()}},showCellError:function(t,e,n,i){var a=this.dataRowNode(t),s=this.cellNode(a,e);if(this.clearNonVisibleCellErrors(t,e,i),!s.length)return this.nonVisibleCellErrors.push({row:t,cell:e,message:n,type:i}),void this.showNonVisibleCellErrors();s.addClass(i).attr("data-".concat(i,"message"),n);var r=s.find(".icon-".concat(i));r.length||(s.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(i)],icon:i}))),r=s.find(".icon-".concat(i)),this.cacheTooltip(r,{forced:!0,placement:"bottom",content:n,isError:"error"===i||"dirtyerror"===i,wrapper:r}),this.setupTooltips(!1,!0))},showNonVisibleCellErrors:function(){var t=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove();else{var e=function(e){var n=$.fn.validation.ValidationTypes[e].type,i=$.grep(t.nonVisibleCellErrors,(function(t){return t.type===n}));t.showNonVisibleCellErrorType(i,n)};for(var n in $.fn.validation.ValidationTypes)e(n)}},showNonVisibleCellErrorType:function(t,e){var n,i,a,s,r=[],o=$.fn.validation.ValidationTypes[e]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(i=this.toolbar.parent().find(".table-errors")),0!==t.length){for(s=0;s<t.length;s++){var l=Math.floor((t[s].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(l,r)&&r.push(l)}for(s=0;s<r.length;s++)n="".concat((n?"".concat(n,"<br>"):"")+D.translate(o.pagingMessageID)," ").concat(r[s]);0===this.toolbar.parent().find(".table-errors").length&&(i=$('<div class="table-errors"></div>')),(a=i.find(".icon-".concat(e))).length||(i.append($($.createIcon({classes:["icon-".concat(e)],icon:e}))),a=i.find(".icon-".concat(e))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(i),this.cacheTooltip(a,{forced:!0,placement:"bottom",content:n,isError:"error"===e||"dirtyerror"===e,wrapper:a}),this.setupTooltips(!1,!0)}else i&&i.length&&(a=i.find(".icon-".concat(o.type)),this.hideTooltip(),i.find(".icon-".concat(o.type)).remove())},clearAllCellError:function(t,e){var n=$.fn.validation.ValidationTypes;for(var i in n)this.clearCellError(t,e,n[i].type)},clearCellError:function(t,e,n){this.clearNonVisibleCellErrors(t,e,n);var i=this.dataRowNode(t),a=this.cellNode(i,e);a.length&&this.clearNodeErrors(a,n)},clearNonVisibleCellErrors:function(t,e,n){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var i=this.toolbar.parent().find(".table-errors").find(".icon-".concat(n));i.length&&($.grep(this.nonVisibleCellErrors,(function(t){return t.type===n?t:""})).length||i.remove())}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(i){return i.row!==t||i.cell!==e||i.type!==n?i:""})),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(t){this.dataRowNode(t).removeClass("error alert rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(t,"","");for(var e=0;e<this.settings.columns.length;e++)this.clearAllCellError(t,e)},clearAllErrors:function(){for(var t=0,e=0;e<this.settings.dataset.length;e++){this.settings.dataset[e].rowStatus&&(delete this.settings.dataset[e].rowStatus,t++);for(var n=0;n<this.settings.columns.length;n++)this.clearAllCellError(e,n)}t>0&&this.render()},clearNodeErrors:function(t,e){(t=t instanceof jQuery?t[0]:t).classList.remove(e),t.removeAttribute("data-".concat(e,"message"));var n=t.querySelector(".icon-".concat(e));n&&(n.parentNode.removeChild(n),this.hideTooltip())},resetRowStatus:function(){for(var t=this.settings.dataset.filter((function(t){return t.rowStatus})),e=0;e<t.length;e++)delete t[e].rowStatus;t.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(t){(t=t instanceof jQuery?t[0]:t)&&[].slice.call(t.querySelectorAll(".is-dirty-cell")).forEach((function(t){t.classList.remove("is-dirty-cell")}))},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(t){if(this.settings.showDirty&&"number"==typeof t){var e=this.rowNodes(t);this.clearDirtyClass(e),this.dirtyArray&&(this.dirtyArray[t]=void 0)}},clearDirtyCell:function(t,e){this.settings.showDirty&&this.dirtyArray&&"number"==typeof t&&"number"==typeof e&&void 0!==this.dirtyArray[t]&&(this.cellNode(t,e).removeClass("is-dirty-cell"),this.dirtyArray[t][e]=void 0)},dirtyCells:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,n=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=e.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var r=0,o=s.length;r<o;r++){var l=s[r];void 0!==l&&l.isDirty&&n.push(t.treeGrid?e[i].node:e[i])}}return n},dirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,n=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=e.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var r=0,o=s.length;r<o;r++){var l=s[r];if(void 0!==l&&l.isDirty){n.push(t.treeGrid?e[i].node:e[i]);break}}}return n},getModifiedRows:function(t){for(var e=this.settings,n=e.treeGrid?e.treeDepth:e.dataset,i=[],a=0;a<n.length;a++){var s=e.treeGrid?n[a].node:n[a],r={row:a,data:s,cells:[]};if(this.isRowDirty(a)){r.type="dirty";for(var o=0;!t&&o<this.dirtyArray[a].length;o++){var l=this.dirtyArray[a][o];void 0!==l&&l.isDirty&&r.cells.push({row:a,col:o,cellData:l})}}void 0===s.rowStatus||"error"!==s.rowStatus.icon&&"in-progress"!==s.rowStatus.icon||(r.type="dirty"===r.type?["dirty",s.rowStatus.icon]:s.rowStatus.icon),void 0!==r.type&&i.push(t?s:r)}return i},showRowError:function(t,e,n){var i=n||"error";this.dataRowNode(t).addClass(n),this.rowStatus(t,i,e)},validateRow:function(t){if(t)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},validateAll:function(){for(var t=0;t<this.settings.dataset.length;t++)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},columnSettings:function(t){return this.settings.columns[t]||{}},coerceValue:function(t,e,n,i,a){var s;return n.serialize?s=n.serialize(t,e,n,i,a,this.settings.dataset[i]):(n.sourceFormat?s=t instanceof Date?D.parseDate(t,n.sourceFormat):D.formatDate(t,{pattern:n.sourceFormat}):"number"==typeof e&&t&&(s=D.parseNumber(t)),s)},updateCell:function(t,e,n){var i=this.columnSettings(e);void 0===n&&(n=this.fieldValue(this.settings.dataset[t],i.field)),this.updateCellNode(t,e,n,!0)},updateCellNode:function(t,e,n,i,a){var s,r=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),l=r.find("td").eq(e),c=this.settings.columns[e]||{},d="",h=c.formatter?c.formatter:this.defaultFormatter,u=$(".editor",l).length>0,p=this.settings.treeGrid,f=p?this.actualPagingRowIndex(this.actualRowIndex(r)):this.dataRowIndex(r);(null==f||isNaN(f))&&(f=t);var g=this.rowData(f);0===r.length&&this.settings.paging&&(l=(r=this.visualRowNode(t)).find("td").eq(e));var m=this.fieldValue(g,c.field);if((i||void 0===(s=this.coerceValue(n,m,c,t,e)))&&(s=n),r.length&&g&&!g.rowStatus){var v=r.find("svg.icon-rowstatus");v.length&&v.remove()}if(this.removeTooltipData(l),0===e&&g&&g.rowStatus){var b=l.find("svg.icon-rowstatus");if(r&&l[0]){for(var y=0;y<r.length;y++)r[y].classList.add("rowstatus-row-".concat(g.rowStatus.icon));l[0].classList.add("rowstatus-cell"),b.length||l.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat("success"===g.rowStatus.icon?"#icon-check":"#icon-exclamation",'"></use></svg>'))}if(g.rowStatus.tooltip){b=l.find("svg.icon-rowstatus");var w=g.rowStatus.icon;this.cacheTooltip(b,{forced:!0,placement:"right",content:g.rowStatus.tooltip,isError:"error"===w||"dirtyerror"===w,wrapper:l})}}if(s=o.unescapeHTML(s),c.field&&s!==m)if(c.field.indexOf(".")>-1){var x=g,C=c.field.split(".").length;c.field.split(".").forEach((function(t,e){e===C-1?x[t]=s:x=x[t]}))}else g[c.field]=s;var k=o.escapeHTML(s);if(d=this.formatValue(h,t,e,u?s:k,c,g),c.contentVisible&&(c.contentVisible(t,e,k,c,g)||(d="")),a||l.find(".datagrid-cell-wrapper").html(d),i||(this.validateCell(f,e),this.isDirtyCellUndefined(t,e)||(this.dirtyArray[t][e].value=n,this.dirtyArray[t][e].coercedVal=s,this.dirtyArray[t][e].escapedCoercedVal=o.escapeHTML(s),this.dirtyArray[t][e].cellNodeText=l.text(),this.dirtyArray[t][e].cell=e,this.dirtyArray[t][e].column=this.settings.columns[e],this.setDirtyCell(t,e))),this.settings.stretchColumnOnChange&&c){var T=this.calculateTextWidth(c);c.minWidth&&T<c.minWidth&&(T=c.minWidth),c.minWidth&&T>c.maxWidth&&(T=c.maxWidth),T>0&&T-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=T,this.stretchColumnDiff=0,this.setColumnWidth(c.id,T,!0))}if(m=o.sanitizeConsoleMethods(m),s=o.sanitizeConsoleMethods(s),(s=o.escapeHTML(s))!==m&&!i){var S={row:null!==this.settings.source?f:t,relativeRow:t,cell:e,target:l,value:s,oldValue:m,column:c};S.rowData=p&&this.settings.treeDepth[t]?this.settings.treeDepth[t].node:g,this.element.trigger("cellchange",S),this.wasJustUpdated=!0}},isRowDirty:function(t){var e=!1;if("number"==typeof t&&this.dirtyArray&&this.dirtyArray.length){var n=this.dirtyArray[t];if(void 0!==n)for(var i=0,a=n.length;i<a;i++){var s=n[i];if(void 0!==s&&s.isDirty){e=!0;break}}}return e},isCellDirty:function(t,e){return!this.isDirtyCellUndefined(t,e)&&this.dirtyArray[t][e].isDirty},addToDirtyArray:function(t,e,n){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[t]?(this.dirtyArray[t]=[],this.dirtyArray[t][e]=n):void 0===this.dirtyArray[t][e]&&(this.dirtyArray[t][e]=n)},setDirtyCell:function(t,e,n){var i=this.cellNode(t,e);n&&this.addToDirtyArray(t,e,n);var a=this.dirtyArray[t][e];a.originalVal===a.value||a.originalVal===a.coercedVal||a.originalVal===a.escapedCoercedVal||a.originalVal===a.cellNodeText?(this.dirtyArray[t][e].isDirty=!1,this.setDirtyIndicator(t,e,!1)):(this.dirtyArray[t][e].isDirty=!0,i[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(t,e,!0))},setDirtyIndicator:function(t,e,n,i){var a=this.cellNode(t,e);i&&this.addToDirtyArray(t,e,i),t<0||e<0||!a.length||(n?a[0].classList.add("is-dirty-cell"):a[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(t,e){return!(this.settings.showDirty&&"number"==typeof t&&"number"==typeof e&&t>-1&&e>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[t]&&void 0!==this.dirtyArray[t][e])},visualRowIndex:function(t){var e="tr:visible:not(.is-hidden, .datagrid-expandable-row)",n=this.tableBody.find(e).index(t);return-1===n&&this.tableBodyLeft&&(n=this.tableBodyLeft.find(e).index(t)),-1===n&&this.tableBodyRight&&(n=this.tableBodyRight.find(e).index(t)),n},visualRowNode:function(t){var e=t;return this.settings.paging&&this.settings.source&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(t)?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):$([])},actualRowNode:function(t){return this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodes:function(t){var e=this.element;return t instanceof jQuery&&(e=t.closest(".datagrid-container"),t=t.attr("aria-rowindex")-1),e.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodesByDataIndex:function(t){t instanceof jQuery&&(t=t.attr("data-index"));var e=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(t,'"]')):$(),n=this.tableBody.find('tr[data-index="'.concat(t,'"]')),i=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(t,'"]')):$();return $(n).add(e).add(i)},cellNode:function(t,e){var n=this.settings.groupable?this.rowNodesByDataIndex(t).find("td"):this.rowNodes(t).find("td");return n.eq(e>=n.length?n.length-1:e)},actualRowIndex:function(t){return t.attr("aria-rowindex")-1},pagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},actualPagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e-=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},dataRowNode:function(t){return this.tableBody.find('tr[data-index="'.concat(t,'"]'))},dataRowIndex:function(t){return parseInt(t.attr("data-index"),10)},setActiveCell:function(t,e){var n,i,a,s=this.activeCell,r=t,o=t instanceof jQuery&&t.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(t instanceof jQuery&&0===t.length||("number"==typeof t&&(n=t,r=this.tableBody.find("tr:visible").eq(t),i=this.actualRowIndex(r),a=this.dataRowIndex(r)),t instanceof jQuery&&t.is("td")&&((o=t.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(r=t.parent()),e=t.attr("aria-colindex")-1,n=this.visualRowIndex(t.parent()),i=this.actualRowIndex(t.parent()),a=this.dataRowIndex(t.parent()),r=t.parent()),t instanceof jQuery&&t.is("tr")&&(n=this.visualRowIndex(t),i=this.actualRowIndex(t),a=this.dataRowIndex(t),r=t),n<0||e<0))){s.node&&1===s.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),s.cell===e&&s.row===t||this.hideTooltip(),this.activeCell.node=this.cellNode(o||r?r:i>-1?i:n,e).attr("tabindex","0"),this.activeCell.node&&1===s.node.length?(this.activeCell.row=n,this.activeCell.cell=e,i=this.actualRowIndex(this.activeCell.node.parent()),a=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=s,(!$("input, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),o&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==a&&(this.activeCell.dataRow=a),void 0!==i&&(this.activeCell.rowIndex=i);var l=+r.find("td[colspan]").attr("colspan");if(o&&this.activeCell.node&&s.node&&!(t instanceof jQuery&&t.is("td"))&&(e<l?(r.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td[colspan]")):e>=l?(r.find("td").eq(e-l+1).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e-l+1)):(r.find("td").eq(e).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e))),o&&t instanceof jQuery&&t.is("td")&&(this.activeCell.cell=l-1+e,t.is("[colspan]")&&(this.activeCell.cell=e)),this.settings.cellNavigation){var c=this.headerNodes(),d=0;this.hasColSpans&&(d=0,c.eq(e).prevAll("[colspan]").each((function(t,e){var n=$(e).attr("colspan")-1;d+=n})),e-=d),c.removeClass("is-active"),c.eq(e).addClass("is-active")}this.activeCell.isFocused=!0;var h=this.settings.columns[e];h&&h.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",[{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell}])}},setNextActiveCell:function(t){var e=this;if("keydown"===t.type)if(this.settings.actionableMode){var n=13===t.keyCode?40:t.keyCode;if(32===n)return;setTimeout((function(){var t=$.Event("keydown.datagrid");t.keyCode=n,e.activeCell.node.trigger(t)}),0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(t,e){if(!(!e||e&&!e.length||t<0)){var n=this.settings.treeDepth[t].node;n.children=n.children||[];for(var i=0,a=(e=JSON.parse(JSON.stringify(e))).length;i<a;i++)n.children.push(e[i]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(t,e){this.settings.treeDepth[t].node.expanded=e},toggleChildren:function(t,e){if(!this.settings.groupable){var n=this,i=this.settings,a=this.rowNodes(e),s=a.find(".datagrid-expand-btn"),r=parseInt(a.attr("aria-level"),10),o=s.hasClass("is-expanded"),l=[{grid:n,row:e,item:a}];if(n.settings.treeDepth&&n.settings.treeDepth[e]&&(l[0].rowData=n.settings.treeDepth[e].node),a.hasClass("datagrid-tree-parent")&&($(t.target).is(s)||!n.settings.editable&&!n.settings.selectable)){var c=function(){a=n.rowNodes(e),s=a.find(".datagrid-expand-btn");var t=a.nextUntil('[aria-level="'.concat(r,'"]')),i=n.settings.treeGrid&&n.settings.source&&n.settings.paging?n.dataRowIndex(a):e;o?(a.attr("aria-expanded",!1),s.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(a.attr("aria-expanded",!0),s.addClass("is-expanded").find(".plus-minus").addClass("active")),n.setExpandedInDataset(i,!o),function t(e,i,a){e.nextUntil('[aria-level="'.concat(i,'"]')).each(a?function(){var t=$(this);parseInt(t.attr("aria-level"),10)>i&&t.addClass("is-hidden")}:function(){var e=$(this),a=parseInt(e.attr("aria-level"),10);if(a===i+1){if(!e.hasClass("is-filtered")&&(e.removeClass("is-hidden"),n.settings.frozenColumns)){var s=e.attr("aria-rowindex");n.tableBody.find('[aria-rowindex="'.concat(s,'"]')).removeClass("is-hidden")}if(e.is(".datagrid-tree-parent")){var r=e.find(".datagrid-expand-btn.is-expanded").length>0;r&&t(e,a,!r)}}})}(a,r,o),n.setAlternateRowShading(),l.children=t};$.when(n.element.triggerHandler(o?"collapserow":"expandrow",l)).done((function(t){var e=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};e(t)||("function"!=typeof i.onExpandChildren||o?"function"==typeof i.onCollapseChildren&&o?$.when(i.onCollapseChildren(l[0])).done((function(t){e(t)||c()})):c():$.when(i.onExpandChildren(l[0])).done((function(t){e(t)||c()})))}))}}},toggleRowDetail:function(t){var e=this,n=e.rowNodes(t);!n.length&&e.settings.paging&&(e.settings.rowTemplate||e.settings.expandableRow)&&(n=e.dataRowNode(t+=(e.pagerAPI.activePage-1)*e.settings.pagesize));var i=n.next(),a=n.find(".datagrid-expand-btn"),s=i.find(".datagrid-row-detail"),r=e.settings.dataset[e.dataRowIndex(n)];if(!n.hasClass("datagrid-tree-parent")){if(e.settings.allowOneExpandedRow&&null===e.settings.groupable){var o=e.tableBody.add(e.tableBodyLeft).add(e.tableBodyRight).find("tr.is-expanded"),l=o.prev().find(".datagrid-expand-btn"),c=o.prev(),d=e.actualRowNode(c),h=e.dataRowIndex(c);if(o.length&&i.index()!==o.index()){var u=o.find(".datagrid-row-detail");o.add(l).removeClass("is-expanded"),c.removeClass("is-rowactivated"),c.find(".plus-minus").removeClass("active"),u.animateClosed().on("animateclosedcomplete",(function(){o.removeClass("is-expanded"),e.element.triggerHandler("collapserow",[{grid:e,row:d,detail:u,item:e.settings.dataset[h]}])}));var p=o.prev().find(".btn-primary");p.length&&p.attr("class",p.attr("class").replace("btn-primary","btn-secondary"))}var f=!i.hasClass("is-expanded"),g=i.prev().find(f?".btn-secondary":".btn-primary");if(g.length>0&&c&&g){var m=g.attr("class")||"";g.attr("class",m.replace(f?"btn-secondary":"btn-primary",f?"btn-primary":"btn-secondary"))}}if(i.hasClass("is-expanded"))s.one("animateclosedcomplete",(function(){i.removeClass("is-expanded")})).animateClosed(),a.removeClass("is-expanded").find(".plus-minus").removeClass("active"),e.settings.allowOneExpandedRow&&n.removeClass("is-rowactivated"),e.element.triggerHandler("collapserow",[{grid:e,row:t,detail:s,item:r}]);else{i.addClass("is-expanded"),a.addClass("is-expanded").find(".plus-minus").addClass("active"),i.find(".constrained-width").css("max-width",this.element.outerWidth());var v=[{grid:e,row:t,detail:s,item:r}];if(e.element.triggerHandler("expandrow",v),e.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&n.addClass("is-rowactivated"),e.settings.onExpandRow?e.settings.onExpandRow(v[0],(function(t){t&&s.find(".datagrid-row-detail-padding").empty().append(t),e.adjustExpandRowHeight(s),s.animateOpen()})):(e.adjustExpandRowHeight(s),s.animateOpen()),e.settings.frozenColumns.expandRowAcrossAllCells&&e.frozenExpandRowAcrossAllCells(),e.settings.frozenColumns.left.length||e.settings.frozenColumns.right.length){var b={left:s.eq(0)[0],center:s.eq(1)[0],right:s.eq(2)[0]},y={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(y.theme).on(y.theme,(function(){e.frozenExpandRowSetHeight(b)})),e.element.off(y.rowheight).on(y.rowheight,(function(){e.frozenExpandRowSetHeight(b)}))}}}},adjustExpandRowHeight:function(t){if(t.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var e={left:t.eq(0)[0]?t.eq(0)[0].children[0]:null,center:t.eq(1)[0],right:t.eq(2)[0]?t.eq(2)[0].children[0]:null},n=0;e.center&&(e.center.style.height="auto",n=e.center.offsetHeight-1,e.center.style.height=""),n>0&&(e.left&&(e.left.style.height="".concat(n,"px")),e.right&&(e.right.style.height="".concat(n,"px")))}},frozenExpandRowSetHeight:function(t){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e=0;if(t&&t.center&&(t.padding=t.center.querySelector(".datagrid-row-detail-padding"),e=t.padding.offsetHeight),e&&(t.center.style.height="".concat(e,"px"),t.left&&(t.left.style.height="".concat(e,"px")),t.right&&(t.right.style.height="".concat(e,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var n={container:this.element[0].getBoundingClientRect(),centerEl:t.center.getBoundingClientRect()},i="".concat(n.centerEl.top-n.container.top,"px");t.padding.style.top=i}}},frozenExpandRowAcrossAllCells:function(){var t=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e={row:".datagrid-expandable-row.is-expanded"};e.detail="".concat(e.row," > td .datagrid-row-detail"),e.padding="".concat(e.detail," .datagrid-row-detail-padding");var n={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},i={rows:{left:n.left?n.left.querySelector(e.row):null,center:n.center?n.center.querySelector(e.row):null,right:n.right?n.right.querySelector(e.row):null},details:{left:n.left?n.left.querySelector(e.detail):null,center:n.center?n.center.querySelector(e.detail):null,right:n.right?n.right.querySelector(e.detail):null},padding:this.tableBody[0].querySelector(e.padding)};if(i.padding&&(i.details.left||i.details.right)){var a="is-expanded-frozen";i.padding.style.opacity="0",i.rows.left&&i.rows.left.classList.add(a),i.rows.right&&i.rows.right.classList.add(a),$(i.details.center).one("animateopencomplete.datagrid.expandedfrozen",(function(){(i.details.left||i.details.right)&&setTimeout((function(){i.rows.center.classList.add(a),t.frozenExpandRowSetHeight(i.details),i.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",(function(){t.frozenExpandRowSetHeight(i.details)}))}),10)})).one("animateclosedstart.datagrid.expandedfrozen",(function(){$(window).off("resize.datagrid.expandedfrozen"),i.padding.style.opacity="0",i.padding.style.top="",i.rows.center.classList.remove(a),i.rows.left&&i.rows.left.classList.remove(a),i.rows.right&&i.rows.right.classList.remove(a)})).one("animateclosedcomplete.datagrid.expandedfrozen",(function(){i.padding.style.opacity=""}))}}},toggleGroupChildren:function(t){if(this.settings.groupable){var e=t.index(),n=$(),i=$(),a=$();this.hasLeftPane&&(n=this.tableLeft.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header")),i=this.table.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(a=this.tableRight.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"));var s=t.find(".datagrid-expand-btn");t.hasClass("is-expanded")?(s.removeClass("is-expanded").find(".plus-minus").removeClass("active"),n.hide(),n.addClass("is-hidden"),i.hide(),i.addClass("is-hidden"),a.hide(),a.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:t.index(),detail:i,item:{}}]),t.removeClass("is-expanded")):(s.addClass("is-expanded").find(".plus-minus").addClass("active"),n.show(),n.removeClass("is-hidden"),i.show(),i.removeClass("is-hidden"),a.show(),a.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:t.index(),detail:i,item:{}}]),t.addClass("is-expanded"))}},setSortColumn:function(t,e){var n=!0;if(void 0!==e?(this.sortColumn.sortAsc===e&&this.sortColumn.sortId===t&&(n=!1),this.sortColumn.sortAsc=e):(this.sortColumn.sortAsc=this.sortColumn.sortId!==t||!this.sortColumn.sortAsc,e=this.sortColumn.sortAsc),this.sortColumn.sortId=t,this.sortColumn.sortField=this.columnById(t)[0]?this.columnById(t)[0].field:t,this.sortColumn.sortAsc=e,this.setSortIndicator(t,e),n&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),n){var i=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),i&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var t=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(t),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,i=e.length;n<i;n++)void 0!==this.dirtyArray[n]&&((t.treeGrid?e[n].node:e[n]).tempNodeIndex=n)},restoreDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var n=[],i=0,a=e.length;i<a;i++){var s=t.treeGrid?e[i].node:e[i];void 0!==s.tempNodeIndex&&(n.push({newIdx:i,oldIdx:s.tempNodeIndex}),delete s.tempNodeIndex)}for(var r=[],o=0,l=n.length;o<l;o++)r[n[o].newIdx]=this.dirtyArray[n[o].oldIdx];this.dirtyArray=r}},syncDatasetWithSelectedRows:function(){var t=this;this._selectedRows=[];for(var e,n=this.settings,i=n.treeGrid?n.treeDepth:n.dataset,a=-1,s=function(s,r){if(n.groupable&&!t.originalDataset)for(var o=0;o<Object.keys(i[s]).length;o++)a++,r=Object.keys(i[s]).map((function(t){return i[s][t]})),t.isRowSelected(r)&&t._selectedRows.push({idx:a,data:r,elem:t.dataRowNode(a),group:i[s],page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:a,pagesize:t.settings.pagesize});else t.isRowSelected(r=n.treeGrid?i[s].node:i[s])&&t._selectedRows.push({idx:s,data:r,elem:t.visualRowNode(s),pagesize:t.settings.pagesize,page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:s});e=r},r=0;r<i.length;r++)s(r,e)},setSortIndicator:function(t,e){this.headerRow&&(this.sortColumn={sortId:t,sortAsc:e,sortField:this.columnById(t)[0]?this.columnById(t)[0].field:t},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc").attr("aria-sort","none"),this.element.find('[data-column-id="'.concat(t,'"]')).addClass(e?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",e?"ascending":"descending"))},sortFunction:function(t,e){var i=this.columnById(t),a=0===i.length?null:i[0],s=null===a?t:a.field,r=this,o=function(t){return"string"==typeof(e=null==(e=r.fieldValue(t,s))?"":e)&&(e=e.toUpperCase(),$.isNumeric(e)&&(e=parseFloat(e))),e;var e};return a&&a.sortFunction&&(o=function(t){return a.sortFunction(r.fieldValue(t,s))}),e=e?1:-1,function(t,i){return t=o(t),i=o(i),n(t)!==n(i)&&(t=t.toString().toLowerCase(),i=i.toString().toLowerCase()),e*((t>i)-(i>t))}},isEquivalent:function(t,e){function n(t,e){return JSON.stringify(t)===JSON.stringify($.extend(!0,{},t,e))}return n(t,e)&&n(e,t)},defaultFormatter:function(t,e,n){return null==n||""===n?"":n.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(t,e,n){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,t.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(t,e),e||this.triggerSource(t,n),this.syncSelectedUI())},getPageableElements:function(){var t=this.element.children().not(".datagrid-expandable-row");return t.is("table")&&(t=t.find("tbody tr")),t},appendTooltip:function(t){var e=this,n=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof t?n.test(t)||(t+=" ".concat("grid-tooltip")):t="grid-tooltip";var i=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(i),!this.tooltip){var a=""+'<div id="'.concat(i,'" class="tooltip ').concat(t,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",a),this.tooltip=document.getElementById(i),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",(function(){e.hideTooltip()})))}},cacheTooltip:function(t,e){if(void 0===e){var n,i=t.querySelector(".is-editor.content-tooltip"),a=t.querySelector("a[title]"),s=b.hasClass(t,"rowstatus-cell"),r="svg"===t.tagName.toLowerCase(),l="th"===t.tagName.toLowerCase(),c=b.hasClass(t,"datagrid-column-wrapper"),d=b.hasClass(t.parentNode,"datagrid-filter-wrapper"),h=t.getAttribute("aria-colindex")-1,p=this.columnSettings(h);if(e={content:"",wrapper:t.querySelector(".datagrid-cell-wrapper")},(l||c||d)&&(e.wrapper=t,e.distance=d?15:null,e.placement=c?"top":"bottom"),s||r){var f=this.closest(t,(function(t){return b.hasClass(t,"datagrid-row")}));e.isError=(f?f.classList:[]).contains("rowstatus-row-error"),e.placement="right",r&&(e.wrapper=this.closest(t,(function(t){return"td"===t.tagName.toLowerCase()})))}if(i){var g=!(!p.editorOptions||!p.editorOptions.width)&&this.setUnit(p.editorOptions.width);i.style.width=g||"".concat(t.offsetWidth,"px");var m=e.wrapper.innerHTML;""!==o.stripHTML(m)&&(e.content=m,e.extraClassList=["popover","alternate","content-tooltip"])}else if(a)e.content=a.getAttribute("title"),a.removeAttribute("title");else if(n=t.getAttribute("title"))e.content=n,t.removeAttribute("title");else if(l&&!d){var v=t.querySelector(".datagrid-header-text");e.content=v?o.stripHTML(v.textContent):""}else if(d){if(!(t.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var y=t.parentNode.querySelector(".is-checked");e.content=y?o.stripHTML(y.textContent):""}}else e.content=o.stripHTML(e.wrapper.textContent);var w=e.wrapper.querySelector("select");if(w&&w.selectedIndex&&w.options[w.selectedIndex]&&w.options[w.selectedIndex].innerHTML&&(e.content=u.features.touch?"":w.options[w.selectedIndex].innerHTML.trim()),l&&(e.content=e.content.trim()),""!==e.content){var x=b.hasClass(c?t.parentNode:t,"text-ellipsis"),C=[].slice.call(t.querySelectorAll(".icon")),T=x?8:0;if(C.forEach((function(t){T+=t.getBBox().width+8})),x&&c){var S=t.querySelector(".datagrid-header-text");e.textwidth=S.scrollWidth+(w?0:T)}else e.textwidth=k.textWidth(e.content)+(w?0:T);l&&(e.textwidth=k.textWidth(e.content)),e.content=i?e.content:"<p>".concat(e.content,"</p>"),(n||d)&&(e.forced=!0)}if("function"==typeof p.tooltip){var A=this.closest(t,(function(t){return b.hasClass(t,"datagrid-row")})).getAttribute("data-index"),E=this.settings.dataset[A],D=this.fieldValue(this.settings.dataset[A],p.field);e.content=p.tooltip(A,h,D,p,E,this),e.textwidth=k.textWidth(e.content)+20}}return(t=t instanceof jQuery?t:$(t)).data("gridtooltip",e),e},showTooltip:function(t){var e=this;if(this.tooltip){var n=$(this.tooltip),i=this.tooltip.querySelector(".tooltip-content");if(i){i.innerHTML=t.content,this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(t.placement||"top"),t.isError&&this.tooltip.classList.add("is-error"),t.extraClassList&&t.extraClassList.map((function(t){return e.tooltip.classList.add(t)}));var a="number"==typeof t.distance?t.distance:10,s={x:0,y:a,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:t.wrapper.offsetLeft,containerOffsetY:t.wrapper.offsetTop,parent:$(t.wrapper),placement:t.placement||"top",strategies:["flip","nudge"]};"left"!==s.placement&&"right"!==s.placement||(s.x=a,s.y=0),n.data("place")||n.place(s),n.data("place").place(s),n.data("gridtooltip",!0),n.one("afterplace.gridtooltip",(function(t,n){e.handleAfterPlaceTooltip(t,n)})).on("click.gridtooltip",(function(){e.hideTooltip()})),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",(function(){e.hideTooltip()}))}}},handleAfterPlaceTooltip:function(t,e){var n=$("#tooltip");n[0]&&(n.data("place").setArrowPosition(t,e,n),n.triggerHandler("tooltipafterplace",[e]))},hideTooltip:function(){var t=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",(function(){t.hideTooltip()}))},isGridtooltip:function(){var t=!1;return this.tooltip&&(this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(t=!0),t},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("gridtooltip")&&$.removeData(t[0],"gridtooltip")},removeTooltip:function(){var t=this;if(this.tooltip){var e=$(this.tooltip),n={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};n.str="".concat(n.th,", ").concat(n.td,", ").concat(n.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),e.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",n.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var i=e.data("place");i&&i.destroy(),[].slice.call(this.element[0].querySelectorAll(n.str)).forEach((function(e){return t.removeTooltipData(e)})),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var t=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var e=t.find(".searchfield");e.data("searchfield")&&e.data("searchfield").destroy(),e.removeData("options")}return this.removeToolbarOnDestroy&&(t.data("toolbar")&&t.data("toolbar").destroy(),t.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(t){return this.settings=b.mergeSettings(this.element,t,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),t&&t.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),t&&t.dataset&&(this.settings.dataset=t.dataset),t&&t.columns&&(this.settings.columns=t.columns),this.render(),this.handlePaging(),this}},$.fn.datagrid=function(t){return this.each((function(){var e=$.data(this,"datagrid");e?e.updated(t):e=$.data(this,"datagrid",new ra(this,t))}))};var oa={};function la(t,e){if(!(t instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=b.mergeSettings(t,e,oa),this.element=t,this.init()}la.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=b.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var t=this;if(this.inputs&&this.inputs.length){var e=["disabled","readonly"];this.inputs.forEach((function(n){e.forEach((function(e){t.setState(e,n)}))}))}},handleEvents:function(){var t=this;$(this.form).on("focusin.".concat("formcompact"),"input",(function(e){return t.handleFocusIn(e)})).on("focusout.".concat("formcompact"),"input",(function(e){return t.handleFocusOut(e)}));var e=["disabled","readonly"];this.inputsObserver=new MutationObserver((function(n){n.length&&n.forEach((function(n){"attributes"===n.type&&e.indexOf(n.attributeName)>-1&&t.setState(n.attributeName,n.target)}))}));var n={attributes:!0};this.inputs.forEach((function(e){t.inputsObserver.observe(e,n)}))},handleFocusIn:function(t){l.parents(t.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function(t){l.parents(t.target,".column, .columns",!0).classList.remove("is-focused")},setState:function(t,e){"string"==typeof t&&e instanceof HTMLElement&&(["checkbox","radio"].indexOf(e.type)>-1||("readonly"===t&&(t="readOnly"),e.parentNode.classList[!0===e[t]?"add":"remove"]("is-".concat(t.toLowerCase()))))},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(t){return this.each((function(){var e=$.data(this,"formcompact");e?e.updated(t):e=$.data(this,"formcompact",new la(this,t))}))};var ca={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function da(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,ca),this.init()}da.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return M("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var t=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(t=".toolbar-section:first-child > button"),this.element.find(t)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var t=!1,e=this.element.find(".toolbar, .flex-toolbar");if(!e.length)return this;if(e.is(".flex-toolbar")&&(t=!0),this.toolbarElem=e,this.toolbarElem[t?"toolbarflex":"toolbar"](this.settings.toolbarSettings),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var n=$(this.element),i=$(this.element).next(".scrollable"),a=1===i.length?i:$(window),s=this.settings.scrollThreshold?this.settings.scrollThreshold:15;a.on("scroll.header",(function(){this.scrollTop>s?n.addClass("is-scrolled-down"):n.removeClass("is-scrolled-down")})),a.scrollTop()>s&&n.addClass("is-scrolled-down")}return this},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var t=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(D.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),e=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var n=e.prev(".toolbar-section");n.length||(n=$('<div class="toolbar-section"></div>').insertBefore(e)),t.prependTo(n)}else t.prependTo(e);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var i=$("#application-menu").data("applicationmenu");i?i.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},buildBreadcrumb:function(){var t=this,e="has-breadcrumb";this.settings.useAlternate&&(e="has-alternate-breadcrumb"),this.element.addClass(e),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.on("click","a",(function(e){t.handleBreadcrumbClick(e)}))),this.breadcrumb[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.adjustBreadcrumb()},adjustBreadcrumb:function(){var t=this.levelsDeep[this.levelsDeep.length-1];this.breadcrumb.empty();var e=$('<ol aria-label="breadcrumb"></ol>').appendTo(this.breadcrumb);$.each(this.levelsDeep,(function(n,i){var a="";t===i&&(a=" current"),e.append($('<li><a href="#" class="hyperlink'.concat(a,'">').concat(i,"</a></li>")))}))},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var t=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(t)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var t=$('<div class="wizard-header"></div>').appendTo(this.wizard),e=$('<div class="bar"></div>').appendTo(t);$('<div class="completed-range"></div>').appendTo(e),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(e)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var t=this.toolbarElem.children(".title");if(this.titlePopup=t.find(".btn-menu"),!this.titlePopup.length){var e=t.find("h1");e.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=e.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var n=this.titlePopupMenu.children(".is-checked").first().text();n||(n=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(n),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("header"),(function(t,n){e.updated(n)})).on("reset.".concat("header"),(function(){e.reset()})).on("drilldown.".concat("header"),(function(t,n){e.drilldown(n)})).on("drillup.".concat("header"),(function(t,n){e.drillup(n)})),$("html").on("themechanged.".concat("header"),(function(){t.updatePageChanger()})),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),(function(t,e){var n;n=e instanceof $?e.text():$(e.element).text(),$(this).children("h1").text(n)})),this},handleTitleButtonEvents:function(){var t=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),(function(e){t.levelsDeep.length>1&&(e.stopImmediatePropagation(),t.drillup(),e.returnValue=!1)}))},handleBreadcrumbClick:function(t){var e,n=$(t.target).parent(),i=this.breadcrumb.find("li"),a=i.index(n);if(!n.hasClass("current"))if(0!==a){if(a<i.length-1)for(e=i.length-1-a;e>0;)this.drillup(),e-=1}else this.reset()},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var t=this.changer.data("popupmenu").menu,e=t.find("li.personalization-colors");if(e.length>0){var i=W.personalizationColors(),a=e.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(i).forEach((function(t){return a+='<li class="is-selectable'.concat("Default"===i[t].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(i[t].value,'">').concat(i[t].name,"</a></li>"),t})),e.replaceWith(a)}this.changer.on("selected.header",(function(e,n){e.preventDefault(),void 0!==n&&!(n instanceof $)&&n.element instanceof HTMLElement&&(n=$(n.element));var i=n.attr("data-theme-name"),a=n.attr("data-theme-variant");if(i||a){var s=t.find(".is-checked a[data-theme-name]").attr("data-theme-name"),r=t.find(".is-checked a[data-theme-variant]").attr("data-theme-variant");s&&r&&K.setTheme("".concat(s,"-").concat(r))}else{var o=n.attr("data-theme");if(o)K.setTheme(o);else if(n.parent().hasClass("is-default"))K.setColorsToDefault();else{var l=n.attr("data-rgbcolor");K.setColors(l)}}}));var s=W.currentTheme;if("theme-soho-light"!==s.id){var r=s.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(r[0],"-").concat(r[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-variant]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-variant="'.concat(r[2],'"]')).parent().addClass("is-checked")}if(K.settings.colors){var o="object"===n(K.settings.colors)?K.settings.colors.header:K.settings.colors;o=o.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(o,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){for(var t=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),e=W.personalizationColors(),n=Object.keys(e),i=0;i<t.length;i++)t[i].setAttribute("data-rgbcolor",e[n[i]].value)},drilldown:function(t){this.element.addClass("is-drilldown"),this.levelsDeep.push(t.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(t){var e;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),e=this.levelsDeep[this.levelsDeep.length-1]),void 0!==t&&(e=t),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(e);e=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(e),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var t=$("#application-menu").data("applicationmenu");t&&t.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var t,e=this,n=$.fn.transitionEndName();e.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(n,".breadcrumb-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".breadcrumb-header")),e.breadcrumb.off().remove(),e.breadcrumb=$()}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var t,e=this,n=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(n,".tabs-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".tabs-header")),e.tabsContainer.data("tabs").destroy(),e.tabsContainer.remove(),e.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var t,e=this,n=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(n,".wizard-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".wizard-header")),e.wizard.data("wizard").destroy(),e.wizard.remove(),e.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var t=this.changer.data("popupmenu");t&&"function"==typeof t.destroy&&t.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(t){return this.each((function(){var e=$.data(this,"header");e?e.updated(t):e=$.data(this,"header",new da(this,t))}))};var ha="lookup-datagrid",ua={click:null,field:"id",title:null,buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,typeahead:!1,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null};function pa(t,e){this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,ua),this.init()}pa.prototype={get isFocused(){var t=document.activeElement,e=this.element.is(t),n=this.element.parent(".lookup-wrapper")[0].contains(t);return e||n},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var t,e=this.element,n=(t="lookup-wrapper",e.is(".input-xs")&&(t+=" xs"),e.is(".input-sm")&&(t+=" sm"),e.is(".input-lg")&&(t+=" lg"),t);if(this.element.is(".has-actions")&&(n+=" has-actions-wrapper"),this.icon=$('<span class="trigger"></span>').append($.createIcon("search-list")),this.isInlineLabel)this.inlineLabel.addClass(n);else if(this.container=$('<span class="'.concat(n,'"></span>')),this.element.is(".field-options")){var i=this.element.closest(".field").find(".btn-actions");e.add(i).add(i.next(".popupmenu")).wrapAll(this.container)}else e.wrap(this.container);e.after(this.icon),e.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),e.attr("data-mask")&&e.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===e.attr("autocomplete")&&e.attr("autocomplete","off")},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'))},handleEvents:function(){var t=this;this.icon.on("click.lookup",(function(e){t.openDialog(e)})),this.element.on("keyup.lookup",(function(e){$("#autocomplete-list").length>0||40===e.which&&t.openDialog(e)}))},openDialog:function(t){var e=this;if(!this.isOpen&&!1!==e.element.triggerHandler("beforeopen")&&!(e.isDisabled()||e.isReadonly()&&!e.element.hasClass("is-not-editable")))if(e.settings.click)e.settings.click(t,this,e.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow)return this.element.triggerHandler("start"),void this.settings.beforeShow(this,(function(t){return t&&e.createGrid(t),("boolean"!=typeof t||!1!==t)&&(e.createModal(),e.element.triggerHandler("complete"),e.element.trigger("open",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid),!0)}));if(this.settings.options){e.createModal(),e.element.trigger("open",[e.modal,e.grid]),e.modal.element.find(".btn-actions").removeClass("is-selected"),e.grid&&e.grid.cellNode(0,0,!0).attr("tabindex","0");var n=e.modal.element.find(".toolbar .more > .btn-actions");n.length&&setTimeout((function(){b.fixSVGIcons(n)}),600),e.element.trigger("afteropen",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid)}}},createModal:function(){var t=this,e='<div id="'.concat(ha,'"></div>'),n=$('label[for="'.concat(t.element.attr("id"),'"]')),i=t.isInlineLabel?t.inlineLabelText:n.length?n.clone().find("span").remove().end().text():t.settings.title?t.settings.title:"",a=this.settings.modalContent;a&&a instanceof jQuery&&(e=a,a.show()),!a||a instanceof jQuery||(e=a);var s=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===s.length||!t.settings.autoApply&&0===s.length)&&(s=[{text:D.translate("Cancel"),click:function(e,n){t.element.focus(),n.close()}},{text:D.translate("Apply"),click:function(e,n){n.close(),t.insertRows()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===s.length&&t.settings.autoApply&&(s=[{text:D.translate("Cancel"),click:function(e,n){t.element.focus(),n.close()}}]);var r=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;$("body").modal({title:i,content:e,buttons:s,cssClass:"lookup-modal".concat(r?"":" lookup-no-search")}).off("open.lookup").on("open.lookup",(function(){t.createGrid()})).off("close.lookup").on("close.lookup",(function(){t.element.focus(),delete t.isOpen,t.element.triggerHandler("close",[t.modal,t.grid])})),t.modal=$("body").data("modal"),this.settings.title||t.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),t.modal.element.off("afterclose.lookup").on("afterclose.lookup",(function(){t.closeTearDown()})),setTimeout((function(){$(".modal.is-visible .searchfield").on("keypress.lookup",(function(t){return 13!==t.keyCode}))}),300)},closeTearDown:function(){var t=$(".modal.is-visible .searchfield").off("keypress.lookup");t.data()&&t.data("searchfield")&&t.data("searchfield").destroy(),t.data()&&t.data("searchfield")&&(t.data("searchfield").destroy(),t.removeData()),t=null,this.grid&&this.grid.destroy&&(this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var t={},e=[],n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var s=0;s<i.length;s++)for(var r=0;r<i[s].length;r++)!0!==t[i[s][r]]&&(e[e.length]=i[s][r],t[i[s][r]]=!0);return e},createGrid:function(t){var e,n=this,i=this;t?(e=t,ha=t.attr("id"),i.settings.options=t.data("datagrid").settings):e=i.modal.element.find("#".concat(ha)),this.settings.minWidth&&(e=this.applyMinWidth(e)),i.settings.options&&("single"===i.settings.options.selectable&&i.settings.autoApply&&(i.settings.options.cellNavigation=!1,e.find("tr").addClass("is-clickable")),i.settings.options.isList=!0,e.data("datagrid")||e.datagrid(i.settings.options)),i.grid=e.data("datagrid"),!this.settings.title&&i.modal&&i.modal.element.find(".title").not(".selection-count").remove();var a=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;!a&&i.modal&&i.modal.element.find(".toolbar").appendTo(i.modal.element.find(".modal-header")),a&&i.grid&&(!i.grid.filterExpr||i.grid.filterExpr&&i.grid.filterExpr[0]&&""!==i.grid.filterExpr[0].value)&&i.grid.keywordSearch(""),e.off("selected.lookup");var s=i.element.val();s&&!this.settings.options.source&&i.selectGridRows(s),this.settings.options.source&&e.off("afterpaging.lookup").on("afterpaging.lookup",(function(){var t=i.element.val();n.selectGridRows(t)})),this.settings.options&&e.on("selected.lookup",(function(t,e){e&&0!==e.length&&(i.settings.validator&&i.settings.validator(i.element,i.modal,i.grid),"single"===i.settings.options.selectable&&i.settings.autoApply&&(i.modal.close(),i.insertRows()))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",(function(){if(!n.initValues||n.initValues&&!n.initValues.length){n.initValues=[];var t=n.element.val();t&&(t.indexOf(n.settings.delimiter)>1?t.split(n.settings.delimiter):[t]).forEach((function(t){n.initValues.push({value:t,visited:!!n.grid.settings.dataset.filter((function(e){return function(t,e){return(t[n.settings.field]||"").toString()===e.toString()}(e,t)})).length})}))}}))},selectGridRows:function(t){var e=t,n=!1;if(t){if(this.grid&&this.settings.options.source)for(var i=this.grid._selectedRows.length-1;i>-1;i--)isNaN(this.grid._selectedRows[i].idx)&&this.grid._selectedRows.splice(i,1);if(e.indexOf(this.settings.delimiter)>1){for(var a=e.split(this.settings.delimiter),s=!1,r=0;r<a.length;r++)if(s=this.selectRowByValue(this.settings.field,a[r]),this.grid&&this.settings.options.source&&!s){for(var o={},l=!1,c=0;c<this.grid._selectedRows.length;c++)this.grid._selectedRows[c].data[this.settings.field].toString()===a[r].toString()&&(l=!0);l||(o[this.settings.field]=a[r],this.grid._selectedRows.push({data:o})),n=!0}n&&this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(a.length," ").concat(D.translate("Selected")))}else this.selectRowByValue(this.settings.field,e)}},selectRowByValue:function(t,e){if(!this.settings.options)return!1;var n=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,i=[];if(!n)return!1;for(var a=0;a<n.length;a++){var s,r=!1;if("function"==typeof this.settings.match&&this.settings.match(e,n[a],this.element,this.grid)&&(r=!0),"function"!=typeof this.settings.match&&(null===(s=n[a][t])||void 0===s||null==s?void 0:s.toString())===(null==e||null==e?void 0:e.toString())&&(r=!0),r){var o=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(a)):a;i.push(o)}}return!!(this.grid&&i.length>0)&&(this.grid.selectRows(i,!1,!0),!0)},insertRows:function(){var t="";this.selectedRows=this.grid.selectedRows();for(var e=0;e<this.selectedRows.length;e++){var n;n="function"==typeof this.settings.field?this.settings.field(this.selectedRows[e].data,this.element,this.grid):this.selectedRows[e].data[this.settings.field],t+=(0!==e?this.settings.delimiter:"")+n;var i=this.selectedRows[e].idx;this.settings.options.dataset&&this.settings.options.dataset[i]&&delete this.settings.options.dataset[i]._selected}this.element.val(t).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.parent().removeClass("is-disabled")},disable:function(){this.element.prop("disabled",!0),this.element.parent().addClass("is-disabled")},readonly:function(){this.element.prop("readonly",!0)},applyAutoWidth:function(){var t=this.element.val(),e=t.length,n=t===t.toUpperCase(),i=!isNaN(t);this.element.attr("size",e+(n&&!i?2:1))},applyMinWidth:function(t){if(null==this.settings.minWidth)return t;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var e="".concat(this.settings.minWidth,"px");t.css({"min-width":e})}return t},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings))},updateDataset:function(t,e){this.settings.options.dataset=t,e&&e.activePage&&(this.settings.options.activePage=e.activePage),e&&e.pagesize&&(this.settings.options.pagesize=e.pagesize),this.grid&&this.grid.updateDataset(t,e)},destroy:function(){$.removeData(this.element[0],"lookup"),$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),this.element.off("keyup.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.unwrap()}},$.fn.lookup=function(t){return this.each((function(){var e=$.data(this,"lookup");e?e.updated(t):e=$.data(this,"lookup",new pa(this,t))}))};var fa={tabContainers:[]},ga=["primary","secondary","tertiary"];function ma(t,e){return this.element=$(t),this.settings=b.mergeSettings(this.element[0],e,fa),this.tabContainers={},this.init()}ma.prototype={init:function(){var t,e=this;t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter((function(){return!$(this).parents(".tab-panel-container").length})),$(t).each((function(){e.setupTabsInstance($(this))}))},setupTabsInstance:function(t){if(t instanceof $){var e=this,n=!1;if(ga.forEach((function(i){if(!n&&!Object.prototype.hasOwnProperty.call(e.tabContainers,i)){var a=t.data("tabs");a||(t.tabs(),a=t.data("tabs")),a.multitabsID=i,t.attr("data-multitabs",i),e.tabContainers[i]=t,n=!0}})),!n)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(t,e,n,i){return(t=this.checkForValidTabContainer(t)).data("tabs").add(e,n,i)},remove:function(t,e,n){return(t=this.checkForValidTabContainer(t)).data("tabs").remove(e,n)},move:function(t,e,n){if(!t||!e)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var i,a,s;if(this.getFilterableTabContainers().each((function(){var e=$(this).data("tabs"),n=e.getTab(null,t);null!==n&&(s=e.multitabsID,i=n.clone(),a=e.getPanel(t).children())})),!i)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(t,'"'));this.remove(s,t),this.add(e,t,{name:i.children("a").text().trim(),content:a,doActivate:n})},getTabContainer:function(t){var e,n=this;return ga.forEach((function(i){!e&&n.tabContainers[i]&&t===i&&(e=n.tabContainers[i])})),e},getFilterableTabContainers:function(){var t=$();return this.performOnAllContainers((function(e,n){t=t.add(n)})),t},checkForValidTabContainer:function(t){if(!t)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof t&&(t=this.getTabContainer(t)),!(t instanceof $&&t.length))throw new Error("No matching tabContainer could be found and hidden.");return t},performOnAllContainers:function(t,e){var n=this;Array.isArray(e)||(e=e?[e]:[]),ga.forEach((function(i){var a=n.tabContainers[i],s=[];a&&(s.push(i,a),s=s.concat(e),t.apply(this,s))}))},adjustModuleTabContainers:function(){this.performOnAllContainers((function(t,e){var n=e.data("tabs");n.isModuleTabs()&&n.adjustModuleTabs()}))},hideTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(t){if(t instanceof $&&t.data("tabs")&&"function"==typeof t.data("tabs").destroy){var e=this,n=!1;if(ga.forEach((function(i){if(!n&&e.tabContainers[i].is(t)){var a=t.data("tabs");delete a.multitabsID,t.removeAttr("data-multitabs"),a.destroy(),delete e.tabContainers[i],n=!0}})),!n)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(t){return(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").is(".hidden")},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings))},teardown:function(){var t=this;return Object.keys(this.tabContainers).forEach((function(e){t.destroyTabsInstance(e)})),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(t){return this.each((function(){var e=$.data(this,"multitabs");e?e.updated(t):e=$.data(this,"multitabs",new ma(this,t))}))};var va={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,detailElement:void 0},ba=["accordion","listview"];function ya(t){var e;if(t instanceof HTMLElement)return Object.keys($(t).data()).forEach((function(t){ba.indexOf(t)>-1&&(e=t)})),e}function wa(t,e){t instanceof HTMLElement&&(this.element=t,this.settings=b.mergeSettings(this.element,e,va),this.init())}wa.prototype={init:function(){var t=this;if(this.setInternalElementReference("listElement",(function(e){return(n=t.settings[e])instanceof HTMLElement&&void 0!==ya(n);var n})),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.listElement){this.listComponentType=ya(this.listElement);var e=this.getListAPI();e&&(e.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var n=this.backElement.querySelector(".icon");n&&(this.backElementIcon=n),this.listContainsBackElement=this.listElement.contains(this.backElement),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}var i=this.element.querySelectorAll(".list-detail");i&&(this.childrenListDetailElements=i),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=c.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=c.isAbove("desktop")},setInternalElementReference:function(t,e){if("string"==typeof this.settings[t]&&this.settings[t].length){var n=document.querySelector(this.settings[t]);n&&(this.settings[t]=n)}e="function"!=typeof e||e(t),this.settings[t]instanceof HTMLElement&&e&&(this[t]=this.settings[t])},handleEvents:function(){var t=this;$(this.element).on("drilldown.".concat("listdetail"),(function(e,n){e.stopPropagation(),t.drilldown(n,e.target)})).on("drillup.".concat("listdetail"),(function(e){e.stopPropagation(),t.drillup()})),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),(function(){t.handleResize()}))},drilldown:function(t,e){this.showDetail||e&&e.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[t]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},handleBackClick:function(t){function e(){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var n=this.getCurrentSelectedListItem();if(n)return this.drilldown(n),e(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach((function(t){var e=$(t).data("listdetail");e&&"function"==typeof e.drillup&&e.drillup()})),e(),!1},handleClose:function(){if(!this.showDetail){var t=this.getCurrentSelectedListItem();this.drilldown(t)}},handleResize:function(){this.setBreakpointChecks();var t=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&t.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&t.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():this.addBackElementIconContext(),c.isAbove("desktop")&&t.enable()},isAboveBreakpoint:function(){return this["above".concat(k.capitalize(this.settings.edgeBleedBreakpoint),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){if(!this.listElement)return"";var t,e=this.getListAPI();switch(this.listComponentType){case"accordion":default:t=e.getSelected()}return l.convertToHTMLElement(t)},updated:function(t){t&&(this.settings=b.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var t=this.getListAPI();t&&delete t.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail},destroy:function(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(t){return this.each((function(){var e=$.data(this,"listdetail");e?e.updated(t):(e=$.data(this,"listdetail",new wa(this,t))).destroy=function(){this.teardown(),$.removeData(this,"listdetail")}}))};var xa={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function Ca(t,e){this.settings=b.mergeSettings(t,e,xa),this.element=$(t),this.init(),L("Stepprocess")}Ca.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var t=this.stepListJq.find(this.settings.stepLi),e=0,n=t.length;e<n;e++)this.decorateNode(t[e]);var i=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(i)},decorateNode:function(t){var e=$(t),n=e.children(this.settings.stepLink),i=e.children(this.settings.stepFolder),a=n.hasClass("is-disabled"),s=i.hasClass("is-open");if(a&&n.attr("aria-disabled","true"),i.length){if(e.addClass("folder"),i.attr("role","group"),a&&(i.addClass("disabled"),s))for(var r=i.children(),o=0,l=r.length;o<l;o++)$(r[o]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");n.attr("aria-expanded",s)}var c=n.parentsUntil(this.stepListJq,"ul").length-1,d=e.index(),h=e.siblings().addBack().length;n.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":c+1,"aria-posinset":d+1,"aria-setsize":h,"aria-disabled":a}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(t){var e=this,n=$(t),i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder),s=i.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(s,this.settings.folderIconClosed),this.isAnimating=!0,a.one("animateclosedcomplete",(function(){a.removeClass("is-open"),e.isAnimating=!1})).animateClosed(),i.attr("aria-expanded","false")},folderOpen:function(t){var e=this,n=$(t);if(!this.isOpen(n)){var i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder);n.addClass("is-open"),i.attr("aria-expanded","true");var s=i.find("svg.icon-tree");this.setIcon(s,this.settings.folderIconOpen),this.isAnimating=!0,a.one("animateopencomplete",(function(){e.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(t){var e=t.closest(this.settings.stepLi);if(this.isFolder(e)){var n=e.children(this.settings.stepFolder);this.isOpen(n)?this.folderClose(e):this.folderOpen(e)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(t){var e=this.settings,n=t.parent().next().find("".concat(e.stepLink,":first"));if(t.next().is(e.stepFolder)&&t.next().hasClass("is-open")&&(n=t.next().find("".concat(e.stepLink,":first"))),n.hasClass("is-disabled")&&(n=this.getNextNode(n)),0===n.length)for(var i=0,a=t;i<2&&!(n=(a=a.parent().closest(".folder")).next().find("".concat(e.stepLink,":first"))).length;i++);return n},getNextStep:function(t){var e=t.children(this.settings.stepLink),n=t.next(this.settings.stepFolder),i=this.getNextNode(e),a=i.next(this.settings.stepFolder),s=null,r=null;return(s=n.length?(r=n).children().length?r.find(this.settings.stepLink).first():i:a.length&&(r=a).children().length?r.find(this.settings.stepLink).first():i).hasClass("is-disabled")&&(s=this.getNextStep(s.parent())),s},getPreviousNode:function(t){var e=this.settings,n=t.parent().prev().find("".concat(e.stepLink,":first")),i=n.closest(e.stepLi);return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(n=i.find("ul.is-open ".concat(e.stepLink,":last"))),n.hasClass("is-disabled")&&this.getPreviousNode(n),0===n.length&&(n=t.closest(e.stepFolder).prev(e.stepLink)),n},getPreviousStep:function(t){var e=this.settings,n=t.children(e.stepLink),i=this.getPreviousNode(n),a=i.closest(e.stepLi),s=i;if(this.isFolder(a))if(this.isOpen(a))s=this.getPreviousNode(i);else{var r=a.children(e.stepFolder);r.children().length&&(s=r.find(e.stepLink).last())}return s.hasClass("is-disabled")&&(s=this.getPreviousStep(s.parent())),s},goToNextStep:function(){var t=this,e=this.getSelectedStep(),n=t.getNextStep(e);if(n.length)t.selectStep(n,"next");else if("function"==typeof t.settings.beforeSelectStep){var i=t.settings.beforeSelectStep({isStepping:"next"});i.done&&"function"==typeof i.done?i.done((function(e,n){e&&n&&t.selectStepFinish(n)})):i&&t.selectStepFinish(n)}},goToPreviousStep:function(){var t=this.getSelectedStep(),e=this.getPreviousStep(t);e.length&&this.selectStep(e,"prev")},handleKeys:function(){var t=this,e=this.settings;this.stepListJq.on("focus.stepprocess",e.stepLink,(function(){var t=$(this);if(0===parseInt(t.attr("aria-level"),10)&&1===parseInt(t.attr("aria-posinset"),10)&&t.hasClass("is-disabled")){var e=$.Event("keydown.stepprocess");return e.keyCode=40,void t.trigger(e)}})),this.stepListJq.on("keydown.stepprocess",e.stepLink,(function(n){var i,a,s=n.charCode||n.keyCode,r=$(this);if(!t.isAnimating){if(40===s){var o=t.getNextNode(r);t.setFocus(o)}if(38===s){var l=t.getPreviousNode(r);t.setFocus(l)}if(32===n.keyCode&&r.trigger("click.stepprocess"),37===s)return D.isRTL()?r.next().hasClass("is-open")?(a=r.next().find("".concat(e.stepLink,":first")),t.setFocus(a)):t.folderToggle(r):r.next().hasClass("is-open")?t.folderToggle(r):(a=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(a)),n.stopPropagation(),!1;if(39===s)return D.isRTL()?r.next().hasClass("is-open")?t.folderToggle(r):(i=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(i)):r.next().hasClass("is-open")?(i=r.next().find("".concat(e.stepLink,":first")),t.setFocus(i)):(t.folderToggle(r),t.setFocus(r)),n.stopPropagation(),!1;36===s&&(i=t.stepListJq.find("".concat(e.stepLink,":first:visible")),t.setFocus(i)),35===s&&(i=t.stepListJq.find("".concat(e.stepLink,":last:visible")),t.setFocus(i))}})),this.stepListJq.on("keypress.stepprocess",e.stepLink,(function(n){var i=n.charCode||n.keyCode,a=$(this);if(i>=37&&i<=40||32===i)return n.stopPropagation(),!1;0!==n.which&&a.closest(e.stepLi).nextAll().find(".js-step-link:visible").each((function(){var e=$(this);if(e.text().substr(0,1).toLowerCase()===String.fromCharCode(n.which).toLowerCase())return t.setFocus(e),!1}))}))},isFolder:function(t){return $(t).hasClass("folder")},isInFolder:function(t){return $(t).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(t){return $(t).hasClass("is-open")},setFocus:function(t){t.focus()},setIcon:function(t,e){var n=e.replace(/icon-|hide-focus|\s?/gi,"");t.changeIcon(n)},selectStep:function(t,e){var n,i=this;void 0===e&&(e="none"),"function"==typeof i.settings.beforeSelectStep?(n=i.settings.beforeSelectStep({stepLink:t,isStepping:e})).done&&"function"==typeof n.done?n.done((function(n,a){n&&(a&&(t=a),i.selectStepFinish(t,e))})):n&&i.selectStepFinish(t,e):i.selectStepFinish(t,e)},selectStepFinish:function(t,e){var n=this,i=$(this.settings.stepLink,this.stepListJq),a=t.closest(this.settings.stepLi);if(this.isFolder(a)||(i.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),t.attr({tabindex:"0","aria-selected":"true"}),a.addClass("is-selected")),this.isFolder(a))"none"===e?this.folderToggle(a):this.folderOpen(a);else{var s=a.closest(this.settings.stepFolder,this.stepListJq);s.length&&this.folderOpen(s.closest(this.settings.stepLi)),this.showStepPanel(t.attr("href"))}t.focus(),setTimeout((function(){n.element.triggerHandler("selected",t)}),0)},unSelectedNode:function(t){var e=$(this.settings.stepLink,this.stepListJq),n=$(t),i=n.children(this.settings.stepLink);e.attr("tabindex","-1"),i.attr("tabindex","0"),n.removeClass("is-selected"),i.attr("aria-selected","false")},setupEvents:function(){var t=this,e=this,n=this.settings;this.stepListJq.on("updated.stepprocess",(function(){t.initStepprocess()})).on("click.stepprocess","".concat(n.stepLink,":not(.is-clone)"),(function(t){if(t.preventDefault(),!n.linearProgression){var i=$(this);i.is(".is-disabled, .is-loading")||(e.selectStep(i),t.stopPropagation())}})),$(n.btnPrev).on("click",(function(n){n.preventDefault(),t.goToPreviousStep.call(e)})),$(n.btnNext).on("click",(function(n){n.preventDefault(),t.goToNextStep.call(e)})),$(n.contentScroll).scrollaction({scrollActionTarget:".main"}),$(n.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click((function(e){e.preventDefault(),t.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")}))},showStepPanel:function(t){$(".step-panel-active").removeClass("step-panel-active"),$(t).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(t){return void 0!==t&&(this.settings=b.mergeSettings(this.element,t,xa)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(t){return this.each((function(){var e=$.data(this,"stepprocess");e?e.updated(t):e=$.data(this,"stepprocess",new Ca(this,t))}))};var ka={locale:"en-US",language:null};function Ta(t,e,n){return $(t)[e](n)}function Sa(t,e){var n=t.find(e).not(".no-init, [data-init]");return t.filter(e).length&&(n=n.add(t)),n}var Aa=[["applicationmenu","#application-menu",function(t,e,n){Sa(t,n).each((function(e,n){$(n).applicationmenu({triggers:t.find(".application-menu-trigger")})}))}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(t,e,n){Sa(t,n).change((function(){if(this.checked){var t=$(this).closest(".option"),e=t.siblings(),n='button, select, input[type="text"]';$(n,t).removeAttr("disabled"),$(n,e).attr("disabled","disabled")}}))}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(t,e,n){Sa(t,n).each((function(t,e){$(e).parents(".modal").length||$(e).button()}))}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",'[data-clearable="true"]'],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload","input.fileupload:not(.fileupload-background-transparent)"],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(t,e,n){Sa(t,n).each((function(t,n){var i=$(n),a=$.extend({},b.parseOptions(i)),s=i.attr("data-popupmenu");s&&(a.menuId=s),Ta(i,e,a)}))}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(t,e,n){Sa(t,n).each((function(t,n){var i=$(n);i.parents(".toolbar, .flex-toolbar").length>0||Ta(i,e)}))}],["popover","[data-popover]",function(t,e,n){Sa(t,n).each((function(){var t=b.parseOptions(this),e=$(this),n=e.attr("data-trigger"),i=e.attr("data-title"),a=e.attr("data-placement");$.isEmptyObject(t)?e.popover({content:$("#".concat(e.attr("data-popover"))),popover:!0,trigger:n||"click",title:i||void 0,placement:a||"right",extraClass:t.extraClass||void 0}):e.popover({content:$(t.content),popover:!0,trigger:t.trigger||"click",title:t.title||void 0,placement:t.placement||"right",extraClass:t.extraClass||void 0})}))}],["searchfield",".searchfield",function(t,e,n){var i=Sa(t,n),a=i.filter((function(){return $(this).parents(".toolbar").length}));(i=i.not(a)).each((function(){Ta(this,"searchfield")}))}],["toolbar",".toolbar",function(t,e,n){Sa(t,n).each((function(e,n){var i=$(n);i.parents(".header, .contextual-action-panel .modal-header").length&&!t.is(".toolbar")||Ta(i,"toolbar")}))}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(t,e,n){Sa(t,n).each((function(t,e){var n=$(e);n.parents(".application-menu").length||Ta(n,"accordion")}))}],["taglist",".tag-list"],["formcompact",".form-compact-container",function(t,e,n){Sa(t,n).each((function(t,e){Ta($(e),"formcompact")}))}],["listdetail",".list-detail",function(t,e,n){Sa(t,n).each((function(t,e){Ta($(e),"listdetail")}))}],["texttranslations",'[data-translate="text"]',function(t,e,n){Sa(t,n).each((function(t,e){var n=$(e);n.attr("data-translate-key",n.text()),n.text(D.translate(n.text(),!0))}))}],["breadcrumblabels",".breadcrumb ol",function(t,e,n){Sa(t,n).attr("aria-label",D.translate("Breadcrumb"))}],["validate","[data-validate]",function(t,e,n){Sa(t,n).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function $a(t,e,n,i){($.fn[e]||"texttranslations"===e)&&(void 0===n&&(n=".".concat(e)),"function"!=typeof i?Sa(t,n).each((function(){var t=$(this);t.is(".no-init, [data-init]")||t.parents(".no-init, [data-init]").length||Ta(this,e)})):i(t,e,n))}function Ea(t,e){var n=e;"string"==typeof e&&(n={locale:e}),this.element=$(t),D.currentLocale&&D.currentLocale.name&&!e&&(n={locale:D.currentLocale.name}),D.currentLanguage&&D.currentLanguage.name&&D.currentLocale.name.substr(0,2)!==D.currentLanguage.name&&!e&&(n.language=D.currentLanguage.name),this.settings=b.mergeSettings(this.element[0],n,ka),this.init()}Ea.prototype={init:function(){var t=this,e=this;return D.set(this.settings.locale).done((function(){t.settings.language?D.setLanguage(t.settings.language).done((function(){e.initAll()})):e.initAll()})),this},initAll:function(){return this.element.each((function(){for(var t=0;t<Aa.length;t++)$a.apply(void 0,[$(this)].concat(r(Aa[t])))})),this.element.triggerHandler("initialized",{locale:D.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(t){return this.each((function(){return new Ea(this,t)}))};var Da={delay:400,mouseEvents:!1};function Ia(t){return this.settings=b.mergeSettings(this.element,t,Da),this.init()}Ia.prototype={timer:null,init:function(){var t=this,e=this.getInputEventNames(),n=this;$(document).on("".concat(e.mousedown,".").concat("longpress"),(function(e){var i=e.target;t.timer=new F({id:"".concat("longpress","-timer"),duration:x.convertDelayToFPS(t.settings.delay),timeoutCallback:function(){n.fire(i,e)}}),H.register(t.timer)})),$(document).on(["".concat(e.mouseup,".").concat("longpress"),"".concat(e.mouseout,".").concat("longpress"),"".concat(e.mousemove,".").concat("longpress")].join(" "),(function(){t.killTimer()}))},fire:function(t,e){$(t).trigger("".concat("longpress"),[e])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var t=u.features.touch||!this.settings.mouseEvents;return{mousedown:t?"touchstart":"mousedown",mouseout:t?"touchcancel":"mouseout",mouseup:t?"touchend":"mouseup",mousemove:t?"touchmove":"mousemove"}},updated:function(t){t&&(this.settings=b.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){var t=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(t.mousedown,".").concat("longpress"),"".concat(t.mouseup,".").concat("longpress"),"".concat(t.mouseout,".").concat("longpress"),"".concat(t.mousemove,".").concat("longpress")].join(" "))}};var Ma=new Ia,La=Object.freeze({__proto__:null,Button:mt,ButtonSet:bt,Hyperlink:wt,Icon:ct,ListFilter:ee,MaskInput:Dt,Modal:ei,PopupMenu:Mt,Tmpl:ne,About:Pt,Accordion:Ft,ApplicationMenu:ce,Autocomplete:ae,Bar:Ee,Blockgrid:he,Bullet:me,BusyIndicator:pe,ColorPicker:Ue,Column:Ae,CompletionChart:be,ContextualActionPanel:tn,Drag:Z,DatePicker:wn,Dropdown:cn,EmptyMessage:Ce,ExpandableArea:Ye,FontPicker:Tn,FontPickerStyle:Cn,Line:Te,ListBuilder:Xn,ListView:Yn,Message:ii,MultiSelect:si,Notification:oi,Pager:Un,Pie:Ie,Popdown:hi,Radar:Le,SearchField:oe,Slider:vi,Sparkline:we,Spinbox:Ci,Splitter:Ti,StepChart:Ii,Tabs:Pi,Tag:an,TagList:rn,Textarea:_i,TimePicker:un,Toast:gn,Toolbar:Bi,ToolbarFlex:Fi,Tooltip:ht,Tree:Vi,Treemap:Wi,Validator:vn,Wizard:Gi,Calendar:qe,CalendarToolbar:Re,CompositeForm:Xe,Datagrid:ra,FormCompact:la,Header:da,Lookup:pa,MonthView:Oe,WeekView:ze,MultiTabs:ma}),Pa=Object.freeze({__proto__:null,ListDetail:wa,Stepprocess:Ca});return t.DOM=l,t.Editors=ea,t.Formatters=Ki,t.GroupBy=ia,t.HideFocus=p,t.Initialize=Ea,t.Locale=D,t.Place=ot,t.RenderLoopItem=F,t.Validation=pn,t.base=_,t.breakpoints=c,t.components=La,t.debug=e,t.defer=g,t.env=u,t.excel=na,t.getColorStyleSheet=function(t){return K.getColorStyleSheet(t)},t.keyboard=V,t.longPress=Ma,t.masks=xt,t.number=T,t.object=C,t.patterns=Pa,t.personalization=K,t.renderLoop=H,t.setColors=function(t){return K.setColors(t)},t.setTheme=function(t){return K.setTheme(t)},t.smoothScrollTo=f,t.string=k,t.theme=W,t.uniqueIdCount=m,t.utils=b,t.version="4.27.3",t.xss=o,t}({});