/*! jQuery v3.6.4 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(B,In){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=B.document?In(B,!0):function(Ji){if(!Ji.document)throw new Error("jQuery requires a window with a document");return In(Ji)}:In(B)})(typeof window<"u"?window:this,function(B,In){"use strict";var Ji=[],Wr=Object.getPrototypeOf,Ts=Ji.slice,Oo=Ji.flat?function(x){return Ji.flat.call(x)}:function(x){return Ji.concat.apply([],x)},Ur=Ji.push,la=Ji.indexOf,Gr={},at=Gr.toString,va=Gr.hasOwnProperty,qa=va.toString,cc=qa.call(Object),Nt={},Qt=function(x){return typeof x=="function"&&typeof x.nodeType!="number"&&typeof x.item!="function"},_e=function(x){return x!=null&&x===x.window},ue=B.document,Yt={type:!0,src:!0,nonce:!0,noModule:!0};function Yr(x,E,R){var F,Q,ne=(R=R||ue).createElement("script");if(ne.text=x,E)for(F in Yt)(Q=E[F]||E.getAttribute&&E.getAttribute(F))&&ne.setAttribute(F,Q);R.head.appendChild(ne).parentNode.removeChild(ne)}function Va(x){return x==null?x+"":typeof x=="object"||typeof x=="function"?Gr[at.call(x)]||"object":typeof x}var xl="3.6.4",q=function(x,E){return new q.fn.init(x,E)};function Be(x){var E=!!x&&"length"in x&&x.length,R=Va(x);return!Qt(x)&&!_e(x)&&(R==="array"||E===0||typeof E=="number"&&0<E&&E-1 in x)}q.fn=q.prototype={jquery:xl,constructor:q,length:0,toArray:function(){return Ts.call(this)},get:function(x){return x==null?Ts.call(this):x<0?this[x+this.length]:this[x]},pushStack:function(x){var E=q.merge(this.constructor(),x);return E.prevObject=this,E},each:function(x){return q.each(this,x)},map:function(x){return this.pushStack(q.map(this,function(E,R){return x.call(E,R,E)}))},slice:function(){return this.pushStack(Ts.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(q.grep(this,function(x,E){return(E+1)%2}))},odd:function(){return this.pushStack(q.grep(this,function(x,E){return E%2}))},eq:function(x){var E=this.length,R=+x+(x<0?E:0);return this.pushStack(0<=R&&R<E?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ur,sort:Ji.sort,splice:Ji.splice},q.extend=q.fn.extend=function(){var x,E,R,F,Q,ne,ae=arguments[0]||{},ye=1,be=arguments.length,Ee=!1;for(typeof ae=="boolean"&&(Ee=ae,ae=arguments[ye]||{},ye++),typeof ae=="object"||Qt(ae)||(ae={}),ye===be&&(ae=this,ye--);ye<be;ye++)if((x=arguments[ye])!=null)for(E in x)F=x[E],E!=="__proto__"&&ae!==F&&(Ee&&F&&(q.isPlainObject(F)||(Q=Array.isArray(F)))?(R=ae[E],ne=Q&&!Array.isArray(R)?[]:Q||q.isPlainObject(R)?R:{},Q=!1,ae[E]=q.extend(Ee,ne,F)):F!==void 0&&(ae[E]=F));return ae},q.extend({expando:"jQuery"+(xl+Math.random()).replace(/\D/g,""),isReady:!0,error:function(x){throw new Error(x)},noop:function(){},isPlainObject:function(x){var E,R;return!(!x||at.call(x)!=="[object Object]")&&(!(E=Wr(x))||typeof(R=va.call(E,"constructor")&&E.constructor)=="function"&&qa.call(R)===cc)},isEmptyObject:function(x){var E;for(E in x)return!1;return!0},globalEval:function(x,E,R){Yr(x,{nonce:E&&E.nonce},R)},each:function(x,E){var R,F=0;if(Be(x))for(R=x.length;F<R&&E.call(x[F],F,x[F])!==!1;F++);else for(F in x)if(E.call(x[F],F,x[F])===!1)break;return x},makeArray:function(x,E){var R=E||[];return x!=null&&(Be(Object(x))?q.merge(R,typeof x=="string"?[x]:x):Ur.call(R,x)),R},inArray:function(x,E,R){return E==null?-1:la.call(E,x,R)},merge:function(x,E){for(var R=+E.length,F=0,Q=x.length;F<R;F++)x[Q++]=E[F];return x.length=Q,x},grep:function(x,E,R){for(var F=[],Q=0,ne=x.length,ae=!R;Q<ne;Q++)!E(x[Q],Q)!==ae&&F.push(x[Q]);return F},map:function(x,E,R){var F,Q,ne=0,ae=[];if(Be(x))for(F=x.length;ne<F;ne++)(Q=E(x[ne],ne,R))!=null&&ae.push(Q);else for(ne in x)(Q=E(x[ne],ne,R))!=null&&ae.push(Q);return Oo(ae)},guid:1,support:Nt}),typeof Symbol=="function"&&(q.fn[Symbol.iterator]=Ji[Symbol.iterator]),q.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(x,E){Gr["[object "+E+"]"]=E.toLowerCase()});var Sa=function(x){var E,R,F,Q,ne,ae,ye,be,Ee,Oe,We,Pe,Ne,mt,St,wt,Gn,Bn,Li,dn="sizzle"+1*new Date,ce=x.document,pi=0,on=0,On=cr(),Pi=cr(),Qo=cr(),ji=cr(),ai=function(se,ve){return se===ve&&(We=!0),0},Ar={}.hasOwnProperty,si=[],Rs=si.pop,ba=si.push,Vn=si.push,ri=si.slice,ia=function(se,ve){for(var Ae=0,He=se.length;Ae<He;Ae++)if(se[Ae]===ve)return Ae;return-1},oi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ht="[\\x20\\t\\r\\n\\f]",Cn="(?:\\\\[\\da-fA-F]{1,6}"+Ht+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Qn="\\["+Ht+"*("+Cn+")(?:"+Ht+"*([*^$|!~]?=)"+Ht+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Cn+"))|)"+Ht+"*\\]",jn=":("+Cn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Qn+")*)|.*)\\)|)",un=new RegExp(Ht+"+","g"),Ci=new RegExp("^"+Ht+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ht+"+$","g"),Ma=new RegExp("^"+Ht+"*,"+Ht+"*"),gs=new RegExp("^"+Ht+"*([>+~]|"+Ht+")"+Ht+"*"),Ya=new RegExp(Ht+"|>"),ms=new RegExp(jn),Sc=new RegExp("^"+Cn+"$"),lr={ID:new RegExp("^#("+Cn+")"),CLASS:new RegExp("^\\.("+Cn+")"),TAG:new RegExp("^("+Cn+"|[*])"),ATTR:new RegExp("^"+Qn),PSEUDO:new RegExp("^"+jn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ht+"*(even|odd|(([+-]|)(\\d*)n|)"+Ht+"*(?:([+-]|)"+Ht+"*(\\d+)|))"+Ht+"*\\)|)","i"),bool:new RegExp("^(?:"+oi+")$","i"),needsContext:new RegExp("^"+Ht+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ht+"*((?:-\\d)?\\d*)"+Ht+"*\\)|)(?=[^-]|$)","i")},kn=/HTML$/i,Jn=/^(?:input|select|textarea|button)$/i,Jo=/^h\d$/i,Ka=/^[^{]+\{\s*\[native \w/,Zo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Xa=/[+~]/,ua=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ht+"?|\\\\([^\\r\\n\\f])","g"),Qa=function(se,ve){var Ae="0x"+se.slice(1)-65536;return ve||(Ae<0?String.fromCharCode(Ae+65536):String.fromCharCode(Ae>>10|55296,1023&Ae|56320))},Sr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Er=function(se,ve){return ve?se==="\0"?"\uFFFD":se.slice(0,-1)+"\\"+se.charCodeAt(se.length-1).toString(16)+" ":"\\"+se},oo=function(){Pe()},lo=Dr(function(se){return se.disabled===!0&&se.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Vn.apply(si=ri.call(ce.childNodes),ce.childNodes),si[ce.childNodes.length].nodeType}catch{Vn={apply:si.length?function(ve,Ae){ba.apply(ve,ri.call(Ae))}:function(ve,Ae){for(var He=ve.length,Se=0;ve[He++]=Ae[Se++];);ve.length=He-1}}}function Kt(se,ve,Ae,He){var Se,Je,tt,dt,rt,qt,_t,vt=ve&&ve.ownerDocument,rn=ve?ve.nodeType:9;if(Ae=Ae||[],typeof se!="string"||!se||rn!==1&&rn!==9&&rn!==11)return Ae;if(!He&&(Pe(ve),ve=ve||Ne,St)){if(rn!==11&&(rt=Zo.exec(se)))if(Se=rt[1]){if(rn===9){if(!(tt=ve.getElementById(Se)))return Ae;if(tt.id===Se)return Ae.push(tt),Ae}else if(vt&&(tt=vt.getElementById(Se))&&Li(ve,tt)&&tt.id===Se)return Ae.push(tt),Ae}else{if(rt[2])return Vn.apply(Ae,ve.getElementsByTagName(se)),Ae;if((Se=rt[3])&&R.getElementsByClassName&&ve.getElementsByClassName)return Vn.apply(Ae,ve.getElementsByClassName(Se)),Ae}if(R.qsa&&!ji[se+" "]&&(!wt||!wt.test(se))&&(rn!==1||ve.nodeName.toLowerCase()!=="object")){if(_t=se,vt=ve,rn===1&&(Ya.test(se)||gs.test(se))){for((vt=Xa.test(se)&&el(ve.parentNode)||ve)===ve&&R.scope||((dt=ve.getAttribute("id"))?dt=dt.replace(Sr,Er):ve.setAttribute("id",dt=dn)),Je=(qt=ae(se)).length;Je--;)qt[Je]=(dt?"#"+dt:":scope")+" "+ya(qt[Je]);_t=qt.join(",")}try{return Vn.apply(Ae,vt.querySelectorAll(_t)),Ae}catch{ji(se,!0)}finally{dt===dn&&ve.removeAttribute("id")}}}return be(se.replace(Ci,"$1"),ve,Ae,He)}function cr(){var se=[];return function ve(Ae,He){return se.push(Ae+" ")>F.cacheLength&&delete ve[se.shift()],ve[Ae+" "]=He}}function fi(se){return se[dn]=!0,se}function Fi(se){var ve=Ne.createElement("fieldset");try{return!!se(ve)}catch{return!1}finally{ve.parentNode&&ve.parentNode.removeChild(ve),ve=null}}function aa(se,ve){for(var Ae=se.split("|"),He=Ae.length;He--;)F.attrHandle[Ae[He]]=ve}function co(se,ve){var Ae=ve&&se,He=Ae&&se.nodeType===1&&ve.nodeType===1&&se.sourceIndex-ve.sourceIndex;if(He)return He;if(Ae){for(;Ae=Ae.nextSibling;)if(Ae===ve)return-1}return se?1:-1}function uo(se){return function(ve){return ve.nodeName.toLowerCase()==="input"&&ve.type===se}}function ha(se){return function(ve){var Ae=ve.nodeName.toLowerCase();return(Ae==="input"||Ae==="button")&&ve.type===se}}function dr(se){return function(ve){return"form"in ve?ve.parentNode&&ve.disabled===!1?"label"in ve?"label"in ve.parentNode?ve.parentNode.disabled===se:ve.disabled===se:ve.isDisabled===se||ve.isDisabled!==!se&&lo(ve)===se:ve.disabled===se:"label"in ve&&ve.disabled===se}}function Bi(se){return fi(function(ve){return ve=+ve,fi(function(Ae,He){for(var Se,Je=se([],Ae.length,ve),tt=Je.length;tt--;)Ae[Se=Je[tt]]&&(Ae[Se]=!(He[Se]=Ae[Se]))})})}function el(se){return se&&typeof se.getElementsByTagName<"u"&&se}for(E in R=Kt.support={},ne=Kt.isXML=function(se){var ve=se&&se.namespaceURI,Ae=se&&(se.ownerDocument||se).documentElement;return!kn.test(ve||Ae&&Ae.nodeName||"HTML")},Pe=Kt.setDocument=function(se){var ve,Ae,He=se?se.ownerDocument||se:ce;return He!=Ne&&He.nodeType===9&&He.documentElement&&(mt=(Ne=He).documentElement,St=!ne(Ne),ce!=Ne&&(Ae=Ne.defaultView)&&Ae.top!==Ae&&(Ae.addEventListener?Ae.addEventListener("unload",oo,!1):Ae.attachEvent&&Ae.attachEvent("onunload",oo)),R.scope=Fi(function(Se){return mt.appendChild(Se).appendChild(Ne.createElement("div")),typeof Se.querySelectorAll<"u"&&!Se.querySelectorAll(":scope fieldset div").length}),R.cssHas=Fi(function(){try{return Ne.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),R.attributes=Fi(function(Se){return Se.className="i",!Se.getAttribute("className")}),R.getElementsByTagName=Fi(function(Se){return Se.appendChild(Ne.createComment("")),!Se.getElementsByTagName("*").length}),R.getElementsByClassName=Ka.test(Ne.getElementsByClassName),R.getById=Fi(function(Se){return mt.appendChild(Se).id=dn,!Ne.getElementsByName||!Ne.getElementsByName(dn).length}),R.getById?(F.filter.ID=function(Se){var Je=Se.replace(ua,Qa);return function(tt){return tt.getAttribute("id")===Je}},F.find.ID=function(Se,Je){if(typeof Je.getElementById<"u"&&St){var tt=Je.getElementById(Se);return tt?[tt]:[]}}):(F.filter.ID=function(Se){var Je=Se.replace(ua,Qa);return function(tt){var dt=typeof tt.getAttributeNode<"u"&&tt.getAttributeNode("id");return dt&&dt.value===Je}},F.find.ID=function(Se,Je){if(typeof Je.getElementById<"u"&&St){var tt,dt,rt,qt=Je.getElementById(Se);if(qt){if((tt=qt.getAttributeNode("id"))&&tt.value===Se)return[qt];for(rt=Je.getElementsByName(Se),dt=0;qt=rt[dt++];)if((tt=qt.getAttributeNode("id"))&&tt.value===Se)return[qt]}return[]}}),F.find.TAG=R.getElementsByTagName?function(Se,Je){return typeof Je.getElementsByTagName<"u"?Je.getElementsByTagName(Se):R.qsa?Je.querySelectorAll(Se):void 0}:function(Se,Je){var tt,dt=[],rt=0,qt=Je.getElementsByTagName(Se);if(Se==="*"){for(;tt=qt[rt++];)tt.nodeType===1&&dt.push(tt);return dt}return qt},F.find.CLASS=R.getElementsByClassName&&function(Se,Je){if(typeof Je.getElementsByClassName<"u"&&St)return Je.getElementsByClassName(Se)},Gn=[],wt=[],(R.qsa=Ka.test(Ne.querySelectorAll))&&(Fi(function(Se){var Je;mt.appendChild(Se).innerHTML="<a id='"+dn+"'></a><select id='"+dn+"-\r\\' msallowcapture=''><option selected=''></option></select>",Se.querySelectorAll("[msallowcapture^='']").length&&wt.push("[*^$]="+Ht+`*(?:''|"")`),Se.querySelectorAll("[selected]").length||wt.push("\\["+Ht+"*(?:value|"+oi+")"),Se.querySelectorAll("[id~="+dn+"-]").length||wt.push("~="),(Je=Ne.createElement("input")).setAttribute("name",""),Se.appendChild(Je),Se.querySelectorAll("[name='']").length||wt.push("\\["+Ht+"*name"+Ht+"*="+Ht+`*(?:''|"")`),Se.querySelectorAll(":checked").length||wt.push(":checked"),Se.querySelectorAll("a#"+dn+"+*").length||wt.push(".#.+[+~]"),Se.querySelectorAll("\\\f"),wt.push("[\\r\\n\\f]")}),Fi(function(Se){Se.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Je=Ne.createElement("input");Je.setAttribute("type","hidden"),Se.appendChild(Je).setAttribute("name","D"),Se.querySelectorAll("[name=d]").length&&wt.push("name"+Ht+"*[*^$|!~]?="),Se.querySelectorAll(":enabled").length!==2&&wt.push(":enabled",":disabled"),mt.appendChild(Se).disabled=!0,Se.querySelectorAll(":disabled").length!==2&&wt.push(":enabled",":disabled"),Se.querySelectorAll("*,:x"),wt.push(",.*:")})),(R.matchesSelector=Ka.test(Bn=mt.matches||mt.webkitMatchesSelector||mt.mozMatchesSelector||mt.oMatchesSelector||mt.msMatchesSelector))&&Fi(function(Se){R.disconnectedMatch=Bn.call(Se,"*"),Bn.call(Se,"[s!='']:x"),Gn.push("!=",jn)}),R.cssHas||wt.push(":has"),wt=wt.length&&new RegExp(wt.join("|")),Gn=Gn.length&&new RegExp(Gn.join("|")),ve=Ka.test(mt.compareDocumentPosition),Li=ve||Ka.test(mt.contains)?function(Se,Je){var tt=Se.nodeType===9&&Se.documentElement||Se,dt=Je&&Je.parentNode;return Se===dt||!(!dt||dt.nodeType!==1||!(tt.contains?tt.contains(dt):Se.compareDocumentPosition&&16&Se.compareDocumentPosition(dt)))}:function(Se,Je){if(Je){for(;Je=Je.parentNode;)if(Je===Se)return!0}return!1},ai=ve?function(Se,Je){if(Se===Je)return We=!0,0;var tt=!Se.compareDocumentPosition-!Je.compareDocumentPosition;return tt||(1&(tt=(Se.ownerDocument||Se)==(Je.ownerDocument||Je)?Se.compareDocumentPosition(Je):1)||!R.sortDetached&&Je.compareDocumentPosition(Se)===tt?Se==Ne||Se.ownerDocument==ce&&Li(ce,Se)?-1:Je==Ne||Je.ownerDocument==ce&&Li(ce,Je)?1:Oe?ia(Oe,Se)-ia(Oe,Je):0:4&tt?-1:1)}:function(Se,Je){if(Se===Je)return We=!0,0;var tt,dt=0,rt=Se.parentNode,qt=Je.parentNode,_t=[Se],vt=[Je];if(!rt||!qt)return Se==Ne?-1:Je==Ne?1:rt?-1:qt?1:Oe?ia(Oe,Se)-ia(Oe,Je):0;if(rt===qt)return co(Se,Je);for(tt=Se;tt=tt.parentNode;)_t.unshift(tt);for(tt=Je;tt=tt.parentNode;)vt.unshift(tt);for(;_t[dt]===vt[dt];)dt++;return dt?co(_t[dt],vt[dt]):_t[dt]==ce?-1:vt[dt]==ce?1:0}),Ne},Kt.matches=function(se,ve){return Kt(se,null,null,ve)},Kt.matchesSelector=function(se,ve){if(Pe(se),R.matchesSelector&&St&&!ji[ve+" "]&&(!Gn||!Gn.test(ve))&&(!wt||!wt.test(ve)))try{var Ae=Bn.call(se,ve);if(Ae||R.disconnectedMatch||se.document&&se.document.nodeType!==11)return Ae}catch{ji(ve,!0)}return 0<Kt(ve,Ne,null,[se]).length},Kt.contains=function(se,ve){return(se.ownerDocument||se)!=Ne&&Pe(se),Li(se,ve)},Kt.attr=function(se,ve){(se.ownerDocument||se)!=Ne&&Pe(se);var Ae=F.attrHandle[ve.toLowerCase()],He=Ae&&Ar.call(F.attrHandle,ve.toLowerCase())?Ae(se,ve,!St):void 0;return He!==void 0?He:R.attributes||!St?se.getAttribute(ve):(He=se.getAttributeNode(ve))&&He.specified?He.value:null},Kt.escape=function(se){return(se+"").replace(Sr,Er)},Kt.error=function(se){throw new Error("Syntax error, unrecognized expression: "+se)},Kt.uniqueSort=function(se){var ve,Ae=[],He=0,Se=0;if(We=!R.detectDuplicates,Oe=!R.sortStable&&se.slice(0),se.sort(ai),We){for(;ve=se[Se++];)ve===se[Se]&&(He=Ae.push(Se));for(;He--;)se.splice(Ae[He],1)}return Oe=null,se},Q=Kt.getText=function(se){var ve,Ae="",He=0,Se=se.nodeType;if(Se){if(Se===1||Se===9||Se===11){if(typeof se.textContent=="string")return se.textContent;for(se=se.firstChild;se;se=se.nextSibling)Ae+=Q(se)}else if(Se===3||Se===4)return se.nodeValue}else for(;ve=se[He++];)Ae+=Q(ve);return Ae},(F=Kt.selectors={cacheLength:50,createPseudo:fi,match:lr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(se){return se[1]=se[1].replace(ua,Qa),se[3]=(se[3]||se[4]||se[5]||"").replace(ua,Qa),se[2]==="~="&&(se[3]=" "+se[3]+" "),se.slice(0,4)},CHILD:function(se){return se[1]=se[1].toLowerCase(),se[1].slice(0,3)==="nth"?(se[3]||Kt.error(se[0]),se[4]=+(se[4]?se[5]+(se[6]||1):2*(se[3]==="even"||se[3]==="odd")),se[5]=+(se[7]+se[8]||se[3]==="odd")):se[3]&&Kt.error(se[0]),se},PSEUDO:function(se){var ve,Ae=!se[6]&&se[2];return lr.CHILD.test(se[0])?null:(se[3]?se[2]=se[4]||se[5]||"":Ae&&ms.test(Ae)&&(ve=ae(Ae,!0))&&(ve=Ae.indexOf(")",Ae.length-ve)-Ae.length)&&(se[0]=se[0].slice(0,ve),se[2]=Ae.slice(0,ve)),se.slice(0,3))}},filter:{TAG:function(se){var ve=se.replace(ua,Qa).toLowerCase();return se==="*"?function(){return!0}:function(Ae){return Ae.nodeName&&Ae.nodeName.toLowerCase()===ve}},CLASS:function(se){var ve=On[se+" "];return ve||(ve=new RegExp("(^|"+Ht+")"+se+"("+Ht+"|$)"))&&On(se,function(Ae){return ve.test(typeof Ae.className=="string"&&Ae.className||typeof Ae.getAttribute<"u"&&Ae.getAttribute("class")||"")})},ATTR:function(se,ve,Ae){return function(He){var Se=Kt.attr(He,se);return Se==null?ve==="!=":!ve||(Se+="",ve==="="?Se===Ae:ve==="!="?Se!==Ae:ve==="^="?Ae&&Se.indexOf(Ae)===0:ve==="*="?Ae&&-1<Se.indexOf(Ae):ve==="$="?Ae&&Se.slice(-Ae.length)===Ae:ve==="~="?-1<(" "+Se.replace(un," ")+" ").indexOf(Ae):ve==="|="&&(Se===Ae||Se.slice(0,Ae.length+1)===Ae+"-"))}},CHILD:function(se,ve,Ae,He,Se){var Je=se.slice(0,3)!=="nth",tt=se.slice(-4)!=="last",dt=ve==="of-type";return He===1&&Se===0?function(rt){return!!rt.parentNode}:function(rt,qt,_t){var vt,rn,ei,Lt,ki,li,Oi=Je!==tt?"nextSibling":"previousSibling",_n=rt.parentNode,La=dt&&rt.nodeName.toLowerCase(),zn=!_t&&!dt,ti=!1;if(_n){if(Je){for(;Oi;){for(Lt=rt;Lt=Lt[Oi];)if(dt?Lt.nodeName.toLowerCase()===La:Lt.nodeType===1)return!1;li=Oi=se==="only"&&!li&&"nextSibling"}return!0}if(li=[tt?_n.firstChild:_n.lastChild],tt&&zn){for(ti=(ki=(vt=(rn=(ei=(Lt=_n)[dn]||(Lt[dn]={}))[Lt.uniqueID]||(ei[Lt.uniqueID]={}))[se]||[])[0]===pi&&vt[1])&&vt[2],Lt=ki&&_n.childNodes[ki];Lt=++ki&&Lt&&Lt[Oi]||(ti=ki=0)||li.pop();)if(Lt.nodeType===1&&++ti&&Lt===rt){rn[se]=[pi,ki,ti];break}}else if(zn&&(ti=ki=(vt=(rn=(ei=(Lt=rt)[dn]||(Lt[dn]={}))[Lt.uniqueID]||(ei[Lt.uniqueID]={}))[se]||[])[0]===pi&&vt[1]),ti===!1)for(;(Lt=++ki&&Lt&&Lt[Oi]||(ti=ki=0)||li.pop())&&!((dt?Lt.nodeName.toLowerCase()===La:Lt.nodeType===1)&&++ti&&(zn&&((rn=(ei=Lt[dn]||(Lt[dn]={}))[Lt.uniqueID]||(ei[Lt.uniqueID]={}))[se]=[pi,ti]),Lt===rt)););return(ti-=Se)===He||ti%He==0&&0<=ti/He}}},PSEUDO:function(se,ve){var Ae,He=F.pseudos[se]||F.setFilters[se.toLowerCase()]||Kt.error("unsupported pseudo: "+se);return He[dn]?He(ve):1<He.length?(Ae=[se,se,"",ve],F.setFilters.hasOwnProperty(se.toLowerCase())?fi(function(Se,Je){for(var tt,dt=He(Se,ve),rt=dt.length;rt--;)Se[tt=ia(Se,dt[rt])]=!(Je[tt]=dt[rt])}):function(Se){return He(Se,0,Ae)}):He}},pseudos:{not:fi(function(se){var ve=[],Ae=[],He=ye(se.replace(Ci,"$1"));return He[dn]?fi(function(Se,Je,tt,dt){for(var rt,qt=He(Se,null,dt,[]),_t=Se.length;_t--;)(rt=qt[_t])&&(Se[_t]=!(Je[_t]=rt))}):function(Se,Je,tt){return ve[0]=Se,He(ve,null,tt,Ae),ve[0]=null,!Ae.pop()}}),has:fi(function(se){return function(ve){return 0<Kt(se,ve).length}}),contains:fi(function(se){return se=se.replace(ua,Qa),function(ve){return-1<(ve.textContent||Q(ve)).indexOf(se)}}),lang:fi(function(se){return Sc.test(se||"")||Kt.error("unsupported lang: "+se),se=se.replace(ua,Qa).toLowerCase(),function(ve){var Ae;do if(Ae=St?ve.lang:ve.getAttribute("xml:lang")||ve.getAttribute("lang"))return(Ae=Ae.toLowerCase())===se||Ae.indexOf(se+"-")===0;while((ve=ve.parentNode)&&ve.nodeType===1);return!1}}),target:function(se){var ve=x.location&&x.location.hash;return ve&&ve.slice(1)===se.id},root:function(se){return se===mt},focus:function(se){return se===Ne.activeElement&&(!Ne.hasFocus||Ne.hasFocus())&&!!(se.type||se.href||~se.tabIndex)},enabled:dr(!1),disabled:dr(!0),checked:function(se){var ve=se.nodeName.toLowerCase();return ve==="input"&&!!se.checked||ve==="option"&&!!se.selected},selected:function(se){return se.parentNode&&se.parentNode.selectedIndex,se.selected===!0},empty:function(se){for(se=se.firstChild;se;se=se.nextSibling)if(se.nodeType<6)return!1;return!0},parent:function(se){return!F.pseudos.empty(se)},header:function(se){return Jo.test(se.nodeName)},input:function(se){return Jn.test(se.nodeName)},button:function(se){var ve=se.nodeName.toLowerCase();return ve==="input"&&se.type==="button"||ve==="button"},text:function(se){var ve;return se.nodeName.toLowerCase()==="input"&&se.type==="text"&&((ve=se.getAttribute("type"))==null||ve.toLowerCase()==="text")},first:Bi(function(){return[0]}),last:Bi(function(se,ve){return[ve-1]}),eq:Bi(function(se,ve,Ae){return[Ae<0?Ae+ve:Ae]}),even:Bi(function(se,ve){for(var Ae=0;Ae<ve;Ae+=2)se.push(Ae);return se}),odd:Bi(function(se,ve){for(var Ae=1;Ae<ve;Ae+=2)se.push(Ae);return se}),lt:Bi(function(se,ve,Ae){for(var He=Ae<0?Ae+ve:ve<Ae?ve:Ae;0<=--He;)se.push(He);return se}),gt:Bi(function(se,ve,Ae){for(var He=Ae<0?Ae+ve:Ae;++He<ve;)se.push(He);return se})}}).pseudos.nth=F.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})F.pseudos[E]=uo(E);for(E in{submit:!0,reset:!0})F.pseudos[E]=ha(E);function $r(){}function ya(se){for(var ve=0,Ae=se.length,He="";ve<Ae;ve++)He+=se[ve].value;return He}function Dr(se,ve,Ae){var He=ve.dir,Se=ve.next,Je=Se||He,tt=Ae&&Je==="parentNode",dt=on++;return ve.first?function(rt,qt,_t){for(;rt=rt[He];)if(rt.nodeType===1||tt)return se(rt,qt,_t);return!1}:function(rt,qt,_t){var vt,rn,ei,Lt=[pi,dt];if(_t){for(;rt=rt[He];)if((rt.nodeType===1||tt)&&se(rt,qt,_t))return!0}else for(;rt=rt[He];)if(rt.nodeType===1||tt)if(rn=(ei=rt[dn]||(rt[dn]={}))[rt.uniqueID]||(ei[rt.uniqueID]={}),Se&&Se===rt.nodeName.toLowerCase())rt=rt[He]||rt;else{if((vt=rn[Je])&&vt[0]===pi&&vt[1]===dt)return Lt[2]=vt[2];if((rn[Je]=Lt)[2]=se(rt,qt,_t))return!0}return!1}}function Ns(se){return 1<se.length?function(ve,Ae,He){for(var Se=se.length;Se--;)if(!se[Se](ve,Ae,He))return!1;return!0}:se[0]}function Ja(se,ve,Ae,He,Se){for(var Je,tt=[],dt=0,rt=se.length,qt=ve!=null;dt<rt;dt++)(Je=se[dt])&&(Ae&&!Ae(Je,He,Se)||(tt.push(Je),qt&&ve.push(dt)));return tt}function ho(se,ve,Ae,He,Se,Je){return He&&!He[dn]&&(He=ho(He)),Se&&!Se[dn]&&(Se=ho(Se,Je)),fi(function(tt,dt,rt,qt){var _t,vt,rn,ei=[],Lt=[],ki=dt.length,li=tt||function(La,zn,ti){for(var Wi=0,Ir=zn.length;Wi<Ir;Wi++)Kt(La,zn[Wi],ti);return ti}(ve||"*",rt.nodeType?[rt]:rt,[]),Oi=!se||!tt&&ve?li:Ja(li,ei,se,rt,qt),_n=Ae?Se||(tt?se:ki||He)?[]:dt:Oi;if(Ae&&Ae(Oi,_n,rt,qt),He)for(_t=Ja(_n,Lt),He(_t,[],rt,qt),vt=_t.length;vt--;)(rn=_t[vt])&&(_n[Lt[vt]]=!(Oi[Lt[vt]]=rn));if(tt){if(Se||se){if(Se){for(_t=[],vt=_n.length;vt--;)(rn=_n[vt])&&_t.push(Oi[vt]=rn);Se(null,_n=[],_t,qt)}for(vt=_n.length;vt--;)(rn=_n[vt])&&-1<(_t=Se?ia(tt,rn):ei[vt])&&(tt[_t]=!(dt[_t]=rn))}}else _n=Ja(_n===dt?_n.splice(ki,_n.length):_n),Se?Se(null,dt,_n,qt):Vn.apply(dt,_n)})}function vs(se){for(var ve,Ae,He,Se=se.length,Je=F.relative[se[0].type],tt=Je||F.relative[" "],dt=Je?1:0,rt=Dr(function(vt){return vt===ve},tt,!0),qt=Dr(function(vt){return-1<ia(ve,vt)},tt,!0),_t=[function(vt,rn,ei){var Lt=!Je&&(ei||rn!==Ee)||((ve=rn).nodeType?rt(vt,rn,ei):qt(vt,rn,ei));return ve=null,Lt}];dt<Se;dt++)if(Ae=F.relative[se[dt].type])_t=[Dr(Ns(_t),Ae)];else{if((Ae=F.filter[se[dt].type].apply(null,se[dt].matches))[dn]){for(He=++dt;He<Se&&!F.relative[se[He].type];He++);return ho(1<dt&&Ns(_t),1<dt&&ya(se.slice(0,dt-1).concat({value:se[dt-2].type===" "?"*":""})).replace(Ci,"$1"),Ae,dt<He&&vs(se.slice(dt,He)),He<Se&&vs(se=se.slice(He)),He<Se&&ya(se))}_t.push(Ae)}return Ns(_t)}return $r.prototype=F.filters=F.pseudos,F.setFilters=new $r,ae=Kt.tokenize=function(se,ve){var Ae,He,Se,Je,tt,dt,rt,qt=Pi[se+" "];if(qt)return ve?0:qt.slice(0);for(tt=se,dt=[],rt=F.preFilter;tt;){for(Je in Ae&&!(He=Ma.exec(tt))||(He&&(tt=tt.slice(He[0].length)||tt),dt.push(Se=[])),Ae=!1,(He=gs.exec(tt))&&(Ae=He.shift(),Se.push({value:Ae,type:He[0].replace(Ci," ")}),tt=tt.slice(Ae.length)),F.filter)!(He=lr[Je].exec(tt))||rt[Je]&&!(He=rt[Je](He))||(Ae=He.shift(),Se.push({value:Ae,type:Je,matches:He}),tt=tt.slice(Ae.length));if(!Ae)break}return ve?tt.length:tt?Kt.error(se):Pi(se,dt).slice(0)},ye=Kt.compile=function(se,ve){var Ae,He,Se,Je,tt,dt,rt=[],qt=[],_t=Qo[se+" "];if(!_t){for(ve||(ve=ae(se)),Ae=ve.length;Ae--;)(_t=vs(ve[Ae]))[dn]?rt.push(_t):qt.push(_t);(_t=Qo(se,(He=qt,Je=0<(Se=rt).length,tt=0<He.length,dt=function(vt,rn,ei,Lt,ki){var li,Oi,_n,La=0,zn="0",ti=vt&&[],Wi=[],Ir=Ee,ur=vt||tt&&F.find.TAG("*",ki),Pa=pi+=Ir==null?1:Math.random()||.1,pa=ur.length;for(ki&&(Ee=rn==Ne||rn||ki);zn!==pa&&(li=ur[zn])!=null;zn++){if(tt&&li){for(Oi=0,rn||li.ownerDocument==Ne||(Pe(li),ei=!St);_n=He[Oi++];)if(_n(li,rn||Ne,ei)){Lt.push(li);break}ki&&(pi=Pa)}Je&&((li=!_n&&li)&&La--,vt&&ti.push(li))}if(La+=zn,Je&&zn!==La){for(Oi=0;_n=Se[Oi++];)_n(ti,Wi,rn,ei);if(vt){if(0<La)for(;zn--;)ti[zn]||Wi[zn]||(Wi[zn]=Rs.call(Lt));Wi=Ja(Wi)}Vn.apply(Lt,Wi),ki&&!vt&&0<Wi.length&&1<La+Se.length&&Kt.uniqueSort(Lt)}return ki&&(pi=Pa,Ee=Ir),ti},Je?fi(dt):dt))).selector=se}return _t},be=Kt.select=function(se,ve,Ae,He){var Se,Je,tt,dt,rt,qt=typeof se=="function"&&se,_t=!He&&ae(se=qt.selector||se);if(Ae=Ae||[],_t.length===1){if(2<(Je=_t[0]=_t[0].slice(0)).length&&(tt=Je[0]).type==="ID"&&ve.nodeType===9&&St&&F.relative[Je[1].type]){if(!(ve=(F.find.ID(tt.matches[0].replace(ua,Qa),ve)||[])[0]))return Ae;qt&&(ve=ve.parentNode),se=se.slice(Je.shift().value.length)}for(Se=lr.needsContext.test(se)?0:Je.length;Se--&&(tt=Je[Se],!F.relative[dt=tt.type]);)if((rt=F.find[dt])&&(He=rt(tt.matches[0].replace(ua,Qa),Xa.test(Je[0].type)&&el(ve.parentNode)||ve))){if(Je.splice(Se,1),!(se=He.length&&ya(Je)))return Vn.apply(Ae,He),Ae;break}}return(qt||ye(se,_t))(He,ve,!St,Ae,!ve||Xa.test(se)&&el(ve.parentNode)||ve),Ae},R.sortStable=dn.split("").sort(ai).join("")===dn,R.detectDuplicates=!!We,Pe(),R.sortDetached=Fi(function(se){return 1&se.compareDocumentPosition(Ne.createElement("fieldset"))}),Fi(function(se){return se.innerHTML="<a href='#'></a>",se.firstChild.getAttribute("href")==="#"})||aa("type|href|height|width",function(se,ve,Ae){if(!Ae)return se.getAttribute(ve,ve.toLowerCase()==="type"?1:2)}),R.attributes&&Fi(function(se){return se.innerHTML="<input/>",se.firstChild.setAttribute("value",""),se.firstChild.getAttribute("value")===""})||aa("value",function(se,ve,Ae){if(!Ae&&se.nodeName.toLowerCase()==="input")return se.defaultValue}),Fi(function(se){return se.getAttribute("disabled")==null})||aa(oi,function(se,ve,Ae){var He;if(!Ae)return se[ve]===!0?ve.toLowerCase():(He=se.getAttributeNode(ve))&&He.specified?He.value:null}),Kt}(B);q.find=Sa,q.expr=Sa.selectors,q.expr[":"]=q.expr.pseudos,q.uniqueSort=q.unique=Sa.uniqueSort,q.text=Sa.getText,q.isXMLDoc=Sa.isXML,q.contains=Sa.contains,q.escapeSelector=Sa.escape;var Ea=function(x,E,R){for(var F=[],Q=R!==void 0;(x=x[E])&&x.nodeType!==9;)if(x.nodeType===1){if(Q&&q(x).is(R))break;F.push(x)}return F},hi=function(x,E){for(var R=[];x;x=x.nextSibling)x.nodeType===1&&x!==E&&R.push(x);return R},ja=q.expr.match.needsContext;function wi(x,E){return x.nodeName&&x.nodeName.toLowerCase()===E.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Kr(x,E,R){return Qt(E)?q.grep(x,function(F,Q){return!!E.call(F,Q,F)!==R}):E.nodeType?q.grep(x,function(F){return F===E!==R}):typeof E!="string"?q.grep(x,function(F){return-1<la.call(E,F)!==R}):q.filter(E,x,R)}q.filter=function(x,E,R){var F=E[0];return R&&(x=":not("+x+")"),E.length===1&&F.nodeType===1?q.find.matchesSelector(F,x)?[F]:[]:q.find.matches(x,q.grep(E,function(Q){return Q.nodeType===1}))},q.fn.extend({find:function(x){var E,R,F=this.length,Q=this;if(typeof x!="string")return this.pushStack(q(x).filter(function(){for(E=0;E<F;E++)if(q.contains(Q[E],this))return!0}));for(R=this.pushStack([]),E=0;E<F;E++)q.find(x,Q[E],R);return 1<F?q.uniqueSort(R):R},filter:function(x){return this.pushStack(Kr(this,x||[],!1))},not:function(x){return this.pushStack(Kr(this,x||[],!0))},is:function(x){return!!Kr(this,typeof x=="string"&&ja.test(x)?q(x):x||[],!1).length}});var Ro,rs=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(q.fn.init=function(x,E,R){var F,Q;if(!x)return this;if(R=R||Ro,typeof x=="string"){if(!(F=x[0]==="<"&&x[x.length-1]===">"&&3<=x.length?[null,x,null]:rs.exec(x))||!F[1]&&E)return!E||E.jquery?(E||R).find(x):this.constructor(E).find(x);if(F[1]){if(E=E instanceof q?E[0]:E,q.merge(this,q.parseHTML(F[1],E&&E.nodeType?E.ownerDocument||E:ue,!0)),N.test(F[1])&&q.isPlainObject(E))for(F in E)Qt(this[F])?this[F](E[F]):this.attr(F,E[F]);return this}return(Q=ue.getElementById(F[2]))&&(this[0]=Q,this.length=1),this}return x.nodeType?(this[0]=x,this.length=1,this):Qt(x)?R.ready!==void 0?R.ready(x):x(q):q.makeArray(x,this)}).prototype=q.fn,Ro=q(ue);var Ys=/^(?:parents|prev(?:Until|All))/,ot={children:!0,contents:!0,next:!0,prev:!0};function os(x,E){for(;(x=x[E])&&x.nodeType!==1;);return x}q.fn.extend({has:function(x){var E=q(x,this),R=E.length;return this.filter(function(){for(var F=0;F<R;F++)if(q.contains(this,E[F]))return!0})},closest:function(x,E){var R,F=0,Q=this.length,ne=[],ae=typeof x!="string"&&q(x);if(!ja.test(x)){for(;F<Q;F++)for(R=this[F];R&&R!==E;R=R.parentNode)if(R.nodeType<11&&(ae?-1<ae.index(R):R.nodeType===1&&q.find.matchesSelector(R,x))){ne.push(R);break}}return this.pushStack(1<ne.length?q.uniqueSort(ne):ne)},index:function(x){return x?typeof x=="string"?la.call(q(x),this[0]):la.call(this,x.jquery?x[0]:x):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(x,E){return this.pushStack(q.uniqueSort(q.merge(this.get(),q(x,E))))},addBack:function(x){return this.add(x==null?this.prevObject:this.prevObject.filter(x))}}),q.each({parent:function(x){var E=x.parentNode;return E&&E.nodeType!==11?E:null},parents:function(x){return Ea(x,"parentNode")},parentsUntil:function(x,E,R){return Ea(x,"parentNode",R)},next:function(x){return os(x,"nextSibling")},prev:function(x){return os(x,"previousSibling")},nextAll:function(x){return Ea(x,"nextSibling")},prevAll:function(x){return Ea(x,"previousSibling")},nextUntil:function(x,E,R){return Ea(x,"nextSibling",R)},prevUntil:function(x,E,R){return Ea(x,"previousSibling",R)},siblings:function(x){return hi((x.parentNode||{}).firstChild,x)},children:function(x){return hi(x.firstChild)},contents:function(x){return x.contentDocument!=null&&Wr(x.contentDocument)?x.contentDocument:(wi(x,"template")&&(x=x.content||x),q.merge([],x.childNodes))}},function(x,E){q.fn[x]=function(R,F){var Q=q.map(this,E,R);return x.slice(-5)!=="Until"&&(F=R),F&&typeof F=="string"&&(Q=q.filter(F,Q)),1<this.length&&(ot[x]||q.uniqueSort(Q),Ys.test(x)&&Q.reverse()),this.pushStack(Q)}});var ut=/[^\x20\t\r\n\f]+/g;function ls(x){return x}function As(x){throw x}function No(x,E,R,F){var Q;try{x&&Qt(Q=x.promise)?Q.call(x).done(E).fail(R):x&&Qt(Q=x.then)?Q.call(x,E,R):E.apply(void 0,[x].slice(F))}catch(ne){R.apply(void 0,[ne])}}q.Callbacks=function(x){var E,R;x=typeof x=="string"?(E=x,R={},q.each(E.match(ut)||[],function(Pe,Ne){R[Ne]=!0}),R):q.extend({},x);var F,Q,ne,ae,ye=[],be=[],Ee=-1,Oe=function(){for(ae=ae||x.once,ne=F=!0;be.length;Ee=-1)for(Q=be.shift();++Ee<ye.length;)ye[Ee].apply(Q[0],Q[1])===!1&&x.stopOnFalse&&(Ee=ye.length,Q=!1);x.memory||(Q=!1),F=!1,ae&&(ye=Q?[]:"")},We={add:function(){return ye&&(Q&&!F&&(Ee=ye.length-1,be.push(Q)),function Pe(Ne){q.each(Ne,function(mt,St){Qt(St)?x.unique&&We.has(St)||ye.push(St):St&&St.length&&Va(St)!=="string"&&Pe(St)})}(arguments),Q&&!F&&Oe()),this},remove:function(){return q.each(arguments,function(Pe,Ne){for(var mt;-1<(mt=q.inArray(Ne,ye,mt));)ye.splice(mt,1),mt<=Ee&&Ee--}),this},has:function(Pe){return Pe?-1<q.inArray(Pe,ye):0<ye.length},empty:function(){return ye&&(ye=[]),this},disable:function(){return ae=be=[],ye=Q="",this},disabled:function(){return!ye},lock:function(){return ae=be=[],Q||F||(ye=Q=""),this},locked:function(){return!!ae},fireWith:function(Pe,Ne){return ae||(Ne=[Pe,(Ne=Ne||[]).slice?Ne.slice():Ne],be.push(Ne),F||Oe()),this},fire:function(){return We.fireWith(this,arguments),this},fired:function(){return!!ne}};return We},q.extend({Deferred:function(x){var E=[["notify","progress",q.Callbacks("memory"),q.Callbacks("memory"),2],["resolve","done",q.Callbacks("once memory"),q.Callbacks("once memory"),0,"resolved"],["reject","fail",q.Callbacks("once memory"),q.Callbacks("once memory"),1,"rejected"]],R="pending",F={state:function(){return R},always:function(){return Q.done(arguments).fail(arguments),this},catch:function(ne){return F.then(null,ne)},pipe:function(){var ne=arguments;return q.Deferred(function(ae){q.each(E,function(ye,be){var Ee=Qt(ne[be[4]])&&ne[be[4]];Q[be[1]](function(){var Oe=Ee&&Ee.apply(this,arguments);Oe&&Qt(Oe.promise)?Oe.promise().progress(ae.notify).done(ae.resolve).fail(ae.reject):ae[be[0]+"With"](this,Ee?[Oe]:arguments)})}),ne=null}).promise()},then:function(ne,ae,ye){var be=0;function Ee(Oe,We,Pe,Ne){return function(){var mt=this,St=arguments,wt=function(){var Bn,Li;if(!(Oe<be)){if((Bn=Pe.apply(mt,St))===We.promise())throw new TypeError("Thenable self-resolution");Li=Bn&&(typeof Bn=="object"||typeof Bn=="function")&&Bn.then,Qt(Li)?Ne?Li.call(Bn,Ee(be,We,ls,Ne),Ee(be,We,As,Ne)):(be++,Li.call(Bn,Ee(be,We,ls,Ne),Ee(be,We,As,Ne),Ee(be,We,ls,We.notifyWith))):(Pe!==ls&&(mt=void 0,St=[Bn]),(Ne||We.resolveWith)(mt,St))}},Gn=Ne?wt:function(){try{wt()}catch(Bn){q.Deferred.exceptionHook&&q.Deferred.exceptionHook(Bn,Gn.stackTrace),be<=Oe+1&&(Pe!==As&&(mt=void 0,St=[Bn]),We.rejectWith(mt,St))}};Oe?Gn():(q.Deferred.getStackHook&&(Gn.stackTrace=q.Deferred.getStackHook()),B.setTimeout(Gn))}}return q.Deferred(function(Oe){E[0][3].add(Ee(0,Oe,Qt(ye)?ye:ls,Oe.notifyWith)),E[1][3].add(Ee(0,Oe,Qt(ne)?ne:ls)),E[2][3].add(Ee(0,Oe,Qt(ae)?ae:As))}).promise()},promise:function(ne){return ne!=null?q.extend(ne,F):F}},Q={};return q.each(E,function(ne,ae){var ye=ae[2],be=ae[5];F[ae[1]]=ye.add,be&&ye.add(function(){R=be},E[3-ne][2].disable,E[3-ne][3].disable,E[0][2].lock,E[0][3].lock),ye.add(ae[3].fire),Q[ae[0]]=function(){return Q[ae[0]+"With"](this===Q?void 0:this,arguments),this},Q[ae[0]+"With"]=ye.fireWith}),F.promise(Q),x&&x.call(Q,Q),Q},when:function(x){var E=arguments.length,R=E,F=Array(R),Q=Ts.call(arguments),ne=q.Deferred(),ae=function(ye){return function(be){F[ye]=this,Q[ye]=1<arguments.length?Ts.call(arguments):be,--E||ne.resolveWith(F,Q)}};if(E<=1&&(No(x,ne.done(ae(R)).resolve,ne.reject,!E),ne.state()==="pending"||Qt(Q[R]&&Q[R].then)))return ne.then();for(;R--;)No(Q[R],ae(R),ne.reject);return ne.promise()}});var Ks=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;q.Deferred.exceptionHook=function(x,E){B.console&&B.console.warn&&x&&Ks.test(x.name)&&B.console.warn("jQuery.Deferred exception: "+x.message,x.stack,E)},q.readyException=function(x){B.setTimeout(function(){throw x})};var L=q.Deferred();function Xs(){ue.removeEventListener("DOMContentLoaded",Xs),B.removeEventListener("load",Xs),q.ready()}q.fn.ready=function(x){return L.then(x).catch(function(E){q.readyException(E)}),this},q.extend({isReady:!1,readyWait:1,ready:function(x){(x===!0?--q.readyWait:q.isReady)||(q.isReady=!0)!==x&&0<--q.readyWait||L.resolveWith(ue,[q])}}),q.ready.then=L.then,ue.readyState==="complete"||ue.readyState!=="loading"&&!ue.documentElement.doScroll?B.setTimeout(q.ready):(ue.addEventListener("DOMContentLoaded",Xs),B.addEventListener("load",Xs));var Pn=function(x,E,R,F,Q,ne,ae){var ye=0,be=x.length,Ee=R==null;if(Va(R)==="object")for(ye in Q=!0,R)Pn(x,E,ye,R[ye],!0,ne,ae);else if(F!==void 0&&(Q=!0,Qt(F)||(ae=!0),Ee&&(ae?(E.call(x,F),E=null):(Ee=E,E=function(Oe,We,Pe){return Ee.call(q(Oe),Pe)})),E))for(;ye<be;ye++)E(x[ye],R,ae?F:F.call(x[ye],ye,E(x[ye],R)));return Q?x:Ee?E.call(x):be?E(x[0],R):ne},Ss=/^-ms-/,Qs=/-([a-z])/g;function _o(x,E){return E.toUpperCase()}function Zi(x){return x.replace(Ss,"ms-").replace(Qs,_o)}var vr=function(x){return x.nodeType===1||x.nodeType===9||!+x.nodeType};function br(){this.expando=q.expando+br.uid++}br.uid=1,br.prototype={cache:function(x){var E=x[this.expando];return E||(E={},vr(x)&&(x.nodeType?x[this.expando]=E:Object.defineProperty(x,this.expando,{value:E,configurable:!0}))),E},set:function(x,E,R){var F,Q=this.cache(x);if(typeof E=="string")Q[Zi(E)]=R;else for(F in E)Q[Zi(F)]=E[F];return Q},get:function(x,E){return E===void 0?this.cache(x):x[this.expando]&&x[this.expando][Zi(E)]},access:function(x,E,R){return E===void 0||E&&typeof E=="string"&&R===void 0?this.get(x,E):(this.set(x,E,R),R!==void 0?R:E)},remove:function(x,E){var R,F=x[this.expando];if(F!==void 0){if(E!==void 0)for(R=(E=Array.isArray(E)?E.map(Zi):(E=Zi(E))in F?[E]:E.match(ut)||[]).length;R--;)delete F[E[R]];(E===void 0||q.isEmptyObject(F))&&(x.nodeType?x[this.expando]=void 0:delete x[this.expando])}},hasData:function(x){var E=x[this.expando];return E!==void 0&&!q.isEmptyObject(E)}};var Et=new br,Gt=new br,Es=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Hn=/[A-Z]/g;function Xr(x,E,R){var F,Q;if(R===void 0&&x.nodeType===1)if(F="data-"+E.replace(Hn,"-$&").toLowerCase(),typeof(R=x.getAttribute(F))=="string"){try{R=(Q=R)==="true"||Q!=="false"&&(Q==="null"?null:Q===+Q+""?+Q:Es.test(Q)?JSON.parse(Q):Q)}catch{}Gt.set(x,E,R)}else R=void 0;return R}q.extend({hasData:function(x){return Gt.hasData(x)||Et.hasData(x)},data:function(x,E,R){return Gt.access(x,E,R)},removeData:function(x,E){Gt.remove(x,E)},_data:function(x,E,R){return Et.access(x,E,R)},_removeData:function(x,E){Et.remove(x,E)}}),q.fn.extend({data:function(x,E){var R,F,Q,ne=this[0],ae=ne&&ne.attributes;if(x===void 0){if(this.length&&(Q=Gt.get(ne),ne.nodeType===1&&!Et.get(ne,"hasDataAttrs"))){for(R=ae.length;R--;)ae[R]&&(F=ae[R].name).indexOf("data-")===0&&(F=Zi(F.slice(5)),Xr(ne,F,Q[F]));Et.set(ne,"hasDataAttrs",!0)}return Q}return typeof x=="object"?this.each(function(){Gt.set(this,x)}):Pn(this,function(ye){var be;if(ne&&ye===void 0)return(be=Gt.get(ne,x))!==void 0||(be=Xr(ne,x))!==void 0?be:void 0;this.each(function(){Gt.set(this,x,ye)})},null,E,1<arguments.length,null,!0)},removeData:function(x){return this.each(function(){Gt.remove(this,x)})}}),q.extend({queue:function(x,E,R){var F;if(x)return E=(E||"fx")+"queue",F=Et.get(x,E),R&&(!F||Array.isArray(R)?F=Et.access(x,E,q.makeArray(R)):F.push(R)),F||[]},dequeue:function(x,E){E=E||"fx";var R=q.queue(x,E),F=R.length,Q=R.shift(),ne=q._queueHooks(x,E);Q==="inprogress"&&(Q=R.shift(),F--),Q&&(E==="fx"&&R.unshift("inprogress"),delete ne.stop,Q.call(x,function(){q.dequeue(x,E)},ne)),!F&&ne&&ne.empty.fire()},_queueHooks:function(x,E){var R=E+"queueHooks";return Et.get(x,R)||Et.access(x,R,{empty:q.Callbacks("once memory").add(function(){Et.remove(x,[E+"queue",R])})})}}),q.fn.extend({queue:function(x,E){var R=2;return typeof x!="string"&&(E=x,x="fx",R--),arguments.length<R?q.queue(this[0],x):E===void 0?this:this.each(function(){var F=q.queue(this,x,E);q._queueHooks(this,x),x==="fx"&&F[0]!=="inprogress"&&q.dequeue(this,x)})},dequeue:function(x){return this.each(function(){q.dequeue(this,x)})},clearQueue:function(x){return this.queue(x||"fx",[])},promise:function(x,E){var R,F=1,Q=q.Deferred(),ne=this,ae=this.length,ye=function(){--F||Q.resolveWith(ne,[ne])};for(typeof x!="string"&&(E=x,x=void 0),x=x||"fx";ae--;)(R=Et.get(ne[ae],x+"queueHooks"))&&R.empty&&(F++,R.empty.add(ye));return ye(),Q.promise(E)}});var Qr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$s=new RegExp("^(?:([+-])=|)("+Qr+")([a-z%]*)$","i"),ea=["Top","Right","Bottom","Left"],$a=ue.documentElement,Wa=function(x){return q.contains(x.ownerDocument,x)},ca={composed:!0};$a.getRootNode&&(Wa=function(x){return q.contains(x.ownerDocument,x)||x.getRootNode(ca)===x.ownerDocument});var Ds=function(x,E){return(x=E||x).style.display==="none"||x.style.display===""&&Wa(x)&&q.css(x,"display")==="none"};function Js(x,E,R,F){var Q,ne,ae=20,ye=F?function(){return F.cur()}:function(){return q.css(x,E,"")},be=ye(),Ee=R&&R[3]||(q.cssNumber[E]?"":"px"),Oe=x.nodeType&&(q.cssNumber[E]||Ee!=="px"&&+be)&&$s.exec(q.css(x,E));if(Oe&&Oe[3]!==Ee){for(be/=2,Ee=Ee||Oe[3],Oe=+be||1;ae--;)q.style(x,E,Oe+Ee),(1-ne)*(1-(ne=ye()/be||.5))<=0&&(ae=0),Oe/=ne;Oe*=2,q.style(x,E,Oe+Ee),R=R||[]}return R&&(Oe=+Oe||+be||0,Q=R[1]?Oe+(R[1]+1)*R[2]:+R[2],F&&(F.unit=Ee,F.start=Oe,F.end=Q)),Q}var Is={};function Ua(x,E){for(var R,F,Q,ne,ae,ye,be,Ee=[],Oe=0,We=x.length;Oe<We;Oe++)(F=x[Oe]).style&&(R=F.style.display,E?(R==="none"&&(Ee[Oe]=Et.get(F,"display")||null,Ee[Oe]||(F.style.display="")),F.style.display===""&&Ds(F)&&(Ee[Oe]=(be=ae=ne=void 0,ae=(Q=F).ownerDocument,ye=Q.nodeName,(be=Is[ye])||(ne=ae.body.appendChild(ae.createElement(ye)),be=q.css(ne,"display"),ne.parentNode.removeChild(ne),be==="none"&&(be="block"),Is[ye]=be)))):R!=="none"&&(Ee[Oe]="none",Et.set(F,"display",R)));for(Oe=0;Oe<We;Oe++)Ee[Oe]!=null&&(x[Oe].style.display=Ee[Oe]);return x}q.fn.extend({show:function(){return Ua(this,!0)},hide:function(){return Ua(this)},toggle:function(x){return typeof x=="boolean"?x?this.show():this.hide():this.each(function(){Ds(this)?q(this).show():q(this).hide()})}});var Ms,Jr,Zs=/^(?:checkbox|radio)$/i,dc=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,cs=/^$|^module$|\/(?:java|ecma)script/i;Ms=ue.createDocumentFragment().appendChild(ue.createElement("div")),(Jr=ue.createElement("input")).setAttribute("type","radio"),Jr.setAttribute("checked","checked"),Jr.setAttribute("name","t"),Ms.appendChild(Jr),Nt.checkClone=Ms.cloneNode(!0).cloneNode(!0).lastChild.checked,Ms.innerHTML="<textarea>x</textarea>",Nt.noCloneChecked=!!Ms.cloneNode(!0).lastChild.defaultValue,Ms.innerHTML="<option></option>",Nt.option=!!Ms.lastChild;var ft={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xi(x,E){var R;return R=typeof x.getElementsByTagName<"u"?x.getElementsByTagName(E||"*"):typeof x.querySelectorAll<"u"?x.querySelectorAll(E||"*"):[],E===void 0||E&&wi(x,E)?q.merge([x],R):R}function zo(x,E){for(var R=0,F=x.length;R<F;R++)Et.set(x[R],"globalEval",!E||Et.get(E[R],"globalEval"))}ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,Nt.option||(ft.optgroup=ft.option=[1,"<select multiple='multiple'>","</select>"]);var Cl=/<|&#?\w+;/;function kl(x,E,R,F,Q){for(var ne,ae,ye,be,Ee,Oe,We=E.createDocumentFragment(),Pe=[],Ne=0,mt=x.length;Ne<mt;Ne++)if((ne=x[Ne])||ne===0)if(Va(ne)==="object")q.merge(Pe,ne.nodeType?[ne]:ne);else if(Cl.test(ne)){for(ae=ae||We.appendChild(E.createElement("div")),ye=(dc.exec(ne)||["",""])[1].toLowerCase(),be=ft[ye]||ft._default,ae.innerHTML=be[1]+q.htmlPrefilter(ne)+be[2],Oe=be[0];Oe--;)ae=ae.lastChild;q.merge(Pe,ae.childNodes),(ae=We.firstChild).textContent=""}else Pe.push(E.createTextNode(ne));for(We.textContent="",Ne=0;ne=Pe[Ne++];)if(F&&-1<q.inArray(ne,F))Q&&Q.push(ne);else if(Ee=Wa(ne),ae=xi(We.appendChild(ne),"script"),Ee&&zo(ae),R)for(Oe=0;ne=ae[Oe++];)cs.test(ne.type||"")&&R.push(ne);return We}var Vi=/^([^.]*)(?:\.(.+)|)/;function Ls(){return!0}function ds(){return!1}function uc(x,E){return x===function(){try{return ue.activeElement}catch{}}()==(E==="focus")}function Zr(x,E,R,F,Q,ne){var ae,ye;if(typeof E=="object"){for(ye in typeof R!="string"&&(F=F||R,R=void 0),E)Zr(x,ye,R,F,E[ye],ne);return x}if(F==null&&Q==null?(Q=R,F=R=void 0):Q==null&&(typeof R=="string"?(Q=F,F=void 0):(Q=F,F=R,R=void 0)),Q===!1)Q=ds;else if(!Q)return x;return ne===1&&(ae=Q,(Q=function(be){return q().off(be),ae.apply(this,arguments)}).guid=ae.guid||(ae.guid=q.guid++)),x.each(function(){q.event.add(this,E,Q,F,R)})}function yr(x,E,R){R?(Et.set(x,E,!1),q.event.add(x,E,{namespace:!1,handler:function(F){var Q,ne,ae=Et.get(this,E);if(1&F.isTrigger&&this[E]){if(ae.length)(q.event.special[E]||{}).delegateType&&F.stopPropagation();else if(ae=Ts.call(arguments),Et.set(this,E,ae),Q=R(this,E),this[E](),ae!==(ne=Et.get(this,E))||Q?Et.set(this,E,!1):ne={},ae!==ne)return F.stopImmediatePropagation(),F.preventDefault(),ne&&ne.value}else ae.length&&(Et.set(this,E,{value:q.event.trigger(q.extend(ae[0],q.Event.prototype),ae.slice(1),this)}),F.stopImmediatePropagation())}})):Et.get(x,E)===void 0&&q.event.add(x,E,Ls)}q.event={global:{},add:function(x,E,R,F,Q){var ne,ae,ye,be,Ee,Oe,We,Pe,Ne,mt,St,wt=Et.get(x);if(vr(x))for(R.handler&&(R=(ne=R).handler,Q=ne.selector),Q&&q.find.matchesSelector($a,Q),R.guid||(R.guid=q.guid++),(be=wt.events)||(be=wt.events=Object.create(null)),(ae=wt.handle)||(ae=wt.handle=function(Gn){return typeof q<"u"&&q.event.triggered!==Gn.type?q.event.dispatch.apply(x,arguments):void 0}),Ee=(E=(E||"").match(ut)||[""]).length;Ee--;)Ne=St=(ye=Vi.exec(E[Ee])||[])[1],mt=(ye[2]||"").split(".").sort(),Ne&&(We=q.event.special[Ne]||{},Ne=(Q?We.delegateType:We.bindType)||Ne,We=q.event.special[Ne]||{},Oe=q.extend({type:Ne,origType:St,data:F,handler:R,guid:R.guid,selector:Q,needsContext:Q&&q.expr.match.needsContext.test(Q),namespace:mt.join(".")},ne),(Pe=be[Ne])||((Pe=be[Ne]=[]).delegateCount=0,We.setup&&We.setup.call(x,F,mt,ae)!==!1||x.addEventListener&&x.addEventListener(Ne,ae)),We.add&&(We.add.call(x,Oe),Oe.handler.guid||(Oe.handler.guid=R.guid)),Q?Pe.splice(Pe.delegateCount++,0,Oe):Pe.push(Oe),q.event.global[Ne]=!0)},remove:function(x,E,R,F,Q){var ne,ae,ye,be,Ee,Oe,We,Pe,Ne,mt,St,wt=Et.hasData(x)&&Et.get(x);if(wt&&(be=wt.events)){for(Ee=(E=(E||"").match(ut)||[""]).length;Ee--;)if(Ne=St=(ye=Vi.exec(E[Ee])||[])[1],mt=(ye[2]||"").split(".").sort(),Ne){for(We=q.event.special[Ne]||{},Pe=be[Ne=(F?We.delegateType:We.bindType)||Ne]||[],ye=ye[2]&&new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),ae=ne=Pe.length;ne--;)Oe=Pe[ne],!Q&&St!==Oe.origType||R&&R.guid!==Oe.guid||ye&&!ye.test(Oe.namespace)||F&&F!==Oe.selector&&(F!=="**"||!Oe.selector)||(Pe.splice(ne,1),Oe.selector&&Pe.delegateCount--,We.remove&&We.remove.call(x,Oe));ae&&!Pe.length&&(We.teardown&&We.teardown.call(x,mt,wt.handle)!==!1||q.removeEvent(x,Ne,wt.handle),delete be[Ne])}else for(Ne in be)q.event.remove(x,Ne+E[Ee],R,F,!0);q.isEmptyObject(be)&&Et.remove(x,"handle events")}},dispatch:function(x){var E,R,F,Q,ne,ae,ye=new Array(arguments.length),be=q.event.fix(x),Ee=(Et.get(this,"events")||Object.create(null))[be.type]||[],Oe=q.event.special[be.type]||{};for(ye[0]=be,E=1;E<arguments.length;E++)ye[E]=arguments[E];if(be.delegateTarget=this,!Oe.preDispatch||Oe.preDispatch.call(this,be)!==!1){for(ae=q.event.handlers.call(this,be,Ee),E=0;(Q=ae[E++])&&!be.isPropagationStopped();)for(be.currentTarget=Q.elem,R=0;(ne=Q.handlers[R++])&&!be.isImmediatePropagationStopped();)be.rnamespace&&ne.namespace!==!1&&!be.rnamespace.test(ne.namespace)||(be.handleObj=ne,be.data=ne.data,(F=((q.event.special[ne.origType]||{}).handle||ne.handler).apply(Q.elem,ye))!==void 0&&(be.result=F)===!1&&(be.preventDefault(),be.stopPropagation()));return Oe.postDispatch&&Oe.postDispatch.call(this,be),be.result}},handlers:function(x,E){var R,F,Q,ne,ae,ye=[],be=E.delegateCount,Ee=x.target;if(be&&Ee.nodeType&&!(x.type==="click"&&1<=x.button)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&(x.type!=="click"||Ee.disabled!==!0)){for(ne=[],ae={},R=0;R<be;R++)ae[Q=(F=E[R]).selector+" "]===void 0&&(ae[Q]=F.needsContext?-1<q(Q,this).index(Ee):q.find(Q,this,null,[Ee]).length),ae[Q]&&ne.push(F);ne.length&&ye.push({elem:Ee,handlers:ne})}}return Ee=this,be<E.length&&ye.push({elem:Ee,handlers:E.slice(be)}),ye},addProp:function(x,E){Object.defineProperty(q.Event.prototype,x,{enumerable:!0,configurable:!0,get:Qt(E)?function(){if(this.originalEvent)return E(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[x]},set:function(R){Object.defineProperty(this,x,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(x){return x[q.expando]?x:new q.Event(x)},special:{load:{noBubble:!0},click:{setup:function(x){var E=this||x;return Zs.test(E.type)&&E.click&&wi(E,"input")&&yr(E,"click",Ls),!1},trigger:function(x){var E=this||x;return Zs.test(E.type)&&E.click&&wi(E,"input")&&yr(E,"click"),!0},_default:function(x){var E=x.target;return Zs.test(E.type)&&E.click&&wi(E,"input")&&Et.get(E,"click")||wi(E,"a")}},beforeunload:{postDispatch:function(x){x.result!==void 0&&x.originalEvent&&(x.originalEvent.returnValue=x.result)}}}},q.removeEvent=function(x,E,R){x.removeEventListener&&x.removeEventListener(E,R)},q.Event=function(x,E){if(!(this instanceof q.Event))return new q.Event(x,E);x&&x.type?(this.originalEvent=x,this.type=x.type,this.isDefaultPrevented=x.defaultPrevented||x.defaultPrevented===void 0&&x.returnValue===!1?Ls:ds,this.target=x.target&&x.target.nodeType===3?x.target.parentNode:x.target,this.currentTarget=x.currentTarget,this.relatedTarget=x.relatedTarget):this.type=x,E&&q.extend(this,E),this.timeStamp=x&&x.timeStamp||Date.now(),this[q.expando]=!0},q.Event.prototype={constructor:q.Event,isDefaultPrevented:ds,isPropagationStopped:ds,isImmediatePropagationStopped:ds,isSimulated:!1,preventDefault:function(){var x=this.originalEvent;this.isDefaultPrevented=Ls,x&&!this.isSimulated&&x.preventDefault()},stopPropagation:function(){var x=this.originalEvent;this.isPropagationStopped=Ls,x&&!this.isSimulated&&x.stopPropagation()},stopImmediatePropagation:function(){var x=this.originalEvent;this.isImmediatePropagationStopped=Ls,x&&!this.isSimulated&&x.stopImmediatePropagation(),this.stopPropagation()}},q.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},q.event.addProp),q.each({focus:"focusin",blur:"focusout"},function(x,E){q.event.special[x]={setup:function(){return yr(this,x,uc),!1},trigger:function(){return yr(this,x),!0},_default:function(R){return Et.get(R.target,x)},delegateType:E}}),q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(x,E){q.event.special[x]={delegateType:E,bindType:E,handle:function(R){var F,Q=R.relatedTarget,ne=R.handleObj;return Q&&(Q===this||q.contains(this,Q))||(R.type=ne.origType,F=ne.handler.apply(this,arguments),R.type=E),F}}}),q.fn.extend({on:function(x,E,R,F){return Zr(this,x,E,R,F)},one:function(x,E,R,F){return Zr(this,x,E,R,F,1)},off:function(x,E,R){var F,Q;if(x&&x.preventDefault&&x.handleObj)return F=x.handleObj,q(x.delegateTarget).off(F.namespace?F.origType+"."+F.namespace:F.origType,F.selector,F.handler),this;if(typeof x=="object"){for(Q in x)this.off(Q,E,x[Q]);return this}return E!==!1&&typeof E!="function"||(R=E,E=void 0),R===!1&&(R=ds),this.each(function(){q.event.remove(this,x,R,E)})}});var xd=/<script|<style|<link/i,Tl=/checked\s*(?:[^=]|=\s*.checked.)/i,er=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ps(x,E){return wi(x,"table")&&wi(E.nodeType!==11?E:E.firstChild,"tr")&&q(x).children("tbody")[0]||x}function Fo(x){return x.type=(x.getAttribute("type")!==null)+"/"+x.type,x}function Cd(x){return(x.type||"").slice(0,5)==="true/"?x.type=x.type.slice(5):x.removeAttribute("type"),x}function Bs(x,E){var R,F,Q,ne,ae,ye;if(E.nodeType===1){if(Et.hasData(x)&&(ye=Et.get(x).events))for(Q in Et.remove(E,"handle events"),ye)for(R=0,F=ye[Q].length;R<F;R++)q.event.add(E,Q,ye[Q][R]);Gt.hasData(x)&&(ne=Gt.access(x),ae=q.extend({},ne),Gt.set(E,ae))}}function us(x,E,R,F){E=Oo(E);var Q,ne,ae,ye,be,Ee,Oe=0,We=x.length,Pe=We-1,Ne=E[0],mt=Qt(Ne);if(mt||1<We&&typeof Ne=="string"&&!Nt.checkClone&&Tl.test(Ne))return x.each(function(St){var wt=x.eq(St);mt&&(E[0]=Ne.call(this,St,wt.html())),us(wt,E,R,F)});if(We&&(ne=(Q=kl(E,x[0].ownerDocument,!1,x,F)).firstChild,Q.childNodes.length===1&&(Q=ne),ne||F)){for(ye=(ae=q.map(xi(Q,"script"),Fo)).length;Oe<We;Oe++)be=Q,Oe!==Pe&&(be=q.clone(be,!0,!0),ye&&q.merge(ae,xi(be,"script"))),R.call(x[Oe],be,Oe);if(ye)for(Ee=ae[ae.length-1].ownerDocument,q.map(ae,Cd),Oe=0;Oe<ye;Oe++)be=ae[Oe],cs.test(be.type||"")&&!Et.access(be,"globalEval")&&q.contains(Ee,be)&&(be.src&&(be.type||"").toLowerCase()!=="module"?q._evalUrl&&!be.noModule&&q._evalUrl(be.src,{nonce:be.nonce||be.getAttribute("nonce")},Ee):Yr(be.textContent.replace(er,""),be,Ee))}return x}function hc(x,E,R){for(var F,Q=E?q.filter(E,x):x,ne=0;(F=Q[ne])!=null;ne++)R||F.nodeType!==1||q.cleanData(xi(F)),F.parentNode&&(R&&Wa(F)&&zo(xi(F,"script")),F.parentNode.removeChild(F));return x}q.extend({htmlPrefilter:function(x){return x},clone:function(x,E,R){var F,Q,ne,ae,ye,be,Ee,Oe=x.cloneNode(!0),We=Wa(x);if(!(Nt.noCloneChecked||x.nodeType!==1&&x.nodeType!==11||q.isXMLDoc(x)))for(ae=xi(Oe),F=0,Q=(ne=xi(x)).length;F<Q;F++)ye=ne[F],be=ae[F],(Ee=be.nodeName.toLowerCase())==="input"&&Zs.test(ye.type)?be.checked=ye.checked:Ee!=="input"&&Ee!=="textarea"||(be.defaultValue=ye.defaultValue);if(E)if(R)for(ne=ne||xi(x),ae=ae||xi(Oe),F=0,Q=ne.length;F<Q;F++)Bs(ne[F],ae[F]);else Bs(x,Oe);return 0<(ae=xi(Oe,"script")).length&&zo(ae,!We&&xi(x,"script")),Oe},cleanData:function(x){for(var E,R,F,Q=q.event.special,ne=0;(R=x[ne])!==void 0;ne++)if(vr(R)){if(E=R[Et.expando]){if(E.events)for(F in E.events)Q[F]?q.event.remove(R,F):q.removeEvent(R,F,E.handle);R[Et.expando]=void 0}R[Gt.expando]&&(R[Gt.expando]=void 0)}}}),q.fn.extend({detach:function(x){return hc(this,x,!0)},remove:function(x){return hc(this,x)},text:function(x){return Pn(this,function(E){return E===void 0?q.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=E)})},null,x,arguments.length)},append:function(){return us(this,arguments,function(x){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||Ps(this,x).appendChild(x)})},prepend:function(){return us(this,arguments,function(x){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var E=Ps(this,x);E.insertBefore(x,E.firstChild)}})},before:function(){return us(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this)})},after:function(){return us(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this.nextSibling)})},empty:function(){for(var x,E=0;(x=this[E])!=null;E++)x.nodeType===1&&(q.cleanData(xi(x,!1)),x.textContent="");return this},clone:function(x,E){return x=x!=null&&x,E=E??x,this.map(function(){return q.clone(this,x,E)})},html:function(x){return Pn(this,function(E){var R=this[0]||{},F=0,Q=this.length;if(E===void 0&&R.nodeType===1)return R.innerHTML;if(typeof E=="string"&&!xd.test(E)&&!ft[(dc.exec(E)||["",""])[1].toLowerCase()]){E=q.htmlPrefilter(E);try{for(;F<Q;F++)(R=this[F]||{}).nodeType===1&&(q.cleanData(xi(R,!1)),R.innerHTML=E);R=0}catch{}}R&&this.empty().append(E)},null,x,arguments.length)},replaceWith:function(){var x=[];return us(this,arguments,function(E){var R=this.parentNode;q.inArray(this,x)<0&&(q.cleanData(xi(this)),R&&R.replaceChild(E,this))},x)}}),q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(x,E){q.fn[x]=function(R){for(var F,Q=[],ne=q(R),ae=ne.length-1,ye=0;ye<=ae;ye++)F=ye===ae?this:this.clone(!0),q(ne[ye])[E](F),Ur.apply(Q,F.get());return this.pushStack(Q)}});var tr=new RegExp("^("+Qr+")(?!px)[a-z%]+$","i"),nr=/^--/,Ga=function(x){var E=x.ownerDocument.defaultView;return E&&E.opener||(E=B),E.getComputedStyle(x)},Ho=function(x,E,R){var F,Q,ne={};for(Q in E)ne[Q]=x.style[Q],x.style[Q]=E[Q];for(Q in F=R.call(x),E)x.style[Q]=ne[Q];return F},ir=new RegExp(ea.join("|"),"i"),cn="[\\x20\\t\\r\\n\\f]",kd=new RegExp("^"+cn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cn+"+$","g");function Da(x,E,R){var F,Q,ne,ae,ye=nr.test(E),be=x.style;return(R=R||Ga(x))&&(ae=R.getPropertyValue(E)||R[E],ye&&ae&&(ae=ae.replace(kd,"$1")||void 0),ae!==""||Wa(x)||(ae=q.style(x,E)),!Nt.pixelBoxStyles()&&tr.test(ae)&&ir.test(E)&&(F=be.width,Q=be.minWidth,ne=be.maxWidth,be.minWidth=be.maxWidth=be.width=ae,ae=R.width,be.width=F,be.minWidth=Q,be.maxWidth=ne)),ae!==void 0?ae+"":ae}function wr(x,E){return{get:function(){if(!x())return(this.get=E).apply(this,arguments);delete this.get}}}(function(){function x(){if(Ee){be.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",$a.appendChild(be).appendChild(Ee);var Oe=B.getComputedStyle(Ee);R=Oe.top!=="1%",ye=E(Oe.marginLeft)===12,Ee.style.right="60%",ne=E(Oe.right)===36,F=E(Oe.width)===36,Ee.style.position="absolute",Q=E(Ee.offsetWidth/3)===12,$a.removeChild(be),Ee=null}}function E(Oe){return Math.round(parseFloat(Oe))}var R,F,Q,ne,ae,ye,be=ue.createElement("div"),Ee=ue.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",Nt.clearCloneStyle=Ee.style.backgroundClip==="content-box",q.extend(Nt,{boxSizingReliable:function(){return x(),F},pixelBoxStyles:function(){return x(),ne},pixelPosition:function(){return x(),R},reliableMarginLeft:function(){return x(),ye},scrollboxSize:function(){return x(),Q},reliableTrDimensions:function(){var Oe,We,Pe,Ne;return ae==null&&(Oe=ue.createElement("table"),We=ue.createElement("tr"),Pe=ue.createElement("div"),Oe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",We.style.cssText="border:1px solid",We.style.height="1px",Pe.style.height="9px",Pe.style.display="block",$a.appendChild(Oe).appendChild(We).appendChild(Pe),Ne=B.getComputedStyle(We),ae=parseInt(Ne.height,10)+parseInt(Ne.borderTopWidth,10)+parseInt(Ne.borderBottomWidth,10)===We.offsetHeight,$a.removeChild(Oe)),ae}}))})();var eo=["Webkit","Moz","ms"],qo=ue.createElement("div").style,xr={};function ar(x){var E=q.cssProps[x]||xr[x];return E||(x in qo?x:xr[x]=function(R){for(var F=R[0].toUpperCase()+R.slice(1),Q=eo.length;Q--;)if((R=eo[Q]+F)in qo)return R}(x)||x)}var to=/^(none|table(?!-c[ea]).+)/,Al={position:"absolute",visibility:"hidden",display:"block"},pc={letterSpacing:"0",fontWeight:"400"};function Vo(x,E,R){var F=$s.exec(E);return F?Math.max(0,F[2]-(R||0))+(F[3]||"px"):E}function no(x,E,R,F,Q,ne){var ae=E==="width"?1:0,ye=0,be=0;if(R===(F?"border":"content"))return 0;for(;ae<4;ae+=2)R==="margin"&&(be+=q.css(x,R+ea[ae],!0,Q)),F?(R==="content"&&(be-=q.css(x,"padding"+ea[ae],!0,Q)),R!=="margin"&&(be-=q.css(x,"border"+ea[ae]+"Width",!0,Q))):(be+=q.css(x,"padding"+ea[ae],!0,Q),R!=="padding"?be+=q.css(x,"border"+ea[ae]+"Width",!0,Q):ye+=q.css(x,"border"+ea[ae]+"Width",!0,Q));return!F&&0<=ne&&(be+=Math.max(0,Math.ceil(x["offset"+E[0].toUpperCase()+E.slice(1)]-ne-be-ye-.5))||0),be}function fc(x,E,R){var F=Ga(x),Q=(!Nt.boxSizingReliable()||R)&&q.css(x,"boxSizing",!1,F)==="border-box",ne=Q,ae=Da(x,E,F),ye="offset"+E[0].toUpperCase()+E.slice(1);if(tr.test(ae)){if(!R)return ae;ae="auto"}return(!Nt.boxSizingReliable()&&Q||!Nt.reliableTrDimensions()&&wi(x,"tr")||ae==="auto"||!parseFloat(ae)&&q.css(x,"display",!1,F)==="inline")&&x.getClientRects().length&&(Q=q.css(x,"boxSizing",!1,F)==="border-box",(ne=ye in x)&&(ae=x[ye])),(ae=parseFloat(ae)||0)+no(x,E,R||(Q?"border":"content"),ne,F,ae)+"px"}function ta(x,E,R,F,Q){return new ta.prototype.init(x,E,R,F,Q)}q.extend({cssHooks:{opacity:{get:function(x,E){if(E){var R=Da(x,"opacity");return R===""?"1":R}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(x,E,R,F){if(x&&x.nodeType!==3&&x.nodeType!==8&&x.style){var Q,ne,ae,ye=Zi(E),be=nr.test(E),Ee=x.style;if(be||(E=ar(ye)),ae=q.cssHooks[E]||q.cssHooks[ye],R===void 0)return ae&&"get"in ae&&(Q=ae.get(x,!1,F))!==void 0?Q:Ee[E];(ne=typeof R)=="string"&&(Q=$s.exec(R))&&Q[1]&&(R=Js(x,E,Q),ne="number"),R!=null&&R==R&&(ne!=="number"||be||(R+=Q&&Q[3]||(q.cssNumber[ye]?"":"px")),Nt.clearCloneStyle||R!==""||E.indexOf("background")!==0||(Ee[E]="inherit"),ae&&"set"in ae&&(R=ae.set(x,R,F))===void 0||(be?Ee.setProperty(E,R):Ee[E]=R))}},css:function(x,E,R,F){var Q,ne,ae,ye=Zi(E);return nr.test(E)||(E=ar(ye)),(ae=q.cssHooks[E]||q.cssHooks[ye])&&"get"in ae&&(Q=ae.get(x,!0,R)),Q===void 0&&(Q=Da(x,E,F)),Q==="normal"&&E in pc&&(Q=pc[E]),R===""||R?(ne=parseFloat(Q),R===!0||isFinite(ne)?ne||0:Q):Q}}),q.each(["height","width"],function(x,E){q.cssHooks[E]={get:function(R,F,Q){if(F)return!to.test(q.css(R,"display"))||R.getClientRects().length&&R.getBoundingClientRect().width?fc(R,E,Q):Ho(R,Al,function(){return fc(R,E,Q)})},set:function(R,F,Q){var ne,ae=Ga(R),ye=!Nt.scrollboxSize()&&ae.position==="absolute",be=(ye||Q)&&q.css(R,"boxSizing",!1,ae)==="border-box",Ee=Q?no(R,E,Q,be,ae):0;return be&&ye&&(Ee-=Math.ceil(R["offset"+E[0].toUpperCase()+E.slice(1)]-parseFloat(ae[E])-no(R,E,"border",!1,ae)-.5)),Ee&&(ne=$s.exec(F))&&(ne[3]||"px")!=="px"&&(R.style[E]=F,F=q.css(R,E)),Vo(0,F,Ee)}}}),q.cssHooks.marginLeft=wr(Nt.reliableMarginLeft,function(x,E){if(E)return(parseFloat(Da(x,"marginLeft"))||x.getBoundingClientRect().left-Ho(x,{marginLeft:0},function(){return x.getBoundingClientRect().left}))+"px"}),q.each({margin:"",padding:"",border:"Width"},function(x,E){q.cssHooks[x+E]={expand:function(R){for(var F=0,Q={},ne=typeof R=="string"?R.split(" "):[R];F<4;F++)Q[x+ea[F]+E]=ne[F]||ne[F-2]||ne[0];return Q}},x!=="margin"&&(q.cssHooks[x+E].set=Vo)}),q.fn.extend({css:function(x,E){return Pn(this,function(R,F,Q){var ne,ae,ye={},be=0;if(Array.isArray(F)){for(ne=Ga(R),ae=F.length;be<ae;be++)ye[F[be]]=q.css(R,F[be],!1,ne);return ye}return Q!==void 0?q.style(R,F,Q):q.css(R,F)},x,E,1<arguments.length)}}),((q.Tween=ta).prototype={constructor:ta,init:function(x,E,R,F,Q,ne){this.elem=x,this.prop=R,this.easing=Q||q.easing._default,this.options=E,this.start=this.now=this.cur(),this.end=F,this.unit=ne||(q.cssNumber[R]?"":"px")},cur:function(){var x=ta.propHooks[this.prop];return x&&x.get?x.get(this):ta.propHooks._default.get(this)},run:function(x){var E,R=ta.propHooks[this.prop];return this.options.duration?this.pos=E=q.easing[this.easing](x,this.options.duration*x,0,1,this.options.duration):this.pos=E=x,this.now=(this.end-this.start)*E+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):ta.propHooks._default.set(this),this}}).init.prototype=ta.prototype,(ta.propHooks={_default:{get:function(x){var E;return x.elem.nodeType!==1||x.elem[x.prop]!=null&&x.elem.style[x.prop]==null?x.elem[x.prop]:(E=q.css(x.elem,x.prop,""))&&E!=="auto"?E:0},set:function(x){q.fx.step[x.prop]?q.fx.step[x.prop](x):x.elem.nodeType!==1||!q.cssHooks[x.prop]&&x.elem.style[ar(x.prop)]==null?x.elem[x.prop]=x.now:q.style(x.elem,x.prop,x.now+x.unit)}}}).scrollTop=ta.propHooks.scrollLeft={set:function(x){x.elem.nodeType&&x.elem.parentNode&&(x.elem[x.prop]=x.now)}},q.easing={linear:function(x){return x},swing:function(x){return .5-Math.cos(x*Math.PI)/2},_default:"swing"},q.fx=ta.prototype.init,q.fx.step={};var Ia,jo,Os,gt,Td=/^(?:toggle|show|hide)$/,gc=/queueHooks$/;function io(){jo&&(ue.hidden===!1&&B.requestAnimationFrame?B.requestAnimationFrame(io):B.setTimeout(io,q.fx.interval),q.fx.tick())}function mc(){return B.setTimeout(function(){Ia=void 0}),Ia=Date.now()}function Wo(x,E){var R,F=0,Q={height:x};for(E=E?1:0;F<4;F+=2-E)Q["margin"+(R=ea[F])]=Q["padding"+R]=x;return E&&(Q.opacity=Q.width=x),Q}function Sl(x,E,R){for(var F,Q=(da.tweeners[E]||[]).concat(da.tweeners["*"]),ne=0,ae=Q.length;ne<ae;ne++)if(F=Q[ne].call(R,E,x))return F}function da(x,E,R){var F,Q,ne=0,ae=da.prefilters.length,ye=q.Deferred().always(function(){delete be.elem}),be=function(){if(Q)return!1;for(var We=Ia||mc(),Pe=Math.max(0,Ee.startTime+Ee.duration-We),Ne=1-(Pe/Ee.duration||0),mt=0,St=Ee.tweens.length;mt<St;mt++)Ee.tweens[mt].run(Ne);return ye.notifyWith(x,[Ee,Ne,Pe]),Ne<1&&St?Pe:(St||ye.notifyWith(x,[Ee,1,0]),ye.resolveWith(x,[Ee]),!1)},Ee=ye.promise({elem:x,props:q.extend({},E),opts:q.extend(!0,{specialEasing:{},easing:q.easing._default},R),originalProperties:E,originalOptions:R,startTime:Ia||mc(),duration:R.duration,tweens:[],createTween:function(We,Pe){var Ne=q.Tween(x,Ee.opts,We,Pe,Ee.opts.specialEasing[We]||Ee.opts.easing);return Ee.tweens.push(Ne),Ne},stop:function(We){var Pe=0,Ne=We?Ee.tweens.length:0;if(Q)return this;for(Q=!0;Pe<Ne;Pe++)Ee.tweens[Pe].run(1);return We?(ye.notifyWith(x,[Ee,1,0]),ye.resolveWith(x,[Ee,We])):ye.rejectWith(x,[Ee,We]),this}}),Oe=Ee.props;for(!function(We,Pe){var Ne,mt,St,wt,Gn;for(Ne in We)if(St=Pe[mt=Zi(Ne)],wt=We[Ne],Array.isArray(wt)&&(St=wt[1],wt=We[Ne]=wt[0]),Ne!==mt&&(We[mt]=wt,delete We[Ne]),(Gn=q.cssHooks[mt])&&"expand"in Gn)for(Ne in wt=Gn.expand(wt),delete We[mt],wt)Ne in We||(We[Ne]=wt[Ne],Pe[Ne]=St);else Pe[mt]=St}(Oe,Ee.opts.specialEasing);ne<ae;ne++)if(F=da.prefilters[ne].call(Ee,x,Oe,Ee.opts))return Qt(F.stop)&&(q._queueHooks(Ee.elem,Ee.opts.queue).stop=F.stop.bind(F)),F;return q.map(Oe,Sl,Ee),Qt(Ee.opts.start)&&Ee.opts.start.call(x,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),q.fx.timer(q.extend(be,{elem:x,anim:Ee,queue:Ee.opts.queue})),Ee}q.Animation=q.extend(da,{tweeners:{"*":[function(x,E){var R=this.createTween(x,E);return Js(R.elem,x,$s.exec(E),R),R}]},tweener:function(x,E){Qt(x)?(E=x,x=["*"]):x=x.match(ut);for(var R,F=0,Q=x.length;F<Q;F++)R=x[F],da.tweeners[R]=da.tweeners[R]||[],da.tweeners[R].unshift(E)},prefilters:[function(x,E,R){var F,Q,ne,ae,ye,be,Ee,Oe,We="width"in E||"height"in E,Pe=this,Ne={},mt=x.style,St=x.nodeType&&Ds(x),wt=Et.get(x,"fxshow");for(F in R.queue||((ae=q._queueHooks(x,"fx")).unqueued==null&&(ae.unqueued=0,ye=ae.empty.fire,ae.empty.fire=function(){ae.unqueued||ye()}),ae.unqueued++,Pe.always(function(){Pe.always(function(){ae.unqueued--,q.queue(x,"fx").length||ae.empty.fire()})})),E)if(Q=E[F],Td.test(Q)){if(delete E[F],ne=ne||Q==="toggle",Q===(St?"hide":"show")){if(Q!=="show"||!wt||wt[F]===void 0)continue;St=!0}Ne[F]=wt&&wt[F]||q.style(x,F)}if((be=!q.isEmptyObject(E))||!q.isEmptyObject(Ne))for(F in We&&x.nodeType===1&&(R.overflow=[mt.overflow,mt.overflowX,mt.overflowY],(Ee=wt&&wt.display)==null&&(Ee=Et.get(x,"display")),(Oe=q.css(x,"display"))==="none"&&(Ee?Oe=Ee:(Ua([x],!0),Ee=x.style.display||Ee,Oe=q.css(x,"display"),Ua([x]))),(Oe==="inline"||Oe==="inline-block"&&Ee!=null)&&q.css(x,"float")==="none"&&(be||(Pe.done(function(){mt.display=Ee}),Ee==null&&(Oe=mt.display,Ee=Oe==="none"?"":Oe)),mt.display="inline-block")),R.overflow&&(mt.overflow="hidden",Pe.always(function(){mt.overflow=R.overflow[0],mt.overflowX=R.overflow[1],mt.overflowY=R.overflow[2]})),be=!1,Ne)be||(wt?"hidden"in wt&&(St=wt.hidden):wt=Et.access(x,"fxshow",{display:Ee}),ne&&(wt.hidden=!St),St&&Ua([x],!0),Pe.done(function(){for(F in St||Ua([x]),Et.remove(x,"fxshow"),Ne)q.style(x,F,Ne[F])})),be=Sl(St?wt[F]:0,F,Pe),F in wt||(wt[F]=be.start,St&&(be.end=be.start,be.start=0))}],prefilter:function(x,E){E?da.prefilters.unshift(x):da.prefilters.push(x)}}),q.speed=function(x,E,R){var F=x&&typeof x=="object"?q.extend({},x):{complete:R||!R&&E||Qt(x)&&x,duration:x,easing:R&&E||E&&!Qt(E)&&E};return q.fx.off?F.duration=0:typeof F.duration!="number"&&(F.duration in q.fx.speeds?F.duration=q.fx.speeds[F.duration]:F.duration=q.fx.speeds._default),F.queue!=null&&F.queue!==!0||(F.queue="fx"),F.old=F.complete,F.complete=function(){Qt(F.old)&&F.old.call(this),F.queue&&q.dequeue(this,F.queue)},F},q.fn.extend({fadeTo:function(x,E,R,F){return this.filter(Ds).css("opacity",0).show().end().animate({opacity:E},x,R,F)},animate:function(x,E,R,F){var Q=q.isEmptyObject(x),ne=q.speed(E,R,F),ae=function(){var ye=da(this,q.extend({},x),ne);(Q||Et.get(this,"finish"))&&ye.stop(!0)};return ae.finish=ae,Q||ne.queue===!1?this.each(ae):this.queue(ne.queue,ae)},stop:function(x,E,R){var F=function(Q){var ne=Q.stop;delete Q.stop,ne(R)};return typeof x!="string"&&(R=E,E=x,x=void 0),E&&this.queue(x||"fx",[]),this.each(function(){var Q=!0,ne=x!=null&&x+"queueHooks",ae=q.timers,ye=Et.get(this);if(ne)ye[ne]&&ye[ne].stop&&F(ye[ne]);else for(ne in ye)ye[ne]&&ye[ne].stop&&gc.test(ne)&&F(ye[ne]);for(ne=ae.length;ne--;)ae[ne].elem!==this||x!=null&&ae[ne].queue!==x||(ae[ne].anim.stop(R),Q=!1,ae.splice(ne,1));!Q&&R||q.dequeue(this,x)})},finish:function(x){return x!==!1&&(x=x||"fx"),this.each(function(){var E,R=Et.get(this),F=R[x+"queue"],Q=R[x+"queueHooks"],ne=q.timers,ae=F?F.length:0;for(R.finish=!0,q.queue(this,x,[]),Q&&Q.stop&&Q.stop.call(this,!0),E=ne.length;E--;)ne[E].elem===this&&ne[E].queue===x&&(ne[E].anim.stop(!0),ne.splice(E,1));for(E=0;E<ae;E++)F[E]&&F[E].finish&&F[E].finish.call(this);delete R.finish})}}),q.each(["toggle","show","hide"],function(x,E){var R=q.fn[E];q.fn[E]=function(F,Q,ne){return F==null||typeof F=="boolean"?R.apply(this,arguments):this.animate(Wo(E,!0),F,Q,ne)}}),q.each({slideDown:Wo("show"),slideUp:Wo("hide"),slideToggle:Wo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(x,E){q.fn[x]=function(R,F,Q){return this.animate(E,R,F,Q)}}),q.timers=[],q.fx.tick=function(){var x,E=0,R=q.timers;for(Ia=Date.now();E<R.length;E++)(x=R[E])()||R[E]!==x||R.splice(E--,1);R.length||q.fx.stop(),Ia=void 0},q.fx.timer=function(x){q.timers.push(x),q.fx.start()},q.fx.interval=13,q.fx.start=function(){jo||(jo=!0,io())},q.fx.stop=function(){jo=null},q.fx.speeds={slow:600,fast:200,_default:400},q.fn.delay=function(x,E){return x=q.fx&&q.fx.speeds[x]||x,E=E||"fx",this.queue(E,function(R,F){var Q=B.setTimeout(R,x);F.stop=function(){B.clearTimeout(Q)}})},Os=ue.createElement("input"),gt=ue.createElement("select").appendChild(ue.createElement("option")),Os.type="checkbox",Nt.checkOn=Os.value!=="",Nt.optSelected=gt.selected,(Os=ue.createElement("input")).value="t",Os.type="radio",Nt.radioValue=Os.value==="t";var vc,sr=q.expr.attrHandle;q.fn.extend({attr:function(x,E){return Pn(this,q.attr,x,E,1<arguments.length)},removeAttr:function(x){return this.each(function(){q.removeAttr(this,x)})}}),q.extend({attr:function(x,E,R){var F,Q,ne=x.nodeType;if(ne!==3&&ne!==8&&ne!==2)return typeof x.getAttribute>"u"?q.prop(x,E,R):(ne===1&&q.isXMLDoc(x)||(Q=q.attrHooks[E.toLowerCase()]||(q.expr.match.bool.test(E)?vc:void 0)),R!==void 0?R===null?void q.removeAttr(x,E):Q&&"set"in Q&&(F=Q.set(x,R,E))!==void 0?F:(x.setAttribute(E,R+""),R):Q&&"get"in Q&&(F=Q.get(x,E))!==null?F:(F=q.find.attr(x,E))==null?void 0:F)},attrHooks:{type:{set:function(x,E){if(!Nt.radioValue&&E==="radio"&&wi(x,"input")){var R=x.value;return x.setAttribute("type",E),R&&(x.value=R),E}}}},removeAttr:function(x,E){var R,F=0,Q=E&&E.match(ut);if(Q&&x.nodeType===1)for(;R=Q[F++];)x.removeAttribute(R)}}),vc={set:function(x,E,R){return E===!1?q.removeAttr(x,R):x.setAttribute(R,R),R}},q.each(q.expr.match.bool.source.match(/\w+/g),function(x,E){var R=sr[E]||q.find.attr;sr[E]=function(F,Q,ne){var ae,ye,be=Q.toLowerCase();return ne||(ye=sr[be],sr[be]=ae,ae=R(F,Q,ne)!=null?be:null,sr[be]=ye),ae}});var ao=/^(?:input|select|textarea|button)$/i,Ad=/^(?:a|area)$/i;function hs(x){return(x.match(ut)||[]).join(" ")}function ps(x){return x.getAttribute&&x.getAttribute("class")||""}function fs(x){return Array.isArray(x)?x:typeof x=="string"&&x.match(ut)||[]}q.fn.extend({prop:function(x,E){return Pn(this,q.prop,x,E,1<arguments.length)},removeProp:function(x){return this.each(function(){delete this[q.propFix[x]||x]})}}),q.extend({prop:function(x,E,R){var F,Q,ne=x.nodeType;if(ne!==3&&ne!==8&&ne!==2)return ne===1&&q.isXMLDoc(x)||(E=q.propFix[E]||E,Q=q.propHooks[E]),R!==void 0?Q&&"set"in Q&&(F=Q.set(x,R,E))!==void 0?F:x[E]=R:Q&&"get"in Q&&(F=Q.get(x,E))!==null?F:x[E]},propHooks:{tabIndex:{get:function(x){var E=q.find.attr(x,"tabindex");return E?parseInt(E,10):ao.test(x.nodeName)||Ad.test(x.nodeName)&&x.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Nt.optSelected||(q.propHooks.selected={get:function(x){var E=x.parentNode;return E&&E.parentNode&&E.parentNode.selectedIndex,null},set:function(x){var E=x.parentNode;E&&(E.selectedIndex,E.parentNode&&E.parentNode.selectedIndex)}}),q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){q.propFix[this.toLowerCase()]=this}),q.fn.extend({addClass:function(x){var E,R,F,Q,ne,ae;return Qt(x)?this.each(function(ye){q(this).addClass(x.call(this,ye,ps(this)))}):(E=fs(x)).length?this.each(function(){if(F=ps(this),R=this.nodeType===1&&" "+hs(F)+" "){for(ne=0;ne<E.length;ne++)Q=E[ne],R.indexOf(" "+Q+" ")<0&&(R+=Q+" ");ae=hs(R),F!==ae&&this.setAttribute("class",ae)}}):this},removeClass:function(x){var E,R,F,Q,ne,ae;return Qt(x)?this.each(function(ye){q(this).removeClass(x.call(this,ye,ps(this)))}):arguments.length?(E=fs(x)).length?this.each(function(){if(F=ps(this),R=this.nodeType===1&&" "+hs(F)+" "){for(ne=0;ne<E.length;ne++)for(Q=E[ne];-1<R.indexOf(" "+Q+" ");)R=R.replace(" "+Q+" "," ");ae=hs(R),F!==ae&&this.setAttribute("class",ae)}}):this:this.attr("class","")},toggleClass:function(x,E){var R,F,Q,ne,ae=typeof x,ye=ae==="string"||Array.isArray(x);return Qt(x)?this.each(function(be){q(this).toggleClass(x.call(this,be,ps(this),E),E)}):typeof E=="boolean"&&ye?E?this.addClass(x):this.removeClass(x):(R=fs(x),this.each(function(){if(ye)for(ne=q(this),Q=0;Q<R.length;Q++)F=R[Q],ne.hasClass(F)?ne.removeClass(F):ne.addClass(F);else x!==void 0&&ae!=="boolean"||((F=ps(this))&&Et.set(this,"__className__",F),this.setAttribute&&this.setAttribute("class",F||x===!1?"":Et.get(this,"__className__")||""))}))},hasClass:function(x){var E,R,F=0;for(E=" "+x+" ";R=this[F++];)if(R.nodeType===1&&-1<(" "+hs(ps(R))+" ").indexOf(E))return!0;return!1}});var El=/\r/g;q.fn.extend({val:function(x){var E,R,F,Q=this[0];return arguments.length?(F=Qt(x),this.each(function(ne){var ae;this.nodeType===1&&((ae=F?x.call(this,ne,q(this).val()):x)==null?ae="":typeof ae=="number"?ae+="":Array.isArray(ae)&&(ae=q.map(ae,function(ye){return ye==null?"":ye+""})),(E=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()])&&"set"in E&&E.set(this,ae,"value")!==void 0||(this.value=ae))})):Q?(E=q.valHooks[Q.type]||q.valHooks[Q.nodeName.toLowerCase()])&&"get"in E&&(R=E.get(Q,"value"))!==void 0?R:typeof(R=Q.value)=="string"?R.replace(El,""):R??"":void 0}}),q.extend({valHooks:{option:{get:function(x){var E=q.find.attr(x,"value");return E??hs(q.text(x))}},select:{get:function(x){var E,R,F,Q=x.options,ne=x.selectedIndex,ae=x.type==="select-one",ye=ae?null:[],be=ae?ne+1:Q.length;for(F=ne<0?be:ae?ne:0;F<be;F++)if(((R=Q[F]).selected||F===ne)&&!R.disabled&&(!R.parentNode.disabled||!wi(R.parentNode,"optgroup"))){if(E=q(R).val(),ae)return E;ye.push(E)}return ye},set:function(x,E){for(var R,F,Q=x.options,ne=q.makeArray(E),ae=Q.length;ae--;)((F=Q[ae]).selected=-1<q.inArray(q.valHooks.option.get(F),ne))&&(R=!0);return R||(x.selectedIndex=-1),ne}}}}),q.each(["radio","checkbox"],function(){q.valHooks[this]={set:function(x,E){if(Array.isArray(E))return x.checked=-1<q.inArray(q(x).val(),E)}},Nt.checkOn||(q.valHooks[this].get=function(x){return x.getAttribute("value")===null?"on":x.value})}),Nt.focusin="onfocusin"in B;var bc=/^(?:focusinfocus|focusoutblur)$/,yc=function(x){x.stopPropagation()};q.extend(q.event,{trigger:function(x,E,R,F){var Q,ne,ae,ye,be,Ee,Oe,We,Pe=[R||ue],Ne=va.call(x,"type")?x.type:x,mt=va.call(x,"namespace")?x.namespace.split("."):[];if(ne=We=ae=R=R||ue,R.nodeType!==3&&R.nodeType!==8&&!bc.test(Ne+q.event.triggered)&&(-1<Ne.indexOf(".")&&(Ne=(mt=Ne.split(".")).shift(),mt.sort()),be=Ne.indexOf(":")<0&&"on"+Ne,(x=x[q.expando]?x:new q.Event(Ne,typeof x=="object"&&x)).isTrigger=F?2:3,x.namespace=mt.join("."),x.rnamespace=x.namespace?new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,x.result=void 0,x.target||(x.target=R),E=E==null?[x]:q.makeArray(E,[x]),Oe=q.event.special[Ne]||{},F||!Oe.trigger||Oe.trigger.apply(R,E)!==!1)){if(!F&&!Oe.noBubble&&!_e(R)){for(ye=Oe.delegateType||Ne,bc.test(ye+Ne)||(ne=ne.parentNode);ne;ne=ne.parentNode)Pe.push(ne),ae=ne;ae===(R.ownerDocument||ue)&&Pe.push(ae.defaultView||ae.parentWindow||B)}for(Q=0;(ne=Pe[Q++])&&!x.isPropagationStopped();)We=ne,x.type=1<Q?ye:Oe.bindType||Ne,(Ee=(Et.get(ne,"events")||Object.create(null))[x.type]&&Et.get(ne,"handle"))&&Ee.apply(ne,E),(Ee=be&&ne[be])&&Ee.apply&&vr(ne)&&(x.result=Ee.apply(ne,E),x.result===!1&&x.preventDefault());return x.type=Ne,F||x.isDefaultPrevented()||Oe._default&&Oe._default.apply(Pe.pop(),E)!==!1||!vr(R)||be&&Qt(R[Ne])&&!_e(R)&&((ae=R[be])&&(R[be]=null),q.event.triggered=Ne,x.isPropagationStopped()&&We.addEventListener(Ne,yc),R[Ne](),x.isPropagationStopped()&&We.removeEventListener(Ne,yc),q.event.triggered=void 0,ae&&(R[be]=ae)),x.result}},simulate:function(x,E,R){var F=q.extend(new q.Event,R,{type:x,isSimulated:!0});q.event.trigger(F,null,E)}}),q.fn.extend({trigger:function(x,E){return this.each(function(){q.event.trigger(x,E,this)})},triggerHandler:function(x,E){var R=this[0];if(R)return q.event.trigger(x,E,R,!0)}}),Nt.focusin||q.each({focus:"focusin",blur:"focusout"},function(x,E){var R=function(F){q.event.simulate(E,F.target,q.event.fix(F))};q.event.special[E]={setup:function(){var F=this.ownerDocument||this.document||this,Q=Et.access(F,E);Q||F.addEventListener(x,R,!0),Et.access(F,E,(Q||0)+1)},teardown:function(){var F=this.ownerDocument||this.document||this,Q=Et.access(F,E)-1;Q?Et.access(F,E,Q):(F.removeEventListener(x,R,!0),Et.remove(F,E))}}});var rr=B.location,Cr={guid:Date.now()},Uo=/\?/;q.parseXML=function(x){var E,R;if(!x||typeof x!="string")return null;try{E=new B.DOMParser().parseFromString(x,"text/xml")}catch{}return R=E&&E.getElementsByTagName("parsererror")[0],E&&!R||q.error("Invalid XML: "+(R?q.map(R.childNodes,function(F){return F.textContent}).join(`
`):x)),E};var $l=/\[\]$/,so=/\r?\n/g,wc=/^(?:submit|button|image|reset|file)$/i,xc=/^(?:input|select|textarea|keygen)/i;function Dl(x,E,R,F){var Q;if(Array.isArray(E))q.each(E,function(ne,ae){R||$l.test(x)?F(x,ae):Dl(x+"["+(typeof ae=="object"&&ae!=null?ne:"")+"]",ae,R,F)});else if(R||Va(E)!=="object")F(x,E);else for(Q in E)Dl(x+"["+Q+"]",E[Q],R,F)}q.param=function(x,E){var R,F=[],Q=function(ne,ae){var ye=Qt(ae)?ae():ae;F[F.length]=encodeURIComponent(ne)+"="+encodeURIComponent(ye??"")};if(x==null)return"";if(Array.isArray(x)||x.jquery&&!q.isPlainObject(x))q.each(x,function(){Q(this.name,this.value)});else for(R in x)Dl(R,x[R],E,Q);return F.join("&")},q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var x=q.prop(this,"elements");return x?q.makeArray(x):this}).filter(function(){var x=this.type;return this.name&&!q(this).is(":disabled")&&xc.test(this.nodeName)&&!wc.test(x)&&(this.checked||!Zs.test(x))}).map(function(x,E){var R=q(this).val();return R==null?null:Array.isArray(R)?q.map(R,function(F){return{name:E.name,value:F.replace(so,`\r
`)}}):{name:E.name,value:R.replace(so,`\r
`)}}).get()}});var Il=/%20/g,na=/#.*$/,Cc=/([?&])_=[^&]*/,Sd=/^(.*?):[ \t]*([^\r\n]*)$/gm,kc=/^(?:GET|HEAD)$/,Ml=/^\/\//,Tc={},Ll={},Go="*/".concat("*"),Pl=ue.createElement("a");function Yo(x){return function(E,R){typeof E!="string"&&(R=E,E="*");var F,Q=0,ne=E.toLowerCase().match(ut)||[];if(Qt(R))for(;F=ne[Q++];)F[0]==="+"?(F=F.slice(1)||"*",(x[F]=x[F]||[]).unshift(R)):(x[F]=x[F]||[]).push(R)}}function Ko(x,E,R,F){var Q={},ne=x===Ll;function ae(ye){var be;return Q[ye]=!0,q.each(x[ye]||[],function(Ee,Oe){var We=Oe(E,R,F);return typeof We!="string"||ne||Q[We]?ne?!(be=We):void 0:(E.dataTypes.unshift(We),ae(We),!1)}),be}return ae(E.dataTypes[0])||!Q["*"]&&ae("*")}function Xo(x,E){var R,F,Q=q.ajaxSettings.flatOptions||{};for(R in E)E[R]!==void 0&&((Q[R]?x:F||(F={}))[R]=E[R]);return F&&q.extend(!0,x,F),x}Pl.href=rr.href,q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:rr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(rr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Go,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(x,E){return E?Xo(Xo(x,q.ajaxSettings),E):Xo(q.ajaxSettings,x)},ajaxPrefilter:Yo(Tc),ajaxTransport:Yo(Ll),ajax:function(x,E){typeof x=="object"&&(E=x,x=void 0),E=E||{};var R,F,Q,ne,ae,ye,be,Ee,Oe,We,Pe=q.ajaxSetup({},E),Ne=Pe.context||Pe,mt=Pe.context&&(Ne.nodeType||Ne.jquery)?q(Ne):q.event,St=q.Deferred(),wt=q.Callbacks("once memory"),Gn=Pe.statusCode||{},Bn={},Li={},dn="canceled",ce={readyState:0,getResponseHeader:function(on){var On;if(be){if(!ne)for(ne={};On=Sd.exec(Q);)ne[On[1].toLowerCase()+" "]=(ne[On[1].toLowerCase()+" "]||[]).concat(On[2]);On=ne[on.toLowerCase()+" "]}return On==null?null:On.join(", ")},getAllResponseHeaders:function(){return be?Q:null},setRequestHeader:function(on,On){return be==null&&(on=Li[on.toLowerCase()]=Li[on.toLowerCase()]||on,Bn[on]=On),this},overrideMimeType:function(on){return be==null&&(Pe.mimeType=on),this},statusCode:function(on){var On;if(on)if(be)ce.always(on[ce.status]);else for(On in on)Gn[On]=[Gn[On],on[On]];return this},abort:function(on){var On=on||dn;return R&&R.abort(On),pi(0,On),this}};if(St.promise(ce),Pe.url=((x||Pe.url||rr.href)+"").replace(Ml,rr.protocol+"//"),Pe.type=E.method||E.type||Pe.method||Pe.type,Pe.dataTypes=(Pe.dataType||"*").toLowerCase().match(ut)||[""],Pe.crossDomain==null){ye=ue.createElement("a");try{ye.href=Pe.url,ye.href=ye.href,Pe.crossDomain=Pl.protocol+"//"+Pl.host!=ye.protocol+"//"+ye.host}catch{Pe.crossDomain=!0}}if(Pe.data&&Pe.processData&&typeof Pe.data!="string"&&(Pe.data=q.param(Pe.data,Pe.traditional)),Ko(Tc,Pe,E,ce),be)return ce;for(Oe in(Ee=q.event&&Pe.global)&&q.active++==0&&q.event.trigger("ajaxStart"),Pe.type=Pe.type.toUpperCase(),Pe.hasContent=!kc.test(Pe.type),F=Pe.url.replace(na,""),Pe.hasContent?Pe.data&&Pe.processData&&(Pe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Pe.data=Pe.data.replace(Il,"+")):(We=Pe.url.slice(F.length),Pe.data&&(Pe.processData||typeof Pe.data=="string")&&(F+=(Uo.test(F)?"&":"?")+Pe.data,delete Pe.data),Pe.cache===!1&&(F=F.replace(Cc,"$1"),We=(Uo.test(F)?"&":"?")+"_="+Cr.guid+++We),Pe.url=F+We),Pe.ifModified&&(q.lastModified[F]&&ce.setRequestHeader("If-Modified-Since",q.lastModified[F]),q.etag[F]&&ce.setRequestHeader("If-None-Match",q.etag[F])),(Pe.data&&Pe.hasContent&&Pe.contentType!==!1||E.contentType)&&ce.setRequestHeader("Content-Type",Pe.contentType),ce.setRequestHeader("Accept",Pe.dataTypes[0]&&Pe.accepts[Pe.dataTypes[0]]?Pe.accepts[Pe.dataTypes[0]]+(Pe.dataTypes[0]!=="*"?", "+Go+"; q=0.01":""):Pe.accepts["*"]),Pe.headers)ce.setRequestHeader(Oe,Pe.headers[Oe]);if(Pe.beforeSend&&(Pe.beforeSend.call(Ne,ce,Pe)===!1||be))return ce.abort();if(dn="abort",wt.add(Pe.complete),ce.done(Pe.success),ce.fail(Pe.error),R=Ko(Ll,Pe,E,ce)){if(ce.readyState=1,Ee&&mt.trigger("ajaxSend",[ce,Pe]),be)return ce;Pe.async&&0<Pe.timeout&&(ae=B.setTimeout(function(){ce.abort("timeout")},Pe.timeout));try{be=!1,R.send(Bn,pi)}catch(on){if(be)throw on;pi(-1,on)}}else pi(-1,"No Transport");function pi(on,On,Pi,Qo){var ji,ai,Ar,si,Rs,ba=On;be||(be=!0,ae&&B.clearTimeout(ae),R=void 0,Q=Qo||"",ce.readyState=0<on?4:0,ji=200<=on&&on<300||on===304,Pi&&(si=function(Vn,ri,ia){for(var oi,Ht,Cn,Qn,jn=Vn.contents,un=Vn.dataTypes;un[0]==="*";)un.shift(),oi===void 0&&(oi=Vn.mimeType||ri.getResponseHeader("Content-Type"));if(oi){for(Ht in jn)if(jn[Ht]&&jn[Ht].test(oi)){un.unshift(Ht);break}}if(un[0]in ia)Cn=un[0];else{for(Ht in ia){if(!un[0]||Vn.converters[Ht+" "+un[0]]){Cn=Ht;break}Qn||(Qn=Ht)}Cn=Cn||Qn}if(Cn)return Cn!==un[0]&&un.unshift(Cn),ia[Cn]}(Pe,ce,Pi)),!ji&&-1<q.inArray("script",Pe.dataTypes)&&q.inArray("json",Pe.dataTypes)<0&&(Pe.converters["text script"]=function(){}),si=function(Vn,ri,ia,oi){var Ht,Cn,Qn,jn,un,Ci={},Ma=Vn.dataTypes.slice();if(Ma[1])for(Qn in Vn.converters)Ci[Qn.toLowerCase()]=Vn.converters[Qn];for(Cn=Ma.shift();Cn;)if(Vn.responseFields[Cn]&&(ia[Vn.responseFields[Cn]]=ri),!un&&oi&&Vn.dataFilter&&(ri=Vn.dataFilter(ri,Vn.dataType)),un=Cn,Cn=Ma.shift()){if(Cn==="*")Cn=un;else if(un!=="*"&&un!==Cn){if(!(Qn=Ci[un+" "+Cn]||Ci["* "+Cn])){for(Ht in Ci)if((jn=Ht.split(" "))[1]===Cn&&(Qn=Ci[un+" "+jn[0]]||Ci["* "+jn[0]])){Qn===!0?Qn=Ci[Ht]:Ci[Ht]!==!0&&(Cn=jn[0],Ma.unshift(jn[1]));break}}if(Qn!==!0)if(Qn&&Vn.throws)ri=Qn(ri);else try{ri=Qn(ri)}catch(gs){return{state:"parsererror",error:Qn?gs:"No conversion from "+un+" to "+Cn}}}}return{state:"success",data:ri}}(Pe,si,ce,ji),ji?(Pe.ifModified&&((Rs=ce.getResponseHeader("Last-Modified"))&&(q.lastModified[F]=Rs),(Rs=ce.getResponseHeader("etag"))&&(q.etag[F]=Rs)),on===204||Pe.type==="HEAD"?ba="nocontent":on===304?ba="notmodified":(ba=si.state,ai=si.data,ji=!(Ar=si.error))):(Ar=ba,!on&&ba||(ba="error",on<0&&(on=0))),ce.status=on,ce.statusText=(On||ba)+"",ji?St.resolveWith(Ne,[ai,ba,ce]):St.rejectWith(Ne,[ce,ba,Ar]),ce.statusCode(Gn),Gn=void 0,Ee&&mt.trigger(ji?"ajaxSuccess":"ajaxError",[ce,Pe,ji?ai:Ar]),wt.fireWith(Ne,[ce,ba]),Ee&&(mt.trigger("ajaxComplete",[ce,Pe]),--q.active||q.event.trigger("ajaxStop")))}return ce},getJSON:function(x,E,R){return q.get(x,E,R,"json")},getScript:function(x,E){return q.get(x,void 0,E,"script")}}),q.each(["get","post"],function(x,E){q[E]=function(R,F,Q,ne){return Qt(F)&&(ne=ne||Q,Q=F,F=void 0),q.ajax(q.extend({url:R,type:E,dataType:ne,data:F,success:Q},q.isPlainObject(R)&&R))}}),q.ajaxPrefilter(function(x){var E;for(E in x.headers)E.toLowerCase()==="content-type"&&(x.contentType=x.headers[E]||"")}),q._evalUrl=function(x,E,R){return q.ajax({url:x,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(F){q.globalEval(F,E,R)}})},q.fn.extend({wrapAll:function(x){var E;return this[0]&&(Qt(x)&&(x=x.call(this[0])),E=q(x,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&E.insertBefore(this[0]),E.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(x){return Qt(x)?this.each(function(E){q(this).wrapInner(x.call(this,E))}):this.each(function(){var E=q(this),R=E.contents();R.length?R.wrapAll(x):E.append(x)})},wrap:function(x){var E=Qt(x);return this.each(function(R){q(this).wrapAll(E?x.call(this,R):x)})},unwrap:function(x){return this.parent(x).not("body").each(function(){q(this).replaceWith(this.childNodes)}),this}}),q.expr.pseudos.hidden=function(x){return!q.expr.pseudos.visible(x)},q.expr.pseudos.visible=function(x){return!!(x.offsetWidth||x.offsetHeight||x.getClientRects().length)},q.ajaxSettings.xhr=function(){try{return new B.XMLHttpRequest}catch{}};var ro={0:200,1223:204},Xn=q.ajaxSettings.xhr();Nt.cors=!!Xn&&"withCredentials"in Xn,Nt.ajax=Xn=!!Xn,q.ajaxTransport(function(x){var E,R;if(Nt.cors||Xn&&!x.crossDomain)return{send:function(F,Q){var ne,ae=x.xhr();if(ae.open(x.type,x.url,x.async,x.username,x.password),x.xhrFields)for(ne in x.xhrFields)ae[ne]=x.xhrFields[ne];for(ne in x.mimeType&&ae.overrideMimeType&&ae.overrideMimeType(x.mimeType),x.crossDomain||F["X-Requested-With"]||(F["X-Requested-With"]="XMLHttpRequest"),F)ae.setRequestHeader(ne,F[ne]);E=function(ye){return function(){E&&(E=R=ae.onload=ae.onerror=ae.onabort=ae.ontimeout=ae.onreadystatechange=null,ye==="abort"?ae.abort():ye==="error"?typeof ae.status!="number"?Q(0,"error"):Q(ae.status,ae.statusText):Q(ro[ae.status]||ae.status,ae.statusText,(ae.responseType||"text")!=="text"||typeof ae.responseText!="string"?{binary:ae.response}:{text:ae.responseText},ae.getAllResponseHeaders()))}},ae.onload=E(),R=ae.onerror=ae.ontimeout=E("error"),ae.onabort!==void 0?ae.onabort=R:ae.onreadystatechange=function(){ae.readyState===4&&B.setTimeout(function(){E&&R()})},E=E("abort");try{ae.send(x.hasContent&&x.data||null)}catch(ye){if(E)throw ye}},abort:function(){E&&E()}}}),q.ajaxPrefilter(function(x){x.crossDomain&&(x.contents.script=!1)}),q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(x){return q.globalEval(x),x}}}),q.ajaxPrefilter("script",function(x){x.cache===void 0&&(x.cache=!1),x.crossDomain&&(x.type="GET")}),q.ajaxTransport("script",function(x){var E,R;if(x.crossDomain||x.scriptAttrs)return{send:function(F,Q){E=q("<script>").attr(x.scriptAttrs||{}).prop({charset:x.scriptCharset,src:x.url}).on("load error",R=function(ne){E.remove(),R=null,ne&&Q(ne.type==="error"?404:200,ne.type)}),ue.head.appendChild(E[0])},abort:function(){R&&R()}}});var Tn,Ac=[],kr=/(=)\?(?=&|$)|\?\?/;q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var x=Ac.pop()||q.expando+"_"+Cr.guid++;return this[x]=!0,x}}),q.ajaxPrefilter("json jsonp",function(x,E,R){var F,Q,ne,ae=x.jsonp!==!1&&(kr.test(x.url)?"url":typeof x.data=="string"&&(x.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&kr.test(x.data)&&"data");if(ae||x.dataTypes[0]==="jsonp")return F=x.jsonpCallback=Qt(x.jsonpCallback)?x.jsonpCallback():x.jsonpCallback,ae?x[ae]=x[ae].replace(kr,"$1"+F):x.jsonp!==!1&&(x.url+=(Uo.test(x.url)?"&":"?")+x.jsonp+"="+F),x.converters["script json"]=function(){return ne||q.error(F+" was not called"),ne[0]},x.dataTypes[0]="json",Q=B[F],B[F]=function(){ne=arguments},R.always(function(){Q===void 0?q(B).removeProp(F):B[F]=Q,x[F]&&(x.jsonpCallback=E.jsonpCallback,Ac.push(F)),ne&&Qt(Q)&&Q(ne[0]),ne=Q=void 0}),"script"}),Nt.createHTMLDocument=((Tn=ue.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Tn.childNodes.length===2),q.parseHTML=function(x,E,R){return typeof x!="string"?[]:(typeof E=="boolean"&&(R=E,E=!1),E||(Nt.createHTMLDocument?((F=(E=ue.implementation.createHTMLDocument("")).createElement("base")).href=ue.location.href,E.head.appendChild(F)):E=ue),ne=!R&&[],(Q=N.exec(x))?[E.createElement(Q[1])]:(Q=kl([x],E,ne),ne&&ne.length&&q(ne).remove(),q.merge([],Q.childNodes)));var F,Q,ne},q.fn.load=function(x,E,R){var F,Q,ne,ae=this,ye=x.indexOf(" ");return-1<ye&&(F=hs(x.slice(ye)),x=x.slice(0,ye)),Qt(E)?(R=E,E=void 0):E&&typeof E=="object"&&(Q="POST"),0<ae.length&&q.ajax({url:x,type:Q||"GET",dataType:"html",data:E}).done(function(be){ne=arguments,ae.html(F?q("<div>").append(q.parseHTML(be)).find(F):be)}).always(R&&function(be,Ee){ae.each(function(){R.apply(this,ne||[be.responseText,Ee,be])})}),this},q.expr.pseudos.animated=function(x){return q.grep(q.timers,function(E){return x===E.elem}).length},q.offset={setOffset:function(x,E,R){var F,Q,ne,ae,ye,be,Ee=q.css(x,"position"),Oe=q(x),We={};Ee==="static"&&(x.style.position="relative"),ye=Oe.offset(),ne=q.css(x,"top"),be=q.css(x,"left"),(Ee==="absolute"||Ee==="fixed")&&-1<(ne+be).indexOf("auto")?(ae=(F=Oe.position()).top,Q=F.left):(ae=parseFloat(ne)||0,Q=parseFloat(be)||0),Qt(E)&&(E=E.call(x,R,q.extend({},ye))),E.top!=null&&(We.top=E.top-ye.top+ae),E.left!=null&&(We.left=E.left-ye.left+Q),"using"in E?E.using.call(x,We):Oe.css(We)}},q.fn.extend({offset:function(x){if(arguments.length)return x===void 0?this:this.each(function(Q){q.offset.setOffset(this,x,Q)});var E,R,F=this[0];return F?F.getClientRects().length?(E=F.getBoundingClientRect(),R=F.ownerDocument.defaultView,{top:E.top+R.pageYOffset,left:E.left+R.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var x,E,R,F=this[0],Q={top:0,left:0};if(q.css(F,"position")==="fixed")E=F.getBoundingClientRect();else{for(E=this.offset(),R=F.ownerDocument,x=F.offsetParent||R.documentElement;x&&(x===R.body||x===R.documentElement)&&q.css(x,"position")==="static";)x=x.parentNode;x&&x!==F&&x.nodeType===1&&((Q=q(x).offset()).top+=q.css(x,"borderTopWidth",!0),Q.left+=q.css(x,"borderLeftWidth",!0))}return{top:E.top-Q.top-q.css(F,"marginTop",!0),left:E.left-Q.left-q.css(F,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var x=this.offsetParent;x&&q.css(x,"position")==="static";)x=x.offsetParent;return x||$a})}}),q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(x,E){var R=E==="pageYOffset";q.fn[x]=function(F){return Pn(this,function(Q,ne,ae){var ye;if(_e(Q)?ye=Q:Q.nodeType===9&&(ye=Q.defaultView),ae===void 0)return ye?ye[E]:Q[ne];ye?ye.scrollTo(R?ye.pageXOffset:ae,R?ae:ye.pageYOffset):Q[ne]=ae},x,F,arguments.length)}}),q.each(["top","left"],function(x,E){q.cssHooks[E]=wr(Nt.pixelPosition,function(R,F){if(F)return F=Da(R,E),tr.test(F)?q(R).position()[E]+"px":F})}),q.each({Height:"height",Width:"width"},function(x,E){q.each({padding:"inner"+x,content:E,"":"outer"+x},function(R,F){q.fn[F]=function(Q,ne){var ae=arguments.length&&(R||typeof Q!="boolean"),ye=R||(Q===!0||ne===!0?"margin":"border");return Pn(this,function(be,Ee,Oe){var We;return _e(be)?F.indexOf("outer")===0?be["inner"+x]:be.document.documentElement["client"+x]:be.nodeType===9?(We=be.documentElement,Math.max(be.body["scroll"+x],We["scroll"+x],be.body["offset"+x],We["offset"+x],We["client"+x])):Oe===void 0?q.css(be,Ee,ye):q.style(be,Ee,Oe,ye)},E,ae?Q:void 0,ae)}})}),q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(x,E){q.fn[E]=function(R){return this.on(E,R)}}),q.fn.extend({bind:function(x,E,R){return this.on(x,null,E,R)},unbind:function(x,E){return this.off(x,null,E)},delegate:function(x,E,R,F){return this.on(E,x,R,F)},undelegate:function(x,E,R){return arguments.length===1?this.off(x,"**"):this.off(E,x||"**",R)},hover:function(x,E){return this.mouseenter(x).mouseleave(E||x)}}),q.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(x,E){q.fn[E]=function(R,F){return 0<arguments.length?this.on(E,null,R,F):this.trigger(E)}});var Tr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;q.proxy=function(x,E){var R,F,Q;if(typeof E=="string"&&(R=x[E],E=x,x=R),Qt(x))return F=Ts.call(arguments,2),(Q=function(){return x.apply(E||this,F.concat(Ts.call(arguments)))}).guid=x.guid=x.guid||q.guid++,Q},q.holdReady=function(x){x?q.readyWait++:q.ready(!0)},q.isArray=Array.isArray,q.parseJSON=JSON.parse,q.nodeName=wi,q.isFunction=Qt,q.isWindow=_e,q.camelCase=Zi,q.type=Va,q.now=Date.now,q.isNumeric=function(x){var E=q.type(x);return(E==="number"||E==="string")&&!isNaN(x-parseFloat(x))},q.trim=function(x){return x==null?"":(x+"").replace(Tr,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return q});var zi=B.jQuery,or=B.$;return q.noConflict=function(x){return B.$===q&&(B.$=or),x&&B.jQuery===q&&(B.jQuery=zi),q},typeof In>"u"&&(B.jQuery=B.$=q),q}),function(B,In){typeof exports=="object"&&typeof module<"u"?In(exports):typeof define=="function"&&define.amd?define(["exports"],In):In((B=typeof globalThis<"u"?globalThis:B||self).d3=B.d3||{})}(this,function(B){"use strict";function In(s,l){return s==null||l==null?NaN:s<l?-1:s>l?1:s>=l?0:NaN}function Ji(s,l){return s==null||l==null?NaN:l<s?-1:l>s?1:l>=s?0:NaN}function Wr(s){let l,d,h;function f(g,b,y=0,T=g.length){if(y<T){if(l(b,b)!==0)return T;do{const k=y+T>>>1;d(g[k],b)<0?y=k+1:T=k}while(y<T)}return y}return s.length!==2?(l=In,d=(g,b)=>In(s(g),b),h=(g,b)=>s(g)-b):(l=s===In||s===Ji?s:Ts,d=s,h=s),{left:f,center:function(g,b,y=0,T=g.length){const k=f(g,b,y,T-1);return k>y&&h(g[k-1],b)>-h(g[k],b)?k-1:k},right:function(g,b,y=0,T=g.length){if(y<T){if(l(b,b)!==0)return T;do{const k=y+T>>>1;d(g[k],b)<=0?y=k+1:T=k}while(y<T)}return y}}}function Ts(){return 0}function Oo(s){return s===null?NaN:+s}function*Ur(s,l){if(l===void 0)for(let d of s)d!=null&&(d=+d)>=d&&(yield d);else{let d=-1;for(let h of s)(h=l(h,++d,s))!=null&&(h=+h)>=h&&(yield h)}}const la=Wr(In),Gr=la.right,at=la.left,va=Wr(Oo).center;var qa=Gr;const cc=Qt(Yt),Nt=Qt(function(s){const l=Yt(s);return(d,h,f,g,b)=>{l(d,h,(f<<=2)+0,(g<<=2)+0,b<<=2),l(d,h,f+1,g+1,b),l(d,h,f+2,g+2,b),l(d,h,f+3,g+3,b)}});function Qt(s){return function(l,d,h=d){if(!((d=+d)>=0))throw new RangeError("invalid rx");if(!((h=+h)>=0))throw new RangeError("invalid ry");let{data:f,width:g,height:b}=l;if(!((g=Math.floor(g))>=0))throw new RangeError("invalid width");if(!((b=Math.floor(b!==void 0?b:f.length/g))>=0))throw new RangeError("invalid height");if(!g||!b||!d&&!h)return l;const y=d&&s(d),T=h&&s(h),k=f.slice();return y&&T?(_e(y,k,f,g,b),_e(y,f,k,g,b),_e(y,k,f,g,b),ue(T,f,k,g,b),ue(T,k,f,g,b),ue(T,f,k,g,b)):y?(_e(y,f,k,g,b),_e(y,k,f,g,b),_e(y,f,k,g,b)):T&&(ue(T,f,k,g,b),ue(T,k,f,g,b),ue(T,f,k,g,b)),l}}function _e(s,l,d,h,f){for(let g=0,b=h*f;g<b;)s(l,d,g,g+=h,1)}function ue(s,l,d,h,f){for(let g=0,b=h*f;g<h;++g)s(l,d,g,g+b,h)}function Yt(s){const l=Math.floor(s);if(l===s)return function(f){const g=2*f+1;return(b,y,T,k,D)=>{if(!((k-=D)>=T))return;let O=f*y[T];const P=D*f;for(let _=T,Y=T+P;_<Y;_+=D)O+=y[Math.min(k,_)];for(let _=T,Y=k;_<=Y;_+=D)O+=y[Math.min(k,_+P)],b[_]=O/g,O-=y[Math.max(T,_-P)]}}(s);const d=s-l,h=2*s+1;return(f,g,b,y,T)=>{if(!((y-=T)>=b))return;let k=l*g[b];const D=T*l,O=D+T;for(let P=b,_=b+D;P<_;P+=T)k+=g[Math.min(y,P)];for(let P=b,_=y;P<=_;P+=T)k+=g[Math.min(y,P+D)],f[P]=(k+d*(g[Math.max(b,P-O)]+g[Math.min(y,P+O)]))/h,k-=g[Math.max(b,P-D)]}}function Yr(s,l){let d=0;if(l===void 0)for(let h of s)h!=null&&(h=+h)>=h&&++d;else{let h=-1;for(let f of s)(f=l(f,++h,s))!=null&&(f=+f)>=f&&++d}return d}function Va(s){return 0|s.length}function xl(s){return!(s>0)}function q(s){return typeof s!="object"||"length"in s?s:Array.from(s)}function Be(s,l){let d,h=0,f=0,g=0;if(l===void 0)for(let b of s)b!=null&&(b=+b)>=b&&(d=b-f,f+=d/++h,g+=d*(b-f));else{let b=-1;for(let y of s)(y=l(y,++b,s))!=null&&(y=+y)>=y&&(d=y-f,f+=d/++h,g+=d*(y-f))}if(h>1)return g/(h-1)}function Sa(s,l){const d=Be(s,l);return d&&Math.sqrt(d)}function Ea(s,l){let d,h;if(l===void 0)for(const f of s)f!=null&&(d===void 0?f>=f&&(d=h=f):(d>f&&(d=f),h<f&&(h=f)));else{let f=-1;for(let g of s)(g=l(g,++f,s))!=null&&(d===void 0?g>=g&&(d=h=g):(d>g&&(d=g),h<g&&(h=g)))}return[d,h]}class hi{constructor(){this._partials=new Float64Array(32),this._n=0}add(l){const d=this._partials;let h=0;for(let f=0;f<this._n&&f<32;f++){const g=d[f],b=l+g,y=Math.abs(l)<Math.abs(g)?l-(b-g):g-(b-l);y&&(d[h++]=y),l=b}return d[h]=l,this._n=h+1,this}valueOf(){const l=this._partials;let d,h,f,g=this._n,b=0;if(g>0){for(b=l[--g];g>0&&(d=b,h=l[--g],b=d+h,f=h-(b-d),!f););g>0&&(f<0&&l[g-1]<0||f>0&&l[g-1]>0)&&(h=2*f,d=b+h,h==d-b&&(b=d))}return b}}class ja extends Map{constructor(l,d=rs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),l!=null)for(const[h,f]of l)this.set(h,f)}get(l){return super.get(N(this,l))}has(l){return super.has(N(this,l))}set(l,d){return super.set(Kr(this,l),d)}delete(l){return super.delete(Ro(this,l))}}class wi extends Set{constructor(l,d=rs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),l!=null)for(const h of l)this.add(h)}has(l){return super.has(N(this,l))}add(l){return super.add(Kr(this,l))}delete(l){return super.delete(Ro(this,l))}}function N({_intern:s,_key:l},d){const h=l(d);return s.has(h)?s.get(h):d}function Kr({_intern:s,_key:l},d){const h=l(d);return s.has(h)?s.get(h):(s.set(h,d),d)}function Ro({_intern:s,_key:l},d){const h=l(d);return s.has(h)&&(d=s.get(h),s.delete(h)),d}function rs(s){return s!==null&&typeof s=="object"?s.valueOf():s}function Ys(s){return s}function ot(s,...l){return Ks(s,Ys,Ys,l)}function os(s,...l){return Ks(s,Array.from,Ys,l)}function ut(s,l){for(let d=1,h=l.length;d<h;++d)s=s.flatMap(f=>f.pop().map(([g,b])=>[...f,g,b]));return s}function ls(s,l,...d){return Ks(s,Ys,l,d)}function As(s,l,...d){return Ks(s,Array.from,l,d)}function No(s){if(s.length!==1)throw new Error("duplicate key");return s[0]}function Ks(s,l,d,h){return function f(g,b){if(b>=h.length)return d(g);const y=new ja,T=h[b++];let k=-1;for(const D of g){const O=T(D,++k,g),P=y.get(O);P?P.push(D):y.set(O,[D])}for(const[D,O]of y)y.set(D,f(O,b));return l(y)}(s,0)}function L(s,l){return Array.from(l,d=>s[d])}function Xs(s,...l){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");s=Array.from(s);let[d]=l;if(d&&d.length!==2||l.length>1){const h=Uint32Array.from(s,(f,g)=>g);return l.length>1?(l=l.map(f=>s.map(f)),h.sort((f,g)=>{for(const b of l){const y=Ss(b[f],b[g]);if(y)return y}})):(d=s.map(d),h.sort((f,g)=>Ss(d[f],d[g]))),L(s,h)}return s.sort(Pn(d))}function Pn(s=In){if(s===In)return Ss;if(typeof s!="function")throw new TypeError("compare is not a function");return(l,d)=>{const h=s(l,d);return h||h===0?h:(s(d,d)===0)-(s(l,l)===0)}}function Ss(s,l){return(s==null||!(s>=s))-(l==null||!(l>=l))||(s<l?-1:s>l?1:0)}var Qs=Array.prototype.slice;function _o(s){return()=>s}const Zi=Math.sqrt(50),vr=Math.sqrt(10),br=Math.sqrt(2);function Et(s,l,d){const h=(l-s)/Math.max(0,d),f=Math.floor(Math.log10(h)),g=h/Math.pow(10,f),b=g>=Zi?10:g>=vr?5:g>=br?2:1;let y,T,k;return f<0?(k=Math.pow(10,-f)/b,y=Math.round(s*k),T=Math.round(l*k),y/k<s&&++y,T/k>l&&--T,k=-k):(k=Math.pow(10,f)*b,y=Math.round(s/k),T=Math.round(l/k),y*k<s&&++y,T*k>l&&--T),T<y&&.5<=d&&d<2?Et(s,l,2*d):[y,T,k]}function Gt(s,l,d){if(!((d=+d)>0))return[];if((s=+s)==(l=+l))return[s];const h=l<s,[f,g,b]=h?Et(l,s,d):Et(s,l,d);if(!(g>=f))return[];const y=g-f+1,T=new Array(y);if(h)if(b<0)for(let k=0;k<y;++k)T[k]=(g-k)/-b;else for(let k=0;k<y;++k)T[k]=(g-k)*b;else if(b<0)for(let k=0;k<y;++k)T[k]=(f+k)/-b;else for(let k=0;k<y;++k)T[k]=(f+k)*b;return T}function Es(s,l,d){return Et(s=+s,l=+l,d=+d)[2]}function Hn(s,l,d){d=+d;const h=(l=+l)<(s=+s),f=h?Es(l,s,d):Es(s,l,d);return(h?-1:1)*(f<0?1/-f:f)}function Xr(s,l,d){let h;for(;;){const f=Es(s,l,d);if(f===h||f===0||!isFinite(f))return[s,l];f>0?(s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f):f<0&&(s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f),h=f}}function Qr(s){return Math.ceil(Math.log(Yr(s))/Math.LN2)+1}function $s(){var s=Ys,l=Ea,d=Qr;function h(f){Array.isArray(f)||(f=Array.from(f));var g,b,y,T=f.length,k=new Array(T);for(g=0;g<T;++g)k[g]=s(f[g],g,f);var D=l(k),O=D[0],P=D[1],_=d(k,O,P);if(!Array.isArray(_)){const Z=P,K=+_;if(l===Ea&&([O,P]=Xr(O,P,K)),(_=Gt(O,P,K))[0]<=O&&(y=Es(O,P,K)),_[_.length-1]>=P)if(Z>=P&&l===Ea){const re=Es(O,P,K);isFinite(re)&&(re>0?P=(Math.floor(P/re)+1)*re:re<0&&(P=(Math.ceil(P*-re)+1)/-re))}else _.pop()}for(var Y=_.length,j=0,W=Y;_[j]<=O;)++j;for(;_[W-1]>P;)--W;(j||W<Y)&&(_=_.slice(j,W),Y=W-j);var X,ee=new Array(Y+1);for(g=0;g<=Y;++g)(X=ee[g]=[]).x0=g>0?_[g-1]:O,X.x1=g<Y?_[g]:P;if(isFinite(y)){if(y>0)for(g=0;g<T;++g)(b=k[g])!=null&&O<=b&&b<=P&&ee[Math.min(Y,Math.floor((b-O)/y))].push(f[g]);else if(y<0){for(g=0;g<T;++g)if((b=k[g])!=null&&O<=b&&b<=P){const Z=Math.floor((O-b)*y);ee[Math.min(Y,Z+(_[Z]<=b))].push(f[g])}}}else for(g=0;g<T;++g)(b=k[g])!=null&&O<=b&&b<=P&&ee[qa(_,b,0,Y)].push(f[g]);return ee}return h.value=function(f){return arguments.length?(s=typeof f=="function"?f:_o(f),h):s},h.domain=function(f){return arguments.length?(l=typeof f=="function"?f:_o([f[0],f[1]]),h):l},h.thresholds=function(f){return arguments.length?(d=typeof f=="function"?f:_o(Array.isArray(f)?Qs.call(f):f),h):d},h}function ea(s,l){let d;if(l===void 0)for(const h of s)h!=null&&(d<h||d===void 0&&h>=h)&&(d=h);else{let h=-1;for(let f of s)(f=l(f,++h,s))!=null&&(d<f||d===void 0&&f>=f)&&(d=f)}return d}function $a(s,l){let d,h=-1,f=-1;if(l===void 0)for(const g of s)++f,g!=null&&(d<g||d===void 0&&g>=g)&&(d=g,h=f);else for(let g of s)(g=l(g,++f,s))!=null&&(d<g||d===void 0&&g>=g)&&(d=g,h=f);return h}function Wa(s,l){let d;if(l===void 0)for(const h of s)h!=null&&(d>h||d===void 0&&h>=h)&&(d=h);else{let h=-1;for(let f of s)(f=l(f,++h,s))!=null&&(d>f||d===void 0&&f>=f)&&(d=f)}return d}function ca(s,l){let d,h=-1,f=-1;if(l===void 0)for(const g of s)++f,g!=null&&(d>g||d===void 0&&g>=g)&&(d=g,h=f);else for(let g of s)(g=l(g,++f,s))!=null&&(d>g||d===void 0&&g>=g)&&(d=g,h=f);return h}function Ds(s,l,d=0,h=1/0,f){if(l=Math.floor(l),d=Math.floor(Math.max(0,d)),h=Math.floor(Math.min(s.length-1,h)),!(d<=l&&l<=h))return s;for(f=f===void 0?Ss:Pn(f);h>d;){if(h-d>600){const T=h-d+1,k=l-d+1,D=Math.log(T),O=.5*Math.exp(2*D/3),P=.5*Math.sqrt(D*O*(T-O)/T)*(k-T/2<0?-1:1);Ds(s,l,Math.max(d,Math.floor(l-k*O/T+P)),Math.min(h,Math.floor(l+(T-k)*O/T+P)),f)}const g=s[l];let b=d,y=h;for(Js(s,d,l),f(s[h],g)>0&&Js(s,d,h);b<y;){for(Js(s,b,y),++b,--y;f(s[b],g)<0;)++b;for(;f(s[y],g)>0;)--y}f(s[d],g)===0?Js(s,d,y):(++y,Js(s,y,h)),y<=l&&(d=y+1),l<=y&&(h=y-1)}return s}function Js(s,l,d){const h=s[l];s[l]=s[d],s[d]=h}function Is(s,l=In){let d,h=!1;if(l.length===1){let f;for(const g of s){const b=l(g);(h?In(b,f)>0:In(b,b)===0)&&(d=g,f=b,h=!0)}}else for(const f of s)(h?l(f,d)>0:l(f,f)===0)&&(d=f,h=!0);return d}function Ua(s,l,d){if((h=(s=Float64Array.from(Ur(s,d))).length)&&!isNaN(l=+l)){if(l<=0||h<2)return Wa(s);if(l>=1)return ea(s);var h,f=(h-1)*l,g=Math.floor(f),b=ea(Ds(s,g).subarray(0,g+1));return b+(Wa(s.subarray(g+1))-b)*(f-g)}}function Ms(s,l,d=Oo){if((h=s.length)&&!isNaN(l=+l)){if(l<=0||h<2)return+d(s[0],0,s);if(l>=1)return+d(s[h-1],h-1,s);var h,f=(h-1)*l,g=Math.floor(f),b=+d(s[g],g,s);return b+(+d(s[g+1],g+1,s)-b)*(f-g)}}function Jr(s,l,d){if((h=(s=Float64Array.from(Ur(s,d))).length)&&!isNaN(l=+l)){if(l<=0||h<2)return ca(s);if(l>=1)return $a(s);var h,f=Math.floor((h-1)*l),g=Ds(Uint32Array.from(s,(b,y)=>y),f,0,h-1,(b,y)=>Ss(s[b],s[y]));return Is(g.subarray(0,f+1),b=>s[b])}}function Zs(s){return Array.from(function*(l){for(const d of l)yield*d}(s))}function dc(s,l){return[s,l]}function cs(s,l,d){s=+s,l=+l,d=(f=arguments.length)<2?(l=s,s=0,1):f<3?1:+d;for(var h=-1,f=0|Math.max(0,Math.ceil((l-s)/d)),g=new Array(f);++h<f;)g[h]=s+h*d;return g}function ft(s,l=In){if(l.length===1)return ca(s,l);let d,h=-1,f=-1;for(const g of s)++f,(h<0?l(g,g)===0:l(g,d)<0)&&(d=g,h=f);return h}var xi=zo(Math.random);function zo(s){return function(l,d=0,h=l.length){let f=h-(d=+d);for(;f;){const g=s()*f--|0,b=l[f+d];l[f+d]=l[g+d],l[g+d]=b}return l}}function Cl(s){if(!(f=s.length))return[];for(var l=-1,d=Wa(s,kl),h=new Array(d);++l<d;)for(var f,g=-1,b=h[l]=new Array(f);++g<f;)b[g]=s[g][l];return h}function kl(s){return s.length}function Vi(s){return s instanceof wi?s:new wi(s)}function Ls(s,l){const d=s[Symbol.iterator](),h=new Set;for(const f of l){const g=ds(f);if(h.has(g))continue;let b,y;for(;{value:b,done:y}=d.next();){if(y)return!1;const T=ds(b);if(h.add(T),Object.is(g,T))break}}return!0}function ds(s){return s!==null&&typeof s=="object"?s.valueOf():s}function uc(s){return s}var Zr=1e-6;function yr(s){return"translate("+s+",0)"}function xd(s){return"translate(0,"+s+")"}function Tl(s){return l=>+s(l)}function er(s,l){return l=Math.max(0,s.bandwidth()-2*l)/2,s.round()&&(l=Math.round(l)),d=>+s(d)+l}function Ps(){return!this.__axis}function Fo(s,l){var d=[],h=null,f=null,g=6,b=6,y=3,T=typeof window<"u"&&window.devicePixelRatio>1?0:.5,k=s===1||s===4?-1:1,D=s===4||s===2?"x":"y",O=s===1||s===3?yr:xd;function P(_){var Y=h??(l.ticks?l.ticks.apply(l,d):l.domain()),j=f??(l.tickFormat?l.tickFormat.apply(l,d):uc),W=Math.max(g,0)+y,X=l.range(),ee=+X[0]+T,Z=+X[X.length-1]+T,K=(l.bandwidth?er:Tl)(l.copy(),T),re=_.selection?_.selection():_,oe=re.selectAll(".domain").data([null]),Ce=re.selectAll(".tick").data(Y,l).order(),Ie=Ce.exit(),Te=Ce.enter().append("g").attr("class","tick"),pe=Ce.select("line"),ge=Ce.select("text");oe=oe.merge(oe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ce=Ce.merge(Te),pe=pe.merge(Te.append("line").attr("stroke","currentColor").attr(D+"2",k*g)),ge=ge.merge(Te.append("text").attr("fill","currentColor").attr(D,k*W).attr("dy",s===1?"0em":s===3?"0.71em":"0.32em")),_!==re&&(oe=oe.transition(_),Ce=Ce.transition(_),pe=pe.transition(_),ge=ge.transition(_),Ie=Ie.transition(_).attr("opacity",Zr).attr("transform",function(we){return isFinite(we=K(we))?O(we+T):this.getAttribute("transform")}),Te.attr("opacity",Zr).attr("transform",function(we){var le=this.parentNode.__axis;return O((le&&isFinite(le=le(we))?le:K(we))+T)})),Ie.remove(),oe.attr("d",s===4||s===2?b?"M"+k*b+","+ee+"H"+T+"V"+Z+"H"+k*b:"M"+T+","+ee+"V"+Z:b?"M"+ee+","+k*b+"V"+T+"H"+Z+"V"+k*b:"M"+ee+","+T+"H"+Z),Ce.attr("opacity",1).attr("transform",function(we){return O(K(we)+T)}),pe.attr(D+"2",k*g),ge.attr(D,k*W).text(j),re.filter(Ps).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",s===2?"start":s===4?"end":"middle"),re.each(function(){this.__axis=K})}return P.scale=function(_){return arguments.length?(l=_,P):l},P.ticks=function(){return d=Array.from(arguments),P},P.tickArguments=function(_){return arguments.length?(d=_==null?[]:Array.from(_),P):d.slice()},P.tickValues=function(_){return arguments.length?(h=_==null?null:Array.from(_),P):h&&h.slice()},P.tickFormat=function(_){return arguments.length?(f=_,P):f},P.tickSize=function(_){return arguments.length?(g=b=+_,P):g},P.tickSizeInner=function(_){return arguments.length?(g=+_,P):g},P.tickSizeOuter=function(_){return arguments.length?(b=+_,P):b},P.tickPadding=function(_){return arguments.length?(y=+_,P):y},P.offset=function(_){return arguments.length?(T=+_,P):T},P}var Cd={value:()=>{}};function Bs(){for(var s,l=0,d=arguments.length,h={};l<d;++l){if(!(s=arguments[l]+"")||s in h||/[\s.]/.test(s))throw new Error("illegal type: "+s);h[s]=[]}return new us(h)}function us(s){this._=s}function hc(s,l){return s.trim().split(/^|\s+/).map(function(d){var h="",f=d.indexOf(".");if(f>=0&&(h=d.slice(f+1),d=d.slice(0,f)),d&&!l.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:h}})}function tr(s,l){for(var d,h=0,f=s.length;h<f;++h)if((d=s[h]).name===l)return d.value}function nr(s,l,d){for(var h=0,f=s.length;h<f;++h)if(s[h].name===l){s[h]=Cd,s=s.slice(0,h).concat(s.slice(h+1));break}return d!=null&&s.push({name:l,value:d}),s}us.prototype=Bs.prototype={constructor:us,on:function(s,l){var d,h=this._,f=hc(s+"",h),g=-1,b=f.length;if(!(arguments.length<2)){if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++g<b;)if(d=(s=f[g]).type)h[d]=nr(h[d],s.name,l);else if(l==null)for(d in h)h[d]=nr(h[d],s.name,null);return this}for(;++g<b;)if((d=(s=f[g]).type)&&(d=tr(h[d],s.name)))return d},copy:function(){var s={},l=this._;for(var d in l)s[d]=l[d].slice();return new us(s)},call:function(s,l){if((d=arguments.length-2)>0)for(var d,h,f=new Array(d),g=0;g<d;++g)f[g]=arguments[g+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(g=0,d=(h=this._[s]).length;g<d;++g)h[g].value.apply(l,f)},apply:function(s,l,d){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var h=this._[s],f=0,g=h.length;f<g;++f)h[f].value.apply(l,d)}};var Ga="http://www.w3.org/1999/xhtml",Ho={svg:"http://www.w3.org/2000/svg",xhtml:Ga,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ir(s){var l=s+="",d=l.indexOf(":");return d>=0&&(l=s.slice(0,d))!=="xmlns"&&(s=s.slice(d+1)),Ho.hasOwnProperty(l)?{space:Ho[l],local:s}:s}function cn(s){return function(){var l=this.ownerDocument,d=this.namespaceURI;return d===Ga&&l.documentElement.namespaceURI===Ga?l.createElement(s):l.createElementNS(d,s)}}function kd(s){return function(){return this.ownerDocument.createElementNS(s.space,s.local)}}function Da(s){var l=ir(s);return(l.local?kd:cn)(l)}function wr(){}function eo(s){return s==null?wr:function(){return this.querySelector(s)}}function qo(s){return s==null?[]:Array.isArray(s)?s:Array.from(s)}function xr(){return[]}function ar(s){return s==null?xr:function(){return this.querySelectorAll(s)}}function to(s){return function(){return this.matches(s)}}function Al(s){return function(l){return l.matches(s)}}var pc=Array.prototype.find;function Vo(){return this.firstElementChild}var no=Array.prototype.filter;function fc(){return Array.from(this.children)}function ta(s){return new Array(s.length)}function Ia(s,l){this.ownerDocument=s.ownerDocument,this.namespaceURI=s.namespaceURI,this._next=null,this._parent=s,this.__data__=l}function jo(s){return function(){return s}}function Os(s,l,d,h,f,g){for(var b,y=0,T=l.length,k=g.length;y<k;++y)(b=l[y])?(b.__data__=g[y],h[y]=b):d[y]=new Ia(s,g[y]);for(;y<T;++y)(b=l[y])&&(f[y]=b)}function gt(s,l,d,h,f,g,b){var y,T,k,D=new Map,O=l.length,P=g.length,_=new Array(O);for(y=0;y<O;++y)(T=l[y])&&(_[y]=k=b.call(T,T.__data__,y,l)+"",D.has(k)?f[y]=T:D.set(k,T));for(y=0;y<P;++y)k=b.call(s,g[y],y,g)+"",(T=D.get(k))?(h[y]=T,T.__data__=g[y],D.delete(k)):d[y]=new Ia(s,g[y]);for(y=0;y<O;++y)(T=l[y])&&D.get(_[y])===T&&(f[y]=T)}function Td(s){return s.__data__}function gc(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function io(s,l){return s<l?-1:s>l?1:s>=l?0:NaN}function mc(s){return function(){this.removeAttribute(s)}}function Wo(s){return function(){this.removeAttributeNS(s.space,s.local)}}function Sl(s,l){return function(){this.setAttribute(s,l)}}function da(s,l){return function(){this.setAttributeNS(s.space,s.local,l)}}function vc(s,l){return function(){var d=l.apply(this,arguments);d==null?this.removeAttribute(s):this.setAttribute(s,d)}}function sr(s,l){return function(){var d=l.apply(this,arguments);d==null?this.removeAttributeNS(s.space,s.local):this.setAttributeNS(s.space,s.local,d)}}function ao(s){return s.ownerDocument&&s.ownerDocument.defaultView||s.document&&s||s.defaultView}function Ad(s){return function(){this.style.removeProperty(s)}}function hs(s,l,d){return function(){this.style.setProperty(s,l,d)}}function ps(s,l,d){return function(){var h=l.apply(this,arguments);h==null?this.style.removeProperty(s):this.style.setProperty(s,h,d)}}function fs(s,l){return s.style.getPropertyValue(l)||ao(s).getComputedStyle(s,null).getPropertyValue(l)}function El(s){return function(){delete this[s]}}function bc(s,l){return function(){this[s]=l}}function yc(s,l){return function(){var d=l.apply(this,arguments);d==null?delete this[s]:this[s]=d}}function rr(s){return s.trim().split(/^|\s+/)}function Cr(s){return s.classList||new Uo(s)}function Uo(s){this._node=s,this._names=rr(s.getAttribute("class")||"")}function $l(s,l){for(var d=Cr(s),h=-1,f=l.length;++h<f;)d.add(l[h])}function so(s,l){for(var d=Cr(s),h=-1,f=l.length;++h<f;)d.remove(l[h])}function wc(s){return function(){$l(this,s)}}function xc(s){return function(){so(this,s)}}function Dl(s,l){return function(){(l.apply(this,arguments)?$l:so)(this,s)}}function Il(){this.textContent=""}function na(s){return function(){this.textContent=s}}function Cc(s){return function(){var l=s.apply(this,arguments);this.textContent=l??""}}function Sd(){this.innerHTML=""}function kc(s){return function(){this.innerHTML=s}}function Ml(s){return function(){var l=s.apply(this,arguments);this.innerHTML=l??""}}function Tc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ll(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Go(){return null}function Pl(){var s=this.parentNode;s&&s.removeChild(this)}function Yo(){var s=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(s,this.nextSibling):s}function Ko(){var s=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(s,this.nextSibling):s}function Xo(s){return s.trim().split(/^|\s+/).map(function(l){var d="",h=l.indexOf(".");return h>=0&&(d=l.slice(h+1),l=l.slice(0,h)),{type:l,name:d}})}function ro(s){return function(){var l=this.__on;if(l){for(var d,h=0,f=-1,g=l.length;h<g;++h)d=l[h],s.type&&d.type!==s.type||d.name!==s.name?l[++f]=d:this.removeEventListener(d.type,d.listener,d.options);++f?l.length=f:delete this.__on}}}function Xn(s,l,d){return function(){var h,f=this.__on,g=function(T){return function(k){T.call(this,k,this.__data__)}}(l);if(f){for(var b=0,y=f.length;b<y;++b)if((h=f[b]).type===s.type&&h.name===s.name)return this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=g,h.options=d),void(h.value=l)}this.addEventListener(s.type,g,d),h={type:s.type,name:s.name,value:l,listener:g,options:d},f?f.push(h):this.__on=[h]}}function Tn(s,l,d){var h=ao(s),f=h.CustomEvent;typeof f=="function"?f=new f(l,d):(f=h.document.createEvent("Event"),d?(f.initEvent(l,d.bubbles,d.cancelable),f.detail=d.detail):f.initEvent(l,!1,!1)),s.dispatchEvent(f)}function Ac(s,l){return function(){return Tn(this,s,l)}}function kr(s,l){return function(){return Tn(this,s,l.apply(this,arguments))}}Ia.prototype={constructor:Ia,appendChild:function(s){return this._parent.insertBefore(s,this._next)},insertBefore:function(s,l){return this._parent.insertBefore(s,l)},querySelector:function(s){return this._parent.querySelector(s)},querySelectorAll:function(s){return this._parent.querySelectorAll(s)}},Uo.prototype={add:function(s){this._names.indexOf(s)<0&&(this._names.push(s),this._node.setAttribute("class",this._names.join(" ")))},remove:function(s){var l=this._names.indexOf(s);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(s){return this._names.indexOf(s)>=0}};var Tr=[null];function zi(s,l){this._groups=s,this._parents=l}function or(){return new zi([[document.documentElement]],Tr)}function x(s){return typeof s=="string"?new zi([[document.querySelector(s)]],[document.documentElement]):new zi([[s]],Tr)}zi.prototype=or.prototype={constructor:zi,select:function(s){typeof s!="function"&&(s=eo(s));for(var l=this._groups,d=l.length,h=new Array(d),f=0;f<d;++f)for(var g,b,y=l[f],T=y.length,k=h[f]=new Array(T),D=0;D<T;++D)(g=y[D])&&(b=s.call(g,g.__data__,D,y))&&("__data__"in g&&(b.__data__=g.__data__),k[D]=b);return new zi(h,this._parents)},selectAll:function(s){s=typeof s=="function"?function(D){return function(){return qo(D.apply(this,arguments))}}(s):ar(s);for(var l=this._groups,d=l.length,h=[],f=[],g=0;g<d;++g)for(var b,y=l[g],T=y.length,k=0;k<T;++k)(b=y[k])&&(h.push(s.call(b,b.__data__,k,y)),f.push(b));return new zi(h,f)},selectChild:function(s){return this.select(s==null?Vo:function(l){return function(){return pc.call(this.children,l)}}(typeof s=="function"?s:Al(s)))},selectChildren:function(s){return this.selectAll(s==null?fc:function(l){return function(){return no.call(this.children,l)}}(typeof s=="function"?s:Al(s)))},filter:function(s){typeof s!="function"&&(s=to(s));for(var l=this._groups,d=l.length,h=new Array(d),f=0;f<d;++f)for(var g,b=l[f],y=b.length,T=h[f]=[],k=0;k<y;++k)(g=b[k])&&s.call(g,g.__data__,k,b)&&T.push(g);return new zi(h,this._parents)},data:function(s,l){if(!arguments.length)return Array.from(this,Td);var d=l?gt:Os,h=this._parents,f=this._groups;typeof s!="function"&&(s=jo(s));for(var g=f.length,b=new Array(g),y=new Array(g),T=new Array(g),k=0;k<g;++k){var D=h[k],O=f[k],P=O.length,_=gc(s.call(D,D&&D.__data__,k,h)),Y=_.length,j=y[k]=new Array(Y),W=b[k]=new Array(Y),X=T[k]=new Array(P);d(D,O,j,W,X,_,l);for(var ee,Z,K=0,re=0;K<Y;++K)if(ee=j[K]){for(K>=re&&(re=K+1);!(Z=W[re])&&++re<Y;);ee._next=Z||null}}return(b=new zi(b,h))._enter=y,b._exit=T,b},enter:function(){return new zi(this._enter||this._groups.map(ta),this._parents)},exit:function(){return new zi(this._exit||this._groups.map(ta),this._parents)},join:function(s,l,d){var h=this.enter(),f=this,g=this.exit();return typeof s=="function"?(h=s(h))&&(h=h.selection()):h=h.append(s+""),l!=null&&(f=l(f))&&(f=f.selection()),d==null?g.remove():d(g),h&&f?h.merge(f).order():f},merge:function(s){for(var l=s.selection?s.selection():s,d=this._groups,h=l._groups,f=d.length,g=h.length,b=Math.min(f,g),y=new Array(f),T=0;T<b;++T)for(var k,D=d[T],O=h[T],P=D.length,_=y[T]=new Array(P),Y=0;Y<P;++Y)(k=D[Y]||O[Y])&&(_[Y]=k);for(;T<f;++T)y[T]=d[T];return new zi(y,this._parents)},selection:function(){return this},order:function(){for(var s=this._groups,l=-1,d=s.length;++l<d;)for(var h,f=s[l],g=f.length-1,b=f[g];--g>=0;)(h=f[g])&&(b&&4^h.compareDocumentPosition(b)&&b.parentNode.insertBefore(h,b),b=h);return this},sort:function(s){function l(O,P){return O&&P?s(O.__data__,P.__data__):!O-!P}s||(s=io);for(var d=this._groups,h=d.length,f=new Array(h),g=0;g<h;++g){for(var b,y=d[g],T=y.length,k=f[g]=new Array(T),D=0;D<T;++D)(b=y[D])&&(k[D]=b);k.sort(l)}return new zi(f,this._parents).order()},call:function(){var s=arguments[0];return arguments[0]=this,s.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var s=this._groups,l=0,d=s.length;l<d;++l)for(var h=s[l],f=0,g=h.length;f<g;++f){var b=h[f];if(b)return b}return null},size:function(){let s=0;for(const l of this)++s;return s},empty:function(){return!this.node()},each:function(s){for(var l=this._groups,d=0,h=l.length;d<h;++d)for(var f,g=l[d],b=0,y=g.length;b<y;++b)(f=g[b])&&s.call(f,f.__data__,b,g);return this},attr:function(s,l){var d=ir(s);if(arguments.length<2){var h=this.node();return d.local?h.getAttributeNS(d.space,d.local):h.getAttribute(d)}return this.each((l==null?d.local?Wo:mc:typeof l=="function"?d.local?sr:vc:d.local?da:Sl)(d,l))},style:function(s,l,d){return arguments.length>1?this.each((l==null?Ad:typeof l=="function"?ps:hs)(s,l,d??"")):fs(this.node(),s)},property:function(s,l){return arguments.length>1?this.each((l==null?El:typeof l=="function"?yc:bc)(s,l)):this.node()[s]},classed:function(s,l){var d=rr(s+"");if(arguments.length<2){for(var h=Cr(this.node()),f=-1,g=d.length;++f<g;)if(!h.contains(d[f]))return!1;return!0}return this.each((typeof l=="function"?Dl:l?wc:xc)(d,l))},text:function(s){return arguments.length?this.each(s==null?Il:(typeof s=="function"?Cc:na)(s)):this.node().textContent},html:function(s){return arguments.length?this.each(s==null?Sd:(typeof s=="function"?Ml:kc)(s)):this.node().innerHTML},raise:function(){return this.each(Tc)},lower:function(){return this.each(Ll)},append:function(s){var l=typeof s=="function"?s:Da(s);return this.select(function(){return this.appendChild(l.apply(this,arguments))})},insert:function(s,l){var d=typeof s=="function"?s:Da(s),h=l==null?Go:typeof l=="function"?l:eo(l);return this.select(function(){return this.insertBefore(d.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function(){return this.each(Pl)},clone:function(s){return this.select(s?Ko:Yo)},datum:function(s){return arguments.length?this.property("__data__",s):this.node().__data__},on:function(s,l,d){var h,f,g=Xo(s+""),b=g.length;if(!(arguments.length<2)){for(y=l?Xn:ro,h=0;h<b;++h)this.each(y(g[h],l,d));return this}var y=this.node().__on;if(y){for(var T,k=0,D=y.length;k<D;++k)for(h=0,T=y[k];h<b;++h)if((f=g[h]).type===T.type&&f.name===T.name)return T.value}},dispatch:function(s,l){return this.each((typeof l=="function"?kr:Ac)(s,l))},[Symbol.iterator]:function*(){for(var s=this._groups,l=0,d=s.length;l<d;++l)for(var h,f=s[l],g=0,b=f.length;g<b;++g)(h=f[g])&&(yield h)}};var E=0;function R(){return new F}function F(){this._="@"+(++E).toString(36)}function Q(s){let l;for(;l=s.sourceEvent;)s=l;return s}function ne(s,l){if(s=Q(s),l===void 0&&(l=s.currentTarget),l){var d=l.ownerSVGElement||l;if(d.createSVGPoint){var h=d.createSVGPoint();return h.x=s.clientX,h.y=s.clientY,[(h=h.matrixTransform(l.getScreenCTM().inverse())).x,h.y]}if(l.getBoundingClientRect){var f=l.getBoundingClientRect();return[s.clientX-f.left-l.clientLeft,s.clientY-f.top-l.clientTop]}}return[s.pageX,s.pageY]}F.prototype=R.prototype={constructor:F,get:function(s){for(var l=this._;!(l in s);)if(!(s=s.parentNode))return;return s[l]},set:function(s,l){return s[this._]=l},remove:function(s){return this._ in s&&delete s[this._]},toString:function(){return this._}};const ae={passive:!1},ye={capture:!0,passive:!1};function be(s){s.stopImmediatePropagation()}function Ee(s){s.preventDefault(),s.stopImmediatePropagation()}function Oe(s){var l=s.document.documentElement,d=x(s).on("dragstart.drag",Ee,ye);"onselectstart"in l?d.on("selectstart.drag",Ee,ye):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function We(s,l){var d=s.document.documentElement,h=x(s).on("dragstart.drag",null);l&&(h.on("click.drag",Ee,ye),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in d?h.on("selectstart.drag",null):(d.style.MozUserSelect=d.__noselect,delete d.__noselect)}var Pe=s=>()=>s;function Ne(s,{sourceEvent:l,subject:d,target:h,identifier:f,active:g,x:b,y,dx:T,dy:k,dispatch:D}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},subject:{value:d,enumerable:!0,configurable:!0},target:{value:h,enumerable:!0,configurable:!0},identifier:{value:f,enumerable:!0,configurable:!0},active:{value:g,enumerable:!0,configurable:!0},x:{value:b,enumerable:!0,configurable:!0},y:{value:y,enumerable:!0,configurable:!0},dx:{value:T,enumerable:!0,configurable:!0},dy:{value:k,enumerable:!0,configurable:!0},_:{value:D}})}function mt(s){return!s.ctrlKey&&!s.button}function St(){return this.parentNode}function wt(s,l){return l??{x:s.x,y:s.y}}function Gn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bn(s,l,d){s.prototype=l.prototype=d,d.constructor=s}function Li(s,l){var d=Object.create(s.prototype);for(var h in l)d[h]=l[h];return d}function dn(){}Ne.prototype.on=function(){var s=this._.on.apply(this._,arguments);return s===this._?this:s};var ce=.7,pi=1/ce,on="\\s*([+-]?\\d+)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qo=/^#([0-9a-f]{3,8})$/,ji=new RegExp(`^rgb\\(${on},${on},${on}\\)$`),ai=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),Ar=new RegExp(`^rgba\\(${on},${on},${on},${On}\\)$`),si=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${On}\\)$`),Rs=new RegExp(`^hsl\\(${On},${Pi},${Pi}\\)$`),ba=new RegExp(`^hsla\\(${On},${Pi},${Pi},${On}\\)$`),Vn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ri(){return this.rgb().formatHex()}function ia(){return this.rgb().formatRgb()}function oi(s){var l,d;return s=(s+"").trim().toLowerCase(),(l=Qo.exec(s))?(d=l[1].length,l=parseInt(l[1],16),d===6?Ht(l):d===3?new un(l>>8&15|l>>4&240,l>>4&15|240&l,(15&l)<<4|15&l,1):d===8?Cn(l>>24&255,l>>16&255,l>>8&255,(255&l)/255):d===4?Cn(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|240&l,((15&l)<<4|15&l)/255):null):(l=ji.exec(s))?new un(l[1],l[2],l[3],1):(l=ai.exec(s))?new un(255*l[1]/100,255*l[2]/100,255*l[3]/100,1):(l=Ar.exec(s))?Cn(l[1],l[2],l[3],l[4]):(l=si.exec(s))?Cn(255*l[1]/100,255*l[2]/100,255*l[3]/100,l[4]):(l=Rs.exec(s))?Sc(l[1],l[2]/100,l[3]/100,1):(l=ba.exec(s))?Sc(l[1],l[2]/100,l[3]/100,l[4]):Vn.hasOwnProperty(s)?Ht(Vn[s]):s==="transparent"?new un(NaN,NaN,NaN,0):null}function Ht(s){return new un(s>>16&255,s>>8&255,255&s,1)}function Cn(s,l,d,h){return h<=0&&(s=l=d=NaN),new un(s,l,d,h)}function Qn(s){return s instanceof dn||(s=oi(s)),s?new un((s=s.rgb()).r,s.g,s.b,s.opacity):new un}function jn(s,l,d,h){return arguments.length===1?Qn(s):new un(s,l,d,h??1)}function un(s,l,d,h){this.r=+s,this.g=+l,this.b=+d,this.opacity=+h}function Ci(){return`#${ms(this.r)}${ms(this.g)}${ms(this.b)}`}function Ma(){const s=gs(this.opacity);return`${s===1?"rgb(":"rgba("}${Ya(this.r)}, ${Ya(this.g)}, ${Ya(this.b)}${s===1?")":`, ${s})`}`}function gs(s){return isNaN(s)?1:Math.max(0,Math.min(1,s))}function Ya(s){return Math.max(0,Math.min(255,Math.round(s)||0))}function ms(s){return((s=Ya(s))<16?"0":"")+s.toString(16)}function Sc(s,l,d,h){return h<=0?s=l=d=NaN:d<=0||d>=1?s=l=NaN:l<=0&&(s=NaN),new Jn(s,l,d,h)}function lr(s){if(s instanceof Jn)return new Jn(s.h,s.s,s.l,s.opacity);if(s instanceof dn||(s=oi(s)),!s)return new Jn;if(s instanceof Jn)return s;var l=(s=s.rgb()).r/255,d=s.g/255,h=s.b/255,f=Math.min(l,d,h),g=Math.max(l,d,h),b=NaN,y=g-f,T=(g+f)/2;return y?(b=l===g?(d-h)/y+6*(d<h):d===g?(h-l)/y+2:(l-d)/y+4,y/=T<.5?g+f:2-g-f,b*=60):y=T>0&&T<1?0:b,new Jn(b,y,T,s.opacity)}function kn(s,l,d,h){return arguments.length===1?lr(s):new Jn(s,l,d,h??1)}function Jn(s,l,d,h){this.h=+s,this.s=+l,this.l=+d,this.opacity=+h}function Jo(s){return(s=(s||0)%360)<0?s+360:s}function Ka(s){return Math.max(0,Math.min(1,s||0))}function Zo(s,l,d){return 255*(s<60?l+(d-l)*s/60:s<180?d:s<240?l+(d-l)*(240-s)/60:l)}Bn(dn,oi,{copy(s){return Object.assign(new this.constructor,this,s)},displayable(){return this.rgb().displayable()},hex:ri,formatHex:ri,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return lr(this).formatHsl()},formatRgb:ia,toString:ia}),Bn(un,jn,Li(dn,{brighter(s){return s=s==null?pi:Math.pow(pi,s),new un(this.r*s,this.g*s,this.b*s,this.opacity)},darker(s){return s=s==null?ce:Math.pow(ce,s),new un(this.r*s,this.g*s,this.b*s,this.opacity)},rgb(){return this},clamp(){return new un(Ya(this.r),Ya(this.g),Ya(this.b),gs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ci,formatHex:Ci,formatHex8:function(){return`#${ms(this.r)}${ms(this.g)}${ms(this.b)}${ms(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ma,toString:Ma})),Bn(Jn,kn,Li(dn,{brighter(s){return s=s==null?pi:Math.pow(pi,s),new Jn(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?ce:Math.pow(ce,s),new Jn(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=this.h%360+360*(this.h<0),l=isNaN(s)||isNaN(this.s)?0:this.s,d=this.l,h=d+(d<.5?d:1-d)*l,f=2*d-h;return new un(Zo(s>=240?s-240:s+120,f,h),Zo(s,f,h),Zo(s<120?s+240:s-120,f,h),this.opacity)},clamp(){return new Jn(Jo(this.h),Ka(this.s),Ka(this.l),gs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const s=gs(this.opacity);return`${s===1?"hsl(":"hsla("}${Jo(this.h)}, ${100*Ka(this.s)}%, ${100*Ka(this.l)}%${s===1?")":`, ${s})`}`}}));const Xa=Math.PI/180,ua=180/Math.PI,Qa=.96422,Sr=.82521,Er=4/29,oo=6/29,lo=3*oo*oo;function Kt(s){if(s instanceof fi)return new fi(s.l,s.a,s.b,s.opacity);if(s instanceof Bi)return el(s);s instanceof un||(s=Qn(s));var l,d,h=uo(s.r),f=uo(s.g),g=uo(s.b),b=Fi((.2225045*h+.7168786*f+.0606169*g)/1);return h===f&&f===g?l=d=b:(l=Fi((.4360747*h+.3850649*f+.1430804*g)/Qa),d=Fi((.0139322*h+.0971045*f+.7141733*g)/Sr)),new fi(116*b-16,500*(l-b),200*(b-d),s.opacity)}function cr(s,l,d,h){return arguments.length===1?Kt(s):new fi(s,l,d,h??1)}function fi(s,l,d,h){this.l=+s,this.a=+l,this.b=+d,this.opacity=+h}function Fi(s){return s>.008856451679035631?Math.pow(s,1/3):s/lo+Er}function aa(s){return s>oo?s*s*s:lo*(s-Er)}function co(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function uo(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function ha(s){if(s instanceof Bi)return new Bi(s.h,s.c,s.l,s.opacity);if(s instanceof fi||(s=Kt(s)),s.a===0&&s.b===0)return new Bi(NaN,0<s.l&&s.l<100?0:NaN,s.l,s.opacity);var l=Math.atan2(s.b,s.a)*ua;return new Bi(l<0?l+360:l,Math.sqrt(s.a*s.a+s.b*s.b),s.l,s.opacity)}function dr(s,l,d,h){return arguments.length===1?ha(s):new Bi(s,l,d,h??1)}function Bi(s,l,d,h){this.h=+s,this.c=+l,this.l=+d,this.opacity=+h}function el(s){if(isNaN(s.h))return new fi(s.l,0,0,s.opacity);var l=s.h*Xa;return new fi(s.l,Math.cos(l)*s.c,Math.sin(l)*s.c,s.opacity)}Bn(fi,cr,Li(dn,{brighter(s){return new fi(this.l+18*(s??1),this.a,this.b,this.opacity)},darker(s){return new fi(this.l-18*(s??1),this.a,this.b,this.opacity)},rgb(){var s=(this.l+16)/116,l=isNaN(this.a)?s:s+this.a/500,d=isNaN(this.b)?s:s-this.b/200;return new un(co(3.1338561*(l=Qa*aa(l))-1.6168667*(s=1*aa(s))-.4906146*(d=Sr*aa(d))),co(-.9787684*l+1.9161415*s+.033454*d),co(.0719453*l-.2289914*s+1.4052427*d),this.opacity)}})),Bn(Bi,dr,Li(dn,{brighter(s){return new Bi(this.h,this.c,this.l+18*(s??1),this.opacity)},darker(s){return new Bi(this.h,this.c,this.l-18*(s??1),this.opacity)},rgb(){return el(this).rgb()}}));var $r=-.14861,ya=1.78277,Dr=-.29227,Ns=-.90649,Ja=1.97294,ho=Ja*Ns,vs=Ja*ya,se=ya*Dr-Ns*$r;function ve(s){if(s instanceof He)return new He(s.h,s.s,s.l,s.opacity);s instanceof un||(s=Qn(s));var l=s.r/255,d=s.g/255,h=s.b/255,f=(se*h+ho*l-vs*d)/(se+ho-vs),g=h-f,b=(Ja*(d-f)-Dr*g)/Ns,y=Math.sqrt(b*b+g*g)/(Ja*f*(1-f)),T=y?Math.atan2(b,g)*ua-120:NaN;return new He(T<0?T+360:T,y,f,s.opacity)}function Ae(s,l,d,h){return arguments.length===1?ve(s):new He(s,l,d,h??1)}function He(s,l,d,h){this.h=+s,this.s=+l,this.l=+d,this.opacity=+h}function Se(s,l,d,h,f){var g=s*s,b=g*s;return((1-3*s+3*g-b)*l+(4-6*g+3*b)*d+(1+3*s+3*g-3*b)*h+b*f)/6}function Je(s){var l=s.length-1;return function(d){var h=d<=0?d=0:d>=1?(d=1,l-1):Math.floor(d*l),f=s[h],g=s[h+1],b=h>0?s[h-1]:2*f-g,y=h<l-1?s[h+2]:2*g-f;return Se((d-h/l)*l,b,f,g,y)}}function tt(s){var l=s.length;return function(d){var h=Math.floor(((d%=1)<0?++d:d)*l),f=s[(h+l-1)%l],g=s[h%l],b=s[(h+1)%l],y=s[(h+2)%l];return Se((d-h/l)*l,f,g,b,y)}}Bn(He,Ae,Li(dn,{brighter(s){return s=s==null?pi:Math.pow(pi,s),new He(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?ce:Math.pow(ce,s),new He(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=isNaN(this.h)?0:(this.h+120)*Xa,l=+this.l,d=isNaN(this.s)?0:this.s*l*(1-l),h=Math.cos(s),f=Math.sin(s);return new un(255*(l+d*($r*h+ya*f)),255*(l+d*(Dr*h+Ns*f)),255*(l+d*(Ja*h)),this.opacity)}}));var dt=s=>()=>s;function rt(s,l){return function(d){return s+d*l}}function qt(s,l){var d=l-s;return d?rt(s,d>180||d<-180?d-360*Math.round(d/360):d):dt(isNaN(s)?l:s)}function _t(s){return(s=+s)==1?vt:function(l,d){return d-l?function(h,f,g){return h=Math.pow(h,g),f=Math.pow(f,g)-h,g=1/g,function(b){return Math.pow(h+b*f,g)}}(l,d,s):dt(isNaN(l)?d:l)}}function vt(s,l){var d=l-s;return d?rt(s,d):dt(isNaN(s)?l:s)}var rn=function s(l){var d=_t(l);function h(f,g){var b=d((f=jn(f)).r,(g=jn(g)).r),y=d(f.g,g.g),T=d(f.b,g.b),k=vt(f.opacity,g.opacity);return function(D){return f.r=b(D),f.g=y(D),f.b=T(D),f.opacity=k(D),f+""}}return h.gamma=s,h}(1);function ei(s){return function(l){var d,h,f=l.length,g=new Array(f),b=new Array(f),y=new Array(f);for(d=0;d<f;++d)h=jn(l[d]),g[d]=h.r||0,b[d]=h.g||0,y[d]=h.b||0;return g=s(g),b=s(b),y=s(y),h.opacity=1,function(T){return h.r=g(T),h.g=b(T),h.b=y(T),h+""}}}var Lt=ei(Je),ki=ei(tt);function li(s,l){l||(l=[]);var d,h=s?Math.min(l.length,s.length):0,f=l.slice();return function(g){for(d=0;d<h;++d)f[d]=s[d]*(1-g)+l[d]*g;return f}}function Oi(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function _n(s,l){var d,h=l?l.length:0,f=s?Math.min(h,s.length):0,g=new Array(f),b=new Array(h);for(d=0;d<f;++d)g[d]=Pa(s[d],l[d]);for(;d<h;++d)b[d]=l[d];return function(y){for(d=0;d<f;++d)b[d]=g[d](y);return b}}function La(s,l){var d=new Date;return s=+s,l=+l,function(h){return d.setTime(s*(1-h)+l*h),d}}function zn(s,l){return s=+s,l=+l,function(d){return s*(1-d)+l*d}}function ti(s,l){var d,h={},f={};for(d in s!==null&&typeof s=="object"||(s={}),l!==null&&typeof l=="object"||(l={}),l)d in s?h[d]=Pa(s[d],l[d]):f[d]=l[d];return function(g){for(d in h)f[d]=h[d](g);return f}}var Wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ir=new RegExp(Wi.source,"g");function ur(s,l){var d,h,f,g=Wi.lastIndex=Ir.lastIndex=0,b=-1,y=[],T=[];for(s+="",l+="";(d=Wi.exec(s))&&(h=Ir.exec(l));)(f=h.index)>g&&(f=l.slice(g,f),y[b]?y[b]+=f:y[++b]=f),(d=d[0])===(h=h[0])?y[b]?y[b]+=h:y[++b]=h:(y[++b]=null,T.push({i:b,x:zn(d,h)})),g=Ir.lastIndex;return g<l.length&&(f=l.slice(g),y[b]?y[b]+=f:y[++b]=f),y.length<2?T[0]?function(k){return function(D){return k(D)+""}}(T[0].x):function(k){return function(){return k}}(l):(l=T.length,function(k){for(var D,O=0;O<l;++O)y[(D=T[O]).i]=D.x(k);return y.join("")})}function Pa(s,l){var d,h=typeof l;return l==null||h==="boolean"?dt(l):(h==="number"?zn:h==="string"?(d=oi(l))?(l=d,rn):ur:l instanceof oi?rn:l instanceof Date?La:Oi(l)?li:Array.isArray(l)?_n:typeof l.valueOf!="function"&&typeof l.toString!="function"||isNaN(l)?ti:zn)(s,l)}function pa(s,l){return s=+s,l=+l,function(d){return Math.round(s*(1-d)+l*d)}}var tl,Ed=180/Math.PI,Bl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nl(s,l,d,h,f,g){var b,y,T;return(b=Math.sqrt(s*s+l*l))&&(s/=b,l/=b),(T=s*d+l*h)&&(d-=s*T,h-=l*T),(y=Math.sqrt(d*d+h*h))&&(d/=y,h/=y,T/=y),s*h<l*d&&(s=-s,l=-l,T=-T,b=-b),{translateX:f,translateY:g,rotate:Math.atan2(l,s)*Ed,skewX:Math.atan(T)*Ed,scaleX:b,scaleY:y}}function ju(s,l,d,h){function f(g){return g.length?g.pop()+" ":""}return function(g,b){var y=[],T=[];return g=s(g),b=s(b),function(k,D,O,P,_,Y){if(k!==O||D!==P){var j=_.push("translate(",null,l,null,d);Y.push({i:j-4,x:zn(k,O)},{i:j-2,x:zn(D,P)})}else(O||P)&&_.push("translate("+O+l+P+d)}(g.translateX,g.translateY,b.translateX,b.translateY,y,T),function(k,D,O,P){k!==D?(k-D>180?D+=360:D-k>180&&(k+=360),P.push({i:O.push(f(O)+"rotate(",null,h)-2,x:zn(k,D)})):D&&O.push(f(O)+"rotate("+D+h)}(g.rotate,b.rotate,y,T),function(k,D,O,P){k!==D?P.push({i:O.push(f(O)+"skewX(",null,h)-2,x:zn(k,D)}):D&&O.push(f(O)+"skewX("+D+h)}(g.skewX,b.skewX,y,T),function(k,D,O,P,_,Y){if(k!==O||D!==P){var j=_.push(f(_)+"scale(",null,",",null,")");Y.push({i:j-4,x:zn(k,O)},{i:j-2,x:zn(D,P)})}else O===1&&P===1||_.push(f(_)+"scale("+O+","+P+")")}(g.scaleX,g.scaleY,b.scaleX,b.scaleY,y,T),g=b=null,function(k){for(var D,O=-1,P=T.length;++O<P;)y[(D=T[O]).i]=D.x(k);return y.join("")}}}var po=ju(function(s){const l=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(s+"");return l.isIdentity?Bl:nl(l.a,l.b,l.c,l.d,l.e,l.f)},"px, ","px)","deg)"),$d=ju(function(s){return s==null?Bl:(tl||(tl=document.createElementNS("http://www.w3.org/2000/svg","g")),tl.setAttribute("transform",s),(s=tl.transform.baseVal.consolidate())?nl((s=s.matrix).a,s.b,s.c,s.d,s.e,s.f):Bl)},", ",")",")");function Ec(s){return((s=Math.exp(s))+1/s)/2}var $c=function s(l,d,h){function f(g,b){var y,T,k=g[0],D=g[1],O=g[2],P=b[0],_=b[1],Y=b[2],j=P-k,W=_-D,X=j*j+W*W;if(X<1e-12)T=Math.log(Y/O)/l,y=function(Ce){return[k+Ce*j,D+Ce*W,O*Math.exp(l*Ce*T)]};else{var ee=Math.sqrt(X),Z=(Y*Y-O*O+h*X)/(2*O*d*ee),K=(Y*Y-O*O-h*X)/(2*Y*d*ee),re=Math.log(Math.sqrt(Z*Z+1)-Z),oe=Math.log(Math.sqrt(K*K+1)-K);T=(oe-re)/l,y=function(Ce){var Ie=Ce*T,Te=Ec(re),pe=O/(d*ee)*(Te*function(ge){return((ge=Math.exp(2*ge))-1)/(ge+1)}(l*Ie+re)-function(ge){return((ge=Math.exp(ge))-1/ge)/2}(re));return[k+pe*j,D+pe*W,O*Te/Ec(l*Ie+re)]}}return y.duration=1e3*T*l/Math.SQRT2,y}return f.rho=function(g){var b=Math.max(.001,+g),y=b*b;return s(b,y,y*y)},f}(Math.SQRT2,2,4);function Wu(s){return function(l,d){var h=s((l=kn(l)).h,(d=kn(d)).h),f=vt(l.s,d.s),g=vt(l.l,d.l),b=vt(l.opacity,d.opacity);return function(y){return l.h=h(y),l.s=f(y),l.l=g(y),l.opacity=b(y),l+""}}}var Dc=Wu(qt),Dd=Wu(vt);function Uu(s){return function(l,d){var h=s((l=dr(l)).h,(d=dr(d)).h),f=vt(l.c,d.c),g=vt(l.l,d.l),b=vt(l.opacity,d.opacity);return function(y){return l.h=h(y),l.c=f(y),l.l=g(y),l.opacity=b(y),l+""}}}var Za=Uu(qt),fo=Uu(vt);function Id(s){return function l(d){function h(f,g){var b=s((f=Ae(f)).h,(g=Ae(g)).h),y=vt(f.s,g.s),T=vt(f.l,g.l),k=vt(f.opacity,g.opacity);return function(D){return f.h=b(D),f.s=y(D),f.l=T(Math.pow(D,d)),f.opacity=k(D),f+""}}return d=+d,h.gamma=l,h}(1)}var Md=Id(qt),Ri=Id(vt);function Ld(s,l){l===void 0&&(l=s,s=Pa);for(var d=0,h=l.length-1,f=l[0],g=new Array(h<0?0:h);d<h;)g[d]=s(f,f=l[++d]);return function(b){var y=Math.max(0,Math.min(h-1,Math.floor(b*=h)));return g[y](b-y)}}var il,Mn,_s=0,Mr=0,al=0,sl=0,Lr=0,Ol=0,zs=typeof performance=="object"&&performance.now?performance:Date,Pd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function rl(){return Lr||(Pd(Ot),Lr=zs.now()+Ol)}function Ot(){Lr=0}function ol(){this._call=this._time=this._next=null}function Rl(s,l,d){var h=new ol;return h.restart(s,l,d),h}function Ic(){rl(),++_s;for(var s,l=il;l;)(s=Lr-l._time)>=0&&l._call.call(void 0,s),l=l._next;--_s}function Bd(){Lr=(sl=zs.now())+Ol,_s=Mr=0;try{Ic()}finally{_s=0,function(){for(var s,l,d=il,h=1/0;d;)d._call?(h>d._time&&(h=d._time),s=d,d=d._next):(l=d._next,d._next=null,d=s?s._next=l:il=l);Mn=s,Nl(h)}(),Lr=0}}function Gu(){var s=zs.now(),l=s-sl;l>1e3&&(Ol-=l,sl=s)}function Nl(s){_s||(Mr&&(Mr=clearTimeout(Mr)),s-Lr>24?(s<1/0&&(Mr=setTimeout(Bd,s-zs.now()-Ol)),al&&(al=clearInterval(al))):(al||(sl=zs.now(),al=setInterval(Gu,1e3)),_s=1,Pd(Bd)))}function Mc(s,l,d){var h=new ol;return l=l==null?0:+l,h.restart(f=>{h.stop(),s(f+l)},l,d),h}ol.prototype=Rl.prototype={constructor:ol,restart:function(s,l,d){if(typeof s!="function")throw new TypeError("callback is not a function");d=(d==null?rl():+d)+(l==null?0:+l),this._next||Mn===this||(Mn?Mn._next=this:il=this,Mn=this),this._call=s,this._time=d,Nl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nl())}};var Yu=Bs("start","end","cancel","interrupt"),Od=[];function go(s,l,d,h,f,g){var b=s.__transition;if(b){if(d in b)return}else s.__transition={};(function(y,T,k){var D,O=y.__transition;function P(W){k.state=1,k.timer.restart(_,k.delay,k.time),k.delay<=W&&_(W-k.delay)}function _(W){var X,ee,Z,K;if(k.state!==1)return j();for(X in O)if((K=O[X]).name===k.name){if(K.state===3)return Mc(_);K.state===4?(K.state=6,K.timer.stop(),K.on.call("interrupt",y,y.__data__,K.index,K.group),delete O[X]):+X<T&&(K.state=6,K.timer.stop(),K.on.call("cancel",y,y.__data__,K.index,K.group),delete O[X])}if(Mc(function(){k.state===3&&(k.state=4,k.timer.restart(Y,k.delay,k.time),Y(W))}),k.state=2,k.on.call("start",y,y.__data__,k.index,k.group),k.state===2){for(k.state=3,D=new Array(Z=k.tween.length),X=0,ee=-1;X<Z;++X)(K=k.tween[X].value.call(y,y.__data__,k.index,k.group))&&(D[++ee]=K);D.length=ee+1}}function Y(W){for(var X=W<k.duration?k.ease.call(null,W/k.duration):(k.timer.restart(j),k.state=5,1),ee=-1,Z=D.length;++ee<Z;)D[ee].call(y,X);k.state===5&&(k.on.call("end",y,y.__data__,k.index,k.group),j())}function j(){for(var W in k.state=6,k.timer.stop(),delete O[T],O)return;delete y.__transition}O[T]=k,k.timer=Rl(P,0,k.time)})(s,d,{name:l,index:h,group:f,on:Yu,tween:Od,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function Lc(s,l){var d=Ba(s,l);if(d.state>0)throw new Error("too late; already scheduled");return d}function bs(s,l){var d=Ba(s,l);if(d.state>3)throw new Error("too late; already running");return d}function Ba(s,l){var d=s.__transition;if(!d||!(d=d[l]))throw new Error("transition not found");return d}function Ui(s,l){var d,h,f,g=s.__transition,b=!0;if(g){for(f in l=l==null?null:l+"",g)(d=g[f]).name===l?(h=d.state>2&&d.state<5,d.state=6,d.timer.stop(),d.on.call(h?"interrupt":"cancel",s,s.__data__,d.index,d.group),delete g[f]):b=!1;b&&delete s.__transition}}function Tp(s,l){var d,h;return function(){var f=bs(this,s),g=f.tween;if(g!==d){for(var b=0,y=(h=d=g).length;b<y;++b)if(h[b].name===l){(h=h.slice()).splice(b,1);break}}f.tween=h}}function Ap(s,l,d){var h,f;if(typeof d!="function")throw new Error;return function(){var g=bs(this,s),b=g.tween;if(b!==h){f=(h=b).slice();for(var y={name:l,value:d},T=0,k=f.length;T<k;++T)if(f[T].name===l){f[T]=y;break}T===k&&f.push(y)}g.tween=f}}function _l(s,l,d){var h=s._id;return s.each(function(){var f=bs(this,h);(f.value||(f.value={}))[l]=d.apply(this,arguments)}),function(f){return Ba(f,h).value[l]}}function Pc(s,l){var d;return(typeof l=="number"?zn:l instanceof oi?rn:(d=oi(l))?(l=d,rn):ur)(s,l)}function Sp(s){return function(){this.removeAttribute(s)}}function Rd(s){return function(){this.removeAttributeNS(s.space,s.local)}}function Nd(s,l,d){var h,f,g=d+"";return function(){var b=this.getAttribute(s);return b===g?null:b===h?f:f=l(h=b,d)}}function Ku(s,l,d){var h,f,g=d+"";return function(){var b=this.getAttributeNS(s.space,s.local);return b===g?null:b===h?f:f=l(h=b,d)}}function _d(s,l,d){var h,f,g;return function(){var b,y,T=d(this);if(T!=null)return(b=this.getAttribute(s))===(y=T+"")?null:b===h&&y===f?g:(f=y,g=l(h=b,T));this.removeAttribute(s)}}function Pr(s,l,d){var h,f,g;return function(){var b,y,T=d(this);if(T!=null)return(b=this.getAttributeNS(s.space,s.local))===(y=T+"")?null:b===h&&y===f?g:(f=y,g=l(h=b,T));this.removeAttributeNS(s.space,s.local)}}function Ep(s,l){return function(d){this.setAttribute(s,l.call(this,d))}}function Xu(s,l){return function(d){this.setAttributeNS(s.space,s.local,l.call(this,d))}}function Bc(s,l){var d,h;function f(){var g=l.apply(this,arguments);return g!==h&&(d=(h=g)&&Xu(s,g)),d}return f._value=l,f}function Qu(s,l){var d,h;function f(){var g=l.apply(this,arguments);return g!==h&&(d=(h=g)&&Ep(s,g)),d}return f._value=l,f}function zd(s,l){return function(){Lc(this,s).delay=+l.apply(this,arguments)}}function $p(s,l){return l=+l,function(){Lc(this,s).delay=l}}function Fd(s,l){return function(){bs(this,s).duration=+l.apply(this,arguments)}}function Hd(s,l){return l=+l,function(){bs(this,s).duration=l}}function Dp(s,l){if(typeof l!="function")throw new Error;return function(){bs(this,s).ease=l}}function qd(s,l,d){var h,f,g=function(b){return(b+"").trim().split(/^|\s+/).every(function(y){var T=y.indexOf(".");return T>=0&&(y=y.slice(0,T)),!y||y==="start"})}(l)?Lc:bs;return function(){var b=g(this,s),y=b.on;y!==h&&(f=(h=y).copy()).on(l,d),b.on=f}}var Vd=or.prototype.constructor;function jd(s){return function(){this.style.removeProperty(s)}}function Ju(s,l,d){return function(h){this.style.setProperty(s,l.call(this,h),d)}}function Oc(s,l,d){var h,f;function g(){var b=l.apply(this,arguments);return b!==f&&(h=(f=b)&&Ju(s,b,d)),h}return g._value=l,g}function zl(s){return function(l){this.textContent=s.call(this,l)}}function Zu(s){var l,d;function h(){var f=s.apply(this,arguments);return f!==d&&(l=(d=f)&&zl(f)),l}return h._value=s,h}var mo=0;function Fs(s,l,d,h){this._groups=s,this._parents=l,this._name=d,this._id=h}function Rc(s){return or().transition(s)}function ci(){return++mo}var hr=or.prototype;Fs.prototype=Rc.prototype={constructor:Fs,select:function(s){var l=this._name,d=this._id;typeof s!="function"&&(s=eo(s));for(var h=this._groups,f=h.length,g=new Array(f),b=0;b<f;++b)for(var y,T,k=h[b],D=k.length,O=g[b]=new Array(D),P=0;P<D;++P)(y=k[P])&&(T=s.call(y,y.__data__,P,k))&&("__data__"in y&&(T.__data__=y.__data__),O[P]=T,go(O[P],l,d,P,O,Ba(y,d)));return new Fs(g,this._parents,l,d)},selectAll:function(s){var l=this._name,d=this._id;typeof s!="function"&&(s=ar(s));for(var h=this._groups,f=h.length,g=[],b=[],y=0;y<f;++y)for(var T,k=h[y],D=k.length,O=0;O<D;++O)if(T=k[O]){for(var P,_=s.call(T,T.__data__,O,k),Y=Ba(T,d),j=0,W=_.length;j<W;++j)(P=_[j])&&go(P,l,d,j,_,Y);g.push(_),b.push(T)}return new Fs(g,b,l,d)},selectChild:hr.selectChild,selectChildren:hr.selectChildren,filter:function(s){typeof s!="function"&&(s=to(s));for(var l=this._groups,d=l.length,h=new Array(d),f=0;f<d;++f)for(var g,b=l[f],y=b.length,T=h[f]=[],k=0;k<y;++k)(g=b[k])&&s.call(g,g.__data__,k,b)&&T.push(g);return new Fs(h,this._parents,this._name,this._id)},merge:function(s){if(s._id!==this._id)throw new Error;for(var l=this._groups,d=s._groups,h=l.length,f=d.length,g=Math.min(h,f),b=new Array(h),y=0;y<g;++y)for(var T,k=l[y],D=d[y],O=k.length,P=b[y]=new Array(O),_=0;_<O;++_)(T=k[_]||D[_])&&(P[_]=T);for(;y<h;++y)b[y]=l[y];return new Fs(b,this._parents,this._name,this._id)},selection:function(){return new Vd(this._groups,this._parents)},transition:function(){for(var s=this._name,l=this._id,d=ci(),h=this._groups,f=h.length,g=0;g<f;++g)for(var b,y=h[g],T=y.length,k=0;k<T;++k)if(b=y[k]){var D=Ba(b,l);go(b,s,d,k,y,{time:D.time+D.delay+D.duration,delay:0,duration:D.duration,ease:D.ease})}return new Fs(h,this._parents,s,d)},call:hr.call,nodes:hr.nodes,node:hr.node,size:hr.size,empty:hr.empty,each:hr.each,on:function(s,l){var d=this._id;return arguments.length<2?Ba(this.node(),d).on.on(s):this.each(qd(d,s,l))},attr:function(s,l){var d=ir(s),h=d==="transform"?$d:Pc;return this.attrTween(s,typeof l=="function"?(d.local?Pr:_d)(d,h,_l(this,"attr."+s,l)):l==null?(d.local?Rd:Sp)(d):(d.local?Ku:Nd)(d,h,l))},attrTween:function(s,l){var d="attr."+s;if(arguments.length<2)return(d=this.tween(d))&&d._value;if(l==null)return this.tween(d,null);if(typeof l!="function")throw new Error;var h=ir(s);return this.tween(d,(h.local?Bc:Qu)(h,l))},style:function(s,l,d){var h=(s+="")=="transform"?po:Pc;return l==null?this.styleTween(s,function(f,g){var b,y,T;return function(){var k=fs(this,f),D=(this.style.removeProperty(f),fs(this,f));return k===D?null:k===b&&D===y?T:T=g(b=k,y=D)}}(s,h)).on("end.style."+s,jd(s)):typeof l=="function"?this.styleTween(s,function(f,g,b){var y,T,k;return function(){var D=fs(this,f),O=b(this),P=O+"";return O==null&&(this.style.removeProperty(f),P=O=fs(this,f)),D===P?null:D===y&&P===T?k:(T=P,k=g(y=D,O))}}(s,h,_l(this,"style."+s,l))).each(function(f,g){var b,y,T,k,D="style."+g,O="end."+D;return function(){var P=bs(this,f),_=P.on,Y=P.value[D]==null?k||(k=jd(g)):void 0;_===b&&T===Y||(y=(b=_).copy()).on(O,T=Y),P.on=y}}(this._id,s)):this.styleTween(s,function(f,g,b){var y,T,k=b+"";return function(){var D=fs(this,f);return D===k?null:D===y?T:T=g(y=D,b)}}(s,h,l),d).on("end.style."+s,null)},styleTween:function(s,l,d){var h="style."+(s+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(l==null)return this.tween(h,null);if(typeof l!="function")throw new Error;return this.tween(h,Oc(s,l,d??""))},text:function(s){return this.tween("text",typeof s=="function"?function(l){return function(){var d=l(this);this.textContent=d??""}}(_l(this,"text",s)):function(l){return function(){this.textContent=l}}(s==null?"":s+""))},textTween:function(s){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;return this.tween(l,Zu(s))},remove:function(){return this.on("end.remove",function(s){return function(){var l=this.parentNode;for(var d in this.__transition)if(+d!==s)return;l&&l.removeChild(this)}}(this._id))},tween:function(s,l){var d=this._id;if(s+="",arguments.length<2){for(var h,f=Ba(this.node(),d).tween,g=0,b=f.length;g<b;++g)if((h=f[g]).name===s)return h.value;return null}return this.each((l==null?Tp:Ap)(d,s,l))},delay:function(s){var l=this._id;return arguments.length?this.each((typeof s=="function"?zd:$p)(l,s)):Ba(this.node(),l).delay},duration:function(s){var l=this._id;return arguments.length?this.each((typeof s=="function"?Fd:Hd)(l,s)):Ba(this.node(),l).duration},ease:function(s){var l=this._id;return arguments.length?this.each(Dp(l,s)):Ba(this.node(),l).ease},easeVarying:function(s){if(typeof s!="function")throw new Error;return this.each(function(l,d){return function(){var h=d.apply(this,arguments);if(typeof h!="function")throw new Error;bs(this,l).ease=h}}(this._id,s))},end:function(){var s,l,d=this,h=d._id,f=d.size();return new Promise(function(g,b){var y={value:b},T={value:function(){--f==0&&g()}};d.each(function(){var k=bs(this,h),D=k.on;D!==s&&((l=(s=D).copy())._.cancel.push(y),l._.interrupt.push(y),l._.end.push(T)),k.on=l}),f===0&&g()})},[Symbol.iterator]:hr[Symbol.iterator]};function Wd(s){return((s*=2)<=1?s*s:--s*(2-s)+1)/2}function Fl(s){return((s*=2)<=1?s*s*s:(s-=2)*s*s+2)/2}var Hl=function s(l){function d(h){return Math.pow(h,l)}return l=+l,d.exponent=s,d}(3),Ip=function s(l){function d(h){return 1-Math.pow(1-h,l)}return l=+l,d.exponent=s,d}(3),Nc=function s(l){function d(h){return((h*=2)<=1?Math.pow(h,l):2-Math.pow(2-h,l))/2}return l=+l,d.exponent=s,d}(3),vo=Math.PI,Ud=vo/2;function _c(s){return(1-Math.cos(vo*s))/2}function Hs(s){return 1.0009775171065494*(Math.pow(2,-10*s)-.0009765625)}function eh(s){return((s*=2)<=1?Hs(1-s):2-Hs(s-1))/2}function Gd(s){return((s*=2)<=1?1-Math.sqrt(1-s*s):Math.sqrt(1-(s-=2)*s)+1)/2}var Yd=4/11,zc=7.5625;function bo(s){return(s=+s)<Yd?zc*s*s:s<.7272727272727273?zc*(s-=.5454545454545454)*s+.75:s<.9090909090909091?zc*(s-=.8181818181818182)*s+.9375:zc*(s-=.9545454545454546)*s+.984375}var yo=1.70158,th=function s(l){function d(h){return(h=+h)*h*(l*(h-1)+h)}return l=+l,d.overshoot=s,d}(yo),nh=function s(l){function d(h){return--h*h*((h+1)*l+h)+1}return l=+l,d.overshoot=s,d}(yo),Fc=function s(l){function d(h){return((h*=2)<1?h*h*((l+1)*h-l):(h-=2)*h*((l+1)*h+l)+2)/2}return l=+l,d.overshoot=s,d}(yo),wo=2*Math.PI,ih=function s(l,d){var h=Math.asin(1/(l=Math.max(1,l)))*(d/=wo);function f(g){return l*Hs(- --g)*Math.sin((h-g)/d)}return f.amplitude=function(g){return s(g,d*wo)},f.period=function(g){return s(l,g)},f}(1,.3),Hc=function s(l,d){var h=Math.asin(1/(l=Math.max(1,l)))*(d/=wo);function f(g){return 1-l*Hs(g=+g)*Math.sin((g+h)/d)}return f.amplitude=function(g){return s(g,d*wo)},f.period=function(g){return s(l,g)},f}(1,.3),Mp=function s(l,d){var h=Math.asin(1/(l=Math.max(1,l)))*(d/=wo);function f(g){return((g=2*g-1)<0?l*Hs(-g)*Math.sin((h-g)/d):2-l*Hs(g)*Math.sin((h+g)/d))/2}return f.amplitude=function(g){return s(g,d*wo)},f.period=function(g){return s(l,g)},f}(1,.3),Kd={time:null,delay:0,duration:250,ease:Fl};function qc(s,l){for(var d;!(d=s.__transition)||!(d=d[l]);)if(!(s=s.parentNode))throw new Error(`transition ${l} not found`);return d}or.prototype.interrupt=function(s){return this.each(function(){Ui(this,s)})},or.prototype.transition=function(s){var l,d;s instanceof Fs?(l=s._id,s=s._name):(l=ci(),(d=Kd).time=rl(),s=s==null?null:s+"");for(var h=this._groups,f=h.length,g=0;g<f;++g)for(var b,y=h[g],T=y.length,k=0;k<T;++k)(b=y[k])&&go(b,s,l,k,y,d||qc(b,l));return new Fs(h,this._parents,s,l)};var xo=[null],Vc=s=>()=>s;function Xd(s,{sourceEvent:l,target:d,selection:h,mode:f,dispatch:g}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},selection:{value:h,enumerable:!0,configurable:!0},mode:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}function Lp(s){s.stopImmediatePropagation()}function ql(s){s.preventDefault(),s.stopImmediatePropagation()}var Co={name:"drag"},jc={name:"space"},Br={name:"handle"},Or={name:"center"};const{abs:Wc,max:Gi,min:Yi}=Math;function ah(s){return[+s[0],+s[1]]}function Vl(s){return[ah(s[0]),ah(s[1])]}var ll={name:"x",handles:["w","e"].map(Wl),input:function(s,l){return s==null?null:[[+s[0],l[0][1]],[+s[1],l[1][1]]]},output:function(s){return s&&[s[0][0],s[1][0]]}},jl={name:"y",handles:["n","s"].map(Wl),input:function(s,l){return s==null?null:[[l[0][0],+s[0]],[l[1][0],+s[1]]]},output:function(s){return s&&[s[0][1],s[1][1]]}},sh={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Wl),input:function(s){return s==null?null:Vl(s)},output:function(s){return s}},es={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},rh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Uc={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Qd={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},oh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Wl(s){return{type:s}}function Jd(s){return!s.ctrlKey&&!s.button}function lh(){var s=this.ownerSVGElement||this;return s.hasAttribute("viewBox")?[[(s=s.viewBox.baseVal).x,s.y],[s.x+s.width,s.y+s.height]]:[[0,0],[s.width.baseVal.value,s.height.baseVal.value]]}function Pp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ul(s){for(;!s.__brush;)if(!(s=s.parentNode))return;return s.__brush}function Zd(s){return s[0][0]===s[1][0]||s[0][1]===s[1][1]}function Gc(s){var l,d=lh,h=Jd,f=Pp,g=!0,b=Bs("start","brush","end"),y=6;function T(W){var X=W.property("__brush",j).selectAll(".overlay").data([Wl("overlay")]);X.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",es.overlay).merge(X).each(function(){var Z=Ul(this).extent;x(this).attr("x",Z[0][0]).attr("y",Z[0][1]).attr("width",Z[1][0]-Z[0][0]).attr("height",Z[1][1]-Z[0][1])}),W.selectAll(".selection").data([Wl("selection")]).enter().append("rect").attr("class","selection").attr("cursor",es.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ee=W.selectAll(".handle").data(s.handles,function(Z){return Z.type});ee.exit().remove(),ee.enter().append("rect").attr("class",function(Z){return"handle handle--"+Z.type}).attr("cursor",function(Z){return es[Z.type]}),W.each(k).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",P).filter(f).on("touchstart.brush",P).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",Y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function k(){var W=x(this),X=Ul(this).selection;X?(W.selectAll(".selection").style("display",null).attr("x",X[0][0]).attr("y",X[0][1]).attr("width",X[1][0]-X[0][0]).attr("height",X[1][1]-X[0][1]),W.selectAll(".handle").style("display",null).attr("x",function(ee){return ee.type[ee.type.length-1]==="e"?X[1][0]-y/2:X[0][0]-y/2}).attr("y",function(ee){return ee.type[0]==="s"?X[1][1]-y/2:X[0][1]-y/2}).attr("width",function(ee){return ee.type==="n"||ee.type==="s"?X[1][0]-X[0][0]+y:y}).attr("height",function(ee){return ee.type==="e"||ee.type==="w"?X[1][1]-X[0][1]+y:y})):W.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function D(W,X,ee){var Z=W.__brush.emitter;return!Z||ee&&Z.clean?new O(W,X,ee):Z}function O(W,X,ee){this.that=W,this.args=X,this.state=W.__brush,this.active=0,this.clean=ee}function P(W){if((!l||W.touches)&&h.apply(this,arguments)){var X,ee,Z,K,re,oe,Ce,Ie,Te,pe,ge,we=this,le=W.target.__data__.type,fe=(g&&W.metaKey?le="overlay":le)==="selection"?Co:g&&W.altKey?Or:Br,xe=s===jl?null:Qd[le],$e=s===ll?null:oh[le],Re=Ul(we),Ye=Re.extent,st=Re.selection,ht=Ye[0][0],Ze=Ye[0][1],zt=Ye[1][0],Rt=Ye[1][1],Tt=0,Bt=0,Nn=xe&&$e&&g&&W.shiftKey,mn=Array.from(W.touches||[W],bn=>{const Qi=bn.identifier;return(bn=ne(bn,we)).point0=bn.slice(),bn.identifier=Qi,bn});Ui(we);var Ha=D(we,arguments,!0).beforestart();if(le==="overlay"){st&&(Te=!0);const bn=[mn[0],mn[1]||mn[0]];Re.selection=st=[[X=s===jl?ht:Yi(bn[0][0],bn[1][0]),Z=s===ll?Ze:Yi(bn[0][1],bn[1][1])],[re=s===jl?zt:Gi(bn[0][0],bn[1][0]),Ce=s===ll?Rt:Gi(bn[0][1],bn[1][1])]],mn.length>1&&lc(W)}else X=st[0][0],Z=st[0][1],re=st[1][0],Ce=st[1][1];ee=X,K=Z,oe=re,Ie=Ce;var Po=x(we).attr("pointer-events","none"),mr=Po.selectAll(".overlay").attr("cursor",es[le]);if(W.touches)Ha.moved=t0,Ha.ended=n0;else{var Bo=x(W.view).on("mousemove.brush",t0,!0).on("mouseup.brush",n0,!0);g&&Bo.on("keydown.brush",Cx,!0).on("keyup.brush",kx,!0),Oe(W.view)}k.call(we),Ha.start(W,fe.name)}function t0(bn){for(const Qi of bn.changedTouches||[bn])for(const Vu of mn)Vu.identifier===Qi.identifier&&(Vu.cur=ne(Qi,we));if(Nn&&!pe&&!ge&&mn.length===1){const Qi=mn[0];Wc(Qi.cur[0]-Qi[0])>Wc(Qi.cur[1]-Qi[1])?ge=!0:pe=!0}for(const Qi of mn)Qi.cur&&(Qi[0]=Qi.cur[0],Qi[1]=Qi.cur[1]);Te=!0,ql(bn),lc(bn)}function lc(bn){const Qi=mn[0],Vu=Qi.point0;var wl;switch(Tt=Qi[0]-Vu[0],Bt=Qi[1]-Vu[1],fe){case jc:case Co:xe&&(Tt=Gi(ht-X,Yi(zt-re,Tt)),ee=X+Tt,oe=re+Tt),$e&&(Bt=Gi(Ze-Z,Yi(Rt-Ce,Bt)),K=Z+Bt,Ie=Ce+Bt);break;case Br:mn[1]?(xe&&(ee=Gi(ht,Yi(zt,mn[0][0])),oe=Gi(ht,Yi(zt,mn[1][0])),xe=1),$e&&(K=Gi(Ze,Yi(Rt,mn[0][1])),Ie=Gi(Ze,Yi(Rt,mn[1][1])),$e=1)):(xe<0?(Tt=Gi(ht-X,Yi(zt-X,Tt)),ee=X+Tt,oe=re):xe>0&&(Tt=Gi(ht-re,Yi(zt-re,Tt)),ee=X,oe=re+Tt),$e<0?(Bt=Gi(Ze-Z,Yi(Rt-Z,Bt)),K=Z+Bt,Ie=Ce):$e>0&&(Bt=Gi(Ze-Ce,Yi(Rt-Ce,Bt)),K=Z,Ie=Ce+Bt));break;case Or:xe&&(ee=Gi(ht,Yi(zt,X-Tt*xe)),oe=Gi(ht,Yi(zt,re+Tt*xe))),$e&&(K=Gi(Ze,Yi(Rt,Z-Bt*$e)),Ie=Gi(Ze,Yi(Rt,Ce+Bt*$e)))}oe<ee&&(xe*=-1,wl=X,X=re,re=wl,wl=ee,ee=oe,oe=wl,le in rh&&mr.attr("cursor",es[le=rh[le]])),Ie<K&&($e*=-1,wl=Z,Z=Ce,Ce=wl,wl=K,K=Ie,Ie=wl,le in Uc&&mr.attr("cursor",es[le=Uc[le]])),Re.selection&&(st=Re.selection),pe&&(ee=st[0][0],oe=st[1][0]),ge&&(K=st[0][1],Ie=st[1][1]),st[0][0]===ee&&st[0][1]===K&&st[1][0]===oe&&st[1][1]===Ie||(Re.selection=[[ee,K],[oe,Ie]],k.call(we),Ha.brush(bn,fe.name))}function n0(bn){if(Lp(bn),bn.touches){if(bn.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else We(bn.view,Te),Bo.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Po.attr("pointer-events","all"),mr.attr("cursor",es.overlay),Re.selection&&(st=Re.selection),Zd(st)&&(Re.selection=null,k.call(we)),Ha.end(bn,fe.name)}function Cx(bn){switch(bn.keyCode){case 16:Nn=xe&&$e;break;case 18:fe===Br&&(xe&&(re=oe-Tt*xe,X=ee+Tt*xe),$e&&(Ce=Ie-Bt*$e,Z=K+Bt*$e),fe=Or,lc(bn));break;case 32:fe!==Br&&fe!==Or||(xe<0?re=oe-Tt:xe>0&&(X=ee-Tt),$e<0?Ce=Ie-Bt:$e>0&&(Z=K-Bt),fe=jc,mr.attr("cursor",es.selection),lc(bn));break;default:return}ql(bn)}function kx(bn){switch(bn.keyCode){case 16:Nn&&(pe=ge=Nn=!1,lc(bn));break;case 18:fe===Or&&(xe<0?re=oe:xe>0&&(X=ee),$e<0?Ce=Ie:$e>0&&(Z=K),fe=Br,lc(bn));break;case 32:fe===jc&&(bn.altKey?(xe&&(re=oe-Tt*xe,X=ee+Tt*xe),$e&&(Ce=Ie-Bt*$e,Z=K+Bt*$e),fe=Or):(xe<0?re=oe:xe>0&&(X=ee),$e<0?Ce=Ie:$e>0&&(Z=K),fe=Br),mr.attr("cursor",es[le]),lc(bn));break;default:return}ql(bn)}}function _(W){D(this,arguments).moved(W)}function Y(W){D(this,arguments).ended(W)}function j(){var W=this.__brush||{selection:null};return W.extent=Vl(d.apply(this,arguments)),W.dim=s,W}return T.move=function(W,X,ee){W.tween?W.on("start.brush",function(Z){D(this,arguments).beforestart().start(Z)}).on("interrupt.brush end.brush",function(Z){D(this,arguments).end(Z)}).tween("brush",function(){var Z=this,K=Z.__brush,re=D(Z,arguments),oe=K.selection,Ce=s.input(typeof X=="function"?X.apply(this,arguments):X,K.extent),Ie=Pa(oe,Ce);function Te(pe){K.selection=pe===1&&Ce===null?null:Ie(pe),k.call(Z),re.brush()}return oe!==null&&Ce!==null?Te:Te(1)}):W.each(function(){var Z=this,K=arguments,re=Z.__brush,oe=s.input(typeof X=="function"?X.apply(Z,K):X,re.extent),Ce=D(Z,K).beforestart();Ui(Z),re.selection=oe===null?null:oe,k.call(Z),Ce.start(ee).brush(ee).end(ee)})},T.clear=function(W,X){T.move(W,null,X)},O.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(W,X){return this.starting?(this.starting=!1,this.emit("start",W,X)):this.emit("brush",W),this},brush:function(W,X){return this.emit("brush",W,X),this},end:function(W,X){return--this.active==0&&(delete this.state.emitter,this.emit("end",W,X)),this},emit:function(W,X,ee){var Z=x(this.that).datum();b.call(W,this.that,new Xd(W,{sourceEvent:X,target:T,selection:s.output(this.state.selection),mode:ee,dispatch:b}),Z)}},T.extent=function(W){return arguments.length?(d=typeof W=="function"?W:Vc(Vl(W)),T):d},T.filter=function(W){return arguments.length?(h=typeof W=="function"?W:Vc(!!W),T):h},T.touchable=function(W){return arguments.length?(f=typeof W=="function"?W:Vc(!!W),T):f},T.handleSize=function(W){return arguments.length?(y=+W,T):y},T.keyModifiers=function(W){return arguments.length?(g=!!W,T):g},T.on=function(){var W=b.on.apply(b,arguments);return W===b?T:W},T}var Yc=Math.abs,fa=Math.cos,ko=Math.sin,Kc=Math.PI,Gl=Kc/2,ys=2*Kc,ch=Math.max,Yl=1e-12;function ts(s,l){return Array.from({length:l-s},(d,h)=>s+h)}function Bp(s){return function(l,d){return s(l.source.value+l.target.value,d.source.value+d.target.value)}}function Kl(s,l){var d=0,h=null,f=null,g=null;function b(y){var T,k=y.length,D=new Array(k),O=ts(0,k),P=new Array(k*k),_=new Array(k),Y=0;y=Float64Array.from({length:k*k},l?(j,W)=>y[W%k][W/k|0]:(j,W)=>y[W/k|0][W%k]);for(let j=0;j<k;++j){let W=0;for(let X=0;X<k;++X)W+=y[j*k+X]+s*y[X*k+j];Y+=D[j]=W}T=(Y=ch(0,ys-d*k)/Y)?d:ys/k;{let j=0;h&&O.sort((W,X)=>h(D[W],D[X]));for(const W of O){const X=j;if(s){const ee=ts(1+~k,k).filter(Z=>Z<0?y[~Z*k+W]:y[W*k+Z]);f&&ee.sort((Z,K)=>f(Z<0?-y[~Z*k+W]:y[W*k+Z],K<0?-y[~K*k+W]:y[W*k+K]));for(const Z of ee)Z<0?(P[~Z*k+W]||(P[~Z*k+W]={source:null,target:null})).target={index:W,startAngle:j,endAngle:j+=y[~Z*k+W]*Y,value:y[~Z*k+W]}:(P[W*k+Z]||(P[W*k+Z]={source:null,target:null})).source={index:W,startAngle:j,endAngle:j+=y[W*k+Z]*Y,value:y[W*k+Z]};_[W]={index:W,startAngle:X,endAngle:j,value:D[W]}}else{const ee=ts(0,k).filter(Z=>y[W*k+Z]||y[Z*k+W]);f&&ee.sort((Z,K)=>f(y[W*k+Z],y[W*k+K]));for(const Z of ee){let K;if(W<Z?(K=P[W*k+Z]||(P[W*k+Z]={source:null,target:null}),K.source={index:W,startAngle:j,endAngle:j+=y[W*k+Z]*Y,value:y[W*k+Z]}):(K=P[Z*k+W]||(P[Z*k+W]={source:null,target:null}),K.target={index:W,startAngle:j,endAngle:j+=y[W*k+Z]*Y,value:y[W*k+Z]},W===Z&&(K.source=K.target)),K.source&&K.target&&K.source.value<K.target.value){const re=K.source;K.source=K.target,K.target=re}}_[W]={index:W,startAngle:X,endAngle:j,value:D[W]}}j+=T}}return(P=Object.values(P)).groups=_,g?P.sort(g):P}return b.padAngle=function(y){return arguments.length?(d=ch(0,y),b):d},b.sortGroups=function(y){return arguments.length?(h=y,b):h},b.sortSubgroups=function(y){return arguments.length?(f=y,b):f},b.sortChords=function(y){return arguments.length?(y==null?g=null:(g=Bp(y))._=y,b):g&&g._},b}const Rr=Math.PI,Xc=2*Rr,Sn=1e-6,ga=Xc-Sn;function eu(s){this._+=s[0];for(let l=1,d=s.length;l<d;++l)this._+=arguments[l]+s[l]}let cl=class{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?eu:function(l){let d=Math.floor(l);if(!(d>=0))throw new Error(`invalid digits: ${l}`);if(d>15)return eu;const h=10**d;return function(f){this._+=f[0];for(let g=1,b=f.length;g<b;++g)this._+=Math.round(arguments[g]*h)/h+f[g]}}(s)}moveTo(s,l){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,l){this._append`L${this._x1=+s},${this._y1=+l}`}quadraticCurveTo(s,l,d,h){this._append`Q${+s},${+l},${this._x1=+d},${this._y1=+h}`}bezierCurveTo(s,l,d,h,f,g){this._append`C${+s},${+l},${+d},${+h},${this._x1=+f},${this._y1=+g}`}arcTo(s,l,d,h,f){if(s=+s,l=+l,d=+d,h=+h,(f=+f)<0)throw new Error(`negative radius: ${f}`);let g=this._x1,b=this._y1,y=d-s,T=h-l,k=g-s,D=b-l,O=k*k+D*D;if(this._x1===null)this._append`M${this._x1=s},${this._y1=l}`;else if(O>Sn)if(Math.abs(D*y-T*k)>Sn&&f){let P=d-g,_=h-b,Y=y*y+T*T,j=P*P+_*_,W=Math.sqrt(Y),X=Math.sqrt(O),ee=f*Math.tan((Rr-Math.acos((Y+O-j)/(2*W*X)))/2),Z=ee/X,K=ee/W;Math.abs(Z-1)>Sn&&this._append`L${s+Z*k},${l+Z*D}`,this._append`A${f},${f},0,0,${+(D*P>k*_)},${this._x1=s+K*y},${this._y1=l+K*T}`}else this._append`L${this._x1=s},${this._y1=l}`}arc(s,l,d,h,f,g){if(s=+s,l=+l,g=!!g,(d=+d)<0)throw new Error(`negative radius: ${d}`);let b=d*Math.cos(h),y=d*Math.sin(h),T=s+b,k=l+y,D=1^g,O=g?h-f:f-h;this._x1===null?this._append`M${T},${k}`:(Math.abs(this._x1-T)>Sn||Math.abs(this._y1-k)>Sn)&&this._append`L${T},${k}`,d&&(O<0&&(O=O%Xc+Xc),O>ga?this._append`A${d},${d},0,1,${D},${s-b},${l-y}A${d},${d},0,1,${D},${this._x1=T},${this._y1=k}`:O>Sn&&this._append`A${d},${d},0,${+(O>=Rr)},${D},${this._x1=s+d*Math.cos(f)},${this._y1=l+d*Math.sin(f)}`)}rect(s,l,d,h){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+l}h${d=+d}v${+h}h${-d}Z`}toString(){return this._}};function Qc(){return new cl}Qc.prototype=cl.prototype;var Jc=Array.prototype.slice;function mi(s){return function(){return s}}function Op(s){return s.source}function tu(s){return s.target}function Zc(s){return s.radius}function dh(s){return s.startAngle}function Rp(s){return s.endAngle}function nu(){return 0}function uh(){return 10}function dl(s){var l=Op,d=tu,h=Zc,f=Zc,g=dh,b=Rp,y=nu,T=null;function k(){var D,O=l.apply(this,arguments),P=d.apply(this,arguments),_=y.apply(this,arguments)/2,Y=Jc.call(arguments),j=+h.apply(this,(Y[0]=O,Y)),W=g.apply(this,Y)-Gl,X=b.apply(this,Y)-Gl,ee=+f.apply(this,(Y[0]=P,Y)),Z=g.apply(this,Y)-Gl,K=b.apply(this,Y)-Gl;if(T||(T=D=Qc()),_>Yl&&(Yc(X-W)>2*_+Yl?X>W?(W+=_,X-=_):(W-=_,X+=_):W=X=(W+X)/2,Yc(K-Z)>2*_+Yl?K>Z?(Z+=_,K-=_):(Z-=_,K+=_):Z=K=(Z+K)/2),T.moveTo(j*fa(W),j*ko(W)),T.arc(0,0,j,W,X),W!==Z||X!==K)if(s){var re=+s.apply(this,arguments),oe=ee-re,Ce=(Z+K)/2;T.quadraticCurveTo(0,0,oe*fa(Z),oe*ko(Z)),T.lineTo(ee*fa(Ce),ee*ko(Ce)),T.lineTo(oe*fa(K),oe*ko(K))}else T.quadraticCurveTo(0,0,ee*fa(Z),ee*ko(Z)),T.arc(0,0,ee,Z,K);if(T.quadraticCurveTo(0,0,j*fa(W),j*ko(W)),T.closePath(),D)return T=null,D+""||null}return s&&(k.headRadius=function(D){return arguments.length?(s=typeof D=="function"?D:mi(+D),k):s}),k.radius=function(D){return arguments.length?(h=f=typeof D=="function"?D:mi(+D),k):h},k.sourceRadius=function(D){return arguments.length?(h=typeof D=="function"?D:mi(+D),k):h},k.targetRadius=function(D){return arguments.length?(f=typeof D=="function"?D:mi(+D),k):f},k.startAngle=function(D){return arguments.length?(g=typeof D=="function"?D:mi(+D),k):g},k.endAngle=function(D){return arguments.length?(b=typeof D=="function"?D:mi(+D),k):b},k.padAngle=function(D){return arguments.length?(y=typeof D=="function"?D:mi(+D),k):y},k.source=function(D){return arguments.length?(l=D,k):l},k.target=function(D){return arguments.length?(d=D,k):d},k.context=function(D){return arguments.length?(T=D??null,k):T},k}var Oa=Array.prototype.slice;function hh(s,l){return s-l}var qs=s=>()=>s;function To(s,l){for(var d,h=-1,f=l.length;++h<f;)if(d=Np(s,l[h]))return d;return 0}function Np(s,l){for(var d=l[0],h=l[1],f=-1,g=0,b=s.length,y=b-1;g<b;y=g++){var T=s[g],k=T[0],D=T[1],O=s[y],P=O[0],_=O[1];if(ph(T,O,l))return 0;D>h!=_>h&&d<(P-k)*(h-D)/(_-D)+k&&(f=-f)}return f}function ph(s,l,d){var h,f,g,b;return function(y,T,k){return(T[0]-y[0])*(k[1]-y[1])==(k[0]-y[0])*(T[1]-y[1])}(s,l,d)&&(f=s[h=+(s[0]===l[0])],g=d[h],b=l[h],f<=g&&g<=b||b<=g&&g<=f)}function iu(){}var Zn=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function au(){var s=1,l=1,d=Qr,h=y;function f(T){var k=d(T);if(Array.isArray(k))k=k.slice().sort(hh);else{const D=Ea(T,su);for(k=Gt(...Xr(D[0],D[1],k),k);k[k.length-1]>=D[1];)k.pop();for(;k[1]<D[0];)k.shift()}return k.map(D=>g(T,D))}function g(T,k){const D=k==null?NaN:+k;if(isNaN(D))throw new Error(`invalid value: ${k}`);var O=[],P=[];return function(_,Y,j){var W,X,ee,Z,K,re,oe=new Array,Ce=new Array;for(W=X=-1,Z=pr(_[0],Y),Zn[Z<<1].forEach(Ie);++W<s-1;)ee=Z,Z=pr(_[W+1],Y),Zn[ee|Z<<1].forEach(Ie);for(Zn[Z<<0].forEach(Ie);++X<l-1;){for(W=-1,Z=pr(_[X*s+s],Y),K=pr(_[X*s],Y),Zn[Z<<1|K<<2].forEach(Ie);++W<s-1;)ee=Z,Z=pr(_[X*s+s+W+1],Y),re=K,K=pr(_[X*s+W+1],Y),Zn[ee|Z<<1|K<<2|re<<3].forEach(Ie);Zn[Z|K<<3].forEach(Ie)}for(W=-1,K=_[X*s]>=Y,Zn[K<<2].forEach(Ie);++W<s-1;)re=K,K=pr(_[X*s+W+1],Y),Zn[K<<2|re<<3].forEach(Ie);function Ie(Te){var pe,ge,we=[Te[0][0]+W,Te[0][1]+X],le=[Te[1][0]+W,Te[1][1]+X],fe=b(we),xe=b(le);(pe=Ce[fe])?(ge=oe[xe])?(delete Ce[pe.end],delete oe[ge.start],pe===ge?(pe.ring.push(le),j(pe.ring)):oe[pe.start]=Ce[ge.end]={start:pe.start,end:ge.end,ring:pe.ring.concat(ge.ring)}):(delete Ce[pe.end],pe.ring.push(le),Ce[pe.end=xe]=pe):(pe=oe[xe])?(ge=Ce[fe])?(delete oe[pe.start],delete Ce[ge.end],pe===ge?(pe.ring.push(le),j(pe.ring)):oe[ge.start]=Ce[pe.end]={start:ge.start,end:pe.end,ring:ge.ring.concat(pe.ring)}):(delete oe[pe.start],pe.ring.unshift(we),oe[pe.start=fe]=pe):oe[fe]=Ce[xe]={start:fe,end:xe,ring:[we,le]}}Zn[K<<3].forEach(Ie)}(T,D,function(_){h(_,T,D),function(Y){for(var j=0,W=Y.length,X=Y[W-1][1]*Y[0][0]-Y[W-1][0]*Y[0][1];++j<W;)X+=Y[j-1][1]*Y[j][0]-Y[j-1][0]*Y[j][1];return X}(_)>0?O.push([_]):P.push(_)}),P.forEach(function(_){for(var Y,j=0,W=O.length;j<W;++j)if(To((Y=O[j])[0],_)!==-1)return void Y.push(_)}),{type:"MultiPolygon",value:k,coordinates:O}}function b(T){return 2*T[0]+T[1]*(s+1)*4}function y(T,k,D){T.forEach(function(O){var P=O[0],_=O[1],Y=0|P,j=0|_,W=ru(k[j*s+Y]);P>0&&P<s&&Y===P&&(O[0]=Xl(P,ru(k[j*s+Y-1]),W,D)),_>0&&_<l&&j===_&&(O[1]=Xl(_,ru(k[(j-1)*s+Y]),W,D))})}return f.contour=g,f.size=function(T){if(!arguments.length)return[s,l];var k=Math.floor(T[0]),D=Math.floor(T[1]);if(!(k>=0&&D>=0))throw new Error("invalid size");return s=k,l=D,f},f.thresholds=function(T){return arguments.length?(d=typeof T=="function"?T:Array.isArray(T)?qs(Oa.call(T)):qs(T),f):d},f.smooth=function(T){return arguments.length?(h=T?y:iu,f):h===y},f}function su(s){return isFinite(s)?s:NaN}function pr(s,l){return s!=null&&+s>=l}function ru(s){return s==null||isNaN(s=+s)?-1/0:s}function Xl(s,l,d,h){const f=h-l,g=d-l,b=isFinite(f)||isFinite(g)?f/g:Math.sign(f)/Math.sign(g);return isNaN(b)?s:s+b-.5}function ou(s){return s[0]}function ns(s){return s[1]}function _p(){return 1}const sa=134217729;function ed(s,l,d,h,f){let g,b,y,T,k=l[0],D=h[0],O=0,P=0;D>k==D>-k?(g=k,k=l[++O]):(g=D,D=h[++P]);let _=0;if(O<s&&P<d)for(D>k==D>-k?(b=k+g,y=g-(b-k),k=l[++O]):(b=D+g,y=g-(b-D),D=h[++P]),g=b,y!==0&&(f[_++]=y);O<s&&P<d;)D>k==D>-k?(b=g+k,T=b-g,y=g-(b-T)+(k-T),k=l[++O]):(b=g+D,T=b-g,y=g-(b-T)+(D-T),D=h[++P]),g=b,y!==0&&(f[_++]=y);for(;O<s;)b=g+k,T=b-g,y=g-(b-T)+(k-T),k=l[++O],g=b,y!==0&&(f[_++]=y);for(;P<d;)b=g+D,T=b-g,y=g-(b-T)+(D-T),D=h[++P],g=b,y!==0&&(f[_++]=y);return g===0&&_!==0||(f[_++]=g),_}function Ao(s){return new Float64Array(s)}const Nr=Ao(4),lu=Ao(8),td=Ao(12),fh=Ao(16),Ki=Ao(4);function ws(s,l,d,h,f,g){const b=(l-g)*(d-f),y=(s-f)*(h-g),T=b-y;if(b===0||y===0||b>0!=y>0)return T;const k=Math.abs(b+y);return Math.abs(T)>=33306690738754716e-32*k?T:-function(D,O,P,_,Y,j,W){let X,ee,Z,K,re,oe,Ce,Ie,Te,pe,ge,we,le,fe,xe,$e,Re,Ye;const st=D-Y,ht=P-Y,Ze=O-j,zt=_-j;fe=st*zt,oe=sa*st,Ce=oe-(oe-st),Ie=st-Ce,oe=sa*zt,Te=oe-(oe-zt),pe=zt-Te,xe=Ie*pe-(fe-Ce*Te-Ie*Te-Ce*pe),$e=Ze*ht,oe=sa*Ze,Ce=oe-(oe-Ze),Ie=Ze-Ce,oe=sa*ht,Te=oe-(oe-ht),pe=ht-Te,Re=Ie*pe-($e-Ce*Te-Ie*Te-Ce*pe),ge=xe-Re,re=xe-ge,Nr[0]=xe-(ge+re)+(re-Re),we=fe+ge,re=we-fe,le=fe-(we-re)+(ge-re),ge=le-$e,re=le-ge,Nr[1]=le-(ge+re)+(re-$e),Ye=we+ge,re=Ye-we,Nr[2]=we-(Ye-re)+(ge-re),Nr[3]=Ye;let Rt=function(Ha,Po){let mr=Po[0];for(let Bo=1;Bo<Ha;Bo++)mr+=Po[Bo];return mr}(4,Nr),Tt=22204460492503146e-32*W;if(Rt>=Tt||-Rt>=Tt||(re=D-st,X=D-(st+re)+(re-Y),re=P-ht,Z=P-(ht+re)+(re-Y),re=O-Ze,ee=O-(Ze+re)+(re-j),re=_-zt,K=_-(zt+re)+(re-j),X===0&&ee===0&&Z===0&&K===0)||(Tt=11093356479670487e-47*W+33306690738754706e-32*Math.abs(Rt),Rt+=st*K+zt*X-(Ze*Z+ht*ee),Rt>=Tt||-Rt>=Tt))return Rt;fe=X*zt,oe=sa*X,Ce=oe-(oe-X),Ie=X-Ce,oe=sa*zt,Te=oe-(oe-zt),pe=zt-Te,xe=Ie*pe-(fe-Ce*Te-Ie*Te-Ce*pe),$e=ee*ht,oe=sa*ee,Ce=oe-(oe-ee),Ie=ee-Ce,oe=sa*ht,Te=oe-(oe-ht),pe=ht-Te,Re=Ie*pe-($e-Ce*Te-Ie*Te-Ce*pe),ge=xe-Re,re=xe-ge,Ki[0]=xe-(ge+re)+(re-Re),we=fe+ge,re=we-fe,le=fe-(we-re)+(ge-re),ge=le-$e,re=le-ge,Ki[1]=le-(ge+re)+(re-$e),Ye=we+ge,re=Ye-we,Ki[2]=we-(Ye-re)+(ge-re),Ki[3]=Ye;const Bt=ed(4,Nr,4,Ki,lu);fe=st*K,oe=sa*st,Ce=oe-(oe-st),Ie=st-Ce,oe=sa*K,Te=oe-(oe-K),pe=K-Te,xe=Ie*pe-(fe-Ce*Te-Ie*Te-Ce*pe),$e=Ze*Z,oe=sa*Ze,Ce=oe-(oe-Ze),Ie=Ze-Ce,oe=sa*Z,Te=oe-(oe-Z),pe=Z-Te,Re=Ie*pe-($e-Ce*Te-Ie*Te-Ce*pe),ge=xe-Re,re=xe-ge,Ki[0]=xe-(ge+re)+(re-Re),we=fe+ge,re=we-fe,le=fe-(we-re)+(ge-re),ge=le-$e,re=le-ge,Ki[1]=le-(ge+re)+(re-$e),Ye=we+ge,re=Ye-we,Ki[2]=we-(Ye-re)+(ge-re),Ki[3]=Ye;const Nn=ed(Bt,lu,4,Ki,td);fe=X*K,oe=sa*X,Ce=oe-(oe-X),Ie=X-Ce,oe=sa*K,Te=oe-(oe-K),pe=K-Te,xe=Ie*pe-(fe-Ce*Te-Ie*Te-Ce*pe),$e=ee*Z,oe=sa*ee,Ce=oe-(oe-ee),Ie=ee-Ce,oe=sa*Z,Te=oe-(oe-Z),pe=Z-Te,Re=Ie*pe-($e-Ce*Te-Ie*Te-Ce*pe),ge=xe-Re,re=xe-ge,Ki[0]=xe-(ge+re)+(re-Re),we=fe+ge,re=we-fe,le=fe-(we-re)+(ge-re),ge=le-$e,re=le-ge,Ki[1]=le-(ge+re)+(re-$e),Ye=we+ge,re=Ye-we,Ki[2]=we-(Ye-re)+(ge-re),Ki[3]=Ye;const mn=ed(Nn,td,4,Ki,fh);return fh[mn-1]}(s,l,d,h,f,g,k)}const vi=Math.pow(2,-52),Ql=new Uint32Array(512);class nd{static from(l,d=Fp,h=e){const f=l.length,g=new Float64Array(2*f);for(let b=0;b<f;b++){const y=l[b];g[2*b]=d(y),g[2*b+1]=h(y)}return new nd(g)}constructor(l){const d=l.length>>1;if(d>0&&typeof l[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=l;const h=Math.max(2*d-5,0);this._triangles=new Uint32Array(3*h),this._halfedges=new Int32Array(3*h),this._hashSize=Math.ceil(Math.sqrt(d)),this._hullPrev=new Uint32Array(d),this._hullNext=new Uint32Array(d),this._hullTri=new Uint32Array(d),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(d),this._dists=new Float64Array(d),this.update()}update(){const{coords:l,_hullPrev:d,_hullNext:h,_hullTri:f,_hullHash:g}=this,b=l.length>>1;let y=1/0,T=1/0,k=-1/0,D=-1/0;for(let pe=0;pe<b;pe++){const ge=l[2*pe],we=l[2*pe+1];ge<y&&(y=ge),we<T&&(T=we),ge>k&&(k=ge),we>D&&(D=we),this._ids[pe]=pe}const O=(y+k)/2,P=(T+D)/2;let _,Y,j,W=1/0;for(let pe=0;pe<b;pe++){const ge=Jl(O,P,l[2*pe],l[2*pe+1]);ge<W&&(_=pe,W=ge)}const X=l[2*_],ee=l[2*_+1];W=1/0;for(let pe=0;pe<b;pe++){if(pe===_)continue;const ge=Jl(X,ee,l[2*pe],l[2*pe+1]);ge<W&&ge>0&&(Y=pe,W=ge)}let Z=l[2*Y],K=l[2*Y+1],re=1/0;for(let pe=0;pe<b;pe++){if(pe===_||pe===Y)continue;const ge=zp(X,ee,Z,K,l[2*pe],l[2*pe+1]);ge<re&&(j=pe,re=ge)}let oe=l[2*j],Ce=l[2*j+1];if(re===1/0){for(let we=0;we<b;we++)this._dists[we]=l[2*we]-l[0]||l[2*we+1]-l[1];So(this._ids,this._dists,0,b-1);const pe=new Uint32Array(b);let ge=0;for(let we=0,le=-1/0;we<b;we++){const fe=this._ids[we];this._dists[fe]>le&&(pe[ge++]=fe,le=this._dists[fe])}return this.hull=pe.subarray(0,ge),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ws(X,ee,Z,K,oe,Ce)<0){const pe=Y,ge=Z,we=K;Y=j,Z=oe,K=Ce,j=pe,oe=ge,Ce=we}const Ie=function(pe,ge,we,le,fe,xe){const $e=we-pe,Re=le-ge,Ye=fe-pe,st=xe-ge,ht=$e*$e+Re*Re,Ze=Ye*Ye+st*st,zt=.5/($e*st-Re*Ye),Rt=pe+(st*ht-Re*Ze)*zt,Tt=ge+($e*Ze-Ye*ht)*zt;return{x:Rt,y:Tt}}(X,ee,Z,K,oe,Ce);this._cx=Ie.x,this._cy=Ie.y;for(let pe=0;pe<b;pe++)this._dists[pe]=Jl(l[2*pe],l[2*pe+1],Ie.x,Ie.y);So(this._ids,this._dists,0,b-1),this._hullStart=_;let Te=3;h[_]=d[j]=Y,h[Y]=d[_]=j,h[j]=d[Y]=_,f[_]=0,f[Y]=1,f[j]=2,g.fill(-1),g[this._hashKey(X,ee)]=_,g[this._hashKey(Z,K)]=Y,g[this._hashKey(oe,Ce)]=j,this.trianglesLen=0,this._addTriangle(_,Y,j,-1,-1,-1);for(let pe,ge,we=0;we<this._ids.length;we++){const le=this._ids[we],fe=l[2*le],xe=l[2*le+1];if(we>0&&Math.abs(fe-pe)<=vi&&Math.abs(xe-ge)<=vi||(pe=fe,ge=xe,le===_||le===Y||le===j))continue;let $e=0;for(let Ze=0,zt=this._hashKey(fe,xe);Ze<this._hashSize&&($e=g[(zt+Ze)%this._hashSize],$e===-1||$e===h[$e]);Ze++);$e=d[$e];let Re,Ye=$e;for(;Re=h[Ye],ws(fe,xe,l[2*Ye],l[2*Ye+1],l[2*Re],l[2*Re+1])>=0;)if(Ye=Re,Ye===$e){Ye=-1;break}if(Ye===-1)continue;let st=this._addTriangle(Ye,le,h[Ye],-1,-1,f[Ye]);f[le]=this._legalize(st+2),f[Ye]=st,Te++;let ht=h[Ye];for(;Re=h[ht],ws(fe,xe,l[2*ht],l[2*ht+1],l[2*Re],l[2*Re+1])<0;)st=this._addTriangle(ht,le,Re,f[le],-1,f[ht]),f[le]=this._legalize(st+2),h[ht]=ht,Te--,ht=Re;if(Ye===$e)for(;Re=d[Ye],ws(fe,xe,l[2*Re],l[2*Re+1],l[2*Ye],l[2*Ye+1])<0;)st=this._addTriangle(Re,le,Ye,-1,f[Ye],f[Re]),this._legalize(st+2),f[Re]=st,h[Ye]=Ye,Te--,Ye=Re;this._hullStart=d[le]=Ye,h[Ye]=d[ht]=le,h[le]=ht,g[this._hashKey(fe,xe)]=le,g[this._hashKey(l[2*Ye],l[2*Ye+1])]=Ye}this.hull=new Uint32Array(Te);for(let pe=0,ge=this._hullStart;pe<Te;pe++)this.hull[pe]=ge,ge=h[ge];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(l,d){return Math.floor(function(h,f){const g=h/(Math.abs(h)+Math.abs(f));return(f>0?3-g:1+g)/4}(l-this._cx,d-this._cy)*this._hashSize)%this._hashSize}_legalize(l){const{_triangles:d,_halfedges:h,coords:f}=this;let g=0,b=0;for(;;){const y=h[l],T=l-l%3;if(b=T+(l+2)%3,y===-1){if(g===0)break;l=Ql[--g];continue}const k=y-y%3,D=T+(l+1)%3,O=k+(y+2)%3,P=d[b],_=d[l],Y=d[D],j=d[O];if(Vs(f[2*P],f[2*P+1],f[2*_],f[2*_+1],f[2*Y],f[2*Y+1],f[2*j],f[2*j+1])){d[l]=j,d[y]=P;const W=h[O];if(W===-1){let ee=this._hullStart;do{if(this._hullTri[ee]===O){this._hullTri[ee]=l;break}ee=this._hullPrev[ee]}while(ee!==this._hullStart)}this._link(l,W),this._link(y,h[b]),this._link(b,O);const X=k+(y+1)%3;g<Ql.length&&(Ql[g++]=X)}else{if(g===0)break;l=Ql[--g]}}return b}_link(l,d){this._halfedges[l]=d,d!==-1&&(this._halfedges[d]=l)}_addTriangle(l,d,h,f,g,b){const y=this.trianglesLen;return this._triangles[y]=l,this._triangles[y+1]=d,this._triangles[y+2]=h,this._link(y,f),this._link(y+1,g),this._link(y+2,b),this.trianglesLen+=3,y}}function Jl(s,l,d,h){const f=s-d,g=l-h;return f*f+g*g}function Vs(s,l,d,h,f,g,b,y){const T=s-b,k=l-y,D=d-b,O=h-y,P=f-b,_=g-y,Y=D*D+O*O,j=P*P+_*_;return T*(O*j-Y*_)-k*(D*j-Y*P)+(T*T+k*k)*(D*_-O*P)<0}function zp(s,l,d,h,f,g){const b=d-s,y=h-l,T=f-s,k=g-l,D=b*b+y*y,O=T*T+k*k,P=.5/(b*k-y*T),_=(k*D-y*O)*P,Y=(b*O-T*D)*P;return _*_+Y*Y}function So(s,l,d,h){if(h-d<=20)for(let f=d+1;f<=h;f++){const g=s[f],b=l[g];let y=f-1;for(;y>=d&&l[s[y]]>b;)s[y+1]=s[y--];s[y+1]=g}else{let f=d+1,g=h;Zl(s,d+h>>1,f),l[s[d]]>l[s[h]]&&Zl(s,d,h),l[s[f]]>l[s[h]]&&Zl(s,f,h),l[s[d]]>l[s[f]]&&Zl(s,d,f);const b=s[f],y=l[b];for(;;){do f++;while(l[s[f]]<y);do g--;while(l[s[g]]>y);if(g<f)break;Zl(s,f,g)}s[d+1]=s[g],s[g]=b,h-f+1>=g-d?(So(s,l,f,h),So(s,l,d,g-1)):(So(s,l,d,g-1),So(s,l,f,h))}}function Zl(s,l,d){const h=s[l];s[l]=s[d],s[d]=h}function Fp(s){return s[0]}function e(s){return s[1]}const t=1e-6;class n{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(l,d){this._+=`M${this._x0=this._x1=+l},${this._y0=this._y1=+d}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(l,d){this._+=`L${this._x1=+l},${this._y1=+d}`}arc(l,d,h){const f=(l=+l)+(h=+h),g=d=+d;if(h<0)throw new Error("negative radius");this._x1===null?this._+=`M${f},${g}`:(Math.abs(this._x1-f)>t||Math.abs(this._y1-g)>t)&&(this._+="L"+f+","+g),h&&(this._+=`A${h},${h},0,1,1,${l-h},${d}A${h},${h},0,1,1,${this._x1=f},${this._y1=g}`)}rect(l,d,h,f){this._+=`M${this._x0=this._x1=+l},${this._y0=this._y1=+d}h${+h}v${+f}h${-h}Z`}value(){return this._||null}}class i{constructor(){this._=[]}moveTo(l,d){this._.push([l,d])}closePath(){this._.push(this._[0].slice())}lineTo(l,d){this._.push([l,d])}value(){return this._.length?this._:null}}class a{constructor(l,[d,h,f,g]=[0,0,960,500]){if(!((f=+f)>=(d=+d)&&(g=+g)>=(h=+h)))throw new Error("invalid bounds");this.delaunay=l,this._circumcenters=new Float64Array(2*l.points.length),this.vectors=new Float64Array(2*l.points.length),this.xmax=f,this.xmin=d,this.ymax=g,this.ymin=h,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:l,hull:d,triangles:h},vectors:f}=this,g=this.circumcenters=this._circumcenters.subarray(0,h.length/3*2);for(let _,Y,j=0,W=0,X=h.length;j<X;j+=3,W+=2){const ee=2*h[j],Z=2*h[j+1],K=2*h[j+2],re=l[ee],oe=l[ee+1],Ce=l[Z],Ie=l[Z+1],Te=l[K],pe=l[K+1],ge=Ce-re,we=Ie-oe,le=Te-re,fe=pe-oe,xe=2*(ge*fe-we*le);if(Math.abs(xe)<1e-9){let $e=1e9;const Re=2*h[0];$e*=Math.sign((l[Re]-re)*fe-(l[Re+1]-oe)*le),_=(re+Te)/2-$e*fe,Y=(oe+pe)/2+$e*le}else{const $e=1/xe,Re=ge*ge+we*we,Ye=le*le+fe*fe;_=re+(fe*Re-we*Ye)*$e,Y=oe+(ge*Ye-le*Re)*$e}g[W]=_,g[W+1]=Y}let b,y,T,k=d[d.length-1],D=4*k,O=l[2*k],P=l[2*k+1];f.fill(0);for(let _=0;_<d.length;++_)k=d[_],b=D,y=O,T=P,D=4*k,O=l[2*k],P=l[2*k+1],f[b+2]=f[D]=T-P,f[b+3]=f[D+1]=O-y}render(l){const d=l==null?l=new n:void 0,{delaunay:{halfedges:h,inedges:f,hull:g},circumcenters:b,vectors:y}=this;if(g.length<=1)return null;for(let D=0,O=h.length;D<O;++D){const P=h[D];if(P<D)continue;const _=2*Math.floor(D/3),Y=2*Math.floor(P/3),j=b[_],W=b[_+1],X=b[Y],ee=b[Y+1];this._renderSegment(j,W,X,ee,l)}let T,k=g[g.length-1];for(let D=0;D<g.length;++D){T=k,k=g[D];const O=2*Math.floor(f[k]/3),P=b[O],_=b[O+1],Y=4*T,j=this._project(P,_,y[Y+2],y[Y+3]);j&&this._renderSegment(P,_,j[0],j[1],l)}return d&&d.value()}renderBounds(l){const d=l==null?l=new n:void 0;return l.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),d&&d.value()}renderCell(l,d){const h=d==null?d=new n:void 0,f=this._clip(l);if(f===null||!f.length)return;d.moveTo(f[0],f[1]);let g=f.length;for(;f[0]===f[g-2]&&f[1]===f[g-1]&&g>1;)g-=2;for(let b=2;b<g;b+=2)f[b]===f[b-2]&&f[b+1]===f[b-1]||d.lineTo(f[b],f[b+1]);return d.closePath(),h&&h.value()}*cellPolygons(){const{delaunay:{points:l}}=this;for(let d=0,h=l.length/2;d<h;++d){const f=this.cellPolygon(d);f&&(f.index=d,yield f)}}cellPolygon(l){const d=new i;return this.renderCell(l,d),d.value()}_renderSegment(l,d,h,f,g){let b;const y=this._regioncode(l,d),T=this._regioncode(h,f);y===0&&T===0?(g.moveTo(l,d),g.lineTo(h,f)):(b=this._clipSegment(l,d,h,f,y,T))&&(g.moveTo(b[0],b[1]),g.lineTo(b[2],b[3]))}contains(l,d,h){return(d=+d)==d&&(h=+h)==h&&this.delaunay._step(l,d,h)===l}*neighbors(l){const d=this._clip(l);if(d)for(const h of this.delaunay.neighbors(l)){const f=this._clip(h);if(f){e:for(let g=0,b=d.length;g<b;g+=2)for(let y=0,T=f.length;y<T;y+=2)if(d[g]==f[y]&&d[g+1]==f[y+1]&&d[(g+2)%b]==f[(y+T-2)%T]&&d[(g+3)%b]==f[(y+T-1)%T]){yield h;break e}}}}_cell(l){const{circumcenters:d,delaunay:{inedges:h,halfedges:f,triangles:g}}=this,b=h[l];if(b===-1)return null;const y=[];let T=b;do{const k=Math.floor(T/3);if(y.push(d[2*k],d[2*k+1]),T=T%3==2?T-2:T+1,g[T]!==l)break;T=f[T]}while(T!==b&&T!==-1);return y}_clip(l){if(l===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const d=this._cell(l);if(d===null)return null;const{vectors:h}=this,f=4*l;return h[f]||h[f+1]?this._clipInfinite(l,d,h[f],h[f+1],h[f+2],h[f+3]):this._clipFinite(l,d)}_clipFinite(l,d){const h=d.length;let f,g,b,y,T=null,k=d[h-2],D=d[h-1],O=this._regioncode(k,D),P=0;for(let _=0;_<h;_+=2)if(f=k,g=D,k=d[_],D=d[_+1],b=O,O=this._regioncode(k,D),b===0&&O===0)y=P,P=0,T?T.push(k,D):T=[k,D];else{let Y,j,W,X,ee;if(b===0){if((Y=this._clipSegment(f,g,k,D,b,O))===null)continue;[j,W,X,ee]=Y}else{if((Y=this._clipSegment(k,D,f,g,O,b))===null)continue;[X,ee,j,W]=Y,y=P,P=this._edgecode(j,W),y&&P&&this._edge(l,y,P,T,T.length),T?T.push(j,W):T=[j,W]}y=P,P=this._edgecode(X,ee),y&&P&&this._edge(l,y,P,T,T.length),T?T.push(X,ee):T=[X,ee]}if(T)y=P,P=this._edgecode(T[0],T[1]),y&&P&&this._edge(l,y,P,T,T.length);else if(this.contains(l,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return T}_clipSegment(l,d,h,f,g,b){for(;;){if(g===0&&b===0)return[l,d,h,f];if(g&b)return null;let y,T,k=g||b;8&k?(y=l+(h-l)*(this.ymax-d)/(f-d),T=this.ymax):4&k?(y=l+(h-l)*(this.ymin-d)/(f-d),T=this.ymin):2&k?(T=d+(f-d)*(this.xmax-l)/(h-l),y=this.xmax):(T=d+(f-d)*(this.xmin-l)/(h-l),y=this.xmin),g?(l=y,d=T,g=this._regioncode(l,d)):(h=y,f=T,b=this._regioncode(h,f))}}_clipInfinite(l,d,h,f,g,b){let y,T=Array.from(d);if((y=this._project(T[0],T[1],h,f))&&T.unshift(y[0],y[1]),(y=this._project(T[T.length-2],T[T.length-1],g,b))&&T.push(y[0],y[1]),T=this._clipFinite(l,T))for(let k,D=0,O=T.length,P=this._edgecode(T[O-2],T[O-1]);D<O;D+=2)k=P,P=this._edgecode(T[D],T[D+1]),k&&P&&(D=this._edge(l,k,P,T,D),O=T.length);else this.contains(l,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(T=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return T}_edge(l,d,h,f,g){for(;d!==h;){let b,y;switch(d){case 5:d=4;continue;case 4:d=6,b=this.xmax,y=this.ymin;break;case 6:d=2;continue;case 2:d=10,b=this.xmax,y=this.ymax;break;case 10:d=8;continue;case 8:d=9,b=this.xmin,y=this.ymax;break;case 9:d=1;continue;case 1:d=5,b=this.xmin,y=this.ymin}f[g]===b&&f[g+1]===y||!this.contains(l,b,y)||(f.splice(g,0,b,y),g+=2)}if(f.length>4)for(let b=0;b<f.length;b+=2){const y=(b+2)%f.length,T=(b+4)%f.length;(f[b]===f[y]&&f[y]===f[T]||f[b+1]===f[y+1]&&f[y+1]===f[T+1])&&(f.splice(y,2),b-=2)}return g}_project(l,d,h,f){let g,b,y,T=1/0;if(f<0){if(d<=this.ymin)return null;(g=(this.ymin-d)/f)<T&&(y=this.ymin,b=l+(T=g)*h)}else if(f>0){if(d>=this.ymax)return null;(g=(this.ymax-d)/f)<T&&(y=this.ymax,b=l+(T=g)*h)}if(h>0){if(l>=this.xmax)return null;(g=(this.xmax-l)/h)<T&&(b=this.xmax,y=d+(T=g)*f)}else if(h<0){if(l<=this.xmin)return null;(g=(this.xmin-l)/h)<T&&(b=this.xmin,y=d+(T=g)*f)}return[b,y]}_edgecode(l,d){return(l===this.xmin?1:l===this.xmax?2:0)|(d===this.ymin?4:d===this.ymax?8:0)}_regioncode(l,d){return(l<this.xmin?1:l>this.xmax?2:0)|(d<this.ymin?4:d>this.ymax?8:0)}}const r=2*Math.PI,o=Math.pow;function c(s){return s[0]}function u(s){return s[1]}function p(s,l,d){return[s+Math.sin(s+l)*d,l+Math.cos(s-l)*d]}class m{static from(l,d=c,h=u,f){return new m("length"in l?function(g,b,y,T){const k=g.length,D=new Float64Array(2*k);for(let O=0;O<k;++O){const P=g[O];D[2*O]=b.call(T,P,O,g),D[2*O+1]=y.call(T,P,O,g)}return D}(l,d,h,f):Float64Array.from(function*(g,b,y,T){let k=0;for(const D of g)yield b.call(T,D,k,g),yield y.call(T,D,k,g),++k}(l,d,h,f)))}constructor(l){this._delaunator=new nd(l),this.inedges=new Int32Array(l.length/2),this._hullIndex=new Int32Array(l.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const l=this._delaunator,d=this.points;if(l.hull&&l.hull.length>2&&function(T){const{triangles:k,coords:D}=T;for(let O=0;O<k.length;O+=3){const P=2*k[O],_=2*k[O+1],Y=2*k[O+2];if((D[Y]-D[P])*(D[_+1]-D[P+1])-(D[_]-D[P])*(D[Y+1]-D[P+1])>1e-10)return!1}return!0}(l)){this.collinear=Int32Array.from({length:d.length/2},(P,_)=>_).sort((P,_)=>d[2*P]-d[2*_]||d[2*P+1]-d[2*_+1]);const T=this.collinear[0],k=this.collinear[this.collinear.length-1],D=[d[2*T],d[2*T+1],d[2*k],d[2*k+1]],O=1e-8*Math.hypot(D[3]-D[1],D[2]-D[0]);for(let P=0,_=d.length/2;P<_;++P){const Y=p(d[2*P],d[2*P+1],O);d[2*P]=Y[0],d[2*P+1]=Y[1]}this._delaunator=new nd(d)}else delete this.collinear;const h=this.halfedges=this._delaunator.halfedges,f=this.hull=this._delaunator.hull,g=this.triangles=this._delaunator.triangles,b=this.inedges.fill(-1),y=this._hullIndex.fill(-1);for(let T=0,k=h.length;T<k;++T){const D=g[T%3==2?T-2:T+1];h[T]!==-1&&b[D]!==-1||(b[D]=T)}for(let T=0,k=f.length;T<k;++T)y[f[T]]=T;f.length<=2&&f.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=f[0],b[f[0]]=1,f.length===2&&(b[f[1]]=0,this.triangles[1]=f[1],this.triangles[2]=f[1]))}voronoi(l){return new a(this,l)}*neighbors(l){const{inedges:d,hull:h,_hullIndex:f,halfedges:g,triangles:b,collinear:y}=this;if(y){const O=y.indexOf(l);return O>0&&(yield y[O-1]),void(O<y.length-1&&(yield y[O+1]))}const T=d[l];if(T===-1)return;let k=T,D=-1;do{if(yield D=b[k],k=k%3==2?k-2:k+1,b[k]!==l)return;if(k=g[k],k===-1){const O=h[(f[l]+1)%h.length];return void(O!==D&&(yield O))}}while(k!==T)}find(l,d,h=0){if((l=+l)!=l||(d=+d)!=d)return-1;const f=h;let g;for(;(g=this._step(h,l,d))>=0&&g!==h&&g!==f;)h=g;return g}_step(l,d,h){const{inedges:f,hull:g,_hullIndex:b,halfedges:y,triangles:T,points:k}=this;if(f[l]===-1||!k.length)return(l+1)%(k.length>>1);let D=l,O=o(d-k[2*l],2)+o(h-k[2*l+1],2);const P=f[l];let _=P;do{let Y=T[_];const j=o(d-k[2*Y],2)+o(h-k[2*Y+1],2);if(j<O&&(O=j,D=Y),_=_%3==2?_-2:_+1,T[_]!==l)break;if(_=y[_],_===-1){if(_=g[(b[l]+1)%g.length],_!==Y&&o(d-k[2*_],2)+o(h-k[2*_+1],2)<O)return _;break}}while(_!==P);return D}render(l){const d=l==null?l=new n:void 0,{points:h,halfedges:f,triangles:g}=this;for(let b=0,y=f.length;b<y;++b){const T=f[b];if(T<b)continue;const k=2*g[b],D=2*g[T];l.moveTo(h[k],h[k+1]),l.lineTo(h[D],h[D+1])}return this.renderHull(l),d&&d.value()}renderPoints(l,d){d!==void 0||l&&typeof l.moveTo=="function"||(d=l,l=null),d=d==null?2:+d;const h=l==null?l=new n:void 0,{points:f}=this;for(let g=0,b=f.length;g<b;g+=2){const y=f[g],T=f[g+1];l.moveTo(y+d,T),l.arc(y,T,d,0,r)}return h&&h.value()}renderHull(l){const d=l==null?l=new n:void 0,{hull:h,points:f}=this,g=2*h[0],b=h.length;l.moveTo(f[g],f[g+1]);for(let y=1;y<b;++y){const T=2*h[y];l.lineTo(f[T],f[T+1])}return l.closePath(),d&&d.value()}hullPolygon(){const l=new i;return this.renderHull(l),l.value()}renderTriangle(l,d){const h=d==null?d=new n:void 0,{points:f,triangles:g}=this,b=2*g[l*=3],y=2*g[l+1],T=2*g[l+2];return d.moveTo(f[b],f[b+1]),d.lineTo(f[y],f[y+1]),d.lineTo(f[T],f[T+1]),d.closePath(),h&&h.value()}*trianglePolygons(){const{triangles:l}=this;for(let d=0,h=l.length/3;d<h;++d)yield this.trianglePolygon(d)}trianglePolygon(l){const d=new i;return this.renderTriangle(l,d),d.value()}}var v={},w={};function C(s){return new Function("d","return {"+s.map(function(l,d){return JSON.stringify(l)+": d["+d+'] || ""'}).join(",")+"}")}function A(s){var l=Object.create(null),d=[];return s.forEach(function(h){for(var f in h)f in l||d.push(l[f]=f)}),d}function S(s,l){var d=s+"",h=d.length;return h<l?new Array(l-h+1).join(0)+d:d}function M(s){var l,d=s.getUTCHours(),h=s.getUTCMinutes(),f=s.getUTCSeconds(),g=s.getUTCMilliseconds();return isNaN(s)?"Invalid Date":((l=s.getUTCFullYear())<0?"-"+S(-l,6):l>9999?"+"+S(l,6):S(l,4))+"-"+S(s.getUTCMonth()+1,2)+"-"+S(s.getUTCDate(),2)+(g?"T"+S(d,2)+":"+S(h,2)+":"+S(f,2)+"."+S(g,3)+"Z":f?"T"+S(d,2)+":"+S(h,2)+":"+S(f,2)+"Z":h||d?"T"+S(d,2)+":"+S(h,2)+"Z":"")}function I(s){var l=new RegExp('["'+s+`
\r]`),d=s.charCodeAt(0);function h(y,T){var k,D=[],O=y.length,P=0,_=0,Y=O<=0,j=!1;function W(){if(Y)return w;if(j)return j=!1,v;var ee,Z,K=P;if(y.charCodeAt(K)===34){for(;P++<O&&y.charCodeAt(P)!==34||y.charCodeAt(++P)===34;);return(ee=P)>=O?Y=!0:(Z=y.charCodeAt(P++))===10?j=!0:Z===13&&(j=!0,y.charCodeAt(P)===10&&++P),y.slice(K+1,ee-1).replace(/""/g,'"')}for(;P<O;){if((Z=y.charCodeAt(ee=P++))===10)j=!0;else if(Z===13)j=!0,y.charCodeAt(P)===10&&++P;else if(Z!==d)continue;return y.slice(K,ee)}return Y=!0,y.slice(K,O)}for(y.charCodeAt(O-1)===10&&--O,y.charCodeAt(O-1)===13&&--O;(k=W())!==w;){for(var X=[];k!==v&&k!==w;)X.push(k),k=W();T&&(X=T(X,_++))==null||D.push(X)}return D}function f(y,T){return y.map(function(k){return T.map(function(D){return b(k[D])}).join(s)})}function g(y){return y.map(b).join(s)}function b(y){return y==null?"":y instanceof Date?M(y):l.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:function(y,T){var k,D,O=h(y,function(P,_){if(k)return k(P,_-1);D=P,k=T?function(Y,j){var W=C(Y);return function(X,ee){return j(W(X),ee,Y)}}(P,T):C(P)});return O.columns=D||[],O},parseRows:h,format:function(y,T){return T==null&&(T=A(y)),[T.map(b).join(s)].concat(f(y,T)).join(`
`)},formatBody:function(y,T){return T==null&&(T=A(y)),f(y,T).join(`
`)},formatRows:function(y){return y.map(g).join(`
`)},formatRow:g,formatValue:b}}var z=I(","),V=z.parse,U=z.parseRows,G=z.format,J=z.formatBody,te=z.formatRows,de=z.formatRow,H=z.formatValue,he=I("	"),ie=he.parse,me=he.parseRows,ke=he.format,De=he.formatBody,Me=he.formatRows,Ve=he.formatRow,Ke=he.formatValue;const ct=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function qe(s){if(!s.ok)throw new Error(s.status+" "+s.statusText);return s.blob()}function je(s){if(!s.ok)throw new Error(s.status+" "+s.statusText);return s.arrayBuffer()}function lt(s){if(!s.ok)throw new Error(s.status+" "+s.statusText);return s.text()}function xt(s,l){return fetch(s,l).then(lt)}function sn(s){return function(l,d,h){return arguments.length===2&&typeof d=="function"&&(h=d,d=void 0),xt(l,d).then(function(f){return s(f,h)})}}var Xt=sn(V),yn=sn(ie);function qn(s){if(!s.ok)throw new Error(s.status+" "+s.statusText);if(s.status!==204&&s.status!==205)return s.json()}function Rn(s){return(l,d)=>xt(l,d).then(h=>new DOMParser().parseFromString(h,s))}var Ln=Rn("application/xml"),bt=Rn("text/html"),Fe=Rn("image/svg+xml");function En(s,l,d,h){if(isNaN(l)||isNaN(d))return s;var f,g,b,y,T,k,D,O,P,_=s._root,Y={data:h},j=s._x0,W=s._y0,X=s._x1,ee=s._y1;if(!_)return s._root=Y,s;for(;_.length;)if((k=l>=(g=(j+X)/2))?j=g:X=g,(D=d>=(b=(W+ee)/2))?W=b:ee=b,f=_,!(_=_[O=D<<1|k]))return f[O]=Y,s;if(y=+s._x.call(null,_.data),T=+s._y.call(null,_.data),l===y&&d===T)return Y.next=_,f?f[O]=Y:s._root=Y,s;do f=f?f[O]=new Array(4):s._root=new Array(4),(k=l>=(g=(j+X)/2))?j=g:X=g,(D=d>=(b=(W+ee)/2))?W=b:ee=b;while((O=D<<1|k)==(P=(T>=b)<<1|y>=g));return f[P]=_,f[O]=Y,s}function Xe(s,l,d,h,f){this.node=s,this.x0=l,this.y0=d,this.x1=h,this.y1=f}function en(s){return s[0]}function wn(s){return s[1]}function Vt(s,l,d){var h=new tn(l??en,d??wn,NaN,NaN,NaN,NaN);return s==null?h:h.addAll(s)}function tn(s,l,d,h,f,g){this._x=s,this._y=l,this._x0=d,this._y0=h,this._x1=f,this._y1=g,this._root=void 0}function Ti(s){for(var l={data:s.data},d=l;s=s.next;)d=d.next={data:s.data};return l}var Ut=Vt.prototype=tn.prototype;function hn(s){return function(){return s}}function Wn(s){return 1e-6*(s()-.5)}function ra(s){return s.x+s.vx}function Ai(s){return s.y+s.vy}function Jt(s){return s.index}function xs(s,l){var d=s.get(l);if(!d)throw new Error("node not found: "+l);return d}Ut.copy=function(){var s,l,d=new tn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root;if(!h)return d;if(!h.length)return d._root=Ti(h),d;for(s=[{source:h,target:d._root=new Array(4)}];h=s.pop();)for(var f=0;f<4;++f)(l=h.source[f])&&(l.length?s.push({source:l,target:h.target[f]=new Array(4)}):h.target[f]=Ti(l));return d},Ut.add=function(s){const l=+this._x.call(null,s),d=+this._y.call(null,s);return En(this.cover(l,d),l,d,s)},Ut.addAll=function(s){var l,d,h,f,g=s.length,b=new Array(g),y=new Array(g),T=1/0,k=1/0,D=-1/0,O=-1/0;for(d=0;d<g;++d)isNaN(h=+this._x.call(null,l=s[d]))||isNaN(f=+this._y.call(null,l))||(b[d]=h,y[d]=f,h<T&&(T=h),h>D&&(D=h),f<k&&(k=f),f>O&&(O=f));if(T>D||k>O)return this;for(this.cover(T,k).cover(D,O),d=0;d<g;++d)En(this,b[d],y[d],s[d]);return this},Ut.cover=function(s,l){if(isNaN(s=+s)||isNaN(l=+l))return this;var d=this._x0,h=this._y0,f=this._x1,g=this._y1;if(isNaN(d))f=(d=Math.floor(s))+1,g=(h=Math.floor(l))+1;else{for(var b,y,T=f-d||1,k=this._root;d>s||s>=f||h>l||l>=g;)switch(y=(l<h)<<1|s<d,(b=new Array(4))[y]=k,k=b,T*=2,y){case 0:f=d+T,g=h+T;break;case 1:d=f-T,g=h+T;break;case 2:f=d+T,h=g-T;break;case 3:d=f-T,h=g-T}this._root&&this._root.length&&(this._root=k)}return this._x0=d,this._y0=h,this._x1=f,this._y1=g,this},Ut.data=function(){var s=[];return this.visit(function(l){if(!l.length)do s.push(l.data);while(l=l.next)}),s},Ut.extent=function(s){return arguments.length?this.cover(+s[0][0],+s[0][1]).cover(+s[1][0],+s[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ut.find=function(s,l,d){var h,f,g,b,y,T,k,D=this._x0,O=this._y0,P=this._x1,_=this._y1,Y=[],j=this._root;for(j&&Y.push(new Xe(j,D,O,P,_)),d==null?d=1/0:(D=s-d,O=l-d,P=s+d,_=l+d,d*=d);T=Y.pop();)if(!(!(j=T.node)||(f=T.x0)>P||(g=T.y0)>_||(b=T.x1)<D||(y=T.y1)<O))if(j.length){var W=(f+b)/2,X=(g+y)/2;Y.push(new Xe(j[3],W,X,b,y),new Xe(j[2],f,X,W,y),new Xe(j[1],W,g,b,X),new Xe(j[0],f,g,W,X)),(k=(l>=X)<<1|s>=W)&&(T=Y[Y.length-1],Y[Y.length-1]=Y[Y.length-1-k],Y[Y.length-1-k]=T)}else{var ee=s-+this._x.call(null,j.data),Z=l-+this._y.call(null,j.data),K=ee*ee+Z*Z;if(K<d){var re=Math.sqrt(d=K);D=s-re,O=l-re,P=s+re,_=l+re,h=j.data}}return h},Ut.remove=function(s){if(isNaN(g=+this._x.call(null,s))||isNaN(b=+this._y.call(null,s)))return this;var l,d,h,f,g,b,y,T,k,D,O,P,_=this._root,Y=this._x0,j=this._y0,W=this._x1,X=this._y1;if(!_)return this;if(_.length)for(;;){if((k=g>=(y=(Y+W)/2))?Y=y:W=y,(D=b>=(T=(j+X)/2))?j=T:X=T,l=_,!(_=_[O=D<<1|k]))return this;if(!_.length)break;(l[O+1&3]||l[O+2&3]||l[O+3&3])&&(d=l,P=O)}for(;_.data!==s;)if(h=_,!(_=_.next))return this;return(f=_.next)&&delete _.next,h?(f?h.next=f:delete h.next,this):l?(f?l[O]=f:delete l[O],(_=l[0]||l[1]||l[2]||l[3])&&_===(l[3]||l[2]||l[1]||l[0])&&!_.length&&(d?d[P]=_:this._root=_),this):(this._root=f,this)},Ut.removeAll=function(s){for(var l=0,d=s.length;l<d;++l)this.remove(s[l]);return this},Ut.root=function(){return this._root},Ut.size=function(){var s=0;return this.visit(function(l){if(!l.length)do++s;while(l=l.next)}),s},Ut.visit=function(s){var l,d,h,f,g,b,y=[],T=this._root;for(T&&y.push(new Xe(T,this._x0,this._y0,this._x1,this._y1));l=y.pop();)if(!s(T=l.node,h=l.x0,f=l.y0,g=l.x1,b=l.y1)&&T.length){var k=(h+g)/2,D=(f+b)/2;(d=T[3])&&y.push(new Xe(d,k,D,g,b)),(d=T[2])&&y.push(new Xe(d,h,D,k,b)),(d=T[1])&&y.push(new Xe(d,k,f,g,D)),(d=T[0])&&y.push(new Xe(d,h,f,k,D))}return this},Ut.visitAfter=function(s){var l,d=[],h=[];for(this._root&&d.push(new Xe(this._root,this._x0,this._y0,this._x1,this._y1));l=d.pop();){var f=l.node;if(f.length){var g,b=l.x0,y=l.y0,T=l.x1,k=l.y1,D=(b+T)/2,O=(y+k)/2;(g=f[0])&&d.push(new Xe(g,b,y,D,O)),(g=f[1])&&d.push(new Xe(g,D,y,T,O)),(g=f[2])&&d.push(new Xe(g,b,O,D,k)),(g=f[3])&&d.push(new Xe(g,D,O,T,k))}h.push(l)}for(;l=h.pop();)s(l.node,l.x0,l.y0,l.x1,l.y1);return this},Ut.x=function(s){return arguments.length?(this._x=s,this):this._x},Ut.y=function(s){return arguments.length?(this._y=s,this):this._y};const Ni=4294967296;function wa(s){return s.x}function Yn(s){return s.y}var xa=Math.PI*(3-Math.sqrt(5));function Di(s,l){if((d=(s=l?s.toExponential(l-1):s.toExponential()).indexOf("e"))<0)return null;var d,h=s.slice(0,d);return[h.length>1?h[0]+h.slice(2):h,+s.slice(d+1)]}function Ue(s){return(s=Di(Math.abs(s)))?s[1]:NaN}var nn,ze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qe(s){if(!(l=ze.exec(s)))throw new Error("invalid format: "+s);var l;return new et({fill:l[1],align:l[2],sign:l[3],symbol:l[4],zero:l[5],width:l[6],comma:l[7],precision:l[8]&&l[8].slice(1),trim:l[9],type:l[10]})}function et(s){this.fill=s.fill===void 0?" ":s.fill+"",this.align=s.align===void 0?">":s.align+"",this.sign=s.sign===void 0?"-":s.sign+"",this.symbol=s.symbol===void 0?"":s.symbol+"",this.zero=!!s.zero,this.width=s.width===void 0?void 0:+s.width,this.comma=!!s.comma,this.precision=s.precision===void 0?void 0:+s.precision,this.trim=!!s.trim,this.type=s.type===void 0?"":s.type+""}function $t(s,l){var d=Di(s,l);if(!d)return s+"";var h=d[0],f=d[1];return f<0?"0."+new Array(-f).join("0")+h:h.length>f+1?h.slice(0,f+1)+"."+h.slice(f+1):h+new Array(f-h.length+2).join("0")}Qe.prototype=et.prototype,et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var At={"%":(s,l)=>(100*s).toFixed(l),b:s=>Math.round(s).toString(2),c:s=>s+"",d:function(s){return Math.abs(s=Math.round(s))>=1e21?s.toLocaleString("en").replace(/,/g,""):s.toString(10)},e:(s,l)=>s.toExponential(l),f:(s,l)=>s.toFixed(l),g:(s,l)=>s.toPrecision(l),o:s=>Math.round(s).toString(8),p:(s,l)=>$t(100*s,l),r:$t,s:function(s,l){var d=Di(s,l);if(!d)return s+"";var h=d[0],f=d[1],g=f-(nn=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,b=h.length;return g===b?h:g>b?h+new Array(g-b+1).join("0"):g>0?h.slice(0,g)+"."+h.slice(g):"0."+new Array(1-g).join("0")+Di(s,Math.max(0,l+g-1))[0]},X:s=>Math.round(s).toString(16).toUpperCase(),x:s=>Math.round(s).toString(16)};function Ct(s){return s}var It,jt=Array.prototype.map,An=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function an(s){var l,d,h=s.grouping===void 0||s.thousands===void 0?Ct:(l=jt.call(s.grouping,Number),d=s.thousands+"",function(P,_){for(var Y=P.length,j=[],W=0,X=l[0],ee=0;Y>0&&X>0&&(ee+X+1>_&&(X=Math.max(1,_-ee)),j.push(P.substring(Y-=X,Y+X)),!((ee+=X+1)>_));)X=l[W=(W+1)%l.length];return j.reverse().join(d)}),f=s.currency===void 0?"":s.currency[0]+"",g=s.currency===void 0?"":s.currency[1]+"",b=s.decimal===void 0?".":s.decimal+"",y=s.numerals===void 0?Ct:function(P){return function(_){return _.replace(/[0-9]/g,function(Y){return P[+Y]})}}(jt.call(s.numerals,String)),T=s.percent===void 0?"%":s.percent+"",k=s.minus===void 0?"\u2212":s.minus+"",D=s.nan===void 0?"NaN":s.nan+"";function O(P){var _=(P=Qe(P)).fill,Y=P.align,j=P.sign,W=P.symbol,X=P.zero,ee=P.width,Z=P.comma,K=P.precision,re=P.trim,oe=P.type;oe==="n"?(Z=!0,oe="g"):At[oe]||(K===void 0&&(K=12),re=!0,oe="g"),(X||_==="0"&&Y==="=")&&(X=!0,_="0",Y="=");var Ce=W==="$"?f:W==="#"&&/[boxX]/.test(oe)?"0"+oe.toLowerCase():"",Ie=W==="$"?g:/[%p]/.test(oe)?T:"",Te=At[oe],pe=/[defgprs%]/.test(oe);function ge(we){var le,fe,xe,$e=Ce,Re=Ie;if(oe==="c")Re=Te(we)+Re,we="";else{var Ye=(we=+we)<0||1/we<0;if(we=isNaN(we)?D:Te(Math.abs(we),K),re&&(we=function(Ze){e:for(var zt,Rt=Ze.length,Tt=1,Bt=-1;Tt<Rt;++Tt)switch(Ze[Tt]){case".":Bt=zt=Tt;break;case"0":Bt===0&&(Bt=Tt),zt=Tt;break;default:if(!+Ze[Tt])break e;Bt>0&&(Bt=0)}return Bt>0?Ze.slice(0,Bt)+Ze.slice(zt+1):Ze}(we)),Ye&&+we==0&&j!=="+"&&(Ye=!1),$e=(Ye?j==="("?j:k:j==="-"||j==="("?"":j)+$e,Re=(oe==="s"?An[8+nn/3]:"")+Re+(Ye&&j==="("?")":""),pe){for(le=-1,fe=we.length;++le<fe;)if(48>(xe=we.charCodeAt(le))||xe>57){Re=(xe===46?b+we.slice(le+1):we.slice(le))+Re,we=we.slice(0,le);break}}}Z&&!X&&(we=h(we,1/0));var st=$e.length+we.length+Re.length,ht=st<ee?new Array(ee-st+1).join(_):"";switch(Z&&X&&(we=h(ht+we,ht.length?ee-Re.length:1/0),ht=""),Y){case"<":we=$e+we+Re+ht;break;case"=":we=$e+ht+we+Re;break;case"^":we=ht.slice(0,st=ht.length>>1)+$e+we+Re+ht.slice(st);break;default:we=ht+$e+we+Re}return y(we)}return K=K===void 0?6:/[gprs]/.test(oe)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K)),ge.toString=function(){return P+""},ge}return{format:O,formatPrefix:function(P,_){var Y=O(((P=Qe(P)).type="f",P)),j=3*Math.max(-8,Math.min(8,Math.floor(Ue(_)/3))),W=Math.pow(10,-j),X=An[8+j/3];return function(ee){return Y(W*ee)+X}}}}function di(s){return It=an(s),B.format=It.format,B.formatPrefix=It.formatPrefix,It}function Ca(s){return Math.max(0,-Ue(Math.abs(s)))}function _i(s,l){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ue(l)/3)))-Ue(Math.abs(s)))}function Ii(s,l){return s=Math.abs(s),l=Math.abs(l)-s,Math.max(0,Ue(l)-Ue(s))+1}B.format=void 0,B.formatPrefix=void 0,di({thousands:",",grouping:[3],currency:["$",""]});var Pt=1e-6,Ra=1e-12,Mt=Math.PI,$n=Mt/2,Si=Mt/4,Kn=2*Mt,pn=180/Mt,kt=Mt/180,vn=Math.abs,js=Math.atan,Hi=Math.atan2,pt=Math.cos,Ei=Math.ceil,Mi=Math.exp,Le=Math.hypot,it=Math.log,Ft=Math.pow,nt=Math.sin,Zt=Math.sign||function(s){return s>0?1:s<0?-1:0},Un=Math.sqrt,ka=Math.tan;function ni(s){return s>1?0:s<-1?Mt:Math.acos(s)}function bi(s){return s>1?$n:s<-1?-$n:Math.asin(s)}function is(s){return(s=nt(s/2))*s}function Ge(){}function yt(s,l){s&&fn.hasOwnProperty(s.type)&&fn[s.type](s,l)}var Dt={Feature:function(s,l){yt(s.geometry,l)},FeatureCollection:function(s,l){for(var d=s.features,h=-1,f=d.length;++h<f;)yt(d[h].geometry,l)}},fn={Sphere:function(s,l){l.sphere()},Point:function(s,l){s=s.coordinates,l.point(s[0],s[1],s[2])},MultiPoint:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)s=d[h],l.point(s[0],s[1],s[2])},LineString:function(s,l){ui(s.coordinates,l,0)},MultiLineString:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)ui(d[h],l,0)},Polygon:function(s,l){as(s.coordinates,l)},MultiPolygon:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)as(d[h],l)},GeometryCollection:function(s,l){for(var d=s.geometries,h=-1,f=d.length;++h<f;)yt(d[h],l)}};function ui(s,l,d){var h,f=-1,g=s.length-d;for(l.lineStart();++f<g;)h=s[f],l.point(h[0],h[1],h[2]);l.lineEnd()}function as(s,l){var d=-1,h=s.length;for(l.polygonStart();++d<h;)ui(s[d],l,1);l.polygonEnd()}function yi(s,l){s&&Dt.hasOwnProperty(s.type)?Dt[s.type](s,l):yt(s,l)}var $i,Eo,id,ad,ul,xn,Dn,Wt,Xi,Cs,sd,gg,rd,cu,hl,$o,gh=new hi,mh=new hi,_r={point:Ge,lineStart:Ge,lineEnd:Ge,polygonStart:function(){gh=new hi,_r.lineStart=i0,_r.lineEnd=a0},polygonEnd:function(){var s=+gh;mh.add(s<0?Kn+s:s),this.lineStart=this.lineEnd=this.point=Ge},sphere:function(){mh.add(Kn)}};function i0(){_r.point=s0}function a0(){mg($i,Eo)}function s0(s,l){_r.point=mg,$i=s,Eo=l,id=s*=kt,ad=pt(l=(l*=kt)/2+Si),ul=nt(l)}function mg(s,l){var d=(s*=kt)-id,h=d>=0?1:-1,f=h*d,g=pt(l=(l*=kt)/2+Si),b=nt(l),y=ul*b,T=ad*g+y*pt(f),k=y*h*nt(f);gh.add(Hi(k,T)),id=s,ad=g,ul=b}function vh(s){return[Hi(s[1],s[0]),bi(s[2])]}function ec(s){var l=s[0],d=s[1],h=pt(d);return[h*pt(l),h*nt(l),nt(d)]}function bh(s,l){return s[0]*l[0]+s[1]*l[1]+s[2]*l[2]}function od(s,l){return[s[1]*l[2]-s[2]*l[1],s[2]*l[0]-s[0]*l[2],s[0]*l[1]-s[1]*l[0]]}function Hp(s,l){s[0]+=l[0],s[1]+=l[1],s[2]+=l[2]}function yh(s,l){return[s[0]*l,s[1]*l,s[2]*l]}function wh(s){var l=Un(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]/=l,s[1]/=l,s[2]/=l}var du,xh,Ch,kh,Th,Ah,Sh,Eh,qp,Vp,jp,vg,bg,Na,_a,za,Do={point:Wp,lineStart:wg,lineEnd:xg,polygonStart:function(){Do.point=Cg,Do.lineStart=r0,Do.lineEnd=o0,cu=new hi,_r.polygonStart()},polygonEnd:function(){_r.polygonEnd(),Do.point=Wp,Do.lineStart=wg,Do.lineEnd=xg,gh<0?(xn=-(Wt=180),Dn=-(Xi=90)):cu>Pt?Xi=90:cu<-1e-6&&(Dn=-90),$o[0]=xn,$o[1]=Wt},sphere:function(){xn=-(Wt=180),Dn=-(Xi=90)}};function Wp(s,l){hl.push($o=[xn=s,Wt=s]),l<Dn&&(Dn=l),l>Xi&&(Xi=l)}function yg(s,l){var d=ec([s*kt,l*kt]);if(rd){var h=od(rd,d),f=od([h[1],-h[0],0],h);wh(f),f=vh(f);var g,b=s-Cs,y=b>0?1:-1,T=f[0]*pn*y,k=vn(b)>180;k^(y*Cs<T&&T<y*s)?(g=f[1]*pn)>Xi&&(Xi=g):k^(y*Cs<(T=(T+360)%360-180)&&T<y*s)?(g=-f[1]*pn)<Dn&&(Dn=g):(l<Dn&&(Dn=l),l>Xi&&(Xi=l)),k?s<Cs?ks(xn,s)>ks(xn,Wt)&&(Wt=s):ks(s,Wt)>ks(xn,Wt)&&(xn=s):Wt>=xn?(s<xn&&(xn=s),s>Wt&&(Wt=s)):s>Cs?ks(xn,s)>ks(xn,Wt)&&(Wt=s):ks(s,Wt)>ks(xn,Wt)&&(xn=s)}else hl.push($o=[xn=s,Wt=s]);l<Dn&&(Dn=l),l>Xi&&(Xi=l),rd=d,Cs=s}function wg(){Do.point=yg}function xg(){$o[0]=xn,$o[1]=Wt,Do.point=Wp,rd=null}function Cg(s,l){if(rd){var d=s-Cs;cu.add(vn(d)>180?d+(d>0?360:-360):d)}else sd=s,gg=l;_r.point(s,l),yg(s,l)}function r0(){_r.lineStart()}function o0(){Cg(sd,gg),_r.lineEnd(),vn(cu)>Pt&&(xn=-(Wt=180)),$o[0]=xn,$o[1]=Wt,rd=null}function ks(s,l){return(l-=s)<0?l+360:l}function l0(s,l){return s[0]-l[0]}function kg(s,l){return s[0]<=s[1]?s[0]<=l&&l<=s[1]:l<s[0]||s[1]<l}var fr={sphere:Ge,point:Up,lineStart:Tg,lineEnd:Ag,polygonStart:function(){fr.lineStart=u0,fr.lineEnd=h0},polygonEnd:function(){fr.lineStart=Tg,fr.lineEnd=Ag}};function Up(s,l){s*=kt;var d=pt(l*=kt);uu(d*pt(s),d*nt(s),nt(l))}function uu(s,l,d){++du,Ch+=(s-Ch)/du,kh+=(l-kh)/du,Th+=(d-Th)/du}function Tg(){fr.point=c0}function c0(s,l){s*=kt;var d=pt(l*=kt);Na=d*pt(s),_a=d*nt(s),za=nt(l),fr.point=d0,uu(Na,_a,za)}function d0(s,l){s*=kt;var d=pt(l*=kt),h=d*pt(s),f=d*nt(s),g=nt(l),b=Hi(Un((b=_a*g-za*f)*b+(b=za*h-Na*g)*b+(b=Na*f-_a*h)*b),Na*h+_a*f+za*g);xh+=b,Ah+=b*(Na+(Na=h)),Sh+=b*(_a+(_a=f)),Eh+=b*(za+(za=g)),uu(Na,_a,za)}function Ag(){fr.point=Up}function u0(){fr.point=p0}function h0(){Sg(vg,bg),fr.point=Up}function p0(s,l){vg=s,bg=l,s*=kt,l*=kt,fr.point=Sg;var d=pt(l);Na=d*pt(s),_a=d*nt(s),za=nt(l),uu(Na,_a,za)}function Sg(s,l){s*=kt;var d=pt(l*=kt),h=d*pt(s),f=d*nt(s),g=nt(l),b=_a*g-za*f,y=za*h-Na*g,T=Na*f-_a*h,k=Le(b,y,T),D=bi(k),O=k&&-D/k;qp.add(O*b),Vp.add(O*y),jp.add(O*T),xh+=D,Ah+=D*(Na+(Na=h)),Sh+=D*(_a+(_a=f)),Eh+=D*(za+(za=g)),uu(Na,_a,za)}function ld(s){return function(){return s}}function Gp(s,l){function d(h,f){return h=s(h,f),l(h[0],h[1])}return s.invert&&l.invert&&(d.invert=function(h,f){return(h=l.invert(h,f))&&s.invert(h[0],h[1])}),d}function Yp(s,l){return vn(s)>Mt&&(s-=Math.round(s/Kn)*Kn),[s,l]}function Kp(s,l,d){return(s%=Kn)?l||d?Gp($g(s),Dg(l,d)):$g(s):l||d?Dg(l,d):Yp}function Eg(s){return function(l,d){return vn(l+=s)>Mt&&(l-=Math.round(l/Kn)*Kn),[l,d]}}function $g(s){var l=Eg(s);return l.invert=Eg(-s),l}function Dg(s,l){var d=pt(s),h=nt(s),f=pt(l),g=nt(l);function b(y,T){var k=pt(T),D=pt(y)*k,O=nt(y)*k,P=nt(T),_=P*d+D*h;return[Hi(O*f-_*g,D*d-P*h),bi(_*f+O*g)]}return b.invert=function(y,T){var k=pt(T),D=pt(y)*k,O=nt(y)*k,P=nt(T),_=P*f-O*g;return[Hi(O*f+P*g,D*d+_*h),bi(_*d-D*h)]},b}function Ig(s){function l(d){return(d=s(d[0]*kt,d[1]*kt))[0]*=pn,d[1]*=pn,d}return s=Kp(s[0]*kt,s[1]*kt,s.length>2?s[2]*kt:0),l.invert=function(d){return(d=s.invert(d[0]*kt,d[1]*kt))[0]*=pn,d[1]*=pn,d},l}function Mg(s,l,d,h,f,g){if(d){var b=pt(l),y=nt(l),T=h*d;f==null?(f=l+h*Kn,g=l-T/2):(f=Lg(b,f),g=Lg(b,g),(h>0?f<g:f>g)&&(f+=h*Kn));for(var k,D=f;h>0?D>g:D<g;D-=T)k=vh([b,-y*pt(D),-y*nt(D)]),s.point(k[0],k[1])}}function Lg(s,l){(l=ec(l))[0]-=s,wh(l);var d=ni(-l[1]);return((-l[2]<0?-d:d)+Kn-Pt)%Kn}function Pg(){var s,l=[];return{point:function(d,h,f){s.push([d,h,f])},lineStart:function(){l.push(s=[])},lineEnd:Ge,rejoin:function(){l.length>1&&l.push(l.pop().concat(l.shift()))},result:function(){var d=l;return l=[],s=null,d}}}function $h(s,l){return vn(s[0]-l[0])<Pt&&vn(s[1]-l[1])<Pt}function Dh(s,l,d,h){this.x=s,this.z=l,this.o=d,this.e=h,this.v=!1,this.n=this.p=null}function Bg(s,l,d,h,f){var g,b,y=[],T=[];if(s.forEach(function(Y){if(!((j=Y.length-1)<=0)){var j,W,X=Y[0],ee=Y[j];if($h(X,ee)){if(!X[2]&&!ee[2]){for(f.lineStart(),g=0;g<j;++g)f.point((X=Y[g])[0],X[1]);return void f.lineEnd()}ee[0]+=2e-6}y.push(W=new Dh(X,Y,null,!0)),T.push(W.o=new Dh(X,null,W,!1)),y.push(W=new Dh(ee,Y,null,!1)),T.push(W.o=new Dh(ee,null,W,!0))}}),y.length){for(T.sort(l),Og(y),Og(T),g=0,b=T.length;g<b;++g)T[g].e=d=!d;for(var k,D,O=y[0];;){for(var P=O,_=!0;P.v;)if((P=P.n)===O)return;k=P.z,f.lineStart();do{if(P.v=P.o.v=!0,P.e){if(_)for(g=0,b=k.length;g<b;++g)f.point((D=k[g])[0],D[1]);else h(P.x,P.n.x,1,f);P=P.n}else{if(_)for(k=P.p.z,g=k.length-1;g>=0;--g)f.point((D=k[g])[0],D[1]);else h(P.x,P.p.x,-1,f);P=P.p}k=(P=P.o).z,_=!_}while(!P.v);f.lineEnd()}}}function Og(s){if(l=s.length){for(var l,d,h=0,f=s[0];++h<l;)f.n=d=s[h],d.p=f,f=d;f.n=d=s[0],d.p=f}}function Xp(s){return vn(s[0])<=Mt?s[0]:Zt(s[0])*((vn(s[0])+Mt)%Kn-Mt)}function Rg(s,l){var d=Xp(l),h=l[1],f=nt(h),g=[nt(d),-pt(d),0],b=0,y=0,T=new hi;f===1?h=$n+Pt:f===-1&&(h=-$n-Pt);for(var k=0,D=s.length;k<D;++k)if(P=(O=s[k]).length)for(var O,P,_=O[P-1],Y=Xp(_),j=_[1]/2+Si,W=nt(j),X=pt(j),ee=0;ee<P;++ee,Y=K,W=oe,X=Ce,_=Z){var Z=O[ee],K=Xp(Z),re=Z[1]/2+Si,oe=nt(re),Ce=pt(re),Ie=K-Y,Te=Ie>=0?1:-1,pe=Te*Ie,ge=pe>Mt,we=W*oe;if(T.add(Hi(we*Te*nt(pe),X*Ce+we*pt(pe))),b+=ge?Ie+Te*Kn:Ie,ge^Y>=d^K>=d){var le=od(ec(_),ec(Z));wh(le);var fe=od(g,le);wh(fe);var xe=(ge^Ie>=0?-1:1)*bi(fe[2]);(h>xe||h===xe&&(le[0]||le[1]))&&(y+=ge^Ie>=0?1:-1)}}return(b<-1e-6||b<Pt&&T<-1e-12)^1&y}function Ng(s,l,d,h){return function(f){var g,b,y,T=l(f),k=Pg(),D=l(k),O=!1,P={point:_,lineStart:j,lineEnd:W,polygonStart:function(){P.point=X,P.lineStart=ee,P.lineEnd=Z,b=[],g=[]},polygonEnd:function(){P.point=_,P.lineStart=j,P.lineEnd=W,b=Zs(b);var K=Rg(g,h);b.length?(O||(f.polygonStart(),O=!0),Bg(b,g0,K,d,f)):K&&(O||(f.polygonStart(),O=!0),f.lineStart(),d(null,null,1,f),f.lineEnd()),O&&(f.polygonEnd(),O=!1),b=g=null},sphere:function(){f.polygonStart(),f.lineStart(),d(null,null,1,f),f.lineEnd(),f.polygonEnd()}};function _(K,re){s(K,re)&&f.point(K,re)}function Y(K,re){T.point(K,re)}function j(){P.point=Y,T.lineStart()}function W(){P.point=_,T.lineEnd()}function X(K,re){y.push([K,re]),D.point(K,re)}function ee(){D.lineStart(),y=[]}function Z(){X(y[0][0],y[0][1]),D.lineEnd();var K,re,oe,Ce,Ie=D.clean(),Te=k.result(),pe=Te.length;if(y.pop(),g.push(y),y=null,pe)if(1&Ie){if((re=(oe=Te[0]).length-1)>0){for(O||(f.polygonStart(),O=!0),f.lineStart(),K=0;K<re;++K)f.point((Ce=oe[K])[0],Ce[1]);f.lineEnd()}}else pe>1&&2&Ie&&Te.push(Te.pop().concat(Te.shift())),b.push(Te.filter(f0))}return P}}function f0(s){return s.length>1}function g0(s,l){return((s=s.x)[0]<0?s[1]-$n-Pt:$n-s[1])-((l=l.x)[0]<0?l[1]-$n-Pt:$n-l[1])}Yp.invert=Yp;var Qp=Ng(function(){return!0},function(s){var l,d=NaN,h=NaN,f=NaN;return{lineStart:function(){s.lineStart(),l=1},point:function(g,b){var y=g>0?Mt:-Mt,T=vn(g-d);vn(T-Mt)<Pt?(s.point(d,h=(h+b)/2>0?$n:-$n),s.point(f,h),s.lineEnd(),s.lineStart(),s.point(y,h),s.point(g,h),l=0):f!==y&&T>=Mt&&(vn(d-f)<Pt&&(d-=f*Pt),vn(g-y)<Pt&&(g-=y*Pt),h=function(k,D,O,P){var _,Y,j=nt(k-O);return vn(j)>Pt?js((nt(D)*(Y=pt(P))*nt(O)-nt(P)*(_=pt(D))*nt(k))/(_*Y*j)):(D+P)/2}(d,h,g,b),s.point(f,h),s.lineEnd(),s.lineStart(),s.point(y,h),l=0),s.point(d=g,h=b),f=y},lineEnd:function(){s.lineEnd(),d=h=NaN},clean:function(){return 2-l}}},function(s,l,d,h){var f;if(s==null)f=d*$n,h.point(-Mt,f),h.point(0,f),h.point(Mt,f),h.point(Mt,0),h.point(Mt,-f),h.point(0,-f),h.point(-Mt,-f),h.point(-Mt,0),h.point(-Mt,f);else if(vn(s[0]-l[0])>Pt){var g=s[0]<l[0]?Mt:-Mt;f=d*g/2,h.point(-g,f),h.point(0,f),h.point(g,f)}else h.point(l[0],l[1])},[-Mt,-$n]);function _g(s){var l=pt(s),d=6*kt,h=l>0,f=vn(l)>Pt;function g(T,k){return pt(T)*pt(k)>l}function b(T,k,D){var O=[1,0,0],P=od(ec(T),ec(k)),_=bh(P,P),Y=P[0],j=_-Y*Y;if(!j)return!D&&T;var W=l*_/j,X=-l*Y/j,ee=od(O,P),Z=yh(O,W);Hp(Z,yh(P,X));var K=ee,re=bh(Z,K),oe=bh(K,K),Ce=re*re-oe*(bh(Z,Z)-1);if(!(Ce<0)){var Ie=Un(Ce),Te=yh(K,(-re-Ie)/oe);if(Hp(Te,Z),Te=vh(Te),!D)return Te;var pe,ge=T[0],we=k[0],le=T[1],fe=k[1];we<ge&&(pe=ge,ge=we,we=pe);var xe=we-ge,$e=vn(xe-Mt)<Pt;if(!$e&&fe<le&&(pe=le,le=fe,fe=pe),$e||xe<Pt?$e?le+fe>0^Te[1]<(vn(Te[0]-ge)<Pt?le:fe):le<=Te[1]&&Te[1]<=fe:xe>Mt^(ge<=Te[0]&&Te[0]<=we)){var Re=yh(K,(-re+Ie)/oe);return Hp(Re,Z),[Te,vh(Re)]}}}function y(T,k){var D=h?s:Mt-s,O=0;return T<-D?O|=1:T>D&&(O|=2),k<-D?O|=4:k>D&&(O|=8),O}return Ng(g,function(T){var k,D,O,P,_;return{lineStart:function(){P=O=!1,_=1},point:function(Y,j){var W,X=[Y,j],ee=g(Y,j),Z=h?ee?0:y(Y,j):ee?y(Y+(Y<0?Mt:-Mt),j):0;if(!k&&(P=O=ee)&&T.lineStart(),ee!==O&&(!(W=b(k,X))||$h(k,W)||$h(X,W))&&(X[2]=1),ee!==O)_=0,ee?(T.lineStart(),W=b(X,k),T.point(W[0],W[1])):(W=b(k,X),T.point(W[0],W[1],2),T.lineEnd()),k=W;else if(f&&k&&h^ee){var K;Z&D||!(K=b(X,k,!0))||(_=0,h?(T.lineStart(),T.point(K[0][0],K[0][1]),T.point(K[1][0],K[1][1]),T.lineEnd()):(T.point(K[1][0],K[1][1]),T.lineEnd(),T.lineStart(),T.point(K[0][0],K[0][1],3)))}!ee||k&&$h(k,X)||T.point(X[0],X[1]),k=X,O=ee,D=Z},lineEnd:function(){O&&T.lineEnd(),k=null},clean:function(){return _|(P&&O)<<1}}},function(T,k,D,O){Mg(O,s,d,D,T,k)},h?[0,-s]:[-Mt,s-Mt])}var Jp,Zp,Ih,Mh,hu=1e9,Lh=-hu;function Ph(s,l,d,h){function f(k,D){return s<=k&&k<=d&&l<=D&&D<=h}function g(k,D,O,P){var _=0,Y=0;if(k==null||(_=b(k,O))!==(Y=b(D,O))||T(k,D)<0^O>0)do P.point(_===0||_===3?s:d,_>1?h:l);while((_=(_+O+4)%4)!==Y);else P.point(D[0],D[1])}function b(k,D){return vn(k[0]-s)<Pt?D>0?0:3:vn(k[0]-d)<Pt?D>0?2:1:vn(k[1]-l)<Pt?D>0?1:0:D>0?3:2}function y(k,D){return T(k.x,D.x)}function T(k,D){var O=b(k,1),P=b(D,1);return O!==P?O-P:O===0?D[1]-k[1]:O===1?k[0]-D[0]:O===2?k[1]-D[1]:D[0]-k[0]}return function(k){var D,O,P,_,Y,j,W,X,ee,Z,K,re=k,oe=Pg(),Ce={point:Ie,lineStart:function(){Ce.point=Te,O&&O.push(P=[]),Z=!0,ee=!1,W=X=NaN},lineEnd:function(){D&&(Te(_,Y),j&&ee&&oe.rejoin(),D.push(oe.result())),Ce.point=Ie,ee&&re.lineEnd()},polygonStart:function(){re=oe,D=[],O=[],K=!0},polygonEnd:function(){var pe=function(){for(var le=0,fe=0,xe=O.length;fe<xe;++fe)for(var $e,Re,Ye=O[fe],st=1,ht=Ye.length,Ze=Ye[0],zt=Ze[0],Rt=Ze[1];st<ht;++st)$e=zt,Re=Rt,zt=(Ze=Ye[st])[0],Rt=Ze[1],Re<=h?Rt>h&&(zt-$e)*(h-Re)>(Rt-Re)*(s-$e)&&++le:Rt<=h&&(zt-$e)*(h-Re)<(Rt-Re)*(s-$e)&&--le;return le}(),ge=K&&pe,we=(D=Zs(D)).length;(ge||we)&&(k.polygonStart(),ge&&(k.lineStart(),g(null,null,1,k),k.lineEnd()),we&&Bg(D,y,pe,g,k),k.polygonEnd()),re=k,D=O=P=null}};function Ie(pe,ge){f(pe,ge)&&re.point(pe,ge)}function Te(pe,ge){var we=f(pe,ge);if(O&&P.push([pe,ge]),Z)_=pe,Y=ge,j=we,Z=!1,we&&(re.lineStart(),re.point(pe,ge));else if(we&&ee)re.point(pe,ge);else{var le=[W=Math.max(Lh,Math.min(hu,W)),X=Math.max(Lh,Math.min(hu,X))],fe=[pe=Math.max(Lh,Math.min(hu,pe)),ge=Math.max(Lh,Math.min(hu,ge))];(function(xe,$e,Re,Ye,st,ht){var Ze,zt=xe[0],Rt=xe[1],Tt=0,Bt=1,Nn=$e[0]-zt,mn=$e[1]-Rt;if(Ze=Re-zt,Nn||!(Ze>0)){if(Ze/=Nn,Nn<0){if(Ze<Tt)return;Ze<Bt&&(Bt=Ze)}else if(Nn>0){if(Ze>Bt)return;Ze>Tt&&(Tt=Ze)}if(Ze=st-zt,Nn||!(Ze<0)){if(Ze/=Nn,Nn<0){if(Ze>Bt)return;Ze>Tt&&(Tt=Ze)}else if(Nn>0){if(Ze<Tt)return;Ze<Bt&&(Bt=Ze)}if(Ze=Ye-Rt,mn||!(Ze>0)){if(Ze/=mn,mn<0){if(Ze<Tt)return;Ze<Bt&&(Bt=Ze)}else if(mn>0){if(Ze>Bt)return;Ze>Tt&&(Tt=Ze)}if(Ze=ht-Rt,mn||!(Ze<0)){if(Ze/=mn,mn<0){if(Ze>Bt)return;Ze>Tt&&(Tt=Ze)}else if(mn>0){if(Ze<Tt)return;Ze<Bt&&(Bt=Ze)}return Tt>0&&(xe[0]=zt+Tt*Nn,xe[1]=Rt+Tt*mn),Bt<1&&($e[0]=zt+Bt*Nn,$e[1]=Rt+Bt*mn),!0}}}}})(le,fe,s,l,d,h)?(ee||(re.lineStart(),re.point(le[0],le[1])),re.point(fe[0],fe[1]),we||re.lineEnd(),K=!1):we&&(re.lineStart(),re.point(pe,ge),K=!1)}W=pe,X=ge,ee=we}return Ce}}var cd={sphere:Ge,point:Ge,lineStart:function(){cd.point=v0,cd.lineEnd=m0},lineEnd:Ge,polygonStart:Ge,polygonEnd:Ge};function m0(){cd.point=cd.lineEnd=Ge}function v0(s,l){Zp=s*=kt,Ih=nt(l*=kt),Mh=pt(l),cd.point=b0}function b0(s,l){s*=kt;var d=nt(l*=kt),h=pt(l),f=vn(s-Zp),g=pt(f),b=h*nt(f),y=Mh*d-Ih*h*g,T=Ih*d+Mh*h*g;Jp.add(Hi(Un(b*b+y*y),T)),Zp=s,Ih=d,Mh=h}function zg(s){return Jp=new hi,yi(s,cd),+Jp}var ef=[null,null],y0={type:"LineString",coordinates:ef};function Bh(s,l){return ef[0]=s,ef[1]=l,zg(y0)}var Fg={Feature:function(s,l){return Oh(s.geometry,l)},FeatureCollection:function(s,l){for(var d=s.features,h=-1,f=d.length;++h<f;)if(Oh(d[h].geometry,l))return!0;return!1}},Hg={Sphere:function(){return!0},Point:function(s,l){return qg(s.coordinates,l)},MultiPoint:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)if(qg(d[h],l))return!0;return!1},LineString:function(s,l){return Vg(s.coordinates,l)},MultiLineString:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)if(Vg(d[h],l))return!0;return!1},Polygon:function(s,l){return jg(s.coordinates,l)},MultiPolygon:function(s,l){for(var d=s.coordinates,h=-1,f=d.length;++h<f;)if(jg(d[h],l))return!0;return!1},GeometryCollection:function(s,l){for(var d=s.geometries,h=-1,f=d.length;++h<f;)if(Oh(d[h],l))return!0;return!1}};function Oh(s,l){return!(!s||!Hg.hasOwnProperty(s.type))&&Hg[s.type](s,l)}function qg(s,l){return Bh(s,l)===0}function Vg(s,l){for(var d,h,f,g=0,b=s.length;g<b;g++){if((h=Bh(s[g],l))===0||g>0&&(f=Bh(s[g],s[g-1]))>0&&d<=f&&h<=f&&(d+h-f)*(1-Math.pow((d-h)/f,2))<Ra*f)return!0;d=h}return!1}function jg(s,l){return!!Rg(s.map(w0),Wg(l))}function w0(s){return(s=s.map(Wg)).pop(),s}function Wg(s){return[s[0]*kt,s[1]*kt]}function Ug(s,l,d){var h=cs(s,l-Pt,d).concat(l);return function(f){return h.map(function(g){return[f,g]})}}function Gg(s,l,d){var h=cs(s,l-Pt,d).concat(l);return function(f){return h.map(function(g){return[g,f]})}}function Yg(){var s,l,d,h,f,g,b,y,T,k,D,O,P=10,_=P,Y=90,j=360,W=2.5;function X(){return{type:"MultiLineString",coordinates:ee()}}function ee(){return cs(Ei(h/Y)*Y,d,Y).map(D).concat(cs(Ei(y/j)*j,b,j).map(O)).concat(cs(Ei(l/P)*P,s,P).filter(function(Z){return vn(Z%Y)>Pt}).map(T)).concat(cs(Ei(g/_)*_,f,_).filter(function(Z){return vn(Z%j)>Pt}).map(k))}return X.lines=function(){return ee().map(function(Z){return{type:"LineString",coordinates:Z}})},X.outline=function(){return{type:"Polygon",coordinates:[D(h).concat(O(b).slice(1),D(d).reverse().slice(1),O(y).reverse().slice(1))]}},X.extent=function(Z){return arguments.length?X.extentMajor(Z).extentMinor(Z):X.extentMinor()},X.extentMajor=function(Z){return arguments.length?(h=+Z[0][0],d=+Z[1][0],y=+Z[0][1],b=+Z[1][1],h>d&&(Z=h,h=d,d=Z),y>b&&(Z=y,y=b,b=Z),X.precision(W)):[[h,y],[d,b]]},X.extentMinor=function(Z){return arguments.length?(l=+Z[0][0],s=+Z[1][0],g=+Z[0][1],f=+Z[1][1],l>s&&(Z=l,l=s,s=Z),g>f&&(Z=g,g=f,f=Z),X.precision(W)):[[l,g],[s,f]]},X.step=function(Z){return arguments.length?X.stepMajor(Z).stepMinor(Z):X.stepMinor()},X.stepMajor=function(Z){return arguments.length?(Y=+Z[0],j=+Z[1],X):[Y,j]},X.stepMinor=function(Z){return arguments.length?(P=+Z[0],_=+Z[1],X):[P,_]},X.precision=function(Z){return arguments.length?(W=+Z,T=Ug(g,f,90),k=Gg(l,s,W),D=Ug(y,b,90),O=Gg(h,d,W),X):W},X.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var Kg,Xg,tf,nf,pu=s=>s,af=new hi,sf=new hi,pl={point:Ge,lineStart:Ge,lineEnd:Ge,polygonStart:function(){pl.lineStart=x0,pl.lineEnd=k0},polygonEnd:function(){pl.lineStart=pl.lineEnd=pl.point=Ge,af.add(vn(sf)),sf=new hi},result:function(){var s=af/2;return af=new hi,s}};function x0(){pl.point=C0}function C0(s,l){pl.point=Qg,Kg=tf=s,Xg=nf=l}function Qg(s,l){sf.add(nf*s-tf*l),tf=s,nf=l}function k0(){Qg(Kg,Xg)}var Jg=pl,dd=1/0,Rh=dd,fu=-dd,Nh=fu,T0={point:function(s,l){s<dd&&(dd=s),s>fu&&(fu=s),l<Rh&&(Rh=l),l>Nh&&(Nh=l)},lineStart:Ge,lineEnd:Ge,polygonStart:Ge,polygonEnd:Ge,result:function(){var s=[[dd,Rh],[fu,Nh]];return fu=Nh=-(Rh=dd=1/0),s}},Zg,em,zr,Fr,_h=T0,rf=0,of=0,gu=0,zh=0,Fh=0,ud=0,lf=0,cf=0,mu=0,gr={point:tc,lineStart:tm,lineEnd:nm,polygonStart:function(){gr.lineStart=E0,gr.lineEnd=$0},polygonEnd:function(){gr.point=tc,gr.lineStart=tm,gr.lineEnd=nm},result:function(){var s=mu?[lf/mu,cf/mu]:ud?[zh/ud,Fh/ud]:gu?[rf/gu,of/gu]:[NaN,NaN];return rf=of=gu=zh=Fh=ud=lf=cf=mu=0,s}};function tc(s,l){rf+=s,of+=l,++gu}function tm(){gr.point=A0}function A0(s,l){gr.point=S0,tc(zr=s,Fr=l)}function S0(s,l){var d=s-zr,h=l-Fr,f=Un(d*d+h*h);zh+=f*(zr+s)/2,Fh+=f*(Fr+l)/2,ud+=f,tc(zr=s,Fr=l)}function nm(){gr.point=tc}function E0(){gr.point=D0}function $0(){im(Zg,em)}function D0(s,l){gr.point=im,tc(Zg=zr=s,em=Fr=l)}function im(s,l){var d=s-zr,h=l-Fr,f=Un(d*d+h*h);zh+=f*(zr+s)/2,Fh+=f*(Fr+l)/2,ud+=f,lf+=(f=Fr*s-zr*l)*(zr+s),cf+=f*(Fr+l),mu+=3*f,tc(zr=s,Fr=l)}var am=gr;function sm(s){this._context=s}sm.prototype={_radius:4.5,pointRadius:function(s){return this._radius=s,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(s,l){switch(this._point){case 0:this._context.moveTo(s,l),this._point=1;break;case 1:this._context.lineTo(s,l);break;default:this._context.moveTo(s+this._radius,l),this._context.arc(s,l,this._radius,0,Kn)}},result:Ge};var df,rm,om,vu,bu,uf=new hi,Hh={point:Ge,lineStart:function(){Hh.point=I0},lineEnd:function(){df&&lm(rm,om),Hh.point=Ge},polygonStart:function(){df=!0},polygonEnd:function(){df=null},result:function(){var s=+uf;return uf=new hi,s}};function I0(s,l){Hh.point=lm,rm=vu=s,om=bu=l}function lm(s,l){vu-=s,bu-=l,uf.add(Un(vu*vu+bu*bu)),vu=s,bu=l}var cm=Hh;let dm,qh,um,hm;class pm{constructor(l){this._append=l==null?fm:function(d){const h=Math.floor(d);if(!(h>=0))throw new RangeError(`invalid digits: ${d}`);if(h>15)return fm;if(h!==dm){const f=10**h;dm=h,qh=function(g){let b=1;this._+=g[0];for(const y=g.length;b<y;++b)this._+=Math.round(arguments[b]*f)/f+g[b]}}return qh}(l),this._radius=4.5,this._=""}pointRadius(l){return this._radius=+l,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(l,d){switch(this._point){case 0:this._append`M${l},${d}`,this._point=1;break;case 1:this._append`L${l},${d}`;break;default:if(this._append`M${l},${d}`,this._radius!==um||this._append!==qh){const h=this._radius,f=this._;this._="",this._append`m0,${h}a${h},${h} 0 1,1 0,${-2*h}a${h},${h} 0 1,1 0,${2*h}z`,um=h,qh=this._append,hm=this._,this._=f}this._+=hm}}result(){const l=this._;return this._="",l.length?l:null}}function fm(s){let l=1;this._+=s[0];for(const d=s.length;l<d;++l)this._+=arguments[l]+s[l]}function yu(s){return function(l){var d=new hf;for(var h in s)d[h]=s[h];return d.stream=l,d}}function hf(){}function pf(s,l,d){var h=s.clipExtent&&s.clipExtent();return s.scale(150).translate([0,0]),h!=null&&s.clipExtent(null),yi(d,s.stream(_h)),l(_h.result()),h!=null&&s.clipExtent(h),s}function Vh(s,l,d){return pf(s,function(h){var f=l[1][0]-l[0][0],g=l[1][1]-l[0][1],b=Math.min(f/(h[1][0]-h[0][0]),g/(h[1][1]-h[0][1])),y=+l[0][0]+(f-b*(h[1][0]+h[0][0]))/2,T=+l[0][1]+(g-b*(h[1][1]+h[0][1]))/2;s.scale(150*b).translate([y,T])},d)}function ff(s,l,d){return Vh(s,[[0,0],l],d)}function gf(s,l,d){return pf(s,function(h){var f=+l,g=f/(h[1][0]-h[0][0]),b=(f-g*(h[1][0]+h[0][0]))/2,y=-g*h[0][1];s.scale(150*g).translate([b,y])},d)}function mf(s,l,d){return pf(s,function(h){var f=+l,g=f/(h[1][1]-h[0][1]),b=-g*h[0][0],y=(f-g*(h[1][1]+h[0][1]))/2;s.scale(150*g).translate([b,y])},d)}hf.prototype={constructor:hf,point:function(s,l){this.stream.point(s,l)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var M0=pt(30*kt);function gm(s,l){return+l?function(d,h){function f(g,b,y,T,k,D,O,P,_,Y,j,W,X,ee){var Z=O-g,K=P-b,re=Z*Z+K*K;if(re>4*h&&X--){var oe=T+Y,Ce=k+j,Ie=D+W,Te=Un(oe*oe+Ce*Ce+Ie*Ie),pe=bi(Ie/=Te),ge=vn(vn(Ie)-1)<Pt||vn(y-_)<Pt?(y+_)/2:Hi(Ce,oe),we=d(ge,pe),le=we[0],fe=we[1],xe=le-g,$e=fe-b,Re=K*xe-Z*$e;(Re*Re/re>h||vn((Z*xe+K*$e)/re-.5)>.3||T*Y+k*j+D*W<M0)&&(f(g,b,y,T,k,D,le,fe,ge,oe/=Te,Ce/=Te,Ie,X,ee),ee.point(le,fe),f(le,fe,ge,oe,Ce,Ie,O,P,_,Y,j,W,X,ee))}}return function(g){var b,y,T,k,D,O,P,_,Y,j,W,X,ee={point:Z,lineStart:K,lineEnd:oe,polygonStart:function(){g.polygonStart(),ee.lineStart=Ce},polygonEnd:function(){g.polygonEnd(),ee.lineStart=K}};function Z(pe,ge){pe=d(pe,ge),g.point(pe[0],pe[1])}function K(){_=NaN,ee.point=re,g.lineStart()}function re(pe,ge){var we=ec([pe,ge]),le=d(pe,ge);f(_,Y,P,j,W,X,_=le[0],Y=le[1],P=pe,j=we[0],W=we[1],X=we[2],16,g),g.point(_,Y)}function oe(){ee.point=Z,g.lineEnd()}function Ce(){K(),ee.point=Ie,ee.lineEnd=Te}function Ie(pe,ge){re(b=pe,ge),y=_,T=Y,k=j,D=W,O=X,ee.point=re}function Te(){f(_,Y,P,j,W,X,y,T,b,k,D,O,16,g),ee.lineEnd=oe,oe()}return ee}}(s,l):function(d){return yu({point:function(h,f){h=d(h,f),this.stream.point(h[0],h[1])}})}(s)}var L0=yu({point:function(s,l){this.stream.point(s*kt,l*kt)}});function mm(s,l,d,h,f,g){if(!g)return function(j,W,X,ee,Z){function K(re,oe){return[W+j*(re*=ee),X-j*(oe*=Z)]}return K.invert=function(re,oe){return[(re-W)/j*ee,(X-oe)/j*Z]},K}(s,l,d,h,f);var b=pt(g),y=nt(g),T=b*s,k=y*s,D=b/s,O=y/s,P=(y*d-b*l)/s,_=(y*l+b*d)/s;function Y(j,W){return[T*(j*=h)-k*(W*=f)+l,d-k*j-T*W]}return Y.invert=function(j,W){return[h*(D*j-O*W+P),f*(_-O*j-D*W)]},Y}function Hr(s){return vf(function(){return s})()}function vf(s){var l,d,h,f,g,b,y,T,k,D,O=150,P=480,_=250,Y=0,j=0,W=0,X=0,ee=0,Z=0,K=1,re=1,oe=null,Ce=Qp,Ie=null,Te=pu,pe=.5;function ge(xe){return T(xe[0]*kt,xe[1]*kt)}function we(xe){return(xe=T.invert(xe[0],xe[1]))&&[xe[0]*pn,xe[1]*pn]}function le(){var xe=mm(O,0,0,K,re,Z).apply(null,l(Y,j)),$e=mm(O,P-xe[0],_-xe[1],K,re,Z);return d=Kp(W,X,ee),y=Gp(l,$e),T=Gp(d,y),b=gm(y,pe),fe()}function fe(){return k=D=null,ge}return ge.stream=function(xe){return k&&D===xe?k:k=L0(function($e){return yu({point:function(Re,Ye){var st=$e(Re,Ye);return this.stream.point(st[0],st[1])}})}(d)(Ce(b(Te(D=xe)))))},ge.preclip=function(xe){return arguments.length?(Ce=xe,oe=void 0,fe()):Ce},ge.postclip=function(xe){return arguments.length?(Te=xe,Ie=h=f=g=null,fe()):Te},ge.clipAngle=function(xe){return arguments.length?(Ce=+xe?_g(oe=xe*kt):(oe=null,Qp),fe()):oe*pn},ge.clipExtent=function(xe){return arguments.length?(Te=xe==null?(Ie=h=f=g=null,pu):Ph(Ie=+xe[0][0],h=+xe[0][1],f=+xe[1][0],g=+xe[1][1]),fe()):Ie==null?null:[[Ie,h],[f,g]]},ge.scale=function(xe){return arguments.length?(O=+xe,le()):O},ge.translate=function(xe){return arguments.length?(P=+xe[0],_=+xe[1],le()):[P,_]},ge.center=function(xe){return arguments.length?(Y=xe[0]%360*kt,j=xe[1]%360*kt,le()):[Y*pn,j*pn]},ge.rotate=function(xe){return arguments.length?(W=xe[0]%360*kt,X=xe[1]%360*kt,ee=xe.length>2?xe[2]%360*kt:0,le()):[W*pn,X*pn,ee*pn]},ge.angle=function(xe){return arguments.length?(Z=xe%360*kt,le()):Z*pn},ge.reflectX=function(xe){return arguments.length?(K=xe?-1:1,le()):K<0},ge.reflectY=function(xe){return arguments.length?(re=xe?-1:1,le()):re<0},ge.precision=function(xe){return arguments.length?(b=gm(y,pe=xe*xe),fe()):Un(pe)},ge.fitExtent=function(xe,$e){return Vh(ge,xe,$e)},ge.fitSize=function(xe,$e){return ff(ge,xe,$e)},ge.fitWidth=function(xe,$e){return gf(ge,xe,$e)},ge.fitHeight=function(xe,$e){return mf(ge,xe,$e)},function(){return l=s.apply(this,arguments),ge.invert=l.invert&&we,le()}}function bf(s){var l=0,d=Mt/3,h=vf(s),f=h(l,d);return f.parallels=function(g){return arguments.length?h(l=g[0]*kt,d=g[1]*kt):[l*pn,d*pn]},f}function vm(s,l){var d=nt(s),h=(d+nt(l))/2;if(vn(h)<Pt)return function(y){var T=pt(y);function k(D,O){return[D*T,nt(O)/T]}return k.invert=function(D,O){return[D/T,bi(O*T)]},k}(s);var f=1+d*(2*h-d),g=Un(f)/h;function b(y,T){var k=Un(f-2*h*nt(T))/h;return[k*nt(y*=h),g-k*pt(y)]}return b.invert=function(y,T){var k=g-T,D=Hi(y,vn(k))*Zt(k);return k*h<0&&(D-=Mt*Zt(y)*Zt(k)),[D/h,bi((f-(y*y+k*k)*h*h)/(2*h))]},b}function jh(){return bf(vm).scale(155.424).center([0,33.6442])}function bm(){return jh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ym(s){return function(l,d){var h=pt(l),f=pt(d),g=s(h*f);return g===1/0?[2,0]:[g*f*nt(l),g*nt(d)]}}function wu(s){return function(l,d){var h=Un(l*l+d*d),f=s(h),g=nt(f),b=pt(f);return[Hi(l*g,h*b),bi(h&&d*g/h)]}}var yf=ym(function(s){return Un(2/(1+s))});yf.invert=wu(function(s){return 2*bi(s/2)});var wf=ym(function(s){return(s=ni(s))&&s/nt(s)});function xu(s,l){return[s,it(ka(($n+l)/2))]}function wm(s){var l,d,h,f=Hr(s),g=f.center,b=f.scale,y=f.translate,T=f.clipExtent,k=null;function D(){var O=Mt*b(),P=f(Ig(f.rotate()).invert([0,0]));return T(k==null?[[P[0]-O,P[1]-O],[P[0]+O,P[1]+O]]:s===xu?[[Math.max(P[0]-O,k),l],[Math.min(P[0]+O,d),h]]:[[k,Math.max(P[1]-O,l)],[d,Math.min(P[1]+O,h)]])}return f.scale=function(O){return arguments.length?(b(O),D()):b()},f.translate=function(O){return arguments.length?(y(O),D()):y()},f.center=function(O){return arguments.length?(g(O),D()):g()},f.clipExtent=function(O){return arguments.length?(O==null?k=l=d=h=null:(k=+O[0][0],l=+O[0][1],d=+O[1][0],h=+O[1][1]),D()):k==null?null:[[k,l],[d,h]]},D()}function Wh(s){return ka(($n+s)/2)}function xm(s,l){var d=pt(s),h=s===l?nt(s):it(d/pt(l))/it(Wh(l)/Wh(s)),f=d*Ft(Wh(s),h)/h;if(!h)return xu;function g(b,y){f>0?y<-$n+Pt&&(y=-$n+Pt):y>$n-Pt&&(y=$n-Pt);var T=f/Ft(Wh(y),h);return[T*nt(h*b),f-T*pt(h*b)]}return g.invert=function(b,y){var T=f-y,k=Zt(h)*Un(b*b+T*T),D=Hi(b,vn(T))*Zt(T);return T*h<0&&(D-=Mt*Zt(b)*Zt(T)),[D/h,2*js(Ft(f/k,1/h))-$n]},g}function Cu(s,l){return[s,l]}function Cm(s,l){var d=pt(s),h=s===l?nt(s):(d-pt(l))/(l-s),f=d/h+s;if(vn(h)<Pt)return Cu;function g(b,y){var T=f-y,k=h*b;return[T*nt(k),f-T*pt(k)]}return g.invert=function(b,y){var T=f-y,k=Hi(b,vn(T))*Zt(T);return T*h<0&&(k-=Mt*Zt(b)*Zt(T)),[k/h,f-Zt(h)*Un(b*b+T*T)]},g}wf.invert=wu(function(s){return s}),xu.invert=function(s,l){return[s,2*js(Mi(l))-$n]},Cu.invert=Cu;var ku=1.340264,Tu=-.081106,Au=893e-6,Su=.003796,Uh=Un(3)/2;function xf(s,l){var d=bi(Uh*nt(l)),h=d*d,f=h*h*h;return[s*pt(d)/(Uh*(ku+3*Tu*h+f*(7*Au+9*Su*h))),d*(ku+Tu*h+f*(Au+Su*h))]}function Cf(s,l){var d=pt(l),h=pt(s)*d;return[d*nt(s)/h,nt(l)/h]}function kf(s,l){var d=l*l,h=d*d;return[s*(.8707-.131979*d+h*(h*(.003971*d-.001529*h)-.013791)),l*(1.007226+d*(.015085+h*(.028874*d-.044475-.005916*h)))]}function Tf(s,l){return[pt(l)*nt(s),nt(l)]}function Af(s,l){var d=pt(l),h=1+pt(s)*d;return[d*nt(s)/h,nt(l)/h]}function Sf(s,l){return[it(ka(($n+l)/2)),-s]}function P0(s,l){return s.parent===l.parent?1:2}function B0(s,l){return s+l.x}function O0(s,l){return Math.max(s,l.y)}function R0(s){var l=0,d=s.children,h=d&&d.length;if(h)for(;--h>=0;)l+=d[h].value;else l=1;s.value=l}function Ef(s,l){s instanceof Map?(s=[void 0,s],l===void 0&&(l=_0)):l===void 0&&(l=N0);for(var d,h,f,g,b,y=new nc(s),T=[y];d=T.pop();)if((f=l(d.data))&&(b=(f=Array.from(f)).length))for(d.children=f,g=b-1;g>=0;--g)T.push(h=f[g]=new nc(f[g])),h.parent=d,h.depth=d.depth+1;return y.eachBefore(km)}function N0(s){return s.children}function _0(s){return Array.isArray(s)?s[1]:null}function z0(s){s.data.value!==void 0&&(s.value=s.data.value),s.data=s.data.data}function km(s){var l=0;do s.height=l;while((s=s.parent)&&s.height<++l)}function nc(s){this.data=s,this.depth=this.height=0,this.parent=null}function Gh(s){return s==null?null:Tm(s)}function Tm(s){if(typeof s!="function")throw new Error;return s}function ic(){return 0}function hd(s){return function(){return s}}xf.invert=function(s,l){for(var d,h=l,f=h*h,g=f*f*f,b=0;b<12&&(g=(f=(h-=d=(h*(ku+Tu*f+g*(Au+Su*f))-l)/(ku+3*Tu*f+g*(7*Au+9*Su*f)))*h)*f*f,!(vn(d)<Ra));++b);return[Uh*s*(ku+3*Tu*f+g*(7*Au+9*Su*f))/pt(h),bi(nt(h)/Uh)]},Cf.invert=wu(js),kf.invert=function(s,l){var d,h=l,f=25;do{var g=h*h,b=g*g;h-=d=(h*(1.007226+g*(.015085+b*(.028874*g-.044475-.005916*b)))-l)/(1.007226+g*(.045255+b*(.259866*g-.311325-.005916*11*b)))}while(vn(d)>Pt&&--f>0);return[s/(.8707+(g=h*h)*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979)),h]},Tf.invert=wu(bi),Af.invert=wu(function(s){return 2*js(s)}),Sf.invert=function(s,l){return[-l,2*js(Mi(s))-$n]},nc.prototype=Ef.prototype={constructor:nc,count:function(){return this.eachAfter(R0)},each:function(s,l){let d=-1;for(const h of this)s.call(l,h,++d,this);return this},eachAfter:function(s,l){for(var d,h,f,g=this,b=[g],y=[],T=-1;g=b.pop();)if(y.push(g),d=g.children)for(h=0,f=d.length;h<f;++h)b.push(d[h]);for(;g=y.pop();)s.call(l,g,++T,this);return this},eachBefore:function(s,l){for(var d,h,f=this,g=[f],b=-1;f=g.pop();)if(s.call(l,f,++b,this),d=f.children)for(h=d.length-1;h>=0;--h)g.push(d[h]);return this},find:function(s,l){let d=-1;for(const h of this)if(s.call(l,h,++d,this))return h},sum:function(s){return this.eachAfter(function(l){for(var d=+s(l.data)||0,h=l.children,f=h&&h.length;--f>=0;)d+=h[f].value;l.value=d})},sort:function(s){return this.eachBefore(function(l){l.children&&l.children.sort(s)})},path:function(s){for(var l=this,d=function(g,b){if(g===b)return g;var y=g.ancestors(),T=b.ancestors(),k=null;for(g=y.pop(),b=T.pop();g===b;)k=g,g=y.pop(),b=T.pop();return k}(l,s),h=[l];l!==d;)l=l.parent,h.push(l);for(var f=h.length;s!==d;)h.splice(f,0,s),s=s.parent;return h},ancestors:function(){for(var s=this,l=[s];s=s.parent;)l.push(s);return l},descendants:function(){return Array.from(this)},leaves:function(){var s=[];return this.eachBefore(function(l){l.children||s.push(l)}),s},links:function(){var s=this,l=[];return s.each(function(d){d!==s&&l.push({source:d.parent,target:d})}),l},copy:function(){return Ef(this).eachBefore(z0)},[Symbol.iterator]:function*(){var s,l,d,h,f=this,g=[f];do for(s=g.reverse(),g=[];f=s.pop();)if(yield f,l=f.children)for(d=0,h=l.length;d<h;++d)g.push(l[d]);while(g.length)}};const Am=4294967296;function $f(){let s=1;return()=>(s=(1664525*s+1013904223)%Am)/Am}function Sm(s,l){for(var d,h,f=0,g=(s=function(y,T){let k,D,O=y.length;for(;O;)D=T()*O--|0,k=y[O],y[O]=y[D],y[D]=k;return y}(Array.from(s),l)).length,b=[];f<g;)d=s[f],h&&Em(h,d)?++f:(h=H0(b=F0(b,d)),f=0);return h}function F0(s,l){var d,h;if(Df(l,s))return[l];for(d=0;d<s.length;++d)if(Yh(l,s[d])&&Df(Eu(s[d],l),s))return[s[d],l];for(d=0;d<s.length-1;++d)for(h=d+1;h<s.length;++h)if(Yh(Eu(s[d],s[h]),l)&&Yh(Eu(s[d],l),s[h])&&Yh(Eu(s[h],l),s[d])&&Df($m(s[d],s[h],l),s))return[s[d],s[h],l];throw new Error}function Yh(s,l){var d=s.r-l.r,h=l.x-s.x,f=l.y-s.y;return d<0||d*d<h*h+f*f}function Em(s,l){var d=s.r-l.r+1e-9*Math.max(s.r,l.r,1),h=l.x-s.x,f=l.y-s.y;return d>0&&d*d>h*h+f*f}function Df(s,l){for(var d=0;d<l.length;++d)if(!Em(s,l[d]))return!1;return!0}function H0(s){switch(s.length){case 1:return function(l){return{x:l.x,y:l.y,r:l.r}}(s[0]);case 2:return Eu(s[0],s[1]);case 3:return $m(s[0],s[1],s[2])}}function Eu(s,l){var d=s.x,h=s.y,f=s.r,g=l.x,b=l.y,y=l.r,T=g-d,k=b-h,D=y-f,O=Math.sqrt(T*T+k*k);return{x:(d+g+T/O*D)/2,y:(h+b+k/O*D)/2,r:(O+f+y)/2}}function $m(s,l,d){var h=s.x,f=s.y,g=s.r,b=l.x,y=l.y,T=l.r,k=d.x,D=d.y,O=d.r,P=h-b,_=h-k,Y=f-y,j=f-D,W=T-g,X=O-g,ee=h*h+f*f-g*g,Z=ee-b*b-y*y+T*T,K=ee-k*k-D*D+O*O,re=_*Y-P*j,oe=(Y*K-j*Z)/(2*re)-h,Ce=(j*W-Y*X)/re,Ie=(_*Z-P*K)/(2*re)-f,Te=(P*X-_*W)/re,pe=Ce*Ce+Te*Te-1,ge=2*(g+oe*Ce+Ie*Te),we=oe*oe+Ie*Ie-g*g,le=-(Math.abs(pe)>1e-6?(ge+Math.sqrt(ge*ge-4*pe*we))/(2*pe):we/ge);return{x:h+oe+Ce*le,y:f+Ie+Te*le,r:le}}function Dm(s,l,d){var h,f,g,b,y=s.x-l.x,T=s.y-l.y,k=y*y+T*T;k?(f=l.r+d.r,f*=f,b=s.r+d.r,f>(b*=b)?(h=(k+b-f)/(2*k),g=Math.sqrt(Math.max(0,b/k-h*h)),d.x=s.x-h*y-g*T,d.y=s.y-h*T+g*y):(h=(k+f-b)/(2*k),g=Math.sqrt(Math.max(0,f/k-h*h)),d.x=l.x+h*y-g*T,d.y=l.y+h*T+g*y)):(d.x=l.x+d.r,d.y=l.y)}function Im(s,l){var d=s.r+l.r-1e-6,h=l.x-s.x,f=l.y-s.y;return d>0&&d*d>h*h+f*f}function Mm(s){var l=s._,d=s.next._,h=l.r+d.r,f=(l.x*d.r+d.x*l.r)/h,g=(l.y*d.r+d.y*l.r)/h;return f*f+g*g}function Kh(s){this._=s,this.next=null,this.previous=null}function Lm(s,l){if(!(g=(s=function(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}(s)).length))return 0;var d,h,f,g,b,y,T,k,D,O,P;if((d=s[0]).x=0,d.y=0,!(g>1))return d.r;if(h=s[1],d.x=-h.r,h.x=d.r,h.y=0,!(g>2))return d.r+h.r;Dm(h,d,f=s[2]),d=new Kh(d),h=new Kh(h),f=new Kh(f),d.next=f.previous=h,h.next=d.previous=f,f.next=h.previous=d;e:for(T=3;T<g;++T){Dm(d._,h._,f=s[T]),f=new Kh(f),k=h.next,D=d.previous,O=h._.r,P=d._.r;do if(O<=P){if(Im(k._,f._)){h=k,d.next=h,h.previous=d,--T;continue e}O+=k._.r,k=k.next}else{if(Im(D._,f._)){(d=D).next=h,h.previous=d,--T;continue e}P+=D._.r,D=D.previous}while(k!==D.next);for(f.previous=d,f.next=h,d.next=h.previous=h=f,b=Mm(d);(f=f.next)!==h;)(y=Mm(f))<b&&(d=f,b=y);h=d.next}for(d=[h._],f=h;(f=f.next)!==h;)d.push(f._);for(f=Sm(d,l),T=0;T<g;++T)(d=s[T]).x-=f.x,d.y-=f.y;return f.r}function q0(s){return Math.sqrt(s.value)}function Pm(s){return function(l){l.children||(l.r=Math.max(0,+s(l)||0))}}function If(s,l,d){return function(h){if(f=h.children){var f,g,b,y=f.length,T=s(h)*l||0;if(T)for(g=0;g<y;++g)f[g].r+=T;if(b=Lm(f,d),T)for(g=0;g<y;++g)f[g].r-=T;h.r=b+T}}}function Bm(s){return function(l){var d=l.parent;l.r*=s,d&&(l.x=d.x+s*l.x,l.y=d.y+s*l.y)}}function Om(s){s.x0=Math.round(s.x0),s.y0=Math.round(s.y0),s.x1=Math.round(s.x1),s.y1=Math.round(s.y1)}function $u(s,l,d,h,f){for(var g,b=s.children,y=-1,T=b.length,k=s.value&&(h-l)/s.value;++y<T;)(g=b[y]).y0=d,g.y1=f,g.x0=l,g.x1=l+=g.value*k}var V0={depth:-1},Rm={},Mf={};function j0(s){return s.id}function W0(s){return s.parentId}function Nm(s){let l=s.length;if(l<2)return"";for(;--l>1&&!Lf(s,l););return s.slice(0,l)}function Lf(s,l){if(s[l]==="/"){let d=0;for(;l>0&&s[--l]==="\\";)++d;if(!(1&d))return!0}return!1}function U0(s,l){return s.parent===l.parent?1:2}function Pf(s){var l=s.children;return l?l[0]:s.t}function Bf(s){var l=s.children;return l?l[l.length-1]:s.t}function G0(s,l,d){var h=d/(l.i-s.i);l.c-=h,l.s+=d,s.c+=h,l.z+=d,l.m+=d}function Y0(s,l,d){return s.a.parent===l.parent?s.a:d}function Xh(s,l){this._=s,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=l}function Qh(s,l,d,h,f){for(var g,b=s.children,y=-1,T=b.length,k=s.value&&(f-d)/s.value;++y<T;)(g=b[y]).x0=l,g.x1=h,g.y0=d,g.y1=d+=g.value*k}Xh.prototype=Object.create(nc.prototype);var _m=(1+Math.sqrt(5))/2;function zm(s,l,d,h,f,g){for(var b,y,T,k,D,O,P,_,Y,j,W,X=[],ee=l.children,Z=0,K=0,re=ee.length,oe=l.value;Z<re;){T=f-d,k=g-h;do D=ee[K++].value;while(!D&&K<re);for(O=P=D,W=D*D*(j=Math.max(k/T,T/k)/(oe*s)),Y=Math.max(P/W,W/O);K<re;++K){if(D+=y=ee[K].value,y<O&&(O=y),y>P&&(P=y),W=D*D*j,(_=Math.max(P/W,W/O))>Y){D-=y;break}Y=_}X.push(b={value:D,dice:T<k,children:ee.slice(Z,K)}),b.dice?$u(b,d,h,f,oe?h+=k*D/oe:g):Qh(b,d,h,oe?d+=T*D/oe:f,g),oe-=D,Z=K}return X}var Fm=function s(l){function d(h,f,g,b,y){zm(l,h,f,g,b,y)}return d.ratio=function(h){return s((h=+h)>1?h:1)},d}(_m),K0=function s(l){function d(h,f,g,b,y){if((T=h._squarify)&&T.ratio===l)for(var T,k,D,O,P,_=-1,Y=T.length,j=h.value;++_<Y;){for(D=(k=T[_]).children,O=k.value=0,P=D.length;O<P;++O)k.value+=D[O].value;k.dice?$u(k,f,g,b,j?g+=(y-g)*k.value/j:y):Qh(k,f,g,j?f+=(b-f)*k.value/j:b,y),j-=k.value}else h._squarify=T=zm(l,h,f,g,b,y),T.ratio=l}return d.ratio=function(h){return s((h=+h)>1?h:1)},d}(_m);function X0(s,l,d){return(l[0]-s[0])*(d[1]-s[1])-(l[1]-s[1])*(d[0]-s[0])}function Q0(s,l){return s[0]-l[0]||s[1]-l[1]}function Hm(s){const l=s.length,d=[0,1];let h,f=2;for(h=2;h<l;++h){for(;f>1&&X0(s[d[f-2]],s[d[f-1]],s[h])<=0;)--f;d[f++]=h}return d.slice(0,f)}var ma=Math.random,J0=function s(l){function d(h,f){return h=h==null?0:+h,f=f==null?1:+f,arguments.length===1?(f=h,h=0):f-=h,function(){return l()*f+h}}return d.source=s,d}(ma),Z0=function s(l){function d(h,f){return arguments.length<2&&(f=h,h=0),h=Math.floor(h),f=Math.floor(f)-h,function(){return Math.floor(l()*f+h)}}return d.source=s,d}(ma),Of=function s(l){function d(h,f){var g,b;return h=h==null?0:+h,f=f==null?1:+f,function(){var y;if(g!=null)y=g,g=null;else do g=2*l()-1,y=2*l()-1,b=g*g+y*y;while(!b||b>1);return h+f*y*Math.sqrt(-2*Math.log(b)/b)}}return d.source=s,d}(ma),ey=function s(l){var d=Of.source(l);function h(){var f=d.apply(this,arguments);return function(){return Math.exp(f())}}return h.source=s,h}(ma),qm=function s(l){function d(h){return(h=+h)<=0?()=>0:function(){for(var f=0,g=h;g>1;--g)f+=l();return f+g*l()}}return d.source=s,d}(ma),ty=function s(l){var d=qm.source(l);function h(f){if((f=+f)==0)return l;var g=d(f);return function(){return g()/f}}return h.source=s,h}(ma),ny=function s(l){function d(h){return function(){return-Math.log1p(-l())/h}}return d.source=s,d}(ma),iy=function s(l){function d(h){if((h=+h)<0)throw new RangeError("invalid alpha");return h=1/-h,function(){return Math.pow(1-l(),h)}}return d.source=s,d}(ma),ay=function s(l){function d(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return function(){return Math.floor(l()+h)}}return d.source=s,d}(ma),Vm=function s(l){function d(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return h===0?()=>1/0:h===1?()=>1:(h=Math.log1p(-h),function(){return 1+Math.floor(Math.log1p(-l())/h)})}return d.source=s,d}(ma),Rf=function s(l){var d=Of.source(l)();function h(f,g){if((f=+f)<0)throw new RangeError("invalid k");if(f===0)return()=>0;if(g=g==null?1:+g,f===1)return()=>-Math.log1p(-l())*g;var b=(f<1?f+1:f)-1/3,y=1/(3*Math.sqrt(b)),T=f<1?()=>Math.pow(l(),1/f):()=>1;return function(){do{do var k=d(),D=1+y*k;while(D<=0);D*=D*D;var O=1-l()}while(O>=1-.0331*k*k*k*k&&Math.log(O)>=.5*k*k+b*(1-D+Math.log(D)));return b*D*T()*g}}return h.source=s,h}(ma),jm=function s(l){var d=Rf.source(l);function h(f,g){var b=d(f),y=d(g);return function(){var T=b();return T===0?0:T/(T+y())}}return h.source=s,h}(ma),Wm=function s(l){var d=Vm.source(l),h=jm.source(l);function f(g,b){return g=+g,(b=+b)>=1?()=>g:b<=0?()=>0:function(){for(var y=0,T=g,k=b;T*k>16&&T*(1-k)>16;){var D=Math.floor((T+1)*k),O=h(D,T-D+1)();O<=k?(y+=D,T-=D,k=(k-O)/(1-O)):(T=D-1,k/=O)}for(var P=k<.5,_=d(P?k:1-k),Y=_(),j=0;Y<=T;++j)Y+=_();return y+(P?j:T-j)}}return f.source=s,f}(ma),sy=function s(l){function d(h,f,g){var b;return(h=+h)==0?b=y=>-Math.log(y):(h=1/h,b=y=>Math.pow(y,h)),f=f==null?0:+f,g=g==null?1:+g,function(){return f+g*b(-Math.log1p(-l()))}}return d.source=s,d}(ma),ry=function s(l){function d(h,f){return h=h==null?0:+h,f=f==null?1:+f,function(){return h+f*Math.tan(Math.PI*l())}}return d.source=s,d}(ma),oy=function s(l){function d(h,f){return h=h==null?0:+h,f=f==null?1:+f,function(){var g=l();return h+f*Math.log(g/(1-g))}}return d.source=s,d}(ma),ly=function s(l){var d=Rf.source(l),h=Wm.source(l);function f(g){return function(){for(var b=0,y=g;y>16;){var T=Math.floor(.875*y),k=d(T)();if(k>y)return b+h(T-1,y/k)();b+=T,y-=k}for(var D=-Math.log1p(-l()),O=0;D<=y;++O)D-=Math.log1p(-l());return b+O}}return f.source=s,f}(ma);const Um=1/4294967296;function Ws(s,l){switch(arguments.length){case 0:break;case 1:this.range(s);break;default:this.range(l).domain(s)}return this}function Io(s,l){switch(arguments.length){case 0:break;case 1:typeof s=="function"?this.interpolator(s):this.range(s);break;default:this.domain(s),typeof l=="function"?this.interpolator(l):this.range(l)}return this}const Nf=Symbol("implicit");function _f(){var s=new ja,l=[],d=[],h=Nf;function f(g){let b=s.get(g);if(b===void 0){if(h!==Nf)return h;s.set(g,b=l.push(g)-1)}return d[b%d.length]}return f.domain=function(g){if(!arguments.length)return l.slice();l=[],s=new ja;for(const b of g)s.has(b)||s.set(b,l.push(b)-1);return f},f.range=function(g){return arguments.length?(d=Array.from(g),f):d.slice()},f.unknown=function(g){return arguments.length?(h=g,f):h},f.copy=function(){return _f(l,d).unknown(h)},Ws.apply(f,arguments),f}function zf(){var s,l,d=_f().unknown(void 0),h=d.domain,f=d.range,g=0,b=1,y=!1,T=0,k=0,D=.5;function O(){var P=h().length,_=b<g,Y=_?b:g,j=_?g:b;s=(j-Y)/Math.max(1,P-T+2*k),y&&(s=Math.floor(s)),Y+=(j-Y-s*(P-T))*D,l=s*(1-T),y&&(Y=Math.round(Y),l=Math.round(l));var W=cs(P).map(function(X){return Y+s*X});return f(_?W.reverse():W)}return delete d.unknown,d.domain=function(P){return arguments.length?(h(P),O()):h()},d.range=function(P){return arguments.length?([g,b]=P,g=+g,b=+b,O()):[g,b]},d.rangeRound=function(P){return[g,b]=P,g=+g,b=+b,y=!0,O()},d.bandwidth=function(){return l},d.step=function(){return s},d.round=function(P){return arguments.length?(y=!!P,O()):y},d.padding=function(P){return arguments.length?(T=Math.min(1,k=+P),O()):T},d.paddingInner=function(P){return arguments.length?(T=Math.min(1,P),O()):T},d.paddingOuter=function(P){return arguments.length?(k=+P,O()):k},d.align=function(P){return arguments.length?(D=Math.max(0,Math.min(1,P)),O()):D},d.copy=function(){return zf(h(),[g,b]).round(y).paddingInner(T).paddingOuter(k).align(D)},Ws.apply(O(),arguments)}function Gm(s){var l=s.copy;return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=function(){return Gm(l())},s}function Jh(s){return+s}var Ym=[0,1];function Fa(s){return s}function Ff(s,l){return(l-=s=+s)?function(d){return(d-s)/l}:function(d){return function(){return d}}(isNaN(l)?NaN:.5)}function cy(s,l,d){var h=s[0],f=s[1],g=l[0],b=l[1];return f<h?(h=Ff(f,h),g=d(b,g)):(h=Ff(h,f),g=d(g,b)),function(y){return g(h(y))}}function dy(s,l,d){var h=Math.min(s.length,l.length)-1,f=new Array(h),g=new Array(h),b=-1;for(s[h]<s[0]&&(s=s.slice().reverse(),l=l.slice().reverse());++b<h;)f[b]=Ff(s[b],s[b+1]),g[b]=d(l[b],l[b+1]);return function(y){var T=qa(s,y,1,h)-1;return g[T](f[T](y))}}function Du(s,l){return l.domain(s.domain()).range(s.range()).interpolate(s.interpolate()).clamp(s.clamp()).unknown(s.unknown())}function Zh(){var s,l,d,h,f,g,b=Ym,y=Ym,T=Pa,k=Fa;function D(){var P=Math.min(b.length,y.length);return k!==Fa&&(k=function(_,Y){var j;return _>Y&&(j=_,_=Y,Y=j),function(W){return Math.max(_,Math.min(Y,W))}}(b[0],b[P-1])),h=P>2?dy:cy,f=g=null,O}function O(P){return P==null||isNaN(P=+P)?d:(f||(f=h(b.map(s),y,T)))(s(k(P)))}return O.invert=function(P){return k(l((g||(g=h(y,b.map(s),zn)))(P)))},O.domain=function(P){return arguments.length?(b=Array.from(P,Jh),D()):b.slice()},O.range=function(P){return arguments.length?(y=Array.from(P),D()):y.slice()},O.rangeRound=function(P){return y=Array.from(P),T=pa,D()},O.clamp=function(P){return arguments.length?(k=!!P||Fa,D()):k!==Fa},O.interpolate=function(P){return arguments.length?(T=P,D()):T},O.unknown=function(P){return arguments.length?(d=P,O):d},function(P,_){return s=P,l=_,D()}}function Hf(){return Zh()(Fa,Fa)}function Km(s,l,d,h){var f,g=Hn(s,l,d);switch((h=Qe(h??",f")).type){case"s":var b=Math.max(Math.abs(s),Math.abs(l));return h.precision!=null||isNaN(f=_i(g,b))||(h.precision=f),B.formatPrefix(h,b);case"":case"e":case"g":case"p":case"r":h.precision!=null||isNaN(f=Ii(g,Math.max(Math.abs(s),Math.abs(l))))||(h.precision=f-(h.type==="e"));break;case"f":case"%":h.precision!=null||isNaN(f=Ca(g))||(h.precision=f-2*(h.type==="%"))}return B.format(h)}function fl(s){var l=s.domain;return s.ticks=function(d){var h=l();return Gt(h[0],h[h.length-1],d??10)},s.tickFormat=function(d,h){var f=l();return Km(f[0],f[f.length-1],d??10,h)},s.nice=function(d){d==null&&(d=10);var h,f,g=l(),b=0,y=g.length-1,T=g[b],k=g[y],D=10;for(k<T&&(f=T,T=k,k=f,f=b,b=y,y=f);D-- >0;){if((f=Es(T,k,d))===h)return g[b]=T,g[y]=k,l(g);if(f>0)T=Math.floor(T/f)*f,k=Math.ceil(k/f)*f;else{if(!(f<0))break;T=Math.ceil(T*f)/f,k=Math.floor(k*f)/f}h=f}return s},s}function Xm(s,l){var d,h=0,f=(s=s.slice()).length-1,g=s[h],b=s[f];return b<g&&(d=h,h=f,f=d,d=g,g=b,b=d),s[h]=l.floor(g),s[f]=l.ceil(b),s}function Qm(s){return Math.log(s)}function Jm(s){return Math.exp(s)}function uy(s){return-Math.log(-s)}function hy(s){return-Math.exp(-s)}function py(s){return isFinite(s)?+("1e"+s):s<0?0:s}function Zm(s){return(l,d)=>-s(-l,d)}function qf(s){const l=s(Qm,Jm),d=l.domain;let h,f,g=10;function b(){return h=function(y){return y===Math.E?Math.log:y===10&&Math.log10||y===2&&Math.log2||(y=Math.log(y),T=>Math.log(T)/y)}(g),f=function(y){return y===10?py:y===Math.E?Math.exp:T=>Math.pow(y,T)}(g),d()[0]<0?(h=Zm(h),f=Zm(f),s(uy,hy)):s(Qm,Jm),l}return l.base=function(y){return arguments.length?(g=+y,b()):g},l.domain=function(y){return arguments.length?(d(y),b()):d()},l.ticks=y=>{const T=d();let k=T[0],D=T[T.length-1];const O=D<k;O&&([k,D]=[D,k]);let P,_,Y=h(k),j=h(D);const W=y==null?10:+y;let X=[];if(!(g%1)&&j-Y<W){if(Y=Math.floor(Y),j=Math.ceil(j),k>0){for(;Y<=j;++Y)for(P=1;P<g;++P)if(_=Y<0?P/f(-Y):P*f(Y),!(_<k)){if(_>D)break;X.push(_)}}else for(;Y<=j;++Y)for(P=g-1;P>=1;--P)if(_=Y>0?P/f(-Y):P*f(Y),!(_<k)){if(_>D)break;X.push(_)}2*X.length<W&&(X=Gt(k,D,W))}else X=Gt(Y,j,Math.min(j-Y,W)).map(f);return O?X.reverse():X},l.tickFormat=(y,T)=>{if(y==null&&(y=10),T==null&&(T=g===10?"s":","),typeof T!="function"&&(g%1||(T=Qe(T)).precision!=null||(T.trim=!0),T=B.format(T)),y===1/0)return T;const k=Math.max(1,g*y/l.ticks().length);return D=>{let O=D/f(Math.round(h(D)));return O*g<g-.5&&(O*=g),O<=k?T(D):""}},l.nice=()=>d(Xm(d(),{floor:y=>f(Math.floor(h(y))),ceil:y=>f(Math.ceil(h(y)))})),l}function ev(s){return function(l){return Math.sign(l)*Math.log1p(Math.abs(l/s))}}function tv(s){return function(l){return Math.sign(l)*Math.expm1(Math.abs(l))*s}}function Vf(s){var l=1,d=s(ev(l),tv(l));return d.constant=function(h){return arguments.length?s(ev(l=+h),tv(l)):l},fl(d)}function nv(s){return function(l){return l<0?-Math.pow(-l,s):Math.pow(l,s)}}function fy(s){return s<0?-Math.sqrt(-s):Math.sqrt(s)}function gy(s){return s<0?-s*s:s*s}function jf(s){var l=s(Fa,Fa),d=1;function h(){return d===1?s(Fa,Fa):d===.5?s(fy,gy):s(nv(d),nv(1/d))}return l.exponent=function(f){return arguments.length?(d=+f,h()):d},fl(l)}function Wf(){var s=jf(Zh());return s.copy=function(){return Du(s,Wf()).exponent(s.exponent())},Ws.apply(s,arguments),s}function iv(s){return Math.sign(s)*s*s}function my(s){return Math.sign(s)*Math.sqrt(Math.abs(s))}const Uf=new Date,Gf=new Date;function qi(s,l,d,h){function f(g){return s(g=arguments.length===0?new Date:new Date(+g)),g}return f.floor=g=>(s(g=new Date(+g)),g),f.ceil=g=>(s(g=new Date(g-1)),l(g,1),s(g),g),f.round=g=>{const b=f(g),y=f.ceil(g);return g-b<y-g?b:y},f.offset=(g,b)=>(l(g=new Date(+g),b==null?1:Math.floor(b)),g),f.range=(g,b,y)=>{const T=[];if(g=f.ceil(g),y=y==null?1:Math.floor(y),!(g<b&&y>0))return T;let k;do T.push(k=new Date(+g)),l(g,y),s(g);while(k<g&&g<b);return T},f.filter=g=>qi(b=>{if(b>=b)for(;s(b),!g(b);)b.setTime(b-1)},(b,y)=>{if(b>=b)if(y<0)for(;++y<=0;)for(;l(b,-1),!g(b););else for(;--y>=0;)for(;l(b,1),!g(b););}),d&&(f.count=(g,b)=>(Uf.setTime(+g),Gf.setTime(+b),s(Uf),s(Gf),Math.floor(d(Uf,Gf))),f.every=g=>(g=Math.floor(g),isFinite(g)&&g>0?g>1?f.filter(h?b=>h(b)%g==0:b=>f.count(0,b)%g==0):f:null)),f}const pd=qi(()=>{},(s,l)=>{s.setTime(+s+l)},(s,l)=>l-s);pd.every=s=>(s=Math.floor(s),isFinite(s)&&s>0?s>1?qi(l=>{l.setTime(Math.floor(l/s)*s)},(l,d)=>{l.setTime(+l+d*s)},(l,d)=>(d-l)/s):pd:null);const av=pd.range,Iu=1e3,gl=6e4,Mu=36e5,Lu=864e5,Yf=6048e5,vy=2592e6,Kf=31536e6,Mo=qi(s=>{s.setTime(s-s.getMilliseconds())},(s,l)=>{s.setTime(+s+l*Iu)},(s,l)=>(l-s)/Iu,s=>s.getUTCSeconds()),sv=Mo.range,ep=qi(s=>{s.setTime(s-s.getMilliseconds()-s.getSeconds()*Iu)},(s,l)=>{s.setTime(+s+l*gl)},(s,l)=>(l-s)/gl,s=>s.getMinutes()),by=ep.range,tp=qi(s=>{s.setUTCSeconds(0,0)},(s,l)=>{s.setTime(+s+l*gl)},(s,l)=>(l-s)/gl,s=>s.getUTCMinutes()),yy=tp.range,np=qi(s=>{s.setTime(s-s.getMilliseconds()-s.getSeconds()*Iu-s.getMinutes()*gl)},(s,l)=>{s.setTime(+s+l*Mu)},(s,l)=>(l-s)/Mu,s=>s.getHours()),wy=np.range,ip=qi(s=>{s.setUTCMinutes(0,0,0)},(s,l)=>{s.setTime(+s+l*Mu)},(s,l)=>(l-s)/Mu,s=>s.getUTCHours()),xy=ip.range,fd=qi(s=>s.setHours(0,0,0,0),(s,l)=>s.setDate(s.getDate()+l),(s,l)=>(l-s-(l.getTimezoneOffset()-s.getTimezoneOffset())*gl)/Lu,s=>s.getDate()-1),Cy=fd.range,Pu=qi(s=>{s.setUTCHours(0,0,0,0)},(s,l)=>{s.setUTCDate(s.getUTCDate()+l)},(s,l)=>(l-s)/Lu,s=>s.getUTCDate()-1),ky=Pu.range,Xf=qi(s=>{s.setUTCHours(0,0,0,0)},(s,l)=>{s.setUTCDate(s.getUTCDate()+l)},(s,l)=>(l-s)/Lu,s=>Math.floor(s/Lu)),Ty=Xf.range;function ac(s){return qi(l=>{l.setDate(l.getDate()-(l.getDay()+7-s)%7),l.setHours(0,0,0,0)},(l,d)=>{l.setDate(l.getDate()+7*d)},(l,d)=>(d-l-(d.getTimezoneOffset()-l.getTimezoneOffset())*gl)/Yf)}const gd=ac(0),Bu=ac(1),rv=ac(2),ov=ac(3),sc=ac(4),lv=ac(5),cv=ac(6),dv=gd.range,Ay=Bu.range,Sy=rv.range,Ey=ov.range,$y=sc.range,Dy=lv.range,Iy=cv.range;function rc(s){return qi(l=>{l.setUTCDate(l.getUTCDate()-(l.getUTCDay()+7-s)%7),l.setUTCHours(0,0,0,0)},(l,d)=>{l.setUTCDate(l.getUTCDate()+7*d)},(l,d)=>(d-l)/Yf)}const md=rc(0),Ou=rc(1),uv=rc(2),hv=rc(3),oc=rc(4),pv=rc(5),fv=rc(6),gv=md.range,My=Ou.range,Ly=uv.range,Py=hv.range,By=oc.range,Oy=pv.range,Ry=fv.range,ap=qi(s=>{s.setDate(1),s.setHours(0,0,0,0)},(s,l)=>{s.setMonth(s.getMonth()+l)},(s,l)=>l.getMonth()-s.getMonth()+12*(l.getFullYear()-s.getFullYear()),s=>s.getMonth()),Ny=ap.range,sp=qi(s=>{s.setUTCDate(1),s.setUTCHours(0,0,0,0)},(s,l)=>{s.setUTCMonth(s.getUTCMonth()+l)},(s,l)=>l.getUTCMonth()-s.getUTCMonth()+12*(l.getUTCFullYear()-s.getUTCFullYear()),s=>s.getUTCMonth()),_y=sp.range,qr=qi(s=>{s.setMonth(0,1),s.setHours(0,0,0,0)},(s,l)=>{s.setFullYear(s.getFullYear()+l)},(s,l)=>l.getFullYear()-s.getFullYear(),s=>s.getFullYear());qr.every=s=>isFinite(s=Math.floor(s))&&s>0?qi(l=>{l.setFullYear(Math.floor(l.getFullYear()/s)*s),l.setMonth(0,1),l.setHours(0,0,0,0)},(l,d)=>{l.setFullYear(l.getFullYear()+d*s)}):null;const zy=qr.range,Vr=qi(s=>{s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,l)=>{s.setUTCFullYear(s.getUTCFullYear()+l)},(s,l)=>l.getUTCFullYear()-s.getUTCFullYear(),s=>s.getUTCFullYear());Vr.every=s=>isFinite(s=Math.floor(s))&&s>0?qi(l=>{l.setUTCFullYear(Math.floor(l.getUTCFullYear()/s)*s),l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},(l,d)=>{l.setUTCFullYear(l.getUTCFullYear()+d*s)}):null;const Fy=Vr.range;function mv(s,l,d,h,f,g){const b=[[Mo,1,Iu],[Mo,5,5e3],[Mo,15,15e3],[Mo,30,3e4],[g,1,gl],[g,5,3e5],[g,15,9e5],[g,30,18e5],[f,1,Mu],[f,3,108e5],[f,6,216e5],[f,12,432e5],[h,1,Lu],[h,2,1728e5],[d,1,Yf],[l,1,vy],[l,3,7776e6],[s,1,Kf]];function y(T,k,D){const O=Math.abs(k-T)/D,P=Wr(([,,j])=>j).right(b,O);if(P===b.length)return s.every(Hn(T/Kf,k/Kf,D));if(P===0)return pd.every(Math.max(Hn(T,k,D),1));const[_,Y]=b[O/b[P-1][2]<b[P][2]/O?P-1:P];return _.every(Y)}return[function(T,k,D){const O=k<T;O&&([T,k]=[k,T]);const P=D&&typeof D.range=="function"?D:y(T,k,D),_=P?P.range(T,+k+1):[];return O?_.reverse():_},y]}const[vv,bv]=mv(Vr,sp,md,Xf,ip,tp),[yv,wv]=mv(qr,ap,gd,fd,np,ep);function Qf(s){if(0<=s.y&&s.y<100){var l=new Date(-1,s.m,s.d,s.H,s.M,s.S,s.L);return l.setFullYear(s.y),l}return new Date(s.y,s.m,s.d,s.H,s.M,s.S,s.L)}function Jf(s){if(0<=s.y&&s.y<100){var l=new Date(Date.UTC(-1,s.m,s.d,s.H,s.M,s.S,s.L));return l.setUTCFullYear(s.y),l}return new Date(Date.UTC(s.y,s.m,s.d,s.H,s.M,s.S,s.L))}function Ru(s,l,d){return{y:s,m:l,d,H:0,M:0,S:0,L:0}}function xv(s){var l=s.dateTime,d=s.date,h=s.time,f=s.periods,g=s.days,b=s.shortDays,y=s.months,T=s.shortMonths,k=Nu(f),D=_u(f),O=Nu(g),P=_u(g),_=Nu(b),Y=_u(b),j=Nu(y),W=_u(y),X=Nu(T),ee=_u(T),Z={a:function(Te){return b[Te.getDay()]},A:function(Te){return g[Te.getDay()]},b:function(Te){return T[Te.getMonth()]},B:function(Te){return y[Te.getMonth()]},c:null,d:Ev,e:Ev,f:c1,g:y1,G:x1,H:r1,I:o1,j:l1,L:$v,m:d1,M:u1,p:function(Te){return f[+(Te.getHours()>=12)]},q:function(Te){return 1+~~(Te.getMonth()/3)},Q:Bv,s:Ov,S:h1,u:p1,U:f1,V:g1,w:m1,W:v1,x:null,X:null,y:b1,Y:w1,Z:C1,"%":Pv},K={a:function(Te){return b[Te.getUTCDay()]},A:function(Te){return g[Te.getUTCDay()]},b:function(Te){return T[Te.getUTCMonth()]},B:function(Te){return y[Te.getUTCMonth()]},c:null,d:Iv,e:Iv,f:S1,g:R1,G:_1,H:k1,I:T1,j:A1,L:Mv,m:E1,M:$1,p:function(Te){return f[+(Te.getUTCHours()>=12)]},q:function(Te){return 1+~~(Te.getUTCMonth()/3)},Q:Bv,s:Ov,S:D1,u:I1,U:M1,V:L1,w:P1,W:B1,x:null,X:null,y:O1,Y:N1,Z:z1,"%":Pv},re={a:function(Te,pe,ge){var we=_.exec(pe.slice(ge));return we?(Te.w=Y.get(we[0].toLowerCase()),ge+we[0].length):-1},A:function(Te,pe,ge){var we=O.exec(pe.slice(ge));return we?(Te.w=P.get(we[0].toLowerCase()),ge+we[0].length):-1},b:function(Te,pe,ge){var we=X.exec(pe.slice(ge));return we?(Te.m=ee.get(we[0].toLowerCase()),ge+we[0].length):-1},B:function(Te,pe,ge){var we=j.exec(pe.slice(ge));return we?(Te.m=W.get(we[0].toLowerCase()),ge+we[0].length):-1},c:function(Te,pe,ge){return Ie(Te,l,pe,ge)},d:Av,e:Av,f:n1,g:Tv,G:kv,H:Sv,I:Sv,j:Jy,L:t1,m:Qy,M:Zy,p:function(Te,pe,ge){var we=k.exec(pe.slice(ge));return we?(Te.p=D.get(we[0].toLowerCase()),ge+we[0].length):-1},q:Xy,Q:a1,s:s1,S:e1,u:Wy,U:Uy,V:Gy,w:jy,W:Yy,x:function(Te,pe,ge){return Ie(Te,d,pe,ge)},X:function(Te,pe,ge){return Ie(Te,h,pe,ge)},y:Tv,Y:kv,Z:Ky,"%":i1};function oe(Te,pe){return function(ge){var we,le,fe,xe=[],$e=-1,Re=0,Ye=Te.length;for(ge instanceof Date||(ge=new Date(+ge));++$e<Ye;)Te.charCodeAt($e)===37&&(xe.push(Te.slice(Re,$e)),(le=Cv[we=Te.charAt(++$e)])!=null?we=Te.charAt(++$e):le=we==="e"?" ":"0",(fe=pe[we])&&(we=fe(ge,le)),xe.push(we),Re=$e+1);return xe.push(Te.slice(Re,$e)),xe.join("")}}function Ce(Te,pe){return function(ge){var we,le,fe=Ru(1900,void 0,1);if(Ie(fe,Te,ge+="",0)!=ge.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(1e3*fe.s+("L"in fe?fe.L:0));if(pe&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+12*fe.p),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(le=(we=Jf(Ru(fe.y,0,1))).getUTCDay(),we=le>4||le===0?Ou.ceil(we):Ou(we),we=Pu.offset(we,7*(fe.V-1)),fe.y=we.getUTCFullYear(),fe.m=we.getUTCMonth(),fe.d=we.getUTCDate()+(fe.w+6)%7):(le=(we=Qf(Ru(fe.y,0,1))).getDay(),we=le>4||le===0?Bu.ceil(we):Bu(we),we=fd.offset(we,7*(fe.V-1)),fe.y=we.getFullYear(),fe.m=we.getMonth(),fe.d=we.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),le="Z"in fe?Jf(Ru(fe.y,0,1)).getUTCDay():Qf(Ru(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+7*fe.W-(le+5)%7:fe.w+7*fe.U-(le+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,Jf(fe)):Qf(fe)}}function Ie(Te,pe,ge,we){for(var le,fe,xe=0,$e=pe.length,Re=ge.length;xe<$e;){if(we>=Re)return-1;if((le=pe.charCodeAt(xe++))===37){if(le=pe.charAt(xe++),!(fe=re[le in Cv?pe.charAt(xe++):le])||(we=fe(Te,ge,we))<0)return-1}else if(le!=ge.charCodeAt(we++))return-1}return we}return Z.x=oe(d,Z),Z.X=oe(h,Z),Z.c=oe(l,Z),K.x=oe(d,K),K.X=oe(h,K),K.c=oe(l,K),{format:function(Te){var pe=oe(Te+="",Z);return pe.toString=function(){return Te},pe},parse:function(Te){var pe=Ce(Te+="",!1);return pe.toString=function(){return Te},pe},utcFormat:function(Te){var pe=oe(Te+="",K);return pe.toString=function(){return Te},pe},utcParse:function(Te){var pe=Ce(Te+="",!0);return pe.toString=function(){return Te},pe}}}var vd,Cv={"-":"",_:" ",0:"0"},oa=/^\s*\d+/,Hy=/^%/,qy=/[\\^$*+?|[\]().{}]/g;function Fn(s,l,d){var h=s<0?"-":"",f=(h?-s:s)+"",g=f.length;return h+(g<d?new Array(d-g+1).join(l)+f:f)}function Vy(s){return s.replace(qy,"\\$&")}function Nu(s){return new RegExp("^(?:"+s.map(Vy).join("|")+")","i")}function _u(s){return new Map(s.map((l,d)=>[l.toLowerCase(),d]))}function jy(s,l,d){var h=oa.exec(l.slice(d,d+1));return h?(s.w=+h[0],d+h[0].length):-1}function Wy(s,l,d){var h=oa.exec(l.slice(d,d+1));return h?(s.u=+h[0],d+h[0].length):-1}function Uy(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.U=+h[0],d+h[0].length):-1}function Gy(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.V=+h[0],d+h[0].length):-1}function Yy(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.W=+h[0],d+h[0].length):-1}function kv(s,l,d){var h=oa.exec(l.slice(d,d+4));return h?(s.y=+h[0],d+h[0].length):-1}function Tv(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.y=+h[0]+(+h[0]>68?1900:2e3),d+h[0].length):-1}function Ky(s,l,d){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(l.slice(d,d+6));return h?(s.Z=h[1]?0:-(h[2]+(h[3]||"00")),d+h[0].length):-1}function Xy(s,l,d){var h=oa.exec(l.slice(d,d+1));return h?(s.q=3*h[0]-3,d+h[0].length):-1}function Qy(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.m=h[0]-1,d+h[0].length):-1}function Av(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.d=+h[0],d+h[0].length):-1}function Jy(s,l,d){var h=oa.exec(l.slice(d,d+3));return h?(s.m=0,s.d=+h[0],d+h[0].length):-1}function Sv(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.H=+h[0],d+h[0].length):-1}function Zy(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.M=+h[0],d+h[0].length):-1}function e1(s,l,d){var h=oa.exec(l.slice(d,d+2));return h?(s.S=+h[0],d+h[0].length):-1}function t1(s,l,d){var h=oa.exec(l.slice(d,d+3));return h?(s.L=+h[0],d+h[0].length):-1}function n1(s,l,d){var h=oa.exec(l.slice(d,d+6));return h?(s.L=Math.floor(h[0]/1e3),d+h[0].length):-1}function i1(s,l,d){var h=Hy.exec(l.slice(d,d+1));return h?d+h[0].length:-1}function a1(s,l,d){var h=oa.exec(l.slice(d));return h?(s.Q=+h[0],d+h[0].length):-1}function s1(s,l,d){var h=oa.exec(l.slice(d));return h?(s.s=+h[0],d+h[0].length):-1}function Ev(s,l){return Fn(s.getDate(),l,2)}function r1(s,l){return Fn(s.getHours(),l,2)}function o1(s,l){return Fn(s.getHours()%12||12,l,2)}function l1(s,l){return Fn(1+fd.count(qr(s),s),l,3)}function $v(s,l){return Fn(s.getMilliseconds(),l,3)}function c1(s,l){return $v(s,l)+"000"}function d1(s,l){return Fn(s.getMonth()+1,l,2)}function u1(s,l){return Fn(s.getMinutes(),l,2)}function h1(s,l){return Fn(s.getSeconds(),l,2)}function p1(s){var l=s.getDay();return l===0?7:l}function f1(s,l){return Fn(gd.count(qr(s)-1,s),l,2)}function Dv(s){var l=s.getDay();return l>=4||l===0?sc(s):sc.ceil(s)}function g1(s,l){return s=Dv(s),Fn(sc.count(qr(s),s)+(qr(s).getDay()===4),l,2)}function m1(s){return s.getDay()}function v1(s,l){return Fn(Bu.count(qr(s)-1,s),l,2)}function b1(s,l){return Fn(s.getFullYear()%100,l,2)}function y1(s,l){return Fn((s=Dv(s)).getFullYear()%100,l,2)}function w1(s,l){return Fn(s.getFullYear()%1e4,l,4)}function x1(s,l){var d=s.getDay();return Fn((s=d>=4||d===0?sc(s):sc.ceil(s)).getFullYear()%1e4,l,4)}function C1(s){var l=s.getTimezoneOffset();return(l>0?"-":(l*=-1,"+"))+Fn(l/60|0,"0",2)+Fn(l%60,"0",2)}function Iv(s,l){return Fn(s.getUTCDate(),l,2)}function k1(s,l){return Fn(s.getUTCHours(),l,2)}function T1(s,l){return Fn(s.getUTCHours()%12||12,l,2)}function A1(s,l){return Fn(1+Pu.count(Vr(s),s),l,3)}function Mv(s,l){return Fn(s.getUTCMilliseconds(),l,3)}function S1(s,l){return Mv(s,l)+"000"}function E1(s,l){return Fn(s.getUTCMonth()+1,l,2)}function $1(s,l){return Fn(s.getUTCMinutes(),l,2)}function D1(s,l){return Fn(s.getUTCSeconds(),l,2)}function I1(s){var l=s.getUTCDay();return l===0?7:l}function M1(s,l){return Fn(md.count(Vr(s)-1,s),l,2)}function Lv(s){var l=s.getUTCDay();return l>=4||l===0?oc(s):oc.ceil(s)}function L1(s,l){return s=Lv(s),Fn(oc.count(Vr(s),s)+(Vr(s).getUTCDay()===4),l,2)}function P1(s){return s.getUTCDay()}function B1(s,l){return Fn(Ou.count(Vr(s)-1,s),l,2)}function O1(s,l){return Fn(s.getUTCFullYear()%100,l,2)}function R1(s,l){return Fn((s=Lv(s)).getUTCFullYear()%100,l,2)}function N1(s,l){return Fn(s.getUTCFullYear()%1e4,l,4)}function _1(s,l){var d=s.getUTCDay();return Fn((s=d>=4||d===0?oc(s):oc.ceil(s)).getUTCFullYear()%1e4,l,4)}function z1(){return"+0000"}function Pv(){return"%"}function Bv(s){return+s}function Ov(s){return Math.floor(+s/1e3)}function Rv(s){return vd=xv(s),B.timeFormat=vd.format,B.timeParse=vd.parse,B.utcFormat=vd.utcFormat,B.utcParse=vd.utcParse,vd}B.timeFormat=void 0,B.timeParse=void 0,B.utcFormat=void 0,B.utcParse=void 0,Rv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Nv="%Y-%m-%dT%H:%M:%S.%LZ",F1=Date.prototype.toISOString?function(s){return s.toISOString()}:B.utcFormat(Nv),H1=F1,q1=+new Date("2000-01-01T00:00:00.000Z")?function(s){var l=new Date(s);return isNaN(l)?null:l}:B.utcParse(Nv),V1=q1;function j1(s){return new Date(s)}function W1(s){return s instanceof Date?+s:+new Date(+s)}function Zf(s,l,d,h,f,g,b,y,T,k){var D=Hf(),O=D.invert,P=D.domain,_=k(".%L"),Y=k(":%S"),j=k("%I:%M"),W=k("%I %p"),X=k("%a %d"),ee=k("%b %d"),Z=k("%B"),K=k("%Y");function re(oe){return(T(oe)<oe?_:y(oe)<oe?Y:b(oe)<oe?j:g(oe)<oe?W:h(oe)<oe?f(oe)<oe?X:ee:d(oe)<oe?Z:K)(oe)}return D.invert=function(oe){return new Date(O(oe))},D.domain=function(oe){return arguments.length?P(Array.from(oe,W1)):P().map(j1)},D.ticks=function(oe){var Ce=P();return s(Ce[0],Ce[Ce.length-1],oe??10)},D.tickFormat=function(oe,Ce){return Ce==null?re:k(Ce)},D.nice=function(oe){var Ce=P();return oe&&typeof oe.range=="function"||(oe=l(Ce[0],Ce[Ce.length-1],oe??10)),oe?P(Xm(Ce,oe)):D},D.copy=function(){return Du(D,Zf(s,l,d,h,f,g,b,y,T,k))},D}function rp(){var s,l,d,h,f,g=0,b=1,y=Fa,T=!1;function k(O){return O==null||isNaN(O=+O)?f:y(d===0?.5:(O=(h(O)-s)*d,T?Math.max(0,Math.min(1,O)):O))}function D(O){return function(P){var _,Y;return arguments.length?([_,Y]=P,y=O(_,Y),k):[y(0),y(1)]}}return k.domain=function(O){return arguments.length?([g,b]=O,s=h(g=+g),l=h(b=+b),d=s===l?0:1/(l-s),k):[g,b]},k.clamp=function(O){return arguments.length?(T=!!O,k):T},k.interpolator=function(O){return arguments.length?(y=O,k):y},k.range=D(Pa),k.rangeRound=D(pa),k.unknown=function(O){return arguments.length?(f=O,k):f},function(O){return h=O,s=O(g),l=O(b),d=s===l?0:1/(l-s),k}}function ml(s,l){return l.domain(s.domain()).interpolator(s.interpolator()).clamp(s.clamp()).unknown(s.unknown())}function eg(){var s=jf(rp());return s.copy=function(){return ml(s,eg()).exponent(s.exponent())},Io.apply(s,arguments)}function op(){var s,l,d,h,f,g,b,y=0,T=.5,k=1,D=1,O=Fa,P=!1;function _(j){return isNaN(j=+j)?b:(j=.5+((j=+g(j))-l)*(D*j<D*l?h:f),O(P?Math.max(0,Math.min(1,j)):j))}function Y(j){return function(W){var X,ee,Z;return arguments.length?([X,ee,Z]=W,O=Ld(j,[X,ee,Z]),_):[O(0),O(.5),O(1)]}}return _.domain=function(j){return arguments.length?([y,T,k]=j,s=g(y=+y),l=g(T=+T),d=g(k=+k),h=s===l?0:.5/(l-s),f=l===d?0:.5/(d-l),D=l<s?-1:1,_):[y,T,k]},_.clamp=function(j){return arguments.length?(P=!!j,_):P},_.interpolator=function(j){return arguments.length?(O=j,_):O},_.range=Y(Pa),_.rangeRound=Y(pa),_.unknown=function(j){return arguments.length?(b=j,_):b},function(j){return g=j,s=j(y),l=j(T),d=j(k),h=s===l?0:.5/(l-s),f=l===d?0:.5/(d-l),D=l<s?-1:1,_}}function tg(){var s=jf(op());return s.copy=function(){return ml(s,tg()).exponent(s.exponent())},Io.apply(s,arguments)}function gn(s){for(var l=s.length/6|0,d=new Array(l),h=0;h<l;)d[h]="#"+s.slice(6*h,6*++h);return d}var U1=gn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),G1=gn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Y1=gn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),K1=gn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X1=gn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Q1=gn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),J1=gn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Z1=gn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ew=gn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),tw=gn("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ii=s=>Lt(s[s.length-1]),_v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(gn),nw=ii(_v),zv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(gn),iw=ii(zv),Fv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(gn),aw=ii(Fv),Hv=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(gn),sw=ii(Hv),qv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(gn),rw=ii(qv),Vv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(gn),ow=ii(Vv),jv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(gn),lw=ii(jv),Wv=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(gn),cw=ii(Wv),Uv=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gn),dw=ii(Uv),Gv=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(gn),uw=ii(Gv),Yv=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(gn),hw=ii(Yv),Kv=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(gn),pw=ii(Kv),Xv=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(gn),fw=ii(Xv),Qv=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(gn),gw=ii(Qv),Jv=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(gn),mw=ii(Jv),Zv=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(gn),vw=ii(Zv),eb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(gn),bw=ii(eb),tb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(gn),yw=ii(tb),nb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(gn),ww=ii(nb),ib=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(gn),xw=ii(ib),ab=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(gn),Cw=ii(ab),sb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(gn),kw=ii(sb),rb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(gn),Tw=ii(rb),ob=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(gn),Aw=ii(ob),lb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(gn),Sw=ii(lb),cb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(gn),Ew=ii(cb),db=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(gn),$w=ii(db),Dw=Ri(Ae(300,.5,0),Ae(-240,.5,1)),Iw=Ri(Ae(-100,.75,.35),Ae(80,1.5,.8)),Mw=Ri(Ae(260,.75,.35),Ae(80,1.5,.8)),lp=Ae(),cp=jn(),Lw=Math.PI/3,Pw=2*Math.PI/3;function dp(s){var l=s.length;return function(d){return s[Math.max(0,Math.min(l-1,Math.floor(d*l)))]}}var Bw=dp(gn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ow=dp(gn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Rw=dp(gn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Nw=dp(gn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ln(s){return function(){return s}}const ub=Math.abs,Ta=Math.atan2,Lo=Math.cos,_w=Math.max,bd=Math.min,ss=Math.sin,gi=Math.sqrt,Aa=1e-12,vl=Math.PI,up=vl/2,bl=2*vl;function zw(s){return s>1?0:s<-1?vl:Math.acos(s)}function hb(s){return s>=1?up:s<=-1?-up:Math.asin(s)}function zu(s){let l=3;return s.digits=function(d){if(!arguments.length)return l;if(d==null)l=null;else{const h=Math.floor(d);if(!(h>=0))throw new RangeError(`invalid digits: ${d}`);l=h}return s},()=>new cl(l)}function Fw(s){return s.innerRadius}function Hw(s){return s.outerRadius}function qw(s){return s.startAngle}function Vw(s){return s.endAngle}function jw(s){return s&&s.padAngle}function Ww(s,l,d,h,f,g,b,y){var T=d-s,k=h-l,D=b-f,O=y-g,P=O*T-D*k;if(!(P*P<Aa))return[s+(P=(D*(l-g)-O*(s-f))/P)*T,l+P*k]}function hp(s,l,d,h,f,g,b){var y=s-d,T=l-h,k=(b?g:-g)/gi(y*y+T*T),D=k*T,O=-k*y,P=s+D,_=l+O,Y=d+D,j=h+O,W=(P+Y)/2,X=(_+j)/2,ee=Y-P,Z=j-_,K=ee*ee+Z*Z,re=f-g,oe=P*j-Y*_,Ce=(Z<0?-1:1)*gi(_w(0,re*re*K-oe*oe)),Ie=(oe*Z-ee*Ce)/K,Te=(-oe*ee-Z*Ce)/K,pe=(oe*Z+ee*Ce)/K,ge=(-oe*ee+Z*Ce)/K,we=Ie-W,le=Te-X,fe=pe-W,xe=ge-X;return we*we+le*le>fe*fe+xe*xe&&(Ie=pe,Te=ge),{cx:Ie,cy:Te,x01:-D,y01:-O,x11:Ie*(f/re-1),y11:Te*(f/re-1)}}var Uw=Array.prototype.slice;function pp(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function pb(s){this._context=s}function fp(s){return new pb(s)}function ng(s){return s[0]}function ig(s){return s[1]}function ag(s,l){var d=ln(!0),h=null,f=fp,g=null,b=zu(y);function y(T){var k,D,O,P=(T=pp(T)).length,_=!1;for(h==null&&(g=f(O=b())),k=0;k<=P;++k)!(k<P&&d(D=T[k],k,T))===_&&((_=!_)?g.lineStart():g.lineEnd()),_&&g.point(+s(D,k,T),+l(D,k,T));if(O)return g=null,O+""||null}return s=typeof s=="function"?s:s===void 0?ng:ln(s),l=typeof l=="function"?l:l===void 0?ig:ln(l),y.x=function(T){return arguments.length?(s=typeof T=="function"?T:ln(+T),y):s},y.y=function(T){return arguments.length?(l=typeof T=="function"?T:ln(+T),y):l},y.defined=function(T){return arguments.length?(d=typeof T=="function"?T:ln(!!T),y):d},y.curve=function(T){return arguments.length?(f=T,h!=null&&(g=f(h)),y):f},y.context=function(T){return arguments.length?(T==null?h=g=null:g=f(h=T),y):h},y}function fb(s,l,d){var h=null,f=ln(!0),g=null,b=fp,y=null,T=zu(k);function k(O){var P,_,Y,j,W,X=(O=pp(O)).length,ee=!1,Z=new Array(X),K=new Array(X);for(g==null&&(y=b(W=T())),P=0;P<=X;++P){if(!(P<X&&f(j=O[P],P,O))===ee)if(ee=!ee)_=P,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),Y=P-1;Y>=_;--Y)y.point(Z[Y],K[Y]);y.lineEnd(),y.areaEnd()}ee&&(Z[P]=+s(j,P,O),K[P]=+l(j,P,O),y.point(h?+h(j,P,O):Z[P],d?+d(j,P,O):K[P]))}if(W)return y=null,W+""||null}function D(){return ag().defined(f).curve(b).context(g)}return s=typeof s=="function"?s:s===void 0?ng:ln(+s),l=typeof l=="function"?l:ln(l===void 0?0:+l),d=typeof d=="function"?d:d===void 0?ig:ln(+d),k.x=function(O){return arguments.length?(s=typeof O=="function"?O:ln(+O),h=null,k):s},k.x0=function(O){return arguments.length?(s=typeof O=="function"?O:ln(+O),k):s},k.x1=function(O){return arguments.length?(h=O==null?null:typeof O=="function"?O:ln(+O),k):h},k.y=function(O){return arguments.length?(l=typeof O=="function"?O:ln(+O),d=null,k):l},k.y0=function(O){return arguments.length?(l=typeof O=="function"?O:ln(+O),k):l},k.y1=function(O){return arguments.length?(d=O==null?null:typeof O=="function"?O:ln(+O),k):d},k.lineX0=k.lineY0=function(){return D().x(s).y(l)},k.lineY1=function(){return D().x(s).y(d)},k.lineX1=function(){return D().x(h).y(l)},k.defined=function(O){return arguments.length?(f=typeof O=="function"?O:ln(!!O),k):f},k.curve=function(O){return arguments.length?(b=O,g!=null&&(y=b(g)),k):b},k.context=function(O){return arguments.length?(O==null?g=y=null:y=b(g=O),k):g},k}function Gw(s,l){return l<s?-1:l>s?1:l>=s?0:NaN}function Yw(s){return s}pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;default:this._context.lineTo(s,l)}}};var gb=sg(fp);function mb(s){this._curve=s}function sg(s){function l(d){return new mb(s(d))}return l._curve=s,l}function Fu(s){var l=s.curve;return s.angle=s.x,delete s.x,s.radius=s.y,delete s.y,s.curve=function(d){return arguments.length?l(sg(d)):l()._curve},s}function vb(){return Fu(ag().curve(gb))}function bb(){var s=fb().curve(gb),l=s.curve,d=s.lineX0,h=s.lineX1,f=s.lineY0,g=s.lineY1;return s.angle=s.x,delete s.x,s.startAngle=s.x0,delete s.x0,s.endAngle=s.x1,delete s.x1,s.radius=s.y,delete s.y,s.innerRadius=s.y0,delete s.y0,s.outerRadius=s.y1,delete s.y1,s.lineStartAngle=function(){return Fu(d())},delete s.lineX0,s.lineEndAngle=function(){return Fu(h())},delete s.lineX1,s.lineInnerRadius=function(){return Fu(f())},delete s.lineY0,s.lineOuterRadius=function(){return Fu(g())},delete s.lineY1,s.curve=function(b){return arguments.length?l(sg(b)):l()._curve},s}function Hu(s,l){return[(l=+l)*Math.cos(s-=Math.PI/2),l*Math.sin(s)]}mb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(s,l){this._curve.point(l*Math.sin(s),l*-Math.cos(s))}};class yb{constructor(l,d){this._context=l,this._x=d}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(l,d){switch(l=+l,d=+d,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,d):this._context.moveTo(l,d);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+l)/2,this._y0,this._x0,d,l,d):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+d)/2,l,this._y0,l,d)}this._x0=l,this._y0=d}}class Kw{constructor(l){this._context=l}lineStart(){this._point=0}lineEnd(){}point(l,d){if(l=+l,d=+d,this._point===0)this._point=1;else{const h=Hu(this._x0,this._y0),f=Hu(this._x0,this._y0=(this._y0+d)/2),g=Hu(l,this._y0),b=Hu(l,d);this._context.moveTo(...h),this._context.bezierCurveTo(...f,...g,...b)}this._x0=l,this._y0=d}}function wb(s){return new yb(s,!0)}function xb(s){return new yb(s,!1)}function Xw(s){return new Kw(s)}function Qw(s){return s.source}function Jw(s){return s.target}function gp(s){let l=Qw,d=Jw,h=ng,f=ig,g=null,b=null,y=zu(T);function T(){let k;const D=Uw.call(arguments),O=l.apply(this,D),P=d.apply(this,D);if(g==null&&(b=s(k=y())),b.lineStart(),D[0]=O,b.point(+h.apply(this,D),+f.apply(this,D)),D[0]=P,b.point(+h.apply(this,D),+f.apply(this,D)),b.lineEnd(),k)return b=null,k+""||null}return T.source=function(k){return arguments.length?(l=k,T):l},T.target=function(k){return arguments.length?(d=k,T):d},T.x=function(k){return arguments.length?(h=typeof k=="function"?k:ln(+k),T):h},T.y=function(k){return arguments.length?(f=typeof k=="function"?k:ln(+k),T):f},T.context=function(k){return arguments.length?(k==null?g=b=null:b=s(g=k),T):g},T}const Zw=gi(3);var Cb={draw(s,l){const d=.59436*gi(l+bd(l/28,.75)),h=d/2,f=h*Zw;s.moveTo(0,d),s.lineTo(0,-d),s.moveTo(-f,-h),s.lineTo(f,h),s.moveTo(-f,h),s.lineTo(f,-h)}},mp={draw(s,l){const d=gi(l/vl);s.moveTo(d,0),s.arc(0,0,d,0,bl)}},kb={draw(s,l){const d=gi(l/5)/2;s.moveTo(-3*d,-d),s.lineTo(-d,-d),s.lineTo(-d,-3*d),s.lineTo(d,-3*d),s.lineTo(d,-d),s.lineTo(3*d,-d),s.lineTo(3*d,d),s.lineTo(d,d),s.lineTo(d,3*d),s.lineTo(-d,3*d),s.lineTo(-d,d),s.lineTo(-3*d,d),s.closePath()}};const Tb=gi(1/3),ex=2*Tb;var Ab={draw(s,l){const d=gi(l/ex),h=d*Tb;s.moveTo(0,-d),s.lineTo(h,0),s.lineTo(0,d),s.lineTo(-h,0),s.closePath()}},Sb={draw(s,l){const d=.62625*gi(l);s.moveTo(0,-d),s.lineTo(d,0),s.lineTo(0,d),s.lineTo(-d,0),s.closePath()}},Eb={draw(s,l){const d=.87559*gi(l-bd(l/7,2));s.moveTo(-d,0),s.lineTo(d,0),s.moveTo(0,d),s.lineTo(0,-d)}},$b={draw(s,l){const d=gi(l),h=-d/2;s.rect(h,h,d,d)}},Db={draw(s,l){const d=.4431*gi(l);s.moveTo(d,d),s.lineTo(d,-d),s.lineTo(-d,-d),s.lineTo(-d,d),s.closePath()}};const Ib=ss(vl/10)/ss(7*vl/10),tx=ss(bl/10)*Ib,nx=-Lo(bl/10)*Ib;var Mb={draw(s,l){const d=gi(.8908130915292852*l),h=tx*d,f=nx*d;s.moveTo(0,-d),s.lineTo(h,f);for(let g=1;g<5;++g){const b=bl*g/5,y=Lo(b),T=ss(b);s.lineTo(T*d,-y*d),s.lineTo(y*h-T*f,T*h+y*f)}s.closePath()}};const rg=gi(3);var Lb={draw(s,l){const d=-gi(l/(3*rg));s.moveTo(0,2*d),s.lineTo(-rg*d,-d),s.lineTo(rg*d,-d),s.closePath()}};const ix=gi(3);var Pb={draw(s,l){const d=.6824*gi(l),h=d/2,f=d*ix/2;s.moveTo(0,-d),s.lineTo(f,h),s.lineTo(-f,h),s.closePath()}};const Us=-.5,Gs=gi(3)/2,og=1/gi(12),ax=3*(og/2+1);var Bb={draw(s,l){const d=gi(l/ax),h=d/2,f=d*og,g=h,b=d*og+d,y=-g,T=b;s.moveTo(h,f),s.lineTo(g,b),s.lineTo(y,T),s.lineTo(Us*h-Gs*f,Gs*h+Us*f),s.lineTo(Us*g-Gs*b,Gs*g+Us*b),s.lineTo(Us*y-Gs*T,Gs*y+Us*T),s.lineTo(Us*h+Gs*f,Us*f-Gs*h),s.lineTo(Us*g+Gs*b,Us*b-Gs*g),s.lineTo(Us*y+Gs*T,Us*T-Gs*y),s.closePath()}},lg={draw(s,l){const d=.6189*gi(l-bd(l/6,1.7));s.moveTo(-d,-d),s.lineTo(d,d),s.moveTo(-d,d),s.lineTo(d,-d)}};const Ob=[mp,kb,Ab,$b,Mb,Lb,Bb],sx=[mp,Eb,lg,Pb,Cb,Db,Sb];function yl(){}function vp(s,l,d){s._context.bezierCurveTo((2*s._x0+s._x1)/3,(2*s._y0+s._y1)/3,(s._x0+2*s._x1)/3,(s._y0+2*s._y1)/3,(s._x0+4*s._x1+l)/6,(s._y0+4*s._y1+d)/6)}function bp(s){this._context=s}function Rb(s){this._context=s}function Nb(s){this._context=s}function _b(s,l){this._basis=new bp(s),this._beta=l}bp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vp(this,s,l)}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}},Rb.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._x2=s,this._y2=l;break;case 1:this._point=2,this._x3=s,this._y3=l;break;case 2:this._point=3,this._x4=s,this._y4=l,this._context.moveTo((this._x0+4*this._x1+s)/6,(this._y0+4*this._y1+l)/6);break;default:vp(this,s,l)}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}},Nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var d=(this._x0+4*this._x1+s)/6,h=(this._y0+4*this._y1+l)/6;this._line?this._context.lineTo(d,h):this._context.moveTo(d,h);break;case 3:this._point=4;default:vp(this,s,l)}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}},_b.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var s=this._x,l=this._y,d=s.length-1;if(d>0)for(var h,f=s[0],g=l[0],b=s[d]-f,y=l[d]-g,T=-1;++T<=d;)h=T/d,this._basis.point(this._beta*s[T]+(1-this._beta)*(f+h*b),this._beta*l[T]+(1-this._beta)*(g+h*y));this._x=this._y=null,this._basis.lineEnd()},point:function(s,l){this._x.push(+s),this._y.push(+l)}};var rx=function s(l){function d(h){return l===1?new bp(h):new _b(h,l)}return d.beta=function(h){return s(+h)},d}(.85);function yp(s,l,d){s._context.bezierCurveTo(s._x1+s._k*(s._x2-s._x0),s._y1+s._k*(s._y2-s._y0),s._x2+s._k*(s._x1-l),s._y2+s._k*(s._y1-d),s._x2,s._y2)}function cg(s,l){this._context=s,this._k=(1-l)/6}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:yp(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2,this._x1=s,this._y1=l;break;case 2:this._point=3;default:yp(this,s,l)}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var ox=function s(l){function d(h){return new cg(h,l)}return d.tension=function(h){return s(+h)},d}(0);function dg(s,l){this._context=s,this._k=(1-l)/6}dg.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._x3=s,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=s,this._y4=l);break;case 2:this._point=3,this._x5=s,this._y5=l;break;default:yp(this,s,l)}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var lx=function s(l){function d(h){return new dg(h,l)}return d.tension=function(h){return s(+h)},d}(0);function ug(s,l){this._context=s,this._k=(1-l)/6}ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yp(this,s,l)}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var cx=function s(l){function d(h){return new ug(h,l)}return d.tension=function(h){return s(+h)},d}(0);function hg(s,l,d){var h=s._x1,f=s._y1,g=s._x2,b=s._y2;if(s._l01_a>Aa){var y=2*s._l01_2a+3*s._l01_a*s._l12_a+s._l12_2a,T=3*s._l01_a*(s._l01_a+s._l12_a);h=(h*y-s._x0*s._l12_2a+s._x2*s._l01_2a)/T,f=(f*y-s._y0*s._l12_2a+s._y2*s._l01_2a)/T}if(s._l23_a>Aa){var k=2*s._l23_2a+3*s._l23_a*s._l12_a+s._l12_2a,D=3*s._l23_a*(s._l23_a+s._l12_a);g=(g*k+s._x1*s._l23_2a-l*s._l12_2a)/D,b=(b*k+s._y1*s._l23_2a-d*s._l12_2a)/D}s._context.bezierCurveTo(h,f,g,b,s._x2,s._y2)}function zb(s,l){this._context=s,this._alpha=l}zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){if(s=+s,l=+l,this._point){var d=this._x2-s,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3;default:hg(this,s,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var dx=function s(l){function d(h){return l?new zb(h,l):new cg(h,0)}return d.alpha=function(h){return s(+h)},d}(.5);function Fb(s,l){this._context=s,this._alpha=l}Fb.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(s,l){if(s=+s,l=+l,this._point){var d=this._x2-s,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=s,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=s,this._y4=l);break;case 2:this._point=3,this._x5=s,this._y5=l;break;default:hg(this,s,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var ux=function s(l){function d(h){return l?new Fb(h,l):new dg(h,0)}return d.alpha=function(h){return s(+h)},d}(.5);function Hb(s,l){this._context=s,this._alpha=l}Hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){if(s=+s,l=+l,this._point){var d=this._x2-s,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hg(this,s,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var hx=function s(l){function d(h){return l?new Hb(h,l):new ug(h,0)}return d.alpha=function(h){return s(+h)},d}(.5);function qb(s){this._context=s}function Vb(s){return s<0?-1:1}function jb(s,l,d){var h=s._x1-s._x0,f=l-s._x1,g=(s._y1-s._y0)/(h||f<0&&-0),b=(d-s._y1)/(f||h<0&&-0),y=(g*f+b*h)/(h+f);return(Vb(g)+Vb(b))*Math.min(Math.abs(g),Math.abs(b),.5*Math.abs(y))||0}function Wb(s,l){var d=s._x1-s._x0;return d?(3*(s._y1-s._y0)/d-l)/2:l}function pg(s,l,d){var h=s._x0,f=s._y0,g=s._x1,b=s._y1,y=(g-h)/3;s._context.bezierCurveTo(h+y,f+y*l,g-y,b-y*d,g,b)}function wp(s){this._context=s}function Ub(s){this._context=new Gb(s)}function Gb(s){this._context=s}function Yb(s){this._context=s}function Kb(s){var l,d,h=s.length-1,f=new Array(h),g=new Array(h),b=new Array(h);for(f[0]=0,g[0]=2,b[0]=s[0]+2*s[1],l=1;l<h-1;++l)f[l]=1,g[l]=4,b[l]=4*s[l]+2*s[l+1];for(f[h-1]=2,g[h-1]=7,b[h-1]=8*s[h-1]+s[h],l=1;l<h;++l)d=f[l]/g[l-1],g[l]-=d,b[l]-=d*b[l-1];for(f[h-1]=b[h-1]/g[h-1],l=h-2;l>=0;--l)f[l]=(b[l]-f[l+1])/g[l];for(g[h-1]=(s[h]+f[h-1])/2,l=0;l<h-1;++l)g[l]=2*s[l+1]-f[l+1];return[f,g]}function xp(s,l){this._context=s,this._t=l}function yd(s,l){if((f=s.length)>1)for(var d,h,f,g=1,b=s[l[0]],y=b.length;g<f;++g)for(h=b,b=s[l[g]],d=0;d<y;++d)b[d][1]+=b[d][0]=isNaN(h[d][1])?h[d][0]:h[d][1]}function wd(s){for(var l=s.length,d=new Array(l);--l>=0;)d[l]=l;return d}function px(s,l){return s[l]}function fx(s){const l=[];return l.key=s,l}function Xb(s){var l=s.map(gx);return wd(s).sort(function(d,h){return l[d]-l[h]})}function gx(s){for(var l,d=-1,h=0,f=s.length,g=-1/0;++d<f;)(l=+s[d][1])>g&&(g=l,h=d);return h}function Qb(s){var l=s.map(Jb);return wd(s).sort(function(d,h){return l[d]-l[h]})}function Jb(s){for(var l,d=0,h=-1,f=s.length;++h<f;)(l=+s[h][1])&&(d+=l);return d}qb.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(s,l){s=+s,l=+l,this._point?this._context.lineTo(s,l):(this._point=1,this._context.moveTo(s,l))}},wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pg(this,this._t0,Wb(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){var d=NaN;if(l=+l,(s=+s)!==this._x1||l!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3,pg(this,Wb(this,d=jb(this,s,l)),d);break;default:pg(this,this._t0,d=jb(this,s,l))}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l,this._t0=d}}},(Ub.prototype=Object.create(wp.prototype)).point=function(s,l){wp.prototype.point.call(this,l,s)},Gb.prototype={moveTo:function(s,l){this._context.moveTo(l,s)},closePath:function(){this._context.closePath()},lineTo:function(s,l){this._context.lineTo(l,s)},bezierCurveTo:function(s,l,d,h,f,g){this._context.bezierCurveTo(l,s,h,d,g,f)}},Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var s=this._x,l=this._y,d=s.length;if(d)if(this._line?this._context.lineTo(s[0],l[0]):this._context.moveTo(s[0],l[0]),d===2)this._context.lineTo(s[1],l[1]);else for(var h=Kb(s),f=Kb(l),g=0,b=1;b<d;++g,++b)this._context.bezierCurveTo(h[0][g],f[0][g],h[1][g],f[1][g],s[b],l[b]);(this._line||this._line!==0&&d===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(s,l){this._x.push(+s),this._y.push(+l)}},xp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,l),this._context.lineTo(s,l);else{var d=this._x*(1-this._t)+s*this._t;this._context.lineTo(d,this._y),this._context.lineTo(d,l)}}this._x=s,this._y=l}};var Cp=s=>()=>s;function mx(s,{sourceEvent:l,target:d,transform:h,dispatch:f}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},transform:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}function jr(s,l,d){this.k=s,this.x=l,this.y=d}jr.prototype={constructor:jr,scale:function(s){return s===1?this:new jr(this.k*s,this.x,this.y)},translate:function(s,l){return s===0&l===0?this:new jr(this.k,this.x+this.k*s,this.y+this.k*l)},apply:function(s){return[s[0]*this.k+this.x,s[1]*this.k+this.y]},applyX:function(s){return s*this.k+this.x},applyY:function(s){return s*this.k+this.y},invert:function(s){return[(s[0]-this.x)/this.k,(s[1]-this.y)/this.k]},invertX:function(s){return(s-this.x)/this.k},invertY:function(s){return(s-this.y)/this.k},rescaleX:function(s){return s.copy().domain(s.range().map(this.invertX,this).map(s.invert,s))},rescaleY:function(s){return s.copy().domain(s.range().map(this.invertY,this).map(s.invert,s))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kp=new jr(1,0,0);function Zb(s){for(;!s.__zoom;)if(!(s=s.parentNode))return kp;return s.__zoom}function fg(s){s.stopImmediatePropagation()}function qu(s){s.preventDefault(),s.stopImmediatePropagation()}function vx(s){return!(s.ctrlKey&&s.type!=="wheel"||s.button)}function bx(){var s=this;return s instanceof SVGElement?(s=s.ownerSVGElement||s).hasAttribute("viewBox")?[[(s=s.viewBox.baseVal).x,s.y],[s.x+s.width,s.y+s.height]]:[[0,0],[s.width.baseVal.value,s.height.baseVal.value]]:[[0,0],[s.clientWidth,s.clientHeight]]}function e0(){return this.__zoom||kp}function yx(s){return-s.deltaY*(s.deltaMode===1?.05:s.deltaMode?1:.002)*(s.ctrlKey?10:1)}function wx(){return navigator.maxTouchPoints||"ontouchstart"in this}function xx(s,l,d){var h=s.invertX(l[0][0])-d[0][0],f=s.invertX(l[1][0])-d[1][0],g=s.invertY(l[0][1])-d[0][1],b=s.invertY(l[1][1])-d[1][1];return s.translate(f>h?(h+f)/2:Math.min(0,h)||Math.max(0,f),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}Zb.prototype=jr.prototype,B.Adder=hi,B.Delaunay=m,B.FormatSpecifier=et,B.InternMap=ja,B.InternSet=wi,B.Node=nc,B.Path=cl,B.Voronoi=a,B.ZoomTransform=jr,B.active=function(s,l){var d,h,f=s.__transition;if(f){for(h in l=l==null?null:l+"",f)if((d=f[h]).state>1&&d.name===l)return new Fs([[s]],xo,l,+h)}return null},B.arc=function(){var s=Fw,l=Hw,d=ln(0),h=null,f=qw,g=Vw,b=jw,y=null,T=zu(k);function k(){var D,O,P=+s.apply(this,arguments),_=+l.apply(this,arguments),Y=f.apply(this,arguments)-up,j=g.apply(this,arguments)-up,W=ub(j-Y),X=j>Y;if(y||(y=D=T()),_<P&&(O=_,_=P,P=O),_>Aa)if(W>bl-Aa)y.moveTo(_*Lo(Y),_*ss(Y)),y.arc(0,0,_,Y,j,!X),P>Aa&&(y.moveTo(P*Lo(j),P*ss(j)),y.arc(0,0,P,j,Y,X));else{var ee,Z,K=Y,re=j,oe=Y,Ce=j,Ie=W,Te=W,pe=b.apply(this,arguments)/2,ge=pe>Aa&&(h?+h.apply(this,arguments):gi(P*P+_*_)),we=bd(ub(_-P)/2,+d.apply(this,arguments)),le=we,fe=we;if(ge>Aa){var xe=hb(ge/P*ss(pe)),$e=hb(ge/_*ss(pe));(Ie-=2*xe)>Aa?(oe+=xe*=X?1:-1,Ce-=xe):(Ie=0,oe=Ce=(Y+j)/2),(Te-=2*$e)>Aa?(K+=$e*=X?1:-1,re-=$e):(Te=0,K=re=(Y+j)/2)}var Re=_*Lo(K),Ye=_*ss(K),st=P*Lo(Ce),ht=P*ss(Ce);if(we>Aa){var Ze,zt=_*Lo(re),Rt=_*ss(re),Tt=P*Lo(oe),Bt=P*ss(oe);if(W<vl)if(Ze=Ww(Re,Ye,Tt,Bt,zt,Rt,st,ht)){var Nn=Re-Ze[0],mn=Ye-Ze[1],Ha=zt-Ze[0],Po=Rt-Ze[1],mr=1/ss(zw((Nn*Ha+mn*Po)/(gi(Nn*Nn+mn*mn)*gi(Ha*Ha+Po*Po)))/2),Bo=gi(Ze[0]*Ze[0]+Ze[1]*Ze[1]);le=bd(we,(P-Bo)/(mr-1)),fe=bd(we,(_-Bo)/(mr+1))}else le=fe=0}Te>Aa?fe>Aa?(ee=hp(Tt,Bt,Re,Ye,_,fe,X),Z=hp(zt,Rt,st,ht,_,fe,X),y.moveTo(ee.cx+ee.x01,ee.cy+ee.y01),fe<we?y.arc(ee.cx,ee.cy,fe,Ta(ee.y01,ee.x01),Ta(Z.y01,Z.x01),!X):(y.arc(ee.cx,ee.cy,fe,Ta(ee.y01,ee.x01),Ta(ee.y11,ee.x11),!X),y.arc(0,0,_,Ta(ee.cy+ee.y11,ee.cx+ee.x11),Ta(Z.cy+Z.y11,Z.cx+Z.x11),!X),y.arc(Z.cx,Z.cy,fe,Ta(Z.y11,Z.x11),Ta(Z.y01,Z.x01),!X))):(y.moveTo(Re,Ye),y.arc(0,0,_,K,re,!X)):y.moveTo(Re,Ye),P>Aa&&Ie>Aa?le>Aa?(ee=hp(st,ht,zt,Rt,P,-le,X),Z=hp(Re,Ye,Tt,Bt,P,-le,X),y.lineTo(ee.cx+ee.x01,ee.cy+ee.y01),le<we?y.arc(ee.cx,ee.cy,le,Ta(ee.y01,ee.x01),Ta(Z.y01,Z.x01),!X):(y.arc(ee.cx,ee.cy,le,Ta(ee.y01,ee.x01),Ta(ee.y11,ee.x11),!X),y.arc(0,0,P,Ta(ee.cy+ee.y11,ee.cx+ee.x11),Ta(Z.cy+Z.y11,Z.cx+Z.x11),X),y.arc(Z.cx,Z.cy,le,Ta(Z.y11,Z.x11),Ta(Z.y01,Z.x01),!X))):y.arc(0,0,P,Ce,oe,X):y.lineTo(st,ht)}else y.moveTo(0,0);if(y.closePath(),D)return y=null,D+""||null}return k.centroid=function(){var D=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2,O=(+f.apply(this,arguments)+ +g.apply(this,arguments))/2-vl/2;return[Lo(O)*D,ss(O)*D]},k.innerRadius=function(D){return arguments.length?(s=typeof D=="function"?D:ln(+D),k):s},k.outerRadius=function(D){return arguments.length?(l=typeof D=="function"?D:ln(+D),k):l},k.cornerRadius=function(D){return arguments.length?(d=typeof D=="function"?D:ln(+D),k):d},k.padRadius=function(D){return arguments.length?(h=D==null?null:typeof D=="function"?D:ln(+D),k):h},k.startAngle=function(D){return arguments.length?(f=typeof D=="function"?D:ln(+D),k):f},k.endAngle=function(D){return arguments.length?(g=typeof D=="function"?D:ln(+D),k):g},k.padAngle=function(D){return arguments.length?(b=typeof D=="function"?D:ln(+D),k):b},k.context=function(D){return arguments.length?(y=D??null,k):y},k},B.area=fb,B.areaRadial=bb,B.ascending=In,B.autoType=function(s){for(var l in s){var d,h,f=s[l].trim();if(f)if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(isNaN(d=+f)){if(!(h=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ct&&h[4]&&!h[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f)}else f=d;else f=null;s[l]=f}return s},B.axisBottom=function(s){return Fo(3,s)},B.axisLeft=function(s){return Fo(4,s)},B.axisRight=function(s){return Fo(2,s)},B.axisTop=function(s){return Fo(1,s)},B.bin=$s,B.bisect=qa,B.bisectCenter=va,B.bisectLeft=at,B.bisectRight=Gr,B.bisector=Wr,B.blob=function(s,l){return fetch(s,l).then(qe)},B.blur=function(s,l){if(!((l=+l)>=0))throw new RangeError("invalid r");let d=s.length;if(!((d=Math.floor(d))>=0))throw new RangeError("invalid length");if(!d||!l)return s;const h=Yt(l),f=s.slice();return h(s,f,0,d,1),h(f,s,0,d,1),h(s,f,0,d,1),s},B.blur2=cc,B.blurImage=Nt,B.brush=function(){return Gc(sh)},B.brushSelection=function(s){var l=s.__brush;return l?l.dim.output(l.selection):null},B.brushX=function(){return Gc(ll)},B.brushY=function(){return Gc(jl)},B.buffer=function(s,l){return fetch(s,l).then(je)},B.chord=function(){return Kl(!1,!1)},B.chordDirected=function(){return Kl(!0,!1)},B.chordTranspose=function(){return Kl(!1,!0)},B.cluster=function(){var s=P0,l=1,d=1,h=!1;function f(g){var b,y=0;g.eachAfter(function(P){var _=P.children;_?(P.x=function(Y){return Y.reduce(B0,0)/Y.length}(_),P.y=function(Y){return 1+Y.reduce(O0,0)}(_)):(P.x=b?y+=s(P,b):0,P.y=0,b=P)});var T=function(P){for(var _;_=P.children;)P=_[0];return P}(g),k=function(P){for(var _;_=P.children;)P=_[_.length-1];return P}(g),D=T.x-s(T,k)/2,O=k.x+s(k,T)/2;return g.eachAfter(h?function(P){P.x=(P.x-g.x)*l,P.y=(g.y-P.y)*d}:function(P){P.x=(P.x-D)/(O-D)*l,P.y=(1-(g.y?P.y/g.y:1))*d})}return f.separation=function(g){return arguments.length?(s=g,f):s},f.size=function(g){return arguments.length?(h=!1,l=+g[0],d=+g[1],f):h?null:[l,d]},f.nodeSize=function(g){return arguments.length?(h=!0,l=+g[0],d=+g[1],f):h?[l,d]:null},f},B.color=oi,B.contourDensity=function(){var s=ou,l=ns,d=_p,h=960,f=500,g=20,b=2,y=3*g,T=h+2*y>>b,k=f+2*y>>b,D=qs(20);function O(ee){var Z=new Float32Array(T*k),K=Math.pow(2,-b),re=-1;for(const le of ee){var oe=(s(le,++re,ee)+y)*K,Ce=(l(le,re,ee)+y)*K,Ie=+d(le,re,ee);if(Ie&&oe>=0&&oe<T&&Ce>=0&&Ce<k){var Te=Math.floor(oe),pe=Math.floor(Ce),ge=oe-Te-.5,we=Ce-pe-.5;Z[Te+pe*T]+=(1-ge)*(1-we)*Ie,Z[Te+1+pe*T]+=ge*(1-we)*Ie,Z[Te+1+(pe+1)*T]+=ge*we*Ie,Z[Te+(pe+1)*T]+=(1-ge)*we*Ie}}return cc({data:Z,width:T,height:k},g*K),Z}function P(ee){var Z=O(ee),K=D(Z),re=Math.pow(2,2*b);return Array.isArray(K)||(K=Gt(Number.MIN_VALUE,ea(Z)/re,K)),au().size([T,k]).thresholds(K.map(oe=>oe*re))(Z).map((oe,Ce)=>(oe.value=+K[Ce],_(oe)))}function _(ee){return ee.coordinates.forEach(Y),ee}function Y(ee){ee.forEach(j)}function j(ee){ee.forEach(W)}function W(ee){ee[0]=ee[0]*Math.pow(2,b)-y,ee[1]=ee[1]*Math.pow(2,b)-y}function X(){return T=h+2*(y=3*g)>>b,k=f+2*y>>b,P}return P.contours=function(ee){var Z=O(ee),K=au().size([T,k]),re=Math.pow(2,2*b),oe=Ce=>{Ce=+Ce;var Ie=_(K.contour(Z,Ce*re));return Ie.value=Ce,Ie};return Object.defineProperty(oe,"max",{get:()=>ea(Z)/re}),oe},P.x=function(ee){return arguments.length?(s=typeof ee=="function"?ee:qs(+ee),P):s},P.y=function(ee){return arguments.length?(l=typeof ee=="function"?ee:qs(+ee),P):l},P.weight=function(ee){return arguments.length?(d=typeof ee=="function"?ee:qs(+ee),P):d},P.size=function(ee){if(!arguments.length)return[h,f];var Z=+ee[0],K=+ee[1];if(!(Z>=0&&K>=0))throw new Error("invalid size");return h=Z,f=K,X()},P.cellSize=function(ee){if(!arguments.length)return 1<<b;if(!((ee=+ee)>=1))throw new Error("invalid cell size");return b=Math.floor(Math.log(ee)/Math.LN2),X()},P.thresholds=function(ee){return arguments.length?(D=typeof ee=="function"?ee:Array.isArray(ee)?qs(Oa.call(ee)):qs(ee),P):D},P.bandwidth=function(ee){if(!arguments.length)return Math.sqrt(g*(g+1));if(!((ee=+ee)>=0))throw new Error("invalid bandwidth");return g=(Math.sqrt(4*ee*ee+1)-1)/2,X()},P},B.contours=au,B.count=Yr,B.create=function(s){return x(Da(s).call(document.documentElement))},B.creator=Da,B.cross=function(...s){const l=typeof s[s.length-1]=="function"&&function(b){return y=>b(...y)}(s.pop()),d=(s=s.map(q)).map(Va),h=s.length-1,f=new Array(h+1).fill(0),g=[];if(h<0||d.some(xl))return g;for(;;){g.push(f.map((y,T)=>s[T][y]));let b=h;for(;++f[b]===d[b];){if(b===0)return l?g.map(l):g;f[b--]=0}}},B.csv=Xt,B.csvFormat=G,B.csvFormatBody=J,B.csvFormatRow=de,B.csvFormatRows=te,B.csvFormatValue=H,B.csvParse=V,B.csvParseRows=U,B.cubehelix=Ae,B.cumsum=function(s,l){var d=0,h=0;return Float64Array.from(s,l===void 0?f=>d+=+f||0:f=>d+=+l(f,h++,s)||0)},B.curveBasis=function(s){return new bp(s)},B.curveBasisClosed=function(s){return new Rb(s)},B.curveBasisOpen=function(s){return new Nb(s)},B.curveBumpX=wb,B.curveBumpY=xb,B.curveBundle=rx,B.curveCardinal=ox,B.curveCardinalClosed=lx,B.curveCardinalOpen=cx,B.curveCatmullRom=dx,B.curveCatmullRomClosed=ux,B.curveCatmullRomOpen=hx,B.curveLinear=fp,B.curveLinearClosed=function(s){return new qb(s)},B.curveMonotoneX=function(s){return new wp(s)},B.curveMonotoneY=function(s){return new Ub(s)},B.curveNatural=function(s){return new Yb(s)},B.curveStep=function(s){return new xp(s,.5)},B.curveStepAfter=function(s){return new xp(s,1)},B.curveStepBefore=function(s){return new xp(s,0)},B.descending=Ji,B.deviation=Sa,B.difference=function(s,...l){s=new wi(s);for(const d of l)for(const h of d)s.delete(h);return s},B.disjoint=function(s,l){const d=l[Symbol.iterator](),h=new wi;for(const f of s){if(h.has(f))return!1;let g,b;for(;({value:g,done:b}=d.next())&&!b;){if(Object.is(f,g))return!1;h.add(g)}}return!0},B.dispatch=Bs,B.drag=function(){var s,l,d,h,f=mt,g=St,b=wt,y=Gn,T={},k=Bs("start","drag","end"),D=0,O=0;function P(K){K.on("mousedown.drag",_).filter(y).on("touchstart.drag",W).on("touchmove.drag",X,ae).on("touchend.drag touchcancel.drag",ee).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(K,re){if(!h&&f.call(this,K,re)){var oe=Z(this,g.call(this,K,re),K,re,"mouse");oe&&(x(K.view).on("mousemove.drag",Y,ye).on("mouseup.drag",j,ye),Oe(K.view),be(K),d=!1,s=K.clientX,l=K.clientY,oe("start",K))}}function Y(K){if(Ee(K),!d){var re=K.clientX-s,oe=K.clientY-l;d=re*re+oe*oe>O}T.mouse("drag",K)}function j(K){x(K.view).on("mousemove.drag mouseup.drag",null),We(K.view,d),Ee(K),T.mouse("end",K)}function W(K,re){if(f.call(this,K,re)){var oe,Ce,Ie=K.changedTouches,Te=g.call(this,K,re),pe=Ie.length;for(oe=0;oe<pe;++oe)(Ce=Z(this,Te,K,re,Ie[oe].identifier,Ie[oe]))&&(be(K),Ce("start",K,Ie[oe]))}}function X(K){var re,oe,Ce=K.changedTouches,Ie=Ce.length;for(re=0;re<Ie;++re)(oe=T[Ce[re].identifier])&&(Ee(K),oe("drag",K,Ce[re]))}function ee(K){var re,oe,Ce=K.changedTouches,Ie=Ce.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),re=0;re<Ie;++re)(oe=T[Ce[re].identifier])&&(be(K),oe("end",K,Ce[re]))}function Z(K,re,oe,Ce,Ie,Te){var pe,ge,we,le=k.copy(),fe=ne(Te||oe,re);if((we=b.call(K,new Ne("beforestart",{sourceEvent:oe,target:P,identifier:Ie,active:D,x:fe[0],y:fe[1],dx:0,dy:0,dispatch:le}),Ce))!=null)return pe=we.x-fe[0]||0,ge=we.y-fe[1]||0,function xe($e,Re,Ye){var st,ht=fe;switch($e){case"start":T[Ie]=xe,st=D++;break;case"end":delete T[Ie],--D;case"drag":fe=ne(Ye||Re,re),st=D}le.call($e,K,new Ne($e,{sourceEvent:Re,subject:we,target:P,identifier:Ie,active:st,x:fe[0]+pe,y:fe[1]+ge,dx:fe[0]-ht[0],dy:fe[1]-ht[1],dispatch:le}),Ce)}}return P.filter=function(K){return arguments.length?(f=typeof K=="function"?K:Pe(!!K),P):f},P.container=function(K){return arguments.length?(g=typeof K=="function"?K:Pe(K),P):g},P.subject=function(K){return arguments.length?(b=typeof K=="function"?K:Pe(K),P):b},P.touchable=function(K){return arguments.length?(y=typeof K=="function"?K:Pe(!!K),P):y},P.on=function(){var K=k.on.apply(k,arguments);return K===k?P:K},P.clickDistance=function(K){return arguments.length?(O=(K=+K)*K,P):Math.sqrt(O)},P},B.dragDisable=Oe,B.dragEnable=We,B.dsv=function(s,l,d,h){arguments.length===3&&typeof d=="function"&&(h=d,d=void 0);var f=I(s);return xt(l,d).then(function(g){return f.parse(g,h)})},B.dsvFormat=I,B.easeBack=Fc,B.easeBackIn=th,B.easeBackInOut=Fc,B.easeBackOut=nh,B.easeBounce=bo,B.easeBounceIn=function(s){return 1-bo(1-s)},B.easeBounceInOut=function(s){return((s*=2)<=1?1-bo(1-s):bo(s-1)+1)/2},B.easeBounceOut=bo,B.easeCircle=Gd,B.easeCircleIn=function(s){return 1-Math.sqrt(1-s*s)},B.easeCircleInOut=Gd,B.easeCircleOut=function(s){return Math.sqrt(1- --s*s)},B.easeCubic=Fl,B.easeCubicIn=function(s){return s*s*s},B.easeCubicInOut=Fl,B.easeCubicOut=function(s){return--s*s*s+1},B.easeElastic=Hc,B.easeElasticIn=ih,B.easeElasticInOut=Mp,B.easeElasticOut=Hc,B.easeExp=eh,B.easeExpIn=function(s){return Hs(1-+s)},B.easeExpInOut=eh,B.easeExpOut=function(s){return 1-Hs(s)},B.easeLinear=s=>+s,B.easePoly=Nc,B.easePolyIn=Hl,B.easePolyInOut=Nc,B.easePolyOut=Ip,B.easeQuad=Wd,B.easeQuadIn=function(s){return s*s},B.easeQuadInOut=Wd,B.easeQuadOut=function(s){return s*(2-s)},B.easeSin=_c,B.easeSinIn=function(s){return+s==1?1:1-Math.cos(s*Ud)},B.easeSinInOut=_c,B.easeSinOut=function(s){return Math.sin(s*Ud)},B.every=function(s,l){if(typeof l!="function")throw new TypeError("test is not a function");let d=-1;for(const h of s)if(!l(h,++d,s))return!1;return!0},B.extent=Ea,B.fcumsum=function(s,l){const d=new hi;let h=-1;return Float64Array.from(s,l===void 0?f=>d.add(+f||0):f=>d.add(+l(f,++h,s)||0))},B.filter=function(s,l){if(typeof l!="function")throw new TypeError("test is not a function");const d=[];let h=-1;for(const f of s)l(f,++h,s)&&d.push(f);return d},B.flatGroup=function(s,...l){return ut(os(s,...l),l)},B.flatRollup=function(s,l,...d){return ut(As(s,l,...d),d)},B.forceCenter=function(s,l){var d,h=1;function f(){var g,b,y=d.length,T=0,k=0;for(g=0;g<y;++g)T+=(b=d[g]).x,k+=b.y;for(T=(T/y-s)*h,k=(k/y-l)*h,g=0;g<y;++g)(b=d[g]).x-=T,b.y-=k}return s==null&&(s=0),l==null&&(l=0),f.initialize=function(g){d=g},f.x=function(g){return arguments.length?(s=+g,f):s},f.y=function(g){return arguments.length?(l=+g,f):l},f.strength=function(g){return arguments.length?(h=+g,f):h},f},B.forceCollide=function(s){var l,d,h,f=1,g=1;function b(){for(var k,D,O,P,_,Y,j,W=l.length,X=0;X<g;++X)for(D=Vt(l,ra,Ai).visitAfter(y),k=0;k<W;++k)O=l[k],Y=d[O.index],j=Y*Y,P=O.x+O.vx,_=O.y+O.vy,D.visit(ee);function ee(Z,K,re,oe,Ce){var Ie=Z.data,Te=Z.r,pe=Y+Te;if(!Ie)return K>P+pe||oe<P-pe||re>_+pe||Ce<_-pe;if(Ie.index>O.index){var ge=P-Ie.x-Ie.vx,we=_-Ie.y-Ie.vy,le=ge*ge+we*we;le<pe*pe&&(ge===0&&(le+=(ge=Wn(h))*ge),we===0&&(le+=(we=Wn(h))*we),le=(pe-(le=Math.sqrt(le)))/le*f,O.vx+=(ge*=le)*(pe=(Te*=Te)/(j+Te)),O.vy+=(we*=le)*pe,Ie.vx-=ge*(pe=1-pe),Ie.vy-=we*pe)}}}function y(k){if(k.data)return k.r=d[k.data.index];for(var D=k.r=0;D<4;++D)k[D]&&k[D].r>k.r&&(k.r=k[D].r)}function T(){if(l){var k,D,O=l.length;for(d=new Array(O),k=0;k<O;++k)D=l[k],d[D.index]=+s(D,k,l)}}return typeof s!="function"&&(s=hn(s==null?1:+s)),b.initialize=function(k,D){l=k,h=D,T()},b.iterations=function(k){return arguments.length?(g=+k,b):g},b.strength=function(k){return arguments.length?(f=+k,b):f},b.radius=function(k){return arguments.length?(s=typeof k=="function"?k:hn(+k),T(),b):s},b},B.forceLink=function(s){var l,d,h,f,g,b,y=Jt,T=function(j){return 1/Math.min(f[j.source.index],f[j.target.index])},k=hn(30),D=1;function O(j){for(var W=0,X=s.length;W<D;++W)for(var ee,Z,K,re,oe,Ce,Ie,Te=0;Te<X;++Te)Z=(ee=s[Te]).source,re=(K=ee.target).x+K.vx-Z.x-Z.vx||Wn(b),oe=K.y+K.vy-Z.y-Z.vy||Wn(b),re*=Ce=((Ce=Math.sqrt(re*re+oe*oe))-d[Te])/Ce*j*l[Te],oe*=Ce,K.vx-=re*(Ie=g[Te]),K.vy-=oe*Ie,Z.vx+=re*(Ie=1-Ie),Z.vy+=oe*Ie}function P(){if(h){var j,W,X=h.length,ee=s.length,Z=new Map(h.map((K,re)=>[y(K,re,h),K]));for(j=0,f=new Array(X);j<ee;++j)(W=s[j]).index=j,typeof W.source!="object"&&(W.source=xs(Z,W.source)),typeof W.target!="object"&&(W.target=xs(Z,W.target)),f[W.source.index]=(f[W.source.index]||0)+1,f[W.target.index]=(f[W.target.index]||0)+1;for(j=0,g=new Array(ee);j<ee;++j)W=s[j],g[j]=f[W.source.index]/(f[W.source.index]+f[W.target.index]);l=new Array(ee),_(),d=new Array(ee),Y()}}function _(){if(h)for(var j=0,W=s.length;j<W;++j)l[j]=+T(s[j],j,s)}function Y(){if(h)for(var j=0,W=s.length;j<W;++j)d[j]=+k(s[j],j,s)}return s==null&&(s=[]),O.initialize=function(j,W){h=j,b=W,P()},O.links=function(j){return arguments.length?(s=j,P(),O):s},O.id=function(j){return arguments.length?(y=j,O):y},O.iterations=function(j){return arguments.length?(D=+j,O):D},O.strength=function(j){return arguments.length?(T=typeof j=="function"?j:hn(+j),_(),O):T},O.distance=function(j){return arguments.length?(k=typeof j=="function"?j:hn(+j),Y(),O):k},O},B.forceManyBody=function(){var s,l,d,h,f,g=hn(-30),b=1,y=1/0,T=.81;function k(_){var Y,j=s.length,W=Vt(s,wa,Yn).visitAfter(O);for(h=_,Y=0;Y<j;++Y)l=s[Y],W.visit(P)}function D(){if(s){var _,Y,j=s.length;for(f=new Array(j),_=0;_<j;++_)Y=s[_],f[Y.index]=+g(Y,_,s)}}function O(_){var Y,j,W,X,ee,Z=0,K=0;if(_.length){for(W=X=ee=0;ee<4;++ee)(Y=_[ee])&&(j=Math.abs(Y.value))&&(Z+=Y.value,K+=j,W+=j*Y.x,X+=j*Y.y);_.x=W/K,_.y=X/K}else{(Y=_).x=Y.data.x,Y.y=Y.data.y;do Z+=f[Y.data.index];while(Y=Y.next)}_.value=Z}function P(_,Y,j,W){if(!_.value)return!0;var X=_.x-l.x,ee=_.y-l.y,Z=W-Y,K=X*X+ee*ee;if(Z*Z/T<K)return K<y&&(X===0&&(K+=(X=Wn(d))*X),ee===0&&(K+=(ee=Wn(d))*ee),K<b&&(K=Math.sqrt(b*K)),l.vx+=X*_.value*h/K,l.vy+=ee*_.value*h/K),!0;if(!(_.length||K>=y)){(_.data!==l||_.next)&&(X===0&&(K+=(X=Wn(d))*X),ee===0&&(K+=(ee=Wn(d))*ee),K<b&&(K=Math.sqrt(b*K)));do _.data!==l&&(Z=f[_.data.index]*h/K,l.vx+=X*Z,l.vy+=ee*Z);while(_=_.next)}}return k.initialize=function(_,Y){s=_,d=Y,D()},k.strength=function(_){return arguments.length?(g=typeof _=="function"?_:hn(+_),D(),k):g},k.distanceMin=function(_){return arguments.length?(b=_*_,k):Math.sqrt(b)},k.distanceMax=function(_){return arguments.length?(y=_*_,k):Math.sqrt(y)},k.theta=function(_){return arguments.length?(T=_*_,k):Math.sqrt(T)},k},B.forceRadial=function(s,l,d){var h,f,g,b=hn(.1);function y(k){for(var D=0,O=h.length;D<O;++D){var P=h[D],_=P.x-l||1e-6,Y=P.y-d||1e-6,j=Math.sqrt(_*_+Y*Y),W=(g[D]-j)*f[D]*k/j;P.vx+=_*W,P.vy+=Y*W}}function T(){if(h){var k,D=h.length;for(f=new Array(D),g=new Array(D),k=0;k<D;++k)g[k]=+s(h[k],k,h),f[k]=isNaN(g[k])?0:+b(h[k],k,h)}}return typeof s!="function"&&(s=hn(+s)),l==null&&(l=0),d==null&&(d=0),y.initialize=function(k){h=k,T()},y.strength=function(k){return arguments.length?(b=typeof k=="function"?k:hn(+k),T(),y):b},y.radius=function(k){return arguments.length?(s=typeof k=="function"?k:hn(+k),T(),y):s},y.x=function(k){return arguments.length?(l=+k,y):l},y.y=function(k){return arguments.length?(d=+k,y):d},y},B.forceSimulation=function(s){var l,d=1,h=.001,f=1-Math.pow(h,1/300),g=0,b=.6,y=new Map,T=Rl(O),k=Bs("tick","end"),D=function(){let j=1;return()=>(j=(1664525*j+1013904223)%Ni)/Ni}();function O(){P(),k.call("tick",l),d<h&&(T.stop(),k.call("end",l))}function P(j){var W,X,ee=s.length;j===void 0&&(j=1);for(var Z=0;Z<j;++Z)for(d+=(g-d)*f,y.forEach(function(K){K(d)}),W=0;W<ee;++W)(X=s[W]).fx==null?X.x+=X.vx*=b:(X.x=X.fx,X.vx=0),X.fy==null?X.y+=X.vy*=b:(X.y=X.fy,X.vy=0);return l}function _(){for(var j,W=0,X=s.length;W<X;++W){if((j=s[W]).index=W,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var ee=10*Math.sqrt(.5+W),Z=W*xa;j.x=ee*Math.cos(Z),j.y=ee*Math.sin(Z)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function Y(j){return j.initialize&&j.initialize(s,D),j}return s==null&&(s=[]),_(),l={tick:P,restart:function(){return T.restart(O),l},stop:function(){return T.stop(),l},nodes:function(j){return arguments.length?(s=j,_(),y.forEach(Y),l):s},alpha:function(j){return arguments.length?(d=+j,l):d},alphaMin:function(j){return arguments.length?(h=+j,l):h},alphaDecay:function(j){return arguments.length?(f=+j,l):+f},alphaTarget:function(j){return arguments.length?(g=+j,l):g},velocityDecay:function(j){return arguments.length?(b=1-j,l):1-b},randomSource:function(j){return arguments.length?(D=j,y.forEach(Y),l):D},force:function(j,W){return arguments.length>1?(W==null?y.delete(j):y.set(j,Y(W)),l):y.get(j)},find:function(j,W,X){var ee,Z,K,re,oe,Ce=0,Ie=s.length;for(X==null?X=1/0:X*=X,Ce=0;Ce<Ie;++Ce)(K=(ee=j-(re=s[Ce]).x)*ee+(Z=W-re.y)*Z)<X&&(oe=re,X=K);return oe},on:function(j,W){return arguments.length>1?(k.on(j,W),l):k.on(j)}}},B.forceX=function(s){var l,d,h,f=hn(.1);function g(y){for(var T,k=0,D=l.length;k<D;++k)(T=l[k]).vx+=(h[k]-T.x)*d[k]*y}function b(){if(l){var y,T=l.length;for(d=new Array(T),h=new Array(T),y=0;y<T;++y)d[y]=isNaN(h[y]=+s(l[y],y,l))?0:+f(l[y],y,l)}}return typeof s!="function"&&(s=hn(s==null?0:+s)),g.initialize=function(y){l=y,b()},g.strength=function(y){return arguments.length?(f=typeof y=="function"?y:hn(+y),b(),g):f},g.x=function(y){return arguments.length?(s=typeof y=="function"?y:hn(+y),b(),g):s},g},B.forceY=function(s){var l,d,h,f=hn(.1);function g(y){for(var T,k=0,D=l.length;k<D;++k)(T=l[k]).vy+=(h[k]-T.y)*d[k]*y}function b(){if(l){var y,T=l.length;for(d=new Array(T),h=new Array(T),y=0;y<T;++y)d[y]=isNaN(h[y]=+s(l[y],y,l))?0:+f(l[y],y,l)}}return typeof s!="function"&&(s=hn(s==null?0:+s)),g.initialize=function(y){l=y,b()},g.strength=function(y){return arguments.length?(f=typeof y=="function"?y:hn(+y),b(),g):f},g.y=function(y){return arguments.length?(s=typeof y=="function"?y:hn(+y),b(),g):s},g},B.formatDefaultLocale=di,B.formatLocale=an,B.formatSpecifier=Qe,B.fsum=function(s,l){const d=new hi;if(l===void 0)for(let h of s)(h=+h)&&d.add(h);else{let h=-1;for(let f of s)(f=+l(f,++h,s))&&d.add(f)}return+d},B.geoAlbers=bm,B.geoAlbersUsa=function(){var s,l,d,h,f,g,b=bm(),y=jh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),T=jh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k={point:function(P,_){g=[P,_]}};function D(P){var _=P[0],Y=P[1];return g=null,d.point(_,Y),g||(h.point(_,Y),g)||(f.point(_,Y),g)}function O(){return s=l=null,D}return D.invert=function(P){var _=b.scale(),Y=b.translate(),j=(P[0]-Y[0])/_,W=(P[1]-Y[1])/_;return(W>=.12&&W<.234&&j>=-.425&&j<-.214?y:W>=.166&&W<.234&&j>=-.214&&j<-.115?T:b).invert(P)},D.stream=function(P){return s&&l===P?s:(_=[b.stream(l=P),y.stream(P),T.stream(P)],Y=_.length,s={point:function(j,W){for(var X=-1;++X<Y;)_[X].point(j,W)},sphere:function(){for(var j=-1;++j<Y;)_[j].sphere()},lineStart:function(){for(var j=-1;++j<Y;)_[j].lineStart()},lineEnd:function(){for(var j=-1;++j<Y;)_[j].lineEnd()},polygonStart:function(){for(var j=-1;++j<Y;)_[j].polygonStart()},polygonEnd:function(){for(var j=-1;++j<Y;)_[j].polygonEnd()}});var _,Y},D.precision=function(P){return arguments.length?(b.precision(P),y.precision(P),T.precision(P),O()):b.precision()},D.scale=function(P){return arguments.length?(b.scale(P),y.scale(.35*P),T.scale(P),D.translate(b.translate())):b.scale()},D.translate=function(P){if(!arguments.length)return b.translate();var _=b.scale(),Y=+P[0],j=+P[1];return d=b.translate(P).clipExtent([[Y-.455*_,j-.238*_],[Y+.455*_,j+.238*_]]).stream(k),h=y.translate([Y-.307*_,j+.201*_]).clipExtent([[Y-.425*_+Pt,j+.12*_+Pt],[Y-.214*_-Pt,j+.234*_-Pt]]).stream(k),f=T.translate([Y-.205*_,j+.212*_]).clipExtent([[Y-.214*_+Pt,j+.166*_+Pt],[Y-.115*_-Pt,j+.234*_-Pt]]).stream(k),O()},D.fitExtent=function(P,_){return Vh(D,P,_)},D.fitSize=function(P,_){return ff(D,P,_)},D.fitWidth=function(P,_){return gf(D,P,_)},D.fitHeight=function(P,_){return mf(D,P,_)},D.scale(1070)},B.geoArea=function(s){return mh=new hi,yi(s,_r),2*mh},B.geoAzimuthalEqualArea=function(){return Hr(yf).scale(124.75).clipAngle(179.999)},B.geoAzimuthalEqualAreaRaw=yf,B.geoAzimuthalEquidistant=function(){return Hr(wf).scale(79.4188).clipAngle(179.999)},B.geoAzimuthalEquidistantRaw=wf,B.geoBounds=function(s){var l,d,h,f,g,b,y;if(Xi=Wt=-(xn=Dn=1/0),hl=[],yi(s,Do),d=hl.length){for(hl.sort(l0),l=1,g=[h=hl[0]];l<d;++l)kg(h,(f=hl[l])[0])||kg(h,f[1])?(ks(h[0],f[1])>ks(h[0],h[1])&&(h[1]=f[1]),ks(f[0],h[1])>ks(h[0],h[1])&&(h[0]=f[0])):g.push(h=f);for(b=-1/0,l=0,h=g[d=g.length-1];l<=d;h=f,++l)f=g[l],(y=ks(h[1],f[0]))>b&&(b=y,xn=f[0],Wt=h[1])}return hl=$o=null,xn===1/0||Dn===1/0?[[NaN,NaN],[NaN,NaN]]:[[xn,Dn],[Wt,Xi]]},B.geoCentroid=function(s){du=xh=Ch=kh=Th=Ah=Sh=Eh=0,qp=new hi,Vp=new hi,jp=new hi,yi(s,fr);var l=+qp,d=+Vp,h=+jp,f=Le(l,d,h);return f<Ra&&(l=Ah,d=Sh,h=Eh,xh<Pt&&(l=Ch,d=kh,h=Th),(f=Le(l,d,h))<Ra)?[NaN,NaN]:[Hi(d,l)*pn,bi(h/f)*pn]},B.geoCircle=function(){var s,l,d=ld([0,0]),h=ld(90),f=ld(6),g={point:function(y,T){s.push(y=l(y,T)),y[0]*=pn,y[1]*=pn}};function b(){var y=d.apply(this,arguments),T=h.apply(this,arguments)*kt,k=f.apply(this,arguments)*kt;return s=[],l=Kp(-y[0]*kt,-y[1]*kt,0).invert,Mg(g,T,k,1),y={type:"Polygon",coordinates:[s]},s=l=null,y}return b.center=function(y){return arguments.length?(d=typeof y=="function"?y:ld([+y[0],+y[1]]),b):d},b.radius=function(y){return arguments.length?(h=typeof y=="function"?y:ld(+y),b):h},b.precision=function(y){return arguments.length?(f=typeof y=="function"?y:ld(+y),b):f},b},B.geoClipAntimeridian=Qp,B.geoClipCircle=_g,B.geoClipExtent=function(){var s,l,d,h=0,f=0,g=960,b=500;return d={stream:function(y){return s&&l===y?s:s=Ph(h,f,g,b)(l=y)},extent:function(y){return arguments.length?(h=+y[0][0],f=+y[0][1],g=+y[1][0],b=+y[1][1],s=l=null,d):[[h,f],[g,b]]}}},B.geoClipRectangle=Ph,B.geoConicConformal=function(){return bf(xm).scale(109.5).parallels([30,30])},B.geoConicConformalRaw=xm,B.geoConicEqualArea=jh,B.geoConicEqualAreaRaw=vm,B.geoConicEquidistant=function(){return bf(Cm).scale(131.154).center([0,13.9389])},B.geoConicEquidistantRaw=Cm,B.geoContains=function(s,l){return(s&&Fg.hasOwnProperty(s.type)?Fg[s.type]:Oh)(s,l)},B.geoDistance=Bh,B.geoEqualEarth=function(){return Hr(xf).scale(177.158)},B.geoEqualEarthRaw=xf,B.geoEquirectangular=function(){return Hr(Cu).scale(152.63)},B.geoEquirectangularRaw=Cu,B.geoGnomonic=function(){return Hr(Cf).scale(144.049).clipAngle(60)},B.geoGnomonicRaw=Cf,B.geoGraticule=Yg,B.geoGraticule10=function(){return Yg()()},B.geoIdentity=function(){var s,l,d,h,f,g,b,y=1,T=0,k=0,D=1,O=1,P=0,_=null,Y=1,j=1,W=yu({point:function(K,re){var oe=Z([K,re]);this.stream.point(oe[0],oe[1])}}),X=pu;function ee(){return Y=y*D,j=y*O,g=b=null,Z}function Z(K){var re=K[0]*Y,oe=K[1]*j;if(P){var Ce=oe*s-re*l;re=re*s+oe*l,oe=Ce}return[re+T,oe+k]}return Z.invert=function(K){var re=K[0]-T,oe=K[1]-k;if(P){var Ce=oe*s+re*l;re=re*s-oe*l,oe=Ce}return[re/Y,oe/j]},Z.stream=function(K){return g&&b===K?g:g=W(X(b=K))},Z.postclip=function(K){return arguments.length?(X=K,_=d=h=f=null,ee()):X},Z.clipExtent=function(K){return arguments.length?(X=K==null?(_=d=h=f=null,pu):Ph(_=+K[0][0],d=+K[0][1],h=+K[1][0],f=+K[1][1]),ee()):_==null?null:[[_,d],[h,f]]},Z.scale=function(K){return arguments.length?(y=+K,ee()):y},Z.translate=function(K){return arguments.length?(T=+K[0],k=+K[1],ee()):[T,k]},Z.angle=function(K){return arguments.length?(l=nt(P=K%360*kt),s=pt(P),ee()):P*pn},Z.reflectX=function(K){return arguments.length?(D=K?-1:1,ee()):D<0},Z.reflectY=function(K){return arguments.length?(O=K?-1:1,ee()):O<0},Z.fitExtent=function(K,re){return Vh(Z,K,re)},Z.fitSize=function(K,re){return ff(Z,K,re)},Z.fitWidth=function(K,re){return gf(Z,K,re)},Z.fitHeight=function(K,re){return mf(Z,K,re)},Z},B.geoInterpolate=function(s,l){var d=s[0]*kt,h=s[1]*kt,f=l[0]*kt,g=l[1]*kt,b=pt(h),y=nt(h),T=pt(g),k=nt(g),D=b*pt(d),O=b*nt(d),P=T*pt(f),_=T*nt(f),Y=2*bi(Un(is(g-h)+b*T*is(f-d))),j=nt(Y),W=Y?function(X){var ee=nt(X*=Y)/j,Z=nt(Y-X)/j,K=Z*D+ee*P,re=Z*O+ee*_,oe=Z*y+ee*k;return[Hi(re,K)*pn,Hi(oe,Un(K*K+re*re))*pn]}:function(){return[d*pn,h*pn]};return W.distance=Y,W},B.geoLength=zg,B.geoMercator=function(){return wm(xu).scale(961/Kn)},B.geoMercatorRaw=xu,B.geoNaturalEarth1=function(){return Hr(kf).scale(175.295)},B.geoNaturalEarth1Raw=kf,B.geoOrthographic=function(){return Hr(Tf).scale(249.5).clipAngle(90.000001)},B.geoOrthographicRaw=Tf,B.geoPath=function(s,l){let d,h,f=3,g=4.5;function b(y){return y&&(typeof g=="function"&&h.pointRadius(+g.apply(this,arguments)),yi(y,d(h))),h.result()}return b.area=function(y){return yi(y,d(Jg)),Jg.result()},b.measure=function(y){return yi(y,d(cm)),cm.result()},b.bounds=function(y){return yi(y,d(_h)),_h.result()},b.centroid=function(y){return yi(y,d(am)),am.result()},b.projection=function(y){return arguments.length?(d=y==null?(s=null,pu):(s=y).stream,b):s},b.context=function(y){return arguments.length?(h=y==null?(l=null,new pm(f)):new sm(l=y),typeof g!="function"&&h.pointRadius(g),b):l},b.pointRadius=function(y){return arguments.length?(g=typeof y=="function"?y:(h.pointRadius(+y),+y),b):g},b.digits=function(y){if(!arguments.length)return f;if(y==null)f=null;else{const T=Math.floor(y);if(!(T>=0))throw new RangeError(`invalid digits: ${y}`);f=T}return l===null&&(h=new pm(f)),b},b.projection(s).digits(f).context(l)},B.geoProjection=Hr,B.geoProjectionMutator=vf,B.geoRotation=Ig,B.geoStereographic=function(){return Hr(Af).scale(250).clipAngle(142)},B.geoStereographicRaw=Af,B.geoStream=yi,B.geoTransform=function(s){return{stream:yu(s)}},B.geoTransverseMercator=function(){var s=wm(Sf),l=s.center,d=s.rotate;return s.center=function(h){return arguments.length?l([-h[1],h[0]]):[(h=l())[1],-h[0]]},s.rotate=function(h){return arguments.length?d([h[0],h[1],h.length>2?h[2]+90:90]):[(h=d())[0],h[1],h[2]-90]},d([0,0,90]).scale(159.155)},B.geoTransverseMercatorRaw=Sf,B.gray=function(s,l){return new fi(s,0,0,l??1)},B.greatest=Is,B.greatestIndex=function(s,l=In){if(l.length===1)return $a(s,l);let d,h=-1,f=-1;for(const g of s)++f,(h<0?l(g,g)===0:l(g,d)>0)&&(d=g,h=f);return h},B.group=ot,B.groupSort=function(s,l,d){return(l.length!==2?Xs(ls(s,l,d),([h,f],[g,b])=>In(f,b)||In(h,g)):Xs(ot(s,d),([h,f],[g,b])=>l(f,b)||In(h,g))).map(([h])=>h)},B.groups=os,B.hcl=dr,B.hierarchy=Ef,B.histogram=$s,B.hsl=kn,B.html=bt,B.image=function(s,l){return new Promise(function(d,h){var f=new Image;for(var g in l)f[g]=l[g];f.onerror=h,f.onload=function(){d(f)},f.src=s})},B.index=function(s,...l){return Ks(s,Ys,No,l)},B.indexes=function(s,...l){return Ks(s,Array.from,No,l)},B.interpolate=Pa,B.interpolateArray=function(s,l){return(Oi(l)?li:_n)(s,l)},B.interpolateBasis=Je,B.interpolateBasisClosed=tt,B.interpolateBlues=kw,B.interpolateBrBG=nw,B.interpolateBuGn=uw,B.interpolateBuPu=hw,B.interpolateCividis=function(s){return s=Math.max(0,Math.min(1,s)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-s*(35.34-s*(2381.73-s*(6402.7-s*(7024.72-2710.57*s)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+s*(170.73+s*(52.82-s*(131.46-s*(176.58-67.37*s)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+s*(442.36-s*(2482.43-s*(6167.24-s*(6614.94-2475.67*s)))))))+")"},B.interpolateCool=Mw,B.interpolateCubehelix=Md,B.interpolateCubehelixDefault=Dw,B.interpolateCubehelixLong=Ri,B.interpolateDate=La,B.interpolateDiscrete=function(s){var l=s.length;return function(d){return s[Math.max(0,Math.min(l-1,Math.floor(d*l)))]}},B.interpolateGnBu=pw,B.interpolateGreens=Tw,B.interpolateGreys=Aw,B.interpolateHcl=Za,B.interpolateHclLong=fo,B.interpolateHsl=Dc,B.interpolateHslLong=Dd,B.interpolateHue=function(s,l){var d=qt(+s,+l);return function(h){var f=d(h);return f-360*Math.floor(f/360)}},B.interpolateInferno=Rw,B.interpolateLab=function(s,l){var d=vt((s=cr(s)).l,(l=cr(l)).l),h=vt(s.a,l.a),f=vt(s.b,l.b),g=vt(s.opacity,l.opacity);return function(b){return s.l=d(b),s.a=h(b),s.b=f(b),s.opacity=g(b),s+""}},B.interpolateMagma=Ow,B.interpolateNumber=zn,B.interpolateNumberArray=li,B.interpolateObject=ti,B.interpolateOrRd=fw,B.interpolateOranges=$w,B.interpolatePRGn=iw,B.interpolatePiYG=aw,B.interpolatePlasma=Nw,B.interpolatePuBu=mw,B.interpolatePuBuGn=gw,B.interpolatePuOr=sw,B.interpolatePuRd=vw,B.interpolatePurples=Sw,B.interpolateRainbow=function(s){(s<0||s>1)&&(s-=Math.floor(s));var l=Math.abs(s-.5);return lp.h=360*s-100,lp.s=1.5-1.5*l,lp.l=.8-.9*l,lp+""},B.interpolateRdBu=rw,B.interpolateRdGy=ow,B.interpolateRdPu=bw,B.interpolateRdYlBu=lw,B.interpolateRdYlGn=cw,B.interpolateReds=Ew,B.interpolateRgb=rn,B.interpolateRgbBasis=Lt,B.interpolateRgbBasisClosed=ki,B.interpolateRound=pa,B.interpolateSinebow=function(s){var l;return s=(.5-s)*Math.PI,cp.r=255*(l=Math.sin(s))*l,cp.g=255*(l=Math.sin(s+Lw))*l,cp.b=255*(l=Math.sin(s+Pw))*l,cp+""},B.interpolateSpectral=dw,B.interpolateString=ur,B.interpolateTransformCss=po,B.interpolateTransformSvg=$d,B.interpolateTurbo=function(s){return s=Math.max(0,Math.min(1,s)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+s*(1172.33-s*(10793.56-s*(33300.12-s*(38394.49-14825.05*s)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+s*(557.33+s*(1225.33-s*(3574.96-s*(1073.77+707.56*s)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+s*(3211.1-s*(15327.97-s*(27814-s*(22569.18-6838.66*s)))))))+")"},B.interpolateViridis=Bw,B.interpolateWarm=Iw,B.interpolateYlGn=ww,B.interpolateYlGnBu=yw,B.interpolateYlOrBr=xw,B.interpolateYlOrRd=Cw,B.interpolateZoom=$c,B.interrupt=Ui,B.intersection=function(s,...l){s=new wi(s),l=l.map(Vi);e:for(const d of s)for(const h of l)if(!h.has(d)){s.delete(d);continue e}return s},B.interval=function(s,l,d){var h=new ol,f=l;return l==null?(h.restart(s,l,d),h):(h._restart=h.restart,h.restart=function(g,b,y){b=+b,y=y==null?rl():+y,h._restart(function T(k){k+=f,h._restart(T,f+=b,y),g(k)},b,y)},h.restart(s,l,d),h)},B.isoFormat=H1,B.isoParse=V1,B.json=function(s,l){return fetch(s,l).then(qn)},B.lab=cr,B.lch=function(s,l,d,h){return arguments.length===1?ha(s):new Bi(d,l,s,h??1)},B.least=function(s,l=In){let d,h=!1;if(l.length===1){let f;for(const g of s){const b=l(g);(h?In(b,f)<0:In(b,b)===0)&&(d=g,f=b,h=!0)}}else for(const f of s)(h?l(f,d)<0:l(f,f)===0)&&(d=f,h=!0);return d},B.leastIndex=ft,B.line=ag,B.lineRadial=vb,B.link=gp,B.linkHorizontal=function(){return gp(wb)},B.linkRadial=function(){const s=gp(Xw);return s.angle=s.x,delete s.x,s.radius=s.y,delete s.y,s},B.linkVertical=function(){return gp(xb)},B.local=R,B.map=function(s,l){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof l!="function")throw new TypeError("mapper is not a function");return Array.from(s,(d,h)=>l(d,h,s))},B.matcher=to,B.max=ea,B.maxIndex=$a,B.mean=function(s,l){let d=0,h=0;if(l===void 0)for(let f of s)f!=null&&(f=+f)>=f&&(++d,h+=f);else{let f=-1;for(let g of s)(g=l(g,++f,s))!=null&&(g=+g)>=g&&(++d,h+=g)}if(d)return h/d},B.median=function(s,l){return Ua(s,.5,l)},B.medianIndex=function(s,l){return Jr(s,.5,l)},B.merge=Zs,B.min=Wa,B.minIndex=ca,B.mode=function(s,l){const d=new ja;if(l===void 0)for(let g of s)g!=null&&g>=g&&d.set(g,(d.get(g)||0)+1);else{let g=-1;for(let b of s)(b=l(b,++g,s))!=null&&b>=b&&d.set(b,(d.get(b)||0)+1)}let h,f=0;for(const[g,b]of d)b>f&&(f=b,h=g);return h},B.namespace=ir,B.namespaces=Ho,B.nice=Xr,B.now=rl,B.pack=function(){var s=null,l=1,d=1,h=ic;function f(g){const b=$f();return g.x=l/2,g.y=d/2,s?g.eachBefore(Pm(s)).eachAfter(If(h,.5,b)).eachBefore(Bm(1)):g.eachBefore(Pm(q0)).eachAfter(If(ic,1,b)).eachAfter(If(h,g.r/Math.min(l,d),b)).eachBefore(Bm(Math.min(l,d)/(2*g.r))),g}return f.radius=function(g){return arguments.length?(s=Gh(g),f):s},f.size=function(g){return arguments.length?(l=+g[0],d=+g[1],f):[l,d]},f.padding=function(g){return arguments.length?(h=typeof g=="function"?g:hd(+g),f):h},f},B.packEnclose=function(s){return Sm(s,$f())},B.packSiblings=function(s){return Lm(s,$f()),s},B.pairs=function(s,l=dc){const d=[];let h,f=!1;for(const g of s)f&&d.push(l(h,g)),h=g,f=!0;return d},B.partition=function(){var s=1,l=1,d=0,h=!1;function f(g){var b=g.height+1;return g.x0=g.y0=d,g.x1=s,g.y1=l/b,g.eachBefore(function(y,T){return function(k){k.children&&$u(k,k.x0,y*(k.depth+1)/T,k.x1,y*(k.depth+2)/T);var D=k.x0,O=k.y0,P=k.x1-d,_=k.y1-d;P<D&&(D=P=(D+P)/2),_<O&&(O=_=(O+_)/2),k.x0=D,k.y0=O,k.x1=P,k.y1=_}}(l,b)),h&&g.eachBefore(Om),g}return f.round=function(g){return arguments.length?(h=!!g,f):h},f.size=function(g){return arguments.length?(s=+g[0],l=+g[1],f):[s,l]},f.padding=function(g){return arguments.length?(d=+g,f):d},f},B.path=Qc,B.pathRound=function(s=3){return new cl(+s)},B.permute=L,B.pie=function(){var s=Yw,l=Gw,d=null,h=ln(0),f=ln(bl),g=ln(0);function b(y){var T,k,D,O,P,_=(y=pp(y)).length,Y=0,j=new Array(_),W=new Array(_),X=+h.apply(this,arguments),ee=Math.min(bl,Math.max(-bl,f.apply(this,arguments)-X)),Z=Math.min(Math.abs(ee)/_,g.apply(this,arguments)),K=Z*(ee<0?-1:1);for(T=0;T<_;++T)(P=W[j[T]=T]=+s(y[T],T,y))>0&&(Y+=P);for(l!=null?j.sort(function(re,oe){return l(W[re],W[oe])}):d!=null&&j.sort(function(re,oe){return d(y[re],y[oe])}),T=0,D=Y?(ee-_*K)/Y:0;T<_;++T,X=O)k=j[T],O=X+((P=W[k])>0?P*D:0)+K,W[k]={data:y[k],index:T,value:P,startAngle:X,endAngle:O,padAngle:Z};return W}return b.value=function(y){return arguments.length?(s=typeof y=="function"?y:ln(+y),b):s},b.sortValues=function(y){return arguments.length?(l=y,d=null,b):l},b.sort=function(y){return arguments.length?(d=y,l=null,b):d},b.startAngle=function(y){return arguments.length?(h=typeof y=="function"?y:ln(+y),b):h},b.endAngle=function(y){return arguments.length?(f=typeof y=="function"?y:ln(+y),b):f},b.padAngle=function(y){return arguments.length?(g=typeof y=="function"?y:ln(+y),b):g},b},B.piecewise=Ld,B.pointRadial=Hu,B.pointer=ne,B.pointers=function(s,l){return s.target&&(s=Q(s),l===void 0&&(l=s.currentTarget),s=s.touches||[s]),Array.from(s,d=>ne(d,l))},B.polygonArea=function(s){for(var l,d=-1,h=s.length,f=s[h-1],g=0;++d<h;)l=f,f=s[d],g+=l[1]*f[0]-l[0]*f[1];return g/2},B.polygonCentroid=function(s){for(var l,d,h=-1,f=s.length,g=0,b=0,y=s[f-1],T=0;++h<f;)l=y,y=s[h],T+=d=l[0]*y[1]-y[0]*l[1],g+=(l[0]+y[0])*d,b+=(l[1]+y[1])*d;return[g/(T*=3),b/T]},B.polygonContains=function(s,l){for(var d,h,f=s.length,g=s[f-1],b=l[0],y=l[1],T=g[0],k=g[1],D=!1,O=0;O<f;++O)d=(g=s[O])[0],(h=g[1])>y!=k>y&&b<(T-d)*(y-h)/(k-h)+d&&(D=!D),T=d,k=h;return D},B.polygonHull=function(s){if((d=s.length)<3)return null;var l,d,h=new Array(d),f=new Array(d);for(l=0;l<d;++l)h[l]=[+s[l][0],+s[l][1],l];for(h.sort(Q0),l=0;l<d;++l)f[l]=[h[l][0],-h[l][1]];var g=Hm(h),b=Hm(f),y=b[0]===g[0],T=b[b.length-1]===g[g.length-1],k=[];for(l=g.length-1;l>=0;--l)k.push(s[h[g[l]][2]]);for(l=+y;l<b.length-T;++l)k.push(s[h[b[l]][2]]);return k},B.polygonLength=function(s){for(var l,d,h=-1,f=s.length,g=s[f-1],b=g[0],y=g[1],T=0;++h<f;)l=b,d=y,l-=b=(g=s[h])[0],d-=y=g[1],T+=Math.hypot(l,d);return T},B.precisionFixed=Ca,B.precisionPrefix=_i,B.precisionRound=Ii,B.quadtree=Vt,B.quantile=Ua,B.quantileIndex=Jr,B.quantileSorted=Ms,B.quantize=function(s,l){for(var d=new Array(l),h=0;h<l;++h)d[h]=s(h/(l-1));return d},B.quickselect=Ds,B.radialArea=bb,B.radialLine=vb,B.randomBates=ty,B.randomBernoulli=ay,B.randomBeta=jm,B.randomBinomial=Wm,B.randomCauchy=ry,B.randomExponential=ny,B.randomGamma=Rf,B.randomGeometric=Vm,B.randomInt=Z0,B.randomIrwinHall=qm,B.randomLcg=function(s=Math.random()){let l=0|(0<=s&&s<1?s/Um:Math.abs(s));return()=>(l=1664525*l+1013904223|0,Um*(l>>>0))},B.randomLogNormal=ey,B.randomLogistic=oy,B.randomNormal=Of,B.randomPareto=iy,B.randomPoisson=ly,B.randomUniform=J0,B.randomWeibull=sy,B.range=cs,B.rank=function(s,l=In){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let d=Array.from(s);const h=new Float64Array(d.length);l.length!==2&&(d=d.map(l),l=In);const f=(y,T)=>l(d[y],d[T]);let g,b;return Uint32Array.from(d,(y,T)=>T).sort(l===In?(y,T)=>Ss(d[y],d[T]):Pn(f)).forEach((y,T)=>{const k=f(y,g===void 0?y:g);k>=0?((g===void 0||k>0)&&(g=y,b=T),h[y]=b):h[y]=NaN}),h},B.reduce=function(s,l,d){if(typeof l!="function")throw new TypeError("reducer is not a function");const h=s[Symbol.iterator]();let f,g,b=-1;if(arguments.length<3){if({done:f,value:d}=h.next(),f)return;++b}for(;{done:f,value:g}=h.next(),!f;)d=l(d,g,++b,s);return d},B.reverse=function(s){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(s).reverse()},B.rgb=jn,B.ribbon=function(){return dl()},B.ribbonArrow=function(){return dl(uh)},B.rollup=ls,B.rollups=As,B.scaleBand=zf,B.scaleDiverging=function s(){var l=fl(op()(Fa));return l.copy=function(){return ml(l,s())},Io.apply(l,arguments)},B.scaleDivergingLog=function s(){var l=qf(op()).domain([.1,1,10]);return l.copy=function(){return ml(l,s()).base(l.base())},Io.apply(l,arguments)},B.scaleDivergingPow=tg,B.scaleDivergingSqrt=function(){return tg.apply(null,arguments).exponent(.5)},B.scaleDivergingSymlog=function s(){var l=Vf(op());return l.copy=function(){return ml(l,s()).constant(l.constant())},Io.apply(l,arguments)},B.scaleIdentity=function s(l){var d;function h(f){return f==null||isNaN(f=+f)?d:f}return h.invert=h,h.domain=h.range=function(f){return arguments.length?(l=Array.from(f,Jh),h):l.slice()},h.unknown=function(f){return arguments.length?(d=f,h):d},h.copy=function(){return s(l).unknown(d)},l=arguments.length?Array.from(l,Jh):[0,1],fl(h)},B.scaleImplicit=Nf,B.scaleLinear=function s(){var l=Hf();return l.copy=function(){return Du(l,s())},Ws.apply(l,arguments),fl(l)},B.scaleLog=function s(){const l=qf(Zh()).domain([1,10]);return l.copy=()=>Du(l,s()).base(l.base()),Ws.apply(l,arguments),l},B.scaleOrdinal=_f,B.scalePoint=function(){return Gm(zf.apply(null,arguments).paddingInner(1))},B.scalePow=Wf,B.scaleQuantile=function s(){var l,d=[],h=[],f=[];function g(){var y=0,T=Math.max(1,h.length);for(f=new Array(T-1);++y<T;)f[y-1]=Ms(d,y/T);return b}function b(y){return y==null||isNaN(y=+y)?l:h[qa(f,y)]}return b.invertExtent=function(y){var T=h.indexOf(y);return T<0?[NaN,NaN]:[T>0?f[T-1]:d[0],T<f.length?f[T]:d[d.length-1]]},b.domain=function(y){if(!arguments.length)return d.slice();d=[];for(let T of y)T==null||isNaN(T=+T)||d.push(T);return d.sort(In),g()},b.range=function(y){return arguments.length?(h=Array.from(y),g()):h.slice()},b.unknown=function(y){return arguments.length?(l=y,b):l},b.quantiles=function(){return f.slice()},b.copy=function(){return s().domain(d).range(h).unknown(l)},Ws.apply(b,arguments)},B.scaleQuantize=function s(){var l,d=0,h=1,f=1,g=[.5],b=[0,1];function y(k){return k!=null&&k<=k?b[qa(g,k,0,f)]:l}function T(){var k=-1;for(g=new Array(f);++k<f;)g[k]=((k+1)*h-(k-f)*d)/(f+1);return y}return y.domain=function(k){return arguments.length?([d,h]=k,d=+d,h=+h,T()):[d,h]},y.range=function(k){return arguments.length?(f=(b=Array.from(k)).length-1,T()):b.slice()},y.invertExtent=function(k){var D=b.indexOf(k);return D<0?[NaN,NaN]:D<1?[d,g[0]]:D>=f?[g[f-1],h]:[g[D-1],g[D]]},y.unknown=function(k){return arguments.length&&(l=k),y},y.thresholds=function(){return g.slice()},y.copy=function(){return s().domain([d,h]).range(b).unknown(l)},Ws.apply(fl(y),arguments)},B.scaleRadial=function s(){var l,d=Hf(),h=[0,1],f=!1;function g(b){var y=my(d(b));return isNaN(y)?l:f?Math.round(y):y}return g.invert=function(b){return d.invert(iv(b))},g.domain=function(b){return arguments.length?(d.domain(b),g):d.domain()},g.range=function(b){return arguments.length?(d.range((h=Array.from(b,Jh)).map(iv)),g):h.slice()},g.rangeRound=function(b){return g.range(b).round(!0)},g.round=function(b){return arguments.length?(f=!!b,g):f},g.clamp=function(b){return arguments.length?(d.clamp(b),g):d.clamp()},g.unknown=function(b){return arguments.length?(l=b,g):l},g.copy=function(){return s(d.domain(),h).round(f).clamp(d.clamp()).unknown(l)},Ws.apply(g,arguments),fl(g)},B.scaleSequential=function s(){var l=fl(rp()(Fa));return l.copy=function(){return ml(l,s())},Io.apply(l,arguments)},B.scaleSequentialLog=function s(){var l=qf(rp()).domain([1,10]);return l.copy=function(){return ml(l,s()).base(l.base())},Io.apply(l,arguments)},B.scaleSequentialPow=eg,B.scaleSequentialQuantile=function s(){var l=[],d=Fa;function h(f){if(f!=null&&!isNaN(f=+f))return d((qa(l,f,1)-1)/(l.length-1))}return h.domain=function(f){if(!arguments.length)return l.slice();l=[];for(let g of f)g==null||isNaN(g=+g)||l.push(g);return l.sort(In),h},h.interpolator=function(f){return arguments.length?(d=f,h):d},h.range=function(){return l.map((f,g)=>d(g/(l.length-1)))},h.quantiles=function(f){return Array.from({length:f+1},(g,b)=>Ua(l,b/f))},h.copy=function(){return s(d).domain(l)},Io.apply(h,arguments)},B.scaleSequentialSqrt=function(){return eg.apply(null,arguments).exponent(.5)},B.scaleSequentialSymlog=function s(){var l=Vf(rp());return l.copy=function(){return ml(l,s()).constant(l.constant())},Io.apply(l,arguments)},B.scaleSqrt=function(){return Wf.apply(null,arguments).exponent(.5)},B.scaleSymlog=function s(){var l=Vf(Zh());return l.copy=function(){return Du(l,s()).constant(l.constant())},Ws.apply(l,arguments)},B.scaleThreshold=function s(){var l,d=[.5],h=[0,1],f=1;function g(b){return b!=null&&b<=b?h[qa(d,b,0,f)]:l}return g.domain=function(b){return arguments.length?(d=Array.from(b),f=Math.min(d.length,h.length-1),g):d.slice()},g.range=function(b){return arguments.length?(h=Array.from(b),f=Math.min(d.length,h.length-1),g):h.slice()},g.invertExtent=function(b){var y=h.indexOf(b);return[d[y-1],d[y]]},g.unknown=function(b){return arguments.length?(l=b,g):l},g.copy=function(){return s().domain(d).range(h).unknown(l)},Ws.apply(g,arguments)},B.scaleTime=function(){return Ws.apply(Zf(yv,wv,qr,ap,gd,fd,np,ep,Mo,B.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},B.scaleUtc=function(){return Ws.apply(Zf(vv,bv,Vr,sp,md,Pu,ip,tp,Mo,B.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},B.scan=function(s,l){const d=ft(s,l);return d<0?void 0:d},B.schemeAccent=G1,B.schemeBlues=sb,B.schemeBrBG=_v,B.schemeBuGn=Gv,B.schemeBuPu=Yv,B.schemeCategory10=U1,B.schemeDark2=Y1,B.schemeGnBu=Kv,B.schemeGreens=rb,B.schemeGreys=ob,B.schemeOrRd=Xv,B.schemeOranges=db,B.schemePRGn=zv,B.schemePaired=K1,B.schemePastel1=X1,B.schemePastel2=Q1,B.schemePiYG=Fv,B.schemePuBu=Jv,B.schemePuBuGn=Qv,B.schemePuOr=Hv,B.schemePuRd=Zv,B.schemePurples=lb,B.schemeRdBu=qv,B.schemeRdGy=Vv,B.schemeRdPu=eb,B.schemeRdYlBu=jv,B.schemeRdYlGn=Wv,B.schemeReds=cb,B.schemeSet1=J1,B.schemeSet2=Z1,B.schemeSet3=ew,B.schemeSpectral=Uv,B.schemeTableau10=tw,B.schemeYlGn=nb,B.schemeYlGnBu=tb,B.schemeYlOrBr=ib,B.schemeYlOrRd=ab,B.select=x,B.selectAll=function(s){return typeof s=="string"?new zi([document.querySelectorAll(s)],[document.documentElement]):new zi([qo(s)],Tr)},B.selection=or,B.selector=eo,B.selectorAll=ar,B.shuffle=xi,B.shuffler=zo,B.some=function(s,l){if(typeof l!="function")throw new TypeError("test is not a function");let d=-1;for(const h of s)if(l(h,++d,s))return!0;return!1},B.sort=Xs,B.stack=function(){var s=ln([]),l=wd,d=yd,h=px;function f(g){var b,y,T=Array.from(s.apply(this,arguments),fx),k=T.length,D=-1;for(const O of g)for(b=0,++D;b<k;++b)(T[b][D]=[0,+h(O,T[b].key,D,g)]).data=O;for(b=0,y=pp(l(T));b<k;++b)T[y[b]].index=b;return d(T,y),T}return f.keys=function(g){return arguments.length?(s=typeof g=="function"?g:ln(Array.from(g)),f):s},f.value=function(g){return arguments.length?(h=typeof g=="function"?g:ln(+g),f):h},f.order=function(g){return arguments.length?(l=g==null?wd:typeof g=="function"?g:ln(Array.from(g)),f):l},f.offset=function(g){return arguments.length?(d=g??yd,f):d},f},B.stackOffsetDiverging=function(s,l){if((y=s.length)>0)for(var d,h,f,g,b,y,T=0,k=s[l[0]].length;T<k;++T)for(g=b=0,d=0;d<y;++d)(f=(h=s[l[d]][T])[1]-h[0])>0?(h[0]=g,h[1]=g+=f):f<0?(h[1]=b,h[0]=b+=f):(h[0]=0,h[1]=f)},B.stackOffsetExpand=function(s,l){if((h=s.length)>0){for(var d,h,f,g=0,b=s[0].length;g<b;++g){for(f=d=0;d<h;++d)f+=s[d][g][1]||0;if(f)for(d=0;d<h;++d)s[d][g][1]/=f}yd(s,l)}},B.stackOffsetNone=yd,B.stackOffsetSilhouette=function(s,l){if((d=s.length)>0){for(var d,h=0,f=s[l[0]],g=f.length;h<g;++h){for(var b=0,y=0;b<d;++b)y+=s[b][h][1]||0;f[h][1]+=f[h][0]=-y/2}yd(s,l)}},B.stackOffsetWiggle=function(s,l){if((f=s.length)>0&&(h=(d=s[l[0]]).length)>0){for(var d,h,f,g=0,b=1;b<h;++b){for(var y=0,T=0,k=0;y<f;++y){for(var D=s[l[y]],O=D[b][1]||0,P=(O-(D[b-1][1]||0))/2,_=0;_<y;++_){var Y=s[l[_]];P+=(Y[b][1]||0)-(Y[b-1][1]||0)}T+=O,k+=P*O}d[b-1][1]+=d[b-1][0]=g,T&&(g-=k/T)}d[b-1][1]+=d[b-1][0]=g,yd(s,l)}},B.stackOrderAppearance=Xb,B.stackOrderAscending=Qb,B.stackOrderDescending=function(s){return Qb(s).reverse()},B.stackOrderInsideOut=function(s){var l,d,h=s.length,f=s.map(Jb),g=Xb(s),b=0,y=0,T=[],k=[];for(l=0;l<h;++l)d=g[l],b<y?(b+=f[d],T.push(d)):(y+=f[d],k.push(d));return k.reverse().concat(T)},B.stackOrderNone=wd,B.stackOrderReverse=function(s){return wd(s).reverse()},B.stratify=function(){var s,l=j0,d=W0;function h(f){var g,b,y,T,k,D,O,P,_=Array.from(f),Y=l,j=d,W=new Map;if(s!=null){const X=_.map((K,re)=>function(oe){oe=`${oe}`;let Ce=oe.length;return Lf(oe,Ce-1)&&!Lf(oe,Ce-2)&&(oe=oe.slice(0,-1)),oe[0]==="/"?oe:`/${oe}`}(s(K,re,f))),ee=X.map(Nm),Z=new Set(X).add("");for(const K of ee)Z.has(K)||(Z.add(K),X.push(K),ee.push(Nm(K)),_.push(Mf));Y=(K,re)=>X[re],j=(K,re)=>ee[re]}for(y=0,g=_.length;y<g;++y)b=_[y],D=_[y]=new nc(b),(O=Y(b,y,f))!=null&&(O+="")&&(P=D.id=O,W.set(P,W.has(P)?Rm:D)),(O=j(b,y,f))!=null&&(O+="")&&(D.parent=O);for(y=0;y<g;++y)if(O=(D=_[y]).parent){if(!(k=W.get(O)))throw new Error("missing: "+O);if(k===Rm)throw new Error("ambiguous: "+O);k.children?k.children.push(D):k.children=[D],D.parent=k}else{if(T)throw new Error("multiple roots");T=D}if(!T)throw new Error("no root");if(s!=null){for(;T.data===Mf&&T.children.length===1;)T=T.children[0],--g;for(let X=_.length-1;X>=0&&(D=_[X]).data===Mf;--X)D.data=null}if(T.parent=V0,T.eachBefore(function(X){X.depth=X.parent.depth+1,--g}).eachBefore(km),T.parent=null,g>0)throw new Error("cycle");return T}return h.id=function(f){return arguments.length?(l=Gh(f),h):l},h.parentId=function(f){return arguments.length?(d=Gh(f),h):d},h.path=function(f){return arguments.length?(s=Gh(f),h):s},h},B.style=fs,B.subset=function(s,l){return Ls(l,s)},B.sum=function(s,l){let d=0;if(l===void 0)for(let h of s)(h=+h)&&(d+=h);else{let h=-1;for(let f of s)(f=+l(f,++h,s))&&(d+=f)}return d},B.superset=Ls,B.svg=Fe,B.symbol=function(s,l){let d=null,h=zu(f);function f(){let g;if(d||(d=g=h()),s.apply(this,arguments).draw(d,+l.apply(this,arguments)),g)return d=null,g+""||null}return s=typeof s=="function"?s:ln(s||mp),l=typeof l=="function"?l:ln(l===void 0?64:+l),f.type=function(g){return arguments.length?(s=typeof g=="function"?g:ln(g),f):s},f.size=function(g){return arguments.length?(l=typeof g=="function"?g:ln(+g),f):l},f.context=function(g){return arguments.length?(d=g??null,f):d},f},B.symbolAsterisk=Cb,B.symbolCircle=mp,B.symbolCross=kb,B.symbolDiamond=Ab,B.symbolDiamond2=Sb,B.symbolPlus=Eb,B.symbolSquare=$b,B.symbolSquare2=Db,B.symbolStar=Mb,B.symbolTimes=lg,B.symbolTriangle=Lb,B.symbolTriangle2=Pb,B.symbolWye=Bb,B.symbolX=lg,B.symbols=Ob,B.symbolsFill=Ob,B.symbolsStroke=sx,B.text=xt,B.thresholdFreedmanDiaconis=function(s,l,d){return Math.ceil((d-l)/(2*(Ua(s,.75)-Ua(s,.25))*Math.pow(Yr(s),-1/3)))},B.thresholdScott=function(s,l,d){return Math.ceil((d-l)*Math.cbrt(Yr(s))/(3.49*Sa(s)))},B.thresholdSturges=Qr,B.tickFormat=Km,B.tickIncrement=Es,B.tickStep=Hn,B.ticks=Gt,B.timeDay=fd,B.timeDays=Cy,B.timeFormatDefaultLocale=Rv,B.timeFormatLocale=xv,B.timeFriday=lv,B.timeFridays=Dy,B.timeHour=np,B.timeHours=wy,B.timeInterval=qi,B.timeMillisecond=pd,B.timeMilliseconds=av,B.timeMinute=ep,B.timeMinutes=by,B.timeMonday=Bu,B.timeMondays=Ay,B.timeMonth=ap,B.timeMonths=Ny,B.timeSaturday=cv,B.timeSaturdays=Iy,B.timeSecond=Mo,B.timeSeconds=sv,B.timeSunday=gd,B.timeSundays=dv,B.timeThursday=sc,B.timeThursdays=$y,B.timeTickInterval=wv,B.timeTicks=yv,B.timeTuesday=rv,B.timeTuesdays=Sy,B.timeWednesday=ov,B.timeWednesdays=Ey,B.timeWeek=gd,B.timeWeeks=dv,B.timeYear=qr,B.timeYears=zy,B.timeout=Mc,B.timer=Rl,B.timerFlush=Ic,B.transition=Rc,B.transpose=Cl,B.tree=function(){var s=U0,l=1,d=1,h=null;function f(T){var k=function(X){for(var ee,Z,K,re,oe,Ce=new Xh(X,0),Ie=[Ce];ee=Ie.pop();)if(K=ee._.children)for(ee.children=new Array(oe=K.length),re=oe-1;re>=0;--re)Ie.push(Z=ee.children[re]=new Xh(K[re],re)),Z.parent=ee;return(Ce.parent=new Xh(null,0)).children=[Ce],Ce}(T);if(k.eachAfter(g),k.parent.m=-k.z,k.eachBefore(b),h)T.eachBefore(y);else{var D=T,O=T,P=T;T.eachBefore(function(X){X.x<D.x&&(D=X),X.x>O.x&&(O=X),X.depth>P.depth&&(P=X)});var _=D===O?1:s(D,O)/2,Y=_-D.x,j=l/(O.x+_+Y),W=d/(P.depth||1);T.eachBefore(function(X){X.x=(X.x+Y)*j,X.y=X.depth*W})}return T}function g(T){var k=T.children,D=T.parent.children,O=T.i?D[T.i-1]:null;if(k){(function(_){for(var Y,j=0,W=0,X=_.children,ee=X.length;--ee>=0;)(Y=X[ee]).z+=j,Y.m+=j,j+=Y.s+(W+=Y.c)})(T);var P=(k[0].z+k[k.length-1].z)/2;O?(T.z=O.z+s(T._,O._),T.m=T.z-P):T.z=P}else O&&(T.z=O.z+s(T._,O._));T.parent.A=function(_,Y,j){if(Y){for(var W,X=_,ee=_,Z=Y,K=X.parent.children[0],re=X.m,oe=ee.m,Ce=Z.m,Ie=K.m;Z=Bf(Z),X=Pf(X),Z&&X;)K=Pf(K),(ee=Bf(ee)).a=_,(W=Z.z+Ce-X.z-re+s(Z._,X._))>0&&(G0(Y0(Z,_,j),_,W),re+=W,oe+=W),Ce+=Z.m,re+=X.m,Ie+=K.m,oe+=ee.m;Z&&!Bf(ee)&&(ee.t=Z,ee.m+=Ce-oe),X&&!Pf(K)&&(K.t=X,K.m+=re-Ie,j=_)}return j}(T,O,T.parent.A||D[0])}function b(T){T._.x=T.z+T.parent.m,T.m+=T.parent.m}function y(T){T.x*=l,T.y=T.depth*d}return f.separation=function(T){return arguments.length?(s=T,f):s},f.size=function(T){return arguments.length?(h=!1,l=+T[0],d=+T[1],f):h?null:[l,d]},f.nodeSize=function(T){return arguments.length?(h=!0,l=+T[0],d=+T[1],f):h?[l,d]:null},f},B.treemap=function(){var s=Fm,l=!1,d=1,h=1,f=[0],g=ic,b=ic,y=ic,T=ic,k=ic;function D(P){return P.x0=P.y0=0,P.x1=d,P.y1=h,P.eachBefore(O),f=[0],l&&P.eachBefore(Om),P}function O(P){var _=f[P.depth],Y=P.x0+_,j=P.y0+_,W=P.x1-_,X=P.y1-_;W<Y&&(Y=W=(Y+W)/2),X<j&&(j=X=(j+X)/2),P.x0=Y,P.y0=j,P.x1=W,P.y1=X,P.children&&(_=f[P.depth+1]=g(P)/2,Y+=k(P)-_,j+=b(P)-_,(W-=y(P)-_)<Y&&(Y=W=(Y+W)/2),(X-=T(P)-_)<j&&(j=X=(j+X)/2),s(P,Y,j,W,X))}return D.round=function(P){return arguments.length?(l=!!P,D):l},D.size=function(P){return arguments.length?(d=+P[0],h=+P[1],D):[d,h]},D.tile=function(P){return arguments.length?(s=Tm(P),D):s},D.padding=function(P){return arguments.length?D.paddingInner(P).paddingOuter(P):D.paddingInner()},D.paddingInner=function(P){return arguments.length?(g=typeof P=="function"?P:hd(+P),D):g},D.paddingOuter=function(P){return arguments.length?D.paddingTop(P).paddingRight(P).paddingBottom(P).paddingLeft(P):D.paddingTop()},D.paddingTop=function(P){return arguments.length?(b=typeof P=="function"?P:hd(+P),D):b},D.paddingRight=function(P){return arguments.length?(y=typeof P=="function"?P:hd(+P),D):y},D.paddingBottom=function(P){return arguments.length?(T=typeof P=="function"?P:hd(+P),D):T},D.paddingLeft=function(P){return arguments.length?(k=typeof P=="function"?P:hd(+P),D):k},D},B.treemapBinary=function(s,l,d,h,f){var g,b,y=s.children,T=y.length,k=new Array(T+1);for(k[0]=b=g=0;g<T;++g)k[g+1]=b+=y[g].value;(function D(O,P,_,Y,j,W,X){if(O>=P-1){var ee=y[O];return ee.x0=Y,ee.y0=j,ee.x1=W,void(ee.y1=X)}for(var Z=k[O],K=_/2+Z,re=O+1,oe=P-1;re<oe;){var Ce=re+oe>>>1;k[Ce]<K?re=Ce+1:oe=Ce}K-k[re-1]<k[re]-K&&O+1<re&&--re;var Ie=k[re]-Z,Te=_-Ie;if(W-Y>X-j){var pe=_?(Y*Te+W*Ie)/_:W;D(O,re,Ie,Y,j,pe,X),D(re,P,Te,pe,j,W,X)}else{var ge=_?(j*Te+X*Ie)/_:X;D(O,re,Ie,Y,j,W,ge),D(re,P,Te,Y,ge,W,X)}})(0,T,s.value,l,d,h,f)},B.treemapDice=$u,B.treemapResquarify=K0,B.treemapSlice=Qh,B.treemapSliceDice=function(s,l,d,h,f){(1&s.depth?Qh:$u)(s,l,d,h,f)},B.treemapSquarify=Fm,B.tsv=yn,B.tsvFormat=ke,B.tsvFormatBody=De,B.tsvFormatRow=Ve,B.tsvFormatRows=Me,B.tsvFormatValue=Ke,B.tsvParse=ie,B.tsvParseRows=me,B.union=function(...s){const l=new wi;for(const d of s)for(const h of d)l.add(h);return l},B.unixDay=Xf,B.unixDays=Ty,B.utcDay=Pu,B.utcDays=ky,B.utcFriday=pv,B.utcFridays=Oy,B.utcHour=ip,B.utcHours=xy,B.utcMillisecond=pd,B.utcMilliseconds=av,B.utcMinute=tp,B.utcMinutes=yy,B.utcMonday=Ou,B.utcMondays=My,B.utcMonth=sp,B.utcMonths=_y,B.utcSaturday=fv,B.utcSaturdays=Ry,B.utcSecond=Mo,B.utcSeconds=sv,B.utcSunday=md,B.utcSundays=gv,B.utcThursday=oc,B.utcThursdays=By,B.utcTickInterval=bv,B.utcTicks=vv,B.utcTuesday=uv,B.utcTuesdays=Ly,B.utcWednesday=hv,B.utcWednesdays=Py,B.utcWeek=md,B.utcWeeks=gv,B.utcYear=Vr,B.utcYears=Fy,B.variance=Be,B.version="7.8.2",B.window=ao,B.xml=Ln,B.zip=function(){return Cl(arguments)},B.zoom=function(){var s,l,d,h=vx,f=bx,g=xx,b=yx,y=wx,T=[0,1/0],k=[[-1/0,-1/0],[1/0,1/0]],D=250,O=$c,P=Bs("start","zoom","end"),_=500,Y=0,j=10;function W(le){le.property("__zoom",e0).on("wheel.zoom",Ce,{passive:!1}).on("mousedown.zoom",Ie).on("dblclick.zoom",Te).filter(y).on("touchstart.zoom",pe).on("touchmove.zoom",ge).on("touchend.zoom touchcancel.zoom",we).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function X(le,fe){return(fe=Math.max(T[0],Math.min(T[1],fe)))===le.k?le:new jr(fe,le.x,le.y)}function ee(le,fe,xe){var $e=fe[0]-xe[0]*le.k,Re=fe[1]-xe[1]*le.k;return $e===le.x&&Re===le.y?le:new jr(le.k,$e,Re)}function Z(le){return[(+le[0][0]+ +le[1][0])/2,(+le[0][1]+ +le[1][1])/2]}function K(le,fe,xe,$e){le.on("start.zoom",function(){re(this,arguments).event($e).start()}).on("interrupt.zoom end.zoom",function(){re(this,arguments).event($e).end()}).tween("zoom",function(){var Re=this,Ye=arguments,st=re(Re,Ye).event($e),ht=f.apply(Re,Ye),Ze=xe==null?Z(ht):typeof xe=="function"?xe.apply(Re,Ye):xe,zt=Math.max(ht[1][0]-ht[0][0],ht[1][1]-ht[0][1]),Rt=Re.__zoom,Tt=typeof fe=="function"?fe.apply(Re,Ye):fe,Bt=O(Rt.invert(Ze).concat(zt/Rt.k),Tt.invert(Ze).concat(zt/Tt.k));return function(Nn){if(Nn===1)Nn=Tt;else{var mn=Bt(Nn),Ha=zt/mn[2];Nn=new jr(Ha,Ze[0]-mn[0]*Ha,Ze[1]-mn[1]*Ha)}st.zoom(null,Nn)}})}function re(le,fe,xe){return!xe&&le.__zooming||new oe(le,fe)}function oe(le,fe){this.that=le,this.args=fe,this.active=0,this.sourceEvent=null,this.extent=f.apply(le,fe),this.taps=0}function Ce(le,...fe){if(h.apply(this,arguments)){var xe=re(this,fe).event(le),$e=this.__zoom,Re=Math.max(T[0],Math.min(T[1],$e.k*Math.pow(2,b.apply(this,arguments)))),Ye=ne(le);if(xe.wheel)xe.mouse[0][0]===Ye[0]&&xe.mouse[0][1]===Ye[1]||(xe.mouse[1]=$e.invert(xe.mouse[0]=Ye)),clearTimeout(xe.wheel);else{if($e.k===Re)return;xe.mouse=[Ye,$e.invert(Ye)],Ui(this),xe.start()}qu(le),xe.wheel=setTimeout(st,150),xe.zoom("mouse",g(ee(X($e,Re),xe.mouse[0],xe.mouse[1]),xe.extent,k))}function st(){xe.wheel=null,xe.end()}}function Ie(le,...fe){if(!d&&h.apply(this,arguments)){var xe=le.currentTarget,$e=re(this,fe,!0).event(le),Re=x(le.view).on("mousemove.zoom",Ze,!0).on("mouseup.zoom",zt,!0),Ye=ne(le,xe),st=le.clientX,ht=le.clientY;Oe(le.view),fg(le),$e.mouse=[Ye,this.__zoom.invert(Ye)],Ui(this),$e.start()}function Ze(Rt){if(qu(Rt),!$e.moved){var Tt=Rt.clientX-st,Bt=Rt.clientY-ht;$e.moved=Tt*Tt+Bt*Bt>Y}$e.event(Rt).zoom("mouse",g(ee($e.that.__zoom,$e.mouse[0]=ne(Rt,xe),$e.mouse[1]),$e.extent,k))}function zt(Rt){Re.on("mousemove.zoom mouseup.zoom",null),We(Rt.view,$e.moved),qu(Rt),$e.event(Rt).end()}}function Te(le,...fe){if(h.apply(this,arguments)){var xe=this.__zoom,$e=ne(le.changedTouches?le.changedTouches[0]:le,this),Re=xe.invert($e),Ye=xe.k*(le.shiftKey?.5:2),st=g(ee(X(xe,Ye),$e,Re),f.apply(this,fe),k);qu(le),D>0?x(this).transition().duration(D).call(K,st,$e,le):x(this).call(W.transform,st,$e,le)}}function pe(le,...fe){if(h.apply(this,arguments)){var xe,$e,Re,Ye,st=le.touches,ht=st.length,Ze=re(this,fe,le.changedTouches.length===ht).event(le);for(fg(le),$e=0;$e<ht;++$e)Ye=[Ye=ne(Re=st[$e],this),this.__zoom.invert(Ye),Re.identifier],Ze.touch0?Ze.touch1||Ze.touch0[2]===Ye[2]||(Ze.touch1=Ye,Ze.taps=0):(Ze.touch0=Ye,xe=!0,Ze.taps=1+!!s);s&&(s=clearTimeout(s)),xe&&(Ze.taps<2&&(l=Ye[0],s=setTimeout(function(){s=null},_)),Ui(this),Ze.start())}}function ge(le,...fe){if(this.__zooming){var xe,$e,Re,Ye,st=re(this,fe).event(le),ht=le.changedTouches,Ze=ht.length;for(qu(le),xe=0;xe<Ze;++xe)Re=ne($e=ht[xe],this),st.touch0&&st.touch0[2]===$e.identifier?st.touch0[0]=Re:st.touch1&&st.touch1[2]===$e.identifier&&(st.touch1[0]=Re);if($e=st.that.__zoom,st.touch1){var zt=st.touch0[0],Rt=st.touch0[1],Tt=st.touch1[0],Bt=st.touch1[1],Nn=(Nn=Tt[0]-zt[0])*Nn+(Nn=Tt[1]-zt[1])*Nn,mn=(mn=Bt[0]-Rt[0])*mn+(mn=Bt[1]-Rt[1])*mn;$e=X($e,Math.sqrt(Nn/mn)),Re=[(zt[0]+Tt[0])/2,(zt[1]+Tt[1])/2],Ye=[(Rt[0]+Bt[0])/2,(Rt[1]+Bt[1])/2]}else{if(!st.touch0)return;Re=st.touch0[0],Ye=st.touch0[1]}st.zoom("touch",g(ee($e,Re,Ye),st.extent,k))}}function we(le,...fe){if(this.__zooming){var xe,$e,Re=re(this,fe).event(le),Ye=le.changedTouches,st=Ye.length;for(fg(le),d&&clearTimeout(d),d=setTimeout(function(){d=null},_),xe=0;xe<st;++xe)$e=Ye[xe],Re.touch0&&Re.touch0[2]===$e.identifier?delete Re.touch0:Re.touch1&&Re.touch1[2]===$e.identifier&&delete Re.touch1;if(Re.touch1&&!Re.touch0&&(Re.touch0=Re.touch1,delete Re.touch1),Re.touch0)Re.touch0[1]=this.__zoom.invert(Re.touch0[0]);else if(Re.end(),Re.taps===2&&($e=ne($e,this),Math.hypot(l[0]-$e[0],l[1]-$e[1])<j)){var ht=x(this).on("dblclick.zoom");ht&&ht.apply(this,arguments)}}}return W.transform=function(le,fe,xe,$e){var Re=le.selection?le.selection():le;Re.property("__zoom",e0),le!==Re?K(le,fe,xe,$e):Re.interrupt().each(function(){re(this,arguments).event($e).start().zoom(null,typeof fe=="function"?fe.apply(this,arguments):fe).end()})},W.scaleBy=function(le,fe,xe,$e){W.scaleTo(le,function(){var Re=this.__zoom.k,Ye=typeof fe=="function"?fe.apply(this,arguments):fe;return Re*Ye},xe,$e)},W.scaleTo=function(le,fe,xe,$e){W.transform(le,function(){var Re=f.apply(this,arguments),Ye=this.__zoom,st=xe==null?Z(Re):typeof xe=="function"?xe.apply(this,arguments):xe,ht=Ye.invert(st),Ze=typeof fe=="function"?fe.apply(this,arguments):fe;return g(ee(X(Ye,Ze),st,ht),Re,k)},xe,$e)},W.translateBy=function(le,fe,xe,$e){W.transform(le,function(){return g(this.__zoom.translate(typeof fe=="function"?fe.apply(this,arguments):fe,typeof xe=="function"?xe.apply(this,arguments):xe),f.apply(this,arguments),k)},null,$e)},W.translateTo=function(le,fe,xe,$e,Re){W.transform(le,function(){var Ye=f.apply(this,arguments),st=this.__zoom,ht=$e==null?Z(Ye):typeof $e=="function"?$e.apply(this,arguments):$e;return g(kp.translate(ht[0],ht[1]).scale(st.k).translate(typeof fe=="function"?-fe.apply(this,arguments):-fe,typeof xe=="function"?-xe.apply(this,arguments):-xe),Ye,k)},$e,Re)},oe.prototype={event:function(le){return le&&(this.sourceEvent=le),this},start:function(){return++this.active==1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(le,fe){return this.mouse&&le!=="mouse"&&(this.mouse[1]=fe.invert(this.mouse[0])),this.touch0&&le!=="touch"&&(this.touch0[1]=fe.invert(this.touch0[0])),this.touch1&&le!=="touch"&&(this.touch1[1]=fe.invert(this.touch1[0])),this.that.__zoom=fe,this.emit("zoom"),this},end:function(){return--this.active==0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(le){var fe=x(this.that).datum();P.call(le,this.that,new mx(le,{sourceEvent:this.sourceEvent,target:W,type:le,transform:this.that.__zoom,dispatch:P}),fe)}},W.wheelDelta=function(le){return arguments.length?(b=typeof le=="function"?le:Cp(+le),W):b},W.filter=function(le){return arguments.length?(h=typeof le=="function"?le:Cp(!!le),W):h},W.touchable=function(le){return arguments.length?(y=typeof le=="function"?le:Cp(!!le),W):y},W.extent=function(le){return arguments.length?(f=typeof le=="function"?le:Cp([[+le[0][0],+le[0][1]],[+le[1][0],+le[1][1]]]),W):f},W.scaleExtent=function(le){return arguments.length?(T[0]=+le[0],T[1]=+le[1],W):[T[0],T[1]]},W.translateExtent=function(le){return arguments.length?(k[0][0]=+le[0][0],k[1][0]=+le[1][0],k[0][1]=+le[0][1],k[1][1]=+le[1][1],W):[[k[0][0],k[0][1]],[k[1][0],k[1][1]]]},W.constrain=function(le){return arguments.length?(g=le,W):g},W.duration=function(le){return arguments.length?(D=+le,W):D},W.interpolate=function(le){return arguments.length?(O=le,W):O},W.on=function(){var le=P.on.apply(P,arguments);return le===P?W:le},W.clickDistance=function(le){return arguments.length?(Y=(le=+le)*le,W):Math.sqrt(Y)},W.tapDistance=function(le){return arguments.length?(j=+le,W):j},W},B.zoomIdentity=kp,B.zoomTransform=Zb});/*! 
 *  IDS Enterprise Components - v4.94.2
 *  Date: 2024-04-10T17:10:52.706Z
 *  Revision: 6dfbf53930680257b36d281452b9e61ae237655a
 *  
 *  
 *  Apache License
 *  Version 2.0, January 2004
 *  http://www.apache.org/licenses/
 *  
 *  TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *  
 *  1. Definitions.
 *  
 *  "License" shall mean the terms and conditions for use, reproduction,
 *  and distribution as defined by Sections 1 through 9 of this document.
 *  
 *  "Licensor" shall mean the copyright owner or entity authorized by
 *  the copyright owner that is granting the License.
 *  
 *  "Legal Entity" shall mean the union of the acting entity and all
 *  other entities that control, are controlled by, or are under common
 *  control with that entity. For the purposes of this definition,
 *  "control" means (i) the power, direct or indirect, to cause the
 *  direction or management of such entity, whether by contract or
 *  otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *  outstanding shares, or (iii) beneficial ownership of such entity.
 *  
 *  "You" (or "Your") shall mean an individual or Legal Entity
 *  exercising permissions granted by this License.
 *  
 *  "Source" form shall mean the preferred form for making modifications,
 *  including but not limited to software source code, documentation
 *  source, and configuration files.
 *  
 *  "Object" form shall mean any form resulting from mechanical
 *  transformation or translation of a Source form, including but
 *  not limited to compiled object code, generated documentation,
 *  and conversions to other media types.
 *  
 *  "Work" shall mean the work of authorship, whether in Source or
 *  Object form, made available under the License, as indicated by a
 *  copyright notice that is included in or attached to the work
 *  (an example is provided in the Appendix below).
 *  
 *  "Derivative Works" shall mean any work, whether in Source or Object
 *  form, that is based on (or derived from) the Work and for which the
 *  editorial revisions, annotations, elaborations, or other modifications
 *  represent, as a whole, an original work of authorship. For the purposes
 *  of this License, Derivative Works shall not include works that remain
 *  separable from, or merely link (or bind by name) to the interfaces of,
 *  the Work and Derivative Works thereof.
 *  
 *  "Contribution" shall mean any work of authorship, including
 *  the original version of the Work and any modifications or additions
 *  to that Work or Derivative Works thereof, that is intentionally
 *  submitted to Licensor for inclusion in the Work by the copyright owner
 *  or by an individual or Legal Entity authorized to submit on behalf of
 *  the copyright owner. For the purposes of this definition, "submitted"
 *  means any form of electronic, verbal, or written communication sent
 *  to the Licensor or its representatives, including but not limited to
 *  communication on electronic mailing lists, source code control systems,
 *  and issue tracking systems that are managed by, or on behalf of, the
 *  Licensor for the purpose of discussing and improving the Work, but
 *  excluding communication that is conspicuously marked or otherwise
 *  designated in writing by the copyright owner as "Not a Contribution."
 *  
 *  "Contributor" shall mean Licensor and any individual or Legal Entity
 *  on behalf of whom a Contribution has been received by Licensor and
 *  subsequently incorporated within the Work.
 *  
 *  2. Grant of Copyright License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  copyright license to reproduce, prepare Derivative Works of,
 *  publicly display, publicly perform, sublicense, and distribute the
 *  Work and such Derivative Works in Source or Object form.
 *  
 *  3. Grant of Patent License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  (except as stated in this section) patent license to make, have made,
 *  use, offer to sell, sell, import, and otherwise transfer the Work,
 *  where such license applies only to those patent claims licensable
 *  by such Contributor that are necessarily infringed by their
 *  Contribution(s) alone or by combination of their Contribution(s)
 *  with the Work to which such Contribution(s) was submitted. If You
 *  institute patent litigation against any entity (including a
 *  cross-claim or counterclaim in a lawsuit) alleging that the Work
 *  or a Contribution incorporated within the Work constitutes direct
 *  or contributory patent infringement, then any patent licenses
 *  granted to You under this License for that Work shall terminate
 *  as of the date such litigation is filed.
 *  
 *  4. Redistribution. You may reproduce and distribute copies of the
 *  Work or Derivative Works thereof in any medium, with or without
 *  modifications, and in Source or Object form, provided that You
 *  meet the following conditions:
 *  
 *  (a) You must give any other recipients of the Work or
 *  Derivative Works a copy of this License; and
 *  
 *  (b) You must cause any modified files to carry prominent notices
 *  stating that You changed the files; and
 *  
 *  (c) You must retain, in the Source form of any Derivative Works
 *  that You distribute, all copyright, patent, trademark, and
 *  attribution notices from the Source form of the Work,
 *  excluding those notices that do not pertain to any part of
 *  the Derivative Works; and
 *  
 *  (d) If the Work includes a "NOTICE" text file as part of its
 *  distribution, then any Derivative Works that You distribute must
 *  include a readable copy of the attribution notices contained
 *  within such NOTICE file, excluding those notices that do not
 *  pertain to any part of the Derivative Works, in at least one
 *  of the following places: within a NOTICE text file distributed
 *  as part of the Derivative Works; within the Source form or
 *  documentation, if provided along with the Derivative Works; or,
 *  within a display generated by the Derivative Works, if and
 *  wherever such third-party notices normally appear. The contents
 *  of the NOTICE file are for informational purposes only and
 *  do not modify the License. You may add Your own attribution
 *  notices within Derivative Works that You distribute, alongside
 *  or as an addendum to the NOTICE text from the Work, provided
 *  that such additional attribution notices cannot be construed
 *  as modifying the License.
 *  
 *  You may add Your own copyright statement to Your modifications and
 *  may provide additional or different license terms and conditions
 *  for use, reproduction, or distribution of Your modifications, or
 *  for any such Derivative Works as a whole, provided Your use,
 *  reproduction, and distribution of the Work otherwise complies with
 *  the conditions stated in this License.
 *  
 *  5. Submission of Contributions. Unless You explicitly state otherwise,
 *  any Contribution intentionally submitted for inclusion in the Work
 *  by You to the Licensor shall be under the terms and conditions of
 *  this License, without any additional terms or conditions.
 *  Notwithstanding the above, nothing herein shall supersede or modify
 *  the terms of any separate license agreement you may have executed
 *  with Licensor regarding such Contributions.
 *  
 *  6. Trademarks. This License does not grant permission to use the trade
 *  names, trademarks, service marks, or product names of the Licensor,
 *  except as required for reasonable and customary use in describing the
 *  origin of the Work and reproducing the content of the NOTICE file.
 *  
 *  7. Disclaimer of Warranty. Unless required by applicable law or
 *  agreed to in writing, Licensor provides the Work (and each
 *  Contributor provides its Contributions) on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *  implied, including, without limitation, any warranties or conditions
 *  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *  PARTICULAR PURPOSE. You are solely responsible for determining the
 *  appropriateness of using or redistributing the Work and assume any
 *  risks associated with Your exercise of permissions under this License.
 *  
 *  8. Limitation of Liability. In no event and under no legal theory,
 *  whether in tort (including negligence), contract, or otherwise,
 *  unless required by applicable law (such as deliberate and grossly
 *  negligent acts) or agreed to in writing, shall any Contributor be
 *  liable to You for damages, including any direct, indirect, special,
 *  incidental, or consequential damages of any character arising as a
 *  result of this License or out of the use or inability to use the
 *  Work (including but not limited to damages for loss of goodwill,
 *  work stoppage, computer failure or malfunction, or any and all
 *  other commercial damages or losses), even if such Contributor
 *  has been advised of the possibility of such damages.
 *  
 *  9. Accepting Warranty or Additional Liability. While redistributing
 *  the Work or Derivative Works thereof, You may choose to offer,
 *  and charge a fee for, acceptance of support, warranty, indemnity,
 *  or other liability obligations and/or rights consistent with this
 *  License. However, in accepting such obligations, You may act only
 *  on Your own behalf and on Your sole responsibility, not on behalf
 *  of any other Contributor, and only if You agree to indemnify,
 *  defend, and hold each Contributor harmless for any liability
 *  incurred by, or claims asserted against, such Contributor by reason
 *  of your accepting any such warranty or additional liability.
 *  
 *  END OF TERMS AND CONDITIONS
 *  
 *  APPENDIX: How to apply the Apache License to your work.
 *  
 *  To apply the Apache License to your work, attach the following
 *  boilerplate notice, with the fields enclosed by brackets "[]"
 *  replaced with your own identifying information. (Don't include
 *  the brackets!)  The text should be enclosed in the appropriate
 *  comment syntax for the file format. We also recommend that a
 *  file or class name and description of purpose be included on the
 *  same "printed page" as the copyright notice for easier
 *  identification within third-party archives.
 *  
 *  Copyright 2018  Infor, Inc.
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *  
 */var Soho=function(B){"use strict";var In=Object.freeze({__proto__:null,enableConsoleLogging:!1,enableTimeLogging:!1,getComponents:function(e){var t=(e?$(e):$("body")).find("*"),n=[];return t.each(function(i,a){var r=$(a).data();r&&Object.keys(r).length&&n.push({data:r,element:a})}),n},log:function(e,t){},logTimeEnd:function(e){},logTimeStart:function(e){}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode!==null&&this.parentNode.removeChild(this)}})}),window.MSInputMethodContext&&document.documentMode||(jQuery.event.special.touchstart={setup:function(e,t,n){t.includes("noPreventDefault")?this.addEventListener("touchstart",n,{passive:!1}):this.addEventListener("touchstart",n,{passive:!0})}},jQuery.event.special.touchmove={setup:function(e,t,n){this.addEventListener("touchmove",n,{passive:!0})}},jQuery.event.special.mousewheel={setup:function(e,t,n){this.addEventListener("mousewheel",n,{passive:!0})}});var Ji="4.94.2",Wr=Ji;function Ts(e,t,n){if(Oo())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var a=new(e.bind.apply(e,i));return n&&qa(a,n.prototype),a}function Oo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oo=function(){return!!e})()}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ur(Object(n),!0).forEach(function(i){va(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Gr(e){var t=function(n,i){if(typeof n!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var r=a.call(n,i||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}(e,"string");return typeof t=="symbol"?t:String(t)}function at(e){return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(e)}function va(e,t,n){return(t=Gr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e,t){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qa(e,t)}function cc(e,t){if(e==null)return{};var n,i,a=function(o,c){if(o==null)return{};var u,p,m={},v=Object.keys(o);for(p=0;p<v.length;p++)u=v[p],c.indexOf(u)>=0||(m[u]=o[u]);return m}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Nt(e){return function(t){if(Array.isArray(t))return Qt(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Qt(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qt(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _e={stripHTML:function(e){var t=e;return t?t=t.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(e,t){if(!e)return"";if(typeof e=="number")return e;var n=("".concat(t||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(i,function(a,r){return n.indexOf("<"+r.toLowerCase()+">")>-1?a:""}).replace(i,function(a,r){return n.indexOf("<"+r.toLowerCase()+">")>-1?a:""}).replace(i,function(a,r){return n.indexOf("<"+r.toLowerCase()+">")>-1?a:""})},sanitizeConsoleMethods:function(e){var t=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return typeof e!="string"?e:e.replace(t,"")},sanitizeHTML:function(e){if(!e)return"";var t=e.replace(/\bon\w+=\S+?(?=(>|&|<| |"))/g,"");return t=(t=(t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"")).replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"")).replace(/<iframe\b[^<]*(?:(?!>)<[^<]*)*>/gi,""),t=(t=this.sanitizeConsoleMethods(t)).replace(/<\/script>/g,"")},removeWhiteSpaceCharacters:function(e){if(!e)return"";var t=e[0].innerHTML;return t=t.replace(/\s+/g," ").trim(),e[0].innerHTML=t,e[0].innerHTML},ensureAlphaNumeric:function(e){return typeof e=="number"?e:this.stripTags(e).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(e){return typeof e=="number"?e:this.stripTags(e).replace(/[^a-z0-9 ]/gi,"","")},toCamelCase:function(e){return typeof e!="string"?e:(e=this.stripTags(e).replace(/[^a-z0-9 ]/gi,"","")).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,function(t,n){return n.toUpperCase()})},escapeHTML:function(e){var t=e;if(typeof t=="string"){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","\\":"&bsol;"};return t.replace(/[&<>"'\\]/gi,function(i){return n[i]})}return t},unescapeHTML:function(e){if(e==="")return"";if(typeof e=="string"){var t=function(i){return(e.match(i)||[""])[0]},n=new DOMParser().parseFromString(e,"text/html");return"".concat(t(/^\s*|\\/)).concat(n.documentElement.textContent.trim()).concat(t(/\s*$|\\/))}return e},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&bsol;").replace(/"/g,"&quot;")},isUrlLocal:function(e){return e!==""&&(e[0]==="/"&&(e.length===1||e[1]!=="/"&&e[1]!=="\\")||e.length>1&&e[0]==="~"&&e[1]==="/")||e.length>=1&&e[0]==="#"}},ue={isValidElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement},getAttributes:function(e){return e&&(e instanceof HTMLElement||e instanceof SVGElement)?e.attributes:{}},hasAnyClass:function(e){var t=e.className;return t&&t.length>0},hasClass:function(e,t){var n=!1;if(e==null||!e?.getAttribute)return n;if("classList"in e)n=e.classList.contains(t);else{var i=e.getAttribute("class");n=!!i&&i.split(/\s+/).indexOf(t)!==-1}return n},addClass:function(e){if(e){for(var t="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var r=0;r<i.length;r++)e.classList?e.classList.add(i[r]):ue.hasClass(e,[r])||(t.length&&(t+=" "),t+=i[r]);t.length&&$(e).addClass(t)}},removeClass:function(e){if(e){for(var t="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var r=0;r<i.length;r++)e.classList?e.classList.remove(i[r]):ue.hasClass(e,[r])||(t.length&&(t+=" "),t+=i[r]);t.length&&$(e).removeClass(t)}},isElement:function(e){return!!(e instanceof HTMLElement||e instanceof SVGElement||e instanceof $&&e.length)},getDimensions:function(e){if(!ue.isElement(e))return{};if(e instanceof $){if(!e.length)return{};e=e[0]}var t=e.getBoundingClientRect(),n={};for(var i in t)isNaN(t[i])||(n[i]=t[i]);return n},prepend:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("afterbegin",this.xssClean(t,n))},append:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("beforeend",this.xssClean(t,n))},after:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("afterend",this.xssClean(t,n))},remove:function(e){var t=e;e instanceof $&&e.length&&(t=t[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&e.parentNode&&e.parentNode.removeChild(e)},setAttribute:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.setAttribute("attribute",n)},xssClean:function(e,t){var n=e;return t&&t!=="*"&&(n=_e.stripTags(e,t)),t==="*"&&(n=_e.sanitizeHTML(e)),n},html:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&(i.innerHTML=this.xssClean(t,n))},replaceHtml:function(e,t,n){var i=e,a=t;e instanceof $&&e.length&&(i=i[0]),t instanceof $&&e.length&&(a=t[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.replaceChildren(this.xssClean(a,n))},parents:function(e,t,n){var i,a=[];if(!ue.isValidElement(e))return a;for(;e.parentNode&&(!n||!a.length);)e=e.parentNode,(i=e)!==document&&i.matches(t)&&a.push(i);return n?a[0]:a},getNextSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}},getPreviousSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}},getSiblings:function(e){return e instanceof $&&e.length&&(e=e[0]),[].slice.call(e.parentNode.children).filter(function(t){return t!==e})},getSimpleSelector:function(e){var t=e.tagName.toLowerCase(),n=e.id?"#".concat(e.id):"",i=e.className?".".concat(e.className.split(" ").join(".")):"";return"".concat(t).concat(n).concat(i)}},Yt={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},Yr=Object.keys(Yt);function Va(e,t,n){var i;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];var c=this;i?clearTimeout(i):n&&e.apply(c,r),i=setTimeout(function(){n||e.apply(c,r),i=null},t||250)}}Yt.available=Yr,Yt.current=function(){if(!window.getComputedStyle)return"";var e=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return e?(e.getPropertyValue?e.getPropertyValue("content"):"").replace(/"/g,""):""},Yt.isAbove=function(e){var t=Yt[e];return!!t&&$(window).width()>t-1},Yt.isBelow=function(e){var t=Yt[e];return!!t&&$(window).width()<t},Yt.compare=function(){this.last||(this.last="");var e=this.current();this.last!==e&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:e}]),this.last=e)},Yt.isHidden=function(e){if(!e||!ue.isElement(e))return!1;var t=e.classList;if(!t.length)return!1;if(t.contains("hidden"))return!0;var n={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],i="hidden-".concat(n),a="visible-".concat(n,"-");return!!t.contains(i)||(t.toString().indexOf(a),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&Yt.isHidden($(this).first()[0])};var xl="debouncedResize";$.fn[xl]=function(e){return e?this.bind("resize",Va(e)):this.trigger(xl)};var q="environment",Be={browser:{},features:{resizeObserver:typeof ResizeObserver<"u",touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return $("html").attr("dir")==="rtl"},set:function(){$("html").attr("data-sohoxi-version",Wr),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=navigator.platform,n=$("html"),i="";if(e.indexOf("Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Android")===-1&&(i+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},navigator.platform.substr(0,2)==="iP"||Be.browser.isIPad()){var a=/constructor/i.test(window.HTMLElement),r=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!a||r)&&(this.browser.name="wkwebview",i+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}if(e.indexOf("Chrome")!==-1&&(i+="is-chrome ",this.browser.name="chrome"),e.indexOf("Firefox")>0&&(i+="is-firefox ",this.browser.name="firefox"),e.match(/Edg\//)&&(i+="ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",i+="ie-edge".concat(this.browser.version)),e.match(/Trident/)&&(i+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||e.indexOf("MSIE 8.0")>-1||document.documentMode===8)&&(i+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(i+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(i+="ie10 ",this.browser.version="10"):e.match(/Trident\/7\./)&&(i+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(e)||Be.browser.isIPad()){i+="ios ",this.os.name="ios";for(var o=["iPod","iPad","iPhone"],c=0;c<o.length;c++)new RegExp(o[c]).test(e)&&(i+="".concat(o[c].toLowerCase()," "),this.device=o[c])}["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)>-1&&!/Linux/.test(t)&&(i=i.replace("ios ",""),i+="is-mac ",this.os.name="mac"),/Android/.test(e)&&(i+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(t)&&(this.os.name="linux"),n.addClass(i)},addDeviceSpecs:function(){var e,t,n,i=navigator.appVersion,a=navigator.userAgent,r=navigator.appName,o=" ".concat(parseFloat(navigator.appVersion)),c=parseInt(navigator.appVersion,10),u="";(t=a.indexOf("Opera"))!==-1&&(r="Opera",o=a.substring(t+6),(t=a.indexOf("Version"))!==-1&&(o=a.substring(t+8))),(t=a.indexOf("OPR"))!==-1?(r="Opera",o=a.substring(t+4)):(t=a.indexOf("Edg"))!==-1?(r="Microsoft Edge",o=a.substring(t+4)):(t=a.indexOf("MSIE"))!==-1?(r="Microsoft Internet Explorer",o=a.substring(t+5)):(t=a.indexOf("Chrome"))!==-1?(r="Chrome",o=a.substring(t+7),a.indexOf("Edg")>-1&&(u="Microsoft Edge"),Number(o.substring(0,3))>=108&&(o=o.substring(0,3))):(t=a.indexOf("Safari"))!==-1?(r="Safari",o=a.substring(t+7),(t=a.indexOf("Version"))!==-1&&(o=a.substring(t+8))):this.browser.isWKWebView()?(r="WKWebView",o="",c=""):(t=a.indexOf("Firefox"))!==-1?(r="Firefox",o=a.substring(t+8)):a.indexOf("Trident/")!==-1?(r="Microsoft Internet Explorer",o=a.substring(a.indexOf("rv:")+3)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(r=a.substring(e,t),o=a.substring(t+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName)),(n=o.indexOf(";"))!==-1&&(o=o.substring(0,n)),(n=o.indexOf(" "))!==-1&&(o=o.substring(0,n)),(n=o.indexOf(")"))!==-1&&(o=o.substring(0,n)),c=" ".concat(parseInt(o,10)),isNaN(c)&&(o=" ".concat(parseFloat(navigator.appVersion)),c=parseInt(navigator.appVersion,10));var p=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),m="-",v=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var w in v){var C=v[w];if(C.r.test(a)){m=C.s;break}}var A="-";switch(/Windows/.test(m)&&(A=/Windows (.*)/.exec(m)[1]),m){case"Windows 10":A="",m="Windows";break;case"Mac OS X":A="",m="Mac OS";break;case"Android":A=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":A=/OS (\d+)_?(\d+)?/.exec(a),A="".concat(A[1],".").concat(A[2],".").concat(0|A[3])}Be.browser.isIPad()&&(A=a.substr(a.indexOf("Version"),a.substr(a.indexOf("Version")).indexOf(" ")).replace("Version/",""),m="IOS"),this.devicespecs={currentBrowser:r,browserVersion:o.trim(),browserMajorVersion:c,isMobile:p||Be.browser.isIPad(),os:m,currentOSVersion:A,browserVersionName:u}},addGlobalResize:function(){$(window).debouncedResize(function(){$("body").triggerHandler("resize",[window]),Yt.compare()}),$(window).on("orientationchange load",function(){return Yt.compare()})},removeGlobalEvents:function(){$(window).off("scroll.".concat(q)),$("body").off(["focusin.".concat(q),"focusout.".concat(q)].join(" "))}};function Sa(e){return this.init(e)}function Ea(e,t,n){var i=$.Deferred();if(!ue.isElement(e))return i.reject();if(e instanceof $&&e.length&&(e=e[0]),t==null)return i.resolve();if(isNaN(n)&&(n=0),t=Math.round(t),(n=Math.round(n))<0)return i.fail();if(n===0)return e.scrollLeft+=t,i.resolve();var a=Date.now(),r=a+n,o=e.scrollLeft,c=t,u=e.scrollLeft;return setTimeout(function p(){if(e.scrollLeft===u){var m=Date.now(),v=function(C,A,S){if(S<=C)return 0;if(S>=A)return 1;var M=(S-C)/(A-C);return M*M*(3-2*M)}(a,r,m),w=Math.round(o+c*v);e.scrollLeft=w,m>=r?i.resolve():e.scrollLeft!==u||e.scrollLeft===w?(u=e.scrollLeft,setTimeout(p,0)):i.resolve()}else i.reject()},0),i}function hi(e,t){return(window.requestAnimationFrame!==void 0?window.requestAnimationFrame:setTimeout)(e,t)}Be.browser.isEdge=function(){return Be.browser.name==="edge"},Be.browser.isIE11=function(){return Be.browser.name==="ie"&&Be.browser.version==="11"},Be.browser.isSafari=function(){return Be.browser.name==="safari"||Be.browser.name==="wkwebview"},Be.browser.isIE10=function(){return Be.browser.name==="ie"&&Be.browser.version==="10"},Be.browser.isFirefox=function(){return Be.browser.name==="firefox"},Be.browser.isIPad=function(){return!!(navigator.userAgent.match(/(iPad)/)||navigator.platform==="MacIntel"&&navigator.standalone!==void 0)},Be.set(),Sa.prototype={init:function(e){!this.element&&(e instanceof HTMLElement||e instanceof SVGElement)&&(this.element=e);var t=$(this.element),n=!1,i=!1,a=!1;if(t.is(".checkbox, .radio, .switch")){var r=t.next();r.is('[type="hidden"]')&&(r=r.next()),this.label=r[0],t.addClass("hide-focus").on("focusin.hide-focus",function(p){n||i||a||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[p])),n=!1,i=!0,a=!1}).on("focusout.hide-focus",function(p){t.addClass("hide-focus"),a=r.is(a),n=!1,i=!1,t.triggerHandler("hidefocusadd",[p])}),r.on("mousedown.hide-focus",function(p){a=this,n=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[p])})}else{var o=function(p){n=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[p])},c=Be.features.touch,u=t;t.hasClass("accordion-header")&&(u=t.find("a")),u.on("mousedown.hide-focus",function(p){o(p)}),c&&u.on("touchstart.hide-focus",function(p){o(p)}),t.addClass("hide-focus"),t.on("focusin.hide-focus",function(p){n||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[p])),n=!1,i=!0}).on("focusout.hide-focus",function(p){t.addClass("hide-focus"),n=!1,i=!1,t.triggerHandler("hidefocusadd",[p])}),t.is(u)||(this.separateEventTarget=u)}return this},updated:function(){return this.teardown().init()},teardown:function(){var e,t;this.label&&$(this.label).off("mousedown.hide-focus");var n=["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ");return $(this.element).off(n),(e=this.separateEventTarget)!==null&&e!==void 0&&e?.length&&(this.separateEventTarget.off(n),this.separateEventTarget=null),(t=this.element)===null||t===void 0||t==null||t.classList.remove("hide-focus"),this},destroy:function(){this.teardown(),$.removeData(this.element,"hidefocus")}},$.fn.hideFocus=function(){return this.each(function(){var e=$.data(this,"hidefocus");e?e.updated():e=$.data(this,"hidefocus",new Sa(this))})},$.fn.smoothScroll=function(e,t){return Ea(this,e,t)},$.fn.bindFirst=function(e,t){this.on(e,t),this.each(function(){var n=$._data(this,"events")[e.split(".")[0]],i=n.pop();n.splice(0,0,i)})};var ja=[];function wi(e){return $.expr.filters.visible(e)&&!$(e).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.fn.cssPropSupport=function(e){if(!e)return null;var t=$("<div></div>")[0],n=e.toString(),i=["Moz","Webkit","O","ms"],a=n.charAt(0).toUpperCase()+n.substr(1);if(e in t.style)return $(t).remove(),e;for(var r=0;r<i.length;r++){var o=i[r]+a;if(o in t.style)return $(t).remove(),o}return $(t).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(e){return function(t){var n,i,a,r=t.nodeName.toLowerCase(),o=!isNaN($.attr(t,"tabindex"));return r==="area"?(i=(n=t.parentNode).name,!(!t.href||!i||n.nodeName.toLowerCase()!=="map")&&!!(a=$("img[usemap=#".concat(i,"]"))[0])&&wi(a)):!!wi(t)&&(/input|select|textarea|button|object/.test(r)?!t.disabled:r==="a"&&t.href!==void 0||o)}(e,isNaN($.attr(e,"tabindex")))}}),$.fn.listEvents=function(){var e={};return this.each(function(){e=$._data(this,"events")}),e};var N={};function Kr(e){return at(e)==="object"||typeof e=="function"}function Ro(e){return typeof e=="function"?e():e}N.uniqueId=function(e,t,n,i){var a=e.id;if(a&&$("#".concat(a)).length<2)return a;n=n?"".concat(n,"-"):"",i=i?"-".concat(i):"",t=t||N.getArrayFromList(e.classList).join("-"),ja[t]||(ja[t]=1);var r="".concat(n).concat(t,"-").concat(ja[t]).concat(i);return ja[t]+=1,r},N.parseSettings=function(e,t){var n={};if(!e||!(e instanceof HTMLElement)&&!(e instanceof $)||e instanceof $&&!e.length)return n;e instanceof $&&(e=e[0]),t=t||"data-options";var i,a,r=e.getAttribute(t);if(!r||typeof r!="string"||r.indexOf("{")===-1)return n;function o(c){return c.replace(/'/g,'"')}try{n=JSON.parse(o(r))}catch{n=JSON.parse((a=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,i=(i=r).replace(a,'$1"$2":'),a=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,o(i=i.replace(a,':"$2"'))))}return n},N.parseOptions=function(e,t){return N.parseSettings(e,t)},$.fn.parseOptions=function(e,t){var n=[],i=this;return e instanceof HTMLElement||e instanceof SVGElement||e instanceof $?i=$(e):(t=e,e=void 0),i.each(function(a,r){n.push({element:this,options:N.parseOptions(r,t)})}),n.length===1?n[0].options:n},N.coerceToBoolean=function(e){return!/^(false|0)$/i.test(e)&&!!e},N.coerceSettingsToBoolean=function(e,t){var n,i;for(t&&Array.isArray(t)||Object.keys(e).forEach(function(a){t.push(a)}),n=0,i=t.length;n<i;n++)e[t[n]]=N.coerceToBoolean(e[t[n]]);return e},$.fn.timer=function(e,t){var n,i=$(this),a=10,r=0;function o(){n=setInterval(function(){r+=a,i.triggerHandler("update",[{counter:r}]),r>t&&(i.triggerHandler("timeout"),e.apply(arguments),clearInterval(n),r=0)},a)}return o(),{event:this,cancel:function(){i.triggerHandler("cancel"),clearInterval(n),r=0},pause:function(){i.triggerHandler("pause"),clearInterval(n)},resume:function(){i.triggerHandler("resume"),o()}}},$.copyToClipboard=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(t)}}},$.fn.clearable=function(e){var t=this;this.element=$(this);var n="clearable";this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),e!=null&&e?.tabbable&&(this.xButton=$('<button type="button" class="btn-icon hide-focus close"></button>').append($.createIconElement({classes:"close",icon:"close"}).icon())),this.clear=function(){t.element.val("").trigger("change").focus().trigger("cleared"),t.checkContents()},this.handleKeydown=function(a){var r=a.key;(r==="Enter"||a.altKey&&(r==="Delete"||r==="Backspace"))&&(a.preventDefault(),t.clear())},this.checkContents=function(){var a=t.element.val();a&&a.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(t.element),this.xButton[0].tabIndex=e!=null&&e?.tabbable?0:-1,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat(n),"keydown.".concat(n)].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown),e!=null&&e?.tabbable&&this.xButton.hideFocus();var i=["blur.".concat(n),"change.".concat(n),"keyup.".concat(n)].join(" ");this.element.off(i).on(i,function(){t.checkContents()}),this.checkContents()},N.actualChar=function(e){var t=e.which,n={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},i={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(n,t)&&(t=n[t]),t>=96&&t<=105&&(t-=48),!e.shiftKey&&t>=65&&t<=90?String.fromCharCode(t+32):!e.shiftKey&&t>=37&&t<=40?"":e.shiftKey&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:String.fromCharCode(t)},$.actualChar=function(e){return N.actualChar(e)},N.equals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},ue.convertToHTMLElement=function(e){return e instanceof HTMLElement?e:e instanceof $?e=e.length?e[0]:void 0:void 0},ue.focusableElems=function(e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=['button:not([disabled]):not([tabindex="-1"])','[href]:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','div.dropdown:not(.is-disabled):not([tabindex="-1"])','div.multiselect:not(.is-disabled):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).filter(function(i){return t.indexOf(i)===-1});return Nt(e.querySelectorAll(n.join(", "))).filter(function(i){return i.tagName.toLowerCase()!=="use"})},N.isPlainObject=function(e){return!(!e||Object.prototype.toString.call(e)!=="[object Object]")&&(!Object.getPrototypeOf(e)||e!==null&&at(e)==="object"&&Object.getPrototypeOf(e)===Object.prototype)},N.mergeByPosition=function(e,t){var n,i=Math.max(((n=e)===null||n===void 0||n==null?void 0:n.length)||0,(t==null||t==null?void 0:t.length)||0);if(e||(e=[]),i===0)return[];for(var a=0;a<i;a++)t[a]!==void 0&&t[a]!==null&&(e[a]=t[a]);return e||[]},N.extend=function e(){var t=arguments[0]||{},n=!1,i=0;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(n=arguments[0],t=Array.isArray(arguments[1])?[]:{},i++);for(var a=function(r){for(var o in r){if(r.hasOwnProperty(o))if(r[o]instanceof jQuery)t[o]=$(r[o]);else if(n&&Object.prototype.toString.call(r[o])==="[object Object]"){var c=r[o],u=N.isPlainObject(c),p=Array.isArray(c)?[]:{};t[o]=u?e(!0,p,t[o],c):c}else Array.isArray(r[o])?t[o]=N.mergeByPosition(t[o],r[o]):r[o]!==void 0&&(t[o]=r[o]===void 0&&t[o]!==void 0?t[o]:r[o]);r.hasOwnProperty(o)||t[o]||Object.prototype.toString.call(r[o])!=="[object Function]"||(t[o]=r[o])}};i<arguments.length;i++)a(arguments[i]);return t},N.fixSVGIcons=function e(t){if((Be.browser.name==="ie"||Be.browser.version==="11")&&t!==void 0){var n="http://www.w3.org/1999/xlink";if(t instanceof $){if(!t.length)return;if(t.length!==1)return void t.each(function(i,a){e(a)});t=t[0]}t instanceof NodeList?Array.prototype.forEach.call(t,function(i){e(i)}):setTimeout(function(){for(var i=t.getElementsByTagName("use"),a=0;a<i.length;a++){var r=i[a].getAttributeNS(n,"href");i[a].setAttributeNS(n,"href","x"),i[a].setAttributeNS(n,"href",r)}},1)}},N.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},N.getContainerScrollDistance=function(e){if(!ue.isElement(e))return[];var t=[];return $(e).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each(function(){var n=this;t.push({element:n,left:n.scrollLeft,top:n.scrollTop})}),document.body.classList.contains("no-scroll")||t.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),t},N.getHiddenSize=function(e,t){var n={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!ue.isElement(e))return n.dims;e=$(e),t=la(la({},n),t);var i=ue.isElement(t.parentElement);i&&(e=e.clone().appendTo(t.parentElement));var a=t.dims,r=e.parents().add(e),o={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},c=[];return r.each(function(){var u=this,p={};Object.keys(o).forEach(function(m){u.style[m]&&(p[m]=u.style[m],u.style[m]=o[m])}),c.push(p)}),a.padding={bottom:e.css("padding-bottom"),left:e.css("padding-left"),right:e.css("padding-right"),top:e.css("padding-top")},a.width=e.width(),a.outerWidth=e.outerWidth(t.includeMargin),a.innerWidth=e.innerWidth(),a.scrollWidth=e[0].scrollWidth,a.height=e.height(),a.innerHeight=e.innerHeight(),a.outerHeight=e.outerHeight(t.includeMargin),a.scrollHeight=e[0].scrollHeight,r.each(function(u){var p=this,m=c[u];Object.keys(o).forEach(function(v){m[v]&&(p.style[v]=m[v])})}),i&&e.remove(),a},$.fn.getHiddenSize=function(e){return N.getHiddenSize(this,e)},N.isString=function(e){return typeof e=="string"||e instanceof String},N.isNumber=function(e){return typeof e=="number"&&e.length===void 0&&!isNaN(e)},N.safeSetSelection=function(e,t,n){e instanceof HTMLInputElement&&["text","password","search","url","week","month"].indexOf(e.type)!==-1&&(t&&n===void 0&&(n=t),document.activeElement===e&&(Be.os.name==="android"?hi(function(){e.setSelectionRange(t,n,"none")},0):e.setSelectionRange(t,n,"none")))},N.mergeSettings=function(e,t,n){return t&&Kr(t)||(t=Kr(n)?n:{}),N.extend(!0,{},Ro(n),Ro(t),e!==void 0?N.parseSettings(e):{})},N.isHTML=function(e){return/(<([^>]+)>)/i.test(e)};var rs={convertDelayToFPS:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return e/16.7},convertFPSToDelay:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return 16.7*e},isFinite:function(e){return typeof e=="number"&&e==e&&e!==1/0&&e!==-1/0}};N.forEach=function(e,t,n){for(var i=0;i<e.length;i++)t.call(n,e[i],i,e)},rs.sign=function(e){return Math.sign?Math.sign(e):(e=+e)==0||isNaN(e)?e:e>0?1:-1},N.getArrayFromList=function(e){var t=Array.prototype.slice;return Function.prototype.call.bind(t)(e)},N.getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},N.deepCopy=function(e){return N.extend(!0,Array.isArray(e)?[]:{},e)},N.isSubscribedTo=function(e,t,n,i){var a=$._data(e).events;for(var r in a)if(r===n&&(a[r].length!==1||a[r][0].namespace!==i))return!0;return!1},N.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},N.getSiblingsHeight=function(e){return ue.getSiblings(e).map(function(t){return t.offsetHeight}).reduce(function(t,n){return t+n},0)},N.getParentAvailableHeight=function(e){return e.parentNode.offsetHeight-N.getSiblingsHeight(e)},N.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},N.toggleCompactMode=function(e){var t="form-layout-compact",n=e.classList.contains(t);n?e.classList.remove(t):e.classList.add(t);for(var i=e.querySelectorAll(".datagrid-container"),a=0;a<i.length;a++){var r=$(i[a]).data("datagrid");if(!r.rowHeight)return;n?r.rowHeight(r.oldRowHeight||"large"):(r.oldRowHeight=r.settings.rowHeight,r.rowHeight("extra-small"))}},N.addAttributes=function(e,t,n,i,a){if(n){var r=function(c,u){!e[0]||!a&&e[0].hasAttribute(c)||e.attr(c,u+(i?"-".concat(i.toLowerCase()):""))};if(Array.isArray(n))n.forEach(function(c){var u=typeof c.value=="function"?c.value(t):c.value;r(c.name,u)});else{var o=typeof n.value=="function"?n.value(t):n.value;r(n.name,o)}}},N.stringAttributes=function(e,t,n){var i="";if(!t)return i;if(Array.isArray(t))return t.forEach(function(r){var o=typeof r.value=="function"?r.value(e):r.value;i+=" ".concat(r.name,'="').concat(o+(n?"-".concat(n):""),'"')}),i;var a=typeof t.value=="function"?t.value(e):t.value;return i+=" ".concat(t.name,'="').concat(a+(n?"-".concat(n.toLowerCase()):""),'"')},N.getAttribute=function(e,t,n){var i;return typeof t=="string"&&t.length&&Array.isArray(n)&&n.forEach(function(a){i||a.name!==t||(i=typeof a.value=="function"?a.value(e):a.value)}),i},N.waitForTransitionEnd=function(e,t){return new Promise(function(n){e.addEventListener("transitionend",function i(a){a.propertyName===t&&(e.removeEventListener("transitionend",i),n())})})},N.deepMergeObject=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(t));return Object.keys(i).forEach(function(a){at(i[a])!=="object"||Array.isArray(i[a])?n[a]=i[a]:n[a]=N.deepMergeObject(n[a],i[a])}),n};var Ys={isEmpty:function(e){return Object.keys(e).length===0&&e.constructor===Object}},ot={EMPTY:"",splice:function(e,t,n,i){return e.slice(0,t)+i+e.slice(t+Math.abs(n))},removeDuplicates:function(e){return e.split("").filter(function(t,n,i){return i.indexOf(t)===n}).join("")},containsHTML:function(e){return/<[a-z][\s\S]*>/i.test(e)},stripWhitespace:function(e){return e.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},toBoolean:function(e){var t=+e;return isNaN(t)?!!String(e).toLowerCase().replace(!1,""):!!t},textWidth:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");n.font="".concat(t,"px arial");var i=n.measureText(e);return Math.round(i.width)},padDate:function(e,t,n){return e+"0".concat(t+1).slice(-2)+"0".concat(n).slice(-2)}};ot.textWidth=function(e,t,n){var i=document.createElement("canvas");if(!i)return 0;var a=i.getContext("2d");if(!a)return 0;a.font=n||"14px arial";var r=a.measureText(e);return Math.round(r.width+(t||0))},ot.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},ot.count=function(e,t){return e.split(t).length-1},ot.isValidURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};var os={truncate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e.toString().split(".");return n[1]=n[1]?n[1].substr(0,t):"","".concat(n[0],".").concat(n[1])},round:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return os.toFixed(e,t)},fixTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return t>10&&e.toString().indexOf(".")>-1?e.toLocaleString("en-US",{useGrouping:!1,minimumFractionDigits:t}):(+(Math.round(+(e+"e"+t))+"e"+-t)).toFixed(t)},toFixed:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e.toString(),i=!1;n.substr(0,1)==="-"&&(i=!0,n=n.replace("-",""));var a="",r=n.split("."),o=[r[0].substr(0,10),r[0].substr(10),r[1]],c=o[0],u=o[1];if(a=this.fixTo((u||c)+(o[2]?".".concat(o[2]):""),t).toString(),u&&a.length===11&&a==="10000000000"&&(a="0000000000",c=(parseInt(c,10)+1).toString()),u&&u.substr(0,1)!=="0"&&(a=c+a),u&&u.substr(0,1)==="0")if(parseInt(u,10)===0){var p=a.split(".")[1];a="".concat(c).concat(u).concat(p?".".concat(p):"")}else a="".concat(c).concat(a);return i?"-".concat(a):a},decimalPlaces:function(e){return Math.floor(e)===e||e.toString().indexOf(".")===-1?0:e.toString().split(".")[1].length||0}},ut={};function ls(e){var t=Number(e).toString(16);return t.length===1?"0".concat(t):t}ut.hexToRgba=function(e,t){var n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?((n=e.substring(1).split("")).length===3&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x".concat(n.join("")),"rgba(".concat([n>>16&255,n>>8&255,255&n].join(","),",").concat(t.toString(),")")):""},ut.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},ut.rgbToHex=function(e,t,n){return at(e)!=="object"||typeof e.r!="number"&&typeof e.r!="string"||(t=e.g,n=e.b,e=e.r),"#".concat(ls(e)).concat(ls(t)).concat(ls(n))},ut.rgbToHsl=function(e,t,n){at(e)!=="object"||typeof e.r!="number"&&typeof e.r!="string"||(t=e.g,n=e.b,e=e.r),e=Number(e),t=Number(t),n=Number(n),e/=255,t/=255,n/=255;var i=Math.min(e,t,n),a=Math.max(e,t,n),r=a-i,o=0,c=0,u=0;return o=r===0?0:a===e?(t-n)/r%6:a===t?(n-e)/r+2:(e-t)/r+4,(o=Math.round(60*o))<0&&(o+=360),u=(a+i)/2,r!==0&&(c=r/(1-Math.abs(2*u-1))),{h:o,s:c=+(100*c).toFixed(1),l:u=+(100*u).toFixed(1)}},ut.hslToRgb=function(e,t,n){at(e)!=="object"||typeof e.h!="number"&&typeof e.h!="string"||(t=(e=e.h).s,n=e.l),e=Number(e),t=Number(t),n=Number(n),t/=100,n/=100;var i=(1-Math.abs(2*n-1))*t,a=i*(1-Math.abs(e/60%2-1)),r=n-i/2,o=0,c=0,u=0;return 0<=e&&e<60?(o=i,c=a,u=0):60<=e&&e<120?(o=a,c=i,u=0):120<=e&&e<180||180<=e&&e<240?(o=0,c=a,u=i):240<=e&&e<300?(o=a,c=0,u=i):300<=e&&e<360&&(o=i,c=0,u=a),{r:o=Math.round(255*(o+r)),g:c=Math.round(255*(c+r)),b:u=Math.round(255*(u+r))}},ut.getLuminousColorShade=function(e,t){e=this.validateHex(e).substr(1),t=t||0;var n,i,a="#";for(i=0;i<3;i++)n=parseInt(e.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+="00".concat(n).substr(n.length);return a},ut.validateHex=function(e){return(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#".concat(e)},ut.getContrastColor=function(e,t,n){e=e?e.replace("#",""):"";var i=function(a){return parseInt(e.substr(a,2),16)};return(299*i(0)+587*i(2)+114*i(4))/1e3>=146?n||"black":t||"white"},ut.getDesaturatedColor=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;e=e?e.replace("#",""):"";var n=ut.hexToRgb(e),i=.3086*n.r+.6094*n.g+.082*n.b;return n.r=Math.round(n.r*t+i*(1-t)),n.g=Math.round(n.g*t+i*(1-t)),n.b=Math.round(n.b*t+i*(1-t)),ut.rgbToHex(n.r,n.g,n.b)},ut.isLighter=function(e,t){var n=ut.hexToRgb(e),i=ut.hexToRgb(t),a=ut.rgbToHsl(n),r=ut.rgbToHsl(i);return a.l<=r.l};var As=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],No="",Ks=!1;at(window.SohoConfig)==="object"&&(typeof window.SohoConfig.culturesPath=="string"&&(No=window.SohoConfig.culturesPath),typeof window.SohoConfig.minifyCultures=="boolean"&&(Ks=window.SohoConfig.minifyCultures));var L={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],twoDigitYearCutoff:39,culturesPath:No,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tl",default:"tl-PH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tl-PH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pt-BR","pt-PT"],defaultLocale:"en-US",minify:Ks,updateLanguageTag:function(e){var t=$("html");e.length===2&&(e=this.defaultLocales.filter(function(n){return n.lang===e})),t.attr("lang",e),this.isRTL()?t.attr("dir","rtl"):t.attr("dir","ltr"),L.flipIconsHorizontally(this.isRTL()),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var e=document.getElementsByTagName("script"),t=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,n=0;n<e.length;n++){var i=e[n].src,a=i.indexOf("?");if(i!==""&&a>-1&&(i=i.substr(0,a)),e[n].id==="sohoxi-script")return"".concat(i.substring(0,i.lastIndexOf("/")),"/");i.match(t)&&(this.culturesPath="".concat(i.replace(t,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var e=!1,t=document.getElementsByTagName("script"),n=0;n<t.length;n++)t[n].src.indexOf("cultures")>-1&&(e=!0);return e},correctLocale:function(e){e==="in-ID"&&(e="id-ID"),e.substr(0,2)==="iw"&&(e="he-IL");var t=e.split("-")[0];if(this.supportedLocales.indexOf(e)===-1){if((e=this.defaultLocales.filter(function(n){return n.lang===t}))&&e[0])return e[0].default;e=this.defaultLocale}return e},correctLanguage:function(e){var t;((t=e)===null||t===void 0||t==null?void 0:t.substr(0,3))==="en-"&&(e=e.substr(0,2));var n=this.defaultLocales.filter(function(i){return i.lang===e});return n&&n[0]?this.remapLanguage(e):(n=this.remapLanguage(e),n)},remapLanguage:function(e){var t=e;return e==="in"&&(t="id"),e==="iw"&&(t="he"),e!=="nb"&&e!=="nn"&&e!=="nb-NO"&&e!=="nn-NO"||(t="no"),this.translatedLocales.indexOf(e)>-1?this.translatedLocales[this.translatedLocales.indexOf(e)]:t.substr(0,2)},addCulture:function(e,t,n){var i=this.remapLanguage(e);if(this.cultures[e]=t,this.cultures[e].name=e,t.messages)this.languages[i]={name:i,direction:t.direction||(n?n.direction:""),nativeName:t.nativeName||(n?n.nativeName:""),messages:t.messages||(n?n.messages:{})},this.languages[e]={name:e,direction:t.direction||(n?n.direction:""),nativeName:t.nativeName||(n?n.nativeName:""),messages:t.messages||(n?n.messages:{})};else if(!t.messages){var a=this.parentLocale(e);a.default&&a.default!==e&&!this.cultures[a.default]&&this.appendLocaleScript(a.default)}},parentLocale:function(e){var t=e.substr(0,2),n=this.defaultLocales.filter(function(i){return i.lang===t})[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(e)>-1?{lang:"fr",default:"fr-CA"}:n},appendedLocales:[],appendLocaleScript:function(e,t,n,i){var a=this,r=document.createElement("script"),o=this.minify?".min":"";r.async=!1,this.appendedLocales.indexOf(e)>-1||(this.appendedLocales.push(e),r.src=i?"".concat(this.getCulturesPath()+i).concat(o,".js"):"".concat(this.getCulturesPath()+e).concat(o,".js"),r.onload=function(){t&&!n&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),n&&a.dff[n]&&(a.setCurrentLocale(e,a.cultures[e]),a.setCurrentLocale(n,a.cultures[n]),a.dff[n].resolve(n)),n&&a.dff[e]&&a.cultures[e]&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),t||n||!a.dff[e]||a.dff[e].resolve(e)},r.onerror=function(){a.dff[e]&&a.dff[e].reject()},at(window.SohoConfig)==="object"&&typeof window.SohoConfig.nonce=="string"&&r.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(r))},set:function(e){var t=this;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),e==="")return t.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US",e==="en-US");var n=!1,i=this.parentLocale(e);return i.default&&i.default!==e&&!this.cultures[i.default]&&(n=!0),n||!e||this.cultures[e]||this.currentLocale.name===e||e==="en-US"||(this.setCurrentLocale(e),this.appendLocaleScript(e,!0)),n&&(i.default!=="en-US"&&this.appendLocaleScript(i.default,!1),this.appendLocaleScript(e,!1,i.default)),e&&t.currentLocale.data&&t.currentLocale.dataName===e&&t.dff[e].resolve(t.currentLocale.name),t.setCurrentLocale(e,t.cultures[e]),t.cultures[e]&&this.cultureInHead()&&t.dff[e].resolve(t.currentLocale.name),this.dff[e].promise()},getLocale:function(e,t){if(!e)return null;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),e===""){var n=$.Deferred();return n.resolve(),n.promise()}return e&&e!=="en-US"&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),e&&!this.cultures[e]&&this.currentLocale.name!==e&&e!=="en-US"&&this.appendLocaleScript(e,!1,!1,t),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(e),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(e),this.dff[e].promise()},setLanguage:function(e){var t=this,n=this.currentLocale.name;e=this.correctLanguage(e),this.languages[e]||this.set(e).done(function(){t.set(n),t.setLanguage(e)});var i=this.correctLocale(e);return this.languages[e]?(this.currentLanguage=this.languages[e],this.updateLanguageTag(e),this.dff[i]=$.Deferred(),this.dff[i].resolve()):(this.currentLanguage.name=e,this.dff[i])},setCurrentLocale:function(e,t){var n=this.remapLanguage(e);this.currentLocale.name=e;var i,a,r,o,c,u=this.languages[n]!==void 0&&this.languages[e]!==void 0&&this.languages[n].nativeName!==this.languages[e].nativeName?e:n;t&&(this.currentLocale.data=t,this.currentLocale.dataName=e,this.currentLanguage={},this.currentLanguage.name=n,this.languages[u]&&(this.currentLanguage=this.languages[u],this.currentLanguage.name=n,this.updateLanguageTag(e)),this.translatedLocales.indexOf(e)>-1&&(this.languages[u].direction=t.direction,this.languages[u].messages=t.messages,this.languages[u].name=n,this.languages[u].nativeName=t.nativeName,this.languages[e]={direction:t.direction,messages:t.messages,name:e,nativeName:t.nativeName}),(typeof d3>"u"?"undefined":at(d3))==="object"&&d3.formatDefaultLocale({decimal:(t==null||(i=t?.numbers)===null||i===void 0||i==null?void 0:i.decimal)||".",thousands:(t==null||(a=t?.numbers)===null||a===void 0||a==null?void 0:a.group)||",",grouping:(t==null||(r=t?.numbers)===null||r===void 0||r==null?void 0:r.groupSizes)||[3],percent:(t==null||(o=t?.numbers)===null||o===void 0||o==null?void 0:o.percentSign)||"%",currency:t!=null&&t?.currencySign?t.currencyFormat.split("\xA4")[0]===""?[t.currencySign,""]:["",t.currencySign]:["$",""],minus:(t==null||(c=t?.numbers)===null||c===void 0||c==null?void 0:c.minusSign)||"-"}))},formatDate:function(e,t){t||(t={date:"short"});var n=this.useLocale(t);if(e){if(e==="0000"||e==="000000"||e==="00000000")return"";if(typeof e=="string"&&/T|Z/g.test(e)&&(e=this.newDateObj(e)),!(e instanceof Date)&&typeof e=="string"){var i=L.parseDate(e,t);isNaN(i)&&t.date==="datetime"&&e.substr(4,1)==="-"&&e.substr(7,1)==="-"&&(i=new Date(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2))),e=i}if(!(e instanceof Date)&&typeof e=="number"&&(e=new Date(e)),e){var a,r="",o=n.calendars?n.calendars[0]:null;t.date&&o&&(a=o.dateFormat[t.date]),t.pattern&&(a=t.pattern),typeof t=="string"&&t!==""&&(a=t),a||(a=o.dateFormat.short);var c=e instanceof Array?e[0]:e.getFullYear(),u=e instanceof Array?e[1]:e.getMonth(),p=e instanceof Array?e[2]:e.getDate(),m=e.getDay?e.getDay():"",v=e instanceof Array?e[3]:e.getHours(),w=e instanceof Array?e[4]:e.getMinutes(),C=e instanceof Array?e[5]:e.getSeconds(),A=e instanceof Array?e[6]:e.getMilliseconds();if(t.fromGregorian||t.toUmalqura){var S=this.gregorianToUmalqura(e);p=S[2],u=S[1],c=S[0]}if(t.toGregorian||t.fromUmalqura){var M=this.umalquraToGregorian(c,u,p);p=M.getDate(),u=M.getMonth(),c=M.getFullYear()}var I=(r=(r=(r=(r=(r=(a=(a=(a=(a=a.replace("de","nnnnn")).replace("ng\xE0y","nnnn")).replace("th\xE1ng","t1\xE1ng")).replace("den","nnn")).replace("dd",this.pad(p,2))).replace("d",p)).replace("yyyy",c)).replace("yy",c.toString().substr(2))).replace("y",c)).indexOf(" a")>-1||r.indexOf("a")===0;if(I&&v===0&&(r=(r=r.replace("hh",12)).replace("h",12)),r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace("hh",v>12?this.pad(v-12,2):this.pad(v,2))).replace("h",v>12?v-12:v)).replace("HH",this.pad(v,2))).replace("H",v)).replace("mm",this.pad(w,2))).replace("ss",this.pad(C,2))).replace("SSS",this.pad(A,3))).replace("MMMM",o?o.months.wide[u]:null)).replace("MMM",o?o.months.abbreviated[u]:null),a.indexOf("MMM")===-1&&(r=(r=r.replace("MM",this.pad(u+1,2))).replace("M",u+1)),I&&o&&((r=r.replace(" a"," ".concat(v>=12?o.dayPeriods[1]:o.dayPeriods[0]))).indexOf("a")===0&&(r=r.replace("a"," ".concat(v>=12?o.dayPeriods[1]:o.dayPeriods[0]))),r=r.replace("EEEE",o.days.wide[m])),o&&(r=r.replace("EEEE",o.days.wide[m])),o&&(r=r.replace("EEE",o.days.abbreviated[m])),o&&(r=r.replace("EE",o.days.narrow[m])),(r=(r=(r=(r=r.replace("nnnnn","de")).replace("nnnn","ng\xE0y")).replace("t1\xE1ng","th\xE1ng")).replace("nnn","den")).indexOf("zz")>-1){var z=new Date,V=this.getTimeZone(z,"short"),U=this.getTimeZone(z,"long");r=(r=r.replace("zzzz",U)).replace("zz",V)}return(r=r.replace(/&lrm;|\u200E/gi," ")).trim()}}},newDateObj:function(e){var t=new Date(e);if(Be.browser.name==="safari"&&typeof e=="string"&&/T|Z/g.test(e)){var n=e.replace(/Z/,"").replace(/T|:/g,"-").split("-");n=n.map(function(i,a){return+(a===1?i-1:i)}),t=Ts(Date,Nt(n))}return t},formatHour:function(e,t){var n=this.calendar().dateFormat.timeSeparator,i=this.currentLocale.name;at(t)==="object"&&(i=t.locale||i,n=t.timeSeparator||this.calendar(i).dateFormat.timeSeparator),typeof e=="string"&&e.indexOf(n)===-1&&(n=":");var a=new Date;if(typeof e=="number"){var r=e.toString().split(".");a.setHours(r[0]),a.setMinutes(r[1]?60*parseFloat("0.".concat(r[1])):0)}else{var o=e.split(n);a.setHours(o[0]),a.setMinutes(o[1]||0)}var c={date:"hour"};return t!=null&&t?.pattern&&(c.pattern=t.pattern),this.formatDate(a,c)},formatHourRange:function(e,t,n){var i=this.currentLocale.name,a=this.calendar(i).dayPeriods,r=!1;at(n)==="object"&&(i=n.locale||i,a=this.calendar(i).dayPeriods);var o="".concat(L.formatHour(e,n)," - ").concat(L.formatHour(t,n));return n!=null&&n?.keepPeriod||((o.indexOf(":00 AM -")>-1||o.indexOf(":00 PM -")>-1)&&(r=!0),ot.count(o,a[0])>1&&(o=o.replace(a[0],"")),ot.count(o,a[1])>1&&(o=o.replace(" ".concat(a[1]),""))),o=o.replace("  "," "),r&&(o=o.replace(":00 -"," -")),o},getTimeZone:function(e,t){var n=L.currentLocale.name||"en-US";if(Be.browser.name==="ie"&&Be.browser.version==="11")return e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("");var i=e.toLocaleDateString(n),a=e.toLocaleDateString(n,{timeZoneName:t==="long"?"long":"short"}),r=a.indexOf(i);return r>=0?(a.substring(0,r)+a.substring(r+i.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):a},dateToTimeZone:function(e,t,n){return Be.browser.name==="ie"&&Be.browser.version==="11"?"".concat(e.toLocaleString(L.currentLocale.name)," ").concat(e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):e.toLocaleString(L.currentLocale.name,{timeZone:t,timeZoneName:n})},dateToUTC:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},toLocaleString:function(e,t,n,i){if(typeof e!="number")return"";var a={locale:t||L.currentLocale.name,options:n||void 0},r=e.toLocaleString(a.locale,a.options);if(!/undefined|null/.test(at(i))){var o=this.getSeparator(a.locale,"group");o!=="."&&(r=r.replace(new RegExp(o,"g"),i.toString()))}return r},getSeparator:function(e,t){return Intl.NumberFormat(e).formatToParts(1000.1).find(function(n){return n.type===t}).value},convertNumberToEnglish:function(e){for(var t=["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],n=["\u0966","\u0967","\u0968","\u0969","\u096A","\u096B","\u096C","\u096D","\u096E","\u096F"],i=["\u96F6","\u58F9","\u8CB3","\u53C4","\u8086","\u4F0D","\u9678","\u67D2","\u634C","\u7396"],a=["\u96F6","\u58F9","\u8D30","\u53C1","\u8086","\u4F0D","\u9646","\u67D2","\u634C","\u7396"],r=["\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"],o=0;o<=9;o++)e=(e=(e=(e=(e=(e=(e=e.replace(t[o],o)).replace("\u066C","")).replace(",","")).replace(n[o],o)).replace(i[o],o)).replace(a[o],o)).replace(r[o],o),o===0&&(e=e.replace("\u96F6",o));return parseFloat(e)},isValidDate:function(e){return Object.prototype.toString.call(e)==="[object Date]"&&!isNaN(e.getTime())},parseDate:function(e,t,n){if(e){var i=t,a=this.currentLocale.name,r=this.calendar();at(t)==="object"&&(a=t.locale||a,i=t.dateFormat||this.calendar(a).dateFormat[i.date]),at(t)==="object"&&t.pattern&&(i=t.dateFormat||t.pattern),at(t)==="object"&&t.calendarName&&t.locale&&(r=this.calendar(t.locale,t.language,t.calendarName)),i||(i=this.calendar(a).dateFormat.short);var o=e;if(e!=="0000"&&e!=="000000"&&e!=="00000000"){var c,u;i.pattern&&(i=i.pattern);var p,m,v={},w=i.toLowerCase().indexOf("h")>-1,C=e.toLowerCase().indexOf("z")>-1,A=!!r.dayPeriods.filter(function(bt){return bt.indexOf(".")>-1}).length&&i.indexOf("a")>-1&&i.indexOf("ah")<0&&i.indexOf("H")<0,S=(i.match(/M/g)||[]).length===3&&r&&r.months&&r.months.abbreviated&&r.months.abbreviated.filter(function(bt){return/\./.test(bt)}).length;if(w){var M=L.getTimeZone(new Date,"short"),I=L.getTimeZone(new Date,"long");e=(e=e.replace(" ".concat(M),"")).replace(" ".concat(I),"");var z=S?/[T\s:-]/g:/[T\s:.-]/g;i=(i=i.replace(" zzzz","").replace(" zz","")).replace(z,"/").replace(/z/i,""),i=A?i.replace("//","/"):i,e=e.replace(A?/[T\s:-]/g:z,"/").replace(/z/i,"")}i=i.replace(" de "," "),e=e.replace(" de "," "),i=i.replace("ah","a/h"),e=e.replace("\u5348","\u5348/"),i=i.replace(",",""),e=e.replace(",","");var V=i.indexOf("Mdyyyy"),U=i.indexOf("dMyyyy"),G=-1,J=-1;if((V>-1||U>-1)&&(J=(G=V>-1?V:U>-1?U:0)+e.indexOf("/")>-1?e.indexOf("/"):e.length,e="".concat(e.substr(G,J-4),"/").concat(e.substr(J-4,e.length)),e="".concat(e.substr(G,e.indexOf("/")/2),"/").concat(e.substr(e.indexOf("/")/2,e.length))),V>-1&&(i=i.replace("Mdyyyy","M/d/yyyy")),U>-1&&(i=i.replace("dMyyyy","d/M/yyyy")),i.indexOf(" ")!==-1){var te=S?/[\s:]/g:/[\s:.]/g;i=i.replace(te,"/"),e=e.replace(te,"/")}if(i.indexOf("MMMM")>-1&&L.isRTL()&&i&&i!=="MMMM/dd"&&i!=="dd/MMMM"){var de=e.lastIndexOf("/");e=e.substr(0,de-1).replace("/"," ")+e.substr(de)}if(i.indexOf(" ")===-1&&i.indexOf(".")===-1&&i.indexOf("/")===-1&&i.indexOf("-")===-1){e.indexOf(" ")!==-1?e=e.split(" ").join(""):e.indexOf(".")!==-1?e=e.split(".").join(""):e.indexOf("/")!==-1?e=e.split("/").join(""):e.indexOf("-")!==-1&&(e=e.split("-").join(""));var H=i[0],he="",ie="";for(p=0,m=i.length;p<m;p++)ie+=i[p]!==H?"/".concat(e[p]):e[p],he+=i[p]!==H?"/".concat(i[p]):i[p],p>1&&(H=i[p]);e=ie,i=he}c=i.split("/"),u=e.split("/"),c.length===1&&(c=i.split(".")),u.length===1&&(u=e.split(".")),c.length===1&&(c=i.split("-")),u.length===1&&(u=e.split("-")),c.length===1&&(c=i.split(" ")),u.length===1&&(u=e.split(" "));var me=this.getDatePart(c,u,"M","MM","MMM","MMMM"),ke=this.getDatePart(c,u,"y","yy","yyyy"),De=!1,Me=!1,Ve=r.dayPeriods[0],Ke=r.dayPeriods[1];for(A||(Ve=Ve.replace(/\./g,""),Ke=Ke.replace(/\./g,"")),p=0,m=u.length;p<m;p++){var ct="".concat(c[p]),qe=u[p],je=parseInt(qe,10);De||(De=ct.toLowerCase().indexOf("d")>-1);var lt=void 0,xt=void 0,sn=void 0;switch(ct){case"d":if(lt=new Date(ke,me,0).getDate(),je<1||je>31||je>lt)return;v.day=qe;break;case"dd":if(je<1||je>31||je<10&&qe.substr(0,1)!=="0")return;v.day=qe;break;case"M":if(je<1||je>12)return;v.month=qe-1;break;case"MM":if(je<1||je>12||je<10&&qe.substr(0,1)!=="0")return;v.month=qe-1;break;case"MMM":xt=this.calendar(a).months.abbreviated;for(var Xt=0;Xt<xt.length;Xt++)o.indexOf(xt[Xt])>-1&&(v.month=Xt);break;case"MMMM":sn=this.calendar(a).months.wide;for(var yn=0;yn<sn.length;yn++)o.indexOf(sn[yn])>-1&&(v.month=yn);break;case"yy":v.year=this.twoToFourDigitYear(qe);break;case"y":case"yyyy":v.year=qe.length===2?this.twoToFourDigitYear(qe):qe;break;case"h":if(je<0||je>12)return;v.h=Me?v.h:qe;break;case"hh":if(je<0||je>12)return;v.h=Me?v.h:qe.length===1?"0".concat(qe):qe;break;case"H":if(je<0||je>24)return;v.h=Me?v.h:qe;break;case"HH":if(je<0||je>24)return;v.h=Me?v.h:qe.length===1?"0".concat(qe):qe;break;case"ss":if(je<0||je>60){v.ss=0;break}v.ss=qe;break;case"SSS":v.ms=qe;break;case"mm":if(je<0||je>60){v.mm=0;break}v.mm=qe;break;case"a":!v.h&&c[p+1]&&c[p+1].toLowerCase().substr(0,1)==="h"&&(v.h=u[p+1],Me=!0),qe.toLowerCase()!==Ve&&qe.toUpperCase()!==Ve||(v.a="AM",v.h&&(v.h!==12&&v.h!=="12"||(v.h=0))),qe.toLowerCase()!==Ke&&qe.toUpperCase()!==Ke||(v.a="PM",v.h&&v.h<12&&(v.h=parseInt(v.h,10)+12))}}var qn=function(bt){return bt%4==0&&bt%100!=0||bt%400==0};if(v.return=void 0,v.leapYear=qn(v.year),!w||v.h||v.mm){if(!v.year&&v.year!==0&&!n){for(v.isUndefindedYear=!0,p=0,m=c.length;p<m;p++)if(c[p].indexOf("y")>-1&&u[p]!==void 0){v.isUndefindedYear=!1;break}if(v.isUndefindedYear){var Rn=parseInt(v.day,10)===29&&parseInt(v.month,10)===1;if(v.year=Rn?function(bt){for(var Fe=typeof bt!="number"||isNaN(bt)?new Date().getFullYear():bt,En=0;En<4&&!qn(Fe);En++)Fe--;return Fe}():new Date().getFullYear(),r.name==="islamic-umalqura"){var Ln=this.gregorianToUmalqura(new Date(v.year,0,1));v.year=Ln[0]}}else delete v.year}if(v.year&&v.year.length===2&&(v.year="20".concat(v.year)),v.year=$.trim(v.year),v.day=$.trim(v.day),(v.year===""||v.year&&"".concat(v.year).length!==2&&"".concat(v.year).length!==4)&&delete v.year,!v.month&&v.month!==0&&!n){for(v.isUndefindedMonth=!0,p=0,m=c.length;p<m;p++)if(c[p].indexOf("M")>-1&&u[p]!==void 0){v.isUndefindedMonth=!1;break}v.isUndefindedMonth&&(v.month=new Date().getMonth())}if(!(v.day||v.day===0||n&&De)){for(v.isUndefindedDay=!0,p=0,m=c.length;p<m;p++)if(c[p].indexOf("d")>-1&&u[p]!==void 0){v.isUndefindedDay=!1;break}v.isUndefindedDay?v.day=1:delete v.day}return w?C?(v.h!==void 0&&(v.return=new Date(Date.UTC(v.year,v.month,v.day,v.h,v.mm))),v.ss!==void 0&&(v.return=new Date(Date.UTC(v.year,v.month,v.day,v.h,v.mm,v.ss))),v.ms!==void 0&&(v.return=new Date(Date.UTC(v.year,v.month,v.day,v.h,v.mm,v.ss,v.ms)))):(v.h!==void 0&&(v.return=new Date(v.year,v.month,v.day,v.h,v.mm)),v.ss!==void 0&&(v.return=new Date(v.year,v.month,v.day,v.h,v.mm,v.ss)),v.ms!==void 0&&(v.return=new Date(v.year,v.month,v.day,v.h,v.mm,v.ss,v.ms))):v.return=new Date(v.year,v.month,v.day),r.name==="islamic-umalqura"?[parseInt(v.year,10),parseInt(v.month,10),parseInt(v.day,10),parseInt(v.h||0,10),parseInt(v.mm||0,10),parseInt(v.ss||0,10),parseInt(v.ms||0,10)]:this.isValidDate(v.return)?v.return:void 0}}}},twoToFourDigitYear:function(e){return parseInt((e>this.twoDigitYearCutoff?"19":"20")+e,10)},getDatePart:function(e,t,n,i,a,r){var o=0;return $.each(t,function(c){n!==e[c]&&i!==e[c]&&a!==e[c]&&r!==e[c]||(o=t[c])}),o},useLocale:function(e){var t=this.currentLocale.data;if(e&&e.locale&&this.cultures[e.locale]&&(t=this.cultures[e.locale]),e&&e.language&&this.languages[e.language]){var n=N.extend(!0,{},this.currentLocale.data);if(n.calendars)return n.calendars[0]=this.calendar(e.locale||this.currentLocale.name,e.language),n}return t.numbers||(t.numbers=this.numbers()),t},useLanguage:function(e){var t=this.languages[this.currentLanguage.name];if(e&&e.locale){var n=this.remapLanguage(e.locale);t=this.languages[n]}return e&&e.locale&&this.currentLanguage.name!==this.currentLocale.name&&this.languages[this.currentLanguage.name]&&(t=this.languages[this.currentLanguage.name]),e&&e.language&&this.languages[e.language]&&(t=this.languages[e.language]),t},formatNumber:function(e,t){var n,i,a,r=this.useLocale(t),o=t&&t.decimal?t.decimal:r.numbers.decimal,c=t&&t.minimumFractionDigits!==void 0?t.minimumFractionDigits:t&&t.style&&t.style==="currency"?2:t&&t.style&&t.style==="percent"?0:2,u=t&&t.maximumFractionDigits!==void 0?t.maximumFractionDigits:t&&t.style&&(t.style==="currency"||t.style==="percent")?2:t&&t.minimumFractionDigits?t.minimumFractionDigits:3;if(e!=null&&e!==""){if(t&&t.style==="integer"&&(u=0,c=0),t&&t.style==="currency"){var p=t&&t.currencySign?t.currencySign:r.currencySign,m=t&&t.currencyFormat?t.currencyFormat:r.currencyFormat;m||(m="\xA4#,##0.00"),i=m.replace("\xA4",p)}if(t&&t.style==="percent"){var v=r.numbers?r.numbers.percentSign:"%";a=(a=r.numbers?r.numbers.percentFormat:"### %").replace("\xA4",v)}typeof e=="string"&&(t==null||t==null?void 0:t.parseNumber)!==!1&&(e=L.parseNumber(e,t)),e.toString().indexOf("e")>-1&&(e=e.toFixed(u+1)),t&&t.style==="percent"&&(e=(100*e).toFixed(c));var w=this.truncateDecimals(e,c,u,t&&t.round).split("."),C=[3,3];r&&r.numbers&&r.numbers.groupSizes&&(C=r.numbers.groupSizes),t&&t.groupSizes&&(C=t.groupSizes);var A=t&&t.group!==void 0?t.group:r.numbers.group,S=this.expandNumber(w[0],C,A);w[0]=S,n=w.join(o);var M=r&&r.numbers&&r.numbers.minusSign?r.numbers.minusSign:"-",I=n.indexOf(M)>-1;n=n.replace(M,"");var z=function(U){return U.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},V="";return c===0&&(V=new RegExp("(".concat(z(o),"[0-9]*?)0+$")),n=n.replace(V,"$1")),c>0&&(V=new RegExp("(".concat(z(o),".{").concat(c,"}[0-9]*?)0+$")),n=n.replace(V,"$1")),V=new RegExp("".concat(z(o),"$")),n=n.replace(V,""),t&&t.style==="currency"&&(n=i.replace("###",n)),t&&t.style==="percent"&&(n=a.replace("###",n)),I&&(n=M+n),n}},expandNumber:function(e,t,n){var i=e.length,a=!1;if(e.substr(0,1)==="-"&&(i=(e=e.substr(1)).length,a=!0),i<=3||t[0]===0)return(a?"-":"")+e;var r=e.substr(e.length-t[0]),o=e.substr(0,e.length-t[0]);if(t[1]===0)return(a?"-":"")+o+(o===""?"":n)+r;var c=o.split("").reverse().join(""),u=new RegExp(".{1,".concat(t[1],"}"),"g");return(a?"-":"")+c.match(u).join(n).split("").reverse().join("")+n+r},truncateDecimals:function(e,t,n,i){var a=e;a=i?os.round(e,n):os.truncate(e,n);var r=os.decimalPlaces(a);return r<t&&(a=a.toString()+new Array(t-r+1).join("0")),a.toString()},parseNumber:function(e,t){var n,i=this.useLocale(t),a=i.numbers;if(!(n=e))return NaN;typeof e=="number"&&(n=n.toString());var r=t&&t.group!==void 0?t.group:a?a.group:",",o=t&&t.decimal?t.decimal:a?a.decimal:".",c=t&&t.percentSign?t.percentSign:a?a.percentSign:"%",u=t&&t.currencySign?t.currencySign:i.currencySign||"$",p=r===" "||r===""?new RegExp(/\s/g):new RegExp("\\".concat(r),"g");return(n=(n=(n=(n=(n=(n=n.replace(p,"")).replace(o,".")).replace(c,"")).replace(u,"")).replace("$","")).replace(" ","")).length>=18?n:parseFloat(n)},translate:function(e,t){var n=this.useLanguage(t),i=!1,a=!0;if(e==="&nsbp;")return"";if(typeof t=="boolean"&&(i=t),at(t)==="object"&&t.showAsUndefined!==void 0&&(i=t.showAsUndefined),at(t)==="object"&&t.showBrackets!==void 0&&(a=t.showBrackets),n===void 0||n.messages===void 0)return i?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"");if(n.messages[e]===void 0){var r="en";return this.languages&&this.languages[r]&&this.languages[r].messages&&this.languages[r].messages[e]!==void 0?this.languages[r].messages[e].value:i?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"")}return n.messages[e].value},extendTranslations:function(e,t){if(this.languages[e]){var n=this.languages[e].messages;this.languages[e].messages=N.extend(!0,n,t)}},calendar:function(e,t,n){var i=[];if(this.currentLocale.data.calendars&&!e&&(i=this.currentLocale.data.calendars),t&&t.length>2&&(t=t.substr(0,2)),e&&this.cultures[e]&&(i=this.cultures[e].calendars),n&&i)for(var a=0;a<i.length;a++){var r=i[a];if(r.name===n)return r}if(!i[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a",dateTimestamp:"M/d/yyyy h:mm:ss a"},timeFormat:"h:mm:ss a",dayPeriods:["AM","PM"]};var o=N.extend(!0,{},i[0]);if(t&&e.substr(0,2)!==t){var c=this.defaultLocales.filter(function(p){return p.lang===t});if(c[0]){var u=this.cultures[c[0].default];o.days=u.calendars[0].days,o.months=u.calendars[0].months,o.dayPeriods=u.calendars[0].dayPeriods}}return o},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},isRTL:function(){return!!this.currentLanguage&&this.currentLanguage.direction==="right-to-left"},isIslamic:function(e){var t;return((t=this.calendar(e))===null||t===void 0||t==null?void 0:t.name)==="islamic-umalqura"},toUpperCase:function(e){return typeof this.currentLocale.data.toUpperCase=="function"?this.currentLocale.data.toUpperCase(e):e.toLocaleUpperCase()},toLowerCase:function(e){return typeof this.currentLocale.data.toLowerCase=="function"?this.currentLocale.data.toLowerCase(e):e.toString().toLocaleLowerCase()},capitalize:function(e){return this.toUpperCase(e.charAt(0))+e.slice(1)},capitalizeWords:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)t[n]=this.capitalize(t[n]);return t.join(" ")},gregorianToUmalqura:function(e){if(typeof e.getMonth!="function")return null;var t=function(n){for(var i=n-24e5+.5,a=0,r=0;r<As.length&&!(As[r]>i);r++)a++;var o=a+15292,c=Math.floor((o-1)/12);return{year:c+1,month:o-12*c-1,day:i-As[a-1]+1}}(function(n,i,a){n<0&&n++,i<3&&(i+=12,n--);var r=Math.floor(n/100),o=2-r+Math.floor(r/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(i+1))+a+o-1524.5}(e.getFullYear(),e.getMonth()+1,e.getDate()));return[t.year,t.month,t.day,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},umalquraToGregorian:function(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;Array.isArray(e)&&(t=e[1],n=e[2]||0,i=e[3]||0,a=e[4]||0,r=e[5]||0,o=e[6]||0,e=e[0]);var c=function(p){return typeof p=="number"&&!isNaN(p)};if(!c(e)||!c(t)||!c(n))return null;var u=function(p){var m=Math.floor(p+.5),v=Math.floor((m-186721625e-2)/36524.25),w=(v=m+1+v-Math.floor(v/4))+1524,C=Math.floor((w-122.1)/365.25),A=Math.floor(365.25*C),S=Math.floor((w-A)/30.6001),M=S-(S>13.5?13:1),I=C-(M>2.5?4716:4715);return I<=0&&I--,{year:I,month:M-1,day:w-A-Math.floor(30.6001*S)}}(n+As[12*(e-1)+(t+1)-15292-1]-1+24e5-.5);return new Date(u.year,u.month,u.day,i,a,r,o)},flipIconsHorizontally:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each(function(){var n=$(this).getIconName();e&&n&&$.inArray(n,t)!==-1&&$(this).closest(".monthview").length===0?$(this).addClass("icon-rtl-rotate"):$(this).removeClass("icon-rtl-rotate")})}};function Xs(e){if(typeof e!="function"){if(typeof e=="string")return e;throw new Error("".concat(at(e)," was provided where a function was expected."))}if(typeof e.name=="string")return"".concat(e.name,"()");var t=/^function\s+([\w$]+)\s*\(/.exec(e.toString());return t?"".concat(t[1],"()"):"(anonymous function)"}function Pn(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if((typeof console>"u"?"undefined":at(console))==="object"){var i=Xs(e),a=Xs(t);n.length&&(n=" (".concat(n,")")),console.warn("IDS Enterprise".concat(n,': "').concat(a,'" is deprecated. Please use "').concat(i,'" instead.'))}}function Ss(e){(typeof console>"u"?"undefined":at(console))==="object"&&console.warn('IDS Enterprise: "'.concat(e,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function Qs(e,t){var n=function(){Pn(e,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];e.apply(this,a)};return n.prototype=e.prototype,n}function _o(e){return this.element=$(e),this}_o.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return Pn("url","getCurrentURL"),this.url},getBaseURL:function(e){return this.element.length&&this.href&&this.href!=="/"?e?e.indexOf("/")===0?e:(e=(e.indexOf("#")===-1?"#":"")+e,this.url+e):this.url:e||""}};var Zi=new _o($("base[href]"));$.getBaseURL=function(e){return Zi.getBaseURL(e)};var vr={noAutoStart:!1},br={};function Et(){return window.performance&&window.performance.now?window.performance.now():new Date().getTime()}function Gt(e){if(this.id=e.id,this.duration=e.duration||-1,this.duration<1&&(typeof this.id!="string"||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=e.updateDuration||1,this.setFuncs(e),this.paused=!1,this.elapsedTime=0,this.startTime=Et(),this}function Es(e){return this.items=[],this.element=$("body"),this.settings=N.mergeSettings(null,e,vr),this.settings.noAutoStart!==!0&&this.start(),this}at(window.SohoConfig)==="object"&&at(window.SohoConfig.renderLoop)==="object"&&(br=N.extend({},vr,window.SohoConfig.renderLoop)),Gt.prototype={setFuncs:function(e){if(typeof e.updateCallback!="function"&&typeof e.timeoutCallback!="function")throw new Error("cannot register callback to RenderLoop because callback is not a function");typeof e.updateCallback=="function"&&(this.updateCallback=e.updateCallback),typeof e.timeoutCallback=="function"&&(this.timeoutCallback=e.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(e){e&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},Es.prototype={start:function(){this.doLoop=!0,this.startTime=Et();var e,t,n=this,i=Et();(function a(){n.doLoop&&(e=Et(),t=(e-i)/1e3,n.items.forEach(function(r){var o;if(r.doRemoveOnNextTick)n.remove(r);else if(r.paused||r.elapsedTime++,typeof r.duration=="number"&&r.duration>-1&&(r.startTime||(r.startTime=e),r.elapsedTime>=r.duration))r.destroy();else if(typeof r.updateCallback=="function"){if(r.updateDuration&&r.updateDuration>1&&(isNaN(r.timeUntilNextUpdate)&&(r.timeUntilNextUpdate=r.updateDuration),r.timeUntilNextUpdate>0))return void--r.timeUntilNextUpdate;o=[r,{last:i,delta:t,now:e}],r.updateCallback.apply(null,o)}}),i=e,requestAnimationFrame(a))})()},stop:function(){this.doLoop=!1},totalDuration:function(){return Et()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(e,t,n,i){var a=typeof i!="string"||!i.length;if(typeof n=="string")if(a)i=n,n=-1,a=!1;else{var r=Number(n);isNaN(r)||(n=r)}else typeof n!="number"&&(n=-1);return typeof i=="string"&&i.length||(i=""),new Gt({id:i,updateCallback:e,timeoutCallback:t,duration:n})},register:function(e,t,n,i){return e instanceof Gt||(e=this.buildRenderLoopItem(e,t,n,i)),this.items.push(e),e},unregister:function(e,t){if(typeof e!="function"&&typeof e!="string"&&typeof t!="string")throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return typeof e=="string"&&(t=e,e=void 0),this.remove({cb:e,id:t})},getFromQueue:function(e,t){var n;return typeof callback=="string"&&(t=e,e=void 0),typeof callback=="function"?this.items.forEach(function(i){return"".concat(i.updateCallback)!=="".concat(e)||(n=i,!1)}):typeof t=="string"&&this.items.forEach(function(i){return i.id!==t||(n=i,!1)}),n},remove:function(e){var t;return e instanceof Gt?(t=e,this.items=this.items.filter(function(n){return n!==e})):typeof e.updateCallback=="function"?this.items=this.items.filter(function(n){return"".concat(n.updateCallback)!=="".concat(e.updateCallback)||(t=n,!1)}):typeof e.id=="string"&&(this.items=this.items.filter(function(n){return n.id!==e.id||(t=n,!1)})),typeof t.timeoutCallback!="function"||t.noTimeout||t.timeoutCallback.apply(null,t),this.element.triggerHandler("remove.renderLoop",[t]),t},pause:function(e,t){if(typeof e!="function"&&typeof e!="string"&&typeof t!="string")throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(e,t);return n.pause(),n},resume:function(e,t){if(typeof e!="function"&&typeof e!="string"&&typeof t!="string")throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(e,t);return n.resume(),n}};var Hn=new Es(br),Xr="keyboard";function Qr(){this.pressedKeys=new Map,this.init()}Qr.prototype={init:function(){var e=this;$(document).on("keydown.".concat(Xr),function(t){e.press(t.key),e.announceKeys()}).on("keyup.".concat(Xr),function(t){e.unpress(t.key),e.announceKeys()})},announceKeys:function(){var e=[];this.pressedKeys.forEach(function(t,n){e.push(n)}),$("body").triggerHandler("keys",[e])},press:function(e){return this.pressedKeys.set("".concat(e),!0)},unpress:function(e){return this.pressedKeys.delete("".concat(e))},isPressed:function(e){return this.pressedKeys.has("".concat(e))}};var $s=new Qr,ea="modalmanager";function $a(e){return e!==void 0&&e.element instanceof $&&typeof e.destroy=="function"}function Wa(){return this.modals=[],this.handleEvents(),this}Wa.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter(function(e){return e.visible})},get currentlyActive(){var e;return this.modals.forEach(function(t){t.active&&(e=t)}),e},set currentlyActive(e){if(!$a(e))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach(function(t,n){t.active=$(t.element).is(e.element),t.active?t.element[0].style.zIndex="".concat(1020+n):t.visible?t.element[0].style.zIndex="".concat(920+n):t.element[0].style.zIndex=""}),this.refresh()},get last(){var e,t=this.currentlyOpen,n=t.length;return n&&(e=t[n-1]),e},render:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),n=document.createElement("div");t.id="ids-modal-root",t.classList.add("modal-page-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),t.appendChild(n),document.body.appendChild(t),this.rootElem=t,this.overlayElem=n},refresh:function(){var e=this.currentlyActive;e||(e=this.activateLast()),this.checkOverlayVisibility(),e?this.showContainers(e):this.hideContainers(e)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(e){if(!$a(e))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter(function(t){return $(t.element).is(e)})>0||this.modals.push(e)},unregister:function(e){if(!$a(e))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter(function(t){return!$(t.element).is(e.element)})},checkOverlayVisibility:function(){var e=0;this.currentlyActive&&(e=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.background="rgba(0, 0, 0, ".concat(e?"".concat(e):"",")")},checkRootElements:function(){var e=document.querySelector("#ids-modal-root");if(e instanceof HTMLElement){this.rootElem=e;var t=e.querySelector(".overlay");t instanceof HTMLElement&&(this.overlayElem=t)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];(t=e&&(e instanceof HTMLElement||e instanceof $&&e.length)?$(e).data("modal"):this.last)&&(n&&(t.isCancelled=!0),t.close())},closeAll:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.modals.forEach(function(t){e&&(t.isCancelled=!0),t.close(void 0,!0)}),this.refresh()},destroyAll:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.modals.forEach(function(t){(!e||t.capAPI)&&(t.close(void 0,!0),t.destroy())}),this.refresh()},closeLast:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.close(void 0,e)},activateLast:function(){var e=this.last;return e&&(this.currentlyActive=e),e},findById:function(e){if(e)return this.modals.filter(function(t){return t.id===e})[0]||void 0},handleEvents:function(){var e=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat(ea),function(n){var i=$(n.target).parents(".modal.is-active");switch(n.which||n.keyCode){case 27:e.close(i,!0);break;case 9:e.setModalFocus(n.shiftKey?"last":"first",n)}});var t=this;this.preRendered?this.checkRootElements():$(document).ready(function(){t.checkRootElements(),t.preRendered=!0}),this.hasEstablishedEvents=!0},setModalFocus:function(e,t){var n=this.currentlyActive;n&&(!n.isFocused||$(n.focusableElems.last).is(document.activeElement)&&e==="first"||$(n.focusableElems.first).is(document.activeElement)&&e==="last")&&(t.preventDefault(),n.setFocus(e))},teardown:function(){$(document).off("keydown.".concat(ea)),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var ca=new Wa;function Ds(e){return e!==void 0&&e.element instanceof $&&typeof e.destroy=="function"}function Js(){return this.notifications=[],this}Js.prototype={register:function(e){if(!Ds(e))throw new Error("The provided object has no Notification API, and cannot be registered.");this.notifications.filter(function(t){return $(t.element).is(e)})>0||this.notifications.push(e)},unregister:function(e){if(!Ds(e))throw new Error("The provided object has no Notification API, and cannot be registered.");var t=this.notifications.findIndex(function(n){return $(n.element).is(e)});t>=0&&this.notifications.splice(t,1)},closeById:function(e){if(this.notifications.length>0){var t=this.notifications.findIndex(function(n){return n.settings.id===e});t>=0&&(this.close(this.notifications[t]),this.notifications.splice(t,1))}},closeLatest:function(){this.notifications.length>0&&this.close(this.notifications.pop())},closeAll:function(){for(;this.notifications.length>0;)this.close(this.notifications.pop())},close:function(e){var t=e.element;e.close(),t&&this.notifications.length>0&&t.data("notification",this.notifications[0])}};var Is=new Js,Ua={themeName:"theme-classic",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#f0f0f0"},font:{name:"body-color-primary-font",value:"#1a1a1a"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},Ms={themeName:"theme-classic-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#888B94"},base:{name:"ids-color-brand-primary-base",value:"#50535A"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#888B94"},base:{name:"ids-color-brand-secondary-base",value:"#656871"},alt:{name:"ids-color-brand-secondary-alt",value:"#414247"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#212224"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#313236"},font:{name:"body-color-primary-font",value:"#ffffff"}},secondary:{background:{name:"body-color-secondary-background",value:"#414247"}}}}},Jr={themeName:"theme-classic-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#133c59",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#134d71"},alt:{name:"ids-color-brand-primary-alt",value:"#133c59"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#d8d8d8"},font:{name:"body-color-primary-font",value:"#000000"}},secondary:{background:{name:"body-color-secondary-background",value:"#d8d8d8"}}}}},Zs={themeName:"theme-new",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0066D4",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-secondary-base",value:"#6F6F76"},alt:{name:"ids-color-brand-secondary-alt",value:"#525257"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#ffffff"},font:{name:"body-color-primary-font",value:"#161618"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},dc={themeName:"theme-new-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#6F6F76",paletteName:"{ids.color.brand.primary.base.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-primary-base",value:"#6F6F76"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-secondary-base",value:"#8E8E95"},alt:{name:"ids-color-brand-secondary-alt",value:"#525257"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#161618"},font:{name:"body-color-primary-font",value:"#F5F5F5"}},secondary:{background:{name:"body-color-secondary-background",value:"#3B3B3F"}}}}},cs={themeName:"theme-new-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#003876",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#7B0F11",paletteName:"#7B0F11"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#004A99"},alt:{name:"ids-color-brand-primary-alt",value:"#003876"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#3B3B3F"},base:{name:"ids-color-brand-secondary-base",value:"#28282A"},alt:{name:"ids-color-brand-secondary-alt",value:"#161618"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#F5F5F5"},font:{name:"body-color-primary-font",value:"#28282A"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},ft={currentTheme:{id:"theme-new-light",name:L.translate("NewLightTheme")},allColors:[{id:"theme-classic-light",colors:Ua},{id:"theme-classic-dark",colors:Ms},{id:"theme-classic-contrast",colors:Jr},{id:"theme-new-light",colors:Zs},{id:"theme-new-dark",colors:dc},{id:"theme-new-contrast",colors:cs}],themes:function(){return[{id:"theme-classic-light",name:L.translate("ClassicLightTheme"),themeId:"theme-classic",modeId:"light",modeName:L.translate("Light")},{id:"theme-classic-dark",name:L.translate("ClassicDarkTheme"),themeId:"theme-classic",modeId:"dark",modeName:L.translate("Dark")},{id:"theme-classic-contrast",name:L.translate("ClassicHighContrastTheme"),themeId:"theme-classic",modeId:"contrast",modeName:L.translate("Contrast")},{id:"theme-new-light",name:L.translate("NewLightTheme"),themeId:"theme-new",modeId:"light",modeName:L.translate("Light")},{id:"theme-new-dark",name:L.translate("NewDarkTheme"),themeId:"theme-new",modeId:"dark",modeName:L.translate("Dark")},{id:"theme-new-contrast",name:L.translate("NewHighContrastTheme"),themeId:"theme-new",modeId:"contrast",modeName:L.translate("Contrast")}]},themeColors:function(){var e=this,t=this.allColors.filter(function(n){return n.id===e.currentTheme.id});return t[0]?t[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var e=this.themeColors().palette,t={},n={showBrackets:!1},i="#0066D4";switch(this.currentTheme.id){case"theme-new-light":case"theme-new-contrast":default:i="#fff";break;case"theme-new-dark":i="#28282A";break;case"theme-classic-light":i="#2578a9";break;case"theme-classic-contrast":i="#134d71";break;case"theme-classic-dark":i="#50535A"}return t.default={id:"default",name:L.translate("Default",n),backgroundColorClass:"primary-bg-color",value:i},t.alabaster={id:"alabaster",name:L.translate("Alabaster",n),backgroundColorClass:"alabaster",value:e.white.value},t.amber={id:"amber",name:L.translate("Amber",n),backgroundColorClass:"amber09",value:e.amber[90].value},t.amethyst={id:"amethyst",name:L.translate("Amethyst",n),backgroundColorClass:"amethyst06",value:e.amethyst[60].value},t.azure={id:"azure",name:L.translate("Azure",n),backgroundColorClass:"azure07",value:e.azure[70].value},t.emerald={id:"emerald",name:L.translate("Emerald",n),backgroundColorClass:"emerald08",value:e.emerald[80].value},t.graphite={id:"graphite",name:L.translate("Graphite",n),backgroundColorClass:"graphite06",value:e.graphite[60].value},t.ruby={id:"ruby",name:L.translate("Ruby",n),backgroundColorClass:"ruby09",value:e.ruby[90].value},t.slate={id:"slate",name:L.translate("Slate",n),backgroundColorClass:"slate06",value:e.slate[60].value},t.turquoise={id:"turquoise",name:L.translate("Turquoise",n),backgroundColorClass:"turquoise09",value:e.turquoise[90].value},t},setTheme:function(e){e=e.replace("soho","classic").replace("uplift","new");var t=this.themes().filter(function(n){return n.id===e});return t.length===0?"":(this.currentTheme=t[0],t)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1},get new(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1}},xi="personalize",zo={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function Cl(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,zo),this.init()}Cl.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.settings.theme?this.setTheme(this.settings.theme):this.setTheme(this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var e=this;return this.element.off("updated.".concat(xi)).on("updated.".concat(xi),function(){e.updated()}),this},appendStyleSheet:function(e){var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),(t=document.createElement("style")).setAttribute("id","soho-personalization"),t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},getColorMap:function(e){var t=ft.themeColors(),n={amber:t.palette.amber[90].value,amethyst:t.palette.amethyst[60].value,azure:t.palette.azure[70].value,emerald:t.palette.emerald[80].value,graphite:t.palette.graphite[60].value,ruby:t.palette.ruby[90].value,slate:t.palette.slate[60].value,turquoise:t.palette.turquoise[90].value};return va(va(va(va(va(va(va(va({},n.amber,t.palette.amber[e].value),n.amethyst,t.palette.amethyst[e].value),n.azure,t.palette.azure[e].value),n.emerald,t.palette.emerald[e].value),n.graphite,t.palette.graphite[e].value),n.ruby,t.palette.ruby[e].value),n.slate,t.palette.slate[e].value),n.turquoise,t.palette.turquoise[e].value)},getColorStyleSheet:function(e){if(e||(e={}),typeof e=="string"&&(e={header:e}),!e||e==="")return this;var t={header:"2578A9"},n=ft.themeColors();e.theme={},e.theme.bg=n.components.body.primary.background.value,e.theme.altbg=n.components.body.secondary.background.value,e.theme.text=n.components.body.primary.font.value,e.theme.altText=n.components.body.secondary.background.value,e.theme.disabledText=n.brand.secondary.alt.value;var i=!1,a=!1,r=!1;n.themeName.indexOf("contrast")>-1&&(a=!0),n.themeName.indexOf("dark")>-1&&(i=!0),(n.themeName.indexOf("uplift")>-1||n.themeName.indexOf("new")>-1)&&(r=!0),e.theme.props={contrast:a,dark:i,newTheme:r};var o={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","#368AC0","#368ac0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},c=!1,u="".concat(e.header||t.header).toLowerCase();u=ut.validateHex(u),Object.keys(o).forEach(function(H){c=c||o[H].indexOf(u)>-1}),u=c?"white":null;var p=ut.validateHex(e.lightest||ut.getLuminousColorShade(e.header||t.header,.3));ut.getContrastColor(p,null,u)==="white"?(t.text="ffffff",t.subtext="f0f0f0"):(t.text="000000",t.subtext="292929"),e.header=ut.validateHex(e.header||t.header),e.text=ut.validateHex(e.text||t.text),e.subtext=ut.validateHex(e.subtext||t.subtext),e.btnColorHeader=ut.validateHex(e.btnColorHeader||ut.getLuminousColorShade(e.header,.3)),e.subheader=ut.validateHex(e.subheader||ut.getLuminousColorShade(e.header,.2)),e.verticalBorder=ut.validateHex(e.verticalBorder||ut.getLuminousColorShade(e.header,.1)),e.btnColorSubheader=ut.validateHex(e.btnColorSubheader||ut.getLuminousColorShade(e.header,-.1)),e.inactive=ut.validateHex(e.inactive||ut.getLuminousColorShade(e.header,-.2)),e.horizontalBorder=ut.validateHex(e.horizontalBorder||ut.getLuminousColorShade(e.header,-.3)),e.hover=ut.validateHex(e.hover||ut.getLuminousColorShade(e.header,-.5)),e.button=ut.validateHex(e.button||ut.getLuminousColorShade(e.text,-.8)),e.lightest=e.btnColorHeader,e.lighter=e.subheader,e.light=e.verticalBorder,e.base=e.header,e.contrast=e.text,e.dark=e.btnColorSubheader,e.darker=e.inactive,e.darkest=e.horizontalBorder,e.btnHoverColor=e.contrast,e.btnBgHoverColor="rgba(0, 0, 0, 0.3) !important",e.focusBoxShadow="0 0 0 2px transparent, 0 0 0 0 ".concat(e.subtext,", 0 0 2px 1px ").concat(e.subtext),e.btnFocusBorderColor=e.contrast,e.btnDisabledColor="rgba(255, 255, 255, 0.3) !important",e.btnOpacity=.8,e.btnPrimaryColor=e.base,e.btnPrimaryColorHover=e.darker,e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryHoverColor=e.darker,e.btnLinkColor=e.darker,e.tabBottomBorderColor=e.base,e.btnActionsHoverColor=e.base,e.moduleTabsSelectedTextColor=n.palette.white.value,e.headerTabsSelectedTextColor=e.contrast,e.headerTabsTextColor=e.contrast,e.headerTextColor=e.contrast,e.headerIconColor=e.contrast,e.tabHoverColor=e.darkest,e.toolbarBtnHoverColor=e.darkest,e.tabVerticalHoverColor=n.palette.slate[20].value,e.tabHoverTextColor=n.palette.slate[100].value,e.tabTextWeight="400",e.tabTextSelectedWeight="600",e.tabBorderColor=e.darkest,e.tabSelectedColor=e.dark,e.tabHeaderColor=e.dark,e.tabColor=e.base,e.tabVerticalColor=n.palette.slate[10].value,e.headerTabBorder="transparent",e.verticalTabBorder=n.palette.slate[30].value,e.tabTextColor=n.palette.slate[100].value,e.tabSelectedTextColor=e.contrast,e.tabVerticalSelectedTextColor=e.base,e.tabVerticalSelectedColor=n.palette.white.value,e.tabDivider=e.darkest,e.tabTextColor=n.palette.white.value,e.toolbarBtnHoverColor=e.darker,e.tabFocusIndicator=e.contrast,e.tabFocusIndicatorVert=e.base,e.tabFocusBoxShadow="none",e.tabFocusBoxShadowVert="none",e.tabCloseInactiveColor="rgba(255, 255, 255, 0.85)",e.tabCloseHoverColor=n.palette.white.value,e.btnMenu=e.base,e.btnBoxShadow="0 0 0 2px transparent, 0 0 0 1px ".concat(e.base,", 0 0 4px 3px rgba(54, 138, 192, 0.1)");var m=e.header==="#ffffff",v=this.currentTheme.indexOf("new-dark")>=0,w=this.currentTheme.indexOf("classic-dark")>=0,C=this.currentTheme.indexOf("new-contrast")>=0;e.btnTertiaryBgHoverColor=m?"#E6F1FD":e.lightest,e.btnTertiaryBgHoverColorHeader="rgba(0, 0, 0, 0.3)",e.btnTertiaryHoverColorHeader=n.palette.white.value,e.borderActiveSearchHeader=e.darkest,e.shadowActiveSearchHeader="none",e.borderActiveSearchMobile=e.contrast,(v||w)&&(e.btnLinkColor=e.lighter,e.btnTertiaryHoverColor=e.lighter,e.tabVerticalColor=n.palette.slate[90].value,e.tabVerticalSelectedColor=n.palette.slate[100].value,e.tabVerticalHoverColor=n.palette.slate[70].value,e.tabHoverTextColor=n.palette.white.value),m&&(e.tabTextColor=n.palette.slate[100].value,e.tabHoverColor=n.palette.slate[20].value,e.toolbarBtnHoverColor=n.palette.slate[20].value,e.text=n.palette.azure[60].value,e.darker=n.palette.azure[10].value,e.darkest=n.palette.slate[100].value,e.contrast=n.palette.slate[100].value,e.btnHoverColor=n.palette.azure[60].value,e.btnBgHoverColor=n.palette.azure[10].value,e.btnOpacity=1,e.borderActiveSearchHeader=n.palette.azure[60].value,e.shadowActiveSearchHeader="0 0 4px 3px rgba(54, 138, 192, 0.1)",e.focusBoxShadow="0 0 4px 3px rgba(54, 138, 192, 0.1)",e.btnFocusBorderColor=n.palette.azure[60].value,e.borderActiveSearchMobile=n.palette.azure[60].value,e.btnDisabledColor="rgba(0, 0, 0, 0.3) !important",e.btnPrimaryColor=n.palette.azure[60].value,e.btnPrimaryColorHover="#0066D4",e.btnSecondaryColor=n.palette.azure[60].value,e.btnSecondaryBorderColor=n.palette.azure[60].value,e.btnTertiaryBgHoverColor=n.palette.azure[20].value,e.btnTertiaryHoverColor=n.palette.azure[60].value,e.btnTertiaryBgHoverColorHeader="#E6F1FD",e.btnTertiaryHoverColorHeader=n.palette.azure[60].value,e.btnLinkColor=n.palette.azure[60].value,e.tabBottomBorderColor=n.palette.slate[30].value,e.btnActionsHoverColor=n.palette.slate[100].value,e.moduleTabsSelectedTextColor=n.palette.azure[60].value,e.headerTabsSelectedTextColor=n.palette.azure[60].value,e.headerTextColor=n.palette.slate[100].value,e.headerIconColor=n.palette.slate[100].value,e.btnMenu=n.palette.azure[60].value,e.btnBoxShadow="0 0 0 2px transparent, 0 0 0 1px ".concat(e.btnMenu,", 0 0 4px 3px rgba(54, 138, 192, 0.1)"),e.tabFocusIndicator=n.palette.azure[60].value,e.tabFocusIndicatorVert=n.palette.azure[60].value,e.tabFocusBoxShadow="0 0 4px 3px rgba(54, 138, 192, 0.2)",e.tabFocusBoxShadowVert="0 0 4px 3px rgba(54, 138, 192, 0.2)",e.tabTextWeight="400",e.tabTextSelectedWeight="700",e.headerTabBorder=n.palette.slate[30].value,e.verticalTabBorder=n.palette.slate[30].value,e.tabDivider=n.palette.slate[30].value,e.tabHoverColor=n.palette.slate[20].value,e.toolbarBtnHoverColor=n.palette.slate[20].value,e.tabVerticalHoverColor=n.palette.slate[20].value,e.tabSelectedColor=n.palette.white.value,e.tabHeaderColor=n.palette.white.value,e.tabFocusColor=n.palette.slate[100].value,e.tabBorderColor=n.palette.white.value,e.tabColor=n.palette.slate[10].value,e.tabSelectedTextColor=n.palette.azure[60].value,e.tabVerticalSelectedTextColor=n.palette.azure[60].value,e.tabVerticalColor=n.palette.slate[10].value,e.tabVerticalSelectedColor=n.palette.white.value,e.tabCloseInactiveColor="rgb(111, 111, 118)",e.tabCloseHoverColor=e.contrast,r||(e.btnTertiaryBgHoverColor=n.palette.slate[30].value),v&&(e.tabTextColor=n.palette.slate[10].value,e.tabCloseInactiveColor="rgba(255, 255, 255, 0.85)",e.baseDisabledText="#fff",e.base=n.palette.slate[60].value,e.btnPrimaryColor=e.base,e.dark=e.base,e.contrast=n.palette.white.value,e.focusBoxShadow="0 0 0 2px transparent, 0 0 0 1px ".concat(e.contrast,", 0 0 1px 1px ").concat(e.contrast),e.darker=n.palette.slate[80].value,e.headerIconColor=n.palette.slate[10].value,e.btnHoverColor=n.palette.white.value,e.hyperlinkText=n.palette.white.value,e.lighter=n.palette.slate[50].value,e.btnDisabledColor="rgba(255, 255, 255, 0.4) !important",e.btnPrimaryColorHover=e.darker,e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryBgHoverColor=n.palette.slate[70].value,e.btnTertiaryHoverColor=e.lightest,e.btnTertiaryBgHoverColorHeader=n.palette.slate[70].value,e.btnTertiaryHoverColorHeader=n.palette.white.value,e.btnLinkColor=e.lighter,e.btnBgHoverColor=n.palette.slate[80].value,e.tabBottomBorderColor=n.palette.slate[60].value,e.btnActionsHoverColor=n.palette.white.value,e.moduleTabsSelectedTextColor=n.palette.slate[10].value,e.headerTextColor=n.palette.slate[10].value,e.headerTabsTextColor=n.palette.slate[10].value,e.headerTabBorder=n.palette.slate[70].value,e.verticalTabBorder=n.palette.slate[60].value,e.tabFocusIndicator=n.palette.white.value,e.tabSelectedColor=n.palette.slate[90].value,e.tabHeaderColor=n.palette.slate[90].value,e.tabBorderColor=n.palette.slate[90].value,e.tabColor=n.palette.slate[80].value,e.tabHoverColor=n.palette.slate[70].value,e.toolbarBtnHoverColor=n.palette.slate[70].value,e.tabVerticalHoverColor=n.palette.slate[70].value,e.tabSelectedTextColor=n.palette.slate[10].value,e.tabVerticalSelectedTextColor=n.palette.slate[10].value,e.tabVerticalColor=n.palette.slate[90].value,e.tabVerticalSelectedColor=n.palette.slate[100].value,e.tabHoverTextColor=n.palette.white.value,e.tabCloseHoverColor=n.palette.white.value,e.tabDivider=n.palette.slate[100].value,e.headerTabsSelectedTextColor=n.palette.slate[10].value,e.tabFocusIndicatorVert=n.palette.white.value,e.tabFocusBoxShadowVert="none"),w&&(e.base="#50535A",e.btnPrimaryColor=e.base,e.dark=e.base,e.contrast=n.palette.white.value,e.focusBoxShadow="0 0 0 2px transparent, 0 0 0 1px ".concat(e.contrast,", 0 0 1px 1px ").concat(e.contrast),e.darker="#313236",e.btnPrimaryColorHover=e.darker,e.btnHoverColor=n.palette.white.value,e.hyperlinkText=n.palette.white.value,e.lighter="#656871",e.btnDisabledColor="rgba(255, 255, 255, 0.4) !important",e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryBgHoverColor=n.palette.slate[50].value,e.btnTertiaryHoverColor=n.palette.white.value,e.btnLinkColor=e.light,e.btnBgHoverColor="#313236",e.tabBottomBorderColor="#50535A",e.moduleTabsSelectedTextColor=n.palette.white.value,e.headerTextColor=n.palette.graphite[10].value,e.headerIconColor=n.palette.graphite[10].value,e.tabCloseInactiveColor=n.palette.graphite[10].value,e.tabCloseHoverColor=n.palette.white.value,e.tabVerticalHoverColor=n.palette.slate[80].value,e.tabHeaderColor=n.palette.slate[70].value,e.headerTabBorder=n.palette.slate[50].value,e.tabSelectedColor=n.palette.slate[70].value,e.tabColor=n.palette.slate[80].value,e.tabHoverColor=n.palette.slate[80].value,e.toolbarBtnHoverColor=n.palette.slate[80].value,e.tabBorderColor=n.palette.slate[70].value,e.tabSelectedTextColor=n.palette.white.value,e.tabVerticalSelectedTextColor=n.palette.white.value,e.tabHoverTextColor=n.palette.white.value,e.tabVerticalColor=n.palette.slate[70].value,e.tabVerticalSelectedColor=n.palette.slate[80].value),C&&(e.tabBorderColor=n.palette.white.value,e.tabHoverColor=n.palette.slate[20].value,e.toolbarBtnHoverColor=n.palette.slate[20].value,e.tabVerticalSelectedTextColor=n.palette.azure[90].value,e.headerTabsSelectedTextColor=n.palette.azure[90].value,e.moduleTabsSelectedTextColor=n.palette.azure[90].value));var A=this.getColorMap(100),S=a?this.getColorMap(20):this.getColorMap(10);e.darkestPalette=A[e.base]||e.subheader,e.lightestPalette=S[e.base]||e.subheader,m&&(e.lightestPalette=n.palette.azure[10].value,a&&(e.lightestPalette=n.palette.azure[20].value));var M={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],emerald:["#56932e","#1f9254"],slate:["#50535a","#98949e"]},I=!1,z=ut.validateHex("".concat(e.header||t.header).toLowerCase());Object.keys(M).forEach(function(H){I=I||M[H].indexOf(z)>-1});var V=e.light,U=I?.5:.7,G=I?.3:.5;r?(U=I?.6:.8,G=I?.6:.8,i?(V=e.darkest,U=.1):a&&(U=.8,G=.4)):i?(V=e.darkest,U=-.1):a&&(U=.3);var J=ut.getLuminousColorShade(V,U);J=ut.getDesaturatedColor(J,G),e.baseDisabled=m?"#C5C5C9":J,e.baseDisabledText="#ffffff";var te=m&&(v||w)?"#ffffff":e.text;e.hyperlinkText=te,e.hyperlinkTextHover=t.subtext,e.selection=t.subtext;var de=ut.getContrastColor(e.darkest);return t.tooltipText=de==="white"?"ffffff":"000000",e.tooltipText=ut.validateHex(e.tooltipText||t.tooltipText),function(H){var he=ut.hexToRgb(H.base),ie=ut.hexToRgb(H.hyperlinkText);return`
.is-personalizable ::selection {
  background: `.concat(H.selection,` !important;
}

.is-personalizable .header::selection {
  background-color: `).concat(H.darker,` !important;
}

.is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),
.btn-primary:not(:disabled):not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable {
  background-color: `).concat(H.btnPrimaryColor,`;
  border-color: `).concat(H.btnPrimaryColor,`;
}

.header.is-personalizable .buttonset .searchfield-wrapper.is-open button:not(.close) {
  background-color: `).concat(H.contrast,`;
  color: `).concat(H.darkest,` !important;
}

.header.is-personalizable .buttonset .searchfield-wrapper.is-open button.go-button:hover {
  background-color: `).concat(H.secondaryButtonHover,` !important;
  color: `).concat(H.darkest,` !important;
}

html.theme-classic-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {
  color: #888B94 !important;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {
  background-color: `).concat(H.lighter,`;
  border-color: `).concat(H.lighter,`;
}

html[class*="new-"] .is-personalizable:not(.header) .btn-secondary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),
html[class*="new-"] .is-personalizable:not(.header) .btn-secondary:not(:disabled):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg.icon,
html[class*="new-"] .is-personalizable:not(.header) .btn-secondary.btn-menu:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),
html[class*="new-"] .is-personalizable:not(.header) .btn-secondary.btn-menu:not(:disabled):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg.icon  {
  border-color: `).concat(H.btnSecondaryBorderColor,`;
  color: `).concat(H.btnSecondaryBorderColor,`;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {
  border-color: `).concat(H.lighter,`;
  color: `).concat(H.lighter,`;
}

html.theme-classic-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {
  background-color: `).concat(H.baseDisabled,` !important;
  border-color: `).concat(H.baseDisabled,` !important;
}

html[class*="theme-classic-"]:not(.theme-classic-dark) .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,
html[class*="theme-classic-"]:not(.theme-classic-dark) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled {
  color: `).concat(H.baseDisabledText,`;
  background-color: `).concat(H.baseDisabled,`;
  border-color: `).concat(H.baseDisabled,`;
}

.is-personalizable:not(.header) .btn-tertiary:not(:disabled):hover {
  background-color: `).concat(H.lightestPalette,`;
}

.is-personalizable:not(.header) .btn-link:not(:disabled):hover {
  background-color: `).concat(H.lightestPalette,`;
}

html[class*="new-"] .is-personalizable:not(.header) .btn-link:not(:disabled):hover {
  background-color: `).concat(H.btnTertiaryBgHoverColor,`;
}

html[class*="new-"] .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover {
  background-color: `).concat(H.btnTertiaryBgHoverColor,`;
}

.is-personalizable:not(.header) .btn-link:not(:disabled),
.btn-link.is-personalizable:not(:disabled),
.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled) {
  color: `).concat(H.btnLinkColor,`;
}

.is-personalizable:not(.header) .btn-link:not(:disabled) .icon,
.btn-link.is-personalizable:not(:disabled) .icon,
.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled) .icon {
  color: `).concat(H.btnLinkColor,` !important;
}

.is-personalizable:not(.header) .btn-link:not(:disabled):hover .icon,
.btn-link.is-personalizable:not(:disabled):hover .icon,
.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover .icon {
  color: `).concat(H.btnTertiaryHoverColor,` !important;
}

.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not(.hide-focus):focus {
  box-shadow: `).concat(H.btnBoxShadow,`;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled),
html.theme-new-dark .btn-link.is-personalizable:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled) .icon,
html.theme-new-dark .btn-link.is-personalizable:not(:disabled) .icon {
  color: `).concat(H.btnLighter,`;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled):hover,
html.theme-new-dark .btn-link.is-personalizable:not(:disabled):hover,
html.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled):hover .icon,
html.theme-new-dark .btn-link.is-personalizable:not(:disabled):hover .icon,
html.theme-new-dark .is-personalizable:not(.header) .btn-menu.is-open:not(.btn-secondary):not([disabled]):not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover,
html.theme-new-dark .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover .icon {
  color: `).concat(H.btnTertiaryHoverColor,`;
}

.is-personalizable button.is-pressed,
button.is-personalizable.is-pressed {
  color: `).concat(H.base,`;
}

.is-personalizable button.is-pressed .icon,
button.is-personalizable.is-pressed .icon {
  color: `).concat(H.base,`;
}

.is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
.btn-primary.is-personalizable:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {
  background-color: `).concat(H.btnPrimaryColorHover,`;
  border-color: `).concat(H.btnPrimaryColorHover,`;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {
  background-color: `).concat(H.lightest,`;
  border-color: `).concat(H.lightest,`;
}

html[class*="new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html[class*="new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {
  background-color: `).concat(H.lightestPalette,`;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {
  color: `).concat(H.lightest,` !important;
  border-color: `).concat(H.lightest,` !important;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) .icon {
  color: `).concat(H.lightest,` !important;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {
  background-color: #28282A;
}

html.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon {
  color: `).concat(H.lightest,`;
}

html[class*="new-"] .is-personalizable:not(.header):not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html[class*="new-"] .is-personalizable:not(.header):not(.hero-widget) .btn-link:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {
  background-color: `).concat(H.lightestPalette,`;
  color: `).concat(H.btnTertiaryHoverColor,`;
}

html.theme-new-dark .is-personalizable:not(.header):not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header):not(.hero-widget) .btn-link:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {
  background-color: `).concat(H.btnTertiaryBgHoverColor,`;
  color: `).concat(H.btnTertiaryHoverColor,`;
}

html.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon,
html.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled),
html.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled) svg.icon,
html.theme-new-dark .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon,
html.theme-new-dark .is-personalizable:not(.header) .btn-link:hover:not(:disabled),
html.theme-new-dark .is-personalizable:not(.header) .btn-link:hover:not(:disabled) svg.icon {
  color: `).concat(H.lightest,`;
}

html[class*="new-"] .is-personalizable .btn-tertiary:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable):not(.destructive) svg.icon {
  color: `).concat(H.btnTertiaryHoverColor,`;
}

html.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),
html.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {
  color: `).concat(H.contrast,` !important;
}

html.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {
  color: `).concat(H.contrast,` !important;
}

button.is-personalizable button:focus:not(.hide-focus),
.is-personalizable a.btn:focus:not(.hide-focus),
a.btn.is-personalizable:focus:not(.hide-focus),
.is-personalizable a.btn-menu:focus:not(.hide-focus),
a.btn-menu.is-personalizable:focus:not(.hide-focus),
.is-personalizable a.btn-icon:focus:not(.hide-focus),
a.btn-icon.is-personalizable:focus:not(.hide-focus),
.is-personalizable a.btn-tertiary:focus:not(.hide-focus),
a.btn-tertiary.is-personalizable:focus:not(.hide-focus),
.is-personalizable a.btn-close:focus:not(.hide-focus),
a.btn-close.is-personalizable:focus:not(.hide-focus) {
  box-shadow: 0 0 0 2px transparent,
    0 0 0 1px `).concat(H.base,`,
    0 0 4px 2px rgba(`).concat(he.r,", ").concat(he.g,", ").concat(he.b,`, 0.3) !important;
}

.is-personalizable:not(.hero-widget) .btn-menu:not(.btn-primary):not(.btn-secondary).is-open,
.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open,
.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open {
  color: `).concat(H.btnMenu,`;
}

.is-personalizable:not(.hero-widget) .btn-menu:not(.btn-primary):not(.btn-secondary).is-open .icon,
.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon,
.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon {
  color: `).concat(H.btnMenu,`;
}

.is-personalizable:not(.application-menu) .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon {
  color: `).concat(H.btnActionsHoverColor,`;
}

.is-personalizable .hyperlink:not(.today),
.hyperlink:not(.today).is-personalizable {
  color: `).concat(H.hyperlinkText,` !important;
  opacity: 0.8;
}

.is-personalizable .hyperlink:not(.today):hover,
.hyperlink:not(.today).is-personalizable:hover {
  color: `).concat(H.hyperlinkTextHover,` !important;
}

.is-personalizable .hyperlink:not(.today):focus:not(.hide-focus),
.hyperlink:not(.today).is-personalizable:focus:not(.hide-focus) {
  border-color: `).concat(H.hyperlinkText,`;
  box-shadow: 0 0 4px 3px rgba(`).concat(ie.r,", ").concat(ie.g,", ").concat(ie.b,`, 0.3);
}

.is-personalizable button:not(.btn-monthyear-pane):not(.btn-editor) svg.ripple-effect,
button:not(.btn-monthyear-pane):not(.btn-editor).is-personalizable svg.ripple-effect,
.is-personalizable a svg.ripple-effect,
a.is-personalizable svg.ripple-effect {
  background-color: `).concat(H.base,` !important;
}

.is-personalizable .btn-primary svg.ripple-effect,
.btn-primary.is-personalizable svg.ripple-effect,
.is-personalizable .btn-secondary svg.ripple-effect,
.btn-secondary.is-personalizable svg.ripple-effect {
  background-color: `).concat(H.contrast,` !important;
  border-color: `).concat(H.contrast,` !important;
}

.is-personalizable .count-container .instance-count svg.icon {
  background-color: `).concat(H.base,` !important;
}

.is-personalizable.has-more-button.tab-container.horizontal {
  &::after {
    background-image:
      linear-gradient(to left,
        rgba($header-bg-color, 1),
        rgba($header-bg-color, 0));
    height: 39px;
  }
}

.tab-container.module-tabs.is-personalizable {
  border-top: 1px solid `).concat(H.tabBorderColor,`;
  border-bottom: 1px solid `).concat(H.tabBorderColor,`;
}

.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.tab-container.personalize-header.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected,
.tab-container.personalize-header.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected,
.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected,
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {
  border-color: `).concat(H.headerTabsSelectedTextColor,` !important;
}

.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.tab-container.personalize-header.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,
.personalize-header.tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible {
  box-shadow: `).concat(H.tabFocusBoxShadow,` !important;
}

.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected {
  box-shadow: none !important;
}

.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),
.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),
.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled):not(.is-selected),
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled) {
  color: `).concat(H.contrast,`;
  background-color: `).concat(H.tabHoverColor,`;
  border-bottom: 4px solid `).concat(H.contrast,`;
}

.module-tabs.is-personalizable .tab:not(:first-child) {
  border-left: 1px solid `).concat(H.tabDivider,` !important;
}

.module-tabs.is-personalizable {
  background-color: `).concat(H.darker,` !important;
}

.module-tabs.is-personalizable .tab.is-selected {
  background-color: `).concat(H.tabSelectedColor,` !important;
  color: `).concat(H.moduleTabsSelectedTextColor,` !important;
}

.module-tabs.is-personalizable .tab:not(.is-selected),
.module-tabs.is-personalizable .tab-more,
.module-tabs.is-personalizable .tab-more .more-text,
.module-tabs.is-personalizable .add-tab-button,
.module-tabs.is-personalizable .toolbar {
  background-color: `).concat(H.tabColor,` !important;
  color: `).concat(H.tabTextColor,` !important;
}

.module-tabs.is-personalizable .add-tab-button svg.icon {
  color: `).concat(H.headerIconColor,` !important;
}

.tab-container.module-tabs.has-toolbar .tab-list-container + .toolbar .more .btn-actions:hover {
  background-color: `).concat(H.toolbarBtnHoverColor,` !important;
}

.module-tabs.is-personalizable .tab {
  color: `).concat(H.contrast,`;
}

.tab-container.module-tabs .tab-list .tab.dismissible:hover svg.icon.close {
  color: `).concat(H.tabCloseInactiveColor,`;
}

.tab-container.module-tabs.is-personalizable .tab.dismissible svg.close {
  color: `).concat(H.tabCloseInactiveColor,`;
}

.tab-container.module-tabs.is-personalizable .tab.dismissible svg.close:hover {
  color: `).concat(H.tabCloseHoverColor,`;
}

.is-personalizable.tab-container.module-tabs .tab-more,
.is-personalizable.tab-container.module-tabs .add-tab-button {
  color: `).concat(H.contrast,`;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected {
  background-color: `).concat(H.tabVerticalSelectedColor,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab a {
  font-weight: `).concat(H.tabTextWeight,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected a {
  color: `).concat(H.tabVerticalSelectedTextColor,` !important;
  font-weight: `).concat(H.tabTextSelectedWeight,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab:not(.is-disabled):hover {
  background-color: `).concat(H.tabVerticalHoverColor,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected:hover {
  background-color: `).concat(H.tabVerticalSelectedColor,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab:not(.is-disabled):hover a {
  color: `).concat(H.tabHoverTextColor,` !important;
}

.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected:hover a {
  color: `).concat(H.tabVerticalSelectedTextColor,` !important;
}

.tab-container.module-tabs.is-personalizable .tab-focus-indicator.is-visible:is(.is-selected),
.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible:is(.is-selected) {
  border-color: transparent !important;
  box-shadow: none !important;
}

.tab-container.module-tabs.is-personalizable .tab-focus-indicator.is-visible:not(.is-selected) {
  border-color: `).concat(H.tabFocusIndicator,` !important;
  box-shadow: `).concat(H.tabFocusBoxShadow,` !important;
}

.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible:not(.is-selected) {
  border-color: `).concat(H.tabFocusIndicatorVert,` !important;
  box-shadow: `).concat(H.tabFocusBoxShadowVert,` !important;
}

.builder-header.is-personalizable {
  background-color: `).concat(H.lighter,`;
}

.header.is-personalizable {
  background-color: `).concat(H.tabHeaderColor,`;
  border-bottom: 1px solid `).concat(H.headerTabBorder,`;
}

.scrollable-flex-header .breadcrumb {
  background-color: `).concat(H.base,`;
}

.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) {
  background-color: `).concat(H.tabHeaderColor,`;
}

.header.is-personalizable .title {
  color: `).concat(H.contrast,` !important;
}

.header.is-personalizable h1,
.header.is-personalizable h2,
.header.is-personalizable h3 {
  color: `).concat(H.headerTextColor,` !important;
}

.object-count.personalize-text {
  color: `).concat(H.contrast,` !important;
}

.header.is-personalizable button svg.ripple-effect {
  background-color: `).concat(H.contrast,` !important;
}

.header.is-personalizable button:not(:disabled),
.header.is-personalizable button:not(:disabled):not(.close) .icon,
.header.is-personalizable button:not(:disabled) .app-header.icon > span,
.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button),
.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) .icon,
.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) .app-header.icon > span,
.is-personalizable .personalize-subheader button:not(:disabled),
.is-personalizable .personalize-subheader button:not(:disabled):not(.close):not(.notification-close) .icon,
.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span,
.tab-container.module-tabs.is-personalizable .toolbar div:is(.more) [class^='btn']:not(.btn-menu) .icon  {
  color: `).concat(H.headerIconColor,` !important;
}

.header .flex-toolbar [class^='btn']:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable),
.header .flex-toolbar [class^='btn']:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable) svg.icon {
  color: `).concat(H.btnHoverColor,` !important;
}

html[class*="theme-new"] .header.is-personalizable button:not(.close):not(:disabled):hover .icon {
  color: `).concat(H.btnTertiaryHoverColorHeader,` !important;
}

html[class*="-dark"] .is-personalizable .personalize-subheader button:not(:disabled),
html[class*="-dark"] .is-personalizable .subheader button:not(:disabled),
html[class*="-dark"] .is-personalizable .personalize-subheader button:not(:disabled) .icon,
html[class*="-dark"] .is-personalizable .subheader button:not(:disabled) .icon {
  color: #ffff !important;
}

.header.is-personalizable button:not(:disabled) .app-header.icon > span,
.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span {
  background-color: `).concat(H.contrast,` !important;
  opacity: .8;
}

.header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled):hover {
  border-bottom: 4px solid `).concat(H.contrast,`;
}

html[class*="theme-new"] .header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled):hover {
  border-bottom: 2px solid `).concat(H.headerTabsTextColor,`;
}

html[class*="theme-new"] .header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:is(.is-selected):not(.is-disabled):hover {
  background-color: transparent;
}

.header.is-personalizable .tab-container.horizontal > .tab-list-container .tab:not(.is-disabled):hover {
  border-bottom: 4px solid `).concat(H.base,`;
}

html[class*="theme-new-"] .header.is-personalizable button:not(:disabled):hover .app-header.icon > span,
html[class*="theme-new-"] .header.is-personalizable .toolbar [class^='btn']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]),
html[class*="theme-new-"] .subheader.is-personalizable button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover,
html[class*="theme-new-"] .subheader.is-personalizable button:not(:disabled):hover .app-header.icon > span,
html[class*="theme-new-"] .subheader.is-personalizable .toolbar [class^='btn']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]),
html[class*="theme-new-"] .personalize-subheader button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover,
html[class*="theme-new-"] .personalize-subheader button:not(:disabled):hover .app-header.icon > span,
html[class*="theme-new-"] .personalize-subheader .toolbar [class^='btn']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]) {
  color: `).concat(H.btnTertiaryHoverColor,` !important;
  background-color: `).concat(H.btnTertiaryBgHoverColor,` !important;
  opacity: 1;
}

html[class*="theme-new-"] .header.is-personalizable button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover {
  background-color: `).concat(H.btnTertiaryBgHoverColorHeader,` !important;
  color: `).concat(H.btnTertiaryHoverColorHeader,` !important;
}

.header .flex-toolbar [class^='btn'][disabled] {
  color: `).concat(H.btnDisabledColor,`;
}

.header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close:hover {
  background-color: `).concat(H.contrast,` !important;
}

html.theme-new-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close,
html.theme-new-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close svg.close,
html.theme-classic-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close,
html.theme-classic-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close svg.close {
  background-color: transparent !important;
}

.header.is-personalizable button:not(:disabled) .app-header.icon > span {
  background-color: `).concat(H.contrast,` !important;
  opacity: 1;
}

.header.is-personalizable .go-button.is-personalizable {
  background-color: `).concat(H.lightest,`;
  border-color:`).concat(H.lightest,`;
  color: `).concat(H.contrast,`;
}

.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled),
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {
  color: `).concat(H.headerTabsSelectedTextColor,` !important;
  opacity: 1;
  background-color: transparent;
}

.header.is-personalizable .flex-toolbar .has-collapse-button .collapse-button {
  background-color: transparent;
}

.header.is-personalizable .flex-toolbar .has-collapse-button .collapse-button:focus:not(.hide-focus) {
  box-shadow: none !important;
  border-color: `).concat(H.borderActiveSearchHeader,`;
}

html.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {
  color: `).concat(H.contrast,` !important;
}

.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-more::before,
.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-more::before {
  background-color: `).concat(H.contrast,`;
}

.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),
.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-more svg.icon,
.tab-container.is-personalizable .tab-more svg.icon,
.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled)  {
  color: `).concat(H.contrast,` !important;
  opacity: .8;
}

html.theme-new-dark .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),
html.theme-classic-dark .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled) {
  color: #fff !important;
  opacity: .8;
}

.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab,
.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab,
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab {
  color: `).concat(H.contrast,` !important;
  opacity: .8;
}

.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled):not(.is-selected),
.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),
.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled) {
  color: `).concat(H.contrast,` !important;
  opacity: 1;
}

html.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),
.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {
  color: `).concat(H.contrast,` !important;
  opacity: 1;
}

html[class*="theme-new-"] .header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),
html[class*="theme-new-"] .is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),
html[class*="theme-new-"] .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled) {
  opacity: 1;
}

.is-personalizable .count-container .instance-count .count {
  border-color: `).concat(H.contrast,` !important;
  color: `).concat(H.contrast,` !important;
}

html[class*="theme-new-"] .is-personalizable .count-container .instance-count .title {
  color: `).concat(H.contrast,` !important;
}

html.theme-classic-dark .is-personalizable .count-container .instance-count .count {
  border-color: `).concat(H.subtext,` !important;
  color: `).concat(H.subtext,` !important;
}

.header.is-personalizable .page-title {
  color: `).concat(H.contrast,`;
}

.header.is-personalizable .flex-toolbar [class^='btn'][disabled] .icon,
.header.is-personalizable .btn:not(.searchfield-category-button)[disabled] span {
  color: `).concat(H.btnDisabledColor,`;
}

.header.is-personalizable button:not(:disabled),
.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) {
  color: `).concat(H.contrast,`;
}

.header.is-personalizable  .flex-toolbar [class^='btn']:focus:not(.hide-focus) .icon {
  color: `).concat(H.contrast,` !important;
}

.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {
  background-color: `).concat(H.contrast,`;
}

.header.is-personalizable.has-tabs .animated-bar {
  background-color: `).concat(H.contrast,`;
}

.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {
  background-color: `).concat(H.contrast,` !important;
}

.header.is-personalizable .buttonset .toolbar-searchfield-wrapper:not(.is-open) svg.icon:not(.close),
.header.is-personalizable .toolbar-searchfield-wrapper:not(.is-open) .icon:not(.close),
.header .toolbar-searchfield-wrapper .searchfield,
.masthead .toolbar-searchfield-wrapper .searchfield,
.header.is-personalizable .toolbar [class^='btn']:focus .icon {
  color: `).concat(H.contrast,`;
}

.header .toolbar [class^='btn']:hover:not(.go-button):not(.close):not(.searchfield-category-button) {
  background-color: `).concat(H.base,`;
}

.header.alabaster .toolbar [class^='btn']:hover:not(.go-button):not(.searchfield-category-button) {
  background-color: #E6F1FD !important;
}

.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,
.personalize-subheader..scrollable-flex-header .breadcrumb:not(.alternate) .breadcrumb-text,
.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,
.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .breadcrumb-list li::after,
.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) ol li::after {
  color: `).concat(H.contrast,`;
}

.personalize-subheader.scrollable-flex-header .breadcrumb .hyperlink:focus:not([disabled]) {
  border: 1px solid `).concat(H.contrast,`;
}

.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover:not([disabled]) {
  border-bottom: 1px solid `).concat(H.contrast,`;
}

.header .toolbar-searchfield-wrapper.active.has-focus .searchfield {
  border-color: `).concat(H.borderActiveSearchHeader,`;
}

html[class*="-dark"] .header .toolbar-searchfield-wrapper.active.has-focus .searchfield {
  border-color: `).concat(H.contrast,`;
}

.header.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,
.header.is-personalizable .wizard-header .tick,
.header.is-personalizable .wizard-header .tick .label,
.header.is-personalizable .wizard-header a.tick:hover:not(.current):not(.is-disabled):not([disabled]) .label {
  color: `).concat(H.contrast,`;
}

.header.is-personalizable .wizard-header .tick:focus .label {
  border-color: `).concat(H.lighter,`;
}

.header.is-personalizable .wizard-header .tick.current::before {
  border-color: `).concat(H.light,`;
  border-color: `).concat(H.contrast,`;
}

.is-personalizable .personalize-text {
  color: `).concat(H.contrast,`;
}

html[class*='classic-'] .is-personalizable .tab-container.header-tabs.alternate > .tab-list-container .tab.is-selected:not(.is-disabled) {
  border-color: `).concat(H.contrast,`;
}

html[class*='classic-contrast'] .is-personalizable .tab-container.header-tabs.alternate > .tab-list-container .tab.is-selected:not(.is-disabled) {
  border-color: `).concat(H.light,`;
}

.tab-container.header-tabs.alternate > .tab-list-container .tab.is-disabled {
  color: `).concat(H.contrast,`;
  opacity: 0.6;
}

.is-personalizable .tab-container.header-tabs > .tab-list-container .tab.is-disabled {
  color: `).concat(H.contrast,`;
  opacity: 0.6;
}

.is-personalizable .label + .personalize-text.data {
  color: `).concat(H.contrast,`;
}

.header.is-personalizable .wizard-header .tick::after {
  background-color: `).concat(H.base,`;
  border: 2px solid `).concat(H.contrast,`;
}

.header.is-personalizable .wizard-header .bar,
.header.is-personalizable .wizard-header .tick.complete {
  background-color: `).concat(H.darkest,`;
}

.header.is-personalizable .wizard-header .tick.complete::after,
.header.is-personalizable .wizard-header .completed-range {
  background-color: `).concat(H.contrast,`;
}

.header.is-personalizable .wizard-header .tick.complete .label {
  color: `).concat(H.contrast,`;
}

.header.is-personalizable .wizard-header .tick.current {
  box-shadow: none;
}
.header.is-personalizable .wizard-header .tick.current::after {
  background-color: `).concat(H.contrast,`;
  border-color: `).concat(H.contrast,`;
}

.subheader.is-personalizable .go-button.is-personalizable {
  background-color: `).concat(H.dark,`;
  border-color: `).concat(H.dark,`;
  color: `).concat(H.contrast,`;
}

.subheader.is-personalizable .go-button.is-personalizable:not(.hide-focus) {
  box-shadow: 0 0 0 1px #FAFAFA, 0 0 0 2px `).concat(H.darkest,`, 0 0 4px 2px rgba(41, 41, 41, 0.3);
}

.is-personalizable .breadcrumb .hyperlink,
.breadcrumb.is-personalizable .hyperlink {
  color: `).concat(H.theme.text,`;
}
.is-personalizable .breadcrumb .hyperlink:hover,
.breadcrumb.is-personalizable .hyperlink:hover {
  color: `).concat(H.theme.text,`;
}
.is-personalizable .breadcrumb .hyperlink:focus:not(.hide-focus),
.breadcrumb.is-personalizable .hyperlink:focus:not(.hide-focus) {
  box-shadow: none;
}
.is-personalizable .breadcrumb .hyperlink[disabled],
.breadcrumb.is-personalizable .hyperlink[disabled],
.is-personalizable .breadcrumb .hyperlink[disabled]:hover,
.breadcrumb.is-personalizable .hyperlink[disabled]:hover {
  color: `).concat(H.theme.disabledText,`;
}

.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate),
.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) {
  background-color: `).concat(H.base,`;
}
.is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,
.scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {
  background-image: linear-gradient(to right, `).concat(H.base,", ").concat(ut.hexToRgba(H.base,0),`);
}
html[dir='rtl'] .is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,
html[dir='rtl'] .scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {
  background-image: linear-gradient(to right, `).concat(ut.hexToRgba(H.base,0),", ").concat(H.base,`);
}
.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,
.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink {
  color: `).concat(H.contrast,`;
}
.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover,
.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink:hover  {
  color: `).concat(H.contrast,`;
}

.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions.is-open .icon,
.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions.is-open .icon {
  color: `).concat(H.contrast,`;
}
.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus),
.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus) {
  box-shadow: 0 0 0 2px transparent, 0 0 0 1px `).concat(H.contrast,", 0 0 1px 2px ").concat(ut.hexToRgba(H.contrast,.3),` !important;
}

.module-tabs.is-personalizable .tab-more {
  border-left-color: `).concat(H.tabDivider,` !important;
}

.module-tabs.is-personalizable .tab-more.is-open {
  background-color: `).concat(H.hover,` !important;
}

.module-tabs.is-personalizable .tab-more.is-selected {
  background-color: `).concat(H.base,` !important;
}

.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {
  background-color: `).concat(H.hover,` !important;
  border-bottom-color: `).concat(H.hover,` !important;
}

.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {
  background-color: `).concat(H.hover,` !important;
  border-bottom-color: `).concat(H.hover,` !important;
}

.subheader.is-personalizable {
  background-color: `).concat(H.lighter,` !important;
}

.builder .sidebar .header {
  border-right: 1px solid `).concat(H.hover,` !important;
}

.module-tabs.is-personalizable .tab:not(.is-selected):hover,
.module-tabs.is-personalizable .tab-more:hover {
  background-color: `).concat(H.tabHoverColor,` !important;
  color: `).concat(H.contrast,`;
}

.is-personalizable.tab-container.module-tabs .tab .icon {
  color: `).concat(H.contrast,`;
}

.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {
  border-left-color: `).concat(H.tabDivider,` !important;
}

.module-tabs.is-personalizable [class^="btn"] {
  background-color: transparent;
  color: `).concat(H.contrast,` !important;
}

.module-tabs.is-personalizable .tab.is-disabled {
  background-color: `).concat(H.darker,` !important;
  color: `).concat(H.contrast,` !important;
}

.module-tabs.is-personalizable .tab.is-disabled > svg {
  fill: `).concat(H.contrast,` !important;
}

.module-tabs.is-personalizable .add-tab-button {
  border-left-color: `).concat(H.tabDivider,` !important;
}

.module-tabs.is-personalizable .add-tab-button:hover {
  background-color: `).concat(H.toolbarBtnHoverColor,` !important;
}

.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {
  color: `).concat(H.contrast,`;
}

.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {
  fill: `).concat(H.contrast,` !important;
}

.header.is-personalizable .toolbar [class^='btn'][disabled],
.header.is-personalizable .toolbar [class^='btn'][disabled] .icon,
.header.is-personalizable .toolbar [class^='btn'][disabled] span {
  color: `).concat(H.btnDisabledColor,`;
}

.header .toolbar [class^='btn']:focus:not(.hide-focus):not(.collapse-button) {
  border-color: `).concat(H.contrast,`;
}

.is-personalizable .tab-container.header-tabs:not(.alternate)::before,
.is-personalizable.tab-container.header-tabs:not(.alternate)::before {
  background-image: linear-gradient(to right, `).concat(H.tabHeaderColor," , ").concat(ut.hexToRgba(H.base,0),`) !important;
}

html[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::before,
html[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::before {
  background-image: linear-gradient(to left, `).concat(H.tabHeaderColor,", ").concat(ut.hexToRgba(H.base,0),`) !important;
}

.is-personalizable .tab-container.header-tabs:not(.alternate)::after,
.is-personalizable.tab-container.header-tabs:not(.alternate)::after {
  background-image: linear-gradient(to right, `).concat(ut.hexToRgba(H.base,0),", ").concat(H.tabHeaderColor,`) !important;
}

html[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::after,
html[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::after {
  background-image: linear-gradient(to left, `).concat(ut.hexToRgba(H.base,0),", ").concat(H.tabHeaderColor,`) !important;
}

.is-personalizable.header .section-title {
  color: `).concat(H.contrast,`;
}

.is-personalizable.header button.application-menu-trigger:hover:not(:disabled) .icon.app-header.go-back > span {
  background-color: `).concat(H.contrast,` !important;
}

.is-personalizable .tab-container.header-tabs:not(.alternate),
.is-personalizable.tab-container.header-tabs:not(.alternate) {
  border-bottom-color: `).concat(H.tabBottomBorderColor,`;
}

.tab-container.is-personalizable.module-tabs .tab a {
  font-weight: `).concat(H.tabTextWeight,` !important;
}

.tab-container.is-personalizable.module-tabs .tab.is-selected a {
  font-weight: `).concat(H.tabTextSelectedWeight,` !important;
}

html[class*="theme-new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-icon:not(.destructive):not(:disabled):hover {
  background-color: `).concat(H.lightestPalette,`;
}

html[class*="theme-new-"] .is-personalizable:not(.header) .btn-icon:not(.destructive):not(:disabled):hover .icon {
  color: `).concat(H.btnTertiaryHoverColor,`;
}

html[class*="-dark"] .is-personalizable .btn-tertiary:not(.destructive):not(:disabled):hover,
html[class*="-dark"] .is-personalizable .btn-link:not(:disabled):hover,
html[class*="-dark"] .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not(:disabled):hover,
html[class*="-dark"] .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {
  background-color: `).concat(H.btnTertiaryBgHoverColor,`;
}

html[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {
  border: 1px solid `).concat(H.lighter,`;
}

html[class*="theme-new-"] .application-menu.is-personalizable button:focus:not(.hide-focus),
html[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {
  border-color: `).concat(H.contrast,` !important;
  box-shadow: none !important;
}

.application-menu.is-personalizable .accordion-header.has-filtered-children > a,
.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {
  color: `).concat(H.contrast,` !important;
}

html[dir='rtl'] .application-menu.is-personalizable {
  background-color: `).concat(H.lighter,`;
  border-left: `).concat(H.light,`;
}

html[class*="theme-new-"] .application-menu.is-personalizable button svg.ripple-effect {
  background-color: `).concat(H.contrast,` !important;
}

html[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {
  border-color: transparent !important;
}

html[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {
  border-color: `).concat(H.contrast,` !important;
}

.is-personalizable.tab-container,
.is-personalizable.tab-container .tab-list-container {
  background-color: `).concat(H.tabColor,` !important;
}

.is-personalizable.tab-container.vertical,
.is-personalizable.tab-container.vertical > .tab-list-container {
  background-color: `).concat(H.tabVerticalColor,` !important;
  min-width: 249px;
  width: 249px;
}

.is-personalizable.tab-container.vertical {
  border-right: 1px solid `).concat(H.verticalTabBorder,` !important;
}

.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab-list .tab.is-disabled,
.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab-list .tab.is-disabled {
  opacity: .4;
}

html[class*="theme-classic-"] .is-personalizable .tab-container .tab-list-container .tab-list .tab.is-disabled,
html[class*="theme-classic-"] .tab-container.is-personalizable .tab-list-container .tab-list .tab.is-disabled {
  opacity: .4 !important;
}

.is-personalizable .personalize-subheader {
  background-color: `).concat(H.lighter,` !important;
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb {
  background-color: `).concat(H.lighter,`;
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated .breadcrumb-list::before,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated ol::before {
  background-image: linear-gradient(to right, `).concat(H.lighter,", ").concat(H.lighter,`80);
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after  {
  color: `).concat(H.contrast,` !important;
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink:hover {
  border-bottom: 1px solid `).concat(H.contrast,`
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb {
  background-color: `).concat(H.lighter,`;
}

.is-personalizable .section-wizard {
  background-color: `).concat(H.lighter,` !important;
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated .breadcrumb-list::before,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated ol::before {
  background-image: linear-gradient(to right, `).concat(H.lighter,", ").concat(H.lighter,`80);
}

.is-personalizable .section-wizard {
  background-color: `).concat(H.lighter,` !important;
}

.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,
.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after  {
  color: `).concat(H.contrast,`;
}

.is-personalizable .section-wizard {
  background-color: `).concat(H.lighter,` !important;
}

.is-personalizable .personalize-subheader  p:not(.notification-text),
.personalize-subheader.is-personalizable p:not(.notification-text) {
  color: `).concat(H.contrast,` !important;
}

.is-personalizable .personalize-subheader  h1,
.personalize-subheader.is-personalizable h1,
.is-personalizable .personalize-subheader h2,
.personalize-subheader.is-personalizable h2 {
  color: `).concat(H.contrast,` !important;
}

html[class*="-dark"] .is-personalizable .personalize-subheader h1,
html[class*="-dark"] .is-personalizable .personalize-subheader h2 {
  color: #fff !important;
}

html[class*="-dark"] .is-personalizable .subheader h1,
html[class*="-dark"] .is-personalizable .subheader h2 {
  color: #fff !important;
}

.is-personalizable .personalize-subheader button:not(.notification-close) .icon:not(.notification-icon),
.personalize-subheader.is-personalizable button:not(.notification-close) .icon:not(.notification-icon) {
  color: `).concat(H.contrast,` !important;
}

.is-personalizable .personalize-subheader .toolbar-searchfield-wrapper.active.is-open *,
.personalize-subheader.is-personalizable .toolbar-searchfield-wrapper.active.is-open * {
  color: `).concat(H.theme.text,` !important;
}

.is-personalizable .personalize-actionable,
.is-personalizable .personalize-actionable svg,
.is-personalizable .personalize-actionable .icon,
.is-personalizable .personalize-header .personalize-chart-targeted .label,
.is-personalizable .personalize-header .info-message .icon,
.is-personalizable .personalize-header .info-message p,
.is-personalizable .personalize-header .btn-icon .icon {
  color: `).concat(H.contrast,` !important;
}

html[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled):not(a) ,
html[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled) svg,
html[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled) .icon  {
  color: `).concat(H.btnHoverColor,` !important;
  opacity: 1;
}

html[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled):not(a) {
  color: `).concat(H.btnHoverColor,` !important;
  background-color: `).concat(H.btnBgHoverColor,`;
  opacity: 1;
}

.is-personalizable .btn-icon.personalize-actionable {
  height: 34px;
  width: 34px;
}

html[class*="theme-new-"] .is-personalizable .btn-icon.personalize-actionable:hover:not([disabled]) {
  background-color: `).concat(H.btnBgHoverColor,` !important;
}

.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),
.is-personalizable .personalize-actionable:focus:not(.hide-focus) {
  border-color: `).concat(H.btnFocusBorderColor,` !important;
  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);
}

.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {
  border-color: `).concat(H.contrast,` !important;
  opacity: 1;
  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);
}

.is-personalizable .personalize-vertical-border {
  border-color: `).concat(H.light,`;
}

.is-personalizable .personalize-horizontal-top-border {
  border-top: 1px solid: `).concat(H.darkest,`;
}

.is-personalizable .personalize-chart-targeted .total.bar {
  background-color: `).concat(H.btnDisabledColor,`;
}

.is-personalizable .personalize-chart-targeted .chart-percent-text,
.is-personalizable .personalize-chart-targeted .label {
  color: `).concat(H.contrast,`;
}

.is-personalizable .info-message,
.is-personalizable .info-message .icon,
.is-personalizable .info-message p {
  color: `).concat(H.contrast,` !important;
}

.is-personalizable .personalize-actionable-disabled,
.is-personalizable .personalize-actionable-disabled:hover {
  opacity: .4 !important;
  cursor: default;
}

.subheader.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),
.subheader.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {
  box-shadow: `).concat(H.focusBoxShadow,`;
}

.header.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),
.header.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {
  box-shadow: `).concat(H.focusBoxShadow,`
}

html.theme-new-dark .header.alabaster.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) .icon {
  color: #fff !important;
}

html.theme-new-dark .header.alabaster.is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),
html.theme-new-dark .header.alabaster.is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {
  color: #fff !important;
}

html[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable button:not(:disabled) {
  color: #000 !important;
}

html[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable .flex-toolbar [class^='btn'][disabled] span,
html[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable .flex-toolbar [class^='btn'][disabled] .icon {
  color: #C5C5C9 !important;
}

html[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable .flex-toolbar [class^='btn'][disabled] span,
html[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable .flex-toolbar [class^='btn'][disabled] .icon {
  color: #888B94 !important;
}

html[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable button:not(:disabled) {
  color: #000 !important;
}

html[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,
html[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,
html[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,
html[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,
html[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after {
  color: #000 !important;
}
`)}(e)},setFont:function(e){$("html").addClass("font-".concat(e))},setColors:function(e){var t;if(e===""||e==="default"||((t=e)===null||t===void 0||t==null?void 0:t.header)==="default")return this.setColorsToDefault(),this;if(!e)return this;var n=ft.personalizationColors();return n[e]!==void 0&&(e=n[e].value),this.appendStyleSheet(this.getColorStyleSheet(e)),this.settings.colors=e,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||ft.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-new-light"}),this},setColorsToDefault:function(){this.settings.colors="";var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),this.element.triggerHandler("colorschanged",{colors:"default",isDefault:!0,theme:this.currentTheme||"theme-new-light"})},getThemeFromStylesheet:function(){var e=$("#stylesheet, #sohoxi-stylesheet"),t="";if(e.length>0){var n=e.attr("href"),i=(t=n.substring(n.lastIndexOf("/")+1)).lastIndexOf("?");i>-1&&(t=t.slice(0,i)),t=t.replace(".min","").replace(".css","")}return t},setTheme:function(e){var t=$("html");if(e)if(e=e.replace("soho","classic").replace("uplift","new"),this.currentTheme=e,ft.currentTheme.id!==e){["light","dark","high-contrast"].indexOf(e)>-1&&(e+="-theme"),t.removeClass(function(u,p){return p.split(" ").filter(function(m){return m.indexOf("theme")>-1}).join()}).addClass(e),this.blockUi();var n=this,i=$("#stylesheet, #sohoxi-stylesheet"),a=$('<link rel="stylesheet">'),r=i.attr("href");a.on("load",function(){i.remove(),n.unBlockUi(),n.triggerEvent(e)}).on("error",function(){n.unBlockUi()});var o=r?r.substring(0,r.lastIndexOf("/")):"",c=!!r&&r.indexOf(".min")>-1;a.attr({id:i.attr("id"),href:_e.stripTags("".concat(o,"/").concat(e).concat(c?".min":"",".css"))}),i.removeAttr("id"),i.before(a),this.settings.theme=e,ft.setTheme(e),this.setColors(this.settings.colors)}else t.hasClass(e)||t.addClass(e)},blockUi:function(){if(this.settings.blockUI){var e="#bdbdbd";switch(ft){case"light":default:e="#f0f0f0";break;case"dark":e="#313236";break;case"high-contrast":e="#d8d8d8"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",e),$("body").append(this.pageOverlay)}},triggerEvent:function(e){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||ft.themeColors().brand.primary.alt.value,theme:e||"theme-new-light"}),$("body").trigger("resize")},unBlockUi:function(){var e=this;e.settings.blockUI&&e.pageOverlay&&e.pageOverlay.fadeOut(300,function(){e.pageOverlay.remove(),e.pageOverlay=void 0})},updated:function(e){if(!e)return this;var t=N.extend({},this.settings);return this.settings=N.mergeSettings(this.element[0],e,this.settings),this.settingsDidChange(t,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(t,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(t,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(e,t){return this.settings[t]&&this.settings[t]!==e[t]},teardown:function(){return this.element.off("updated.".concat(xi)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],xi)}};var kl={theme:"theme-new-light"};at(window.SohoConfig)==="object"&&at(window.SohoConfig.personalize)==="object"&&(kl=window.SohoConfig.personalize);var Vi=new Cl(document.documentElement,kl);function Ls(e,t){var n,i,a,r,o=0;if(e.nodeType===3)n=e.data.toUpperCase().indexOf(t),(n-=e.data.substr(0,n).toUpperCase().length-e.data.substr(0,n).length)>=0&&((i=document.createElement("mark")).className="highlight",(a=e.splitText(n)).splitText(t.length),r=a.cloneNode(!0),i.appendChild(r),a.parentNode.replaceChild(i,a),o=1);else if(e.nodeType===1&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=Ls(e.childNodes[c],t);return o}$.fn.personalize=function(e){return this.each(function(){var t=$.data(this,xi);t||(t=$.data(this,xi,Vi)),t.updated(e)})},$.fn.disable=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.disable&&t.disable()}),this.prop("disabled",!0),this.attr("disabled",!0).closest(".field").addClass("is-disabled"),this},$.fn.enable=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.enable&&t.enable()}),this.prop({disabled:!1,readonly:!1}),this.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.closest(".field").find("button.trigger").removeAttr("disabled"),this},$.fn.readonly=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.readonly&&t.readonly()}),this.prop("readonly",!0),this},$.fn.revealText=function(e){if(!this)return this;var t=this;t.addClass((e==null||e==null?void 0:e.initialState)==="show"?"input-show-text":"input-hide-text");var n=$('<span class="input-hideshow-text">'.concat(Soho.Locale.translate((e==null||e==null?void 0:e.initialState)==="show"?"Hide":"Show"),"</span>"));t.after(n),t.hasClass("input-hide-text")&&t.attr("type","password");var i=function(){if(t.hasClass("input-hide-text"))return t.removeClass("input-hide-text").addClass("input-show-text"),t.attr("type","text"),void n.text(Soho.Locale.translate("Hide"));t.removeClass("input-show-text").addClass("input-hide-text"),t.attr("type","password"),n.text(Soho.Locale.translate("Show"))};return n.on("click",function(){i()}),t.on("keypress",function(a){a.keyCode===18&&a.ctrlKey&&i()}),this},$(function(){var e,t;$(".label-text").closest("label, .label").each(function(){t=$("input, textarea, select",this),e=t.attr("class"),$(this).addClass(function(){return"inline".concat(e?" inline-".concat(e.indexOf(" ")===-1?e:e.substr(0,e.indexOf(" "))):"")})})}),$(function(){$("input:radio").on("click.radios",function(){this.focus()})}),$(function(){var e=function(t,n){for(var i=0,a=t.length;i<a;i++)$(t[i]).parent().addClass(n)};e($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),e($(".field > input:radio, .field > .inline-radio"),"field-radio"),e($(".field > input:checkbox ~ label.checkbox-label.hitbox"),"field-hitbox")}),$(function(){$(".field-checkbox input:checkbox ~ label.checkbox-label.hitbox").each(function(e,t){$(t).innerWidth()>44&&$(t).addClass("hitbox-padding")})}),$(function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach(function(t){t.className.indexOf("accessible")!==-1&&(t.querySelector(".required-asterisk")||t.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))});var e=[].slice.call(document.body.querySelectorAll("[data-validate]"));e.forEach(function(t){var n=t.getAttribute("data-validate");n&&n.indexOf("required")>-1&&t.setAttribute("aria-required",!0)}),(e=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach(function(t){var n=t.getAttribute("id");if(n){var i=document.body.querySelector('label[for="'.concat(n,'"]'));i&&i.setAttribute("aria-hidden",!0)}})}),$.fn.highlight=function(e){return this.length&&e&&e.length?this.each(function(){Ls(this,e.toUpperCase())}):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var ds="arrange",uc={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder",useItemDimensions:!1};function Zr(e,t){this.settings=N.mergeSettings(e,t,uc),this.element=$(e),this.init()}Zr.prototype={init:function(){this.isIe=Be.browser.name==="ie",this.handleEvents()},get isTouch(){return Be.features.touch||Be.devicespecs.isMobile},getElementByTouchInList:function(e,t,n){for(var i=!1,a=$(e),r=0,o=a.length;r<o;r++){var c=$(a[r]),u=c.offset();t<=u.left||t>=u.left+c.outerWidth()||n<=u.top||n>=u.top+c.outerHeight()||(i=c)}return i},dragTouchElement:function(e,t){var n=e.originalEvent.changedTouches;t&&t[0]&&n&&n[0]&&this.offset&&(t[0].style.top="".concat(n[0].pageY-this.offset.y,"px"),t[0].style.left="".concat(n[0].pageX-this.offset.x,"px"))},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,uc)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],ds)},getVisualIndex:function(e){var t=this.settings,n=null;if(t.isVisualItems){var i=this.element.children().not('[data-arrange-exclude="true"]');t.itemsSelector&&(i=$(t.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),n=i.index(e)}return n},handleEvents:function(){var e,t,n=this,i=this.settings,a={},r=this.element.children().not('[data-arrange-exclude="true"]'),o=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));i.itemsSelector&&(r=$(i.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),o=$("<".concat(r.first()[0].tagName," />"))),i.placeholder&&(o=$(i.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=i.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=o,this.isTouch||this.placeholders.addClass("".concat(i.placeholderCssClass," draggable")),$(this.handle,r).addClass("draggable").on("mousedown.arrange touchstart.arrange",function(){t=!0}).on("mouseup.arrange touchend.arrange",function(){t=!1}),this.connectWith&&(r=r.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=r,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,o]).not("a[href], img").on("selectstart.arrange",function(){return this.dragDrop&&this.dragDrop(),this.isIe}),this.items.add(o).each(function(){$(this).on(n.dragStart,function(c){if(n.handle&&!t)return n.isTouch?void 0:!1;t=!1,n.dragging=$(this),e=n.dragging.addClass("arrange-dragging").index();var u=i.isVisualItems?n.getVisualIndex(n.dragging):e;$.extend(a,{start:n.dragging,startIndex:u});var p=n.element.triggerHandler("beforearrange",a);if(typeof p=="boolean"&&!p||typeof p=="string"&&p.toLowerCase()==="false")n.dragging=null;else{var m,v=n.dragging[0].getBoundingClientRect();if(i.useItemDimensions&&(o[0].style.width="".concat(v.width,"px"),o[0].style.height="".concat(v.height,"px"),(m=o[0].classList).add.apply(m,Nt(i.placeholderCssClass.split(" ")))),n.isTouch){var w=c.originalEvent.changedTouches;w&&w[0]&&(n.offset={x:w[0].pageX-v.left,y:w[0].pageY-v.top})}else{var C=c.originalEvent.dataTransfer,A={x:c.originalEvent.clientX-v.left,y:c.originalEvent.clientY-v.top};C.effectAllowed="move",C.setData("Text","sample"),C.setDragImage(n.dragging[0],A.x,A.y)}}}).on(n.dragEnd,function(){if(n.dragging){if(n.isTouch){var c,u={opacity:1};i.useItemDimensions&&(u.position=""),n.dragging.css(u),(c=n.placeholderTouch)===null||c===void 0||c==null||c.remove()}if(n.element.removeClass("has-arrange-placeholder"),n.placeholders.filter(":visible").after(n.dragging),n.dragging.removeClass("arrange-dragging").show(),n.placeholders.detach(),e!==n.dragging.index()){var p=i.isVisualItems?n.getVisualIndex(n.dragging):n.dragging.index();$.extend(a,{end:n.dragging,endIndex:p}),n.element.triggerHandler("arrangeupdate",a)}n.dragging=null,n.placeholderTouch=null}}).on(n.dragWhileDragging,function(c){if(n.dragging){var u,p=this;if(c.stopPropagation(),n.isTouch&&!n.placeholderTouch&&(n.placeholderTouch=n.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(n.dragging),n.dragTouchElement(c,n.placeholderTouch)),c.type==="drop")return c.stopPropagation(),n.dragging.trigger("dragend.arrange"),!1;if(n.isTouch){var m=c.originalEvent.touches[0];p=n.getElementByTouchInList(r,m.pageX,m.pageY)||p}if(p=$(p),n.isTouch||(c.originalEvent.dataTransfer.dropEffect="move"),r.is(p)&&o.index()!==p.index()){if(n.isTouch){var v={opacity:0};i.useItemDimensions&&(v.position="fixed"),n.dragging.css(v)}else n.dragging.hide();var w;o.index()<p.index()?(o.insertAfter(p),u=p.index(),w=i.isVisualItems?n.getVisualIndex(p):u):(o.insertBefore(p),u=o.index(),w=i.isVisualItems?n.getVisualIndex(o):u),n.element.addClass("has-arrange-placeholder"),$.extend(a,{over:p,overIndex:w}),n.element.triggerHandler("draggingarrange",a),N.fixSVGIcons(p),n.placeholders.not(o).detach()}else n.placeholders.is(this)||(n.placeholders.detach(),n.element.append(o));if(!n.isTouch)return!1;n.dragTouchElement(c,n.placeholderTouch)}})})}},$.fn.arrange=function(e){return this.each(function(){var t=$.data(this,ds);t?t.updated(e):t=$.data(this,ds,new Zr(this,e))})};var yr="drag",xd={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function Tl(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,xd),this.init()}Tl.prototype={init:function(){this.handleEvents()},finish:function(e,t){var n={top:t,left:e};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("dragend",n),this.element.removeClass("is-dragging"),this.clone&&(this.settings.axis==="x"&&delete n.top,this.settings.axis==="y"&&delete n.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(e,t){var n={left:e,top:t};if(this.settings.axis==="x"&&delete n.top,this.settings.axis==="y"&&delete n.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:this.settings.containment==="parent"?this.container=this.element.parent():this.settings.containment==="window"?this.container=$(window):this.settings.containment==="container"?this.container=this.element.closest(".page-container"):this.settings.containment==="partial"?(this.container=$(document),this.settings.containmentOffset.top===0&&(this.settings.containmentOffset.top=this.element.outerHeight()/2),this.settings.containmentOffset.left===0&&(this.settings.containmentOffset.left=this.element.outerWidth()/2)):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),n.top>this.upperYLimit&&(n.top=this.upperYLimit),n.left>this.upperXLimit&&(n.left=this.upperXLimit),n.top<0&&(n.top=0),this.settings.containment!=="partial"&&n.left<0&&(n.left=0),this.settings.containment==="partial"&&n.left<-this.settings.containmentOffset.left&&(n.left=-this.settings.containmentOffset.left),this.settings.containment==="container"&&n.left<=1&&(n.left=1)),this.settings.obstacle){var i=this.clone?this.clone.offset():this.element.offset(),a=this.clone?this.clone.outerWidth():this.element.outerWidth(),r=n.left>i.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var o=$(this.obstacle).offset();this.constraints={top:o.top,left:o.left,bottom:o.top+this.obstacle.outerHeight(),right:o.left+this.obstacle.outerWidth()}}!r&&this.originalPos.left>this.constraints.left&&n.left<=this.constraints.right&&(n.left=this.constraints.right),r&&this.originalPos.left+a<=this.constraints.left&&n.left+a>=this.constraints.left&&(n.left=this.constraints.left-this.obstacle.outerWidth())}var c=function(u,p,m){p[m]!==void 0&&(u[0].style[m]="".concat(p[m],"px"))};c(this.clone||this.element,n,"top"),c(this.clone||this.element,n,"left"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("drag",n)},getElementsFromPoint:function(e,t){var n=[];if(document.elementsFromPoint)n=document.elementsFromPoint(e,t);else if(document.msElementsFromPoint)n=document.msElementsFromPoint(e,t);else{for(var i,a,r,o,c=999,u=[];(o=document.elementFromPoint(e,t))&&n.indexOf(o)===-1&&o!==null&&c>-1;)c--,n.push(o),u.push({value:o.style.getPropertyValue("pointer-events")||"",priority:o.style.getPropertyPriority("pointer-events")}),o.style.setProperty("pointer-events","none","important");for(i=0,a=n.length;i<a;i++)r=u[i],n[i].style.setProperty("pointer-events",r.value,r.priority)}return n},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings))},destroy:function(){$.removeData(this.element[0],yr),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var e=this;e.offset=null,e.element.attr("draggable",!Be.features.touch),"onpointerdown"in window||"onmspointerdown"in window||e.element.on("touchstart.draggable gesturestart.draggable",function(t){var n=$(this).position(),i=t.originalEvent;e.offset={x:i.changedTouches[0].pageX-n.left,y:i.changedTouches[0].pageY-n.top},e.originalPos=n,e.element.addClass("is-dragging"),n.offset=e.offset,n.clone=e.clone,e.element.trigger("dragstart",n)}).on("touchmove.draggable gesturechange.draggable",function(t){t.preventDefault();var n=t.originalEvent;if(!(n.targetTouches.length>1)){var i=n.changedTouches[0].pageX-e.offset.x,a=n.changedTouches[0].pageY-e.offset.y;e.move(i,a)}}).on("touchend.draggable gestureend.draggable touchcancel.draggable",function(t){t.preventDefault();var n=t.originalEvent.changedTouches[0];e.finish(n.pageX-e.offset.x,n.pageY-e.offset.y)}),e.element.on("mousedown.draggable",function(t){t.preventDefault();var n=e.settings.clonePosIsFixed?e.element[0].getBoundingClientRect():e.element.position();e.offset={x:t.pageX-n.left,y:t.pageY-n.top},e.originalPos=n,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",function(i){i.preventDefault(),e.move(i.pageX-e.offset.x,i.pageY-e.offset.y)}),$(document).on("mouseup.draggable",function(i){i.preventDefault(),e.finish(t.pageX-e.offset.x,i.pageY-e.offset.y)}),e.element.on("mouseup.draggable",function(i){i.preventDefault(),e.finish(i.pageX-e.offset.x,i.pageY-e.offset.y)}),!e.clone&&e.settings.clone&&(e.clone=e.element.clone(!0),e.settings.cloneAppendTo==="parent"&&(e.settings.cloneAppendTo=e.element.parent()),e.clone.addClass(e.settings.cloneCssClass).appendTo(e.settings.cloneAppendTo||"body")),e.element.addClass("is-dragging"),e.element.trigger("dragstart",[n,e.clone])})}},$.fn.drag=function(e){return this.each(function(){var t=$.data(this,yr);t?t.updated(e):t=$.data(this,yr,new Tl(this,e))})};var er="place",Ps={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},Fo=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],Cd=["top","left","right","bottom","center"],Bs=["left","center","right"],us=["top","center","bottom"],hc=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function tr(e){var t=this;return hc.forEach(function(n){if(e[n]!==null)return n==="x"||n==="y"?(t.setCoordinate(n,e[n]),void(t["original".concat(n)]=e[n])):void(t[n]=e[n])}),this.modified=!1,this.sanitize()}function nr(e,t){this.settings=N.mergeSettings(e,t,Ps),this.element=$(e),this.init()}tr.prototype={isReasonableDefault:function(e,t){return $.inArray(e,t)>-1},sanitize:function(){var e=this;this.bleedFromContainer=this.bleedFromContainer===!0,this.callback=typeof this.callback=="function"?this.callback:Ps.callback,this.container=this.container instanceof $&&this.container.length?this.container:Ps.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:Ps.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,Bs)?this.parentXAlignment:Ps.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,us)?this.parentYAlignment:Ps.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,Cd)?this.placement:Ps.placement,this.useParentHeight=this.useParentHeight===!0,this.useParentWidth=this.useParentWidth===!0,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach(function(t,n){e.strategies[n]=e.isReasonableDefault(t,Fo)?t:e.strategies[n]})},setCoordinate:function(e,t){var n;this.isReasonableDefault(e,["x","y"])&&(isNaN(t)&&(t=0),this[e]=(n=this.parent)!==null&&n!==void 0&&n?.is(".dropdown")?Math.floor(t):Math.round(t))}},nr.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var e=this.element[0].style.height,t=this.element[0].style.width;return e&&(this.originalStyles.height=e),t&&(this.originalStyles.width=t),this},handleEvents:function(){var e=this;return this.element.on("place.".concat(er),function(t,n,i){e.place(new tr({x:n,y:i}))}).on("updated.".concat(er),function(){e.updated()}),this},render:function(e){var t=/(px|%)/i;this.element.offset({left:e.x,top:e.y}),e.height&&(this.element[0].style.height=e.height+(t.test("".concat(e.height))?"":"px")),e.width&&(this.element[0].style.width=e.width+(t.test("".concat(e.width))?"":"px"))},place:function(e){var t=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[t])?(e instanceof tr||(e=new tr(e)),e.x==null&&e.y==null?t:(this.clearOldStyles(),e.parent?this.placeWithParent(e):this.placeWithCoords(e))):t},placeWithParent:function(e){if(!e.parent||!e.parent.length)return[void 0,void 0];var t,n=this,i=this.getContainer(e),a=i.length&&i[0]===document.body;Be.rtl&&i.length&&(t=ue.getDimensions(i[0]),this.element.css({left:"".concat(t.left,"px"),top:"".concat(t.right,"px")}));var r=ue.getDimensions(e.parent[0]),o=a?$(window).scrollLeft():i.scrollLeft(),c=a?$(window).scrollTop():i.scrollTop();function u(p){var m=function(v){var w,C,A=v.placement,S=v.parentXAlignment,M=v.parentYAlignment,I=ue.getDimensions(n.element[0]);switch(A){case"top":C=r.top-I.height-v.y+(a?c:0);break;case"left":w=r.left-I.width-v.x+(a?o:0);break;case"right":w=r.right+v.x+(a?o:0);break;default:C=r.bottom+v.y+(a?c:0)}if(A==="top"||A==="bottom"){var z=Math.round(a?document.body.offsetWidth:null);switch(S){case"left":w=a&&z<Math.round(I.left)+Math.round(I.width)?r.left+v.x+o:r.left-v.x+(a?o:0);break;case"right":w=a&&Math.round(I.right)-Math.round(I.width)<0?r.left-v.x+o:r.right-I.width+v.x+(a?o:0);break;default:w=r.left+(r.width-I.width)/2+v.x+(a?o:0)}}if(A==="right"||A==="left")switch(M){case"top":C=r.top-v.y+(a?c:0);break;case"bottom":C=r.bottom-I.height+v.y+(a?c:0);break;default:C=r.top+(r.height-I.height)/2+v.y+(a?c:0)}return v.parent.is(".datagrid-cell-wrapper")&&(C-=1),[w,C]}(p);return p.setCoordinate("x",m[0]),p.setCoordinate("y",m[1]),n.render(p),p=n.handlePlacementCallback(p)}return e.useParentWidth&&(e.width=r.width),e.useParentHeight&&(e.height=r.height),e.parent.is(".colorpicker")&&L.isRTL()&&(e.x+=30),$(e.parent).parent().is(".datagrid-cell-wrapper")&&!L.isRTL()&&(e.x+=30),(e=u(e)).strategies.forEach(function(p){(e=n.checkBleeds(e)).bleeds&&(e=function(){switch(p){case"nudge":return n.nudge(e);case"clockwise":return n.clockwise(e);case"flip":return(e=n.flip(e)).setCoordinate("x",e.originalx),e.setCoordinate("y",e.originaly),e=u(e);case"shrink":return n.shrink(e);case"shrink-x":return n.shrink(e,"x");case"shrink-y":return n.shrink(e,"y");default:return e}}(),n.render(e))}),e.element=this.element,this.element.trigger("afterplace",[e]),e},placeWithCoords:function(e){return this.render(e),e=this.handlePlacementCallback(e),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.nudge(e)),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.shrink(e)),this.render(e),this.element.trigger("afterplace",[e]),e},handlePlacementCallback:function(e){var t=e.callback||this.settings.callback;return e.element=this.element,t&&typeof t=="function"&&(e=t(e)),this.render(e),e},accountForScrolling:function(e){var t=e.container,n=window.getComputedStyle(this.element[0]).position;if(n==="fixed")return!1;if(t&&t.length||(t=this.element.parents().filter(function(){return window.getComputedStyle(this).position==="absolute"||n==="fixed"})),!t||!t.length)return!0;if(t[0]===document.body)return!1;var i=window.getComputedStyle(t[0]);return(n=i.position)!=="fixed"&&(n!=="absolute"||i.overflow!=="hidden")},getContainer:function(e){if(e.container instanceof $&&e.container.length)return e.container;var t=this.element.parents(".modal");return t.length?t:$(document.body)},isParentElementinViewport:function(e){typeof jQuery=="function"&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},checkBleeds:function(e){var t,n=this.settings.bleedFromContainer===!1?!this.isParentElementinViewport(this.element):this.settings.bleedFromContainer,i=this.getContainer(e),a=i.length&&i[0]===document.body,r=this.element[0].getBoundingClientRect(),o={},c=i?i[0].getBoundingClientRect():{},u=a?$(window).scrollLeft():i.scrollLeft(),p=a?$(window).scrollTop():i.scrollTop(),m=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function w(G){switch(G){case"top":return(n?0:c.top)-(a?-1*p:0);case"left":return(n?0:c.left)-(a?-1*u:0);case"right":return(n?v:c.right)-(a?-1*u:0);default:return(n?m:c.bottom)-(a?-1*p:0)}}o.width=r.width,o.height=r.height,o.top=r.top,o.right=r.right,o.bottom=r.bottom,o.left=r.left;var C=w("right");if(o.width>=C){t=o.width-C+20;var A=o.width-t;e.width=A,this.element[0].style.width="".concat(A,"px"),o.width=A}var S=w("bottom");if(o.height>=S){t=o.height-S+20;var M=o.height-t;e.height=M,this.element[0].style.height="".concat(M,"px"),o.height=M}var I=o.right>w("right"),z=o.left<w("left"),V=o.top<w("top"),U=o.bottom>w("bottom");return I||z||V||U?(e.bleeds={},e.bleeds.right=I?o.right-w("right"):null,e.bleeds.left=z?-(o.left-w("left")):null,e.bleeds.top=V?-(o.top-w("top")):null,e.bleeds.bottom=U?o.bottom-w("bottom"):null,e):(e.bleeds=void 0,e)},nudge:function(e){e.nudges||(e.nudges={x:0,y:0});var t=0;return e.bleeds.right&&(t=Math.abs(e.bleeds.right)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x-t),e.nudges.x-=t),e.bleeds.left&&(t=Math.abs(e.bleeds.left)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x+t),e.nudges.x+=t),e.bleeds.top&&(t=Math.abs(e.bleeds.top)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y+t),e.nudges.y+=t),e.bleeds.bottom&&(t=Math.abs(e.bleeds.bottom)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y-t),e.nudges.y-=t),e.wasNudged=!0,e.bleeds=void 0,e},flip:function(e){if(!e.bleeds[e.placement])return e;if(e.attemptedFlips||(e.attemptedFlips=[]),e.attemptedFlips.push(e.placement),e.attemptedFlips.length>3)return e=this.giveup(e);var t=this.accountForScrolling(e),n=["left","right"].indexOf(e.placement)>-1,i=this.settings.bleedFromContainer,a=this.getContainer(e),r=a.length&&a[0]===document.body,o=a?a[0].getBoundingClientRect():{},c=e.parent[0].getBoundingClientRect(),u=r?$(window).scrollLeft():a.scrollLeft(),p=r?$(window).scrollTop():a.scrollTop(),m=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function w(S){switch(S){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function C(S){var M=0;switch(S){case"left":M=(i?0:o.left)-(t?u:0)-c.left+e.containerOffsetX;break;case"right":M=(i?v:o.right)-(t?u:0)-c.right-e.containerOffsetX;break;case"top":M=(i?0:o.top)-(t?p:0)-c.top+e.containerOffsetY;break;default:M=(i?m:o.bottom)-(t?p:0)-c.bottom-e.containerOffsetY}return Math.abs(M)}function A(S){return $.inArray(S,e.attemptedFlips)>-1}return e.placement=function(S){var M=w(S),I=n?"top":"left",z=w(I),V=C(S),U=C(M);if(!A(M))return V>=U?S:(e.wasFlipped=!0,M);var G=e.originalx;e.originalx=e.originaly,e.originaly=G;var J=C(I),te=C(z);if(!A(I)){if(J>=te)return I;if(!A(z))return z}return S}(e.placement),e},clockwise:function(e){return e},shrink:function(e,t){var n=0,i=0,a=t==null||t==="x",r=t==null||t==="y",o=this.accountForScrolling(e),c=ue.getDimensions(this.element[0]),u=this.settings.bleedFromContainer,p=this.getContainer(e),m=p?p[0].getBoundingClientRect():{},v=p.length&&p[0]===document.body,w=e.parent===null,C=v?$(window).scrollLeft():p.scrollLeft(),A=v?$(window).scrollTop():p.scrollTop(),S=Math.max(document.documentElement.clientHeight,window.innerHeight||0),M=Math.max(document.documentElement.clientWidth,window.innerWidth||0),I=(o?C:0)+(u?0:m.left)+e.containerOffsetX,z=(o?A:0)+(u?0:m.top)+e.containerOffsetY,V=(o?C:0)+(u?M:m.right)-e.containerOffsetX,U=(o?A:0)+(u?S:m.bottom)-e.containerOffsetY,G=V-I,J=U-z;if(!w){var te=ue.getDimensions(e.parent[0]),de=te.top-z,H=U-te.bottom,he=te.left-I,ie=V-te.right;G=he>ie?he:ie,J=de>H?de:H}return a&&(c.width>G&&(e.width=G),c.left<I&&(n=I-c.left,e.setCoordinate("x",e.x+n))),r&&(c.height>J&&(e.height=J),c.top<z&&(i=z-c.top,e.setCoordinate("y",e.y+i))),e},giveup:function(e){return e.giveup=!0,e.strategy=this.settings.strategy,e.placement=this.settings.placement,e},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var e=this.originalStyles;return e&&(e.width&&(this.element[0].style.width=e.width),e.height&&(this.element[0].style.height=e.height)),this},setArrowPosition:function(e,t,n){var i=t.parent,a=n.find("div.arrow"),r=t.placement,o={},c=n[0].getBoundingClientRect(),u={},p={},m=!1;if(i&&i.length&&a.length){a[0].removeAttribute("style"),n.removeClass("top right bottom left").addClass(r),i.is(".colorpicker, .datepicker, .timepicker")&&(i=i.next(".trigger")),i.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(i=i.find(".icon").last()),i.is(".searchfield-category-button")&&(i=i.find(".icon.icon-dropdown")),i.is(".colorpicker-editor-button")&&(i=i.find(".trigger .icon")),i.is(".fontpicker")&&(i=i.find(".icon.icon-dropdown")),i.length||(i=t.parent),o=i.length?i[0].getBoundingClientRect():o,u=a.length?a[0].getBoundingClientRect():u,p={};var v,w,C={};C[w=r,w==="right"||w==="left"?"margin-top":"margin-left"]=(v=0,r!=="left"&&r!=="right"||(v=o.top+o.height/2-(u.top+u.height/2),p.top=u.top+v,p.bottom=u.bottom+v,(p.top<=c.top||p.bottom>=c.bottom)&&(m=!0)),r!=="top"&&r!=="bottom"||(v=o.left+o.width/2-(u.left+u.width/2),p.left=u.left+v,p.right=u.right+v,(p.left<=c.left||p.right>=c.right)&&(m=!0)),v),m&&(C.display="none"),a.css(C)}},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat(er," place.").concat(er)),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],er)}},$.fn.place=function(e){return this.each(function(){var t=$.data(this,er);t?t.updated(e):t=$.data(this,er,new nr(this,e))})};var Ga="icon",Ho={use:"user-profile",focusable:!1};function ir(e,t){this.settings=N.mergeSettings(e,t,Ho),this.element=$(e),this.init()}ir.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var e=this.element[0].getElementsByTagName("use")[0];return e?(e.getAttribute("href")!==this.getBasedUseTag()&&e.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return Zi.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var e=this.element.children("use");if(!e.length)return this;var t=e.attr("href");!t&&e.attr("xlink:href")&&(t=e.attr("xlink:href"));var n=Zi.url;return t&&Zi.element.length&&n.length&&(t=t.replace(n,"")),t=t.replace("#icon-",""),this.settings.use=t,this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Ga),function(){e.updated()}),this},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat(Ga)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Ga)}},$.fn.icon=function(e){return this.each(function(){var t=$.data(this,Ga);t?t.updated(e):t=$.data(this,Ga,new ir(this,e))})},function(){function e(t){var n={icon:"user-profile",classes:["icon"]};return typeof(t=t||$.extend({},n))=="string"&&(t=$.extend({},n,{icon:t.replace("icon-","")})),!t.classes&&t.class&&(t.classes=t.class,delete t.class),t.classes||(t.classes=[].concat(n.classes)),typeof t.classes=="string"&&(t.classes=t.classes.split(" ")),t.classes.indexOf("icon")===-1&&t.classes.push("icon"),t.icon||(t.icon=""),t}$.createIcon=function(t){return t=e(t),ot.isValidURL(t.icon)?`<img
        src="`.concat(t.icon,`"
        alt="Icon"
        class="icon custom-icon `).concat(t.classes.join(" "),`"
        aria-hidden="true"
        role="presentation"/>`):['<svg class="'.concat(t.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(t.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(t){return t=e(t),$.getBaseURL("#icon-".concat(t.icon.replace("icon-","")))},$.fn.changeIcon=function(t){t&&$(this).find("use").attr("href",$.createIconPath({icon:t}))},$.fn.getIconName=function(){var t=$(this),n=t.find("use");return n.length===1&&n.attr("href")?n.attr("href").substr(n.attr("href").indexOf("#icon-")+6):n.length===1&&n.attr("xlink:href")?n.attr("xlink:href").substr(n.attr("xlink:href").indexOf("#icon-")+6):t.attr("data-icon")}}();var cn="tooltip",kd={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",showOnKeyboardFocus:!0,title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,isRangeDatepicker:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null,delay:500,onHidden:null,attachToBody:!0,appendTo:'[role="main"]',attributes:null};function Da(e,t){this.settings=N.mergeSettings(e,t,kd),this.element=$(e),this.init()}Da.prototype={get componentName(){return this._componentName||(this._componentName=this.isPopover?"popover":cn),this._componentName},get isPopover(){return this.settings.content!==null&&at(this.settings.content)==="object"||this.settings.popover===!0},get visible(){return this.tooltip.length&&this.tooltip[0].classList.contains("hidden")===!1&&this.tooltip[0].classList.contains("is-hidden")===!1},get canBeShown(){return!this.reopenDelay&&!ue.hasClass(this.element[0],"hidden")&&!ue.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var e=document.activeElement;return!!this.activeElement.is($(e))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(e))},init:function(){this.uniqueId=N.uniqueId(this.element,this.componentName),this.isTouch=Be.features.touch,this.setup(),this.appendTooltip(),this.settings.trigger!=="immediate"&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.settings.appendTo||(this.settings.appendTo='[role="main"]'),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var e=this.element.attr("title");(!this.settings.popover&&e&&e.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:e,this.element.removeAttr("title")),this.settings.trigger==="hover"&&this.isTouch&&this.element.addClass("longpress-target"),this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),Array.isArray(this.settings.attributes)&&N.addAttributes(this.element,this,this.settings.attributes,"trigger"),this.isRTL=L.isRTL(),ue.addClass(this.element[0],"has-tooltip")},addAria:function(){if(this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.attr("aria-describedby",this.description.attr("id")),this.isPopover)){var e=this.element.prev("input.timepicker").length;if(e||this.settings.trigger!=="click"||this.element.attr("aria-haspopup",!0),e){var t=this.tooltip.attr("id"),n=this.element.prev("input.timepicker");n.attr("role","combobox"),n.attr("aria-haspopup","dialog"),n.attr("aria-owns",t),this.element.attr("role","button"),this.element.attr("aria-controls",t),this.tooltip.attr("role","dialog"),this.tooltip.attr("aria-label",L.translate("TimepickerPopup"))}}},addClassToLinks:function(e,t){if(e instanceof $&&e.length>0)return e;var n=$("<div/>").html(e);return $("a",n).addClass(t),n.html()},appendTooltip:function(){var e=this.settings.tooltipElement,t=this.isPopover?"popover":"tooltip";if(this.tooltip=e?$(e):$("#".concat(this.componentName)),!this.tooltip.length){var n=e?e.substring(1,e.length):this.componentName;this.tooltip=$('<div class="'.concat(t,' bottom is-hidden" id="').concat(n,`">
        <div class="arrow"></div><div class="tooltip-content"></div></div>`)),_e.removeWhiteSpaceCharacters(this.tooltip)}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],this.componentName,this),this.setTargetContainer(),this.addAria()},handleEvents:function(){var e=this,t=e.settings.delay/10;function n(){e.timer&&e.timer.destroy&&e.timer.destroy(!0)}function i(){n(),e.timer=new Gt({duration:t,timeoutCallback:function(){e.show()}}),Hn.register(e.timer)}function a(){n(),e.show()}function r(){n(),e.hide()}function o(){e.visible?r():a()}this.settings.trigger!=="hover"||this.settings.isError||((this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat(cn),function(){e.isTouch||i()}).on("mouseleave.".concat(cn),function(){e.visible?r():n()}).on("click.".concat(cn),function(){e.isTouch||r()}).on("longpress.".concat(cn),function(){a()}).on("updated.".concat(cn),function(){e.updated()}),this.settings.showOnKeyboardFocus&&(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("focus.".concat(cn),function(){e.isTouch&&!$s.pressedKeys.get("Tab")||i()}).on("blur.".concat(cn),function(){e.settings.keepOpen||r()})),this.settings.trigger==="click"&&this.element.on("click.".concat(cn),function(){o()}),this.settings.trigger==="immediate"&&setTimeout(function(){o()},1),this.settings.trigger==="focus"&&this.element.on("focus.".concat(cn),function(){a()}).on("blur.".concat(cn),function(){e.settings.keepOpen||r()}),$(window).on("orientationchange.".concat(cn),function(){e.visible&&r()},!1)},setContent:function(e,t){var n=this,i=this.settings.content,a=e==null;function r(){t!==!0&&(n.addAria(),n.render())}if(a&&i==null)return!1;if(typeof i=="function"&&(e=i),a&&(e=i),e===this.content)return r(),!0;if(e instanceof $&&e.length)return this.content=e.addClass("hidden"),r(),!0;if(typeof e=="string"){if(!e.length)return!1;if((e=L.translate(e,{showAsUndefined:!0})||e).indexOf("#")===0&&e.indexOf("/")<0){try{var o=$("".concat(e));if(o.length)return this.content=o,r(),!0}catch{this.content=_e.sanitizeHTML(e)}return this.content=e,r(),!0}}else{if(typeof e!="function")return!1;var c=e.call(this.element);if(!c||typeof c!="string"||!c.length)return!1;e=c}return this.content=_e.sanitizeHTML(e),this.content="<p>".concat(this.content,"</p>"),r(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var e=this.tooltip[0].querySelectorAll(".tooltip-title")[0],t=this.tooltip[0].querySelectorAll(".tooltip-content")[0],n=this.settings.extraClass,i=this.content,a=this.tooltip[0],r="tooltip is-hidden";n&&(r+=" ".concat(n)),a.setAttribute("class",r),Array.isArray(this.settings.attributes)&&N.addAttributes(this.tooltip,this,this.settings.attributes),e&&(e.style.display="none"),t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains("arrow")&&t.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>');var o=typeof this.content=="string"?i:i[0].innerHTML;ue.html(t,o,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var e=this,t=this.settings.extraClass,n=this.tooltip.find(".tooltip-content"),i=this.tooltip[0].querySelector(".tooltip-title"),a=this.content,r="popover is-hidden";t&&(r+=" ".concat(t)),this.tooltip[0].setAttribute("class",r),Array.isArray(this.settings.attributes)&&N.addAttributes(this.tooltip,this,this.settings.attributes);var o=Be.browser.name==="ie"&&Be.browser.isIE11()&&a instanceof $&&a.length&&this.settings.trigger==="hover";if(typeof a=="string")n.html(a),n.find(".hidden").removeClass("hidden");else if(o){var c=a[0].cloneNode(!0),u=c.id;u&&(c.id="".concat(u,"-").concat(this.uniqueId)),ue.replaceHtml(n,c.outerHTML)}else ue.replaceHtml(n,a);var p=n.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),o||n.find(".hidden").removeClass("hidden"),n[0].firstElementChild.classList.remove("hidden");var m=this.settings.placementOpts.parent.width();if(L.isRTL()?this.settings.placementOpts.parentXAlignment=m>p?"left":"right":this.settings.placementOpts.parentXAlignment=m>p?"right":"left",this.settings.title!==null)if(i)i.style.display="",i.childNodes[0].nodeValue=this.settings.title;else{var v=document.createDocumentFragment();i=document.createElement("div"),ue.html(i,this.settings.title,"*"),i.classList.add("tooltip-title"),this.settings.headerClass&&ue.addClass(i,this.settings.headerClass,"filled"),v.appendChild(i),this.tooltip[0].insertBefore(v,this.tooltip[0].firstChild)}else i&&(i.style.display="none");if(this.settings.closebutton&&i&&!i.firstElementChild){var w=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",function(){e.hide(!0)});i.appendChild(w[0]),Array.isArray(this.settings.attributes)&&N.addAttributes(w,this,this.settings.attributes,"btn-close",!0)}this.settings.initializeContent&&(this.settings.initializeContent=!1,n.initialize())},open:function(){return this.show()},show:function(e,t){var n=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.settings.beforeShow&&!t){var i=function(o){typeof o!="boolean"?(n.content=o,n.show({content:o},!0)):o&&n.show(null,!0)};return typeof this.settings.beforeShow=="string"?void window[this.settings.beforeShow](i,this.element):void this.settings.beforeShow(i,this.element)}if(this.setContent(this.content)!==!1&&this.element.triggerHandler("beforeshow",[this.tooltip])!==!1){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),ue.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),N.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var a=this.isTouch?"touchend":"mouseup";if(this.settings.popover)N.addAttributes(this.tooltip.find(".tooltip-title"),this,this.settings.attributes,"title",!0),N.addAttributes(this.tooltip.find(".btn-close"),this,this.settings.attributes,"btn-close",!0),this.element.attr("aria-expanded","true");else{var r=this.element.closest(".is-personalizable").length>0;this.tooltip[0].classList[r?"add":"remove"]("is-personalizable")}setTimeout(function(){var o,c,u,p;$(document).on("".concat(a,".").concat(cn,"-").concat(n.uniqueId),function(m){var v=$(m.target);if(!n.settings.isError&&n.settings.trigger!=="focus"&&!(v.is(n.element)&&v.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||$("#editor-popup").length===1&&v.closest(".popupmenu").length===1)){v.closest(".popover").length===1&&v.closest(".popover").not(".monthview-popup").length&&n.element.prev().is(".datepicker")&&n.hide();var w=!1;v.closest(".popover").length===0&&v.closest(".dropdown-list").length===0&&(v.is("button")&&(v.siblings().hasClass("datepicker")||v.siblings().hasClass("timepicker"))&&n.element.get(0)===v.get(0)||n.element.get(0)===v.get(0)&&v.is("button")&&!v.is("button.trigger")||(n.hide(),w=!0)),v.closest(".popover").length===0&&v.is(".field")&&!w&&n.hide()}}).on("keydown.".concat(cn,"-").concat(n.uniqueId),function(m){(m.which===27||n.settings.isError)&&n.hide()}),n.settings.isError&&!n.element.is(":visible, .dropdown")&&n.element.is("[aria-describedby]")&&n.hide(),window.orientation===void 0&&$("body").on("resize.".concat(cn),function(){n.hide(),n.settings.keepOpen&&n.show()}),$("body").on("scroll.".concat(cn),function(){n.hide()}),(o=n.element)===null||o===void 0||o==null||o.closest(".modal-body-wrapper").on("scroll.tooltip",function(){n.hide()}),(c=n.element)===null||c===void 0||c==null||c.closest(".scrollable").on("scroll.tooltip",function(){n.hide()}),(u=n.element)===null||u===void 0||u==null||u.closest(".datagrid-wrapper").on("scroll.tooltip",function(){n.hide()}),n.settings.isError&&n.tooltip.on("click.".concat(cn),function(){n.hide()}),(p=n.element)===null||p===void 0||p==null||p.trigger("aftershow",[n.tooltip])},n.settings.delay)}}},setTargetContainer:function(){var e=$("body");this.isPopover&&(e=$(this.settings.appendTo)),e.length||(e=$("body"));var t=!1;this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(e=this.scrollparent);var n=this.element.closest(".modal");this.settings.attachToBody?e=$("body"):(t=!0,e=n),this.settings.parentElement&&(e=this.settings.parentElement),t?this.tooltip.insertAfter(this.element):e[0].appendChild(this.tooltip[0])},handleAfterPlace:function(e,t){var n=this;this.tooltip.data("place").setArrowPosition(e,t,this.tooltip),setTimeout(function(){n.tooltip.triggerHandler("tooltipafterplace",[t])})},position:function(){this.setTargetContainer(),this.settings.isRangeDatepicker||this.tooltip[0].classList.remove("is-hidden"),this.settings.maxWidth&&$(this.tooltip).css("max-width",this.settings.maxWidth);var e=this,t=this.isPopover?20:10,n=this.settings.placementOpts||{},i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=this.tooltip[0].getBoundingClientRect(),o=$.extend({},{x:0,y:0,container:this.scrollparent,containerOffsetX:n.containerOffsetX||this.settings.offset.left,containerOffsetY:n.containerOffsetY||this.settings.offset.top,parent:n.parent||this.activeElement,placement:n.placement||this.settings.placement,strategies:["flip","nudge"]},n);return o.placement!=="left"&&o.placement!=="right"||(o.x=o.x||t,o.y=0),o.placement!=="top"&&o.placement!=="bottom"||(o.y=o.y||t,o.x=0),r.width>=i&&/left|right/g.test(o.placement)||r.height>=a&&/top|bottom/g.test(o.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",function(c,u){e.handleAfterPlace(c,u)}),this.tooltip.data("place")||this.tooltip.place(o),this.tooltip.data("place").place(o),this},close:function(){return this.hide()},hide:function(e){if((!this.settings.keepOpen||e)&&this.visible)if(this.isInPopup)this.settings.content.addClass("hidden");else{if(ue.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip[0].style.maxWidth="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),$(".popover").not(".is-hidden").length===0&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.removeAttr("aria-owns"),this.isPopover){var t=this.element.prev("input");t.length&&t.attr("aria-expanded","false").removeAttr("aria-describedby").removeAttr("aria-haspopup").removeAttr("aria-owns")}this.element.triggerHandler("hide",[this.tooltip]),this.settings.onHidden&&this.settings.onHidden({api:this,elem:this.tooltip})}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings));var t=this;return t.settings.trigger==="immediate"?setTimeout(function(){t.show()},100):t.setContent(),this},detachOpenEvents:function(){var e=this;this.tooltip.off("click.".concat(cn)),$(document).off(["keydown.".concat(cn,"-").concat(e.uniqueId),"mouseup.".concat(cn,"-").concat(e.uniqueId),"touchend.".concat(cn,"-").concat(e.uniqueId)].join(" ")),$("body").off(["resize.".concat(cn),"scroll.".concat(cn)].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat(cn)),this.element.closest(".scrollable").off("scroll.".concat(cn)),this.element.closest(".datagrid-body").off("scroll.".concat(cn))},teardown:function(){return this.timer&&this.timer.destroy&&this.timer.destroy(!0),this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data(this.componentName)&&($.removeData(this.tooltip[0],this.componentName),delete this._componentName)),this.element.off(["mouseenter.".concat(cn),"mouseleave.".concat(cn),"longpress.".concat(cn),"click.".concat(cn),"updated.".concat(cn),"focus.".concat(cn),"blur.".concat(cn)].join(" ")),ue.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat(cn)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],this.componentName),delete this._componentName}},$.fn.tooltip=function(e){return this.each(function(){var t=$.data(this,cn);t?t.updated(e):t=$.data(this,cn,new Da(this,e))})};var wr="notificationbadge",eo={position:"upper-right",color:"alert",attribute:null};function qo(e,t){this.settings=N.mergeSettings(e,t,eo),this.element=$(e),this.init()}qo.prototype={init:function(){return this.build().handleEvents()},build:function(){if(this.element.hasClass("btn-tertiary")||this.element.hasClass("btn-icon")&&!this.element.hasClass("application-menu-trigger")){var e=this.element.find("svg");this.notificationBadgeContainerEl=$('<span class="notification-badge-container"></span>'),this.notificationBadgeContainerEl.insertAfter(e)}else this.notificationBadgeContainerEl=this.element.append('<span class="notification-badge-container"></span>');var t=`
      <span class="notification-dot notification-dot-`.concat(this.settings.position," notification-dot-").concat(this.settings.color,'"></span>');return this.element.find(".notification-badge-container").append(t),N.addAttributes(this.element.find(".notification-badge-container"),this,this.settings.attributes,"container"),N.addAttributes(this.element.find(".notification-badge-container .notification-dot"),this,this.settings.attributes,"dot"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(wr),function(){e.updated()}),this},updated:function(){return this.teardown().init()},show:function(){this.element.find(".notification-dot").removeClass("is-disabled")},hide:function(){this.element.find(".notification-dot").addClass("is-disabled")},teardown:function(){return this.element.off("updated.".concat(wr)),this},destroy:function(){this.teardown(),this.element&&(this.element.find(".notification-badge-container").remove(),$.removeData(this.element[0],wr))}},$.fn.notificationbadge=function(e){return this.each(function(){var t=$.data(this,wr);t?t.updated(e):t=$.data(this,wr,new qo(this,e))})};var xr="button",ar=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive","btn-generative"],to=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],Al=["icon-favorite","btn-toggle"],pc={style:ar[0],type:to[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,hitbox:!1,validate:!1,notificationBadge:!1,notificationBadgeOptions:{position:"upper-right",color:"alert"},attributes:null};function Vo(e,t){this.element=$(e),this.settings=N.mergeSettings(e,t,pc),this.init()}Vo.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element.parent().is(".spinbox-wrapper")?this.isDisabled(this.element.parent().find("input")):this.isDisabled(this.element)},set disabled(e){var t=e===!0;this.element[0].disabled=t},init:function(){this.settings.buttonsetAPI!==void 0&&typeof this.settings.buttonsetAPI.render=="function"&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},createNotificationBadge:function(){!this.settings.notificationBadge||this.element.find(".notification-badge-container").length>0||this.element.notificationbadge({position:this.settings.notificationBadgeOptions.position,color:this.settings.notificationBadgeOptions.color})},animateWithJS:function(e){var t=200,n=e[0].style,i="".concat(parseFloat(n.left)-100,"px"),a="".concat(parseFloat(n.top)-100,"px");e[0].style.opacity="0.4",e.animate({opacity:0,left:i,top:a,width:t,height:t},1e3)},createRipple:function(e){if(!(this.disabled||e&&(e.which!==void 0&&e.which!==1||["click","touchstart"].indexOf(e.type)===-1))){$("svg.ripple-effect",this.element).remove();var t,n,i=this.element.offset();e&&(e.originalEvent instanceof MouseEvent?(t=e.pageX-i.left,n=e.pageY-i.top):(e=e.originalEvent)&&e.touches&&e.touches.length===1&&(t=e.touches[0].pageX-i.left,n=e.touches[0].pageY-i.top)),t||(t=this.element.outerWidth()/2),n||(n=this.element.outerHeight()/2);var a=$(`<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">
      <circle r="0" class="ripple-circle"></circle>
    </svg>`);a[0].style.left="".concat(t,"px"),a[0].style.top="".concat(n,"px"),this.settings.hitbox?$(this.hitboxArea).prepend(a):this.element.prepend(a),!$.fn.cssPropSupport("animation")||Be.browser.isSafari&&!Be.features.touch||Be.browser.name==="firefox"?(a.removeClass("is-animation"),this.animateWithJS(a)):$("svg.ripple-effect",this.element).addClass("is-animation"),setTimeout(function(){a.remove()},1e3)}},render:function(){var e=this;this.renderAttributes(),this.createNotificationBadge();var t=this.element.prop("disabled");this.tertiaryGenerativeIcon=`
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" class="icon tertiary">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M6 2H4.5V6.25C4.5 6.80228 4.05228 7.25 3.5 7.25H2V8.75H3.5C4.05228 8.75 4.5 9.19772 4.5 9.75V14H6V9.75C6 9.19772 6.44772 8.75 7 8.75H8.5V7.25H7C6.44772 7.25 6 6.80228 6 6.25V2ZM15 3H13.5V4.25C13.5 4.80228 13.0523 5.25 12.5 5.25H11.5V6.75H12.5C13.0523 6.75 13.5 7.19772 13.5 7.75V9H15V7.75C15 7.19772 15.4477 6.75 16 6.75H17V5.25H16C15.4477 5.25 15 4.80228 15 4.25V3ZM10.5 11H12V11.75C12 12.3023 12.4477 12.75 13 12.75H13.5V14.25H13C12.4477 14.25 12 14.6977 12 15.25V16H10.5V15.25C10.5 14.6977 10.0523 14.25 9.5 14.25H9V12.75H9.5C10.0523 12.75 10.5 12.3023 10.5 11.75V11Z" fill="`.concat(t?"url(#paint-linear-disabled)":"url(#paint-linear)",`"></path>
        <defs>
          <linearGradient id="`).concat(t?"paint-linear-disabled":"paint-linear",`" x1="14.6681" y1="-32.5625" x2="31.7256" y2="-26.8896" gradientUnits="userSpaceOnUse">
          <stop offset="0.117757" stop-color="#254A92"></stop>
          <stop offset="0.927091" stop-color="#10B7A6"></stop>
          </linearGradient>
        </defs>
      </svg>
    `);var n=this.element[0].classList;ar.indexOf(this.settings.style)>0&&n.add(this.settings.style),to.indexOf(this.settings.type)>0&&n.add(this.settings.type),this.element.parent().is(".buttonset")&&(this.element.find("span").is(".audible")||this.element.addClass("has-text"));var i=this.buttonsetAPI,a=!1;if(i&&(i.settings.style==="modal"&&(a=!0),["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(n[a?"remove":"add"]("btn"),n[a?"add":"remove"]("btn-modal")),["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(n[a?"remove":"add"]("btn-primary"),n[a?"add":"remove"]("btn-modal-primary")),["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(n[a?"remove":"add"]("btn-secondary"),n[a?"add":"remove"]("btn-modal-secondary"))),this.settings.isDefault&&(this.settings.style="btn-primary",n.remove("btn-primary"),n.add("btn-modal-primary"),delete this.settings.isDefault),typeof this.settings.cssClass=="string"&&(this.element[0].className+=_e.stripHTML(" ".concat(this.settings.cssClass))),this.settings.hitbox&&(this.element.addClass("hitbox"),this.hitboxArea=document.createElement("span"),this.hitboxArea.classList.add("hitbox-area"),this.element.prepend(this.hitboxArea)),this.settings.forceDisable&&(this.disabled=this.settings.disabled,delete this.settings.disabled,delete this.settings.forceDisable),this.element.hasClass("btn-tertiary")&&this.element.hasClass("btn-generative")&&this.element.find("span").after(this.tertiaryGenerativeIcon),this.settings.disabled&&(this.disabled=this.settings.disabled===!0,delete this.settings.disabled),this.settings.text){var r=this.element[0].querySelector("span"),o=r instanceof HTMLElement;o||(r=this.element);var c=this.settings.text||$(r).text().trim();c=_e.stripHTML(c),o||(this.element[0].innerText="",r=document.createElement("span"),this.element.append($(r)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&r.classList.add("audible")),r.innerText=c}var u,p=this.icon;this.settings.icon?u=this.settings.icon:this.settings.type==="btn-toggle"?u=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:this.settings.type==="icon-favorite"?u=this.pressed?"icon-star-filled":"icon-star-outlined":this.settings.type==="btn-actions"&&(u="icon-more");var m=this.element.closest(".card").length!==0,v=this.element.closest(".widget").length!==0;if(u&&(u=_e.stripHTML(u),p instanceof SVGElement||p instanceof HTMLElement?m||v?this.element.prepend($(p)):p.querySelector("use").setAttribute("href","#".concat(u)):(p=$.createIconElement({icon:u.replace("icon-","")}),this.element.prepend($(p)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var w=this.element.children("svg.icon"),C=w.find("use"),A=!1;if(w.length>0&&C.length>=1){var S=C.last().attr("href");!S&&C.last().attr("xlink:href")&&(S=C.last().attr("xlink:href")),A=S.indexOf("#icon-dropdown")>-1}A||(w=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(w)),w.hasClass("icon-dropdown")||w.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",function(I,z){$(this).find("span").text(z.text())}),this.settings.hideMenuArrow&&w.remove()}if(Al.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",function(){e.toggle()}),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){if(!this.element.attr("title")){var M=L.translate("More");return void this.element.attr("title",M).tooltip({content:M})}this.settings.title&&this.element.attr("title")!==""||this.tooltipAPI.destroy()}n[this.settings.ripple?"remove":"add"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",function(I){e.createRipple(I)}),this.element.data("hidefocus")||this.element.hideFocus()},renderAttributes:function(){Array.isArray(this.settings.attributes)&&N.addAttributes(this.element,this,this.settings.attributes)},getSettingsFromElement:function(){var e,t=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i={},a=this.element.parents(".buttonset, .modal-buttonset");a.length&&(e=a.data("buttonset"))&&(this.buttonsetAPI=e);var r=this.element[0].classList||"";if(ar.forEach(function(m){m!=="default"&&r.contains(m)&&(i.style=m)}),this.buttonsetAPI&&this.buttonsetAPI.settings.style==="modal"){var o={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(o).forEach(function(m){r.contains(m)&&(i.style=o[m])})}to.forEach(function(m){m!=="default"&&r.contains(m)&&(i.type=m)}),this.settings.disabled||(i.disabled=this.disabled);var c=this.element[0].getAttribute("aria-pressed");c!==void 0&&(i.pressed=c===!0,i.type==="icon-favorite"&&(i.toggleOnIcon="icon-star-filled",i.toggleOffIcon="icon-star-outlined"));var u=this.element[0].id;typeof u=="string"&&u.length&&(i.id=u);var p=this.element[0].title;return typeof p=="string"&&p.length&&(i.title=p),r.contains("no-ripple")&&(i.ripple=!1),this.element[0].querySelector("span.audible")&&(i.audible=!0),n||Object.keys(i).forEach(function(m){t.settings[m]=i[m]}),i},performAnimation:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3;this.renderGenerativeStyles(),this.generativeAnimation=setTimeout(function(){e.removeGenerativeStyles()},t)},startAnimation:function(){this.performAnimation()},stopAnimation:function(){isNaN(this.generativeAnimation)||(clearTimeout(this.generativeAnimation),this.generativeAnimation=void 0,this.removeGenerativeStyles())},renderGenerativeStyles:function(){var e=this.element;e.find("svg").replaceWith(`
      <div class="dot-flashing-container">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
    `),e.addClass("loading"),e.css("pointer-events","none")},removeGenerativeStyles:function(){var e=this.element;e.hasClass("btn-tertiary")&&e.hasClass("btn-generative")?e.find(".dot-flashing-container").replaceWith(this.tertiaryGenerativeIcon):e.find(".dot-flashing-container").replaceWith(`
      <svg role="presentation" aria-hidden="true" focusable="false" class="icon">
        <use href="#icon-insights-smart-panel"></use>
      </svg>
    `),e.removeClass("loading"),e.css("pointer-events","")},toData:function(e){var t=this,n={};return Object.keys(this.settings).forEach(function(i){n[i]=t.settings[i]}),n.pressed=this.pressed,e&&(n.element=this.element[0]),n},get pressed(){return Al.indexOf(this.settings.type)!==-1&&this.element[0].getAttribute("aria-pressed")==="true"},set pressed(e){var t,n=e===!0,i=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,a=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",n),this.element[0].classList[n?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":t=n?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":i&&(t=n?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}a.length!==0&&typeof t=="string"&&(a.changeIcon(t),N.fixSVGIcons(a))},toggle:function(){this.pressed=!this.pressed},isDisabled:function(e){return(e=e instanceof jQuery?e:$(e)).is("[disabled]")&&!e.is('[disabled="false"]')},teardown:function(){this.element.off(["click.".concat(xr),"touchstart.".concat(xr)].join(" "));var e=this.tooltipAPI;this.element.hasClass("btn-actions")&&e&&e.destroy();var t=this.element.data("hidefocus");t&&t.destroy();var n=this.element.data("notificationbadge");return n&&n.destroy(),this},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],xr)}},$.fn.button=function(e){return this.each(function(){var t=$.data(this,xr);t?t.updated(e):t=$.data(this,xr,new Vo(this,e))})};var no="buttonset",fc={buttons:[],detectHTMLButtons:!1,style:"default"};function ta(e,t){if(!(e instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=e,this.settings=N.mergeSettings(e,t,fc),this.init()}ta.prototype={set disabled(e){e=e===!0,this.element.classList[e?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach(function(t){t.disabled=e})},init:function(){this.build(),this.render()},build:function(e){var t=this;this.buttons&&e||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach(function(n){t.add(n)}):this.detectHTMLButtons()},render:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.element.classList,i={default:"buttonset",modal:"modal-buttonset"};Object.keys(i).forEach(function(a){var r=i[a];e.settings.style!==a&&n.remove(r)}),n.add(i[this.settings.style]),t||this.buttons.forEach(function(a){a.render()})},add:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!e||at(e)!=="object")throw new Error("Settings object is required to add a new button to the ButtonSet");var n=e.element,i=n instanceof HTMLElement;i||(n=document.createElement("button"));var a=_e.stripHTML(e.id);typeof a=="string"&&a.length>0&&(n.id=a);var r=$(n);!t&&i||$(this.element).append(r),e.buttonsetAPI=this,r.button(e);var o=r.data("button");this.buttons.push(o)},remove:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!n)throw new Error("No Button API, HTMLElement, or ID string provided");if(n===void 0||typeof n.destroy!="function"){if(n instanceof HTMLElement?e=n:typeof n=="string"&&(e=$(this.element).find("#".concat(n.replace("#","")))),t=$(e),(n=$(e).data("button"))===void 0||typeof n.destroy!="function")throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else t=n.element;n.destroy(),i&&t.remove(),this.buttons=this.buttons.filter(function(a){return a!==n})},removeAll:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.buttons.forEach(function(n){e.remove(n,t)})},reset:function(){this.buttons=[]},at:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return this.buttons[e]},detectHTMLButtons:function(){var e=this;this.settings.detectHTMLButtons&&(this.reset(),(N.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach(function(t){var n=$(t).data("button");n||($(t).button(),n=$(t).data("button"));var i=n.getSettingsFromElement(!0);i.element=t,e.add(i)}))},toData:function(){var e=N.extend({},this.settings);return this.buttons.forEach(function(t){e.buttons.push(t.toData())}),e},teardown:function(e){return this.removeAll(e),this.reset(),this},updated:function(e){var t=this.settings.buttons;return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),Array.isArray(e.buttons)&&t!==e.buttons?(this.settings.buttons=e.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach(function(n){n.updated()})),this},destroy:function(){this.teardown(!0),$.removeData(this.element,no)}},$.fn.buttonset=function(e){return this.each(function(){var t=$.data(this,no);t?t.updated(e):t=$.data(this,no,new ta(this,e))})};var Ia="hyperlink",jo={};function Os(e,t){return this.init(e,t)}Os.prototype={init:function(e,t){if(!this.element&&e instanceof HTMLElement&&(this.element=e),at(t)==="object"){var n=this.settings||jo;this.settings=N.mergeSettings(this.element,t,n)}return this.element.classList.add("hyperlink"),this.focusBehavior||(this.focusBehavior=new Sa(this.element)),this},handleEvents:function(){return this},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(e){return this.each(function(){var t=$.data(this,Ia);t?t.updated(e):(t=$.data(this,Ia,new Os(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,Ia),$.removeData(this.element,"hidefocus")}})};var gt={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};gt.LEGACY_DEFS={"#":gt.DIGITS_REGEX,0:gt.DIGITS_REGEX,x:gt.ALPHAS_REGEX,"*":gt.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},gt.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:gt.EMPTY_STRING,placeholderChar:gt.PLACEHOLDER_CHAR,placeholder:gt.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var Td={prefix:gt.EMPTY_STRING,suffix:gt.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function gc(e){return e.split(gt.EMPTY_STRING).map(function(t){return gt.DIGITS_REGEX.test(t)?gt.DIGITS_REGEX:t})}function io(e,t){var n={any:gt.ANY_REGEX,digits:gt.DIGITS_REGEX,alphas:gt.ALPHAS_REGEX};n[t]||(t="any");for(var i=e.toString().length,a=[];i>0;)a.push(n[t]),i-=1;return a}gt.numberMask=function(e,t){(t=N.mergeSettings(void 0,t,Td)).locale&&t.locale.length||(t.locale=L.currentLocale.name),t.allowLeadingZeroes&&(Pn("allowLeadingZeros","allowLeadingZeroes","Number Mask"),t.allowLeadingZeros=t.allowLeadingZeroes,t.allowLeadingZeroes=void 0);var n=t.prefix,i=t.suffix,a=t.symbols.decimal,r=t.symbols.thousands,o=n&&n.length||0,c=i&&i.length||0,u=r&&r.length||0;function p(m){typeof m!="string"&&(m=gt.EMPTY_STRING);var v=m.length;if(m===gt.EMPTY_STRING||m[0]===n[0]&&v===1)return n.split(gt.EMPTY_STRING).concat([gt.DIGITS_REGEX]).concat(i.split(gt.EMPTY_STRING));if(m===a&&t.allowDecimal)return n.split(gt.EMPTY_STRING).concat(["0",gt.CARET_TRAP,a,gt.CARET_TRAP,gt.DIGITS_REGEX]).concat(i.split(gt.EMPTY_STRING));var w,C,A,S=m.lastIndexOf(a),M=S!==-1,I=m[0]===t.symbols.negative&&t.allowNegative;if(m.slice(-1*c)===i&&(m=m.slice(0,-1*c)),M?(w=m.slice(m.slice(0,o)===n?o:0,S),C=gc((C=m.slice(S+1,v)).replace(gt.NON_DIGITS_REGEX,gt.EMPTY_STRING))):w=m.slice(0,o)===n?m.slice(o):m,t.integerLimit&&typeof t.integerLimit=="number"){var z=r==="."?"[.]":"".concat(r),V=(w.match(new RegExp(z,"g"))||[]).length;w=w.slice(0,t.integerLimit+(I?1:0)+V*u)}w=w.replace(gt.NON_DIGITS_REGEX,gt.EMPTY_STRING),t.allowLeadingZeros||(w=w.replace(/^0+(0$|[^0])/,"$1"));var U={maximumFractionDigits:t.decimalLimit,style:"decimal",useGrouping:!0};return w=t.allowThousandsSeparator?function(G,J,te,de){if(G===""||isNaN(G))return G;var H=L.toLocaleString(Number(G),te.locale,de,J);if(te&&te.allowLeadingZeros&&G.indexOf("0")===0){var he="".concat(G).match(/^0*/)[0].length;for(H.indexOf("0")===0&&(H=H.substring(1));he>0;)he-=1,H="0".concat(H)}return H}(w,r,t,U):w,A=gc(w),(M&&t.allowDecimal||t.requireDecimal===!0)&&(m[S-1]!==a&&A.push(gt.CARET_TRAP),A.push(a,gt.CARET_TRAP),C&&(typeof t.decimalLimit=="number"&&(C=C.slice(0,t.decimalLimit)),A=A.concat(C)),t.requireDecimal===!0&&m[S-1]===a&&A.push(gt.DIGITS_REGEX)),o>0&&(A=n.split(gt.EMPTY_STRING).concat(A)),I&&(A.length===o&&A.push(gt.DIGITS_REGEX),A=[/-/].concat(A)),i.length>0&&(A=A.concat(i.split(gt.EMPTY_STRING))),{mask:A}}return p.instanceOf="createNumberMask",p(e)},gt.rangeNumberMask=function(e,t){(t=t||{}).delimeter=t.delimeter||"-";var n=L.currentLocale.data.numbers.minusSign,i=function(v){return new RegExp("".concat(v),"g")},a=function(v,w){return(v.match(w)||[]).length},r=e.split(")".concat(t.delimeter,"(")),o=function(v){var w=v.substr(-1),C=a(v,/[\u0028]/g),A=(a(v,/[\u0029]/g),[]);if(C===1){var S=t.allowNegative&&v.substr(1,1)===n;(A=gt.numberMask(S?v.substr(1):v,t)).splice(0,0,/[\u0028]/g),w===")"?A.push(/[\u0029]/g):w===t.delimeter&&(A.push(/[\u0029]/g),A.push(i("[".concat(t.delimeter,"]"))))}return A};typeof t.integerLimit=="number"&&(t.integerLimit*=2,t.integerLimit+=t.delimeter.length+4);var c,u=[],p=[];if(e.substr(0,1)==="("&&r.length)if(a(e,/[\u0028]/g)===2&&a(e,/[\u0029]/g)===2&&a(e,i("\\u0029".concat(t.delimeter,"\\u0028")))===1&&r[1].indexOf(")")!==r[1].length-1){var m=r[1].substr(0,r[1].indexOf(")")+1);u=o("".concat(r[0],")")),p=[i("[".concat(t.delimeter,"]"))].concat(Nt(o("(".concat(m))))}else(u=o(r.length===2?"".concat(r[0],")"):r[0])).length&&r.length===2&&(c="".concat(r[0],")"),/^\u0028.+\u0029$/g.test(c))&&(p=[i("[".concat(t.delimeter,"]"))].concat(Nt(o("(".concat(r[1])))));return{mask:[].concat(Nt(u),Nt(p))}},gt.adjustRangeNumber=function(e,t,n){if(n.settings.process==="rangeNumber"){var i,a,r,o,c,u,p=n&&(i=n.settings)!==null&&i!==void 0&&(i=i?.patternOptions)!==null&&i!==void 0&&i?.delimeter?n.settings.patternOptions.delimeter:"-",m=t&&((a=t.previousMaskResult)===null||a===void 0||a==null?void 0:a.substr(-1))===p;t&&((r=t.selection)===null||r===void 0||r==null?void 0:r.start)===1&&((o=t.selection)===null||o===void 0||o==null?void 0:o.end)===1&&e!=="("?(e="(".concat(e),t.selection.start++,t.selection.end++):t&&((c=t.selection)===null||c===void 0||c==null?void 0:c.start)!==1&&((u=t.selection)===null||u===void 0||u==null?void 0:u.end)!==1&&e.substr(-1)===")"&&(e.match(/\u0028/g)||[]).length===1&&!m&&(e="".concat(e).concat(p,"("),t.selection.start+=2,t.selection.end+=2)}return{rawValue:e,opts:t}};var mc={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},Wo={dd:31,d:31,MMM:void 0,MM:12,M:12,y:9999,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function Sl(e){return this.configure(e),this}gt.dateMask=function(e,t){t=N.mergeSettings(void 0,t,mc);var n=[],i=gt.DIGITS_REGEX,a=t.format,r=ot.removeDuplicates(a.replace(/[dMyHhmsa]+/g,"")),o=function(m){var v=m.split("").map(function(w){return w===" "&&(w="\\s"),w==="-"&&(w="\\-"),w});return new RegExp("[(".concat(v.join("|"),")]+"))}(r),c=a.match(/(d{1,2}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|a{1}|z{1,4}|E{1,4})/g),u=e.split(o),p=Wo;return c.forEach(function(m,v){var w,C=p[m];if(m==="a"||m==="ah"){var A="AM",S="PM";if(L.calendar()){A=L.calendar().dayPeriods[0],S=L.calendar().dayPeriods[1];for(var M=[],I=0;I<A.length;I++)A[I]&&S[I]&&A[I].toLowerCase()===S[I].toLowerCase()?M.push(A[I].toLowerCase()):M.push(A[I].toLowerCase()+(S[I]?S[I].toLowerCase():""));for(var z=0;z<M.length;z++)n.push(new RegExp("[".concat(M[z],"]"),"i"))}else n.push(/[aApP]/,/[Mm]/);if(m==="ah"){var V=u[v].replace(A,"").replace(S,"");n=n.concat(io(V,"digits"))}}else if(C)if(u[v]){var U=u[v].toString(),G=parseInt(U.substr(0,1),10),J=parseInt(p[m].toString().substr(0,1),10);m.length===1&&G>J||U!=="0"&&U.length===1&&G<=J&&u[v+1]!==void 0&&m.toUpperCase()!=="HH"?n.push(i):n=n.concat(io(C,"digits"))}else for(w=C.toString().length;w>0;)n.push(i),w-=1;else n=n.concat(io(m,"alphas"));var te=c[v+1];if(te!==void 0){var de=m.toString().length,H=a.indexOf(m)+de,he=a.indexOf(te),ie=a.substring(H,he).split(gt.EMPTY_STRING),me=[gt.CARET_TRAP].concat(ie.concat(gt.CARET_TRAP));n=n.concat(me)}}),{mask:n,literals:r.split(""),literalRegex:o}},gt.rangeDateMask=function(e,t){var n=e.split(t.delimeter),i=t.delimeter.split(""),a=gt.dateMask(n[0],t),r=[];return n[1]&&(r=gt.dateMask(n[1],t)),{mask:a.mask.concat(i.concat(r.mask)),literals:i,literalRegex:r.literalRegex}},gt.autocorrectedDatePipe=function(e,t){t.dateFormat||(t.dateFormat=L.calendar().dateFormat.short);var n=[],i=t.dateFormat.split(/[^dMy]+/),a={d:31,M:12,yy:99,yyyy:9999},r={d:1,M:1,yy:0,yyyy:1},o=e.conformedValue.split("");i.forEach(function(m){var v=t.dateFormat.indexOf(m),w=parseInt(a[m].toString().substr(0,1),10);parseInt(o[v],10)>w&&(o[v+1]=o[v],o[v]=0,n.push(v))});var c=new RegExp("[^".concat(e.placeholderChar,"]")),u=e.placeholder.split(c),p=e.conformedValue.split(/\D/g);return!i.some(function(m,v){var w=u[v].length>m.length?u[v].length:m.length,C=p[v]||"",A=parseInt(C,10);return A>a[m]||C.length===w&&A<r[m]})&&{value:o.join(""),characterIndexes:n}},Sl.prototype={configure:function(e){if(this.settings||(this.settings={}),!e)return this;if(e.locale&&(this.locale=e.locale),e.pattern){if(Array.isArray(e.pattern)||typeof e.pattern=="function")this.pattern=e.pattern;else if(typeof e.pattern=="string"){var t=N.mergeSettings(void 0,e.definitions||{},gt.LEGACY_DEFS);this.pattern=this._convertPatternFromString(e.pattern,t)}}return e.patternOptions&&(this.patternOptions=e.patternOptions),this},process:function(e,t){if(typeof e!="string")throw new Error("No string provided");var n={},i={originalValue:e,caretPos:t.selection.start,maskResult:!1};if(typeof this.pattern=="function"){t.patternOptions||(t.patternOptions={});var a=N.extend({},this.patternOptions,t.patternOptions,{caretPos:t.selection.start,previousMaskResult:t.previousMaskResult});n=this.pattern(e,a),Array.isArray(n)&&(n={mask:n});var r=this._processCaretTraps(n.mask);n.mask=r.maskWithoutCaretTraps,n.caretTrapIndexes=r.indexes,t.caretTrapIndexes=r.indexes}else n={mask:this.pattern};if(n.mask===!1)return i;try{i=this._conformToMask(e,n,t)}catch{return i}if(t.patternOptions&&t.patternOptions.delimeter&&i.conformedValue&&i.conformedValue!==e&&(i.caretPos=i.conformedValue.length),typeof t.pipe=="function"){var o={};try{o=t.pipe(i,t)}catch{o=!1}o===!1?(i.pipeResult=!1,i.pipedValue=t.previousMaskResult):N.isString(o)?(i.pipeResult=!0,i.pipedValue=o,i.pipedCharIndexes=[]):i=N.extend({},i,{pipeResult:o.result,pipedValue:o.value,pipedCharIndexes:o.characterIndexes})}return i},_conformToMask:function(e,t,n){(n=N.mergeSettings(void 0,n,gt.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(t.mask,n.placeholderChar);var i=!1,a=n.guide===!1&&n.previousMaskResult!==void 0,r=e.length,o=n.previousMaskResult.length,c=this.pattern.length,u=n.placeholder.length||0,p=n.placeholderChar,m=n.selection.start,v=gt.EMPTY_STRING,w=r-o,C=w>0,A=m+(C?-w:0),S=A+Math.abs(w);if(n.keepCharacterPositions===!0&&!C){for(var M=gt.EMPTY_STRING,I=A;I<S;I++)n.placeholder[I]===p&&(M+=p);e=e.slice(0,A)+M+e.slice(A,r)}for(var z=e.split(gt.EMPTY_STRING).map(function(qe,je){return{char:qe,isNew:je>=A&&je<S}}),V=r-1;V>=0;V--){var U=z[V];if(U!==n.placeholderChar){var G=V>=A&&o===c;U===n.placeholder[G?V-w:V]&&z.splice(V,1)}}e:for(var J=0;J<u;J++){var te=n.placeholder[J];if(te===p){if(z.length>0)for(;z.length>0;){var de=z.shift(),H=e.slice(J,J+1);if(de.char===p&&a!==!0){v+=p;continue e}if(t.literalRegex&&t.literalRegex.test(de.char)&&H&&(H===de.char||H===p)){if(C&&t.literals.indexOf(e[J-1])>-1){m++;continue e}var he=new RegExp("(".concat(de.char,")"),"g"),ie=n.placeholder.match(he).length;e.match(he).length<=ie&&(v+=de.char);for(var me=n.placeholder.slice(J).indexOf(de.char);me>0;)J++,me--;continue e}if(t.mask[J].test(de.char)){if(n.keepCharacterPositions===!0&&de.isNew!==!1&&n.previousMaskResult!==gt.EMPTY_STRING&&n.guide!==!1&&C){for(var ke=z.length,De=null,Me=0;Me<ke;Me++){var Ve=z[Me];if(Ve.char!==p&&Ve.isNew===!1)break;if(Ve.char===p){De=Me;break}}De!==null?(v+=de.char,z.splice(De,1)):J--}else v+=de.char;continue e}i=!0}a===!1&&(v+=n.placeholder.substr(J,u));break}v+=te}if(a&&C===!1){for(var Ke=null,ct=0;ct<v.length;ct++)n.placeholder[ct]===p&&(Ke=ct);Ke!==null?v=v.substr(0,Ke+1):e!==""&&v.indexOf(e)>-1?m+=e.length:v=gt.EMPTY_STRING}return{caretPos:m,caretTrapIndexes:n.caretTrapIndexes,conformedValue:v,charactersRejected:i,placeholder:n.placeholder,placeholderChar:p,maskResult:!0}},_processCaretTraps:function(e){for(var t=[],n=e.indexOf(gt.CARET_TRAP);n!==-1;)t.push(n),e.splice(n,1),n=e.indexOf(gt.CARET_TRAP);return{maskWithoutCaretTraps:e,indexes:t}},_convertMaskToPlaceholder:function(e,t){if(Array.isArray(e)||(e=[]),t||(t=gt.PLACEHOLDER_CHAR),e.indexOf(t)!==-1)throw new Error("".concat(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

The placeholder character that was received is:`).concat(JSON.stringify(t),`

`)+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map(function(n){return n instanceof RegExp||Object.prototype.toString.call(n)==="[object RegExp]"?t:n}).join(gt.EMPTY_STRING)},adjustCaretPosition:function(e){if(e.caretPos===0)return 0;function t(he){return he!==t}var n=e.rawValue.length,i=e.previousMaskResult.length,a=e.placeholder?e.placeholder.length:0,r=e.conformedValue?e.conformedValue.length:0,o=n-i,c=o>0;if(o>1&&!c&&i!==0)return e.caretPos;var u,p,m=0;if(c&&(e.previousMaskResult===e.conformedValue||e.conformedValue===e.placeholder))m=e.caretPos-o;else{var v=e.conformedValue.toLowerCase(),w=e.rawValue.toLowerCase().substr(0,e.caretPos).split(gt.EMPTY_STRING).filter(function(he){return v.indexOf(he)!==-1});p=w[w.length-1];var C=e.previousPlaceholder.substr(0,w.length).split(gt.EMPTY_STRING).filter(t).length,A=e.placeholder.substr(0,w.length).split(gt.EMPTY_STRING).filter(t).length!==C,S=e.previousPlaceholder[w.length-1]!==void 0&&e.placeholder[w.length-2]!==void 0&&e.previousPlaceholder[w.length-1]!==e.placeholderChar&&e.previousPlaceholder[w.length-1]!==e.placeholder[w.length-1]&&e.previousPlaceholder[w.length-1]===e.placeholder[w.length-2];!c&&(A||S)&&C>0&&e.placeholder.indexOf(p)>-1&&e.rawValue[e.caretPos]!==void 0&&(u=!0,p=e.rawValue[e.caretPos]);var M=[];e.indexesOfPipedChars&&(M=e.indexesOfPipedChars.map(function(he){return v[he]}));for(var I=M.filter(function(he){return he===p}).length,z=w.filter(function(he){return he===p}).length,V=e.placeholder.substr(0,e.placeholder.indexOf(e.placeholderChar)).split(gt.EMPTY_STRING).filter(function(he,ie){return he===p&&e.rawValue[ie]!==he}).length+z+I+(u?1:0),U=0,G=0;G<r&&(m=G+1,v[G]===p&&U++,!(U>=V));G++);}if(c){for(var J=m,te=m;te<=a;te++)if(!e.placeholder||(e.placeholder[te]===e.placeholderChar&&(J=te),e.placeholder[te]===e.placeholderChar||e.caretTrapIndexes.indexOf(te)!==-1||te===a))return J}else if(u){for(var de=m-1;de>=0;de--)if(e.conformedValue[de]===p||e.caretTrapIndexes.indexOf(de)!==-1||de===0)return de}else for(var H=m;H>=0;H--)if(e.placeholder[H-1]===e.placeholderChar||e.caretTrapIndexes.indexOf(H)!==-1||H===0)return H},_convertPatternFromString:function(e,t){for(var n,i,a=[],r=Object.keys(t),o=0;o<e.length;o++)a.push((n=e[o],i=void 0,(i=r.indexOf(n))>-1&&(n=t[r[i]]),n));return a}};var da="mask",vc={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:Sl,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function sr(e,t){return this.element=e,this.settings=N.mergeSettings(this.element,t,vc),this.init()}sr.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){if(this._replaceLegacySettings(),typeof this.settings.process=="string")switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=gt.numberMask,this.element.classList.add("is-number-mask");break;case"rangeNumber":this.settings.pattern=gt.rangeNumberMask,this.element.classList.add("is-range-number-mask");break;case"date":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=e.settings.dateFormat)),this.settings.pattern=gt.dateMask;break;case"rangeDate":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=t.settings.dateFormat),this.settings.pattern=gt.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var e=this;this.locale=L.currentLocale,this.settings.locale?L.getLocale(this.settings.locale).done(function(t){e.locale=L.cultures[t],e.build()}):this.build()},handleEvents:function(){var e=this;return this.element.addEventListener("keydown",function(t){t.key==="Insert"&&(e.insertOn=!0)}),this.element.addEventListener("keyup",function(t){t.key==="Insert"&&(e.insertOn=!1)}),this.changeEventHandler=function(){e.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){e.state.previousMaskResult=e.element.value,e.state.initialValue=e.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(t){return e.hasTriggeredChangeEvent=!1,e.process(t)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(t){if(this.processingJustHappenedOnInput===!0)return t.preventDefault(),!1;if(e.settings.processOnBlur){if(e.element.readOnly)return t.preventDefault(),!1;!e._hasChangedValue()||!e._isEdgeIE()&&e.hasTriggeredChangeEvent||($(e.element).trigger("change"),e.hasTriggeredChangeEvent=!0)}return delete e.state.initialValue,e.process(t)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(e){if(!this.settings.pattern)return!0;var t=this.mask,n=this.settings.patternOptions||{},i=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(i=this.locale.data.numbers.decimal),n.symbols&&n.symbols.decimal&&(i=n.symbols.decimal),t.pattern||t.configure({pattern:this.settings.pattern,patternOptions:n});var a=this.element.value,r=!1;if(e&&e.type==="input"&&e.inputType==="insertText"&&(a===""?(a=this.state.previousMaskResult,r=!0):e.data===i&&a.indexOf(i)>-1&&(r=!0)),a===this.state.previousMaskResult)return r&&(this.element.value="",this.element.value="".concat(a)),!1;var o=this.element.selectionStart||0,c=this.element.selectionEnd||0;if(this._isAndroid()&&this.state.previousMaskResult===""&&o!==c&&(N.safeSetSelection(a.length,a.length),o=a.length,c=a.length),(this.insertOn||this.settings.useInsert)&&o<a.length){var u=!1,p=this.settings.patternOptions;if(this.settings.process==="number"){var m=p.integerLimit;if(p.allowThousandsSeparator){var v=p.integerLimit-3<=0?0:(p.integerLimit-3)/3;m+=Math.floor(v)}p.allowDecimal&&a.includes(p.symbols.decimal)&&(m+=p.decimalLimit+1),p.allowNegative&&(m+=1),a.length>m&&(u=!0)}else(typeof this.settings.pattern=="string"&&a.length>this.settings.pattern.length||this.settings.state&&a.length>this.settings.state.previousPlaceholder.length)&&(u=!0);u&&(/^[!@#$%^&*()_+\-=\\[\]{};':"\\|,.<>\\/?]*$/.test(a.charAt(o))?(a=a.slice(0,o-1)+a.charAt(o)+a.charAt(o-1)+a.slice(o+2),o++,c++):a=a.slice(0,o)+a.slice(o+1))}a=this._getSafeRawValue(a);var w={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:o,end:c}};o!==c&&(w.selection.contents=a.substring(o,c)),typeof this.settings.pipe=="function"&&(w.pipe=this.settings.pipe);var C=gt.adjustRangeNumber(a,w,this);a=C.rawValue,w=C.opts;var A=t.process(a,w);if(!A.maskResult)return A.maskResult;var S=A.pipedValue?A.pipedValue:A.conformedValue;S!==""&&n&&n.suffix&&S.indexOf(n.suffix)<0&&(S+=this.settings.patternOptions.suffix),w.patternOptions&&w.patternOptions.delimeter&&S&&S!==a&&(a=S);var M={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:S,placeholder:A.placeholder,rawValue:a,caretPos:A.caretPos,placeholderChar:this.settings.placeholderChar};A.pipedCharIndexes&&(M.indexesOfPipedChars=A.pipedCharIndexes),A.caretTrapIndexes&&(M.caretTrapIndexes=A.caretTrapIndexes),A.caretPos=t.adjustCaretPosition(M);var I=this.state.previousMaskResult;return this.state.previousMaskResult=S,this.state.previousPlaceholder=A.placeholder,Be.browser.name==="firefox"?this.element.value!==S&&(this.element.value=S):this.element.value=S,N.safeSetSelection(this.element,A.caretPos),I!==S&&($(this.element).trigger("write.mask",[S]),A.maskResult)},_isAndroid:function(){return(Be&&Be.os&&Be.os.name?Be.os.name:"")==="android"},_isEdgeIE:function(){var e=Be&&Be.browser&&Be.browser.name?Be.browser.name:"";return e==="ie"||e==="edge"},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||this.state.previousMaskResult==="")||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(e){if(N.isString(e))return e;if(N.isNumber(e))return String(e);if(e==null)return"";throw new Error("".concat(`The "value" provided to the Masked Input needs to be a string or a number. The value received was:

`).concat(JSON.stringify(e)))},_replaceLegacySettings:function(){var e=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var t=this.element.getAttribute("data-mask")||!1;typeof t=="string"&&t.length&&(this.settings.pattern=t);var n=this.element.getAttribute("data-mask-mode")||!1;if(n&&e.indexOf(n)>-1&&(this.settings.mode=n),this.settings.mode&&(e.indexOf(this.settings.mode)===-1&&delete this.settings.mode,this.settings.mode==="group"?this.settings.process=void 0:this.settings.mode==="date"?this.settings.process="date":this.settings.process=this.settings.mode,delete this.settings.mode),this.settings.process==="number"){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var i=this.element.getAttribute("data-thousands")||!1;if(i&&(this.settings.patternOptions.allowThousandsSeparator=i==="true"),typeof this.settings.pattern=="string"){var a=this.settings.pattern.indexOf("-")!==-1;a&&(this.settings.patternOptions.allowNegative=a,this.settings.patternOptions.symbols.negative="-");var r=L.currentLocale.data.numbers?L.currentLocale.data.numbers.group:",",o=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:r,c=this.settings.pattern.indexOf(o)!==-1;this.settings.patternOptions.allowThousandsSeparator=c,c&&(this.settings.patternOptions.symbols.thousands=o);var u=typeof this.settings.patternOptions.symbols.decimal=="string"?this.settings.patternOptions.symbols.decimal:".",p=this.settings.pattern.split(u);this.settings.patternOptions.symbols.decimal===void 0&&(this.settings.patternOptions.symbols.decimal=L.currentLocale.data.numbers.decimal),this.settings.patternOptions.integerLimit=p[0].replace(/[^#0]/g,"").length,p[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=p[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=u))}}var m=this.element.getAttribute("data-must-complete")||!1;m&&(this.settings.mustComplete=m),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var v,w,C=this.settings.showSymbol;if(["currency","percent"].indexOf(C)>-1){v=(w=this.settings.showSymbol)==="currency"?{char:L.currentLocale.data.currencySign,format:L.currentLocale.data.currencyFormat}:w==="percent"?{char:L.currentLocale.data.numbers.percentSign,format:L.currentLocale.data.numbers.percentFormat}:{};var A,S,M,I=C==="currency"?"\xA4":v.char,z=new RegExp(I,"g").exec(v.format),V=-1;if(z&&z.length){if((V=v.format.indexOf(z[0]))===0)M="prefix",A=new RegExp("[^".concat(I,"]\\S"),"g"),S=v.format.replace(A,"");else if(V>0){for(M="suffix",A=new RegExp("\\S[^".concat(I,"]"),"g");/\s/.test(v.format.charAt(V-1));)--V;S=v.format.substr(V).replace(A,"")}C==="currency"&&(S=S.replace("\xA4",v.char)),this.settings.patternOptions[M]=S}}},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this.settings.process==="number"&&this.element.classList.remove("is-number-mask"),this.settings.process==="rangeNumber"&&this.element.classList.remove("is-range-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(e){return this.each(function(){var t=$.data(this,da);t?t.updated(e):(t=$.data(this,da,new sr(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,da)}})},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var ao="popupmenu",Ad={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new tr({containerOffsetX:10,containerOffsetY:Be.os.name==="ios"?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1,attributes:null,cssClass:null};function hs(e,t){this.settings=N.mergeSettings(e,t,Ad),this.element=$(e),this.init()}hs.prototype={init:function(){this.isFirefox=Be.browser.name==="firefox",this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),this.settings.trigger==="immediate"&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return Be.rtl},get idString(){if(this.id)return this.id.charAt(0).match(/\d/)?"popupmenu-".concat(this.id):"".concat(this.id)},get isOpen(){return ue.hasClass(this.element[0],"is-open")||ue.hasClass(this.menu[0],"is-open")},get isFocused(){var e=document.activeElement,t=this.element.is(e),n=this.menu&&this.menu.length&&this.menu[0].contains(e);return!(!t&&!n)},setup:function(){this.element[0].getAttribute("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element[0].getAttribute("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.id=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(e){if(e&&e.length){var t=e.parent();t.is("body")||(this.menuOrgContainment={parent:t,index:t.children().index(e)},this.menu.data("containment",this.menuOrgContainment))}},insertAtContainment:function(e,t){var n=function(o){return o&&o.length};if(t=t||this.menuOrgContainment||{},n(e)&&n(t.parent)){var i=t.index,a=t.parent,r=a.children().length;i<0&&(i=Math.max(0,r+1+i)),i<r?a.children().eq(i).before(e):a.append(e)}},addMarkup:function(){var e,t,n;if(!this.menu||!this.menu.length)switch(at(this.settings.menu)){case"string":e=this.settings.menu||this.idString,this.menu=$("#".concat(e)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),n=this.menu.data("trigger")[0].id,t=this.menu.clone(),this.setMenuOrgContainment(t),t.detach().appendTo("body"),t.attr("data-trigger",n),this.menu.attr("data-trigger",n));break;case"object":this.settings.menu===null?this.menu=this.element.next(".popupmenu, .popupmenu-wrapper"):this.menu=$(this.settings.menu),(e=this.menu.attr("id"))&&e!==""||(this.menu.attr("id",this.idString),e=this.menu.attr("id")),n=this.element.attr("id")}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),this.menu.length!==0){this.settings.attributes&&(N.addAttributes(this.element,this,this.settings.attributes,"trigger"),N.addAttributes(this.menu,this,this.settings.attributes,"menu"));var i=this.menu.parent().not(".popupmenu-wrapper, body");this.settings.attachToBody&&i.length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu").attr("aria-labelledby",n),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper"));var a=this.settings.cssClass;a&&typeof a=="string"&&this.wrapper.addClass(a),this.wrapper.find("svg").each(function(){$(this).data("icon")||$(this).icon()}),this.wrapper.parents().filter(function(){var w=this?this.style.overflow:null;return w!=="auto"&&w!=="visible"&&w!=="scroll"}).length===0&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each(function(w,C){var A=$(C);A.parent().hasClass("wrapper")||A.wrap('<div class="wrapper"></div>')});var r=!1,o=this.element.parent().attr("class");if(this.settings.showArrow===!0)r=!0;else if(this.settings.showArrow===null){var c=this.element.closest(".toolbar"),u=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&this.element.find("use").attr("href")==="#icon-more"||c.length>0&&!c.is(".formatter-toolbar")||u.length>0||this.settings.menu==="colorpicker-menu"||this.element.is(".searchfield-category-button")||o&&o.indexOf("more")>=0||o&&o.indexOf("btn-group")>=0)&&(r=!0)}if(r){var p=$('<div class="arrow"></div>'),m=this.menu.parent(".popupmenu-wrapper");m.find(".arrow").length===0&&m.addClass("bottom").append(p)}var v=this.element.closest(".field-short").length>0;this.menu[v?"addClass":"removeClass"]("popupmenu-short"),this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",e),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem&&this.element.width(parseInt(this.getMaxMenuWidth(),10))}},renderItem:function(e){if(e===void 0)return"";var t=this;function n(z){var V="";return z.forEach(function(U){V+=t.renderItem(U)}),V}if(Array.isArray(e)){var i=n(e),a='<ul class="popupmenu">'.concat(i,"</ul>");return ot.stripWhitespace(a)}var r="",o="";if(e.separator!==void 0)return e.heading&&(r+='<li class="heading">'.concat(e.heading,"</li>")),e.nextSectionSelect==="single"?o=" single-selectable-section":e.nextSectionSelect==="multiple"&&(o=" multi-selectable-section"),ot.stripWhitespace(`
        <li class="separator`.concat(o,`"></li>
        `).concat(r,`
      `));if(e.menu){var c="";e.menuId&&(c=' id="'.concat(e.menuId,'"'));var u="";e.hasIcons&&(u+=" has-icons");var p="";return Array.isArray(e.menu)&&(p=n(e.menu)),e.noMenuWrap?p:ot.stripWhitespace(`
        <ul`.concat(c,' class="popupmenu').concat(u,`">
          `).concat(p,`
        </ul>
      `))}var m="",v="",w="",C="",A="",S="",M="",I="";return e.disabled&&(m+=" is-disabled"),e.visible===!1&&(v+=" hidden"),e.id&&(C=' id="'.concat(e.id,'"')),e.selectable==="single"&&(A+=" is-selectable"),e.selectable==="multiple"&&(A+=" is-multiselectable"),e.icon&&(w=`<svg class="icon" focusable="false" aria-hidden="true" role="presentation">
        <use href="#icon-`.concat(e.icon,`"></use>
      </svg>`)),Array.isArray(e.submenu)&&(S+=" submenu",M+=this.renderItem(e.submenu),I+=`<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">
        <use href="#icon-dropdown"></use>
      </svg>`),ot.stripWhitespace('<li class="popupmenu-item'.concat(m).concat(v).concat(A).concat(S,`">
      <a`).concat(C,' href="#">').concat(w,"<span>").concat(e.text,`</span>
        `).concat(I,`
      </a>
      `).concat(M,`
    </li>`))},toData:function(e){var t={},n=[],i=this;(e=e||{}).contextElement||(e.contextElement=this.menu),e.contextElement instanceof HTMLElement&&(e.contextElement=$(e.contextElement)),e.contextElement.is(".popupmenu-wrapper")&&(e.contextElement=e.contextElement.children("ul"));var a=e.contextElement.attr("id");a&&a.length&&(t.menuId="".concat(a));var r,o,c=e.contextElement.hasClass("has-icons");function u(p){var m=$(p),v={};if(!m.hasClass("heading")){if(m.hasClass("separator")){v.separator=!0,m.hasClass("single-selectable-section")&&(r=!0,v.nextSectionSelect="single"),m.hasClass("multi-selectable-section")&&(o=!0,v.nextSectionSelect="multiple");var w=m.next();return w.hasClass("heading")&&(v.heading=w.text().trim()),v}var C=m.children("a"),A=C.children(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),S=C.attr("id");v.text=C.text().trim(),v.disabled=m.hasClass("is-disabled"),v.visible=!m.hasClass("hidden"),typeof S=="string"&&S.length&&(v.id=S),A.length&&A[0]instanceof SVGElement&&(v.icon=A[0].querySelector("use").getAttribute("href").replace("#icon-",""));var M=!r&&!o,I=!i.hasSelectableSeparator(m);v.selectable&&M&&I&&(v.selectable==="single"?r=!0:v.selectable==="multiple"&&(o=!0),t.selectable=v.selectable);var z=m.find(".popupmenu");return z.length&&(v.submenu=[],z.first().children().each(function(V,U){var G=u(U);G&&v.submenu.push(G)})),v}}return t.hasIcons=c,e.contextElement.children("li").each(function(p,m){var v=u(m);v&&n.push(v)}),e.noMenuWrap?t=n:t.menu=n,t},markupItems:function(e){var t=this,n=this;e?e instanceof HTMLElement&&(e=$(e)):e=this.menu;var i=e.find("li:not(.heading):not(.separator)");function a(r){var o=$(r),c=o.parents("li"),u=[];return o.add(c).each(function(p,m){u.push($(m).parent().children("li:not(.heading):not(.separator)").index(m))}),u.join("-")}e[0].setAttribute("role","menu"),e[0].setAttribute("aria-labelledby",this.element.attr("id")),i.each(function(r,o){var c=$(o).children("a")[0],u=$(c),p=$(o),m=u.children("span")[0],v=p.children("ul")[0],w=p.children(".wrapper")[0];if(o.setAttribute("role","none"),c){if(c.setAttribute("role",n.settings.ariaListbox?"option":"menuitem"),c.setAttribute("tabindex","-1"),n.settings.attributes){var C=t.element.parents(".flex-toolbar")?"option-".concat(a(o),"-menu-item"):"option-".concat(a(o));N.addAttributes(u,n,n.settings.attributes,C)}if(p.hasClass("is-disabled")?(p.addClass("is-disabled"),c.setAttribute("aria-disabled","true"),c.setAttribute("disabled",!0)):(p.removeClass("is-disabled"),u.removeAttr("aria-disabled"),c.removeAttribute("disabled")),v instanceof HTMLElement&&v.classList.add("popupmenu"),w instanceof HTMLElement&&(o.className+="".concat(ue.hasAnyClass(o)?" ":"","submenu"),(v=$(w).children("ul")[0])instanceof HTMLElement&&v.classList.add("popupmenu"),n.element.parent(".datagrid-cell-wrapper").length>0&&$(o).children("div.wrapper").length>0&&($(o).addClass("has-selectable-submenu"),$(o).find(".popupmenu").children().addClass("is-selectable"))),ue.hasClass(o,"submenu")&&(m||(c.innerHTML="<span>".concat(c.innerHTML,"</span>"),m=u.children("span")[0]),u.find("svg.arrow").length===0&&u.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),c.setAttribute("aria-haspopup","true")),ue.hasClass(o,"is-checked")&&(c.setAttribute("role","menuitemcheckbox"),c.setAttribute("aria-checked",!0),!n.hasSelectableSeparator(o))){var A="is-selectable";n.menu.is(".is-multiselectable")&&(A="is-multiselectable"),n.getAdjacentSelectables(o).addClass(A)}ue.hasClass(o,"is-not-checked")&&(o.className=o.className.replace("is-not-checked",""),c.setAttribute("role","menuitemcheckbox"),c.removeAttribute("aria-checked"))}}),n.refreshHasIcons(e)},refreshHasIcons:function(e){e||(e=this.menu);var t=e.find("li:not(.heading):not(.separator):not(.hidden)").filter(function(n,i){return $(i).find(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)").length>0}).length>0;e.toggleClass("has-icons",t)},refreshMenuItem:function(e,t,n){if(e&&e instanceof HTMLElement&&t&&$(this.menu)[0].contains(e)){var i,a=e.querySelector("a"),r=e.querySelector(".icon:not(.close):not(.icon-dropdown)");if(t.text&&a.innerText.trim()!==t.text&&(a.innerText="".concat(t.text)),t.disabled===!0?e.className.indexOf("hidden")===-1&&e.classList.add("is-disabled"):e.className.indexOf("is-disabled")>-1&&e.classList.remove("is-disabled"),t.visible===!0?e.className.indexOf("hidden")>-1&&e.classList.remove("hidden"):e.className.indexOf("hidden")===-1&&e.classList.add("visible"),t.icon?r&&((i=r.querySelector("use"))&&i.getAttribute("href").replace("#icon-","")!==t.icon&&r.remove(),i.setAttribute("href","#icon-".concat(t.icon))):r&&r.remove(),t.submenu){e.classList.add("submenu");var o=e.querySelector(".popupmenu");if(o)for(var c=o.children,u=0;u<t.submenu.length;u++)t.submenu[u].isSubmenuItem=!0,this.refreshMenuItem(c.item(u),t.submenu[u],n)}typeof n=="function"&&n.apply(this,[e,t])}},handleEvents:function(){var e=this,t=this.settings.trigger!=="rightClick";function n(a){return a.stopPropagation(),a.preventDefault(),!1}function i(a,r){if(e.keydownThenClick)delete e.keydownThenClick;else{var o=r===!0?0:2;a.button>o||e.element.is(":disabled")||(["android","ios"].indexOf(Be.os.name)>-1&&(e.holdingDownClick=!0),e.isOpen?e.close():function(c){if(e.element.hasClass("is-disabled"))return c.stopPropagation(),void c.preventDefault();var u=e.settings.trigger==="rightClick";if(c.stopPropagation(),c.preventDefault(),u&&e.menu.hasClass("is-open"))return e.close(),void e.open(c);e.menu.add(e.element).hasClass("is-open")?e.close():e.open(c)}(a))}}this.settings.trigger==="immediate"||(t&&this.element.off("click.popupmenu").on("click.popupmenu",function(a){i(a,!0)}),t||(this.menu.parent().on("contextmenu.popupmenu",n),Be.features.touch?this.element.on("touchstart.popupmenu",function(a){Be.os.name==="ios"&&a.target.tagName!=="INPUT"&&a.preventDefault(),$(a.target).addClass("longpress-target")}).on("touchend.popupmenu",function(a){$(a.target).removeClass("longpress-target")}).on("longpress.popupmenu",function(a,r){a.stopPropagation(),e.openedWithTouch=!0,i(r)}):this.element.on("contextmenu.popupmenu",function(a){n(a),i(a)}))),this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",function(){return!1}),this.element.not(".autocomplete, ul").on("keydown.popupmenu",function(a){switch(a.which){case 13:case 32:e.settings.trigger==="click"&&(e.keydownThenClick=!0,e.open(a));break;case 121:a.shiftKey&&e.open(a)}}).on("updated.popupmenu",function(a,r){a.stopPropagation(),e.updated(r)})},handleKeys:function(){var e=this;this.menu.on("click.popupmenu","li",function(n){var i=$(this).find("a");e.handleItemClick(n,i)}),this.menu.on("click.btn-menu.".concat(this.id),function(n){n.target.closest(".switch")||n.preventDefault()});var t="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",function(){e.highlight($(this).children("a"))}),setTimeout(function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),function(n){var i=n.which;if(i===27)return n.stopPropagation(),n.stopImmediatePropagation(),e.close(!0),!1;if(i===9&&(n.stopPropagation(),e.close(!0)),i===32){n.stopPropagation();var a=$(n.target),r=a.find("input:checkbox");if(r.length)return r.trigger("click"),!0;var o=$();if(a.is(".tab")||a.parent().is(".tab")||a.is(".tab-more"))return n.preventDefault(),!0;if(a.is("li")&&(o=a.children("a")),a.is("a")&&(o=a),o.length)return o.trigger("click"),!0}var c=e.menu.find(":focus");c[0]||(c=$(e.menu[0].querySelector(".is-focused a")));var u,p,m,v,w=e.settings.menu==="colorpicker-menu",C=e.element.is(".autocomplete");i!==37||C||(n.stopPropagation(),n.preventDefault(),c.closest(".popupmenu")[0]!==e.menu[0]&&c.closest(".popupmenu").length>0&&(c.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),e.highlight(c.closest(".popupmenu").parent().prev("a")))),u=function(U){var G;return U.parent().prevAll(t).each(function(){if(!G){var J=$(this),te=J.children("a");J.is(".is-disabled")||te.prop("disabled")===!0||(G=te)}}),G||v(U)},v=function(U){var G=U.parent().prevAll(t).last(),J=G.children("a");return G.is(".is-disabled")||J.prop("disabled")===!0?p(J):J},p=function(U){var G;return U.parent().nextAll(t).each(function(){if(!G){var J=$(this),te=J.children("a");J.is(".is-disabled")||te.prop("disabled")===!0||(G=te)}}),G||v(U)},m=function(U){var G=U.parent().nextAll(t).last(),J=G.children("a");return G.is(".is-disabled")||J.prop("disabled")===!0?u(J):J};for(var A=0,S=e.menu.children(t),M=S.length,I=0,z=0;z<M;z++){var V=S[z];if(I===0&&(I=V.offsetTop),V.offsetTop!==I)break;A++}if(!w&&i===38||w&&i===(L.isRTL()?39:37)){if(n.stopPropagation(),n.preventDefault(),c.parent().prevAll(t).length===0)return void(c.length===0?e.highlight(e.menu.children(t).last().find("a")):e.highlight(m(c)));e.highlight(u(c))}if(w&&i===38&&(n.stopPropagation(),n.preventDefault(),c.parent().prevAll(t).length>0&&e.highlight($(c.parent().prevAll(t)[A-1]).find("a"))),i!==39||C||(n.stopPropagation(),n.preventDefault(),c.parent().hasClass("submenu")&&(e.openSubmenu(c.parent()),e.highlight(c.parent().find(".popupmenu a:first")))),!w&&i===40||w&&i===(L.isRTL()?37:39)&&!C){if(n.stopPropagation(),n.preventDefault(),c.parent().nextAll(t).length===0)return void(c.length===0?e.highlight(e.menu.children(t).first().find("a")):e.highlight(v(c)));e.highlight(p(c))}w&&i===40&&(n.stopPropagation(),n.preventDefault(),c.parent().nextAll(t).length>0&&e.highlight($(c.parent().nextAll(t)[A-1]).find("a")))})},1)},handleItemClick:function(e,t){var n=t.attr("href"),i=[t];return!(!e&&!t||!t.length)&&!t.hasClass("no-results")&&(t.parent().is(".submenu, .hidden, .is-disabled")||t[0].disabled?(e.preventDefault(),!1):!(t.find("input[checkbox]").length>0)&&(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(t),e.preventDefault()),this.isSelectable(t.parent())&&(i=this.select(t)),t.parent().hasClass("is-toggleable")&&t.parent().toggleClass("is-checked"),e&&this.settings.triggerSelect&&(i.length===1&&i.push(void 0),i.push(!0),this.element.triggerHandler("selected",i)),!(!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(t))||(this.close(),!!this.element.is(".autocomplete")||(n&&n.charAt(0)!=="#"?(t.attr("target")==="_blank"?window.open(n,"_blank"):window.location.href=n,!0):(e&&(e.preventDefault(),e.stopPropagation()),!0)))))},iconFilteringSetup:function(e){if(this.element.hasClass("btn-filter")){var t=this.element.find("svg.icon-dropdown"),n=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=n.find("span").text();t.length===1&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),t.first().changeIcon(n.find("svg").getIconName()),this.element.find(".audible").text(i)}},iconFilteringUpdate:function(e){if(this.element.hasClass("btn-filter")){var t=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=t.find("span").text();this.element.find(".audible").text(n),this.element.find("svg:not(.ripple-effect):first").changeIcon(t.find("svg").getIconName())}},getPositionFromEvent:function(e){var t=0,n=0;if(e||(e=window.event),!e)return{};if(e.changedTouches){var i=e.changedTouches[0];t=i.pageX,n=i.pageY}else e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:t,y:n}},position:function(e){var t=this,n=this.element,i=this.isRTL(),a=this.menu.parent(".popupmenu-wrapper"),r=this.getPositionFromEvent(e),o=this.menu[0].offsetWidth;if(this.menu[0].offsetHeight,a.length){var c=this.element[0].offsetWidth;this.settings.trigger==="click"&&c>o&&this.menu.width(c),n.is("svg, .icon")&&n.closest(".tab").length&&(n=n.closest(".tab")),a.find(".arrow").removeAttr("style");var u=$.extend({},this.settings.placementOpts),p=["flip"];p.push("shrink-y"),u.strategies=p,this.settings.trigger==="immediate"&&this.settings.eventObj||this.settings.trigger==="rightClick"?(u.x=M(0,"x")-(i?o:0)+(i?-1:1)*this.settings.offset.x,u.y=M(0,"y")+this.settings.offset.y,u.x===0&&u.y===0&&(u.x=this.settings.offset.x||0,u.y=this.settings.offset.y||0,u.parent=this.element,u.placement="bottom",u.parentXAlignment=i?"right":"left")):(u.x=this.settings.offset.x||0,u.y=this.settings.offset.y||0,u.parent=this.element,u.placement="bottom",u.strategies.push("nudge"));var m=n.parents(".toolbar"),v=m.length>0,w=n.parents(".title").length>0,C=v&&m.children(".buttonset, .title").length>1,A=n.parents(".pager-pagesize").length>0;m.parents(".header").length>0&&(u.y+=5),n.is(".btn-menu")?A?z():v&&C?w?I():z():I():n.is(".btn-actions")||n.is(".tab-more")?z():n.is(".btn-split-menu, .tab, .searchfield-category-button")&&!n.parent(".pager-pagesize").length&&I(),n.parents(".masthead").length>0&&(u.y+=15);var S=this.element.parents(".page-container:not(.tab-container)");S.length&&(u.container=S.first()),a.one("afterplace.popupmenu",function(V,U){t.handleAfterPlace(V,U)}),this.wrapperPlace=new nr(a,u),this.wrapperPlace.place(u)}function M(V,U){return r[U=U==="x"||U==="y"?U:"x"]}function I(){u.parentXAlignment=i?"right":"left"}function z(){u.parentXAlignment=i?"left":"right"}},handleAfterPlace:function(e,t){var n=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(e,t,n),t.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),t.height&&(n[0].style.height="",this.menu[0].style.height=t.height+(/(px|%)/i.test("".concat(t.height))?"":"px")),t.width&&(n[0].style.width="",this.menu[0].style.width=t.width+(/(px|%)/i.test("".concat(t.width))?"":"px")),n.triggerHandler("popupmenuafterplace",[t]),t},callSource:function(e,t,n,i){if(typeof this.settings.beforeOpen=="function"){var a=this,r=this.menu;if(!(ue.isElement(n)&&$(n).is(".popupmenu, .submenu")&&(r=$(n),n.hasClass("is-open")))){var o=function(u){if(r.children().filter(function(v,w){return a.predefinedItems.index(w)===-1}).off().remove(),u===!1)return!1;var p=$(u);r.append(p);var m=r.parent(".wrapper, .popupmenu-wrapper");return m.length||(m=r.wrap('<div class="wrapper">').parent()),m.removeAttr("style"),a.markupItems(r),t&&(r.is(a.menu)?a.open(e,!0):a.openSubmenu(m.parent("li"),!0)),!0},c={};r.is(this.menu)||(c.contextElement=r),c.element=this.element,c.isSubmenu=i,typeof this.settings.beforeOpen!="string"?this.settings.beforeOpen(o,c):window[this.settings.beforeOpen](o,c)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var e=!this.isOpen;e&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var t=this.menu.width();return e&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),t},open:function(e,t,n){var i=this;if(this.menu&&this.menu.length&&(this.element.hasClass("autocomplete")||this.element.triggerHandler("beforeopen",[this.menu,this])!==!1)&&(t||(this.callSource(e,!0),!this.settings.beforeOpen)))if(n||Be.os.name!=="ios"){$(".popupmenu.is-open").filter(function(){return $(this).parents(".popupmenu").length===0}).not(this.menu).each(function(){var v=$(this).data("trigger");if(v&&v.length){var w=$(this).data("trigger").data("popupmenu");w&&typeof w.close=="function"&&w.close()}});var a=this.element.data("tooltip");a&&a.visible&&a.hide();var r=$(".dropdown.is-open");if(r.length>0){var o=r.parent().prev().data("dropdown");o&&o.closeList("cancel")}var c=document.querySelector(".application-menu.is-open");c instanceof HTMLElement&&!c.contains(this.element[0])&&!c.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(e),N.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each(function(){var v=$(this),w=v.parent();w.hasClass("is-disabled")?(w.addClass("is-disabled"),v.attr("aria-disabled","true"),v.attr("disabled","disabled")):(w.removeClass("is-disabled"),v.removeAttr("aria-disabled"),v.removeAttr("disabled"))}),setTimeout(function(){$(document).on("touchend.popupmenu.".concat(i.id," click.popupmenu.").concat(i.id),function(v){var w=i.settings.menu==="colorpicker-menu";v.button!==2&&(i.holdingDownClick?delete i.holdingDownClick:$(v.target).is(i.element)&&!w&&i.settings.trigger!=="rightClick"||($(v.target).closest(".popupmenu").length===0&&i.close(!0,i.settings.trigger==="rightClick"),$(v.target).hasClass("swatch")&&setTimeout(function(){i.close()},150)))}),window.orientation===void 0&&$("body").on("resize.popupmenu",function(){i.handleCloseEvent()}),$(window).on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".datagrid-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),i.element.triggerHandler("open",[i.menu])},300),$("iframe").each(function(){var v=$(this);v.ready(function(){try{v.contents().find("body").on("click.popupmenu",function(){i.close()})}catch{}})}),this.handleKeys();var u,p,m=0;i.menu.find(".popupmenu").removeClass("is-open"),i.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",function(v){if(!$(v.target).hasClass("popupmenu")){var w=$(this);u=v.pageX,clearTimeout(i.submenuOpenTimeout),i.submenuOpenTimeout=setTimeout(function(){i.openSubmenu(w)},300),$(document).on("mousemove.popupmenu.".concat(this.id),function(C){m=C.pageX})}}).on("mouseleave.popupmenu",".submenu",function(){$(document).off("mousemove.popupmenu.".concat(this.id));var v=((p=$(this).find("ul")).parent(".wrapper").length>0?parseInt(p.parent(".wrapper")[0].style.left,10):0)<0,w=p.parents(".submenu").length>0,C=m-u<3.5;v&&(C=m-u>=0),(C||w)&&(p.removeClass("is-open").removeAttr("style"),p.parent(".wrapper").removeAttr("style"),p.parent().parent().removeClass("is-submenu-open"),p=null),clearTimeout(i.submenuOpenTimeout)}),i.settings.autoFocus&&setTimeout(function(){var v=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",w=i.menu.children(v).find(".is-selected").children("a");w.length||(w=i.menu.children(v).first().children("a")),i.highlight(w),i.element.triggerHandler("afteropen",[i.menu])},1)}else setTimeout(function(){i.open(e,t,!0)},400)},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(e,t){if(!ue.hasClass(e,"is-disabled")&&!e[0].disabled){var n=e.children(".wrapper, .popupmenu");n.length&&n.is(".wrapper")&&(n=n.children(".popupmenu"));var i=this.element.triggerHandler("beforeopen",[n,this]);i!==!1&&(!t&&(i=this.callSource(null,!0,n,!0),this.settings.beforeOpen)||this.showSubmenu(e))}},showSubmenu:function(e){this.element.triggerHandler("show-submenu",[e]);var t=e.children(".wrapper").filter(":first"),n=this.isRTL();if(t.length===0){var i=e.children("ul").filter(":first");i.wrap('<div class="wrapper"></div>'),t=i.parent()}var a,r=t.children(".popupmenu"),o=e.position().left+e.outerWidth();e.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),t.children(".popupmenu").addClass("is-open"),a=t.outerWidth(),n&&(o=e.position().left-a),t[0].style.left="".concat(o,"px"),t[0].style.top="".concat(parseInt(e.position().top,10)-5,"px");var c=r.outerWidth();(t.offset().left+c>$(window).width()+$(document).scrollLeft()||n&&t.offset().left<0)&&(t[0].style.left="-9999px",c=r.outerWidth(),o=e.position().left-c,n&&(o=t.closest(".popupmenu").outerWidth()-4),t[0].style.left="".concat(o,"px"),(t.offset().left<0||n&&t.offset().left+c>$(window).width()+$(document).scrollLeft())&&(o=e.position().left-c+Math.abs(t.offset().left)+40,n&&(o=e.position().left-c-30),t[0].style.left="".concat(o,"px"),c=r.outerWidth()),(t.offset().left+c>$(window).width()+$(document).scrollLeft()||n&&t.offset().left<0)&&(c-=t.offset().left+c-($(window).width()+$(document).scrollLeft()),r[0].style.width="".concat(c,"px")));var u=r.outerHeight(),p=this.settings.placementOpts.containerOffsetY;if(t.offset().top+u>window.innerHeight-p+$(document).scrollTop()){var m=t.offset().top+u-(window.innerHeight+$(document).scrollTop());if(t[0].style.top="".concat(t.position().top-m-p,"px"),t.offset().top+u>window.innerHeight+$(document).scrollTop()){var v=e.parents(".popupmenu-wrapper:first").offset().top;t[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-u-v,"px")}t.offset().top-$(document).scrollTop()<0&&(t[0].style.top=0,t[0].style.top="".concat(-1*t.offset().top,"px"),u=r.outerHeight()),t.offset().top+u>window.innerHeight+$(document).scrollTop()&&(u=u-(t.offset().top+u-(window.innerHeight+$(document).scrollTop()))-32,r[0].style.height="".concat(u,"px"))}e.parent().find(".is-submenu-open").removeClass("is-submenu-open"),e.addClass("is-submenu-open")},highlight:function(e){if(e&&e.length){var t=e.parent();t.parent().children("li").removeClass("is-focused"),t.addClass("is-focused"),e&&e.focus(),t.closest(".header").scrollTop(0)}},select:function(e){var t=this.menu.is(".is-selectable"),n=this.menu.is(".is-multiselectable"),i=this.isInSingleSelectSection(e),a=this.isInMultiselectSection(e),r=e.parent(),o=[e];return r.hasClass("is-selectable")&&!e.find(".icon").length||t||i?(r.prevUntil(".heading, .separator").add(r.nextUntil(".heading, .separator")).removeClass("is-checked"),r.addClass("is-checked"),o.push("selected"),o):r.hasClass("is-multiselectable")||n||a?r.hasClass("is-checked")?(r.removeClass("is-checked"),o.push("deselected"),o):(r.addClass("is-checked"),o.push("selected"),o):o},getSelected:function(){return this.element.is(".popupmenu")&&this.element.is(".is-selectable, .is-multiselectable")?this.element.children(".is-checked").children("a"):this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(e){return $(e).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(e)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(e){return $(e).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(e){var t=this.getSelectableSeparator(e);return t&&t.length},getAdjacentSelectables:function(e){var t=this.getSelectableSeparator(e),n=":not(.heading):not(.separator):not(.submenu)";return t&&t.length?$(t).nextUntil(".separator").filter(n):$(e).parent().children("li".concat(n))},isInSelectableSection:function(e){Pn("hasSelectableSeparator()","isInSelectableSection()");var t=e.parent().prevAll().filter(".separator").first();return t.hasClass("multi-selectable-section")||t.hasClass("single-selectable-section")},isInSingleSelectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){var e=this;$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu dragstart.popupmenu"),setTimeout(function(){e.menu&&e.menu.length&&e.menu.off("click.btn-menu.".concat(e.id))},1),$("iframe").each(function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch{}})},close:function(e,t){if(e&&e!==void 0||(e=!1),this.menu&&this.isOpen){var n=this.menu.parent(".popupmenu-wrapper"),i=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),n[0]&&(n[0].style.left="-999px",n[0].style.height="",n[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),i[0]&&(i[0].style.left="",i[0].style.top="",i[0].style.height="",i[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find("li").off("click.popupmenu"),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[e]),this.detach(),this.settings.trigger==="immediate"&&this.destroy(),this.element[0].tagName==="INPUT"&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch;var a=!1;if(this.element.is(".colorpicker-editor-button")){var r=this.element.data("toolbaritem")||this.element.data("toolbarflexitem"),o=r?r.toolbarAPI:null;o&&o.overflowedItems.forEach(function(c){c.type==="colorpicker"&&(a=!0)})}t||!this.settings.returnFocus||Be.features.touch||a||(typeof this.settings.returnFocus!="function"?document.activeElement&&document.activeElement.tagName==="INPUT"||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){var e,t=this;if(!this.menu||!this.menu.length||!this.menu.parent())return this;var n=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var i=(e=this.menu[0])===null||e===void 0||e==null?void 0:e.id,a=$('[aria-controls="'.concat(i,'"]')).not(this.element);if(!a.length||this.settings.trigger==="immediate"){var r=this.menu.parent();r.find(".arrow").remove(),r.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&r.removeClass("bottom"),this.preExistingWrapper||!this.menu.parent().is(".popupmenu-wrapper")||a.length||this.menu.unwrap();var o=this.element.parent().children(".searchfield"),c=this.menu.data("containment");o.length?this.menu.insertAfter(o.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):c?this.insertAtContainment(this.menu,c):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each(function(u,p){var m=$(p).find("span").text()||$(p).text();$(p).find("span, svg").remove(),$(p).text(m)}),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each(function(){var u;(u=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&u.unwrap()}),t.wrapperPlace&&(t.wrapperPlace.destroy(),delete t.wrapperPlace),n.off().remove()}return this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(e){return this.settings=N.mergeSettings(this.element[0],e,this.settings),this.teardown().init()},destroy:function(){var e;this.menu&&(this.close(),this.teardown(),(e=this.menu)===null||e===void 0||e==null||e.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],ao))}},$.fn.popupmenu=function(e){return this.each(function(){var t=$.data(this,ao);t?t.updated(e):t=$.data(this,ao,new hs(this,e))})};var ps="about",fs={appName:"Infor Application Name",content:void 0,copyrightYear:new Date().getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0,showCopyButton:!0};function El(e,t){this.settings=N.mergeSettings(e,t,fs),this.element=$(e),this.init()}El.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=e!==void 0?e.toString():this.settings.appName;var t=this.element.attr("data-about-content");this.settings.content=t!==void 0?t.toString():this.settings.content;var n=this.element.attr("data-copyright-year");this.settings.copyrightYear=n!==void 0?n.toString():this.settings.copyrightYear;var i=this.element.attr("data-device-specs");i&&(this.settings.deviceSpecs=i==="true");var a=this.element.attr("data-product-name");this.settings.productName=a!==void 0?a.toString():this.settings.productName;var r=this.element.attr("data-use-default");r!==void 0&&(this.settings.useDefaultCopyright=r==="true");var o=this.element.attr("data-version");return this.settings.version=o!==void 0?o.toString():this.settings.version,this.defaultCopyright="".concat(L.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){var e=this;this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var t=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon btn-close hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(L.translate("Close"),"'</span>"))).appendTo(t),$.createIconElement({icon:"logo",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(t),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var n=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var i=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(i).appendTo(n)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(n),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(n),this.settings.deviceSpecs){var a=L.currentLocale.name==="fr-FR"||L.currentLocale.name==="fr-CA"?" :":":",r=this.getDeviceSpecs(),o='<span class="platform">'.concat(L.translate("Platform")).concat(a," ").concat(r.os,`</span><br>
        <span class="ds">`).concat(L.translate("Mobile")).concat(a," ").concat(Be.devicespecs.isMobile,`</span><br>
        <span class="locale">`).concat(L.translate("Locale")).concat(a," ").concat(L.currentLocale.name,`</span><br>
        <span class="locale">`).concat(L.translate("Language")).concat(a," ").concat(L.currentLanguage.name,`</span><br>
        <span class="browser">`).concat(L.translate("Browser")).concat(a," ".concat(Be.devicespecs.browserVersionName)," ").concat(Be.devicespecs.currentBrowser," (").concat(Be.devicespecs.browserVersion,`)</span><br>
        <span class="locale">`).concat(L.translate("BrowserLanguage")).concat(a," ").concat(r.locale,`</span><br>
        <span class="cookiesEnabled">`).concat(L.translate("CookiesEnabled")).concat(a," ").concat(r.cookiesEnabled,`</span><br>
        <span class="version">`).concat(L.translate("Version")).concat(a," ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p".concat(L.isRTL()?' dir="rtl"':"","></p>")).html(o).appendTo(n)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",function(){$(this).removeClass("hide-focus")}),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click",attributes:this.settings.attributes}),this.settings.showCopyButton&&$('<button type="button" class="btn-icon" id="copy-to-clipboard" title="'.concat(L.translate("CopyToClipboard"),`">
          <span>`).concat(L.translate("CopyToClipboard"),`</span>
          <svg role="presentation" aria-hidden="true" focusable="false" class="icon">
            <use href="#icon-copy"></use>
          </svg>
        </button>`)).prependTo(this.modal.find(".modal-body-wrapper")).on("click",function(){e.copyToClipBoard()}).tooltip(),this.modal.data("modal").aboutAPI=this,this},copyToClipBoard:function(){var e=document.createElement("div");e.innerHTML=this.modal.find(".modal-body").html(),e.style.position="fixed",e.style.pointerEvents="none",e.style.opacity=0,document.body.appendChild(e),window.getSelection().removeAllRanges();var t=document.createRange();t.selectNode(e),window.getSelection().addRange(t),document.execCommand("copy"),document.body.removeChild(e)},getDeviceSpecs:function(){var e,t,n,i=navigator.appName==="Microsoft Internet Explorer"?navigator.userLanguage:navigator.language;return{browser:(e=navigator.userAgent,t=[],n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE '".concat(t[1])):n[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/))!=null?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!==null&&n.splice(1,1,t[1]),n.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:i}},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this},close:function(){if(this.isBody)this.destroy();else{this.element.trigger("close.about");var e=this.modal.data("modal");e&&e.close(),this.element.trigger("afterclose.about")}},destroy:function(e){if(this.buttons.off(),this.element.off("open.about"),e!==!0){var t=this.modal.data("modal");t&&(t.element.off("beforeopen.about"),t.aboutAPI=null,t.destroy())}this.element.length>0&&$.removeData(this.element[0],ps)},handleEvents:function(){var e=this;return this.element.on("open.about",function(t){t.stopPropagation(),e.element.trigger("click")}),this.buttons.filter('[name="done"], [name="close"]').on("click.about",function(){e.close()}),this.element.trigger("beforeopen.about"),this.modal.data("modal").element.on("beforeopen.about",function(){e.modal.find(".modal-body").scrollTop(0)}),this}},$.fn.about=function(e){return this.each(function(){var t=$.data(this,ps);t?t.updated(e):t=$.data(this,ps,new El(this,e))})};var bc={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(e){var t=$.fn.transitionEndName();return e=N.mergeSettings(void 0,e,bc),this.each(function(){var n,i=this,a=$(this),r=e.direction==="horizontal"?"width":"height",o=r.charAt(0).toUpperCase()+r.slice(1),c=isNaN(e.distance)?"auto":"".concat(parseInt(e.distance,10),"px");function u(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(t,".animateopen")),i.style.transition="",i.style[r]=c,a.trigger("animateopencomplete")}a.one("animateopenstart.animation",function(v){v.stopPropagation(),a.off("".concat(t,".animateopen"))}),a.trigger("animateopenstart"),t&&a.one("".concat(t,".animateopen"),u),a.data("is-animating",!0);var p=this.style[r];this.style[r]=c;var m=getComputedStyle(this)[r];this.style[r]=p,this["offset".concat(o)],this.style.transition="".concat(r," ").concat(e.timing,"ms ").concat(e.transition),n=setTimeout(u,e.timing),this.style[r]=m,(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&u()})};var yc={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(e){var t=$.fn.transitionEndName();return e=N.mergeSettings(void 0,e,yc),this.each(function(){var n,i=this,a=$(this),r=e.direction==="horizontal"?"width":"height",o=r.charAt(0).toUpperCase()+r.slice(1);function c(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(t,".animatedclosed")),i.style.transition="",i.style[r]="0px",a.trigger("animateclosedcomplete")}a.one("animateclosedstart",function(u){u.stopPropagation(),a.off("".concat(t,".animatedclosed"))}),a.trigger("animateclosedstart"),t&&a.one("".concat(t,".animatedclosed"),c),a.data("is-animating",!0),this.style[r]=getComputedStyle(this)[r],this["offset".concat(o)],this.style.transition="".concat(r," ").concat(e.timing,"ms ").concat(e.transition),n=setTimeout(c,e.timing),this.style[r]="0px",(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&c()})},$.fn.isAnimating=function(){return this.each(function(){return $(this).data("is-animating")===!0})};var rr="accordion",Cr=["classic","plus-minus","chevron"],Uo={accordionFocusCallback:function(e,t){return t()},allowOnePane:!0,expanderDisplay:Cr[0],enableTooltips:!0,rerouteOnLinkClick:!0,notificationBadge:!1,source:null,tooltipStyle:"light"};function $l(e){return e.displayChevron!==void 0&&(Pn("expanderDisplay setting","displayChevron setting"),e.displayChevron===!1?e.expanderDisplay=Cr[1]:e.expanderDisplay=Cr[0],delete e.displayChevron),e}function so(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Uo),this.settings=$l(this.settings),this.init()}so.prototype={init:function(e){this.build(e).handleEvents(e).setupTooltips()},build:function(e,t){var n,i,a,r=this,o=this,c=!0;e&&e instanceof jQuery?(n=e.children("a"),a=(i=e.next(".accordion-pane")).children(".accordion-content"),c=!1,this.headers=this.headers.add(e),this.anchors=this.anchors.add(n),this.panes=this.panes.add(i),this.contentAreas=this.contentAreas.add(a)):(this.headers=this.element.find(".accordion-header"),e=this.element.find(".accordion-header"),this.anchors=e.children("a"),n=this.anchors,this.panes=e.next(".accordion-pane"),i=this.panes,this.contentAreas=i.children(".accordion-content"),a=this.contentAreas);var u=$(".accordion-content").find("textarea");u&&u.parents(".accordion-pane").attr("style","display: block");var p=!1;if(e.each(function(){var v=$(this),w=!1,C=v.parent(),A=C.is(".accordion");function S(){A||(w?C.addClass("has-icons"):v.addClass("no-icon"))}C.is(".accordion-section")&&(C=C.parentsUntil(".accordion"),A=!0),v.children("a").find("svg").detach().insertBefore(v.children("a"));var M=v.children(".icon, svg");if(M.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),A&&M.length&&(p=!0),(v.is(".list-item")||!A&&v.find("button").length||!A&&v.find("svg").length)&&(w=!0),v.hasClass("is-disabled")&&v.children("a, button").attr("tabindex","-1"),v.next(".accordion-pane").length){w=!0;var I=v.children(".btn");if(!I.length){I=$('<button class="btn" type="button" tabindex="-1"></button>');var z="insertBefore";o.settings.expanderDisplay!=="plus-minus"&&A&&(v.addClass("has-chevron"),z="insertAfter"),I[z](v.children("a")),v.data("addedExpander",I)}M.length&&o.settings.expanderDisplay==="plus-minus"&&M.appendTo(I);var V=I.children(".icon, .svg, .plus-minus");if(!V.length){if(o.settings.expanderDisplay==="classic"&&A||o.settings.expanderDisplay==="chevron")V=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var U=o.isExpanded(v)?" active":"";V=$('<span class="icon plus-minus'.concat(U,'" aria-hidden="true" role="presentation"></span>'))}V.appendTo(I)}var G={role:"presentation","aria-hidden":"true"};V.is("span")||(G.focusable="false"),V.attr(G),V.is(".chevron")&&A?(v.addClass("has-chevron"),I.insertAfter(v.children("a"))):(v.removeClass("has-chevron"),I.insertBefore(v.children("a"))),o.settings.expanderDisplay==="plus-minus"&&A&&(p=!0),S()}else S()}),p&&this.element.addClass("has-icons"),c&&!this.element.data("updating")){var m=e.filter(".is-selected, .is-expanded");m.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(m=m.first(),this.expand(m)):m.each(function(v){r.expand($(m[v]))}),this.select(m.last()),m.next(".accordion-pane").removeClass("no-transition")}return i.each(function(){var v=$(this),w=v.prev(".accordion-header");w.children("a").attr({"aria-haspopup":"true",role:"button"});var C=v.children(),A=!0;if(C.each(function(M,I){$(I).is(".accordion-header, .accordion-content")&&!$(I).hasClass("filtered")&&(A=!1)}),v[A?"addClass":"removeClass"]("all-children-filtered"),A&&(v.data("ignore-animation-once",!0),o.collapse(w,!1)),!t){var S="0px";o.isExpanded(w)&&(S="auto"),v.attr("style","height: ".concat(S))}}),t||(this.currentlyFiltered=$()),this.createNotificationBadge(),this},createNotificationBadge:function(){this.settings.notificationBadge&&this.element.find(".accordion-header").each(function(e,t){var n=$(t);if(n.children(".notification-badge-container").length<1){var i=n.data();n.notificationbadge({position:i.options.position,color:i.options.color});var a=n.find(".icon"),r=n.find(".notification-badge-container");r.prepend(a),n.prepend(r)}})},handleHeaderClick:function(e,t){if(!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||t.data("is-animating"))e.preventDefault();else{if(!$(e.target).is('[class^="btn"]')){var n=t.children("a");return this.handleAnchorClick(e,n)}e.preventDefault()}},handleAnchorClick:function(e,t){var n,i=this,a=t.parent(".accordion-header"),r=a.next(".accordion-pane"),o=t.attr("ng-reflect-href");if(!e||o||a.is(".module-nav-settings-btn")||e.preventDefault(),!a.length||this.isDisabled(a)||this.isFiltered(a))return!1;if(this.element.triggerHandler("beforeselect",[t])!==!1)return this.originalSelection=t,this.select(t),a.is(".module-nav-settings-btn")||this.closePopups(e),!(n=t.attr("href"))||n===""||n==="#"||i.settings.rerouteOnLinkClick&&(window.location.href=n,0)?r.length?(i.toggle(a),i.focusOriginalType(a),!0):(this.isControllingDetails?r.length||i.element.trigger("drilldown",[a[0]]):(i.orignalSelection=t,i.focusOriginalType(a)),this.element.trigger("selected",a),!0):(this.element.trigger("followlink",[t]),!0)},closePopups:function(e){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each(function(){return $(this).data("popupmenu").close(),e!==void 0&&(e.stopPropagation(),e.stopImmediatePropagation()),!1})},handleExpanderClick:function(e,t){var n=t.parent(".accordion-header");if(n.length&&!this.isDisabled(n)&&!this.isFiltered(n)&&!n.data("is-animating"))return this.originalSelection=t,e&&e.stopPropagation(),this.closePopups(),n.next(".accordion-pane").length?(this.toggle(n),this.select(n),void this.focusOriginalType(n)):this.handleAnchorClick(e,n.children("a"))},handleKeys:function(e){var t=this,n=e.which,i=$(e.target),a=i.parent(),r=a.children('[class^="btn"]').first(),o=a.children("a"),c=document.querySelectorAll(".accordion-pane");function u(m){m||(m=i),t.originalSelection||(t.originalSelection=m)}if(n===9){this.headers.removeClass("is-selected");var p=Nt(c).filter(function(m){return!m.classList.contains("is-expanded")});Nt(c).filter(function(m){return m.classList.contains("is-expanded")}).forEach(function(m){Nt(m.children).forEach(function(v){$(v).hasClass("is-disabled")||($(v).find("a").removeAttr("tabindex"),$(v).find("button").attr("tabindex","-1"))})}),p.forEach(function(m){Nt(m.children).forEach(function(v){$(v).find("a").attr("tabindex","-1"),$(v).find("button").attr("tabindex","-1")})}),i.is("a")&&r.length?u(r):u(o)}return n===32?(e.preventDefault(),i.is('[class^="btn"]')&&(e.stopPropagation(),e.stopImmediatePropagation(),$("html").hasClass("is-firefox"))?void 0:r.length?(u(r),this.handleExpanderClick(null,i)):(u(o),this.handleAnchorClick(null,i))):n===37||n===38?(e.preventDefault(),u(),e.shiftKey?this.ascend(a):this.prevHeader(a)):n===39||n===40?(e.preventDefault(),u(),e.shiftKey?this.descend(a):this.nextHeader(a)):void 0},toData:function(e,t){var n=[],i=this.element.children(".accordion-header");function a(r,o,c,u){var p=$(r),m=$(r).next(".accordion-pane"),v=r.classList.contains("accordion-content"),w={index:"".concat(c!==void 0?"".concat(c,"."):"").concat(o),type:v?"content":"header"};t&&(w.element=r),r.getAttribute("id")&&(w.id=r.getAttribute("id")),v?(w.content="".concat(p.html()),w.contentText="".concat(p.text().trim().replace(/\n|\s{2,}/g," "))):w.text=p.children("a, span").text().trim();var C=p.children(".icon");if(C.length&&(w.icon=C[0].tagName.toLowerCase()==="svg"?C[0].getElementsByTagName("use")[0].getAttribute("href"):""),p.hasClass("is-disabled")&&(w.disabled=!0),m.length){var A=m.children(".accordion-header, .accordion-content"),S=[];if(A.length){var M=S;e&&(M=u),A.each(function(I,z){a(z,I,w.index,M)}),w.children=S}}u.push(w)}return i.length||this.element.find(".accordion-section").each(function(r,o){var c=function(u,p,m){var v={index:"".concat(m!==void 0?"".concat(m,"."):"").concat(p),type:"section"};t&&(v.element=u),u.getAttribute("id")&&(v.id=u.getAttribute("id"));var w=$(u).children(".accordion-header"),C=[];return w.length&&w.each(function(A,S){a(S,A,p,C)}),v.children=C,e?C:v}(o,r,void 0);e?n=n.concat(c):n.push(c)}),i.each(function(r,o){a(o,r,void 0,n)}),n},select:function(e){if(e&&e.length){var t=e,n=t.parent();e.is(".accordion-header")&&(t=(n=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),!this.isDisabled(n)&&!this.isFiltered(n)&&(this.deselectAll(),n.addClass("is-selected"),n.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected"))}},deselect:function(e){if(e&&e.length){var t=e,n=t.parent();e.is(".accordion-header")&&(t=(n=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),n.removeClass("is-selected"),n.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").each(function(i,a){$(a).find(".is-selected").length||$(a).removeClass("child-selected")})}},deselectAll:function(){var e;(e=this.headers)===null||e===void 0||e==null||e.removeClass("child-selected").removeClass("is-selected")},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(e){return!!this.element.hasClass("is-disabled")||!!e&&e.hasClass("is-disabled")},isFiltered:function(e){if(!e||!e.length)return!1;var t=e[0].classList;return t.contains("filtered")&&!t.contains("has-filtered-children")},isExpanded:function(e){if(e&&e instanceof Element&&(e=$(e)),e&&e.length)return e.children("a").attr("aria-expanded")==="true"||e.hasClass("is-expanded")},toggle:function(e){var t=this;!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||this.isAnimating||(this.isAnimating=!0,setTimeout(function(){t.isAnimating=!1},500),this.isExpanded(e)?this.collapse(e):this.expand(e))},expand:function(e,t){if(typeof e=="string"&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var n=this,i=e.next(".accordion-pane"),a=e.children("a"),r=$.Deferred();return this.element.triggerHandler("beforeexpand",[a])===!1?r.reject():(this.callSource(a,o)||o.apply(this),r)}function o(){if(!(i=e.next(".accordion-pane"))||!i.length)return r.reject();var c=e.children(".btn");c.length&&(c.children(".plus-minus, .chevron").addClass("active"),c.children(".audible").text(L.translate("Collapse")));var u=e.parentsUntil(n.element).filter(".accordion-pane").prev(".accordion-header").add(e),p=[];n.settings.allowOnePane&&!t&&n.headers&&n.headers.not(u).each(function(){var w=$(this);n.isExpanded(w)&&p.push(n.collapse(w))});var m=[];function v(w){var C;w&&w.stopPropagation(),(C=$).when.apply(C,m.concat(p)).done(function(){r.resolve()}),i.triggerHandler("afterexpand",[a]),i.css("height","auto"),n.element.trigger("afterexpand",[a])}u&&u.not(e).each(function(){var w=$(this);n.isExpanded(w)||m.push(n.expand(w))}),e.add(i).addClass("is-expanded"),e.children("a").attr("aria-expanded","true"),n.element.trigger("expand",[a]),i.hasClass("no-transition")||this.element.hasClass("no-transition")?v():i.one("animateopencomplete",v).animateOpen()}},expandAll:function(){var e;if(this.settings.allowOnePane!==!0){var t=this,n=$.Deferred(),i=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)||i.push(t.expand(a))}),(e=$).when.apply(e,i).always(function(){n.resolve()}),n}},collapse:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(typeof e=="string"&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var n=this,i=e.next(".accordion-pane"),a=e.children("a"),r=$.Deferred();if(this.element.triggerHandler("beforecollapse",[a])===!1)return r.reject();var o=e.children(".btn");return o.length&&(o.children(".plus-minus, .chevron").removeClass("active"),o.children(".audible").text(L.translate("Expand"))),t&&i.closeChildren&&i.closeChildren(),n.element.trigger("collapse",[a]),i.hasClass("no-transition")||this.element.hasClass("no-transition")?c():i.one("animateclosedcomplete",c).animateClosed(),r}function c(u){u&&u.stopPropagation(),e.add(i).removeClass("is-expanded"),a.attr("aria-expanded","false"),i.triggerHandler("aftercollapse",[a]),n.element.trigger("aftercollapse",[a]),r.resolve()}},collapseAll:function(){var e,t=this,n=$.Deferred(),i=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)&&i.push(t.collapse(a))}),(e=$).when.apply(e,i).always(function(){n.resolve()}),n},callSource:function(e,t){if(!this.settings.source||typeof this.settings.source!="function")return!1;var n=this,i=e.parent(),a=i.next(".accordion-pane"),r={anchor:e,header:i,pane:a};return this.settings.source(r,function(o,c){o!==!0&&n.updated(c),setTimeout(function(){t.apply(n)},1)})},getElements:function(e){var t,n,i,a,r=$(e),o=null;return r.is(".accordion-header")&&(t=r,i=r.children('[class^="btn"]'),n=r.children("a")),r.is(".btn")&&(n=(t=(i=r).parent()).children("a")),r.is("a")&&(i=(t=(n=r).parent()).children(".btn")),a=t.next(".accordion-pane"),t.parent(".accordion-section")&&(o=t.parent(".accordion-section")),{header:t,expander:i,anchor:n,pane:a,section:o}},prevHeader:function(e,t){var n=this.getElements(e),i=n.header.parent().children(),a=i.index(n.header),r=$(i.get(_e.ensureAlphaNumeric(a)-1));if(!i.length||a===0){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);if(n.header.is(":first-child")&&n.section){var o,c=n.section.prev(".accordion-section");(c.length||(c=n.section.parent().children().last(".accordion-section")).length)&&(o=c.children(),r=$(o[o.length-1]))}r.length||(r=i.last())}for(;r.is(".accordion-content")||this.isDisabled(r)||this.isFiltered(r);){if(r.is(":only-child")||r.is(":first-child"))return this.ascend(n.header);r=r.prev()}if(r.is(".accordion-pane")){var u=r.prev(".accordion-header");if(this.isExpanded(u)&&u.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(u,-1);if(!(r=u).length){var p;if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);var m=(p=n.header.parent(".accordion-section"))===null||p===void 0||p==null?void 0:p.prev(".accordion-section");for(m.length&&(r=$(m.children()[0])),r.length||(r=i.last());r.is(".accordion-content")||this.isDisabled(r)||this.isFiltered(r);)r=r.prev()}}this.focusOriginalType(r)},nextHeader:function(e,t){var n=this.getElements(e),i=n.header.parent().children(),a=i.index(n.header),r=$(i.get(_e.ensureAlphaNumeric(a)+1));if(!i.length||a===i.length-1){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);if(n.header.is(":last-child")&&n.section){var o=n.section.next(".accordion-section");(o.length||(o=n.section.parent().children().first(".accordion-section")).length)&&(r=$(o.children()[0]))}r.length||(r=i.first())}for(;r.is(".accordion-content")||this.isDisabled(r)||this.isFiltered(r);){if(r.is(":only-child")||r.is(":last-child"))return this.ascend(n.header);r=r.next()}if(r.is(".accordion-pane")){var c=r.prev(".accordion-header");if(this.isExpanded(c)&&c.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(c);if(!(r=$(i.get(_e.ensureAlphaNumeric(a)+2))).length){var u;if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);var p=(u=n.header.parent(".accordion-section"))===null||u===void 0||u==null?void 0:u.next(".accordion-section");for(p.length&&(r=$(p.children()[0])),r.length||(r=i.first());r.is(".accordion-content")||this.isDisabled(r)||this.isFiltered(r);)r=r.next()}}this.focusOriginalType(r)},ascend:function(e,t){t||(t=0);var n=e.parent(".accordion-pane"),i=n.prev();if(t===-1&&!(i=n.next(".accordion-header")).length)return n.parent(".accordion").length?this.nextHeader(n.prev().children("a"),!0):this.ascend(n.prev(),-1);this.focusOriginalType(i)},descend:function(e,t){t||(t=0);var n=e.next(".accordion-pane"),i=n.children(".accordion-header").first();return t===-1&&(i=n.children(".accordion-header").last()),i.length?this.isExpanded(i)?this.descend(i,-1):void this.focusOriginalType(i):this.focusOriginalType(e)},focusOriginalType:function(e){var t=this,n=function(){var i=e.children('[class*="btn"]');t.headers.not(e).removeClass("is-focused"),t.originalSelection.is('[class*="btn"]')&&i.length?i.first()[0].focus():e.is(".searchfield-wrapper")?(e.find("input")[0].focus(),e.addClass("is-focused")):(e.children("a")[0].focus(),e.addClass("is-focused"))};typeof this.settings.accordionFocusCallback!="function"?n():this.settings.accordionFocusCallback(e,n)},filter:function(e){var t,n=this;if(e){var i=this,a=this.headers.parents().find(".module-nav-accordion");(t=this.headers)===null||t===void 0||t==null||t.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),a.find(".empty-message").remove(),a.find(".module-nav-separator").show(),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var r=e.not(this.currentlyFiltered),o=[],c=$();this.headers.add(this.contentAreas).not(r).not(".module-nav-settings-btn").addClass("filtered");var u=this.headers.parents().find(".module-nav-footer");if(u&&u.closest(".pinned-optional").length===1){var p=this.headers.parents().find(".module-nav-footer");p.find(".filtered").removeClass("filtered").addClass("pinned"),p.prev(".module-nav-separator").addClass("pinned")}r.each(function(w,C){var A=$(C).is(".accordion-content"),S=$(C).parents(".accordion-pane");A&&(c.push($(C)),$(S[0]).prev(".accordion-header").each(function(M,I){return o.indexOf(I)<0&&o.push(I),o})),S.length&&S.prev(".accordion-header").each(function(M,I){return o.indexOf(I)<0&&o.push(I),o})});var m=$(o);m.addClass("has-filtered-children");var v=this.expand(m,!0);$.when(v).done(function(){n.currentlyFiltered=r,i.build(void 0,!0)}),a.find(".module-nav-separator").not(".pinned").hide(),a.length===1&&this.headers.not(".module-nav-settings-btn").not(".pinned").length===this.headers.not(".module-nav-settings-btn").not(".pinned").filter(".filtered").length&&a.find(".module-nav-search-container").append(`<div class="empty-message">
              <div class="card-empty-icon">
          <svg class="icon-empty-state is-slate" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-empty-search-data-new"></use>
          </svg>
        </div>
        <div class="card-empty-title">
          `.concat(L.translate("NoResultsFound"),`
        </div>
      </div>`))}},unfilter:function(e,t){var n,i=this;if(this.currentlyFiltered.length||t){e&&e.length||(e=this.currentlyFiltered);var a=[];(n=this.headers)===null||n===void 0||n==null||n.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered");var r=this.headers.parents().find(".module-nav-accordion");r.find(".empty-message").remove(),r.find(".module-nav-separator").show(),e.each(function(u,p){var m=$(p).parents(".accordion-pane");m.length&&m.prev(".accordion-header").each(function(v,w){return a.indexOf(w)<0&&a.push(w),a})});var o=$(a);o.removeClass("has-filtered-children");var c=[this.collapse(e),this.collapse(o)];$.when(c).done(function(){i.currentlyFiltered=i.currentlyFiltered.not(e)})}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(e,t){this.element.data("updating",!0),t&&(this.settings=N.mergeSettings(this.element[0],t,this.settings),this.settings=$l(this.settings));var n=$(document.activeElement);return $.contains(this.element[0],n[0])||(n=void 0),e&&e instanceof jQuery?this.teardown(e).init(e):this.teardown().init(),n&&n.length&&n.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(e){var t=!1,n=e;return this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),e&&e instanceof jQuery||(n=this.headers,t=!0),n&&n.length&&(n.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each(function(){var i=$(this),a=i.children(".icon"),r=i.data("hidefocus");if(r&&r.destroy(),a.length){var o=a.data("icon");o&&o.destroy()}var c=i.data("addedExpander");c&&(c.remove(),$.removeData(this,"addedExpander"))}),n.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),n.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion")),t&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(e){var t=this,n=null,i=e,a=!1;function r(c,u){var p=function(m){var v="Header";return m.is("a")&&(v="Anchor"),m.is("button")&&(v="Expander"),v}(u);return u.is(".module-nav-settings-btn")||$("body").children().not(".application-menu, .modal-page-container, .module-nav, .page-container, .resize-app-menu-container").closeChildren(),t["handle".concat(p,"Click")](c,u)}e&&e instanceof jQuery||(i=this.headers,a=!0);var o=!1;return i.addClass("hide-focus").off("click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").on("click.accordion",function(c){return r(c,$(this))}).on("focusin.accordion",function(c){var u=$(c.target);t.originalSelection||(t.originalSelection=u),o?o=!1:(i.not($(this)).removeClass("is-focused"),u.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus"))}).on("focusout.accordion",function(){$.contains(this,n)&&!$(this).is($(n))||($(this).removeClass("is-focused"),$(this).addClass("hide-focus"))}).on("keydown.accordion",function(c){t.handleKeys(c)}).on("mousedown.accordion",function(c){o=!0,$(this).addClass("is-focused"),n=c.target}).on("mouseup.accordion",function(){n=null}),i.children('[class^="btn"]').off("click.accordion keydown.accordion").on("click.accordion",function(c){return r(c,$(this))}).on("keydown.accordion",function(c){t.handleKeys(c)}),a&&this.element.off("selected.accordion updated.accordion").on("selected.accordion",function(c){c.stopPropagation()}).on("updated.accordion",function(c,u){c.stopPropagation(),t.updated(u)}),this},hideTooltip:function(){var e=this,t=window;t.tooltip&&(this.removeTooltipData(t.tooltip),t.tooltip.classList.add("is-hidden"),t.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",function(){e.hideTooltip()})},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("spantooltip")&&$.removeData(e[0],"spantooltip")},setupTooltips:function(){var e=this;if(this.settings.enableTooltips){var t,n=this,i=".accordion-header a span";this.element.off("mouseenter.spantooltip",i).on("mouseenter.spantooltip",i,function(){var a;(a=this).style.width="auto",a.offsetWidth>a.parentElement.offsetWidth-parseInt($(a).parent().css("padding-left"),10)&&(a.style.width="",t=setTimeout(function(){$(a).tooltip({trigger:"immediate",content:"".concat(a.innerText),extraClass:e.settings.tooltipStyle==="light"?"tooltip-accordion-style":""})},400))}).off("mouseleave.spantooltip click.spantooltip",i).on("mouseleave.spantooltip click.spantooltip",i,function(){var a;(a=this).style.width="auto",a.offsetWidth>a.parentElement.offsetWidth-parseInt($(a).parent().css("padding-left"),10)&&(a.style.width="",n.hideTooltip(),clearTimeout(t))})}}},$.fn.accordion=function(e){return this.each(function(){var t=$.data(this,rr);t?t.updated(e):t=$.data(this,rr,new so(this,e))})};var wc="actionsheet",xc="ids-actionsheet-root",Dl={actions:[],attributes:[],autoFocus:!0,breakpoint:"phone-to-tablet",displayAsActionSheet:"responsive",overlayOpacity:.7,onSelect:null,onCancel:null,tray:!1,trayOpts:{text:null,icon:null,backgroundColor:"slate"},showCancelButton:!0};function Il(e,t){return this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Dl),this.init()}Il.prototype={init:function(){this.render(),this.handleEvents()},render:function(){var e=this,t=document.querySelector("#".concat(xc));t||this.renderRootElems(),t&&this.rootElem===void 0&&(document.getElementById("ids-actionsheet-root").remove(),this.renderRootElems());var n=this.element[0];if(n.classList.add("ids-actionsheet-trigger"),N.addAttributes(this.element,this,this.settings.attributes,"trigger"),(n.tagName==="BUTTON"||n.className.includes("btn"))&&this.element.button(),!this.actionSheetElem){var i="",a=!1;this.settings.actions.forEach(function(o,c){var u="",p=N.stringAttributes(e,e.settings.attributes,"action-".concat(c));o.icon&&(a=!0,u=$.createIcon({icon:o.icon}));var m='<button class="btn-tertiary ids-action" data-index="'.concat(c,'" ').concat(p,`>
          `).concat(u,`
          <span class="ids-action-text">`).concat(o.text,`</span>
        </button>`);i+=m}),this.settings.showCancelButton&&(i+=`<div class="separator"></div>
        <button class="btn-secondary btn-cancel ids-action">
          <span>Cancel</span>
        </button>`),this.actionSheetElem=document.createElement("div"),this.actionSheetElem.setAttribute("role","dialog"),N.addAttributes($(this.actionSheetElem),this,this.settings.attributes,"sheet");var r=this.actionSheetElem.classList;r.add("ids-actionsheet"),a&&r.add("has-icons"),this.actionSheetElem.insertAdjacentHTML("afterbegin",i),this.rootElem.append(this.actionSheetElem),$(this.actionSheetElem).find("button").button(),this.settings.tray&&this.renderTrayElement()}},trayBreakpoint:function(){this.trayContainer.style.visibility=Yt.isAbove("phone-to-tablet")?"hidden":""},trayTransform:function(){this.trayContainer.style.transform="translate(0, -".concat(this.actionSheetElem.offsetHeight-40,"px)")},renderRootElems:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),n=document.createElement("div");t.id=xc,t.classList.add("ids-actionsheet-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),t.appendChild(n),document.body.appendChild(t),this.rootElem=t,this.overlayElem=n},renderTrayElement:function(){var e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("span");this.settings.trayOpts.icon&&(t.innerHTML=$.createIcon({icon:this.settings.trayOpts.icon}));var i=t.firstChild;n.innerHTML=this.settings.trayOpts.text,e.classList.add("ids-actionsheet-tray-container",this.settings.trayOpts.backgroundColor),t.classList.add("ids-actionsheet-tray-btn"),n.classList.add("ids-actionsheet-tray-btn-text"),e.appendChild(t),t.appendChild(n),this.rootElem.insertBefore(e,this.rootElem.childNodes[1]),this.trayContainer=e,this.trayBtn=t,this.trayIconElem=i,this.trayTextElem=n,this.trayBreakpoint()},handleEvents:function(){var e=this;this.element.add($(this.trayBtn)).on("click.trigger",function(){e.visible||(e.open(),e.trayContainer&&e.trayTransform())}),$("body").on("resize",function(){e.settings.tray&&(e.trayBreakpoint(),e.visible?e.trayTransform():e.trayContainer.style.removeProperty("transform"))})},get visible(){return this.popupmenuAPI?this.hasOpenPopupMenu:this.rootElem.classList.contains("engaged")},get actionElems(){return Nt(this.actionSheetElem.querySelectorAll("button")).filter(function(e){return!e.classList.contains("btn-cancel")})},open:function(){var e=this;this.visible||(this.currentlyNeedsActionSheet?(this.rootElem.classList.add("engaged"),this.overlayElem.removeAttribute("hidden"),window.requestAnimationFrame(function(){e.setOverlayVisibility(),e.addActionSheetOpenEvents(),e.element[0].removeAttribute("aria-hidden"),e.focus()})):this.openPopupMenu())},openPopupMenu:function(){var e=this,t=N.stringAttributes(this,this.settings.attributes,"menu"),n="<ul ".concat(t,">");this.settings.actions.forEach(function(a,r){var o="";a.icon&&(o=$.createIcon({icon:a.icon}));var c='<li class="ids-action-menu-item" data-index="'.concat(r,`">
        <a>
          `).concat(o,`
          <span class="ids-action-text">`).concat(a.text,`</span>
        </a>
      </li>`);n+=c}),n+="</ul>";var i=$(n).insertAfter(this.element);this.element.popupmenu({autoFocus:this.settings.autoFocus,attributes:this.settings.attributes,menu:i,offset:{y:10},trigger:"immediate",removeOnDestroy:!0}),this.hasPopupmenuEvents=!0,$(this.element).on("selected.popupmenu",function(a,r){var o=parseInt($(r.parent()).attr("data-index"),10);if(!isNaN(o)){var c=e.actionSheetElem.children[o];c&&e.doSelect(c,null,!0)}}).on("afteropen.popupmenu",function(){e.focus()}).on("close.popupmenu",function(a,r){r?e.doCancel(null,!1,r):e.close()})},get popupmenuAPI(){return $(this.element).data("popupmenu")},get hasOpenPopupMenu(){var e;return(e=this.popupmenuAPI)===null||e===void 0||e==null?void 0:e.isOpen},close:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.hasPopupmenuEvents)return this.closePopupMenu(t),void(n&&this.focus());this.visible&&(this.removeActionSheetOpenEvents(),this.element[0].setAttribute("aria-hidden","true"),this.rootElem.classList.remove("engaged"),this.trayContainer&&this.trayContainer.style.removeProperty("transform"),this.setOverlayVisibility(),N.waitForTransitionEnd(this.overlayElem,"opacity").then(function(){e.overlayElem.setAttribute("hidden",""),e.triggerCloseEvent(t),n&&e.focus()}))},closePopupMenu:function(e){this.removePopupmenuEvents(),this.triggerCloseEvent(e)},removePopupmenuEvents:function(){this.hasPopupmenuEvents&&($(this.element).off("selected.popupmenu close.popupmenu afteropen.popupmenu"),delete this.hasPopupmenuEvents)},cancel:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.close("cancel",e)},triggerCloseEvent:function(){var e;e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")==="cancel"?jQuery.Event("cancelled"):jQuery.Event("close"),this.element.trigger(e,[$(this.actionSheetElem)])},focus:function(){if(this.settings.autoFocus)if(this.hasOpenPopupMenu){var e=this.popupmenuAPI.menu[0].querySelector("a");e&&(e.focus(),this.popupmenuAPI.highlight($(e)))}else if(this.visible){var t=this.actionSheetElem.querySelector("button");t&&(t.focus(),this.resetFocusState(t))}else this.element[0].focus()},get currentlyNeedsActionSheet(){var e=this.settings.breakpoint,t=this.settings.displayAsActionSheet;return t==="always"||t==="responsive"&&Yt.isBelow(e)},addActionSheetOpenEvents:function(){var e=this;$(document).on("click.disengage",function(t){t.target.closest(".ids-actionsheet")||e.doCancel(null,!1,!1)}),$(this.actionSheetElem).on("click.action","button",function(t){var n=t.currentTarget;n.classList.contains("btn-cancel")?e.doCancel(n,!1,!0):e.doSelect(n,!0),e.focus()}).on("keyup.action",function(t){t.target.closest(".ids-actionsheet")&&t.key==="Escape"&&e.doCancel(null,!1,!1)}).on("focusin.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))}).on("focusout.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))})},doSelect:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=$(e);typeof this.settings.onSelect=="function"&&this.settings.onSelect(i),this.close(null,n),t&&$(this.element).trigger("selected",[i,null,!0])},doCancel:function(e,t,n){var i=$(e);typeof this.settings.onCancel=="function"&&this.settings.onCancel(i),this.cancel(n),t&&$(this.element).trigger("cancelled",[i])},resetFocusState:function(e){var t=$(e);t.data("hide-focus")||t.hideFocus(),t.addClass("hide-focus")},removeActionSheetOpenEvents:function(){$(document).off("click.disengage"),$(this.actionSheetElem).off("click.action keyup.action")},setOverlayVisibility:function(){var e=0;this.visible&&(e=this.settings.overlayOpacity),this.overlayElem.style.opacity=e?"".concat(e):""},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.visible&&this.close(),this.element.add($(this.trayBtn)).off("click.trigger"),this.actionSheetElem&&$(this.actionSheetElem).find("button").destroy&&($(this.actionSheetElem).find("button").destroy(),this.actionSheetElem.remove()),this.element[0].classList.remove("ids-actionsheet-trigger")},destroy:function(){this.teardown(),$.removeData(this.element[0],"actionsheet")}},$.fn.actionsheet=function(e){return this.each(function(){var t=$.data(this,wc);return t?t.updated(e):t=$.data(this,wc,new Il(this,e)),t})};var na={};function Cc(e,t){var n=function(i){return i&&!(i instanceof jQuery)}(e);return!!n&&e[t]!==void 0&&e[t]!==null}function Sd(e,t){return!!function(n,i){return Cc(n,i)&&typeof n[i]=="function"}(e,t)&&(e[t](),!0)}function kc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3&&arguments[3]!==void 0&&arguments[3],a=[];return typeof t=="string"&&(t=[t]),$.each(e,function(r,o){$.each($(o).data(),function(c,u){n.length&&n.indexOf(c)===-1||t.forEach(function(p){(i&&Sd(u,p)||Cc(u,p))&&a.push({elem:$(o),control:u})})})}),a}function Ml(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e&&t){var i=kc((e=$(e)).find("*").add(e).not(n.join(", ")),t,void 0,!0);return e.trigger("sift-".concat(t,"-complete"),[i]),e}}na.attachFilter=function(e,t){if(this.element.length){var n=this;e==="applicationmenu"&&(this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.find(".searchfield")));var i=$(n.searchEl);i.is(".searchfield-wrapper")&&(i=i.find(".searchfield")),i&&typeof $.fn.searchfield=="function"&&(t instanceof HTMLElement&&t.classList.add("has-searchfield"),$(i).searchfield({clearable:!0,filterMode:n.settings.filterMode,source:function(a,r,o){var c;r(a,(c=n.accordionAPI)===null||c===void 0||c==null?void 0:c.toData(!0,!0),o)},searchableTextCallback:function(a){return a.text||a.contentText||""},resultIteratorCallback:function(a){return a.highlightTarget="text",a},clearResultsCallback:function(){var a,r=$(n.searchEl.querySelector(".searchfield")||n.searchEl).data("searchfield"),o=!0;e!=="applicationmenu"||r.isFocused||(o=!1),r&&o&&((a=n.accordionAPI)===null||a===void 0||a==null||a.unfilter())},displayResultsCallback:function(a,r){return na.filterResultsCallback.apply(n,[i,n.accordionAPI,a,r])}}))}},na.attachFilterEvents=function(e){var t=this;this.settings.filterable===!0&&this.searchEl&&($(this.searchEl).on("complete.".concat(e),function(n){t.handleSearchfieldInputEvent(n)}),$(this.searchEl).on("cleared.".concat(e),function(){var n;(n=t.accordionAPI)===null||n===void 0||n==null||n.unfilter(null,!0)}))},na.filterResultsCallback=function(e,t,n,i){if(!n)return t==null||t==null||t.unfilter(),void i();var a=$(n.map(function(r){return r.element}));t==null||t==null||t.filter(a,!0),$(e).triggerHandler("filtered",[n]),i()},na.handleSearchfieldInputEvent=function(){var e;if(this.searchEl){var t=$(this.searchEl).val();t&&t!==""||(e=this.accordionAPI)===null||e===void 0||e==null||e.unfilter(null,!0)}},na.teardownFilter=function(e){var t;this.searchEl&&($(this.searchEl).off(["cleared.".concat(e),"complete.".concat(e)].join(" ")),(t=this.searchAPI)===null||t===void 0||t==null||t.destroy())};var Tc=[".expandable-card",".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],Ll=[];$.fn.destroy=function(){return Ml($(this),"destroy")},$.fn.closeChildren=function(){return Ml($(this),"close",Tc)},$.fn.handleResize=function(){return Ml($(this),"handleResize",Ll)};var Go="expandablearea",Pl={trigger:null,bottomBorder:!1,animationSpeed:300,attributes:null};function Yo(e,t){this.settings=N.mergeSettings(e,t,Pl),this.element=$(e),this.init()}Yo.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&this.id!==void 0||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var e,t,n=this,i=this.element.hasClass("is-expanded");return(this.expander||this.header).attr({"aria-expanded":"".concat(i),"aria-controls":"".concat(this.id,"-content")}),this.header.attr({id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=(e=this,this.isCard===!0?((t=e.header.find("expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(L.translate("ShowMore"),"</span>")+"</a>").appendTo(e.header)),t):((t=e.footer.find(".expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(L.translate("ShowMore"),"</span>")+"</a>").prependTo(e.footer)),t)),this.expander.attr("href","#").hideFocus(),this.expander.attr("role","button"),this.expander.length===0&&(typeof this.settings.trigger=="string"?this.expander=$("#".concat(this.settings.trigger)):this.settings.trigger instanceof jQuery?this.expander=this.settings.trigger:this.expander=$(this.settings.trigger)),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),i&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",function(){n.content.removeClass("no-transition")}),this.open()),i||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",function(){n.content.removeClass("no-transition")}),this.close()),this.resize(),N.addAttributes(this.element,this,this.settings.attributes,"",!0),N.addAttributes(this.header,this,this.settings.attributes,"header",!0),N.addAttributes(this.content,this,this.settings.attributes,"content",!0),N.addAttributes(this.expander,this,this.settings.attributes,"expander",!0),N.addAttributes(this.footer,this,this.settings.attributes,"footer",!0),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var e=this;this.element.triggerHandler("beforeexpand",[this.element])!==!1&&(this.element.addClass("is-expanded"),(this.expander||this.header).attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(L.translate("ShowLess")?L.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",function(){e.element.triggerHandler("afterexpand",[e.element])}).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var e=this;this.element.triggerHandler("beforecollapse",[this.element])!==!1&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(L.translate("ShowMore")?L.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",function(){e.element.removeClass("is-expanded"),(e.expander||e.header).attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.content[0].style.display="none"}).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var e=this,t=$("html").hasClass("ie11");setTimeout(function(){t&&e.element.hasClass("is-expanded")?e.element.css("min-height",e.element.children(".expandable-pane").outerHeight(!0)+e.element.children(".expandable-footer").outerHeight(!0)):t&&!e.element.hasClass("is-expanded")&&e.element.css("min-height","auto")},300)},resize:function(){var e=this;$("body").on("resize.expandablearea",function(){e.applyIE11Fix()})},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){var e;(this.expander||this.header).removeAttr("aria-controls").removeAttr("aria-expanded"),this.header.children("a").off(),(e=this.header)===null||e===void 0||e==null||e.off(),this.header.removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],Go)},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this},handleEvents:function(){var e=this;return this.expander.on("click.expandablearea",function(t){e.isDisabled()||(t.preventDefault(),e.toggleExpanded())}),this}},$.fn.expandablearea=function(e){return this.each(function(){var t=$.data(this,Go);t?t.updated(e):t=$.data(this,Go,new Yo(this,e))})};var Ko=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"],Xo={caseSensitive:!1,filterMode:Ko[3],searchableTextCallback:void 0};function ro(e){this.settings=N.mergeSettings(void 0,e,Xo),this.init()}ro.prototype={init:function(){for(var e,t,n,i=[{setting:this.settings.filterMode,limits:Ko,preset:Xo.filterMode}],a=0;a<i.length;a++)e=i[a].setting,t=i[a].limits,n=i[a].preset,$.inArray(e,t)===-1&&(e=n);return this.settings.filterMode===Ko[0]&&Pn("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(e,t,n){if(!e||!($.isArray(e)||e instanceof jQuery)||!t||typeof t!="string"||!t.length)return!1;var i=this,a=[],r=!1;this.settings.caseSensitive||(t=t.toLowerCase()),$.isArray(e)||(e instanceof jQuery||at(e)==="object")&&(e=$.makeArray(e),r=!0);var o=["node","_isFilteredOut"];function c(u){var p,m,v,w=!0;if(typeof i.settings.searchableTextCallback=="function")return i.settings.searchableTextCallback(u);typeof u=="string"?p=u:u instanceof $?p=$(u).text():u instanceof HTMLElement?(w=!1,p=u.innerText):(m=u,v="",Object.keys(m).forEach(function(A){if(!(n&&o.indexOf(A)>0)){var S=v.length?" ":"";v+="".concat(S).concat(m[A])}}),p=v);var C=p;return w&&(C=_e.sanitizeHTML(p)),C}return e.forEach(function(u){var p=c(u);i.settings.caseSensitive||(p=p.toLowerCase().trim());var m=!1;if(["startsWith","wordStartsWith"].indexOf(i.settings.filterMode)>-1&&(m=function(A,S){for(var M=A.split(" "),I=0;I<M.length;I++)if(M[I].indexOf(S)===0)return!0;return A.indexOf(S)===0||S.indexOf(" ")>0&&A.indexOf(S)>0}(p,t)),i.settings.filterMode==="phraseStartsWith"&&p.indexOf(t)===0&&(m=!0),i.settings.filterMode==="contains"&&p.indexOf(t)>=0&&(m=!0),i.settings.filterMode==="keyword")for(var v=t.split(" "),w=0;w<v.length;w++){var C=v[w];if(p.indexOf(C)>=0){m=!0;break}}i.settings.filterMode===null&&(m=!0),m&&a.push(u)}),r&&(a=$(a)),!(!r&&!a.length)&&a},updated:function(e){return this.settings=N.mergeSettings(void 0,e,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var Xn={compile:function e(t,n,i,a){var r,o=e,c="";function u(m,v){var w=v;return m=m[(v=v.pop?v:v.split(".")).shift()]||m[w],0 in v?u(m,v):m}n=Array.isArray(n)?n:n?[n]:[],n=a?0 in n?[]:[1]:n;var p=function(){var m,v="",w=0,C=at(n[r])==="object"?n[r]:{};(C=N.extend({},i,C))[""]={"":n[r]},t.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(A,S,M,I,z,V,U){w?v+=w&&!z||w>1?A:S:(c+=S.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(G,J,te,de,H,he){return J?u(C,J):de?u(C,he):H?o(u(C,he),C):te?"":new Option(u(C,he)).innerHTML}),m=V),z?--w||(U=u(C,U),/^f/.test(at(U))?c+=U.call(C,v,function(G){return o(G,C)}):c+=o(v,U,C,m),v=""):++w})};for(r=0;r<n.length;r++)p();return c}},Tn="autocomplete",Ac={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(e,t){var n=e,i=!1;if(typeof t.alias=="string"&&e[t.alias]!==void 0&&(i=!0,n=e[t.alias]),t.filterMode==="contains")n=n.replace(new RegExp("("+ot.escapeRegExp(t.term)+")","ig"),"<i>$1</i>");else if(t.filterMode==="keyword")for(var a=t.term.split(" "),r=0;r<a.length;r++){var o=a[r];o&&(n=n.replace(new RegExp("("+ot.escapeRegExp(o)+")","ig"),"<i>$1</i>"))}else{var c=n,u="".concat(c);t.caseSensitive||(u=L.toLowerCase(u));var p=ot.escapeRegExp(t.term),m=u.indexOf(p);m>0?n=c.substr(0,m)+"<i>"+c.substr(m,p.length)+"</i>"+c.substr(p.length+m):m===0&&(n="<i>"+c.substr(0,p.length)+"</i>"+c.substr(p.length))}return i?e[t.alias]=n:e=n,e},resultIteratorCallback:function(e,t){var n=typeof e=="string",i={highlightTarget:"label",index:t,listItemId:"ac-list-option".concat(t)};return n?i.label=e:i=N.extend({},i,e),i.hasValue=e.value!==void 0,i.hasValue&&(i.value=e.value),i},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(e){return typeof e=="string"?e:e.label}};function kr(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Ac),this.init()}kr.prototype={init:function(){var e=this.element.attr("data-autocomplete");e&&e!=="source"&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"));var t={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(t):this.listFilter=new ro(t),this.addMarkup(),this.handleEvents()},get isFocused(){var e=document.activeElement,t=this.element[0],n=this.list,i=t.isEqualNode(e),a=n&&n.length&&n[0].contains(e),r=$(this.element).data("clearable")!==void 0&&this.element.parent().find(e);return i||a||r},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"}),N.addAttributes(this.element,this,this.settings.attributes)},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(e,t){var n=this;if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield")&&this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()})===!1)return;var i=this;this.settings.caseSensitive||(e=L.toLowerCase(e)),this.list=$("#autocomplete-list"),this.list.length===0&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),N.addAttributes(this.list,this,this.settings.attributes,"list"),i.settings.attributes&&setTimeout(function(){n.list.find("li a").each(function(c){var u=$(this);N.addAttributes(u,i,i.settings.attributes,"list-option".concat(c))})}),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var a=$(this.element.attr("data-tmpl"));this.tmpl=$(a).length?$(a).text():typeof a=="string"?a:$(this.settings.template).length?$(this.settings.template).text():typeof this.settings.template=="string"?this.settings.template:`<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">
 <a href="#" tabindex="-1">
   <span>{{{label}}}</span>
 </a>
</li>`;var r=this.listFilter.filter(t,e),o=[];r!==!1&&r.forEach(function(c,u){typeof c=="string"&&(c={label:c,value:c});var p=N.extend(!0,{},c);if(p=i.settings.resultIteratorCallback(p,u),i.settings.highlightMatchedText){var m={filterMode:i.settings.filterMode,caseSensitive:i.settings.caseSensitive,term:e};p.highlightTarget&&(m.alias=p.highlightTarget),i.settings.displayResultsCallback||(p=i.settings.highlightCallback(p,m))}o.push(p)}),this.currentDataSet=o,typeof this.settings.displayResultsCallback!="function"?this.handleListResults(e,t,o):this.settings.displayResultsCallback(o,function(){i.element.trigger("listopen",[o])},e)}},handleListResults:function(e,t,n){var i=this;n.forEach(function(w){if(Xn!==void 0){var C=Xn.compile(i.tmpl,w);ue.append(i.list,C,"*")}}),this.element.trigger("beforepopulated",[n]);var a={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(w){return w.wasFlipped===!0&&(i.list.add(i.element).addClass("is-ontop"),w.y+=1),w}}};if(this.previouslyOpened){var r=this.element.data("popupmenu");r&&r.position()}else this.element.addClass("is-open").popupmenu(a).one("close.autocomplete",function(){i.closeList(!0)});var o=i.list.find("li"),c=$(o[0]).find("span").outerWidth()+20;if(c>parseInt(this.element.outerWidth(),10)){for(var u=0;u<o.length;u++)o.width(c+"px");this.maxWidth=c}if(i.settings.autoSelectFirstItem&&i.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[n]).focus(),!this.previouslyOpened){i.list.on("touchend.".concat(Tn," click.").concat(Tn),"a",function(w){i.select(w)}).on("focusout.".concat(Tn),function(){i.checkActiveElement()});var p=i.list.find("a").on("focus.".concat(Tn," touchend.").concat(Tn),function(){i.highlight($(this),p)});if(this.settings.offset){var m=this.list.parent()[0];this.settings.offset.left&&(m.style.left="".concat(parseInt(m.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(m.style.top="".concat(parseInt(m.style.top,10)+this.settings.offset.top,"px"))}}var v=N.getArrayFromList(document.querySelectorAll("#ac-is-arialive"));v&&v.forEach(function(w){w.parentNode.removeChild(w)}),ue.append(i.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[n])},closeList:function(e){if(this.list)if(this.list.off(["click.".concat(Tn),"keydown.".concat(Tn),"touchend.".concat(Tn),"focusout.".concat(Tn)].join(" ")),this.list.find("a").off("focus.".concat(Tn," touchend.").concat(Tn)),this.element.trigger("listclose"),typeof this.settings.clearResultsCallback!="function"){var t=this.element.data("popupmenu");t&&(e||t.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(e){var t=this;if(this.isLoading())return e.preventDefault(),!1;if(!this.listIsOpen())return null;function n(o){o.removeClass("is-selected is-focused")}function i(o){o.addClass("is-selected").find("a").focus()}var a=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),r=function(o){var c=o.filter(".is-selected");return c.length===0&&(c=o.filter(".is-focused")),c}(a);return e.keyCode===40&&this.listIsOpen()&&r.length&&(t.noSelect=!0,n(r),i(a.eq(a.index(r)+1)),e.preventDefault(),e.stopPropagation()),e.keyCode===38&&this.listIsOpen()&&r.length&&(t.noSelect=!0,n(r),i(a.eq(a.index(r)-1)),e.preventDefault(),e.stopPropagation()),e.keyCode!==9&&e.keyCode!==13||!this.listIsOpen()||(r.length?(e.stopPropagation(),e.preventDefault(),t.noSelect=!0,t.select(r)):t.isFocused||t.closeList()),null},handleAutocompleteInput:function(e){var t=this;return t.isLoading()?(e.preventDefault(),!1):(this.getDataFromSource().done(function(n,i){t.currentDataSet=i,t.openList(n,i)}),null)},checkActiveElement:function(){var e=this;setTimeout(function(){var t=document.activeElement;e.listIsOpen()&&$.contains(e.list[0],t)||e.element.is(t)||e.element.trigger("safe-blur")},0)},getDataFromSource:function(){var e=this;if(e.isLoading())return!1;var t,n=this.element,i=$.Deferred();function a(o,c){e.element.triggerHandler("complete"),e.element.trigger("requestend",[o,c])}function r(o,c,u){return e.lastTerm!==o?i.reject(o):(a(o,c),u===!1?i.reject(o):i.resolve(_e.stripTags(o),c))}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(function(){if(!e.isLoading()&&e.isFocused){if((t=n.val())==="")return e.element.data("popupmenu")&&e.element.data("popupmenu").close(),void a();var o=at(e.settings.source);if(e.element.triggerHandler("start"),e.element.trigger("requeststart",[t]),e.lastTerm=t,o==="function")e.settings.source(t,r,e.settings.sourceArguments);else if(o==="object"){var c=$.isArray(e.settings.source)?e.settings.source:[e.settings.source];r(t,c,!0)}else if(e.settings.source)if(e.settings.filterMode==="keyword"){var u=[],p=function(I){if(u.length===0)u=I;else for(var z=0;z<I.length;z++){for(var V=I[z],U=!1,G=0;G<u.length;G++)for(var J=u[G],te=0;te<Object.getOwnPropertyNames(J).length;te++)if(V[Object.getOwnPropertyNames(V)[te]]===J[Object.getOwnPropertyNames(J)[te]]){U=!0;break}U||u.push(V)}},m=function(I){p(I),r(t,u,!0)},v=t.split(" ");v[v.length-1]===""&&v.splice(-1,1);for(var w=0;w<v.length;w++){var C=v[w];if(C.length>0){var A=e.settings.source.toString(),S=$.getJSON(A+C);w<v.length-1?S.done(p).fail(p):S.done(m).fail(m)}}}else{var M=e.settings.source.toString();$.getJSON(M+t).done(function(I){r(t,I,!0)}).fail(function(){r(t,[],!1)})}else i.reject(t)}},e.settings.delay),i},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(e,t){var n=this.element.val(),i=e.text().trim();e.find(".display-value").length>0&&(i=e.find(".display-value").text().trim()),t&&t.length&&t.parent("li").removeClass("is-selected"),e.hasClass("no-results")||(e.parent("li").addClass("is-selected"),this.element.val(i).focus()),this.noSelect=!0,n!==i&&this.element.triggerHandler("change")},select:function(e,t){var n,i,a={},r=!1;if(e instanceof $.Event?(r=!0,n=$(e.currentTarget)):n=e,!n.hasClass("no-results")){n.is("li")&&(i=n,n=n.children("a"));var o=(i=n.parent("li")).attr("data-index"),c=i.attr("data-value");if(this.element.attr("aria-activedescendant",i.attr("id")),t&&t.length||(t=this.currentDataSet),o)a=t[parseInt(o,10)];else if(c)for(var u,p=0;p<t.length;p++)(u=at(t[p])==="object"&&t[p].value!==void 0?t[p].value.toString():t[p].toString())===c&&(at(t[p])==="object"&&(a=t[p]),a.value=u);return a.value&&!a.value.length!==0||(a.value=n.text().trim()),this.highlight(n),this.noSelect=!0,a.label=_e.stripHTML(a.label),a.highlightTarget||(a.highlightTarget="label",a.index=parseInt(o,10),a.listItemId="ac-list-option"+a.index,a.hasValue=!0),this.element.trigger("selected",[n,a]),r&&e.preventDefault(),this.closeList(),this.element.focus(),a}},handleAfterListOpen:function(){var e=this;return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this.list.on("keydown.".concat(Tn),function(t){t.key==="Enter"&&e.handleAutocompleteKeydown(t)}),this},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),e&&e.source&&(this.settings.source=e.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var e=this.element.data("popupmenu");return e&&e.destroy(),this.element.off(["focus.".concat(Tn),"focusout.".concat(Tn),"input.".concat(Tn),"keydown.".concat(Tn),"listopen.".concat(Tn),"requestend.".concat(Tn),"resetfilter.".concat(Tn),"updated.".concat(Tn)].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Tn)},handleEvents:function(){var e=this;this.element.on("updated.".concat(Tn),function(){e.updated()}).on("keydown.".concat(Tn),function(t){e.handleAutocompleteKeydown(t)}).on("input.".concat(Tn),function(t){e.handleAutocompleteInput(t)}).on("focus.".concat(Tn),function(){e.handleAutocompleteFocus()}).on("focusout.".concat(Tn),function(){e.checkActiveElement()}).on("listopen.".concat(Tn),function(){e.handleAfterListOpen()}).on("resetfilter.".concat(Tn),function(){e.resetFilters()})}},$.fn.autocomplete=function(e){return this.each(function(){var t=$.data(this,Tn);if(typeof t=="string"){var n="".concat(t),i=N.extend({},e,{source:n||e.source});t=$.data(this,Tn,new kr(this,i))}else t?t.updated(e):t=$.data(this,Tn,new kr(this,e))})};var Tr="searchfield",zi=[!1,"mobile",!0],or={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:zi[0],collapseSize:void 0,tabbable:!0,autocompleteAttribute:"off"},x=280;function E(e,t){this.element=$(e),this.toolbarParent&&!this.isContainedByFlexToolbar&&t!==void 0&&(t.clearable===void 0&&(t.clearable=!0),t.collapsible===void 0&&(t.collapsible=!0,t.tabbable=!1)),this.settings=N.mergeSettings(e,t,or),this.settings.collapsible&&(this.settings.tabbable=!1),this.init()}E.prototype={get toolbarParent(){var e=this.element.parents(".toolbar"),t=this.element.parents(".flex-toolbar");if(!(e.add(t).length<1))return t.length>0?t.first()[0]:e.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var e=this.element.closest(".module-tabs");return e.length?e.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return this.settings.collapsible!==!1},get isCurrentlyCollapsible(){return this.settings.collapsible===!0||this.settings.collapsible==="mobile"&&Yt.isBelow("phone-to-tablet")},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var e;return this.isContainedByFlexToolbar&&(e=$(this.element).data("toolbarflexitem")),e},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=N.uniqueId(this.element,Tr)),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var e=this.element.attr("data-autocomplete");e&&e!=="source"&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.settings.placeholder&&this.element.attr("placeholder",this.settings.placeholder);var t=this.settings.autocompleteAttribute;typeof t=="string"&&t.length?this.element.attr("autocomplete","".concat(_e.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();n&&n!==""||(n=L.translate("Keyword")),this.element.attr({"aria-label":n}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.isInlineLabel?this.wrapper=this.inlineLabel.addClass("searchfield-wrapper"):this.wrapper=this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var i="remove";this.settings.collapsible&&this.settings.collapseSize&&(i="add"),this.wrapper[0].classList[i]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var a,r=["context","alternate"],o=0;o<r.length;o++)this.element.hasClass(r[o])&&(a=r[o],this.wrapper.addClass(a),this.element.removeClass(a));this.settings.collapsibleOnMobile===!0&&(this.settings.collapsible=zi[1]),this.wrapper[0].classList[this.isCurrentlyCollapsible?"remove":"add"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),N.addAttributes(this.element,this,this.settings.attributes,"",!0),N.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var c=this.wrapper.find(".icon:not(.icon-dropdown)");if(c&&c.length||(c=$.createIconElement("search")),c[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),c.appendTo(this.categoryButton),c=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var u=c.find(".icon-dropdown");if(u.length||(u=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),u.appendTo(c),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>'));var p=this.settings.categoryMultiselect?"is-multiselectable":"is-selectable";this.list.addClass(p);var m="is-selectable";this.settings.categoryMultiselect||(m="is-multiselectable"),this.list.removeClass(m),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var v=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){v.isFocused&&v.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$(`
          <button class="btn-secondary collapse-button" type="button">
            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
              <use href="#icon-exit-fullview"></use>
            </svg>
            <span class="audible">`.concat(L.translate("Collapse"),`</span>
          </button>
        `))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var w=this.wrapper.next(".go-button");w.length||(w=this.wrapper.find(".go-button")),w.length&&(this.settings.showGoButton=!0,this.goButton=w,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$(`
          <button class="btn-secondary go-button">
            <span>`.concat(this.settings.goButtonCopy||L.translate("Go",{showBrackets:!1}),`</span>
          </button>
        `))),this.goButton[0].setAttribute("id",N.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton),this.goButton.button()):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&this.makeClearable(),this.settings.button&&(this.wrapper.addClass("has-custom-button"),this.customButton=$('<button class="btn-icon custom-button"></button>'),this.customButton.append($.createIconElement(this.settings.button.icon)),this.element.after(this.customButton));var C=this,A=new Gt({duration:1,updateCallback:function(){},timeoutCallback:function(){C.calculateSearchfieldWidth()}});Hn.register(A);var S=0;return $("body").on("resize.".concat(this.id),function(){C.wrapper.parents(".splitter-container").length>0&&(C.wrapper.width()>=C.wrapper.parent().width()||S>=C.wrapper.parent().width()?C.wrapper.width("".concat(C.wrapper.parent().width()-.1*C.wrapper.parent().width(),"px")):C.wrapper.css("width","")),C.calculateSearchfieldWidth()}),this.settings.collapsible===!1&&this.expand(!0),S=C.wrapper.width(),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||!this.settings.collapsible&&!this.isContainedByFlexToolbar||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.wrapper[0].classList[this.isCurrentlyCollapsible?"remove":"add"]("non-collapsible"),this.shouldBeFullWidth())return this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused?(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded?void 0:void this.expand(!0)):(this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth());this.appendToButtonset(),this.isFocused||this.settings.collapsible==="mobile"?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var e=this,t=new Gt({duration:1,updateCallback:function(){},timeoutCallback:function(){e.focusElem&&(e.focusElem.focus(),delete e.focusElem)}});Hn.register(t)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),N.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),N.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var e=this.wrapper.closest(".header"),t=!1;return e.length&&(t=e.width()<Yt.phone),t||Yt.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return this.settings.collapsible!==!0&&(this.settings.collapsible==="mobile"||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=N.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},hasCustomButton:function(){return this.settings.button&&this.customButton&&this.customButton.length},setupEvents:function(){var e=this,t=this;return t.element.on("updated.".concat(this.id),function(n,i){t.updated(i)}).on("focus.".concat(this.id),function(n){t.handleFocus(n)}).on("blur.".concat(this.id),function(n){t.isContainedByFlexToolbar&&t.handleSafeBlur(n)}).on("click.".concat(this.id),function(n){t.handleClick(n)}).on("keydown.".concat(this.id),function(n){t.handleKeydown(n)}).on("beforeopen.".concat(this.id),function(n,i){t.handlePopupBeforeOpen(n,i)}).on("safe-blur.".concat(this.id),function(){t.handleSafeBlur()}).on("listclose.".concat(this.id),function(){t.handleSafeBlur()}).on("input.".concat(this.id),function(){t.checkContents()}),t.wrapper.on("mouseenter.".concat(this.id),function(){$(this).addClass("is-hovered")}).on("mouseleave.".concat(this.id),function(){$(this).removeClass("is-hovered")}),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),function(n,i){t.handleCategorySelected(n,i)}).on("focus.".concat(this.id),function(n){t.handleCategoryFocus(n)}).on("blur.".concat(this.id),function(){t.handleSafeBlur()}).on("close.".concat(this.id),function(){t.handleSafeBlur()}).on("beforeopen.".concat(this.id),function(n,i){t.handlePopupBeforeOpen(n,i)}),t.hasGoButton()&&t.goButton.on("click.".concat(this.id),function(n){return t.handleGoButtonClick(n)}).on("click.".concat(this.id),function(n){return t.handleGoButtonFocus(n)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),t.hasCustomButton()&&this.customButton.on("click.".concat(this.id),function(n){return t.settings.button.click(n,t.element.val())}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),function(n){t.handleFocus(n)}).on("focusout.".concat(this.id),function(n){t.handleBlur(n)}).on("keydown.".concat(this.id),function(n){t.handleKeydown(n)}).on("collapse.".concat(this.id),function(){t.collapse()}),$("body").on("breakpoint-change.".concat(this.id),function(){t.adjustOnBreakpoint()}),t.adjustOnBreakpoint()):($("body").on("breakpoint-change.".concat(this.id),function(){t.simpleAdjustOnBreakpoint()}),t.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),function(n){t.collapseResponsive(n)}).on("click.".concat(this.id),function(n){t.collapseResponsive(n)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),function(){!t.isFocused&&t.isCurrentlyCollapsible&&t.collapse()}).on("rendered.".concat(this.id),function(){t.element.removeClass("no-transition no-animation"),t.wrapper.removeClass("no-transition no-animation")}),t.element.on("beforepopulated.".concat(this.id),function(n,i){i.length>0?t.settings.showAllResults&&t.addMoreLink():t.addNoneLink()}),t.settings.clearable&&(t.element.on("cleared.".concat(this.id),function(){t.autocomplete&&t.autocomplete.closeList(),delete t.settings.value}),t.xButton.on("blur.".concat(this.id),function(n){t.xButton.hasClass("collapsed")||t.handleSafeBlur(n)})),t.element.on("listopen.".concat(this.id),function(){var n=$("#autocomplete-list");t.wrapper.addClass("popup-is-open"),t.element.on("selected.".concat(e.id),function(i,a,r){if(a.hasClass("more-results")){var o=t.settings.allResultsCallback;o&&typeof o=="function"&&o(r)}}),n.find(".more-results, .no-results").on("focus.".concat(e.id),function(){var i=$(this);n.find("li").removeClass("is-selected"),i.hasClass("no-results")||(i.parent("li").addClass("is-selected"),t.element.val(""))})}).on("listclose.".concat(this.id),function(){var n=$("#autocomplete-list");t.element.off("selected.".concat(e.id)),n.off("focus.".concat(e.id))}),Be.browser.isSafari()&&this.xButton&&(this.xButton.on("mouseover.clearable",function(){e.closeButtonHover=!0}),this.xButton.on("mouseleave.clearable",function(){e.closeButtonHover=!1})),this},setAsActive:function(e,t){var n=this;if(e||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var i=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&i.push("is-open")),i.forEach(function(a){n.wrapper[0].classList.add(a)}),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||t===!0&&this.element.focus()}},get isFocused(){var e=document.activeElement,t=this.wrapper[0];if(this.settings.tabbable&&t.contains(e)&&$(e).is("button.close")||Be.browser.isSafari()&&this.closeButtonHover&&!$(e).is("button.close")||t.contains(e))return!0;if(this.autocomplete){var n=this.autocomplete.list;if(n&&n[0].contains(e))return!0}return this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length?!0:!!(this.xButton&&this.xButton.length&&this.xButton.has(e).length)||!!(this.customButton&&this.customButton.length&&this.customButton.has(e).length)},hasFocus:function(){return Pn("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var e=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new Gt({duration:1,updateCallback:function(){},timeoutCallback:function(){e.isFocused?delete e.settings.value:(e.settings.value=$(e.element).val(),e.removeDocumentDeactivationEvents(),e.clearResponsiveState(),e.isCurrentlyCollapsible?e.collapse():e.isContainedByFlexToolbar&&(e.settings.collapsible||Yt.isBelow("phone-to-tablet"))?e.wrapper[0].classList.remove("is-open"):e.wrapper[0].classList.remove("has-focus","active"))}}),Hn.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(this.hasDeactivationEvents!==!0){var e=this;$(document).on("click.".concat(this.id),function(t){e.handleOutsideClick(t)}).on("keydown.".concat(this.id),function(t){e.handleOutsideKeydown(t)}),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(e){var t=e.target;this.isSearchfieldElement(t)||this.handleSafeBlur()},handleKeydown:function(e){var t,n=e.which,i=e.key;n===27&&Be.browser.isIE11()&&e.preventDefault(),e.ctrlKey&&n===8&&this.element.val(""),n===9&&this.handleSafeBlur(),this.isContainedByFlexToolbar&&((t=this.toolbarFlexItem)===null||t===void 0||(t=t?.toolbarAPI)===null||t===void 0||(t=t?.items)===null||t===void 0||t==null?void 0:t.length)>1&&["ArrowUp","Up","ArrowDown","Down"].indexOf(i)>-1&&this.collapse()},handleOutsideKeydown:function(e){var t=e.which,n=e.target;t!==9||this.isSearchfieldElement(n)||this.handleSafeBlur()},handlePopupBeforeOpen:function(e,t){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!t)return!1;var n=this.wrapper.hasClass("context")?"addClass":"removeClass",i=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return t[n]("context"),t[i]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(e){var t=this.settings.goButtonAction;if(typeof t=="function"){var n,i=this.element.val();return this.hasCategories()&&(n=this.getCategoryData()),t(e,i,n)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(e){if(this.settings.showCategoryText&&this.categoryButton.length){var t="",n=this.wrapper.find(".btn"),i=n.find("span");if(i&&i.length||(i=$('<span class="category"></span>').insertAfter(n.find(".icon").first())),i.empty(),typeof e=="string"&&e.length)i.text(e.trim());else{var a=this.getSelectedCategories();a.length&&(t=a.length>1?"".concat(a.length," ").concat(L.translate("Selected")):a.text().trim(),i.text(t))}}},isSearchfieldElement:function(e){return!!($.contains(this.wrapper[0],e)||this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)},getFillSize:function(e,t){var n,i,a;function r(u){if(!u)return 0;if(!isNaN(parseInt(u,10)))return parseInt(u,10);if(u instanceof jQuery){if(!u.length)return 0;u.is(".title")&&(u=u.next(".buttonset")),u=u[0]}return u}function o(u,p){if(!isNaN(u))return u??0;p&&typeof p=="string"||(p="left");var m,v=["left","right"];return $.inArray(p,v)===-1&&(p=v[0]),(u instanceof HTMLElement||u instanceof SVGElement)&&(m=u.getBoundingClientRect()),m[p]}if(e=r(e),t=r(t),n=o(e),i=o(t,(a="left",(e===t||$(t).length&&$(t).is(".buttonset"))&&(a="right"),a)),!n&&!i)return x;var c=i-n;return c<=x?x:c>=450?450:c},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var e=0,t=this.wrapper;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var n=window.getComputedStyle(this.categoryButton[0]);e+=this.categoryButton.width()+(parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10))+2*parseInt(n.borderLeftWidth,10),this.element.parents(".header").length===1&&Yt.isBelow("phone-to-tablet")&&(e+=40)}if(this.hasGoButton()){var i=window.getComputedStyle(this.goButton[0]);e+=this.goButton.width()+parseInt(i.borderRightWidth,10)}if(e>0){var a=t.hasClass("alternate")?2:0;this.input.style.width="calc(100% - ".concat(e+a,"px)")}delete this.openWidth},calculateOpenWidth:function(){var e,t=this.element.parents(".toolbar").children(".buttonset"),n=this.wrapper.next();if(t.length){if(n.is(".title")&&(n=t),this.shouldBeFullWidth()){var i="100%";return Yt.isBelow("desktop")&&(i="90%"),e=i,$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(e="calc(".concat(i," - 1px)")),void(this.openWidth=e)}var a=t.offset().left+10,r=n;r.length||(r=t.offset().left+10+t.outerWidth(!0)),e=this.getFillSize(a,r),this.openWidth="".concat(e-6,"px")}},calculateSearchfieldWidth:function(){var e,t=this.element[0].getAttribute("style"),n=this.element.parents(".field-short").length>0,i="100%",a=0;t&&this.element[0].removeAttribute("style");var r,o=window.getComputedStyle(this.element[0]);o.width&&!this.isContextSearch&&(i=o.width),this.hasCategories()&&!n&&(a+=this.categoryButton.outerWidth(!0),this.element.parents(".header").length===1&&Yt.isBelow("phone-to-tablet")&&(a+=40)),this.hasGoButton()&&(a+=this.goButton.outerWidth(!0)),a>0&&(r=this.element[0].parentElement!=null&&(this.element[0].parentElement.classList.contains("alternate")||this.isContainedByFlexToolbar),e="calc(".concat(r?"100%":i," - ").concat(a,"px)")),e&&(this.element[0].style.width=e)},handleCategorySelected:function(e,t){this.element.trigger("selected",[t]),this.settings.showCategoryText&&(this.setCategoryButtonText(e,t.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(e){var t=this.getCategories(),n=[];return t.each(function(){var i=this.classList.contains("is-checked");if(e!==!0||i!==!1){var a={name:this.innerText,checked:i};this.id&&(a.id=this.id);var r=this.getAttribute("data-value");r!==void 0&&(a.value=r),n.push(a)}}),n},updateCategories:function(e){this.settings.categories=e,this.setCategories(this.settings.categories)},setCategories:function(e){this.list.empty();var t=this,n=["string","number"],i=!1;e.forEach(function(r){if(typeof r=="string"&&(r={name:r}),r.name){var o="";typeof r.id=="string"&&r.id.length&&(o=' id="'.concat(r.id,'"'));var c="";n.indexOf(at(r.value))>-1&&(c=' data-value="'.concat(r.value,'"'));var u="";r.checked===!0&&i!==!0&&(u=' class="is-checked"',t.settings.categoryMultiselect||(i=!0)),t.list.append("<li".concat(u).concat(o).concat(c,'><a href="#">').concat(r.name,"</a></li>"))}});var a=this.categoryButton.data("popupmenu");a&&typeof a.updated=="function"&&a.updated()},expand:function(e){var t=this,n=this;return new Promise(function(i){if(n.isExpanded||n.isExpanding||n.isCollapsing)i();else{var a=!n.shouldBeFullWidth();n.isExpanding=!0,a||n.appendToParent(),n.wrapper.removeAttr("style"),n.input.removeAttribute("style");var r=0;n.buttonsetElem&&(r=parseInt(window.getComputedStyle(n.buttonsetElem).width,10));var o={buttonset:r+x};t.isContainedByFlexToolbar||t.wrapper[0].classList.add("is-open"),t.calculateOpenWidth(),t.setOpenWidth(),(!e||Be.os.name==="ios"||n.isFocused&&document.activeElement!==n.input)&&(n.focusElem&&(n.focusElem=n.input),n.element.parents(".flex-toolbar").length||n.input.focus());var c=[];o&&c.push(o),n.element.trigger("beforeexpand"),$(n.toolbarParent).triggerHandler("recalculate-buttons",c);var u=new Gt({duration:10,updateCallback:function(){},timeoutCallback:function(){$(n.toolbarParent).triggerHandler("recalculate-buttons",c),n.element.trigger("expanded"),delete n.isExpanding,n.isExpanded=!0,n.settings.clearable&&n.xButton.removeClass("collapsed"),!n.isCurrentlyCollapsible||n.isFocused||n.focusElem||n.handleSafeBlur()}});Hn.register(u)}})},collapse:function(){var e=this,t=this;return new Promise(function(n){if(t.isExpanded||!t.isExpanding||t.isCollapsing){t.isCollapsing=!0,t.wrapper.removeAttr("style"),t.appendToButtonset(),t.checkContents(),t.toolbarParent&&t.setInitalWidth(),t.clearResponsiveState(),t.wrapper.removeClass("is-open"),t.wrapper.removeClass("active"),Be.browser.isIE11&&t.wrapper[0].classList.remove("is-open"),setTimeout(function(){!e.isContainedByFlexToolbar&&e.isFocused||t.wrapper[0].classList.remove("has-focus")},300),t.categoryButton&&t.categoryButton.length&&t.categoryButton.data("popupmenu").close(!1,!0),t.element.trigger("beforecollapse"),delete t.isExpanded,delete t.isExpanding;var i=new Gt({duration:10,updateCallback:function(){},timeoutCallback:function(){delete t.isCollapsing,$(t.toolbarParent).triggerHandler("recalculate-buttons"),t.element.trigger("collapsed"),t.settings.clearable&&t.xButton.addClass("collapsed"),n()}});Hn.register(i)}else n()})},collapseResponsive:function(e){if(this.previouslyCollapsedByKey&&e.type==="click")delete this.previouslyCollapsedByKey;else{var t,n=this,i=1;e&&!e.key&&(i=0,this.toolbarFlexItem&&(t=this.toolbarFlexItem)!==null&&t!==void 0&&t?.focused&&(i=1)),e.type==="keydown"&&(this.previouslyCollapsedByKey=!0),this.collapse().then(function(){n.wrapper.trigger("collapsed-responsive",[i])})}},get hasText(){return(this.input.value?this.input.value.trim():"")!==""},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var e;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(e=typeof this.settings.collapseSize=="function"?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(e)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(e,"px")))},addMoreLink:function(){var e=$("#autocomplete-list"),t=this.element.val();if(!($(".more-results",e).length>0)){var n=$('<li class="separator" role="presentation"></li>').appendTo(e),i=$('<li role="presentation"></li>').appendTo(e);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(L.translate("AllResults"),' "').concat(_e.ensureAlphaNumericWithSpaces(t),'"</span>')).appendTo(i),this.autocomplete.maxWidth&&n.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var e=$("#autocomplete-list");if(!($(".no-results",e).length>0)){var t=$('<li role="presentation" class="is-placeholder"></li>').appendTo(e);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(L.translate("NoResults"),"</span>")).appendTo(t)}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings),Object.prototype.hasOwnProperty.call(e,"collapseSize")&&e.collapseSize===void 0&&(this.settings.collapseSize=e.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){if(this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.customButton&&this.customButton.length&&(this.customButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.customButton),this.categoryButton&&this.categoryButton.length){var e=this.categoryButton.data("popupmenu");e&&(e.destroy(),e.wrapper.off().remove()),this.categoryButton.off().remove(),delete this.categoryButton}return this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),$("body").off("breakpoint-change.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),Be.browser.isSafari()&&(this.xButton.off("mouseover.clearable"),this.xButton.off("mouseleave.clearable")),this.xButton.remove()),this},makeClearable:function(){var e=this;this.element.clearable({tabbable:this.settings.tabbable}),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close").length>0?this.wrapper.children(".icon.close"):this.wrapper.children("button.close"),this.settings.tabbable||this.xButton[0].setAttribute("tabindex","-1"),this.element.on("cleared",function(){return e.checkContents()}),N.addAttributes(this.xButton,this,this.settings.attributes,"btn-close",!0),N.addAttributes(this.element.xButton,this,this.settings.attributes,"btn-close",!0)},clear:function(){this.xButton&&this.xButton.click(),this.element.xButton&&this.element.xButton.click()},destroy:function(){this.teardown(),$.removeData(this.element[0],Tr)}},$.fn.searchfield=function(e){return this.each(function(){var t=$.data(this,Tr);t?t.updated(e):t=$.data(this,Tr,new E(this,e))})};var R="applicationmenu",F={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",resizable:!1,savePosition:!1,openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function Q(e,t){return this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,F),this.init()}Q.prototype={get accordionEl(){return this.accordion[0]},get searchEl(){return this.element[0].querySelector(".searchfield")},get searchAPI(){return this.searchEl?$(this.searchEl).data("searchfield"):void 0},get searchfieldAPI(){return this.searchAPI},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var e=this.element.attr("data-open-on-large");this.settings.openOnLarge=e!==void 0?e==="true":this.settings.openOnLarge;var t=this.element.attr("data-breakpoint");this.settings.breakpoint=Yt[t]!==void 0?t:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var n=this.menu.prevAll(".masthead"),i=this.menu.prevAll(".module-tabs");n.length>0&&(this.scrollTarget=n,this.menu.addClass("short")),i.length>0&&(this.scrollTarget=i),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var a=this.accordion.data("accordion");a||(this.accordion.accordion(),a=this.accordion.data("accordion")),this.accordionAPI=a,this.attachFilter(),this.renderResizableAppMenu(),this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var r=this.element.find(".application-menu-switcher-trigger");return r.length>0&&(this.switcherTrigger=r,this.switcherPanel=r.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea({trigger:r})),this},getAdjacentContainerElement:function(){var e=this.element.next(".page-container");return e.length||(e=$("body")),e},handleTriggerEvents:function(){var e=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",function(t){return!$(t.currentTarget).find(".icon.app-header").hasClass("go-back")&&!e.isAnimating&&(e.menu.hasClass("is-open")?e.closeMenu(!0):e.openMenu(void 0,!0),!0)}),this.element.find(".searchfield").on("keydown.applicationmenu",function(t){e.handleKeyDown(t)})},handleKeyDown:function(e){return!(e.which===121&&!e.shiftKey)||(e.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),!1)},notify:function(e,t){if(e&&e!==void 0&&(e instanceof HTMLElement&&(e=$(e)),e.is("a"))){var n=e.find(".tag");if(t&&t!==void 0&&parseInt(t,10)!==0)return n.length||(n=$('<span class="tag"></span>').appendTo(e)),n.text(t.toString()),n;n.length&&n.remove()}},adjustHeight:function(){var e=this.scrollTarget.is(".is-sticky"),t=this.scrollTarget.outerHeight(!0)-(e?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(t+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=t>0?"calc(100% - ".concat(t,"px)"):"100%"},toggleScrollClass:function(){if(Be.browser.name==="ie"&&Be.browser.version==="11"){var e=this.element[0];e&&e.classList.contains("has-menu-footer")&&(e.scrollHeight>e.clientHeight?e.classList.add("has-scrollbar"):e.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return Yt.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(Yt.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else Yt.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},attachFilter:function(){na.attachFilter.apply(this,[R])},attachFilterEvents:function(){na.attachFilterEvents.apply(this,[R])},renderResizableAppMenu:function(){if(this.settings.resizable){this.openMenu(!1,!1,!1),this.element.after('<div class="resizer"></div>'),$("#application-menu, .resizer").wrapAll('<div class="resize-app-menu-container" />'),$(".page-container").wrapAll('<div class="resize-page-container" />'),$(".resize-page-container").insertAfter(".resizer");var e=document.querySelector(".resizer"),t=document.querySelector("#application-menu"),n=$(".tab-panel-container.page-container"),i=$(".page-container");if(e.addEventListener("mousedown",function(c){c.preventDefault(),window.addEventListener("mousemove",r),window.addEventListener("mouseup",o)}),localStorage&&localStorage.navMenuWidth&&this.settings.savePosition&&(t.style.flexBasis=localStorage.navMenuWidth),this.settings.savePosition&&(i.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")),n&&n.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")"))),$("html.is-safari")&&this.settings.resizable&&$(".resize-app-menu-container").css("display","flex"),!localStorage.navMenuWidth){var a=$(".resizer").position();i.css("width","calc(100% - ".concat(a.left<300?300:a.left,"px)"))}}function r(c){t.style.flexBasis="".concat((c.pageX<300?300:c.pageX)-t.getBoundingClientRect().left,"px"),$(".page-container").css("width","calc(100% - ".concat(c.pageX<300?300:c.pageX,"px)"))}function o(){window.removeEventListener("mousemove",r,!1),localStorage&&(localStorage.navMenuWidth=t.style.flexBasis)}},openMenu:function(e,t,n){if(this.isAnimating!==!0){var i=this,a=$.fn.transitonEndName;if(n||(this.isAnimating=!0),this.adjustHeight(),this.settings.resizable){var r=parseInt(this.element[0].style.flexBasis,10);(r<300||isNaN(r))&&(r=300),this.settings.savePosition?$(".page-container").css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")):$(".page-container").css("width","calc(100% - ".concat(r,"px)"))}this.triggers.each(function(){var c=$(this);c.attr({"aria-expanded":!0}),(c.parents(".header").length>0||c.parents(".masthead").length>0)&&(c.find(".icon.app-header").removeClass("go-back"),c.trigger("icon-change"))}),n||(this.menu.off("".concat(a,".applicationmenu")),this.menu[0].style.display="",this.menu[0].offsetHeight,this.menu.addClass("is-open"),Be.features.touch&&$("body").addClass("is-open-touch")),Yt.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),e&&e===!0||this.menu.find(".is-selected > a").focus(),Be.os.name==="ios"&&this.getAdjacentContainerElement().addClass("ios-click-target"),n?o():(this.menu.one("".concat(a,".applicationmenu"),o),this.timeout=setTimeout(o,300)),setTimeout(function(){$(document).on("click.applicationmenu",function(c){$(c.target).parents(".application-menu").length<1&&!i.isLargerThanBreakpoint()&&i.closeMenu(!0)})},0)}function o(){i.timeout!==null&&(clearTimeout(i.timeout),i.timeout=null),t&&(i.userOpened=!0,i.userClosed=void 0),n||(i.isAnimating=!1,i.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),i.toggleScrollClass(),i.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(e){if(this.isAnimating!==!0){var t=this,n=$.fn.transitionEndName();this.isAnimating=!0,this.triggers.each(function(){var a=$(this);a.attr({"aria-expanded":!1}),(a.parents(".header").length>0||a.parents(".masthead").length>0)&&(a.find(".icon.app-header"),a.trigger("icon-change"))}),Be.os.name==="ios"&&this.getAdjacentContainerElement().removeClass("ios-click-target"),this.menu.one("".concat(n,".applicationmenu"),i),this.timeout=setTimeout(i,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),this.settings.resizable&&$(".page-container").css("width","100%"),Be.features.touch&&$("body").removeClass("is-open-touch")}function i(){t.timeout!==null&&(clearTimeout(t.timeout),t.timeout=null),t.menu.off("".concat(n,".applicationmenu")),t.menu[0].style.display="none",t.isAnimating=!1,e&&(t.userOpened=void 0,t.userClosed=!0),t.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return this.triggers!==void 0&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(e,t,n){var i=this;if(e&&e.length){var a=$(),r=!this.element.is(":visible");$.each(e,function(o,c){a=a.add($(c))}),this.triggers=this.triggers[t?"not":"add"](a),this.handleTriggerEvents(),this.triggers.each(function(o,c){var u,p=$(c);p.attr("aria-controls","application-menu"),p.attr("aria-expanded","".concat(i.isOpen()));var m=(u=c.textContent)===null||u===void 0||u==null?void 0:u.length,v=p.find(".audible");if(!m){var w=L.translate("AppMenuTriggerTextAlt");v.length?v.text(w):c.insertAdjacentHTML("beforeend",'<span class="audible">'.concat(w,"</span>"))}}),n&&n===!0||(this.updated(),r&&this.element.css("display","none"))}},handleSearchfieldInputEvent:function(){na.handleSearchfieldInputEvent.apply(this,[R])},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var e=this.switcherPanel.data("expandablearea");if(e&&(e.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){var e;if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu","input.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat(R,"-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.element.find(".application-menu-toolbar").off("click.".concat(R)),this.accordionAPI&&typeof((e=this.accordionAPI)===null||e===void 0||e==null?void 0:e.destroy)=="function"){var t,n;this.isFiltered&&((n=this.accordionAPI)===null||n===void 0||n==null||n.collapse()),(t=this.accordionAPI)===null||t===void 0||t==null||t.destroy()}return this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat(R)].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.teardownFilter(),this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},teardownFilter:function(){na.teardownFilter.apply(this,[R])},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],R)},handleEvents:function(){var e=this,t=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",function(n,i,a){t.notify(i,a)}).on("updated.applicationmenu",function(){t.updated()}),Be.browser.name==="ie"&&Be.browser.version==="11"&&t.element.find(".expandable-area").on("beforeexpand.applicationmenu",function(){t.element[0].classList.remove("has-scrollbar")}).on("aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.accordion.on("blur.applicationmenu",function(){t.closeMenu()}).on("selected.applicationmenu",function(){t.handleDismissOnClick()}).on("followlink.applicationmenu",function(){t.handleDismissOnClick()}).on("afterexpand.applicationmenu aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",function(){var n=e.element.height();t.element.addClass("has-open-switcher"),t.switcherPanel.find(".content").height(n-71),t.settings.onExpandSwitcher&&t.settings.onExpandSwitcher(t,t.element,t.settings),t.element.on("keydown.".concat(R,"-switcher"),function(i){var a=i.key;a==="Escape"&&t.element[0].classList.contains("has-open-switcher")&&(i.preventDefault(),t.closeSwitcherPanel()),a==="Tab"&&(t.keyboardChangedFocus=!0)}),t.switcherPanel.one("afterexpand.".concat(R),function(){var i;e.keyboardChangedFocus||((i=ue.focusableElems(t.switcherPanel[0]))[0].classList.remove("hide-focus"),i[0].focus())})}).on("aftercollapse.applicationmenu",function(){e.element.removeClass("has-open-switcher"),e.settings.onCollapseSwitcher&&e.settings.onCollapseSwitcher(e,e.element,e.settings),e.element.off("keydown.".concat(R,"-switcher")),e.switcherPanel.off("afterexpand.".concat(R)),delete e.keyboardChangedFocus}),this.element.find(".application-menu-toolbar").on("click.".concat(R),"button",function(n){n.defaultPrevented||e.handleDismissOnClick()}),$(document).on("open-applicationmenu",function(n,i,a){t.openMenu(i,a)}).on("close-applicationmenu",function(n,i){t.closeMenu(i)}).on("dismiss-applicationmenu",function(){t.handleDismissOnClick()}),$(window).on("scroll.applicationmenu",function(){t.adjustHeight()}),$("body").on("resize.applicationmenu",function(){t.testWidth(),t.toggleScrollClass()}),this.attachFilterEvents(),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout(function(){t.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")},800),this}},$.fn.applicationmenu=function(e){return this.each(function(){var t=$.data(this,R);return t?t.updated(e):t=$.data(this,R,new Q(this,e)),t})};var ne="blockgrid",ae={dataset:[],selectable:!1,paging:!1,withImage:!0,pagerSettings:{pagesize:25,pagesizes:[10,25,50,75],showFirstButton:!1,showLastButton:!1},attributes:null};function ye(e,t){return t&&(t.dataset&&(e.dataset=t.dataset),t.pagesize&&(Pn("`pagerSettings.pagesize` setting","`pagesize` setting"),e.pagerSettings.pagesize=t.pagesize,delete e.pagesize),t.pagesizes&&(Pn("`pagerSettings.pagesizes` setting","`pagesizes` setting"),e.pagerSettings.pagesizes=t.pagesizes,delete e.pagesizes)),e}function be(e,t){this.element=$(e),this.settings=N.mergeSettings(e,t,ae),this.settings=ye(this.settings,t),this.init()}be.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var e=this,t=this;return this.element.on("click.".concat(ne),".block",function(n){var i=$(n.currentTarget),a=$(n.target),r=a.is(".checkbox-label")||a.is(".checkbox");setTimeout(function(){t.select(i,r)},0),n.stopPropagation(),n.preventDefault()}),this.element.on("focus.".concat(ne),".checkbox",function(n){$(n.currentTarget).parent().addClass("has-focus")}),this.element.on("blur.".concat(ne),".checkbox",function(n){$(n.currentTarget).parent().removeClass("has-focus")}),this.element.on("keypress.".concat(ne),".block",function(n){if(n.which===32){var i=$(n.target);t.select(i,!1)}}),this.element.on("updated.".concat(ne),function(){t.updated()}),this.pagerAPI&&this.element.on("page.".concat(ne),function(){e.previousFocusedElement=!0,e.build()}).on("pagesizechange.".concat(ne),function(){e.previousFocusedElement=!0,e.build()}),this},handlePaging:function(){if(this.settings.paging){var e=N.extend({},this.settings.pagerSettings,{componentAPI:this,dataset:this.settings.dataset});this.element.addClass("paginated"),this.element.pager(e)}},selectBlock:function(e,t){return Qs(this.select,this.selectBlock).apply(this,[e,t])},select:function(e,t){var n=this.element.find(".block"),i=this.element.find(".checkbox"),a=e.find(".checkbox"),r=a.is(":checked"),o="",c=Number(a.data("idx"));if(this.settings.selectable==="single"&&(this.selectedRows=[],n.removeClass("is-selected").removeAttr("aria-selected"),i.prop("checked",!1)),this.settings.selectable==="multiple"&&r||this.settings.selectable==="mixed"&&t&&r){e.removeClass("is-selected").removeAttr("aria-selected"),a.prop("checked",!1);for(var u=0;u<this.selectedRows.length;u++)c===this.selectedRows[u].idx&&this.selectedRows.splice(u,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(this.settings.selectable===!1||this.settings.selectable==="mixed"&&!t||(r||(e.addClass("is-selected").attr("aria-selected","true"),a.prop("checked",!0)),this.selectedRows.push({idx:c,data:this.settings.dataset[c],elem:e}),o=r?"deselected":"selected"),this.settings.selectable==="mixed"&&!t){var p=e.hasClass("is-activated");return n.removeClass("is-activated"),void(p?(e.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:c,item:this.settings.dataset[c]}])):(e.addClass("is-activated"),this.element.triggerHandler("activated",[{row:c,item:this.settings.dataset[c]}])))}this.element.triggerHandler(r?"deselected":"selected",[{selectedRows:this.selectedRows,action:o}])}},render:function(){var e=this,t=this.settings,n=L?L.translate("Select"):"Select",i="",a=t.dataset;if(this.pagerAPI){var r=this.pagerAPI.state;if(r.pages>1){var o=r.activePage>0?r.activePage-1:0,c=r.pagesize*o,u=r.pagesize*(o+1);if((a=a.slice(c,u)).length!==t.dataset.length)for(var p=0;p<a.length&&!a[p].id;p++)a[p].id=c+p}}var m=[];this.selectedRows.forEach(function(M){m.push(M.idx)});for(var v=function(){var M,I=a[w],z=t.selectable==="mixed"?"0":"-1",V="",U="";if(m.indexOf(I.id)>-1&&(V=" is-selected",U=" checked"),t.withImage){var G=I.imgAlt||I.imageAlt||"".concat(I.maintxt||I.title," ").concat(L.translate("Image"));M='<div class="block is-selectable'.concat(V,`" role="listitem" tabindex="0">
          <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox`).concat(w,'" tabindex="').concat(z,'" data-idx="').concat(I.id||w,'"').concat(U,`>
          <label for="checkbox`).concat(w,`" class="checkbox-label">
            <span class="audible">`).concat(n,`</span>
          </label>
          <img alt="`).concat(G,'" src="').concat(I.img||I.image,`" class="image-round">
          <p> `).concat(I.maintxt||I.title," <br> ").concat(I.subtxt||I.subtitle,` </p>
        </div>`)}else{var J="";I.content&&I.content.forEach(function(te){J+="<br>".concat(te)}),M='<div class="block text-block is-selectable'.concat(V,`" role="listitem" tabindex="0">
        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox`).concat(w,'" tabindex="').concat(z,'" data-idx="').concat(I.id||w,'"').concat(U,`>
        <label for="checkbox`).concat(w,`" class="checkbox-label text-block">
          <span class="audible">`).concat(n,`</span>
        </label>
        <p><b>`).concat(I.title,"</b>").concat(J,`</p>
        </div>`)}i+=M},w=0;w<a.length;w++)v();if(this.element.attr("role","list").append(i),t.attributes)for(var C=0;C<a.length;C++){var A=this.element.find("#checkbox".concat(C)),S=this.element.find('.checkbox-label[for="checkbox'.concat(C,'"]'));N.addAttributes(A,this,t.attributes,"blockgrid-checkbox".concat(C)),N.addAttributes(S,this,t.attributes,"blockgrid-checkbox-label".concat(C))}this.previousFocusedElement&&setTimeout(function(){e.element.find(".block").first().focus(),delete e.previousFocusedElement},0)},renderBlock:function(){return Qs(this.render,this.renderBlock).apply(this)},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this.settings=ye(this.settings,e),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat(ne)),this.element.off("click.".concat(ne)),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],ne)}},$.fn.blockgrid=function(e){return this.each(function(){var t=$.data(this,ne);t?t.updated(e):t=$.data(this,ne,new be(this,e))})};var Ee={attributes:null,callback:void 0,content:"",current:!1,disabled:!1,href:void 0,id:void 0};function Oe(e){return this.settings=N.mergeSettings(null,e,Ee),this.init()}Oe.prototype={init:function(){return this.settings.element instanceof HTMLElement&&this.getSettingsFromElement(),this.settings.callback=typeof this.settings.callback=="function"?this.settings.callback:null,this.settings.content=typeof this.settings.content=="string"?_e.stripHTML(this.settings.content):"",this.settings.current=this.settings.current===!0,this.settings.disabled=this.settings.disabled===!0,this.settings.id=typeof this.settings.id=="string"?_e.stripHTML(this.settings.id):void 0,this.settings.href=typeof this.settings.href=="string"?_e.stripHTML(this.settings.href):void 0,this},render:function(){var e,t,n=this.element;return n||(n=document.createElement("li"),this.settings.href?(e=document.createElement("a"),n.appendChild(e)):(t=document.createElement("span"),n.appendChild(t)),this.element=n),n.classList.add("breadcrumb-item"),n},refresh:function(){var e=this.element,t=e.querySelector("a"),n=e.querySelector("span:not(.audible)"),i=t?$(t):void 0;if(this.disabled=this.settings.disabled,this.current=this.settings.current,(t||e).id=typeof this.settings.id=="string"?this.settings.id:"",(t||n||e).innerHTML=typeof this.settings.content=="string"?this.settings.content:"",t){if(typeof this.settings.href=="string"){var a=typeof this.settings.href=="string"?_e.stripHTML(this.settings.href):void 0;t.href=a,t.setAttribute("href",a)}else t.href=void 0,t.removeAttribute("href");i.hyperlink()}return n&&n.parentNode.isEqualNode(e)&&n.classList.add("breadcrumb-text"),Array.isArray(this.settings.attributes)&&N.addAttributes(i||$(e),this,this.settings.attributes),e},checkFocus:function(){var e=this.a;if(e){var t=this.overflowed;(Be.browser.isIE11||Be.browser.isEdge)&&(t=!1),e.tabIndex=t||this.disabled?-1:0,e.setAttribute("tabindex",e.tabIndex)}},get a(){return this.element.querySelector("a")},set current(e){var t=e===!0;this.settings.current=t,this.element.classList[t?"add":"remove"]("current")},get current(){return this.settings.current},set disabled(e){var t=e===!0;this.settings.disabled=t,this.element.classList[t?"add":"remove"]("is-disabled");var n=this.a;n&&(n.disabled=t,t?(n.setAttribute("disabled",t),n.setAttribute("aria-disabled",t)):(n.removeAttribute("disabled"),n.removeAttribute("aria-disabled")))},get disabled(){var e,t=(e=this.a)===null||e===void 0||e==null?void 0:e.getAttribute("disabled"),n=this.element.getAttribute("is-disabled");return t||n},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){var e=this.element,t=e.querySelector("a"),n=e.querySelector("span"),i=(t||n||e).getBoundingClientRect(),a=this.element.parentNode.getBoundingClientRect();return Be.rtl?a.right<i.right:a.left>i.left},callback:function(e){if(typeof this.settings.callback!="function")return!1;for(var t=this.settings.callback,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var r=t.apply(this,[e].concat(i));return r||e.preventDefault(),r},get index(){for(var e=this.element,t=0;e.previousSibling!==null;)e=e.previousSibling,t++;return t},getSettingsFromElement:function(){var e=this.settings.element,t=e.querySelector("a");function n(r){return r=r.replace('<span class="audible">Current</span>',""),_e.stripHTML(r)}t?(this.settings.content=n(t.innerHTML),this.settings.href=t.href,this.settings.id=t.id):(this.settings.content=n(e.innerHTML),e.id&&(this.settings.id=e.id));var i=e.classList.contains("current")===!0,a=t&&t.classList.contains("current")===!0;this.settings.current=i||a,this.settings.disabled=e.classList.contains("is-disabled")===!0,this.element=e,this.fromElement=!0,delete this.settings.element},destroy:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.element&&this.element.parentNode){if(!this.fromElement){var t=this.a;if(t){var n=$(t);n.off(),n.data("hyperlink").destroy()}}!e&&this.fromElement||(this.element.parentNode.removeChild(this.element),delete this.element)}}};var We="breadcrumb",Pe=["default","alternate"],Ne={breadcrumbs:[],style:Pe[0],truncate:!0};function mt(e,t){if(!(e instanceof HTMLElement))throw new Error("`element` argument must be of type `HTMLElement`");return this.element=e,this.settings=N.mergeSettings(e,t,Ne),this.init(),this}mt.prototype={init:function(){var e=this;Array.isArray(this.breadcrumbs)||(this.breadcrumbs=[]);var t=this.element.querySelector("ol"),n=N.getArrayFromList(this.element.querySelectorAll("li"));t&&(this.list=t),n.length&&n.forEach(function(i){e.add({element:i})}),Array.isArray(this.settings.breadcrumbs)||(this.settings.breadcrumbs=[]),this.settings.breadcrumbs.forEach(function(i){e.add(i)}),this.element.classList.contains(Pe[1])&&(this.settings.style=Pe[1]),Pe.indexOf(this.settings.style)===-1&&(this.settings.style=Pe[0]),this.render()},render:function(){var e;this.list?(this.teardownEvents(),this.teardownBreadcrumbs()):(this.list=document.createElement("ol"),this.element.appendChild(this.list));var t=document.createDocumentFragment();if(this.breadcrumbs.forEach(function(o){if(!o.fromElement||!o.element){var c=o.render();t.appendChild(c)}}),this.canDetectResize){if(!this.overflowBtn){var n=document.createElement("div"),i=document.createElement("button"),a=document.createElement("ul"),r=document.createElement("span");n.classList.add("breadcrumb-overflow-container"),i.classList.add("btn-actions"),i.classList.add("overflow-btn"),r.innerText="More Breadcrumbs",r.classList.add("audible"),i.insertAdjacentHTML("afterbegin",$.createIcon({icon:"more"})),i.appendChild(r),n.appendChild(i),n.appendChild(a),this.overflowContainerElem=n,this.overflowBtn=i,this.overflowMenu=a}this.element.insertBefore(this.overflowContainerElem,this.list),$(this.overflowBtn).popupmenu({menu:$(this.overflowMenu),beforeOpen:(function(o){var c="";this.overflowed.forEach(function(u,p){var m="",v="";u.settings.disabled&&(m=" is-disabled",v=" disabled");var w='<li class="'.concat(m,`">
          <a href="`).concat(u.settings.href||"#",'" data-breadcrumb-index="').concat(p,'"').concat(v,">").concat(u.settings.content||"",`</a>
        </li>`);c+=w}),o(c)}).bind(this)})}(e=t.childNodes)!==null&&e!==void 0&&e?.length&&this.list.appendChild(t),this.list.setAttribute("aria-label","Breadcrumb"),this.element.classList.add("breadcrumb"),this.list.classList.add("breadcrumb-list"),this.refresh(),this.handleEvents()},add:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!e)throw new Error("Settings for a new breadcrumb item must be provided.");this.breadcrumbs.forEach(function(a){if(e.id&&a.id===e.id)throw new Error("New breadcrumbs must have a unique ID attribute.")});var i=new Oe(e);this.breadcrumbs.push(i),n&&this.settings.breadcrumbs.push(e),t&&(this.render(),i.settings.current===!0&&this.makeCurrent(i))},remove:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=this.getBreadcrumbItemAPI(e);i.api.destroy(!0),this.breadcrumbs.splice(i.i,1),n&&this.settings.breadcrumbs.splice(i.i,1),t&&this.render()},removeAll:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.breadcrumbs.forEach(function(n){n.destroy(!0)}),this.breadcrumbs=[],t&&(this.settings.breadcrumbs=[]),e?this.render():this.refresh()},makeCurrent:function(e){var t=this.getBreadcrumbItemAPI(e);this.breadcrumbs.forEach(function(n){var i=n.element;n.current=i.isEqualNode(t.api.element)})},get current(){var e,t;return this.breadcrumbs.forEach(function(n){!e&&n.current&&(t=(e=n).element)}),t},set disabled(e){var t=e===!0;this.element.classList[t?"add":"remove"]("is-disabled"),this.breadcrumbs.forEach(function(n){n.disabled=t})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){return this.breadcrumbs.filter(function(e){return e.overflowed})},get canDetectResize(){return this.settings.truncate&&Be.features.resizeObserver},handleEvents:function(){var e=this,t=this;$(this.list).on("click.".concat(We),"li",function(n){var i=e.getBreadcrumbItemAPI(n.currentTarget);if(i&&i.api){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];i.api.callback(n,r)}}),this.canDetectResize&&(this.previousSize=this.list.getBoundingClientRect(),this.ro=new ResizeObserver(function(){e.detectCheck&&e.detectCheck.destroy(!0),e.detectCheck=new Gt({duration:1,timeoutCallback:function(){var n=t.list.getBoundingClientRect();n.width!==t.previousSize.width&&(t.previousSize=n,t.refresh(),delete t.detectCheck)}}),Hn.register(e.detectCheck)}),this.ro.observe(this.list)),this.overflowBtn&&$(this.overflowBtn).on("selected.".concat(We),function(n){var i=(arguments.length<=1?void 0:arguments[1])[0].getAttribute("data-breadcrumb-index"),a=e.overflowed[Number(i)];$(a.element).trigger("click")}),this.hasEvents=!0},getBreadcrumbItemAPI:function(e){var t,n,i,a=!1;if(e instanceof Oe?(t=e,n=e.element,i=this.breadcrumbs.indexOf(e)):e instanceof HTMLAnchorElement?n=e.parentNode:e instanceof HTMLLIElement?n=e:!isNaN(e)&&e>-1&&(a=!0,i=e,t=this.breadcrumbs[i],n=t.element),!n||t||i||this.breadcrumbs.forEach(function(o,c){o.element.isEqualNode(n)&&(t=o,i=c)}),!t){var r=a?i:n;throw new Error("No matching Breadcrumb was found by ".concat(a?"at index ":" with matching HTML List Item",' "').concat(r,'"'))}return{api:t,li:n,i}},refresh:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];e&&this.teardownEvents(),this.breadcrumbs.forEach(function(t){t.refresh()}),this.element.classList[this.settings.style==="alternate"?"add":"remove"]("alternate"),this.canDetectResize?this.element.classList[this.overflowed.length||this.element.scrollHeight>55?"add":"remove"]("truncated"):(this.element.classList.remove("truncated"),this.element.classList.add("no-truncate")),this.breadcrumbs.forEach(function(t){t.checkFocus()}),e&&this.handleEvents()},teardown:function(){if(this.teardownEvents(),this.teardownBreadcrumbs(),this.breadcrumbs=[],this.overflowContainerElem){var e=$(this.overflowBtn).data("popupmenu");e&&e.destroy(),this.overflowContainerElem.parentNode&&this.element.removeChild(this.overflowContainerElem)}return this},teardownEvents:function(){this.hasEvents&&(this.ro&&(this.ro.disconnect(),delete this.ro),this.overflowBtn&&$(this.overflowBtn).off(["beforeopen.".concat(We),"selected.".concat(We)].join(" ")),$(this.list).off(),$(this.element).off(),delete this.hasEvents)},teardownBreadcrumbs:function(){this.breadcrumbs.forEach(function(e){e.destroy()})},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init(),this},destroy:function(){this.teardown(),$.removeData(this.element,We)}},$.fn.breadcrumb=function(e){return this.each(function(){var t=$.data(this,We);t?t.updated(e):t=$.data(this,We,new mt(this,e))})};var St="busyindicator",wt={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1,attributes:null};function Gn(e,t){this.settings=N.mergeSettings(e,t,wt),this.element=$(e),this.init()}Gn.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var e=this.element.attr("data-block-ui"),t=this.element.attr("data-display-delay"),n=this.element.attr("data-completion-time");this.blockUI=e!==void 0?e:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:L.translate("Loading"),this.label&&this.label.text(this.loadingText));var i=t!==void 0&&!isNaN(t)&&parseInt(t,10)>20,a=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=i?t:a,this.completionTime=n===void 0||isNaN(n)?this.settings.timeToComplete:parseInt(n,10),this},activate:function(){var e=this;if(!e.isActive()){if(this.container)return e.closeTimeout&&clearTimeout(e.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var t="";if(this.blockUI&&(this.settings.transparentOverlay&&(t=" transparent"),this.originalPositionProp=this.element[0].style.position,window.getComputedStyle(this.element[0],null).getPropertyValue("position")!=="absolute"&&(this.element[0].style.position="relative"),this.overlay=$('<div class="overlay busy is-hidden'.concat(t,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var n;this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input")?(n=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element)):(n=this.element.data("dropdown").pseudoElem,this.container.appendTo(n.parent())),this.overlay&&this.overlay.insertAfter(this.container);for(var i=n.position(),a=n.outerHeight(),r=n.outerWidth(),o=this.container.add(this.overlay),c=function(m,v,w){m.style[v]="".concat(w,"px")},u=0,p=o.length;u<p;u++)c(o[u],"left",i.left),c(o[u],"top",i.top),c(o[u],"bottom",i.bottom),c(o[u],"right",i.right),c(o[u],"height",a),c(o[u],"width",r)}else this.container.appendTo(this.element);setTimeout(function(){e.container&&e.container.removeClass("is-hidden"),e.overlay&&e.overlay.removeClass("is-hidden"),e.blockUI&&e.addScrollParent()},e.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(e.isAnimating=!0,e.animateWithJS()),this.completionTime>0&&setTimeout(function(){e.element.trigger("complete")},e.completionTime),N.addAttributes(this.container,this,this.settings.attributes),N.addAttributes(this.container.find(".busy-indicator.active"),this,this.settings.attributes,"busyindicator"),N.addAttributes(this.container.find("span"),this,this.settings.attributes,"text"),N.addAttributes(this.overlay,this,this.settings.attributes,"overlay")}},close:function(e){var t=this;t.isActive()&&(this.removeScrollParent(),e&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),t.closeTimeout=setTimeout(function(){clearTimeout(t.closeTimeout),t.container&&t.container.remove(),t.container=void 0,t.loader=void 0,t.label=void 0,t.overlay&&(t.overlay.remove(),t.element[0].style.position=t.originalPositionProp,t.originalPositionProp=void 0),t.overlay=void 0,t.element.trigger("aftercomplete.busyindicator"),t.element.off("complete.busyindicator"),t.element.trigger("hide.busyindicator")},600))},animateWithJS:function(){var e=this,t=this.container.find(".bar.one"),n=this.container.find(".bar.two"),i=this.container.find(".bar.three"),a=this.container.find(".bar.four"),r=this.container.find(".bar.five"),o=0;setInterval(function(){e.isAnimating?((o+=1)===1&&t.addClass("half"),o===13&&(t.removeClass("half").addClass("full"),n.addClass("half")),o===26&&(t.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),i.addClass("half")),o===39&&(t.removeClass("half"),n.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),a.addClass("half")),o===51&&(n.removeClass("half"),i.removeClass("full").addClass("half"),a.removeClass("half").addClass("full"),r.addClass("half")),o===64&&(i.removeClass("half"),a.removeClass("full").addClass("half"),r.removeClass("half").addClass("full")),o===77&&(a.removeClass("half"),r.removeClass("full").addClass("half")),o===90&&r.removeClass("half"),o===103&&(o=0)):clearInterval(null)},10)},addScrollParent:function(){var e=this;if(this.blockUI){var t=this.element[0];this.scrollParent=$(this.getScrollParent(t));var n,i=this.scrollParent[0],a=i?i.offsetHeight:0;this.overlay&&this.overlay[0]&&(n=window.getComputedStyle(this.overlay[0],null).getPropertyValue("position"));var r=n==="absolute";if(a&&this.container&&a<=t.offsetHeight){var o=window.innerHeight||document.documentElement.clientHeight,c=a/2-58,u=function(){if(r&&e.element.is(i)){var p=t.scrollTop;e.overlay.css({top:p}),e.container.css({top:c+p})}else if(N.isInViewport(i)&&(A=i).scrollHeight>=A.clientHeight&&A.clientHeight<o-60)e.container[0].offsetHeight&&e.container.css({top:c+i.scrollTop});else{var m=0,v=0,w=t.getBoundingClientRect();if(w.top<0){var C=w.height+w.top;m=C>o?o:C,v=w.top}else m=o-w.top;e.container.css({top:(m-85)/2-v})}var A};u(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",function(){e.container&&u()})}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(e){var t=["overflow","overflow-x","overflow-y"],n=function(r){return t.reduce(function(o,c){return o+function(u,p){return getComputedStyle(u,null).getPropertyValue(p)}(r,c)},0)},i=/(auto|scroll)/,a=function(r){return i.test(n(r))};return function(r){for(var o=!1,c=r;!o&&c&&c.tagName&&c.tagName.toLowerCase()!=="body";){if(a(c)){o=!0;break}c=c.parentNode}return o?c:null}(e)},updated:function(e){return e!=null&&e?.text&&(e.text=_e.unescapeHTML(e.text)),this.settings=N.mergeSettings(this.element,e,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],St)},handleEvents:function(){var e=this;return this.element.on("start.busyindicator",function(t){t.stopPropagation(),e.activate()}).on("afterstart.busyindicator",function(){e.element.on("complete.busyindicator",function(t){t.stopPropagation(),e.close(!0)})}).on("updated.busyindicator",function(){e.close(!0),e.updated()}),this}},$.fn.busyindicator=function(e){return this.each(function(){var t=$.data(this,St);t?t.updated(e):t=$.data(this,St,new Gn(this,e))})},$.fn.selectable=function(){var e=this;return e.hideFocus(),e.on("click",function(t){e.removeClass("is-selected"),$(t.currentTarget).toggleClass("is-selected")}),this};var Bn="cards",Li={bordered:null,noHeader:!1,contentPaddingX:null,contentPaddingY:null,noShadow:!1,dataset:[],template:null,selectable:!1,expandableHeader:!1,verticalButtonAction:!1,detailRefId:void 0,attributes:null};function dn(e,t){this.settings=N.mergeSettings(e,t,Li),this.element=$(e),this.init()}dn.prototype={init:function(){this.selectedRows=[],this.showCardDetailFlag=!1,this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&this.id!==void 0||(this.id="expandable-card-".concat($("body").find(".card, .widget").index(this.element)),this.element.attr("id",this.id)),this.settings.expandableHeader&&(this.element.addClass("expandable-card"),this.expandableCardHeader=this.element.children(".card-header, .widget-header").addClass("expandable-card-header")),this.cardHeader=this.element.children(".card-header, .widget-header"),this.cardContentPane=this.element.children(".card-pane, .widget-pane"),this.cardFooter=this.element.children(".card-footer"),this.buttonAction=this.cardHeader.children(".btn-actions"),this.settings.selectable!==!1&&(this.cards=this.element),this.cardFooter.length===1&&this.element.addClass("has-footer"),this},build:function(){var e,t,n=this,i=this.element,a=this.element.hasClass("is-expanded"),r=L?L.translate("Select"):"Select",o=this.settings.selectable==="single",c=this.settings.bordered===!0,u=this.settings.bordered===!1,p=this.element.find(".card-header-section.custom-action, .widget-header-section.custom-action").length>0,m=this.settings,v=m.contentPaddingX,w=m.contentPaddingY;if(this.renderTemplate(),this.settings.selectable!==!1&&(this.cards.find(".card").addClass("is-selectable"),this.cards.addClass(o?"single":"multiple"),this.element.attr("role","list"),this.element.find(".card, .widget").attr({role:"listitem",tabindex:"0"})),this.settings.selectable==="multiple"&&this.cards.find(".card, .widget").each(function(S){$(this).find(".card-content, .widget-content").prepend(`
          <input type="checkbox" id="checkbox-`.concat(S,`" aria-hidden="true" tabindex="0" role="presentation"
            class="checkbox">
            <label for="checkbox-`).concat(S,`" class="checkbox-label">
              <span class="audible">`).concat(r,`</span>
            </label>
        `))}),this.cardContentPane.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.settings.expandableHeader&&this.expandableCardHeader&&((e=this.expandableCardHeader)===null||e===void 0||e==null||e.attr("role","button")),this.buttonAction.length>0&&this.settings.verticalButtonAction&&this.buttonAction.addClass("vertical"),a&&(this.cardContentPane.addClass("no-transition"),this.element.one("afterexpand.expandable-card",function(){n.cardContentPane.removeClass("no-transition")}),this.open()),a||(this.cardContentPane.addClass("no-transition"),this.element.one("aftercollapse.expandable-card",function(){n.cardContentPane.removeClass("no-transition")}),this.close()),this.settings.expandableHeader||N.addAttributes(this.cardHeader,this,this.settings.attributes,"header",!0),N.addAttributes(this.element,this,this.settings.attributes,"card",!0),N.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"card-content",!0),N.addAttributes(this.element,this,this.settings.attributes,"widget",!0),N.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"widget-content",!0),this.settings.selectable||(this.expandableCardHeader&&N.addAttributes(this.expandableCardHeader,this,this.settings.attributes,"expander",!0),N.addAttributes(this.buttonAction,this,this.settings.attributes,"action",!0),N.addAttributes(this.cardContentPane,this,this.settings.attributes,"content",!0)),c&&i.addClass("bordered"),u&&i.addClass("border-less"),this.settings.noHeader&&(i.addClass("no-header"),(t=this.cardHeader)===null||t===void 0||t==null||t.remove()),this.settings.noShadow&&i.addClass("no-shadow"),v!==null||w!==null){var C=i.find(".card-content, .widget-content");v!==null&&C.addClass("padding-x-".concat(v)),w!==null&&C.addClass("padding-y-".concat(w))}if(p&&i.addClass("show-buttons"),this.settings.selectable==="multiple"){var A=this;setTimeout(function(){n.cards.find(".card, .widget").each(function(S){var M=$(this);N.addAttributes(M.find(".checkbox-label"),A,A.settings.attributes,"checkbox-label-".concat(S),!0),N.addAttributes(M.find(".card-content .checkbox"),A,A.settings.attributes,"checkbox-".concat(S),!0)})},1)}return L.isRTL()&&this.removeInfoIconTooltip(),this.resizeButtonset(),this},removeInfoIconTooltip:function(){if(this.element.hasClass("card")){var e=Yt.isBelow("slim");this.cardHeader.find("> .icon").css("display","".concat(e?"none":""))}},select:function(e){var t=this.element.find(".card"),n=e.find(".checkbox"),i=e.hasClass("is-selected"),a="";if(this.settings.selectable==="single"&&(this.selectedRows=[],t.removeClass("is-selected").removeAttr("aria-selected")),this.settings.selectable==="multiple"&&i)return e.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1),void this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}]);this.settings.selectable!==!1&&(e.addClass("is-selected").attr("aria-selected","true"),this.settings.selectable==="multiple"&&n.prop("checked",!0),this.selectedRows.push({data:this.settings.dataset,elem:e}),a=i?"deselected":"selected"),this.element.triggerHandler(i?"deselected":"selected",[{selectedRows:this.selectedRows,action:a}])},renderTemplate:function(){if(this.settings.template){var e=this.settings;at(Xn)==="object"&&e.dataset&&this.settings.template&&(this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):typeof this.settings.template=="string"&&(ot.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())));var t=Xn.compile(this.settings.template,{dataset:e.dataset});e.dataset.length>0?this.cards.html(t):e.dataset.length===0&&this.cards.html(t||'<div class="cards auto-height"></div>')}},resizeButtonset:function(){var e=this.element.find(".card-buttonset");if(e.length!==0&&this.element.parent().is("li")){for(var t=this.element.width()<=360,n=function(z,V,U){var G;if(z.hasClass("is-overflowed")){var J=z.find(".card-content-action");J?G=z.find(".card-content-action button"):(J=$('<div class="card-content-action"></div>'),G=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(L.translate("MoreActions"),"</span>")).attr("title",L.translate("More")),J.append(G),z.append(J))}else{z.addClass("is-overflowed");var te=$('<div class="card-content-action"></div>');G=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(L.translate("MoreActions"),"</span>")).attr("title",L.translate("More")),te.append(G),z.append(te)}var de,H=G.data("popupmenu");H?de=H.settings.menu:(de=$('<ul class="popupmenu"></ul>')).insertAfter(G);for(var he=function(){var ke=V[ie],De=$(ke.innerHTML),Me=$('<li><a href="#"></a></li>');Me.find("a").append(De),Me.data("originalButton",ke),Me.on("click",function(){return $(ke).triggerHandler("click")}),Me.find(".audible").removeClass("audible"),de.prepend(Me),$(ke).hide()},ie=V.length-1,me=0;ie>=0&&me<U;ie--,me++)he();H?H.updated({menu:de}):G.popupmenu({menu:de})},i=e.children(":visible:not(.card-content-action)"),a=0,r=0,o=0,c=0;c<i.length;c++){var u=$(i.get(c)).hasClass("btn-icon")?1:2;if(r+u>4)break;if(u===1){if(u+o>3)break;o++}r+=u,a=c}if(a++,t)n(e,i,i.length);else if(i.length>a)n(e,i,i.length-a);else if(e.hasClass("is-overflowed")&&r<3){var p=this.element.find(".card-content-action button"),m=p.data("popupmenu"),v=p.parent();if(m&&m.settings.menu){for(var w=m.settings.menu.children(),C=0,A=0;A<w.length;A++){var S=$($($(w).get(A)).data("originalButton")),M=S.hasClass("btn-icon")?1:2;if(r+M>4)break;if(M===1){if(M+o>3)break;o++}S.show(),r+=M,C=A}C++;for(var I=0;I<C;I++)$(w).get(I).remove();$(m.settings.menu.children()).length===0?(m.destroy(),p.remove(),v.remove(),e.removeClass("is-overflowed")):m.updated()}}}},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},isDisabled:function(){return this.element.hasClass("is-disabled")},open:function(){var e,t=this;this.element.triggerHandler("beforeexpand",[this.element])!==!1&&(this.element.addClass("is-expanded"),(e=this.expandableCardHeader)===null||e===void 0||e==null||e.attr("aria-expanded","true"),this.element.triggerHandler("expand",[this.element]),this.cardContentPane[0]&&(this.cardContentPane[0].style.display="block"),this.cardContentPane.one("animateopencomplete",function(){t.element.triggerHandler("afterexpand",[t.element])}).animateOpen({timing:300}))},close:function(){var e=this;this.element.triggerHandler("beforecollapse",[this.element])!==!1&&(this.element.triggerHandler("collapse",[this.element]),this.cardContentPane.one("animateclosedcomplete",function(){var t;e.element.removeClass("is-expanded"),(t=e.expandableCardHeader)===null||t===void 0||t==null||t.attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.cardContentPane[0].style.display="none"}).animateClosed({timing:300}))},showCardDetail:function(){this.showCardDetailFlag=!0,this.showCardDetailFlag&&this.element.addClass("show-card-detail"),this.addBackButton()},hideCardDetail:function(){this.showCardDetailFlag=!1,this.element.removeClass("show-card-detail"),this.cardHeader.removeClass("has-back-button"),this.cardHeader.find(".go-back-button").remove()},addBackButton:function(){this.cardHeader&&(this.cardHeader.addClass("has-back-button"),this.cardHeader.prepend(`
      <div class="widget-header-section go-back-button">
        <button id="go-back" class="btn-icon go-back btn-system" type="button">
          <span class="audible">Show navigation</span>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-arrow-left"></use>
          </svg>
        </button>
      </div>
      `))},handleEvents:function(){var e,t=this,n=this,i=$(n.element).find(".card-content, .widget-content"),a="#".concat(n.settings.detailRefId);(e=this.expandableCardHeader)===null||e===void 0||e==null||e.on("click.cards",function(o){n.isDisabled()||(o.preventDefault(),n.toggleExpanded())}),this.settings.selectable!==!1&&this.element.on("click.".concat(Bn),".card",function(o){var c=$(o.currentTarget),u=$(o.target).is(".checkbox");setTimeout(function(){n.select(c,u)},0),o.stopPropagation(),o.preventDefault()}),i.find(a).on("click",function(o){o.stopPropagation(),n.showCardDetail();var c=n.element.find(".card-header, .widget-header").find(".go-back");$(c).on("click",function(u){u.stopPropagation(),n.hideCardDetail()})}),$("body").on("resize.card",function(){L.isRTL()&&t.removeInfoIconTooltip(),setTimeout(function(){t.resizeButtonset()},300)});var r=this.element.find(".card-header, .widget-header");return this.element.find(".card-content, .widget-content").children().on("scroll.card",function(o){var c=o.target,u=$(c).siblings(".listview-search, .widget-search"),p=$(c).siblings(".card-search, .widget-search").find(".searchfield-wrapper");c.scrollTop>0?u.length>0?u.addClass("is-scrolling"):p.length>0?p.addClass("is-scrolling"):r.addClass("is-shadow-scrolling"):(u.removeClass("is-scrolling"),p.removeClass("is-scrolling"),r.removeClass("is-shadow-scrolling"))}),this},teardown:function(){var e,t;return $("html").off("themechanged.".concat(Bn)),this.element.off("click.".concat(Bn)),(e=this.expandableCardHeader)===null||e===void 0||e==null||e.off("click.cards"),this.expandableCardHeader=null,$("body").off("resize.card"),$(this.element.find(".card-content, .widget-content").find("#".concat(this.settings.detailRefId,", .is-selected"))).off(),$((t=this.element.find(".card-header, .widget-header"))===null||t===void 0||t==null?void 0:t.find(".go-back")).off(),this.selectedRows=[],this.cardContentPane.off(),this.element.find(".card-content").children().off("scroll.card"),this.cardContentPane=null,this},destroy:function(){this.teardown(),$.removeData(this.element[0],Bn)}},$.fn.cards=function(e){var t=$(this),n=t.attr("data-dataset"),i=t.attr("data-tmpl"),a=N.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var r=N.extend({},e,a);return this.each(function(){var o=$.data(this,Bn);o?o.updated(r):o=$.data(this,Bn,new dn(this,r))})},$.fn.popover=function(e){return this.each(function(){var t=$.data(this,"popover");t?t.updated(e):t=$.data(this,"popover",new Da(this,e))})};var ce={destroy:function(e){var t,n;(t=e[0])===null||t===void 0||(n=t?.classList).remove.apply(n,["line-chart","bar-chart","bar-chart-stacked","bar-chart-grouped","bubble","column-chart","completion-chart","chart-completion-target-padding","chart-pie","has-right-legend"])},tooltip:{}};ce.isIE=Be.browser.name==="ie",ce.isIEEdge=Be.browser.name==="edge",ce.tooltipSize=function(e){var t;return(t=this.tooltip)!==null&&t!==void 0&&t?.find||this.appendTooltip(),ue.html(this.tooltip.find(".tooltip-content"),e,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},ce.formatToSettings=function(e,t){var n=e.data?e.data:e,i=t.formatter&&t.formatter!==".0f"?d3.format(t.formatter)(n.percent):"".concat(isNaN(n.percentRound)?0:n.percentRound,"%");return t.show==="value"?t.formatter?d3.format(t.formatter)(n.value):n.value:t.show==="label"?n.name:t.show==="label (percent)"?"".concat(n.name," (").concat(i,")"):t.show==="label (value)"?"".concat(n.name," (").concat(t.formatter?d3.format(t.formatter)(n.value):n.value,")"):t.show==="percent"?i:typeof t.show=="function"?t.show(n):n.value},ce.appendTooltip=function(e){var t=this;this.tooltip=$("#svg-tooltip"),this.tooltip.length===0&&(e=e?" ".concat(e):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(e,`">
      <div class="arrow"></div>
        <div class="tooltip-content">
          <p><b>32</b> Element</p>
        </div>
      </div>`)).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",function(){t.hideTooltip()})))},ce.hideTooltip=function(){var e=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",function(){e.hideTooltip()})},ce.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},ce.colorRange=function(){var e=ft.themeColors().palette;return ft.new?[e.azure[80].value,e.turquoise[40].value,e.amethyst[60].value,e.graphite[40].value,e.amber[40].value,e.emerald[70].value,e.ruby[60].value,e.azure[30].value,e.amber[70].value,e.graphite[60].value,e.turquoise[60].value,e.emerald[90].value,e.amethyst[30].value,e.azure[50].value,e.ruby[30].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[80].value,e.graphite[20].value,e.amber[90].value]:[e.azure[70].value,e.turquoise[30].value,e.amethyst[30].value,e.graphite[60].value,e.amber[50].value,e.emerald[60].value,e.ruby[60].value,e.azure[30].value,e.amber[90].value,e.turquoise[80].value,e.ruby[20].value,e.graphite[50].value,e.emerald[50].value,e.azure[50].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[50].value,e.amber[70].value,e.graphite[20].value,e.azure[20].value]},ce.colorNameRange=function(){return ft.new?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},ce.chartColor=function(e,t,n){var i=ce.colorRange(),a=n&&n.color?n.color:null;if(a){if(a==="error")return ft.themeColors().status.danger.value;if(a==="alert")return ft.themeColors().status.warning.value;if(a==="alertYellow")return ft.themeColors().status.caution.value;if(a==="good")return ft.themeColors().status.success.value;if(a==="neutral")return ft.themeColors().palette.graphite[30].value;if(a==="info")return ft.themeColors().palette.azure[70].value;if(a){if(a.indexOf("#")===0)return n.color;var r=a.slice(-2);if(/\d/.test(r)){var o=a.slice(0,a.length-2);return ft.themeColors().palette[o][10*parseInt(r,10)].value}}}return/^(pie|donut)$/.test(t)?i[e]:/^(bar-single|column-single)$/.test(t)?i[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?i[e]:""},ce.chartColorName=function(e,t,n){var i=n&&n.color?n.color:null;if(i)return i==="error"?"alert01":i==="alert"?"alert02":i==="alertYellow"?"alert03":i==="good"?"alert04":i==="neutral"?"graphite03":i==="info"?"azure07":n.color;if(/^(pie|donut)$/.test(t)){var a=e;return e+1>=this.colorNameRange().length&&(a=e-e),this.colorNameRange()[a]}return/^(bar-single|column-single)$/.test(t)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?this.colorNameRange()[e]:""},ce.showTooltip=function(e,t,n,i,a){var r,o,c=this;e<0&&(e=2),this.tooltip[0].style.left="".concat(e,"px"),this.tooltip[0].style.top="".concat(t,"px"),ue.html(this.tooltip.find(".tooltip-content"),n,"*"),this.tooltip.removeClass("bottom top left right").addClass(i),this.tooltip.css("max-width",(a==null||(r=a?.tooltip)===null||r===void 0||r==null?void 0:r.maxWidth)||""),this.tooltip.find(".arrow").css("left",(a==null||(o=a?.arrow)===null||o===void 0||o==null?void 0:o.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){c.hideTooltip()}),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){c.hideTooltip()})},ce.addLegend=function(e,t,n,i){var a,r,o=this;if(e.length!==0){var c,u,p=0,m=0;for(this.hasLegendPopup=!1,r=0;r<e.length;r++)c=e[r].name?6*e[r].name.length:6,p=e[r].name&&c>p?c:p,(m+=c)/$(i).width()*100<=45&&(u=r+1);var v=(p+=55)/$(i).width()*100>45,w=e[0].placement&&e[0].placement==="bottom"||n.forceLegendPopup===!0;w&&v||(u=e.length),w&&$(i).hasClass("has-right-legend")&&$(i).removeClass("has-right-legend");var C=e[0].display&&e[0].display==="twocolumn",A=C?$('<div class="chart-legend '.concat(e[0].placement&&!w?"is-".concat(e[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');for(t!=="pie"&&t!=="donut"||!n.showMobile||(A=$('<div class="chart-legend"><div class="container"></div></div>')),r=0;r<u;r++)if(e[r].name){var S="";(C||e[r].display&&e[r].display==="block")&&(S+=" lg"),n.type==="column-positive-negative"&&e[r].option&&(S+=" ".concat(e[r].option));var M='<span index-id="chart-legend-'.concat(r,'" class="chart-legend-item').concat(S,'" tabindex="').concat(n!=null&&n?.selectable?0:-1,'" role="button"></span>'),I=ce.chartColor(r,t||(e.length===1?"bar-single":"bar"),e[r]),z=ce.chartColorName(r,t||(e.length===1?"bar-single":"bar"),e[r]),V="";z.substr(0,1)==="#"?(V=$('<span class="chart-legend-color"></span>'),e[r].pattern||V.css("background-color",I)):V=$('<span class="chart-legend-color '.concat(e[r].pattern?"":z,'"></span>')),t==="scatterplot"&&(V=$('<span class="chart-legend-color"></span>'));var U=$('<span class="chart-legend-item-text">'.concat(_e.stripTags(e[r].name),"</span>"));if(e[r].pattern&&(V.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(e[r].pattern,')"/></svg>')),V.find("rect").css("fill",I)),e[r].percent){var G=$('<span class="chart-legend-percent"></span>').text(e[r].percent);U.append(G)}e[r].display&&e[r].display==="block"&&(M='<span class="chart-legend-item'.concat(S,'" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>')),C&&(M=v&&w?'<span index-id="chart-legend-'.concat(r,'" class="chart-legend-item').concat(S,' is-one-line" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>'):'<span index-id="chart-legend-'.concat(r,'" class="chart-legend-item').concat(S,' is-two-column" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>')),(M=$(M)).append(V,'<span class="audible">'.concat(L.translate("Highlight"),"</span>"),U);var J,te,de,H="legend-".concat(r);n.attributes?N.addAttributes(M,e[r],n.attributes,H,!0):N.addAttributes(M,e[r],(J=e[r])===null||J===void 0||(J=(te=J)==null?void 0:te.data)===null||J===void 0||(de=J)==null?void 0:de.attributes,H,!0),t!=="pie"&&t!=="donut"||!n.showMobile?A.append(M):A.find(".container").append(M),(e[r].display&&e[r].display==="block"||C&&v&&w)&&M.css({float:"none",display:"block",margin:"0 auto",width:"".concat(p+15,"px")}),t==="scatterplot"&&(self.svg=d3.select(V[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type(function(){return d3.symbols[r]})).style("fill",I)),innerWidth<=480&&e[r].data&&e[r].data.legendAbbrName&&U.replaceWith('<span class="chart-legend-item-text">'.concat(e[r].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&e[r].data&&e[r].data.legendShortName&&U.replaceWith('<span class="chart-legend-item-text">'.concat(e[r].data.legendShortName,"</span>"))}var he=(a=n.dataset[0])===null||a===void 0||a==null?void 0:a.legendTitle;if((t==="pie"||t==="donut")&&he&&n.legendPlacement==="right"){var ie='<span class="chart-legend-title">'.concat(he,"</span>");A.prepend(ie)}if(A instanceof $){var me=/^chart-legend-(.+)/;if(A.on("click.chart",".chart-legend-item",function(){var sn=$(this).attr("index-id").match(me)[1];ce.handleElementClick(sn,this,e,n,i)}).on("keypress.chart",".chart-legend-item",function(sn){if(sn.which===13||sn.which===32){var Xt=$(this).attr("index-id").match(me)[1];ce.handleElementClick(Xt,this,e,n,i)}}),w&&v&&e.length>u||n!=null&&n?.forceLegendPopup){var ke=$(`
      <button class="btn-actions list-button" type="button">
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation" style="min-height: 0">
          <use href="#icon-bullet-steps"></use>
        </svg>
      </button>
      `);this.hasLegendPopup=!0;for(var De=$('<ul class="popupmenu"></ul>'),Me=0;Me<e.length;Me++){var Ve=$("<li ".concat(Me===0?'class="is-hidden"':"",'><a index-id="chart-legend-').concat(Me,'" href="#"><div class="chart-popup-menu"></div></a></li>')),Ke=$('<span class="chart-popup-menu-text">'.concat(_e.stripTags(e[Me].name),"</span>")),ct=ce.chartColor(Me,t||(e.length===1?"bar-single":"bar"),e[Me]),qe=ce.chartColorName(Me,t||(e.length===1?"bar-single":"bar"),e[Me]),je=void 0,lt="";qe.substr(0,1)==="#"?(lt=$('<span class="chart-popup-menu-color"></span>'),je=e[r].pattern,e[r].pattern||(lt.css("background-color",ct),je=ct)):(lt=$('<span class="chart-popup-menu-color '.concat(e[r].pattern?"":qe,'"></span>')),je=qe),e[Me].color=je,Ve.find("div").append(lt,Ke),De.append(Ve)}A.css({"min-height":"40px","max-height":"50px",display:"flex"}),$(i).addClass("auto-height"),A.append(ke),$(i).append(A),De.insertAfter(ke),ke.popupmenu({menu:De});var xt=($(i).parents(".widget").height()-($($(i).parents(".widget").children().get(0)).height()+$($(i).parents(".widget").children().get(1)).height()))/2;A.css("padding-top","".concat(xt,"px")),ke.on("selected",function(sn,Xt){var yn=$(Xt[0]).attr("index-id").match(me)[1];ce.handleElementClick(yn,o,e,n,i)})}else $(i).append(A)}}},ce.handleElementClick=function(e,t,n,i,a){var r;if(i.selectable){var o,c=$(i==null||(r=i?.svg)===null||r===void 0||r==null?void 0:r.node()).closest(".chart-container").data("chart"),u=c==null||c==null?void 0:c.initialSelectCall,p=n[e],m=n[0].display&&n[0].display==="twocolumn";if(i.type==="radar"&&(o=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[e])),i.type==="pie"||i.type==="donut"?o=d3.select(i.svg.selectAll(".slice").nodes()[e]):/positive-negative/.test(i.type)?o=!p.option||p.option&&p.option==="target"?i.svg.select(".target-bar"):i.svg.select(".bar.".concat(p.option)):["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)!==-1&&(i.isGrouped||i.isSingle?o=i.svg.select(".series-".concat(e)):i.isStacked&&!i.isSingle&&(o=d3.select(i.svg.selectAll(i.type==="bar"||i.type==="bar-stacked"||i.type==="bar-normalized"?".series-group":".g").nodes()[e]).select(".bar"))),["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)!==-1&&i!=null&&i?.selectable){var v=$(t),w=v.attr("aria-pressed")==="true";ce.clickedLegend=!0,o.dispatch("click"),v.parent().find("[aria-pressed]").removeAttr("aria-pressed"),w||v.attr("aria-pressed","true")}if(p.selectionObj&&i!=null&&i?.selectable&&ce.selectElement(d3.select(p.selectionObj.nodes()[e]),p.selectionInverse,p.data,void 0,i.dataset,u),m&&this.hasLegendPopup){var C=i.type==="donut"?"pie":i.type,A=ce.chartColor(e,C||(n.length===1?"bar-single":"bar"),n[e]),S=ce.chartColorName(e,C||(n.length===1?"bar-single":"bar"),n[e]),M="";S.substr(0,1)==="#"?(M=$('<span class="chart-legend-color"></span>'),p.pattern||M.css("background-color",A)):M=$('<span class="chart-legend-color '.concat(p.pattern?"":S,'"></span>'));var I=$('<span class="chart-legend-item-text">'.concat(_e.stripTags(p.name),"</span>")),z=a.find(".chart-legend-item");z.empty(),z.append(M,'<span class="audible">'.concat(L.translate("Highlight"),"</span>"),I),z.attr("index-id","chart-legend-".concat(e)),a.find(".list-button").data("popupmenu").menu.children().removeClass("is-hidden"),$(a.find(".list-button").data("popupmenu").menu.children().get(e)).addClass("is-hidden")}}},ce.selected=[],ce.clearSelected=function(e){if(e){var t=function(n){Object.prototype.hasOwnProperty.call(n,"selected")&&delete n.selected};(function n(i){Array.isArray(i)&&i.forEach(function(a){t(a),a.data&&n(a.data)}),t(i)})(e)}},ce.selectElement=function(e,t,n,i,a,r){var o=e.node()&&e.classed("is-selected");ce.clearSelected(a),o||(n.selected=!0);var c=[{elem:e.nodes(),data:o?{}:n}];t.classed("is-selected",!1).classed("is-not-selected",!o),e.classed("is-not-selected",!1).classed("is-selected",!o),ce.selected=$.isEmptyObject(c[0].data)?[]:c,r||$(i).triggerHandler("selected",[c])},ce.setSelectedElement=function(e){var t,n=e.dataset,i=/positive-negative/.test(e.type),a=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(e.type),r=e.type==="pie"||e.type==="donut",o=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(e.type),c=e.svg,u=e.isSingle,p=e.isGrouped,m=e.isStacked,v=e.task==="selected",w=d3.select(e.selector),C=w.classed("positive"),A=e.svg.selectAll(".axis.x .tick"),S=e.svg.selectAll(".axis.y .tick"),M=e.svg.selectAll(".bartext.positive, .target-bartext.positive"),I=e.svg.selectAll(".bartext.negative, .target-bartext.negative"),z=e.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),V=d3.select(e.selector.parentNode),U=parseInt(V.node()?V.attr("data-group-id"):0,10),G=[],J=[];if(n=m||r?n||null:n&&n[U]?n[U].data||n[U]:null,A.style("font-weight","normal"),S.style("font-weight","normal"),M.style("font-weight","normal"),I.style("font-weight","normal"),c.selectAll(".is-selected").classed("is-selected",!1),ce.clearSelected(e.dataset),r&&c.selectAll(".is-not-selected").classed("is-not-selected",!1),i&&Object.prototype.hasOwnProperty.call(e.dataset[0],"targetBarsSelected")&&delete e.dataset[0].targetBarsSelected,v)if(c.selectAll(".bar, .target-bar").style("opacity",.6),ce.clickedLegend&&!r)i?(e.isTargetBar?(e.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),z.style("font-weight","bolder"),e.dataset[0].targetBarsSelected=!0):(e.svg.selectAll(C?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(C?M:I).style("font-weight","bolder")),c.selectAll(".bar").each(function(qe,je){var lt=d3.select(this);if(lt.classed("is-selected")){var xt=n?n[je]:qe;xt.selected=!0,J.push({elem:lt.node(),bardata:xt})}}),G=J):(o||a)&&(p||u?e.svg.selectAll(".series-"+e.i).classed("is-selected",!0).style("opacity",1):V.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),c.selectAll(".bar.is-selected").each(function(qe,je){var lt=d3.select(this);(t=e.dataset)||(t=qe),a&&!m?p?t=e.dataset[je].data[e.i]:(t[je][e.i]&&(t=t[je][e.i]),t[e.i]&&t[e.i][je]&&(t=t[e.i][je]),t[je]&&t[je][e.i]&&(t=t[je][e.i])):m&&!u?(t[U]&&t[U].data[je]&&(t=t[U].data[je]),a&&(e.dataset[U].selected=!0)):(t[je].data[e.i]&&(t=t[je].data[e.i]),t[e.i]&&t[e.i].data[je]&&(t=t[e.i].data[je]),t[je]&&t[je].data[e.i]&&(t=t[je].data[e.i])),t.selected=!0,J.push({elem:lt.node(),data:t})}),G=J);else if(u&&m&&o)t=n[0]&&n[0].data?n[0].data:e.d,w.classed("is-selected",!0).style("opacity",1),G.push({elem:w.nodes(),data:t[e.i]});else if(!u&&!p||m||!o&&!a){if(o||a){var te=e.type==="bar"?"g[role=listitem]:nth-child(".concat(e.i+1,") .bar"):".bar:nth-child(".concat(e.i+1,")");c.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat(e.i+2,")")).style("font-weight","bolder"),c.selectAll("".concat(te)).classed("is-selected",!0).style("opacity",1),c.selectAll(".bar.is-selected").each(function(qe,je){var lt=d3.select(this),xt=qe;n&&(xt=a&&m&&n[je][e.i]!==void 0?n[je][e.i]:n[je].data[e.i]),xt.selected=!0,J.push({elem:lt.nodes(),data:xt,index:e.i})}),G=J}else if(r){c.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var de=n&&n[0]&&n[0].data?n[0].data[e.i]:e.d?e.d.data:e.d;if((de=de||{}).selected=!0,w.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),G.push({elem:w.nodes(),data:de,index:e.i}),e.i===void 0){var H=c.selectAll(".slice")._groups[0];e.i=0;for(var he=0;he<H.length;he++)if($(H[he]).attr("class").includes("is-selected")){e.i=he;break}}if(e.series[0].display&&e.series[0].display==="twocolumn"&&this.hasLegendPopup){var ie=e.series[e.i],me=e.settings.type==="donut"?"pie":e.settings.type,ke=ce.chartColor(e.i,me||(e.series.length===1?"bar-single":"bar"),e.series[e.i]),De=ce.chartColorName(e.i,me||(e.series.length===1?"bar-single":"bar"),e.series[e.i]),Me="";De.substr(0,1)==="#"?(Me=$('<span class="chart-legend-color"></span>'),ie.pattern||Me.css("background-color",ke)):Me=$('<span class="chart-legend-color '.concat(ie.pattern?"":De,'"></span>'));var Ve=$('<span class="chart-legend-item-text">'.concat(_e.stripTags(ie.name),"</span>")),Ke=e.container.find(".chart-legend-item");Ke.empty(),Ke.append(Me,'<span class="audible">'.concat(L.translate("Highlight"),"</span>"),Ve),Ke.attr("index-id","chart-legend-".concat(e.i)),e.container.find(".list-button").data("popupmenu").menu.children().removeClass("is-hidden"),$(e.container.find(".list-button").data("popupmenu").menu.children().get(e.i)).addClass("is-hidden")}}}else{if(c.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat((p?U:e.i)+2,")")).style("font-weight","bolder"),w.classed("is-selected",!0).style("opacity",1),i){var ct=e.isTargetBar?e.i:e.i-e.dataset[0].data.length;c.select(".target-bar.series-".concat(ct)).classed("is-selected",!0).style("opacity",1),c.select(".bar.series-".concat(ct)).classed("is-selected",!0).style("opacity",1),d3.select(c.selectAll(".bartext").nodes()[ct]).style("font-weight","bolder"),d3.select(c.selectAll(".target-bartext").nodes()[ct]).style("font-weight","bolder")}(p||i||o)&&((!i&&!o||o&&p)&&V.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),V.selectAll(".bar").each(function(qe,je){var lt=d3.select(this);if(lt.classed("is-selected")){var xt=n?n[je]:qe;xt.selected=!0,J.push({elem:lt.nodes(),data:xt,index:je})}}),p?G.push({groupIndex:U,groupElem:V.nodes()[0],groupItems:J}):G=J)}else c.selectAll(".bar, .target-bar").style("opacity",1),M.style("font-weight","bolder"),I.style("font-weight","bolder"),r&&w.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");ce.clickedLegend&&(ce.clickedLegend=!1),ce.selected=G,e.isTrigger&&$(e.container).triggerHandler(v?"selected":"unselected",[G])},ce.setSelected=function(e,t,n){if(e){var i,a,r,o,c,u=0,p=N.equals,m=n.isPie?n.svg.node().nextSibling:n.svg.node().parentNode.nextSibling,v=d3.select(m),w=v.node()&&v.classed("chart-legend"),C=function(A){var S=!!A;(A=S?d3.select(A):n.svg).selectAll(".bar").each(function(M,I){M&&u<1&&(e.fieldName!==void 0&&e.fieldValue!==void 0&&e.fieldValue===M[e.fieldName]||e.index!==void 0&&e.index===I||e.data&&p(e.data,n.chartData[M.index].data[I])||e.elem&&$(this).is(e.elem))&&(u++,a=d3.select(this),i=I,S&&!n.isStacked&&(r=!0))})};n.isGrouped||n.isStacked&&!n.isSingle?(n.chartData.forEach(function(A,S){u<1&&(o=$(n.svg.select('[data-group-id="'+S+'"]').node()),(e.groupName!==void 0&&e.groupValue!==void 0&&e.groupValue===A[e.groupName]||e.groupIndex!==void 0&&e.groupIndex===S||e.data&&p(e.data,A)||e.elem&&o.is(e.elem))&&e.fieldName===void 0&&e.fieldValue===void 0&&e.index===void 0&&(u++,a=n.svg.select('[data-group-id="'+S+'"]').select(".bar"),i=S,n.isStacked&&!n.isGrouped&&(r=!0)))}),u<1&&(c=n.svg.selectAll(".series-group")).nodes().length&&c.each(function(){C(this)})):C(),u>0&&(t||!a.classed("is-selected"))&&(r?w&&$(v.selectAll(".chart-legend-item").nodes()[i]).trigger("click.chart"):a.dispatch("click"))}},ce.labelsColide=function(e){var t=e.selectAll(".x text"),n=!1;return t.each(function(i,a){var r,o=this.getBoundingClientRect();t.each(function(c,u){a!==u&&(r=this.getBoundingClientRect(),!(o.right<r.left||o.left>r.right||o.bottom<r.top||o.top>r.bottom)&&(n=!0))})}),n},ce.applyAltLabels=function(e,t,n,i,a){(i?e.selectAll(i):e.selectAll(".x text")).each(function(r,o){var c=t[o]?t[o][n]:"";c=c||(a?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(c)})},ce.triggerContextMenu=function(e,t,n,i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();var a=$.Event("contextmenu");a.target=t,a.pageX=i.pageX,a.pageY=i.pageY,$(e).trigger(a,[t,n])},ce.calculateTextRenderWidth=function(e,t){var n,i;t=N.mergeSettings(void 0,t,{soho:"700 12px arial",uplift:"600 14px arial",classic:"700 12px arial",new:"600 14px arial"});var a=((ft==null||(n=ft?.currentTheme)===null||n===void 0||n==null?void 0:n.id)||"").match(/soho|uplift|new|classic/);if(a=a?a[0]:"new",this.canvas=this.canvas||(this.canvas=document.createElement("canvas")),!this.canvas)return 0;var r=(i=this.canvas)===null||i===void 0||i==null?void 0:i.getContext("2d");return r!=null&&r?.font?(r.font=t[a],r.measureText(e).width):0},ce.calculatePercentage=function(e,t){return 100*e/t},ce.getPercentage=function(e,t){return e*t/100},ce.trimText=function(e,t){return e.length<=t?e:"".concat(e.substr(0,t),"...")},ce.getLabel=function(e,t){var n=e.name;return t.xxsmall||t.xsmall||t.small?n=e.shortName||e.abbrName||e.name:t.medium&&(n=e.abbrName||e.name),n},ce.wrap=function(e,t,n){n||(n=1.27),t||(n=60),e.each(function(){var i=d3.select(this),a=i.text().split(/\s+/).reverse(),r="",o=[],c=0;if(!(a.length<=1))for(var u=n,p=i.attr("y"),m=i.attr("x"),v=parseFloat(i.attr("dy")),w=i.text(null).append("tspan").attr("x",m).attr("y",p).attr("dy","".concat(v,"em"));r=a.pop();)o.push(r),w.text(o.join(" ")),w.node().getComputedTextLength()>t&&(o.pop(),w.text(o.join(" ")),o=[r],w=i.append("tspan").attr("x",m).attr("y",p).attr("dy","".concat(++c*u+v,"em")).text(r))})};var pi="bullet",on={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function On(e,t){this.settings=N.mergeSettings(e,t,on),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}On.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),this.settings.animate==="initial"&&(this.settings.animate=!1),this},build:function(){var e=this,t=this.settings.dataset[0],n=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var i=0,a=[],r=t.data[0]?t.data[0].tooltip:[],o=!1,c=this.element.parent(),u=30,p=35,m=35,v=40,w=c.width()-v-p,C=c.height()-u-m-30;C=C<0?50:C;for(var A=d3.select(this.element[0]).append("svg").attr("width",w+v+p).attr("height",C+u+m).append("g").attr("transform","translate(".concat(v,",").concat(u,")")),S=function(G,J,te){function de(H,he,ie){var me=H(he,ie);return me!==void 0?me:he}return t.format&&typeof t.format[G]=="function"?de(t.format[G],J,te):t.format&&typeof t.format[G]=="string"?d3.format(t.format[G])(J):e.settings.format&&typeof e.settings.format[G]=="function"?de(e.settings.format[G],J,te):e.settings.format&&typeof e.settings.format[G]=="string"?d3.format(e.settings.format[G])(J):J},M=function(G,J){return S("ranges",G,J)},I=function(G){return S("difference",G)},z=t.data.length===1,V=function(G){var J=e.settings.animate?400:0,te=20,de=e,H=t.data[G],he=H.ranges.slice().sort(d3.descending),ie=H.markers?H.markers.slice().sort(d3.descending):[],me=H.measures?H.measures.slice().sort(d3.descending):[],ke=H.ranges.slice().sort(d3.ascending),De=H.markers?H.markers.slice().sort(d3.ascending):[],Me=H.measures?H.measures.slice().sort(d3.ascending):[],Ve=z?"":"-group".concat(G);ie.length===0&&(ie=me,De=Me,o=!0);var Ke=A.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*G,")"));Ke.append("g").append("text").attr("class","title").attr("dy","-10px").text(function(){return H.title}).call(function(Xe){var en=Xe._groups[0][0];N.addAttributes($(en),t,t.attributes,"title".concat(Ve))}).append("tspan").attr("class","subtitle").attr("dx","15px").text(function(){return H.subtitle}).call(function(Xe){var en=Xe._groups[0][0];N.addAttributes($(en),t,t.attributes,"subtitle".concat(Ve))});var ct=Math.max(he[0],ie[0],me[0]),qe=Math.min(ke[0],De[0],Me[0]);qe=qe<0?qe:0;var je,lt,xt=d3.scaleLinear().domain([qe,ct]).range([0,w]).nice(),sn=(lt=(je=xt)(0),function(Xe){return Math.abs(je(Xe)-lt)}),Xt=Ke.selectAll("rect.range").data(he),yn=!1,qn=0;de.element.off("dblclick.".concat(de.namespace)).on("dblclick.".concat(de.namespace),"*",function(Xe){Xe.stopImmediatePropagation()}),Xt.enter().append("rect").call(function(Xe){Xe._groups.forEach(function(en){en.forEach(function(wn,Vt){N.addAttributes($(wn),t,t.attributes,"range".concat(Vt).concat(Ve))})})}).attr("class",function(Xe,en){return"range s".concat(en)}).attr("data-idx",G).attr("width",0).attr("x",function(Xe){return xt(Xe<0?Xe:0)}).style("fill",function(Xe,en){return t.barColors?t.barColors[en]:""}).attr("height",te).on("click.".concat(de.namespace),function(){var Xe=d3.select(this);qn=setTimeout(function(){yn||de.element.trigger("selected",[Xe,t.data[Xe.attr("data-idx")]]),yn=!1},200)}).on("dblclick.".concat(de.namespace),function(){var Xe=d3.select(this);clearTimeout(qn),yn=!0,de.element.trigger("dblclick",[Xe,t.data[Xe.attr("data-idx")]])}).on("mouseenter.".concat(de.namespace),function(Xe,en,wn){var Vt=d3.select(this),tn=t.data[Vt.attr("data-idx")],Ti=this.getBoundingClientRect(),Ut="<p>".concat(M(en,wn),"</p>"),hn=function(){var ra=ce.tooltipSize(Ut),Ai=Ti.left+Ti.width-ra.width/2,Jt=Ti.top-ra.height+$(window).scrollTop()-5;Ut!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[n?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(Ai,Jt,Ut,"top"))};if(tn.tooltip&&tn.tooltip[wn]&&(Ut=tn.tooltip[tn.tooltip.length-wn-1]),r&&typeof r=="function"&&!a[wn]){Ut="";var Wn=!0;i=setInterval(function(){Wn&&(Wn=!1,r(function(ra){Ut=ra,a[G]=ra})),Ut!==""&&(clearInterval(i),hn())},10)}else r=at(r)==="object"?"":r,Ut=a[G]||r||Ut||"",hn()}).on("mouseleave.".concat(de.namespace),function(){clearInterval(i),ce.hideTooltip()}).on("contextmenu.".concat(de.namespace),function(Xe,en){ce.triggerContextMenu(de.element,d3.select(this).nodes()[0],en,Xe)}).merge(Xt).transition().duration(J).attr("width",sn);var Rn=Ke.selectAll("rect.measure").data(me);Rn.enter().append("rect").call(function(Xe){Xe._groups.forEach(function(en){en.forEach(function(wn,Vt){N.addAttributes($(wn),t,t.attributes,"measure".concat(Vt).concat(Ve))})})}).attr("class",function(Xe,en){return"measure s".concat(en)}).attr("width",0).attr("height",3).attr("x",function(Xe){return xt(Xe<0?Xe:0)}).style("fill",function(Xe,en){return t.lineColors?t.lineColors[en]:""}).attr("y",8.5).merge(Rn).transition().duration(J).attr("width",sn);var Ln=ie.length===1,bt=Ke.selectAll("line.marker").data(ie);bt.enter().append("line").call(function(Xe){Xe._groups.forEach(function(en){en.forEach(function(wn,Vt){var tn=Ln?"marker".concat(Ve):"marker".concat(Vt).concat(Ve);N.addAttributes($(wn),t,t.attributes,tn)})})}).attr("class",o?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",function(Xe,en){return t.markerColors?t.markerColors[en]:""}).attr("y1",te/6).attr("y2",100/6).merge(bt).transition().duration(J).attr("x1",xt).attr("x2",xt).attr("y1",te/6).attr("y2",100/6);var Fe=(ie[0]>me[0]?"-":"+")+Math.abs(ie[0]-me[0]);Math.abs(ie[0]-me[0])!==0&&bt.enter().append("text").call(function(Xe){var en=Xe._groups[0][0];N.addAttributes($(en),t,t.attributes,"difference".concat(Ve))}).attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",ce.isRTL?"-20px":"20px").attr("x",0).text(I(Fe)).merge(bt).transition().duration(J).attr("x",function(){var Xe=0;return Ke.selectAll(".measure").each(function(en){var wn=sn(en),Vt=xt(en);wn>Xe&&(Xe=wn),Vt>Xe&&(Xe=Vt)}),ce.isRTL?-Xe:Xe}).style("opacity",1);var En=Ke.selectAll("g.tick").data(xt.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);En.append("line").attr("y1",te).attr("y2",Math.round(140/4.7)),En.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",function(Xe){return Xe<0?"negative-value":"positive-value"}).text(function(Xe,en){return M(Xe,en)}),En.transition().duration(J).attr("transform",function(Xe){return"translate(".concat(xt(Xe),",0)")}).style("opacity",1),ce.isRTL&&ce.isIE&&A.selectAll("text").attr("transform","scale(-1, 1)")},U=0;U<t.data.length;U++)V(U);return ce.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".range").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],pi),$.removeData(this.element[0],"chart"))}};var Pi="completion-chart",Qo={dataset:[]};function ji(e,t){this.settings=N.mergeSettings(e,t,Qo),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}ji.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var e=this,t=this.settings.dataset[0];this.settings.dataset.length===0&&((t={}).data=[{name:{text:L?L.translate("NoData"):"No data available"},completed:{value:0}}]);var n=t.data[0],i=this.settings.type==="completion-target",a=this.settings.type==="targeted-achievement";this.element.addClass("completion-chart").addClass("".concat(this.settings.type==="targeted-achievement"?" chart-targeted-achievement":"")).attr("role","image"),n.total=$.extend({},{value:100},n.total);var r,o=function(ie){return ie===void 0},c=function(ie,me){var ke=me?0:"";return o(ie)?ke:ie},u=function(ie,me){return me=me||n,Math.round(ie/c(me.total.value,!0)*100)},p=function(ie){return L.formatNumber(ie/100,{style:"percent",maximumFractionDigits:0})},m=function(ie,me){var ke=ie.toString();return ke.indexOf("%")!==-1?function(De,Me){return De/100*c((Me=Me||n).total.value,!0)}(ke.replace(/%/g,""),me):ie},v=function(ie,me,ke,De){var Me=u(me,De),Ve=(Me=Me<0?0:Me)>100?100:Me;if(ie[0].style.width="".concat(Ve,"%"),ke>0){var Ke=u(ke,De);ie[0].style.left="".concat(Ke,"%")}Ve===0&&(ie[0].className+="is-empty")},w=function(ie,me,ke){var De=ke?ie._value:ie.value;return ie&&!o(De)&&ie.format?function(Me,Ve,Ke){return Ve===".0%"?p(u(Me,Ke)):d3.format(Ve||"m")(Me)}(m(De,me),ie.format,me):ie?m(De,me):0},C=this,A=$.extend({},{show:!1,color1:"",color2:"inverse"},n.percentText);o(A.color)||A.color1!==""||(A.color1=A.color);var S,M={body:$('<div class="total bar" />')},I=function(ie){var me={};return(ie=ie||n).info&&!o(ie.info.color)&&n.info.color.indexOf("#")===0&&(me.info=!0),ie.completed&&!o(ie.completed.color)&&ie.completed.color.indexOf("#")===0&&(me.completed=!0),ie.remaining&&!o(ie.remaining.color)&&ie.remaining.color.indexOf("#")===0&&(me.remaining=!0),ie.targetline&&!o(ie.targetline.color)&&ie.targetline.color.indexOf("#")===0&&(me.targetline=!0),me}();if(i||a){var z,V=function(ie){var me="",ke={};return(ie=ie||n).total.difference&&(ke.value=ie.total.value-ie.completed.value,ke.format=n.total.format),me=(ie.total.textOnly?"":w(ie.total.difference?ke:ie.total))+(ie.total.text||""),a&&ie.remaining?(ie.remaining.textOnly?"":w(ie.remaining))+(ie.remaining.text||""):me}();M.body.addClass("chart-completion-target".concat(a?" chart-targeted-achievement":"")),z=n.completed.color&&n.completed.color==="error"&&n.completed.iconTooltip?n.completed.iconTooltip:"Critical",M.label=`<span class="label">
        <span class="name">`.concat(c(n.name.text)," ").concat(n.completed.color&&n.completed.color==="error"?'<svg class="icon-error icon" focusable="true" role="presentation" title="'.concat(z,'"><use href="#icon-error"></use></svg>'):"",`</span>
        <span class="l-pull-right total value">`).concat(V,`</span>
      </span>`),$("svg[title]").tooltip()}else{M.body.addClass("chart-completion");var U=c(n.name.text),G=c(n.completed.color),J=c(n.info.color),te=n.info.color&&!I.info?J:"",de=c(n.info.text);I.completed||(te=G);var H="";n.info.color&&I.info&&(H=J),I.completed&&(H=G);var he=n.info&&!o(n.info.value)?c(n.info.value):w(n.completed);M.label='<b class="label name">'.concat(U,`</b>
      <b class="label info `).concat(te,` colored">
      <span class="value `).concat(te,'" ').concat(H?'style="color:'.concat(H):"",'">').concat(he,`</span>
      <span class="text `).concat(te,'" ').concat(H?'style="color:'.concat(H):"",'">').concat(de,`</span>
      </b>`)}return n.remaining?M.remaining="".concat('<div class="target remaining bar').concat(I.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(I.remaining?' style="color:'.concat(n.remaining.color,";background-color:").concat(n.remaining.color,';"'):"",'">').concat(a?"":"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(I.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(I.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(w(n.remaining),"</span><br />")+'<span class="text'.concat(I.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(I.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(c(n.remaining.text),"</span>")+"</span>","</div>"):M.remaining='<div class="target remaining bar" style="opacity: 0"></div>',n.completed&&a&&(S=S||n,A._value=S.completed?S.completed.value:0,A.percent=u(c(A._value,!0),S),A.format=".0%",A._text=A.text!==void 0?A.text:A.value!==void 0?p(A.value):w(A,S,!0),A.color=A[A.percent>55?"color2":"color1"],I.percentText=A.color.indexOf("#")===0,M.completed="".concat('<div class="completed bar').concat(I.completed?"":" ".concat(c(n.completed.color)),'"').concat(I.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",'"></div>').concat(A.show?'<div class="chart-percent-text'.concat(I.percentText||A.color===""?"":" ".concat(A.color),'"').concat(I.percentText?' style="color:'.concat(A.color,';"'):"",">").concat(A._text,"</div>"):"",'<span class="completed-label"').concat(i||a?"":' class="audible"',">")+'<span class="text">'.concat(c(n.completed.text),"</span>")+"</span>"),(n.completed.text||n.completed.format&&!a)&&this.element.addClass("chart-completion-target-padding"),n.completed&&!a&&(M.completed="".concat('<div class="completed bar').concat(I.completed?"":" ".concat(c(n.completed.color)),'"').concat(I.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",">")+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(I.completed?"":" ".concat(c(n.completed.color)),'"').concat(I.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(w(n.completed),"</span><br />")+'<span class="text'.concat(I.completed?"":" ".concat(c(n.completed.color)),'"').concat(I.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(c(n.completed.text),"</span>")+"</span></div>"),n.targetline&&(M.targetline="".concat('<div class="target-line targetline bar').concat(I.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(I.targetline?' style="color:'.concat(n.targetline.color,";background-color:").concat(n.targetline.color,';"'):"",'">')+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(I.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(I.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(w(n.targetline),"</span><br />")+'<span class="text'.concat(I.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(I.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(c(n.targetline.text),"</span>")+"</span></div>"),ue.append(M.body,(M.remaining||"")+(M.completed||"")+(M.targetline||""),"<a><use><svg><div><span><br>"),ue.append(this.element,M.label+M.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),r={name:$(".name",e.element),info:{value:$(".info .value",e.element),text:$(".info .text",e.element)},plainInfo:{value:$(">.value",e.element),text:$(">.text",e.element)},completed:{bar:$(".completed.bar",e.element),value:$(".completed .value",e.element),text:$(".completed .text, .completed-label .text",e.element)},remaining:{bar:$(".remaining.bar",e.element),value:$(".remaining .value",e.element),text:$(".remaining .text",e.element)},targetline:{bar:$(".targetline",e.element),value:$(".targetline .value",e.element),text:$(".targetline .text",e.element)},total:{bar:$(".total.bar",e.element),value:$(".total.value",e.element)},percentText:$(".chart-percent-text",e.element)},function(){if(t.attributes){var ie=function(me,ke){return N.addAttributes(me,t,t.attributes,ke)};ie(r.name,"name"),ie(r.info.value,"info-value"),ie(r.info.text,"info-text"),ie(r.plainInfo.value,"info-value"),ie(r.plainInfo.text,"info-text"),ie(r.completed.bar,"completed-bar"),ie(r.completed.value,"completed-value"),ie(r.completed.text,"completed-text"),ie(r.remaining.bar,"remaining-bar"),ie(r.remaining.value,"remaining-value"),ie(r.remaining.text,"remaining-text"),ie(r.targetline.bar,"targetline-bar"),ie(r.targetline.value,"targetline-value"),ie(r.targetline.text,"targetline-text"),ie(r.total.bar,"total-bar"),ie(r.total.value,"total-value"),ie(r.percentText,"percent-text")}}(),function(ie){ie=ie||n,r.name.data("jsonData",{name:ie.name}),r.info.value.add(r.info.text).data("jsonData",{info:ie.info}),r.completed.bar.add(r.completed.value).add(r.completed.text).data("jsonData",{completed:ie.completed}),r.remaining.bar.add(r.remaining.value).add(r.remaining.text).data("jsonData",{remaining:ie.remaining}),r.targetline.bar.add(r.targetline.value).add(r.targetline.text).data("jsonData",{targetline:ie.targetline}),r.total.bar.add(r.total.value).data("jsonData",{total:ie.total}),r.percentText.data("jsonData",{percentText:ie.percentText})}(),function(ie){var me;if((ie=ie||n).completed){me=m(ie.completed.value,ie),v(r.completed.bar,me,0,ie);var ke,De=r.completed.bar.data("tooltip");ke=ie.completed.tipText?ie.completed.tipText:typeof ie.completed.value=="string"?ie.completed.value:"".concat(Math.round(ie.completed.value/ie.total.value*100),"%"),De?De.setContent(ke,!1):r.completed.bar.tooltip({content:ke})}if(ie.remaining){me=m(ie.remaining.value,ie),v(r.remaining.bar,me,m(ie.completed.value,ie),ie),i&&!a&&setTimeout(function(){var Ke=$(".remaining",C.element),ct=$(".total",C.element),qe=$(".completed .value",C.element)[0].getBoundingClientRect(),je=Ke.find(".value")[0].getBoundingClientRect();Ke.add(ct)[qe.right>je.left-20?"addClass":"removeClass"]("overlap")},500);var Me,Ve=r.remaining.bar.data("tooltip");Me=ie.remaining.tipText?ie.remaining.tipText:typeof ie.remaining.value=="string"?ie.remaining.value:"".concat(Math.round(ie.remaining.value/ie.total.value*100),"%"),Ve?Ve.setContent(Me,!1):r.remaining.bar.tooltip({content:Me})}ie.targetline&&(me=m(ie.targetline.value,ie),function(Ke,ct){var qe=ct>100?100:ct<0?0:ct;Ke[0].style.left="".concat(qe,"%")}(r.targetline.bar,me))}(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Pi),function(){e.updated()}),this},updated:function(e){var t=e.type||this.settings.type;return this.settings=e,this.settings.type=t,e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat(Pi)),this},destroy:function(){this.element.empty().removeClass("completion-chart"),ce.removeTooltip(),this.teardown(),$.removeData(this.element[0],Pi),$.removeData(this.element[0],"chart")}};var ai="sparkline",Ar={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function si(e,t){this.settings=N.mergeSettings(e,t,Ar),this.element=$(e),this.init()}si.prototype={init:function(){if(!this.settings.colors){var e=ft.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=e.azure[ft.uplift||ft.new?"80":"70"].value,this.settings.colors[1]=e.slate[40].value,this.settings.colors[2]=e.slate[30].value,this.settings.colors[3]=e.slate[20].value}return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var e,t,n,i=this,a=this,r=this.element.closest(".is-personalizable").length>0,o=[],c=[],u=a.settings.tooltip,p=0,m=0,v=0,w=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),C=w.width>300?4:3,A=a.settings.dataset;for(n=0;n<A.length;n++)m=d3.min([d3.min(A[n].data),m]),p=d3.max([d3.max(A[n].data),p]),v=d3.max([A[n].data.length,v]);var S=w.width,M=w.height,I=d3.scaleLinear().domain([0,v]).range([10,S-10]),z=d3.scaleLinear().domain([m,p]).range([M-10,10]),V=d3.line().x(function(ke,De){return I(De)}).y(function(ke){return z(ke)});ce.appendTooltip();var U=d3.select(this.element[0]).append("svg").attr("height",M).attr("width",S);if(a.settings.isMedianRange){p=d3.max(A[0].data),m=d3.min(A[0].data);var G=S-45,J=d3.median(A[0].data),te=p-m,de=d3.scaleLinear().domain([m,p]).range([0,M]),H=M-de(J>te?J:te),he=M-de(J<te?J:te),ie=$("html").is('[class*="dark"]')?"#F0F0F0":"#525257";U.append("g").attr("class","medianrange").attr("transform",function(){return"translate(".concat(10,",").concat(H,")")}).append("rect").attr("width",G).attr("height",he).style("opacity","0.06").style("fill",ie).call(function(ke){ke._groups.forEach(function(De){De.forEach(function(Me){var Ve=A[0];N.addAttributes($(Me),Ve,Ve.attributes,"medianrange")})})}).on("mouseenter.".concat(a.namespace),function(){var ke=this.getBoundingClientRect(),De='<p class="sparkline-tooltip">'+L.translate("Median")+": <b>"+J+"</b><br>"+L.translate("Range")+": <b>"+te+"</b>"+(a.settings.isPeakDot?"<br>"+L.translate("Peak")+": <b>"+p+"</b>":"")+"</p>",Me=function(){var Ke=ce.tooltipSize(De),ct=ke.left+(ke.width-Ke.width)/2,qe=ke.top-Ke.height-5;De!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[r?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(ct,qe,De,"top"))};if(u&&typeof u=="function"&&!o[n]){De="";var Ve=!0;e=setInterval(function(){Ve&&(Ve=!1,u(function(Ke){De=Ke,o[n]=Ke})),De!==""&&(clearInterval(e),Me())},10)}else u=at(u)==="object"?"":u,De=o[n]||u||A[0].tooltip||De||"",Me()}).on("mouseleave.".concat(a.namespace),function(){clearInterval(e),ce.hideTooltip()})}var me=function(){var ke=A[n];U.append("g").append("path").attr("d",V(ke.data)).attr("stroke",a.settings.isMinMax?"#999999":i.sparklineColors(n)).attr("class","team connected-line").call(function(De){De._groups.forEach(function(Me){Me.forEach(function(Ve){N.addAttributes($(Ve),ke,ke.attributes,"connected-line")})})})};for(n=0;n<A.length;n++)me();return m=d3.min(A[0].data),U.selectAll(".point").data(A[0].data).enter().append("circle").attr("r",function(ke){return a.settings.isMinMax&&p===ke||a.settings.isMinMax&&m===ke?C+1:a.settings.isDots||a.settings.isPeakDot&&p===ke?C:0}).attr("class",function(ke){return a.settings.isPeakDot&&p===ke&&!a.settings.isMinMax?"point peak":a.settings.isMinMax&&p===ke?"point max":a.settings.isMinMax&&m===ke?"point min":"point"}).style("fill",function(ke){return a.settings.isPeakDot&&p===ke&&!a.settings.isMinMax?"#ffffff":a.settings.isMinMax&&p===ke?"#56932E":a.settings.isMinMax&&m===ke?"#941E1E":a.sparklineColors(0)}).style("stroke",function(ke){return a.settings.isPeakDot&&p===ke&&!a.settings.isMinMax?a.sparklineColors(0):a.settings.isMinMax&&p===ke||a.settings.isMinMax&&m===ke?"none":"#ffffff"}).style("cursor","pointer").attr("cx",function(ke,De){return I(De)}).attr("cy",function(ke){return z(ke)}).call(function(ke){ke._groups.forEach(function(De){De.forEach(function(Me,Ve){var Ke=A[0];N.addAttributes($(Me),Ke,Ke.attributes,"point-".concat(Ve))})})}).on("mouseenter.".concat(a.namespace),function(ke,De){var Me=this.getBoundingClientRect(),Ve="<p>".concat(A[0].name?"".concat(A[0].name,"<br> ").concat(a.settings.isMinMax&&p===De?"".concat(L.translate("Highest"),": "):a.settings.isMinMax&&m===De?"".concat(L.translate("Lowest"),": "):a.settings.isPeakDot&&p===De?"".concat(L.translate("Peak"),": "):""):"","<b>").concat(De,"</b></p>"),Ke=function(){var qe=ce.tooltipSize(Ve),je=Me.left-qe.width/2+6,lt=Me.top-qe.height-8;Ve!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[r?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(je,lt,Ve,"top"))};if(u&&typeof u=="function"&&!c[n]){Ve="";var ct=!0;t=setInterval(function(){ct&&(ct=!1,u(function(qe){Ve=qe,c[n]=qe})),Ve!==""&&(clearInterval(t),Ke())},10)}else u=at(u)==="object"?"":u,Ve=c[n]||u||A[0].tooltip||Ve||"",Ke();d3.select(this).attr("r",a.settings.isMinMax&&p===De||a.settings.isMinMax&&m===De?C+2:C+1)}).on("mouseleave.".concat(a.namespace),function(ke,De){clearInterval(t),ce.hideTooltip(),d3.select(this).attr("r",a.settings.isMinMax&&p===De||a.settings.isMinMax&&m===De?C+1:C)}).on("contextmenu.".concat(a.namespace),function(ke,De){var Me={value:De,name:A[0].name||""};a.settings.isMinMax&&p===De&&(Me.highest=!0),a.settings.isMinMax&&m===De&&(Me.lowest=!0),a.settings.isPeakDot&&p===De&&(Me.peak=!0),ce.triggerContextMenu(a.element,d3.select(this).nodes()[0],Me,ke)}),this.element.trigger("rendered",U),this},calculateAspectRatioFit:function(e){var t=Math.min(e.maxWidth/e.srcWidth,e.maxHeight/e.srcHeight);return{width:e.srcWidth*t,height:e.srcHeight*t}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(ai),function(t,n){e.updated(n)}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".medianrange").off(t(["mouseenter","mouseleave"])),this.element.find(".point").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],ai),$.removeData(this.element[0],"chart"))}};var Rs="emptymessage",ba={title:null,info:null,icon:null,button:null,height:null,color:"slate",attributes:null};function Vn(e,t){this.settings=N.mergeSettings(e,t,ba),this.element=$(e),this.init()}Vn.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var e,t=this.settings,n=t.height==="small";if(t!=null&&(e=t?.button)!==null&&e!==void 0&&e?.isPrimary&&(this.settings.color="azure"),t.icon&&t.icon!=="null"&&t.icon!==null&&t.icon!==void 0&&!n&&$(`<div class="empty-icon">
          <svg class="icon-empty-state is-`.concat(this.settings.color,`" focusable="false" aria-hidden="true" role="presentation">
            <use href="#`).concat(t.icon,`"></use>
          </svg></div>`)).appendTo(this.element),t.title&&(t.title==="[NoData]"&&(t.title=L?L.translate("NoData"):"No data available"),$('<div class="empty-title">'.concat(t.title,"</div>")).appendTo(this.element)),t.info&&!n&&$('<div class="empty-info">'.concat(t.info,"</div>")).appendTo(this.element),t.button&&!n){var i=`<div class="empty-actions">
          <button type="button" class="`.concat(t.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(t.button.cssClass,' hide-focus" ').concat(t.button.id?'id="'.concat(t.button.id,'"'):"",`>
            <span>`).concat(t.button.text,`</span>
          </button>
        </div>`);$(i).appendTo(this.element),t.button.click&&this.element.off("click").on("click","button",t.button.click)}return N.addAttributes(this.element,this,t.attributes,"",!0),N.addAttributes(this.element.find(".empty-actions button"),this,t.attributes,"btn",!0),this},updated:function(e){this.settings=N.mergeSettings(this.element,e,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],Rs),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(e){return this.each(function(){var t=$.data(this,Rs);t?t.updated(e):t=$.data(this,Rs,new Vn(this,e))})};var ri="line",ia={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,selectable:!0,hideDots:!1,animate:!0,redrawOnResize:!0,fitHeight:!0,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function oi(e,t){this.settings=N.mergeSettings(e,t,ia),this.element=$(e),ce.destroy(e),this.init()}oi.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),this.settings.animate==="initial"&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,n,i,a,r=this,o=this.settings,c=this.element.closest(".is-personalizable").length>0,u="line-chart";u+=o.isBubble?" bubble":"",u+=o.isScatterPlot?" scatterplot":"",this.element.addClass(u);var p=o.dataset.length===0;if(!p){var m=0;o.dataset.forEach(function(Ue){Ue.data.length===0&&m++}),p=m===o.dataset.length}if(p)return r.element.emptymessage(o.emptyMessage),this;var v,w={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};o.isBubble&&(w.radius=0,w.radiusOnHover=0,w.strokeWidth=0),o.isScatterPlot&&(w.radius=0,w.strokeWidth=50),$.extend(!0,w,o.dots),r.dots=w,this.isRTL=L.isRTL();var C,A,S=[],M=o.tooltip,I={},z={atLeastOne:!1},V=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,I,o.axisLabels),!$.isEmptyObject(I))for(C=0,A=V.length;C<A;C++){var U=I[V[C]];U&&typeof U=="string"&&$.trim(U)!==""&&(z[V[C]]=!0,z.atLeastOne=!0)}var G="",J=0,te=o.dataset,de=o.hideDots,H=this.element.parent(),he=!!$(".widget-chart-action",H).length,ie=H.width()<450,me=function(Ue){return Ue!==void 0&&typeof Ue!="function"&&Ue!==null?typeof Ue=="boolean"?Ue?"-45":null:Ue:null},ke={large:me((e=o.xAxis)===null||e===void 0||e==null?void 0:e.rotate),small:me((t=o.xAxis)===null||t===void 0||t==null?void 0:t.rotateOnSmallView)},De=!!ke.large;De&&(ke.use=ke.large),ie&&ke.small&&(De=!0,ke.use=ke.small),he&&(o.fitHeight=!1);var Me=function(Ue,nn){return d3.max(Ue.data,function(ze){return nn?ze.value[nn]:ze.value})};if(De){te[0].data.forEach(function(Ue){Ue.name.length>G.length&&(G=Ue.name)});var Ve=Math.abs(ke.use);Ve=isNaN(Ve)?0:Ve,J=G.length*(Ve>50?5:2)}var Ke={top:z.top?he?15:40:he?5:30,right:z.right?65:55,bottom:z.bottom?De?60:50:J+35,left:z.left?75:65},ct=N.getParentAvailableHeight(r.element[0]),qe=o.fitHeight?ct:parseInt(H.height(),10),je=H.width()-Ke.left-Ke.right,lt=qe-Ke.top-Ke.bottom-30;he&&(lt-=42),r.svg=d3.select(this.element[0]).append("svg").attr("width",je+Ke.left+Ke.right).attr("height",lt+Ke.top+Ke.bottom).append("g").attr("transform","translate(".concat(Ke.left,",").concat(Ke.top,")"));var xt=te[0].data.map(function(Ue){return Ue.name}),sn={};te[0]&&te[0].valueFormatterString&&$.extend(!0,sn,te[0].valueFormatterString);var Xt,yn=function(Ue,nn){return!$.isEmptyObject(sn)&&Ue?d3.format(Ue)(Ue==="0.0%"?nn/100:nn):nn},qn={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};te[0]&&te[0].labels&&$.extend(!0,qn,te[0].labels);var Rn=(o.xAxis&&o.xAxis.scale?o.xAxis.scale:d3.scaleLinear()).range([0,je]),Ln=d3.scaleLinear().range([lt,0]),bt=d3.scaleLinear().range([1,25]);Xt=o.isBubble?{x:te.map(function(Ue){return Me(Ue,"x")}),y:te.map(function(Ue){return Me(Ue,"y")}),z:te.map(function(Ue){return Me(Ue,"z")})}:o.isScatterPlot?{x:te.map(function(Ue){return Me(Ue,"x")}),y:te.map(function(Ue){return Me(Ue,"y")})}:te.map(function(Ue){return Me(Ue)});var Fe,En,Xe=d3.max(te.map(function(Ue){return Ue.data.length})),en=Xe<=1?Xe:Xe-1,wn=Rn.domain(o.xAxis&&o.xAxis.domain?o.xAxis.domain:[0,o.isBubble||o.isScatterPlot?d3.max(Xt.x):en]),Vt=Ln.domain([0,d3.max(o.isBubble||o.isScatterPlot?Xt.y:Xt)]).nice(),tn=bt.domain([0,d3.max(o.isBubble?Xt.z:o.isScatterPlot?Xt.y:Xt)]).nice(),Ti=en;o.xAxis&&o.xAxis.ticks&&(Ti=o.xAxis.ticks==="auto"?Math.max(je/85,2):o.xAxis.ticks,(o.isBubble||o.isScatterPlot&&ie)&&(Ti=Math.round(en/2))),ie&&(Fe=o.xAxis)!==null&&Fe!==void 0&&Fe?.numTicksOnSmallView&&(Ti=(En=o.xAxis)===null||En===void 0||En==null?void 0:En.numTicksOnSmallView);var Ut,hn=d3.axisBottom(wn).ticks(Ti).tickPadding(10).tickSize(o.isBubble||o.isScatterPlot?-(lt+10):0).tickFormat(function(Ue,nn){var ze,Qe;return typeof((ze=o.xAxis)===null||ze===void 0||ze==null?void 0:ze.formatter)=="function"?o.xAxis.formatter(Ue,nn):((Qe=o.xAxis)===null||Qe===void 0||Qe==null?void 0:Qe.ticks)==="auto"?xt[Ue]:o.isBubble||o.isScatterPlot?Ue:xt[Ue]}),Wn=d3.axisLeft(Vt).ticks(8).tickSize(-(je+20)).tickPadding(r.isRTL?-18:20);if((n=o.yAxis)!==null&&n!==void 0&&n?.formatter&&Wn.tickFormat(function(Ue,nn){return typeof o.yAxis.formatter=="function"?o.yAxis.formatter(Ue,nn):Ue}),(i=o.yAxis)!==null&&i!==void 0&&i?.ticks&&Wn.ticks(o.yAxis.ticks.number,o.yAxis.ticks.format),z.atLeastOne){var ra=r.svg.append("g").attr("class","axis-labels"),Ai={top:"translate(".concat(je/2,",").concat(-10,")"),right:"translate(".concat(je+28,",").concat(lt/2,")rotate(90)"),bottom:"translate(".concat(je/2,",").concat(lt+40,")"),left:"translate(".concat(-40,",").concat(lt/2,")rotate(-90)")},Jt={top:"rotate(0deg) scaleX(-1) translate(-".concat(je/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(lt/2+5,"px, -").concat(je+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(je/2,"px, ").concat(lt+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(lt/2-5,"px, ",55,"px)")};for(C=0,A=V.length;C<A;C++)z[Ut=V[C]]&&ra.append("text").attr("class","axis-label-".concat(Ut)).attr("text-anchor","middle").attr("transform",r.isRTL?"":Ai[Ut]).style("font-size","1.25em").style("transform",r.isRTL?Jt[Ut]:"").text(I[Ut])}if(r.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(lt,")")).call(hn),r.svg.append("g").attr("class","y axis").call(Wn),r.svg.selectAll(".tick line").attr("x1","-10"),o.isBubble||o.isScatterPlot){r.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var xs=r.svg.select(".x.axis .tick line");xs.attr("x2","-10"),(!o.xAxis||o.xAxis&&!o.xAxis.hideLine)&&xs.style("opacity",1),(!o.yAxis||o.yAxis&&!o.yAxis.hideLine)&&r.svg.select(".y.axis .tick line").style("opacity",1)}if(r.isRTL&&(r.svg.selectAll("text").attr("transform","scale(-1, 1)"),r.svg.selectAll(".y.axis text").style("text-anchor","end")),De){var Ni=r.isRTL?"scale(-1, 1) rotate(".concat(ke.use,"deg)"):"rotate(".concat(ke.use,"deg)");r.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return r.isRTL?-10:-(this.getBBox().width+10)}).attr("dy","1em").attr("style","text-anchor: start; transform: ".concat(Ni," !important;"))}o.xAxis&&o.xAxis.formatText&&r.svg.selectAll(".x.axis .tick text").each(function(Ue){var nn=d3.select(this),ze=d3.select(this).text(),Qe=o.xAxis.formatText(ze,Ue);ue.html(nn.node(),Qe,"<tspan><text><glyph>")});var wa=d3.line().x(function(Ue,nn){var ze;return wn(typeof((ze=o.xAxis)===null||ze===void 0||ze==null?void 0:ze.parser)=="function"?o.xAxis.parser(Ue,nn):o.isBubble||o.isScatterPlot?Ue.value.x:nn)}).y(function(Ue){return Vt(o.isBubble||o.isScatterPlot?Ue.value.y:Ue.value)}),Yn={line:{delay:200,prevent:!1,timer:0},dot:{delay:200,prevent:!1,timer:0},symbol:{delay:200,prevent:!1,timer:0}};r.element.off("dblclick.".concat(r.namespace)).on("dblclick.".concat(r.namespace),"*",function(Ue){Ue.stopImmediatePropagation()}),te.forEach(function(Ue,nn){var ze=r.svg.append("g").attr("data-group-id",nn).attr("class","line-group");if(o.isArea){var Qe=d3.area().x(function(Ct,It){return wn(It)}).y0(lt).y1(function(Ct){return Vt(o.isBubble||o.isScatterPlot?Ct.value.y:Ct.value)});ze.append("path").datum(Ue.data).attr("fill",function(){return ce.chartColor(nn,"line",Ue)}).style("opacity",".2").attr("class","area").attr("d",Qe).call(function(Ct){Ct._groups.forEach(function(It){It.forEach(function(jt){N.addAttributes($(jt),Ue,Ue.attributes,"area")})})})}var et=ze.append("path").datum(Ue.data).attr("d",wa(Ue.data)).attr("stroke",function(){return o.isBubble||o.isScatterPlot?"":ce.chartColor(nn,"line",Ue)}).attr("stroke-width",2).attr("fill","none").attr("class","line").call(function(Ct){Ct._groups.forEach(function(It){It.forEach(function(jt){N.addAttributes($(jt),Ue,Ue.attributes,"line")})})}).on("click.".concat(r.namespace),function(){var Ct=this;r.settings.selectable&&(Yn.line.timer=setTimeout(function(){Yn.line.prevent||ce.selectElement(d3.select(Ct.parentNode),r.svg.selectAll(".line-group"),Ue,r.element,te,r.initialSelectCall,r.settings.selectable),Yn.line.prevent=!1},Yn.line.delay))}).on("dblclick.".concat(r.namespace),function(){clearTimeout(Yn.line.timer),Yn.line.prevent=!0;var Ct=[{elem:[this.parentNode],data:Ue}];r.element.triggerHandler("dblclick",[Ct])}).on("contextmenu.".concat(r.namespace),function(Ct){ce.triggerContextMenu(r.element,d3.select(this).nodes()[0],Ue,Ct)}),$t=et.node().getTotalLength?et.node().getTotalLength():0;et.attr("stroke-dasharray","".concat($t," ").concat($t)).attr("stroke-dashoffset",$t).transition().duration(o.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var At=function(Ct,It,jt){var An,an=Ct.getBoundingClientRect(),di="<p><b>".concat(jt.name," </b> ").concat((An=jt.value,d3.format(o.formatterString||",")(An)),"</p>"),Ca=function(){var Si=ce.tooltipSize(di),Kn=an.left-Si.width/2+6,pn=an.top-Si.height-18;Kn=o.isBubble||o.isScatterPlot?an.left+an.width/2-Si.width/2:Kn,di!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[c?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(Kn,pn,di,"top"))};if(o.isBubble||o.isScatterPlot){for(var _i in di=`<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>
            <b>`.concat(jt.name,"</b></div>"),jt)if(jt.hasOwnProperty(_i))if(at(jt[_i])!=="object")qn[_i]&&(di+="".concat('<div class="swatch-row"><span>').concat(qn[_i],"</span>")+"<b>".concat(Ue.name,"</b>")+"</div>");else{var Ii=jt[_i];for(var Pt in Ii)Ii.hasOwnProperty(Pt)&&qn[_i]&&(di+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(qn[_i][Pt],"</span>")+"<b>".concat(yn(sn[Pt],Ii[Pt]),"</b>")+"</div>")}di+="</div>"}if(M&&typeof M=="function"&&!S[C]){di="";var Ra=!0;v=setInterval(function(){Ra&&(Ra=!1,M(function(Si){di=Si,S[C]=Si})),di!==""&&(clearInterval(v),Ca())},10)}else{M=at(M)==="object"?"":M,di=S[C]||M||jt.tooltip||Ue.tooltip||di||"",Ca();for(var Mt=document.querySelectorAll("#svg-tooltip .swatch-caption span"),$n=0;$n<Mt.length;$n++)Mt[$n].style.backgroundColor=ce.chartColor(o.isBubble||o.isScatterPlot?jt.lineIdx:$n,"line",jt)}d3.select(this).attr("r",function(Si){return o.isBubble?2+tn(Si.value.z):w.radiusOnHover})};de||(o.isScatterPlot||ze.selectAll("circle").data(Ue.data).enter().append("circle").attr("class",w.class).call(function(Ct){Ct._groups.forEach(function(It){It.forEach(function(jt){var An=jt.__data__;N.addAttributes($(jt),An,An.attributes,"dot")})})}).attr("cx",function(Ct,It){return o.xAxis&&o.xAxis.parser?wn(o.xAxis.parser(Ct,It)):wn(o.isBubble||o.isScatterPlot?Ct.value.x:It)}).attr("cy",function(Ct){return Vt(o.isBubble||o.isScatterPlot?0:Ct.value)}).attr("r",w.radius).style("stroke-width",w.strokeWidth).style("cursor",r.settings.selectable?"pointer":"inherit").style("fill",function(){return ce.chartColor(nn,"line",Ue)}).style("opacity",o.isBubble||o.isScatterPlot?".7":"1").on("mouseenter.".concat(r.namespace),function(Ct,It){It.lineIdx=nn,At(this,0,It)}).on("mouseleave.".concat(r.namespace),function(){clearInterval(v),ce.hideTooltip(),d3.select(this).attr("r",function(Ct){return o.isBubble?tn(Ct.value.z):w.radius})}).on("click.".concat(r.namespace),function(Ct,It){var jt=this;r.settings.selectable&&(Yn.dot.timer=setTimeout(function(){Yn.dot.prevent||ce.selectElement(d3.select(jt.parentNode),r.svg.selectAll(".line-group"),It,r.element,te,r.initialSelectCall,r.settings.selectable),Yn.dot.prevent=!1},Yn.dot.delay))}).on("dblclick.".concat(r.namespace),function(Ct,It){clearTimeout(Yn.dot.timer),Yn.dot.prevent=!0;var jt=[{elem:[this.parentNode],data:It}];r.element.triggerHandler("dblclick",[jt])}).on("contextmenu.".concat(r.namespace),function(Ct,It){ce.triggerContextMenu(r.element,d3.select(this).nodes()[0],It,Ct)}),o.isScatterPlot&&ze.selectAll(".symbol").data(Ue.data).enter().append("path").attr("class","symbol").call(function(Ct){Ct._groups.forEach(function(It){It.forEach(function(jt){var An=jt.__data__;N.addAttributes($(jt),An,An.attributes,"symbol")})})}).attr("transform",function(Ct){return"translate(".concat(wn(Ct.value.x),",").concat(Vt(Ct.value.y),")")}).attr("d",d3.symbol().size(w.strokeWidth).type(function(){return d3.symbols[nn]})).style("opacity",0).style("fill",function(){return ce.chartColor(nn,"line",Ue)}).on("mouseenter.".concat(r.namespace),function(Ct,It){It.lineIdx=nn,At(this,0,It)}).on("mouseleave.".concat(r.namespace),function(){clearInterval(v),ce.hideTooltip(),d3.select(this).attr("r",function(){return w.radius})}).on("click.".concat(r.namespace),function(Ct,It){var jt=this;r.settings.selectable&&(Yn.symbol.timer=setTimeout(function(){Yn.symbol.prevent||ce.selectElement(d3.select(jt.parentNode),r.svg.selectAll(".line-group"),It,r.element,te,r.initialSelectCall,r.settings.selectable),Yn.symbol.prevent=!1},Yn.symbol.delay))}).on("dblclick.".concat(r.namespace),function(Ct,It){clearTimeout(Yn.symbol.timer),Yn.symbol.prevent=!0;var jt=[{elem:[this.parentNode],data:It}];r.element.triggerHandler("dblclick",[jt])}).on("contextmenu.".concat(r.namespace),function(Ct,It){ce.triggerContextMenu(r.element,d3.select(this).nodes()[0],It,Ct)}),o.isBubble&&ze.selectAll("circle").attr("cy",function(Ct){return Vt(Ct.value.y)}).transition().duration(o.animate?750:0).ease(d3.easeCubic).attr("r",function(Ct){return tn(Ct.value.z)}),o.isScatterPlot&&ze.selectAll(".symbol").transition().duration(o.animate?750:0).ease(d3.easeCubic).style("opacity",1))}),r.svg.selectAll(".y.axis .tick").attr("class",function(Ue){return"tick".concat(Ue===0?" tick0":"")});var xa=te.map(function(Ue){return{color:Ue.color,name:Ue.name,selectionObj:r.svg.selectAll(".line-group"),selectionInverse:r.svg.selectAll(".line-group"),data:Ue}});if(o.showLegend&&ce.addLegend(xa,o.isScatterPlot?"scatterplot":"line",o,this.element),ce.appendTooltip(),!De&&!o.xAxis&&((a=r.settings.xAxis)===null||a===void 0||!a?.rotate)&&ce.labelsColide(r.svg)){var Di=[];te.forEach(function(Ue){Di=Di.concat(Ue.data)}),ce.applyAltLabels(r.svg,Di,"shortName"),ce.labelsColide(r.svg)&&ce.applyAltLabels(r.svg,Di,"abbrName"),ce.labelsColide(r.svg)&&ce.applyAltLabels(r.svg,Di,null,null,!0)}return ce.setSelected=function(Ue,nn){var ze,Qe,et,$t=0,At=N.equals,Ct=function(It,jt,An,an){An?(et=r.svg.select('[data-group-id="'.concat(jt,'"]')).select(".dot:nth-child(".concat(an+2,")")),(typeof Ue.groupIndex=="number"&&Ue.fieldName!==void 0&&Ue.fieldValue!==void 0&&Ue.groupIndex===jt&&Ue.fieldValue===An[Ue.fieldName]||Ue.index!==void 0&&typeof Ue.groupIndex=="number"&&Ue.groupIndex===jt&&Ue.index===an||Ue.elem&&$(et.node()).is(Ue.elem)||Ue.data&&At(Ue.data,An))&&($t++,Qe=An,ze=r.svg.select('[data-group-id="'.concat(jt,'"]')))):(et=r.svg.select('[data-group-id="'.concat(jt,'"]')),(Ue.groupName!==void 0&&Ue.groupValue!==void 0&&Ue.groupValue===It[Ue.groupName]||Ue.groupIndex!==void 0&&Ue.groupIndex===jt||Ue.elem&&$(et.node()).is(Ue.elem)||Ue.data&&At(Ue.data,It))&&($t++,Qe=It,ze=et))};te.forEach(function(It,jt){$t<1&&It&&It.data&&(It.data.forEach(function(An,an){$t<1&&An&&Ct(It,jt,An,an)}),$t<1&&Ct(It,jt))}),$t>0&&(nn||!ze.classed("is-selected"))&&r.settings.selectable&&ce.selectElement(ze,r.svg.selectAll(".line-group"),Qe,r.element,te,r.initialSelectCall)},r.svg._groups.forEach(function(Ue){Ue.forEach(function(nn){var ze=$(nn).find("g.y.axis .tick"),Qe=$(nn).find("g.line-group"),et=$(nn).find("g.y.axis"),$t=ze.attr("transform"),At=r.getTransformYAxisValue($t);ze.length<2&&et.add(Qe).attr("transform","translate(0,".concat(At,")"))})}),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},getTransformYAxisValue:function(e){if(e){var t=e.split(",");return t.splice(0,1).join(""),t.join(",").slice(0,-1)}return"0"},setInitialSelected:function(){var e,t,n=this,i=0,a=function(r,o,c){r.selected&&i<1&&(i++,e=d3.select(n.svg.selectAll(".line-group").nodes()[c]),t=o)};this.settings.dataset.forEach(function(r,o){r&&a(r,r,o)}),this.settings.dataset.forEach(function(r,o){(r||r.data)&&r.data.forEach(function(c){a(c,r,o)})}),i>0&&n.settings.selectable&&(n.initialSelectCall=!0,ce.selectElement(e,n.svg.selectAll(".line-group"),t,n.element,n.settings.dataset,n.initialSelectCall)),n.initialSelectCall=!1},setTextValues:function(){var e,t,n,i=this,a=this,r={el:this.element[0].querySelector(".line-chart .axis.y")},o={el:r.el.querySelector(".tick line")},c=[].slice.call(r.el.querySelectorAll(".tick text")),u=(e=this.settings)===null||e===void 0||(e=e?.axisLabels)===null||e===void 0||e==null?void 0:e.left,p=typeof u=="string"&&u.trim()!=="",m={maxWidth:this.element.width(),boxWidth:p?23:43,transMatrix:(t=this.svg)===null||t===void 0||(t=t?.node())===null||t===void 0||(t=t?.transform)===null||t===void 0||(t=t?.baseVal)===null||t===void 0||(t=t?.consolidate())===null||t===void 0||t==null?void 0:t.matrix};if(m.transY=((n=m.transMatrix)===null||n===void 0||n==null?void 0:n.f)||30,m.customCss=function(){return{tooltip:{maxWidth:"".concat(m.maxWidth,"px")},arrow:{left:i.isRTL?"calc(100% - 20px)":"20px"}}},r.width=r.el.getBBox?r.el.getBBox().width:0,o.width=o.el&&o.el.getBBox?o.el.getBBox().width:0,m.xDiff=r.width-o.width,this.settings.selectable||this.element.find(".line").css("cursor","inherit"),c.forEach(function(w,C){var A=w.textContent,S=ce.calculateTextRenderWidth(A),M=w.parentNode;if(S>=m.boxWidth){if(m.elem=w,Be.browser.isIE11())w.textContent=ce.trimText(A,5);else{w.classList.add("hidden"),d3.select(M).append("foreignObject").attr("overflow","visible").attr("width","".concat(m.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(C)).attr("x","-".concat(m.boxWidth+(i.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var I=M.querySelector(".text.ellipsis");if(I){var z=document.createTextNode(A);I.appendChild(z)}m.elem=M.querySelector(".text")}d3.select(m.elem).on("mouseover.".concat(a.namespace),function(){var V,U,G,J,te=(V=this.getBoundingClientRect(),U=Math.ceil(S/m.maxWidth),G=V.left,J=V.top,G=G<0?30:G,J=(J<0?30:J)-36,U>1&&(J-=.5*(U-1)*33),i.isRTL&&(G=V.left-S+5),{x:G,y:J});ce.showTooltip(te.x,te.y,A,"top",m.customCss())}).on("mouseout.".concat(i.namespace),function(){return ce.hideTooltip()})}}),!p){r.width=r.el.getBBox?r.el.getBBox().width:0,o.width=o.el&&o.el.getBBox?o.el.getBBox().width:0,m.xDiff=r.width-o.width;var v=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter(function(w){return m.xDiff>=w.min&&m.xDiff<w.max});v.length&&(m.newX=v[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(m.newX,",").concat(m.transY,")")),Be.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",m.boxWidth+3))}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},width:0,getSelected:function(){return ce.selected},setSelected:function(e,t){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};ce.setSelected(e,t,n)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this.element.empty(),e&&e.dataset&&(this.settings.dataset=e.dataset),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".line-group .line").off(t(["click","dblclick","contextmenu"])),this.element.find(".line-group .symbol").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],ri),$.removeData(this.element[0],"chart"))}};var Ht="column",Cn={dataset:[],isStacked:!1,showLegend:!0,animate:!0,selectable:!0,format:null,redrawOnResize:!0,useLine:!1,hideDots:!1,ticks:9,fitHeight:!0,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Qn(e,t){this.settings=N.mergeSettings(e,t,Cn),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Qn.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),this.settings.animate==="initial"&&(this.settings.animate=!1),this},build:function(){var e,t,n,i,a,r=this,o=this.settings,c=this.element.closest(".is-personalizable").length>0,u=function(Le){return d3.format(r.settings.formatterString||",")(Le)},p=this.settings.dataset;if(this.dataset=p,p.length===0)return r.element.emptymessage(r.settings.emptyMessage),this;var m="",v=0,w=this.element.parent();$(".widget-chart-action",w).length;var C,A,S=w.width()<450,M=function(Le){return Le!==void 0&&typeof Le!="function"&&Le!==null?typeof Le=="boolean"?Le?"-45":null:Le:null},I={large:M((e=this.settings.xAxis)===null||e===void 0||e==null?void 0:e.rotate),small:M((t=this.settings.xAxis)===null||t===void 0||t==null?void 0:t.rotateOnSmallView)},z=!!I.large;if(z&&(I.use=I.large),S&&I.small&&(z=!0,I.use=I.small),z){p[0].data.forEach(function(Le){Le.name.length>m.length&&(m=Le.name)});var V=Math.abs(I.use);V=isNaN(V)?0:V,v=m.length*(V>50?5:2)}var U={},G={atLeastOne:!1},J=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,U,o.axisLabels),!$.isEmptyObject(U))for(C=0,A=J.length;C<A;C++){var te=U[J[C]];te&&typeof te=="string"&&$.trim(te)!==""&&(G[J[C]]=!0,G.atLeastOne=!0)}var de=L.isRTL(),H=this.settings.type==="column-positive-negative"||this.settings.type==="positive-negative",he=p.length===1;this.isSingle=he;var ie=!(he||!he&&r.settings.isStacked);this.isGrouped=ie;var me,ke,De,Me,Ve,Ke,ct,qe,je,lt,xt=40,sn=40,Xt=he&&p[0].name===void 0?r.settings.isStacked?20:z?v+35:50:35,yn=45,qn=N.getParentAvailableHeight(r.element[0]),Rn=o.fitHeight?qn:parseInt(w.height(),10),Ln=w.width()-yn-sn-10,bt=Rn-xt-Xt-(he&&p[0].name===void 0?r.settings.isStacked||H?30:0:40),Fe=d3.min(p,function(Le){return d3.min(Le.data,function(it){return it.value})}),En=d3.max(p,function(Le){return d3.max(Le.data,function(it){return it.value})});H&&(me=d3.min(p,function(Le){return d3.min(Le.data,function(it){return it.target})}),ke=d3.max(p,function(Le){return d3.max(Le.data,function(it){return it.target})}),Fe=d3.min([Fe,me]),En=d3.max([En,ke]),Ve={target:null,positive:null,negative:null},qe={target:"Target",positive:"Positive",negative:"Negative"},Ke={target:"neutral",positive:"good",negative:"error"},ct={},p[0]&&(p[0].attributes&&$.extend(!0,Ve,p[0].attributes),p[0].colors&&$.extend(!0,Ke,p[0].colors),p[0].legends&&$.extend(!0,qe,p[0].legends),p[0].patterns&&$.extend(!0,ct,p[0].patterns)),je=[],$.each(qe,function(Le,it){var Ft={name:it,color:Ke[Le],pattern:ct[Le],option:Le};Ve[Le]&&(Ft.data={attributes:Ve[Le]}),je.push(Ft)})),this.element.addClass("column-chart");var Xe=[],en=r.settings.tooltip,wn=d3.scaleBand().range([0,Ln]).round(!0).padding(this.settings.type==="column-grouped"?.1:0),Vt=d3.scaleBand(),tn=d3.scaleLinear().range([bt,0]),Ti=null,Ut=null;if(r.settings.isStacked){var hn={y1:[],y2:[]};a=he?p[0].data.map(function(Le,it){var Ft=0;return it===0?(hn.y1.push(Le.value),hn.y2.push(0)):(Ft=hn.y1[0]+hn.y2[0],hn.y1[0]=Le.value,hn.y2[0]=Ft),[$.extend({},Le,{y0:Ft,y:Le.value,x:Le.name,color:Le.color,pattern:Le.pattern,parentName:Le.name,tooltip:Le.tooltip})]}):p.map(function(Le,it){return Le.data.map(function(Ft,nt){var Zt=0;return it===0?(hn.y1.push(Ft.value),hn.y2.push(0)):(Zt=hn.y1[nt]+hn.y2[nt],hn.y1[nt]=Ft.value,hn.y2[nt]=Zt),$.extend({},Ft,{y0:Zt,y:Ft.value,x:Ft.name,color:Ft.color,pattern:Ft.pattern,parentName:Le.name,tooltip:Le.tooltip})})}),d3.stack()(a),Ti=d3.scaleBand().domain(d3.range(a[0].length)).rangeRound([0,Ln],.05),he&&r.settings.isStacked&&Ti.paddingInner(.095),Ut=d3.scaleLinear().domain([0,d3.max(a,function(Le){return d3.max(Le,function(it){return it.y0+it.y})})]).range([0,bt])}var Wn=p[0].data.map(function(Le){return Le.name}),ra=d3.axisBottom(wn).tickSize(0).tickPadding(12),Ai=d3.axisLeft(tn).tickSize(-Ln).tickPadding(de?-12:12).ticks(r.settings.ticks||9,d3.format(r.settings.format||"s"));r.settings.yAxis&&(r.settings.yAxis.formatter&&Ai.tickFormat(function(Le,it){return typeof r.settings.yAxis.formatter=="function"?r.settings.yAxis.formatter(Le,it):Le}),r.settings.yAxis.ticks&&r.settings.yAxis.ticks.number>1&&r.settings.yAxis.ticks.format&&Ai.ticks(r.settings.yAxis.ticks.number,r.settings.yAxis.ticks.format));var Jt=d3.select(this.element[0]).append("svg").attr("width",Ln+yn+sn).attr("height",bt+xt+Xt+(G.atLeastOne?12:0)).append("g").attr("transform","translate(".concat(de?yn+5:G.atLeastOne?yn+11:yn,`
        ,`).concat(xt-(G.atLeastOne?5:0),")"));this.svg=Jt;var xs,Ni,wa=p.map(function(Le){return Le.name}),Yn=p.map(function(Le){return d3.max(Le.data,function(it){return H?it.target:it.value})});if(r.settings.isStacked&&(xs=a.map(function(Le){return d3.max(Le,function(it){return it.y+it.y0})})),he&&(wa=p[0].data.map(function(Le){return Le.name})),H&&(Fe+=Fe/tn.ticks().length,Yn[0]+=Yn[0]/(tn.ticks().length/2)),function(){if(r.settings.isStacked&&he)De=p[0].data;else for(var Le,it=p.length-1;it>-1;it--)Le=p[it].data.map(function(Ft){return Ft}),$.extend(!0,De,Le),De=$.map(De,function(Ft){return Ft})}(),r.settings.isStacked&&!he&&(Me=wa.map(function(Le,it){return p[it]})),wn.domain(r.settings.isStacked?Wn:wa),Vt.domain(Wn).rangeRound([0,he||r.settings.isStacked?Ln:wn.bandwidth()]),tn.domain([Fe<0?Fe:r.settings.minValue||0,d3.max(r.settings.isStacked?xs:Yn)]).nice(),(!he||he&&!r.settings.isStacked)&&Jt.append("g").attr("class","x axis").attr("transform","translate(0,".concat(bt+(H?10:0),")")).call(ra),Jt.append("g").attr("class","y axis").call(Ai),de&&Fe<0){var xa,Di=0;Jt.selectAll(".axis.y text").attr("class",function(Le){return xa=d3.select(this).text().length,Di=xa>Di?xa:Di,Le<0?"negative-value":"positive-value"}).attr("x",function(Le){return Di*(Le<0?9:5)})}if(G.atLeastOne){var Ue=r.svg.append("g").attr("class","axis-labels"),nn=Ln-45,ze={top:"translate(".concat(nn/2,",").concat(-10,")"),right:"translate(".concat(nn+53,",").concat(bt/2,")rotate(90)"),bottom:"translate(".concat(nn/2,",").concat(bt+47,")"),left:"translate(".concat(-35,",").concat(bt/2,")rotate(-90)")},Qe={top:"rotate(0deg) scaleX(-1) translate(-".concat(nn/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(bt/2+5,"px, -").concat(nn+(de?55:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(nn/2,"px, ").concat(bt+47,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(bt/2-5,"px, ").concat(de?35:55,"px)")};for(C=0,A=J.length;C<A;C++)G[Ni=J[C]]&&Ue.append("text").attr("class","axis-label-".concat(Ni)).attr("text-anchor","middle").attr("transform",de?"":ze[Ni]).style("font-size","1.25em").style("transform",de?Qe[Ni]:"").text(U[Ni])}var et,$t,At=[];p.forEach(function(Le){At.push($.extend({},Le,{values:Le.data}))}),he&&(At=[],wa=p[0].data.forEach(function(Le){At.push(Le)}));var Ct=35,It=At[0]&&At[0].values?At[0].values.length:0,jt=Ln/At.length>Ct*(It+1),An=function(Le){return ce.chartColor(0,"",{color:Le})},an=function(Le,it){var Ft;Le.empty()?it():(Ft=Le.size(),Le.on("end.".concat(r.namespace),function(){--Ft===0&&it()}))},di=function(Le){var it;if(Le=H&&Le,he||H){var Ft=Le?"target-bar":"bar";it=r.svg.selectAll("rect.".concat(Ft)).data(r.settings.isStacked?a:At).enter().append("rect").call(function(Ge){Ge._groups.forEach(function(yt){yt.forEach(function(Dt){var fn=Dt.__data__;N.addAttributes($(Dt),fn,fn.attributes,Ft)})})}).attr("class",function(Ge,yt){var Dt="bar series-".concat(yt);return H&&(Dt=(Le?"target-bar series-".concat(yt):Dt)+(Ge.value>0?" positive":" negative")),Dt}).attr("width",Math.min.apply(null,[Vt.bandwidth()-2,Ct])).attr("x",function(Ge){return r.settings.isStacked?Ti(0):Vt(Ge.name)+(Vt.bandwidth()-Ct)/2}).attr("y",function(){return tn(0)>bt?bt:tn(0)}).attr("height",function(){return 0}).attr("mask",function(Ge){return H?Le?ct.target?"url(#".concat(ct.target,")"):null:Ge.value<0?ct.negative?"url(#".concat(ct.negative,")"):null:ct.positive?"url(#".concat(ct.positive,")"):null:null}).attr("data-index",function(Ge,yt){return yt}).style("cursor",r.settings.selectable?"pointer":"inherit").style("fill",function(Ge){return H?An(Le?Ke.target:Ge.value<0?Ke.negative:Ke.positive):null}),H&&Jt.selectAll(Le?".target-bartext":".bartext").data(At).enter().append("text").attr("class",function(Ge){return(Le?"target-bartext":"bartext")+(Ge.value>0?" positive":" negative")}).attr("text-anchor","middle").attr("x",function(Ge){return(Vt(Ge.name)+Vt.bandwidth()/2)*(de?-1:1)}).attr("y",function(Ge){return Le?tn(Ge.target)-6:tn(Ge.value>0?0:Ge.value)+12}).style("opacity",0).style("fill",function(Ge){return Le?"":Ge.value<0?An(Ke.negative):An(Ke.positive)}).style("font-weight","bold").text(function(Ge){return u(Le?Ge.target:Ge.value)}),it.transition().duration(r.settings.animate?1e3:0).call(an,function(){Jt.selectAll(".target-bartext, .bartext").transition().duration(r.settings.animate?300:0).style("opacity",1)}).attr("y",function(Ge){var yt=r.settings.isStacked?bt-Ut(Ge[0].y)-Ut(Ge[0].y0):Ge.value<0?tn(0):tn(Ge.value);return Le?tn(Ge.target):Ge.value<0?yt:yt>bt-3?bt-2:yt}).attr("height",function(Ge){var yt;return yt=r.settings.isStacked?Ut(Ge[0].y):Ge.value<0?bt-tn(0)-(bt-tn(Ge.value)):bt-tn(Ge.value)-(bt-tn(0)),yt=Ge.value<0?yt:yt<3?2:yt>bt?bt-tn(Ge.value):yt,Le?bt-tn(Ge.target)-(bt-tn(0)):yt})}else{if(it=Jt.selectAll(".x-value").data(r.settings.isStacked?a:At).enter().append("g").attr("class","series-group g").attr("data-group-id",function(Ge,yt){return yt}).attr("transform",function(Ge){var yt=wn(r.settings.isStacked?Wn[0]:Ge.name),Dt=wn.bandwidth();if(!r.settings.isStacked&&jt&&Dt>Ct*At.length*2&&(yt+=Dt/2/At.length/2),r.isGrouped&&!r.settings.isStacked&&(Ge.data.length===2?Dt<120?yt-=13.5:yt=wn(Ge.name):yt-=Ct/(Dt>150?2:4)),r.settings.isStacked&&Ln<290&&Dt<40){var fn,ui=((fn=At[0])===null||fn===void 0||(fn=fn?.data)===null||fn===void 0||fn==null?void 0:fn.length)||0;yt=(Ln-Dt*ui)/ui/2}return"translate(".concat(yt,",0)")}).selectAll("rect").data(function(Ge){return r.settings.isStacked?Ge:Ge.values}).enter().append("rect").call(function(Ge){Ge._groups.forEach(function(yt){yt.forEach(function(Dt){var fn=Dt.__data__;N.addAttributes($(Dt),fn,fn.attributes,"bar")})})}).attr("class",function(Ge,yt){return"series-".concat(yt," bar")}).attr("width",Math.min.apply(null,[Vt.bandwidth()-2,Ct])).attr("x",function(Ge,yt){var Dt=Math.min.apply(null,[Vt.bandwidth()-2,Ct]);return r.settings.isStacked?Ti(yt):Vt.bandwidth()/2+(Dt+2)*yt-(At[0].values.length===1||At[0].values.length===5||At[0].values.length===4?Dt/2:0)}).attr("y",function(){return tn(0)>bt?bt:tn(0)}).attr("height",function(){return 0}),r.settings.useLine&&p.length===p.map(function(Ge){return Ge.line}).length){var nt=d3.scaleBand().rangeRound([0,Ln]).domain(p.map(function(Ge){return Ge.name})),Zt=d3.scaleLinear().range([bt,0]).domain([0,d3.max(Yn)]).nice(),Un=d3.line().x(function(Ge){return nt(Ge.name)+nt.bandwidth()/2}).y(function(Ge){return Zt(Ge.line.value)}),ka=Jt.append("g").attr("class","line-group"),ni=p.map(function(Ge){return Ge.line}).filter(function(Ge){return Ge==null||Ge==null?void 0:Ge.attributes}),bi=ft.currentTheme.modeId==="dark"&&ft.new,is=ft.currentTheme.modeId==="dark"&&!ft.new;ka.append("path").call(function(Ge){Ge._groups.forEach(function(yt){yt.forEach(function(Dt){var fn;N.addAttributes($(Dt),ni[0],(fn=ni[0])===null||fn===void 0||fn==null?void 0:fn.attributes)})})}).datum(p).attr("d",Un(p)).attr("class","line").style("opacity",0).attr("stroke",is?"#BDBDBD":bi?"#C5C5C9":ft.new&&ft.currentTheme.modeId!=="dark"?"#3B3B3F":"#313236").attr("stroke-width",2).attr("fill","none"),r.settings.hideDots||ka.selectAll("circle").data(p).enter().append("circle").call(function(Ge){Ge._groups.forEach(function(yt){yt.forEach(function(Dt,fn){N.addAttributes($(Dt),ni[0],ni[0].attributes,"dot-".concat(fn+1))})})}).attr("class","dot").style("opacity",0).attr("cx",function(Ge){return nt(Ge.name)+nt.bandwidth()/2}).attr("cy",function(Ge){return Zt(Ge.line.value)}).attr("r",5).style("fill",is?"#BDBDBD":bi?"#C5C5C9":ft.new&&ft.currentTheme.modeId!=="dark"?"#3B3B3F":"#313236").style("stroke-width",2).style("cursor","default").on("mouseenter.".concat(r.namespace),function(Ge,yt){(function(Dt,fn){var ui,as,yi,$i=Dt.getBoundingClientRect(),Eo="<p><b>".concat(fn.name,"</b> ").concat(fn.value,"</p>");ui=ce.tooltipSize(Eo),as=$i.left-ui.width/2+6,yi=$i.top-ui.height-18,Eo!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[c?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(as,yi,Eo,"top"))})(this,yt.line)}).on("mouseleave.".concat(r.namespace),function(){ce.hideTooltip()})}it.transition().duration(r.settings.animate?600:0).call(an,function(){if(r.settings.useLine){var Ge=Jt.select(".line"),yt=Ge.node().getTotalLength();Ge.style("opacity",1).attr("stroke-dasharray","".concat(yt," ").concat(yt)).attr("stroke-dashoffset",yt).transition().duration(r.settings.animate?300:0).ease(d3.easeCubic).attr("stroke-dashoffset",0).call(an,function(){Jt.selectAll(".dot").transition().duration(r.settings.animate?100:0).style("opacity",1)})}}).attr("y",function(Ge){var yt=r.settings.isStacked?bt-Ut(Ge.y)-Ut(Ge.y0):Ge.value<0?tn(0):tn(Ge.value);return Ge.value<0?yt:yt>bt-3?bt-2:yt}).attr("height",function(Ge){var yt;if(r.settings.isStacked)yt=Ut(Ge.y);else{if(Ge.value<=0)return yt=bt-tn(0)-(bt-tn(Ge.value));yt=bt-tn(Ge.value)-(bt-tn(0))}return Ge.value<0?yt:yt<3?2:yt>bt?bt-tn(Ge.value):yt})}return it};H&&(et=di(!0));var Ca=di();H&&($t=d3.selectAll([].concat(Nt(et.nodes()),Nt(Ca.nodes())))),H||(r.settings.isStacked?r.settings.isStacked&&!he?Ca.style("cursor",r.settings.selectable?"pointer":"inherit").style("fill",function(){var Le=d3.select(this.parentNode).attr("data-group-id");return ce.chartColor(Le,"bar",p[Le])}).attr("mask",function(){var Le=d3.select(this.parentNode).attr("data-group-id");return p[Le].pattern?"url(#".concat(p[Le].pattern,")"):null}):r.settings.isStacked&&he&&Ca.style("fill",function(Le,it){return ce.chartColor(it,"bar",Le[0])}).attr("mask",function(Le){return Le[0].pattern?"url(#".concat(Le[0].pattern,")"):null}):Ca.style("fill",function(Le,it){return he?ce.chartColor(it,"column-single",p[0].data[it]):ce.chartColor(it,"bar",De[it])}).style("cursor",r.settings.selectable?"pointer":"inherit").attr("mask",function(Le,it){return he?p[0].data[it].pattern?"url(#".concat(p[0].data[it].pattern,")"):null:De[it].pattern?"url(#".concat(De[it].pattern,")"):null})),$.extend(ce.settings,{svg:Jt,chartType:"Column",isSingle:he,isGrouped:ie,isStacked:r.settings.isStacked});var _i=!1,Ii=0;if(r.element.off("dblclick.".concat(r.namespace)).on("dblclick.".concat(r.namespace),"*",function(Le){Le.stopImmediatePropagation()}),(H?$t:Ca).on("mouseenter.".concat(r.namespace),function(Le,it){var Ft,nt,Zt,Un,ka,ni,bi,is=$(this).index(),Ge=this,yt=$(this),Dt="",fn=null,ui=Le.pageY,as=function(xn,Dn){return xn&&Dn?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(Dn,'" mask="url(#').concat(xn,')" height="12" width="12" />')+"</svg>":""},yi=is,$i=null;r.isGrouped&&(($i={elem:d3.select(this.parentNode)}).data=$i.elem.datum().values,$i.items=$i.elem.selectAll(".bar"),$i.idx=parseInt($i.elem.attr("data-group-id"),10),yi=$i.idx*$i.data.length+is);var Eo=function(xn){ni=ce.tooltipSize(Dt);var Dn=ce.tooltip.outerHeight(),Wt=null;ue.isValidElement(fn)?(Wt=fn.getBoundingClientRect(),Ft=Wt.left-ni.width/2+Wt.width/2,fn!==$i.elem.node()?nt=Wt.top-ni.height-10:(nt=ui-Dn-25,xn?(nt+=Dn+50)>Wt.bottom+10&&(nt=Wt.bottom+10):nt=Wt.top-Dn+25)):(Wt=yt[0].getBoundingClientRect(),Ft=Wt.left-ni.width/2+yt.attr("width")/2,r.settings.isStacked?nt=Wt.top-ni.height-10:(Wt=Ge.parentNode.getBoundingClientRect(),nt=ui-Dn-25,p.length>1&&(Ft=Wt.left-ni.width/2+Wt.width/2,xn?(nt+=Dn+50)>Wt.bottom+10&&(nt=Wt.bottom+10):nt=Wt.top-Dn+25))),Dt!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[c?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(Ft,nt,Dt,xn?"bottom":"top"))},id=function(){typeof Dt=="string"?Dt=function(xn,Dn,Wt){if(Wt==null?Wt=/{{(\w+)}}/g:typeof Wt=="string"&&(Wt=new RegExp(Wt,"g")),typeof xn=="string"&&typeof Dn=="function"&&Wt instanceof RegExp)for(var Xi=9999;Wt.test(xn)&&Xi>0;)xn=xn.replace(Wt,function(Cs,sd){return Dn(Cs,sd)}),Xi--;return xn}(Dt,function(xn,Dn){var Wt=u(it[Dn]);return isNaN(Wt)?it[Dn]:Wt}):typeof Dt=="number"&&(Dt=Dt.toString())},ad=function(xn){Dt="";var Dn={elem:Ge,index:is,data:it};r.isGrouped&&(Dn.groupElem=$i.elem.node(),Dn.groupItems=$i.items.nodes(),Dn.groupIndex=$i.idx,Dn.groupData=$i.data);var Wt=function(Cs,sd){typeof Cs!="string"&&typeof Cs!="number"||(Dt=Cs,fn=sd,id())},Xi=!0;lt=setInterval(function(){Xi&&(Xi=!1,xn(Wt,Dn)),Dt!==""&&(clearInterval(lt),Eo())},10)};if(r.settings.isStacked){if(he)Dt="<p><b>".concat(u(it[0].value),"</b> ").concat(it[0].name,"</p>");else{for(Dt="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(a[0][is].name,"</b></div>"),Zt=a.length-1,Un=0;Zt>=Un;Zt--)ka=ce.chartColor(Zt,"bar",p[Zt]),Dt+="".concat('<div class="swatch-row"><div style="background-color:').concat(p[Zt].pattern?"transparent":ka,';">').concat(as(p[Zt].pattern,ka),"</div>")+"<span>".concat(a[Zt][is].parentName,"</span><b>").concat(u(a[Zt][is].value),"</b>")+"</div>";Dt+="</div>"}ni=ce.tooltipSize(Dt),Ft=yt[0].getBoundingClientRect().left-ni.width/2+yt.attr("width")/2,nt=yt[0].getBoundingClientRect().top-ni.height-10}else{if(H)Dt="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(it.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(ct.target?"transparent":An(Ke.target),';">').concat(as(ct.target,An(Ke.target)),"</div>")+"<span>".concat(qe.target,"</span><b>").concat(u(it.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(it.value<0?ct.negative?"transparent":An(Ke.negative):ct.positive?"transparent":An(Ke.positive),';">').concat(it.value<0?as(ct.negative,An(Ke.negative)):as(ct.positive,An(Ke.positive)),"</div>")+"<span>".concat(qe[it.value<0?"negative":"positive"],"</span><b>").concat(u(it.value),"</b>")+"</div></div>";else if(p.length===1)Dt="<p><b>".concat(u(it.value),"</b> ").concat(it.name,"</p>");else{var ul=d3.select(this.parentNode).datum().values;for(Dt='<div class="chart-swatch">',Zt=0,Un=ul.length;Zt<Un;Zt++)ka=ce.chartColor(Zt,"bar",De[Zt]),Dt+="".concat('<div class="swatch-row"><div style="background-color:').concat(De[Zt].pattern?"transparent":ka,';">').concat(as(De[Zt].pattern,ka),"</div>")+"<span>".concat(ul[Zt].name,"</span><b>").concat(u(ul[Zt].value),"</b>")+"</div>";Dt+="</div>",bi=ul.length>6}ni=ce.tooltipSize(Dt),Ft=yt[0].getBoundingClientRect().left-ni.width/2+yt.attr("width")/2,nt=ui-ce.tooltip.outerHeight()-25,p.length>1&&(Ft=this.parentNode.getBoundingClientRect().left-ni.width/2+this.parentNode.getBoundingClientRect().width/2,nt=this.parentNode.getBoundingClientRect().top-ce.tooltip.outerHeight()+25)}en&&typeof en=="function"&&it.tooltip===void 0&&!Xe[yi]?ad(en):(Dt=Xe[yi]||en||Dt||"",Xe[yi]||it.tooltip===!1||it.tooltip===void 0||it.tooltip===null||(typeof it.tooltip=="function"?ad(it.tooltip):(Dt=it.tooltip.toString(),id(),Xe[yi]=Dt)),typeof Dt=="string"&&Dt!==""&&Eo(bi))}).on("mouseleave.".concat(r.namespace),function(){clearInterval(lt),ce.hideTooltip()}).on("contextmenu.".concat(r.namespace),function(Le,it){ce.triggerContextMenu(r.element,d3.select(this).nodes()[0],it,Le)}).on("click.".concat(r.namespace),function(Le,it,Ft,nt){var Zt=this;r.settings.selectable&&(Ii=setTimeout(function(){_i||(Ft=o.isSingle||o.isPositiveNegative?$(Zt).data("index"):$(Zt).index(),r.doClickAction(Le,it,Ft,Zt,nt)),_i=!1},200))}).on("dblclick.".concat(r.namespace),function(Le,it,Ft){clearTimeout(Ii),_i=!0,Ft=$(this).index(),r.doDoubleClickAction(it,Ft,this)}),r.settings.isGrouped=ie,r.settings.isSingle=he,r.settings.svg=this.svg,r.settings.showLegend){var Pt,Ra=p.map(function(Le){return Le.line});if(he&&p[0].name)ce.addLegend(p,"column-single",r.settings,r.element);else if(H)ce.addLegend(je,r.settings.type,r.settings,r.element);else if(r.settings.isStacked&&he)ce.addLegend(De,r.settings.type,r.settings,r.element);else if(!he){var Mt=r.settings.isStacked?Me:De;r.settings.useLine&&(Pt=Ra.filter(function(Le){return Le.name}),Mt.push(Pt[0])),Mt=Mt.map(function(Le){var it;return!Le.attributes||(it=Le.data)!==null&&it!==void 0&&it?.attributes||(Le.data?Le.data.attributes=Le.attributes:Le.data={attributes:Le.attributes}),Le}),ce.addLegend(Mt,r.settings.type,r.settings,r.element)}if(r.settings.useLine&&Ra.length){var $n=$(".chart-legend-item-text");Pt[0].name===$n.last().text()&&($(".chart-legend-color").last().addClass(ft.currentTheme.modeId==="dark"?"slate03":"slate08"),r.element.find(".chart-legend-item").last().attr("style","pointer-events: none"))}}if(z&&r.settings.xAxis&&(n=r.settings.xAxis)!==null&&n!==void 0&&n?.rotate){var Si=de?"scale(-1, 1) rotate(".concat(I.use,"deg)"):"rotate(".concat(I.use,"deg)");r.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return de?-10:-(this.getBBox().width+10)}).attr("dy","1em").attr("style","text-anchor: start; transform: ".concat(Si," !important;"))}if(r.settings.xAxis&&r.settings.xAxis.formatText&&(r.svg.selectAll(".x.axis .tick text").each(function(Le){var it=d3.select(this),Ft=d3.select(this).text(),nt=r.settings.xAxis.formatText(Ft,Le);ue.html(it.node(),nt,"<tspan>")}),r.element.find(".chart-legend").addClass("m-top-0"),r.element.find(".chart-legend .chart-legend-color").each(function(Le,it){it.classList.add("m-bottom-0")})),r.settings.isStacked&&r.element.find(".x.axis").length>0){var Kn=$(".tick"),pn=$(".x.axis > g"),kt=$(".series-group.g"),vn=$("g.x.axis > g text").find("tspan").length>1,js=Kn.attr("transform").replace("translate(","").replace(")","").split(","),Hi=js?js[0]:0,pt=pn[0].getBBox().width/2,Ei=kt.find("rect")[0].getBBox().width/2,Mi=Math.round(Hi-(vn?14:10)+pt-Ei);kt.each(function(){var Le=this.getAttribute("transform").replace(/translate\(\d+/,"translate(".concat(Mi));this.setAttribute("transform",Le)})}return ce.isRTL&&ce.isIE&&(Jt.selectAll("text").attr("transform","scale(-1, 1)"),Jt.selectAll(".y.axis text").style("text-anchor","start"),H&&Jt.selectAll(".negative-value").style("text-anchor","end")),Jt.selectAll(".y.axis .tick").attr("class",function(Le){return"tick".concat(Le===0?" tick0":"")}),ce.appendTooltip(),z||r.settings.xAxis||(i=r.settings.xAxis)!==null&&i!==void 0&&i?.rotate||(ce.labelsColide(Jt)&&ce.applyAltLabels(Jt,At,"shortName"),ce.labelsColide(Jt)&&ce.applyAltLabels(Jt,At,"abbrName"),ce.labelsColide(Jt)&&(ce.applyAltLabels(Jt,At,null,null,!0),H&&Jt.selectAll(".target-bartext, .bartext").attr("x",function(){return+d3.select(this).attr("x")-(de?-6:6)}))),ce.setSelected=function(Le,it){var Ft,nt,Zt,Un,ka,ni=0,bi=N.equals,is=Jt.node().parentNode.nextSibling,Ge=d3.select(is),yt=Ge.node()&&Ge.classed("chart-legend"),Dt=function(fn,ui){var as=!!fn;fn=as?d3.select(fn):Jt,ui=ui!==void 0?ui:0,fn.selectAll(".bar").each(function(yi,$i){yi&&ni<1&&(Le.fieldName!==void 0&&Le.fieldValue!==void 0&&Le.fieldValue===(he&&r.settings.isStacked?yi[0][Le.fieldName]:yi[Le.fieldName])||Le.index!==void 0&&Le.index===$i||Le.data&&bi(Le.data,p[ui].data[$i])||Le.elem&&$(this).is(Le.elem))&&(ni++,nt=d3.select(this),Ft=$i,as&&!r.settings.isStacked&&(Zt=!0))})};ie||r.settings.isStacked&&!he&&!ie?(p.forEach(function(fn,ui){ni<1&&(Un=$(Jt.select('[data-group-id="'.concat(ui,'"]')).node()),(Le.groupName!==void 0&&Le.groupValue!==void 0&&Le.groupValue===fn[Le.groupName]||Le.groupIndex!==void 0&&Le.groupIndex===ui||Le.data&&bi(Le.data,fn)||Le.elem&&Un.is(Le.elem))&&Le.fieldName===void 0&&Le.fieldValue===void 0&&Le.index===void 0&&(ni++,nt=Jt.select('[data-group-id="'.concat(ui,'"]')).select(".bar"),Ft=ui,r.settings.isStacked&&!ie&&(Zt=!0)))}),ni<1&&(ka=Jt.selectAll(".series-group")).nodes().length&&ka.each(function(fn,ui){Dt(this,ui)})):Dt(),ni>0&&(it||!nt.classed("is-selected"))&&(Zt?yt&&$(Ge.selectAll(".chart-legend-item")[0][Ft]).trigger("click.chart"):d3.select(nt.node()).dispatch("click"))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var e,t,n,i,a=this,r=/positive-negative/.test(a.settings.type),o=a.svg.node().parentNode.nextSibling,c=d3.select(o),u=c.node()&&c.classed("chart-legend"),p=!1,m=0,v=function(A){(A=A?d3.select(A):a.svg).selectAll(".bar").each(function(S,M){S&&(a.isSingle&&a.settings.isStacked?S[0]:S).selected&&m<1&&(m++,t=d3.select(this),e=M)})};if(r){var w=function(A){p=!0,e=A,m++};if(a.dataset[0].targetBarsSelected)w(0);else{var C={selected:0,i:-1};a.dataset[0].data.forEach(function(A,S){A.selected&&(C.selected++,C.i=S)}),C.selected>1&&(C.elem=a.svg.select(".target-bar.series-".concat(C.i)),w(C.elem.classed("positive")?1:2))}}p||!a.isGrouped&&(!a.settings.isStacked||a.isSingle||a.isGrouped)?v():(a.dataset.forEach(function(A,S){A.selected&&m<1&&(m++,t=a.svg.select('[data-group-id="'.concat(S,'"]')).select(".bar"),e=S,!a.settings.isStacked||a.isSingle||a.isGrouped||(i=!0))}),m<1&&function(){var A=a.svg.selectAll(".series-group");if(A.nodes().length){var S={groups:[],itemsInGroup:0};if(A.each(function(I,z){var V;v(this),((n=Array.isArray(I))||I!=null&&I?.data&&Array.isArray(I==null||I==null?void 0:I.data))&&(S.itemsInGroup=(n?I:I.data).length,m>0&&S.groups.push({i:z,totalSel:(V=n?I:I.data,V.reduce(function(U,G){return G.selected?U+1:U},0))}))}),S.gLen=S.groups.length,!p&&(n&&S.gLen&&S.groups[0].totalSel>1||S.gLen===A.size()&&!n)){var M=S.groups.filter(function(I){return(I==null||I==null?void 0:I.totalSel)>1}).length;p=n?!!M:!M,n&&(e=S.groups[0].i)}}}()),m>0&&(i||p?u&&(this.initialSelectCall=!0,$(c.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,d3.select(t.node()).dispatch("click"))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ce.selected},setSelected:function(e,t){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};ce.setSelected(e,t,n)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},doClickAction:function(e,t,n,i,a){var r=this,o=i&&d3.select(i).classed("target-bar"),c=i&&d3.select(i).classed("is-selected"),u=parseInt(d3.select(i.parentNode).attr("data-group-id"),10);if(o)for(var p=r.svg.selectAll(".bar").nodes(),m=p.length,v=0;v<m;v++){var w=p[v];if(d3.select(w).classed("is-selected")){c=!1;break}}ce.setSelectedElement({task:c?"unselected":"selected",container:r.element,selector:i,isTrigger:!r.initialSelectCall&&!c,isTargetBar:o,triggerGroup:r.isGrouped,d:t,i:n,type:r.settings.type,dataset:r.dataset,isSingle:r.isSingle,isGrouped:r.isGrouped,isStacked:r.settings.isStacked,svg:r.svg,clickedLegend:a===!0}),c&&!r.initialSelectCall&&r.element.triggerHandler("selected",[d3.select(i).nodes(),{},r.isGrouped?u:n])},doDoubleClickAction:function(e,t,n){var i,a=this;if(this.settings.isGrouped){var r=d3.select(n.parentNode),o=parseInt(r==null||r==null?void 0:r.attr("data-group-id"),10),c=[];r.selectAll(".bar").each(function(m,v){c.push({elem:this,data:m,index:v})}),i=[{groupElem:r.node(),groupIndex:o,groupItems:c}]}else if(a.isSingle&&a.settings.isStacked){var u,p=a.dataset&&(u=a.dataset[0])!==null&&u!==void 0&&u?.data&&a.dataset[0].data[t]?a.dataset[0].data[t]:e;i=[{data:p,index:t,elem:[n]}]}else a.settings.isStacked?(i=[],a.svg.selectAll(".series-group").each(function(){var m=d3.select(this).selectAll(".bar").nodes()[t];i.push({elem:m,data:d3.select(m).datum(),index:t})})):i=[{data:e,index:t,elem:n}];a.element.triggerHandler("dblclick",[i])},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],Ht),$.removeData(this.element[0],"chart"))}};var jn="bar",un={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,selectable:!0,defaultTickCount:5,showLines:!0,labelFactor:1.27,wrapWidth:60,fitHeight:!0,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Ci(e,t){this.settings=N.mergeSettings(e,t,un),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),ce.destroy(e),this.init()}Ci.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.tickCountFlag=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),this.settings.animate==="initial"&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,n,i,a,r,o,c,u,p,m,v,w,C=this,A=this,S=this.settings,M=this.element.parent(),I=this.element.closest(".is-personalizable").length>0,z=!!S.formatterString,V=function(ze){return d3.format(A.settings.formatterString||",")(ze)},U=S.type==="bar-stacked",G=S.type==="bar-normalized",J=[],te=[],de=S.tooltip,H=0,he=30,ie=M.width()<450,me=S.dataset;this.isRTL=L.isRTL(),this.dataset=me,this.allZeroValues(this.dataset)&&this.dataset.forEach(function(ze){ze.data.forEach(function(Qe){Qe.value=C.settings.defaultTickCount,C.tickCountFlag=!0})});var ke=window.innerWidth;this.viewport={xxsmall:ke<=380,xsmall:ke>=381&&ke<=450,small:ke>=451&&ke<=480,medium:ke>=481&&ke<=992,large:ke>992};var De,Me,Ve={top:20,left:30,right:30,bottom:me.length===1?5:30};if(S.isGrouped&&me.length===1&&(Ve.bottom=30,H=2),this.element.addClass("bar-chart"),S.isGrouped&&this.element.addClass("bar-chart-grouped"),S.isStacked&&this.element.addClass("bar-chart-stacked"),me.length===0)return A.element.emptymessage(S.emptyMessage),this;var Ke={},ct={atLeastOne:!1},qe=["left","top","right","bottom"];if(S.axisLabels&&$.extend(!0,Ke,S.axisLabels),!$.isEmptyObject(Ke))for(De=0,Me=qe.length;De<Me;De++){var je=Ke[qe[De]];je&&typeof je=="string"&&$.trim(je)!==""&&(ct[qe[De]]=!0,ct.atLeastOne=!0)}var lt=me.map(function(ze){return{name:ze.name,color:ze.color,pattern:ze.pattern,attributes:ze.attributes}});this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var xt={y1:[],y2:[]};me=me.map(function(ze,Qe){return ze.data.map(function(et,$t){var At=0;return Qe===0?(xt.y1.push(et.value),xt.y2.push(0)):(At=xt.y1[$t]+xt.y2[$t],xt.y1[$t]=et.value,xt.y2[$t]=At),$.extend({},et,{y0:At,y:et.value,x:ce.getLabel(et,A.viewport),color:et.color,pattern:et.pattern})})}),i=0,a="",me=me.map(function(ze,Qe){if(!S.isStacked&&lt[Qe]){var et=ce.getLabel(lt[Qe],A.viewport),$t=et.length;a=$t>i?et:a,i=$t>i?$t:i}return ze.map(function(At){if(S.isStacked){var Ct=At.x.length;a=Ct>i?At.x:a,i=Ct>i?Ct:i}return $.extend({},At,{x:At.y,y:At.x,x0:At.y0,color:At.color,pattern:At.pattern})})});var sn=N.getParentAvailableHeight(A.element[0]),Xt=S.fitHeight?sn:parseInt(M.height(),10),yn=Xt-Ve.top-Ve.bottom-30,qn=((e=me)===null||e===void 0||e==null?void 0:e.length)===1&&!S.isGrouped,Rn=parseInt(M.width(),10)-Ve.left,Ln=Xt-Ve.bottom-(S.isStacked?0:15)-(qn?30:0),bt=ce.calculateTextRenderWidth(a);bt<200&&(bt+=26),ce.calculatePercentage(bt,Rn)>55&&(bt=ce.getPercentage(Rn,this.ellipsis.percentageWidth),this.ellipsis.use=!0),S!=null&&(t=S?.axisLabels)!==null&&t!==void 0&&t?.bottom&&lt[0].name===""&&(Ln+=30),S.isStacked&&(Ln-=U||G?10:0);var Fe=S.isStacked?lt:J,En=S.showLegend&&Fe.length>0&&Fe[0].attributes&&((n=Fe[0].data)===null||n===void 0||!n?.attributes)?0:15;A.svg=d3.select(this.element[0]).append("svg").attr("width",Rn+(ct.atLeastOne?20:0)).attr("height",Ln+(ct.atLeastOne?5:0)).append("g").attr("class","group").attr("aria-label","".concat(S.dataset[0].name?S.dataset[0].name:"Name Group")).attr("transform","translate(".concat(bt,",").concat(Ve.top-(ct.atLeastOne?3:En),")")),A.settings.type==="bar"&&(A.svg.append("title"),A.svg.append("title").text("Bar Chart"));var Xe=d3.min(me,function(ze){return d3.min(ze,function(Qe){return S.isStacked?Qe.x+Qe.x0:Qe.x})}),en=d3.max(me,function(ze){return d3.max(ze,function(Qe){return S.isStacked?Qe.x+Qe.x0:Qe.x})});if(S.isStacked&&S.isNormalized){var wn=[];me.forEach(function(ze){ze.forEach(function(Qe,et){wn[et]=(wn[et]===void 0?0:wn[et])+Qe.x})}),me.forEach(function(ze){ze.forEach(function(Qe,et){var $t=wn[et]/100;Qe.x/=$t,Qe.x0/=$t})}),en=100}var Vt,tn=Rn-bt-Ve.left;Vt=S.useLogScale?d3.scaleLog().domain([Xe>0?Xe:1,en]).range([1,tn]).nice():d3.scaleLinear().domain([Xe<0?Xe:0,en]).range([0,tn]).nice(),S.isStacked?(r=me[0].map(function(ze){return ze.y}),v=.32):(r=lt.map(function(ze){return ze.name}),function(){for(var ze,Qe=me.length-1;Qe>-1;Qe--)ze=me[Qe].map(function(et){return et}),$.extend(!0,J,ze),J=$.map(J,function(et){return et})}(),o=0,c=J.length,v=(u=yn/r.length)/c,m=u-(p=c>1?u-.6*v:he),he=p/c,v=0);var Ti=d3.scaleBand().domain(r).rangeRound([0,yn]).padding(v,v),Ut=d3.axisBottom().scale(Vt).tickSize(-yn);ie&&Ut.ticks(bt<100?5:3),S.isStacked&&S.isNormalized&&Ut.tickFormat(function(ze){return"".concat(ze,"%")}),S.useLogScale&&(Ut.ticks(10,",.1s"),S.showLines===!1&&Ut.tickSize(0)),S.ticks&&!S.useLogScale&&(A.viewport.small?Ut.ticks(S.ticks.smallNumber,S.ticks.format):A.viewport.medium?Ut.ticks(S.ticks.mediumNumber,S.ticks.format):A.viewport.large&&Ut.ticks(S.ticks.largeNumber,S.ticks.format));var hn=d3.axisLeft().scale(Ti).tickPadding(15).tickSize(0);A.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(yn,")")).call(Ut),A.svg.append("g").attr("class","axis y").call(hn);var Wn=A.svg.selectAll("g.group").data(me).enter().append("g").attr("class","series-group").attr("role","list").attr("title","".concat(S.type)).attr("tabindex",0).attr("data-group-id",function(ze,Qe){return Qe});S.isGrouped=A.svg.selectAll(".series-group").nodes().length>1&&!S.isStacked||S.isGrouped&&me.length===1,S.isSingle=A.svg.selectAll(".series-group").nodes().length===1&&S.isStacked;var ra=!1,Ai=0,Jt=Wn.selectAll("rect").data(function(ze,Qe){return ze.forEach(function(et){et.index=Qe,S.isStacked||(et.gindex=o++)}),ze}).enter();if(this.settings.isSingle&&(Jt=Jt.append("g").attr("role","listitem")),Jt.append("rect").call(function(ze){ze._groups.forEach(function(Qe){Qe.forEach(function(et){var $t=et.__data__;N.addAttributes($(et),$t,$t.attributes,"bar")})})}).attr("class",function(ze,Qe){return"bar series-".concat(Qe)}).attr("aria-hidden",!0).style("fill",function(ze,Qe){return S.isStacked?lt.length===1?ce.chartColor(Qe,"bar-single",ze):ce.chartColor(ze.index,"bar",lt[ze.index]):ce.chartColor(Qe,"bar",J[Qe])}).attr("mask",function(ze,Qe){return me.length===1&&me[0][Qe].pattern?"url(#".concat(me[0][Qe].pattern,")"):S.isStacked&&lt[ze.index].pattern?"url(#".concat(lt[ze.index].pattern,")"):!S.isStacked&&J[Qe]&&J[Qe].pattern?"url(#".concat(J[Qe].pattern,")"):""}).attr("x",function(ze){return S.useLogScale?0:S.isStacked&&!S.isSingle?Vt(ze.x0)+1:Vt(0)+1}).attr("y",function(ze){return S.isStacked?Ti(ze.y):(u-p)/2+(ze.gindex*he+ze.gindex*H)+ze.index*m}).attr("height",function(){return S.isStacked?Ti.bandwidth():he}).attr("width",0).on("mouseenter.".concat(A.namespace),function(ze,Qe){var et,$t,At,Ct=this,It=Jt.select("rect").nodes().indexOf(this),jt=0,An=[],an="",di=null,Ca=d3.select(this),_i=this.parentNode,Ii=d3.select(_i).datum(),Pt=Math.round(Ii.length/2),Ra=function(pt,Ei){return pt&&Ei?'<svg width="12" height="12"><rect mask="url(#'.concat(pt,')" height="12" width="12" /></svg>'):""},Mt=null;S.isGrouped&&((Mt={elem:d3.select(_i)}).data=Ii,Mt.items=Mt.elem.selectAll(".bar"),Mt.idx=parseInt(_i.getAttribute("data-group-id"),10));var $n=function(){var pt=!S.isStacked&&Ii.length>6,Ei=$(".series-".concat(Pt),_i)[0],Mi=(ue.isValidElement(di)?di===Mt.elem.node()?Ei:di:S.isGrouped?Ei:Ca.node()).getBoundingClientRect(),Le=$(window),it=Mi.top+Le.scrollTop(),Ft=Mi.left+Le.scrollLeft(),nt=ce.tooltipSize(an),Zt=Ft+Mi.width/2-nt.width/2,Un=pt?it:it-nt.height-13;an!==""&&(ce.tooltip&&ce.tooltip.length&&ce.tooltip[I?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(Zt,Un,an,pt?"bottom":"top"))},Si=function(){typeof an=="string"?an=function(pt,Ei,Mi){if(Mi==null?Mi=/{{(\w+)}}/g:typeof Mi=="string"&&(Mi=new RegExp(Mi,"g")),typeof pt=="string"&&typeof Ei=="function"&&Mi instanceof RegExp)for(var Le=9999;Mi.test(pt)&&Le>0;)pt=pt.replace(Mi,function(it,Ft){return Ei(it,Ft)}),Le--;return pt}(an,function(pt,Ei){var Mi=V(Qe[Ei]);return isNaN(Mi)?Qe[Ei]:Mi}):typeof an=="number"&&(an=an.toString())},Kn=function(pt){an="";var Ei={elem:Ct,index:It,data:Qe};S.isGrouped&&(Ei.groupElem=Mt.elem.node(),Ei.groupItems=Mt.items.nodes(),Ei.groupIndex=Mt.idx,Ei.groupData=Mt.data);var Mi=function(it,Ft){typeof it!="string"&&typeof it!="number"||(an=it,di=Ft,Si())},Le=!0;w=setInterval(function(){Le&&(Le=!1,pt(Mi,Ei)),an!==""&&(clearInterval(w),$n())},10)};if(me.length===1)an="<p><b>".concat(Qe.y," </b>").concat(Qe.x,"</p>");else{if(an='<div class="chart-swatch">',S.isStacked){var pn=Array.from(this.parentElement.children).indexOf(this);for(et=0,$t=me.length;et<$t;et++){jt=0,At=ce.chartColor(et,"bar",lt[et]);for(var kt=0,vn=me.length;kt<vn;kt++)S.isNormalized?(jt+=me[kt][pn].value,An[kt]=me[kt][pn].value):(jt+=me[kt][pn].x,An[kt]=me[kt][pn].x);an+=`<div class="swatch-row">
                  <div class="swatch-color">`.concat(Ra(lt[et].pattern,At),`</div>
                  <span>`).concat(lt[et].name,`</span>
                  <b> `).concat(z?V(An[et]):"".concat(Math.round(An[et]/jt*100),"%"),` </b>
                </div>`)}}else for(et=0,$t=Ii.length;et<$t;et++)At=ce.chartColor(et,"bar",J[et]),an+=`<div class="swatch-row">
                    <div class="swatch-color">`.concat(Ra(J[et].pattern,At),`</div>
                  <span>`).concat(Ii[et].name,"</span><b>").concat(V(Ii[et].value),`</b>
                </div>`);an+="</div>"}if(jt>0&&(an='<span class="chart-tooltip-value"><b>'.concat(S.isStacked?An[Qe.index]:Qe.value,'</b> Value</span><span class="chart-tooltip-total"><b>').concat(Math.round(jt),"</b> ").concat(L.translate("Total"),"</span>").concat(an)),de&&typeof de=="function"&&!te[It])Kn(de);else if(an=te[It]||de||an||"",te[It]||Qe.tooltip===!1||Qe.tooltip===void 0||Qe.tooltip===null||(typeof Qe.tooltip=="function"?Kn(Qe.tooltip):(an=Qe.tooltip.toString(),Si(),te[It]=an)),typeof an=="string"&&an!==""&&$n(),S.isStacked)for(et=0,$t=me.length;et<$t;et++){At=ce.chartColor(et,"bar",lt[et]);var js=$("#svg-tooltip").find(".swatch-row").eq(et);lt[et].pattern||js.find("div").css("background-color",At),js.find("rect").css("fill",At)}else for(et=0,$t=Ii.length;et<$t;et++){At=ce.chartColor(et,"bar",J[et]);var Hi=$("#svg-tooltip").find(".swatch-row").eq(et);J[et].pattern||Hi.find("div").css("background-color",At),Hi.find("rect").css("fill",At)}}).on("mouseleave.".concat(A.namespace),function(){clearInterval(w),ce.hideTooltip()}).on("contextmenu.".concat(A.namespace),function(ze,Qe){ce.triggerContextMenu(A.element,d3.select(this).nodes()[0],Qe,ze)}).on("click.".concat(A.namespace),function(ze,Qe){var et=Jt.select("rect").nodes().indexOf(this),$t=this;Ai=setTimeout(function(){if(!ra&&A.settings.selectable){var At=Array.from($t.parentElement.children).indexOf($t);A.doClickAction(Qe,S.isStacked&&!S.isSingle||S.isGrouped?At:et,$t)}ra=!1},200)}).on("dblclick.".concat(A.namespace),function(ze,Qe){clearTimeout(Ai),ra=!0;var et=Jt.select("rect").nodes().indexOf(this),$t=Array.from(this.parentElement.children).indexOf(this);A.doDoubleClickAction(Qe,S.isStacked&&!S.isSingle?$t:et,this)}),$(Jt._parents).each(function(ze,Qe){var et=$(Qe),$t=ze;et.attr("aria-label","".concat(S.dataset[ze].name?S.dataset[ze].name:"Name Label")),et.children(".bar").each(function(At,Ct){var It=S.dataset[$t].name;$(Ct).attr("aria-label","".concat(S.dataset[$t].data[At].value?"".concat(It," ").concat(S.dataset[$t].data[At].value):"Name Label"))})}),A.settings.isSingle&&A.svg.selectAll(".series-group g").append("text").attr("class","audible").text(function(ze,Qe){var et,$t;return"".concat((et=S.dataset[0].data[Qe])===null||et===void 0||et==null?void 0:et.name," ").concat(($t=S.dataset[0].data[Qe])===null||$t===void 0||$t==null?void 0:$t.value)}).attr("x",function(ze){return S.useLogScale?0:S.isStacked&&!S.isSingle?Vt(ze.x0)+1:Vt(0)+1}).attr("y",function(ze){return S.isStacked?Ti(ze.y):(u-p)/2+(ze.gindex*he+ze.gindex*H)+ze.index*m}).lower(),A.element.off("dblclick.".concat(A.namespace)).on("dblclick.".concat(A.namespace),"*",function(ze){ze.stopImmediatePropagation()}),A.svg.selectAll(".axis.y text").attr("aria-hidden",!0).attr("x",function(){return A.isRTL?ct.atLeastOne?5:15:ct.atLeastOne?-5:-15}),A.svg.selectAll(".axis.x text").attr("aria-hidden",!0).attr("class",function(ze){return ze<0?"negative-value":"positive-value"}),A.isRTL&&(ce.isIE||ce.isIEEdge)&&(A.svg.selectAll("text").attr("transform","scale(-1, 1)"),A.svg.selectAll(".y.axis text").style("text-anchor","last")),ct.atLeastOne){var xs=A.svg.append("g").attr("class","axis-labels"),Ni=Rn-95,wa=yn-60,Yn=$('html[class*="classic-"]').length>0,xa=function(ze){if(ct[ze]){var Qe;A.svg.selectAll(".axis.y text")._groups[0].forEach(function(At){At.innerHTML.length>=5&&(Qe=!0)});var et={top:"translate(".concat(Ni/2,",").concat(-4,")"),right:"translate(".concat(Qe?Ni+35:Ni+50,",").concat(yn/2,")rotate(90)"),bottom:"translate(".concat(Ni/2,",").concat(wa+89,")"),left:"translate(".concat(Qe?-50:-35,",").concat(yn/2,")rotate(-90)")},$t={top:"rotate(0deg) scaleX(-1) translate(-".concat(Ni/2,"px, ").concat(-4,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(yn/2+5,"px, -").concat(Ni+(C.isRTL&&!Qe?45:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(Ni/2,"px, ").concat(wa+89,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(yn/2-5,"px, ").concat(C.isRTL&&!Qe?45:!Yn&&C.isRTL?60:55,"px)")};xs.append("text").attr("class","axis-label-".concat(ze)).attr("text-anchor","middle").attr("transform",A.isRTL?"":et[ze]).style("font-size","1.2em").style("transform",A.isRTL?$t[ze]:"").text(Ke[ze])}};for(De=0,Me=qe.length;De<Me;De++)xa(qe[De])}if(ie&&S.useLogScale){var Di=d3.selectAll(".x .tick text"),Ue=!1;Di.attr("class",function(ze,Qe){var et=Math.round(Di.size()/2);Qe>=et&&!Ue&&ze.toString().startsWith("1")&&(Ue=!0,et=ze),Qe!==0&&Qe!==Di.size()-1&&(S.useLogScale?ze!==et:Qe!==et)&&d3.select(this).remove()})}if(A.svg.selectAll(".x.axis .tick").attr("class",function(ze){return"tick".concat(ze===0?" tick0":"")}),this.setBarWidthToZero(),A.svg.selectAll(".bar").transition().duration(S.animate?600:0).attr("width",function(ze){var Qe=Vt(ze.x),et=Vt(0);return!isNaN(Qe)&&rs.isFinite(Qe)||(Qe=0),!isNaN(et)&&rs.isFinite(et)||(et=0),Math.abs(Qe-et)}).attr("x",function(ze){return S.useLogScale?0:S.isStacked&&!S.isSingle?Vt(ze.x0)+1:ze.x<0?Vt(ze.x)+1:Vt(0)+1}),S.svg=A.svg,S.showLegend){var nn=S.isStacked?lt:J;nn=nn.map(function(ze){var Qe;return!ze.attributes||(Qe=ze.data)!==null&&Qe!==void 0&&Qe?.attributes||(ze.data?ze.data.attributes=ze.attributes:ze.data={attributes:ze.attributes}),ze}),ce.addLegend(nn,S.type,S,this.element)}return ce.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var e,t=this,n=(e=this.settings)===null||e===void 0||e==null?void 0:e.dataset;if(n&&(!n||n.constructor===Array)){var i,a=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),r={};this.ellipsis.use&&(r.maxWidth=this.element.width(),r.transX=((i=this.svg)===null||i===void 0||(i=i?.node())===null||i===void 0||(i=i?.transform)===null||i===void 0||(i=i?.baseVal)===null||i===void 0||(i=i?.consolidate())===null||i===void 0||(i=i?.matrix)===null||i===void 0||i==null?void 0:i.e)||1,r.customCss=function(){return{tooltip:{maxWidth:"".concat(r.maxWidth,"px")},arrow:{left:t.isRTL?"calc(100% - 20px)":"20px"}}});var o=function(c,u){var p;if(t.ellipsis.use){if((p=ce.trimText(c.name,t.ellipsis.threshold)).substr(-3)==="..."){var m=ce.calculateTextRenderWidth(c.name),v=ce.calculateTextRenderWidth(p),w=a[u].parentNode;if(!Be.browser.isIE11()){p=c.name,a[u].classList.add("hidden"),d3.select(w).append("foreignObject").attr("overflow","visible").attr("width","".concat(r.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(u)).attr("x","-".concat(r.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var C=w.querySelector(".text.ellipsis");if(C){var A=document.createTextNode(c.name);C.appendChild(A)}}d3.select(w).on("mouseover.".concat(t.namespace),function(){var S,M,I,z,V=(S=w.getBoundingClientRect(),M=Math.ceil(m/r.maxWidth),I=r.transX-v,z=S.top,I=(I<0?30:I)+20,z=(z<0?30:z)-36,M>1&&(z-=.5*(M-1)*33),t.isRTL&&(I=S.left-m+r.transX),{x:I,y:z});ce.showTooltip(V.x,V.y,c.name,"top",r.customCss())}).on("mouseout.".concat(t.namespace),function(){return ce.hideTooltip()})}}else p=ce.getLabel(c,t.viewport);return p};this.settings.selectable||this.element.find(".bar").css("cursor","inherit"),this.settings.isGrouped?n.forEach(function(c,u){a[u].textContent=o(c,u)}):n.forEach(function(c){var u=Object.keys(c).map(function(p){return p});Object.keys(c).map(function(p){return c[p]}).forEach(function(p,m){p&&p.constructor===Array&&p.forEach(function(v,w){u[m]!=="attributes"&&a[w]!==void 0&&(a[w].textContent=o(v,w))})})})}},setInitialSelected:function(){var e,t,n,i=this,a=i.svg.node().parentNode.nextSibling,r=d3.select(a),o=r.node()&&r.classed("chart-legend"),c=!1,u=0,p=function(m){(m=m?d3.select(m):i.svg).selectAll(".bar").each(function(v,w){v&&v.selected&&u<1&&(u++,t=d3.select(this),e=w)})};i.settings.isGrouped||i.settings.isStacked&&!i.settings.isSingle?(i.settings.dataset.forEach(function(m,v){m.selected&&u<1&&(u++,t=i.svg.select('[data-group-id="'.concat(v,'"]')).select(".bar"),e=v,i.settings.isStacked&&!i.settings.isGrouped&&(n=!0))}),u<1&&function(){var m=i.svg.selectAll(".series-group");if(m.nodes().length){var v,w={groups:[],itemsInGroup:0};if(m.each(function(S,M){var I;p(this),Array.isArray(S)&&(w.itemsInGroup=S.length,u>0&&w.groups.push({i:M,d:S,totalSel:(I=S,I.reduce(function(z,V){return V.selected?z+1:z},0))}))}),w.gLen=w.groups.length,!c&&i.settings.isGrouped&&w.gLen===m.size()&&((v=w.groups[0])===null||v===void 0||v==null?void 0:v.totalSel)===1){c=!0;for(var C=0,A=w.groups[0].d;C<A;C++)if(w.groups[0].d[C].selected){e=C;break}}}}()):p(),u>0&&(n||c?o&&(this.initialSelectCall=!0,$(r.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,t.dispatch("click"))),this.initialSelectCall=!1},setBarWidthToZero:function(){this.tickCountFlag&&($(".bar").css("width","0"),$(".bar").attr("width","0"))},allZeroValues:function(e){return e.every(function(t){return t.data.every(function(n){return n.value===0})})},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize(),e.setBarWidthToZero()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize(),e.setBarWidthToZero()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated(),e.setBarWidthToZero()}),this},getSelected:function(){return ce.selected},setSelected:function(e,t){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle};ce.setSelected(e,t,n)},toggleSelected:function(e){this.setSelected(e,!0)},doClickAction:function(e,t,n){var i=this,a=this.settings,r=n&&d3.select(n).classed("is-selected"),o=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);ce.setSelectedElement({task:r?"unselected":"selected",container:i.element,selector:n,isTrigger:!i.initialSelectCall&&!r,triggerGroup:a.isGrouped,d:e,i:t,type:a.type,dataset:a.dataset,isSingle:a.isSingle,isGrouped:a.isGrouped,isStacked:a.isStacked,svg:i.svg,clickedLegend:a.clickedLegend}),r&&!i.initialSelectCall&&i.element.triggerHandler("selected",[d3.select(n).nodes(),{},a.isGrouped?o:t])},doDoubleClickAction:function(e,t,n){var i,a=this.settings;if(a.isGrouped){var r=d3.select(n.parentNode),o=parseInt(r==null||r==null?void 0:r.attr("data-group-id"),10),c=[];r.selectAll(".bar").each(function(u,p){c.push({elem:this,data:u,index:p})}),i=[{groupElem:r.node(),groupIndex:o,groupItems:c}]}else a.type==="bar-stacked"?(i=[],this.svg.selectAll(".series-group").each(function(){var u=d3.select(this).selectAll(".bar").nodes()[t];i.push({elem:u,data:d3.select(u).datum(),index:t})})):i=[{data:e,index:t,elem:n}];this.element.triggerHandler("dblclick",[i])},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],jn),$.removeData(this.element[0],"chart"))}};var Ma="pie",gs={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,selectable:!0,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",forceLegendPopup:!1,legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},showCenterTooltip:!1,fitHeight:!0,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Ya(e,t){this.settings=N.mergeSettings(e,t,gs),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),ce.destroy(e),this.init()}Ya.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox=Be.browser.name==="firefox",this.settings.dataset.length===0?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var e=this,t=this.settings;this.element.data("emptymessage")&&t.dataset.length>0&&this.element.data("emptymessage").destroy(),e.svg=d3.select(this.element[0]).append("svg"),e.mainGroup=e.svg.append("g"),e.mainGroup.append("g").attr("class","slices"),e.mainGroup.append("g").attr("class","labels"),e.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),(t.showMobile||t.forceLegendPopup)&&(t.legendPlacement="bottom"),t.legendPlacement&&this.element.addClass("has-".concat(t.legendPlacement,"-legend"));var n=this.element.parents(".widget").hasClass("bordered"),i=parseInt(this.element.width(),10),a=this.element.height()<320?320:parseInt(this.element.height(),10),r={height:a,width:i};r.isSmallView=r.width-(n?2:0)<360;var o=t.legendPlacement==="bottom"&&r.isSmallView&&!t.showMobile;o&&(this.element.closest(".widget-content").css({height:"","min-height":""}),a=parseInt(this.element.height(),10),r.height=a),!o&&t.fitHeight&&r.isSmallView&&(a=N.getParentAvailableHeight(e.element[0]),r.height=a),(t.lines.show==="label"&&t.legendPlacement==="bottom"||t.lines.show==="label"&&t.showLegend==="false")&&e.mainGroup.attr("transform","translate(".concat(.67777*r.width,", ").concat(r.height/2,")")),t.legendPlacement==="right"&&(r.width=.75*i),t.showMobile&&(r.height=.8*a,this.element.addClass("is-mobile"));var c=0;if(o){c=35,this.element.closest(".widget-content").css({height:"auto","min-height":"auto"});var u=r.height-(23+25*Math.round(t.dataset[0].data.length/2)),p=this.element.closest(".auto-height ");p.length>0&&!p.hasClass("has-bottom-legend")&&(u+=78),t.fitHeight&&(u-=N.getSiblingsHeight(e.element[0])),$(this.svg.node()).css({"min-height":u}),r.height=parseInt(this.element.height(),10)+c}r.radius=Math.min(r.width,r.height)/2,e.dims=r,e.pie=d3.pie().sort(null).value(function(M){return M.value}),e.arc=d3.arc().outerRadius(.75*r.radius).innerRadius(t.isDonut?.5*r.radius:0),e.outerArc=d3.arc().innerRadius(.75*r.radius).outerRadius(.75*r.radius+20),e.svg.attr("width",t.legendPlacement==="right"?"75%":"100%").attr("height",t.showMobile?"80%":"100%"),e.mainGroup.attr("transform","translate(".concat(r.width/2,",").concat((r.height-c)/2,")")),r.isSmallView?(o||(e.svg.attr("height","".concat(r.height,"px")),this.element.css({height:"auto"})),t.fitHeight||(this.element.closest(".widget-content").css({height:""}),this.element.css({height:"auto"}))):this.element[0].style.height==="auto"&&this.element.css({height:""}),r.center={x:r.width/2,y:r.height/2},e.key=function(M){return M.data.name};var m=!t.dataset||t.dataset.length===0;this.chartData=m?[]:t.dataset[0].data,this.sum=d3.sum(this.chartData,function(M){return M.value});var v=this.chartData.map(function(M){return M.value/e.sum*100}),w=this.roundLargestRemainer(v);this.chartData=this.chartData.map(function(M,I){return M.percent=M.value/e.sum,M.percentRound=w[I],M});var C=0;if(this.chartData.map(function(M){C+=M.percentRound}),m||C===0||isNaN(C)){var A=ft.themeColors().palette;this.chartData.push({data:{},color:A.slate[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(e.updateData(e.chartData),(t.showTooltips||t.showCenterTooltip)&&ce.appendTooltip("is-pie"),t.showLegend){var S=e.chartData.map(function(M){var I=ce.formatToSettings(M,t.legend);return t.legendFormatter&&(I="".concat(M.name," (").concat(d3.format(t.legendFormatter)(M.value),")")),M.name==="Empty-Pie"&&(I=""),{name:I,display:"twocolumn",placement:t.legendPlacement,color:M.color,data:M}});this.series=S,t.svg=e.svg,ce.addLegend(S,"pie",t,this.element)}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(e){var t=this;this.chartData=this.chartData.map(function(a){return a.value=e?0:Math.random(),a}),this.sum=d3.sum(this.chartData,function(a){return a.value});var n=this.chartData.map(function(a){return a.value/t.sum*100}),i=this.roundLargestRemainer(n);return this.chartData=this.chartData.map(function(a,r){return a.percent=a.value/t.sum,a.percentRound=i[r],a}),this.chartData},addCenterLabel:function(){var e=this;if(e.settings.isDonut&&!e.settings.hideCenterLabel){var t=e.settings.dataset[0].centerLabel,n=e.svg.selectAll(".slices");if(n.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(t),ce.isIE&&!ce.isIEEdge)if(N.isHTML(t)){var i=n.select(".chart-donut-text"),a=document.createElement("text");a.innerHTML=t,Array.prototype.slice.call(a.childNodes).forEach(function(r){i.append("tspan").attr("style",r.getAttribute&&r.getAttribute("style")).attr("x",r.getAttribute&&r.getAttribute("x")).attr("dy",r.getAttribute&&r.getAttribute("dy")).text(r.textContent)})}else n.select(".chart-donut-text").text(t)}},updateData:function(e){var t,n,i,a=this,r=this.element.closest(".is-personalizable").length>0,o=!a.settings.dataset||a.settings.dataset.length===0,c=a.svg.select(".slices").selectAll("path.slice").data(a.pie(e),a.key),u={str:null,isTooltip:((t=a.settings.tooltip)===null||t===void 0||t==null?void 0:t.formatter)&&a.settings.tooltip.formatter!==gs.tooltip.formatter,isLines:((n=a.settings.lines)===null||n===void 0||n==null?void 0:n.formatter)&&a.settings.lines.formatter!==gs.lines.formatter};u.isTooltip?u.str=a.settings.tooltip.formatter:u.isLines&&(u.str=a.settings.lines.formatter);var p=function(I){var z,V=document.body;if(a.isFirefox&&a.settings.dotSize===0){var U=d3.select(I);U.attr("r",2),z=I.getBoundingClientRect(),U.attr("r",a.settings.dotSize)}else z=I.getBoundingClientRect();return{top:z.top+V.scrollTop,left:z.left+V.scrollLeft}};a.isRTL=L.isRTL();var m=!1,v=0;if(setTimeout(function(){var I;(I=a.settings)!==null&&I!==void 0&&I?.showCenterTooltip&&(a.element.find(".chart-donut-text").off("mouseenter.text").on("mouseenter.text",function(){var z,V=a.element.find(".slices").get(0),U=p(V),G=(z=a.settings.dataset[0])===null||z===void 0||z==null?void 0:z.centerTooltip,J=U.left,te=U.top+15;$(".is-pie").addClass("is-center"),ce.showTooltip(J,te,G,"top")}),a.element.find(".chart-donut-text").off("mouseleave.text").on("mouseleave.text",function(){ce.hideTooltip(),$(".is-pie").removeClass("is-center")})),a.settings.attributes&&(N.addAttributes(a.element.find(".chart-donut-text"),a,a.settings.attributes,"text",!0),N.addAttributes(a.element.find(".slices"),a,a.settings.attributes,"slices",!0),N.addAttributes(a.element.find(".labels"),a,a.settings.attributes,"labels",!0),N.addAttributes(a.element.find(".labels").children(),a,a.settings.attributes,"label",!0),N.addAttributes(a.element.find(".lines"),a,a.settings.attributes,"lines",!0),N.addAttributes(a.element.find(".lines").children("polyline"),a,a.settings.attributes,"polyline",!0),N.addAttributes(a.element.find(".lines").children(".circles"),a,a.settings.attributes,"circle",!0))},100),a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(I){I.stopImmediatePropagation()}),c.enter().insert("path").style("fill",function(I,z){return ce.chartColor(z,"pie",I.data)}).attr("class","slice").call(function(I){I._groups.forEach(function(z){z.forEach(function(V,U){var G=V.__data__,J="slice-".concat(U);a.settings.attributes?N.addAttributes($(V),G,a.settings.attributes,J,!0):N.addAttributes($(V),G,G.data.attributes,J,!0)})})}).on("contextmenu.".concat(a.namespace),function(I,z){ce.triggerContextMenu(a.element,d3.select(this).nodes()[0],z,I)}).on("click.".concat(a.namespace),function(I,z){var V=this;a.settings.selectable&&(v=setTimeout(function(){m||a.doClickAction(z,z.index,V,i),m=!1},200))}).on("dblclick.".concat(a.namespace),function(I,z){clearTimeout(v),m=!0,a.doDoubleClickAction(z,z.index,this,i)}).on("mouseenter.".concat(a.namespace),function(I,z){if(a.settings.showTooltips){var V=a.svg.selectAll("circle").nodes()[z.index],U=p(V),G=a.midAngle(z),J=G<=Math.PI/4&&G>=0||G>7*Math.PI/4,te=G<=3*Math.PI/4&&G>=Math.PI/4,de=G<=5*Math.PI/4&&G>=3*Math.PI/4,H=G<=7*Math.PI/4&&G>=5*Math.PI/4,he="",ie=ce.formatToSettings(z,a.settings.tooltip),me={value:u.str&&!u.isTooltip?d3.format(u.str)(z.value):ie,percent:u.str?d3.format(u.str)(z.data.percent):"".concat(isNaN(z.data.percentRound)?0:z.data.percentRound,"%")};(he=(he=(he=(he=(he=z.data.tooltip||me.value).replace("{{percent}}","".concat(me.percent))).replace("{{value}}",z.value)).replace("%percent%","".concat(me.percent))).replace("%value%",z.value)).indexOf("<b>")===-1&&(he=(he=he.replace("(","<b>")).replace(")","</b>")),i!=null&&clearTimeout(i),i=setTimeout(function(){(function(){if(he!==""){var ke=ce.tooltipSize(he),De=U.left,Me=U.top;ce.tooltip&&ce.tooltip.length&&(J||te||de||H)&&ce.tooltip[r?"addClass":"removeClass"]("is-personalizable"),J&&(De-=ke.width/2,Me-=ke.height-5,ce.showTooltip(De,Me,he,"top")),te&&(Me-=ke.height/2,ce.showTooltip(De,Me,he,"right")),de&&(De-=ke.width/2,ce.showTooltip(De,Me,he,"bottom")),H&&(De-=ke.width-5,Me-=ke.height/2,ce.showTooltip(De,Me,he,"left"))}})()},300)}}).on("mouseleave.".concat(a.namespace),function(){clearTimeout(i),ce.hideTooltip()}).merge(c).transition().duration(a.settings.animationSpeed).attrTween("d",function(I){this.current=this.current||I;var z=d3.interpolate(this.current,I);return this.current=z(0),function(V){return a.arc(z(V))}}),c.exit().remove(),!o){var w=a.element.parent().width()<520,C=a.settings.showLines;if(!a.settings.showLinesMobile&&C&&(C=!w),a.settings.dotSize=C?2:0,C){var A=a.svg.select(".labels").selectAll("text").data(a.pie(e),a.key);A.enter().append("text").attr("dy",".35em").text(function(I){return w?I.data.shortName:ce.formatToSettings(I,a.settings.lines)}).merge(A).transition().duration(a.settings.animationSpeed).attrTween("transform",function(I){this.current=this.current||I;var z=d3.interpolate(this.current,I);return this.current=z(0),function(V){var U=z(V),G=a.outerArc.centroid(U);return G[0]=a.dims.radius*(a.midAngle(U)<Math.PI?1:-1),G[0]-=a.midAngle(U)<Math.PI?20:-20,"translate(".concat(G,")")}}).styleTween("text-anchor",function(I){this.current=this.current||I;var z=d3.interpolate(this.current,I);return this.current=z(0),function(V){var U=z(V);return a.isRTL?a.midAngle(U)>Math.PI?"start":"end":a.midAngle(U)<Math.PI?"start":"end"}}),A.exit().remove();var S=a.svg.select(".lines").selectAll("polyline").data(a.pie(e),a.key);S.enter().append("polyline").merge(S).transition().duration(a.settings.animationSpeed).attrTween("points",function(I){this.current=this.current||I;var z=d3.interpolate(this.current,I);return this.current=z(0),function(V){var U=z(V),G=a.outerArc.centroid(U);return G[0]=.85*a.dims.radius*(a.midAngle(U)<Math.PI?1:-1),[a.outerArc.centroid(U),a.outerArc.centroid(U),G]}}),S.exit().remove()}var M=a.svg.select(".lines").selectAll("circle").data(a.pie(e),a.key);M.enter().append("circle").attr("class","circles").attr("r",a.settings.dotSize).merge(M).transition().duration(a.settings.animationSpeed).attrTween("transform",function(I){this.current=this.current||I;var z=d3.interpolate(this.current,I);return this.current=z(0),function(V){var U=z(V);return"translate(".concat(a.outerArc.centroid(U)," )")}}),M.exit().remove()}},setInitialSelected:function(){var e,t=this,n=0;this.svg.selectAll(".slice").each(function(i,a){i&&i.data&&i.data.selected&&n<1&&(n++,t.initialSelectCall=!0,(e=d3.select(this)).on("click.".concat(t.namespace)).call(e.node(),e.datum(),a))}),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ce.selected},setSelected:function(e,t){var n,i,a=this,r=0,o=N.equals;this.svg.selectAll(".slice").each(function(c,u){c&&c.data&&r<1&&(e.fieldName!==void 0&&e.fieldValue!==void 0&&e.fieldValue===c.data[e.fieldName]||e.index!==void 0&&e.index===u||e.data&&o(e.data,a.chartData[u].data)||e.elem&&$(this).is(e.elem))&&(r++,n=d3.select(this),i=u)}),r>0&&(t||!n.classed("is-selected"))&&n.on("click.".concat(a.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(e){for(var t=0,n=0,i=0,a=[],r=0;r<e.length;r++)t+=parseInt(e[r],10),a[r]=r;var o=100-t;a.sort(function(m,v){return i=e[m]-parseInt(e[m],10),e[v]-parseInt(e[v],10)-i}),e.sort(function(m,v){return i=m-parseInt(m,10),v-parseInt(v,10)-i});for(var c=0;c<e.length;c++)n=c,e[c]=n<o?parseInt(e[c],10)+1:parseInt(e[c],10);for(var u=[],p=0;p<e.length;p++)u[a[p]]=e[p];return u},doClickAction:function(e,t,n,i){var a=this;clearTimeout(i);var r=n&&d3.select(n).classed("is-selected");ce.setSelectedElement({task:r?"unselected":"selected",container:a.element,selector:n,isTrigger:!a.initialSelectCall&&!r,d:e.data,i:t,settings:a.settings,series:a.series,type:a.settings.type,dataset:a.settings.dataset,svg:a.svg}),r&&!a.initialSelectCall&&a.element.triggerHandler("selected",[d3.select(n).nodes(),{},t])},doDoubleClickAction:function(e,t,n,i){var a;clearTimeout(i);var r=this.settings.dataset,o=r&&(a=r[0])!==null&&a!==void 0&&a?.data?r[0].data[t]:e.data||e;o=o||{};var c=[{elem:d3.select(n).nodes(),data:o,index:t}];this.element.triggerHandler("dblclick",[c])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".slice").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],Ma),$.removeData(this.element[0],"chart"))}};var ms="radar",Sc={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,selectable:!0,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function lr(e,t){this.settings=N.mergeSettings(e,t,Sc),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}lr.prototype={init:function(){return this.namespace=N.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=ce.colorRange(),this.useBuiltInColors=!0),this},updateData:function(e){var t=this,n=this.settings,i=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),e.length!==0){var a,r=this.element.parent(),o={w:r.width(),h:r.height(),extra:.957};n.legendPlacement==="right"&&(o.w*=.75),(ft.uplift||ft.new)&&o.w>=420&&(o.extra-=.12),n.showLegend&&o.w<420&&!n.margin.bottom&&(a=o.w>405?5:o.w>390?3:o.w>350?.9:.5,o.h-=(420-o.w)*a),o.transform={x:o.w/2+(n.margin.left+n.margin.right)/2,y:o.h/2*o.extra+(n.margin.top+n.margin.bottom)/2};var c,u=d3.scaleOrdinal(n.colors),p=Math.max(n.maxValue,d3.max(e,function(ie){return d3.max(ie.data.map(function(me){return me.value}))})),m=e[0].data.map(function(ie){return function(me){var ke=328,De=469,Me="";return o.w<=ke?Me=me.shortName||me.abbrName||me.name||"":o.w>=ke+1&&o.w<=De?Me=me.abbrName||me.name||"":o.w>De&&(Me=me.name||""),Me}(ie)}),v=m.length,w=2*Math.PI/v,C=Math.min(o.w/3,o.h/3)*o.extra,A=d3.scaleLinear().range([0,C]).domain([0,p]),S=this.element[0];d3.select(S).select("svg").remove();var M=d3.select(S).append("svg").attr("width",o.w+(n.margin.left+n.margin.right)).attr("height",o.h+(n.margin.top+n.margin.bottom)).attr("class","chart-radar");this.svg=M;var I=M.append("g").attr("transform","translate(".concat(o.transform.x,",").concat(o.transform.y,")"));if(n.opacityCircles>0){var z=I.append("defs").append("filter").attr("id","glow");z.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var V=z.append("feMerge");V.append("feMergeNode").attr("in","coloredBlur"),V.append("feMergeNode").attr("in","SourceGraphic")}var U=I.append("g").attr("class","chart-radar-axis-wrapper");U.selectAll(".levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",function(ie){return C/n.levels*ie}).style("fill-opacity",n.opacityCircles).style("filter",n.opacityCircles>0?"url(#glow)":""),n.showAxisLabels&&U.selectAll(".axis-label").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",function(ie){return-ie*C/n.levels}).attr("dy","0.4em").style("font-size",ft.uplift||ft.new?"12px":"10px").attr("fill","#737373").text(function(ie){var me=Math.round(10*p)/10;return n.axisFormatter.indexOf("%")>-1?d3.format(n.axisFormatter)(me*ie/n.levels):d3.format(n.axisFormatter)(ie/n.levels)});var G=U.selectAll(".axis").data(m).enter().append("g").attr("class","axis");n.showCrosslines&&G.append("line").attr("x1",0).attr("y1",0).attr("x2",function(ie,me){return A(1.05*p)*Math.cos(w*me-Math.PI/2)}).attr("y2",function(ie,me){return A(1.05*p)*Math.sin(w*me-Math.PI/2)}).attr("class","chart-radar-crossline").style("stroke-width","1px"),G.append("text").attr("class","legend").style("font-size",ft.uplift||ft.new?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(ie,me){return A(p*n.labelFactor)*Math.cos(w*me-Math.PI/2)}).attr("y",function(ie,me){return A(p*n.labelFactor)*Math.sin(w*me-Math.PI/2)}).text(function(ie){return ie}),this.element[o.w<420?"addClass":"removeClass"]("is-small"),o.w>456&&M.selectAll(".chart-radar-axis-wrapper .axis .legend").each(function(){ce.wrap(d3.select(this),n.wrapWidth,n.labelFactor)});var J=d3.lineRadial().curve(d3.curveBasisClosed).radius(function(ie){return A(ie.value)}).angle(function(ie,me){return me*w});n.roundStrokes&&J.curve(d3.curveCardinalClosed);var te=I.selectAll(".radarWrapper").data(e.map(function(ie){return ie.data})).enter().append("g").attr("class","chart-radar-wrapper"),de=!1,H=0;if(t.element.off("dblclick.".concat(t.namespace)).on("dblclick.".concat(t.namespace),"*",function(ie){ie.stopImmediatePropagation()}),te.append("path").attr("class","chart-radar-area").call(function(ie){ie._groups.forEach(function(me){me.forEach(function(ke,De){var Me=e[De];N.addAttributes($(ke),Me,Me.attributes,"area")})})}).attr("d",function(ie){return J(ie)}).style("fill",function(ie,me){return u(me)}).style("fill-opacity",n.opacityArea).style("cursor",t.settings.selectable?"pointer":"inherit").on("contextmenu.".concat(t.namespace),function(ie,me){ce.triggerContextMenu(t.element,d3.select(this).nodes()[0],me,ie)}).on("click.".concat(t.namespace),function(ie,me){var ke=this;t.settings.selectable&&(H=setTimeout(function(){de||t.doClickAction(me,$(ke).index(),ke,c,M),de=!1},200))}).on("dblclick.".concat(t.namespace),function(ie,me){clearTimeout(H),de=!0,t.doDoubleClickAction(me,$(this).index(),this)}),te.append("path").attr("class","chart-radar-stroke").call(function(ie){ie._groups.forEach(function(me){me.forEach(function(ke,De){var Me=e[De];N.addAttributes($(ke),Me,Me.attributes,"stroke")})})}).attr("d",function(ie){return J(ie)}).style("stroke-width","".concat(n.strokeWidth,"px")).style("stroke",function(ie,me){return u(me)}).style("cursor",t.settings.selectable?"pointer":"inherit").style("fill","none").style("filter",n.opacityCircles>0?"url(#glow)":""),te.selectAll(".chart-radar-circle").data(function(ie){return ie}).enter().append("circle").call(function(ie){ie._groups.forEach(function(me){me.forEach(function(ke){var De=ke.__data__;N.addAttributes($(ke),De,De.attributes,"circle")})})}).attr("class","chart-radar-circle").attr("r",n.dotRadius).attr("cx",function(ie,me){return A(ie.value)*Math.cos(w*me-Math.PI/2)}).attr("cy",function(ie,me){return A(ie.value)*Math.sin(w*me-Math.PI/2)}).style("fill",function(){return u($(this.parentNode).index()-1)}).style("fill-opacity",.6),I.selectAll(".radar-circle-wrapper").data(e.map(function(ie){return ie.data})).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data(function(ie){return ie}).enter().append("circle").call(function(ie){ie._groups.forEach(function(me){me.forEach(function(ke){var De=ke.__data__;N.addAttributes($(ke),De,De.attributes,"invisible-circle")})})}).attr("class","radar-invisible-circle").attr("r",1.5*n.dotRadius).attr("cx",function(ie,me){return A(ie.value)*Math.cos(w*me-Math.PI/2)}).attr("cy",function(ie,me){return A(ie.value)*Math.sin(w*me-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(t.namespace),function(ie,me){if(n.showTooltips){var ke=$(this).offset(),De=ce.formatToSettings(me,n.tooltip);De.indexOf("<b>")===-1&&(De=(De=De.replace("(","<b>")).replace(")","</b>"));var Me=ce.tooltipSize(De),Ve=ke.left,Ke=ke.top;Ve-=Me.width/2-6,Ke-=Me.height+6,c!=null&&clearTimeout(c),c=setTimeout(function(){ce.tooltip&&ce.tooltip.length&&ce.tooltip[i?"addClass":"removeClass"]("is-personalizable"),ce.showTooltip(Ve,Ke,De,"top")},300)}}).on("mouseleave.".concat(t.namespace),function(){clearTimeout(c),ce.hideTooltip()}).on("contextmenu.".concat(t.namespace),function(ie,me){ce.triggerContextMenu(t.element,d3.select(this).nodes()[0],me,ie)}),n.showTooltips&&ce.appendTooltip("is-pie"),n.showLegend){n.legendPlacement&&this.element.addClass("has-".concat(n.legendPlacement,"-legend"));var he=n.dataset.map(function(ie,me){var ke={name:ie.name,display:"twocolumn",placement:n.legendPlacement,color:u(me)};return ie.attributes&&(ke.data={attributes:ie.attributes}),ke});n.svg=t.svg,ce.addLegend(he,"pie",n,this.element)}}else t.element.emptymessage(n.emptyMessage)},setInitialSelected:function(){var e=this.settings;if(Array.isArray(e.dataset)){for(var t=0,n=e.dataset.length;t<n;t++)if(e.dataset[t].selected){var i=this.svg.selectAll(".chart-radar-area").nodes(),a=d3.select(i[t]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),a.classed("is-selected",!0).classed("is-not-selected",!1),a.style("fill-opacity",e.opacityArea);break}}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ce.selected},setSelected:function(e,t){var n,i=0,a=this;this.svg.selectAll(".chart-radar-area").each(function(r,o){var c=a.settings.dataset[o];c&&c.data&&i<1&&(e.fieldName!==void 0&&e.fieldValue!==void 0&&e.fieldValue===c[e.fieldName]||e.index!==void 0&&e.index===o||e.elem&&$(this).is(e.elem))&&(i++,n=d3.select(this))}),i>0&&(t||!n.classed("is-selected"))&&d3.select(n.node()).dispatch("click")},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(e,t,n,i,a){clearTimeout(i);var r=this.settings,o=d3.select(n),c=o.classed("is-selected");a.selectAll(".is-selected").classed("is-selected",!1),a.selectAll(".is-not-selected").classed("is-not-selected",!1),ce.clearSelected(r.dataset),c||(a.selectAll(".chart-radar-area").classed("is-not-selected",!0),o.classed("is-selected",!0).classed("is-not-selected",!1),o.style("fill-opacity",r.opacityArea),r.dataset[t].selected=!0);var u={elem:o.nodes(),data:e,index:t};this.element.triggerHandler(c?"deselected":"selected",u),ce.selected=c?[]:u},doDoubleClickAction:function(e,t,n){var i={elem:[n],data:e,index:t};this.element.triggerHandler("dblclick",i)},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=e.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(t(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ce.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],ms),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(e){var t=null;switch(this.empty(),e.type){case"targeted-achievement":case"completion":case"completion-target":if(t=this.data(e.type))return t.updated(e),this;var n=new ji(this,e);this.data(Pi,n),this.data("chart",n),this.data(e.type,n);break;case"bullet":if(t=this.data(pi))return t.updated(e),this;var i=new On(this,e);this.data(pi,i),this.data("chart",i);break;case"radar":if(t=this.data(ms))return t.updated(e),this;var a=new lr(this,e);this.data(ms,a),this.data("chart",a);break;case"sparkline":if(t=this.data(ai))return t.updated(e),this;var r=new si(this,e);this.data(ai,r),this.data("chart",r);break;case"sparkline-dots":if(e.isDots=!0,t=this.data(ai))return t.updated(e),this;var o=new si(this,e);this.data(ai,o),this.data("chart",o);break;case"sparkline-peak":if(e.isPeakDot=!0,t=this.data(ai))return t.updated(e),this;var c=new si(this,e);this.data(ai,c),this.data("chart",c);break;case"sparkline-dots-n-peak":if(e.isPeakDot=!0,e.isDots=!0,t=this.data(ai))return t.updated(e),this;var u=new si(this,e);this.data(ai,u),this.data("chart",u);break;case"sparkline-minmax":if(e.isMinMax=!0,t=this.data(ai))return t.updated(e),this;var p=new si(this,e);this.data(ai,p),this.data("chart",p);break;case"sparkline-medianrange":if(e.isMedianRange=!0,t=this.data(ai))return t.updated(e),this;var m=new si(this,e);this.data(ai,m),this.data("chart",m);break;case"sparkline-medianrange-n-peak":if(e.isMedianRange=!0,e.isPeakDot=!0,t=this.data(ai))return t.updated(e),this;var v=new si(this,e);this.data(ai,v),this.data("chart",v);break;case"line":if(t=this.data(ri))return t.updated(e),this;var w=new oi(this,e);this.data(ri,w),this.data("chart",w);break;case"area":if(e.isArea=!0,t=this.data(ri))return t.updated(e),this;var C=new oi(this,e);this.data(ri,C),this.data("chart",C);break;case"bubble":if(e.isBubble=!0,t=this.data(ri))return t.updated(e),this;var A=new oi(this,e);this.data(ri,A),this.data("chart",A);break;case"scatterplot":if(e.isScatterPlot=!0,t=this.data(ri))return t.updated(e),this;var S=new oi(this,e);this.data(ri,S),this.data("chart",S);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(t=this.data(Ht))return t.updated(e),this;var M=new Qn(this,e);this.data(Ht,M),this.data("chart",M);break;case"column-stacked":if(e.isStacked=!0,t=this.data(Ht))return t.updated(e),this;var I=new Qn(this,e);this.data(Ht,I),this.data("chart",I);break;case"bar":if(e.isStacked=!0,t=this.data(jn))return t.updated(e),this;var z=new Ci(this,e);this.data(jn,z),this.data("chart",z);break;case"bar-stacked":if(e.isStacked=!0,t=this.data(jn))return t.updated(e),this;var V=new Ci(this,e);this.data(jn,V),this.data("chart",V);break;case"bar-normalized":if(e.isNormalized=!0,t=this.data(jn))return t.updated(e),this;var U=new Ci(this,e);this.data(jn,U),this.data("chart",U);break;case"bar-grouped":if(e.isStacked=!1,e.isGrouped=!0,t=this.data(jn))return t.updated(e),this;var G=new Ci(this,e);this.data(jn,G),this.data("chart",G);break;case"pie":if(t=this.data(Ma))return t.updated(e),this;var J=new Ya(this,e);this.data(Ma,J),this.data("chart",J);break;case"donut":if(e.isDonut=!0,t=this.data(Ma))return t.updated(e),this;var te=new Ya(this,e);this.data(Ma,te),this.data("chart",te);break;default:t=null}return this};var kn={isToday:function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},firstDayOfWeek:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=e.getDay(),a=new Date(e),r=i>=t||n?i-t:6-i;return a.setDate(e.getDate()-r),a.setHours(0,0,0,0),a},lastDayOfWeek:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.firstDayOfWeek(e,t);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),n},dateDiff:function(e,t,n){var i=new Date;return Math.round((t-e)/(36e5*(n?1:Math.abs(i.getTimezoneOffset()))))},monthDiff:function(e,t){var n;return n=12*(t.getFullYear()-e.getFullYear()),n-=e.getMonth(),(n+=t.getMonth())<=0?0:n},add:function(e,t,n){var i=null,a=e instanceof Date?new Date(e.toISOString()):new Date(e);return n==="days"&&(i=new Date(a.setDate(a.getDate()+t))),i},subtract:function(e,t,n){var i=null,a=e instanceof Date?new Date(e.toISOString()):new Date(e);return n==="days"&&(i=new Date(a.setDate(a.getDate()-t))),i},isDaylightSavingTime:function(e){var t=new Date(e.getFullYear(),0,1).getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();return Math.max(t,n)!==e.getTimezoneOffset()},isWithinRange:function(e,t,n){return e<=n&&n<=t},hoursTo24:function(e,t){var n=t>=0;return e===12&&n?t===0?0:e:e+12*(n?t:0)}},Jn={addCalculatedFields:function(e,t,n,i){var a=function(U,G){return L.formatDate(U,N.extend(!0,{locale:t.name},G))},r={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:t.name},o=function(U){var G=L.parseDate(U,r);return L.isIslamic(t.name)&&(G=new Date(G[0],G[1],G[2],G[3],G[4],G[5],G[6])),G},c=function(U){return L.translate(U,{locale:t.name,language:n})};e.color=this.getEventTypeColor(e,i),e.borderColor=this.getEventTypeBorderColor(e,i),e.duration=Math.abs(kn.dateDiff(new Date(e.ends),new Date(e.starts),!1));var u=new Date,p=Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m=new Date(e.starts),v=Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),w="".concat(m.getDate(),"-").concat(m.getMonth()+1,"-").concat(m.getFullYear()),C="".concat(u.getDate(),"-").concat(u.getMonth()+1,"-").concat(u.getFullYear());e.durationUnits=c(e.duration>1?"Days":"Day"),e.daysUntil=e.starts?kn.dateDiff(v,p):0;var A,S,M=(new Date(e.ends)-new Date(e.starts))/36e5;if(e.durationHours=M>0&&M<.5?1:Math.round(M),e.isDays=!0,p>v&&w!==C&&(e.daysUntil=1),e.isAllDay===void 0&&(e.isAllDay=!0),e.durationHours<24&&(e.isDays=!1,e.isAllDay=!1,e.durationUnits=c(e.durationHours>1?"Hours":"Hour")),e.isAllDay.toString()==="true"&&(e.duration=(A=new Date(e.starts),S=new Date(e.ends),Math.abs(Math.round((S-A)/864e5))||1),e.durationUnits=c(e.duration>1?"Days":"Day"),e.isDays=!0,delete e.durationHours),e.starts){var I=o(e.starts);e.startsLocale=a(I),L.isIslamic(t.name)&&(e.startsLocale=a(L.gregorianToUmalqura(I))),e.startsHourLocale=a(I,{date:"hour"}),Array.isArray(I)?e.startsHour=parseFloat(I[3]+I[4]/60):e.startsHour=parseFloat(I.getHours()+I.getMinutes()/60)}if(e.ends){var z=o(e.ends);e.endsLocale=a(z),L.isIslamic(t.name)&&(e.endsLocale=a(L.gregorianToUmalqura(z))),e.endsHourLocale=a(z,{date:"hour"}),Array.isArray(z)?e.endsHour=parseFloat(z[3]+z[4]/60):e.endsHour=parseFloat(z.getHours()+z.getMinutes()/60)}if(e.eventTypes=i,e.isAllDay=e.isAllDay.toString(),e.isAllDay.toString()==="false"&&delete e.isAllDay,!e.isAllDay&&e.durationHours>=24&&(e.isAllDay=!1,e.durationUnits=c("Hours"),e.isDays=!1,delete e.duration),e.starts&&e.ends){var V=this.timeDiffInSeconds(o(e.starts),o(e.ends));e.durationInTime=this.timeBySeconds(V)}else e.durationInTime&&delete e.durationInTime;return e},timeDiffInSeconds:function(e,t){var n=Math.abs(t.getTime()-e.getTime());return Math.ceil(n/1e3)},timeBySeconds:function(e){return e=Number(e),{days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}},formateTimeString:function(e,t,n){if(e.durationInTime){var i=function(m){return L.translate(m,{locale:t.name,language:n})},a=e.durationInTime,r="";if(a.days){var o=i(a.days>1?"Days":"Day");r+="".concat(a.days," ").concat(o)}if(a.hours){var c=i(a.hours>1?"Hours":"Hour");a.days&&(r+="".concat(a.minutes||a.seconds?", ":" ".concat(i("And")," "))),r+="".concat(a.hours," ").concat(c)}if(a.minutes){var u=i(a.minutes>1?"Minutes":"Minute");(a.days||a.hours)&&(r+="".concat(a.seconds?", ":" ".concat(i("And")," "))),r+="".concat(a.minutes," ").concat(u)}if(a.seconds){var p=i(a.seconds>1?"Seconds":"Second");r+="".concat(a.days||a.hours||a.minutes?" ".concat(i("And")," "):""),r+="".concat(a.seconds," ").concat(p)}r!==""&&(e.duration="",e.durationUnits="",e.durationHours=r)}},getEventTypeColor:function(e,t){var n,i="azure";if(!e.type&&!e.color)return i;var a=t.filter(function(o){return o.id===e.type});if(a.length===0){for(var r=0;r<t.length;r++)if(t[r].children&&(a=t[r].children.filter(function(o){return o.id===e.type})).length>0){a[0].color=t[r].color||"azure";break}}return e.color!==void 0&&a.length===1&&a[0].color!==e.color?a[0].color:((n=e.color)===null||n===void 0||n==null?void 0:n.substr(0,1))==="#"||e.color?e.color:a.length===1?i=a[0].color||"azure":i},getEventTypeBorderColor:function(e,t){var n,i="",a=t.filter(function(r){return r.id===e.type});return e.borderColor!==void 0&&a.length===1&&a[0].borderColor!==e.borderColor?a[0].borderColor:((n=e.borderColor)===null||n===void 0||n==null?void 0:n.substr(0,1))==="#"||e.borderColor?e.borderColor:e.color!==null&&e.color!==void 0&&e.color.substr(0,1)!=="#"?(i=e.color,e.borderColor):a.length===1?i=a[0].borderColor||"azure":i},cleanEventData:function(e,t,n,i,a,r,o){var c={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:i.name},u=function(I){return L.formatDate(I,c)},p=function(I,z){return L.parseDate(I,N.extend(!0,{locale:i.name},z))},m=e.isAllDay==="on"||e.isAllDay==="true"||e.isAllDay,v=new Date(n),w=v,C=v;if(e.startsLocale&&e.endsLocale&&(w=new Date(p(e.startsLocale)),C=new Date(p(e.endsLocale))),typeof e.starts!="string"||e.startsLocale||(w=new Date(e.starts)),typeof e.ends!="string"||e.endsLocale||(C=new Date(e.ends)),L.isValidDate(w)||(w=v),L.isValidDate(C)||(C=v),m)w.setHours(0,0,0,0),e.starts=u(new Date(w)),C.setHours(23,59,59,999),e.ends=u(new Date(C)),e.duration=e.starts===e.ends?1:null,e.isAllDay=!0;else{if(w===C)C.setHours(C.getHours()+parseInt(e.durationHours,10)),e.ends=u(Be.browser.name==="safari"?C:C.toISOString()),e.duration=null;else if(e.endsHourLocale&&e.startsHourLocale){var A=p(e.startsHourLocale,{date:"hour"}),S=p(e.endsHourLocale,{date:"hour"});w.setHours(A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds()),C.setHours(S.getHours(),S.getMinutes(),S.getSeconds(),S.getMilliseconds()),Be.browser.name==="safari"?(e.starts=u(w),e.ends=u(C)):(e.starts=u(w.toISOString()),e.ends=u(C.toISOString())),e.duration=kn.dateDiff(new Date(e.starts),new Date(e.ends))}else e.ends=u(new Date(C));e.starts=u(new Date(w)),e.isAllDay=!1}if(e.comments===void 0&&t&&(e.comments=L.translate("NoCommentsEntered",{locale:i.name,language:a}),e.noComments=!0),!e.subject&&t&&(e.subject=L.translate("NoTitle",{locale:i.name,language:a})),e.type||(e.type=o[0].id),e.id===void 0&&t){var M=r.length===0?0:parseInt(r[r.length-1].id,10);e.id=(M+1).toString()}e.title==="NewEvent"&&(e.title=L.translate("NewEvent",{locale:i.name,language:a}))}},Jo="tag",Ka=["default","neutral","secondary","error","alert","good","info"],Zo={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:Ka[0],value:void 0};function Xa(e,t){var n;if(this.settings=N.mergeSettings(e,t,Zo),e instanceof HTMLElement?e.querySelector(".tag-content")?n=e:((n=document.createElement("span")).className+="".concat(e.className),e.id&&e.id.length?(n.id=e.id,e.removeAttribute("id")):typeof this.settings.id=="string"&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id),e.insertAdjacentElement("beforebegin",n),n.appendChild(e),n.classList.add("tag"),e.className="",e.classList.add("tag-content")):((n=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(n),typeof this.settings.id=="string"&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id)),e){var i=e.querySelector(".audible");i&&n.insertAdjacentElement("afterbegin",i)}this.element=n,this.getSettingsFromElement(),this.init()}Xa.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var e=this.element.classList,t=N.getArrayFromList(this.element.classList),n=this.settings.style;t.forEach(function(w){Ka.indexOf(w)>-1&&e.remove(w)}),this.element.className.indexOf(n)===-1&&n!=="default"&&e.add(n),this.settings.disabled&&e.add("is-disabled");var i="";this.settings.audibleContent&&(i='<span class="audible">'.concat(_e.stripHTML(this.settings.audibleContent),"</span>"));var a="span",r="",o="",c="",u=this.settings.href&&this.settings.href.length;(u||this.originallyAnchor)&&(a="a",this.settings.disabled&&(c=' tabIndex="-1"')),u&&(r=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||typeof this.settings.clickHandler=="function")&&(e.add("is-linkable"),o=`<button class="btn-linkable" focusable="false" tabIndex="-1">
        `.concat($.createIcon("caret-right"),`
        <span class="audible">`).concat(L.translate("Link"),`</span>
      </button>`));var p=this.settings.content.length===0?this.contentElement.textContent:this.settings.content,m="<".concat(a,' class="tag-content"').concat(r).concat(c,">").concat(_e.sanitizeHTML(p),"</").concat(a,">"),v="";this.settings.dismissible&&(e.add("is-dismissible"),v=`<button class="btn-dismissible" focusable="false" tabindex="-1" type="button">
        `.concat($.createIcon("close"),`
        <span class="audible">`).concat(L.translate("Close"),`</span>
      </button>`)),this.element.innerHTML="".concat(i).concat(m).concat(o).concat(v),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".btn-dismissible")},getSettingsFromElement:function(){var e=this.element.className,t="";Ka.forEach(function(m){e.indexOf(m)>-1&&(t=m)}),t&&(this.settings.style=t),this.settings.disabled=this.disabled;var n=this.dismissibleBtn,i=this.element.className.indexOf("is-dismissible")>-1;(n||i)&&(this.settings.dismissible=!0);var a=this.element.querySelector("a"),r=this.element.className.indexOf("is-linkable")>-1,o=this.element.querySelector(".btn-linkable");if(a||r||o){this.originallyAnchor=!0;var c=a.getAttribute("href");c&&c.length&&(c=_e.stripTags(c),this.settings.href=c)}(r||o)&&(this.settings.clickable=!0);var u=this.element.querySelector(".audible");u instanceof HTMLElement&&(this.settings.audibleContent=_e.stripHTML(u.innerText));var p=this.contentElement;p&&(this.settings.content=_e.sanitizeHTML(p.innerText))},remove:function(){var e=this.element,t=e.parentNode;this.settings.parentAPI&&(t=this.settings.parentAPI.element),$(t).triggerHandler("beforetagremove",[this]),this.destroy(),e.remove(),$(t).triggerHandler("aftertagremove",[this])},dismiss:function(e){if(!this.disabled){this.remove(e),typeof this.settings.dismissHandler=="function"&&this.settings.dismissHandler(this);var t=this.settings.parentAPI;t&&t.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||(this.contentElement.tagName==="A"&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&(this.contentElement.tagName==="A"&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var e=$(this.element);e.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var t=this.dismissibleBtn;t&&t.parentNode.removeChild(t);var n=e.data("hidefocus");return n&&typeof n.destroy=="function"&&n.destroy(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Zo)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,Jo)},handleEvents:function(){var e=this;$(this.element).on("focusin.tag",function(){e.element.classList.add("is-focused")}).on("focusout.tag",function(){e.element.classList.remove("is-focused")});var t=this;$(this.element).on("click.tag","a, .btn-linkable",function(n){var i;return typeof t.settings.clickHandler=="function"&&(i=t.settings.clickHandler(t)),!(i===!1||t.settings.href&&t.settings.href==="#")||(n.preventDefault(),!1)}),this.settings.dismissible&&($(this.element).on("click.tag",".btn-dismissible",function(n){e.dismiss(n)}),$(this.element).on("keydown.tag","a",function(n){n.keyCode===8&&e.dismiss(n)}))}};var ua="taglist",Qa={tags:[]};function Sr(e,t){var n=this;if(!(e instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=N.mergeSettings(e,t,Qa),this.element=e;var i=N.getArrayFromList(this.element.querySelectorAll(".tag"));i.length&&(this.settings.tags=[],i.forEach(function(a){n.settings.tags.push(new Xa(a))})),this.init()}Sr.prototype={get length(){return this.tags.length},get elements(){return this.tags.map(function(e){return e.element})},init:function(){var e=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach(function(t){e.add(t)}),this.render()},getTargetProp:function(){return"content"},add:function(e){var t,n=this;if(!e)throw new Error("No object was provided");if(Array.isArray(e)){var i=[];return e.forEach(function(a){i.push(n.add(a))}),i}if(Ys.isEmpty(e))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return e instanceof Xa?(t=e,e.settings.parentAPI=this):(e.parent=this.element,e.parentAPI=this,t=new Xa(void 0,e)),this.tags.indexOf(t)===-1&&this.tags.push(t),t},remove:function(e,t){e instanceof Xa&&(e=e.settings);var n,i=this.getTargetProp(e),a=this.tags.filter(function(r){return r.settings[i]===e[i]||(n=r,!1)});return a.length<this.tags.length&&(this.tags=a),t&&n.remove(),n},removeAll:function(){this.tags.forEach(function(e){e.remove()}),this.tags=[]},render:function(){var e=this;this.tags.forEach(function(t){$(e.element).has(t.element).length===0?($(e.element).append(t.element),t.init()):t.render()}),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=this.elements,n=t.length;e<0&&(e=0),e>n&&(e=n);var i=t[e],a=i.querySelector("a");return a&&a.focus(),i},focusPreviousElement:function(e){if(!(e instanceof HTMLElement))throw new Error("".concat(e," is not an HTMLElement"));var t=this.elements.indexOf(e);if(!(t>-1))throw new Error("".concat(e," does not exist within this TagList"));return this.focusByIndex(t-1)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings),Array.isArray(e.tags)&&(this.settings.tags=e.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach(function(e){e.remove()}),delete this.tags,$(this.element).data(ua)&&$.removeData(this.element,ua)}};var Er="virtual-scroll",oo={height:300,itemHeight:50,bufferSize:20,data:[],scrollTop:0,itemCount:0,itemTemplate:null,startIndex:0};function lo(e,t){this.settings=N.mergeSettings(e,t,oo),this.element=$(e),this.init()}lo.prototype={init:function(){return this.container=this.element.find(".ids-virtual-scroll")[0],this.stringTemplate='<div class="ids-virtual-scroll-item">${productName}</div>',this.itemCount=this.settings.data.length,this.itemTemplate=this.settings.itemTemplate||this.itemTemplate,this.handleEvents(),this.applyHeight(),this.renderItems(!1),this},handleEvents:function(){var e=this;return this.timeout=null,this.scrollHandler=function(t){e.handleScroll(t)},this.container.addEventListener("scroll",this.scrollHandler,{passive:!0}),this},handleScroll:function(e){var t=this;this.timeout&&cancelAnimationFrame(this.timeout);var n=e.target;this.timeout=requestAnimationFrame(function(){t.scrollTop=n.scrollTop})},renderItems:function(e){var t=this;if(this.settings.data&&(e||this.data.length!==0)){var n=this.startIndex,i=this.startIndex+this.visibleItemCount();if(this.lastStart!==n||this.lastEnd!==i){this.lastStart=n,this.lastEnd=i;var a=this.settings.data.slice(n,i),r="";a.map(function(o,c){var u=t.itemTemplate(o,c);return r+=u,u}),this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.itemContainer.innerHTML=r,this.element.trigger("afterrendered",this,{elem:this,startIndex:n,endIndex:i})}}},applyHeight:function(){this.container.style.height="".concat(this.settings.height,"px"),this.container.querySelector(".ids-virtual-scroll-viewport").style.height="".concat(this.viewPortHeight,"px"),this.itemContainer=this.element.find(".contents")[0],this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.isTable=this.element.find(".ids-data-grid-container").length>0,this.isTable&&(this.element.find(".ids-virtual-scroll")[0].style.overflow="inherit")},visibleItemCount:function(){var e=Math.ceil(this.height/this.itemHeight)+2*this.bufferSize;return e=Math.min(Number(this.itemCount)-this.startIndex,e)},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,oo)),this.unbind().init()},unbind:function(){this.container.removeEventListener("scroll",this.scrollHandler),$.removeData(this.element[0],Er)},destroy:function(){this.unbind(),$.removeData(this.element[0],Er)},set height(e){this.settings.height=e},get height(){return this.data.length===0?0:this.settings.height},set itemHeight(e){this.settings.itemHeight=e},get itemHeight(){return this.settings.itemHeight},set bufferSize(e){this.settings.bufferSize=e},get bufferSize(){return this.settings.bufferSize||20},set scrollTop(e){this.container.scrollTop===e?(this.settings.scrollTop=e,this.renderItems(!1)):this.container.scrollTop=e},get scrollTop(){return this.settings.scrollTop||0},scrollTo:function(e){this.scrollTop=Number(e)*this.itemHeight},get viewPortHeight(){return Number(this.itemCount)*Number(this.itemHeight)},set itemCount(e){this.settings.itemCount=e},get itemCount(){return this.settings.itemCount},get offsetY(){return Number(this.startIndex)*Number(this.itemHeight)},get startIndex(){var e=Math.floor(Number(this.scrollTop)/Number(this.itemHeight))-Number(this.bufferSize);return e=Math.max(0,e)},itemTemplate:function(e){return this.injectTemplate(this.stringTemplate,e)},injectTemplate:function(e,t){return e.replace(/\${(.*?)}/g,function(n,i){return t[i]})},set data(e){if(e)return this.settings.data=e,this.itemCount=e.length,this.lastStart=null,this.lastEnd=null,this.scrollTop=0,this.applyHeight(),void this.renderItems(!0);this.settings.data=null},get data(){var e;return this==null||(e=this==null?void 0:this.settings)===null||e===void 0||e==null?void 0:e.data}};var Kt="dropdown",cr=["none","all","group"],fi={closeOnSelect:!0,cssClass:null,dropdownIcon:"dropdown",extraListWrapper:!1,filterMode:"contains",virtualScroll:!1,maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,showSearchUnderSelected:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{},tagListMaxHeight:120,allTextString:null,selectedTextString:null,selectAllFilterOnly:!0,appendTo:'[role="main"]',attributes:null,width:void 0,widthTarget:void 0,noResultsTextString:"NoResultsFound"};function Fi(e,t){this.settings=N.mergeSettings(e,t,fi),this.element=$(e),this.init()}Fi.prototype={get value(){var e=this.settings.reload,t=this.settings.multiple;if(e==="typeahead")return t?this.selectedValues:this.element.val();for(var n,i=[],a=this.element[0].options,r=0;r<a.length;r++)(n=a[r]).selected&&i.push(n.value||n.text);return t||i.length!==1?i:i[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var e=this.pseudoElem.find("span").css("max-width","");if(Math.round(e.width())>Math.round(this.pseudoElem.width()))return e.css("max-width","100%"),!0}return!1},get isFocused(){var e=document.activeElement,t=this.pseudoElem.length&&this.pseudoElem.is($(e)),n=this.list&&this.list.length&&this.list[0].contains(e),i=this.tagListAPI&&this.tagListAPI.element.contains(e);return!!(t||n||i)},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map(function(e){return e.value})},get selectedOptions(){return N.getArrayFromList(this.element[0].querySelectorAll("option")).filter(function(e){return e.selected})},init:function(){var e=this,t=this.element.attr("id");t=t?_e.stripTags(t):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",this.keydownFlag=!1,t||(t=N.uniqueId(this.element,"dropdown"),ue.setAttribute(this.element[0],"id",t),ue.setAttribute(this.element.parent().find("label").first()[0],"for",t)),Be.os.name!=="ios"&&Be.os.name!=="android"||(this.settings.noSearch=!0),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled");var n=this.element[0].classList;n.length===0&&(this.element[0].classList="dropdown");var i,a=n.contains("dropdown-xs")?"dropdown input-xs":n.contains("dropdown-sm")?"dropdown input-sm":n.contains("dropdown-lg")?"dropdown input-lg":"dropdown",r=this.element.attr("style");this.isHidden=r&&r.indexOf("display: none")>=0,this.isInlineLabel?i=this.inlineLabel.next(".dropdown-wrapper"):(i=this.element.parent(".dropdown-wrapper")).length||(i=this.element.next(".dropdown-wrapper")),this.wrapper=i,this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(this.element)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(a)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(t,"-shdo")),n.contains("text-align-reverse")?a+=" text-align-reverse":n.contains("text-align-center")&&(a+=" text-align-center"),this.label=$('label[for="'.concat(_e.stripTags(t),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",a):this.pseudoElem=$('<div class="'.concat(a,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var o=ue.getAttributes(this.element[0]),c=this.getDataAttributes(o,["data-validate"]);this.pseudoElem.attr(c.obj).attr({role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":"false"}),this.renderPseudoElemLabel(),this.settings.attributes&&N.addAttributes(this.pseudoElem,this,this.settings.attributes,"dropdown",!0),function(z){var V=z.element.prop("disabled"),U=z.element.prop("readonly");V?z.disable():U?z.readonly():z.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".trigger").find(".icon"),this.icon.length||(this.icon=$.createIconElement({icon:this.settings.dropdownIcon||"dropdown"}),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.settings.showSearchUnderSelected=!0,this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var u=this.element.attr("data-source");u&&u!=="source"&&(this.settings.source=u);var p=this.element.attr("data-maxselected");function m(z,V){switch(z){case(!V||"true"):return"all";case(!!V&&"false"):return"none";default:return cr.indexOf(z)>-1?z:"none"}}p&&!isNaN(p)&&(this.settings.maxSelected=parseInt(p,10)),this.settings.moveSelectedToTop!==void 0&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var v=this.element.attr("data-move-selected");this.settings.moveSelected=v?m(v,!0):m(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var w=this.element.attr("data-close-on-select");w&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect=w==="true");var C=this.element.attr("data-no-search");C&&!this.settings.noSearch&&(this.settings.noSearch=C==="true");for(var A=["-xs","-sm","-mm","-md","-lg"],S=this.element.attr("class"),M=null,I=0;I<A.length;I++)M=A[I],S.match(M)&&this.pseudoElem.addClass("dropdown".concat(M));return this.dataset=[],this.listfilter=new ro({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout(function(){e.toggleTooltip()},0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var e=this;function t(r){e.settings.dismissHandler&&e.settings.dismissHandler(r);var o=e.selectedOptions.filter(function(c){return _e.stripHTML(c.value)===r.settings.value});o.length&&e.deselect(o[0]),e.tagListAPI.element.classList[e.selectedOptions.length?"remove":"add"]("empty"),e.isOpen()&&e.updateList()}var n=this.toTagData();n.forEach(function(r){r.dismissHandler=t,e.settings.clickHandler&&(r.clickHandler=e.settings.clickHandler),e.isDisabled()&&(r.disabled=!0)});var i=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:n}):(this.tagListAPI=new Sr(i,{tags:n}),i.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),isNaN(this.settings.tagListMaxHeight)||(i.classList.add("scrollable"),i.style.maxHeight=n.length?"".concat(this.settings.tagListMaxHeight,"px"):"");var a=i.scrollHeight>i.clientHeight;this.pseudoElem[0].classList[a?"add":"remove"]("has-scrollbar"),this.isOpen()&&this.position()},renderPseudoElemLabel:function(){var e,t=this.element.prev(),n=this.element.parent().find(".error-message .message-text"),i=(e=this.pseudoElem)===null||e===void 0||e==null?void 0:e.hasClass("error"),a=n.text(),r="";this.selectedOptions.forEach(function(o){r.length&&(r+=", "),r+=$(o).text().trim()}),this.pseudoElem.attr({"aria-label":"".concat(t.text(),", ").concat(i?a:r)})},inputTimer:function(){if(this.inputTimeout)return!1;var e=this;return this.inputTimeout=setTimeout(function(){clearTimeout(e.inputTimeout),e.inputTimeout=null},200),!0},setWidth:function(){var e=this.element[0].style;e.width&&(this.pseudoElem[0].style.width=e.width),e.position==="absolute"&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=e.left,this.pseudoElem[0].style.top=e.top,this.pseudoElem[0].style.bottom=e.bottom,this.pseudoElem[0].style.right=e.right)},setItemIcon:function(e){if(!e.icon)return e.isIcon=!1,e.html="",void this.listIcon.items.push(e);at(e.icon)==="object"&&(e.obj=e.icon,e.icon=e.icon.icon,e.obj.color?e.obj.color.indexOf("#")===0?e.specColor=e.obj.color:e.classList=" ".concat(e.obj.color):e.obj.class&&(e.obj.class.indexOf("#")===0?e.specColor=e.obj.class:e.classList=" ".concat(e.obj.class)),e.obj.colorOver?e.obj.colorOver.indexOf("#")===0?e.specColorOver=e.obj.colorOver:e.classListOver=" ".concat(e.obj.colorOver):e.obj.classOver&&(e.obj.classOver.indexOf("#")===0?e.specColorOver=e.obj.classOver:e.classListOver=" ".concat(e.obj.classOver))),e.isIcon=e.icon&&e.icon.length,e.classList&&e.classList.length&&(e.isClassList=!0),e.classListOver&&e.classListOver.length&&(e.isClassListOver=!0),e.icon==="swatch"?(e.isSwatch=!0,e.html='<span class="swatch '.concat(e.isClassList?e.classList:"",'"></span>')):e.html=$.createIcon({icon:e.isIcon?e.icon:"",class:"listoption-icon ".concat(e.isClassList?" ".concat(e.classList):"")}),this.listIcon.items.push(e)},setListIcon:function(){var e=this,t=!e.settings.multiple&&e.element.find("[data-icon]").length>0,n=t?this.element.find("option"):[];if(e.listIcon={hasIcons:t,items:[]},t){var i=0;n.each(function(r,o){var c=$(this).attr("data-icon"),u=null;if(typeof c=="string"&&c.length&&c!=="{}"&&!((u=c.indexOf("{")!==0?c:$.fn.parseOptions(this,"data-icon"))instanceof Object&&u.icon==="")){e.setItemIcon({html:"",icon:u,value:o.value||null});var p=e.listIcon.items.filter(function(m){return(m.icon===u||m.icon===u.icon)&&m.value===o.value});(e.listIcon.items[r]&&e.listIcon.items[r].isIcon||p.length>0)&&i++}}),t=i>0}if(t){var a=$.createIconElement({icon:"",class:"listoption-icon"});e.pseudoElem.prepend(a),e.listIcon.pseudoElemIcon=a,e.listIcon.idx=-1}e.listIcon.hasIcons=t},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var e=this,t=$(this.element[0].selectedOptions),n=this.getOptionText(t);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:_e.escapeHTML(n),trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",function(){e.removeTooltip()}).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(e){var t=this;if(t.listIcon.hasIcons){var n=e?e.find(".listoption-icon"):null;t.list.find("li").each(function(i){var a=$(this),r=a.find(".listoption-icon"),o=t.listIcon.items[i];o&&(a.is(".is-focused")&&o.isClassListOver&&r.removeClass(o.classListOver).addClass(o.classList),n&&a.is(e)&&o.isClassListOver&&(n.removeClass(o.classList),n.addClass(o.classListOver)))})}},updateItemIcon:function(e){var t=this;if(t.listIcon.hasIcons){var n=t.pseudoElem.find(".listoption-icon"),i=e.index(),a=t.listIcon.items[i],r=e[0],o=t.listIcon.items.filter(function(u){return(u==null||u==null?void 0:u.value)===(r==null||r==null?void 0:r.value)});if(n.each(function(u,p){return p.remove()}),o.length===0||!a)return t.listIcon.pseudoElemIcon="",void(t.listIcon.idx=i);var c=$.createIconElement({icon:a.icon,class:["listoption-icon"]});t.pseudoElem.prepend(c),t.listIcon.pseudoElemIcon=c,a.isClassList&&c.addClass(a.classList)}},updateList:function(e){var t=this,n=this.settings,i=t.isMobile(),a=t.list!==void 0&&t.list!==null&&t.list.length>0,r="",o="",c=0,u=this.element.find("optgroup").length,p="",m=this.settings.multiple===!0,v="".concat(this.settings.moveSelected),w=this.settings.showSelectAll===!0,C={all:L.translate("All"),selected:L.translate("Selection"),labelText:t.isInlineLabel?t.inlineLabelText.text():this.label.text()};C.all=typeof n.allTextString=="string"&&n.allTextString!==""?t.settings.allTextString:"".concat(C.all),C.selected=typeof n.selectedTextString=="string"&&n.selectedTextString!==""?t.settings.selectedTextString:"".concat(C.selected);var A=this.settings.extraListWrapper?'<div class="dropdown-list-wrapper">':"",S=this.settings.extraListWrapper?"</div>":"",M=N.getAttribute(this,"id",this.settings.attributes),I="".concat(M?"".concat(M,"-"):"","dropdown-list"),z="".concat(M?"".concat(M,"-"):"","listbox"),V=' role="listbox"';this.element[0].classList.contains("text-align-reverse")?p=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(p=" text-align-center"),a?(this.list.attr("id",I),this.listUl.attr("id","".concat(z))):(r='<div class="dropdown-list'.concat(p).concat(i?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="').concat(I,'" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",`>
        <label for="dropdown-search" class="audible">`).concat(this.settings.noSearch?L.translate("PressDown"):L.translate("TypeToFilter"),`</label>
        <input type="text" class="dropdown-search`).concat(p,'" ').concat(this.settings.noSearch?'aria-readonly="true"':"",` id="dropdown-search" autocomplete="off" />
        <span class="trigger">`).concat(i?$.createIcon({icon:"close",classes:["close"]}):$.createIcon({icon:this.settings.dropdownIcon||"dropdown"}),"</span>"),this.settings.virtualScroll?r+=`<div class="virtual-scroll-container">
            <div class="ids-virtual-scroll">
              <div class="ids-virtual-scroll-viewport">
                <ul id="`.concat(z,'"').concat(V,' class="contents" aria-label="').concat(L.translate("Dropdown"),`"></ul>
              </div>
            </div>
          </div>`):r+="".concat(A,'<ul id="').concat(z,'"').concat(V,' aria-label="').concat(L.translate("Dropdown"),'">'));var U=this.element.find("option"),G=this.element.find("optgroup"),J=function(ie,me){return me.selected},te=[];this.settings.reload==="typeahead"&&(J=function(ie,me){return!!t.selectedValues&&t.selectedValues.indexOf(me.value)>-1});var de=U.filter(J);if(this.settings.reload==="typeahead"&&de.prop("selected",!0),m&&w&&U.length){var H=U.not("[disabled], .hidden").length===de.not("[disabled], .hidden").length;o+='<li role="none" class="dropdown-select-all-list-item'.concat(H?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(L.translate("SelectAll"),"</a>")+"</li>"}if(v==="group"&&(G&&G.length?G.each(function(ie,me){var ke=de.filter(function(){return $.contains(me,this)});te.push(ke)}):v="all"),v==="all"&&(U=U.not(de),de.length>0&&(o+=t.buildLiHeader(C.selected)),de.each(function(ie){o+=t.buildLiOption(this,ie,e),c++}),!u&&U.length>0&&(o+=t.buildLiHeader(C.all))),this.settings.virtualScroll?o="":U.each(function(ie){var me,ke=ie+c,De=$(this),Me=De.parent();Me.is("optgroup")&&G.length&&(me=Me.index(),G.index(Me)>-1&&(G=G.not(Me),o+=t.buildLiHeader("".concat(Me.attr("label"))),v==="group"&&te[me].each(function(Ve){o+=t.buildLiOption(this,Ve,e),c++}))),v!=="none"&&De.is(":selected")||(o+=t.buildLiOption(this,ke,e))}),a?(this.listUl.html(o),t.settings.attributes&&this.listUl.find(".dropdown-option a").each(function(ie){var me=$(this);N.addAttributes(me,t,t.settings.attributes,"option-".concat(ie),!0)})):(r+=this.settings.virtualScroll?"".concat(o,"</div>"):"".concat(o,"</ul>").concat(S,"</div>"),this.list=$(r),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),Be.os.name!=="ios"&&Be.os.name!=="android"||this.searchInput.attr("readonly","readonly"),this.virtualScrollElem=this.listUl.closest(".virtual-scroll-container"),this.opts=U,this.listIcon.hasIcons&&this.listIcon.pseudoElemIcon!==""){this.list.addClass("has-icons");var he=this.listIcon.pseudoElemIcon.clone();he.addClass("listoption-icon"),he.appendTo(this.list)}u&&this.listUl.addClass("has-groups"),this.hasTooltips=this.listUl.find("[title]").length>0||this.element.find("[title]").length>0,this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},buildLiHeader:function(e){return`<li role="none" class="group-label" focusable="false">
      `.concat(e,`
    </li>`)},buildLiOption:function(e,t,n){var i=this,a="",r=e.innerHTML,o=ue.getAttributes(e),c=o.getNamedItem("value"),u=o.getNamedItem("title"),p=u?' title="'.concat(u.value,'"'):"",m=o.getNamedItem("data-badge"),v=o.getNamedItem("data-badge-color"),w="",C=e.selected?" is-selected":"",A=e.disabled?" is-disabled":"",S=e.className?" ".concat(e.className.value):"",M=S.indexOf("clear")>-1?' class="clear-selection"':"",I=' tabIndex="'.concat(t&&t===0?0:-1,'"'),z=" ".concat(i.getDataAttributes(o,["data-badge","data-badge-color","data-val","data-icon"]).str),V=(c&&"value"in c?c.value:r).replace(/"/g,"/quot/"),U="",G=i.listIcon.items.filter(function(te){return te.value===e.value});if(i.listIcon.hasIcons&&G.length>0&&(U=G[0].html),z===" "&&(z=""),m&&(w='<span class="badge '.concat(v?v.value:"azure07",'">').concat(m.value,"</span>")),S.indexOf("clear")>-1&&r===""&&(r=L.translate("ClearSelection")),n&&n.length>0){var J=i.getSearchRegex(n);r=r.replace(J,'<span class="dropdown-highlight">$1</span>').trim()}return i.listIcon.hasIcons&&i.listIcon.items[t]&&i.listIcon.items[t].isSwatch&&(S+=" is-swatch"),a+='<li class="dropdown-option'.concat(C).concat(A).concat(S,'" data-val="').concat(V,'" ').concat(z).concat(p,` role="none">
      <a id="list-option-`).concat(t,'" href="#" ').concat(M,' role="option" ').concat(C?'aria-selected="true"':'aria-selected="false"').concat(I,">").concat(U).concat(r).concat(w,"</a></li>")},setDisplayedValues:function(){var e=$(this.element[0].selectedOptions),t=this.getOptionText(e);if(e.hasClass("clear")&&(t=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&e.length===0){var n=this.pseudoElem.find("span").first();return ue.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),n=$("#".concat(this.element.attr("id"))).next().find("span").first(),ue.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),this.setPlaceholder(t),void this.scrollRelease(this.listUl)}var i=this.element.attr("maxlength");i&&(t=t.substr(0,i)),t=t.trim();var a=this.pseudoElem.find("span");a.length>0&&(a[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(_e.escapeHTML(t))),this.settings.showSearchUnderSelected||this.setPlaceholder(t)}this.previousActiveDescendant=e.first().val(),this.renderPseudoElemLabel(),this.updateItemIcon(e),this.setBadge(e)},copyClass:function(e,t,n){e.hasClass(n)&&t.addClass(n)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next(".icon").hide())},setPlaceholder:function(e){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var t=typeof e!="string"||typeof e=="string"&&e==="";this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",t?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(e,t){var n=t.which;if(t.altKey&&n===38||n>111&&n<124&&!this.settings.onKeyDown)return t.stopPropagation(),t.preventDefault(),!1;if(!e.is(":disabled")&&!e.hasClass("is-readonly"))return t.ctrlKey&&this.settings.onKeyDown&&this.settings.onKeyDown(t)===!1?(t.stopPropagation(),t.preventDefault(),!1):!0},handleSearchEvents:function(){var e=this;this.filterTerm||(this.searchKeyMode=!1);var t,n=this.searchInput[0].value;Be.browser.name==="ie"&&Be.browser.version==="11"||(t=String.fromCodePoint(8)),n!=="."&&n!==t||(this.searchInput[0].value=""),this.searchInput.on("keydown.".concat(Kt),function(i){var a=$(e);return e.handleKeyDown(a,i)}).on("input.".concat(Kt),function(i){e.isFiltering=!0,e.handleAutoComplete(i)})},filterList:function(e){var t,n=this,i=!1;this.settings.source&&this.settings.reload==="typeahead"&&(i=!0,this.callSource());var a=this,r=!1;(t=a.listUl)===null||t===void 0||t==null||t.find(".no-results").remove();var o,c=$(".dropdown-option",this.listUl),u=$(".group-label",this.listUl);if(c.length&&this.list&&(!this.list||this.list.length)){e||(e="");var p=function(){if(o=!i&&e&&e.length?n.listfilter.filter(c,e):c,n.list.addClass("search-mode"),n.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),n.searchInput.removeAttr("aria-activedescendant"),n.unhighlightOptions(),o&&(o.length||e)){if(o.removeClass("hidden"),c.not(o).add(u).addClass("hidden"),n.filteredItems=c.filter(o),n.filteredItems.each(function(w){var C=$(this);C.children("a").attr("tabindex",w===0?"0":"-1"),r||(a.highlightOption(C),r=!0),a.highlightSearchTerm(C,e)}),u.each(function(){var w=$(this).nextUntil(".group-label, .selector").not(".hidden");(a.settings.showEmptyGroupHeaders||w.length)&&$(this).removeClass("hidden")}),o.length===0){var m='<li class="dropdown-option is-disabled is-placeholder no-results" role="presentation"><svg class="listoption-icon icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-search"></use></svg><span>'.concat(L.translate(n.settings.noResultsTextString),"</span></li>");a.listUl.append(m)}e="";var v=document.body.scrollHeight;window.scrollY+window.innerHeight>=v?a.position():a.shrinkTop(a)}else n.resetList()};if(this.settings.virtualScroll)return $(this.virtualScroller.element).one("afterrendered",function(){c=$(".dropdown-option",n.listUl),p()}),this.virtualScroller.data=this.listfilter.filter(this.opts,e),void(c=$(".dropdown-option",this.listUl));p()}},shrinkTop:function(e){if(e.list&&e.list[0].classList.contains("is-ontop")){var t=parseInt(e.list[0].offsetHeight,10),n=parseInt(e.searchInput[0].offsetHeight,10);e.list[0].style.top="".concat(e.wrapper[0].offsetParent.offsetTop+(t-n)+4,"px")}},resetList:function(){if(this.settings.source&&this.settings.reload==="typeahead")return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var e=this.listUl.find("li");e.removeAttr("style").each(function(){var t=$(this).children("a"),n=$(this),i=_e.escapeHTML(t.text()),a=n.children("a").find("svg").length!==0?new XMLSerializer().serializeToString(n.children("a").find("svg")[0]):"",r=n.children("a").find(".swatch"),o=r.length!==0?r[0].outerHTML:"";t[0]&&(t[0].innerHTML=o+a+i)}),this.list.hasClass("is-ontop")?this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px"):this.list[0].style.top="",delete this.filteredItems,this.settings.multiple&&this.updateList(),this.settings.virtualScroll&&(this.virtualScroller.data=this.opts),e.removeClass("hidden"),this.position(),this.list.find("svg").length===2&&this.list.find("svg").last().remove()}},selectBlank:function(){var e=this.element.find("option").filter(function(){return!this.value||$.trim(this.value).length===0});e.length&&(e[0].selected=!0,e[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.trigger("change").triggerHandler("selected"))},handleKeyDown:function(e,t){var n,i=this,a=this.element[0].selectedIndex||-1,r=this.element[0].options,o=t.which,c=this;if(!this.ignoreKeys(e,t))return!1;if(this.isLoading())return!0;if(c.settings.onKeyDown&&c.settings.onKeyDown(t)===!1)return t.stopPropagation(),t.preventDefault(),!1;if(c.isOpen()){r=c.settings.virtualScroll?this.opts:this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),a=-1,$(r).each(function(A){($(this).is(".is-focused")||c.settings.virtualScroll&&$(this).is(":selected"))&&(a=A)});var u=Be.os.name==="mac";if((!u&&t.key==="Delete"||u&&t.key==="Backspace"||t.key==="Backspace")&&this.settings.noSearch){var p=$(r[0]);this.highlightOption(p),t.key==="Backspace"&&(t.stopPropagation(),t.preventDefault())}}switch(o){case 37:case 8:case 46:if(!c.isOpen())return c.selectBlank(),t.stopPropagation(),t.preventDefault(),!1;break;case 9:return c.isOpen()?(c.filterTerm.length===1?c.selectStartsWith(c.filterTerm):!this.settings.multiple&&r.length&&a>-1&&c.selectOption(this.correctValue($(r[a]))),c.closeList("tab"),this.activate()):c.filterTerm.length===1&&c.selectStartsWith(c.filterTerm),!0;case 27:if(c.isOpen()){c.element.closest(".modal.is-visible").data("listclosed",!0);var m=c.pseudoElem?c.pseudoElem.parents("td"):null;return c.closeList("cancel"),c.activate(),m&&m.focus(),t.stopPropagation(),!1}break;case 32:case 13:if(c.isOpen()){if(o===32&&c.searchKeyMode===!0)break;if(t.preventDefault(),r.length&&a>-1){var v=$(r[a]);c.selectListItem(v)}}return t.stopPropagation(),!1;case 38:return!!t.shiftKey||(this.searchKeyMode=!1,this.keydownFlag=!0,a>0&&(n=$(r[a-1]),this.highlightOption(n),c.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),t.stopPropagation(),t.preventDefault(),!1);case 40:return!!t.shiftKey||(this.searchKeyMode=!1,this.keydownFlag=!0,a<r.length-1&&(n=$(r[a+1]),this.highlightOption(n),c.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),t.stopPropagation(),t.preventDefault(),!1);case 35:this.searchKeyMode=!1;var w=$(r[r.length-1]);return this.highlightOption(w),t.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var C=$(r[0]);return this.highlightOption(C),t.stopPropagation(),!1}return c.isOpen()?this.settings.noSearch!==!0||c.isControl(o)||this.handleAutoComplete(t):c.isControl(o)||this.settings.source||this.settings.noSearch||(c.isFiltering=!0,c.filterTerm=$.actualChar(t),c.searchInput&&c.searchInput.length&&c.searchInput.val($.actualChar(t)),c.toggle()),this.searchKeyMode=!0,c.searchInput&&c.searchInput.attr("aria-activedescendant",""),!0},handlePseudoElemKeydown:function(e){var t=$(e.target),n=e.key;if(t.is(".is-readonly"))return!0;var i=n==="Esc"||n==="Escape";if(["Alt","Shift","Control","Meta"].indexOf(n)>-1||!this.ignoreKeys(t,e))return!1;if(this.settings.onKeyDown&&this.settings.onKeyDown(e)===!1)return e.stopPropagation(),e.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(n)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!e.ctrlKey&&this.handleKeyDown(t,e),!1;var a=Be.os.name==="mac";return!a&&n==="Delete"||a&&n==="Backspace"||n==="Backspace"&&this.settings.noSearch?(this.selectBlank(),n==="Backspace"&&(e.stopPropagation(),e.preventDefault()),!0):i||n==="Tab"?!(this.filterTerm.length===1||this.settings.noSearch&&this.isOpen())||this.handleKeyDown(t,e):(this.handleAutoComplete(e),!0)},handleAutoComplete:function(e){var t=this;if(!this.isLoading()){var n=this;if(this.timer&&clearTimeout(this.timer),e.type==="input")this.filterTerm=n.settings.noSearch?this.searchInput.val().toLowerCase():this.searchInput.val();else{if(this.filterTerm+=$.actualChar(e).toLowerCase(),this.filterTerm==="")return;e.key===this.filterTerm||e.key.toLowerCase()!==this.filterTerm||n.settings.noSearch||(this.filterTerm=e.key)}this.timer=setTimeout(function(){var a;if(n.settings.noSearch&&n.filterTerm!=="")return n.isOpen()?n.highlightStartsWith(n.filterTerm):n.selectStartsWith(n.filterTerm),void(n.filterTerm="");if(n.searchKeyMode=!0,n.isOpen()||n.filterTerm===""){var r;((a=t.list)===null||a===void 0||a==null?void 0:a.find("ul li.hidden").length)===0&&((r=t.list)===null||r===void 0||r==null||r.find(" > svg.listoption-icon:not(.swatch)").changeIcon("icon-empty-circle")),i()}else n.open(i)},n.settings.delay)}function i(){n.filterTerm===""?n.resetList():n.filterList(n.filterTerm.toLowerCase())}},isControl:function(e){return e>7&&e<48||e>90&&e<94||e>111&&e<146},activate:function(e){var t=this,n=this.pseudoElem;e&&(n=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),e&&n&&(n.hasClass("is-readonly")||n.prop("readonly")===!0)||(t.isMobile()||t.filterTerm||!n||(n[0].setSelectionRange?n[0].setSelectionRange(0,n[0].value.length):n[0].tagName==="INPUT"&&n[0].select()),n&&document.activeElement.tagName!=="INPUT"&&n[0].focus())},getSearchRegex:function(e){var t;try{t=new RegExp("(".concat(ot.escapeRegExp(e),")"),"i")}catch{t=/[\s\S]*/i}return t},getOptionText:function(e){var t="";return e||(e=this.element.find("option:selected")),e.each(function(){t.length>0&&(t+="".concat(L.currentLocale.data.punctuation.comma," ")),t+=$(this).text().trim()}),t},open:function(e){var t=this;function n(){t.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),t.updateList(),t.openList(),e&&typeof e=="function"&&e.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||t.callSource(n)||n())},openList:function(){var e,t=this,n=this.previousActiveDescendant?this.list.find('.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]')):this.list.find(".is-selected"),i=this;if(this.touchPrevented=!1,this.scrollLock(this.listUl),$("select").each(function(){var te=$(this).data();te.dropdown&&te.dropdown.closeList("cancel")}),$(".popupmenu.is-open").filter(function(){return $(this).parents(".popupmenu").length===0}).each(function(){var te=$(this).data("trigger");if(te&&te.length){var de=$(this).data("trigger").data("popupmenu");de&&typeof de.close=="function"&&de.close()}}),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.list.attr("data-element-id",this.element.attr("id")),this.isShortField&&this.list[0].classList.add("dropdown-short"),i.settings.attributes){N.addAttributes(this.list.find("input"),this,this.settings.attributes,"search",!0),this.list.find("label").attr("for",this.list.find("input").attr("id")),N.addAttributes(this.list.find("label"),this,this.settings.attributes,"search-label"),N.addAttributes(this.list.find(".trigger svg"),this,this.settings.attributes,"trigger",!0),N.addAttributes(this.listUl,this,this.settings.attributes,"listbox",!0),N.addAttributes(this.list,this,this.settings.attributes,"list"),this.list.find(".dropdown-option a").each(function(te){var de=$(this);N.addAttributes(de,i,i.settings.attributes,"option-".concat(te),!0)});var a=N.getAttribute(this,"id",this.settings.attributes);this.pseudoElem.attr("aria-controls",a?"".concat(a,"-listbox"):"dropdown-list"),this.pseudoElem.attr("aria-expanded")}if(this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",n.children("a").attr("id")),this.searchInput.prop("readonly",this.settings.noSearch),this.settings.showSearchUnderSelected&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=this.pseudoElem.closest(".datagrid-row").length===1,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var r=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(r))}this.pseudoElem.closest(".datagrid-filter-wrapper").length===1&&this.list.addClass("datagrid-filter-dropdown");var o=this.settings.cssClass;if(o&&typeof o=="string"&&this.list.addClass(o),this.position(),this.list.hasClass("datagrid-filter-dropdown")&&document.querySelector(".datagrid-container")!==null){var c=this.dropdownParent.closest(".datagrid-container").getBoundingClientRect(),u=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),p=document.querySelector(this.settings.appendTo).getBoundingClientRect().right-c.right,m=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),v=!1;L.isRTL()&&m.left+20<0&&(v=!0),m.right+20>(window.innerWidth||document.documentElement.clientWidth)&&(v=!0),c.right<u.right&&v&&(this.list[0].style.right="".concat(p,"px"),this.list[0].style.left=""),L.isRTL()&&u.left<0&&(this.list[0].style.left="".concat(c.left,"px"))}if(this.settings.virtualScroll){var w=-1,C=null;this.opts.toArray().filter(function(te,de){return te.selected?(w=de,C=te,te):null}),this.virtualScroller=new lo(this.virtualScrollElem,{height:304,itemHeight:32,itemTemplate:function(te,de){var H=i.buildLiOption(de,te);return de.selected&&(C=de,n=$(C)),H=i.highlightSearchTerm($(H),i.filterTerm)},data:this.opts}),setTimeout(function(){$(t.virtualScroller.element).on("afterrendered",function(){t.highlightOption($(C))}),t.virtualScroller.scrollTo(w)})}if(this.setListWidth(),(this.settings.maxWidth||this.settings.width)&&this.position(),typeof this.filterTerm=="string"&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showSearchUnderSelected){var A=$(this.selectedOptions),S=this.getOptionText(A);this.searchInput.val(S)}var M=this.settings.multiple;if(this.highlightOption(n,M),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout(function(){i.listUl.scrollTop(0)},0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",function(te){te.which===13&&i.closeList("select")}),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",function(te){if(!i.touchPrevented){var de=i.selectListItem($(this));te.preventDefault(),de&&te.stopPropagation()}}).on("mouseenter.list","li",function(){i.keydownFlag?i.keydownFlag=!1:i.highlightOption($(this),!0)}),i.list.on("contextmenu.dropdown",function(te){i.element.trigger("listcontextmenu",te)}),this.hasTooltips){var I=function(){i.timer&&i.timer.destroy&&i.timer.destroy(!0)},z=function(te,de){$(te).tooltip({trigger:"immediate",content:de}),$(te).focus()},V=function(te){var de;I(),$("#tooltip").hide(),(de=$("#tooltip").data("tooltip"))===null||de===void 0||de==null||de.destroy()};i.list.on("mouseover.tooltip","li[title], li[data-title]",function(te){var de;de=te.currentTarget,I(),i.timer=new Gt({duration:50,timeoutCallback:function(){var H=de.getAttribute("title");if(!H)return H=de.getAttribute("data-title"),void z(de,H);de.setAttribute("data-title",H),de.removeAttribute("title"),z(de,H)}}),Hn.register(i.timer)}).on("mouseleave.tooltip, mousewheel.tooltip, click.tooltip","li[title], li[data-title]",function(te){V(te.currentTarget)})}function U(te){var de=$(te.target);if(i.touchPrevented||i.isDropdownElement(de)&&!de.is(".icon"))return te.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}this.scrollRelease(this.listUl),setTimeout(function(){i.list.addClass("is-closable")},100),$(document).on("touchstart.dropdown",function(te){i.touchPrevented=!1,e={x:te.originalEvent.touches[0].pageX,y:te.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",function(de){var H=de.originalEvent.touches[0].pageX,he=de.originalEvent.touches[0].pageY;(H>=e.x+10||H<=e.x-10||he>=e.y+10||he<=e.y-10)&&(i.touchPrevented=!0)})}).on("touchend.dropdown touchcancel.dropdown",function(te){if($(document).off("touchmove.dropdown"),te.preventDefault(),i.touchPrevented)return te.stopPropagation(),!1;U(te)}).on("click.dropdown",U);var G=$(".modal.is-visible .modal-body-wrapper"),J=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");J.length&&J.get(0).scrollHeight>J.get(0).clientHeight&&(G=J),G.length&&(this.parentScrollableArea=G,this.parentScrollableArea.on("scroll.dropdown",function(te){t.scrollDocument(te)})),$("body").on("resize.dropdown",function(){i.position(),window.orientation===void 0&&i.closeList("cancel")}).on("keydown.dropdown",function(te){var de=$(te.target);!t.isOpen()||de.hasClass("dropdown-search")||de.hasClass("dropdown")||t.handleKeyDown(de,te)}),window.orientation!==void 0&&$(window).on("orientationchange.dropdown",function(){i.closeList("cancel")})},isDropdownElement:function(e){return e.closest(".dropdown, .multiselect").length>0||e.closest(".dropdown-list").length>0||self.touchmove===!0},scrollDocument:function(e){var t=this,n=$("*:focus");t.touchPrevented||t.isDropdownElement($(e.target))||n.is(".timepicker")?t.touchPrevented=!1:t.closeList("cancel")},position:function(){var e=this,t={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y","nudge"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var n=this.pseudoElem;this.isInGrid&&(n=this.element.closest(".datagrid-cell-wrapper")),this.widthTargetEnabled&&(n=$(this.settings.widthTarget));var i=window.getComputedStyle(n[0]),a=2*parseInt(i.borderLeftWidth,10),r=Math.round(parseInt(n[0].clientWidth,10)+a);this.searchInput[0].style.cssText="width: ".concat(r,"px !important");var o=Math.round(this.list.width()),c=this.widthTargetEnabled||o<=r;if(this.searchInput[0].style.width="",t.parent=n,t.useParentWidth=c,!this.settings.showSearchUnderSelected){var u=window.devicePixelRatio>1,p=Be.browser.name==="chrome";t.y=-(parseInt(n[0].clientHeight,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)-(!p&&u?1:0)),t.x=0}e.settings.placementOpts&&e.settings.placementOpts.x&&(t.x=e.settings.placementOpts.x),this.setListWidth(),this.list.one("afterplace.dropdown",function(m,v){e.list[v.wasFlipped===!0?"addClass":"removeClass"]("is-ontop"),e.settings.virtualScroll||e.listUl[v.wasFlipped===!0?"prependTo":"appendTo"](e.settings.extraListWrapper?e.list.find(".dropdown-list-wrapper"):e.list);var w=window.getComputedStyle(e.list[0]),C=w.top?parseInt(w.top,10):0,A=$("html").hasClass("is-chrome"),S=0;Be.browser.name==="firefox"&&(S=4);var M,I=parseInt(e.listUl[0].offsetHeight,10),z=parseInt(e.list[0].offsetHeight,10)+5,V=parseInt(e.searchInput[0].offsetHeight,10),U=parseInt(e.list[0].offsetTop,10)+parseInt(e.list[0].offsetHeight,10)>=window.innerHeight;return V<z-2*V&&I+V>=z&&(M="".concat(z-V-5,"px"),U&&(e.list[0].style.maxHeight="".concat(parseInt(z,10)-5,"px"))),v.wasFlipped&&(M="".concat(z-V-S-5,"px"),e.isShortField||(e.list[0].style.top="".concat(C,"px"))),M&&!e.settings.virtualScroll&&(e.listUl[0].style.maxHeight=M),M===void 0&&e.list[0].classList.contains("is-ontop")&&(M="".concat(z-V-S-7),e.list[0].style.top="".concat(C-M,"px")),A||v.placement!=="bottom"||(e.list[0].style.top="".concat(C-1,"px")),v}).place(t),this.list.data("place").place(t)},selectListItem:function(e){var t=e.closest("li");if(t.length&&(e=t),e.is(".separator, .group-label"))return!1;e.is(".dropdown-select-all-anchor")&&(e=e.parent());var n=e[0].querySelector("a");if(this.settings.multiple&&e[0].classList.contains("dropdown-select-all-list-item")){var i=!e[0].classList.contains("is-selected");return e[0].classList[i?"add":"remove"]("is-selected"),i?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"),this.selectAll(i),!0}var a=this.correctValue(e);if(a.is(":disabled"))return!1;if(this.selectOption(a),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var r=this.element.find("option"),o=r.filter(":selected");r.length>o.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").attr("aria-selected","false"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(e){var t=e.attr("data-val")||e.attr("value");if(!t)return e;t=t.replace(/"/g,"/quot/");var n=this.element.find('option[value="'.concat(t,'"]'));return(n.length===0||n.length>1)&&(n=this.element.find("option").filter(function(){var i=$(this),a=i.attr("value");return i.text()===t||a&&a.replace(/"/g,"/quot/")===t})),n},close:function(){return this.closeList("cancel")},closeList:function(e){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.list.off("contextmenu.dropdown"),this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),delete this.filteredItems,this.tagListAPI&&this.scrollTagList(),this.searchInput.off(["input.".concat(Kt),"keydown.".concat(Kt)].join(" ")),this.list.off(["click.".concat(Kt),"touchmove.".concat(Kt),"touchend.".concat(Kt),"touchcancel.".concat(Kt),"mousewheel.".concat(Kt),"mouseenter.".concat(Kt)].join(" ")).remove(),this.pseudoElem.removeClass("is-open").attr("aria-expanded","false"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat(Kt),"scroll.".concat(Kt),"touchstart.".concat(Kt),"touchmove.".concat(Kt),"touchend.".concat(Kt),"touchcancel.".concat(Kt)].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",e),e!=="click"&&this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},get widthTargetEnabled(){return this.settings.width==="parent"&&typeof this.settings.widthTarget=="string"},setListWidth:function(){if(this.settings.maxWidth){var e=typeof this.settings.maxWidth=="number"?"".concat(this.settings.maxWidth,"px"):"auto";this.list.css("max-width",e)}if(this.settings.width){var t=typeof this.settings.width=="number"?"".concat(this.settings.width,"px"):"auto";if(this.widthTargetEnabled){var n=document.querySelector(this.settings.widthTarget);n&&(t="".concat(n.clientWidth,"px"))}this.list.css("width",t)}},scrollToOption:function(e){e&&e.length!==0&&(this.scrollLock(this.listUl),this.settings.virtualScroll?(e[0].closest(".ids-virtual-scroll").scrollTop=e[0].offsetTop-e[0].closest(".ids-virtual-scroll").offsetTop,e[0].scrollIntoView({block:"center"})):e[0].parentNode.scrollTop=e[0].offsetTop-e[0].parentNode.offsetTop,e.focus(),this.searchInput.focus(),this.scrollRelease(this.listUl))},scrollLock:function(){var e;(e=this.parentScrollableArea)===null||e===void 0||e==null||e.off("scroll.dropdown")},scrollRelease:function(){var e=this;setTimeout(function(){var t;(t=e.parentScrollableArea)===null||t===void 0||t==null||t.off("scroll.dropdown").on("scroll.dropdown",function(n){e.scrollDocument(n)})},Be.os.name==="ios"?800:400)},scrollTagList:function(){var e=this;this.tagListAPI&&setTimeout(function(){e.isFocused||(e.tagListAPI.element.scrollTop=0)},5)},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return Qs(this.toggle,this.toggleList).apply(this)},highlightOption:function(e,t){var n;this.isOpen()&&e&&(e.length===0&&(e=this.list.find(".dropdown-option").eq(0)),e.is(".separator, .group-label")||(e.is("option")?(n=e,e=this.listUl.find('li[data-val="'.concat(n.val(),'"]'))):n=this.element.find("option").filter(function(i,a){return a.value===e.attr("data-val")}),this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").children("a").attr({tabindex:"-1"}),e.length&&n.length&&!n.hasClass(".is-disabled")&&!n.is(":disabled")&&(this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),this.setItemIconOverColor(e),e.addClass("is-focused").children("a").attr({tabindex:"0"}),t&&t!==!1&&t!==void 0||this.scrollToOption(e))))},highlightSearchTerm:function(e,t){if(!e)return"";if(!t)return e[0].outerHTML;var n=e.children("a"),i=this.getSearchRegex(t),a=e.text();a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=_e.escapeHTML(a)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(i,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var r=e.children("a").find("svg").length!==0?new XMLSerializer().serializeToString(e.children("a").find("svg")[0]):"",o=e.children("a").find(".swatch"),c=o.length!==0?o[0].outerHTML:"";return n[0]&&(n[0].innerHTML=c+r+a),e[0].outerHTML},unhighlightOptions:function(e,t){e&&e.length||(e=this.list.find(".is-selected")),this.setItemIconOverColor(),e.removeClass("is-focused").children("a").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),t&&t!==!1&&t!==void 0||this.scrollToOption(e.first())},renderListItem:function(e){var t,n=e.value;n=(t=n)===null||t===void 0||t==null?void 0:t.replace(/"/g,"/quot/");var i=e.selected,a=this.listUl.find('li[data-val="'.concat(n,'"]')),r=a.children("a");if(a){if(i)return a[0].classList.add("is-selected"),void r[0].setAttribute("aria-selected","true");a[0].classList.remove("is-selected"),r[0].setAttribute("aria-selected","false")}},selectAll:function(e){var t=this,n="option:not(.is-disabled):not(:disabled)",i="li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)",a=N.getArrayFromList(this.element[0].querySelectorAll(n)),r=N.getArrayFromList(this.listUl[0].querySelectorAll(i)),o=a[a.length-1];this.settings.selectAllFilterOnly&&this.filteredItems&&(a=[],(r=$.makeArray(this.filteredItems)).forEach(function(c){var u=c.getAttribute("data-val");if(u){var p=t.element[0].querySelector('option[value="'.concat(u,'"]'));p&&a.push(p)}})),e?(r.forEach(function(c){c.classList.add("is-selected"),c.querySelector("a").setAttribute("aria-selected","true")}),a.forEach(function(c){c.selected=!0,c.setAttribute("selected",!0)})):(r.forEach(function(c){c.classList.remove("is-selected"),c.querySelector("a").setAttribute("aria-selected","false")}),a.forEach(function(c){c.selected=!1,c.setAttribute("selected",!1),c.removeAttribute("selected")})),this.previousActiveDescendant=o.value||"",this.setDisplayedValues(),this.updateItemIcon(o),!this.settings.selectAllFilterOnly&&this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(o),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(e,t){Array.isArray(e)&&(e=$(e));var n=this;e.each(function(){n.selectOption($(this),t)}),n.element.trigger("change").triggerHandler("selected")},selectOption:function(e,t){var n;if(e&&e.length)if(this.scrollLock(this.listUl),e.is("li")&&(n=e,(e=this.element.find('option[value="'.concat(e.attr("data-val"),'"]'))).length===0&&(e=this.element.find("option").filter(function(){return $(this).text()===n.attr("data-val")})),e.prop("disabled")))this.scrollRelease(this.listUl);else{var i=e.val();typeof e=="string"?(n=this.listUl.find('li[data-val="'.concat(e,'"]')),i=e,e=this.element.find('option[value="'.concat(i,'"]'))):typeof i=="string"&&(i=i.replace(/"/g,"/quot/"),n=this.listUl.find('li[data-val="'.concat(i,'"]')));var a=this.listUl.find("li").first().hasClass("is-selected"),r=!0,o=!0,c=this.selectedValues,u=!1;!e.hasClass("clear")&&n||(u=!0),u&&this.deselectAll(),Array.isArray(c)||(c=[c]);var p=c.indexOf(i)>-1;this.settings.multiple&&p&&(r=!1),r?p&&!a?o=!1:(this.select(e[0]),this.previousActiveDescendant=i,this.settings.noSearch&&this.searchMatches&&delete this.searchMatches):(this.deselect(e[0]),this.previousActiveDescendant=void 0);var m=this.listUl[0].scrollTop;m>0&&(this.currentlyScrolledPos=m),this.renderListItem(e[0]),this.setDisplayedValues(),this.updateItemIcon(e),!t&&o&&(this.element.trigger("change").triggerHandler("selected",[e,r]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(e);var v=this.element.attr("id");if(Be.browser.isIE11()&&v){var w=$("#".concat(v)).html(),C=$("#".concat(v)).val();w&&this.element.html(w),C&&this.element.val(C)}$(".tooltip:not(.is-hidden)").hide(),this.scrollRelease(this.listUl)}},select:function(e){e&&e instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(e.selected=!0))},selectValue:function(e){if(typeof e=="string"){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.select(t[0]),this.updated())}},deselect:function(e){e&&e instanceof HTMLOptionElement&&(e.selected=!1,this.element.trigger("change"))},deselectValue:function(e){if(typeof e=="string"){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.deselect(t[0]),this.updated())}},deselectAll:function(){var e=this;this.element.find("option").each(function(t,n){$(n).prop("selected",!1),e.deselectValue(n)})},firstOptionStartingWith:function(e){if(typeof e=="string"){var t=this.element[0],n=-1,i=0;this.searchMatches&&this.searchMatches[e]||(this.searchMatches={},this.searchMatches[e]=[]);for(var a=0;a<t.options.length;a++)if(t.options[a].innerText.toLowerCase().indexOf(e)===0){if(this.searchMatches[e].indexOf(a)===-1){this.searchMatches[e].push(a),n=a;break}i++}if(n===-1){if(!this.searchMatches[e].length)return;i===this.searchMatches[e].length&&(n=this.searchMatches[e][0],this.searchMatches[e].length=1)}return t.options[n]}},selectStartsWith:function(e){this.filterTerm="";var t=this.firstOptionStartingWith(e);this.select(t),this.updated(),this.element.trigger("change")},highlightStartsWith:function(e){if(this.isOpen()){var t=this.firstOptionStartingWith(e);this.highlightOption($(t))}},setBadge:function(e){if(this.badges){var t=this.element.parent().find(".badge");t.length===0&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),t=this.element.parent().find(".badge")),t.attr("class","badge ".concat(e.attr("data-badge-color")?e.attr("data-badge-color"):"azure07")).text(e.attr("data-badge"))}},callSource:function(e,t){var n=this,i="";if(t||!this.isOpen()||this.element.hasClass("search-mode")||(i=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var a=at(this.settings.source),r=function(u,p){var m="",v=n.element.val();function w(I){return I.replace(/"/g,"'")}function C(I){if(I!=null){var z="",V="",U="",G="";typeof I=="string"&&(I={value:I}),I.value!==void 0&&(I.value=w(I.value)),I.id!==void 0&&(isNaN(I.id)||(I.id="".concat(I.id)),I.id=w(I.id),z=' id="'.concat(I.id,'"')),I.label!==void 0&&I.label.length&&(I.label=w(I.label),U=I.label);var J=n.selectedValues.indexOf(v)>-1;n.settings.multiple?v.forEach(function(te){te===I.value&&(I.selected=!0)}):(I.value===v||J)&&(I.selected=!0),I.selected&&(V=" selected"),I.disabled&&(G=" disabled"),U.length||U===I.value||(U+=I.value),m+="<option".concat(z,' value="').concat(I.value,'"').concat(V).concat(G,`>
          `).concat(U,`
        </option>`)}}if(!n.isFiltering&&!N.equals(u,n.dataset)&&(n.dataset=u,!p)){n.element.empty();for(var A=0;A<u.length;A++){var S=void 0;if(u[A].group){S=u[A].options,m+='<optgroup label="'.concat(u[A].group,'">');for(var M=0;M<S.length;M++)C(S[M]);m+="</optgroup>"}else C(u[A])}n.element.append(m)}n.element.triggerHandler("complete"),n.element.trigger("requestend",[i,u]),typeof e=="function"?e():n.updateList(i)};if(n.element.triggerHandler("start"),n.element.trigger("requeststart"),a==="function")this.settings.source(r,i,this.settings.sourceArguments);else if(a==="object"){var o=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];r(o)}else{var c=this.settings.source.toString();$.getJSON(c).done(function(u){r(u)}).fail(function(){r([])})}return!0},getDataAttributes:function(e,t){if(e){typeof e=="string"&&(e=[e]);var n=t||[];typeof n=="string"&&(n=[n]);var i={obj:{},str:"",isExclude:function(r){return $.inArray(r,n)>-1}};for(var a in e)e.hasOwnProperty(a)&&(i.name="".concat(e[a].name),i.isData=i.name.substr(0,5)==="data-",i.isData&&!i.isExclude(i.name)&&(i.obj[i.name]=e[a].value,i.str+=" ".concat(i.name,'="').concat(e[a].value,'"')));return{str:i.str,obj:i.obj}}},setCode:function(e){var t=this,n=function(){t.element.val(e),t.updated()};t.callSource(n)||n()},isMobile:function(){return["ios","android"].indexOf(Be.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var e=[],t=this.element[0].id;return t||(t=N.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach(function(n){e.push({content:n.innerText.trim(),dismissible:!0,href:"#",id:"".concat(t,"-tag-").concat(n.value),style:"secondary",value:n.value})}),e},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.addClass("is-disabled"),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("aria-readonly","true").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.settings.multiple&&this.settings.multiple===!0?this.element.prop("multiple",!0):this.element.prop("multiple",!1),this.element.prop("readonly")===!0?this.readonly():(this.pseudoElem.removeClass("is-readonly"),this.pseudoElem.removeAttr("aria-readonly")),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setListIcon(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],Kt),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var e=document.body.querySelector("#dropdown-list");e&&this.isOpen()&&e.parentNode.removeChild(e)},handleEvents:function(){var e=this,t=this;function n(a){var r=$(a.target).parents(".tag").length>0,o=!1;return a.target instanceof HTMLElement&&typeof a.target.className=="string"&&(o=a.target.classList.contains("tag")),!(!o&&!r)}var i=!1;this.pseudoElem.on("keydown.dropdown",function(a){return e.handlePseudoElemKeydown(a)}).on("click.dropdown touchstart.dropdown",function(a){a.originalEvent.ctrlKey&&a.originalEvent.shiftKey||a.stopPropagation(),i||(t.dropdownParent=a.currentTarget,t.toggle())}).on("mouseup.dropdown touchend.dropdown",function(a){a.button===2&&a.stopPropagation()}).on("mousedown.dropdown touchstart.dropdown",function(a){i=n(a)}).on("touchcancel.dropdown",function(a){n(a)||(a.stopPropagation(),t.toggle(),a.preventDefault())}),this.tagListAPI&&this.pseudoElem.on("focusout.dropdown",function(){e.scrollTagList()}),t.element.on("activated.dropdown",function(){t.label.trigger("click")}).on("updated.dropdown",function(a){a.stopPropagation(),t.updated()}).on("openlist.dropdown",function(){t.toggle()}),t.element.closest("form").on("reset.dropdown",function(){setTimeout(function(){t.element.triggerHandler("updated")},1)}),this.label.on("click",function(){t.isDisabled()||t.pseudoElem.focus()})}},$.fn.dropdown=function(e){return this.each(function(){var t=$.data(this,Kt);t?t.updated(e):t=$.data(this,Kt,new Fi(this,e))})};var aa="colorpicker",co={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"161618"},{label:"Slate",number:"09",value:"28282A"},{label:"Slate",number:"08",value:"3B3B3F",border:"dark"},{label:"Slate",number:"07",value:"525257",border:"dark"},{label:"Slate",number:"06",value:"6F6F76"},{label:"Slate",number:"05",value:"8E8E95"},{label:"Slate",number:"04",value:"BBBBBF"},{label:"Slate",number:"03",value:"C5C5C9"},{label:"Slate",number:"02",value:"E0E0E1"},{label:"Slate",number:"01",value:"FAFAFA",border:"light, contrast"},{label:"Amber",number:"10",value:"A14100"},{label:"Amber",number:"09",value:"BB5500"},{label:"Amber",number:"08",value:"CD6200"},{label:"Amber",number:"07",value:"DF6F00"},{label:"Amber",number:"06",value:"F98300"},{label:"Amber",number:"05",value:"FA9601"},{label:"Amber",number:"04",value:"FBAF50"},{label:"Amber",number:"03",value:"FCC888"},{label:"Amber",number:"02",value:"FDDFBD"},{label:"Amber",number:"01",value:"FEF2E5"},{label:"Ruby",number:"10",value:"6C080B"},{label:"Ruby",number:"09",value:"8D0B0E"},{label:"Ruby",number:"08",value:"A30D11"},{label:"Ruby",number:"07",value:"C31014"},{label:"Ruby",number:"06",value:"DA1217"},{label:"Ruby",number:"05",value:"DF3539"},{label:"Ruby",number:"04",value:"E66467"},{label:"Ruby",number:"03",value:"EE9496"},{label:"Ruby",number:"02",value:"F5C3C4"},{label:"Ruby",number:"01",value:"FBE7E8"},{label:"Turquoise",number:"10",value:"1F5E5E"},{label:"Turquoise",number:"09",value:"297B7B"},{label:"Turquoise",number:"08",value:"2F8D8E"},{label:"Turquoise",number:"07",value:"39A9AA"},{label:"Turquoise",number:"06",value:"40BDBE"},{label:"Turquoise",number:"05",value:"5CC6C7"},{label:"Turquoise",number:"04",value:"82D4D4"},{label:"Turquoise",number:"03",value:"A8E1E1"},{label:"Turquoise",number:"02",value:"CFEEEE"},{label:"Turquoise",number:"01",value:"ECF8F8"},{label:"Emerald",number:"10",value:"156138"},{label:"Emerald",number:"09",value:"1C7F49"},{label:"Emerald",number:"08",value:"1F9254"},{label:"Emerald",number:"07",value:"25AF65"},{label:"Emerald",number:"06",value:"2AC371"},{label:"Emerald",number:"05",value:"4DCC86"},{label:"Emerald",number:"04",value:"78D8A3"},{label:"Emerald",number:"03",value:"A1E4BF"},{label:"Emerald",number:"02",value:"CBEFDC"},{label:"Emerald",number:"01",value:"EBF9F1"},{label:"Amethyst",number:"10",value:"3B1470"},{label:"Amethyst",number:"09",value:"4E1A91"},{label:"Amethyst",number:"08",value:"591DA8"},{label:"Amethyst",number:"07",value:"6C23C9"},{label:"Amethyst",number:"06",value:"7928E1"},{label:"Amethyst",number:"05",value:"8D4BE5"},{label:"Amethyst",number:"04",value:"A876EB"},{label:"Amethyst",number:"03",value:"C2A1F1"},{label:"Amethyst",number:"02",value:"DDCBF7"},{label:"Amethyst",number:"01",value:"F1EBFC"},{label:"Azure",number:"10",value:"003876"},{label:"Azure",number:"09",value:"004A99"},{label:"Azure",number:"08",value:"0054B1"},{label:"Azure",number:"07",value:"0066D4"},{label:"Azure",number:"06",value:"0072ED"},{label:"Azure",number:"05",value:"1C86EF"},{label:"Azure",number:"04",value:"55A3F3"},{label:"Azure",number:"03",value:"8ABFF7"},{label:"Azure",number:"02",value:"BEDCFA"},{label:"Azure",number:"01",value:"E6F1FD"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function uo(e,t){this.settings=N.mergeSettings(e,t,co),t&&t.colors&&(this.settings.colors=t.colors),this.element=$(e),this.init()}uo.prototype={init:function(){this.isIe=Be.browser.name==="ie",this.isIeEdge=Be.browser.name==="edge",this.isIe11=this.isIe&&Be.browser.version==="11",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=L?L.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor=this.settings.placeIn==="editor";var e=this.element,t=this.isEditor?this.element.attr("data-value"):this.element.val(),n="swatch".concat(t&&$.trim(t)!==""?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),e.wrap(this.container)),this.container=e.parent(),this.swatch=$('<span class="'.concat(n,'"></span>')).prependTo(this.container),this.settings.showLabel){var i=e.data("mask");i&&typeof i.destroy=="function"&&i.destroy()}else e.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]});var a=this.element.children(".trigger");this.container&&this.container.length&&(a=this.container.children(".trigger")),a&&a.length&&a.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),t&&this.setColor(t),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.is(":disabled")&&this.container&&this.container.closest(".field").addClass("is-disabled"),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria(),N.addAttributes(this.element,this,this.settings.attributes,"colorpicker"),N.addAttributes(this.element.parent().find(".trigger"),this,this.settings.attributes,"trigger")},getHexFromLabel:function(e){for(var t=0;t<this.settings.colors.length;t++){var n=this.settings.colors[t],i=L.translate(n.label,!0);if(e===n.label+n.number||e===i+n.number){var a=n.value;return a.substr(0,1)!=="#"&&(a="#".concat(a)),a}}return""},getLabelFromHex:function(e){if(!e)return"";for(var t=0;t<this.settings.colors.length;t++){var n=this.settings.colors[t];if(e.replace("#","")===n.value.replace("#",""))return this.translateColorLabel(n.label)+n.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var e,t=parseInt(this.element[0].style.width,10);this.container.css({width:t}),this.element.css({width:t-4-Number((e=this.swatch)===null||e===void 0||e==null?void 0:e.width())})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(L.translate("UseArrow"),"</span>"))},toggleList:function(){var e=this,t=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||t.length&&this.isPickerOpen)){t=this.updateColorMenu();var n=N.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:L.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(n).on("open.colorpicker",function(){e.element.parent().addClass("is-open"),e.isPickerOpen=!0}).on("close.colorpicker",function(){[].slice.call(e.menu[0].querySelectorAll("a")).forEach(function(i){var a=$(i).data("tooltip");a&&a.hide()}),t.on("destroy.colorpicker",function(){e.element.off("open.colorpicker selected.colorpicker close.colorpicker"),e.menu.off("destroy.colorpicker").remove()}),e.element.parent().removeClass("is-open"),e.isPickerOpen=!1,e.element.trigger("listclosed","select")}).on("selected.colorpicker",function(i,a){e.element.is(".colorpicker-editor-button")||(e.itemLabel=a.data("label")),e.isEditor||e.setColor(a.data("value"),e.itemLabel);var r=!1;if(e.element.is(".colorpicker-editor-button")){var o=e.element.data("toolbaritem")||e.element.data("toolbarflexitem"),c=o?o.toolbarAPI:null;c&&c.overflowedItems.forEach(function(u){u.type==="colorpicker"&&(r=!0)})}r||e.element.focus(),e.element.trigger("change")}),this.menu=$("#colorpicker-menu"),setTimeout(function(){e.menu.find(".is-selected").focus()},1)}},setColor:function(e,t){e=e||"";var n=this.settings,i=e,a=t;e.toString().substr(0,1)!=="#"&&e!==""&&(i="#".concat(i));var r=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(i);if(n.showLabel&&t===n.clearableText)this.setValueOnField({hex:i,label:n.clearableText,isEmpty:!0});else{if(!r){if(!n.showLabel)return i=i!=="#"?i:"",void this.setValueOnField({hex:i,invalid:!0});a=e.replace("#",""),i=this.getHexFromLabel(a)}a||(a=this.getLabelFromHex(i)),this.setValueOnField({hex:i,label:a})}},setValueOnField:function(e){var t=this.settings,n=this.isEditor?"data-value":"value",i="";e.isEmpty||typeof e.hex!="string"||(i=t.uppercase?e.hex.toUpperCase():e.hex.toLowerCase()),this.swatch&&(e.isEmpty||e.invalid?(this.swatch.addClass(e.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=i)),this.element[0].value=t.showLabel?e.label:i,this.element[0].setAttribute(n,i),this.element[0].setAttribute("aria-describedby",e.label||"")},translateColorLabel:function(e){return e?typeof L.translate(e,!0)=="string"?L.translate(e,!0):e:""},getThemeMode:function(e){var t=Object.keys(co.themes).filter(function(i){return e.indexOf(i)>-1}),n="light";return t.length>0&&(n=t[0]),n},getThemeVariant:function(e){return this.getThemeMode(e)},updateColorMenu:function(){var e=this,t=this.settings,n=!!$("#colorpicker-menu").length,i=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),a=Vi.currentTheme,r=this.getThemeMode(a),o=t.themes[r].border==="all",c=t.themes[r].checkmark,u="";$("#colorpicker-menu").remove();for(var p=function(){var S=$("<li></li>"),M=$('<a href="#"><span class="swatch"></span></a>').appendTo(S),I=(e.translateColorLabel(t.colors[m].label)||t.colors[m].label)+(t.colors[m].number||""),z=parseInt(t.colors[m].number,10),V=new RegExp("\\b".concat(a,"\\b")),U=t.colors[m].value,G=!1,J=e.isEditor?e.element.attr("data-value"):e.element.val();t.showLabel&&!e.isEditor&&(J=e.getHexFromLabel(J)),(o||V.test(t.colors[m].border))&&(G=!0),J&&"".concat(J).toLowerCase().replace("#","")==="".concat(U).toLowerCase()&&(c&&$.each(c,function(de,H){z>=H[0]&&z<=H[1]&&(u=" checkmark-".concat(de))}),I!==e.itemLabel&&e.itemLabel!==void 0||M.addClass("is-selected".concat(u))),U=t.uppercase?U.toUpperCase():U.toLowerCase();var te=M.find(".swatch");te[0]&&(te[0].style.backgroundColor="#".concat(U)),te==null||te==null||te.addClass(G?"is-border":""),M[0].setAttribute("data-label",I),M[0].setAttribute("data-value",U),M[0].setAttribute("title","".concat(I," #").concat(U)),M.tooltip(),N.addAttributes(M,e,e.settings.attributes,I),n||i.append(S)},m=0,v=t.colors.length;m<v;m++)p();if(!n){if(t.clearable){var w=$("<li></li>"),C=this.element.attr("data-action")==="foreColor"?"000000":"",A=$('<a href="#" title="'.concat(t.clearableText,'"><span class="swatch is-empty').concat(o?" is-border":"",'"></span></a>')).appendTo(w);A.data("label",t.clearableText).data("value",C).tooltip(),N.addAttributes(A,this,this.settings.attributes,"clear"),i.append(w)}$("body").append(i)}return i},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(e){return typeof e!="number"?e:"rgb(".concat(255&e,", ").concat((65280&e)>>8,", ").concat((16711680&e)>>16,")")},rgb2hex:function(e){if(!e||e.search("rgb")===-1)return e;if(e==="rgba(0, 0, 0, 0)")return"transparent";var t=function(i){return"0".concat(parseInt(i,10).toString(16)).slice(-2)},n=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(t(n[1])).concat(t(n[2])).concat(t(n[3]))},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat(aa),"keyup.".concat(aa),"blur.".concat(aa),"openlist.".concat(aa),"change.".concat(aa),"paste.".concat(aa)].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat(aa)),this.swatch.remove(),delete this.swatch);var e=this.element.data("mask");if(e&&e.destroy(),this.icon&&this.icon.length){var t=this.icon.parent(".trigger");this.icon.off().remove(),t.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],aa),this},handleEvents:function(){var e,t,n,i,a,r=this,o=this.element,c=o.parent();(e=(t=this.icon).parent)===null||e===void 0||(e=(n=e.call)==null?void 0:n.call(e,t))===null||e===void 0||e==null||e.on("click.colorpicker",function(){return r.toggleList()}),(i=this.swatch)===null||i===void 0||i==null||i.on("click.colorpicker",function(){return r.toggleList()}),o.on("focus.colorpicker",function(){a=o.val(),c.addClass("is-focused")}).on("blur.colorpicker",function(){c.removeClass("is-focused"),r.isIeEdge&&!o.is(".is-open")&&a!==o.val()&&o.triggerHandler("change")}).on("openlist.colorpicker",function(){r.toggleList()});var u="blur.colorpicker paste.colorpicker change.colorpicker";u+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",o.on(u,function(){var p=r.isEditor?o.attr("data-value"):o.val();r.settings.showLabel?r.setColor(o.attr("value"),p):r.setColor(p)}),o.on("keydown.colorpicker",function(p){p.keyCode!==38&&p.keyCode!==40||r.toggleList(),p.keyCode===13&&r.setColor(o.val())})}},$.fn.colorpicker=function(e){return this.each(function(){var t=$.data(this,aa);t?t.updated(e):t=$.data(this,aa,new uo(this,e))})};var ha="toolbarflexitem",dr=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(e){return!$(e).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(e){if(e.nodeName!=="A")throw new Error("Unspecified error occured");return $(e).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],Bi={button:"button",actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},el={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1,attributes:null};function $r(e,t){this.element=e,this.settings=N.mergeSettings(this.element,t,el),this.init()}$r.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(e){var t=!1;if(dr.forEach(function(n){$(e).is(n.selector)&&(typeof n.filter!="function"||n.filter(e))&&(t=n.type)}),!t)throw new Error("Element ".concat(e," is not a valid Toolbar Item Type."));return t}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return this.disabled!==!0&&(this.type==="searchfield"||(this.type!=="actionbutton"||this.hasNoOverflowedItems!==!0)&&this.overflowed!==!0&&this.visible)},get focused(){return this.element.tabIndex===0},set focused(e){e?this.element.tabIndex=0:this.element&&(this.element.tabIndex=-1)},get selected(){return this.trueSelected},set selected(e){if(e)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var e=$(this.element),t=Bi[this.type];if(t)return e.data(t)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var e=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&e.push(this.selectedAnchor),$(this.element).trigger("selected",e,e[1])}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(e){var t=this.type==="searchfield"||this.type==="toolbarsearchfield";if(e)return t&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");t&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return this.element.className.indexOf("hidden")===-1},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(e){if(e)return this.element.disabled=!0,void(this.element.readOnly=!1);this.element.disabled=!1},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(e){if(this.hasReadOnly)return e?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var e=Be.rtl,t=this.element.getBoundingClientRect(),n=this.section.getBoundingClientRect();return e?t.left<n.left:t.right>n.right},set hasNoOverflowedItems(e){if(this.type==="actionbutton"&&this.componentAPI){var t=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(e&&t)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},get index(){return this.toolbarAPI.items.indexOf(this)},handleEvents:function(){var e=this,t=this,n=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&n.on("selected.".concat(ha),function(i,a){if(!e.selectedAnchor){if(i.stopPropagation(),e.type==="actionbutton"){var r,o=$(a).parent(),c=o.data("originalButton"),u=$(c).data("toolbarflexitem");if(o.parents("ul").length>1&&(r=o.data("original-menu-element"),c=o.parents("li").last().data("originalButton"),u=$(c).data("toolbarflexitem")),u)return r?(i.preventDefault(),u.selectedAnchor=$(r).children("a")):u.selectedAnchor=a,void(u.selected=!0)}t.selectedAnchor=a,t.selected=!0}}),this.type==="actionbutton"&&(n.on("beforeopen.".concat(ha),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat(ha)).on("resize.".concat(ha),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||n.on("focus.".concat(ha),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(e){e.target&&e.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){var e,t=this;this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly),Array.isArray(this.settings.attributes)&&(this.settings.componentSettings||(this.settings.componentSettings={}),this.settings.componentSettings.attributes?(e=[],this.settings.attributes.forEach(function(r){var o=t.settings.componentSettings.attributes.find(function(c){return c.name===r.name});o?e.push(o):e.push({name:r.name,value:"".concat(r.value,"-").concat(t.type,"-").concat(t.index)})})):e=this.settings.attributes.map(function(r){return{name:r.name,value:"".concat(r.value,"-").concat(t.type,"-").concat(t.index)}}),this.settings.componentSettings.attributes=e);var n,i=$(this.element),a=Bi[this.type];a&&((n=i.data(a))?n.updated(this.settings.componentSettings):i[a](this.settings.componentSettings)),this.type==="actionbutton"&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var e=this.componentAPI;if(e&&this.toolbarAPI){var t=e.menu;t&&t.length||(t=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var n=this.toolbarAPI.toPopupmenuData();(function a(r,o){r.menuId&&delete r.menuId;var c=o?"submenu":"menu";Array.isArray(r[c])&&r[c].forEach(function(u){a(u,!0)})})(n);var i=$(e.renderItem(n));this.predefinedItems=i,this.linkToolbarItems(n),t.prepend(this.predefinedItems),e.updated({menu:t,predefined:i}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if(this.type==="actionbutton"){var e=this.componentAPI;if(e&&this.toolbarAPI&&!e.isOpen){e.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var t=!0;this.toolbarAPI.items.forEach(function(i){if(i.actionButtonLink){var a=i.toPopupmenuData();a.overflowed=i.overflowed,a.id&&delete a.id,e.refreshMenuItem(i.actionButtonLink,a,n)}}),e.refreshHasIcons(),this.hasNoOverflowedItems=t}}function n(i,a){if(!a.isSubmenuItem){if(a.overflowed===!0)return i.classList.add("is-overflowed"),a.visible&&i.classList.remove("hidden"),void(t=!1);i.classList.remove("is-overflowed"),i.classList.add("hidden")}}},unlinkToolbarItems:function(){function e(t){var n=$($(t).data("original-menu-element"));if(n.removeData("action-button-link"),$(t).removeData("original-menu-element"),n.hasClass("submenu"))for(var i=t.querySelector(".popupmenu").children,a=0;a<i.length;a++)e(i[a])}this.type==="actionbutton"&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each(function(t,n){var i=$(n).data("originalButton"),a=$(i).data("toolbarflexitem");if(a&&(a.actionButtonLink=null,$(n).removeData("original-button"),a.type==="menubutton"))for(var r=n.querySelector(".popupmenu").children,o=0;o<r.length;o++)e(r[o])})},linkToolbarItems:function(e){function t(n,i){var a=n.elementLink;$(a).data("action-button-link",i),$(i).data("original-menu-element",a);var r=n.submenu;if(r&&r.length)for(var o=i.querySelector(".popupmenu").children,c=0;c<o.length;c++)t(r[c],o[c])}this.type==="actionbutton"&&e&&(Array.isArray(e)||(e=e.menu),this.predefinedItems.each(function(n,i){var a=e[n].itemLink;a.actionButtonLink=i,$(i).data("original-button",a.element);var r=e[n].submenu;if(r&&r.length)for(var o=i.querySelector(".popupmenu").children,c=0;c<o.length;c++)t(r[c],o[c])}))},toPopupmenuData:function(){if(this.type!=="searchfield"&&this.type!=="toolbarsearchfield"&&this.type!=="actionbutton"){var e={itemLink:this,disabled:this.disabled,visible:this.visible},t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),this.type==="menubutton"){var n=this.componentAPI.menu;if(n.length){var i=this.componentAPI.toData({noMenuWrap:!0}),a=this.componentAPI.element[0].id;a&&(e.id="".concat(this.toolbarAPI.uniqueId,"-").concat(a)),e.submenu=function r(o,c){var u=o.querySelectorAll(":scope > li:not(.heading)");return c.forEach(function(p,m){if(p.elementLink=u[m],p.submenu){var v=u[m].querySelector(".popupmenu");p.submenu=r(v,p.submenu)}}),c}(n[0],i)}else e.submenu=[]}return e}},toData:function(){var e={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(e.readOnly=this.readOnly),this.actionButtonLink&&(e.actionButtonLink=this.actionButtonLink),this.componentAPI&&(e.componentAPI=this.componentAPI);var t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),this.type==="actionbutton"&&(e.predefinedItems=this.predefinedItems),this.type!=="menubutton"&&this.type!=="actionbutton"||(e.submenu=this.componentAPI.toData({noMenuWrap:!0})),e},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){this.type==="actionbutton"&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat(ha)).off("beforeopen.".concat(ha)).off("focus.".concat(ha)),$("body").off("resize.".concat(ha)),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered},destroy:function(){var e=$(this.element).data("popupmenu");e&&e.destroy&&e.destroy();var t=$(this.element).data("searchfield");t&&t.destroy&&t.destroy(),this.teardown()}},$.fn.toolbarflexitem=function(e){return this.each(function(){var t=$.data(this,ha);if(t)t.updated(e);else{var n=(t=$.data(this,ha,new $r(this,e))).destroy;t.destroy=function(){typeof n=="function"&&n.call(this),this.element&&$.removeData(this.element,ha),this.element=void 0}}})};var ya="toolbar-flex",Dr={allowTabs:!1,attributes:null,beforeMoreMenuOpen:null,moreMenuSettings:{}};function Ns(e,t){this.element=e,this.settings=N.mergeSettings(this.element,t,Dr),this.init()}Ns.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var e=this,t=this;if(this.uniqueId=N.uniqueId(this.element),this.items=this.getElements().map(function(p){var m={};return $(p).hasClass("btn-actions")&&(m=e.settings.moreMenuSettings||m,e.settings.beforeMoreMenuOpen&&(m.beforeOpen=e.settings.beforeMoreMenuOpen)),$(p).toolbarflexitem({toolbarAPI:e,componentSettings:m,allowTabs:e.settings.allowTabs,attributes:e.settings.attributes}),$(p).data("toolbarflexitem")}),this.items){if(this.sections=N.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.sections.forEach(function(p){p.classList.contains("buttonset")&&$(p).buttonset({detectHTMLButtons:!0})}),this.jQueryEl=$(this.element),this.jQueryEl.hasClass("contextual-toolbar")){var n;if(this.more=this.jQueryEl.find(".btn-actions"),this.more.length===0&&!this.jQueryEl.hasClass("no-actions-button")){var i=this.jQueryEl.find(".more");i.length||(i=$('<div class="toolbar-section more"></div>').appendTo(this.jQueryEl)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(L.translate("MoreActions"),"</span>")).attr("title",L.translate("More")).appendTo(i)}this.buttonset=$(".toolbar-section.buttonset"),this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.toolBarItems=this.buttonsetItems.add(this.more);var a=this.more.data("popupmenu"),r=this.more.attr("aria-controls");a?this.moreMenu=a.menu:(this.moreMenu=$("#".concat(r)),this.moreMenu.length&&r!==void 0||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.uniqueId,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var o,c=[];this.toolBarItems.not(this.more).not(".ignore-in-menu").filter(function(){return $(this).parent(".buttonset, .inline").length}).each(function(){c.push(t.buildMoreActionsMenuItem($(this)))}),c.reverse(),$.each(c,function(p,m){m.text()!==""&&m.prependTo(t.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(o=this.settings.moreMenuSettings.attributes),o&&o.length||!Array.isArray(this.settings.attributes)||(o=this.settings.attributes.map(function(p){var m="".concat(p.value,"-actionbutton");return{name:p.name,value:m}})),(n=o)!==null&&n!==void 0&&n?.length||(o=null);var u=N.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:o},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});a?this.more.on("beforeopen.toolbar-flex",function(){t.refreshMoreActionsMenu(t.moreMenu)}).triggerHandler("updated",[u]):this.more.popupmenu(u).on("beforeopen.toolbar-flex",function(){t.refreshMoreActionsMenu(t.moreMenu)})}this.settings.allowTabs||(this.items.forEach(function(p){p.focused&&(e.focusedItem===void 0?e.focusedItem=p:p.focused=!1)}),this.focusedItem||(this.focusedItem=this.items[0]),this.focusedItem&&(this.focusedItem.focused=!0)),this.render(),this.handleEvents()}},buildMoreActionsMenuItem:function(e){var t,n;if(e.data("skipit")===!0)return e.data("skipit",void 0),n;var i=e.data("action-button-link");i&&i.length?n=i.parent():(n=$("<li></li>"),i=$('<a href="#"></a>').appendTo(n),e.data("action-button-link",i),i.data("original-button",e)),e.hasClass("hidden")&&n.addClass("hidden"),e.is(":disabled")?(n.addClass("is-disabled"),i.prop("disabled",!0)):(n.removeClass("is-disabled"),i.prop("disabled",!1)),i.text(this.getItemText(e));var a=$.getBaseURL("#icon-dropdown"),r=e.children(".icon").filter(function(){var w=$(this).getIconName();return w&&w!==a&&w.indexOf("dropdown")===-1});r&&r.length&&(i.html("<span>".concat(i.text(),"</span>")),r.clone().detach().prependTo(i));var o=n.find("b");o.length&&(this.moreMenu.addClass("has-icons"),o.detach().prependTo(n));var c=(t=this.toolbarItems)===null||t===void 0||t==null?void 0:t.not(this.more).not(".searchfield").index(e);if(e.is(".btn-menu")){var u,p;this.settings.attributes&&this.settings.attributes.length&&(p=this.settings.attributes.map(function(w){return{name:w.name,value:"".concat(w.value,"-menubutton-").concat(c)}})),(u=p)!==null&&u!==void 0&&u?.length||(p=null),e.data("popupmenu")?i.children(".icon.arrow").length||i.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu({attributes:p});var m=e.data("popupmenu").menu,v=m.clone();(function w(C,A,S){var M,I=C.children("li"),z=A.attr("id");A.children("li").each(function(V,U){var G=$(U),J=I.eq(V),te=G.children("a"),de=J.children("a"),H=G.attr("id"),he=te.attr("id");H&&G.removeAttr("id").attr("data-original-menu-item",H),he&&te.removeAttr("id").attr("data-original-menu-anchor",he),de.data("action-button-link",te),te.data("original-button",de);var ie=J.children(".wrapper").children(".popupmenu"),me=G.children(".wrapper").children(".popupmenu");ie.length&&me.length&&w(ie,me,G)}),A.removeAttr("id").attr("data-original-menu",z),S.addClass("submenu"),S.is(n)&&((M=S.children(".wrapper"))&&M.length||(M=$('<div class="wrapper"></div>')),M.html(A),S.append(M))})(m,v,n)}return e.is("[data-popdown]")&&e.popdown(),n},getItemText:function(e){if(!e)return"";var t=e.find("span").first(),n=e.attr("title"),i=e.data("tooltip"),a=i&&typeof i.content=="string"?i.content:void 0;return n!==""&&n!==void 0?n:a||(t.length?t.text():e.text())},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each(function(){var n,i=$(this),a=i.parent(),r=i.data("originalButton"),o=t.getItemText(r);r&&(i.find("span").length?i.find("span").text(o.trim()):i.text(o.trim()),r.parent().is(".is-disabled")||r.is(":disabled")?(a.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(a.removeClass("is-disabled"),i.prop("disabled",!1)),r.is("a")&&(r.parent("li").is(".is-checked")?a.addClass("is-checked"):a.removeClass("is-checked")),r.is(".btn-menu")&&(n=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(n)))})},renderButtonSet:function(){var e,t,n,i;if(this.jQueryEl.hasClass("contextual-toolbar")){var a=((e=this.toolBarItems)===null||e===void 0||e==null?void 0:e.not(".btn-actions").length)>5,r=a?(t=this.toolBarItems)===null||t===void 0||t==null?void 0:t.not(".btn-actions").slice(0,5):(n=this.toolBarItems)===null||n===void 0||n==null?void 0:n.not(".btn-actions");r.removeClass("is-overflowed");for(var o,c,u,p,m,v=a?(i=this.toolBarItems)===null||i===void 0||i==null?void 0:i.not(".btn-actions").slice(5):$(),w=$(),C=0;C<r.length;C++)o=r[C],c=void 0,u=void 0,p=void 0,m=void 0,c=L.isRTL(),u=o.getBoundingClientRect(),p=o.parentElement.getBoundingClientRect(),m=c?u.left<=p.left:u.right>=p.right||u.right,u.bottom>=p.bottom||m===!0?v.push(r[C]):w.push(r[C]);v.addClass("is-overflowed");for(var A=0;A<w.length;A++){var S=$(w[A]).data("action-button-link");S&&S.parent()[0].classList.add("hidden")}for(var M=0;M<v.length;M++){var I=$(v[M]).data("action-button-link");I&&I.parent()[0].classList.remove("hidden")}v.length>0?(this.more.parent().css("display","inline-block"),this.more.parent().siblings(".buttonset").css("width","calc(55% - 41px")):(this.more.parent().css("display","none"),this.more.parent().siblings(".buttonset").css("width","calc(55% - 1px"))}},render:function(){var e=this,t=this;this.element.setAttribute("role","toolbar"),Array.isArray(this.settings.attributes)&&N.addAttributes($(this.element),this,this.settings.attributes),this.items.forEach(function(n){var i=$(n.element);if(i.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(i=i.children(".searchfield")),!i.data("searchfield")&&i.is(".searchfield")){var a=$.extend({},N.parseSettings(i[0]));e.settings.collapsibleFilter&&(a.collapsible=e.settings.collapsibleFilter),i.searchfield(a),N.addAttributes(i,t,t.settings.attributes,"searchfield")}n.render()})},handleEvents:function(){var e=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat(ya),function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a]}),$(this.element).on("collapsed-responsive.".concat(ya),function(t,n){t.stopPropagation(),e.navigate(n,null,!0)}),$(this.element).hasClass("contextual-toolbar")&&($(this.element).on("recalculate-buttonset.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}),this.more.on("beforeopen.buttonset.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}),$("body").on("resize.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}))},handleKeydown:function(e){var t=e.target;$(t).data("toolbarflexitem")&&this.handleItemKeydown(e)},handleItemKeydown:function(e){var t=L.isRTL(),n=e.key,i=this.getItemFromElement(e.target);function a(){e.preventDefault()}if(n!=="Enter")if(n!==" "){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(n)>-1)return i.type==="searchfield"&&(n==="ArrowLeft"||n==="Left")?void 0:(this.navigate(t?1:-1,void 0,!0),void a());if(["ArrowRight","Right","ArrowDown","Down"].indexOf(n)>-1){if(i.type==="searchfield"&&(n==="ArrowRight"||n==="Right"))return;this.navigate(t?-1:1,void 0,!0),a()}}else i.type==="hyperlink"&&this.select(e.target);else this.clickByEnterKey=!0},handleKeyup:function(e){this.clearClickByEnter(e)},handleClick:function(e){var t=e.target;$(t).data("toolbarflexitem")&&this.handleItemClick(e),this.clearClickByEnter()},handleItemClick:function(e){var t=this.getItemFromElement(e.target);this.select(t),this.focusedItem=t},clearClickByEnter:function(e){this.clickByEnterKey&&(this.type!=="menubutton"&&this.type!=="actionbutton"||e.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var e=[],t=[];return dr.forEach(function(n){t.push(n.selector)}),t=t.join(", "),N.getArrayFromList(this.element.querySelectorAll(t)).forEach(function(n){var i=!1;dr.forEach(function(a){!i&&$(n).is(a.selector)&&(typeof a.filter!="function"||a.filter(n))&&(i=!0,e.push(n))})}),e},getItemFromElement:function(e){if(e instanceof $r||e.isToolbarFlexItem)return e;for(var t,n=0;n<this.items.length;n++)this.items[n].element.innerHTML===e.innerHTML&&(t=this.items[n]);if(!t)throw new Error("No Toolbar Item instance available for element ".concat(e,"."));return t},get buttonsets(){return this.sections.filter(function(e){return e.classList.contains("buttonset")})},get buttonsetAPIs(){return this.buttonsets.map(function(e){return $(e).data("buttonset")})},get searchfieldAPI(){for(var e=0;e<this.items.length;e++)if(this.items[e].type==="searchfield")return this.items[e].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var e=0;e<this.items.length;e++)if(this.items[e].focused===!0)return this.items[e]},set focusedItem(e){if(this.items.length!==0){for(var t=0;t<this.items.length;t++)this.items[t].settings.allowTabs?this.items[t].focused=!0:this.items[t].focused=!1;e.focused=!0,this.trueFocusedItem=e}},get hasFocusableItems(){for(var e=0;e<this.items.length;e++)if(this.items[e].focusable===!0)return!0;return!1},get canManageFocus(){var e=document.activeElement;if(this.element.contains(e))return!0;for(var t=0;t<this.items.length;t++)if(this.items[t].type==="searchfield"&&this.items[t].componentAPI.isFocused)return!0;return e.tagName==="BODY"},get overflowedItems(){for(var e=[],t=0;t<this.items.length;t++)this.items[t].overflowed===!0&&e.push(this.items[t]);return e},navigate:function(e,t,n){if(this.hasFocusableItems!==!1){var i=0+e;for(t==null&&(t=this.items.indexOf(this.focusedItem));e!==0;)e>0&&(t===this.items.length-1?t=0:t++,--e),e<0&&(t===0?t=this.items.length-1:--t,e++);var a=this.items[t];a.focusable!==!1?this.focusedItem===a&&this.items.length===1||(this.focusedItem=a,n&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(i>0?1:-1,t,n)}},select:function(e){var t=this.getItemFromElement(e);switch(t.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;t.selected=!0;break;default:t.selected=!0}},toPopupmenuData:function(){var e={noMenuWrap:!0};return e.menu=this.items.filter(function(t){return t.type!=="actionbutton"&&t.type!=="searchfield"}).map(function(t){return function(n){var i=n.toPopupmenuData();return i&&(i.icon&&(e.hasIcons=!0),i.selectable&&(e.selectable=i.selectable)),i}(t)}),e},toData:function(){var e={};return e.items=this.items.map(function(t){return t.toData()}),e},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,e!==!0?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(e){if(!e)return!1;var t;if(e instanceof HTMLElement||e instanceof $){if(!(t=$(e).data("toolbarflexitem")))return!1;e=t}return!(this.items.indexOf(e)<0)&&e.overflowed},updated:function(e){at(e)==="object"&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e,t,n;this.settings.allowTabs||((e=this.element)===null||e===void 0||e==null||e.removeEventListener("keydown",this.keydownListener),(t=this.element)===null||t===void 0||t==null||t.removeEventListener("keyup",this.keyupListener),(n=this.element)===null||n===void 0||n==null||n.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat(ya)),$(this.element).off("collapsed-responsive.".concat(ya)),$(this.element).hasClass("contextual-toolbar")&&($(this.element).off("recalculate-buttonset.toolbar-flex-".concat(this.uniqueId)),this.more.off("beforeopen.buttonset.toolbar-flex-".concat(this.uniqueId)),$("body").off("resize.toolbar-flex-".concat(this.uniqueId))),this.items.forEach(function(i){i.teardown()}),delete this.items,delete this.sections,delete this.trueFocusedItem},destroy:function(){this.items.forEach(function(e){e.destroy()}),this.teardown()}},$.fn.toolbarflex=function(e){return this.each(function(){var t=$.data(this,ya);if(t)t.updated(e);else{var n=(t=$.data(this,ya,new Ns(this,e))).destroy;t.destroy=function(){typeof n=="function"&&n.call(this),this.element&&$.removeData(this.element,ya),this.element=void 0}}})};var Ja="calendartoolbar",ho={month:new Date().getMonth(),year:new Date().getFullYear(),locale:null,showToday:!0,showNextPrevious:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1,inPage:!1,inPageTitleAsButton:!0,hitbox:!1};function vs(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ho),this.init()}vs.prototype={init:function(){this.setLocale().build().handleEvents().handleResize()},build:function(){var e=this,t=this.settings,n=function(M){return L.translate(M,{locale:e.locale.name,language:e.language})};this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false");var i={text:n("Today"),class:"today"},a=t.inPage?" is-ripple":"";t.inPage=ot.toBoolean(t.inPage),t.inPageTitleAsButton=ot.toBoolean(t.inPageTitleAsButton),t.inPage&&(this.element.addClass("is-inpage"),t.showToday||(a="",i.text=n("Apply"),i.class="apply is-apply hidden")),i.class+=" hyperlink".concat(a).concat(t.disableToday?" is-disabled":"");var r=t.showToday||t.inPage?'<a class="'.concat(i.class,'" href="#">').concat(i.text,"</a>"):"",o=t.hitbox?'data-options="{hitbox: true}"':"",c=t.showNextPrevious?"":" no-next-previous",u=t.showNextPrevious?'<button type="button" class="btn-icon prev" '.concat(o,`>
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-caret-left"></use>
        </svg>
        <span>`).concat(n("PreviousMonth"),`</span>
      </button>
      <button type="button" class="btn-icon next" `).concat(o,`>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-caret-right"></use>
          </svg>
          <span>`).concat(n("NextMonth"),`</span>
      </button>`):"",p=t.showNextPrevious?`<button type="button" class="btn-icon prev">
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-caret-left"></use>
        </svg>
        <span>`.concat(n("PreviousMonth"),`</span>
      </button>
      <button type="button" class="btn-icon next">
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-caret-right"></use>
          </svg>
          <span>`).concat(n("NextMonth"),`</span>
      </button>`):"";if(t.isAlternate||t.inPage){t.isAlternate&&this.element[0].classList.add("is-alternate");var m=`
        <button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">
          <span class="month">november</span>
          <span class="year">2019</span>
          <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-dropdown"></use>
          </svg>
          <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-dropdown"></use>
          </svg>
        </button>`,v=t.isMenuButton?m:'<span class="month">november</span><span class="year">2015</span>',w=`
        <div class="toolbar-section buttonset l-align-`.concat(this.isRTL?"left":"right").concat(c,`">
          `).concat(r,`
          `).concat(p,`
        </div>`),C="";if(t.inPage){var A=`
          <button type="button" class="btn btn-cal-month-year" id="btn-cal-month-year">
            `.concat($.createIcon("calendar"),`
            <span class="month">november</span>
            <span class="year">2019</span>
          </button>`),S=`
          <button class="btn-icon btn-inpage-cal" type="button" id="btn-inpage-cal">
            <span class="audible"></span>
            `.concat($.createIcon("calendar"),`
          </button>`);C=t.inPageTitleAsButton?t.isMenuButton?"".concat(S," ").concat(m):A:"".concat(S,' <span class="month">november</span><span class="year">2015</span>')}this.element[0].innerHTML=`
        <div class="toolbar-section">
          `.concat(t.inPage?C:v,`
        </div>
        `).concat(w)}else this.element[0].innerHTML=`
        <div class="toolbar-section`.concat(c,`">
          `).concat(u,`
          <span class="monthview-datepicker">
            <span class="hidden month" data-month="9">9</span>
            <span class="hidden year">2019</span>
            <span class="audible">`).concat(n("SelectDay"),`</span>
            <span tabindex="0" aria-label="`).concat(n("Today"),`" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>
          </span>
          `).concat(r,`
        </div>
        <div class="toolbar-section buttonset l-align-right">
          `).concat(t.showViewChanger?'<label for="'.concat(t.viewChangerValue,'-calendar-view-changer" class="label audible">').concat(n("ChangeView"),`</label>
            <select id="`).concat(t.viewChangerValue,'-calendar-view-changer" name="').concat(t.viewChangerValue,`-calendar-view-changer" class="dropdown">
              <option value="month"`).concat(t.viewChangerValue==="month"?" selected":"",">").concat(n("Month"),`</option>
              <option value="week"`).concat(t.viewChangerValue==="week"?" selected":"",">").concat(n("Week"),`</option>
              <option value="day" `).concat(t.viewChangerValue==="day"?" selected":"",">").concat(n("Day"),`</option>
            </select>
          </div>`):"",`
        </div>
      `);return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:L.calendar(this.locale.name,t.language,t.calendarName).dateFormat.year,locale:t.locale,language:t.language,onOpenCalendar:t.onOpenCalendar,isMonthPicker:t.isMonthPicker,showToday:t.showToday,hitbox:t.hitbox}),t.showViewChanger&&(this.viewChanger=this.element.find("#".concat(t.viewChangerValue,"-calendar-view-changer")).dropdown()),this.todayLink=this.element.find(".hyperlink.today, .hyperlink.is-apply"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(this.isIslamic?[t.year,t.month,1]:new Date(t.year,t.month,1)),N.addAttributes(this.element.find(".next"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-next")),N.addAttributes(this.element.find(".prev"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-prev")),N.addAttributes(this.element.find(".today"),this,t.attributes,"".concat(t.viewChangerValue,"-view-today")),N.addAttributes(this.element.find("#monthview-datepicker-field + .trigger"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker-trigger"),!0),N.addAttributes(this.element.find("#monthview-datepicker-field"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker"),!0),N.addAttributes($('.monthview-header #month-calendar-view-changer [value="month"]'),this,t.attributes,"month-view-changer-month"),N.addAttributes($('.monthview-header #month-calendar-view-changer [value="week"]'),this,t.attributes,"month-view-changer-week"),N.addAttributes($('.monthview-header #month-calendar-view-changer [value="day"]'),this,t.attributes,"month-view-changer-day"),N.addAttributes($(".monthview-header #month-calendar-view-changer"),this,t.attributes,"month-view-changer"),N.addAttributes($('.week-view-header #week-calendar-view-changer [value="month"]'),this,t.attributes,"week-view-changer-month"),N.addAttributes($('.week-view-header #week-calendar-view-changer [value="week"]'),this,t.attributes,"week-view-changer-week"),N.addAttributes($('.week-view-header #week-calendar-view-changer [value="day"]'),this,t.attributes,"week-view-changer-day"),N.addAttributes($(".week-view-header #week-calendar-view-changer"),this,t.attributes,"week-view-changer"),this},setInternalDate:function(e){L.isIslamic(this.locale.name)?(this.currentYear=e[0],this.currentMonth=e[1],this.currentDay=e[2],this.currentDateIslamic=e):(this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate(),this.currentDate=e),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=L.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var t=Yt.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):L.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(t);var n=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(n),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&this.currentCalendar.dateFormat.year.substr(1,1)==="y"){var i=L.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" "),a=i[0];i.length===3&&this.element.find("span.month").attr("data-month",this.currentMonth).text("".concat(i[1]," ").concat(i[2])),this.element.find("span.year").text("".concat(a," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=L.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic=this.currentCalendar.name==="islamic-umalqura",this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this},setLocale:function(){var e=this;return this.settings.language?(L.getLocale(this.settings.language),this.language=this.settings.language):this.language=L.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=L.currentLocale,this.setCurrentCalendar()):L.getLocale(this.settings.locale).done(function(t){e.locale=L.cultures[t],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar()}),this},setViewChangerValue:function(e){var t;this.settings.viewChangerValue=e,(t=this.viewChanger)===null||t===void 0||(t=t?.val(e))===null||t===void 0||t==null||t.trigger("updated")},handleEvents:function(){var e=this,t=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",function(){var n=$(this).data("datepicker");t.setInternalDate(n.isIslamic?n.currentDateIslamic:n.currentDate),t.element.trigger("change-date",{selectedDate:n.currentDate,isToday:!1})}),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",function(n){var i={selectedDate:e.currentDate,isToday:!0};!n.target.classList.contains("today")&&n.target.classList.contains("apply")&&(i.isToday=!1,i.isApply=!0),e.element.trigger("change-date",i),n.preventDefault()}),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-prev",{selectedDate:e.currentDate,isToday:!1})}),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-next",{selectedDate:e.currentDate,isToday:!1})}),this.settings.onChangeView&&this.viewChanger&&this.viewChanger.off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",function(n){e.settings.onChangeView({viewName:n.currentTarget.value,elem:n.currentTarget,api:e})}),this},resize:function(){if(this.viewChanger&&(Yt.isBelow("phablet")?(this.viewChanger.next().addClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").css({width:"".concat(Yt.isBelow("phone")?"60":"90","px")}),$(".today").css(Yt.isBelow("slim")?{display:"none"}:{})):(this.viewChanger.next().removeClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").removeAttr("style"),$(".today").removeAttr("style"))),this.monthPicker){var e=Yt.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):L.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(e)}},handleResize:function(){return this.resize(),$(window).on("resize",this.resize),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,ho)),this.teardown().init()},teardown:function(){return $(window).off("resize",this.resize),this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Ja)}};var se="monthview",ve=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],Ae={locale:null,language:null,month:new Date().getMonth(),year:new Date().getFullYear(),day:new Date().getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,inPage:!1,inPageTitleAsButton:!0,inPageToggleable:!0,inPageExpanded:!0,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[],hideDays:!1,showMonthYearPicker:!0,showWeekNumber:!1,yearsAhead:3,yearsBack:2,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},displayRange:{start:"",end:"",months:{showAbbr:!1}},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,showNextPrevious:!0,onChangeView:null,isMonthPicker:!1,hitbox:!1};function He(e,t){this.settings=N.mergeSettings(e,t,Ae),this.settings.legend&&this.settings.legend.length===0&&(this.settings.legend=ve),this.element=$(e),this.init()}He.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=L.getLocale(this.settings.language),n=L.getLocale(this.settings.locale);$.when(n,t).done(function(i,a){e.locale=L.cultures[i]||L.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.settings.displayRange.start&&e.settings.displayRange.end?e.buildRange():e.build()})},build:function(){var e=this;if(this.settings.showMonthYearPicker==="false"&&(this.settings.showMonthYearPicker=!1),this.settings.inPage=ot.toBoolean(this.settings.inPage),this.settings.inPage){var t="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(t),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.prevButton=""+`<button type="button" class="btn-icon prev">
        `.concat($.createIcon("caret-left"),`
        <span>`).concat(L.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),`</span>
      </button>`),this.nextButton=""+`<button type="button" class="btn-icon next">
        `.concat($.createIcon("caret-right"),`
        <span>`).concat(L.translate("NextMonth",{locale:this.locale.name,language:this.language}),`</span>
      </button>`),this.table=$('<table class="monthview-table" aria-label="'.concat(L.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$(`<thead>
        <tr>
          <th>SU</th>
          <th>MO</th>
          <th>TU</th>
          <th>WE</th>
          <th>TH</th>
          <th>FR</th>
          <th>SA</th>
        </tr>
      </thead>`).appendTo(this.table),this.days=$(`<tbody>
        <tr>
          <td class="alternate">26</td>
          <td class="alternate">27</td>
          <td class="alternate">28</td>
          <td class="alternate">29</td>
          <td class="alternate" >30</td>
          <td class="alternate">31</td>
          <td>1</td>
        </tr><tr>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
        </tr><tr>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
          <td>13</td>
          <td>14</td>
          <td>15</td>
        </tr><tr>
          <td>16</td>
          <td>17</td>
          <td>18</td>
          <td>19</td>
          <td class="is-today">20</td>
          <td>21</td>
          <td>22</td>
        </tr><tr>
          <td>23</td>
          <td>24</td>
          <td>25</td>
          <td>26</td>
          <td>27</td>
          <td>28</td>
          <td class="alternate">1</td>
        </tr><tr>
          <td class="alternate">2</td>
          <td class="alternate">3</td>
          <td class="alternate">4</td>
          <td class="alternate">5</td>
          <td class="alternate">6</td>
          <td class="alternate">7</td>
          <td class="alternate">8</td>
        </tr>
      </tbody>`).appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",`">
        <div class="expandable-pane">
          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>
        </div>
      </div>`)));var n="";this.settings.inPage&&this.settings.inPageToggleable&&(n=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var i=this.settings.inPage&&this.settings.inPageToggleable&&this.table!==""?n:this.table;this.settings.showWeekNumber&&(this.weekNumberTable=$('<table class="monthview-week-table" role="application"></table>'),this.weekHeader=$(""+`<thead>
          <tr>
            <th><span>`.concat(L.translate("WeekNumber"),`</span></th>
          </tr>
        </thead>`)).appendTo(this.weekNumberTable),this.weekNumber=$("<tbody></tbody>").appendTo(this.weekNumberTable),this.getWeekNumbers(this.settings.month,this.settings.year),this.monthAndWeekContainer=$('<div class="monthview-week-container"></div>'),this.monthAndWeekContainer.append(this.weekNumberTable),this.monthAndWeekContainer.append(i)),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),this.settings.headerStyle==="full"?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(L.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.settings.showWeekNumber?this.monthAndWeekContainer:i),this.settings.showWeekNumber&&this.calendar.addClass("has-monthview-week-table"),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend();var a=new Date,r={onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:this.settings.headerStyle==="full",isAlternate:this.settings.headerStyle!=="full",isMenuButton:!(this.settings.headerStyle==="full"&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton,hitbox:this.settings.hitbox};return typeof this.settings.disable.callback=="function"?$.when(this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate())).then(function(o){r.disableToday=o}):r.disableToday=this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate()),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new vs(this.calendarToolbarEl[0],r),this.element.find("td:not('.alternate')").attr("tabindex","-1"),this.handleEvents(),N.addAttributes(this.element,this,this.settings.attributes),this},buildRange:function(){var e=this,t=864e5,n=new Date(this.settings.displayRange.start),i=new Date(this.settings.displayRange.end),a=kn.isDaylightSavingTime(n)&&!kn.isDaylightSavingTime(i)?i:new Date(i.getTime()+t),r=kn.firstDayOfWeek(n,this.settings.firstDayOfWeek,!0),o=Math.ceil((a-r)/6048e5);if(this.settings.showMonthYearPicker=!1,this.settings.inPage=ot.toBoolean(this.settings.inPage),this.settings.inPage){var c="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(c),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.table=$('<table class="monthview-table" aria-label="'.concat(L.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$(`<thead>
        <tr>
          <th>SU</th>
          <th>MO</th>
          <th>TU</th>
          <th>WE</th>
          <th>TH</th>
          <th>FR</th>
          <th>SA</th>
        </tr>
      </thead>`).appendTo(this.table),this.day=`
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    `,this.days=$(""+`<tbody>
       `.concat(Array(o).fill(this.day).join(""),`
      </tbody>`)).appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",`">
        <div class="expandable-pane">
          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>
        </div>
      </div>`)));var u="";this.settings.inPage&&this.settings.inPageToggleable&&(u=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var p=this.settings.inPage&&this.settings.inPageToggleable&&this.table!==""?u:this.table;return this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),this.header.addClass("hidden"),this.showRange(this.settings.displayRange.start,this.settings.displayRange.end),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,p),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new vs(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:this.settings.headerStyle==="full",isAlternate:this.settings.headerStyle!=="full",isMenuButton:!(this.settings.headerStyle==="full"&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton}),this.handleEvents(),N.addAttributes(this.element,this,this.settings.attributes),this},setCurrentCalendar:function(){this.currentCalendar=L.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic=this.currentCalendar.name==="islamic-umalqura",this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this.conversions=this.currentCalendar.conversions},setMonthYearFromPane:function(){var e=parseInt(this.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),t=parseInt(this.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);isNaN(t)||isNaN(e)||this.showMonth(t,e),this.monthYearPane.data("expandablearea").close()},loadLegend:function(e){if(!(e===void 0||e.length<1)){this.settings.legend=e,this.addLegend();var t=this,n=this.currentMonth,i=this.currentYear;this.days.find("td").removeClass("is-colored"),e.forEach(function(a){if(a.dates&&a.dates.forEach(function(u){var p=new Date(u),m=p.getMonth(),v=p.getDate(),w=p.getFullYear(),C=t.days.find("td[data-key=".concat(ot.padDate(w,m,v),"]"));C.length&&t.setLegendColor(C,w,m,v)}),a.dayOfWeek){var r=new Date(i,n+1,0),o=r.getDate(),c=r.getDay();a.dayOfWeek.forEach(function(u){var p;c===u?(p=t.days.find("td[data-key=".concat(ot.padDate(i,n,o),"]")),t.setLegendColor(p,i,n,o)):c>u&&(p=t.days.find("td[data-key=".concat(ot.padDate(i,n,o-(c-u)),"]")),t.setLegendColor(p,i,n,o-(c-u)));for(var m=o-(c+1);m-(6-u)>0;m-=7)p=t.days.find("td[data-key=".concat(ot.padDate(i,n,m-(6-u)),"]")),t.setLegendColor(p,i,n,m-(6-u))})}})}},getWeekCount:function(e,t){var n=new Date(t,e-1,1),i=new Date(t,e,0),a=n.getDay()+i.getDate();return Math.ceil(a/7)},getWeekNumbers:function(e,t){this.weekNumber.empty();for(var n="",i=this.getWeekCount(e+1,t),a=new Date(t,e,1),r=new Date(a.getFullYear(),0,1),o=Math.ceil(((a.getTime()-r.getTime())/864e5+r.getDay()+1)/7),c=0;c<i;c++)n+="<tr><td><span>".concat(o+c,"</span></td></tr>");this.weekNumber.append(n)},showMonth:function(e,t){var n=this;this.element.trigger("beforemonthrendered");var i,a=this,r=this.settings,o=new Date;if(o.setHours(0),o.setMinutes(0),o.setSeconds(0),i=this.isIslamic?r.activeDate||L.gregorianToUmalqura(o):r.activeDate&&r.activeDate.getDate()?r.activeDate:o,this.setCurrentCalendar(),this.isIslamic)if(r.activeDateIslamic)i=r.activeDateIslamic;else{var c=new Date(t,e,this.currentDay||this.settings.day),u=L.gregorianToUmalqura(c);this.todayDateIslamic=L.gregorianToUmalqura(o),r.activeDateIslamic=[],r.activeDateIslamic[0]=u[0],r.activeDateIslamic[1]=u[1],r.activeDateIslamic[2]=u[2],t=u[0],e=u[1],i=u,this.currentDay=u[2]}t.toString().length<4&&(t=new Date().getFullYear()),e===12&&(t++,e=0,this.currentMonth=e,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),e<0&&(t--,e=11,this.currentMonth=e,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=L.calendar(this.locale.name,this.language,this.settings.calendarName));var p=this.currentCalendar.days.narrow;p=p||this.currentCalendar.days.abbreviated,r.isPopup||r.inPage||(p=this.currentCalendar.days.abbreviated);var m=this.currentCalendar.months.wide[e];this.currentMonth=e,this.currentYear=t,this.settings.showWeekNumber&&this.getWeekNumbers(this.currentMonth,this.currentYear);var v=this.currentCalendar.firstDayofWeek||0;if(r.firstDayOfWeek&&(v=r.firstDayOfWeek),this.dayNames.find("th").each(function(H){$(this).text(p[(H+v)%7])}),this.yearFirst=this.currentCalendar.dateFormat.year&&this.currentCalendar.dateFormat.year.substr(1,1)==="y",this.header.find(".month").attr("data-month",e).text("".concat(_e.stripTags(m)," ")),this.header.find(".year").text(" ".concat(t)),this.yearFirst&&!this.isIslamic&&!this.isRTL){i.setFullYear(t);var w=L.formatDate(i,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(w," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}r.headerStyle==="full"&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,e,1]:new Date(t,e,1)),this.appendMonthYearPicker(e,t);var C,A,S,M=(this.firstDayOfMonth(t,e)-v+7)%7,I=this.daysInMonth(t,e+(this.isIslamic?1:0)),z=this.daysInMonth(t,e+(this.isIslamic?0:1)),V=1,U=1,G=!1,J=function(H,he){G=he,H.addClass("is-selected".concat(r.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each(function(H){var he=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),ie=r.inPage?" is-ripple":"";if(he.removeAttr("aria-selected"),he.removeAttr("tabindex"),H<M&&(S=I-M+1+H,A=e===0?11:e-1,C=e===0?t-1:t,a.setDisabled(he,C,A,S),a.setLegendColor(he,C,A,S),a.dayMap.push({key:ot.padDate(C,A,S),elem:he}),he.addClass("alternate prev-month").html('<span class="day-container'.concat(ie,'"><span aria-hidden="true" class="day-text">').concat(_e.stripTags(S),"</span></span>")),he.attr("data-key",ot.padDate(C,A,S))),H>=M&&U<=z){if(a.dayMap.push({key:ot.padDate(t,e,U),elem:he}),he.html('<span class="day-container'.concat(ie,'"><span aria-hidden="true" class="day-text">').concat(_e.stripTags(U),"</span></span>")),he.attr("data-key",ot.padDate(t,e,U)),a.isIslamic)U===i[2]&&J(he,!0);else{var me=i.getHours(),ke=i.getMinutes(),De=a.isSeconds?i.getSeconds():0,Me=function(qe){return qe?qe.setHours(me,ke,De,0):0},Ve=Me(new Date(t,e,U)),Ke=a.currentDate||i;r.day&&!r.activeDate||Ve!==Me(Ke)||J(he,!0)}U===a.todayDay&&a.currentMonth===a.todayMonth&&a.currentYear===a.todayYear&&he.addClass("is-today"),he.attr("aria-label",L.formatDate(new Date(a.currentYear,a.currentMonth,U),{date:"full",locale:a.locale.name}));var ct=ot.padDate(a.currentYear,a.currentMonth,U);return he.attr("data-key",ct),a.setDisabled(he,t,e,U),a.setLegendColor(he,t,e,U),he.attr("role","link"),void U++}U>=z+1&&(S=V,A=e===11?0:e+1,C=e===11?t+1:t,a.dayMap.push({key:ot.padDate(C,A,S),elem:he}),a.setDisabled(he,C,A,S),a.setLegendColor(he,C,A,S),he.addClass("alternate next-month").html('<span class="day-container'.concat(ie,'"><span aria-hidden="true" class="day-text">').concat(V,"</span></span>")),he.attr("data-key",ot.padDate(C,A,S)),V++)}),!G&&!r.range.useRange){var te=a.dayMap.filter(function(H){return H.key===ot.padDate(t,e,n.settings.day)});te.length&&J(te[0].elem,!1)}var de=this.days.find("tr").eq(5);de.find("td.alternate").length===7?de.hide():de.show(),this.currentDate||(this.isIslamic?(this.currentDateIslamic=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=L.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay),this.focusDate=L.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):(this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay),this.focusDate=new Date(this.currentYear,this.currentMonth,this.currentDay))),this.setRangeSelection(),this.validatePrevNext(),r.range.useRange||this.element.find("td.is-selected").length!==0||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.setCurrentDay(),this.element.trigger("monthrendered",{year:t,month:e,elem:this.element,api:this}),this.element.trigger("aftermonthrendered")},showRange:function(e,t){var n,i=this,a=new Date,r=new Date(e),o=new Date(t),c=parseInt(r.getMonth(),10),u=parseInt(r.getFullYear(),10),p=kn.monthDiff(r,o),m=this.settings;if(m.disable.minDate||m.disable.MaxDate||(m.disable.minDate=kn.subtract(r,1,"days").toISOString(),m.disable.maxDate=kn.add(o,1,"days").toISOString()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),n=this.isIslamic?m.activeDate||L.gregorianToUmalqura(a):m.activeDate&&m.activeDate.getDate()?m.activeDate:a,this.setCurrentCalendar(),this.isIslamic)if(m.activeDateIslamic)n=m.activeDateIslamic;else{var v=new Date(u,c,this.currentDay||this.settings.day),w=L.gregorianToUmalqura(v);this.todayDateIslamic=L.gregorianToUmalqura(a),m.activeDateIslamic=[],m.activeDateIslamic[0]=w[0],m.activeDateIslamic[1]=w[1],m.activeDateIslamic[2]=w[2],u=w[0],c=w[1],n=w,this.currentDay=w[2]}u.toString().length<4&&(u=new Date().getFullYear()),this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=L.calendar(this.locale.name,this.language,this.settings.calendarName));var C=this.currentCalendar.days.narrow;C=C||this.currentCalendar.days.abbreviated,m.isPopup||m.inPage||(C=this.currentCalendar.days.abbreviated);var A=this.currentCalendar.firstDayofWeek||0;m.firstDayOfWeek&&(A=m.firstDayOfWeek),this.dayNames.find("th").each(function(me){$(this).text(C[(me+A)%7])});var S=kn.firstDayOfWeek(r,this.settings.firstDayOfWeek,!0),M=S.getDate(),I=!1,z=S.getMonth(),V=S.getFullYear(),U=z,G=V;p=kn.monthDiff(S,o);for(var J=new Map,te=0;te<=p;te++)(U=z+te)>11&&(G+=1,U%=12),J.set(U,this.daysInMonth(G,U+(this.isIslamic?0:1)));var de=function(me,ke){I=ke,me.addClass("is-selected".concat(m.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")},H=J.get(z),he=new Set(J.keys());if(this.dayMap=[],this.days.find("td").each(function(){var me,ke=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),De=m.inPage?" is-ripple":"";if(ke.removeAttr("aria-selected"),ke.removeAttr("tabindex"),i.isIslamic)M===n[2]&&de(ke,!0);else{var Me=n.getHours(),Ve=n.getMinutes(),Ke=i.isSeconds?n.getSeconds():0,ct=function(Xt){return Xt?Xt.setHours(Me,Ve,Ke,0):0};ct(new Date(V,z,M))===ct(i.currentDate||n)&&de(ke,!0)}if(M>H&&(++z>11&&(z=0,V++),H=J.get(z),M=1),M===i.todayDay&&z===i.todayMonth&&V===i.todayYear&&ke.addClass("is-today"),i.dayMap.push({key:ot.padDate(V,z,M),elem:ke}),ke.html('<span class="day-container'.concat(De,'"><span aria-hidden="true" class="day-text">').concat(_e.stripTags(M),"</span></span>")),ke.attr("data-key",ot.padDate(V,z,M)),i.isIslamic)M===n[2]&&de(ke,!0);else{var qe=n.getHours(),je=n.getMinutes(),lt=i.isSeconds?n.getSeconds():0,xt=function(Xt){return Xt?Xt.setHours(qe,je,lt,0):0};xt(new Date(G,U,M))===xt(i.currentDate||n)&&de(ke,!0)}M===i.todayDay&&z===i.todayMonth&&V===i.todayYear&&ke.addClass("is-today"),ke.attr("aria-label",L.formatDate(new Date(V,z,M),{date:"full",locale:i.locale.name}));var sn=ot.padDate(V,z,M);ke.attr("data-key",sn),i.setDisabled(ke,V,z,M),i.setLegendColor(ke,V,z,M),i.setMonthLabel(ke,V,z,M,he,(me=m.displayRange.months)===null||me===void 0||me==null?void 0:me.showAbbr),ke.attr("role","link"),M++}),!I){var ie=i.dayMap.filter(function(me){return me.key===ot.padDate(a.getFullYear(),a.getMonth(),a.getDate())});ie.length&&de(ie[0].elem,!1)}this.element.trigger("rangerendered",{year:u,month:c,elem:this.element,api:this})},getTime:function(e,t){if(this.isIslamic)return e[0]+"0".concat(e[1]).slice(-2)+"0".concat(e[2]).slice(-2);if(t){var n=new Date(e);return n.setHours(0,0,0),n.getTime()}return e.getTime()},setRangeSelection:function(){if(this.settings.range.useRange){var e={};e.date=new Date(this.currentYear,this.currentMonth,1),e.date.setDate(e.date.getDate()-(this.days.find(".prev-month:visible").length+1));var t=ot.padDate(e.date.year||e.date[0],e.date.month||e.date[1],e.date.day||e.date[2]);e.cell=this.days.find('[data-key="'.concat(t,'"]')),this.setRangeOnCell(!this.settings.range.second&&e.cell)}},appendMonthYearPicker:function(e,t){var n=this;if(this.settings.showMonthYearPicker){var i='<ul class="picklist is-month">',a=this.settings.inPage?' class="is-ripple"':"",r=this.currentCalendar.months.wide;i+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(L.translate("PreviousMonth"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var o=e<6?0:6,c=0;c<6;c++){var u=c+o,p=r[u];i+='<li class="picklist-item'.concat(u===e?" is-selected ":"",'"><a href="#" tabindex="').concat(u===e?"0":"-1",'" data-month="').concat(u,'"').concat(a,">").concat(p,"</a></li>")}i+=`<li class="picklist-item down">
        <a tabindex="0"`.concat(a,`>
          <span class="audible">`).concat(L.translate("NextMonth"),`</span>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-caret-down"></use>
          </svg>
        </a>
      </li></ul>`),this.monthYearPane.find(".picklist-section.is-month").empty().append(i);var m=[],v='<ul class="picklist is-year">';v+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(L.translate("PreviousYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var w=this.settings.yearsBack;w>=1;w--)m.push(parseInt(t,10)-w);m.push(t);for(var C=1;C<=this.settings.yearsAhead;C++)m.push(parseInt(t,10)+C);m.map(function(A){v+='<li class="picklist-item'.concat(t===A?" is-selected ":"",'"><a href="#" tabindex="').concat(t===A?"0":"-1",'" data-year="').concat(A,'"').concat(a,">").concat(A,"</a></li>")}),v+=`<li class="picklist-item down">
        <a tabindex="0"`.concat(a,`>
          <span class="audible">`).concat(L.translate("NextYear"),`</span>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-caret-down"></use>
          </svg>
        </a>
      </li></ul>`),this.monthYearPane.find(".picklist-section.is-year").empty().append(v),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst"),N.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-year-up"),N.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-year-down"),this.settings.inPage&&(N.addAttributes(this.monthYearPane.find(".btn-inpage-cal"),this,this.settings.attributes,"btn-inpage-cal"),N.addAttributes(this.monthYearPane.find(".btn-cal-month-year"),this,this.settings.attributes,"btn-cal-month-year"),N.addAttributes(this.monthYearPane.find(".btn-monthyear-pane"),this,this.settings.attributes,"btn-monthyear"),N.addAttributes(this.monthYearPane.find(".apply"),this,this.settings.attributes,"btn-apply"),N.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-month-up"),N.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-month-down")),this.monthYearPane.find(".is-year .picklist-item").not(".up, .down").each(function(){var A=$(this).find("a");N.addAttributes(A,n,n.settings.attributes,"btn-picklist-".concat(A.text().toLowerCase()))}),this.monthYearPane.find(".is-month .picklist-item").not(".up, .down").each(function(A){N.addAttributes($(this).find("a"),n,n.settings.attributes,"btn-picklist-".concat(A))})}},firstDayOfMonth:function(e,t){if(this.isIslamic){var n=L.umalquraToGregorian(e,t,1);return n===null?1:n.getDay()}return new Date(e,t,1).getDay()},daysInMonth:function(e,t){if(this.isIslamic){for(var n=this.conversions.yearInfo[this.islamicYearIndex(e)][0],i=0;i<=t;i++){if(i===t)return 29+(1&n);n>>=1}return 0}return new Date(e,t,0).getDate()},islamicYearIndex:function(e){var t=e-1318;return t<0||t>=this.conversions.yearInfo.length?0:t},setDisabled:function(e,t,n,i){var a=this.settings;function r(){e.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(e.removeClass("is-disabled").removeAttr("aria-disabled"),typeof a.disable.callback=="function")$.when(this.isDateDisabled(t,n,i)).then(function(c){c&&r()});else{var o=this.isDateDisabled(t,n,i);(o&&!a.disable.isEnable||!o&&a.disable.isEnable)&&r()}},setMonthLabel:function(e,t,n,i,a,r){var o=this.settings.inPage?' class="is-ripple"':"";if(a.has(n)){var c=e.text(),u=r?this.currentCalendar.months.abbreviated[n]:this.currentCalendar.months.wide[n];a.delete(n),e.html('<span class="day-container'.concat(o,'"><span aria-hidden="true" class="day-text month-label">').concat(u," ").concat(c,"</span></span>"))}},isDateDisabled:function(e,t,n){var i=this.settings;if(typeof i.disable.callback=="function"){var a=$.Deferred();return $.when(i.disable.callback(e,t,n)).then(function(M){a.resolve(M)}),a.promise()}var r=typeof i.disable.minDate=="string"?i.disable.minDate.replace(/-/g,"/"):i.disable.minDate,o=typeof i.disable.maxDate=="string"?i.disable.maxDate.replace(/-/g,"/"):i.disable.maxDate,c=new Date(r).setHours(0,0,0,0),u=new Date(o).setHours(0,0,0,0),p=this.isIslamic?L.umalquraToGregorian(e,t,n):new Date(e,t,n);if(!p)return!1;if(i.disable.dayOfWeek.indexOf(p.getDay())!==-1)return!0;if(i.legend){for(var m=0;m<i.legend.length;m++)if(i.legend[m].disableWeek&&i.legend[m].disableWeek.indexOf(p.getDay())!==-1)return!0}var v=p.getFullYear();if((p=p.setHours(0,0,0,0))<=c||p>=u)return!0;/string|number/.test(at(i.disable.years))&&(i.disable.years=[i.disable.years]);for(var w=0,C=i.disable.years.length;w<C;w++)if(v===Number(i.disable.years[w]))return!0;i.disable.dates.length&&typeof i.disable.dates=="string"&&(i.disable.dates=[i.disable.dates]);for(var A=0,S=i.disable.dates.length;A<S;A++)if(p===new Date(i.disable.dates[A]).setHours(0,0,0,0))return!0;return!1},getDateRange:function(e,t,n){var i=[],a=this.isIslamic?Nt(e):new Date(e);for(n=n!==void 0?n:this.settings.range.includeDisabled;this.getTime(t)>=this.getTime(a);)(n||!n&&!this.isDateDisabled(this.isIslamic?a[0]:a.getFullYear(),this.isIslamic?a[1]:a.getMonth(),this.isIslamic?a[2]:a.getDate()))&&(this.isIslamic?i.push(a):i.push(new Date(a))),this.isIslamic?a[2]+=1:a.setDate(a.getDate()+1);return i},setLegendColor:function(e,t,n,i){if(this.settings.showLegend&&e[0]){var a=this,r=this.settings.inPage?e.find(".day-text"):e;if(r[0]){var o=this.getLegendColor(t,n,i);if(r[0].style.backgroundColor="",r.off("mouseenter.legend mouseleave.legend"),o){var c;if(o.indexOf("#")===-1){var u=o.replace(/[0-9]/g,""),p=10*o.substr(o.length-2,2);o=ft.themeColors().palette[u][p].value}var m=ut.hexToRgba(o,.3),v=ut.hexToRgba(o,.7),w=(c=this.table[0])===null||c===void 0||c==null?void 0:c.querySelector("thead th");e.addClass("is-colored"),r[0].setAttribute("data-hex",o),a.settings.inPage?r[0].style.setProperty("--legendcolor",m):r[0].style.backgroundColor=m,r.on("mouseenter.legend",function(){var C=$(this),A=C.find("span")[0],S=C.find(".day-text")[0],M=window.getComputedStyle(w).getPropertyValue("color");this.style.backgroundColor=v,a.settings.inPage&&(this.style.color=M),A&&(A.style.backgroundColor="transparent"),S&&(S.style.backgroundColor="transparent")}).on("mouseleave.legend",function(){var C=$(this),A=C.find("span")[0],S=C.find(".day-text")[0];a.settings.inPage?(this.style.color="",this.style.backgroundColor=""):this.style.backgroundColor=m,A&&(A.style.backgroundColor=""),S&&(S.style.backgroundColor="")})}}}},getLegendColor:function(e,t,n){var i=this.settings;if(i.showLegend&&i.legend){for(var a=new Date(e,t,n),r=a.setHours(0,0,0,0),o=0;o<i.legend.length;o++){var c=i.legend[o];if(c.dayOfWeek&&c.dayOfWeek.indexOf(a.getDay())!==-1)return c.color;if(c.dates){for(var u=0;u<c.dates.length;u++)if(r===new Date(c.dates[u]).setHours(0,0,0,0))return c.color}}return""}},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.element.off("updated.".concat(se)).on("updated.".concat(se),function(){e.updated()}),this.header.off("click.monthview").on("click.monthview",".btn-icon.prev, .btn-icon.next",function(){var o=$(this).is(".next"),c={},u={month:t.currentMonth,year:t.currentYear};n.range.useRange?(o?c.date=new Date(u.year,u.month+1,t.element.find(".next-month:visible").length+1):(c.date=new Date(u.year,u.month,1),c.date.setDate(c.date.getDate()-(t.days.find(".prev-month:visible").length+1))),u.month+=o?1:-1):(t.currentMonth+=o?1:-1,t.currentDate.setMonth(t.currentMonth),t.currentYear=parseInt(t.element[0].querySelector("span.year").innerText,10),t.currentDate.setFullYear(t.currentYear),u.month=t.currentMonth,u.year=t.currentYear),t.showMonth(u.month,u.year),n.range.useRange&&(c.formatedDate=L.formatDate(c.date,{date:"full",locale:t.locale.name}),c.cell=t.days.find('[aria-label="'.concat(c.formatedDate,'"]')),t.setRangeOnCell(!n.range.second&&c.cell))}),n.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",function(){n.range.extra&&t.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",function(){n.range.extra&&t.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",function(){t.setRangeOnCell(this)})),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",function(o,c){c.isToday&&e.settings.isPopup||(c.isApply?e.setMonthYearFromPane():c.isToday?e.setToday():e.selectDay(c.selectedDate,!1,!0,"datepicker"))}),n.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",function(o){var c=o.currentTarget.getAttribute("data-key");e.lastClickedKey=c,o.currentTarget.classList.contains("is-disabled")||e.selectDay(c,!1,!0,"cell")}),n.inPage){var i=this.element.find(".monthview-inpage-calendar");i.expandablearea({animationSpeed:150,trigger:this.element.find(n.showMonthYearPicker?"#btn-inpage-cal":"#btn-cal-month-year")}),i.on("afterexpand",function(){e.element.trigger("monthviewexpanded")}),i.on("aftercollapse",function(){e.element.trigger("monthviewcollapsed")});var a=i.data("expandablearea");if(n.showMonthYearPicker){var r=this.element.find(".monthview-monthyear-pane");r.expandablearea({animationSpeed:150,trigger:this.element.find("#btn-monthyear-pane")}).on("beforeexpand",function(){var o=a&&!a.isExpanded();r.css("position",o?"static":"")})}this.element.off("click.monthview-ripple").on("click.monthview-ripple",".is-ripple",function(o){t.setRipple(this,o)})}return this.handleMonthYearPane().handleKeys(),this},setRipple:function(e,t){var n;if(e&&(n=e.classList)!==null&&n!==void 0&&n?.contains("is-ripple")){var i=t.touches?t.touches[0]:t,a=e.getBoundingClientRect(),r=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),o=i.clientX?i.clientX-a.left:e.offsetWidth/2,c=i.clientY?i.clientY-a.top:e.offsetHeight/2,u=e.style.cssText,p=e.getAttribute("data-hex"),m=ut.getContrastColor(p),v={ripple:ut.getLuminousColorShade(p,m==="white"?"0.3":"-0.3"),elem:ut.hexToRgba(p,.7)},w=p!==null?"--ripple-background: ".concat(v.ripple,"; background-color: ").concat(v.elem,"; "):"";e.style.cssText="".concat(w,"--s: 0; --o: 1"),e.offsetTop,e.style.cssText="".concat(w,"--t: 1; --o: 0; --d: ").concat(r,"; --x:").concat(o,"; --y:").concat(c,";"),$(e).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(C){var A;(C.propertyName||((A=C.originalEvent)===null||A===void 0||A==null?void 0:A.propertyName))==="transform"&&(e.style.cssText=u)})}},handleMonthYearPane:function(){var e=this,t=this.settings,n=t.inPage?' class="is-ripple"':"",i=function(u){var p=e.monthYearPane[0].querySelector(".picklist.is-month"),m=e.currentCalendar.months.wide,v=p.children,w=v.length-2,C=parseInt(v[u==="up"?1:w].querySelector("a").getAttribute("data-month"),10),A=$(p),S=A.find("li.is-selected"),M=S.index();S.removeClass("is-selected");var I=v[1],z=v[w],V=$('<li class="picklist-item"></li>');if(u==="up"){var U=C===0?11:C-1,G='<a href="#" tabindex="-1" data-month="'.concat(U,'"').concat(n,">").concat(m[U],"</a>");V.append(G),z.remove(),V.insertBefore(I)}else{var J=C===11?0:C+1,te='<a href="#" tabindex="-1" data-month="'.concat(J,'"').concat(n,">").concat(m[J],"</a>");V.append(te),I.remove(),V.insertAfter(z)}t.inPage||$(A.find("li.picklist-item").get(M)).addClass("is-selected").attr("tabindex","0")},a=function(u){var p=e.monthYearPane[0].querySelector(".picklist.is-year"),m=p.children,v=m.length-2,w=parseInt(m[u==="up"?1:v].querySelector("a").getAttribute("data-year"),10),C=$(p),A=C.find("li.is-selected"),S=A.index();A.removeClass("is-selected");var M=m[1],I=m[v],z=$('<li class="picklist-item"></li>');if(u==="up"){var V=w-1,U=$('<a href="#" tabindex="-1" data-year="'.concat(V,'"').concat(n,">").concat(V,"</a>"));N.addAttributes(U,e,t.attributes,"btn-picklist-".concat(V)),z.append(U),I.remove(),z.insertBefore(M)}else{var G=w+1,J=$('<a href="#" tabindex="-1" data-year="'.concat(G,'"').concat(n,">").concat(G,"</a>"));N.addAttributes(J,e,t.attributes,"btn-picklist-".concat(G)),z.append(J),M.remove(),z.insertAfter(I)}t.inPage||$(C.find("li.picklist-item").get(S)).addClass("is-selected").attr("tabindex","0")},r=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",function(u){return t.inPage&&u.target.tagName.toLowerCase()==="li"||(r=setInterval(function(){return u.currentTarget.classList.contains("up")&&a("up"),u.currentTarget.classList.contains("down")&&a("down"),u.stopImmediatePropagation(),u.stopPropagation(),!1},200)),!0}).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",function(){return clearInterval(r),!0});var o=function(u,p){var m,v=function(w){var C=e.monthYearPane[0].querySelector(".is-".concat(w," .is-selected a"));return!C&&t.inPage?e.monthYearPane[0].querySelector(".is-".concat(w," .picklist-item:last-child a")):C};m=t.inPage?{month:parseInt(v("month").getAttribute("data-month"),10),year:parseInt(v("year").getAttribute("data-year"),10)}:p==="is-month"?{month:parseInt(u.getAttribute("data-month"),10),year:parseInt(v("year").getAttribute("data-year"),10)}:{month:parseInt(v("month").getAttribute("data-month"),10),year:parseInt(u.getAttribute("data-year"),10)},t.range.useRange||(e.currentMonth=m.month,e.currentDate.setMonth(e.currentMonth),e.currentYear=m.year,e.currentDate.setFullYear(e.currentYear),m.month=e.currentMonth,m.year=e.currentYear),function(w,C){var A=e.monthYearPane[0].querySelector(".picklist.".concat(C," .is-selected"));ue.removeClass(A,"is-selected"),A&&A.querySelector("a").setAttribute("tabindex","-1"),ue.addClass(w.parentNode,"is-selected"),w.setAttribute("tabindex","0")}(u,p),e.element.hasClass("".concat(p,"only"))&&e.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",function(u){t.inPage&&u.target.tagName.toLowerCase()==="li"||(u.currentTarget.classList.contains("up")?i("up"):u.currentTarget.classList.contains("down")?i("down"):(o(u.target,"is-month"),u.preventDefault()))}),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",function(u){u.preventDefault()}),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",function(u){t.inPage&&u.target.tagName.toLowerCase()==="li"||(u.currentTarget.classList.contains("up")?a("up"):u.currentTarget.classList.contains("down")?a("down"):(o(u.target,"is-year"),u.preventDefault()))}),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",function(u){u.preventDefault()}),this.monthYearPane.on("expand.monthviewpane",function(){if(!t.hideDays){if(e.element.find(".btn-icon, td.is-selected").attr("disabled","true"),e.element.find("td.is-selected").removeAttr("tabindex"),t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").hide();var u=e.element.find(".hyperlink.today, .hyperlink.apply");u.hasClass("is-apply")?u.removeClass("hidden"):u.removeClass("today is-ripple").addClass("apply").text(L.translate("Apply",{locale:e.locale.name,language:e.language}))}else e.monthYearPane.find(".content").css("height",e.header.parent().height()-e.header.height()-55),e.element.find(".hyperlink.today").hide();e.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),e.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(L.translate("Cancel",{locale:e.locale.name,language:e.language}))}setTimeout(function(){e.monthYearPane.find(".is-month .is-selected a").focus(),e.monthYearPane.parent().hasClass("is-yearonly")&&e.monthYearPane.find(".is-year .is-selected a").focus()})}).on("collapse.monthviewpane",function(){if(!t.hideDays){if(t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").show();var u=e.element.find(".hyperlink.apply");u.hasClass("is-apply")?u.addClass("hidden"):u.removeClass("apply").addClass("today").text(L.translate("Today",{locale:e.locale.name,language:e.language}))}else e.element.find(".hyperlink.today").show();e.element.find(".btn-icon").removeAttr("disabled"),e.element.find("td.is-selected").attr("tabindex","0"),e.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),e.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(L.translate("Clear",{locale:e.locale.name,language:e.language}))}}).on("aftercollapse.monthviewpane",function(){e.element.find(".hyperlink.today").addClass("is-ripple")});var c=function(u,p){var m,v=u.currentTarget,w=u.currentTarget.parentNode,C=p==="prev"?w.previousSibling:w.nextSibling;C||(C=w.parentNode.children[p==="prev"?w.parentNode.children.length-1:0]);var A=C.querySelector("a");v.setAttribute("tabindex","-1"),(m=w.parentNode.querySelector(".is-selected"))===null||m===void 0||m==null||m.classList.remove("is-selected"),ue.addClass(C,"is-selected"),A.setAttribute("tabindex","0"),A.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",function(u){var p=u.currentTarget.parentNode.classList.contains("up"),m=u.currentTarget.parentNode.classList.contains("down"),v=u.currentTarget.parentNode.parentNode.classList.contains("is-year"),w=u.currentTarget.parentNode.parentNode.classList.contains("is-month"),C=!1;u.key==="ArrowUp"&&(v||w)?(c(u,"prev"),C=!0):u.key==="ArrowDown"&&(v||w)?(c(u,"next"),C=!0):u.key==="Enter"&&(p||m?(v?a(p?"up":"down"):w&&i(p?"up":"down"),C=!0):(v||w)&&(o(u.target,v?"is-year":"is-month"),C=!0)),C&&(u.preventDefault(),e.setRipple(u.currentTarget,u))}),this},selectDay:function(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.isIslamic&&typeof e!="string"&&(this.currentDateIslamic=L.gregorianToUmalqura(e),e=ot.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||typeof e=="string"||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var a=this.dayMap.filter(function(m){return m.key===e}),r=parseInt(e.substr(0,4),10),o=parseInt(e.substr(4,2),10)-1,c=parseInt(e.substr(6,2),10);if(this.isIslamic?(this.currentDateIslamic=e,this.currentDate=L.umalquraToGregorian(r,o,c)):this.currentDate=new Date(r,o,c),this.currentYear=r,this.currentMonth=o,this.currentDay=c,(a.length===0||a[0].elem.hasClass("alternate"))&&(this.showMonth(o,r),a=this.dayMap.filter(function(m){return m.key===e})),!a.length!==0){var u=a[0].elem[0],p={node:u,key:e,day:c,month:o,year:r,close:t};i!==null&&(p.action=i),delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected"),$(u).addClass("is-selected"),(n=this.settings.headerStyle==="full"||n)&&this.settings.onSelected&&this.settings.onSelected(u,p),n&&this.element.trigger("selected",p),this.focusDate=this.currentDate,this.focusDay()}},focusDay:function(){var e=this.focusDate;if(this.isIslamic&&typeof e!="string"){var t=L.gregorianToUmalqura(e);e=ot.padDate(t[0],t[1],t[2])}this.isIslamic||typeof this.focusDate=="string"||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var n=this.dayMap.filter(function(c){return c.key===e}),i=parseInt(e.substr(0,4),10),a=parseInt(e.substr(4,2),10)-1,r=parseInt(e.substr(6,2),10);if(this.isIslamic?this.focusDate=L.umalquraToGregorian(i,a,r):this.focusDate=new Date(i,a,r),(n.length===0||n[0].elem.hasClass("alternate"))&&(this.showMonth(a,i),n=this.dayMap.filter(function(c){return c.key===e})),!n.length!==0){var o=n[0].elem[0];this.element.find("td[tabindex=0]").attr("tabindex","-1"),$(o).attr("tabindex","0").focus()}},setToday:function(){this.selectDay(new Date,!1,!0,"today")},setCurrentDay:function(){var e=new Date;this.isIslamic||typeof date=="string"||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var t=this.dayMap.filter(function(i){return i.key===e});if(t.length!==0&&!t[0].elem.hasClass("alternate")&&!t.length!==0){var n=t[0].elem[0];$(n).find(".day-text").addClass("current-day")}},handleKeys:function(){var e=this,t=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",function(n){var i=n.keyCode||n.charCode||0,a=$(n.target),r=e.days.find("td:visible"),o=r.length,c=null,u=null,p=!1,m=new Date(t.disable.minDate),v=new Date(t.disable.maxDate),w=function(){e.datepickerApi&&t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&e.datepickerApi.resetRange({isData:!0})};if(e.settings.onKeyDown&&e.settings.onKeyDown({e:n,key:i,cell:a,node:e.element})===!1)return n.stopPropagation(),n.preventDefault(),!1;if(i===40){if(p=!0,!e.validateDisplayRange(kn.add(e.focusDate,7,"days")))return!1;t.range.useRange?(c=r.index(n.target)+7,u=r.eq(c),c<o&&(w(),e.setRangeOnCell(u.is(".is-selected")?null:u),e.setRangeSelBeforeFirstSel(u),e.activeTabindex(u,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()<v.getMonth()||v.getDate()-1>=e.focusDate.getDate()+7)&&e.focusDate.setDate(e.focusDate.getDate()+7),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()+7),e.focusDay())}if(i===38){if(p=!0,!e.validateDisplayRange(kn.subtract(e.focusDate,7,"days")))return!1;t.range.useRange?(c=r.index(n.target)-7,u=r.eq(c),c>-1&&(w(),e.setRangeOnCell(u.is(".is-selected")?null:u),e.setRangeSelBeforeFirstSel(u),e.activeTabindex(u,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()>m.getMonth()||m.getDate()+1<=e.focusDate.getDate()-7)&&e.focusDate.setDate(e.focusDate.getDate()-7),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()-7),e.focusDay())}if(i===37||i===189&&!n.shiftKey){if(p=!0,!e.validateDisplayRange(kn.subtract(e.currentDate,1,"days")))return!1;t.range.useRange?(c=r.index(n.target)-1,u=r.eq(c),c>-1&&(w(),e.setRangeOnCell(u.is(".is-selected")?null:u),e.setRangeSelBeforeFirstSel(u),e.activeTabindex(u,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()>m.getMonth()||m.getDate()+1!==e.focusDate.getDate())&&e.focusDate.setDate(e.focusDate.getDate()-1),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()-1),e.focusDay())}if(i===39||i===187&&n.shiftKey){if(p=!0,!e.validateDisplayRange(kn.add(e.currentDate,1,"days")))return!1;t.range.useRange?(c=r.index(n.target)+1,u=r.eq(c),c<o&&(w(),e.setRangeOnCell(u.is(".is-selected")?null:u),e.setRangeSelBeforeFirstSel(u),e.activeTabindex(u,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()<v.getMonth()||v.getDate()-1!==e.focusDate.getDate())&&e.focusDate.setDate(e.focusDate.getDate()+1),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()+1),e.focusDay())}if(i!==33||n.altKey||(p=!0,w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?m.getMonth()!==e.focusDate.getMonth()&&(e.focusDate.setMonth(e.focusDate.getMonth()-1),e.focusDay()):(e.focusDate.setMonth(e.focusDate.getMonth()-1),e.focusDay())),i!==34||n.altKey||(p=!0,w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.focusDate.getMonth()!==v.getMonth()&&(e.focusDate.setMonth(e.focusDate.getMonth()+1),e.focusDay()):(e.focusDate.setMonth(e.focusDate.getMonth()+1),e.focusDay())),i===33&&n.ctrlKey&&(p=!0,w(),e.focusDate.setFullYear(e.focusDate.getFullYear()-1),e.focusDay()),i===34&&n.ctrlKey&&(p=!0,w(),e.focusDate.setFullYear(e.focusDate.getFullYear()+1),e.focusDay()),i===36){p=!0;var C,A=e.focusDate;w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?m.getMonth()!==e.focusDate.getMonth()?C=new Date(A.getFullYear(),A.getMonth(),1):(C=new Date(m.getFullYear(),m.getMonth(),m.getDate())).setDate(C.getDate()+1):C=new Date(A.getFullYear(),A.getMonth(),1),e.focusDate=C,e.focusDay()}if(i===35){p=!0;var S,M=e.focusDate;w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.focusDate.getMonth()!==v.getMonth()?S=new Date(M.getFullYear(),M.getMonth()+1,0):(S=new Date(v.getFullYear(),v.getMonth(),v.getDate())).setDate(S.getDate()-1):S=new Date(M.getFullYear(),M.getMonth()+1,0),e.focusDate=S,e.focusDay()}if(i===84){if(t.range.useRange&&e.datepickerApi){w();var I=!(t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date));e.datepickerApi.setToday(I),!I&&e.datepickerApi&&typeof e.datepickerApi.closeCalendar=="function"&&e.datepickerApi.closeCalendar()}else e.setToday();p=!0}if(i===32||i===13){var z;if(p=!0,t.range.useRange)return(!t.range.first||t.range.first&&!t.range.first.date)&&r.removeClass("is-selected"),a.focus().trigger("click"),!1;var V=e.getCellDate(a);e.isIslamic?(e.currentDateIslamic=[V.year,V.month,V.day],e.currentDate=L.umalquraToGregorian(e.currentDateIslamic[0],e.currentDateIslamic[1],e.currentDateIslamic[2])):e.currentDate=new Date(V.year,V.month,V.day),e.selectDay(e.currentDate,!0,!0),e.setRipple((z=n.target)===null||z===void 0||z==null?void 0:z.querySelector(".is-ripple"),n)}return!p||(n.stopPropagation(),n.preventDefault(),!1)})},validateDisplayRange:function(e){var t,n,i=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate());return this.settings.disable.minDate&&this.settings.disable.maxDate?(t=new Date(this.settings.disable.minDate),n=new Date(this.settings.disable.maxDate)):this.settings.displayRange.start&&this.settings.displayRange.end&&(t=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end)),!(this.settings.displayRange.start&&this.settings.displayRange.end&&(!this.dayMap.map(function(a){return a.key}).includes(i)||t&&n&&(t.getDate()>=e.getDate()&&t.getMonth()===e.getMonth()||t.getMonth()>e.getMonth()||n.getDate()<=e.getDate()&&n.getMonth()===e.getMonth()||n.getMonth()<e.getMonth())))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var e=new Date(this.settings.disable.minDate),t=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),e.getFullYear()>this.currentYear||this.currentYear>t.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<e.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>t.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var e=this.settings;if(e.showLegend&&e.legend){this.legend&&this.legend.length?this.legend.empty():this.legend=$('<div class="monthview-legend"></div>');for(var t=0;t<e.legend.length;t++){var n=e.legend[t],i=n.color;if(i&&i.indexOf("#")===-1){var a=i.replace(/[0-9]/g,""),r=10*i.substr(i.length-2,2);i=ft.themeColors().palette[a][r].value}var o=""+`<div class="monthview-legend-item">
          <span class="monthview-legend-swatch `.concat(i?'" style="background-color: '.concat(ut.hexToRgba(i,.3)):' default"',`"></span>
          <span class="monthview-legend-text">`).concat(n.name,`</span>
        </div>`);this.legend.append(o)}if(this.table.after(this.legend),e.inPage){var c=this.legend[0].querySelector(".monthview-legend-item:first-child"),u=this.legend[0].querySelector(".monthview-legend-item:last-child");if(c&&u){var p=function(m){return m==null||m==null?void 0:m.getBoundingClientRect().top};this.legend[p(c)!==p(u)?"addClass":"removeClass"]("is-wrapped")}}}},updateMonthDetails:function(e){e&&e!=null&&(this.settings=N.mergeSettings(this.element[0],e,this.settings),this.settings.legend=e.legend,this.settings.showLegend&&this.addLegend())},setRangeOnCell:function(e){var t=this,n=this.settings;if(n.range.useRange&&n.range.first&&!n.range.second){var i=n.range.first,a=n.range.extra,r=a.cellLength-1,o=i.rowIdx+i.cellIdx+r*i.rowIdx;if((e=$(e)).length&&!e.is(".is-disabled, .is-selected")){var c=e.closest("tr"),u=e.index(),p=c.index(),m=p+u+r*p,v=t.getCellDate(e),w=this.getTime(this.isIslamic?[v.year,v.month,v.day]:new Date(v.year,v.month,v.day)),C=this.getDifferenceToDate(n.range.first.date,n.range.maxDays);t.days.find("td:visible").each(function(A){var S=$(this);w>t.getTime(n.range.first.date)&&!n.range.selectBackward&&(!n.range.maxDays||n.range.maxDays>0&&w<=C.aftertime)&&(A>o&&A<=m||w>t.getTime(a.max)&&A<=m)?S.addClass("range-next"):w<t.getTime(n.range.first.date)&&!n.range.selectForward&&(!n.range.maxDays||n.range.maxDays>0&&w>=C.beforetime)&&(A<o&&A>=m||w<t.getTime(a.min)&&A>=m)?S.addClass("range-prev"):S.removeClass("range-next range-prev")})}else e.length||t.days.find("td").removeClass("range-next range-prev")}!e&&n.range.second&&t.setRangeSelected()},getDifferenceToDate:function(e,t,n){var i=this,a={},r=function(o,c,u){for(o=i.isIslamic?L.umalquraToGregorian(o):new Date(o);c>0;)o.setDate(o.getDate()+(u?1:-1)),(n||!n&&!i.isDateDisabled(o.getFullYear(),o.getMonth(),o.getDate()))&&(c--,a[u?"after":"before"]=i.isIslamic?L.gregorianToUmalqura(new Date(o)):new Date(o));u&&a.after?a.aftertime=i.getTime(a.after):a.before&&(a.beforetime=i.getTime(a.before))};return n=n!==void 0?n:this.settings.range.includeDisabled,r(e,t),r(e,t,!0),a},setRangeSelected:function(){var e=this,t=this,n=this.settings;if(n.range.useRange&&n.range.second&&n.range.second.date&&this.days&&this.days.length){var i=n.range.data?new Date(n.range.data.start):n.range.first.date,a=n.range.data?new Date(n.range.data.end):n.range.second.date;this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each(function(){var r,o=$(this),c=o.is(".is-disabled")&&!n.range.includeDisabled,u=o.is(".is-disabled")&&n.range.includeDisabled?" include-disabled":"",p=t.getTime((r=t.getCellDate(o),e.isIslamic?[r.year,r.month,r.day]:new Date(r.year,r.month,r.day))),m=t.getTime(i,!0),v=t.getTime(a,!0);p!==m&&p!==v||c?(!t.isIslamic&&p>m&&p<v&&!c||t.isIslamic&&(m>p&&v<p||m<p&&v>p)&&!c)&&o.addClass("range-selection".concat(u)):o.addClass("is-selected".concat(u).concat(m!==v?" range-selection".concat(p!==v||t.isIslamic?"":" end-date"):""))})}},setRangeSelByClick:function(){var e=0,t=this.settings;if(t.range.useRange)if(t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date){if(t.showTime&&this.datepickerApi){var n={time1:this.getTime(t.range.first.date),time2:this.getTime(t.range.second.date),first:this.datepickerApi.setTime(t.range.first.date),second:this.datepickerApi.setTime(t.range.second.date)};n.time1!==this.getTime(n.first)&&(this.datepickerApi.setRangeToElem(n.first,!0),this.datepickerApi.setRangeToElem(n.second,!1),e=2)}e=e===0?1:e}else{var i;!t.range.first||t.range.first&&!t.range.first.date?(i=this.dayMap.filter(function(a){return a.elem.is(".is-selected")}),i&&i.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),i[0].elem.focus().trigger("click"),e=3)):(!t.range.second||t.range.second&&!t.range.second.date)&&((i=this.days.find("td.range-prev:visible").first()).length||(i=this.days.find("td.range-next:visible").last()),i.length||(i=this.dayMap.filter(function(a){return a.elem.is(".is-selected")})),i&&i.length&&((i[0].elem||i).focus().trigger("click"),e=3))}return e},getCellDate:function(e){var t=parseInt(e.text(),10),n=parseInt(this.header.find(".month").attr("data-month"),10),i=parseInt(this.header.find(".year").text(),10);return e.hasClass("prev-month")?n===0?(n=11,i--):n--:e.hasClass("next-month")&&(n===11?(n=0,i++):n++),{year:i,month:n,day:t}},setRangeSelBeforeFirstSel:function(e){var t=this.settings;t.range.useRange&&$("#monthview-popup:visible")&&(t.range.first||($("td",this.element).removeClass("is-selected"),e.addClass("is-selected")))},activeTabindex:function(e,t){return $("td",this.element).removeAttr("tabindex"),e.attr("tabindex",0),t&&e.focus(),e},updated:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e||(e={}),e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.destroy().init()},teardown:function(){var e,t,n;return(e=this.header)===null||e===void 0||e==null||e.off(),(t=this.days)===null||t===void 0||t==null||t.off(),(n=this.element)===null||n===void 0||n==null||n.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){var e;if((e=this.calendarToolbarAPI)===null||e===void 0||e==null||e.destroy(),this.teardown(),this.element&&this.element.empty(),this.element&&this.element[0])try{$.removeData(this.element[0],se)}catch{}return this}};var Se="weekview",Je={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,disable:{dayOfWeek:[]},newEventDefaults:{title:"NewEvent",subject:"",comments:"",durationHours:1},showToday:!0,showViewChanger:!0,hitbox:!1,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function tt(e,t){this.settings=N.mergeSettings(e,t,Je),this.element=$(e),this.init()}tt.prototype={init:function(){return this.settings.startDate?this.settings.firstDayOfWeek=this.settings.startDate.getDay():this.settings.startDate=kn.firstDayOfWeek(new Date,this.settings.firstDayOfWeek),this.settings.endDate?this.settings.endDate.setHours(23,59,59,999):this.settings.endDate=kn.lastDayOfWeek(new Date,this.settings.firstDayOfWeek),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=L.getLocale(this.settings.language),n=L.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=L.cultures[i]||L.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build()}),this},setCurrentCalendar:function(){return this.currentCalendar=L.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this.conversions=this.currentCalendar.conversions,this},build:function(){return this.id=this.id||N.uniqueId(this.element,Se),this.isMobileWidth=Yt.isBelow("phone-to-tablet"),this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),this.handleKeys(),this.element.find("td[data-key]").attr("tabindex","-1"),N.addAttributes(this.element,this,this.settings.attributes),this},renderAllEvents:function(e){if(!this.settings.onRenderWeek||e){var t=this.settings.events.slice(0);t.sort(function(a,r){return a.starts<r.starts?-1:a.starts>r.starts?1:0}),this.removeAllEvents();for(var n=0;n<t.length;n++){var i=t[n];this.settings.filteredTypes.indexOf(i.type)>-1||this.renderEvent(i)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var e=this;this.settings.onRenderWeek(this.element,function(t,n){n&&n.length>0&&(e.settings.eventTypes=n),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0))},{api:e,settings:this.settings})},removeAllEvents:function(){for(var e=this.element[0].querySelectorAll(".calendar-event"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var n=0;n<this.dayMap.length;n++)this.dayMap[n].events=[]},renderEvent:function(e){var t=new Date(e.starts),n=ot.padDate(t.getFullYear(),t.getMonth(),t.getDate());if(L.isIslamic(this.locale.name)){var i=L.gregorianToUmalqura(t);n=ot.padDate(i[0],i[1],i[2])}var a=new Date(e.ends),r=ot.padDate(a.getFullYear(),a.getMonth(),a.getDate());if(L.isIslamic(this.locale.name)){var o=L.gregorianToUmalqura(a);r=ot.padDate(o[0],o[1],o[2])}var c=this.dayMap.filter(function(w){return w.key>=n&&w.key<=r});if(e.endKey=r,e.startKey=n,e=Jn.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),c.forEach(function(w){return w.events.push(e)}),c.length!==1||e.isAllDay||(this.isStackedView()?this.appendToDayContainer(e):this.appendEventToHours(c[0].elem,e)),c.length===1&&e.isAllDay&&this.appendEventToAllDay(c[0].elem,e),c.length>1)if(e.isAllDay==="true"||e.isAllDay===!0)for(var u=0;u<c.length;u++){var p=u===0?"calendar-event-start":"calendar-event-continue";u===c.length-1&&(p="calendar-event-ends"),this.appendEventToAllDay(c[u].elem,e,p)}else{e.overnightStartsHour=e.startsHour,e.overnightEndsHour=e.endsHour;for(var m=0;m<c.length;m++){var v=la({},e);v.endsHour=this.settings.endHour+.6,m>0&&(v.startsHour=this.settings.startHour,v.startKey=v.endKey),m===c.length-1&&(v.endsHour=v.overnightEndsHour),this.isStackedView()?this.appendToDayContainer(v,!0):this.appendEventToHours(c[m].elem,v,!0)}}},createEventElement:function(e,t){var n=document.createElement("a");return ue.addClass(n,"calendar-event",e.color,t),n.setAttribute("data-id",e.id),n.setAttribute("data-key",e.startKey),n.setAttribute("href","#"),n},appendEventToAllDay:function(e,t,n){var i=e.querySelector(".week-view-all-day-wrapper");if(i){var a=this.createEventElement(t,n);n!=="calendar-event-continue"&&n!=="calendar-event-ends"||a.setAttribute("tabindex","-1"),a.innerHTML=`<div class="calendar-event-content">
      `.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",`
      <span class="calendar-event-title">`).concat(t.shortSubject||t.subject,`</span>
    </div>`);var r=i.querySelectorAll(".calendar-event").length;if(r>=1&&(a.style.top="".concat(22*r,"px")),r>2)for(var o=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),c=0;c<o.length;c++)o[c].style.height="".concat(44+23*(r-1),"px");i.appendChild(a),N.addAttributes($(a),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(a,t)}},appendEventToHours:function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),a=0;a<i.length;a++){var r=i[a],o=parseFloat(r.parentNode.getAttribute("data-hour"),10),c=Math.round(t.startsHour);if(c>t.startsHour?o===c-.5:o===c){var u=t.endsHour-t.startsHour,p="",m=this.createEventElement(t);if(n?p=" ".concat(L.formatHourRange(t.overnightStartsHour,t.overnightEndsHour,{locale:this.locale})):(u<.5&&ue.addClass(m,"reduced-padding",t.color),u<1.5&&ue.addClass(m,"is-ellipsis"),u>2&&(p=" ".concat(L.formatHourRange(t.startsHour,t.endsHour,{locale:this.locale})))),t.startsHour+u>this.settings.endHour&&(ue.addClass(m,"is-cutoff",t.color),u=this.settings.endHour+1-t.startsHour),u<.25&&(u=.25),t.startsHour>o){var v=t.startsHour-o,w=r.parentNode.offsetHeight;m.style.top="".concat(v/.016666666666666784*(w/30),"px")}m.style.height="".concat(2*u*25+1.5*u,"px"),m.innerHTML=`<div class="calendar-event-content">
          `.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",`
          `).concat(n?'<span style="font-weight: bold">Overnight</span><br/>':"",`
          <span class="calendar-event-title">`).concat(t.shortSubject||t.subject).concat(p,`</span>
        </div>`);var C=r.querySelector(".week-view-cell-wrapper"),A=r.querySelectorAll(".calendar-event"),S=A.length;if(S>0){var M=100/(S+1),I=0;for(I=0;I<S;I++)A[I].style.width="".concat(M,"%"),I>0&&this.isRTL&&(A[I].style.right="".concat(M*I,"%")),I>0&&!this.isRTL&&(A[I].style.left="".concat(M*I,"%"));m.style.width="".concat(M,"%"),this.isRTL?m.style.right="".concat(M*I,"%"):m.style.left="".concat(M*I,"%")}C.appendChild(m),N.addAttributes($(m),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(m,t)}}},appendToDayContainer:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.element[0].querySelector('.week-view-body-cell[data-key="'.concat(e.startKey,'"]'));if(n){var i;i=" ".concat(t?L.formatHourRange(e.overnightStartsHour,e.overnightEndsHour,{locale:this.locale,keepPeriod:!0,pattern:this.settings.timePattern}):L.formatHourRange(e.startsHour,e.endsHour,{locale:this.locale,keepPeriod:!0,pattern:this.settings.timePattern}));var a=this.createEventElement(e),r=`<span class="calendar-event-title">
          `.concat(this.settings.timeFirst?i:e.shortSubject||e.subject,"</br>").concat(this.settings.timeFirst?e.shortSubject||e.subject:i,`
        </span>`);a.innerHTML=`<div class="calendar-event-content">
        `.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",`
        `).concat(t?'<span style="font-weight: bold">Overnight</span><br/>':"",`
        `).concat(r,`
      </div>`),n==null||n==null||n.appendChild(a)}},attachTooltip:function(e,t){var n=this;if(this.settings.iconTooltip!=="overflow"){var i=e.querySelector(".calendar-event-icon");i&&(typeof this.settings.iconTooltip=="function"?this.settings.iconTooltip({settings:this.settings,event:t}):t[this.settings.iconTooltip]&&(i.setAttribute("title",t[this.settings.iconTooltip]),$(i).tooltip({content:i.innerText})))}this.settings.eventTooltip!=="overflow"&&(typeof this.settings.eventTooltip=="function"?this.settings.eventTooltip({settings:this.settings,event:t}):t[this.settings.eventTooltip]&&(e.setAttribute("title",t[this.settings.eventTooltip]),$(e).tooltip({content:e.innerText}))),t.shortSubject||this.settings.eventTooltip!=="overflow"&&this.settings.iconToolTip!=="overflow"||(e.setAttribute("title",t.subject),$(e).tooltip({beforeShow:function(a,r){var o=r[0].querySelector(".calendar-event-title"),c=r[0].querySelector(".calendar-event-icon"),u=c?c.querySelector(".icon").getAttribute("data-status"):"";o.offsetWidth>r[0].scrollWidth-(c?c.offsetWidth:0)?a("".concat(o.innerText).concat(u?" (".concat(L.translate(u,{locale:n.locale.name},!1),")"):"")):a(!1)}}))},showWeek:function(e,t){var n=this;this.numberOfDays=Math.round((t-e)/864e5);var i=new Date(e.getTime()),a=new Date(t.getTime());if(L.isIslamic(this.locale.name)&&(e=L.gregorianToUmalqura(e),e=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),t=L.gregorianToUmalqura(t),t=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6])),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view stacked-view is-borderless toolbar-hidden"),this.settings.borderless&&this.element.addClass("is-borderless"),this.settings.hideToolbar&&this.element.addClass("toolbar-hidden"),this.numberOfDays!==0&&this.numberOfDays!==1||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=this.numberOfDays!==7,this.settings.responsive&&!this.isDayView&&this.isStackedView()&&this.isMobileWidth)this.showWeek(e,e);else{var r=this.isStackedView();r&&this.element.addClass("stacked-view"),this.weekContainer=r?this.createStackedTemplate(e,t):this.createTableTemplate(e,t),this.element.find(".week-view-container").remove(),this.element.append(this.weekContainer),this.element.find(".week-view-header-cell").each(function(c,u){var p=u.getAttribute("data-key"),m=n.element.find('.week-view-footer-cell[data-key="'.concat(p,'"]'))[0];p&&n.dayMap.push({key:p,elem:u,footer:m})}),this.addTimeLine(),this.showToolbarMonth(e,t),this.renderDisable(),this.renderLegend(),this.renderAllEvents();var o={isDayView:this.isDayView,isStackedView:r,startDate:L.isIslamic(this.locale.name)?i:e,endDate:L.isIslamic(this.locale.name)?a:t,elem:this.element,api:this};this.element.trigger("weekrendered",o),this.settings.onChangeWeek&&this.settings.onChangeWeek(o),this.settings.startDate=L.isIslamic(this.locale.name)?i:e,this.settings.endDate=L.isIslamic(this.locale.name)?a:t}},createTableTemplate:function(e,t){this.weekHeader='<thead class="week-view-table-header"><tr><th class="week-view-header-cell"><div class="week-view-header-wrapper"><span class="audible">'.concat(L.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(L.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var n=new Date(e.getTime());n<=t;n.setDate(n.getDate()+1)){var i=L.formatDate(n,{pattern:"d",locale:this.locale.name}),a=L.formatDate(n,{pattern:"EEE",locale:this.locale.name}),r=this.currentCalendar.dateFormat.dayOfWeek,o=r?r.split(" ")[0]==="EEE":"d EEE";this.weekHeader+='<th class="week-view-header-cell" data-key="'.concat(ot.padDate(n.getFullYear(),n.getMonth(),n.getDate()),'"><div class="week-view-header-wrapper').concat(kn.isToday(n)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(o?"":" is-emphasis",'">').concat(o?a:i,'</span><span class="week-view-header-day-of-week').concat(o?" is-emphasis":"",'">').concat(o?i:a,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var c=this.settings.startHour;c<=this.settings.endHour;c++){for(var u='<tr class="week-view-hour-row" data-hour="'.concat(c,'"><td><div class="week-view-cell-wrapper">').concat(L.formatHour(c,{locale:this.locale}),"</div></td>"),p='<tr class="week-view-half-hour-row" data-hour="'.concat(c,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),m=new Date(e.getTime());m<=t;m.setDate(m.getDate()+1)){var v=ot.padDate(m.getFullYear(),m.getMonth(),m.getDate());u+='<td data-key="'.concat(v,'"><div class="week-view-cell-wrapper"></div></td>'),p+='<td data-key="'.concat(v,'"><div class="week-view-cell-wrapper"></div></td>')}u+="</tr>",p+="</tr>",this.weekBody+=u+p}return this.weekBody+="</tbody>",'<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>")},createStackedTemplate:function(e,t){for(var n="",i="",a="",r=new Date(e.getTime());r<=t;r.setDate(r.getDate()+1)){var o="".concat(ot.padDate(r.getFullYear(),r.getMonth(),r.getDate())),c=L.formatDate(r,{pattern:"d",locale:this.locale.name}),u=L.formatDate(r,{pattern:"EEE",locale:this.locale.name}),p=kn.isToday(r);n+='<div data-key="'.concat(o,`" class="week-view-header-cell">
        <div class="week-view-header-wrapper `).concat(p?"is-today":"",`">
          <span class="week-view-header-day-of-week is-emphasis">`).concat(c,`</span>
          <span class="week-view-header-day-of-week">`).concat(u,`</span>
        </div>
        `).concat(this.settings.showAllDay?'<div class="week-view-all-day-wrapper"></div>':"",`
      </div>`),i+='<div data-key="'.concat(o,'" class="week-view-body-cell"></div>'),a+='<div data-key="'.concat(o,'" class="week-view-footer-cell"></div>')}return`<div class="week-view-container">
      <div class="week-view-stacked-header">`.concat(n,`</div>
      <div class="week-view-stacked-body">`).concat(i,`</div>
      `).concat(this.settings.showFooter?'<div class="week-view-stacked-footer">'.concat(a,"</div>"):"",`
    </div>`)},isStackedView:function(){return!!this.settings.stacked},renderDisable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.settings.disable.dayOfWeek.length>0?this.settings.disable.dayOfWeek:e;if(!(!t.length>0)){var n=t;if(this.dayMap.length===1){var i=this.dayMap[0],a=i.key,r=a.substring(0,4),o=a.substring(4,6),c=a.substring(6,8),u=new Date(r,o-1,c);if(n.includes(u.getDay())){var p=i.elem;this.renderDisableToContainer(p)}}else for(var m=0;m<n.length;m++){var v=this.dayMap[n[m]].elem;this.renderDisableToContainer(v)}}},renderDisableToContainer:function(e){for(var t=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),n=0;n<t.length;n++){var i=t[n];$(i.querySelector(".week-view-cell-wrapper")).addClass("is-disabled")}var a=e.querySelector(".week-view-all-day-wrapper");a&&a.classList.add("is-disabled")},renderLegend:function(){var e=this;if(this.settings.showLegend&&!this.isStackedView())for(var t=function(r,o){var c=typeof r=="string"?new Date(r):r,u=ot.padDate(c.getFullYear(),c.getMonth(),c.getDate());if(L.isIslamic(e.locale.name)){var p=L.gregorianToUmalqura(c);u=ot.padDate(p[0],p[1],p[2])}var m=new Date(r),v=ot.padDate(m.getFullYear(),m.getMonth(),m.getDate());if(L.isIslamic(e.locale.name)){var w=L.gregorianToUmalqura(m);v=ot.padDate(w[0],w[1],w[2])}var C=e.dayMap.filter(function(de){return de.key>=u&&de.key<=v});if(C.length>0){var A=o.color;if(A.indexOf("#")===-1){var S=A.replace(/[0-9]/g,""),M=10*A.substr(A.length-2,2);A=ft.themeColors().palette[S][M].value}for(var I=ut.hexToRgba(A,.3),z=C[0].elem,V=e.element[0].querySelectorAll("td:nth-child(".concat(z.cellIndex+1,")")),U=0;U<V.length;U++){var G=V[U],J=$(G.querySelector(".week-view-cell-wrapper"));J.addClass("is-colored"),J[0].setAttribute("data-hex",A),J[0].style.backgroundColor=I}var te=$(z.querySelector(".week-view-all-day-wrapper"));te&&(te.addClass("is-colored"),te[0].setAttribute("data-hex",A),te[0].style.backgroundColor=I)}},n=this.settings.legend,i=function(r){var o=n[r].dates,c=n[r].dayOfWeek,u=n[r].disableWeek;if(o)for(var p=0;p<o.length;p++)t(o[p],n[r]);if(c)for(var m=function(){var w=parseInt(e.dayMap[v].key.substring(0,4),10),C=parseInt(e.dayMap[v].key.substring(4,6),10)-1,A=parseInt(e.dayMap[v].key.substring(6,8),10),S=new Date(w,C,A);c.forEach(function(M){S.getDay()===M&&t(S,n[r])})},v=0;v<e.dayMap.length;v++)m();u&&e.renderDisable(u)},a=0;a<n.length;a++)i(a)},showToolbarMonth:function(e,t){if(!this.settings.hideToolbar){var n=L.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),i=L.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),a=L.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),r=L.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),o=this.isMobileWidth&&this.monthField?L.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name}):L.formatDate(t,{date:"year",locale:this.locale.name});if(i!==n){var c=L.formatDate(e,{pattern:"MMM",locale:this.locale.name}),u=this.isMobileWidth&&this.monthField?L.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name}):L.formatDate(t,{pattern:"MMMM yyyy",locale:this.locale.name});o="".concat(c," - ").concat(u)}if(r!==a){var p=L.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name}),m=L.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name});o="".concat(p," - ").concat(m)}this.monthField.text(o)}},addTimeLine:function(){var e=this;if(this.settings.showTimeLine&&!this.isStackedView()){var t=function(){var n=new Date,i=n.getHours(),a=n.getMinutes(),r=i-e.settings.startHour+a/60;e.markers.css("top",52*r)};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),t(),this.timer=setInterval(function(){t()},3e4))}},addToolbar:function(){var e=this;if(!this.settings.hideToolbar){var t=this.isDayView?"day":"week";this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new vs(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,isMonthPicker:!0,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.settings.onChangeView,viewChangerValue:t,attributes:this.settings.attributes}),this.monthField=this.header.find(this.settings.attributes?"#".concat(this.settings.attributes[0].value,"-").concat(t,"-view-datepicker"):"#monthview-datepicker-field")}},setToday:function(){var e=new Date;this.isIslamic&&typeof e!="string"&&(this.currentDateIslamic=L.gregorianToUmalqura(e),e=ot.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||typeof e=="string"||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var t=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1;this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,n,1]:new Date(t,n,1))},setWeekFromDate:function(e){this.numberOfDays=7,this.settings.startDate=kn.firstDayOfWeek(e,this.settings.firstDayOfWeek),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate=new Date(this.settings.startDate),this.settings.endDate.setDate(this.settings.endDate.getDate()+this.numberOfDays-1),this.settings.endDate.setHours(23,59,59,59),this.currentDay?this.showWeek(this.currentDay,this.currentDay):this.showWeek(this.settings.startDate,this.settings.endDate)},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat(Se)).on("updated.".concat(Se),function(){e.updated()}),this.element.off("change-date.".concat(Se)).on("change-date.".concat(Se),function(i,a){var r=a.isToday?new Date:a.selectedDate;e.isDayView?(e.settings.startDate=r,e.settings.endDate=r):(e.hasIrregularDays&&r.getDay()===e.settings.firstDayOfWeek?e.settings.startDate=r:e.settings.startDate=kn.firstDayOfWeek(r,e.settings.firstDayOfWeek),e.settings.startDate.setHours(0,0,0,0),e.settings.endDate=new Date(e.settings.startDate),e.settings.endDate.setDate(e.settings.endDate.getDate()+e.numberOfDays-1),e.settings.endDate.setHours(23,59,59,59)),e.showWeek(e.settings.startDate,e.settings.endDate),a.isToday&&e.setToday()}),this.element.off("change-next.".concat(Se)).on("change-next.".concat(Se),function(){e.advanceDays(!0)}),this.element.off("change-prev.".concat(Se)).on("change-prev.".concat(Se),function(){e.advanceDays(!1)});var n=function(i,a){var r=i.getAttribute("data-id"),o=e.settings.events.filter(function(c){return c.id===r});o&&o.length!==0&&e.element.trigger(a,{settings:e.settings,event:o[0]})};return this.element.off("click.".concat(Se)).on("click.".concat(Se),".calendar-event, td",function(i){var a=$(i.currentTarget);if(a.is("td")){var r=i.currentTarget.getAttribute("data-key"),o=$(i.currentTarget).parent().attr("data-hour"),c=Math.floor(o),u=60*(o-c);if(!r)return;var p=new Date(r.substr(0,4),r.substr(4,2)-1,r.substr(6,2),c,u);t.focusEl=a,t.focusDateHour=p,t.element.find("td.is-selected").removeClass("is-selected"),a.addClass("is-selected").attr("tabindex","0").focus()}else n(i.currentTarget,"eventclick"),i.preventDefault()}),this.element.off("dblclick.".concat(Se)).on("dblclick.".concat(Se),".calendar-event, td",function(i){if($(i.currentTarget).is("td")){var a=i.currentTarget.getAttribute("data-key"),r=$(i.currentTarget).parent().attr("data-hour"),o=Math.floor(r),c=60*(r-o);if(!a)return;var u=new Date(a.substr(0,4),a.substr(4,2)-1,a.substr(6,2),o,c),p=N.extend({},e.settings.newEventDefaults);p.startKey=a,p.endKey=a,p.starts=u,p.ends=u,i.stopPropagation(),Jn.cleanEventData(p,!1,u,e.locale,e.language,e.settings.events,e.settings.eventTypes),t.showModalWithCallback(u,p,!0,$(i.currentTarget)),t.element.trigger("updated")}n(i.currentTarget,"eventdblclick")}),$("body").off("breakpoint-change.".concat(this.id)).on("breakpoint-change.".concat(this.id),function(){return e.onBreakPointChange()}),$(window).on("resize.".concat(this.id),function(){e.element.trigger("breakpoint-change.".concat(e.id))}),this},handleKeys:function(){var e=this;return this.element.off("keydown.".concat(Se)).on("keydown.".concat(Se),"td",function(t){var n=t.keyCode||t.charCode||0,i=$(t.currentTarget),a=i.parent().index();e.focusEl=i;var r=L.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),o=e.dayMap.filter(function(m){return m.key>=r&&m.key<=r});if(n===40&&a++,n===38&&a--,(n===37||n===189&&!t.shiftKey)&&(e.focusDateHour.setDate(e.focusDateHour.getDate()-1),r=L.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),(o=e.dayMap.filter(function(m){return m.key>=r&&m.key<=r})).length<=0)){var c=new Date(e.focusDateHour);e.isDayView?(c.setDate(e.focusDateHour.getDate()-1),e.showWeek(e.focusDateHour,e.focusDateHour)):(c.setDate(e.focusDateHour.getDate()-6),e.showWeek(c,e.focusDateHour)),o=e.dayMap.filter(function(m){return m.key>=r&&m.key<=r})}if((n===39||n===187&&t.shiftKey)&&(e.focusDateHour.setDate(e.focusDateHour.getDate()+1),r=L.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),(o=e.dayMap.filter(function(m){return m.key>=r&&m.key<=r})).length<=0)){var u=new Date(e.focusDateHour);e.isDayView?(u.setDate(e.focusDateHour.getDate()+1),e.showWeek(e.focusDateHour,e.focusDateHour)):(u.setDate(e.focusDateHour.getDate()+6),e.showWeek(e.focusDateHour,u)),o=e.dayMap.filter(function(m){return m.key>=r&&m.key<=r})}var p=$(e.element[0].querySelectorAll("td:nth-child(".concat(o[0].elem.cellIndex+1,")"))[a]);p.length>0&&(e.element.find("td[tabindex=0]").removeAttr("tabindex"),p.attr("tabindex","0").focus())}),this},onBreakPointChange:function(){if(this.isMobileWidth=Yt.isBelow("phone-to-tablet"),this.isStackedView()&&this.settings.responsive)if(!this.isDayView&&this.isMobileWidth){var e=new Date,t=kn.isWithinRange(this.settings.startDate,this.settings.endDate,e)?e:this.settings.startDate;this.showWeek(t,t)}else this.isDayView&&this.setWeekFromDate(this.settings.startDate)},advanceDays:function(e){var t=this.isDayView?1:this.numberOfDays;e||(t=-t),this.settings.startDate.setDate(this.settings.startDate.getDate()+t),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+t),this.isDayView&&(this.currentDay=this.settings.startDate),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(e){e.startsLocale||(e=Jn.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes)),Jn.cleanEventData(e,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e)},showModalWithCallback:function(e,t,n,i){var a=this;this.showEventModal(e,t,function(r,o){for(var c=r.querySelectorAll("input, textarea, select"),u=0;u<c.length;u++)o[c[u].id]=c[u].getAttribute("type")==="checkbox"?c[u].checked:c[u].value;n?a.addEvent(o):a.updateEvent(o)},i)},showEventModal:function(e,t,n,i){var a=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),ue.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),t=Jn.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(t||{},this.settings.modalTemplate,this.modalContents);var r,o=this.getDayEvents(e),c=!0;o.elem=$(o.elem),r=o.elem.index()===6?this.isRTL?"right":"left":this.isRTL?"left":"right",i||this.activeView!=="day"||(i=$(".week-view-header-wrapper"),r=this.isRTL?"left":"right"),i||(i=o.elem);var u=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:i,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:r},title:t.title||t.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:t.color,initializeContent:!1};i.off("hide.calendar").on("hide.calendar",function(){c?a.removeModal():(n(a.modalContents,t),a.element.trigger("hidemodal",{elem:a.modalContents,event:t}),a.removeModal(),c=!0)}).popover(u).off("show.calendar").on("show.calendar",function(p,m){a.element.trigger("showmodal",{elem:a.modalContents,event:t}),m.find("#isAllDay").off().on("click.calendar",function(A){$(A.currentTarget).prop("checked")?(m.find("#durationHours").prop("disabled",!0),m.find("#endsHourLocale").prop("disabled",!0),m.find("#startsHourLocale").prop("disabled",!0)):(m.find("#durationHours").prop("disabled",!1),m.find("#endsHourLocale").prop("disabled",!1),m.find("#startsHourLocale").prop("disabled",!1))}),m.find("#type").val(t.type).dropdown(),m.find("#comments").val(t.comments),m.find("#subject").focus(),m.find("button").on("click",function(A){var S=i.data("popover"),M=A.currentTarget.getAttribute("data-action");c=M!=="submit",S&&S.hide(!0)}),m.find(".datepicker").datepicker({locale:a.settings.locale,language:a.settings.language});var v=m.find(".timepicker");if(v){v.val(L.formatHour(e.getHours()+e.getMinutes()/60));var w=t.durationHours?t.durationHours:1;if(v.length>1)for(var C=1;C<v.length;C++)$(v[C]).val(L.formatHour(e.getHours()+w+e.getMinutes()/60));v.timepicker({locale:a.settings.locale,language:a.settings.language})}a.translate(m)})}},modalVisible:function(){return document.querySelector(".calendar-event-modal")!==null},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),ue.remove(document.getElementById("calendar-popup")),ue.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},renderTmpl:function(e,t,n,i){if(at(Xn)==="object"&&t){if(t instanceof $?t="".concat(t.html()):typeof t=="string"&&(ot.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Jn.getEventTypeColor(e,this.settings.eventTypes),e.startsLong=L.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=L.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(L.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(L.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(e.ends,{date:"hour",locale:this.locale.name})),L.isIslamic(this.locale.name)){var a=L.gregorianToUmalqura(new Date(e.starts)),r=L.gregorianToUmalqura(new Date(e.ends));e.startsLong=L.formatDate(a,{date:"long",locale:this.locale.name}),e.endsLong=L.formatDate(r,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(L.formatDate(a,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(a,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(L.formatDate(r,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(r,{date:"hour",locale:this.locale.name}))}e.typeLabel=this.getEventTypeLabel(e.type);var o=Xn.compile(t,{event:e});n.classList.remove("has-only-one"),i?ue.append(n,o,"*"):(n.innerHTML=o,n.classList.add("has-only-one"))}},getEventTypeLabel:function(e){var t="";if(!e)return t;var n=this.settings.eventTypes.filter(function(i){return i.id===e});return n.length===1&&(t=n[0].label),t},getDayEvents:function(e){if(typeof e=="string"||this.isRTL||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate())),L.isIslamic(this.locale.name)){var t=L.gregorianToUmalqura(e);e=ot.padDate(t[0],t[1],t[2])}var n=this.dayMap.filter(function(a){return a.key===e}),i={date:e,events:[]};return n.length===0?[]:(i.events=n[0].events,i.elem=n[0].elem,i)},translate:function(e){var t=this;$(e).find('[data-translate="text"]').each(function(n,i){var a=$(i);a.text(L.translate(a.attr("data-translate-key")||a.text(),{showAsUndefined:!1,showBrackets:!1,language:t.settings.language,locale:t.settings.locale}))})},selectHeader:function(e){var t=e instanceof Date?ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()):e,n={all:".week-view-table-header th"};n.current="".concat(n.all,'[data-key="').concat(t,'"]'),[].slice.call(this.element[0].querySelectorAll(n.all)).forEach(function(a){a.classList.remove("is-selected")});var i=this.element[0].querySelector(n.current);i&&i.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&(this.settings.events[n]=N.extend(!0,this.settings.events[n],e),Jn.cleanEventData(this.settings.events[n],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&this.settings.events.splice(n,1);this.renderAllEvents()},updated:function(e){return e||(e={}),e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),e.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),$("body").off("breakpoint-change.".concat(this.id)),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],Se),$.removeData(this.element[0],"init"),$.removeData(this.element[0],"automationId"),this}};var dt=["label","checked"],rt="calendar",qt={eventTypes:[],events:[],locale:null,language:null,month:new Date().getMonth(),year:new Date().getFullYear(),day:new Date().getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,hitbox:!1,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0},disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showEventLegend:!0,dayLegend:null,displayRange:{start:"",end:"",months:{showAbbr:!1}}};function _t(e,t){this.settings=N.mergeSettings(e,t,qt),this.element=$(e),this.init()}_t.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents().renderEventLegend(),this},setLocaleThenBuild:function(){var e=this,t=L.getLocale(this.settings.language),n=L.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=L.cultures[i]||L.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()}),this},setCurrentCalendar:function(){return this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this},renderEventLegend:function(){var e=this.settings;if($(".calendar-event-legend").remove(),e.showEventLegend){this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var t=0;t<e.eventTypes.length;t++){var n=e.eventTypes[t],i=n.color,a=$('<div class="calendar-event-legend-item"></div>');a.append('<span class="calendar-event-legend-swatch '.concat(i,`"></span>
          <span class="calendar-event-legend-text">`).concat(n.label,"</span>")),this.eventLegend.append(a),N.addAttributes(a,this,this.settings.attributes,"legend-mobile-".concat(n.id),!0)}this.monthviewTable.after(this.eventLegend)}},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;if(this.settings.isEventTree){$(this.eventTypeContainer).addClass("event-tree");var e=this.settings.eventTypes.map(function(o){var c=la({},o);if(c.text=c.label,c.selected=c.checked,c.icon="",delete c.checked,delete c.label,c.children){var u=c.children.map(function(p){return la({text:p.label,selected:p.checked,icon:""},cc(p,dt))});c.children=u}return c});this.eventTree=$('<ul role="tree" class="tree"></ul>'),$(this.eventTypeContainer).append(this.eventTree),this.eventTree.tree({dataset:e,selectable:"multiple",folderIconOpen:"caret-down",folderIconClosed:L.isRTL()?"caret-left":"caret-right"})}else for(var t=0;t<this.settings.eventTypes.length;t++){var n=this.settings.eventTypes[t],i=n.custom?n.color:"".concat(n.color,"07"),a='<input type="checkbox" class="checkbox '.concat(i,'" name="').concat(n.id,'" id="').concat(n.id,'" ').concat(n.checked?'checked="true"':""," ").concat(n.disabled?'disabled="true"':"",` />
            <label for="`).concat(n.id,'" class="checkbox-label">').concat(n.translationKey?L.translate(n.translationKey,{locale:this.locale.name,language:this.language}):n.label,"</label><br/>");this.eventTypeContainer.insertAdjacentHTML("beforeend",a);var r=$(this.eventTypeContainer).find("#".concat(n.id));N.addAttributes($(this.eventTypeContainer).find("#".concat(n.id)),this,this.settings.attributes,"legend-".concat(n.id),!0),r.next("label").attr("for",r[0].id)}return this},renderMonthView:function(){var e=this;return this.monthViewContainer=this.element[0].querySelector(".calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(t){e.settings.onChangeView?e.settings.onChangeView(t):e.changeView(t.viewName)},this.monthView=new He(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth,disable:this.settings.disable,showLegend:this.settings.dayLegend!==null,legend:this.settings.dayLegend,hitbox:this.settings.hitbox,attributes:this.settings.attributes,firstDayOfWeek:this.settings.firstDayOfWeek,displayRange:{start:this.settings.displayRange.start,end:this.settings.displayRange.end,months:{showAbbr:this.settings.displayRange.months.showAbbr}}}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),N.addAttributes($(".calendar"),this,this.settings.attributes),N.addAttributes($(".calendar-monthview"),this,this.settings.attributes,"monthview"),this},renderWeekView:function(){var e=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(i){e.settings.onChangeView?e.settings.onChangeView(i):e.changeView(i.viewName)};var t=kn.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),n=kn.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return t.setHours(0,0,0,0),n.setHours(23,59,59,999),this.weekView=new tt(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:t,endDate:n,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,disable:this.settings.disable,showLegend:this.settings.dayLegend!==null,legend:this.settings.dayLegend,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip,attributes:this.settings.attributes,modalTemplate:this.settings.modalTemplate}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(i){e.monthView.selectDay(i.startDate,!1,!0)},this.weekView.renderAllEvents(),N.addAttributes($(".calendar-weekview"),this,this.settings.attributes,"weekview"),this},changeView:function(e){if(e!==this.activeView&&this.weekViewContainer){var t=this.currentDate(),n=new Date(t),i=new Date(t);switch(n.setHours(0,0,0,0),i.setHours(23,59,59,999),e){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",n=kn.firstDayOfWeek(n,this.settings.firstDayOfWeek),i=kn.lastDayOfWeek(n,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(t,!1,!0),this.weekView.selectHeader(t);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(t,!1,!0)}}},appendUpcomingEvent:function(e){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(e.daysUntil>0)){var t=Math.abs(e.daysUntil);if(!(t<0||t>this.settings.upcomingEventDays)){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-key",e.startKey),ue.addClass(n,"calendar-upcoming-event");var i="",a=L.formatDate(e.starts,{pattern:"d",locale:this.locale.name}),r=L.formatDate(e.ends,{pattern:"d",locale:this.locale.name}),o="".concat(L.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a===r?a:"".concat(a,"-").concat(r),", ").concat(L.formatDate(e.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(r,10)<parseInt(a,10)){var c=new Date(e.starts);c.setDate(1),c.setMonth(c.getMonth()+1);var u=c.getFullYear();o="".concat(L.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a," - ").concat(L.formatDate(c,{pattern:"MMMM",locale:this.locale.name})," ").concat(r,", ").concat(u)}i+=`
      <span class="calendar-upcoming-date">`.concat(o,`</span>
      <span class="calendar-upcoming-event-color `).concat(e.color||"",'">').concat(e.color||"",`</span>
      <span class="calendar-upcoming-description">`).concat(e.subject||"",`</span>
      <span class="calendar-upcoming-status-text">`).concat(e.status||"",`</span>
      <span class="calendar-upcoming-duration">`).concat(e.isDays?e.duration:e.durationHours," ").concat(e.durationUnits||"","</span>"),n.innerHTML=i,this.upcomingEventsContainer.appendChild(n),N.addAttributes($(n),this,this.settings.attributes,"upcoming-event-".concat(e.id))}}},renderEventDetails:function(e,t){if(this.settings.events&&this.activeView==="month"){var n=this.settings.events.filter(function(r){return r.id===e});if(n&&n.length!==0&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var i=$.extend(!0,{},n[0]);i.durationHours&&!i.isDays&&Jn.formateTimeString(i,this.locale,this.language),this.renderTmpl(i,this.settings.template,this.eventDetailsContainer,t>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(i,this.settings.mobileTemplate,this.eventDetailsMobileContainer,t>1);var a=$(this.eventDetailsContainer).data("accordion");a&&a.destroy(),this.eventDetailsMobileContainer&&this.translate(this.eventDetailsMobileContainer),this.translate(this.eventDetailsContainer)}}},translate:function(e){var t=this;$(e).find('[data-translate="text"]').each(function(n,i){var a=$(i);a.text(L.translate(a.attr("data-translate-key")||a.text(),{showAsUndefined:!1,showBrackets:!1,language:t.settings.language,locale:t.settings.locale}))})},renderSelectedEventDetails:function(){var e=this.getDayEvents();if(this.clearEventDetails(),e.events&&e.events.length!==0){for(var t=0;t<e.events.length;t++)this.renderEventDetails(e.events[t].id,e.events.length);$(".calendar .list-detail",this.element).css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),ue.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click"),$(".accordion-pane.no-transition",this.element).removeClass("no-transition")}},renderDay:function(e){this.monthView.selectDay(e);var t=new Date(this.currentDate()),n=new Date(this.currentDate());t.setHours(0,0,0,0),n.setHours(23,59,59,999),this.activeView==="day"&&this.weekView.showWeek(t,n),this.activeView==="week"&&(t=kn.firstDayOfWeek(t,this.settings.firstDayOfWeek),n=kn.lastDayOfWeek(t,this.settings.firstDayOfWeek),this.weekView.showWeek(t,n))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var e=[];if(!this.eventTypeContainer)return e;if(this.eventTree)return e=this.eventTree.data("tree").getUnselectedNodes().map(function(a){return a.data.id});for(var t=this.eventTypeContainer.querySelectorAll(".checkbox"),n=0;n<t.length;n++){var i=t[n];i.checked||e.push(i.getAttribute("name"))}return e},renderAllEvents:function(e){if(this.settings.onRenderMonth&&!e)return this.callOnRenderMonth(),this;var t=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var n=this.settings.events.slice(0);n.sort(function(r,o){return r.starts<o.starts?-1:r.starts>o.starts?1:0});for(var i=0;i<n.length;i++){var a=n[i];t.indexOf(a.type)>-1||this.renderEvent(a)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=t,this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents()),this},renderEvent:function(e){var t=this,n=L.newDateObj(e.starts),i=L.isIslamic(this.locale.name),a=ot.padDate(n.getFullYear(),n.getMonth(),n.getDate());if(i){var r=L.gregorianToUmalqura(n);a=ot.padDate(r[0],r[1],r[2])}var o=L.newDateObj(e.ends),c=ot.padDate(o.getFullYear(),o.getMonth(),o.getDate());if(i){var u=L.gregorianToUmalqura(o);c=ot.padDate(u[0],u[1],u[2])}var p=t.monthView.dayMap.filter(function(A){return A.key>=a&&A.key<=c});e.endKey=c,e.startKey=a,e=Jn.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes);for(var m=-1,v=0;v<t.monthView.dayMap.length;++v)if(t.monthView.dayMap[v].key>=a&&t.monthView.dayMap[v].key<=c){m=v;break}if(p.length===1&&t.appendEvent(p[0].elem[0],e,"event-day-start-end",m),p.length>1)for(var w=0;w<p.length;w++){var C=w===0?"event-day-start":"event-day-span";p.length-1===w&&(C="event-day-end"),t.appendEvent(p[w].elem[0],e,C,m+w)}this.appendUpcomingEvent(e,p,m)},removeAllEvents:function(){for(var e=this.monthViewContainer.querySelectorAll(".calendar-event-more"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var n=this.monthViewContainer.querySelectorAll(".calendar-event"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);for(var a=this.monthViewContainer.querySelectorAll(".calendar-event-spacer"),r=0;r<a.length;r++)a[r].parentNode.removeChild(a[r]);for(var o=0;o<this.monthView.dayMap.length;o++)this.monthView.dayMap[o].events=[]},appendEvent:function(e,t,n,i){var a,r,o,c,u=this,p=e.querySelectorAll(".calendar-event").length;if(i>-1&&(this.monthView.dayMap[i].events||(this.monthView.dayMap[i].events=[]),this.monthView.dayMap[i].events.push(t)),p>=3){var m=e.querySelector(".calendar-event-more"),v=function(z,V){z.setAttribute("data-count",V),z.innerHTML="<span>+ ".concat(V," ").concat(L.translate("More",{locale:u.locale.name,language:u.language}).replace("...",""),"</span>")};return m?v(m,parseInt(m.getAttribute("data-count"),10)+1):(c=document.createElement("span"),ue.addClass(c,"calendar-event-more"),v(c,1),e.querySelector(".day-container").appendChild(c),$(e).off("click.".concat(rt)).on("click.".concat(rt),".calendar-event-more span",function(){var z=u.monthView.dayMap[i].key;u.monthView.selectDay(z,!1,!0),u.changeView("day")})),this}c=document.createElement("a"),ue.addClass(c,"calendar-event",(a=t.cssClass)!==null&&a!==void 0?a:t.color,n),c.setAttribute("data-id",t.id),c.setAttribute("data-key",t.startKey),(((r=t.color)===null||r===void 0||r==null?void 0:r.substr(0,1))==="#"||t.color)&&["ruby","amber","emerald","azure","turqoise","amethyst","graphite","slate"].indexOf(t.color)<0&&(c.style.backgroundColor=t.color,c.classList.remove(t.color)),(((o=t.borderColor)===null||o===void 0||o==null?void 0:o.substr(0,1))==="#"||t.borderColor)&&(c.style.borderLeftColor=t.borderColor),c.innerHTML=`<div class="calendar-event-content">
      `.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",`
      <span class="calendar-event-title">`).concat(t.shortSubject||t.subject,`</span>
    </div>`);var w=this.monthViewContainer.querySelectorAll('.calendar-event.event-day-start[data-id="'.concat(t.id,'"]'));if(w[0])for(var C=w[0].parentNode.children,A=e.querySelector(".day-container").children.length;A<C.length;A++){var S=C[A].getAttribute("data-id");if(this.getString(S)===this.getString(t.id))break;if(!C[A].classList.contains("day-text")){var M=document.createElement("span");M.classList.add("calendar-event-spacer"),e.querySelector(".day-container").appendChild(M)}}if(e.querySelector(".day-container").appendChild(c),N.addAttributes($(c),this,this.settings.attributes,"event-".concat(t.id)),this.settings.iconTooltip!=="overflow"){var I=c.querySelector(".calendar-event-icon");I&&(typeof this.settings.iconTooltip=="function"?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.iconTooltip]&&(I.setAttribute("title",t[this.settings.iconTooltip]),$(I).tooltip({content:I.innerText})))}return this.settings.eventTooltip!=="overflow"&&(typeof this.settings.eventTooltip=="function"?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.eventTooltip]&&(c.setAttribute("title",t[this.settings.eventTooltip]),$(c).tooltip({content:c.innerText}))),t.shortSubject||this.settings.eventTooltip!=="overflow"&&this.settings.iconToolTip!=="overflow"||(c.setAttribute("title",t.subject),$(c).tooltip({beforeShow:function(z,V){var U=V[0].querySelector(".calendar-event-title"),G=V[0].querySelector(".calendar-event-icon"),J=G?G.querySelector(".icon").getAttribute("data-status"):"";U.offsetWidth>V[0].scrollWidth-(G?G.offsetWidth:0)?z("".concat(U.innerText).concat(J?" (".concat(L.translate(J,{locale:u.locale.name,language:u.language},!1),")"):"")):z(!1)}})),this},getString:function(e){return typeof e=="string"?e:e?e.toString():null},getEventTypeLabel:function(e){var t="";if(!e)return t;var n=this.settings.eventTypes.filter(function(i){return i.id===e});return n.length===1&&(t=n[0].label),t},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat(rt)).on("updated.".concat(rt),function(){e.updated()}),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat(rt)).on("monthrendered.".concat(rt),function(a,r){e.isSwitchingMonth=!0,e.modalVisible()&&e.removeModal(),e.settings.year=r.year,e.settings.month=r.month,e.renderAllEvents(),setTimeout(function(){e.isSwitchingMonth=!1},500)}),this.element.off("change.".concat(rt)).on("change.".concat(rt),".checkbox",function(){e.renderAllEvents(!0)}),$(this.monthViewContainer).off("selected.".concat(rt)).on("selected.".concat(rt),function(){e.renderSelectedEventDetails()}),this.eventTree&&this.eventTree.on("selected",function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e.renderAllEvents(!0)}).on("unselected",function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e.renderAllEvents(!0)}),this.element.off("click.".concat(rt,"-upcoming")).on("click.".concat(rt,"-upcoming"),".calendar-upcoming-event",function(a){var r=a.currentTarget.getAttribute("data-key");e.renderDay(r)}),this.element.off("contextmenu.".concat(rt)).on("contextmenu.".concat(rt),".calendar-event",function(a){a.stopPropagation();var r=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0},o=a.currentTarget.getAttribute("data-id"),c=e.settings.events.filter(function(p){return p.id===o});if(e.element.triggerHandler("contextmenu",{originalEvent:a,month:e.settings.month,year:e.settings.year,event:c[0]}),!N.isSubscribedTo(t.element[0],a,"contextmenu","calendar")&&!r()||(a.preventDefault(),t.closePrevPopupmenu(),!r()))return!0;var u=$(a.currentTarget);return u.popupmenu({attachToBody:!0,menuId:e.settings.menuId,eventObj:a,trigger:"immediate",offset:{y:5}}),u.off("selected.calendar").on("selected.calendar",function(p,m){if(t.settings.menuSelected&&t.settings.menuSelected(p,m,o),m.attr("data-action")==="delete-event"&&t.deleteEvent({id:o}),m.attr("data-action")==="show-event"){var v=this.getAttribute("data-key");t.monthView.selectDay(v)}}),!1});var n=0,i=!1;return this.element.off("click.".concat(rt,"-event")).on("click.".concat(rt,"-event"),".calendar-event",function(a){n=setTimeout(function(){if(!i){var r=a.currentTarget.getAttribute("data-id"),o=e.settings.events.filter(function(p){return p.id===r});if(!o||o.length===0)return;var c=$(a.currentTarget),u=c.find(".calendar-event-title");(a.currentTarget.classList.contains("event-day-span")||a.currentTarget.classList.contains("event-day-end"))&&(u=t.element.find('.event-day-start[data-id="'.concat(c.attr("data-id"),'"] .calendar-event-title'))),e.showModalWithCallback(o[0],!1,u),t.weekView&&t.activeView!=="month"||e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:o[0]})}i=!1},100)}),this.element.off("dblclick.".concat(rt,"-event")).on("dblclick.".concat(rt,"-event"),".calendar-event",function(a){clearTimeout(n),i=!0;var r=a.currentTarget.getAttribute("data-id"),o=e.settings.events.filter(function(c){return c.id===r});o&&o.length!==0&&e.element.trigger("eventdblclick",{month:e.settings.month,year:e.settings.year,event:o[0]})}),this.element.off("dblclick.".concat(rt)).on("dblclick.".concat(rt),"td",function(a){var r=a.currentTarget.getAttribute("data-key");if(r&&!e.isSwitchingMonth){var o=new Date(r.substr(0,4),r.substr(4,2)-1,r.substr(6,2)),c=N.extend({},e.settings.newEventDefaults);c.startKey=r,c.endKey=r,c.starts=o,c.ends=o,a.stopPropagation(),Jn.cleanEventData(c,!1,e.currentDate(),e.locale,e.language,e.settings.events,e.settings.eventTypes),e.showModalWithCallback(c,!0),e.element.triggerHandler("dblclick",{eventData:c,api:e})}}),this.element.find(".listview").off("click.".concat(rt,"-mobile")).on("click.".concat(rt,"-mobile"),function(a){var r=$(a.target).closest("li"),o=r.attr("data-id"),c=e.settings.events.filter(function(u){return u.id===o});c&&c.length!==0&&(e.showModalWithCallback(c[0],!1,r),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:c[0]}))}),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")})},callOnRenderMonth:function(){var e=this;this.settings.onRenderMonth(this.element,function(t,n){n&&n.length>0&&(e.settings.eventTypes=n,e.weekView&&(e.weekView.settings.eventTypes=n),e.renderEventLegend(),e.renderEventTypes()),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0),e.weekView&&(e.weekView.settings.events=t,e.weekView.renderAllEvents(!0)))},{api:e,month:this.settings.month,year:this.settings.year})},currentDate:function(){var e=this.isIslamic?this.monthView.currentDateIslamic:this.monthView.currentDate;return L.isValidDate(e)?e:new Date},getDayEvents:function(e){if(e||(e=this.currentDate()),typeof e=="string"||this.isRTL||(e=ot.padDate(e.getFullYear(),e.getMonth(),e.getDate())),L.isIslamic(this.locale.name)){var t=L.gregorianToUmalqura(e);e=ot.padDate(t[0],t[1],t[2])}var n=this.monthView.dayMap.filter(function(a){return a.key===e});this.activeView!=="month"&&(n=this.weekView.dayMap.filter(function(a){return a.key===e}));var i={date:this.monthView.currentDate,events:[]};return n.length===0?[]:(i.events=n[0].events,i.elem=n[0].elem,i)},renderTmpl:function(e,t,n,i){if(at(Xn)==="object"&&t){if(t instanceof $?t="".concat(t.html()):typeof t=="string"&&(ot.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Jn.getEventTypeColor(e,this.settings.eventTypes),e.startsLong=L.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=L.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(L.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(L.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(e.ends,{date:"hour",locale:this.locale.name})),L.isIslamic(this.locale.name)){var a=L.gregorianToUmalqura(new Date(e.starts)),r=L.gregorianToUmalqura(new Date(e.ends));e.startsLong=L.formatDate(a,{date:"long",locale:this.locale.name}),e.endsLong=L.formatDate(r,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(L.formatDate(a,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(a,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(L.formatDate(r,{date:"long",locale:this.locale.name})," ").concat(L.formatDate(r,{date:"hour",locale:this.locale.name}))}e.typeLabel=this.getEventTypeLabel(e.type);var o=Xn.compile(t,{event:e});n.classList.remove("has-only-one"),i?ue.append(n,o,"*"):(n.innerHTML=o,n.classList.add("has-only-one"))}},addEvent:function(e){Jn.cleanEventData(e,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e),this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents())},updateEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&(this.settings.events[n]=N.extend(!0,this.settings.events[n],e),Jn.cleanEventData(this.settings.events[n],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(e)},deleteEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&this.settings.events.splice(n,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(e)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},updateMonthDetails:function(e){e&&e!=null&&(e.dayLegend&&(e.showLegend=e.dayLegend!==null,e.legend=e.dayLegend),this.settings=N.mergeSettings(this.element[0],e,this.settings),this.monthView.updateMonthDetails(this.settings),this.renderEventLegend())},showEventModal:function(e,t,n){var i=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),ue.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),e=Jn.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(e||{},this.settings.modalTemplate,this.modalContents);var a=this.getDayEvents(),r=!0;a.elem=$(a.elem);var o=a.elem.index()===6?this.isRTL?"right":"left":this.isRTL?"left":"right";n||this.activeView!=="day"||(n=$(".week-view-header-wrapper"),o=this.isRTL?"left":"right"),n||(n=a.elem);var c=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:n,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:o},title:e.title||e.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:e.color,initializeContent:!1};n.off("hide.calendar").on("hide.calendar",function(){r?i.removeModal():(t(i.modalContents,e),i.element.trigger("hidemodal",{elem:i.modalContents,event:e}),i.removeModal(),r=!0)}).popover(c).off("show.calendar").on("show.calendar",function(u,p){i.element.trigger("showmodal",{elem:i.modalContents,event:e}),p.find("#isAllDay").off().on("click.calendar",function(m){$(m.currentTarget).prop("checked")?(p.find("#durationHours").prop("disabled",!0),p.find("#endsHourLocale").prop("disabled",!0),p.find("#startsHourLocale").prop("disabled",!0)):(p.find("#durationHours").prop("disabled",!1),p.find("#endsHourLocale").prop("disabled",!1),p.find("#startsHourLocale").prop("disabled",!1))}),p.find("#type").val(e.type).dropdown(),p.find("#comments").val(e.comments),p.find("#subject").focus(),p.find("button").on("click",function(m){var v=n.data("popover"),w=m.currentTarget.getAttribute("data-action");r=w!=="submit",v&&v.hide(!0)}),p.find(".datepicker").datepicker({locale:i.settings.locale,language:i.settings.language}),p.find(".timepicker").timepicker({locale:i.settings.locale,language:i.settings.language}),i.translate(p)}),$("#calendar-popup").one("tooltipafterplace.calendar",function(u,p){var m=p.element.find(".arrow"),v=parseInt(m.css("margin-top"),10);if(a.elem.parent().index()>=3){var w=parseInt(p.element.offset().top,10),C=w+p.element.height(),A=$("html").height()+10;if(C>A){var S=w-(C-A)-25;p.element.css("top","".concat(S,"px")),m.css("margin-top","".concat(v+(w-S)-18,"px"))}}else p.element.height()>580&&m.css("margin-top","".concat(v-18,"px"))}),this.activeElem=n}},showModalWithCallback:function(e,t,n){var i=this;this.showEventModal(e,function(a,r){for(var o=a.querySelectorAll("input, textarea, select"),c=0;c<o.length;c++)r[o[c].id]=o[c].getAttribute("type")==="checkbox"?o[c].checked:o[c].value;t?i.addEvent(r):i.updateEvent(r)},n)},modalVisible:function(){return document.querySelector(".calendar-event-modal")!==null},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),ue.remove(document.getElementById("calendar-popup")),ue.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e||(e={}),e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),e.locale||e.template||e.upcomingEventDays||e.mobileTemplate?(this.destroy().init(),this):(this.weekView&&e.events&&(this.weekView.settings.events=e.events),this.weekView&&e.eventTypes&&(this.weekView.settings.events=e.events),this.weekView&&e.weekViewSettings&&(this.weekView.settings=N.mergeSettings(this.element[0],e.weekViewSettings,this.weekViews.settings)),this.settings.displayRange.start&&this.settings.displayRange.end?this.monthView.showRange(this.settings.displayRange.start,this.settings.displayRange.end):this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&e.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element&&this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],rt),this}},$.fn.calendar=function(e){return this.each(function(){var t=$.data(this,rt);t?t.updated(e):t=$.data(this,rt,new _t(this,e))})};var vt="circlepager",rn={slidesToShow:1,startingSlide:null,loop:!1,attributes:null,showArrows:!1,footerContainment:!1,hideBulletsOnOverflow:!1,pageSelectorInputText:null};function ei(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,rn),this.init()}ei.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView(),this.addAttributes())},setElements:function(){var e=this.settings;this.setResponsiveSlidesToShow(),this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=e.slidesToShow,this.slides=[],this.isVisible=!0;for(var t=0,n=this.slidesJQ.length;t<n;t++)this.slides.push({node:$(this.slidesJQ[t])});this.activeIndex=e.startingSlide!==null&&e.startingSlide>-1&&e.startingSlide<this.slides.length?e.startingSlide:0,N.addAttributes(this.element,this,this.settings.attributes)},createControls:function(){for(var e,t,n,i,a,r,o,c,u,p=this.slides.length,m={bullets:""},v=[],w=0,C=0,A=p;C<A;C+=this.slidesToShow){t="",w++,c=this.slidesToShow===1||p-C==1,i=L.translate(c?"SlideOf":"SlidesOf"),n=c?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var S=0;S<this.slidesToShow&&C+S<p;S++)t+="".concat(C+S+1,", ");i=i.replace(c?"{1}":"{2}",p),n=n.replace(c?"{1}":"{2}",p),o=(t=t.slice(0,-2)).lastIndexOf(","),r=t.substr(o+2),c?(u="",(e=this.slides[C].node).is(".is-disabled, [disabled]")&&!e.is('[disabled="false"]')&&(u=' disabled tabindex="-1"',this.slides[C].isDisabled=!0),e.is(".active")&&this.settings.startingSlide===null&&u===""&&(this.activeIndex=C),i=(a=e.attr("data-button-text"))&&a.length?a:i.replace("{0}",t),n=n.replace("{0}",t)):(t=t.substr(0,o),i=i.replace("{1}",r).replace("{0}",t),n=n.replace("{1}",r).replace("{0}",t)),n=n.toLowerCase().replace(/[\s,--]+/g,"-"),m.bullets+='<a href="'.concat(n,'" class="control-button hyperlink hide-focus is-ripple"').concat(u,'><span class="audible">').concat(i,"</span></a>"),v.push({href:n,text:i,isDisabled:u})}var M=$(".btn-previous",this.element),I=$(".btn-next",this.element),z=this.element.width();this.isBulletsNav=z>44*w;var V=!this.isBulletsNav;if(!this.isBulletsNav&&this.settings.hideBulletsOnOverflow)M.length||(m.previous=""+`<button class="btn-previous" type="button">
            `.concat($.createIcon("left-arrow"),`
            <span class="audible"> `).concat(L.translate("Previous"),`</span>
          </button>`)),I.length||(m.next=""+`<button class="btn-next" type="button">
            `.concat($.createIcon("right-arrow"),`
            <span class="audible">`).concat(L.translate("Next"),`</span>
          </button>`));else{var U;(U=this.pagerApi)===null||U===void 0||U==null||U.destroy();var G=$(".controls .btn-controls-previous, .btn-controls-next, .pager-container",this.element);M.add(I).add(G).remove(),this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls").remove(),this.settings.showArrows&&(V=z<44*w+100,m.controlsPrevious=""+`<button class="btn-icon btn-controls-previous" type="button">
            `.concat($.createIcon("previous-page"),`
            <span class="audible"> `).concat(L.translate("Previous"),`</span>
          </button>`),m.controlsNext=""+`<button class="btn-icon btn-controls-next" type="button">
            `.concat($.createIcon("next-page"),`
            <span class="audible">`).concat(L.translate("Next"),`</span>
          </button>`))}if(this.activeIndex>0&&this.activeIndex>w-1&&(this.activeIndex=w-1),w>1){var J=!0;m.all='<div class="controls circlepager-controls">',m.previous||m.next?(J=!1,m.all+="".concat(m.bullets,"</div>").concat(m.previous||"").concat(m.next||"")):V?(J=!1,m.all+='<div class="pager-container" data-init="false"></div></div>'):m.all+="".concat(m.controlsPrevious||"").concat(m.bullets).concat(m.controlsNext||"","</div>"),this.element.append(m.all).find("button").button(),J&&this.SetFooterContainment(),this.pagerApi=this.element.find(".pager-container").pager({type:"standalone",dataset:v,pagesize:1,showPageSizeSelector:!1,showPageSelectorInput:!0,footerContainmentClass:"footer-circlepager",footerContainment:this.settings.footerContainment,pageSelectorInputText:this.settings.pageSelectorInputText}).data("pager"),this.setPagerButtonsState()}},SetFooterContainment:function(){var e=this;this.element.closest(".card, .widget").length&&this.settings.footerContainment&&["widget","card"].forEach(function(t){var n=e.element.closest(".".concat(t,"-content"));if(n.length){var i=n.next(".".concat(t,"-footer"));i.find(".circlepager-controls").remove(),i.length||(i=$('<div class="'.concat(t,'-footer footer-circlepager"></div>')).insertAfter(n)),e.element.find(".circlepager-controls").appendTo(i)}})},setPagerButtonsState:function(){if(this.pagerApi){var e={prevAndFirst:this.pagerApi.state.activePage>1,nextAndLast:this.pagerApi.state.activePage<this.pagerApi.state.pages};this.pagerApi.updated({enableFirstButton:e.prevAndFirst,enablePreviousButton:e.prevAndFirst,enableNextButton:e.nextAndLast,enableLastButton:e.nextAndLast,activePage:this.pagerApi.state.activePage})}},isVisibleInContainer:function(e){if(e&&e[0]){var t=e[0].getBoundingClientRect(),n=this.element[0].getBoundingClientRect();return t.left>n.left&&t.left<n.left+n.width&&t.top>n.top&&t.top<n.top+n.height}return-1},updateSlidesToShow:function(e){if(this.isActive)return this.settings.slidesToShow=e||1,this.updated(),this},setResponsiveSlidesToShow:function(){var e=this.element.width();this.resSlidesToShow=this.resSlidesToShow||this.settings.slidesToShow,e<300&&this.settings.slidesToShow>1?this.settings.slidesToShow=1:this.settings.slidesToShow=this.resSlidesToShow},responsiveSlidesToShow:function(e){var t=this;this.isActive&&(this.setResponsiveSlidesToShow(),this.slidesToShow=e||this.settings.slidesToShow,this.hideSlides(),this.element.parents(".card-content").addClass("unset-overflow"),this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout(function(){t.createControls(),t.handleEvents(),t.initActiveSlide(),t.showCollapsedView(),t.removeOverflowedControls()},0))},show:function(e){if(this.isActive){e=e!==void 0?e:this.activeIndex,this.activeIndex=e;var t=this.slides.length,n=e>-1?"".concat(L.isRTL()?100*(t-e-1):0-100*e,"%"):0;this.controlButtons.removeClass("is-active").eq(e).addClass("is-active"),this.container[0].style.left=n,!this.isBulletsNav&&this.settings.hideBulletsOnOverflow?(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(e).find("span").removeClass("audible")):(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(e).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var e,t=this;if(e=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[e].isDisabled)return setTimeout(function(){t.prev()},0),this.activeIndex=e,!1;this.show(e)},next:function(){var e,t=this;if(e=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[e].isDisabled)return setTimeout(function(){t.next()},0),this.activeIndex=e,!1;this.show(e)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var e=0,t=this.slidesJQ.length;e<t;e++)this.slidesJQ[e].style.width="".concat(100/this.slidesToShow/this.slides.length,"%"),this.element.parents(".card-content").removeClass("unset-overflow"),this.showSlides(),this.slidesJQ.addClass("transition");this.show()}},removeOverflowedControls:function(){var e,t=this.controlButtons.parent(),n=(e=t[0])===null||e===void 0||e==null?void 0:e.nextElementSibling;t.length>1&&n&&n.remove()},addAttributes:function(){for(var e=0,t=this.controlButtons.length;e<t;e++){var n=$(this.controlButtons[e]);N.addAttributes(n,this,this.settings.attributes,"control-".concat(e+1))}},showSlides:function(){return this.slidesJQ.addClass("is-visible"),this},hideSlides:function(){return this.slidesJQ.removeClass("is-visible"),this},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show();var e=this.controlButtons.hasClass("is-active"),t=this.controlButtons.find(".pager-toolbar").length>0;(e||t)&&(this.showSlides(),this.slidesJQ.addClass("transition"))},setRipple:function(e,t){var n;if(e&&(n=e.classList)!==null&&n!==void 0&&n?.contains("is-ripple")){var i=t&&t.touches?t.touches[0]:t||{},a=e.getBoundingClientRect(),r=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),o=i.clientX?i.clientX-a.left:e.offsetWidth/2,c=i.clientY?i.clientY-a.top:e.offsetHeight/2,u=e.style.cssText,p=e.getAttribute("data-hex"),m=ut.getContrastColor(p),v={ripple:ut.getLuminousColorShade(p,m==="white"?"0.3":"-0.3"),elem:ut.hexToRgba(p,.7)},w=p!==null?"--ripple-background: ".concat(v.ripple,"; background-color: ").concat(v.elem,"; "):"";e.style.cssText="".concat(w,"--s: 0; --o: 1"),e.offsetTop,e.style.cssText="".concat(w,"--t: 1; --o: 0; --d: ").concat(r,"; --x:").concat(o,"; --y:").concat(c,";"),$(e).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(C){var A;(C.propertyName||((A=C.originalEvent)===null||A===void 0||A==null?void 0:A.propertyName))==="transform"&&(e.style.cssText=u)})}},unbind:function(){var e,t=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");if(this.controlButtons&&!this.controlButtons.length&&(this.controlButtons=t.find(".control-button")),(e=this.pagerApi)===null||e===void 0||e==null||e.destroy(),$("body").off("resize.circlepager"),this.element.find(".pager-container").off("page.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons){for(var n=0,i=this.controlButtons.length;n<i;n++)$(this.controlButtons[n]).off("click.circlepager");this.controlButtons.off("click.circlepager keydown.circlepager")}return $(".btn-previous, .btn-controls-previous",this.element).add(t.find(".btn-controls-previous")).off("click.circlepager"),$(".btn-next, .btn-controls-next",this.element).add(t.find(".btn-controls-next")).off("click.circlepager"),$(".controls",this.element).remove(),this.element.closest(".card, .widget").find(".footer-circlepager").remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,rn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],vt)},handleEvents:function(){var e=this,t=this,n=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");this.controlButtons=$(".control-button",this.element),this.controlButtons.length||(this.controlButtons=n.find(".control-button")),$(".btn-previous, .btn-controls-previous",this.element).add(n.find(".btn-controls-previous")).off("click.circlepager").on("click.circlepager",function(o){e.prev(),o.stopImmediatePropagation()}),$(".btn-next, .btn-controls-next",this.element).add(n.find(".btn-controls-next")).off("click.circlepager").on("click.circlepager",function(o){e.next(),o.stopImmediatePropagation()});for(var i=function(o){var c=$(e.controlButtons[o]);c.hideFocus(),c.off("click.circlepager").on("click.circlepager",function(u){u.preventDefault(),e.slides[o].isDisabled||(e.setRipple(c[0],u),e.show(o))})},a=0,r=this.controlButtons.length;a<r;a++)i(a);this.element.off("focus.circlepager","*").on("focus.circlepager","*",function(o){var c=!1;if(!t.isVisibleInContainer($(this))){for(var u=t.element.find(":focusable"),p=0,m=u.length;p<m;p++)if(t.isVisibleInContainer(u.eq(p))){u.eq(p).focus(),c=!0;break}}if(o.stopPropagation(),c)return!1}),this.element.off("keydown.circlepager","*").on("keydown.circlepager","*",function(o){var c=!1,u=o.which||o.keyCode||o.charCode||0,p=$(":focusable"),m=p.index(this);if(u===9)if(o.shiftKey){for(var v=m-1;v>=0;v--)if(t.element.has(p.eq(v)).length<1||t.isVisibleInContainer(p.eq(v))){p.eq(v).focus(),c=!0;break}}else t.isVisibleInContainer(p.eq(m+1))||(t.controlButtons.first().focus(),c=!0);if(o.stopPropagation(),c)return!1}),this.controlButtons.off("keydown.circlepager").on("keydown.circlepager",function(o){var c=!1,u=o.which||o.keyCode||o.charCode||0,p=L.isRTL();if([37,39].indexOf(u)!==-1&&(t.isFocus=!0,o.altKey?u===37&&!p||u===39&&p?t.first():t.last():(!p&&u===37||p&&u===39?t.prev():t.next(),c=!0)),c)return o.preventDefault(),o.stopPropagation(),e.setRipple(o.currentTarget,o),!1}),$("body").off("resize.circlepager").on("resize.circlepager",Va(function(){t.responsiveSlidesToShow()},0)),t.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",function(){t.responsiveSlidesToShow()}),this.element.find(".pager-container").off("page.circlepager").on("page.circlepager",function(o,c){e.setPagerButtonsState(),e.show(c.activePage-1)})}},$.fn.circlepager=function(e){return this.each(function(){var t=$.data(this,vt);t?t.updated(e):t=$.data(this,vt,new ei(this,e))})},$.fn.calendartoolbar=function(e){return this.each(function(){var t=$.data(this,Ja);t?t.updated(e):t=$.data(this,Ja,new vs(this,e))})};var Lt="compositeform",ki={breakpoint:"phone-to-tablet",trigger:null,expandedText:L.translate("ShowLess"),collapsedText:L.translate("ShowMore")};function li(e,t){this.settings=N.mergeSettings(e,t,ki),this.element=$(e),this.init(),Ss("CompositeForm")}li.prototype={init:function(){return this.build().handleEvents()},build:function(){var e=this.element[0].classList;e.contains("composite-form")||e.add("composite-form");var t=this.element.find(".expandable-area");return t.length?(this.hasSummary=!0,this.expandableArea=t,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var e=this;function t(){var n=e.expandableAreaAPI.isExpanded();e.setExpanderText(e.settings[n?"expandedText":"collapsedText"])}return $("body").off("resize.".concat(Lt)).on("resize.".concat(Lt),function(n){e.checkResponsive(n)}),this.element.on("updated.".concat(Lt),function(){e.updated()}),this.hasSummary&&this.expandableArea.on("expand.".concat(Lt),t).on("collapse.".concat(Lt),t),this},checkResponsive:function(){var e=this.element[0].classList;Yt.isBelow(this.settings.breakpoint)?e.add("is-in-responsive-mode"):(e.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(e){if(this.hasSummary&&e instanceof String&&e.length){var t=this.expander.find("span");t||(t=this.expander),t.text(e)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat(Lt)),this.element.off("updated.".concat(Lt)),this.hasSummary&&this.expandableArea.off("expand.".concat(Lt," collapse.").concat(Lt)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Lt)}},$.fn.compositeform=function(e){return this.each(function(){var t=$.data(this,Lt);t?t.updated(e):t=$.data(this,Lt,new li(this,e))})};var Oi="contextualactionpanel",_n={content:null,initializeContent:!0,title:"Contextual Action Panel",cssClass:null,detailRefId:void 0,modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,title:void 0,trigger:"click",useFlexToolbar:!1}},La=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function zn(e){var t={showCloseButton:"showCloseBtn"};return La.forEach(function(n){if([null,void 0].indexOf(e[n])===-1){var i=n;e.modalSettings||(e.modalSettings={}),t[n]?(i=t[n],e.modalSettings[i]=e[n]):e.modalSettings[n]=e[n],delete e[n],Pn("settings.modalSettings.".concat(i),"settings.".concat(n))}}),e}function ti(e,t){this.settings=N.mergeSettings(e,t,_n),this.settings=zn(this.settings),this.element=$(e),this.init()}ti.prototype={get modalAPI(){var e;return this.panel&&this.panel.length&&(e=this.panel.data("modal")),e},get toolbarAPI(){var e;return this.toolbar&&this.toolbar.length&&(e=this.toolbar[0].classList.contains("flex-toolbar")?this.toolbar.data("toolbar-flex"):this.toolbar.data("toolbar")),e},get buttonsetAPI(){var e=N.getArrayFromList(this.panel[0].querySelectorAll(".buttonset"));return $(e[0]).data("buttonset")},init:function(){this.setup().build().handleEvents()},setup:function(){var e,t=this.element.next(".contextual-action-panel"),n=this.id;return typeof dataModal=="string"&&(e=$("#".concat(n))).length&&(t=e),this.element.closest(".popupmenu").length===1&&(t=this.element.closest(".popupmenu").next(".contextual-action-panel")),t[0]&&(t[0].style.display="none",t.addClass("is-animating"),this.panel=t),this},build:function(){var e,t,n=this,i=this.settings.content;if(this.id=((e=this.settings)===null||e===void 0||(e=e?.modalSettings)===null||e===void 0||e==null?void 0:e.id)||(i==null||i==null?void 0:i.attr("id"))||N.uniqueId(this.element,"contextual-action-modal"),(t=this.settings)!==null&&t!==void 0&&(t=t?.modalSettings)!==null&&t!==void 0&&t?.id||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(i instanceof jQuery){if(i.is(".contextual-action-panel")?this.panel=i:(i.wrap('<div class="contextual-action-panel"></div>'),this.panel=i.parent()),this.panel.addClass("modal").appendTo("body"),i.is("iframe"))return i.ready(function(){n.completeBuild(),i.show()}),n;i.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(i,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.settings.modalSettings.cssClass&&this.panel.addClass("".concat(this.settings.modalSettings.cssClass)),this.completeBuild(),this},completeBuild:function(){var e,t,n=!1,i=!1,a=!0;this.title=this.settings.modalSettings.title?this.settings.modalSettings.title:this.settings.title,this.panel.find("svg").icon(),this.panel.find(".modal-content").length===0&&((e=this.panel.children()).is("iframe")&&(t=e.contents(),this.toolbar=t.find(".toolbar, .flex-toolbar"),n=!0),n||(e.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body '.concat(this.settings.detailRefId!==void 0?"padding-x-16 has-back-button":"",'"></div>')),this.panel.addClass("modal")));var r=this.panel.find(".modal-header");r.length===0&&(r=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=r;var o=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset").first();if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar").first()),!this.toolbar.length){if(a=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach(function(G){G.type==="input"&&(i=!0)}),this.settings.title&&this.settings.modalSettings.centerTitle||this.settings.modalSettings.title&&this.settings.modalSettings.centerTitle){var c=i?'<div class="toolbar-section search"></div>':"",u=`<div class="flex-toolbar">
          <div class="toolbar-section static"></div>
          <div class="toolbar-section title center-text">
            <h2>`.concat(this.title,`</h2>
          </div>
          `).concat(c,`
          <div class="toolbar-section buttonset static"></div>
        </div>`);this.toolbar=$(u)}else if(!o.length){var p=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",m=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.title,"</h2></div>"):"",v=this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",w='<div class="'.concat(v,'"></div>'),C=this.settings.modalSettings.useFlexToolbar&&i?'<div class="toolbar-section search"></div>':"",A='<div class="'.concat(p,`">
          `).concat(m,`
          `).concat(C,`
          `).concat(w,`
        </div>`),S=$(A);S.appendTo(this.panel.find(".modal-header")),this.toolbar=S,o=S.children(".buttonset")}}if(this.toolbar.appendTo(this.header),!a){o&&(o.length||this.settings.modalSettings.centerTitle)||(o=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var M=this.toolbar.find(".title");if(!M.length){var I=this.settings.modalSettings.centerTitle?" center-text":"";M=$(`
          <div class="toolbar-section title`.concat(I,`">
            <h2>`).concat(this.title,`</h2>
          </div>
        `)),o?M.insertBefore(o):this.toolbar.prepend(M)}M.length||(M=$(`
          <div class="title">
            `.concat(this.title,`
          </div>
        `)),this.toolbar.prepend(M))}if(n||this.panel.detach().appendTo("body"),this.element.attr("data-modal")||this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var z=L.translate("Close");if(this.closeButton=$(`
        <button class="btn-close" type="button" title="`.concat(z,`">
          `).concat($.createIcon("close"),`
          <span class="audible">`).concat(z,`</span>
        </button>
      `)),this.settings.modalSettings.useFlexToolbar){var V=$('<div class="toolbar-section static"></div>').append(this.closeButton),U=this.toolbar.find(".toolbar-section.more");V.insertAfter(U.length?U:o)}else o.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),N.fixSVGIcons(this.element),this},handleEvents:function(){var e=this,t=this,n="#".concat(t.settings.detailRefId);function i(a){t.element.triggerHandler(a.type)}return this.panel.find(n).on("click",function(a){a.stopPropagation(),t.showContentDetail(),console.log("click");var r=t.header.find(".go-back");$(r).on("click",function(o){o.stopPropagation(),t.hideContentDetail()})}),this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",function(a){i(a),t.buildContent(),t.panel.removeClass("is-animating")}).off("close.contextualactionpanel").on("close.contextualactionpanel",function(a){i(a)}).off("beforeclose.contextualactionpanel").on("beforeclose.contextualactionpanel",function(a){i(a)}).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",function(a){t.settings.initializeContent&&$(e).initialize(),i(a)}).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",function(){if(t.toolbar&&t.toolbar.trigger("recalculate-buttons"),t.toolbar.length){var a=t.toolbar.find(".buttonset > .is-selected");if(a.length||(a=t.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(a=a.children(".searchfield")),!a.length&&t.toolbar.is(".flex-toolbar"))return void(a=t.toolbar.find("button").first()).focus();var r=t.toolbar.data("toolbar");r&&r.setActiveButton(a,!0)}t.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),N.fixSVGIcons(t.panel)}),t.closeButton&&t.closeButton.length&&t.closeButton.on("click.contextualactionpanel",function(){t.handleToolbarSelected()}),this},buildContent:function(){if(this.settings.detailRefId!==void 0){var e=L.isRTL()?"-32px":"32px",t=this.panel.find(".content-main").width()+16;this.panel.find(".modal-body").width(t),this.panel.find(".content-main").css("transform","translateX(0)"),this.panel.find(".content-detail").css("transform","translateX(".concat(e,")")),this.panel.find(".content-detail").css("display","none")}},showContentDetail:function(){var e=this;this.showContentDetailFlag=!0;var t=this.panel.find(".content-main").width(),n=t+32;t=L.isRTL()?Math.abs(t):-Math.abs(t),n=L.isRTL()?Math.abs(n):-Math.abs(n),this.showContentDetailFlag&&(this.panel.find(".content-detail").css("display","flex"),setTimeout(function(){e.panel.addClass("show-content-detail"),e.panel.find(".content-main").css("transform","translateX(".concat(n,"px)")),e.panel.find(".content-detail").css("transform","translateX(".concat(t,"px)"))},50)),this.addBackButton()},hideContentDetail:function(){var e=this;this.showContentDetailFlag=!1;var t=L.isRTL()?"-32px":"32px";this.panel.removeClass("show-content-detail"),this.header.removeClass("has-back-button"),this.header.find(".go-back-button").remove(),this.panel.find(".content-main").css("transform","translateX(0)"),this.panel.find(".content-detail").css("transform","translateX(".concat(t,")")),setTimeout(function(){e.panel.find(".content-detail").css("display","none")},50)},addBackButton:function(){this.header&&(this.header.addClass("has-back-button"),this.header.prepend(`
      <div class="go-back-button">
        <button id="go-back" class="btn-icon go-back btn-system" type="button">
          <span class="audible">Show navigation</span>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-arrow-left"></use>
          </svg>
        </button>
      </div>
      `))},handleToolbarSelected:function(){this.close(!0)},teardown:function(){var e=this,t=e.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeclose.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),t.children("*:not(.searchfield)").off("click.contextualactionpanel"),t.children(".btn-menu").each(function(){var n=$(this).data("popupmenu");n&&n.destroy()}),e.header&&e.header.remove(),e.panel.find(".modal-body").children().first().unwrap().unwrap(),e.element.removeAttr("data-modal"),e.closeButton&&e.closeButton.length&&(e.closeButton.off("click.contextualactionpanel"),delete e.closeButton),e.element.trigger("afterteardown")},close:function(){var e,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.settings.modalSettings.trigger==="immediate"&&(e=!0),this.modalAPI&&this.modalAPI.close(e,!1,t)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this.settings=zn(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],Oi),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){ca.destroyAll(!0)}},$.fn.contextualactionpanel=function(e){return this.each(function(){var t,n,i=e==null||(t=e?.modalSettings)===null||t===void 0||t==null?void 0:t.id;!i&&e!=null&&e?.content&&(e==null||e==null?void 0:e.content)instanceof jQuery&&(i=e==null||(n=e?.content)===null||n===void 0||n==null?void 0:n.attr("id"));var a=ca.findById(i);a?a.updated(e):$.data(this,Oi,new ti(this,e))})};var Wi="timepicker",Ir=["standard","range"],ur=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:Ir[0],roundToInterval:!0,parentElement:null,returnFocus:!0,attributes:null,tabbable:!0,hourRange:[0,24]}};function Pa(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ur),this.init()}Pa.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=L.getLocale(this.settings.language),n=L.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=L.cultures[i]||L.currentLocale,e.language=a||e.settings.language||e.locale.language||null,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents().addAttributes()}),this},setCurrentCalendar:function(){return this.currentCalendar=L.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.settings.timeFormat===void 0&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this.build(),this},setup:function(){function e(i,a){(!a||["minute","second"].indexOf(a)<0)&&(a="minute");var r=ur()["".concat(a,"Interval")];if(i===void 0||isNaN(i))return r;var o=parseInt(i,10);return o>0&&o<60?o:r}function t(i){return i===!0}var n;return this.id="".concat(N.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=t(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=e(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(n=parseInt(this.element.attr("data-force-hour-mode"),10)===24?"HH:mm":this.settings.timeFormat)&&n.toUpperCase().match("H")&&n.match("mm")?n:ur().timeFormat,this.settings.minuteInterval=e(this.settings.minuteInterval,"minute"),this.settings.secondInterval=e(this.settings.secondInterval,"second"),this.settings.mode=function(i){return $.inArray(i,["standard","range"])>-1?i:ur().mode}(this.settings.mode),this.settings.roundToInterval=t(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){if(this.setup(),this.element.attr("autocomplete","off"),this.settings.parentElement)return this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this;var e=this.element.next();return e.is("button.trigger")?this.trigger=e:this.trigger=$(`<button class="btn-icon trigger" type="button">
        <span class="audible"></span>
        `.concat($.createIcon("clock"),`
      </button>`)).insertAfter(this.element),this.element.is(":disabled")&&this.disable(),this.makeTabbable(!this.element.is(":disabled")&&this.element.attr("tabindex")!=="-1"&&this.settings.tabbable),this.addAria().addMask().handleEvents().roundMinutes(),this},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(L.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>"));var e=L.translate("TimepickerTriggerButton");return this.trigger.children("span.audible").text(e),this},addAttributes:function(){N.addAttributes(this.element,this,this.settings.attributes),N.addAttributes(this.trigger,this,this.settings.attributes,"trigger")},handleKeys:function(){var e=this;this.element.on("keydown.timepicker",function(t){var n=!1;return t.which===27&&e.isOpen()&&(n=!0,e.closeTimePopup()),t.which!==40||e.isOpen()||(n=!0,e.openTimePopup()),!n||(t.stopPropagation(),t.preventDefault(),!1)})},handleBlur:function(){var e=this;this.element.on("blur.timepicker",function(){e.roundMinutes(),setTimeout(function(){e.isOpen()&&e.popup.find(":focus").length===0&&e.closeTimePopup()},20)})},is24HourFormat:function(e){return e||(e=this.settings.timeFormat),!!e&&(e.match("H")||[]).length>0},hourText:function(e){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&e<10?"0":"")+e},hasSeconds:function(e){return e||(e=this.settings.timeFormat),(e.match("ss")||[]).length>0},hasDayPeriods:function(e){return e||(e=this.settings.timeFormat),(e.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(ot.toBoolean(this.settings.roundToInterval)){var e=this.element.val(),t=this.getTimeSeparator(),n=e?e.split(t):[],i=this.settings.minuteInterval;if(n[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var a=n[1].split(" ");n[1]=a[0],a[1]&&n.push(a[1])}if(n[1]=parseInt(n[1],10),n[1]%i!=0){n[1]=Math.round(n[1]/i)*i,n[1]=n[1].toString(),n[1]=(n[1].length<2?"0":"")+n[1],n[1]==="60"&&(n[1]="00",n[0]=(parseInt(n[0],10)+1).toString());var r="".concat(n[0]+t+n[1]," ").concat(n[2]?n[2]:"");this.element.val(r)}}}},addMask:function(){this.element.data("mask")&&at(this.element.data("mask"))==="object"&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var e={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.addedValidation=!1,this.element[0].getAttribute("data-validate")||(this.addedValidation=!0,this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate()),e&&this.element.mask(e),this},getMaxHourRange:function(e,t,n){var i=this,a=n||e.period;return t?a==="AM"?i.settings.hourRange[1]>12?12:i.settings.hourRange[1]:i.settings.hourRange[1]>12?i.settings.hourRange[1]-12:12:i.settings.hourRange[1]},buildStandardPopup:function(){var e,t=this,n=$('<div class="timepicker-popup-content"></div>'),i=this.getTimeSeparator(),a="";this.initValues=t.getTimeFromField();var r=$('<div class="time-parts"></div>').appendTo(n),o=this.is24HourFormat(),c=this.hasSeconds(),u=this.hasDayPeriods(),p=o?0:1,m=o?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,`" data-options="{'noSearch': 'true'}" class="hours dropdown"></select>`));p<m&&(e="",!(p>t.getMaxHourRange(this.initValues,u)));)parseInt(t.initValues.hours,10)===p&&(e=" selected"),t.hourSelect.append($("<option".concat(e,">").concat(t.hourText(p),"</option>"))),p++;var v=$('<div class="time-part"></div>');v.append($('<label for="'.concat(this.hoursId,'">').concat(L.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),v.append(this.hourSelect),v.append($('<span class="label colons">'.concat(i,"</span>"))),r.append(v);var w=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,`" data-options="{'noSearch': 'true'}" class="minutes dropdown"></select>`));w<=59;)a=w<10?"0".concat(w):w,e="",parseInt(t.initValues.minutes,10)===w&&(e=" selected"),t.minuteSelect.append($("<option".concat(e,">").concat(a,"</option>"))),w+=t.settings.minuteInterval;this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(t.initValues.minutes,"</option>")));var C=$('<div class="time-part"></div>');if(C.append($('<label for="'.concat(this.minutesId,'">').concat(L.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),C.append(this.minuteSelect),c&&C.append($('<span class="label colons">'.concat(i,"</span>"))),r.append(C),c){var A=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,`" data-options="{'noSearch': 'true'}" class="seconds dropdown"></select>`));A<=59;)a=A<10?"0".concat(A):A,e="",(parseInt(t.initValues.seconds,10)===A||!t.initValues.seconds&&a==="00")&&(e=" selected"),this.secondSelect.append($("<option".concat(e,">").concat(a,"</option>"))),A+=t.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(t.initValues.seconds,"</option>")));var S=$('<div class="time-part"></div>');S.append($('<label for="'.concat(this.secondsId,'">').concat(L.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),S.append(this.secondSelect),r.append(S)}if(!o&&u){this.periodSelect=$('<select id="'.concat(this.periodId,`" data-options="{'noSearch': 'true'}" class="period dropdown"></select>`)),r.append($('<span class="label colons"></span>'));for(var M=this.currentCalendar.dayPeriods,I=0,z=new RegExp(t.initValues.period,"i");I<2;)e="",z.test(M[I])&&(e=" selected"),this.periodSelect.append($('<option value="'.concat(M[I],'"').concat(e,">").concat(M[I],"</option>"))),I++;var V=$('<div class="time-part"></div>');V.append($('<label for="'.concat(this.periodId,'">').concat(L.translate("Period",{locale:this.locale.name,language:this.language}),"</label>"))),V.append(this.periodSelect),r.append(V)}if(this.settings.parentElement)this.settings.parentElement.append(n),t.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{n.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(L.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var U=this.element,G=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(G="center",U=this.element.next(".icon, .trigger")),this.trigger.popover({content:n,trigger:"immediate",placement:"bottom",placementOpts:{parent:U,parentXAlignment:G,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",function(J,te){t.afterShow(te)}).on("hide.timepicker",function(){t.settings.returnFocus&&t.element.focus()})}this.trigger.data("popover")&&(t.popup=this.trigger.data("popover").tooltip,t.popup.addClass("timepicker-popup"))},afterShow:function(e){var t=this;e.find("button").button();var n=this.hourSelect.data("dropdown");this.hourSelect.val(this.initValues.hours),n.pseudoElem.find("span").text(this.initValues.hours),n.renderPseudoElemLabel(),N.addAttributes(n.wrapper.find(".dropdown"),this,this.settings.attributes,"hours");var i=this.minuteSelect.data("dropdown");if(this.minuteSelect.val(this.initValues.minutes),i.pseudoElem.find("span").text(this.initValues.minutes),i.renderPseudoElemLabel(),N.addAttributes(i.wrapper.find(".dropdown"),this,this.settings.attributes,"minutes"),this.secondSelect){var a=this.secondSelect.data("dropdown");this.secondSelect.val(this.initValues.seconds),a.pseudoElem.find("span").text(this.initValues.seconds),a.renderPseudoElemLabel(),N.addAttributes(a.wrapper.find(".dropdown"),this,this.settings.attributes,"seconds")}if(t.hasDayPeriods()){var r=this.periodSelect.data("dropdown");this.periodSelect.val(this.initValues.period),r.pseudoElem.find("span").text(this.initValues.period),r.renderPseudoElemLabel(),N.addAttributes(r.wrapper.find(".dropdown"),this,this.settings.attributes,"period")}e.find("div.dropdown").first().focus(),e.find(".set-time").off("click.timepicker").on("click.timepicker",function(o){o.preventDefault(),t.setTimeOnField(),t.closeTimePopup()}),N.addAttributes(e.find(".set-time"),this,this.settings.attributes,"btn"),this.settings.parentElement||e.on("keydown.timepicker","button, div.dropdown",function(o){return(o.keyCode||o.charCode||0)!==9||(t.containFocus(o),o.stopPropagation(),o.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,n=this.popup.find(":focusable"),i=n.index($(":focus")),a=i+1>=n.length?0:i+1,r=i-1<0?n.length:i-1;i=t?r:a,n.eq(i).focus()},setupStandardEvents:function(){var e=this;e.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",function(t){t.preventDefault(),t.target.click()}).on("keydown.timepicker","input.dropdown",function(t){var n=!1;if(t.which===27&&(n=!0,e.closeTimePopup(),e.element.focus()),t.which===32&&(n=!0,e.popup.find(".set-time").click()),t.which===37||t.which===39){n=!0;var i=e.popup.find('input[id$="-shdo"]');if(t.which===37){var a=i.eq(i.index(this)-1);a&&a.length!==0||(a=i.eq(i.length)),a.focus()}if(t.which===39){var r=i.eq(i.index(this)+1);r&&r.length!==0||(r=i.eq(0)),r.focus()}}return!n||(t.preventDefault(),t.stopPropagation(),!1)}),e.trigger.on("hide.timepicker",function(){e.onPopupHide()})},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(e){var t,n,i=this,a=e||this.element.val(),r=this.getTimeSeparator(),o={},c=this.settings.timeFormat,u=!!this.dayPeriods.filter(function(M){return M.indexOf(".")>-1}).length&&a.indexOf(".")>-1&&c.indexOf("a")>-1&&c.indexOf("ah")<0&&!this.is24HourFormat();(a=a.replace(u?/[T\s:-]/g:/[T\s:.-]/g,r).replace(/z/i,"")).indexOf(r)<0&&a.length===4&&i.settings.timeFormat==="HHmm"&&(a="".concat(a.substr(0,2)).concat(r).concat(a.substr(2))),t=(a=a.replace("\u5348","\u5348".concat(r))).split(r);var p=c.replace(" ","").slice(0,2)!=="ah"&&!$(".datepicker").length>0,m=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),v=m!==-1&&m<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");this.is24HourFormat()||!v||p||(t=[t[1],t[2],t[0]]);var w,C=this.currentCalendar.dayPeriods;function A(M){return M.replace(/^\s+|\s+$/g,"")}function S(M){return!M||isNaN(M)?"00":M=(M=parseInt(M,10))<10?"0".concat(M):M}return t[2]&&(C[0].indexOf(".")>-1||C[1].indexOf(".")>-1)&&(C[0].replace(".","")===t[2]&&(t[2]=C[0]),C[1].replace(".","")===t[2]&&(t[2]=C[1])),this.is24HourFormat()||v||(n=t[t.length-1].split(" "),t.pop(),t=t.concat(n)),t[0]&&t[0].length&&!isNaN(t[0])||(t[0]="1"),t[0]=parseInt(t[0],10),isNaN(t[0])||(t[0]="".concat(parseInt(t[0],10))),o.hours=i.hourText(t[0]),t[1]?(t[1]=A(t[1]),t[1]=S(t[1]),o.minutes=t[1]):o.minutes="00",(w=t[2])?(w=A(w),i.hasSeconds()?(w=S(w),o.seconds=w):(function(M){return i.dayPeriods.indexOf(M)>-1}(w)||(w=i.translateDayPeriod("AM")),o.period=w)):(i.hasSeconds()&&(w="00",o.seconds=w),i.is24HourFormat()||(w=i.translateDayPeriod("AM"),o.period=w)),t[3]?(t[3]=A(t[3]),o.period=t[3]):!this.is24HourFormat()&&this.hasSeconds()&&(o.period=this.translateDayPeriod("AM")),o},getTimeFromField2:function(e){function t(m){return!m||isNaN(m)?"00":m=(m=parseInt(m,10))<10?"0".concat(m):m}var n=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,i=this.hasSeconds()?"timestamp":"hour",a=L.parseDate(e||this.element.val(),{date:i}),r=(a?a.getHours():"1").toString(),o=(r>=12?this.translateDayPeriod("PM"):this.translateDayPeriod("AM")).toString();!this.is24HourFormat()&&r>12&&(r=(parseInt(r,10)-12).toString()),this.is24HourFormat()||r!=="0"||(r="12");var c=n.indexOf("a")>-1?o:void 0,u=a?a.getMinutes():"00",p=a?a.getSeconds():"00";return{hours:t(r),minutes:t(u),seconds:t(p),period:c}},translateDayPeriod:function(e){return/am|pm|AM|PM/i.test(e)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(e)?0:1]:e},setTimeOnField:function(){var e,t,n,i,a,r=this.settings.timeFormat,o=this.hourSelect?(e=this.hourSelect[0])===null||e===void 0||e==null?void 0:e.value:"",c=this.minuteSelect?(t=this.minuteSelect[0])===null||t===void 0||t==null?void 0:t.value:"",u=this.secondSelect?(n=this.secondSelect[0])===null||n===void 0||n==null?void 0:n.value:"",p=this.periodSelect?(i=this.periodSelect[0])===null||i===void 0||i==null?void 0:i.value:"",m=L==null||(a=L?.calendar().dayPeriods)===null||a===void 0||a==null?void 0:a.indexOf(p),v=new Date;v.setHours(kn.hoursTo24(parseInt(o,10),m),c,u);var w=L.formatDate(v,{date:"hour",pattern:r});this.element.val(w).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){var e=this,t=this;t.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&t.closeTimePopup(),this.element.addClass("is-active is-open"),t.settings.mode==="range"?(t.buildRangePopup(),t.setupRangeEvents()):(t.buildStandardPopup(),t.setupStandardEvents()),this.trigger.data("popover")&&this.element.attr("aria-expanded","true"),this.popup.find("div.dropdown").first().focus(),setTimeout(function(){$("select.period.dropdown").on("change",function(n){var i,a=$(n.target).find(":checked").val();e.initValues=t.getTimeFromField();var r=e.is24HourFormat(),o=r?0:1,c=r?24:13,u=$("select.hours.dropdown"),p=u.siblings(".dropdown-wrapper").find(".dropdown").children("span").text();p.indexOf(L.translate("Hours"))>-1&&(p=p.split(" ")[1]),u.empty();for(var m=t.getMaxHourRange(e.initValues,e.hasDayPeriods(),a);o<c&&!(o>m);)i="",parseInt(p,10)===o&&(i=" selected"),u.append($("<option".concat(i,">").concat(t.hourText(o),"</option>"))),o++;p>m&&(p=1),$("select.hours.dropdown").siblings(".dropdown-wrapper").find(".dropdown").children("span").html(p)})},10))},closeTimePopup:function(){this.trigger.data("popover")&&(this.trigger.data("popover").hide(),this.element.attr("aria-expanded","false"))},onPopupHide:function(){if(this.settings.mode==="standard"){var e=this.hourSelect,t=this.minuteSelect,n=this.secondSelect,i=this.periodSelect;e&&e.data("dropdown")&&typeof e.data("dropdown").destroy=="function"&&e.data("dropdown").destroy(),t&&t.data("dropdown")&&typeof t.data("dropdown").destroy=="function"&&t.data("dropdown").destroy(),this.hasSeconds()&&n&&n.data("dropdown")&&typeof n.data("dropdown").destroy=="function"&&n.data("dropdown").destroy(),this.hasDayPeriods()&&i&&i.data("dropdown")&&typeof i.data("dropdown").destroy=="function"&&i.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("popover").destroy(),this.trigger.data("popover",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(e){var t=this.element.val();if(!e||e===!1)return t;var n=this.currentCalendar.dateFormat.timeSeparator,i=new RegExp(n,"g"),a=(t=t.replace(i,"")).split(" ");return a[0].length<4&&(t="0".concat(a[0]).concat(a[1]?a[1]:"")),t},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.removeAttr("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker click.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var e=this.element.data("mask");return e&&typeof e.destroy=="function"&&e.destroy(),this.addedValidation&&($.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Wi)},handleEvents:function(){var e=this;return this.trigger.off("click.timepicker").on("click.timepicker",function(){e.toggleTimePopup()}),this.label&&this.label.off("click.timepicker").on("click.timepicker",function(){e.element[0].focus()}),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(e){return this.each(function(){var t=$.data(this,Wi);t?t.updated(e):t=$.data(this,Wi,new Pa(this,e))})};var pa=new function(){var e=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,n){return!(!("placeholder"in document.createElement("input"))&&n&&(t===n.attr("placeholder")||t===L.translate("Required")))&&(typeof t=="string"?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),$.trim(t).length!==0):typeof t=="number"?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var n=t.attr("name");return n&&n.length&&$('input[name="'.concat(n,'"]:radio:checked')).length},check:function(t,n){return this.message=L.translate("Required"),!(!$(n).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(n.is(":radio")?this.isRadioChecked(n):this.isNotEmpty(t,n))},message:"Required",type:"error",id:"required"},date:{check:function(t,n,i){if(this.message=L.translate("InvalidDate"),i&&i.column){var a=i.column.formatter(i.row,i.cell,t,i.column,!0);if(a instanceof Date)return a&&a.getTime&&!isNaN(a.getTime())}if(t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var r=t.indexOf(":")>-1?L.calendar().dateFormat.datetime:L.calendar().dateFormat.short,o=null;if(n&&n.data("datepicker")&&((o=n.data("datepicker")).settings.showTime&&(this.message=L.translate("InvalidDateTime")),r=o.pattern),i&&i.column){var c=i.column;typeof c.sourceFormat=="string"?r=i.column.sourceFormat:typeof c.dateFormat=="string"&&(r=i.column.dateFormat)}var u=!(r==="MMMM"||r==="MMM"||r==="MM"||r==="MMMM d"||r==="d MMMM"||r==="yyyy");return o&&(r={locale:o.locale.name,pattern:r,calendarName:o.currentCalendar.name}),!(L.parseDate(t,r,u)===void 0&&t!=="")},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(t,n,i){this.message=L.translate("UnavailableDate");var a=!0;if(t==="")return a;if(!e.rules.date.check(t,n))return a=!1,this.message="",a;var r=n.data("datepicker"),o=r?r.settings:{};if(i&&i.column){var c=i.column.formatter(i.row,i.cell,t,i.column,!0);c instanceof Date&&(t=c),i.column.editorOptions&&(o=i.column.editorOptions)}if(!o||!o.disable)return!0;var u,p,m,v,w=Object.keys(o.disable).length>0,C=t;if(typeof C=="string"){var A=o.dateFormat!=="locale"?o.dateFormat:L.calendar().dateFormat.short;if(o.showTime){var S=o.timeFormat||L.calendar().timeFormat;A.indexOf(S)<0&&(A+=" ".concat(S))}if(r&&r.isIslamic&&(A={pattern:r.pattern,locale:r.locale.name}),i&&i.column){var M=i.column;M.sourceFormat?A=typeof M.sourceFormat=="string"?{pattern:M.sourceFormat}:M.sourceFormat:M.dateFormat&&(A=typeof M.dateFormat=="string"?{pattern:M.dateFormat}:M.dateFormat)}C=L.parseDate(C,A)}r&&r.isIslamic&&C instanceof Date&&(C=L.umalquraToGregorian(C.getFullYear(),C.getMonth(),C.getDate()));var I=o.useUTC?L.dateToUTC(C):C;if(I&&w&&typeof o.disable.callback=="function")return!o.disable.callback(I.getFullYear(),I.getMonth(),I.getDate());if(I instanceof Array)return a;if(I&&w){m=o.useUTC?L.dateToUTC(new Date(o.disable.minDate)).setHours(0,0,0,0):new Date(o.disable.minDate).setHours(0,0,0,0),v=o.useUTC?L.dateToUTC(new Date(o.disable.maxDate)).setHours(0,0,0,0):new Date(o.disable.maxDate).setHours(0,0,0,0),o.disable.dayOfWeek&&o.disable.dayOfWeek.indexOf(I.getDay())!==-1&&(a=!1);var z=I.getFullYear();if(((I=I.setHours(0,0,0,0))<=m||I>=v)&&(a=!1),/string|number/.test(at(o.disable.years))&&(o.disable.years=[o.disable.years]),o.disable.years){for(var V=0,U=o.disable.years.length;V<U;V++)if(z===Number(o.disable.years[V])){a=!1;break}}if(o.disable.dates){for(o.disable.dates.length&&typeof o.disable.dates=="string"&&(o.disable.dates=[o.disable.dates]),u=0,p=o.disable.dates.length;u<p;u++)if(I===(o.useUTC?L.dateToUTC(o.disable.dates[u]):new Date(o.disable.dates[u])).setHours(0,0,0,0)){a=!1;break}}}return w&&(a=!!(a&&!o.disable.isEnable||!a&&o.disable.isEnable)),a},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(t,n){var i=this;this.message=L.translate("rangeDate");var a=!0,r=n.data("datepicker");if(r){var o=r.settings,c=t.split(o.range.separator),u=function(m,v){n.val(v),i.message="".concat(e.rules[m].message," (").concat(v,")"),e.rules[m].check(v,n)||(a=!1)};if(t.indexOf(r.pattern)>-1){if(c.length===1)u("date",c[0]);else if(c.length===2){var p=c[0]===r.pattern?1:0;u("date",c[p]),a&&u("availableDate",c[p])}}else c.length===1?(u("date",c[0]),a&&u("availableDate",c[0])):c.length===2&&(u("date",c[0]),a&&u("date",c[1]),a&&u("availableDate",c[0]),a&&u("availableDate",c[1]))}return n.val(t),a},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){return this.message=L.translate("EmailValidation"),!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(t,n){var i=n.closest(".signin").find('button[type="submit"]');return t.length&&(e.rules.email.check(t)||e.rules.passwordConfirm.check(t,n))?i.enable():i.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(t,n){if($.trim(t).length&&!n.is("[readonly]")){e.rules.emailPositive.positive=!0,this.message=L.translate("EmailValidation");var i=e.rules.email.check(t,n);return i&&(this.message=""),i}return e.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){return this.message=L.translate("PasswordValidation"),!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(t,n){this.message=L.translate("PasswordConfirmValidation");var i=$('input[type="password"]:not('.concat(n.attr("id"),")"),n.closest(".signin")).eq(0).val(),a=t===i&&e.rules.passwordReq.check(i);return!t.length||a},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,n){if(!t)return!0;this.message=L.translate("InvalidTime");var i=n&&n.data("timepicker")?n.data("timepicker").settings:{},a=i&&i.timeFormat?i.timeFormat:L.calendar().timeFormat;if(n.attr("data-options")&&i&&!i.timeFormat){var r=JSON.parse(n.attr("data-options"));r.patternOptions&&r.patternOptions.format&&(a=r.patternOptions.format)}var o=L.parseDate(t,{dateFormat:a,strictTime:!0});return o instanceof Date&&!Number.isNaN(o)&&o.toString()!=="Invalid Date"},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return t==="1"},message:"Value is not valid (test).",type:"error",id:"test"}}},tl="toast",Ed={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Bl(e,t){this.element=$(e),this.settings=N.mergeSettings(e,t,Ed),this.init()}Bl.prototype={init:function(){this.show()},show:function(){var e=this,t=this.settings,n=parseFloat(rs.convertDelayToFPS(t.timeout)),i=t.allowLink?_e.stripTags(t.message,"<a><br><p>"):_e.stripHTML(t.message),a=!1,r=100;this.uniqueId=t.uniqueid?this.generateUniqueId("usersettings-position"):"";var o=$("#toast-container".concat(this.uniqueId)),c=$(`
      <div class="toast">
        <span aria-relevant="additions text" aria-live="polite">
          <span class="toast-title">`.concat(_e.stripHTML(t.title),`</span>
          <span class="toast-message">`).concat(i,`</span>
        </span>
      </div>`)),u=$(`
      <button type="button" class="btn-icon btn-close" title="`.concat(L.translate("Close"),`" aria-hidden="true">
        `).concat($.createIcon("close"),`
        <span class="audible">`).concat(L.translate("Close"),`</span>
      </button>
    `)),p=$('<div class="toast-progress"></div>');o.length||(o=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container"></div>')).appendTo("body")),o.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(t.position.replace(" ","-"))),t.timeout=t.audibleOnly?100:t.timeout,t.progressBar&&c.append(p),o.append(c),c.addClass(t.audibleOnly?"audible":"effect-scale"),c.append(u),e.createDraggable(c,o);var m=o.children().length;this.toastIndex=m;for(var v=0,w=this.element.find(".toast-container").children();v<w.length;v++)m=w.length;N.addAttributes(c,this,this.settings.attributes),N.addAttributes(c.find("button"),this,this.settings.attributes,"btn-close");var C=new Gt({duration:rs.convertDelayToFPS(t.timeout),timeoutCallback:function(){e.remove(c,m)},updateCallback:function(S){r=(S.duration-S.elapsedTime)/n*100,L.isRTL()&&(r=100-r),t.progressBar&&(p[0].style.width="".concat(r,"%"))}});function A(S){C.destroy(!0),e.remove(S,m)}Hn.register(C),$(document).on("keydown.toast-".concat(m," keyup.toast-").concat(m),function(S){var M=(S=S||window.event).which||S.keyCode;S.ctrlKey&&M===80&&(a=S.type==="keydown",C[a?"pause":"resume"]()),S.type==="keydown"&&M===27&&(S.stopImmediatePropagation(),S.preventDefault(),A(c))}),c.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",function(S){a=!!/mousedown|touchstart/i.test(S.type),C[a?"pause":"resume"]()}),u.on("click.toast",function(){A(c)})},createDraggable:function(e,t){var n=this;if(this.settings.draggable&&e[0]&&t[0]){var i=Be.features.touch,a=t.parent();t.css({top:"",left:"",right:""});var r=t[0].getBoundingClientRect(),o=this.restorePosition(),c=r;o&&((c={top:o.top,left:o.left,width:e.outerWidth(),height:e.outerHeight()}).right=c.left+c.width,c.bottom=c.top+c.height,this.isPosInViewport(c)||(c=r));var u={top:"".concat(c.top,"px"),left:"".concat(c.left,"px")};t.is(".toast-bottom-right, .toast-top-right")&&(u.right="auto"),t.css(u),t.addClass("is-draggable"),e.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",function(w){i||w.preventDefault(),$(w.target).is("a, .btn-close")||t.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",function(){w.stopImmediatePropagation(),t.attr("aria-grabbed","true"),a.attr("aria-dropeffect","move")}).off("dragend.toast").on("dragend.toast",function(){t.removeAttr("aria-grabbed"),a.removeAttr("aria-dropeffect"),n.savePosition({left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))});var C=t.data("drag");C&&typeof C.destroy=="function"&&C.destroy()})});var p=function(w){var C=w.dragApi,A=w.x,S=w.y,M=C.getElementsFromPoint(A,S)[0];return!$(M).closest(".toast").length},m=function(w){var C=$.Event("keyup");$.extend(C,{ctrlKey:!0,altKey:!0,keyCode:80}),w.trigger(C)},v=$(document);v.off("mouseup.toast").on("mouseup.toast",function(w){if($("#toast-container".concat(n.uniqueId," .toast")).length===1){var C=t.data("drag");if(C&&typeof C.getElementsFromPoint=="function"){var A={dragApi:C,x:w.pageX,y:w.pageY};p(A)&&m(v)}}}).off("touchend.toast").on("touchend.toast",function(w){if($("#toast-container".concat(n.uniqueId," .toast")).length===1){var C=t.data("drag");if(C&&typeof C.getElementsFromPoint=="function"){var A=w.originalEvent;if(A.targetTouches.length>1)return;var S=A.changedTouches[0],M={dragApi:C,x:S.pageX,y:S.pageY};p(M)&&m(v)}}})}},savePosition:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(e)&&(localStorage[this.uniqueId]=JSON.stringify(e),this.element.triggerHandler("settingschanged",[e]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var e=localStorage[this.uniqueId];return e?JSON.parse(e):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},generateUniqueId:function(e){return e=e??"","toast-".concat(this.settings.uniqueid||"","-").concat(e).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(e){return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(e,t){return e.closest(".toast-container").off("dragstart.toast dragend.toast"),e.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),e.find(".btn-close").off("click.toast"),t!==void 0&&$(document).off(["keydown.toast-".concat(t),"keyup.toast-".concat(t)].join(" ")),this},remove:function(e,t){var n=this,i=function(){e.remove(),!$("#toast-container".concat(n.uniqueId," .toast")).length&&n.destroy()};if(this.unbind(e,t),this.settings.audibleOnly)i();else{e.attr("aria-live","").attr("aria-relevent","").hide(),e.addClass("effect-scale-hide");var a=new Gt({duration:20,updateCallback:function(){},timeoutCallback:function(){i()}});Hn.register(a)}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,Ed)),this.show()},destroy:function(){var e=this,t=$("#toast-container".concat(this.uniqueId));t[0]&&[].slice.call(t[0].querySelectorAll(".toast")).forEach(function(n){e.settings.audibleOnly=!0,e.remove($(n))}),$(document).off(["mouseup.toast","touchend.toast"].join(" ")),t.remove(),delete this.toastIndex,delete this.uniqueId,$.removeData(this.element[0],tl)}},$.fn.toast=function(e){return this.each(function(){var t=$.data(this,tl);t?t.updated(e):t=$.data(this,tl,new Bl(this,e))})};var nl="Validator",ju={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function po(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ju),this.init()}po.prototype={init:function(){this.fields="input[data-validate], input[data-validation], textarea[data-validate], textarea[data-validation], select[data-validate], select[data-validation], div[data-validate], div[data-validation]",this.isPlaceholderSupport="placeholder"in document.createElement("input"),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(e){if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),at(e)==="object"){var t="";for(var n in e)t.indexOf(e[n])===-1&&(t+="".concat(e[n]," "));e=t=t.split(" ").join(".validate ")}return e},filterValidations:function(e,t){var n=[];if(!e)return[];if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),at(e)==="object")for(var i in e)t&&e[i].indexOf(t)>-1&&n.push(i);return n},setErrorIconOpacity:function(e){if(e.is(":text")&&e.is('[data-error-type="tooltip"]')){var t=this.calculateTextWidth(e.val()),n=e.outerWidth()-35;e.closest(".field, .field-short").find(".icon-error")[t>n?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");return n.font=t||"14px arial",n.measureText(e).width},attachEvents:function(){var e=this,t="[data-validate],[data-validation]";this.inputs.each(function(){var i=$(this),a=i.attr("data-validate")||i.attr("data-validation");a&&a.indexOf("required")>-1&&i.addClass("required")}),this.inputs.filter("input, textarea, div").filter(t).not("input[type=file]").each(function(){var i=$(this),a=i.attr("data-validation-events"),r=e.extractEvents(a||"blur.validate change.validate keyup.validate");r.indexOf("enter.validate")>-1&&i.off("keypress.enter.validate").on("keypress.enter.validate",function(o){var c=$(this);o.which===13&&e.validate(c,!0,o)}),i.off(r).on(r,function(o){if(o.type==="keyup"){if(o.keyCode===9)return;e.setErrorIconOpacity(i)}var c=$(this),u=c.data("handleEvent".concat([o.type||""]));(!c.is("[readonly]")||c.parent().is(".field-fileupload")||c.is(".lookup.is-not-editable"))&&(!u||u.type!==o.type||o.handleObj.namespace!=="validate"||c.is(".lookup")||c.closest(".modal:visible").length)&&(c.data("handleEvent".concat([o.type||""]),o.handleObj),setTimeout(function(){c.closest(".modal-engaged").length&&!c.closest(".modal-body").length||e.validate(i,!0,o)},300))})}),this.inputs.filter("input[type=checkbox]").filter(t).off("click.validate").on("click.validate",function(i){e.validate($(this),!0,i)}),this.inputs.filter(":radio").off("click.validate").on("click.validate",function(i){var a=$(this).parent().find(".radio").first();e.validate(a,!0,i)});var n=this.inputs.filter("select").filter(t);n.length&&(n.off("change.validate listopened.validate listclosed.validate").on("change.validate",function(i){e.validate($(this),!0,i)}).on("listopened.validate",function(){var i=$(this),a=i.data("tooltip");a&&document.activeElement===i.data("dropdown").searchInput[0]&&a.hide(),$("#validation-tooltip").hide()}).on("listclosed.validate",function(){var i=$(this),a=i.data("tooltip"),r=i.data("dropdown");Be.features.touch&&(r.pseudoElem.focus(),setTimeout(function(){r.pseudoElem.blur()},100)),r&&r.wrapper&&(a=r.wrapper.find(".icon-error").data("tooltip")),a&&document.activeElement!==i.data("dropdown").searchInput[0]&&a.show()}),n.filter(function(){return $(this).data("dropdown")!==void 0}).each(function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",function(i){var a=$(this).closest(".field, .field-short").find("select");e.validate(a,!0,i)})})),this.element.is("form")&&this.element.attr("data-validate-on")&&this.element.off("submit.validate").on("submit.validate",function i(a){a.stopPropagation(),a.preventDefault(),e.validateForm(function(r){e.element.off("submit.validate"),e.element.triggerHandler("validated",r),e.element.data("isValid",r),e.element.on("submit.validate",i)})})},validateForm:function(e){var t,n=this,i=[];n.inputs=this.element.find(n.fields),n.inputs.each(function(a){var r=$(this);if(r.attr("data-validate")){if(r.attr("data-disable-validation")==="true"||r.hasClass("disable-validation"))return;for(var o=n.validate(r,!1,a),c=0;c<o.length;c++)i.push(o[c])}}),(t=$).when.apply(t,i).then(function(){e(!0)},function(){e(!1)})},setPrimaryBtn:function(e,t){var n=e.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),i=!0;n.length>0&&n.each(function(){var a=$(this);if(!(a.closest(".datagrid-filter-wrapper").length>0)){var r=a[0].offsetParent!==null;a.is(".required")&&(r&&a.is(".editor")&&!a.html()&&(i=!1),!r&&!a.is("select, :checkbox")||a.val()||a.is(".editor")||(i=!1)),!r&&!a.is("select, :checkbox")||a.isValid()||(i=!1)}}),i?t.removeAttr("disabled"):t.attr("disabled","disabled")},value:function(e){return e.is("input[type=checkbox]")?e.prop("checked"):e.is("div")?e[0].innerHTML:e.val()},getTypes:function(e,t){var n,i=this.filterValidations(e.attr("data-validation-events"),t.type);return n=e.is("input.dropdown")&&e.prev().prev("select").attr("data-validate")?e.prev().prev("select").attr("data-validate").split(" "):e.is("input.dropdown")&&e.prev().prev("select").attr("data-validation")?e.prev().prev("select").attr("data-validation").split(" "):e.attr("data-validation")?e.attr("data-validation").split(" "):e.attr("data-validate")?e.attr("data-validate").split(" "):[],i.length>0&&(n=n.filter(function(a){return i.indexOf(a)!==-1})),t.type==="keyup"&&(n=n.filter(function(a){return a!=="date"&&a!=="time"})),n},setIconOnParent:function(e,t){var n,i,a,r=$.createIcon({classes:["icon-".concat(t)],icon:"".concat(t)}),o=e.closest(".tab-panel, .expandable-pane"),c=e.closest(".row.flex-align-bottom"),u=o.attr("id"),p=e.closest(".tab-container, .tab-panel-container, .expandable-area");if(c&&c.length&&($(".".concat(t),c).length?c.addClass("has-messages"):c.removeClass("has-messages")),p.is(".tab-panel-container")&&(p=p.prev(".tab-container")),p.is(".tab-container")){var m=p.data("tabs");if(t==="error"&&m.settings.validate===!1)return;(n=$('.tab-list a[href="#'.concat(u,'"]'),p).closest(".tab")).length?$(".count",n).length&&(n=$(".count",n)):(u=$('a[href="#'.concat(u,'"]'),".popupmenu").closest(".popupmenu").attr("id"),n=$('.tab-list .tab[aria-controls="'.concat(u,'"]'),p),i=u)}else{if(!p.is(".expandable-area"))return;n=$('.expandable-header[aria-controls="'.concat(u,'"] .title'),p)}i&&i.length&&(a=o.add($($(i).attr("href"))),$('a[role="menuitem"]',"#".concat(i)).each(function(){a=a.add($($(this).attr("href")))}));var v=$('a[href="#'.concat(o.attr("id"),'"]'),"#".concat(u));o&&$(".".concat(t),o).length||a&&$(".".concat(t),a).length?($(".".concat(t),o).length||(v.removeClass("is-".concat(t)),$(".icon-".concat(t),v).remove()),$(".".concat(t),o).length&&$(".".concat(t),a).length&&!$(".icon-".concat(t),v).length&&v.addClass("is-".concat(t)).append(r),$(".icon-".concat(t),n).length||p.hasClass("module-tabs")||n.addClass("is-".concat(t)).append(r)):((n=n.add(v)).removeClass("is-".concat(t)),$(".icon-".concat(t),n).remove())},validate:function(e,t,n){if(e.data("handleEvent".concat([n.type||""]),null),e.attr("data-disable-validation")==="true"||e.hasClass("disable-validation")||e.is(":disabled"))return[];var i,a,r,o,c,u=this,p=u.getTypes(e,n)||[],m=[],v=[],w=u.value(e),C=e.attr("placeholder");function A(S,M,I,z){(i=pa.rules[I]).positive===!1&&u.removePositive(e),c=pa.ValidationTypes[i.type]||pa.ValidationTypes.error;var V=e.attr("data-".concat(c.type,"-type"))!=="tooltip";if(S)$.grep(v,function(te){return te===c.type}).length===0?(z.resolve(),i.positive&&(u.addMessage(e,i,V,M),u.removeMessage(e,i,!0),z.resolve(),u.addPositive(e))):c.errorsForm||z.resolve();else{if(!u.isPlaceholderSupport&&w===C&&i.message!==L.translate("Required"))return;u.addMessage(e,i,V,M),v.push(i.type),c.errorsForm?z.reject():z.resolve()}u.setIconOnParent(e,i.type);var U=u.getField(e).data("".concat(c.type,"message"));S&&U&&U.filter(function(te){return te.id===i.id||i.message}).length>0&&u.removeMessage(e,i,!0);var G=e.closest(".modal").find(".btn-modal-primary").not(".no-validation");G.length&&u.setPrimaryBtn(e.closest(".modal"),G);var J=e.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");J.length&&u.setPrimaryBtn(e.closest("#calendar-popup"),J),i.type==="error"&&e.closest("form").triggerHandler("aftervalidate",{field:e,rule:i,isValid:S})}for(r=0,o=p.length;r<o;r++)i=pa.rules[p[r]],a=$.Deferred(),i&&(i.async?i.check(w,e,A,a):A(i.check(w,e),t,p[r],a),m.push(a));return m},getField:function(e){return e.is("select")&&e.data("dropdown")!==void 0&&(e=e.data("dropdown").pseudoElem),e},hasError:function(e){return this.getField(e).hasClass("error")},addMessage:function(e,t,n,i,a){if(!(t.message===""||e.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){a=a||!1;var r=this.getField(e),o=r.data("".concat(t.type,"message")),c=pa.ValidationTypes[t.type]||pa.ValidationTypes.error;if(a||r.addClass(t.type==="icon"?"custom-icon":t.type),!(o&&o===t.message||o&&o.filter(function(m){return(m.id||m.message)===(t.id||t.message)&&m.message===t.message}).length>0)){var u=t.message;if(o){for(var p=0;p<o.length;p++)u="\u2022 ".concat(o[p].message);u+="<br>\u2022 ".concat(t.message)}o||(o=[]),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),(o=o.filter(function(m){return m.id!==t.id})).push({id:t.id,message:t.message,type:t.type}),r.data("".concat(c.type,"message"),o),$.fn.toast!==void 0&&$("body").toast({title:L.translate(c.titleMessageID),audibleOnly:!0,message:u}),n?(e.data("isValid",!1),n&&this.showInlineMessage(e,t,a)):this.showTooltipMessage(e,u,c.type,i)}}},showIcon:function(e,t){var n=this.getField(e).addClass(t==="icon"?"custom-icon":t),i=$.createIconElement({classes:["icon-".concat(t)],icon:t}),a=n.closest(".field, .field-short"),r=e.parent();return a.find("svg.icon-".concat(t)).length===0?(r.is(".editor-container")&&e.parent().addClass("is-error"),e.parent(":not(.editor-container)").find(".btn-actions").length===1?r.find(".btn-actions").before(i):r.find(".data-description").length===1?r.find(".data-description").before(i):r.find(".field-info").length===1?r.find(".field-info").before(i):e.is("textarea")?e.after(i):e.is(".dropdown, .multiselect")?r.find(".dropdown-wrapper").append(i):(e.is(".spinbox")||e.is(".lookup"),r.append(i)),$(".icon-success",a).remove()):i=a.find("svg.icon-error"),i},showTooltipMessage:function(e,t,n,i){if(!e.is(":radio")){var a=e.is("button")?e:this.showIcon(e,n),r=a.data("tooltip"),o=e;if(e.is(".dropdown, .multiselect")&&e.data("dropdown")!==void 0){var c=e.data("dropdown").pseudoElem;o=c,c.addClass(n==="icon"?"custom-icon":n)}e.closest(".field, .field-short").find(".formatter-toolbar").addClass(n==="icon"?"custom-icon":n),r?r.content=t:(a.tooltip({content:t,placement:"bottom",placementOpts:{callback:function(u){var p=o[0].getBoundingClientRect(),m=r.tooltip[0].getBoundingClientRect(),v=$("html").is('[dir="rtl"]'),w=u.x,C=0;return v?m.left<p.left&&(C+=p.left-m.left):m.right>p.right&&(C+=-1*(m.right-p.right)),u.setCoordinate("x",w+C),u.nudges||(u.nudges={}),u.nudges.x=C,u}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),r=a.data("tooltip")),e.on("focus.validate",function(){r&&r.show()}).on("blur.validate",function(){r&&r.hide()}),r&&e.attr("data-error-type","tooltip"),this.setErrorIconOpacity(e),i&&r&&r.show()}},toggleRadioMessage:function(e,t,n,i,a){var r,o,c=e.attr("name");c&&c.length&&(r=$(':radio[name="'.concat(c,'"], :radio[name="').concat(c,'"] + label')),o=e.parent().is(".inline")?$(':radio[name="'.concat(c,'"]:last')).parent():$(':radio[name="'.concat(c,'"]:last + label')),a?(r.addClass(n==="icon"?"custom-icon":n),$(i).addClass("radio-group-".concat(n)).insertAfter(o)):(r.removeClass(n),o.next(".radio-group-".concat(n)).remove()))},showInlineMessage:function(e,t,n){n=n||!1;var i,a,r=this.getField(e),o=pa.ValidationTypes[t.type]||pa.ValidationTypes.error;t.icon=t.icon||o.icon;var c="".concat(e.attr("id")||"id","-").concat(t.type);t.type==="error"||ft.currentTheme.id&&ft.new,a="".concat(o.type),i=t.type==="icon"?""+'<div id="'.concat(c,'" class="custom-icon-message" data-rule-id="').concat(t.id||t.message,`">
          `).concat($.createIcon({classes:["icon-custom"],icon:t.icon}),`
          <pre class="audible">
            `).concat(L.translate(o.titleMessageID),`
          </pre>
          <p class="message-text">`).concat(t.message,`</p>
        </div>`):""+'<div id="'.concat(c,'" class="').concat(o.type,'-message" data-rule-id="').concat(t.id||t.message,`">
          `).concat($.createIcon({classes:["icon-".concat(o.type)],icon:a}),`
          <pre class="audible">
            `).concat(L.translate(o.titleMessageID),`
          </pre>
          <p class="message-text">`).concat(t.message,`</p>
        </div>`),e.is(":radio")?this.toggleRadioMessage(e,t.message,o.type,i,!0):(r.closest(".field, .field-short").find(".formatter-toolbar").addClass(o.type==="icon"?"custom-icon":o.type),r.closest(".field, .field-short").append(i),r.closest(".field, .field-short").find(".colorpicker-container").addClass(o.type==="icon"?"custom-icon":o.type)),n||r.addClass(t.type==="icon"?"custom-icon":t.type),e.is(".spinbox")&&r.closest(".spinbox-wrapper").addClass(o.type==="icon"?"custom-icon":o.type),o.type==="error"&&e.parent().find(".icon-success").remove(),e.attr("aria-describedby",c),e.attr("aria-invalid","true");var u=e.parent().find(".dropdown.error"),p=u.attr("aria-label"),m="".concat(p).concat(t.message);u&&u.attr("aria-label",m),e.triggerHandler(o.type,{field:e,message:t.message}),e.closest("form").triggerHandler(o.type,{field:e,message:t.message})},addPositive:function(e){var t=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",e.parent(".field, .field-short")).length||e.parent(".field, .field-short").append(t)},removeMessage:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=this.getField(e),a=i.data("".concat(t.type,"message")),r=t.id||t.message;if(t&&(t.type!=="error"||a)&&a.filter(function(p){return p.id===r}).length!==0){var o=a.filter(function(p){return p.id!==r}),c=o.length===0;if(c?i.removeData("".concat(t.type,"message")):i.data("".concat(t.type,"message"),o),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),c&&t.type==="error"&&n&&(e.triggerHandler("valid",{field:e,message:""}),e.closest("form").triggerHandler("valid",{field:e,message:""})),c&&(e.removeClass("".concat(t.type," custom-icon")).data("isValid",!0),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&(e.next().next().removeClass("".concat(t.type," custom-icon")),e.next().find("div.dropdown").removeClass("".concat(t.type," custom-icon"))),e.is(":radio")&&this.toggleRadioMessage(e,"",t.type,"",!1),e.hasClass("spinbox")&&e.closest(".spinbox-wrapper").removeClass("".concat(t.type," custom-icon")),e.hasClass("colorpicker")&&e.parent(".colorpicker-container").removeClass(t.type),e.closest(".field-fileupload").length>0&&e.closest(".field-fileupload").find("input.".concat(t.type)).removeClass(t.type),e.removeAttr("aria-describedby").removeAttr("aria-invalid"),e.attr("data-".concat(t.type,"-type"))==="tooltip")){var u=e.closest(".field, .field-short").find(".icon-error").data("tooltip");u&&u.destroy(),e!==void 0&&this.hideTooltipMessage(e),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),e.parent().find(".dropdown-wrapper > .icon-".concat(t.type)).off("click.validate").remove(),e.parent().find(".icon-".concat(t.type)).remove(),e.next(".icon-".concat(t.type)).off("click.validate").remove(),e.parent(".field, .field-short").find(".icon-".concat(t.type)).remove(),e.next(".inforCheckboxLabel").next(".icon-".concat(t.type)).remove()}}},hideTooltipMessage:function(e){var t=e.data("tooltip");t&&t.destroy(),e.off("focus.validate"),e.off("blur.validate")},removePositive:function(e){$(".icon-success",e.parent(".field, .field-short")).remove()},resetForm:function(e){var t=e.find("input, select, textarea, div.dropdown, div.editor");t.removeClass("error"),e.find(".error").removeClass("error"),e.find(".icon-error").remove(),e.find(".icon-success").remove(),e.find(".error-message").remove(),t.removeClass("alert"),e.find(".alert").removeClass("alert"),e.find(".icon-alert").remove(),e.find(".alert-message").remove(),t.removeClass("info"),e.find(".info").removeClass("info"),e.find(".icon-info").remove(),e.find(".info-message").remove(),setTimeout(function(){$("#validation-errors").addClass("is-hidden")},300),t.data("isDirty",!1).removeClass("isDirty"),e.find(".isDirty").removeClass("isDirty"),e.is("form")&&e[0].reset();var n=$.fn.validation.ValidationTypes;Object.keys(n).forEach(function(i){t.removeData("".concat(i,"message"))}),t.removeData("isValid")},isFormValid:function(e){if($(e).find(".error-message").length>0)return!1;for(var t=$(e).find('[data-validate*="required"]'),n=0;n<t.length;n++){var i=$(t[n]),a=this.value(i);if((i.is(":visible")||i.is("select"))&&!a)return!1}return!0},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.init()},destroy:function(){this.inputs=null}};var $d="validate",Ec={type:"error",inline:!0};$.fn.validation=pa,$.fn.getMessage=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),n=$.fn.getField($(this)).data(t),i="";if(n){if(n.length===1)return n[0].message;for(var a=0;a<n.length;a++)i+="\u2022 ".concat(n[a].message)}return i},$.fn.getMessages=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),n=$.fn.getField($(this)).data(t);return n||(n=[]),n},$.fn.getField=function(e){return e.is("select")&&e.data("dropdown")!==void 0&&(e=e.data("dropdown").pseudoElem),e},$.fn.getErrorMessage=function(e){return Pn("$.fn.getMessage","$.fn.getErrorMessage"),e=N.extend({},e,Ec),$(this).getMessage(e)},$.fn.scrollIntoView=function(e,t){typeof e!="boolean"&&(e=void 0);var n=new po(this,t).getField($(this));n[0].scrollIntoView(e),n.focus(),n.is("input.checkbox")&&(n=n.next(".checkbox-label"))[0]&&n[0].scrollIntoView(e)},$.fn.addMessage=function(e){return this.each(function(){var t=$.data(this,nl);t||(t=$.data(this,nl,new po(this,e)));var n={message:e.message,type:e.type,triggerEvents:e.triggerEvents,icon:e.icon,id:e.id||e.message},i=$(this);t.addMessage(i,n,e.inline,e.showTooltip,e.isAlert),t.setIconOnParent(i,e.type)})},$.fn.addError=function(e){Pn("$.fn.addMessage","$.fn.addError");var t=!0;return typeof e.inline=="boolean"&&e.inline===!1&&(t=!1),(e=N.extend({},e,Ec)).inline=t,this.each(function(){$(this).addMessage(e)})},$.fn.removeMessage=function(e){return e||(e={type:"error"}),this.each(function(){var t=$.data(this,nl);t||(t=$.data(this,nl,new po(this,e)));var n=$(this),i="".concat(e.type,"message"),a=$.fn.getField(n).data(i);if(n.hasClass("error")&&e.type==="error"&&n.removeClass("error"),a){for(var r=0;r<a.length;r++)t.removeMessage(n,a[r],e.triggerEvents);t.setIconOnParent(n,e.type),$.removeData(this,nl)}})},$.fn.removeError=function(e){return Pn("$.fn.removeMessage","$.fn.removeError"),e=N.extend({},e,Ec),this.each(function(){return $(this).removeMessage(e)})},$.fn.validate=function(e,t){var n=typeof e=="string";return this.each(function(){var i=$.data(this,$d);if(i&&typeof i!="string"){if(n)return void(typeof i[e]=="function"&&i[e](t));i.updated(e)}else i=$.data(this,$d,new po(this,e))})},$.fn.isValid=function(){var e=$(this).data("isValid");return e==null||e},$.fn.validateField=function(){var e=$(this),t=Soho.components.Validator.prototype;t&&t.validate&&t.validate(e,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var $c="datepicker",Wu=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],Dc={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,showWeekNumber:!1,hideDays:!1,hitbox:!1,yearsAhead:3,yearsBack:2,legend:[],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1,attributes:null,autocompleteAttribute:"off",useMask:!0,tabbable:!0,incrementWithKeyboard:!1,todayWithKeyboard:!1};function Dd(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Dc),this.settings.legend&&this.settings.legend.length===0&&(this.settings.legend=Wu),this.init()}Dd.prototype={init:function(){this.build(),this.handleEvents()},build:function(){var e,t=this.settings.autocompleteAttribute;typeof t=="string"&&t.length?this.element.attr("autocomplete","".concat(_e.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.next();n.is("button.trigger")?this.trigger=n:this.trigger=$('<button class="btn-icon trigger" type="button" '.concat(this.settings.hitbox?'data-options="{hitbox: true}"':"",`>
        <span class="audible"></span>
        `).concat($.createIcon("calendar"),`
      </button>`)).insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.makeTabbable(!this.element.is(":disabled")&&this.element.attr("tabindex")!=="-1"&&this.settings.tabbable),this.setExtraAttributes(),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar(),(e=this.trigger)!==null&&e!==void 0&&e?.data("button")||this.trigger.button()},setLocale:function(){var e=this,t=this.settings;this.locale=L.currentLocale,this.settings.language?(L.getLocale(this.settings.language),this.language=this.settings.language):this.language=L.currentLanguage.name,t.locale&&L.getLocale(t.locale).done(function(n){var i=e.getSimilarApi("locale",n);i.forEach(function(a){a.locale=L.cultures[n],a.language=e.settings.language||a.locale.language,a.setCurrentCalendar()}),i.length===0&&(e.locale=L.cultures[n],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar())}),t.language&&L.getLocale(t.language).done(function(){e.getSimilarApi("language",t.language).forEach(function(n){n.language=t.language})})},getSimilarApi:function(e,t){var n=[].slice.call(document.querySelectorAll(".datepicker")),i=[];return n.forEach(function(a){var r=$(a).data("datepicker");r&&r.settings[e]===t&&i.push(r)}),i},setCurrentCalendar:function(){this.currentCalendar=L.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic=this.currentCalendar.name==="islamic-umalqura",this.isRTL=(this.locale.direction||this.locale.data.direction)==="right-to-left",this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]'));var e=". ".concat(L.translate("PressDown",{locale:this.locale.name,language:this.language})),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>")),this.trigger.children(".audible").text(L.translate("DatePickerTriggerButton"))},handleKeys:function(e){var t=this,n=this.settings;if(e.is("#monthview-popup"))return e.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",function(i){var a=!1,r=i.keyCode||i.charCode||0;return r===9&&(t.containFocus(i),a=!0),r===27&&(t.closeCalendar(),t.element.focus(),i.stopImmediatePropagation(),a=!0),r===84&&(t.closeCalendar(),t.element.focus(),a=!0),!a||(i.stopPropagation(),i.preventDefault(),!1)}),void e.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",function(i){return(i.keyCode||i.charCode||0)!==9||(n.range.useRange&&$(i.target).is(".next")&&!n.range.selectWeek?t.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():t.containFocus(i),i.stopPropagation(),i.preventDefault(),!1)});e.off("keydown.datepicker").on("keydown.datepicker",function(i){var a,r=!1,o=i.keyCode||i.charCode||0,c=((a=t.settings)===null||a===void 0||(a=a?.dateFormat)===null||a===void 0||a==null?void 0:a.indexOf("-"))>-1;if(o!==40||t.isOpen()||(r=!0,t.openCalendar(),setTimeout(function(){t.setFocusAfterOpen()},200)),!n.range.useRange&&o===84&&t.settings.todayWithKeyboard&&(r=!0,t.setToday()),!n.range.useRange&&!c&&t.settings.incrementWithKeyboard){var u=$(i.currentTarget).val();(o===189||o===109||Be.browser.isFirefox()&&o===173)&&(r=!0,t.adjustDay(!1,u)),(o===187||o===107||Be.browser.isFirefox()&&o===61)&&(r=!0,t.adjustDay(!0,u))}return!r||(i.stopPropagation(),i.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,n=this.popup.find(":focusable"),i=$(e.currentTarget);(i.is(".monthview-monthyear-pane, #btn-monthyear-pane")||i.closest(".is-monthyear.is-monthonly").length>0)&&(n=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var a=n.index($(":focus"));a=t?a-1<0?n.length-1:a-1:a+1>=n.length?0:a+1,n.eq(a).focus()},setFormat:function(){var e=this.settings,t=at(L)==="object"&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,n=at(L)==="object"&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;at(L)==="object"&&this.settings.calendarName&&(t=L.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,n=L.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),at(t)==="object"&&t.short!==void 0&&(t=t.short),e.dateFormat==="locale"?(this.pattern=t+(e.showTime?" ".concat(e.timeFormat||n):""),e.dateFormat=this.pattern):this.pattern=e.dateFormat+(e.showTime&&e.timeFormat?" ".concat(e.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){if(this.settings.useMask){this.setFormat();var e=this.settings,t={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},n="date availableDate",i={date:"change blur enter",availableDate:"change blur"};e.range.useRange&&(t.process="rangeDate",t.patternOptions.delimeter=e.range.separator,n="rangeDate",i={rangeDate:"change blur"}),t.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:this.element.data("mask")===void 0&&this.element.mask(t),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":n,"data-validation-events":JSON.stringify(i)}).validate()),this.setPlaceholder()}},setPlaceholder:function(){var e,t=this,n=this.settings,i=this.pattern;!n.placeholder||this.element.attr("placeholder")&&this.element.attr("placeholder")!=="M / D / YYYY"||(n.range.useRange&&(i=n.range.first&&n.range.first.date?(e=n.range.first.date,L.formatDate(e,{pattern:t.pattern,locale:t.locale.name})+n.range.separator+this.pattern):this.pattern+n.range.separator+this.pattern),this.element[0].setAttribute("placeholder",i))},setExtraAttributes:function(){this.settings.attributes&&(N.addAttributes(this.element,this,this.settings.attributes),N.addAttributes(this.trigger,this,this.settings.attributes,"trigger"))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},loadLegend:function(e){e===void 0||e.length<1||this.calendarAPI.loadLegend(e)},openCalendar:function(){var e=this,t=this,n=this.settings,i={};if(!this.element.is(":disabled")&&!this.element.attr("readonly")||this.element.closest(".monthview").length!==0){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var a=`<button type="button" class="is-cancel btn-tertiary">
      `.concat(L.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),`
    </button>`),r=` <button type="button" class="is-select btn-primary">
      `.concat(L.translate("Apply",{locale:this.locale.name,language:this.language}),`
    </button>`);if(this.footer=$(""+`<div class="popup-footer">
        `.concat(this.isRTL?r+a:a+r,`
      </div>`)),n.hideDays&&(this.footer=$(""+`<div class="popup-footer">
          <button type="button" class="is-cancel btn-tertiary">
            `.concat(L.translate("Clear",{locale:this.locale.name,language:this.language}),`
          </button>
          <button type="button" class="is-select-month btn-primary">
            `).concat(L.translate("Apply",{locale:this.locale.name,language:this.language}),`
          </button>
        </div>`))),n.hideButtons&&(this.footer=$("")),n.showTime&&(n.timeFormat===void 0?i.timeFormat=this.pattern.slice(this.pattern.indexOf(" ")).trim():i.timeFormat=n.timeFormat,n.minuteInterval!==void 0&&(i.minuteInterval=n.minuteInterval),n.secondInterval!==void 0&&(i.secondInterval=n.minuteInterval),n.mode!==void 0&&(i.mode=n.mode),n.roundToInterval!==void 0&&(i.roundToInterval=n.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){this.element.val()===""&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var o=this.settings.timeFormat?this.settings.timeFormat:null;o||(o=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),i.parentElement=this.timepickerContainer,i.locale=this.settings.locale,i.language=this.settings.language,this.time=L.formatDate(this.currentDate,{pattern:o,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(i).data("timepicker"),this.setUseCurrentTime(),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",function(){var w=e.setTime(t.isIslamic?t.currentDateIslamic:t.currentDate);e.setValue(w,!0,!0)}),setTimeout(function(){e.timepicker.initValues=e.timepicker.getTimeFromField(e.time),e.timepicker.afterShow(e.timepickerContainer)},1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=L.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.year=this.currentYear,this.settings.month=this.currentMonth,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?L.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.currentDate=this.settings.activeDate,this.isIslamic?(this.settings.activeDateIslamic=L.gregorianToUmalqura(this.settings.activeDate),this.settings.year=this.settings.activeDateIslamic[0],this.settings.month=this.settings.activeDateIslamic[1]):(this.settings.year=this.settings.activeDate.getFullYear(),this.settings.month=this.settings.activeDate.getMonth())):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentDateIslamic||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(w,C){if(e.currentDate=new Date(C.year,C.month,C.day),t.settings.range.useRange&&t.settings.range.first&&t.settings.range.selectWeek){var A=kn.firstDayOfWeek(new Date,e.settings.firstDayOfWeek),S=kn.lastDayOfWeek(new Date,e.settings.firstDayOfWeek);return t.settings.range.first={},t.settings.range.second=void 0,t.setWeekRange({day:A.getDate(),month:A.getMonth(),year:A.getFullYear()},{day:S.getDate(),month:S.getMonth(),year:S.getFullYear()}),t.closeCalendar(),void t.element.focus()}t.settings.range.useRange&&t.settings.range.first&&!t.settings.range.selectWeek||(t.insertDate(e.currentDate),C.close&&(t.closeCalendar(),t.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(w){return w.key!==37&&w.key!==39&&w.key!==38&&w.key!==40&&w.key!==13}),this.calendarAPI=new He(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,this.calendar.on("beforemonthrendered",function(){e.element.trigger("beforemonthrendered")}),this.calendar.on("monthrendered",function(w,C){e.element.trigger("monthrendered",C)}),this.element.trigger("monthrendered",{year:this.calendarAPI.currentYear,month:this.calendarAPI.currentMonth,elem:this.calendar,api:this.calendarAPI}),n.showTime&&this.calendar.addClass("is-timepicker"),n.hideDays&&(this.calendar.addClass("is-monthyear"),n.dateFormat!=="MMMM"&&n.dateFormat!=="MMM"&&n.dateFormat!=="MM"||this.calendar.addClass("is-monthonly"),n.dateFormat==="yyyy"&&this.calendar.addClass("is-yearonly")),this.calendar.append(n.showTime?this.timepickerContainer:"",this.footer);var c=this.element,u=this.isRTL?"right":"left",p=this.element.parent();p.is(".datagrid-cell-wrapper")&&(u="center",c=this.element.next(".icon, .trigger"));var m="bottom";p.offset().top<400&&p.offset().top>185&&window.innerHeight<800&&(m=L.isRTL()?"left":"right");var v={content:this.calendar,placementOpts:{parent:c,parentXAlignment:u,strategies:["flip","nudge","shrink"]},placement:m,popover:!0,appendTo:this.settings.appendTo,trigger:"immediate",isRangeDatepicker:n.range.useRange,extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1};this.trigger.popover(v).off("show.datepicker").on("show.datepicker",function(){if(window.innerHeight<400&&e.popupClosestScrollable&&e.popupClosestScrollable.length===1&&(e.popup.find(".arrow").hide(),e.popup.css({"min-height":$("html").hasClass("theme-new-light")?"":"".concat(e.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popupClosestScrollable.children().not(".popover").css("padding-top","80px"),e.popupClosestScrollable.css("min-height","375px")),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popup.css({top:"".concat(e.popup.position().top<0?0:e.popup.position().top+50,"px")}),e.settings.hideButtons&&e.popup.addClass("hide-buttons"),e.settings.showMonthYearPicker&&(e.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),e.popup.find(".btn-monthyear-pane").button()),e.settings.range.selectWeek){var w=e.popup.find("tbody");e.popup.find(".monthview-table tr").hover(function(C){var A=$(C.currentTarget);w.find("td").removeClass("is-selected range-selection end-date"),A.find("td").addClass("range-selection")})}}).off("hide.datepicker").on("hide.datepicker",function(){setTimeout(function(){e.popupClosestScrollable.children().not(".popover").css("padding-top",""),e.popupClosestScrollable.add(e.popup).css("min-height",""),e.closeCalendar()},1)}),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentDateIslamic=this.currentDateIslamic,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",function(){var w=$(this);if(w.hasClass("is-disabled"))t.calendarAPI.activeTabindex(w,!0);else{if(!n.range.useRange||n.range.first&&!n.range.second||n.range.selectWeek||t.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),n.range.useRange&&n.range.selectWeek){var C=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").first()),A=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").last());return void t.setWeekRange(C,A)}n.range.useRange||t.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var S=$(this);S.addClass("is-selected".concat(n.range.useRange?" range":"")).attr("aria-selected","true"),t.lastValue=null,t.insertSelectedDate(S),n.range.useRange?t.isFocusAfterClose=!0:n.showTime||(t.closeCalendar(),t.element.focus())}}),this.footer.off("click.datepicker").on("click.datepicker","button",function(w){var C=$(this);if(C.hasClass("is-cancel")&&(t.settings.isMonthPicker||(t.element.val("").trigger("change").trigger("input"),t.currentDate=null,t.clearRangeDates()),t.closeCalendar(),t.element.focus()),C.hasClass("is-cancel-month-pane")&&t.calendarAPI.monthYearPane.data("expandablearea").close(),C.hasClass("is-select-month")||C.hasClass("is-select-month-pane")){var A=parseInt(t.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),S=parseInt(t.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);t.currentDate=new Date(A,S,1),t.isIslamic&&(t.currentDateIslamic[0]=A,t.currentDateIslamic[1]=S,t.currentDateIslamic[2]=1,t.currentYear=A,t.currentMonth=S,t.currentDay=1,t.currentDate=L.umalquraToGregorian(A,S,1)),n.range.useRange?t.isFocusAfterClose=!1:C.hasClass("is-select-month")&&(t.insertDate(t.isIslamic?t.currentDateIslamic:t.currentDate),t.closeCalendar()),C.hasClass("is-select-month-pane")&&t.calendarAPI.showMonth(S,A)}if(C.hasClass("is-select")){var M=t.calendarAPI.setRangeSelByClick();if(M===1)t.closeCalendar();else if(M===2)t.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]),t.closeCalendar();else{if(M===3)return void w.preventDefault();t.insertSelectedDate(),t.closeCalendar()}C.hasClass("is-select-month-pane")||t.element.focus()}w.preventDefault(),C.hasClass("is-select-month-pane")&&(t.calendarAPI.monthYearPane.data("expandablearea").close(),t.popup.find(".btn-primary.is-select").focus())}),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today:not(.is-disabled)",function(w){w.preventDefault(),n.range.useRange?(t.setToday(!0),(!n.range.second||n.range.second&&!n.range.second.date)&&w.preventDefault()):(t.setToday(),t.closeCalendar())}),setTimeout(function(){N.addAttributes(e.popup.find(".btn-monthyear-pane"),e,e.settings.attributes,"btn-monthyear"),N.addAttributes(e.popup.find(".is-cancel"),e,e.settings.attributes,"btn-cancel"),N.addAttributes(e.popup.find(".is-select"),e,e.settings.attributes,"btn-select"),t.calendarAPI.validatePrevNext(),t.setFocusAfterOpen()},50)}},setUseCurrentTime:function(){if(this.settings.useCurrentTime&&this.timepicker.minuteSelect.length){var e=this.isSeconds&&this.timepicker.secondSelect.length,t=function(a){return(a<10?"0":"")+a},n=function(a,r){a.find("option:contains(".concat(r,")")).length||(a.find("option:selected").prop("selected",!1),a.prepend($("<option selected >".concat(r,"</option>"))))},i=new Date;n(this.timepicker.minuteSelect,t(i.getMinutes())),e&&n(this.timepicker.secondSelect,t(i.getSeconds())),typeof this.time=="string"&&this.time!==""&&this.currentDate&&this.currentDate.getDate()&&(n(this.timepicker.minuteSelect,t(this.currentDate.getMinutes())),e&&n(this.timepicker.secondSelect,t(this.currentDate.getSeconds())))}},clearRangeDates:function(){var e=this.settings;e.range.useRange&&(e.range.start=Dc.range.start,e.range.end=Dc.range.end,e.range.data&&delete e.range.data)},insertSelectedDate:function(e){var t=this,n=t.calendarAPI.getCellDate(e||t.calendar.find("td.is-selected").last()),i=n.day,a=n.month,r=n.year;t.currentDate=new Date(r,a,i),t.isIslamic&&(t.currentDateIslamic[0]=r,t.currentDateIslamic[1]=a,t.currentDateIslamic[2]=i,t.currentYear=r,t.currentMonth=a,t.currentDay=i,t.currentDate=L.umalquraToGregorian(r,a,i)),t.insertDate(t.isIslamic?t.currentDateIslamic:t.currentDate)},setWeekRange:function(e,t){var n=this.settings;n.range.first.date=new Date(e.year,e.month,e.day),n.range.second=void 0,this.setValue(new Date(t.year,t.month,t.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){this.closeCalendar()},closeCalendar:function(){var e=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:e}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var t=this.trigger.data("popover");t&&t.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var e=this.settings;if(this.calendar){if(e.range.useRange&&(e.range.first&&e.range.first.label&&(!e.range.second||e.range.second&&!e.range.second.date)&&this.setRangeFirstPart(e.range.first.date),this.calendarAPI.setRangeSelected(),e.range.second&&e.range.first.date&&e.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,e.range.useRange&&e.range.selectWeek){var t=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void t.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(e){var t=this.settings,n=function(m){return new Date(m.year,m.month,m.day)},i=this.calendarAPI.days.find("td:visible:first"),a=this.calendarAPI.days.find("td:visible:last"),r=this.isIslamic?ot.padDate(e[0],e[1],e[2]):ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()),o=this.calendarAPI.days.find('[data-key="'.concat(r,'"]')),c=o.closest("tr");this.isIslamic?(this.currentDate=L.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e;var u=this.calendarAPI.getCellDate(i),p=this.calendarAPI.getCellDate(a);t.range.first={date:this.isIslamic?Nt(e):e,cell:o,row:c,rowIdx:c.index(),cellIdx:o.index()},t.range.extra={minCell:i,maxCell:a,min:this.isIslamic?[u.year,u.month,u.day]:n(u),max:this.isIslamic?[p.year,p.month,p.day]:n(p),cellLength:c.children("td").length},this.calendarAPI.settings.range.first=t.range.first,this.calendarAPI.settings.range.extra=t.range.extra},insertDate:function(e,t){var n=this.settings,i="",a="",r="";if(e instanceof Array)i=e[0],a=e[1],r=e[2].toString();else{if(!(e instanceof Date)||isNaN(this.getTime(e)))return;i=e.getFullYear(),a=e.getMonth(),r=e.getDate().toString()}if(this.calendarAPI.currentMonth===a&&this.calendarAPI.currentYear===i||this.calendarAPI.showMonth(a,i),this.isOpen()){var o=this.calendarAPI.days.find("td:not(.alternate)").filter(function(){return $(this).text().toLowerCase()===r});o.hasClass("is-disabled")||(this.settings.showTime&&(t?(this.time=L.formatDate(e,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),e=this.setTime(e))):e=this.setTime(e)),this.setValue(e,!0),n.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),o.addClass("is-selected".concat(n.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(o,!0)}},setValue:function(e,t,n){var i=this.settings;if(this.currentDate=e,this.currentDate===""||this.currentDate===void 0)return this.element.val(""),void this.clearRangeDates();e instanceof Array&&(this.currentDateIslamic=e,this.currentDate=L.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5])),i.range.useRange?n||this.setRangeToElem(e,!1):this.element.val(L.formatDate(e,{pattern:this.pattern,locale:this.locale.name})),t&&(i.range.useRange?n||this.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]):this.element.trigger("change").trigger("input"))},getTime:function(e){return Array.isArray(e)?e.join(""):e.getTime()},setRangeToElem:function(e,t){var n=this,i=this.settings,a=function(w){return L.formatDate(w,{pattern:n.pattern,locale:n.locale.name})},r=a(e),o=!1;if(this.isOpen()){var c=this.isIslamic?ot.padDate(e[0],e[1],e[2]):ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()),u=this.calendarAPI.days.find('[data-key="'.concat(c,'"]')),p=u.closest("tr");i.range.second&&(i.range.second.date?this.resetRange({cell:u}):(delete i.range.second.date,$.isEmptyObject(i.range.second)&&delete i.range.second));var m={};i.range.first&&(m.date=this.getTime(e),m.firstdate=this.getTime(i.range.first.date),m.min=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.minDays),m.max=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.maxDays)),!i.range.first||t?(this.setRangeFirstPart(e),r=this.getRangeValue(),this.setPlaceholder()):!i.range.second&&i.range.selectBackward&&m.date>m.firstdate||i.range.selectForward&&m.date<m.firstdate||i.range.maxDays>0&&m.date>m.max.aftertime||m.date<m.max.beforetime?(this.resetRange({cell:u}),this.setRangeFirstPart(e),r=this.getRangeValue(),this.setPlaceholder()):(o=!0,this.isIslamic?(this.currentDate=L.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e,i.range.minDays>0&&(m.date>=m.firstdate&&m.date<m.min.aftertime?(e=m.min.after,m.date===m.firstdate&&(m.date=this.getTime(e))):m.date<m.firstdate&&m.date>m.min.beforetime&&(e=m.min.before),c=this.isIslamic?ot.padDate(e[0],e[1],e[2]):ot.padDate(e.getFullYear(),e.getMonth(),e.getDate()),p=(u=this.calendarAPI.days.find('[data-key="'.concat(c,'"]'))).closest("tr")),m.date>m.firstdate?i.range.second={date:e,cell:u,row:p,rowIdx:p.index(),cellIdx:u.index()}:(i.range.second=i.range.first,i.range.first={date:e,cell:u,row:p,rowIdx:p.index(),cellIdx:u.index()}),r=this.getRangeValue())}else if(!t){o=!0;var v=e||new Date;this.currentMonth=v.getMonth(),this.currentYear=v.getFullYear(),this.currentDay=v.getDate(),this.currentDate=v,i.range.first=i.range.first||{},i.range.second=i.range.second||{},i.range.first.date=v,i.range.second.date=v,i.range.end&&e&&(typeof i.range.end=="string"?i.range.second.date=L.parseDate(i.range.end,{pattern:this.pattern,locale:this.locale.name},!1):i.range.second.date=i.range.end),r=this.getRangeValue()}this.element.val(r),o?(i.range.data={value:r,dates:this.calendarAPI?this.calendarAPI.getDateRange(i.range.first.date,i.range.second.date):[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date),endDate:i.range.second.date,end:a(i.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):i.range.data={value:r,dates:[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date)}},resetRange:function(e){e=e||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,e.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,e.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),e.cell&&e.cell.addClass("is-selected"))},setRangeValueFromField:function(){var e,t=this,n=function(p){return L.formatDate(p,{pattern:t.pattern,locale:t.locale.name})},i=function(p){return L.parseDate(p,{pattern:t.pattern,locale:t.locale.name},!1)},a=function(p){return p&&typeof p.getTime=="function"?p:new Date},r=function(p){var m=i(p[0]),v=i(p[1]),w=t.isIslamic&&Array.isArray(m);return w||(m=L.gregorianToUmalqura(new Date(p[0])),v=L.gregorianToUmalqura(new Date(p[1]))),m&&v?(m=t.getTime(a(m)),v=t.getTime(a(v)),t.isIslamic&&!w&&(p[0]=L.gregorianToUmalqura(new Date(p[0])),p[1]=L.gregorianToUmalqura(new Date(p[1]))),m>v?[p[1],p[0]]:[p[0],p[1]]):p},o=this.settings,c={};if(c.value=o.range.value||this.element.val().trim(),c.isEmpty=c.value==="",!c.isEmpty&&c.value.indexOf(o.range.separator)>-1?c.dates=r(c.value.split(o.range.separator)):!c.isEmpty&&c.value.indexOf(o.range.separator.slice(0,-1))>-1?c.dates=c.value.split(o.range.separator.slice(0,-1)):c.isEmpty||c.value.indexOf(o.range.separator)!==-1||(c.dates=[n(c.value)]),!o.range.data&&o.range.start&&o.range.end&&c.isEmpty&&(e=typeof o.range.start=="string"&&typeof o.range.end=="string"?r([o.range.start,o.range.end]):typeof o.range.start!="string"&&typeof o.range.end=="string"?r([n(o.range.start),o.range.end]):typeof o.range.start=="string"&&typeof o.range.end!="string"?r([o.range.start,n(o.range.end)]):r([n(o.range.start),n(o.range.end)]),o.range.start=n(e[0]),o.range.end=n(e[1])),o.range.first=o.range.first||{},o.range.second=o.range.second||{},o.range.data&&o.range.data.startDate?o.range.first.date=o.range.data.startDate:o.range.start&&typeof o.range.start=="string"?o.range.first.date=i(o.range.start):c.dates&&(o.range.first.date=this.isIslamic&&Array.isArray(c.dates[0])?c.dates[0]:i(c.dates[0])),o.range.data&&o.range.data.endDate?o.range.second.date=o.range.data.endDate:o.range.end&&typeof o.range.end=="string"?o.range.second.date=i(o.range.end):c.dates&&(o.range.second.date=this.isIslamic&&Array.isArray(c.dates[1])?c.dates[1]:i(c.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!c.isEmpty&&(c.isEmpty||o.range.data))return!1;var u=n(o.range.first.date);return u&&this.element.val(u),!0},setValueFromField:function(){var e=this,t=this.settings;if(this.setCurrentCalendar(),t.range.useRange&&this.element.val().trim()===""&&this.resetRange({isData:!0}),t.range.useRange&&(this.element.val().trim()!==""||t.range.start&&t.range.end||t.range.data&&t.range.data.startDate&&t.range.data.endDate)&&!this.setRangeValueFromField())return this.currentDate&&typeof this.currentDate.getMonth=="function"&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate()),void(this.currentDate&&this.isIslamic&&(this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]));var n=this,i=this.element.val(),a=i;if(this.isIslamic&&i){var r=L.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});r instanceof Date?a=L.umalquraToGregorian(r.getFullYear(),r.getMonth(),r.getDate()):r instanceof Array&&(a=L.umalquraToGregorian(r[0],r[1],r[2],r[3],r[4],r[5]))}var o=function(){var w=new Date().getDate();if(e.calendarAPI){var C=e.calendarAPI.dayMap.filter(function(A){return A.elem.is(".is-selected")});C.length&&(w=parseInt(C[0].key.substr(6),10))}return w}();this.currentDate=a||new Date,typeof this.currentDate=="string"&&(this.currentDate=L.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&this.pattern.indexOf("d")===-1&&this.currentDate.setDate(o)),this.currentDate===void 0&&(this.currentDate=L.parseDate(a,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=L.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var c=n.pattern,u=!(c.indexOf("MMMM")>-1||c.indexOf("MMM")>-1||c==="yyyy"||c==="MMMM"||c==="MMM"||c==="MM"),p=n.element.val().trim();if(p!==""&&!t.range.useRange){var m=L.parseDate(p,{pattern:n.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},u),v=0;v=this.isIslamic?m[3]:m==null||m==null?void 0:m.getHours(),!this.isIslamic&&m&&v<12&&n.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&this.currentCalendar.dayPeriods[1]!==""&&m.setHours(v+12),this.isIslamic&&m&&v<12&&n.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&(v+=12),!this.isIslamic&&n.pattern&&n.pattern.indexOf("d")===-1&&m.setDate(o),this.isIslamic&&n.pattern&&n.pattern.indexOf("d")===-1&&(m[2]=o),m===void 0||n.element.val().trim()===""||t.range.useRange||(n.setValue(m),p!==n.element.val().trim()&&this.element.trigger("change").trigger("input"))}t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&(t.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.prop("disabled",!1)},disable:function(){this.element.removeAttr("readonly").attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly"),this.trigger.prop("disabled",!1)},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},setToday:function(e){var t=this.settings;if(this.lastValue=null,this.currentDate=new Date,!this.isReadonly()&&!this.isDisabled()){if(this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var n=L.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=n}var i=this.isIslamic?this.currentDateIslamic:this.currentDate,a=!1;if(this.isOpen())if(t.range.useRange)if(!t.range.first||t.range.first&&!t.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(i,!0),e&&this.calendarAPI){var r=this.calendarAPI.dayMap.filter(function(u){return u.elem.is(".is-selected")});r&&r.length&&setTimeout(function(){r[0].elem.focus()},0)}}else t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date)?(this.setRangeToElem(i,!1),a=!0):t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(i,!0));else this.insertDate(i,!0);else{if(t.range.useRange)this.setRangeToElem(this.currentDate);else{var o={pattern:this.pattern,locale:this.locale.name},c=L.formatDate(i,o);this.element.val(c)}a=!0}a&&(t.range.useRange?this.element.trigger("change",[t.range.data]).trigger("input",[t.range.data]):this.element.trigger("change").trigger("input"))}},adjustDay:function(e,t){if(!this.isReadonly()&&!this.isDisabled()){this.currentDate||(t.length>0&&/(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}/.test(t)?this.setValue(new Date(t),!0,!0):this.setToday());var n={pattern:this.pattern,locale:this.locale.name},i=this.isIslamic?this.currentDateIslamic:this.currentDate;this.isIslamic?(i[2]+=e?1:-1,(i=L.umalquraToGregorian(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2],this.currentDateIslamic[3],this.currentDateIslamic[4],this.currentDateIslamic[5],this.currentDateIslamic[6])).setDate(i.getDate()+(e?1:-1)),i=L.gregorianToUmalqura(i)):i.setDate(i.getDate()+(e?1:-1)),this.element.val(L.formatDate(i,n)),this.element.trigger("change").trigger("input")}},setTime:function(e){var t=this.popup!==void 0;if(!this.timepicker||!t)return this.settings.useCurrentTime||e.setHours(0,0,0,0),e;var n=this.popup.find(".dropdown.hours").val(),i=this.popup.find(".dropdown.minutes").val(),a=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,r=this.popup.find(".dropdown.period"),o=r.val();return n=r.length&&o===this.currentCalendar.dayPeriods[1]&&n<12?parseInt(n,10)+12:n,n=!r.length||o!==this.currentCalendar.dayPeriods[0]&&o||parseInt(n,10)!==12?n:0,e instanceof Array?(e[3]=n?parseInt(n,10):e[3],e[4]=i?parseInt(i,10):e[4],e[5]=a?parseInt(a,10):e[5]):(e=new Date(e)).setHours(n,i,a),e},getCurrentDate:function(){return this.currentDate},updated:function(e){e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Dc)),this.teardown(),this.init(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},getRangeValue:function(){var e=this,t=this.settings,n=function(i){return L.formatDate(i,{pattern:e.pattern,locale:e.locale.name})};return t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date?"".concat(n(t.range.first.date)+t.range.separator+n(t.range.second.date)):t.range.useRange&&t.range.first&&t.range.first.date?t.placeholder?"".concat(n(t.range.first.date)+t.range.separator+this.pattern):n(t.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var e=this.element.data("mask");return e&&e.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],$c)},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.trigger.on("click.datepicker",function(){t.isOpen()?t.closeCalendar():t.openCalendar()}),this.handleKeys(this.element),t.element.on("blur.datepicker",function(){e.element.val().trim()!==""&&e.setValueFromField()}),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",function(){e.isOpen()||e.element.val().trim()!==""||t.clearRangeDates()}),!this.isOpen()&&n.range.useRange&&!n.range.first){this.setRangeValueFromField();var i=this.getRangeValue();i&&this.element.val(i)}}},$.fn.datepicker=function(e){return this.each(function(){var t=$.data(this,$c);t?t.updated(e):t=$.data(this,$c,new Dd(this,e))})};var Uu=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function Za(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"p",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;if(!e||typeof e!="string"||!t.length)throw new Error('"id" property must be defined and unique.');if(this.id=e,!t||typeof t!="string"||!t.length)throw new Error('"displayName" property must be defined.');return this.displayName=t,n=n.toLowerCase(),Uu.indexOf(n)===-1&&(n="p"),this.tagName=n,typeof i=="string"&&i.length&&(this.className=i),a instanceof CSSStyleDeclaration&&(this.styleProps=a),this}Za.prototype={render:function(e){return e=_e.stripHTML(e),"<".concat(this.tagName,">").concat(e,"</").concat(this.tagName,">")}};var fo="fontpicker";function Id(){return{popupmenuSettings:{offset:{y:10}},styles:[new Za("default",L.translate("FontPickerNormal")),new Za("header1",L.translate("FontPickerHeader").replace("{0}","1"),"h3"),new Za("header2",L.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function Md(e,t){if(!(e instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=N.mergeSettings(e,t,Id()),t&&Array.isArray(t.styles)&&(this.settings.styles=t.styles),this.element=e,this.init()}Md.prototype={get menuAPI(){var e=$(this.element).data("popupmenu");if(e)return e},get selected(){var e;return this.settings.styles.forEach(function(t){t.selected&&(e=t)}),e||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(e){var t;if(this.settings.styles.forEach(function(n){n.id===e&&(t=n)}),!t)throw new Error('No FontPickerStyle available with id "'.concat(e,'"'));return t},getStyleByTagName:function(e){var t;if(this.settings.styles.forEach(function(n){n.tagName===e&&(t=n)}),!t)throw new Error('No FontPickerStyle available with tagName "'.concat(e,'"'));return t},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,this.element.disabled=e===!0},get supportedTagNames(){var e=[];return this.settings.styles.forEach(function(t){e.push(t.tagName)}),e},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=Id().styles),this.build().handleEvents()},build:function(){var e=$(this.element),t=this.element.querySelector("svg.icon.icon-dropdown");t||(t=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",t)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),e.button();var n=e.next(".popupmenu");n&&n.length||(n=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),n.html(this.buildMenuHTML());var i=N.extend({},this.settings.popupmenuSettings,{menu:n,stretchToWidestMenuItem:!0});return e.popupmenu(i),this.render(),this.audible=$('<span class="audible">'.concat(L.translate("FontPickerStyle"),"</span>")),this.element.prepend(this.audible[0]),this},render:function(){var e=this.selected,t=this.element.querySelector("span:not(.audible)");$(t).html(e.displayName)},buildMenuHTML:function(){var e="";return this.settings.styles.forEach(function(t){var n=t.render(t.displayName);e+=`<li class="fontpicker-style">
        <a href="#" data-val="`.concat(t.id,'">').concat(n,`</a>
      </li>`)}),"".concat(e)},handleEvents:function(){var e=this,t=this;return $(this.element).on("selected.".concat(fo),function(n,i){var a=i.attr("data-val");e.select(a)}).on("updated.".concat(fo),function(n,i){t.updated(i)}),this},select:function(e,t){if(!e||typeof e!="string"&&!(e instanceof Za))throw new Error('"id" property must be defined in order to select.');var n;n=e instanceof Za?e:this.getStyleById(e),this.settings.styles.forEach(function(i){i.selected=!1}),n.selected=!0,this.render(n),t||$(this.element).triggerHandler("font-selected",[n])},updated:function(e){var t;return e!==void 0&&(Array.isArray(e.styles)&&(t=e.styles),this.settings=N.mergeSettings(this.element,e,this.settings),t&&(this.settings.styles=t)),this.teardown().init()},teardown:function(){var e=this.element.querySelector("svg.icon.icon-dropdown");e.parentNode.removeChild(e);var t=this.menuAPI;t&&typeof t.destroy=="function"&&t.destroy();var n=$(this.element).data("button");return n&&typeof n.destroy=="function"&&n.destroy(),$(this.element).off(["selected.".concat(fo),"updated.".concat(fo)].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,fo)}},$.fn.fontpicker=function(e){return this.each(function(){var t=$.data(this,fo);t?t.updated(e):t=$.data(this,fo,new Md(this,e))})};var Ri="toolbar",Ld={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1,attributes:null};function il(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Ld),this.init()}il.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=Ld.maxVisibleButtons),this},build:function(){var e,t=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),Array.isArray(this.settings.attributes)&&N.addAttributes(this.element,this,this.settings.attributes),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.isModalToolbar=this.element.parent().is(".modal-body"),this.title=this.element.children(".title"),this.title.length&&!this.isModalToolbar?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",function(){return t.cutoffTitle}).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),this.more.length===0&&!this.element.hasClass("no-actions-button")){var n=this.element.find(".more");n.length||(n=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(L.translate("MoreActions"),"</span>")).attr("title",L.translate("More")).appendTo(n)}if(this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each(function(w){var C=$(this);C.data("button")||C.button(),!$(this).data("tooltip")&&C.attr("title")&&C.tooltip(),!C.is(".btn-menu")&&Array.isArray(t.settings.attributes)&&N.addAttributes(C,t,t.settings.attributes,"button-".concat(w))}),!this.settings.noSearchfieldReinvoke){var i=this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper"),a={};this.settings.placeholder&&(a.placeholder=this.settings.placeholder),i.each(function(w,C){var A=$(C);if(A.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(A=A.children(".searchfield")),!A.data("searchfield")){var S=$.extend(a,N.parseSettings(A[0]));A.searchfield(S)}N.addAttributes(A,t,t.settings.attributes,"searchfield")})}var r=this.more.data("popupmenu"),o=this.more.attr("aria-controls");r?this.moreMenu=r.menu:(this.moreMenu=$("#".concat(o)),this.moreMenu.length&&o!==void 0||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var c,u=[];this.items.not(this.more).not(".ignore-in-menu").filter(function(){return $(this).parent(".buttonset, .inline").length}).each(function(){u.push(t.buildMoreActionsMenuItem($(this)))}),u.reverse(),$.each(u,function(w,C){C.text()!==""&&C.prependTo(t.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(c=this.settings.moreMenuSettings.attributes),c&&c.length||!Array.isArray(this.settings.attributes)||(c=this.settings.attributes.map(function(w){var C="".concat(w.value,"-actionbutton");return{name:w.name,value:C}})),(e=c)!==null&&e!==void 0&&e?.length||(c=null);var p=N.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:c},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});r?this.more.on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}).triggerHandler("updated",[p]):this.more.popupmenu(p).on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}),function(){t.items.attr("tabindex","0");var w=t.buttonset.children("button");w&&w.attr("tabindex","0");var C=t.items.filter(".is-selected");if(C.length)return t.activeButton=C.first().attr("tabindex","0"),void t.items.not(t.activeButton).removeClass("is-selected");C=t.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),t.activeButton=C,t.element.is(":hidden, .is-hidden")?t.activeButton=t.items.filter(":not(:disabled)").first().attr("tabindex","0"):t.isItemOverflowed(C)&&(C.attr("tabindex","-1"),t.activeButton=t.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var m=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");m.length&&m.trigger("reanimate");var v=this.buttonset.find(".toolbar-searchfield-wrapper .searchfield");return v.length&&v[0].setAttribute("tabindex","0"),this},buildMoreActionsMenuItem:function(e){var t;if(e.data("skipit")===!0)return e.data("skipit",void 0),t;var n=e.data("action-button-link");n&&n.length?t=n.parent():(t=$("<li></li>"),n=$('<a href="#"></a>').appendTo(t),e.data("action-button-link",n),n.data("original-button",e)),e.hasClass("hidden")&&t.addClass("hidden"),e.is(":disabled")?(t.addClass("is-disabled"),n.prop("disabled",!0)):(t.removeClass("is-disabled"),n.prop("disabled",!1)),n.text(this.getItemText(e));var i=$.getBaseURL("#icon-dropdown"),a=e.children(".icon").filter(function(){var v=$(this).getIconName();return v&&v!==i&&v.indexOf("dropdown")===-1});a&&a.length&&(n.html("<span>".concat(n.text(),"</span>")),a.clone().detach().prependTo(n));var r=t.find("b");r.length&&(this.moreMenu.addClass("has-icons"),r.detach().prependTo(t));var o=this.items.not(this.more).not(".searchfield").index(e);if(e.is(".btn-menu")){var c,u;this.settings.attributes&&this.settings.attributes.length&&(u=this.settings.attributes.map(function(v){return{name:v.name,value:"".concat(v.value,"-menubutton-").concat(o)}})),(c=u)!==null&&c!==void 0&&c?.length||(u=null),e.data("popupmenu")?n.children(".icon.arrow").length||n.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu({attributes:u});var p=e.data("popupmenu").menu,m=p.clone();(function v(w,C,A){var S,M=w.children("li"),I=C.attr("id");C.children("li").each(function(z,V){var U=$(V),G=M.eq(z),J=U.children("a"),te=G.children("a"),de=U.attr("id"),H=J.attr("id");de&&U.removeAttr("id").attr("data-original-menu-item",de),H&&J.removeAttr("id").attr("data-original-menu-anchor",H),te.data("action-button-link",J),J.data("original-button",te);var he=G.children(".wrapper").children(".popupmenu"),ie=U.children(".wrapper").children(".popupmenu");he.length&&ie.length&&v(he,ie,U)}),C.removeAttr("id").attr("data-original-menu",I),A.addClass("submenu"),A.is(t)&&((S=A.children(".wrapper"))&&S.length||(S=$('<div class="wrapper"></div>')),S.html(C),A.append(S))})(p,m,t)}return e.is("[data-popdown]")&&e.popdown(),t},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each(function(){var n,i=$(this),a=i.parent(),r=i.data("originalButton"),o=t.getItemText(r);r&&(i.find("span").length?i.find("span").text(o.trim()):i.text(o.trim()),r.isHiddenAtBreakpoint()||r.parent().isHiddenAtBreakpoint()?a.addClass("hidden"):a.removeClass("hidden"),r.parent().is(".is-disabled")||r.is(":disabled")?(a.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(a.removeClass("is-disabled"),i.prop("disabled",!1)),r.is("a")&&(r.parent("li").is(".is-checked")?a.addClass("is-checked"):a.removeClass("is-checked")),r.is(".btn-menu")&&(n=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(n)))})},getItemText:function(e){if(!e)return"";var t,n=e.find("span").first(),i=e.attr("title"),a=e.data("tooltip"),r=a&&typeof a.content=="string"?a.content:void 0;return t=i!==""&&i!==void 0?i:r||(n.length?n.text():e.text()),_e.stripHTML(t)},handleEvents:function(){var e=this;return this.items.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("click.toolbar",function(t){e.handleClick(t)}).on("collapsed.toolbar.searchfield",function(){setTimeout(function(){e.handleResize()},150)}),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",function(){var t,n=$(this);n.is(".is-overflowed")?(t=e.getLastVisibleButton())&&t.length&&t[0].focus():document.activeElement&&document.activeElement.tagName==="INPUT"||(n&&n.focus(),e.buttonset.scrollTop(0))}),this.items.not(this.more).on("selected.toolbar",function(t,n){t.stopPropagation(),e.handleSelected(t,n)}),this.more.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("beforeopen.toolbar",function(){e.adjustMenuItemVisibility()}).on("selected.toolbar",function(t,n){t.stopPropagation(),e.handleSelected(t,n)}),this.more.on("show-submenu.toolbar",function(t,n){e.handleTransferToMenuButtonItem(t,n)}),this.element.on("updated.toolbar",function(t,n){t.stopPropagation(),e.updated(n)}).on("recalculate-buttons.toolbar",function(t,n){e.handleResize(n)}).on("scrollup.toolbar",function(){var t=e.element.parents(".tab-container.module-tabs");t.length&&t.scrollTop(0)}),$("body").on("resize.toolbar-".concat(this.id),function(){e.handleResize()}),this.handleResize(),this},handleTransferToMenuButtonItem:function(e,t){var n=t.children("a").data("original-button");if(n){var i=n.data("popupmenu");i&&typeof i.settings.beforeOpen=="function"&&(i.callSource(e),this.buildMoreActionsMenuItem(n))}},handleSelected:function(e,t){var n,i,a,r,o=t.data("original-button");if(t.parent().is(".hidden, .is-disabled")||t.is("[readonly], [disabled]"))e.preventDefault();else{if(o&&o.length>0){if(n=o.listEvents(),i=this.element.listEvents(),this.setActiveButton(o),o.is("[data-popdown]")&&(r=o.data("popdown"),this.isItemOverflowed(o)&&(r.settings.trigger=this.more,r.updated())),o.attr("ng-click")||o.attr("data-ng-click"))return void o.trigger("click");for(var c=["click","touchend","touchcancel"],u=0;u<c.length;u++){var p=c[u];if(i&&i[p]&&i[p].delegateCount>0){var m=this.element,v=$.Event(p);return v.target=m.find(o)[0],void m.trigger(v)}if(n&&n[p]||o[0]["on".concat(p)])return void o.trigger(p)}return r=(a=o.parents(".popupmenu")).data("trigger"),a.length&&r instanceof $&&r.length?void r.triggerHandler("selected",[o]):void this.triggerSelect(o)}this.triggerSelect(t)}},handleClick:function(e){return this.setActiveButton($(e.currentTarget)),this.triggerSelect($(e.currentTarget)),!1},handleKeys:function(e){var t=this,n=e.which,i=$(e.target),a=i.is(".btn-actions"),r=L.isRTL();(n===37&&i.is(":not(input)")||n===38&&i.is(":not(input.is-open)"))&&(e.preventDefault(),a?t.setActiveButton(r?t.getFirstVisibleButton():t.getLastVisibleButton()):t.navigate(r?1:-1)),(n===39&&i.is(":not(input)")||n===40&&i.is(":not(input.is-open)"))&&(e.preventDefault(),a?t.setActiveButton(r?t.getLastVisibleButton():t.getFirstVisibleButton()):t.navigate(r?-1:1))},handleResize:function(e){for(var t=this.getButtonsetButtons(),n=0;n<t.length;n++)t[n].removeClass("is-overflowed");if(this.settings.resizeContainers){var i=e?e.title:void 0,a=e?e.buttonset:void 0;this.sizeContainers(i,a)}this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(e,t){var n=this.element[0],i=this.title[0],a=this.buttonset[0],r=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return a.style.width="",i.style.width="",void n.classList.remove("do-resize");a.style.width="",i.style.width="",n.classList.contains("do-resize")||n.classList.add("do-resize");var o=$(n).getHiddenSize(),c=$(a).getHiddenSize(),u=$(i).getHiddenSize(),p=$(r).getHiddenSize(),m=parseInt(o.padding.left,10)+parseInt(o.padding.right,10);isNaN(p.width)&&(p.width=50),(isNaN(c.width)||c.width<0)&&(c.width=0);var v,w=this,C=e!==void 0&&!isNaN(e),A=t!==void 0&&!isNaN(t);this.cutoffTitle=!1;var S=function(){if(C)return parseInt(e,10);if(w.settings.favorButtonset===!0){var V=z();return V=V>0?V:$(a).width(),$(window).width()-(m+V+p.width-10)}return u.scrollWidth}(),M=z();if(this.settings.favorButtonset)return S<74&&(this.cutoffTitle=!0,v=Math.abs(S-74),S=74,M-=v),a.style.width=I(M+2),i.style.width=I(S-2),this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu(a.offsetWidth<a.scrollWidth)),i.textContent&&S<ot.textWidth(i.textContent.trim())&&(this.cutoffTitle=!0),void(S>ot.textWidth($(i).find("h1").text().trim())&&(this.cutoffTitle=!1));M<0&&(this.cutoffTitle=!0,v=Math.abs(M-0),M=0,S-=v),i.style.width=I(S+2),a.style.width=I(M-2)}function I(V){return"".concat(V,"px")}function z(){var V;V=A?parseInt(t,10):w.settings.favorButtonset===!0?c.width:o.width,!A&&o.width-V<u.width&&(V-=m+(C?parseInt(e,10):u.scrollWidth)+p.width);var U=w.buttonsetItems.filter(".searchfield").data("searchfield");if(U){U.settings.showGoButton===!0&&(V=V+U.goButton.width()>V?V+U.goButton.width():V),U.settings.categories&&(V+=15);var G=U.wrapper.width()-V;G>0&&(V+=G)}return V}},navigate:function(e){var t,n=this.items.filter(":visible:not(:disabled)"),i=n.index(this.activeButton)+e;i>=0&&i<n.length&&(t=n.eq(i)),i>=n.length&&(t=n.first()),i===-1&&(t=n.last()),this.isItemOverflowed(t)&&(t=this.more),this.setActiveButton(t)},getLastVisibleButton:function(){for(var e,t,n=$(this.items.get().reverse()).not(this.more),i=0;!e&&i<n.length;){if(t=$(n[i]),!this.isItemOverflowed(t)){e=t;break}i++}for(e&&e.length!==0||(e=n.first());e.length&&e.is(".separator, *:disabled, *:hidden");)e=e.prev();return e},getFirstVisibleButton:function(){for(var e=0,t=this.items,n=t.eq(e);n.is(".separator, *:disabled, *:hidden");)e++,n=t.eq(e);return n},setActiveButton:function(e,t){if(e[0]!==this.activeButton[0]){var n=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(e.is("a"))return i();var a=n.more.data("tooltip");return e[0]===n.more[0]?(a&&a.tooltip.is(":not(.hidden)")&&a.hide(),i()):n.isItemOverflowed(e)&&!e.is(".searchfield")?i():e}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!t&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function i(){return n.moreButtonIsDisabled()||!n.element.hasClass("has-more-button")?n.getLastVisibleButton():n.more}},triggerSelect:function(e){var t=$(e);t.is(this.more)||t.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[t])},getButtonsetButtons:function(){for(var e,t=[],n=this.buttonsetItems,i=0;i<n.length;i++)(e=n.eq(i)).data("action-button-link")!==void 0&&e.is(":not(.searchfield)")&&t.push(e);return t},getVisibleButtons:function(e){var t,n=this,i=[],a=[];e&&Array.isArray(e)||(e=this.getButtonsetButtons());for(var r=0;r<e.length;r++)e[r][0].classList.remove("is-overflowed");for(var o=0;o<e.length;o++)t=e[o],n.isItemOverflowed(t)?i.push(t):a.push(t);return{visible:a,hidden:i}},adjustMenuItemVisibility:function(e){var t="removeClass";function n(r,o){var c=r[0],u=r.data("action-button-link").parent()[0],p=r.isHiddenAtBreakpoint();if(o)return u.classList.add("hidden"),void c.classList.remove("is-overflowed");p||u.classList.remove("hidden"),c.classList.add("is-overflowed"),r.find(".icon").length&&(t="addClass")}e||(e=this.getVisibleButtons());for(var i=0;i<e.visible.length;i++)n(e.visible[i],!0);for(i=0;i<e.hidden.length;i++)n(e.hidden[i],!1);var a=0;this.moreMenu.find(".icon").each(function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||a++}),a>0&&(t="addClass"),this.moreMenu[t]("has-icons")},isItemOverflowed:function(e){if(this.moreButtonIsDisabled())return!1;if(!e||e.length===0)return!0;var t=this.buttonsetItems.filter(":not(.hidden)").index(e),n=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(n-=1),this.title.length&&t>=n)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),e instanceof $&&e.length&&(e=e[0]);var i=e.classList,a=window.getComputedStyle(e);if(i.contains("btn-actions"))return!0;if(i.contains("searchfield")||e.nodeName==="INPUT")return!1;if(a.display==="none")return!0;var r=L.isRTL(),o=e.getBoundingClientRect(),c=this.buttonset[0].getBoundingClientRect(),u=r?o.left<=c.left:o.right>=c.right;return o.bottom>=c.bottom||u===!0},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return Qs(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.moreButtonIsDisabled()){var t="removeClass";(this.moreMenu.children("li:not(.separator)").not(".hidden").length>0||e)&&(t="addClass"),this.element[t]("has-more-button");var n=this.more.data("popupmenu");if(t==="removeClass"){if(!n)return;n.close();var i=n.menu.find("li:not(.separator)").children("a"),a=!1;if(i.add(this.more).each(function(){document.activeElement===this&&(a=!0)}),a){var r=this.getLastVisibleButton()[0];r&&r.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var e=this.element.closest(".header").length===1,t=this.element.attr("id")||"",n=this.element.children(".title"),i=this.element.prev("label"),a=this.element.prev(".label"),r=e?$("header.header").find("h1").text():n.length?n.filter("div").text():i.length?i.text():a.length?a.text():"".concat(t," ").concat(L.translate("Toolbar"));this.element.attr("aria-label",r.replace(/\s+/g," ").trim())}},updated:function(e){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var e=this;$("body").off("resize.toolbar-".concat(this.id));var t=this.moreMenu===void 0?[]:this.moreMenu.children("li");if(t.each(function(){e.teardownMoreActionsMenuItem($(this),!0)}),t.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each(function(r,o){var c=$(o).data("tooltip");c&&typeof c.destroy=="function"&&c.destroy();var u=$(o).data("button");u&&typeof u.destroy=="function"&&u.destroy(),o.classList.remove("is-overflowed"),o.removeAttribute("tabindex")}),this.items.off(["keydown.".concat(Ri),"click.".concat(Ri),"focus.".concat(Ri),"blur.".concat(Ri),"close.".concat(Ri),"selected.".concat(Ri)].join(" ")),delete this.items,this.title&&this.title.length){var n=this.title.off("beforeshow.toolbar").data("tooltip");n&&typeof n.destroy=="function"&&n.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var i=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),a=i.data("searchfield");a&&typeof a.destroy=="function"&&i.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&this.more.data("popupmenu")!==void 0&&(this.more.off(["keydown.".concat(Ri),"beforeopen.".concat(Ri),"selected.".concat(Ri),"show-submenu.".concat(Ri)].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat(Ri),"recalculate-buttons.".concat(Ri),"scrollup.".concat(Ri)].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(e,t){var n=this,i=$(e),a=i.children("a"),r=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var o,c=i.find(".icon");c.length&&c.remove(),i.is(".submenu")&&(o=i.children(".wrapper").children(".popupmenu")).children("li").each(function(){n.teardownMoreActionsMenuItem($(this),!0)}),r&&r.length&&($.removeData(a[0],"original-button"),$.removeData(r[0],"action-button-link"),a.remove(),o&&o.off().parent(".wrapper").off().remove(),t&&i.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],Ri)}},$.fn.toolbar=function(e){return this.each(function(){var t=$.data(this,Ri);t?t.updated(e):t=$.data(this,Ri,new il(this,e))})};var Mn="editor",_s=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],Mr={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","generative","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","generative","separator","visual"]},excludeButtons:{editor:["backColor","generative"],source:["backColor","generative"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!0,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}},attributes:null};function al(e,t){this.settings=N.mergeSettings(e,t,Mr),t!=null&&t?.buttons&&(this.settings.buttons=t.buttons),t!=null&&t?.excludeButtons&&(this.settings.excludeButtons=t.excludeButtons),this.element=$(e),this.init()}al.prototype={get toolbarAPI(){var e;return this.toolbar&&this.toolbar.length&&(e=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),e},init:function(){var e=this;if(this.id="".concat(N.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var t=this.settings;if(t.anchor=$.extend({},Mr.anchor,t.anchor),t.image=$.extend({},Mr.image,t.image),t.anchor.defaultUrl=t.anchor.url,t.anchor.defaultClass=t.anchor.class,t.anchor.defaultTargetText=t.anchor.target,t.anchor.defaultIsClickable=t.anchor.isClickable,t.anchor.targets=t.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,function(c,u){e.settings.anchor.defaultTargetText.toLowerCase()===c.toLowerCase()&&(e.settings.anchor.target=u,e.settings.anchor.defaultTarget=u)}),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new Za("legacyDefault","Default")),this.settings.firstHeader&&(Pn("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Za("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(Pn("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Za("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),t.buttons&&t.buttons.editor){for(var n=!1,i=[new Za("default","Default","p")],a=t.buttons.editor.filter(function(c){return c.substr(0,6)==="header"}),r=0;r<a.length;r++){var o=a[r].substr(6,1);n=!0,i.push(new Za("header".concat(o),"Header ".concat(o),"h".concat(o)))}t.buttons.editor[0]==="separator"&&t.buttons.editor.splice(0,1),n&&(t.buttons.editor=t.buttons.editor.filter(function(c){return c.substr(0,6)!=="header"}),t.fontpickerSettings={styles:i}),n&&(t.buttons.editor=["fontPicker"].concat(t.buttons.editor))}return t.anchor.defaultTarget||(t.anchor.target&&$.trim(t.anchor.target).length?t.anchor.defaultTarget=t.anchor.target:(t.anchor.defaultTargetText=L.translate("SameWindow"),t.anchor.defaultTarget=t.anchor.targets[t.anchor.defaultTargetText])),this.setup(),typeof t.paragraphSeparator=="string"&&/^(p|br|div)$/.test(t.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,t.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox","aria-labelledby":this.container.find(".label").length?this.container.find(".label")[0].id:"no-id"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindSelection:function(e){var t=this;clearTimeout(e),e=setTimeout(function(){t.checkSelection()},this.settings.delay)},bindSelect:function(){var e=this;return this.getCurrentElement().on("mouseup.editor",function(){e.bindSelection("")}),this},bindParagraphCreation:function(){var e=this;return this.getCurrentElement().on("keyup.editor",function(t){var n=e.getSelectionStart(),i=n.tagName.toLowerCase();if(n&&n.getAttribute("data-editor")&&n.children.length===0&&document.execCommand("formatBlock",!1,"p"),t.which===13){if(n=e.getSelectionStart(),i==="blockquote")return;i==="li"||e.isListItemChild(n)||(t.shiftKey||document.execCommand("formatBlock",!1,"p"),i==="a"&&document.execCommand("unlink",!1,null))}e.bindSelection("")}),this},bindTab:function(){var e=this;return this.getCurrentElement().on("keydown.editor",function(t){if(t.which===9){var n=e.getSelectionStart();if(!n||!n.tagName)return;var i=n.tagName.toLowerCase();i==="pre"&&(t.preventDefault(),document.execCommand("insertHtml",null,"    ")),i==="li"&&(t.preventDefault(),document.execCommand(t.shiftKey?"outdent":"indent",t))}if(t.which===8){var a=e.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===a&&e.element.html("")}}),this},setExcludedButtons:function(){var e,t,n,i=this,a=function(r,o){var c=-1,u=0;return r.filter(function(p,m){var v=!0;return o.indexOf(p)>-1&&p!=="separator"?(u++,v=!1):p==="separator"&&m-u-1===c&&(u=0,v=!1),p==="separator"&&(c=m),v})};return e=i.settings,t=e.buttons,n=e.excludeButtons,i.sourceViewActive()?n&&n.source&&n.source.length?a(t.source,n.source):t.source:n&&n.editor&&n.editor.length?a(t.editor,n.editor):t.editor},createToolbar:function(){var e=this;if(this.toolbar)return this;var t=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),n="",i="";this.settings.useFlexToolbar&&(n="toolbar-section ",i=`<div class="toolbar-section more">
        <button class="btn-actions btn-editor">
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-more"></use>
          </svg>
        </button>
      </div>`);for(var a=this.setExcludedButtons(),r="",o=0,c=a.length;o<c;o+=1){var u=this.buttonTemplate(a[o]);u&&this.element.hasClass("source-view-active")&&a[o]!=="visual"&&(u=u.replace('type="button"','type="button" disabled')),u&&(r+=u)}var p="";this.settings.attributes&&(p=this.getAutomationAttributes("-editor-toolbar"),p=JSON.stringify(p),p=` data-options='{"attributes": `.concat(p,"}'"));var m='<div class="'.concat(t,'" data-init="false" id="editor-toolbar-').concat(this.id,'"').concat(p,`>
      <div class="`).concat(n,`buttonset">
        `).concat(r,`
      </div>
      `).concat(i,`
    </div>`);this.element.parent().find(".icon-dirty").length?this.toolbar=$(m).insertBefore(this.element.parent().find(".icon-dirty")):this.toolbar=$(m).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var v=this.toolbar.find('[data-action="fontStyle"]').first();if(v&&v.length){if(this.settings.attributes){var w=this.getAutomationAttributes("-editor-fontpicker");at(this.settings.fontpickerSettings.popupmenuSettings)==="object"?this.settings.fontpickerSettings.popupmenuSettings.attributes=w:this.settings.fontpickerSettings.popupmenuSettings||(this.settings.fontpickerSettings.popupmenuSettings={attributes:w})}v.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=v,this.fontPickerElem.tooltip({placementOpts:{x:40}})}var C=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return C.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",C).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),C.on("beforeopen.editor",function(A,S){var M=e.toolbar.data("toolbar")||e.toolbar.data("toolbar-flex");M&&M.overflowedItems.forEach(function(I){I.type==="colorpicker"&&S&&S.parent(".popupmenu-wrapper").off("afterplace.editor").one("afterplace.editor",function(z,V){if(V.width===void 0){var U,G,J=((((U=V.container)===null||U===void 0||U==null?void 0:U.outerWidth())||-1)-(((G=V.element)===null||G===void 0||G==null?void 0:G.outerWidth())||-1))/2;J>-1&&V.element.css("left","".concat(J,"px"))}})})}),this},getAutomationAttributes:function(e){var t=this,n=this.settings,i=n.attributes;if(n.attributes&&typeof e=="string"&&e!=="")if(Array.isArray(n.attributes))i=[],n.attributes.forEach(function(r){var o=typeof r.value=="function"?r.value(t):r.value;i.push({name:r.name,value:o+e})});else{var a=typeof n.attributes.value=="function"?n.attributes.value(this):n.attributes.value;i={name:n.attributes.name,value:a+e}}return i},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var e=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(_e.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",Va(function(t){t.keyCode!==72&&!t.ctrlKey&&$(".modal.is-visible").length<1&&(e.textarea.text(_e.sanitizeHTML(e.element.html().toString())),e.resetEmptyEditor(t),e.element.trigger("change"))},400)),$("html").on("themechanged.".concat(Mn),function(){e.setRowsHeight(),e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var e,t,n,i,a=ft.currentTheme.id&&(ft.currentTheme.id.indexOf("uplift")>-1||ft.currentTheme.id.indexOf("new")>-1);(e=this.settings)!==null&&e!==void 0&&(e=e?.rows)!==null&&e!==void 0&&e?.editor&&this.element.height(Number((n=this.settings)===null||n===void 0||(n=n?.rows)===null||n===void 0||n==null?void 0:n.editor)*(a?26:22.2)),(t=this.settings)!==null&&t!==void 0&&(t=t?.rows)!==null&&t!==void 0&&t?.source&&this.element.parent().find(".editor-source").height(26*Number((i=this.settings)===null||i===void 0||(i=i?.rows)===null||i===void 0||i==null?void 0:i.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var e=this.settings.paragraphSeparator==="p"?"p":"div",t=this.element.html().toString().trim();(t=this.element.html().toString().trim())!=="<br>"&&t!=="<".concat(e,"><br></").concat(e,">")||this.element.html(""),this.element.contents().filter(function(){return this.nodeType===3&&this.textContent.trim()!==""}).wrap("<".concat(e,"></").concat(e,">")),t=this.element.html().toString().trim(),this.textarea.html(_e.sanitizeHTML(t));var n=this.saveSelection(),i=function(c){return typeof c=="number"},a=function(c){return function(u){return u&&u[0]&&i(u[0].startOffset)&&i(u[0].endOffset)}(c)?{start:c[0].startOffset,end:c[0].endOffset}:null},r=a(this.savedSelection),o=a(n);r!==null&&o!==null&&r.start===o.start&&r.end===o.end||this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var e=this.element.html().toString().trim();((e||"").match(/>\s+</g)||[]).length>0&&this.element.html(e.replace(/>\s+</g,"><"))},orderedListTypeStyling:function(){var e=this.getCurrentElement(),t=this.element,n="a",i="A",a="i",r="I";switch(e.find("ol").attr("type")){case n:t.addClass("type-l-alpha"),t.removeClass("type-u-alpha");break;case i:t.addClass("type-u-alpha"),t.removeClass("type-l-alpha");break;case a:t.addClass("type-l-roman"),t.removeClass("type-u-roman");break;case r:t.addClass("type-u-roman"),t.removeClass("type-l-roman")}},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var e=$('<div class="text-container"></div>').appendTo(this.sourceView),t="source-textarea-".concat($('[id^="source-textarea-"]').length+1),n="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(t,'">').concat(n,"</label>")).appendTo(e),$('<textarea id="'.concat(t,'" data-options="{ characterCounter: false }" class="editable"></textarea>')).appendTo(e)},triggerClick:function(e,t){$('button[data-action="'.concat(t,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var e=this,t=this.getCurrentElement(),n={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192,g:71};return t.on("keydown.editor",function(i){switch((i=i||window.event).which?n.charCode=i.which:i.keyCode?n.charCode=i.keyCode:n.charCode=!1,i.ctrlKey&&n.charCode){case n.h3:e.triggerClick(i,"append-".concat(e.settings.firstHeader));break;case n.h4:e.triggerClick(i,"append-".concat(e.settings.secondHeader));break;case n.b:e.triggerClick(i,"bold"),i.preventDefault();break;case n.e:e.triggerClick(i,"justifyCenter");break;case n.h:e.triggerClick(i,"anchor"),i.preventDefault();break;case n.i:e.triggerClick(i,i.shiftKey?"image":"italic"),i.shiftKey||i.preventDefault();break;case n.bl:i.shiftKey&&e.triggerClick(i,"insertunorderedlist"),i.preventDefault();break;case n.l:i.shiftKey||e.triggerClick(i,"justifyLeft"),i.preventDefault();break;case n.n:i.shiftKey&&e.triggerClick(i,"insertorderedlist");break;case n.q:e.triggerClick(i,"append-blockquote");break;case n.r:e.triggerClick(i,"justifyRight");break;case n.u:e.triggerClick(i,"underline"),i.preventDefault();break;case n.space:e.triggerClick(i,"clearFormatting");break;case n.g:e.triggerClick(i,"generative");break;case n.sv:e.triggerClick(i,t===e.element?"source":"visual")}}),this.element.on("mousedown.editor","a",function(i){var a=$(this).attr("href");Be.browser.name!=="firefox"&&Be.os.name==="mac"&&(i.metaKey||i.ctrlKey)&&(window.open(a,"_blank"),i.preventDefault())}),this.element.on("updated.editor",function(){e.updated()}),this},setupTextareaEvents:function(){var e=this;return this.textarea.off(".editor").on("input.editor keyup.editor",function(){e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}).on("focus.editor",function(){e.sourceView.addClass("is-focused")}).on("blur.editor",function(t){e.sourceView.removeClass("is-focused"),e.element.empty().html(_e.sanitizeHTML(e.textarea.val())),e.element.data("validate")&&e.element.data("validate").validate(e.element,!0,t)}),this},adjustSourceLineNumbers:function(){var e=this.textarea.parent(),t=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),n=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var i=this.textarea[0].scrollHeight,a=Math.floor((i-n)/t),r=this.sourceView.find(".line-numbers"),o=r.find("li").length,c="",u=0;if(!this.lineNumbers||a!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<a){for(;u<a-this.lineNumbers;)c+='<li role="presentation"><span>'.concat(o+u+1,"</span></li>"),u++;r.append(c)}else this.lineNumbers>a&&(u=this.lineNumbers-a,r.find("li").slice(-u).remove());else{for(this.lineNumbers=a;u<this.lineNumbers;)c+='<li role="presentation"><span>'.concat(u+1,"</span></li>"),u++;r.append(c)}this.lineNumbers=a}e[0].style.width="calc(100% - ".concat(r.outerWidth()+2,"px)"),i===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(r[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(e,t,n){var i,a;switch(n){case"bold":i=["<b>","</b>"];break;case"italic":i=["<i>","</i>"];break;case"underline":i=["<u>","</u>"];break;case"strikethrough":i=["<strike>","</strike>"];break;case"append-blockquote":i=["<blockquote>","</blockquote>"];break;default:i=["",""]}if(n==="anchor"){var r=$('<a href="'.concat(e,'">').concat(t,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&r.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&r.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?r.attr("contenteditable",!1):r.removeAttr("contenteditable"),a=r[0].outerHTML}else a=i[0]+e+t+i[1];return a},insertTextAreaContent:function(e,t){var n,i,a,r,o=this.textarea[0],c=o.value;e=e||"",document.selection&&o.tagName==="TEXTAREA"?($(o).focus(),(n=document.selection.createRange()).text=this.wrapTextInTags(e,n.text,t),$(o).focus()):o.selectionStart||o.selectionStart==="0"?(i=o.selectionStart,a=o.selectionEnd,r=o.scrollTop,n=this.wrapTextInTags(e,c.substring(i,a),t),o.value=c.substring(0,i)+n+c.substring(a,c.length),$(o).focus(),o.selectionStart=i+n.length,o.selectionEnd=i+n.length,o.scrollTop=r):(o.value+=this.wrapTextInTags(e,o.value,t),$(o).focus(),o.value=o.value)},buttonTemplate:function(e){var t=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(t.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(t.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(L.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(t.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(t.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(L.translate("TextColor"),'" data-action="foreColor" data-element="foreColor" data-init="false"><span class="swatch"></span>').concat(t.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(L.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(t.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(t.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(t.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("InsertLink"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(t.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(t.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(t.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(t.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(t.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(t.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(t.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" title="'.concat(L.translate("ChooseFont"),'" data-action="fontStyle" data-init="false"><span>',"FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(t.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(t.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("JustifyRight"),'" data-action="justifyRight" >').concat(t.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(t.clearFormatting,"</button>"),generative:'<button type="button" class="btn btn-editor btn-generative" title="'.concat(L.translate("GenerateWithAI"),'" data-action="generative">').concat(t.generative,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ViewSource"),'" data-action="source" >').concat(t.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(L.translate("ViewVisual"),'" data-action="visual" >').concat(t.visual,"</button>")}[e]||!1},getIcon:function(e,t,n){return'<span class="audible">'.concat(L.translate(e),"</span>").concat($.createIcon({classes:n||"",icon:t}))},getButtonLabels:function(e){var t,n={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertLink","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),generative:this.getIcon("GenerateWithAI","insights-smart-panel"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewVisual","visual","visual-icon")};if(at(e)==="object"&&(t=e),at(t)==="object")for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},activateButton:function(e){this.toolbar.find('[data-element="'.concat(e,'"]')).addClass("is-active")},bindButtons:function(){var e=this,t=this;function n(i,a){var r=a instanceof $r?$(a.element):$(i.target);if(!r.is(".btn-actions")){var o=r.attr("data-action"),c=t.getCurrentElement();return i.preventDefault(),c.focus(),t.checkSelection(),t.sourceViewActive()||r.toggleClass("is-active"),o&&t.execAction(o,i),(Be.browser.name==="ie"||Be.browser.isEdge())&&c.trigger("change"),!r[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",n),this.toolbar.on("click.editor",".colorpicker-editor-button",n)):this.toolbar.on("click.editor","button",n),this.fontPickerElem&&this.fontPickerElem.on("font-selected",function(i,a){e.execFormatBlock(a.tagName)}),this},bindModals:function(){var e=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!1}).on("beforeopen",function(){e.savedSelection=e.saveSelection(),$(this).attr("id")!=="modal-url-".concat(e.id)||e.selectionRange}).off("open").on("open",function(){var t=Be.features.touch,n=$(this).attr("id"),i=$("input:first",this),a=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(e.id,'"]')).val(e.settings.anchor.url),$('[name="em-class-'.concat(e.id,'"]')).val(e.settings.anchor.class),$('[name="em-target-'.concat(e.id,'"]')).val(e.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",e.settings.anchor.isClickable),setTimeout(function(){t&&n==="modal-image-".concat(e.id)?a.focus():i.focus().select()},10)}).off("beforeclose").on("beforeclose",function(){var t=$(this).is(".editor-modal-image")?"image":"anchor";if(e.toolbar){var n=e.toolbar.find('[data-action="'.concat(t,'"]')),i=$(this).data("modal");n&&i&&(i.settings.noRefocus=e.isBtnOverflowedItem(n))}}).off("close").on("close",function(t,n){if(e.restoreSelection(e.savedSelection),!n)if($(this).attr("id")==="modal-url-".concat(e.id)){var i=$(e.findElementInSelection("a",e.element[0]));i.length?e.updateCurrentLink(i):e.createLink($('[name="em-url-'.concat(e.id,'"]'),this))}else e.settings.attributes?e.settings.attributes.length>1?e.insertImage($('[data-automation-id="'.concat(e.settings.attributes[e.settings.attributes.length-1].value,'-editor-modal-input0"')).val()):e.insertImage($("input[name=image-".concat(e.id,"]")).val()):e.insertImage($('input[id*="image-editor"]').val())}),this},createURLModal:function(){var e=this,t=this.settings,n=$("#modal-url-".concat(this.id));if(n.length>0)return n;var i,a="",r=!0;$.each(t.anchor.targets,function(m,v){a+='<option value="'.concat(v,'">').concat(L.translate(m),"</option>"),e.settings.anchor.defaultTargetText.toLowerCase()===m.toLowerCase()&&(r=!1)}),r&&(a+='<option value="'.concat(t.anchor.target,'">').concat(t.anchor.target,"</option>"));var o="";t.attributes&&(i=this.getAutomationAttributes("-editor-modal"),o=JSON.stringify(i),o=` data-options='{"attributes": `.concat(o,"}'"));var c=$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html(`<div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title">`.concat(L.translate("InsertLink"),`</h1>
        </div>
        <div class="modal-body">
          <div class="field">
            <label for="em-url-`).concat(this.id,'" class="required">').concat(L.translate("Url"),`</label>
            <input id="em-url-`).concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(t.anchor.url,`">
          </div>
          `).concat(t.anchor.showIsClickable?`<div class="field">
            <input type="checkbox" class="checkbox" id="em-isclickable-`.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(t.anchor.isClickable,`">
            <label for="em-isclickable-`).concat(this.id,'" class="checkbox-label"> ').concat(L.translate("Clickable"),`</label>
          </div>`):"",`
          <div class="field">
            <label for="em-class-`).concat(this.id,'">').concat(L.translate("CssClass"),`</label>
            <input id="em-class-`).concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(t.anchor.class,`">
          </div>
          <div class="field">
            <label for="em-target-`).concat(this.id,'" class="label"> ').concat(L.translate("Target"),`</label>
            <select id="em-target-`).concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown"').concat(o,`>
              `).concat(a,`
            </select>
          </div>
          <div class="modal-buttonset">
            <button type="button" class="btn-modal btn-cancel"> `).concat(L.translate("Cancel"),`</button>
            <button type="button" class="btn-modal-primary"> `).concat(L.translate("Insert"),`</button>
          </div>
        </div>
      </div>`));if(t.attributes){var u=[].slice.call(c[0].querySelectorAll('[type="text"]')),p=[].slice.call(c[0].querySelectorAll("button"));u.forEach(function(m,v){return N.addAttributes($(m),e,i,"input".concat(v),!0)}),p.forEach(function(m,v){return N.addAttributes($(m),e,i,"button".concat(v),!0)})}return c.appendTo("body")},createImageModal:function(){var e=this,t=$("#modal-image-".concat(this.id));if(t.length>0)return t;var n=$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,`"></div>'`)).html(`<div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title">`.concat(L.translate("InsertImage"),`</h1>
        </div>
        <div class="modal-body no-scroll">
          <div class="field">
            <label for="image-`).concat(this.id,'" class="required">').concat(L.translate("Url"),`</label>
            <input id="image-`).concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,`">
          </div>
          <div class="modal-buttonset">
            <button type="button" class="btn-modal btn-cancel">
              `).concat(L.translate("Cancel"),`</button>
            <button type="button" class="btn-modal-primary">
              `).concat(L.translate("Insert"),`</button>
          </div>
        </div>
      </div>`));if(this.settings.attributes){var i=this.getAutomationAttributes("-editor-modal"),a=[].slice.call(n[0].querySelectorAll('[type="text"]')),r=[].slice.call(n[0].querySelectorAll("button"));a.forEach(function(o,c){return N.addAttributes($(o),e,i,"input".concat(c),!0)}),r.forEach(function(o,c){return N.addAttributes($(o),e,i,"button".concat(c),!0)})}return n.appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(e){var t=_e.stripTags(document.querySelector('[name="em-url-'.concat(this.id,'"]')).value),n=_e.stripTags(document.querySelector('[name="em-class-'.concat(this.id,'"]')).value),i=_e.stripTags(document.querySelector('[name="em-target-'.concat(this.id,'"]')).value),a=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;e&&(e[0].setAttribute("href",this.fixLinkFormat(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl)),e[0].setAttribute("class",n&&$.trim(n).length?n:this.settings.anchor.defaultClass),e[0].setAttribute("data-url",(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl).replace("http://",""))),a?e.attr("contenteditable",!1):e.removeAttr("contenteditable"),i&&$.trim(i).length?e.attr("target",i):e.removeAttr("target")},createLink:function(e){var t=this;this.restoreSelection(this.savedSelection);var n=_e.stripTags(this.fixLinkFormat(e[0].value));e.val(n),this.settings.anchor.url=e.val(),this.settings.anchor.class=document.querySelector('[name="em-class-'.concat(this.id,'"]')).value,this.settings.anchor.target=document.querySelector('[name="em-target-'.concat(this.id,'"]')).value,this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;var i=$('<a data-url="'.concat(n,'" href="').concat(n,'">').concat(n,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&i.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&i.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?i.attr("contenteditable",!1):i.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(e.val(),"anchor");else{var a,r,o,c,u;if(!this.selection.isCollapsed||Be.browser.isIE11()){if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){r=a.getRangeAt(0),(c="".concat(r)).trim()!==""&&i.html(c);for(var p=(o=r.commonAncestorContainer.children)?o.length:0,m=0;m<p;m++){var v=o[m];v instanceof HTMLImageElement&&(u=v)}u&&i.html(u.outerHTML),r.deleteContents();var w=document.createElement("div");w.innerHTML=i[0].outerHTML;for(var C,A,S=document.createDocumentFragment();C=w.firstChild;)A=S.appendChild(C);r.insertNode(S),A&&((r=r.cloneRange()).setStartAfter(A),r.collapse(!0),a.removeAllRanges(),a.addRange(r))}}else document.execCommand("insertHtml",null,i[0].outerHTML),setTimeout(function(){t.getCurrentElement().focus()},1);this.element.trigger("change"),this.bindAnchorPreview()}},fixLinkFormat:function(e){return e.match(/^https?:\/\//)?e:"http://".concat(e)},checkSelection:function(){var e;if(this.selection===void 0&&this.sourceViewActive())return e=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();e=window.getSelection();var t=this.getSelectionElement();return t?this.checkSelectionElement(e,t):this.hideToolbarActions(),this},getSelectionElement:function(){var e,t,n,i=window.getSelection(),a=function(r){var o=r;try{for(;!o.getAttribute("data-editor");)o=o.parentNode}catch{return!1}return o};try{t=(e=i.getRangeAt(0).commonAncestorContainer).parentNode,n=e.getAttribute("data-editor")?e:a(t)}catch{n=a(t)}return n},checkSelectionElement:function(e,t){var n=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=e,this.selectionRange=this.selection.getRangeAt(0),n!==t?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var e=this.getSelectedParentElement();e.tagName!==void 0&&_s.indexOf(e.tagName.toLowerCase)===-1&&(this.activateButton(e.tagName.toLowerCase()),!this.element.is(e));)e=e.parentNode},checkButtonState:function(e){if(document.queryCommandState)if(this.fontPickerElem&&e==="fontStyle"){for(var t,n,i=this.fontPickerElem.data("fontpicker"),a=i.supportedTagNames,r=this.getSelectionParentElement(),o=$(r).add($(r).parentsUntil(this.element)),c=0;c<o.length&&n===void 0;c++)if(t=o[c].tagName.toLowerCase(),a.indexOf(t)>-1){n=i.getStyleByTagName(t),i.select(n,!0);break}}else document.queryCommandState(e)?this.toolbar.find('[data-action="'.concat(e,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(e,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var e=this.selectionRange;return this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:e.startContainer.nodeType===3?e.startContainer.parentNode:e.startContainer},hideToolbarActions:function(){this.toolbar!==void 0&&this.toolbar.removeClass("is-active")},bindPaste:function(){var e=this,t=e.getCurrentElement();return this.pasteWrapper=function(n){var i,a,r;i=n.originalEvent.clipboardData&&n.originalEvent.clipboardData.getData?n.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var o="";if(e.sourceViewActive())return this;if(i&&!n.defaultPrevented){for(n.preventDefault(),r=i.split(/[\r\n]/g),a=0;a<r.length;a+=1)r[a]!==""&&(navigator.userAgent.match(/firefox/i)&&a===0?o+="<p>".concat(e.htmlEntities(r[a]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(r[a])?o+='<img src="'.concat(e.htmlEntities(r[a]),'" />'):o+="<p>".concat(e.htmlEntities(r[a]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,o),!1;e.pasteHtmlAtCaret(o)}},this.pasteWrapperHtml=function(n){if(e.sourceViewActive())return this;var i,a,r,o,c;if((n.clipboardData||n.originalEvent)&&(n.clipboardData&&n.clipboardData.types?a=n.clipboardData:n.originalEvent&&n.originalEvent.clipboardData&&n.originalEvent.clipboardData.getData&&(a=n.originalEvent.clipboardData)),a&&a.types)((i=a.types)instanceof DOMStringList&&i.contains("text/html")||i.indexOf&&i.indexOf("text/html")!==-1||Be.browser.isEdge())&&(r=n.originalEvent.clipboardData.getData("text/html")),i instanceof DOMStringList&&i.contains("text/plain")&&(r=n.originalEvent.clipboardData.getData("text/plain")),at(i)==="object"&&i[0]&&i[0]==="text/plain"&&!i[1]&&(r=_e.escapeHTML(n.originalEvent.clipboardData.getData("text/plain"))),i instanceof Array&&i.indexOf("text/plain")>-1&&i.indexOf("text/html")<0&&(r=_e.escapeHTML(n.originalEvent.clipboardData.getData("text/plain")));else for(c=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),r="",o=0;o<c.length;o+=1)c[o]!==""&&(navigator.userAgent.match(/firefox/i)&&o===0?r+="<p>".concat(e.htmlEntities(c[o]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(c[o])?r+='<img src="'.concat(e.htmlEntities(c[o]),'" />'):r+="<p>".concat(e.htmlEntities(c[o]),"</p>"));return e.pastedData=Be.browser.isIE11()?r:e.getCleanedHtml(r),$.when(e.element.triggerHandler("beforepaste",[{pastedData:e.pastedData}])).done(function(){if(e.pastedData&&!n.defaultPrevented){if(Be.browser.isIE11()||Be.browser.isEdge()||n.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,e.pastedData),!1;e.pasteHtmlAtCaret(e.pastedData)}e.element.triggerHandler("afterpaste",[{pastedData:e.pastedData}]),e.pastedData=null}),!!Be.browser.isIE11()&&void 0},t.on("paste.editor",e.settings.pasteAsPlainText?e.pasteWrapper:e.pasteWrapperHtml),this},pasteHtmlAtCaret:function(e){var t,n,i=this,a="x-text-content-templ-x";if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents(),Be.browser.isIE11()&&(e=a);var r=document.createElement("div");r.innerHTML=e;for(var o,c,u=document.createDocumentFragment();o=r.firstChild;)c=u.appendChild(o);if(n.insertNode(u),c&&((n=n.cloneRange()).setStartAfter(c),n.collapse(!0),t.removeAllRanges(),t.addRange(n)),Be.browser.isIE11()){for(var p=50,m=$.Deferred(),v=document.createDocumentFragment();i.element[0].childNodes.length>0;)v.appendChild(i.element[0].childNodes[0]);(function w(C,A){--p<0?m.reject():C.childNodes&&C.childNodes.length>0?(e=C.innerHTML,C.innerHTML="",C.appendChild(A),m.resolve()):setTimeout(function(){w(C,A)},5)})(i.element[0],v),$.when(m).done(function(){var w="",C=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent===a});C.length||(C=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent.indexOf(a)>-1&&this.tagName!=="UL"})),e=i.getCleanedHtml(e);var A="";/(^(\s+?)?<li)/gi.test(e)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)?(C.is("li")||(e="<ul>".concat(e,"</ul>")),A=e):A=C.is("li")?"".concat(e,"</li>"):(w=e.match(/<\/ul|<\/ol/gi)||[]).length?e:"".concat(e,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)&&(C.is("li")?A="<li>".concat(e):((w=e.match(/<ul|<ol/gi)||[]).length?e+=w[w.length-1].replace(/<(ul|ol)/gi,"<$1>"):e="<ul>".concat(e,"</ul>"),A=e)),A&&ue.html(C,A,"*"),(w=i.element[0].innerHTML).indexOf(a)>-1&&(w=w.replace(a,e)),i.element[0].innerHTML=i.getCleanedHtml(w)})}}}else document.selection&&document.selection.type!=="Control"&&document.selection.createRange().pasteHTML(e)},getCleanedHtml:function(e){var t,n=e||"",i=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(n)&&(n=this.cleanWordHtml(n));for(var a=0,r=i.length;a<r;a++)t=new RegExp(" ".concat(i[a],'="(.*?)"'),"gi"),n=this.stripAttribute(n,i[a],t),t=new RegExp(" ".concat(i[a],"='(.*?)'"),"gi"),n=this.stripAttribute(n,i[a],t);return(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<(div|span|p)> <\/(div|span|p)>/gi," ")).replace(/<[^(br|/>)]+>[\s]*<\/[^>]+>/gi,"")).indexOf("\xB7")>-1&&(n=[(n=[(n=(n=(n=n.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span><\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,n.indexOf("<li>")),"<ul>",n.slice(n.indexOf("<li>"))].join("")).slice(0,n.lastIndexOf("</li>")),"</ul>",n.slice(n.lastIndexOf("</li>"))].join("")),n},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var e=this,t=this.container,n=this.getCurrentElement(),i=this;return this.element.on("DOMNodeInserted",function(a){var r=$(a.target),o=$("<b>helper</b>");a.target.tagName==="IMG"?r.removeAttr("id style srcset"):a.target.tagName==="SPAN"&&(r.before(o),o.after(r.contents()),o.add(r).remove())}),this.container.on("focusin.".concat(Mn),".editor, .editor-source",function(){var a=$(this);t.addClass("is-active"),setTimeout(function(){a.hasClass("error")&&(t.parent().find(".editor-toolbar").addClass("error"),t.parent().find(".editor-source").addClass("error"))},100)}).on("focusout.".concat(Mn),".editor, .editor-source",function(){t.removeClass("is-active"),t.parent().find(".editor-toolbar").removeClass("error"),t.parent().find(".editor-source").removeClass("error")}),this.container.on("mouseenter.".concat(Mn),function(){e.element.hasClass("error")||e.container.addClass("is-hover")}).on("mouseleave.".concat(Mn),function(){e.container.removeClass("is-hover")}),i.settings.onLinkClick&&t.on("click.editorlinks","a",function(a){i.settings.onLinkClick(a,{elem:e,url:a.currentTarget.getAttribute("data-url")}),a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation()}),this.label.on("click.editor",function(){n.focus()}),n.attr("aria-label",this.label.text()),this},restoreSelection:function(e){var t=window.getSelection();if(e||(e=this.savedSelection),e){t.removeAllRanges();for(var n=0,i=e.length;n<i;n+=1)t.addRange(e[n])}},saveSelection:function(){var e,t=window.getSelection();if(t.getRangeAt&&t.rangeCount){e=[];for(var n=0,i=t.rangeCount;n<i;n+=1)e.push(t.getRangeAt(n));return e}return null},getSelectionStart:function(){var e=document.getSelection().anchorNode;return e&&e.nodeType===3?e.parentNode:e},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(e,t){var n,i,a,r=this.getrange();if(r){for(n=a=r.commonAncestorContainer||r.parentElement();n!==t;n=n.parentNode)if(n&&n.tagName&&n.tagName.toLowerCase()===e)return n;if(!r.collapsed&&(r.text===void 0||r.text)&&a.getElementsByTagName){n=a.getElementsByTagName(e),i=document.createRange?document.createRange():document.body.createTextRange();for(var o=0,c=n.length;o<c;o++)if(document.createRange){if(i.selectNodeContents(n[o]),r.compareBoundaryPoints(Range.END_TO_START,i)<0&&r.compareBoundaryPoints(Range.START_TO_END,i)>0)return n[o]}else if(i.moveToElementText(n[o]),r.compareEndPoints("StartToEnd",i)<0&&r.compareEndPoints("EndToStart",i)>0)return n[o]}}},restoreLinkSelection:function(){var e=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,e.length){this.settings.anchor.url=e.attr("href"),this.settings.anchor.class=e.attr("class"),this.settings.anchor.target=e.attr("target");var t=e.attr("contenteditable");t!==!1&&t!=="false"||(this.settings.anchor.isClickable=!0)}},execAction:function(e){if(this.getCurrentElement()===this.element)e.indexOf("append-")>-1?this.execFormatBlock(e.replace("append-","")):e==="anchor"?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):e==="image"?this.modals.image.data("modal").open():e==="foreColor"||e==="backColor"?this.execColorActions(e):e==="clearFormatting"?this.clearFormatting():e==="generative"?this.generativeButtonAction():e==="source"||e==="visual"?this.toggleSource():document.execCommand(e,!1,null);else switch(e){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,e)}this.checkSelection()},insertImage:function(e){document.execCommand("insertImage",!1,e)},toggleSource:function(e){var t=this,n=function(r){return typeof r=="string"&&r.toLowerCase()==="false"||typeof r=="boolean"&&r===!1||typeof r=="number"&&r===0};if(this.sourceViewActive()&&!e){var i=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",i)).done(function(r){n(r)||function(o){var c=o||t.textarea.val();c=_e.sanitizeHTML(c),c=t.getCleanedHtml(c),t.element.empty().removeClass("source-view-active hidden"),t.sourceView.addClass("hidden").removeClass("is-focused"),t.element.trigger("focus.editor"),t.switchToolbars(),t.textarea.off("input.editor-firechange"),setTimeout(function(){var u;t.orderedListTypeStyling(),t.element[0].innerHTML=c,c=t.element[0].innerHTML,t.element.triggerHandler("afterpreviewmode",c);var p=(u=t.toolbar)===null||u===void 0||u==null?void 0:u.find('[data-action="source"]');p&&!t.isBtnOverflowedItem(p)&&p.focus()},0)}(r)})}else{var a=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",a)).done(function(r){n(r)||function(o){var c,u=o||t.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,`<br>
`).replace(/<\/p> /g,`</p>

`).replace(/<\/blockquote>( )?/g,`</blockquote>

`);t.settings.useSourceFormatter&&(u=t.formatHtml(u)),t.element.addClass("source-view-active"),t.switchToolbars(),t.textarea.val(u).focus(),t.sourceView.removeClass("hidden"),t.element.addClass("hidden"),t.adjustSourceLineNumbers(),t.textarea.focus(),u=t.textarea.val(),t.textarea.off("input.editor-firechange").on("input.editor-firechange",function(){t.element.trigger("change")}),t.element.triggerHandler("aftersourcemode",u);var p=(c=t.toolbar)===null||c===void 0||c==null?void 0:c.find('[data-action="visual"]');p&&!t.isBtnOverflowedItem(p)&&p.focus()}(r)})}},isBtnOverflowedItem:function(e){var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex"),n=!1;return t&&t.overflowedItems.forEach(function(i){e.is(i.element)&&(n=!0)}),n},clearFormatting:function(){var e,t=this,n=this.getSelectionParentElement(),i=n.tagName,a={},r=function(c){var u=window.getSelection(),p=!1;if(Be.browser.isIE11()){var m=u.getRangeAt(0),v=document.createRange();v.selectNode(c);var w=m.compareBoundaryPoints(Range.START_TO_END,v),C=m.compareBoundaryPoints(Range.START_TO_START,v),A=m.compareBoundaryPoints(Range.END_TO_START,v),S=m.compareBoundaryPoints(Range.END_TO_END,v);p=w!==C||A!==S||w!==S}else p=u.containsNode(c,!0);return p};n&&i&&(i=i.toLowerCase(),a=function(){for(var c=function(w){return w&&w.style&&w.style.textAlign!==""},u=n,p=c(u),m=9999;!p&&m>0;)m--,p=(u=u?u.parentNode:null)&&u===t.element[0]||c(u);var v={found:u&&u!==n&&u!==t.element[0]};return v.found&&(v.elem=u,v.textAlign=u.style.textAlign),v}(),function(){var c=function(p){var m=[].slice.call(p.querySelectorAll("li"));if(m.length>0){var v=document.createDocumentFragment();m.forEach(function(C){var A=document.createTextNode(C.textContent);v.appendChild(A),v.appendChild(document.createElement("br"))});var w=m[0].parentNode;w.parentNode.insertBefore(v,w.nextSibling),w.parentNode.removeChild(w)}};if(i==="li")c(n.parentNode);else if(/ul|ol/.test(i))c(n);else{var u=n.classList.contains("editor")?n:$(n).closest(".editor").length?n.parentNode:null;u&&[].slice.call(u.querySelectorAll("ul, ol")).forEach(function(p){r(p)&&c(p)})}}(),function(){var c=function(w){var C=w.parentNode,A=document.createElement("p");A.innerHTML=w.innerHTML,C.replaceChild(A,w)};_s.indexOf(i)>-1?i!=="p"&&(document.execCommand("removeFormat",!1,null),c(n)):_s.forEach(function(w){w!=="p"&&[].slice.call(n.querySelectorAll(w)).forEach(function(C){return c(C)})});for(var u,p=[].slice.call(t.element[0].querySelectorAll("blockquote, pre")),m=0,v=p.length;m<v;m++)u=void 0,u=!1,function w(C){for(var A=0,S=C.length;A<S;A++){var M=C[A],I=[].slice.call(M.children);M===n&&(u=!0),I.length&&!u&&w(I)}}([].slice.call(p[m].children)),u&&(document.execCommand("removeFormat",!1,null),c(p[m]))}(),e=function(c){var u=c.parentNode,p=c.firstChild;u.insertBefore(p,c),u.removeChild(c),u.normalize()},i==="a"?e(n):[].slice.call(n.querySelectorAll("a")).forEach(function(c){r(c)&&e(c)}));var o=n.parentNode;o&&o!==this.element[0]&&[].slice.call(o.querySelectorAll("[align]")).forEach(function(c){return c.removeAttribute("align")}),document.execCommand("removeFormat",!1,null),a.found&&(a.elem.style.textAlign=a.textAlign)},generativeButtonAction:function(){var e=this;e.element.triggerHandler("generateai",[{self:e,editor:e.element,toolbar:e.toolbar}])},getSelectionParentElement:function(){var e,t=null;return window.getSelection?(e=window.getSelection()).rangeCount&&(t=e.getRangeAt(0).commonAncestorContainer).nodeType!==1&&(t=t.parentNode):(e=document.selection)&&e.type!=="Control"&&(t=e.createRange().parentElement()),t},checkColorButtonState:function(e){var t=$('[data-action="'.concat(e,'"]'),this.toolbar),n=t.data("colorpicker"),i=document.queryCommandValue(e);return n&&i!=="rgb(0, 0, 0)"&&(Be.browser.name==="firefox"&&e==="backColor"&&(i=$(window.getSelection().focusNode.parentNode).css("background-color")),typeof i=="number"&&(i=n.decimal2rgb(i)),i=i?n.rgb2hex(i):"",t.attr("data-value",i),t.find(".swatch").css("background-color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(i.toLowerCase())>-1?"":i)),{cpBtn:t,cpApi:n,color:i}},execColorActions:function(e){var t=this,n=this.checkColorButtonState(e),i=n.cpBtn,a=n.cpApi;i.one("selected.editor",function(r,o){var c=o;if(c===void 0||c instanceof $||!c.element||(c=$(o.element)),c.is("a")){var u="".concat(c.data("value")).toLowerCase();if((u=u!=="#"?u:"").indexOf("#")===-1&&(u="#".concat(u)),u==="#"&&(u=""),i.attr("data-value",u),i.find(".swatch").css("background-color",u),Be.browser.name==="ie"||e==="foreColor")u?document.execCommand(e,!1,u):document.execCommand("removeFormat",!1,e);else{document.execCommand("fontSize",!1,"2");for(var p=t.getSelectionParentElement().parentNode.getElementsByTagName("font"),m=0,v=p.length;m<v;m++)p[m].hasAttribute("style")&&(p[m].style.backgroundColor="");setTimeout(function(){for(var w=0,C=p.length;w<C;w++)p[w].hasAttribute("size")&&(p[w].style.backgroundColor=u,p[w].removeAttribute("size"))},0)}}}),a.toggleList()},execFormatBlock:function(e){if(this.selection===void 0&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var t=$(this.selection.anchorNode).is("div.editor")?$(this.selection.anchorNode).get(0):$(this.selection.anchorNode).parents("div.editor").get(0);if(t!==void 0&&this.element.get(0)===t){var n=this.getSelectionData(this.selection.anchorNode);if(e==="blockquote"&&n.el&&n.el.parentNode.tagName.toLowerCase()==="blockquote")return document.execCommand("outdent",!1,null);if(n.tagName===e&&(e="p"),Be.browser.name==="ie"){if(e==="blockquote")return document.execCommand("indent",!1,e);e="<".concat(e,">")}document.queryCommandState("bold")&&document.execCommand("bold",!1,e),document.queryCommandState("italic")&&document.execCommand("italic",!1,e),document.queryCommandState("underline")&&document.execCommand("underline",!1,e),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,e),n.el&&n.el.innerHTML&&n.el.innerHTML.substr(0,4)==="<ul>"&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&this.selection.anchorNode.parentNode.parentElement.nodeName==="UL"&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),n.el&&n.el.innerHTML&&n.el.innerHTML.substr(0,4)==="<ol>"&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&this.selection.anchorNode.parentNode.parentElement.nodeName==="OL"&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),document.execCommand("formatBlock",!1,e),this.checkActiveButtons()}}},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&_s.indexOf(t)===-1;)(e=e.parentNode)&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},isListItemChild:function(e){for(var t=e.parentNode,n=t.tagName.toLowerCase();_s.indexOf(n)===-1&&n!=="div";){if(n==="li")return!0;if(!(t=t.parentNode)||!t.tagName)return!1;n=t.tagName.toLowerCase()}return!1},destroyToolbar:function(){var e=function(U){return U||$()};this.toolbar=e(this.toolbar),this.element=e(this.element),this.textarea=e(this.textarea);var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");t&&t.destroy();for(var n=this.toolbar.find("button"),i=0,a=n.length;i<a;i++){var r=$(n[i]).data("tooltip");r&&typeof r.destroy=="function"&&r.destroy();var o=$(n[i]).data("button");o&&typeof o.destroy=="function"&&o.destroy()}for(var c=$('[data-action="foreColor"], [data-action="backColor"]',this.element),u=0,p=c.length;u<p;u++){var m=$(c[u]).data("colorpicker");m&&typeof m.destroy=="function"&&m.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat(Mn));var v=this.fontPickerElem.data("fontpicker");v&&v.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat(Mn),"selected.".concat(Mn)].join(" ")),this.toolbar.remove(),delete this.toolbar;var w=["blur","DOMNodeInserted","focus","input.".concat(Mn),"keydown.".concat(Mn),"keypress.".concat(Mn),"keyup.".concat(Mn),"mouseup.".concat(Mn),"mousedown.".concat(Mn),"paste.".concat(Mn)].join(" ");this.element.off(w),this.textarea.off(w),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var C=this.checkColorButtonState("foreColor"),A=C.cpBtn;if(A.off("selected.editor"),(A=(C=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var S=Object.keys(this.modals),M=0,I=S.length;M<I;M++){var z=$("#modal-".concat(S[M],"-").concat(this.id)),V=z.data("modal");z.off("beforeclose.editor close.editor open.editor beforeopen.editor"),V&&typeof V.destroy=="function"&&V.destroy(),z.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var e=this.container[0].classList,t=this.element[0].classList;if(!e.contains("is-preview")){if(!this.isEditable()){var n=["is-disabled","is-readonly","is-preview"];e.remove.apply(e,n),t.remove.apply(t,n)}this.sourceViewActive()&&this.toggleSource(),e.add("is-preview"),t.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(i){var a=$(i).data("tooltip");a&&typeof a.destroy=="function"&&a.destroy()})}},destroyPreviewMode:function(){if(this.container[0]){var e=this.container[0].classList;e.contains("is-preview")&&(e.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var e=this,t=!0,n=function(i,a){return i.classList.contains(a)};return["is-disabled","is-readonly","is-preview"].forEach(function(i){(n(e.container[0],i)||n(e.element[0],i))&&(t=!1)}),t},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Mr)),this.teardown().init()},teardown:function(){this.destroyToolbar();var e=this.getCurrentElement();return this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,e.off("keyup.editor"),e.off("mouseup.editor"),this.container.off(["focusin.".concat(Mn),"focusout.".concat(Mn),"mouseneter.".concat(Mn),"mouseleave.".concat(Mn),"input.".concat(Mn),"keyup.".concat(Mn)].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat(Mn)),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat(Mn),"updated.".concat(Mn)].join(" ")),$("html").off("themechanged.".concat(Mn)),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],Mn)},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){Be.browser.name!=="firefox"&&document.addEventListener&&document.addEventListener("paste",function(e){if(e.clipboardData!==void 0){var t=e.clipboardData.items[0];if(t.type.indexOf("image")===0){var n=t.getAsFile(),i=new FileReader;i.onload=function(a){var r=a.target.result;document.execCommand("insertImage",!1,r)},i.readAsDataURL(n)}}},!1)},isWordFormat:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},cleanWordHtml:function(e){var t=e;t=(t=(t=(t=(t=(t=t.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"\xA0")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,c){return c.length>0?c.replace(/./," ").slice(Math.floor(c.length/2)).split("").join("\xA0"):""})).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var n=["style","script","applet","embed","noframes","noscript"],i=0,a=n.length;i<a;i++){var r=new RegExp("<".concat(n[i],".*?").concat(n[i],"(.*?)>"),"gi");t=t.replace(r,"")}return t},stripAttribute:function(e,t,n){return t==="style"?this.stripStyles(e,n):e.replace(n,"")},stripStyles:function(e,t){var n=["color","font-size","background","font-weight","font-style","text-decoration","text-align"];return e.replace(t,function(i){for(var a=(i=i.replace(/( style=|("|\'))/gi,"")).split(";"),r="",o=0;o<a.length;o++){var c=a[o].split(":");r+=n.indexOf((c[0]||"").trim())>-1?"".concat(c[0],":").concat(c[1],";"):""}return r!==""?' style="'.concat(r,'"'):""})},formatHtml:function(e){e=e.trim();var t=this.settings,n=e.split(/</),i=0,a="";function r(p){var m="",v=p*(typeof t.formatterTabsize=="number"?t.formatterTabsize:4);if(p>-1)for(;v--;)m+=" ";return m}for(var o=0,c=n.length;o<c;o++){var u=n[o].split(/>/);u.length===2?(n[o][0]==="/"&&i--,a+=r(i),n[o][0]!=="/"&&i++,o>0&&(a+="<"),a+="".concat(u[0].trim(),`>
`),u[1].trim()!==""&&(a+="".concat(r(i)+u[1].trim().replace(/\s+/g," "),`
`)),u[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&i--):a+="".concat(r(i)+u[0],`
`)}return a.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(e){return this.each(function(){var t=$.data(this,Mn);t?t.updated(e):t=$.data(this,Mn,new al(this,e))})};var sl="hierarchy",Lr={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Ol(e,t){this.settings=N.mergeSettings(e,t,Lr),this.element=$(e),this.init()}Ol.prototype={init:function(){var e=this.settings;if(this.rootId===null&&this.element.attr("id")===void 0?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",e.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),e.dataset!==void 0&&e.dataset.length!==0&&Array.isArray(e.dataset)){if(e.dataset[0]&&e.dataset[0].children&&e.dataset[0].children.length>0||this.isStackedLayout()?this.render(e.dataset[0]):e.dataset&&e.dataset.children.length>0&&this.render(e.dataset),e.leafHeight!==null&&e.leafWidth!==null){var t="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(e.leafWidth,"px;  height: ").concat(e.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(t,"</style>")).appendTo("body")}e.layout&&this.setLayout(e.layout),this.setAutomationAttributes()}else this.element.emptymessage(e.emptyMessage)},setAutomationAttributes:function(){var e=this;[].slice.call(this.element[0].querySelectorAll(".leaf")).forEach(function(t){var n=$(t),i=n.data();if(i&&i.attributes){var a=n.find(".btn-expand, .btn-collapse");N.addAttributes(n,e,i.attributes,"hierarchy-leaf"),N.addAttributes(a,e,i.attributes,"hierarchy-btn-toggle")}})},setLayout:function(e){switch(this.isPagingLayout()&&(e="paging"),this.isMobileOnly()&&(e="mobile-only"),e){case"horizontal":default:this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only")}},handleEvents:function(){var e=this,t=this,n=this.settings;t.element.off("click.hierarchy").on("click.hierarchy",".btn",function(i){if(!t.isStackedLayout()){n.newData.length>0&&(n.newData=[]);var a=$(this).closest(".leaf").attr("id"),r=$("#".concat(a)).data(),o={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};r.isExpanded?t.collapse(i,r,o):t.expand(i,r,o)}}),this.element.on("keypress",".leaf",function(i){var a=$(this).attr("id"),r=$("#".concat(a));i.which===13&&(r.isExpanded?t.collapse(i,r):t.expand(i,r))}),t.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",function(i){var a=i.currentTarget.id,r={event:i,data:$("#".concat(a)).data()};i.stopImmediatePropagation(),e.element.trigger("dblclick",r)}),t.element.on("mouseup",".leaf, .back button",function(i){var a=$(this),r=$(i.target),o=a.closest(".hierarchy").data("hierarchy"),c=a.data(),u=$(this).attr("id"),p={target:i.target,pageX:i.pageX,pageY:i.pageY},m=r.is("button"),v=!r.hasClass("btn-back"),w=r.is(".btn-back"),C=r.find("use").prop("href"),A=!!C&&C.baseVal==="#icon-caret-up",S=!!C&&C.baseVal==="#icon-caret-down",M=!!C&&C.baseVal==="#icon-caret-right",I=r.hasClass("btn-actions"),z=r.is("a")&&r.parent().parent().is("ul.popupmenu"),V=a.hasClass("ancestor"),U="selected";if(i.stopImmediatePropagation(),(!z||!$(r).parent().data("disabled"))&&($(".leaf.is-selected").removeClass("is-selected"),$("#".concat(u)).addClass("is-selected"),m&&A&&v&&(U=V?"back":"collapse"),m&&S&&v&&(U="expand"),w&&(U="back"),I&&(U="actions",o.buildActionsMenu(c,a)),z&&(U="action"),m&&M&&v&&(U="forward"),i.which===3&&(U="rightClick"),o)){var G={id:u,data:c,actionReference:z?r.data("actionReference"):null,targetInfo:p,eventType:U,isForwardEvent:o.isForwardEvent(U),isBackEvent:o.isBackEvent(U),isAddEvent:o.isAddEvent(U),isExpandEvent:o.isExpandEvent(U),isCollapseEvent:o.isCollapseEvent(U),isSelectedEvent:o.isSelectedEvent(U),isActionsEvent:o.isActionsEvent(U),isActionEvent:o.isActionEvent(U),allowLazyLoad:o.allowLazyLoad(c,U)};a.trigger("selected",G)}})},selectLeaf:function(e){var t=$("#".concat(e));$(".leaf.is-selected").removeClass("is-selected"),t.addClass("is-selected");var n={data:t.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};t.trigger("selected",n)},updateActions:function(e,t){var n=$(e.targetInfo.target).closest(".leaf"),i=e.data,a=$(n).find(".popupmenu"),r=a.data("trigger").data().popupmenu,o=a.find("li").not(":eq(0)");$(o).each(function(c,u){$(u).remove()}),i.menu.actions=t,a.append(this.getActionMenuItems(i)),r.keydownThenClick=!0,r.open(),r.handleAfterPlace(null,{element:a.parent(),parent:$(n).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(e,t){var n=$(t).find(".popupmenu"),i=[];e.menu!==void 0&&(n.empty(),e.menu.details&&(n.addClass("has-detail-fields"),i.push('<li><div class="detail-fields">'.concat(e.menu.details.map(function(a){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(a.key,'</div><div class="dt-fields-cell">').concat(a.value,"</div></div>")}).join(""),"</div></li>"))),e.menu.actions&&i.push(this.getActionMenuItems(e)),i.forEach(function(a){n.append(a)}))},getActionMenuItems:function(e){var t,n=this,i=e.menu.actions.map(function(r){return r.disabled===void 0&&(r.disabled=!1),r}),a=function(r){return N.stringAttributes(n,t,"option-".concat(r))};return e.attributes&&(t=this.getAutomationAttributes(e,"-hierarchy-popupmenu")),i.map(function(r,o){return r.hasOwnProperty("data")&&r.data.type==="separator"?'<li class="separator"></li>':`
        <li data-disabled="`.concat(r.disabled,'" class="').concat(r.menu?"submenu":"",`">
          <a href="`).concat(r.url,'"').concat(a(o)," data-action-reference='")+JSON.stringify(r.data)+`'>
            `.concat(r.value,`
            `).concat(r.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"",`
          </a>
          `).concat(r.menu?`<div class="wrapper" role="application" aria-hidden="true">
            <ul class="popupmenu">
              `.concat(r.menu.map(function(c,u){return`
              <li data-disabled="`.concat(r.disabled,`">
                <a href="`).concat(r.url,'"').concat(a("".concat(o,"-").concat(u)),' data-action-reference="').concat(JSON.stringify(r.data),'">').concat(c.value,`</a>
              </li>`)}).join(""),`
            </ul>
          </div>`):"",`
        </li>`)}).join("")},isBackEvent:function(e){return e==="back"},isForwardEvent:function(e){return e==="forward"},isAddEvent:function(e){return e==="add"},isExpandEvent:function(e){return e==="expand"},isCollapseEvent:function(e){return e==="collapse"},isSelectedEvent:function(e){return e==="selected"},isActionsEvent:function(e){return e==="actions"},isActionEvent:function(e){return e==="action"},allowLazyLoad:function(e,t){return e!==void 0&&t!==void 0&&!e.isLoaded&&!e.isLeaf&&t==="expand"},data:function(e,t,n,i){i===void 0&&(i={});var a=this.settings,r=t.isRootNode?t:t[0],o=[];function c(p,m,v){Object.keys(m).forEach(function(w){w==="id"&&e===m.id&&(m.isLoaded||m.isRootNode||function(C,A){A.insert&&(delete C.isLeaf,C.isExpanded=!0),n.length!==0&&A.insert?C.children=[n]:C.children=n}(m,i),o.push(m))}),m.children&&u(p,m.children)}function u(p,m,v){if(m.length===void 0)c(p,m);else for(var w=0,C=m.length;w<C;w++)c(p,m[w])}return a.newData.length>0&&(a.newData=[]),n!==void 0&&u(this,r),o.length!==0&&$("#".concat(o[0].id)).data(o[0]),o[0]},add:function(e,t,n){var i=this.settings,a=t.id!==void 0?t.id:e,r=$("#".concat(a)),o=r.parent().hasClass("leaf-container")?r.parent().parent():r.parent(),c={},u=o.parent().attr("class")!=="sub-level",p=o.children(".sublist").length===1;if(u?p?c.element=o.children(".sublist"):(c.el=o.append("<ul class='sublist'></ul>"),c.element=$(c.el).find(".sublist")):(c.el=o.children("ul"),c.element=$(c.el)),c.element.length===0&&(c.el=o.append("<ul></ul>"),c.element=$(c.el).find("ul")),!t.isRootNode){for(var m=0,v=n.length;m<v;m++)i.newData.push(n[m]);this.createLeaf(n,c.element)}this.updateState(r,!1,null,"add")},closePopupMenu:function(e){var t=e.find(".btn-actions");t.length!==0&&t.data("popupmenu").close()},expand:function(e,t,n){var i=this.settings,a=n.leaf,r=a.next();this.closePopupMenu(a),r.animateOpen(),this.element.trigger("expanded",[t,i.dataset]),a.hasClass("root")&&(r=r.next("ul")).animateOpen(),a.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(a,!1,null,"expand")},collapse:function(e,t,n){var i=this,a=this.settings,r=n.leaf,o=r.next();this.closePopupMenu(r),o.animateClosed().on("animateclosedcomplete",function(){i.element.trigger("collapsed",[t,a.dataset])}),r.hasClass("root")&&(o=o.next("ul")).animateClosed(),r.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(r,!1,null,"collapse")},render:function(e){var t=this,n=this.settings,i=n.legend,a=e.children,r=[],o="".concat(N.uniqueId(this.element,"hierarchy")),c={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(c.chart);var u=$("#".concat(this.settings.rootId," .chart"));if(i.length!==0){$("#".concat(this.settings.rootId)).prepend(c.legend);var p=$("#".concat(this.settings.rootId," legend"));this.createLegend(p)}if(this.isSingleChildWithChildren()&&$(u).addClass("has-single-child"),this.setColor(e),this.isPagingLayout()&&e.parentDataSet){var m=' id="'.concat(o,'-back-button" data-automation-id="automation-id-').concat(o,'-back-button"'),v=`<div class="back">
        <button type="button" class="btn-icon hide-focus btn-back"`.concat(m,`>
          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
            <use href="#icon-caret-left"></use>
          </svg>
          <span>Back</span>
        </button></div>`),w=$(v).appendTo(u);setTimeout(function(){return w.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')}),w.children("button").data(e),$(u).addClass("has-back")}if(e.isMultiRoot){var C='<div class="leaf multiRoot"><div><h2>'.concat(e.multiRootText,"</h2></div></div>");C=_e.sanitizeHTML(C),r.push(C),$(r[0]).addClass("root").appendTo(u)}else if(e.ancestorPath!==null&&e.ancestorPath!==void 0){e.ancestorPath.push(e.centeredNode);var A="".concat(e.ancestorPath.map(function(H){return" ".concat(t.getTemplate(H)," ")}).join(""));A=_e.sanitizeHTML(A),r.push(A),$(r[0]).addClass("root ancestor").appendTo(u);var S=this.element.find(".leaf.root");S.each(function(H,he){t.updateState(he,!1,e.ancestorPath[H],"add"),H===S.length-1&&$(he).addClass("is-selected")})}else{var M,I=e.centeredNode;this.isStackedLayout()&&I!==null?M=this.getTemplate(I):this.isStackedLayout()||(M=this.getTemplate(e)),M&&(M=_e.sanitizeHTML(M),r.push(M),$(r[0]).addClass("root is-selected").appendTo(u)),I&&I!==null?this.updateState(this.element.find(".leaf.root"),!0,I,void 0):this.updateState(this.element.find(".leaf.root"),!0,e,void 0)}function z(H,he,ie){if(he!=null)for(var me=0,ke=he.length;me<ke;me++)J(H,he[me])}if(a&&a.length>0)for(var V=0,U=a.length;V<U;V++){var G=e.children[V].children;this.isLeaf(a[V])&&!this.isPagingLayout()&&n.renderSubLevel||this.isPagingLayout()?this.createLeaf(e.children[V],$(c.toplevel)):this.createLeaf(e.children[V],$(c.sublevel)),G!=null&&z(this,e.children[V].children)}function J(H,he,ie){Object.keys(he).forEach(function(me){if(me==="children"){var ke=he.id,De=he,Me=he.children;return Me!=null&&Me.length>0&&H.add(ke,De,Me),z(H,Me)}return!0})}var te=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(te);var de=this.element.find(".top-level");this.element.find(".sub-level").length===0&&de.length===1&&de.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&this.settings.layout==="paging"},isMobileOnly:function(){return this.settings.layout&&this.settings.layout==="mobile-only"},isStackedLayout:function(){return this.settings.layout&&this.settings.layout==="stacked"},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var e=this.settings;if(e.dataset&&e.dataset[0]&&e.dataset[0].children){for(var t=e.dataset[0].children.length,n=0;t--;)e.dataset[0].children[t].isLeaf||n++;return n===1}return!1},getAutomationAttributes:function(e,t){var n=this,i=e.attributes;if(e.attributes&&typeof t=="string"&&t!=="")if(Array.isArray(e.attributes))i=[],e.attributes.forEach(function(r){var o=typeof r.value=="function"?r.value(n):r.value;i.push({name:r.name,value:o+t})});else{var a=typeof e.attributes.value=="function"?e.attributes.value(this):e.attributes.value;i={name:e.attributes.name,value:a+t}}return i},getTemplate:function(e){var t=this,n=Xn.compile("{{#dataset}}".concat($("#".concat(_e.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:e});return setTimeout(function(){var i=$("#btn-".concat(_e.stripTags(e.id)));if(i.length!==0){var a=t.getAutomationAttributes(e,"-hierarchy-popupmenu");i.hideFocus().popupmenu({attachToBody:!1,attributes:a})}},1),$(n).prop("outerHTML")},createLegend:function(e){for(var t=this.settings,n=0,i=0,a=t.legend.length;i<a;i++){var r=t.legend[i].label,o=t.colorClass[i];i-1+1==4&&(e.append("<ul></ul>"),n++),e.children("ul").eq(n).append(""+`<li>
          <span class="key `.concat(o,`"></span>
          <span>`).concat(r,`</span>
        </li>`))}},createLeaf:function(e,t){var n=this,i=$("#".concat(n.settings.rootId," .chart"),n.container),a=t.attr("class"),r=a!==void 0?$("#".concat(n.settings.rootId," .").concat(a)):t;function o(p){n.setColor(p);var m=n.getTemplate(p),v=n.settings.rootId,w=r.length===1?r:t,C=p.isExpanded||p.isExpanded===void 0?"branch-expanded":"branch-collapsed";if(p.isLeaf&&(C=""),$("#".concat(v," #").concat(p.id)).length!==1&&(w.append("<li class=".concat(C,">").concat($(m)[0].outerHTML,"</li>")),p.children)){for(var A="",S=0,M=p.children.length;S<M;S++){n.setColor(p.children[S]);var I=n.getTemplate(p.children[S]);p.children.length,A+="<li>".concat($(I)[0].outerHTML,"</li>")}(w=$("#".concat(v," #").concat(_e.stripTags(p.id))).parent()).append("<ul>".concat(A,"</ul>"));for(var z=p.children.length;z--;){var V=$("#".concat(v," #").concat(_e.stripTags(p.children[z].id)));n.updateState(V,!1,p.children[z],void 0)}}}if(r.length<1&&(a==="top-level"?t.insertAfter(".root"):t.appendTo(i)),e.length)for(var c=0,u=e.length;c<u;c++)e.length,o(e[c]),n.updateState($("#".concat(n.settings.rootId," #").concat(_e.stripTags(e[c].id))),!1,e[c],void 0);else o(e),n.updateState($("#".concat(n.settings.rootId," #").concat(_e.stripTags(e.id))),!1,e,void 0)},setColor:function(e){var t=this,n=this.settings;if(this.setRootColor(e),this.isStackedLayout()&&(e.ancestorPath&&e.ancestorPath!==null&&e.ancestorPath.forEach(function(c){t.setRootColor(c)}),e.centeredNode&&e.centeredNode!==null&&this.setRootColor(e.centeredNode)),e.children&&!e.isRootNode)for(var i=0,a=e.children.length;i<a;i++)for(var r=0,o=n.legend.length;r<o;r++)e.children[i][n.legendKey]===n.legend[r].value&&(e.children[i].colorClass=n.colorClass[r])},setRootColor:function(e){for(var t=this.settings,n=0,i=t.legend.length;n<i;n++){if(e[t.legendKey]===t.legend[n].value){e.colorClass=t.colorClass[n];break}e[t.legendKey]===""&&(e.colorClass="default-color")}},isLeaf:function(e){var t=this.settings;return e.isLeaf||t.beforeExpand?e.isLeaf:!(e.children&&e.children.length>0)},updateState:function(e,t,n,i){if($.isEmptyObject($(e).data())&&n){var a=n===void 0?{}:n;$(e).data(a)}var r=this.settings,o=$(e).find(".btn"),c=this.isPagingLayout()?"caret-right":"caret-up",u=$(e).data();u===void 0&&n!==void 0&&(u=n),(u.children&&u.children.length!==0||i==="add")&&(u.isExpanded=!0,u.isLoaded=!0),t&&(u.isRootNode=!0,u.isLoaded=!0),(u.isExpanded===void 0&&u.children||i==="expand")&&(u.isExpanded=!0),u.isExpanded!==void 0&&i!=="collapse"||(u.isExpanded=!1),u.isExpanded?(o.find("svg.icon").changeIcon(c),o.addClass("btn-expand").removeClass("btn-collapse")):(o.find("svg.icon").changeIcon("caret-down"),o.addClass("btn-collapse").removeClass("btn-expand")),(u.isLeaf||u.isRootNode)&&o.addClass("btn-hidden"),u.isLeaf&&(u.isLoaded=!1,u.isExpanded=!1),this.isPagingLayout()&&(u.parentDataSet=r.dataset),$(e).data(u)},reload:function(e){this.destroy(),this.element.hierarchy(e)},unbind:function(){this.element.empty()},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Lr)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData(sl)}},$.fn.hierarchy=function(e){return this.each(function(){var t=$.data(this,sl);t?t.updated(e):t=$.data(this,sl,new Ol(this,e))})};var zs="fieldfilter",Pd={dataset:[],dropdownOpts:{},template:""+"<label>".concat(L.translate("FieldFilter"),`</label>
    <select class="dropdown no-init field-filter-dropdown">
      {{#dataset}}
        <option
          {{#value}} value="{{value}}"{{/value}}
          {{#selected}} selected{{/selected}}
          {{#disabled}} class="is-disabled" disabled{{/disabled}}
          {{#icon}} data-icon="{{icon}}"{{/icon}}
        >{{text}}</option>
      {{/dataset}}
    </select>`)};function rl(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Pd),this.init()}rl.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(e){var t=this.settings;if(e=e||t.dataset,at(Xn)==="object"&&e&&t.template){t.template instanceof $?t.template="".concat(t.template.html()):typeof t.template=="string"&&(ot.containsHTML(t.template)||(t.template=$("#".concat(t.template)).html()));var n=Xn.compile(t.template,{dataset:t.dropdownOpts.source?[]:e}),i=""+`<label for="ffdropdown-empty" class="audible">
          `.concat(L.translate("FieldFilter"),`
        </label>
        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>`);e.length>0?this.element.before(n):e.length===0&&this.element.before(n||i);var a=this.element.attr("id")||this.element.attr("name");a===void 0&&(a=N.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",a));var r="".concat(a,"-ff");this.field=this.element.closest(".field, .field-short");var o=L.isRTL();t.dropdownOpts=t.dropdownOpts||{},o&&at(t.dropdownOpts)==="object"&&(t.dropdownOpts.placementOpts?t.dropdownOpts.placementOpts.x=this.element.outerWidth():t.dropdownOpts.placementOpts={x:this.element.outerWidth()}),t.dropdownOpts.cssClass=t.dropdownOpts.cssClass?"".concat(t.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",t.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(t.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",r),this.ffdropdown[0].setAttribute("name",r),this.ffdropdown.prev("label")[0].setAttribute("for",r);var c=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(c),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon"),N.addAttributes(this.field,this,this.settings.attributes,"",!0),N.addAttributes(this.field.find("label:not(.audible)"),this,this.settings.attributes,"label",!0),N.addAttributes(this.field.find("select"),this,this.settings.attributes,"select",!0)}},setFiltered:function(){if(this.ddApi){var e=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(e)}return this},getTriggerData:function(e){var t=this.settings,n=t.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:t.dataset;return{idx:e.index(),item:e,data:n[e.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(e){if(this.ddApi){var t=-1,n=this.settings,i=n.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:n.dataset;if(typeof e=="number"&&e>-1&&e<i.length)t=e;else if(typeof e=="string"){var a=this.ffdropdown.find('option[value="'.concat(e,'"]'));a.length||(a=this.ffdropdown.find("option").filter(function(){return $(this).text()===e})),a.length&&(t=a.index())}t!==-1&&t!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=t,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var e=this;return this.ffdropdown.on("listopened.".concat(zs),function(){var t=e.field.is(".field-short")?42:52;$("#dropdown-list ul").width(e.element.outerWidth()+t)}).on("selected.".concat(zs),function(t,n){var i=e.getTriggerData(n);e.element.triggerHandler("filtered",[i])}),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat(zs)),this.ddApi&&typeof this.ddApi.destroy=="function"&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element[0],e,Pd)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],zs)}},$.fn.fieldfilter=function(e){return this.each(function(){var t=$.data(this,zs);t?t.updated(e):t=$.data(this,zs,new rl(this,e))})};var Ot="fieldoptions",ol={};function Rl(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ol),this.init(),Ss("FieldOptions")}Rl.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var e=this;this.isFirefox=Be.browser.name==="firefox",this.isSafari=Be.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var t=this.field.find("label");return t&&(this.label=t),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat(Ot),function(n){(n.which||n.keyCode||n.charCode||0)!==9&&(n.preventDefault(),n.stopPropagation())})),setTimeout(function(){e.popupmenuApi=e.trigger.data("popupmenu"),e.popupmenuApi&&(e.popupmenuApi.settings.returnFocus=!1,e.popupmenuApi.settings.offset.y=10)},100),this},handleEvents:function(){var e=this,t=this,n=this.element.data("datepicker"),i=this.element.data("timepicker"),a=this.element.data("dropdown"),r=this.element.data("lookup")||this.element.hasClass("lookup"),o=this.element.is(".checkbox"),c=this.element.is(".fileupload"),u=this.element.is(".searchfield"),p=this.element.is(".colorpicker"),m=this.element.closest(".radio-group").length>0,v=this.element.is(".data")&&this.element.closest(".summary-form").length>0,w=function(G){return $(":focus").is(G)},C=function(G){(G||e.element).addClass("is-focused")},A=function(G){(G||e.element).removeClass("is-focused")},S=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).addClass("is-active")},M=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).removeClass("is-active")},I=function(G){var J=!w(e.element);return J=!e.trigger.is(G.relatedTarget)&&J,J=!e.trigger.is(".is-open")&&J,J=(!n||!n.isOpen())&&J,J=(!i||!i.isOpen())&&J,J=!$(G.relatedTarget).prev().is(e.element)&&J,J=(!a||!a.isOpen())&&J,J=!(r&&r.modal&&r.modal.isOpen())&&J,J=(!p||!e.element.is(".is-open"))&&J},z=function(G){G.trigger&&G.trigger.off("show.".concat(Ot)).on("show.".concat(Ot),function(){S()}).off("hide.".concat(Ot)).on("hide.".concat(Ot),function(J){I(J)&&(M(),e.element.removeClass("is-open"))})},V=function(){var G,J=e.element.height();if(v){var te=parseInt(e.element.css("line-height"),10);if(J>te){e.element.removeClass("is-singleline"),G=-1*((e.element.outerHeight()-e.trigger.height())/2+0);var de=te-16;G+=de?de/2:0}else e.element.addClass("is-singleline"),G=2}else m&&(G=(J-10-e.trigger.height())/2*-1);return G},U=function(){e.trigger.css({top:"".concat(V()-1,"px")})};return Be.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat(Ot),function(G){var J;J=w(e.element),J=(!n||!n.isOpen())&&J,J=(!i||!i.isOpen())&&J,a&&a.isOpen()||!J||S()}).on("close.".concat(Ot),function(G){I(G)&&M()})):(this.field.removeClass("visible"),this.field.on("mouseover.".concat(Ot),function(){t.element.prop("disabled")||t.element.closest("is-disabled").length||t.field[0].className.indexOf("visible")<0&&t.field[0].classList.add("visible")}).on("mouseout.".concat(Ot),function(){t.field[0].className.indexOf("visible")>-1&&t.field[0].classList.remove("visible")})),a&&setTimeout(function(){var G=e.trigger.data("popupmenu");G&&G.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})},0),(n||i)&&z(n||i),i&&(i.settings.returnFocus=!1),(r||p)&&(this.field.on("click.".concat(Ot),".lookup-wrapper .trigger, .colorpicker-container .trigger",function(){S()}),p&&this.element.on("beforeopen.".concat(Ot),function(){S()})),o&&(this.trigger.addClass("is-checkbox"),!Be.features.touch&&this.isSafari&&this.field.on("click.".concat(Ot),".checkbox-label",function(){S()}).on("mouseout.".concat(Ot),".checkbox-label",function(){M()})),c&&(this.element.on("change.".concat(Ot),function(){e.targetElem.focus()}),this.field.on("click.".concat(Ot),".trigger, .trigger-close",function(){S()})),u&&setTimeout(function(){e.trigger.add(e.trigger.next(".popupmenu")).appendTo(e.element.closest(".searchfield-wrapper"))},0),v&&(U(),this.targetElem.add(this.trigger).on("keydown.".concat(Ot),function(G){(G.which||G.keyCode||G.charCode||0)===13&&setTimeout(function(){S()},0)}),this.targetElem.attr("tabindex",0).on("click.".concat(Ot),function(){S()}),$(document).on("click.".concat(Ot),function(G){$(G.target).is(e.element)||M()}),$("body").on("resize.".concat(Ot),function(){U()})),m&&(U(),this.element.on("focusin.".concat(Ot),".radio",function(){var G=e.isSafari?200:0;C(),setTimeout(function(){S()},G)}).on("focusout.".concat(Ot),".radio",function(){A()}),$("body").on("resize.".concat(Ot),function(){U()})),this.targetElem.on("focusin.".concat(Ot),function(){S(),m&&e.isSafari&&C()}).on("focusout.".concat(Ot),function(G){var J=e.isSafari?200:0;m&&e.isSafari&&A(),setTimeout(function(){I(G)&&M()},J)}),this.trigger.on("focusin.".concat(Ot," click.").concat(Ot),function(){S()}).on("focusout.".concat(Ot),function(G){I(G)&&M()}).on("selected.".concat(Ot),function(){e.popupmenuApi.settings.returnFocus=!0}).on("close.".concat(Ot),function(G){I(G)&&M()}),(this.isSafari||c)&&(m&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat(Ot),function(G){(G.which||G.keyCode||G.charCode||0)!==9||G.shiftKey||(m?(e.targetElem.find(":checked, .radio:first").not(":disabled").focus(),e.targetElem.find(".radio").off("keydown.".concat(Ot)).on("keydown.".concat(Ot),function(J){(J.which||J.keyCode||J.charCode||0)!==9||G.shiftKey||setTimeout(function(){e.trigger.focus()},0)})):e.trigger.focus(),S(),G.preventDefault(),G.stopPropagation())})),this.element.on("listopened.".concat(Ot),function(){S()}).on("listclosed.".concat(Ot),function(){M()}),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat(Ot),"mouseover.".concat(Ot),"mouseout.".concat(Ot)].join(" ")),this.element.off(["beforeopen.".concat(Ot),"change.".concat(Ot),"focusin.".concat(Ot),"focusout.".concat(Ot),"listclosed.".concat(Ot),"listopened.".concat(Ot)].join(" ")),this.trigger.off(["beforeopen.".concat(Ot),"click.".concat(Ot),"focusin.".concat(Ot),"focusout.".concat(Ot),"selected.".concat(Ot),"close.".concat(Ot)].join(" ")),this.targetElem.off(["click.".concat(Ot),"keydown.".concat(Ot)].join(" ")),$("body").off(["resize.".concat(Ot)].join(" ")),$(document).off(["click.".concat(Ot)].join(" ")),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,ol)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Ot)}},$.fn.fieldoptions=function(e){return this.each(function(){var t=$.data(this,Ot);t?t.updated(e):t=$.data(this,Ot,new Rl(this,e))})};var Ic="fileupload",Bd={};function Gu(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Bd),this.init()}Gu.prototype={init:function(){this.build()},build:function(){var e=this,t=this,n=this.element,i=!n.is("input.fileupload");this.fileInput=i?n.find("input"):n,n.closest(".field, .field-short").addClass("field-fileupload");var a=n.find("input").attr("name");i||(a=n.attr("id")||n.attr("name"));var r=i?n.find("input").attr("class"):n.attr("class");r=r?" ".concat(r):"";var o=L.translate("FileUpload");this.shadowLabel=$('<label for="'.concat(a,'-filename">').concat(n.text(),' <span class="audible">').concat(o,"</span></label>")),this.shadowField=$('<input readonly id="'.concat(a,'-filename" class="fileupload-background-transparent').concat(r,'" type="text">'));var c='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),u='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!i){var p=n.prev("label");p.length===0&&(p=n.parent().prev("label")),p.hasClass("required")&&this.shadowLabel.addClass("required"),this.shadowLabel.html("".concat(p.text(),' <span class="audible">').concat(o,"</span>")),p.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}n.parent().find('input[type="text"]').length===0&&(n.before(this.shadowLabel,this.shadowField),this.fileInput.after(c,u));var m=this.fileInput.attr("value");m&&m.length>0&&(this.shadowField.val(m),this.fileInput.attr("value","")),this.textInput=this.shadowField,this.svg=n.parent().find(".trigger"),this.svgClose=n.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",function(v){var w=!1;v.which===13||v.which===32?(n.parent().find('[type="file"]').trigger("click"),w=!0):v.which!==8||n.prop("readonly")||n.prop("disabled")||(Be.browser.isIE11()&&v.preventDefault(),e.clearUploadFile(),w=!0),w&&v.stopPropagation()}),this.svg.on("click.fileupload",function(v){e.fileInput.trigger("click"),i&&e.fileInput.data("handleEvent".concat([v.type||""]),v.handleObj)}),this.svgClose.on("click.fileupload",function(v){e.clearUploadFile(),e.svgClose.removeClass("is-visible"),i&&e.fileInput.data("handleEvent +".concat([v.type||""]),v.handleObj),t.textInput.trigger("change")}),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),n.hasClass("required")&&(this.shadowLabel.addClass("required"),n.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate(),this.shadowLabel.addClass(this.fileInput.attr("data-validate"))),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",function(){this.files.length>0?(t.textInput.val(this.files[0].name).trigger("change"),t.svgClose.addClass("is-visible")):t.clearing||t.clearUploadFile()}),this.fileInput.on("click.fileupload",function(v){var w=e.fileInput.data("handleEvent".concat([v.type||""]));w&&w.type===v.type&&v.handleObj.namespace==="fileupload"&&(e.fileInput.data("handleEvent".concat([v.type||""]),null),v.preventDefault())}),this.textInput.on("dragenter.fileupload",function(){e.fileInput.css("z-index","1")}),this.textInput.on("dragleave.fileupload, dragend.fileupload, drop.fileupload",function(){setTimeout(function(){e.fileInput.css("z-index","-1")},1)}),N.addAttributes(n,this,this.settings.attributes),N.addAttributes(this.svg,this,this.settings.attributes,"btn-trigger"),N.addAttributes(this.svgClose,this,this.settings.attributes,"btn-trigger-close")},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.fileInput.prev("label"),this.textInput.off(),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Bd)),this},destroy:function(){this.unbind(),this.shadowField.remove(),this.shadowLabel.remove(),$.removeData(this.element[0],Ic)},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(e){return this.each(function(){var t=$.data(this,Ic);t?t.updated(e):t=$.data(this,Ic,new Gu(this,e))})};var Nl="fileuploadadvanced",Mc={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function Yu(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Mc),this.init()}Yu.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var e,t=this.settings,n=t.isStandalone?t.standaloneClass:"";if(t.textDropArea=t.textDropArea||L.translate("TextDropArea"),t.textDropAreaWithBrowse=t.textDropAreaWithBrowse||L.translate("TextDropAreaWithBrowse"),t.textBtnCancel=t.textBtnCancel||L.translate("TextBtnCancel"),t.textBtnCloseError=t.textBtnCloseError||L.translate("TextBtnCloseError"),t.textBtnRemove=t.textBtnRemove||L.translate("TextBtnRemove"),t.errorAllowedTypes=t.errorAllowedTypes||"<em>".concat(L.translate("Error"),"</em>: ").concat(L.translate("ErrorAllowedTypes")),t.errorMaxFileSize=t.errorMaxFileSize||"<em>".concat(L.translate("Error"),"</em>: ").concat(L.translate("ErrorMaxFileSize")),t.errorMaxFiles=t.errorMaxFiles||"<em>".concat(L.translate("Error"),"</em>: ").concat(L.translate("ErrorMaxFiles")),t.errorMaxFiles=t.errorMaxFiles.replace("{n}",t.maxFiles),t.errorMaxFilesInProcess=t.errorMaxFilesInProcess||"<em>".concat(L.translate("Error"),"</em>: ").concat(L.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(t.isDisabled=!0),t.isDisabled&&(n+=" is-disabled"),t.showBrowseButton){var i="",a=N.uniqueId(this.element,"fileupload-adv-"),r=t.allowedTypes.split(/[\s|]+/g),o=t.maxFilesInProcess>1?" multiple":"";if(o+=t.isDisabled?" disabled":"",r.length===1)r[0]!=="*"&&(i=".".concat(r[0]));else for(var c=0,u=r.length;c<u;c++)i+=".".concat(r[c]+(c!==u-1?",":""));e=""+'<div class="fileupload-wrapper '.concat(n,`">
          <div class="container drop-area">
            `).concat($.createIcon("upload"),`
            <label class="fileupload-adv-browse-lbl">
              <span>`).concat(t.textDropAreaWithBrowse,`</span>
              <input type="file" name="`).concat(a,'" accept="').concat(i,'"').concat(o,` />
            </label>
          </div>
        </div>`)}else e=""+'<div class="fileupload-wrapper '.concat(n,`">
          <div class="container drop-area">
            `).concat($.createIcon("upload"),`
            <p>`).concat(t.textDropArea,`</p>
          </div>
        </div>`);ue.append(this.element,e,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element),N.addAttributes(this.dropArea,this,this.settings.attributes),N.addAttributes(this.dropArea.find("svg"),this,this.settings.attributes,"icon"),N.addAttributes(this.dropArea.find("label"),this,this.settings.attributes,"label")},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",function(r){t.element.triggerHandler("filesdragenter"),r.stopPropagation(),r.preventDefault(),n.isDisabled||$(this).addClass("hover")}).on("dragover.fileuploadadvanced",function(r){r.stopPropagation(),r.preventDefault()}).on("drop.fileuploadadvanced",function(r){var o=r.originalEvent.dataTransfer.files;r.preventDefault(),n.isDisabled||(t.element.triggerHandler("filesdroped",[o]),$(this).removeClass("hover is-focus"),t.handleFileUpload(o))}),n.showBrowseButton&&!n.isDisabled){var i=this.dropArea.find(".fileupload-adv-browse-lbl"),a=i.find('input[type="file"]');i.click(function(r){$(r.target).is('.hyperlink, input[type="file"]')||r.preventDefault()}),a.hideFocus(),a.on("hidefocusremove.fileuploadadvanced",function(r){r.stopPropagation(),e.dropArea.addClass("is-focus")}).on("hidefocusadd.fileuploadadvanced",function(r){r.stopPropagation(),e.dropArea.removeClass("is-focus")}).on("change.fileuploadadvanced",function(r){r.stopPropagation(),t.handleFileUpload(this.files),this.value=""})}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",function(r){r.stopPropagation(),r.preventDefault(),r.type==="dragover"&&t.dropArea.removeClass("hover")})},handleFileUpload:function(e){if(e!=null&&e?.length){var t=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0,this.totalFileList=this.totalFileList||[],this.counter=this.counter||0;var n=$(".progress",this.element).length;if(this.totalCompleted+e.length+n>t.maxFiles)this.showError(t.errorMaxFiles);else if(n>=t.maxFilesInProcess)this.showError(t.errorMaxFilesInProcess);else{for(var i=t.fileName.replace("[]",""),a=0,r=e.length;a<r;a++)if(this.isFileTypeAllowed(e[a].name))if(t.maxFileSize!==-1&&e[a].size>t.maxFileSize)this.showError(t.errorMaxFileSize,e[a]);else{this.element.triggerHandler("beforecreatestatus",[e[a]]);var o=new FormData;o.append("".concat(i,"[]"),e[a]);var c=this.createStatus(e[a]);c.container.find(".status-icon .action").focus(),this.totalFileList.push(c),this.element.triggerHandler("aftercreatestatus",[e[a]]),typeof t.send=="function"?t.send(o,c):this.sendFileToServer(o,c)}else this.showError(t.errorAllowedTypes,e[a]);t.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}}},createStatus:function(e){var t=this,n=this,i=this.settings,a=$(""+`<div class="container">
        <div class="file-row">
          <span class="status-icon">
            <button type="button" class="btn-icon action">
              `.concat($.createIcon({icon:"close",classes:["icon-close"]}),`
              <span>`).concat(i.textBtnCancel,`</span>
            </button>
          </span>
          <span class="description">`).concat(e.name,`</span>
          <div class="l-pull-right">
            <span class="size">`).concat(this.formatFileSize(e.size),`<span id="bar"> | </span><span class="percent">0%</span></span>
          </div>
        </div>
        <div class="progress-row">
          <span class="progress">
            <span class="progress-bar" data-value="0"></span>
          </span>
        </div>
      </div>`)),r=$(".action",a).button(),o=$(".l-pull-right",a),c=$(".progress-bar",a).progress({animationLength:10}),u=$(".percent",a),p=$("#bar",a),m=this.counter;this.dropArea.after(a);var v=function(){if(t.totalFileList){var w=t.totalFileList.findIndex(function(C){return C.index===m});w>=0&&t.totalFileList.splice(w,1)}};return this.counter++,{file:e,container:a,index:m,setProgress:function(w){t.element.triggerHandler("fileprogress",[{file:e,progress:w}]),u.text(w<=100?"".concat(w,"%"):""),w>100&&p.text(""),c.attr("data-value",w).triggerHandler("updated")},setAbort:function(w){r.on("click.fileuploadadvanced",function(){t.element.triggerHandler("fileaborted",[e]),w&&typeof w.abort=="function"&&w.abort(),r.off("click.fileuploadadvanced"),a.remove(),n.totalCompleted--,v()})},setCompleted:function(w){w=w&&typeof w.remove=="function"?w:{remove:function(){}},a.addClass("completed"),r.after($.createIcon("check")),o.append(""+`<button type="button" class="btn-icon action">
          `.concat($.createIcon({classes:["icon-close"],icon:"close"}),`
          <span>`).concat(i.textBtnRemove,`</span>
        </button>`)),$(".action",o).button().on("click.fileuploadadvanced",function(){$(this).off("click.fileuploadadvanced"),n.element.triggerHandler("beforefileremove",[e]),a.hasClass("completed")&&n.totalCompleted--,a.remove(),w.remove(),n.element.triggerHandler("fileremoved",[e])}),c.destroy(),r.off("click.fileuploadadvanced"),r.add(c.closest(".progress-row")).remove(),n.totalCompleted++,v(),n.element.triggerHandler("filecompleteuploading",[e])},setFailed:function(w){n.element.triggerHandler("filefailed",[{error:w,file:e}]),v(),a.remove(),n.showError(w,e)}}},sendFileToServer:function(e,t){var n={remove:function(){}},i=0,a=parseFloat(t.file.size),r=new $.fn.timer(function(){t.setCompleted(n)},a);$(r.event).on("update",function(o,c){i=Math.ceil(c.counter/a*100),t.setProgress(i)}),t.setAbort({abort:function(){}})},setFailed:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.totalFileList&&this.totalFileList.length>0&&this.totalFileList[t].setFailed(e)},showError:function(e,t){var n,i=this,a=this.settings;n=e===a.errorMaxFiles||e===a.errorMaxFilesInProcess?$(""+`<div class="container error">
          <div class="file-row">
            <span class="status-icon file-error">
              `.concat($.createIcon({classes:["icon-error"],icon:"error"}),`
            </span>
            <span class="msg">`).concat(e,`</span>
            <div class="l-pull-right">
              <button type="button" class="btn-icon action">
                `).concat($.createIcon({classes:["icon-close"],icon:"close"}),`
              </button>
            </div>
          </div>
        </div>`)):$(""+`<div class="container error">
          <div class="file-row">
            <span class="status-icon file-error">
              `.concat($.createIcon({classes:["icon-error"],icon:"error"}),`
            </span>
            <span class="description">`).concat(t.name,`</span>
            <div class="l-pull-right file-error">
              <span class="size">`).concat(this.formatFileSize(t.size),`</span>
              <button type="button" class="btn-icon action">
                `).concat($.createIcon({classes:["icon-close"],icon:"close"}),`
              </button>
            </div>
          </div>
          <div class="msg">
            <p>`).concat(e,`</p>
          </div>
        </div>`)),$(".action",n).button().on("click.fileuploadadvanced",function(){i.element.triggerHandler("beforeerrormessageremove",[{error:e,file:t}]),n.remove()}),this.dropArea.after(n)},isFileTypeAllowed:function(e){var t=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),n=e.split(".").pop().toLowerCase();return!(this.settings.allowedTypes!=="*"&&$.inArray(n,t)<0)},formatFileSize:function(e){var t=1e9,n=1e6,i=1e3;return typeof e!="number"?"":e>=t?"".concat((e/t).toFixed(2)," GB"):e>=n?"".concat((e/n).toFixed(2)," MB"):"".concat((e/i).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled")},disable:function(){this.settings.isDisabled=!0,this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled")},unbind:function(){this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced");var e=$(".fileupload-wrapper",this.element);return e.off().find("*").off(),e.remove(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Mc)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],Nl)}},$.fn.fileuploadadvanced=function(e){return this.each(function(){var t=$.data(this,Nl);t?t.updated(e):t=$.data(this,Nl,new Yu(this,e))})};var Od="homepage",go={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:16,widgetWidth:360,widgetHeight:368,useSmall:!1,timeout:100};function Lc(e,t){this.settings=N.mergeSettings(e,t,go),this.element=$(e),this.init()}Lc.prototype={get state(){var e=this.rowsAndCols.length,t=e?this.rowsAndCols[0].length:0,n=this.settings;return this.rowsAndCols[e-1].indexOf(!1)===-1&&(e-=1),this.editing===void 0&&(this.editing=n.editing),{rows:e,cols:t,containerHeight:n.gutterSize+(n.gutterSize+n.widgetHeight)*e,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){var e=this;this.setSmall(),this.setColumns(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),setTimeout(function(){e.resize(e,!1)},100),this.element.parent().addClass("homepage-background")},setColumns:function(){var e=this.settings.columns,t=parseInt(this.element.attr("data-columns"),10);isNaN(t)||e===t||e!==go.columns||(e=t),this.columns=e},setSmall:function(){var e=this.settings,t=this.element.attr("data-use-small");if(e.useSmall||t&&t.toString().toLowerCase()==="true"){var n=go,i={gutterSize:24,widgetWidth:260,widgetHeight:260};e.useSmall=!0,e.gutterSize===n.gutterSize&&(e.gutterSize=i.gutterSize),e.widgetWidth===n.widgetWidth&&(e.widgetWidth=i.widgetWidth),e.widgetHeight===n.widgetHeight&&(e.widgetHeight=i.widgetHeight)}},initColumns:function(e){e=e||0,this.rowsAndCols[e]=[];for(var t=0,n=this.columns;t<n;t++)this.rowsAndCols[e][t]=!0},initHeroWidget:function(){var e=this.element.parent().find(".hero-widget");e.length>1&&(e=e.not(":first").remove()),this.heroWidget=e},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var e=this,t=this,n=t.element.find(".card, .widget, .small-widget");t.editing===void 0&&(t.editing=t.settings.editing),t.editing?(n.attr("draggable",!0),n.css("cursor","move"),t.guide=$("<div>").addClass("drop-indicator").append(`
      <div class='edge'></div>
      <div class='line'></div>
      <div class='edge'></div>
      `),n.each(function(i,a){var r=$(a),o=$("<button>").addClass("card-remove").append(`
        <span class="audible">Remove Widget</span>
          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>
          </svg>
        `);if(!r.hasClass("no-remove")){var c=r.children(".widget-header");o.insertBefore(c).on("click.card-remove",function(){var u=function(){var m=r.clone(!0);r.remove(),t.refresh(!1),setTimeout(function(){t.element.triggerHandler("removecard",[r,t.state]),m.triggerHandler("removecard",[r,t.state]),m.remove()},0)};if(e.settings&&typeof e.settings.onBeforeRemoveCard=="function"){var p=e.settings.onBeforeRemoveCard(r);p&&p.then&&typeof p.then=="function"?p.then(function(){return u()}):p&&u()}else u()})}}),n.on("mouseenter.card",function(){var i=$(this),a=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",function(o){o.stopPropagation(),o.preventDefault(),i.addClass("ui-resize-passive"),i.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(c){var u=c.clientX-i.offset().left;u<t.settings.widgetWidth/2?a.css({left:t.settings.widgetWidth/2}):i.width(u)}).on("mouseup.handle",function(){i.removeClass("ui-resize-passive"),i.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),i.removeClass("double-width triple-width quad-width quintuple-width");var c=i.width()/t.settings.widgetWidth;c>4.5?i.addClass("quintuple-width"):c>3.5?i.addClass("quad-width"):c>2.5?i.addClass("triple-width"):c>1.5&&i.addClass("double-width"),$(".ui-resizable-handle").remove(),i.css({opacity:1,width:""}),t.refresh(!1),setTimeout(function(){i.triggerHandler("resizecard",[i,t.state]),t.element.triggerHandler("resizecard",[i,t.state])},0)})}),r=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",function(o){o.stopPropagation(),o.preventDefault(),i.addClass("ui-resize-passive"),i.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(c){var u=c.clientY-i.offset().top;u<t.settings.widgetHeight?r.css({top:t.settings.widgetHeight}):i.height(u)}).on("mouseup.handle",function(){i.removeClass("ui-resize-passive"),i.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),i.removeClass("double-height"),i.height()/t.settings.widgetHeight>1.5&&i.addClass("double-height"),$(".ui-resizable-handle").remove(),i.css({opacity:1,height:""}),t.refresh(!1),setTimeout(function(){i.triggerHandler("resizecard",[i,t.state]),t.element.triggerHandler("resizecard",[i,t.state])},0)})});i.has(".ui-resizable-handle").length===0&&i.append(a,r),i.addClass("editable-hover-border")}).on("mouseleave.card",function(){var i=$(this);i.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),i.removeClass("editable-hover-border")}).on("dragstart.card",function(){var i=$(this);i.addClass("is-dragging"),i.css("opacity","0.99")}).on("dragover.card",function(i){i.preventDefault()}).on("dragenter.card",function(i){i.preventDefault();var a=$(this),r=$(".is-dragging");a.is(r)&&$(".drop-indicator").length===0||(r.index()<a.index()?(t.guide.css("right","-14px"),t.guide.css("left","")):(t.guide.css("left","-14px"),t.guide.css("right","")),a.append(t.guide),t.refresh(!1))}).on("dragend.card",function(){var i=$(this);if(i.hasClass("is-dragging")){var a=$(n).has(".drop-indicator");i.css("opacity",""),i.index()<a.index()?i.insertAfter(a):i.insertBefore(a),i.removeClass("is-dragging"),t.guide.remove(),t.refresh(!1),setTimeout(function(){i.triggerHandler("reordercard",[i,t.state]),t.element.triggerHandler("reordercard",[i,t.state])},0)}})):(n.removeAttr("draggable"),n.children(".card-remove").remove(),n.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"),n.not(".card-list .card").css("cursor","auto"))},setEdit:function(e){e!==void 0&&(this.editing=e,this.initEdit(),this.refresh(!1))},getAvailability:function(e){for(var t=!1,n={},i=this.rowsAndCols.length,a=0,r=i;a<r&&!t;a++)for(var o=0,c=!0,u=this.rowsAndCols[a].length;o<u&&!t;o++)if(this.rowsAndCols[a][o]&&e.w+o<=u){if(e.w>1&&u>o+1){for(var p=0;p<e.w;p++)if(!this.rowsAndCols[a][o+p]){c=!1;break}}if(e.h>1&&i>a+1){for(var m=0;m<e.h&&a+m<this.rowsAndCols.length;m++)if(!this.rowsAndCols[a+m][o]){c=!1;break}}c&&(n.row=a,n.col=o,t=!0)}return Object.getOwnPropertyNames(n).length||(this.initColumns(i),n.row=i,n.col=0),n},fitBlock:function(e,t,n){var i=!0;if(n.x=t,n.y=e,n.w===1&&n.h===1)this.rowsAndCols[e][t]=!1;else if(n.w!==1)for(var a=e,r=n.h+e;a<r;a++)for(var o=t,c=n.w+t;o<c;o++)this.rowsAndCols[a]||this.initColumns(a),this.rowsAndCols[a][o]=!1;else for(var u=e,p=n.h+e;u<p;u++)for(var m=t,v=n.h+t;m<v;m++)this.rowsAndCols[u]||this.initColumns(u),this.rowsAndCols[u][t]=!1;for(var w=0,C=this.rowsAndCols[e].length;w<C;w++)this.rowsAndCols[e][w]&&(i=!1);i&&(this.rowsAndCols[e+1]||this.initColumns(e+1))},setBlocks:function(){var e=this.element.find(".card, .widget, .small-widget").not(".card-list .card");this.blocks=[];for(var t=0,n=e.length;t<n;t++){var i=$(e[t]),a=void 0,r=void 0;if(i.hasClass("auto-height")){var o=this.settings.widgetHeight+this.settings.gutterSize;i.height()>o*a&&(a=Math.ceil(i.height()/o))}else a=i.hasClass("sextuple-height")?6:i.hasClass("quintuple-height")?5:i.hasClass("quad-height")?4:i.hasClass("triple-height")?3:i.hasClass("double-height")?2:1;r=i.hasClass("sextuple-width")?6:i.hasClass("quintuple-width")?5:i.hasClass("quad-width")?4:i.hasClass("triple-width")?3:i.hasClass("double-width")?2:1,this.blocks.push({w:r,h:a,elem:i,text:i.text()})}if(this.columns>1)for(var c=0,u=0,p=0,m=this.blocks.length;c<m;c++)this.blocks[c].w>=this.columns&&c&&p&&p<=this.columns/2&&this.arrayIndexMove(this.blocks,c,u),(p+=this.blocks[c].w)>=this.columns&&(p=0,u=this.blocks[u].w>=this.columns?u+1:c)},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},resize:function(e,t){var n,i=e.element.find("> .content"),a=6*e.settings.widgetWidth+5*e.settings.gutterSize,r=5*e.settings.widgetWidth+4*e.settings.gutterSize,o=4*e.settings.widgetWidth+3*e.settings.gutterSize,c=3*e.settings.widgetWidth+2*e.settings.gutterSize,u=2*e.settings.widgetWidth+e.settings.gutterSize,p=e.settings.widgetWidth,m=a,v=e.element.outerWidth(),w=v>=a,C=v>=r&&v<=a,A=v>=o&&v<=r,S=v>=c&&v<=o,M=v>=u&&v<=c,I=v<=u;this.setColumns(),(w||e.columns===6)&&(n=6,m=a),(C||e.columns===5)&&(n=5,m=r),(A||e.columns===4)&&(n=4,m=o),(S||e.columns===3)&&(n=3,m=c),(M||e.columns===2)&&(n=2,m=u),(I||e.columns===1)&&(n=1,m=p),e.columns=n||this.settings.columns,i.length&&(i[0].style.marginLeft="-".concat(m/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var z=0,V=e.blocks.length;z<V;z++){var U=e.blocks[z];U.elem.removeClass("to-single to-double to-triple to-quad to-quintuple"),U.w>e.columns&&(U.w=e.columns,e.columns===1?U.elem.addClass("to-single"):e.columns===2?U.elem.addClass("to-double"):e.columns===3?U.elem.addClass("to-triple"):e.columns===4?U.elem.addClass("to-quad"):e.columns===5&&U.elem.addClass("to-quintuple"));var G=e.getAvailability(U),J=e.settings.widgetWidth+e.settings.gutterSize,te=J*e.columns,de={left:L.isRTL()?te-(J*U.w+J*G.col):J*G.col,top:(e.settings.widgetHeight+e.settings.gutterSize)*G.row};if(t&&!this.editing){var H=e.settings.easing;H==="blockslide"?(e.applyCubicBezier(U.elem,[.09,.11,.24,.91]),U.elem[0].style.left="".concat(de.left,"px"),U.elem[0].style.top="".concat(de.top,"px")):U.elem.animate(de,e.settings.timeout,H)}else e.applyCubicBezier(U.elem,null),U.elem[0].style.left="".concat(de.left,"px"),U.elem[0].style.top="".concat(de.top,"px");e.fitBlock(G.row,G.col,U)}var he=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),ie=this.element.is(".page-container");if(this.element.css("height",""),!he&&!ie){var me=this.element.find(".card, .widget, .small-widget").not(".card-list .card"),ke=$(me[0]),De=0,Me=!1,Ve=ke.outerHeight();ke[0]&&(Ve+=parseInt(window.getComputedStyle(ke[0]).getPropertyValue("margin-top"),10),Ve+=parseInt(window.getComputedStyle(ke[0]).getPropertyValue("margin-bottom"),10));for(var Ke=0;Ke<this.rowsAndCols.length&&!Me;Ke++){De++;for(var ct=this.rowsAndCols[Ke],qe=0;qe<ct.length&&!Me;qe++)ct[qe]&&(Me=!0,qe===0&&De--)}var je=Ve*De;this.element.css("height","".concat(je,"px"))}e.element.triggerHandler("resize",[e.columns,e.state])},applyCubicBezier:function(e,t){var n=t?"all .3s cubic-bezier(".concat(t,")"):"none";e[0].style.transition=n},refresh:function(e){var t=this;setTimeout(function(){e=e!==void 0?e:t.settings.animate,t.resize(t,e)},0)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,go)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],Od)},handleEvents:function(){var e=this;$("body").on("resize.homepage",function(){e.resize(e,e.settings.animate)}),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",function(){e.resize(e,e.settings.animate)})}},$.fn.homepage=function(e){return this.each(function(){var t=$.data(this,Od);t?t.updated(e):t=$.data(this,Od,new Lc(this,e))})};var bs="link";function Ba(e){this.element=$(e),this.init()}Ba.prototype={init:function(){this.build()},build:function(){var e=this.element.find(".text .title");if(e[0].offsetHeight<e[0].scrollHeight||e[0].offsetWidth<e[0].scrollWidth){var t={title:e.text(),maxWidth:this.element.hasClass("dual")?350:171};e.tooltip(t)}return this}},$.fn.link=function(){return this.each(function(){var e=$.data(this,bs);e||(e=$.data(this,bs,new Ba(this)))})};var Ui="pager",Tp=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),Ap={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],footerContainment:!0,footerContainmentClass:null,pageSelectorInputText:null,showPageSelectorInput:!1,showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",pageSizeSelectorTextNoToken:"RecordsPerPageNoToken",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1},attributes:null,tabbable:!0};function _l(e,t){var n;this.settings=N.mergeSettings(e,t,Ap),this.settings.dataset=t.dataset,this.settings.pagesizes=((n=t.pagesizes)===null||n===void 0||n==null?void 0:n.length)>0?t.pagesizes:this.settings.pagesizes,this.element=$(e),this.init()}_l.prototype={get state(){var e,t,n,i=0,a=1,r=this.settings.indeterminate,o=999999999,c=this.settings.pagesize,u=this.previousOperation,p=this.previousTrigger,m=this.settings.dataset;return isNaN(this.serverDatasetTotal)?m&&m.length&&(i=m.length,this.isFilteredClientside&&(i=m.filter(function(v){return!v._isFilteredOut}).length)):i=this.serverDatasetTotal,this.grandTotal&&(n=this.grandTotal),a=r?o:i<1?1:Math.ceil(i/c),isNaN(this.filteredTotal)||(t=this.filteredTotal,r?a=o:e=t<1?1:Math.ceil(t/c)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:n,pagesize:c,pages:a,trigger:p,total:i,type:u,filteredActivePage:this.filteredActivePage,filteredTotal:t,filteredPages:e}},get pagingInfo(){return Pn("state","pagingInfo"),this.state},get focusableElements(){return N.getArrayFromList(this.pagerBar[0].querySelectorAll(Tp))},get numberButtons(){if(!this.isTable){var e=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return N.getArrayFromList(e)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(this.settings.smallPageSizeSelector===!0||this.isListView&&this.element.parents(".list-detail").length)},init:function(){var e=this;this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),setTimeout(function(){e.triggerPagingEvents(e.settings.activePage)}),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var e=Number(this.element.attr("data-pagesize"));isNaN(e)||(this.settings.pagesize=e),this.element.removeAttr("data-pagesize")}this.settings.pagesizes.indexOf(this.settings.pagesize)===-1&&(this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort(function(n,i){return n-i})),this.handleDeprecatedSettings();var t=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),t.length&&t[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":L.translate("Pagination")}),this},createPagerBar:function(){var e=this;if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),this.pagerBar.length===0&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),this.settings.type==="standalone"?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):this.settings.position==="bottom"?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length&&this.settings.footerContainment&&!this.isTable)){var t=this;["widget","card"].forEach(function(n){var i=t.element.closest(".".concat(n,"-content"));if(i.length){var a=i.next(".".concat(n,"-footer"));a.length||(a=$('<div class="'.concat(n,'-footer"></div>')).insertAfter(i)),e.settings.footerContainmentClass&&a.addClass(e.settings.footerContainmentClass.toString()),t.pagerBar.appendTo(a)}})}},handleDeprecatedSettings:function(){this.settings.attachPageSizeMenuToBody!==void 0&&(Pn("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var e=this;this.pagerBar.on("click.pager",".btn-icon",function(t){var n=t.currentTarget,i=n.parentNode,a=document.querySelector(".datagrid-cell-wrapper .dropdown"),r=document.querySelector(".datagrid-dropdown-list");if(t.preventDefault(),$(this).attr("disabled"))return!1;if(r){var o=a.parentNode.parentNode;r.remove(),o.classList.remove("is-editing")}var c=e.state,u=c.activePage;if(c.filteredTotal&&(u=c.filteredActivePage),ue.hasClass(i,"pager-prev"))return e.setActivePage(u-1,!1,"prev"),e.triggerPagingEvents(u),!1;if(ue.hasClass(i,"pager-next"))return e.setActivePage((u===-1?1:u)+1,!1,"next"),e.triggerPagingEvents(u),!1;if(ue.hasClass(i,"pager-first"))return e.setActivePage(1,!1,"first"),e.triggerPagingEvents(u),!1;if(ue.hasClass(i,"pager-last"))return e.setActivePage(e.pageCount(),!1,"last"),e.triggerPagingEvents(u),!1;var p=Number(n.getAttribute("data-page"));return(isNaN(p)||p<1)&&(p=1),e.setActivePage(p,!1,"page"),e.triggerPagingEvents(u),!1}),e.pagerBar.on("keydown.pager",$(e.focusableElements),function(t){if($(".popupmenu.is-open").length>0||e.settings.tabbable)return!0;var n=(t=t||window.event).which||t.keyCode||t.charCode||!1,i=n===37||n===40,a=n===39||n===38,r=t.target;if(r.nodeName==="INPUT"&&(i=n===40,a=n===38),!i&&!a)return!0;var o=r.nodeName==="INPUT"?r.parentNode.parentNode:r.parentNode,c=o.nextSibling,u=o.previousSibling,p=u===null,m=c===null;if(t.preventDefault(),i&&!p){var v=u.querySelector("button, input");return v.removeAttribute("tabindex"),r.setAttribute("tabindex","-1"),v.focus(),!1}if(i&&p){var w=o.parentNode.lastChild.querySelector("button, input");return w.removeAttribute("tabindex"),r.setAttribute("tabindex","-1"),w.focus(),!1}if(a&&!m){var C=c.querySelector("button, input");return C.removeAttribute("tabindex"),r.setAttribute("tabindex","-1"),C.focus(),!1}if(a&&m){var A=o.parentNode.firstChild.querySelector("button, input");A.removeAttribute("tabindex"),r.setAttribute("tabindex","-1"),A.focus()}return!1})},reset:function(e,t){this.activePage=this.settings.activePage,this.previousOperation=e,this.previousTrigger=t,this.teardown(),this.init()},showPageSizeSelector:function(e){e="".concat(e).toLowerCase()==="true",this.settings.showPageSizeSelector=e,e&&(this.isShowPageSizeSelectorCall=e)},showButton:function(e,t){if(["first","last","next","previous"].indexOf(e)!==-1){var n=".pager-".concat(e," .btn-icon");e==="previous"&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);t="".concat(t).toLowerCase()==="true",this.settings["show".concat(ot.capitalize(e),"Button")]=t,i&&(t?i.parentNode.classList.remove("hidden"):i.parentNode.classList.add("hidden"))}},enableButton:function(e,t){if(["first","last","next","previous"].indexOf(e)!==-1){var n=".pager-".concat(e," .btn-icon");e==="previous"&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);if(t="".concat(t).toLowerCase()==="true",this.settings["enable".concat(ot.capitalize(e),"Button")]=t,i){var a=$(i),r=this.settings["".concat(e,"PageTooltip")];if(t){i.disabled=!1,i.parentNode.classList.remove("is-disabled"),a.removeAttr("disabled aria-disabled");var o=a.data("tooltip");o&&!o.content&&(o.content=r)}else i.disabled=!0,i.parentNode.classList.add("is-disabled"),a.attr({disabled:"disabled","aria-disabled":"true"}),!a.find(".disabled-tooltip").length&&(a.data("tooltip").destroy(),a.append('<div class="disabled-tooltip" title="'.concat(r,'"></div>')),a.find(".disabled-tooltip").tooltip())}}},setActivePage:function(e,t,n){var i=typeof e.searchActivePage=="number"||typeof e.filteredActivePage=="number"||typeof this.filteredActivePage=="number",a=this.filteredActivePage||this.activePage||this.settings.activePage;return at(e)==="object"?a=i?e.filteredActivePage||e.searchActivePage:e.activePage?e.activePage:1:isNaN(e)||(a=e),i?this.filteredActivePage=a:this.activePage=a,this.previousOperation=n,this.render(),a===void 0||a===0||isNaN(a)||a===this.activePage&&!t?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),a)},adjustPageCount:function(e){var t=this.state,n=typeof t.filteredActivePage=="number"||typeof this.filteredActivePage=="number",i=t.pages;return n&&t.filteredPages&&(i=t.filteredPages),(e<1||e>i)&&(e=this.filteredActivePage||this.activePage),e},pageCount:function(e){var t=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,e===void 0&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),e!==void 0||this.settings.source||t?(e!==void 0&&(this._pageCount=e),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},hidePager:function(){this.pagerBar.hide()},showPager:function(){this.pagerBar.show()},renderButtons:function(){var e,t=this.activePage,n=this.state.pages,i="",a=!1,r=!1,o=!1,c=!1,u=!this.settings.enableFirstButton,p=!this.settings.enablePreviousButton,m=!this.settings.enableNextButton,v=!this.settings.enableLastButton,w=this.settings.indeterminate&&this.firstPage===!0,C=this.settings.indeterminate&&this.lastPage===!0,A=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(t=this.state.filteredActivePage,n=this.state.filteredPages),this.pagerBar&&((e=this.pagerBar)===null||e===void 0||e==null||e.children("li").find("> .btn-icon, > .btn-icon[disabled] .disabled-tooltip").each(function(H,he){var ie=$(he);ie.data("tooltip")&&ie.data("tooltip").destroy()})),this.settings.showFirstButton&&((w||!this.settings.indeterminate&&this.settings.type!=="standalone"&&t===1)&&(u=!0),a=!0),this.settings.showPreviousButton&&((w||!this.settings.indeterminate&&this.settings.type!=="standalone"&&t===1)&&(p=!0),r=!0),this.settings.showNextButton&&((C||!this.settings.indeterminate&&this.settings.type!=="standalone"&&t===n)&&(m=!0),o=!0),this.settings.showLastButton&&((C||!this.settings.indeterminate&&this.settings.type!=="standalone"&&t===n)&&(v=!0),c=!0);var S=[],M=this.settings.showPageSizeSelector?190:0,I=(this.pagerBar.width()-M)/40,z=Math.floor(I);if((r||o)&&(z-=1),(c||a)&&(z-=1),!this.isTable&&this.settings.type!=="standalone"&&A&&z>=n&&(u=!0,v=!0),!this.settings.indeterminate){for(var V=Math.floor(z/2),U=t-V,G=t+V;U<1;)++U,G<n&&++G;for(;G>n;)U>1&&--U,--G;for(var J=U;J<G+1;J++)S.push(J)}function te(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",ie=arguments.length>2?arguments[2]:void 0,me=arguments.length>3?arguments[3]:void 0,ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",De=arguments.length>5&&arguments[5]!==void 0&&arguments[5],Me=arguments.length>6&&arguments[6]!==void 0&&arguments[6],Ve=arguments.length>7&&arguments[7]!==void 0&&arguments[7],Ke="",ct="",qe="",je="",lt="";return me&&(lt=' data-page="'.concat(me,'"')),ie&&(je=' title="'.concat(ie,'"')),Ve&&(ke+=" hidden"),De&&(ke+=" selected",Ke=' aria-disabled="true"'),Me&&(ct=" disabled",Ke=' aria-disabled="true"',qe='<div class="disabled-tooltip"'.concat(je,"></div>"),me||(je="")),'<li class="'.concat(ke,`">
        <button type="button" class="btn-icon"`).concat(je).concat(lt).concat(Ke).concat(ct,`>
          `).concat(qe,"<span>").concat(he,`</span>
          `).concat(H,`
        </button>
      </li>`)}if($(this.numberButtons).remove(),a&&(i+=te($.createIcon({icon:"first-page"}),L.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,u,!1)),r&&(i+=te($.createIcon({icon:"previous-page"}),L.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,p,!1)),!this.isTable&&A&&!this.settings.showPageSelectorInput){var de="";S.forEach(function(H){de+=H===(t||1)?te(H,L.translate("PageOn"),null,H,"pager-no",!0,!1,!1):te(H,L.translate("Page"),null,H,"pager-no",!1,!1,!1)}),i+=de}o&&(i+=te($.createIcon({icon:"next-page"}),L.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,m,!1)),c&&(i+=te($.createIcon({icon:"last-page"}),L.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,v,!1)),this.pagerBar[0].innerHTML=i,c||a||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate||this.settings.showPageSelectorInput){var e=this.activePage,t=this.state.pages||1;if(this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.pageSelectorInput)t>1&&this.pagerBar.find(".pager-total-pages").text(t),this.pagerBar.find(".pager-count input").val(e);else{var n=this.settings.pageSelectorInputText||L.translate("PageOf");n=(n=n.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(e,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(t,"</span>")),$('<li class="pager-count"><label>'.concat(n," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var i=null,a="".concat(t).replace(/\d/g,"#"),r=this,o={pattern:a,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(o).on("focus",function(){i=parseInt($(this).val(),10)}).on("blur",function(){c($(this)),i=null}).on("keydown",function(u){return u.which!==13||(c($(this)),u.stopPropagation(),u.preventDefault(),!1)})}function c(u){var p=r.adjustPageCount(parseInt(u.val(),10));if(i!==p){i=p;var m=r.activePage;r.state.filteredPages&&(m=r.state.filteredActivePage),u.val(r.setActivePage(p,!1,"page")),r.triggerPagingEvents(m)}else u.val(i)}},renderPageSizeSelectorButton:function(){var e=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var t=$('<li class="pager-pagesize"></li>'),n=$.createIcon({icon:"dropdown"}),i=L.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),a="",r="<span>".concat(i,"</span>");this.showSmallPageSizeSelector&&(a=' class="audible"',i=L.translate(this.settings.pageSizeSelectorTextNoToken),r='<span class="record-count">'.concat(this.settings.pagesize,`</span>
        <span`).concat(a,">").concat(i,"</span>"));var o=$(`<button type="button" class="btn-menu">
        `.concat(r,`
        `).concat(n,`
      </button>`)).appendTo(t);t.appendTo(this.pagerBar);var c="";this.showSmallPageSizeSelector&&(c='<li class="heading">'.concat(i,"</li>"));for(var u=0;u<this.settings.pagesizes.length;u++){var p=this.settings.pagesizes[u];c+='<li class="'.concat(p===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(p,"</a></li>")}var m=$('<ul class="popupmenu is-selectable">'.concat(c,"</ul>"));o.after(m)}var v=$(this.pageSizeSelectorButton),w=N.extend({},{placementOpts:{parent:v,parentXAlignment:L.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);if(v.popupmenu(w),v.on("selected.pager",function(A,S){e.changePageSize(S)}),this.settings.tabbable){var C=v.data("popupmenu");this.pagerBar.off("keydown.".concat(Ui),".pager-pagesize button").on("keydown.".concat(Ui),".pager-pagesize button",function(A){(A.which||A.keyCode||A.charCode)===40&&C&&!C.isOpen&&(C.open(),A.preventDefault(),A.stopPropagation())})}}},render:function(){var e=this.state,t=e.pages;this.preserveFocus=this.preserveFocus||!1;var n=$(":focus").closest(".pager-pagesize").length>0;!this.preserveFocus&&n&&(this.preserveFocus=!0),e.filteredPages&&(t=e.filteredPages),this.pageCount(t),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar(),this.preserveFocus&&this.element.find(".pager-pagesize button").focus()},renderBar:function(e){var t,n=this,i=(e=e?N.extend({},this.state,e):this.state).activePage;e.filteredActivePage&&(i=e.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),e.firstPage!==void 0&&(e.firstPage===!1&&(this.enableButton("first",!0),this.enableButton("previous",!0)),e.firstPage!==!0&&i!==1||(this.enableButton("first",!1),this.enableButton("previous",!1))),e.lastPage!==void 0&&(e.lastPage===!1&&(this.enableButton("next",!0),this.enableButton("last",!0)),e.lastPage!==!0&&i!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var a=this.pagerBar[0]?this.pagerBar[0].classList:null,r=[".pager-first",".pager-prev",".pager-next",".pager-last",".pager-count"],o=function(){var u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(function(p){u?n.pagerBar.find(p).addClass("hidden"):n.pagerBar.find(p).removeClass("hidden")})};this.settings.hideOnOnePage&&e.total<=e.pagesize?o(r):this.hidePagerBar(e)&&a?a.add("hidden"):this.settings.hideOnOnePage&&a&&a.contains("hidden")&&(a.remove("hidden"),o(r,!1)),this.initTabIndexes(),N.addAttributes(this.pagerBar,this,this.settings.attributes),N.addAttributes(this.pagerBar.find(".pager-first button"),this,this.settings.attributes,"btn-first"),N.addAttributes(this.pagerBar.find(".pager-prev button"),this,this.settings.attributes,"btn-prev"),N.addAttributes(this.pagerBar.find(".pager-next button"),this,this.settings.attributes,"btn-next"),N.addAttributes(this.pagerBar.find(".pager-last button"),this,this.settings.attributes,"btn-last"),N.addAttributes(this.pagerBar.find(".pager-pagesize button"),this,this.settings.attributes,"btn-pagesize"),N.addAttributes(this.pagerBar.find("input"),this,this.settings.attributes,"pagesize-input"),this.pagerBar.find(".pager-pagesize .popupmenu li").each(function(){var u=$(this).find("a"),p=u.text();N.addAttributes(u,n,n.settings.attributes,"pagesize-opt-".concat(p))});var c=(t=this.pagerBar.find(".btn-menu"))===null||t===void 0||(t=t?.data("popupmenu"))===null||t===void 0||t==null?void 0:t.menu;c&&c.find("li").each(function(){var u=$(this).find("a"),p=u.text();N.addAttributes(u,n,n.settings.attributes,"pagesize-opt-".concat(p))})},initTabIndexes:function(){if(!this.settings.tabbable){var e=$(this.focusableElements);e.attr("tabindex","-1"),e.filter(":not([disabled])").first().removeAttr("tabindex")}},triggerPagingEvents:function(e){var t=this.state;e||(e=this.state.activePage),t.type==="first"&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,t),this.element.trigger("firstpage",t)),t.type==="prev"&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,t),this.element.trigger("previouspage",t)),t.type==="next"&&(this.settings.onNextPage&&this.settings.onNextPage(this,t),this.element.trigger("nextpage",t)),t.type==="last"&&(this.settings.onLastPage&&this.settings.onLastPage(this,t),this.element.trigger("lastpage",t)),t.type!=="pageinfo"&&this.element.trigger("page",t)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),Array.isArray(e.pagesizes)&&e.pagesizes.length&&(this.settings.pagesizes=e.pagesizes);var t={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(t),this},changePageSize:function(e){var t=e;t.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),t.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(t.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:e,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:e,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(e,t){if(e){if(e.pagesize&&(this.settings.pagesize=e.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=e.pagesize)),e.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,e.firstPage!==void 0&&(this.firstPage=e.firstPage,this.settings.enableFirstButton=!e.firstPage,this.settings.enablePreviousButton=!e.firstPage),e.lastPage!==void 0&&(this.lastPage=e.lastPage,this.settings.enableNextButton=!e.lastPage,this.settings.enableLastButton=!e.lastPage),isNaN(e.grandTotal)||(this.grandTotal=e.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=e.total),isNaN(e.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=e.filteredTotal,this.filteredActivePage=e.searchActivePage||e.filteredActivePage||1),e.type||(e.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(e,!1,e.type),void(e.type==="initial"||t||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(e){return!(!e||e.firstPage!==!0||e.lastPage!==!0||!e.hideDisabledPagers)},teardown:function(){var e;this.numberButtons&&this.numberButtons.forEach(function(t){var n=t.querySelector(".btn-icon"),i=$(n).data("button"),a=$(n).data("tooltip");i&&i.destroy(),a&&a.destroy()}),this.pagerBar.off(["click.".concat(Ui),"keydown.".concat(Ui)].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat(Ui),"blur.".concat(Ui),"keydown.".concat(Ui)].join(" ")),(e=$(this.pageSelectorInput).data("mask"))===null||e===void 0||e==null||e.destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat(Ui)),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var e=$(this.pageSizeSelectorButton).data("popupmenu");if(e&&e.menu){var t=e.menu;e.destroy(),t.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],Ui)}},$.fn.pager=function(e){return this.each(function(){var t=$.data(this,Ui);t?t.updated(e):t=$.data(this,Ui,new _l(this,e))})};var Pc="listview",Sp={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,allowDeselect:!0,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1,attributes:null,attributesOverride:null};function Rd(e,t){return this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Sp),this.init(),this}Rd.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var e={};this.settings.pagerSettings&&(e=this.settings.pagerSettings),e.dataset=this.settings.dataset,e.source=this.settings.source,e.type="list";for(var t=["pagesize","showPageSizeSelector"],n=0;n<t.length;n++)this.settings[t[n]]===void 0||e[t[n]]||(e[t[n]]=this.settings[t[n]]);return e},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var e=this,t=this,n=this.element.closest(".card, .widget"),i=this.element.attr("data-selectable"),a=this.element.attr("data-select-onfocus");if($(".listview-filter-wrapper").length>0){var r=$(".listview-filter-wrapper"),o=r.siblings(".searchfield-wrapper");o.addClass("no-animate");var c=r.css("width");o.addClass("has-listview-filters"),o.css("width","calc(100% - ".concat(c,")"))}if(this.element.attr("data-pagesize")){var u=Number(this.element.attr("data-pagesize"));isNaN(u)||(this.settings.pagesize=u),this.element.removeAttr("data-pagesize")}if(this.element.hasClass("card-list")&&this.element.find("li .card").selectable(),!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var p=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),p.each(function(C,A){e.settings.dataset.push({text:$(A).text()})}),p.remove()}if(this.settings.dataset&&typeof this.settings.dataset=="string"){var m=window[this.settings.dataset];m&&m.length&&(this.settings.dataset=m)}i&&i.length&&(this.settings.selectable=i),a&&a.length&&(this.settings.selectOnFocus=JSON.parse(a)),t.actionButton=n.find(".btn-actions"),t.actionButton.length>0&&(t.actionButton.data("popupmenu")||t.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),this.settings.attributes&&N.addAttributes(this.element,this,this.settings.attributes,"listview",this.settings.attributesOverride),(this.element.is(".paginated")||this.settings.paging===!0)&&this.element.pager(this.pagerSettings);var v=this.element.parents(".card-content, .widget-content");if(this.element.prev().is(".listview-search")&&v[0]&&v.css({overflow:"visible"}),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete"),this.searchfield.length;var w={filterMode:"contains"};at(this.settings.listFilterSettings)==="object"&&(w=N.extend({},w,this.settings.listFilterSettings)),this.listfilter=new ro(w)}this.settings.emptyMessage&&(t.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(e){var t,n={count:e.length};if(e[0]){for(t in e[0])n[t]=0;for(var i=0;i<e.length;i++)for(t in e[i])n[t]+=parseFloat(e[i][t]);return n}},render:function(e,t){var n=this,i=typeof this.settings.source=="function",a={},r=e,o=0,c=r?r.length:0,u=this.settings.pagesize,p=e.length;if(t&&(u=t.pagesize||u,p=t.filteredTotal||p),!i&&this.pagerAPI&&(this.renderPager(t,!0),t=this.pagerAPI.state),p>u&&(this.filteredDataset?t.filteredPages:t.pages)>1){var m=t.activePage>0?t.activePage-1:0;this.filteredDataset&&(m=t.filteredActivePage-1),o=t.pagesize*m,c=t.pagesize*(m+1),r=e.slice(o,c)}if(at(Xn)==="object"&&r&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):typeof this.settings.template=="string"&&(ot.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(e));var v=Xn.compile(this.settings.template,{dataset:r,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),r.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(v):n.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),ue.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):n.emptyMessageContainer?(this.element.empty(),ue.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):r.length===0&&this.element.html(v||"<ul></ul>")}var w=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||w.find(".card-title, .widget-title").text()||"List"});var C=this.element.find("li, tbody > tr").first(),A=this.element.find("li, tr"),S=this.settings.selectable==="multiple"||this.settings.selectable==="mixed";this.focusItem=C.attr("tabindex",0),this.settings.selectable||C.find("a").length!==1||C.removeAttr("tabindex");var M=A.length>r.length;A.each(function(I){var z=$(this);if(z.attr("role","option"),Be.features.touch&&z.addClass("is-touch"),n.settings.attributes&&N.addAttributes(z,n,n.settings.attributes,"listview-item-".concat(I),n.settings.attributesOverride),S){n.element.addClass("is-multiselect");var V=n.element.prevAll(".toolbar, .contextual-toolbar");V.length&&V.data("toolbar")&&V.data("toolbar").toggleMoreMenu(),n.settings.showCheckboxes&&z.children(".listview-selection-checkbox").length===0&&z.prepend(`<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">
              <input tabindex="-1" type="checkbox" class="checkbox">
              <span class="label-text" role="presentation">
                <span class="audible">`.concat(L.translate("Checkbox")," ").concat(L.translate("NotSelected"),`.</span>
              </span>
            </label>`))}else n.element.removeClass("is-multiselect"),z.find(".listview-selection-checkbox").remove();if(M){var U=o+I;if(U<n.settings.dataset.length){var G=n.settings.dataset[U];z.css("display",G._isFilteredOut===void 0||G._isFilteredOut?"":"none")}}else z.css("display","");z.attr({"aria-posinset":o+I+1,"aria-setsize":p}),z.hasClass("is-disabled")&&z.attr("aria-disabled","true"),n.settings.highlight&&n.searchTerm&&z.highlight(n.searchTerm);var J=z.find(".link-item .hyperlink");J.length>0&&(J[0].offsetHeight<J[0].scrollHeight||J[0].offsetWidth<J[0].scrollWidth)&&J.tooltip({title:J.text()})}),n.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[r]),this.element.off("updated.listview").on("updated.listview",function(I,z){n.updated(z)})},renderPager:function(e,t){this.pagerAPI&&this.pagerAPI.updatePagingInfo(e,t)},getPageableElements:function(){var e=this.element.children();return e.is("ul")&&(e=e.children()),e},refresh:function(e,t){this.loadData(e,t),this.list&&this.render(this.list.data)},loadData:function(e,t,n){var i=!1,a=this;if(e=e||this.settings.dataset,this.filteredDataset&&(e=this.filteredDataset),t||(this.pagerAPI?(e.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:e}),t=this.pagerAPI.state):t={activePage:1}),this.filteredDataset?t.filteredTotal=e.length:t.total=e.length,Array.isArray(e)){var r=this.settings.source;if(typeof e!="string"||e.indexOf("http")!==0&&e.indexOf("/")!==0||(r=e,i=!0),!r&&!i||this.filteredDataset||n)this.render(e,t);else switch(at(r)){case"function":r(t,o);break;case"string":return void(r.indexOf("http")!==0&&r.indexOf("/")!==0||$.getJSON(r,o));default:this.settings.dataset=r,e=r,this.render(r,t)}}function o(c,u){a.settings.dataset=c,e=c;var p=a.pagerAPI?a.pagerAPI.activePage:1;typeof u=="string"&&(u={activePage:p,pagesize:a.settings.pagesize,total:e.length,type:u}),a.pagerAPI&&(a.renderPager(u,!0),u=a.pagerAPI.state),a.render(e,u)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(e){N.clearSelection(),e.sort(function(i,a){return i-a});for(var t=e[0];t<=e[1];t++){var n=$("li, tbody tr",this.element).eq(t);n.is(".is-disabled, .is-selected")||this.select(n)}},deselectItemsBetweenIndexes:function(e){e.sort(function(i,a){return i-a});for(var t=e[0];t<=e[1];t++){var n=$("li, tbody tr",this.element).eq(t);!n.is(".is-disabled")&&n.is(".is-selected")&&this.select(n)}},handleResize:function(){var e=$("li .listview-heading, tr .listview-heading",this.element),t=e.eq(1),n=t.width();t.length&&n&&(e[0].style.width="".concat(n,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(e,t){this.filter(t)},filter:function(e){if(e){var t=(e=$(e)).val().trim(),n={searchActivePage:1};if(t){if(t.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==t){this.searchTerm=t,this.element.unhighlight(),this.settings.dataset.forEach(function(a){a._isFilteredOut=!1});var i=this.listfilter.filter(this.settings.dataset,this.searchTerm,!0);i.length||(i=[]),n.filteredTotal=i.length,n.searchActivePage=1,i.forEach(function(a){a._isFilteredOut=!0}),this.filteredDataset=i,this.loadData(null,n),this.element.trigger("filtered",{elem:this.element,filteredResults:i,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach(function(t){delete t._isFilteredOut}),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e={activePage:1,filteredTotal:void 0,searchActivePage:void 0};this.refresh(null,e)},focus:function(e){e.is(":hidden")||e.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=e.attr("tabindex",0).focus(),this.settings.selectable||e.find("a").length!==1||(e.find("a").focus(),e.removeAttr("tabindex")),this.settings.selectOnFocus&&this.settings.selectable!=="multiple"&&this.settings.selectable!=="mixed"&&this.select(e))},remove:function(e){typeof e=="number"&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e,!0),e.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,n){e.remove(n)})},clearAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,n){e.select(n)})},sortInit:function(e,t,n){n&&$.trim(n)!==""&&$("[".concat(n,"]")).each(function(){var i=$(this),a=$.fn.parseOptions(i,n);i.on(t,function(r){$(a.list).data(e).setSortColumn(a),r.preventDefault()})})},setSortColumn:function(e){var t=e.orderBy||this.list.sort.field,n=e.order;if(this.list.data||t){n=n?n==="desc":!(this.list.sort&&this.list.sort[t]&&this.list.sort[t].reverse),(e.reloadApi||e.reloadApiNoSort)&&this.loadData(),e.reloadApiNoSort&&(t=this.list.sort.field,n=this.list.sort[t].reverse);var i=this.sortFunction(t,n);this.list.data.sort(i),this.render(this.list.data),this.list.sort={field:t},this.list.sort[t]={reverse:n},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(e,t,n){n||(n=function(a){return typeof(a=a??"")=="string"&&(a=a.toUpperCase(),isNaN(parseFloat(a))||(a=parseFloat(a))),a});var i=n?function(a){return n(a[e])}:function(a){return a[e]};return t=t?-1:1,function(a,r){return a=i(a),r=i(r),t*((a>r)-(r>a))}},deselect:function(e){this.settings.allowDeselect&&(typeof e=="number"&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e))},unselect:function(e){return Qs(this.deselect,this.unselect).apply(this,[e])},select:function(e,t){var n,i=this,a=i.settings.selectable==="mixed";if(i.selectedItems=[],typeof e=="number"&&(e=$(this.element.children()[0]).children().eq(e)),(!(n=e.hasClass("is-selected"))||this.settings.allowDeselect)&&(e.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),e.attr("tabindex",0)),this.settings.selectable!==!1&&this.settings.selectable!=="false")){if(this.settings.selectable!=="multiple"&&this.settings.selectable!=="mixed"){var r=e.parent().children(),o=e.parent().find(".is-selected");this.element.hasClass("card-list")&&(r=r.not(".card"),o=o.not(".card")),r.removeAttr("aria-selected"),o.removeClass("is-selected"),i.selectedItems[0]=$(this)}if(n?(i.selectedItems=[],e.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(e.addClass("is-selected".concat(a?" hide-selected-color":"")),i.lastSelectedItem=e.index()),e.parent().find(".is-selected").each(function(z){i.selectedItems[z]=$(this)}),e.find(".listview-selection-checkbox input").prop("checked",!n),this.settings.selectable==="multiple"||this.settings.selectable==="mixed"){var c=n?"NotSelected":"Selected";e.attr("aria-selected",!n),e.find(".label-text .audible").text("".concat(L.translate("Checkbox")," ").concat(c,"."))}if(!t){for(var u=n?"unselected":"selected",p=[],m=0;m<this.selectedItems.length;m++){var v=this.selectedItems[m][0].getAttribute("aria-posinset");p.push(this.settings.dataset[v-1])}this.element.triggerHandler(u,{selectedItems:this.selectedItems,elem:e,selectedData:p}),u==="unselected"&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:e,selectedData:p})}var w=this.element.closest(".card, .widget");w.length||(w=this.element.parent());var C=w.find(".listview-toolbar, .contextual-toolbar"),A=C.data("toolbar");if(i.selectedItems.length>0){if(A&&A.toggleMoreMenu(),C.one("animateopencomplete",function(){i.element.addClass("is-toolbar-open"),C.trigger("recalculate-buttons").removeClass("is-hidden")}),C[0]){var S=C[0].classList.contains("contextual-toolbar");C[0].style.display=S?"block":""}C.animateOpen({distance:40});var M=C.find(".title, .selection-count");M&&M.length||(M=$(C.hasClass("contextual-toolbar")?'<div class="toolbar-section title selection-count"></div>':'<div class="title selection-count"></div>'),C.prepend(M));var I="(".concat(L.translate(i.selectedItems.length===1?"RecordSelected":"RecordsSelected"),")");I=I.replace("{0}",i.selectedItems.length),M.text(I)}else C.addClass("is-hidden").one("animateclosedcomplete",function(z){z.stopPropagation(),this.style.display="none",i.element.removeClass("is-toolbar-open")}).animateClosed()}},toggleItemActivation:function(e){e.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(e):this.activateItem(e)},activateItem:function(e){var t=typeof e=="number"?e:e.index(),n=this.element.find("li.is-activated");typeof e=="number"&&(e=this.element.find("ul").children().eq(e)),this.deactivateItem(n),this.element.triggerHandler("beforeactivate",[{index:t,elem:e,data:this.settings.dataset[t]}])!==!1&&(e.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:t,elem:e,data:this.settings.dataset[t]}]))},activatedItem:function(){var e=this.element.find("li.is-activated"),t=e.index();return{index:t,elem:e,data:this.settings.dataset[t]}},deactivateItem:function(e){typeof e=="number"&&(e=this.element.find("ul").children().eq(e)),e===void 0&&(e=this.element.find("li.is-activated")),e.removeClass("is-activated");var t=e.index();t<0||this.element.triggerHandler("itemdeactivated",[{index:t,elem:e,data:this.settings.dataset[t]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e=this.searchfield.data("searchfield");e&&e.xButton&&e.xButton.trigger("click")}},updated:function(e){return(e==null||e==null?void 0:e.selectable)!==this.settings.selectable&&$(this.element.children()[0]).find("li").removeClass("is-selected is-activated"),e&&(this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset)),this.updateSearch(),this.refresh(e&&e.dataset?e.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview longpress.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData(Pc)},handleEvents:function(){var e=this,t=!1,n=!1,i=e.settings.selectable==="multiple"||e.settings.selectable==="mixed";if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",function(r){var o=$(this);if(!(r.originalEvent&&r.originalEvent.target&&$(r.originalEvent.target).is(".icon-favorite"))){if(o.is(":first-child")&&o.hasClass("is-disabled")){var c=$.Event("keydown.listview");c.keyCode=40,t=!0,o.trigger(c)}t||o.hasClass("is-disabled")||!e.settings.selectOnFocus||e.settings.selectable==="multiple"||e.settings.selectable==="mixed"||(e.select(o),t=!0,n=!0)}}),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",function(r){var o=$(this),c=o.is("a")?o.closest("li"):$(this),u=c.is("a")?c.closest("ul"):c.parent(),p=r.keyCode||r.charCode||0,m=r.metaKey;if(c.index()===0&&r.keyCode===38)return!1;if((p===40||p===38)&&!m){var v=r.keyCode===40?c.nextAll(":not(.is-disabled):visible:first"):c.prevAll(":not(.is-disabled):visible:first");v.length&&($(r.target).is(c)||r.shiftKey||o.is("a"))&&e.focus(v),r.preventDefault(),r.stopPropagation()}if(p===35||p===40&&m){var w=u.children().last();return e.focus(w),r.stopPropagation(),!1}if(p===36||p===38&&m){var C=u.children().first();return e.focus(C),r.stopPropagation(),!1}return p===32&&$(r.target).is(c)&&(i&&r.shiftKey?e.selectItemsBetweenIndexes([e.lastSelectedItem,c.index()]):e.select(c),r.preventDefault()),i&&(r.ctrlKey||r.metaKey)&&p===65&&(e.toggleAll(),e.focus(c),r.preventDefault()),!0}),this.settings.selectable){this.element.addClass("is-selectable");var a=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",function(r){var o=$(this),c=$(r.target).closest(".listview-selection-checkbox").length>0,u=e.settings.selectable==="mixed",p=$(r.target);p.hasClass("icon-favorite")||p.hasClass("hyperlink")||(!o.hasClass("is-selected")&&n&&(n=!1),n||o.hasClass("is-disabled")||u&&!c||(t=!0,i&&r.shiftKey?(e.selectItemsBetweenIndexes([e.lastSelectedItem,o.index()]),r.preventDefault()):e.select(o),o.focus()),o.hasClass("is-disabled")||!u||c||(o.focus(),e.toggleItemActivation(o)),a.length>0&&$(window).outerWidth()<767&&!o.hasClass("is-disabled")&&!c&&e.element.trigger("drilldown",[o]),n=!1,r.preventDefault(),r.stopPropagation(),e.element.trigger("click",[{elem:o,data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:r}]))}),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",function(r){var o=$(this);return r.preventDefault(),r.stopPropagation(),e.element.trigger("dblclick",[{elem:$(this),data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:r}]),!1}),this.element.off("contextmenu.listview longpress.listview","li, tr").on("contextmenu.listview longpress.listview","li, tr",function(r){var o=$(this);return r.preventDefault(),r.stopPropagation(),e.element.trigger("contextmenu",[{elem:$(this),data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:r}]),!1})}this.settings.hoverable&&this.settings.hoverable!=="false"||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&this.settings.selectable!=="false"||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable!=="multiple"&&this.settings.selectable!=="mixed"||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",function(r){$(this).parent().trigger("click"),r.stopPropagation()}),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",function(r){e.handleSearch(r,$(this))}).off("cleared.searchable-listview").on("cleared.searchable-listview",function(){e.resetSearch(),e.element.trigger("filtered",{elem:e.element,filteredResults:[],term:""})}),this.pagerAPI&&this.element.off("page.listview").on("page.listview",function(r,o){e.handlePageChange(o)}).off("pagesizechange.listview").on("pagesizechange.listview",function(r,o){e.handlePageSizeChange(o)}),$("body").off("resize.listview").on("resize.listview",function(r){e.handleResize(r)}),e.element.prev(".listview-header").off("click.listview").on("click.listview",function(){var r=$(this).find(".plus-minus");r.hasClass("active")?(r.removeClass("active"),e.element.animateClosed()):(r.addClass("active"),e.element.animateOpen())})},handlePageSizeChange:function(e){e.activePage=1,this.loadData(void 0,e)},handlePageChange:function(e){this.loadData(void 0,e)}},$.fn.listview=function(e){var t=$(this),n=t.attr("data-dataset"),i=t.attr("data-tmpl"),a=N.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var r=N.extend({},e,a);return this.each(function(){var o=$.data(this,Pc);o?o.updated(r):o=$.data(this,Pc,new Rd(this,r))})};var Nd="listbuilder",Ku={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",attributes:null,template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function _d(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Ku),t&&t.dataset&&(this.settings.dataset=t.dataset),this.init()}_d.prototype={init:function(){var e=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout(function(){e.setSelected()},0)},loadListview:function(){var e,t=this.settings,n=$(".listview",this.element);return t.attributes&&(e=this.getLvAutomationAttributes("-listbuilder")),!t.dataset.length&&n.length&&$("li",n).length?this.listApi=n.listview({selectable:"single",attributes:e}).data("listview"):n.length&&(this.listApi=n.listview({dataset:t.dataset,template:t.template,selectable:"single",attributes:e}).data("listview")),this},getLvAutomationAttributes:function(e){var t,n=this,i=this.settings;if(i.attributes&&typeof e=="string"&&e!=="")if(Array.isArray(i.attributes))t=[],i.attributes.forEach(function(r){var o=typeof r.value=="function"?r.value(n):r.value;t.push({name:r.name,value:o+e})});else{var a=typeof i.attributes.value=="function"?i.attributes.value(this):i.attributes.value;t={name:i.attributes.name,value:a+e}}return t},updateLvAutomationAttributes:function(e){if(this.settings.attributes&&e){for(var t,n=this.dataset.length-1,i=!0,a=1e3;i&&a>0;){var r="-listbuilder-listview-item-".concat(n);t=this.getLvAutomationAttributes(r),i=this.findAutomationAttributesItem(t),n++,a--}N.addAttributes(e,this,t)}},findAutomationAttributesItem:function(e){var t=!1;if(this.settings.attributes&&e&&Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var a=e[n];if(this.listApi.element.find("[".concat(a.name,'="').concat(a.value,'"]')).length){t=!0;break}}return t},initDataset:function(){var e=this.settings,t=$(".listview li",this.element);this.dataset=[];for(var n=0,i=t.length;n<i;n++){var a=void 0,r=$(t[n]);e.dataset?(a=JSON.parse(JSON.stringify(e.dataset[n]))).node=r:a=this.extractNodeData(r),this.dataset.push(a)}return this},extractNodeData:function(e){var t={node:e,text:$.trim($(".item-content",e).text())},n=e.attr("data-value");return n!==void 0&&(t.value=n),t},setElements:function(){var e=this,t=this.settings,n=function(a){return e.isjQuery(a)?a:typeof a=="string"?$('[data-action="'.concat(a,'"]'),e.element):null};t.btnAdd=n(t.btnAdd),t.btnGoUp=n(t.btnGoUp),t.btnGoDown=n(t.btnGoDown),t.btnEdit=n(t.btnEdit),t.btnDelete=n(t.btnDelete);var i="listbuilder-btn";return N.addAttributes(t.btnAdd,this,t.attributes,"".concat(i,"-add")),N.addAttributes(t.btnGoUp,this,t.attributes,"".concat(i,"-goup")),N.addAttributes(t.btnGoDown,this,t.attributes,"".concat(i,"-godown")),N.addAttributes(t.btnEdit,this,t.attributes,"".concat(i,"-edit")),N.addAttributes(t.btnDelete,this,t.attributes,"".concat(i,"-delete")),this.topButtons=t.btnAdd.add(t.btnGoUp).add(t.btnGoDown).add(t.btnEdit).add(t.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:t.handle,placeholder:t.templateNewItem}).data("arrange"),this},handleEvents:function(){var e,t=this,n=this,i=n.settings,a=function(r,o){r.off("click.listbuilder").on("click.listbuilder",function(){n[o]()})};return a(i.btnAdd,"addItem"),a(i.btnGoUp,"moveItemUp"),a(i.btnGoDown,"moveItemDown"),a(i.btnEdit,"editItem"),a(i.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",function(r,o){var c=t.getDataByNode(o.start),u=i.templateItemContent.replace(/{{text}}/g,c.data.text);t.arrangeApi.placeholders.attr("data-value",c.data.text).find(".item-content").html(u)}).on("arrangeupdate.listbuilder",function(r,o){t.updateAttributes(),t.arrayIndexMove(t.dataset,o.startIndex,o.endIndex),(e=t.getDataByNode(o.end)).indexBeforeMove=o.startIndex,t.element.triggerHandler("arrangeupdate",[e])}),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",function(){var r=$(this);r.is(".is-selected")||r.trigger("click")}),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",function(r,o){e=t.getDataByNode(o.elem[0]),t.element.triggerHandler("selected",[e])}),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,function(r,o){t.element.triggerHandler("updated",[o])}),this},addItem:function(){var e=this,t=this.settings;$.when(this.element.triggerHandler("beforeadd")).done(function(){var n,i,a=0,r=e.listApi.selectedItems[0],o=t.templateNewItem.replace(/{{text}}/g,L.translate("NewItem"));r&&r.length>0?(a=(i=e.getDataByNode(r)).index+1,$(o).insertAfter(r),n=$("li",e.ul).eq(a)):(e.ul.prepend(o),n=$("li:first-child",e.ul)),e.dataset.push(e.extractNodeData(n)),e.arrayIndexMove(e.dataset,e.dataset.length-1,a),e.updateAttributes(),e.updateLvAutomationAttributes(n),n.trigger("click"),e.arrangeApi.updated(),e.editItem(!0),i={index:a,data:e.dataset[a]},e.element.triggerHandler("afteradd",[i])})},moveItemUp:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);n.index!==void 0&&n.index>0&&$.when(e.element.triggerHandler("beforegoup",[n])).done(function(){var i=t.prev();t.insertBefore(i),e.updateAttributes(),e.arrayIndexMove(e.dataset,n.index,n.index-1),n.indexBeforeMove=n.index,n.index--,e.element.triggerHandler("aftergoup",[n])})}},moveItemDown:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);n.index!==void 0&&n.index<e.dataset.length-1&&$.when(e.element.triggerHandler("beforegodown",[n])).done(function(){var i=t.next();t.insertAfter(i),e.updateAttributes(),e.arrayIndexMove(e.dataset,n.index,n.index+1),n.indexBeforeMove=n.index,n.index++,e.element.triggerHandler("aftergodown",[n])})}},editItem:function(e){var t=this.listApi.selectedItems[0];t&&t.length>0&&(t.is(".is-editing")?this.commitEdit(t,e):this.makeEditable(t,e))},makeEditable:function(e,t){var n=this,i=n.getDataByNode(e),a=$(".item-content",e);i.index!==void 0&&i.index<n.dataset.length&&$.when(n.element.triggerHandler("beforeedit",[i])).done(function(){var r=_e.escapeHTML((a.text().trim()||"").toString()),o=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(r,'" />'));e.addClass("is-editing"),a.html(o),setTimeout(function(){o.focus().select()},0),o.on("click.listbuilder",function(){return!1}).on("blur.listbuilder",function(){return n.commitEdit(e,t)}).on("keypress.listbuilder",function(c){(c.keyCode||c.charCode||0)===13&&(n.commitEdit(e,t),e.focus())}),n.element.triggerHandler("entereditmode",[i])})},commitEdit:function(e,t){var n=this.settings,i=this.getDataByNode(e),a=$(".item-content",e),r=$(".edit-input",a);r.val(_e.escapeHTML((r.val()||"").toString())),t&&(i.data.value=r.val()),i.data.text=r.val(),r.off("click.listbuilder blur.listbuilder keypress.listbuilder"),a.html(n.templateItemContent.replace(/{{text}}/g,r.val())),e.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[i])},deleteItem:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);n.index!==void 0&&$.when(e.element.triggerHandler("beforedelete",[n])).done(function(){e.listApi.removeAllSelected(),e.updateAttributes(),e.dataset.splice(n.index,1),e.element.triggerHandler("afterdelete",[n])})}},getDataByNode:function(e){for(var t={},n=0,i=this.dataset.length;n<i;n++){var a=this.dataset[n];if($(a.node).is(e)){t={index:n,data:a};break}}return t},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},moveCursorToEnd:function(e){setTimeout(function(){if(typeof e.selectionStart=="number")e.selectionEnd=e.value.length,e.selectionStart=e.value.length;else if(e.createTextRange!==void 0){var t=e.createTextRange();t.collapse(!1),t.select()}},100)},updateAttributes:function(){for(var e=$("li",this.ul),t=0,n=e.length;t<n;t++)$(e[t]).attr({"aria-posinset":t+1,"aria-setsize":n})},updateDataset:function(e){var t=this,n=$("li",this.ul),i=$(".listview",this.element).data("listview");i.deselectItemsBetweenIndexes([0,n.length-1]),this.settings.dataset=e,i.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout(function(){t.setSelected()},0)},setSelected:function(){for(var e=$("li[selected]",this.ul),t=0,n=e.length;t<n;t++){var i=$(e[t]);i.removeAttr("selected"),i.is(".is-selected")||i.trigger("click")}return this},select:function(e){var t=this.getListItem(e);t&&!t.is(".is-selected")&&t.trigger("click")},unselect:function(e){var t=this.getListItem(e);t&&t.is(".is-selected")&&t.trigger("click")},getListItem:function(e){var t=$();if(this.isElement(e)&&$.contains(this.ul,e))t=this.isjQuery(e)?e:$(e);else{var n=parseInt(e,10),i=$("li",this.ul);!isNaN(n)&&n>-1&&n<i.length?t=i.eq(n):"".concat(e).toLowerCase()==="first"?t=i.first():"".concat(e).toLowerCase()==="last"&&(t=i.last())}return t.length<1?null:t.length>1?t.eq(0):t},isElement:function(e){return this.isjQuery(e)&&e.get(0)instanceof Element||e instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var e=0,t=this.topButtons.length;e<t;e++){var n=$(this.topButtons[e]).data("tooltip");n&&typeof n.destroy=="function"&&n.destroy()}return this.listApi&&typeof this.listApi.destroy=="function"&&this.listApi.destroy(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Ku)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Nd)}},$.fn.listbuilder=function(e){return this.each(function(){var t=$.data(this,Nd);t?t.updated(e):t=$.data(this,Nd,new _d(this,e))})};var Pr="modal",Ep=["click","immediate"],Xu=[!1,"responsive","always"],Bc={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:0,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,closeBtnOptions:{attributes:[],closeBtnTooltip:"Close"},maxWidth:null,fullsize:Xu[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null,hideUnderneath:!1,suppressEnterKey:!1,draggable:!1,draggableOffset:{left:0,top:0},icon:null,iconClass:null};function Qu(e){return e.trigger&&Ep.indexOf(e.trigger)===-1&&(e.trigger=Bc.trigger),e.fullsize&&Xu.indexOf(e.fullsize)===-1&&(e.fullsize=Bc.fullsize),e.breakpoint&&Yt.available.indexOf(e.breakpoint)===-1&&(e.breakpoint=Bc.breakpoint),e}function zd(e,t){this.settings=N.mergeSettings(e,t,Bc),this.settings=Qu(this.settings),this.originalElement=$(e),this.element=$(e),this.init(),this.reStructure()}zd.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var e;return this.trigger&&this.trigger.length?e=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(e=this.mainContent.data("contextualactionpanel")),e},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(e){this.element[0].classList[e===!0?"add":"remove"]("is-visible")},set active(e){this.element[0].classList[e===!0?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var e=0,t=this.element;return $(".modal.is-visible").each(function(){e<this.style.zIndex&&(e=this.style.zIndex)}),e===t[0].style.zIndex},get currentlyNeedsFullsize(){return this.settings.fullsize==="always"||this.settings.fullsize==="responsive"&&Yt.isBelow(this.settings.breakpoint)||this.settings.fullsize==="responsive"&&this.isAndroid()&&this.settings.breakpoint==="phone-to-tablet"},get closeBtn(){var e=this.capAPI;return e&&e.element instanceof $?e.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var e=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat(Pr,"-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,this.settings.trigger!=="click"||this.isAttachedToBody||this.trigger.on("click.".concat(e.namespace),function(i){$(i.currentTarget).is(e.trigger)&&e.open()}),this.settings.trigger==="immediate"){var t=new Gt({duration:1,timeoutCallback:function(){e.open()}});Hn.register(t)}if(e.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var n=new Gt({duration:1,timeoutCallback:function(){e.open()}});Hn.register(n)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element[0].classList[this.settings.hideUnderneath?"add":"remove"]("hide-underneath"),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},createDraggable:function(){if(this.settings.draggable){var e=this,t=Be.features.touch,n=this.element,i=this.element.parent(),a=n.find(".modal-header"),r=n.find(".modal-content"),o=r.height()+parseInt(r.css("margin-top").slice(0,-2),10)+parseInt(r.css("margin-bottom").slice(0,-2),10),c=window.innerHeight/2-o/2,u={position:"fixed",top:"".concat(c,"px"),height:"".concat(o,"px")};n.css(u),n.addClass("is-draggable"),a.off("mousedown.modal touchstart.modal").on("mousedown.modal touchstart.modal",function(p){t||p.preventDefault(),n.drag({containment:"partial",containmentOffset:e.settings.draggableOffset}).off("dragstart.modal").on("dragstart.modal",function(){p.stopImmediatePropagation(),n.attr("aria-grabbed","true"),i.attr("aria-dropeffect","move")}).off("dragend.modal").on("dragend.modal",function(){n.removeAttr("aria-grabbed"),i.removeAttr("aria-dropeffect");var m=n.data("drag");m&&typeof m.destroy=="function"&&m.destroy()})})}},appendContent:function(){var e=this,t=!1,n=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"",i=$(this.settings.content).hasClass("splitter-container");if(this.element=$(`
      <div class="modal">
        <div class="modal-content"`.concat(n,`>
          <div class="modal-header `).concat(i?"splitter-header":"",`"><h1 class="modal-title"></h1></div>
          <div class="modal-body-wrapper `).concat(i?"splitter-wrapper":"",`">
            <div class="modal-body`).concat(this.settings.forceOverflow?" overflow":"",`"></div>
          </div>
        </div>
      </div>
    `)),this.settings.showCloseBtn&&!this.isCAP){var a=$(`
        <button type="button" class="btn-icon btn-close" title="`.concat(L.translate(this.settings.closeBtnOptions.closeBtnTooltip,{showAsUndefined:!1,showBrackets:!1}),`" aria-hidden="true">
          `).concat($.createIcon("close"),`
          <span class="audible">`).concat(L.translate("Close"),`</span>
        </button>
      `));$(window).width()>=400&&this.element.addClass("has-close-btn"),this.element.find(".modal-content").append(a),a.on("click.".concat(this.namespace),function(){e.close()}).tooltip(),this.settings.closeBtnOptions.attributes&&N.addAttributes(a,this,this.settings.closeBtnOptions.attributes,"",!0)}if(this.settings.id&&(this.element.attr("id",this.settings.id),N.addAttributes(this.element,this,this.settings.attributes,"",!0)),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),t=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(t=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),t||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=_e.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),t||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),this.settings.icon){var r=this.settings.iconClass?" icon-".concat(this.settings.iconClass):"",o=$('<svg class="icon'.concat(r,`"
        focusable="false" aria-hidden="true" role="presentation">
        <use href="#icon-`).concat(this.settings.icon,`"></use>
      </svg>`));this.element.find(".modal-title svg.icon").length>0||this.element.find(".modal-title").prepend(o)}N.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),ca.register(this)},reStructure:function(){var e=$(".modal-body",this.element),t=$("hr:first-child",e),n=$(".modal-buttonset",this.element);e&&e.length&&!e.parent().hasClass("modal-body-wrapper")&&e.wrap('<div class="modal-body-wrapper"></div>'),t&&t.length&&!t.parent().hasClass("modal-content")&&t.insertAfter(this.element.find(".modal-header")),n&&n.length&&!n.parent().hasClass("modal-content")&&n.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var e=this.element,t=e.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),n=e.find("select.dropdown[data-validate]"),i=e.find("[data-validate]:visible");if(n.each(function(){$(this).next(".dropdown-wrapper").is(":visible")&&(i=i.add(this))}),i.length>0){t.removeAttr("disabled");var a=!0;i.each(function(){var r=$(this);if(!(r.closest(".datagrid-filter-wrapper").length>0)){var o=r.is(".dropdown")&&r.next(".dropdown-wrapper").is(":visible")||r[0].offsetParent!==null;r.is(".required")?o&&!r.val()&&(a=!1):(r.validateField(),o&&!r.isValid()&&(a=!1)),o&&r.is(".error")&&(a=!1),a&&t.removeAttr("disabled")}}),a||t.is(":disabled")||t.attr("disabled","true")}},renderButtonset:function(){var e=this,t=this.settings.buttons,n={style:"modal"},i=this;if(!this.buttonsetElem){var a=this.element.find(".modal-buttonset");if(a&&a.length)n.detectHTMLButtons=!0;else{if(!Array.isArray(t)||!t.length)return;var r=this.element.find(".modal-body").parent(),o=this.settings.useFlexToolbar?"toolbar-section ":"",c='<div class="'.concat(o,'modal-buttonset"></div>');(a=$(c)).insertAfter(r),n.buttons=t}this.buttonsetElem=a,a.buttonset(n),this.buttonsetAPI=a.data("buttonset"),t=this.buttonsetAPI.toData().buttons}var u=this.buttonsetAPI.buttons,p=$(),m=100/u.length;u.forEach(function(v,w){var C=Array.isArray(t)&&t.length?t[w]:void 0,A=!1;if(C)if(v.element[0].setAttribute("id",t[w].id||N.uniqueId(v.element,"button","modal")),t[w].tabindex&&v.element[0].setAttribute("tabindex",t[w].tabindex),$(v.element).on("click.".concat(i.namespace),function(M){var I=C.click;I&&(I.apply(i.element[0],[M,i]),A=!0)}),$(v.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(i.namespace),function(M){A||($(M.target).is(".btn-cancel")&&(i.isCancelled=!0),e.openSubComponents.length===0&&i.close())}),C.validate&&v.element[0].classList.add("no-validation"),C.attributes)N.addAttributes(v.element,e,C.attributes,"",e);else if(v.element.is("[class*=primary]"))N.addAttributes(v.element,e,i.settings.attributes,"primary",!0);else if(v.element.is("[class*=cancel]")||v.element.text()===L.translate("Cancel"))N.addAttributes(v.element,e,i.settings.attributes,"cancel",!0);else{var S;N.addAttributes(v.element,e,i.settings.attributes,(S=v.element)===null||S===void 0||S==null?void 0:S.prop("id"),!0)}v.element[0].style.width="".concat(m,"%"),p.add(v)})},addButtons:function(e){var t,n=this,i=this,a=this.element.find(".modal-body").parent(),r=this.element.find(".flex-toolbar"),o=100,c=!1;if(this.modalButtons=e,!e){var u=this.element.find(".modal-buttonset button");o=100/u.length;for(var p=0,m=u.length;p<m;p++)u[p].style.width="".concat(o,"%");return u.button(),void u.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(i.namespace),function(C){$(C.target).is(".btn-cancel")&&(i.isCancelled=!0),n.openSubComponents.length===0&&i.close()})}this.isCAP?(c=!0,t=this.element.find(".buttonset")):(t=this.element.find(".modal-buttonset")).length||(t=$('<div class="modal-buttonset"></div>').insertAfter(a)),o=100/e.length,e&&t.empty();for(var v=function(C,A){var S=this,M=$(`<button type="button">
        <span></span>
      </button>`),I=M.find("span");I.text(C.text),M.attr("type",C.type||"button"),C.cssClass==="separator"&&(M=$('<div class="separator"></div>')),C.cssClass?M.attr("class",C.cssClass):C.isDefault?M.addClass("btn-modal-primary"):M.addClass("btn-modal"),C.disabled&&(M[0].disabled=C.disabled===!0),C.audible&&I.addClass("audible"),C.validate===void 0||C.validate||M.addClass("no-validation"),N.addAttributes(M,i,C.attributes,"",!0);for(var z={},V=["id","name","text","tabindex"],U=0;U<V.length;U++)C[V[U]]&&(z[V[U]]=C[V[U]]);if(C.type==="input"){var G=$('<label class="audible" for="filter">'.concat(C.text,"</label>")),J=$('<input class="searchfield">').attr(z);return r.length?r.find(".toolbar-section.search").append(G,J):t.append(G,J),void J.searchfield(C.searchfieldSettings)}C.icon&&C.icon.charAt(0)==="#"&&$.createIconElement({classes:[C.icon==="#icon-close"?"icon-close":""],icon:C.icon.substr(6)}).prependTo(M),M[0].setAttribute("id",C.id||N.uniqueId(i.element,"button","modal"));var te=e[A].click;M.on("click.".concat(i.namespace),function(de){te?te.apply(i.element[0],[de,i]):S.openSubComponents.length===0&&i.close()}),c||(M[0].style.width="".concat(o,"%")),M.button(),(i.settings.useFlexToolbar||i.settings.centerTitle)&&C.align?(C.align==="left"&&r.find(".toolbar-section").eq(0).append(M),C.align==="center"&&r.find(".toolbar-section").eq(1).find("h2").append(M),C.align==="right"&&r.find(".toolbar-section").eq(2).append(M)):t.append(M)},w=0;w<e.length;w++)v(e[w],w)},isAndroid:function(){return(Be&&Be.os&&Be.os.name?Be.os.name:"")==="android"},sizeInner:function(){var e=this.element.find(".detailed-message"),t=$(window).height()-e.offset().top-150;e[0].style.maxHeight="".concat(t,"px"),e[0].style.overflow="auto",e[0].style.width="".concat(e.width(),"px")},callSource:function(){if(typeof this.settings.beforeShow=="function"){var e=this;this.settings.beforeShow(function(t){return t!==!1&&($("#modal-busyindicator").trigger("complete.busyindicator"),t===!0?(e.busyIndicator&&(e.busyIndicator.remove(),delete e.busyIndicator),!0):(t instanceof jQuery||(t=$(t)),e.open(!0),e.element.find(".modal-body").empty(),e.element.find(".modal-body").append(t),t.show(),!0))},{})}},open:function(e){var t,n=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&this.trigger.length!==0&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(ca.overlayElem)),this.root||(this.root=$(ca.rootElem));var i=this.element.parent();if(i.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),i=this.element.parent()),i.parent().is(this.root)||i.insertAfter(this.overlay),this.element.find(".detailed-message").length===1&&($("body").on("resize.".concat(this.namespace),function(){n.sizeInner()}),this.sizeInner()),t=this.element.triggerHandler("beforeopen",[this]),this.settings.isAlert||$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,t!==!1&&(e||(this.callSource(),!this.settings.beforeShow))){var a=$(".resize-app-menu-container");if(a.length>0&&a.append(this.root),ca.currentlyActive=this,this.settings.isAlert){var r=this.element.find("#message-title");N.addAttributes(r,this,this.settings.attributes,"title",!0);var o=this.element.find("#message-text");N.addAttributes(o,this,this.settings.attributes,"message",!0),N.addAttributes(this.element,this,this.settings.attributes,"modal",!0),this.element.attr("aria-labelledby",r.attr("id")),this.element.attr("aria-describedby",o.attr("id"))}else{var c=this.element.find("h1:first");N.addAttributes(c,this,this.settings.attributes,"title",!0),N.addAttributes(this.element.find(".btn-close"),this,this.settings.attributes,"btn-close",!0);var u=c.attr("id");u||(u="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),c.attr("id",u));var p=this.element.find(".modal-body"),m="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",u),N.addAttributes(this.element,this,this.settings.attributes,"",!0),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",m),this.element.attr("aria-describedby",m)):(p.attr("id",m),this.element.attr("aria-describedby",m))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),function(){n.resize()}),this.element[0].style.display="";var v=this,w=new Gt({duration:1,timeoutCallback:function(){v.resize(),v.element.attr("role",v.settings.isAlert?"alertdialog":"dialog"),v.element.attr("aria-modal","true")}}),C=new Gt({duration:ca.modalFadeDuration,timeoutCallback:function(){v.visible=!0}});Hn.register(w),Hn.register(C),$(this.element).off("keypress.".concat(this.namespace)).on("keypress.".concat(this.namespace),function(I){var z=$(I.target);z.is(".editor, .searchfield, textarea, :button")||z.closest(".tab-list").length||$("#dropdown-list").length||I.which===13&&n.isOnTop&&!z.closest("form").find(":submit").length&&n.element.find(".btn-modal-primary:enabled").length&&(I.stopPropagation(),I.preventDefault(),v.settings.suppressEnterKey||z.hasClass("fileupload")&&!z.hasClass("colorpicker")||n.element.find(".btn-modal-primary:enabled").trigger("click"))}),$(".skip-link").on("focus.".concat(this.namespace),function(I){I.preventDefault();var z=n.element.find(":focusable").first();z.focus(),typeof v.settings.onFocusChange=="function"&&v.settings.onFocusChange(v,z[0])}),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),function(){n.resize()});var A=new Gt({duration:5,timeoutCallback:function(){v.disableSubmit()}});Hn.register(A),this.element.find("[data-validate]").removeClass("disable-validation");var S=new Gt({duration:20,timeoutCallback:function(){var I;I=v,v.element.trigger("open",[I]),function(z){if(v.settings.autoFocus){v.changeObserver=new MutationObserver(function(){v.setFocusableElems()}),v.changeObserver.observe(v.element[0],{childList:!0,subtree:!0}),v.setFocusableElems();var V,U,G=$(v.focusableElems).not(":hidden").first();if(G.length===0&&(G=z.element.find(".btn-modal-primary")),G.length===1&&G.is(".btn-modal")&&(G=z.element.find(".btn-modal-primary")),v.buttonsetAPI&&z.buttonsetElem.find(".btn-modal-primary").length===0){var J=$(".modal-buttonset button")[0];G=z.buttonsetElem.find(J)}if(G.is(".modal-wrapper a")&&(G=z.element.find(".modal-content .message a").removeClass("hide-focus")),G.is(".tab:not(.is-selected) a")&&(V=(U=G.closest(".tab-container")).find(".is-selected")).length)return G=V,void U.data("tabs").select(V.children("a").attr("href"));G.is("input")&&G.closest(".modal-header").length>0||G.focus(),typeof v.settings.onFocusChange=="function"&&v.settings.onFocusChange(v,G[0])}}(v)}});Hn.register(S);var M=new Gt({duration:30,timeoutCallback:function(){v.element.trigger("afteropen")}});Hn.register(M)}},resize:function(){var e,t,n=this.currentlyNeedsFullsize;n?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),e=.9*$(window).height()-this.settings.frameHeight,t=1*$(window).width()-this.settings.frameWidth);var i=this.element.find(".modal-body-wrapper");if(i.length&&(n?(i[0].style.maxHeight="",i[0].style.maxWidth=""):(i[0].style.maxHeight="".concat(e,"px"),i[0].style.maxWidth="".concat(t,"px"))),this.element.hasClass("lookup-modal")){var a=this.element.find(".datagrid-wrapper"),r=this.element.find(".pager-toolbar"),o=a.closest(".datagrid-container");e=e-(o.prev().is(".toolbar")?130:67)-(o.next().is(".pager-toolbar")?35:0)+(r.length?-15:0),a[0]!==void 0&&(n?(a[0].style.maxHeight="",a[0].style.maxWidth=""):e!==void 0&&t!==void 0&&(a[0].style.maxHeight="".concat(e,"px"),a[0].style.maxWidth="".concat(t,"px")))}this.element.hasClass("datagrid-columns-dialog")&&(i[0].style.overflow="hidden",e>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(e,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0)),this.settings.showCloseBtn&&!this.isCAP&&($(window).width()<400&&this.element.hasClass("has-close-btn")?this.element.removeClass("has-close-btn"):$(window).width()>=400&&!this.element.hasClass("has-close-btn")&&this.element.addClass("has-close-btn"));var c=this.element.find(".toolbar");c.length&&c.triggerHandler("recalculate-buttons"),this.createDraggable()},isOpen:function(){return Pn("visible","isOpen"),this.visible},get openSubComponents(){var e=kc(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),t=[];return e.forEach(function(n){var i=n.control,a=typeof i.isPopover=="boolean"&&i.isPopover===!0,r=typeof i.isOpen=="function"&&i.isOpen(),o=typeof i.isOpen=="boolean"&&i.isOpen===!0,c=!!a&&typeof i.visible=="boolean"&&i.visible===!0;(r||o||c)&&t.push(i)}),t},get isFocused(){var e=!1,t=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(i){if(!e){var a,r,o,c,u=$(i);(u.is($(t))||typeof i.contains=="function"&&i.contains(t))&&(e=!0),u.is("div.dropdown, div.multiselect")&&(e=(a=u.parent().prev("select").data("dropdown"))===null||a===void 0||a==null?void 0:a.isFocused),u.is(".lookup")&&(e=(r=u.data("lookup"))===null||r===void 0||r==null?void 0:r.isFocused),u.is(".btn-menu, .btn-actions")&&(e=(o=u.data("popupmenu"))===null||o===void 0||o==null?void 0:o.isFocused),u.is(".searchfield")&&(e=(c=u.data("searchfield"))===null||c===void 0||c==null?void 0:c.isFocused)}});var n=$(t).parents(".tooltip, .popover");return n.length&&n.each(function(i,a){var r=a.className.contains("popover")?"popover":"tooltip",o=$(a).data(r);o&&o.isFocused&&(e=!0)}),e},setFocusableElems:function(){var e=ue.focusableElems(this.element[0],[],["option"]);this.focusableElems=e,this.focusableElems.first=e[0],this.focusableElems.last=e[e.length-1]},setFocus:function(e){if(["last","first"].indexOf(e)!==-1){var t;switch(this.focusableElems||this.setFocusableElems(),e){case"last":t=this.focusableElems.last;break;case"first":t=this.focusableElems.first}t&&(t.focus(),t.classList.remove("hide-focus"),typeof this.settings.onFocusChange=="function"&&this.settings.onFocusChange(this,t))}},close:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3?arguments[3]:void 0;if(!n&&!this.visible)return!0;if(this.element.triggerHandler("beforeclose".concat(i?".".concat(i):""))===!1)return!1;var a=this;if(this.element.find("[data-validate]").addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(a.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.openSubComponents.length>0&&!n){var r=this.openSubComponents[0];if(r.element.hasClass("colorpicker"))r.close();else{var o,c=r==null||(o=r?.popup)===null||o===void 0||o==null?void 0:o.data("popover");c&&c.hide()}}else this.visible=!1,this.active=!1;delete this.dontCheckFocus,i?a.element.trigger("close.".concat(i),a.isCancelled):a.element.trigger("close",a.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var u=$(this.closeBtn).data("tooltip");u&&(u.hide(),u.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var p=new Gt({duration:ca.modalFadeDuration,timeoutCallback:function(){i?a.element.trigger("afterclose.".concat(i),a.isCancelled):a.element.trigger("afterclose"),u&&delete u.reopenDelay,(a.settings.trigger==="immediate"||e)&&(!a.isCAP||a.isCAP&&!a.capAPI)&&a.destroy(i),t||ca.refresh(),a.settings.noRefocus||(!a.oldActive&&a.settings.triggerButton&&(a.oldActive=a.useJqEl(a.settings.triggerButton)),a.oldActive&&$(a.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?a.oldActive.focus():a.trigger.parents(".toolbar, .formatter-toolbar").length<1&&a.trigger.focus())}});return Hn.register(p),!1},useJqEl:function(e){return e instanceof jQuery?e:$(e)},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element,e,this.settings),this.settings=Qu(this.settings)),this.settings.trigger==="immediate"&&this.open(),this},destroy:function(e){var t=this;function n(){t.trigger.off("click.".concat(t.namespace)),t.element.off("keypress.".concat(t.namespace," keydown.").concat(t.namespace," beforeclose.").concat(t.namespace," afterclose.").concat(t.namespace)),t.element.find("button, .btn-close").off("click.".concat(t.namespace)),t.element.find(".paginated").off("afterpaging.".concat(t.namespace)),$(".skip-link").off("focus.".concat(t.namespace)),$("body").off("resize.".concat(t.namespace)),$(t.element).off("keydown.".concat(t.namespace)),t.element.find(".detailed-message").length===1&&$("body").off("resize.".concat(t.namespace)),t.isCAP&&t.capAPI&&t.capAPI.destroy(),t.aboutAPI&&t.aboutAPI.destroy(!0),t.buttonsetAPI&&(t.buttonsetAPI.buttons.forEach(function(r){$(r.element).off("click.".concat(t.namespace))}),t.buttonsetAPI.destroy(),t.buttonsetElem.remove(),delete t.buttonsetAPI,delete t.buttonsetElem),delete t.focusableElems,t.trigger.off("click.".concat(t.namespace)),t.element[0].removeAttribute("data-modal");var i=t.element.parent(".modal-wrapper");i.length&&i.remove();var a=new Gt({duration:21,timeoutCallback:function(){var r=null,o=t.element?t.element.data(Pr):null;o?r=t.element[0]:(o=t.trigger?t.trigger.data(Pr):null)&&(r=t.trigger[0]),r&&o&&o.overlay&&$.removeData(r,Pr)}});Hn.register(a),ca.unregister(t),t.originalElement instanceof $&&$.removeData(t.originalElement[0],"modalElementLink"),$.removeData(t.element[0],Pr)}this.element.trigger("beforedestroy".concat(e?".".concat(e):""))&&(this.visible?(this.element.on("afterclose.".concat(t.namespace),function(){n()}),this.close(!0)):n())}};var $p={title:"Message Title",status:"",message:"Message Summary",width:"auto",maxWidth:null,buttons:null,showCloseBtn:!1,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7,hideUnderneath:!1,attributes:null,noRefocus:!1};function Fd(e,t){this.element=$(e),this.settings=N.mergeSettings(e,t,$p),this.init()}Fd.prototype={init:function(){var e,t=this,n=this,i=this.settings.allowedTags,a=!0;if(this.settings.allowedTags.length>0||(a=!1),this.message=$('<div class="modal message" '.concat(this.settings.id?'id="'.concat(this.settings.id,'"'):"","></div>")),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(a?_e.stripTags(this.settings.title,i):_e.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><div class="message" id="message-text">'.concat(a?_e.stripTags(this.settings.message,i):_e.stripHTML(this.settings.message),"</div></div>")).appendTo(this.messageContent),this.settings.audibleLabel!==""&&this.title.prepend('<span class="audible">'.concat(L.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(e=this.element,this.content.empty().append(e.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,showCloseBtn:this.settings.showCloseBtn,isAlert:!0,overlayOpacity:this.settings.overlayOpacity,hideUnderneath:this.settings.hideUnderneath,attributes:this.settings.attributes,noRefocus:this.settings.noRefocus}),this.settings.width!=="auto"&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.maxWidth&&(this.content.find(".message")[0].style.maxWidth=this.settings.maxWidth),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.settings.showCloseBtn){var r=$(`
        <button type="button" class="btn-icon btn-close" title="`.concat(L.translate("Close"),`" aria-hidden="true">
          `).concat($.createIcon("close"),`
          <span class="audible">`).concat(L.translate("Close"),`</span>
        </button>
      `));this.message.find(".modal-content").append(r),r.on("click",function(){return t.destroy()})}this.message.on("beforeclose.message",function(){return n.element.triggerHandler("beforeclose")}).on("beforeopen.message",function(){return n.element.triggerHandler("beforeopen")}).on("open.message",function(){n.element.trigger("open")}).on("afterclose.message",function(){n.destroy(),n.settings.returnFocus&&n.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")}),$(document).on("keypress.message keydown.message",function(o){(o.which||o.keyCode)===27&&setTimeout(function(){var c=n.message.data("modal");c!==void 0&&c.close()},0)}),this.settings.status==="error"?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):this.settings.status==="alert"?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):this.settings.status==="success"?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):this.settings.status==="info"?this.title.addClass("has-status is-info").prepend($.createIconElement("info")):this.title.removeClass("has-status is-error is-alert is-success is-info").find("svg").remove()},destroy:function(){var e=this.message.data("modal");e!==void 0&&e.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(e){return this.each(function(){return new Fd(this,e)})},$.fn.modal=function(e){return this.each(function(){var t=$.data(this,Pr),n=$(this);if(n.is(".modal")||(t=n.closest(".modal").data(Pr)),t&&e)return t.updated(e),void(typeof t[e]=="function"&&t[e]());t&&!e||(t=$.data(this,Pr,new zd(this,e)))})},$.fn.monthview=function(e){return this.each(function(){var t=$.data(this,se);t?t.updated(e):t=$.data(this,se,new He(this,e))})};var Hd="multiselect",Dp={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,allTextString:null,selectedTextString:null};function qd(e,t){this.settings=N.mergeSettings(e,t,Dp),this.element=$(e),this.init()}qd.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],Hd)}},$.fn.multiselect=function(e){return this.each(function(){var t=$.data(this,Hd);t?t.updated(e):t=$.data(this,Hd,new qd(this,e))})};var Vd=[!1,"collapsed","expanded"],jd=`<svg
  class="icon-custom"
  focusable="false"
  aria-hidden="true"
  width="32"
  height="32"
  viewBox="0 0 32 32"
  fill="none"
  xmlns="http://www.w3.org/2000/svg">
  <rect width="32" height="32" rx="8" fill="#1C86EF"/>
  <path d="M7.8315 20V11.2727H13.5076V12.598H9.41246V14.9673H13.2136V16.2926H9.41246V18.6747H13.5417V20H7.8315ZM15.0524 20V13.4545H16.5268V14.5668H16.6035C16.7399 14.1918 16.9657 13.8991 17.2811 13.6889C17.5964 13.4759 17.9728 13.3693 18.4103 13.3693C18.8535 13.3693 19.2271 13.4773 19.5311 13.6932C19.8379 13.9062 20.0538 14.1974 20.1788 14.5668H20.247C20.3919 14.2031 20.6362 13.9134 20.9799 13.6974C21.3265 13.4787 21.737 13.3693 22.2115 13.3693C22.8137 13.3693 23.3052 13.5597 23.6859 13.9403C24.0666 14.321 24.2569 14.8764 24.2569 15.6065V20H22.7101V15.8452C22.7101 15.4389 22.6021 15.142 22.3862 14.9545C22.1703 14.7642 21.9061 14.669 21.5936 14.669C21.2214 14.669 20.9302 14.7855 20.72 15.0185C20.5126 15.2486 20.4089 15.5483 20.4089 15.9176V20H18.8961V15.7812C18.8961 15.4432 18.7939 15.1733 18.5893 14.9716C18.3876 14.7699 18.1234 14.669 17.7967 14.669C17.5751 14.669 17.3734 14.7259 17.1916 14.8395C17.0098 14.9503 16.8649 15.108 16.7569 15.3125C16.649 15.5142 16.595 15.75 16.595 16.0199V20H15.0524Z" fill="white"/>
</svg>`,Ju=function(){return jd},Oc=function(e){return Vd.includes(e)},zl=function(e,t){t.classList.remove("mode-collapsed","mode-expanded"),Oc(e)&&e&&t.classList.add("mode-".concat(e))},Zu=function(e,t,n){var i;t==="collapsed"?$(e).tooltip({placementOpts:{x:16},placement:"right",title:(n||e).textContent.trim()}):(i=$(e).data("tooltip"))===null||i===void 0||i==null||i.destroy()},mo="modulenavswitcher",Fs={displayMode:Vd[0],generate:!0,icon:Ju,noSearch:!1,changeIconOnSelect:!0,moduleButtonText:"Standard Module",roleDropdownLabel:"Roles",attributes:null,roles:[]};function Rc(e,t){this.settings=N.mergeSettings(e,t,Fs),this.element=$(e),this.init()}Rc.prototype={get accordionEl(){var e;return(e=this.element.parents(".accordion").first())===null||e===void 0||e==null?void 0:e[0]},get accordionAPI(){return this.accordionEl?$(this.accordionEl).data("accordion"):void 0},get containerEl(){return this.element.parents(".module-nav-container")[0]},get moduleButtonContainerEl(){return this.element[0].querySelector(".module-nav-section.module-btn")},get moduleButtonEl(){return this.moduleButtonContainerEl.querySelector("button")},get moduleButtonIconEl(){var e;return(e=this.moduleButtonEl)===null||e===void 0||e==null?void 0:e.querySelector("svg, img, .icon, .custom-icon")},get moduleButtonAPI(){return this.moduleButtonEl?$(this.moduleButtonEl).data("button"):void 0},get roleDropdownContainerEl(){return this.element[0].querySelector(".module-nav-section.role-dropdown")},get roleDropdownEl(){return this.element[0].querySelector(".dropdown")},get roleDropdownAPI(){return this.roleDropdownEl?$(this.roleDropdownEl).data("dropdown"):void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),this.moduleButtonIconEl&&this.settings.icon===Ju||this.setModuleButtonIcon(),$(this.roleDropdownEl).find("option").length||this.renderDropdownOptions(!0),this},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(mo),function(){t.updated()}),this.element.on("keydown.".concat(mo),function(n){var i,a,r=n.key;r!=="ArrowUp"?r==="ArrowDown"&&((i=e.accordionAPI)===null||i===void 0||i==null||i.nextHeader(e.element)):(a=e.accordionAPI)===null||a===void 0||a==null||a.prevHeader(e.element)}),this},renderChildComponents:function(){this.renderModuleButton(),this.renderRoleDropdown()},renderModuleButton:function(){var e;!this.settings.generate||this.moduleButtonContainerEl&&this.moduleButtonEl||this.element[0].insertAdjacentHTML("afterbegin",(e=this.settings.moduleButtonText,`<div class="module-nav-section module-btn">
  <button id="module-nav-homepage-btn" class="btn-icon btn-tertiary">
    `.concat(jd,`
    <span>`).concat(e||(L?L.translate("ModuleSwitch"):"Switch Modules"),`</span>
  </button>
</div>`))),this.moduleButtonEl&&($(this.moduleButtonEl).button({ripple:!1}),Zu(this.element,this.settings.displayMode,this.moduleButtonEl))},renderRoleDropdown:function(){var e,t=this,n=$(this.roleDropdownEl);!this.settings.generate||this.roleDropdownContainerEl&&this.roleDropdownEl||this.element[0].insertAdjacentHTML("beforeend",(e=this.settings.roleDropdownLabel,`<div class="module-nav-section role-dropdown">
  <label for="module-nav-role-switcher" class="label audible">`.concat(e||"Roles",`</label>
  <select id="module-nav-role-switcher" name="module-nav-role-switcher" class="dropdown"></select>
</div>`))),n.find("option").length||this.renderDropdownOptions(),this.settings.disabled?n.attr("disabled",!0):n.removeAttr("disabled"),n.dropdown({cssClass:"role-dropdown",dropdownIcon:"expand-all",extraListWrapper:!0,width:"parent",widthTarget:".module-nav-switcher",noSearch:this.settings.noSearch,attributes:this.settings.attributes}).off("change.module-nav").on("change.module-nav",function(i){t.settings.changeIconOnSelect&&t.selectRole(i.currentTarget.value)})},renderDropdownOptions:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Array.isArray(this.settings.roles)&&this.settings.roles.length&&this.setRoles(this.settings.roles,e)},setDisplayMode:function(e){Oc(e)&&(this.settings.displayMode!==e&&(this.settings.displayMode=e),zl(e,this.element[0]))},setModuleButtonIcon:function(e){var t,n,i="";switch(at(this.settings.icon)){case"function":i=this.settings.icon(this);break;case"string":ot.isValidURL(this.settings.icon)?(t=this.settings.icon,n=this.settings.moduleButtonText,i='<img src="'.concat(t,'" alt="').concat(n||"Module Button Icon",'" class="custom-icon" aria-hidden="true" role="presentation" />')):i=this.settings.icon.charAt(0)!=="<"&&document.querySelector("symbol#icon-".concat(this.settings.icon))?function(r){return`<svg class="icon" focusable="false" aria-hidden="true" role="presentation">
  <use href="#icon-`.concat(r,`"></use>
</svg>`)}(this.settings.icon):this.settings.icon}if(e&&(i=e),i.length){var a=this.moduleButtonIconEl;a==null||a==null||a.remove(),this.moduleButtonEl.insertAdjacentHTML("afterbegin",i)}},setRoles:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(Array.isArray(e)&&this.roleDropdownEl){var n,i="";if(this.roleDropdownEl&&(this.roleDropdownEl.innerHTML=""),e.length&&e.forEach(function(r){var o,c,u,p;i+=(o=r.value,c=r.text,u=r.icon,p=r.iconColor,`<option
  value="`.concat(o,`"
  `).concat(u?` data-icon="{icon: '`.concat(u,"'").concat(p?", colorOver: '".concat(p,"'"):""):"",'}">').concat(c,"</option>"))}),i.length&&((n=this.roleDropdownEl)===null||n===void 0||n==null||n.insertAdjacentHTML("afterbegin",i),t)){this.roleDropdownAPI.updated();var a=this.roleDropdownAPI.selectedValues;a.length&&this.selectRole(a[0])}}},selectRole:function(e){var t,n=this.roleDropdownAPI.listIcon.items;n!=null&&n?.length&&(n.forEach(function(i){t||i.value!==e||(t=i.html)}),t&&this.setModuleButtonIcon(t))},toggleModuleButtonFocus:function(e){var t,n;if(this.moduleButtonEl){var i=((t=document.activeElement)===null||t===void 0||t==null?void 0:t.isEqualNode(this.moduleButtonEl))||((n=this.moduleButtonEl)===null||n===void 0||n==null?void 0:n.classList.contains("is-focused")),a=typeof e=="boolean"?e:!i;this.moduleButtonEl.classList[a?"add":"remove"]("is-focused")}},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){var e,t;return this.element.off("updated.".concat(mo," keydown.").concat(mo)),this.moduleButtonEl&&((e=$(this.moduleButtonEl).data("button"))===null||e===void 0||e==null||e.destroy()),this.roleDropdownEl&&((t=$(this.roleDropdownEl).data("dropdown"))===null||t===void 0||t==null||t.destroy()),this},destroy:function(){this.teardown(),$.removeData(this.element[0],mo)}},$.fn.modulenavswitcher=function(e){return this.each(function(){var t=$.data(this,mo);t?t.updated(e):t=$.data(this,mo,new Rc(this,e))})};var ci="modulenav",hr={accordionSettings:{expanderDisplay:"classic",tooltipStyle:"dark"},displayMode:Vd[0],filterable:!1,initChildren:!0,pinSections:!1,showDetailView:!1,mobileBehavior:!0,breakpoint:"phone-to-tablet",showOverlay:!0,showModuleSwitcher:!0,showGuestSection:!1,showSearchBar:!0,enableOutsideClick:!1,autoCollapseOnMobile:!0,disableSwitcher:!1},Wd=function(e,t){var n=!1;return e instanceof HTMLElement&&(t===void 0&&e.scrollHeight>e.clientHeight||t===!0?(e.classList.add("has-scrollbar"),n=!0):e.classList.remove("has-scrollbar")),n};function Fl(e,t){this.settings=N.mergeSettings(e,t,hr),this.element=$(e),this.init()}Fl.prototype={previousDisplayMode:!1,get accordionAPI(){return this.accordionEl?$(this.accordionEl).data("accordion"):void 0},get containerEl(){var e;return(e=this.element[0])===null||e===void 0||e==null?void 0:e.parentElement},get pageContainerEl(){return this.element.next(".page-container")},get moduleSwitcherEl(){return this.element.find(".module-nav-header")[0]},get moduleSearchEl(){return this.element.find(".module-nav-search-container")[0]},get moduleGuestSectionEl(){return this.element.find(".module-nav-guest")[0]},get switcherAPI(){return this.switcherEl?$(this.switcherEl).data("modulenavswitcher"):void 0},get searchAPI(){return this.searchEl?$(this.searchEl).data("searchfield"):void 0},get settingsAPI(){return this.settingsEl?$(this.settingsEl).data("modulenavsettings"):void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),this.setPinSections(this.settings.pinSections),this.setScrollable(),this.setShowDetailView(this.settings.showDetailView),this.setShowModuleSwitcher(this.settings.showModuleSwitcher),this.setShowModuleSearch(this.settings.showSearchBar),this.setShowGuestSection(this.settings.showGuestSection),this.configureResize(),this},renderChildComponents:function(){this.detailViewEl=this.element[0].querySelector(".module-nav-detail"),this.switcherEl=this.element[0].querySelector(".module-nav-switcher"),this.itemMenuEl=this.element[0].querySelector(".module-nav-main"),this.settingsEl=this.element[0].querySelector(".module-nav-settings"),this.footerEl=this.element[0].querySelector(".module-nav-footer"),this.accordionEl=this.element[0].querySelector(".accordion"),this.searchEl=this.element[0].querySelector(".searchfield"),this.renderSeparators(),this.settings.initChildren&&(this.switcherAPI||$(this.switcherEl).modulenavswitcher({displayMode:this.settings.displayMode,disabled:this.settings.disableSwitcher}),this.settingsAPI||$(this.settingsEl).modulenavsettings({displayMode:this.settings.displayMode}),this.accordionAPI||$(this.accordionEl).accordion(this.settings.accordionSettings)),this.accordionEl&&this.configureAccordion(),this.searchEl&&this.configureSearch()},renderSeparators:function(){var e,t;(this.switcherEl||this.searchEl)&&((e=this.itemMenuEl)===null||e===void 0||e==null||e.insertAdjacentHTML("beforebegin",'<div class="module-nav-separator">&nbsp;</div>')),this.footerEl&&((t=this.footerEl)===null||t===void 0||t==null||t.insertAdjacentHTML("beforebegin",'<div class="module-nav-separator">&nbsp;</div>'))},handleEvents:function(){var e=this;return this.element.on("updated.".concat(ci),function(){e.updated()}),this.accordionEl&&($(this.accordionEl).on("rendered.".concat(ci),function(){e.configureAccordion()}),$(this.accordionEl).on("beforeexpand.".concat(ci),function(t){return t.preventDefault(),e.settings.displayMode==="expanded"}),$(this.accordionEl).on("afterexpand.".concat(ci),function(){e.setScrollable()}),$(this.accordionEl).on("aftercollapse.".concat(ci),function(){e.setScrollable()}),$(this.accordionEl).on("selected.".concat(ci),function(t,n){$(n).is("#module-nav-settings-btn")||e.handleAutoCollapseOnMobile()}),$(this.accordionEl).on("followlink.".concat(ci),function(t,n){$(n).is("#module-nav-settings-btn")||e.handleAutoCollapseOnMobile()})),$("body").on("resize.".concat(ci),Va(function(){e.checkMobileBehavior()},0)),this.settings.mobileBehavior||this.enableOutsideClickEvent(),this},enableOutsideClickEvent:function(){var e=this;this.settings.enableOutsideClick&&this.settings.displayMode==="expanded"&&$(this.containerEl).on("click.".concat(ci),function(t){e.checkOutsideClick(t.target)})},checkMobileBehavior:function(){if(this.settings.mobileBehavior){if(this.settings.displayMode==="expanded"){var e=this.pageContainerEl.find(".page-overlay");return Yt.isAbove(this.settings.breakpoint)?(this.element[0].classList.remove("show-shadow"),this.pageContainerEl[0].classList.add("has-module-nav-offset"),this.settings.enableOutsideClick=!1,this.removeOutsideClickEvent(),void e.remove()):(this.element[0].classList.add("show-shadow"),this.pageContainerEl[0].classList.remove("has-module-nav-offset"),e.length===0&&this.settings.showOverlay&&$('<div class="page-overlay"></div>').appendTo(this.pageContainerEl),this.settings.enableOutsideClick=!0,void this.enableOutsideClickEvent())}this.settings.displayMode!=="collapsed"||this.isLargerThanBreakpoint()?this.settings.displayMode==="collapsed"&&this.isLargerThanBreakpoint()&&zl("collapsed",this.containerEl):zl(!1,this.containerEl)}},removeOutsideClickEvent:function(){$(this.containerEl).off("click.".concat(ci))},checkOutsideClick:function(e){if(this.settings.displayMode==="expanded"){var t=e;!t||$(t).is(".application-menu-trigger")||this.element[0].contains(t)||(this.setDisplayMode(!!this.isLargerThanBreakpoint()&&"collapsed"),this.removeOutsideClickEvent())}},handleHamburgerClick:function(){var e=this.settings.displayMode;e==="expanded"&&this.isLargerThanBreakpoint()?this.updated({displayMode:"collapsed"}):e==="collapsed"&&this.isLargerThanBreakpoint()?this.updated({displayMode:"expanded"}):e!=="expanded"||this.isLargerThanBreakpoint()?e!=="collapsed"||this.isLargerThanBreakpoint()?e===!1&&this.updated({displayMode:"expanded"}):this.updated({displayMode:"expanded"}):this.updated({displayMode:!1})},handleSearchfieldInputEvent:function(){na.handleSearchfieldInputEvent.apply(this,[ci])},collapseAccordionHeaders:function(){var e=this;this.accordonEl&&this.accordionAPI&&Nt(this.containerEl.querySelectorAll(".accordion-header")).forEach(function(t){$(t).next(".accordion-pane").length&&e.accordionAPI.collapse($(t),!0)})},configureAccordion:function(){var e=this;if(this.accordionEl&&this.accordionAPI){var t=N.mergeSettings(this.accordionEl,{accordionFocusCallback:function(i,a){i.is(".module-nav-switcher")?e.settings.displayMode==="expanded"?i.find(".dropdown").focus():i.find(".module-btn button").focus():a()}},this.settings.accordionSettings);this.accordionAPI.updated(t);var n=this.accordionEl.querySelectorAll(".accordion-section > .accordion-header, .accordion-section > soho-module-nav-settings > .accordion-header");n.length&&Nt(n).forEach(function(i){Zu(i,e.settings.displayMode)})}},configureResize:function(){var e=this;typeof ResizeObserver<"u"&&(this.ro||(this.ro=new ResizeObserver(function(){e.setPinSections(e.settings.pinSections),e.setScrollable(),e.checkMobileBehavior()})),this.accordionEl&&this.ro.observe(this.accordionEl))},configureSearch:function(){var e;this.settings.filterable?(na.attachFilter.apply(this,[ci]),na.attachFilterEvents.apply(this,[ci])):$(this.searchEl).searchfield(),this.searchEl.classList.add("module-nav-search"),(e=$(this.searchEl).parents(".accordion-section"))===null||e===void 0||e==null||e[0].classList.add("module-nav-search-container")},setDisplayMode:function(e){var t,n;Oc(e)&&(this.settings.displayMode!=="expanded"&&(this.previousDisplayMode=this.settings.displayMode),this.settings.displayMode!==e&&(this.settings.displayMode=e),zl(e,this.containerEl),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),(t=this.switcherAPI)===null||t===void 0||t==null||t.setDisplayMode(e),(n=this.settingsAPI)===null||n===void 0||n==null||n.setDisplayMode(e),this.settings.displayMode!=="expanded"?this.collapseAccordionHeaders():this.settings.mobileBehavior||this.enableOutsideClickEvent(),this.element.trigger("displaymodechange",[e,this.previousDisplayMode]),this.checkMobileBehavior())},setPinSections:function(e){this.containerEl.classList[e?"add":"remove"]("pinned-optional")},setScrollable:function(){this.settings.pinSections?(this.setMainAccordionScrollable(!1),this.setAccordionSectionsScrollable()):(this.setAccordionSectionsScrollable(!1),this.setMainAccordionScrollable())},setMainAccordionScrollable:function(e){var t=this.accordionEl;Wd(t,e)},setAccordionSectionsScrollable:function(e){var t,n=!1,i=(t=this.accordionEl)===null||t===void 0||t==null?void 0:t.querySelectorAll(".accordion-section");i&&i.length&&Nt(i).forEach(function(a){Wd(a,e)&&(n=!0);var r=a.classList.contains("module-nav-search-container");(a.classList.contains("module-nav-header")||r)&&(e?a.classList.add("next-scrollbar"):a.classList.remove("next-scrollbar"))}),this.containerEl.classList[n?"add":"remove"]("has-section-scrollbars")},setShowDetailView:function(e){var t;this.containerEl.classList[e?"add":"remove"]("show-detail"),(t=this.detailViewEl)===null||t===void 0||t==null||t.classList[e?"add":"remove"]("visible")},setShowModuleSwitcher:function(e){var t;(t=this.moduleSwitcherEl)===null||t===void 0||t==null||t.classList[e?"remove":"add"]("hidden")},setShowModuleSearch:function(e){var t;(t=this.moduleSearchEl)===null||t===void 0||t==null||t.classList[e?"remove":"add"]("hidden")},setShowGuestSection:function(e){var t;(t=this.moduleGuestSectionEl)===null||t===void 0||t==null||t.classList[e?"remove":"add"]("hidden")},isLargerThanBreakpoint:function(){return Yt.isAbove(this.settings.breakpoint)},handleAutoCollapseOnMobile:function(){this.settings.autoCollapseOnMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.setDisplayMode(this.previousDisplayMode))},updated:function(e){return e&&(this.settings=N.deepMergeObject(this.settings,e),this.switcherAPI&&(this.switcherAPI.settings.displayMode=this.settings.displayMode),this.settingsAPI&&(this.settingsAPI.settings.displayMode=this.settings.displayMode)),this.teardown().init()},teardown:function(){var e,t,n,i;return this.teardownEvents(),na.teardownFilter.apply(this,[ci]),$(this.element).find(".module-nav-separator").remove(),this.detailViewEl=null,(e=this.switcherAPI)===null||e===void 0||e==null||e.destroy(),this.switcherEl=null,this.itemMenuEl=null,(t=this.settingsAPI)===null||t===void 0||t==null||t.destroy(),this.settingsEl=null,this.footerEl=null,(n=this.accordionAPI)===null||n===void 0||n==null||n.destroy(),this.accordionEl=null,(i=this.searchAPI)===null||i===void 0||i==null||i.destroy(),this.searchEl=null,this},teardownEvents:function(){this.removeOutsideClickEvent(),this.element.off("updated.".concat(ci)),$(this.accordionEl).off("rendered.".concat(ci)),$(this.accordionEl).off("beforeexpand.".concat(ci)),$(this.accordionEl).off("afterexpand.".concat(ci)),$(this.accordionEl).off("aftercollapse.".concat(ci)),$("body").off("resize.".concat(ci))},teardownResize:function(){this.ro&&(this.ro.disconnect(),this.ro=null)},destroy:function(){this.teardown(),this.teardownResize(),$.removeData(this.element[0],ci)}},$.fn.modulenav=function(e){return this.each(function(){var t=$.data(this,ci);t?t.updated(e):t=$.data(this,ci,new Fl(this,e))})};var Hl="modulenavsettings",Ip={displayMode:!1};function Nc(e,t){this.settings=N.mergeSettings(e,t,Ip),this.element=$(e),this.init()}Nc.prototype={get accordionEl(){var e;return(e=this.element.parents(".accordion").first())===null||e===void 0||e==null?void 0:e[0]},get menuAPI(){return $(this.element).data("popupmenu")||void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),this.configurePopupMenu(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Hl),function(){e.updated()}),this},renderChildComponents:function(){var e;this.containerEl=this.element.parents(".module-nav-container")[0],this.detectPopupMenu(),(e=this.menuEl)!==null&&e!==void 0&&e?.length||(this.element[0].insertAdjacentHTML("afterend",'<div class="popupmenu-wrapper><ul class="popupmenu"></ul></div>'),this.menuEl=this.element.next(".popupenu-wrapper").find(".popupmenu"))},detectPopupMenu:function(){if(this.menuEl=this.element.next(".popupmenu"),this.element.next(".popupmenu-wrapper").length&&(this.menuEl=this.element.next(".popupenu-wrapper").find(".popupmenu")),!this.menuEl.length){var e=$(".popupmenu-wrapper.module-nav-settings-menu").find(".popupmenu");e.length&&(this.menuEl=e)}},configurePopupMenu:function(){this.menuEl.length||this.detectPopupMenu(),this.element.popupmenu(this.getPopupmenuConfig())},getPopupmenuConfig:function(){var e=this,t={placement:"bottom",containerOffsetX:8,containerOffsetY:8,callback:function(n){return e.element.closest(".module-nav").data("modulenav").settings.displayMode==="collapsed"&&(n.x+=20,n.containerOffsetY=20,n.placement="right"),n}};return{cssClass:"module-nav-settings-menu",offset:{x:0,y:10},placementOpts:t}},setDisplayMode:function(e){Oc(e)&&(this.settings.displayMode!==e&&(this.settings.displayMode=e),zl(e,this.element[0]),this.configurePopupMenu())},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){var e;return this.element.off("updated.".concat(Hl)),(e=this.popupmenuAPI)===null||e===void 0||e==null||e.destroy(),this.menuEl=null,this},destroy:function(){this.teardown(),$.removeData(this.element[0],Hl)}},$.fn.modulenavsettings=function(e){return this.each(function(){var t=$.data(this,Hl);t?t.updated(e):t=$.data(this,Hl,new Nc(this,e))})};var vo="notification",Ud={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view.",attributes:null};function _c(e,t){this.settings=N.mergeSettings(e,t,Ud),this.element=$(e),this.init()}_c.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var e=`
      <svg class="icon notification-icon icon-`.concat(this.settings.type,`" focusable="false" aria-hidden="true" role="presentation">
        <use href="#icon-`).concat(this.settings.type,`"></use>
      </svg>`),t=this.settings.linkText?'<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>"):"",n='<p class="notification-text">'.concat(Be.rtl?"".concat(t).concat(this.settings.message,"&lrm;"):"".concat(this.settings.message).concat(t),"</p>"),i=`
      <button type="text" class="notification-close">
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-close"></use>
        </svg>
        <span class="audible">`.concat(L.translate("Close"),`</span>
      </button>`);this.notificationEl.innerHTML=e.concat(n,i);var a=document.querySelector(this.settings.parent);return $(this.settings.parent).closest(".contextual-action-panel").length>0?($(this.notificationEl).css({"max-width":"".concat($(a).width(),"px")}),$(a).closest(".modal-body-wrapper").prepend(this.notificationEl)):a.append(this.notificationEl),$(this.notificationEl).animateOpen(),N.addAttributes($(this.notificationEl),this,this.settings.attributes),N.addAttributes($(this.notificationEl).find(".notification-icon"),this,this.settings.attributes,"icon"),N.addAttributes($(this.notificationEl).find(".notification-text"),this,this.settings.attributes,"text"),N.addAttributes($(this.notificationEl).find(".notification-text a"),this,this.settings.attributes,"link"),N.addAttributes($(this.notificationEl).find("button.notification-close"),this,this.settings.attributes,"btn-close"),N.addAttributes($(this.notificationEl).find("button.notification-close .icon"),this,this.settings.attributes,"icon-close"),this.setTooltip(),this},handleEvents:function(){var e=this,t=this;return $(this.notificationEl).off("click.".concat(vo)).on("click.".concat(vo),".notification-close",function(){t.destroy()}),$(window).on("resize.".concat(vo),function(){e.setTooltip()}),this},setTooltip:function(){var e=$(this.notificationEl).find(".notification-text")[0],t=$(this.notificationEl).data("tooltip");e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth?t?t.setContent(this.settings.message):$(this.notificationEl).tooltip({content:this.settings.message}):t&&t.destroy()},registerNotification:function(){Is.register(this)},close:function(e){e?Is.closeById(e):this.destroy()},closeLatest:function(){Is.closeLatest()},closeAll:function(){Is.closeAll()},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,Ud)),this.teardown().init()},teardown:function(){return this.element.off("click.".concat(vo),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),Is.unregister(this),this.teardown(),$.removeData(this.element[0],vo)}},$.fn.notification=function(e){return this.each(function(){$.data(this,vo,new _c(this,e))})};var Hs="progress",eh={value:0};function Gd(e,t){this.settings=N.mergeSettings(e,t,eh),this.element=$(e),this.init()}Gd.prototype={init:function(){var e=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",function(t){t.stopPropagation(),e.update()}),this},updateAria:function(e){var t=this;this.element.attr({role:"progressbar","aria-valuenow":e,"aria-valuemax":"100"});var n=this.element.parent();this.tooltipApi=this.tooltipApi||n.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(e,"%"),this.tooltipApi.visible&&e<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(n[0].setAttribute("title","".concat(e,"%")),n.tooltip(),this.tooltipApi=n.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,n.on("aftershow.progress",function(){t.tooltipApi.tooltip.addClass("process".concat(t.tooltipId))}).on("hide.progress mouseout.progress",function(){t.tooltipApi.tooltip.removeClass("process".concat(t.tooltipId))}))},unbind:function(){var e=this.element.parent();return e.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||e.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(e){var t=this.element[0].getAttribute("data-value")||0;/number|string/.test(at(e))&&(this.element[0].setAttribute("data-value",e),t=e),this.element[0].style.width="".concat(t,"%"),this.updateAria(t)},updated:function(e){return e!==void 0&&e.value&&(this.settings.value=e.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Hs)}},$.fn.progress=function(e){return this.each(function(){var t=$.data(this,Hs);t?t.updated(e):t=$.data(this,Hs,new Gd(this,e))})};var Yd="popdown",zc={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function bo(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,zc),this.init()}bo.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this;function t(n){return!!n&&(typeof n=="string"&&(n.match("#")&&n.indexOf("#")===0||(n="#".concat(n)),n=$(n)),!!n.length&&(e.popdown=n,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||ue.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),t(this.trigger.attr("data-popdown"))||t(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var e=this.trigger.attr("aria-expanded");return e&&e!==void 0||this.trigger.removeAttr("aria-expanded"),e==="true"&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var e=this,t=this;return this.trigger.on("click.popdown",function(){t.toggle()}).on("updated.popdown",function(){t.updated()}).on("clickoutside.popdown",function(n){t.settings.keepOpen||t.handleFocusOut(n)}),this.setFirstLastTab(),this.changeObserver=new MutationObserver(function(){e.setFocusableElems()}),this.changeObserver.observe(this.element[0],{childList:!0,subtree:!0}),this.setFocusableElems(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",function(){e.toggle()}),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||ue.isElement(this.settings.trigger)},get isFocused(){return this.hasFocus()},hasFocus:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=!1,n=document.activeElement;if(e instanceof HTMLElement||(e=void 0),this.trigger.is($(n))||this.popdown[0].contains(n)||e&&(e.classList.contains("overlay")||this.popdown[0].contains(e)))return!0;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(a){if(!t){var r,o,c,u=$(a);if((u.is($(n))||typeof a.contains=="function"&&a.contains(n))&&(t=!0),u.is("div.dropdown, div.multiselect")&&(t=(r=u.parent().prev("select").data("dropdown"))===null||r===void 0||r==null?void 0:r.isFocused),u.is(".lookup")){var p,m=u.data("lookup");!(t=m==null||m==null?void 0:m.isFocused)&&e&&(t=m==null||(p=m?.modal)===null||p===void 0||p==null?void 0:p.element[0].contains(e))}u.is(".btn-menu, .btn-actions")&&(t=(o=u.data("popupmenu"))===null||o===void 0||o==null?void 0:o.isFocused),u.is(".searchfield")&&(t=(c=u.data("searchfield"))===null||c===void 0||c==null?void 0:c.isFocused)}});var i=$(n).parents(".tooltip, .popover");return i.length&&i.each(function(a,r){var o=r.className.contains("popover")?"popover":"tooltip",c=$(r).data(o);c&&c.isFocused&&(t=!0)}),t},setFirstLastTab:function(){var e=this,t=this.settings;if(t.firstLastTab&&/function|boolean|object/.test(at(t.firstLastTab))){var n=null,i=null,a=null;if(at(t.firstLastTab)==="object"?(t.firstLastTab.first&&((n=t.firstLastTab.first instanceof jQuery?t.firstLastTab.first:$(t.firstLastTab.first)).first(),this.popdown[0].contains(n[0])||(n=null)),t.firstLastTab.last&&((i=t.firstLastTab.last instanceof jQuery?t.firstLastTab.last:$(t.firstLastTab.last)).first(),this.popdown[0].contains(i[0])||(i=null)),typeof t.firstLastTab.callback=="function"&&(a=t.firstLastTab.callback)):typeof t.firstLastTab=="function"?a=t.firstLastTab:(typeof t.firstLastTab=="boolean"||t.firstLastTab)&&(a=this.closeAndContinue),a){if(!n||!i||n&&!n.length||i&&!i.length){var r=this.popdown.find(`input:not(:disabled):not([tabindex^="-"]),
            select:not(:disabled):not([tabindex^="-"]),
            textarea:not(:disabled):not([tabindex^="-"]),
            [tabindex]:not(:disabled):not([tabindex^="-"])`);(!n||n&&!n.length)&&(n=r.first()),(!i||i&&!i.length)&&(i=r.last())}this.focusableElem={first:n,last:i},n.on("keydown.popdown",function(o){o.keyCode===9&&o.shiftKey&&(o.preventDefault(),a({e:o,self:e,first:n}))}),i.on("keydown.popdown",function(o){o.keyCode!==9||o.shiftKey||(o.preventDefault(),a({e:o,self:e,last:i}))})}}},setFocusableElems:function(){var e=ue.focusableElems(this.popdown[0],["div.dropdown","div.multiselect",".lookup-wrapper > span.trigger"],["select","option"]);this.focusableElems=e,this.focusableElems.first=e[0],this.focusableElems.last=e[e.length-1]},closeAndContinue:function(e){var t=$(document).find(":focusable"),n=t.index(e.self.trigger);(n=e.e.shiftKey?n-1<0?-1:n-1:n+1>=t.length?-1:n+1)!==-1&&t.eq(n).focus(),e.self.close()},isOpen:function(){return this.trigger.attr("aria-expanded")==="true"},handleFocusOut:function(e){var t=this;t.focusableElems.includes(e.target)||t.hasFocus(e.target)?t.keyTarget=e.target:e.target.tagName==="BODY"&&t.keyTarget?delete t.keyTarget:t.close()},open:function(){if(!this.isAnimating){var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus&&(this.focusableElems?this.focusableElems.first:this.popdown.find(":focusable").first()).focus(),this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.addEventsTimer=new Gt({duration:30,timeoutCallback:function(){$("body").on("resize.popdown",function(t){e.handleFocusOut(t)}),$(document).on("click.popdown",function(){e.element.trigger("clickoutside.popdown")}),$(document).on("keydown.popdown",function(t){var n=$(t.target).parents(".popdown");switch(t.which||t.keyCode){case 27:n.length&&e.close();break;case 9:e.handleFocusOut(t)}}),e.isAnimating=!1}}),Hn.register(this.addEventsTimer)}},close:function(){if(!this.isAnimating){this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.keyTarget&&delete this.keyTarget;var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusout.popdown keydown.popdown"),this.closeTimer&&(this.closeTimer.destroy(!0),delete this.closeTimer),this.closeTimer=new Gt({duration:30,timeoutCallback:function(){e.popdown[0].style.display="none",e.isAnimating=!1}}),Hn.register(this.closeTimer)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var e={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},t=window.innerHeight+$(document).scrollTop(),n=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(e.offset=this.scrollparent.offset(),e.scrollDistance.top=this.scrollparent.scrollTop(),e.scrollDistance.left=this.scrollparent.scrollLeft(),t-=e.offset.top+e.scrollDistance.top,n-=e.offset.left+e.scrollDistance.left);var i,a=!1,r=!1,o=this.trigger,c=o.offset(),u=0,p=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(c.left,"px"),this.popdown[0].style.top="".concat(c.top+o.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(o.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(i=this.popdown.offset()).left<0&&(a=!0,u=0-i.left);var m=i.left+this.popdown.outerWidth(!0);if(m>n&&(a=!0,u=m-n+(L.isRTL()?20:0)),a){this.popdown[0].style.left="".concat(i.left+-1*u,"px");var v=this.popdown[0].getBoundingClientRect(),w=o[0].getBoundingClientRect(),C=v.right-w.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(C,"px"),i=this.popdown.offset()}i.top<0&&(r=!0,p=0-i.top);var A=i.top+this.popdown.outerHeight(!0);A>t&&(r=!0,p=A-t),r&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(i.top+-1*p,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*p,"px"),i=this.popdown.offset()),(i.top<0||i.top+this.popdown.outerHeight(!0)>t)&&(this.popdown[0].style.top=0,A=(i=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(A-t),"px"))},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger&&this.trigger.off("updated.popdown click.popdown focus.popdown clickoutside.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.focusableElem&&this.focusableElem.first instanceof jQuery&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.focusableElems&&this.focusableElems.first instanceof jQuery&&(this.focusableElems.first.off("keydown.popdown"),this.focusableElems.last.off("keydown.popdown"),delete this.focusableElems),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Yd)}},$.fn.popdown=function(e){return this.each(function(){var t=$.data(this,Yd);t?t.updated(e):t=$.data(this,Yd,new bo(this,e))})};var yo="rating",th={};function nh(e,t){this.settings=N.mergeSettings(e,t,th),this.element=$(e),this.init()}nh.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.enable()},handleEvents:function(){for(var e=this,t=$("input",this.element),n=function(r){var o=$(t[r]),c=$(t[r+1]),u=function(p){return p.is(".is-filled")||p.is(".is-half")};o.on("click.".concat(yo),function(){e.element.is(".is-readonly")||e.val(u(o)&&!u(c)?r:r+1)})},i=0,a=t.length;i<a;i++)n(i)},fillStar:function(e,t){$(e).addClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-filled")},emptyStar:function(e,t){$(e).removeClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-outlined")},halfStar:function(e,t){$(e).addClass("is-half").removeClass("is-filled").next(t).find("svg").changeIcon("star-half")},val:function(e){if(arguments.length===0||e===""||isNaN(e)||rs.sign(e)===-1)return this.currentValue;this.currentValue=parseFloat(e,10);for(var t=Math.floor(this.currentValue),n=0,i=this.allInputs.length;n<i;n++){var a=$(this.allInputs[n]),r=a.parent().is(".inline")?"svg":"label";e%1!=0&&t===n?this.halfStar(a,r):n<e?this.fillStar(a,r):this.emptyStar(a,r),n+1===t&&a.prop("checked",!0)}return t<=0&&e>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var e=$(this.element);e.addClass("is-readonly"),e.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("click.".concat(yo)),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,th)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],yo)}},$.fn.rating=function(e){return this.each(function(){var t=$.data(this,yo);t?t.updated(e):t=$.data(this,yo,new nh(this,e))})};var Fc="signin",wo={};function ih(e,t){this.settings=N.mergeSettings(e,t,wo),this.element=$(e),this.init()}ih.prototype={init:function(){this.handleKeys()},isCapslock:function(e){var t=!1,n=!1;return(e=e||window.event).which?t=e.which:e.keyCode&&(t=e.keyCode),e.shiftKey?n=e.shiftKey:e.modifiers&&(n=!!(4&e.modifiers)),!!(t>=97&&t<=122&&n)||t>=65&&t<=90&&!n},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,wo)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Fc)},handleKeys:function(){var e=this,t=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',function(n){var i=$(this),a=i.parent(".field"),r=$(".icon-capslock",a);e.isCapslock(n)&&!i.hasClass("error")?r.length||(a.append(t),$("body").toast({audibleOnly:!0,message:L.translate("CapsLockOn")})):r.remove()}).on("blur.signin change.signin",'[type="password"]',function(){var n=$(this),i=n.closest(".field"),a=$(".icon-capslock",i);setTimeout(function(){a&&a.length&&(n.hasClass("error")?a.remove():i.append(t))},150)})}},$.fn.signin=function(e){return this.each(function(){var t=$.data(this,Fc);t?t.updated(e):t=$.data(this,Fc,new ih(this,e))})};var Hc="slider",Mp={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,tooltipPosition:"top",persistTooltip:!1,showTooltipOnLoad:!1,sliderBox:!1,attributes:null};function Kd(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Mp),this.init()}function qc(e){return e%1==0}function xo(e,t){return t&&!isNaN(t)&&t!==0||(t=1),Math.round(e/t)*t}function Vc(e,t){var n=e[0],i=e[1],a=t[0],r=t[1];return Math.sqrt(Math.pow(a-n,2)+Math.pow(r-i,2))}Kd.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var e,t=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=this.element.attr("value")!==void 0?this.element.attr("value"):this.settings.value,this.settings.min=this.element.attr("min")!==void 0?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=this.element.attr("max")!==void 0?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=this.element.attr("data-range")!==void 0?this.element.attr("data-range")==="true":this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),this.settings.value===""&&(this.settings.value=this.settings.min),this.settings.step===1&&(this.settings.step=void 0),this.element.attr("data-ticks")!==void 0){try{e=JSON.parse(t.element.attr("data-ticks"))}catch{e=[]}$.isArray(e)&&(this.settings.ticks=e)}var n=this.element.attr("data-tooltip-persist")==="true"||this.element.attr("data-tooltip-persist")===!0;if(this.settings.persistTooltip=this.element.attr("data-tooltip-persist")!==void 0?n:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,this.element.attr("data-tooltip-content")!==void 0)try{t.settings.tooltip=JSON.parse(t.element.attr("data-tooltip-content"))}catch{t.settings.tooltip=["",""]}if(typeof this.settings.tooltip=="string")if(this.settings.tooltip.indexOf(",")===-1)this.settings.tooltip=[this.settings.tooltip,""];else{var i=this.settings.tooltip.split(",");this.settings.tooltip=[i[0]],this.settings.tooltip.push(i[1]?i[1]:"")}this.settings.tooltip&&this.settings.tooltip.length===1&&this.settings.tooltip.push(""),this.ticks=[];var a={value:this.settings.min,description:t.getModifiedTextValue(this.settings.min)},r={value:this.settings.max,description:t.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var o=t.settings.ticks||[];if($.isArray(o)&&o.length>0){var c=o.filter(function(w){return w.value===t.settings.min}),u=o.filter(function(w){return w.value===t.settings.max});c.length>0&&(a.description=c[0].description,a.color=c[0].color,o=$.grep(o,function(w){return w!==c[0]})),u.length>0&&(r.description=u[0].description,r.color=u[0].color,o=$.grep(o,function(w){return w!==u[0]}))}t.ticks.push(a);for(var p=0;p<o.length;p++){var m={};o[p].value!==void 0&&(m.value=o[p].value,m.description=o[p].description!==void 0?o[p].description:"",m.color=o[p].color,t.ticks.push(m))}t.ticks.push(r)}else this.ticks.push(a,r);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if(typeof this.settings.value=="number")this.settings.value=[this.settings.value];else if(this.settings.value.indexOf(",")===-1)this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var v=this.settings.value.split(",");v[0]=isNaN(v[0])?this.settings.min:parseInt(v[0],10),v[1]=isNaN(v[1])?this.settings.max:parseInt(v[1],10),this.settings.value=v}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var e=this,t=!1;if(e.element[0].tagName!=="INPUT")throw new Error('Element with ID "'.concat(e.element.id,`" cannot invoke a slider;  it's not an Input element.`));e.originalElement={type:e.element.attr("type")},e.element.attr("type","hidden"),e.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(e.element.attr("id"),"-slider")).insertAfter(e.element),e.hitarea=$('<div class="slider-hit-area"></div>').appendTo(e.wrapper),e.range=$('<div class="slider-range"></div>').appendTo(e.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),t=!0),this.isRtlHorizontal=L.isRTL()&&!t,this.isRtlVertical=L.isRTL()&&t;var n=this.element.attr("style");n&&(n.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,n=n.replace("min-height","")),n.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),n.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,n=n.replace("min-width","")),n.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),e.handles=[];var i=e.element.prev("label").text(),a=$('<div class="slider-handle'.concat(e.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(e.settings.range?L.translate("SliderMinimumHandle"):L.translate("SliderHandle")," ").concat(i));if(e.handles.push(a),e.settings.range){var r=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(L.translate("SliderMaximumHandle")," ").concat(i));e.handles.push(r)}$.each(e.handles,function(p,m){m.attr({role:"slider","aria-orientation":t?"vertical":"horizontal","aria-valuemin":e.settings.min,"aria-valuemax":e.settings.max}).hideFocus(),m.appendTo(e.wrapper)}),e.ticks.forEach(function(p){(function(m){var v=e.isRtlHorizontal?100-e.convertValueToPercentage(m.value):e.convertValueToPercentage(m.value),w="calc(".concat(v,"% - 4px)");m.element=$('<div class="tick" data-value="'.concat(m.value,'"></div>')),m.label=$('<span class="label">'.concat(m.description,"</span>")),m.element[0].style[t?"bottom":"left"]=w,m.element.append(m.label),e.wrapper.append(m.element),t||(m.label[0].style.left="".concat(-(m.label.outerWidth()/2-m.element.width()/2),"px"))})(p)}),this.settings.sliderBox&&(e.wrapper.addClass("has-slider-box"),$(`<input type="text" class="slider-box" aria-required="true" data-mask data-options="{ 'pattern' : '###' }" ></input>`).insertAfter(e.wrapper)),e.value(e.settings.value),e.updateRange(),$.each(e.handles,function(p,m){e.settings.tooltip&&(m.tooltip({content:function(){return"".concat(e.getModifiedTextValue(Math.floor(e.value()[p])))},placement:t?"right":e.settings.tooltipPosition,trigger:"focus",keepOpen:e.settings.persistTooltip}),m.removeAttr("aria-describedby"))}),this.element.prop("readonly")===!0?this.readonly():this.element.prop("disabled")===!0&&this.disable(),N.addAttributes(this.element,this,this.settings.attributes,"",!0),N.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),N.addAttributes(this.hitarea,this,this.settings.attributes,"hitarea",!0),N.addAttributes(this.range,this,this.settings.attributes,"range",!0),N.addAttributes.apply(N,Nt(this.handles).concat([this,this.settings.attributes,"handle",!0]));for(var o=0,c=this.ticks.length;o<c;o++){var u=$(this.ticks[o].element);N.addAttributes(u,this,this.settings.attributes,"tick-".concat(o+1))}return this.settings.showTooltipOnLoad&&setTimeout(function(){$.each(e.handles,function(p,m){m.data("tooltip").show()})}),e},handleRangeClick:function(e){if(e.preventDefault(),!this.isDisabled()&&!this.isDragging){var t=this,n=this.wrapper.hasClass("vertical"),i=e.originalEvent.type!=="click"?e.originalEvent.changedTouches[0].pageX:e.pageX,a=e.originalEvent.type!=="click"?e.originalEvent.changedTouches[0].pageY:e.pageY,r=i-t.wrapper.offset().left-$(document).scrollLeft(),o=a-t.wrapper.offset().top-$(document).scrollTop(),c=[r,o],u=[t.handles[0].offset().left+t.handles[0].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[0].offset().top+t.handles[0].height()/2-t.wrapper.offset().top-$(document).scrollTop()],p=t.value(),m=Vc(c,u),v=p[0],w=t.handles[0];w.addClass("hide-focus");var C=function(){if(n){var M=t.wrapper.height();return(M-o)/M*100}return r/t.wrapper.width()*100}(),A=t.convertPercentageToValue(C);t.handles[1]&&(m>Vc(c,[t.handles[1].offset().left+t.handles[1].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[1].offset().top+t.handles[1].height()/2-t.wrapper.offset().top-$(document).scrollTop()])?(t.value([void 0,A]),w=t.handles[1],v=p[1]):t.value([A])),t.checkHandleDifference(w,v,A);var S=t.settings.step?t.settings.step:0;A<v?t.decreaseValue(e,w,A,S):t.increaseValue(e,w,A,S),t.settings.tooltip||w.focus()}},activateHandle:function(e){e.addClass("is-active")},deactivateHandle:function(e){e.removeClass("is-active")},enableHandleDrag:function(e){if(!this.isDisabled()){var t=this,n={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};e.drag(n).on("drag.slider touchmove.slider",function(i,a){(function(r,o,c){if(!t.isDisabled()){var u=function(){var v,w;if(r.type==="touchmove"){var C=r.originalEvent.changedTouches[0].pageX,A=r.originalEvent.changedTouches[0].pageY;v=C-t.wrapper.offset().left-$(document).scrollLeft(),w=A-t.wrapper.offset().top-$(document).scrollTop()}else v=c.left,w=c.top;if(t.isVertical()){var S=t.wrapper.height()-o.outerHeight();return(S-(w=Math.min(Math.max(w,0),S)))/S*100}var M=t.wrapper.width()-o.outerWidth();return(v=Math.min(Math.max(v,0),M))/M*100}(),p=t.convertPercentageToValue(u);if(t.settings.range){var m=t.value();o.hasClass("higher")&&p<=m[0]&&(p=m[0]),o.hasClass("lower")&&p>=m[1]&&(p=m[1])}t.settings.step&&(p=xo(p,t.settings.step)),r.defaultPrevented||(t.value(o.hasClass("higher")?[void 0,p]:[p]),t.updateRange(),t.updateTooltip(o),t.element.trigger("sliding",o,p))}})(i,$(i.currentTarget),a),t.isDragging=!0}).on("dragstart touchstart",function(){$(this).addClass("is-dragging"),t.range.addClass("is-dragging"),t.element.trigger("slidestart",e)}).on("dragend touchend",function(i){t.settings.step||(t.value($(i.currentTarget).hasClass("higher")?[void 0,xo(t._value[1],t.settings.step)]:[xo(t._value[0],t.settings.step)]),t.updateRange(),t.updateTooltip($(i.currentTarget))),$(this).removeClass("is-dragging"),t.range.removeClass("is-dragging"),t.element.trigger("slidestop",e),t.element.trigger("change",{element:t.element,value:t._value}),setTimeout(function(){t.isDragging=!1},0)})}},disableHandleDrag:function(e){e.off("drag.slider dragstart dragend touchmove.slider touchstart touchend"),this.range.removeClass("is-dragging"),e.removeClass("is-dragging");var t=e.data("drag");t&&t.destroy()},bindInputSliderEvent:function(e,t){var n=this;if(this.settings.sliderBox){var i=e.parent().siblings(".slider-box");i.on("keyup.slider".concat(t),function(a){if(a.keyCode===13){var r=$(a.currentTarget).val();n.value(r),n.updateRange(),n.updateTooltip(e)}}),i.on("blur.slider".concat(t),function(a){var r=$(a.currentTarget).val();n.value(r),n.updateRange(),n.updateTooltip(e)})}},convertValueToPercentage:function(e){return(e-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(e){var t=e/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-t+this.settings.min:t},getIncrement:function(){var e=.1*(this.settings.max-this.settings.min);return this.settings.step!==void 0&&e<=this.settings.step&&(e=this.settings.step),e},handleKeys:function(e,t){if(!t.isDisabled()){var n=e.which,i=$(e.currentTarget);switch(i.removeClass("hide-focus"),n){case 33:t.increaseValue(e,i,void 0,this.getIncrement());break;case 34:t.decreaseValue(e,i,void 0,this.getIncrement());break;case 35:t.increaseValue(e,i,this.settings.max);break;case 36:t.decreaseValue(e,i,this.settings.min);break;case 38:case 39:t.isRtlHorizontal&&n===39?t.decreaseValue(e,i):t.increaseValue(e,i);break;case 37:case 40:t.isRtlHorizontal&&n===37?t.increaseValue(e,i):t.decreaseValue(e,i)}}},increaseValue:function(e,t,n,i){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var a,r,o,c=this.value().slice(0),u=i!==void 0?i:this.settings.step!==void 0?this.settings.step:1;if(t.hasClass("higher"))o=(r=(a=n!==void 0?n:c[1])+(u=qc(a)?u:isNaN(a%u)?0:a%u)<this.settings.max?a+u:this.settings.max)%u?r:xo(r,u),this.value([void 0,o]);else{a=n!==void 0?n:c[0];var p=c[1]===void 0?this.settings.max:c[1];o=(r=a+(u=qc(a)?u:isNaN(a%u)?0:u-a%u)<p?a+u:p)%u?r:xo(r,u),this.value([o])}this.checkHandleDifference(t,a,o),this.updateRange(),this.updateTooltip(t)},decreaseValue:function(e,t,n,i){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var a,r,o,c=this.value(),u=i!==void 0?i:this.settings.step!==void 0?this.settings.step:1;if(t.hasClass("higher")){a=n!==void 0?n:c[1];var p=c[0]===void 0?this.settings.min:c[0];o=(r=a-(u=qc(a)?u:isNaN(a%u)?0:u-a%u)>p?a-u:p)%u?r:xo(r,u),this.value([void 0,o])}else o=(r=(a=n!==void 0?n:c[0])-(u=qc(a)?u:isNaN(a%u)?0:a%u)>this.settings.min?a-u:this.settings.min)%u?r:xo(r,u),this.value([o]);this.checkHandleDifference(t,a,o),this.updateRange(),this.updateTooltip(t)},updateRange:function(){for(var e=this,t=this.value(),n=[],i=this.getColorClosestToValue(),a=e.wrapper.hasClass("vertical"),r=0;r<this.ticks.length;r++)(this.settings.range?t[0]<this.ticks[r].value&&this.ticks[r].value<=t[1]:this.ticks[r].value<=t[0])?(this.ticks[r].element.addClass("complete"),i&&(this.ticks[r].element[0].style.backgroundColor=i,this.ticks[r].element.addClass("inherit"))):(this.ticks[r].element.removeClass("complete"),i&&(this.ticks[r].element[0].style.backgroundColor="",this.ticks[r].element.removeClass("inherit")));i&&(this.range[0].style.backgroundColor=i,$.each(this.handles,function(p,m){m[0].style.backgroundColor=i,m[0].style.borderColor=i})),$.each(e.ticks,function(p){e.ticks[p].label[0].style.color=""}),n[0]=this.convertValueToPercentage(t[0]),t[1]!==void 0&&(n[1]=this.convertValueToPercentage(t[1]));var o=a?["bottom","top"]:e.isRtlHorizontal?["right","left"]:["left","right"],c={};function u(p,m){var v=a?o[1]:o[0],w=a?100-m:m;p.css(v,"calc(".concat(w,"% - ").concat(p.outerWidth()/2,"px)"))}this.handles[1]?(c[o[0]]="".concat(n[0],"%"),c[o[1]]="".concat(100-n[1],"%")):(c[o[0]]="0%",c[o[1]]="".concat(100-n[0],"%")),this.range.css(c),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout(function(){e.handles[0].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),u(this.handles[0],n[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout(function(){e.handles[1].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),u(this.handles[1],n[1]),this.handles[0].attr("aria-valuemax",t[1]),this.handles[1].attr("aria-valuemin",t[0])),this.settings.sliderBox&&e.wrapper.siblings(".slider-box").val(Math.trunc(n[0]))},checkHandleDifference:function(e,t,n){var i=this.convertValueToPercentage(t),a=this.convertValueToPercentage(n);Math.abs(i-a)>3&&(e.addClass("is-animated"),this.range.addClass("is-animated"))},updateTooltip:function(e){if(this.settings.tooltip){if(!e){var t,n=this.handles[0].data("tooltip");return this.handles[1]&&(t=this.handles[1].data("tooltip")),n.hide(),void(t&&t.hide())}var i=e.data("tooltip");e.hasClass("is-animated")?(i.hide(),e.one("slide-animation-end",function(){a()})):a()}function a(){i.position(),e.focus()}},getColorClosestToValue:function(){for(var e,t,n={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[ft.currentTheme.id.split("-")[2]],i=this.value()[0],a=0;a<this.ticks.length;a++)(t=this.ticks[a].color)&&i>=this.ticks[a].value&&(e=t,e=t.indexOf("#")>-1?t:n[t]||n.default);return e},value:function(e,t){var n=this;return e===void 0&&t===void 0||(e&&$.isArray(e)&&(e[1]===void 0||isNaN(e[1])||(t=e[1]),isNaN(e[0])||(e=e[0])),(e===void 0||isNaN(e))&&$.isArray(n._value)&&n._value[0]!==void 0&&(e=n._value[0]),(t===void 0||isNaN(t))&&$.isArray(n._value)&&n._value[1]!==void 0&&(t=n._value[1]),n._value=[e,t],n.element.val(t!==void 0?n._value:n._value[0]),$.each(n.handles,function(i,a){var r=n._value[i],o=n.getModifiedTextValue(r);$.each(n.ticks,function(c,u){u.value===r&&(o=u.description)}),a.attr({"aria-valuenow":n._value[i],"aria-valuetext":o})}),this.element.next().find(".slider-handle.is-dragging").length===0&&n.element.trigger("change",{element:n.element,value:n._value})),n._value},getModifiedTextValue:function(e){return this.settings.tooltip?this.settings.tooltip[0]+e+this.settings.tooltip[1]:e},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var e=this;return $.each(this.handles,function(t,n){e.enableHandleDrag(n)}),this.wrapper.find("[tabindex]").attr("tabindex","0"),this},disable:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),setTimeout(function(){e.wrapper.addClass("is-disabled");var t=e;$.each(e.handles,function(n,i){t.disableHandleDrag(i)})}),this.wrapper.find("[tabindex]").attr("tabindex","-1"),this},readonly:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,function(t,n){e.disableHandleDrag(n)}),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(e,t){var n=this.value();this.checkHandleDifference(this.handles[0],n[0],e),this.handles[1]&&this.checkHandleDifference(this.handles[1],n[1],t);var i=this.value(e,t);return this.updateRange(),this.updateTooltip(),i},refresh:function(e,t){return Qs(this.setValue,this.refresh).apply(this,[e,t])},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var e=this;return $.each(e.handles,function(t,n){e.disableHandleDrag(n),n.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")}),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",_e.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Hc)},bindEvents:function(){var e=this;return $.each(e.handles,function(t,n){n.on("mousedown.slider",function(){e.isDisabled()||$(this).focus()}).on("click.slider",function(i){i.preventDefault()}).on("keydown.slider",function(i){e.activateHandle(n),e.handleKeys(i,e)}).on("keyup.slider blur.slider",function(){e.deactivateHandle(n)}),e.enableHandleDrag(n),e.bindInputSliderEvent(n,t)}),e.wrapper.on("click.slider touchend.slider touchcancel.slider",function(t){e.handleRangeClick(t)}),e.element.on("updated.slider",function(){e.updated()}),e}},$.fn.slider=function(e){return this.each(function(){var t=$.data(this,Hc);t?t.updated(e):t=$.data(this,Hc,new Kd(this,e))})};var Xd="spinbox",Lp={autocorrectOnBlur:!0,min:-2147483647,max:2147483647,step:null,maskOptions:null,attributes:null};function ql(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Lp),this.init()}ql.prototype={get isTouch(){return Be.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var e=this.element[0].style;return e.width&&(this.element.parent()[0].style.width="".concat(parseInt(e.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var e=this.checkForNumeric(this.element.val());return this.element.val(e),this.element.attr("data-trackdirty")&&this.element.data("original",e),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.step=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.min=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var e=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped){var t='<span class="spinbox-wrapper"></span>';if(this.element.is(".field-options")){var n=this.element.closest(".field").find(".btn-actions");this.element.add(n).add(n.next(".popupmenu")).wrapAll(t)}else this.element.wrap(t)}this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var i=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach(function(u){if(i.indexOf(u)>-1){var p=u.replace("input","spinbox");e.isWrapped?e.element.parent(".spinbox-wrapper").addClass(p):e.isInlineLabel&&e.inlineLabel.addClass(p)}});var a=this.element.attr("min"),r=this.element.attr("max"),o={role:"spinbutton"};a||r||(r="9999999"),o.min=a||0,o.max=r,this.element.data("mask")&&at(this.element.data("mask"))==="object"&&this.element.data("mask").destroy(),o["aria-valuemin"]=a||0,o["aria-valuemax"]=r||0,this.element.attr(o),this.updateAria(this.element.val());var c={process:"number",patternOptions:{allowDecimal:!1,allowThousandsSeparator:!1,allowNegative:Math.min(this.settings.min,this.settings.max)<0,decimalLimit:0,integerLimit:String(this.settings.max).length}};return this.element.mask(this.settings.maskOptions||c),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),N.addAttributes(this.element.parent(),this,this.settings.attributes,"wrapper",!0),N.addAttributes(this.element,this,this.settings.attributes,"spinbox",!0),N.addAttributes(this.buttons.down,this,this.settings.attributes,"btn-down",!0),N.addAttributes(this.buttons.up,this,this.settings.attributes,"btn-up",!0),this},enableLongPress:function(e,t){t.addButtonStyle(e),t.longPressInterval=setInterval(function(){$(e.currentTarget).is(":hover")&&t.handleClick(e)},250)},disableLongPress:function(e,t){t.removeButtonStyle(e),clearInterval(t.longPressInterval),t.longPressInterval=null},handleClick:function(e){e.preventDefault(),this.isDisabled()||e.which!==1||this.isReadonly()||($(e.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(e,t){var n=e.which;if(n!==13){if($.inArray(n,[37,38,39,40])!==-1&&!this.isReadonly())switch(n){case 38:t.addButtonStyle(t.buttons.up),t.increaseValue();break;case 40:t.addButtonStyle(t.buttons.down),t.decreaseValue()}}else t.correctValue()},handleKeyup:function(e,t){if(!t.isDisabled()&&!this.isReadonly()){var n=e.which;switch(n){case 38:case 39:L.isRTL()&&n===39?t.removeButtonStyle(t.buttons.down):t.removeButtonStyle(t.buttons.up);break;case 37:case 40:L.isRTL()&&n===39?t.removeButtonStyle(t.buttons.up):t.removeButtonStyle(t.buttons.down)}t.updateAria(t.element.val())}},handleAfterPaste:function(e){var t=Number(e.element.attr("min")),n=Number(e.element.attr("max")),i=Number(e.element.val());i<t&&(i=t),i>n&&(i=n),e.updateVal(i)},correctValue:function(e){var t=Number(this.element.val()),n=parseInt(this.element.attr("min"),10),i=parseInt(this.element.attr("max"),10);return t<n?(e&&e.preventDefault(),this.updateVal(n)):t>i?(e&&e.preventDefault(),this.updateVal(i)):void 0},increaseValue:function(){var e=this.element.attr("max"),t=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return e&&t>e?this.updateVal(e):this.updateVal(t)},decreaseValue:function(){var e=this.element.attr("min"),t=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return e&&t<e?this.updateVal(e):this.updateVal(t)},updateVal:function(e){this.element.val(e).trigger("change"),this.updateAria(e)},checkForNumeric:function(e){return e===""?e:$.isNumeric(e)?Number(e):(e=parseInt(e,10),$.isNumeric(e)?Number(e):0)},updateAria:function(e){var t=this.element.attr("min"),n=this.element.attr("max");e=this.checkForNumeric(e),this.element[0].setAttribute("aria-valuenow",e||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,e!==""&&n&&e>=n?"disable":"enable"),this.setIsDisabled(this.buttons.down,e!==""&&t&&e<=t?"disable":"enable")},addButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.addClass("is-active")}},removeButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){var e=this;this.element.prop("disabled",!0),this.element.attr("disabled","disabled"),this.element.parent(".spinbox-wrapper").addClass("is-disabled"),setTimeout(function(){e.element.parent(".spinbox-wrapper").addClass("is-disabled")})},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(e,t){e[(t=t===void 0||!(!t||t==="enable"))?"addClass":"removeClass"]("is-disabled"),e[0].disabled=t},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this},destroy:function(){var e=this.element.data("mask");for(var t in e&&typeof e.destroy=="function"&&e.destroy(),this.buttons){var n=$(t).data("button");n&&n.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.up.add(this.buttons.down).off("click.spinbox-control"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],Xd)},bindEvents:function(){var e=this,t=!1;this.element.on("focus.spinbox",function(){e.element.addClass("no-hover"),e.element.parent(".spinbox-wrapper").addClass("is-focused"),e.element.removeClass("is-hovered")}).on("blur.spinbox",function(){e.element.removeClass("no-hover"),e.element.parent(".spinbox-wrapper").removeClass("is-focused"),e.element.removeClass("is-hovered"),e.settings.autocorrectOnBlur&&e.correctValue()}).on("keydown.spinbox",function(i){e.handleKeyDown(i,e)}).on("keyup.spinbox",function(i){e.handleKeyup(i,e)}).on("mouseover.spinbox",function(){e.element.parent(".spinbox-wrapper").hasClass("is-focused")||e.element.addClass("is-hovered")}).on("mouseleave.spinbox",function(){e.element.removeClass("is-hovered")}).on("afterpaste.mask",function(){e.handleAfterPaste(e)});var n=this.buttons.up.add(this.buttons.down[0]);return n.on("touchstart.spinbox mousedown.spinbox",function(i){if(i.which===1){if(t||e.handleClick(i),e.isTouch)return;t=!0,e.enableLongPress(i,e),$(document).one("mouseup",function(){e.disableLongPress(i,e),t=!1,e.element.focus()})}}),n.on("click.spinbox-control",function(){n.hasClass("is-disabled")&&$("svg.ripple-effect").remove()}),this}},$.fn.spinbox=function(e){return this.each(function(){var t=$.data(this,Xd);t?t.updated(e):t=$.data(this,Xd,new ql(this,e))})};var Co="splitter",jc={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"},attributes:null};function Br(e,t){this.settings=N.mergeSettings(e,t,jc),this.element=$(e),this.init()}Br.prototype={init:function(){return this.build().handleEvents()},build:function(){var e,t=this,n=this,i=this.settings,a=this.element,r=a.parent(),o=i.axis==="x"?"left":"top",c=r.is(".content")?r.parent():r,u=a.find(".splitter-drag-handle"),p=299,m=r.width();this.isRTL=L.isRTL(),setTimeout(function(){e=r.height()},0),this.docBody=$("body"),this.isRightSide=a.is(".splitter-right")||i.axis==="x"&&i.side==="right",this.isHorizontal=a.is(".splitter-horizontal")||i.axis==="y",i.uniqueId=N.uniqueId(this.element,"splitter"),u.length||(u=$('<div class="splitter-drag-handle"><span class="audible">'.concat(L.translate("SplitterDragHandle"),"</span></div>"))).appendTo(a);var v=function(S){if($(S.target).is(".splitter-btn"))u[0].style.opacity="0";else{u[0].style.opacity="";var M,I,z,V=a[0].getBoundingClientRect();if(t.isHorizontal)return(M=S.clientX-V.left-16)<16&&(M=0),z=M>(I=V.width-32)?I:M,void(u[0].style.left="".concat(z,"px"));(M=S.clientY-V.top-16)<16&&(M=0),z=M>(I=V.height-32)?I:M,u[0].style.top="".concat(z,"px")}};a.off("mouseenter.splitter").on("mouseenter.splitter",function(S){v(S)}).off("mousemove.splitter").on("mousemove.splitter",function(S){v(S)});var w=function(){var S=0,M=!1,I=function(z,V,U){n.splitTo(z,e),$(V)[U?"addClass":"removeClass"]("rotate")};t.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><span class="audible">'.concat(L.translate("SplitterCollapseButton"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>')),t.splitterCollapseButton.appendTo(a),a[0].offsetLeft>10&&t.splitterCollapseButton.addClass("rotate"),t.splitterCollapseButton.click(function(){if(!a.is("is-dragging")){if(n.isRTL&&!n.isHorizontal||!n.isRightSide&&i.side==="left"||n.isRightSide&&i.side==="right"){var z=n.getContainerWidth()-a.outerWidth(),V=z;M||(S=z-S,p=z-p);var U=a[0].offsetLeft;n.isRightSide&&i.side==="right"&&(U=a[0].offsetLeft+1),S>=V?U>=z?I(p,this,!0):(S=U,I(V,this,!1)):U<z?(S=U,I(V,this,!1)):(I(S,this,!0),S=V)}else{var G=a[0].offsetLeft;S<=0?G<=10?I(p,this,!0):(S=G,I(0,this,!1)):G>10?(S=G,I(0,this,!1)):(I(S,this,!0),S=0)}M=!0}})};if(this.isRightSide){var C=c.prev();C.is(".main")?(this.leftSide=C,m=c.parent().outerWidth()-m):(this.leftSide=c,a.addClass("splitter-right")),c.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),i.collapseButton&&w(),this.setSplitterContainer(c.parent())}else this.isHorizontal?(this.topPanel=a.prev(),m=this.topPanel.height(),r.addClass("splitter-container is-horizontal"),a.next().addClass("flex-grow-shrink"),a.addClass("splitter-horizontal")):(this.rightSide=c,this.leftSide=c.prev().parent(),c.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"),i.collapseButton&&w(),this.setSplitterContainer(c.parent()));if(this.isRTL&&!this.isHorizontal){var A=this.getContainerWidth();m=A>=m?A-m:m}return localStorage&&i.save&&!isNaN(parseInt(localStorage[i.uniqueId],10))&&(m=localStorage[i.uniqueId]),m=parseInt(m,10),this.isHorizontal?a[0].style.top="".concat(m,"px"):a[0].style.top=0,this.splitTo(m,e),m<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:i.axis,containment:i.containment||i.axis==="x"?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",function(){var S=c.parent().find("iframe");if(n.documentWidth=$(document).width(),S.length>0)for(var M=0,I=S.length;M<I;M++){var z=$(S[M]),V="".concat(parseInt(getComputedStyle(z.parent()[0]).width,10),"px"),U=$('<div class="overlay splitter-overlay"></div>');U.css("width",V),z.before(U)}}).on("dragend.splitter",function(S,M){c.parent().find(".splitter-overlay").remove();var I=a[0].getBoundingClientRect(),z=window.innerWidth-I.left,V=t.isRightSide&&t.settings.side==="right"||!t.isRightSide&&t.settings.side==="left";i.axis!=="y"&&I.left===0&&(c[0].style.width="0px",M[o]=10),i.collapseButton&&(M[o]<=10||V&&z<=21?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),i.resize==="end"&&n.splitTo(M[o],e),i.resize==="immediate"&&t.isRTL&&!t.isHorizontal&&setTimeout(function(){var U=parseInt(t.element.css("left"),10);n.splitTo(U,e)},0)}).on("drag.splitter",function(S,M){return!(M.left<=0)&&(i.resize==="immediate"&&n.splitTo(M[o],r.height()),!0)}),i.axis==="y"&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),N.addAttributes(this.element,this,this.settings.attributes,"",!0),N.addAttributes(this.element.find(".splitter-drag-handle"),this,this.settings.attributes,"handle",!0),N.addAttributes(this.element.find(".splitter-drag-handle svg.icon"),this,this.settings.attributes,"icon",!0),this},setSplitterContainer:function(e){this.container=this.element.closest(".splitter-container"),!this.container.length&&e&&e.length&&(e.addClass("splitter-container"),this.container=this.element.closest(".splitter-container"))},getContainerWidth:function(){var e;return((e=this.container)===null||e===void 0||e==null?void 0:e.outerWidth())||0},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(e,t,n){(t>n||t<0)&&(t=parseInt(n,10)/2),this.topPanel[0].style.height="".concat(t,"px")},resizeLeft:function(e,t){var n=this.isRTL?t:this.leftSide.outerWidth()-t;this.rightSide[0].style.width="".concat(n,"px"),e[0].style.left=""},resizeRight:function(e,t){var n=t,i=t-1;if(this.isRTL&&!this.isHorizontal){var a=this.getContainerWidth();n=a>=t?a-t:t,i=t}this.leftSide[0].style.width="".concat(n,"px"),e[0].style.left="".concat(i,"px")},splitTo:function(e,t){var n=this.settings,i=this.element;this.isRightSide?((!this.isRTL&&e>n.maxWidth.right||this.isRTL&&e<n.maxWidth.right)&&(e=n.maxWidth.right),this.resizeRight(i,e)):this.isHorizontal?this.resizeTop(i,e,t):((!this.isRTL&&e>n.maxWidth.left||this.isRTL&&e<n.maxWidth.left)&&(e=n.maxWidth.left),this.resizeLeft(i,e)),this.element.trigger("split",[e]),this.docBody.triggerHandler("resize",[this]),this.settings.save&&localStorage&&(localStorage[this.settings.uniqueId]=e),this.split=e,this.parentHeight=t},unbind:function(){return this.element.off("updated.".concat(Co)),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,jc)),this.unbind().init()},destroy:function(){return this.unbind(),$.removeData(this.element[0],Co),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Co),function(){e.updated()}).on("keydown.".concat(Co),function(t){t.which===32&&(e.toggleSelection(),t.preventDefault()),t.which===37&&e.splitTo(e.split-15,e.parentHeight),t.which===39&&e.splitTo(e.split+15,e.parentHeight)}),this}},$.fn.splitter=function(e){return this.each(function(){var t=$.data(this,Co);t?t.updated(e):t=$.data(this,Co,new Br(this,e))})};var Or="swaplist",Wc={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},keepInList:{available:!1,selected:!1,additional:!1},attributes:null,attributesOverride:!0,template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function Gi(e,t){this.settings=N.mergeSettings(e,t,Wc),this.element=$(e),this.init()}Gi.prototype={init:function(){var e=this,t=this.settings;t.draggable=$.extend(!0,Wc.draggable,t.draggable),this.isTouch=Be.features.touch,this.isAdditional=$("".concat(t.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout(function(){e.makeDraggable(),e.handleEvents(),e.initSelected(t.availableClass),e.initSelected(t.additionalClass)},0)},loadListview:function(){for(var e=this.settings,t=[{dataset:e.available,class:e.availableClass,draggable:e.draggable.available},{dataset:e.selected,class:e.selectedClass,draggable:e.draggable.selected},{dataset:e.additional,class:e.additionalClass,draggable:e.draggable.additional}],n=0,i=t.length;n<i;n++){var a=t[n],r=$("".concat(a.class," .listview"),this.element),o=r.data("listview"),c={dataset:a.dataset||[],selectable:"multiple",showCheckboxes:!1};(e.searchable===!0||e.searchable==="true")&&$("".concat(a.class," .searchfield"),this.element).length>0&&(c.searchable=!0),!a.dataset&&r.length&&$("li",r).length?r.listview(c):r.length&&(o&&o.destroy(),e.template.indexOf('data-id="{{id}}"')===-1&&(e.template=e.template.replace("<li",'<li data-id="{{id}}"')),c.template=e.template,c.dataset=a.dataset||[],c.dataset.forEach(function(u){/string|number/.test(at(u.id))&&u.id!==""||(u.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))}),c.dataset.length===0&&(c.forceToRenderOnEmptyDs=!0),c.attributesOverride=e.attributesOverride,c.attributes=this.getLvAutomationAttributes(a.class),r.listview(c)),a.draggable||$("ul",r).addClass("is-not-droppable")}},getLvAutomationAttributes:function(e){var t,n=this,i=this.settings;if(i.attributes&&typeof e=="string"&&e.length>1){var a="-swaplist-".concat(e.substring(1));if(Array.isArray(i.attributes))t=[],i.attributes.forEach(function(o){var c=typeof o.value=="function"?o.value(n):o.value;t.push({name:o.name,value:c+a})});else{var r=typeof i.attributes.value=="function"?i.attributes.value(this):i.attributes.value;t={name:i.attributes.name,value:r+a}}}return t},setElements:function(){var e=this,t=this.settings,n="";if(this.offset=null,this.containers=$("".concat(t.availableClass,",").concat(t.selectedClass,",").concat(t.additionalClass),this.element),this.actionButtons=$("".concat(t.availableBtn,",").concat(t.additionalBtn,",").concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.selectedButtons=$("".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.tabButtonsStr="".concat(t.availableBtn,", ").concat(t.additionalBtn,", ").concat(this.selectedButtons.length>1?t.selectedBtnRight:t.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},t.numOfSelectionsClass="num-of-selections",t.itemContentClass="swaplist-item-content",t.itemContentTempl=$('<div><p><span class="'.concat(t.numOfSelectionsClass,`">###</span>
      <span class="`).concat(t.numOfSelectionsClass,'-text">&nbsp;</span></p><div/>')),t.attributes){var i=[{btn:$("".concat(t.availableClass," ").concat(t.availableBtn),this.element),suffix:(t.availableClass||"").substring(1)},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnLeft),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-left")},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnRight),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-right")},{btn:$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element),suffix:(t.additionalClass||"").substring(1)}];i.forEach(function(a){a.suffix="swaplist-btn-".concat(a.suffix)}),i.forEach(function(a){return N.addAttributes(a.btn,e,t.attributes,a.suffix,t.attributesOverride)}),N.addAttributes(this.element,this,t.attributes,"swaplist",t.attributesOverride)}t.draggable.available||(n="".concat(t.availableClass," ").concat(t.availableBtn,",").concat(t.selectedBtnLeft),$(n,this.element).prop("disabled",!0)),t.draggable.selected||(n="".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),t.draggable.available||(n+=",".concat(t.additionalClass," ").concat(t.additionalBtn)),this.isAdditional&&t.draggable.additional||(n+=",".concat(t.availableClass," ").concat(t.availableBtn)),$(n,this.element).prop("disabled",!0),$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element).addClass("is-rotate")),t.draggable.additional||$("".concat(t.additionalClass," ").concat(t.additionalBtn,",").concat(t.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var e=this.settings,t=[e.availableClass,e.selectedClass,e.additionalClass],n=0,i=t.length;n<i;n++){var a=$("".concat(t[n]," .listview"),this.element);$("li",a).length||a.addClass("is-multiselect")}},initSelected:function(e){if((e=this.isjQuery(e)?e:$(e,this.element)).length){for(var t=$(".listview",e).data("listview"),n=$("li[selected]",e),i=0,a=n.length;i<a;i++){var r=$(n[i]);r.removeAttr("selected"),t.select(r)}this.moveElements(e,this.settings.selectedClass)}},moveElements:function(e,t){var n=this;if(t!==null){e=typeof e!="string"?e:$(e,this.element),t=typeof t!="string"?t:$(t,this.element);var i=$(".listview",e).data("listview");if(this.clearSelections(),this.selections.owner=e,this.selections.droptarget=t,this.isTouch){if(i.selectedItems)for(var a=0,r=i.selectedItems.length;a<r;a++)this.selections.items[a]=i.selectedItems[a].closest("li")}else this.selections.items=i.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(i),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var o=this.element.triggerHandler("beforeswap",[this.selections.move]);if(typeof o=="boolean"&&!o||typeof o=="string"&&o.toLowerCase()==="false")return;var c=$("ul",t),u=$("li",c).length,p=this.selections.items.length+u;if(this.selections.items)for(var m=this.getDataList(t),v=function(){var A=$(n.selections.items[w]);if(n.isKeepInList(t)&&m.some(function(M){return M.id===A.data().id}))A.remove();else{var S=n.isKeepInList(e)?A.clone():A;S.attr({"aria-posinset":u+w+1,"aria-setsize":p}).find("mark.highlight").contents().unwrap(),c.append(S)}},w=0,C=this.selections.items.length;w<C;w++)v();this.afterUpdate($(".listview",t).data("listview"))}}},getContainer:function(e){var t=this.settings;if(at(e[0])==="object"&&e[0].node){var n=e[0].node.closest(".card"),i="";return n.is(t.availableClass)?i=t.availableClass:n.is(t.selectedClass)?i=t.selectedClass:n.is(t.additionalClass)&&(i=t.additionalClass),{container:n,class:i}}return null},unselectElements:function(e){if(e.selectedItems)for(var t=0,n=e.selectedItems.length;t<n;t++)e.select($(e.selectedItems[t]));e&&e.element&&e.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},isMatchMediaSupports:function(){return window.matchMedia!==void 0||window.msMatchMedia!==void 0},viewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e["".concat(t,"Width")],height:e["".concat(t,"Height")]}},isMaxWidth:function(e){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(e,"px)")).matches||this.viewport().width<=e},makeDraggable:function(){var e=this,t=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=t.first().attr("data-swap-handle"),this.handle=!this.isTouch&&$(this.handle,t).length>0?this.handle:null,$(this.handle,t).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",function(){e.selections.isHandle=!0}).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",function(){e.selections.isHandle=!1}),this.targets=t.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",function(){return this.dragDrop&&this.dragDrop(),!1}).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(e,t,n){for(var i=!1,a=$(e),r=0,o=a.length;r<o;r++){var c=$(a[r]),u=c.offset();t<=u.left||t>=u.left+c.outerWidth()||n<=u.top||n>=u.top+c.outerHeight()||(i=c)}return i},draggTouchElement:function(e,t){var n=e.originalEvent.changedTouches[0];t[0].style.top="".concat(n.pageY-this.offset.y,"px"),t[0].style.left="".concat(n.pageX-this.offset.x,"px")},hasModifier:function(e){return e.ctrlKey||e.metaKey||e.shiftKey},addDropeffects:function(){if(this.targets)for(var e=0,t=this.targets.length;e<t;e++)$(this.targets[e]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var n=0,i=this.selections.items.length;n<i;n++)$(this.selections.items[n]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var e=0,t=this.selections.items.length;e<t;e++){var n=$(this.selections.items[e]);n.removeAttr("aria-grabbed".concat(n.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(e){e=this.isjQuery(e)?e:$(e,this.element);var t=$(".listview li",e),n=e.find(".listview").data("listview"),i=this.getDataList(e),a=!1;n&&n.filteredDataset&&(i=Nt(n.filteredDataset),a=!0);for(var r=0,o=t.length;r<o;r++){var c=$(t[r]),u=i[r];a&&(u.node=c,delete u._isFilteredOut),c.is(".is-selected")&&this.selections.itemsData.push(u)}},initDataset:function(){var e=this.settings,t=[{type:"available",dataset:e.available,class:e.availableClass},{type:"selected",dataset:e.selected,class:e.selectedClass},{type:"additional",dataset:e.additional,class:e.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var n=0,i=t.length;n<i;n++)for(var a=t[n],r=$("".concat(a.class," .listview li"),this.element),o=0,c=r.length;o<c;o++){var u=void 0,p=void 0,m=$(r[o]);a.dataset?delete(u=JSON.parse(JSON.stringify(a.dataset[o]))).selected:(u={text:$.trim($(".swaplist-item-content",m).text())},(p=m.attr("data-value"))&&(u.value=p)),this.dataset[a.type]&&(u.node=m,this.dataset[a.type].push(u))}},getDataList:function(e){var t=this.settings,n=this.dataset;return(e=this.isjQuery(e)?e:$(e,this.element)).is(t.additionalClass)?n.additional:e.is(t.selectedClass)?n.selected:e.is(t.availableClass)?n.available:[]},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},syncDataset:function(e,t){var n=this,i=$(".listview li",t),a=e.find(".listview").data("listview"),r=t.find(".listview").data("listview"),o=this.getDataList(e),c=this.getDataList(t),u=function(ie,me){if(ie&&me){var ke={owner:ie.getAttribute("data-id"),item:me.getAttribute("data-id")};return ke.owner!==void 0&&ke.item!==void 0&&ke.owner===ke.item}return!1};if(e.is(t)){for(var p=[],m=0,v=i.length;m<v;m++)for(var w=i[m],C=0,A=o.length;C<A;C++){var S=o[C];if(u(S.node[0],w)){p.push(S);break}}o.splice(0,o.length);for(var M=0,I=p.length;M<I;M++)o.push(p[M])}else for(var z=0,V=this.selections.items.length;z<V;z++)for(var U=this.selections.items[z],G=!0,J=0,te=i.length;J<te&&G;J++)if($(i[J]).data().id===U.data().id)for(var de=function(){var ie=o[H];if(u(ie.node[0],U[0]))return n.isKeepInList(t)&&c.some(function(me){return me.id===ie.id})||(c.push(ie),n.arrayIndexMove(c,c.length-1,J)),n.isKeepInList(e)||o.splice(H,1),G=!1,1},H=0,he=o.length;H<he&&!de();H++);a.updated({dataset:o}),r.updated({dataset:c}),this.makeDraggable()},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},isKeepInList:function(e){var t=this.settings;return e.is(t.availableClass)&&t.keepInList.available||e.is(t.selectedClass)&&t.keepInList.selected||e.is(t.additionalClass)&&t.keepInList.additional},updateAttributes:function(e){for(var t=$("li",e),n=0,i=t.length;n<i;n++)$(t[n]).attr({"aria-posinset":n+1,"aria-setsize":i})},afterUpdate:function(e){var t=this.selections.droptarget.find("li:focus").index(),n=".card.".concat(this.selections.droptarget[0].classList[1]," li");e&&(this.selections.placeholder&&(e.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(e),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach(function(i){i.show()}),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),t>=0&&this.element.find(n).eq(t).focus()},getItems:function(e){return e=this.isjQuery(e)?e:$(e,this.element),this.getDataList(e)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(e,t){var n=!1;if(!this.selections.isInSelection){if(e.selectedItems){for(var i=0,a=e.selectedItems.length;i<a;i++)if(t.is(e.selectedItems[i]))return n=!0,!1}n||(e.select(t),this.selections.isInSelection=!0)}return!0},updateDataset:function(e){for(var t=this.settings,n=[{type:"available",dataset:e.available,class:t.availableClass},{type:"selected",dataset:e.selected,class:t.selectedClass},{type:"additional",dataset:e.additional,class:t.additionalClass}],i=0,a=n.length;i<a;i++){var r=n[i],o=$("".concat(r.class," .listview"),this.element),c=o.data("listview");c&&(c.deselectItemsBetweenIndexes([0,$("li",o).length-1]),t[r.type]=r.dataset||[],c.loadData(t[r.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(t.availableClass),this.initSelected(t.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Wc)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Or)},handleEvents:function(){var e=this,t=e.settings,n=e.selections;e.actionButtons.off("click.swaplist").on("click.swaplist",function(){var i=$(this),a=i.closest(".card"),r=null;a.is(t.availableClass)?(r=t.draggable.selected?t.selectedClass:e.isAdditional&&t.draggable.additional?t.additionalClass:null,e.moveElements(t.availableClass,r)):a.is(t.additionalClass)?(r=t.draggable.selected?t.selectedClass:t.draggable.available?t.availableClass:null,e.moveElements(t.additionalClass,r)):a.is(t.selectedClass)&&(i.is(t.selectedBtnLeft)?e.moveElements(t.selectedClass,t.availableClass):i.is(t.selectedBtnRight)&&e.moveElements(t.selectedClass,t.additionalClass))}),e.containers.on("keydown.swaplist",".listview",function(i){var a=$(this).closest(e.containers);(i=i||window.event).keyCode===77&&e.hasModifier(i)&&(!a.is(t.selectedClass)||a.is(t.selectedClass)&&e.selectedButtons.length===1?a.find(e.actionButtons).trigger("click.swaplist"):e.selectedButtons.first().focus(),i.preventDefault())}),e.selectedButtons.on("keydown.swaplist",function(i){var a,r,o=$(this);(i=i||window.event).keyCode!==13&&i.keyCode!==32||(o.trigger("click.swaplist"),i.preventDefault()),(i.keyCode===37||i.keyCode===39)&&e.selectedButtons.length>1&&(a=e.selectedButtons.index(this),r=i.keyCode===37?a>0?a-1:e.selectedButtons.length-1:a<e.selectedButtons.length-1?a+1:0,e.selectedButtons[r].focus())}),e.element.on("keydown.swaplist",e.tabButtonsStr,function(i){var a=$(this);if((i.keyCode||i.which)===9&&!i.shiftKey){var r=a.closest(".card")[0],o=[].slice.call(r.querySelectorAll("li[tabindex]")),c=o.length,u=!1;if(c&&o.forEach(function(m){parseInt(m.getAttribute("tabindex"),10)!==-1&&(u=!0)}),!u){var p=r.querySelector("li");p&&p.setAttribute("tabindex",0)}}}),e.containers.on("filtered.swaplist",".listview",function(){e.makeDraggable()}),e.element.on("mousedown.swaplist",e.dragElements,function(i){e.handle&&$(i.target).closest("li").attr({draggable:$(i.target).is(".draggable")}),i.stopPropagation()}).on(e.dragStart,e.dragElements,function(i){if(i.stopImmediatePropagation(),!e.handle||n.isHandle){var a,r,o=$(i.target).closest("li"),c=$(".listview",o.closest(".card")).data("listview");if(c){e.isTouch||e.draggedMakeSelected(c,o),e.clearSelections(),n.owner=o.closest(".card"),n.dragged=o,n.draggedIndex=o.index(),n.placeholder=o.clone(!0),n.placeholder.attr("id","sl-placeholder"),e.setSelectionsItems(n.owner),n.items=c.selectedItems,e.selections.move={items:e.selections.itemsData,from:e.getContainer(e.selections.itemsData)};var u=e.element.triggerHandler("beforeswap",[e.selections.move]);if(typeof u=="boolean"&&!u||typeof u=="string"&&u.toLowerCase()==="false")n.dragged=null;else{if($(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(n.items.length),$(".".concat(t.numOfSelectionsClass,"-text"),t.itemContentTempl).text(L.translate("ItemsSelected")),e.addDropeffects(),e.isTouch){a=o[0].getBoundingClientRect(),r=i.originalEvent.changedTouches[0],e.offset={x:r.pageX-a.left,y:r.pageY-a.top};for(var p=0,m=e.containers.length;p<m;p++)e.containers[p].style.zIndex="1";n.placeholderTouch=n.dragged.clone(!0),n.items.length>1&&!$("#sl-placeholder-touch2").length&&n.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(n.dragged).hide(),n.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(e.element.is(".one-third")&&e.isMaxWidth(766)?e.element.parent():e.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(n.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(n.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(n.owner.width(),"px"),e.draggTouchElement(i,n.placeholderTouch)}else n.dragged.addClass("is-dragging"),i.originalEvent.dataTransfer.setData("text",""),n.items.length>1&&$(".".concat(t.itemContentClass),n.dragged).html(t.itemContentTempl.html());i.stopPropagation()}}}else i.stopPropagation()}).on(e.dragEnterWhileDragging,e.dragElements,function(i){n.dragged&&(e.element.triggerHandler("draggingswap",[n.move]),n.related=i.target,$("ul, li",e.element).removeClass("over"),$(i.target).closest("ul, li").addClass("over"),n.droptarget=$(n.related).closest(".card"),$('[aria-grabbed="true"]',e.element).not(n.dragged).slideUp(),i.stopPropagation())}).on(e.dragOverWhileDragging,e.dragElements,function(i){if(n.dragged){var a,r=$(this),o=$(".listview",n.dragged.closest(".card")).data("listview");if(e.isTouch){if(e.handle&&!n.isHandle)return;n.isInSelection||(e.draggedMakeSelected(o,n.dragged),n.items=o.selectedItems,$(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(n.items.length)),a=i.originalEvent.touches[0],r=e.getElementByTouchInList($("ul, li",e.element),a.pageX,a.pageY)||r,n.dragged.addClass("is-dragging"),n.placeholderTouch.addClass("is-dragging is-dragging-touch"),n.placeholderTouch.show(),$('[aria-grabbed="true"]',e.element).not(n.dragged).not(n.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),n.items.length>1&&($(".".concat(t.itemContentClass),n.placeholderTouch.add("#sl-placeholder-touch2")).html(t.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),n.dragged.hide()),e.draggTouchElement(i,n.placeholderTouch),e.element.triggerHandler("draggingswap",[n.move]),n.related=r,$("ul, li",this.element).removeClass("over"),r.closest("ul, li").addClass("over"),n.droptarget=n.related.closest(".card")}i.preventDefault(),i.stopPropagation()}}).on(e.dragEnd,e.dragElements,function(i){if(n.dragged&&n.droptarget){var a=$(n.related).closest("li"),r=$("ul",n.droptarget),o=$("li",r).length,c=n.items.length+o;if(e.unselectElements($(".listview",n.owner).data("listview")),$.each(n.items,function(m,v){if((v=$(v)).find("mark.highlight").contents().unwrap(),o&&!$(n.related).is("ul")){var w=a.index()<n.draggedIndex&&n.owner.is(n.droptarget),C=w?v:$(n.items[n.items.length-1-m]),A=a.index()+(w?m+1:m+2);v.attr({"aria-posinset":A,"aria-setsize":c}),a[w?"before":"after"](C)}else v.attr({"aria-posinset":o+m+1,"aria-setsize":c}),r.append(v);v.focus()}),n.items.length>1&&($(".".concat(t.itemContentClass),n.dragged).html($(".".concat(t.itemContentClass),n.placeholder).html()),e.isTouch&&n.dragged.show()),e.isTouch)for(var u=0,p=e.containers.length;u<p;u++)e.containers[u].style.zIndex="";e.makeDraggable(),n.isHandle=null,$('[aria-grabbed="true"]',e.element).show(),e.afterUpdate($(".listview",n.droptarget).data("listview")),i.preventDefault(),i.stopPropagation()}})}},$.fn.swaplist=function(e){return this.each(function(){var t=$.data(this,Or);t?t.updated(e):t=$.data(this,Or,new Gi(this,e))})};var Yi="swipe-container",ah={swipeType:"reveal"};function Vl(e,t){return this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ah),this.init()}Vl.prototype={init:function(){this.render(),this.handleEvents()},render:function(){this.container=this.element[0].querySelector(".swipe-container"),this.swipeType=this.settings.swipeType;var e=this.element[0].querySelector(".btn-swipe-action-left"),t=this.element[0].querySelector(".btn-swipe-action-right");e&&this.swipeType==="reveal"&&(e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")),t&&this.swipeType==="reveal"&&(t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true")),e&&this.swipeType==="reveal"&&(this.container.scrollLeft=85)},handleEvents:function(){var e=this,t=0,n=0,i=0;if(this.swipeType==="reveal")return this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").on("click.swipe-action",function(){e.container.scrollLeft=85,e.element.focus()}),void $(this.container).on("scroll.swipe-action",function(){var a;(a=e.element.find(".btn-actions"))===null||a===void 0||(a=a?.data("popupmenu"))===null||a===void 0||a==null||a.close()});this.element.on("touchstart.swipe-action",function(a){t=a.changedTouches[0].screenX},{passive:!0}),this.element.on("touchend.swipe-action",function(a){var r,o="";(n=a.changedTouches[0].screenX)<t&&(o="left"),n>t&&(o="right"),o&&(e.element.find(".swipe-action-".concat(o==="left"?"right":"left"," button")).click(),(r=e.element.find(".btn-actions"))===null||r===void 0||(r=r?.data("popupmenu"))===null||r===void 0||r==null||r.close())},{passive:!0}),$(this.container).on("scroll.swipe-action",function(a){var r,o=a.target,c=o.scrollLeft/(o.scrollWidth-o.clientWidth)*100;if((r=e.element.find(".btn-actions"))===null||r===void 0||(r=r?.data("popupmenu"))===null||r===void 0||r==null||r.close(),!(Math.abs(i-c)<1)){i=c;var u="";c===0&&(u="right"),c>98&&(u="left"),u&&e.element.find(".swipe-action-".concat(u==="left"?"right":"left"," button")).click()}})},set swipeType(e){if(e==="continuous")return this.settings.swipeType=e,void this.container.classList.add("continuous");this.settings.swipeType="reveal",this.container.classList.remove("continuous")},get swipeType(){return this.settings.swipeType},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").off("click.swipe-action"),this.element.off("scroll.swipe-action").off("click.swipe-action"),this.element.off("touchstart.swipe-action"),this.element.off("touchend.swipe-action"),$(this.container).off("scroll.swipe-action")},destroy:function(){this.teardown(),$.removeData(this.element[0],"swipeaction")}},$.fn.swipeaction=function(e){return this.each(function(){var t=$.data(this,Yi);return t?t.updated(e):t=$.data(this,Yi,new Vl(this,e)),t})};var ll="scrollaction",jl={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function sh(e,t){this.settings=N.mergeSettings(e,t,jl),this.element=$(e),this.init()}sh.prototype={init:function(){this.handleEvents()},unbind:function(){var e=this.settings;return this.element.off("scroll.scrollaction"),e&&$(e.scrollActionTarget).removeClass(e.classToAdd),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,jl)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],ll)},handleEvents:function(){var e=this,t=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",function(){var n=e.element.scrollTop();n>e.lastScrollTop?$(t.scrollActionTarget).addClass(t.classToAdd):$(t.scrollActionTarget).removeClass(t.classToAdd),e.lastScrollTop=n})}},$.fn.scrollaction=function(e){return this.each(function(){var t=$.data(this,ll);t?t.updated(e):t=$.data(this,ll,new sh(this,e))})};var es="stepchart",rh={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null,attributes:null};function Uc(e,t){return this.init(e,t)}Uc.prototype={init:function(e,t){if(!this.element&&e instanceof HTMLElement&&(this.element=$(e)),at(t)==="object"||this.settings===void 0){var n=this.settings||rh;this.settings=N.mergeSettings(this.element[0],t,n)}return this.render()},render:function(){var e=$('<div class="step-chart-steps"></div>'),t=`
      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">
        <use href="#icon-success"></use>
      </svg>
    `,n=this.settings.completed===null&&this.settings.steps===null;if(n&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=N.parseSettings(this.element)),this.element.children().length>0)return this;for(var i=0;i<this.settings.steps;i++){var a=$('<div class="step-chart-step"></div>');N.addAttributes(a,this.settings,this.settings.attributes,"step".concat(i)),i<this.settings.completed&&(a.addClass("is-complete"),this.settings.completedColor&&a.css("background-color",this.settings.completedColor)),i===this.settings.inProgress-1&&(a.addClass("is-inprogress"),this.settings.inProgressColor&&a.css("background-color",this.settings.inProgressColor)),e.append(a)}var r=this.settings.completedText||L.translate("StepsCompleted");r=(r=r.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),n&&(r=L?L.translate("NoData"):"No data available");var o=$('<span class="step-chart-label">'.concat(r,"</span>"));if(this.settings.steps===this.settings.completed&&(e.addClass("is-complete"),o.append(t.replace("{icon-name}","icon-success"))),this.settings.iconType&&o.append(t.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var c=this.settings.extraText;c=(c=(c=(c=c==="{0} Days Remaining"?L.translate("DaysRemaining"):c)==="{1} Days Overdue"?L.translate("DaysOverdue"):c).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),o.append('<span class="step-chart-label-small">'.concat(c,"</span>"))}return this.element.append(o,e),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(e.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),o.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),N.addAttributes(o,this.settings,this.settings.attributes,"label"),N.addAttributes(o.find(".icon"),this.settings,this.settings.attributes,"icon"),N.addAttributes(o.find(".step-chart-label-small"),this.settings,this.settings.attributes,"label-small"),this},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),this.element.empty(),this.render()},teardown:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],es),this},destroy:function(){return this.teardown(),this}},$.fn.stepchart=function(e){return this.each(function(){var t=$.data(this,es);t?t.updated(e):(t=$.data(this,es,new Uc(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,es),$.removeData(this.element,"options")}})};var Qd="tabs",oh=["horizontal","vertical","module-tabs","header-tabs"],Wl={addTabButton:!1,addTabButtonCallback:null,addTabButtonTooltip:!1,appMenuTrigger:!1,appMenuTriggerText:void 0,appMenuTriggerTextAudible:!1,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,headerTabsTooltips:!1,moduleTabsTooltips:!1,multiTabsTooltips:!1,countsPosition:void 0,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1,attributes:null,maxWidth:null,sortable:!1};function Jd(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Wl),this.init()}Jd.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var e,t=this,n=this,i=!1,a=["en-US","de-DE","ja-JP","zh-CN","zh-Hans","zh-TW","zh-Hant"];(e=this.element.next(".tab-panel-container")).length||(e=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(i=!0));var r=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&r.length&&(e=r),this.element.next(".application-menu").length&&(e=this.element.next().next(".page-container"),i=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(e=$(this.settings.containerElement),i=!1),e&&e.length||(e=$('<div class="tab-panel-container"></div>'),i=!0),e[0].classList.contains("tab-panel-container")||e[0].classList.add("tab-panel-container"),i&&e.insertAfter(this.element),this.container=e;var o=this.element.children(".tab-list-container");!o.length&&this.isScrollableTabs()&&(o=$('<div class="tab-list-container" tabindex="-1"></div>').prependTo(this.element)),o.length&&(this.tablistContainer=o);var c=!0,u=this.element.closest(".header");oh.forEach(function(S,M){t.element.hasClass(oh[M])&&(c=!1)}),c&&(u.length?n.element.addClass("header-tabs"):n.element.addClass("horizontal")),n.settings.tabCounts&&n.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablistContainer?this.tablist.appendTo(this.tablistContainer):this.tablist.appendTo(this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",function(S){S.deltaY&&(this.scrollLeft+=S.deltaY)})),n.tablist.attr({class:"tab-list",role:"tablist"}),this.checkResponsive(!1),this.renderHelperMarkup(),n.anchors=n.tablist.children("li:not(.separator)").children("a"),n.anchors.each(function(){var S,M=this,I=$(this),z=I[0].textContent.toLowerCase().trim().split(" ").join("-");I.attr({role:"tab","aria-selected":"false",tabindex:"-1"}).parent().attr("role","tab").addClass("tab"),I.parent().hasClass("dismissible")&&!I.parent().children(".icon").length&&(S=$.createIconElement({icon:"close",classes:"icon close"})).insertAfter(I),n.settings.attributes&&(N.addAttributes(I,n,n.settings.attributes,"".concat(z,"-a")),S&&N.addAttributes(S,n,n.settings.attributes,"".concat(z,"-close-btn")));var V=I.nextAll("ul").first();V.length>0&&(V.addClass("dropdown-tab"),I.parent().addClass("has-popupmenu").popupmenu({menu:V,trigger:"click",attachToBody:!0,attributes:n.settings.attributes}),I.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),I.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(I)),n.settings.tabCounts&&$(this).find(".count").length===0&&(a.includes(L.currentLocale.name)&&n.settings.countsPosition!=="bottom"||n.settings.countsPosition==="top"?$(this).prepend('<span class="count">0 </span>'):(n.settings.countsPosition,$(this).append('<span class="count">0 </span>'))),(n.settings.moduleTabsTooltips||n.settings.multiTabsTooltips||n.settings.headerTabsTooltips)&&(I.parent().on("mouseover.tabs",function(){I.data("cutoffTitle")===void 0&&n.checkCutOffTitle($(M),n.visibleTabSize)}),I.on("beforeshow.toolbar",function(){return I.data("cutoffTitle")==="yes"&&I.parent().not(".is-disabled").length>0}).tooltip({content:"".concat(I.text().trim())}))}),n.panels=$(),n.anchors.each(function(){var S,M=$(this),I=M.parent(),z=I.data("popupmenu"),V=M.attr("href");if(V.substr(0,1)==="#"){if(V.substr(0,2)==="#/"&&(V=V.replace("#/","#")),V!==void 0&&V!=="#"){if(V=V.replace(/\//g,"\\/"),S=$(V),I.is(":not(.has-popupmenu)")&&!S.length)return;if(n.settings.attributes){var U=M[0].textContent.toLowerCase().trim().split(" ").join("-");N.addAttributes(S,n,n.settings.attributes,"".concat(U,"-panel"))}M.data("panel-link",S),S.data("tab-link",M),n.panels=n.panels.add(S)}z&&z.menu.children("li").each(function(){var G=$(this),J=G.children("a"),te=J.attr("href"),de=$(te);if(J.data("panel-link",de),de.data("tab-link",J),n.panels=n.panels.add(de),n.anchors=n.anchors.add(J),G.hasClass("dismissible")){var H=G.children(".icon");H.length||(H=$.createIconElement({icon:"close",classes:"icon close"})),H.detach().appendTo(J)}}).on("click.popupmenu",".icon",function(G){var J=$(this),te=J.closest("li");te.is(".dismissible")&&J.is(".icon")&&(G.preventDefault(),G.stopPropagation(),n.closeDismissibleTab(te.children("a").attr("href")))})}}),n.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),n.panels.each(function(){var S=$(this);S.parent().is(n.container)||n.container.append(S)});var p,m,v=":not(.separator):not(.is-disabled):not(.is-hidden)",w=this.tablist.children("li".concat(v)),C=this.tablist.children("li.is-selected".concat(v)),A=C.children("a");return n.nestedTabControls=n.panels.find(".tab-container"),w.length&&(this.settings.changeTabOnHashChange&&(p=window.location.hash)&&p.length&&(m=w.find('a[href="'.concat(p,'"]'))).length&&(A=(C=m.first().parent()).children("a")),C.length||(A=(C=w.not(".add-tab-button, .application-menu-trigger").first()).children("a")),C.length&&this.activate(A.attr("href"),A)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.isModuleTabs()&&w.filter(".application-menu-trigger").length>0&&(w.find('a[tabindex="0"]').attr("tabindex","-1"),w.filter(".application-menu-trigger").find("a").attr("tabindex","0")),!this.isModuleTabs()&&this.isHeaderTabs()&&this.adjustTabs(),this.setOverflow(),this.positionFocusState(A),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",function(){t.renderEdgeFading()}),this.renderEdgeFading()),this.createSortable(),typeof ResizeObserver<"u"&&(this.ro=new ResizeObserver(function(){$("body").triggerHandler("resize")}),this.ro.observe(this.element[0]),this.containerElement&&this.ro.observe(this.containerElement[0])),setTimeout(function(){t.positionFocusState()},100),this},createSortable:function(){var e=this;if(this.settings.sortable&&(!Be.features.touch||this.isModuleTabs()||this.isVerticalTabs())){var t=this.tablist?this.tablist[0]:null,n=$(".tab-panel-container");if(t){[].slice.call(t.querySelectorAll(".is-disabled, .separator, .application-menu-trigger")).forEach(function(o){return o.setAttribute("data-arrange-exclude","true")}),t.setAttribute("data-options",'{"placeholderCssClass": "tab arrange-placeholder", "useItemDimensions": "true"}'),t.classList.add("arrange");var i=this.tablist.data("arrange");i||(i=this.tablist.arrange().data("arrange"));var a="has-placeholder",r=null;this.isModuleTabs()||this.isVerticalTabs()||this.isHeaderTabs()||this.tablist.on("beforearrange.tabs",function(){r=$(this).closest(".tab-container")[0]}).on("draggingarrange.tabs",function(){var o;(o=r)===null||o===void 0||o==null||o.classList.add(a)}),this.tablist.on("dragover.tabs",function(o){o.preventDefault()}),n.on("dragover.tabpanel",function(o){o.preventDefault()}),this.tablist.on("drag.tabs",function(o){if($(".multitabs-section.is-hidden").length){var c=$(o.target).parents(".multitabs-section");c.hasClass("alternate")?c.find(".overlay-left").addClass("has-overlay"):c.find(".overlay-right").addClass("has-overlay")}}),this.tablist.on("dragend.tabs",function(o){var c=$(o.target),u=$(document.elementFromPoint(o.pageX,o.pageY)),p=c.parents(".multitabs-section");p.find(".overlay-left").removeClass("has-overlay"),p.find(".overlay-right").removeClass("has-overlay");var m=u.parents(".module-tabs");c.get(0)!==u.get(0)&&p[0]===u.parents(".multitabs-section")[0]&&$(".multitabs-section").each(function(M,I){p[0]!==I&&$(I).hasClass("is-hidden")&&(m=$(I).children(".module-tabs"))});var v=c.attr("href").replace("#",""),w=m.data("tabs");if(w!==void 0){var C=w.getTab(null,c);if(e.element.parent()[0]!==w.element.parent()[0]){var A=C.clone(),S=e.getPanel(v).children();e.remove(v),w.add(v,{name:A.children("a").text().trim(),content:S,doActivate:!0}),e.element.children(".tab-list").children().length<1&&e.element.parent().addClass("is-hidden"),w.element.children(".tab-list").children().length>0&&w.element.parent().removeClass("is-hidden")}}}),this.tablist.on("arrangeupdate.tabs",function(){var o;(o=r)===null||o===void 0||o==null||o.classList.remove(a)}),this.element.on("aftertabadded.tabs",function(){var o;(o=i)===null||o===void 0||o==null||o.updated()})}}},renderHelperMarkup:function(){var e,t,n,i=this.tablistContainer||this.tablist;this.isModuleTabs()&&(i=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),(e=this.focusState)!==null&&e!==void 0&&e?.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=i.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(L.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),i.after(this.moreButton)),(t=this.moreButton)!==null&&t!==void 0&&t?.length&&this.settings.attributes&&N.addAttributes(this.moreButton,this,this.settings.attributes,"btn-more");var a,r=this.tablist.find(".application-menu-trigger");if(this.settings.appMenuTrigger===!0)if(this.isModuleTabs()){if(!r.length){var o=this.settings.appMenuTriggerTextAudible?' class="audible"':"";r=$(`
            <li class="tab application-menu-trigger">
              <a href="#">
                <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
                    <use href="#icon-menu"></use>
                </svg>
                <span`.concat(o,">").concat(this.settings.appMenuTriggerText||L.translate("AppMenuTriggerText"),`</span>
              </a>
            </li>
          `)),this.tablist.prepend(r)}}else this.isVerticalTabs()&&r.length&&r.off().removeData().remove();else r.length&&(this.isVerticalTabs()?r.off().removeData().remove():this.tablist.prepend(r));r.length&&(this.settings.attributes&&N.addAttributes(r,this,this.settings.attributes,"appmenu-trigger-btn"),(a=$("#application-menu").data("applicationmenu"))===null||a===void 0||a==null||a.modifyTriggers([r.children("a")],null,!0)),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$(`
          <div class="add-tab-button hide-focus" tabindex="-1" role="button">
            <span class="audible">`.concat(L.translate("AddNewTab"),`</span>
          </div>
        `)),$.createIconElement({icon:"add",classes:"icon-add"}).prependTo(this.addTabButton),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),(n=this.addTabButton)!==null&&n!==void 0&&n?.length&&this.settings.attributes&&N.addAttributes(this.addTabButton,this,this.settings.attributes,"btn-add");var c=this.element.find(".more-actions-button .btn-actions");return c.length&&(this.moreActionsBtn=c),this.settings.addTabButtonTooltip&&this.addTabButton.tooltip({content:L.translate("AddNewTab")}),this},setupEvents:function(){var e=this,t=this;return this.tablist.on("mousedown.tabs","> li",function(n){if(t.handleAddFocusData(n,$(this)),$(n.target).hasClass("close")&&$(n.target).parent().hasClass("has-popupmenu")){var i=$(this).data("popupmenu").menu,a=[];$.each(i[0].children,function(r,o){a.push(o.children[0].href)}),t.closeDismissibleTabs(a)}return n.which!==3&&!$(n.target).hasClass("close")&&t.handleTabClick(n,$(this))}).on("click.tabs","a",function(n){var i=$(n.currentTarget);this.wasTapped!==!0?(n.type==="touchend"&&(this.wasTapped=!0),i.attr("href").substr(0,1)==="#"&&n.preventDefault()):this.wasTapped=!1}).on("click.tabs",".icon",function(n){var i=$(this);if(!i.is("[disabled]")&&!i.parent().hasClass("is-disabled")){var a=$(i).parent();a.hasClass("dismissible")&&(n.preventDefault(),n.stopPropagation(),t.closeDismissibleTab(a.children("a").attr("href")))}}).on("focus.tabs","a",function(n){return t.handleTabFocus(n,$(this))}).on("blur.tabs","a",function(){$(this).parent().removeClass("is-focused")}).on("keydown.tabs","a",function(n){return e.handleTabKeyDown(n)}),t.tablist.find("li").filter(".has-popupmenu").each(function(n,i){var a=$(i),r=a.children("a");function o(c){c.altKey&&a.is(".dismissible")&&t.closeDismissibleTab(r.attr("href"))}a.data("popupmenu").menu.on("keydown.popupmenu","a",function(c){switch(c.which){case 27:a.addClass("is-selected"),r.focus();break;case 8:case 46:o(c)}}),a.on("selected.tabs",function(c,u){var p=$(this),m=$(u).attr("href");return!!t.activate(m,$(u))&&(t.positionFocusState(r),r.focus(),t.scrollTabList(p),p.addClass("is-selected"),!1)})}),t.tablist.find("li").filter(".dismissible").each(function(n,i){$(i).children("a").on("keydown.tabs",function(a){t.handleDismissibleTabKeydown(a)})}),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",function(n){t.handlePanelKeydown(n)}),this.element.on("focusout.tabs",function(){var n=!$.contains(t.element[0],document.activeElement),i=t.tablist.children(".has-popupmenu.is-open").length===0;n&&i&&!t.moreButton.is(".is-selected, .popup-is-open")&&t.hideFocusState()}).on("updated.tabs",function(n,i){t.updated(i)}).on("activated.tabs",function(n){n.stopPropagation()}).on("add.tabs",function(n,i,a,r){t.add(i,a,r)}).on("remove.tabs",function(n,i){t.remove(i)}),$("body").on("resize.tabs".concat(this.tabsIndex),function(){t.handleResize()}),t.handleResize(!0),this},setupHelperMarkupEvents:function(){var e,t=this;this.moreButton.on("click.tabs",function(n){t.handleMoreButtonClick(n)}).on("keydown.tabs",function(n){t.handleMoreButtonKeydown(n)}).on("focus.tabs",function(n){t.handleMoreButtonFocus(n)}).on("mousedown.tabs",function(n){t.handleAddFocusData(n,$(this))}),this.settings.addTabButton&&this.addTabButton.on("click.tabs",function(){t.handleAddButton()}).on("keydown.tabs",function(n){t.handleAddButtonKeydown(n)}).on("focus.tabs",function(n){t.handleAddButtonFocus(n)}),(e=this.moreActionsBtn)!==null&&e!==void 0&&e?.length&&this.moreActionsBtn.on("keydown.tabs",function(n){t.handleMoreActionsButtonKeydown(n)})},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(e,t){var n=t;return n.is(".is-disabled")?(e.preventDefault(),!1):(n.is(this.moreButton)||(n=n.children("a")),this.hideFocusState(),n.data("focused-by-click",!0),!0)},handleTabClick:function(e,t){var n;if(this.element.is(".is-disabled")||t&&(t.is(".is-disabled")||t.is(".separator")))return e.stopPropagation(),e.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(e))return!0;var i=t.children("a");if(i.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),t.is(".has-popupmenu"))return this.positionFocusState(i),!0;var a=i.attr("href");return t.is(".add-tab-button")&&(t=(i=this.handleAddButton()).parent(),a=i.attr("href"),this.element.trigger("tab-added",[i])),e.which===2?(t.is(".dismissible")&&$(e.target).is(".close")&&this.closeDismissibleTab(a),e.preventDefault(),!0):!this.activate(a,i)||(this.changeHash(a),(n=this.focusState)===null||n===void 0||n==null||n.removeClass("is-visible"),i.focus(),this.isScrollableTabs()&&this.scrollTabList(t),this.positionFocusState(i),this.settings.lazyLoad!==!0||!this.isURL(a))},handleMoreButtonClick:function(e){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(e.preventDefault(),e.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||e.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},hasMoreActions:function(){var e=this.element.find(".more-actions-button > .btn-actions");return e&&e.length>0},handleMoreActionsButtonKeydown:function(e){if(this.element.is(".is-disabled")||this.moreActionsBtn.is(".is-disabled"))return e.stopPropagation(),e.preventDefault(),!1;var t=this,n,i,a=this.addTabButton&&this.addTabButton.length,r=this.tablist.children("li".concat(":not(.separator):not(.is-disabled):not(:hidden)"));switch(e.which){case 37:case 38:if(a)this.addTabButton.focus();else{var o=this.findLastVisibleTab();this.hasMoreButton()?(i=o.attr("href"),e.preventDefault(),setTimeout(function(){t.buildPopupMenu(i),t.positionFocusState(t.moreButton,!0)},0)):n=o}break;case 39:case 40:n=r.first()}return n&&(e.preventDefault(),n.children("a").focus(),this.isScrollableTabs()&&this.scrollTabList(n)),!0},handleTabFocus:function(e,t){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var n=t.parent(),i=t.data("focused-by-click"),a=i===void 0||i&&i===!1;return $.removeData(t[0],"focused-by-click"),this.isTabOverflowed(n)?(this.buildPopupMenu(t.attr("href")),a&&this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(a&&n.addClass("is-focused"),this.positionFocusState(t,a)),!0},handleMoreButtonFocus:function(e){var t;if(this.element.is(".is-disabled"))e.preventDefault();else{var n=this.moreButton.data("focused-by-click"),i=n&&n===!1;$.removeData(this.moreButton[0],"focused-by-click"),(t=this.focusState)===null||t===void 0||t==null||t.removeClass("is-visible"),this.positionFocusState(this.moreButton,i)}},handleTabKeyDown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey&&e.which!==8)return!0;var t=this,n=[8,13,32];function i(){return $.inArray(e.which,n)>-1}if(e.which<32&&!i()||e.which>46||i()&&!this.handleAppMenuTabKeydown(e))return!0;function a(I){e.preventDefault(),setTimeout(function(){t.buildPopupMenu(I)},0)}var r,o=":not(.separator):not(.is-disabled):not(:hidden)",c=$(e.currentTarget).parent(),u=c.children("a"),p=t.tablist.children("li".concat(o)),m=L.isRTL();function v(){for(var I=p.index(c)-1;I>-1&&!r;){if(p.eq(I).is(o))return p.eq(I);I-=1}if(t.hasMoreActions())return t.moreActionsBtn;if(t.settings.addTabButton)return t.addTabButton;var z=t.tablist.children("li".concat(o)).last();return t.hasMoreButton()&&t.isScrollableTabs()&&a(z.find("a").attr("href")),z}function w(){for(var I=p.index(c)+1;I<p.length&&!r;){if(p.eq(I).is(o))return p.eq(I);I++}var z=t.tablist.children("li".concat(o)).first();return t.hasMoreButton()&&t.isScrollableTabs()?(a(z.find("a").attr("href")),z):t.settings.addTabButton?t.addTabButton:t.hasMoreActions()?t.moreActionsBtn:z}function C(){if(c.hasClass("has-popupmenu"))c.data("popupmenu").open();else{var I=u.attr("href");c.is(".add-tab-button")&&(u=t.handleAddButton(),c=u.parent(),I=u.attr("href"),t.element.trigger("tab-added",[u])),t.activate(I)&&(t.changeHash(I),(u.attr("ng-click")||u.attr("data-ng-click"))&&u.click(),u[0].focus(),t.hideFocusState(),t.handleOutboundLink(I))}}switch(e.which){case 8:return e.altKey&&c.is(".dismissible")&&(e.preventDefault(),t.closeDismissibleTab(u.attr("href"))),!0;case 13:case 32:return C(),this.positionFocusState(),!1;case 38:r=v(),e.preventDefault();break;case 37:r=m?w():v(),e.preventDefault();break;case 40:r=w(),e.preventDefault();break;case 39:r=m?v():w(),e.preventDefault()}if(r){var A=r.is(".add-tab-button"),S=r.is(".btn-actions"),M=A||S?r:r.children("a");if(this.isTabOverflowed(r))return a(r.children("a").attr("href"));A?(t.addTabButton.is(".hide-focus")&&t.addTabButton.data("focused-by-key",!0),t.addTabButton.focus()):S?t.moreActionsBtn.focus():(M.focus(),this.isScrollableTabs()&&(this.scrollTabList(M),t.positionFocusState(M,!0)))}return!0},handleDismissibleTabKeydown:function(e){var t=e.which,n=$(e.target);if(n.is("a")&&(n=n.parent()),e.altKey&&t===46){if(n.children("a").is("[disabled]")||n.hasClass("is-disabled"))return;e.preventDefault(),this.closeDismissibleTab(n.children("a").attr("href"))}},handleAppMenuTabKeydown:function(e){var t=$(e.target);if(!t.parent().is(".application-menu-trigger")&&!t.is(".application-menu-trigger"))return!0;var n=$("#application-menu");return!!n.length&&(e.preventDefault(),n.hasClass("is-open")?(n.trigger("close-applicationmenu",[!0]),!1):(n.trigger("open-applicationmenu",[!0,!0]),!1))},handleMoreButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=this,n=L.isRTL();function i(){e.preventDefault(),t.buildPopupMenu(t.tablist.find(".is-selected").children("a").attr("href")),t.positionFocusState(t.moreButton,!0)}function a(){e.preventDefault(),t.findLastVisibleTab()}switch(e.which){case 37:if(n){i();break}a();break;case 38:a();break;case 13:case 32:e.preventDefault();break;case 39:if(n){a();break}i();break;case 40:i()}return!0},handlePanelKeydown:function(e){var t=e.which,n=$(e.target),i=this.anchors.filter("#".concat(n.attr("id")));return this.anchors.filter("#".concat(n.attr("id"))).parent().is(".dismissible")&&e.altKey&&t===46?(e.preventDefault(),this.closeDismissibleTab(i.attr("href"))):e.ctrlKey&&t===38&&$.contains(document.activeElement,n[0])?(e.preventDefault(),this.activate(i.attr("href"),i)):void 0},triggerEventAfterTabAdded:function(e){var t=this.anchors.filter('[href="#'.concat(e,'"]'));this.element.triggerHandler("aftertabadded",[t])},handleAddButton:function(){var e=this,t=this.settings.addTabButtonCallback;if(t&&typeof t=="function"){var n=t();return this.triggerEventAfterTabAdded("newTabId"),this.anchors.filter('[href="#'.concat(n,'"]'))}var i,a=this.tablist.children().index(this.addTabButton),r=(e.idCounter=typeof e.idCounter=="number"?e.idCounter:-1,e.idCounter++,"new-tab-".concat(e.idCounter)),o={name:((i=r.toString().split("-")).forEach(function(u,p){i[p]=u.charAt(0).toUpperCase()+u.slice(1)}),i.join(" ")),content:"&nbsp;",isDismissible:!0};a<0&&(a=this.tablist.find("li:not(.separator)").length);var c=this.element.triggerHandler("before-tab-added",[r,o,a]);return c?(c.newId&&c.newId.length&&typeof c.newId=="string"&&(r=c.newId),c.settings&&at(c.settings)==="object"&&(o=c.settings),isNaN(c.newIndex)||(a=c.newIndex),this.add(r,o,a),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(r,'"]'))):(this.add(r,o,a),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(r,'"]')))},handleAddButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=e.which;if([13,32,37,38,39,40].indexOf(t)<0)return!1;var n,i=this,a=L.isRTL(),r="li:not(.separator):not(.is-disabled):not(:hidden)";function o(){i.hasMoreActions()?i.moreActionsBtn.focus():n=i.tablist.find(r).first()}function c(){e.preventDefault(),i.findLastVisibleTab()}switch(t){case 37:if(a){o();break}c();break;case 38:e.preventDefault(),n=i.tablist.find(r).last(),setTimeout(function(){i.buildPopupMenu(n.children("a").attr("href")),i.positionFocusState(i.moreButton,!0)},0);break;case 13:case 32:return e.preventDefault(),this.handleAddButton();case 39:if(a){c();break}o();break;case 40:o()}return n&&(n.children("a").focus(),this.isScrollableTabs&&(e.preventDefault(),this.scrollTabList(n))),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused");var e=this.addTabButton.data("focused-by-key"),t=e!==void 0&&e;$.removeData(this.addTabButton[0],"focused-by-key"),this.positionFocusState(this.addTabButton,t)},handleResize:function(e){e||this.checkResponsive(!0),this.setOverflow();var t=this.tablist.find(".is-selected");(!t.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(t))&&(t=this.moreButton);var n=this.element.find(".application-menu-trigger");n.length>0&&n.hasClass("is-focused")&&(t=n.find("a")),t.length?this.positionFocusState(t):this.hideFocusState(),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(e){var t=this,n=t.element[0].classList;function i(){t.removeHelperMarkupEvents(),t.renderHelperMarkup(),t.setupHelperMarkupEvents()}function a(){n.contains("is-in-responsive-mode")&&(n.add("vertical"),n.remove("is-in-responsive-mode"),n.remove("header-tabs"),n.remove("alternate"),e&&i())}this.isResponsiveVerticalTabs()&&Yt.isBelow("phone-to-tablet")?n.contains("is-in-responsive-mode")||(n.add("is-in-responsive-mode"),n.add("header-tabs"),n.contains("is-personalizable")||n.add("alternate"),n.remove("vertical"),e&&i()):a()},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var e=window.getComputedStyle(this.element[0]),t=e.getPropertyValue("height")+e.getPropertyValue("margin-top")+e.getPropertyValue("margin-bottom");this.tablist[0].style.height=t}},handleOutboundLink:function(e,t){e.charAt(0)!=="#"&&(e.charAt(0)!=="/"||t&&t!==!1||(e=window.location.origin+e),window.location=e)},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return this.settings.verticalResponsive===!0},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(e){return!(!e||!e.length||e.length===1&&e.indexOf("#")<1)&&this.getPanel(e)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var e=this.element.closest(".module-tabs").length,t=this.element.closest(".header-tabs").length,n=this.element.closest(".tab-panel-container").length;return e>0||t>0||n>0},isTab:function(e){return e instanceof jQuery&&e.length&&e.is("li.tab")},isAnchor:function(e){return e instanceof jQuery&&e.length&&e.is("a")},getAnchor:function(e){return this.isAnchor(e)?e:(e.indexOf("#")===-1&&e.charAt(0)!=="/"&&(e="#".concat(e)),this.anchors.filter('[href="'.concat(e,'"]')))},getPanel:function(e){return this.isTab(e)&&(e=e.children("a")),this.isAnchor(e)&&(e=e.attr("href")),e&&e!==""&&e!=="#"?(e.substr(0,2)==="#/"&&(e=e.replace("#/","#")),this.panels.filter('[id="'.concat(e.replace(/#/g,""),'"]'))):$()},getMenuItem:function(e){return this.isAnchor(e)&&(e=e.attr("href")),e.indexOf("#")===-1&&(e="#".concat(e)),this.moreMenu.children().children().filter('[data-href="'.concat(e,'"]')).parent()},getPreviousTab:function(e){for(var t=this.getTab(null,e),n="li:not(.separator):not(:hidden):not(.is-disabled)",i=this.tablist.find(n),a=i.index(t),r=i.eq(a===0?1:a-1);r.length&&!r.is(n);)r=i.eq(i.index(r)-1);if(r.is(".has-popupmenu")){var o=r.data("popupmenu");o&&(r=o.menu.children("li").first())}return r},activateAdjacentTab:function(e,t){var n=this.doGetTab(e,t);typeof e=="string"&&(t=e),n.is(".is-selected")?n.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(n.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):n.nextAll("li.tab").not(".hidden").length>0&&this.select($(n.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(e,t){var n=this.getTab(null,e);if(t&&t instanceof jQuery||(t=this.getPreviousTab(e)),!t.length)return this.hideFocusState(),t;var i=t.children("a");if(n.is(".is-selected")){if(!this.activate(i.attr("href"),i))return t;i.focus()}return this.positionFocusState(i),t},isURL:function(e){return!(!e||e.indexOf("#")===0)},activate:function(e,t){var n=this;if(n.isURL(e))return this.callSource(e,t,!0);for(var i,a,r,o=n.getAnchor(e),c=o.parent(),u=n.getPanel(e),p=u[0],m=n.anchors.parents().filter(".is-selected"),v=0;v<n.panels.length;v++)n.panels[v].classList.contains("is-visible")&&(i=$(n.panels[v]));if(i||(i=n.panels),n.element.triggerHandler("beforeactivated",[o])===!1)return!1;function w(C){if(u.length<1){if(n.settings.source)return n.callSource(e,o),!0}else{i[0].classList.remove("can-show"),i[0].classList.remove("is-visible"),i.closeChildren(),n.element.trigger("activated",[o]),p.classList.add("can-show"),n.renderVisiblePanel(),p.offsetHeight;var A=new Gt({duration:rs.convertDelayToFPS(150),timeoutCallback:function(){n.element.trigger("afteractivated",[o])}});Hn.register(A),p.classList.add("is-visible")}n.updateAria(o),m.add(n.moreButton).removeClass("is-selected"),c[0]&&c[0].classList.contains("tab")&&(a=c,r=c);var S,M=c.parents(".popupmenu");M.length&&(S=M.data("trigger")).length&&(a=S,r=S),n.isTabOverflowed(r)&&(r=n.moreButton,a=n.moreButton),a&&a.addClass("is-selected");var I=u.find(".toolbar");return I.length&&I.each(function(){var z=$(this).data("toolbar");z&&typeof z.handleResize=="function"&&z.handleResize()}),N.fixSVGIcons(u[0]),C||!1}return this.settings.beforeActivate&&typeof this.settings.beforeActivate=="function"?this.settings.beforeActivate(m,c,w):w(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var e=this.tablistContainer[0],t=Math.abs(e.scrollLeft),n=e.scrollWidth,i=parseInt(window.getComputedStyle(e).getPropertyValue("width"),10);this.element[0].classList[t>1?"add":"remove"]("scrolled-right"),this.element[0].classList[n-t-1<=i?"remove":"add"]("scrolled-left")}},callSource:function(e,t,n){var i=this;if((n==null||n===!1)&&!this.settings.source||this.settings.lazyLoad!==!0)return!1;var a=at(this.settings.source),r=function(C){if(C!=null){if(C=_e.sanitizeHTML(C),n){var A=i.element[0].id||"",S=N.uniqueId(t,"tab",A);e="#".concat(S),t[0].setAttribute("href",e)}i.createTabPanel(e,C,!0),i.activate(e),i.element.triggerHandler("complete"),i.element.trigger("requestend",[e,C])}};function o(C,A){var S=$.extend({dataType:"html"},A,{url:C}),M=$.ajax(S);return M.done(r),M}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),n)return o(e,this.ajaxOptions);if(a==="function")return this.settings.source(r,e,this.settings.sourceArguments);if(a==="string"){var c=e.replace(/#/g,""),u=this.settings.source.toString();if(!(u.indexOf(c)>-1)){var p="tab=".concat(c),m=u.indexOf("?"),v=u.indexOf("#"),w=u.length;m<0?(p="?".concat(p),v>-1&&(w=v+1)):(p+="&",w=m+1),u=ot.splice(u,w,0,p)}return o(u,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(e){if(this.settings.changeTabOnHashChange){e||(e=""),e.replace(/#/g,"");var t=this.settings.hashChangeCallback;t&&typeof t=="function"?t(e):window.location.hash=e,this.element.triggerHandler("hash-change",[e])}},updateAria:function(e){e&&(this.anchors.attr({"aria-selected":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),e.length&&this.element.is(":not(.is-disabled)")&&(e.parent().removeClass("is-selected"),this.isTabOverflowed(e.parent())?this.moreButton.attr({tabindex:"0"}):e.attr({"aria-selected":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each(function(e,t){var n=$(t).data("tabs");n&&n.handleResize&&typeof n.handleResize=="function"&&n.handleResize(!0)})},add:function(e,t,n){var i=this;if(!e)return this;t||(t={});var a=this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length===0;function r(v){if(at(v)==="string"&&v.match(/^#/g)!==null){var w=$(v);v=w.length?w:v}return v}e="".concat(e.replace(/#/g,"")),t.name=t.name?t.name.toString():"&nbsp;",t.isDismissible=!!t.isDismissible&&t.isDismissible===!0,t.isDropdown=!!t.isDropdown&&t.isDropdown===!0,t.content&&(t.content=r(t.content)),t.dropdown&&(t.dropdown=r(t.dropdown));var o,c=$('<li class="tab" role="presentation"></li>'),u=$('<a id="#'.concat(e,'" href="#').concat(e,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(_e.escapeHTML(t.name),"</a>")),p=this.createTabPanel(e,t.content);c.html(u),t.isDismissible&&(o=$.createIconElement({icon:"close",classes:"close icon"}),N.addAttributes(o,this,t.attributes,"close-btn"),c.addClass("dismissible"),c.append(o)),this.settings.tabCounts&&u.prepend('<span class="count">0 </span>'),t.dropdown;var m=this.settings.attributes||[];if(Array.isArray(t.attributes)&&(m=m.concat(t.attributes)),m.length&&(N.addAttributes(u,this,m,"".concat(e,"-a")),N.addAttributes(p,this,m,"".concat(e,"-panel"))),function(v,w){var C,A=v.tablist.children("li"),S=A.not(".application-menu-trigger, .add-tab-button"),M=A.length-1;if(!A.length)return c.appendTo(v.tablist),void p.appendTo(v.container);var I=A.filter(".add-tab-button"),z=A.filter(".application-menu-trigger");(w==null||isNaN(w))&&(w=A.length),A.length>S.length&&(w>A.length-1&&I&&I.length&&(w-=1),function(U){return U<=0}(w)&&z&&z.length&&(w+=1));var V=A.eq(w).length>0;M=V?w:M,C="insertAfter",V&&(C="insertBefore"),c[C](A.eq(M)),p.appendTo(v.container)}(this,n),this.panels=$(this.panels.add(p)),this.anchors=$(this.anchors.add(u)),u.data("panel-link",p),p.data("tab-link",u),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips||this.settings.headerTabsTooltips)&&(u.parent().on("mouseover.tabs",function(){u.data("cutoffTitle")===void 0&&self.checkCutOffTitle($(i),self.visibleTabSize)}),u.on("beforeshow.toolbar",function(){return u.data("cutoffTitle")==="yes"}).tooltip({content:"".concat(u.text().trim())})),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),a){if(this.positionFocusState(u),!this.activate(u.attr("href")))return this.triggerEventAfterTabAdded(e),this;u.focus()}return t.doActivate&&this.activate(u.attr("href")),this.triggerEventAfterTabAdded(e),this},remove:function(e,t){var n,i,a=this,r=this.doGetTab(null,e);if(!r||!r.length)return!1;var o=r.children("a"),c=this.getPanel(e),u=c&&c.length,p=this.tablist.children("li").index(r),m=".application-menu-trigger, .separator, .is-disabled",v=r.prev();if(!t&&this.element.triggerHandler("beforeclose",[o])===!1)return!1;var w=!1;(n=o[0])!==null&&n!==void 0&&n?.href&&(i=a.getActiveTab()[0])!==null&&i!==void 0&&i?.href&&o[0].href===a.getActiveTab()[0].href?w=!0:v=$(this.tablist.children("li").not(m).filter(".is-selected")),u&&(this.panels=$(this.panels.not(c))),this.anchors=$(this.anchors.not(o)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&o.off("beforeshow.toolbar").data("tooltip").destroy();var C=r.data("popupmenu");r.hasClass("has-popupmenu")&&C&&(C.menu.children("li").each(function(){a.remove($(this).children("a").attr("href"))}),C.destroy());var A=r.closest(".dropdown-tab"),S=A.data("trigger");r.find(".icon").off().removeData().remove(),r.off(),o.off(),r.removeData().empty(),r.remove(),u&&(c.removeData().empty(),c.removeData(),c.remove());var M,I=o.data("moremenu-link");I&&(I.parent().off().removeData().remove(),o.removeData()),(M=A).length&&M.children("li:not(.separator)").length===0&&(v=this.getPreviousTab(S),setTimeout(function(){a.remove(S)},1)),S&&S.length&&S.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[r]);for(var z=p-1;z>-1;)z=-1,v.is(m)&&(v=this.tablist.children("li").not(m)[0],z-=1);if(v&&v.length||(v=this.tablist.children("li").not(m).first()),!v.length)return this.hideFocusState(),this.element.trigger("afterclose",[r]),this;var V=v.children("a"),U=V;return this.positionFocusState(V),w&&(v.is(".has-popupmenu")&&v.data("popupmenu")&&(U=v.data("popupmenu").menu.children().first().children("a")),!this.activate(U.attr("href")))||(V.focus(),this.element.trigger("afterclose",[r])),this},createTabPanel:function(e,t,n){e=e.replace(/#/g,"");var i=$('<div id="'.concat(_e.stripTags(e),'" class="tab-panel" role="tabpanel"></div>'));return t instanceof $&&(t=t[0].outerHTML),ue.html(i[0],t||"","*"),n===!0&&this.container.append(i),this.panels=$(this.panels.add(i)),i},checkPopupMenuItems:function(e){function t(i){if(!i||!i.menu)return $();var a=i.menu.children("li");return a.length?a:(i.destroy(),$())}if(e.is(".has-popupmenu"))return t(e.data("popupmenu"));var n=e.closest(".dropdown-tab");return n.length?t(n.data("popupmenu")):$()},getTab:function(e,t){var n,i=this,a=$();return t instanceof $&&t.length>0?t.is("a")?t.parent():t:e?(n=$(e.currentTarget)).is(".tab")?n:n.closest(".tab").length?n.closest(".tab").first():null:t?function(r){if(!r||r===""||r==="#")return null;r.indexOf("#")===-1&&(r="#".concat(r));var o=i.anchors.filter('[href="'.concat(r,'"]'));return o.length?o.parent():null}(t):a},doGetTab:function(e,t){return(e||t)&&(!e||e instanceof $.Event||typeof e=="string")?e?typeof e!="string"?this.getTab(e):this.getTab(null,e):this.getTab(null,t):$()},hide:function(e,t){var n=this.doGetTab(e,t);this.activateAdjacentTab(e,t),n.addClass("hidden");var i=$(this.element.find("li.tab.is-selected")[0]).find("a");return i[0]&&this.select(i[0].hash),this.positionFocusState(),this},show:function(e,t){this.doGetTab(e,t).removeClass("hidden");var n=$(this.element.find("li.tab.is-selected")[0]).find("a");return n[0]&&this.select(n[0].hash),this.positionFocusState(),this},disableTab:function(e,t){var n=this.doGetTab(e,t);return this.activateAdjacentTab(e,t),n.addClass("is-disabled"),this.positionFocusState(),this},enableTab:function(e,t){return this.doGetTab(e,t).removeClass("is-disabled"),this.positionFocusState(),this},rename:function(e,t,n){if(e&&typeof e=="string"&&(n=t,t=e),n){n=n.toString();var i,a=this.doGetTab(e,t),r=this.settings.tabCounts,o=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,c=a.hasClass("dismissible"),u=a.children("a");if(r&&(i=u.find(".count").clone()),u.text(n),this.popupmenu){var p=t.charAt(0)!=="#"?"#".concat(t):t,m=this.popupmenu.menu.find('a[href="'.concat(p,'"]'));m.text(n),c&&m.append($.createIconElement({icon:"close",classes:"icon close"}))}r&&u.prepend(i),o&&u.data("tooltip").setContent(n.trim());var v=this.tablist.children("li").length<2?a:void 0;this.positionFocusState(v)}},updateCount:function(e,t,n){if(e&&typeof e=="string"&&(n=t,t=e),this.settings.tabCounts&&n){var i=this.doGetTab(e,t);i.children("a").find(".count").text("".concat(n.toString()," "));var a=this.tablist.children("li").length<2?i:void 0;this.positionFocusState(a)}},getActiveTab:function(){var e=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(e.first().attr("id"),'"]'))},getVisibleTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)||(t=t.add(n))}),t},getOverflowTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)&&(t=t.add(n))}),t},setOverflow:function(){var e,t,n,i=this,a=this.element[0],r=this.tablist[0],o="has-more-button",c=this.hasMoreButton(),u=this.isScrollableTabs();function p(){i.isModuleTabs()&&i.adjustModuleTabs()}p(),u?n=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(e=window.getComputedStyle(r,null),t=parseInt(e.getPropertyValue("height"),10)+1,n=r.scrollHeight>t),n?c||(a.classList.add(o),p()):c&&(a.classList.remove(o),p()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),n=this.tablist.find(".application-menu-trigger"),i=n.length>0,a=this.tablist.outerWidth(),r=120,o=i?n.outerWidth():0;if(t.children("a").removeAttr("style"),t.removeAttr("style"),this.setMaxWidth(),t.each(function(){var c=$(this);e.isTabOverflowed(c)&&(t=t.not(c))}),!t.length)return r=a-o+101,void(this.moreButton[0].style.width="".concat(r,"px"));this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(r=(a-o)/t.length)<120&&(r=120),this.checkCutOffTitle(t,r),this.adjustSpilloverNumber()},adjustTabs:function(){if(this.settings.maxWidth!==null&&this.settings.maxWidth!==void 0){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),n=this.tablist.parent().outerWidth(),i=120;if(t.children("a").removeAttr("style"),t.removeAttr("style"),this.setMaxWidth(),t.each(function(){var a=$(this);e.isHeaderTabOverflowed(a)&&(t=t.not(a))}),!t.length)return i=n-101,void(this.moreButton[0].style.width="".concat(i,"px"));this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),i=n/t.length,this.visibleTabSize=i,i<120&&(i=120),this.checkCutOffTitle(t,i),this.adjustSpilloverNumber()}},checkCutOffTitle:function(e,t){e.is("a")&&(e=e.parent());for(var n,i,a=window.getComputedStyle(e.eq(0).children()[0]),r=parseInt(a.paddingLeft,10)+parseInt(a.paddingRight,10),o="no",c=this.element.closest(".side-by-side").length===1,u=0;u<e.length;u++){if((n=e.eq(u).children("a"))[0]&&(n[0].style.width=""),!this.settings.headerTabsTooltips||this.settings.maxWidth===null){var p=0;Be.os.name==="ios"&&Be.devicespecs.isMobile&&c&&(p=25),e[u].style.width="".concat(t-p,"px"),n[0]&&(n[0].style.width="".concat(t-p,"px"))}var m,v;(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips||this.settings.headerTabsTooltips)&&(o="no",i=parseInt(window.getComputedStyle(e[u]).width,10),this.settings.maxWidth!==null&&n[0].scrollWidth>n.innerWidth()&&(o="yes"),this.settings.maxWidth===null&&i>t-r&&(o="yes"),(m=n)===null||m===void 0||(v=m)==null||v.data("cutoffTitle",o))}},setMaxWidth:function(){if(this.settings.maxWidth!==null&&this.settings.maxWidth!==void 0)for(var e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),t=0;t<e.length;t++){var n=e.eq(t).children("a");e[t].style.width="".concat(this.settings.maxWidth,"px"),n[0].style.width="".concat(this.settings.maxWidth,"px")}},adjustSpilloverNumber:function(){var e=this.moreButton.find(".more-text"),t=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),n=this.getOverflowTabs();t.length<=n.length?e.text("".concat(L.translate("Tabs"))):e.text("".concat(L.translate("More")));var i=this.moreButton.find(".count");i.length||(i=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(i)),i.text("".concat(n.length," "))},select:function(e,t){var n=e.replace(/#/g,""),i=this.getAnchor(n);this.positionFocusState(void 0,!1),this.activate(i.attr("href"))&&(this.changeHash(n),t||i.focus())},buildPopupMenu:function(e){var t=this;t.popupmenu&&(t.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var n=$("#tab-container-popupmenu"),i="";this.isScrollableTabs()&&(i=" is-selectable"),n.length===0?n=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(i,'">')).appendTo("body"):n.html("");var a=t.tablist.children("li"),r=L.isRTL();function o(w){var C,A,S=$(w),M=S.children("a");if(!S.is(":hidden")&&(t.isScrollableTabs()||t.isTabOverflowed(S)))if(S.is(".separator"))S.clone().appendTo(n);else{var I=S.clone(),z=I.children("a");if(I[0].classList.remove("tab"),I[0].classList.contains("is-selected")&&(I[0].classList.remove("is-selected"),t.isScrollableTabs()&&I[0].classList.add("is-checked")),(C=I[0])===null||C===void 0||C==null||C.removeAttribute("style"),(A=z[0])===null||A===void 0||A==null||A.removeAttribute("style"),I.children(".icon").off().appendTo(z),I.appendTo(n),S.data("moremenu-link",z),z==null||z==null||z.find(".icon-more").removeData().remove(),z==null||z==null||z.data("original-tab",M),z&&(z.onclick=void 0),S.is(".has-popupmenu")){var V=$("#".concat(w.getAttribute("aria-controls"))),U=V.clone(),G=U.children("li");U[0].classList.remove("has-popupmenu"),G.each(function(J){var te=$(this).children("a"),de=V.children("li").eq(J).children("a");te.data("original-tab",de),de.data("moremenu-link",te)}),U.insertAfter(z)}}}for(var c=0;c<a.length;c++)o(a[c]);t.tablist.children("li:not(.separator)").removeClass("is-focused");var u=1;this.isScrollableTabs()||(u=3);var p=t.settings.attributes;t.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:u},attributes:p}),t.moreButton.addClass("popup-is-open"),t.popupmenu=t.moreButton.data("popupmenu"),t.positionFocusState(t.moreButton),t.moreButton.on("close.tabs",function(){$(this).off("close.tabs selected.tabs"),t.moreButton.removeClass("popup-is-open"),t.positionFocusState(void 0),t.adjustModuleTabs()}).on("selected.tabs",function(w,C){var A=C.attr("href"),S=A.substr(1,A.length),M=t.doGetTab(S)||$(),I=M?M.children("a"):$(),z=C.data("original-tab").parent();z.is(".add-tab-button")&&(z=(I=t.handleAddButton()).parent(),A=I.attr("href"),t.element.trigger("tab-added",[I])),t.activate(A),M.length&&I.length&&typeof I[0].onclick=="function"&&I[0].onclick.apply(I[0]),t.moreButton.focus(),t.scrollTabList(M)});var m=t.popupmenu.menu;function v(w){var C=$(this),A=C.closest("li");if(A.is(".dismissible")&&C.is(".close")){if(w.preventDefault(),w.stopPropagation(),A.is(".dismissible")&&A.is(".has-popupmenu")&&A.is(".submenu")){var S=A.find(".wrapper").children().children(),M=[];$.each(S,function(I,z){M.push(z.children[0].href)}),t.closeDismissibleTabs(M)}else t.closeDismissibleTab(A.children("a").attr("href"));t.popupmenu.close()}}m.on("destroy.popupmenu",function(){m.off(),t.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()}).on("touchend.popupmenu touchcancel.popupmenu",".icon",v).on("click.popupmenu",".icon",v),e?t.popupmenu.highlight(m.find('a[href="'.concat(e,'"]'))):t.tablist.children(".is-selected").length>0?t.popupmenu.highlight(m.find('a[href="'.concat(t.tablist.children(".is-selected").children("a").attr("href"),'"]'))):t.popupmenu.highlight(m.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",function(w){var C,A=w.which,S=$(w.target);function M(){return this===document.activeElement}switch(A){case 8:case 46:w.altKey&&S.parent().is(".dismissible")&&t.closeDismissibleTab(S.attr("href"));break;case 37:C=r?40:38,S.is("a")&&(S.parent().is(":not(:first-child)")&&w.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:C}));break;case 38:m.find("li:first-child > a").filter(M).length>0&&(w.preventDefault(),$(document).off(w),t.popupmenu.close(),t.findLastVisibleTab());break;case 39:C=r?38:40,S.is("a")&&!S.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:C});break;case 40:(function(){var I=m.find("li:last-child > a");if(I.filter(M).length>0&&I.parent().is(":not(.submenu)")){if(w.preventDefault(),$(document).off(w),t.popupmenu.close(),t.settings.addTabButton)return void t.addTabButton.focus();if(t.hasMoreActions())return void t.moreActionsBtn.focus();t.focusFirstVisibleTab()}})()}})},isTabOverflowed:function(e){if(this.isVerticalTabs()||this.isScrollableTabs()||this.tablist.find(".arrange-dragging").length||!e)return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var t=Math.round(e[0].getBoundingClientRect().top),n=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(n+=1),t>n},isHeaderTabOverflowed:function(e){return(!this.isHeaderTabs()||this.settings.maxWidth!==null&&this.settings.maxWidth!==void 0)&&!!e&&e[0].getBoundingClientRect().right>e.parent().parent()[0].getBoundingClientRect().width},findLastVisibleTab:function(){var e=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),t=e.first();if(this.isScrollableTabs())return e.last().find("a").focus();for(;!this.isTabOverflowed(t);)t=e.eq(e.index(t)+1);return e.eq(e.index(t)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},scrollTabList:function(e){if(this.tablistContainer&&e&&e instanceof $&&e.length){var t,n=ue.getDimensions(e[0]),i=ue.getDimensions(this.tablistContainer[0]),a=n.left,r=n.right;a<i.left+40&&(t=-1*Math.round(Math.abs(i.left-a))-40),r>i.right-40&&(t=Math.round(Math.abs(r-i.right))+40),t===0&&(t=void 0),this.tablistContainer.smoothScroll(t,250)}},hideFocusState:function(){var e;(e=this.focusState)===null||e===void 0||e==null||e.removeClass("is-visible")},positionFocusState:function(e,t){var n,i,a=this;if(e!==void 0?e=$(e):a.moreButton.hasClass("is-selected")?e=a.moreButton:a.tablist.children(".is-selected").length>0&&(e=a.tablist.children(".is-selected").children("a")),!e||e===void 0||!e.length||e.is(this.moreButton)&&this.isScrollableTabs()){var r;(r=this.focusState)===null||r===void 0||r==null||r.removeClass("is-visible")}else{var o,c;if(e.is("a")&&(e=e.parent()),e.is(".add-tab-button, .tab-more"))((o=this.focusState)===null||o===void 0||(o=o?.parent())===null||o===void 0||!o?.is(this.element))&&((c=this.focusState)===null||c===void 0||c==null||c.prependTo(this.element));else if((n=this.focusState)===null||n===void 0||(n=n?.parent())===null||n===void 0||!n?.is(this.tablistContainer)){var u;(u=this.focusState)===null||u===void 0||u==null||u.prependTo(this.tablistContainer)}e.is(".tab")&&a.settings.headerTabsTooltips&&a.checkCutOffTitle(e,this.visibleTabSize);var p,m,v,w,C,A,S,M=this.focusState[0],I=ue.getDimensions(e[0]),z=e[0].classList,V=L.isRTL(),U=this.isVerticalTabs()?0:this.moreButton.outerWidth(!0)-8,G=this.element,J=this.tablistContainer,te=J&&((i=this.focusState)===null||i===void 0||(i=i?.parent())===null||i===void 0||i==null?void 0:i.is(J)),de=e[0].getBoundingClientRect().width/e[0].offsetWidth*100,H=$('html[class*="classic-"]').length>0,he=$("html.is-mac").length>0,ie=G.hasClass("alternate"),me=G.hasClass("header-tabs"),ke=G.hasClass("has-counts"),De=e.is(".add-tab-button"),Me=e.is(".is-selected"),Ve=G.is(".horizontal"),Ke=J==null||J==null?void 0:J.prop("scrollHeight"),ct=J==null||J==null?void 0:J.prop("clientHeight");p=I,v=J,w=de,S=(m=G)[0].getBoundingClientRect(),p.top-=S.top-(ke?10:3),a.isVerticalTabs()&&(p.top+=m[0].scrollTop),V?p.right=S.right-p.right:p.left-=S.left,v&&(A=v?Math.abs(v[0].scrollLeft):0,p.left+=A,p.right+=A,V&&(p.right-=1,a.isHeaderTabs()&&(p.left-=U,p.right-=U)),w<99&&(p.width=100*p.width/w,p.left=100*p.left/w,p.right=100*p.right/w),te&&(C=parseInt(window.getComputedStyle(m[0])["padding".concat(V?"Right":"Left")],10),p.left+=V?C:-1*C,p.right+=V?C:-1*C),p.right<0&&(p.right=0)),a.isHeaderTabs()||a.isVerticalTabs()||a.isModuleTabs()||(p.height+=4,p.top-=9,H&&(p.height-=4,p.top+=5),Me||De||(p.height=36,p.top+=1)),!a.isHeaderTabs()||a.isVerticalTabs()||a.isModuleTabs()||(p.height-=4,p.top-=Me?2:0,V&&(p.right-=19),Me||De||(p.height+=2,p.top-=1),De&&(p.height+=7,p.top-=6,p.left+=5,V&&(p.right+=46))),Ve&&De&&(p.top+=1,p.height+=4,V&&(p.right+=1),H||(p.top+=5,p.height-=3,V&&(p.height-=1))),a.isModuleTabs()&&!a.isVerticalTabs()?(p.top-=3,p.width-=4,p.left+=2,H||(p.height-=2)):p.height-=4,H||ie||!me||De||(p.top-=9,p.height+=2),H&&ie&&me&&(p.height-=4),a.isVerticalTabs()&&J!=null&&J?.is(".scrollable-y")&&Ke>ct&&(p.width-=he?5:15),I=p;var qe="";Object.keys(I).forEach(function(sn){qe.length&&(qe+=" "),qe+="".concat(sn,": ").concat(I[sn],"px;")}),M.style.cssText=qe;var je=z.contains("is-selected")?"add":"remove";M.classList[je]("is-selected");var lt=t===!0?"add":"remove";M.classList[lt]("is-visible");var xt=this.element.find(".application-menu-trigger, .tab");xt.length>0&&xt.hasClass("is-focused")&&M.classList.add("is-visible")}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init();var t=this.tablist.data("arrange");return t&&(t==null||t==null||t.updated()),this},disableOtherTabs:function(){return this.disable(!0)},disable:function(e){e||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var t=this,n=this.tablist.children("li:not(.separator)");e&&(n=n.filter(":not(.application-menu-trigger)")),n.each(function(){var i=$(this),a=i.children("a");if(!(e&&t.isActive(a.attr("href"))||((i.is(".is-disabled")||a.prop("disabled")===!0)&&t.disabledElems.push({elem:i,originalTabindex:i.attr("tabindex"),originalDisabled:a.prop("disabled")}),i.addClass("is-disabled"),a.prop("disabled",!0),i.is(".application-menu-trigger")||i.is(".add-tab-button")))){var r=$(a.attr("href"));r.addClass("is-disabled"),r.find("*").each(function(){var o=$(this);o.is("input.dropdown, input.multiselect")||((o.attr("tabindex")==="-1"||o.attr("disabled"))&&t.disabledElems.push({elem:o,originalTabindex:o.attr("tabindex"),originalDisabled:o.prop("disabled")}),o==null||o==null||o.disable())})}}),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!e&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var e=this;this.tablist.children("li:not(.separator)").each(function(){var t=$(this),n=t.children("a");if(t.removeClass("is-disabled"),n.prop("disabled",!1),!t.is(".application-menu-trigger")&&!t.is(".add-tab-button")){var i=$(n.attr("href"));i.removeClass("is-disabled"),i.find("*").each(function(){var a=$(this);a.enable&&typeof a.enable=="function"&&a.enable()}),$.each(e.disabledElems,function(a,r){var o=r.elem.is(".tab")?r.elem.children("a"):r.elem;r.elem.disable&&typeof r.elem.disable=="function"&&r.elem.disable(),r.elem.is("li")?r.elem.addClass("is-disabled"):r.elem.is("input.dropdown, input.multiselect")||(r.elem.attr("tabindex",r.originalTabindex),o.prop("disabled",r.originalDisabled))})}}),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(e){return this.remove(e)},closeDismissibleTabs:function(e){var t=this;e.forEach(function(n){var i=n.match(/#.*/);return t.remove(i[0])})},teardown:function(){var e;this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var t=this.tablist.children("li");if(t.off().removeAttr("role").removeClass("is-selected"),t.filter(".has-popupmenu").each(function(){var i=$(this).data("popupmenu");i&&(i.menu.children("li:not(.separator)").each(function(){var a=$(this).children("a"),r=a.data("panel-link");$.removeData(a[0],"panel-link"),r&&r.length&&$.removeData(r[0],"tab-link")}),i.destroy())}),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),this.ro&&(this.ro.disconnect(),delete this.ro),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each(function(){var i=$(this).data("tooltip");i&&typeof i.destroy=="function"&&i.destroy()}),this.element.off("focusout.tabs updated.tabs activated.tabs aftertabadded.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var n=this.moreButton.data("popupmenu");n.menu.find("li:not(.separator)").each(function(){var i=$(this).children("a");i.data("original-tab")&&$.removeData(i[0],"original-tab")}),n.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),(e=this.focusState)===null||e===void 0||(e=e?.removeData())===null||e===void 0||e==null||e.remove(),this.focusState=void 0,$(".tab-panel input").off("error.tabs valid.tabs"),this.addTabButton&&(this.settings.addTabButtonTooltip&&this.addTabButton.data("tooltip").destroy(),this.addTabButton.remove(),this.addTabButton=void 0),this.element.find(".close.icon").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Qd)}},$.fn.tabs=function(e){return this.each(function(){var t=$.data(this,Qd);t?t.updated(e):(t=$.data(this,Qd,new Jd(this,e)),this.element=void 0)})},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(e){return this.each(function(){var t=$.data(this,Jo);t?t.updated(e):t=$.data(this,Jo,new Xa(this,e))})},$.fn.taglist=function(e){return this.each(function(){var t=$.data(this,ua);t?t.updated(e):t=$.data(this,ua,new Sr(this,e))})};var lh="textarea",Pp={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:"Character count of {0} exceeded",attributes:null};function Ul(e,t){this.settings=N.mergeSettings(e,t,Pp),this.element=$(e),this.init()}Ul.prototype={init:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1&&navigator.userAgent.indexOf("Android")===-1,this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-def")?"input-md":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=this.element.siblings(".textarea-wordcount"),this.counter.length===0&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element))),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(e){return typeof e.selectionStart=="number"?e.selectionStart===0&&e.selectionEnd===e.value.length:document.selection!==void 0&&document.selection.createRange().text===e.value},isPrintable:function(e,t){return t?e>64&&e<91||e>=33&&e<=38||e>=40&&e<=43||e===126||e===58||e===60||e>=123&&e<=125||e===94||e===95||e>=62&&e<=64:e===13||e>=48&&e<=57||e>=97&&e<=122||e===59||e===61||e>=44&&e<=47||e===96||e>=91&&e<=93||e===39},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var e=this.element[0];this.settings.autoGrowMaxHeight&&(e.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),e.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var e=this.element[0],t=e.offSetHeight,n=this.settings.autoGrowMaxHeight||0,i=e.scrollHeight;if(n>0&&n<i){if(i=n,e.style.overflow="",t===i)return}else e.style.overflow="hidden";e.style.height="5px",e.style.height="".concat(e.scrollHeight+2,"px")}},countLinebreaks:function(e){return(e.match(/\n/g)||[]).length},updateCounter:function(){var e=this,t=e.element.val(),n=this.isChrome||this.isSafari,i=t.length+(n?this.countLinebreaks(t):0),a=e.getMaxLength(),r=parseInt(a,10)-i,o=(e.settings.charRemainingText?e.settings.charRemainingText:L.translate("CharactersLeft")==="CharactersLeft"?"Characters Left":L.translate("CharactersLeft")).replace("{0}",r.toString());e.counter&&(i>=a?(o=e.settings.charMaxText?e.settings.charMaxText.replace("{0}",a):L.translate("CharactersMax")+a,e.counter.text(o),e.counter.removeClass("almost-empty")):(e.counter.text(o),r<10?e.counter.addClass("almost-empty"):e.counter.removeClass("almost-empty"))),e.printarea.text(e.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.destroy(),this.init(),this.element.data("trackdirty")&&this.element.data("trackdirty")instanceof Object&&this.element.data("trackdirty").updated(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var e=this,t=this;this.element.on("paste.textarea",function(n){var i=e.element[0].selectionStart,a=e.element[0].selectionEnd,r=e.element.val(),o=n.originalEvent.clipboardData.getData("text/plain"),c=t.getMaxLength(),u=(r.slice(0,i)+o+r.slice(a,r.length-1)).substring(0,c),p=t.isChrome||t.isSafari,m=p?t.countLinebreaks(u):0;if(u.length+(p?t.countLinebreaks(u):0)>c){var v=u.substring(0,c-m);t.element.val(v),t.updateCounter(),n.preventDefault()}}).on("keyup.textarea",function(n){var i=t.element.val(),a=t.isChrome||t.isSafari,r=i.length+(a?t.countLinebreaks(i):0),o=t.getMaxLength();return t.updateCounter(),r>=o?(n.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)}).on("focus.textarea",function(){t.counter&&t.counter.addClass("focus")}).on("updated.textarea",function(){t.updated()}).on("keypress.textarea",function(n){var i=t.element.val(),a=t.isChrome||t.isSafari,r=i.length+(a?t.countLinebreaks(i):0),o=t.getMaxLength();[97,99,118,120].indexOf(n.which)>-1&&(n.metaKey||n.ctrlKey)?t.updateCounter():t.isPrintable(n.which,n.shiftKey)&&r>=o&&!t.isSelected(this)&&n.preventDefault()}).on("blur.textarea",function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")})}},$.fn.textarea=function(e){return this.each(function(){var t=$.data(this,lh);t?t.updated(e):t=$.data(this,lh,new Ul(this,e))})},$.fn.toolbarsearchfield=$.fn.searchfield;var Zd="trackdirty",Gc={};function Yc(e,t){this.settings=N.mergeSettings(e,t,Gc),this.element=$(e),this.init()}Yc.prototype={init:function(){this.isIe=Be.browser.name==="ie",this.isIeEdge=Be.browser.name==="edge",this.handleEvents()},valMethod:function(e,t){switch(e.attr("type")){case"checkbox":case"radio":return e.prop("checked");case"file":if(typeof t=="boolean"&&t){var n=e.attr("original");return n!==void 0?n:""}return e.parent().find('[type="text"]').val();default:if(e.is("textarea")&&e.closest(".editor-source").length===1){var i=e.is(":visible")?e.val():e.text();return this.trimEditorText(i)}return e.val()}},trimEditorText:function(e){return e.trim().replace(/>\s+</g,"><").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br(\s+)?\/?>/g,`<br>
`).replace(/<\/p>(\s+)/g,`</p>

`).replace(/<\/blockquote>(\s+)?/g,`</blockquote>

`).replaceAll("&nbsp;"," ")},getAbsolutePosition:function(e){var t=e.position();return e.parents().each(function(){var n=this;if(window.getComputedStyle(n,null).position==="relative")return!1;t.left+=n.scrollLeft,t.top+=n.scrollTop}),{left:t.left,top:t.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&at(this.settings.d)==="object"){var e=this.settings.d;$(".icon-dirty, .msg-dirty",e.field).add(e.icon).add(e.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,Gc)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Zd)},handleEvents:function(){var e=this,t=this.element;if(t.is(".editor")){var n=t.parent().find("textarea");n.data("original",this.valMethod(n))}t.data("original",this.valMethod(t,!0)).on("resetdirty.dirty",function(){if(t.is(".editor")){var i=t.parent().find("textarea");i.data("original",e.valMethod(i))}t.data("original",e.valMethod(t)).triggerHandler("doresetdirty.dirty")}).on("change.dirty doresetdirty.dirty",function(i){var a,r=t,o=t.closest(".field, .radio-group"),c=$("label:visible",o),u={class:"",style:""};if(o.is(".field-fileupload")&&(r=o.find("input.fileupload-background-transparent")),o.is(".editor-container")&&(r=o.find(".editor-source")),c[0]||(c=t.next("label")),t.attr("data-trackdirty")==="true"){if(t.addClass("dirty"),t.is('[type="checkbox"], [type="radio"]')&&(u.class+=" dirty-".concat(t.attr("type")),u.class+=t.is(":checked")?" is-checked":""),t.is("select")&&(u.class+=" is-select",r=t.next(".dropdown-wrapper").find(".dropdown")),u.icon=r.prev(),u==null||(a=u?.icon)===null||a===void 0||!a?.is(".icon-dirty")){t.is(".colorpicker")&&!L.isRTL()&&(u.rect=e.getAbsolutePosition(t),u.style="left:".concat(u.rect.left,"px; top:").concat(u.rect.top,"px;")),u.icon='<span class="icon-dirty'.concat(u.class,'"></span>'),u.msg=L.translate("MsgDirty")||"",u.msg='<span class="audible msg-dirty">'.concat(u.msg,"</span>");var p=$($(r[0].parentElement).find("input")[0]);r=t.is('[type="radio"]')?p:r,$(r[0].parentElement).find(".icon-dirty").length===0&&(r.before(u.icon),c.append(u.msg),u.style&&r.prev(".icon-dirty")[0]&&(r.prev(".icon-dirty")[0].style.cssText=u.style)),u.icon=r.prev(),u.msg=c.find(".msg-dirty")}var m=t.data("original"),v=e.valMethod(t);if(u.field=o,e.settings.d=u,o.is(".editor-container")){var w=o.find("textarea");m=w.data("original"),v=o.find(".editor-source").is(":visible")?w.val():w.text(),v=e.trimEditorText(v)}if(v===m||t.attr("multiple")&&N.equals(v,m))return t.removeClass("dirty"),$(".icon-dirty, .msg-dirty",o).add(u.icon).add(u.msg).remove(),void t.trigger(i.type==="doresetdirty"?"afterresetdirty":"pristine");t.trigger("dirty")}})}},$.fn.trackdirty=function(e){return this.each(function(){var t=$.data(this,Zd);t&&t instanceof Yc?t.updated(e):t=$.data(this,Zd,new Yc(this,e))})};var fa="tree",ko={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null,expandTarget:"node",useExpandTarget:!1,expandIconOpen:"plusminus-folder-open",expandIconClosed:"plusminus-folder-closed",expandPlusminusRotate:!0,showChildrenCount:!1,childrenAutoCount:!0};function Kc(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ko),this.init()}function Gl(e,t){var n=$(e),i=n.data("".concat(fa,"Api"));if(i){var a={collapse:i.collapseNode,expand:i.expandNode};typeof a[t]=="function"&&a[t].apply(i,n)}}Kc.prototype={init:function(){this.isIe11=Be.browser.name==="ie"&&Be.browser.version==="11",this.initTree(),this.handleKeys(),this.setupEvents(),this.loadData(this.settings.dataset)===-1&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable(),this.childrenCountInit())},initTree:function(){var e=this,t=this.settings,n=this.element.find("a"),i=this.element.attr("data-selectable");t.useExpandTarget&&(t.expandTarget="icon"),t.selectable=i===void 0||i.toLowerCase()!=="single"&&i.toLowerCase()!=="multiple"?t.selectable:i,this.isMultiselect=t.selectable==="multiple",t.hideCheckboxes=t.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),n.each(function(){var a=$(this);e.decorateNode(a)})},initSelected:function(){var e=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(t){t.setAttribute("role","none"),e.setNodeStatus($(t.querySelector("a")))}),this.syncDataset()},focusFirst:function(){var e=this.element[0].querySelector("a");e&&e.setAttribute("tabindex","0")},setFocus:function(e){(e=this.isjQuery(e)?e[0]:e)&&(e.focus(),ue.removeClass(e,"hide-focus"))},decorateNode:function(e,t,n,i){var a,r=(e=this.isjQuery(e)?e:$(e))[0].getAttribute("data-badge"),o=e[0].getAttribute("data-alert-icon"),c=e.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,u=ue.hasClass(e[0],"is-disabled")||c;if(r!==void 0&&(r=N.parseSettings(e,"data-badge")),e[0].setAttribute("role","treeitem"),e[0].setAttribute("tabindex","-1"),e[0].setAttribute("aria-selected","false"),u){ue.addClass(e[0],"is-disabled"),e[0].setAttribute("aria-disabled","true");var p=e.next();p[0]&&p[0].tagName.toLowerCase()==="ul"&&ue.hasClass(p[0],"is-open")&&([].slice.call(p[0].querySelectorAll("a")).forEach(function(V){ue.addClass(V,"is-disabled"),V.setAttribute("aria-disabled","true")}),[].slice.call(e[0].parentNode.querySelectorAll("ul")).forEach(function(V){return ue.addClass(V,"is-disabled")}))}a=e.parentsUntil(this.element,"ul").length-1,e[0].setAttribute("aria-level",a+1);var m=e.parent().index();e[0].setAttribute("aria-posinset",m+1);var v=e.closest("li").siblings().length+1;e[0].setAttribute("aria-setsize",v);var w=e.next("ul"),C=!1;w[0]&&w.children().length>0&&(C=ue.hasClass(w[0],"is-open"),e[0].setAttribute("aria-expanded",C?"true":"false"));var A=e.contents().filter(function(){return!$(this).is(".tree-badge, .tree-children-count")}).text();e[0].textContent="",e.children("svg.icon-tree").length===0&&(t||t===""?e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:t,classes:["icon-tree"]})):e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:o,classes:["step-alert","icon-".concat(o)]}))),w[0]&&e[0].insertAdjacentHTML("beforeend",this.getExpandTargetHtml(C)),!this.isMultiselect||this.settings.hideCheckboxes&&n!==!1||e[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var S=this.getBadgeHtml(r);S!==""&&e[0].insertAdjacentHTML("beforeend",S);var M=document.createElement("span");if(ue.addClass(M,"tree-text"),M.textContent=A,M.innerHTML.indexOf("&lt;svg")>0&&(M.innerHTML=_e.unescapeHTML(M.innerHTML)),e[0].appendChild(M),w[0]&&e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml(i)),this.hasIconClass(e)&&this.setTreeIcon(e.find("svg.icon-tree"),e[0].getAttribute("class")),w[0]&&w[0].tagName.toLowerCase()==="ul"){var I=e[0].getAttribute("class");if(this.settings.useExpandTarget&&I&&!i){var z=I.match(/(icon-)[^\s]+/g);z&&(i={icon:z[0]})}w[0].setAttribute("role","group"),ue.addClass(w[0].parentNode,"folder"),this.setFolderIcon(e,ue.hasClass(w[0],"is-open"),i),I&&I.indexOf("open")===-1&&I.indexOf("closed")===-1&&(u&&ue.addClass(e[0],"is-disabled"),this.setFolderIcon(e,ue.hasClass(w[0],"is-open"),i)),this.hasIconClass(e)&&(I=e[0].getAttribute("class"),(/open|close/g.test(I)||!w[0]||this.settings.useExpandTarget)&&this.setTreeIcon(e.find("svg.icon-tree"),ue.hasClass(w[0],"is-open")?I:I.replace("open","closed")))}e.hideFocus()},setTreeIcon:function(e,t){if(e&&typeof t=="string"){e=this.isjQuery(e)?e:$(e);var n=t.replace(/#?icon-|hide-focus|is-selected|is-active|\s?/gi,"");e.changeIcon(n)}},expandAll:function(e){var t=this,n=e;(n=n!==void 0?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(i){var a=i.previousElementSibling;if(ue.addClass(i.parentNode,"is-open"),ue.addClass(i,"is-open"),i.style.height="",a&&a.tagName.toLowerCase()==="a"){var r=a.querySelector("svg.icon-tree");t.setTreeIcon(r,t.settings.folderIconOpen),a.setAttribute("aria-expanded",!0),t.hasIconClass(a)&&t.setTreeIcon(r,a.getAttribute("class"))}})},collapseAll:function(e){var t=this,n=e;(n=n!==void 0?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(i){var a=i.previousElementSibling;if(ue.removeClass(i.parentNode,"is-open"),ue.removeClass(i,"is-open"),i.style.height=0,a&&a.tagName.toLowerCase()==="a"){var r=a.querySelector("svg.icon-tree");t.setTreeIcon(r,t.settings.folderIconClosed),a.setAttribute("aria-expanded",!1),ue.removeClass(a,"is-selected"),t.hasIconClass(a)&&t.setTreeIcon(r,a.getAttribute("class").replace("open","closed"))}})},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},selectNodeById:function(e){this.selectNodeByJquerySelector("#".concat(e))},selectNodeByJquerySelector:function(e){var t=this.isjQuery(e)?e:$(e);if(t.length&&!t.is(".is-disabled")){var n=t.parentsUntil(this.element,"ul[role=group]");this.expandAll(n),this.selectNode(t,!0)}},unSelectedNode:function(e,t){if(e.length!==0){var n=this;$("a",this.element).attr("tabindex","-1"),e.attr("tabindex","0"),$("a:not(.is-disabled)",e.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(e),this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(i){return ue.removeClass(i,"is-active")}),ue.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var i=e.data("jsonData")||{};n.element.triggerHandler("unselected",{node:e,data:i})},0)}},selectNode:function(e,t){var n,i=this,a=this.settings;e.length!==0&&(typeof a.onBeforeSelect=="function"?(n=a.onBeforeSelect(e))&&n.done&&typeof n.done=="function"?n.done(function(r){r&&i.selectNodeFinish(e,t)}):n&&i.selectNodeFinish(e,t):i.selectNodeFinish(e,t))},selectNodeFinish:function(e,t,n){if((this.isMultiselect||this.settings.expandTarget==="icon")&&n){if(n.type==="click"||n.type==="touch"){if(ue.hasClass(n.target,"icon")&&ue.hasClass(e[0].parentNode,"folder"))return}else if(n.type==="keydown"){var i=n.charCode||n.keyCode;if(i===37||i===39)return}}var a=this,r=[].slice.call(this.element[0].querySelectorAll("a"));if(r.forEach(function(o){return o.setAttribute("tabindex","-1")}),e[0].setAttribute("tabindex","0"),this.isMultiselect)[].slice.call(e[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach(function(o){o.setAttribute("aria-selected","true"),ue.addClass(o,"is-selected"),ue.addClass(o.parentNode,"is-selected")});else{if(ue.hasClass(e[0],"is-selected"))return;r.forEach(function(o){var c=$(o),u=c.data("jsonData");u&&(delete u.selected,c.data("jsonData",u)),o.setAttribute("aria-selected","false"),ue.removeClass(o,"is-selected"),ue.removeClass(o.parentNode,"is-selected")}),e[0].setAttribute("aria-selected","true"),ue.addClass(e[0],"is-selected"),ue.addClass(e[0].parentNode,"is-selected")}this.syncNode(e),this.loading||this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(o){return ue.removeClass(o,"is-active")}),ue.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var o=e.data("jsonData")||{};a.element.triggerHandler("selected",{node:e,data:o})},0)},setNodeStatus:function(e){var t,n=this,i=e.data("jsonData");if(this.isMultiselect){var a=function(u,p){u.forEach(function(m){var v=$(m.querySelector("a")),w=n.getSelectedStatus(v,p);w==="mixed"?(ue.removeClass(m,"is-selected","is-partial"),ue.addClass(m,"is-partial")):w?(ue.removeClass(m,"is-selected","is-partial"),ue.addClass(m,"is-selected")):ue.removeClass(m,"is-selected","is-partial"),n.syncNode(v)})},r=!1;a(t=[].slice.call(e[0].parentNode.querySelectorAll("li.folder")),r),r=!(!t.length&&i&&!i.selected),t=e.parentsUntil(this.element,"li.folder"),a(t=[].slice.call(t.toArray()),r)}else{var o=e[0],c=o.parentNode;i&&i.selected?(ue.addClass(c,"is-selected"),ue.addClass(o,"is-selected"),o.setAttribute("aria-selected",!0)):(ue.removeClass(c,"is-selected","is-partial"),ue.removeClass(o,"is-selected","is-partial"),o.setAttribute("aria-selected",!1))}},getSelectedStatus:function(e,t){var n,i=0,a=0,r=0;return e.parent().find("a").each(function(o){t&&o===0||(i++,(n=$(this).data("jsonData"))&&n.selected?a++:r++)}),i===a||i!==r&&"mixed"},getNodeAsJQ:function(e){return typeof e=="string"?$("#".concat(e)):this.isjQuery(e)?e:$(e)},expandNode:function(e,t){var n=this.getNodeAsJQ(e),i=!this.isTrue(t);this.toggleNode(n,null,{isExpandNode:!0,noSelect:i})},collapseNode:function(e,t){var n=this.getNodeAsJQ(e),i=!this.isTrue(t);this.toggleNode(n,null,{isExpandNode:!1,noSelect:i})},toggleNode:function(e,t,n){var i,a=e.next(),r=this,o=this.settings;if(a[0]&&a[0].tagName.toLowerCase()==="ul"&&a[0].getAttribute("role")==="group"){var c=e.find("svg.icon-tree").getIconName(),u=function(v){if(typeof o.onCollapse=="function")(i=o.onCollapse(e))&&i.done&&typeof i.done=="function"?i.done(function(I){I&&!v&&r.selectNodeFinish(e,focus,t)}):i&&!v&&r.selectNodeFinish(e,focus,t);else if(o.expandTarget!=="icon"||v)v||r.selectNodeFinish(e,focus,t);else{var w=e[0].parentNode;t&&ue.hasClass(t.target,"icon")&&ue.hasClass(w,"folder")&&r.selectNodeFinish(e,focus,t)}if(e.closest(".folder").removeClass("is-open"),c===o.folderIconOpen||o.useExpandTarget)r.setFolderIcon(e,!1,!1,o.expandPlusminusRotate);else if(/open|close/g.test(c)&&!o.useExpandTarget){var C=c.replace("open","closed");v||(C=C.replace(/\s?is-selected/,"")),r.setTreeIcon(e.find("svg.icon-tree"),C)}var A=e.closest(".folder a");if(r.hasIconClass(A)){var S=A.attr("class");if(/open|close/g.test(S)||o.useExpandTarget){var M=S.replace("open","closed");v||(M=M.replace(/\s?is-selected/,"")),r.setTreeIcon(A.find("svg.icon-tree"),M)}}r.isAnimating=!0,r.isMultiselect||!o.expandTarget!=="icon"||v||(r.unSelectedNode(e.parent().find("li.is-selected"),!1),ue.removeClass(e[0],"is-selected")),a.one("animateclosedcomplete",function(){ue.removeClass(a[0],"is-open"),r.isAnimating=!1}).animateClosed(),e[0].setAttribute("aria-expanded",e[0].getAttribute("aria-expanded")!=="true"),r.element.triggerHandler("collapsed",{node:e,data:e.data("jsonData")})},p=function(v){if(typeof o.onExpand=="function")(i=o.onExpand(e))&&i.done&&typeof i.done=="function"?i.done(function(M){M&&!v&&r.selectNodeFinish(e,focus,t)}):i&&!v&&r.selectNodeFinish(e,focus,t);else if(o.expandTarget!=="icon"||v)v||r.selectNodeFinish(e,focus,t);else{var w=e[0].parentNode;t&&ue.hasClass(t.target,"icon")&&ue.hasClass(w,"folder")&&r.selectNodeFinish(e,focus,t)}var C=e.data("jsonData");if(o.source&&C.children&&C.children.length===0){var A={node:e,data:e.data("jsonData")};return ue.addClass(e[0],"is-loading"),r.loading=!0,r.settings.source(A,function(M){var I=C.id,z=r.findById(I);z.children=M,r.addChildNodes(z,e.parent()),ue.removeClass(e[0],"is-loading"),r.loading=!1,r.accessNode(a,e),C.children=M,e.data("jsonData",C),e.data("".concat(fa,"Api"),r),ue.hasClass(e[0].parentNode,"folder")&&r.childrenCountInit(e[0].parentNode),r.isMultiselect||!o.expandTarget!=="icon"||v||r.selectNode(e,!0),v||r.initSelected()}),void r.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})}if(c===o.folderIconClosed||o.useExpandTarget)r.setFolderIcon(e,!0,!1,o.expandPlusminusRotate);else if(/open|close/g.test(c)&&!o.useExpandTarget){var S=c.replace("closed","open");v||(S=S.replace(/\s?is-selected/,"")),r.setTreeIcon(e.find("svg.icon-tree"),S)}r.accessNode(a,e),r.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})};if(at(n)==="object"&&function(v){var w=!1;if(typeof v=="boolean")w=!0;else if(typeof v=="string"){var C=v.toLowerCase();C!=="true"&&C!=="false"||(w=!0)}return w}(n.isExpandNode))if(n.isExpandNode){p(n.noSelect);var m=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(m)}else u(n.noSelect);else ue.hasClass(a[0],"is-open")?u():p()}},accessNode:function(e,t){var n=this,i=t.attr("class");t.closest(".folder").addClass("is-open");var a=t.find("svg.icon-tree").getIconName();if(a===this.settings.folderIconClosed||this.settings.useExpandTarget?this.setFolderIcon(t,!0,!1,this.settings.expandPlusminusRotate):/open|close/g.test(a)&&!this.settings.useExpandTarget&&this.setTreeIcon(t.find("svg.icon-tree"),a.replace("closed","open").replace(/\s?is-selected/,"")),this.hasIconClass(i)){var r=e[0]&&e[0].tagName.toLowerCase()==="ul";(/open|close/g.test(i)||!r||this.settings.useExpandTarget)&&this.setTreeIcon(t.find("svg.icon-tree"),i.replace("is-selected",""))}this.isAnimating=!0,e.one("animateopencomplete",function(){n.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen(),t[0].setAttribute("aria-expanded",t[0].getAttribute("aria-expanded")!=="true")},openNode:function(e,t){var n=this,i=t.data("jsonData");if(n.settings.source&&i.children&&i.children.length===0){var a={node:t,data:t.data("jsonData")};return t.addClass("is-loading"),n.loading=!0,void n.settings.source(a,function(r){var o=i.id,c=n.findById(o);c.children=r,n.addChildNodes(c,t.parent()),t.removeClass("is-loading"),n.loading=!1,n.accessNode(e,t),i.children=r,t.data("jsonData",i),t.data("".concat(fa,"Api"),n),n.selectNode(t,!0),n.initSelected()})}n.accessNode(e,t)},hasIconClass:function(e){return typeof e!="string"&&(this.isjQuery(e)&&(e=e.length>1?e.first()[0]:e[0]),e=e.getAttribute("class")),e&&e.indexOf("icon")>-1},closeNode:function(e,t){var n=this;n.setTreeIcon(t.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),n.settings.folderIconClosed),n.hasIconClass(t.closest(".folder a"))&&n.setTreeIcon(t.closest(".folder a").find("svg.icon-tree"),t.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),n.isAnimating=!0,n.isMultiselect||(n.unSelectedNode(t.parent().find("li.is-selected"),!1),t.removeClass("is-selected")),e.one("animateclosedcomplete",function(){e.removeClass("is-open"),n.isAnimating=!1}).animateClosed(),t.attr("aria-expanded",t.attr("aria-expanded")!=="true")},setupEvents:function(){var e=this;e.element.on("updated.tree",function(t,n){e.updated(n),e.initTree()})},handleKeys:function(){var e=this;this.element.on("click.tree","a:not(.is-clone)",function(t){var n=$(this),i=this.parentNode;return N.clearSelection(),ue.hasClass(n[0],"is-disabled")||ue.hasClass(n[0],"is-loading")||(e.isMultiselect||e.settings.expandTarget==="icon"?ue.hasClass(t.target,"icon")&&ue.hasClass(i,"folder")?e.toggleNode(n,t):ue.hasClass(i,"is-selected")||ue.hasClass(i,"is-partial")?e.unSelectedNode(n,!0):e.selectNode(n,!0):(e.selectNode(n,!0),e.toggleNode(n,t)),t.stopPropagation()),e.popupEl&&e.popupEl.data("popupmenu")&&(e.popupEl.data("popupmenu").close(),e.popupEl=null),e.syncDataset(),!1}),this.element.on("focus.tree","a",function(){if(parseInt(this.getAttribute("aria-level"),10)===0&&parseInt(this.getAttribute("aria-posinset"),10)===1&&ue.hasClass(this,"is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}}),this.element.on("keydown.tree","a",function(t){var n,i,a=t.charCode||t.keyCode,r=$(this);if(!e.isAnimating){if(a===40){var o=e.getNextNode(r);e.setFocus(o)}if(a===38){var c=e.getPreviousNode(r);e.setFocus(c)}if(t.keyCode===32&&r.trigger("click.tree"),a===37)return L.isRTL()?r.next().hasClass("is-open")?(i=r.next().find("a:first"),e.setFocus(i)):e.toggleNode(r,t):r.next().hasClass("is-open")?e.toggleNode(r,t):(i=r.closest(".folder").find("a:first"),e.setFocus(i)),t.stopPropagation(),!1;if(a===39)return L.isRTL()?r.next().hasClass("is-open")?e.toggleNode(r,t):(n=r.closest(".folder").find("a:first"),e.setFocus(n)):r.next().hasClass("is-open")?(n=r.next().find("a:first"),e.setFocus(n)):(e.toggleNode(r,t),e.setFocus(r)),t.stopPropagation(),!1;a===36&&(n=e.element.find("a:first:visible"),e.setFocus(n)),a===35&&(n=e.element.find("a:last:visible"),e.setFocus(n))}}),this.element.on("keypress.tree","a",function(t){var n=t.charCode||t.keyCode,i=$(this);if(n>=37&&n<=40||n===32)return t.stopPropagation(),!1;t.which!==0&&i.closest("li").nextAll().find("a:visible").each(function(){var a=$(this);if(a.text().substr(0,1).toLowerCase()===String.fromCharCode(t.which).toLowerCase())return e.setFocus(a),!1})})},loadData:function(e){if(!e)return-1;var t=this;t.element.empty(),t.loading=!0,e=this.arrangeDataset(e);var n="";t.jsonData=[];for(var i=0,a=e.length;i<a;i++)n+=t.getNodeHtml(e[i],i);t.element[0].insertAdjacentHTML("beforeend",n),[].slice.call(t.element[0].querySelectorAll('a[role="treeitem"]')).forEach(function(u,p){var m=$(u),v=t.jsonData[p];m.data("jsonData",v),m.data("".concat(fa,"Api"),t),v.selected&&t.selectNode(m,v.focus),t.addAutomationAttributes(m,v),m.is(".hide-focus")&&m.hideFocus()});for(var r=[].slice.call(t.element[0].querySelectorAll("select.dropdown")),o=0;o<r.length;o++){var c=r[o];t.jsonData[o].disabled?$(c).dropdown().disable():$(c).dropdown().on("selected.tree",function(){var u=t.findById(this.parentElement.previousElementSibling.id);u.text=this.value,t.updateNode(u)})}t.jsonData=void 0,t.loading=!1,t.syncDataset(),t.initSelected(),t.focusFirst(),t.attachMenu(t.settings.menuId),t.createSortable(),this.childrenCountInit()},arrangeDataset:function(e){if(!this.hasKeyInData("parent",e))return e;e=e||this.settings.dataset;var t=JSON.parse(JSON.stringify(e));return function n(i){for(var a=0;a<i.length;a++)i[a].parent!==void 0&&(r=i[a],o=void 0,o=!1,function c(u){for(var p=0;p<u.length&&!o;p++)u[p].id===r.parent&&((m=u[p]).children=m.children||[],m.children.push(r),o=!0),u[p].children!==void 0&&c(u[p].children);var m}(t)),i[a].children!==void 0&&n(i[a].children);var r,o}(e),function n(i,a){for(var r=0;r<i.length;r++)i[r].children!==void 0&&n(i[r].children,i[r].id),a===void 0&&i[r].parent!==void 0||a!==void 0&&i[r].parent!==void 0&&a!==i[r].parent?(i.splice(r,1),r--):delete i[r].parent}(t),this.settings.dataset=t,t},hasKeyInData:function(e,t){for(var n=!1,i=function o(c){for(var u in c)if(c.hasOwnProperty(u)){var p=c[u];if(at(p)!=="object"||n?e===u&&(n=!0):o(p),n)break}},a=0,r=(t=t||this.settings.dataset).length;a<r&&!n;a++)i(t[a]);return n},getNodeHtml:function(e,t,n,i){var a="",r="";n=n||0,t+=1;var o=this.settings,c=i||e.disabled||!1,u=e.children&&Array.isArray(e.children),p=e.custom?e.color:"".concat(e.color,"07"),m={id:e.id!==void 0?' id="'.concat(e.id,'"'):"",href:' href="'.concat(e.href!==void 0?e.href:"#",'"'),expanded:' aria-expanded="'.concat(e.open?"true":"false",'"'),icon:e.icon||e.icon===""?e.icon:"tree-node",alertIcon:"",alertIconAttr:e.alertIcon!==void 0?' data-alert-icon="'.concat(e.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(e.text,"</span>"),class:["hide-focus"],ariaDisabled:c?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&e.hideCheckbox!==!1?"":'<span class="tree-checkbox '.concat(p||"",'"></span>'),badge:at(e.badge)==="object"?this.getBadgeHtml(e.badge):"",expandTarget:u?this.getExpandTargetHtml(e.open):"",childrenCount:u?this.getChildrenCountHtml(e):""};this.jsonData.push(e),o.useStepUI&&(m.alertIcon='<svg class="icon step-alert icon-'.concat(e.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(e.alertIcon,'"></use>'));var v=u?"folder":"";if((v+=e.selected?" is-selected":"")!=""&&(v+=e.open?" is-open":"",v=' class="'.concat(v,'"')),c&&m.class.push("is-disabled"),e.icon&&(m.icon=e.icon,(!u||u&&/open|closed/i.test(e.icon))&&m.class.push(e.icon)),u&&(!o.useExpandTarget||o.useExpandTarget&&!e.icon)&&(e.open?(m.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon:o.folderIconOpen,i=c):m.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon.replace("open","closed"):o.folderIconClosed),m.icon="#icon-".concat(m.icon.replace(/^#?icon-?/,"")),m.class=' class="'.concat(m.class.join(" "),'"'),m.style="",e.type==="dropdown"&&(m.style='style="display: none"',e.data)){a='<select class="dropdown" close-on-select="true">';for(var w=0;w<e.data.length;w++){var C=e.data[w];C.value===e.text?(r=C.text,a+='<option value="'.concat(C.value,'" selected>').concat(C.text,"</option>")):a+='<option value="'.concat(C.value,'">').concat(C.text,"</option>")}a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(r),a='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var A=`
      <li`.concat(v,`>
        <a role="treeitem" aria-selected="false" tabindex="-1" `).concat(m.style,`
          aria-level="`).concat(n,`"
          aria-position="`).concat(t,`"
          aria-setsize="`).concat(t,`"
          `).concat(m.id+m.href+m.class+m.expanded+m.ariaDisabled+m.alertIconAttr,`>
            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="`).concat(m.icon,`"></use>
            </svg>`).concat(m.expandTarget+m.checkbox+m.alertIcon+m.badge+m.text+m.childrenCount,`
        </a>
        `).concat(a);if(u){A+='<ul class="folder'.concat(e.open?" is-open":"",'" role="group">');for(var S=0,M=e.children.length;S<M;S++)A+=this.getNodeHtml(e.children[S],S,n+1,i);A+="</ul>"}return A+="</li>"},getExpandTargetHtml:function(e){var t="";if(this.settings.useExpandTarget){var n="icon-expand-target",i=e?{icon:this.settings.expandIconOpen,class:"open"}:{icon:this.settings.expandIconClosed,class:"close"};t=$.createIcon({icon:i.icon,classes:[n,"".concat(n,"-").concat(i.class)]})}return t},getChildrenCountHtml:function(e){var t="";return this.settings.showChildrenCount&&(t=`<span class="tree-children-count">
          (<span class="tree-children-count-text">`.concat(this.getDataChildrenCount(e),`</span>)
        </span>`)),t},getDataChildrenCount:function(e){return e&&/string|number/.test(at(e.childrenCount))?parseInt(e.childrenCount,10):0},getActualChildrenCount:function(e){var t=0;if(e){var n=e.nextElementSibling;n&&n.tagName.toLowerCase()==="ul"&&(t=n.childElementCount)}return t},updateChildrenCount:function(e,t){if(e){var n=e.querySelector(".tree-children-count-text");n&&((t=/string|number/.test(at(t))?parseInt(t,10):this.getActualChildrenCount(e))===0&&parseInt(n.textContent,10)>0&&typeof this.settings.source=="function"&&!ue.hasClass(e.nextElementSibling,"is-open")||(n.textContent=t))}},updateAutoChildrenCount:function(e){var t=this;this.settings.showChildrenCount&&e&&[].slice.call(e.querySelectorAll("a")).forEach(function(n){return t.updateChildrenCount(n)})},childrenCountInit:function(e){var t=this;e=e||this.element,e=this.isjQuery(e)?e[0]:e,this.settings.showChildrenCount&&e&&(this.settings.childrenAutoCount?this.updateAutoChildrenCount(e):[].slice.call(e.querySelectorAll("a[data-children-count]")).forEach(function(n){var i=n.getAttribute("data-children-count");i!==void 0&&t.updateChildrenCount(n,i)}))},setFolderIcon:function(e,t,n,i){var a=this.settings,r=this.isjQuery(e)?e:$(e);if(e=r[0]){var o,c={el:{tree:e.querySelector("svg.icon-tree"),expand:e.querySelector("svg.icon-expand-target")},icon:t?{tree:a.folderIconOpen,expand:a.expandIconOpen,rotate:"forward"}:{tree:a.folderIconClosed,expand:a.expandIconClosed,rotate:"backward"}};a.useExpandTarget?(o={el:c.el.expand,icon:c.icon.expand,rotateClass:"rotate-".concat(c.icon.rotate)},this.setTreeIcon(o.el,o.icon),i&&this.rotatePlusminus(o),(!(n=n||r.data("jsonData"))||n&&!n.icon)&&(o={el:c.el.tree,icon:c.icon.tree},this.setTreeIcon(o.el,o.icon))):(o={el:c.el.tree,icon:c.icon.tree},this.setTreeIcon(o.el,o.icon))}},rotatePlusminus:function(e){this.settings.useExpandTarget&&this.settings.expandPlusminusRotate&&(ue.addClass(e.el,e.rotateClass),$(e.el).one("webkitAnimationEnd.tree oAnimationEnd.tree msAnimationEnd.tree animationend.tree",function(){ue.removeClass(e.el,e.rotateClass)}))},getBadgeHtml:function(e){var t={html:"",style:"",class:["badge","tree-badge"]};return e&&!e.remove&&(t.text="",e.text!==void 0&&(t.text=e.text.toString(),t.text.length===1&&t.class.push("round")),/info|good|error|alert|pending/i.test(e.type)?t.class.push(e.type):e.type&&e.type.charAt(0)==="#"&&e.type.length===7&&(t.style="background-color: ".concat(e.type," !important;")),e.backColor&&(t.style="background-color: ".concat(e.backColor," !important;")),e.foreColor&&(t.style+="color: ".concat(e.foreColor," !important;")),t.style!==""&&(t.style=' style="'.concat(t.style,'"')),t.text!==""&&(e.type&&e.type.indexOf("pending")!==-1&&(t.text=""),t.html='<span class="'.concat(t.class.join(" "),'"').concat(t.style,">").concat(t.text,"</span>"))),t.html},addToDataset:function(e,t){var n,i,a;if(e.parent&&(n=this.findById(e.parent)),t instanceof jQuery&&t.is("li")){var r=(i=this.findById($(t[0].parentNode.parentNode).find("a")[0].id)).children||i.node.data("jsonData").children;a=r.findIndex(function(o){return o.text.trim()===$(t).text().trim()}),r.splice(a,0,e)}return t!=="bottom"||e.parent||n||this.settings.dataset.push(e),t!=="top"||e.parent||n||this.settings.dataset.unshift(e),e.parent&&n&&(n.children||(n.children=[]),t==="bottom"?n.children.push(e):n.children.unshift(e)),!(e.parent&&!n)},findById:function(e,t){for(var n in t||(t=this.settings.dataset),t){var i,a,r,o=t[n];if(o.id===e)return o;if(o.children||(i=o.node)!==null&&i!==void 0&&(i=(a=i)==null?void 0:a.data("jsonData"))!==null&&i!==void 0&&((r=i)!=null&&r.children)){var c,u,p,m=this.findById(e,o.children||((c=o.node)===null||c===void 0||(c=(u=c)==null?void 0:u.data("jsonData"))===null||c===void 0||(p=c)==null?void 0:p.children));if(m)return m}}return null},getNodeByIdIfSelected:function(e,t){var n=this.findById(e,t);return n&&n.selected?n:null},getSelectedNodes:function(){var e,t,n=[];return $("li.is-selected",this.element).each(function(){e=$("a:first",this),t=e.data("jsonData"),n.push({node:e,data:t})}),n},getUnselectedNodes:function(){var e,t,n=[];return $("li:not(.is-selected)",this.element).each(function(){e=$("a:first",this),t=e.data("jsonData"),n.push({node:e,data:t})}),n},getNextNode:function(e){var t=e.parent().next().find("a:first"),n=e.next();if(n.is("ul.is-open")&&(t=n.find("a:first")),t.hasClass("is-disabled")&&(t=t.parent().next().find("a:first")),t.length===0)for(var i=0,a=e;i<1e3&&!(t=(a=a.parent().closest(".folder")).next().find("a:first")).length;i++);return t.hasClass("is-disabled")&&(t=this.getNextNode(t)),t},getPreviousNode:function(e){var t=e.parent().prev().find("a:first"),n=t.parent();return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(t=n.find("ul.is-open a:last")),t.hasClass("is-disabled")&&(n=(t=t.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(t=n.find("ul.is-open a:last")),t.length===0&&(t=e.closest("ul").prev("a")),t.hasClass("is-disabled")&&(t=this.getPreviousNode(t)),t},syncDataset:function(e){var t=[],n=this;e=e||this.element,[].slice.call(e.children("li").toArray()).forEach(function(i){var a=i.querySelector("a");a&&t.push(n.syncNode(a))}),this.settings.dataset=t,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(e){var t,n=this,i=this.isjQuery(e)?e:$(e);if(e=i[0]){var a=e.parentNode,r=function(v,w){return ue.hasClass(v,w)};t={node:i,id:e.getAttribute("id"),text:e.querySelector(".tree-text").textContent},(r(e,"is-open")||a&&a.tagName.toLowerCase()==="li"&&r(a,"is-open"))&&(t.open=!0);var o=e.getAttribute("href");o&&(t.href=o),r(a,"is-selected")&&(t.selected=!0),r(e,"is-disabled")&&(t.disabled=!0);var c=e.getAttribute("class");c&&c.indexOf("icon")>-1&&(t.icon=c.replace(/\s?hide-focus\s?/g,""));var u=i.next();u[0]&&u[0].tagName.toLowerCase()==="ul"&&(t.children=[],[].slice.call(u.children("li").toArray()).forEach(function(v){var w=v.querySelector("a");w&&t.children.push(n.syncNode(w))}));var p=i.data("jsonData");p&&(delete p.selected,delete p.children,t=$.extend({},p,t));var m=N.parseSettings(i,"data-automation-attributes");m.attributes&&p&&(N.extend(p,m),this.addAutomationAttributes(i,p)),i.data("jsonData",t),i.data("".concat(fa,"Api"),n)}return t},addAutomationAttributes:function(e,t){if((e=this.isjQuery(e)?e:$(e)).length&&t.attributes){var n=e.find(".tree-text"),i=e.find(".icon-tree"),a=e.find(".icon-expand-target"),r=e.find(".tree-checkbox");N.addAttributes(e,this,t.attributes,"tree-link"),N.addAttributes(n,this,t.attributes,"tree-link-text"),N.addAttributes(i,this,t.attributes,"tree-icon"),N.addAttributes(a,this,t.attributes,"tree-icon-expand-target"),N.addAttributes(r,this,t.attributes,"tree-checkbox")}},addNode:function(e,t,n){var i,a,r,o,c=this,u=at(e.badge)==="object"?JSON.stringify(e.badge):e.badge;e.href=e.href!==void 0?e.href:"#",t=t||"bottom";var p=document.createElement("a");e.id!==void 0&&p.setAttribute("id",e.id),p.setAttribute("href",e.href),u!==void 0&&p.setAttribute("data-badge",u),e.alertIcon!==void 0&&p.setAttribute("data-alert-icon",e.alertIcon),e.text&&(p.textContent=/&#?[^\s].{1,9};/g.test(e.text)?_e.unescapeHTML(e.text):e.text),e.disabled&&ue.addClass(p,"is-disabled"),e.icon&&ue.addClass(p,e.icon);var m=document.createElement("li");if(m.setAttribute("role","none"),o=m,e.open&&ue.addClass(m,"is-open"),m.appendChild(p),e.type==="dropdown"&&(p.setAttribute("style","display: none"),e.data)){a='<select class="dropdown" close-on-select="true">';for(var v=0;v<e.data.length;v++)(r=e.data[v]).value===e.text?(i=r.text,a+='<option value="'.concat(r.value,'" selected>').concat(r.text,"</option>")):a+='<option value="'.concat(r.value,'">').concat(r.text,"</option>");a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(i),a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a,"</div>")).appendTo(m),e.disabled?$(m).find("select.dropdown").dropdown().disable():$(m).find("select.dropdown").dropdown().on("selected.tree",function(){var S=c.findById(this.parentElement.previousElementSibling.id);S.text=this.value,c.updateNode(S)})}var w,C=!!this.loading||this.addToDataset(e,t);if(e.parent instanceof jQuery&&(C=!0),t&&(w=typeof t!="string"||/^(top|bottom|before|after)$/g.test(t)?t instanceof jQuery?t:$(t):$(/\.|#/.test(t[0])?t:"#".concat(t)).first()).length&&(n==="before"&&($(m).insertBefore(w.is("li")?w:w.closest("li")),C=!0),n==="after"&&($(m).insertAfter(w.is("li")?w:w.closest("li")),C=!0),n==="top"&&w.is("ul")&&(w.prepend(m),C=!0)),!(t instanceof jQuery)||e.parent&&C||e.parent instanceof jQuery||/^(top|bottom|before|after)$/g.test(n)||(t[0].appendChild(m),C=!0),t!=="bottom"||e.parent&&C||this.element[0].appendChild(m),t!=="top"||e.parent&&C||this.element.prepend(m),e.parent){var A=t==="top"?t:null;C&&typeof e.parent=="string"&&(m=this.element.find("#".concat(e.parent)).parent(),!e.disabled&&m.is(".is-selected")&&e.selected===void 0&&(e.selected=!0),o=this.addAsChild(e,m,A)),e.parent&&e.parent instanceof jQuery&&(m=e.parent,e.parent.is("a")&&(m=e.parent.parent()),o=this.addAsChild(e,m,A)),this.isjQuery(m)&&(e.node=m.find("ul li a#".concat(e.id)))}else e.tempidsparent!==void 0&&(e.parent=e.tempidsparent,delete e.tempidsparent),m=$(m),this.addChildNodes(e,m),e.node=m.children("a").first();return p=$(p),this.decorateNode(p,e.icon,e.hideCheckbox,e),this.childrenCountInit(p.parentsUntil(this.element,".folder:last")),e.selected&&this.selectNode(p,e.focus),p.data("jsonData",e),p.data("".concat(fa,"Api"),c),this.addAutomationAttributes(p,e),this.createSortable(),$(o)},addAsChild:function(e,t,n){var i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul"),a=!!i;return a||(t.insertAdjacentHTML("beforeend",'<ul class="folder" role="group"></ul>'),i=t.querySelector("ul")),e.open&&ue.addClass(i,"is-open"),a||this.decorateNode(t.querySelector("a")),e.parent!==void 0&&(e.tempidsparent=e.parent),e.parent="",this.addNode(e,$(i),n)},addChildNodes:function(e,t){var n=this,i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");e.children?(i||(t.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(e.open?" is-open":"",'" role="group"></ul>')),i=t.querySelector("ul")),i.innerHTML="",e.children&&e.children.forEach(function(a){return n.addNode(a,$(i))})):i&&i.parentNode.removeChild(i)},isTrue:function(e){return e!=null&&(typeof e=="boolean"&&e===!0||typeof e=="string"&&e.toLowerCase()==="true")},isFalse:function(e){return e!=null&&(typeof e=="boolean"&&e===!1||typeof e=="string"&&e.toLowerCase()==="false")},updateNode:function(e){var t=e.node?{node:e.node}:this.findById(e.id);if(t&&t.node[0]){var n,i=t.node[0].parentNode,a=t.node[0].querySelector(".tree-text"),r=this.isTrue(e.disabled)||this.isFalse(e.enabled),o=this.isTrue(e.enabled)||this.isFalse(e.disabled),c=e.children===null;if(e.badge){var u=t.node[0].querySelector(".tree-badge");if(!u&&!e.badge.remove&&e.badge.text!==void 0&&$.trim(e.badge.text)!==""){var p=document.createElement("span");ue.addClass(p,"tree-badge","badge"),a.parentNode.insertBefore(p,a),u=t.node[0].querySelector(".tree-badge")}u&&(e.badge.text!==void 0&&(e.badge.text=e.badge.text.toString(),u.textContent=e.badge.text,ue.removeClass(u,"round"),e.badge.text.length===1&&ue.addClass(u,"round")),e.badge.type!==void 0&&(ue.removeClass(u,"info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(e.badge.type)?ue.addClass(u,e.badge.type):e.badge.type.charAt(0)==="#"&&e.badge.type.length===7&&(u.style.backgroundColor=e.badge.type),e.badge.type.indexOf("pending")!==-1&&(u.textContent="")),t.badge=e.badge,this.parseBool(e.badge.remove)&&(u.parentNode.removeChild(u),t.badge!==void 0&&delete t.badge))}if(e.text&&(e.text=/&#?[^\s].{1,9};/g.test(e.text)?_e.unescapeHTML(e.text):e.text,a.textContent=e.text,t.text=e.text),e.icon===null){var m=t.node[0].nextElementSibling;m&&m.tagName.toLowerCase()==="ul"?this.setFolderIcon(t.node[0],ue.hasClass(m,"is-open"),!1,this.settings.expandPlusminusRotate):this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),"icon-tree-node")}else if(e.icon){this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),e.icon),t.icon=e.icon;var v=t.node.data("jsonData");v&&(v.icon=e.icon,t.node.data("jsonData",v),t.node.data("".concat(fa,"Api"),this))}else e.children&&e.children.length&&!ue.hasClass(i,"folder")&&this.convertFileToFolder(t.node);r&&(ue.addClass(t.node[0],"is-disabled"),t.node[0].setAttribute("aria-disabled","true"),ue.hasClass(i,"folder")&&ue.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(w){ue.addClass(w,"is-disabled"),w.setAttribute("aria-disabled","true")})),o&&(t.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0||(ue.removeClass(t.node[0],"is-disabled"),t.node[0].removeAttribute("aria-disabled"),ue.hasClass(i,"folder")&&ue.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(w){ue.removeClass(w,"is-disabled"),w.removeAttribute("aria-disabled")}))),e.childrenCount&&this.updateChildrenCount(t.node[0],e.childrenCount),e.node&&this.syncDataset(),(e.children||c)&&((n=e.children)!==null&&n!==void 0&&n?.length?this.addChildNodes(e,i):this.removeChildren(e,i)),this.syncDataset(),this.createSortable()}},parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},removeChildren:function(e,t){var n=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");this.setTreeIcon(t.querySelector("svg.icon-tree"),e.icon||"icon-tree-node"),ue.removeClass(t,"folder","is-open"),n&&n.parentNode.removeChild(n)},removeNode:function(e){var t=this.findById(e.id),n=null;e instanceof jQuery?(n=(t=e).parentsUntil(this.element,".folder:last"),t.parent().remove()):t&&(n=t.node.parentsUntil(this.element,".folder:last"),t.node.parent().remove()),this.childrenCountInit(n),t&&this.syncDataset()},attachMenu:function(e){var t=this;function n(i,a){$(":focus")[0]===void 0&&a!=null&&a?.triggerElement&&a.triggerElement.focus()}e&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",function(i){var a=$(this);return i.preventDefault(),t.popupEl=$(i.currentTarget).popupmenu({menuId:e,eventObj:i,trigger:"immediate",attachToBody:!0,returnFocus:n}).off("selected").on("selected",function(r,o){t.element.triggerHandler("menuselect",{node:a,item:o})}),t.element.triggerHandler("menuopen",{menu:$("#".concat(e)),node:a}),!1})},createSortable:function(){if(this.settings.sortable){var e,t,n,i=this;if(i.targetArrow=i.element[0].previousElementSibling,i.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!i.targetArrow||i.targetArrow&&!ue.hasClass(i.targetArrow,"tree-drag-target-arrow")){var a=document.createElement("div");ue.addClass(a,"tree-drag-target-arrow"),i.element[0].parentNode.insertBefore(a,i.element[0]),i.targetArrow=i.element[0].previousElementSibling}t=setInterval(function(){i.loading||(clearInterval(t),[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(r){var o=$(r);o.data("drag")||o.on("mousedown.tree",function(c){c.preventDefault(),n=c.which!==3&&(!ue.hasClass(c.target,"icon")||!ue.hasClass(r.parentNode,"folder"))}).drag({clone:!0,cloneAppendTo:o.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",function(c,u,p){if(!p||!n)return ue.removeClass(r,"is-dragging"),void(p&&p[0].parentNode.removeChild(p[0]));(e=p)[0].removeAttribute("id"),ue.addClass(e[0],"is-dragging-clone"),[].slice.call(e[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach(function(v){return v.parentNode.removeChild(v)});var m=o.closest("ul");i.sortable={startIndex:$(i.linkSelector,i.element).index(o),startNode:o,startIcon:$("svg.icon-tree",o).getIconName(),startUl:m,startLi:o.closest("li"),startFolderNode:m.prev("a"),startWidth:o.outerWidth()},i.element.triggerHandler("sortstart",i.sortable),c.preventDefault(),c.stopImmediatePropagation()}).on("drag.tree",function(c,u){e&&(e[0].style.left="".concat(u.left,"px"),e[0].style.top="".concat(u.top,"px"),e[0].style.opacity="1",i.setDragOver(e,u))}).on("dragend.tree",function(c,u){var p;if(i.targetArrow.style.display="none",[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(w){return ue.removeClass(w,"is-over")}),e&&(p=i.sortable)!==null&&p!==void 0&&p?.overDirection){e[0].style.left="".concat(u.left,"px"),e[0].style.top="".concat(u.top,"px");var m=i.sortable.startNode.parent(),v=i.sortable.overNode.parent();i.sortable.overDirection==="over"?(ue.hasClass(v[0],"folder")||i.convertFileToFolder(i.sortable.overNode),v[0].querySelector("ul").appendChild(m[0]),ue.hasClass(v[0],"is-open")||i.toggleNode(i.sortable.overNode,c)):i.sortable.overDirection==="up"?m.insertBefore(v):i.sortable.overDirection==="down"&&(ue.hasClass(v[0],"is-open")&&ue.hasClass(v[0],"folder")?$("ul:first",v).prepend(m):m.insertAfter(v)),!i.sortable.startUl[0].querySelector("li")&&i.sortable.startFolderNode.data("oldData")&&i.sortable.startFolderNode.data("oldData").type==="file"&&i.convertFolderToFile(i.sortable.startFolderNode),N.fixSVGIcons(m),i.element.triggerHandler("sortend",i.sortable),i.syncDataset(),i.isMultiselect&&i.initSelected(),i.updateAutoChildrenCount(i.element[0]),delete i.sortable}})}))},10)}},setDragOver:function(e,t){var n,i,a,r,o,c,u,p,m,v,w,C,A=this,S=e[0].querySelector("svg.icon-tree"),M=A.element[0].getBoundingClientRect(),I=20;if(A.sortable){var z=function(){A.sortable.overNode=null,A.sortable.overIndex=null,A.sortable.overDirection=null,A.targetArrow.style.display="none",A.setTreeIcon(S,"icon-cancel")};t.top>M.top-I&&t.top<M.bottom+I&&t.left>M.left-I-A.sortable.startWidth&&t.left<M.left+M.height+I?(I=2,(u=[].slice.call(A.element[0].querySelectorAll(A.linkSelector))).forEach(function(V,U){if(w=null,p=V.getBoundingClientRect(),t.top>p.top-I&&t.top<p.bottom+I){if(o=$(V),!!o.parentsUntil(A.element,".folder").filter(function(){return $("a:first",this).is(A.sortable.startNode)&&A.sortable.startLi.is(".folder")}).length)return void z();r=V.parentNode,m=p.left,c=o.closest("ul"),n=parseInt(r.style.marginTop,10)>0?2:0,i=U-1===A.sortable.startIndex&&c.is(A.sortable.startUl),a=U+1===A.sortable.startIndex&&c.is(A.sortable.startUl),u.forEach(function(G){return ue.removeClass(G,"is-over")}),C=function(){w?(A.setTreeIcon(S,A.sortable.startIcon),w==="over"?(A.targetArrow.style.display="none",ue.hasClass(V,"is-disabled")||ue.addClass(V,"is-over")):(u.forEach(function(G){return ue.removeClass(G,"is-over")}),v=w==="up"?p.top-1.5-(ue.hasClass(r,"is-active")?3:0):p.bottom+(r.nextElementSibling&&ue.hasClass(r.nextElementSibling,"is-active")?-1:1.5)+n,A.targetArrow.style.left="".concat(m,"px"),A.targetArrow.style.top="".concat(v,"px"),A.targetArrow.style.display="block"),A.sortable.overNode=o,A.sortable.overIndex=U,A.sortable.overDirection=w):z()},U!==A.sortable.startIndex&&(t.left>p.left-I-A.sortable.startWidth&&t.left<p.right+I?w=!i&&t.top<p.top?"up":!a&&t.top>p.top+2*I?"down":"over":!i&&t.top<p.top?w="up":a||(w="down")),C()}})):z()}},convertFileToFolder:function(e){var t=$("svg.icon-tree",e),n=document.createElement("ul");n.setAttribute("role","group"),ue.addClass(n,"folder");var i={icon:t.getIconName(),type:"file"};if(this.hasIconClass(e)){var a=e.attr("class").replace(/\s?is-selected/,"");i.iconClass=a,this.settings.useExpandTarget||e.removeClass(a)}e.data("oldData",i);var r=e[0].parentNode;r&&r.tagName.toLowerCase()==="li"&&(ue.addClass(r,"folder"),r.appendChild(n)),t[0].insertAdjacentHTML("afterend",this.getExpandTargetHtml(!1)),e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml()),this.setTreeIcon(t,this.settings.folderIconClosed)},convertFolderToFile:function(e){var t=e.parent(".folder");t.removeClass("folder is-open"),$(".icon-expand-target, .tree-children-count",e).remove(),$("ul:first",t).remove(),t.length&&(this.setTreeIcon($("svg.icon-tree",e),e.data("oldData")?e.data("oldData").icon:"tree-node"),e.data("oldData")&&e.data("oldData").iconClass&&e.addClass(e.data("oldData").iconClass),e.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each(function(){var e=$(this),t=e.data("drag");e.off("mousedown.tree"),t&&t.destroy&&t.destroy()}),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,ko)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],fa)},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(e){ue.addClass(e,"is-disabled"),e.setAttribute("aria-disabled","true")})},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(e){ue.removeClass(e,"is-disabled"),e.removeAttribute("aria-disabled")})},preserveEnablementState:function(){var e=[].slice.call(this.element[0].querySelectorAll("a")),t=[];return e.forEach(function(n){ue.hasClass(n,"is-disabled")||n.getAttribute("aria-disabled")===!0?t.push({nodeId:n.id,state:"disabled"}):t.push({nodeId:n.id,state:"enabled"})}),this.settings.originalEnablementState=t,t},restoreEnablementState:function(){var e=this.settings,t=[].slice.call(this.element[0].querySelectorAll("a"));e.originalEnablementState!==void 0&&e.originalEnablementState!==null&&t.forEach(function(n){e.originalEnablementState.forEach(function(i){i.nodeId===n.id&&(i.state==="disabled"?(ue.addClass(n,"is-disabled"),n.setAttribute("aria-disabled","true")):(ue.removeClass(n,"is-disabled"),n.removeAttribute("aria-disabled")))})})}},$.fn.tree=function(e){var t=this.find("a");return t.find("[onerror]").length&&(this.find("[onerror]").removeAttr("onerror"),t.find("*").each(function(){var n=$(this);this.outerHTML=_e.sanitizeHTML(n.prop("outerHTML"))})),this.each(function(){var n=$.data(this,fa);n?n.updated(e):n=$.data(this,fa,new Kc(this,e))})},$.fn.collapse=function(){return this.each(function(){Gl(this,"collapse")})},$.fn.expand=function(){return this.each(function(){Gl(this,"expand")})};var ys="treemap",ch={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Yl(e,t){this.settings=N.mergeSettings(e,t,ch),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Yl.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var e=ft.themeColors().palette;this.settings.colors=[e.azure[100].value,e.azure[90].value,e.azure[80].value,e.azure[70].value,e.azure[60].value,e.azure[40].value,e.azure[30].value,e.azure[20].value,e.amethyst[100].value,e.amethyst[90].value,e.amethyst[80].value,e.amethyst[70].value,e.amethyst[60].value,e.amethyst[50].value,e.amethyst[40].value,e.amethyst[40].value,e.amethyst[30].value,e.amethyst[20].value,e.turquoise[100].value,e.turquoise[90].value,e.turquoise[80].value,e.turquoise[70].value,e.turquoise[60].value,e.turquoise[50].value,e.turquoise[40].value,e.turquoise[40].value,e.turquoise[30].value,e.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(e){var t=this,n=Object.create(this.settings.margin),i=this.element.parent().width()-n.left-n.right,a=this.element.parent().height()-n.top-n.bottom,r=d3.scaleOrdinal().range(this.settings.colors);if(e.length!==0){N.addAttributes(this.element,e,this.settings.attributes,"",!0),this.settings.showTitle&&e.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(e.name),a-=35,n.top-=19);var o=d3.treemap().size([i,a]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(i+n.left+n.right,"px")).style("height","".concat(a+n.top+n.bottom,"px")).style("left","".concat(n.left,"px")).style("top","".concat(n.top,"px"));var c=d3.hierarchy(e,function(p){return p.children}).sum(function(p){return p.value}),u=o(c);this.total=d3.sum(u.leaves(),function(p){return p.value}),ce.appendTooltip(),this.root.datum(c).selectAll(".chart-treemap-node").data(u.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",function(p){return"".concat(p.x0,"px")}).style("top",function(p){return"".concat(p.y0,"px")}).style("width",function(p){return"".concat(Math.max(0,p.x1-p.x0-1),"px")}).style("height",function(p){return"".concat(Math.max(0,p.y1-p.y0-1),"px")}).style("background",function(p){return p&&p.parent&&p.parent.data?r(p.parent.data.name):""}).call(function(p){p._groups.forEach(function(m){m.forEach(function(v){var w,C=v.__data__;N.addAttributes($(v),C,t.settings.attributes,(w=C.data.name)===null||w===void 0||w==null?void 0:w.toLowerCase(),!0)})})}).on("mouseenter.treemap",function(p,m){var v=this.getBoundingClientRect(),w=this.querySelector(".chart-treemap-percent").innerText,C=m.parent.data.tooltip;if(!(!C&&v.width>60&&v.height>50)){C=C?(C=C.replace("%percent%",w)).replace("{{percent}}",w):"<p><b>".concat(m.data.name," </b> ").concat(w,"</p>");var A=ce.tooltipSize(C),S=v.left-A.width/2+12,M=v.top-A.height-6;ce.showTooltip(S,M,C,"top")}}).on("mouseleave.treemap",function(){clearInterval(void 0),ce.hideTooltip()}),this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-text").text(function(p){return p.data.name}),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text(function(p){return d3.format(t.settings.labelFormatter)(p.value/t.total)})}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var e=this;return this.element.on("updated.".concat(ys),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(ys),function(){e.handleResize()}),this.element.on("resize.".concat(ys),function(){e.handleResize()})),$("html").on("themechanged.".concat(ys),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=N.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat(ys)),$("body").off("resize.".concat(ys)),$("html").off("themechanged.".concat(ys)),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),ce.removeTooltip(),this.teardown(),$.removeData(this.element[0],ys)}},$.fn.treemap=function(e){return this.each(function(){var t=$.data(this,ys);t?t.updated(e):t=$.data(this,ys,new Yl(this,e))})},$.fn.virtualscroll=function(e){return this.each(function(){var t=$.data(this,Er);t?t.updated(e):t=$.data(this,Er,new lo(this,e))})},$.fn.weekview=function(e){return this.each(function(){var t=$.data(this,Se);t?t.updated(e):t=$.data(this,Se,new tt(this,e))})};var ts="wizard",Bp={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function Kl(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Bp),this.init()}function Rr(e,t,n,i,a,r){var o=a.placeholder;return o&&e===""?({}.toString.call(o)==="[object Function]"?o=o(t,n,i,a,r):r&&r instanceof Object&&o in r&&(o=r[o]),o):""}function Xc(e,t,n,i,a){var r,o=i?i.disabled:null;return typeof o=="function"?o(e,t,n,i,a):(r=o)!=null&&(typeof r=="boolean"&&r===!0||typeof r=="string"&&r.toLowerCase()==="true")}Kl.prototype={init:function(){this.namespace=N.uniqueId({classList:[ts]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var e=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&e.ticks){for(var t=function(o,c){return o.replace(/{{(\w+)}}/g,function(u,p){return c[p]})},n={state:"",href:"#",label:""},i=0;i<e.ticks.length;i++){var a=t(e.ticksTemplate,$.extend({},n,e.ticks[i]));a=a.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var r=$(a);e.ticks[i].ngClick&&r.attr("ng-click",e.ticks[i].ngClick),this.bar.append(r)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach(function(o){o.classList.contains("is-disabled")&&["onclick","ng-click"].forEach(function(c){return o.removeAttribute(c)})}),this.header[0].style.opacity="1",this},setLabelsData:function(){var e=this,t=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],t.forEach(function(n){var i=n.textContent,a=n.getAttribute("data-shortlabel");a||(a=n.getAttribute("shortlabel"));var r={label:i,shortLabel:a,node:n,jqEl:$(n)};a&&a!=="undefined"||(n.removeAttribute("data-shortlabel"),n.removeAttribute("shortlabel"),delete r.shortLabel),e.labels.push(r)}),this},adjustLabels:function(){var e=this,t=this.header[0].getBoundingClientRect(),n=parseFloat(window.getComputedStyle(this.bar[0]).width),i=100/(this.labels.length-1)/100*n-15,a=[],r=[],o=function(w){delete w.isEllipsis,w.node.classList.remove("is-ellipsis"),w.node.style.width="",e.removeTooltip(w)},c=function(w){var C=e.labels[w].node;if(a.indexOf(w)===-1){var A=e.labels[w].shortLabel;A?(C.textContent=A,a.push(w),o(e.labels[w])):(C.classList.add("is-ellipsis"),C.style.width="".concat(i,"px"),e.setTooltip(e.labels[w]),e.labels[w].isEllipsis=!0)}C.style.left="-".concat((C.offsetWidth-C.parentNode.offsetWidth)/2,"px")},u=function(){var w=function(S,M,I){if(S.isEllipsis){var z=parseFloat(S.node.style.width)-M;S.node.style.width="".concat(z,"px"),S.node.style.left="-".concat((z-S.node.parentNode.offsetWidth)/2,"px")}else{var V=parseFloat(S.node.style.left)+M*(I?-1:1);S.node.style.left="".concat(V,"px")}},C=e.labels[0],A=C.node.rect||C.node.getBoundingClientRect();t.left>A.left&&w(C,t.left-A.left),A=(C=e.labels[e.labels.length-1]).node.rect||C.node.getBoundingClientRect(),t.right<A.right&&w(C,A.right-t.right,!0)};this.labels.forEach(function(w){var C=w.node;C.textContent=w.label,C.style.left="-".concat((C.offsetWidth-C.parentNode.offsetWidth)/2,"px"),o(w)}),u();var p=function(w,C){return!(w.right<C.left||w.left>C.right||w.bottom<C.top||w.top>C.bottom)},m=function(){e.labels.forEach(function(S){S.rect=S.node.getBoundingClientRect()}),r=[];for(var w=0,C=e.labels.length;w<C;w++)if(w<C-1){var A=w+1;p(e.labels[w].rect,e.labels[A].rect)&&r.push([w,A])}},v=50;do m(),r.forEach(function(w){var C=e.labels[w[0]].node,A=e.labels[w[1]].node,S=C.offsetWidth>A.offsetWidth?0:1,M=w[S],I=S?w[0]:w[1];c(M),p(e.labels[M].rect,e.labels[I].rect)&&c(I)}),u(),m(),v--;while(r.length&&v>0);return u(),this.labels.forEach(function(w){delete w.isEllipsis,delete w.rect}),this},setTooltip:function(e){var t=this;e.jqEl.tooltip({content:e.label,placement:"bottom"}).on("blur.".concat(ts),function(){return t.removeTooltip(e)})},removeTooltip:function(e){var t=e.jqEl.data("tooltip");t&&(t.element.off("blur.".concat(ts)),t.destroy())},positionTicks:function(){var e=this.ticks.length,t=100/(e-1);this.ticks.toArray().forEach(function(n,i){var a=function(o){return o===e-1?100:t*o}(i),r=L&&L.isRTL()?100-a:a;n.style.left="".concat(r,"%"),n.classList.contains("is-disabled")&&n.setAttribute("tabindex","-1")})},updateRange:function(){var e=function(i,a){return parseFloat(window.getComputedStyle(i)[a])},t=this.ticks.filter(".current").last(),n=0;return t.length&&(n=100*e(t[0],"left")/e(t.parent()[0],"width"),n=L&&L.isRTL()?100-n:n),this.completedRange[0].style.width="".concat(n,"%"),this},updated:function(e){return e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var e=this;return this.labels.forEach(function(t){e.removeTooltip(t),t.jqEl.off().removeData()}),delete this.labels,this.ticks.off("click.".concat(ts)),this.element.off("updated.".concat(ts)),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(e,t){return Qs(this.activate,this.select).apply(this,[e,t])},activate:function(e,t){if(e===void 0&&!t)return this;var n,i=this;if(e===void 0||e!=null&&e.type&&e.target||t||(t=e),t=t===void 0?(n=$(e.target)).is(".label")?n.parent():n:typeof t=="number"?i.ticks.eq(t):t,e&&(t.is("[disabled], .is-disabled")||!t.is("a")))return e.preventDefault(),e.stopPropagation(),this;if(this.element.triggerHandler("beforeactivate",[t])===!1)return this;var a=this.ticks.index(t);return this.ticks.removeClass("complete current").eq(a).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[t]),setTimeout(function(){i.element.trigger("afteractivated",[t])},300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],ts)},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(ts),function(){t.updated()}),this.ticks.on("click.".concat(ts),function(n){t.activate(n,$(this))}),$("body").on("resize.".concat(this.namespace),function(){e.adjustLabels()}),this}},$.fn.wizard=function(e){return this.each(function(){var t=$.data(this,ts);t?t.updated(e):t=$.data(this,ts,new Kl(this,e))})};var Sn={Text:function(e,t,n){return n==null||n===""?"":n.toString()},Input:function(e,t,n,i){return i.inlineEditor?'<label for="datagrid-inline-input-'.concat(e,"-").concat(t,'" class="audible">').concat(i.name,'</label><input id="datagrid-inline-input-').concat(e,"-").concat(t,'" class="').concat(i.align==="right"?"is-number-mask":"",'" value="').concat(n,'">'):n==null||n===""?"":n.toString()},Placeholder:function(e,t,n,i,a){var r=Rr(n,e,t,n,i,a);return r!==""?'<span class="is-placeholder">'.concat(r,"</span>"):n==null||n===""?"":n.toString()},Ellipsis:function(e,t,n,i){var a=n==null||n===""?"":n.toString();return i.textOverflow="ellipsis",a},Password:function(e,t,n){return(n==null||n===""?"":n.toString()).replace(/./g,"*")},Readonly:function(e,t,n){return'<span class="is-readonly">'.concat(n??"","</span>")},RowNumber:function(e,t,n,i,a,r){var o,c=r.runningCount||1;return(r==null||(o=r?.pagerAPI)===null||o===void 0||o==null?void 0:o.activePage)>1&&(c+=(r.pagerAPI.activePage-1)*r.pagerAPI.settings.pagesize),'<span class="is-readonly">'.concat(c,"</span>")},Date:function(e,t,n,i,a,r){var o,c=n??"",u=!1,p=arguments.length>6&&arguments[6]!==void 0&&arguments[6]?null:i.dateFormat,m=a?Rr(c,e,t,n,i,a):"";return m!==""&&(u=!0),typeof n=="string"&&n?(o=i.sourceFormat?L.parseDate(n,typeof i.sourceFormat=="string"?{pattern:i.sourceFormat}:i.sourceFormat):L.parseDate(n,typeof p=="string"?{pattern:p}:p))?c=L.formatDate(o,typeof p=="string"?{pattern:p}:p):(c=L.formatDate(n,typeof p=="string"?{pattern:p}:p))!=="NaN/NaN/NaN"&&c||c===""||(c=n):n&&(c=L.formatDate(n,typeof p=="string"?{pattern:p}:p)),i.editor&&a!==!0?(c!=null&&c!==""||(c="",m&&(u=!0,c=m)),'<span class="trigger '.concat(u?"is-placeholder":"",'">').concat(c,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]}))):u?"":c},Time:function(e,t,n,i,a){var r,o=n??"",c=at(L)==="object"&&L.calendar().dateFormat?L.calendar().dateFormat.short:null,u=at(L)==="object"&&L.calendar().timeFormat?L.calendar().timeFormat:null;return typeof n=="string"&&n?(r=L.formatDate(function(p){if(p==="")return null;var m=p.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(m===null)return null;var v=function(S){return isNaN(parseInt(S,10))?0:parseInt(S,10)},w=L.currentLocale.data.calendars[0].dayPeriods,C=new Date,A=v(m[1]);return(p.indexOf(w[0])>-1||p.indexOf(w[1])>-1)&&(A-=A===12?12:0,A+=p.indexOf(w[1])>-1?12:0),C.setHours(A),C.setMinutes(v(m[2])),C.setSeconds(v(m[3])),C}(n),{pattern:"".concat(c," ").concat(i.sourceFormat||i.timeFormat||u)}))&&(o=r.slice(r.indexOf(" "))):n&&(r=L.formatDate(n,{pattern:"".concat(c," ").concat(i.sourceFormat||i.timeFormat||u)}))&&(o=r.slice(r.indexOf(" "))),o=o.replace(/^\s/,""),i.editor&&a!==!0?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(e,t,n){return n??""},Lookup:function(e,t,n,i,a){var r=n??"",o=!1,c=Rr(r,e,t,n,i,a);return c!==""&&(o=!0),i.editor?(i.editorOptions&&typeof i.editorOptions.field=="function"&&(r=i.editorOptions.field(a,null,null),o=!1),r!=null&&r!==""||(r="",c&&(o=!0,r=c)),'<span class="trigger '.concat(o?"is-placeholder":"").concat(i.align==="right"?"align-text-right":"",'">').concat(r,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):o?'<span class="is-placeholder">'.concat(c,"</span>"):r},Decimal:function(e,t,n,i,a){var r=n,o=/[\s]*($)?[#,0-9\s\.]+%?[\s]*/;L!==void 0&&r!=null&&r!==""&&o.test(r)&&(r=L.formatNumber(n,i.numberFormat));var c=Rr(r=r!=null&&r!=="NaN"&&o.test(r)?r:"",e,t,n,i,a);return c!==""?'<span class="is-placeholder">'.concat(c,"</span>"):r},Integer:function(e,t,n,i){var a=n;return L!==void 0&&a!=null&&a!==""&&(a=L.formatNumber(n,i.numberFormat||{style:"integer"})),a==null||a==="NaN"?"":a},Hyperlink:function(e,t,n,i,a,r){var o=Xc(e,t,n,i,a)?" disabled":"",c=i.href||"#";if(i.href&&typeof i.href=="function"){if((c=i.href(e,t,a,i))==null)return i.text||n}else c=c.replace("{{value}}",n);var u=i.text||n;if(!u&&!i.icon)return"";var p="";return typeof i.cssClass=="string"&&(p=i.cssClass),typeof i.cssClass=="function"&&(p=i.cssClass(e,t,n,i,a)||""),i.icon?'<a href="'.concat(c,'"').concat(o,' class="btn-icon row-btn ').concat(p,'" ').concat(r.settings.rowNavigation?'tabindex="-1"':"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",`>
          `).concat($.createIcon({icon:i.icon,file:i.iconFile}),`
          <span class="audible">`).concat(u,`</span>
        </a>`):'<a href="'.concat(c,'"').concat(o," ").concat(r.settings.rowNavigation?'tabindex="-1"':"",' class="hyperlink ').concat(p,'"').concat(i.target?' target="'.concat(i.target,'"'):"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">").concat(u,"</a>")},Template:function(e,t,n,i,a){var r=i.template,o="";return Xn&&a&&r&&(o=Xn.compile("{{#dataset}}".concat(r,"{{/dataset}}"),{dataset:a})),o},Drilldown:function(){var e=L.translate("Drilldown");return e===void 0&&(e=""),`<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">
         `.concat($.createIcon({icon:"drilldown"}),`
        <span>`).concat(e,`</span>
      </button>`)},RowReorder:function(){var e=L.translate("ReorderRows");return e===void 0&&(e="Reorder Rows"),`<div class="datagrid-reorder-icon draggable">
         `.concat($.createIcon({icon:"drag"}),`
        <span class="audible">`).concat(e,`</span>
      </div>`)},Checkbox:function(e,t,n,i,a,r){var o;o=i.isChecked?i.isChecked(n):n!==void 0&&(n===!0||parseInt(n,10)===1);var c='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(L.translate(o?"Yes":"No"),"</span>"),u=r.wasJustUpdated;return r.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" class="datagrid-checkbox'.concat(o?" is-checked ".concat(u?" ":" no-animation"):"",'"></span>').concat(c,"</div>")},SelectionCheckbox:function(e,t,n,i,a,r){var o=n!==void 0&&n===!0;n||(o=r.isRowSelected(a));var c=" ";if(r.settings.columnIds.length>0)for(var u=0;u<r.settings.columnIds.length;u++)c+=a[r.settings.columnIds[u]];return c=_e.ensureAlphaNumericWithSpaces(c),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(i.name?i.name:L.translate("Select")+c,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(o?" is-checked no-animate":"",'"></span></div>')},SelectionRadio:function(e,t,n,i,a,r){var o=n!==void 0&&n===!0;n||(o=r.isRowSelected(a));var c=" ";if(r.settings.columnIds.length>0)for(var u=0;u<r.settings.columnIds.length;u++)c+=a[r.settings.columnIds[u]];return c=_e.ensureAlphaNumericWithSpaces(c),'<div class="datagrid-checkbox-wrapper"><span role="radio" aria-label="'.concat(i.name?i.name:L.translate("Select")+c,'" class="datagrid-radio datagrid-selection-radio ').concat(o?" is-checked":"",'"></span></div>')},Actions:function(e,t,n,i){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(i.menuId,`">
        <span class="audible">`).concat(i.title||L.translate("More"),`</span>
        `).concat($.createIcon({icon:"more"}),`
      </button>`)},Textarea:function(e,t,n){return'<span class="datagrid-multiline-text">'.concat(n??"","</span>")},Editor:function(e,t,n,i){var a=n??"",r="is-editor";return r+=i.singleline?" is-singleline":" datagrid-multiline-text",r+=i.contentTooltip?" content-tooltip":"",'<div class="'.concat(r,'">').concat(_e.unescapeHTML(a),"</div>")},Expander:function(e,t,n,i,a,r){var o=N.stringAttributes(r,r.settings.attributes,"btn-expand-row-".concat(e));return"<button ".concat(o,' type="button" aria-label="').concat(L.translate("ExpandCollapse"),'" ').concat(a.isSummaryRow?"disabled=true":"",' class="btn-icon datagrid-expand-btn ').concat(a.expanded?"is-expanded":"",`" tabindex="-1">
      <span class="icon plus-minus `).concat(a.expanded?"active":"",`"></span>
      </button>`).concat(n?"<span> ".concat(n,"</span>"):"")},GroupRow:function(e,t,n,i,a,r){var o,c=r.settings.groupable,u={left:"",center:"",right:""},p=r!=null&&(o=r?.settings)!==null&&o!==void 0&&o?.rowReorder?this.RowReorder():"",m="",v=c.expanded===void 0||c.expanded;c.expanded&&typeof c.expanded=="function"&&(v=c.expanded(e,t,n,i,a,r));for(var w=0;w<c.fields.length;w++)m+=a[c.fields[w]]+(w===0?"":",");c.groupRowFormatter&&(m=c.groupRowFormatter(e,t,n,i,a,r));var C='<button type="button" class="btn-icon datagrid-expand-btn'.concat(v?" is-expanded":"",`" tabindex="-1">
    <span class="icon plus-minus`).concat(v?" active":"",`"></span>
    <span class="audible">`).concat(L.translate("ExpandCollapse"),`</span>
    </button>`).concat(p,"<span> ").concat(m,"</span>");return u[r.getContainer(c.fields?c.fields[0]:"")]=C,u},GroupFooterRow:function(e,t,n,i,a,r){var o=r.settings.groupable,c={left:"",center:"",right:""},u=r.settings.frozenColumns.left.length,p=r.settings.frozenColumns.right.length,m=r.columnIdxById(o.aggregate),v=r.getContainer(o.aggregate);return c.left='<td role="gridcell" colspan="'.concat(u,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat(v==="left"?a.sum:"<span>&nbsp;</span>","</div></td>"),c.center='<td role="gridcell" colspan="'.concat(m-u-p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat(v==="center"?a.sum:"<span>&nbsp;</span>","</div></td>"),c.right='<td role="gridcell" colspan="'.concat(p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat(v==="right"?a.sum:"<span>&nbsp;</span>","</div></td>"),o.groupFooterRowFormatter&&(c[v]=o.groupFooterRowFormatter(m,e,t,n,i,a,r)),c},SummaryRow:function(e,t,n,i){var a="",r=i.summaryText||"";return i.summaryTextPlacement==="after"&&(a=r,r=""),L!==void 0&&i.numberFormat&&n!=null&&n!==""&&(n=L.formatNumber(+n,i.numberFormat)),r+(n==null||n===""?"":n.toString())+a},Tree:function(e,t,n,i,a,r){var o=!a||a.expanded,c=r&&r.settings.treeDepth&&r.settings.treeDepth[e]?r.settings.treeDepth[e].depth:0,u=a&&a.isAllChildrenFiltered,p=u?" disabled":"";o&&u&&(o=!1);var m=r.settings.rowHeight==="extra-small"||r.settings.rowHeight==="small"?24:27,v='<button type="button" class="btn-icon datagrid-expand-btn'.concat(o?" is-expanded":"",'" tabindex="-1"').concat(c?' style="margin-left: '.concat(c?"".concat(m*(c-1),"px"):"",'"'):"").concat(p,`>
      <span class="icon plus-minus `).concat(o?" active":"",`"></span>
      <span class="audible">`).concat(L.translate("ExpandCollapse"),`</span>
      </button>`).concat(n?" <span>".concat(n,"</span>"):""),w=' <span class="datagrid-tree-node"'.concat(c?' style="margin-left: '.concat(c?"".concat(m*c,"px"):"",'"'):"",">").concat(n,"</span>");return a&&a[i.children?i.children:"children"]?v:w},ClassRange:function(e,t,n,i){var a=i.ranges,r="",o="";if(!a)return{};for(var c=0;c<a.length;c++)n>=a[c].min&&n<=a[c].max&&(r=a[c].classes,o=a[c].text?a[c].text:r.split(" ")[0]),n===_e.escapeHTML(a[c].value)&&(r=a[c].classes,o=a[c].text?a[c].text:n);return{classes:r,text:o}},Badge:function(e,t,n,i){var a=i.color,r=i.name;if(i.ranges){var o=Sn.ClassRange(e,t,n,i);a=o.classes,r=o.text}return'<span class="badge '.concat(a,'">').concat(n,' <span class="audible">').concat(r,"</span></span>")},Tag:function(e,t,n,i){var a,r=Sn.ClassRange(e,t,n,i);return i!=null&&(a=i?.editorOptions)!==null&&a!==void 0&&a?.clickable?'<span class="tag is-linkable hide-focus '.concat(r.classes,'"><a class="tag-content" href="#">#').concat(n,`</a><button class="btn-linkable" focusable="false" tabindex="-1">
        <svg class="icon caret-right" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>
      </button></span>`):'<span class="tag '.concat(r.classes,' hide-focus"><span class="tag-content">').concat(n,"</span></span>")},Alert:function(e,t,n,i){var a=Sn.ClassRange(e,t,n,i),r=$.createIcon({icon:"".concat(a.classes),classes:["icon","datagrid-alert-icon","icon-".concat(a.classes)]});return"".concat(r,'<span class="datagrid-alert-text">').concat(a.text==="value"?n:a.text,"</span>")},Image:function(e,t,n,i){return'<img class="'.concat(i.click?"datagrid-img actionable":"datagrid-img",'" src="').concat(n,'" alt="').concat(i.alt?i.alt:L.translate("Image"),'"').concat(i.dimensions?' style="height:'.concat(i.dimensions.height,";width:").concat(i.dimensions.height,'"'):"","/>")},Color:function(e,t,n,i){var a=Sn.ClassRange(e,t,n,i),r=n==null||n===""?"":n.toString();return'<span class="'.concat(a.classes,'">').concat(r,"</span>")},Colorpicker:function(e,t,n,i){var a=n==null||n===""?"":n.toString();if(i.inlineEditor)return a;var r="swatch".concat(n===""?" is-empty":"");return a='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(r,'" style="background-color: ').concat(n,'"></span><input class="colorpicker" id="colorpicker-').concat(t,'" name="colorpicker-').concat(t,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(n,'">'),a+='<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(e,t,n,i,a,r){var o,c=Xc(e,t,n,i,a)?" disabled":"",u=i.contentWidth?' style="width: '.concat(i.contentWidth,'"'):"";o=i.text?i.text:n==null||n===""?"":n.toString();var p='<button type="button"'.concat(c).concat(u,' class="').concat(i.icon?"btn-icon":"btn-secondary"," row-btn ").concat(i.cssClass?i.cssClass:"",'"').concat(r.settings.rowNavigation?' tabindex="-1"':""," >");return i.icon&&(p+=$.createIcon({icon:i.icon,file:i.iconFile})),p+="<span>".concat(o,"</span></button>")},MultiSelect:function(e,t,n,i,a){var r,o,c,u=n,p=!1;if(i.options&&n!==void 0){(at(r=i.caseInsensitive&&typeof n=="string"?n.toLowerCase():n)==="object"||Array.isArray(r))&&(u="");for(var m=0,v=i.options.length;m<v;m++){if(o=i.options[m],c=i.caseInsensitive&&typeof o.value=="string"?o.value.toLowerCase():o.value,(at(r)==="object"||Array.isArray(r))&&i.editorOptions.multiple)for(var w=0;w<r.length;w++)i.options[m].value===r[w]&&(u+="".concat(o.label,", "));if(c===r){u=o.label;break}}u=u.replace(/,\s*$/,"")}var C=Rr(u,e,t,n,i,a);C!==""&&(p=!0,u=C);var A='<span class="trigger dropdown-trigger '.concat(p?"is-placeholder":"",'">').concat(u,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){A='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var S=0,M=i.options.length;S<M;S++){var I=i.options[S],z=void 0;z=I.label!==void 0?I.label:I.value!==void 0?I.value:"",A+="<option".concat(I.id===void 0?"":' id="'.concat(I.id,'"'),'  value="').concat(I.value,'"').concat(I.selected||I.value===r?" selected ":"",">").concat(z,"</option>")}A+=`</select>
      <div class="dropdown-wrapper is-inline">
        <div class="dropdown"><span>`.concat(u,`</span></div>
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-dropdown"></use>
        </svg>
      </div>`)}return A},Dropdown:function(e,t,n,i,a){var r,o,c=n,u=!1;if(i.options&&n!==void 0){r=i.caseInsensitive&&typeof n=="string"?n.toLowerCase():n;for(var p=0,m=i.options.length;p<m;p++)if(o=i.options[p],(i.caseInsensitive&&typeof o.value=="string"?o.value.toLowerCase():o.value)===r){c=o.label;break}}var v=Rr(c,e,t,n,i,a);v!==""&&(u=!0,c=v);var w='<span class="trigger dropdown-trigger '.concat(u?"is-placeholder":"",'">').concat(c,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){w='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var C=0,A=i.options.length;C<A;C++){var S=i.options[C],M=void 0;M=S.label!==void 0?S.label:S.value!==void 0?S.value:"",w+="<option".concat(S.id===void 0?"":' id="'.concat(S.id,'"'),'  value="').concat(S.value,'"').concat(S.selected||S.value===r?" selected ":"",">").concat(M,"</option>")}w+=`</select>
      <div class="dropdown-wrapper is-inline">
        <div class="dropdown"><span>`.concat(c,`</span></div>
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-dropdown"></use>
        </svg>
      </div>`)}return w},Fileupload:function(e,t,n,i){var a=n==null||n===""?"":n.toString();return i.inlineEditor||(a=$.trim(a)===""?'<span class="trigger">'.concat(a,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(a,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),a},Spinbox:function(e,t,n,i){var a=n==null||n===""?"":n.toString();return i.inlineEditor&&(a='<label for="spinbox-'.concat(t,`" class="audible">Quantity</label>
        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>
        <input id="spinbox-`).concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="').concat(n,`">
        <span class="spinbox-control up">+</span></span>`)),a},Favorite:function(e,t,n,i,a,r){var o;o=i.isChecked?i.isChecked(n):n!==void 0&&n===!0;var c=i.editor&&r.settings.editable;return o?'<span aria-label="'.concat(L.translate("Favorite"),'" class="icon-favorite').concat(c?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):i.showEmpty?'<span aria-label="'.concat(L.translate("Favorite"),'" class="icon-favorite').concat(c?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(e,t,n,i,a){return a&&a.rowStatus?"".concat($.createIcon({icon:a.rowStatus.icon,classes:["icon","icon-".concat(a.rowStatus.icon)]}),'<span class="audible">').concat(a.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(e,t,n,i){var a=L.formatNumber(100*n,i.numberFormat||{minimumFractionDigits:2,maximumFractionDigits:2}),r=a.replace(",","."),o="".concat(a,"%"),c=Sn.ClassRange(e,t,r,i),u=i.target;i.text&&(o=(o=(o=(o=(o=(o=(o=i.text).replace("{{value}}",n)).replace("<% value %>",n)).replace("<%value%>",n)).replace("{{percent}}",a)).replace("<% percent %>",a)).replace("<%percent%>",a),i.showPercentText=!0);var p=i.ranges&&c.classes?c.classes:"primary";return`<div class="total bar chart-completion-target chart-targeted-achievement">
              <div class="target remaining bar" style="width: `.concat(u||0,`%;"></div>
              <div class="completed bar `).concat(p,'" style="width: ').concat(r,`%;"></div>
              `).concat(i.showPercentText?'<div class="chart-targeted-text l-center">'.concat(o,`</div>
            </div>`):'<div class="audible">'.concat(a,"%</div>"))},ProcessIndicator:function(e,t,n){if(!n.steps)return"";for(var i='<div class="process-indicator compact responsive"><div class="display">',a=0;a<n.steps;a++){var r=a===(n==null||n==null?void 0:n.current)-1;i+=`<div class="step">
        <div class="lines">
          <span class="indicator `.concat(r?" current processing":""," ").concat(a<(n==null||n==null?void 0:n.current)?" darker":"",`"></span>
          <span class="separator `).concat(a<(n==null||n==null?void 0:n.current)?" darker":"",`"></span>
        </div>
      </div>`)}return i+="</div></div>"}},ga={cleanExtra:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=[];if(!t&&e)i=ga.datasetToHtml(e,n);else{var a=t.settings.groupable?t.originalDataset:t.settings.dataset,r=t.table.clone(!0);(t.settings.frozenColumns.left.length||t.settings.frozenColumns.right.length)&&r.find(".datagrid-header tr:first()").html(t.headerNodes().clone(!0)),i=ga.appendRows(a,r[0],t,n)}if(!e&&!i[0].querySelector("thead")){for(var o=i[0].querySelector("tbody"),c=i[0].createTHead(),u=c.insertRow(0),p=t.headerNodes(),m=0;m<p.length;m++){var v=p[m],w=u.insertCell(m);w.innerHTML=v.querySelector(".datagrid-header-text").textContent.trim(),w.setAttribute("class",v.classList),w.setAttribute("id",v.getAttribute("id")),v.getAttribute("data-exportable")&&w.setAttribute("data-exportable",v.getAttribute("data-exportable"))}o.parentNode.insertBefore(c,o)}return i=function(C){var A=function(M){M.parentNode&&M.parentNode.removeChild(M)},S=[];return[].slice.call(C[0].querySelectorAll("tr")).forEach(function(M){M.classList.contains("is-hidden")||M.classList.contains("datagrid-expandable-row")?A(M):[].slice.call(M.querySelectorAll("th, td, div, span")).forEach(function(I){if(I.classList.contains("is-hidden"))A(I);else{var z=I.getAttribute("data-exportable");if(z&&z==="no"){var V=I.id.match(/-header-\d+/g);return V=(V=V?V[0].match(/\d+/g):null)?V[0]:I.id.slice(-1),V=parseInt(V,10),S.push(V+1),void A(I)}var U=I.getAttribute("aria-colindex");if(I.tagName.toLowerCase()==="td"&&U&&S.indexOf(parseInt(U,10))!==-1)A(I);else{for([].slice.call(I.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach(function(J){return A(J)});I.attributes.length>0;)I.removeAttribute(I.attributes[0].name);var G=I.textContent;G.substr(0,1)==="="&&G.substr(1,1)!==""&&(I.textContent="'".concat(G,"'"))}}})}),C}(i),t&&t.settings.exportConvertNegative&&[].slice.call(i[0].querySelectorAll("td")).forEach(function(C){C.textContent=C.textContent.replace(/^(.+)(-$)/,"$2$1")}),i},save:function(e,t,n){var i=(t.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],a=typeof i=="string"&&/\b(xlsx|xls)\b/g.test(i),r=new Blob([e],{type:"application/csv;charset=utf-8;"});if(n&&!a){for(var o=[255,254],c=0;c<e.length;++c){var u=e.charCodeAt(c);o.push(255&u),o.push(u/256>>>0)}r=new Blob([new Uint8Array(o)],{type:"text/plain;charset=UTF-16LE;"})}if(window.URL.createObjectURL){a&&(r=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8;"}));var p=URL.createObjectURL(r),m=document.createElement("a");m.href=p,m.download=t,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}else{var v=document.createElement("a");v.href=this.base64(e),v.download=t,document.body.appendChild(v),v.click(),document.body.removeChild(v)}},datasetToHtml:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n="<tbody>",i=function(o){n+="<tr>",Object.keys(e[o]).forEach(function(c,u){var p=e[o];if(t&&c!=="id"&&!c.includes("Id"))if(isNaN(p[c])){var m=Date.parse(p[c]);isNaN(m)||(p[c]=L.formatDate(m))}else{var v=parseFloat(p[c]);p[c]=L.formatNumber(v,{style:Number.isInteger(v)?"integer":"decimal"})}p&&Object.prototype.hasOwnProperty.call(p,c)&&(n+="<td>".concat(p[c],"</td>"))}),n+="</tr>"},a=0,r=e.length;a<r;a++)i(a);return n+="</tbody>",n=_e.sanitizeHTML(n),$("<table></table>").append(n)}};ga.appendRows=function(e,t,n){var i,a=arguments.length>3&&arguments[3]!==void 0&&arguments[3],r=(i=t)&&(i instanceof jQuery||i.constructor.prototype.jquery)?t:$(t);t=r[0];var o="",c=t.querySelector("tbody");c.innerHTML="";var u=function p(m,v){if(!m._isFilteredOut){var w=n.rowHtml(m,v,v,!1,!1,v,!0,a),C=document.createElement("tr");if(C.innerHTML=w.left+w.center+w.right,o+=C.outerHTML,m.children)for(var A=0,S=m.children.length;A<S;A++)p(m.children[A],A)}};return e.forEach(function(p,m){u(p,m)}),o=_e.sanitizeHTML(o),c.insertAdjacentHTML("beforeend",o),r},ga.base64=function(e){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(e)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(e)))},ga.copyToDataSet=function(e,t,n,i,a){for(var r=function(A,S,M,I){for(var z=0,V=A.length;z<V;z++){var U=S.columns[I];U.formatter!==Sn.Readonly&&(U.editor.name==="input"?(U.filterType==="integer"||U.filterType==="decimal"||U.filterType==="number")&&isNaN(A[z].trim())||(M[U.field]=A[z]):U.editor.name==="input"&&(isNaN(Date.parse(A[z]))||(M[U.field]=new Date(A[z])))),I++}},o=e.length,c=a.settings.columns.length,u=0;u<o;u++){var p=e[u].split("	"),m=n;if(t<i.length){var v=i[t];r(p,a.settings,v,m)}else{for(var w={},C=0;C<c;C++)w[a.settings.columns[C].field]="";r(p,a.settings,w,m),i.push(w)}t++}a.renderRows(),a.syncSelectedUI(),a.pagerRefresh("bottom")},ga.exportToExcel=function(e,t,n){var i,a=arguments.length>3&&arguments[3]!==void 0&&arguments[3],r=arguments.length>4?arguments[4]:void 0,o={worksheet:t||"Worksheet",table:ga.cleanExtra(n,r,a)[0].innerHTML};e="".concat(e||r.element[0].id||"Export",".xls"),ga.save((i=o,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,function(c,u){return i[u]})),e)},ga.exportToCsv=function(e,t){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sep=,",a=arguments.length>3&&arguments[3]!==void 0&&arguments[3],r=arguments.length>4?arguments[4]:void 0,o=function(C){return/^(false|0+|null)$/gi.test(C)},c={firstLine:!0,char:",",flexChar:!0,flexUtf8:!0};if(i!=="sep=,"&&!o(i)){var u=function(C){return C!=='"'?C:c.char};if((n=i)&&at(n)==="object"&&n.constructor===Object)c.firstLine=!o(i.firstLine),c.flexChar=!o(i.flexChar),c.flexUtf8=!o(i.flexUtf8),typeof i.char!="string"||i.char.length!==1||o(i.char)||(c.char=u(i.char));else if(typeof i=="string")if(i.length!==1||o(i)){if(/^sep=.$/.test(i)){var p=i.replace("sep=","");c.char=o(p)?c.char:u(p)}}else c.char=u(i)}var m=ga.cleanExtra(t,r,a),v=!/^[\u0000-\u007f]*$/.test(m[0].textContent)&&c.flexUtf8,w=function(C,A){var S=A&&c.flexChar?"	":c.char,M=[];return[].slice.call(C[0].querySelectorAll("tr")).forEach(function(I){var z=[];[].slice.call(I.querySelectorAll("td, th")).forEach(function(V){return z.push(V.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())}),M.push(z.join('"'.concat(S,'"')))}),c.firstLine&&(c.flexUtf8&&!A||!c.flexUtf8&&c.char!==",")&&M.unshift(["sep=".concat(c.char)]),"".concat(c.flexUtf8?"":"\uFEFF",'"').concat(M.join(`"
"`),'"')}(m,v);e="".concat(e||r.element[0].id||"Export",".csv"),ga.save(w,e,v)};var eu,cl,Qc,Jc,mi=(eu=N.equals,cl=function(e,t){return e.reduce(function(n,i){var a,r=function(o,c){for(var u={},p=0,m=c.length;p<m;p++)u[c[p]]=o[c[p]];return u}(i,t);return a=r,n.some(function(o){return eu(o,a)})||n.push(r),n},[])},Qc=function(e,t){var n=[];return e.map(function(i,a){for(var r in t)if(t[r]!==i[r])return;i.idx=a,n.push(i)}),n},(Jc=function(e,t){return cl(e,t).map(function(n){return{key:n,values:Qc(e,n).map(function(i){return i})}})}).register=function(e,t){return Jc[e]=function(n,i,a){return this.extra=a,Jc(n,i).map(t,this)}},Jc);mi.register("none",function(e){return $.extend({},e.key,{values:e.values})}),mi.register("sum",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return i!=null});return $.extend({},e.key,{values:e.values},{sum:n.reduce(function(i,a){return Number(i)+Number(a)},0)})}),mi.register("max",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{max:Math.max.apply(Math,Nt(e.values.map(function(n){return n[t]}).filter(function(n){return n!=null})))})}),mi.register("min",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{min:Math.min.apply(Math,Nt(e.values.map(function(n){return n[t]}).filter(function(n){return n!=null})))})}),mi.register("avg",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return i!=null});return $.extend({},e.key,{values:e.values},{avg:n.reduce(function(i,a){return Number(i)+Number(a)},0)/n.length})}),mi.register("count",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return i!=null});return $.extend({},e.key,{values:e.values},{count:n.length})}),mi.register("list",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{list:e.values.map(function(n){for(var i=[],a=0,r=t.list.length;a<r;a++){var o=!!t.exclude&&n[t.exclude];n[t.list[a]]&&!o&&i.push({value:n[t.list[a]],key:t.list[a]})}return i})})});var Op={aggregate:function(e,t){for(var n={},i=this,a=function(){if(t[r].aggregator){var c=t[r].field;i.sum=function(w,C){if(C._isFilteredOut)return w;var A;A=c.indexOf(".")>-1?c.split(".").reduce(function(I,z){return I?I[z]:""},C):C[c],A=Number(A);var S=os.decimalPlaces(A),M=os.decimalPlaces(w);return Number((w+A).toFixed(Math.max(S,M)))};var u=e.reduce(i[t[r].aggregator],0);if(c.indexOf(".")>-1)for(var p=n,m=0,v=c.split(".").length;m<v;m++)m===c.split(".").length-1?p[c.split(".")[m]]=u:(c.split(".")[m]in p||(p[c.split(".")[m]]={}),p=p[c.split(".")[m]]);else n[c]=u}},r=0,o=t.length;r<o;r++)a();return n}},tu="lookup",Zc="lookup-datagrid";function dh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=[];return e!=null&&e?.length||t!=null&&t?.length?t!=null&&t?.length?e.length?(e.forEach(function(a){var r=t.find(function(o){return o.name===a.name});i.push(r||{name:a.name,value:"".concat(a.value,"-").concat(n)})}),i):t:i=e.map(function(a){return{name:a.name,value:"".concat(a.value,"-").concat(n)}}):i}var Rp={click:null,field:"id",title:null,icon:"icon-search-list",buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null,clearable:!1,attributes:null,tabbable:!0,dblClickApply:!1,allowDuplicates:!1,cssClass:null};function nu(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,Rp),this.init()}function uh(e,t,n,i,a,r,o,c,u){if(r.align&&e.addClass("l-".concat(r.align,"-text")),r.maxLength&&e.attr("maxlength",r.maxLength),r.uppercase&&e.addClass("uppercase-text"),r.mask&&typeof r.mask=="function"){var p=r.mask(t,n,i,r,u);e.mask({pattern:p,mode:r.maskMode})}else if(r.maskOptions&&typeof r.maskOptions=="function"){var m=r.maskOptions(t,n,i,r,u);e.mask(m)}else r.mask&&e.mask({pattern:r.mask,mode:r.maskMode});var v={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:L.currentLocale.data.numbers?L.currentLocale.data.numbers.group:",",decimal:L.currentLocale.data.numbers?L.currentLocale.data.numbers.decimal:".",negative:L.currentLocale.data.numbers?L.currentLocale.data.numbers.minusSign:"-"}},process:"number"},w=!1;r.maskOptions&&(w=!0),r.numberFormat&&(w=!0,v={patternOptions:{decimalLimit:r.numberFormat.maximumFractionDigits}}),r.maskOptions&&typeof r.maskOptions=="function"&&(w=!1),w&&(r.maskOptions=N.extend(!0,{},v,r.maskOptions),e.mask(r.maskOptions)),r.align&&r.align==="right"||e.removeClass("is-number-mask")}nu.prototype={get isFocused(){var e,t,n=document.activeElement,i=this.element.is(n),a=(e=this.element.parent(".lookup-wrapper")[0])===null||e===void 0||e==null?void 0:e.contains(n),r=(t=this.modal)===null||t===void 0||t==null?void 0:t.element[0].contains(n);return i||a||r},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var e=this,t=this.element,n,i=(n="lookup-wrapper",t.is(".input-xs")&&(n+=" xs"),t.is(".input-sm")&&(n+=" sm"),t.is(".input-lg")&&(n+=" lg"),n);if(this.element.is(".has-actions")&&(i+=" has-actions-wrapper"),this.isInlineLabel)this.inlineLabel.addClass(i);else if(this.container=$('<span class="'.concat(i,'"></span>')),this.element.is(".field-options")){var a=this.element.closest(".field").find(".btn-actions");t.add(a).add(a.next(".popupmenu")).wrapAll(this.container)}else t.wrap(this.container);var r=this.element.next();if(r.is("button.trigger"))this.icon=r;else{this.icon=$(`<button class="btn-icon trigger" type="button">
        <span class="audible"></span>
        `.concat($.createIcon(this.settings.icon),`
      </button>`));var o=this.icon.children(".icon");this.settings.icon!=="icon-search-list"?o.addClass("has-custom-icon"):Be.rtl&&o.addClass("icon-rtl-rotate")}t.after(this.icon),t.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),t.attr("data-mask")&&t.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.makeTabbable(!this.element.is(":disabled")&&this.element.attr("tabindex")!=="-1"&&this.settings.tabbable),this.settings.clearable&&t.searchfield({clearable:!0,attributes:this.settings.attributes,tabbable:!1}),this.settings.clearable&&this.settings.clear&&t.on("cleared",function(c){e.settings.clear(c,e,e.settings.clearArguments)}),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),t.attr("autocomplete")===void 0&&t.attr("autocomplete","off"),Array.isArray(this.settings.attributes)&&(N.addAttributes(t,this,this.settings.attributes,"input"),N.addAttributes(this.icon,this,this.settings.attributes,"trigger"))},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'));var e="".concat(L.translate("Lookup"),". ").concat(L.translate("PressDown")),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>"));var n=L.translate("LookupTriggerButton");this.icon.children("span.audible").text(n)},handleEvents:function(){var e=this;this.icon.on("click.lookup",function(t){e.openDialog(t)}),this.element.on("keyup.lookup",function(t){$("#autocomplete-list").length>0||t.which===40&&e.openDialog(t)})},setTooltip:function(){var e=this;setTimeout(function(){var t=e.element[0].scrollWidth>e.element[0].offsetWidth,n=e.element.data("tooltip");t?e.element.tooltip({content:e.element.val()}):n&&!t&&n.destroy()},100)},openDialog:function(e){var t=this;if(this.isChanged=!1,!this.isOpen&&t.element.triggerHandler("beforeopen")!==!1&&!(t.isDisabled()||t.isReadonly()&&!t.element.hasClass("is-not-editable")))if(t.settings.click)t.settings.click(e,this,t.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow)return this.element.triggerHandler("start"),void this.settings.beforeShow(this,function(i){var a=t.element&&t.element.is(":visible");return i&&t.createGrid(i),!a||typeof i=="boolean"&&i===!1?(t.isOpen=!1,!1):(t.createModal(),t.element.triggerHandler("complete"),t.element.trigger("open",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid),!0)});if(this.settings.options){t.createModal(),t.element.trigger("open",[t.modal,t.grid]),t.modal.element.find(".btn-actions").removeClass("is-selected"),t.grid&&t.grid.cellNode(0,0,!0).attr("tabindex","0");var n=t.modal.element.find(".toolbar .more > .btn-actions");n.length&&setTimeout(function(){N.fixSVGIcons(n)},600),t.element.trigger("afteropen",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid)}}},createModal:function(){var e=this,t='<div id="'.concat(Zc,'"></div>'),n=$('label[for="'.concat(e.element.attr("id"),'"]')),i,a,r=e.isInlineLabel?e.inlineLabelText:n.length?n.clone().find("span").remove().end().text():e.settings.title?e.settings.title:(i=e.settings)!==null&&i!==void 0&&(i=i?.options)!==null&&i!==void 0&&(i=i?.toolbar)!==null&&i!==void 0&&i?.title?(a=e.settings)===null||a===void 0||(a=a?.options)===null||a===void 0||(a=a?.toolbar)===null||a===void 0||a==null?void 0:a.title:"",o=this.settings.modalContent;o&&o instanceof jQuery&&(t=o,o.show()),!o||o instanceof jQuery||(t=o);var c=this.settings.buttons;(this.settings.options&&this.settings.options.selectable==="multiple"&&c.length===0||!e.settings.autoApply&&c.length===0)&&(c=[{text:L.translate("Cancel"),click:function(m,v){v.oldActive=e.icon,v.close()}},{text:L.translate("Apply"),click:function(m,v){e.insertRows(),v.oldActive=e.icon,v.close()},isDefault:!0}]),this.settings.options&&this.settings.options.selectable==="single"&&c.length===0&&e.settings.autoApply&&(c=[{text:L.translate("Cancel"),click:function(m,v){v.oldActive=e.icon,v.close()}},{text:L.translate("Apply"),click:function(m,v){v.oldActive=e.icon,v.close(),e.insertRows()},isDefault:!0}]);var u=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter,p={triggerButton:this.element,title:r,content:t,buttons:c,cssClass:"lookup-modal".concat(u?"":" lookup-no-search"," ").concat(this.settings.cssClass?this.settings.cssClass:""),attributes:dh(this.settings.attributes,[],"modal")};e.settings.modalSettings&&(p=la(la({},p),e.settings.modalSettings)),$("body").modal(p).off("open.lookup").on("open.lookup",function(){e.createGrid()}).off("close.lookup").on("close.lookup",function(){delete e.isOpen,e.element.triggerHandler("close",[e.modal,e.grid]),e.setTooltip()}),e.modal=$("body").data("modal"),this.settings.title||e.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),e.modal.element.off("afterclose.lookup").on("afterclose.lookup",function(){e.closeTearDown()}),setTimeout(function(){$(".modal.is-visible .searchfield").on("keypress.lookup",function(m){return m.keyCode!==13})},300)},closeTearDown:function(){var e=$(".modal.is-visible .searchfield").off("keypress.lookup");e.data()&&e.data("searchfield")&&e.data("searchfield").destroy(),e.data()&&e.data("searchfield")&&(e.data("searchfield").destroy(),e.removeData()),e=null,this.grid&&this.grid.destroy&&($(this.grid.element).off("selected.lookup"),this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var e={},t=[],n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++)e[i[r][o]]!==!0&&(t[t.length]=i[r][o],e[i[r][o]]=!0);return t},createGrid:function(e){var t,n,i=this,a=this;e?(n=e,Zc=e.attr("id"),a.settings.options=e.data("datagrid").settings):n=a.modal.element.find("#".concat(Zc)),this.settings.minWidth&&(n=this.applyMinWidth(n)),a.settings.dblClickApply&&(a.settings.options.dblClickApply=a.settings.dblClickApply),a.settings.options&&(a.settings.options.selectable==="single"&&a.settings.autoApply&&(a.settings.options.cellNavigation=!1,n.find("tr").addClass("is-clickable")),a.settings.options.isList=!0,a.settings.attributes&&(a.settings.options.attributes=dh(a.settings.attributes,[],"datagrid")),n.data("datagrid")||n.datagrid(a.settings.options)),a.grid=n.data("datagrid"),!this.settings.title&&a.modal&&a.modal.element.find(".title").not(".selection-count").remove();var r=(t=this.settings)===null||t===void 0||(t=t?.options)===null||t===void 0||(t=t?.toolbar)===null||t===void 0||t==null?void 0:t.keywordFilter;if(!r&&a.modal&&a.modal.element.find(".toolbar").appendTo(a.modal.element.find(".modal-header")),r&&a.grid&&(!a.grid.filterExpr||a.grid.filterExpr&&a.grid.filterExpr[0]&&a.grid.filterExpr[0].value!=="")&&a.grid.keywordSearch(""),n.off("selected.lookup"),a.initValues)a.initValues.forEach(function(c){c&&a.selectGridRows(c.value.toString())}),delete a.initValues;else{var o=a.element.val();o&&!a.settings.options.source&&(a.settings.options.selectable==="multiple"&&o.indexOf(this.settings.delimiter)>1?o.split(this.settings.delimiter):[o]).forEach(function(c){return a.selectGridRows(c.toString())})}this.settings.options.source&&n.off("afterpaging.lookup").on("afterpaging.lookup",function(c,u){if(a.settings.options.source){var p=a.element.val();i.selectGridRows(p)}i.element.trigger("afterpaging",[u,i])}),this.settings.options&&(this.settings.dblClickApply&&this.settings.options.selectable==="single"&&n.on("ischanged.lookup",function(){i.isChanged=!0}),n.on("selected.lookup",function(c,u,p,m){a.settings.options.source&&a.settings.options.selectable==="multiple"?a.element.trigger("selected",[u,p,m,a]):(i.isChanged=!0,p==="deselect"&&(a.grid.recentlyRemoved||(a.grid.recentlyRemoved=[]),a.grid.recentlyRemoved.push(m)),u&&u.length!==0?(a.settings.validator&&a.settings.validator(a.element,a.modal,a.grid),a.settings.options.selectable==="single"&&a.settings.autoApply&&p!=="deselectall"&&(a.modal.close(),a.insertRows()),a.element.trigger("selected",[u,p,m,a])):p==="deselect"&&a.element.trigger("selected",[u,p,m,a]))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",function(){var c,u=i.settings.options.source&&((c=i.selectedRows)===null||c===void 0||c==null?void 0:c.length);if(!a.initValues||a.initValues&&!a.initValues.length||u)if(a.initValues=[],u&&!a.element.val())setTimeout(function(){var m,v=(m=i.grid)===null||m===void 0||(m=m?.pagerAPI)===null||m===void 0||m==null?void 0:m.state;if(v){var w={min:v.activePage*v.pagesize-v.pagesize,max:v.activePage*v.pagesize-1};a.selectedRows.forEach(function(C){var A;a.initValues!==null&&a.initValues!==void 0&&a.initValues.push({value:C.data[i.settings.field],visited:(A=C,A.pagingIdx>=w.min&&A.pagingIdx<=w.max)})}),a.grid._selectedRows=a.selectedRows.slice(),a.grid.syncSelectedRows(),a.grid.syncSelectedUI()}},310);else{var p=i.element.val();p&&(p.indexOf(i.settings.delimiter)>1?p.split(i.settings.delimiter):[p]).forEach(function(m){a.initValues.push({value:m,visited:!!i.grid.settings.dataset.filter(function(v){return function(w,C){return(w[i.settings.field]||"").toString()===C.toString()}(v,m)}).length})})}})},updateSelectedRows:function(e){var t=this;if(this.settings.options.source&&(e=Array.isArray(e)?e:[],this.selectedRows.length!==e.length)){this.selectedRows=e.slice();var n=this.selectedRows.map(function(i){return i.data?i.data[t.settings.field]:""}).join(this.settings.delimiter);this.grid&&(this.grid._selectedRows=this.selectedRows.slice(),this.grid.syncSelectedRows(),this.grid.syncSelectedUI()),this.element.val(n).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows])}},selectGridRows:function(e){var t=e,n=!1;if(e){if(this.grid&&this.settings.options.source)for(var i=this.grid._selectedRows.length-1;i>-1;i--)isNaN(this.grid._selectedRows[i].idx)&&this.grid._selectedRows.splice(i,1);if(t.indexOf(this.settings.delimiter)>1){for(var a=t.split(this.settings.delimiter),r=!1,o=!1,c=0;c<a.length;c++){if(o=!1,this.grid.recentlyRemoved)for(var u=0;u<this.grid.recentlyRemoved.length;u++)this.grid.recentlyRemoved[u][this.settings.field].toString()===a[c].toString()&&(o=!0);if(!o&&(r=this.selectRowByValue(this.settings.field,a[c]),this.grid&&this.settings.options.source&&!r)){for(var p=!1,m=0;m<this.grid._selectedRows.length;m++)this.grid._selectedRows[m].data[this.settings.field].toString()===a[c].toString()&&(p=!0);if(this.grid.recentlyRemoved)for(var v=0;v<this.grid.recentlyRemoved.length;v++)this.grid.recentlyRemoved[v][this.settings.field].toString()===a[c].toString()&&(p=!0);if(!p){var w={};w[this.settings.field]=a[c],this.grid._selectedRows.push({data:w})}n=!0}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(a.length," ").concat(L.translate("Selected"))),this.grid.syncSelectedUI()),this.selectRowByValue(this.settings.field,t)}else{var C=[];C.push(t);for(var A=!1,S=!1,M=0;M<C.length;M++){if(this.grid.recentlyRemoved)for(var I=0;I<this.grid.recentlyRemoved.length;I++)this.grid.recentlyRemoved[I][this.settings.field].toString()===C[M].toString()&&(S=!0);if(!S){if(A=this.selectRowByValue(this.settings.field,C[M]),this.grid&&this.settings.options.source&&!A){for(var z=!1,V=0;V<this.grid._selectedRows.length;V++)this.grid._selectedRows[V].data[this.settings.field].toString()===C[M].toString()&&(z=!0);if(this.grid.recentlyRemoved)for(var U=0;U<this.grid.recentlyRemoved.length;U++)this.grid.recentlyRemoved[U][this.settings.field].toString()===C[M].toString()&&(z=!0);z||({}[this.settings.field]=C[M]),n=!0}if(A&&this.grid.recentlyRemoved)for(var G=0;G<this.grid.recentlyRemoved.length;G++)this.grid.recentlyRemoved[G][this.settings.field].toString()===C[M].toString()&&(n=!1)}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(C.length," ").concat(L.translate("Selected"))),this.grid.syncSelectedUI())}}},selectRowByValue:function(e,t){if(!this.settings.options)return!1;var n=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,i=[];if(!n)return!1;for(var a=0;a<n.length;a++){var r,o,c=!1;if(typeof this.settings.match=="function"&&this.settings.match(t,n[a],this.element,this.grid)&&(c=!0),typeof this.settings.match!="function"&&((r=n[a][e])===null||r===void 0||(o=r)==null?void 0:o.toString())===(t==null||t==null?void 0:t.toString())&&(c=!0),c){var u=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(a)):a;i.push(u)}}return!!(this.grid&&i.length>0)&&(this.grid.selectRows(i,!1,!0),!0)},insertRows:function(){if(this.isChanged||this.settings.options.source){var e=[];this.selectedRows=this.grid.selectedRows().slice();for(var t=0;t<this.selectedRows.length;t++){var n="";n=typeof this.settings.field=="function"?this.settings.field(this.selectedRows[t].data,this.element,this.grid):this.selectedRows[t].data[this.settings.field],e.push(n);var i=this.selectedRows[t].idx;this.settings.options.dataset&&this.settings.options.dataset[i]&&delete this.settings.options.dataset[i]._selected}this.settings.allowDuplicates||(e=e.filter(function(a,r){return e.indexOf(a)===r})),this.element.val(e.join(this.settings.delimiter)).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()}},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1).removeClass("is-not-editable"),this.element.closest(".field").removeClass("is-disabled"),this.icon.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.element.closest(".field").addClass("is-disabled"),this.icon.prop("disabled",!0)},readonly:function(){this.element.prop("readonly",!0),this.icon.prop("disabled",!1)},applyAutoWidth:function(){var e=this.element.val(),t=e.length,n=e===e.toUpperCase(),i=!isNaN(e);this.element.attr("size",t+(n&&!i?2:1))},applyMinWidth:function(e){if(this.settings.minWidth==null)return e;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var t="".concat(this.settings.minWidth,"px");e.css({"min-width":t})}return e},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.icon.attr("tabIndex",e?0:-1)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings))},updateDataset:function(e,t){this.settings.options.dataset=e,t&&t.activePage&&(this.settings.options.activePage=t.activePage),t&&t.pagesize&&(this.settings.options.pagesize=t.pagesize),this.grid&&this.grid.updateDataset(e,t)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),typeof this.modal.destroy=="function"&&this.modal.destroy()),$.removeData(this.element[0],tu)}},$.fn.lookup=function(e){return this.each(function(){var t=$.data(this,tu);t?t.updated(e):t=$.data(this,tu,new nu(this,e))})};var dl={Input:function(e,t,n,i,a,r,o,c){this.name="input",this.originalValue=n,this.useValue=!!a.inlineEditor,this.init=function(){a.inlineEditor?this.input=i.find("input"):this.input=$('<input type="'.concat(a.inputType||"text",'" autocomplete="off"/>')).appendTo(i),uh(this.input,e,t,n,0,a,0,0,c)},this.val=function(u){var p;return u&&this.input.val(u),a&&a.numberFormat&&a.numberFormat.style==="percent"?(p=this.input.val().trim().replace(/(\s%?|%)$/g,""),L.parseNumber(p)/100):a.numberFormat?L.parseNumber(this.input.val(),a.numberFormat):this.input.val()},a.inlineEditor||(this.focus=function(){this.input.focus(),o.settings.selectOnEdit&&this.input.select()}),this.destroy=function(){var u=this;a.inlineEditor||setTimeout(function(){u.input.remove()},0)},this.init()},Textarea:function(e,t,n,i,a,r,o){this.name="textarea",this.originalValue=n,this.init=function(){i.addClass("datagrid-textarea-cell-wrapper");var c=i.get(0).scrollHeight,u=a.editorOptions&&a.editorOptions.minHeight?'style="min-height: '.concat(a.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(u,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(i);var p=a.editorOptions?a.editorOptions:{};"characterCounter"in p||(p.characterCounter=!1),this.api=this.input.data("autogrow-start-height",c).textarea(a.editorOptions).data("textarea"),this.input.on("click.textareaeditor",function(m){m.stopPropagation()}),a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text")},this.val=function(c){return c&&this.input.focus().val(c),this.input.val()},this.focus=function(){this.input.focus(),o.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var c=this;i.removeClass("datagrid-textarea-cell-wrapper"),setTimeout(function(){c.input.off("click.textareaeditor"),c.input.remove()},0)},this.init()},Editor:function(e,t,n,i,a,r,o){this.name="editor",this.originalValue=n,this.init=function(){var c=this,u=$.extend({},{buttons:{editor:["header1","header2","separator","bold","italic","underline","separator","foreColor","separator","justifyLeft","justifyCenter","justifyRight"],source:[]},excludeButtons:{editor:[]}},a.editorOptions);this.editorWidth=o.setUnit(u.width||i.outerWidth()),delete u.width,i[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,`;">
          <div class="editor" data-init="false">`).concat(_e.sanitizeHTML(_e.unescapeHTML(n)),`</div>
        </div>`),this.td=i.closest("td"),this.input=$(".editor",i),this.input.popover({content:$(".editor-wrapper",i),placementOpts:{x:0,y:"-".concat(parseInt(i[0].style.height,10)+35),parent:this.td,parentXAlignment:L.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup",onHidden:function(){o.commitCellEdit(c.input)}}).editor(u).on("keydown.editor",function(p){var m=p.which||p.keyCode||p.charCode||0;if((p.ctrlKey||p.metaKey)&&(m===13||m===10)){var v=c.input.data("tooltip");v&&(v.hide(),o.setNextActiveCell(p))}}),N.fixSVGIcons($("#editor-popup"))},this.val=function(){return _e.escapeHTML(this.input.html())},this.focus=function(){var c=this;setTimeout(function(){c.input.focus()},0)},this.destroy=function(){var c=this;i.removeAttr("style"),o.quickEditMode=!1,c.input.data("editor")&&(c.input.destroy(),c.input.remove())},this.init()},Checkbox:function(e,t,n,i,a,r,o){this.name="checkbox",this.originalValue=n,this.useValue=!0,this.container=i,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(i),this.input.after('<label class="checkbox-label"></label>'),a.align&&this.input.addClass("l-".concat(a.align,"-text"))},this.val=function(c){var u;if(c===void 0)return this.input.prop("checked");u=a.isChecked?a.isChecked(c):c,r.type!=="click"&&(r.type!=="keydown"||r.keyCode!==32)||$(r.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(u=!u,o.setNextActiveCell(r)),this.input.prop("checked",u)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var c=this;setTimeout(function(){c.input.next(".checkbox-label").remove(),c.input.remove()},0)},this.init()},Colorpicker:function(e,t,n,i,a,r,o){this.name="colorpicker",this.originalValue=n,this.useValue=!0,n=_e.stripTags(n),this.init=function(){this.input=$('<input id="colorpicker-'.concat(t,'" name="colorpicker-').concat(t,'" class="colorpicker" value="').concat(n,'" type="text" autocomplete="off"/>')).appendTo(i),this.input.colorpicker(a.editorOptions)},this.val=function(c){return c?this.input.val(c):this.input.val()},this.focus=function(){var c=this;this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),this.input.focus(),o.settings.selectOnEdit&&this.input.select(),this.input.off("listclosed").on("listclosed",function(){o.commitCellEdit(c.input),i.parent("td").focus()})},this.destroy=function(){},this.init()},MultiSelect:function(e,t,n,i,a,r,o,c){this.name="multiselect",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){if(a.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="multiselect"></select>').appendTo(i),a.options){var u,p,m;n=o.fieldValue(c,a.field);for(var v=a.caseInsensitive&&typeof n=="string"?n.toLowerCase():n,w=0;w<a.options.length;w++)u=$("<option></option>"),p=a.options[w],m=a.caseInsensitive&&typeof p.value=="string"?p.value.toLowerCase():p.value,(p.selected||v===m)&&(u.attr("selected","true"),this.originalValue=m),u.attr("value",p.value).attr("id",p.id).attr("data-type",at(p.value)),u.text(p.label),this.input.append(u)}var C=a.editorOptions||{};C.cssClass&&/is-editing/g.test(C.cssClass)||(C.cssClass=C.cssClass||"",C.cssClass+=" is-editing"),this.input.multiselect(C),this.input.data("multiselect").settings.sourceArguments={column:a,container:i,grid:o,cell:t,event:r,row:e,rowData:c,value:n}}},this.val=function(u){if(this.datasetValue=u,u!==void 0){var p=a.caseInsensitive&&typeof u=="string"?u.toLowerCase():u;this.input.val(u),this.input.find("option").each(function(){var C=$(this),A=C.attr("value"),S=C.attr("data-type"),M=A;S==="number"?M=parseFloat(A):S==="boolean"?M=A==="true":S==="string"&&a.caseInsensitive&&(M=A.toLowerCase()),M===p&&C.attr("selected","true")})}var m=this.input.find(":selected"),v=m.attr("value"),w=m.attr("data-type");return m.length>1&&(v=[],m.map(function(C,A){return v.push(A.value)})),w==="number"?v=parseFloat(v):w==="boolean"&&(v=v==="true"),v===void 0&&(v=m.text()),v},this.focus=function(){var u=this;if(r.type==="click"?(this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var p=$("#dropdown-search")[0];if(p){if(typeof p.selectionStart=="number")p.selectionEnd=p.value.length,p.selectionStart=p.selectionEnd;else if(p.createTextRange!==void 0){var m=p.createTextRange();m.collapse(!1),m.select()}}}this.input.off("listclosed").on("listclosed",function(v,w){o.commitCellEdit(u.input),w!=="select"?w==="tab"&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Dropdown:function(e,t,n,i,a,r,o,c){this.name="dropdown",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){var u=this;if(a.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(i),a.options){var p,m,v;n=o.fieldValue(c,a.field);for(var w=a.caseInsensitive&&typeof n=="string"?n.toLowerCase():n,C=0;C<a.options.length;C++)p=$("<option></option>"),m=a.options[C],v=a.caseInsensitive&&typeof m.value=="string"?m.value.toLowerCase():m.value,(m.selected||w===v)&&(p.attr("selected","true"),this.originalValue=v),p.attr("value",m.value).attr("id",m.id).attr("data-type",at(m.value)),p.text(m.label),this.input.append(p)}var A=a.editorOptions||{};A.cssClass&&/is-editing/g.test(A.cssClass)||(A.cssClass=A.cssClass||"",A.cssClass+=" is-editing"),this.input.dropdown(A),this.input.on("requestend",function(){u.val(u.datasetValue)}),this.input.data("dropdown").settings.sourceArguments={column:a,container:i,grid:o,cell:t,event:r,row:e,rowData:c,value:n}}},this.val=function(u){if(this.datasetValue=u,u!==void 0){var p=a.caseInsensitive&&typeof u=="string"?u.toLowerCase():u;this.input.val(u),this.input.find("option").each(function(){var C=$(this),A=C.attr("value"),S=C.attr("data-type"),M=A;S==="number"?M=parseFloat(A):S==="boolean"?M=A==="true":S==="string"&&a.caseInsensitive&&(M=A.toLowerCase()),M===p&&C.attr("selected","true")})}var m=this.input.find(":selected"),v=m.attr("value"),w=m.attr("data-type");return w==="number"?v=parseFloat(v):w==="boolean"&&(v=v==="true"),v===void 0&&(v=m.text()),v},this.focus=function(){var u=this;if(r.type==="click"?(this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var p=$("#dropdown-search")[0];if(p){if(typeof p.selectionStart=="number")p.selectionEnd=p.value.length,p.selectionStart=p.selectionEnd;else if(p.createTextRange!==void 0){var m=p.createTextRange();m.collapse(!1),m.select()}}}this.input.off("listclosed").on("listclosed",function(v,w){o.commitCellEdit(u.input),w!=="select"?w==="tab"&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Date:function(e,t,n,i,a,r,o){this.name="date",this.originalValue=n,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.dateFormat||(a.editorOptions.dateFormat=a.dateFormat),typeof a.editorOptions.tabbable!="boolean"&&(a.editorOptions.tabbable=!1),this.input.datepicker(a.editorOptions)},this.val=function(c){return c!=="0000"&&c!=="000000"&&c!=="00000000"||(c=""),c&&this.input.val(c),Sn.Date(e,t,this.input.val(),a,!0)},this.focus=function(){var c=this;this.input.focus(),o.settings.selectOnEdit&&this.input.select(),r.type==="click"&&$(r.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.input.on("listclosed",function(){setTimeout(function(){c.input.trigger("focusout"),i.parent().focus(),o.setNextActiveCell(r)},1)})},this.destroy=function(){var c=this;setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Fileupload:function(e,t,n,i,a,r,o){var c=this,u=N.mergeSettings(void 0,a.editorOptions,{allowedTypes:"*"}),p=u.allowedTypes.split(/[\s|]+/g),m=N.uniqueId(this,"fileupload-".concat(e,"-").concat(t,"-")),v=u.useMultiple?" multiple":"",w=u.isDisabled?" disabled":"",C="";if(p.length===1)p[0]!=="*"&&(C=".".concat(_e.ensureAlphaNumeric(p[0])));else for(var A=0,S=p.length;A<S;A++)C+=".".concat(_e.ensureAlphaNumeric(p[A])+(A!==S-1?",":""));C!==""&&(C=' accept="'.concat(C,'"')),this.name="fileupload",this.originalValue=n,this.status="init",this.useValue=!0,this.init=function(){m=_e.ensureAlphaNumeric(m),v=_e.ensureAlphaNumeric(v),w=_e.ensureAlphaNumeric(w),this.input=$('<input id="'.concat(m,'" name="').concat(m,'" class="fileupload" type="file" ').concat(C).concat(v).concat(w,' autocomplete="off"/>')),i.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(a.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(M){var I=this;return new Promise(function(z){setTimeout(function(){var V;M?(M=_e.stripTags(M),I.input.attr("value",M),V=M):V=I.input.val(),z(V)},300)})},this.focus=function(){var M=function(){c.originalValue!==""&&(c.status="clear"),o.commitCellEdit(c.input)},I=function(){c.api&&($("body").one("focusin.fileuploadeditor",function(){setTimeout(function(){c.status!=="change"&&(c.status="cancel",o.commitCellEdit(c.input))},100)}),c.api.fileInput.trigger("click"))};if(c.input.on("change.fileuploadeditor",function(){c.status="change",o.commitCellEdit(c.input)}),r.type==="keydown"){var z=r.which||r.keyCode||r.charCode||0;z===8||z===46?M():z===13||z===10?I():o.commitCellEdit(c.input)}if(r.type==="click"){var V=$(r.target);V.is(".icon-close")?M():V.is(".icon-fileupload")?I():o.commitCellEdit(c.input)}},this.destroy=function(){c.input.off("change.fileuploadeditor"),o.quickEditMode=!1,c.api&&c.api.destroy()},this.init()},Time:function(e,t,n,i,a,r,o){this.name="time",this.originalValue=n,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),typeof a.editorOptions.tabbable!="boolean"&&(a.editorOptions.tabbable=!1),this.api=this.input.timepicker(a.editorOptions).data("timepicker")},this.val=function(c){return c&&this.input.val(c),this.input.val()},this.focus=function(){var c=this;this.input.focus(),o.settings.selectOnEdit&&this.input.select(),r.type==="click"&&$(r.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.api.trigger.on("hide.editortime",function(){setTimeout(function(){c.input.trigger("focusout"),i.parent().focus(),o.setNextActiveCell(r)},1)})},this.destroy=function(){var c=this;c.api&&c.api.trigger&&c.api.trigger.off("hide.editortime"),setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Lookup:function(e,t,n,i,a,r,o,c){this.name="lookup",this.originalValue=n,this.init=function(){this.input=$('<input class="lookup '.concat(a.align==="right"?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(i),uh(this.input,e,t,n,0,a,0,0,c),a.editorOptions||(a.editorOptions={}),a.editorOptions.options||(a.editorOptions.options={}),a.editorOptions.options.toolbar||(a.editorOptions.options.toolbar={}),a.editorOptions.options.toolbar.title||(a.editorOptions.options.toolbar.title=a.name),a.editorOptions.tabbable===void 0&&(a.editorOptions.tabbable=!1),this.input.lookup(a.editorOptions),i.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:a,container:i,grid:o,cell:t,event:r,row:e,rowData:c,value:n}},this.val=function(u){return u?this.input.val(u):this.input.val()},this.focus=function(){var u=this,p=u.input.data("lookup"),m=u.input.closest("td");r.type==="keydown"&&(u.input.focus(),o.settings.selectOnEdit&&u.input.select(),m.on("keydown.editorlookup",function(v){v.keyCode===40&&(v.preventDefault(),v.stopPropagation())})),r.type==="click"&&($(r.target).is("svg")?p.openDialog(r):(u.input.focus(),o.settings.selectOnEdit&&u.input.select(),m.on("touchcancel.editorlookup touchend.editorlookup",".trigger",function(){p.openDialog()}))),u.input.on("change.editorlookup",function(){o.quickEditMode=!1})},this.destroy=function(){var u=this,p=this.input.closest("td");setTimeout(function(){o.quickEditMode=!1,p.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),u.input.remove()},0)},this.init()},Autocomplete:function(e,t,n,i,a,r,o){this.name="autocomplete",this.originalValue=n,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.width=i.parent().width(),a.editorOptions.offset={left:-1,top:o.settings.rowHeight==="medium"?1:5},a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(a.editorOptions)},this.val=function(c){return c?this.input.val(c):this.input.val()},this.focus=function(){o.quickEditMode=!0,this.input.focus(),o.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var c=this;setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Spinbox:function(e,t,n,i,a,r,o){var c=this;this.name="spinbox",this.originalValue=n,this.useValue=!0,this.init=function(){if(a.inlineEditor)c.input=i.find("input");else{var u='<label for="spinbox-'.concat(t,`" class="audible">Quantity</label>
        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>
        <input id="spinbox-`).concat(t,'" name="spinbox-').concat(t,`" type="text" class="spinbox" value="'+ `).concat(n,` +'" autocomplete="off" />
        <span class="spinbox-control up">+</span></span>`);ue.append(i,u,"<label><span><input>"),c.input=i.find("input"),a.editorOptions||(a.editorOptions={}),c.input.spinbox(a.editorOptions)}},this.val=function(u){return u&&c.input.val(u),parseInt(c.input.val(),10)},this.focus=function(){o.quickEditMode=!0,c.input.focus(),o.settings.selectOnEdit&&c.input.select()},this.destroy=function(){a.inlineEditor||setTimeout(function(){o.quickEditMode=!1;var u=c.val();c.input&&c.input.data("spinbox")&&c.input.data("spinbox").destroy(),c.input&&c.input.remove(),i.text(u)},0)},this.init()},Favorite:function(e,t,n,i,a,r,o){this.name="favorite",this.useValue=!0,this.originalValue=n,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:n?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(i),this.input=this.input.find("input")},this.val=function(c){var u;if(c===void 0)return this.input.prop("checked");u=a.isChecked?a.isChecked(c):c,r.type!=="click"&&(r.type!=="keydown"||r.keyCode!==32)||$(r.target).is(".datagrid-cell-wrapper")||(u=!u,o.setNextActiveCell(r)),this.input.prop("checked",u),this.input.find("use").attr("href",u?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var c=this;setTimeout(function(){c.input.parent().remove()},0)},this.init()}},Oa="datagrid",hh={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,selectOnEdit:!0,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"large",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,selectAllCurrentPage:!1,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,spacerColumn:!1,stickyHeader:!1,columnSizing:"all",twoLineHeader:!1,clickToSelect:!0,keyRowSelect:!1,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,disableRowDeselection:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:L?L.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new",height:null},searchExpandableRow:!0,allowChildExpandOnMatchOnly:!1,allowChildExpandOnMatch:!1,activeCheckboxSelection:!1,dblClickApply:!1,attributes:null,allowPasteFromExcel:!1,showEditorIcons:!1,fallbackImage:"insert-image",fallbackSize:{height:40,width:40},fallbackTooltip:{content:"Image could not load",delay:200}};function qs(e,t){this.settings=N.mergeSettings(e,t,hh),this.element=$(e),t.dataset&&(this.settings.dataset=t.dataset),this.settings.frozenColumns.expandRowAcrossAllCells===void 0&&(this.settings.frozenColumns.expandRowAcrossAllCells=hh.frozenColumns.expandRowAcrossAllCells),this.init()}qs.prototype={get pagerAPI(){var e;return this.tableBody&&this.tableBody.length&&(e=this.tableBody.data("pager")),e},init:function(){var e=$("html");this.isTouch=Be.features.touch,this.isSafari=e.is(".is-safari"),this.isWindows=navigator.userAgent.indexOf("Windows")!==-1,this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.hasScrollbarY(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerAPI])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(e){var t=this.settings;if(e&&t.columns&&(!t.columns||t.columns.length)){for(var n={index:-1},i=0,a=t.columns.length;i<a;i++)t.columns[i].id===e&&(n.index=i);n.index>-1&&t.columns.splice(n.index,1)}},setInlineActionableMode:function(){var e=this.settings;if(e.columns&&(!e.columns||e.columns.length)){for(var t={index:-1},n=0,i=e.columns.length;n<i;n++)e.columns[n].inlineEditor&&(t.index=n);this.inlineMode=t.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(e,t,n){if(t||(t={}),e&&(t.type="filterrow"),this.settings.source)return t.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(n?"initial":t);this.loadData(this.settings.dataset,t)},firstRender:function(){var e=this,t=e.settings.columns.some(function(a){return a.width!==void 0}),n=this.element.parents(".contextual-action-panel").length>0;if(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(e.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),e.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperLeft),e.element.append(e.bodyWrapperLeft)),e.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),e.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperCenter),e.element.append(e.bodyWrapperCenter),t&&n&&e.table.css("width","inherit"),this.hasRightPane&&(e.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),e.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperRight),e.element.append(e.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),this.settings.stickyHeader&&this.element.removeClass("datagrid").addClass("is-sticky"),this.settings.rowHeight!=="normal"&&this.settings.rowHeight!=="large"){var i=this.settings.rowHeight==="short"?"small":this.settings.rowHeight;i=this.settings.rowHeight==="normal"?"large":i,this.hasLeftPane&&e.tableLeft.addClass("".concat(i,"-rowheight")),e.table.addClass("".concat(i,"-rowheight")),this.hasRightPane&&e.tableRight.addClass("".concat(i,"-rowheight")),this.element.addClass("".concat(i,"-rowheight"))}this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),e.table.empty(),e.clearCache(),e.container=e.element.closest(".datagrid-container"),e.renderRows(),e.renderHeader(),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.settings.emptyMessage&&(e.setEmptyMessage(this.settings.emptyMessage),e.checkEmptyMessage()),this.settings.showEditorIcons&&e.element.addClass("show-editor-icons"),e.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(e.buttonSelector,e.table).button(),this.handlePaging(),this.triggerSource("initial")},hasScrollbarY:function(){var e=this,t=parseInt(e.bodyWrapperCenter[0].offsetHeight,10),n=parseInt(e.bodyWrapperCenter[0].scrollHeight,10)>t+2||e.element[0].scrollHeight>e.element[0].clientHeight;e.hasVerticalScrollbar=n!==!1},editCell:function(e,t,n){var i=this;setTimeout(function(){i.setActiveCell(e,t),i.makeCellEditable(e,t,n)},100)},renderRow:function(e,t){var n=this,i=t!=="bottom",a="",r="",o="";function c(){i?(n.hasLeftPane&&ue.prepend(n.tableBodyLeft,r,"*"),ue.prepend(n.tableBody,a,"*"),n.hasRightPane&&ue.prepend(n.tableBodyRight,o,"*")):(n.hasLeftPane&&ue.append(n.tableBodyLeft,r,"*"),ue.append(n.tableBody,a,"*"),n.hasRightPane&&ue.append(n.tableBodyRight,o,"*"))}n.emptyMessageContainer&&n.emptyMessageContainer.hide();var u=t==="bottom"?"last":"first",p=u==="last"?n.settings.dataset.length-1:0,m=n.settings.dataset.length-1,v=n.rowHtml(e,p,m);if(n.hasLeftPane&&v.left&&(r+=v.left),v.center&&(a+=v.center),n.hasRightPane&&v.right&&(o+=v.right),n.settings.groupable)for(var w=$(".datagrid-rowgroup-header").find("span:not([class])"),C=0;C<w.length;C++){var A=$(w[C]);if(e.type===A.text().trim()){ue.after(A.parents("tr"),v.center,"*");break}}if(n.settings.paging&&!n.settings.groupable){var S=n.settings.dataset.length-n.pagerAPI.pageCount()*n.pagerAPI.settings.pagesize==1?1:0,M=(t==="bottom"?n.pagerAPI.pageCount():1)+S;t!=="bottom"&&n.pagerAPI.activePage===1?c():(n.pagerAPI.setActivePage(M,!1,u),n.pagerAPI.triggerPagingEvents(n.pagerAPI.currentPage))}n.settings.paging||n.settings.groupable||c(),n.settings.paging&&n.tableBody.children().length>n.pagerAPI.settings.pagesize&&n.tableBody.children().last().remove(),n.refreshIndexes(),n.afterRender()},refreshIndexes:function(){this.element.find("tr").removeAttr("aria-rowindex"),this.element.find("tr").removeAttr("data-index"),this.hasLeftPane&&this.element.find(".datagrid-wrapper.left tbody > tr").each(function(t,n){var i=$(n);i.attr("aria-rowindex",t+1),i.attr("data-index",t)});var e=this.settings.paging&&this.pagerAPI.activePage>1?(this.pagerAPI.activePage-1)*this.settings.pagesize:0;this.element.find(".datagrid-wrapper.center tbody > tr").each(function(t,n){var i=$(n);i.attr("aria-rowindex",t+e+1),i.attr("data-index",t+e)}),this.hasRightPane&&this.element.find(".datagrid-wrapper.right tbody > tr").each(function(t,n){var i=$(n);i.attr("aria-rowindex",t+1),i.attr("data-index",t)})},addRow:function(e,t){var n,i,a=this,r=this;this.saveDirtyRows();var o=this.addToDataset([e],t)[0];this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(c){c.pagingIdx!==void 0&&c.pagingIdx>=o&&(c.idx++,c.pagingIdx++)}),this.clearCache(),this.renderRow(e,t),this.settings.groupable&&(i=this.dataRowNode(o),o=this.visualRowIndex(i)),this.syncSelectedUI(),setTimeout(function(){r.setActiveCell(o,0),a.settings.groupable||(i=a.visualRowNode(o)),n={row:o,cell:0,target:i,value:e,oldValue:{}},r.element.triggerHandler("addrow",n)},100)},addRows:function(e,t){var n,i=this,a=this;this.saveDirtyRows();var r=this.addToDataset(e,t);if(r!==-1){this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(c){r.forEach(function(u){c.pagingIdx!==void 0&&c.pagingIdx>=u&&(c.idx++,c.pagingIdx++)})}),this.clearCache(),this.renderRows();var o=[];this.settings.groupable&&r.forEach(function(c,u){var p=i.dataRowNode(c);o.push(p),r[u]=i.visualRowIndex(p)}),this.syncSelectedUI(),setTimeout(function(){a.setActiveCell(r[0],0),i.settings.groupable||r.forEach(function(c){o.push(i.visualRowNode(c))}),n={rows:r,cell:0,target:o,value:e,oldValue:{}},a.element.triggerHandler("addrow",n)},100)}},addToDataset:function(e,t){if(e&&e.length===0)return-1;var n=this.settings,i=[],a={icon:"new",text:L.translate("NewRow"),tooltip:L.translate("NewRow")},r=!1,o=this.settings.dataset;function c(p,m){p.rowStatus=p.rowStatus||a,o.splice(m,0,p),i.push(m)}if(t&&t!=="top"||(t="top",r=!0),n.groupable)if(o=this.originalDataset||o,typeof t=="string"){var u=this.settings.groupable.fields[0];e.forEach(function(p){var m=function(v,w,C,A){for(var S=0,M=v.length;S<M;S++){var I=A?M-1-S:S;if(v[I][w]===C)return I}return-1}(o,u,p[u],!r);c(p,m>-1?r?m:m+1:0)})}else e.forEach(function(p,m){c(p,t+m)});else typeof t=="string"?e.forEach(function(p,m){c(p,r?m:o.length)}):e.forEach(function(p,m){c(p,t+m)});return i},pagerRefresh:function(e,t){if(this.pagerAPI){var n={};if(typeof e=="string"?n.activePage=e==="top"?1:this.pagerAPI.state.pages:typeof e=="number"&&(n.activePage=Math.floor(e/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(n.total=this.settings.dataset.length,n.pagesize=this.settings.pagesize),t){var i=Math.ceil(this.settings.dataset.length/this.settings.pagesize);n.activePage=this.pagerAPI.activePage>i?i:this.pagerAPI.activePage}this.renderPager(n,!0)}},removeRow:function(e,t,n){var i=this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')),a=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,r=a[e];this.saveDirtyRows(),this.unselectRow(e,t),a.splice(e,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,t||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),this.nonVisibleCellErrors.length!==0&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(c){return c.row!==e}),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var o={row:e,cell:null,target:i,item:r,oldValue:r};return n?o:(this.element.trigger("rowremove",o),!0)},removeSelected:function(e){this._selectedRows.sort(function(i,a){return i.idx<a.idx?-1:i.idx>a.idx?1:0});for(var t=[],n=this._selectedRows.length-1;n>=0;n--)t.push({row:this._selectedRows[n].idx,item:this._selectedRows[n],cell:null,target:null}),this.removeRow(this._selectedRows[n].idx,n>0,e);e&&this.element.trigger("rowremove",t)},updateDataset:function(e,t){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var n=this.element.parent().find(".toolbar").find(".searchfield");n.val(""),n.parent().removeClass("has-text"),this.clearFilter()}this.loadData(e,t),this.syncSelectedRowsIdx()},triggerSource:function(e,t,n){if(this.settings.source){var i=this,a={};this.pagerAPI&&(a=this.pagerAPI.state),typeof e=="string"?(a.type=e,a.trigger=n):e&&(a=N.extend({},a,e)),t&&typeof t!="function"&&typeof t.type=="string"&&(a.type=t.type),this.element.triggerHandler("beforepaging",a)!==!1&&(this.sortColumn&&this.sortColumn.sortId&&(a.sortAsc=this.sortColumn.sortAsc,a.sortField=this.sortColumn.sortField,a.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(a.filterExpr=this.filterExpr),this.element.trigger("paging",a),this.settings.source(a,function(r,o){o.activePage>-1&&(i.activePage=o.activePage),o.grandTotal&&(i.grandTotal=o.grandTotal),i.loadData(r,o),t&&typeof t=="function"&&t(!0),setTimeout(function(){i.afterPaging(a),i.element.trigger("afterpaging",a)})}))}},afterPaging:function(e){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(e)?this.element.removeClass("paginated"):this.element.addClass("paginated"),e.total&&(this.recordCount=e.total,this.displayCounts(e.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].column==="all"&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(e,t){var n,i;this.settings.dataset=e,t||(t={}),t.type==="filterrow"&&(t.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,t.pagesize=this.settings.pagesize,t.total=t.total||-1,t.type="filterrow"),t.activePage||(t.activePage=1,t.pagesize=this.settings.pagesize,t.total=-1,this.settings.treeGrid&&(t.preserveSelected=!0)),this.settings.source&&t.grandTotal?this.grandTotal=t.grandTotal:this.grandTotal=null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(t.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),t.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),t.preserveSelected||t.type!=="initial"&&t.type||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),t.type==="initial"?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):this.element.find(".datagrid-filter-wrapper .is-open").length===0?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(t,!0),this.displayCounts(),this.settings.paging&&this.settings.source&&(n=t)!==null&&n!==void 0&&n?.filterExpr&&((i=t.filterExpr[0])===null||i===void 0||i==null?void 0:i.column)==="all"&&this.highlightSearchRows(t.filterExpr[0].value)},uniqueId:function(e){return e=e??"",this.gridCount=this.gridCount?this.gridCount:$(".datagrid").length+1,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(e):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(e)).replace(/--/g,"-")},visibleColumns:function(e){for(var t=[],n=0;n<this.settings.columns.length;n++){var i=this.settings.columns[n];i.hidden||e&&i.id==="selectionCheckbox"||t.push(i)}return t},getColumnGroup:function(e){for(var t=0,n=this.settings.columnGroups,i=0;i<n.length;i++)if(!n[i].hidden&&(t+=n[i].colspan)>=e)return this.uniqueId("-header-group-".concat(i));return""},updateColumnGroup:function(e,t){var n=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=N.deepCopy(n)),this.settings.groupable)for(var i=this.tableBody.find(".datagrid-rowgroup-header"),a=this.visibleColumns().length,r=0;r<i.length;r++)i[r].children[0].setAttribute("colspan",a);else if(n&&this.colGroups){var o=0,c=-1;this.originalColGroups.forEach(function(m,v){var w=parseInt(m.colspan,10);e>=o&&e<=o+w&&(c=v),o+=w});var u=parseInt(this.colGroups[c].getAttribute("colspan"),10),p=this.colGroups[c].classList.contains("is-hidden");if(!t||!p)return t&&!p?(this.colGroups[c].classList.remove("is-hidden"),void this.colGroups[c].setAttribute("colspan",u+1)):void(u-1!=0?this.colGroups[c].setAttribute("colspan",u-1):this.colGroups[c].classList.add("is-hidden"));this.colGroups[c].classList.remove("is-hidden")}},updateGroupHeadersAfterColumnReorder:function(e,t){var n=this.settings.columnGroups;if(n){this.originalColGroups||(this.originalColGroups=N.deepCopy(n));var i=n.map(function(r){return parseInt(r.colspan,10)}),a={from:null,to:null,total:0};i.forEach(function(r,o){a.total+=r,a.total>e&&a.from===null&&(a.from=o),a.total>t&&a.to===null&&(a.to=o)}),a.from!==a.to&&(n[a.from].colspan-=1,n[a.to].colspan+=1)}},headerText:function(e){var t=e.name?_e.stripTags(e.name,"<div><span><a><small><svg><i><b><use><br><strong><em>"):"";return t||e.id!=="drilldown"?t:(t=L.translate("Drilldown"),'<span class="audible">'.concat(t,"</span>"))},getContainer:function(e){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(e)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(e)>-1?"right":"center"},renderHeader:function(){var e,t=this,n={left:"",center:"",right:""},i=this.settings.columnGroups;if(i){this.element.addClass("has-group-headers");var a,r=this.settings.columns,o=r.length,c=this.visibleColumns().length,u=i.map(function(je){return parseInt(je.colspan,10)}),p=function(){return u.reduce(function(je,lt){return je+lt},0)},m=function(){var je=p();return je>o?je-o:o-je};if(n.left+='<tr role="row" class="datagrid-header-groups">',n.center+='<tr role="row" class="datagrid-header-groups">',n.right+='<tr role="row" class="datagrid-header-groups">',p()>o)for(var v=!0,w=u.length-1;w>=0&&v;w--)a=m(),u[w]>=a?(u[w]-=a,v=!1):u[w]=0;var C=0,A=0;if(u.forEach(function(je,lt){for(var xt=je,sn=C+je;C<sn;C++)C<o&&r[C].hidden&&xt--;var Xt=i[lt].hidden||xt<1?' class="is-hidden"':"",yn=' colspan="'.concat(xt>0?xt:1,'"'),qn=i[lt].align?"l-".concat(i[lt].align,"-text"):"";e=t.uniqueId("-header-group-".concat(lt)),xt>0&&(A+=xt);var Rn=t.getContainer(t.settings.columns[lt].id);n[Rn]+="<th".concat(Xt).concat(yn,' id="').concat(e,'" class="').concat(qn,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(i[lt].name,"</span></div></th>")}),A<c){var S=' colspan="'.concat((a=c-A)>0?a:1,'"');t.hasRightPane?n.right+="<th".concat(S,"></th>"):n.center+="<th".concat(S,"></th>")}this.settings.spacerColumn&&(n.center+='<th class="datagrid-header-groups-spacer-column"></th>'),n.left+="</tr><tr>",n.center+="</tr><tr>",n.right+="</tr><tr>"}else n.left+='<tr role="row">',n.center+='<tr role="row">',n.right+='<tr role="row">';for(var M=0;M<this.settings.columns.length;M++){var I,z,V,U,G,J,te=t.settings.columns[M],de=t.getContainer(te.id),H=t.uniqueId("-header-".concat(M)),he=te.sortable===void 0||te.sortable,ie=te.resizable===void 0||te.resizable,me=te.exportable===void 0||te.exportable,ke=te.id==="selectionCheckbox",De=this.getHeaderAlignmentClass(te);(t.hasLeftPane||t.hasRightPane)&&(t.settings.frozenColumns.left&&t.settings.frozenColumns.left.indexOf(te.id)>-1||t.settings.frozenColumns.right&&t.settings.frozenColumns.right.indexOf(te.id)>-1)&&(te.hideable=!1),te.hideable===void 0&&(te.hideable=!0);var Me="";Me+=he?" is-sortable":"",Me+=ie?" is-resizable":"",Me+=te.hidden?" is-hidden":"",Me+=te.filterType?" is-filterable":"",Me+=te.textOverflow==="ellipsis"?" text-ellipsis":"",Me+=te!=null&&te?.headerIcon?" header-icon":"",Me+=te!=null&&te?.headerCssClass?" ".concat(te.headerCssClass):"",Me=(Me+=De!==""?De:"")!==""?' class="'.concat(Me.substr(1),'"'):"";var Ve=N.stringAttributes(this,this.settings.attributes,"col-".concat((I=te.id)===null||I===void 0||(z=I)==null?void 0:z.toLowerCase()));Ve||(Ve='id="'.concat(H,'"')),n[de]+='<th scope="col" role="columnheader" '.concat(Ve," ").concat(ke?' aria-checked= "false"':"",' data-column-id="').concat(te.id,'"').concat(te.field?' data-field="'.concat(te.field,'"'):"").concat(te.headerTooltip?' title="'.concat(te.headerTooltip,'"'):"").concat(te.headerTooltipCssClass?' tooltipClass="'.concat(te.headerTooltipCssClass,'"'):"").concat(te.reorderable===!1?' data-reorder="false"':"").concat(i?' headers="'.concat(t.getColumnGroup(M),'"'):"",' data-exportable="').concat(me?"yes":"no",'"').concat(Me,">");var Ke="";he&&(Ke="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>"));var ct=(te==null||te==null?void 0:te.headerIconTooltip)!==void 0||(te==null||(V=te?.headerIconTooltip)===null||V===void 0||(U=V)==null?void 0:U.length)>0?te==null||te==null?void 0:te.headerIconTooltip:"",qe=`
        <svg class="icon datagrid-header-icon" focusable="false" aria-hidden="true" role="presentation" title="`.concat(ct,`">
          <use href="#icon-`).concat(te.headerIcon,`"></use>
        </svg>
      `);n[de]+='<div class="'.concat(ke?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(De,`">
      <span class="datagrid-header-text`).concat(te.required?" required":"",'">').concat(t.headerText(this.settings.columns[M])).concat(De===" l-center-text"?Ke:"",`</span>
      `).concat((G=this.settings.columns[M])!==null&&G!==void 0&&((J=G)!=null&&J.headerIcon)?qe:""),ke&&(t.settings.showSelectAllCheckBox?n[de]+='<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" tabindex="0"></span>':n[de]+='<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none" tabindex="0"></span>'),he&&De!==" l-center-text"&&(n[de]+=Ke),n[de]+="</div>".concat(t.filterRowHtml(te,M),"</th>")}this.settings.spacerColumn&&(n.center+='<th class="datagrid-header-spacer-column"></th>'),n.left+="</tr>",n.center+="</tr>",n.right+="</tr>",t.headerRow===void 0?(t.hasLeftPane&&(t.headerRowLeft=$('<thead class="datagrid-header left" role="rowgroup">'.concat(n.left,"</thead>")),t.tableLeft.find("colgroup").after(t.headerRowLeft)),t.headerRow=$('<thead class="datagrid-header center"> role="rowgroup">'.concat(n.center,"</thead>")),t.table.find("colgroup").after(t.headerRow),t.hasRightPane&&(t.headerRowRight=$('<thead class="datagrid-header right" role="rowgroup">'.concat(n.right,"</thead>")),t.tableRight.find("colgroup").after(t.headerRowRight))):(t.hasLeftPane&&ue.html(t.headerRowLeft,n.left,"*"),ue.html(t.headerRow,n.center,"*"),t.hasRightPane&&ue.html(t.headerRowRight,n.right,"*")),i&&t.headerRow&&(t.colGroups=$.makeArray(this.container.find(".datagrid-header-groups th"))),t.syncHeaderCheckbox(this.settings.dataset),t.setScrollClass(),t.attachFilterRowEvents(),t.settings.columnReorder&&t.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(e){return e.headerAlign===void 0?e.align?" l-".concat(e.align,"-text"):"":" l-".concat(e.headerAlign,"-text")},filterSetDatepicker:function(e,t,n){var i=e.data("datepicker"),a=e.data("is-range");n=n||{};var r=function(){i&&typeof i.destroy=="function"&&i.destroy(),e.datepicker(n)};if(i&&a||t!=="in-range")i&&!a||t==="in-range"||(n.range={useRange:!1},e.removeData("is-range"),e.val(e.val().split(" - ")[0]),r());else{if(e.data("is-range",!0),e.val().length!==0&&e.val().indexOf("-")===-1){var o=e.parents("th").attr("data-column-id"),c=this.columnById(o)[0].dateFormat,u=c==="MM/dd/yyyy"?L.formatDate(new Date(e.val()),{pattern:c}):L.formatDate(e.val(),{pattern:c});e.val("".concat(u," - ").concat(u)),n.range={useRange:!0,start:u,end:u}}else n.range={useRange:!0};r()}},filterRowHtml:function(e,t){var n=this,i="",a=this.getHeaderAlignmentClass(e);if(e.filterType){var r,o,c=e,u=n.uniqueId("-header-filter-".concat(t)),p=Array.isArray(c.filterRowEditorOptions)?c.filterRowEditorOptions:c.options,m="";if(c.filterType==="select"&&p){for(var v=!1,w=0,C=p.length;w<C;w++)if(!p[w].label){v=!0;break}v||(m="<option></option>")}i='<div class="datagrid-filter-wrapper'.concat(a,'" ').concat(n.settings.filterable?"":' style="display:none"',">").concat(n.filterButtonHtml(c),'<label class="audible" for="').concat(u,'">').concat(c.name,"</label>");var A=N.stringAttributes(this,this.settings.attributes,"filter-".concat((r=c.id)===null||r===void 0||r==null?void 0:r.toLowerCase()));A||(A='id="'.concat(u,'"'));var S=c.enterKeyHint?' enterkeyhint="'.concat(c.enterKeyHint,'"'):' enterkeyhint="enter"';switch(c.filterType){case"checkbox":break;case"date":var M,I,z=!1;((M=c.filterConditions)===null||M===void 0||M==null?void 0:M.map(function(me){return me.value}).indexOf("in-range"))>0?z=c.filterConditions[2].selected&&c.filterConditions[2].value==="in-range":((I=c.filterConditions)===null||I===void 0||I==null?void 0:I.indexOf("in-range"))===0&&(z=!0),i+="<input ".concat(c.filterDisabled?" disabled":"",' type="text" class="datepicker" ').concat(z?'data-options="{range: {useRange: true}}"':""," ").concat(A," ").concat(S,"/>");break;case"integer":o={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:L.currentLocale.data.numbers?L.currentLocale.data.numbers.group:",",decimal:L.currentLocale.data.numbers?L.currentLocale.data.numbers.decimal:".",negative:L.currentLocale.data.numbers?L.currentLocale.data.numbers.minusSign:"-"}},process:"number"},c.filterMaskOptions&&(c.filterMaskOptions=N.extend(!0,{},o,c.filterMaskOptions)),c.maskOptions&&(c.maskOptions=N.extend(!0,{},o,c.maskOptions)),i+="<input".concat(c.filterDisabled?" disabled":"",' type="text" ').concat(A," ").concat(S," />");break;case"percent":case"decimal":var V={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:L.currentLocale.data.numbers?L.currentLocale.data.numbers.group:",",decimal:L.currentLocale.data.numbers?L.currentLocale.data.numbers.decimal:".",negative:L.currentLocale.data.numbers?L.currentLocale.data.numbers.minusSign:"-"}},process:"number"};c.numberFormat?(o={patternOptions:{decimalLimit:c.numberFormat.maximumFractionDigits}},c.filterMaskOptions&&(c.filterMaskOptions=N.extend(!0,{},o,V,c.filterMaskOptions)),c.maskOptions&&(c.maskOptions=N.extend(!0,{},o,V,c.maskOptions))):(c.filterMaskOptions&&typeof c.filterMaskOptions!="function"&&(c.filterMaskOptions=N.extend(!0,{},V,c.filterMaskOptions)),c.maskOptions&&typeof c.maskOptions!="function"&&(c.maskOptions=N.extend(!0,{},V,c.maskOptions))),i+="<input".concat(c.filterDisabled?" disabled":"",' type="text" ').concat(A," ").concat(S," />");break;case"contents":case"select":if(i+="<select ".concat(A," ").concat(c.filterType==="select"?'class="dropdown"':'multiple class="multiselect"').concat(c.filterDisabled?" disabled":"",">").concat(m),p)for(var U=0,G=p.length;U<G;U++){var J=p[U],te=c.caseInsensitive&&typeof J.value=="string"?J.value.toLowerCase():J.value;J&&te!==""&&(i+='<option value = "'.concat(te,'">').concat(J.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(i+="<select ".concat(A,' class="multiselect" multiple').concat(c.filterDisabled?" disabled":"",">"),p)for(var de=0,H=p.length;de<H;de++){var he=p[de],ie=c.caseInsensitive&&typeof he.value=="string"?he.value.toLowerCase():he.value;he&&typeof he.label=="string"&&(i+='<option value = "'.concat(ie,'">').concat(he.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":i+="<input ".concat(c.filterDisabled?" disabled":"",' type="text" class="timepicker" ').concat(A," ").concat(S,"/>");break;case"lookup":i+="<input ".concat(c.filterDisabled?" disabled":"",' type="text" class="lookup" ').concat(A," ").concat(S," >");break;default:i+="<input".concat(c.filterDisabled?" disabled":"",' tabindex="0" type="text" ').concat(A," ").concat(S,"/>")}i+="</div>"}return e.filterType||(i='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(a),'"></div>')),i},attachFilterRowEvents:function(){var e=this,t=this;if(this.settings.filterable){this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header");var n,i=null;this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",function(){var a=this,r=$(this),o=r.data("popupmenu"),c=r.closest('th[role="columnheader"]'),u="";return o?o.close(!0,!0):r.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",function(p,m,v){t.hideTooltip(),i=v,u=c.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","")}).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",function(){var p=$(a).data("popupmenu");p&&p.destroy(),i=null;var m=t.columnById(c.attr("data-column-id"))[0],v=c.find("input"),w=c.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");if(m&&/date|integer|decimal/.test(m.filterType))if(m.filterType==="date"){var C=m.editorOptions||{};m.dateFormat&&(C.dateFormat=m.dateFormat),t.filterSetDatepicker(v,w,C)}else{var A=m.filterMaskOptions?m.filterMaskOptions:m.maskOptions,S=(A==null||A==null?void 0:A.rangeNumberDelimeter)||"-",M=w==="in-range",I=v.data("mask"),z=M?{process:"rangeNumber",patternOptions:{delimeter:S}}:{process:"number",patternOptions:{delimeter:""}};I&&I.settings.process!==z.process&&(m.filterMaskOptions&&(m.filterMaskOptions=N.extend(!0,{},m.filterMaskOptions,z)),m.maskOptions&&(m.maskOptions=N.extend(!0,{},m.maskOptions,z)),I.updated(z))}var V=v.val(),U=c.attr("data-column-id"),G={operator:w,defaultOperator:u,value:V,columnId:U};t.element.triggerHandler("filteroperatorchanged",[G]),t.applyFilter(null,"selected")}),!1}),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){return clearTimeout(n),a.stopPropagation(),a.which!==13||(t.applyFilter(null,"enter"),a.preventDefault(),a.stopPropagation(),!1)}),this.element.off("focus.datagrid-filter-focus").on("focus.datagrid-filter-focus",".datagrid-filter-wrapper input",function(){var a;(a=i)===null||a===void 0||a==null||a.close();var r=$("#dropdown-list").attr("data-element-id"),o=$("#".concat(r)).data("dropdown");o&&o.isOpen()&&o.closeList("click")}),this.element.off("click.datagrid-filter-click").on("click.datagrid-filter-click","th",function(){var a;(a=i)===null||a===void 0||a==null||a.close();var r=$("#dropdown-list").attr("data-element-id"),o=$("#".concat(r)).data("dropdown");o&&o.isOpen()&&o.closeList("click")}),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){a.which!==13&&(e.activeCell&&e.activeCell.isFocused&&(e.activeCell.isFocused=!1),clearTimeout(n),n=setTimeout(function(){t.applyFilter(null,"keyup")},400))}),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each(function(){var a=t.columnById($(this).attr("data-column-id"))[0],r=$(this);if(!a)return!0;r.find("select.dropdown").each(function(){var p=$(this);p.dropdown(a.editorOptions).on("selected.datagrid",function(){t.applyFilter(null,"selected")}).on("listopened.datagrid",function(){var m=p.data("dropdown");m&&(N.isInViewport(m.list[0])||t.adjustPosLeft(m.list[0]))}),p.data("dropdown").settings.sourceArguments={column:a,container:r,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),r.find("select.multiselect").each(function(){var p=this,m=$(this);m.multiselect(a.editorOptions).on("selected.datagrid",function(){var v=$(p);$("#".concat(v.attr("id"))).val(v.val()),t.applyFilter(null,"selected")}),m.data("dropdown").settings.sourceArguments={column:a,container:r,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),a.filterMaskOptions?r.find("input").mask(a.filterMaskOptions):a.maskOptions&&r.find("input").mask(a.maskOptions),a.filterMask?r.find("input").mask(a.filterMask):a.mask&&r.find("input").mask(a.mask);var o=r.find(".datepicker");o.length&&typeof $().datepicker=="function"&&o.datepicker(a.editorOptions||{dateFormat:a.dateFormat}).on("listclosed.datepicker",function(){t.applyFilter(null,"selected")});var c=r.find(".lookup");c.length&&typeof $().lookup=="function"&&(a.editorOptions&&(a.editorOptions.clickArguments?a.editorOptions.clickArguments.grid=t:a.editorOptions.clickArguments={grid:t},a.editorOptions.clearArguments?a.editorOptions.clearArguments.grid=t:a.editorOptions.clearArguments={grid:t}),c.lookup(a.editorOptions||{}),t.settings.filterWhenTyping&&c.on("change",function(){t.applyFilter(null,"selected")}));var u=r.find(".timepicker");return u.length&&typeof $().timepicker=="function"&&(u.timepicker(a.editorOptions||{timeFormat:a.timeFormat}),u.on("change",function(){t.applyFilter(null,"enter")})),a.filterMask?r.find("input").mask({pattern:a.filterMask,mode:a.maskMode}):a.mask&&r.find("input").mask({pattern:a.mask,mode:a.maskMode}),null}),t.filterRowRendered=!0}},filterItemHtml:function(e,t,n){var i=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(e)});return'<li class="'.concat(e," ").concat(n?" is-checked":"",'"><a href="#">').concat(i,"<span>").concat(L.translate(t),"</span></a></li>")},filterButtonHtml:function(e){var t;if(!e.filterType)return"";var n=this,i=e.filterDisabled,a=$.isArray(e.filterConditions)?e.filterConditions:[],r=!a.some(function(C){return typeof C!="string"&&C.selected}),o=function(C,A,S){var M,I;r?(M=!(!a.length||a[0]!==C)||S,I=a):(I=[],M=typeof C!="string"&&C.selected,a.forEach(function(G){typeof G=="string"?I.push(G):I.push(G.value)}));var z,V,U=typeof C=="string"?C:C.value;return!a.length||(z=U,V=(V=I)||a,$.inArray(z,V)>-1)?n.filterItemHtml(U,A,M):""},c=N.stringAttributes(this,this.settings.attributes,"btn-filter-".concat((t=e.id)===null||t===void 0||t==null?void 0:t.toLowerCase())),u=function(C,A){var S=e.filterConditions!==void 0&&e.filterConditions.length===1;return'<button type="button" '.concat(c,' class="btn-menu btn-filter').concat(A?" ".concat(A):"").concat(S?" single":"",'" data-init="false" ').concat(i||S?" disabled":"").concat(C?' data-default="'.concat(C,'"'):"",' tabindex="0" type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},p=function(C){var A=C;switch(typeof A!="string"&&(A=C.value),C=A.split("-").map(function(S){return S=S.charAt(0).toUpperCase()+S.slice(1)}).join("")){case"StartWith":C=C.replace("StartWith","StartsWith");break;case"EndWith":C=C.replace("EndWith","EndsWith");break;case"LessEquals":C=C.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":C=C.replace("GreaterEquals","GreaterOrEquals")}return C},m=function(C,A){var S=A;return C.forEach(function(M){typeof M!="string"&&M.selected&&(S=M.value)}),S},v="",w="";return e.filterType==="contents"||e.filterType==="select"||e.filterType==="multiselect"?"":(e.filterType==="text"&&(w=m(a,a.length?a[0]:"contains"),v=a.length===0?(v=u(w)+o("contains","Contains",!0)+o("does-not-contain","DoesNotContain")+o("equals","Equals")+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")+o("end-with","EndsWith")+o("does-not-end-with","DoesNotEndWith")+o("start-with","StartsWith")+o("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",w):(v=u(w)+a.map(function(C){return o(C,p(C))}).join("")).replace("{{icon}}",w)),e.filterType==="checkbox"&&(v=(v+=u(w=a.length?a[0]:"selected-notselected","btn-filter-checkbox")+o("selected-notselected","All",!0)+o("selected","Selected")+o("not-selected","NotSelected")).replace("{{icon}}",w)),e.filterType!=="checkbox"&&e.filterType!=="text"&&(v=(v+=u(w=a.length?a[0]:"equals")+o("equals","Equals",e.filterType==="lookup"||e.filterType==="integer"||e.filterType==="decimal"||e.filterType==="date"||e.filterType==="time")+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")).replace("{{icon}}",w)),/\b(date|integer|decimal|percent)\b/g.test(e.filterType)&&(v+=o("in-range","InRange")),/\b(date|time)\b/g.test(e.filterType)&&(w=m(a,a.length?a[0]:"equals"),v=a.length===0?(v=u(w)+o("less-than","EarlyThan")+o("less-equals","EarlyOrEquals")+o("greater-than","LaterThan")+o("greater-equals","LaterOrEquals")).replace("{{icon}}",w):(v=u(w)+a.map(function(C){return o(C,p(C))}).join("")).replace("{{icon}}",w)),/\b(integer|decimal|percent)\b/g.test(e.filterType)&&(v=(v+="".concat(o("less-than","LessThan")).concat(o("less-equals","LessOrEquals")).concat(o("greater-than","GreaterThan")).concat(o("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),e.filterType==="lookup"&&(w=m(a,a.length?a[0]:"contains"),v=a.length===0?(v=u(w)+o("contains","Contains",!0)+o("does-not-contain","DoesNotContain")+o("equals","Equals")+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")+o("end-with","EndsWith")+o("does-not-end-with","DoesNotEndWith")+o("start-with","StartsWith")+o("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",w):(v=u(w)+a.map(function(C){return o(C,p(C))}).join("")).replace("{{icon}}",w)),v+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(e,t){var n=this,i=this,a=!1,r=function I(z){for(var V=0,U=z.length;V<U;V++)z[V]._isFilteredOut!==void 0&&delete z[V]._isFilteredOut,z[V].children&&I(z[V].children)};e?this.setFilterConditions(e):e=this.filterConditions(),this.filterExpr===void 0&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(e)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=e,a=!0,this.settings.treeGrid&&r(this.settings.dataset));var o=function(I){for(var z,V=!0,U=function(J){var te=i.columnById(e[J].columnId)[0];if(te===void 0)return{v:!1};var de,H=I&&I[te.field]!==void 0?I[te.field]:i.fieldValue(I,te.field),he=H==null?"":H.toString().toLowerCase(),ie=e[J].value.toString().toLowerCase(),me=null,ke=null,De=null,Me=!1;if(te.filterType==="percent"&&(ie=(ie/100).toString(),"".concat(te.name).toLowerCase()==="decimal"?(H=Sn.Decimal(!1,!1,H,te),ie=Sn.Decimal(!1,!1,ie,te)):"".concat(te.name).toLowerCase()==="integer"&&(H=Sn.Integer(!1,!1,H,te),ie=Sn.Integer(!1,!1,ie,te))),te.filterType==="text"){var Ve=te.formatter,Ke=e[J].columnId;he=(H=(H=i.formatValue(Ve,J,Ke,H,te,I,i)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())==null?"":H.toString().toLowerCase()}if(te.filterType!=="contents"&&te.filterType!=="select"&&te.filterType!=="multiselect"||(H=H==null?"":H.toString().toLowerCase()),!(typeof H!="number"&&(isNaN(H)||H===""||e[J].value instanceof Array)||/^(date|time|text)$/.test(te.filterType)))if(H=H===null?H:parseFloat(H),te&&((de=te.maskOptions)===null||de===void 0||de==null?void 0:de.process)==="rangeNumber"){var ct,qe=(ct=te.maskOptions.patternOptions)===null||ct===void 0||ct==null?void 0:ct.delimeter;qe=")".concat(qe,"("),ie.substr(0,1)==="("&&(ie=ie.substr(1)),ie.substr(-1)===")"&&(ie=ie.substr(0,ie.length-1)),ie=ie.split(qe).map(function(Fe){return L.parseNumber(Fe)}).sort(function(Fe,En){return Fe-En}),Me=!0}else ie=L.parseNumber(ie),Me=!1;if(te.filterType==="date"||te.filterType==="time"){typeof H=="string"&&(H=te.formatter(!1,!1,H,te,!0));var je=function(Fe,En){return(En=L.parseDate(En,e[J].format))&&(te.filterType==="time"&&(En.setDate(1),En.setMonth(0),En.setYear(0)),En=En.getTime()),Fe instanceof Date?(Fe=new Date(Fe.getTime()),te.filterType==="time"?(Fe.setDate(1),Fe.setMonth(0),Fe.setYear(0)):te.editorOptions&&te.editorOptions.showTime||(Fe.setHours(0),Fe.setMinutes(0),Fe.setSeconds(0),Fe.setMilliseconds(0)),Fe=Fe.getTime()):typeof Fe=="string"&&Fe&&(Fe=te.sourceFormat?L.parseDate(Fe,typeof te.sourceFormat=="string"?{pattern:te.sourceFormat}:te.sourceFormat):L.parseDate(Fe,{pattern:e[J].format}))&&(te.filterType==="time"?(Fe.setDate(1),Fe.setMonth(0),Fe.setYear(0)):te.editorOptions&&te.editorOptions.showTime||(Fe.setHours(0),Fe.setMinutes(0),Fe.setSeconds(0),Fe.setMilliseconds(0)),Fe=Fe.getTime()),{rValue:Fe,cValue:En}},lt=null;if(e[J].operator==="in-range"){var xt=i.settings.columns.indexOf(te),sn=i.element.find(".datagrid-header th:eq(".concat(xt,") .datagrid-filter-wrapper input")).data("datepicker");sn&&(ke=sn.settings.range.separator,(me=sn.settings.range.data)&&me.start?lt=je(H,me.start):ke&&ie.indexOf(ke)>-1&&(lt=je(H,(De=ie.split(ke))[0])))}else lt=je(H,e[J].value);H=lt?lt.rValue:H,ie=lt?lt.cValue:ie}switch(e[J].operator){case"equals":if(e[J].value instanceof Array){V=!1;for(var Xt=0;Xt<e[J].value.length;Xt++)e[J].value[Xt].toLowerCase()===H&&(H.toString()!==""||e[J].value[Xt]==="")&&(V=!0)}else V=H===ie&&H!=="";break;case"does-not-equal":V=H!==ie;break;case"contains":V=he.indexOf(ie)>-1&&H.toString()!=="";break;case"does-not-contain":V=he.indexOf(ie)===-1;break;case"end-with":V=he.lastIndexOf(ie)===he.length-ie.toString().length&&he!==""&&he.length>=ie.toString().length;break;case"start-with":V=he.indexOf(ie)===0&&he!=="";break;case"does-not-end-with":V=!(V=he.lastIndexOf(ie)===he.length-ie.toString().length&&he!==""&&he.length>=ie.toString().length);break;case"does-not-start-with":V=!(he.indexOf(ie)===0&&he!=="");break;case"is-empty":V=he==="";break;case"is-not-empty":if(H===""){V=H!=="";break}V=H!==null;break;case"in-range":if(V=!1,me&&me.startDate&&me.endDate){var yn=me.startDate.getTime(),qn=me.endDate.getTime();V=H>=yn&&H<=qn&&H!==null}else if(De){var Rn=L.parseDate(De[0],e[J].format),Ln=L.parseDate(De[1],e[J].format);Rn&&Ln&&(Rn=Rn.getTime(),Ln=Ln.getTime(),V=H>=Rn&&H<=Ln&&H!==null)}if(Me){var bt=H!==""&&H!==null;V=H>=ie[0]&&H<=ie[1]&&bt}break;case"less-than":V=H<ie&&H!==""&&H!==null;break;case"less-equals":V=H<=ie&&H!==""&&H!==null;break;case"greater-than":V=H>ie&&H!==""&&H!==null;break;case"greater-equals":V=H>=ie&&H!==""&&H!==null;break;case"selected":if(te&&te.isChecked){V=te.isChecked(H);break}V=(he==="1"||he==="true"||H===!0||H===1)&&he!=="";break;case"not-selected":if(te&&te.isChecked){V=!te.isChecked(H);break}V=he==="0"||he==="false"||H===!1||H===0||he==="";break;case"selected-notselected":V=!0}return V?void 0:{v:!1}},G=0;G<e.length;G++)if(z=U(G))return z.v;return V};if(!this.settings.disableClientFilter)if(this.settings.treeGrid)r(this.settings.dataset),function(){for(var I=!0,z=0,V=e.length;z<V;z++)e[z].filterType!=="checkbox"&&e[z].value.toString().trim()===""||(I=!1),e[z].filterType==="text"&&e[z].operator==="is-empty"&&(I=!1);return I}()||function I(z){for(var V=!0,U=0,G=z.length;U<G;U++){var J=z[U],te=!0;if(J.children)if(n.settings.allowChildExpandOnMatch&&n.settings.allowChildExpandOnMatchOnly){var de=o(J);de||(te=I(J.children)),de?(J._isFilteredOut=!1,V=!1):te?(J._isFilteredOut=!o(J),J._isFilteredOut||(V=!1)):V=!1}else(te=I(J.children))?(J._isFilteredOut=!o(J),J._isFilteredOut||(V=!1)):V=!1;else J._isFilteredOut=!o(J),J._isFilteredOut||(V=!1)}return V}(this.settings.dataset);else if(this.settings.groupable)for(var c,u=0,p=this.settings.dataset.length;u<p;u++){for(var m=!0,v=0,w=this.settings.dataset[u].values.length;v<w;v++)c=!o(this.settings.dataset[u].values[v]),this.settings.dataset[u].values[v]._isFilteredOut=c,c||(m=!1);this.settings.dataset[u]._isFilteredOut=m}else for(var C,A=0,S=this.settings.dataset.length;A<S;A++)C=!o(this.settings.dataset[A]),this.settings.dataset[A]._isFilteredOut=C;if(this.setChildExpandOnMatch(),this.settings.source||this.settings.disableClientFilter||(this.clearCache(),this.renderRows()),a){var M={trigger:t,type:"filtered"};this.settings.source&&(M.preserveSelected=this.settings.allowSelectAcrossPages),this.setSearchActivePage(M)}this.settings.disableClientFilter&&t==="restore"||(this.element.trigger("filtered",{op:"apply",conditions:e,trigger:t}),this.saveUserSettings())},adjustPosLeft:function(e){var t=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth;t.left<0&&t.right<=n?e.style.left="".concat(20,"px"):t.left>=0&&!(t.right<=n)&&(e.style.left="".concat(n-t.width-20,"px"))},setChildExpandOnMatch:function(){var e=this.settings;e.treeGrid&&(function t(n){for(var i=!1,a=0,r=n.length;a<r;a++){var o,c,u=n[a];u._isFilteredOut&&!i&&(o=u.children)!==null&&o!==void 0&&((c=o)!=null&&c.length)&&(u._isFilteredOut=!t(u.children)),typeof u._isFilteredOut!="boolean"||u._isFilteredOut||(i=!0)}return i}(e.dataset),function t(n,i){for(var a=0,r=n.length;a<r;a++){var o=n[a],c=o.children,u=c?c.length:0;if(u){if(!o._isFilteredOut)if(e.allowChildExpandOnMatch&&!e.allowChildExpandOnMatchOnly)for(var p=0;p<u;p++)c[p]._isFilteredOut=!1;else{for(var m=!0,v=0;v<u;v++)c[v]._isFilteredOut||(m=!1);o.isAllChildrenFiltered=m}t(c)}}}(e.dataset))},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each(function(){var e=$(this);e.val(""),e.is("select")&&e.find("option").each(function(){$(this).prop("selected",!1)}),e.trigger("updated")}),this.element.find(".datagrid-header .btn-filter").each(function(){var e=$(this),t=e.next(),n=t.find("li:first");e.find("svg:first > use").attr("href","#icon-filter-".concat(e.attr("data-default"))),t.find(".is-checked").removeClass("is-checked"),n.addClass("is-checked")}))},setFilterConditions:function(e){this.clearFilterFields();for(var t=0;t<e.length;t++){var n=this.element.find('.datagrid-header th[data-column-id="'.concat(e[t].columnId,'"]')),i=n.find("input, select"),a=n.find(".btn-filter"),r=a.next();if(e[t].value===void 0&&(e[t].value=""),i.val(e[t].value),i.is(".lookup")&&i.parent().find("svg.close").length===1&&e[t].value&&i.parent().find("svg.close").removeClass("is-empty"),i.is("select")){var o=e[t].value instanceof Array?e[t].value[0]:e[t].value;if(e[t].innerHTML&&(i[0].innerHTML=e[t].innerHTML),i.find('option[value="'.concat(o,'"]')).length)if(e[t].value instanceof Array&&!e[t].selectedOptions){var c=i[0].querySelectorAll("option");i.val("");for(var u=0;u<c.length;u++)c[u].selected=!1;for(var p=0;p<e[t].value.length;p++)i.find('option[value="'.concat(e[t].value[p],'"]')).prop("selected",!0)}else i.find('option[value="'.concat(e[t].value,'"]')).prop("selected",!0);else{var m=i.data("dropdown");m&&m.setCode(e[t].value)}i.trigger("updated")}a.find("svg:first > use").attr("href","#icon-filter-".concat(e[t].operator)),r.find(".is-checked").removeClass("is-checked"),r.find(".".concat(e[t].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&this.filterExpr.length===1&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var e=[],t=this;return this.element.find("th.is-filterable").each(function(){var n,i=$(this),a=i.find(".btn-filter"),r=i.find("input, select"),o=r.is("select"),c=a.find(".icon-dropdown:first"),u=null;if((a.length||o)&&(n=o?"equals":c.getIconName().replace("filter-",""))!=="selected-notselected"&&!(r.val()===""&&["is-not-empty","is-empty","selected","not-selected"].indexOf(n)===-1||r.val()instanceof Array&&r.val().length===0)){var p=r.val()?r.val():"";r.attr("data-mask-mode")&&r.attr("data-mask-mode")==="number"&&(p=L.parseNumber(p));var m={columnId:i.attr("data-column-id"),operator:n,value:p};r.data("datepicker")&&(u=r.data("datepicker").pattern,m.format=u),r.data("timepicker")&&(u=r.data("timepicker").settings.timeFormat,m.format=u),r.is("select")&&(m.innerHTML=r[0].innerHTML);var v=t.columnById(m.columnId);v&&v[0]&&(m.filterType=v[0].filterType),e.push(m)}}),e},getExtraTop:function(){var e=this.settings,t={default:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},filterable:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},group:{extraSmall:-22,short:-25,small:-25,medium:-30,normal:-39,large:-39},groupFilter:{extraSmall:-28,short:-29,small:-29,medium:-32,normal:-39,large:-39}},n=e.rowHeight==="extra-small"?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable?t.groupFilter[n]:t.group[n]:e.filterable?t.filterable[n]:t.default[n]},getTargetHeight:function(){var e=this.settings,t={default:{extraSmall:20,short:20,small:20,medium:28,normal:35,large:35},filterable:{extraSmall:47,short:53,small:53,medium:54,normal:60,large:60},group:{extraSmall:43,short:46,small:46,medium:56,normal:74,large:74},groupFilter:{extraSmall:80,small:80,short:83,medium:87,normal:103,large:103}},n=e.rowHeight==="extra-small"?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable&&this.filterRowRendered?t.groupFilter[n]:t.group[n]:e.filterable&&this.filterRowRendered?t.filterable[n]:t.default[n]},getCellPadding:function(){return{"extra-small":8,short:8,small:8,medium:16,normal:16,large:16}[this.settings.rowHeight]},createDraggableColumns:function(){var e=this,t=e.headerNodes().not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column"),n=$(".drag-target-arrows",e.element);n.length||(e.element.prepend('<span class="drag-target-arrows" style="height: '.concat(e.getTargetHeight(),'px;"></span>')),n=$(".drag-target-arrows",e.element)),t.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),t.prepend('<span class="is-draggable-target"></span>'),t.last().append('<span class="is-draggable-target last"></span>'),e.element.addClass("has-draggable-columns"),$(".handle",t).each(function(){var i=null,a=null,r=null,o=0,c=$(this),u=c.parent();c.on("mousedown.datagrid",function(p){p.preventDefault(),e.editor&&e.editor.input&&e.commitCellEdit(),u.drag({clone:!0,cloneAppendTo:t.first().parent().parent(),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(m,v,w){(i=w).removeAttr("id").addClass("is-dragging-clone").css({left:L.isRTL()?v.right-i.width():v.left,top:v.top,height:u.height(),border:0}),$(".is-draggable-target",i).remove(),e.setDraggableColumnTargets(),o=e.getExtraTop(),a=u.position(),r={top:v.top-a.top,left:v.left-a.left};var C=e.targetColumn(a);e.draggableStatus.startIndex=C,p.stopImmediatePropagation()}).off("drag.datagrid").on("drag.datagrid",function(m,v){i[0].style.left="".concat(parseInt(L.isRTL()?v.left+v.offset.x-v.clone.width():v.left,10),"px"),i[0].style.top="".concat(parseInt(v.top,10),"px"),a={top:v.top-r.top,left:v.left-r.left},L.isRTL()&&(a.left=parseInt(i[0].style.left,10));var w=0,C=null,A=null,S=e.targetColumn(a);if($(".is-draggable-target",t).add(n).removeClass("is-over"),S!==-1)for(var M=function(){if(C=e.draggableColumnTargets[I],w=I+1,C.index===S&&C.index!==e.draggableStatus.startIndex){C.index>e.draggableStatus.startIndex&&w<z&&(C=e.draggableColumnTargets[w]);var V=C.el.siblings(".datagrid-column-wrapper").find(".datagrid-header-text").text();e.getFrozenColumnDetails().filter(function(G){return G.name===V}).length>0||(C.el.addClass("is-over"),n.addClass("is-over")),A=C.el[0].getBoundingClientRect(),n[0].style.left="".concat(parseInt(A.left+(L.isRTL()?2:1),10),"px");var U=0;C.el.hasClass("last")&&(U=-(u.height()-3)),n[0].style.top="".concat(parseInt(A.top,10)+1+o+U,"px")}},I=0,z=e.draggableColumnTargets.length;I<z;I++)M();p.stopImmediatePropagation()}).off("dragend.datagrid").on("dragend.datagrid",function(m,v){L.isRTL()||(i[0].style.left="".concat(parseInt(v.left,10),"px"),i[0].style.top="".concat(parseInt(v.top,10),"px")),a={top:v.top-r.top,left:v.left-r.left},L.isRTL()&&(a.left=parseInt(i[0].style.left,10));var w,C,A,S,M=e.targetColumn(a),I=u.data("drag"),z=[];if(I&&I.destroy&&I.destroy(),e.draggableStatus.endIndex=M,$(".is-draggable-target",t).add(n).removeClass("is-over"),e.draggableStatus.endIndex!==-1&&e.draggableStatus.startIndex!==e.draggableStatus.endIndex){for(w=0,C=e.settings.columns.length;w<C;w++)e.settings.columns[w].hidden||e.settings.columns[w].id==="selectionCheckbox"||z.push(w);if(A=z[e.draggableStatus.startIndex]||0,S=z[e.draggableStatus.endIndex]||0,e.settings.showDirty&&e.dirtyArray){var V=function(G,J,te,de){for(var H=[],he=te;he<=de;he++)J[he]&&at(J[he])==="object"?e.setDirtyCell(G,he,J[he]):J[he]===!1&&H.push(he);H.forEach(function(ie){return e.clearDirtyCell(G,ie)})},U=function(G,J,te,de,H){e.dirtyArray[G][H]&&e.dirtyArray[G][H].isDirty?te[H]=!0:(te[H]=la({},J[de]),te[H].cell=H,te[H].column=e.settings.columns[H])};A>S?e.dirtyArray.forEach(function(G,J){for(var te=Array(A+1).fill(!1),de=S;de<=A;de++)G&&G[de]&&G[de].isDirty&&(de===A?U(J,G,te,A,S):U(J,G,te,de,de+1));V(J,te,S,A)}):A<S&&e.dirtyArray.forEach(function(G,J){for(var te=Array(S+2).fill(!1),de=S;de>=A;de--)G&&G[de]&&G[de].isDirty&&(de===A?U(J,G,te,A,S):U(J,G,te,de,de-1));V(J,te,A,S)})}e.updateGroupHeadersAfterColumnReorder(A,S),e.arrayIndexMove(e.settings.columns,A,S),e.updateColumns(e.settings.columns),e.element.trigger("columnreorder",[{indexFrom:A,indexTo:S,columns:e.settings.columns}])}})})})},getFrozenColumnDetails:function(){var e=this,t=this.settings.frozenColumns,n=[],i=[];t.left.length>0&&(n=$.merge(n,t.left)),t.right.length>0&&(n=$.merge(n,t.right));for(var a=function(o){var c=e.settings.columns.filter(function(u){return u.id===n[o]});c.length>0&&i.push(c[0])},r=0;r<n.length;r++)a(r);return i},setDraggableColumnTargets:function(){var e,t,n=this,i=n.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column");n.draggableColumnTargets=[],n.draggableStatus={},$(".is-draggable-target.last",i.last()).length||i.last().append($(".is-draggable-target.last",n.headerNodes())),$(".is-draggable-target",i).each(function(a){var r=$(this).is(".last")?a-1:a;e=i.eq(r),t=e.position(),n.draggableColumnTargets.push({el:$(this),index:r,pos:t,width:e.outerWidth(),height:e.outerHeight(),dropArea:{x1:t.left-20,x2:t.left+e.outerWidth()+20,y1:t.top-20+n.getExtraTop(),y2:t.top+e.outerHeight()+20}})})},targetColumn:function(e){var t,n,i,a=-1;for(n=0,i=this.draggableColumnTargets.length-1;n<i;n++)if(t=this.draggableColumnTargets[n],e.left>t.dropArea.x1&&e.left<t.dropArea.x2&&e.top>t.dropArea.y1&&e.top<t.dropArea.y2&&(a=t.index,L.isRTL()))return a;return a},arrayIndexMove:function(e,t,n){for(var i,a=[e[t],e[n]],r=this.getFrozenColumnDetails(),o=function(u){var p=a.filter(function(m){return m.id===r[u].id});if(p.length>0)return{v:void 0}},c=0;c<r.length;c++)if(i=o(c))return i.v;e.splice(n,0,e.splice(t,1)[0])},resetGroupArray:function(){if(this.settings.groupable){this.groupArray=[];for(var e=0,t=this.settings.dataset.length;e<t;e++)for(var n=0,i=this.settings.dataset[e].values.length;n<i;n++)this.groupArray.push({group:e,node:n})}},resequenceGroupRows:function(){if(this.settings.groupable)for(var e=this.tableBody.find("tr:not(.datagrid-rowgroup-header)"),t=0;t<e.length;t++)e[t].setAttribute("aria-rowindex",this.pagingRowIndex(t+1))},createDraggableRowsGroupable:function(){var e=this,t=this,n=this.settings;if(n.rowReorder&&n.groupable){n.columns[0].id==="rowReorder"&&(n.columns[0].resizable=!1,this.tableBody.find('> [role="row"] td:first-child').removeClass("l-center-text").addClass("reorder-group-child-col"));var i,a="> tr:not(.is-dragging-clone)",r=function(o){for(var c=0,u=i.length;c<u;c++){var p=i[c].rect;if(o.top>=p.top&&o.top<p.bottom)return la({},i[c])}return null};this.tableBody.find(a).find(".datagrid-reorder-icon").each(function(){var o=null,c=null,u=null,p=!1,m=$(this);m.off("mousedown.datagrid").on("mousedown.datagrid",function(v){v.preventDefault(),function(w){var C=w.buttons||w.which||w.button;return!(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)&&C===1}(v)&&m.closest("tr").drag({axis:"y",clone:!0,cloneAppendTo:m.closest("tbody"),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(w,C,A){(o=A).removeAttr("id").addClass("is-dragging-clone groupable"),o.css({top:"".concat(C.top,"px")});var S=o.find("> td");$(this).find("> td").each(function(I,z){return S.eq(I).width($(z).width())}),function(){i=[];for(var I=e.tableBody.find(a),z=0,V=-1,U=-1,G=I.length;z<G;z++){var J=I[z];J.getAttribute("role")==="rowgroup"?(V++,U=-1):U++,i.push({group:V,node:U,row:J,idx:z,rect:J.getBoundingClientRect(),role:J.getAttribute("role")})}}(),(u={idx:t.tableBody.find(a).index(this),rect:this.getBoundingClientRect(),role:this.getAttribute("role"),row:this}).group=i[u.idx].group,u.node=i[u.idx].node;var M=$(this);u.role==="rowgroup"?c=M.add(M.nextUntil(".datagrid-rowgroup-header")):u.role==="row"&&(c=M),c.css("opacity",".4"),p=!0}).on("drag.datagrid",function(w,C){if(o&&p){p=!1;var A=!1,S=r(C);S!==null&&(u.role==="rowgroup"&&(A=u.group!==S.group),u.role==="row"&&(A=u.role===S.role&&u.group===S.group));var M=A?"":"not-allowed";o.add(o.find(".datagrid-reorder-icon")).css("cursor",M),p=!0}}).off("dragend.datagrid").on("dragend.datagrid",function(w,C){var A=C.top>u.rect.top,S=r(C),M=!1;if(S!==null){var I;if(u.role==="rowgroup"&&u.group!==S.group){var z=".datagrid-rowgroup-header";A?(I=$(S.row).nextUntil(z).last(),c.insertAfter(I)):(I=S.role==="rowgroup"?S.row:$(S.row).prevUntil(z).last().prev(z),c.insertBefore(I)),t.arrayIndexMove(n.dataset,u.group,S.group),M=!0}else u.role==="row"&&u.role===S.role&&u.group===S.group&&(t.arrayIndexMove(n.dataset[u.group].values,u.node,S.node),I=S.row,c[A?"insertAfter":"insertBefore"](I),M=!0);if(M){t.resetGroupArray(),t.resequenceGroupRows(),t.syncSelectedRowsIdx();var V={start:{rowIndex:u.idx,group:u.group,node:u.node!==-1?u.node:null},end:{rowIndex:S.idx,group:S.group,node:u.node!==-1?S.node:null},rowreorderRows:c,role:u.role};t.element.trigger("rowreorder",[V])}}c.css("opacity",""),p=!1;var U=m.closest("tr").data("drag");U==null||U==null||U.destroy()})})})}},createDraggableRows:function(){var e=this;this.settings.rowReorder&&(this.settings.groupable?this.createDraggableRowsGroupable():(this.tableBody.children().filter(function(){return $(this).find(".datagrid-reorder-icon").length<1}).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",function(t,n){e.isSafari&&n.start.css({display:"inline-block"})}).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",function(t,n){e.isSafari&&n.end.css({display:""}),e.reorderRow(n.startIndex,n.endIndex,n)})))},reorderRow:function(e,t,n){var i=t>e,a=this.tableBody.find("tr").eq(e),r=this.tableBody.find("tr").eq(t),o={start:this.dataRowIndex(n?n.start:r)};o.end=o.start+(t-e),this.arrayIndexMove(this.settings.dataset,o.start,o.end),n?(this.settings.rowTemplate||this.settings.expandableRow)&&(i?(this.tableBody.find("tr").eq(2*e).insertAfter(n.end),n.end.next().next().insertAfter(n.over)):this.tableBody.find("tr").eq(2*e).next().insertAfter(n.end)):a[i?"insertAfter":"insertBefore"](r);for(var c=this.tableBody.find("tr:not(.datagrid-expandable-row)"),u=0;u<c.length;u++)c[u].setAttribute("data-index",u),c[u].setAttribute("aria-rowindex",this.pagingRowIndex(u+1));this.element.trigger("rowreorder",[{endIndex:t,startIndex:e,over:r,start:a}]),this.syncSelectedRowsIdx()},fieldValue:function(e,t){var n,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(!t||!e)return"";var a=(n=t.indexOf(".")>-1?t.split(".").reduce(function(r,o){return r?r[o]:""},e):e[t])||n===0||n===!1?n:"";return i&&(a=_e.escapeHTML(a)),a},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter(function(e){return e.depth===1}))},setTreeDepth:function(e){if(this.settings.treeGrid){var t=this,n=0,i=function o(c,u){var p,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];n++,t.settings.treeDepth.push({idx:n,depth:u,parents:m.slice(),node:c});var v=c==null||(p=c?.children)===null||p===void 0||p==null?void 0:p.length;if(v){m.push(n-1);for(var w=0;w<v;w++)o(c.children[w],u+1,m.slice())}};e=e||this.settings.dataset,t.settings.treeDepth=[];for(var a=0,r=e.length;a<r;a++)i(e[a],1)}},setRowGrouping:function(){var e=this.settings.groupable;e&&(this.originalDataset?(!this.settings.dataset||this.settings.dataset.length>0)&&(this.settings.dataset=this.originalDataset):this.originalDataset=this.settings.dataset.slice(),e.aggregator&&e.aggregator!=="none"?e.aggregator!=="sum"?e.aggregator!=="max"?e.aggregator!=="min"?e.aggregator!=="avg"?e.aggregator!=="count"?e.aggregator!=="list"?this.settings.dataset=mi(this.settings.dataset,e.fields):this.settings.dataset=mi.list(this.settings.dataset,e.fields,e.aggregatorOptions):this.settings.dataset=mi.count(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=mi.avg(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=mi.min(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=mi.max(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=mi.sum(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=mi.none(this.settings.dataset,e.fields))},renderRows:function(){var e="",t="",n="",i=0,a=this,r=a.settings,o=a.table.find("tbody"),c=1;if(a.pagerAPI){var u=a.pagerAPI.state;c=u.filteredActivePage?u.filteredActivePage:u.activePage}for(a.bodyColGroupHtmlLeft="<colgroup>",a.bodyColGroupHtml="<colgroup>",a.bodyColGroupHtmlRight="<colgroup>",a.triggerDestroyCell(),a.settings.columns&&a.settings.columns.length!==0||a.settings.columns.push({id:"blank",value:"",field:""}),this.currentPageRows=[],i=0;i<a.settings.columns.length;i++){var p=a.settings.columns[i],m=a.getContainer(p.id),v=a.columnWidth(p,i);switch(m){case"left":a.bodyColGroupHtmlLeft+="<col".concat(v).concat(p.hidden?' class="is-hidden"':"","></col>");break;case"right":a.bodyColGroupHtmlRight+="<col".concat(v).concat(p.hidden?' class="is-hidden"':"","></col>");break;default:a.bodyColGroupHtml+="<col".concat(v).concat(p.hidden?' class="is-hidden"':"","></col>")}p.colspan&&(a.hasColSpans=!0)}a.emptyMessageContainer&&a.emptyMessageContainer.hide(),o.length===0&&(a.hasLeftPane&&(a.tableBodyLeft=$('<tbody role="rowgroup"></tbody>'),a.tableLeft.append(a.tableBodyLeft)),a.tableBody=$('<tbody role="rowgroup"></tbody>'),a.table.append(a.tableBody),a.hasRightPane&&(a.tableBodyRight=$('<tbody role="rowgroup"></tbody>'),a.tableRight.append(a.tableBodyRight))),a.groupArray=[],a.recordCount=0,a.filteredCount=0,a.runningCount=0,r.treeGrid&&r.paging&&!r.source&&c>1&&(a.recordCount=r.treeRootNodes[r.pagesize*c-r.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();var w=!1;a.originalDataset&&!r.groupable&&r.dataset.length>0&&(r.dataset=a.originalDataset);for(var C=0;C<r.dataset.length;C++){var A,S,M,I;if(r.paging&&!r.source){if(c===1&&C-this.filteredCount>=r.pagesize){r.dataset[C]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(c>1&&!(C-this.filteredCount>=r.pagesize*(c-1)&&C-this.filteredCount<r.pagesize*c)){r.dataset[C]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!r.virtualized||this.isRowVisible(this.recordCount))if((!r.treeGrid&&r.dataset[C])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(r.dataset[C].values){for(var z=r.dataset[C].values.length,V=0,U=0;U<z;U++)r.dataset[C].values[U]._isFilteredOut&&V++;if(V===z)continue}if(!this.settings.groupable.suppressGroupRow){var G=a.rowHtml(r.dataset[C],this.recordCount,C,!0);this.hasLeftPane&&G.left&&(t+=G.left),G.center&&(e+=G.center),this.hasRightPane&&G.right&&(n+=G.right)}if(this.settings.groupable.showOnlyGroupRow&&r.dataset[C].values[0]){var J=r.dataset[C].values[0];r.dataset[C].list&&(J.list=r.dataset[C].list),J.values=r.dataset[C].values;var te=a.rowHtml(J,this.recordCount,C);this.hasLeftPane&&te.left&&(t+=te.left),te.center&&(e+=te.center),this.hasRightPane&&te.right&&(n+=te.right),this.recordCount++,a.groupArray.push({group:C,node:0});continue}for(var de=0;de<r.dataset[C].values.length;de++)if(!r.dataset[C].values[de]._isFilteredOut){var H=a.rowHtml(r.dataset[C].values[de],this.recordCount,r.dataset[C].values[de].idx);a.hasLeftPane&&H.left&&(t+=H.left),H.center&&(e+=H.center),a.hasRightPane&&H.right&&(n+=H.right),this.recordCount++,a.groupArray.push({group:C,node:de})}if(this.settings.groupable.groupFooterRow){var he=a.rowHtml(r.dataset[C],this.recordCount,C,!0,!0);a.hasLeftPane&&he.left&&(t+=he.left),he.center&&(e+=he.center),a.hasRightPane&&he.right&&(n+=he.right)}}else{var ie=C;r.treeGrid&&(ie=this.recordCount),a.runningCount++;var me,ke,De=a.rowHtml(r.dataset[C],ie,C);a.hasLeftPane&&De.left&&(t+=De.left),De.center&&(e+=De.center,r.treeGrid&&(me=this.filterExpr)!==null&&me!==void 0&&((ke=me)!=null&&ke.length)&&$("<table>".concat(De.center,"</table>")).find("tr:first").is(".is-hidden")&&this.filteredCount++),a.hasRightPane&&De.right&&(n+=De.right),(A=r.dataset[C])!==null&&A!==void 0&&((S=A)!=null&&S._isFilteredOut)||this.recordCount++,this.visibleRowCount=ie+1,(M=r.dataset[C])!==null&&M!==void 0&&((I=M)!=null&&I.rowStatus)&&(w=!0)}else this.recordCount++}if(this.settings.summaryRow){a.element.addClass("has-summary-row");var Me=a.calculateTotals(),Ve=a.rowHtml(Me,this.recordCount,null,!1,!0);a.hasLeftPane&&Ve.left&&(t+=Ve.left),Ve.center&&(e+=Ve.center),a.hasRightPane&&Ve.right&&(n+=Ve.right)}a.bodyColGroupHtml!=="<colgroup>"&&this.settings.spacerColumn&&(a.bodyColGroupHtml+='<col style="width: 100%">'),a.bodyColGroupHtmlLeft+="</colgroup>",a.bodyColGroupHtml+="</colgroup>",a.bodyColGroupHtmlRight+="</colgroup>",a.bodyColGroupLeft&&a.bodyColGroupLeft.remove(),a.bodyColGroup&&a.bodyColGroup.remove(),a.bodyColGroupRight&&a.bodyColGroupRight.remove(),a.hasLeftPane&&(a.bodyColGroupLeft=$(a.bodyColGroupHtmlLeft),(a.tableBodyLeft||a.headerRowLeft).before(a.bodyColGroupLeft)),a.bodyColGroup=$(a.bodyColGroupHtml),(a.headerRow||a.tableBody).before(a.bodyColGroup),a.hasRightPane&&(a.bodyColGroupRight=$(a.bodyColGroupHtmlRight),(a.tableBodyRight||a.headerRowRight).before(a.bodyColGroupRight)),a.hasLeftPane&&ue.html(a.tableBodyLeft,t,"*"),ue.html(a.tableBody,e,"*"),a.hasRightPane&&ue.html(a.tableBodyRight,n,"*"),a.setVirtualHeight(),a.setScrollClass(),a.setupTooltips(w),a.afterRender()},afterRender:function(){var e=this,t=this;this.settings.fixedRowHeight&&this.settings.fixedRowHeight==="auto"&&this.settings.frozenColumns&&t.tableBody.find("tr").each(function(r){var o,c=0,u=0,p=$(this);o=p.height(),t.tableBodyLeft&&(c=t.tableBodyLeft.find("tr").eq(r).height()),t.tableBodyRight&&(u=t.tableBodyLeft.find("tr").eq(r).height());var m=Math.max(c,o,u);return p.css("height",m),t.tableBodyLeft&&(c=t.tableBodyLeft.find("tr").eq(r).css("height",m)),t.tableBodyRight&&(u=t.tableBodyLeft.find("tr").eq(r).css("height",m)),!0}),this.postRenderCell();var n=t.tableBody.find("select.dropdown");n.dropdown&&n.dropdown(),t.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",function(){var r=$(this),o=r.val(),c=r.closest("tr");t.updateCellNode(c.attr("aria-rowindex"),r.closest("td").index(),o,!1,!0)});var i=t.tableBody.find(".spinbox");i.spinbox&&i.spinbox(),t.settings.source||t.displayCounts(),t.setAlternateRowShading(),t.createDraggableRows();var a=document.activeElement;t.activeCell.isFocused&&(!a||a&&a.tagName.toLowerCase()==="body")&&t.setActiveCell(t.activeCell.row,t.activeCell.cell),t.settings.paging&&t.settings.source&&!t.settings.allowSelectAcrossPages&&(t.preventSelection||(t._selectedRows=[]),t.syncSelectedUI()),t.settings.paging&&t.settings.source&&t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),t.settings.paging&&!t.settings.source&&t.settings.allowSelectAcrossPages===null&&(t.syncSelectedRows(),t.syncSelectedUI()),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.element.find(".datagrid-img").off("error.datagrid").on("error.datagrid",function(r){var o=$(r.target),c=o.parent(),u=$('<svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-'.concat(e.settings.fallbackImage,'"></use></svg>'));u.tooltip(e.settings.fallbackTooltip),u.css(e.settings.fallbackSize),c.append(u),o.remove()}),setTimeout(function(){t.element.trigger("afterrender",{body:t.container.find("tbody"),header:t.container.find("thead"),pager:t.pagerAPI}),e.activateFirstCell()})},postRenderCell:function(){var e=this;if(this.settings.onPostRenderCell)for(var t=function(){var i=e.settings.columns[n];i.component&&e.tableBody.find("tr").each(function(){var a,r=$(this),o=e.settings.treeGrid?e.actualPagingRowIndex(e.actualRowIndex(r)):e.dataRowIndex(r),c=r.attr("data-lineage"),u=e.rowData(o),p=e.columnIdxById(i.id)-(((a=e.settings.frozenColumns)===null||a===void 0||(a=a?.left)===null||a===void 0||a==null?void 0:a.length)||0),m={row:c||o,cell:p,value:u,rowData:u,col:i,api:e};e.settings.onPostRenderCell(r.find("td").eq(p).find(".datagrid-cell-wrapper .content")[0],m)})},n=0;n<this.settings.columns.length;n++)t()},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var e=this,t=this;if(t.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var n=t.tableBody.find("tr");if(n.length===0)return;for(var i=function(){var r=e.settings.columns[a];r.component&&n.each(function(){var o=$(this),c=o.index(),u=t.columnIdxById(r.id),p={row:o.index(),cell:u,value:t.settings.dataset[c],col:r,api:t};t.settings.onDestroyCell(o.find("td").eq(u).find(".datagrid-cell-wrapper .content")[0],p)})},a=0;a<this.settings.columns.length;a++)i()}},cacheVirtualStats:function(){var e=this.element[0].offsetHeight,t=this.bodyWrapperCenter[0].scrollTop,n=this.settings.rowHeight==="normal"||this.settings.rowHeight==="large"?40:this.settings.rowHeight==="medium"?30:25,i=e-n,a=this.settings.rowHeight==="normal"||this.settings.rowHeight==="large"?50:this.settings.rowHeight==="medium"?40:30;this.settings.rowHeight==="extra-small"&&(n=22,a=27),this.virtualRange={rowHeight:a,top:Math.max(t-(this.settings.virtualRowBuffer-1)*a,0),bottom:t+i+(this.settings.virtualRowBuffer-1)*a,totalHeight:a*this.settings.dataset.length,bodyHeight:i}},isRowVisible:function(e){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&e&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=e&&this.pagerAPI.activePage*this.settings.pagesize>=e;e===0&&this.cacheVirtualStats();var t=e*this.virtualRange.rowHeight;return t>=this.virtualRange.top&&t<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var e=this.virtualRange.totalHeight-this.virtualRange.bottom,t=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),t>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),t>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(t,"px")),t===0&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),e>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),e>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(e,"px")),e<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(e,t,n,i,a,r,o){var c=arguments.length>7&&arguments[7]!==void 0&&arguments[7];return o=o||this,e===void 0&&(e=this.defaultFormatter),typeof e=="string"?Sn[e](t,n,i,a,r,o,c).toString():e(t,n,i,a,r,o,c).toString()},rowHtml:function(e,t,n,i,a,r,o){var c,u,p,m=arguments.length>7&&arguments[7]!==void 0&&arguments[7],v=this,w=this.settings.summaryRow&&!i&&a,C=v.pagerAPI?v.pagerAPI.activePage:1,A={left:"",center:"",right:""},S=v.settings.treeDepth?v.settings.treeDepth[t]:0,M=0,I=!1;if(!e)return"";var z=v.settings.enableTooltips,V=!1;if(w&&(e.isSummaryRow=w),v.settings.isRowDisabled&&typeof v.settings.isRowDisabled=="function"&&v.settings.isRowDisabled(n,e)&&(V=!0),e.isRowDisabled&&(V=!0),u=S=S?S.depth:0,v.settings.treeDepth&&v.settings.treeDepth.length)if(e._isFilteredOut)I=!0;else{var U,G=v.settings.treeDepth[t];if(G&&G.depth>1&&(U=G.parents)!==null&&U!==void 0&&U?.length)for(var J=0,te=G.parents.length;J<te;J++){var de=G.parents[J],H=v.settings.treeDepth[de];if(H.node&&H.node.expanded!==void 0&&!H.node.expanded){I=!0;break}}}if(this.settings.groupable&&!a){var he=this.settings.groupable;I=he.expanded!==void 0&&!he.expanded,he.expanded&&typeof he.expanded=="function"&&(I=!he.expanded(t,0,null,null,e,this),this.isFooterHidden=I)}var ie=this.settings.frozenColumns.left.length,me=this.settings.frozenColumns.right.length,ke=this.visibleColumns().length-ie-me;if(this.settings.groupable&&i&&!a){var De=Sn.GroupRow(t,0,null,null,e,this);return A.left='<tr class="datagrid-rowgroup-header'.concat(I?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(ie,'">').concat(De.left||"<span>&nbsp;</span>","</td></tr>"),A.center='<tr class="datagrid-rowgroup-header'.concat(I?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(ke,'">').concat(De.center||"<span>&nbsp;</span>","</td></tr>"),A.right='<tr class="datagrid-rowgroup-header'.concat(I?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(me,'">').concat(De.right||"<span>&nbsp;</span>","</td></tr>"),A}if(this.settings.groupable&&i&&a){var Me=Sn.GroupFooterRow(t,0,null,null,e,this);return A.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(Me.left||"<span>&nbsp;</span>","</tr>"),A.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(Me.center||"<span>&nbsp;</span>","</tr>"),A.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(Me.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,A}var Ve=(v.settings.treeGrid||w?t:n)+1+(v.settings.source&&!v.settings.indeterminate?(C-1)*v.settings.pagesize:0);c=this.recordCount%2==0;var Ke=this.isRowSelected(e),ct=e._rowactivated,qe={class:"",svg:""};e&&e.rowStatus&&(e.rowStatus.icon!=="new"||v.settings.showNewRowIndicator)&&(qe.show=!0,qe.class=" rowstatus-row-".concat(e.rowStatus.icon),qe.icon=e.rowStatus.icon==="success"?"#icon-check":"#icon-exclamation",qe.title=e.rowStatus.tooltip!==""?' title="'.concat(e.rowStatus.tooltip,'"'):"",qe.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(qe.title,'><use href="').concat(qe.icon,'"></use></svg>'));var je="";if(this.settings.fixedRowHeight&&typeof this.settings.fixedRowHeight=="function"&&(je=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,Ve,n,e),'"px" ')),this.settings.fixedRowHeight&&typeof this.settings.fixedRowHeight=="number"&&(je=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),this.currentPageRows){var lt={ariaRowindex:Ve,actualIndexLineage:r,dataIndex:n,isFilteredOut:e._isFilteredOut};this.currentPageRows.push(lt)}for(A.center='<tr role="row" aria-rowindex="'.concat(Ve,'"')+' data-index="'.concat(n,'"').concat(r?' data-lineage="'.concat(r,'"'):"").concat(v.settings.treeGrid&&e.children?' aria-expanded="'.concat(e.expanded?'true"':'false"'):"").concat(v.settings.treeGrid?' aria-level="'.concat(u,'"'):"").concat(V?' aria-disabled="true"':"").concat(Ke?' aria-selected="true"':"",' class="datagrid-row').concat(qe.class).concat(I?" is-hidden":"").concat(e._isFilteredOut?" is-filtered":"").concat(ct?" is-rowactivated":"").concat(V?" is-rowdisabled":"").concat(z?" is-tooltips-enabled":"").concat(Ke?this.settings.selectable==="mixed"?" is-selected hide-selected-color":" is-selected":"").concat(v.settings.alternateRowShading&&!c?" alt-shading":"").concat(w?" datagrid-summary-row":"").concat(v.settings.treeGrid?e.children?" datagrid-tree-parent":u>1?" datagrid-tree-child":"":"",'"').concat(je,">"),A.left=A.center,A.right=A.center,M=0;M<v.settings.columns.length;M++){var xt,sn,Xt,yn,qn,Rn,Ln,bt,Fe=v.settings.columns[M],En=this.getContainer(Fe.id),Xe="",en=Fe.summaryRowFormatter||Fe.formatter||v.defaultFormatter,wn=w?en:Fe.formatter||v.defaultFormatter,Vt=v.formatValue(wn,t,M,v.fieldValue(e,v.settings.columns[M].field),v.settings.columns[M],e,v,m);if(Vt.indexOf('<span class="is-readonly">')===0&&(Fe.readonly=!0),(Vt.indexOf("datagrid-checkbox")>-1||Vt.indexOf("btn-actions")>-1)&&(Xe+=" l-center-text"),Vt.indexOf("trigger")>-1&&(Xe+=" datagrid-trigger-cell"),Vt.indexOf("trigger")===-1&&Fe&&Fe.editor){var tn=this.getEditorName(Fe.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(tn)>=0&&(Xe+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(wn.name&&wn.name==="Fileupload"&&(Xe+=" is-fileupload"),Fe.editor&&this.settings.editable&&(Xe+=" has-editor"),Fe.expanded&&(v.treeExpansionField=Fe.expanded),Fe.align&&(Xe+=" l-".concat(Fe.align,"-text")),Fe.textOverflow==="ellipsis"&&(Xe+=" text-ellipsis"),Fe.uppercase&&(Xe+=" uppercase-text"),Xe+=Fe.readonly?" is-readonly":"",Xe+=Fe.hidden?" is-hidden":"",Fe.isEditable&&!Fe.readonly){var Ti=v.fieldValue(e,v.settings.columns[M].field);Fe.isEditable(Ve-1,M,Ti,Fe,e)||(Xe+=" is-readonly")}var Ut=Fe.id==="selectionCheckbox"||!Fe.readonly&&Fe.editor!==void 0?"":'aria-readonly="true"';if(Xe.indexOf("is-readonly")>-1&&(Ut='aria-readonly="true"'),Fe.isReadonly&&!Fe.readonly&&Fe.id!=="selectionCheckbox"){var hn=v.fieldValue(e,v.settings.columns[M].field);Fe.isReadonly(this.recordCount,M,hn,Fe,e)&&(Xe+=" is-cell-readonly",Ut='aria-readonly="true"')}var Wn=v.fieldValue(e,v.settings.columns[M].field);Fe.cssClass&&typeof Fe.cssClass=="function"&&(Xe+=" ".concat(Fe.cssClass(this.recordCount,M,Wn,Fe,e))),Fe.cssClass&&typeof Fe.cssClass=="string"&&(Xe+=" ".concat(Fe.cssClass)),Xe+=Fe.focusable?" is-focusable":"",Xe+=wn.name==="Actions"?" has-btn-actions":"";var ra=this.calculateRowspan(Wn,t,Fe);if(ra!==""){var Ai=0;if(p>0&&!Fe.hidden){var Jt,xs,Ni;p-=1,Xe+=" is-spanned-hidden";var wa=(Jt=this.settings)===null||Jt===void 0||(Jt=(xs=Jt)==null?void 0:xs.frozenColumns)===null||Jt===void 0||(Ni=Jt)==null?void 0:Ni.left.length;wa>0&&M===wa&&(Xe=Xe.replace(" is-spanned-hidden"," is-spanned-invisible"),(Ai=p+1)>0&&this.visibleColumns().length-M===Ai&&(Xe+=" is-spanned-last")),wa>0&&M<wa&&(Xe=Xe.replace(" is-spanned-hidden"," is-spanned-last"))}if(Fe.colspan&&typeof Fe.colspan=="function"&&!p){var Yn=v.fieldValue(e,v.settings.columns[M].field);if((Ai=Fe.colspan(Ve-1,M,Yn,Fe,e,v))>0){var xa,Di,Ue;p=Ai-1;var nn=(xa=this.settings)===null||xa===void 0||(xa=(Di=xa)==null?void 0:Di.frozenColumns)===null||xa===void 0||(Ue=xa)==null?void 0:Ue.left.length;nn>0&&M<nn&&(Xe+=" is-spanned-last")}if(Ai>0){var ze,Qe,et;p=Ai-1;var $t=(ze=this.settings)===null||ze===void 0||(ze=(Qe=ze)==null?void 0:Qe.frozenColumns)===null||ze===void 0||(et=ze)==null?void 0:et.left.length;$t>0&&M<$t&&Xe.indexOf("is-spanned-last")===-1&&(Xe+=" is-spanned-last")}Ai>0&&Xe.indexOf("is-spanned-last")===-1&&this.visibleColumns().length-1===Ai&&(Xe+=" is-spanned-last")}M!==0&&(qe.class="",qe.svg=""),qe.class!==""&&(Xe+=" rowstatus-cell"),v.isCellDirty(v.settings.groupable?n:t,M)&&(Xe+=" is-dirty-cell"),v.uniqueId().indexOf("inline")>0&&(Xe+=" has-inline-editor"),Xe!==""&&(Xe=Xe.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "));var At=(xt=this.settings.attributes)===null||xt===void 0||(sn=xt)==null?void 0:sn.filter(function($n){return $n.name==="id"}),Ct='aria-describedby="'.concat((At==null||At==null?void 0:At.length)===1?"".concat(At[0].value,"-col-").concat((Xt=Fe.id)===null||Xt===void 0||(yn=Xt)==null?void 0:yn.toLowerCase()):v.uniqueId("-header-".concat(M)),'"'),It="";if(Fe!=null&&Fe?.ariaDescribedBy&&(Ct="aria-describedBy=".concat(Fe.ariaDescribedBy(e.id,M))),((qn=Fe.formatter)===null||qn===void 0||(Rn=qn)==null?void 0:Rn.toString().indexOf("function Checkbox"))===0){var jt=void 0;jt=Fe.isChecked?Fe.isChecked(Wn):Wn!==void 0&&(Wn===!0||parseInt(Wn,10)===1),It=' aria-checked="'.concat(jt,'"')}((Ln=Fe.formatter)===null||Ln===void 0||(bt=Ln)==null?void 0:bt.toString().indexOf("function SelectionCheckbox("))===0&&(It=' aria-checked="'.concat(this.isRowSelected(e),'"')),A[En]+='<td role="gridcell" '.concat(Ut,' aria-colindex="').concat(M+1,'"')+" ".concat(Fe.disableTooltip?"disabletooltip ":"")+"".concat(Ct).concat(It).concat(Ke?' aria-selected="true"':"").concat(Xe?' class="'.concat(Xe,'"'):"").concat(Ai?' colspan="'.concat(Ai,'"'):"").concat(Fe.tooltip&&typeof Fe.tooltip=="string"?' title="'.concat(Fe.tooltip.replace("{{value}}",Wn),'"'):"").concat(v.settings.columnGroups?'headers = "'.concat(v.uniqueId("-header-".concat(M))," ").concat(v.getColumnGroup(M),'"'):"").concat(ra||"",">").concat(qe.svg,`<div class="datagrid-cell-wrapper"
        `).concat(Fe.whiteSpace?'style="white-space: '.concat(Fe.whiteSpace,'"'):"",">"),Fe.contentVisible&&(Fe.contentVisible(t+1,M,Wn,Fe,e)||(Vt="")),v.settings.onPostRenderCell&&Fe.component&&(A[En]+='<div class="content"></div>',Vt=""),A[En]+="".concat(Vt,"</div></td>")}}if(this.settings.spacerColumn&&(A.center+='<td class="datagrid-spacer-column"></td>'),A.left+="</tr>",A.center+="</tr>",A.right+="</tr>",v.settings.rowTemplate&&!w){var An=v.settings.rowTemplate,an=e,di=v.settings.rowTemplateHeight||107,Ca="";Xn&&an&&(Ca=Xn.compile("{{#dataset}}".concat(An,"{{/dataset}}"),{dataset:an})),this.hasLeftPane&&(A.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(ie,`">
          <div class="datagrid-row-detail"><div style="height: `).concat(di,`px"></div></div>
          </td></tr>`)),A.center+='<tr class="datagrid-expandable-row '.concat(an.expanded?" is-expanded":"",'"><td colspan="').concat(ke+(this.settings.spacerColumn?1:0),`">
        <div class="datagrid-row-detail" `).concat(an.expanded?' style="height: auto"':"",'><div class="datagrid-row-detail-padding">').concat(Ca,`</div></div>
        </td></tr>`),this.hasRightPane&&(A.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(me,`">
          <div class="datagrid-row-detail"><div style="height: `).concat(di,`px"></div></div>
          </td></tr>`))}if(v.settings.expandableRow&&(this.hasLeftPane&&(A.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(ie,`">
          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>
          </td></tr>`)),A.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(ke,`">
        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>
        </td></tr>`),this.hasRightPane&&(A.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(me,`">
          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>
          </td></tr>`))),!e.children||o||e._isFilteredOut){if(this.settings.treeGrid&&!o&&e._isFilteredOut)if(e.children){var _i=function $n(Si){var Kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Kn+=Si.length;for(var pn=0,kt=Si.length;pn<kt;pn++)Si[pn].children&&(Kn=$n(Si[pn].children,Kn));return Kn}(e.children);this.recordCount+=_i+(e._isFilteredOut&&u===1?1:0)}else u===1&&this.recordCount++}else for(var Ii=0,Pt=e.children.length;Ii<Pt;Ii++){var Ra=r?"".concat(r,".").concat(n):"".concat(n);this.recordCount++;var Mt=v.rowHtml(e.children[Ii],this.recordCount,Ii,!1,!1,Ra);A.left+=Mt.left,A.center+=Mt.center,A.right+=Mt.right}return A},getEditorName:function(e){if(!e)return"";var t=e.name;return(function(){}).name||(t=(e.toString().match(/function (.+?)\(/)||[,""])[1]),t?t.toLowerCase():""},calculateTextWidth:function(e){var t=e.name||"",n=0,i=0,a=0,r="",o=!1,c=this;if(e.formatter===Sn.Colorpicker)r="";else if(e.formatter===Sn.Dropdown&&e.options&&this.settings.columnSizing!=="data"){for(var u="",p=0;p<e.options.length;p++)e.options[p].label.length>u.length&&(u=e.options[p].label);u=c.formatValue(e.formatter,0,0,u,e,null,c),r=u=_e.stripHTML(u)}else{var m=0,v=this.settings.dataset;this.settings.groupable&&(v=this.originalDataset);for(var w=0;w<v.length;w++){var C=this.fieldValue(v[w],e.field),A=v[w];if(o=(C=c.formatValue(e.formatter,w,0,C,e,A,c)).toString().indexOf("btn-secondary")>-1,m=(C=_e.stripHTML(C)).toString().length,this.settings.groupable&&A)for(var S=0;S<A.length;S++){var M=this.fieldValue(A[S],e.field);M=c.formatValue(e.formatter,w,0,M,e,A,c),(m=(M=_e.stripHTML(M)).toString().length)>n&&(n=m,r=M)}m>n&&(n=m,r=C)}if(this.filterExpr&&this.filterExpr.length>0){var I=$.grep(this.filterExpr,function(H){return H.columnId===e.id});if(I&&I.length===1){var z=I[0].value;(m=z.toString().length)>n&&(n=m,r=z)}}if(r===""&&(e.formatter===Sn.Date||e.formatter===Sn.Time)){var V=new Date(9999,11,31,23,59,59,999);V=c.formatValue(e.formatter,0,0,V,e,null,c),r=V=_e.stripHTML(V)}}var U=!!e.formatter&&e.formatter.toString().indexOf('<span class="tag')>-1,G=!!e.formatter&&e.formatter.toString().indexOf("datagrid-alert-icon")>-1,J=e.formatter===Sn.Date||e.formatter===Sn.Time||e.formatter===Sn.Lookup||e.formatter===Sn.Colorpicker||e.formatter===Sn.Dropdown;a+=2*this.getCellPadding(),G&&(a+=20),U&&(a+=10),o&&(a+=50),this.settings.editable&&e.editor===dl.Spinbox&&(a+=46),!this.settings.editable||e.formatter!==Sn.Dropdown&&e.formatter!==Sn.Lookup&&e.editor!==dl.Time||(a+=10),this.settings.editable&&e.editor===dl.Date&&(a+=5),i=this.calculateTextRenderWidth(r)+a,e.formatter===Sn.Colorpicker&&(i=150);var te=e.sortable===void 0||e.sortable?2*this.getCellPadding()+15:2*this.getCellPadding(),de=this.calculateTextRenderWidth(t,!0)+te;return e.filterType&&this.settings.filterable&&(de<2*this.getCellPadding()&&(de=5*this.getCellPadding()+i+36),e.filterType!=="checkbox"&&(r!==""?de<i+(2*this.getCellPadding()+32)&&r!==""&&(de=i+(2*this.getCellPadding()+32)):de<100&&(de=100)),(e==null||e==null?void 0:e.textOverflow)!=="ellipsis"||this.settings.rowHeight!=="small"&&this.settings.rowHeight!=="extra-small"||(de+=6)),this.settings.columnSizing==="data"&&(de=50+2*this.getCellPadding()+(J?25:0)),this.settings.columnSizing==="header"&&(i=0),Math.ceil(Math.max(i,de))},calculateTextRenderWidth:function(e,t){var n,i;if(this.canvas=this.canvas||(this.canvas=document.createElement("canvas")),!this.canvas||(n=this.canvas)===null||n===void 0||!n?.getContext)return 0;var a=(i=this.canvas)===null||i===void 0||i==null?void 0:i.getContext("2d"),r=ft.currentTheme.id.indexOf("uplift")>-1||ft.currentTheme.id.indexOf("new")>-1;return this.fontCached&&this.fontHeaderCached||(this.fontCached=ft.currentTheme.id&&r?"400 16px arial":"400 14px arial",this.fontHeaderCached=ft.currentTheme.id&&r?"600 14px arial":"700 12px arial",this.settings.rowHeight==="extra-small"&&(this.fontCached=ft.currentTheme.id&&r?"400 14px arial":"400 12px arial",this.fontHeaderCached=ft.currentTheme.id&&r?"600 14px arial":"700 12px arial")),a!=null&&a?.font?(a.font=this.fontCached,t&&(a.font=this.fontHeaderCached),a.measureText(e).width):0},setScrollClass:function(){if(this.bodyWrapperCenter[0]&&this.bodyWrapperCenter[0].offsetHeight){var e=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),t=this.headerRow?this.headerRow[0].offsetHeight:0,n=parseInt(this.tableBody[0].offsetHeight,10);if(this.element.removeClass("has-vertical-scroll has-visible-last-row has-horizontal-scroll"),n<e-t&&this.element.addClass("has-visible-last-row"),this.hasLeftPane||this.hasRightPane){var i=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>e+2,a=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),r=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>a;i&&this.element.addClass("has-vertical-scroll"),r&&this.element.addClass("has-horizontal-scroll")}}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fontCached=null,this.fontHeaderCached=null,this.fixColumnIds()},fixColumnIds:function(){for(var e=0;e<this.settings.columns.length;e++){var t=this.settings.columns[e],n=this.columnById(t.id);if(n.length>1)for(var i=1;i<n.length;i++)n[i].id="".concat(n[i].id,"-").concat(i)}},getStretchColumnIdx:function(){var e=this,t=e.stretchColumnIdx;return t===-1&&e.settings.stretchColumn!=="last"&&e.headerNodes().each(function(n){$(this).attr("data-column-id")===e.settings.stretchColumn&&(t=n)}),t},columnWidth:function(e,t){return this.elemWidth||(this.element.parents(".modal").length>0?this.elemWidth=this.element.parents(".modal").hasClass("is-visible")===!1?void 0:this.element.outerWidth():this.elemWidth=this.element.outerWidth(),this.elemWidth===0&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1,this.widthPixel=!1),this.calculateColumnWidth(e,t)},calculateColumnWidth:function(e,t){var n,i,a=this.visibleColumns(!0),r=t===this.visibleColumns().length-1,o=this.getContainer(e.id);e.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&e.width&&(this.widthPixel=typeof e.width!="string");var c=e.width;typeof e.width=="string"&&e.width.indexOf("px")===-1&&(this.widthPercent=!0,i=e.width.replace("%",""));var u=this.calculateTextWidth(e);if(this.widthSpecified&&c||(c=Math.max(u,c||0)),(!this.widthSpecified||e.width===void 0)&&this.settings.sizeColumnsEqually&&["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(e.id)===-1){var p=Math.round(this.elemWidth/a.length);c=p-(r?2:0),p<u&&(c=u)}if(e.id!=="selectionCheckbox"&&e.id!=="selectionRadio"&&e.id!=="favorite"||(c=43,e.width=c),e.id==="favorite"&&(c=62,e.width=c),!e.width&&((n=e.formatter)===null||n===void 0||(n=n?.toString())===null||n===void 0||n==null?void 0:n.indexOf("ProcessIndicator"))>-1&&(c=155,e.width=c),e.id==="expander"&&(c=55,e.width=c),e.id==="rowStatus"&&(c=62,e.width=c),e.id==="rowReorder"&&(c=this.settings.groupable?105:62,e.width=c),e.id==="drilldown"&&(c=62,e.width=c),e.minWidth&&c<e.minWidth&&(c=e.minWidth),e.minWidth&&c>e.maxWidth&&(c=e.maxWidth),this.totalWidths[o]+=e.hidden?0:c,r){var m=this.elemWidth-this.totalWidths[o];this.settings.stretchColumn!=="last"&&this.settings.stretchColumn!==null&&(this.stretchColumnDiff=m),this.settings.stretchColumn!=="last"&&this.settings.stretchColumn!==e.id||(this.stretchColumnIdx=t,m<c?this.stretchColumnWidth=c:(c=m,this.stretchColumnDiff=c)),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return this.settings.stretchColumn!=="last"&&this.settings.stretchColumn!==null&&this.settings.stretchColumn===e.id?(this.stretchColumnIdx=t,this.stretchColumnWidth=c,' style="width: 99%"'):this.widthPercent||c!==void 0?' style="width: '.concat(this.widthPercent?"".concat(i,"%"):"".concat(c,"px"),'"'):""},calculateRowspan:function(e,t,n){var i=0,a=null;if(!n.rowspan)return null;for(var r=0;r<this.settings.dataset.length;r++)e===this.settings.dataset[r][n.field]&&(i++,a===null&&(a=r));return t===a?' rowspan ="'.concat(i,'"'):""},calculateTotals:function(){return this.settings.totals=Op.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(e){return e+(/(px|%)/i.test("".concat(e))?"":"px")},setupTooltips:function(e,t){var n=this;if(e||t||this.settings.enableTooltips){var i,a=this,r=a.element.find(".datagrid-header-icon").length>0,o={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus',headerIcon:".datagrid-header th .datagrid-header-icon"};this.settings.filterable?(o.headerColumn="".concat(o.th," .datagrid-column-wrapper"),o.headerFilter="".concat(o.th," .datagrid-filter-wrapper .btn-menu"),o.header="".concat(o.headerColumn,", ").concat(o.headerFilter)):o.header=r?o.headerIcon:o.th,o.iconAlert="".concat(o.td," .icon-alert"),o.iconSuccess="".concat(o.td," .icon-success"),o.iconError="".concat(o.td," .icon-error"),o.iconInfo="".concat(o.td," .icon-info"),o.icons="".concat(o.iconAlert,", ").concat(o.iconSuccess,", ").concat(o.iconError,", ").concat(o.iconInfo),e&&this.settings.enableTooltips?o.str="".concat(o.header,", ").concat(o.td,", ").concat(o.icons,", ").concat(o.rowstatus):o.str=e?"".concat(o.header,", ").concat(o.rowstatus):"".concat(o.header,", ").concat(o.td,", ").concat(o.icons);var c=function(p,m){m=m===void 0?400:m,i=setTimeout(function(){var v=ue.hasClass(p,"datagrid-column-wrapper"),w=ue.hasClass(p.parentNode,"datagrid-filter-wrapper"),C=ue.hasClass(p,"datagrid-header-icon"),A=!!w&&p.parentNode.querySelectorAll(".popupmenu.is-open").length>0,S=v||C?p.parentNode:p,M=a.getOuterWidth(S),I=$(p).data("gridtooltip")||a.cacheTooltip(p);I&&(I.forced||I.textwidth>M-35)&&!A&&a.showTooltip(I)},m)},u=function(p,m){m=m===void 0?400:m,clearTimeout(i),setTimeout(function(){$(".grid-tooltip:hover").length>0||(a.hideTooltip(),ue.hasClass(p.parentNode,"datagrid-filter-wrapper")&&a.removeTooltipData(p))},m)};this.element.off("mouseenter.gridtooltip focus.gridtooltip",o.str).on("mouseenter.gridtooltip focus.gridtooltip",o.str,function(){c(this)}).off("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",o.str).on("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",o.str,function(){u(this)}).off("longpress.gridtooltip",o.str).on("longpress.gridtooltip",o.str,function(){c(this,0)}).off("keydown.gridtooltip",o.str).on("keydown.gridtooltip",o.str,function(p){var m=p.which||p.keyCode||p.charCode||0,v=!1;return p.shiftKey&&m===112?c(this,0):m===27&&(v=a.isGridtooltip(),u(this,0)),v&&p.preventDefault(),!v}).off("mousemove.gridtooltip").on("mousemove.gridtooltip",function(p){$(p.target).parents(".datagrid").length>0||!$(".grid-tooltip").hasClass("is-hidden")&&!$(".grid-tooltip:hover").length>0&&u(n)}),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",function(){c(this)}).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",function(){u(this)}).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",function(){c(this,0)}),this.element.find(".datagrid-header-icon").length>0&&this.element.find(".datagrid-header-icon").off("mouseenter.headericon").on("mouseenter.headericon",function(){c(this)}).off("mouseleave.headericon").on("mouseleave.headericon",function(){u(this)})}},getOuterWidth:function(e){var t=getComputedStyle(e),n=e.offsetWidth;return n+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10)},closest:function(e,t){return e&&(t(e)?e:this.closest(e.parentNode,t))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(e,t){var n=this.settings,i=t;i||(i=n.treeGrid?n.treeDepth[e].node:this.getActiveDataset()[e]);for(var a=0;a<this.settings.columns.length;a++){var r=this.settings.columns[a];r.hidden||r.component&&this.settings.onPostRenderCell||this.updateCellNode(e,a,this.fieldValue(i,r.field),!0)}n.treeGrid||n.dataset[e]===void 0||(this.settings.dataset[e]=N.extend(!0,this.settings.dataset[e],t)),this.settings.rowReorder&&this.tableBody.data("arrange")&&this.tableBody.data("arrange").updated(),this.postRenderCell()},updateColumns:function(e,t){t===void 0?t=this.settings.columnGroups:t!==null&&t.length!==0||(this.settings.groupable=null);var n=[];this.settings.filterable&&this.filterRowRendered&&(n=this.filterConditions()),this.settings.columns=e,this.settings.columnGroups=t,this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(n)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var e=this.settings.saveUserSettings;!$.isEmptyObject(e)&&this.canUseLocalStorage()&&(e.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),e.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),e.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),e.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),e.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),e.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),e.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},setOriginalColumns:function(){this.originalColumns=N.deepCopy(this.settings.columns)},columnsFromString:function(e,t){if(!e)return[];var n=JSON.parse(e);if(!n)return[];for(var i=0;i<n.length;i++){var a=void 0,r=this.columnById(n[i].id),o=r.width;r&&(a=n[i].hidden,$.extend(n[i],r[0]),a!==void 0?n[i].hidden=a:delete n[i].hidden,t&&(n[i].width=o))}return n},restoreColumns:function(e){if(this.settings.saveColumns&&this.canUseLocalStorage())if(e)this.updateColumns(e);else{var t=localStorage[this.uniqueId("columns")];!e&&t&&(this.originalColumns=N.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(t))}},restoreUserSettings:function(e){var t=this.settings.saveUserSettings;if(e||!$.isEmptyObject(t)&&this.canUseLocalStorage())if(e){if(e.columns&&this.updateColumns(e.columns),e.rowHeight&&this.rowHeight(e.rowHeight),e.sortOrder&&this.setSortColumn(e.sortOrder.sortId,e.sortOrder.sortAsc),e.pagesize&&(this.settings.pagesize=parseInt(e.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(e.pagesize,10),e.activePage||this.pagerAPI.setActivePage(1,!0)),e.showPageSizeSelector&&(this.settings.showPageSizeSelector=e.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(e.showPageSizeSelector)),e.filter&&this.applyFilter(e.filter,"restore"),e.activePage){var n=parseInt(e.activePage,10);this.pagerAPI.setActivePage(n,!0),this.restoreActivePage=!0}}else{if(t.columns){var i=localStorage[this.uniqueId("usersettings-columns")];i&&(this.settings.columns=this.columnsFromString(i))}if(t.rowHeight){var a=localStorage[this.uniqueId("usersettings-row-height")];a&&(this.settings.rowHeight=a)}if(t.sortOrder){var r=localStorage[this.uniqueId("usersettings-sort-order")];r&&(this.sortColumn=JSON.parse(r),this.restoreSortOrder=!0)}if(t.pagesize){var o=localStorage[this.uniqueId("usersettings-pagesize")];o&&(this.settings.pagesize=parseInt(o,10))}if(t.showPageSizeSelector){var c=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(c=c.toString().toLowerCase()==="true")&&(this.settings.showPageSizeSelector=c)}if(t.activePage){var u=localStorage[this.uniqueId("usersettings-active-page")];u&&(this.savedActivePage=parseInt(u,10),this.restoreActivePage=!0)}if(t.filter){var p=localStorage[this.uniqueId("usersettings-filter")];p&&(this.savedFilter=JSON.parse(p),this.restoreFilter=!0)}}},copyThenStringify:function(e){if(!e)return JSON.stringify(e);var t=e.map(function(n){var i=N.extend({},n);return i.editorOptions&&delete i.editorOptions,i});return JSON.stringify(t)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var e=N.deepCopy(this.originalColumns),t=this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null;this.updateColumns(e,t)}this.clearFilter()},hideColumn:function(e){var t,n,i,a,r,o=this.columnIdxById(e);if(!(o===-1||(t=this.settings.columns[o])!==null&&t!==void 0&&t?.hidden)){this.settings.columns[o].hidden=!0;var c=this.headerNodes().eq(o);this.headerNodeCheckbox=c.find(".datagrid-checkbox").length>0?c:void 0,(n=this.settings)!==null&&n!==void 0&&(n=n?.frozenColumns)!==null&&n!==void 0&&n?.left.length||this.headerNodes().eq(o).addClass("is-hidden"),o===0&&e==="selectionCheckbox"&&(i=this.settings)!==null&&i!==void 0&&(i=i?.frozenColumns)!==null&&i!==void 0&&i?.left.length?this.headerNodes().eq(o).off().remove():this.headerNodes().eq(o).addClass("is-hidden"),this.colGroupNodes().eq(o).addClass("is-hidden");var u=((a=this.settings)===null||a===void 0||(a=a?.frozenColumns)===null||a===void 0||a==null?void 0:a.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(o-u+1,")")).addClass("is-hidden"),this.bodyColGroup.find("col").eq(o-u).addClass("is-hidden"),(r=this.tableBodyLeft)!==null&&r!==void 0&&r?.find("> tr > td .datagrid-checkbox-wrapper")&&(this.bodyNodeCheckboxes=this.tableBodyLeft.find("> tr > td:nth-child(".concat(o+1,")")),this.tableBodyLeft.find("> tr > td:nth-child(".concat(o+1,")")).remove()),this.updateColumnGroup(o,!1),this.hasColSpans){var p=this.element.find(".datagrid-header th").eq(o).attr("colspan");if(p&&p>0){p-=1;for(var m=0;m<p;m++)o+=p,this.tableBody.find("> tr > td:nth-child(".concat(o+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:o,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var e=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",e)},showColumn:function(e){var t,n=this.columnIdxById(e);if(n!==-1&&this.settings.columns[n].hidden){this.settings.columns[n].hidden=!1,this.headerNodes().eq(n).removeClass("is-hidden"),this.colGroupNodes().eq(n).removeClass("is-hidden");var i=((t=this.settings)===null||t===void 0||(t=t?.frozenColumns)===null||t===void 0||t==null?void 0:t.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(n-i+1,")")).removeClass("is-hidden"),this.bodyColGroup.find("col").eq(n-i).removeClass("is-hidden"),i){var a,r;this.tableBodyLeft.find("> tr > td:nth-child(".concat(n+1,")")).removeClass("is-hidden"),this.headerNodeCheckbox&&!this.headerRowLeft.find("> tr th:nth-child(".concat(n+1,") .datagrid-checkbox-wrapper")).length&&((a=this.headerRowLeft)===null||a===void 0||a==null||a.find("> tr").prepend(this.headerNodeCheckbox)),this.bodyNodeCheckboxes&&!this.tableBodyLeft.find("> tr td:nth-child(".concat(n+1,") .datagrid-checkbox-wrapper")).length&&((r=this.tableBodyLeft)===null||r===void 0||r==null||r.find("> tr").prepend(this.bodyNodeCheckboxes[n]))}if(this.updateColumnGroup(n,!0),this.hasColSpans){var o=this.element.find(".datagrid-header th").eq(n).attr("colspan");if(o&&o>0){o-=1;for(var c=0;c<o;c++)n+=o,this.tableBody.find("> tr > td:nth-child(".concat(n+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:n,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];ga.exportToCsv(e,t,n,i,this)},exportToExcel:function(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];ga.exportToExcel(e,t,n,i,this)},copyToDataSet:function(e,t,n,i){ga.copyToDataSet(e,t,n,i,this)},personalizeColumns:function(){var e=this,t='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(L.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');t+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:L.translate("PersonalizeColumns"),content:t,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:L.translate("Close"),click:function(n,i){i.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",function(n,i){i&&(e.isColumnsChanged=!1,i.element.find(".searchfield").searchfield({clearable:!0,tabbable:!1}),i.element.find(".listview").listview({source:e.settings.columns,template:`
            <ul>
            {{#dataset}}
              {{#name}}
              <li>
                <a href="#" target="_self" tabindex="-1">
                  <label class="inline">
                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>
                    <span class="label-text">{{name}}</span>
                  </label>
                </a>
              </li>
              {{/name}}
            {{/dataset}}
            </ul>`,searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(a){return a.name||a.id}}}).off("selected.datagrid").on("selected.datagrid",function(a,r){var o=r.elem.find(".checkbox"),c=o.attr("data-column-id"),u=o.prop("checked");if(r.elem.removeClass("is-selected hide-selected-color"),!o.is(":disabled")){e.isColumnsChanged=!0;var p={node:{},api:$(this).data("listview")};if(p.api){var m=e.columnIdxById(c);m!==-1&&p.api.settings.dataset[m]&&(p.node=p.api.settings.dataset[m])}u?(e.hideColumn(c),o.prop("checked",!1),p.node.hidden=!0):(e.showColumn(c),o.prop("checked",!0),p.node.hidden=!1),e.settings.groupable&&e.rerender()}}),i.element.on("close.datagrid",function(){e.isColumnsChanged=!1}),i.element.on("keydown.datagrid",function(a){a.keyCode===27&&(i.close(),$("body").off("beforeopen.datagrid"))}))})},setColumnWidth:function(e,t,n){var i=parseFloat(t),a=this.columnById(e)[0],r=-1;i&&e&&(typeof e=="string"&&this.headerNodes().each(function(o){$(this).attr("data-column-id")===e&&(r=o)}),typeof t!="number"&&(t=i/100*this.element.width()),!(Math.abs(t-a.width)<2))&&(typeof a.colspan=="number"&&(t/=a.colspan),a&&(a.width=t),n&&(this.bodyColGroup.find("col").eq(r)[0].style.width="".concat(t,"px")),this.element.trigger("columnchange",[{type:"resizecolumn",index:r,columns:this.settings.columns}]),this.saveUserSettings())},isEllipsisActiveHeader:function(e){return((e=e||{}).sortable===void 0||e.sortable)&&e.textOverflow==="ellipsis"},activeEllipsisHeaderAll:function(){for(var e=0,t=this.settings.columns.length;e<t;e++){var n=this.settings.columns[e].id,i=this.columnById(n)[0];if(this.isEllipsisActiveHeader(i)){var a=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(n,'"]'));this.activeEllipsisHeader(a)}}},activeEllipsisHeader:function(e){if(e){var t=e.querySelector(".datagrid-column-wrapper .datagrid-header-text"),n=e.scrollWidth<t.scrollWidth+65;e.classList[n?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var e=this,t=this;if(!this.resizeHandle){var n,i,a,r,o;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table.datagrid").before(this.resizeHandle);var c=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",function(){t.currentHeader&&(t.dragging=!0,c=!1,i=t.currentHeader.attr("data-column-id"),n=t.columnById(i)[0],t.isEllipsisActiveHeader(n)&&t.currentHeader[0].classList.add("is-ellipsis-active"))}).on("drag.datagrid",function(u,p){if(t.currentHeader&&n){var m=n.minWidth||12,v=n.maxWidth||2e3,w=t.currentHeader,C=w.index(),A=t.getContainer(w.attr("data-column-id"))==="left";e.dragging=!0;var S=p.left+5,M=e.bodyColGroup.find("col").eq(C)[0];A&&(M=e.bodyColGroupLeft.find("col").eq(C)[0]);var I=parseInt(t.currentHeader.width(),10),z=parseInt(M.style.width||I,10);M.style.width.indexOf("%")>-1&&(z=I);var V=parseFloat(t.currentHeader.offsetParent().offset().left),U=parseFloat(t.currentHeader.offset().left),G=C===0?0:U-V-2;t.hasLeftPane&&!A&&C===0&&(G=U-V-2);var J=I-(S-G),te=z-J;if((a=a&&Math.abs(te-a)<=3?a:te)<m||a>v)t.resizeHandle.css("cursor","inherit");else if(a!==z&&(M.style.width="".concat(a,"px"),(C===e.settings.frozenColumns.left.length-1||C<=e.settings.frozenColumns.left.length-1&&J>0)&&e.getContainer(i)==="left"&&(e.totalWidths.left+=J<0?Math.abs(J):-J,e.tableLeft.css("width",e.totalWidths.left)),$s.pressedKeys.get("Shift")&&(c=!0),e.settings.resizeMode==="fit"&&!c||e.settings.resizeMode==="flex"&&c)){var de=L.isRTL()?C+1:C-1,H=t.settings.columns[de];if(!H)return;var he=H.minWidth||12,ie=H.maxWidth||1e3,me=L.isRTL()?ue.getPreviousSibling(t.currentHeader,":not(.is-hidden)"):ue.getNextSibling(t.currentHeader,":not(.is-hidden)");o=me.getAttribute("data-column-id");var ke=L.isRTL()?ue.getPreviousSibling(M,":not(.is-hidden)"):ue.getNextSibling(M,":not(.is-hidden)"),De=parseInt(me.offsetWidth,10),Me=parseInt(ke.style.width||De,10);if(ke.style.width.indexOf("%")>-1&&(Me=De),(r=Me+J)<he||r>ie)return void t.resizeHandle.css("cursor","inherit");if(r===Me||!ke)return;ke.style.width="".concat(r,"px")}}}).on("dragend.datagrid",function(){e.dragging=!1,t.isEllipsisActiveHeader(n)&&t.activeEllipsisHeader(t.currentHeader[0]),t.setColumnWidth(i,a),o&&(e.settings.resizeMode==="fit"&&!c||e.settings.resizeMode==="flex"&&c)&&t.setColumnWidth(o,r)})}},displayCounts:function(e){var t,n,i,a=this,r=a.tableBody.find("tr:visible").length,o=0,c="",u=[],p=a.settings.paging&&!a.settings.source,m=function(A){return L.formatNumber(A,{style:"integer"})};if(!p&&e||(this.recordCount=a.settings.dataset.length,r=a.settings.dataset.length),(this.settings.treeGrid&&p||!e)&&(this.filteredCount=a.settings.dataset.filter(function(A){return A._isFilteredOut}).length,r=a.settings.dataset.length,this.recordCount=a.settings.dataset.filter(function(A){return!A._isFilteredOut}).length),a.settings.groupable&&(o=r,r=a.originalDataset.length,c=(c="({0} ".concat(L.translate(o===1?"Group":"Groups"),")")).replace("{0}",m(o))),a.contextualToolbar&&a.contextualToolbar.length&&(a._selectedRows.forEach(function(A){u.push(A.idx);var S=u.filter(function(M,I){return u.indexOf(M)===I});a.contextualToolbar.find(".selection-count").text("".concat(S.length," ").concat(L.translate("Selected")))}),a.settings.allowSelectAcrossPages&&a.contextualToolbar.find(".selection-count").text("".concat(a._selectedRows.length," ").concat(L.translate("Selected")))),e&&e!==-1&&(r=e),e===void 0&&this.settings.source&&(r=a.settings.dataset.length),e===void 0&&this.settings.source&&(t=this.pagerAPI)!==null&&t!==void 0&&(t=t?.state)!==null&&t!==void 0&&t?.total&&(r=(n=this.pagerAPI)===null||n===void 0||(n=n?.state)===null||n===void 0||n==null?void 0:n.total),a.settings.showFilterTotal&&a.filteredCount>0)i=(i=(i="(".concat(L.translate(r===1?"ResultOf":"ResultsOf"),")")).replace("{0}",m(r-a.filteredCount))).replace("{1}",m(r));else{var v=L.translate(r===1?"Result":"Results");i=(i=v.indexOf("{0}")===-1?"({0} ".concat(v,")"):v).replace("{0}",m(r))}if(a.settings.resultsText)if(typeof a.settings.resultsText=="function")if(a.grandTotal)i=a.settings.resultsText(a,a.grandTotal,r===a.grandTotal?0:r);else{var w=a.filteredCount===0?0:r-a.filteredCount;i=a.settings.resultsText(a,r,w)}else i=a.settings.resultsText;if(a.toolbar){ue.html(a.toolbar.find(".datagrid-result-count"),i,"<span>"),ue.html(a.toolbar.find(".datagrid-group-count"),c,"<span>"),a.toolbar[0].setAttribute("aria-label",a.toolbar.find(".title").text()),a.toolbar.find(".datagrid-row-count").text(r),N.addAttributes(a.toolbar.find(".title"),this,this.settings.attributes,"title"),N.addAttributes(a.toolbar.find(".btn-actions"),this,this.settings.attributes,"actions");var C=a.toolbar.find("#gridfilter");N.addAttributes(C,this,this.settings.attributes,"search"),C.prev("label").attr("for",C.attr("id"))}ue.html(a.element.closest(".modal").find(".datagrid-result-count"),i,"<span>"),this.lastCount=r,this.checkEmptyMessage()},setEmptyMessage:function(e){this.element[(e==null||e==null?void 0:e.height)==="small"?"addClass":"removeClass"]("empty-message-height-small"),this.emptyMessage?(this.emptyMessage.settings=e,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(e).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(this.recordCount===0?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(e,t,n){var i=this,a=$(t.target),r=a.closest("tr"),o=a.closest("td"),c=o.index(),u=this.settings.treeGrid?this.actualRowIndex(r):this.dataRowIndex(r),p=!0;(a.is("a")||a.closest("a").length)&&(n=!1),n&&(t.stopPropagation(),t.preventDefault());var m=i.settings.dataset[u];if(this.settings.groupable&&(r.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?p=!1:(u=i.actualPagingRowIndex(i.actualRowIndex(r)),i.groupArray[u]&&(m=i.settings.dataset[i.groupArray[u].group])&&m.values&&(m=m.values[i.groupArray[u].node]))),p){var v={row:u,rowElem:r,cell:c,cellElem:o,item:m,originalEvent:t};i.element.trigger(e,[v])}return!1},verticalScrollToEnd:function(e){var t=e.currentTarget,n=(t.scrollTop+t.clientHeight)/t.scrollHeight*100,i=Math.round(n),a=t.scrollHeight-t.scrollTop-t.clientHeight<1&&i===100;this.element.trigger("scroll",{percent:i,percentScrolled:100}),this.isVerticalScrollToEnd=a!==!1},handleScrollY:function(e){var t=e.currentTarget.scrollTop;t!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=t,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var e=this,t=this;if($("body").on("open.modal.datagrid",function(r){var o=$(r.target);o.find(e.table).length>0&&e.table.width()>o.width()&&e.widthSpecified&&e.table.width(466)}),t.element.on("focus.datagrid","tbody > tr",function(r){if(!t.settings.cellNavigation&&t.settings.rowNavigation&&!r.target.matches("a, a *")){var o=t.rowNodes($(this));if(!o.hasClass("is-active-row")){o.addClass("is-active-row");var c=t.actualRowIndex(o);t.settings.keyRowSelect&&t.selectRow(c)}}}).on("blur.datagrid","tbody > tr",function(r){if(!t.settings.cellNavigation&&t.settings.rowNavigation&&!r.target.matches("a, a *")){var o=t.rowNodes($(this));o.hasClass("is-active-row")&&o.removeClass("is-active-row")}}),this.attachPagingEvents(),t.settings.showHoverState&&t.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",function(){var r=t.rowNodes($(this));r.addClass("is-hover-row").removeClass("is-clickable"),t.settings.cellNavigation||t.settings.selectable===!1||r.addClass("is-clickable")}).on("mouseleave.datagrid","tbody > tr",function(){t.rowNodes($(this)).removeClass("is-hover-row")}),(this.hasLeftPane||this.hasRightPane||this.hasVerticalScrollbar)&&(t.element.find(".datagrid-wrapper").on("scroll.table",function(r){t.handleScrollY(r),t.verticalScrollToEnd(r)}),t.element.find(".datagrid-wrapper").on("wheel.table",function(r){r.originalEvent.deltaY!==0&&(r.currentTarget.scrollTop+=r.originalEvent.deltaY,r.preventDefault(),t.handleScrollY(r),t.verticalScrollToEnd(r))})),this.settings.virtualized){var n=0,i=0;t.bodyWrapperCenter.on("scroll.vtable",Va(function(){var r=this.scrollTop,o=r>t.virtualRange.bottom-t.virtualRange.bodyHeight-25,c=r<t.virtualRange.top+25;r!==n&&(c||o)&&(n=this.scrollTop,t.clearCache(),t.renderRows())},0)),$("body").on("resize.vtable",function(){this.offsetHeight!==i&&(i=this.scrollTop,t.clearCache(),t.renderRows())})}t.settings.frozenColumns.left.length&&$("body").on("resize.frozencolumns",function(){t.setScrollClass()}),this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",function(r){var o=$(r.target).parent();return o.is(".datagrid-filter-wrapper")||o.is(".lookup-wrapper")||o.is(".has-close-icon-button")||(r.stopPropagation(),t.editor=null,t.setSortColumn($(this).attr("data-column-id"))),!1}),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",function(r){var o=r.currentTarget.getAttribute("href");o&&o!=="#"||r.preventDefault()}),t.settings.allowPasteFromExcel&&t.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",function(r){var o;o=r.originalEvent.clipboardData&&r.originalEvent.clipboardData.getData?r.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var c=/\n/.exec(o),u=/\r/.exec(o),p=/\r\n/.exec(o);if((!t.activeCell||!t.activeCell.node.hasClass("is-readonly"))&&(o&&u||c||p)){var m=c?o.split(`
`):o.split("\r");p&&(m=o.split(`\r
`)),m.pop();var v=parseInt($(r.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),w=parseInt($(r.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;t.editor&&t.editor.input&&t.commitCellEdit(),t.copyToDataSet(m,v,w,t.settings.dataset)}});var a=t.settings.dblClickApply?"dblclick.datagrid, click.datagrid, select.datagrid":"click.datagrid, select.datagrid";this.element.off(a).on(a,"tbody td",function(r){var o,c,u=null,p=null,m=$(r.target),v=m.closest("td"),w=v.closest("table").find("thead > tr > th:not([colspan])").eq(v.index()).attr("data-column-id"),C=t.settings.columns[t.columnIdxById(w)];if((r.type!=="select"||C!=null&&C?.inlineEditor)&&($(r.currentTarget).closest(".datagrid-expandable-row").length!==1||$(r.currentTarget).attr("role")==="gridcell"))if(!v.is(".has-btn-actions")||m.is(".btn-actions")){m.parents("td").length>1&&(r.preventDefault(),r.stopPropagation());var A=$("#colorpicker-menu.is-open");if(t.settings.dblClickApply?t.triggerRowEvent(r.type,r,!0):t.triggerRowEvent("click",r,!0),m.is("a, a *")||t.setActiveCell(v),m.is(".datagrid-expand-btn"))return u=$(this).closest("tr"),p=t.actualRowIndex(u),t.toggleRowDetail(p),t.toggleGroupChildren(u),t.toggleChildren(r,p),!1;var S=m.is(".datagrid-selection-checkbox")||m.find(".datagrid-selection-checkbox").length===1,M=m.is(".datagrid-selection-radio")||m.find(".datagrid-selection-radio").length===1,I=!!t.settings.clickToSelect||!!S||M;if(m.is(".datagrid-drilldown")&&(I=!1),t.settings.selectable==="mixed"&&((I=S)||(r.shiftKey&&t.activatedRow().length&&(t.selectRowsBetweenIndexes([t.activatedRow()[0].row,m.closest("tr").attr("aria-rowindex")-1]),r.preventDefault()),t.toggleRowActivation(m.closest("tr")))),I&&(t.settings.selectable==="multiple"||t.settings.selectable==="mixed")&&r.shiftKey)t.selectRowsBetweenIndexes([t.lastSelectedRow,m.closest("tr").attr("aria-rowindex")-1]),r.preventDefault();else if(I&&t.settings.dblClickApply){var z=r.type==="dblclick";t.toggleRowSelection(m.closest("tr"),z),r.type!=="dblclick"&&t.element.triggerHandler("ischanged")}else I&&!m.is("a, a *")&&t.toggleRowSelection(m.closest("tr"));var V=v.attr("aria-colindex")-1,U=t.columnSettings(V);if(!U||m.is(".datagrid-checkbox")||U.editor!==dl.Checkbox)if(((o=A)===null||o===void 0||o==null?void 0:o.length)!==1){var G=t.makeCellEditable(t.activeCell.rowIndex,t.activeCell.cell,r);if(U.click&&typeof U.click=="function"&&m.is("button, input[checkbox], a, a.search-mode i, img")||m.parent().is("button:not(.trigger)")){var J=$(this).closest("tr"),te=t.actualRowIndex(J);p=t.dataRowIndex(J);var de=t.settings.treeGrid?t.settings.treeDepth[te].node:t.settings.dataset[p];if(v.hasClass("is-focusable")&&!m.is(t.buttonSelector)&&!m.parent("button").is(t.buttonSelector))return;t.settings.groupable&&(J.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(te=t.actualPagingRowIndex(t.actualRowIndex(J)),(de=t.settings.dataset[t.groupArray[te].group])&&de.values&&(de=de.values[t.groupArray[te].node]))),(!v.hasClass("is-cell-readonly")&&!m.is("[disabled]")&&m.is("button, input[checkbox], a, a.search-mode i, img")||m.parent().is("button"))&&U.click(r,[{row:te,cell:t.activeCell.cell,item:de,originalEvent:r}]),m.is("[disabled]")&&U.formatter===Sn.Hyperlink&&(r.stopImmediatePropagation(),r.preventDefault())}if(C!=null&&C?.inlineEditor&&r.type==="click"&&r.target.nodeName.toLowerCase()==="input"){var H=r.target;H.focus(),H.select(),r.preventDefault(),r.stopPropagation()}if(U.menuId){t.closePrevPopupmenu();var he=$(this).find("button");he.popupmenu({attachToBody:!0,menuId:U.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return v.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",function(){var ie=$(this);ie.data("popupmenu")&&!ie.data("tooltip")&&ie.data("popupmenu").destroy()}),U.selected&&he.off("selected.gridpopupbtn").on("selected.gridpopupbtn",U.selected)}G&&(c=t.settings)!==null&&c!==void 0&&c?.actionableMode&&setTimeout(function(){$("textarea, input",v).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",v).length&&(t.quickEditMode=!0)},0)}else A=null}else t.setActiveCell(v)}),this.stretchColumn!=="last"&&($(window).on("orientationchange.datagrid",function(){e.rerender()}),$(window).on("resize.datagrid",function(){var r=0;for(e.clearCache(),r=0;r<t.settings.columns.length;r++){var o=t.settings.columns[r];t.columnWidth(o,r)}(t.stretchColumnDiff>0||t.stretchColumnWidth>0)&&(t.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat(t.stretchColumnDiff>0?"".concat(t.stretchColumnDiff,"px"):"".concat(t.stretchColumnWidth,"px")))})),this.settings.dblClickApply||this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",function(r){t.triggerRowEvent("dblclick",r,!0)}),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody td",function(r){var o=$(r.currentTarget);r.stopPropagation(),t.closePrevPopupmenu(),t.triggerRowEvent("contextmenu",r,!!t.settings.menuId);var c=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0};return!c()||!N.isSubscribedTo(t.element[0],r,"contextmenu","datagrid")&&!c()||(r.preventDefault(),t.setActiveCell(parseInt(o.parent().attr("aria-rowindex"),10)-1,parseInt(o.attr("aria-colindex"),10)-1),t.activeCell.node.focus(),o.popupmenu({menuId:t.settings.menuId,eventObj:r,beforeOpen:t.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",function(u,p){t.settings.menuSelected&&t.settings.menuSelected(u,p)}).off("close.gridpopuptr").on("close.gridpopuptr",function(){var u=$(this);u.data("popupmenu")&&u.data("popupmenu").destroy()}),!1)}),this.headerRow.add(this.headerRowLeft).off("mousemove.datagrid").on("mousemove.datagrid","th",function(r){if(!t.dragging&&(t.currentHeader=$(r.target).closest("th"),t.currentHeader.hasClass("is-resizable")&&!t.currentHeader.hasClass("datagrid-header-spacer-column"))){var o=t.currentHeader.closest(".header-detail"),c=o.length?parseInt(o.css("margin-left"),10):0,u=parseInt(t.currentHeader.position().left,10)-(c||0)+t.element.scrollLeft(),p=u+t.currentHeader.outerWidth(),m=r.pageX-u>p-r.pageX,v=0;v=m?p-5:u-5;var w=t.currentHeader.parent().find("th:visible").index(t.currentHeader);(w===0&&(L.isRTL()?m:!m)||w===t.visibleColumns().length)&&(v="-999"),L.isRTL()||m||(t.currentHeader=t.currentHeader.prevAll(":visible").not(".is-hidden").first()),L.isRTL()&&!m&&(t.currentHeader=t.currentHeader.nextAll(":visible").not(".is-hidden").first()),t.currentHeader.hasClass("is-resizable")&&(t.createResizeHandle(),t.resizeHandle[0].style.left="".concat(v,"px"),t.resizeHandle[0].style.cursor="")}}).off("contextmenu.datagrid").on("contextmenu.datagrid","th",function(r){return!t.settings.headerMenuId||(r.preventDefault(),t.closePrevPopupmenu(),$(r.currentTarget).popupmenu({menuId:t.settings.headerMenuId,eventObj:r,attachToBody:!0,beforeOpen:t.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",function(o,c){t.settings.headerMenuSelected(o,c)}).off("close.gridpopupth").on("close.gridpopupth",function(){var o=$(this);o.data("popupmenu")&&o.data("popupmenu").destroy()}),!1)}),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",function(){var r=$(this);r.hasClass("is-checked")?(r.removeClass("is-checked").attr("aria-checked","false"),t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows()):(r.addClass("is-checked").attr("aria-checked","true"),t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows())}),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",function(r){var o=r.target;$(o).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout(function(){var c=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&t.editor){if(c.is(".spinbox, .trigger, .code-block-actions")||!$(o).is(":visible")||c&&t.editor.className&&c.closest(t.editor.className).length>0)return;t.commitCellEdit()}},150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||t.editor&&t.editor.input&&t.commitCellEdit()})},attachPagingEvents:function(){var e=this,t=this;this.settings.paging&&(this.pagerId=$(".pager-toolbar .btn-menu").attr("aria-controls"),this.tableBody.off("page.".concat(Oa)).on("page.".concat(Oa),function(n,i){i.type==="filtered"&&e.settings.source||(t.closePopupmenuOnPaging(),t.saveUserSettings(),t.render(null,i),t.afterPaging(i))}).off("pagesizechange.".concat(Oa)).on("pagesizechange.".concat(Oa),function(n,i){i.preserveSelected=!0,t.closePopupmenuOnPaging(),t.render(null,i),t.afterPaging(i)}))},closePopupmenuOnPaging:function(){var e=this.element.find(".datagrid-filter-wrapper .btn-filter.is-open"),t=e==null||e==null?void 0:e.data("popupmenu");$(".pager-toolbar .btn-menu").attr("aria-controls",this.pagerId).length&&(t==null||t==null||t.close(!0,!0))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")})},refreshSelectedRowHeight:function(){var e=this.element.parent().find(".toolbar:not(.contextual-toolbar)").find(".btn-actions").data("popupmenu");if(e!=null&&e?.wrapper){var t=e.wrapper.find('[data-option="row-extra-small"]'),n=e.wrapper.find('[data-option="row-small"]'),i=e.wrapper.find('[data-option="row-short"]'),a=e.wrapper.find('[data-option="row-medium"]'),r=e.wrapper.find('[data-option="row-normal"]'),o=e.wrapper.find('[data-option="row-large"]');this.settings.rowHeight==="extra-small"&&(t.parent().addClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),this.settings.rowHeight!=="short"&&this.settings.rowHeight!=="small"||(t.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),this.settings.rowHeight==="medium"&&(t.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().addClass("is-checked"),r.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),this.settings.rowHeight!=="normal"&&this.settings.rowHeight!=="large"||(t.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().addClass("is-checked"),o.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))}},appendToolbar:function(){var e=null,t="",n=null,i=this.settings.useFlexToolbar,a=this;if(this.settings.toolbar){if(this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)").length===1)e=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{e=$('<div class="'.concat(i?"flex-toolbar":"toolbar",' datagrid-toolbar" role="toolbar"></div>')),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(t=$('<div class="'.concat(i?"toolbar-section ":"",'title">').concat(this.settings.toolbar.title,"  </div>"))),t||(t=e.find(".title")),e.append(t),this.settings.toolbar.results&&t.append('<span class="datagrid-result-count"></span>');var r=$('<div class="'.concat(i?"toolbar-section ":"",'buttonset"></div>')).appendTo(e),o=$('<div class="'.concat(i?"toolbar-section ":"",'search"></div>')).appendTo(e);if(this.settings.toolbar.keywordFilter){var c=$('<label class="audible" for="gridfilter">'.concat(L.translate("Keyword"),"</label>")),u=$('<input class="searchfield" name="searchfield" placeholder="'.concat(L.translate("Keyword"),'" id="gridfilter">'));this.settings.toolbar.collapsibleFilter||u.attr("data-options",'{ "collapsible": false }'),this.settings.useFlexToolbar?(o.append(c),o.append(u)):(r.append(c),r.append(u))}this.settings.toolbar.dateFilter&&r.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(L.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((n=$('<div class="'.concat(i?"toolbar-section ":"",'more"></div>'))).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),e.addClass("has-more-button"));var p=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&p.append('<li><a href="#" data-option="personalize-columns">'.concat(L.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&p.append('<li><a href="#" data-option="reset-layout">'.concat(L.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&p.append('<li><a href="#" data-option="export-to-excel">'.concat(L.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.exportToCsv&&p.append('<li><a href="#" data-option="export-to-csv">'.concat(L.translate("ExportToCsv"),"</a></li>")),this.settings.toolbar.advancedFilter&&p.append('<li><a href="#">'.concat(L.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&p.append('<li><a href="#">'.concat(L.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(L.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&p.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(L.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat(this.settings.rowHeight==="extra-small"?" is-checked":"",'"><a href="#" data-option="row-extra-small">').concat(L.translate("ExtraSmall"),"</a></li>")+'<li class="is-selectable'.concat(this.settings.rowHeight==="short"||this.settings.rowHeight==="small"?" is-checked":"",'"><a href="#" data-option="row-small">').concat(L.translate("Small"),"</a></li>")+'<li class="is-selectable'.concat(this.settings.rowHeight==="medium"?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(L.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat(this.settings.rowHeight==="normal"||this.settings.rowHeight==="large"?" is-checked":"",'"><a href="#" data-option="row-large">').concat(L.translate("Large"),"</a></li>")),this.settings.toolbar.filterRow===!0&&p.append("".concat('<li class="separator"></li><li class="heading">').concat(L.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(L.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(L.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(L.translate("ClearFilter"),"</a></li>")),at(this.settings.toolbar.filterRow)==="object"){var m='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(m+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(L.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(m+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(L.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(m+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(L.translate("ClearFilter"),"</a></li>")),p.append(m)}this.settings.toolbar.actions&&n.append(p),this.settings.useFlexToolbar&&e.append(o),e.append(r),e.append(n),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(e):this.element.before(e)}var v=e.find(".btn-actions"),w=e.is(".flex-toolbar");if(this.settings.stickyHeader&&e.addClass("is-sticky"),w||v.popupmenu(),(w?e:v).on("selected",function(z,V,U){var G;V!=null&&V?.attr?G=V==null||V==null?void 0:V.attr("data-option"):U!=null&&U?.attr&&(G=U==null||U==null?void 0:U.attr("data-option")),G&&(G!=="row-extra-small"&&G!=="row-small"&&G!=="row-short"&&G!=="row-medium"&&G!=="row-normal"&&G!=="row-large"||a.rowHeight(G.substr(4)),G==="personalize-columns"&&a.personalizeColumns(),G==="reset-layout"&&a.resetColumns(),G==="export-to-excel"&&a.exportToExcel(),G==="export-to-csv"&&a.exportToCsv(),G==="show-filter-row"&&a.toggleFilterRow(),G==="run-filter"&&a.applyFilter(null,"menu"),G==="clear-filter"&&a.clearFilter())}),this.settings.initializeToolbar&&!e.data("toolbar")&&!e.hasClass("flex-toolbar")){var C=$.fn.parseOptions(e);this.settings.toolbar.placeholder&&(C.placeholder=this.settings.toolbar.placeholder),this.settings.toolbar.fullWidth&&(C.rightAligned=!0),e.toolbar(C)}if(this.settings.initializeToolbar&&e.hasClass("flex-toolbar")&&!e.data("toolbarFlex")){var A=$.fn.parseOptions(e);this.settings.toolbar.collapsibleFilter&&(A.collapsibleFilter=!0),e.toolbarflex(A)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var S,M=e.find(".searchfield"),I=M.next();M.off("keypress.datagrid").on("keypress.datagrid",function(z){z.keyCode!==13&&z.type!=="change"||(clearTimeout(S),z.preventDefault(),a.keywordSearch(M.val())),a.settings.filterWhenTyping&&(clearTimeout(S),S=setTimeout(function(){a.keywordSearch(M.val())},400))}),I.off("click.datagrid").on("click.datagrid",function(){a.keywordSearch(M.val())})}this.settings.toolbar&&this.settings.toolbar.contextualToolbar&&(this.element.before(`
        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">
          <div class="title selection-count">1 Selected</div>
        </div>`),this.contextualToolbar=this.element.prev(".contextual-toolbar")),this.toolbar=e,this.element.addClass("has-toolbar")}},hideContextualToolbar:function(){var e,t=this;((e=this.contextualToolbar)===null||e===void 0||e==null?void 0:e.length)>0&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){t.contextualToolbar.css("display","none")}).animateClosed()},rowHeight:function(e){var t=[];return e&&(this.settings.rowHeight!==e&&t.push({before:this.settings.rowHeight,after:e}),this.settings.rowHeight=e),this.setRowHeightClass(),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight=e==="normal"||e==="large"?40:e==="medium"?30:25,e==="extra-small"&&(this.virtualRange.rowHeight=22)),this.saveUserSettings(),this.refreshSelectedRowHeight(),this.rerender(),t.length&&this.element.triggerHandler("rowheightchanged",t),this.settings.rowHeight},setRowHeightClass:function(){var e=this.settings.rowHeight;e==="short"&&(e="small"),e==="large"&&(e="normal"),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("extra-small-rowheight small-rowheight short-rowheight medium-rowheight normal-rowheight large-rowheight").addClass("".concat(e,"-rowheight")),this.refreshSelectedRowHeight()},keywordSearch:function(e){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each(function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")}),this.element.find(".search-mode").each(function(){var t=$(this),n=t.text();t.text(n.replace("<i>","").replace("</i>",""))}),e=(e||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:e,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched",type:"filtered"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(e)},setSearchActivePage:function(e){if(this.pagerAPI){var t=this;e||(e={});var n=!0;this.filterExpr&&this.filterExpr.length===1?this.filterExpr[0].value!==""?(e.activePage=this.pagerAPI.filteredActivePage||1,this.settings.source&&this.settings.allowSelectAcrossPages&&e.activePage!==this.activePage&&(n=!1)):this.filterExpr[0].value===""&&this.pagerAPI.filteredActivePage&&(e=i(e)):this.restoreActivePage||(e=i(e),this.restoreActivePage=!1),n&&(e.activePage=this.activePage),this.renderPager(e)}function i(a){return a.activePage=1,t.grandTotal&&(a.grandTotal=t.grandTotal),a}},filterKeywordSearch:function(){var e,t,n,i,a=this,r=a.filterExpr,o=function(c,u){var p=!1,m=function(v){var w=a.columnById(v)[0],C=a.fieldValue(c,w.field),A=a.settings.columns.indexOf(w);return a.formatValue(w.formatter,u,A,C,w,c,a).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(_e.escapeHTML(r.value))>-1};return r.column==="all"?a.element.find("th:visible").each(function(){var v=$(this).attr("data-column-id");if(v&&(p=m(v)))return!1}):r.columnId&&(p=m(r.columnId)),p};if(r&&r.length===1)if(r=r[0],a.settings.treeGrid)for(n=0,i=(e=a.settings.treeDepth).length;n<i;n++)t=r.value!==""&&!o(e[n].node,n),e[n].node._isFilteredOut=t;else for(n=0,i=(e=a.settings.dataset).length;n<i;n++)t=r.value!==""&&!o(e[n],n),e[n]._isFilteredOut=t},highlightSearchRows:function(e){var t=this,n=this;e&&e!==""&&n.tableBody.find("tr").toArray().forEach(function(i){var a=n.rowNodes(i.getAttribute("aria-rowindex")-1),r=function(o){var c=!1;return o.toArray().forEach(function(u){[].slice.call(u.querySelectorAll("td")).forEach(function(p){var m=p.innerText.toLowerCase(),v=!!n.settings.searchExpandableRow||!ue.hasClass(t,"datagrid-expandable-row");m.indexOf(e)>-1&&v&&(c=!0,[].slice.call(p.querySelectorAll("*")).forEach(function(w){[].slice.call(w.childNodes).forEach(function(C){var A=C.parentElement;if(C.nodeType===3&&A.tagName.toLowerCase()!=="i"&&_e.unescapeHTML(A.innerHTML)===C.textContent){var S=C.textContent,M=new RegExp("(".concat(ot.escapeRegExp(e),")"),"gi");ue.addClass(A,"search-mode"),ue.html(A,S.replace(M,"<i>$1</i>"))}})}))})}),c}(a);r||a.find(".datagrid-row-detail").length?n.settings.searchExpandableRow&&r&&a.is(".datagrid-expandable-row")&&e!==""&&(a.prev().show(),a.prev().find(".datagrid-expand-btn").addClass("is-expanded"),a.prev().find(".plus-minus").addClass("active"),a.addClass("is-expanded").css("display","table-row"),a.find(".datagrid-row-detail").css("height","auto")):a.addClass("is-filtered").hide()})},getActiveDataset:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;return e.groupable&&(t=this.originalDataset),t},getDataset:function(){return this.settings.dataset.map(function(e){return delete e._isFilteredOut,e})},selectAllRows:function(){for(var e=[],t=this.getActiveDataset(),n=0,i=t.length;n<i;n++){var a=this.settings.groupable?n:this.pagingRowIndex(n);this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch?t[n]._isFilteredOut||t[n]._selected||e.push(a):t[n]._selected||e.push(a)}this.dontSyncUi=!0,this.selectRows(e,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(e,t){if(this._selectedRows&&this._selectedRows.length!==0){this.dontSyncUi=!0;for(var n=this._selectedRows.length-1;n>=0;n--)if(this._selectedRows[n]){var i=this.settings.groupable?this._selectedRows[n].idx:this.pagingRowIndex(this._selectedRows[n].idx);this.unselectRow(i,!0,!0)}this.settings.dataset.map(function(r){delete r._selected}),this.dontSyncUi=!1;var a=this.element.closest(".lookup-modal");this._selectedRows=a.length===1?this._selectedRows:[],this.displayCounts(),e||this.syncSelectedUI(),t||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map(function(r){delete r._selected})},unSelectAllRowsCurrentPage:function(e){var t,n,i=this,a=this.settings;this.dontSyncUi=!0,(t=this.currentPageRows)===null||t===void 0||t==null||t.forEach(function(c){var u=a.groupable?c.dataIndex:i.pagingRowIndex(c.dataIndex);i.unselectRow(u,!0,!0)});var r=this.getActiveDataset(),o=((n=this.currentPageRows)===null||n===void 0||n==null?void 0:n.map(function(c){return c.dataIndex}))||[];r.filter(function(c,u){return o.indexOf(u)>-1}).map(function(c){return delete c._selected}),this.dontSyncUi=!1,e||this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])},selectAllRowsCurrentPage:function(e){var t;this.dontSyncUi=!0;var n=((t=this.currentPageRows)===null||t===void 0||t==null?void 0:t.map(function(i){return i.dataIndex}))||[];n.length&&this.selectRowsBetweenIndexes([n[0],n[n.length-1]]),this.dontSyncUi=!1,e||this.syncSelectedUI()},isRowSelected:function(e){return!!e&&e._selected===!0},selectNode:function(e,t,n,i){var a=null,r=null,o="is-selected".concat(this.settings.selectable==="mixed"?" hide-selected-color":"");(n&&!this.isRowSelected(n)||i)&&(e.addClass(o).attr("aria-selected","true"),(a=e.find(".datagrid-selection-checkbox").closest("td")).length&&(a.attr("aria-checked","true"),a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked")),(r=e.find(".datagrid-selection-radio").closest("td")).length&&(this.unSelectAllRows(),r.attr("aria-checked","true"),r.find(".datagrid-cell-wrapper .datagrid-radio").addClass("is-checked")),n&&(n._selected=!0))},selectRow:function(e,t,n){var i,a=this,r=null,o=this,c=this.settings,u={};if(e!==void 0&&e!==-1&&c.selectable&&!this.isRowDisabled(e)&&(r=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),i=this.dataRowIndex(r),isNaN(i)&&(i=e),r&&(r.length||!c.source))){if(typeof c.onBeforeSelect=="function"&&!n&&c.onBeforeSelect({node:r,idx:i})===!1)return;var p=function(G,J){return!!a._selectedRows.filter(function(te){return function(de,H,he){return he&&he.idx===de&&he.elem&&he.elem.is(H)}(G,J,te)}).length};if(c.selectable==="single"){var m=-1;this._selectedRows.length>0?m=this._selectedRows[0].pagingIdx:r[0]&&r[0].classList.contains("is-selected")&&(m=i),m!==-1&&(this.unselectRow(m,!0,!0),!r.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var v=c.source&&c.selectable==="multiple"&&c.allowSelectAcrossPages;if(!r.hasClass("is-selected")||v){var w;if(c.treeGrid&&c.treeDepth&&c.treeDepth.length>0){var C=parseInt(r.attr("aria-level"),10);if(w=c.treeDepth[o.pagerAPI&&c.source?r.index():e].node,r.is(".datagrid-tree-parent")&&c.selectable==="multiple")r.add(r.nextUntil('[aria-level="'.concat(C,'"]'))).each(function(G){var J=$(this),te=J.attr("aria-rowindex")-1,de=o.actualPagingRowIndex(te),H=c.treeDepth[de].node;if(c.selectChildren||!c.selectChildren&&G===0){var he=!J.is(r)&&!J.hasClass("is-selected");if(o.selectNode(J,te,H),he&&!p(de,J)){if(u={idx:de,data:H,elem:J,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:de,pagesize:c.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var ie=o.getUniqueRowID(H);ie&&(u.uniqueRowID=ie)}o._selectedRows.push(u)}}});else if(c.selectable==="siblings"){var A,S;o.settings.selectAllCurrentPage?o.unSelectAllRowsCurrentPage(!0):o.unSelectAllRows(!0,!0),C===1?A=r.parent().find('[aria-level="1"]'):C>1&&(A=r.nextUntil('[aria-level="'.concat(C-1,'"]')).filter('[aria-level="'.concat(C,'"]')),S=r.prevUntil('[aria-level="'.concat(C-1,'"]')).filter('[aria-level="'.concat(C,'"]'))),r.add(A).add(S).each(function(G){var J=$(this),te=J.attr("aria-rowindex")-1,de=o.actualPagingRowIndex(te),H=c.treeDepth[de].node;if(c.selectChildren||!c.selectChildren&&G===0){var he=!J.is(r)&&!J.hasClass("is-selected");if(o.selectNode(J,te,H),he&&!p(de,J)){if(u={idx:de,data:H,elem:J,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:de,pagesize:c.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var ie=o.getUniqueRowID(H);ie&&(u.uniqueRowID=ie)}o._selectedRows.push(u)}}})}else o.selectNode(r,e,w);o.setNodeStatus(r),o.lastSelectedRow=e}else{if(w=c.dataset[i],c.groupable){var M=o.actualPagingRowIndex(o.actualRowIndex(r));if(isNaN(M))return;var I=o.groupArray[M];if(w=o.settings.dataset[I.group].values[I.node],!p(w.idx,r)){if(u={idx:w.idx,data:w,elem:r,group:c.dataset[o.groupArray[M].group],page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.settings.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var z=o.getUniqueRowID(w);z&&(u.uniqueRowID=z)}this._selectedRows.push(u)}}o.selectNode(r,i,w),o.lastSelectedRow=e}if(!c.groupable){var V=o.actualPagingRowIndex(e);if(V===-1&&(V=e),!p(V,o.visualRowNode(V))){if(u={idx:V,data:w,elem:o.visualRowNode(V),page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:e,pagesize:o.settings.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var U=o.getUniqueRowID(w);U&&(u.uniqueRowID=U)}this._selectedRows.push(u)}}}t||o.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(e){e.sort(function(n,i){return n-i});for(var t=e[0];t<=e[1];t++)this.selectRow(t);this.displayCounts()},syncHeaderCheckbox:function(e){if(this.headerNodes().length!==0){var t=this.settings,n=this.getActiveDataset(),i=this.headerNodes().find(".datagrid-checkbox"),a=e.length,r=this._selectedRows.length,o=i.data("selected");if(t.selectAllCurrentPage&&this.currentPageRows&&n.length!==e.length){var c,u=((c=this.currentPageRows)===null||c===void 0||c==null?void 0:c.map(function(p){return p.dataIndex}))||[];r=n.filter(function(p,m){return u.indexOf(m)>-1}).filter(function(p){return p._selected}).length}t.source&&t.allowSelectAcrossPages&&(r=n.filter(function(p){return p._selected}).length),r!==a&&r>0&&o==="partial"||r===a&&o==="all"&&r!==0||r===0&&o==="none"||(r>0&&i.data("selected","partial").addClass("is-checked is-partial").attr("aria-checked","mixed"),r===a&&i.data("selected","all").addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),r===0&&i.data("selected","none").removeClass("is-checked is-partial").attr("aria-checked","false"))}},getUniqueRowID:function(e){var t=null;if(this.settings.columnIds.length>0){t="rowId";for(var n=0;n<this.settings.columnIds.length;n++)t+=" ".concat(e[this.settings.columnIds[n]]);t=t.replace(/([0-9A-Z]+)/g,function(i,a){return" ".concat(a)}).replace(/([0-9a-z]+)/g,function(i,a){return"".concat(a," ")}).trim(),t=_e.toCamelCase(t)}return t},syncSelectedRows:function(){for(var e,t=this,n=this.settings,i=n.groupable&&this.originalDataset?this.originalDataset:n.dataset,a=null,r=function(w){var C=n.groupable?t.dataRowNode(a):t.visualRowNode(a);C[0]&&(t._selectedRows[w].elem=C,t.selectNode(C,a,i[a],!0))},o=0,c=this._selectedRows.length;o<c;o++){var u=(e=this._selectedRows[o])?e.uniqueRowID:null;if(this.settings.source&&this.settings.allowSelectAcrossPages&&u){for(var p=0,m=i.length;p<m;p++)if(u===this.getUniqueRowID(i[p])){var v=n.groupable?this.dataRowNode(p):this.visualRowNode(p);v[0]&&(this._selectedRows[o].elem=v,this.selectNode(v,p,i[p],!0))}}else this.pagerAPI&&this._selectedRows[o].page===this.pagerAPI.activePage&&(a=this._selectedRows[o].idx,r(o)),this._selectedRows[o].pagesize===n.pagesize||n.groupable||(a=this._selectedRows[o].pagingIdx,n.dataset[a]?(r(o),this._selectedRows[o].idx=a,this._selectedRows[o].page=this.pagerAPI.activePage,this._selectedRows[o].pagesize=n.pagesize):(this._selectedRows[o].idx=a%n.pagesize,this._selectedRows[o].page=Math.round(a/n.pagesize)+1,this._selectedRows[o].pagesize=n.pagesize))}},calculatePagerInfo:function(e,t,n){for(var i=this.settings,a=t||i.treeGrid?i.treeDepth:i.dataset,r={idx:e,page:1,pagesize:n=typeof n=="number"&&n>0?n:i.pagesize,numOfPages:Math.ceil(a.length/n)},o=0;o<r.numOfPages;o++){if(e>=(r.page-1)*r.pagesize&&e<r.page*r.pagesize){r.pagingIdx=e-r.pagesize*o;break}r.page++}return r},syncSelectedRowsIdx:function(){var e=this.getActiveDataset();if(this._selectedRows.length!==0&&e.length!==0){this._selectedRows=[];for(var t=0;t<e.length;t++){var n=this.settings.treeGrid?e[t].node:e[t];if(n._selected){var i={idx:t,data:n,elem:this.dataRowNode(t),pagingIdx:t,pagesize:this.settings.pagesize};if(this.settings.groupable){var a=this.rowNodesByDataIndex(t);if(a.length){var r=this.actualPagingRowIndex(this.actualRowIndex(a)),o=this.groupArray[r].group;i.group=this.settings.dataset[o],i.page=this.calculatePagerInfo(o).page}}else i.page=this.calculatePagerInfo(t).page;this._selectedRows.push(i)}}}},syncSelectedUI:function(){var e,t,n,i,a,r,o=this,c=this.getActiveDataset(),u=c;if(this.settings.selectAllCurrentPage){var p,m=((p=this.currentPageRows)===null||p===void 0||p==null?void 0:p.map(function(I){return I.dataIndex}))||[];u=c.filter(function(I,z){return m.indexOf(z)>-1})}var v=u;if(this.filterRowRendered){v=[];for(var w=0,C=(A=u)===null||A===void 0||A==null?void 0:A.length;w<C;w++){var A;u[w]._isFilteredOut||v.push(w)}}if(this.syncHeaderCheckbox(v),((e=this.contextualToolbar)===null||e===void 0||e==null?void 0:e.length)===1&&!this.dontSyncUi&&(((t=this._selectedRows)===null||t===void 0||t==null?void 0:t.length)===0&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){o.contextualToolbar.css("display","none")}).animateClosed(),((n=this._selectedRows)===null||n===void 0||n==null?void 0:n.length)>0&&(((i=this.contextualToolbar)===null||i===void 0||i==null?void 0:i.height())===0||(a=this.contextualToolbar)===null||a===void 0||!a?.is(":visible")||(r=this.contextualToolbar)===null||r===void 0||!r?.hasClass("is-hidden")))){var S=this.contextualToolbar.hasClass("flex-toolbar")?"recalculate-buttonset":"recalculate-buttons",M=this.contextualToolbar.hasClass("flex-toolbar")?"flex":"block";this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(L.translate("Selected"))),this.contextualToolbar.removeClass("is-hidden").css("display",M).one("animateopencomplete.datagrid",function(){$(this).removeClass("is-hidden").triggerHandler(S)}).animateOpen()}},activateRow:function(e){this.activatedRow()[0].row!==e&&this.toggleRowActivation(e)},deactivateRow:function(){var e=this.activatedRow()[0].row;e>=0&&this.toggleRowActivation(e)},activatedRow:function(){var e=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var t=this.settings,n=t.treeGrid?t.treeDepth:t.dataset,i=this.tableBody.find("tr.is-rowactivated");if(i.length){var a=this.dataRowIndex(i),r=t.indeterminate?a:this.actualRowIndex(i);e=[{row:r,item:n[r],elem:i}]}else{e=null;for(var o=0;o<n.length;o++)if(n[o]._rowactivated){e=[{row:o,item:n[o],elem:void 0}];break}e===null&&(e=[{row:-1,item:void 0,elem:i}])}}return e},toggleRowActivation:function(e){var t,n,i,a=this.settings,r=a.treeGrid?a.treeDepth:a.dataset;if(typeof e=="number"){if(t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+1,'"]')),i=e,this.pagerAPI&&a.source&&a.indeterminate){var o=e+(this.pagerAPI.activePage-1)*a.pagesize;t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(o+1,'"]'))}}else t=(n=e instanceof jQuery?e:$(e))[0],i=a.treeGrid||a.groupable?this.actualRowIndex(n):this.dataRowIndex(n);a.indeterminate&&!t&&(t=(n=this.actualRowNode(i))[0]),r[i]&&r[i]._rowactivated?this.deactivateRowNode(i,r):(this.deactivateAllRowNodes(r),this.activateAllRowNodes(i,r))},activateAllRowNodes:function(e,t){var n=this;if(!(typeof e!="number"||e<0)){var i=this.settings;t===void 0&&(t=i.treeGrid?i.treeDepth:i.dataset);var a=[{row:e,item:t[e]}];t[e]&&$.when(this.element.triggerHandler("beforerowactivated",a)).done(function(r){var o;typeof(o=r)=="string"&&o.toLowerCase()==="false"||typeof o=="boolean"&&o===!1||typeof o=="number"&&o===0||((i.paging&&i.source&&i.selectable==="mixed"?n.rowNodesByDataIndex(e).toArray():n.rowNodes(e).toArray()).forEach(function(c){c.classList.add("is-rowactivated")}),t[e]._rowactivated=!0,a=[{row:e,item:t[e]}],n.element.triggerHandler("rowactivated",a))})}},deactivateRowNode:function(e,t){if(!(typeof e!="number"||e<0)){var n=this.settings;t===void 0&&(t=n.treeGrid?n.treeDepth:n.dataset),t[e]&&!n.disableRowDeactivation&&(this.rowNodes(e).toArray().forEach(function(i){i.classList.remove("is-rowactivated")}),delete t[e]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:e,item:t[e]}]))}},deactivateAllRowNodes:function(e){var t=this.settings,n=null;e===void 0&&(e=t.treeGrid?t.treeDepth:t.dataset);var i=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(i.length>0){i.forEach(function(c){c.classList.remove("is-rowactivated")});var a=t.treeGrid||t.groupable?this.actualRowIndex($(i)):this.dataRowIndex($(i));n={row:a,item:e[a]},e[a]&&delete e[a]._rowactivated}else for(var r=0;r<e.length;r++){var o=e[r];if(o._rowactivated){delete o._rowactivated,n={row:r,item:o};break}}n!==null&&this.element.triggerHandler("rowdeactivated",[n])},toggleRowSelection:function(e,t){var n=typeof e=="number"?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):e,i=typeof e=="number"?e:this.actualRowIndex(n);if(this.settings.groupable&&(i=this.dataRowIndex(n)),!(this.settings.selectable===!1||this.editor&&n.hasClass("is-selected")))return this.settings.dblClickApply||this.settings.selectable!=="single"||!n.hasClass("is-selected")||this.settings.disableRowDeselection?(n.hasClass("is-selected")?this.settings.disableRowDeselection||this.unselectRow(i):this.settings.dblClickApply?this.selectRow(i,!1,!0):this.selectRow(i),this.settings.dblClickApply&&t&&this.selectRow(i),this.displayCounts(),this._selectedRows):(this.unselectRow(i),this.displayCounts(),this._selectedRows)},unselectRow:function(e,t,n){var i=this,a=i.settings,r=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),o=a.source&&a.selectable==="multiple"&&a.allowSelectAcrossPages,c=null,u=null;if(r&&e!==void 0){var p=a.treeGrid?a.treeDepth[e].node:a.dataset[e],m=function(A){return A?A.uniqueRowID:null},v=function(A,S){var M=function(V,U){delete V._selected,U===void 0&&(U=S);for(var G=0;G<i._selectedRows.length;G++){var J=m(i._selectedRows[G]);if(a.source&&a.allowSelectAcrossPages&&J){if(J===i.getUniqueRowID(V)){i._selectedRows.splice(G,1);break}}else if(i._selectedRows[G].idx===U){if(o&&i._selectedRows[G].elem&&!i._selectedRows[G].elem.is(A))continue;i._selectedRows.splice(G,1);break}}};if(A.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),i.columnIdxById("selectionCheckbox")!==-1&&((c=i.cellNode(A,i.columnIdxById("selectionCheckbox"))).attr("aria-checked","false"),c.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").removeAttr("aria-label")),i.columnIdxById("selectionRadio")!==-1&&((u=i.cellNode(A,i.columnIdxById("selectionRadio"))).attr("aria-checked","false"),u.find(".datagrid-cell-wrapper .datagrid-radio").removeClass("is-checked no-animate").removeAttr("aria-label")),a.treeGrid)for(var I=0;I<a.treeDepth.length;I++)i.isRowSelected(a.treeDepth[I].node)&&(S!==void 0?S===a.treeDepth[I].idx-1&&M(a.treeDepth[I].node):M(a.treeDepth[I].node));else{var z=A.length?i.dataRowIndex(A):S;z!==void 0&&z>-1&&(p=a.dataset[z]),a.groupable&&(p=i.originalDataset[z]),p!==void 0&&(a.paging&&a.source?M(p,z):M(p))}};if(a.treeGrid){var w=parseInt(r.attr("aria-level"),10);if(r.is(".datagrid-tree-parent")&&a.selectable==="multiple")r.add(r.nextUntil('[aria-level="'.concat(w,'"]'))).each(function(A){var S=$(this),M=S.attr("aria-rowindex")-1,I=i.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&A===0)&&v(S,I)});else if(a.selectable==="siblings")r.parent().find(".is-selected").each(function(A){var S=$(this),M=S.attr("aria-rowindex")-1,I=i.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&A===0)&&v(S,I)});else{var C=i.actualPagingRowIndex(e);v(r,C)}i.setNodeStatus(r)}else v(r,e);t||i.syncSelectedUI(),n||i.element.triggerHandler("selected",[i._selectedRows,"deselect",p])}},setNodeStatus:function(e){var t,n=this,i=n.settings.selectable==="multiple",a=n.settings,r=n.cellNode(e,n.columnIdxById("selectionCheckbox"));if(!i)return r.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),r.attr("aria-checked","false"),void(e.is(".is-selected")&&(r.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"),r.attr("aria-checked","true")));var o=function(c,u){c.each(function(){var p=$(this),m=n.cellNode(p,n.columnIdxById("selectionCheckbox")),v=n.getSelectedStatus(p,u);m.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),m.attr("aria-checked","false"),v==="mixed"?(m.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"),m.attr("aria-checked","mixed")):v&&(m.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked"),m.attr("aria-checked","true"))})};t=e.add(e.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),a.selectChildren&&o(t),t=e,+e.attr("aria-level")>1&&(t=t.add(e.prevUntil('[aria-level="1"]')).add(e.prevAll('[aria-level="1"]:first'))),t=t.filter(".datagrid-tree-parent"),a.selectChildren&&o(t)},getSelectedStatus:function(e){var t=this.settings,n=0,i=0,a=0,r=e.add(e.nextUntil('[aria-level="1"]'));if(t.treeGrid&&t.selectable==="multiple"){var o=e.attr("aria-level");r=e.add(e.nextUntil('[aria-level="'.concat(o,'"]')))}return r.each(function(){n++,$(this).is(".is-selected")?i++:a++}),n===i||n!==a&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(e,t,n){var i=-1,a=this.settings,r=a.selectable==="siblings",o=this.getActiveDataset();if(typeof e=="number"&&(e=[e]),!e||e.length===0)return this._selectedRows;if(a.selectable==="single"&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),i=Object.prototype.toString.call(e)==="[object Array]"?e[0]:e.index(),this.selectRow(i,!0,!0)),a.selectable==="multiple"||a.selectable==="mixed"||r)if(Object.prototype.toString.call(e)==="[object Array]"){for(var c=0;c<e.length;c++)this.selectRow(e[c],!0,!0);if(e.length===0)for(var u=0,p=o.length;u<p;u++)this.unselectRow(u,!0,!0)}else this.selectRow(e.index(),!0,!0);return this.displayCounts(),t||this.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(e,t){for(var n=this.settings,i=this.getActiveDataset(),a=-1,r=[],o=0;o<i.length;o++)if(n.groupable)for(var c=0;c<i[o].values.length;c++)a++,i[o].values[c][e]===t&&r.push(a);else(n.treeGrid?i[o].node:i[o])[e]===t&&r.push(o);return r},rowStatus:function(e,t,n){var i=this.getActiveDataset();if(!t)return delete i[e].rowStatus,this.settings.treeGrid&&delete i[e].node.rowStatus,void this.updateRow(e);if(!/dirty/.test(t)&&i[e]){i[e].rowStatus={};var a=i[e].rowStatus;a.icon=t,t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace("-progress","Progress"),a.text=L.translate(t),n=n?n.charAt(0).toUpperCase()+n.slice(1):a.text,a.tooltip=n,this.updateRow(e),this.setupTooltips(!0)}},columnById:function(e){return $.grep(this.settings.columns,function(t){return t.id===e})},columnIdxById:function(e){for(var t=this.settings.columns,n=-1,i=0;i<t.length;i++)if(t[i].id===e){n=i;break}return n},handleKeys:function(){var e=this,t=this,n=$("th .datagrid-checkbox",t.headerRow);t.element.on("keydown.datagrid","th",function(i){var a,r,o=i.which||i.keyCode||i.charCode||0,c=$(this),u=t.columnIdxById(c.attr("data-column-id")),p=t.visibleColumns().length-1,m=$(i.target);if(!(m.closest(".popupmenu").length>0)){if(o===13||o===32){if(a=t.settings.selectable==="multiple"&&u===0?$(".datagrid-checkbox",c):c,m.is(".btn-menu.btn-filter"))return void a.trigger("click.datagrid");var v=function(C){var A;return C&&((A=C[0])===null||A===void 0||A==null?void 0:A.dataset.columnId)==="selectionCheckbox"},w=v(a)||v(a.prevObject);if(m.is("th.is-sortable")&&t.setSortColumn($(this).attr("data-column-id")),(t.settings.selectable==="multiple"||t.settings.selectable==="mixed")&&w){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows()}o===32&&i.preventDefault()}[35,36,37,39].indexOf(o)!==-1&&(r=u,r=/35|36/i.test(o)||(i.ctrlKey||i.metaKey)&&/37|39/i.test(o)?L.isRTL()?o===36||(i.ctrlKey||i.metaKey)&&o===37?p:0:o===35||(i.ctrlKey||i.metaKey)&&o===39?p:0:L.isRTL()?o===39?u>0?u-1:u:u<p?u+1:p:o===37?u>0?u-1:u:u<p?u+1:p,t.activeCell.cell=r,c.removeAttr("tabindex").removeClass("is-active"),i.preventDefault()),o===40&&(c.removeAttr("tabindex"),t.activeCell.node=t.cellNode(0,t.settings.groupable?0:t.activeCell.cell).attr("tabindex","0").focus(),i.preventDefault()),m.parents(".modal").length>0&&m.hasClass("btn-filter")&&(i.shiftKey&&o===9?m.parents("th").prev("th").length>0?(i.preventDefault(),m.parents("th").prev("th").find("[tabindex=0]").trigger("focus")):m.parents(".modal-content").find(".toolbar").length>0&&(i.preventDefault(),i.stopPropagation(),m.parents(".modal-content").find(".toolbar").find("button[tabindex=0]").trigger("focus")):o===9&&(i.preventDefault(),m.siblings("input").trigger("focus")))}}),t.element.on("keydown.datagrid","td, input",function(i){var a=i.which||i.keyCode||i.charCode||0,r=!1;a!==113||e.inlineMode||(t.settings.actionableMode=!t.settings.actionableMode,r=!0);var o=t.element.parents(".modal");if(a===27&&o.length!==0&&o.data().modal.close(),r)return i.preventDefault(),i.stopPropagation(),r}),t.element.on("keydown.datagrid","td",function(i){var a=i.which||i.keyCode||i.charCode||0,r=!1,o=$(i.target),c=L.isRTL(),u=t.activeCell.node,p=$(this).parent(),m=p.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),v=p.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),w=t.activeCell.row,C=t.activeCell.cell,A=t.columnSettings(C),S=p.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),M=t.settings.dataset[t.dataRowIndex(p)],I=t.tableBody.find("tr:visible"),z=function(Ve){var Ke=I.filter('[aria-rowindex="'.concat(Ve+1,'"]'));return Ke.is(".datagrid-rowgroup-header")?Ke.index():t.dataRowIndex(Ke)};u.length||(t.activeCell.node=t.cellNode(w,C),u=t.activeCell.node);var V,U=function(Ve,Ke,ct){if(S)return function(je,lt,xt){var sn=t.activeCell.groupNode||u,Xt=je+(xt?-1:1);return Xt>lt?xt?sn.prevAll(":visible").last():sn.nextAll(":visible").last():xt?sn.prevAll(":visible").first():sn.nextAll(":visible").first()}(Ve,Ke,ct);var qe=Ve+(ct?-1:1);if(qe>Ke)return Ke;for(;t.settings.columns[qe]&&t.settings.columns[qe].hidden;)qe=ct?qe-1:qe+1;return qe},G=!!$(".datagrid-selection-checkbox",u).length,J=I.last(),te=t.settings.columns.length-1;if(t.settings.onKeyDown){var de=function(Ve){Ve||(i.stopPropagation(),i.preventDefault())},H={activeCell:t.activeCell,row:w,cell:C};if(t.settings.onKeyDown(i,H,de)===!1||!de)return i.stopPropagation(),void i.preventDefault()}if(a===121&&i.shiftKey&&o.trigger("contextmenu"),!([9,37,38,39,40].indexOf(a)!==-1&&(o.closest(".code-block").length&&(a!==9||!i.shiftKey||t.getFocusables(u).index!==0)||a!==9&&(o.is(".code-block-actions")||o.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))))){if([9,37,39].indexOf(a)!==-1){if(a===9&&!t.settings.actionableMode||!t.settings.cellNavigation)return;if(a!==9&&i.altKey)C=a===37&&!c||a===39&&c?0:te,t.setActiveCell(w,C);else if(!t.quickEditMode||a===9){if(a===9&&i.shiftKey&&o.is(".code-block-actions")?t.focusNextPrev("prev",u):C=!c&&(a===37||a===9&&i.shiftKey)||c&&(a===39||a===9)?U(C,te,!0):U(C,te),C===-1&&!t.settings.actionableMode||!t.settings.cellNavigation||C===-1&&t.settings.actionableMode&&(C=te,--w===-1)||C===te&&te===t.activeCell.cell&&t.settings.actionableMode&&(C=0,++w===t.visibleRowCount))return;C instanceof jQuery?t.setActiveCell(C):t.setActiveCell(w,C),t.settings.actionableMode&&(t.makeCellEditable(t.activeCell.rowIndex,C,i),t.containsTextField(u)&&t.containsTriggerField(u)&&(t.quickEditMode=!0)),t.quickEditMode=!1,r=!0}}if(a===38&&!t.quickEditMode)if(i.altKey||i.metaKey){var he=z(0);t.setActiveCell(he,C),r=!0}else{if(w===0&&!m.is(".datagrid-rowgroup-header"))return u.removeAttr("tabindex"),void t.element.find("th").eq(C).attr("tabindex","0").focus();t.setActiveCell(m,C),r=!0}if(a!==40||t.quickEditMode||(i.altKey||i.metaKey?(t.setActiveCell(J,C),r=!0):(t.setActiveCell(v,C),r=!0)),a===32&&i.ctrlKey&&u){var ie="";(w=u.closest("tr")).children().each(function(){var Ve=$(this);ie+="".concat(Ve.text()," ")}),$("body").toast({title:"",audibleOnly:!0,message:ie}),r=!0}if(a!==36||u.hasClass("is-editing")||(t.setActiveCell(w,0),r=!0),a!==35||u.hasClass("is-editing")||(t.setActiveCell(w,te),r=!0),a===34&&(t.setActiveCell(J,C),r=!0),a===33&&(t.setActiveCell(z(0),C),r=!0),a===32&&(!t.settings.editable||G)){if(w=u.closest("tr"),o.closest(".datagrid-row-detail").length===1)return;i.preventDefault();var me=o.find(".datagrid-expand-btn, .datagrid-drilldown");if(me&&me.length)return me.trigger("click"),void i.preventDefault();t.settings.selectable!=="multiple"&&t.settings.selectable!=="mixed"||!i.shiftKey?t.toggleRowSelection(w):t.selectRowsBetweenIndexes([t.lastSelectedRow,w.attr("aria-rowindex")-1])}if(t.settings.editable&&a===32){var ke=o==null||o==null?void 0:o.find(".datagrid-expand-btn");ke.length>0&&(ke.trigger("click"),i.preventDefault()),t.editor||t.makeCellEditable(t.activeCell.rowIndex,C,i)}if(a===13&&u.is(".has-btn-actions")){var De=u.find(".btn-actions");De.length&&De.trigger("click")}if(a===13&&A.click&&typeof A.click=="function"&&(u.hasClass("is-cell-readonly")||A.click(i,[{row:w,cell:C,item:M,originalEvent:i}])),t.settings.editable&&a===13){if(o.is("textarea")&&i.shiftKey||o.is(".btn-menu")||o.closest(".popupmenu.is-open").length)return;var Me;t.editor?(t.quickEditMode=!1,t.commitCellEdit(),t.setNextActiveCell(i)):(t.makeCellEditable(t.activeCell.rowIndex,C,i),t.containsTextField(u)&&t.containsTriggerField(u)&&(Me=t.settings)!==null&&Me!==void 0&&Me?.actionableMode&&(t.quickEditMode=!0)),r=!0}if([9,13,32,35,36,37,38,39,40,113].indexOf(a)!==-1||i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||!t.settings.editable||t.editor||(V=i.currentTarget)!==null&&V!==void 0&&(V=V?.parentElement)!==null&&V!==void 0&&V?.classList.contains("datagrid-expandable-row")||t.makeCellEditable(t.activeCell.rowIndex,C,i),(t.settings.selectable==="multiple"||t.settings.selectable==="mixed")&&!t.editor&&(i.ctrlKey||i.metaKey)&&a===65){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows(),r=!0}if(r)return i.preventDefault(),i.stopPropagation(),!1}})},getFocusables:function(e){var t=$(":focusable",e);return{elements:t,index:t.index($(":focus"))}},focusNextPrev:function(e,t){if(t&&typeof e=="string"){e=e.toLowerCase();var n=this.getFocusables(t),i=n.elements,a=i.length,r=n.index;/\b(next|prev)\b/g.test(e)&&(r=e==="next"?r+1>=a?0:r+1:r-1<0?a:r-1,i.eq(r).focus())}},containsTextField:function(e){var t,n=["image","button","submit","reset","checkbox","radio"],i="textarea, input:not(.colorpicker)",a=n.length;for(i+=a?":not(":"",t=0;t<a;t++)i+="[type=".concat(n[t],"],");return i=a?"".concat(i.slice(0,-1),")"):"",!!$(i,e).length},containsTriggerField:function(e){return!$(".dropdown, .datepicker, .lookup",e).length},isRowDisabled:function(e){return!!(this.settings.isRowDisabled&&typeof this.settings.isRowDisabled=="function"&&this.rowNodes(e).attr("aria-disabled")==="true")},isCellEditable:function(e,t){if(!this.settings.editable)return!1;var n=this.columnSettings(t);if(n.readonly||this.isRowDisabled(e)||!this.activeCell.node)return!1;var i=this.activeCell.node.find(".datagrid-cell-wrapper"),a=i.text()?i.text():this.fieldValue(this.settings.dataset[e],n.field);if(n.isEditable){var r=this.settings.dataset[e];if(this.settings.treeDepth&&this.settings.treeDepth[e]&&(r=this.settings.treeDepth[e].node),!n.isEditable(e,t,a,n,r,this,"is-editable"))return!1}return!!n.editor},makeCellEditable:function(e,t,n){var i,a,r,o;if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var c=this.activeCell.node.find(".datagrid-cell-wrapper"),u=c.parent("td"),p=$(".datagrid-tree-node",c).length>0,m=$(".datagrid-expand-btn",c).length>0;if(u.hasClass("is-editing")||u.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var v=this.columnSettings(t);if(!v.editor)return n.keyCode!==32||$(n.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var w=this.actualRowNode(e),C=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(w)):this.dataRowIndex(w);!this.settings.treeGrid&&this.settings.paging&&this.pagerAPI.activePage>1&&C<(this.pagerAPI.activePage-1)*this.settings.pagesize&&(C+=(this.pagerAPI.activePage-1)*this.settings.pagesize);var A=this.rowData(C),S=$(".is-editor",u).length>0,M=$(".is-placeholder",c).length>0,I=c.text()&&c.text().trim().length>0?c.text():this.fieldValue(A,v.field);if((S||M)&&(I=this.fieldValue(A,v.field)),!this.isCellEditable(C,t))return!1;(m||p)&&(m&&(I=$("> span",c).text()),typeof I=="string"&&(I=I.replace(/^\s/,""))),v.inlineEditor?u.addClass("is-editing-inline"):(S&&c.css({position:"static",height:c.outerHeight()}),u.addClass("is-editing"),v.doNotEmptyCellWhenEditing||u.hasClass("is-fileupload")||c.empty()),I=_e.sanitizeConsoleMethods(I),this.element.triggerHandler("beforeentereditmode",[{row:C,cell:t,item:A,target:c,value:I,column:v,editor:this.editor}]),this.visibleColumns().length===1&&u.addClass("has-singlecolumn"),this.editor=new v.editor(C,t,I,c,v,n,this,A),(i=this.editor)!==null&&i!==void 0&&(i=i?.input)!==null&&i!==void 0&&i?.is(".dropdown")&&(a=this.editor)!==null&&a!==void 0&&(a=a?.input)!==null&&a!==void 0&&(a=a?.parent())!==null&&a!==void 0&&a?.is(".datagrid-cell-wrapper")&&this.editor.input.parent().addClass("is-dropdown-wrapper"),this.editor.row=C,this.editor.cell=t;var z=((r=v.formatter)===null||r===void 0||r==null?void 0:r.toString())||"";if(z.indexOf("function Badge")!==0&&z.indexOf("function Alert")!==0||(this.editor.useValue=!0),this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(I=this.fieldValue(A,v.field)),this.editor.val(I),this.settings.showDirty){var V=I;V===""&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(V=!1);var U={originalVal:V,isDirty:!1};this.addToDirtyArray(C,t,U)}return v.inlineEditor||this.editor.focus(),(o=this.editor)!==null&&o!==void 0&&o?.input.is(".dropdown")&&n.keyCode&&![9,13,32,37,38,39,40].includes(n.keyCode)&&this.editor.input.data("dropdown").handleAutoComplete(n),this.element.triggerHandler("entereditmode",[{row:C,cell:t,item:A,target:c,value:I,column:v,editor:this.editor}]),!0}},rowData:function(e){if(this.settings.groupable)return this.originalDataset[e];var t=this.settings.treeGrid?this.settings.treeDepth[e].node:this.settings.dataset[e];return this.settings.treeGrid&&this.settings.treeDepth[e].rowStatus&&(this.settings.treeDepth[e].node.rowStatus=this.settings.treeDepth[e].rowStatus),t},commitCellEdit:function(e){var t=this;if(this.editor){var n,i=this.editor.input,a=this.getEditorName(this.editor),r=a==="editor",o=a==="fileupload",c=!i.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");if(o)typeof this.editor.val=="function"&&(n=this.editor.val()),Promise.resolve(n).then(function(v){t.commitCellEditUtil(i,v,r,o,c,e)});else{if(typeof this.editor.val=="function"){var u,p=this.editor.val(),m=(u=this.columnSettings(this.editor.cell))===null||u===void 0||u==null?void 0:u.dateFormat;n=m===void 0?isNaN(Date.parse(p))&&this.editor.name==="date"?"":p:isNaN(L.parseDate(p,{dateFormat:m}))&&this.editor.name==="date"?"":p}this.commitCellEditUtil(i,n,r,o,c,e)}}},commitCellEditUtil:function(e,t,n,i,a,r){if(this.editor){var o,c,u;n?o=this.editor.td:i?(this.editor.status==="clear"?t="":this.editor.status!=="init"&&this.editor.status!=="cancel"||(t=this.editor.originalValue),o=this.tableBody.find("#".concat(e.attr("id"))).closest("td"),t=_e.escapeHTML(t)):(o=e.closest("td"),t=_e.escapeHTML(t)),this.settings.source!==null&&a?(c=this.activeCell.rowIndex,u=this.activeCell.dataRow):(c=this.actualRowIndex(o.parent()),u=this.dataRowIndex(o.parent()));var p=o.attr("aria-colindex")-1,m=this.columnSettings(p),v=this.settings.treeGrid?this.settings.treeDepth[u].node:this.getActiveDataset()[u],w=this.fieldValue(v,m.field);if(m.beforeCommitCellEdit&&(i||!r)&&m.beforeCommitCellEdit({cell:p,row:u,item:v,editor:this.editor,api:this})===!1)return;if(this.editor){w=_e.sanitizeConsoleMethods(w),t=_e.sanitizeConsoleMethods(t);var C=o.hasClass("is-editing-inline");o.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?u:c,p,t,!1,C,w);var A=this.fieldValue(v,m.field);this.element.triggerHandler("exiteditmode",[{row:c,cell:p,item:v,target:o,value:A,oldValue:w,column:m,editor:this.editor}])}}},validateCell:function(e,t){var n,i,a=this,r=this,o=this.columnSettings(t);if(o.validate){var c,u,p=[],m=o.validate.split(" "),v=$.fn.validation,w=this.fieldValue(this.settings.dataset[e],o.field),C=[],A="";for(u=0;u<m.length;u++){var S=v.rules[m[u]],M={row:e,cell:t,item:this.settings.dataset[e],column:o,grid:r};c=$.Deferred(),S.async?S.check(w,$("<input>").val(w),M,I,c):I(S.check(w,$("<input>").val(w),M),!0,m[u],c),p.push(c)}(n=$).when.apply(n,p).then(function(){var z=$.fn.validation.ValidationTypes;for(var V in z)if(A="",i=z[V],C[i.type]&&(A=C[i.type]),A!==""){r.showCellError(e,t,A,i.type);var U=a.dataRowNode(e);r.element.trigger("cell".concat(i.type),{row:e,cell:t,message:A,target:a.cellNode(U,t),value:w,column:o})}else r.clearCellError(e,t,i.type)})}function I(z,V,U,G){var J=v.rules[U];i=$.fn.validation.ValidationTypes[J.type]||$.fn.validation.ValidationTypes.error,A="",C[i.type]&&(A=C[i.type]),!z&&V&&(A?(A=(/^\u2022/.test(A)?"":"\u2022 ")+A,A+="<br/>".concat("\u2022 ",J.message)):A=J.message,C[i.type]=A),G.resolve()}},showCellError:function(e,t,n,i){var a=this.dataRowNode(e),r=this.cellNode(a,t);if(this.clearNonVisibleCellErrors(e,t,i),!r.length)return this.nonVisibleCellErrors.push({row:e,cell:t,message:n,type:i}),void this.showNonVisibleCellErrors();r.addClass(i).attr("data-".concat(i,"message"),n);var o=r.find(".icon-".concat(i));if(!o.length){r.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(i)],icon:i})));var c={forced:!0,placement:"bottom",content:n,isError:i==="error"||i==="dirtyerror",wrapper:o=r.find(".icon-".concat(i)),y:5};this.cacheTooltip(o,c),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function(){var e=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),this.nonVisibleCellErrors.length===0)this.toolbar&&this.toolbar.parent().find(".table-errors").length===1&&this.toolbar.parent().find(".table-errors").remove(),this.removeToolbar();else{var t=function(){var i=$.fn.validation.ValidationTypes[n].type,a=$.grep(e.nonVisibleCellErrors,function(r){return r.type===i});e.showNonVisibleCellErrorType(a,i)};for(var n in $.fn.validation.ValidationTypes)t()}},removeToolbar:function(){this.toolbar.find(".buttonset").children().length<1&&this.toolbar.find(".title").text().trim().length<1&&(this.toolbar.destroy(),this.toolbar.remove(),delete this.toolbar)},showNonVisibleCellErrorType:function(e,t){var n,i,a,r,o=[],c=$.fn.validation.ValidationTypes[t]||$.fn.validation.ValidationTypes.error;if(this.toolbar.parent().find(".table-errors").length===1&&(i=this.toolbar.parent().find(".table-errors")),e.length!==0){for(r=0;r<e.length;r++){var u=Math.floor((e[r].row+this.settings.pagesize)/this.settings.pagesize);$.inArray(u,o)===-1&&o.push(u)}for(r=0;r<o.length;r++)n="".concat((n?"".concat(n,"<br>"):"")+L.translate(c.pagingMessageID)," ").concat(o[r]);this.toolbar.parent().find(".table-errors").length===0&&(i=$('<div class="table-errors"></div>')),(a=i.find(".icon-".concat(t))).length||(i.append($($.createIcon({classes:["icon-".concat(t)],icon:t}))),a=i.find(".icon-".concat(t))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(i),this.cacheTooltip(a,{forced:!0,placement:"bottom",content:n,isError:t==="error"||t==="dirtyerror",wrapper:a}),this.setupTooltips(!1,!0)}else i&&i.length&&(a=i.find(".icon-".concat(c.type)),this.hideTooltip(),i.find(".icon-".concat(c.type)).remove())},clearAllCellError:function(e,t){var n=$.fn.validation.ValidationTypes;for(var i in n){var a=n[i];this.clearCellError(e,t,a.type)}},clearCellError:function(e,t,n){this.clearNonVisibleCellErrors(e,t,n);var i=this.dataRowNode(e),a=this.cellNode(i,t);a.length&&this.clearNodeErrors(a,n)},clearNonVisibleCellErrors:function(e,t,n){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var i=this.toolbar.parent().find(".table-errors").find(".icon-".concat(n));i.length&&($.grep(this.nonVisibleCellErrors,function(a){return a.type===n?a:""}).length||i.remove())}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(a){return a.row!==e||a.cell!==t||a.type!==n?a:""}),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(e){this.dataRowNode(e).removeClass("error alert rowstatus-row-new rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(e,"","");for(var t=0;t<this.settings.columns.length;t++)this.clearAllCellError(e,t)},clearAllErrors:function(){for(var e=0,t=0;t<this.settings.dataset.length;t++){this.settings.dataset[t].rowStatus&&(delete this.settings.dataset[t].rowStatus,e++);for(var n=0;n<this.settings.columns.length;n++)this.clearAllCellError(t,n)}e>0&&this.render()},clearNodeErrors:function(e,t){var n;(e=e instanceof jQuery?e[0]:e).classList.remove(t),e.removeAttribute("data-".concat(t,"message"));var i=e.querySelector(".icon-".concat(t));(n=e)===null||n===void 0||n==null||n.classList.remove("rowstatus-cell"),i&&(i.parentNode.removeChild(i),this.hideTooltip())},resetRowStatus:function(){for(var e=this.settings.dataset.filter(function(o){return o.rowStatus}),t=0;t<e.length;t++){var n,i,a;if(delete e[t].rowStatus,(n=e[t])!==null&&n!==void 0&&(n=(i=n)==null?void 0:i.children)!==null&&n!==void 0&&((a=n)==null?void 0:a.length))for(var r=0;r<e[t].children.length;r++)delete e[t].children[r].rowStatus}e.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(e){e instanceof jQuery&&e.length<0||e.each(function(t,n){[].slice.call(n.querySelectorAll(".is-dirty-cell")).forEach(function(i){i.classList.remove("is-dirty-cell")})})},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(e){if(this.settings.showDirty&&typeof e=="number"){var t=this.rowNodes(e);this.clearDirtyClass(t),this.dirtyArray&&(this.dirtyArray[e]=void 0)}},clearDirtyCell:function(e,t){this.settings.showDirty&&this.dirtyArray&&typeof e=="number"&&typeof t=="number"&&this.dirtyArray[e]!==void 0&&(this.cellNode(e,t).removeClass("is-dirty-cell"),this.dirtyArray[e][t]=void 0)},dirtyCells:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,n=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=t.length;i<a;i++){var r=this.dirtyArray[i];if(r!==void 0)for(var o=0,c=r.length;o<c;o++){var u=r[o];u!==void 0&&u.isDirty&&n.push(e.treeGrid?t[i].node:t[i])}}return n},dirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,n=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=t.length;i<a;i++){var r=this.dirtyArray[i];if(r!==void 0)for(var o=0,c=r.length;o<c;o++){var u=r[o];if(u!==void 0&&u.isDirty){n.push(e.treeGrid?t[i].node:t[i]);break}}}return n},getModifiedRows:function(e){for(var t=this.settings,n=t.treeGrid?t.treeDepth:t.dataset,i=[],a=0;a<n.length;a++){var r=t.treeGrid?n[a].node:n[a],o={row:a,data:r,cells:[]};if(this.isRowDirty(a)){o.type="dirty";for(var c=0;!e&&c<this.dirtyArray[a].length;c++){var u=this.dirtyArray[a][c];u!==void 0&&u.isDirty&&o.cells.push({row:a,col:c,cellData:u})}}r.rowStatus===void 0||r.rowStatus.icon!=="error"&&r.rowStatus.icon!=="in-progress"||(o.type=o.type==="dirty"?["dirty",r.rowStatus.icon]:r.rowStatus.icon),o.type!==void 0&&i.push(e?r:o)}return i},showRowError:function(e,t,n){var i=n||"error";this.dataRowNode(e).addClass(n),this.rowStatus(e,i,t)},validateRow:function(e){if(e!==void 0)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},validateAll:function(){for(var e=0;e<this.settings.dataset.length;e++)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},columnSettings:function(e){return this.settings.columns[e]||{}},coerceValue:function(e,t,n,i,a){var r;if(n.serialize){var o=this.settings,c=o.treeGrid?o.treeDepth:o.dataset;this.settings.groupable&&(c=this.originalDataset||c);var u=o.treeGrid?c[i].node:c[i];return r=n.serialize(e,t,n,i,a,u)}return n.sourceFormat?r=e instanceof Date?L.parseDate(e,n.sourceFormat):L.formatDate(e,{pattern:n.sourceFormat}):typeof t=="number"&&e&&typeof e!="number"&&!/[A-Za-z!@#$%^&*()_+\-=\[\]{};':"\\|<>/?]/.test(e)&&(r=L.parseNumber(e)),r},updateCell:function(e,t,n){var i=this.columnSettings(t);n===void 0&&(n=this.fieldValue(this.settings.dataset[e],i.field)),this.updateCellNode(e,t,n,!0),this.postRenderCell()},updateColumn:function(e){if(e&&e.length){var t=this,n=t.columnIdxById(e);$.each(t.settings.dataset,function(i,a){t.updateCell(i,n,a[e])})}},updateCellNode:function(e,t,n,i,a){var r,o=this,c=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),u=c.find("td").eq(t),p=this.settings.columns[t]||{},m="",v=p.formatter?p.formatter:this.defaultFormatter,w=$(".editor",u).length>0,C=this.settings.treeGrid,A=C?this.actualPagingRowIndex(this.actualRowIndex(c)):this.dataRowIndex(c);(A==null||isNaN(A))&&(A=e),!C&&this.settings.paging&&this.pagerAPI.activePage>1&&!this.settings.source&&A<(this.pagerAPI.activePage-1)*this.settings.pagesize&&(A+=(this.pagerAPI.activePage-1)*this.settings.pagesize);var S=this.rowData(A);c.length===0&&this.settings.paging&&(u=(c=this.visualRowNode(e)).find("td").eq(t));var M=this.fieldValue(S,p.field,!1);if(r=n,c.length&&S&&!S.rowStatus){var I=c.find("svg.icon-rowstatus");I.length&&I.remove()}if(this.removeTooltipData(u),t===0&&S&&S.rowStatus){var z=u.find("svg.icon-rowstatus");if(c&&u[0]){for(var V=0;V<c.length;V++)c[V].classList.add("rowstatus-row-".concat(S.rowStatus.icon));if(u[0].classList.add("rowstatus-cell"),!z.length){var U=S.rowStatus.icon==="success"?"#icon-check":"#icon-exclamation";u.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat(U,'"></use></svg>'))}}if(S.rowStatus.tooltip){z=u.find("svg.icon-rowstatus");var G=S.rowStatus.icon;this.cacheTooltip(z,{forced:!0,placement:"right",content:S.rowStatus.tooltip,isError:G==="error"||G==="dirtyerror",wrapper:u})}}if(r=_e.unescapeHTML(r),p.field&&r!==M)if(p.field.indexOf(".")>-1){var J=S,te=p.field.split(".").length;p.field.split(".").forEach(function(qe,je){je===te-1?J[qe]=r:J=J[qe]})}else S[p.field]=r;var de=function(qe,je){var lt=(typeof qe=="string"?qe.match(je):[""])||[""];return o.settings.trimSpaces||(lt=lt[0].replace(/\s/g,"&nbsp;")),lt},H=_e.escapeHTML(r),he=w?r:H;typeof he=="string"&&(he="".concat(de(he,/^\s*/)).concat(he.trim()).concat(de(he,/\s*$/))),m=this.formatValue(v,e,t,he,p,S),p.contentVisible&&(p.contentVisible(e,t,H,p,S)||(m=""));var ie,me=u.find(".datagrid-cell-wrapper");if(!a&&me[0]&&(me[0].innerHTML=m,me.children().length===0&&(me.innerText=_e.unescapeHTML(m))),i||(this.validateCell(A,t),this.isDirtyCellUndefined(A,t)||(this.dirtyArray[A][t].value=n,this.dirtyArray[A][t].coercedVal=r,this.dirtyArray[A][t].escapedCoercedVal=_e.escapeHTML(r),this.dirtyArray[A][t].cellNodeText=u.text(),this.dirtyArray[A][t].cell=t,this.dirtyArray[A][t].column=this.settings.columns[t],this.setDirtyCell(A,t))),this.settings.stretchColumnOnChange&&p){var ke=this.calculateTextWidth(p);p.minWidth&&ke<p.minWidth&&(ke=p.minWidth),p.minWidth&&ke>p.maxWidth&&(ke=p.maxWidth),ke>0&&ke-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=ke,this.stretchColumnDiff=0,this.setColumnWidth(p.id,ke,!0))}if(this.settings.rowTemplate){var De=this.settings.rowTemplate,Me=S,Ve="";Xn&&Me&&(Ve=Xn.compile("{{#dataset}}".concat(De,"{{/dataset}}"),{dataset:Me})),u.parent().next().is(".datagrid-expandable-row")&&u.parent().next().find(".datagrid-row-detail-padding").html(Ve)}if(this.settings.summaryRow&&!this.settings.groupable&&this.updateSummaryRow(p,t),typeof M=="string"&&typeof r=="string"){var Ke={oldVal:"".concat(de(M,/^\s*/)).concat(M.trim()).concat(de(M,/\s*$/)),coercedVal:"".concat(de(r,/^\s*/)).concat(r.trim()).concat(de(r,/\s*$/))};ie=Ke.coercedVal!==Ke.oldVal&&!i}else ie=r!==M&&!i;if(ie){var ct={row:this.settings.source!==null?A:e,relativeRow:e,cell:t,target:u,value:r,oldValue:M,column:p,api:this};ct.rowData=C&&this.settings.treeDepth[e]?this.settings.treeDepth[e].node:S,this.isCellDirty(e,t)||this.settings.actionableMode||this.setActiveCell(e,t),this.element.trigger("cellchange",ct),this.wasJustUpdated=!0}},updateSummaryRow:function(e,t){if(e.summaryRowFormatter){var n=this.calculateTotals(),i=this.rowNodes(this.settings.dataset.length).find("td").eq(t),a='<div class="datagrid-cell-wrapper">'.concat(n[e.id],"</div>");i.html(a)}},isRowDirty:function(e){var t=!1;if(typeof e=="number"&&this.dirtyArray&&this.dirtyArray.length){var n=this.dirtyArray[e];if(n!==void 0)for(var i=0,a=n.length;i<a;i++){var r=n[i];if(r!==void 0&&r.isDirty){t=!0;break}}}return t},isCellDirty:function(e,t){return!this.isDirtyCellUndefined(e,t)&&this.dirtyArray[e][t].isDirty},addToDirtyArray:function(e,t,n){this.dirtyArray===void 0&&(this.dirtyArray=[]),this.dirtyArray[e]===void 0?(this.dirtyArray[e]=[],this.dirtyArray[e][t]=n):this.dirtyArray[e][t]===void 0&&(this.dirtyArray[e][t]=n)},setDirtyCell:function(e,t,n){var i=this.cellNode(e,t);n&&this.addToDirtyArray(e,t,n);var a=this.dirtyArray[e][t];!(a.originalVal===a.value||a.originalVal===a.coercedVal||a.originalVal===a.escapedCoercedVal||a.originalVal===a.cellNodeText)||a.originalVal.length!==a.value.length&&a.originalVal.length!==a.cellNodeText.length?(this.dirtyArray[e][t].isDirty=!0,i[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(e,t,!0)):(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1)),(typeof a.originalVal=="string"||a.originalVal instanceof String)&&(a==null||a==null?void 0:a.originalVal)===(a==null||a==null?void 0:a.value)&&(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1))},setDirtyIndicator:function(e,t,n,i){var a=this.cellNode(e,t);i&&this.addToDirtyArray(e,t,i),e<0||t<0||!a.length||(n?a[0].classList.add("is-dirty-cell"):a[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(e,t){return!(this.settings.showDirty&&typeof e=="number"&&typeof t=="number"&&e>-1&&t>-1&&this.dirtyArray!==void 0&&this.dirtyArray[e]!==void 0&&this.dirtyArray[e][t]!==void 0)},visualRowIndex:function(e){var t="tr:visible:not(.is-hidden, .datagrid-expandable-row)",n=this.tableBody.find(t).index(e);return n===-1&&this.tableBodyLeft&&(n=this.tableBodyLeft.find(t).index(e)),n===-1&&this.tableBodyRight&&(n=this.tableBodyRight.find(t).index(e)),n},visualRowNode:function(e){var t=e;return this.settings.paging&&this.settings.source&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(e)?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):$([])},actualRowNode:function(e){return this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodes:function(e){var t=this.element;return e instanceof jQuery&&(t=e.closest(".datagrid-container"),e=e.attr("aria-rowindex")-1),t.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodesByDataIndex:function(e){e instanceof jQuery&&(e=e.attr("data-index"));var t=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(e,'"]')):$(),n=this.tableBody.find('tr[data-index="'.concat(e,'"]')),i=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(e,'"]')):$();return $(n).add(t).add(i)},cellNode:function(e,t){var n=this.settings.groupable?this.rowNodesByDataIndex(e).find("td"):this.rowNodes(e).find("td");return n.eq(t>=n.length?n.length-1:t)},actualRowIndex:function(e){return(e=e instanceof jQuery?e:$(e)).attr("aria-rowindex")-1},pagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},actualPagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t-=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},dataRowNode:function(e){return this.tableBody.find('tr[data-index="'.concat(e,'"]'))},dataRowIndex:function(e){return e=e instanceof jQuery?e:$(e),parseInt(e.attr("data-index"),10)},setActiveCell:function(e,t){var n,i,a,r=this,o=r.activeCell,c=e,u=e instanceof jQuery&&e.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(e instanceof jQuery&&e.length===0||(typeof e=="number"&&(n=e,c=this.settings.treeGrid?this.actualRowNode(e):this.tableBody.find("tr:visible").eq(e),i=this.actualRowIndex(c),a=this.dataRowIndex(c)),e instanceof jQuery&&e.is("td")&&((u=e.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(c=e.parent()),t=e.attr("aria-colindex")-1,n=this.visualRowIndex(e.parent()),i=this.actualRowIndex(e.parent()),a=this.dataRowIndex(e.parent()),c=e.parent()),e instanceof jQuery&&e.is("tr")&&(n=this.visualRowIndex(e),i=this.actualRowIndex(e),a=this.dataRowIndex(e),c=e),n<0||t<0))){o.node&&o.node.length===1&&r.activeCell.node.removeAttr("tabindex").removeClass("is-active"),o.cell===t&&o.row===e||r.hideTooltip(),r.activeCell.node=r.cellNode(u||c?c:i>-1?i:n,t).attr("tabindex","0"),r.activeCell.node&&o.node.length===1?(r.activeCell.row=n,r.activeCell.cell=t,i=this.actualRowIndex(r.activeCell.node.parent()),a=this.dataRowIndex(r.activeCell.node.parent())):r.activeCell=o,(!$("input:not(.colorpicker), select, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",r.activeCell.node).length||r.activeCell.node.is(".has-btn-actions")&&r.activeCell.node.find(".btn-actions").length)&&(r.activeCell.node.focus(),u&&(r.activeCell.groupNode=r.activeCell.node)),r.activeCell.node.is(".is-focusable")&&r.activeCell.node.find("button").focus(),a!==void 0&&(r.activeCell.dataRow=a),i!==void 0&&(r.activeCell.rowIndex=i);var p=+c.find("td[colspan]").attr("colspan");if(u&&r.activeCell.node&&o.node&&!(e instanceof jQuery&&e.is("td"))&&(t<p?(c.find("td[colspan]").attr("tabindex","0").focus(),r.activeCell.groupNode=c.find("td[colspan]")):t>=p?(c.find("td").eq(t-p+1).attr("tabindex","0").focus(),r.activeCell.groupNode=c.find("td").eq(t-p+1)):(c.find("td").eq(t).attr("tabindex","0").focus(),r.activeCell.groupNode=c.find("td").eq(t))),u&&e instanceof jQuery&&e.is("td")&&(r.activeCell.cell=p-1+t,e.is("[colspan]")&&(r.activeCell.cell=t)),this.settings.cellNavigation){var m=r.headerNodes(),v=0;this.hasColSpans&&(v=0,m.eq(t).prevAll("[colspan]").each(function(C,A){var S=$(A).attr("colspan")-1;v+=S}),t-=v),this.settings.activeCheckboxSelection&&(m.removeClass("is-active"),m.eq(t).addClass("is-active"))}this.activeCell.isFocused=!0;var w=this.settings.columns[t];w&&w.expandOnActivate&&this.activeCell&&this.activeCell.node&&r.activeCell.node.addClass("is-active"),r.element.trigger("activecellchange",{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell,api:r})}},setNextActiveCell:function(e){var t=this;if(e.type==="keydown")if(this.settings.actionableMode){var n=e.keyCode===13?40:e.keyCode;if(n===32)return;setTimeout(function(){var i=$.Event("keydown.datagrid");i.keyCode=n,t.activeCell.node.trigger(i)},0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(e,t){if(!(!t||t&&!t.length||e<0)){var n=this.settings.treeDepth[e].node;n.children=n.children||[];for(var i=0,a=(t=JSON.parse(JSON.stringify(t))).length;i<a;i++)n.children.push(t[i]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(e,t){this.settings.treeDepth[e].node.expanded=t},toggleChildren:function(e,t){if(!this.settings.groupable){var n=this,i=this.settings,a=this.rowNodes(t),r=a.find(".datagrid-expand-btn"),o=parseInt(a.attr("aria-level"),10),c=r.hasClass("is-expanded"),u=[{grid:n,row:t,item:a}];if(n.settings.treeDepth&&n.settings.treeDepth[t]&&(u[0].rowData=n.settings.treeDepth[t].node),a.hasClass("datagrid-tree-parent")&&($(e.target).is(r)||!n.settings.editable&&!n.settings.selectable)){var p=function(){a=n.rowNodes(t),r=a.find(".datagrid-expand-btn");var v=a.nextUntil('[aria-level="'.concat(o,'"]')),w=n.settings.treeGrid&&n.settings.source&&n.settings.paging?n.dataRowIndex(a):t;c?(a.attr("aria-expanded",!1),r.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(a.attr("aria-expanded",!0),r.addClass("is-expanded").find(".plus-minus").addClass("active")),n.setExpandedInDataset(w,!c),function C(A,S,M){var I=A.nextUntil('[aria-level="'.concat(S,'"]'));M?I.each(function(){var z=$(this);parseInt(z.attr("aria-level"),10)>S&&z.addClass("is-hidden")}):I.each(function(){var z=$(this),V=parseInt(z.attr("aria-level"),10);if(V===S+1){if(!z.hasClass("is-filtered")&&(z.removeClass("is-hidden"),n.settings.frozenColumns)){var U=z.attr("aria-rowindex");n.tableBody.find('[aria-rowindex="'.concat(U,'"]')).removeClass("is-hidden")}if(z.is(".datagrid-tree-parent")){var G=z.find(".datagrid-expand-btn.is-expanded").length>0;G&&C(z,V,!G)}}})}(a,o,c),n.setAlternateRowShading(),u.children=v},m=c?"collapserow":"expandrow";$.when(n.element.triggerHandler(m,u)).done(function(v){var w=function(C){return typeof C=="string"&&C.toLowerCase()==="false"||typeof C=="boolean"&&C===!1||typeof C=="number"&&C===0};w(v)||(typeof i.onExpandChildren!="function"||c?typeof i.onCollapseChildren=="function"&&c?$.when(i.onCollapseChildren(u[0])).done(function(C){w(C)||p()}):p():$.when(i.onExpandChildren(u[0])).done(function(C){w(C)||p()}))})}}},toggleRowDetail:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this,i=n.rowNodes(e);!i.length&&n.settings.paging&&(n.settings.rowTemplate||n.settings.expandableRow)&&(e+=(n.pagerAPI.activePage-1)*n.settings.pagesize,i=n.dataRowNode(e));var a=i.next(),r=i.find(".datagrid-expand-btn"),o=a.find(".datagrid-row-detail"),c=n.settings.dataset[n.dataRowIndex(i)];if(!i.hasClass("datagrid-tree-parent")){if(n.settings.allowOneExpandedRow&&n.settings.groupable===null){var u=n.tableBody.add(n.tableBodyLeft).add(n.tableBodyRight).find("tr.is-expanded"),p=u.prev().find(".datagrid-expand-btn"),m=u.prev(),v=n.actualRowNode(m),w=n.dataRowIndex(m);if(u.length&&a.index()!==u.index()){var C=u.find(".datagrid-row-detail");u.add(p).removeClass("is-expanded"),m.removeClass("is-rowactivated"),m.find(".plus-minus").removeClass("active"),C.animateClosed().on("animateclosedcomplete",function(){u.removeClass("is-expanded"),n.element.triggerHandler("collapserow",[{grid:n,row:v,detail:C,item:n.settings.dataset[w]}])});var A=u.prev().find(".btn-primary");A.length&&A.attr("class",A.attr("class").replace("btn-primary","btn-secondary"))}var S=!a.hasClass("is-expanded"),M=a.prev().find(S?".btn-secondary":".btn-primary");if(c.expanded=!1,M.length>0&&m&&M){var I=M.attr("class")||"";M.attr("class",I.replace(S?"btn-secondary":"btn-primary",S?"btn-primary":"btn-secondary"))}}if(a.hasClass("is-expanded")&&!t)o.one("animateclosedcomplete",function(){a.removeClass("is-expanded")}).animateClosed(),r.removeClass("is-expanded").find(".plus-minus").removeClass("active"),n.settings.allowOneExpandedRow&&i.removeClass("is-rowactivated"),c.expanded=!1,n.element.triggerHandler("collapserow",[{grid:n,row:e,detail:o,item:c}]);else if(c){a.addClass("is-expanded"),r.addClass("is-expanded").find(".plus-minus").addClass("active"),c.expanded=!0,a.find(".constrained-width").css("max-width",this.element.outerWidth());var z=[{grid:n,row:e,detail:o,item:c}];if(n.element.triggerHandler("expandrow",z),n.settings.allowOneExpandedRow&&this.settings.selectable!=="multiple"&&i.addClass("is-rowactivated"),n.settings.onExpandRow?n.settings.onExpandRow(z[0],function(G){G&&o.find(".datagrid-row-detail-padding").empty().append(G),n.adjustExpandRowHeight(o),o.animateOpen()}):(n.adjustExpandRowHeight(o),o.animateOpen()),n.settings.frozenColumns.expandRowAcrossAllCells&&n.frozenExpandRowAcrossAllCells(),n.settings.frozenColumns.left.length||n.settings.frozenColumns.right.length){var V={left:o.eq(0)[0],center:o.eq(1)[0],right:o.eq(2)[0]},U={theme:"themechanged.".concat(Oa),rowheight:"rowheightchanged.".concat(Oa)};$("html").off(U.theme).on(U.theme,function(){n.frozenExpandRowSetHeight(V)}),n.element.off(U.rowheight).on(U.rowheight,function(){n.frozenExpandRowSetHeight(V)})}}}},adjustExpandRowHeight:function(e){if(e.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var t={left:e.eq(0)[0]?e.eq(0)[0].children[0]:null,center:e.eq(1)[0],right:e.eq(2)[0]?e.eq(2)[0].children[0]:null},n=0;t.center&&(t.center.style.height="auto",n=t.center.offsetHeight-1,t.center.style.height=""),n>0&&(t.left&&(t.left.style.height="".concat(n,"px")),t.right&&(t.right.style.height="".concat(n,"px")))}},frozenExpandRowSetHeight:function(e){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t=0;if(e&&e.center&&(e.padding=e.center.querySelector(".datagrid-row-detail-padding"),t=e.padding.offsetHeight),t&&(e.center.style.height="".concat(t,"px"),e.left&&(e.left.style.height="".concat(t,"px")),e.right&&(e.right.style.height="".concat(t,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var n={container:this.element[0].getBoundingClientRect(),centerEl:e.center.getBoundingClientRect()},i="".concat(n.centerEl.top-n.container.top,"px");e.padding.style.top=i}}},frozenExpandRowAcrossAllCells:function(){var e=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t={row:".datagrid-expandable-row.is-expanded"};t.detail="".concat(t.row," > td .datagrid-row-detail"),t.padding="".concat(t.detail," .datagrid-row-detail-padding");var n={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},i={rows:{left:n.left?n.left.querySelector(t.row):null,center:n.center?n.center.querySelector(t.row):null,right:n.right?n.right.querySelector(t.row):null},details:{left:n.left?n.left.querySelector(t.detail):null,center:n.center?n.center.querySelector(t.detail):null,right:n.right?n.right.querySelector(t.detail):null},padding:this.tableBody[0].querySelector(t.padding)};if(i.padding&&(i.details.left||i.details.right)){var a="is-expanded-frozen";i.padding.style.opacity="0",i.rows.left&&i.rows.left.classList.add(a),i.rows.right&&i.rows.right.classList.add(a),$(i.details.center).one("animateopencomplete.datagrid.expandedfrozen",function(){(i.details.left||i.details.right)&&setTimeout(function(){i.rows.center.classList.add(a),e.frozenExpandRowSetHeight(i.details),i.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",function(){e.frozenExpandRowSetHeight(i.details)})},10)}).one("animateclosedstart.datagrid.expandedfrozen",function(){$(window).off("resize.datagrid.expandedfrozen"),i.padding.style.opacity="0",i.padding.style.top="",i.rows.center.classList.remove(a),i.rows.left&&i.rows.left.classList.remove(a),i.rows.right&&i.rows.right.classList.remove(a)}).one("animateclosedcomplete.datagrid.expandedfrozen",function(){i.padding.style.opacity=""})}}},toggleGroupChildren:function(e){if(this.settings.groupable){var t=this,n=e.index(),i=$(),a=$(),r=$();this.hasLeftPane&&(i=this.tableLeft.find("tbody tr").eq(n).nextUntil(".datagrid-rowgroup-header")),a=this.table.find("tbody tr").eq(n).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(r=this.tableRight.find("tbody tr").eq(n).nextUntil(".datagrid-rowgroup-header"));var o=e.find(".datagrid-expand-btn");e.hasClass("is-expanded")?(o.removeClass("is-expanded").find(".plus-minus").removeClass("active"),i.hide(),i.addClass("is-hidden"),a.hide(),a.addClass("is-hidden"),r.hide(),r.addClass("is-hidden"),t.element.triggerHandler("collapserow",[{grid:t,row:e.index(),detail:a,item:{}}]),e.removeClass("is-expanded")):(o.addClass("is-expanded").find(".plus-minus").addClass("active"),i.show(),i.removeClass("is-hidden"),a.show(),a.removeClass("is-hidden"),r.show(),r.removeClass("is-hidden"),t.element.triggerHandler("expandrow",[{grid:t,row:e.index(),detail:a,item:{}}]),e.addClass("is-expanded"))}},setSortColumn:function(e,t){var n=!0;if(t!==void 0?(this.sortColumn.sortAsc===t&&this.sortColumn.sortId===e&&(n=!1),this.sortColumn.sortAsc=t):(this.sortColumn.sortId===e?this.sortColumn.sortAsc=!this.sortColumn.sortAsc:this.sortColumn.sortAsc=!0,t=this.sortColumn.sortAsc),this.sortColumn.sortId=e,this.sortColumn.sortField=this.columnById(e)[0]?this.columnById(e)[0].field:e,this.sortColumn.sortAsc=t,this.setSortIndicator(e,t),n&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),n){var i=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),i&&this.activeCell.node.length===1&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].column==="all"&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var e=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(e),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,i=t.length;n<i;n++)this.dirtyArray[n]!==void 0&&((e.treeGrid?t[n].node:t[n]).tempNodeIndex=n)},restoreDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var n=[],i=0,a=t.length;i<a;i++){var r=e.treeGrid?t[i].node:t[i];r.tempNodeIndex!==void 0&&(n.push({newIdx:i,oldIdx:r.tempNodeIndex}),delete r.tempNodeIndex)}for(var o=[],c=0,u=n.length;c<u;c++)o[n[c].newIdx]=this.dirtyArray[n[c].oldIdx];this.dirtyArray=o}},syncDatasetWithSelectedRows:function(){var e,t=this,n=this.settings;if(!(n.source&&n.paging&&n.allowSelectAcrossPages&&(e=n.columnIds)!==null&&e!==void 0&&e?.length)){this._selectedRows=[];for(var i,a=n.treeGrid?n.treeDepth:n.dataset,r=-1,o=function(u,p){if(n.groupable&&!t.originalDataset)for(var m=0;m<Object.keys(a[p]).length;m++)r++,u=Object.keys(a[p]).map(function(v){return a[p][v]}),t.isRowSelected(u)&&t._selectedRows.push({idx:r,data:u,elem:t.dataRowNode(r),group:a[p],page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:r,pagesize:t.settings.pagesize});else u=n.treeGrid?a[p].node:a[p],t.isRowSelected(u)&&t._selectedRows.push({idx:p,data:u,elem:t.visualRowNode(p),pagesize:t.settings.pagesize,page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:p});i=u},c=0;c<a.length;c++)o(i,c)}},setSortIndicator:function(e,t){this.headerRow&&(this.sortColumn={sortId:e,sortAsc:t,sortField:this.columnById(e)[0]?this.columnById(e)[0].field:e},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(e,'"]')).addClass(t?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",t?"ascending":"descending"))},sortFunction:function(e,t){var n=this.columnById(e),i=n.length===0?null:n[0],a=i===null?e:i.field,r=this,o=function(c){return typeof(u=(u=r.fieldValue(c,a))==null?"":u)=="string"&&(u=u.toUpperCase(),$.isNumeric(u)&&(u=parseFloat(u))),u;var u};return i&&i.sortFunction&&(o=function(c){return i.sortFunction(r.fieldValue(c,a))}),t=t?1:-1,function(c,u){return c=o(c),u=o(u),typeof c=="number"&&typeof u=="string"&&u!==""?-1*t:typeof c=="string"&&typeof u=="number"&&c!==""?t:c===""?u===""?0:1:u===""?c===""?0:-1:(at(c)!==at(u)&&(c=c.toString().toLowerCase(),u=u.toString().toLowerCase()),t*((c>u)-(u>c)))}},defaultFormatter:function(e,t,n,i,a,r){if(arguments.length>6&&arguments[6]!==void 0&&arguments[6]){var o=parseFloat(n);if(isNaN(o)){var c=Date.parse(n);isNaN(c)||(n=L.formatDate(c))}else n=L.formatNumber(o,{style:Number.isInteger(o)?"integer":"decimal"})}return n==null||n===""?"":n.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(e,t,n){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,e.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(e,t),t||this.triggerSource(e,n),this.syncSelectedUI())},getPageableElements:function(){var e=this.element.children().not(".datagrid-expandable-row");return e.is("table")&&(e=e.find("tbody tr")),e},appendTooltip:function(e){var t=this,n="grid-tooltip",i=new RegExp("\\b".concat(n,"\\b"),"g");typeof e=="string"?i.test(e)||(e+=" ".concat(n)):e=n;var a=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(a),!this.tooltip){var r=""+'<div id="'.concat(a,'" class="tooltip ').concat(e,` is-hidden">
          <div class="arrow"></div>
          <div class="tooltip-content"></div>
        </div>`);document.body.insertAdjacentHTML("beforeend",r),this.tooltip=document.getElementById(a),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",function(){t.hideTooltip()}))}},cacheTooltip:function(e,t){if($(e).attr("disabletooltip")!==void 0)return t;if(t===void 0){var n,i,a,r,o=e.querySelector(".is-editor.content-tooltip"),c=e.querySelector("a[title]"),u=ue.hasClass(e,"rowstatus-cell"),p=e.tagName.toLowerCase()==="svg",m=e.classList.contains("datagrid-header-icon"),v=e.tagName.toLowerCase()==="th",w=ue.hasClass(e,"datagrid-column-wrapper"),C=ue.hasClass(e.parentNode,"datagrid-filter-wrapper"),A=e.getAttribute("aria-colindex")-1,S=this.columnSettings(A),M=$(".grid-tooltip");(t={content:"",wrapper:e.querySelector(".datagrid-cell-wrapper")}).extraClassList=[];var I=$(e).index();if(w){var z=$(e).attr("data-column-id");r=this.settings.columns[this.columnIdxById(z)]}else{var V=$(e).closest("table").find("thead > tr > th").eq(I).attr("data-column-id");r=this.settings.columns[this.columnIdxById(V)]}if((v||w||C||m)&&(t.wrapper=e,t.distance=C||m?15:null,t.placement=w||m?"top":"bottom"),u||p&&!m){var U=this.closest(e,function(Fe){return ue.hasClass(Fe,"datagrid-row")}),G=U?U.classList:[];t.isError=G.contains("rowstatus-row-error"),t.placement="right",p&&(t.wrapper=this.closest(e,function(Fe){return Fe.tagName.toLowerCase()==="td"}))}if(o){var J=!(!S.editorOptions||!S.editorOptions.width)&&this.setUnit(S.editorOptions.width),te=$(o).clone()[0];te.style.width=J||"".concat(e.offsetWidth,"px");var de=te.outerHTML;_e.stripHTML(de)!==""&&(t.content=de,t.extraClassList=["popover","alternate","content-tooltip"])}else if(c)t.content=c.getAttribute("title"),c.removeAttribute("title");else if(a=e.getAttribute("title")){var H=e.querySelector(".row-btn[disabled]");t.content=H?"":a,e.removeAttribute("title")}else if(v&&!C){var he=e.querySelector(".datagrid-header-text");t.content=he?_e.stripHTML(he.textContent):""}else if(C){if(!(e.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var ie=e.parentNode.querySelector(".is-checked");t.content=ie?_e.stripHTML(ie.textContent):""}}else if(m){var me=$(e).parents("th").attr("data-column-id"),ke=e.previousElementSibling.textContent,De=this.settings.columns[this.columnIdxById(me)].headerIconTooltip;t.content=_e.stripHTML(De),t.headerText=_e.stripHTML(ke)}else t.wrapper.querySelector(".datagrid-expand-btn")?Array.prototype.filter.call(t.wrapper.children,function(Fe){return!Fe.matches(".datagrid-expand-btn")}).forEach(function(Fe){t.content=Fe.textContent}):t.content=t.wrapper.textContent,t.content=_e.stripHTML(t.content).trim();var Me=e.getAttribute("tooltipClass");Me&&t.extraClassList.push(Me);var Ve=(n=t.wrapper)===null||n===void 0||n==null?void 0:n.querySelector("select");if(Ve&&Ve.selectedIndex&&Ve.options[Ve.selectedIndex]&&Ve.options[Ve.selectedIndex].innerHTML&&(t.content=Be.features.touch?"":Ve.options[Ve.selectedIndex].innerHTML.trim()),v&&(t.content=t.content.trim()),t.content!==""){var Ke=ue.hasClass(w?e.parentNode:e,"text-ellipsis"),ct=[].slice.call(e.querySelectorAll(".icon")),qe=Ke?8:0;if(ct.forEach(function(Fe){var En=typeof Fe.getBBox=="function"?Fe.getBBox():Fe.getBoundingClientRect();qe+=En.width+8}),this.settings.treeGrid){var je=function(Fe){return!!t.wrapper.querySelector(Fe)};if(je(".datagrid-tree-node")||je(".datagrid-expand-btn")){var lt=this.closest(t.wrapper,function(Fe){return ue.hasClass(Fe,"datagrid-row")}),xt=parseInt(lt.getAttribute("aria-level"),10);xt&&(qe+=30*xt)}}if(Ke&&w){var sn=e.querySelector(".datagrid-header-text");t.textwidth=sn.scrollWidth+(Ve?0:qe)}else t.textwidth=ot.textWidth(t.content)+(Ve?0:qe);if(v&&(t.textwidth=ot.textWidth(t.content)),M){var Xt=M.attr("id");M.attr("data-automation-id","".concat(Xt,"-grid-tooltip")),$(this.tooltip).find(".tooltip-content").attr("data-automation-id","".concat(Xt,"-content"))}if(t.content=o?t.content:"<p>".concat(t.content,"</p>"),m){var yn=e.previousElementSibling.textContent;t.content='<p class="align-text-left text-strong">'.concat(yn,"</p>").concat(t.content)}(a||C||m)&&(t.forced=!0)}if(typeof S.tooltip=="function"){var qn,Rn,Ln=this.closest(e,function(Fe){return ue.hasClass(Fe,"datagrid-row")});this.settings.treeGrid&&this.settings.treeDepth?(qn=this.actualRowIndex(Ln),Rn=this.settings.treeDepth[qn].node):(qn=this.dataRowIndex(Ln),Rn=this.rowData(qn));var bt=this.fieldValue(Rn,S.field);t.content=S.tooltip(qn,A,bt,S,Rn,this),t.textwidth=ot.textWidth(t.content)+20,t.content!==void 0&&t.content!==null&&t.content!==""&&(t.forced=!0)}(i=r)!==null&&i!==void 0&&i?.tooltipOptions&&(r.tooltipOptions.placement&&(t.placement=r.tooltipOptions.placement),r.tooltipOptions.x&&(t.x=r.tooltipOptions.x),r.tooltipOptions.y&&(t.y=r.tooltipOptions.y))}return(e=e instanceof jQuery?e:$(e)).data("gridtooltip",t),t},showTooltip:function(e){var t=this;if(this.tooltip){var n=$(this.tooltip),i=this.tooltip.querySelector(".tooltip-content");if(i){var a;i.innerHTML=_e.sanitizeHTML(e.content),this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(e.placement||"top"),e.isError&&this.tooltip.classList.add("is-error"),e.extraClassList&&e.extraClassList.length>0&&e.extraClassList.map(function(u){return t.tooltip.classList.add(u)});var r=(a=e.wrapper.classList)===null||a===void 0||a==null?void 0:a.contains("datagrid-header-icon");i.classList[r?"add":"remove"]("header-icon");var o=typeof e.distance=="number"?e.distance:0,c={x:e.x||0,y:e.y||o,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:e.wrapper.offsetLeft,containerOffsetY:e.wrapper.offsetTop,parent:$(e==null||e==null?void 0:e.wrapper),placement:e.placement||"top",strategies:["flip","nudge"]};c.placement!=="left"&&c.placement!=="right"||(c.x=o,c.y=0),n.one("afterplace.gridtooltip",function(u,p){t.handleAfterPlaceTooltip(u,n,p)}).on("click.gridtooltip",function(){t.hideTooltip()}),n.data("place")||n.place(c),n.data("place").place(c),n.data("gridtooltip",!0),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",function(){t.hideTooltip()})}}},handleAfterPlaceTooltip:function(e,t,n){var i=t||$("#tooltip");i[0]&&(i.data("place").setArrowPosition(e,n,i),i.triggerHandler("tooltipafterplace",[n]))},hideTooltip:function(){var e=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",function(){e.hideTooltip()})},isGridtooltip:function(){var e=!1;return this.tooltip&&(this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(e=!0),e},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("gridtooltip")&&$.removeData(e[0],"gridtooltip")},removeTooltip:function(){var e=this;if(this.tooltip){var t=$(this.tooltip),n={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};n.str="".concat(n.th,", ").concat(n.td,", ").concat(n.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),t.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",n.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var i=t.data("place");i&&i.destroy(),[].slice.call(this.element[0].querySelectorAll(n.str)).forEach(function(a){return e.removeTooltipData(a)}),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){var e,t,n,i=this.element.prev(".toolbar, .contextual-toolbar");i=i.add(i.find("*"));var a=this.element.next(".pager-toolbar");a=a.add(a.find("*")),this.element.add(i).add(a).find("*").each(function(p,m){Object.values($(m).data()).forEach(function(v){typeof(v==null||v==null?void 0:v.destroy)=="function"&&v.destroy()})}),(e=this.canvas)===null||e===void 0||(e=e?.parentNode)===null||e===void 0||(t=e?.removeChild)===null||t===void 0||(n=t.call)==null||n.call(t,e,this.canvas),this.canvas=null,this.removeTooltip(),$("html").off("themechanged.".concat(Oa)),this.element.find(".datagrid-img").off("error.datagrid"),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat(Oa," pagesizechange.").concat(Oa)),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var r=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var o=r.find(".searchfield"),c=o.data("searchfield"),u=o.parent().find(".close.icon");o.off("keypress.datagrid"),u.off("click.datagrid"),c&&typeof c.destroy=="function"&&c.destroy(),o.removeData("options")}return this.removeToolbarOnDestroy&&(r.data("toolbar")&&r.data("toolbar").destroy(),r.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],Oa),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid resize.frozencolumns"),$("body").off("open.modal.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(e,t){var n=this.settings.paging!==(e==null||e==null?void 0:e.paging)&&(e==null||e==null?void 0:e.paging)&&!t;if(this.settings=N.mergeSettings(this.element,e,this.settings),e!=null&&e?.paging||!this.pagerAPI||typeof this.pagerAPI.destroy!="function"||this.pagerAPI.destroy(),e&&e.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),e&&e.dataset&&(this.settings.dataset=e.dataset),e&&e.columns&&(this.settings.columns=e.columns),e&&e.toolbar&&!this.toolbar&&this.appendToolbar(),e&&e.toolbar&&this.toolbar&&this.toolbar.hasClass("datagrid-toolbar")){var i=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),a=this.toolbar.data("toolbar")?this.toolbar.data("toolbar"):this.toolbar.data("toolbarFlex");a&&a.destroy(),i.remove(),this.appendToolbar()}return this.setRowHeightClass(),this.handlePaging(),this.attachPagingEvents(),this.render(null,t,n),this.renderHeader(),this}},$.fn.datagrid=function(e){return this.each(function(){var t=$.data(this,Oa);t?t.updated(e):t=$.data(this,Oa,new qs(this,e))})};var To="formcompact",Np={},ph="is-focused";function iu(e,t){if(!(e instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=N.mergeSettings(e,t,Np),this.element=e,this.init()}iu.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=N.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var e=this;if(this.inputs&&this.inputs.length){var t=["disabled","readonly"];this.inputs.forEach(function(n){t.forEach(function(i){e.setState(i,n)})})}},handleEvents:function(){var e=this;$(this.form).on("focusin.".concat(To),"input",function(i){return e.handleFocusIn(i)}).on("focusout.".concat(To),"input",function(i){return e.handleFocusOut(i)});var t=["disabled","readonly"];this.inputsObserver=new MutationObserver(function(i){i.length&&i.forEach(function(a){a.type==="attributes"&&t.indexOf(a.attributeName)>-1&&e.setState(a.attributeName,a.target)})});var n={attributes:!0};this.inputs.forEach(function(i){e.inputsObserver.observe(i,n)})},handleFocusIn:function(e){ue.parents(e.target,".column, .columns",!0).classList.add(ph)},handleFocusOut:function(e){ue.parents(e.target,".column, .columns",!0).classList.remove(ph)},setState:function(e,t){if(typeof e=="string"&&t instanceof HTMLElement&&!(["checkbox","radio"].indexOf(t.type)>-1)){e==="readonly"&&(e="readOnly");var n=t[e]===!0?"add":"remove";t.parentNode.classList[n]("is-".concat(e.toLowerCase()))}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat(To),"focusout.".concat(To)].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,To)}},$.fn.formcompact=function(e){return this.each(function(){var t=$.data(this,To);t?t.updated(e):t=$.data(this,To,new iu(this,e))})};var Zn="header",au={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function su(e,t){this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,au),this.init()}su.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return Pn("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var e=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(e=".toolbar-section:first-child > button"),this.element.find(e)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?this.element.attr("data-demo-options")==="true":this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?this.element.attr("data-use-backbutton")==="true":this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?this.element.attr("data-use-breadcrumb")==="true":this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?this.element.attr("data-use-alternate")==="true":this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var e=!1,t=this.element.find(".toolbar, .flex-toolbar");if(!t.length)return this;t.is(".flex-toolbar")&&(e=!0),this.toolbarElem=t;var n=this.settings.toolbarSettings;if(this.toolbarElem[e?"toolbarflex":"toolbar"](n),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var i=$(this.element),a=$(this.element).next(".scrollable"),r=a.length===1?a:$(window),o=this.settings.scrollThreshold?this.settings.scrollThreshold:15;r.on("scroll.header",function(){this.scrollTop>o?i.addClass("is-scrolled-down"):i.removeClass("is-scrolled-down")}),r.scrollTop()>o&&i.addClass("is-scrolled-down")}return this},personalizationColors:function(e){return Object.values(e).reduce(function(t,n){var i=n.id;return t[i]=i,t},{})},removeClasses:function(e,t){if(!e||!t)return!1;var n=e.classList;if(n)if(typeof t=="string")n.remove(t);else{if(!Array.isArray(t))throw new TypeError("Classes parameter must be a string or an array of strings.");t.forEach(function(i){return n.remove(i)})}return!0},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var e=$(`<button class="btn-icon back-button" type="button">
        <span class="audible">`.concat(L.translate("Drillup"),`</span>
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-arrow-left"></use>
        </svg>
      </button>`)),t=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var n=t.prev(".toolbar-section");n.length||(n=$('<div class="toolbar-section"></div>').insertBefore(t)),e.prependTo(n)}else e.prependTo(t);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var i=$("#application-menu").data("applicationmenu");i?i.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},getCurrentBreadcrumbData:function(){var e=this;function t(){var n=this.index,i=e.breadcrumbAPI.list;if(!this.current)if(n!==0){var a,r=i.childNodes.length-1;if(n<r)for(a=r-n;a>0;)e.drillup(),e.breadcrumbAPI.remove(r,!1,!0),a-=1,r-=1;e.breadcrumbAPI.render()}else e.reset()}return this.levelsDeep.map(function(n,i){var a="header-breadcrumb-".concat(n.replace(" ","-").toLowerCase());return{callback:t,content:n,current:i+1===e.levelsDeep.length,id:a}})},buildBreadcrumb:function(){var e="has-breadcrumb",t="default";this.settings.useAlternate&&(e="has-alternate-breadcrumb",t="alternate"),this.element.addClass(e),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.breadcrumb({breadcrumbs:this.getCurrentBreadcrumbData(),style:t}),this.breadcrumbAPI=this.breadcrumb.data("breadcrumb")),this.adjustBreadcrumb()},adjustBreadcrumb:function(){this.breadcrumbAPI&&this.breadcrumbAPI.updated({breadcrumbs:this.getCurrentBreadcrumbData()})},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var e=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(e)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var e=$('<div class="wizard-header"></div>').appendTo(this.wizard),t=$('<div class="bar"></div>').appendTo(e);$('<div class="completed-range"></div>').appendTo(t),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(t)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var e=this.toolbarElem.children(".title");if(this.titlePopup=e.find(".btn-menu"),!this.titlePopup.length){var t=e.find("h1");t.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=t.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var n=this.titlePopupMenu.children(".is-checked").first().text();n||(n=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(n),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(Zn),function(n,i){t.updated(i)}).on("reset.".concat(Zn),function(){t.reset()}).on("drilldown.".concat(Zn),function(n,i){t.drilldown(i)}).on("drillup.".concat(Zn),function(n,i){t.drillup(i)}),$("html").on("themechanged.".concat(Zn),function(){e.updatePageChanger()}),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat(Zn),function(n,i){var a;a=i instanceof $?i.text():$(i.element).text(),$(this).children("h1").text(a)}),this},handleTitleButtonEvents:function(){var e=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat(Zn),function(t){e.levelsDeep.length>1&&(t.stopImmediatePropagation(),e.drillup(),t.returnValue=!1)})},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var e=this.changer.data("popupmenu").menu,t=e.find("li.personalization-colors");if(t.length>0){var n=ft.personalizationColors(),i=t.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach(function(c){return i+='<li class="is-selectable'.concat(n[c].name==="Default"?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[c].value,'">').concat(n[c].name,"</a></li>"),c}),t.replaceWith(i)}this.changer.on("selected.header",function(c,u){c.preventDefault(),u!==void 0&&!(u instanceof $)&&u.element instanceof HTMLElement&&(u=$(u.element));var p=u.attr("data-theme-name"),m=u.attr("data-theme-mode");if(p||m){var v=e.find(".is-checked a[data-theme-name]").attr("data-theme-name"),w=e.find(".is-checked a[data-theme-mode]").attr("data-theme-mode");v&&w&&Vi.setTheme("".concat(v,"-").concat(w))}else{var C=u.attr("data-theme");if(C)Vi.setTheme(C);else if(u.parent().hasClass("is-default"))Vi.setColorsToDefault();else{var A=u.attr("data-rgbcolor");Vi.setColors(A)}}});var a=ft.currentTheme;if(a.id!=="theme-new-light"||a.id!=="theme-uplift-light"){var r=a.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(r[0],"-").concat(r[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-mode]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-mode="'.concat(r[2],'"]')).parent().addClass("is-checked")}if(Vi.settings.colors){var o=at(Vi.settings.colors)==="object"?Vi.settings.colors.header:Vi.settings.colors;o=o.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(o,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&this.changer.length!==0)for(var e=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),t=ft.personalizationColors(),n=Object.keys(t),i=0;i<e.length;i++)e[i].setAttribute("data-rgbcolor",t[n[i]].value)},drilldown:function(e){this.element.addClass("is-drilldown"),this.levelsDeep.push(e.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(e){var t;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),t=this.levelsDeep[this.levelsDeep.length-1]),e!==void 0&&(t=e),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(t);t=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(t),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var e=$("#application-menu").data("applicationmenu");e&&e.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat(Zn)).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var e,t=this,n=$.fn.transitionEndName();t.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(n,".breadcrumb-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".breadcrumb-header")),t.breadcrumbAPI.destroy(),t.breadcrumb.remove(),delete t.breadcrumbAPI,delete t.breadcrumb}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var e,t=this,n=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(n,".tabs-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".tabs-header")),t.tabsContainer.data("tabs").destroy(),t.tabsContainer.remove(),t.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var e,t=this,n=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(n,".wizard-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".wizard-header")),t.wizard.data("wizard").destroy(),t.wizard.remove(),t.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat(Zn)),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat(Zn)),this.element.off(["updated.".concat(Zn),"reset.".concat(Zn),"drilldown.".concat(Zn),"drillup.".concat(Zn)].join(" ")),$("html").off("themechanged.".concat(Zn)),this},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var e=this.changer.data("popupmenu");e&&typeof e.destroy=="function"&&e.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],Zn)}},$.fn.header=function(e){return this.each(function(){var t=$.data(this,Zn);t?t.updated(e):t=$.data(this,Zn,new su(this,e))})};var pr="multitabs",ru={tabContainers:[],sortable:!1},Xl=["primary","secondary","tertiary"];function ou(e,t){return this.element=$(e),this.settings=N.mergeSettings(this.element[0],t,ru),this.tabContainers={},this.init()}ou.prototype={init:function(){var e=this,t=[];t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter(function(){return!$(this).parents(".tab-panel-container").length}),$(t).each(function(){e.setupTabsInstance($(this))})},setupTabsInstance:function(e){if(e instanceof $){var t=this,n=!1;if(Xl.forEach(function(i){if(!n&&!Object.prototype.hasOwnProperty.call(t.tabContainers,i)){var a=e.data("tabs");a||(e.tabs(),a=e.data("tabs")),a.settings.sortable=t.settings.sortable,a.multitabsID=i,a.createSortable(),e.attr("data-multitabs",i),t.tabContainers[i]=e,n=!0}}),t.settings.sortable&&$(e.siblings(".tab-panel-container")).prepend('<div class="tab-overlay"><div class="overlay-left"></div><div class="overlay-right"></div></div>'),!n)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(e,t,n,i){return(e=this.checkForValidTabContainer(e)).data("tabs").add(t,n,i)},remove:function(e,t,n){return(e=this.checkForValidTabContainer(e)).data("tabs").remove(t,n)},move:function(e,t,n){if(!e||!t)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var i,a,r;if(this.getFilterableTabContainers().each(function(){var o=$(this).data("tabs"),c=o.getTab(null,e);c!==null&&(r=o.multitabsID,i=c.clone(),a=o.getPanel(e).children())}),!i)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(e,'"'));this.remove(r,e),this.add(t,e,{name:i.children("a").text().trim(),content:a,doActivate:n})},getTabContainer:function(e){var t,n=this;return Xl.forEach(function(i){!t&&n.tabContainers[i]&&e===i&&(t=n.tabContainers[i])}),t},getFilterableTabContainers:function(){var e=$();return this.performOnAllContainers(function(t,n){e=e.add(n)}),e},checkForValidTabContainer:function(e){if(!e)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if(typeof e=="string"&&(e=this.getTabContainer(e)),!(e instanceof $&&e.length))throw new Error("No matching tabContainer could be found and hidden.");return e},performOnAllContainers:function(e,t){var n=this;Array.isArray(t)||(t=t?[t]:[]),Xl.forEach(function(i){var a=n.tabContainers[i],r=[];a&&(r.push(i,a),r=r.concat(t),e.apply(this,r))})},adjustModuleTabContainers:function(){this.performOnAllContainers(function(e,t){var n=t.data("tabs");n.isModuleTabs()&&n.adjustModuleTabs()})},hideTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(e){if(e instanceof $&&e.data("tabs")&&typeof e.data("tabs").destroy=="function"){var t=this,n=!1;if(Xl.forEach(function(i){if(!n&&t.tabContainers[i].is(e)){var a=e.data("tabs");delete a.multitabsID,e.removeAttr("data-multitabs"),a.destroy(),delete t.tabContainers[i],n=!0}}),!n)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(e){return(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").is(".hidden")},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings))},teardown:function(){var e=this;return Object.keys(this.tabContainers).forEach(function(t){e.destroyTabsInstance(t)}),this},destroy:function(){this.teardown(),$.removeData(this.element[0],pr)}},$.fn.multitabs=function(e){return this.each(function(){var t=$.data(this,pr);t?t.updated(e):t=$.data(this,pr,new ou(this,e))})};var ns="listdetail",_p={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,toggleElement:void 0,detailElement:void 0},sa=["accordion","listview"];function ed(e){var t;if(e instanceof HTMLElement)return Object.keys($(e).data()).forEach(function(n){sa.indexOf(n)>-1&&(t=n)}),t}function Ao(e,t){e instanceof HTMLElement&&(this.element=e,this.settings=N.mergeSettings(this.element,t,_p),this.init())}Ao.prototype={init:function(){var e=this;if(this.setInternalElementReference("listElement",function(r){return(o=e.settings[r])instanceof HTMLElement&&ed(o)!==void 0;var o}),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.setInternalElementReference("toggleElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.showSidebar=!0,this.listElement){this.listComponentType=ed(this.listElement);var t=this.getListAPI();t&&(t.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var n=this.backElement.querySelector(".icon");n&&(this.backElementIcon=n),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}if(this.toggleElement){this.mainElement=this.element.querySelector(".main"),this.sidebarElement=this.element.querySelector(".sidebar"),this.toggleElement.classList.add("list-detail-toggle-button");var i=this.toggleElement.querySelector(".icon");i&&(this.toggleElementIcon=i,this.toggleElementIcon.classList.add("go-back"))}var a=this.element.querySelectorAll(".list-detail");a&&(this.childrenListDetailElements=a),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=Yt.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=Yt.isAbove("desktop")},setInternalElementReference:function(e,t){if(typeof this.settings[e]=="string"&&this.settings[e].length){var n=document.querySelector(this.settings[e]);n&&(this.settings[e]=n)}t=typeof t!="function"||t(e),this.settings[e]instanceof HTMLElement&&t&&(this[e]=this.settings[e])},handleEvents:function(){var e=this;$(this.element).on("drilldown.".concat(ns),function(t,n){t.stopPropagation(),e.drilldown(n,t.target)}).on("drillup.".concat(ns),function(t){t.stopPropagation(),e.drillup()}),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.toggleElement&&this.toggleElement.addEventListener("click",this.handleToggleClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat(ns)).on("resize.".concat(ns),function(){e.handleResize()})},drilldown:function(e,t){this.showDetail||t&&t.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[e]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},toggleSidebar:function(e){e?(this.sidebarElement.classList.add("hidden"),this.mainElement.style.width="100%",this.toggleElementIcon.classList.remove("go-back")):(this.sidebarElement.classList.remove("hidden"),this.mainElement.style.width="",this.toggleElementIcon.classList.add("go-back")),this.showSidebar=!e},handleBackClick:function(e){function t(){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var n=this.getCurrentSelectedListItem();if(n)return this.drilldown(n),t(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach(function(i){var a=$(i).data(ns);a&&typeof a.drillup=="function"&&a.drillup()}),t(),!1},handleToggleClick:function(){this.toggleSidebar(this.showSidebar)},handleClose:function(){if(!this.showDetail){var e=this.getCurrentSelectedListItem();this.drilldown(e)}},handleResize:function(){this.setBreakpointChecks();var e=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&e.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&e.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():(this.addBackElementIconContext(),this.toggleElement&&this.toggleSidebar(!1)),Yt.isAbove("desktop")&&e!==void 0&&e.enable()},isAboveBreakpoint:function(){var e=this.settings.edgeBleedBreakpoint;return this["above".concat(ot.capitalize(e),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){if(!this.listElement)return"";var e,t=this.getListAPI();return this.listComponentType,e=t.getSelected(),e=ue.convertToHTMLElement(e)},updated:function(e){e&&(this.settings=N.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat(ns)),$(this.element).off("drilldown.".concat(ns," drillup.").concat(ns)),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var e=this.getListAPI();e&&delete e.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.mainElement,delete this.sidebarElement,delete this.toggleElement,delete this.toggleElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail,delete this.showSidebar},destroy:function(){this.teardown(),$.removeData(this.element,ns)}},$.fn.listdetail=function(e){return this.each(function(){var t=$.data(this,ns);t?t.updated(e):(t=$.data(this,ns,new Ao(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,ns),$.removeData(this.element,"options")}})};var Nr="stepprocess",lu={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function td(e,t){this.settings=N.mergeSettings(e,t,lu),this.element=$(e),this.init(),Ss("Stepprocess")}td.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var e=this.stepListJq.find(this.settings.stepLi),t=0,n=e.length;t<n;t++)this.decorateNode(e[t]);var i=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(i)},decorateNode:function(e){var t=$(e),n=t.children(this.settings.stepLink),i=t.children(this.settings.stepFolder),a=n.hasClass("is-disabled"),r=i.hasClass("is-open");if(a&&n.attr("aria-disabled","true"),i.length){if(t.addClass("folder"),i.attr("role","group"),a&&(i.addClass("disabled"),r))for(var o=i.children(),c=0,u=o.length;c<u;c++)$(o[c]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");n.attr("aria-expanded",r)}var p=n.parentsUntil(this.stepListJq,"ul").length-1,m=t.index(),v=t.siblings().addBack().length;n.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":p+1,"aria-posinset":m+1,"aria-setsize":v,"aria-disabled":a}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(e){var t=this,n=$(e),i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder),r=i.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(r,this.settings.folderIconClosed),this.isAnimating=!0,a.one("animateclosedcomplete",function(){a.removeClass("is-open"),t.isAnimating=!1}).animateClosed(),i.attr("aria-expanded","false")},folderOpen:function(e){var t=this,n=$(e);if(!this.isOpen(n)){var i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder);n.addClass("is-open"),i.attr("aria-expanded","true");var r=i.find("svg.icon-tree");this.setIcon(r,this.settings.folderIconOpen),this.isAnimating=!0,a.one("animateopencomplete",function(){t.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(e){var t=e.closest(this.settings.stepLi);if(this.isFolder(t)){var n=t.children(this.settings.stepFolder);this.isOpen(n)?this.folderClose(t):this.folderOpen(t)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(e){var t=this.settings,n=e.parent().next().find("".concat(t.stepLink,":first"));if(e.next().is(t.stepFolder)&&e.next().hasClass("is-open")&&(n=e.next().find("".concat(t.stepLink,":first"))),n.hasClass("is-disabled")&&(n=this.getNextNode(n)),n.length===0)for(var i=0,a=e;i<2&&!(n=(a=a.parent().closest(".folder")).next().find("".concat(t.stepLink,":first"))).length;i++);return n},getNextStep:function(e){var t=e.children(this.settings.stepLink),n=e.next(this.settings.stepFolder),i=this.getNextNode(t),a=i.next(this.settings.stepFolder),r=null,o=null;return(r=n.length?(o=n).children().length?o.find(this.settings.stepLink).first():i:a.length&&(o=a).children().length?o.find(this.settings.stepLink).first():i).hasClass("is-disabled")&&(r=this.getNextStep(r.parent())),r},getPreviousNode:function(e){var t=this.settings,n=e.parent().prev().find("".concat(t.stepLink,":first")),i=n.closest(t.stepLi);return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(n=i.find("ul.is-open ".concat(t.stepLink,":last"))),n.hasClass("is-disabled")&&this.getPreviousNode(n),n.length===0&&(n=e.closest(t.stepFolder).prev(t.stepLink)),n},getPreviousStep:function(e){var t=this.settings,n=e.children(t.stepLink),i=this.getPreviousNode(n),a=i.closest(t.stepLi),r=i;if(this.isFolder(a))if(this.isOpen(a))r=this.getPreviousNode(i);else{var o=a.children(t.stepFolder);o.children().length&&(r=o.find(t.stepLink).last())}return r.hasClass("is-disabled")&&(r=this.getPreviousStep(r.parent())),r},goToNextStep:function(){var e=this,t=this.getSelectedStep(),n=e.getNextStep(t);if(n.length)e.selectStep(n,"next");else if(typeof e.settings.beforeSelectStep=="function"){var i=e.settings.beforeSelectStep({isStepping:"next"});i.done&&typeof i.done=="function"?i.done(function(a,r){a&&r&&e.selectStepFinish(r)}):i&&e.selectStepFinish(n)}},goToPreviousStep:function(){var e=this.getSelectedStep(),t=this.getPreviousStep(e);t.length&&this.selectStep(t,"prev")},handleKeys:function(){var e=this,t=this.settings;this.stepListJq.on("focus.stepprocess",t.stepLink,function(){var n=$(this);if(parseInt(n.attr("aria-level"),10)===0&&parseInt(n.attr("aria-posinset"),10)===1&&n.hasClass("is-disabled")){var i=$.Event("keydown.stepprocess");return i.keyCode=40,void n.trigger(i)}}),this.stepListJq.on("keydown.stepprocess",t.stepLink,function(n){var i,a,r=n.charCode||n.keyCode,o=$(this);if(!e.isAnimating){if(r===40){var c=e.getNextNode(o);e.setFocus(c)}if(r===38){var u=e.getPreviousNode(o);e.setFocus(u)}if(n.keyCode===32&&o.trigger("click.stepprocess"),r===37)return L.isRTL()?o.next().hasClass("is-open")?(a=o.next().find("".concat(t.stepLink,":first")),e.setFocus(a)):e.folderToggle(o):o.next().hasClass("is-open")?e.folderToggle(o):(a=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(a)),n.stopPropagation(),!1;if(r===39)return L.isRTL()?o.next().hasClass("is-open")?e.folderToggle(o):(i=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(i)):o.next().hasClass("is-open")?(i=o.next().find("".concat(t.stepLink,":first")),e.setFocus(i)):(e.folderToggle(o),e.setFocus(o)),n.stopPropagation(),!1;r===36&&(i=e.stepListJq.find("".concat(t.stepLink,":first:visible")),e.setFocus(i)),r===35&&(i=e.stepListJq.find("".concat(t.stepLink,":last:visible")),e.setFocus(i))}}),this.stepListJq.on("keypress.stepprocess",t.stepLink,function(n){var i=n.charCode||n.keyCode,a=$(this);if(i>=37&&i<=40||i===32)return n.stopPropagation(),!1;n.which!==0&&a.closest(t.stepLi).nextAll().find(".js-step-link:visible").each(function(){var r=$(this);if(r.text().substr(0,1).toLowerCase()===String.fromCharCode(n.which).toLowerCase())return e.setFocus(r),!1})})},isFolder:function(e){return $(e).hasClass("folder")},isInFolder:function(e){return $(e).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(e){return $(e).hasClass("is-open")},setFocus:function(e){e.focus()},setIcon:function(e,t){var n=t.replace(/icon-|hide-focus|\s?/gi,"");e.changeIcon(n)},selectStep:function(e,t){var n,i=this;if(t===void 0&&(t="none"),typeof i.settings.beforeSelectStep=="function"){var a={stepLink:e,isStepping:t};(n=i.settings.beforeSelectStep(a)).done&&typeof n.done=="function"?n.done(function(r,o){r&&(o&&(e=o),i.selectStepFinish(e,t))}):n&&i.selectStepFinish(e,t)}else i.selectStepFinish(e,t)},selectStepFinish:function(e,t){var n=this,i=$(this.settings.stepLink,this.stepListJq),a=e.closest(this.settings.stepLi);if(this.isFolder(a)||(i.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),e.attr({tabindex:"0","aria-selected":"true"}),a.addClass("is-selected")),this.isFolder(a))t==="none"?this.folderToggle(a):this.folderOpen(a);else{var r=a.closest(this.settings.stepFolder,this.stepListJq);r.length&&this.folderOpen(r.closest(this.settings.stepLi)),this.showStepPanel(e.attr("href"))}e.focus(),setTimeout(function(){n.element.triggerHandler("selected",e)},0)},unSelectedNode:function(e){var t=$(this.settings.stepLink,this.stepListJq),n=$(e),i=n.children(this.settings.stepLink);t.attr("tabindex","-1"),i.attr("tabindex","0"),n.removeClass("is-selected"),i.attr("aria-selected","false")},setupEvents:function(){var e=this,t=this,n=this.settings;this.stepListJq.on("updated.stepprocess",function(){e.initStepprocess()}).on("click.stepprocess","".concat(n.stepLink,":not(.is-clone)"),function(i){if(i.preventDefault(),!n.linearProgression){var a=$(this);a.is(".is-disabled, .is-loading")||(t.selectStep(a),i.stopPropagation())}}),$(n.btnPrev).on("click",function(i){i.preventDefault(),e.goToPreviousStep.call(t)}),$(n.btnNext).on("click",function(i){i.preventDefault(),e.goToNextStep.call(t)}),$(n.contentScroll).scrollaction({scrollActionTarget:".main"}),$(n.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click(function(i){i.preventDefault(),e.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")})},showStepPanel:function(e){$(".step-panel-active").removeClass("step-panel-active"),$(e).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(e){return e!==void 0&&(this.settings=N.mergeSettings(this.element,e,lu)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Nr)}},$.fn.stepprocess=function(e){return this.each(function(){var t=$.data(this,Nr);t?t.updated(e):t=$.data(this,Nr,new td(this,e))})};var fh={locale:"en-US",language:null},Ki=".no-init, [data-init]";function ws(e,t,n){return $(e)[t](n)}function vi(e,t){var n=e.find(t).not(Ki);return e.filter(t).length&&(n=n.add(e)),n}var Ql=[["texttranslations",'[data-translate="text"]',function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.attr("data-translate-key",r.text()),r.text(L.translate(r.text(),!0))})}],["texttranslations",'[data-translate="value"]',function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.attr("data-translate-key",r.attr("value")),r.attr("value",L.translate(r.attr("value"),!0))})}],["texttranslations",'[data-translate="placeholder"]',function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.attr("data-translate-key",r.attr("placeholder")),r.attr("placeholder",L.translate(r.attr("placeholder"),!0))})}],["applicationmenu","#application-menu",function(e,t,n){vi(e,n).each(function(i,a){$(a).applicationmenu({triggers:e.find(".application-menu-trigger")})})}],["modulenav",".module-nav",function(e,t,n){vi(e,n).each(function(i,a){$(a).modulenav()})}],["modulenavsettings",".module-nav-settings-btn",function(e,t,n){vi(e,n).each(function(i,a){$(a).modulenavsettings()})}],["modulenavswitcher",".module-nav-switcher",function(e,t,n){vi(e,n).each(function(i,a){$(a).modulenavswitcher()})}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(e,t,n){vi(e,n).change(function(){if(this.checked){var i=$(this).closest(".option"),a=i.siblings(),r='button, select, input[type="text"]';$(r,i).removeAttr("disabled"),$(r,a).attr("disabled","disabled")}})}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["revealText","input.input-password-reveal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["link"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["cards",".card:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(e,t,n){vi(e,n).each(function(i,a){$(a).parents(".modal").length||$(a).button()})}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",['[data-clearable="true"]'].join(", "),function(e,t,n){vi(e,n).each(function(i,a){var r=$(a).attr("data-tabbable");r===void 0?$(a).clearable({tabbable:!0}):$(a).clearable({tabbable:r==="true"})})}],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload",'input.fileupload:not(.fileupload-background-transparent):not([type="text"])'],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["virtualscroll",".virtual-scroll"],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(e,t,n){vi(e,n).each(function(i,a){var r=$(a),o=$.extend({},N.parseOptions(r)),c=r.attr("data-popupmenu");c&&(o.menuId=c),ws(r,t,o)})}],["popupmenu",".btn-actions, .btn-filter, .btn-menu, .module-nav-settings-btn",function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.parents(".toolbar, .flex-toolbar").length>0||ws(r,t)})}],["popover","[data-popover]",function(e,t,n){vi(e,n).each(function(){var i=N.parseOptions(this),a=$(this),r=a.attr("data-trigger"),o=a.attr("data-title"),c=a.attr("data-placement");$.isEmptyObject(i)?a.popover({content:$("#".concat(a.attr("data-popover"))),popover:!0,trigger:r||"click",title:o||void 0,placement:c||"right",extraClass:i.extraClass||void 0}):a.popover({content:$(i.content),popover:!0,trigger:i.trigger||"click",title:i.title||void 0,placement:i.placement||"right",extraClass:i.extraClass||void 0})})}],["searchfield",".searchfield",function(e,t,n){var i=vi(e,n),a=i.filter(function(){return $(this).parents(".toolbar").length});(i=i.not(a)).each(function(){ws(this,"searchfield")})}],["toolbar",".toolbar",function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.parents(".header, .contextual-action-panel .modal-header").length&&!e.is(".toolbar")||ws(r,"toolbar")})}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(e,t,n){vi(e,n).each(function(i,a){var r=$(a);r.parents(".application-menu").length||ws(r,"accordion")})}],["taglist",".tag-list"],["breadcrumb",".breadcrumb"],["swipeaction",".swipe-action"],["formcompact",".form-compact-container",function(e,t,n){vi(e,n).each(function(i,a){ws($(a),"formcompact")})}],["listdetail",".list-detail",function(e,t,n){vi(e,n).each(function(i,a){ws($(a),"listdetail")})}],["breadcrumblabels",".breadcrumb ol",function(e,t,n){vi(e,n).attr("aria-label",L.translate("Breadcrumb"))}],["validate","[data-validate]",function(e,t,n){vi(e,n).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function nd(e,t,n,i){($.fn[t]||t==="texttranslations")&&(n===void 0&&(n=".".concat(t)),typeof i!="function"?vi(e,n).each(function(){var a=$(this);a.is(Ki)||a.parents(Ki).length||ws(this,t)}):i(e,t,n))}function Jl(e,t){var n=t;typeof t=="string"&&(n={locale:t}),this.element=$(e),L.currentLocale&&L.currentLocale.name&&!t&&(n={locale:L.currentLocale.name}),L.currentLanguage&&L.currentLanguage.name&&L.currentLocale.name.substr(0,2)!==L.currentLanguage.name&&!t&&(n.language=L.currentLanguage.name),this.settings=N.mergeSettings(this.element[0],n,fh),this.init()}Jl.prototype={init:function(){var e=this,t=this;return L.set(this.settings.locale).done(function(){e.settings.language?L.setLanguage(e.settings.language).done(function(){t.initAll()}):t.initAll()}),this},initAll:function(){return this.element.each(function(){for(var e=0;e<Ql.length;e++)nd.apply(void 0,[$(this)].concat(Nt(Ql[e])))}),this.element.triggerHandler("initialized",{locale:L.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(e){return this.each(function(){return new Jl(this,e)})};var Vs="longpress",zp={delay:400,mouseEvents:!1};function So(e){return this.settings=N.mergeSettings(this.element,e,zp),this.init()}So.prototype={timer:null,init:function(){var e=this,t=this.getInputEventNames(),n=this;$(document).on("".concat(t.mousedown,".").concat(Vs),function(i){var a=i.target;e.timer=new Gt({id:"".concat(Vs,"-timer"),duration:rs.convertDelayToFPS(e.settings.delay),timeoutCallback:function(){n.fire(a,i)}}),Hn.register(e.timer)}),$(document).on(["".concat(t.mouseup,".").concat(Vs),"".concat(t.mouseout,".").concat(Vs),"".concat(t.mousemove,".").concat(Vs)].join(" "),function(){e.killTimer()})},fire:function(e,t){$(e).trigger("".concat(Vs),[t])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var e=Be.features.touch,t=this.settings.mouseEvents,n=e||!t;return{mousedown:n?"touchstart":"mousedown",mouseout:n?"touchcancel":"mouseout",mouseup:n?"touchend":"mouseup",mousemove:n?"touchmove":"mousemove"}},updated:function(e){e&&(this.settings=N.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(e.mousedown,".").concat(Vs),"".concat(e.mouseup,".").concat(Vs),"".concat(e.mouseout,".").concat(Vs),"".concat(e.mousemove,".").concat(Vs)].join(" "))}};var Zl=new So,Fp=Object.freeze({__proto__:null,About:El,Accordion:so,ActionSheet:Il,ApplicationMenu:Q,Autocomplete:kr,Bar:Ci,Blockgrid:be,Breadcrumb:mt,Bullet:On,BusyIndicator:Gn,Button:Vo,ButtonSet:ta,Calendar:_t,CalendarToolbar:vs,Cards:dn,ColorPicker:uo,Column:Qn,CompletionChart:ji,CompositeForm:li,ContextualActionPanel:ti,Datagrid:qs,DatePicker:Dd,Drag:Tl,Dropdown:Fi,EmptyMessage:Vn,ExpandableArea:Yo,FontPicker:Md,FontPickerStyle:Za,FormCompact:iu,Header:su,Hyperlink:Os,Icon:ir,Line:oi,Link:Ba,ListBuilder:_d,ListDetail:Ao,ListFilter:ro,ListView:Rd,Lookup:nu,MaskInput:sr,Message:Fd,Modal:zd,ModuleNav:Fl,ModuleNavSettings:Nc,ModuleNavSwitcher:Rc,MonthView:He,MultiSelect:qd,MultiTabs:ou,Notification:_c,Pager:_l,Pie:Ya,Popdown:bo,PopupMenu:hs,Radar:lr,SearchField:E,Slider:Kd,Sparkline:si,Spinbox:ql,Splitter:Br,StepChart:Uc,Stepprocess:td,SwipeAction:Vl,Tabs:Jd,Tag:Xa,TagList:Sr,Textarea:Ul,TimePicker:Pa,Tmpl:Xn,Toast:Bl,Toolbar:il,ToolbarFlex:Ns,Tooltip:Da,Tree:Kc,Treemap:Yl,Validator:po,VirtualScroll:lo,WeekView:tt,Wizard:Kl});return B.DOM=ue,B.Editors=dl,B.Formatters=Sn,B.GroupBy=mi,B.HideFocus=Sa,B.Initialize=Jl,B.Locale=L,B.Place=nr,B.RenderLoopItem=Gt,B.Validation=pa,B.base=Zi,B.breakpoints=Yt,B.colors=ut,B.components=Fp,B.debug=In,B.defer=hi,B.env=Be,B.excel=ga,B.getColorStyleSheet=function(e){return Vi.getColorStyleSheet(e)},B.keyboard=$s,B.longPress=Zl,B.masks=gt,B.modalManager=ca,B.notificationManager=Is,B.number=os,B.object=Ys,B.personalization=Vi,B.renderLoop=Hn,B.setColors=function(e){return Vi.setColors(e)},B.setTheme=function(e){return Vi.setTheme(e)},B.smoothScrollTo=Ea,B.string=ot,B.theme=ft,B.uniqueIdCount=ja,B.utils=N,B.version=Ji,B.xss=_e,B}({});
