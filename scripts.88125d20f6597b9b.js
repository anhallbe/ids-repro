(function(R,wi){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=R.document?wi(R,!0):function(Fi){if(!Fi.document)throw new Error("jQuery requires a window with a document");return wi(Fi)}:wi(R)})(typeof window<"u"?window:this,function(R,wi){"use strict";var Fi=[],yo=Object.getPrototypeOf,Si=Fi.slice,wo=Fi.flat?function(y){return Fi.flat.call(y)}:function(y){return Fi.concat.apply([],y)},La=Fi.push,Ge=Fi.indexOf,or={},_r=or.toString,Is=or.hasOwnProperty,zr=Is.toString,Un=zr.call(Object),un={},$e=function(y){return"function"==typeof y&&"number"!=typeof y.nodeType&&"function"!=typeof y.item},ue=function(y){return null!=y&&y===y.window},it=R.document,xo={type:!0,src:!0,nonce:!0,noModule:!0};function Ms(y,E,O){var F,W,Q=(O=O||it).createElement("script");if(Q.text=y,E)for(F in xo)(W=E[F]||E.getAttribute&&E.getAttribute(F))&&Q.setAttribute(F,W);O.head.appendChild(Q).parentNode.removeChild(Q)}function Ie(y){return null==y?y+"":"object"==typeof y||"function"==typeof y?or[_r.call(y)]||"object":typeof y}var H=function(y,E){return new H.fn.init(y,E)};function Ta(y){var E=!!y&&"length"in y&&y.length,O=Ie(y);return!$e(y)&&!ue(y)&&("array"===O||0===E||"number"==typeof E&&0<E&&E-1 in y)}H.fn=H.prototype={jquery:"3.6.1",constructor:H,length:0,toArray:function(){return Si.call(this)},get:function(y){return null==y?Si.call(this):y<0?this[y+this.length]:this[y]},pushStack:function(y){var E=H.merge(this.constructor(),y);return E.prevObject=this,E},each:function(y){return H.each(this,y)},map:function(y){return this.pushStack(H.map(this,function(E,O){return y.call(E,O,E)}))},slice:function(){return this.pushStack(Si.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(H.grep(this,function(y,E){return(E+1)%2}))},odd:function(){return this.pushStack(H.grep(this,function(y,E){return E%2}))},eq:function(y){var E=this.length,O=+y+(y<0?E:0);return this.pushStack(0<=O&&O<E?[this[O]]:[])},end:function(){return this.prevObject||this.constructor()},push:La,sort:Fi.sort,splice:Fi.splice},H.extend=H.fn.extend=function(){var y,E,O,F,W,Q,ee=arguments[0]||{},ge=1,pe=arguments.length,xe=!1;for("boolean"==typeof ee&&(xe=ee,ee=arguments[ge]||{},ge++),"object"==typeof ee||$e(ee)||(ee={}),ge===pe&&(ee=this,ge--);ge<pe;ge++)if(null!=(y=arguments[ge]))for(E in y)F=y[E],"__proto__"!==E&&ee!==F&&(xe&&F&&(H.isPlainObject(F)||(W=Array.isArray(F)))?(O=ee[E],Q=W&&!Array.isArray(O)?[]:W||H.isPlainObject(O)?O:{},W=!1,ee[E]=H.extend(xe,Q,F)):void 0!==F&&(ee[E]=F));return ee},H.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(y){throw new Error(y)},noop:function(){},isPlainObject:function(y){var E,O;return!(!y||"[object Object]"!==_r.call(y)||(E=yo(y))&&("function"!=typeof(O=Is.call(E,"constructor")&&E.constructor)||zr.call(O)!==Un))},isEmptyObject:function(y){var E;for(E in y)return!1;return!0},globalEval:function(y,E,O){Ms(y,{nonce:E&&E.nonce},O)},each:function(y,E){var O,F=0;if(Ta(y))for(O=y.length;F<O&&!1!==E.call(y[F],F,y[F]);F++);else for(F in y)if(!1===E.call(y[F],F,y[F]))break;return y},makeArray:function(y,E){var O=E||[];return null!=y&&(Ta(Object(y))?H.merge(O,"string"==typeof y?[y]:y):La.call(O,y)),O},inArray:function(y,E,O){return null==E?-1:Ge.call(E,y,O)},merge:function(y,E){for(var O=+E.length,F=0,W=y.length;F<O;F++)y[W++]=E[F];return y.length=W,y},grep:function(y,E,O){for(var F=[],W=0,Q=y.length,ee=!O;W<Q;W++)!E(y[W],W)!==ee&&F.push(y[W]);return F},map:function(y,E,O){var F,W,Q=0,ee=[];if(Ta(y))for(F=y.length;Q<F;Q++)null!=(W=E(y[Q],Q,O))&&ee.push(W);else for(Q in y)null!=(W=E(y[Q],Q,O))&&ee.push(W);return wo(ee)},guid:1,support:un}),"function"==typeof Symbol&&(H.fn[Symbol.iterator]=Fi[Symbol.iterator]),H.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(y,E){or["[object "+E+"]"]=E.toLowerCase()});var Ui=function(y){var E,O,F,W,Q,ee,ge,pe,xe,Pe,Ve,Le,De,ut,wt,vt,Sn,Ft,Ln,hn="sizzle"+1*new Date,Ht=y.document,pn=0,an=0,yn=ra(),ss=ra(),_a=ra(),hi=ra(),rs=function(ae,he){return ae===he&&(Ve=!0),0},sa={}.hasOwnProperty,pi=[],za=pi.pop,fi=pi.push,En=pi.push,Li=pi.slice,gi=function(ae,he){for(var ye=0,He=ae.length;ye<He;ye++)if(ae[ye]===he)return ye;return-1},ma="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",qt="[\\x20\\t\\r\\n\\f]",on="(?:\\\\[\\da-fA-F]{1,6}"+qt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",wn="\\["+qt+"*("+on+")(?:"+qt+"*([*^$|!~]?=)"+qt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+on+"))|)"+qt+"*\\]",Pi=":("+on+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+wn+")*)|.*)\\)|)",Yn=new RegExp(qt+"+","g"),mi=new RegExp("^"+qt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+qt+"+$","g"),Ts=new RegExp("^"+qt+"*,"+qt+"*"),os=new RegExp("^"+qt+"*([>+~]|"+qt+")"+qt+"*"),gl=new RegExp(qt+"|>"),_o=new RegExp(Pi),ml=new RegExp("^"+on+"$"),js={ID:new RegExp("^#("+on+")"),CLASS:new RegExp("^\\.("+on+")"),TAG:new RegExp("^("+on+"|[*])"),ATTR:new RegExp("^"+wn),PSEUDO:new RegExp("^"+Pi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+qt+"*(even|odd|(([+-]|)(\\d*)n|)"+qt+"*(?:([+-]|)"+qt+"*(\\d+)|))"+qt+"*\\)|)","i"),bool:new RegExp("^(?:"+ma+")$","i"),needsContext:new RegExp("^"+qt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+qt+"*((?:-\\d)?\\d*)"+qt+"*\\)|)(?=[^-]|$)","i")},Kl=/HTML$/i,zo=/^(?:input|select|textarea|button)$/i,vl=/^h\d$/i,wr=/^[^{]+\{\s*\[native \w/,xr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ls=/[+~]/,Qi=new RegExp("\\\\[\\da-fA-F]{1,6}"+qt+"?|\\\\([^\\r\\n\\f])","g"),vi=function(ae,he){var ye="0x"+ae.slice(1)-65536;return he||(ye<0?String.fromCharCode(ye+65536):String.fromCharCode(ye>>10|55296,1023&ye|56320))},cs=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ni=function(ae,he){return he?"\0"===ae?"\ufffd":ae.slice(0,-1)+"\\"+ae.charCodeAt(ae.length-1).toString(16)+" ":"\\"+ae},Jr=function(){Le()},Ws=As(function(ae){return!0===ae.disabled&&"fieldset"===ae.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{En.apply(pi=Li.call(Ht.childNodes),Ht.childNodes)}catch{En={apply:pi.length?function(he,ye){fi.apply(he,Li.call(ye))}:function(he,ye){for(var He=he.length,Te=0;he[He++]=ye[Te++];);he.length=He-1}}}function ln(ae,he,ye,He){var Te,We,Ue,Je,rt,Bt,Mt,Rt=he&&he.ownerDocument,Zt=he?he.nodeType:9;if(ye=ye||[],"string"!=typeof ae||!ae||1!==Zt&&9!==Zt&&11!==Zt)return ye;if(!He&&(Le(he),he=he||De,wt)){if(11!==Zt&&(rt=xr.exec(ae)))if(Te=rt[1]){if(9===Zt){if(!(Ue=he.getElementById(Te)))return ye;if(Ue.id===Te)return ye.push(Ue),ye}else if(Rt&&(Ue=Rt.getElementById(Te))&&Ln(he,Ue)&&Ue.id===Te)return ye.push(Ue),ye}else{if(rt[2])return En.apply(ye,he.getElementsByTagName(ae)),ye;if((Te=rt[3])&&O.getElementsByClassName&&he.getElementsByClassName)return En.apply(ye,he.getElementsByClassName(Te)),ye}if(O.qsa&&!hi[ae+" "]&&(!vt||!vt.test(ae))&&(1!==Zt||"object"!==he.nodeName.toLowerCase())){if(Mt=ae,Rt=he,1===Zt&&(gl.test(ae)||os.test(ae))){for((Rt=ls.test(ae)&&to(he.parentNode)||he)===he&&O.scope||((Je=he.getAttribute("id"))?Je=Je.replace(cs,Ni):he.setAttribute("id",Je=hn)),We=(Bt=ee(ae)).length;We--;)Bt[We]=(Je?"#"+Je:":scope")+" "+Ia(Bt[We]);Mt=Bt.join(",")}try{return En.apply(ye,Rt.querySelectorAll(Mt)),ye}catch{hi(ae,!0)}finally{Je===hn&&he.removeAttribute("id")}}}return pe(ae.replace(mi,"$1"),he,ye,He)}function ra(){var ae=[];return function he(ye,He){return ae.push(ye+" ")>F.cacheLength&&delete he[ae.shift()],he[ye+" "]=He}}function bi(ae){return ae[hn]=!0,ae}function oa(ae){var he=De.createElement("fieldset");try{return!!ae(he)}catch{return!1}finally{he.parentNode&&he.parentNode.removeChild(he),he=null}}function va(ae,he){for(var ye=ae.split("|"),He=ye.length;He--;)F.attrHandle[ye[He]]=he}function Zr(ae,he){var ye=he&&ae,He=ye&&1===ae.nodeType&&1===he.nodeType&&ae.sourceIndex-he.sourceIndex;if(He)return He;if(ye)for(;ye=ye.nextSibling;)if(ye===he)return-1;return ae?1:-1}function Cr(ae){return function(he){return"input"===he.nodeName.toLowerCase()&&he.type===ae}}function Ri(ae){return function(he){var ye=he.nodeName.toLowerCase();return("input"===ye||"button"===ye)&&he.type===ae}}function eo(ae){return function(he){return"form"in he?he.parentNode&&!1===he.disabled?"label"in he?"label"in he.parentNode?he.parentNode.disabled===ae:he.disabled===ae:he.isDisabled===ae||he.isDisabled!==!ae&&Ws(he)===ae:he.disabled===ae:"label"in he&&he.disabled===ae}}function Da(ae){return bi(function(he){return he=+he,bi(function(ye,He){for(var Te,We=ae([],ye.length,he),Ue=We.length;Ue--;)ye[Te=We[Ue]]&&(ye[Te]=!(He[Te]=ye[Te]))})})}function to(ae){return ae&&typeof ae.getElementsByTagName<"u"&&ae}for(E in O=ln.support={},Q=ln.isXML=function(ae){var ye=ae&&(ae.ownerDocument||ae).documentElement;return!Kl.test(ae&&ae.namespaceURI||ye&&ye.nodeName||"HTML")},Le=ln.setDocument=function(ae){var he,ye,He=ae?ae.ownerDocument||ae:Ht;return He!=De&&9===He.nodeType&&He.documentElement&&(ut=(De=He).documentElement,wt=!Q(De),Ht!=De&&(ye=De.defaultView)&&ye.top!==ye&&(ye.addEventListener?ye.addEventListener("unload",Jr,!1):ye.attachEvent&&ye.attachEvent("onunload",Jr)),O.scope=oa(function(Te){return ut.appendChild(Te).appendChild(De.createElement("div")),typeof Te.querySelectorAll<"u"&&!Te.querySelectorAll(":scope fieldset div").length}),O.attributes=oa(function(Te){return Te.className="i",!Te.getAttribute("className")}),O.getElementsByTagName=oa(function(Te){return Te.appendChild(De.createComment("")),!Te.getElementsByTagName("*").length}),O.getElementsByClassName=wr.test(De.getElementsByClassName),O.getById=oa(function(Te){return ut.appendChild(Te).id=hn,!De.getElementsByName||!De.getElementsByName(hn).length}),O.getById?(F.filter.ID=function(Te){var We=Te.replace(Qi,vi);return function(Ue){return Ue.getAttribute("id")===We}},F.find.ID=function(Te,We){if(typeof We.getElementById<"u"&&wt){var Ue=We.getElementById(Te);return Ue?[Ue]:[]}}):(F.filter.ID=function(Te){var We=Te.replace(Qi,vi);return function(Ue){var Je=typeof Ue.getAttributeNode<"u"&&Ue.getAttributeNode("id");return Je&&Je.value===We}},F.find.ID=function(Te,We){if(typeof We.getElementById<"u"&&wt){var Ue,Je,rt,Bt=We.getElementById(Te);if(Bt){if((Ue=Bt.getAttributeNode("id"))&&Ue.value===Te)return[Bt];for(rt=We.getElementsByName(Te),Je=0;Bt=rt[Je++];)if((Ue=Bt.getAttributeNode("id"))&&Ue.value===Te)return[Bt]}return[]}}),F.find.TAG=O.getElementsByTagName?function(Te,We){return typeof We.getElementsByTagName<"u"?We.getElementsByTagName(Te):O.qsa?We.querySelectorAll(Te):void 0}:function(Te,We){var Ue,Je=[],rt=0,Bt=We.getElementsByTagName(Te);if("*"===Te){for(;Ue=Bt[rt++];)1===Ue.nodeType&&Je.push(Ue);return Je}return Bt},F.find.CLASS=O.getElementsByClassName&&function(Te,We){if(typeof We.getElementsByClassName<"u"&&wt)return We.getElementsByClassName(Te)},Sn=[],vt=[],(O.qsa=wr.test(De.querySelectorAll))&&(oa(function(Te){var We;ut.appendChild(Te).innerHTML="<a id='"+hn+"'></a><select id='"+hn+"-\r\\' msallowcapture=''><option selected=''></option></select>",Te.querySelectorAll("[msallowcapture^='']").length&&vt.push("[*^$]="+qt+"*(?:''|\"\")"),Te.querySelectorAll("[selected]").length||vt.push("\\["+qt+"*(?:value|"+ma+")"),Te.querySelectorAll("[id~="+hn+"-]").length||vt.push("~="),(We=De.createElement("input")).setAttribute("name",""),Te.appendChild(We),Te.querySelectorAll("[name='']").length||vt.push("\\["+qt+"*name"+qt+"*="+qt+"*(?:''|\"\")"),Te.querySelectorAll(":checked").length||vt.push(":checked"),Te.querySelectorAll("a#"+hn+"+*").length||vt.push(".#.+[+~]"),Te.querySelectorAll("\\\f"),vt.push("[\\r\\n\\f]")}),oa(function(Te){Te.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var We=De.createElement("input");We.setAttribute("type","hidden"),Te.appendChild(We).setAttribute("name","D"),Te.querySelectorAll("[name=d]").length&&vt.push("name"+qt+"*[*^$|!~]?="),2!==Te.querySelectorAll(":enabled").length&&vt.push(":enabled",":disabled"),ut.appendChild(Te).disabled=!0,2!==Te.querySelectorAll(":disabled").length&&vt.push(":enabled",":disabled"),Te.querySelectorAll("*,:x"),vt.push(",.*:")})),(O.matchesSelector=wr.test(Ft=ut.matches||ut.webkitMatchesSelector||ut.mozMatchesSelector||ut.oMatchesSelector||ut.msMatchesSelector))&&oa(function(Te){O.disconnectedMatch=Ft.call(Te,"*"),Ft.call(Te,"[s!='']:x"),Sn.push("!=",Pi)}),vt=vt.length&&new RegExp(vt.join("|")),Sn=Sn.length&&new RegExp(Sn.join("|")),he=wr.test(ut.compareDocumentPosition),Ln=he||wr.test(ut.contains)?function(Te,We){var Ue=9===Te.nodeType?Te.documentElement:Te,Je=We&&We.parentNode;return Te===Je||!(!Je||1!==Je.nodeType||!(Ue.contains?Ue.contains(Je):Te.compareDocumentPosition&&16&Te.compareDocumentPosition(Je)))}:function(Te,We){if(We)for(;We=We.parentNode;)if(We===Te)return!0;return!1},rs=he?function(Te,We){if(Te===We)return Ve=!0,0;var Ue=!Te.compareDocumentPosition-!We.compareDocumentPosition;return Ue||(1&(Ue=(Te.ownerDocument||Te)==(We.ownerDocument||We)?Te.compareDocumentPosition(We):1)||!O.sortDetached&&We.compareDocumentPosition(Te)===Ue?Te==De||Te.ownerDocument==Ht&&Ln(Ht,Te)?-1:We==De||We.ownerDocument==Ht&&Ln(Ht,We)?1:Pe?gi(Pe,Te)-gi(Pe,We):0:4&Ue?-1:1)}:function(Te,We){if(Te===We)return Ve=!0,0;var Ue,Je=0,rt=Te.parentNode,Bt=We.parentNode,Mt=[Te],Rt=[We];if(!rt||!Bt)return Te==De?-1:We==De?1:rt?-1:Bt?1:Pe?gi(Pe,Te)-gi(Pe,We):0;if(rt===Bt)return Zr(Te,We);for(Ue=Te;Ue=Ue.parentNode;)Mt.unshift(Ue);for(Ue=We;Ue=Ue.parentNode;)Rt.unshift(Ue);for(;Mt[Je]===Rt[Je];)Je++;return Je?Zr(Mt[Je],Rt[Je]):Mt[Je]==Ht?-1:Rt[Je]==Ht?1:0}),De},ln.matches=function(ae,he){return ln(ae,null,null,he)},ln.matchesSelector=function(ae,he){if(Le(ae),O.matchesSelector&&wt&&!hi[he+" "]&&(!Sn||!Sn.test(he))&&(!vt||!vt.test(he)))try{var ye=Ft.call(ae,he);if(ye||O.disconnectedMatch||ae.document&&11!==ae.document.nodeType)return ye}catch{hi(he,!0)}return 0<ln(he,De,null,[ae]).length},ln.contains=function(ae,he){return(ae.ownerDocument||ae)!=De&&Le(ae),Ln(ae,he)},ln.attr=function(ae,he){(ae.ownerDocument||ae)!=De&&Le(ae);var ye=F.attrHandle[he.toLowerCase()],He=ye&&sa.call(F.attrHandle,he.toLowerCase())?ye(ae,he,!wt):void 0;return void 0!==He?He:O.attributes||!wt?ae.getAttribute(he):(He=ae.getAttributeNode(he))&&He.specified?He.value:null},ln.escape=function(ae){return(ae+"").replace(cs,Ni)},ln.error=function(ae){throw new Error("Syntax error, unrecognized expression: "+ae)},ln.uniqueSort=function(ae){var he,ye=[],He=0,Te=0;if(Ve=!O.detectDuplicates,Pe=!O.sortStable&&ae.slice(0),ae.sort(rs),Ve){for(;he=ae[Te++];)he===ae[Te]&&(He=ye.push(Te));for(;He--;)ae.splice(ye[He],1)}return Pe=null,ae},W=ln.getText=function(ae){var he,ye="",He=0,Te=ae.nodeType;if(Te){if(1===Te||9===Te||11===Te){if("string"==typeof ae.textContent)return ae.textContent;for(ae=ae.firstChild;ae;ae=ae.nextSibling)ye+=W(ae)}else if(3===Te||4===Te)return ae.nodeValue}else for(;he=ae[He++];)ye+=W(he);return ye},(F=ln.selectors={cacheLength:50,createPseudo:bi,match:js,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ae){return ae[1]=ae[1].replace(Qi,vi),ae[3]=(ae[3]||ae[4]||ae[5]||"").replace(Qi,vi),"~="===ae[2]&&(ae[3]=" "+ae[3]+" "),ae.slice(0,4)},CHILD:function(ae){return ae[1]=ae[1].toLowerCase(),"nth"===ae[1].slice(0,3)?(ae[3]||ln.error(ae[0]),ae[4]=+(ae[4]?ae[5]+(ae[6]||1):2*("even"===ae[3]||"odd"===ae[3])),ae[5]=+(ae[7]+ae[8]||"odd"===ae[3])):ae[3]&&ln.error(ae[0]),ae},PSEUDO:function(ae){var he,ye=!ae[6]&&ae[2];return js.CHILD.test(ae[0])?null:(ae[3]?ae[2]=ae[4]||ae[5]||"":ye&&_o.test(ye)&&(he=ee(ye,!0))&&(he=ye.indexOf(")",ye.length-he)-ye.length)&&(ae[0]=ae[0].slice(0,he),ae[2]=ye.slice(0,he)),ae.slice(0,3))}},filter:{TAG:function(ae){var he=ae.replace(Qi,vi).toLowerCase();return"*"===ae?function(){return!0}:function(ye){return ye.nodeName&&ye.nodeName.toLowerCase()===he}},CLASS:function(ae){var he=yn[ae+" "];return he||(he=new RegExp("(^|"+qt+")"+ae+"("+qt+"|$)"))&&yn(ae,function(ye){return he.test("string"==typeof ye.className&&ye.className||typeof ye.getAttribute<"u"&&ye.getAttribute("class")||"")})},ATTR:function(ae,he,ye){return function(He){var Te=ln.attr(He,ae);return null==Te?"!="===he:!he||(Te+="","="===he?Te===ye:"!="===he?Te!==ye:"^="===he?ye&&0===Te.indexOf(ye):"*="===he?ye&&-1<Te.indexOf(ye):"$="===he?ye&&Te.slice(-ye.length)===ye:"~="===he?-1<(" "+Te.replace(Yn," ")+" ").indexOf(ye):"|="===he&&(Te===ye||Te.slice(0,ye.length+1)===ye+"-"))}},CHILD:function(ae,he,ye,He,Te){var We="nth"!==ae.slice(0,3),Ue="last"!==ae.slice(-4),Je="of-type"===he;return 1===He&&0===Te?function(rt){return!!rt.parentNode}:function(rt,Bt,Mt){var Rt,Zt,zn,St,jn,ti,Kn=We!==Ue?"nextSibling":"previousSibling",fn=rt.parentNode,Ji=Je&&rt.nodeName.toLowerCase(),ci=!Mt&&!Je,Jn=!1;if(fn){if(We){for(;Kn;){for(St=rt;St=St[Kn];)if(Je?St.nodeName.toLowerCase()===Ji:1===St.nodeType)return!1;ti=Kn="only"===ae&&!ti&&"nextSibling"}return!0}if(ti=[Ue?fn.firstChild:fn.lastChild],Ue&&ci){for(Jn=(jn=(Rt=(Zt=(zn=(St=fn)[hn]||(St[hn]={}))[St.uniqueID]||(zn[St.uniqueID]={}))[ae]||[])[0]===pn&&Rt[1])&&Rt[2],St=jn&&fn.childNodes[jn];St=++jn&&St&&St[Kn]||(Jn=jn=0)||ti.pop();)if(1===St.nodeType&&++Jn&&St===rt){Zt[ae]=[pn,jn,Jn];break}}else if(ci&&(Jn=jn=(Rt=(Zt=(zn=(St=rt)[hn]||(St[hn]={}))[St.uniqueID]||(zn[St.uniqueID]={}))[ae]||[])[0]===pn&&Rt[1]),!1===Jn)for(;(St=++jn&&St&&St[Kn]||(Jn=jn=0)||ti.pop())&&((Je?St.nodeName.toLowerCase()!==Ji:1!==St.nodeType)||!++Jn||(ci&&((Zt=(zn=St[hn]||(St[hn]={}))[St.uniqueID]||(zn[St.uniqueID]={}))[ae]=[pn,Jn]),St!==rt)););return(Jn-=Te)===He||Jn%He==0&&0<=Jn/He}}},PSEUDO:function(ae,he){var ye,He=F.pseudos[ae]||F.setFilters[ae.toLowerCase()]||ln.error("unsupported pseudo: "+ae);return He[hn]?He(he):1<He.length?(ye=[ae,ae,"",he],F.setFilters.hasOwnProperty(ae.toLowerCase())?bi(function(Te,We){for(var Ue,Je=He(Te,he),rt=Je.length;rt--;)Te[Ue=gi(Te,Je[rt])]=!(We[Ue]=Je[rt])}):function(Te){return He(Te,0,ye)}):He}},pseudos:{not:bi(function(ae){var he=[],ye=[],He=ge(ae.replace(mi,"$1"));return He[hn]?bi(function(Te,We,Ue,Je){for(var rt,Bt=He(Te,null,Je,[]),Mt=Te.length;Mt--;)(rt=Bt[Mt])&&(Te[Mt]=!(We[Mt]=rt))}):function(Te,We,Ue){return he[0]=Te,He(he,null,Ue,ye),he[0]=null,!ye.pop()}}),has:bi(function(ae){return function(he){return 0<ln(ae,he).length}}),contains:bi(function(ae){return ae=ae.replace(Qi,vi),function(he){return-1<(he.textContent||W(he)).indexOf(ae)}}),lang:bi(function(ae){return ml.test(ae||"")||ln.error("unsupported lang: "+ae),ae=ae.replace(Qi,vi).toLowerCase(),function(he){var ye;do{if(ye=wt?he.lang:he.getAttribute("xml:lang")||he.getAttribute("lang"))return(ye=ye.toLowerCase())===ae||0===ye.indexOf(ae+"-")}while((he=he.parentNode)&&1===he.nodeType);return!1}}),target:function(ae){var he=y.location&&y.location.hash;return he&&he.slice(1)===ae.id},root:function(ae){return ae===ut},focus:function(ae){return ae===De.activeElement&&(!De.hasFocus||De.hasFocus())&&!!(ae.type||ae.href||~ae.tabIndex)},enabled:eo(!1),disabled:eo(!0),checked:function(ae){var he=ae.nodeName.toLowerCase();return"input"===he&&!!ae.checked||"option"===he&&!!ae.selected},selected:function(ae){return!0===ae.selected},empty:function(ae){for(ae=ae.firstChild;ae;ae=ae.nextSibling)if(ae.nodeType<6)return!1;return!0},parent:function(ae){return!F.pseudos.empty(ae)},header:function(ae){return vl.test(ae.nodeName)},input:function(ae){return zo.test(ae.nodeName)},button:function(ae){var he=ae.nodeName.toLowerCase();return"input"===he&&"button"===ae.type||"button"===he},text:function(ae){var he;return"input"===ae.nodeName.toLowerCase()&&"text"===ae.type&&(null==(he=ae.getAttribute("type"))||"text"===he.toLowerCase())},first:Da(function(){return[0]}),last:Da(function(ae,he){return[he-1]}),eq:Da(function(ae,he,ye){return[ye<0?ye+he:ye]}),even:Da(function(ae,he){for(var ye=0;ye<he;ye+=2)ae.push(ye);return ae}),odd:Da(function(ae,he){for(var ye=1;ye<he;ye+=2)ae.push(ye);return ae}),lt:Da(function(ae,he,ye){for(var He=ye<0?ye+he:he<ye?he:ye;0<=--He;)ae.push(He);return ae}),gt:Da(function(ae,he,ye){for(var He=ye<0?ye+he:ye;++He<he;)ae.push(He);return ae})}}).pseudos.nth=F.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})F.pseudos[E]=Cr(E);for(E in{submit:!0,reset:!0})F.pseudos[E]=Ri(E);function Us(){}function Ia(ae){for(var he=0,ye=ae.length,He="";he<ye;he++)He+=ae[he].value;return He}function As(ae,he,ye){var He=he.dir,Te=he.next,We=Te||He,Ue=ye&&"parentNode"===We,Je=an++;return he.first?function(rt,Bt,Mt){for(;rt=rt[He];)if(1===rt.nodeType||Ue)return ae(rt,Bt,Mt);return!1}:function(rt,Bt,Mt){var Rt,Zt,zn,St=[pn,Je];if(Mt){for(;rt=rt[He];)if((1===rt.nodeType||Ue)&&ae(rt,Bt,Mt))return!0}else for(;rt=rt[He];)if(1===rt.nodeType||Ue)if(Zt=(zn=rt[hn]||(rt[hn]={}))[rt.uniqueID]||(zn[rt.uniqueID]={}),Te&&Te===rt.nodeName.toLowerCase())rt=rt[He]||rt;else{if((Rt=Zt[We])&&Rt[0]===pn&&Rt[1]===Je)return St[2]=Rt[2];if((Zt[We]=St)[2]=ae(rt,Bt,Mt))return!0}return!1}}function no(ae){return 1<ae.length?function(he,ye,He){for(var Te=ae.length;Te--;)if(!ae[Te](he,ye,He))return!1;return!0}:ae[0]}function Gs(ae,he,ye,He,Te){for(var We,Ue=[],Je=0,rt=ae.length,Bt=null!=he;Je<rt;Je++)(We=ae[Je])&&(ye&&!ye(We,He,Te)||(Ue.push(We),Bt&&he.push(Je)));return Ue}function Ys(ae,he,ye,He,Te,We){return He&&!He[hn]&&(He=Ys(He)),Te&&!Te[hn]&&(Te=Ys(Te,We)),bi(function(Ue,Je,rt,Bt){var Mt,Rt,Zt,zn=[],St=[],jn=Je.length,ti=Ue||function(Ji,ci,Jn){for(var Vi=0,kr=ci.length;Vi<kr;Vi++)ln(Ji,ci[Vi],Jn);return Jn}(he||"*",rt.nodeType?[rt]:rt,[]),Kn=!ae||!Ue&&he?ti:Gs(ti,zn,ae,rt,Bt),fn=ye?Te||(Ue?ae:jn||He)?[]:Je:Kn;if(ye&&ye(Kn,fn,rt,Bt),He)for(Mt=Gs(fn,St),He(Mt,[],rt,Bt),Rt=Mt.length;Rt--;)(Zt=Mt[Rt])&&(fn[St[Rt]]=!(Kn[St[Rt]]=Zt));if(Ue){if(Te||ae){if(Te){for(Mt=[],Rt=fn.length;Rt--;)(Zt=fn[Rt])&&Mt.push(Kn[Rt]=Zt);Te(null,fn=[],Mt,Bt)}for(Rt=fn.length;Rt--;)(Zt=fn[Rt])&&-1<(Mt=Te?gi(Ue,Zt):zn[Rt])&&(Ue[Mt]=!(Je[Mt]=Zt))}}else fn=Gs(fn===Je?fn.splice(jn,fn.length):fn),Te?Te(null,Je,fn,Bt):En.apply(Je,fn)})}function Ks(ae){for(var he,ye,He,Te=ae.length,We=F.relative[ae[0].type],Ue=We||F.relative[" "],Je=We?1:0,rt=As(function(Rt){return Rt===he},Ue,!0),Bt=As(function(Rt){return-1<gi(he,Rt)},Ue,!0),Mt=[function(Rt,Zt,zn){var St=!We&&(zn||Zt!==xe)||((he=Zt).nodeType?rt(Rt,Zt,zn):Bt(Rt,Zt,zn));return he=null,St}];Je<Te;Je++)if(ye=F.relative[ae[Je].type])Mt=[As(no(Mt),ye)];else{if((ye=F.filter[ae[Je].type].apply(null,ae[Je].matches))[hn]){for(He=++Je;He<Te&&!F.relative[ae[He].type];He++);return Ys(1<Je&&no(Mt),1<Je&&Ia(ae.slice(0,Je-1).concat({value:" "===ae[Je-2].type?"*":""})).replace(mi,"$1"),ye,Je<He&&Ks(ae.slice(Je,He)),He<Te&&Ks(ae=ae.slice(He)),He<Te&&Ia(ae))}Mt.push(ye)}return no(Mt)}return Us.prototype=F.filters=F.pseudos,F.setFilters=new Us,ee=ln.tokenize=function(ae,he){var ye,He,Te,We,Ue,Je,rt,Bt=ss[ae+" "];if(Bt)return he?0:Bt.slice(0);for(Ue=ae,Je=[],rt=F.preFilter;Ue;){for(We in ye&&!(He=Ts.exec(Ue))||(He&&(Ue=Ue.slice(He[0].length)||Ue),Je.push(Te=[])),ye=!1,(He=os.exec(Ue))&&(ye=He.shift(),Te.push({value:ye,type:He[0].replace(mi," ")}),Ue=Ue.slice(ye.length)),F.filter)!(He=js[We].exec(Ue))||rt[We]&&!(He=rt[We](He))||(ye=He.shift(),Te.push({value:ye,type:We,matches:He}),Ue=Ue.slice(ye.length));if(!ye)break}return he?Ue.length:Ue?ln.error(ae):ss(ae,Je).slice(0)},ge=ln.compile=function(ae,he){var ye,He,Te,We,Ue,Je,rt=[],Bt=[],Mt=_a[ae+" "];if(!Mt){for(he||(he=ee(ae)),ye=he.length;ye--;)(Mt=Ks(he[ye]))[hn]?rt.push(Mt):Bt.push(Mt);(Mt=_a(ae,(He=Bt,We=0<(Te=rt).length,Ue=0<He.length,Je=function(Rt,Zt,zn,St,jn){var ti,Kn,fn,Ji=0,ci="0",Jn=Rt&&[],Vi=[],kr=xe,Tr=Rt||Ue&&F.find.TAG("*",jn),io=pn+=null==kr?1:Math.random()||.1,ao=Tr.length;for(jn&&(xe=Zt==De||Zt||jn);ci!==ao&&null!=(ti=Tr[ci]);ci++){if(Ue&&ti){for(Kn=0,Zt||ti.ownerDocument==De||(Le(ti),zn=!wt);fn=He[Kn++];)if(fn(ti,Zt||De,zn)){St.push(ti);break}jn&&(pn=io)}We&&((ti=!fn&&ti)&&Ji--,Rt&&Jn.push(ti))}if(Ji+=ci,We&&ci!==Ji){for(Kn=0;fn=Te[Kn++];)fn(Jn,Vi,Zt,zn);if(Rt){if(0<Ji)for(;ci--;)Jn[ci]||Vi[ci]||(Vi[ci]=za.call(St));Vi=Gs(Vi)}En.apply(St,Vi),jn&&!Rt&&0<Vi.length&&1<Ji+Te.length&&ln.uniqueSort(St)}return jn&&(pn=io,xe=kr),Jn},We?bi(Je):Je))).selector=ae}return Mt},pe=ln.select=function(ae,he,ye,He){var Te,We,Ue,Je,rt,Bt="function"==typeof ae&&ae,Mt=!He&&ee(ae=Bt.selector||ae);if(ye=ye||[],1===Mt.length){if(2<(We=Mt[0]=Mt[0].slice(0)).length&&"ID"===(Ue=We[0]).type&&9===he.nodeType&&wt&&F.relative[We[1].type]){if(!(he=(F.find.ID(Ue.matches[0].replace(Qi,vi),he)||[])[0]))return ye;Bt&&(he=he.parentNode),ae=ae.slice(We.shift().value.length)}for(Te=js.needsContext.test(ae)?0:We.length;Te--&&!F.relative[Je=(Ue=We[Te]).type];)if((rt=F.find[Je])&&(He=rt(Ue.matches[0].replace(Qi,vi),ls.test(We[0].type)&&to(he.parentNode)||he))){if(We.splice(Te,1),!(ae=He.length&&Ia(We)))return En.apply(ye,He),ye;break}}return(Bt||ge(ae,Mt))(He,he,!wt,ye,!he||ls.test(ae)&&to(he.parentNode)||he),ye},O.sortStable=hn.split("").sort(rs).join("")===hn,O.detectDuplicates=!!Ve,Le(),O.sortDetached=oa(function(ae){return 1&ae.compareDocumentPosition(De.createElement("fieldset"))}),oa(function(ae){return ae.innerHTML="<a href='#'></a>","#"===ae.firstChild.getAttribute("href")})||va("type|href|height|width",function(ae,he,ye){if(!ye)return ae.getAttribute(he,"type"===he.toLowerCase()?1:2)}),O.attributes&&oa(function(ae){return ae.innerHTML="<input/>",ae.firstChild.setAttribute("value",""),""===ae.firstChild.getAttribute("value")})||va("value",function(ae,he,ye){if(!ye&&"input"===ae.nodeName.toLowerCase())return ae.defaultValue}),oa(function(ae){return null==ae.getAttribute("disabled")})||va(ma,function(ae,he,ye){var He;if(!ye)return!0===ae[he]?he.toLowerCase():(He=ae.getAttributeNode(he))&&He.specified?He.value:null}),ln}(R);H.find=Ui,H.expr=Ui.selectors,H.expr[":"]=H.expr.pseudos,H.uniqueSort=H.unique=Ui.uniqueSort,H.text=Ui.getText,H.isXMLDoc=Ui.isXML,H.contains=Ui.contains,H.escapeSelector=Ui.escape;var pa=function(y,E,O){for(var F=[],W=void 0!==O;(y=y[E])&&9!==y.nodeType;)if(1===y.nodeType){if(W&&H(y).is(O))break;F.push(y)}return F},_=function(y,E){for(var O=[];y;y=y.nextSibling)1===y.nodeType&&y!==E&&O.push(y);return O},lr=H.expr.match.needsContext;function Hi(y,E){return y.nodeName&&y.nodeName.toLowerCase()===E.toLowerCase()}var Aa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Fr(y,E,O){return $e(E)?H.grep(y,function(F,W){return!!E.call(F,W,F)!==O}):E.nodeType?H.grep(y,function(F){return F===E!==O}):"string"!=typeof E?H.grep(y,function(F){return-1<Ge.call(E,F)!==O}):H.filter(E,y,O)}H.filter=function(y,E,O){var F=E[0];return O&&(y=":not("+y+")"),1===E.length&&1===F.nodeType?H.find.matchesSelector(F,y)?[F]:[]:H.find.matches(y,H.grep(E,function(W){return 1===W.nodeType}))},H.fn.extend({find:function(y){var E,O,F=this.length,W=this;if("string"!=typeof y)return this.pushStack(H(y).filter(function(){for(E=0;E<F;E++)if(H.contains(W[E],this))return!0}));for(O=this.pushStack([]),E=0;E<F;E++)H.find(y,W[E],O);return 1<F?H.uniqueSort(O):O},filter:function(y){return this.pushStack(Fr(this,y||[],!1))},not:function(y){return this.pushStack(Fr(this,y||[],!0))},is:function(y){return!!Fr(this,"string"==typeof y&&lr.test(y)?H(y):y||[],!1).length}});var at,fs=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(H.fn.init=function(y,E,O){var F,W;if(!y)return this;if(O=O||at,"string"==typeof y){if(!(F="<"===y[0]&&">"===y[y.length-1]&&3<=y.length?[null,y,null]:fs.exec(y))||!F[1]&&E)return!E||E.jquery?(E||O).find(y):this.constructor(E).find(y);if(F[1]){if(H.merge(this,H.parseHTML(F[1],(E=E instanceof H?E[0]:E)&&E.nodeType?E.ownerDocument||E:it,!0)),Aa.test(F[1])&&H.isPlainObject(E))for(F in E)$e(this[F])?this[F](E[F]):this.attr(F,E[F]);return this}return(W=it.getElementById(F[2]))&&(this[0]=W,this.length=1),this}return y.nodeType?(this[0]=y,this.length=1,this):$e(y)?void 0!==O.ready?O.ready(y):y(H):H.makeArray(y,this)}).prototype=H.fn,at=H(it);var pt=/^(?:parents|prev(?:Until|All))/,Ls={children:!0,contents:!0,next:!0,prev:!0};function gs(y,E){for(;(y=y[E])&&1!==y.nodeType;);return y}H.fn.extend({has:function(y){var E=H(y,this),O=E.length;return this.filter(function(){for(var F=0;F<O;F++)if(H.contains(this,E[F]))return!0})},closest:function(y,E){var O,F=0,W=this.length,Q=[],ee="string"!=typeof y&&H(y);if(!lr.test(y))for(;F<W;F++)for(O=this[F];O&&O!==E;O=O.parentNode)if(O.nodeType<11&&(ee?-1<ee.index(O):1===O.nodeType&&H.find.matchesSelector(O,y))){Q.push(O);break}return this.pushStack(1<Q.length?H.uniqueSort(Q):Q)},index:function(y){return y?"string"==typeof y?Ge.call(H(y),this[0]):Ge.call(this,y.jquery?y[0]:y):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(y,E){return this.pushStack(H.uniqueSort(H.merge(this.get(),H(y,E))))},addBack:function(y){return this.add(null==y?this.prevObject:this.prevObject.filter(y))}}),H.each({parent:function(y){var E=y.parentNode;return E&&11!==E.nodeType?E:null},parents:function(y){return pa(y,"parentNode")},parentsUntil:function(y,E,O){return pa(y,"parentNode",O)},next:function(y){return gs(y,"nextSibling")},prev:function(y){return gs(y,"previousSibling")},nextAll:function(y){return pa(y,"nextSibling")},prevAll:function(y){return pa(y,"previousSibling")},nextUntil:function(y,E,O){return pa(y,"nextSibling",O)},prevUntil:function(y,E,O){return pa(y,"previousSibling",O)},siblings:function(y){return _((y.parentNode||{}).firstChild,y)},children:function(y){return _(y.firstChild)},contents:function(y){return null!=y.contentDocument&&yo(y.contentDocument)?y.contentDocument:(Hi(y,"template")&&(y=y.content||y),H.merge([],y.childNodes))}},function(y,E){H.fn[y]=function(O,F){var W=H.map(this,E,O);return"Until"!==y.slice(-5)&&(F=O),F&&"string"==typeof F&&(W=H.filter(F,W)),1<this.length&&(Ls[y]||H.uniqueSort(W),pt.test(y)&&W.reverse()),this.pushStack(W)}});var Ei=/[^\x20\t\r\n\f]+/g;function Ua(y){return y}function P(y){throw y}function Co(y,E,O,F){var W;try{y&&$e(W=y.promise)?W.call(y).done(E).fail(O):y&&$e(W=y.then)?W.call(y,E,O):E.apply(void 0,[y].slice(F))}catch(Q){O.apply(void 0,[Q])}}H.Callbacks=function(y){var O;y="string"==typeof y?(O={},H.each(y.match(Ei)||[],function(Le,De){O[De]=!0}),O):H.extend({},y);var F,W,Q,ee,ge=[],pe=[],xe=-1,Pe=function(){for(ee=ee||y.once,Q=F=!0;pe.length;xe=-1)for(W=pe.shift();++xe<ge.length;)!1===ge[xe].apply(W[0],W[1])&&y.stopOnFalse&&(xe=ge.length,W=!1);y.memory||(W=!1),F=!1,ee&&(ge=W?[]:"")},Ve={add:function(){return ge&&(W&&!F&&(xe=ge.length-1,pe.push(W)),function Le(De){H.each(De,function(ut,wt){$e(wt)?y.unique&&Ve.has(wt)||ge.push(wt):wt&&wt.length&&"string"!==Ie(wt)&&Le(wt)})}(arguments),W&&!F&&Pe()),this},remove:function(){return H.each(arguments,function(Le,De){for(var ut;-1<(ut=H.inArray(De,ge,ut));)ge.splice(ut,1),ut<=xe&&xe--}),this},has:function(Le){return Le?-1<H.inArray(Le,ge):0<ge.length},empty:function(){return ge&&(ge=[]),this},disable:function(){return ee=pe=[],ge=W="",this},disabled:function(){return!ge},lock:function(){return ee=pe=[],W||F||(ge=W=""),this},locked:function(){return!!ee},fireWith:function(Le,De){return ee||(De=[Le,(De=De||[]).slice?De.slice():De],pe.push(De),F||Pe()),this},fire:function(){return Ve.fireWith(this,arguments),this},fired:function(){return!!Q}};return Ve},H.extend({Deferred:function(y){var E=[["notify","progress",H.Callbacks("memory"),H.Callbacks("memory"),2],["resolve","done",H.Callbacks("once memory"),H.Callbacks("once memory"),0,"resolved"],["reject","fail",H.Callbacks("once memory"),H.Callbacks("once memory"),1,"rejected"]],O="pending",F={state:function(){return O},always:function(){return W.done(arguments).fail(arguments),this},catch:function(Q){return F.then(null,Q)},pipe:function(){var Q=arguments;return H.Deferred(function(ee){H.each(E,function(ge,pe){var xe=$e(Q[pe[4]])&&Q[pe[4]];W[pe[1]](function(){var Pe=xe&&xe.apply(this,arguments);Pe&&$e(Pe.promise)?Pe.promise().progress(ee.notify).done(ee.resolve).fail(ee.reject):ee[pe[0]+"With"](this,xe?[Pe]:arguments)})}),Q=null}).promise()},then:function(Q,ee,ge){var pe=0;function xe(Pe,Ve,Le,De){return function(){var ut=this,wt=arguments,vt=function(){var Ft,Ln;if(!(Pe<pe)){if((Ft=Le.apply(ut,wt))===Ve.promise())throw new TypeError("Thenable self-resolution");$e(Ln=Ft&&("object"==typeof Ft||"function"==typeof Ft)&&Ft.then)?De?Ln.call(Ft,xe(pe,Ve,Ua,De),xe(pe,Ve,P,De)):(pe++,Ln.call(Ft,xe(pe,Ve,Ua,De),xe(pe,Ve,P,De),xe(pe,Ve,Ua,Ve.notifyWith))):(Le!==Ua&&(ut=void 0,wt=[Ft]),(De||Ve.resolveWith)(ut,wt))}},Sn=De?vt:function(){try{vt()}catch(Ft){H.Deferred.exceptionHook&&H.Deferred.exceptionHook(Ft,Sn.stackTrace),pe<=Pe+1&&(Le!==P&&(ut=void 0,wt=[Ft]),Ve.rejectWith(ut,wt))}};Pe?Sn():(H.Deferred.getStackHook&&(Sn.stackTrace=H.Deferred.getStackHook()),R.setTimeout(Sn))}}return H.Deferred(function(Pe){E[0][3].add(xe(0,Pe,$e(ge)?ge:Ua,Pe.notifyWith)),E[1][3].add(xe(0,Pe,$e(Q)?Q:Ua)),E[2][3].add(xe(0,Pe,$e(ee)?ee:P))}).promise()},promise:function(Q){return null!=Q?H.extend(Q,F):F}},W={};return H.each(E,function(Q,ee){var ge=ee[2],pe=ee[5];F[ee[1]]=ge.add,pe&&ge.add(function(){O=pe},E[3-Q][2].disable,E[3-Q][3].disable,E[0][2].lock,E[0][3].lock),ge.add(ee[3].fire),W[ee[0]]=function(){return W[ee[0]+"With"](this===W?void 0:this,arguments),this},W[ee[0]+"With"]=ge.fireWith}),F.promise(W),y&&y.call(W,W),W},when:function(y){var E=arguments.length,O=E,F=Array(O),W=Si.call(arguments),Q=H.Deferred(),ee=function(ge){return function(pe){F[ge]=this,W[ge]=1<arguments.length?Si.call(arguments):pe,--E||Q.resolveWith(F,W)}};if(E<=1&&(Co(y,Q.done(ee(O)).resolve,Q.reject,!E),"pending"===Q.state()||$e(W[O]&&W[O].then)))return Q.then();for(;O--;)Co(W[O],ee(O),Q.reject);return Q.promise()}});var ei=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;H.Deferred.exceptionHook=function(y,E){R.console&&R.console.warn&&y&&ei.test(y.name)&&R.console.warn("jQuery.Deferred exception: "+y.message,y.stack,E)},H.readyException=function(y){R.setTimeout(function(){throw y})};var Ga=H.Deferred();function Sa(){it.removeEventListener("DOMContentLoaded",Sa),R.removeEventListener("load",Sa),H.ready()}H.fn.ready=function(y){return Ga.then(y).catch(function(E){H.readyException(E)}),this},H.extend({isReady:!1,readyWait:1,ready:function(y){(!0===y?--H.readyWait:H.isReady)||(H.isReady=!0)!==y&&0<--H.readyWait||Ga.resolveWith(it,[H])}}),H.ready.then=Ga.then,"complete"===it.readyState||"loading"!==it.readyState&&!it.documentElement.doScroll?R.setTimeout(H.ready):(it.addEventListener("DOMContentLoaded",Sa),R.addEventListener("load",Sa));var xi=function(y,E,O,F,W,Q,ee){var ge=0,pe=y.length,xe=null==O;if("object"===Ie(O))for(ge in W=!0,O)xi(y,E,ge,O[ge],!0,Q,ee);else if(void 0!==F&&(W=!0,$e(F)||(ee=!0),xe&&(ee?(E.call(y,F),E=null):(xe=E,E=function(Pe,Ve,Le){return xe.call(H(Pe),Le)})),E))for(;ge<pe;ge++)E(y[ge],O,ee?F:F.call(y[ge],ge,E(y[ge],O)));return W?y:xe?E.call(y):pe?E(y[0],O):Q},Ya=/^-ms-/,il=/-([a-z])/g;function al(y,E){return E.toUpperCase()}function $i(y){return y.replace(Ya,"ms-").replace(il,al)}var nn=function(y){return 1===y.nodeType||9===y.nodeType||!+y.nodeType};function Ka(){this.expando=H.expando+Ka.uid++}Ka.uid=1,Ka.prototype={cache:function(y){var E=y[this.expando];return E||(E={},nn(y)&&(y.nodeType?y[this.expando]=E:Object.defineProperty(y,this.expando,{value:E,configurable:!0}))),E},set:function(y,E,O){var F,W=this.cache(y);if("string"==typeof E)W[$i(E)]=O;else for(F in E)W[$i(F)]=E[F];return W},get:function(y,E){return void 0===E?this.cache(y):y[this.expando]&&y[this.expando][$i(E)]},access:function(y,E,O){return void 0===E||E&&"string"==typeof E&&void 0===O?this.get(y,E):(this.set(y,E,O),void 0!==O?O:E)},remove:function(y,E){var O,F=y[this.expando];if(void 0!==F){if(void 0!==E)for((O=(E=Array.isArray(E)?E.map($i):(E=$i(E))in F?[E]:E.match(Ei)||[]).length);O--;)delete F[E[O]];(void 0===E||H.isEmptyObject(F))&&(y.nodeType?y[this.expando]=void 0:delete y[this.expando])}},hasData:function(y){var E=y[this.expando];return void 0!==E&&!H.isEmptyObject(E)}};var dt=new Ka,oi=new Ka,ko=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ps=/[A-Z]/g;function To(y,E,O){var F,W;if(void 0===O&&1===y.nodeType)if(F="data-"+E.replace(Ps,"-$&").toLowerCase(),"string"==typeof(O=y.getAttribute(F))){try{O="true"===(W=O)||"false"!==W&&("null"===W?null:W===+W+""?+W:ko.test(W)?JSON.parse(W):W)}catch{}oi.set(y,E,O)}else O=void 0;return O}H.extend({hasData:function(y){return oi.hasData(y)||dt.hasData(y)},data:function(y,E,O){return oi.access(y,E,O)},removeData:function(y,E){oi.remove(y,E)},_data:function(y,E,O){return dt.access(y,E,O)},_removeData:function(y,E){dt.remove(y,E)}}),H.fn.extend({data:function(y,E){var O,F,W,Q=this[0],ee=Q&&Q.attributes;if(void 0===y){if(this.length&&(W=oi.get(Q),1===Q.nodeType&&!dt.get(Q,"hasDataAttrs"))){for(O=ee.length;O--;)ee[O]&&0===(F=ee[O].name).indexOf("data-")&&(F=$i(F.slice(5)),To(Q,F,W[F]));dt.set(Q,"hasDataAttrs",!0)}return W}return"object"==typeof y?this.each(function(){oi.set(this,y)}):xi(this,function(ge){var pe;if(Q&&void 0===ge)return void 0!==(pe=oi.get(Q,y))||void 0!==(pe=To(Q,y))?pe:void 0;this.each(function(){oi.set(this,y,ge)})},null,E,1<arguments.length,null,!0)},removeData:function(y){return this.each(function(){oi.remove(this,y)})}}),H.extend({queue:function(y,E,O){var F;if(y)return F=dt.get(y,E=(E||"fx")+"queue"),O&&(!F||Array.isArray(O)?F=dt.access(y,E,H.makeArray(O)):F.push(O)),F||[]},dequeue:function(y,E){var O=H.queue(y,E=E||"fx"),F=O.length,W=O.shift(),Q=H._queueHooks(y,E);"inprogress"===W&&(W=O.shift(),F--),W&&("fx"===E&&O.unshift("inprogress"),delete Q.stop,W.call(y,function(){H.dequeue(y,E)},Q)),!F&&Q&&Q.empty.fire()},_queueHooks:function(y,E){var O=E+"queueHooks";return dt.get(y,O)||dt.access(y,O,{empty:H.Callbacks("once memory").add(function(){dt.remove(y,[E+"queue",O])})})}}),H.fn.extend({queue:function(y,E){var O=2;return"string"!=typeof y&&(E=y,y="fx",O--),arguments.length<O?H.queue(this[0],y):void 0===E?this:this.each(function(){var F=H.queue(this,y,E);H._queueHooks(this,y),"fx"===y&&"inprogress"!==F[0]&&H.dequeue(this,y)})},dequeue:function(y){return this.each(function(){H.dequeue(this,y)})},clearQueue:function(y){return this.queue(y||"fx",[])},promise:function(y,E){var O,F=1,W=H.Deferred(),Q=this,ee=this.length,ge=function(){--F||W.resolveWith(Q,[Q])};for("string"!=typeof y&&(E=y,y=void 0),y=y||"fx";ee--;)(O=dt.get(Q[ee],y+"queueHooks"))&&O.empty&&(F++,O.empty.add(ge));return ge(),W.promise(E)}});var qi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xa=new RegExp("^(?:([+-])=|)("+qi+")([a-z%]*)$","i"),fa=["Top","Right","Bottom","Left"],Di=it.documentElement,ms=function(y){return H.contains(y.ownerDocument,y)},Ul={composed:!0};Di.getRootNode&&(ms=function(y){return H.contains(y.ownerDocument,y)||y.getRootNode(Ul)===y.ownerDocument});var Hr=function(y,E){return"none"===(y=E||y).style.display||""===y.style.display&&ms(y)&&"none"===H.css(y,"display")};function sl(y,E,O,F){var W,Q,ee=20,ge=F?function(){return F.cur()}:function(){return H.css(y,E,"")},pe=ge(),xe=O&&O[3]||(H.cssNumber[E]?"":"px"),Pe=y.nodeType&&(H.cssNumber[E]||"px"!==xe&&+pe)&&Xa.exec(H.css(y,E));if(Pe&&Pe[3]!==xe){for(xe=xe||Pe[3],Pe=+(pe/=2)||1;ee--;)H.style(y,E,Pe+xe),(1-Q)*(1-(Q=ge()/pe||.5))<=0&&(ee=0),Pe/=Q;H.style(y,E,(Pe*=2)+xe),O=O||[]}return O&&(Pe=+Pe||+pe||0,W=O[1]?Pe+(O[1]+1)*O[2]:+O[2],F&&(F.unit=xe,F.start=Pe,F.end=W)),W}var qr={};function ta(y,E){for(var O,F,W,Q,ee,ge,pe,xe=[],Pe=0,Ve=y.length;Pe<Ve;Pe++)(F=y[Pe]).style&&(O=F.style.display,E?("none"===O&&(xe[Pe]=dt.get(F,"display")||null,xe[Pe]||(F.style.display="")),""===F.style.display&&Hr(F)&&(xe[Pe]=(pe=ee=Q=void 0,ee=(W=F).ownerDocument,(pe=qr[ge=W.nodeName])||(Q=ee.body.appendChild(ee.createElement(ge)),pe=H.css(Q,"display"),Q.parentNode.removeChild(Q),"none"===pe&&(pe="block"),qr[ge]=pe)))):"none"!==O&&(xe[Pe]="none",dt.set(F,"display",O)));for(Pe=0;Pe<Ve;Pe++)null!=xe[Pe]&&(y[Pe].style.display=xe[Pe]);return y}H.fn.extend({show:function(){return ta(this,!0)},hide:function(){return ta(this)},toggle:function(y){return"boolean"==typeof y?y?this.show():this.hide():this.each(function(){Hr(this)?H(this).show():H(this).hide()})}});var mt,Ns,vs=/^(?:checkbox|radio)$/i,Vr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ci=/^$|^module$|\/(?:java|ecma)script/i;mt=it.createDocumentFragment().appendChild(it.createElement("div")),(Ns=it.createElement("input")).setAttribute("type","radio"),Ns.setAttribute("checked","checked"),Ns.setAttribute("name","t"),mt.appendChild(Ns),un.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML="<textarea>x</textarea>",un.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue,mt.innerHTML="<option></option>",un.option=!!mt.lastChild;var Gi={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ii(y,E){var O;return O=typeof y.getElementsByTagName<"u"?y.getElementsByTagName(E||"*"):typeof y.querySelectorAll<"u"?y.querySelectorAll(E||"*"):[],void 0===E||E&&Hi(y,E)?H.merge([y],O):O}function Ao(y,E){for(var O=0,F=y.length;O<F;O++)dt.set(y[O],"globalEval",!E||dt.get(E[O],"globalEval"))}Gi.tbody=Gi.tfoot=Gi.colgroup=Gi.caption=Gi.thead,Gi.th=Gi.td,un.option||(Gi.optgroup=Gi.option=[1,"<select multiple='multiple'>","</select>"]);var So=/<|&#?\w+;/;function Qa(y,E,O,F,W){for(var Q,ee,ge,pe,xe,Pe,Ve=E.createDocumentFragment(),Le=[],De=0,ut=y.length;De<ut;De++)if((Q=y[De])||0===Q)if("object"===Ie(Q))H.merge(Le,Q.nodeType?[Q]:Q);else if(So.test(Q)){for(ee=ee||Ve.appendChild(E.createElement("div")),ge=(Vr.exec(Q)||["",""])[1].toLowerCase(),ee.innerHTML=(pe=Gi[ge]||Gi._default)[1]+H.htmlPrefilter(Q)+pe[2],Pe=pe[0];Pe--;)ee=ee.lastChild;H.merge(Le,ee.childNodes),(ee=Ve.firstChild).textContent=""}else Le.push(E.createTextNode(Q));for(Ve.textContent="",De=0;Q=Le[De++];)if(F&&-1<H.inArray(Q,F))W&&W.push(Q);else if(xe=ms(Q),ee=Ii(Ve.appendChild(Q),"script"),xe&&Ao(ee),O)for(Pe=0;Q=ee[Pe++];)Ci.test(Q.type||"")&&O.push(Q);return Ve}var rl=/^([^.]*)(?:\.(.+)|)/;function Rs(){return!0}function Os(){return!1}function ol(y,E){return y===function(){try{return it.activeElement}catch{}}()==("focus"===E)}function Eo(y,E,O,F,W,Q){var ee,ge;if("object"==typeof E){for(ge in"string"!=typeof O&&(F=F||O,O=void 0),E)Eo(y,ge,O,F,E[ge],Q);return y}if(null==F&&null==W?(W=O,F=O=void 0):null==W&&("string"==typeof O?(W=F,F=void 0):(W=F,F=O,O=void 0)),!1===W)W=Os;else if(!W)return y;return 1===Q&&(ee=W,(W=function(pe){return H().off(pe),ee.apply(this,arguments)}).guid=ee.guid||(ee.guid=H.guid++)),y.each(function(){H.event.add(this,E,W,F,O)})}function Pa(y,E,O){O?(dt.set(y,E,!1),H.event.add(y,E,{namespace:!1,handler:function(F){var W,Q,ee=dt.get(this,E);if(1&F.isTrigger&&this[E]){if(ee.length)(H.event.special[E]||{}).delegateType&&F.stopPropagation();else if(ee=Si.call(arguments),dt.set(this,E,ee),W=O(this,E),this[E](),ee!==(Q=dt.get(this,E))||W?dt.set(this,E,!1):Q={},ee!==Q)return F.stopImmediatePropagation(),F.preventDefault(),Q&&Q.value}else ee.length&&(dt.set(this,E,{value:H.event.trigger(H.extend(ee[0],H.Event.prototype),ee.slice(1),this)}),F.stopImmediatePropagation())}})):void 0===dt.get(y,E)&&H.event.add(y,E,Rs)}H.event={global:{},add:function(y,E,O,F,W){var Q,ee,ge,pe,xe,Pe,Ve,Le,De,ut,wt,vt=dt.get(y);if(nn(y))for(O.handler&&(O=(Q=O).handler,W=Q.selector),W&&H.find.matchesSelector(Di,W),O.guid||(O.guid=H.guid++),(pe=vt.events)||(pe=vt.events=Object.create(null)),(ee=vt.handle)||(ee=vt.handle=function(Sn){return typeof H<"u"&&H.event.triggered!==Sn.type?H.event.dispatch.apply(y,arguments):void 0}),xe=(E=(E||"").match(Ei)||[""]).length;xe--;)De=wt=(ge=rl.exec(E[xe])||[])[1],ut=(ge[2]||"").split(".").sort(),De&&(Ve=H.event.special[De]||{},Ve=H.event.special[De=(W?Ve.delegateType:Ve.bindType)||De]||{},Pe=H.extend({type:De,origType:wt,data:F,handler:O,guid:O.guid,selector:W,needsContext:W&&H.expr.match.needsContext.test(W),namespace:ut.join(".")},Q),(Le=pe[De])||((Le=pe[De]=[]).delegateCount=0,Ve.setup&&!1!==Ve.setup.call(y,F,ut,ee)||y.addEventListener&&y.addEventListener(De,ee)),Ve.add&&(Ve.add.call(y,Pe),Pe.handler.guid||(Pe.handler.guid=O.guid)),W?Le.splice(Le.delegateCount++,0,Pe):Le.push(Pe),H.event.global[De]=!0)},remove:function(y,E,O,F,W){var Q,ee,ge,pe,xe,Pe,Ve,Le,De,ut,wt,vt=dt.hasData(y)&&dt.get(y);if(vt&&(pe=vt.events)){for(xe=(E=(E||"").match(Ei)||[""]).length;xe--;)if(De=wt=(ge=rl.exec(E[xe])||[])[1],ut=(ge[2]||"").split(".").sort(),De){for(Ve=H.event.special[De]||{},Le=pe[De=(F?Ve.delegateType:Ve.bindType)||De]||[],ge=ge[2]&&new RegExp("(^|\\.)"+ut.join("\\.(?:.*\\.|)")+"(\\.|$)"),ee=Q=Le.length;Q--;)Pe=Le[Q],!W&&wt!==Pe.origType||O&&O.guid!==Pe.guid||ge&&!ge.test(Pe.namespace)||F&&F!==Pe.selector&&("**"!==F||!Pe.selector)||(Le.splice(Q,1),Pe.selector&&Le.delegateCount--,Ve.remove&&Ve.remove.call(y,Pe));ee&&!Le.length&&(Ve.teardown&&!1!==Ve.teardown.call(y,ut,vt.handle)||H.removeEvent(y,De,vt.handle),delete pe[De])}else for(De in pe)H.event.remove(y,De+E[xe],O,F,!0);H.isEmptyObject(pe)&&dt.remove(y,"handle events")}},dispatch:function(y){var E,O,F,W,Q,ee,ge=new Array(arguments.length),pe=H.event.fix(y),xe=(dt.get(this,"events")||Object.create(null))[pe.type]||[],Pe=H.event.special[pe.type]||{};for(ge[0]=pe,E=1;E<arguments.length;E++)ge[E]=arguments[E];if(pe.delegateTarget=this,!Pe.preDispatch||!1!==Pe.preDispatch.call(this,pe)){for(ee=H.event.handlers.call(this,pe,xe),E=0;(W=ee[E++])&&!pe.isPropagationStopped();)for(pe.currentTarget=W.elem,O=0;(Q=W.handlers[O++])&&!pe.isImmediatePropagationStopped();)pe.rnamespace&&!1!==Q.namespace&&!pe.rnamespace.test(Q.namespace)||(pe.handleObj=Q,pe.data=Q.data,void 0!==(F=((H.event.special[Q.origType]||{}).handle||Q.handler).apply(W.elem,ge))&&!1===(pe.result=F)&&(pe.preventDefault(),pe.stopPropagation()));return Pe.postDispatch&&Pe.postDispatch.call(this,pe),pe.result}},handlers:function(y,E){var O,F,W,Q,ee,ge=[],pe=E.delegateCount,xe=y.target;if(pe&&xe.nodeType&&!("click"===y.type&&1<=y.button))for(;xe!==this;xe=xe.parentNode||this)if(1===xe.nodeType&&("click"!==y.type||!0!==xe.disabled)){for(Q=[],ee={},O=0;O<pe;O++)void 0===ee[W=(F=E[O]).selector+" "]&&(ee[W]=F.needsContext?-1<H(W,this).index(xe):H.find(W,this,null,[xe]).length),ee[W]&&Q.push(F);Q.length&&ge.push({elem:xe,handlers:Q})}return xe=this,pe<E.length&&ge.push({elem:xe,handlers:E.slice(pe)}),ge},addProp:function(y,E){Object.defineProperty(H.Event.prototype,y,{enumerable:!0,configurable:!0,get:$e(E)?function(){if(this.originalEvent)return E(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[y]},set:function(O){Object.defineProperty(this,y,{enumerable:!0,configurable:!0,writable:!0,value:O})}})},fix:function(y){return y[H.expando]?y:new H.Event(y)},special:{load:{noBubble:!0},click:{setup:function(y){var E=this||y;return vs.test(E.type)&&E.click&&Hi(E,"input")&&Pa(E,"click",Rs),!1},trigger:function(y){var E=this||y;return vs.test(E.type)&&E.click&&Hi(E,"input")&&Pa(E,"click"),!0},_default:function(y){var E=y.target;return vs.test(E.type)&&E.click&&Hi(E,"input")&&dt.get(E,"click")||Hi(E,"a")}},beforeunload:{postDispatch:function(y){void 0!==y.result&&y.originalEvent&&(y.originalEvent.returnValue=y.result)}}}},H.removeEvent=function(y,E,O){y.removeEventListener&&y.removeEventListener(E,O)},H.Event=function(y,E){if(!(this instanceof H.Event))return new H.Event(y,E);y&&y.type?(this.originalEvent=y,this.type=y.type,this.isDefaultPrevented=y.defaultPrevented||void 0===y.defaultPrevented&&!1===y.returnValue?Rs:Os,this.target=y.target&&3===y.target.nodeType?y.target.parentNode:y.target,this.currentTarget=y.currentTarget,this.relatedTarget=y.relatedTarget):this.type=y,E&&H.extend(this,E),this.timeStamp=y&&y.timeStamp||Date.now(),this[H.expando]=!0},H.Event.prototype={constructor:H.Event,isDefaultPrevented:Os,isPropagationStopped:Os,isImmediatePropagationStopped:Os,isSimulated:!1,preventDefault:function(){var y=this.originalEvent;this.isDefaultPrevented=Rs,y&&!this.isSimulated&&y.preventDefault()},stopPropagation:function(){var y=this.originalEvent;this.isPropagationStopped=Rs,y&&!this.isSimulated&&y.stopPropagation()},stopImmediatePropagation:function(){var y=this.originalEvent;this.isImmediatePropagationStopped=Rs,y&&!this.isSimulated&&y.stopImmediatePropagation(),this.stopPropagation()}},H.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},H.event.addProp),H.each({focus:"focusin",blur:"focusout"},function(y,E){H.event.special[y]={setup:function(){return Pa(this,y,ol),!1},trigger:function(){return Pa(this,y),!0},_default:function(O){return dt.get(O.target,y)},delegateType:E}}),H.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(y,E){H.event.special[y]={delegateType:E,bindType:E,handle:function(O){var F,W=O.relatedTarget,Q=O.handleObj;return W&&(W===this||H.contains(this,W))||(O.type=Q.origType,F=Q.handler.apply(this,arguments),O.type=E),F}}}),H.fn.extend({on:function(y,E,O,F){return Eo(this,y,E,O,F)},one:function(y,E,O,F){return Eo(this,y,E,O,F,1)},off:function(y,E,O){var F,W;if(y&&y.preventDefault&&y.handleObj)return F=y.handleObj,H(y.delegateTarget).off(F.namespace?F.origType+"."+F.namespace:F.origType,F.selector,F.handler),this;if("object"==typeof y){for(W in y)this.off(W,E,y[W]);return this}return!1!==E&&"function"!=typeof E||(O=E,E=void 0),!1===O&&(O=Os),this.each(function(){H.event.remove(this,y,O,E)})}});var jr=/<script|<style|<link/i,Gl=/checked\s*(?:[^=]|=\s*.checked.)/i,bs=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function $o(y,E){return Hi(y,"table")&&Hi(11!==E.nodeType?E:E.firstChild,"tr")&&H(y).children("tbody")[0]||y}function Bs(y){return y.type=(null!==y.getAttribute("type"))+"/"+y.type,y}function Mi(y){return"true/"===(y.type||"").slice(0,5)?y.type=y.type.slice(5):y.removeAttribute("type"),y}function Na(y,E){var O,F,W,Q,ee,ge;if(1===E.nodeType){if(dt.hasData(y)&&(ge=dt.get(y).events))for(W in dt.remove(E,"handle events"),ge)for(O=0,F=ge[W].length;O<F;O++)H.event.add(E,W,ge[W][O]);oi.hasData(y)&&(Q=oi.access(y),ee=H.extend({},Q),oi.set(E,ee))}}function Gn(y,E,O,F){E=wo(E);var W,Q,ee,ge,pe,xe,Pe=0,Ve=y.length,Le=Ve-1,De=E[0],ut=$e(De);if(ut||1<Ve&&"string"==typeof De&&!un.checkClone&&Gl.test(De))return y.each(function(wt){var vt=y.eq(wt);ut&&(E[0]=De.call(this,wt,vt.html())),Gn(vt,E,O,F)});if(Ve&&(Q=(W=Qa(E,y[0].ownerDocument,!1,y,F)).firstChild,1===W.childNodes.length&&(W=Q),Q||F)){for(ge=(ee=H.map(Ii(W,"script"),Bs)).length;Pe<Ve;Pe++)pe=W,Pe!==Le&&(pe=H.clone(pe,!0,!0),ge&&H.merge(ee,Ii(pe,"script"))),O.call(y[Pe],pe,Pe);if(ge)for(xe=ee[ee.length-1].ownerDocument,H.map(ee,Mi),Pe=0;Pe<ge;Pe++)Ci.test((pe=ee[Pe]).type||"")&&!dt.access(pe,"globalEval")&&H.contains(xe,pe)&&(pe.src&&"module"!==(pe.type||"").toLowerCase()?H._evalUrl&&!pe.noModule&&H._evalUrl(pe.src,{nonce:pe.nonce||pe.getAttribute("nonce")},xe):Ms(pe.textContent.replace(bs,""),pe,xe))}return y}function Wr(y,E,O){for(var F,W=E?H.filter(E,y):y,Q=0;null!=(F=W[Q]);Q++)O||1!==F.nodeType||H.cleanData(Ii(F)),F.parentNode&&(O&&ms(F)&&Ao(Ii(F,"script")),F.parentNode.removeChild(F));return y}H.extend({htmlPrefilter:function(y){return y},clone:function(y,E,O){var F,W,Q,ee,ge,pe,xe,Pe=y.cloneNode(!0),Ve=ms(y);if(!(un.noCloneChecked||1!==y.nodeType&&11!==y.nodeType||H.isXMLDoc(y)))for(ee=Ii(Pe),F=0,W=(Q=Ii(y)).length;F<W;F++)ge=Q[F],"input"===(xe=(pe=ee[F]).nodeName.toLowerCase())&&vs.test(ge.type)?pe.checked=ge.checked:"input"!==xe&&"textarea"!==xe||(pe.defaultValue=ge.defaultValue);if(E)if(O)for(Q=Q||Ii(y),ee=ee||Ii(Pe),F=0,W=Q.length;F<W;F++)Na(Q[F],ee[F]);else Na(y,Pe);return 0<(ee=Ii(Pe,"script")).length&&Ao(ee,!Ve&&Ii(y,"script")),Pe},cleanData:function(y){for(var E,O,F,W=H.event.special,Q=0;void 0!==(O=y[Q]);Q++)if(nn(O)){if(E=O[dt.expando]){if(E.events)for(F in E.events)W[F]?H.event.remove(O,F):H.removeEvent(O,F,E.handle);O[dt.expando]=void 0}O[oi.expando]&&(O[oi.expando]=void 0)}}}),H.fn.extend({detach:function(y){return Wr(this,y,!0)},remove:function(y){return Wr(this,y)},text:function(y){return xi(this,function(E){return void 0===E?H.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=E)})},null,y,arguments.length)},append:function(){return Gn(this,arguments,function(y){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||$o(this,y).appendChild(y)})},prepend:function(){return Gn(this,arguments,function(y){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var E=$o(this,y);E.insertBefore(y,E.firstChild)}})},before:function(){return Gn(this,arguments,function(y){this.parentNode&&this.parentNode.insertBefore(y,this)})},after:function(){return Gn(this,arguments,function(y){this.parentNode&&this.parentNode.insertBefore(y,this.nextSibling)})},empty:function(){for(var y,E=0;null!=(y=this[E]);E++)1===y.nodeType&&(H.cleanData(Ii(y,!1)),y.textContent="");return this},clone:function(y,E){return y=null!=y&&y,E=E??y,this.map(function(){return H.clone(this,y,E)})},html:function(y){return xi(this,function(E){var O=this[0]||{},F=0,W=this.length;if(void 0===E&&1===O.nodeType)return O.innerHTML;if("string"==typeof E&&!jr.test(E)&&!Gi[(Vr.exec(E)||["",""])[1].toLowerCase()]){E=H.htmlPrefilter(E);try{for(;F<W;F++)1===(O=this[F]||{}).nodeType&&(H.cleanData(Ii(O,!1)),O.innerHTML=E);O=0}catch{}}O&&this.empty().append(E)},null,y,arguments.length)},replaceWith:function(){var y=[];return Gn(this,arguments,function(E){var O=this.parentNode;H.inArray(this,y)<0&&(H.cleanData(Ii(this)),O&&O.replaceChild(E,this))},y)}}),H.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(y,E){H.fn[y]=function(O){for(var F,W=[],Q=H(O),ee=Q.length-1,ge=0;ge<=ee;ge++)F=ge===ee?this:this.clone(!0),H(Q[ge])[E](F),La.apply(W,F.get());return this.pushStack(W)}});var cr=new RegExp("^("+qi+")(?!px)[a-z%]+$","i"),dr=/^--/,Ja=function(y){var E=y.ownerDocument.defaultView;return E&&E.opener||(E=R),E.getComputedStyle(y)},ur=function(y,E,O){var F,W,Q={};for(W in E)Q[W]=y.style[W],y.style[W]=E[W];for(W in F=O.call(y),E)y.style[W]=Q[W];return F},Ra=new RegExp(fa.join("|"),"i"),_s="[\\x20\\t\\r\\n\\f]",hr=new RegExp("^"+_s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_s+"+$","g");function st(y,E,O){var F,W,Q,ee,ge=dr.test(E),pe=y.style;return(O=O||Ja(y))&&(ee=O.getPropertyValue(E)||O[E],ge&&(ee=ee.replace(hr,"$1")),""!==ee||ms(y)||(ee=H.style(y,E)),!un.pixelBoxStyles()&&cr.test(ee)&&Ra.test(E)&&(F=pe.width,W=pe.minWidth,Q=pe.maxWidth,pe.minWidth=pe.maxWidth=pe.width=ee,ee=O.width,pe.width=F,pe.minWidth=W,pe.maxWidth=Q)),void 0!==ee?ee+"":ee}function pr(y,E){return{get:function(){if(!y())return(this.get=E).apply(this,arguments);delete this.get}}}!function(){function y(){if(xe){pe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",xe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Di.appendChild(pe).appendChild(xe);var Pe=R.getComputedStyle(xe);O="1%"!==Pe.top,ge=12===E(Pe.marginLeft),xe.style.right="60%",Q=36===E(Pe.right),F=36===E(Pe.width),xe.style.position="absolute",W=12===E(xe.offsetWidth/3),Di.removeChild(pe),xe=null}}function E(Pe){return Math.round(parseFloat(Pe))}var O,F,W,Q,ee,ge,pe=it.createElement("div"),xe=it.createElement("div");xe.style&&(xe.style.backgroundClip="content-box",xe.cloneNode(!0).style.backgroundClip="",un.clearCloneStyle="content-box"===xe.style.backgroundClip,H.extend(un,{boxSizingReliable:function(){return y(),F},pixelBoxStyles:function(){return y(),Q},pixelPosition:function(){return y(),O},reliableMarginLeft:function(){return y(),ge},scrollboxSize:function(){return y(),W},reliableTrDimensions:function(){var Pe,Ve,Le,De;return null==ee&&(Pe=it.createElement("table"),Ve=it.createElement("tr"),Le=it.createElement("div"),Pe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ve.style.cssText="border:1px solid",Ve.style.height="1px",Le.style.height="9px",Le.style.display="block",Di.appendChild(Pe).appendChild(Ve).appendChild(Le),De=R.getComputedStyle(Ve),ee=parseInt(De.height,10)+parseInt(De.borderTopWidth,10)+parseInt(De.borderBottomWidth,10)===Ve.offsetHeight,Di.removeChild(Pe)),ee}}))}();var zs=["Webkit","Moz","ms"],ys=it.createElement("div").style,Ur={};function Do(y){return H.cssProps[y]||Ur[y]||(y in ys?y:Ur[y]=function(O){for(var F=O[0].toUpperCase()+O.slice(1),W=zs.length;W--;)if((O=zs[W]+F)in ys)return O}(y)||y)}var ll=/^(none|table(?!-c[ea]).+)/,Yl={position:"absolute",visibility:"hidden",display:"block"},Gr={letterSpacing:"0",fontWeight:"400"};function ws(y,E,O){var F=Xa.exec(E);return F?Math.max(0,F[2]-(O||0))+(F[3]||"px"):E}function Oa(y,E,O,F,W,Q){var ee="width"===E?1:0,ge=0,pe=0;if(O===(F?"border":"content"))return 0;for(;ee<4;ee+=2)"margin"===O&&(pe+=H.css(y,O+fa[ee],!0,W)),F?("content"===O&&(pe-=H.css(y,"padding"+fa[ee],!0,W)),"margin"!==O&&(pe-=H.css(y,"border"+fa[ee]+"Width",!0,W))):(pe+=H.css(y,"padding"+fa[ee],!0,W),"padding"!==O?pe+=H.css(y,"border"+fa[ee]+"Width",!0,W):ge+=H.css(y,"border"+fa[ee]+"Width",!0,W));return!F&&0<=Q&&(pe+=Math.max(0,Math.ceil(y["offset"+E[0].toUpperCase()+E.slice(1)]-Q-pe-ge-.5))||0),pe}function Ba(y,E,O){var F=Ja(y),W=(!un.boxSizingReliable()||O)&&"border-box"===H.css(y,"boxSizing",!1,F),Q=W,ee=st(y,E,F),ge="offset"+E[0].toUpperCase()+E.slice(1);if(cr.test(ee)){if(!O)return ee;ee="auto"}return(!un.boxSizingReliable()&&W||!un.reliableTrDimensions()&&Hi(y,"tr")||"auto"===ee||!parseFloat(ee)&&"inline"===H.css(y,"display",!1,F))&&y.getClientRects().length&&(W="border-box"===H.css(y,"boxSizing",!1,F),(Q=ge in y)&&(ee=y[ge])),(ee=parseFloat(ee)||0)+Oa(y,E,O||(W?"border":"content"),Q,F,ee)+"px"}function li(y,E,O,F,W){return new li.prototype.init(y,E,O,F,W)}H.extend({cssHooks:{opacity:{get:function(y,E){if(E){var O=st(y,"opacity");return""===O?"1":O}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(y,E,O,F){if(y&&3!==y.nodeType&&8!==y.nodeType&&y.style){var W,Q,ee,ge=$i(E),pe=dr.test(E),xe=y.style;if(pe||(E=Do(ge)),ee=H.cssHooks[E]||H.cssHooks[ge],void 0===O)return ee&&"get"in ee&&void 0!==(W=ee.get(y,!1,F))?W:xe[E];"string"==(Q=typeof O)&&(W=Xa.exec(O))&&W[1]&&(O=sl(y,E,W),Q="number"),null!=O&&O==O&&("number"!==Q||pe||(O+=W&&W[3]||(H.cssNumber[ge]?"":"px")),un.clearCloneStyle||""!==O||0!==E.indexOf("background")||(xe[E]="inherit"),ee&&"set"in ee&&void 0===(O=ee.set(y,O,F))||(pe?xe.setProperty(E,O):xe[E]=O))}},css:function(y,E,O,F){var W,Q,ee,ge=$i(E);return dr.test(E)||(E=Do(ge)),(ee=H.cssHooks[E]||H.cssHooks[ge])&&"get"in ee&&(W=ee.get(y,!0,O)),void 0===W&&(W=st(y,E,F)),"normal"===W&&E in Gr&&(W=Gr[E]),""===O||O?(Q=parseFloat(W),!0===O||isFinite(Q)?Q||0:W):W}}),H.each(["height","width"],function(y,E){H.cssHooks[E]={get:function(O,F,W){if(F)return!ll.test(H.css(O,"display"))||O.getClientRects().length&&O.getBoundingClientRect().width?Ba(O,E,W):ur(O,Yl,function(){return Ba(O,E,W)})},set:function(O,F,W){var Q,ee=Ja(O),ge=!un.scrollboxSize()&&"absolute"===ee.position,pe=(ge||W)&&"border-box"===H.css(O,"boxSizing",!1,ee),xe=W?Oa(O,E,W,pe,ee):0;return pe&&ge&&(xe-=Math.ceil(O["offset"+E[0].toUpperCase()+E.slice(1)]-parseFloat(ee[E])-Oa(O,E,"border",!1,ee)-.5)),xe&&(Q=Xa.exec(F))&&"px"!==(Q[3]||"px")&&(O.style[E]=F,F=H.css(O,E)),ws(0,F,xe)}}}),H.cssHooks.marginLeft=pr(un.reliableMarginLeft,function(y,E){if(E)return(parseFloat(st(y,"marginLeft"))||y.getBoundingClientRect().left-ur(y,{marginLeft:0},function(){return y.getBoundingClientRect().left}))+"px"}),H.each({margin:"",padding:"",border:"Width"},function(y,E){H.cssHooks[y+E]={expand:function(O){for(var F=0,W={},Q="string"==typeof O?O.split(" "):[O];F<4;F++)W[y+fa[F]+E]=Q[F]||Q[F-2]||Q[0];return W}},"margin"!==y&&(H.cssHooks[y+E].set=ws)}),H.fn.extend({css:function(y,E){return xi(this,function(O,F,W){var Q,ee,ge={},pe=0;if(Array.isArray(F)){for(Q=Ja(O),ee=F.length;pe<ee;pe++)ge[F[pe]]=H.css(O,F[pe],!1,Q);return ge}return void 0!==W?H.style(O,F,W):H.css(O,F)},y,E,1<arguments.length)}}),((H.Tween=li).prototype={constructor:li,init:function(y,E,O,F,W,Q){this.elem=y,this.prop=O,this.easing=W||H.easing._default,this.options=E,this.start=this.now=this.cur(),this.end=F,this.unit=Q||(H.cssNumber[O]?"":"px")},cur:function(){var y=li.propHooks[this.prop];return y&&y.get?y.get(this):li.propHooks._default.get(this)},run:function(y){var E,O=li.propHooks[this.prop];return this.pos=E=this.options.duration?H.easing[this.easing](y,this.options.duration*y,0,1,this.options.duration):y,this.now=(this.end-this.start)*E+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),O&&O.set?O.set(this):li.propHooks._default.set(this),this}}).init.prototype=li.prototype,(li.propHooks={_default:{get:function(y){var E;return 1!==y.elem.nodeType||null!=y.elem[y.prop]&&null==y.elem.style[y.prop]?y.elem[y.prop]:(E=H.css(y.elem,y.prop,""))&&"auto"!==E?E:0},set:function(y){H.fx.step[y.prop]?H.fx.step[y.prop](y):1!==y.elem.nodeType||!H.cssHooks[y.prop]&&null==y.elem.style[Do(y.prop)]?y.elem[y.prop]=y.now:H.style(y.elem,y.prop,y.now+y.unit)}}}).scrollTop=li.propHooks.scrollLeft={set:function(y){y.elem.nodeType&&y.elem.parentNode&&(y.elem[y.prop]=y.now)}},H.easing={linear:function(y){return y},swing:function(y){return.5-Math.cos(y*Math.PI)/2},_default:"swing"},H.fx=li.prototype.init,H.fx.step={};var Ea,Yi,Za,cl,dl=/^(?:toggle|show|hide)$/,Io=/queueHooks$/;function Mo(){Yi&&(!1===it.hidden&&R.requestAnimationFrame?R.requestAnimationFrame(Mo):R.setTimeout(Mo,H.fx.interval),H.fx.tick())}function Yr(){return R.setTimeout(function(){Ea=void 0}),Ea=Date.now()}function fr(y,E){var O,F=0,W={height:y};for(E=E?1:0;F<4;F+=2-E)W["margin"+(O=fa[F])]=W["padding"+O]=y;return E&&(W.opacity=W.width=y),W}function Lo(y,E,O){for(var F,W=(Ki.tweeners[E]||[]).concat(Ki.tweeners["*"]),Q=0,ee=W.length;Q<ee;Q++)if(F=W[Q].call(O,E,y))return F}function Ki(y,E,O){var F,W,Q=0,ee=Ki.prefilters.length,ge=H.Deferred().always(function(){delete pe.elem}),pe=function(){if(W)return!1;for(var Ve=Ea||Yr(),Le=Math.max(0,xe.startTime+xe.duration-Ve),De=1-(Le/xe.duration||0),ut=0,wt=xe.tweens.length;ut<wt;ut++)xe.tweens[ut].run(De);return ge.notifyWith(y,[xe,De,Le]),De<1&&wt?Le:(wt||ge.notifyWith(y,[xe,1,0]),ge.resolveWith(y,[xe]),!1)},xe=ge.promise({elem:y,props:H.extend({},E),opts:H.extend(!0,{specialEasing:{},easing:H.easing._default},O),originalProperties:E,originalOptions:O,startTime:Ea||Yr(),duration:O.duration,tweens:[],createTween:function(Ve,Le){var De=H.Tween(y,xe.opts,Ve,Le,xe.opts.specialEasing[Ve]||xe.opts.easing);return xe.tweens.push(De),De},stop:function(Ve){var Le=0,De=Ve?xe.tweens.length:0;if(W)return this;for(W=!0;Le<De;Le++)xe.tweens[Le].run(1);return Ve?(ge.notifyWith(y,[xe,1,0]),ge.resolveWith(y,[xe,Ve])):ge.rejectWith(y,[xe,Ve]),this}}),Pe=xe.props;for(function(Ve,Le){var De,ut,wt,vt,Sn;for(De in Ve)if(wt=Le[ut=$i(De)],vt=Ve[De],Array.isArray(vt)&&(wt=vt[1],vt=Ve[De]=vt[0]),De!==ut&&(Ve[ut]=vt,delete Ve[De]),(Sn=H.cssHooks[ut])&&"expand"in Sn)for(De in vt=Sn.expand(vt),delete Ve[ut],vt)De in Ve||(Ve[De]=vt[De],Le[De]=wt);else Le[ut]=wt}(Pe,xe.opts.specialEasing);Q<ee;Q++)if(F=Ki.prefilters[Q].call(xe,y,Pe,xe.opts))return $e(F.stop)&&(H._queueHooks(xe.elem,xe.opts.queue).stop=F.stop.bind(F)),F;return H.map(Pe,Lo,xe),$e(xe.opts.start)&&xe.opts.start.call(y,xe),xe.progress(xe.opts.progress).done(xe.opts.done,xe.opts.complete).fail(xe.opts.fail).always(xe.opts.always),H.fx.timer(H.extend(pe,{elem:y,anim:xe,queue:xe.opts.queue})),xe}H.Animation=H.extend(Ki,{tweeners:{"*":[function(y,E){var O=this.createTween(y,E);return sl(O.elem,y,Xa.exec(E),O),O}]},tweener:function(y,E){$e(y)?(E=y,y=["*"]):y=y.match(Ei);for(var O,F=0,W=y.length;F<W;F++)(Ki.tweeners[O=y[F]]=Ki.tweeners[O]||[]).unshift(E)},prefilters:[function(y,E,O){var F,W,Q,ee,ge,pe,xe,Pe,Ve="width"in E||"height"in E,Le=this,De={},ut=y.style,wt=y.nodeType&&Hr(y),vt=dt.get(y,"fxshow");for(F in O.queue||(null==(ee=H._queueHooks(y,"fx")).unqueued&&(ee.unqueued=0,ge=ee.empty.fire,ee.empty.fire=function(){ee.unqueued||ge()}),ee.unqueued++,Le.always(function(){Le.always(function(){ee.unqueued--,H.queue(y,"fx").length||ee.empty.fire()})})),E)if(dl.test(W=E[F])){if(delete E[F],Q=Q||"toggle"===W,W===(wt?"hide":"show")){if("show"!==W||!vt||void 0===vt[F])continue;wt=!0}De[F]=vt&&vt[F]||H.style(y,F)}if((pe=!H.isEmptyObject(E))||!H.isEmptyObject(De))for(F in Ve&&1===y.nodeType&&(O.overflow=[ut.overflow,ut.overflowX,ut.overflowY],null==(xe=vt&&vt.display)&&(xe=dt.get(y,"display")),"none"===(Pe=H.css(y,"display"))&&(xe?Pe=xe:(ta([y],!0),xe=y.style.display||xe,Pe=H.css(y,"display"),ta([y]))),("inline"===Pe||"inline-block"===Pe&&null!=xe)&&"none"===H.css(y,"float")&&(pe||(Le.done(function(){ut.display=xe}),null==xe&&(xe="none"===(Pe=ut.display)?"":Pe)),ut.display="inline-block")),O.overflow&&(ut.overflow="hidden",Le.always(function(){ut.overflow=O.overflow[0],ut.overflowX=O.overflow[1],ut.overflowY=O.overflow[2]})),pe=!1,De)pe||(vt?"hidden"in vt&&(wt=vt.hidden):vt=dt.access(y,"fxshow",{display:xe}),Q&&(vt.hidden=!wt),wt&&ta([y],!0),Le.done(function(){for(F in wt||ta([y]),dt.remove(y,"fxshow"),De)H.style(y,F,De[F])})),pe=Lo(wt?vt[F]:0,F,Le),F in vt||(vt[F]=pe.start,wt&&(pe.end=pe.start,pe.start=0))}],prefilter:function(y,E){E?Ki.prefilters.unshift(y):Ki.prefilters.push(y)}}),H.speed=function(y,E,O){var F=y&&"object"==typeof y?H.extend({},y):{complete:O||!O&&E||$e(y)&&y,duration:y,easing:O&&E||E&&!$e(E)&&E};return H.fx.off?F.duration=0:"number"!=typeof F.duration&&(F.duration=F.duration in H.fx.speeds?H.fx.speeds[F.duration]:H.fx.speeds._default),null!=F.queue&&!0!==F.queue||(F.queue="fx"),F.old=F.complete,F.complete=function(){$e(F.old)&&F.old.call(this),F.queue&&H.dequeue(this,F.queue)},F},H.fn.extend({fadeTo:function(y,E,O,F){return this.filter(Hr).css("opacity",0).show().end().animate({opacity:E},y,O,F)},animate:function(y,E,O,F){var W=H.isEmptyObject(y),Q=H.speed(E,O,F),ee=function(){var ge=Ki(this,H.extend({},y),Q);(W||dt.get(this,"finish"))&&ge.stop(!0)};return ee.finish=ee,W||!1===Q.queue?this.each(ee):this.queue(Q.queue,ee)},stop:function(y,E,O){var F=function(W){var Q=W.stop;delete W.stop,Q(O)};return"string"!=typeof y&&(O=E,E=y,y=void 0),E&&this.queue(y||"fx",[]),this.each(function(){var W=!0,Q=null!=y&&y+"queueHooks",ee=H.timers,ge=dt.get(this);if(Q)ge[Q]&&ge[Q].stop&&F(ge[Q]);else for(Q in ge)ge[Q]&&ge[Q].stop&&Io.test(Q)&&F(ge[Q]);for(Q=ee.length;Q--;)ee[Q].elem!==this||null!=y&&ee[Q].queue!==y||(ee[Q].anim.stop(O),W=!1,ee.splice(Q,1));!W&&O||H.dequeue(this,y)})},finish:function(y){return!1!==y&&(y=y||"fx"),this.each(function(){var E,O=dt.get(this),F=O[y+"queue"],W=O[y+"queueHooks"],Q=H.timers,ee=F?F.length:0;for(O.finish=!0,H.queue(this,y,[]),W&&W.stop&&W.stop.call(this,!0),E=Q.length;E--;)Q[E].elem===this&&Q[E].queue===y&&(Q[E].anim.stop(!0),Q.splice(E,1));for(E=0;E<ee;E++)F[E]&&F[E].finish&&F[E].finish.call(this);delete O.finish})}}),H.each(["toggle","show","hide"],function(y,E){var O=H.fn[E];H.fn[E]=function(F,W,Q){return null==F||"boolean"==typeof F?O.apply(this,arguments):this.animate(fr(E,!0),F,W,Q)}}),H.each({slideDown:fr("show"),slideUp:fr("hide"),slideToggle:fr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(y,E){H.fn[y]=function(O,F,W){return this.animate(E,O,F,W)}}),H.timers=[],H.fx.tick=function(){var y,E=0,O=H.timers;for(Ea=Date.now();E<O.length;E++)(y=O[E])()||O[E]!==y||O.splice(E--,1);O.length||H.fx.stop(),Ea=void 0},H.fx.timer=function(y){H.timers.push(y),H.fx.start()},H.fx.interval=13,H.fx.start=function(){Yi||(Yi=!0,Mo())},H.fx.stop=function(){Yi=null},H.fx.speeds={slow:600,fast:200,_default:400},H.fn.delay=function(y,E){return y=H.fx&&H.fx.speeds[y]||y,this.queue(E=E||"fx",function(O,F){var W=R.setTimeout(O,y);F.stop=function(){R.clearTimeout(W)}})},Za=it.createElement("input"),cl=it.createElement("select").appendChild(it.createElement("option")),Za.type="checkbox",un.checkOn=""!==Za.value,un.optSelected=cl.selected,(Za=it.createElement("input")).value="t",Za.type="radio",un.radioValue="t"===Za.value;var gr,na=H.expr.attrHandle;H.fn.extend({attr:function(y,E){return xi(this,H.attr,y,E,1<arguments.length)},removeAttr:function(y){return this.each(function(){H.removeAttr(this,y)})}}),H.extend({attr:function(y,E,O){var F,W,Q=y.nodeType;if(3!==Q&&8!==Q&&2!==Q)return typeof y.getAttribute>"u"?H.prop(y,E,O):(1===Q&&H.isXMLDoc(y)||(W=H.attrHooks[E.toLowerCase()]||(H.expr.match.bool.test(E)?gr:void 0)),void 0!==O?null===O?void H.removeAttr(y,E):W&&"set"in W&&void 0!==(F=W.set(y,O,E))?F:(y.setAttribute(E,O+""),O):W&&"get"in W&&null!==(F=W.get(y,E))?F:null==(F=H.find.attr(y,E))?void 0:F)},attrHooks:{type:{set:function(y,E){if(!un.radioValue&&"radio"===E&&Hi(y,"input")){var O=y.value;return y.setAttribute("type",E),O&&(y.value=O),E}}}},removeAttr:function(y,E){var O,F=0,W=E&&E.match(Ei);if(W&&1===y.nodeType)for(;O=W[F++];)y.removeAttribute(O)}}),gr={set:function(y,E,O){return!1===E?H.removeAttr(y,O):y.setAttribute(O,O),O}},H.each(H.expr.match.bool.source.match(/\w+/g),function(y,E){var O=na[E]||H.find.attr;na[E]=function(F,W,Q){var ee,ge,pe=W.toLowerCase();return Q||(ge=na[pe],na[pe]=ee,ee=null!=O(F,W,Q)?pe:null,na[pe]=ge),ee}});var ul=/^(?:input|select|textarea|button)$/i,Kr=/^(?:a|area)$/i;function ga(y){return(y.match(Ei)||[]).join(" ")}function ia(y){return y.getAttribute&&y.getAttribute("class")||""}function Qn(y){return Array.isArray(y)?y:"string"==typeof y&&y.match(Ei)||[]}H.fn.extend({prop:function(y,E){return xi(this,H.prop,y,E,1<arguments.length)},removeProp:function(y){return this.each(function(){delete this[H.propFix[y]||y]})}}),H.extend({prop:function(y,E,O){var F,W,Q=y.nodeType;if(3!==Q&&8!==Q&&2!==Q)return 1===Q&&H.isXMLDoc(y)||(W=H.propHooks[E=H.propFix[E]||E]),void 0!==O?W&&"set"in W&&void 0!==(F=W.set(y,O,E))?F:y[E]=O:W&&"get"in W&&null!==(F=W.get(y,E))?F:y[E]},propHooks:{tabIndex:{get:function(y){var E=H.find.attr(y,"tabindex");return E?parseInt(E,10):ul.test(y.nodeName)||Kr.test(y.nodeName)&&y.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),un.optSelected||(H.propHooks.selected={get:function(y){return null},set:function(y){}}),H.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){H.propFix[this.toLowerCase()]=this}),H.fn.extend({addClass:function(y){var E,O,F,W,Q,ee;return $e(y)?this.each(function(ge){H(this).addClass(y.call(this,ge,ia(this)))}):(E=Qn(y)).length?this.each(function(){if(F=ia(this),O=1===this.nodeType&&" "+ga(F)+" "){for(Q=0;Q<E.length;Q++)O.indexOf(" "+(W=E[Q])+" ")<0&&(O+=W+" ");ee=ga(O),F!==ee&&this.setAttribute("class",ee)}}):this},removeClass:function(y){var E,O,F,W,Q,ee;return $e(y)?this.each(function(ge){H(this).removeClass(y.call(this,ge,ia(this)))}):arguments.length?(E=Qn(y)).length?this.each(function(){if(F=ia(this),O=1===this.nodeType&&" "+ga(F)+" "){for(Q=0;Q<E.length;Q++)for(W=E[Q];-1<O.indexOf(" "+W+" ");)O=O.replace(" "+W+" "," ");ee=ga(O),F!==ee&&this.setAttribute("class",ee)}}):this:this.attr("class","")},toggleClass:function(y,E){var O,F,W,Q,ee=typeof y,ge="string"===ee||Array.isArray(y);return $e(y)?this.each(function(pe){H(this).toggleClass(y.call(this,pe,ia(this),E),E)}):"boolean"==typeof E&&ge?E?this.addClass(y):this.removeClass(y):(O=Qn(y),this.each(function(){if(ge)for(Q=H(this),W=0;W<O.length;W++)Q.hasClass(F=O[W])?Q.removeClass(F):Q.addClass(F);else void 0!==y&&"boolean"!==ee||((F=ia(this))&&dt.set(this,"__className__",F),this.setAttribute&&this.setAttribute("class",F||!1===y?"":dt.get(this,"__className__")||""))}))},hasClass:function(y){var E,O,F=0;for(E=" "+y+" ";O=this[F++];)if(1===O.nodeType&&-1<(" "+ga(ia(O))+" ").indexOf(E))return!0;return!1}});var hl=/\r/g;H.fn.extend({val:function(y){var E,O,F,W=this[0];return arguments.length?(F=$e(y),this.each(function(Q){var ee;1===this.nodeType&&(null==(ee=F?y.call(this,Q,H(this).val()):y)?ee="":"number"==typeof ee?ee+="":Array.isArray(ee)&&(ee=H.map(ee,function(ge){return null==ge?"":ge+""})),(E=H.valHooks[this.type]||H.valHooks[this.nodeName.toLowerCase()])&&"set"in E&&void 0!==E.set(this,ee,"value")||(this.value=ee))})):W?(E=H.valHooks[W.type]||H.valHooks[W.nodeName.toLowerCase()])&&"get"in E&&void 0!==(O=E.get(W,"value"))?O:"string"==typeof(O=W.value)?O.replace(hl,""):O??"":void 0}}),H.extend({valHooks:{option:{get:function(y){return H.find.attr(y,"value")??ga(H.text(y))}},select:{get:function(y){var E,O,F,W=y.options,Q=y.selectedIndex,ee="select-one"===y.type,ge=ee?null:[],pe=ee?Q+1:W.length;for(F=Q<0?pe:ee?Q:0;F<pe;F++)if(((O=W[F]).selected||F===Q)&&!O.disabled&&(!O.parentNode.disabled||!Hi(O.parentNode,"optgroup"))){if(E=H(O).val(),ee)return E;ge.push(E)}return ge},set:function(y,E){for(var O,F,W=y.options,Q=H.makeArray(E),ee=W.length;ee--;)((F=W[ee]).selected=-1<H.inArray(H.valHooks.option.get(F),Q))&&(O=!0);return O||(y.selectedIndex=-1),Q}}}}),H.each(["radio","checkbox"],function(){H.valHooks[this]={set:function(y,E){if(Array.isArray(E))return y.checked=-1<H.inArray(H(y).val(),E)}},un.checkOn||(H.valHooks[this].get=function(y){return null===y.getAttribute("value")?"on":y.value})}),un.focusin="onfocusin"in R;var An=/^(?:focusinfocus|focusoutblur)$/,mr=function(y){y.stopPropagation()};H.extend(H.event,{trigger:function(y,E,O,F){var W,Q,ee,ge,pe,xe,Pe,Ve,Le=[O||it],De=Is.call(y,"type")?y.type:y,ut=Is.call(y,"namespace")?y.namespace.split("."):[];if(Q=Ve=ee=O=O||it,3!==O.nodeType&&8!==O.nodeType&&!An.test(De+H.event.triggered)&&(-1<De.indexOf(".")&&(De=(ut=De.split(".")).shift(),ut.sort()),pe=De.indexOf(":")<0&&"on"+De,(y=y[H.expando]?y:new H.Event(De,"object"==typeof y&&y)).isTrigger=F?2:3,y.namespace=ut.join("."),y.rnamespace=y.namespace?new RegExp("(^|\\.)"+ut.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,y.result=void 0,y.target||(y.target=O),E=null==E?[y]:H.makeArray(E,[y]),Pe=H.event.special[De]||{},F||!Pe.trigger||!1!==Pe.trigger.apply(O,E))){if(!F&&!Pe.noBubble&&!ue(O)){for(An.test((ge=Pe.delegateType||De)+De)||(Q=Q.parentNode);Q;Q=Q.parentNode)Le.push(Q),ee=Q;ee===(O.ownerDocument||it)&&Le.push(ee.defaultView||ee.parentWindow||R)}for(W=0;(Q=Le[W++])&&!y.isPropagationStopped();)Ve=Q,y.type=1<W?ge:Pe.bindType||De,(xe=(dt.get(Q,"events")||Object.create(null))[y.type]&&dt.get(Q,"handle"))&&xe.apply(Q,E),(xe=pe&&Q[pe])&&xe.apply&&nn(Q)&&(y.result=xe.apply(Q,E),!1===y.result&&y.preventDefault());return y.type=De,F||y.isDefaultPrevented()||Pe._default&&!1!==Pe._default.apply(Le.pop(),E)||!nn(O)||pe&&$e(O[De])&&!ue(O)&&((ee=O[pe])&&(O[pe]=null),H.event.triggered=De,y.isPropagationStopped()&&Ve.addEventListener(De,mr),O[De](),y.isPropagationStopped()&&Ve.removeEventListener(De,mr),H.event.triggered=void 0,ee&&(O[pe]=ee)),y.result}},simulate:function(y,E,O){var F=H.extend(new H.Event,O,{type:y,isSimulated:!0});H.event.trigger(F,null,E)}}),H.fn.extend({trigger:function(y,E){return this.each(function(){H.event.trigger(y,E,this)})},triggerHandler:function(y,E){var O=this[0];if(O)return H.event.trigger(y,E,O,!0)}}),un.focusin||H.each({focus:"focusin",blur:"focusout"},function(y,E){var O=function(F){H.event.simulate(E,F.target,H.event.fix(F))};H.event.special[E]={setup:function(){var F=this.ownerDocument||this.document||this,W=dt.access(F,E);W||F.addEventListener(y,O,!0),dt.access(F,E,(W||0)+1)},teardown:function(){var F=this.ownerDocument||this.document||this,W=dt.access(F,E)-1;W?dt.access(F,E,W):(F.removeEventListener(y,O,!0),dt.remove(F,E))}}});var es=R.location,xs={guid:Date.now()},ts=/\?/;H.parseXML=function(y){var E,O;if(!y||"string"!=typeof y)return null;try{E=(new R.DOMParser).parseFromString(y,"text/xml")}catch{}return O=E&&E.getElementsByTagName("parsererror")[0],E&&!O||H.error("Invalid XML: "+(O?H.map(O.childNodes,function(F){return F.textContent}).join("\n"):y)),E};var $a=/\[\]$/,vr=/\r?\n/g,Xr=/^(?:submit|button|image|reset|file)$/i,Po=/^(?:input|select|textarea|keygen)/i;function ns(y,E,O,F){var W;if(Array.isArray(E))H.each(E,function(Q,ee){O||$a.test(y)?F(y,ee):ns(y+"["+("object"==typeof ee&&null!=ee?Q:"")+"]",ee,O,F)});else if(O||"object"!==Ie(E))F(y,E);else for(W in E)ns(y+"["+W+"]",E[W],O,F)}H.param=function(y,E){var O,F=[],W=function(Q,ee){var ge=$e(ee)?ee():ee;F[F.length]=encodeURIComponent(Q)+"="+encodeURIComponent(ge??"")};if(null==y)return"";if(Array.isArray(y)||y.jquery&&!H.isPlainObject(y))H.each(y,function(){W(this.name,this.value)});else for(O in y)ns(O,y[O],E,W);return F.join("&")},H.fn.extend({serialize:function(){return H.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var y=H.prop(this,"elements");return y?H.makeArray(y):this}).filter(function(){var y=this.type;return this.name&&!H(this).is(":disabled")&&Po.test(this.nodeName)&&!Xr.test(y)&&(this.checked||!vs.test(y))}).map(function(y,E){var O=H(this).val();return null==O?null:Array.isArray(O)?H.map(O,function(F){return{name:E.name,value:F.replace(vr,"\r\n")}}):{name:E.name,value:O.replace(vr,"\r\n")}}).get()}});var ui=/%20/g,pl=/#.*$/,br=/([?&])_=[^&]*/,Cs=/^(.*?):[ \t]*([^\r\n]*)$/gm,fl=/^(?:GET|HEAD)$/,No=/^\/\//,Ro={},is={},aa="*/".concat("*"),Fs=it.createElement("a");function Hs(y){return function(E,O){"string"!=typeof E&&(O=E,E="*");var F,W=0,Q=E.toLowerCase().match(Ei)||[];if($e(O))for(;F=Q[W++];)"+"===F[0]?(F=F.slice(1)||"*",(y[F]=y[F]||[]).unshift(O)):(y[F]=y[F]||[]).push(O)}}function Qr(y,E,O,F){var W={},Q=y===is;function ee(ge){var pe;return W[ge]=!0,H.each(y[ge]||[],function(xe,Pe){var Ve=Pe(E,O,F);return"string"!=typeof Ve||Q||W[Ve]?Q?!(pe=Ve):void 0:(E.dataTypes.unshift(Ve),ee(Ve),!1)}),pe}return ee(E.dataTypes[0])||!W["*"]&&ee("*")}function ks(y,E){var O,F,W=H.ajaxSettings.flatOptions||{};for(O in E)void 0!==E[O]&&((W[O]?y:F||(F={}))[O]=E[O]);return F&&H.extend(!0,y,F),y}Fs.href=es.href,H.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:es.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(es.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aa,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":H.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(y,E){return E?ks(ks(y,H.ajaxSettings),E):ks(H.ajaxSettings,y)},ajaxPrefilter:Hs(Ro),ajaxTransport:Hs(is),ajax:function(y,E){"object"==typeof y&&(E=y,y=void 0);var O,F,W,Q,ee,ge,pe,xe,Pe,Ve,Le=H.ajaxSetup({},E=E||{}),De=Le.context||Le,ut=Le.context&&(De.nodeType||De.jquery)?H(De):H.event,wt=H.Deferred(),vt=H.Callbacks("once memory"),Sn=Le.statusCode||{},Ft={},Ln={},hn="canceled",Ht={readyState:0,getResponseHeader:function(an){var yn;if(pe){if(!Q)for(Q={};yn=Cs.exec(W);)Q[yn[1].toLowerCase()+" "]=(Q[yn[1].toLowerCase()+" "]||[]).concat(yn[2]);yn=Q[an.toLowerCase()+" "]}return null==yn?null:yn.join(", ")},getAllResponseHeaders:function(){return pe?W:null},setRequestHeader:function(an,yn){return null==pe&&(an=Ln[an.toLowerCase()]=Ln[an.toLowerCase()]||an,Ft[an]=yn),this},overrideMimeType:function(an){return null==pe&&(Le.mimeType=an),this},statusCode:function(an){var yn;if(an)if(pe)Ht.always(an[Ht.status]);else for(yn in an)Sn[yn]=[Sn[yn],an[yn]];return this},abort:function(an){var yn=an||hn;return O&&O.abort(yn),pn(0,yn),this}};if(wt.promise(Ht),Le.url=((y||Le.url||es.href)+"").replace(No,es.protocol+"//"),Le.type=E.method||E.type||Le.method||Le.type,Le.dataTypes=(Le.dataType||"*").toLowerCase().match(Ei)||[""],null==Le.crossDomain){ge=it.createElement("a");try{ge.href=Le.url,ge.href=ge.href,Le.crossDomain=Fs.protocol+"//"+Fs.host!=ge.protocol+"//"+ge.host}catch{Le.crossDomain=!0}}if(Le.data&&Le.processData&&"string"!=typeof Le.data&&(Le.data=H.param(Le.data,Le.traditional)),Qr(Ro,Le,E,Ht),pe)return Ht;for(Pe in(xe=H.event&&Le.global)&&0==H.active++&&H.event.trigger("ajaxStart"),Le.type=Le.type.toUpperCase(),Le.hasContent=!fl.test(Le.type),F=Le.url.replace(pl,""),Le.hasContent?Le.data&&Le.processData&&0===(Le.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Le.data=Le.data.replace(ui,"+")):(Ve=Le.url.slice(F.length),Le.data&&(Le.processData||"string"==typeof Le.data)&&(F+=(ts.test(F)?"&":"?")+Le.data,delete Le.data),!1===Le.cache&&(F=F.replace(br,"$1"),Ve=(ts.test(F)?"&":"?")+"_="+xs.guid+++Ve),Le.url=F+Ve),Le.ifModified&&(H.lastModified[F]&&Ht.setRequestHeader("If-Modified-Since",H.lastModified[F]),H.etag[F]&&Ht.setRequestHeader("If-None-Match",H.etag[F])),(Le.data&&Le.hasContent&&!1!==Le.contentType||E.contentType)&&Ht.setRequestHeader("Content-Type",Le.contentType),Ht.setRequestHeader("Accept",Le.dataTypes[0]&&Le.accepts[Le.dataTypes[0]]?Le.accepts[Le.dataTypes[0]]+("*"!==Le.dataTypes[0]?", "+aa+"; q=0.01":""):Le.accepts["*"]),Le.headers)Ht.setRequestHeader(Pe,Le.headers[Pe]);if(Le.beforeSend&&(!1===Le.beforeSend.call(De,Ht,Le)||pe))return Ht.abort();if(hn="abort",vt.add(Le.complete),Ht.done(Le.success),Ht.fail(Le.error),O=Qr(is,Le,E,Ht)){if(Ht.readyState=1,xe&&ut.trigger("ajaxSend",[Ht,Le]),pe)return Ht;Le.async&&0<Le.timeout&&(ee=R.setTimeout(function(){Ht.abort("timeout")},Le.timeout));try{pe=!1,O.send(Ft,pn)}catch(an){if(pe)throw an;pn(-1,an)}}else pn(-1,"No Transport");function pn(an,yn,ss,_a){var hi,rs,sa,pi,za,fi=yn;pe||(pe=!0,ee&&R.clearTimeout(ee),O=void 0,W=_a||"",Ht.readyState=0<an?4:0,hi=200<=an&&an<300||304===an,ss&&(pi=function(En,Li,gi){for(var ma,qt,on,wn,Pi=En.contents,Yn=En.dataTypes;"*"===Yn[0];)Yn.shift(),void 0===ma&&(ma=En.mimeType||Li.getResponseHeader("Content-Type"));if(ma)for(qt in Pi)if(Pi[qt]&&Pi[qt].test(ma)){Yn.unshift(qt);break}if(Yn[0]in gi)on=Yn[0];else{for(qt in gi){if(!Yn[0]||En.converters[qt+" "+Yn[0]]){on=qt;break}wn||(wn=qt)}on=on||wn}if(on)return on!==Yn[0]&&Yn.unshift(on),gi[on]}(Le,Ht,ss)),!hi&&-1<H.inArray("script",Le.dataTypes)&&H.inArray("json",Le.dataTypes)<0&&(Le.converters["text script"]=function(){}),pi=function(En,Li,gi,ma){var qt,on,wn,Pi,Yn,mi={},Ts=En.dataTypes.slice();if(Ts[1])for(wn in En.converters)mi[wn.toLowerCase()]=En.converters[wn];for(on=Ts.shift();on;)if(En.responseFields[on]&&(gi[En.responseFields[on]]=Li),!Yn&&ma&&En.dataFilter&&(Li=En.dataFilter(Li,En.dataType)),Yn=on,on=Ts.shift())if("*"===on)on=Yn;else if("*"!==Yn&&Yn!==on){if(!(wn=mi[Yn+" "+on]||mi["* "+on]))for(qt in mi)if((Pi=qt.split(" "))[1]===on&&(wn=mi[Yn+" "+Pi[0]]||mi["* "+Pi[0]])){!0===wn?wn=mi[qt]:!0!==mi[qt]&&(on=Pi[0],Ts.unshift(Pi[1]));break}if(!0!==wn)if(wn&&En.throws)Li=wn(Li);else try{Li=wn(Li)}catch(os){return{state:"parsererror",error:wn?os:"No conversion from "+Yn+" to "+on}}}return{state:"success",data:Li}}(Le,pi,Ht,hi),hi?(Le.ifModified&&((za=Ht.getResponseHeader("Last-Modified"))&&(H.lastModified[F]=za),(za=Ht.getResponseHeader("etag"))&&(H.etag[F]=za)),204===an||"HEAD"===Le.type?fi="nocontent":304===an?fi="notmodified":(fi=pi.state,rs=pi.data,hi=!(sa=pi.error))):(sa=fi,!an&&fi||(fi="error",an<0&&(an=0))),Ht.status=an,Ht.statusText=(yn||fi)+"",hi?wt.resolveWith(De,[rs,fi,Ht]):wt.rejectWith(De,[Ht,fi,sa]),Ht.statusCode(Sn),Sn=void 0,xe&&ut.trigger(hi?"ajaxSuccess":"ajaxError",[Ht,Le,hi?rs:sa]),vt.fireWith(De,[Ht,fi]),xe&&(ut.trigger("ajaxComplete",[Ht,Le]),--H.active||H.event.trigger("ajaxStop")))}return Ht},getJSON:function(y,E,O){return H.get(y,E,O,"json")},getScript:function(y,E){return H.get(y,void 0,E,"script")}}),H.each(["get","post"],function(y,E){H[E]=function(O,F,W,Q){return $e(F)&&(Q=Q||W,W=F,F=void 0),H.ajax(H.extend({url:O,type:E,dataType:Q,data:F,success:W},H.isPlainObject(O)&&O))}}),H.ajaxPrefilter(function(y){var E;for(E in y.headers)"content-type"===E.toLowerCase()&&(y.contentType=y.headers[E]||"")}),H._evalUrl=function(y,E,O){return H.ajax({url:y,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(F){H.globalEval(F,E,O)}})},H.fn.extend({wrapAll:function(y){var E;return this[0]&&($e(y)&&(y=y.call(this[0])),E=H(y,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&E.insertBefore(this[0]),E.map(function(){for(var O=this;O.firstElementChild;)O=O.firstElementChild;return O}).append(this)),this},wrapInner:function(y){return $e(y)?this.each(function(E){H(this).wrapInner(y.call(this,E))}):this.each(function(){var E=H(this),O=E.contents();O.length?O.wrapAll(y):E.append(y)})},wrap:function(y){var E=$e(y);return this.each(function(O){H(this).wrapAll(E?y.call(this,O):y)})},unwrap:function(y){return this.parent(y).not("body").each(function(){H(this).replaceWith(this.childNodes)}),this}}),H.expr.pseudos.hidden=function(y){return!H.expr.pseudos.visible(y)},H.expr.pseudos.visible=function(y){return!!(y.offsetWidth||y.offsetHeight||y.getClientRects().length)},H.ajaxSettings.xhr=function(){try{return new R.XMLHttpRequest}catch{}};var qs={0:200,1223:204},as=H.ajaxSettings.xhr();un.cors=!!as&&"withCredentials"in as,un.ajax=as=!!as,H.ajaxTransport(function(y){var E,O;if(un.cors||as&&!y.crossDomain)return{send:function(F,W){var Q,ee=y.xhr();if(ee.open(y.type,y.url,y.async,y.username,y.password),y.xhrFields)for(Q in y.xhrFields)ee[Q]=y.xhrFields[Q];for(Q in y.mimeType&&ee.overrideMimeType&&ee.overrideMimeType(y.mimeType),y.crossDomain||F["X-Requested-With"]||(F["X-Requested-With"]="XMLHttpRequest"),F)ee.setRequestHeader(Q,F[Q]);E=function(ge){return function(){E&&(E=O=ee.onload=ee.onerror=ee.onabort=ee.ontimeout=ee.onreadystatechange=null,"abort"===ge?ee.abort():"error"===ge?"number"!=typeof ee.status?W(0,"error"):W(ee.status,ee.statusText):W(qs[ee.status]||ee.status,ee.statusText,"text"!==(ee.responseType||"text")||"string"!=typeof ee.responseText?{binary:ee.response}:{text:ee.responseText},ee.getAllResponseHeaders()))}},ee.onload=E(),O=ee.onerror=ee.ontimeout=E("error"),void 0!==ee.onabort?ee.onabort=O:ee.onreadystatechange=function(){4===ee.readyState&&R.setTimeout(function(){E&&O()})},E=E("abort");try{ee.send(y.hasContent&&y.data||null)}catch(ge){if(E)throw ge}},abort:function(){E&&E()}}}),H.ajaxPrefilter(function(y){y.crossDomain&&(y.contents.script=!1)}),H.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(y){return H.globalEval(y),y}}}),H.ajaxPrefilter("script",function(y){void 0===y.cache&&(y.cache=!1),y.crossDomain&&(y.type="GET")}),H.ajaxTransport("script",function(y){var E,O;if(y.crossDomain||y.scriptAttrs)return{send:function(F,W){E=H("<script>").attr(y.scriptAttrs||{}).prop({charset:y.scriptCharset,src:y.url}).on("load error",O=function(Q){E.remove(),O=null,Q&&W("error"===Q.type?404:200,Q.type)}),it.head.appendChild(E[0])},abort:function(){O&&O()}}});var Xi,Oo=[],Vs=/(=)\?(?=&|$)|\?\?/;H.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var y=Oo.pop()||H.expando+"_"+xs.guid++;return this[y]=!0,y}}),H.ajaxPrefilter("json jsonp",function(y,E,O){var F,W,Q,ee=!1!==y.jsonp&&(Vs.test(y.url)?"url":"string"==typeof y.data&&0===(y.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vs.test(y.data)&&"data");if(ee||"jsonp"===y.dataTypes[0])return F=y.jsonpCallback=$e(y.jsonpCallback)?y.jsonpCallback():y.jsonpCallback,ee?y[ee]=y[ee].replace(Vs,"$1"+F):!1!==y.jsonp&&(y.url+=(ts.test(y.url)?"&":"?")+y.jsonp+"="+F),y.converters["script json"]=function(){return Q||H.error(F+" was not called"),Q[0]},y.dataTypes[0]="json",W=R[F],R[F]=function(){Q=arguments},O.always(function(){void 0===W?H(R).removeProp(F):R[F]=W,y[F]&&(y.jsonpCallback=E.jsonpCallback,Oo.push(F)),Q&&$e(W)&&W(Q[0]),Q=W=void 0}),"script"}),un.createHTMLDocument=((Xi=it.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xi.childNodes.length),H.parseHTML=function(y,E,O){return"string"!=typeof y?[]:("boolean"==typeof E&&(O=E,E=!1),E||(un.createHTMLDocument?((F=(E=it.implementation.createHTMLDocument("")).createElement("base")).href=it.location.href,E.head.appendChild(F)):E=it),Q=!O&&[],(W=Aa.exec(y))?[E.createElement(W[1])]:(W=Qa([y],E,Q),Q&&Q.length&&H(Q).remove(),H.merge([],W.childNodes)));var F,W,Q},H.fn.load=function(y,E,O){var F,W,Q,ee=this,ge=y.indexOf(" ");return-1<ge&&(F=ga(y.slice(ge)),y=y.slice(0,ge)),$e(E)?(O=E,E=void 0):E&&"object"==typeof E&&(W="POST"),0<ee.length&&H.ajax({url:y,type:W||"GET",dataType:"html",data:E}).done(function(pe){Q=arguments,ee.html(F?H("<div>").append(H.parseHTML(pe)).find(F):pe)}).always(O&&function(pe,xe){ee.each(function(){O.apply(this,Q||[pe.responseText,xe,pe])})}),this},H.expr.pseudos.animated=function(y){return H.grep(H.timers,function(E){return y===E.elem}).length},H.offset={setOffset:function(y,E,O){var F,W,Q,ee,ge,pe,xe=H.css(y,"position"),Pe=H(y),Ve={};"static"===xe&&(y.style.position="relative"),ge=Pe.offset(),Q=H.css(y,"top"),pe=H.css(y,"left"),("absolute"===xe||"fixed"===xe)&&-1<(Q+pe).indexOf("auto")?(ee=(F=Pe.position()).top,W=F.left):(ee=parseFloat(Q)||0,W=parseFloat(pe)||0),$e(E)&&(E=E.call(y,O,H.extend({},ge))),null!=E.top&&(Ve.top=E.top-ge.top+ee),null!=E.left&&(Ve.left=E.left-ge.left+W),"using"in E?E.using.call(y,Ve):Pe.css(Ve)}},H.fn.extend({offset:function(y){if(arguments.length)return void 0===y?this:this.each(function(W){H.offset.setOffset(this,y,W)});var E,O,F=this[0];return F?F.getClientRects().length?{top:(E=F.getBoundingClientRect()).top+(O=F.ownerDocument.defaultView).pageYOffset,left:E.left+O.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var y,E,O,F=this[0],W={top:0,left:0};if("fixed"===H.css(F,"position"))E=F.getBoundingClientRect();else{for(E=this.offset(),O=F.ownerDocument,y=F.offsetParent||O.documentElement;y&&(y===O.body||y===O.documentElement)&&"static"===H.css(y,"position");)y=y.parentNode;y&&y!==F&&1===y.nodeType&&((W=H(y).offset()).top+=H.css(y,"borderTopWidth",!0),W.left+=H.css(y,"borderLeftWidth",!0))}return{top:E.top-W.top-H.css(F,"marginTop",!0),left:E.left-W.left-H.css(F,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var y=this.offsetParent;y&&"static"===H.css(y,"position");)y=y.offsetParent;return y||Di})}}),H.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(y,E){var O="pageYOffset"===E;H.fn[y]=function(F){return xi(this,function(W,Q,ee){var ge;if(ue(W)?ge=W:9===W.nodeType&&(ge=W.defaultView),void 0===ee)return ge?ge[E]:W[Q];ge?ge.scrollTo(O?ge.pageXOffset:ee,O?ee:ge.pageYOffset):W[Q]=ee},y,F,arguments.length)}}),H.each(["top","left"],function(y,E){H.cssHooks[E]=pr(un.pixelPosition,function(O,F){if(F)return F=st(O,E),cr.test(F)?H(O).position()[E]+"px":F})}),H.each({Height:"height",Width:"width"},function(y,E){H.each({padding:"inner"+y,content:E,"":"outer"+y},function(O,F){H.fn[F]=function(W,Q){var ee=arguments.length&&(O||"boolean"!=typeof W),ge=O||(!0===W||!0===Q?"margin":"border");return xi(this,function(pe,xe,Pe){var Ve;return ue(pe)?0===F.indexOf("outer")?pe["inner"+y]:pe.document.documentElement["client"+y]:9===pe.nodeType?(Ve=pe.documentElement,Math.max(pe.body["scroll"+y],Ve["scroll"+y],pe.body["offset"+y],Ve["offset"+y],Ve["client"+y])):void 0===Pe?H.css(pe,xe,ge):H.style(pe,xe,Pe,ge)},E,ee?W:void 0,ee)}})}),H.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(y,E){H.fn[E]=function(O){return this.on(E,O)}}),H.fn.extend({bind:function(y,E,O){return this.on(y,null,E,O)},unbind:function(y,E){return this.off(y,null,E)},delegate:function(y,E,O,F){return this.on(E,y,O,F)},undelegate:function(y,E,O){return 1===arguments.length?this.off(y,"**"):this.off(E,y||"**",O)},hover:function(y,E){return this.mouseenter(y).mouseleave(E||y)}}),H.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(y,E){H.fn[E]=function(O,F){return 0<arguments.length?this.on(E,null,O,F):this.trigger(E)}});var Bo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;H.proxy=function(y,E){var O,F,W;if("string"==typeof E&&(O=y[E],E=y,y=O),$e(y))return F=Si.call(arguments,2),(W=function(){return y.apply(E||this,F.concat(Si.call(arguments)))}).guid=y.guid=y.guid||H.guid++,W},H.holdReady=function(y){y?H.readyWait++:H.ready(!0)},H.isArray=Array.isArray,H.parseJSON=JSON.parse,H.nodeName=Hi,H.isFunction=$e,H.isWindow=ue,H.camelCase=$i,H.type=Ie,H.now=Date.now,H.isNumeric=function(y){var E=H.type(y);return("number"===E||"string"===E)&&!isNaN(y-parseFloat(y))},H.trim=function(y){return null==y?"":(y+"").replace(Bo,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return H});var yr=R.jQuery,de=R.$;return H.noConflict=function(y){return R.$===H&&(R.$=de),y&&R.jQuery===H&&(R.jQuery=yr),H},typeof wi>"u"&&(R.jQuery=R.$=H),H}),function(R,wi){"object"==typeof exports&&typeof module<"u"?wi(exports):"function"==typeof define&&define.amd?define(["exports"],wi):wi((R=R||self).d3=R.d3||{})}(this,function(R){"use strict";function wi(r,l){return r<l?-1:r>l?1:r>=l?0:NaN}function Fi(r){var l;return 1===r.length&&(l=r,r=function(u,h){return wi(l(u),h)}),{left:function(u,h,g,v){for(null==g&&(g=0),null==v&&(v=u.length);g<v;){var x=g+v>>>1;r(u[x],h)<0?g=x+1:v=x}return g},right:function(u,h,g,v){for(null==g&&(g=0),null==v&&(v=u.length);g<v;){var x=g+v>>>1;r(u[x],h)>0?v=x:g=x+1}return g}}}var yo=Fi(wi),Si=yo.right,wo=yo.left;function La(r,l){return[r,l]}function Ge(r){return null===r?NaN:+r}function or(r,l){var u,h,g=r.length,v=0,x=-1,w=0,k=0;if(null==l)for(;++x<g;)isNaN(u=Ge(r[x]))||(k+=(h=u-w)*(u-(w+=h/++v)));else for(;++x<g;)isNaN(u=Ge(l(r[x],x,r)))||(k+=(h=u-w)*(u-(w+=h/++v)));if(v>1)return k/(v-1)}function _r(r,l){var u=or(r,l);return u&&Math.sqrt(u)}function Is(r,l){var u,h,g,v=r.length,x=-1;if(null==l){for(;++x<v;)if(null!=(u=r[x])&&u>=u)for(h=g=u;++x<v;)null!=(u=r[x])&&(h>u&&(h=u),g<u&&(g=u))}else for(;++x<v;)if(null!=(u=l(r[x],x,r))&&u>=u)for(h=g=u;++x<v;)null!=(u=l(r[x],x,r))&&(h>u&&(h=u),g<u&&(g=u));return[h,g]}var zr=Array.prototype,Un=zr.slice,un=zr.map;function $e(r){return function(){return r}}function ue(r){return r}function it(r,l,u){r=+r,l=+l,u=(g=arguments.length)<2?(l=r,r=0,1):g<3?1:+u;for(var h=-1,g=0|Math.max(0,Math.ceil((l-r)/u)),v=new Array(g);++h<g;)v[h]=r+h*u;return v}var xo=Math.sqrt(50),Ms=Math.sqrt(10),Ie=Math.sqrt(2);function ps(r,l,u){var h,g,v,x,w=-1;if(u=+u,(r=+r)==(l=+l)&&u>0)return[r];if((h=l<r)&&(g=r,r=l,l=g),0===(x=H(r,l,u))||!isFinite(x))return[];if(x>0)for(r=Math.ceil(r/x),l=Math.floor(l/x),v=new Array(g=Math.ceil(l-r+1));++w<g;)v[w]=(r+w)*x;else for(r=Math.floor(r*x),l=Math.ceil(l*x),v=new Array(g=Math.ceil(r-l+1));++w<g;)v[w]=(r-w)/x;return h&&v.reverse(),v}function H(r,l,u){var h=(l-r)/Math.max(0,u),g=Math.floor(Math.log(h)/Math.LN10),v=h/Math.pow(10,g);return g>=0?(v>=xo?10:v>=Ms?5:v>=Ie?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(v>=xo?10:v>=Ms?5:v>=Ie?2:1)}function Ta(r,l,u){var h=Math.abs(l-r)/Math.max(0,u),g=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),v=h/g;return v>=xo?g*=10:v>=Ms?g*=5:v>=Ie&&(g*=2),l<r?-g:g}function Ui(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}function pa(r,l,u){if(null==u&&(u=Ge),h=r.length){if((l=+l)<=0||h<2)return+u(r[0],0,r);if(l>=1)return+u(r[h-1],h-1,r);var h,g=(h-1)*l,v=Math.floor(g),x=+u(r[v],v,r);return x+(+u(r[v+1],v+1,r)-x)*(g-v)}}function _(r,l){var u,h,g=r.length,v=-1;if(null==l){for(;++v<g;)if(null!=(u=r[v])&&u>=u)for(h=u;++v<g;)null!=(u=r[v])&&u>h&&(h=u)}else for(;++v<g;)if(null!=(u=l(r[v],v,r))&&u>=u)for(h=u;++v<g;)null!=(u=l(r[v],v,r))&&u>h&&(h=u);return h}function lr(r){for(var l,u,h,g=r.length,v=-1,x=0;++v<g;)x+=r[v].length;for(u=new Array(x);--g>=0;)for(l=(h=r[g]).length;--l>=0;)u[--x]=h[l];return u}function Hi(r,l){var u,h,g=r.length,v=-1;if(null==l){for(;++v<g;)if(null!=(u=r[v])&&u>=u)for(h=u;++v<g;)null!=(u=r[v])&&h>u&&(h=u)}else for(;++v<g;)if(null!=(u=l(r[v],v,r))&&u>=u)for(h=u;++v<g;)null!=(u=l(r[v],v,r))&&h>u&&(h=u);return h}function Aa(r){if(!(g=r.length))return[];for(var l=-1,u=Hi(r,Fr),h=new Array(u);++l<u;)for(var g,v=-1,x=h[l]=new Array(g);++v<g;)x[v]=r[v][l];return h}function Fr(r){return r.length}var at=Array.prototype.slice;function fs(r){return r}function P(r){return"translate("+(r+.5)+",0)"}function Co(r){return"translate(0,"+(r+.5)+")"}function ei(){return!this.__axis}function Ga(r,l){var u=[],h=null,g=null,v=6,x=6,w=3,k=1===r||4===r?-1:1,A=4===r||2===r?"x":"y",D=1===r||3===r?P:Co;function B(I){var q=h??(l.ticks?l.ticks.apply(l,u):l.domain()),j=g??(l.tickFormat?l.tickFormat.apply(l,u):fs),K=Math.max(v,0)+w,X=l.range(),Y=+X[0]+.5,ne=+X[X.length-1]+.5,te=(l.bandwidth?function(Se){var ie=Math.max(0,Se.bandwidth()-1)/2;return Se.round()&&(ie=Math.round(ie)),function(Ce){return+Se(Ce)+ie}}:function(Se){return function(ie){return+Se(ie)}})(l.copy()),se=I.selection?I.selection():I,fe=se.selectAll(".domain").data([null]),ve=se.selectAll(".tick").data(q,l).order(),Ae=ve.exit(),qe=ve.enter().append("g").attr("class","tick"),me=ve.select("line"),Me=ve.select("text");fe=fe.merge(fe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ve=ve.merge(qe),me=me.merge(qe.append("line").attr("stroke","currentColor").attr(A+"2",k*v)),Me=Me.merge(qe.append("text").attr("fill","currentColor").attr(A,k*K).attr("dy",1===r?"0em":3===r?"0.71em":"0.32em")),I!==se&&(fe=fe.transition(I),ve=ve.transition(I),me=me.transition(I),Me=Me.transition(I),Ae=Ae.transition(I).attr("opacity",1e-6).attr("transform",function(Se){return isFinite(Se=te(Se))?D(Se):this.getAttribute("transform")}),qe.attr("opacity",1e-6).attr("transform",function(Se){var ie=this.parentNode.__axis;return D(ie&&isFinite(ie=ie(Se))?ie:te(Se))})),Ae.remove(),fe.attr("d",4===r||2==r?x?"M"+k*x+","+Y+"H0.5V"+ne+"H"+k*x:"M0.5,"+Y+"V"+ne:x?"M"+Y+","+k*x+"V0.5H"+ne+"V"+k*x:"M"+Y+",0.5H"+ne),ve.attr("opacity",1).attr("transform",function(Se){return D(te(Se))}),me.attr(A+"2",k*v),Me.attr(A,k*K).text(j),se.filter(ei).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===r?"start":4===r?"end":"middle"),se.each(function(){this.__axis=te})}return B.scale=function(I){return arguments.length?(l=I,B):l},B.ticks=function(){return u=at.call(arguments),B},B.tickArguments=function(I){return arguments.length?(u=null==I?[]:at.call(I),B):u.slice()},B.tickValues=function(I){return arguments.length?(h=null==I?null:at.call(I),B):h&&h.slice()},B.tickFormat=function(I){return arguments.length?(g=I,B):g},B.tickSize=function(I){return arguments.length?(v=x=+I,B):v},B.tickSizeInner=function(I){return arguments.length?(v=+I,B):v},B.tickSizeOuter=function(I){return arguments.length?(x=+I,B):x},B.tickPadding=function(I){return arguments.length?(w=+I,B):w},B}var Sa={value:function(){}};function xi(){for(var r,l=0,u=arguments.length,h={};l<u;++l){if(!(r=arguments[l]+"")||r in h||/[\s.]/.test(r))throw new Error("illegal type: "+r);h[r]=[]}return new Ya(h)}function Ya(r){this._=r}function il(r,l){return r.trim().split(/^|\s+/).map(function(u){var h="",g=u.indexOf(".");if(g>=0&&(h=u.slice(g+1),u=u.slice(0,g)),u&&!l.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:h}})}function al(r,l){for(var u,h=0,g=r.length;h<g;++h)if((u=r[h]).name===l)return u.value}function $i(r,l,u){for(var h=0,g=r.length;h<g;++h)if(r[h].name===l){r[h]=Sa,r=r.slice(0,h).concat(r.slice(h+1));break}return null!=u&&r.push({name:l,value:u}),r}Ya.prototype=xi.prototype={constructor:Ya,on:function(r,l){var u,h=this._,g=il(r+"",h),v=-1,x=g.length;if(!(arguments.length<2)){if(null!=l&&"function"!=typeof l)throw new Error("invalid callback: "+l);for(;++v<x;)if(u=(r=g[v]).type)h[u]=$i(h[u],r.name,l);else if(null==l)for(u in h)h[u]=$i(h[u],r.name,null);return this}for(;++v<x;)if((u=(r=g[v]).type)&&(u=al(h[u],r.name)))return u},copy:function(){var r={},l=this._;for(var u in l)r[u]=l[u].slice();return new Ya(r)},call:function(r,l){if((u=arguments.length-2)>0)for(var u,h,g=new Array(u),v=0;v<u;++v)g[v]=arguments[v+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(v=0,u=(h=this._[r]).length;v<u;++v)h[v].value.apply(l,g)},apply:function(r,l,u){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var h=this._[r],g=0,v=h.length;g<v;++g)h[g].value.apply(l,u)}};var nn="http://www.w3.org/1999/xhtml",Ka={svg:"http://www.w3.org/2000/svg",xhtml:nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dt(r){var l=r+="",u=l.indexOf(":");return u>=0&&"xmlns"!==(l=r.slice(0,u))&&(r=r.slice(u+1)),Ka.hasOwnProperty(l)?{space:Ka[l],local:r}:r}function oi(r){var l=dt(r);return(l.local?function(u){return function(){return this.ownerDocument.createElementNS(u.space,u.local)}}:function(u){return function(){var h=this.ownerDocument,g=this.namespaceURI;return g===nn&&h.documentElement.namespaceURI===nn?h.createElement(u):h.createElementNS(g,u)}})(l)}function ko(){}function Ps(r){return null==r?ko:function(){return this.querySelector(r)}}function To(){return[]}function qi(r){return null==r?To:function(){return this.querySelectorAll(r)}}function Xa(r){return function(){return this.matches(r)}}function fa(r){return new Array(r.length)}function Di(r,l){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=l}function Ul(r,l,u,h,g,v){for(var x,w=0,k=l.length,A=v.length;w<A;++w)(x=l[w])?(x.__data__=v[w],h[w]=x):u[w]=new Di(r,v[w]);for(;w<k;++w)(x=l[w])&&(g[w]=x)}function Hr(r,l,u,h,g,v,x){var w,k,A,D={},B=l.length,I=v.length,q=new Array(B);for(w=0;w<B;++w)(k=l[w])&&(q[w]=A="$"+x.call(k,k.__data__,w,l),A in D?g[w]=k:D[A]=k);for(w=0;w<I;++w)(k=D[A="$"+x.call(r,v[w],w,v)])?(h[w]=k,k.__data__=v[w],D[A]=null):u[w]=new Di(r,v[w]);for(w=0;w<B;++w)(k=l[w])&&D[q[w]]===k&&(g[w]=k)}function sl(r,l){return r<l?-1:r>l?1:r>=l?0:NaN}function qr(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function ta(r,l){return r.style.getPropertyValue(l)||qr(r).getComputedStyle(r,null).getPropertyValue(l)}function mt(r){return r.trim().split(/^|\s+/)}function Ns(r){return r.classList||new vs(r)}function vs(r){this._node=r,this._names=mt(r.getAttribute("class")||"")}function Vr(r,l){for(var u=Ns(r),h=-1,g=l.length;++h<g;)u.add(l[h])}function Ci(r,l){for(var u=Ns(r),h=-1,g=l.length;++h<g;)u.remove(l[h])}function Gi(){this.textContent=""}function Ii(){this.innerHTML=""}function Ao(){this.nextSibling&&this.parentNode.appendChild(this)}function So(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qa(){return null}function rl(){var r=this.parentNode;r&&r.removeChild(this)}function Rs(){var r=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(r,this.nextSibling):r}function Os(){var r=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(r,this.nextSibling):r}Di.prototype={constructor:Di,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,l){return this._parent.insertBefore(r,l)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}},vs.prototype={add:function(r){this._names.indexOf(r)<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var l=this._names.indexOf(r);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};var ol={};function Eo(r,l,u){return r=Pa(r,l,u),function(h){var g=h.relatedTarget;g&&(g===this||8&g.compareDocumentPosition(this))||r.call(this,h)}}function Pa(r,l,u){return function(h){var g=R.event;R.event=h;try{r.call(this,this.__data__,l,u)}finally{R.event=g}}}function jr(r){return function(){var l=this.__on;if(l){for(var u,h=0,g=-1,v=l.length;h<v;++h)u=l[h],r.type&&u.type!==r.type||u.name!==r.name?l[++g]=u:this.removeEventListener(u.type,u.listener,u.capture);++g?l.length=g:delete this.__on}}}function Gl(r,l,u){var h=ol.hasOwnProperty(r.type)?Eo:Pa;return function(g,v,x){var w,k=this.__on,A=h(l,v,x);if(k)for(var D=0,B=k.length;D<B;++D)if((w=k[D]).type===r.type&&w.name===r.name)return this.removeEventListener(w.type,w.listener,w.capture),this.addEventListener(w.type,w.listener=A,w.capture=u),void(w.value=l);this.addEventListener(r.type,A,u),w={type:r.type,name:r.name,value:l,listener:A,capture:u},k?k.push(w):this.__on=[w]}}function bs(r,l,u,h){var g=R.event;r.sourceEvent=R.event,R.event=r;try{return l.apply(u,h)}finally{R.event=g}}function $o(r,l,u){var h=qr(r),g=h.CustomEvent;"function"==typeof g?g=new g(l,u):(g=h.document.createEvent("Event"),u?(g.initEvent(l,u.bubbles,u.cancelable),g.detail=u.detail):g.initEvent(l,!1,!1)),r.dispatchEvent(g)}R.event=null,typeof document<"u"&&("onmouseenter"in document.documentElement||(ol={mouseenter:"mouseover",mouseleave:"mouseout"}));var Bs=[null];function Mi(r,l){this._groups=r,this._parents=l}function Na(){return new Mi([[document.documentElement]],Bs)}function Gn(r){return"string"==typeof r?new Mi([[document.querySelector(r)]],[document.documentElement]):new Mi([[r]],Bs)}Mi.prototype=Na.prototype={constructor:Mi,select:function(r){"function"!=typeof r&&(r=Ps(r));for(var l=this._groups,u=l.length,h=new Array(u),g=0;g<u;++g)for(var v,x,w=l[g],k=w.length,A=h[g]=new Array(k),D=0;D<k;++D)(v=w[D])&&(x=r.call(v,v.__data__,D,w))&&("__data__"in v&&(x.__data__=v.__data__),A[D]=x);return new Mi(h,this._parents)},selectAll:function(r){"function"!=typeof r&&(r=qi(r));for(var l=this._groups,u=l.length,h=[],g=[],v=0;v<u;++v)for(var x,w=l[v],k=w.length,A=0;A<k;++A)(x=w[A])&&(h.push(r.call(x,x.__data__,A,w)),g.push(x));return new Mi(h,g)},filter:function(r){"function"!=typeof r&&(r=Xa(r));for(var l=this._groups,u=l.length,h=new Array(u),g=0;g<u;++g)for(var v,x=l[g],w=x.length,k=h[g]=[],A=0;A<w;++A)(v=x[A])&&r.call(v,v.__data__,A,x)&&k.push(v);return new Mi(h,this._parents)},data:function(r,l){if(!r)return q=new Array(this.size()),A=-1,this.each(function(fe){q[++A]=fe}),q;var fe,u=l?Hr:Ul,h=this._parents,g=this._groups;"function"!=typeof r&&(fe=r,r=function(){return fe});for(var v=g.length,x=new Array(v),w=new Array(v),k=new Array(v),A=0;A<v;++A){var D=h[A],B=g[A],I=B.length,q=r.call(D,D&&D.__data__,A,h),j=q.length,K=w[A]=new Array(j),X=x[A]=new Array(j);u(D,B,K,X,k[A]=new Array(I),q,l);for(var Y,ne,te=0,se=0;te<j;++te)if(Y=K[te]){for(te>=se&&(se=te+1);!(ne=X[se])&&++se<j;);Y._next=ne||null}}return(x=new Mi(x,h))._enter=w,x._exit=k,x},enter:function(){return new Mi(this._enter||this._groups.map(fa),this._parents)},exit:function(){return new Mi(this._exit||this._groups.map(fa),this._parents)},join:function(r,l,u){var h=this.enter(),g=this,v=this.exit();return h="function"==typeof r?r(h):h.append(r+""),null!=l&&(g=l(g)),null==u?v.remove():u(v),h&&g?h.merge(g).order():g},merge:function(r){for(var l=this._groups,u=r._groups,h=l.length,v=Math.min(h,u.length),x=new Array(h),w=0;w<v;++w)for(var k,A=l[w],D=u[w],B=A.length,I=x[w]=new Array(B),q=0;q<B;++q)(k=A[q]||D[q])&&(I[q]=k);for(;w<h;++w)x[w]=l[w];return new Mi(x,this._parents)},order:function(){for(var r=this._groups,l=-1,u=r.length;++l<u;)for(var h,g=r[l],v=g.length-1,x=g[v];--v>=0;)(h=g[v])&&(x&&4^h.compareDocumentPosition(x)&&x.parentNode.insertBefore(h,x),x=h);return this},sort:function(r){function l(B,I){return B&&I?r(B.__data__,I.__data__):!B-!I}r||(r=sl);for(var u=this._groups,h=u.length,g=new Array(h),v=0;v<h;++v){for(var x,w=u[v],k=w.length,A=g[v]=new Array(k),D=0;D<k;++D)(x=w[D])&&(A[D]=x);A.sort(l)}return new Mi(g,this._parents).order()},call:function(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this},nodes:function(){var r=new Array(this.size()),l=-1;return this.each(function(){r[++l]=this}),r},node:function(){for(var r=this._groups,l=0,u=r.length;l<u;++l)for(var h=r[l],g=0,v=h.length;g<v;++g){var x=h[g];if(x)return x}return null},size:function(){var r=0;return this.each(function(){++r}),r},empty:function(){return!this.node()},each:function(r){for(var l=this._groups,u=0,h=l.length;u<h;++u)for(var g,v=l[u],x=0,w=v.length;x<w;++x)(g=v[x])&&r.call(g,g.__data__,x,v);return this},attr:function(r,l){var u=dt(r);if(arguments.length<2){var h=this.node();return u.local?h.getAttributeNS(u.space,u.local):h.getAttribute(u)}return this.each((null==l?u.local?function(g){return function(){this.removeAttributeNS(g.space,g.local)}}:function(g){return function(){this.removeAttribute(g)}}:"function"==typeof l?u.local?function(g,v){return function(){var x=v.apply(this,arguments);null==x?this.removeAttributeNS(g.space,g.local):this.setAttributeNS(g.space,g.local,x)}}:function(g,v){return function(){var x=v.apply(this,arguments);null==x?this.removeAttribute(g):this.setAttribute(g,x)}}:u.local?function(g,v){return function(){this.setAttributeNS(g.space,g.local,v)}}:function(g,v){return function(){this.setAttribute(g,v)}})(u,l))},style:function(r,l,u){return arguments.length>1?this.each((null==l?function(h){return function(){this.style.removeProperty(h)}}:"function"==typeof l?function(h,g,v){return function(){var x=g.apply(this,arguments);null==x?this.style.removeProperty(h):this.style.setProperty(h,x,v)}}:function(h,g,v){return function(){this.style.setProperty(h,g,v)}})(r,l,u??"")):ta(this.node(),r)},property:function(r,l){return arguments.length>1?this.each((null==l?function(u){return function(){delete this[u]}}:"function"==typeof l?function(u,h){return function(){var g=h.apply(this,arguments);null==g?delete this[u]:this[u]=g}}:function(u,h){return function(){this[u]=h}})(r,l)):this.node()[r]},classed:function(r,l){var u=mt(r+"");if(arguments.length<2){for(var h=Ns(this.node()),g=-1,v=u.length;++g<v;)if(!h.contains(u[g]))return!1;return!0}return this.each(("function"==typeof l?function(x,w){return function(){(w.apply(this,arguments)?Vr:Ci)(this,x)}}:l?function(x){return function(){Vr(this,x)}}:function(x){return function(){Ci(this,x)}})(u,l))},text:function(r){return arguments.length?this.each(null==r?Gi:("function"==typeof r?function(l){return function(){var u=l.apply(this,arguments);this.textContent=u??""}}:function(l){return function(){this.textContent=l}})(r)):this.node().textContent},html:function(r){return arguments.length?this.each(null==r?Ii:("function"==typeof r?function(l){return function(){var u=l.apply(this,arguments);this.innerHTML=u??""}}:function(l){return function(){this.innerHTML=l}})(r)):this.node().innerHTML},raise:function(){return this.each(Ao)},lower:function(){return this.each(So)},append:function(r){var l="function"==typeof r?r:oi(r);return this.select(function(){return this.appendChild(l.apply(this,arguments))})},insert:function(r,l){var u="function"==typeof r?r:oi(r),h=null==l?Qa:"function"==typeof l?l:Ps(l);return this.select(function(){return this.insertBefore(u.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function(){return this.each(rl)},clone:function(r){return this.select(r?Os:Rs)},datum:function(r){return arguments.length?this.property("__data__",r):this.node().__data__},on:function(r,l,u){var h,g,v=(r+"").trim().split(/^|\s+/).map(function(I){var q="",j=I.indexOf(".");return j>=0&&(q=I.slice(j+1),I=I.slice(0,j)),{type:I,name:q}}),x=v.length;if(!(arguments.length<2)){for(w=l?Gl:jr,null==u&&(u=!1),h=0;h<x;++h)this.each(w(v[h],l,u));return this}var w=this.node().__on;if(w)for(var k,A=0,D=w.length;A<D;++A)for(h=0,k=w[A];h<x;++h)if((g=v[h]).type===k.type&&g.name===k.name)return k.value},dispatch:function(r,l){return this.each(("function"==typeof l?function(u,h){return function(){return $o(this,u,h.apply(this,arguments))}}:function(u,h){return function(){return $o(this,u,h)}})(r,l))}};var Wr=0;function cr(){return new dr}function dr(){this._="@"+(++Wr).toString(36)}function Ja(){for(var r,l=R.event;r=l.sourceEvent;)l=r;return l}function ur(r,l){var u=r.ownerSVGElement||r;if(u.createSVGPoint){var h=u.createSVGPoint();return h.x=l.clientX,h.y=l.clientY,[(h=h.matrixTransform(r.getScreenCTM().inverse())).x,h.y]}var g=r.getBoundingClientRect();return[l.clientX-g.left-r.clientLeft,l.clientY-g.top-r.clientTop]}function Ra(r){var l=Ja();return l.changedTouches&&(l=l.changedTouches[0]),ur(r,l)}function _s(r,l,u){arguments.length<3&&(u=l,l=Ja().changedTouches);for(var h,g=0,v=l?l.length:0;g<v;++g)if((h=l[g]).identifier===u)return ur(r,h);return null}function hr(){R.event.stopImmediatePropagation()}function st(){R.event.preventDefault(),R.event.stopImmediatePropagation()}function pr(r){var l=r.document.documentElement,u=Gn(r).on("dragstart.drag",st,!0);"onselectstart"in l?u.on("selectstart.drag",st,!0):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function zs(r,l){var u=r.document.documentElement,h=Gn(r).on("dragstart.drag",null);l&&(h.on("click.drag",st,!0),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in u?h.on("selectstart.drag",null):(u.style.MozUserSelect=u.__noselect,delete u.__noselect)}function ys(r){return function(){return r}}function Ur(r,l,u,h,g,v,x,w,k,A){this.target=r,this.type=l,this.subject=u,this.identifier=h,this.active=g,this.x=v,this.y=x,this.dx=w,this.dy=k,this._=A}function Do(){return!R.event.ctrlKey&&!R.event.button}function ll(){return this.parentNode}function Yl(r){return r??{x:R.event.x,y:R.event.y}}function Gr(){return navigator.maxTouchPoints||"ontouchstart"in this}function ws(r,l,u){r.prototype=l.prototype=u,u.constructor=r}function Oa(r,l){var u=Object.create(r.prototype);for(var h in l)u[h]=l[h];return u}function Ba(){}dr.prototype=cr.prototype={constructor:dr,get:function(r){for(var l=this._;!(l in r);)if(!(r=r.parentNode))return;return r[l]},set:function(r,l){return r[this._]=l},remove:function(r){return this._ in r&&delete r[this._]},toString:function(){return this._}},Ur.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};var li="\\s*([+-]?\\d+)\\s*",Ea="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Za=/^#([0-9a-f]{3,8})$/,cl=new RegExp("^rgb\\("+[li,li,li]+"\\)$"),dl=new RegExp("^rgb\\("+[Yi,Yi,Yi]+"\\)$"),Io=new RegExp("^rgba\\("+[li,li,li,Ea]+"\\)$"),Mo=new RegExp("^rgba\\("+[Yi,Yi,Yi,Ea]+"\\)$"),Yr=new RegExp("^hsl\\("+[Ea,Yi,Yi]+"\\)$"),fr=new RegExp("^hsla\\("+[Ea,Yi,Yi,Ea]+"\\)$"),Lo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ki(){return this.rgb().formatHex()}function gr(){return this.rgb().formatRgb()}function na(r){var l,u;return r=(r+"").trim().toLowerCase(),(l=Za.exec(r))?(u=l[1].length,l=parseInt(l[1],16),6===u?ul(l):3===u?new Qn(l>>8&15|l>>4&240,l>>4&15|240&l,(15&l)<<4|15&l,1):8===u?Kr(l>>24&255,l>>16&255,l>>8&255,(255&l)/255):4===u?Kr(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|240&l,((15&l)<<4|15&l)/255):null):(l=cl.exec(r))?new Qn(l[1],l[2],l[3],1):(l=dl.exec(r))?new Qn(255*l[1]/100,255*l[2]/100,255*l[3]/100,1):(l=Io.exec(r))?Kr(l[1],l[2],l[3],l[4]):(l=Mo.exec(r))?Kr(255*l[1]/100,255*l[2]/100,255*l[3]/100,l[4]):(l=Yr.exec(r))?es(l[1],l[2]/100,l[3]/100,1):(l=fr.exec(r))?es(l[1],l[2]/100,l[3]/100,l[4]):Lo.hasOwnProperty(r)?ul(Lo[r]):"transparent"===r?new Qn(NaN,NaN,NaN,0):null}function ul(r){return new Qn(r>>16&255,r>>8&255,255&r,1)}function Kr(r,l,u,h){return h<=0&&(r=l=u=NaN),new Qn(r,l,u,h)}function ga(r){return r instanceof Ba||(r=na(r)),r?new Qn((r=r.rgb()).r,r.g,r.b,r.opacity):new Qn}function ia(r,l,u,h){return 1===arguments.length?ga(r):new Qn(r,l,u,h??1)}function Qn(r,l,u,h){this.r=+r,this.g=+l,this.b=+u,this.opacity=+h}function hl(){return"#"+mr(this.r)+mr(this.g)+mr(this.b)}function An(){var r=this.opacity;return(1===(r=isNaN(r)?1:Math.max(0,Math.min(1,r)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===r?")":", "+r+")")}function mr(r){return((r=Math.max(0,Math.min(255,Math.round(r)||0)))<16?"0":"")+r.toString(16)}function es(r,l,u,h){return h<=0?r=l=u=NaN:u<=0||u>=1?r=l=NaN:l<=0&&(r=NaN),new $a(r,l,u,h)}function xs(r){if(r instanceof $a)return new $a(r.h,r.s,r.l,r.opacity);if(r instanceof Ba||(r=na(r)),!r)return new $a;if(r instanceof $a)return r;var l=(r=r.rgb()).r/255,u=r.g/255,h=r.b/255,g=Math.min(l,u,h),v=Math.max(l,u,h),x=NaN,w=v-g,k=(v+g)/2;return w?(x=l===v?(u-h)/w+6*(u<h):u===v?(h-l)/w+2:(l-u)/w+4,w/=k<.5?v+g:2-v-g,x*=60):w=k>0&&k<1?0:x,new $a(x,w,k,r.opacity)}function ts(r,l,u,h){return 1===arguments.length?xs(r):new $a(r,l,u,h??1)}function $a(r,l,u,h){this.h=+r,this.s=+l,this.l=+u,this.opacity=+h}function vr(r,l,u){return 255*(r<60?l+(u-l)*r/60:r<180?u:r<240?l+(u-l)*(240-r)/60:l)}ws(Ba,na,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:Ki,formatHex:Ki,formatHsl:function(){return xs(this).formatHsl()},formatRgb:gr,toString:gr}),ws(Qn,ia,Oa(Ba,{brighter:function(r){return r=null==r?1/.7:Math.pow(1/.7,r),new Qn(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new Qn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hl,formatHex:hl,formatRgb:An,toString:An})),ws($a,ts,Oa(Ba,{brighter:function(r){return r=null==r?1/.7:Math.pow(1/.7,r),new $a(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new $a(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+360*(this.h<0),l=isNaN(r)||isNaN(this.s)?0:this.s,u=this.l,h=u+(u<.5?u:1-u)*l,g=2*u-h;return new Qn(vr(r>=240?r-240:r+120,g,h),vr(r,g,h),vr(r<120?r+240:r-120,g,h),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=this.opacity;return(1===(r=isNaN(r)?1:Math.max(0,Math.min(1,r)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===r?")":", "+r+")")}}));var Xr=Math.PI/180,Po=180/Math.PI,br=4/29,Cs=6/29,fl=3*Cs*Cs;function Ro(r){if(r instanceof aa)return new aa(r.l,r.a,r.b,r.opacity);if(r instanceof Xi)return Oo(r);r instanceof Qn||(r=ga(r));var l,u,h=ks(r.r),g=ks(r.g),v=ks(r.b),x=Fs((.2225045*h+.7168786*g+.0606169*v)/1);return h===g&&g===v?l=u=x:(l=Fs((.4360747*h+.3850649*g+.1430804*v)/.96422),u=Fs((.0139322*h+.0971045*g+.7141733*v)/.82521)),new aa(116*x-16,500*(l-x),200*(x-u),r.opacity)}function is(r,l,u,h){return 1===arguments.length?Ro(r):new aa(r,l,u,h??1)}function aa(r,l,u,h){this.l=+r,this.a=+l,this.b=+u,this.opacity=+h}function Fs(r){return r>.008856451679035631?Math.pow(r,1/3):r/fl+br}function Hs(r){return r>Cs?r*r*r:fl*(r-br)}function Qr(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function ks(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function qs(r){if(r instanceof Xi)return new Xi(r.h,r.c,r.l,r.opacity);if(r instanceof aa||(r=Ro(r)),0===r.a&&0===r.b)return new Xi(NaN,0<r.l&&r.l<100?0:NaN,r.l,r.opacity);var l=Math.atan2(r.b,r.a)*Po;return new Xi(l<0?l+360:l,Math.sqrt(r.a*r.a+r.b*r.b),r.l,r.opacity)}function as(r,l,u,h){return 1===arguments.length?qs(r):new Xi(r,l,u,h??1)}function Xi(r,l,u,h){this.h=+r,this.c=+l,this.l=+u,this.opacity=+h}function Oo(r){if(isNaN(r.h))return new aa(r.l,0,0,r.opacity);var l=r.h*Xr;return new aa(r.l,Math.cos(l)*r.c,Math.sin(l)*r.c,r.opacity)}ws(aa,is,Oa(Ba,{brighter:function(r){return new aa(this.l+18*(r??1),this.a,this.b,this.opacity)},darker:function(r){return new aa(this.l-18*(r??1),this.a,this.b,this.opacity)},rgb:function(){var r=(this.l+16)/116,l=isNaN(this.a)?r:r+this.a/500,u=isNaN(this.b)?r:r-this.b/200;return new Qn(Qr(3.1338561*(l=.96422*Hs(l))-1.6168667*(r=1*Hs(r))-.4906146*(u=.82521*Hs(u))),Qr(-.9787684*l+1.9161415*r+.033454*u),Qr(.0719453*l-.2289914*r+1.4052427*u),this.opacity)}})),ws(Xi,as,Oa(Ba,{brighter:function(r){return new Xi(this.h,this.c,this.l+18*(r??1),this.opacity)},darker:function(r){return new Xi(this.h,this.c,this.l-18*(r??1),this.opacity)},rgb:function(){return Oo(this).rgb()}}));var Bo=1.78277,yr=-.29227,de=-.90649,y=1.97294,E=y*de,O=y*Bo,F=Bo*yr- -.14861*de;function W(r,l,u,h){return 1===arguments.length?function(g){if(g instanceof Q)return new Q(g.h,g.s,g.l,g.opacity);g instanceof Qn||(g=ga(g));var x=g.g/255,w=g.b/255,k=(F*w+E*(g.r/255)-O*x)/(F+E-O),A=w-k,D=(y*(x-k)-yr*A)/de,B=Math.sqrt(D*D+A*A)/(y*k*(1-k)),I=B?Math.atan2(D,A)*Po-120:NaN;return new Q(I<0?I+360:I,B,k,g.opacity)}(r):new Q(r,l,u,h??1)}function Q(r,l,u,h){this.h=+r,this.s=+l,this.l=+u,this.opacity=+h}function ee(r,l,u,h,g){var v=r*r,x=v*r;return((1-3*r+3*v-x)*l+(4-6*v+3*x)*u+(1+3*r+3*v-3*x)*h+x*g)/6}function ge(r){var l=r.length-1;return function(u){var h=u<=0?u=0:u>=1?(u=1,l-1):Math.floor(u*l),g=r[h],v=r[h+1];return ee((u-h/l)*l,h>0?r[h-1]:2*g-v,g,v,h<l-1?r[h+2]:2*v-g)}}function pe(r){var l=r.length;return function(u){var h=Math.floor(((u%=1)<0?++u:u)*l);return ee((u-h/l)*l,r[(h+l-1)%l],r[h%l],r[(h+1)%l],r[(h+2)%l])}}function xe(r){return function(){return r}}function Pe(r,l){return function(u){return r+u*l}}function Ve(r,l){var u=l-r;return u?Pe(r,u>180||u<-180?u-360*Math.round(u/360):u):xe(isNaN(r)?l:r)}function De(r,l){var u=l-r;return u?Pe(r,u):xe(isNaN(r)?l:r)}ws(Q,W,Oa(Ba,{brighter:function(r){return r=null==r?1/.7:Math.pow(1/.7,r),new Q(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new Q(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=isNaN(this.h)?0:(this.h+120)*Xr,l=+this.l,u=isNaN(this.s)?0:this.s*l*(1-l),h=Math.cos(r),g=Math.sin(r);return new Qn(255*(l+u*(-.14861*h+Bo*g)),255*(l+u*(yr*h+de*g)),255*(l+u*(y*h)),this.opacity)}}));var ut=function r(l){var u=function Le(r){return 1==(r=+r)?De:function(l,u){return u-l?(h=l,g=u,v=r,h=Math.pow(h,v),g=Math.pow(g,v)-h,v=1/v,function(x){return Math.pow(h+x*g,v)}):xe(isNaN(l)?u:l);var h,g,v}}(l);function h(g,v){var x=u((g=ia(g)).r,(v=ia(v)).r),w=u(g.g,v.g),k=u(g.b,v.b),A=De(g.opacity,v.opacity);return function(D){return g.r=x(D),g.g=w(D),g.b=k(D),g.opacity=A(D),g+""}}return h.gamma=r,h}(1);function wt(r){return function(l){var u,h,g=l.length,v=new Array(g),x=new Array(g),w=new Array(g);for(u=0;u<g;++u)h=ia(l[u]),v[u]=h.r||0,x[u]=h.g||0,w[u]=h.b||0;return v=r(v),x=r(x),w=r(w),h.opacity=1,function(k){return h.r=v(k),h.g=x(k),h.b=w(k),h+""}}}var vt=wt(ge),Sn=wt(pe);function Ft(r,l){l||(l=[]);var u,h=r?Math.min(l.length,r.length):0,g=l.slice();return function(v){for(u=0;u<h;++u)g[u]=r[u]*(1-v)+l[u]*v;return g}}function Ln(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function hn(r,l){var u,h=l?l.length:0,g=r?Math.min(h,r.length):0,v=new Array(g),x=new Array(h);for(u=0;u<g;++u)v[u]=hi(r[u],l[u]);for(;u<h;++u)x[u]=l[u];return function(w){for(u=0;u<g;++u)x[u]=v[u](w);return x}}function Ht(r,l){var u=new Date;return r=+r,l=+l,function(h){return u.setTime(r*(1-h)+l*h),u}}function pn(r,l){return r=+r,l=+l,function(u){return r*(1-u)+l*u}}function an(r,l){var u,h={},g={};for(u in null!==r&&"object"==typeof r||(r={}),null!==l&&"object"==typeof l||(l={}),l)u in r?h[u]=hi(r[u],l[u]):g[u]=l[u];return function(v){for(u in h)g[u]=h[u](v);return g}}var yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(yn.source,"g");function _a(r,l){var u,h,g,A,v=yn.lastIndex=ss.lastIndex=0,x=-1,w=[],k=[];for(r+="",l+="";(u=yn.exec(r))&&(h=ss.exec(l));)(g=h.index)>v&&(g=l.slice(v,g),w[x]?w[x]+=g:w[++x]=g),(u=u[0])===(h=h[0])?w[x]?w[x]+=h:w[++x]=h:(w[++x]=null,k.push({i:x,x:pn(u,h)})),v=ss.lastIndex;return v<l.length&&(g=l.slice(v),w[x]?w[x]+=g:w[++x]=g),w.length<2?k[0]?(A=k[0].x,function(D){return A(D)+""}):function(A){return function(){return A}}(l):(l=k.length,function(A){for(var D,B=0;B<l;++B)w[(D=k[B]).i]=D.x(A);return w.join("")})}function hi(r,l){var u,h=typeof l;return null==l||"boolean"===h?xe(l):("number"===h?pn:"string"===h?(u=na(l))?(l=u,ut):_a:l instanceof na?ut:l instanceof Date?Ht:Ln(l)?Ft:Array.isArray(l)?hn:"function"!=typeof l.valueOf&&"function"!=typeof l.toString||isNaN(l)?an:pn)(r,l)}function rs(r,l){return r=+r,l=+l,function(u){return Math.round(r*(1-u)+l*u)}}var sa,pi,za,fi,En=180/Math.PI,Li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gi(r,l,u,h,g,v){var x,w,k;return(x=Math.sqrt(r*r+l*l))&&(r/=x,l/=x),(k=r*u+l*h)&&(u-=r*k,h-=l*k),(w=Math.sqrt(u*u+h*h))&&(u/=w,h/=w,k/=w),r*h<l*u&&(r=-r,l=-l,k=-k,x=-x),{translateX:g,translateY:v,rotate:Math.atan2(l,r)*En,skewX:Math.atan(k)*En,scaleX:x,scaleY:w}}function ma(r,l,u,h){function g(v){return v.length?v.pop()+" ":""}return function(v,x){var A,D,B,w=[],k=[];return v=r(v),x=r(x),function(A,D,B,I,q,j){if(A!==B||D!==I){var K=q.push("translate(",null,l,null,u);j.push({i:K-4,x:pn(A,B)},{i:K-2,x:pn(D,I)})}else(B||I)&&q.push("translate("+B+l+I+u)}(v.translateX,v.translateY,x.translateX,x.translateY,w,k),B=w,(A=v.rotate)!==(D=x.rotate)?(A-D>180?D+=360:D-A>180&&(A+=360),k.push({i:B.push(g(B)+"rotate(",null,h)-2,x:pn(A,D)})):D&&B.push(g(B)+"rotate("+D+h),function(A,D,B,I){A!==D?I.push({i:B.push(g(B)+"skewX(",null,h)-2,x:pn(A,D)}):D&&B.push(g(B)+"skewX("+D+h)}(v.skewX,x.skewX,w,k),function(A,D,B,I,q,j){if(A!==B||D!==I){var K=q.push(g(q)+"scale(",null,",",null,")");j.push({i:K-4,x:pn(A,B)},{i:K-2,x:pn(D,I)})}else 1===B&&1===I||q.push(g(q)+"scale("+B+","+I+")")}(v.scaleX,v.scaleY,x.scaleX,x.scaleY,w,k),v=x=null,function(A){for(var D,B=-1,I=k.length;++B<I;)w[(D=k[B]).i]=D.x(A);return w.join("")}}}var qt=ma(function(r){return"none"===r?Li:(sa||(sa=document.createElement("DIV"),pi=document.documentElement,za=document.defaultView),sa.style.transform=r,r=za.getComputedStyle(pi.appendChild(sa),null).getPropertyValue("transform"),pi.removeChild(sa),gi(+(r=r.slice(7,-1).split(","))[0],+r[1],+r[2],+r[3],+r[4],+r[5]))},"px, ","px)","deg)"),on=ma(function(r){return null==r?Li:(fi||(fi=document.createElementNS("http://www.w3.org/2000/svg","g")),fi.setAttribute("transform",r),(r=fi.transform.baseVal.consolidate())?gi((r=r.matrix).a,r.b,r.c,r.d,r.e,r.f):Li)},", ",")",")"),wn=Math.SQRT2;function Ts(r){return((r=Math.exp(r))+1/r)/2}function os(r,l){var u,h,g=r[0],v=r[1],x=r[2],A=l[2],D=l[0]-g,B=l[1]-v,I=D*D+B*B;if(I<1e-12)h=Math.log(A/x)/wn,u=function(ne){return[g+ne*D,v+ne*B,x*Math.exp(wn*ne*h)]};else{var q=Math.sqrt(I),j=(A*A-x*x+4*I)/(2*x*2*q),K=(A*A-x*x-4*I)/(2*A*2*q),X=Math.log(Math.sqrt(j*j+1)-j),Y=Math.log(Math.sqrt(K*K+1)-K);h=(Y-X)/wn,u=function(ne){var ve,te=ne*h,se=Ts(X),fe=x/(2*q)*(se*(ve=wn*te+X,((ve=Math.exp(2*ve))-1)/(ve+1))-function(ve){return((ve=Math.exp(ve))-1/ve)/2}(X));return[g+fe*D,v+fe*B,x*se/Ts(wn*te+X)]}}return u.duration=1e3*h,u}function gl(r){return function(l,u){var h=r((l=ts(l)).h,(u=ts(u)).h),g=De(l.s,u.s),v=De(l.l,u.l),x=De(l.opacity,u.opacity);return function(w){return l.h=h(w),l.s=g(w),l.l=v(w),l.opacity=x(w),l+""}}}var _o=gl(Ve),ml=gl(De);function js(r){return function(l,u){var h=r((l=as(l)).h,(u=as(u)).h),g=De(l.c,u.c),v=De(l.l,u.l),x=De(l.opacity,u.opacity);return function(w){return l.h=h(w),l.c=g(w),l.l=v(w),l.opacity=x(w),l+""}}}var Kl=js(Ve),zo=js(De);function vl(r){return function l(u){function h(g,v){var x=r((g=W(g)).h,(v=W(v)).h),w=De(g.s,v.s),k=De(g.l,v.l),A=De(g.opacity,v.opacity);return function(D){return g.h=x(D),g.s=w(D),g.l=k(Math.pow(D,u)),g.opacity=A(D),g+""}}return u=+u,h.gamma=l,h}(1)}var ls,Qi,wr=vl(Ve),xr=vl(De),vi=0,cs=0,Ni=0,Ws=0,ln=0,ra=0,bi="object"==typeof performance&&performance.now?performance:Date,oa="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function va(){return ln||(oa(Zr),ln=bi.now()+ra)}function Zr(){ln=0}function Cr(){this._call=this._time=this._next=null}function Ri(r,l,u){var h=new Cr;return h.restart(r,l,u),h}function eo(){va(),++vi;for(var r,l=ls;l;)(r=ln-l._time)>=0&&l._call.call(null,r),l=l._next;--vi}function Da(){ln=(Ws=bi.now())+ra,vi=cs=0;try{eo()}finally{vi=0,function(){for(var r,l,u=ls,h=1/0;u;)u._call?(h>u._time&&(h=u._time),r=u,u=u._next):(l=u._next,u._next=null,u=r?r._next=l:ls=l);Qi=r,Us(h)}(),ln=0}}function to(){var r=bi.now(),l=r-Ws;l>1e3&&(ra-=l,Ws=r)}function Us(r){vi||(cs&&(cs=clearTimeout(cs)),r-ln>24?(r<1/0&&(cs=setTimeout(Da,r-bi.now()-ra)),Ni&&(Ni=clearInterval(Ni))):(Ni||(Ws=bi.now(),Ni=setInterval(to,1e3)),vi=1,oa(Da)))}function Ia(r,l,u){var h=new Cr;return h.restart(function(g){h.stop(),r(g+l)},l=null==l?0:+l,u),h}Cr.prototype=Ri.prototype={constructor:Cr,restart:function(r,l,u){if("function"!=typeof r)throw new TypeError("callback is not a function");u=(null==u?va():+u)+(null==l?0:+l),this._next||Qi===this||(Qi?Qi._next=this:ls=this,Qi=this),this._call=r,this._time=u,Us()},stop:function(){this._call&&(this._call=null,this._time=1/0,Us())}};var As=xi("start","end","cancel","interrupt"),no=[];function Te(r,l,u,h,g,v){var x=r.__transition;if(x){if(u in x)return}else r.__transition={};!function(w,k,A){var D,B=w.__transition;function I(K){var X,Y,ne,te;if(1!==A.state)return j();for(X in B)if((te=B[X]).name===A.name){if(3===te.state)return Ia(I);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",w,w.__data__,te.index,te.group),delete B[X]):+X<k&&(te.state=6,te.timer.stop(),te.on.call("cancel",w,w.__data__,te.index,te.group),delete B[X])}if(Ia(function(){3===A.state&&(A.state=4,A.timer.restart(q,A.delay,A.time),q(K))}),A.state=2,A.on.call("start",w,w.__data__,A.index,A.group),2===A.state){for(A.state=3,D=new Array(ne=A.tween.length),X=0,Y=-1;X<ne;++X)(te=A.tween[X].value.call(w,w.__data__,A.index,A.group))&&(D[++Y]=te);D.length=Y+1}}function q(K){for(var X=K<A.duration?A.ease.call(null,K/A.duration):(A.timer.restart(j),A.state=5,1),Y=-1,ne=D.length;++Y<ne;)D[Y].call(w,X);5===A.state&&(A.on.call("end",w,w.__data__,A.index,A.group),j())}function j(){for(var K in A.state=6,A.timer.stop(),delete B[k],B)return;delete w.__transition}B[k]=A,A.timer=Ri(function(K){A.state=1,A.timer.restart(I,A.delay,A.time),A.delay<=K&&I(K-A.delay)},0,A.time)}(r,u,{name:l,index:h,group:g,on:As,tween:no,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:0})}function We(r,l){var u=Je(r,l);if(u.state>0)throw new Error("too late; already scheduled");return u}function Ue(r,l){var u=Je(r,l);if(u.state>3)throw new Error("too late; already running");return u}function Je(r,l){var u=r.__transition;if(!u||!(u=u[l]))throw new Error("transition not found");return u}function rt(r,l){var u,h,g,v=r.__transition,x=!0;if(v){for(g in l=null==l?null:l+"",v)(u=v[g]).name===l?(h=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(h?"interrupt":"cancel",r,r.__data__,u.index,u.group),delete v[g]):x=!1;x&&delete r.__transition}}function Bt(r,l,u){var h=r._id;return r.each(function(){var g=Ue(this,h);(g.value||(g.value={}))[l]=u.apply(this,arguments)}),function(g){return Je(g,h).value[l]}}function Mt(r,l){var u;return("number"==typeof l?pn:l instanceof na?ut:(u=na(l))?(l=u,ut):_a)(r,l)}var Rt=Na.prototype.constructor;function Zt(r){return function(){this.style.removeProperty(r)}}var zn=0;function St(r,l,u,h){this._groups=r,this._parents=l,this._name=u,this._id=h}function jn(r){return Na().transition(r)}function ti(){return++zn}var Kn=Na.prototype;function fn(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function Ji(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}St.prototype=jn.prototype={constructor:St,select:function(r){var l=this._name,u=this._id;"function"!=typeof r&&(r=Ps(r));for(var h=this._groups,g=h.length,v=new Array(g),x=0;x<g;++x)for(var w,k,A=h[x],D=A.length,B=v[x]=new Array(D),I=0;I<D;++I)(w=A[I])&&(k=r.call(w,w.__data__,I,A))&&("__data__"in w&&(k.__data__=w.__data__),B[I]=k,Te(B[I],l,u,I,B,Je(w,u)));return new St(v,this._parents,l,u)},selectAll:function(r){var l=this._name,u=this._id;"function"!=typeof r&&(r=qi(r));for(var h=this._groups,g=h.length,v=[],x=[],w=0;w<g;++w)for(var k,A=h[w],D=A.length,B=0;B<D;++B)if(k=A[B]){for(var I,q=r.call(k,k.__data__,B,A),j=Je(k,u),K=0,X=q.length;K<X;++K)(I=q[K])&&Te(I,l,u,K,q,j);v.push(q),x.push(k)}return new St(v,x,l,u)},filter:function(r){"function"!=typeof r&&(r=Xa(r));for(var l=this._groups,u=l.length,h=new Array(u),g=0;g<u;++g)for(var v,x=l[g],w=x.length,k=h[g]=[],A=0;A<w;++A)(v=x[A])&&r.call(v,v.__data__,A,x)&&k.push(v);return new St(h,this._parents,this._name,this._id)},merge:function(r){if(r._id!==this._id)throw new Error;for(var l=this._groups,u=r._groups,h=l.length,v=Math.min(h,u.length),x=new Array(h),w=0;w<v;++w)for(var k,A=l[w],D=u[w],B=A.length,I=x[w]=new Array(B),q=0;q<B;++q)(k=A[q]||D[q])&&(I[q]=k);for(;w<h;++w)x[w]=l[w];return new St(x,this._parents,this._name,this._id)},selection:function(){return new Rt(this._groups,this._parents)},transition:function(){for(var r=this._name,l=this._id,u=ti(),h=this._groups,g=h.length,v=0;v<g;++v)for(var x,w=h[v],k=w.length,A=0;A<k;++A)if(x=w[A]){var D=Je(x,l);Te(x,r,u,A,w,{time:D.time+D.delay+D.duration,delay:0,duration:D.duration,ease:D.ease})}return new St(h,this._parents,r,u)},call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:function(r,l){var h,g,v,x,w,k,u=this._id;return arguments.length<2?Je(this.node(),u).on.on(r):this.each((h=u,v=l,k=((g=r)+"").trim().split(/^|\s+/).every(function(D){var B=D.indexOf(".");return B>=0&&(D=D.slice(0,B)),!D||"start"===D})?We:Ue,function(){var A=k(this,h),D=A.on;D!==x&&(w=(x=D).copy()).on(g,v),A.on=w}))},attr:function(r,l){var u=dt(r),h="transform"===u?on:Mt;return this.attrTween(r,"function"==typeof l?(u.local?function(g,v,x){var w,k,A;return function(){var D,B,I=x(this);if(null!=I)return(D=this.getAttributeNS(g.space,g.local))===(B=I+"")?null:D===w&&B===k?A:(k=B,A=v(w=D,I));this.removeAttributeNS(g.space,g.local)}}:function(g,v,x){var w,k,A;return function(){var D,B,I=x(this);if(null!=I)return(D=this.getAttribute(g))===(B=I+"")?null:D===w&&B===k?A:(k=B,A=v(w=D,I));this.removeAttribute(g)}})(u,h,Bt(this,"attr."+r,l)):null==l?(u.local?function(g){return function(){this.removeAttributeNS(g.space,g.local)}}:function(g){return function(){this.removeAttribute(g)}})(u):(u.local?function(g,v,x){var w,k,A=x+"";return function(){var D=this.getAttributeNS(g.space,g.local);return D===A?null:D===w?k:k=v(w=D,x)}}:function(g,v,x){var w,k,A=x+"";return function(){var D=this.getAttribute(g);return D===A?null:D===w?k:k=v(w=D,x)}})(u,h,l))},attrTween:function(r,l){var u="attr."+r;if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==l)return this.tween(u,null);if("function"!=typeof l)throw new Error;var h=dt(r);return this.tween(u,(h.local?function(g,v){var x,w;function k(){var D,B,A=v.apply(this,arguments);return A!==w&&(x=(w=A)&&(D=g,B=A,function(I){this.setAttributeNS(D.space,D.local,B.call(this,I))})),x}return k._value=v,k}:function(g,v){var x,w;function k(){var D,B,A=v.apply(this,arguments);return A!==w&&(x=(w=A)&&(D=g,B=A,function(I){this.setAttribute(D,B.call(this,I))})),x}return k._value=v,k})(h,l))},style:function(r,l,u){var g,v,x,w,k,h="transform"==(r+="")?qt:Mt;return null==l?this.styleTween(r,(g=r,v=h,function(){var A=ta(this,g),D=(this.style.removeProperty(g),ta(this,g));return A===D?null:A===x&&D===w?k:k=v(x=A,w=D)})).on("end.style."+r,Zt(r)):"function"==typeof l?this.styleTween(r,function(g,v,x){var w,k,A;return function(){var D=ta(this,g),B=x(this),I=B+"";return null==B&&(this.style.removeProperty(g),I=B=ta(this,g)),D===I?null:D===w&&I===k?A:(k=I,A=v(w=D,B))}}(r,h,Bt(this,"style."+r,l))).each(function(g,v){var x,w,k,A,D="style."+v,B="end."+D;return function(){var I=Ue(this,g),q=I.on,j=null==I.value[D]?A||(A=Zt(v)):void 0;q===x&&k===j||(w=(x=q).copy()).on(B,k=j),I.on=w}}(this._id,r)):this.styleTween(r,function(g,v,x){var w,k,A=x+"";return function(){var D=ta(this,g);return D===A?null:D===w?k:k=v(w=D,x)}}(r,h,l),u).on("end.style."+r,null)},styleTween:function(r,l,u){var h="style."+(r+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==l)return this.tween(h,null);if("function"!=typeof l)throw new Error;return this.tween(h,function(g,v,x){var w,k;function A(){var B,I,q,D=v.apply(this,arguments);return D!==k&&(w=(k=D)&&(B=g,I=D,q=x,function(j){this.style.setProperty(B,I.call(this,j),q)})),w}return A._value=v,A}(r,l,u??""))},text:function(r){return this.tween("text","function"==typeof r?(l=Bt(this,"text",r),function(){var u=l(this);this.textContent=u??""}):function(l){return function(){this.textContent=l}}(null==r?"":r+""));var l},textTween:function(r){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(null==r)return this.tween(l,null);if("function"!=typeof r)throw new Error;return this.tween(l,function(u){var h,g;function v(){var w,x=u.apply(this,arguments);return x!==g&&(h=(g=x)&&(w=x,function(k){this.textContent=w.call(this,k)})),h}return v._value=u,v}(r))},remove:function(){return this.on("end.remove",(r=this._id,function(){var l=this.parentNode;for(var u in this.__transition)if(+u!==r)return;l&&l.removeChild(this)}));var r},tween:function(r,l){var u=this._id;if(r+="",arguments.length<2){for(var h,g=Je(this.node(),u).tween,v=0,x=g.length;v<x;++v)if((h=g[v]).name===r)return h.value;return null}return this.each((null==l?function(w,k){var A,D;return function(){var B=Ue(this,w),I=B.tween;if(I!==A)for(var q=0,j=(D=A=I).length;q<j;++q)if(D[q].name===k){(D=D.slice()).splice(q,1);break}B.tween=D}}:function(w,k,A){var D,B;if("function"!=typeof A)throw new Error;return function(){var I=Ue(this,w),q=I.tween;if(q!==D){B=(D=q).slice();for(var j={name:k,value:A},K=0,X=B.length;K<X;++K)if(B[K].name===k){B[K]=j;break}K===X&&B.push(j)}I.tween=B}})(u,r,l))},delay:function(r){var l=this._id;return arguments.length?this.each(("function"==typeof r?function(u,h){return function(){We(this,u).delay=+h.apply(this,arguments)}}:function(u,h){return h=+h,function(){We(this,u).delay=h}})(l,r)):Je(this.node(),l).delay},duration:function(r){var l=this._id;return arguments.length?this.each(("function"==typeof r?function(u,h){return function(){Ue(this,u).duration=+h.apply(this,arguments)}}:function(u,h){return h=+h,function(){Ue(this,u).duration=h}})(l,r)):Je(this.node(),l).duration},ease:function(r){var l=this._id;return arguments.length?this.each(function(u,h){if("function"!=typeof h)throw new Error;return function(){Ue(this,u).ease=h}}(l,r)):Je(this.node(),l).ease},end:function(){var r,l,u=this,h=u._id,g=u.size();return new Promise(function(v,x){var w={value:x},k={value:function(){0==--g&&v()}};u.each(function(){var A=Ue(this,h),D=A.on;D!==r&&((l=(r=D).copy())._.cancel.push(w),l._.interrupt.push(w),l._.end.push(k)),A.on=l})})}};var ci=function r(l){function u(h){return Math.pow(h,l)}return l=+l,u.exponent=r,u}(3),Jn=function r(l){function u(h){return 1-Math.pow(1-h,l)}return l=+l,u.exponent=r,u}(3),Vi=function r(l){function u(h){return((h*=2)<=1?Math.pow(h,l):2-Math.pow(2-h,l))/2}return l=+l,u.exponent=r,u}(3),kr=Math.PI,Tr=kr/2;function io(r){return(1-Math.cos(kr*r))/2}function ao(r){return((r*=2)<=1?Math.pow(2,10*r-10):2-Math.pow(2,10-10*r))/2}function id(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var Ar=7.5625;function Xs(r){return(r=+r)<.36363636363636365?Ar*r*r:r<.7272727272727273?Ar*(r-=.5454545454545454)*r+.75:r<.9090909090909091?Ar*(r-=.8181818181818182)*r+.9375:Ar*(r-=.9545454545454546)*r+.984375}var ld=function r(l){function u(h){return h*h*((l+1)*h-l)}return l=+l,u.overshoot=r,u}(1.70158),Iu=function r(l){function u(h){return--h*h*((l+1)*h+l)+1}return l=+l,u.overshoot=r,u}(1.70158),yl=function r(l){function u(h){return((h*=2)<1?h*h*((l+1)*h-l):(h-=2)*h*((l+1)*h+l)+2)/2}return l=+l,u.overshoot=r,u}(1.70158),Sr=2*Math.PI,Jl=function r(l,u){var h=Math.asin(1/(l=Math.max(1,l)))*(u/=Sr);function g(v){return l*Math.pow(2,10*--v)*Math.sin((h-v)/u)}return g.amplitude=function(v){return r(v,u*Sr)},g.period=function(v){return r(l,v)},g}(1,.3),wl=function r(l,u){var h=Math.asin(1/(l=Math.max(1,l)))*(u/=Sr);function g(v){return 1-l*Math.pow(2,-10*(v=+v))*Math.sin((v+h)/u)}return g.amplitude=function(v){return r(v,u*Sr)},g.period=function(v){return r(l,v)},g}(1,.3),cd=function r(l,u){var h=Math.asin(1/(l=Math.max(1,l)))*(u/=Sr);function g(v){return((v=2*v-1)<0?l*Math.pow(2,10*v)*Math.sin((h-v)/u):2-l*Math.pow(2,-10*v)*Math.sin((h+v)/u))/2}return g.amplitude=function(v){return r(v,u*Sr)},g.period=function(v){return r(l,v)},g}(1,.3),Zl={time:null,delay:0,duration:250,ease:Ji};function ec(r,l){for(var u;!(u=r.__transition)||!(u=u[l]);)if(!(r=r.parentNode))return Zl.time=va(),Zl;return u}Na.prototype.interrupt=function(r){return this.each(function(){rt(this,r)})},Na.prototype.transition=function(r){var l,u;r instanceof St?(l=r._id,r=r._name):(l=ti(),(u=Zl).time=va(),r=null==r?null:r+"");for(var h=this._groups,g=h.length,v=0;v<g;++v)for(var x,w=h[v],k=w.length,A=0;A<k;++A)(x=w[A])&&Te(x,r,l,A,w,u||ec(x,l));return new St(h,this._parents,r,l)};var dd=[null];function xl(r){return function(){return r}}function Mu(r,l,u){this.target=r,this.type=l,this.selection=u}function Cl(){R.event.stopImmediatePropagation()}function kl(){R.event.preventDefault(),R.event.stopImmediatePropagation()}var ud={name:"drag"},Fo={name:"space"},so={name:"handle"},Qs={name:"center"};function tc(r){return[+r[0],+r[1]]}function Ho(r){return[tc(r[0]),tc(r[1])]}var qo={name:"x",handles:["w","e"].map(oo),input:function(r,l){return null==r?null:[[+r[0],l[0][1]],[+r[1],l[1][1]]]},output:function(r){return r&&[r[0][0],r[1][0]]}},ro={name:"y",handles:["n","s"].map(oo),input:function(r,l){return null==r?null:[[l[0][0],+r[0]],[l[1][0],+r[1]]]},output:function(r){return r&&[r[0][1],r[1][1]]}},hd={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(oo),input:function(r){return null==r?null:Ho(r)},output:function(r){return r}},Ss={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Tl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},pd={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},nc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Vo={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function oo(r){return{type:r}}function fd(){return!R.event.ctrlKey&&!R.event.button}function gd(){var r=this.ownerSVGElement||this;return r.hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]}function md(){return navigator.maxTouchPoints||"ontouchstart"in this}function lo(r){for(;!r.__brush;)if(!(r=r.parentNode))return;return r.__brush}function xn(r){var l,u=gd,h=fd,g=md,v=!0,x=xi("start","brush","end"),w=6;function k(X){var Y=X.property("__brush",K).selectAll(".overlay").data([oo("overlay")]);Y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ss.overlay).merge(Y).each(function(){var te=lo(this).extent;Gn(this).attr("x",te[0][0]).attr("y",te[0][1]).attr("width",te[1][0]-te[0][0]).attr("height",te[1][1]-te[0][1])}),X.selectAll(".selection").data([oo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ss.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ne=X.selectAll(".handle").data(r.handles,function(te){return te.type});ne.exit().remove(),ne.enter().append("rect").attr("class",function(te){return"handle handle--"+te.type}).attr("cursor",function(te){return Ss[te.type]}),X.each(A).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",I).filter(g).on("touchstart.brush",I).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(){var X=Gn(this),Y=lo(this).selection;Y?(X.selectAll(".selection").style("display",null).attr("x",Y[0][0]).attr("y",Y[0][1]).attr("width",Y[1][0]-Y[0][0]).attr("height",Y[1][1]-Y[0][1]),X.selectAll(".handle").style("display",null).attr("x",function(ne){return"e"===ne.type[ne.type.length-1]?Y[1][0]-w/2:Y[0][0]-w/2}).attr("y",function(ne){return"s"===ne.type[0]?Y[1][1]-w/2:Y[0][1]-w/2}).attr("width",function(ne){return"n"===ne.type||"s"===ne.type?Y[1][0]-Y[0][0]+w:w}).attr("height",function(ne){return"e"===ne.type||"w"===ne.type?Y[1][1]-Y[0][1]+w:w})):X.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function D(X,Y,ne){return!ne&&X.__brush.emitter||new B(X,Y)}function B(X,Y){this.that=X,this.args=Y,this.state=X.__brush,this.active=0}function I(){if((!l||R.event.touches)&&h.apply(this,arguments)){var X,Y,ne,te,se,fe,ve,Ae,qe,me,Me,Se,ie=this,Ce=R.event.target.__data__.type,we="selection"===(v&&R.event.metaKey?Ce="overlay":Ce)?ud:v&&R.event.altKey?Qs:so,Ee=r===ro?null:nc[Ce],Fe=r===qo?null:Vo[Ce],ct=lo(ie),It=ct.extent,Ot=ct.selection,Qt=It[0][0],gt=It[0][1],rn=It[1][0],dn=It[1][1],Ct=0,Vt=0,ri=Ee&&Fe&&v&&R.event.shiftKey,ea=R.event.touches?(Se=R.event.changedTouches[0].identifier,function(yi){return _s(yi,R.event.touches,Se)}):Ra,Rr=ea(ie),vo=Rr,bo=D(ie,arguments,!0).beforestart();"overlay"===Ce?(Ot&&(qe=!0),ct.selection=Ot=[[X=r===ro?Qt:Rr[0],ne=r===qo?gt:Rr[1]],[se=r===ro?rn:X,ve=r===qo?dn:ne]]):(X=Ot[0][0],ne=Ot[0][1],se=Ot[1][0],ve=Ot[1][1]),Y=X,te=ne,fe=se,Ae=ve;var rr=Gn(ie).attr("pointer-events","none"),Or=rr.selectAll(".overlay").attr("cursor",Ss[Ce]);if(R.event.touches)bo.moved=Eu,bo.ended=td;else{var Su=Gn(R.event.view).on("mousemove.brush",Eu,!0).on("mouseup.brush",td,!0);v&&Su.on("keydown.brush",function(){switch(R.event.keyCode){case 16:ri=Ee&&Fe;break;case 18:we===so&&(Ee&&(se=fe-Ct*Ee,X=Y+Ct*Ee),Fe&&(ve=Ae-Vt*Fe,ne=te+Vt*Fe),we=Qs,Br());break;case 32:we!==so&&we!==Qs||(Ee<0?se=fe-Ct:Ee>0&&(X=Y-Ct),Fe<0?ve=Ae-Vt:Fe>0&&(ne=te-Vt),we=Fo,Or.attr("cursor",Ss.selection),Br());break;default:return}kl()},!0).on("keyup.brush",function(){switch(R.event.keyCode){case 16:ri&&(me=Me=ri=!1,Br());break;case 18:we===Qs&&(Ee<0?se=fe:Ee>0&&(X=Y),Fe<0?ve=Ae:Fe>0&&(ne=te),we=so,Br());break;case 32:we===Fo&&(R.event.altKey?(Ee&&(se=fe-Ct*Ee,X=Y+Ct*Ee),Fe&&(ve=Ae-Vt*Fe,ne=te+Vt*Fe),we=Qs):(Ee<0?se=fe:Ee>0&&(X=Y),Fe<0?ve=Ae:Fe>0&&(ne=te),we=so),Or.attr("cursor",Ss[Ce]),Br());break;default:return}kl()},!0),pr(R.event.view)}Cl(),rt(ie),A.call(ie),bo.start()}function Eu(){var yi=ea(ie);!ri||me||Me||(Math.abs(yi[0]-vo[0])>Math.abs(yi[1]-vo[1])?Me=!0:me=!0),vo=yi,qe=!0,kl(),Br()}function Br(){var yi;switch(Ct=vo[0]-Rr[0],Vt=vo[1]-Rr[1],we){case Fo:case ud:Ee&&(Ct=Math.max(Qt-X,Math.min(rn-se,Ct)),Y=X+Ct,fe=se+Ct),Fe&&(Vt=Math.max(gt-ne,Math.min(dn-ve,Vt)),te=ne+Vt,Ae=ve+Vt);break;case so:Ee<0?(Ct=Math.max(Qt-X,Math.min(rn-X,Ct)),Y=X+Ct,fe=se):Ee>0&&(Ct=Math.max(Qt-se,Math.min(rn-se,Ct)),Y=X,fe=se+Ct),Fe<0?(Vt=Math.max(gt-ne,Math.min(dn-ne,Vt)),te=ne+Vt,Ae=ve):Fe>0&&(Vt=Math.max(gt-ve,Math.min(dn-ve,Vt)),te=ne,Ae=ve+Vt);break;case Qs:Ee&&(Y=Math.max(Qt,Math.min(rn,X-Ct*Ee)),fe=Math.max(Qt,Math.min(rn,se+Ct*Ee))),Fe&&(te=Math.max(gt,Math.min(dn,ne-Vt*Fe)),Ae=Math.max(gt,Math.min(dn,ve+Vt*Fe)))}fe<Y&&(Ee*=-1,yi=X,X=se,se=yi,yi=Y,Y=fe,fe=yi,Ce in Tl&&Or.attr("cursor",Ss[Ce=Tl[Ce]])),Ae<te&&(Fe*=-1,yi=ne,ne=ve,ve=yi,yi=te,te=Ae,Ae=yi,Ce in pd&&Or.attr("cursor",Ss[Ce=pd[Ce]])),ct.selection&&(Ot=ct.selection),me&&(Y=Ot[0][0],fe=Ot[1][0]),Me&&(te=Ot[0][1],Ae=Ot[1][1]),Ot[0][0]===Y&&Ot[0][1]===te&&Ot[1][0]===fe&&Ot[1][1]===Ae||(ct.selection=[[Y,te],[fe,Ae]],A.call(ie),bo.brush())}function td(){if(Cl(),R.event.touches){if(R.event.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else zs(R.event.view,qe),Su.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var yi;rr.attr("pointer-events","all"),Or.attr("cursor",Ss.overlay),ct.selection&&(Ot=ct.selection),((yi=Ot)[0][0]===yi[1][0]||yi[0][1]===yi[1][1])&&(ct.selection=null,A.call(ie)),bo.end()}}function q(){D(this,arguments).moved()}function j(){D(this,arguments).ended()}function K(){var X=this.__brush||{selection:null};return X.extent=Ho(u.apply(this,arguments)),X.dim=r,X}return k.move=function(X,Y){X.selection?X.on("start.brush",function(){D(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){D(this,arguments).end()}).tween("brush",function(){var ne=this,te=ne.__brush,se=D(ne,arguments),fe=te.selection,ve=r.input("function"==typeof Y?Y.apply(this,arguments):Y,te.extent),Ae=hi(fe,ve);function qe(me){te.selection=1===me&&null===ve?null:Ae(me),A.call(ne),se.brush()}return null!==fe&&null!==ve?qe:qe(1)}):X.each(function(){var ne=this,te=arguments,se=ne.__brush,fe=r.input("function"==typeof Y?Y.apply(ne,te):Y,se.extent),ve=D(ne,te).beforestart();rt(ne),se.selection=null===fe?null:fe,A.call(ne),ve.start().brush().end()})},k.clear=function(X){k.move(X,null)},B.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(X){bs(new Mu(k,X,r.output(this.state.selection)),x.apply,x,[X,this.that,this.args])}},k.extent=function(X){return arguments.length?(u="function"==typeof X?X:xl(Ho(X)),k):u},k.filter=function(X){return arguments.length?(h="function"==typeof X?X:xl(!!X),k):h},k.touchable=function(X){return arguments.length?(g="function"==typeof X?X:xl(!!X),k):g},k.handleSize=function(X){return arguments.length?(w=+X,k):w},k.keyModifiers=function(X){return arguments.length?(v=!!X,k):v},k.on=function(){var X=x.on.apply(x,arguments);return X===x?k:X},k}var Fa=Math.cos,Oi=Math.sin,vd=Math.PI,co=vd/2,ic=2*vd,bd=Math.max;function ac(r){return function(l,u){return r(l.source.value+l.target.value,u.source.value+u.target.value)}}var yd=Array.prototype.slice;function Er(r){return function(){return r}}var Al=Math.PI,jo=2*Al,Lu=jo-1e-6;function Wo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Js(){return new Wo}function sc(r){return r.source}function Pu(r){return r.target}function Sl(r){return r.radius}function rc(r){return r.startAngle}function Nu(r){return r.endAngle}function El(){}function ds(r,l){var u=new El;if(r instanceof El)r.each(function(w,k){u.set(k,w)});else if(Array.isArray(r)){var h,g=-1,v=r.length;if(null==l)for(;++g<v;)u.set(g,r[g]);else for(;++g<v;)u.set(l(h=r[g],g,r),h)}else if(r)for(var x in r)u.set(x,r[x]);return u}function oc(){return{}}function wd(r,l,u){r[l]=u}function $l(){return ds()}function xd(r,l,u){r.set(l,u)}function Ha(){}Wo.prototype=Js.prototype={constructor:Wo,moveTo:function(r,l){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,l){this._+="L"+(this._x1=+r)+","+(this._y1=+l)},quadraticCurveTo:function(r,l,u,h){this._+="Q"+ +r+","+ +l+","+(this._x1=+u)+","+(this._y1=+h)},bezierCurveTo:function(r,l,u,h,g,v){this._+="C"+ +r+","+ +l+","+ +u+","+ +h+","+(this._x1=+g)+","+(this._y1=+v)},arcTo:function(r,l,u,h,g){var v=this._x1,x=this._y1,w=(u=+u)-(r=+r),k=(h=+h)-(l=+l),A=v-r,D=x-l,B=A*A+D*D;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=r)+","+(this._y1=l);else if(B>1e-6)if(Math.abs(D*w-k*A)>1e-6&&g){var I=u-v,q=h-x,j=w*w+k*k,K=I*I+q*q,X=Math.sqrt(j),Y=Math.sqrt(B),ne=g*Math.tan((Al-Math.acos((j+B-K)/(2*X*Y)))/2),te=ne/Y,se=ne/X;Math.abs(te-1)>1e-6&&(this._+="L"+(r+te*A)+","+(l+te*D)),this._+="A"+g+","+g+",0,0,"+ +(D*I>A*q)+","+(this._x1=r+se*w)+","+(this._y1=l+se*k)}else this._+="L"+(this._x1=r)+","+(this._y1=l)},arc:function(r,l,u,h,g,v){r=+r,l=+l,v=!!v;var x=(u=+u)*Math.cos(h),w=u*Math.sin(h),k=r+x,A=l+w,D=1^v,B=v?h-g:g-h;if(u<0)throw new Error("negative radius: "+u);null===this._x1?this._+="M"+k+","+A:(Math.abs(this._x1-k)>1e-6||Math.abs(this._y1-A)>1e-6)&&(this._+="L"+k+","+A),u&&(B<0&&(B=B%jo+jo),B>Lu?this._+="A"+u+","+u+",0,1,"+D+","+(r-x)+","+(l-w)+"A"+u+","+u+",0,1,"+D+","+(this._x1=k)+","+(this._y1=A):B>1e-6&&(this._+="A"+u+","+u+",0,"+ +(B>=Al)+","+D+","+(this._x1=r+u*Math.cos(g))+","+(this._y1=l+u*Math.sin(g))))},rect:function(r,l,u,h){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+l)+"h"+ +u+"v"+ +h+"h"+-u+"Z"},toString:function(){return this._}},El.prototype=ds.prototype={constructor:El,has:function(r){return"$"+r in this},get:function(r){return this["$"+r]},set:function(r,l){return this["$"+r]=l,this},remove:function(r){var l="$"+r;return l in this&&delete this[l]},clear:function(){for(var r in this)"$"===r[0]&&delete this[r]},keys:function(){var r=[];for(var l in this)"$"===l[0]&&r.push(l.slice(1));return r},values:function(){var r=[];for(var l in this)"$"===l[0]&&r.push(this[l]);return r},entries:function(){var r=[];for(var l in this)"$"===l[0]&&r.push({key:l.slice(1),value:this[l]});return r},size:function(){var r=0;for(var l in this)"$"===l[0]&&++r;return r},empty:function(){for(var r in this)if("$"===r[0])return!1;return!0},each:function(r){for(var l in this)"$"===l[0]&&r(this[l],l.slice(1),this)}};var Wn=ds.prototype;function lc(r,l){var u=new Ha;if(r instanceof Ha)r.each(function(v){u.add(v)});else if(r){var h=-1,g=r.length;if(null==l)for(;++h<g;)u.add(r[h]);else for(;++h<g;)u.add(l(r[h],h,r))}return u}Ha.prototype=lc.prototype={constructor:Ha,has:Wn.has,add:function(r){return this["$"+(r+="")]=r,this},remove:Wn.remove,clear:Wn.clear,values:Wn.keys,size:Wn.size,empty:Wn.empty,each:Wn.each};var Cd=Array.prototype.slice;function cc(r,l){return r-l}function Zs(r){return function(){return r}}function kd(r,l){for(var u,h=-1,g=l.length;++h<g;)if(u=Ru(r,l[h]))return u;return 0}function Ru(r,l){for(var u=l[0],h=l[1],g=-1,v=0,x=r.length,w=x-1;v<x;w=v++){var k=r[v],A=k[0],D=k[1],B=r[w],I=B[0],q=B[1];if(Ou(k,B,l))return 0;D>h!=q>h&&u<(I-A)*(h-D)/(q-D)+A&&(g=-g)}return g}function Ou(r,l,u){var h,g,v,x,w,k,A;return((k=l)[0]-(w=r)[0])*((A=u)[1]-w[1])==(A[0]-w[0])*(k[1]-w[1])&&(g=r[h=+(r[0]===l[0])],x=l[h],g<=(v=u[h])&&v<=x||x<=v&&v<=g)}function e(){}var t=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function n(){var r=1,l=1,u=Ui,h=w;function g(k){var A=u(k);if(Array.isArray(A))A=A.slice().sort(cc);else{var D=Is(k),B=D[0],I=D[1];A=Ta(B,I,A),A=it(Math.floor(B/A)*A,Math.floor(I/A)*A,A)}return A.map(function(q){return v(k,q)})}function v(k,A){var D=[],B=[];return function(I,q,j){var K,X,ne,te,se,fe=new Array,ve=new Array;for(K=X=-1,t[(ne=I[0]>=q)<<1].forEach(Ae);++K<r-1;)t[ne|(ne=I[K+1]>=q)<<1].forEach(Ae);for(t[ne<<0].forEach(Ae);++X<l-1;){for(K=-1,t[(ne=I[X*r+r]>=q)<<1|(te=I[X*r]>=q)<<2].forEach(Ae);++K<r-1;)se=te,t[ne|(ne=I[X*r+r+K+1]>=q)<<1|(te=I[X*r+K+1]>=q)<<2|se<<3].forEach(Ae);t[ne|te<<3].forEach(Ae)}for(K=-1,t[(te=I[X*r]>=q)<<2].forEach(Ae);++K<r-1;)se=te,t[(te=I[X*r+K+1]>=q)<<2|se<<3].forEach(Ae);function Ae(qe){var me,Me,Se=[qe[0][0]+K,qe[0][1]+X],ie=[qe[1][0]+K,qe[1][1]+X],Ce=x(Se),we=x(ie);(me=ve[Ce])?(Me=fe[we])?(delete ve[me.end],delete fe[Me.start],me===Me?(me.ring.push(ie),j(me.ring)):fe[me.start]=ve[Me.end]={start:me.start,end:Me.end,ring:me.ring.concat(Me.ring)}):(delete ve[me.end],me.ring.push(ie),ve[me.end=we]=me):(me=fe[we])?(Me=ve[Ce])?(delete fe[me.start],delete ve[Me.end],me===Me?(me.ring.push(ie),j(me.ring)):fe[Me.start]=ve[me.end]={start:Me.start,end:me.end,ring:Me.ring.concat(me.ring)}):(delete fe[me.start],me.ring.unshift(Se),fe[me.start=Ce]=me):fe[Ce]=ve[we]={start:Ce,end:we,ring:[Se,ie]}}t[te<<3].forEach(Ae)}(k,A,function(I){h(I,k,A),function(q){for(var j=0,K=q.length,X=q[K-1][1]*q[0][0]-q[K-1][0]*q[0][1];++j<K;)X+=q[j-1][1]*q[j][0]-q[j-1][0]*q[j][1];return X}(I)>0?D.push([I]):B.push(I)}),B.forEach(function(I){for(var q,j=0,K=D.length;j<K;++j)if(-1!==kd((q=D[j])[0],I))return void q.push(I)}),{type:"MultiPolygon",value:A,coordinates:D}}function x(k){return 2*k[0]+k[1]*(r+1)*4}function w(k,A,D){k.forEach(function(B){var I,q=B[0],j=B[1],K=0|q,X=0|j,Y=A[X*r+K];q>0&&q<r&&K===q&&(B[0]=q+(D-(I=A[X*r+K-1]))/(Y-I)-.5),j>0&&j<l&&X===j&&(B[1]=j+(D-(I=A[(X-1)*r+K]))/(Y-I)-.5)})}return g.contour=v,g.size=function(k){if(!arguments.length)return[r,l];var A=Math.ceil(k[0]),D=Math.ceil(k[1]);if(!(A>0&&D>0))throw new Error("invalid size");return r=A,l=D,g},g.thresholds=function(k){return arguments.length?(u="function"==typeof k?k:Array.isArray(k)?Zs(Cd.call(k)):Zs(k),g):u},g.smooth=function(k){return arguments.length?(h=k?w:e,g):h===w},g}function i(r,l,u){for(var h=r.width,g=r.height,v=1+(u<<1),x=0;x<g;++x)for(var w=0,k=0;w<h+u;++w)w<h&&(k+=r.data[w+x*h]),w>=u&&(w>=v&&(k-=r.data[w-v+x*h]),l.data[w-u+x*h]=k/Math.min(w+1,h-1+v-w,v))}function a(r,l,u){for(var h=r.width,g=r.height,v=1+(u<<1),x=0;x<h;++x)for(var w=0,k=0;w<g+u;++w)w<g&&(k+=r.data[x+w*h]),w>=u&&(w>=v&&(k-=r.data[x+(w-v)*h]),l.data[x+(w-u)*h]=k/Math.min(w+1,g-1+v-w,v))}function s(r){return r[0]}function o(r){return r[1]}function c(){return 1}var d={},p={};function C(r){return new Function("d","return {"+r.map(function(l,u){return JSON.stringify(l)+": d["+u+'] || ""'}).join(",")+"}")}function T(r){var l=Object.create(null),u=[];return r.forEach(function(h){for(var g in h)g in l||u.push(l[g]=g)}),u}function S(r,l){var u=r+"",h=u.length;return h<l?new Array(l-h+1).join(0)+u:u}function L(r){var l=new RegExp('["'+r+"\n\r]"),u=r.charCodeAt(0);function h(w,k){var A,D=[],B=w.length,I=0,q=0,j=B<=0,K=!1;function X(){if(j)return p;if(K)return K=!1,d;var ne,te,se=I;if(34===w.charCodeAt(se)){for(;I++<B&&34!==w.charCodeAt(I)||34===w.charCodeAt(++I););return(ne=I)>=B?j=!0:10===(te=w.charCodeAt(I++))?K=!0:13===te&&(K=!0,10===w.charCodeAt(I)&&++I),w.slice(se+1,ne-1).replace(/""/g,'"')}for(;I<B;){if(10===(te=w.charCodeAt(ne=I++)))K=!0;else if(13===te)K=!0,10===w.charCodeAt(I)&&++I;else if(te!==u)continue;return w.slice(se,ne)}return j=!0,w.slice(se,B)}for(10===w.charCodeAt(B-1)&&--B,13===w.charCodeAt(B-1)&&--B;(A=X())!==p;){for(var Y=[];A!==d&&A!==p;)Y.push(A),A=X();k&&null==(Y=k(Y,q++))||D.push(Y)}return D}function g(w,k){return w.map(function(A){return k.map(function(D){return x(A[D])}).join(r)})}function v(w){return w.map(x).join(r)}function x(w){return null==w?"":w instanceof Date?function M(r){var v,l=r.getUTCHours(),u=r.getUTCMinutes(),h=r.getUTCSeconds(),g=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":((v=r.getUTCFullYear())<0?"-"+S(-v,6):v>9999?"+"+S(v,6):S(v,4))+"-"+S(r.getUTCMonth()+1,2)+"-"+S(r.getUTCDate(),2)+(g?"T"+S(l,2)+":"+S(u,2)+":"+S(h,2)+"."+S(g,3)+"Z":h?"T"+S(l,2)+":"+S(u,2)+":"+S(h,2)+"Z":u||l?"T"+S(l,2)+":"+S(u,2)+"Z":"")}(w):l.test(w+="")?'"'+w.replace(/"/g,'""')+'"':w}return{parse:function(w,k){var A,D,B=h(w,function(I,q){if(A)return A(I,q-1);var j,K,X;D=I,A=k?(K=k,X=C(j=I),function(Y,ne){return K(X(Y),ne,j)}):C(I)});return B.columns=D||[],B},parseRows:h,format:function(w,k){return null==k&&(k=T(w)),[k.map(x).join(r)].concat(g(w,k)).join("\n")},formatBody:function(w,k){return null==k&&(k=T(w)),g(w,k).join("\n")},formatRows:function(w){return w.map(v).join("\n")},formatRow:v,formatValue:x}}var z=L(","),V=z.parse,N=z.parseRows,U=z.format,G=z.formatBody,Z=z.formatRows,oe=z.formatRow,le=z.formatValue,re=L("\t"),J=re.parse,ce=re.parseRows,ke=re.format,_e=re.formatBody,Oe=re.formatRows,Qe=re.formatRow,nt=re.formatValue,ot=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ze(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.blob()}function ft(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.arrayBuffer()}function Wt(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function xt(r,l){return fetch(r,l).then(Wt)}function jt(r){return function(l,u,h){return 2===arguments.length&&"function"==typeof u&&(h=u,u=void 0),xt(l,u).then(function(g){return r(g,h)})}}var Ut=jt(V),en=jt(J);function gn(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.json()}function Pn(r){return function(l,u){return xt(l,u).then(function(h){return(new DOMParser).parseFromString(h,r)})}}var Dt=Pn("application/xml"),Be=Pn("text/html"),Tt=Pn("image/svg+xml");function ze(r){return function(){return r}}function Et(){return 1e-6*(Math.random()-.5)}function vn(r,l,u,h){if(isNaN(l)||isNaN(u))return r;var g,v,x,w,k,A,D,B,I,q=r._root,j={data:h},K=r._x0,X=r._y0,Y=r._x1,ne=r._y1;if(!q)return r._root=j,r;for(;q.length;)if((A=l>=(v=(K+Y)/2))?K=v:Y=v,(D=u>=(x=(X+ne)/2))?X=x:ne=x,g=q,!(q=q[B=D<<1|A]))return g[B]=j,r;if(w=+r._x.call(null,q.data),k=+r._y.call(null,q.data),l===w&&u===k)return j.next=q,g?g[B]=j:r._root=j,r;do{g=g?g[B]=new Array(4):r._root=new Array(4),(A=l>=(v=(K+Y)/2))?K=v:Y=v,(D=u>=(x=(X+ne)/2))?X=x:ne=x}while((B=D<<1|A)==(I=(k>=x)<<1|w>=v));return g[I]=q,g[B]=j,r}function Lt(r,l,u,h,g){this.node=r,this.x0=l,this.y0=u,this.x1=h,this.y1=g}function Nn(r){return r[0]}function Gt(r){return r[1]}function Fn(r,l,u){var h=new ni(l??Nn,u??Gt,NaN,NaN,NaN,NaN);return null==r?h:h.addAll(r)}function ni(r,l,u,h,g,v){this._x=r,this._y=l,this._x0=u,this._y0=h,this._x1=g,this._y1=v,this._root=void 0}function $n(r){for(var l={data:r.data},u=l;r=r.next;)u=u.next={data:r.data};return l}var Hn=Fn.prototype=ni.prototype;function ki(r){return r.x+r.vx}function qa(r){return r.y+r.vy}function Yt(r){return r.index}function je(r,l){var u=r.get(l);if(!u)throw new Error("missing: "+l);return u}function Ke(r){return r.x}function tt(r){return r.y}Hn.copy=function(){var r,l,u=new ni(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root;if(!h)return u;if(!h.length)return u._root=$n(h),u;for(r=[{source:h,target:u._root=new Array(4)}];h=r.pop();)for(var g=0;g<4;++g)(l=h.source[g])&&(l.length?r.push({source:l,target:h.target[g]=new Array(4)}):h.target[g]=$n(l));return u},Hn.add=function(r){var l=+this._x.call(null,r),u=+this._y.call(null,r);return vn(this.cover(l,u),l,u,r)},Hn.addAll=function(r){var l,u,h,g,v=r.length,x=new Array(v),w=new Array(v),k=1/0,A=1/0,D=-1/0,B=-1/0;for(u=0;u<v;++u)isNaN(h=+this._x.call(null,l=r[u]))||isNaN(g=+this._y.call(null,l))||(x[u]=h,w[u]=g,h<k&&(k=h),h>D&&(D=h),g<A&&(A=g),g>B&&(B=g));if(k>D||A>B)return this;for(this.cover(k,A).cover(D,B),u=0;u<v;++u)vn(this,x[u],w[u],r[u]);return this},Hn.cover=function(r,l){if(isNaN(r=+r)||isNaN(l=+l))return this;var u=this._x0,h=this._y0,g=this._x1,v=this._y1;if(isNaN(u))g=(u=Math.floor(r))+1,v=(h=Math.floor(l))+1;else{for(var x,w,k=g-u,A=this._root;u>r||r>=g||h>l||l>=v;)switch(w=(l<h)<<1|r<u,(x=new Array(4))[w]=A,A=x,k*=2,w){case 0:g=u+k,v=h+k;break;case 1:u=g-k,v=h+k;break;case 2:g=u+k,h=v-k;break;case 3:u=g-k,h=v-k}this._root&&this._root.length&&(this._root=A)}return this._x0=u,this._y0=h,this._x1=g,this._y1=v,this},Hn.data=function(){var r=[];return this.visit(function(l){if(!l.length)do{r.push(l.data)}while(l=l.next)}),r},Hn.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Hn.find=function(r,l,u){var h,g,v,x,w,k,A,D=this._x0,B=this._y0,I=this._x1,q=this._y1,j=[],K=this._root;for(K&&j.push(new Lt(K,D,B,I,q)),null==u?u=1/0:(D=r-u,B=l-u,I=r+u,q=l+u,u*=u);k=j.pop();)if(!(!(K=k.node)||(g=k.x0)>I||(v=k.y0)>q||(x=k.x1)<D||(w=k.y1)<B))if(K.length){var X=(g+x)/2,Y=(v+w)/2;j.push(new Lt(K[3],X,Y,x,w),new Lt(K[2],g,Y,X,w),new Lt(K[1],X,v,x,Y),new Lt(K[0],g,v,X,Y)),(A=(l>=Y)<<1|r>=X)&&(k=j[j.length-1],j[j.length-1]=j[j.length-1-A],j[j.length-1-A]=k)}else{var ne=r-+this._x.call(null,K.data),te=l-+this._y.call(null,K.data),se=ne*ne+te*te;if(se<u){var fe=Math.sqrt(u=se);D=r-fe,B=l-fe,I=r+fe,q=l+fe,h=K.data}}return h},Hn.remove=function(r){if(isNaN(v=+this._x.call(null,r))||isNaN(x=+this._y.call(null,r)))return this;var l,u,h,g,v,x,w,k,A,D,B,I,q=this._root,j=this._x0,K=this._y0,X=this._x1,Y=this._y1;if(!q)return this;if(q.length)for(;;){if((A=v>=(w=(j+X)/2))?j=w:X=w,(D=x>=(k=(K+Y)/2))?K=k:Y=k,l=q,!(q=q[B=D<<1|A]))return this;if(!q.length)break;(l[B+1&3]||l[B+2&3]||l[B+3&3])&&(u=l,I=B)}for(;q.data!==r;)if(h=q,!(q=q.next))return this;return(g=q.next)&&delete q.next,h?(g?h.next=g:delete h.next,this):l?(g?l[B]=g:delete l[B],(q=l[0]||l[1]||l[2]||l[3])&&q===(l[3]||l[2]||l[1]||l[0])&&!q.length&&(u?u[I]=q:this._root=q),this):(this._root=g,this)},Hn.removeAll=function(r){for(var l=0,u=r.length;l<u;++l)this.remove(r[l]);return this},Hn.root=function(){return this._root},Hn.size=function(){var r=0;return this.visit(function(l){if(!l.length)do{++r}while(l=l.next)}),r},Hn.visit=function(r){var l,u,h,g,v,x,w=[],k=this._root;for(k&&w.push(new Lt(k,this._x0,this._y0,this._x1,this._y1));l=w.pop();)if(!r(k=l.node,h=l.x0,g=l.y0,v=l.x1,x=l.y1)&&k.length){var A=(h+v)/2,D=(g+x)/2;(u=k[3])&&w.push(new Lt(u,A,D,v,x)),(u=k[2])&&w.push(new Lt(u,h,D,A,x)),(u=k[1])&&w.push(new Lt(u,A,g,v,D)),(u=k[0])&&w.push(new Lt(u,h,g,A,D))}return this},Hn.visitAfter=function(r){var l,u=[],h=[];for(this._root&&u.push(new Lt(this._root,this._x0,this._y0,this._x1,this._y1));l=u.pop();){var g=l.node;if(g.length){var v,x=l.x0,w=l.y0,k=l.x1,A=l.y1,D=(x+k)/2,B=(w+A)/2;(v=g[0])&&u.push(new Lt(v,x,w,D,B)),(v=g[1])&&u.push(new Lt(v,D,w,k,B)),(v=g[2])&&u.push(new Lt(v,x,B,D,A)),(v=g[3])&&u.push(new Lt(v,D,B,k,A))}h.push(l)}for(;l=h.pop();)r(l.node,l.x0,l.y0,l.x1,l.y1);return this},Hn.x=function(r){return arguments.length?(this._x=r,this):this._x},Hn.y=function(r){return arguments.length?(this._y=r,this):this._y};var bt=Math.PI*(3-Math.sqrt(5));function _t(r,l){if((u=(r=l?r.toExponential(l-1):r.toExponential()).indexOf("e"))<0)return null;var u,h=r.slice(0,u);return[h.length>1?h[0]+h.slice(2):h,+r.slice(u+1)]}function mn(r){return(r=_t(Math.abs(r)))?r[1]:NaN}var kn,Kt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(r){if(!(l=Kt.exec(r)))throw new Error("invalid format: "+r);var l;return new yt({fill:l[1],align:l[2],sign:l[3],symbol:l[4],zero:l[5],width:l[6],comma:l[7],precision:l[8]&&l[8].slice(1),trim:l[9],type:l[10]})}function yt(r){this.fill=void 0===r.fill?" ":r.fill+"",this.align=void 0===r.align?">":r.align+"",this.sign=void 0===r.sign?"-":r.sign+"",this.symbol=void 0===r.symbol?"":r.symbol+"",this.zero=!!r.zero,this.width=void 0===r.width?void 0:+r.width,this.comma=!!r.comma,this.precision=void 0===r.precision?void 0:+r.precision,this.trim=!!r.trim,this.type=void 0===r.type?"":r.type+""}function Pt(r,l){var u=_t(r,l);if(!u)return r+"";var h=u[0],g=u[1];return g<0?"0."+new Array(-g).join("0")+h:h.length>g+1?h.slice(0,g+1)+"."+h.slice(g+1):h+new Array(g-h.length+2).join("0")}ii.prototype=yt.prototype,yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var $t={"%":function(r,l){return(100*r).toFixed(l)},b:function(r){return Math.round(r).toString(2)},c:function(r){return r+""},d:function(r){return Math.round(r).toString(10)},e:function(r,l){return r.toExponential(l)},f:function(r,l){return r.toFixed(l)},g:function(r,l){return r.toPrecision(l)},o:function(r){return Math.round(r).toString(8)},p:function(r,l){return Pt(100*r,l)},r:Pt,s:function(r,l){var u=_t(r,l);if(!u)return r+"";var h=u[0],g=u[1],v=g-(kn=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,x=h.length;return v===x?h:v>x?h+new Array(v-x+1).join("0"):v>0?h.slice(0,v)+"."+h.slice(v):"0."+new Array(1-v).join("0")+_t(r,Math.max(0,l+v-1))[0]},X:function(r){return Math.round(r).toString(16).toUpperCase()},x:function(r){return Math.round(r).toString(16)}};function Rn(r){return r}var Dn,qn=Array.prototype.map,Ti=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function ba(r){var l,u,I,h=void 0===r.grouping||void 0===r.thousands?Rn:(l=qn.call(r.grouping,Number),u=r.thousands+"",function(I,q){for(var j=I.length,K=[],X=0,Y=l[0],ne=0;j>0&&Y>0&&(ne+Y+1>q&&(Y=Math.max(1,q-ne)),K.push(I.substring(j-=Y,j+Y)),!((ne+=Y+1)>q));)Y=l[X=(X+1)%l.length];return K.reverse().join(u)}),g=void 0===r.currency?"":r.currency[0]+"",v=void 0===r.currency?"":r.currency[1]+"",x=void 0===r.decimal?".":r.decimal+"",w=void 0===r.numerals?Rn:(I=qn.call(r.numerals,String),function(q){return q.replace(/[0-9]/g,function(j){return I[+j]})}),k=void 0===r.percent?"%":r.percent+"",A=void 0===r.minus?"-":r.minus+"",D=void 0===r.nan?"NaN":r.nan+"";function B(I){var q=(I=ii(I)).fill,j=I.align,K=I.sign,X=I.symbol,Y=I.zero,ne=I.width,te=I.comma,se=I.precision,fe=I.trim,ve=I.type;"n"===ve?(te=!0,ve="g"):$t[ve]||(void 0===se&&(se=12),fe=!0,ve="g"),(Y||"0"===q&&"="===j)&&(Y=!0,q="0",j="=");var Ae="$"===X?g:"#"===X&&/[boxX]/.test(ve)?"0"+ve.toLowerCase():"",qe="$"===X?v:/[%p]/.test(ve)?k:"",me=$t[ve],Me=/[defgprs%]/.test(ve);function Se(ie){var Ce,we,Ee,Fe=Ae,ct=qe;if("c"===ve)ct=me(ie)+ct,ie="";else{var It=(ie=+ie)<0||1/ie<0;if(ie=isNaN(ie)?D:me(Math.abs(ie),se),fe&&(ie=function(gt){e:for(var rn,dn=gt.length,Ct=1,Vt=-1;Ct<dn;++Ct)switch(gt[Ct]){case".":Vt=rn=Ct;break;case"0":0===Vt&&(Vt=Ct),rn=Ct;break;default:if(!+gt[Ct])break e;Vt>0&&(Vt=0)}return Vt>0?gt.slice(0,Vt)+gt.slice(rn+1):gt}(ie)),It&&0==+ie&&"+"!==K&&(It=!1),Fe=(It?"("===K?K:A:"-"===K||"("===K?"":K)+Fe,ct=("s"===ve?Ti[8+kn/3]:"")+ct+(It&&"("===K?")":""),Me)for(Ce=-1,we=ie.length;++Ce<we;)if(48>(Ee=ie.charCodeAt(Ce))||Ee>57){ct=(46===Ee?x+ie.slice(Ce+1):ie.slice(Ce))+ct,ie=ie.slice(0,Ce);break}}te&&!Y&&(ie=h(ie,1/0));var Ot=Fe.length+ie.length+ct.length,Qt=Ot<ne?new Array(ne-Ot+1).join(q):"";switch(te&&Y&&(ie=h(Qt+ie,Qt.length?ne-ct.length:1/0),Qt=""),j){case"<":ie=Fe+ie+ct+Qt;break;case"=":ie=Fe+Qt+ie+ct;break;case"^":ie=Qt.slice(0,Ot=Qt.length>>1)+Fe+ie+ct+Qt.slice(Ot);break;default:ie=Qt+Fe+ie+ct}return w(ie)}return se=void 0===se?6:/[gprs]/.test(ve)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se)),Se.toString=function(){return I+""},Se}return{format:B,formatPrefix:function(I,q){var j=B(((I=ii(I)).type="f",I)),K=3*Math.max(-8,Math.min(8,Math.floor(mn(q)/3))),X=Math.pow(10,-K),Y=Ti[8+K/3];return function(ne){return j(X*ne)+Y}}}}function Bi(r){return Dn=ba(r),R.format=Dn.format,R.formatPrefix=Dn.formatPrefix,Dn}function Ai(r){return Math.max(0,-mn(Math.abs(r)))}function ya(r,l){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mn(l)/3)))-mn(Math.abs(r)))}function la(r,l){return r=Math.abs(r),l=Math.abs(l)-r,Math.max(0,mn(l)-mn(r))+1}function Xn(){return new Cn}function Cn(){this.reset()}Bi({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Cn.prototype={constructor:Cn,reset:function(){this.s=this.t=0},add:function(r){be(In,r,this.t),be(this,In.s,this.s),this.s?this.t+=In.t:this.s=In.t},valueOf:function(){return this.s}};var In=new Cn;function be(r,l,u){var h=r.s=l+u,g=h-l;r.t=l-(h-g)+(u-g)}var Re=1e-6,At=1e-12,lt=Math.PI,Nt=lt/2,ca=lt/4,Tn=2*lt,zt=180/lt,kt=lt/180,Xt=Math.abs,Ye=Math.atan,Xe=Math.atan2,et=Math.cos,tn=Math.ceil,On=Math.exp,_i=Math.log,Zn=Math.pow,ht=Math.sin,wa=Math.sign||function(r){return r>0?1:r<0?-1:0},ai=Math.sqrt,uo=Math.tan;function ji(r){return r>1?0:r<-1?lt:Math.acos(r)}function cn(r){return r>1?Nt:r<-1?-Nt:Math.asin(r)}function bn(r){return(r=ht(r/2))*r}function Mn(){}function er(r,l){r&&wp.hasOwnProperty(r.type)&&wp[r.type](r,l)}var Dl={Feature:function(r,l){er(r.geometry,l)},FeatureCollection:function(r,l){for(var u=r.features,h=-1,g=u.length;++h<g;)er(u[h].geometry,l)}},wp={Sphere:function(r,l){l.sphere()},Point:function(r,l){l.point((r=r.coordinates)[0],r[1],r[2])},MultiPoint:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)l.point((r=u[h])[0],r[1],r[2])},LineString:function(r,l){Bu(r.coordinates,l,0)},MultiLineString:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)Bu(u[h],l,0)},Polygon:function(r,l){xp(r.coordinates,l)},MultiPolygon:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)xp(u[h],l)},GeometryCollection:function(r,l){for(var u=r.geometries,h=-1,g=u.length;++h<g;)er(u[h],l)}};function Bu(r,l,u){var h,g=-1,v=r.length-u;for(l.lineStart();++g<v;)l.point((h=r[g])[0],h[1],h[2]);l.lineEnd()}function xp(r,l){var u=-1,h=r.length;for(l.polygonStart();++u<h;)Bu(r[u],l,1);l.polygonEnd()}function Es(r,l){r&&Dl.hasOwnProperty(r.type)?Dl[r.type](r,l):er(r,l)}var Cp,kp,_u,zu,Fu,Td=Xn(),Ad=Xn(),tr={point:Mn,lineStart:Mn,lineEnd:Mn,polygonStart:function(){Td.reset(),tr.lineStart=Qm,tr.lineEnd=Jm},polygonEnd:function(){var r=+Td;Ad.add(r<0?Tn+r:r),this.lineStart=this.lineEnd=this.point=Mn},sphere:function(){Ad.add(Tn)}};function Qm(){tr.point=Zm}function Jm(){Tp(Cp,kp)}function Zm(r,l){tr.point=Tp,Cp=r,kp=l,_u=r*=kt,zu=et(l=(l*=kt)/2+ca),Fu=ht(l)}function Tp(r,l){var u=(r*=kt)-_u,h=u>=0?1:-1,g=h*u,v=et(l=(l*=kt)/2+ca),x=ht(l),w=Fu*x,k=zu*v+w*et(g),A=w*h*ht(g);Td.add(Xe(A,k)),_u=r,zu=v,Fu=x}function Sd(r){return[Xe(r[1],r[0]),cn(r[2])]}function Uo(r){var l=r[0],u=r[1],h=et(u);return[h*et(l),h*ht(l),ht(u)]}function Ed(r,l){return r[0]*l[0]+r[1]*l[1]+r[2]*l[2]}function Il(r,l){return[r[1]*l[2]-r[2]*l[1],r[2]*l[0]-r[0]*l[2],r[0]*l[1]-r[1]*l[0]]}function Hu(r,l){r[0]+=l[0],r[1]+=l[1],r[2]+=l[2]}function $d(r,l){return[r[0]*l,r[1]*l,r[2]*l]}function Dd(r){var l=ai(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=l,r[1]/=l,r[2]/=l}var si,Ma,di,Va,Go,Ap,Sp,Ml,ho,$r,Id,Md,Ld,Pd,Nd,Rd,Od,Bd,qu,Vu,ju,Ep,$p,xa,Ca,ka,dc=Xn(),Dr={point:Wu,lineStart:Ip,lineEnd:Mp,polygonStart:function(){Dr.point=Lp,Dr.lineStart=ev,Dr.lineEnd=tv,dc.reset(),tr.polygonStart()},polygonEnd:function(){tr.polygonEnd(),Dr.point=Wu,Dr.lineStart=Ip,Dr.lineEnd=Mp,Td<0?(si=-(di=180),Ma=-(Va=90)):dc>Re?Va=90:dc<-Re&&(Ma=-90),$r[0]=si,$r[1]=di},sphere:function(){si=-(di=180),Ma=-(Va=90)}};function Wu(r,l){ho.push($r=[si=r,di=r]),l<Ma&&(Ma=l),l>Va&&(Va=l)}function Dp(r,l){var u=Uo([r*kt,l*kt]);if(Ml){var h=Il(Ml,u),g=Il([h[1],-h[0],0],h);Dd(g),g=Sd(g);var v,x=r-Go,w=x>0?1:-1,k=g[0]*zt*w,A=Xt(x)>180;A^(w*Go<k&&k<w*r)?(v=g[1]*zt)>Va&&(Va=v):A^(w*Go<(k=(k+360)%360-180)&&k<w*r)?(v=-g[1]*zt)<Ma&&(Ma=v):(l<Ma&&(Ma=l),l>Va&&(Va=l)),A?r<Go?ja(si,r)>ja(si,di)&&(di=r):ja(r,di)>ja(si,di)&&(si=r):di>=si?(r<si&&(si=r),r>di&&(di=r)):r>Go?ja(si,r)>ja(si,di)&&(di=r):ja(r,di)>ja(si,di)&&(si=r)}else ho.push($r=[si=r,di=r]);l<Ma&&(Ma=l),l>Va&&(Va=l),Ml=u,Go=r}function Ip(){Dr.point=Dp}function Mp(){$r[0]=si,$r[1]=di,Dr.point=Wu,Ml=null}function Lp(r,l){if(Ml){var u=r-Go;dc.add(Xt(u)>180?u+(u>0?360:-360):u)}else Ap=r,Sp=l;tr.point(r,l),Dp(r,l)}function ev(){tr.lineStart()}function tv(){Lp(Ap,Sp),tr.lineEnd(),Xt(dc)>Re&&(si=-(di=180)),$r[0]=si,$r[1]=di,Ml=null}function ja(r,l){return(l-=r)<0?l+360:l}function nv(r,l){return r[0]-l[0]}function Pp(r,l){return r[0]<=r[1]?r[0]<=l&&l<=r[1]:l<r[0]||r[1]<l}var $s={sphere:Mn,point:Uu,lineStart:Np,lineEnd:Rp,polygonStart:function(){$s.lineStart=sv,$s.lineEnd=rv},polygonEnd:function(){$s.lineStart=Np,$s.lineEnd=Rp}};function Uu(r,l){r*=kt;var u=et(l*=kt);uc(u*et(r),u*ht(r),ht(l))}function uc(r,l,u){Ld+=(r-Ld)/++Id,Pd+=(l-Pd)/Id,Nd+=(u-Nd)/Id}function Np(){$s.point=iv}function iv(r,l){r*=kt;var u=et(l*=kt);xa=u*et(r),Ca=u*ht(r),ka=ht(l),$s.point=av,uc(xa,Ca,ka)}function av(r,l){r*=kt;var u=et(l*=kt),h=u*et(r),g=u*ht(r),v=ht(l),x=Xe(ai((x=Ca*v-ka*g)*x+(x=ka*h-xa*v)*x+(x=xa*g-Ca*h)*x),xa*h+Ca*g+ka*v);Md+=x,Rd+=x*(xa+(xa=h)),Od+=x*(Ca+(Ca=g)),Bd+=x*(ka+(ka=v)),uc(xa,Ca,ka)}function Rp(){$s.point=Uu}function sv(){$s.point=ov}function rv(){Op(Ep,$p),$s.point=Uu}function ov(r,l){Ep=r,$p=l,r*=kt,l*=kt,$s.point=Op;var u=et(l);xa=u*et(r),Ca=u*ht(r),ka=ht(l),uc(xa,Ca,ka)}function Op(r,l){r*=kt;var u=et(l*=kt),h=u*et(r),g=u*ht(r),v=ht(l),x=Ca*v-ka*g,w=ka*h-xa*v,k=xa*g-Ca*h,A=ai(x*x+w*w+k*k),D=cn(A),B=A&&-D/A;qu+=B*x,Vu+=B*w,ju+=B*k,Md+=D,Rd+=D*(xa+(xa=h)),Od+=D*(Ca+(Ca=g)),Bd+=D*(ka+(ka=v)),uc(xa,Ca,ka)}function Ll(r){return function(){return r}}function Gu(r,l){function u(h,g){return h=r(h,g),l(h[0],h[1])}return r.invert&&l.invert&&(u.invert=function(h,g){return(h=l.invert(h,g))&&r.invert(h[0],h[1])}),u}function Yu(r,l){return[Xt(r)>lt?r+Math.round(-r/Tn)*Tn:r,l]}function Ku(r,l,u){return(r%=Tn)?l||u?Gu(_p(r),zp(l,u)):_p(r):l||u?zp(l,u):Yu}function Bp(r){return function(l,u){return[(l+=r)>lt?l-Tn:l<-lt?l+Tn:l,u]}}function _p(r){var l=Bp(r);return l.invert=Bp(-r),l}function zp(r,l){var u=et(r),h=ht(r),g=et(l),v=ht(l);function x(w,k){var A=et(k),D=et(w)*A,B=ht(w)*A,I=ht(k),q=I*u+D*h;return[Xe(B*g-q*v,D*u-I*h),cn(q*g+B*v)]}return x.invert=function(w,k){var A=et(k),D=et(w)*A,B=ht(w)*A,I=ht(k),q=I*g-B*v;return[Xe(B*g+I*v,D*u+q*h),cn(q*u-D*h)]},x}function Fp(r){function l(u){return(u=r(u[0]*kt,u[1]*kt))[0]*=zt,u[1]*=zt,u}return r=Ku(r[0]*kt,r[1]*kt,r.length>2?r[2]*kt:0),l.invert=function(u){return(u=r.invert(u[0]*kt,u[1]*kt))[0]*=zt,u[1]*=zt,u},l}function Hp(r,l,u,h,g,v){if(u){var x=et(l),w=ht(l),k=h*u;null==g?(g=l+h*Tn,v=l-k/2):(g=qp(x,g),v=qp(x,v),(h>0?g<v:g>v)&&(g+=h*Tn));for(var A,D=g;h>0?D>v:D<v;D-=k)A=Sd([x,-w*et(D),-w*ht(D)]),r.point(A[0],A[1])}}function qp(r,l){(l=Uo(l))[0]-=r,Dd(l);var u=ji(-l[1]);return((-l[2]<0?-u:u)+Tn-Re)%Tn}function Vp(){var r,l=[];return{point:function(u,h){r.push([u,h])},lineStart:function(){l.push(r=[])},lineEnd:Mn,rejoin:function(){l.length>1&&l.push(l.pop().concat(l.shift()))},result:function(){var u=l;return l=[],r=null,u}}}function _d(r,l){return Xt(r[0]-l[0])<Re&&Xt(r[1]-l[1])<Re}function zd(r,l,u,h){this.x=r,this.z=l,this.o=u,this.e=h,this.v=!1,this.n=this.p=null}function jp(r,l,u,h,g){var v,x,w=[],k=[];if(r.forEach(function(j){if(!((K=j.length-1)<=0)){var K,X,Y=j[0],ne=j[K];if(_d(Y,ne)){for(g.lineStart(),v=0;v<K;++v)g.point((Y=j[v])[0],Y[1]);g.lineEnd()}else w.push(X=new zd(Y,j,null,!0)),k.push(X.o=new zd(Y,null,X,!1)),w.push(X=new zd(ne,j,null,!1)),k.push(X.o=new zd(ne,null,X,!0))}}),w.length){for(k.sort(l),Wp(w),Wp(k),v=0,x=k.length;v<x;++v)k[v].e=u=!u;for(var A,D,B=w[0];;){for(var I=B,q=!0;I.v;)if((I=I.n)===B)return;A=I.z,g.lineStart();do{if(I.v=I.o.v=!0,I.e){if(q)for(v=0,x=A.length;v<x;++v)g.point((D=A[v])[0],D[1]);else h(I.x,I.n.x,1,g);I=I.n}else{if(q)for(v=(A=I.p.z).length-1;v>=0;--v)g.point((D=A[v])[0],D[1]);else h(I.x,I.p.x,-1,g);I=I.p}A=(I=I.o).z,q=!q}while(!I.v);g.lineEnd()}}}function Wp(r){if(l=r.length){for(var l,u,h=0,g=r[0];++h<l;)g.n=u=r[h],u.p=g,g=u;g.n=u=r[0],u.p=g}}Yu.invert=Yu;var Xu=Xn();function Qu(r){return Xt(r[0])<=lt?r[0]:wa(r[0])*((Xt(r[0])+lt)%Tn-lt)}function Up(r,l){var u=Qu(l),h=l[1],g=ht(h),v=[ht(u),-et(u),0],x=0,w=0;Xu.reset(),1===g?h=Nt+Re:-1===g&&(h=-Nt-Re);for(var k=0,A=r.length;k<A;++k)if(B=(D=r[k]).length)for(var D,B,I=D[B-1],q=Qu(I),j=I[1]/2+ca,K=ht(j),X=et(j),Y=0;Y<B;++Y,q=te,K=fe,X=ve,I=ne){var ne=D[Y],te=Qu(ne),se=ne[1]/2+ca,fe=ht(se),ve=et(se),Ae=te-q,qe=Ae>=0?1:-1,me=qe*Ae,Me=me>lt,Se=K*fe;if(Xu.add(Xe(Se*qe*ht(me),X*ve+Se*et(me))),x+=Me?Ae+qe*Tn:Ae,Me^q>=u^te>=u){var ie=Il(Uo(I),Uo(ne));Dd(ie);var Ce=Il(v,ie);Dd(Ce);var we=(Me^Ae>=0?-1:1)*cn(Ce[2]);(h>we||h===we&&(ie[0]||ie[1]))&&(w+=Me^Ae>=0?1:-1)}}return(x<-Re||x<Re&&Xu<-Re)^1&w}function Gp(r,l,u,h){return function(g){var v,x,w,k=l(g),A=Vp(),D=l(A),B=!1,I={point:q,lineStart:K,lineEnd:X,polygonStart:function(){I.point=Y,I.lineStart=ne,I.lineEnd=te,x=[],v=[]},polygonEnd:function(){I.point=q,I.lineStart=K,I.lineEnd=X,x=lr(x);var se=Up(v,h);x.length?(B||(g.polygonStart(),B=!0),jp(x,cv,se,u,g)):se&&(B||(g.polygonStart(),B=!0),g.lineStart(),u(null,null,1,g),g.lineEnd()),B&&(g.polygonEnd(),B=!1),x=v=null},sphere:function(){g.polygonStart(),g.lineStart(),u(null,null,1,g),g.lineEnd(),g.polygonEnd()}};function q(se,fe){r(se,fe)&&g.point(se,fe)}function j(se,fe){k.point(se,fe)}function K(){I.point=j,k.lineStart()}function X(){I.point=q,k.lineEnd()}function Y(se,fe){w.push([se,fe]),D.point(se,fe)}function ne(){D.lineStart(),w=[]}function te(){Y(w[0][0],w[0][1]),D.lineEnd();var se,fe,ve,Ae,qe=D.clean(),me=A.result(),Me=me.length;if(w.pop(),v.push(w),w=null,Me)if(1&qe){if((fe=(ve=me[0]).length-1)>0){for(B||(g.polygonStart(),B=!0),g.lineStart(),se=0;se<fe;++se)g.point((Ae=ve[se])[0],Ae[1]);g.lineEnd()}}else Me>1&&2&qe&&me.push(me.pop().concat(me.shift())),x.push(me.filter(lv))}return I}}function lv(r){return r.length>1}function cv(r,l){return((r=r.x)[0]<0?r[1]-Nt-Re:Nt-r[1])-((l=l.x)[0]<0?l[1]-Nt-Re:Nt-l[1])}var Ju=Gp(function(){return!0},function(r){var l,u=NaN,h=NaN,g=NaN;return{lineStart:function(){r.lineStart(),l=1},point:function(v,x){var A,D,B,I,q,j,K,w=v>0?lt:-lt,k=Xt(v-u);Xt(k-lt)<Re?(r.point(u,h=(h+x)/2>0?Nt:-Nt),r.point(g,h),r.lineEnd(),r.lineStart(),r.point(w,h),r.point(v,h),l=0):g!==w&&k>=lt&&(Xt(u-g)<Re&&(u-=g*Re),Xt(v-w)<Re&&(v-=w*Re),D=h,I=x,K=ht((A=u)-(B=v)),h=Xt(K)>Re?Ye((ht(D)*(j=et(I))*ht(B)-ht(I)*(q=et(D))*ht(A))/(q*j*K)):(D+I)/2,r.point(g,h),r.lineEnd(),r.lineStart(),r.point(w,h),l=0),r.point(u=v,h=x),g=w},lineEnd:function(){r.lineEnd(),u=h=NaN},clean:function(){return 2-l}}},function(r,l,u,h){var g;if(null==r)h.point(-lt,g=u*Nt),h.point(0,g),h.point(lt,g),h.point(lt,0),h.point(lt,-g),h.point(0,-g),h.point(-lt,-g),h.point(-lt,0),h.point(-lt,g);else if(Xt(r[0]-l[0])>Re){var v=r[0]<l[0]?lt:-lt;h.point(-v,g=u*v/2),h.point(0,g),h.point(v,g)}else h.point(l[0],l[1])},[-lt,-Nt]);function Yp(r){var l=et(r),u=6*kt,h=l>0,g=Xt(l)>Re;function v(k,A){return et(k)*et(A)>l}function x(k,A,D){var B=[1,0,0],I=Il(Uo(k),Uo(A)),q=Ed(I,I),j=I[0],K=q-j*j;if(!K)return!D&&k;var X=l*q/K,Y=-l*j/K,ne=Il(B,I),te=$d(B,X);Hu(te,$d(I,Y));var se=ne,fe=Ed(te,se),ve=Ed(se,se),Ae=fe*fe-ve*(Ed(te,te)-1);if(!(Ae<0)){var qe=ai(Ae),me=$d(se,(-fe-qe)/ve);if(Hu(me,te),me=Sd(me),!D)return me;var Me,Se=k[0],ie=A[0],Ce=k[1],we=A[1];ie<Se&&(Me=Se,Se=ie,ie=Me);var Ee=ie-Se,Fe=Xt(Ee-lt)<Re;if(!Fe&&we<Ce&&(Me=Ce,Ce=we,we=Me),Fe||Ee<Re?Fe?Ce+we>0^me[1]<(Xt(me[0]-Se)<Re?Ce:we):Ce<=me[1]&&me[1]<=we:Ee>lt^(Se<=me[0]&&me[0]<=ie)){var ct=$d(se,(-fe+qe)/ve);return Hu(ct,te),[me,Sd(ct)]}}}function w(k,A){var D=h?r:lt-r,B=0;return k<-D?B|=1:k>D&&(B|=2),A<-D?B|=4:A>D&&(B|=8),B}return Gp(v,function(k){var A,D,B,I,q;return{lineStart:function(){I=B=!1,q=1},point:function(j,K){var X,Y=[j,K],ne=v(j,K),te=h?ne?0:w(j,K):ne?w(j+(j<0?lt:-lt),K):0;if(!A&&(I=B=ne)&&k.lineStart(),ne!==B&&(!(X=x(A,Y))||_d(A,X)||_d(Y,X))&&(Y[0]+=Re,Y[1]+=Re,ne=v(Y[0],Y[1])),ne!==B)q=0,ne?(k.lineStart(),X=x(Y,A),k.point(X[0],X[1])):(X=x(A,Y),k.point(X[0],X[1]),k.lineEnd()),A=X;else if(g&&A&&h^ne){var se;te&D||!(se=x(Y,A,!0))||(q=0,h?(k.lineStart(),k.point(se[0][0],se[0][1]),k.point(se[1][0],se[1][1]),k.lineEnd()):(k.point(se[1][0],se[1][1]),k.lineEnd(),k.lineStart(),k.point(se[0][0],se[0][1])))}!ne||A&&_d(A,Y)||k.point(Y[0],Y[1]),A=Y,B=ne,D=te},lineEnd:function(){B&&k.lineEnd(),A=null},clean:function(){return q|(I&&B)<<1}}},function(k,A,D,B){Hp(B,r,u,D,k,A)},h?[0,-r]:[-lt,r-lt])}var hc=1e9,Fd=-hc;function Hd(r,l,u,h){function g(A,D){return r<=A&&A<=u&&l<=D&&D<=h}function v(A,D,B,I){var q=0,j=0;if(null==A||(q=x(A,B))!==(j=x(D,B))||k(A,D)<0^B>0)do{I.point(0===q||3===q?r:u,q>1?h:l)}while((q=(q+B+4)%4)!==j);else I.point(D[0],D[1])}function x(A,D){return Xt(A[0]-r)<Re?D>0?0:3:Xt(A[0]-u)<Re?D>0?2:1:Xt(A[1]-l)<Re?D>0?1:0:D>0?3:2}function w(A,D){return k(A.x,D.x)}function k(A,D){var B=x(A,1),I=x(D,1);return B!==I?B-I:0===B?D[1]-A[1]:1===B?A[0]-D[0]:2===B?A[1]-D[1]:D[0]-A[0]}return function(A){var D,B,I,q,j,K,X,Y,ne,te,se,fe=A,ve=Vp(),Ae={point:qe,lineStart:function(){Ae.point=me,B&&B.push(I=[]),te=!0,ne=!1,X=Y=NaN},lineEnd:function(){D&&(me(q,j),K&&ne&&ve.rejoin(),D.push(ve.result())),Ae.point=qe,ne&&fe.lineEnd()},polygonStart:function(){fe=ve,D=[],B=[],se=!0},polygonEnd:function(){var Me=function(){for(var Ce=0,we=0,Ee=B.length;we<Ee;++we)for(var Fe,ct,It=B[we],Ot=1,Qt=It.length,gt=It[0],rn=gt[0],dn=gt[1];Ot<Qt;++Ot)Fe=rn,ct=dn,rn=(gt=It[Ot])[0],dn=gt[1],ct<=h?dn>h&&(rn-Fe)*(h-ct)>(dn-ct)*(r-Fe)&&++Ce:dn<=h&&(rn-Fe)*(h-ct)<(dn-ct)*(r-Fe)&&--Ce;return Ce}(),Se=se&&Me,ie=(D=lr(D)).length;(Se||ie)&&(A.polygonStart(),Se&&(A.lineStart(),v(null,null,1,A),A.lineEnd()),ie&&jp(D,w,Me,v,A),A.polygonEnd()),fe=A,D=B=I=null}};function qe(Me,Se){g(Me,Se)&&fe.point(Me,Se)}function me(Me,Se){var ie=g(Me,Se);if(B&&I.push([Me,Se]),te)q=Me,j=Se,K=ie,te=!1,ie&&(fe.lineStart(),fe.point(Me,Se));else if(ie&&ne)fe.point(Me,Se);else{var Ce=[X=Math.max(Fd,Math.min(hc,X)),Y=Math.max(Fd,Math.min(hc,Y))],we=[Me=Math.max(Fd,Math.min(hc,Me)),Se=Math.max(Fd,Math.min(hc,Se))];!function(Ee,Fe,ct,It,Ot,Qt){var gt,rn=Ee[0],dn=Ee[1],Ct=0,Vt=1,ri=Fe[0]-rn,ea=Fe[1]-dn;if(gt=ct-rn,ri||!(gt>0)){if(gt/=ri,ri<0){if(gt<Ct)return;gt<Vt&&(Vt=gt)}else if(ri>0){if(gt>Vt)return;gt>Ct&&(Ct=gt)}if(gt=Ot-rn,ri||!(gt<0)){if(gt/=ri,ri<0){if(gt>Vt)return;gt>Ct&&(Ct=gt)}else if(ri>0){if(gt<Ct)return;gt<Vt&&(Vt=gt)}if(gt=It-dn,ea||!(gt>0)){if(gt/=ea,ea<0){if(gt<Ct)return;gt<Vt&&(Vt=gt)}else if(ea>0){if(gt>Vt)return;gt>Ct&&(Ct=gt)}if(gt=Qt-dn,ea||!(gt<0)){if(gt/=ea,ea<0){if(gt>Vt)return;gt>Ct&&(Ct=gt)}else if(ea>0){if(gt<Ct)return;gt<Vt&&(Vt=gt)}return Ct>0&&(Ee[0]=rn+Ct*ri,Ee[1]=dn+Ct*ea),Vt<1&&(Fe[0]=rn+Vt*ri,Fe[1]=dn+Vt*ea),!0}}}}}(Ce,we,r,l,u,h)?ie&&(fe.lineStart(),fe.point(Me,Se),se=!1):(ne||(fe.lineStart(),fe.point(Ce[0],Ce[1])),fe.point(we[0],we[1]),ie||fe.lineEnd(),se=!1)}X=Me,Y=Se,ne=ie}return Ae}}var Zu,qd,Vd,eh=Xn(),Pl={sphere:Mn,point:Mn,lineStart:function(){Pl.point=uv,Pl.lineEnd=dv},lineEnd:Mn,polygonStart:Mn,polygonEnd:Mn};function dv(){Pl.point=Pl.lineEnd=Mn}function uv(r,l){Zu=r*=kt,qd=ht(l*=kt),Vd=et(l),Pl.point=hv}function hv(r,l){r*=kt;var u=ht(l*=kt),h=et(l),g=Xt(r-Zu),v=et(g),x=h*ht(g),w=Vd*u-qd*h*v,k=qd*u+Vd*h*v;eh.add(Xe(ai(x*x+w*w),k)),Zu=r,qd=u,Vd=h}function Kp(r){return eh.reset(),Es(r,Pl),+eh}var th=[null,null],pv={type:"LineString",coordinates:th};function jd(r,l){return th[0]=r,th[1]=l,Kp(pv)}var Xp={Feature:function(r,l){return Wd(r.geometry,l)},FeatureCollection:function(r,l){for(var u=r.features,h=-1,g=u.length;++h<g;)if(Wd(u[h].geometry,l))return!0;return!1}},Qp={Sphere:function(){return!0},Point:function(r,l){return Jp(r.coordinates,l)},MultiPoint:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)if(Jp(u[h],l))return!0;return!1},LineString:function(r,l){return Zp(r.coordinates,l)},MultiLineString:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)if(Zp(u[h],l))return!0;return!1},Polygon:function(r,l){return ef(r.coordinates,l)},MultiPolygon:function(r,l){for(var u=r.coordinates,h=-1,g=u.length;++h<g;)if(ef(u[h],l))return!0;return!1},GeometryCollection:function(r,l){for(var u=r.geometries,h=-1,g=u.length;++h<g;)if(Wd(u[h],l))return!0;return!1}};function Wd(r,l){return!(!r||!Qp.hasOwnProperty(r.type))&&Qp[r.type](r,l)}function Jp(r,l){return 0===jd(r,l)}function Zp(r,l){for(var u,h,g,v=0,x=r.length;v<x;v++){if(0===(h=jd(r[v],l))||v>0&&(g=jd(r[v],r[v-1]))>0&&u<=g&&h<=g&&(u+h-g)*(1-Math.pow((u-h)/g,2))<At*g)return!0;u=h}return!1}function ef(r,l){return!!Up(r.map(fv),tf(l))}function fv(r){return(r=r.map(tf)).pop(),r}function tf(r){return[r[0]*kt,r[1]*kt]}function nf(r,l,u){var h=it(r,l-Re,u).concat(l);return function(g){return h.map(function(v){return[g,v]})}}function af(r,l,u){var h=it(r,l-Re,u).concat(l);return function(g){return h.map(function(v){return[v,g]})}}function sf(){var r,l,u,h,g,v,x,w,k,A,D,B,I=10,q=I,j=90,K=360,X=2.5;function Y(){return{type:"MultiLineString",coordinates:ne()}}function ne(){return it(tn(h/j)*j,u,j).map(D).concat(it(tn(w/K)*K,x,K).map(B)).concat(it(tn(l/I)*I,r,I).filter(function(te){return Xt(te%j)>Re}).map(k)).concat(it(tn(v/q)*q,g,q).filter(function(te){return Xt(te%K)>Re}).map(A))}return Y.lines=function(){return ne().map(function(te){return{type:"LineString",coordinates:te}})},Y.outline=function(){return{type:"Polygon",coordinates:[D(h).concat(B(x).slice(1),D(u).reverse().slice(1),B(w).reverse().slice(1))]}},Y.extent=function(te){return arguments.length?Y.extentMajor(te).extentMinor(te):Y.extentMinor()},Y.extentMajor=function(te){return arguments.length?(w=+te[0][1],x=+te[1][1],(h=+te[0][0])>(u=+te[1][0])&&(te=h,h=u,u=te),w>x&&(te=w,w=x,x=te),Y.precision(X)):[[h,w],[u,x]]},Y.extentMinor=function(te){return arguments.length?(v=+te[0][1],g=+te[1][1],(l=+te[0][0])>(r=+te[1][0])&&(te=l,l=r,r=te),v>g&&(te=v,v=g,g=te),Y.precision(X)):[[l,v],[r,g]]},Y.step=function(te){return arguments.length?Y.stepMajor(te).stepMinor(te):Y.stepMinor()},Y.stepMajor=function(te){return arguments.length?(j=+te[0],K=+te[1],Y):[j,K]},Y.stepMinor=function(te){return arguments.length?(I=+te[0],q=+te[1],Y):[I,q]},Y.precision=function(te){return arguments.length?(X=+te,k=nf(v,g,90),A=af(l,r,X),D=nf(w,x,90),B=af(h,u,X),Y):X},Y.extentMajor([[-180,-90+Re],[180,90-Re]]).extentMinor([[-180,-80-Re],[180,80+Re]])}function pc(r){return r}var rf,of,nh,ih,ah=Xn(),sh=Xn(),Ir={point:Mn,lineStart:Mn,lineEnd:Mn,polygonStart:function(){Ir.lineStart=gv,Ir.lineEnd=vv},polygonEnd:function(){Ir.lineStart=Ir.lineEnd=Ir.point=Mn,ah.add(Xt(sh)),sh.reset()},result:function(){var r=ah/2;return ah.reset(),r}};function gv(){Ir.point=mv}function mv(r,l){Ir.point=lf,rf=nh=r,of=ih=l}function lf(r,l){sh.add(ih*r-nh*l),nh=r,ih=l}function vv(){lf(rf,of)}var cf,df,nr,ir,Nl=1/0,Ud=Nl,fc=-Nl,Gd=fc,Yd={point:function(r,l){r<Nl&&(Nl=r),r>fc&&(fc=r),l<Ud&&(Ud=l),l>Gd&&(Gd=l)},lineStart:Mn,lineEnd:Mn,polygonStart:Mn,polygonEnd:Mn,result:function(){var r=[[Nl,Ud],[fc,Gd]];return fc=Gd=-(Ud=Nl=1/0),r}},rh=0,oh=0,gc=0,Kd=0,Xd=0,Rl=0,lh=0,ch=0,mc=0,us={point:Yo,lineStart:uf,lineEnd:hf,polygonStart:function(){us.lineStart=wv,us.lineEnd=xv},polygonEnd:function(){us.point=Yo,us.lineStart=uf,us.lineEnd=hf},result:function(){var r=mc?[lh/mc,ch/mc]:Rl?[Kd/Rl,Xd/Rl]:gc?[rh/gc,oh/gc]:[NaN,NaN];return rh=oh=gc=Kd=Xd=Rl=lh=ch=mc=0,r}};function Yo(r,l){rh+=r,oh+=l,++gc}function uf(){us.point=bv}function bv(r,l){us.point=yv,Yo(nr=r,ir=l)}function yv(r,l){var u=r-nr,h=l-ir,g=ai(u*u+h*h);Kd+=g*(nr+r)/2,Xd+=g*(ir+l)/2,Rl+=g,Yo(nr=r,ir=l)}function hf(){us.point=Yo}function wv(){us.point=Cv}function xv(){pf(cf,df)}function Cv(r,l){us.point=pf,Yo(cf=nr=r,df=ir=l)}function pf(r,l){var u=r-nr,h=l-ir,g=ai(u*u+h*h);Kd+=g*(nr+r)/2,Xd+=g*(ir+l)/2,Rl+=g,lh+=(g=ir*r-nr*l)*(nr+r),ch+=g*(ir+l),mc+=3*g,Yo(nr=r,ir=l)}function ff(r){this._context=r}ff.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(r,l){switch(this._point){case 0:this._context.moveTo(r,l),this._point=1;break;case 1:this._context.lineTo(r,l);break;default:this._context.moveTo(r+this._radius,l),this._context.arc(r,l,this._radius,0,Tn)}},result:Mn};var dh,gf,mf,vc,bc,uh=Xn(),yc={point:Mn,lineStart:function(){yc.point=kv},lineEnd:function(){dh&&vf(gf,mf),yc.point=Mn},polygonStart:function(){dh=!0},polygonEnd:function(){dh=null},result:function(){var r=+uh;return uh.reset(),r}};function kv(r,l){yc.point=vf,gf=vc=r,mf=bc=l}function vf(r,l){uh.add(ai((vc-=r)*vc+(bc-=l)*bc)),vc=r,bc=l}function bf(){this._string=[]}function yf(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function wc(r){return function(l){var u=new hh;for(var h in r)u[h]=r[h];return u.stream=l,u}}function hh(){}function ph(r,l,u){var h=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),null!=h&&r.clipExtent(null),Es(u,r.stream(Yd)),l(Yd.result()),null!=h&&r.clipExtent(h),r}function Qd(r,l,u){return ph(r,function(h){var g=l[1][0]-l[0][0],v=l[1][1]-l[0][1],x=Math.min(g/(h[1][0]-h[0][0]),v/(h[1][1]-h[0][1])),w=+l[0][0]+(g-x*(h[1][0]+h[0][0]))/2,k=+l[0][1]+(v-x*(h[1][1]+h[0][1]))/2;r.scale(150*x).translate([w,k])},u)}function fh(r,l,u){return Qd(r,[[0,0],l],u)}function gh(r,l,u){return ph(r,function(h){var g=+l,v=g/(h[1][0]-h[0][0]),x=(g-v*(h[1][0]+h[0][0]))/2,w=-v*h[0][1];r.scale(150*v).translate([x,w])},u)}function mh(r,l,u){return ph(r,function(h){var g=+l,v=g/(h[1][1]-h[0][1]),x=-v*h[0][0],w=(g-v*(h[1][1]+h[0][1]))/2;r.scale(150*v).translate([x,w])},u)}bf.prototype={_radius:4.5,_circle:yf(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(r,l){switch(this._point){case 0:this._string.push("M",r,",",l),this._point=1;break;case 1:this._string.push("L",r,",",l);break;default:null==this._circle&&(this._circle=yf(this._radius)),this._string.push("M",r,",",l,this._circle)}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}return null}},hh.prototype={constructor:hh,point:function(r,l){this.stream.point(r,l)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Tv=et(30*kt);function xf(r,l){return+l?function(u,h){function g(v,x,w,k,A,D,B,I,q,j,K,X,Y,ne){var te=B-v,se=I-x,fe=te*te+se*se;if(fe>4*h&&Y--){var ve=k+j,Ae=A+K,qe=D+X,me=ai(ve*ve+Ae*Ae+qe*qe),Me=cn(qe/=me),Se=Xt(Xt(qe)-1)<Re||Xt(w-q)<Re?(w+q)/2:Xe(Ae,ve),ie=u(Se,Me),Ce=ie[0],we=ie[1],Ee=Ce-v,Fe=we-x,ct=se*Ee-te*Fe;(ct*ct/fe>h||Xt((te*Ee+se*Fe)/fe-.5)>.3||k*j+A*K+D*X<Tv)&&(g(v,x,w,k,A,D,Ce,we,Se,ve/=me,Ae/=me,qe,Y,ne),ne.point(Ce,we),g(Ce,we,Se,ve,Ae,qe,B,I,q,j,K,X,Y,ne))}}return function(v){var x,w,k,A,D,B,I,q,j,K,X,Y,ne={point:te,lineStart:se,lineEnd:ve,polygonStart:function(){v.polygonStart(),ne.lineStart=Ae},polygonEnd:function(){v.polygonEnd(),ne.lineStart=se}};function te(Me,Se){Me=u(Me,Se),v.point(Me[0],Me[1])}function se(){q=NaN,ne.point=fe,v.lineStart()}function fe(Me,Se){var ie=Uo([Me,Se]),Ce=u(Me,Se);g(q,j,I,K,X,Y,q=Ce[0],j=Ce[1],I=Me,K=ie[0],X=ie[1],Y=ie[2],16,v),v.point(q,j)}function ve(){ne.point=te,v.lineEnd()}function Ae(){se(),ne.point=qe,ne.lineEnd=me}function qe(Me,Se){fe(x=Me,Se),w=q,k=j,A=K,D=X,B=Y,ne.point=fe}function me(){g(q,j,I,K,X,Y,w,k,x,A,D,B,16,v),ne.lineEnd=ve,ve()}return ne}}(r,l):(u=r,wc({point:function(h,g){h=u(h,g),this.stream.point(h[0],h[1])}}));var u}var Av=wc({point:function(r,l){this.stream.point(r*kt,l*kt)}});function Cf(r,l,u,h,g,v){var x=et(v),w=ht(v),k=x*r,A=w*r,D=x/r,B=w/r,I=(w*u-x*l)/r,q=(w*l+x*u)/r;function j(K,X){return[k*(K*=h)-A*(X*=g)+l,u-A*K-k*X]}return j.invert=function(K,X){return[h*(D*K-B*X+I),g*(q-B*K-D*X)]},j}function ar(r){return vh(function(){return r})()}function vh(r){var l,u,h,g,v,x,w,k,A,D,B=150,I=480,q=250,j=0,K=0,X=0,Y=0,ne=0,te=0,se=1,fe=1,ve=null,Ae=Ju,qe=null,me=pc,Me=.5;function Se(Ee){return k(Ee[0]*kt,Ee[1]*kt)}function ie(Ee){return(Ee=k.invert(Ee[0],Ee[1]))&&[Ee[0]*zt,Ee[1]*zt]}function Ce(){var Ee=Cf(B,0,0,se,fe,te).apply(null,l(j,K)),Fe=(te?Cf:function(ct,It,Ot,Qt,gt){function rn(dn,Ct){return[It+ct*(dn*=Qt),Ot-ct*(Ct*=gt)]}return rn.invert=function(dn,Ct){return[(dn-It)/ct*Qt,(Ot-Ct)/ct*gt]},rn})(B,I-Ee[0],q-Ee[1],se,fe,te);return u=Ku(X,Y,ne),w=Gu(l,Fe),k=Gu(u,w),x=xf(w,Me),we()}function we(){return A=D=null,Se}return Se.stream=function(Ee){return A&&D===Ee?A:A=Av((Fe=u,wc({point:function(ct,It){var Ot=Fe(ct,It);return this.stream.point(Ot[0],Ot[1])}}))(Ae(x(me(D=Ee)))));var Fe},Se.preclip=function(Ee){return arguments.length?(Ae=Ee,ve=void 0,we()):Ae},Se.postclip=function(Ee){return arguments.length?(me=Ee,qe=h=g=v=null,we()):me},Se.clipAngle=function(Ee){return arguments.length?(Ae=+Ee?Yp(ve=Ee*kt):(ve=null,Ju),we()):ve*zt},Se.clipExtent=function(Ee){return arguments.length?(me=null==Ee?(qe=h=g=v=null,pc):Hd(qe=+Ee[0][0],h=+Ee[0][1],g=+Ee[1][0],v=+Ee[1][1]),we()):null==qe?null:[[qe,h],[g,v]]},Se.scale=function(Ee){return arguments.length?(B=+Ee,Ce()):B},Se.translate=function(Ee){return arguments.length?(I=+Ee[0],q=+Ee[1],Ce()):[I,q]},Se.center=function(Ee){return arguments.length?(j=Ee[0]%360*kt,K=Ee[1]%360*kt,Ce()):[j*zt,K*zt]},Se.rotate=function(Ee){return arguments.length?(X=Ee[0]%360*kt,Y=Ee[1]%360*kt,ne=Ee.length>2?Ee[2]%360*kt:0,Ce()):[X*zt,Y*zt,ne*zt]},Se.angle=function(Ee){return arguments.length?(te=Ee%360*kt,Ce()):te*zt},Se.reflectX=function(Ee){return arguments.length?(se=Ee?-1:1,Ce()):se<0},Se.reflectY=function(Ee){return arguments.length?(fe=Ee?-1:1,Ce()):fe<0},Se.precision=function(Ee){return arguments.length?(x=xf(w,Me=Ee*Ee),we()):ai(Me)},Se.fitExtent=function(Ee,Fe){return Qd(Se,Ee,Fe)},Se.fitSize=function(Ee,Fe){return fh(Se,Ee,Fe)},Se.fitWidth=function(Ee,Fe){return gh(Se,Ee,Fe)},Se.fitHeight=function(Ee,Fe){return mh(Se,Ee,Fe)},function(){return l=r.apply(this,arguments),Se.invert=l.invert&&ie,Ce()}}function bh(r){var l=0,u=lt/3,h=vh(r),g=h(l,u);return g.parallels=function(v){return arguments.length?h(l=v[0]*kt,u=v[1]*kt):[l*zt,u*zt]},g}function kf(r,l){var u=ht(r),h=(u+ht(l))/2;if(Xt(h)<Re)return function(w){var k=et(w);function A(D,B){return[D*k,ht(B)/k]}return A.invert=function(D,B){return[D/k,cn(B*k)]},A}(r);var g=1+u*(2*h-u),v=ai(g)/h;function x(w,k){var A=ai(g-2*h*ht(k))/h;return[A*ht(w*=h),v-A*et(w)]}return x.invert=function(w,k){var A=v-k,D=Xe(w,Xt(A))*wa(A);return A*h<0&&(D-=lt*wa(w)*wa(A)),[D/h,cn((g-(w*w+A*A)*h*h)/(2*h))]},x}function Jd(){return bh(kf).scale(155.424).center([0,33.6442])}function Tf(){return Jd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Af(r){return function(l,u){var h=et(l),g=et(u),v=r(h*g);return[v*g*ht(l),v*ht(u)]}}function xc(r){return function(l,u){var h=ai(l*l+u*u),g=r(h),v=ht(g),x=et(g);return[Xe(l*v,h*x),cn(h&&u*v/h)]}}var yh=Af(function(r){return ai(2/(1+r))});yh.invert=xc(function(r){return 2*cn(r/2)});var wh=Af(function(r){return(r=ji(r))&&r/ht(r)});function Cc(r,l){return[r,_i(uo((Nt+l)/2))]}function Sf(r){var l,u,h,g=ar(r),v=g.center,x=g.scale,w=g.translate,k=g.clipExtent,A=null;function D(){var B=lt*x(),I=g(Fp(g.rotate()).invert([0,0]));return k(null==A?[[I[0]-B,I[1]-B],[I[0]+B,I[1]+B]]:r===Cc?[[Math.max(I[0]-B,A),l],[Math.min(I[0]+B,u),h]]:[[A,Math.max(I[1]-B,l)],[u,Math.min(I[1]+B,h)]])}return g.scale=function(B){return arguments.length?(x(B),D()):x()},g.translate=function(B){return arguments.length?(w(B),D()):w()},g.center=function(B){return arguments.length?(v(B),D()):v()},g.clipExtent=function(B){return arguments.length?(null==B?A=l=u=h=null:(A=+B[0][0],l=+B[0][1],u=+B[1][0],h=+B[1][1]),D()):null==A?null:[[A,l],[u,h]]},D()}function Zd(r){return uo((Nt+r)/2)}function Ef(r,l){var u=et(r),h=r===l?ht(r):_i(u/et(l))/_i(Zd(l)/Zd(r)),g=u*Zn(Zd(r),h)/h;if(!h)return Cc;function v(x,w){g>0?w<-Nt+Re&&(w=-Nt+Re):w>Nt-Re&&(w=Nt-Re);var k=g/Zn(Zd(w),h);return[k*ht(h*x),g-k*et(h*x)]}return v.invert=function(x,w){var k=g-w,A=wa(h)*ai(x*x+k*k),D=Xe(x,Xt(k))*wa(k);return k*h<0&&(D-=lt*wa(x)*wa(k)),[D/h,2*Ye(Zn(g/A,1/h))-Nt]},v}function kc(r,l){return[r,l]}function $f(r,l){var u=et(r),h=r===l?ht(r):(u-et(l))/(l-r),g=u/h+r;if(Xt(h)<Re)return kc;function v(x,w){var k=g-w,A=h*x;return[k*ht(A),g-k*et(A)]}return v.invert=function(x,w){var k=g-w,A=Xe(x,Xt(k))*wa(k);return k*h<0&&(A-=lt*wa(x)*wa(k)),[A/h,g-wa(h)*ai(x*x+k*k)]},v}wh.invert=xc(function(r){return r}),Cc.invert=function(r,l){return[r,2*Ye(On(l))-Nt]},kc.invert=kc;var Tc=1.340264,Ac=-.081106,Sc=893e-6,Ec=.003796,eu=ai(3)/2;function xh(r,l){var u=cn(eu*ht(l)),h=u*u,g=h*h*h;return[r*et(u)/(eu*(Tc+3*Ac*h+g*(7*Sc+9*Ec*h))),u*(Tc+Ac*h+g*(Sc+Ec*h))]}function Ch(r,l){var u=et(l),h=et(r)*u;return[u*ht(r)/h,ht(l)/h]}function kh(r,l){var u=l*l,h=u*u;return[r*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791)),l*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))]}function Th(r,l){return[et(l)*ht(r),ht(l)]}function Ah(r,l){var u=et(l),h=1+et(r)*u;return[u*ht(r)/h,ht(l)/h]}function Sh(r,l){return[_i(uo((Nt+l)/2)),-r]}function Sv(r,l){return r.parent===l.parent?1:2}function Ev(r,l){return r+l.x}function $v(r,l){return Math.max(r,l.y)}function Dv(r){var l=0,u=r.children,h=u&&u.length;if(h)for(;--h>=0;)l+=u[h].value;else l=1;r.value=l}function Eh(r,l){var u,h,g,v,x,w=new Ol(r),k=+r.value&&(w.value=r.value),A=[w];for(null==l&&(l=Iv);u=A.pop();)if(k&&(u.value=+u.data.value),(g=l(u.data))&&(x=g.length))for(u.children=new Array(x),v=x-1;v>=0;--v)A.push(h=u.children[v]=new Ol(g[v])),h.parent=u,h.depth=u.depth+1;return w.eachBefore(Df)}function Iv(r){return r.children}function Mv(r){r.data=r.data.data}function Df(r){var l=0;do{r.height=l}while((r=r.parent)&&r.height<++l)}function Ol(r){this.data=r,this.depth=this.height=0,this.parent=null}xh.invert=function(r,l){for(var u,h=l,g=h*h,v=g*g*g,x=0;x<12&&(v=(g=(h-=u=(h*(Tc+Ac*g+v*(Sc+Ec*g))-l)/(Tc+3*Ac*g+v*(7*Sc+9*Ec*g)))*h)*g*g,!(Xt(u)<At));++x);return[eu*r*(Tc+3*Ac*g+v*(7*Sc+9*Ec*g))/et(h),cn(ht(h)/eu)]},Ch.invert=xc(Ye),kh.invert=function(r,l){var u,h=l,g=25;do{var v=h*h,x=v*v;h-=u=(h*(1.007226+v*(.015085+x*(.028874*v-.044475-.005916*x)))-l)/(1.007226+v*(.045255+x*(.259866*v-.311325-.005916*11*x)))}while(Xt(u)>Re&&--g>0);return[r/(.8707+(v=h*h)*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979)),h]},Th.invert=xc(cn),Ah.invert=xc(function(r){return 2*Ye(r)}),Sh.invert=function(r,l){return[-l,2*Ye(On(r))-Nt]},Ol.prototype=Eh.prototype={constructor:Ol,count:function(){return this.eachAfter(Dv)},each:function(r){var l,u,h,g,v=this,x=[v];do{for(l=x.reverse(),x=[];v=l.pop();)if(r(v),u=v.children)for(h=0,g=u.length;h<g;++h)x.push(u[h])}while(x.length);return this},eachAfter:function(r){for(var l,u,h,g=this,v=[g],x=[];g=v.pop();)if(x.push(g),l=g.children)for(u=0,h=l.length;u<h;++u)v.push(l[u]);for(;g=x.pop();)r(g);return this},eachBefore:function(r){for(var l,u,h=this,g=[h];h=g.pop();)if(r(h),l=h.children)for(u=l.length-1;u>=0;--u)g.push(l[u]);return this},sum:function(r){return this.eachAfter(function(l){for(var u=+r(l.data)||0,h=l.children,g=h&&h.length;--g>=0;)u+=h[g].value;l.value=u})},sort:function(r){return this.eachBefore(function(l){l.children&&l.children.sort(r)})},path:function(r){for(var l=this,u=function(v,x){if(v===x)return v;var w=v.ancestors(),k=x.ancestors(),A=null;for(v=w.pop(),x=k.pop();v===x;)A=v,v=w.pop(),x=k.pop();return A}(l,r),h=[l];l!==u;)h.push(l=l.parent);for(var g=h.length;r!==u;)h.splice(g,0,r),r=r.parent;return h},ancestors:function(){for(var r=this,l=[r];r=r.parent;)l.push(r);return l},descendants:function(){var r=[];return this.each(function(l){r.push(l)}),r},leaves:function(){var r=[];return this.eachBefore(function(l){l.children||r.push(l)}),r},links:function(){var r=this,l=[];return r.each(function(u){u!==r&&l.push({source:u.parent,target:u})}),l},copy:function(){return Eh(this).eachBefore(Mv)}};var Lv=Array.prototype.slice;function If(r){for(var l,u,h=0,g=(r=function(x){for(var w,k,A=x.length;A;)k=Math.random()*A--|0,w=x[A],x[A]=x[k],x[k]=w;return x}(Lv.call(r))).length,v=[];h<g;)l=r[h],u&&Mf(u,l)?++h:(u=Nv(v=Pv(v,l)),h=0);return u}function Pv(r,l){var u,h;if($h(l,r))return[l];for(u=0;u<r.length;++u)if(tu(l,r[u])&&$h($c(r[u],l),r))return[r[u],l];for(u=0;u<r.length-1;++u)for(h=u+1;h<r.length;++h)if(tu($c(r[u],r[h]),l)&&tu($c(r[u],l),r[h])&&tu($c(r[h],l),r[u])&&$h(Lf(r[u],r[h],l),r))return[r[u],r[h],l];throw new Error}function tu(r,l){var u=r.r-l.r,h=l.x-r.x,g=l.y-r.y;return u<0||u*u<h*h+g*g}function Mf(r,l){var u=r.r-l.r+1e-6,h=l.x-r.x,g=l.y-r.y;return u>0&&u*u>h*h+g*g}function $h(r,l){for(var u=0;u<l.length;++u)if(!Mf(r,l[u]))return!1;return!0}function Nv(r){switch(r.length){case 1:return{x:(l=r[0]).x,y:l.y,r:l.r};case 2:return $c(r[0],r[1]);case 3:return Lf(r[0],r[1],r[2])}var l}function $c(r,l){var u=r.x,h=r.y,g=r.r,v=l.x,x=l.y,w=l.r,k=v-u,A=x-h,D=w-g,B=Math.sqrt(k*k+A*A);return{x:(u+v+k/B*D)/2,y:(h+x+A/B*D)/2,r:(B+g+w)/2}}function Lf(r,l,u){var h=r.x,g=r.y,v=r.r,x=l.x,w=l.y,k=l.r,A=u.x,D=u.y,B=u.r,I=h-x,q=h-A,j=g-w,K=g-D,X=k-v,Y=B-v,ne=h*h+g*g-v*v,te=ne-x*x-w*w+k*k,se=ne-A*A-D*D+B*B,fe=q*j-I*K,ve=(j*se-K*te)/(2*fe)-h,Ae=(K*X-j*Y)/fe,qe=(q*te-I*se)/(2*fe)-g,me=(I*Y-q*X)/fe,Me=Ae*Ae+me*me-1,Se=2*(v+ve*Ae+qe*me),ie=ve*ve+qe*qe-v*v,Ce=-(Me?(Se+Math.sqrt(Se*Se-4*Me*ie))/(2*Me):ie/Se);return{x:h+ve+Ae*Ce,y:g+qe+me*Ce,r:Ce}}function Pf(r,l,u){var h,g,v,x,w=r.x-l.x,k=r.y-l.y,A=w*w+k*k;A?(g=l.r+u.r,x=r.r+u.r,(g*=g)>(x*=x)?(h=(A+x-g)/(2*A),v=Math.sqrt(Math.max(0,x/A-h*h)),u.x=r.x-h*w-v*k,u.y=r.y-h*k+v*w):(h=(A+g-x)/(2*A),v=Math.sqrt(Math.max(0,g/A-h*h)),u.x=l.x+h*w-v*k,u.y=l.y+h*k+v*w)):(u.x=l.x+u.r,u.y=l.y)}function Nf(r,l){var u=r.r+l.r-1e-6,h=l.x-r.x,g=l.y-r.y;return u>0&&u*u>h*h+g*g}function Rf(r){var l=r._,u=r.next._,h=l.r+u.r,g=(l.x*u.r+u.x*l.r)/h,v=(l.y*u.r+u.y*l.r)/h;return g*g+v*v}function nu(r){this._=r,this.next=null,this.previous=null}function Of(r){if(!(g=r.length))return 0;var l,u,h,g,v,x,w,k,A,D,B;if((l=r[0]).x=0,l.y=0,!(g>1))return l.r;if(l.x=-(u=r[1]).r,u.x=l.r,u.y=0,!(g>2))return l.r+u.r;Pf(u,l,h=r[2]),l=new nu(l),u=new nu(u),h=new nu(h),l.next=h.previous=u,u.next=l.previous=h,h.next=u.previous=l;e:for(w=3;w<g;++w){Pf(l._,u._,h=r[w]),h=new nu(h),k=u.next,A=l.previous,D=u._.r,B=l._.r;do{if(D<=B){if(Nf(k._,h._)){l.next=u=k,u.previous=l,--w;continue e}D+=k._.r,k=k.next}else{if(Nf(A._,h._)){(l=A).next=u,u.previous=l,--w;continue e}B+=A._.r,A=A.previous}}while(k!==A.next);for(h.previous=l,h.next=u,l.next=u.previous=u=h,v=Rf(l);(h=h.next)!==u;)(x=Rf(h))<v&&(l=h,v=x);u=l.next}for(l=[u._],h=u;(h=h.next)!==u;)l.push(h._);for(h=If(l),w=0;w<g;++w)(l=r[w]).x-=h.x,l.y-=h.y;return h.r}function Rv(r){return null==r?null:iu(r)}function iu(r){if("function"!=typeof r)throw new Error;return r}function Ko(){return 0}function Bl(r){return function(){return r}}function Ov(r){return Math.sqrt(r.value)}function Bf(r){return function(l){l.children||(l.r=Math.max(0,+r(l)||0))}}function Dh(r,l){return function(u){if(h=u.children){var h,g,v,x=h.length,w=r(u)*l||0;if(w)for(g=0;g<x;++g)h[g].r+=w;if(v=Of(h),w)for(g=0;g<x;++g)h[g].r-=w;u.r=v+w}}}function _f(r){return function(l){var u=l.parent;l.r*=r,u&&(l.x=u.x+r*l.x,l.y=u.y+r*l.y)}}function zf(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function Dc(r,l,u,h,g){for(var v,x=r.children,w=-1,k=x.length,A=r.value&&(h-l)/r.value;++w<k;)(v=x[w]).y0=u,v.y1=g,v.x0=l,v.x1=l+=v.value*A}var Bv={depth:-1},Hf={};function _v(r){return r.id}function zv(r){return r.parentId}function Fv(r,l){return r.parent===l.parent?1:2}function Ih(r){var l=r.children;return l?l[0]:r.t}function Mh(r){var l=r.children;return l?l[l.length-1]:r.t}function Hv(r,l,u){var h=u/(l.i-r.i);l.c-=h,l.s+=u,r.c+=h,l.z+=u,l.m+=u}function qv(r,l,u){return r.a.parent===l.parent?r.a:u}function au(r,l){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=l}function su(r,l,u,h,g){for(var v,x=r.children,w=-1,k=x.length,A=r.value&&(g-u)/r.value;++w<k;)(v=x[w]).x0=l,v.x1=h,v.y0=u,v.y1=u+=v.value*A}au.prototype=Object.create(Ol.prototype);var qf=(1+Math.sqrt(5))/2;function Vf(r,l,u,h,g,v){for(var x,w,k,A,D,B,I,q,j,K,X,Y=[],ne=l.children,te=0,se=0,fe=ne.length,ve=l.value;te<fe;){k=g-u,A=v-h;do{D=ne[se++].value}while(!D&&se<fe);for(B=I=D,X=D*D*(K=Math.max(A/k,k/A)/(ve*r)),j=Math.max(I/X,X/B);se<fe;++se){if(D+=w=ne[se].value,w<B&&(B=w),w>I&&(I=w),X=D*D*K,(q=Math.max(I/X,X/B))>j){D-=w;break}j=q}Y.push(x={value:D,dice:k<A,children:ne.slice(te,se)}),x.dice?Dc(x,u,h,g,ve?h+=A*D/ve:v):su(x,u,h,ve?u+=k*D/ve:g,v),ve-=D,te=se}return Y}var jf=function r(l){function u(h,g,v,x,w){Vf(l,h,g,v,x,w)}return u.ratio=function(h){return r((h=+h)>1?h:1)},u}(qf),Vv=function r(l){function u(h,g,v,x,w){if((k=h._squarify)&&k.ratio===l)for(var k,A,D,B,I,q=-1,j=k.length,K=h.value;++q<j;){for(D=(A=k[q]).children,B=A.value=0,I=D.length;B<I;++B)A.value+=D[B].value;A.dice?Dc(A,g,v,x,v+=(w-v)*A.value/K):su(A,g,v,g+=(x-g)*A.value/K,w),K-=A.value}else h._squarify=k=Vf(l,h,g,v,x,w),k.ratio=l}return u.ratio=function(h){return r((h=+h)>1?h:1)},u}(qf);function jv(r,l,u){return(l[0]-r[0])*(u[1]-r[1])-(l[1]-r[1])*(u[0]-r[0])}function Wv(r,l){return r[0]-l[0]||r[1]-l[1]}function Wf(r){for(var l=r.length,u=[0,1],h=2,g=2;g<l;++g){for(;h>1&&jv(r[u[h-2]],r[u[h-1]],r[g])<=0;)--h;u[h++]=g}return u.slice(0,h)}function _l(){return Math.random()}var Uv=function r(l){function u(h,g){return h=null==h?0:+h,g=null==g?1:+g,1===arguments.length?(g=h,h=0):g-=h,function(){return l()*g+h}}return u.source=r,u}(_l),Uf=function r(l){function u(h,g){var v,x;return h=null==h?0:+h,g=null==g?1:+g,function(){var w;if(null!=v)w=v,v=null;else do{v=2*l()-1,w=2*l()-1,x=v*v+w*w}while(!x||x>1);return h+g*w*Math.sqrt(-2*Math.log(x)/x)}}return u.source=r,u}(_l),Gv=function r(l){function u(){var h=Uf.source(l).apply(this,arguments);return function(){return Math.exp(h())}}return u.source=r,u}(_l),Gf=function r(l){function u(h){return function(){for(var g=0,v=0;v<h;++v)g+=l();return g}}return u.source=r,u}(_l),Yv=function r(l){function u(h){var g=Gf.source(l)(h);return function(){return g()/h}}return u.source=r,u}(_l),Kv=function r(l){function u(h){return function(){return-Math.log(1-l())/h}}return u.source=r,u}(_l);function Ds(r,l){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(l).domain(r)}return this}function Mr(r,l){switch(arguments.length){case 0:break;case 1:this.interpolator(r);break;default:this.interpolator(l).domain(r)}return this}var Yf=Array.prototype,ru=Yf.map,Xo=Yf.slice,Lh={name:"implicit"};function Ph(){var r=ds(),l=[],u=[],h=Lh;function g(v){var x=v+"",w=r.get(x);if(!w){if(h!==Lh)return h;r.set(x,w=l.push(v))}return u[(w-1)%u.length]}return g.domain=function(v){if(!arguments.length)return l.slice();l=[],r=ds();for(var x,w,k=-1,A=v.length;++k<A;)r.has(w=(x=v[k])+"")||r.set(w,l.push(x));return g},g.range=function(v){return arguments.length?(u=Xo.call(v),g):u.slice()},g.unknown=function(v){return arguments.length?(h=v,g):h},g.copy=function(){return Ph(l,u).unknown(h)},Ds.apply(g,arguments),g}function Nh(){var r,l,u=Ph().unknown(void 0),h=u.domain,g=u.range,v=[0,1],x=!1,w=0,k=0,A=.5;function D(){var B=h().length,I=v[1]<v[0],q=v[I-0],j=v[1-I];r=(j-q)/Math.max(1,B-w+2*k),x&&(r=Math.floor(r)),q+=(j-q-r*(B-w))*A,l=r*(1-w),x&&(q=Math.round(q),l=Math.round(l));var K=it(B).map(function(X){return q+r*X});return g(I?K.reverse():K)}return delete u.unknown,u.domain=function(B){return arguments.length?(h(B),D()):h()},u.range=function(B){return arguments.length?(v=[+B[0],+B[1]],D()):v.slice()},u.rangeRound=function(B){return v=[+B[0],+B[1]],x=!0,D()},u.bandwidth=function(){return l},u.step=function(){return r},u.round=function(B){return arguments.length?(x=!!B,D()):x},u.padding=function(B){return arguments.length?(w=Math.min(1,k=+B),D()):w},u.paddingInner=function(B){return arguments.length?(w=Math.min(1,B),D()):w},u.paddingOuter=function(B){return arguments.length?(k=+B,D()):k},u.align=function(B){return arguments.length?(A=Math.max(0,Math.min(1,B)),D()):A},u.copy=function(){return Nh(h(),v).round(x).paddingInner(w).paddingOuter(k).align(A)},Ds.apply(D(),arguments)}function Rh(r){return+r}var Kf=[0,1];function Zi(r){return r}function Oh(r,l){return(l-=r=+r)?function(u){return(u-r)/l}:(u=isNaN(l)?NaN:.5,function(){return u});var u}function Xf(r){var l,u=r[0],h=r[r.length-1];return u>h&&(l=u,u=h,h=l),function(g){return Math.max(u,Math.min(h,g))}}function Xv(r,l,u){var h=r[0],g=r[1],v=l[0],x=l[1];return g<h?(h=Oh(g,h),v=u(x,v)):(h=Oh(h,g),v=u(v,x)),function(w){return v(h(w))}}function Qv(r,l,u){var h=Math.min(r.length,l.length)-1,g=new Array(h),v=new Array(h),x=-1;for(r[h]<r[0]&&(r=r.slice().reverse(),l=l.slice().reverse());++x<h;)g[x]=Oh(r[x],r[x+1]),v[x]=u(l[x],l[x+1]);return function(w){var k=Si(r,w,1,h)-1;return v[k](g[k](w))}}function Ic(r,l){return l.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function ou(){var r,l,u,h,g,v,x=Kf,w=Kf,k=hi,A=Zi;function D(){return h=Math.min(x.length,w.length)>2?Qv:Xv,g=v=null,B}function B(I){return isNaN(I=+I)?u:(g||(g=h(x.map(r),w,k)))(r(A(I)))}return B.invert=function(I){return A(l((v||(v=h(w,x.map(r),pn)))(I)))},B.domain=function(I){return arguments.length?(x=ru.call(I,Rh),A===Zi||(A=Xf(x)),D()):x.slice()},B.range=function(I){return arguments.length?(w=Xo.call(I),D()):w.slice()},B.rangeRound=function(I){return w=Xo.call(I),k=rs,D()},B.clamp=function(I){return arguments.length?(A=I?Xf(x):Zi,B):A!==Zi},B.interpolate=function(I){return arguments.length?(k=I,D()):k},B.unknown=function(I){return arguments.length?(u=I,B):u},function(I,q){return r=I,l=q,D()}}function Qf(r,l){return ou()(r,l)}function Jf(r,l,u,h){var g,v=Ta(r,l,u);switch((h=ii(h??",f")).type){case"s":var x=Math.max(Math.abs(r),Math.abs(l));return null!=h.precision||isNaN(g=ya(v,x))||(h.precision=g),R.formatPrefix(h,x);case"":case"e":case"g":case"p":case"r":null!=h.precision||isNaN(g=la(v,Math.max(Math.abs(r),Math.abs(l))))||(h.precision=g-("e"===h.type));break;case"f":case"%":null!=h.precision||isNaN(g=Ai(v))||(h.precision=g-2*("%"===h.type))}return R.format(h)}function Qo(r){var l=r.domain;return r.ticks=function(u){var h=l();return ps(h[0],h[h.length-1],u??10)},r.tickFormat=function(u,h){var g=l();return Jf(g[0],g[g.length-1],u??10,h)},r.nice=function(u){null==u&&(u=10);var h,g=l(),v=0,x=g.length-1,w=g[v],k=g[x];return k<w&&(h=w,w=k,k=h,h=v,v=x,x=h),(h=H(w,k,u))>0?h=H(w=Math.floor(w/h)*h,k=Math.ceil(k/h)*h,u):h<0&&(h=H(w=Math.ceil(w*h)/h,k=Math.floor(k*h)/h,u)),h>0?(g[v]=Math.floor(w/h)*h,g[x]=Math.ceil(k/h)*h,l(g)):h<0&&(g[v]=Math.ceil(w*h)/h,g[x]=Math.floor(k*h)/h,l(g)),r},r}function Zf(r,l){var u,h=0,g=(r=r.slice()).length-1,v=r[h],x=r[g];return x<v&&(u=h,h=g,g=u,u=v,v=x,x=u),r[h]=l.floor(v),r[g]=l.ceil(x),r}function eg(r){return Math.log(r)}function tg(r){return Math.exp(r)}function Jv(r){return-Math.log(-r)}function Zv(r){return-Math.exp(-r)}function eb(r){return isFinite(r)?+("1e"+r):r<0?0:r}function ng(r){return function(l){return-r(-l)}}function Bh(r){var l,u,h=r(eg,tg),g=h.domain,v=10;function x(){return l=(w=v)===Math.E?Math.log:10===w&&Math.log10||2===w&&Math.log2||(w=Math.log(w),function(k){return Math.log(k)/w}),u=function(w){return 10===w?eb:w===Math.E?Math.exp:function(k){return Math.pow(w,k)}}(v),g()[0]<0?(l=ng(l),u=ng(u),r(Jv,Zv)):r(eg,tg),h;var w}return h.base=function(w){return arguments.length?(v=+w,x()):v},h.domain=function(w){return arguments.length?(g(w),x()):g()},h.ticks=function(w){var k,A=g(),D=A[0],B=A[A.length-1];(k=B<D)&&(K=D,D=B,B=K);var I,q,j,K=l(D),X=l(B),Y=null==w?10:+w,ne=[];if(!(v%1)&&X-K<Y){if(K=Math.round(K)-1,X=Math.round(X)+1,D>0){for(;K<X;++K)for(q=1,I=u(K);q<v;++q)if(!((j=I*q)<D)){if(j>B)break;ne.push(j)}}else for(;K<X;++K)for(q=v-1,I=u(K);q>=1;--q)if(!((j=I*q)<D)){if(j>B)break;ne.push(j)}}else ne=ps(K,X,Math.min(X-K,Y)).map(u);return k?ne.reverse():ne},h.tickFormat=function(w,k){if(null==k&&(k=10===v?".0e":","),"function"!=typeof k&&(k=R.format(k)),w===1/0)return k;null==w&&(w=10);var A=Math.max(1,v*w/h.ticks().length);return function(D){var B=D/u(Math.round(l(D)));return B*v<v-.5&&(B*=v),B<=A?k(D):""}},h.nice=function(){return g(Zf(g(),{floor:function(w){return u(Math.floor(l(w)))},ceil:function(w){return u(Math.ceil(l(w)))}}))},h}function ig(r){return function(l){return Math.sign(l)*Math.log1p(Math.abs(l/r))}}function ag(r){return function(l){return Math.sign(l)*Math.expm1(Math.abs(l))*r}}function _h(r){var l=1,u=r(ig(l),ag(l));return u.constant=function(h){return arguments.length?r(ig(l=+h),ag(l)):l},Qo(u)}function sg(r){return function(l){return l<0?-Math.pow(-l,r):Math.pow(l,r)}}function tb(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function nb(r){return r<0?-r*r:r*r}function zh(r){var l=r(Zi,Zi),u=1;function h(){return 1===u?r(Zi,Zi):.5===u?r(tb,nb):r(sg(u),sg(1/u))}return l.exponent=function(g){return arguments.length?(u=+g,h()):u},Qo(l)}function Fh(){var r=zh(ou());return r.copy=function(){return Ic(r,Fh()).exponent(r.exponent())},Ds.apply(r,arguments),r}var Hh=new Date,qh=new Date;function zi(r,l,u,h){function g(v){return r(v=0===arguments.length?new Date:new Date(+v)),v}return g.floor=function(v){return r(v=new Date(+v)),v},g.ceil=function(v){return r(v=new Date(v-1)),l(v,1),r(v),v},g.round=function(v){var x=g(v),w=g.ceil(v);return v-x<w-v?x:w},g.offset=function(v,x){return l(v=new Date(+v),null==x?1:Math.floor(x)),v},g.range=function(v,x,w){var k,A=[];if(v=g.ceil(v),w=null==w?1:Math.floor(w),!(v<x&&w>0))return A;do{A.push(k=new Date(+v)),l(v,w),r(v)}while(k<v&&v<x);return A},g.filter=function(v){return zi(function(x){if(x>=x)for(;r(x),!v(x);)x.setTime(x-1)},function(x,w){if(x>=x)if(w<0)for(;++w<=0;)for(;l(x,-1),!v(x););else for(;--w>=0;)for(;l(x,1),!v(x););})},u&&(g.count=function(v,x){return Hh.setTime(+v),qh.setTime(+x),r(Hh),r(qh),Math.floor(u(Hh,qh))},g.every=function(v){return v=Math.floor(v),isFinite(v)&&v>0?v>1?g.filter(h?function(x){return h(x)%v==0}:function(x){return g.count(0,x)%v==0}):g:null}),g}var Jo=zi(function(){},function(r,l){r.setTime(+r+l)},function(r,l){return l-r});Jo.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?zi(function(l){l.setTime(Math.floor(l/r)*r)},function(l,u){l.setTime(+l+u*r)},function(l,u){return(u-l)/r}):Jo:null};var rg=Jo.range,Zo=6e4,og=6048e5,Mc=zi(function(r){r.setTime(r-r.getMilliseconds())},function(r,l){r.setTime(+r+1e3*l)},function(r,l){return(l-r)/1e3},function(r){return r.getUTCSeconds()}),lg=Mc.range,Vh=zi(function(r){r.setTime(r-r.getMilliseconds()-1e3*r.getSeconds())},function(r,l){r.setTime(+r+l*Zo)},function(r,l){return(l-r)/Zo},function(r){return r.getMinutes()}),ib=Vh.range,jh=zi(function(r){r.setTime(r-r.getMilliseconds()-1e3*r.getSeconds()-r.getMinutes()*Zo)},function(r,l){r.setTime(+r+36e5*l)},function(r,l){return(l-r)/36e5},function(r){return r.getHours()}),ab=jh.range,Lc=zi(function(r){r.setHours(0,0,0,0)},function(r,l){r.setDate(r.getDate()+l)},function(r,l){return(l-r-(l.getTimezoneOffset()-r.getTimezoneOffset())*Zo)/864e5},function(r){return r.getDate()-1}),sb=Lc.range;function el(r){return zi(function(l){l.setDate(l.getDate()-(l.getDay()+7-r)%7),l.setHours(0,0,0,0)},function(l,u){l.setDate(l.getDate()+7*u)},function(l,u){return(u-l-(u.getTimezoneOffset()-l.getTimezoneOffset())*Zo)/og})}var Pc=el(0),Nc=el(1),cg=el(2),dg=el(3),Rc=el(4),ug=el(5),hg=el(6),pg=Pc.range,rb=Nc.range,ob=cg.range,lb=dg.range,cb=Rc.range,db=ug.range,ub=hg.range,Wh=zi(function(r){r.setDate(1),r.setHours(0,0,0,0)},function(r,l){r.setMonth(r.getMonth()+l)},function(r,l){return l.getMonth()-r.getMonth()+12*(l.getFullYear()-r.getFullYear())},function(r){return r.getMonth()}),hb=Wh.range,Lr=zi(function(r){r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,l){r.setFullYear(r.getFullYear()+l)},function(r,l){return l.getFullYear()-r.getFullYear()},function(r){return r.getFullYear()});Lr.every=function(r){return isFinite(r=Math.floor(r))&&r>0?zi(function(l){l.setFullYear(Math.floor(l.getFullYear()/r)*r),l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,u){l.setFullYear(l.getFullYear()+u*r)}):null};var pb=Lr.range,Uh=zi(function(r){r.setUTCSeconds(0,0)},function(r,l){r.setTime(+r+l*Zo)},function(r,l){return(l-r)/Zo},function(r){return r.getUTCMinutes()}),fb=Uh.range,Gh=zi(function(r){r.setUTCMinutes(0,0,0)},function(r,l){r.setTime(+r+36e5*l)},function(r,l){return(l-r)/36e5},function(r){return r.getUTCHours()}),gb=Gh.range,Oc=zi(function(r){r.setUTCHours(0,0,0,0)},function(r,l){r.setUTCDate(r.getUTCDate()+l)},function(r,l){return(l-r)/864e5},function(r){return r.getUTCDate()-1}),mb=Oc.range;function tl(r){return zi(function(l){l.setUTCDate(l.getUTCDate()-(l.getUTCDay()+7-r)%7),l.setUTCHours(0,0,0,0)},function(l,u){l.setUTCDate(l.getUTCDate()+7*u)},function(l,u){return(u-l)/og})}var Bc=tl(0),_c=tl(1),fg=tl(2),gg=tl(3),zc=tl(4),mg=tl(5),vg=tl(6),bg=Bc.range,vb=_c.range,bb=fg.range,yb=gg.range,wb=zc.range,xb=mg.range,Cb=vg.range,Yh=zi(function(r){r.setUTCDate(1),r.setUTCHours(0,0,0,0)},function(r,l){r.setUTCMonth(r.getUTCMonth()+l)},function(r,l){return l.getUTCMonth()-r.getUTCMonth()+12*(l.getUTCFullYear()-r.getUTCFullYear())},function(r){return r.getUTCMonth()}),kb=Yh.range,Pr=zi(function(r){r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,l){r.setUTCFullYear(r.getUTCFullYear()+l)},function(r,l){return l.getUTCFullYear()-r.getUTCFullYear()},function(r){return r.getUTCFullYear()});Pr.every=function(r){return isFinite(r=Math.floor(r))&&r>0?zi(function(l){l.setUTCFullYear(Math.floor(l.getUTCFullYear()/r)*r),l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,u){l.setUTCFullYear(l.getUTCFullYear()+u*r)}):null};var Tb=Pr.range;function Kh(r){if(0<=r.y&&r.y<100){var l=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return l.setFullYear(r.y),l}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function Xh(r){if(0<=r.y&&r.y<100){var l=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return l.setUTCFullYear(r.y),l}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Fc(r,l,u){return{y:r,m:l,d:u,H:0,M:0,S:0,L:0}}function yg(r){var l=r.dateTime,u=r.date,h=r.time,g=r.periods,v=r.days,x=r.shortDays,w=r.months,k=r.shortMonths,A=Hc(g),D=qc(g),B=Hc(v),I=qc(v),q=Hc(x),j=qc(x),K=Hc(w),X=qc(w),Y=Hc(k),ne=qc(k),te={a:function(me){return x[me.getDay()]},A:function(me){return v[me.getDay()]},b:function(me){return k[me.getMonth()]},B:function(me){return w[me.getMonth()]},c:null,d:kg,e:kg,f:Kb,H:Ub,I:Gb,j:Yb,L:Tg,m:Xb,M:Qb,p:function(me){return g[+(me.getHours()>=12)]},q:function(me){return 1+~~(me.getMonth()/3)},Q:$g,s:Dg,S:Jb,u:Zb,U:e0,V:t0,w:n0,W:i0,x:null,X:null,y:a0,Y:s0,Z:r0,"%":Eg},se={a:function(me){return x[me.getUTCDay()]},A:function(me){return v[me.getUTCDay()]},b:function(me){return k[me.getUTCMonth()]},B:function(me){return w[me.getUTCMonth()]},c:null,d:Ag,e:Ag,f:d0,H:o0,I:l0,j:c0,L:Sg,m:u0,M:h0,p:function(me){return g[+(me.getUTCHours()>=12)]},q:function(me){return 1+~~(me.getUTCMonth()/3)},Q:$g,s:Dg,S:p0,u:f0,U:g0,V:m0,w:v0,W:b0,x:null,X:null,y:y0,Y:w0,Z:x0,"%":Eg},fe={a:function(me,Me,Se){var ie=q.exec(Me.slice(Se));return ie?(me.w=j[ie[0].toLowerCase()],Se+ie[0].length):-1},A:function(me,Me,Se){var ie=B.exec(Me.slice(Se));return ie?(me.w=I[ie[0].toLowerCase()],Se+ie[0].length):-1},b:function(me,Me,Se){var ie=Y.exec(Me.slice(Se));return ie?(me.m=ne[ie[0].toLowerCase()],Se+ie[0].length):-1},B:function(me,Me,Se){var ie=K.exec(Me.slice(Se));return ie?(me.m=X[ie[0].toLowerCase()],Se+ie[0].length):-1},c:function(me,Me,Se){return qe(me,l,Me,Se)},d:xg,e:xg,f:qb,H:Cg,I:Cg,j:_b,L:Hb,m:Bb,M:zb,p:function(me,Me,Se){var ie=A.exec(Me.slice(Se));return ie?(me.p=D[ie[0].toLowerCase()],Se+ie[0].length):-1},q:Ob,Q:jb,s:Wb,S:Fb,u:Db,U:Ib,V:Mb,w:$b,W:Lb,x:function(me,Me,Se){return qe(me,u,Me,Se)},X:function(me,Me,Se){return qe(me,h,Me,Se)},y:Nb,Y:Pb,Z:Rb,"%":Vb};function ve(me,Me){return function(Se){var ie,Ce,we,Ee=[],Fe=-1,ct=0,It=me.length;for(Se instanceof Date||(Se=new Date(+Se));++Fe<It;)37===me.charCodeAt(Fe)&&(Ee.push(me.slice(ct,Fe)),null!=(Ce=wg[ie=me.charAt(++Fe)])?ie=me.charAt(++Fe):Ce="e"===ie?" ":"0",(we=Me[ie])&&(ie=we(Se,Ce)),Ee.push(ie),ct=Fe+1);return Ee.push(me.slice(ct,Fe)),Ee.join("")}}function Ae(me,Me){return function(Se){var ie,Ce,we=Fc(1900,void 0,1);if(qe(we,me,Se+="",0)!=Se.length)return null;if("Q"in we)return new Date(we.Q);if("s"in we)return new Date(1e3*we.s+("L"in we?we.L:0));if(!Me||"Z"in we||(we.Z=0),"p"in we&&(we.H=we.H%12+12*we.p),void 0===we.m&&(we.m="q"in we?we.q:0),"V"in we){if(we.V<1||we.V>53)return null;"w"in we||(we.w=1),"Z"in we?(Ce=(ie=Xh(Fc(we.y,0,1))).getUTCDay(),ie=Ce>4||0===Ce?_c.ceil(ie):_c(ie),ie=Oc.offset(ie,7*(we.V-1)),we.y=ie.getUTCFullYear(),we.m=ie.getUTCMonth(),we.d=ie.getUTCDate()+(we.w+6)%7):(Ce=(ie=Kh(Fc(we.y,0,1))).getDay(),ie=Ce>4||0===Ce?Nc.ceil(ie):Nc(ie),ie=Lc.offset(ie,7*(we.V-1)),we.y=ie.getFullYear(),we.m=ie.getMonth(),we.d=ie.getDate()+(we.w+6)%7)}else("W"in we||"U"in we)&&("w"in we||(we.w="u"in we?we.u%7:"W"in we?1:0),Ce="Z"in we?Xh(Fc(we.y,0,1)).getUTCDay():Kh(Fc(we.y,0,1)).getDay(),we.m=0,we.d="W"in we?(we.w+6)%7+7*we.W-(Ce+5)%7:we.w+7*we.U-(Ce+6)%7);return"Z"in we?(we.H+=we.Z/100|0,we.M+=we.Z%100,Xh(we)):Kh(we)}}function qe(me,Me,Se,ie){for(var Ce,we,Ee=0,Fe=Me.length,ct=Se.length;Ee<Fe;){if(ie>=ct)return-1;if(37===(Ce=Me.charCodeAt(Ee++))){if(Ce=Me.charAt(Ee++),!(we=fe[Ce in wg?Me.charAt(Ee++):Ce])||(ie=we(me,Se,ie))<0)return-1}else if(Ce!=Se.charCodeAt(ie++))return-1}return ie}return te.x=ve(u,te),te.X=ve(h,te),te.c=ve(l,te),se.x=ve(u,se),se.X=ve(h,se),se.c=ve(l,se),{format:function(me){var Me=ve(me+="",te);return Me.toString=function(){return me},Me},parse:function(me){var Me=Ae(me+="",!1);return Me.toString=function(){return me},Me},utcFormat:function(me){var Me=ve(me+="",se);return Me.toString=function(){return me},Me},utcParse:function(me){var Me=Ae(me+="",!0);return Me.toString=function(){return me},Me}}}var zl,wg={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,Ab=/^%/,Sb=/[\\^$*+?|[\]().{}]/g;function Bn(r,l,u){var h=r<0?"-":"",g=(h?-r:r)+"",v=g.length;return h+(v<u?new Array(u-v+1).join(l)+g:g)}function Eb(r){return r.replace(Sb,"\\$&")}function Hc(r){return new RegExp("^(?:"+r.map(Eb).join("|")+")","i")}function qc(r){for(var l={},u=-1,h=r.length;++u<h;)l[r[u].toLowerCase()]=u;return l}function $b(r,l,u){var h=Wi.exec(l.slice(u,u+1));return h?(r.w=+h[0],u+h[0].length):-1}function Db(r,l,u){var h=Wi.exec(l.slice(u,u+1));return h?(r.u=+h[0],u+h[0].length):-1}function Ib(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.U=+h[0],u+h[0].length):-1}function Mb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.V=+h[0],u+h[0].length):-1}function Lb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.W=+h[0],u+h[0].length):-1}function Pb(r,l,u){var h=Wi.exec(l.slice(u,u+4));return h?(r.y=+h[0],u+h[0].length):-1}function Nb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.y=+h[0]+(+h[0]>68?1900:2e3),u+h[0].length):-1}function Rb(r,l,u){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(l.slice(u,u+6));return h?(r.Z=h[1]?0:-(h[2]+(h[3]||"00")),u+h[0].length):-1}function Ob(r,l,u){var h=Wi.exec(l.slice(u,u+1));return h?(r.q=3*h[0]-3,u+h[0].length):-1}function Bb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.m=h[0]-1,u+h[0].length):-1}function xg(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.d=+h[0],u+h[0].length):-1}function _b(r,l,u){var h=Wi.exec(l.slice(u,u+3));return h?(r.m=0,r.d=+h[0],u+h[0].length):-1}function Cg(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.H=+h[0],u+h[0].length):-1}function zb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.M=+h[0],u+h[0].length):-1}function Fb(r,l,u){var h=Wi.exec(l.slice(u,u+2));return h?(r.S=+h[0],u+h[0].length):-1}function Hb(r,l,u){var h=Wi.exec(l.slice(u,u+3));return h?(r.L=+h[0],u+h[0].length):-1}function qb(r,l,u){var h=Wi.exec(l.slice(u,u+6));return h?(r.L=Math.floor(h[0]/1e3),u+h[0].length):-1}function Vb(r,l,u){var h=Ab.exec(l.slice(u,u+1));return h?u+h[0].length:-1}function jb(r,l,u){var h=Wi.exec(l.slice(u));return h?(r.Q=+h[0],u+h[0].length):-1}function Wb(r,l,u){var h=Wi.exec(l.slice(u));return h?(r.s=+h[0],u+h[0].length):-1}function kg(r,l){return Bn(r.getDate(),l,2)}function Ub(r,l){return Bn(r.getHours(),l,2)}function Gb(r,l){return Bn(r.getHours()%12||12,l,2)}function Yb(r,l){return Bn(1+Lc.count(Lr(r),r),l,3)}function Tg(r,l){return Bn(r.getMilliseconds(),l,3)}function Kb(r,l){return Tg(r,l)+"000"}function Xb(r,l){return Bn(r.getMonth()+1,l,2)}function Qb(r,l){return Bn(r.getMinutes(),l,2)}function Jb(r,l){return Bn(r.getSeconds(),l,2)}function Zb(r){var l=r.getDay();return 0===l?7:l}function e0(r,l){return Bn(Pc.count(Lr(r)-1,r),l,2)}function t0(r,l){var u=r.getDay();return r=u>=4||0===u?Rc(r):Rc.ceil(r),Bn(Rc.count(Lr(r),r)+(4===Lr(r).getDay()),l,2)}function n0(r){return r.getDay()}function i0(r,l){return Bn(Nc.count(Lr(r)-1,r),l,2)}function a0(r,l){return Bn(r.getFullYear()%100,l,2)}function s0(r,l){return Bn(r.getFullYear()%1e4,l,4)}function r0(r){var l=r.getTimezoneOffset();return(l>0?"-":(l*=-1,"+"))+Bn(l/60|0,"0",2)+Bn(l%60,"0",2)}function Ag(r,l){return Bn(r.getUTCDate(),l,2)}function o0(r,l){return Bn(r.getUTCHours(),l,2)}function l0(r,l){return Bn(r.getUTCHours()%12||12,l,2)}function c0(r,l){return Bn(1+Oc.count(Pr(r),r),l,3)}function Sg(r,l){return Bn(r.getUTCMilliseconds(),l,3)}function d0(r,l){return Sg(r,l)+"000"}function u0(r,l){return Bn(r.getUTCMonth()+1,l,2)}function h0(r,l){return Bn(r.getUTCMinutes(),l,2)}function p0(r,l){return Bn(r.getUTCSeconds(),l,2)}function f0(r){var l=r.getUTCDay();return 0===l?7:l}function g0(r,l){return Bn(Bc.count(Pr(r)-1,r),l,2)}function m0(r,l){var u=r.getUTCDay();return r=u>=4||0===u?zc(r):zc.ceil(r),Bn(zc.count(Pr(r),r)+(4===Pr(r).getUTCDay()),l,2)}function v0(r){return r.getUTCDay()}function b0(r,l){return Bn(_c.count(Pr(r)-1,r),l,2)}function y0(r,l){return Bn(r.getUTCFullYear()%100,l,2)}function w0(r,l){return Bn(r.getUTCFullYear()%1e4,l,4)}function x0(){return"+0000"}function Eg(){return"%"}function $g(r){return+r}function Dg(r){return Math.floor(+r/1e3)}function Ig(r){return zl=yg(r),R.timeFormat=zl.format,R.timeParse=zl.parse,R.utcFormat=zl.utcFormat,R.utcParse=zl.utcParse,zl}Ig({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var C0=Date.prototype.toISOString?function(r){return r.toISOString()}:R.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),k0=+new Date("2000-01-01T00:00:00.000Z")?function(r){var l=new Date(r);return isNaN(l)?null:l}:R.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),jc=6e4,Wc=60*jc,Uc=24*Wc,Mg=30*Uc,Qh=365*Uc;function A0(r){return new Date(r)}function S0(r){return r instanceof Date?+r:+new Date(+r)}function Jh(r,l,u,h,g,v,x,w,k){var A=Qf(Zi,Zi),D=A.invert,B=A.domain,I=k(".%L"),q=k(":%S"),j=k("%I:%M"),K=k("%I %p"),X=k("%a %d"),Y=k("%b %d"),ne=k("%B"),te=k("%Y"),se=[[x,1,1e3],[x,5,5e3],[x,15,15e3],[x,30,3e4],[v,1,jc],[v,5,5*jc],[v,15,15*jc],[v,30,30*jc],[g,1,Wc],[g,3,3*Wc],[g,6,6*Wc],[g,12,12*Wc],[h,1,Uc],[h,2,2*Uc],[u,1,6048e5],[l,1,Mg],[l,3,3*Mg],[r,1,Qh]];function fe(Ae){return(x(Ae)<Ae?I:v(Ae)<Ae?q:g(Ae)<Ae?j:h(Ae)<Ae?K:l(Ae)<Ae?u(Ae)<Ae?X:Y:r(Ae)<Ae?ne:te)(Ae)}function ve(Ae,qe,me,Me){if(null==Ae&&(Ae=10),"number"==typeof Ae){var Se=Math.abs(me-qe)/Ae,ie=Fi(function(Ce){return Ce[2]}).right(se,Se);ie===se.length?(Me=Ta(qe/Qh,me/Qh,Ae),Ae=r):ie?(Me=(ie=se[Se/se[ie-1][2]<se[ie][2]/Se?ie-1:ie])[1],Ae=ie[0]):(Me=Math.max(Ta(qe,me,Ae),1),Ae=w)}return null==Me?Ae:Ae.every(Me)}return A.invert=function(Ae){return new Date(D(Ae))},A.domain=function(Ae){return arguments.length?B(ru.call(Ae,S0)):B().map(A0)},A.ticks=function(Ae,qe){var me,Me=B(),Se=Me[0],ie=Me[Me.length-1],Ce=ie<Se;return Ce&&(me=Se,Se=ie,ie=me),me=(me=ve(Ae,Se,ie,qe))?me.range(Se,ie+1):[],Ce?me.reverse():me},A.tickFormat=function(Ae,qe){return null==qe?fe:k(qe)},A.nice=function(Ae,qe){var me=B();return(Ae=ve(Ae,me[0],me[me.length-1],qe))?B(Zf(me,Ae)):A},A.copy=function(){return Ic(A,Jh(r,l,u,h,g,v,x,w,k))},A}function lu(){var r,l,u,h,g,v=0,x=1,w=Zi,k=!1;function A(D){return isNaN(D=+D)?g:w(0===u?.5:(D=(h(D)-r)*u,k?Math.max(0,Math.min(1,D)):D))}return A.domain=function(D){return arguments.length?(r=h(v=+D[0]),l=h(x=+D[1]),u=r===l?0:1/(l-r),A):[v,x]},A.clamp=function(D){return arguments.length?(k=!!D,A):k},A.interpolator=function(D){return arguments.length?(w=D,A):w},A.unknown=function(D){return arguments.length?(g=D,A):g},function(D){return h=D,r=D(v),l=D(x),u=r===l?0:1/(l-r),A}}function po(r,l){return l.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function Zh(){var r=zh(lu());return r.copy=function(){return po(r,Zh()).exponent(r.exponent())},Mr.apply(r,arguments)}function cu(){var r,l,u,h,g,v,x,w=0,k=.5,A=1,D=Zi,B=!1;function I(q){return isNaN(q=+q)?x:(q=.5+((q=+v(q))-l)*(q<l?h:g),D(B?Math.max(0,Math.min(1,q)):q))}return I.domain=function(q){return arguments.length?(r=v(w=+q[0]),l=v(k=+q[1]),u=v(A=+q[2]),h=r===l?0:.5/(l-r),g=l===u?0:.5/(u-l),I):[w,k,A]},I.clamp=function(q){return arguments.length?(B=!!q,I):B},I.interpolator=function(q){return arguments.length?(D=q,I):D},I.unknown=function(q){return arguments.length?(x=q,I):x},function(q){return v=q,r=q(w),l=q(k),u=q(A),h=r===l?0:.5/(l-r),g=l===u?0:.5/(u-l),I}}function ep(){var r=zh(cu());return r.copy=function(){return po(r,ep()).exponent(r.exponent())},Mr.apply(r,arguments)}function Jt(r){for(var l=r.length/6|0,u=new Array(l),h=0;h<l;)u[h]="#"+r.slice(6*h,6*++h);return u}var E0=Jt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$0=Jt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),D0=Jt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),I0=Jt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),M0=Jt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),L0=Jt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),P0=Jt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),N0=Jt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),R0=Jt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),O0=Jt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Vn(r){return vt(r[r.length-1])}var Lg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Jt),B0=Vn(Lg),Pg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Jt),_0=Vn(Pg),Ng=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Jt),z0=Vn(Ng),Rg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Jt),F0=Vn(Rg),Og=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Jt),H0=Vn(Og),Bg=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Jt),q0=Vn(Bg),_g=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Jt),V0=Vn(_g),zg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Jt),j0=Vn(zg),Fg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Jt),W0=Vn(Fg),Hg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Jt),U0=Vn(Hg),qg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Jt),G0=Vn(qg),Vg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Jt),Y0=Vn(Vg),jg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Jt),K0=Vn(jg),Wg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Jt),X0=Vn(Wg),Ug=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Jt),Q0=Vn(Ug),Gg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Jt),J0=Vn(Gg),Yg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Jt),Z0=Vn(Yg),Kg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Jt),ey=Vn(Kg),Xg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Jt),ty=Vn(Xg),Qg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Jt),ny=Vn(Qg),Jg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Jt),iy=Vn(Jg),Zg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Jt),ay=Vn(Zg),em=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Jt),sy=Vn(em),tm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Jt),ry=Vn(tm),nm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Jt),oy=Vn(nm),im=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Jt),ly=Vn(im),am=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Jt),cy=Vn(am),dy=xr(W(300,.5,0),W(-240,.5,1)),uy=xr(W(-100,.75,.35),W(80,1.5,.8)),hy=xr(W(260,.75,.35),W(80,1.5,.8)),du=W(),uu=ia(),py=Math.PI/3,fy=2*Math.PI/3;function hu(r){var l=r.length;return function(u){return r[Math.max(0,Math.min(l-1,Math.floor(u*l)))]}}var gy=hu(Jt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),my=hu(Jt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vy=hu(Jt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),by=hu(Jt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function sn(r){return function(){return r}}var sm=Math.abs,da=Math.atan2,nl=Math.cos,yy=Math.max,tp=Math.min,sr=Math.sin,Fl=Math.sqrt,ua=1e-12,fo=Math.PI,pu=fo/2,go=2*fo;function rm(r){return r>=1?pu:r<=-1?-pu:Math.asin(r)}function wy(r){return r.innerRadius}function xy(r){return r.outerRadius}function Cy(r){return r.startAngle}function ky(r){return r.endAngle}function Ty(r){return r&&r.padAngle}function fu(r,l,u,h,g,v,x){var w=r-u,k=l-h,A=(x?v:-v)/Fl(w*w+k*k),D=A*k,B=-A*w,I=r+D,q=l+B,j=u+D,K=h+B,X=(I+j)/2,Y=(q+K)/2,ne=j-I,te=K-q,se=ne*ne+te*te,fe=g-v,ve=I*K-j*q,Ae=(te<0?-1:1)*Fl(yy(0,fe*fe*se-ve*ve)),qe=(ve*te-ne*Ae)/se,me=(-ve*ne-te*Ae)/se,Me=(ve*te+ne*Ae)/se,Se=(-ve*ne+te*Ae)/se,ie=qe-X,Ce=me-Y,we=Me-X,Ee=Se-Y;return ie*ie+Ce*Ce>we*we+Ee*Ee&&(qe=Me,me=Se),{cx:qe,cy:me,x01:-D,y01:-B,x11:qe*(g/fe-1),y11:me*(g/fe-1)}}function om(r){this._context=r}function gu(r){return new om(r)}function np(r){return r[0]}function ip(r){return r[1]}function ap(){var r=np,l=ip,u=sn(!0),h=null,g=gu,v=null;function x(w){var k,A,D,B=w.length,I=!1;for(null==h&&(v=g(D=Js())),k=0;k<=B;++k)!(k<B&&u(A=w[k],k,w))===I&&((I=!I)?v.lineStart():v.lineEnd()),I&&v.point(+r(A,k,w),+l(A,k,w));if(D)return v=null,D+""||null}return x.x=function(w){return arguments.length?(r="function"==typeof w?w:sn(+w),x):r},x.y=function(w){return arguments.length?(l="function"==typeof w?w:sn(+w),x):l},x.defined=function(w){return arguments.length?(u="function"==typeof w?w:sn(!!w),x):u},x.curve=function(w){return arguments.length?(g=w,null!=h&&(v=g(h)),x):g},x.context=function(w){return arguments.length?(null==w?h=v=null:v=g(h=w),x):h},x}function lm(){var r=np,l=null,u=sn(0),h=ip,g=sn(!0),v=null,x=gu,w=null;function k(D){var B,I,q,j,K,X=D.length,Y=!1,ne=new Array(X),te=new Array(X);for(null==v&&(w=x(K=Js())),B=0;B<=X;++B){if(!(B<X&&g(j=D[B],B,D))===Y)if(Y=!Y)I=B,w.areaStart(),w.lineStart();else{for(w.lineEnd(),w.lineStart(),q=B-1;q>=I;--q)w.point(ne[q],te[q]);w.lineEnd(),w.areaEnd()}Y&&(ne[B]=+r(j,B,D),te[B]=+u(j,B,D),w.point(l?+l(j,B,D):ne[B],h?+h(j,B,D):te[B]))}if(K)return w=null,K+""||null}function A(){return ap().defined(g).curve(x).context(v)}return k.x=function(D){return arguments.length?(r="function"==typeof D?D:sn(+D),l=null,k):r},k.x0=function(D){return arguments.length?(r="function"==typeof D?D:sn(+D),k):r},k.x1=function(D){return arguments.length?(l=null==D?null:"function"==typeof D?D:sn(+D),k):l},k.y=function(D){return arguments.length?(u="function"==typeof D?D:sn(+D),h=null,k):u},k.y0=function(D){return arguments.length?(u="function"==typeof D?D:sn(+D),k):u},k.y1=function(D){return arguments.length?(h=null==D?null:"function"==typeof D?D:sn(+D),k):h},k.lineX0=k.lineY0=function(){return A().x(r).y(u)},k.lineY1=function(){return A().x(r).y(h)},k.lineX1=function(){return A().x(l).y(u)},k.defined=function(D){return arguments.length?(g="function"==typeof D?D:sn(!!D),k):g},k.curve=function(D){return arguments.length?(x=D,null!=v&&(w=x(v)),k):x},k.context=function(D){return arguments.length?(null==D?v=w=null:w=x(v=D),k):v},k}function Ay(r,l){return l<r?-1:l>r?1:l>=r?0:NaN}function Sy(r){return r}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2;default:this._context.lineTo(r,l)}}};var cm=sp(gu);function dm(r){this._curve=r}function sp(r){function l(u){return new dm(r(u))}return l._curve=r,l}function Gc(r){var l=r.curve;return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r.curve=function(u){return arguments.length?l(sp(u)):l()._curve},r}function um(){return Gc(ap().curve(cm))}function hm(){var r=lm().curve(cm),l=r.curve,u=r.lineX0,h=r.lineX1,g=r.lineY0,v=r.lineY1;return r.angle=r.x,delete r.x,r.startAngle=r.x0,delete r.x0,r.endAngle=r.x1,delete r.x1,r.radius=r.y,delete r.y,r.innerRadius=r.y0,delete r.y0,r.outerRadius=r.y1,delete r.y1,r.lineStartAngle=function(){return Gc(u())},delete r.lineX0,r.lineEndAngle=function(){return Gc(h())},delete r.lineX1,r.lineInnerRadius=function(){return Gc(g())},delete r.lineY0,r.lineOuterRadius=function(){return Gc(v())},delete r.lineY1,r.curve=function(x){return arguments.length?l(sp(x)):l()._curve},r}function Yc(r,l){return[(l=+l)*Math.cos(r-=Math.PI/2),l*Math.sin(r)]}dm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(r,l){this._curve.point(l*Math.sin(r),l*-Math.cos(r))}};var rp=Array.prototype.slice;function Ey(r){return r.source}function $y(r){return r.target}function op(r){var l=Ey,u=$y,h=np,g=ip,v=null;function x(){var w,k=rp.call(arguments),A=l.apply(this,k),D=u.apply(this,k);if(v||(v=w=Js()),r(v,+h.apply(this,(k[0]=A,k)),+g.apply(this,k),+h.apply(this,(k[0]=D,k)),+g.apply(this,k)),w)return v=null,w+""||null}return x.source=function(w){return arguments.length?(l=w,x):l},x.target=function(w){return arguments.length?(u=w,x):u},x.x=function(w){return arguments.length?(h="function"==typeof w?w:sn(+w),x):h},x.y=function(w){return arguments.length?(g="function"==typeof w?w:sn(+w),x):g},x.context=function(w){return arguments.length?(v=w??null,x):v},x}function Dy(r,l,u,h,g){r.moveTo(l,u),r.bezierCurveTo(l=(l+h)/2,u,l,g,h,g)}function Iy(r,l,u,h,g){r.moveTo(l,u),r.bezierCurveTo(l,u=(u+g)/2,h,u,h,g)}function My(r,l,u,h,g){var v=Yc(l,u),x=Yc(l,u=(u+g)/2),w=Yc(h,u),k=Yc(h,g);r.moveTo(v[0],v[1]),r.bezierCurveTo(x[0],x[1],w[0],w[1],k[0],k[1])}var lp={draw:function(r,l){var u=Math.sqrt(l/fo);r.moveTo(u,0),r.arc(0,0,u,0,go)}},pm={draw:function(r,l){var u=Math.sqrt(l/5)/2;r.moveTo(-3*u,-u),r.lineTo(-u,-u),r.lineTo(-u,-3*u),r.lineTo(u,-3*u),r.lineTo(u,-u),r.lineTo(3*u,-u),r.lineTo(3*u,u),r.lineTo(u,u),r.lineTo(u,3*u),r.lineTo(-u,3*u),r.lineTo(-u,u),r.lineTo(-3*u,u),r.closePath()}},fm=Math.sqrt(1/3),Ly=2*fm,gm={draw:function(r,l){var u=Math.sqrt(l/Ly),h=u*fm;r.moveTo(0,-u),r.lineTo(h,0),r.lineTo(0,u),r.lineTo(-h,0),r.closePath()}},mm=Math.sin(fo/10)/Math.sin(7*fo/10),Py=Math.sin(go/10)*mm,Ny=-Math.cos(go/10)*mm,vm={draw:function(r,l){var u=Math.sqrt(.8908130915292852*l),h=Py*u,g=Ny*u;r.moveTo(0,-u),r.lineTo(h,g);for(var v=1;v<5;++v){var x=go*v/5,w=Math.cos(x),k=Math.sin(x);r.lineTo(k*u,-w*u),r.lineTo(w*h-k*g,k*h+w*g)}r.closePath()}},bm={draw:function(r,l){var u=Math.sqrt(l),h=-u/2;r.rect(h,h,u,u)}},cp=Math.sqrt(3),ym={draw:function(r,l){var u=-Math.sqrt(l/(3*cp));r.moveTo(0,2*u),r.lineTo(-cp*u,-u),r.lineTo(cp*u,-u),r.closePath()}},hs=Math.sqrt(3)/2,dp=1/Math.sqrt(12),Ry=3*(dp/2+1),wm={draw:function(r,l){var u=Math.sqrt(l/Ry),h=u/2,g=u*dp,v=h,x=u*dp+u,w=-v,k=x;r.moveTo(h,g),r.lineTo(v,x),r.lineTo(w,k),r.lineTo(-.5*h-hs*g,hs*h+-.5*g),r.lineTo(-.5*v-hs*x,hs*v+-.5*x),r.lineTo(-.5*w-hs*k,hs*w+-.5*k),r.lineTo(-.5*h+hs*g,-.5*g-hs*h),r.lineTo(-.5*v+hs*x,-.5*x-hs*v),r.lineTo(-.5*w+hs*k,-.5*k-hs*w),r.closePath()}},Oy=[lp,pm,gm,bm,vm,ym,wm];function mo(){}function mu(r,l,u){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+l)/6,(r._y0+4*r._y1+u)/6)}function vu(r){this._context=r}function xm(r){this._context=r}function Cm(r){this._context=r}function km(r,l){this._basis=new vu(r),this._beta=l}vu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,r,l)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=l}},xm.prototype={areaStart:mo,areaEnd:mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._x2=r,this._y2=l;break;case 1:this._point=2,this._x3=r,this._y3=l;break;case 2:this._point=3,this._x4=r,this._y4=l,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+l)/6);break;default:mu(this,r,l)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=l}},Cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var u=(this._x0+4*this._x1+r)/6,h=(this._y0+4*this._y1+l)/6;this._line?this._context.lineTo(u,h):this._context.moveTo(u,h);break;case 3:this._point=4;default:mu(this,r,l)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=l}},km.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var r=this._x,l=this._y,u=r.length-1;if(u>0)for(var h,g=r[0],v=l[0],x=r[u]-g,w=l[u]-v,k=-1;++k<=u;)this._basis.point(this._beta*r[k]+(1-this._beta)*(g+(h=k/u)*x),this._beta*l[k]+(1-this._beta)*(v+h*w));this._x=this._y=null,this._basis.lineEnd()},point:function(r,l){this._x.push(+r),this._y.push(+l)}};var By=function r(l){function u(h){return 1===l?new vu(h):new km(h,l)}return u.beta=function(h){return r(+h)},u}(.85);function bu(r,l,u){r._context.bezierCurveTo(r._x1+r._k*(r._x2-r._x0),r._y1+r._k*(r._y2-r._y0),r._x2+r._k*(r._x1-l),r._y2+r._k*(r._y1-u),r._x2,r._y2)}function up(r,l){this._context=r,this._k=(1-l)/6}up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2,this._x1=r,this._y1=l;break;case 2:this._point=3;default:bu(this,r,l)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var _y=function r(l){function u(h){return new up(h,l)}return u.tension=function(h){return r(+h)},u}(0);function hp(r,l){this._context=r,this._k=(1-l)/6}hp.prototype={areaStart:mo,areaEnd:mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._x3=r,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=l);break;case 2:this._point=3,this._x5=r,this._y5=l;break;default:bu(this,r,l)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var zy=function r(l){function u(h){return new hp(h,l)}return u.tension=function(h){return r(+h)},u}(0);function pp(r,l){this._context=r,this._k=(1-l)/6}pp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bu(this,r,l)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Fy=function r(l){function u(h){return new pp(h,l)}return u.tension=function(h){return r(+h)},u}(0);function fp(r,l,u){var h=r._x1,g=r._y1,v=r._x2,x=r._y2;if(r._l01_a>ua){var w=2*r._l01_2a+3*r._l01_a*r._l12_a+r._l12_2a,k=3*r._l01_a*(r._l01_a+r._l12_a);h=(h*w-r._x0*r._l12_2a+r._x2*r._l01_2a)/k,g=(g*w-r._y0*r._l12_2a+r._y2*r._l01_2a)/k}if(r._l23_a>ua){var A=2*r._l23_2a+3*r._l23_a*r._l12_a+r._l12_2a,D=3*r._l23_a*(r._l23_a+r._l12_a);v=(v*A+r._x1*r._l23_2a-l*r._l12_2a)/D,x=(x*A+r._y1*r._l23_2a-u*r._l12_2a)/D}r._context.bezierCurveTo(h,g,v,x,r._x2,r._y2)}function Tm(r,l){this._context=r,this._alpha=l}Tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){if(r=+r,l=+l,this._point){var u=this._x2-r,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2;break;case 2:this._point=3;default:fp(this,r,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Hy=function r(l){function u(h){return l?new Tm(h,l):new up(h,0)}return u.alpha=function(h){return r(+h)},u}(.5);function Am(r,l){this._context=r,this._alpha=l}Am.prototype={areaStart:mo,areaEnd:mo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,l){if(r=+r,l=+l,this._point){var u=this._x2-r,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=r,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=l);break;case 2:this._point=3,this._x5=r,this._y5=l;break;default:fp(this,r,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var qy=function r(l){function u(h){return l?new Am(h,l):new hp(h,0)}return u.alpha=function(h){return r(+h)},u}(.5);function Sm(r,l){this._context=r,this._alpha=l}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){if(r=+r,l=+l,this._point){var u=this._x2-r,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fp(this,r,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Vy=function r(l){function u(h){return l?new Sm(h,l):new pp(h,0)}return u.alpha=function(h){return r(+h)},u}(.5);function Em(r){this._context=r}function $m(r){return r<0?-1:1}function Dm(r,l,u){var h=r._x1-r._x0,g=l-r._x1,v=(r._y1-r._y0)/(h||g<0&&-0),x=(u-r._y1)/(g||h<0&&-0),w=(v*g+x*h)/(h+g);return($m(v)+$m(x))*Math.min(Math.abs(v),Math.abs(x),.5*Math.abs(w))||0}function Im(r,l){var u=r._x1-r._x0;return u?(3*(r._y1-r._y0)/u-l)/2:l}function gp(r,l,u){var h=r._x0,v=r._x1,x=r._y1,w=(v-h)/3;r._context.bezierCurveTo(h+w,r._y0+w*l,v-w,x-w*u,v,x)}function yu(r){this._context=r}function Mm(r){this._context=new Lm(r)}function Lm(r){this._context=r}function Pm(r){this._context=r}function Nm(r){var l,u,h=r.length-1,g=new Array(h),v=new Array(h),x=new Array(h);for(g[0]=0,v[0]=2,x[0]=r[0]+2*r[1],l=1;l<h-1;++l)g[l]=1,v[l]=4,x[l]=4*r[l]+2*r[l+1];for(g[h-1]=2,v[h-1]=7,x[h-1]=8*r[h-1]+r[h],l=1;l<h;++l)v[l]-=u=g[l]/v[l-1],x[l]-=u*x[l-1];for(g[h-1]=x[h-1]/v[h-1],l=h-2;l>=0;--l)g[l]=(x[l]-g[l+1])/v[l];for(v[h-1]=(r[h]+g[h-1])/2,l=0;l<h-1;++l)v[l]=2*r[l+1]-g[l+1];return[g,v]}function wu(r,l){this._context=r,this._t=l}function Hl(r,l){if((g=r.length)>1)for(var u,h,g,v=1,x=r[l[0]],w=x.length;v<g;++v)for(h=x,x=r[l[v]],u=0;u<w;++u)x[u][1]+=x[u][0]=isNaN(h[u][1])?h[u][0]:h[u][1]}function ql(r){for(var l=r.length,u=new Array(l);--l>=0;)u[l]=l;return u}function jy(r,l){return r[l]}function Rm(r){var l=r.map(Wy);return ql(r).sort(function(u,h){return l[u]-l[h]})}function Wy(r){for(var l,u=-1,h=0,g=r.length,v=-1/0;++u<g;)(l=+r[u][1])>v&&(v=l,h=u);return h}function Om(r){var l=r.map(Bm);return ql(r).sort(function(u,h){return l[u]-l[h]})}function Bm(r){for(var l,u=0,h=-1,g=r.length;++h<g;)(l=+r[h][1])&&(u+=l);return u}function _m(r){return function(){return r}}function Uy(r){return r[0]}function Gy(r){return r[1]}function xu(){this._=null}function Cu(r){r.U=r.C=r.L=r.R=r.P=r.N=null}function Kc(r,l){var u=l,h=l.R,g=u.U;g?g.L===u?g.L=h:g.R=h:r._=h,h.U=g,u.U=h,u.R=h.L,u.R&&(u.R.U=u),h.L=u}function Xc(r,l){var u=l,h=l.L,g=u.U;g?g.L===u?g.L=h:g.R=h:r._=h,h.U=g,u.U=h,u.L=h.R,u.L&&(u.L.U=u),h.R=u}function zm(r){for(;r.L;)r=r.L;return r}function Qc(r,l,u,h){var g=[null,null],v=ha.push(g)-1;return g.left=r,g.right=l,u&&ku(g,r,l,u),h&&ku(g,l,r,h),Wa[r.index].halfedges.push(v),Wa[l.index].halfedges.push(v),g}function Jc(r,l,u){var h=[l,u];return h.left=r,h}function ku(r,l,u,h){r[0]||r[1]?r.left===u?r[1]=h:r[0]=h:(r[0]=h,r.left=l,r.right=u)}function Yy(r,l,u,h,g){var v,x=r[0],w=r[1],k=x[0],A=x[1],D=0,B=1,I=w[0]-k,q=w[1]-A;if(v=l-k,I||!(v>0)){if(v/=I,I<0){if(v<D)return;v<B&&(B=v)}else if(I>0){if(v>B)return;v>D&&(D=v)}if(v=h-k,I||!(v<0)){if(v/=I,I<0){if(v>B)return;v>D&&(D=v)}else if(I>0){if(v<D)return;v<B&&(B=v)}if(v=u-A,q||!(v>0)){if(v/=q,q<0){if(v<D)return;v<B&&(B=v)}else if(q>0){if(v>B)return;v>D&&(D=v)}if(v=g-A,q||!(v<0)){if(v/=q,q<0){if(v>B)return;v>D&&(D=v)}else if(q>0){if(v<D)return;v<B&&(B=v)}return!(D>0||B<1)||(D>0&&(r[0]=[k+D*I,A+D*q]),B<1&&(r[1]=[k+B*I,A+B*q]),!0)}}}}}function Ky(r,l,u,h,g){var v=r[1];if(v)return!0;var x,w,k=r[0],A=r.left,D=r.right,B=A[0],I=A[1],q=D[0],j=D[1],K=(B+q)/2;if(j===I){if(K<l||K>=h)return;if(B>q){if(k){if(k[1]>=g)return}else k=[K,u];v=[K,g]}else{if(k){if(k[1]<u)return}else k=[K,g];v=[K,u]}}else if(w=(I+j)/2-(x=(B-q)/(j-I))*K,x<-1||x>1)if(B>q){if(k){if(k[1]>=g)return}else k=[(u-w)/x,u];v=[(g-w)/x,g]}else{if(k){if(k[1]<u)return}else k=[(g-w)/x,g];v=[(u-w)/x,u]}else if(I<j){if(k){if(k[0]>=h)return}else k=[l,x*l+w];v=[h,x*h+w]}else{if(k){if(k[0]<l)return}else k=[h,x*h+w];v=[l,x*l+w]}return r[0]=k,r[1]=v,!0}function Xy(r,l){var u=r.site,h=l.left,g=l.right;return u===g&&(g=h,h=u),g?Math.atan2(g[1]-h[1],g[0]-h[0]):(u===h?(h=l[1],g=l[0]):(h=l[0],g=l[1]),Math.atan2(h[0]-g[0],g[1]-h[1]))}function Fm(r,l){return l[+(l.left!==r.site)]}function Qy(r,l){return l[+(l.left===r.site)]}Em.prototype={areaStart:mo,areaEnd:mo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,l){r=+r,l=+l,this._point?this._context.lineTo(r,l):(this._point=1,this._context.moveTo(r,l))}},yu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gp(this,this._t0,Im(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,l){var u=NaN;if(l=+l,(r=+r)!==this._x1||l!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2;break;case 2:this._point=3,gp(this,Im(this,u=Dm(this,r,l)),u);break;default:gp(this,this._t0,u=Dm(this,r,l))}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=l,this._t0=u}}},(Mm.prototype=Object.create(yu.prototype)).point=function(r,l){yu.prototype.point.call(this,l,r)},Lm.prototype={moveTo:function(r,l){this._context.moveTo(l,r)},closePath:function(){this._context.closePath()},lineTo:function(r,l){this._context.lineTo(l,r)},bezierCurveTo:function(r,l,u,h,g,v){this._context.bezierCurveTo(l,r,h,u,v,g)}},Pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,l=this._y,u=r.length;if(u)if(this._line?this._context.lineTo(r[0],l[0]):this._context.moveTo(r[0],l[0]),2===u)this._context.lineTo(r[1],l[1]);else for(var h=Nm(r),g=Nm(l),v=0,x=1;x<u;++v,++x)this._context.bezierCurveTo(h[0][v],g[0][v],h[1][v],g[1][v],r[x],l[x]);(this._line||0!==this._line&&1===u)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,l){this._x.push(+r),this._y.push(+l)}},wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,l){switch(r=+r,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,l):this._context.moveTo(r,l);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,l),this._context.lineTo(r,l);else{var u=this._x*(1-this._t)+r*this._t;this._context.lineTo(u,this._y),this._context.lineTo(u,l)}}this._x=r,this._y=l}},xu.prototype={constructor:xu,insert:function(r,l){var u,h,g;if(r){if(l.P=r,l.N=r.N,r.N&&(r.N.P=l),r.N=l,r.R){for(r=r.R;r.L;)r=r.L;r.L=l}else r.R=l;u=r}else this._?(r=zm(this._),l.P=null,l.N=r,r.P=r.L=l,u=r):(l.P=l.N=null,this._=l,u=null);for(l.L=l.R=null,l.U=u,l.C=!0,r=l;u&&u.C;)u===(h=u.U).L?(g=h.R)&&g.C?(u.C=g.C=!1,h.C=!0,r=h):(r===u.R&&(Kc(this,u),u=(r=u).U),u.C=!1,h.C=!0,Xc(this,h)):(g=h.L)&&g.C?(u.C=g.C=!1,h.C=!0,r=h):(r===u.L&&(Xc(this,u),u=(r=u).U),u.C=!1,h.C=!0,Kc(this,h)),u=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var l,u,h,g=r.U,v=r.L,x=r.R;if(u=v?x?zm(x):v:x,g?g.L===r?g.L=u:g.R=u:this._=u,v&&x?(h=u.C,u.C=r.C,u.L=v,v.U=u,u!==x?(g=u.U,u.U=r.U,g.L=r=u.R,u.R=x,x.U=u):(u.U=g,g=u,r=u.R)):(h=r.C,r=u),r&&(r.U=g),!h)if(r&&r.C)r.C=!1;else{do{if(r===this._)break;if(r===g.L){if((l=g.R).C&&(l.C=!1,g.C=!0,Kc(this,g),l=g.R),l.L&&l.L.C||l.R&&l.R.C){l.R&&l.R.C||(l.L.C=!1,l.C=!0,Xc(this,l),l=g.R),l.C=g.C,g.C=l.R.C=!1,Kc(this,g),r=this._;break}}else if((l=g.L).C&&(l.C=!1,g.C=!0,Xc(this,g),l=g.L),l.L&&l.L.C||l.R&&l.R.C){l.L&&l.L.C||(l.R.C=!1,l.C=!0,Kc(this,l),l=g.L),l.C=g.C,g.C=l.L.C=!1,Xc(this,g),r=this._;break}l.C=!0,r=g,g=g.U}while(!r.C);r&&(r.C=!1)}}};var mp,Hm=[];function Jy(){Cu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vl(r){var l=r.P,u=r.N;if(l&&u){var h=l.site,g=r.site,v=u.site;if(h!==v){var x=g[0],w=g[1],k=h[0]-x,A=h[1]-w,D=v[0]-x,B=v[1]-w,I=2*(k*B-A*D);if(!(I>=-i1)){var q=k*k+A*A,j=D*D+B*B,K=(B*q-A*j)/I,X=(k*j-D*q)/I,Y=Hm.pop()||new Jy;Y.arc=r,Y.site=g,Y.x=K+x,Y.y=(Y.cy=X+w)+Math.sqrt(K*K+X*X),r.circle=Y;for(var ne=null,te=Zc._;te;)if(Y.y<te.y||Y.y===te.y&&Y.x<=te.x){if(!te.L){ne=te.P;break}te=te.L}else{if(!te.R){ne=te;break}te=te.R}Zc.insert(ne,Y),ne||(mp=Y)}}}}function jl(r){var l=r.circle;l&&(l.P||(mp=l.N),Zc.remove(l),Hm.push(l),Cu(l),r.circle=null)}var qm=[];function Zy(){Cu(this),this.edge=this.site=this.circle=null}function Vm(r){var l=qm.pop()||new Zy;return l.site=r,l}function vp(r){jl(r),Wl.remove(r),qm.push(r),Cu(r)}function e1(r){var l=r.circle,u=l.x,h=l.cy,g=[u,h],v=r.P,x=r.N,w=[r];vp(r);for(var k=v;k.circle&&Math.abs(u-k.circle.x)<_n&&Math.abs(h-k.circle.cy)<_n;)v=k.P,w.unshift(k),vp(k),k=v;w.unshift(k),jl(k);for(var A=x;A.circle&&Math.abs(u-A.circle.x)<_n&&Math.abs(h-A.circle.cy)<_n;)x=A.N,w.push(A),vp(A),A=x;w.push(A),jl(A);var D,B=w.length;for(D=1;D<B;++D)ku((A=w[D]).edge,(k=w[D-1]).site,A.site,g);(A=w[B-1]).edge=Qc((k=w[0]).site,A.site,null,g),Vl(k),Vl(A)}function t1(r){for(var l,u,h,g,v=r[0],x=r[1],w=Wl._;w;)if((h=jm(w,x)-v)>_n)w=w.L;else{if(!((g=v-n1(w,x))>_n)){h>-_n?(l=w.P,u=w):g>-_n?(l=w,u=w.N):l=u=w;break}if(!w.R){l=w;break}w=w.R}var fe;Wa[(fe=r).index]={site:fe,halfedges:[]};var k=Vm(r);if(Wl.insert(l,k),l||u){if(l===u)return jl(l),u=Vm(l.site),Wl.insert(k,u),k.edge=u.edge=Qc(l.site,k.site),Vl(l),void Vl(u);if(u){jl(l),jl(u);var A=l.site,D=A[0],B=A[1],I=r[0]-D,q=r[1]-B,j=u.site,K=j[0]-D,X=j[1]-B,Y=2*(I*X-q*K),ne=I*I+q*q,te=K*K+X*X,se=[(X*ne-q*te)/Y+D,(I*te-K*ne)/Y+B];ku(u.edge,A,j,se),k.edge=Qc(A,r,null,se),u.edge=Qc(r,j,null,se),Vl(l),Vl(u)}else k.edge=Qc(l.site,k.site)}}function jm(r,l){var u=r.site,h=u[0],g=u[1],v=g-l;if(!v)return h;var x=r.P;if(!x)return-1/0;var w=(u=x.site)[0],k=u[1],A=k-l;if(!A)return w;var D=w-h,B=1/v-1/A,I=D/A;return B?(-I+Math.sqrt(I*I-2*B*(D*D/(-2*A)-k+A/2+g-v/2)))/B+h:(h+w)/2}function n1(r,l){var u=r.N;if(u)return jm(u,l);var h=r.site;return h[1]===l?h[0]:1/0}var Wl,Wa,Zc,ha,_n=1e-6,i1=1e-12;function a1(r,l,u){return(r[0]-u[0])*(l[1]-r[1])-(r[0]-l[0])*(u[1]-r[1])}function s1(r,l){return l[1]-r[1]||l[0]-r[0]}function bp(r,l){var u,h,g,v=r.sort(s1).pop();for(ha=[],Wa=new Array(r.length),Wl=new xu,Zc=new xu;;)if(g=mp,v&&(!g||v[1]<g.y||v[1]===g.y&&v[0]<g.x))v[0]===u&&v[1]===h||(t1(v),u=v[0],h=v[1]),v=r.pop();else{if(!g)break;e1(g.arc)}if(function(){for(var D,B,I,q,j=0,K=Wa.length;j<K;++j)if((D=Wa[j])&&(q=(B=D.halfedges).length)){var X=new Array(q),Y=new Array(q);for(I=0;I<q;++I)X[I]=I,Y[I]=Xy(D,ha[B[I]]);for(X.sort(function(ne,te){return Y[te]-Y[ne]}),I=0;I<q;++I)Y[I]=B[X[I]];for(I=0;I<q;++I)B[I]=Y[I]}}(),l){var x=+l[0][0],w=+l[0][1],k=+l[1][0],A=+l[1][1];(function(D,B,I,q){for(var j,K=ha.length;K--;)Ky(j=ha[K],D,B,I,q)&&Yy(j,D,B,I,q)&&(Math.abs(j[0][0]-j[1][0])>_n||Math.abs(j[0][1]-j[1][1])>_n)||delete ha[K]})(x,w,k,A),function(D,B,I,q){var j,K,X,Y,ne,te,se,fe,ve,Ae,qe,me,Me=Wa.length,Se=!0;for(j=0;j<Me;++j)if(K=Wa[j]){for(X=K.site,Y=(ne=K.halfedges).length;Y--;)ha[ne[Y]]||ne.splice(Y,1);for(Y=0,te=ne.length;Y<te;)qe=(Ae=Qy(K,ha[ne[Y]]))[0],me=Ae[1],fe=(se=Fm(K,ha[ne[++Y%te]]))[0],ve=se[1],(Math.abs(qe-fe)>_n||Math.abs(me-ve)>_n)&&(ne.splice(Y,0,ha.push(Jc(X,Ae,Math.abs(qe-D)<_n&&q-me>_n?[D,Math.abs(fe-D)<_n?ve:q]:Math.abs(me-q)<_n&&I-qe>_n?[Math.abs(ve-q)<_n?fe:I,q]:Math.abs(qe-I)<_n&&me-B>_n?[I,Math.abs(fe-I)<_n?ve:B]:Math.abs(me-B)<_n&&qe-D>_n?[Math.abs(ve-B)<_n?fe:D,B]:null))-1),++te);te&&(Se=!1)}if(Se){var ie,Ce,we,Ee=1/0;for(j=0,Se=null;j<Me;++j)(K=Wa[j])&&(we=(ie=(X=K.site)[0]-D)*ie+(Ce=X[1]-B)*Ce)<Ee&&(Ee=we,Se=K);if(Se){var Fe=[D,B],ct=[D,q],It=[I,q],Ot=[I,B];Se.halfedges.push(ha.push(Jc(X=Se.site,Fe,ct))-1,ha.push(Jc(X,ct,It))-1,ha.push(Jc(X,It,Ot))-1,ha.push(Jc(X,Ot,Fe))-1)}}for(j=0;j<Me;++j)(K=Wa[j])&&(K.halfedges.length||delete Wa[j])}(x,w,k,A)}this.edges=ha,this.cells=Wa,Wl=Zc=ha=Wa=null}function Tu(r){return function(){return r}}function r1(r,l,u){this.target=r,this.type=l,this.transform=u}function Nr(r,l,u){this.k=r,this.x=l,this.y=u}bp.prototype={constructor:bp,polygons:function(){var r=this.edges;return this.cells.map(function(l){var u=l.halfedges.map(function(h){return Fm(l,r[h])});return u.data=l.site.data,u})},triangles:function(){var r=[],l=this.edges;return this.cells.forEach(function(u,h){if(v=(g=u.halfedges).length)for(var g,v,x,w=u.site,k=-1,A=l[g[v-1]],D=A.left===w?A.right:A.left;++k<v;)x=D,D=(A=l[g[k]]).left===w?A.right:A.left,x&&D&&h<x.index&&h<D.index&&a1(w,x,D)<0&&r.push([w.data,x.data,D.data])}),r},links:function(){return this.edges.filter(function(r){return r.right}).map(function(r){return{source:r.left.data,target:r.right.data}})},find:function(r,l,u){for(var h,g,v=this,x=v._found||0,w=v.cells.length;!(g=v.cells[x]);)if(++x>=w)return null;var k=r-g.site[0],A=l-g.site[1],D=k*k+A*A;do{g=v.cells[h=x],x=null,g.halfedges.forEach(function(B){var I=v.edges[B],q=I.left;if(q!==g.site&&q||(q=I.right)){var j=r-q[0],K=l-q[1],X=j*j+K*K;X<D&&(D=X,x=q.index)}})}while(null!==x);return v._found=h,null==u||D<=u*u?g.site:null}},Nr.prototype={constructor:Nr,scale:function(r){return 1===r?this:new Nr(this.k*r,this.x,this.y)},translate:function(r,l){return 0===r&0===l?this:new Nr(this.k,this.x+this.k*r,this.y+this.k*l)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Au=new Nr(1,0,0);function Wm(r){for(;!r.__zoom;)if(!(r=r.parentNode))return Au;return r.__zoom}function yp(){R.event.stopImmediatePropagation()}function ed(){R.event.preventDefault(),R.event.stopImmediatePropagation()}function o1(){return!R.event.ctrlKey&&!R.event.button}function l1(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r).hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]:[[0,0],[r.clientWidth,r.clientHeight]]}function Um(){return this.__zoom||Au}function c1(){return-R.event.deltaY*(1===R.event.deltaMode?.05:R.event.deltaMode?1:.002)}function d1(){return navigator.maxTouchPoints||"ontouchstart"in this}function u1(r,l,u){var h=r.invertX(l[0][0])-u[0][0],g=r.invertX(l[1][0])-u[1][0],v=r.invertY(l[0][1])-u[0][1],x=r.invertY(l[1][1])-u[1][1];return r.translate(g>h?(h+g)/2:Math.min(0,h)||Math.max(0,g),x>v?(v+x)/2:Math.min(0,v)||Math.max(0,x))}Wm.prototype=Nr.prototype,R.FormatSpecifier=yt,R.active=function(r,l){var u,h,g=r.__transition;if(g)for(h in l=null==l?null:l+"",g)if((u=g[h]).state>1&&u.name===l)return new St([[r]],dd,l,+h);return null},R.arc=function(){var r=wy,l=xy,u=sn(0),h=null,g=Cy,v=ky,x=Ty,w=null;function k(){var A,D,rr,B=+r.apply(this,arguments),I=+l.apply(this,arguments),q=g.apply(this,arguments)-pu,j=v.apply(this,arguments)-pu,K=sm(j-q),X=j>q;if(w||(w=A=Js()),I<B&&(D=I,I=B,B=D),I>ua)if(K>go-ua)w.moveTo(I*nl(q),I*sr(q)),w.arc(0,0,I,q,j,!X),B>ua&&(w.moveTo(B*nl(j),B*sr(j)),w.arc(0,0,B,j,q,X));else{var Y,ne,te=q,se=j,fe=q,ve=j,Ae=K,qe=K,me=x.apply(this,arguments)/2,Me=me>ua&&(h?+h.apply(this,arguments):Fl(B*B+I*I)),Se=tp(sm(I-B)/2,+u.apply(this,arguments)),ie=Se,Ce=Se;if(Me>ua){var we=rm(Me/B*sr(me)),Ee=rm(Me/I*sr(me));(Ae-=2*we)>ua?(fe+=we*=X?1:-1,ve-=we):(Ae=0,fe=ve=(q+j)/2),(qe-=2*Ee)>ua?(te+=Ee*=X?1:-1,se-=Ee):(qe=0,te=se=(q+j)/2)}var Fe=I*nl(te),ct=I*sr(te),It=B*nl(ve),Ot=B*sr(ve);if(Se>ua){var Qt,gt=I*nl(se),rn=I*sr(se),dn=B*nl(fe),Ct=B*sr(fe);if(K<fo&&(Qt=function(rr,Or,Su,Eu,Br,td,yi,h1){var Gm=Su-rr,Ym=Eu-Or,Km=yi-Br,Xm=h1-td,nd=Xm*Gm-Km*Ym;if(!(nd*nd<ua))return[rr+(nd=(Km*(Or-td)-Xm*(rr-Br))/nd)*Gm,Or+nd*Ym]}(Fe,ct,dn,Ct,gt,rn,It,Ot))){var Vt=Fe-Qt[0],ri=ct-Qt[1],ea=gt-Qt[0],Rr=rn-Qt[1],vo=1/sr(((rr=(Vt*ea+ri*Rr)/(Fl(Vt*Vt+ri*ri)*Fl(ea*ea+Rr*Rr)))>1?0:rr<-1?fo:Math.acos(rr))/2),bo=Fl(Qt[0]*Qt[0]+Qt[1]*Qt[1]);ie=tp(Se,(B-bo)/(vo-1)),Ce=tp(Se,(I-bo)/(vo+1))}}qe>ua?Ce>ua?(Y=fu(dn,Ct,Fe,ct,I,Ce,X),ne=fu(gt,rn,It,Ot,I,Ce,X),w.moveTo(Y.cx+Y.x01,Y.cy+Y.y01),Ce<Se?w.arc(Y.cx,Y.cy,Ce,da(Y.y01,Y.x01),da(ne.y01,ne.x01),!X):(w.arc(Y.cx,Y.cy,Ce,da(Y.y01,Y.x01),da(Y.y11,Y.x11),!X),w.arc(0,0,I,da(Y.cy+Y.y11,Y.cx+Y.x11),da(ne.cy+ne.y11,ne.cx+ne.x11),!X),w.arc(ne.cx,ne.cy,Ce,da(ne.y11,ne.x11),da(ne.y01,ne.x01),!X))):(w.moveTo(Fe,ct),w.arc(0,0,I,te,se,!X)):w.moveTo(Fe,ct),B>ua&&Ae>ua?ie>ua?(Y=fu(It,Ot,gt,rn,B,-ie,X),ne=fu(Fe,ct,dn,Ct,B,-ie,X),w.lineTo(Y.cx+Y.x01,Y.cy+Y.y01),ie<Se?w.arc(Y.cx,Y.cy,ie,da(Y.y01,Y.x01),da(ne.y01,ne.x01),!X):(w.arc(Y.cx,Y.cy,ie,da(Y.y01,Y.x01),da(Y.y11,Y.x11),!X),w.arc(0,0,B,da(Y.cy+Y.y11,Y.cx+Y.x11),da(ne.cy+ne.y11,ne.cx+ne.x11),X),w.arc(ne.cx,ne.cy,ie,da(ne.y11,ne.x11),da(ne.y01,ne.x01),!X))):w.arc(0,0,B,ve,fe,X):w.lineTo(It,Ot)}else w.moveTo(0,0);if(w.closePath(),A)return w=null,A+""||null}return k.centroid=function(){var A=(+r.apply(this,arguments)+ +l.apply(this,arguments))/2,D=(+g.apply(this,arguments)+ +v.apply(this,arguments))/2-fo/2;return[nl(D)*A,sr(D)*A]},k.innerRadius=function(A){return arguments.length?(r="function"==typeof A?A:sn(+A),k):r},k.outerRadius=function(A){return arguments.length?(l="function"==typeof A?A:sn(+A),k):l},k.cornerRadius=function(A){return arguments.length?(u="function"==typeof A?A:sn(+A),k):u},k.padRadius=function(A){return arguments.length?(h=null==A?null:"function"==typeof A?A:sn(+A),k):h},k.startAngle=function(A){return arguments.length?(g="function"==typeof A?A:sn(+A),k):g},k.endAngle=function(A){return arguments.length?(v="function"==typeof A?A:sn(+A),k):v},k.padAngle=function(A){return arguments.length?(x="function"==typeof A?A:sn(+A),k):x},k.context=function(A){return arguments.length?(w=A??null,k):w},k},R.area=lm,R.areaRadial=hm,R.ascending=wi,R.autoType=function(r){for(var l in r){var u,h,g=r[l].trim();if(g)if("true"===g)g=!0;else if("false"===g)g=!1;else if("NaN"===g)g=NaN;else if(isNaN(u=+g)){if(!(h=g.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ot&&h[4]&&!h[7]&&(g=g.replace(/-/g,"/").replace(/T/," ")),g=new Date(g)}else g=u;else g=null;r[l]=g}return r},R.axisBottom=function(r){return Ga(3,r)},R.axisLeft=function(r){return Ga(4,r)},R.axisRight=function(r){return Ga(2,r)},R.axisTop=function(r){return Ga(1,r)},R.bisect=Si,R.bisectLeft=wo,R.bisectRight=Si,R.bisector=Fi,R.blob=function(r,l){return fetch(r,l).then(Ze)},R.brush=function(){return xn(hd)},R.brushSelection=function(r){var l=r.__brush;return l?l.dim.output(l.selection):null},R.brushX=function(){return xn(qo)},R.brushY=function(){return xn(ro)},R.buffer=function(r,l){return fetch(r,l).then(ft)},R.chord=function(){var r=0,l=null,u=null,h=null;function g(v){var x,w,k,A,D,B,I=v.length,q=[],j=it(I),K=[],X=[],Y=X.groups=new Array(I),ne=new Array(I*I);for(x=0,D=-1;++D<I;){for(w=0,B=-1;++B<I;)w+=v[D][B];q.push(w),K.push(it(I)),x+=w}for(l&&j.sort(function(Me,Se){return l(q[Me],q[Se])}),u&&K.forEach(function(Me,Se){Me.sort(function(ie,Ce){return u(v[Se][ie],v[Se][Ce])})}),A=(x=bd(0,ic-r*I)/x)?r:ic/I,w=0,D=-1;++D<I;){for(k=w,B=-1;++B<I;){var te=j[D],se=K[te][B],fe=v[te][se],ve=w,Ae=w+=fe*x;ne[se*I+te]={index:te,subindex:se,startAngle:ve,endAngle:Ae,value:fe}}Y[te]={index:te,startAngle:k,endAngle:w,value:q[te]},w+=A}for(D=-1;++D<I;)for(B=D-1;++B<I;){var qe=ne[B*I+D],me=ne[D*I+B];(qe.value||me.value)&&X.push(qe.value<me.value?{source:me,target:qe}:{source:qe,target:me})}return h?X.sort(h):X}return g.padAngle=function(v){return arguments.length?(r=bd(0,v),g):r},g.sortGroups=function(v){return arguments.length?(l=v,g):l},g.sortSubgroups=function(v){return arguments.length?(u=v,g):u},g.sortChords=function(v){return arguments.length?(null==v?h=null:(h=ac(v))._=v,g):h&&h._},g},R.clientPoint=ur,R.cluster=function(){var r=Sv,l=1,u=1,h=!1;function g(v){var x,w=0;v.eachAfter(function(I){var j,q=I.children;q?(I.x=(j=q).reduce(Ev,0)/j.length,I.y=function(j){return 1+j.reduce($v,0)}(q)):(I.x=x?w+=r(I,x):0,I.y=0,x=I)});var k=function(I){for(var q;q=I.children;)I=q[0];return I}(v),A=function(I){for(var q;q=I.children;)I=q[q.length-1];return I}(v),D=k.x-r(k,A)/2,B=A.x+r(A,k)/2;return v.eachAfter(h?function(I){I.x=(I.x-v.x)*l,I.y=(v.y-I.y)*u}:function(I){I.x=(I.x-D)/(B-D)*l,I.y=(1-(v.y?I.y/v.y:1))*u})}return g.separation=function(v){return arguments.length?(r=v,g):r},g.size=function(v){return arguments.length?(h=!1,l=+v[0],u=+v[1],g):h?null:[l,u]},g.nodeSize=function(v){return arguments.length?(h=!0,l=+v[0],u=+v[1],g):h?[l,u]:null},g},R.color=na,R.contourDensity=function(){var r=s,l=o,u=c,h=960,g=500,v=20,x=2,w=3*v,k=h+2*w>>x,A=g+2*w>>x,D=Zs(20);function B(Y){var ne=new Float32Array(k*A),te=new Float32Array(k*A);Y.forEach(function(ve,Ae,qe){var me=+r(ve,Ae,qe)+w>>x,Me=+l(ve,Ae,qe)+w>>x,Se=+u(ve,Ae,qe);me>=0&&me<k&&Me>=0&&Me<A&&(ne[me+Me*k]+=Se)}),i({width:k,height:A,data:ne},{width:k,height:A,data:te},v>>x),a({width:k,height:A,data:te},{width:k,height:A,data:ne},v>>x),i({width:k,height:A,data:ne},{width:k,height:A,data:te},v>>x),a({width:k,height:A,data:te},{width:k,height:A,data:ne},v>>x),i({width:k,height:A,data:ne},{width:k,height:A,data:te},v>>x),a({width:k,height:A,data:te},{width:k,height:A,data:ne},v>>x);var se=D(ne);if(!Array.isArray(se)){var fe=_(ne);se=Ta(0,fe,se),(se=it(0,Math.floor(fe/se)*se,se)).shift()}return n().thresholds(se).size([k,A])(ne).map(I)}function I(Y){return Y.value*=Math.pow(2,-2*x),Y.coordinates.forEach(q),Y}function q(Y){Y.forEach(j)}function j(Y){Y.forEach(K)}function K(Y){Y[0]=Y[0]*Math.pow(2,x)-w,Y[1]=Y[1]*Math.pow(2,x)-w}function X(){return k=h+2*(w=3*v)>>x,A=g+2*w>>x,B}return B.x=function(Y){return arguments.length?(r="function"==typeof Y?Y:Zs(+Y),B):r},B.y=function(Y){return arguments.length?(l="function"==typeof Y?Y:Zs(+Y),B):l},B.weight=function(Y){return arguments.length?(u="function"==typeof Y?Y:Zs(+Y),B):u},B.size=function(Y){if(!arguments.length)return[h,g];var ne=Math.ceil(Y[0]),te=Math.ceil(Y[1]);if(!(ne>=0||ne>=0))throw new Error("invalid size");return h=ne,g=te,X()},B.cellSize=function(Y){if(!arguments.length)return 1<<x;if(!((Y=+Y)>=1))throw new Error("invalid cell size");return x=Math.floor(Math.log(Y)/Math.LN2),X()},B.thresholds=function(Y){return arguments.length?(D="function"==typeof Y?Y:Array.isArray(Y)?Zs(Cd.call(Y)):Zs(Y),B):D},B.bandwidth=function(Y){if(!arguments.length)return Math.sqrt(v*(v+1));if(!((Y=+Y)>=0))throw new Error("invalid bandwidth");return v=Math.round((Math.sqrt(4*Y*Y+1)-1)/2),X()},B},R.contours=n,R.create=function(r){return Gn(oi(r).call(document.documentElement))},R.creator=oi,R.cross=function(r,l,u){var h,g,v,x,w=r.length,k=l.length,A=new Array(w*k);for(null==u&&(u=La),h=v=0;h<w;++h)for(x=r[h],g=0;g<k;++g,++v)A[v]=u(x,l[g]);return A},R.csv=Ut,R.csvFormat=U,R.csvFormatBody=G,R.csvFormatRow=oe,R.csvFormatRows=Z,R.csvFormatValue=le,R.csvParse=V,R.csvParseRows=N,R.cubehelix=W,R.curveBasis=function(r){return new vu(r)},R.curveBasisClosed=function(r){return new xm(r)},R.curveBasisOpen=function(r){return new Cm(r)},R.curveBundle=By,R.curveCardinal=_y,R.curveCardinalClosed=zy,R.curveCardinalOpen=Fy,R.curveCatmullRom=Hy,R.curveCatmullRomClosed=qy,R.curveCatmullRomOpen=Vy,R.curveLinear=gu,R.curveLinearClosed=function(r){return new Em(r)},R.curveMonotoneX=function(r){return new yu(r)},R.curveMonotoneY=function(r){return new Mm(r)},R.curveNatural=function(r){return new Pm(r)},R.curveStep=function(r){return new wu(r,.5)},R.curveStepAfter=function(r){return new wu(r,1)},R.curveStepBefore=function(r){return new wu(r,0)},R.customEvent=bs,R.descending=function(r,l){return l<r?-1:l>r?1:l>=r?0:NaN},R.deviation=_r,R.dispatch=xi,R.drag=function(){var r,l,u,h,g=Do,v=ll,x=Yl,w=Gr,k={},A=xi("start","drag","end"),D=0,B=0;function I(se){se.on("mousedown.drag",q).filter(w).on("touchstart.drag",X).on("touchmove.drag",Y).on("touchend.drag touchcancel.drag",ne).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(){if(!h&&g.apply(this,arguments)){var se=te("mouse",v.apply(this,arguments),Ra,this,arguments);se&&(Gn(R.event.view).on("mousemove.drag",j,!0).on("mouseup.drag",K,!0),pr(R.event.view),hr(),u=!1,r=R.event.clientX,l=R.event.clientY,se("start"))}}function j(){if(st(),!u){var se=R.event.clientX-r,fe=R.event.clientY-l;u=se*se+fe*fe>B}k.mouse("drag")}function K(){Gn(R.event.view).on("mousemove.drag mouseup.drag",null),zs(R.event.view,u),st(),k.mouse("end")}function X(){if(g.apply(this,arguments)){var se,fe,ve=R.event.changedTouches,Ae=v.apply(this,arguments),qe=ve.length;for(se=0;se<qe;++se)(fe=te(ve[se].identifier,Ae,_s,this,arguments))&&(hr(),fe("start"))}}function Y(){var se,fe,ve=R.event.changedTouches,Ae=ve.length;for(se=0;se<Ae;++se)(fe=k[ve[se].identifier])&&(st(),fe("drag"))}function ne(){var se,fe,ve=R.event.changedTouches,Ae=ve.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),se=0;se<Ae;++se)(fe=k[ve[se].identifier])&&(hr(),fe("end"))}function te(se,fe,ve,Ae,qe){var me,Me,Se,ie=ve(fe,se),Ce=A.copy();if(bs(new Ur(I,"beforestart",me,se,D,ie[0],ie[1],0,0,Ce),function(){return null!=(R.event.subject=me=x.apply(Ae,qe))&&(Me=me.x-ie[0]||0,Se=me.y-ie[1]||0,!0)}))return function we(Ee){var Fe,ct=ie;switch(Ee){case"start":k[se]=we,Fe=D++;break;case"end":delete k[se],--D;case"drag":ie=ve(fe,se),Fe=D}bs(new Ur(I,Ee,me,se,Fe,ie[0]+Me,ie[1]+Se,ie[0]-ct[0],ie[1]-ct[1],Ce),Ce.apply,Ce,[Ee,Ae,qe])}}return I.filter=function(se){return arguments.length?(g="function"==typeof se?se:ys(!!se),I):g},I.container=function(se){return arguments.length?(v="function"==typeof se?se:ys(se),I):v},I.subject=function(se){return arguments.length?(x="function"==typeof se?se:ys(se),I):x},I.touchable=function(se){return arguments.length?(w="function"==typeof se?se:ys(!!se),I):w},I.on=function(){var se=A.on.apply(A,arguments);return se===A?I:se},I.clickDistance=function(se){return arguments.length?(B=(se=+se)*se,I):Math.sqrt(B)},I},R.dragDisable=pr,R.dragEnable=zs,R.dsv=function(r,l,u,h){3===arguments.length&&"function"==typeof u&&(h=u,u=void 0);var g=L(r);return xt(l,u).then(function(v){return g.parse(v,h)})},R.dsvFormat=L,R.easeBack=yl,R.easeBackIn=ld,R.easeBackInOut=yl,R.easeBackOut=Iu,R.easeBounce=Xs,R.easeBounceIn=function(r){return 1-Xs(1-r)},R.easeBounceInOut=function(r){return((r*=2)<=1?1-Xs(1-r):Xs(r-1)+1)/2},R.easeBounceOut=Xs,R.easeCircle=id,R.easeCircleIn=function(r){return 1-Math.sqrt(1-r*r)},R.easeCircleInOut=id,R.easeCircleOut=function(r){return Math.sqrt(1- --r*r)},R.easeCubic=Ji,R.easeCubicIn=function(r){return r*r*r},R.easeCubicInOut=Ji,R.easeCubicOut=function(r){return--r*r*r+1},R.easeElastic=wl,R.easeElasticIn=Jl,R.easeElasticInOut=cd,R.easeElasticOut=wl,R.easeExp=ao,R.easeExpIn=function(r){return Math.pow(2,10*r-10)},R.easeExpInOut=ao,R.easeExpOut=function(r){return 1-Math.pow(2,-10*r)},R.easeLinear=function(r){return+r},R.easePoly=Vi,R.easePolyIn=ci,R.easePolyInOut=Vi,R.easePolyOut=Jn,R.easeQuad=fn,R.easeQuadIn=function(r){return r*r},R.easeQuadInOut=fn,R.easeQuadOut=function(r){return r*(2-r)},R.easeSin=io,R.easeSinIn=function(r){return 1-Math.cos(r*Tr)},R.easeSinInOut=io,R.easeSinOut=function(r){return Math.sin(r*Tr)},R.entries=function(r){var l=[];for(var u in r)l.push({key:u,value:r[u]});return l},R.extent=Is,R.forceCenter=function(r,l){var u;function h(){var g,v,x=u.length,w=0,k=0;for(g=0;g<x;++g)w+=(v=u[g]).x,k+=v.y;for(w=w/x-r,k=k/x-l,g=0;g<x;++g)(v=u[g]).x-=w,v.y-=k}return null==r&&(r=0),null==l&&(l=0),h.initialize=function(g){u=g},h.x=function(g){return arguments.length?(r=+g,h):r},h.y=function(g){return arguments.length?(l=+g,h):l},h},R.forceCollide=function(r){var l,u,h=1,g=1;function v(){for(var k,A,D,B,I,q,j,K=l.length,X=0;X<g;++X)for(A=Fn(l,ki,qa).visitAfter(x),k=0;k<K;++k)j=(q=u[(D=l[k]).index])*q,B=D.x+D.vx,I=D.y+D.vy,A.visit(Y);function Y(ne,te,se,fe,ve){var Ae=ne.data,qe=ne.r,me=q+qe;if(!Ae)return te>B+me||fe<B-me||se>I+me||ve<I-me;if(Ae.index>D.index){var Me=B-Ae.x-Ae.vx,Se=I-Ae.y-Ae.vy,ie=Me*Me+Se*Se;ie<me*me&&(0===Me&&(ie+=(Me=Et())*Me),0===Se&&(ie+=(Se=Et())*Se),ie=(me-(ie=Math.sqrt(ie)))/ie*h,D.vx+=(Me*=ie)*(me=(qe*=qe)/(j+qe)),D.vy+=(Se*=ie)*me,Ae.vx-=Me*(me=1-me),Ae.vy-=Se*me)}}}function x(k){if(k.data)return k.r=u[k.data.index];for(var A=k.r=0;A<4;++A)k[A]&&k[A].r>k.r&&(k.r=k[A].r)}function w(){if(l){var k,A,D=l.length;for(u=new Array(D),k=0;k<D;++k)u[(A=l[k]).index]=+r(A,k,l)}}return"function"!=typeof r&&(r=ze(null==r?1:+r)),v.initialize=function(k){l=k,w()},v.iterations=function(k){return arguments.length?(g=+k,v):g},v.strength=function(k){return arguments.length?(h=+k,v):h},v.radius=function(k){return arguments.length?(r="function"==typeof k?k:ze(+k),w(),v):r},v},R.forceLink=function(r){var l,u,h,g,v,x=Yt,w=function(j){return 1/Math.min(g[j.source.index],g[j.target.index])},k=ze(30),A=1;function D(j){for(var K=0,X=r.length;K<A;++K)for(var Y,ne,te,se,fe,ve,Ae,qe=0;qe<X;++qe)ne=(Y=r[qe]).source,se=(te=Y.target).x+te.vx-ne.x-ne.vx||Et(),fe=te.y+te.vy-ne.y-ne.vy||Et(),se*=ve=((ve=Math.sqrt(se*se+fe*fe))-u[qe])/ve*j*l[qe],fe*=ve,te.vx-=se*(Ae=v[qe]),te.vy-=fe*Ae,ne.vx+=se*(Ae=1-Ae),ne.vy+=fe*Ae}function B(){if(h){var j,K,X=h.length,Y=r.length,ne=ds(h,x);for(j=0,g=new Array(X);j<Y;++j)(K=r[j]).index=j,"object"!=typeof K.source&&(K.source=je(ne,K.source)),"object"!=typeof K.target&&(K.target=je(ne,K.target)),g[K.source.index]=(g[K.source.index]||0)+1,g[K.target.index]=(g[K.target.index]||0)+1;for(j=0,v=new Array(Y);j<Y;++j)v[j]=g[(K=r[j]).source.index]/(g[K.source.index]+g[K.target.index]);l=new Array(Y),I(),u=new Array(Y),q()}}function I(){if(h)for(var j=0,K=r.length;j<K;++j)l[j]=+w(r[j],j,r)}function q(){if(h)for(var j=0,K=r.length;j<K;++j)u[j]=+k(r[j],j,r)}return null==r&&(r=[]),D.initialize=function(j){h=j,B()},D.links=function(j){return arguments.length?(r=j,B(),D):r},D.id=function(j){return arguments.length?(x=j,D):x},D.iterations=function(j){return arguments.length?(A=+j,D):A},D.strength=function(j){return arguments.length?(w="function"==typeof j?j:ze(+j),I(),D):w},D.distance=function(j){return arguments.length?(k="function"==typeof j?j:ze(+j),q(),D):k},D},R.forceManyBody=function(){var r,l,u,h,g=ze(-30),v=1,x=1/0,w=.81;function k(I){var q,j=r.length,K=Fn(r,Ke,tt).visitAfter(D);for(u=I,q=0;q<j;++q)l=r[q],K.visit(B)}function A(){if(r){var I,q,j=r.length;for(h=new Array(j),I=0;I<j;++I)h[(q=r[I]).index]=+g(q,I,r)}}function D(I){var q,j,K,X,Y,ne=0,te=0;if(I.length){for(K=X=Y=0;Y<4;++Y)(q=I[Y])&&(j=Math.abs(q.value))&&(ne+=q.value,te+=j,K+=j*q.x,X+=j*q.y);I.x=K/te,I.y=X/te}else{(q=I).x=q.data.x,q.y=q.data.y;do{ne+=h[q.data.index]}while(q=q.next)}I.value=ne}function B(I,q,j,K){if(!I.value)return!0;var X=I.x-l.x,Y=I.y-l.y,ne=K-q,te=X*X+Y*Y;if(ne*ne/w<te)return te<x&&(0===X&&(te+=(X=Et())*X),0===Y&&(te+=(Y=Et())*Y),te<v&&(te=Math.sqrt(v*te)),l.vx+=X*I.value*u/te,l.vy+=Y*I.value*u/te),!0;if(!(I.length||te>=x)){(I.data!==l||I.next)&&(0===X&&(te+=(X=Et())*X),0===Y&&(te+=(Y=Et())*Y),te<v&&(te=Math.sqrt(v*te)));do{I.data!==l&&(l.vx+=X*(ne=h[I.data.index]*u/te),l.vy+=Y*ne)}while(I=I.next)}}return k.initialize=function(I){r=I,A()},k.strength=function(I){return arguments.length?(g="function"==typeof I?I:ze(+I),A(),k):g},k.distanceMin=function(I){return arguments.length?(v=I*I,k):Math.sqrt(v)},k.distanceMax=function(I){return arguments.length?(x=I*I,k):Math.sqrt(x)},k.theta=function(I){return arguments.length?(w=I*I,k):Math.sqrt(w)},k},R.forceRadial=function(r,l,u){var h,g,v,x=ze(.1);function w(A){for(var D=0,B=h.length;D<B;++D){var I=h[D],q=I.x-l||1e-6,j=I.y-u||1e-6,K=Math.sqrt(q*q+j*j),X=(v[D]-K)*g[D]*A/K;I.vx+=q*X,I.vy+=j*X}}function k(){if(h){var A,D=h.length;for(g=new Array(D),v=new Array(D),A=0;A<D;++A)v[A]=+r(h[A],A,h),g[A]=isNaN(v[A])?0:+x(h[A],A,h)}}return"function"!=typeof r&&(r=ze(+r)),null==l&&(l=0),null==u&&(u=0),w.initialize=function(A){h=A,k()},w.strength=function(A){return arguments.length?(x="function"==typeof A?A:ze(+A),k(),w):x},w.radius=function(A){return arguments.length?(r="function"==typeof A?A:ze(+A),k(),w):r},w.x=function(A){return arguments.length?(l=+A,w):l},w.y=function(A){return arguments.length?(u=+A,w):u},w},R.forceSimulation=function(r){var l,u=1,h=.001,g=1-Math.pow(h,1/300),v=0,x=.6,w=ds(),k=Ri(D),A=xi("tick","end");function D(){B(),A.call("tick",l),u<h&&(k.stop(),A.call("end",l))}function B(j){var K,X,Y=r.length;void 0===j&&(j=1);for(var ne=0;ne<j;++ne)for(u+=(v-u)*g,w.each(function(te){te(u)}),K=0;K<Y;++K)null==(X=r[K]).fx?X.x+=X.vx*=x:(X.x=X.fx,X.vx=0),null==X.fy?X.y+=X.vy*=x:(X.y=X.fy,X.vy=0);return l}function I(){for(var j,K=0,X=r.length;K<X;++K){if((j=r[K]).index=K,null!=j.fx&&(j.x=j.fx),null!=j.fy&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var Y=10*Math.sqrt(K),ne=K*bt;j.x=Y*Math.cos(ne),j.y=Y*Math.sin(ne)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function q(j){return j.initialize&&j.initialize(r),j}return null==r&&(r=[]),I(),l={tick:B,restart:function(){return k.restart(D),l},stop:function(){return k.stop(),l},nodes:function(j){return arguments.length?(r=j,I(),w.each(q),l):r},alpha:function(j){return arguments.length?(u=+j,l):u},alphaMin:function(j){return arguments.length?(h=+j,l):h},alphaDecay:function(j){return arguments.length?(g=+j,l):+g},alphaTarget:function(j){return arguments.length?(v=+j,l):v},velocityDecay:function(j){return arguments.length?(x=1-j,l):1-x},force:function(j,K){return arguments.length>1?(null==K?w.remove(j):w.set(j,q(K)),l):w.get(j)},find:function(j,K,X){var Y,ne,te,se,fe,ve=0,Ae=r.length;for(null==X?X=1/0:X*=X,ve=0;ve<Ae;++ve)(te=(Y=j-(se=r[ve]).x)*Y+(ne=K-se.y)*ne)<X&&(fe=se,X=te);return fe},on:function(j,K){return arguments.length>1?(A.on(j,K),l):A.on(j)}}},R.forceX=function(r){var l,u,h,g=ze(.1);function v(w){for(var k,A=0,D=l.length;A<D;++A)(k=l[A]).vx+=(h[A]-k.x)*u[A]*w}function x(){if(l){var w,k=l.length;for(u=new Array(k),h=new Array(k),w=0;w<k;++w)u[w]=isNaN(h[w]=+r(l[w],w,l))?0:+g(l[w],w,l)}}return"function"!=typeof r&&(r=ze(null==r?0:+r)),v.initialize=function(w){l=w,x()},v.strength=function(w){return arguments.length?(g="function"==typeof w?w:ze(+w),x(),v):g},v.x=function(w){return arguments.length?(r="function"==typeof w?w:ze(+w),x(),v):r},v},R.forceY=function(r){var l,u,h,g=ze(.1);function v(w){for(var k,A=0,D=l.length;A<D;++A)(k=l[A]).vy+=(h[A]-k.y)*u[A]*w}function x(){if(l){var w,k=l.length;for(u=new Array(k),h=new Array(k),w=0;w<k;++w)u[w]=isNaN(h[w]=+r(l[w],w,l))?0:+g(l[w],w,l)}}return"function"!=typeof r&&(r=ze(null==r?0:+r)),v.initialize=function(w){l=w,x()},v.strength=function(w){return arguments.length?(g="function"==typeof w?w:ze(+w),x(),v):g},v.y=function(w){return arguments.length?(r="function"==typeof w?w:ze(+w),x(),v):r},v},R.formatDefaultLocale=Bi,R.formatLocale=ba,R.formatSpecifier=ii,R.geoAlbers=Tf,R.geoAlbersUsa=function(){var r,l,u,h,g,v,x=Tf(),w=Jd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=Jd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),A={point:function(I,q){v=[I,q]}};function D(I){var q=I[0],j=I[1];return v=null,u.point(q,j),v||(h.point(q,j),v)||(g.point(q,j),v)}function B(){return r=l=null,D}return D.invert=function(I){var q=x.scale(),j=x.translate(),K=(I[0]-j[0])/q,X=(I[1]-j[1])/q;return(X>=.12&&X<.234&&K>=-.425&&K<-.214?w:X>=.166&&X<.234&&K>=-.214&&K<-.115?k:x).invert(I)},D.stream=function(I){return r&&l===I?r:(q=[x.stream(l=I),w.stream(I),k.stream(I)],j=q.length,r={point:function(K,X){for(var Y=-1;++Y<j;)q[Y].point(K,X)},sphere:function(){for(var K=-1;++K<j;)q[K].sphere()},lineStart:function(){for(var K=-1;++K<j;)q[K].lineStart()},lineEnd:function(){for(var K=-1;++K<j;)q[K].lineEnd()},polygonStart:function(){for(var K=-1;++K<j;)q[K].polygonStart()},polygonEnd:function(){for(var K=-1;++K<j;)q[K].polygonEnd()}});var q,j},D.precision=function(I){return arguments.length?(x.precision(I),w.precision(I),k.precision(I),B()):x.precision()},D.scale=function(I){return arguments.length?(x.scale(I),w.scale(.35*I),k.scale(I),D.translate(x.translate())):x.scale()},D.translate=function(I){if(!arguments.length)return x.translate();var q=x.scale(),j=+I[0],K=+I[1];return u=x.translate(I).clipExtent([[j-.455*q,K-.238*q],[j+.455*q,K+.238*q]]).stream(A),h=w.translate([j-.307*q,K+.201*q]).clipExtent([[j-.425*q+Re,K+.12*q+Re],[j-.214*q-Re,K+.234*q-Re]]).stream(A),g=k.translate([j-.205*q,K+.212*q]).clipExtent([[j-.214*q+Re,K+.166*q+Re],[j-.115*q-Re,K+.234*q-Re]]).stream(A),B()},D.fitExtent=function(I,q){return Qd(D,I,q)},D.fitSize=function(I,q){return fh(D,I,q)},D.fitWidth=function(I,q){return gh(D,I,q)},D.fitHeight=function(I,q){return mh(D,I,q)},D.scale(1070)},R.geoArea=function(r){return Ad.reset(),Es(r,tr),2*Ad},R.geoAzimuthalEqualArea=function(){return ar(yh).scale(124.75).clipAngle(179.999)},R.geoAzimuthalEqualAreaRaw=yh,R.geoAzimuthalEquidistant=function(){return ar(wh).scale(79.4188).clipAngle(179.999)},R.geoAzimuthalEquidistantRaw=wh,R.geoBounds=function(r){var l,u,h,g,v,x,w;if(Va=di=-(si=Ma=1/0),ho=[],Es(r,Dr),u=ho.length){for(ho.sort(nv),l=1,v=[h=ho[0]];l<u;++l)Pp(h,(g=ho[l])[0])||Pp(h,g[1])?(ja(h[0],g[1])>ja(h[0],h[1])&&(h[1]=g[1]),ja(g[0],h[1])>ja(h[0],h[1])&&(h[0]=g[0])):v.push(h=g);for(x=-1/0,l=0,h=v[u=v.length-1];l<=u;h=g,++l)(w=ja(h[1],(g=v[l])[0]))>x&&(x=w,si=g[0],di=h[1])}return ho=$r=null,si===1/0||Ma===1/0?[[NaN,NaN],[NaN,NaN]]:[[si,Ma],[di,Va]]},R.geoCentroid=function(r){Id=Md=Ld=Pd=Nd=Rd=Od=Bd=qu=Vu=ju=0,Es(r,$s);var l=qu,u=Vu,h=ju,g=l*l+u*u+h*h;return g<At&&(l=Rd,u=Od,h=Bd,Md<Re&&(l=Ld,u=Pd,h=Nd),(g=l*l+u*u+h*h)<At)?[NaN,NaN]:[Xe(u,l)*zt,cn(h/ai(g))*zt]},R.geoCircle=function(){var r,l,u=Ll([0,0]),h=Ll(90),g=Ll(6),v={point:function(w,k){r.push(w=l(w,k)),w[0]*=zt,w[1]*=zt}};function x(){var w=u.apply(this,arguments),k=h.apply(this,arguments)*kt,A=g.apply(this,arguments)*kt;return r=[],l=Ku(-w[0]*kt,-w[1]*kt,0).invert,Hp(v,k,A,1),w={type:"Polygon",coordinates:[r]},r=l=null,w}return x.center=function(w){return arguments.length?(u="function"==typeof w?w:Ll([+w[0],+w[1]]),x):u},x.radius=function(w){return arguments.length?(h="function"==typeof w?w:Ll(+w),x):h},x.precision=function(w){return arguments.length?(g="function"==typeof w?w:Ll(+w),x):g},x},R.geoClipAntimeridian=Ju,R.geoClipCircle=Yp,R.geoClipExtent=function(){var r,l,u,h=0,g=0,v=960,x=500;return u={stream:function(w){return r&&l===w?r:r=Hd(h,g,v,x)(l=w)},extent:function(w){return arguments.length?(h=+w[0][0],g=+w[0][1],v=+w[1][0],x=+w[1][1],r=l=null,u):[[h,g],[v,x]]}}},R.geoClipRectangle=Hd,R.geoConicConformal=function(){return bh(Ef).scale(109.5).parallels([30,30])},R.geoConicConformalRaw=Ef,R.geoConicEqualArea=Jd,R.geoConicEqualAreaRaw=kf,R.geoConicEquidistant=function(){return bh($f).scale(131.154).center([0,13.9389])},R.geoConicEquidistantRaw=$f,R.geoContains=function(r,l){return(r&&Xp.hasOwnProperty(r.type)?Xp[r.type]:Wd)(r,l)},R.geoDistance=jd,R.geoEqualEarth=function(){return ar(xh).scale(177.158)},R.geoEqualEarthRaw=xh,R.geoEquirectangular=function(){return ar(kc).scale(152.63)},R.geoEquirectangularRaw=kc,R.geoGnomonic=function(){return ar(Ch).scale(144.049).clipAngle(60)},R.geoGnomonicRaw=Ch,R.geoGraticule=sf,R.geoGraticule10=function(){return sf()()},R.geoIdentity=function(){var r,l,u,h,g,v,x,w=1,k=0,A=0,D=1,B=1,I=0,q=null,j=1,K=1,X=wc({point:function(se,fe){var ve=te([se,fe]);this.stream.point(ve[0],ve[1])}}),Y=pc;function ne(){return j=w*D,K=w*B,v=x=null,te}function te(se){var fe=se[0]*j,ve=se[1]*K;if(I){var Ae=ve*r-fe*l;fe=fe*r+ve*l,ve=Ae}return[fe+k,ve+A]}return te.invert=function(se){var fe=se[0]-k,ve=se[1]-A;if(I){var Ae=ve*r+fe*l;fe=fe*r-ve*l,ve=Ae}return[fe/j,ve/K]},te.stream=function(se){return v&&x===se?v:v=X(Y(x=se))},te.postclip=function(se){return arguments.length?(Y=se,q=u=h=g=null,ne()):Y},te.clipExtent=function(se){return arguments.length?(Y=null==se?(q=u=h=g=null,pc):Hd(q=+se[0][0],u=+se[0][1],h=+se[1][0],g=+se[1][1]),ne()):null==q?null:[[q,u],[h,g]]},te.scale=function(se){return arguments.length?(w=+se,ne()):w},te.translate=function(se){return arguments.length?(k=+se[0],A=+se[1],ne()):[k,A]},te.angle=function(se){return arguments.length?(l=ht(I=se%360*kt),r=et(I),ne()):I*zt},te.reflectX=function(se){return arguments.length?(D=se?-1:1,ne()):D<0},te.reflectY=function(se){return arguments.length?(B=se?-1:1,ne()):B<0},te.fitExtent=function(se,fe){return Qd(te,se,fe)},te.fitSize=function(se,fe){return fh(te,se,fe)},te.fitWidth=function(se,fe){return gh(te,se,fe)},te.fitHeight=function(se,fe){return mh(te,se,fe)},te},R.geoInterpolate=function(r,l){var u=r[0]*kt,h=r[1]*kt,g=l[0]*kt,v=l[1]*kt,x=et(h),w=ht(h),k=et(v),A=ht(v),D=x*et(u),B=x*ht(u),I=k*et(g),q=k*ht(g),j=2*cn(ai(bn(v-h)+x*k*bn(g-u))),K=ht(j),X=j?function(Y){var ne=ht(Y*=j)/K,te=ht(j-Y)/K,se=te*D+ne*I,fe=te*B+ne*q,ve=te*w+ne*A;return[Xe(fe,se)*zt,Xe(ve,ai(se*se+fe*fe))*zt]}:function(){return[u*zt,h*zt]};return X.distance=j,X},R.geoLength=Kp,R.geoMercator=function(){return Sf(Cc).scale(961/Tn)},R.geoMercatorRaw=Cc,R.geoNaturalEarth1=function(){return ar(kh).scale(175.295)},R.geoNaturalEarth1Raw=kh,R.geoOrthographic=function(){return ar(Th).scale(249.5).clipAngle(90+Re)},R.geoOrthographicRaw=Th,R.geoPath=function(r,l){var u,h,g=4.5;function v(x){return x&&("function"==typeof g&&h.pointRadius(+g.apply(this,arguments)),Es(x,u(h))),h.result()}return v.area=function(x){return Es(x,u(Ir)),Ir.result()},v.measure=function(x){return Es(x,u(yc)),yc.result()},v.bounds=function(x){return Es(x,u(Yd)),Yd.result()},v.centroid=function(x){return Es(x,u(us)),us.result()},v.projection=function(x){return arguments.length?(u=null==x?(r=null,pc):(r=x).stream,v):r},v.context=function(x){return arguments.length?(h=null==x?(l=null,new bf):new ff(l=x),"function"!=typeof g&&h.pointRadius(g),v):l},v.pointRadius=function(x){return arguments.length?(g="function"==typeof x?x:(h.pointRadius(+x),+x),v):g},v.projection(r).context(l)},R.geoProjection=ar,R.geoProjectionMutator=vh,R.geoRotation=Fp,R.geoStereographic=function(){return ar(Ah).scale(250).clipAngle(142)},R.geoStereographicRaw=Ah,R.geoStream=Es,R.geoTransform=function(r){return{stream:wc(r)}},R.geoTransverseMercator=function(){var r=Sf(Sh),l=r.center,u=r.rotate;return r.center=function(h){return arguments.length?l([-h[1],h[0]]):[(h=l())[1],-h[0]]},r.rotate=function(h){return arguments.length?u([h[0],h[1],h.length>2?h[2]+90:90]):[(h=u())[0],h[1],h[2]-90]},u([0,0,90]).scale(159.155)},R.geoTransverseMercatorRaw=Sh,R.gray=function(r,l){return new aa(r,0,0,l??1)},R.hcl=as,R.hierarchy=Eh,R.histogram=function(){var r=ue,l=Is,u=Ui;function h(g){var v,x,w=g.length,k=new Array(w);for(v=0;v<w;++v)k[v]=r(g[v],v,g);var A=l(k),D=A[0],B=A[1],I=u(k,D,B);Array.isArray(I)||(I=Ta(D,B,I),I=it(Math.ceil(D/I)*I,B,I));for(var q=I.length;I[0]<=D;)I.shift(),--q;for(;I[q-1]>B;)I.pop(),--q;var j,K=new Array(q+1);for(v=0;v<=q;++v)(j=K[v]=[]).x0=v>0?I[v-1]:D,j.x1=v<q?I[v]:B;for(v=0;v<w;++v)D<=(x=k[v])&&x<=B&&K[Si(I,x,0,q)].push(g[v]);return K}return h.value=function(g){return arguments.length?(r="function"==typeof g?g:$e(g),h):r},h.domain=function(g){return arguments.length?(l="function"==typeof g?g:$e([g[0],g[1]]),h):l},h.thresholds=function(g){return arguments.length?(u="function"==typeof g?g:Array.isArray(g)?$e(Un.call(g)):$e(g),h):u},h},R.hsl=ts,R.html=Be,R.image=function(r,l){return new Promise(function(u,h){var g=new Image;for(var v in l)g[v]=l[v];g.onerror=h,g.onload=function(){u(g)},g.src=r})},R.interpolate=hi,R.interpolateArray=function(r,l){return(Ln(l)?Ft:hn)(r,l)},R.interpolateBasis=ge,R.interpolateBasisClosed=pe,R.interpolateBlues=ay,R.interpolateBrBG=B0,R.interpolateBuGn=U0,R.interpolateBuPu=G0,R.interpolateCividis=function(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-r*(35.34-r*(2381.73-r*(6402.7-r*(7024.72-2710.57*r)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+r*(170.73+r*(52.82-r*(131.46-r*(176.58-67.37*r)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+r*(442.36-r*(2482.43-r*(6167.24-r*(6614.94-2475.67*r)))))))+")"},R.interpolateCool=hy,R.interpolateCubehelix=wr,R.interpolateCubehelixDefault=dy,R.interpolateCubehelixLong=xr,R.interpolateDate=Ht,R.interpolateDiscrete=function(r){var l=r.length;return function(u){return r[Math.max(0,Math.min(l-1,Math.floor(u*l)))]}},R.interpolateGnBu=Y0,R.interpolateGreens=sy,R.interpolateGreys=ry,R.interpolateHcl=Kl,R.interpolateHclLong=zo,R.interpolateHsl=_o,R.interpolateHslLong=ml,R.interpolateHue=function(r,l){var u=Ve(+r,+l);return function(h){var g=u(h);return g-360*Math.floor(g/360)}},R.interpolateInferno=vy,R.interpolateLab=function(r,l){var u=De((r=is(r)).l,(l=is(l)).l),h=De(r.a,l.a),g=De(r.b,l.b),v=De(r.opacity,l.opacity);return function(x){return r.l=u(x),r.a=h(x),r.b=g(x),r.opacity=v(x),r+""}},R.interpolateMagma=my,R.interpolateNumber=pn,R.interpolateNumberArray=Ft,R.interpolateObject=an,R.interpolateOrRd=K0,R.interpolateOranges=cy,R.interpolatePRGn=_0,R.interpolatePiYG=z0,R.interpolatePlasma=by,R.interpolatePuBu=Q0,R.interpolatePuBuGn=X0,R.interpolatePuOr=F0,R.interpolatePuRd=J0,R.interpolatePurples=oy,R.interpolateRainbow=function(r){(r<0||r>1)&&(r-=Math.floor(r));var l=Math.abs(r-.5);return du.h=360*r-100,du.s=1.5-1.5*l,du.l=.8-.9*l,du+""},R.interpolateRdBu=H0,R.interpolateRdGy=q0,R.interpolateRdPu=Z0,R.interpolateRdYlBu=V0,R.interpolateRdYlGn=j0,R.interpolateReds=ly,R.interpolateRgb=ut,R.interpolateRgbBasis=vt,R.interpolateRgbBasisClosed=Sn,R.interpolateRound=rs,R.interpolateSinebow=function(r){var l;return r=(.5-r)*Math.PI,uu.r=255*(l=Math.sin(r))*l,uu.g=255*(l=Math.sin(r+py))*l,uu.b=255*(l=Math.sin(r+fy))*l,uu+""},R.interpolateSpectral=W0,R.interpolateString=_a,R.interpolateTransformCss=qt,R.interpolateTransformSvg=on,R.interpolateTurbo=function(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+r*(1172.33-r*(10793.56-r*(33300.12-r*(38394.49-14825.05*r)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+r*(557.33+r*(1225.33-r*(3574.96-r*(1073.77+707.56*r)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+r*(3211.1-r*(15327.97-r*(27814-r*(22569.18-6838.66*r)))))))+")"},R.interpolateViridis=gy,R.interpolateWarm=uy,R.interpolateYlGn=ty,R.interpolateYlGnBu=ey,R.interpolateYlOrBr=ny,R.interpolateYlOrRd=iy,R.interpolateZoom=os,R.interrupt=rt,R.interval=function(r,l,u){var h=new Cr,g=l;return null==l?(h.restart(r,l,u),h):(l=+l,u=null==u?va():+u,h.restart(function v(x){x+=g,h.restart(v,g+=l,u),r(x)},l,u),h)},R.isoFormat=C0,R.isoParse=k0,R.json=function(r,l){return fetch(r,l).then(gn)},R.keys=function(r){var l=[];for(var u in r)l.push(u);return l},R.lab=is,R.lch=function(r,l,u,h){return 1===arguments.length?qs(r):new Xi(u,l,r,h??1)},R.line=ap,R.lineRadial=um,R.linkHorizontal=function(){return op(Dy)},R.linkRadial=function(){var r=op(My);return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r},R.linkVertical=function(){return op(Iy)},R.local=cr,R.map=ds,R.matcher=Xa,R.max=_,R.mean=function(r,l){var u,h=r.length,g=h,v=-1,x=0;if(null==l)for(;++v<h;)isNaN(u=Ge(r[v]))?--g:x+=u;else for(;++v<h;)isNaN(u=Ge(l(r[v],v,r)))?--g:x+=u;if(g)return x/g},R.median=function(r,l){var u,h=r.length,g=-1,v=[];if(null==l)for(;++g<h;)isNaN(u=Ge(r[g]))||v.push(u);else for(;++g<h;)isNaN(u=Ge(l(r[g],g,r)))||v.push(u);return pa(v.sort(wi),.5)},R.merge=lr,R.min=Hi,R.mouse=Ra,R.namespace=dt,R.namespaces=Ka,R.nest=function(){var r,l,u,h=[],g=[];function v(x,w,k,A){if(w>=h.length)return null!=r&&x.sort(r),null!=l?l(x):x;for(var D,B,I,q=-1,j=x.length,K=h[w++],X=ds(),Y=k();++q<j;)(I=X.get(D=K(B=x[q])+""))?I.push(B):X.set(D,[B]);return X.each(function(ne,te){A(Y,te,v(ne,w,k,A))}),Y}return u={object:function(x){return v(x,0,oc,wd)},map:function(x){return v(x,0,$l,xd)},entries:function(x){return function w(k,A){if(++A>h.length)return k;var D,B=g[A-1];return null!=l&&A>=h.length?D=k.entries():(D=[],k.each(function(I,q){D.push({key:q,values:w(I,A)})})),null!=B?D.sort(function(I,q){return B(I.key,q.key)}):D}(v(x,0,$l,xd),0)},key:function(x){return h.push(x),u},sortKeys:function(x){return g[h.length-1]=x,u},sortValues:function(x){return r=x,u},rollup:function(x){return l=x,u}}},R.now=va,R.pack=function(){var r=null,l=1,u=1,h=Ko;function g(v){return v.x=l/2,v.y=u/2,r?v.eachBefore(Bf(r)).eachAfter(Dh(h,.5)).eachBefore(_f(1)):v.eachBefore(Bf(Ov)).eachAfter(Dh(Ko,1)).eachAfter(Dh(h,v.r/Math.min(l,u))).eachBefore(_f(Math.min(l,u)/(2*v.r))),v}return g.radius=function(v){return arguments.length?(r=Rv(v),g):r},g.size=function(v){return arguments.length?(l=+v[0],u=+v[1],g):[l,u]},g.padding=function(v){return arguments.length?(h="function"==typeof v?v:Bl(+v),g):h},g},R.packEnclose=If,R.packSiblings=function(r){return Of(r),r},R.pairs=function(r,l){null==l&&(l=La);for(var u=0,h=r.length-1,g=r[0],v=new Array(h<0?0:h);u<h;)v[u]=l(g,g=r[++u]);return v},R.partition=function(){var r=1,l=1,u=0,h=!1;function g(v){var w,k,x=v.height+1;return v.x0=v.y0=u,v.x1=r,v.y1=l/x,v.eachBefore((w=l,k=x,function(A){A.children&&Dc(A,A.x0,w*(A.depth+1)/k,A.x1,w*(A.depth+2)/k);var D=A.x0,B=A.y0,I=A.x1-u,q=A.y1-u;I<D&&(D=I=(D+I)/2),q<B&&(B=q=(B+q)/2),A.x0=D,A.y0=B,A.x1=I,A.y1=q})),h&&v.eachBefore(zf),v}return g.round=function(v){return arguments.length?(h=!!v,g):h},g.size=function(v){return arguments.length?(r=+v[0],l=+v[1],g):[r,l]},g.padding=function(v){return arguments.length?(u=+v,g):u},g},R.path=Js,R.permute=function(r,l){for(var u=l.length,h=new Array(u);u--;)h[u]=r[l[u]];return h},R.pie=function(){var r=Sy,l=Ay,u=null,h=sn(0),g=sn(go),v=sn(0);function x(w){var k,A,D,B,I,q=w.length,j=0,K=new Array(q),X=new Array(q),Y=+h.apply(this,arguments),ne=Math.min(go,Math.max(-go,g.apply(this,arguments)-Y)),te=Math.min(Math.abs(ne)/q,v.apply(this,arguments)),se=te*(ne<0?-1:1);for(k=0;k<q;++k)(I=X[K[k]=k]=+r(w[k],k,w))>0&&(j+=I);for(null!=l?K.sort(function(fe,ve){return l(X[fe],X[ve])}):null!=u&&K.sort(function(fe,ve){return u(w[fe],w[ve])}),k=0,D=j?(ne-q*se)/j:0;k<q;++k,Y=B)B=Y+((I=X[A=K[k]])>0?I*D:0)+se,X[A]={data:w[A],index:k,value:I,startAngle:Y,endAngle:B,padAngle:te};return X}return x.value=function(w){return arguments.length?(r="function"==typeof w?w:sn(+w),x):r},x.sortValues=function(w){return arguments.length?(l=w,u=null,x):l},x.sort=function(w){return arguments.length?(u=w,l=null,x):u},x.startAngle=function(w){return arguments.length?(h="function"==typeof w?w:sn(+w),x):h},x.endAngle=function(w){return arguments.length?(g="function"==typeof w?w:sn(+w),x):g},x.padAngle=function(w){return arguments.length?(v="function"==typeof w?w:sn(+w),x):v},x},R.piecewise=function(r,l){for(var u=0,h=l.length-1,g=l[0],v=new Array(h<0?0:h);u<h;)v[u]=r(g,g=l[++u]);return function(x){var w=Math.max(0,Math.min(h-1,Math.floor(x*=h)));return v[w](x-w)}},R.pointRadial=Yc,R.polygonArea=function(r){for(var l,u=-1,h=r.length,g=r[h-1],v=0;++u<h;)v+=(l=g)[1]*(g=r[u])[0]-l[0]*g[1];return v/2},R.polygonCentroid=function(r){for(var l,u,h=-1,g=r.length,v=0,x=0,w=r[g-1],k=0;++h<g;)k+=u=(l=w)[0]*(w=r[h])[1]-w[0]*l[1],v+=(l[0]+w[0])*u,x+=(l[1]+w[1])*u;return[v/(k*=3),x/k]},R.polygonContains=function(r,l){for(var u,h,g=r.length,v=r[g-1],x=l[0],w=l[1],k=v[0],A=v[1],D=!1,B=0;B<g;++B)u=(v=r[B])[0],(h=v[1])>w!=A>w&&x<(k-u)*(w-h)/(A-h)+u&&(D=!D),k=u,A=h;return D},R.polygonHull=function(r){if((u=r.length)<3)return null;var l,u,h=new Array(u),g=new Array(u);for(l=0;l<u;++l)h[l]=[+r[l][0],+r[l][1],l];for(h.sort(Wv),l=0;l<u;++l)g[l]=[h[l][0],-h[l][1]];var v=Wf(h),x=Wf(g),w=x[0]===v[0],k=x[x.length-1]===v[v.length-1],A=[];for(l=v.length-1;l>=0;--l)A.push(r[h[v[l]][2]]);for(l=+w;l<x.length-k;++l)A.push(r[h[x[l]][2]]);return A},R.polygonLength=function(r){for(var l,u,h=-1,g=r.length,v=r[g-1],x=v[0],w=v[1],k=0;++h<g;)l=x,u=w,l-=x=(v=r[h])[0],u-=w=v[1],k+=Math.sqrt(l*l+u*u);return k},R.precisionFixed=Ai,R.precisionPrefix=ya,R.precisionRound=la,R.quadtree=Fn,R.quantile=pa,R.quantize=function(r,l){for(var u=new Array(l),h=0;h<l;++h)u[h]=r(h/(l-1));return u},R.radialArea=hm,R.radialLine=um,R.randomBates=Yv,R.randomExponential=Kv,R.randomIrwinHall=Gf,R.randomLogNormal=Gv,R.randomNormal=Uf,R.randomUniform=Uv,R.range=it,R.rgb=ia,R.ribbon=function(){var r=sc,l=Pu,u=Sl,h=rc,g=Nu,v=null;function x(){var w,k=yd.call(arguments),A=r.apply(this,k),D=l.apply(this,k),B=+u.apply(this,(k[0]=A,k)),I=h.apply(this,k)-co,q=g.apply(this,k)-co,j=B*Fa(I),K=B*Oi(I),X=+u.apply(this,(k[0]=D,k)),Y=h.apply(this,k)-co,ne=g.apply(this,k)-co;if(v||(v=w=Js()),v.moveTo(j,K),v.arc(0,0,B,I,q),I===Y&&q===ne||(v.quadraticCurveTo(0,0,X*Fa(Y),X*Oi(Y)),v.arc(0,0,X,Y,ne)),v.quadraticCurveTo(0,0,j,K),v.closePath(),w)return v=null,w+""||null}return x.radius=function(w){return arguments.length?(u="function"==typeof w?w:Er(+w),x):u},x.startAngle=function(w){return arguments.length?(h="function"==typeof w?w:Er(+w),x):h},x.endAngle=function(w){return arguments.length?(g="function"==typeof w?w:Er(+w),x):g},x.source=function(w){return arguments.length?(r=w,x):r},x.target=function(w){return arguments.length?(l=w,x):l},x.context=function(w){return arguments.length?(v=w??null,x):v},x},R.scaleBand=Nh,R.scaleDiverging=function r(){var l=Qo(cu()(Zi));return l.copy=function(){return po(l,r())},Mr.apply(l,arguments)},R.scaleDivergingLog=function r(){var l=Bh(cu()).domain([.1,1,10]);return l.copy=function(){return po(l,r()).base(l.base())},Mr.apply(l,arguments)},R.scaleDivergingPow=ep,R.scaleDivergingSqrt=function(){return ep.apply(null,arguments).exponent(.5)},R.scaleDivergingSymlog=function r(){var l=_h(cu());return l.copy=function(){return po(l,r()).constant(l.constant())},Mr.apply(l,arguments)},R.scaleIdentity=function r(l){var u;function h(g){return isNaN(g=+g)?u:g}return h.invert=h,h.domain=h.range=function(g){return arguments.length?(l=ru.call(g,Rh),h):l.slice()},h.unknown=function(g){return arguments.length?(u=g,h):u},h.copy=function(){return r(l).unknown(u)},l=arguments.length?ru.call(l,Rh):[0,1],Qo(h)},R.scaleImplicit=Lh,R.scaleLinear=function r(){var l=Qf(Zi,Zi);return l.copy=function(){return Ic(l,r())},Ds.apply(l,arguments),Qo(l)},R.scaleLog=function r(){var l=Bh(ou()).domain([1,10]);return l.copy=function(){return Ic(l,r()).base(l.base())},Ds.apply(l,arguments),l},R.scaleOrdinal=Ph,R.scalePoint=function(){return function r(l){var u=l.copy;return l.padding=l.paddingOuter,delete l.paddingInner,delete l.paddingOuter,l.copy=function(){return r(u())},l}(Nh.apply(null,arguments).paddingInner(1))},R.scalePow=Fh,R.scaleQuantile=function r(){var l,u=[],h=[],g=[];function v(){var w=0,k=Math.max(1,h.length);for(g=new Array(k-1);++w<k;)g[w-1]=pa(u,w/k);return x}function x(w){return isNaN(w=+w)?l:h[Si(g,w)]}return x.invertExtent=function(w){var k=h.indexOf(w);return k<0?[NaN,NaN]:[k>0?g[k-1]:u[0],k<g.length?g[k]:u[u.length-1]]},x.domain=function(w){if(!arguments.length)return u.slice();u=[];for(var k,A=0,D=w.length;A<D;++A)null==(k=w[A])||isNaN(k=+k)||u.push(k);return u.sort(wi),v()},x.range=function(w){return arguments.length?(h=Xo.call(w),v()):h.slice()},x.unknown=function(w){return arguments.length?(l=w,x):l},x.quantiles=function(){return g.slice()},x.copy=function(){return r().domain(u).range(h).unknown(l)},Ds.apply(x,arguments)},R.scaleQuantize=function r(){var l,u=0,h=1,g=1,v=[.5],x=[0,1];function w(A){return A<=A?x[Si(v,A,0,g)]:l}function k(){var A=-1;for(v=new Array(g);++A<g;)v[A]=((A+1)*h-(A-g)*u)/(g+1);return w}return w.domain=function(A){return arguments.length?(u=+A[0],h=+A[1],k()):[u,h]},w.range=function(A){return arguments.length?(g=(x=Xo.call(A)).length-1,k()):x.slice()},w.invertExtent=function(A){var D=x.indexOf(A);return D<0?[NaN,NaN]:D<1?[u,v[0]]:D>=g?[v[g-1],h]:[v[D-1],v[D]]},w.unknown=function(A){return arguments.length&&(l=A),w},w.thresholds=function(){return v.slice()},w.copy=function(){return r().domain([u,h]).range(x).unknown(l)},Ds.apply(Qo(w),arguments)},R.scaleSequential=function r(){var l=Qo(lu()(Zi));return l.copy=function(){return po(l,r())},Mr.apply(l,arguments)},R.scaleSequentialLog=function r(){var l=Bh(lu()).domain([1,10]);return l.copy=function(){return po(l,r()).base(l.base())},Mr.apply(l,arguments)},R.scaleSequentialPow=Zh,R.scaleSequentialQuantile=function r(){var l=[],u=Zi;function h(g){if(!isNaN(g=+g))return u((Si(l,g)-1)/(l.length-1))}return h.domain=function(g){if(!arguments.length)return l.slice();l=[];for(var v,x=0,w=g.length;x<w;++x)null==(v=g[x])||isNaN(v=+v)||l.push(v);return l.sort(wi),h},h.interpolator=function(g){return arguments.length?(u=g,h):u},h.copy=function(){return r(u).domain(l)},Mr.apply(h,arguments)},R.scaleSequentialSqrt=function(){return Zh.apply(null,arguments).exponent(.5)},R.scaleSequentialSymlog=function r(){var l=_h(lu());return l.copy=function(){return po(l,r()).constant(l.constant())},Mr.apply(l,arguments)},R.scaleSqrt=function(){return Fh.apply(null,arguments).exponent(.5)},R.scaleSymlog=function r(){var l=_h(ou());return l.copy=function(){return Ic(l,r()).constant(l.constant())},Ds.apply(l,arguments)},R.scaleThreshold=function r(){var l,u=[.5],h=[0,1],g=1;function v(x){return x<=x?h[Si(u,x,0,g)]:l}return v.domain=function(x){return arguments.length?(u=Xo.call(x),g=Math.min(u.length,h.length-1),v):u.slice()},v.range=function(x){return arguments.length?(h=Xo.call(x),g=Math.min(u.length,h.length-1),v):h.slice()},v.invertExtent=function(x){var w=h.indexOf(x);return[u[w-1],u[w]]},v.unknown=function(x){return arguments.length?(l=x,v):l},v.copy=function(){return r().domain(u).range(h).unknown(l)},Ds.apply(v,arguments)},R.scaleTime=function(){return Ds.apply(Jh(Lr,Wh,Pc,Lc,jh,Vh,Mc,Jo,R.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},R.scaleUtc=function(){return Ds.apply(Jh(Pr,Yh,Bc,Oc,Gh,Uh,Mc,Jo,R.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},R.scan=function(r,l){if(u=r.length){var u,h,g=0,v=0,x=r[v];for(null==l&&(l=wi);++g<u;)(l(h=r[g],x)<0||0!==l(x,x))&&(x=h,v=g);return 0===l(x,x)?v:void 0}},R.schemeAccent=$0,R.schemeBlues=Zg,R.schemeBrBG=Lg,R.schemeBuGn=Hg,R.schemeBuPu=qg,R.schemeCategory10=E0,R.schemeDark2=D0,R.schemeGnBu=Vg,R.schemeGreens=em,R.schemeGreys=tm,R.schemeOrRd=jg,R.schemeOranges=am,R.schemePRGn=Pg,R.schemePaired=I0,R.schemePastel1=M0,R.schemePastel2=L0,R.schemePiYG=Ng,R.schemePuBu=Ug,R.schemePuBuGn=Wg,R.schemePuOr=Rg,R.schemePuRd=Gg,R.schemePurples=nm,R.schemeRdBu=Og,R.schemeRdGy=Bg,R.schemeRdPu=Yg,R.schemeRdYlBu=_g,R.schemeRdYlGn=zg,R.schemeReds=im,R.schemeSet1=P0,R.schemeSet2=N0,R.schemeSet3=R0,R.schemeSpectral=Fg,R.schemeTableau10=O0,R.schemeYlGn=Xg,R.schemeYlGnBu=Kg,R.schemeYlOrBr=Qg,R.schemeYlOrRd=Jg,R.select=Gn,R.selectAll=function(r){return"string"==typeof r?new Mi([document.querySelectorAll(r)],[document.documentElement]):new Mi([r??[]],Bs)},R.selection=Na,R.selector=Ps,R.selectorAll=qi,R.set=lc,R.shuffle=function(r,l,u){for(var h,g,v=(u??r.length)-(l=null==l?0:+l);v;)g=Math.random()*v--|0,h=r[v+l],r[v+l]=r[g+l],r[g+l]=h;return r},R.stack=function(){var r=sn([]),l=ql,u=Hl,h=jy;function g(v){var x,w,k=r.apply(this,arguments),A=v.length,D=k.length,B=new Array(D);for(x=0;x<D;++x){for(var I,q=k[x],j=B[x]=new Array(A),K=0;K<A;++K)j[K]=I=[0,+h(v[K],q,K,v)],I.data=v[K];j.key=q}for(x=0,w=l(B);x<D;++x)B[w[x]].index=x;return u(B,w),B}return g.keys=function(v){return arguments.length?(r="function"==typeof v?v:sn(rp.call(v)),g):r},g.value=function(v){return arguments.length?(h="function"==typeof v?v:sn(+v),g):h},g.order=function(v){return arguments.length?(l=null==v?ql:"function"==typeof v?v:sn(rp.call(v)),g):l},g.offset=function(v){return arguments.length?(u=v??Hl,g):u},g},R.stackOffsetDiverging=function(r,l){if((w=r.length)>0)for(var u,h,g,v,x,w,k=0,A=r[l[0]].length;k<A;++k)for(v=x=0,u=0;u<w;++u)(g=(h=r[l[u]][k])[1]-h[0])>0?(h[0]=v,h[1]=v+=g):g<0?(h[1]=x,h[0]=x+=g):(h[0]=0,h[1]=g)},R.stackOffsetExpand=function(r,l){if((h=r.length)>0){for(var u,h,g,v=0,x=r[0].length;v<x;++v){for(g=u=0;u<h;++u)g+=r[u][v][1]||0;if(g)for(u=0;u<h;++u)r[u][v][1]/=g}Hl(r,l)}},R.stackOffsetNone=Hl,R.stackOffsetSilhouette=function(r,l){if((u=r.length)>0){for(var u,h=0,g=r[l[0]],v=g.length;h<v;++h){for(var x=0,w=0;x<u;++x)w+=r[x][h][1]||0;g[h][1]+=g[h][0]=-w/2}Hl(r,l)}},R.stackOffsetWiggle=function(r,l){if((g=r.length)>0&&(h=(u=r[l[0]]).length)>0){for(var u,h,g,v=0,x=1;x<h;++x){for(var w=0,k=0,A=0;w<g;++w){for(var D=r[l[w]],B=D[x][1]||0,I=(B-(D[x-1][1]||0))/2,q=0;q<w;++q){var j=r[l[q]];I+=(j[x][1]||0)-(j[x-1][1]||0)}k+=B,A+=I*B}u[x-1][1]+=u[x-1][0]=v,k&&(v-=A/k)}u[x-1][1]+=u[x-1][0]=v,Hl(r,l)}},R.stackOrderAppearance=Rm,R.stackOrderAscending=Om,R.stackOrderDescending=function(r){return Om(r).reverse()},R.stackOrderInsideOut=function(r){var l,u,h=r.length,g=r.map(Bm),v=Rm(r),x=0,w=0,k=[],A=[];for(l=0;l<h;++l)u=v[l],x<w?(x+=g[u],k.push(u)):(w+=g[u],A.push(u));return A.reverse().concat(k)},R.stackOrderNone=ql,R.stackOrderReverse=function(r){return ql(r).reverse()},R.stratify=function(){var r=_v,l=zv;function u(h){var g,v,x,w,k,A,D,B=h.length,I=new Array(B),q={};for(v=0;v<B;++v)k=I[v]=new Ol(g=h[v]),null!=(A=r(g,v,h))&&(A+="")&&(q[D="$"+(k.id=A)]=D in q?Hf:k);for(v=0;v<B;++v)if(k=I[v],null!=(A=l(h[v],v,h))&&(A+="")){if(!(w=q["$"+A]))throw new Error("missing: "+A);if(w===Hf)throw new Error("ambiguous: "+A);w.children?w.children.push(k):w.children=[k],k.parent=w}else{if(x)throw new Error("multiple roots");x=k}if(!x)throw new Error("no root");if(x.parent=Bv,x.eachBefore(function(j){j.depth=j.parent.depth+1,--B}).eachBefore(Df),x.parent=null,B>0)throw new Error("cycle");return x}return u.id=function(h){return arguments.length?(r=iu(h),u):r},u.parentId=function(h){return arguments.length?(l=iu(h),u):l},u},R.style=ta,R.sum=function(r,l){var u,h=r.length,g=-1,v=0;if(null==l)for(;++g<h;)(u=+r[g])&&(v+=u);else for(;++g<h;)(u=+l(r[g],g,r))&&(v+=u);return v},R.svg=Tt,R.symbol=function(){var r=sn(lp),l=sn(64),u=null;function h(){var g;if(u||(u=g=Js()),r.apply(this,arguments).draw(u,+l.apply(this,arguments)),g)return u=null,g+""||null}return h.type=function(g){return arguments.length?(r="function"==typeof g?g:sn(g),h):r},h.size=function(g){return arguments.length?(l="function"==typeof g?g:sn(+g),h):l},h.context=function(g){return arguments.length?(u=g??null,h):u},h},R.symbolCircle=lp,R.symbolCross=pm,R.symbolDiamond=gm,R.symbolSquare=bm,R.symbolStar=vm,R.symbolTriangle=ym,R.symbolWye=wm,R.symbols=Oy,R.text=xt,R.thresholdFreedmanDiaconis=function(r,l,u){return r=un.call(r,Ge).sort(wi),Math.ceil((u-l)/(2*(pa(r,.75)-pa(r,.25))*Math.pow(r.length,-1/3)))},R.thresholdScott=function(r,l,u){return Math.ceil((u-l)/(3.5*_r(r)*Math.pow(r.length,-1/3)))},R.thresholdSturges=Ui,R.tickFormat=Jf,R.tickIncrement=H,R.tickStep=Ta,R.ticks=ps,R.timeDay=Lc,R.timeDays=sb,R.timeFormatDefaultLocale=Ig,R.timeFormatLocale=yg,R.timeFriday=ug,R.timeFridays=db,R.timeHour=jh,R.timeHours=ab,R.timeInterval=zi,R.timeMillisecond=Jo,R.timeMilliseconds=rg,R.timeMinute=Vh,R.timeMinutes=ib,R.timeMonday=Nc,R.timeMondays=rb,R.timeMonth=Wh,R.timeMonths=hb,R.timeSaturday=hg,R.timeSaturdays=ub,R.timeSecond=Mc,R.timeSeconds=lg,R.timeSunday=Pc,R.timeSundays=pg,R.timeThursday=Rc,R.timeThursdays=cb,R.timeTuesday=cg,R.timeTuesdays=ob,R.timeWednesday=dg,R.timeWednesdays=lb,R.timeWeek=Pc,R.timeWeeks=pg,R.timeYear=Lr,R.timeYears=pb,R.timeout=Ia,R.timer=Ri,R.timerFlush=eo,R.touch=_s,R.touches=function(r,l){null==l&&(l=Ja().touches);for(var u=0,h=l?l.length:0,g=new Array(h);u<h;++u)g[u]=ur(r,l[u]);return g},R.transition=jn,R.transpose=Aa,R.tree=function(){var r=Fv,l=1,u=1,h=null;function g(k){var A=function(Y){for(var ne,te,se,fe,ve,Ae=new au(Y,0),qe=[Ae];ne=qe.pop();)if(se=ne._.children)for(ne.children=new Array(ve=se.length),fe=ve-1;fe>=0;--fe)qe.push(te=ne.children[fe]=new au(se[fe],fe)),te.parent=ne;return(Ae.parent=new au(null,0)).children=[Ae],Ae}(k);if(A.eachAfter(v),A.parent.m=-A.z,A.eachBefore(x),h)k.eachBefore(w);else{var D=k,B=k,I=k;k.eachBefore(function(Y){Y.x<D.x&&(D=Y),Y.x>B.x&&(B=Y),Y.depth>I.depth&&(I=Y)});var q=D===B?1:r(D,B)/2,j=q-D.x,K=l/(B.x+q+j),X=u/(I.depth||1);k.eachBefore(function(Y){Y.x=(Y.x+j)*K,Y.y=Y.depth*X})}return k}function v(k){var A=k.children,D=k.parent.children,B=k.i?D[k.i-1]:null;if(A){!function(q){for(var j,K=0,X=0,Y=q.children,ne=Y.length;--ne>=0;)(j=Y[ne]).z+=K,j.m+=K,K+=j.s+(X+=j.c)}(k);var I=(A[0].z+A[A.length-1].z)/2;B?(k.z=B.z+r(k._,B._),k.m=k.z-I):k.z=I}else B&&(k.z=B.z+r(k._,B._));k.parent.A=function(q,j,K){if(j){for(var X,Y=q,ne=q,te=j,se=Y.parent.children[0],fe=Y.m,ve=ne.m,Ae=te.m,qe=se.m;te=Mh(te),Y=Ih(Y),te&&Y;)se=Ih(se),(ne=Mh(ne)).a=q,(X=te.z+Ae-Y.z-fe+r(te._,Y._))>0&&(Hv(qv(te,q,K),q,X),fe+=X,ve+=X),Ae+=te.m,fe+=Y.m,qe+=se.m,ve+=ne.m;te&&!Mh(ne)&&(ne.t=te,ne.m+=Ae-ve),Y&&!Ih(se)&&(se.t=Y,se.m+=fe-qe,K=q)}return K}(k,B,k.parent.A||D[0])}function x(k){k._.x=k.z+k.parent.m,k.m+=k.parent.m}function w(k){k.x*=l,k.y=k.depth*u}return g.separation=function(k){return arguments.length?(r=k,g):r},g.size=function(k){return arguments.length?(h=!1,l=+k[0],u=+k[1],g):h?null:[l,u]},g.nodeSize=function(k){return arguments.length?(h=!0,l=+k[0],u=+k[1],g):h?[l,u]:null},g},R.treemap=function(){var r=jf,l=!1,u=1,h=1,g=[0],v=Ko,x=Ko,w=Ko,k=Ko,A=Ko;function D(I){return I.x0=I.y0=0,I.x1=u,I.y1=h,I.eachBefore(B),g=[0],l&&I.eachBefore(zf),I}function B(I){var q=g[I.depth],j=I.x0+q,K=I.y0+q,X=I.x1-q,Y=I.y1-q;X<j&&(j=X=(j+X)/2),Y<K&&(K=Y=(K+Y)/2),I.x0=j,I.y0=K,I.x1=X,I.y1=Y,I.children&&(q=g[I.depth+1]=v(I)/2,j+=A(I)-q,K+=x(I)-q,(X-=w(I)-q)<j&&(j=X=(j+X)/2),(Y-=k(I)-q)<K&&(K=Y=(K+Y)/2),r(I,j,K,X,Y))}return D.round=function(I){return arguments.length?(l=!!I,D):l},D.size=function(I){return arguments.length?(u=+I[0],h=+I[1],D):[u,h]},D.tile=function(I){return arguments.length?(r=iu(I),D):r},D.padding=function(I){return arguments.length?D.paddingInner(I).paddingOuter(I):D.paddingInner()},D.paddingInner=function(I){return arguments.length?(v="function"==typeof I?I:Bl(+I),D):v},D.paddingOuter=function(I){return arguments.length?D.paddingTop(I).paddingRight(I).paddingBottom(I).paddingLeft(I):D.paddingTop()},D.paddingTop=function(I){return arguments.length?(x="function"==typeof I?I:Bl(+I),D):x},D.paddingRight=function(I){return arguments.length?(w="function"==typeof I?I:Bl(+I),D):w},D.paddingBottom=function(I){return arguments.length?(k="function"==typeof I?I:Bl(+I),D):k},D.paddingLeft=function(I){return arguments.length?(A="function"==typeof I?I:Bl(+I),D):A},D},R.treemapBinary=function(r,l,u,h,g){var v,x,w=r.children,k=w.length,A=new Array(k+1);for(A[0]=x=v=0;v<k;++v)A[v+1]=x+=w[v].value;!function D(B,I,q,j,K,X,Y){if(B>=I-1){var ne=w[B];return ne.x0=j,ne.y0=K,ne.x1=X,void(ne.y1=Y)}for(var te=A[B],se=q/2+te,fe=B+1,ve=I-1;fe<ve;){var Ae=fe+ve>>>1;A[Ae]<se?fe=Ae+1:ve=Ae}se-A[fe-1]<A[fe]-se&&B+1<fe&&--fe;var qe=A[fe]-te,me=q-qe;if(X-j>Y-K){var Me=(j*me+X*qe)/q;D(B,fe,qe,j,K,Me,Y),D(fe,I,me,Me,K,X,Y)}else{var Se=(K*me+Y*qe)/q;D(B,fe,qe,j,K,X,Se),D(fe,I,me,j,Se,X,Y)}}(0,k,r.value,l,u,h,g)},R.treemapDice=Dc,R.treemapResquarify=Vv,R.treemapSlice=su,R.treemapSliceDice=function(r,l,u,h,g){(1&r.depth?su:Dc)(r,l,u,h,g)},R.treemapSquarify=jf,R.tsv=en,R.tsvFormat=ke,R.tsvFormatBody=_e,R.tsvFormatRow=Qe,R.tsvFormatRows=Oe,R.tsvFormatValue=nt,R.tsvParse=J,R.tsvParseRows=ce,R.utcDay=Oc,R.utcDays=mb,R.utcFriday=mg,R.utcFridays=xb,R.utcHour=Gh,R.utcHours=gb,R.utcMillisecond=Jo,R.utcMilliseconds=rg,R.utcMinute=Uh,R.utcMinutes=fb,R.utcMonday=_c,R.utcMondays=vb,R.utcMonth=Yh,R.utcMonths=kb,R.utcSaturday=vg,R.utcSaturdays=Cb,R.utcSecond=Mc,R.utcSeconds=lg,R.utcSunday=Bc,R.utcSundays=bg,R.utcThursday=zc,R.utcThursdays=wb,R.utcTuesday=fg,R.utcTuesdays=bb,R.utcWednesday=gg,R.utcWednesdays=yb,R.utcWeek=Bc,R.utcWeeks=bg,R.utcYear=Pr,R.utcYears=Tb,R.values=function(r){var l=[];for(var u in r)l.push(r[u]);return l},R.variance=or,R.version="5.16.0",R.voronoi=function(){var r=Uy,l=Gy,u=null;function h(g){return new bp(g.map(function(v,x){var w=[Math.round(r(v,x,g)/_n)*_n,Math.round(l(v,x,g)/_n)*_n];return w.index=x,w.data=v,w}),u)}return h.polygons=function(g){return h(g).polygons()},h.links=function(g){return h(g).links()},h.triangles=function(g){return h(g).triangles()},h.x=function(g){return arguments.length?(r="function"==typeof g?g:_m(+g),h):r},h.y=function(g){return arguments.length?(l="function"==typeof g?g:_m(+g),h):l},h.extent=function(g){return arguments.length?(u=null==g?null:[[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]],h):u&&[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},h.size=function(g){return arguments.length?(u=null==g?null:[[0,0],[+g[0],+g[1]]],h):u&&[u[1][0]-u[0][0],u[1][1]-u[0][1]]},h},R.window=qr,R.xml=Dt,R.zip=function(){return Aa(arguments)},R.zoom=function(){var r,l,u=o1,h=l1,g=u1,v=c1,x=d1,w=[0,1/0],k=[[-1/0,-1/0],[1/0,1/0]],A=250,D=os,B=xi("start","zoom","end"),I=500,j=0;function K(ie){ie.property("__zoom",Um).on("wheel.zoom",ve).on("mousedown.zoom",Ae).on("dblclick.zoom",qe).filter(x).on("touchstart.zoom",me).on("touchmove.zoom",Me).on("touchend.zoom touchcancel.zoom",Se).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function X(ie,Ce){return(Ce=Math.max(w[0],Math.min(w[1],Ce)))===ie.k?ie:new Nr(Ce,ie.x,ie.y)}function Y(ie,Ce,we){var Ee=Ce[0]-we[0]*ie.k,Fe=Ce[1]-we[1]*ie.k;return Ee===ie.x&&Fe===ie.y?ie:new Nr(ie.k,Ee,Fe)}function ne(ie){return[(+ie[0][0]+ +ie[1][0])/2,(+ie[0][1]+ +ie[1][1])/2]}function te(ie,Ce,we){ie.on("start.zoom",function(){se(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){se(this,arguments).end()}).tween("zoom",function(){var Ee=this,Fe=arguments,ct=se(Ee,Fe),It=h.apply(Ee,Fe),Ot=null==we?ne(It):"function"==typeof we?we.apply(Ee,Fe):we,Qt=Math.max(It[1][0]-It[0][0],It[1][1]-It[0][1]),gt=Ee.__zoom,rn="function"==typeof Ce?Ce.apply(Ee,Fe):Ce,dn=D(gt.invert(Ot).concat(Qt/gt.k),rn.invert(Ot).concat(Qt/rn.k));return function(Ct){if(1===Ct)Ct=rn;else{var Vt=dn(Ct),ri=Qt/Vt[2];Ct=new Nr(ri,Ot[0]-Vt[0]*ri,Ot[1]-Vt[1]*ri)}ct.zoom(null,Ct)}})}function se(ie,Ce,we){return!we&&ie.__zooming||new fe(ie,Ce)}function fe(ie,Ce){this.that=ie,this.args=Ce,this.active=0,this.extent=h.apply(ie,Ce),this.taps=0}function ve(){if(u.apply(this,arguments)){var ie=se(this,arguments),Ce=this.__zoom,we=Math.max(w[0],Math.min(w[1],Ce.k*Math.pow(2,v.apply(this,arguments)))),Ee=Ra(this);if(ie.wheel)ie.mouse[0][0]===Ee[0]&&ie.mouse[0][1]===Ee[1]||(ie.mouse[1]=Ce.invert(ie.mouse[0]=Ee)),clearTimeout(ie.wheel);else{if(Ce.k===we)return;ie.mouse=[Ee,Ce.invert(Ee)],rt(this),ie.start()}ed(),ie.wheel=setTimeout(function(){ie.wheel=null,ie.end()},150),ie.zoom("mouse",g(Y(X(Ce,we),ie.mouse[0],ie.mouse[1]),ie.extent,k))}}function Ae(){if(!l&&u.apply(this,arguments)){var ie=se(this,arguments,!0),Ce=Gn(R.event.view).on("mousemove.zoom",function(){if(ed(),!ie.moved){var ct=R.event.clientX-Ee,It=R.event.clientY-Fe;ie.moved=ct*ct+It*It>j}ie.zoom("mouse",g(Y(ie.that.__zoom,ie.mouse[0]=Ra(ie.that),ie.mouse[1]),ie.extent,k))},!0).on("mouseup.zoom",function(){Ce.on("mousemove.zoom mouseup.zoom",null),zs(R.event.view,ie.moved),ed(),ie.end()},!0),we=Ra(this),Ee=R.event.clientX,Fe=R.event.clientY;pr(R.event.view),yp(),ie.mouse=[we,this.__zoom.invert(we)],rt(this),ie.start()}}function qe(){if(u.apply(this,arguments)){var ie=this.__zoom,Ce=Ra(this),we=ie.invert(Ce),Ee=ie.k*(R.event.shiftKey?.5:2),Fe=g(Y(X(ie,Ee),Ce,we),h.apply(this,arguments),k);ed(),A>0?Gn(this).transition().duration(A).call(te,Fe,Ce):Gn(this).call(K.transform,Fe)}}function me(){if(u.apply(this,arguments)){var ie,Ce,we,Ee,Fe=R.event.touches,ct=Fe.length,It=se(this,arguments,R.event.changedTouches.length===ct);for(yp(),Ce=0;Ce<ct;++Ce)Ee=[Ee=_s(this,Fe,(we=Fe[Ce]).identifier),this.__zoom.invert(Ee),we.identifier],It.touch0?It.touch1||It.touch0[2]===Ee[2]||(It.touch1=Ee,It.taps=0):(It.touch0=Ee,ie=!0,It.taps=1+!!r);r&&(r=clearTimeout(r)),ie&&(It.taps<2&&(r=setTimeout(function(){r=null},I)),rt(this),It.start())}}function Me(){if(this.__zooming){var ie,Ce,we,Ee,Fe=se(this,arguments),ct=R.event.changedTouches,It=ct.length;for(ed(),r&&(r=clearTimeout(r)),Fe.taps=0,ie=0;ie<It;++ie)we=_s(this,ct,(Ce=ct[ie]).identifier),Fe.touch0&&Fe.touch0[2]===Ce.identifier?Fe.touch0[0]=we:Fe.touch1&&Fe.touch1[2]===Ce.identifier&&(Fe.touch1[0]=we);if(Ce=Fe.that.__zoom,Fe.touch1){var Ot=Fe.touch0[0],Qt=Fe.touch0[1],gt=Fe.touch1[0],rn=Fe.touch1[1],dn=(dn=gt[0]-Ot[0])*dn+(dn=gt[1]-Ot[1])*dn,Ct=(Ct=rn[0]-Qt[0])*Ct+(Ct=rn[1]-Qt[1])*Ct;Ce=X(Ce,Math.sqrt(dn/Ct)),we=[(Ot[0]+gt[0])/2,(Ot[1]+gt[1])/2],Ee=[(Qt[0]+rn[0])/2,(Qt[1]+rn[1])/2]}else{if(!Fe.touch0)return;we=Fe.touch0[0],Ee=Fe.touch0[1]}Fe.zoom("touch",g(Y(Ce,we,Ee),Fe.extent,k))}}function Se(){if(this.__zooming){var ie,Ce,we=se(this,arguments),Ee=R.event.changedTouches,Fe=Ee.length;for(yp(),l&&clearTimeout(l),l=setTimeout(function(){l=null},I),ie=0;ie<Fe;++ie)Ce=Ee[ie],we.touch0&&we.touch0[2]===Ce.identifier?delete we.touch0:we.touch1&&we.touch1[2]===Ce.identifier&&delete we.touch1;if(we.touch1&&!we.touch0&&(we.touch0=we.touch1,delete we.touch1),we.touch0)we.touch0[1]=this.__zoom.invert(we.touch0[0]);else if(we.end(),2===we.taps){var ct=Gn(this).on("dblclick.zoom");ct&&ct.apply(this,arguments)}}}return K.transform=function(ie,Ce,we){var Ee=ie.selection?ie.selection():ie;Ee.property("__zoom",Um),ie!==Ee?te(ie,Ce,we):Ee.interrupt().each(function(){se(this,arguments).start().zoom(null,"function"==typeof Ce?Ce.apply(this,arguments):Ce).end()})},K.scaleBy=function(ie,Ce,we){K.scaleTo(ie,function(){var Ee=this.__zoom.k,Fe="function"==typeof Ce?Ce.apply(this,arguments):Ce;return Ee*Fe},we)},K.scaleTo=function(ie,Ce,we){K.transform(ie,function(){var Ee=h.apply(this,arguments),Fe=this.__zoom,ct=null==we?ne(Ee):"function"==typeof we?we.apply(this,arguments):we,It=Fe.invert(ct),Ot="function"==typeof Ce?Ce.apply(this,arguments):Ce;return g(Y(X(Fe,Ot),ct,It),Ee,k)},we)},K.translateBy=function(ie,Ce,we){K.transform(ie,function(){return g(this.__zoom.translate("function"==typeof Ce?Ce.apply(this,arguments):Ce,"function"==typeof we?we.apply(this,arguments):we),h.apply(this,arguments),k)})},K.translateTo=function(ie,Ce,we,Ee){K.transform(ie,function(){var Fe=h.apply(this,arguments),ct=this.__zoom,It=null==Ee?ne(Fe):"function"==typeof Ee?Ee.apply(this,arguments):Ee;return g(Au.translate(It[0],It[1]).scale(ct.k).translate("function"==typeof Ce?-Ce.apply(this,arguments):-Ce,"function"==typeof we?-we.apply(this,arguments):-we),Fe,k)},Ee)},fe.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(ie,Ce){return this.mouse&&"mouse"!==ie&&(this.mouse[1]=Ce.invert(this.mouse[0])),this.touch0&&"touch"!==ie&&(this.touch0[1]=Ce.invert(this.touch0[0])),this.touch1&&"touch"!==ie&&(this.touch1[1]=Ce.invert(this.touch1[0])),this.that.__zoom=Ce,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(ie){bs(new r1(K,ie,this.that.__zoom),B.apply,B,[ie,this.that,this.args])}},K.wheelDelta=function(ie){return arguments.length?(v="function"==typeof ie?ie:Tu(+ie),K):v},K.filter=function(ie){return arguments.length?(u="function"==typeof ie?ie:Tu(!!ie),K):u},K.touchable=function(ie){return arguments.length?(x="function"==typeof ie?ie:Tu(!!ie),K):x},K.extent=function(ie){return arguments.length?(h="function"==typeof ie?ie:Tu([[+ie[0][0],+ie[0][1]],[+ie[1][0],+ie[1][1]]]),K):h},K.scaleExtent=function(ie){return arguments.length?(w[0]=+ie[0],w[1]=+ie[1],K):[w[0],w[1]]},K.translateExtent=function(ie){return arguments.length?(k[0][0]=+ie[0][0],k[1][0]=+ie[1][0],k[0][1]=+ie[0][1],k[1][1]=+ie[1][1],K):[[k[0][0],k[0][1]],[k[1][0],k[1][1]]]},K.constrain=function(ie){return arguments.length?(g=ie,K):g},K.duration=function(ie){return arguments.length?(A=+ie,K):A},K.interpolate=function(ie){return arguments.length?(D=ie,K):D},K.on=function(){var ie=B.on.apply(B,arguments);return ie===B?K:ie},K.clickDistance=function(ie){return arguments.length?(j=(ie=+ie)*ie,K):Math.sqrt(j)},K},R.zoomIdentity=Au,R.zoomTransform=Wm,Object.defineProperty(R,"__esModule",{value:!0})});var Soho=function(R){"use strict";var yo=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function wi(e){},logTimeEnd:function Fi(e){},enableConsoleLogging:!1,log:function(e,t){},getComponents:function(e){var t=(e?$(e):$("body")).find("*"),n=[];return t.each(function(i,a){var s=$(a).data();s&&Object.keys(s).length&&n.push({data:s,element:a})}),n}});function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach(function(i){or(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n})(e,t)}function Is(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zr(e,t,n){return(zr=Is()?Reflect.construct.bind():function(i,a,s){var o=[null];o.push.apply(o,a);var c=new(Function.bind.apply(i,o));return s&&_r(c,s.prototype),c}).apply(null,arguments)}function Un(e){return function(t){if(Array.isArray(t))return un(t)}(e)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,n){if(t){if("string"==typeof t)return un(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return un(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),window.MSInputMethodContext&&document.documentMode||(jQuery.event.special.touchstart={setup:function(e,t,n){t.includes("noPreventDefault")?this.addEventListener("touchstart",n,{passive:!1}):this.addEventListener("touchstart",n,{passive:!0})}},jQuery.event.special.touchmove={setup:function(e,t,n){this.addEventListener("touchmove",n,{passive:!0})}},jQuery.event.special.mousewheel={setup:function(e,t,n){this.addEventListener("mousewheel",n,{passive:!0})}});var $e={stripHTML:function(e){return e?e.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(e,t){if(!e)return"";if("number"==typeof e)return e;var n=("".concat(t||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(i,function(a,s){return n.indexOf("<"+s.toLowerCase()+">")>-1?a:""}).replace(i,function(a,s){return n.indexOf("<"+s.toLowerCase()+">")>-1?a:""}).replace(i,function(a,s){return n.indexOf("<"+s.toLowerCase()+">")>-1?a:""})},sanitizeConsoleMethods:function(e){var t=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof e?e:e.replace(t,"")},sanitizeHTML:function(e){var t=e.replace(/\bon\w+=\S+?(?=(>|&|<| |"))/g,"");return t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,""),(t=this.sanitizeConsoleMethods(t)).replace(/<\/script>/g,"")},removeWhiteSpaceCharacters:function(e){if(!e)return"";var t=e[0].innerHTML;return t=t.replace(/\s+/g," ").trim(),e[0].innerHTML=t,e[0].innerHTML},ensureAlphaNumeric:function(e){return"number"==typeof e?e:this.stripTags(e).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(e){return"number"==typeof e?e:this.stripTags(e).replace(/[^a-z0-9 ]/gi,"","")},toCamelCase:function(e){return"string"!=typeof e?e:(e=this.stripTags(e).replace(/[^a-z0-9 ]/gi,"","")).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,function(t,n){return n.toUpperCase()})},escapeHTML:function(e){var t=e;if("string"==typeof t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","\\":"&bsol;"};return t.replace(/[&<>"'\\]/gi,function(i){return n[i]})}return t},unescapeHTML:function(e){if(""===e)return"";if("string"==typeof e){var t=function(i){return(e.match(i)||[""])[0]},n=(new DOMParser).parseFromString(e,"text/html");return"".concat(t(/^\s*|\\/)).concat(n.documentElement.textContent.trim()).concat(t(/\s*$|\\/))}return e},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&bsol;").replace(/"/g,"&quot;")},isUrlLocal:function(e){return""!==e&&("/"===e[0]&&(1===e.length||"/"!==e[1]&&"\\"!==e[1])||e.length>1&&"~"===e[0]&&"/"===e[1])||e.length>=1&&"#"===e[0]}},ue={isValidElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement},getAttributes:function(e){return e&&(e instanceof HTMLElement||e instanceof SVGElement)?e.attributes:{}},hasAnyClass:function(e){var t=e.className;return t&&t.length>0},hasClass:function(e,t){var n=!1;if(null==e||!e?.getAttribute)return n;if("classList"in e)n=e.classList.contains(t);else{var i=e.getAttribute("class");n=!!i&&-1!==i.split(/\s+/).indexOf(t)}return n},addClass:function(e){if(e){for(var t="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)e.classList?e.classList.add(i[s]):ue.hasClass(e,[s])||(t.length&&(t+=" "),t+=i[s]);t.length&&$(e).addClass(t)}},removeClass:function(e){if(e){for(var t="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)e.classList?e.classList.remove(i[s]):ue.hasClass(e,[s])||(t.length&&(t+=" "),t+=i[s]);t.length&&$(e).removeClass(t)}},isElement:function(e){return!!(e instanceof HTMLElement||e instanceof SVGElement||e instanceof $&&e.length)},getDimensions:function(e){if(!ue.isElement(e))return{};if(e instanceof $){if(!e.length)return{};e=e[0]}var t=e.getBoundingClientRect(),n={};for(var i in t)isNaN(t[i])||(n[i]=t[i]);return n},prepend:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("afterbegin",this.xssClean(t,n))},append:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("beforeend",this.xssClean(t,n))},after:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("afterend",this.xssClean(t,n))},remove:function(e){var t=e;e instanceof $&&e.length&&(t=t[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&e.parentNode&&e.parentNode.removeChild(e)},setAttribute:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.setAttribute("attribute",n)},xssClean:function(e,t){var n=e;return t&&"*"!==t&&(n=$e.stripTags(e,t)),"*"===t&&(n=$e.sanitizeHTML(e)),n},html:function(e,t,n){var i=e;e instanceof $&&e.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&(i.innerHTML=this.xssClean(t,n))},parents:function(e,t,n){var i,a=[];if(!ue.isValidElement(e))return a;for(;e.parentNode&&(!n||!a.length);)(i=e=e.parentNode)!==document&&i.matches(t)&&a.push(i);return n?a[0]:a},getNextSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}},getPreviousSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}},getSiblings:function(e){return e instanceof $&&e.length&&(e=e[0]),[].slice.call(e.parentNode.children).filter(function(t){return t!==e})},getSimpleSelector:function(e){var t=e.tagName.toLowerCase(),n=e.id?"#".concat(e.id):"",i=e.className?".".concat(e.className.split(" ").join(".")):"";return"".concat(t).concat(n).concat(i)}},it={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},xo=Object.keys(it);function Ms(e,t,n){var i;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var c=this;function d(){n||e.apply(c,s),i=null}i?clearTimeout(i):n&&e.apply(c,s),i=setTimeout(d,t||250)}}it.available=xo,it.current=function(){var e=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return e?(e.getPropertyValue("content")||"").replace(/"/g,""):""},it.isAbove=function(e){var t=it[e];return!!t&&$(window).width()>t-1},it.isBelow=function(e){var t=it[e];return!!t&&$(window).width()<t},it.compare=function(){this.last||(this.last="");var e=this.current();this.last!==e&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:e}]),this.last=e)},it.isHidden=function(e){if(!e||!ue.isElement(e))return!1;var t=e.classList;if(!t.length)return!1;if(t.contains("hidden"))return!0;var n={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],i="hidden-".concat(n),a="visible-".concat(n,"-");return!!t.contains(i)||(t.toString().indexOf(a),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&it.isHidden($(this).first()[0])},$.fn.debouncedResize=function(e){return e?this.bind("resize",Ms(e)):this.trigger("debouncedResize")};var Ie={browser:{},features:{resizeObserver:typeof ResizeObserver<"u",touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.80.2"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=navigator.platform,n=$("html"),i="";if(-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")&&-1===e.indexOf("Android")&&(i+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)||Ie.browser.isIPad()){var a=/constructor/i.test(window.HTMLElement),s=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!a||s)&&(this.browser.name="wkwebview",i+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}if(-1!==e.indexOf("Chrome")&&(i+="is-chrome ",this.browser.name="chrome"),["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)>-1&&!/Linux/.test(t)&&(i+="is-mac ",this.os.name="mac"),e.indexOf("Firefox")>0&&(i+="is-firefox ",this.browser.name="firefox"),e.match(/Edg\//)&&(i+="ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",i+="ie-edge".concat(this.browser.version)),e.match(/Trident/)&&(i+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||e.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(i+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(i+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(i+="ie10 ",this.browser.version="10"):e.match(/Trident\/7\./)&&(i+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(e)||Ie.browser.isIPad()){i+="ios ",this.os.name="ios";for(var o=["iPod","iPad","iPhone"],c=0;c<o.length;c++)new RegExp(o[c]).test(e)&&(i+="".concat(o[c].toLowerCase()," "),this.device=o[c])}/Android/.test(e)&&(i+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(t)&&(this.os.name="linux"),n.addClass(i)},addDeviceSpecs:function(){var e,t,n,i=navigator.appVersion,a=navigator.userAgent,s=navigator.appName,o=" ".concat(parseFloat(navigator.appVersion)),c=parseInt(navigator.appVersion,10),d="";-1!==(t=a.indexOf("Opera"))&&(s="Opera",o=a.substring(t+6),-1!==(t=a.indexOf("Version"))&&(o=a.substring(t+8))),-1!==(t=a.indexOf("OPR"))?(s="Opera",o=a.substring(t+4)):-1!==(t=a.indexOf("Edg"))?(s="Microsoft Edge",o=a.substring(t+4)):-1!==(t=a.indexOf("MSIE"))?(s="Microsoft Internet Explorer",o=a.substring(t+5)):-1!==(t=a.indexOf("Chrome"))?(s="Chrome",o=a.substring(t+7),a.indexOf("Edg")>-1&&(d="Microsoft Edge"),Number(o.substring(0,3))>=108&&(o=o.substring(0,3))):-1!==(t=a.indexOf("Safari"))?(s="Safari",o=a.substring(t+7),-1!==(t=a.indexOf("Version"))&&(o=a.substring(t+8))):this.browser.isWKWebView()?(s="WKWebView",o="",c=""):-1!==(t=a.indexOf("Firefox"))?(s="Firefox",o=a.substring(t+8)):-1!==a.indexOf("Trident/")?(s="Microsoft Internet Explorer",o=a.substring(a.indexOf("rv:")+3)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(s=a.substring(e,t),o=a.substring(t+1),s.toLowerCase()===s.toUpperCase()&&(s=navigator.appName)),-1!==(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!==(n=o.indexOf(" "))&&(o=o.substring(0,n)),-1!==(n=o.indexOf(")"))&&(o=o.substring(0,n)),c=" ".concat(parseInt(o,10)),isNaN(c)&&(o=" ".concat(parseFloat(navigator.appVersion)),c=parseInt(navigator.appVersion,10));var p=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),f="-",m=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var b in m){var C=m[b];if(C.r.test(a)){f=C.s;break}}var T="-";switch(/Windows/.test(f)&&(T=/Windows (.*)/.exec(f)[1]),f){case"Windows 10":T="",f="Windows";break;case"Mac OS X":T="",f="Mac OS";break;case"Android":T=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":T=/OS (\d+)_?(\d+)?/.exec(a),T="".concat(T[1],".").concat(T[2],".").concat(0|T[3])}Ie.browser.isIPad()&&(T=a.substr(a.indexOf("Version"),a.substr(a.indexOf("Version")).indexOf(" ")).replace("Version/",""),f="IOS"),this.devicespecs={currentBrowser:s,browserVersion:o.trim(),browserMajorVersion:c,isMobile:p||Ie.browser.isIPad(),os:f,currentOSVersion:T,browserVersionName:d}},addGlobalResize:function(){$(window).debouncedResize(function(){$("body").triggerHandler("resize",[window]),it.compare()}),$(window).on("orientationchange load",function(){return it.compare()})},removeGlobalEvents:function(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function ps(e){return this.init(e)}function H(e,t,n){var i=$.Deferred();if(!ue.isElement(e))return i.reject();if(e instanceof $&&e.length&&(e=e[0]),null==t)return i.resolve();if(isNaN(n)&&(n=0),t=Math.round(t),(n=Math.round(n))<0)return i.fail();if(0===n)return e.scrollLeft+=t,i.resolve();var a=Date.now(),s=a+n,o=e.scrollLeft,c=t,d=e.scrollLeft;return setTimeout(function p(){if(e.scrollLeft===d){var f=Date.now(),m=function(C,T,S){if(S<=C)return 0;if(S>=T)return 1;var M=(S-C)/(T-C);return M*M*(3-2*M)}(a,s,f),b=Math.round(o+c*m);e.scrollLeft=b,f>=s?i.resolve():e.scrollLeft!==d||e.scrollLeft===b?(d=e.scrollLeft,setTimeout(p,0)):i.resolve()}else i.reject()},0),i}function Ta(e,t){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(e,t)}Ie.browser.isEdge=function(){return"edge"===Ie.browser.name},Ie.browser.isIE11=function(){return"ie"===Ie.browser.name&&"11"===Ie.browser.version},Ie.browser.isSafari=function(){return"safari"===Ie.browser.name||"wkwebview"===Ie.browser.name},Ie.browser.isIE10=function(){return"ie"===Ie.browser.name&&"10"===Ie.browser.version},Ie.browser.isFirefox=function(){return"firefox"===Ie.browser.name},Ie.browser.isIPad=function(){return!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&void 0!==navigator.standalone)},Ie.set(),ps.prototype={init:function(e){!this.element&&(e instanceof HTMLElement||e instanceof SVGElement)&&(this.element=e);var t=$(this.element),n=!1,i=!1,a=!1;if(t.is(".checkbox, .radio, .switch")){var s=t.next();s.is('[type="hidden"]')&&(s=s.next()),this.label=s[0],t.addClass("hide-focus").on("focusin.hide-focus",function(c){n||i||a||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[c])),n=!1,i=!0,a=!1}).on("focusout.hide-focus",function(c){t.addClass("hide-focus"),a=s.is(a),n=!1,i=!1,t.triggerHandler("hidefocusadd",[c])}),s.on("mousedown.hide-focus",function(c){a=this,n=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[c])})}else{var o=function(c){n=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[c])};Ie.features.touch&&t.on("touchstart.hide-focus",function(c){o(c)}),t.addClass("hide-focus").on("mousedown.hide-focus",function(c){o(c)}).on("focusin.hide-focus",function(c){n||i||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[c])),n=!1,i=!0}).on("focusout.hide-focus",function(c){t.addClass("hide-focus"),n=!1,i=!1,t.triggerHandler("hidefocusadd",[c])})}return this},updated:function(){return this.teardown().init()},teardown:function(){var e;return this.label&&$(this.label).off("mousedown.hide-focus"),$(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),null===(e=this.element)||void 0===e||null==e||e.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each(function(){var e=$.data(this,"hidefocus");e?e.updated():(e=$.data(this,"hidefocus",new ps(this))).destroy=function(){this.teardown(),$.removeData(this,"hidefocus"),this.element=void 0}})},$.fn.smoothScroll=function(e,t){return H(this,e,t)},$.fn.bindFirst=function(e,t){this.on(e,t),this.each(function(){var n=$._data(this,"events")[e.split(".")[0]],i=n.pop();n.splice(0,0,i)})};var Ui=[];function pa(e){return $.expr.filters.visible(e)&&!$(e).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.fn.cssPropSupport=function(e){if(!e)return null;var t=$("<div></div>")[0],n=e.toString(),i=["Moz","Webkit","O","ms"],a=n.charAt(0).toUpperCase()+n.substr(1);if(e in t.style)return $(t).remove(),e;for(var s=0;s<i.length;s++){var o=i[s]+a;if(o in t.style)return $(t).remove(),o}return $(t).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(e){return t=e,isNaN($.attr(e,"tabindex")),s=t.nodeName.toLowerCase(),o=!isNaN($.attr(t,"tabindex")),"area"===s?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&!!(a=$("img[usemap=#".concat(i,"]"))[0])&&pa(a)):!!pa(t)&&(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&void 0!==t.href||o);var t,n,i,a,s,o}}),$.fn.listEvents=function(){var e={};return this.each(function(){e=$._data(this,"events")}),e};var _={};function lr(e){return"object"===Ge(e)||"function"==typeof e}function Hi(e){return"function"==typeof e?e():e}_.uniqueId=function(e,t,n,i){var a=e.id;if(a&&$("#".concat(a)).length<2)return a;n=n?"".concat(n,"-"):"",i=i?"-".concat(i):"",t=t||_.getArrayFromList(e.classList).join("-"),Ui[t]||(Ui[t]=1);var s="".concat(n).concat(t,"-").concat(Ui[t]).concat(i);return Ui[t]+=1,s},_.parseSettings=function(e,t){var n={};if(!e||!(e instanceof HTMLElement)&&!(e instanceof $)||e instanceof $&&!e.length)return n;e instanceof $&&(e=e[0]);var s=e.getAttribute(t=t||"data-options");if(!s||"string"!=typeof s||-1===s.indexOf("{"))return n;function o(c){return c.replace(/'/g,'"')}try{n=JSON.parse(o(s))}catch{n=JSON.parse(o(s.replace(/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,'$1"$2":').replace(/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,':"$2"')))}return n},_.parseOptions=function(e,t){return _.parseSettings(e,t)},$.fn.parseOptions=function(e,t){var n=[],i=this;return e instanceof HTMLElement||e instanceof SVGElement||e instanceof $?i=$(e):(t=e,e=void 0),i.each(function(a,s){n.push({element:this,options:_.parseOptions(s,t)})}),1===n.length?n[0].options:n},_.coerceToBoolean=function(e){return!/^(false|0)$/i.test(e)&&!!e},_.coerceSettingsToBoolean=function(e,t){var n,i;for(t&&Array.isArray(t)||Object.keys(e).forEach(function(a){t.push(a)}),n=0,i=t.length;n<i;n++)e[t[n]]=_.coerceToBoolean(e[t[n]]);return e},$.fn.timer=function(e,t){var n,i=$(this),a=0;function s(){n=setInterval(function(){i.triggerHandler("update",[{counter:a+=10}]),a>t&&(i.triggerHandler("timeout"),e.apply(arguments),clearInterval(n),a=0)},10)}return s(),{event:this,cancel:function(){i.triggerHandler("cancel"),clearInterval(n),a=0},pause:function(){i.triggerHandler("pause"),clearInterval(n)},resume:function(){i.triggerHandler("resume"),s()}}},$.copyToClipboard=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(t)}}},$.fn.clearable=function(e){var t=this;this.element=$(this),this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),null!=e&&e?.tabbable&&(this.xButton=$('<button type="button" class="btn-icon hide-focus close"></button>').append($.createIconElement({classes:"close",icon:"close"}).icon())),this.clear=function(){t.element.val("").trigger("change").focus().trigger("cleared"),t.checkContents()},this.handleKeydown=function(i){var a=i.key;("Enter"===a||i.altKey&&("Delete"===a||"Backspace"===a))&&(i.preventDefault(),t.clear())},this.checkContents=function(){var i=t.element.val();i&&i.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(t.element),this.xButton[0].tabIndex=null!=e&&e?.tabbable?0:-1,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown),null!=e&&e?.tabbable&&this.xButton.hideFocus();var n=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(n).on(n,function(){t.checkContents()}),this.checkContents()},_.actualChar=function(e){var t=e.which,n={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},i={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(n,t)&&(t=n[t]),t>=96&&t<=105&&(t-=48),!e.shiftKey&&t>=65&&t<=90?String.fromCharCode(t+32):!e.shiftKey&&t>=37&&t<=40?"":e.shiftKey&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:String.fromCharCode(t)},$.actualChar=function(e){return _.actualChar(e)},_.equals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},ue.convertToHTMLElement=function(e){return e instanceof HTMLElement?e:e instanceof $?e=e.length?e[0]:void 0:void 0},ue.focusableElems=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=['button:not([disabled]):not([tabindex="-1"])','[href]:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','div.dropdown:not(.is-disabled):not([tabindex="-1"])','div.multiselect:not(.is-disabled):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(t).filter(function(s){return-1===n.indexOf(s)}),a=Un(e.querySelectorAll(i.join(", ")));return a.filter(function(s){return"use"!==s.tagName.toLowerCase()})},_.isPlainObject=function(e){return!(!e||"[object Object]"!==Object.prototype.toString.call(e)||Object.getPrototypeOf(e)&&(null===e||"object"!==Ge(e)||Object.getPrototypeOf(e)!==Object.prototype))},_.mergeByPosition=function(e,t){var n,i=Math.max((null===(n=e)||void 0===n||null==n?void 0:n.length)||0,(null==t||null==t?void 0:t.length)||0);if(e||(e=[]),0===i)return[];for(var a=0;a<i;a++)null!=t[a]&&(e[a]=t[a]);return e||[]},_.extend=function e(){var t=arguments[0]||{},n=!1,i=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t=Array.isArray(arguments[1])?[]:{},i++);for(var a=function(s){for(var o in s){if(s.hasOwnProperty(o))if(s[o]instanceof jQuery)t[o]=$(s[o]);else if(n&&"[object Object]"===Object.prototype.toString.call(s[o])){var c=s[o],d=_.isPlainObject(c),p=Array.isArray(c)?[]:{};t[o]=d?e(!0,p,t[o],c):c}else Array.isArray(s[o])?t[o]=_.mergeByPosition(t[o],s[o]):void 0!==s[o]&&(t[o]=void 0===s[o]&&void 0!==t[o]?t[o]:s[o]);s.hasOwnProperty(o)||t[o]||"[object Function]"!==Object.prototype.toString.call(s[o])||(t[o]=s[o])}};i<arguments.length;i++)a(arguments[i]);return t},_.fixSVGIcons=function e(t){if(("ie"===Ie.browser.name||"11"===Ie.browser.version)&&void 0!==t){var n="http://www.w3.org/1999/xlink";if(t instanceof $){if(!t.length)return;if(1!==t.length)return void t.each(function(i,a){e(a)});t=t[0]}t instanceof NodeList?Array.prototype.forEach.call(t,function(i){e(i)}):setTimeout(function(){for(var i=t.getElementsByTagName("use"),a=0;a<i.length;a++){var s=i[a].getAttributeNS(n,"href");i[a].setAttributeNS(n,"href","x"),i[a].setAttributeNS(n,"href",s)}},1)}},_.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},_.getContainerScrollDistance=function(e){if(!ue.isElement(e))return[];var t=[];return $(e).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each(function(){t.push({element:this,left:this.scrollLeft,top:this.scrollTop})}),document.body.classList.contains("no-scroll")||t.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),t},_.getHiddenSize=function(e,t){var n={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!ue.isElement(e))return n.dims;e=$(e),t=La(La({},n),t);var i=ue.isElement(t.parentElement);i&&(e=e.clone().appendTo(t.parentElement));var a=t.dims,s=e.parents().add(e),o={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},c=[];return s.each(function(){var d=this,p={};Object.keys(o).forEach(function(f){d.style[f]&&(p[f]=d.style[f],d.style[f]=o[f])}),c.push(p)}),a.padding={bottom:e.css("padding-bottom"),left:e.css("padding-left"),right:e.css("padding-right"),top:e.css("padding-top")},a.width=e.width(),a.outerWidth=e.outerWidth(t.includeMargin),a.innerWidth=e.innerWidth(),a.scrollWidth=e[0].scrollWidth,a.height=e.height(),a.innerHeight=e.innerHeight(),a.outerHeight=e.outerHeight(t.includeMargin),a.scrollHeight=e[0].scrollHeight,s.each(function(d){var p=this,f=c[d];Object.keys(o).forEach(function(m){f[m]&&(p.style[m]=f[m])})}),i&&e.remove(),a},$.fn.getHiddenSize=function(e){return _.getHiddenSize(this,e)},_.isString=function(e){return"string"==typeof e||e instanceof String},_.isNumber=function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},_.safeSetSelection=function(e,t,n){e instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(e.type)&&(t&&void 0===n&&(n=t),document.activeElement===e&&("android"===Ie.os.name?Ta(function(){e.setSelectionRange(t,n,"none")},0):e.setSelectionRange(t,n,"none")))},_.mergeSettings=function(e,t,n){return t&&lr(t)||(t=lr(n)?n:{}),_.extend(!0,{},Hi(n),Hi(t),void 0!==e?_.parseSettings(e):{})},_.isHTML=function(e){return/(<([^>]+)>)/i.test(e)};var Aa={convertDelayToFPS:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return e/16.7},convertFPSToDelay:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return 16.7*e},isFinite:function(e){return"number"==typeof e&&e==e&&e!==1/0&&e!==-1/0}};_.forEach=function(e,t,n){for(var i=0;i<e.length;i++)t.call(n,e[i],i,e)},Aa.sign=function(e){return Math.sign?Math.sign(e):0==(e=+e)||isNaN(e)?e:e>0?1:-1},_.getArrayFromList=function(e){return Function.prototype.call.bind(Array.prototype.slice)(e)},_.getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},_.deepCopy=function(e){return _.extend(!0,Array.isArray(e)?[]:{},e)},_.isSubscribedTo=function(e,t,n,i){var a=$._data(e).events;for(var s in a)if(s===n&&(1!==a[s].length||a[s][0].namespace!==i))return!0;return!1},_.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},_.getSiblingsHeight=function(e){return ue.getSiblings(e).map(function(t){return t.offsetHeight}).reduce(function(t,n){return t+n},0)},_.getParentAvailableHeight=function(e){return e.parentNode.offsetHeight-_.getSiblingsHeight(e)},_.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},_.toggleCompactMode=function(e){var t="form-layout-compact",n=e.classList.contains(t);n?e.classList.remove(t):e.classList.add(t);for(var i=e.querySelectorAll(".datagrid-container"),a=0;a<i.length;a++){var s=$(i[a]).data("datagrid");if(!s.rowHeight)return;n?s.rowHeight(s.oldRowHeight||"large"):(s.oldRowHeight=s.settings.rowHeight,s.rowHeight("extra-small"))}},_.addAttributes=function(e,t,n,i,a){if(n){var s=function(c,d){!e[0]||!a&&e[0].hasAttribute(c)||e.attr(c,d+(i?"-".concat(i.toLowerCase()):""))};if(Array.isArray(n))n.forEach(function(c){var d="function"==typeof c.value?c.value(t):c.value;s(c.name,d)});else{var o="function"==typeof n.value?n.value(t):n.value;s(n.name,o)}}},_.stringAttributes=function(e,t,n){var i="";if(!t)return i;if(Array.isArray(t))return t.forEach(function(s){var o="function"==typeof s.value?s.value(e):s.value;i+=" ".concat(s.name,'="').concat(o+(n?"-".concat(n):""),'"')}),i;var a="function"==typeof t.value?t.value(e):t.value;return i+=" ".concat(t.name,'="').concat(a+(n?"-".concat(n.toLowerCase()):""),'"')},_.getAttribute=function(e,t,n){var i;return"string"==typeof t&&t.length&&Array.isArray(n)&&n.forEach(function(a){i||a.name!==t||(i="function"==typeof a.value?a.value(e):a.value)}),i},_.waitForTransitionEnd=function(e,t){return new Promise(function(n){e.addEventListener("transitionend",function i(a){a.propertyName===t&&(e.removeEventListener("transitionend",i),n())})})};var Fr={isEmpty:function(e){return 0===Object.keys(e).length&&e.constructor===Object}},at={EMPTY:"",splice:function(e,t,n,i){return e.slice(0,t)+i+e.slice(t+Math.abs(n))},removeDuplicates:function(e){return e.split("").filter(function(t,n,i){return i.indexOf(t)===n}).join("")},containsHTML:function(e){return/<[a-z][\s\S]*>/i.test(e)},stripWhitespace:function(e){return e.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},toBoolean:function(e){var t=+e;return isNaN(t)?!!String(e).toLowerCase().replace(!1,""):!!t},textWidth:function(e,t,n){var i=document.createElement("canvas").getContext("2d");i.font=n||"14px arial";var a=i.measureText(e);return Math.round(a.width+(t||0))},padDate:function(e,t,n){return e+"0".concat(t+1).slice(-2)+"0".concat(n).slice(-2)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},count:function(e,t){return e.split(t).length-1}},fs={truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString(),i=n.split(".");return i[1]=i[1]?i[1].substr(0,t):"","".concat(i[0],".").concat(i[1])},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return fs.toFixed(e,t)},fixTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t>10&&e.toString().indexOf(".")>-1?e.toLocaleString("en-US",{useGrouping:!1,minimumFractionDigits:t}):(+(Math.round(+(e+"e"+t))+"e"+-t)).toFixed(t)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString(),i=!1;"-"===n.substr(0,1)&&(i=!0,n=n.replace("-",""));var a="",s=n.split("."),o=[s[0].substr(0,10),s[0].substr(10),s[1]],c=o[0],d=o[1];return a=this.fixTo((d||c)+(o[2]?".".concat(o[2]):""),t).toString(),d&&11===a.length&&"10000000000"===a&&(a="0000000000",c=(parseInt(c,10)+1).toString()),d&&"0"!==d.substr(0,1)&&(a=c+a),d&&"0"===d.substr(0,1)&&(a="".concat(c).concat(a)),i?"-".concat(a):a},decimalPlaces:function(e){return Math.floor(e)===e||-1===e.toString().indexOf(".")?0:e.toString().split(".")[1].length||0}},pt={};function Ls(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}pt.hexToRgba=function(e,t){var n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x".concat(n.join("")),"rgba(".concat([n>>16&255,n>>8&255,255&n].join(","),",").concat(t.toString(),")")):""},pt.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},pt.rgbToHex=function(e,t,n){return"object"!==Ge(e)||"number"!=typeof e.r&&"string"!=typeof e.r||(t=e.g,n=e.b,e=e.r),"#".concat(Ls(e)).concat(Ls(t)).concat(Ls(n))},pt.rgbToHsl=function(e,t,n){"object"!==Ge(e)||"number"!=typeof e.r&&"string"!=typeof e.r||(t=e.g,n=e.b,e=e.r),e=Number(e),t=Number(t),n=Number(n),e/=255,t/=255,n/=255;var i=Math.min(e,t,n),a=Math.max(e,t,n),s=a-i,o=0,c=0,d=0;return o=0===s?0:a===e?(t-n)/s%6:a===t?(n-e)/s+2:(e-t)/s+4,(o=Math.round(60*o))<0&&(o+=360),d=(a+i)/2,0!==s&&(c=s/(1-Math.abs(2*d-1))),{h:o,s:c=+(100*c).toFixed(1),l:d=+(100*d).toFixed(1)}},pt.hslToRgb=function(e,t,n){"object"!==Ge(e)||"number"!=typeof e.h&&"string"!=typeof e.h||(t=(e=e.h).s,n=e.l),e=Number(e),t=Number(t),n=Number(n),t/=100,n/=100;var i=(1-Math.abs(2*n-1))*t,a=i*(1-Math.abs(e/60%2-1)),s=n-i/2,o=0,c=0,d=0;return 0<=e&&e<60?(o=i,c=a,d=0):60<=e&&e<120?(o=a,c=i,d=0):120<=e&&e<180||180<=e&&e<240?(o=0,c=a,d=i):240<=e&&e<300?(o=a,c=0,d=i):300<=e&&e<360&&(o=i,c=0,d=a),{r:o=Math.round(255*(o+s)),g:c=Math.round(255*(c+s)),b:d=Math.round(255*(d+s))}},pt.getLuminousColorShade=function(e,t){e=this.validateHex(e).substr(1),t=t||0;var n,i,a="#";for(i=0;i<3;i++)n=parseInt(e.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+="00".concat(n).substr(n.length);return a},pt.validateHex=function(e){return(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#".concat(e)},pt.getContrastColor=function(e,t,n){e=e?e.replace("#",""):"";var i=function(a){return parseInt(e.substr(a,2),16)};return(299*i(0)+587*i(2)+114*i(4))/1e3>=128?n||"black":t||"white"},pt.getDesaturatedColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=e?e.replace("#",""):"";var n=pt.hexToRgb(e),i=.3086*n.r+.6094*n.g+.082*n.b;return n.r=Math.round(n.r*t+i*(1-t)),n.g=Math.round(n.g*t+i*(1-t)),n.b=Math.round(n.b*t+i*(1-t)),pt.rgbToHex(n.r,n.g,n.b)},pt.isLighter=function(e,t){var n=pt.hexToRgb(e),i=pt.hexToRgb(t),a=pt.rgbToHsl(n),s=pt.rgbToHsl(i);return a.l<=s.l};var gs=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],Ei="",Ua=!1;"object"===Ge(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(Ei=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(Ua=window.SohoConfig.minifyCultures));var P={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:Ei,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tl",default:"tl-PH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tl-PH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pt-BR","pt-PT"],defaultLocale:"en-US",minify:Ua,updateLanguageTag:function(e){var t=$("html");2===e.length&&(e=this.defaultLocales.filter(function(n){return n.lang===e})),t.attr("lang",e),this.isRTL()?t.attr("dir","rtl"):t.removeAttr("dir"),this.isRTL()&&P.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var e=document.getElementsByTagName("script"),t=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,n=0;n<e.length;n++){var i=e[n].src,a=i.indexOf("?");if(""!==i&&a>-1&&(i=i.substr(0,a)),"sohoxi-script"===e[n].id)return"".concat(i.substring(0,i.lastIndexOf("/")),"/");i.match(t)&&(this.culturesPath="".concat(i.replace(t,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var e=!1,t=document.getElementsByTagName("script"),n=0;n<t.length;n++)t[n].src.indexOf("cultures")>-1&&(e=!0);return e},correctLocale:function(e){"in-ID"===e&&(e="id-ID"),"iw"===e.substr(0,2)&&(e="he-IL");var t=e.split("-")[0];if(-1===this.supportedLocales.indexOf(e)){if((e=this.defaultLocales.filter(function(n){return n.lang===t}))&&e[0])return e[0].default;e=this.defaultLocale}return e},correctLanguage:function(e){var t;"en-"===(null===(t=e)||void 0===t||null==t?void 0:t.substr(0,3))&&(e=e.substr(0,2));var n=this.defaultLocales.filter(function(i){return i.lang===e});return n&&n[0]?this.remapLanguage(e):n=this.remapLanguage(e)},remapLanguage:function(e){var t=e;return"in"===e&&(t="id"),"iw"===e&&(t="he"),"nb"!==e&&"nn"!==e&&"nb-NO"!==e&&"nn-NO"!==e||(t="no"),t},addCulture:function(e,t,n){var i=e.substr(0,2);if(this.cultures[e]=t,this.cultures[e].name=e,t.messages)this.languages[i]={name:i,direction:t.direction||(n?n.direction:""),nativeName:t.nativeName||(n?n.nativeName:""),messages:t.messages||(n?n.messages:{})},this.languages[e]={name:e,direction:t.direction||(n?n.direction:""),nativeName:t.nativeName||(n?n.nativeName:""),messages:t.messages||(n?n.messages:{})};else if(!t.messages){var a=this.parentLocale(e);a.default&&a.default!==e&&!this.cultures[a.default]&&this.appendLocaleScript(a.default)}},parentLocale:function(e){var t=e.substr(0,2),n=this.defaultLocales.filter(function(i){return i.lang===t})[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(e)>-1?{lang:"fr",default:"fr-CA"}:n},appendedLocales:[],appendLocaleScript:function(e,t,n,i){var a=this,s=document.createElement("script"),o=this.minify?".min":"";s.async=!1,this.appendedLocales.indexOf(e)>-1||(this.appendedLocales.push(e),s.src=i?"".concat(this.getCulturesPath()+i).concat(o,".js"):"".concat(this.getCulturesPath()+e).concat(o,".js"),s.onload=function(){t&&!n&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),n&&a.dff[n]&&(a.setCurrentLocale(e,a.cultures[e]),a.setCurrentLocale(n,a.cultures[n]),a.dff[n].resolve(n)),n&&a.dff[e]&&a.cultures[e]&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),t||n||!a.dff[e]||a.dff[e].resolve(e)},s.onerror=function(){a.dff[e]&&a.dff[e].reject()},"object"===Ge(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&s.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(s))},set:function(e){if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===e);var t=!1,n=this.parentLocale(e);return n.default&&n.default!==e&&!this.cultures[n.default]&&(t=!0),t||!e||this.cultures[e]||this.currentLocale.name===e||"en-US"===e||(this.setCurrentLocale(e),this.appendLocaleScript(e,!0)),t&&("en-US"!==n.default&&this.appendLocaleScript(n.default,!1),this.appendLocaleScript(e,!1,n.default)),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(this.currentLocale.name),this.setCurrentLocale(e,this.cultures[e]),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(this.currentLocale.name),this.dff[e].promise()},getLocale:function(e,t){if(!e)return null;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e){var n=$.Deferred();return n.resolve(),n.promise()}return e&&"en-US"!==e&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),e&&!this.cultures[e]&&this.currentLocale.name!==e&&"en-US"!==e&&this.appendLocaleScript(e,!1,!1,t),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(e),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(e),this.dff[e].promise()},setLanguage:function(e){var t=this,n=this.currentLocale.name;e=this.correctLanguage(e),this.languages[e]||this.set(e).done(function(){t.set(n),t.setLanguage(e)});var i=this.correctLocale(e);return this.languages[e]?(this.currentLanguage=this.languages[e],this.updateLanguageTag(e),this.dff[i]=$.Deferred(),this.dff[i].resolve()):(this.currentLanguage.name=e,this.dff[i])},setCurrentLocale:function(e,t){var n=this.remapLanguage(e.substr(0,2));this.currentLocale.name=e;var i,a,s,o,c,d=void 0!==this.languages[n]&&void 0!==this.languages[e]&&this.languages[n].nativeName!==this.languages[e].nativeName?e:n;t&&(this.currentLocale.data=t,this.currentLocale.dataName=e,this.currentLanguage={},this.currentLanguage.name=n,this.languages[d]&&(this.currentLanguage=this.languages[d],this.currentLanguage.name=n,this.updateLanguageTag(e)),this.translatedLocales.indexOf(e)>-1&&(this.languages[d].direction=t.direction,this.languages[d].messages=t.messages,this.languages[d].name=n,this.languages[d].nativeName=t.nativeName,this.languages[e]={direction:t.direction,messages:t.messages,name:e,nativeName:t.nativeName}),"object"===(typeof d3>"u"?"undefined":Ge(d3))&&d3.formatDefaultLocale({decimal:(null==t||null===(i=t?.numbers)||void 0===i||null==i?void 0:i.decimal)||".",thousands:(null==t||null===(a=t?.numbers)||void 0===a||null==a?void 0:a.group)||",",grouping:(null==t||null===(s=t?.numbers)||void 0===s||null==s?void 0:s.groupSizes)||[3],percent:(null==t||null===(o=t?.numbers)||void 0===o||null==o?void 0:o.percentSign)||"%",currency:null!=t&&t?.currencySign?""===t.currencyFormat.split("\xa4")[0]?[t.currencySign,""]:["",t.currencySign]:["$",""],minus:(null==t||null===(c=t?.numbers)||void 0===c||null==c?void 0:c.minusSign)||"-"}))},formatDate:function(e,t){t||(t={date:"short"});var n=this.useLocale(t);if(e){if("0000"===e||"000000"===e||"00000000"===e)return"";if("string"==typeof e&&/T|Z/g.test(e)&&(e=this.newDateObj(e)),!(e instanceof Date)&&"string"==typeof e){var i=P.parseDate(e,t);isNaN(i)&&"datetime"===t.date&&"-"===e.substr(4,1)&&"-"===e.substr(7,1)&&(i=new Date(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2))),e=i}if(!(e instanceof Date)&&"number"==typeof e&&(e=new Date(e)),e){var a,s="",o=n.calendars?n.calendars[0]:null;t.pattern&&(a=t.pattern),t.date&&(a=o.dateFormat[t.date]),"string"==typeof t&&""!==t&&(a=t),a||(a=o.dateFormat.short);var c=e instanceof Array?e[0]:e.getFullYear(),d=e instanceof Array?e[1]:e.getMonth(),p=e instanceof Array?e[2]:e.getDate(),f=e.getDay?e.getDay():"",m=e instanceof Array?e[3]:e.getHours(),b=e instanceof Array?e[4]:e.getMinutes(),C=e instanceof Array?e[5]:e.getSeconds(),T=e instanceof Array?e[6]:e.getMilliseconds();if(t.fromGregorian||t.toUmalqura){var S=this.gregorianToUmalqura(e);p=S[2],d=S[1],c=S[0]}if(t.toGregorian||t.fromUmalqura){var M=this.umalquraToGregorian(c,d,p);p=M.getDate(),d=M.getMonth(),c=M.getFullYear()}var L=(s=(s=(s=(s=(s=(a=(a=(a=(a=a.replace("de","nnnnn")).replace("ng\xe0y","nnnn")).replace("th\xe1ng","t1\xe1ng")).replace("den","nnn")).replace("dd",this.pad(p,2))).replace("d",p)).replace("yyyy",c)).replace("yy",c.toString().substr(2))).replace("y",c)).indexOf(" a")>-1||0===s.indexOf("a");if(L&&0===m&&(s=(s=s.replace("hh",12)).replace("h",12)),s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace("hh",this.pad(m>12?m-12:m,2))).replace("h",m>12?m-12:m)).replace("HH",this.pad(m,2))).replace("H",m)).replace("mm",this.pad(b,2))).replace("ss",this.pad(C,2))).replace("SSS",this.pad(T,3))).replace("MMMM",o?o.months.wide[d]:null)).replace("MMM",o?o.months.abbreviated[d]:null),-1===a.indexOf("MMM")&&(s=(s=s.replace("MM",this.pad(d+1,2))).replace("M",d+1)),L&&o&&(0===(s=s.replace(" a"," ".concat(m>=12?o.dayPeriods[1]:o.dayPeriods[0]))).indexOf("a")&&(s=s.replace("a"," ".concat(m>=12?o.dayPeriods[1]:o.dayPeriods[0]))),s=s.replace("EEEE",o.days.wide[f])),o&&(s=s.replace("EEEE",o.days.wide[f])),o&&(s=s.replace("EEE",o.days.abbreviated[f])),o&&(s=s.replace("EE",o.days.narrow[f])),(s=(s=(s=(s=s.replace("nnnnn","de")).replace("nnnn","ng\xe0y")).replace("t1\xe1ng","th\xe1ng")).replace("nnn","den")).indexOf("zz")>-1){var z=new Date,V=this.getTimeZone(z,"short"),N=this.getTimeZone(z,"long");s=(s=s.replace("zzzz",N)).replace("zz",V)}return(s=s.replace(/&lrm;|\u200E/gi," ")).trim()}}},newDateObj:function(e){var t=new Date(e);if("safari"===Ie.browser.name&&"string"==typeof e&&/T|Z/g.test(e)){var n=e.replace(/Z/,"").replace(/T|:/g,"-").split("-");n=n.map(function(i,a){return+(1===a?i-1:i)}),t=zr(Date,Un(n))}return t},formatHour:function(e,t){var n=this.calendar().dateFormat.timeSeparator,i=this.currentLocale.name;"object"===Ge(t)&&(i=t.locale||i,n=t.timeSeparator||this.calendar(i).dateFormat.timeSeparator),"string"==typeof e&&-1===e.indexOf(n)&&(n=":");var a=new Date;if("number"==typeof e){var s=e.toString().split(".");a.setHours(s[0]),a.setMinutes(s[1]?60*parseFloat("0.".concat(s[1])):0)}else{var o=e.split(n);a.setHours(o[0]),a.setMinutes(o[1]||0)}return this.formatDate(a,{date:"hour"})},formatHourRange:function(e,t,n){var i=this.currentLocale.name,a=this.calendar(i).dayPeriods,s=!1;"object"===Ge(n)&&(a=this.calendar(i=n.locale||i).dayPeriods);var o="".concat(P.formatHour(e,n)," - ").concat(P.formatHour(t,n));return(o.indexOf(":00 AM -")>-1||o.indexOf(":00 PM -")>-1)&&(s=!0),at.count(o,a[0])>1&&(o=o.replace(a[0],"")),at.count(o,a[1])>1&&(o=o.replace(" ".concat(a[1]),"")),o=o.replace("  "," "),s&&(o=o.replace(":00 -"," -")),o},getTimeZone:function(e,t){var n=P.currentLocale.name||"en-US";if("ie"===Ie.browser.name&&"11"===Ie.browser.version)return e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("");var i=e.toLocaleDateString(n),a=e.toLocaleDateString(n,{timeZoneName:"long"===t?"long":"short"}),s=a.indexOf(i);return s>=0?(a.substring(0,s)+a.substring(s+i.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):a},dateToTimeZone:function(e,t,n){return"ie"===Ie.browser.name&&"11"===Ie.browser.version?"".concat(e.toLocaleString(P.currentLocale.name)," ").concat(e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):e.toLocaleString(P.currentLocale.name,{timeZone:t,timeZoneName:n})},dateToUTC:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},toLocaleString:function(e,t,n,i){if("number"!=typeof e)return"";var a={locale:t||P.currentLocale.name,options:n||void 0},s=e.toLocaleString(a.locale,a.options);if(!/undefined|null/.test(Ge(i))){var o=this.getSeparator(a.locale,"group");"."!==o&&(s=s.replace(new RegExp(o,"g"),i.toString()))}return s},getSeparator:function(e,t){return Intl.NumberFormat(e).formatToParts(1000.1).find(function(n){return n.type===t}).value},convertNumberToEnglish:function(e){for(var t=["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],n=["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],i=["\u96f6","\u58f9","\u8cb3","\u53c4","\u8086","\u4f0d","\u9678","\u67d2","\u634c","\u7396"],a=["\u96f6","\u58f9","\u8d30","\u53c1","\u8086","\u4f0d","\u9646","\u67d2","\u634c","\u7396"],s=["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=0;o<=9;o++)e=(e=(e=(e=(e=(e=(e=e.replace(t[o],o)).replace("\u066c","")).replace(",","")).replace(n[o],o)).replace(i[o],o)).replace(a[o],o)).replace(s[o],o),0===o&&(e=e.replace("\u96f6",o));return parseFloat(e)},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},parseDate:function(e,t,n){if(e){var i=t,a=this.currentLocale.name,s=this.calendar();"object"===Ge(t)&&(a=t.locale||a,i=t.dateFormat||this.calendar(a).dateFormat[i.date]),"object"===Ge(t)&&t.pattern&&(i=t.dateFormat||t.pattern),"object"===Ge(t)&&t.calendarName&&t.locale&&(s=this.calendar(t.locale,t.language,t.calendarName)),i||(i=this.calendar(a).dateFormat.short);var o=e;if("0000"!==e&&"000000"!==e&&"00000000"!==e){var c,d;i.pattern&&(i=i.pattern);var p,f,m={},b=i.toLowerCase().indexOf("h")>-1,C=e.toLowerCase().indexOf("z")>-1,T=!!s.dayPeriods.filter(function(Be){return Be.indexOf(".")>-1}).length&&i.indexOf("a")>-1&&i.indexOf("ah")<0&&i.indexOf("H")<0,S=3===(i.match(/M/g)||[]).length&&s&&s.months&&s.months.abbreviated&&s.months.abbreviated.filter(function(Be){return/\./.test(Be)}).length;if(b){var M=P.getTimeZone(new Date,"short"),L=P.getTimeZone(new Date,"long");e=(e=e.replace(" ".concat(M),"")).replace(" ".concat(L),"");var z=S?/[T\s:-]/g:/[T\s:.-]/g;i=(i=i.replace(" zzzz","").replace(" zz","")).replace(z,"/").replace(/z/i,""),i=T?i.replace("//","/"):i,e=e.replace(T?/[T\s:-]/g:z,"/").replace(/z/i,"")}i=i.replace(" de "," "),e=e.replace(" de "," "),i=i.replace("/ah/","/a/h/"),e=e.replace("\u5348","\u5348/"),i=i.replace(",",""),e=e.replace(",","");var V=i.indexOf("Mdyyyy"),N=i.indexOf("dMyyyy"),U=-1,G=-1;if((V>-1||N>-1)&&(G=(U=V>-1?V:N>-1?N:0)+e.indexOf("/")>-1?e.indexOf("/"):e.length,e="".concat(e.substr(U,G-4),"/").concat(e.substr(G-4,e.length)),e="".concat(e.substr(U,e.indexOf("/")/2),"/").concat(e.substr(e.indexOf("/")/2,e.length))),V>-1&&(i=i.replace("Mdyyyy","M/d/yyyy")),N>-1&&(i=i.replace("dMyyyy","d/M/yyyy")),-1!==i.indexOf(" ")){var Z=S?/[\s:]/g:/[\s:.]/g;i=i.replace(Z,"/"),e=e.replace(Z,"/")}if(i.indexOf("MMMM")>-1&&P.isRTL()&&i&&"MMMM/dd"!==i&&"dd/MMMM"!==i){var oe=e.lastIndexOf("/");e=e.substr(0,oe-1).replace("/"," ")+e.substr(oe)}if(-1===i.indexOf(" ")&&-1===i.indexOf(".")&&-1===i.indexOf("/")&&-1===i.indexOf("-")){-1!==e.indexOf(" ")?e=e.split(" ").join(""):-1!==e.indexOf(".")?e=e.split(".").join(""):-1!==e.indexOf("/")?e=e.split("/").join(""):-1!==e.indexOf("-")&&(e=e.split("-").join(""));var le=i[0],re="",J="";for(p=0,f=i.length;p<f;p++)J+=i[p]!==le?"/".concat(e[p]):e[p],re+=i[p]!==le?"/".concat(i[p]):i[p],p>1&&(le=i[p]);e=J,i=re}c=i.split("/"),d=e.split("/"),1===c.length&&(c=i.split(".")),1===d.length&&(d=e.split(".")),1===c.length&&(c=i.split("-")),1===d.length&&(d=e.split("-")),1===c.length&&(c=i.split(" ")),1===d.length&&(d=e.split(" "));var ce=this.getDatePart(c,d,"M","MM","MMM","MMMM"),ke=this.getDatePart(c,d,"y","yy","yyyy"),_e=!1,Oe=!1,Qe=s.dayPeriods[0],nt=s.dayPeriods[1];for(T||(Qe=Qe.replace(/\./g,""),nt=nt.replace(/\./g,"")),p=0,f=d.length;p<f;p++){var ot="".concat(c[p]),Ze=d[p],ft=parseInt(Ze,10);_e||(_e=ot.toLowerCase().indexOf("d")>-1);var Wt=void 0,xt=void 0,jt=void 0;switch(ot){case"d":if(Wt=new Date(ke,ce,0).getDate(),ft<1||ft>31||ft>Wt)return;m.day=Ze;break;case"dd":if(ft<1||ft>31||ft<10&&"0"!==Ze.substr(0,1))return;m.day=Ze;break;case"M":if(ft<1||ft>12)return;m.month=Ze-1;break;case"MM":if(ft<1||ft>12||ft<10&&"0"!==Ze.substr(0,1))return;m.month=Ze-1;break;case"MMM":xt=this.calendar(a).months.abbreviated;for(var Ut=0;Ut<xt.length;Ut++)o.indexOf(xt[Ut])>-1&&(m.month=Ut);break;case"MMMM":jt=this.calendar(a).months.wide;for(var en=0;en<jt.length;en++)o.indexOf(jt[en])>-1&&(m.month=en);break;case"yy":m.year=this.twoToFourDigitYear(Ze);break;case"y":case"yyyy":m.year=2===Ze.length?this.twoToFourDigitYear(Ze):Ze;break;case"h":if(ft<0||ft>12)return;m.h=Oe?m.h:Ze;break;case"hh":if(ft<0||ft>12)return;m.h=Oe?m.h:1===Ze.length?"0".concat(Ze):Ze;break;case"H":if(ft<0||ft>24)return;m.h=Oe?m.h:Ze;break;case"HH":if(ft<0||ft>24)return;m.h=Oe?m.h:1===Ze.length?"0".concat(Ze):Ze;break;case"ss":if(ft<0||ft>60){m.ss=0;break}m.ss=Ze;break;case"SSS":m.ms=Ze;break;case"mm":if(ft<0||ft>60){m.mm=0;break}m.mm=Ze;break;case"a":!m.h&&c[p+1]&&"h"===c[p+1].toLowerCase().substr(0,1)&&(m.h=d[p+1],Oe=!0),Ze.toLowerCase()!==Qe&&Ze.toUpperCase()!==Qe||(m.a="AM",m.h&&(12!==m.h&&"12"!==m.h||(m.h=0))),Ze.toLowerCase()!==nt&&Ze.toUpperCase()!==nt||(m.a="PM",m.h&&m.h<12&&(m.h=parseInt(m.h,10)+12))}}var gn=function(Be){return Be%4==0&&Be%100!=0||Be%400==0};if(m.return=void 0,m.leapYear=gn(m.year),!b||m.h||m.mm){if(!m.year&&0!==m.year&&!n){for(m.isUndefindedYear=!0,p=0,f=c.length;p<f;p++)if(c[p].indexOf("y")>-1&&void 0!==d[p]){m.isUndefindedYear=!1;break}if(m.isUndefindedYear){var Pn=29===parseInt(m.day,10)&&1===parseInt(m.month,10);if(m.year=Pn?function(Be){for(var Tt=(new Date).getFullYear(),ze=0;ze<4&&!gn(Tt);ze++)Tt--;return Tt}():(new Date).getFullYear(),"islamic-umalqura"===s.name){var Dt=this.gregorianToUmalqura(new Date(m.year,0,1));m.year=Dt[0]}}else delete m.year}if(m.year&&2===m.year.length&&(m.year="20".concat(m.year)),m.year=$.trim(m.year),m.day=$.trim(m.day),(""===m.year||m.year&&2!=="".concat(m.year).length&&4!=="".concat(m.year).length)&&delete m.year,!m.month&&0!==m.month&&!n){for(m.isUndefindedMonth=!0,p=0,f=c.length;p<f;p++)if(c[p].indexOf("M")>-1&&void 0!==d[p]){m.isUndefindedMonth=!1;break}m.isUndefindedMonth&&(m.month=(new Date).getMonth())}if(!(m.day||0===m.day||n&&_e)){for(m.isUndefindedDay=!0,p=0,f=c.length;p<f;p++)if(c[p].indexOf("d")>-1&&void 0!==d[p]){m.isUndefindedDay=!1;break}m.isUndefindedDay?m.day=1:delete m.day}return b?C?(void 0!==m.h&&(m.return=new Date(Date.UTC(m.year,m.month,m.day,m.h,m.mm))),void 0!==m.ss&&(m.return=new Date(Date.UTC(m.year,m.month,m.day,m.h,m.mm,m.ss))),void 0!==m.ms&&(m.return=new Date(Date.UTC(m.year,m.month,m.day,m.h,m.mm,m.ss,m.ms)))):(void 0!==m.h&&(m.return=new Date(m.year,m.month,m.day,m.h,m.mm)),void 0!==m.ss&&(m.return=new Date(m.year,m.month,m.day,m.h,m.mm,m.ss)),void 0!==m.ms&&(m.return=new Date(m.year,m.month,m.day,m.h,m.mm,m.ss,m.ms))):m.return=new Date(m.year,m.month,m.day),"islamic-umalqura"===s.name?[parseInt(m.year,10),parseInt(m.month,10),parseInt(m.day,10),parseInt(m.h||0,10),parseInt(m.mm||0,10),parseInt(m.ss||0,10),parseInt(m.ms||0,10)]:this.isValidDate(m.return)?m.return:void 0}}}},twoToFourDigitYear:function(e){return parseInt((e>39?"19":"20")+e,10)},getDatePart:function(e,t,n,i,a,s){var o=0;return $.each(t,function(c){n!==e[c]&&i!==e[c]&&a!==e[c]&&s!==e[c]||(o=t[c])}),o},useLocale:function(e){var t=this.currentLocale.data;if(e&&e.locale&&this.cultures[e.locale]&&(t=this.cultures[e.locale]),e&&e.language&&this.languages[e.language]){var n=_.extend(!0,{},this.currentLocale.data);if(n.calendars)return n.calendars[0]=this.calendar(e.locale||this.currentLocale.name,e.language),n}return t.numbers||(t.numbers=this.numbers()),t},useLanguage:function(e){var t=this.currentLanguage;if(e&&e.locale){var n=e.locale.split("-")[0];t=this.languages[n]}return e&&e.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(t=this.languages[this.currentLanguage.name]),e&&e.language&&this.languages[e.language]&&(t=this.languages[e.language]),t},formatNumber:function(e,t){var n,i,a,s=this.useLocale(t),o=t&&t.decimal?t.decimal:s.numbers.decimal,c=t&&void 0!==t.minimumFractionDigits?t.minimumFractionDigits:t&&t.style&&"currency"===t.style?2:t&&t.style&&"percent"===t.style?0:2,d=t&&void 0!==t.maximumFractionDigits?t.maximumFractionDigits:t&&t.style&&("currency"===t.style||"percent"===t.style)?2:t&&t.minimumFractionDigits?t.minimumFractionDigits:3;if(null!=e&&""!==e){if(t&&"integer"===t.style&&(d=0,c=0),t&&"currency"===t.style){var f=t&&t.currencyFormat?t.currencyFormat:s.currencyFormat;f||(f="\xa4#,##0.00"),i=f.replace("\xa4",t&&t.currencySign?t.currencySign:s.currencySign)}t&&"percent"===t.style&&(a=(a=s.numbers?s.numbers.percentFormat:"### %").replace("\xa4",s.numbers?s.numbers.percentSign:"%")),"string"==typeof e&&!1!==(null==t||null==t?void 0:t.parseNumber)&&(e=P.parseNumber(e,t)),e.toString().indexOf("e")>-1&&(e=e.toFixed(d+1)),t&&"percent"===t.style&&(e=(100*e).toFixed(c));var b=this.truncateDecimals(e,c,d,t&&t.round).split("."),C=[3,3];s&&s.numbers&&s.numbers.groupSizes&&(C=s.numbers.groupSizes),t&&t.groupSizes&&(C=t.groupSizes);var S=this.expandNumber(b[0],C,t&&void 0!==t.group?t.group:s.numbers.group);b[0]=S,n=b.join(o);var M=s&&s.numbers&&s.numbers.minusSign?s.numbers.minusSign:"-",L=n.indexOf(M)>-1;n=n.replace(M,"");var z=function(N){return N.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},V="";return 0===c&&(V=new RegExp("(".concat(z(o),"[0-9]*?)0+$")),n=n.replace(V,"$1")),c>0&&(V=new RegExp("(".concat(z(o),".{").concat(c,"}[0-9]*?)0+$")),n=n.replace(V,"$1")),V=new RegExp("".concat(z(o),"$")),n=n.replace(V,""),t&&"currency"===t.style&&(n=i.replace("###",n)),t&&"percent"===t.style&&(n=a.replace("###",n)),L&&(n=M+n),n}},expandNumber:function(e,t,n){var i=e.length,a=!1;if("-"===e.substr(0,1)&&(i=(e=e.substr(1)).length,a=!0),i<=3||0===t[0])return(a?"-":"")+e;var s=e.substr(e.length-t[0]),o=e.substr(0,e.length-t[0]);if(0===t[1])return(a?"-":"")+o+(""===o?"":n)+s;var c=o.split("").reverse().join(""),d=new RegExp(".{1,".concat(t[1],"}"),"g");return(a?"-":"")+c.match(d).join(n).split("").reverse().join("")+n+s},truncateDecimals:function(e,t,n,i){var a=e;a=i?fs.round(e,n):fs.truncate(e,n);var s=fs.decimalPlaces(a);return s<t&&(a=a.toString()+new Array(t-s+1).join("0")),a.toString()},parseNumber:function(e,t){var n,i=this.useLocale(t),a=i.numbers;if(!(n=e))return NaN;"number"==typeof e&&(n=n.toString());var s=t&&void 0!==t.group?t.group:a?a.group:",",o=t&&t.decimal?t.decimal:a?a.decimal:".",c=t&&t.percentSign?t.percentSign:a?a.percentSign:"%",d=t&&t.currencySign?t.currencySign:i.currencySign||"$",p=" "===s||""===s?new RegExp(/\s/g):new RegExp("\\".concat(s),"g");return(n=(n=(n=(n=(n=(n=n.replace(p,"")).replace(o,".")).replace(c,"")).replace(d,"")).replace("$","")).replace(" ","")).length>=18?n:parseFloat(n)},translate:function(e,t){var n=this.useLanguage(t),i=!1,a=!0;return"&nsbp;"===e?"":("boolean"==typeof t&&(i=t),"object"===Ge(t)&&void 0!==t.showAsUndefined&&(i=t.showAsUndefined),"object"===Ge(t)&&void 0!==t.showBrackets&&(a=t.showBrackets),void 0===n||void 0===n.messages?i?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":""):void 0===n.messages[e]?this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[e]?this.languages.en.messages[e].value:i?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":""):n.messages[e].value)},extendTranslations:function(e,t){this.languages[e]&&(this.languages[e].messages=_.extend(!0,this.languages[e].messages,t))},calendar:function(e,t,n){var i=[];if(this.currentLocale.data.calendars&&!e&&(i=this.currentLocale.data.calendars),t&&t.length>2&&(t=t.substr(0,2)),e&&this.cultures[e]&&(i=this.cultures[e].calendars),n&&i)for(var a=0;a<i.length;a++){var s=i[a];if(s.name===n)return s}if(!i[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var o=_.extend(!0,{},i[0]);if(t&&e.substr(0,2)!==t){var c=this.defaultLocales.filter(function(p){return p.lang===t});if(c[0]){var d=this.cultures[c[0].default];o.days=d.calendars[0].days,o.months=d.calendars[0].months,o.dayPeriods=d.calendars[0].dayPeriods}}return o},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},isIslamic:function(e){var t;return"islamic-umalqura"===(null===(t=this.calendar(e))||void 0===t||null==t?void 0:t.name)},toUpperCase:function(e){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(e):e.toLocaleUpperCase()},toLowerCase:function(e){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(e):e.toString().toLocaleLowerCase()},capitalize:function(e){return this.toUpperCase(e.charAt(0))+e.slice(1)},capitalizeWords:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)t[n]=this.capitalize(t[n]);return t.join(" ")},gregorianToUmalqura:function(e){if("function"!=typeof e.getMonth)return null;var t=function(n){for(var i=n-24e5+.5,a=0,s=0;s<gs.length&&!(gs[s]>i);s++)a++;var o=a+15292,c=Math.floor((o-1)/12);return{year:c+1,month:o-12*c-1,day:i-gs[a-1]+1}}(function(n,i,a){n<0&&n++,i<3&&(i+=12,n--);var s=Math.floor(n/100),o=2-s+Math.floor(s/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(i+1))+a+o-1524.5}(e.getFullYear(),e.getMonth()+1,e.getDate()));return[t.year,t.month,t.day,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},umalquraToGregorian:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Array.isArray(e)&&(t=e[1],n=e[2]||0,i=e[3]||0,a=e[4]||0,s=e[5]||0,o=e[6]||0,e=e[0]);var c=function(C){return"number"==typeof C&&!isNaN(C)};if(!c(e)||!c(t)||!c(n))return null;var d=function(C,T,S){return S+gs[12*(C-1)+T-15292-1]-1+24e5-.5},p=d(e,t+1,n),f=function(C){var T=Math.floor(C+.5),S=Math.floor((T-1867216.25)/36524.25),M=1524+(S=T+1+S-Math.floor(S/4)),L=Math.floor((M-122.1)/365.25),z=Math.floor(365.25*L),V=Math.floor((M-z)/30.6001),N=V-(V>13.5?13:1),U=L-(N>2.5?4716:4715);return U<=0&&U--,{year:U,month:N-1,day:M-z-Math.floor(30.6001*V)}},m=f(p),b=new Date(m.year,m.month,m.day,i,a,s,o);return b},flipIconsHorizontally:function(){var e=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each(function(){var t=$(this).getIconName();t&&-1!==$.inArray(t,e)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")})}};function Co(e){if("function"!=typeof e){if("string"==typeof e)return e;throw new Error("".concat(Ge(e)," was provided where a function was expected."))}if("string"==typeof e.name)return"".concat(e.name,"()");var t=/^function\s+([\w$]+)\s*\(/.exec(e.toString());return t?"".concat(t[1],"()"):"(anonymous function)"}function ei(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===(typeof console>"u"?"undefined":Ge(console))){var i=Co(e),a=Co(t);n.length&&(n=" (".concat(n,")")),console.warn("IDS Enterprise".concat(n,': "').concat(a,'" is deprecated. Please use "').concat(i,'" instead.'))}}function Ga(e){"object"===(typeof console>"u"?"undefined":Ge(console))&&console.warn('IDS Enterprise: "'.concat(e,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function Sa(e,t){var n=function(){ei(e,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];e.apply(this,a)};return n.prototype=e.prototype,n}function xi(e){return this.element=$(e),this}xi.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return ei("url","getCurrentURL"),this.url},getBaseURL:function(e){return this.element.length&&this.href&&"/"!==this.href?e?0===e.indexOf("/")?e:(e=(-1===e.indexOf("#")?"#":"")+e,this.url+e):this.url:e||""}};var Ya=new xi($("base[href]"));$.getBaseURL=function(e){return Ya.getBaseURL(e)};var il={noAutoStart:!1},al={};function $i(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function nn(e){if(this.id=e.id,this.duration=e.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=e.updateDuration||1,this.setFuncs(e),this.paused=!1,this.elapsedTime=0,this.startTime=$i(),this}function Ka(e){return this.items=[],this.element=$("body"),this.settings=_.mergeSettings(null,e,il),!0!==this.settings.noAutoStart&&this.start(),this}"object"===Ge(window.SohoConfig)&&"object"===Ge(window.SohoConfig.renderLoop)&&(al=_.extend({},il,window.SohoConfig.renderLoop)),nn.prototype={setFuncs:function(e){if("function"!=typeof e.updateCallback&&"function"!=typeof e.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof e.updateCallback&&(this.updateCallback=e.updateCallback),"function"==typeof e.timeoutCallback&&(this.timeoutCallback=e.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(e){e&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},Ka.prototype={start:function(){this.doLoop=!0,this.startTime=$i();var e,t,n=this,i=$i();!function a(){n.doLoop&&(e=$i(),t=(e-i)/1e3,n.items.forEach(function(s){if(s.doRemoveOnNextTick)n.remove(s);else if(s.paused||s.elapsedTime++,"number"==typeof s.duration&&s.duration>-1&&(s.startTime||(s.startTime=e),s.elapsedTime>=s.duration))s.destroy();else if("function"==typeof s.updateCallback){if(s.updateDuration&&s.updateDuration>1&&(isNaN(s.timeUntilNextUpdate)&&(s.timeUntilNextUpdate=s.updateDuration),s.timeUntilNextUpdate>0))return void--s.timeUntilNextUpdate;s.updateCallback.apply(null,[s,{last:i,delta:t,now:e}])}}),i=e,requestAnimationFrame(a))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return $i()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(e,t,n,i){var a="string"!=typeof i||!i.length;if("string"==typeof n)if(a)i=n,n=-1,a=!1;else{var s=Number(n);isNaN(s)||(n=s)}else"number"!=typeof n&&(n=-1);return"string"==typeof i&&i.length||(i=""),new nn({id:i,updateCallback:e,timeoutCallback:t,duration:n})},register:function(e,t,n,i){return e instanceof nn||(e=this.buildRenderLoopItem(e,t,n,i)),this.items.push(e),e},unregister:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof e&&(t=e,e=void 0),this.remove({cb:e,id:t})},getFromQueue:function(e,t){var n;return"string"==typeof callback&&(t=e,e=void 0),"function"==typeof callback?this.items.forEach(function(i){return"".concat(i.updateCallback)!=="".concat(e)||(n=i,!1)}):"string"==typeof t&&this.items.forEach(function(i){return i.id!==t||(n=i,!1)}),n},remove:function(e){var t;return e instanceof nn?(t=e,this.items=this.items.filter(function(n){return n!==e})):"function"==typeof e.updateCallback?this.items=this.items.filter(function(n){return"".concat(n.updateCallback)!=="".concat(e.updateCallback)||(t=n,!1)}):"string"==typeof e.id&&(this.items=this.items.filter(function(n){return n.id!==e.id||(t=n,!1)})),"function"!=typeof t.timeoutCallback||t.noTimeout||t.timeoutCallback.apply(null,t),this.element.triggerHandler("remove.renderLoop",[t]),t},pause:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(e,t);return n.pause(),n},resume:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(e,t);return n.resume(),n}};var dt=new Ka(al);function oi(){this.pressedKeys=new Map,this.init()}oi.prototype={init:function(){var e=this;$(document).on("keydown.".concat("keyboard"),function(t){e.press(t.key),e.announceKeys()}).on("keyup.".concat("keyboard"),function(t){e.unpress(t.key),e.announceKeys()})},announceKeys:function(){var e=[];this.pressedKeys.forEach(function(t,n){e.push(n)}),$("body").triggerHandler("keys",[e])},press:function(e){return this.pressedKeys.set("".concat(e),!0)},unpress:function(e){return this.pressedKeys.delete("".concat(e))},isPressed:function(e){return this.pressedKeys.has("".concat(e))}};var ko=new oi;function Ps(e){return void 0!==e&&e.element instanceof $&&"function"==typeof e.destroy}function To(){return this.modals=[],this.handleEvents(),this}To.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter(function(e){return e.visible})},get currentlyActive(){var e;return this.modals.forEach(function(t){t.active&&(e=t)}),e},set currentlyActive(e){if(!Ps(e))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach(function(t,n){t.active=$(t.element).is(e.element),t.element[0].style.zIndex=t.active?"".concat(1020+n):t.visible?"".concat(920+n):""}),this.refresh()},get last(){var e,t=this.currentlyOpen,n=t.length;return n&&(e=t[n-1]),e},render:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),n=document.createElement("div");t.id="ids-modal-root",t.classList.add("modal-page-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),t.appendChild(n),document.body.appendChild(t),this.rootElem=t,this.overlayElem=n},refresh:function(){var e=this.currentlyActive;e||(e=this.activateLast()),this.checkOverlayVisibility(),e?this.showContainers(e):this.hideContainers(e)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(e){if(!Ps(e))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter(function(t){return $(t.element).is(e)})>0||this.modals.push(e)},unregister:function(e){if(!Ps(e))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter(function(t){return!$(t.element).is(e.element)})},checkOverlayVisibility:function(){var e=0;this.currentlyActive&&(e=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.background="rgba(0, 0, 0, ".concat(e?"".concat(e):"",")")},checkRootElements:function(){var e=document.querySelector("#ids-modal-root");if(e instanceof HTMLElement){this.rootElem=e;var t=e.querySelector(".overlay");t instanceof HTMLElement&&(this.overlayElem=t)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t=e&&(e instanceof HTMLElement||e instanceof $&&e.length)?$(e).data("modal"):this.last)&&(n&&(t.isCancelled=!0),t.close())},closeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(t){e&&(t.isCancelled=!0),t.close(void 0,!0)}),this.refresh()},destroyAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(t){(!e||t.capAPI)&&(t.close(void 0,!0),t.destroy())}),this.refresh()},closeLast:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close(void 0,e)},activateLast:function(){var e=this.last;return e&&(this.currentlyActive=e),e},findById:function(e){if(e)return this.modals.filter(function(t){return t.id===e})[0]||void 0},handleEvents:function(){var e=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat("modalmanager"),function(n){var i=$(n.target).parents(".modal");switch(n.which||n.keyCode){case 27:e.close(i,!0);break;case 9:e.setModalFocus(n.shiftKey?"last":"first",n)}});var t=this;this.preRendered?this.checkRootElements():$(document).ready(function(){t.checkRootElements(),t.preRendered=!0}),this.hasEstablishedEvents=!0},setModalFocus:function(e,t){var n=this.currentlyActive;n&&(!n.isFocused||$(n.focusableElems.last).is(document.activeElement)&&"first"===e||$(n.focusableElems.first).is(document.activeElement)&&"last"===e)&&(t.preventDefault(),n.setFocus(e))},teardown:function(){$(document).off("keydown.".concat("modalmanager")),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var qi=new To;function Xa(e){return void 0!==e&&e.element instanceof $&&"function"==typeof e.destroy}function fa(){return this.notifications=[],this}fa.prototype={register:function(e){if(!Xa(e))throw new Error("The provided object has no Notification API, and cannot be registered.");this.notifications.filter(function(t){return $(t.element).is(e)})>0||this.notifications.push(e)},unregister:function(e){if(!Xa(e))throw new Error("The provided object has no Notification API, and cannot be registered.");var t=this.notifications.findIndex(function(n){return $(n.element).is(e)});t>=0&&this.notifications.splice(t,1)},closeById:function(e){if(this.notifications.length>0){var t=this.notifications.findIndex(function(n){return n.settings.id===e});t>=0&&(this.close(this.notifications[t]),this.notifications.splice(t,1))}},closeLatest:function(){this.notifications.length>0&&this.close(this.notifications.pop())},closeAll:function(){for(;this.notifications.length>0;)this.close(this.notifications.pop())},close:function(e){var t=e.element;e.close(),t&&this.notifications.length>0&&t.data("notification",this.notifications[0])}};var Di=new fa,mt={currentTheme:{id:"theme-new-light",name:P.translate("NewLightTheme")},allColors:[{id:"theme-classic-light",colors:{themeName:"theme-classic",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#f0f0f0"},font:{name:"body-color-primary-font",value:"#1a1a1a"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}},{id:"theme-classic-dark",colors:{themeName:"theme-classic-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#888B94"},base:{name:"ids-color-brand-primary-base",value:"#50535A"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#888B94"},base:{name:"ids-color-brand-secondary-base",value:"#656871"},alt:{name:"ids-color-brand-secondary-alt",value:"#414247"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#212224"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#313236"},font:{name:"body-color-primary-font",value:"#ffffff"}},secondary:{background:{name:"body-color-secondary-background",value:"#414247"}}}}}},{id:"theme-classic-contrast",colors:{themeName:"theme-classic-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#133c59",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#134d71"},alt:{name:"ids-color-brand-primary-alt",value:"#133c59"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#d8d8d8"},font:{name:"body-color-primary-font",value:"#000000"}},secondary:{background:{name:"body-color-secondary-background",value:"#d8d8d8"}}}}}},{id:"theme-new-light",colors:{themeName:"theme-new",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0066D4",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#606066"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#ffffff"},font:{name:"body-color-primary-font",value:"#2F2F32"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}},{id:"theme-new-dark",colors:{themeName:"theme-new-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#606066",paletteName:"{ids.color.brand.primary.base.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#97979B"},base:{name:"ids-color-brand-primary-base",value:"#606066"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#77777C"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#3E3E42"},font:{name:"body-color-primary-font",value:"#EFEFF0"}},secondary:{background:{name:"body-color-secondary-background",value:"#47474C"}}}}}},{id:"theme-new-contrast",colors:{themeName:"theme-new-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#003876",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#7B0F11",paletteName:"#7B0F11"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#004A99"},alt:{name:"ids-color-brand-primary-alt",value:"#003876"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#47474C"},base:{name:"ids-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"ids-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#EFEFF0"},font:{name:"body-color-primary-font",value:"#3E3E42"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}}],themes:function(){return[{id:"theme-classic-light",name:P.translate("ClassicLightTheme"),themeId:"theme-classic",modeId:"light",modeName:P.translate("Light")},{id:"theme-classic-dark",name:P.translate("ClassicDarkTheme"),themeId:"theme-classic",modeId:"dark",modeName:P.translate("Dark")},{id:"theme-classic-contrast",name:P.translate("ClassicHighContrastTheme"),themeId:"theme-classic",modeId:"contrast",modeName:P.translate("Contrast")},{id:"theme-new-light",name:P.translate("NewLightTheme"),themeId:"theme-new",modeId:"light",modeName:P.translate("Light")},{id:"theme-new-dark",name:P.translate("NewDarkTheme"),themeId:"theme-new",modeId:"dark",modeName:P.translate("Dark")},{id:"theme-new-contrast",name:P.translate("NewHighContrastTheme"),themeId:"theme-new",modeId:"contrast",modeName:P.translate("Contrast")}]},themeColors:function(){var e=this,t=this.allColors.filter(function(n){return n.id===e.currentTheme.id});return t[0]?t[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var e=this.themeColors().palette,t={},n={showBrackets:!1},i="#ffffff";switch(this.currentTheme.id){case"theme-new-light":case"theme-new-contrast":default:i="#ffffff";break;case"theme-new-dark":i="#606066";break;case"theme-classic-light":i="#368ac0";break;case"theme-classic-contrast":i="#134d71";break;case"theme-classic-dark":i="#50535a"}return t.default={id:"default",name:P.translate("Default",n),backgroundColorClass:"primary-bg-color",value:i},t.amber={id:"amber",name:P.translate("Amber",n),backgroundColorClass:"amber09",value:e.amber[90].value},t.amethyst={id:"amethyst",name:P.translate("Amethyst",n),backgroundColorClass:"amethyst06",value:e.amethyst[60].value},t.azure={id:"azure",name:P.translate("Azure",n),backgroundColorClass:"azure07",value:e.azure[70].value},t.emerald={id:"emerald",name:P.translate("Emerald",n),backgroundColorClass:"emerald08",value:e.emerald[80].value},t.graphite={id:"graphite",name:P.translate("Graphite",n),backgroundColorClass:"graphite06",value:e.graphite[60].value},t.ruby={id:"ruby",name:P.translate("Ruby",n),backgroundColorClass:"ruby09",value:e.ruby[90].value},t.slate={id:"slate",name:P.translate("Slate",n),backgroundColorClass:"slate06",value:e.slate[60].value},t.turquoise={id:"turquoise",name:P.translate("Turquoise",n),backgroundColorClass:"turquoise09",value:e.turquoise[90].value},t},setTheme:function(e){e=e.replace("soho","classic").replace("uplift","new");var t=this.themes().filter(function(n){return n.id===e});return 0===t.length?"":(this.currentTheme=t[0],t)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1},get new(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1}},Ns={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function vs(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Ns),this.init()}vs.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.setTheme(this.settings.theme?this.settings.theme:this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var e=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),function(){e.updated()}),this},appendStyleSheet:function(e){var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),(t=document.createElement("style")).setAttribute("id","soho-personalization"),t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},getColorStyleSheet:function(e){if(e||(e={}),"string"==typeof e&&(e={header:e}),!e||""===e)return this;var t={header:"2578A9"},n=mt.themeColors();e.theme={},e.theme.bg=n.components.body.primary.background.value,e.theme.altbg=n.components.body.secondary.background.value,e.theme.text=n.components.body.primary.font.value,e.theme.altText=n.components.body.secondary.background.value,e.theme.disabledText=n.brand.secondary.alt.value;var i=!1,a=!1,s=!1;n.themeName.indexOf("contrast")>-1&&(a=!0),n.themeName.indexOf("dark")>-1&&(i=!0),(n.themeName.indexOf("uplift")>-1||n.themeName.indexOf("new")>-1)&&(s=!0),e.theme.props={contrast:a,dark:i,newTheme:s};var o={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","#368AC0","#368ac0"],emerald:["#56932e","#1f9254","#2AC371"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},c=!1,d="".concat(e.header||t.header).toLowerCase();d=pt.validateHex(d),Object.keys(o).forEach(function(N){c=c||o[N].indexOf(d)>-1}),d=c?"white":null;var p={amber:["#bb5500","#fbaf50","#fcc888","#fef2e5"],amethyst:["#7928e1","#c2a1f1","#ddcbf7","#f1ebfc"],azure:["#0066d4","#55a3f3","#8abff7","#e6f1fd"],emerald:["#1f9254","#78d8a3","#a1e4bf","#ebf9f1"],graphite:["#535353","#97979b","#b7b7ba","#efeff0"],ruby:["#8d0b0e","#ee9496","#f5c3c4","#fbe7e8"],slate:["#606066","#97979b","#b7b7ba","#efeff0"],turquoise:["#297b7b","#82d4d4","#a8e1e1","#ecf8f8"]},f="".concat(e.header||t.header).toLowerCase();Object.keys(p).forEach(function(N){p[N].indexOf(f)>-1&&(e.darkNewButton=p[N][1],e.darkNewButtonHover=p[N][2],e.secondaryButtonHover=p[N][3])}),e.darkNewButtonLighterHover="#3e3e42",e.darkNewButtonDisabled="#47474c",e.darkNewButtonTextDisabled="#77777c";var m=pt.validateHex(e.lightest||pt.getLuminousColorShade(e.header||t.header,.3));"white"===pt.getContrastColor(m,null,d)?(t.text="ffffff",t.subtext="f0f0f0"):(t.text="000000",t.subtext="292929"),e.header=pt.validateHex(e.header||t.header),e.text=pt.validateHex(e.text||t.text),e.subtext=pt.validateHex(e.subtext||t.subtext),e.btnColorHeader=pt.validateHex(e.btnColorHeader||pt.getLuminousColorShade(e.header,.3)),e.subheader=pt.validateHex(e.subheader||pt.getLuminousColorShade(e.header,.2)),e.verticalBorder=pt.validateHex(e.verticalBorder||pt.getLuminousColorShade(e.header,.1)),e.btnColorSubheader=pt.validateHex(e.btnColorSubheader||pt.getLuminousColorShade(e.header,-.1)),e.inactive=pt.validateHex(e.inactive||pt.getLuminousColorShade(e.header,-.2)),e.horizontalBorder=pt.validateHex(e.horizontalBorder||pt.getLuminousColorShade(e.header,-.3)),e.hover=pt.validateHex(e.hover||pt.getLuminousColorShade(e.header,-.5)),e.button=pt.validateHex(e.button||pt.getLuminousColorShade(e.text,-.8)),e.lightest=e.btnColorHeader,e.lighter=e.subheader,e.light=e.verticalBorder,e.base=e.header,e.contrast=e.text,e.dark=e.btnColorSubheader,e.darker=e.inactive,e.darkest=e.horizontalBorder;var b={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],emerald:["#56932e","#1f9254","#2AC371"],slate:["#50535a","#98949e"]},C=!1,T=pt.validateHex("".concat(e.header||t.header).toLowerCase());Object.keys(b).forEach(function(N){C=C||b[N].indexOf(T)>-1});var S=e.light,M=C?.5:.7,L=C?.3:.5;s?(M=C?.6:.8,L=C?.6:.8,i?(S=e.darkest,M=.1):a&&(M=.8,L=.4)):i?(S=e.darkest,M=-.1):a&&(M=.3);var z=pt.getLuminousColorShade(S,M);z=pt.getDesaturatedColor(z,L),e.baseDisabled=z,e.hyperlinkText=e.text,e.hyperlinkTextHover=t.subtext,e.selection=t.subtext;var N,U,G,V=pt.getContrastColor(e.darkest);return t.tooltipText="white"===V?"ffffff":"000000",e.tooltipText=pt.validateHex(e.tooltipText||t.tooltipText),U=pt.hexToRgb((N=e).base),G=pt.hexToRgb(N.hyperlinkText),"\n\n.is-personalizable ::selection {\n  background: ".concat(N.selection," !important;\n}\n\n.is-personalizable .header::selection {\n  background-color: ").concat(N.darker," !important;\n}\n\n.is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\n.btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable {\n  background-color: ").concat(N.base," !important;\n  border-color: ").concat(N.base," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {\n  background-color: ").concat(N.darkNewButton," !important;\n  border-color: ").concat(N.darkNewButton,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\nhtml[class*="new-"] .is-personalizable .btn-secondary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg.icon  {\n  border-color: ').concat(N.base," !important;\n  color: ").concat(N.darkest," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {\n  border-color: ").concat(N.darkNewButton," !important;\n  color: ").concat(N.darkNewButton," !important;\n}\n\n.is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\n.btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled {\n  color: ").concat(N.contrast," !important;\n  background-color: ").concat(N.baseDisabled," !important;\n  border-color: ").concat(N.baseDisabled," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {\n  color: ").concat(N.darkNewButtonTextDisabled," !important;\n  background-color: ").concat(N.darkNewButtonDisabled," !important;\n  border-color: ").concat(N.darkNewButtonDisabled," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled svg.icon {\n  color: ").concat(N.darkNewButtonTextDisabled,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable .btn-secondary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\nhtml[class*="new-"] .is-personalizable .btn-secondary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled svg {\n  border-color: ').concat(N.baseDisabled," !important;\n  color: ").concat(N.base," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-secondary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {\n  border-color: ").concat(N.darkNewButtonTextDisabled," !important;\n  background-color: ").concat(N.darkNewButtonDisabled," !important;\n  color: ").concat(N.darkNewButtonTextDisabled," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-secondary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled svg.icon {\n  color: ").concat(N.darkNewButtonTextDisabled," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\nhtml.theme-new-dark .is-personalizable .btn-link:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {\n  background-color: ").concat(N.darkNewButtonDisabled," !important;\n  color: ").concat(N.darkNewButtonTextDisabled," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled svg.icon {\n  color: ").concat(N.darkNewButtonTextDisabled," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled),\n.btn-link.is-personalizable:not(:disabled) {\n  color: ").concat(N.light," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled) .icon,\n.btn-link.is-personalizable:not(:disabled) .icon {\n  color: ").concat(N.light," !important;\n}\n\n.is-personalizable button.is-pressed,\nbutton.is-personalizable.is-pressed {\n  color: ").concat(N.base,";\n}\n\n.is-personalizable button.is-pressed .icon,\nbutton.is-personalizable.is-pressed .icon {\n  color: ").concat(N.base,";\n}\n\n.is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(N.darker," !important;\n  border-color: ").concat(N.darker," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(N.darkNewButtonHover," !important;\n  border-color: ").concat(N.darkNewButtonHover,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ').concat(N.secondaryButtonHover," !important;\n}\n\nhtml.theme-new-dark .is-personalizable .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(N.darkNewButtonLighterHover," !important;\n  color: ").concat(N.darkNewButtonHover," !important;\n  border-color: ").concat(N.darkNewButtonHover,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  color: ').concat(N.lightest,";\n}\n\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon,\nhtml.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled) svg.icon {\n  background-color: ").concat(N.darkNewButtonLighterHover," !important;\n  color: ").concat(N.darkNewButtonHover,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg {\n  color: ').concat(N.lightest,";\n}\n\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon,\nhtml.theme-new-dark .is-personalizable .btn-link:not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-link:not(:disabled) svg.icon {\n  color: ").concat(N.contrast," !important;\n}\n\n.is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(N.darker," !important;\n  border-color: ").concat(N.darker," !important;\n}\n\nbutton.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable a.btn:focus:not(.hide-focus),\na.btn.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-menu:focus:not(.hide-focus),\na.btn-menu.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-icon:focus:not(.hide-focus),\na.btn-icon.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-tertiary:focus:not(.hide-focus),\na.btn-tertiary.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-close:focus:not(.hide-focus),\na.btn-close.is-personalizable:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(N.base,",\n    0 0 4px 2px rgba(").concat(U.r,", ").concat(U.g,", ").concat(U.b,", 0.3) !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):focus:not(.hide-focus),\n.btn-primary.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable .btn-secondary:focus:not(.hide-focus),\n.btn-secondary.is-personalizable button:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px ").concat(N.theme.bg,",\n    0 0 0 3px ").concat(N.base,",\n    0 0 4px 2px rgba(").concat(U.r,", ").concat(U.g,", ").concat(U.b,", 0.3);\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open {\n  color: ").concat(N.base,";\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon {\n  color: ").concat(N.base,";\n}\n\n.is-personalizable .hyperlink:not(.today),\n.hyperlink:not(.today).is-personalizable {\n  color: ").concat(N.hyperlinkText,"\n}\n.is-personalizable .hyperlink:not(.today):hover,\n.hyperlink:not(.today).is-personalizable:hover {\n  color: ").concat(N.hyperlinkTextHover,";\n}\n.is-personalizable .hyperlink:not(.today):focus:not(.hide-focus),\n.hyperlink:not(.today).is-personalizable:focus:not(.hide-focus) {\n  border-color: ").concat(N.hyperlinkText,";\n  box-shadow: 0 0 4px 3px rgba(").concat(G.r,", ").concat(G.g,", ").concat(G.b,", 0.3);\n}\n\n.is-personalizable button:not(.btn-monthyear-pane):not(.btn-editor) svg.ripple-effect,\nbutton:not(.btn-monthyear-pane):not(.btn-editor).is-personalizable svg.ripple-effect,\n.is-personalizable a svg.ripple-effect,\na.is-personalizable svg.ripple-effect {\n  background-color: ").concat(N.base," !important;\n}\n\n.is-personalizable .btn-primary svg.ripple-effect,\n.btn-primary.is-personalizable svg.ripple-effect,\n.is-personalizable .btn-secondary svg.ripple-effect,\n.btn-secondary.is-personalizable svg.ripple-effect {\n  background-color: ").concat(N.contrast," !important;\n  border-color: ").concat(N.contrast," !important;\n}\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ").concat(N.darkest," !important;\n  border-bottom: 1px solid ").concat(N.darkest," !important;\n}\n\n.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected,\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected {\n  border-color: ").concat(N.contrast," !important;\n}\n\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled) {\n  color: ").concat(N.contrast,";\n  background-color: ").concat(N.darker,";\n  border-bottom: 4px solid ").concat(N.contrast,";\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(N.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(N.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(N.base," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected {\n  background-color: ").concat(N.base," !important;\n}\n\n.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible {\n  border-color: ").concat(N.base," !important;\n  box-shadow: 0 0 4px 3px rgba(").concat(U.r,", ").concat(U.g,", ").concat(U.b,", 0.3);\n}\n\n.accordion.panel .accordion-header.is-selected {\n  color: ").concat(N.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(N.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(N.base,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs {\n  background-color: ").concat(N.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable h1,\n.header.is-personalizable h2,\n.header.is-personalizable h3 {\n  color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable button svg.ripple-effect {\n  background-color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span,\n.is-personalizable .personalize-subheader button:not(:disabled),\n.is-personalizable .personalize-subheader button:not(:disabled) .icon,\n.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span  {\n  color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span,\n.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(N.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs > .tab-list-container .tab:not(.is-disabled):hover {\n  border-bottom: 4px solid ").concat(N.contrast,";\n}\n\n.header.is-personalizable .tab-container.horizontal > .tab-list-container .tab:not(.is-disabled):hover {\n  border-bottom: 4px solid ").concat(N.base,";\n}\n\n.header.is-personalizable .searchfield-wrapper.has-categories button.btn-icon:not(:disabled):hover,\n.header.is-personalizable .searchfield-wrapper.has-categories button:not(.searchfield-category-button):not(:disabled):hover .icon {\n  background-color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable button:not(.go-button):not(.searchfield-category-button):not(:disabled):hover,\n.header.is-personalizable button:not(.searchfield-category-button):not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class^='btn']:hover:not(.go-button):not(.searchfield-category-button):not([disabled]) {\n  color: ").concat(N.contrast,";\n  background-color: ").concat(N.darker,";\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(N.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(N.lightest,";\n  border-color:").concat(N.lightest,";\n  color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(N.contrast," !important;\n}\n\nhtml.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-more::before,\n.tab-container.is-personalizable .tab-more::before {\n  background-color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.header.is-personalizable .tab-container.header-tabs .tab-more svg.icon,\n.tab-container.is-personalizable .tab-more svg.icon,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(N.contrast," !important;\n  opacity: .8;\n}\n\nhtml.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(N.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(N.contrast," !important;\n  opacity: 1;\n}\n\nhtml.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(N.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-new-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable .page-title {\n  color: ').concat(N.contrast,";\n}\n\n.header.is-personalizable .flex-toolbar [class^='btn'][disabled] .icon,\n.header.is-personalizable .btn:not(.searchfield-category-button)[disabled] span {\n  color: rgba(255, 255, 255, 0.3) !important;\n}\n\n.header.is-personalizable button:not(:disabled) {\n  color: #fff !important;\n}\n\n.header.is-personalizable  .flex-toolbar [class^='btn']:focus:not(.hide-focus) .icon {\n  color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable .toolbar-searchfield-wrapper:not(.non-collapsible):not(.is-open) .icon:not(.close),\n.header.is-personalizable .toolbar [class^='btn']:focus .icon {\n  color: ").concat(N.contrast,";\n}\n\n.header .toolbar [class^='btn']:hover:not(.go-button):not(.searchfield-category-button) {\n  background-color: ").concat(N.base,";\n}\n\n.header .toolbar-searchfield-wrapper.active .searchfield:focus {\n  border-color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.header.is-personalizable .wizard-header .tick,\n.header.is-personalizable .wizard-header .tick .label,\n.header.is-personalizable .wizard-header a.tick:hover:not(.current):not(.is-disabled):not([disabled]) .label {\n  color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable .wizard-header .tick:focus .label,\n.header.is-personalizable .wizard-header .tick.current::before {\n  border-color: ").concat(N.light,";\n}\n\n.header.is-personalizable .wizard-header .bar,\n.header.is-personalizable .wizard-header .tick.current::after,\n.header .wizard-header .tick::after,\n.header.is-personalizable .wizard-header .tick.complete {\n  background-color: ").concat(N.darkest,";\n}\n\n.header.is-personalizable .wizard-header .tick.complete::after,\n.header.is-personalizable .wizard-header .completed-range,\n.header.is-personalizable .wizard-header .tick.current {\n  background-color: ").concat(N.contrast,";\n}\n\n.header.is-personalizable .wizard-header .tick.complete .label {\n  color: ").concat(N.contrast,";\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(N.dark,";\n  border-color: ").concat(N.dark,";\n  color: ").concat(N.contrast,";\n}\n\n.is-personalizable .breadcrumb .hyperlink,\n.breadcrumb.is-personalizable .hyperlink {\n  color: ").concat(N.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:hover,\n.breadcrumb.is-personalizable .hyperlink:hover {\n  color: ").concat(N.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:focus:not(.hide-focus),\n.breadcrumb.is-personalizable .hyperlink:focus:not(.hide-focus) {\n  box-shadow: none;\n}\n.is-personalizable .breadcrumb .hyperlink[disabled],\n.breadcrumb.is-personalizable .hyperlink[disabled],\n.is-personalizable .breadcrumb .hyperlink[disabled]:hover,\n.breadcrumb.is-personalizable .hyperlink[disabled]:hover {\n  color: ").concat(N.theme.disabledText,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) {\n  background-color: ").concat(N.base,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\n.scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(N.base,", ").concat(pt.hexToRgba(N.base,0),");\n}\nhtml[dir='rtl'] .is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\nhtml[dir='rtl'] .scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,");\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink {\n  color: ").concat(N.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink:hover  {\n  color: ").concat(N.contrast,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions.is-open .icon,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions.is-open .icon {\n  color: ").concat(N.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent, 0 0 0 1px ").concat(N.contrast,", 0 0 1px 2px ").concat(pt.hexToRgba(N.contrast,.3)," !important;\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(N.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(N.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(N.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(N.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(N.hover," !important;\n  border-bottom-color: ").concat(N.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(N.hover," !important;\n  border-bottom-color: ").concat(N.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(N.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(N.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(N.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(N.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent;\n  color: ').concat(N.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(N.darker," !important;\n  color: ").concat(N.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(N.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(N.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(N.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(N.contrast,";\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(N.contrast," !important;\n}\n\n.header.is-personalizable .toolbar [class^='btn'][disabled],\n.header.is-personalizable .toolbar [class^='btn'][disabled] .icon,\n.header.is-personalizable .toolbar [class^='btn'][disabled] span {\n  color: rgba(255, 255, 255, 0.3) !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(N.base," , ").concat(pt.hexToRgba(N.base,0),") !important;\n}\n\n.theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(N.base," , ").concat(pt.hexToRgba(N.base,0),") !important;\n}\n\nhtml[dir='rtl'].theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::before,\nhtml[dir='rtl'].theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to left, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,");\n}\n\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::before,\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to left, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,");\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,") !important;\n}\n\n.theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,") !important;\n}\n\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::after,\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to left, ").concat(pt.hexToRgba(N.contrast,0),", ").concat(N.contrast,") !important;\n}\n\nhtml[dir='rtl'].theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::after,\nhtml[dir='rtl'].theme-new-dark .is-personalizable .tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to left, ").concat(pt.hexToRgba(N.base,0),", ").concat(N.base,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(N.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(N.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(N.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(N.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(N.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(N.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button .icon,\nhtml[class*="theme-new-"] .application-menu.is-personalizable button span,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink {\n  color: ').concat(N.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:not(:disabled):hover .icon,\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:not(:disabled):hover span,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:hover {\n  color: ').concat(N.contrast,';\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel {\n  background-color: ').concat(N.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .name-xl,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .name,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion-heading {\n  color: ').concat(N.contrast,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ').concat(N.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(N.contrast,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ').concat(N.contrast," !important;\n}\n\n.application-menu.is-personalizable .btn-icon:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(N.lighter,",\n    0 0 2px 1px ").concat(N.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(N.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover {\n  border-bottom-color: ").concat(N.dark," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(N.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected button .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected button .icon.plus-minus::after {\n  background-color: ").concat(N.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(N.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ').concat(N.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ').concat(N.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:focus:not(.hide-focus),\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ').concat(N.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-new-"] .application-menu .application-menu-header button:hover,\nhtml[class*="theme-new-"] .application-menu .application-menu-footer button:hover {\n  background-color: ').concat(N.base,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ').concat(N.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(N.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(N.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(N.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(N.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(N.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(N.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(N.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(N.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(N.lighter,";\n  border-left: ").concat(N.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button svg.ripple-effect {\n  background-color: ').concat(N.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable {\n  background-color: ').concat(N.lighter,";\n  border-right: ").concat(N.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .application-menu-header {\n  background-color: ').concat(N.lighter,";\n  border-bottom-color: ").concat(N.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .application-menu-footer {\n  background-color: ').concat(N.lighter,";\n  border-top-color: ").concat(N.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(N.dark,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(N.darkest,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(N.darkest,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(N.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(N.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(N.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(N.dark," !important;\n  color: ").concat(N.subtext,' !important;\n}\n\nhtml[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(N.contrast,' !important;\n}\n\nhtml[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(N.darker," !important;\n  border-color: ").concat(N.darker,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(N.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(N.dark,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(N.darkest," !important;\n  background-color: ").concat(N.darkest," !important;\n}\n\n.is-personalizable.tab-container {\n  background-color: ").concat(N.base," !important;\n}\n\n.tab-container.is-personalizable .tab-list-container .tab-list .tab.is-disabled {\n  color: ").concat(N.lightest," !important\n}\n\n.is-personalizable .personalize-header {\n  background-color: ").concat(N.base," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(N.lighter," !important;\n}\n\n.is-personalizable .personalize-subheader  p,\n.personalize-subheader.is-personalizable p {\n  color: ").concat(N.contrast," !important;\n}\n\n.is-personalizable .personalize-subheader  h1,\n.personalize-subheader.is-personalizable h1,\n.is-personalizable .personalize-subheader h2,\n.personalize-subheader.is-personalizable h2 {\n  color: ").concat(N.contrast," !important;\n}\n\n.is-personalizable .personalize-subheader  .icon,\n.personalize-subheader.is-personalizable .icon {\n  color: ").concat(N.contrast," !important;\n}\n\n.is-personalizable .personalize-subheader .toolbar-searchfield-wrapper.active.is-open *,\n.personalize-subheader.is-personalizable .toolbar-searchfield-wrapper.active.is-open * {\n  color: ").concat(N.theme.text," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(N.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg,\n.is-personalizable .personalize-actionable .icon {\n  color: ").concat(N.contrast," !important;\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg,\n.is-personalizable .personalize-actionable:hover:not([disabled]) .icon  {\n  color: ").concat(N.contrast," !important;\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(N.contrast," !important;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(N.contrast," !important;\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(N.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(N.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(N.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(N.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(N.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(N.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(N.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(N.text,";\n  fill: ").concat(N.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(N.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(N.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(N.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(N.subtext,",\n    0 0 2px 1px ").concat(N.subtext,";\n}\n\n.subheader.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(N.subtext,",\n    0 0 2px 1px ").concat(N.subtext,";\n}\n\n.header.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n  0 0 0 1px ").concat(N.subtext,",\n  0 0 2px 1px ").concat(N.subtext," !important;\n}\n\n/*\n.tooltip.is-personalizable {\n  background-color: ").concat(N.darkest,";\n  border-color: ").concat(N.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(N.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(N.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(N.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(N.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(N.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(N.darkest,";\n}\n*/\n    ")},setFont:function(e){$("html").addClass("font-".concat(e))},setColors:function(e){return""===e?(this.setColorsToDefault(),this):e?(this.appendStyleSheet(this.getColorStyleSheet(e)),this.settings.colors=e,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||mt.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-new-light"}),this):this},setColorsToDefault:function(){this.settings.colors="";var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),this.element.triggerHandler("colorschanged",{colors:mt.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-new-light"})},getThemeFromStylesheet:function(){var e=$("#stylesheet, #sohoxi-stylesheet"),t="";if(e.length>0){var n=e.attr("href"),i=(t=n.substring(n.lastIndexOf("/")+1)).lastIndexOf("?");i>-1&&(t=t.slice(0,i)),t=t.replace(".min","").replace(".css","")}return t},setTheme:function(e){var t=$("html");if(e)if(e=e.replace("soho","classic").replace("uplift","new"),this.currentTheme=e,mt.currentTheme.id!==e){["light","dark","high-contrast"].indexOf(e)>-1&&(e+="-theme"),t.removeClass(function(d,p){return p.split(" ").filter(function(f){return f.indexOf("theme")>-1}).join()}).addClass(e),this.blockUi();var n=this,i=$("#stylesheet, #sohoxi-stylesheet"),a=$('<link rel="stylesheet">'),s=i.attr("href");a.on("load",function(){i.remove(),n.unBlockUi(),n.triggerEvent(e)}).on("error",function(){n.unBlockUi()});var o=s?s.substring(0,s.lastIndexOf("/")):"",c=!!s&&s.indexOf(".min")>-1;a.attr({id:i.attr("id"),href:$e.stripTags("".concat(o,"/").concat(e).concat(c?".min":"",".css"))}),i.removeAttr("id"),i.before(a),this.settings.theme=e,mt.setTheme(e),this.setColors(this.settings.colors)}else t.hasClass(e)||t.addClass(e)},blockUi:function(){if(this.settings.blockUI){var e="#bdbdbd";switch(mt){case"light":default:e="#f0f0f0";break;case"dark":e="#313236";break;case"high-contrast":e="#d8d8d8"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",e),$("body").append(this.pageOverlay)}},triggerEvent:function(e){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||mt.themeColors().brand.primary.alt.value,theme:e||"theme-new-light"}),$("body").trigger("resize")},unBlockUi:function(){var e=this;e.settings.blockUI&&e.pageOverlay&&e.pageOverlay.fadeOut(300,function(){e.pageOverlay.remove(),e.pageOverlay=void 0})},updated:function(e){if(!e)return this;var t=_.extend({},this.settings);return this.settings=_.mergeSettings(this.element[0],e,this.settings),this.settingsDidChange(t,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(t,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(t,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(e,t){return this.settings[t]&&this.settings[t]!==e[t]},teardown:function(){return this.element.off("updated.".concat("personalize")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"personalize")}};var Vr={theme:"theme-new-light"};"object"===Ge(window.SohoConfig)&&"object"===Ge(window.SohoConfig.personalize)&&(Vr=window.SohoConfig.personalize);var Ci=new vs(document.documentElement,Vr);$.fn.personalize=function(e){return this.each(function(){var t=$.data(this,"personalize");t||(t=$.data(this,"personalize",Ci)),t.updated(e)})},$.fn.disable=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.disable&&t.disable()}),this.prop("disabled",!0),this.attr("disabled",!0).closest(".field").addClass("is-disabled"),this},$.fn.enable=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.enable&&t.enable()}),this.prop({disabled:!1,readonly:!1}),this.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this},$.fn.readonly=function(){return $.each(this.data(),function(e,t){t instanceof jQuery||t&&t.readonly&&t.readonly()}),this.prop("readonly",!0),this},$.fn.revealText=function(e){if(!this)return this;var t=this;t.addClass("show"===(null==e||null==e?void 0:e.initialState)?"input-show-text":"input-hide-text");var n=$('<span class="input-hideshow-text">'.concat(Soho.Locale.translate("show"===(null==e||null==e?void 0:e.initialState)?"Hide":"Show"),"</span>"));t.after(n),t.hasClass("input-hide-text")&&t.attr("type","password");var i=function(){if(t.hasClass("input-hide-text"))return t.removeClass("input-hide-text").addClass("input-show-text"),t.attr("type","text"),void n.text(Soho.Locale.translate("Hide"));t.removeClass("input-show-text").addClass("input-hide-text"),t.attr("type","password"),n.text(Soho.Locale.translate("Show"))};return n.on("click",function(){i()}),t.on("keypress",function(a){18===a.keyCode&&a.ctrlKey&&i()}),this},$(function(){var e,t;$(".label-text").closest("label, .label").each(function(){t=$("input, textarea, select",this),e=t.attr("class"),$(this).addClass(function(){return"inline".concat(e?" inline-".concat(-1===e.indexOf(" ")?e:e.substr(0,e.indexOf(" "))):"")})})}),$(function(){$("input:radio").on("click.radios",function(){this.focus()})}),$(function(){var e=function(t,n){for(var i=0,a=t.length;i<a;i++)$(t[i]).parent().addClass(n)};e($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),e($(".field > input:radio, .field > .inline-radio"),"field-radio"),e($(".field > input:checkbox ~ label.checkbox-label.hitbox"),"field-hitbox")}),$(function(){$(".field-checkbox input:checkbox ~ label.checkbox-label.hitbox").each(function(e,t){$(t).innerWidth()>44&&$(t).addClass("hitbox-padding")})}),$(function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach(function(t){-1!==t.className.indexOf("accessible")&&(t.querySelector(".required-asterisk")||t.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))});var e=[].slice.call(document.body.querySelectorAll("[data-validate]"));e.forEach(function(t){var n=t.getAttribute("data-validate");n&&n.indexOf("required")>-1&&t.setAttribute("aria-required",!0)}),(e=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach(function(t){var n=t.getAttribute("id");if(n){var i=document.body.querySelector('label[for="'.concat(n,'"]'));i&&i.setAttribute("aria-hidden",!0)}})}),$.fn.highlight=function(e){return this.length&&e&&e.length?this.each(function(){!function t(n,i){var a,s,o,c,d=0;if(3===n.nodeType)a=n.data.toUpperCase().indexOf(i),(a-=n.data.substr(0,a).toUpperCase().length-n.data.substr(0,a).length)>=0&&((s=document.createElement("mark")).className="highlight",(o=n.splitText(a)).splitText(i.length),c=o.cloneNode(!0),s.appendChild(c),o.parentNode.replaceChild(s,o),d=1);else if(1===n.nodeType&&n.childNodes&&!/(script|style)/i.test(n.tagName))for(var p=0;p<n.childNodes.length;++p)p+=t(n.childNodes[p],i);return d}(this,e.toUpperCase())}):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var Gi={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder",useItemDimensions:!1};function Ii(e,t){this.settings=_.mergeSettings(e,t,Gi),this.element=$(e),this.init()}Ii.prototype={init:function(){this.isTouch=Ie.features.touch,this.isIe="ie"===Ie.browser.name,this.handleEvents()},getElementByTouchInList:function(e,t,n){for(var i=!1,a=$(e),s=0,o=a.length;s<o;s++){var c=$(a[s]),d=c.offset();t<=d.left||t>=d.left+c.outerWidth()||n<=d.top||n>=d.top+c.outerHeight()||(i=c)}return i},dragTouchElement:function(e,t){var n=e.originalEvent.changedTouches;t&&t[0]&&n&&n[0]&&this.offset&&(t[0].style.top="".concat(n[0].pageY-this.offset.y,"px"),t[0].style.left="".concat(n[0].pageX-this.offset.x,"px"))},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,Gi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function(e){var t=this.settings,n=null;if(t.isVisualItems){var i=this.element.children().not('[data-arrange-exclude="true"]');t.itemsSelector&&(i=$(t.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),n=i.index(e)}return n},handleEvents:function(){var e,t,n=this,i=this.settings,a={},s=this.element.children().not('[data-arrange-exclude="true"]'),o=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));i.itemsSelector&&(s=$(i.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),o=$("<".concat(s.first()[0].tagName," />"))),i.placeholder&&(o=$(i.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=i.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=o,this.isTouch||this.placeholders.addClass("".concat(i.placeholderCssClass," draggable")),$(this.handle,s).addClass("draggable").on("mousedown.arrange touchstart.arrange",function(){t=!0}).on("mouseup.arrange touchend.arrange",function(){t=!1}),this.connectWith&&(s=s.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=s,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,o]).not("a[href], img").on("selectstart.arrange",function(){return this.dragDrop&&this.dragDrop(),this.isIe}),this.items.add(o).each(function(){$(this).on(n.dragStart,function(c){if(n.handle&&!t)return!!n.isTouch&&void 0;t=!1,n.dragging=$(this),e=n.dragging.addClass("arrange-dragging").index();var d=i.isVisualItems?n.getVisualIndex(n.dragging):e;$.extend(a,{start:n.dragging,startIndex:d});var p=n.element.triggerHandler("beforearrange",a);if("boolean"==typeof p&&!p||"string"==typeof p&&"false"===p.toLowerCase())n.dragging=null;else{var f,m=n.dragging[0].getBoundingClientRect();if(i.useItemDimensions&&(o[0].style.width="".concat(m.width,"px"),o[0].style.height="".concat(m.height,"px"),(f=o[0].classList).add.apply(f,Un(i.placeholderCssClass.split(" ")))),n.isTouch){var b=c.originalEvent.changedTouches;b&&b[0]&&(n.offset={x:b[0].pageX-m.left,y:b[0].pageY-m.top})}else{var C=c.originalEvent.dataTransfer,T={x:c.originalEvent.clientX-m.left,y:c.originalEvent.clientY-m.top};C.effectAllowed="move",C.setData("Text","sample"),C.setDragImage(n.dragging[0],T.x,T.y)}}}).on(n.dragEnd,function(){if(n.dragging){if(n.isTouch){var c,d={opacity:1};i.useItemDimensions&&(d.position=""),n.dragging.css(d),null===(c=n.placeholderTouch)||void 0===c||null==c||c.remove()}if(n.element.removeClass("has-arrange-placeholder"),n.placeholders.filter(":visible").after(n.dragging),n.dragging.removeClass("arrange-dragging").show(),n.placeholders.detach(),e!==n.dragging.index()){var p=i.isVisualItems?n.getVisualIndex(n.dragging):n.dragging.index();$.extend(a,{end:n.dragging,endIndex:p}),n.element.triggerHandler("arrangeupdate",a)}n.dragging=null,n.placeholderTouch=null}}).on(n.dragWhileDragging,function(c){if(n.dragging){var d,p=this;if(c.preventDefault(),n.isTouch&&!n.placeholderTouch&&(n.placeholderTouch=n.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(n.dragging),n.dragTouchElement(c,n.placeholderTouch)),"drop"===c.type)return c.stopPropagation(),n.dragging.trigger("dragend.arrange"),!1;if(n.isTouch){var f=c.originalEvent.touches[0];p=n.getElementByTouchInList(s,f.pageX,f.pageY)||p}if(p=$(p),n.isTouch||(c.originalEvent.dataTransfer.dropEffect="move"),s.is(p)&&o.index()!==p.index()){if(n.isTouch){var m={opacity:0};i.useItemDimensions&&(m.position="fixed"),n.dragging.css(m)}else n.dragging.hide();var b;o.index()<p.index()?(o.insertAfter(p),d=p.index(),b=i.isVisualItems?n.getVisualIndex(p):d):(o.insertBefore(p),d=o.index(),b=i.isVisualItems?n.getVisualIndex(o):d),n.element.addClass("has-arrange-placeholder"),$.extend(a,{over:p,overIndex:b}),n.element.triggerHandler("draggingarrange",a),_.fixSVGIcons(p),n.placeholders.not(o).detach()}else n.placeholders.is(this)||(n.placeholders.detach(),n.element.append(o));if(!n.isTouch)return!1;n.dragTouchElement(c,n.placeholderTouch)}})})}},$.fn.arrange=function(e){return this.each(function(){var t=$.data(this,"arrange");t?t.updated(e):t=$.data(this,"arrange",new Ii(this,e))})};var Ao={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function So(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Ao),this.init()}So.prototype={init:function(){this.handleEvents()},finish:function(e,t){var n={top:t,left:e};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("dragend",n),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(e,t){var n={left:e,top:t};if("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.settings.containment&&(this.container=this.settings.containment instanceof jQuery?this.settings.containment:"parent"===this.settings.containment?this.element.parent():"window"===this.settings.containment?$(window):"container"===this.settings.containment?this.element.closest(".page-container"):$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),n.top>this.upperYLimit&&(n.top=this.upperYLimit),n.left>this.upperXLimit&&(n.left=this.upperXLimit),n.top<0&&(n.top=0),n.left<0&&(n.left=0),"container"===this.settings.containment&&n.left<=1&&(n.left=1)),this.settings.obstacle){var i=this.clone?this.clone.offset():this.element.offset(),a=this.clone?this.clone.outerWidth():this.element.outerWidth(),s=n.left>i.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var o=$(this.obstacle).offset();this.constraints={top:o.top,left:o.left,bottom:o.top+this.obstacle.outerHeight(),right:o.left+this.obstacle.outerWidth()}}!s&&this.originalPos.left>this.constraints.left&&n.left<=this.constraints.right&&(n.left=this.constraints.right),s&&this.originalPos.left+a<=this.constraints.left&&n.left+a>=this.constraints.left&&(n.left=this.constraints.left-this.obstacle.outerWidth())}var c=function(d,p,f){void 0!==p[f]&&(d[0].style[f]="".concat(p[f],"px"))};c(this.clone||this.element,n,"top"),c(this.clone||this.element,n,"left"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("drag",n)},getElementsFromPoint:function(e,t){var n=[];if(document.elementsFromPoint)n=document.elementsFromPoint(e,t);else if(document.msElementsFromPoint)n=document.msElementsFromPoint(e,t);else{for(var i,a,s,o,c=999,d=[];(o=document.elementFromPoint(e,t))&&-1===n.indexOf(o)&&null!==o&&c>-1;)c--,n.push(o),d.push({value:o.style.getPropertyValue("pointer-events")||"",priority:o.style.getPropertyPriority("pointer-events")}),o.style.setProperty("pointer-events","none","important");for(i=0,a=n.length;i<a;i++)n[i].style.setProperty("pointer-events",(s=d[i]).value,s.priority)}return n},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings))},destroy:function(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var e=this;e.offset=null,e.element.attr("draggable",!Ie.features.touch),"onpointerdown"in window||"onmspointerdown"in window||e.element.on("touchstart.draggable gesturestart.draggable",function(t){var n=$(this).position(),i=t.originalEvent;e.offset={x:i.changedTouches[0].pageX-n.left,y:i.changedTouches[0].pageY-n.top},e.originalPos=n,e.element.addClass("is-dragging"),n.offset=e.offset,n.clone=e.clone,e.element.trigger("dragstart",n)}).on("touchmove.draggable gesturechange.draggable",function(t){t.preventDefault();var n=t.originalEvent;n.targetTouches.length>1||e.move(n.changedTouches[0].pageX-e.offset.x,n.changedTouches[0].pageY-e.offset.y)}).on("touchend.draggable gestureend.draggable touchcancel.draggable",function(t){t.preventDefault();var n=t.originalEvent.changedTouches[0];e.finish(n.pageX-e.offset.x,n.pageY-e.offset.y)}),e.element.on("mousedown.draggable",function(t){t.preventDefault();var n=e.settings.clonePosIsFixed?e.element[0].getBoundingClientRect():e.element.position();e.offset={x:t.pageX-n.left,y:t.pageY-n.top},e.originalPos=n,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",function(i){i.preventDefault(),e.move(i.pageX-e.offset.x,i.pageY-e.offset.y)}),$(document).on("mouseup.draggable",function(i){i.preventDefault(),e.finish(t.pageX-e.offset.x,i.pageY-e.offset.y)}),e.element.on("mouseup.draggable",function(i){i.preventDefault(),e.finish(i.pageX-e.offset.x,i.pageY-e.offset.y)}),!e.clone&&e.settings.clone&&(e.clone=e.element.clone(!0),"parent"===e.settings.cloneAppendTo&&(e.settings.cloneAppendTo=e.element.parent()),e.clone.addClass(e.settings.cloneCssClass).appendTo(e.settings.cloneAppendTo||"body")),e.element.addClass("is-dragging"),e.element.trigger("dragstart",[n,e.clone])})}},$.fn.drag=function(e){return this.each(function(){var t=$.data(this,"drag");t?t.updated(e):t=$.data(this,"drag",new So(this,e))})};var Qa={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},rl=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],Rs=["top","left","right","bottom","center"],Os=["left","center","right"],ol=["top","center","bottom"],Eo=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function Pa(e){var t=this;return Eo.forEach(function(n){if(null!==e[n])return"x"===n||"y"===n?(t.setCoordinate(n,e[n]),void(t["original".concat(n)]=e[n])):void(t[n]=e[n])}),this.modified=!1,this.sanitize()}function jr(e,t){this.settings=_.mergeSettings(e,t,Qa),this.element=$(e),this.init()}Pa.prototype={isReasonableDefault:function(e,t){return $.inArray(e,t)>-1},sanitize:function(){var e=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:Qa.callback,this.container=this.container instanceof $&&this.container.length?this.container:Qa.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:Qa.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,Os)?this.parentXAlignment:Qa.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,ol)?this.parentYAlignment:Qa.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,Rs)?this.placement:Qa.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach(function(t,n){e.strategies[n]=e.isReasonableDefault(t,rl)?t:e.strategies[n]})},setCoordinate:function(e,t){this.isReasonableDefault(e,["x","y"])&&(isNaN(t)&&(t=0),this[e]=Math.round(t))}},jr.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var e=this.element[0].style.height,t=this.element[0].style.width;return e&&(this.originalStyles.height=e),t&&(this.originalStyles.width=t),this},handleEvents:function(){var e=this;return this.element.on("place.".concat("place"),function(t,n,i){e.place(new Pa({x:n,y:i}))}).on("updated.".concat("place"),function(){e.updated()}),this},render:function(e){var t=/(px|%)/i;this.element.offset({left:e.x,top:e.y}),e.height&&(this.element[0].style.height=e.height+(t.test("".concat(e.height))?"":"px")),e.width&&(this.element[0].style.width=e.width+(t.test("".concat(e.width))?"":"px"))},place:function(e){var t=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[t])?(e instanceof Pa||(e=new Pa(e)),null==e.x&&null==e.y?t:(this.clearOldStyles(),e.parent?this.placeWithParent(e):this.placeWithCoords(e))):t},placeWithParent:function(e){if(!e.parent||!e.parent.length)return[void 0,void 0];var t,n=this,i=this.getContainer(e),a=i.length&&i[0]===document.body;Ie.rtl&&i.length&&(t=ue.getDimensions(i[0]),this.element.css({left:"".concat(t.left,"px"),top:"".concat(t.right,"px")}));var s=ue.getDimensions(e.parent[0]),o=a?$(window).scrollLeft():i.scrollLeft(),c=a?$(window).scrollTop():i.scrollTop();function d(p){var f=function(m){var b,C,T=m.placement,S=m.parentXAlignment,M=m.parentYAlignment,L=ue.getDimensions(n.element[0]);switch(T){case"top":C=s.top-L.height-m.y+(a?c:0);break;case"left":b=s.left-L.width-m.x+(a?o:0);break;case"right":b=s.right+m.x+(a?o:0);break;default:C=s.bottom+m.y+(a?c:0)}if("top"===T||"bottom"===T){var z=Math.round(a?document.body.offsetWidth:null);switch(S){case"left":b=a&&z<Math.round(L.left)+Math.round(L.width)?s.left+m.x+o:s.left-m.x+(a?o:0);break;case"right":b=a&&Math.round(L.right)-Math.round(L.width)<0?s.left-m.x+o:s.right-L.width+m.x+(a?o:0);break;default:b=s.left+(s.width-L.width)/2+m.x+(a?o:0)}}if("right"===T||"left"===T)switch(M){case"top":C=s.top-m.y+(a?c:0);break;case"bottom":C=s.bottom-L.height+m.y+(a?c:0);break;default:C=s.top+(s.height-L.height)/2+m.y+(a?c:0)}return[b,C]}(p);return p.setCoordinate("x",f[0]),p.setCoordinate("y",f[1]),n.render(p),n.handlePlacementCallback(p)}return e.useParentWidth&&(e.width=s.width),e.useParentHeight&&(e.height=s.height),(e=d(e)).strategies.forEach(function(p){(e=n.checkBleeds(e)).bleeds&&(e=function(){switch(p){case"nudge":return n.nudge(e);case"clockwise":return n.clockwise(e);case"flip":return(e=n.flip(e)).setCoordinate("x",e.originalx),e.setCoordinate("y",e.originaly),e=d(e);case"shrink":return n.shrink(e);case"shrink-x":return n.shrink(e,"x");case"shrink-y":return n.shrink(e,"y");default:return e}}(),n.render(e))}),e.element=this.element,this.element.trigger("afterplace",[e]),e},placeWithCoords:function(e){return this.render(e),e=this.handlePlacementCallback(e),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.nudge(e)),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.shrink(e)),this.render(e),this.element.trigger("afterplace",[e]),e},handlePlacementCallback:function(e){var t=e.callback||this.settings.callback;return e.element=this.element,t&&"function"==typeof t&&(e=t(e)),this.render(e),e},accountForScrolling:function(e){var t=e.container,n=window.getComputedStyle(this.element[0]).position;if("fixed"===n)return!1;if(t&&t.length||(t=this.element.parents().filter(function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===n})),!t||!t.length)return!0;if(t[0]===document.body)return!1;var i=window.getComputedStyle(t[0]);return"fixed"!==(n=i.position)&&("absolute"!==n||"hidden"!==i.overflow)},getContainer:function(e){if(e.container instanceof $&&e.container.length)return e.container;var t=this.element.parents(".modal");return t.length?t:$(document.body)},checkBleeds:function(e){var n=this.settings.bleedFromContainer,i=this.getContainer(e),a=i.length&&i[0]===document.body,s=this.element[0].getBoundingClientRect(),o={},c=i?i[0].getBoundingClientRect():{},d=a?$(window).scrollLeft():i.scrollLeft(),p=a?$(window).scrollTop():i.scrollTop(),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),m=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function b(U){switch(U){case"top":return(n?0:c.top)-(a?-1*p:0);case"left":return(n?0:c.left)-(a?-1*d:0);case"right":return(n?m:c.right)-(a?-1*d:0);default:return(n?f:c.bottom)-(a?-1*p:0)}}o.width=s.width,o.height=s.height,o.top=s.top,o.right=s.right,o.bottom=s.bottom,o.left=s.left;var C=b("right");if(o.width>=C){var T=o.width-(o.width-C+20);e.width=T,this.element[0].style.width="".concat(T,"px"),o.width=T}var S=b("bottom");if(o.height>=S){var M=o.height-(o.height-S+20);e.height=M,this.element[0].style.height="".concat(M,"px"),o.height=M}var L=o.right>b("right"),z=o.left<b("left"),V=o.top<b("top"),N=o.bottom>b("bottom");return L||z||V||N?(e.bleeds={},e.bleeds.right=L?o.right-b("right"):null,e.bleeds.left=z?-(o.left-b("left")):null,e.bleeds.top=V?-(o.top-b("top")):null,e.bleeds.bottom=N?o.bottom-b("bottom"):null,e):(e.bleeds=void 0,e)},nudge:function(e){e.nudges||(e.nudges={x:0,y:0});var t=0;return e.bleeds.right&&(t=Math.abs(e.bleeds.right)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x-t),e.nudges.x-=t),e.bleeds.left&&(t=Math.abs(e.bleeds.left)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x+t),e.nudges.x+=t),e.bleeds.top&&(t=Math.abs(e.bleeds.top)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y+t),e.nudges.y+=t),e.bleeds.bottom&&(t=Math.abs(e.bleeds.bottom)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y-t),e.nudges.y-=t),e.wasNudged=!0,e.bleeds=void 0,e},flip:function(e){if(!e.bleeds[e.placement])return e;if(e.attemptedFlips||(e.attemptedFlips=[]),e.attemptedFlips.push(e.placement),e.attemptedFlips.length>3)return e=this.giveup(e);var t=this.accountForScrolling(e),n=["left","right"].indexOf(e.placement)>-1,i=this.settings.bleedFromContainer,a=this.getContainer(e),s=a.length&&a[0]===document.body,o=a?a[0].getBoundingClientRect():{},c=e.parent[0].getBoundingClientRect(),d=s?$(window).scrollLeft():a.scrollLeft(),p=s?$(window).scrollTop():a.scrollTop(),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),m=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function b(S){switch(S){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function C(S){var M=0;switch(S){case"left":M=(i?0:o.left)-(t?d:0)-c.left+e.containerOffsetX;break;case"right":M=(i?m:o.right)-(t?d:0)-c.right-e.containerOffsetX;break;case"top":M=(i?0:o.top)-(t?p:0)-c.top+e.containerOffsetY;break;default:M=(i?f:o.bottom)-(t?p:0)-c.bottom-e.containerOffsetY}return Math.abs(M)}function T(S){return $.inArray(S,e.attemptedFlips)>-1}return e.placement=function(S){var M=b(S),L=n?"top":"left",z=b(L),V=C(S),N=C(M);if(!T(M))return V>=N?S:(e.wasFlipped=!0,M);var U=e.originalx;e.originalx=e.originaly,e.originaly=U;var G=C(L),Z=C(z);if(!T(L)){if(G>=Z)return L;if(!T(z))return z}return S}(e.placement),e},clockwise:function(e){return e},shrink:function(e,t){var a=null==t||"x"===t,s=null==t||"y"===t,o=this.accountForScrolling(e),c=ue.getDimensions(this.element[0]),d=this.settings.bleedFromContainer,p=this.getContainer(e),f=p?p[0].getBoundingClientRect():{},m=p.length&&p[0]===document.body,b=null===e.parent,C=m?$(window).scrollLeft():p.scrollLeft(),T=m?$(window).scrollTop():p.scrollTop(),S=Math.max(document.documentElement.clientHeight,window.innerHeight||0),M=Math.max(document.documentElement.clientWidth,window.innerWidth||0),L=(o?C:0)+(d?0:f.left)+e.containerOffsetX,z=(o?T:0)+(d?0:f.top)+e.containerOffsetY,V=(o?C:0)+(d?M:f.right)-e.containerOffsetX,N=(o?T:0)+(d?S:f.bottom)-e.containerOffsetY,U=V-L,G=N-z;if(!b){var Z=ue.getDimensions(e.parent[0]),oe=Z.top-z,le=N-Z.bottom,re=Z.left-L,J=V-Z.right;U=re>J?re:J,G=oe>le?oe:le}return a&&(c.width>U&&(e.width=U),c.left<L&&e.setCoordinate("x",e.x+(L-c.left))),s&&(c.height>G&&(e.height=G),c.top<z&&e.setCoordinate("y",e.y+(z-c.top))),e},giveup:function(e){return e.giveup=!0,e.strategy=this.settings.strategy,e.placement=this.settings.placement,e},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var e=this.originalStyles;return e&&(e.width&&(this.element[0].style.width=e.width),e.height&&(this.element[0].style.height=e.height)),this},setArrowPosition:function(e,t,n){var i=t.parent,a=n.find("div.arrow"),s=t.placement,o={},c=n[0].getBoundingClientRect(),d={},p={},f=!1;if(i&&i.length&&a.length){a[0].removeAttribute("style"),n.removeClass("top right bottom left").addClass(s),i.is(".colorpicker, .datepicker, .timepicker")&&(i=i.next(".trigger")),i.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(i=i.find(".icon").last()),i.is(".searchfield-category-button")&&(i=i.find(".icon.icon-dropdown")),i.is(".colorpicker-editor-button")&&(i=i.find(".trigger .icon")),i.is(".fontpicker")&&(i=i.find(".icon.icon-dropdown")),i.length||(i=t.parent),o=i.length?i[0].getBoundingClientRect():o,d=a.length?a[0].getBoundingClientRect():d,p={};var m,b,C={};C[(b=s,"right"===b||"left"===b?"margin-top":"margin-left")]=(m=0,"left"!==s&&"right"!==s||(p.top=d.top+(m=o.top+o.height/2-(d.top+d.height/2)),p.bottom=d.bottom+m,(p.top<=c.top||p.bottom>=c.bottom)&&(f=!0)),"top"!==s&&"bottom"!==s||(p.left=d.left+(m=o.left+o.width/2-(d.left+d.width/2)),p.right=d.right+m,(p.left<=c.left||p.right>=c.right)&&(f=!0)),m),f&&(C.display="none"),a.css(C)}},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(e){return this.each(function(){var t=$.data(this,"place");t?t.updated(e):t=$.data(this,"place",new jr(this,e))})};var Gl={use:"user-profile",focusable:!1};function bs(e,t){this.settings=_.mergeSettings(e,t,Gl),this.element=$(e),this.init()}bs.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var e=this.element[0].getElementsByTagName("use")[0];return e?(e.getAttribute("href")!==this.getBasedUseTag()&&e.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return Ya.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var e=this.element.children("use");if(!e.length)return this;var t=e.attr("href");!t&&e.attr("xlink:href")&&(t=e.attr("xlink:href"));var n=Ya.url;return t&&Ya.element.length&&n.length&&(t=t.replace(n,"")),t=t.replace("#icon-",""),this.settings.use=t,this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("icon"),function(){e.updated()}),this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("icon")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(e){return this.each(function(){var t=$.data(this,"icon");t?t.updated(e):t=$.data(this,"icon",new bs(this,e))})},function(){function e(t){var n={icon:"user-profile",classes:["icon"]};return"string"==typeof(t=t||$.extend({},n))&&(t=$.extend({},n,{icon:t.replace("icon-","")})),!t.classes&&t.class&&(t.classes=t.class,delete t.class),t.classes||(t.classes=[].concat(n.classes)),"string"==typeof t.classes&&(t.classes=t.classes.split(" ")),-1===t.classes.indexOf("icon")&&t.classes.push("icon"),t.icon||(t.icon=""),t}$.createIcon=function(t){return t=e(t),['<svg class="'.concat(t.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(t.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(t){return t=e(t),$.getBaseURL("#icon-".concat(t.icon.replace("icon-","")))},$.fn.changeIcon=function(t){t&&$(this).find("use").attr("href",$.createIconPath({icon:t}))},$.fn.getIconName=function(){var t=$(this),n=t.find("use");return 1===n.length&&n.attr("href")?n.attr("href").substr(n.attr("href").indexOf("#icon-")+6):1===n.length&&n.attr("xlink:href")?n.attr("xlink:href").substr(n.attr("xlink:href").indexOf("#icon-")+6):t.attr("data-icon")}}();var $o={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",showOnKeyboardFocus:!0,title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,isRangeDatepicker:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null,delay:500,onHidden:null,attachToBody:!0,attributes:null};function Bs(e,t){this.settings=_.mergeSettings(e,t,$o),this.element=$(e),this.init()}Bs.prototype={get componentName(){return this._componentName||(this._componentName=this.isPopover?"popover":"tooltip"),this._componentName},get isPopover(){return null!==this.settings.content&&"object"===Ge(this.settings.content)||!0===this.settings.popover},get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!ue.hasClass(this.element[0],"hidden")&&!ue.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var e=document.activeElement;return!!this.activeElement.is($(e))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(e))},init:function(){this.uniqueId=_.uniqueId(this.element,this.componentName),this.isTouch=Ie.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var e=this.element.attr("title");(!this.settings.popover&&e&&e.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:e,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),Array.isArray(this.settings.attributes)&&_.addAttributes(this.element,this,this.settings.attributes,"trigger"),this.isRTL=P.isRTL(),ue.addClass(this.element[0],"has-tooltip")},addAria:function(){if(this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.attr("aria-describedby",this.description.attr("id")),this.isPopover)){var e=this.element.prev("input.timepicker").length;if(e||"click"!==this.settings.trigger||this.element.attr("aria-haspopup",!0),e){var t=this.tooltip.attr("id"),n=this.element.prev("input.timepicker");n.attr("role","combobox"),n.attr("aria-haspopup","dialog"),n.attr("aria-owns",t),this.element.attr("role","button"),this.element.attr("aria-controls",t),this.tooltip.attr("role","dialog"),this.tooltip.attr("aria-label",P.translate("TimepickerPopup"))}}},addClassToLinks:function(e,t){if(e instanceof $&&e.length>0)return e;var n=$("<div/>").html(e);return $("a",n).addClass(t),n.html()},appendTooltip:function(){var e=this.settings.tooltipElement,t=this.isPopover?"popover":"tooltip";if(this.tooltip=e?$(e):$("#".concat(this.componentName)),!this.tooltip.length){var n=e?e.substring(1,e.length):this.componentName;this.tooltip=$('<div class="'.concat(t,' bottom is-hidden" id="').concat(n,'">\n        <div class="arrow"></div><div class="tooltip-content"></div></div>')),$e.removeWhiteSpaceCharacters(this.tooltip)}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],this.componentName,this),this.setTargetContainer(),this.addAria()},handleEvents:function(){var e=this,t=e.settings.delay/10;function n(){e.timer&&e.timer.destroy&&e.timer.destroy(!0)}function i(){n(),e.timer=new nn({duration:t,timeoutCallback:function(){e.show()}}),dt.register(e.timer)}function a(){n(),e.show()}function s(){n(),e.hide()}function o(){e.visible?s():a()}"hover"!==this.settings.trigger||this.settings.isError||((this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),function(){e.isTouch||i()}).on("mouseleave.".concat("tooltip"),function(){e.visible?s():n()}).on("click.".concat("tooltip"),function(){e.isTouch||s()}).on("longpress.".concat("tooltip"),function(){a()}).on("updated.".concat("tooltip"),function(){e.updated()}),this.settings.showOnKeyboardFocus&&(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("focus.".concat("tooltip"),function(){e.isTouch&&!ko.pressedKeys.get("Tab")||i()}).on("blur.".concat("tooltip"),function(){e.settings.keepOpen||s()})),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),function(){o()}),"immediate"===this.settings.trigger&&setTimeout(function(){o()},1),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),function(){a()}).on("blur.".concat("tooltip"),function(){e.settings.keepOpen||s()}),$(window).on("orientationchange.".concat("tooltip"),function(){e.visible&&s()},!1)},setContent:function(e,t){var n=this,i=this.settings.content,a=null==e;function s(){!0!==t&&(n.addAria(),n.render())}if(a&&null==i)return!1;if("function"==typeof i&&(e=i),a&&(e=i),e===this.content)return s(),!0;if(e instanceof $&&e.length)return this.content=e.addClass("hidden"),s(),!0;if("string"==typeof e){if(!e.length)return!1;if(0===(e=P.translate(e,{showAsUndefined:!0})||e).indexOf("#")){var o=$("".concat(e));return o.length?(this.content=o,s(),!0):(this.content=e,s(),!0)}}else{if("function"!=typeof e)return!1;var c=e.call(this.element);if(!c||"string"!=typeof c||!c.length)return!1;e=c}return this.content=$e.sanitizeHTML(e),this.content="<p>".concat(this.content,"</p>"),s(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var e=this.tooltip[0].querySelectorAll(".tooltip-title")[0],t=this.tooltip[0].querySelectorAll(".tooltip-content")[0],n=this.settings.extraClass,i=this.content,a=this.tooltip[0],s="tooltip is-hidden";n&&(s+=" ".concat(n)),a.setAttribute("class",s),Array.isArray(this.settings.attributes)&&_.addAttributes(this.tooltip,this,this.settings.attributes),e&&(e.style.display="none"),t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains("arrow")&&t.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>'),ue.html(t,"string"==typeof this.content?i:i[0].innerHTML,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var e=this,t=this.settings.extraClass,n=this.tooltip.find(".tooltip-content"),i=this.tooltip[0].querySelector(".tooltip-title"),a=this.content,s="popover is-hidden";t&&(s+=" ".concat(t)),this.tooltip[0].setAttribute("class",s),Array.isArray(this.settings.attributes)&&_.addAttributes(this.tooltip,this,this.settings.attributes);var o="ie"===Ie.browser.name&&Ie.browser.isIE11()&&a instanceof $&&a.length&&"hover"===this.settings.trigger;if("string"==typeof a)a=$(a),n.html(a),n.find(".hidden").removeClass("hidden");else if(o){var c=a[0].cloneNode(!0),d=c.id;d&&(c.id="".concat(d,"-").concat(this.uniqueId)),n.html(c.outerHTML)}else n.html(a);var p=n.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),o||a[0].classList.remove("hidden"),n[0].firstElementChild.classList.remove("hidden");var f=this.settings.placementOpts.parent.width();if(this.settings.placementOpts.parentXAlignment=P.isRTL()?f>p?"left":"right":f>p?"right":"left",null!==this.settings.title)if(i)i.style.display="",i.childNodes[0].nodeValue=this.settings.title;else{var m=document.createDocumentFragment();i=document.createElement("div"),ue.html(i,this.settings.title,"*"),i.classList.add("tooltip-title"),this.settings.headerClass&&ue.addClass(i,this.settings.headerClass,"filled"),m.appendChild(i),this.tooltip[0].insertBefore(m,this.tooltip[0].firstChild)}else i&&(i.style.display="none");if(this.settings.closebutton&&i&&!i.firstElementChild){var b=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",function(){e.hide(!0)});i.appendChild(b[0]),Array.isArray(this.settings.attributes)&&_.addAttributes(b,this,this.settings.attributes,"btn-close",!0)}this.settings.initializeContent&&a.initialize()},open:function(){return this.show()},show:function(e,t){var n=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.settings.beforeShow&&!t){var i=function(o){("boolean"!=typeof o||o)&&(n.content=o,n.show({content:o},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](i,this.element):void this.settings.beforeShow(i,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),ue.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),_.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var a=this.isTouch?"touchend":"mouseup";if(this.settings.popover)_.addAttributes(this.tooltip.find(".tooltip-title"),this,this.settings.attributes,"title",!0),_.addAttributes(this.tooltip.find(".btn-close"),this,this.settings.attributes,"btn-close",!0),this.element.attr("aria-expanded","true");else{var s=this.element.closest(".is-personalizable").length>0;this.tooltip[0].classList[s?"add":"remove"]("is-personalizable")}setTimeout(function(){var o,c,d,p;$(document).on("".concat(a,".").concat("tooltip","-").concat(n.uniqueId),function(f){var m=$(f.target);n.settings.isError||"focus"===n.settings.trigger||m.is(n.element)&&m.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||1===$("#editor-popup").length&&1===m.closest(".popupmenu").length||(0===m.closest(".popover").length&&0===m.closest(".dropdown-list").length&&(m.is("button")&&m.siblings().hasClass("datepicker")&&n.element.get(0)===m.get(0)||n.hide()),1===m.closest(".popover").length&&m.closest(".popover").not(".monthview-popup").length&&n.element.prev().is(".datepicker")&&n.hide())}).on("keydown.".concat("tooltip","-").concat(n.uniqueId),function(f){(27===f.which||n.settings.isError)&&n.hide()}),n.settings.isError&&!n.element.is(":visible, .dropdown")&&n.element.is("[aria-describedby]")&&n.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),function(){n.hide()}),$("body").on("scroll.".concat("tooltip"),function(){n.hide()}),null===(o=n.element)||void 0===o||null==o||o.closest(".modal-body-wrapper").on("scroll.tooltip",function(){n.hide()}),null===(c=n.element)||void 0===c||null==c||c.closest(".scrollable").on("scroll.tooltip",function(){n.hide()}),null===(d=n.element)||void 0===d||null==d||d.closest(".datagrid-wrapper").on("scroll.tooltip",function(){n.hide()}),n.settings.isError&&n.tooltip.on("click.".concat("tooltip"),function(){n.hide()}),null===(p=n.element)||void 0===p||null==p||p.trigger("aftershow",[n.tooltip])},n.settings.delay)}}},setTargetContainer:function(){var e=$("body");this.isPopover&&(e=$('[role="main"]')),e.length||(e=$("body"));var t=!1;this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(e=this.scrollparent);var n=this.element.closest(".modal");this.settings.attachToBody||(t=!0,e=n),this.settings.parentElement&&(e=this.settings.parentElement),t?this.tooltip.insertAfter(this.element):e[0].appendChild(this.tooltip[0])},handleAfterPlace:function(e,t){var n=this;this.tooltip.data("place").setArrowPosition(e,t,this.tooltip),setTimeout(function(){n.tooltip.triggerHandler("tooltipafterplace",[t])})},position:function(){this.setTargetContainer(),this.settings.isRangeDatepicker||this.tooltip[0].classList.remove("is-hidden"),this.settings.maxWidth&&$(this.tooltip).css("max-width",this.settings.maxWidth);var e=this,t=this.isPopover?20:10,n=this.settings.placementOpts||{},i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),s=this.tooltip[0].getBoundingClientRect(),o=$.extend({},{x:0,y:t,container:this.scrollparent,containerOffsetX:n.containerOffsetX||this.settings.offset.left,containerOffsetY:n.containerOffsetY||this.settings.offset.top,parent:n.parent||this.activeElement,placement:n.placement||this.settings.placement,strategies:["flip","nudge"]},n);return"left"!==o.placement&&"right"!==o.placement||(o.x=t,o.y=0),s.width>=i&&/left|right/g.test(o.placement)||s.height>=a&&/top|bottom/g.test(o.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",function(c,d){e.handleAfterPlace(c,d)}),this.tooltip.data("place")||this.tooltip.place(o),this.tooltip.data("place").place(o),this},close:function(){return this.hide()},hide:function(e){if((!this.settings.keepOpen||e)&&this.visible)if(this.isInPopup)this.settings.content.addClass("hidden");else{if(ue.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip[0].style.maxWidth="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.removeAttr("aria-owns"),this.isPopover){var t=this.element.prev("input");t.length&&t.attr("aria-expanded","false").removeAttr("aria-describedby").removeAttr("aria-haspopup").removeAttr("aria-owns")}this.element.triggerHandler("hide",[this.tooltip]),this.settings.onHidden&&this.settings.onHidden({api:this,elem:this.tooltip})}},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings));var t=this;return"immediate"===t.settings.trigger?setTimeout(function(){t.show()},100):t.setContent(),this},detachOpenEvents:function(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(this.uniqueId),"mouseup.".concat("tooltip","-").concat(this.uniqueId),"touchend.".concat("tooltip","-").concat(this.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function(){return this.timer&&this.timer.destroy&&this.timer.destroy(!0),this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data(this.componentName)&&($.removeData(this.tooltip[0],this.componentName),delete this._componentName)),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),ue.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],this.componentName),delete this._componentName}},$.fn.tooltip=function(e){return this.each(function(){var t=$.data(this,"tooltip");t?t.updated(e):t=$.data(this,"tooltip",new Bs(this,e))})};var Mi={position:"upper-right",color:"alert",attribute:null};function Na(e,t){this.settings=_.mergeSettings(e,t,Mi),this.element=$(e),this.init()}Na.prototype={init:function(){return this.build().handleEvents()},build:function(){if(this.element.hasClass("btn-tertiary")||this.element.hasClass("btn-icon")&&!this.element.hasClass("application-menu-trigger")){var e=this.element.find("svg");this.notificationBadgeContainerEl=$('<span class="notification-badge-container"></span>'),this.notificationBadgeContainerEl.insertAfter(e)}else this.notificationBadgeContainerEl=this.element.append('<span class="notification-badge-container"></span>');var t='\n      <span class="notification-dot notification-dot-'.concat(this.settings.position," notification-dot-").concat(this.settings.color,'"></span>');return this.element.find(".notification-badge-container").append(t),_.addAttributes(this.element.find(".notification-badge-container"),this,this.settings.attributes,"container"),_.addAttributes(this.element.find(".notification-badge-container .notification-dot"),this,this.settings.attributes,"dot"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("notificationbadge"),function(){e.updated()}),this},updated:function(){return this.teardown().init()},show:function(){this.element.find(".notification-dot").removeClass("is-disabled")},hide:function(){this.element.find(".notification-dot").addClass("is-disabled")},teardown:function(){return this.element.off("updated.".concat("notificationbadge")),this},destroy:function(){this.teardown(),this.element&&(this.element.find(".notification-badge-container").remove(),$.removeData(this.element[0],"notificationbadge"))}},$.fn.notificationbadge=function(e){return this.each(function(){var t=$.data(this,"notificationbadge");t?t.updated(e):t=$.data(this,"notificationbadge",new Na(this,e))})};var Gn=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],Wr=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],cr=["icon-favorite","btn-toggle"],dr={style:Gn[0],type:Wr[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,hitbox:!1,validate:!1,notificationBadge:!1,notificationBadgeOptions:{position:"upper-right",color:"alert"},attributes:null};function Ja(e,t){this.element=$(e),this.settings=_.mergeSettings(e,t,dr),this.init()}Ja.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element.parent().is(".spinbox-wrapper")?this.isDisabled(this.element.parent().find("input")):this.isDisabled(this.element)},set disabled(e){this.element[0].disabled=!0===e},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},createNotificationBadge:function(){!this.settings.notificationBadge||this.element.find(".notification-badge-container").length>0||this.element.notificationbadge({position:this.settings.notificationBadgeOptions.position,color:this.settings.notificationBadgeOptions.color})},animateWithJS:function(e){var t=e[0].style,n="".concat(parseFloat(t.left)-100,"px"),i="".concat(parseFloat(t.top)-100,"px");e[0].style.opacity="0.4",e.animate({opacity:0,left:n,top:i,width:200,height:200},1e3)},createRipple:function(e){if(!(this.disabled||e&&(void 0!==e.which&&1!==e.which||-1===["click","touchstart"].indexOf(e.type)))){$("svg.ripple-effect",this.element).remove();var t,n,i=this.element.offset();e&&(e.originalEvent instanceof MouseEvent?(t=e.pageX-i.left,n=e.pageY-i.top):(e=e.originalEvent)&&e.touches&&1===e.touches.length&&(t=e.touches[0].pageX-i.left,n=e.touches[0].pageY-i.top)),t||(t=this.element.outerWidth()/2),n||(n=this.element.outerHeight()/2);var a=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');a[0].style.left="".concat(t,"px"),a[0].style.top="".concat(n,"px"),this.settings.hitbox?$(this.hitboxArea).prepend(a):this.element.prepend(a),!$.fn.cssPropSupport("animation")||Ie.browser.isSafari&&!Ie.features.touch||"firefox"===Ie.browser.name?(a.removeClass("is-animation"),this.animateWithJS(a)):$("svg.ripple-effect",this.element).addClass("is-animation"),setTimeout(function(){a.remove()},1e3)}},render:function(){var e=this;this.renderAttributes(),this.createNotificationBadge();var t=this.element[0].classList;Gn.indexOf(this.settings.style)>0&&t.add(this.settings.style),Wr.indexOf(this.settings.type)>0&&t.add(this.settings.type);var n=this.buttonsetAPI,i=!1;if(n&&("modal"===n.settings.style&&(i=!0),["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(t[i?"remove":"add"]("btn"),t[i?"add":"remove"]("btn-modal")),["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(t[i?"remove":"add"]("btn-primary"),t[i?"add":"remove"]("btn-modal-primary")),["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(t[i?"remove":"add"]("btn-secondary"),t[i?"add":"remove"]("btn-modal-secondary"))),this.settings.isDefault&&(this.settings.style="btn-primary",t.remove("btn-primary"),t.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=$e.stripHTML(this.settings.cssClass)),this.settings.hitbox&&(this.element.addClass("hitbox"),this.hitboxArea=document.createElement("span"),this.hitboxArea.classList.add("hitbox-area"),this.element.prepend(this.hitboxArea)),this.settings.forceDisable&&(this.disabled=this.settings.disabled,delete this.settings.disabled,delete this.settings.forceDisable),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled),this.settings.text){var a=this.element[0].querySelector("span"),s=a instanceof HTMLElement;s||(a=this.element);var o=this.settings.text||$(a).text().trim();o=$e.stripHTML(o),s||(this.element[0].innerText="",a=document.createElement("span"),this.element.append($(a)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&a.classList.add("audible")),a.innerText=o}var c,d=this.icon;if(this.settings.icon?c=this.settings.icon:"btn-toggle"===this.settings.type?c=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?c=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(c="icon-more"),c&&(c=$e.stripHTML(c),d instanceof SVGElement||d instanceof HTMLElement?d.querySelector("use").setAttribute("href","#".concat(c)):(d=$.createIconElement({icon:c.replace("icon-","")}),this.element.prepend($(d)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var p=this.element.children("svg.icon"),f=p.find("use"),m=!1;if(p.length>0&&f.length>=1){var b=f.last().attr("href");!b&&f.last().attr("xlink:href")&&(b=f.last().attr("xlink:href")),m=b.indexOf("#icon-dropdown")>-1}m||(p=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(p)),p.hasClass("icon-dropdown")||p.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",function(T,S){$(this).find("span").text(S.text())}),this.settings.hideMenuArrow&&p.remove()}if(cr.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",function(){e.toggle()}),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){if(!this.element.attr("title")){var C=P.translate("More");return void this.element.attr("title",C).tooltip({content:C})}this.settings.title&&""!==this.element.attr("title")||this.tooltipAPI.destroy()}t[this.settings.ripple?"remove":"add"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",function(T){e.createRipple(T)}),this.element.data("hidefocus")||this.element.hideFocus()},renderAttributes:function(){Array.isArray(this.settings.attributes)&&_.addAttributes(this.element,this,this.settings.attributes)},getSettingsFromElement:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={},a=this.element.parents(".buttonset, .modal-buttonset");a.length&&(e=a.data("buttonset"))&&(this.buttonsetAPI=e);var s=this.element[0].classList||"";if(Gn.forEach(function(m){"default"!==m&&s.contains(m)&&(i.style=m)}),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var o={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(o).forEach(function(m){s.contains(m)&&(i.style=o[m])})}Wr.forEach(function(m){"default"!==m&&s.contains(m)&&(i.type=m)}),this.settings.disabled||(i.disabled=this.disabled);var c=this.element[0].getAttribute("aria-pressed");void 0!==c&&(i.pressed=!0===c,"icon-favorite"===i.type&&(i.toggleOnIcon="icon-star-filled",i.toggleOffIcon="icon-star-outlined"));var d=this.element[0].id;"string"==typeof d&&d.length&&(i.id=d);var p=this.element[0].title;"string"==typeof p&&p.length&&(i.title=p),s.contains("no-ripple")&&(i.ripple=!1);var f=this.element[0].querySelector("span.audible");return f&&(i.audible=!0),n||Object.keys(i).forEach(function(m){t.settings[m]=i[m]}),i},toData:function(e){var t=this,n={};return Object.keys(this.settings).forEach(function(i){n[i]=t.settings[i]}),n.pressed=this.pressed,e&&(n.element=this.element[0]),n},get pressed(){return-1!==cr.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(e){var t,n=!0===e,i=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,a=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",n),this.element[0].classList[n?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":t=n?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":i&&(t=n?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==a.length&&"string"==typeof t&&(a.changeIcon(t),_.fixSVGIcons(a))},toggle:function(){this.pressed=!this.pressed},isDisabled:function(e){return(e=e instanceof jQuery?e:$(e)).is("[disabled]")&&!e.is('[disabled="false"]')},teardown:function(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var e=this.tooltipAPI;this.element.hasClass("btn-actions")&&e&&e.destroy();var t=this.element.data("hidefocus");t&&t.destroy();var n=this.element.data("notificationbadge");return n&&n.destroy(),this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function(e){return this.each(function(){var t=$.data(this,"button");t?t.updated(e):t=$.data(this,"button",new Ja(this,e))})};var ur={buttons:[],detectHTMLButtons:!1,style:"default"};function Ra(e,t){if(!(e instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=e,this.settings=_.mergeSettings(e,t,ur),this.init()}Ra.prototype={set disabled(e){this.element.classList[(e=!0===e)?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach(function(t){t.disabled=e})},init:function(){this.build(),this.render()},build:function(e){var t=this;this.buttons&&e||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach(function(n){t.add(n)}):this.detectHTMLButtons()},render:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.element.classList,i={default:"buttonset",modal:"modal-buttonset"};Object.keys(i).forEach(function(a){e.settings.style!==a&&n.remove(i[a])}),n.add(i[this.settings.style]),t||this.buttons.forEach(function(a){a.render()})},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"object"!==Ge(e))throw new Error("Settings object is required to add a new button to the ButtonSet");var n=e.element,i=n instanceof HTMLElement;i||(n=document.createElement("button"));var a=$e.stripHTML(e.id);"string"==typeof a&&a.length>0&&(n.id=a);var s=$(n);!t&&i||$(this.element).append(s),e.buttonsetAPI=this,s.button(e);var o=s.data("button");this.buttons.push(o)},remove:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===n||"function"!=typeof n.destroy){if(n instanceof HTMLElement?e=n:"string"==typeof n&&(e=$(this.element).find("#".concat(n.replace("#","")))),t=$(e),void 0===(n=$(e).data("button"))||"function"!=typeof n.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else t=n.element;n.destroy(),i&&t.remove(),this.buttons=this.buttons.filter(function(a){return a!==n})},removeAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach(function(n){e.remove(n,t)})},reset:function(){this.buttons=[]},at:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[e]},detectHTMLButtons:function(){var e=this;this.settings.detectHTMLButtons&&(this.reset(),(_.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach(function(t){var n=$(t).data("button");n||($(t).button(),n=$(t).data("button"));var i=n.getSettingsFromElement(!0);i.element=t,e.add(i)}))},toData:function(){var e=_.extend({},this.settings);return this.buttons.forEach(function(t){e.buttons.push(t.toData())}),e},teardown:function(e){return this.removeAll(e),this.reset(),this},updated:function(e){var t=this.settings.buttons;return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),Array.isArray(e.buttons)&&t!==e.buttons?(this.settings.buttons=e.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach(function(n){n.updated()})),this},destroy:function(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function(e){return this.each(function(){var t=$.data(this,"buttonset");t?t.updated(e):t=$.data(this,"buttonset",new Ra(this,e))})};var _s={};function hr(e,t){return this.init(e,t)}hr.prototype={init:function(e,t){return!this.element&&e instanceof HTMLElement&&(this.element=e),"object"===Ge(t)&&(this.settings=_.mergeSettings(this.element,t,this.settings||_s)),this.element.classList.add("hyperlink"),this.focusBehavior||(this.focusBehavior=new ps(this.element)),this},handleEvents:function(){return this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(e){return this.each(function(){var t=$.data(this,"hyperlink");t?t.updated(e):(t=$.data(this,"hyperlink",new hr(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,"hyperlink"),$.removeData(this.element,"hidefocus")}})};var st={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};st.LEGACY_DEFS={"#":st.DIGITS_REGEX,0:st.DIGITS_REGEX,x:st.ALPHAS_REGEX,"*":st.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},st.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:st.EMPTY_STRING,placeholderChar:st.PLACEHOLDER_CHAR,placeholder:st.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var pr={prefix:st.EMPTY_STRING,suffix:st.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function zs(e){return e.split(st.EMPTY_STRING).map(function(t){return st.DIGITS_REGEX.test(t)?st.DIGITS_REGEX:t})}function ys(e,t){var n={any:st.ANY_REGEX,digits:st.DIGITS_REGEX,alphas:st.ALPHAS_REGEX};n[t]||(t="any");for(var i=e.toString().length,a=[];i>0;)a.push(n[t]),i-=1;return a}st.numberMask=function(e,t){(t=_.mergeSettings(void 0,t,pr)).locale&&t.locale.length||(t.locale=P.currentLocale.name),t.allowLeadingZeroes&&(ei("allowLeadingZeros","allowLeadingZeroes","Number Mask"),t.allowLeadingZeros=t.allowLeadingZeroes,t.allowLeadingZeroes=void 0);var n=t.prefix,i=t.suffix,a=t.symbols.decimal,s=t.symbols.thousands,o=n&&n.length||0,c=i&&i.length||0,d=s&&s.length||0;function p(f){"string"!=typeof f&&(f=st.EMPTY_STRING);var m=f.length;if(f===st.EMPTY_STRING||f[0]===n[0]&&1===m)return n.split(st.EMPTY_STRING).concat([st.DIGITS_REGEX]).concat(i.split(st.EMPTY_STRING));if(f===a&&t.allowDecimal)return n.split(st.EMPTY_STRING).concat(["0",st.CARET_TRAP,a,st.CARET_TRAP,st.DIGITS_REGEX]).concat(i.split(st.EMPTY_STRING));var b,C,T,S=f.lastIndexOf(a),M=-1!==S,L=f[0]===t.symbols.negative&&t.allowNegative;if(f.slice(-1*c)===i&&(f=f.slice(0,-1*c)),M?(b=f.slice(f.slice(0,o)===n?o:0,S),C=zs((C=f.slice(S+1,m)).replace(st.NON_DIGITS_REGEX,st.EMPTY_STRING))):b=f.slice(0,o)===n?f.slice(o):f,t.integerLimit&&"number"==typeof t.integerLimit){var z="."===s?"[.]":"".concat(s),V=(b.match(new RegExp(z,"g"))||[]).length;b=b.slice(0,t.integerLimit+(L?1:0)+V*d)}return b=b.replace(st.NON_DIGITS_REGEX,st.EMPTY_STRING),t.allowLeadingZeros||(b=b.replace(/^0+(0$|[^0])/,"$1")),T=zs(b=t.allowThousandsSeparator?function(U,G,Z,oe){if(""===U||isNaN(U))return U;var le=P.toLocaleString(Number(U),Z.locale,oe,G);if(Z&&Z.allowLeadingZeros&&0===U.indexOf("0")){var re="".concat(U).match(/^0*/)[0].length;for(0===le.indexOf("0")&&(le=le.substring(1));re>0;)re-=1,le="0".concat(le)}return le}(b,s,t,{maximumFractionDigits:t.decimalLimit,style:"decimal",useGrouping:!0}):b),(M&&t.allowDecimal||!0===t.requireDecimal)&&(f[S-1]!==a&&T.push(st.CARET_TRAP),T.push(a,st.CARET_TRAP),C&&("number"==typeof t.decimalLimit&&(C=C.slice(0,t.decimalLimit)),T=T.concat(C)),!0===t.requireDecimal&&f[S-1]===a&&T.push(st.DIGITS_REGEX)),o>0&&(T=n.split(st.EMPTY_STRING).concat(T)),L&&(T.length===o&&T.push(st.DIGITS_REGEX),T=[/-/].concat(T)),i.length>0&&(T=T.concat(i.split(st.EMPTY_STRING))),{mask:T}}return p.instanceOf="createNumberMask",p(e)},st.rangeNumberMask=function(e,t){(t=t||{}).delimeter=t.delimeter||"-";var n=P.currentLocale.data.numbers.minusSign,i=function(m){return new RegExp("".concat(m),"g")},a=function(m,b){return(m.match(b)||[]).length},s=e.split(")".concat(t.delimeter,"(")),o=function(m){var b=m.substr(-1),C=a(m,/[\u0028]/g),T=(a(m,/[\u0029]/g),[]);if(1===C){var S=t.allowNegative&&m.substr(1,1)===n;(T=st.numberMask(S?m.substr(1):m,t)).splice(0,0,/[\u0028]/g),")"===b?T.push(/[\u0029]/g):b===t.delimeter&&(T.push(/[\u0029]/g),T.push(i("[".concat(t.delimeter,"]"))))}return T};"number"==typeof t.integerLimit&&(t.integerLimit*=2,t.integerLimit+=t.delimeter.length+4);var c,d=[],p=[];if("("===e.substr(0,1)&&s.length)if(2===a(e,/[\u0028]/g)&&2===a(e,/[\u0029]/g)&&1===a(e,i("\\u0029".concat(t.delimeter,"\\u0028")))&&s[1].indexOf(")")!==s[1].length-1){var f=s[1].substr(0,s[1].indexOf(")")+1);d=o("".concat(s[0],")")),p=[i("[".concat(t.delimeter,"]"))].concat(Un(o("(".concat(f))))}else(d=o(2===s.length?"".concat(s[0],")"):s[0])).length&&2===s.length&&(c="".concat(s[0],")"),/^\u0028.+\u0029$/g.test(c))&&(p=[i("[".concat(t.delimeter,"]"))].concat(Un(o("(".concat(s[1])))));return{mask:[].concat(Un(d),Un(p))}},st.adjustRangeNumber=function(e,t,n){if("rangeNumber"===n.settings.process){var i,a,s,o,c,d,p,f=n&&null!==(i=n.settings)&&void 0!==i&&null!==(a=i?.patternOptions)&&void 0!==a&&a?.delimeter?n.settings.patternOptions.delimeter:"-",m=t&&(null===(s=t.previousMaskResult)||void 0===s||null==s?void 0:s.substr(-1))===f;t&&1===(null===(o=t.selection)||void 0===o||null==o?void 0:o.start)&&1===(null===(c=t.selection)||void 0===c||null==c?void 0:c.end)&&"("!==e?(e="(".concat(e),t.selection.start++,t.selection.end++):t&&1!==(null===(d=t.selection)||void 0===d||null==d?void 0:d.start)&&1!==(null===(p=t.selection)||void 0===p||null==p?void 0:p.end)&&")"===e.substr(-1)&&1===(e.match(/\u0028/g)||[]).length&&!m&&(e="".concat(e).concat(f,"("),t.selection.start+=2,t.selection.end+=2)}return{rawValue:e,opts:t}};var Ur={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},Do={dd:31,d:31,MMM:void 0,MM:12,M:12,y:9999,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function ll(e){return this.configure(e),this}st.dateMask=function(e,t){t=_.mergeSettings(void 0,t,Ur);var m,n=[],i=st.DIGITS_REGEX,a=t.format,s=at.removeDuplicates(a.replace(/[dMyHhmsa]+/g,"")),o=(m=s.split("").map(function(b){return" "===b&&(b="\\s"),"-"===b&&(b="\\-"),b}),new RegExp("[(".concat(m.join("|"),")]+"))),c=a.match(/(d{1,2}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|a{1}|z{1,4}|E{1,4})/g),d=e.split(o),p=Do;return c.forEach(function(f,m){var b,C=p[f];if("a"===f||"ah"===f){var T="AM",S="PM";if(P.calendar()){T=P.calendar().dayPeriods[0],S=P.calendar().dayPeriods[1];for(var M=[],L=0;L<T.length;L++)T[L]&&S[L]&&T[L].toLowerCase()===S[L].toLowerCase()?M.push(T[L].toLowerCase()):M.push(T[L].toLowerCase()+(S[L]?S[L].toLowerCase():""));for(var z=0;z<M.length;z++)n.push(new RegExp("[".concat(M[z],"]"),"i"))}else n.push(/[aApP]/,/[Mm]/);if("ah"===f){var V=d[m].replace(T,"").replace(S,"");n=n.concat(ys(V,"digits"))}}else if(C)if(d[m]){var N=d[m].toString(),U=parseInt(N.substr(0,1),10),G=parseInt(p[f].toString().substr(0,1),10);1===f.length&&U>G||"0"!==N&&1===N.length&&U<=G&&void 0!==d[m+1]&&"HH"!==f.toUpperCase()?n.push(i):n=n.concat(ys(C,"digits"))}else for(b=C.toString().length;b>0;)n.push(i),b-=1;else n=n.concat(ys(f,"alphas"));var Z=c[m+1];if(void 0!==Z){var oe=f.toString().length,le=a.indexOf(f)+oe,re=a.indexOf(Z),J=a.substring(le,re).split(st.EMPTY_STRING),ce=[st.CARET_TRAP].concat(J.concat(st.CARET_TRAP));n=n.concat(ce)}}),{mask:n,literals:s.split(""),literalRegex:o}},st.rangeDateMask=function(e,t){var n=e.split(t.delimeter),i=t.delimeter.split(""),a=st.dateMask(n[0],t),s=[];return n[1]&&(s=st.dateMask(n[1],t)),{mask:a.mask.concat(i.concat(s.mask)),literals:i,literalRegex:s.literalRegex}},st.autocorrectedDatePipe=function(e,t){t.dateFormat||(t.dateFormat=P.calendar().dateFormat.short);var n=[],i=t.dateFormat.split(/[^dMy]+/),a={d:31,M:12,yy:99,yyyy:9999},s={d:1,M:1,yy:0,yyyy:1},o=e.conformedValue.split("");i.forEach(function(f){var m=t.dateFormat.indexOf(f),b=parseInt(a[f].toString().substr(0,1),10);parseInt(o[m],10)>b&&(o[m+1]=o[m],o[m]=0,n.push(m))});var c=new RegExp("[^".concat(e.placeholderChar,"]")),d=e.placeholder.split(c),p=e.conformedValue.split(/\D/g);return!i.some(function(f,m){var b=d[m].length>f.length?d[m].length:f.length,C=p[m]||"",T=parseInt(C,10);return T>a[f]||C.length===b&&T<s[f]})&&{value:o.join(""),characterIndexes:n}},ll.prototype={configure:function(e){if(this.settings||(this.settings={}),!e)return this;if(e.locale&&(this.locale=e.locale),e.pattern)if(Array.isArray(e.pattern)||"function"==typeof e.pattern)this.pattern=e.pattern;else if("string"==typeof e.pattern){var t=_.mergeSettings(void 0,e.definitions||{},st.LEGACY_DEFS);this.pattern=this._convertPatternFromString(e.pattern,t)}return e.patternOptions&&(this.patternOptions=e.patternOptions),this},process:function(e,t){if("string"!=typeof e)throw new Error("No string provided");var n={},i={originalValue:e,caretPos:t.selection.start,maskResult:!1};if("function"==typeof this.pattern){t.patternOptions||(t.patternOptions={});var a=_.extend({},this.patternOptions,t.patternOptions,{caretPos:t.selection.start,previousMaskResult:t.previousMaskResult});n=this.pattern(e,a),Array.isArray(n)&&(n={mask:n});var s=this._processCaretTraps(n.mask);n.mask=s.maskWithoutCaretTraps,n.caretTrapIndexes=s.indexes,t.caretTrapIndexes=s.indexes}else n={mask:this.pattern};if(!1===n.mask)return i;try{i=this._conformToMask(e,n,t)}catch{return i}if(t.patternOptions&&t.patternOptions.delimeter&&i.conformedValue&&i.conformedValue!==e&&(i.caretPos=i.conformedValue.length),"function"==typeof t.pipe){var o={};try{o=t.pipe(i,t)}catch{o=!1}!1===o?(i.pipeResult=!1,i.pipedValue=t.previousMaskResult):_.isString(o)?(i.pipeResult=!0,i.pipedValue=o,i.pipedCharIndexes=[]):i=_.extend({},i,{pipeResult:o.result,pipedValue:o.value,pipedCharIndexes:o.characterIndexes})}return i},_conformToMask:function(e,t,n){(n=_.mergeSettings(void 0,n,st.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(t.mask,n.placeholderChar);var i=!1,a=!1===n.guide&&void 0!==n.previousMaskResult,s=e.length,o=n.previousMaskResult.length,c=this.pattern.length,d=n.placeholder.length||0,p=n.placeholderChar,f=n.selection.start,m=st.EMPTY_STRING,b=s-o,C=b>0,T=f+(C?-b:0),S=T+Math.abs(b);if(!0===n.keepCharacterPositions&&!C){for(var M=st.EMPTY_STRING,L=T;L<S;L++)n.placeholder[L]===p&&(M+=p);e=e.slice(0,T)+M+e.slice(T,s)}for(var z=e.split(st.EMPTY_STRING).map(function(Ze,ft){return{char:Ze,isNew:ft>=T&&ft<S}}),V=s-1;V>=0;V--){var N=z[V];N!==n.placeholderChar&&N===n.placeholder[V>=T&&o===c?V-b:V]&&z.splice(V,1)}e:for(var G=0;G<d;G++){var Z=n.placeholder[G];if(Z===p){if(z.length>0)for(;z.length>0;){var oe=z.shift(),le=e.slice(G,G+1);if(oe.char===p&&!0!==a){m+=p;continue e}if(t.literalRegex&&t.literalRegex.test(oe.char)&&le&&(le===oe.char||le===p)){if(C&&t.literals.indexOf(e[G-1])>-1){f++;continue e}var re=new RegExp("(".concat(oe.char,")"),"g"),J=n.placeholder.match(re).length;e.match(re).length<=J&&(m+=oe.char);for(var ce=n.placeholder.slice(G).indexOf(oe.char);ce>0;)G++,ce--;continue e}if(t.mask[G].test(oe.char)){if(!0===n.keepCharacterPositions&&!1!==oe.isNew&&n.previousMaskResult!==st.EMPTY_STRING&&!1!==n.guide&&C){for(var ke=z.length,_e=null,Oe=0;Oe<ke;Oe++){var Qe=z[Oe];if(Qe.char!==p&&!1===Qe.isNew)break;if(Qe.char===p){_e=Oe;break}}null!==_e?(m+=oe.char,z.splice(_e,1)):G--}else m+=oe.char;continue e}i=!0}!1===a&&(m+=n.placeholder.substr(G,d));break}m+=Z}if(a&&!1===C){for(var nt=null,ot=0;ot<m.length;ot++)n.placeholder[ot]===p&&(nt=ot);null!==nt?m=m.substr(0,nt+1):""!==e&&m.indexOf(e)>-1?f+=e.length:m=st.EMPTY_STRING}return{caretPos:f,caretTrapIndexes:n.caretTrapIndexes,conformedValue:m,charactersRejected:i,placeholder:n.placeholder,placeholderChar:p,maskResult:!0}},_processCaretTraps:function(e){for(var t=[],n=e.indexOf(st.CARET_TRAP);-1!==n;)t.push(n),e.splice(n,1),n=e.indexOf(st.CARET_TRAP);return{maskWithoutCaretTraps:e,indexes:t}},_convertMaskToPlaceholder:function(e,t){if(Array.isArray(e)||(e=[]),t||(t=st.PLACEHOLDER_CHAR),-1!==e.indexOf(t))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map(function(n){return n instanceof RegExp?t:n}).join(st.EMPTY_STRING)},adjustCaretPosition:function(e){if(0===e.caretPos)return 0;function t(re){return re!==t}var i=e.previousMaskResult.length,a=e.placeholder?e.placeholder.length:0,s=e.conformedValue?e.conformedValue.length:0,o=e.rawValue.length-i,c=o>0;if(o>1&&!c&&0!==i)return e.caretPos;var d,p,f=0;if(!c||e.previousMaskResult!==e.conformedValue&&e.conformedValue!==e.placeholder){var m=e.conformedValue.toLowerCase(),b=e.rawValue.toLowerCase().substr(0,e.caretPos).split(st.EMPTY_STRING).filter(function(re){return-1!==m.indexOf(re)});p=b[b.length-1];var C=e.previousPlaceholder.substr(0,b.length).split(st.EMPTY_STRING).filter(t).length,T=e.placeholder.substr(0,b.length).split(st.EMPTY_STRING).filter(t).length!==C;!c&&(T||void 0!==e.previousPlaceholder[b.length-1]&&void 0!==e.placeholder[b.length-2]&&e.previousPlaceholder[b.length-1]!==e.placeholderChar&&e.previousPlaceholder[b.length-1]!==e.placeholder[b.length-1]&&e.previousPlaceholder[b.length-1]===e.placeholder[b.length-2])&&C>0&&e.placeholder.indexOf(p)>-1&&void 0!==e.rawValue[e.caretPos]&&(d=!0,p=e.rawValue[e.caretPos]);var M=[];e.indexesOfPipedChars&&(M=e.indexesOfPipedChars.map(function(re){return m[re]}));for(var L=M.filter(function(re){return re===p}).length,z=b.filter(function(re){return re===p}).length,V=e.placeholder.substr(0,e.placeholder.indexOf(e.placeholderChar)).split(st.EMPTY_STRING).filter(function(re,J){return re===p&&e.rawValue[J]!==re}).length+z+L+(d?1:0),N=0,U=0;U<s&&(f=U+1,m[U]===p&&N++,!(N>=V));U++);}else f=e.caretPos-o;if(c){for(var G=f,Z=f;Z<=a;Z++)if(!e.placeholder||(e.placeholder[Z]===e.placeholderChar&&(G=Z),e.placeholder[Z]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(Z)||Z===a))return G}else if(d){for(var oe=f-1;oe>=0;oe--)if(e.conformedValue[oe]===p||-1!==e.caretTrapIndexes.indexOf(oe)||0===oe)return oe}else for(var le=f;le>=0;le--)if(e.placeholder[le-1]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(le)||0===le)return le},_convertPatternFromString:function(e,t){for(var n,i,a=[],s=Object.keys(t),o=0;o<e.length;o++)a.push(((i=s.indexOf(n=e[o]))>-1&&(n=t[s[i]]),n));return a}};var Yl={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:ll,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function Gr(e,t){return this.element=e,this.settings=_.mergeSettings(this.element,t,Yl),this.init()}Gr.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){if(this._replaceLegacySettings(),"string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=st.numberMask,this.element.classList.add("is-number-mask");break;case"rangeNumber":this.settings.pattern=st.rangeNumberMask,this.element.classList.add("is-range-number-mask");break;case"date":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=e.settings.dateFormat)),this.settings.pattern=st.dateMask;break;case"rangeDate":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=t.settings.dateFormat),this.settings.pattern=st.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var e=this;this.locale=P.currentLocale,this.settings.locale?P.getLocale(this.settings.locale).done(function(t){e.locale=P.cultures[t],e.build()}):this.build()},handleEvents:function(){var e=this;return this.changeEventHandler=function(){e.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){e.state.previousMaskResult=e.element.value,e.state.initialValue=e.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(t){return e.hasTriggeredChangeEvent=!1,e.process(t)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(t){if(!0===this.processingJustHappenedOnInput)return t.preventDefault(),!1;if(e.settings.processOnBlur){if(e.element.readOnly)return t.preventDefault(),!1;!e._hasChangedValue()||!e._isEdgeIE()&&e.hasTriggeredChangeEvent||($(e.element).trigger("change"),e.hasTriggeredChangeEvent=!0)}return delete e.state.initialValue,e.process(t)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(e){if(!this.settings.pattern)return!0;var t=this.mask,n=this.settings.patternOptions||{},i=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(i=this.locale.data.numbers.decimal),n.symbols&&n.symbols.decimal&&(i=n.symbols.decimal),t.pattern||t.configure({pattern:this.settings.pattern,patternOptions:n});var a=this.element.value,s=!1;if(e&&"input"===e.type&&"insertText"===e.inputType&&(""===a?(a=this.state.previousMaskResult,s=!0):e.data===i&&a.indexOf(i)>-1&&(s=!0)),a===this.state.previousMaskResult)return s&&(this.element.value="",this.element.value="".concat(a)),!1;var o=this.element.selectionStart||0,c=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&o!==c&&(_.safeSetSelection(a.length,a.length),o=a.length,c=a.length),a=this._getSafeRawValue(a);var d={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:o,end:c}};o!==c&&(d.selection.contents=a.substring(o,c)),"function"==typeof this.settings.pipe&&(d.pipe=this.settings.pipe);var p=st.adjustRangeNumber(a,d,this),f=t.process(a=p.rawValue,d=p.opts);if(!f.maskResult)return f.maskResult;var m=f.pipedValue?f.pipedValue:f.conformedValue;""!==m&&n&&n.suffix&&m.indexOf(n.suffix)<0&&(m+=this.settings.patternOptions.suffix),d.patternOptions&&d.patternOptions.delimeter&&m&&m!==a&&(a=m);var b={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:m,placeholder:f.placeholder,rawValue:a,caretPos:f.caretPos,placeholderChar:this.settings.placeholderChar};f.pipedCharIndexes&&(b.indexesOfPipedChars=f.pipedCharIndexes),f.caretTrapIndexes&&(b.caretTrapIndexes=f.caretTrapIndexes),f.caretPos=t.adjustCaretPosition(b);var C=this.state.previousMaskResult;return this.state.previousMaskResult=m,this.state.previousPlaceholder=f.placeholder,"firefox"===Ie.browser.name?this.element.value!==m&&(this.element.value=m):this.element.value=m,_.safeSetSelection(this.element,f.caretPos),C!==m&&($(this.element).trigger("write.mask",[m]),f.maskResult)},_isAndroid:function(){return"android"===(Ie&&Ie.os&&Ie.os.name?Ie.os.name:"")},_isEdgeIE:function(){var e=Ie&&Ie.browser&&Ie.browser.name?Ie.browser.name:"";return"ie"===e||"edge"===e},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(e){if(_.isString(e))return e;if(_.isNumber(e))return String(e);if(null==e)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(e)))},_replaceLegacySettings:function(){var e=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var t=this.element.getAttribute("data-mask")||!1;"string"==typeof t&&t.length&&(this.settings.pattern=t);var n=this.element.getAttribute("data-mask-mode")||!1;if(n&&e.indexOf(n)>-1&&(this.settings.mode=n),this.settings.mode&&(-1===e.indexOf(this.settings.mode)&&delete this.settings.mode,this.settings.process="group"===this.settings.mode?void 0:"date"===this.settings.mode?"date":this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var i=this.element.getAttribute("data-thousands")||!1;if(i&&(this.settings.patternOptions.allowThousandsSeparator="true"===i),"string"==typeof this.settings.pattern){var a=-1!==this.settings.pattern.indexOf("-");a&&(this.settings.patternOptions.allowNegative=a,this.settings.patternOptions.symbols.negative="-");var o=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:P.currentLocale.data.numbers?P.currentLocale.data.numbers.group:",",c=-1!==this.settings.pattern.indexOf(o);this.settings.patternOptions.allowThousandsSeparator=c,c&&(this.settings.patternOptions.symbols.thousands=o);var d="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",p=this.settings.pattern.split(d);void 0===this.settings.patternOptions.symbols.decimal&&(this.settings.patternOptions.symbols.decimal=P.currentLocale.data.numbers.decimal),this.settings.patternOptions.integerLimit=p[0].replace(/[^#0]/g,"").length,p[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=p[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=d))}}var f=this.element.getAttribute("data-must-complete")||!1;f&&(this.settings.mustComplete=f),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var m,b,C=this.settings.showSymbol;if(["currency","percent"].indexOf(C)>-1){m="currency"===(b=this.settings.showSymbol)?{char:P.currentLocale.data.currencySign,format:P.currentLocale.data.currencyFormat}:"percent"===b?{char:P.currentLocale.data.numbers.percentSign,format:P.currentLocale.data.numbers.percentFormat}:{};var T,S,M,L="currency"===C?"\xa4":m.char,z=new RegExp(L,"g").exec(m.format),V=-1;if(z&&z.length){if(0===(V=m.format.indexOf(z[0])))M="prefix",T=new RegExp("[^".concat(L,"]\\S"),"g"),S=m.format.replace(T,"");else if(V>0){for(M="suffix",T=new RegExp("\\S[^".concat(L,"]"),"g");/\s/.test(m.format.charAt(V-1));)--V;S=m.format.substr(V).replace(T,"")}"currency"===C&&(S=S.replace("\xa4",m.char)),this.settings.patternOptions[M]=S}}},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),"rangeNumber"===this.settings.process&&this.element.classList.remove("is-range-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(e){return this.each(function(){var t=$.data(this,"mask");t?t.updated(e):(t=$.data(this,"mask",new Gr(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}})},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var ws={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new Pa({containerOffsetX:10,containerOffsetY:"ios"===Ie.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1,attributes:null};function Oa(e,t){this.settings=_.mergeSettings(e,t,ws),this.element=$(e),this.init()}Oa.prototype={init:function(){this.isFirefox="firefox"===Ie.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return Ie.rtl},get isOpen(){return ue.hasClass(this.element[0],"is-open")},get isFocused(){var e=document.activeElement,t=this.element.is(e),n=this.menu&&this.menu.length&&this.menu[0].contains(e);return!(!t&&!n)},setup:function(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(e){if(e&&e.length){var t=e.parent();t.is("body")||(this.menuOrgContainment={parent:t,index:t.children().index(e)})}},insertAtContainment:function(e,t){var n=function(o){return o&&o.length};if(t=t||this.menuOrgContainment||{},n(e)&&n(t.parent)){var i=t.index,a=t.parent,s=a.children().length;i<0&&(i=Math.max(0,s+1+i)),i<s?a.children().eq(i).before(e):a.append(e)}},addMarkup:function(){var e,t,n;if(!this.menu||!this.menu.length)switch(Ge(this.settings.menu)){case"string":e=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),n=this.menu.data("trigger")[0].id,t=this.menu.clone(),this.setMenuOrgContainment(t),t.detach().appendTo("body"),t.attr("data-trigger",n),this.menu.attr("data-trigger",n));break;case"object":this.menu=null===this.settings.menu?this.element.next(".popupmenu, .popupmenu-wrapper"):$(this.settings.menu),(e=this.menu.attr("id"))&&""!==e||(this.menu.attr("id","popupmenu-".concat(this.id)),e=this.menu.attr("id")),n=this.element.attr("id")}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attributes&&(_.addAttributes(this.element,this,this.settings.attributes,"trigger"),_.addAttributes(this.menu,this,this.settings.attributes,"menu"));var i=this.menu.parent().not(".popupmenu-wrapper, body");this.settings.attachToBody&&i.length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu").attr("aria-labelledby",n),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each(function(){$(this).data("icon")||$(this).icon()}),0===this.wrapper.parents().filter(function(){var m=this?this.style.overflow:null;return"auto"!==m&&"visible"!==m&&"scroll"!==m}).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each(function(m,b){var C=$(b);C.parent().hasClass("wrapper")||C.wrap('<div class="wrapper"></div>')});var a=!1,s=this.element.parent().attr("class");if(!0===this.settings.showArrow)a=!1;else if(null===this.settings.showArrow){var o=this.element.closest(".toolbar"),c=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||o.length>0&&!o.is(".formatter-toolbar")||c.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||s&&s.indexOf("more")>=0||s&&s.indexOf("btn-group")>=0)&&(a=!0)}if(a){var d=$('<div class="arrow"></div>'),p=this.menu.parent(".popupmenu-wrapper");0===p.find(".arrow").length&&p.addClass("bottom").append(d)}var f=this.element.closest(".field-short").length>0;this.menu[f?"addClass":"removeClass"]("popupmenu-short"),void 0!==s&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",e),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem&&this.element.width(parseInt(this.getMaxMenuWidth(),10))}},renderItem:function(e){if(void 0===e)return"";var t=this;function n(z){var V="";return z.forEach(function(N){V+=t.renderItem(N)}),V}if(Array.isArray(e)){var i=n(e),a='<ul class="popupmenu">'.concat(i,"</ul>");return at.stripWhitespace(a)}var s="",o="";if(void 0!==e.separator)return e.heading&&(s+='<li class="heading">'.concat(e.heading,"</li>")),"single"===e.nextSectionSelect?o=" single-selectable-section":"multiple"===e.nextSectionSelect&&(o=" multi-selectable-section"),at.stripWhitespace('\n        <li class="separator'.concat(o,'"></li>\n        ').concat(s,"\n      "));if(e.menu){var c="";e.menuId&&(c=' id="'.concat(e.menuId,'"'));var d="";e.hasIcons&&(d+=" has-icons");var p="";return Array.isArray(e.menu)&&(p=n(e.menu)),e.noMenuWrap?p:at.stripWhitespace("\n        <ul".concat(c,' class="popupmenu').concat(d,'">\n          ').concat(p,"\n        </ul>\n      "))}var f="",m="",b="",C="",T="",S="",M="",L="";return e.disabled&&(f+=" is-disabled"),!1===e.visible&&(m+=" hidden"),e.id&&(C=' id="'.concat(e.id,'"')),"single"===e.selectable&&(T+=" is-selectable"),"multiple"===e.selectable&&(T+=" is-multiselectable"),e.icon&&(b='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(e.icon,'"></use>\n      </svg>')),Array.isArray(e.submenu)&&(S+=" submenu",M+=this.renderItem(e.submenu),L+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),at.stripWhitespace('<li class="popupmenu-item'.concat(f).concat(m).concat(T).concat(S,'">\n      <a').concat(C,' href="#">').concat(b,"<span>").concat(e.text,"</span>\n        ").concat(L,"\n      </a>\n      ").concat(M,"\n    </li>"))},toData:function(e){var t={},n=[],i=this;(e=e||{}).contextElement||(e.contextElement=this.menu),e.contextElement instanceof HTMLElement&&(e.contextElement=$(e.contextElement)),e.contextElement.is(".popupmenu-wrapper")&&(e.contextElement=e.contextElement.children("ul"));var a=e.contextElement.attr("id");a&&a.length&&(t.menuId="".concat(a));var s,o,c=e.contextElement.hasClass("has-icons");return t.hasIcons=c,e.contextElement.children("li").each(function(d,p){var f=function m(b){var C=$(b),T={};if(!C.hasClass("heading")){if(C.hasClass("separator")){T.separator=!0,C.hasClass("single-selectable-section")&&(s=!0,T.nextSectionSelect="single"),C.hasClass("multi-selectable-section")&&(o=!0,T.nextSectionSelect="multiple");var S=C.next();return S.hasClass("heading")&&(T.heading=S.text().trim()),T}var M=C.children("a"),L=M.children(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),z=M.attr("id");T.text=M.text().trim(),T.disabled=C.hasClass("is-disabled"),T.visible=!C.hasClass("hidden"),"string"==typeof z&&z.length&&(T.id=z),L.length&&L[0]instanceof SVGElement&&(T.icon=L[0].querySelector("use").getAttribute("href").replace("#icon-",""));var V=!s&&!o,N=!i.hasSelectableSeparator(C);T.selectable&&V&&N&&("single"===T.selectable?s=!0:"multiple"===T.selectable&&(o=!0),t.selectable=T.selectable);var U=C.find(".popupmenu");return U.length&&(T.submenu=[],U.first().children().each(function(G,Z){var oe=m(Z);oe&&T.submenu.push(oe)})),T}}(p);f&&n.push(f)}),e.noMenuWrap?t=n:t.menu=n,t},markupItems:function(e){var t=this,n=this;e?e instanceof HTMLElement&&(e=$(e)):e=this.menu;var i=e.find("li:not(.heading):not(.separator)"),a=!1;function s(o){var c=$(o),d=c.parents("li"),p=[];return c.add(d).each(function(f,m){p.push($(m).parent().children("li:not(.heading):not(.separator)").index(m))}),p.join("-")}e[0].setAttribute("role","menu"),e[0].setAttribute("aria-labelledby",this.element.attr("id")),i.each(function(o,c){var d=$(c).children("a")[0],p=$(d),f=$(c),m=p.children("span")[0],b=f.children("ul")[0],C=f.find(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),T=f.children(".wrapper")[0];if(c.setAttribute("role","none"),d){if(d.setAttribute("role",n.settings.ariaListbox?"option":"menuitem"),d.setAttribute("tabindex","-1"),n.settings.attributes){var S=t.element.parents(".flex-toolbar")?"option-".concat(s(c),"-menu-item"):"option-".concat(s(c));_.addAttributes(p,n,n.settings.attributes,S)}if(f.hasClass("is-disabled")||"true"===d.getAttribute("disabled")||"disabled"===d.getAttribute("disabled")?(f.addClass("is-disabled"),d.setAttribute("aria-disabled","true"),d.setAttribute("disabled",!0)):(f.removeClass("is-disabled"),p.removeAttr("aria-disabled"),d.removeAttribute("disabled")),b instanceof HTMLElement&&b.classList.add("popupmenu"),T instanceof HTMLElement&&(c.className+="".concat(ue.hasAnyClass(c)?" ":"","submenu"),(b=$(T).children("ul")[0])instanceof HTMLElement&&b.classList.add("popupmenu"),n.element.parent(".datagrid-cell-wrapper").length>0&&$(c).children("div.wrapper").length>0&&($(c).addClass("has-selectable-submenu"),$(c).find(".popupmenu").children().addClass("is-selectable"))),ue.hasClass(c,"submenu")&&(m||(d.innerHTML="<span>".concat(d.innerHTML,"</span>"),m=p.children("span")[0]),0===p.find("svg.arrow").length&&p.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),d.setAttribute("aria-haspopup","true")),ue.hasClass(c,"is-checked")&&(d.setAttribute("role","menuitemcheckbox"),d.setAttribute("aria-checked",!0),!n.hasSelectableSeparator(c))){var M="is-selectable";n.menu.is(".is-multiselectable")&&(M="is-multiselectable"),n.getAdjacentSelectables(c).addClass(M)}ue.hasClass(c,"is-not-checked")&&(c.className=c.className.replace("is-not-checked",""),d.setAttribute("role","menuitemcheckbox"),d.removeAttribute("aria-checked"))}C&&C.length>0&&(a=!0)}),a?e.addClass("has-icons"):e.removeClass("has-icons")},refreshMenuItem:function(e,t,n){if(e&&e instanceof HTMLElement&&t&&$(this.menu)[0].contains(e)){var i,a=e.querySelector("a"),s=e.querySelector(".icon:not(.close):not(.icon-dropdown)");if(t.text&&a.innerText.trim()!==t.text&&(a.innerText="".concat(t.text)),!0===t.disabled?-1===e.className.indexOf("hidden")&&e.classList.add("is-disabled"):e.className.indexOf("is-disabled")>-1&&e.classList.remove("is-disabled"),!0===t.visible?e.className.indexOf("hidden")>-1&&e.classList.remove("hidden"):-1===e.className.indexOf("hidden")&&e.classList.add("visible"),t.icon?s&&((i=s.querySelector("use"))&&i.getAttribute("href").replace("#icon-","")!==t.icon&&s.remove(),i.setAttribute("href","#icon-".concat(t.icon))):s&&s.remove(),t.submenu){e.classList.add("submenu");var o=e.querySelector(".popupmenu");if(o)for(var c=o.children,d=0;d<t.submenu.length;d++)t.submenu[d].isSubmenuItem=!0,this.refreshMenuItem(c.item(d),t.submenu[d],n)}"function"==typeof n&&n.apply(this,[e,t])}},handleEvents:function(){var e=this,t="rightClick"!==this.settings.trigger;function n(a){return a.stopPropagation(),a.preventDefault(),!1}function i(a,s){e.keydownThenClick?delete e.keydownThenClick:a.button>(!0===s?0:2)||e.element.is(":disabled")||(["android","ios"].indexOf(Ie.os.name)>-1&&(e.holdingDownClick=!0),function(c){if(e.element.hasClass("is-disabled"))return c.stopPropagation(),void c.preventDefault();var d="rightClick"===e.settings.trigger;if(c.stopPropagation(),c.preventDefault(),d&&e.menu.hasClass("is-open"))return e.close(),void e.open(c);e.menu.add(e.element).hasClass("is-open")?e.close():e.open(c)}(a))}"immediate"!==this.settings.trigger&&(t&&this.element.off("click.popupmenu").on("click.popupmenu",function(a){i(a,!0)}),!t)&&(this.menu.parent().on("contextmenu.popupmenu",n),-1===["android","ios"].indexOf(Ie.os.name)?this.element.on("contextmenu.popupmenu",function(a){n(a),i(a)}):this.element.on("touchstart.popupmenu",function(a){"ios"===Ie.os.name&&"INPUT"!==a.target.tagName&&a.preventDefault(),$(a.target).addClass("longpress-target")}).on("touchend.popupmenu",function(a){$(a.target).removeClass("longpress-target")}).on("longpress.popupmenu",function(a,s){e.openedWithTouch=!0,i(s)})),this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",function(){return!1}),this.element.not(".autocomplete, ul").on("keydown.popupmenu",function(a){switch(a.which){case 13:case 32:"click"===e.settings.trigger&&(e.keydownThenClick=!0,e.open(a));break;case 121:a.shiftKey&&e.open(a)}}).on("updated.popupmenu",function(a,s){a.stopPropagation(),e.updated(s)})},handleKeys:function(){var e=this;this.menu.on("click.popupmenu","li",function(n){var i=$(this).find("a");e.handleItemClick(n,i)}),this.menu.on("click.btn-menu.".concat(this.id),function(n){n.target.closest(".switch")||n.preventDefault()});var t="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",function(){e.highlight($(this).children("a"))}),setTimeout(function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),function(n){var i=n.which;if(27===i)return n.stopPropagation(),n.stopImmediatePropagation(),e.close(!0),!1;if(9===i&&(n.stopPropagation(),e.close(!0)),32===i){n.stopPropagation();var a=$(n.target),s=a.find("input:checkbox");if(s.length)return s.trigger("click"),!0;var o=$();if(a.is(".tab")||a.parent().is(".tab")||a.is(".tab-more"))return n.preventDefault(),!0;if(a.is("li")&&(o=a.children("a")),a.is("a")&&(o=a),o.length)return o.trigger("click"),!0}var c=e.menu.find(":focus");c[0]||(c=$(e.menu[0].querySelector(".is-focused a")));var d,p,f,m,b="colorpicker-menu"===e.settings.menu,C=e.element.is(".autocomplete");37!==i||C||(n.stopPropagation(),n.preventDefault(),c.closest(".popupmenu")[0]!==e.menu[0]&&c.closest(".popupmenu").length>0&&(c.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),e.highlight(c.closest(".popupmenu").parent().prev("a")))),d=function(U){var G;return U.parent().prevAll(t).each(function(){if(!G){var Z=$(this),oe=Z.children("a");Z.is(".is-disabled")||!0===oe.prop("disabled")||(G=oe)}}),G||m(U)},m=function(U){var G=U.parent().prevAll(t).last(),Z=G.children("a");return G.is(".is-disabled")||!0===Z.prop("disabled")?p(Z):Z},p=function(U){var G;return U.parent().nextAll(t).each(function(){if(!G){var Z=$(this),oe=Z.children("a");Z.is(".is-disabled")||!0===oe.prop("disabled")||(G=oe)}}),G||m(U)},f=function(U){var G=U.parent().nextAll(t).last(),Z=G.children("a");return G.is(".is-disabled")||!0===Z.prop("disabled")?d(Z):Z};for(var T=0,S=e.menu.children(t),M=S.length,L=0,z=0;z<M;z++){var V=S[z];if(0===L&&(L=V.offsetTop),V.offsetTop!==L)break;T++}if(!b&&38===i||b&&i===(P.isRTL()?39:37)){if(n.stopPropagation(),n.preventDefault(),0===c.parent().prevAll(t).length)return void e.highlight(0===c.length?e.menu.children(t).last().find("a"):f(c));e.highlight(d(c))}if(b&&38===i&&(n.stopPropagation(),n.preventDefault(),c.parent().prevAll(t).length>0&&e.highlight($(c.parent().prevAll(t)[T-1]).find("a"))),39!==i||C||(n.stopPropagation(),n.preventDefault(),c.parent().hasClass("submenu")&&(e.openSubmenu(c.parent()),e.highlight(c.parent().find(".popupmenu a:first")))),!b&&40===i||b&&i===(P.isRTL()?37:39)&&!C){if(n.stopPropagation(),n.preventDefault(),0===c.parent().nextAll(t).length)return void e.highlight(0===c.length?e.menu.children(t).first().find("a"):m(c));e.highlight(p(c))}if(b&&40===i&&(n.stopPropagation(),n.preventDefault(),c.parent().nextAll(t).length>0&&e.highlight($(c.parent().nextAll(t)[T-1]).find("a"))),e.isFirefox&&C&&!/37|39|38|40/.test(i)){e.element.triggerHandler(n),e.element[0].focus();var N=e.element[0].value;e.element[0].value="",e.element[0].value=N}})},1)},handleItemClick:function(e,t){var n=t.attr("href"),i=[t];return!(!e&&!t||!t.length||(t.parent().is(".submenu, .hidden, .is-disabled")||t[0].disabled?(e.preventDefault(),1):t.find("input[checkbox]").length>0||(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(t),e.preventDefault()),this.isSelectable(t.parent())&&(i=this.select(t)),t.parent().hasClass("is-toggleable")&&t.parent().toggleClass("is-checked"),e&&this.settings.triggerSelect&&(1===i.length&&i.push(void 0),i.push(!0),this.element.triggerHandler("selected",i)),!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(t)&&(this.close(),!this.element.is(".autocomplete")&&(n&&"#"!==n.charAt(0)?("_blank"===t.attr("target")?window.open(n,"_blank"):window.location.href=n,0):(e&&(e.preventDefault(),e.stopPropagation()),0))))))},iconFilteringSetup:function(e){if(this.element.hasClass("btn-filter")){var t=this.element.find("svg.icon-dropdown"),n=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=n.find("span").text();1===t.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),t.first().changeIcon(n.find("svg").getIconName()),this.element.find(".audible").text(i)}},iconFilteringUpdate:function(e){if(this.element.hasClass("btn-filter")){var t=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=t.find("span").text();this.element.find(".audible").text(n),this.element.find("svg:not(.ripple-effect):first").changeIcon(t.find("svg").getIconName())}},getPositionFromEvent:function(e){var t=0,n=0;if(e||(e=window.event),!e)return{};if(e.changedTouches){var i=e.changedTouches[0];t=i.pageX,n=i.pageY}else e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:t,y:n}},position:function(e){var t=this,n=this.element,i=this.isRTL(),a=this.menu.parent(".popupmenu-wrapper"),s=this.getPositionFromEvent(e),o=this.menu[0].offsetWidth;if(a.length){var c=this.element[0].offsetWidth;"click"===this.settings.trigger&&c>o&&this.menu.width(c),n.is("svg, .icon")&&n.closest(".tab").length&&(n=n.closest(".tab")),a.find(".arrow").removeAttr("style");var d=$.extend({},this.settings.placementOpts),p=["flip"];p.push("shrink-y"),d.strategies=p,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(d.x=M(0,"x")-(i?o:0)+(i?-1:1)*this.settings.offset.x,d.y=M(0,"y")+this.settings.offset.y,0===d.x&&0===d.y&&(d.x=this.settings.offset.x||0,d.y=this.settings.offset.y||0,d.parent=this.element,d.placement="bottom",d.parentXAlignment=i?"right":"left")):(d.x=this.settings.offset.x||0,d.y=this.settings.offset.y||0,d.parent=this.element,d.placement="bottom",d.strategies.push("nudge"));var f=n.parents(".toolbar"),m=f.length>0,b=n.parents(".title").length>0,C=m&&f.children(".buttonset, .title").length>1,T=n.parents(".pager-pagesize").length>0;f.parents(".header").length>0&&(d.y+=5),n.is(".btn-menu")?T?z():m&&C?b?L():z():L():n.is(".btn-actions")||n.is(".tab-more")?z():n.is(".btn-split-menu, .tab, .searchfield-category-button")&&!n.parent(".pager-pagesize").length&&L(),n.parents(".masthead").length>0&&(d.y+=15);var S=this.element.parents(".page-container:not(.tab-container)");S.length&&(d.container=S.first()),a.one("afterplace.popupmenu",function(V,N){t.handleAfterPlace(V,N)}),this.wrapperPlace=new jr(a,d),this.wrapperPlace.place(d)}function M(V,N){return s[N="x"===N||"y"===N?N:"x"]}function L(){d.parentXAlignment=i?"right":"left"}function z(){d.parentXAlignment=i?"left":"right"}},handleAfterPlace:function(e,t){var n=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(e,t,n),t.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),t.height&&(n[0].style.height="",this.menu[0].style.height=t.height+(/(px|%)/i.test("".concat(t.height))?"":"px")),t.width&&(n[0].style.width="",this.menu[0].style.width=t.width+(/(px|%)/i.test("".concat(t.width))?"":"px")),n.triggerHandler("popupmenuafterplace",[t]),t},callSource:function(e,t,n,i){if("function"==typeof this.settings.beforeOpen){var a=this,s=this.menu;if(!(ue.isElement(n)&&$(n).is(".popupmenu, .submenu")&&(s=$(n),n.hasClass("is-open")))){var o=function(d){if(s.children().filter(function(m,b){return-1===a.predefinedItems.index(b)}).off().remove(),!1===d)return!1;var p=$(d);s.append(p);var f=s.parent(".wrapper, .popupmenu-wrapper");return f.length||(f=s.wrap('<div class="wrapper">').parent()),f.removeAttr("style"),a.markupItems(s),t&&(s.is(a.menu)?a.open(e,!0):a.openSubmenu(f.parent("li"),!0)),!0},c={};s.is(this.menu)||(c.contextElement=s),c.element=this.element,c.isSubmenu=i,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(o,c):window[this.settings.beforeOpen](o,c)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var e=!this.isOpen;e&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var t=this.menu.width();return e&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),t},open:function(e,t,n){var i=this;if(this.menu&&this.menu.length&&(this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu,this]))&&(t||(this.callSource(e,!0),!this.settings.beforeOpen)))if(n||"ios"!==Ie.os.name){$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).not(this.menu).each(function(){var m=$(this).data("trigger");if(m&&m.length){var b=$(this).data("trigger").data("popupmenu");b&&"function"==typeof b.close&&b.close()}});var a=this.element.data("tooltip");a&&a.visible&&a.hide();var s=$(".dropdown.is-open");if(s.length>0){var o=s.parent().prev().data("dropdown");o&&o.closeList("cancel")}var c=document.querySelector(".application-menu.is-open");c instanceof HTMLElement&&!c.contains(this.element[0])&&!c.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(e),_.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each(function(){var m=$(this),b=m.parent();b.hasClass("is-disabled")?(b.addClass("is-disabled"),m.attr("aria-disabled","true"),m.attr("disabled","disabled")):(b.removeClass("is-disabled"),m.removeAttr("aria-disabled"),m.removeAttr("disabled"))}),setTimeout(function(){$(document).on("touchend.popupmenu.".concat(i.id," click.popupmenu.").concat(i.id),function(m){var b="colorpicker-menu"===i.settings.menu;2!==m.button&&(i.holdingDownClick?delete i.holdingDownClick:$(m.target).is(i.element)&&!b&&"rightClick"!==i.settings.trigger||(0===$(m.target).closest(".popupmenu").length&&i.close(!0,"rightClick"===i.settings.trigger),$(m.target).hasClass("swatch")&&setTimeout(function(){i.close()},150)))}),void 0===window.orientation&&$("body").on("resize.popupmenu",function(){i.handleCloseEvent()}),$(window).on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".datagrid-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),i.element.triggerHandler("open",[i.menu])},300),$("iframe").each(function(){var m=$(this);m.ready(function(){try{m.contents().find("body").on("click.popupmenu",function(){i.close()})}catch{}})}),this.handleKeys();var d,p,f=0;i.menu.find(".popupmenu").removeClass("is-open"),i.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",function(m){if(!$(m.target).hasClass("popupmenu")){var b=$(this);d=m.pageX,clearTimeout(i.submenuOpenTimeout),i.submenuOpenTimeout=setTimeout(function(){i.openSubmenu(b)},300),$(document).on("mousemove.popupmenu.".concat(this.id),function(C){f=C.pageX})}}).on("mouseleave.popupmenu",".submenu",function(){$(document).off("mousemove.popupmenu.".concat(this.id));var m=((p=$(this).find("ul")).parent(".wrapper").length>0?parseInt(p.parent(".wrapper")[0].style.left,10):0)<0,b=f-d<3.5;m&&(b=f-d>=0),b&&(p.removeClass("is-open").removeAttr("style"),p.parent(".wrapper").removeAttr("style"),p.parent().parent().removeClass("is-submenu-open"),p=null),clearTimeout(i.submenuOpenTimeout)}),i.settings.autoFocus&&setTimeout(function(){var m=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",b=i.menu.children(m).find(".is-selected").children("a");b.length||(b=i.menu.children(m).first().children("a")),i.highlight(b),i.element.triggerHandler("afteropen",[i.menu])},1)}else setTimeout(function(){i.open(e,t,!0)},400)},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(e,t){if(!ue.hasClass(e,"is-disabled")&&!e[0].disabled){var n=e.children(".wrapper, .popupmenu");n.length&&n.is(".wrapper")&&(n=n.children(".popupmenu"));var i=this.element.triggerHandler("beforeopen",[n,this]);!1!==i&&(!t&&(i=this.callSource(null,!0,n,!0),this.settings.beforeOpen)||this.showSubmenu(e))}},showSubmenu:function(e){this.element.triggerHandler("show-submenu",[e]);var t=e.children(".wrapper").filter(":first"),n=this.isRTL();if(0===t.length){var i=e.children("ul").filter(":first");i.wrap('<div class="wrapper"></div>'),t=i.parent()}var a,s=t.children(".popupmenu"),o=e.position().left+e.outerWidth();e.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),t.children(".popupmenu").addClass("is-open"),a=t.outerWidth(),n&&(o=e.position().left-a),t[0].style.left="".concat(o,"px"),t[0].style.top="".concat(parseInt(e.position().top,10)-5,"px");var c=s.outerWidth();(t.offset().left+c>$(window).width()+$(document).scrollLeft()||n&&t.offset().left<0)&&(t[0].style.left="-9999px",c=s.outerWidth(),o=e.position().left-c,n&&(o=t.closest(".popupmenu").outerWidth()-4),t[0].style.left="".concat(o,"px"),(t.offset().left<0||n&&t.offset().left+c>$(window).width()+$(document).scrollLeft())&&(o=e.position().left-c+Math.abs(t.offset().left)+40,n&&(o=e.position().left-c-30),t[0].style.left="".concat(o,"px"),c=s.outerWidth()),(t.offset().left+c>$(window).width()+$(document).scrollLeft()||n&&t.offset().left<0)&&(c-=t.offset().left+c-($(window).width()+$(document).scrollLeft()),s[0].style.width="".concat(c,"px")));var d=s.outerHeight(),p=this.settings.placementOpts.containerOffsetY;if(t.offset().top+d>window.innerHeight-p+$(document).scrollTop()){var f=t.offset().top+d-(window.innerHeight+$(document).scrollTop());if(t[0].style.top="".concat(t.position().top-f-p,"px"),t.offset().top+d>window.innerHeight+$(document).scrollTop()){var m=e.parents(".popupmenu-wrapper:first").offset().top;t[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-d-m,"px")}t.offset().top-$(document).scrollTop()<0&&(t[0].style.top=0,t[0].style.top="".concat(-1*t.offset().top,"px"),d=s.outerHeight()),t.offset().top+d>window.innerHeight+$(document).scrollTop()&&(d=d-(t.offset().top+d-(window.innerHeight+$(document).scrollTop()))-32,s[0].style.height="".concat(d,"px"))}e.parent().find(".is-submenu-open").removeClass("is-submenu-open"),e.addClass("is-submenu-open")},highlight:function(e){if(e&&e.length){var t=e.parent();t.parent().children("li").removeClass("is-focused"),t.addClass("is-focused"),e&&e.focus(),t.closest(".header").scrollTop(0)}},select:function(e){var t=this.menu.is(".is-selectable"),n=this.menu.is(".is-multiselectable"),i=this.isInSingleSelectSection(e),a=this.isInMultiselectSection(e),s=e.parent(),o=[e];return s.hasClass("is-selectable")&&!e.find(".icon").length||t||i?(s.prevUntil(".heading, .separator").add(s.nextUntil(".heading, .separator")).removeClass("is-checked"),s.addClass("is-checked"),o.push("selected"),o):s.hasClass("is-multiselectable")||n||a?s.hasClass("is-checked")?(s.removeClass("is-checked"),o.push("deselected"),o):(s.addClass("is-checked"),o.push("selected"),o):o},getSelected:function(){return this.element.is(".popupmenu")&&this.element.is(".is-selectable, .is-multiselectable")?this.element.children(".is-checked").children("a"):this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(e){return $(e).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(e)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(e){return $(e).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(e){var t=this.getSelectableSeparator(e);return t&&t.length},getAdjacentSelectables:function(e){var t=this.getSelectableSeparator(e),n=":not(.heading):not(.separator):not(.submenu)";return t&&t.length?$(t).nextUntil(".separator").filter(n):$(e).parent().children("li".concat(n))},isInSelectableSection:function(e){ei("hasSelectableSeparator()","isInSelectableSection()");var t=e.parent().prevAll().filter(".separator").first();return t.hasClass("multi-selectable-section")||t.hasClass("single-selectable-section")},isInSingleSelectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){var e=this;$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu dragstart.popupmenu"),setTimeout(function(){e.menu&&e.menu.length&&e.menu.off("click.btn-menu.".concat(e.id))},1),$("iframe").each(function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch{}})},close:function(e,t){if(e&&void 0!==e||(e=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var n=this.menu.parent(".popupmenu-wrapper"),i=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),n[0]&&(n[0].style.left="-999px",n[0].style.height="",n[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),i[0]&&(i[0].style.left="",i[0].style.top="",i[0].style.height="",i[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[e]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch;var a=!1;if(this.element.is(".colorpicker-editor-button")){var s=this.element.data("toolbaritem")||this.element.data("toolbarflexitem"),o=s?s.toolbarAPI:null;o&&o.overflowedItems.forEach(function(c){"colorpicker"===c.type&&(a=!0)})}t||!this.settings.returnFocus||Ie.features.touch||a||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){var e;if(!this.menu||!this.menu.length||!this.menu.parent())return this;var t=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var n=null===(e=this.menu[0])||void 0===e||null==e?void 0:e.id,i=$('[aria-controls="'.concat(n,'"]')).not(this.element);if(!i.length){var a=this.menu.parent();a.find(".arrow").remove(),a.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&a.removeClass("bottom"),this.preExistingWrapper||!this.menu.parent().is(".popupmenu-wrapper")||i.length||this.menu.unwrap();var s=this.element.parent().children(".searchfield");s.length?this.menu.insertAfter(s.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each(function(o,c){var d=$(c).find("span").text()||$(c).text();$(c).find("span, svg").remove(),$(c).text(d)}),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each(function(){var o;(o=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&o.unwrap()}),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),t.off().remove()}return this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(e){return this.settings=_.mergeSettings(this.element[0],e,this.settings),this.teardown().init()},destroy:function(){var e;this.menu&&(this.close(),this.teardown(),null===(e=this.menu)||void 0===e||null==e||e.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(e){return this.each(function(){var t=$.data(this,"popupmenu");t?t.updated(e):t=$.data(this,"popupmenu",new Oa(this,e))})};var Ba={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function li(e,t){this.settings=_.mergeSettings(e,t,Ba),this.element=$(e),this.init()}li.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==e?e.toString():this.settings.appName;var t=this.element.attr("data-about-content");this.settings.content=void 0!==t?t.toString():this.settings.content;var n=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==n?n.toString():this.settings.copyrightYear;var i=this.element.attr("data-device-specs");i&&(this.settings.deviceSpecs="true"===i);var a=this.element.attr("data-product-name");this.settings.productName=void 0!==a?a.toString():this.settings.productName;var s=this.element.attr("data-use-default");void 0!==s&&(this.settings.useDefaultCopyright="true"===s);var o=this.element.attr("data-version");return this.settings.version=void 0!==o?o.toString():this.settings.version,this.defaultCopyright="".concat(P.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var e=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon btn-close hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(P.translate("Close"),"'</span>"))).appendTo(e),$.createIconElement({icon:"logo",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(e),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var t=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var n=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(n).appendTo(t)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(t),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(t),this.settings.deviceSpecs){var i="fr-FR"===P.currentLocale.name||"fr-CA"===P.currentLocale.name?" :":":",a=this.getDeviceSpecs(),s='<span class="ds">'.concat(P.translate("OperatingSystem")).concat(i,"  ").concat(Ie.devicespecs.os.replace(Ie.devicespecs.currentOSVersion,"")," ").concat(Ie.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(P.translate("Platform")).concat(i," ").concat(a.os,'</span><br>\n        <span class="ds">').concat(P.translate("Mobile")).concat(i," ").concat(Ie.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(P.translate("Locale")).concat(i," ").concat(P.currentLocale.name,'</span><br>\n        <span class="locale">').concat(P.translate("Language")).concat(i," ").concat(P.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(P.translate("Browser")).concat(i," ".concat(Ie.devicespecs.browserVersionName)," ").concat(Ie.devicespecs.currentBrowser," (").concat(Ie.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(P.translate("BrowserLanguage")).concat(i," ").concat(a.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(P.translate("CookiesEnabled")).concat(i," ").concat(a.cookiesEnabled,'</span><br>\n        <span class="version">').concat(P.translate("Version")).concat(i," ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p".concat(P.isRTL()?' dir="rtl"':"","></p>")).html(s).appendTo(t)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",function(){$(this).removeClass("hide-focus")}),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click",attributes:this.settings.attributes}),this.modal.data("modal").aboutAPI=this,this},getDeviceSpecs:function(){var e,t,n,i="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(e=navigator.userAgent,t=[],n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE '".concat(t[1])):"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:i}},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this},close:function(){if(this.isBody)this.destroy();else{this.element.trigger("close.about");var e=this.modal.data("modal");e&&e.close(),this.element.trigger("afterclose.about")}},destroy:function(e){if(this.buttons.off(),this.element.off("open.about"),!0!==e){var t=this.modal.data("modal");t&&(t.element.off("beforeopen.about"),t.aboutAPI=null,t.destroy())}this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function(){var e=this;return this.element.on("open.about",function(t){t.stopPropagation(),e.element.trigger("click")}),this.buttons.filter('[name="done"], [name="close"]').on("click.about",function(){e.close()}),this.element.trigger("beforeopen.about"),this.modal.data("modal").element.on("beforeopen.about",function(){e.modal.find(".modal-body").scrollTop(0)}),this}},$.fn.about=function(e){return this.each(function(){var t=$.data(this,"about");t?t.updated(e):t=$.data(this,"about",new li(this,e))})};var Ea={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(e){var t=$.fn.transitionEndName();return e=_.mergeSettings(void 0,e,Ea),this.each(function(){var n,i=this,a=$(this),s="horizontal"===e.direction?"width":"height",o=s.charAt(0).toUpperCase()+s.slice(1),c=isNaN(e.distance)?"auto":"".concat(parseInt(e.distance,10),"px");function d(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(t,".animateopen")),i.style.transition="",i.style[s]=c,a.trigger("animateopencomplete")}a.one("animateopenstart.animation",function(m){m.stopPropagation(),a.off("".concat(t,".animateopen"))}),a.trigger("animateopenstart"),t&&a.one("".concat(t,".animateopen"),d),a.data("is-animating",!0);var p=this.style[s];this.style[s]=c;var f=getComputedStyle(this)[s];this.style[s]=p,"offset".concat(o),this.style.transition="".concat(s," ").concat(e.timing,"ms ").concat(e.transition),n=setTimeout(d,e.timing),this.style[s]=f,(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&d()})};var Yi={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(e){var t=$.fn.transitionEndName();return e=_.mergeSettings(void 0,e,Yi),this.each(function(){var n,i=this,a=$(this),s="horizontal"===e.direction?"width":"height",o=s.charAt(0).toUpperCase()+s.slice(1);function c(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(t,".animatedclosed")),i.style.transition="",i.style[s]="0px",a.trigger("animateclosedcomplete")}a.one("animateclosedstart",function(d){d.stopPropagation(),a.off("".concat(t,".animatedclosed"))}),a.trigger("animateclosedstart"),t&&a.one("".concat(t,".animatedclosed"),c),a.data("is-animating",!0),this.style[s]=getComputedStyle(this)[s],"offset".concat(o),this.style.transition="".concat(s," ").concat(e.timing,"ms ").concat(e.transition),n=setTimeout(c,e.timing),this.style[s]="0px",(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&c()})},$.fn.isAnimating=function(){return this.each(function(){return!0===$(this).data("is-animating")})};var Za=["classic","plus-minus","chevron"],cl={allowOnePane:!0,expanderDisplay:Za[0],enableTooltips:!0,rerouteOnLinkClick:!0,notificationBadge:!1,source:null};function dl(e){return void 0!==e.displayChevron&&(ei("expanderDisplay setting","displayChevron setting"),e.expanderDisplay=!1===e.displayChevron?Za[1]:Za[0],delete e.displayChevron),e}function Io(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,cl),this.settings=dl(this.settings),this.init()}Io.prototype={init:function(e){this.build(e).handleEvents(e).setupTooltips()},build:function(e,t){var n,i,a,s=this,o=this,c=!0;e&&e instanceof jQuery?(n=e.children("a"),a=(i=e.next(".accordion-pane")).children(".accordion-content"),c=!1,this.headers=this.headers.add(e),this.anchors=this.anchors.add(n),this.panes=this.panes.add(i),this.contentAreas=this.contentAreas.add(a)):(this.headers=this.element.find(".accordion-header"),e=this.element.find(".accordion-header"),this.anchors=e.children("a"),n=this.anchors,this.panes=e.next(".accordion-pane"),this.contentAreas=(i=this.panes).children(".accordion-content"),a=this.contentAreas);var d=$(".accordion-content").find("textarea");d&&d.parents(".accordion-pane").attr("style","display: block");var p=!1;if(e.each(function(){var m=$(this),b=!1,C=m.parent(),T=C.is(".accordion");function S(){T||(b?C.addClass("has-icons"):m.addClass("no-icon"))}m.hideFocus(),m.children("a").find("svg").detach().insertBefore(m.children("a"));var M=m.children(".icon, svg");if(M.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),T&&M.length&&(p=!0),(m.is(".list-item")||!T&&m.find("button").length||!T&&m.find("svg").length)&&(b=!0),m.hasClass("is-disabled")&&m.children("a, button").attr("tabindex","-1"),m.next(".accordion-pane").length){b=!0;var L=m.children(".btn");if(!L.length){L=$('<button class="btn" type="button"></button>');var z="insertBefore";"plus-minus"!==o.settings.expanderDisplay&&T&&(m.addClass("has-chevron"),z="insertAfter"),L[z](m.children("a")),m.data("addedExpander",L)}L.hideFocus(),M.length&&"plus-minus"===o.settings.expanderDisplay&&M.appendTo(L);var V=L.children(".icon, .svg, .plus-minus");if(!V.length){if("classic"===o.settings.expanderDisplay&&T||"chevron"===o.settings.expanderDisplay)V=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var N=o.isExpanded(m)?" active":"";V=$('<span class="icon plus-minus'.concat(N,'" aria-hidden="true" role="presentation"></span>'))}V.appendTo(L)}var U={role:"presentation","aria-hidden":"true"};V.is("span")||(U.focusable="false"),V.attr(U),V.is(".chevron")&&T?(m.addClass("has-chevron"),L.insertAfter(m.children("a"))):(m.removeClass("has-chevron"),L.insertBefore(m.children("a"))),"plus-minus"===o.settings.expanderDisplay&&T&&(p=!0),S()}else S()}),p&&this.element.addClass("has-icons"),c&&!this.element.data("updating")){var f=e.filter(".is-selected, .is-expanded");f.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(f=f.first(),this.expand(f)):f.each(function(m){s.expand($(f[m]))}),this.select(f.last()),f.next(".accordion-pane").removeClass("no-transition")}return i.each(function(){var m=$(this),b=m.prev(".accordion-header");b.children("a").attr({"aria-haspopup":"true",role:"button"});var C=m.children(),T=!0;if(C.each(function(M,L){$(L).is(".accordion-header, .accordion-content")&&!$(L).hasClass("filtered")&&(T=!1)}),m[T?"addClass":"removeClass"]("all-children-filtered"),T&&(m.data("ignore-animation-once",!0),o.collapse(b,!1)),!t){var S="0px";o.isExpanded(b)&&(S="auto"),m.attr("style","height: ".concat(S))}}),t||(this.currentlyFiltered=$()),this.createNotificationBadge(),this},createNotificationBadge:function(){this.settings.notificationBadge&&this.element.find(".accordion-header").each(function(e,t){var n=$(t);if(n.children(".notification-badge-container").length<1){var i=n.data();n.notificationbadge({position:i.options.position,color:i.options.color});var a=n.find(".icon"),s=n.find(".notification-badge-container");s.prepend(a),n.prepend(s)}})},handleHeaderClick:function(e,t){if(!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||t.data("is-animating"))e.preventDefault();else{if(!$(e.target).is('[class^="btn"]')){var n=t.children("a");return this.handleAnchorClick(e,n)}e.preventDefault()}},handleAnchorClick:function(e,t){var n,i=this,a=t.parent(".accordion-header"),s=a.next(".accordion-pane"),o=t.attr("ng-reflect-href");return e&&!o&&e.preventDefault(),!(!a.length||this.isDisabled(a)||this.isFiltered(a))&&(!1!==this.element.triggerHandler("beforeselect",[t])?(this.originalSelection=t,this.select(t),this.closePopups(e),!(n=t.attr("href"))||""===n||"#"===n||i.settings.rerouteOnLinkClick&&(window.location.href=n,0)?s.length?(i.toggle(a),i.focusOriginalType(a),!0):(this.isControllingDetails?s.length||i.element.trigger("drilldown",[a[0]]):(i.orignalSelection=t,i.focusOriginalType(a)),this.element.trigger("selected",a),!0):(this.element.trigger("followlink",[t]),!0)):void 0)},closePopups:function(e){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each(function(){return $(this).data("popupmenu").close(),void 0!==e&&(e.stopPropagation(),e.stopImmediatePropagation()),!1})},handleExpanderClick:function(e,t){var n=t.parent(".accordion-header");if(n.length&&!this.isDisabled(n)&&!this.isFiltered(n)&&!n.data("is-animating"))return this.originalSelection=t,e&&e.stopPropagation(),this.closePopups(),n.next(".accordion-pane").length?(this.toggle(n),this.select(n),void this.focusOriginalType(n)):this.handleAnchorClick(e,n.children("a"))},handleKeys:function(e){var t=this,n=e.which,i=$(e.target),a=i.parent(),s=a.children('[class^="btn"]').first(),o=a.children("a"),c=document.querySelectorAll(".accordion-pane");function d(f){f||(f=i),t.originalSelection||(t.originalSelection=f)}if(9===n){this.headers.removeClass("is-selected");var p=Un(c).filter(function(f){return!f.classList.contains("is-expanded")});Un(c).filter(function(f){return f.classList.contains("is-expanded")}).forEach(function(f){Un(f.children).forEach(function(m){$(m).hasClass("is-disabled")||($(m).find("a").removeAttr("tabindex"),$(m).find("button").removeAttr("tabindex"))})}),p.forEach(function(f){Un(f.children).forEach(function(m){$(m).find("a").attr("tabindex","-1"),$(m).find("button").attr("tabindex","-1")})}),i.is("a")&&s.length?d(s):d(o)}return 32===n?(e.preventDefault(),i.is('[class^="btn"]')&&(e.stopPropagation(),e.stopImmediatePropagation(),$("html").hasClass("is-firefox"))?void 0:s.length?(d(s),this.handleExpanderClick(null,i)):(d(o),this.handleAnchorClick(null,i))):37===n||38===n?(e.preventDefault(),d(),e.shiftKey?this.ascend(a):this.prevHeader(a)):39===n||40===n?(e.preventDefault(),d(),e.shiftKey?this.descend(a):this.nextHeader(a)):void 0},toData:function(e,t){var n=[];return this.element.children(".accordion-header").each(function(i,a){!function s(o,c,d,p){var f=$(o),m=$(o).next(".accordion-pane"),b=o.classList.contains("accordion-content"),C={index:"".concat(void 0!==d?"".concat(d,"."):"").concat(c),type:b?"content":"header"};t&&(C.element=o),o.getAttribute("id")&&(C.id=o.getAttribute("id")),b?(C.content="".concat(f.html()),C.contentText="".concat(f.text().trim().replace(/\n|\s{2,}/g," "))):C.text=f.children("a, span").text().trim();var T=f.children(".icon");if(T.length&&(C.icon="svg"===T[0].tagName.toLowerCase()?T[0].getElementsByTagName("use")[0].getAttribute("href"):""),f.hasClass("is-disabled")&&(C.disabled=!0),m.length){var S=m.children(".accordion-header, .accordion-content"),M=[];if(S.length){var L=M;e&&(L=p),S.each(function(z,V){s(V,z,C.index,L)}),C.children=M}}p.push(C)}(a,i,void 0,n)}),n},select:function(e){if(e&&e.length){var t=e,n=t.parent();e.is(".accordion-header")&&(t=(n=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),!this.isDisabled(n)&&!this.isFiltered(n)&&(this.headers.removeClass("child-selected").removeClass("is-selected"),n.addClass("is-selected"),n.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected"))}},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(e){return!!this.element.hasClass("is-disabled")||!!e&&e.hasClass("is-disabled")},isFiltered:function(e){if(!e||!e.length)return!1;var t=e[0].classList;return t.contains("filtered")&&!t.contains("has-filtered-children")},isExpanded:function(e){if(e&&e instanceof Element&&(e=$(e)),e&&e.length)return"true"===e.children("a").attr("aria-expanded")||e.hasClass("is-expanded")},toggle:function(e){var t=this;!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||this.isAnimating||(this.isAnimating=!0,setTimeout(function(){t.isAnimating=!1},500),this.isExpanded(e)?this.collapse(e):this.expand(e))},expand:function(e,t){if("string"==typeof e&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var n=this,i=e.next(".accordion-pane"),a=e.children("a"),s=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[a])?s.reject():(this.callSource(a,o)||o.apply(this),s)}function o(){if(!(i=e.next(".accordion-pane"))||!i.length)return s.reject();var c=e.children(".btn");c.length&&(c.children(".plus-minus, .chevron").addClass("active"),c.children(".audible").text(P.translate("Collapse")));var d=e.parentsUntil(n.element).filter(".accordion-pane").prev(".accordion-header").add(e),p=[];n.settings.allowOnePane&&!t&&n.headers&&n.headers.not(d).each(function(){var b=$(this);n.isExpanded(b)&&p.push(n.collapse(b))});var f=[];function m(b){var C;b&&b.stopPropagation(),(C=$).when.apply(C,f.concat(p)).done(function(){s.resolve()}),i.triggerHandler("afterexpand",[a]),i.css("height","auto"),n.element.trigger("afterexpand",[a])}d&&d.not(e).each(function(){var b=$(this);n.isExpanded(b)||f.push(n.expand(b))}),e.add(i).addClass("is-expanded"),e.children("a").attr("aria-expanded","true"),n.element.trigger("expand",[a]),i.hasClass("no-transition")||this.element.hasClass("no-transition")?m():i.one("animateopencomplete",m).animateOpen()}},expandAll:function(){var e;if(!0!==this.settings.allowOnePane){var t=this,n=$.Deferred(),i=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)||i.push(t.expand(a))}),(e=$).when.apply(e,i).always(function(){n.resolve()}),n}},collapse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof e&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var n=this,i=e.next(".accordion-pane"),a=e.children("a"),s=$.Deferred(),o=this.element.triggerHandler("beforecollapse",[a]);if(!1===o)return s.reject();var c=e.children(".btn");return c.length&&(c.children(".plus-minus, .chevron").removeClass("active"),c.children(".audible").text(P.translate("Expand"))),t&&i.closeChildren(),n.element.trigger("collapse",[a]),i.hasClass("no-transition")||this.element.hasClass("no-transition")?d():i.one("animateclosedcomplete",d).animateClosed(),s}function d(p){p&&p.stopPropagation(),e.add(i).removeClass("is-expanded"),a.attr("aria-expanded","false"),i.triggerHandler("aftercollapse",[a]),n.element.trigger("aftercollapse",[a]),s.resolve()}},collapseAll:function(){var e,t=this,n=$.Deferred(),i=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)&&i.push(t.collapse(a))}),(e=$).when.apply(e,i).always(function(){n.resolve()}),n},callSource:function(e,t){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var n=this,i=e.parent(),a=i.next(".accordion-pane");return this.settings.source({anchor:e,header:i,pane:a},function(o,c){!0!==o&&n.updated(c),setTimeout(function(){t.apply(n)},1)})},getElements:function(e){var t,n,i,a,s=$(e);return s.is(".accordion-header")&&(t=s,i=s.children('[class^="btn"]'),n=s.children("a")),s.is(".btn")&&(n=(t=(i=s).parent()).children("a")),s.is("a")&&(i=(t=(n=s).parent()).children(".btn")),a=t.next(".accordion-pane"),{header:t,expander:i,anchor:n,pane:a}},prevHeader:function(e,t){var n=this.getElements(e),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get($e.ensureAlphaNumeric(a)-1));if(!i.length||0===a){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);s=i.last()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":first-child"))return this.ascend(n.header);s=s.prev()}if(s.is(".accordion-pane")){var o=s.prev(".accordion-header");if(this.isExpanded(o)&&o.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(o,-1);if(!(s=o).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);for(s=i.last();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.prev()}}this.focusOriginalType(s)},nextHeader:function(e,t){var n=this.getElements(e),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get($e.ensureAlphaNumeric(a)+1));if(!i.length||a===i.length-1){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);s=i.first()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":last-child"))return this.ascend(n.header);s=s.next()}if(s.is(".accordion-pane")){var o=s.prev(".accordion-header");if(this.isExpanded(o)&&o.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(o);if(!(s=$(i.get($e.ensureAlphaNumeric(a)+2))).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);for(s=i.first();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.next()}}this.focusOriginalType(s)},ascend:function(e,t){t||(t=0);var n=e.parent(".accordion-pane"),i=n.prev();if(-1===t&&!(i=n.next(".accordion-header")).length)return n.parent(".accordion").length?this.nextHeader(n.prev().children("a"),!0):this.ascend(n.prev(),-1);this.focusOriginalType(i)},descend:function(e,t){t||(t=0);var n=e.next(".accordion-pane"),i=n.children(".accordion-header").first();return-1===t&&(i=n.children(".accordion-header").last()),i.length?this.isExpanded(i)?this.descend(i,-1):void this.focusOriginalType(i):this.focusOriginalType(e)},focusOriginalType:function(e){var t=e.children('[class*="btn"]');this.headers.not(e).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&t.length?t.first()[0].focus():(e.children("a")[0].focus(),e.addClass("is-focused").removeClass("hide-focus"))},filter:function(e){var t,n=this;if(e){var i=this;null===(t=this.headers)||void 0===t||null==t||t.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var a=e.not(this.currentlyFiltered),s=[],o=$();this.headers.add(this.contentAreas).not(a).addClass("filtered"),a.each(function(p,f){var m=$(f).is(".accordion-content"),b=$(f).parents(".accordion-pane");m&&(o.push($(f)),$(b[0]).prev(".accordion-header").each(function(C,T){return s.indexOf(T)<0&&s.push(T),s})),b.length&&b.prev(".accordion-header").each(function(C,T){return s.indexOf(T)<0&&s.push(T),s})});var c=$(s);c.addClass("has-filtered-children");var d=this.expand(c,!0);$.when(d).done(function(){n.currentlyFiltered=a,i.build(void 0,!0)})}},unfilter:function(e,t){var n,i=this;if(this.currentlyFiltered.length||t){e&&e.length||(e=this.currentlyFiltered);var a=[];null===(n=this.headers)||void 0===n||null==n||n.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),e.each(function(c,d){var p=$(d).parents(".accordion-pane");p.length&&p.prev(".accordion-header").each(function(f,m){return a.indexOf(m)<0&&a.push(m),a})});var s=$(a);s.removeClass("has-filtered-children");var o=[this.collapse(e),this.collapse(s)];$.when(o).done(function(){i.currentlyFiltered=i.currentlyFiltered.not(e)})}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(e,t){this.element.data("updating",!0),t&&(this.settings=_.mergeSettings(this.element[0],t,this.settings),this.settings=dl(this.settings));var n=$(document.activeElement);return $.contains(this.element[0],n[0])||(n=void 0),e&&e instanceof jQuery?this.teardown(e).init(e):this.teardown().init(),n&&n.length&&n.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(e){var t=!1,n=e;return this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),e&&e instanceof jQuery||(n=this.headers,t=!0),n&&n.length&&(n.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each(function(){var i=$(this),a=i.children(".icon"),s=i.data("hidefocus");if(s&&s.destroy(),a.length){var o=a.data("icon");o&&o.destroy()}var c=i.data("addedExpander");c&&(c.remove(),$.removeData(this,"addedExpander"))}),n.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),n.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion")),t&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(e){var t=this,n=null,i=e,a=!1;function s(o,c){var p,f,d=(f="Header",(p=c).is("a")&&(f="Anchor"),p.is("button")&&(f="Expander"),f);return $("body").children().not(".application-menu, .modal-page-container, .page-container, .resize-app-menu-container").closeChildren(),t["handle".concat(d,"Click")](o,c)}return e&&e instanceof jQuery||(i=this.headers,a=!0),i.on("click.accordion",function(o){return s(o,$(this))}).on("focusin.accordion",function(o){var c=$(o.target);t.originalSelection||(t.originalSelection=c),i.not($(this)).removeClass("is-focused"),c.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")}).on("focusout.accordion",function(){$.contains(this,n)&&!$(this).is($(n))||$(this).removeClass("is-focused")}).on("keydown.accordion",function(o){t.handleKeys(o)}).on("mousedown.accordion",function(o){$(this).addClass("is-focused").removeClass("hide-focus"),n=o.target}).on("mouseup.accordion",function(){n=null}),i.children('[class^="btn"]').on("click.accordion",function(o){return s(o,$(this))}).on("keydown.accordion",function(o){t.handleKeys(o)}),a&&this.element.on("selected.accordion",function(o){o.stopPropagation()}).on("updated.accordion",function(o,c){o.stopPropagation(),t.updated(c)}),this.element.trigger("rendered"),this},hideTooltip:function(){var e=this,t=window;t.tooltip&&(this.removeTooltipData(t.tooltip),t.tooltip.classList.add("is-hidden"),t.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",function(){e.hideTooltip()})},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("spantooltip")&&$.removeData(e[0],"spantooltip")},setupTooltips:function(){if(this.settings.enableTooltips){var e,t=this,n=".accordion-header a span";this.element.off("mouseenter.spantooltip",n).on("mouseenter.spantooltip",n,function(){var i;(i=this).style.width="auto",i.offsetWidth>i.parentElement.offsetWidth-parseInt($(i).parent().css("padding-left"),10)&&(i.style.width="",e=setTimeout(function(){$(i).tooltip({trigger:"immediate",content:"".concat(i.innerText),extraClass:"tooltip-accordion-style"})},400))}).off("mouseleave.spantooltip click.spantooltip",n).on("mouseleave.spantooltip click.spantooltip",n,function(){var i;(i=this).style.width="auto",i.offsetWidth>i.parentElement.offsetWidth-parseInt($(i).parent().css("padding-left"),10)&&(i.style.width="",t.hideTooltip(),clearTimeout(e))})}}},$.fn.accordion=function(e){return this.each(function(){var t=$.data(this,"accordion");t?t.updated(e):t=$.data(this,"accordion",new Io(this,e))})};var Mo={actions:[],attributes:[],autoFocus:!0,breakpoint:"phone-to-tablet",displayAsActionSheet:"responsive",overlayOpacity:.7,onSelect:null,onCancel:null,tray:!1,trayOpts:{text:null,icon:null,backgroundColor:"slate"},showCancelButton:!0};function Yr(e,t){return this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Mo),this.init()}function fr(e,t){return!(!(n=e)||n instanceof jQuery||null==e[t]);var n}function Lo(e,t){return!(!fr(n=e,i=t)||"function"!=typeof n[i]||(e[t](),0));var n,i}function Ki(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];return"string"==typeof t&&(t=[t]),$.each(e,function(s,o){$.each($(o).data(),function(c,d){n.length&&-1===n.indexOf(c)||t.forEach(function(p){(i&&Lo(d,p)||fr(d,p))&&a.push({elem:$(o),control:d})})})}),a}function gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e&&t){var i=(e=$(e)).find("*").add(e).not(n.join(", ")),a=Ki(i,t,void 0,!0);return e.trigger("sift-".concat(t,"-complete"),[a]),e}}Yr.prototype={init:function(){this.render(),this.handleEvents()},render:function(){var e=this,t=document.querySelector("#".concat("ids-actionsheet-root"));t||this.renderRootElems(),t&&void 0===this.rootElem&&(document.getElementById("ids-actionsheet-root").remove(),this.renderRootElems());var n=this.element[0];if(n.classList.add("ids-actionsheet-trigger"),_.addAttributes(this.element,this,this.settings.attributes,"trigger"),("BUTTON"===n.tagName||n.className.includes("btn"))&&this.element.button(),!this.actionSheetElem){var i="",a=!1;this.settings.actions.forEach(function(o,c){var d="",p=_.stringAttributes(e,e.settings.attributes,"action-".concat(c));o.icon&&(a=!0,d=$.createIcon({icon:o.icon}));var f='<button class="btn-tertiary ids-action" data-index="'.concat(c,'" ').concat(p,">\n          ").concat(d,'\n          <span class="ids-action-text">').concat(o.text,"</span>\n        </button>");i+=f}),this.settings.showCancelButton&&(i+='<div class="separator"></div>\n        <button class="btn-secondary btn-cancel ids-action">\n          <span>Cancel</span>\n        </button>'),this.actionSheetElem=document.createElement("div"),this.actionSheetElem.setAttribute("role","dialog"),_.addAttributes($(this.actionSheetElem),this,this.settings.attributes,"sheet");var s=this.actionSheetElem.classList;s.add("ids-actionsheet"),a&&s.add("has-icons"),this.actionSheetElem.insertAdjacentHTML("afterbegin",i),this.rootElem.append(this.actionSheetElem),$(this.actionSheetElem).find("button").button(),this.settings.tray&&this.renderTrayElement()}},trayBreakpoint:function(){this.trayContainer.style.visibility=it.isAbove("phone-to-tablet")?"hidden":""},trayTransform:function(){this.trayContainer.style.transform="translate(0, -".concat(this.actionSheetElem.offsetHeight-40,"px)")},renderRootElems:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),n=document.createElement("div");t.id="ids-actionsheet-root",t.classList.add("ids-actionsheet-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),t.appendChild(n),document.body.appendChild(t),this.rootElem=t,this.overlayElem=n},renderTrayElement:function(){var e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("span");this.settings.trayOpts.icon&&(t.innerHTML=$.createIcon({icon:this.settings.trayOpts.icon}));var i=t.firstChild;n.innerHTML=this.settings.trayOpts.text,e.classList.add("ids-actionsheet-tray-container",this.settings.trayOpts.backgroundColor),t.classList.add("ids-actionsheet-tray-btn"),n.classList.add("ids-actionsheet-tray-btn-text"),e.appendChild(t),t.appendChild(n),this.rootElem.insertBefore(e,this.rootElem.childNodes[1]),this.trayContainer=e,this.trayBtn=t,this.trayIconElem=i,this.trayTextElem=n,this.trayBreakpoint()},handleEvents:function(){var e=this;this.element.add($(this.trayBtn)).on("click.trigger",function(){e.visible||(e.open(),e.trayContainer&&e.trayTransform())}),$("body").on("resize",function(){e.settings.tray&&(e.trayBreakpoint(),e.visible?e.trayTransform():e.trayContainer.style.removeProperty("transform"))})},get visible(){return this.popupmenuAPI?this.hasOpenPopupMenu:this.rootElem.classList.contains("engaged")},get actionElems(){return Un(this.actionSheetElem.querySelectorAll("button")).filter(function(e){return!e.classList.contains("btn-cancel")})},open:function(){var e=this;this.visible||(this.currentlyNeedsActionSheet?(this.rootElem.classList.add("engaged"),this.overlayElem.removeAttribute("hidden"),window.requestAnimationFrame(function(){e.setOverlayVisibility(),e.addActionSheetOpenEvents(),e.element[0].removeAttribute("aria-hidden"),e.focus()})):this.openPopupMenu())},openPopupMenu:function(){var e=this,t=_.stringAttributes(this,this.settings.attributes,"menu"),n="<ul ".concat(t,">");this.settings.actions.forEach(function(a,s){var o="";a.icon&&(o=$.createIcon({icon:a.icon}));var c='<li class="ids-action-menu-item" data-index="'.concat(s,'">\n        <a>\n          ').concat(o,'\n          <span class="ids-action-text">').concat(a.text,"</span>\n        </a>\n      </li>");n+=c}),n+="</ul>";var i=$(n).insertAfter(this.element);this.element.popupmenu({autoFocus:this.settings.autoFocus,attributes:this.settings.attributes,menu:i,offset:{y:10},trigger:"immediate",removeOnDestroy:!0}),this.hasPopupmenuEvents=!0,$(this.element).on("selected.popupmenu",function(a,s){var o=parseInt($(s.parent()).attr("data-index"),10);if(!isNaN(o)){var c=e.actionSheetElem.children[o];c&&e.doSelect(c,null,!0)}}).on("afteropen.popupmenu",function(){e.focus()}).on("close.popupmenu",function(a,s){s?e.doCancel(null,!1,s):e.close()})},get popupmenuAPI(){return $(this.element).data("popupmenu")},get hasOpenPopupMenu(){var e;return null===(e=this.popupmenuAPI)||void 0===e||null==e?void 0:e.isOpen},close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hasPopupmenuEvents)return this.closePopupMenu(t),void(n&&this.focus());this.visible&&(this.removeActionSheetOpenEvents(),this.element[0].setAttribute("aria-hidden","true"),this.rootElem.classList.remove("engaged"),this.trayContainer&&this.trayContainer.style.removeProperty("transform"),this.setOverlayVisibility(),_.waitForTransitionEnd(this.overlayElem,"opacity").then(function(){e.overlayElem.setAttribute("hidden",""),e.triggerCloseEvent(t),n&&e.focus()}))},closePopupMenu:function(e){this.removePopupmenuEvents(),this.triggerCloseEvent(e)},removePopupmenuEvents:function(){this.hasPopupmenuEvents&&($(this.element).off("selected.popupmenu close.popupmenu afteropen.popupmenu"),delete this.hasPopupmenuEvents)},cancel:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close("cancel",e)},triggerCloseEvent:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e="cancel"===t?jQuery.Event("cancelled"):jQuery.Event("close"),this.element.trigger(e,[$(this.actionSheetElem)])},focus:function(){if(this.settings.autoFocus)if(this.hasOpenPopupMenu){var e=this.popupmenuAPI.menu[0].querySelector("a");e&&(e.focus(),this.popupmenuAPI.highlight($(e)))}else if(this.visible){var t=this.actionSheetElem.querySelector("button");t&&(t.focus(),this.resetFocusState(t))}else this.element[0].focus()},get currentlyNeedsActionSheet(){var t=this.settings.displayAsActionSheet;return"always"===t||"responsive"===t&&it.isBelow(this.settings.breakpoint)},addActionSheetOpenEvents:function(){var e=this;$(document).on("click.disengage",function(t){t.target.closest(".ids-actionsheet")||e.doCancel(null,!1,!1)}),$(this.actionSheetElem).on("click.action","button",function(t){var n=t.currentTarget;n.classList.contains("btn-cancel")?e.doCancel(n,!1,!0):e.doSelect(n,!0),e.focus()}).on("keyup.action",function(t){t.target.closest(".ids-actionsheet")&&"Escape"===t.key&&e.doCancel(null,!1,!1)}).on("focusin.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))}).on("focusout.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))})},doSelect:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=$(e);"function"==typeof this.settings.onSelect&&this.settings.onSelect(i),this.close(null,n),t&&$(this.element).trigger("selected",[i,null,!0])},doCancel:function(e,t,n){var i=$(e);"function"==typeof this.settings.onCancel&&this.settings.onCancel(i),this.cancel(n),t&&$(this.element).trigger("cancelled",[i])},resetFocusState:function(e){var t=$(e);t.data("hide-focus")||t.hideFocus(),t.addClass("hide-focus")},removeActionSheetOpenEvents:function(){$(document).off("click.disengage"),$(this.actionSheetElem).off("click.action keyup.action")},setOverlayVisibility:function(){var e=0;this.visible&&(e=this.settings.overlayOpacity),this.overlayElem.style.opacity=e?"".concat(e):""},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.visible&&this.close(),this.element.add($(this.trayBtn)).off("click.trigger"),this.actionSheetElem&&($(this.actionSheetElem).find("button").destroy(),this.actionSheetElem.remove()),this.element[0].classList.remove("ids-actionsheet-trigger")},destroy:function(){this.teardown(),$.removeData(this.element[0],"actionsheet")}},$.fn.actionsheet=function(e){return this.each(function(){var t=$.data(this,"actionsheet");return t?t.updated(e):t=$.data(this,"actionsheet",new Yr(this,e)),t})};var na=[".expandable-card",".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],ul=[];$.fn.destroy=function(){return gr($(this),"destroy")},$.fn.closeChildren=function(){return gr($(this),"close",na)},$.fn.handleResize=function(){return gr($(this),"handleResize",ul)};var Kr={trigger:null,bottomBorder:!1,animationSpeed:300,attributes:null};function ga(e,t){this.settings=_.mergeSettings(e,t,Kr),this.element=$(e),this.init()}ga.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var e,t,n=this,i=this.element.hasClass("is-expanded");return(this.expander||this.header).attr({"aria-expanded":"".concat(i),"aria-controls":"".concat(this.id,"-content")}),this.header.attr({id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=(e=this,!0===this.isCard?((t=e.header.find("expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(P.translate("ShowMore"),"</span>")+"</a>").appendTo(e.header)),t):((t=e.footer.find(".expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(P.translate("ShowMore"),"</span>")+"</a>").prependTo(e.footer)),t)),this.expander.attr("href","#").hideFocus(),this.expander.attr("role","button"),0===this.expander.length&&(this.expander="string"==typeof this.settings.trigger?$("#".concat(this.settings.trigger)):this.settings.trigger instanceof jQuery?this.settings.trigger:$(this.settings.trigger)),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),i&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",function(){n.content.removeClass("no-transition")}),this.open()),i||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",function(){n.content.removeClass("no-transition")}),this.close()),this.resize(),_.addAttributes(this.element,this,this.settings.attributes,"",!0),_.addAttributes(this.header,this,this.settings.attributes,"header",!0),_.addAttributes(this.content,this,this.settings.attributes,"content",!0),_.addAttributes(this.expander,this,this.settings.attributes,"expander",!0),_.addAttributes(this.footer,this,this.settings.attributes,"footer",!0),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var e=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),(this.expander||this.header).attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(P.translate("ShowLess")?P.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",function(){e.element.triggerHandler("afterexpand",[e.element])}).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var e=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(P.translate("ShowMore")?P.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",function(){e.element.removeClass("is-expanded"),(e.expander||e.header).attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.content[0].style.display="none"}).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var e=this,t=$("html").hasClass("ie11");setTimeout(function(){t&&e.element.hasClass("is-expanded")?e.element.css("min-height",e.element.children(".expandable-pane").outerHeight(!0)+e.element.children(".expandable-footer").outerHeight(!0)):t&&!e.element.hasClass("is-expanded")&&e.element.css("min-height","auto")},300)},resize:function(){var e=this;$("body").on("resize.expandablearea",function(){e.applyIE11Fix()})},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){(this.expander||this.header).removeAttr("aria-controls").removeAttr("aria-expanded"),this.header.children("a").off(),this.header.off(),this.header.removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this},handleEvents:function(){var e=this;return this.expander.on("click.expandablearea",function(t){e.isDisabled()||(t.preventDefault(),e.toggleExpanded())}),this}},$.fn.expandablearea=function(e){return this.each(function(){var t=$.data(this,"expandablearea");t?t.updated(e):t=$.data(this,"expandablearea",new ga(this,e))})};var ia=setTimeout;function Qn(e){return Boolean(e&&void 0!==e.length)}function hl(){}function An(e){if(!(this instanceof An))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],vr(e,this)}function mr(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,An._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(a){return void xs(t.promise,a)}es(t.promise,i)}else(1===e._state?es:xs)(t.promise,e._value)})):e._deferreds.push(t)}function es(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof An)return e._state=3,e._value=t,void ts(e);if("function"==typeof n)return void vr((i=n,a=t,function(){i.apply(a,arguments)}),e)}e._state=1,e._value=t,ts(e)}catch(s){xs(e,s)}var i,a}function xs(e,t){e._state=2,e._value=t,ts(e)}function ts(e){2===e._state&&0===e._deferreds.length&&An._immediateFn(function(){e._handled||An._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)mr(e,e._deferreds[t]);e._deferreds=null}function $a(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function vr(e,t){var n=!1;try{e(function(i){n||(n=!0,es(t,i))},function(i){n||(n=!0,xs(t,i))})}catch(i){if(n)return;n=!0,xs(t,i)}}An.prototype.catch=function(e){return this.then(null,e)},An.prototype.then=function(e,t){var n=new this.constructor(hl);return mr(this,new $a(e,t,n)),n},An.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},An.all=function(e){return new An(function(t,n){if(!Qn(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var a=i.length;function s(c,d){try{if(d&&("object"==typeof d||"function"==typeof d)){var p=d.then;if("function"==typeof p)return void p.call(d,function(f){s(c,f)},n)}i[c]=d,0==--a&&t(i)}catch(f){n(f)}}for(var o=0;o<i.length;o++)s(o,i[o])})},An.allSettled=function(e){return new this(function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var a=i.length;function s(c,d){if(d&&("object"==typeof d||"function"==typeof d)){var p=d.then;if("function"==typeof p)return void p.call(d,function(f){s(c,f)},function(f){i[c]={status:"rejected",reason:f},0==--a&&t(i)})}i[c]={status:"fulfilled",value:d},0==--a&&t(i)}for(var o=0;o<i.length;o++)s(o,i[o])})},An.resolve=function(e){return e&&"object"==typeof e&&e.constructor===An?e:new An(function(t){t(e)})},An.reject=function(e){return new An(function(t,n){n(e)})},An.race=function(e){return new An(function(t,n){if(!Qn(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,a=e.length;i<a;i++)An.resolve(e[i]).then(t,n)})},An._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){ia(e,0)},An._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Xr=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"],Po={caseSensitive:!1,filterMode:Xr[3],searchableTextCallback:void 0};function ns(e){this.settings=_.mergeSettings(void 0,e,Po),this.init()}ns.prototype={init:function(){for(var e,n,i=[{setting:this.settings.filterMode,limits:Xr,preset:Po.filterMode}],a=0;a<i.length;a++)e=i[a].setting,n=i[a].preset,-1===$.inArray(e,i[a].limits)&&(e=n);return this.settings.filterMode===Xr[0]&&ei("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(e,t,n){if(!(e&&($.isArray(e)||e instanceof jQuery)&&t&&"string"==typeof t&&t.length))return!1;var i=this,a=[],s=!1;this.settings.caseSensitive||(t=t.toLowerCase()),$.isArray(e)||(e instanceof jQuery||"object"===Ge(e))&&(e=$.makeArray(e),s=!0);var o=["node","_isFilteredOut"];return e.forEach(function(d){var p=function c(d){var p,f,m,b=!0;if("function"==typeof i.settings.searchableTextCallback)return i.settings.searchableTextCallback(d);"string"==typeof d?p=d:d instanceof $?p=$(d).text():d instanceof HTMLElement?(b=!1,p=d.innerText):(f=d,m="",Object.keys(f).forEach(function(T){n&&o.indexOf(T)>0||(m+="".concat(m.length?" ":"").concat(f[T]))}),p=m);var C=p;return b&&(C=$e.sanitizeHTML(p)),C}(d);i.settings.caseSensitive||(p=p.toLowerCase().trim());var f=!1;if(["startsWith","wordStartsWith"].indexOf(i.settings.filterMode)>-1&&(f=function(T,S){for(var M=T.split(" "),L=0;L<M.length;L++)if(0===M[L].indexOf(S))return!0;return 0===T.indexOf(S)||S.indexOf(" ")>0&&T.indexOf(S)>0}(p,t)),"phraseStartsWith"===i.settings.filterMode&&0===p.indexOf(t)&&(f=!0),"contains"===i.settings.filterMode&&p.indexOf(t)>=0&&(f=!0),"keyword"===i.settings.filterMode)for(var m=t.split(" "),b=0;b<m.length;b++)if(p.indexOf(m[b])>=0){f=!0;break}null===i.settings.filterMode&&(f=!0),f&&a.push(d)}),s&&(a=$(a)),!(!s&&!a.length)&&a},updated:function(e){return this.settings=_.mergeSettings(void 0,e,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var ui={compile:function e(t,n,i,a){var s,o=e,c="";function d(f,m){var b=m;return f=f[(m=m.pop?m:m.split(".")).shift()]||f[b],0 in m?d(f,m):f}n=Array.isArray(n)?n:n?[n]:[],n=a?0 in n?[]:[1]:n;var p=function(){var f="",m=0,b=void 0,C="object"===Ge(n[s])?n[s]:{};(C=_.extend({},i,C))[""]={"":n[s]},t.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(T,S,M,L,z,V,N){m?f+=m&&!z||m>1?T:S:(c+=S.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(U,G,Z,oe,le,re){return G?d(C,G):oe?d(C,re):le?o(d(C,re),C):Z?"":new Option(d(C,re)).innerHTML}),b=V),z?--m||(N=d(C,N),/^f/.test(Ge(N))?c+=N.call(C,f,function(U){return o(U,C)}):c+=o(f,N,C,b),f=""):++m})};for(s=0;s<n.length;s++)p();return c}},pl={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(e,t){var n=e,i=!1;if("string"==typeof t.alias&&void 0!==e[t.alias]&&(i=!0,n=e[t.alias]),"contains"===t.filterMode)n=n.replace(new RegExp("("+at.escapeRegExp(t.term)+")","ig"),"<i>$1</i>");else if("keyword"===t.filterMode)for(var a=t.term.split(" "),s=0;s<a.length;s++){var o=a[s];o&&(n=n.replace(new RegExp("("+at.escapeRegExp(o)+")","ig"),"<i>$1</i>"))}else{var c=n,d="".concat(c);t.caseSensitive||(d=P.toLowerCase(d));var p=at.escapeRegExp(t.term),f=d.indexOf(p);f>0?n=c.substr(0,f)+"<i>"+c.substr(f,p.length)+"</i>"+c.substr(p.length+f):0===f&&(n="<i>"+c.substr(0,p.length)+"</i>"+c.substr(p.length))}return i?e[t.alias]=n:e=n,e},resultIteratorCallback:function(e,t){var n="string"==typeof e,i={highlightTarget:"label",index:t,listItemId:"ac-list-option".concat(t)};return n?i.label=e:i=_.extend({},i,e),i.hasValue=void 0!==e.value,i.hasValue&&(i.value=e.value),i},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(e){return"string"==typeof e?e:e.label}};function br(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,pl),this.init()}br.prototype={init:function(){var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"));var t={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(t):this.listFilter=new ns(t),this.addMarkup(),this.handleEvents()},get isFocused(){var e=document.activeElement,n=this.list;return!!(this.element[0].isEqualNode(e)||n&&n.length&&n[0].contains(e))},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"}),_.addAttributes(this.element,this,this.settings.attributes)},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(e,t){var n=this;if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield")&&!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var i=this;this.settings.caseSensitive||(e=P.toLowerCase(e)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),_.addAttributes(this.list,this,this.settings.attributes,"list"),i.settings.attributes&&setTimeout(function(){n.list.find("li a").each(function(c){var d=$(this);_.addAttributes(d,i,i.settings.attributes,"list-option".concat(c))})}),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var a=$(this.element.attr("data-tmpl"));this.tmpl=$(a).length?$(a).text():"string"==typeof a?a:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var s=this.listFilter.filter(t,e),o=[];!1!==s&&s.forEach(function(c,d){"string"==typeof c&&(c={label:c,value:c});var p=_.extend(!0,{},c);if(p=i.settings.resultIteratorCallback(p,d),i.settings.highlightMatchedText){var f={filterMode:i.settings.filterMode,caseSensitive:i.settings.caseSensitive,term:e};p.highlightTarget&&(f.alias=p.highlightTarget),i.settings.displayResultsCallback||(p=i.settings.highlightCallback(p,f))}o.push(p)}),this.currentDataSet=o,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(e,t,o):this.settings.displayResultsCallback(o,function(){i.element.trigger("listopen",[o])},e)}},handleListResults:function(e,t,n){var i=this;n.forEach(function(b){if(void 0!==ui){var C=ui.compile(i.tmpl,b);ue.append(i.list,C,"*")}}),this.element.trigger("beforepopulated",[n]);var a={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(b){return!0===b.wasFlipped&&(i.list.add(i.element).addClass("is-ontop"),b.y+=1),b}}};if(this.previouslyOpened){var s=this.element.data("popupmenu");s&&s.position()}else this.element.addClass("is-open").popupmenu(a).one("close.autocomplete",function(){i.closeList(!0)});var o=i.list.find("li"),c=$(o[0]).find("span").outerWidth()+20;if(c>parseInt(this.element.outerWidth(),10)){for(var d=0;d<o.length;d++)o.width(c+"px");this.maxWidth=c}if(i.settings.autoSelectFirstItem&&i.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[n]).focus(),!this.previouslyOpened){i.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",function(b){i.select(b)}).on("focusout.".concat("autocomplete"),function(){i.checkActiveElement()});var p=i.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),function(){i.highlight($(this),p)});if(this.settings.offset){var f=this.list.parent()[0];this.settings.offset.left&&(f.style.left="".concat(parseInt(f.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(f.style.top="".concat(parseInt(f.style.top,10)+this.settings.offset.top,"px"))}}var m=_.getArrayFromList(document.querySelectorAll("#ac-is-arialive"));m&&m.forEach(function(b){b.parentNode.removeChild(b)}),ue.append(i.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[n])},closeList:function(e){if(this.list)if(this.list.off(["click.".concat("autocomplete"),"keydown.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var t=this.element.data("popupmenu");t&&(e||t.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(e){if(this.isLoading())return e.preventDefault(),!1;if(!this.listIsOpen())return null;function t(s){s.removeClass("is-selected is-focused")}function n(s){s.addClass("is-selected").find("a").focus()}var s,o,i=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),a=(0===(o=(s=i).filter(".is-selected")).length&&(o=s.filter(".is-focused")),o);return 40===e.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,t(a),n(i.eq(i.index(a)+1)),e.preventDefault(),e.stopPropagation()),38===e.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,t(a),n(i.eq(i.index(a)-1)),e.preventDefault(),e.stopPropagation()),9!==e.keyCode&&13!==e.keyCode||!this.listIsOpen()||(a.length?(e.stopPropagation(),e.preventDefault(),this.noSelect=!0,this.select(a)):this.closeList()),null},handleAutocompleteInput:function(e){var t=this;return t.isLoading()?(e.preventDefault(),!1):(this.getDataFromSource().done(function(n,i){t.currentDataSet=i,t.openList(n,i)}),null)},checkActiveElement:function(){var e=this;setTimeout(function(){var t=document.activeElement;e.listIsOpen()&&$.contains(e.list[0],t)||e.element.is(t)||e.element.trigger("safe-blur")},0)},getDataFromSource:function(){var e=this;if(e.isLoading())return!1;var t,n=this.element,i=$.Deferred();function a(s,o,c){return e.lastTerm!==s?i.reject(s):(e.element.triggerHandler("complete"),e.element.trigger("requestend",[s,o]),!1===c?i.reject(s):i.resolve($e.stripTags(s),o))}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(function(){if(!e.isLoading()&&e.isFocused)if(""!==(t=n.val())){var s=Ge(e.settings.source);if(e.element.triggerHandler("start"),e.element.trigger("requeststart",[t]),e.lastTerm=t,"function"===s)e.settings.source(t,a,e.settings.sourceArguments);else if("object"===s){var o=$.isArray(e.settings.source)?e.settings.source:[e.settings.source];a(t,o,!0)}else if(e.settings.source)if("keyword"===e.settings.filterMode){var c=[],d=function(M){if(0===c.length)c=M;else for(var L=0;L<M.length;L++){for(var z=M[L],V=!1,N=0;N<c.length;N++)for(var U=c[N],G=0;G<Object.getOwnPropertyNames(U).length;G++)if(z[Object.getOwnPropertyNames(z)[G]]===U[Object.getOwnPropertyNames(U)[G]]){V=!0;break}V||c.push(z)}},p=function(M){d(M),a(t,c,!0)},f=t.split(" ");""===f[f.length-1]&&f.splice(-1,1);for(var m=0;m<f.length;m++){var b=f[m];if(b.length>0){var C=e.settings.source.toString(),T=$.getJSON(C+b);m<f.length-1?T.done(d).fail(d):T.done(p).fail(p)}}}else{var S=e.settings.source.toString();$.getJSON(S+t).done(function(M){a(t,M,!0)}).fail(function(){a(t,[],!1)})}else i.reject(t)}else e.element.data("popupmenu")&&e.element.data("popupmenu").close()},e.settings.delay),i},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(e,t){var n=this.element.val(),i=e.text().trim();e.find(".display-value").length>0&&(i=e.find(".display-value").text().trim()),t&&t.length&&t.parent("li").removeClass("is-selected"),e.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(i).focus(),n!==i&&this.element.triggerHandler("change")},select:function(e,t){var n,i,a={},s=!1;e instanceof $.Event?(s=!0,n=$(e.currentTarget)):n=e,n.is("li")&&(i=n,n=n.children("a"));var o=(i=n.parent("li")).attr("data-index"),c=i.attr("data-value");if(this.element.attr("aria-activedescendant",i.attr("id")),t&&t.length||(t=this.currentDataSet),o)a=t[parseInt(o,10)];else if(c)for(var d,p=0;p<t.length;p++)(d="object"===Ge(t[p])&&void 0!==t[p].value?t[p].value.toString():t[p].toString())===c&&("object"===Ge(t[p])&&(a=t[p]),a.value=d);return a.value&&0!==!a.value.length||(a.value=n.text().trim()),this.highlight(n),this.noSelect=!0,a.label=$e.stripHTML(a.label),a.highlightTarget||(a.highlightTarget="label",a.index=parseInt(o,10),a.listItemId="ac-list-option"+a.index,a.hasValue=!0),this.element.trigger("selected",[n,a]),s&&e.preventDefault(),this.closeList(),this.element.focus(),a},handleAfterListOpen:function(){var e=this;return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this.list.on("keydown.".concat("autocomplete"),function(t){"Enter"===t.key&&e.handleAutocompleteKeydown(t)}),this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),e&&e.source&&(this.settings.source=e.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var e=this.element.data("popupmenu");return e&&e.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function(){var e=this;this.element.on("updated.".concat("autocomplete"),function(){e.updated()}).on("keydown.".concat("autocomplete"),function(t){e.handleAutocompleteKeydown(t)}).on("input.".concat("autocomplete"),function(t){e.handleAutocompleteInput(t)}).on("focus.".concat("autocomplete"),function(){e.handleAutocompleteFocus()}).on("focusout.".concat("autocomplete"),function(){e.checkActiveElement()}).on("listopen.".concat("autocomplete"),function(){e.handleAfterListOpen()}).on("resetfilter.".concat("autocomplete"),function(){e.resetFilters()})}},$.fn.autocomplete=function(e){return this.each(function(){var t=$.data(this,"autocomplete");if("string"==typeof t){var n="".concat(t),i=_.extend({},e,{source:n||e.source});t=$.data(this,"autocomplete",new br(this,i))}else t?t.updated(e):t=$.data(this,"autocomplete",new br(this,e))})};var Cs=[!1,"mobile",!0],fl={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:Cs[0],collapseSize:void 0,tabbable:!0,autocompleteAttribute:"off"};function No(e,t){this.element=$(e),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==t&&(void 0===t.clearable&&(t.clearable=!0),void 0===t.collapsible&&(t.collapsible=!0,t.tabbable=!1)),this.settings=_.mergeSettings(e,t,fl),this.settings.collapsible&&(this.settings.tabbable=!1),this.init()}No.prototype={get toolbarParent(){var e=this.element.parents(".toolbar"),t=this.element.parents(".flex-toolbar");if(!(e.add(t).length<1))return t.length>0?t.first()[0]:e.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var e=this.element.closest(".module-tabs");return e.length?e.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var e;return this.isContainedByFlexToolbar&&(e=$(this.element).data("toolbarflexitem")),e},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=_.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete")));var t=this.settings.autocompleteAttribute;"string"==typeof t&&t.length?this.element.attr("autocomplete","".concat($e.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();n&&""!==n||(n=P.translate("Keyword")),this.element.attr({"aria-label":n}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.wrapper=this.isInlineLabel?this.inlineLabel.addClass("searchfield-wrapper"):this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var i="remove";this.settings.collapsible&&this.settings.collapseSize&&(i="add"),this.wrapper[0].classList[i]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var a,s=["context","alternate"],o=0;o<s.length;o++)this.element.hasClass(s[o])&&(this.wrapper.addClass(a=s[o]),this.element.removeClass(a));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=Cs[1]),this.wrapper[0].classList[this.settings.collapsible?"remove":"add"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),_.addAttributes(this.element,this,this.settings.attributes,"",!0),_.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var c=this.wrapper.find(".icon:not(.icon-dropdown)");if(c&&c.length||(c=$.createIconElement("search")),c[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),c.appendTo(this.categoryButton),c=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var d=c.find(".icon-dropdown");if(d.length||(d=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),d.appendTo(c),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>')),this.list.addClass(this.settings.categoryMultiselect?"is-multiselectable":"is-selectable");var f="is-selectable";this.settings.categoryMultiselect||(f="is-multiselectable"),this.list.removeClass(f),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var m=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){m.isFocused&&m.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(P.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var b=this.wrapper.next(".go-button");b.length||(b=this.wrapper.find(".go-button")),b.length&&(this.settings.showGoButton=!0,this.goButton=b,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||P.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton[0].setAttribute("id",_.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&this.makeClearable(),this.settings.button&&(this.wrapper.addClass("has-custom-button"),this.customButton=$('<button class="btn-icon custom-button"></button>'),this.customButton.append($.createIconElement(this.settings.button.icon)),this.wrapper.append(this.customButton));var C=this,T=new nn({duration:1,updateCallback:function(){},timeoutCallback:function(){C.calculateSearchfieldWidth()}});dt.register(T);var S=0;return $("body").on("resize.".concat(this.id),function(){C.wrapper.parents(".splitter-container").length>0&&(C.wrapper.width()>=C.wrapper.parent().width()||S>=C.wrapper.parent().width()?C.wrapper.width("".concat(C.wrapper.parent().width()-.1*C.wrapper.parent().width(),"px")):C.wrapper.css("width","")),C.calculateSearchfieldWidth()}),!1===this.settings.collapsible&&this.expand(!0),S=C.wrapper.width(),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.shouldBeFullWidth())return this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused?(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded?void 0:void this.expand(!0)):(this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth());this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var e=this,t=new nn({duration:1,updateCallback:function(){},timeoutCallback:function(){e.focusElem&&(e.focusElem.focus(),delete e.focusElem)}});dt.register(t)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),_.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),_.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var e=this.wrapper.closest(".header"),t=!1;return e.length&&(t=e.width()<it.phone),t||it.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=_.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},hasCustomButton:function(){return this.settings.button&&this.customButton&&this.customButton.length},setupEvents:function(){var e=this,t=this;return t.element.on("updated.".concat(this.id),function(n,i){t.updated(i)}).on("focus.".concat(this.id),function(n){t.handleFocus(n)}).on("blur.".concat(this.id),function(n){t.isContainedByFlexToolbar&&t.handleSafeBlur(n)}).on("click.".concat(this.id),function(n){t.handleClick(n)}).on("keydown.".concat(this.id),function(n){t.handleKeydown(n)}).on("beforeopen.".concat(this.id),function(n,i){t.handlePopupBeforeOpen(n,i)}).on("safe-blur.".concat(this.id),function(){t.handleSafeBlur()}).on("listclose.".concat(this.id),function(){t.handleSafeBlur()}).on("input.".concat(this.id),function(){t.checkContents()}),t.wrapper.on("mouseenter.".concat(this.id),function(){$(this).addClass("is-hovered")}).on("mouseleave.".concat(this.id),function(){$(this).removeClass("is-hovered")}),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),function(n,i){t.handleCategorySelected(n,i)}).on("focus.".concat(this.id),function(n){t.handleCategoryFocus(n)}).on("blur.".concat(this.id),function(){t.handleSafeBlur()}).on("close.".concat(this.id),function(){t.handleSafeBlur()}).on("beforeopen.".concat(this.id),function(n,i){t.handlePopupBeforeOpen(n,i)}),t.hasGoButton()&&t.goButton.on("click.".concat(this.id),function(n){return t.handleGoButtonClick(n)}).on("click.".concat(this.id),function(n){return t.handleGoButtonFocus(n)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),t.hasCustomButton()&&this.customButton.on("click.".concat(this.id),function(n){return t.settings.button.click(n,t.element.val())}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),function(n){t.handleFocus(n)}).on("focusout.".concat(this.id),function(n){t.handleBlur(n)}).on("keydown.".concat(this.id),function(n){t.handleKeydown(n)}).on("collapse.".concat(this.id),function(){t.collapse()}),$("body").on("breakpoint-change.".concat(this.id),function(){t.adjustOnBreakpoint()}),t.adjustOnBreakpoint()):($("body").on("breakpoint-change.".concat(this.id),function(){t.simpleAdjustOnBreakpoint()}),t.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),function(n){t.collapseResponsive(n)}).on("click.".concat(this.id),function(n){t.collapseResponsive(n)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),function(){!t.isFocused&&t.isCurrentlyCollapsible&&t.collapse()}).on("rendered.".concat(this.id),function(){t.element.removeClass("no-transition no-animation"),t.wrapper.removeClass("no-transition no-animation")}),t.element.on("beforepopulated.".concat(this.id),function(n,i){i.length>0?t.settings.showAllResults&&t.addMoreLink():t.addNoneLink()}),t.settings.clearable&&(t.element.on("cleared.".concat(this.id),function(){t.autocomplete&&t.autocomplete.closeList(),delete t.settings.value}),t.xButton.on("blur.".concat(this.id),function(n){t.handleSafeBlur(n)})),t.element.on("listopen.".concat(this.id),function(){var n=$("#autocomplete-list");t.wrapper.addClass("popup-is-open"),t.element.on("selected.".concat(e.id),function(i,a,s){if(a.hasClass("more-results")){var o=t.settings.allResultsCallback;o&&"function"==typeof o&&o(s)}}),n.find(".more-results, .no-results").on("focus.".concat(e.id),function(){var i=$(this);n.find("li").removeClass("is-selected"),i.parent("li").addClass("is-selected"),t.element.val("")})}).on("listclose.".concat(this.id),function(){var n=$("#autocomplete-list");t.element.off("selected.".concat(e.id)),n.off("focus.".concat(e.id))}),Ie.browser.isSafari()&&this.xButton&&(this.xButton.on("mouseover.clearable",function(){e.closeButtonHover=!0}),this.xButton.on("mouseleave.clearable",function(){e.closeButtonHover=!1})),this},setAsActive:function(e,t){var n=this;if(e||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var i=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&i.push("is-open")),i.forEach(function(a){n.wrapper[0].classList.add(a)}),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===t&&this.element.focus()}},get isFocused(){var e=document.activeElement,t=this.wrapper[0];if(this.settings.tabbable&&t.contains(e)&&$(e).is("button.close")||Ie.browser.isSafari()&&this.closeButtonHover&&!$(e).is("button.close")||t.contains(e))return!0;if(this.autocomplete){var n=this.autocomplete.list;if(n&&n[0].contains(e))return!0}return!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)||!!(this.xButton&&this.xButton.length&&this.xButton.has(e).length)},hasFocus:function(){return ei("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var e=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new nn({duration:1,updateCallback:function(){},timeoutCallback:function(){e.isFocused?delete e.settings.value:(e.settings.value=$(e.element).val(),e.wrapper[0].classList.remove("has-focus","active"),e.removeDocumentDeactivationEvents(),e.clearResponsiveState(),e.isCurrentlyCollapsible?e.collapse():e.isContainedByFlexToolbar&&e.wrapper[0].classList.remove("is-open"))}}),dt.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var e=this;$(document).on("click.".concat(this.id),function(t){e.handleOutsideClick(t)}).on("keydown.".concat(this.id),function(t){e.handleOutsideKeydown(t)}),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(e){this.isSearchfieldElement(e.target)||this.handleSafeBlur()},handleKeydown:function(e){var t=e.which,n=e.key;27===t&&Ie.browser.isIE11()&&e.preventDefault(),e.ctrlKey&&8===t&&this.element.val(""),9===t&&this.handleSafeBlur(),this.isContainedByFlexToolbar&&["ArrowUp","Up","ArrowDown","Down"].indexOf(n)>-1&&this.collapse()},handleOutsideKeydown:function(e){9!==e.which||this.isSearchfieldElement(e.target)||this.handleSafeBlur()},handlePopupBeforeOpen:function(e,t){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!t)return!1;var n=this.wrapper.hasClass("context")?"addClass":"removeClass",i=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return t[n]("context"),t[i]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(e){var t=this.settings.goButtonAction;if("function"==typeof t){var n,i=this.element.val();return this.hasCategories()&&(n=this.getCategoryData()),t(e,i,n)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(e){if(this.settings.showCategoryText&&this.categoryButton.length){var t="",n=this.wrapper.find(".btn"),i=n.find("span");if(i&&i.length||(i=$('<span class="category"></span>').insertAfter(n.find(".icon").first())),i.empty(),"string"==typeof e&&e.length)i.text(e.trim());else{var a=this.getSelectedCategories();a.length&&(t=a.length>1?"".concat(a.length," ").concat(P.translate("Selected")):a.text().trim(),i.text(t))}}},isSearchfieldElement:function(e){return!!($.contains(this.wrapper[0],e)||this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)},getFillSize:function(e,t){var n,i,a;function s(d){if(!d)return 0;if(!isNaN(parseInt(d,10)))return parseInt(d,10);if(d instanceof jQuery){if(!d.length)return 0;d.is(".title")&&(d=d.next(".buttonset")),d=d[0]}return d}function o(d,p){if(!isNaN(d))return d??0;p&&"string"==typeof p||(p="left");var f,m=["left","right"];return-1===$.inArray(p,m)&&(p=m[0]),(d instanceof HTMLElement||d instanceof SVGElement)&&(f=d.getBoundingClientRect()),f[p]}if(e=s(e),t=s(t),n=o(e),i=o(t,(a="left",(e===t||$(t).length&&$(t).is(".buttonset"))&&(a="right"),a)),!n&&!i)return 280;var c=i-n;return c<=280?280:c>=450?450:c},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var e=0,t=this.wrapper;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var n=window.getComputedStyle(this.categoryButton[0]);e+=this.categoryButton.width()+(parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10))+2*parseInt(n.borderLeftWidth,10)}if(this.hasGoButton()){var i=window.getComputedStyle(this.goButton[0]);e+=this.goButton.width()+(parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10))+2*parseInt(i.borderLeftWidth,10)}if(e>0){var a=t.hasClass("alternate")?2:0;this.input.style.width="calc(100% - ".concat(e+a,"px)")}delete this.openWidth},calculateOpenWidth:function(){var e,t=this.element.parents(".toolbar").children(".buttonset"),n=this.wrapper.next();if(t.length){if(n.is(".title")&&(n=t),this.shouldBeFullWidth()){var i="100%";return it.isBelow("desktop")&&(i="90%"),e=i,$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(e="calc(".concat(i," - 1px)")),void(this.openWidth=e)}var a=t.offset().left+10,s=n;s.length||(s=t.offset().left+10+t.outerWidth(!0)),e=this.getFillSize(a,s),this.openWidth="".concat(e-6,"px")}},calculateSearchfieldWidth:function(){var e,t="100%",n=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var i,a=window.getComputedStyle(this.element[0]);a.width&&!this.isContextSearch&&(t=a.width),this.hasCategories()&&(n+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(n+=this.goButton.outerWidth(!0)+40),n>0&&(i=null!=this.element[0].parentElement&&this.element[0].parentElement.classList.contains("alternate"),e="calc(".concat(i?"100%":t," - ").concat(n,"px)")),e&&(this.element[0].style.width=e)},handleCategorySelected:function(e,t){this.element.trigger("selected",[t]),this.settings.showCategoryText&&(this.setCategoryButtonText(e,t.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(e){var t=this.getCategories(),n=[];return t.each(function(){var i=this.classList.contains("is-checked");if(!0!==e||!1!==i){var a={name:this.innerText,checked:i};this.id&&(a.id=this.id);var s=this.getAttribute("data-value");void 0!==s&&(a.value=s),n.push(a)}}),n},updateCategories:function(e){this.settings.categories=e,this.setCategories(this.settings.categories)},setCategories:function(e){this.list.empty();var t=this,n=["string","number"],i=!1;e.forEach(function(s){if("string"==typeof s&&(s={name:s}),s.name){var o="";"string"==typeof s.id&&s.id.length&&(o=' id="'.concat(s.id,'"'));var c="";n.indexOf(Ge(s.value))>-1&&(c=' data-value="'.concat(s.value,'"'));var d="";!0===s.checked&&!0!==i&&(d=' class="is-checked"',t.settings.categoryMultiselect||(i=!0)),t.list.append("<li".concat(d).concat(o).concat(c,'><a href="#">').concat(s.name,"</a></li>"))}});var a=this.categoryButton.data("popupmenu");a&&"function"==typeof a.updated&&a.updated()},expand:function(e){var t=this,n=this;return new An(function(i){if(n.isExpanded||n.isExpanding||n.isCollapsing)i();else{var a=!n.shouldBeFullWidth();n.isExpanding=!0,a||n.appendToParent(),n.wrapper.removeAttr("style"),n.input.removeAttribute("style");var s=0;n.buttonsetElem&&(s=parseInt(window.getComputedStyle(n.buttonsetElem).width,10));var o={buttonset:s+280};!t.isContainedByFlexToolbar&&it.isAbove("phone-to-tablet")&&t.wrapper[0].classList.add("is-open"),t.calculateOpenWidth(),t.setOpenWidth(),(!e||"ios"===Ie.os.name||n.isFocused&&document.activeElement!==n.input)&&(n.focusElem&&(n.focusElem=n.input),n.element.parents(".flex-toolbar").length||n.input.focus());var c=[];o&&c.push(o),n.element.trigger("beforeexpand"),$(n.toolbarParent).triggerHandler("recalculate-buttons",c);var d=new nn({duration:10,updateCallback:function(){},timeoutCallback:function(){$(n.toolbarParent).triggerHandler("recalculate-buttons",c),n.element.trigger("expanded"),delete n.isExpanding,n.isExpanded=!0,!n.isCurrentlyCollapsible||n.isFocused||n.focusElem||n.handleSafeBlur()}});dt.register(d)}})},collapse:function(){var e=this,t=this;return new An(function(n){if(t.isExpanded||!t.isExpanding||t.isCollapsing){t.isCollapsing=!0,t.wrapper.removeAttr("style"),t.appendToButtonset(),t.checkContents(),t.toolbarParent&&t.setInitalWidth(),t.clearResponsiveState(),t.wrapper[0].classList.remove("active","is-open"),Ie.browser.isIE11&&t.wrapper[0].classList.remove("is-open"),!e.isContainedByFlexToolbar&&e.isFocused||t.wrapper[0].classList.remove("has-focus"),t.categoryButton&&t.categoryButton.length&&t.categoryButton.data("popupmenu").close(!1,!0),t.element.trigger("beforecollapse"),delete t.isExpanded,delete t.isExpanding;var i=new nn({duration:10,updateCallback:function(){},timeoutCallback:function(){delete t.isCollapsing,$(t.toolbarParent).triggerHandler("recalculate-buttons"),t.element.trigger("collapsed"),n()}});dt.register(i)}else n()})},collapseResponsive:function(e){if(this.previouslyCollapsedByKey&&"click"===e.type)delete this.previouslyCollapsedByKey;else{var t=this,n=1;e&&!e.key&&(n=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(n=1)),"keydown"===e.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then(function(){t.wrapper.trigger("collapsed-responsive",[n])})}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var e;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(e="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(e)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(e,"px")))},addMoreLink:function(){var e=$("#autocomplete-list"),t=this.element.val();if(!($(".more-results",e).length>0)){var n=$('<li class="separator" role="presentation"></li>').appendTo(e),i=$('<li role="presentation"></li>').appendTo(e);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(P.translate("AllResults"),' "').concat($e.ensureAlphaNumericWithSpaces(t),'"</span>')).appendTo(i),this.autocomplete.maxWidth&&n.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var e=$("#autocomplete-list");if(!($(".no-results",e).length>0)){var t=$('<li role="presentation" class="is-placeholder"></li>').appendTo(e);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(P.translate("NoResults"),"</span>")).appendTo(t)}},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings),Object.prototype.hasOwnProperty.call(e,"collapseSize")&&void 0===e.collapseSize&&(this.settings.collapseSize=e.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){if(this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.customButton&&this.customButton.length&&(this.customButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.customButton),this.categoryButton&&this.categoryButton.length){var e=this.categoryButton.data("popupmenu");e&&(e.destroy(),e.wrapper.off().remove()),this.categoryButton.off().remove(),delete this.categoryButton}return this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),$("body").off("breakpoint-change.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),Ie.browser.isSafari()&&(this.xButton.off("mouseover.clearable"),this.xButton.off("mouseleave.clearable")),this.xButton.remove()),this},makeClearable:function(){var e=this;this.element.clearable({tabbable:this.settings.tabbable}),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close").length>0?this.wrapper.children(".icon.close"):this.wrapper.children("button.close"),this.settings.tabbable||this.xButton[0].setAttribute("tabindex","-1"),this.element.on("cleared",function(){return e.checkContents()}),_.addAttributes(this.xButton,this,this.settings.attributes,"btn-close",!0),_.addAttributes(this.element.xButton,this,this.settings.attributes,"btn-close",!0)},clear:function(){this.xButton&&this.xButton.click(),this.element.xButton&&this.element.xButton.click()},destroy:function(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(e){return this.each(function(){var t=$.data(this,"searchfield");t?t.updated(e):t=$.data(this,"searchfield",new No(this,e))})};var Ro={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",resizable:!1,savePosition:!1,openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function is(e,t){return this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Ro),this.init()}is.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var e=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==e?"true"===e:this.settings.openOnLarge;var t=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==it[t]?t:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var n=this.menu.prevAll(".masthead"),i=this.menu.prevAll(".module-tabs");n.length>0&&(this.scrollTarget=n,this.menu.addClass("short")),i.length>0&&(this.scrollTarget=i),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var a=this.accordion.data("accordion");if(a||(this.accordion.accordion(),a=this.accordion.data("accordion")),this.accordionAPI=a,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$('<input id="application-menu-searchfield" class="searchfield" placeholder="Search" />').prependTo(this.element),this.element.addClass("has-searchfield");var s=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function(c,d,p){var f,m;d(c,null===(f=s.accordion)||void 0===f||null===(m=f?.data("accordion"))||void 0===m||null==m?void 0:m.toData(!0,!0),p)},searchableTextCallback:function(c){return c.text||c.contentText||""},resultIteratorCallback:function(c){return c.highlightTarget="text",c},clearResultsCallback:function(){var c;s.searchfieldAPI&&!s.searchfieldAPI.isFocused&&(null===(c=s.accordionAPI)||void 0===c||null==c||c.unfilter())},displayResultsCallback:function(c,d,p){return s.filterResultsCallback(c,d,p)}}),this.searchfield.on("cleared.".concat("applicationmenu"),function(){var c;null===(c=s.accordionAPI)||void 0===c||null==c||c.unfilter(null,!0)})}this.renderResizableAppMenu(),this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var o=this.element.find(".application-menu-switcher-trigger");return o.length>0&&(this.switcherTrigger=o,this.switcherPanel=o.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea({trigger:o})),this},getAdjacentContainerElement:function(){var e=this.element.next(".page-container");return e.length||(e=$("body")),e},handleTriggerEvents:function(){var e=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",function(t){return!$(t.currentTarget).find(".icon.app-header").hasClass("go-back")&&!e.isAnimating&&(e.menu.hasClass("is-open")?e.closeMenu(!0):e.openMenu(void 0,!0),!0)}),this.element.find(".searchfield").on("keydown.applicationmenu",function(t){e.handleKeyDown(t)}),this.element.find(".searchfield").on("input.applicationmenu",function(){e.handleInput()})},handleInput:function(){var e,t,n;return this.element.find(".searchfield").val()||null!==(e=this.element.find(".searchfield").val())&&void 0!==e&&e?.length?null===(t=this.accordionAPI)||void 0===t||null==t||t.unfilter(null):null===(n=this.accordionAPI)||void 0===n||null==n||n.unfilter(null,!0),!0},handleKeyDown:function(e){return!(121===e.which&&!e.shiftKey&&(e.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),1))},notify:function(e,t){if(e&&void 0!==e&&(e instanceof HTMLElement&&(e=$(e)),e.is("a"))){var n=e.find(".tag");if(t&&void 0!==t&&0!==parseInt(t,10))return n.length||(n=$('<span class="tag"></span>').appendTo(e)),n.text(t.toString()),n;n.length&&n.remove()}},adjustHeight:function(){var e=this.scrollTarget.is(".is-sticky"),t=this.scrollTarget.outerHeight(!0)-(e?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(t+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=t>0?"calc(100% - ".concat(t,"px)"):"100%"},toggleScrollClass:function(){if("ie"===Ie.browser.name&&"11"===Ie.browser.version){var e=this.element[0];e&&e.classList.contains("has-menu-footer")&&(e.scrollHeight>e.clientHeight?e.classList.add("has-scrollbar"):e.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return it.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(it.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else it.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},renderResizableAppMenu:function(){if(this.settings.resizable){this.openMenu(!1,!1,!1),this.element.after('<div class="resizer"></div>'),$("#application-menu, .resizer").wrapAll('<div class="resize-app-menu-container" />'),$(".page-container").wrapAll('<div class="resize-page-container" />'),$(".resize-page-container").insertAfter(".resizer");var e=document.querySelector(".resizer"),t=document.querySelector("#application-menu"),n=$(".tab-panel-container.page-container"),i=$(".page-container");if(e.addEventListener("mousedown",function(c){c.preventDefault(),window.addEventListener("mousemove",s),window.addEventListener("mouseup",o)}),localStorage&&localStorage.navMenuWidth&&this.settings.savePosition&&(t.style.flexBasis=localStorage.navMenuWidth),this.settings.savePosition&&(i.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")),n&&n.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")"))),$("html.is-safari")&&this.settings.resizable&&$(".resize-app-menu-container").css("display","flex"),!localStorage.navMenuWidth){var a=$(".resizer").position();i.css("width","calc(100% - ".concat(a.left<300?300:a.left,"px)"))}}function s(c){t.style.flexBasis="".concat((c.pageX<300?300:c.pageX)-t.getBoundingClientRect().left,"px"),$(".page-container").css("width","calc(100% - ".concat(c.pageX<300?300:c.pageX,"px)"))}function o(){window.removeEventListener("mousemove",s,!1),localStorage&&(localStorage.navMenuWidth=t.style.flexBasis)}},openMenu:function(e,t,n){if(!0!==this.isAnimating){var i=this,a=$.fn.transitonEndName;if(n||(this.isAnimating=!0),this.adjustHeight(),this.settings.resizable){var s=parseInt(this.element[0].style.flexBasis,10);(s<300||isNaN(s))&&(s=300),this.settings.savePosition?$(".page-container").css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")):$(".page-container").css("width","calc(100% - ".concat(s,"px)"))}this.triggers.each(function(){var c=$(this);c.attr({"aria-expanded":!0}),(c.parents(".header").length>0||c.parents(".masthead").length>0)&&(c.find(".icon.app-header").removeClass("go-back"),c.trigger("icon-change"))}),n||(this.menu.off("".concat(a,".applicationmenu")),this.menu[0].style.display="",this.menu.addClass("is-open"),Ie.features.touch&&$("body").addClass("is-open-touch")),it.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),e&&!0===e||this.menu.find(".is-selected > a").focus(),"ios"===Ie.os.name&&this.getAdjacentContainerElement().addClass("ios-click-target"),n?o():(this.menu.one("".concat(a,".applicationmenu"),o),this.timeout=setTimeout(o,300)),setTimeout(function(){$(document).on("click.applicationmenu",function(c){$(c.target).parents(".application-menu").length<1&&!i.isLargerThanBreakpoint()&&i.closeMenu(!0)})},0)}function o(){null!==i.timeout&&(clearTimeout(i.timeout),i.timeout=null),t&&(i.userOpened=!0,i.userClosed=void 0),n||(i.isAnimating=!1,i.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),i.toggleScrollClass(),i.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(e){if(!0!==this.isAnimating){var t=this,n=$.fn.transitionEndName();this.isAnimating=!0,this.triggers.each(function(){var a=$(this);a.attr({"aria-expanded":!1}),(a.parents(".header").length>0||a.parents(".masthead").length>0)&&(a.find(".icon.app-header"),a.trigger("icon-change"))}),"ios"===Ie.os.name&&this.getAdjacentContainerElement().removeClass("ios-click-target"),this.menu.one("".concat(n,".applicationmenu"),i),this.timeout=setTimeout(i,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),this.settings.resizable&&$(".page-container").css("width","100%"),Ie.features.touch&&$("body").removeClass("is-open-touch")}function i(){null!==t.timeout&&(clearTimeout(t.timeout),t.timeout=null),t.menu.off("".concat(n,".applicationmenu")),t.menu[0].style.display="none",t.isAnimating=!1,e&&(t.userOpened=void 0,t.userClosed=!0),t.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(e,t,n){var i=this;if(e&&e.length){var a=$(),s=!this.element.is(":visible");$.each(e,function(o,c){a=a.add($(c))}),this.triggers=this.triggers[t?"not":"add"](a),this.handleTriggerEvents(),this.triggers.each(function(o,c){var d,p=$(c);p.attr("aria-controls","application-menu"),p.attr("aria-expanded","".concat(i.isOpen()));var f=null===(d=c.textContent)||void 0===d||null==d?void 0:d.length,m=p.find(".audible");if(!f){var b=P.translate("AppMenuTriggerTextAlt");m.length?m.text(b):c.insertAdjacentHTML("beforeend",'<span class="audible">'.concat(b,"</span>"))}}),n&&!0===n||(this.updated(),s&&this.element.css("display","none"))}},filterResultsCallback:function(e,t){var n,i;if(!e)return null===(i=this.accordionAPI)||void 0===i||null==i||i.unfilter(),void t();var a=$(e.map(function(s){return s.element}));null===(n=this.accordionAPI)||void 0===n||null==n||n.filter(a,!0),this.element.triggerHandler("filtered",[e]),t()},handleSearchfieldInputEvent:function(){if(this.searchfield&&this.searchfield.length){var e=this.searchfield.val();if(!e||""===e){var t,n,i,a=this.accordion.find(".has-filtered-children");null===(t=this.accordionAPI)||void 0===t||null==t||t.headers.removeClass("filtered has-filtered-children"),null===(n=this.accordionAPI)||void 0===n||null==n||n.collapse(a),null===(i=this.accordionAPI)||void 0===i||null==i||i.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var e=this.switcherPanel.data("expandablearea");if(e&&(e.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){var e,t,n;if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu","input.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat("applicationmenu","-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.element.find(".application-menu-toolbar").off("click.".concat("applicationmenu")),this.accordionAPI&&"function"==typeof(null===(e=this.accordionAPI)||void 0===e||null==e?void 0:e.destroy)&&(this.isFiltered&&(null===(n=this.accordionAPI)||void 0===n||null==n||n.collapse()),null===(t=this.accordionAPI)||void 0===t||null==t||t.destroy()),this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat("applicationmenu")].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var i=this.searchfield.data("searchfield");i&&i.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function(){var e=this,t=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",function(n,i,a){t.notify(i,a)}).on("updated.applicationmenu",function(){t.updated()}),"ie"===Ie.browser.name&&"11"===Ie.browser.version&&t.element.find(".expandable-area").on("beforeexpand.applicationmenu",function(){t.element[0].classList.remove("has-scrollbar")}).on("aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.accordion.on("blur.applicationmenu",function(){t.closeMenu()}).on("selected.applicationmenu",function(){t.handleDismissOnClick()}).on("followlink.applicationmenu",function(){t.handleDismissOnClick()}).on("afterexpand.applicationmenu aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",function(){var n=e.element.height();t.element.addClass("has-open-switcher"),t.switcherPanel.find(".content").height(n-71),t.settings.onExpandSwitcher&&t.settings.onExpandSwitcher(t,t.element,t.settings),t.element.on("keydown.".concat("applicationmenu","-switcher"),function(i){var a=i.key;"Escape"===a&&t.element[0].classList.contains("has-open-switcher")&&(i.preventDefault(),t.closeSwitcherPanel()),"Tab"===a&&(t.keyboardChangedFocus=!0)}),t.switcherPanel.one("afterexpand.".concat("applicationmenu"),function(){var i;e.keyboardChangedFocus||((i=ue.focusableElems(t.switcherPanel[0]))[0].classList.remove("hide-focus"),i[0].focus())})}).on("aftercollapse.applicationmenu",function(){e.element.removeClass("has-open-switcher"),e.settings.onCollapseSwitcher&&e.settings.onCollapseSwitcher(e,e.element,e.settings),e.element.off("keydown.".concat("applicationmenu","-switcher")),e.switcherPanel.off("afterexpand.".concat("applicationmenu")),delete e.keyboardChangedFocus}),this.element.find(".application-menu-toolbar").on("click.".concat("applicationmenu"),"button",function(n){n.defaultPrevented||e.handleDismissOnClick()}),$(document).on("open-applicationmenu",function(n,i,a){t.openMenu(i,a)}).on("close-applicationmenu",function(n,i){t.closeMenu(i)}).on("dismiss-applicationmenu",function(){t.handleDismissOnClick()}),$(window).on("scroll.applicationmenu",function(){t.adjustHeight()}),$("body").on("resize.applicationmenu",function(){t.testWidth(),t.toggleScrollClass()}),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",function(n){t.handleSearchfieldInputEvent(n)}),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout(function(){t.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")},800),this}},$.fn.applicationmenu=function(e){return this.each(function(){var t=$.data(this,"applicationmenu");return t?t.updated(e):t=$.data(this,"applicationmenu",new is(this,e)),t})};var aa={dataset:[],selectable:!1,paging:!1,withImage:!0,pagerSettings:{pagesize:25,pagesizes:[10,25,50,75],showFirstButton:!1,showLastButton:!1},attributes:null};function Fs(e,t){return t&&(t.dataset&&(e.dataset=t.dataset),t.pagesize&&(ei("`pagerSettings.pagesize` setting","`pagesize` setting"),e.pagerSettings.pagesize=t.pagesize,delete e.pagesize),t.pagesizes&&(ei("`pagerSettings.pagesizes` setting","`pagesizes` setting"),e.pagerSettings.pagesizes=t.pagesizes,delete e.pagesizes)),e}function Hs(e,t){this.element=$(e),this.settings=_.mergeSettings(e,t,aa),this.settings=Fs(this.settings,t),this.init()}Hs.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var e=this,t=this;return this.element.on("click.".concat("blockgrid"),".block",function(n){var i=$(n.currentTarget),a=$(n.target),s=a.is(".checkbox-label")||a.is(".checkbox");setTimeout(function(){t.select(i,s)},0),n.stopPropagation(),n.preventDefault()}),this.element.on("focus.".concat("blockgrid"),".checkbox",function(n){$(n.currentTarget).parent().addClass("has-focus")}),this.element.on("blur.".concat("blockgrid"),".checkbox",function(n){$(n.currentTarget).parent().removeClass("has-focus")}),this.element.on("keypress.".concat("blockgrid"),".block",function(n){if(32===n.which){var i=$(n.target);t.select(i,!1)}}),this.element.on("updated.".concat("blockgrid"),function(){t.updated()}),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),function(){e.previousFocusedElement=!0,e.build()}).on("pagesizechange.".concat("blockgrid"),function(){e.previousFocusedElement=!0,e.build()}),this},handlePaging:function(){if(this.settings.paging){var e=_.extend({},this.settings.pagerSettings,{componentAPI:this,dataset:this.settings.dataset});this.element.addClass("paginated"),this.element.pager(e)}},selectBlock:function(e,t){return Sa(this.select,this.selectBlock).apply(this,[e,t])},select:function(e,t){var n=this.element.find(".block"),i=this.element.find(".checkbox"),a=e.find(".checkbox"),s=a.is(":checked"),o="",c=Number(a.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],n.removeClass("is-selected").removeAttr("aria-selected"),i.prop("checked",!1)),"multiple"===this.settings.selectable&&s||"mixed"===this.settings.selectable&&t&&s){e.removeClass("is-selected").removeAttr("aria-selected"),a.prop("checked",!1);for(var d=0;d<this.selectedRows.length;d++)c===this.selectedRows[d].idx&&this.selectedRows.splice(d,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!t||(s||(e.addClass("is-selected").attr("aria-selected","true"),a.prop("checked",!0)),this.selectedRows.push({idx:c,data:this.settings.dataset[c],elem:e}),o=s?"deselected":"selected"),"mixed"===this.settings.selectable&&!t){var p=e.hasClass("is-activated");return n.removeClass("is-activated"),void(p?(e.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:c,item:this.settings.dataset[c]}])):(e.addClass("is-activated"),this.element.triggerHandler("activated",[{row:c,item:this.settings.dataset[c]}])))}this.element.triggerHandler(s?"deselected":"selected",[{selectedRows:this.selectedRows,action:o}])}},render:function(){var e=this,t=this.settings,n=P?P.translate("Select"):"Select",i="",a=t.dataset;if(this.pagerAPI){var s=this.pagerAPI.state;if(s.pages>1){var o=s.activePage>0?s.activePage-1:0,c=s.pagesize*o;if((a=a.slice(c,s.pagesize*(o+1))).length!==t.dataset.length)for(var p=0;p<a.length&&!a[p].id;p++)a[p].id=c+p}}var f=[];this.selectedRows.forEach(function(G){f.push(G.idx)});for(var m=0;m<a.length;m++){var b=a[m],C="mixed"===t.selectable?"0":"-1",T="",S="";f.indexOf(b.id)>-1&&(T=" is-selected",S=" checked");var M=void 0;if(t.withImage){var L=b.imgAlt||b.imageAlt||"".concat(b.maintxt||b.title," ").concat(P.translate("Image"));M='<div class="block is-selectable'.concat(T,'" role="listitem" tabindex="0">\n          <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(m,'" tabindex="').concat(C,'" data-idx="').concat(b.id||m,'"').concat(S,'>\n          <label for="checkbox').concat(m,'" class="checkbox-label">\n            <span class="audible">').concat(n,'</span>\n          </label>\n          <img alt="').concat(L,'" src="').concat(b.img||b.image,'" class="image-round">\n          <p> ').concat(b.maintxt||b.title," <br> ").concat(b.subtxt||b.subtitle," </p>\n        </div>")}else{var z="";b.content&&b.content.forEach(function(G){z+="<br>".concat(G)}),M='<div class="block text-block is-selectable'.concat(T,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(m,'" tabindex="').concat(C,'" data-idx="').concat(b.id||m,'"').concat(S,'>\n        <label for="checkbox').concat(m,'" class="checkbox-label text-block">\n          <span class="audible">').concat(n,"</span>\n        </label>\n        <p><b>").concat(b.title,"</b>").concat(z,"</p>\n        </div>")}i+=M}if(this.element.attr("role","list").append(i),t.attributes)for(var V=0;V<a.length;V++){var N=this.element.find("#checkbox".concat(V)),U=this.element.find('.checkbox-label[for="checkbox'.concat(V,'"]'));_.addAttributes(N,this,t.attributes,"blockgrid-checkbox".concat(V)),_.addAttributes(U,this,t.attributes,"blockgrid-checkbox-label".concat(V))}this.previousFocusedElement&&setTimeout(function(){e.element.find(".block").first().focus(),delete e.previousFocusedElement},0)},renderBlock:function(){return Sa(this.render,this.renderBlock).apply(this)},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this.settings=Fs(this.settings,e),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(e){return this.each(function(){var t=$.data(this,"blockgrid");t?t.updated(e):t=$.data(this,"blockgrid",new Hs(this,e))})};var Qr={attributes:null,callback:void 0,content:"",current:!1,disabled:!1,href:void 0,id:void 0};function ks(e){return this.settings=_.mergeSettings(null,e,Qr),this.init()}ks.prototype={init:function(){return this.settings.element instanceof HTMLElement&&this.getSettingsFromElement(),this.settings.callback="function"==typeof this.settings.callback?this.settings.callback:null,this.settings.content="string"==typeof this.settings.content?$e.stripHTML(this.settings.content):"",this.settings.current=!0===this.settings.current,this.settings.disabled=!0===this.settings.disabled,this.settings.id="string"==typeof this.settings.id?$e.stripHTML(this.settings.id):void 0,this.settings.href="string"==typeof this.settings.href?$e.stripHTML(this.settings.href):void 0,this},render:function(){var e,t,n=this.element;return n||(n=document.createElement("li"),this.settings.href?(e=document.createElement("a"),n.appendChild(e)):(t=document.createElement("span"),n.appendChild(t)),this.element=n),n.classList.add("breadcrumb-item"),n},refresh:function(){var e=this.element,t=e.querySelector("a"),n=e.querySelector("span:not(.audible)"),i=t?$(t):void 0;if(this.disabled=this.settings.disabled,this.current=this.settings.current,(t||e).id="string"==typeof this.settings.id?this.settings.id:"",(t||n||e).innerHTML="string"==typeof this.settings.content?this.settings.content:"",t){if("string"==typeof this.settings.href){var a="string"==typeof this.settings.href?$e.stripHTML(this.settings.href):void 0;t.href=a,t.setAttribute("href",a)}else t.href=void 0,t.removeAttribute("href");i.hyperlink()}return n&&n.parentNode.isEqualNode(e)&&n.classList.add("breadcrumb-text"),Array.isArray(this.settings.attributes)&&_.addAttributes(i||$(e),this,this.settings.attributes),e},checkFocus:function(){var e=this.a;if(e){var t=this.overflowed;(Ie.browser.isIE11||Ie.browser.isEdge)&&(t=!1),e.tabIndex=t||this.disabled?-1:0,e.setAttribute("tabindex",e.tabIndex)}},get a(){return this.element.querySelector("a")},set current(e){var t=!0===e;this.settings.current=t,this.element.classList[t?"add":"remove"]("current")},get current(){return this.settings.current},set disabled(e){var t=!0===e;this.settings.disabled=t,this.element.classList[t?"add":"remove"]("is-disabled");var n=this.a;n&&(n.disabled=t,t?(n.setAttribute("disabled",t),n.setAttribute("aria-disabled",t)):(n.removeAttribute("disabled"),n.removeAttribute("aria-disabled")))},get disabled(){var e,t=null===(e=this.a)||void 0===e||null==e?void 0:e.getAttribute("disabled"),n=this.element.getAttribute("is-disabled");return t||n},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){var e=this.element,t=e.querySelector("a"),n=e.querySelector("span"),i=(t||n||e).getBoundingClientRect(),a=this.element.parentNode.getBoundingClientRect();return Ie.rtl?a.right<i.right:a.left>i.left},callback:function(e){if("function"!=typeof this.settings.callback)return!1;for(var t=this.settings.callback,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=t.apply(this,[e].concat(i));return s||e.preventDefault(),s},get index(){for(var e=this.element,t=0;null!==e.previousSibling;)e=e.previousSibling,t++;return t},getSettingsFromElement:function(){var e=this.settings.element,t=e.querySelector("a");function n(s){return s=s.replace('<span class="audible">Current</span>',""),$e.stripHTML(s)}t?(this.settings.content=n(t.innerHTML),this.settings.href=t.href,this.settings.id=t.id):(this.settings.content=n(e.innerHTML),e.id&&(this.settings.id=e.id));var i=!0===e.classList.contains("current"),a=t&&!0===t.classList.contains("current");this.settings.current=i||a,this.settings.disabled=!0===e.classList.contains("is-disabled"),this.element=e,this.fromElement=!0,delete this.settings.element},destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.element&&this.element.parentNode){if(!this.fromElement){var t=this.a;if(t){var n=$(t);n.off(),n.data("hyperlink").destroy()}}!e&&this.fromElement||(this.element.parentNode.removeChild(this.element),delete this.element)}}};var qs=["default","alternate"],as={breadcrumbs:[],style:qs[0],truncate:!0};function Xi(e,t){if(!(e instanceof HTMLElement))throw new Error("`element` argument must be of type `HTMLElement`");return this.element=e,this.settings=_.mergeSettings(e,t,as),this.init(),this}Xi.prototype={init:function(){var e=this;Array.isArray(this.breadcrumbs)||(this.breadcrumbs=[]);var t=this.element.querySelector("ol"),n=_.getArrayFromList(this.element.querySelectorAll("li"));t&&(this.list=t),n.length&&n.forEach(function(i){e.add({element:i})}),Array.isArray(this.settings.breadcrumbs)||(this.settings.breadcrumbs=[]),this.settings.breadcrumbs.forEach(function(i){e.add(i)}),this.element.classList.contains(qs[1])&&(this.settings.style=qs[1]),-1===qs.indexOf(this.settings.style)&&(this.settings.style=qs[0]),this.render()},render:function(){var e;this.list?(this.teardownEvents(),this.teardownBreadcrumbs()):(this.list=document.createElement("ol"),this.element.appendChild(this.list));var t=document.createDocumentFragment();if(this.breadcrumbs.forEach(function(o){if(!o.fromElement||!o.element){var c=o.render();t.appendChild(c)}}),this.canDetectResize){if(!this.overflowBtn){var n=document.createElement("div"),i=document.createElement("button"),a=document.createElement("ul"),s=document.createElement("span");n.classList.add("breadcrumb-overflow-container"),i.classList.add("btn-actions"),i.classList.add("overflow-btn"),s.innerText="More Breadcrumbs",s.classList.add("audible"),i.insertAdjacentHTML("afterbegin",$.createIcon({icon:"more"})),i.appendChild(s),n.appendChild(i),n.appendChild(a),this.overflowContainerElem=n,this.overflowBtn=i,this.overflowMenu=a}this.element.insertBefore(this.overflowContainerElem,this.list),$(this.overflowBtn).popupmenu({menu:$(this.overflowMenu),beforeOpen:function(o){var c="";this.overflowed.forEach(function(d,p){var f="",m="";d.settings.disabled&&(f=" is-disabled",m=" disabled");var b='<li class="'.concat(f,'">\n          <a href="#" data-breadcrumb-index="').concat(p,'"').concat(m,">").concat(d.settings.content||"","</a>\n        </li>");c+=b}),o(c)}.bind(this)})}null!==(e=t.childNodes)&&void 0!==e&&e?.length&&this.list.appendChild(t),this.list.setAttribute("aria-label","Breadcrumb"),this.element.classList.add("breadcrumb"),this.list.classList.add("breadcrumb-list"),this.refresh(),this.handleEvents()},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("Settings for a new breadcrumb item must be provided.");this.breadcrumbs.forEach(function(a){if(e.id&&a.id===e.id)throw new Error("New breadcrumbs must have a unique ID attribute.")});var i=new ks(e);this.breadcrumbs.push(i),n&&this.settings.breadcrumbs.push(e),t&&(this.render(),!0===i.settings.current&&this.makeCurrent(i))},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getBreadcrumbItemAPI(e);i.api.destroy(!0),this.breadcrumbs.splice(i.i,1),n&&this.settings.breadcrumbs.splice(i.i,1),t&&this.render()},removeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.breadcrumbs.forEach(function(n){n.destroy(!0)}),this.breadcrumbs=[],t&&(this.settings.breadcrumbs=[]),e?this.render():this.refresh()},makeCurrent:function(e){var t=this.getBreadcrumbItemAPI(e);this.breadcrumbs.forEach(function(n){n.current=n.element.isEqualNode(t.api.element)})},get current(){var e,t;return this.breadcrumbs.forEach(function(n){!e&&n.current&&(t=(e=n).element)}),t},set disabled(e){var t=!0===e;this.element.classList[t?"add":"remove"]("is-disabled"),this.breadcrumbs.forEach(function(n){n.disabled=t})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){return this.breadcrumbs.filter(function(e){return e.overflowed})},get canDetectResize(){return this.settings.truncate&&Ie.features.resizeObserver},handleEvents:function(){var e=this,t=this;$(this.list).on("click.".concat("breadcrumb"),"li",function(n){var i=e.getBreadcrumbItemAPI(n.currentTarget);if(i&&i.api){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];i.api.callback(n,s)}}),this.canDetectResize&&(this.previousSize=this.list.getBoundingClientRect(),this.ro=new ResizeObserver(function(){e.detectCheck&&e.detectCheck.destroy(!0),e.detectCheck=new nn({duration:1,timeoutCallback:function(){var n=t.list.getBoundingClientRect();n.width!==t.previousSize.width&&(t.previousSize=n,t.refresh(),delete t.detectCheck)}}),dt.register(e.detectCheck)}),this.ro.observe(this.list)),this.overflowBtn&&$(this.overflowBtn).on("selected.".concat("breadcrumb"),function(n){var i=arguments.length<=1?void 0:arguments[1],a=i[0].getAttribute("data-breadcrumb-index"),s=e.overflowed[Number(a)];$(s.a).trigger("click")}),this.hasEvents=!0},getBreadcrumbItemAPI:function(e){var t,n,i,a=!1;if(e instanceof ks?(t=e,n=e.element,i=this.breadcrumbs.indexOf(e)):e instanceof HTMLAnchorElement?n=e.parentNode:e instanceof HTMLLIElement?n=e:!isNaN(e)&&e>-1&&(a=!0,n=(t=this.breadcrumbs[i=e]).element),!n||t||i||this.breadcrumbs.forEach(function(o,c){o.element.isEqualNode(n)&&(t=o,i=c)}),!t){var s=a?i:n;throw new Error("No matching Breadcrumb was found by ".concat(a?"at index ":" with matching HTML List Item",' "').concat(s,'"'))}return{api:t,li:n,i}},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.teardownEvents(),this.breadcrumbs.forEach(function(t){t.refresh()}),this.element.classList["alternate"===this.settings.style?"add":"remove"]("alternate"),this.canDetectResize?this.element.classList[this.overflowed.length||this.element.scrollHeight>55?"add":"remove"]("truncated"):(this.element.classList.remove("truncated"),this.element.classList.add("no-truncate")),this.breadcrumbs.forEach(function(t){t.checkFocus()}),e&&this.handleEvents()},teardown:function(){if(this.teardownEvents(),this.teardownBreadcrumbs(),this.breadcrumbs=[],this.overflowContainerElem){var e=$(this.overflowBtn).data("popupmenu");e&&e.destroy(),this.overflowContainerElem.parentNode&&this.element.removeChild(this.overflowContainerElem)}return this},teardownEvents:function(){this.hasEvents&&(this.ro&&(this.ro.disconnect(),delete this.ro),this.overflowBtn&&$(this.overflowBtn).off(["beforeopen.".concat("breadcrumb"),"selected.".concat("breadcrumb")].join(" ")),$(this.list).off(),$(this.element).off(),delete this.hasEvents)},teardownBreadcrumbs:function(){this.breadcrumbs.forEach(function(e){e.destroy()})},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init(),this},destroy:function(){this.teardown(),$.removeData(this.element,"breadcrumb")}},$.fn.breadcrumb=function(e){return this.each(function(){var t=$.data(this,"breadcrumb");t?t.updated(e):t=$.data(this,"breadcrumb",new Xi(this,e))})};var Oo={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1,attributes:null};function Vs(e,t){this.settings=_.mergeSettings(e,t,Oo),this.element=$(e),this.init()}Vs.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var e=this.element.attr("data-block-ui"),t=this.element.attr("data-display-delay"),n=this.element.attr("data-completion-time");this.blockUI=void 0!==e?e:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:P.translate("Loading"),this.label&&this.label.text(this.loadingText));var i=void 0!==t&&!isNaN(t)&&parseInt(t,10)>20,a=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=i?t:a,this.completionTime=void 0===n||isNaN(n)?this.settings.timeToComplete:parseInt(n,10),this},activate:function(){var e=this;if(!e.isActive()){if(this.container)return e.closeTimeout&&clearTimeout(e.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var t="";if(this.blockUI&&(this.settings.transparentOverlay&&(t=" transparent"),this.originalPositionProp=this.element[0].style.position,"absolute"!==window.getComputedStyle(this.element[0],null).getPropertyValue("position")&&(this.element[0].style.position="relative"),this.overlay=$('<div class="overlay busy is-hidden'.concat(t,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var n;this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input")?(n=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element)):(n=this.element.data("dropdown").pseudoElem,this.container.appendTo(n.parent())),this.overlay&&this.overlay.insertAfter(this.container);for(var i=n.position(),a=n.outerHeight(),s=n.outerWidth(),o=this.container.add(this.overlay),c=function(f,m,b){f.style[m]="".concat(b,"px")},d=0,p=o.length;d<p;d++)c(o[d],"left",i.left),c(o[d],"top",i.top),c(o[d],"bottom",i.bottom),c(o[d],"right",i.right),c(o[d],"height",a),c(o[d],"width",s)}else this.container.appendTo(this.element);setTimeout(function(){e.container&&e.container.removeClass("is-hidden"),e.overlay&&e.overlay.removeClass("is-hidden"),e.blockUI&&e.addScrollParent()},e.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(e.isAnimating=!0,e.animateWithJS()),this.completionTime>0&&setTimeout(function(){e.element.trigger("complete")},e.completionTime),_.addAttributes(this.container,this,this.settings.attributes),_.addAttributes(this.container.find(".busy-indicator.active"),this,this.settings.attributes,"busyindicator"),_.addAttributes(this.container.find("span"),this,this.settings.attributes,"text"),_.addAttributes(this.overlay,this,this.settings.attributes,"overlay")}},close:function(e){var t=this;t.isActive()&&(this.removeScrollParent(),e&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),t.closeTimeout=setTimeout(function(){clearTimeout(t.closeTimeout),t.container&&t.container.remove(),t.container=void 0,t.loader=void 0,t.label=void 0,t.overlay&&(t.overlay.remove(),t.element[0].style.position=t.originalPositionProp,t.originalPositionProp=void 0),t.overlay=void 0,t.element.trigger("aftercomplete.busyindicator"),t.element.off("complete.busyindicator"),t.element.trigger("hide.busyindicator")},600))},animateWithJS:function(){var e=this,t=this.container.find(".bar.one"),n=this.container.find(".bar.two"),i=this.container.find(".bar.three"),a=this.container.find(".bar.four"),s=this.container.find(".bar.five"),o=0;setInterval(function(){e.isAnimating?(1===(o+=1)&&t.addClass("half"),13===o&&(t.removeClass("half").addClass("full"),n.addClass("half")),26===o&&(t.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),i.addClass("half")),39===o&&(t.removeClass("half"),n.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),a.addClass("half")),51===o&&(n.removeClass("half"),i.removeClass("full").addClass("half"),a.removeClass("half").addClass("full"),s.addClass("half")),64===o&&(i.removeClass("half"),a.removeClass("full").addClass("half"),s.removeClass("half").addClass("full")),77===o&&(a.removeClass("half"),s.removeClass("full").addClass("half")),90===o&&s.removeClass("half"),103===o&&(o=0)):clearInterval(null)},10)},addScrollParent:function(){var e=this;if(this.blockUI){var t=this.element[0];this.scrollParent=$(this.getScrollParent(t));var n,i=this.scrollParent[0],a=i?i.offsetHeight:0;this.overlay&&this.overlay[0]&&(n=window.getComputedStyle(this.overlay[0],null).getPropertyValue("position"));var s="absolute"===n;if(a&&this.container&&a<=t.offsetHeight){var o=window.innerHeight||document.documentElement.clientHeight,c=a/2-58,d=function(){if(s&&e.element.is(i)){var p=t.scrollTop;e.overlay.css({top:p}),e.container.css({top:c+p})}else if(_.isInViewport(i)&&(T=i).scrollHeight>=T.clientHeight&&T.clientHeight<o-60)e.container[0].offsetHeight&&e.container.css({top:c+i.scrollTop});else{var f=0,m=0,b=t.getBoundingClientRect();if(b.top<0){var C=b.height+b.top;f=C>o?o:C,m=b.top}else f=o-b.top;e.container.css({top:(f-85)/2-m})}var T};d(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",function(){e.container&&d()})}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(e){var t=["overflow","overflow-x","overflow-y"],i=/(auto|scroll)/,a=function(s){return i.test(function(s){return t.reduce(function(o,c){return o+(p=c,getComputedStyle(s,null).getPropertyValue(p));var p},0)}(s))};return function(s){for(var o=!1,c=s;!o&&c&&c.tagName&&"body"!==c.tagName.toLowerCase();){if(a(c)){o=!0;break}c=c.parentNode}return o?c:null}(e)},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function(){var e=this;return this.element.on("start.busyindicator",function(t){t.stopPropagation(),e.activate()}).on("afterstart.busyindicator",function(){e.element.on("complete.busyindicator",function(t){t.stopPropagation(),e.close(!0)})}).on("updated.busyindicator",function(){e.close(!0),e.updated()}),this}},$.fn.busyindicator=function(e){return this.each(function(){var t=$.data(this,"busyindicator");t?t.updated(e):t=$.data(this,"busyindicator",new Vs(this,e))})};var Bo={dataset:[],template:null,selectable:!1,expandableHeader:!1,verticalButtonAction:!1,attributes:null};function yr(e,t){this.settings=_.mergeSettings(e,t,Bo),this.element=$(e),this.init()}yr.prototype={init:function(){this.selectedRows=[],this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-card-".concat($("body").find(".card").index(this.element)),this.element.attr("id",this.id)),this.settings.expandableHeader&&(this.element.addClass("expandable-card"),this.expandableCardHeader=this.element.children(".card-header").addClass("expandable-card-header")),this.cardHeader=this.element.children(".card-header"),this.cardContentPane=this.element.children(".card-pane"),this.buttonAction=this.cardHeader.children(".btn-actions"),!1!==this.settings.selectable&&(this.cards=this.element),this},build:function(){var e=this,t=this.element.hasClass("is-expanded"),n=P?P.translate("Select"):"Select",i="single"===this.settings.selectable;if(this.renderTemplate(),!1!==this.settings.selectable&&(this.cards.find(".card").addClass("is-selectable"),this.cards.addClass(i?"single":"multiple"),this.element.attr("role","list"),this.element.find(".card").attr({role:"listitem",tabindex:"0"})),"multiple"===this.settings.selectable&&this.cards.find(".card").each(function(s){$(this).find(".card-content").prepend('\n          <input type="checkbox" id="checkbox-'.concat(s,'" aria-hidden="true" tabindex="0" role="presentation"\n            class="checkbox">\n            <label for="checkbox-').concat(s,'" class="checkbox-label">\n              <span class="audible">').concat(n,"</span>\n            </label>\n        "))}),this.cardContentPane.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.settings.expandableHeader&&this.expandableCardHeader&&this.expandableCardHeader.attr("role","button"),this.buttonAction.length>0&&this.settings.verticalButtonAction&&this.buttonAction.addClass("vertical"),t&&(this.cardContentPane.addClass("no-transition"),this.element.one("afterexpand.expandable-card",function(){e.cardContentPane.removeClass("no-transition")}),this.open()),t||(this.cardContentPane.addClass("no-transition"),this.element.one("aftercollapse.expandable-card",function(){e.cardContentPane.removeClass("no-transition")}),this.close()),this.settings.expandableHeader||_.addAttributes(this.cardHeader,this,this.settings.attributes,"header",!0),_.addAttributes(this.element,this,this.settings.attributes,"card",!0),_.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"card-content",!0),this.settings.selectable||(_.addAttributes(this.expandableCardHeader,this,this.settings.attributes,"expander",!0),_.addAttributes(this.buttonAction,this,this.settings.attributes,"action",!0),_.addAttributes(this.cardContentPane,this,this.settings.attributes,"content",!0)),"multiple"===this.settings.selectable){var a=this;setTimeout(function(){e.cards.find(".card").each(function(s){var o=$(this);_.addAttributes(o.find(".checkbox-label"),a,a.settings.attributes,"checkbox-label-".concat(s),!0),_.addAttributes(o.find(".card-content .checkbox"),a,a.settings.attributes,"checkbox-".concat(s),!0)})},1)}return P.isRTL()&&this.removeInfoIconTooltip(),this},removeInfoIconTooltip:function(){if(this.element.hasClass("card")){var e=this.element.width()<=360;this.cardHeader.find("> .icon").css("display","".concat(e?"none":""))}},select:function(e){var t=this.element.find(".card"),n=e.find(".checkbox"),i=e.hasClass("is-selected"),a="";if("single"===this.settings.selectable&&(this.selectedRows=[],t.removeClass("is-selected").removeAttr("aria-selected")),"multiple"===this.settings.selectable&&i)return e.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1),void this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}]);!1!==this.settings.selectable&&(e.addClass("is-selected").attr("aria-selected","true"),"multiple"===this.settings.selectable&&n.prop("checked",!0),this.selectedRows.push({data:this.settings.dataset,elem:e}),a=i?"deselected":"selected"),this.element.triggerHandler(i?"deselected":"selected",[{selectedRows:this.selectedRows,action:a}])},renderTemplate:function(){if(this.settings.template){var e=this.settings;"object"===Ge(ui)&&e.dataset&&this.settings.template&&(this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(at.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())));var t=ui.compile(this.settings.template,{dataset:e.dataset});e.dataset.length>0?this.cards.html(t):0===e.dataset.length&&this.cards.html(t||'<div class="cards auto-height"></div>')}},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},isDisabled:function(){return this.element.hasClass("is-disabled")},open:function(){var e=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),this.expandableCardHeader.attr("aria-expanded","true"),this.element.triggerHandler("expand",[this.element]),this.cardContentPane[0]&&(this.cardContentPane[0].style.display="block"),this.cardContentPane.one("animateopencomplete",function(){e.element.triggerHandler("afterexpand",[e.element])}).animateOpen({timing:300}))},close:function(){var e=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.element.triggerHandler("collapse",[this.element]),this.cardContentPane.one("animateclosedcomplete",function(){e.element.removeClass("is-expanded"),e.expandableCardHeader.attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.cardContentPane[0].style.display="none"}).animateClosed({timing:300}))},handleEvents:function(){var e,t=this,n=this;return null===(e=this.expandableCardHeader)||void 0===e||null==e||e.on("click.cards",function(i){n.isDisabled()||(i.preventDefault(),n.toggleExpanded())}),!1!==this.settings.selectable&&this.element.on("click.".concat("cards"),".card",function(i){var a=$(i.currentTarget),s=$(i.target).is(".checkbox");setTimeout(function(){n.select(a,s)},0),i.stopPropagation(),i.preventDefault()}),$("body").on("resize.card",function(){P.isRTL()&&t.removeInfoIconTooltip()}),this},teardown:function(){var e;return this.element.off("click.".concat("cards")),null===(e=this.expandableCardHeader)||void 0===e||null==e||e.off("click.cards"),this.expandableCardHeader=null,$("body").off("resize.card"),this.selectedRows=[],this.cardContentPane.off(),this.cardContentPane=null,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"cards")}},$.fn.cards=function(e){var t=$(this),n=t.attr("data-dataset"),i=t.attr("data-tmpl"),a=_.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var s=_.extend({},e,a);return this.each(function(){var o=$.data(this,"cards");o?o.updated(s):o=$.data(this,"cards",new yr(this,s))})},$.fn.popover=function(e){return this.each(function(){var t=$.data(this,"popover");t?t.updated(e):t=$.data(this,"popover",new Bs(this,e))})};var de={destroy:function(e){var t,n;null===(t=e[0])||void 0===t||(n=t?.classList).remove.apply(n,["line-chart","bar-chart","bar-chart-stacked","bar-chart-grouped","bubble","column-chart","completion-chart","chart-completion-target-padding","chart-pie","has-right-legend"])},tooltip:{}};de.isIE="ie"===Ie.browser.name,de.isIEEdge="edge"===Ie.browser.name,de.tooltipSize=function(e){return ue.html(this.tooltip.find(".tooltip-content"),e,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},de.formatToSettings=function(e,t){var n=e.data?e.data:e,i=t.formatter&&".0f"!==t.formatter?d3.format(t.formatter)(n.percent):"".concat(isNaN(n.percentRound)?0:n.percentRound,"%");return"value"===t.show?t.formatter?d3.format(t.formatter)(n.value):n.value:"label"===t.show?n.name:"label (percent)"===t.show?"".concat(n.name," (").concat(i,")"):"label (value)"===t.show?"".concat(n.name," (").concat(t.formatter?d3.format(t.formatter)(n.value):n.value,")"):"percent"===t.show?i:"function"==typeof t.show?t.show(n):n.value},de.appendTooltip=function(e){var t=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(e=e?" ".concat(e):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(e,'">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",function(){t.hideTooltip()})))},de.hideTooltip=function(){var e=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",function(){e.hideTooltip()})},de.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},de.colorRange=function(){var e=mt.themeColors().palette;return mt.new?[e.azure[80].value,e.turquoise[40].value,e.amethyst[60].value,e.graphite[40].value,e.amber[40].value,e.emerald[70].value,e.ruby[60].value,e.azure[30].value,e.amber[70].value,e.graphite[60].value,e.turquoise[60].value,e.emerald[90].value,e.amethyst[30].value,e.azure[50].value,e.ruby[30].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[80].value,e.graphite[20].value,e.amber[90].value]:[e.azure[70].value,e.turquoise[30].value,e.amethyst[30].value,e.graphite[60].value,e.amber[50].value,e.emerald[60].value,e.ruby[60].value,e.azure[30].value,e.amber[90].value,e.turquoise[80].value,e.ruby[20].value,e.graphite[50].value,e.emerald[50].value,e.azure[50].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[50].value,e.amber[70].value,e.graphite[20].value,e.azure[20].value]},de.colorNameRange=function(){return mt.new?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},de.chartColor=function(e,t,n){var i=de.colorRange(),a=n&&n.color?n.color:null;if(a){if("error"===a)return mt.themeColors().status.danger.value;if("alert"===a)return mt.themeColors().status.warning.value;if("alertYellow"===a)return mt.themeColors().status.caution.value;if("good"===a)return mt.themeColors().status.success.value;if("neutral"===a)return mt.themeColors().palette.graphite[30].value;if("info"===a)return mt.themeColors().palette.azure[70].value;if(a){if(0===a.indexOf("#"))return n.color;var s=a.slice(-2);if(/\d/.test(s)){var o=a.slice(0,a.length-2);return mt.themeColors().palette[o][10*parseInt(s,10)].value}}}return/^(pie|donut)$/.test(t)?i[e]:/^(bar-single|column-single)$/.test(t)?i[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?i[e]:""},de.chartColorName=function(e,t,n){var i=n&&n.color?n.color:null;return i?"error"===i?"alert01":"alert"===i?"alert02":"alertYellow"===i?"alert03":"good"===i?"alert04":"neutral"===i?"graphite03":"info"===i?"azure07":n.color:/^(pie|donut)$/.test(t)?this.colorNameRange()[e]:/^(bar-single|column-single)$/.test(t)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?this.colorNameRange()[e]:""},de.showTooltip=function(e,t,n,i,a){var s,o,c=this;e<0&&(e=2),this.tooltip[0].style.left="".concat(e,"px"),this.tooltip[0].style.top="".concat(t,"px"),ue.html(this.tooltip.find(".tooltip-content"),n,"*"),this.tooltip.removeClass("bottom top left right").addClass(i),this.tooltip.css("max-width",(null==a||null===(s=a?.tooltip)||void 0===s||null==s?void 0:s.maxWidth)||""),this.tooltip.find(".arrow").css("left",(null==a||null===(o=a?.arrow)||void 0===o||null==o?void 0:o.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){c.hideTooltip()}),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){c.hideTooltip()})},de.addLegend=function(e,t,n,i){var a,s=this;if(0!==e.length){var o,c,d=0,p=0;for(a=0;a<e.length;a++)o=e[a].name?6*e[a].name.length:6,d=e[a].name&&o>d?o:d,(p+=o)/$(i).width()*100<=45&&(c=a+1);var f=(d+=55)/$(i).width()*100>45,m=e[0].placement&&"bottom"===e[0].placement;m&&f||(c=e.length),m&&$(i).hasClass("has-right-legend")&&$(i).removeClass("has-right-legend");var b=e[0].display&&"twocolumn"===e[0].display,C=b?$('<div class="chart-legend '.concat(e[0].placement&&!m?"is-".concat(e[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');for("pie"!==t&&"donut"!==t||!n.showMobile||(C=$('<div class="chart-legend"><div class="container"></div></div>')),a=0;a<c;a++)if(e[a].name){var T="";(b||e[a].display&&"block"===e[a].display)&&(T+=" lg"),"column-positive-negative"===n.type&&e[a].option&&(T+=" ".concat(e[a].option));var S='<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(T,'" tabindex="').concat(null!=n&&n?.selectable?0:-1,'" role="button"></span>'),M=de.chartColor(a,t||(1===e.length?"bar-single":"bar"),e[a]),L=de.chartColorName(a,t||(1===e.length?"bar-single":"bar"),e[a]),z="";"#"===L.substr(0,1)?(z=$('<span class="chart-legend-color"></span>'),e[a].pattern||z.css("background-color",M)):z=$('<span class="chart-legend-color '.concat(e[a].pattern?"":L,'"></span>')),"scatterplot"===t&&(z=$('<span class="chart-legend-color"></span>'));var V=$('<span class="chart-legend-item-text">'.concat($e.stripTags(e[a].name),"</span>"));if(e[a].pattern&&(z.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(e[a].pattern,')"/></svg>')),z.find("rect").css("fill",M)),e[a].percent){var N=$('<span class="chart-legend-percent"></span>').text(e[a].percent);V.append(N)}e[a].display&&"block"===e[a].display&&(S='<span class="chart-legend-item'.concat(T,'" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>')),b&&(S=f&&m?'<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(T,' is-one-line" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>'):'<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(T,' is-two-column" tabindex="').concat(n.selectable?0:-1,'" role="button"></span>')),(S=$(S)).append(z,'<span class="audible">'.concat(P.translate("Highlight"),"</span>"),V);var U,G,Z="legend-".concat(a);_.addAttributes(S,e[a],n.attributes?n.attributes:null===(U=e[a])||void 0===U||null===(G=U?.data)||void 0===G||null==G?void 0:G.attributes,Z,!0),"pie"!==t&&"donut"!==t||!n.showMobile?C.append(S):C.find(".container").append(S),(e[a].display&&"block"===e[a].display||b&&f&&m)&&S.css({float:"none",display:"block",margin:"0 auto",width:"".concat(d,"px")}),"scatterplot"===t&&(self.svg=d3.select(z[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type(function(){return d3.symbols[a]})).style("fill",M)),innerWidth<=480&&e[a].data&&e[a].data.legendAbbrName&&V.replaceWith('<span class="chart-legend-item-text">'.concat(e[a].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&e[a].data&&e[a].data.legendShortName&&V.replaceWith('<span class="chart-legend-item-text">'.concat(e[a].data.legendShortName,"</span>"))}if(C instanceof $){var oe=/^chart-legend-(.+)/;if(C.on("click.chart",".chart-legend-item",function(){var nt=$(this).attr("index-id").match(oe)[1];de.handleElementClick(nt,this,e,n)}).on("keypress.chart",".chart-legend-item",function(nt){if(13===nt.which||32===nt.which){var ot=$(this).attr("index-id").match(oe)[1];de.handleElementClick(ot,this,e,n)}}),m&&f&&e.length>c){for(var le=$('\n      <button class="btn-actions list-button" type="button">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation" style="min-height: 0">\n          <use href="#icon-bullet-steps"></use>\n        </svg>\n      </button>\n      '),re=$('<ul class="popupmenu"></ul>'),J=c;J<e.length;J++){var ce=$('<li><a index-id="chart-legend-'.concat(J,'" href="#"><div class="chart-popup-menu"></div></a></li>')),ke=$('<span class="chart-popup-menu-text">'.concat($e.stripTags(e[J].name),"</span>")),_e=de.chartColor(J,t||(1===e.length?"bar-single":"bar"),e[J]),Oe=de.chartColorName(J,t||(1===e.length?"bar-single":"bar"),e[J]),Qe="";"#"===Oe.substr(0,1)?(Qe=$('<span class="chart-popup-menu-color"></span>'),e[a].pattern||Qe.css("background-color",_e)):Qe=$('<span class="chart-popup-menu-color '.concat(e[a].pattern?"":Oe,'"></span>')),ce.find("div").append(Qe,ke),re.append(ce)}C.css({"min-height":"40px","max-height":"50px",display:"flex"}),$(i).addClass("auto-height"),C.append(le),$(i).append(C),re.insertAfter(le),le.popupmenu({menu:re}),le.on("selected",function(nt,ot){var Ze=$(ot[0]).attr("index-id").match(oe)[1];de.handleElementClick(Ze,s,e,n)})}else $(i).append(C)}}},de.handleElementClick=function(e,t,n,i){var a,s,o=$(null==i||null===(a=i?.svg)||void 0===a||null==a?void 0:a.node()).closest(".chart-container").data("chart"),c=null==o||null==o?void 0:o.initialSelectCall,d=n[e];if("radar"===i.type&&(s=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[e])),"pie"===i.type||"donut"===i.type?s=d3.select(i.svg.selectAll(".slice").nodes()[e]):/positive-negative/.test(i.type)?s=i.svg.select(!d.option||d.option&&"target"===d.option?".target-bar":".bar.".concat(d.option)):-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&(i.isGrouped||i.isSingle?s=i.svg.select(".series-".concat(e)):i.isStacked&&!i.isSingle&&(s=d3.select(i.svg.selectAll("bar"===i.type||"bar-stacked"===i.type||"bar-normalized"===i.type?".series-group":".g").nodes()[e]).select(".bar"))),-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&null!=i&&i?.selectable){var p=$(t),f="true"===p.attr("aria-pressed");de.clickedLegend=!0,s.dispatch("click"),p.parent().find("[aria-pressed]").removeAttr("aria-pressed"),f||p.attr("aria-pressed","true")}d.selectionObj&&null!=i&&i?.selectable&&de.selectElement(d3.select(d.selectionObj.nodes()[e]),d.selectionInverse,d.data,void 0,i.dataset,c)},de.selected=[],de.clearSelected=function(e){if(e){var t=function(n){Object.prototype.hasOwnProperty.call(n,"selected")&&delete n.selected};!function n(i){Array.isArray(i)&&i.forEach(function(a){t(a),a.data&&n(a.data)}),t(i)}(e)}},de.selectElement=function(e,t,n,i,a,s){var o=e.node()&&e.classed("is-selected");de.clearSelected(a),o||(n.selected=!0);var c=[{elem:e.nodes(),data:o?{}:n}];t.classed("is-selected",!1).classed("is-not-selected",!o),e.classed("is-not-selected",!1).classed("is-selected",!o),de.selected=$.isEmptyObject(c[0].data)?[]:c,s||$(i).triggerHandler("selected",[c])},de.setSelectedElement=function(e){var t,n=e.dataset,i=/positive-negative/.test(e.type),a=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(e.type),s="pie"===e.type||"donut"===e.type,o=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(e.type),c=e.svg,d=e.isSingle,p=e.isGrouped,f=e.isStacked,m="selected"===e.task,b=d3.select(e.selector),C=b.classed("positive"),T=e.svg.selectAll(".axis.x .tick"),S=e.svg.selectAll(".axis.y .tick"),M=e.svg.selectAll(".bartext.positive, .target-bartext.positive"),L=e.svg.selectAll(".bartext.negative, .target-bartext.negative"),z=e.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),V=d3.select(e.selector.parentNode),N=parseInt(V.node()?V.attr("data-group-id"):0,10),U=[],G=[];if(n=f||s?n||null:n&&n[N]?n[N].data||n[N]:null,T.style("font-weight","normal"),S.style("font-weight","normal"),M.style("font-weight","normal"),L.style("font-weight","normal"),c.selectAll(".is-selected").classed("is-selected",!1),de.clearSelected(e.dataset),s&&c.selectAll(".is-not-selected").classed("is-not-selected",!1),i&&Object.prototype.hasOwnProperty.call(e.dataset[0],"targetBarsSelected")&&delete e.dataset[0].targetBarsSelected,m)if(c.selectAll(".bar, .target-bar").style("opacity",.6),de.clickedLegend&&!s)i?(e.isTargetBar?(e.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),z.style("font-weight","bolder"),e.dataset[0].targetBarsSelected=!0):(e.svg.selectAll(C?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(C?M:L).style("font-weight","bolder")),c.selectAll(".bar").each(function(re,J){var ce=d3.select(this);if(ce.classed("is-selected")){var ke=n?n[J]:re;ke.selected=!0,G.push({elem:ce.node(),bardata:ke})}}),U=G):(o||a)&&(p||d?e.svg.selectAll(".series-"+e.i).classed("is-selected",!0).style("opacity",1):V.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),c.selectAll(".bar.is-selected").each(function(re,J){var ce=d3.select(this);(t=e.dataset)||(t=re),a&&!f?p?t=e.dataset[J].data[e.i]:(t[J][e.i]&&(t=t[J][e.i]),t[e.i]&&t[e.i][J]&&(t=t[e.i][J]),t[J]&&t[J][e.i]&&(t=t[J][e.i])):f&&!d?(t[N]&&t[N].data[J]&&(t=t[N].data[J]),a&&(e.dataset[N].selected=!0)):(t[J].data[e.i]&&(t=t[J].data[e.i]),t[e.i]&&t[e.i].data[J]&&(t=t[e.i].data[J]),t[J]&&t[J].data[e.i]&&(t=t[J].data[e.i])),t.selected=!0,G.push({elem:ce.node(),data:t})}),U=G);else if(d&&f&&o)t=n[0]&&n[0].data?n[0].data:e.d,b.classed("is-selected",!0).style("opacity",1),U.push({elem:b.nodes(),data:t[e.i]});else if(!d&&!p||f||!o&&!a){if(o||a){var Z="bar"===e.type?"g[role=listitem]:nth-child(".concat(e.i+1,") .bar"):".bar:nth-child(".concat(e.i+1,")");c.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat(e.i+2,")")).style("font-weight","bolder"),c.selectAll("".concat(Z)).classed("is-selected",!0).style("opacity",1),c.selectAll(".bar.is-selected").each(function(re,J){var ce=d3.select(this),ke=re;n&&(ke=a&&f&&void 0!==n[J][e.i]?n[J][e.i]:n[J].data[e.i]),ke.selected=!0,G.push({elem:ce.nodes(),data:ke,index:e.i})}),U=G}else if(s){c.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var oe=n&&n[0]&&n[0].data?n[0].data[e.i]:e.d?e.d.data:e.d;(oe=oe||{}).selected=!0,b.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),U.push({elem:b.nodes(),data:oe,index:e.i})}}else{if(c.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat((p?N:e.i)+2,")")).style("font-weight","bolder"),b.classed("is-selected",!0).style("opacity",1),i){var le=e.isTargetBar?e.i:e.i-e.dataset[0].data.length;c.select(".target-bar.series-".concat(le)).classed("is-selected",!0).style("opacity",1),c.select(".bar.series-".concat(le)).classed("is-selected",!0).style("opacity",1),d3.select(c.selectAll(".bartext").nodes()[le]).style("font-weight","bolder"),d3.select(c.selectAll(".target-bartext").nodes()[le]).style("font-weight","bolder")}(p||i||o)&&((!i&&!o||o&&p)&&V.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),V.selectAll(".bar").each(function(re,J){var ce=d3.select(this);if(ce.classed("is-selected")){var ke=n?n[J]:re;ke.selected=!0,G.push({elem:ce.nodes(),data:ke,index:J})}}),p?U.push({groupIndex:N,groupElem:V.nodes()[0],groupItems:G}):U=G)}else c.selectAll(".bar, .target-bar").style("opacity",1),M.style("font-weight","bolder"),L.style("font-weight","bolder"),s&&b.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");de.clickedLegend&&(de.clickedLegend=!1),de.selected=U,e.isTrigger&&$(e.container).triggerHandler(m?"selected":"unselected",[U])},de.setSelected=function(e,t,n){if(e){var i,a,s,o,c,d=0,p=_.equals,f=n.isPie?n.svg.node().nextSibling:n.svg.node().parentNode.nextSibling,m=d3.select(f),b=m.node()&&m.classed("chart-legend"),C=function(T){var S=!!T;(T=S?d3.select(T):n.svg).selectAll(".bar").each(function(M,L){M&&d<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===M[e.fieldName]||void 0!==e.index&&e.index===L||e.data&&p(e.data,n.chartData[M.index].data[L])||e.elem&&$(this).is(e.elem))&&(d++,a=d3.select(this),i=L,S&&!n.isStacked&&(s=!0))})};n.isGrouped||n.isStacked&&!n.isSingle?(n.chartData.forEach(function(T,S){d<1&&(o=$(n.svg.select('[data-group-id="'+S+'"]').node()),(void 0!==e.groupName&&void 0!==e.groupValue&&e.groupValue===T[e.groupName]||void 0!==e.groupIndex&&e.groupIndex===S||e.data&&p(e.data,T)||e.elem&&o.is(e.elem))&&void 0===e.fieldName&&void 0===e.fieldValue&&void 0===e.index&&(d++,a=n.svg.select('[data-group-id="'+S+'"]').select(".bar"),i=S,n.isStacked&&!n.isGrouped&&(s=!0)))}),d<1&&(c=n.svg.selectAll(".series-group")).nodes().length&&c.each(function(){C(this)})):C(),d>0&&(t||!a.classed("is-selected"))&&(s?b&&$(m.selectAll(".chart-legend-item").nodes()[i]).trigger("click.chart"):a.dispatch("click"))}},de.labelsColide=function(e){var t=e.selectAll(".x text"),n=!1;return t.each(function(i,a){var s,o=this.getBoundingClientRect();t.each(function(c,d){a!==d&&(s=this.getBoundingClientRect(),!(o.right<s.left||o.left>s.right||o.bottom<s.top||o.top>s.bottom)&&(n=!0))})}),n},de.applyAltLabels=function(e,t,n,i,a){e.selectAll(i||".x text").each(function(s,o){var c=t[o]?t[o][n]:"";c=c||(a?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(c)})},de.triggerContextMenu=function(e,t,n){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var i=$.Event("contextmenu");i.target=t,i.pageX=d3.event.pageX,i.pageY=d3.event.pageY,$(e).trigger(i,[t,n])},de.calculateTextRenderWidth=function(e,t){var n;t=_.mergeSettings(void 0,t,{soho:"700 12px arial",uplift:"600 14px arial",classic:"700 12px arial",new:"600 14px arial"});var i=((null==mt||null===(n=mt?.currentTheme)||void 0===n||null==n?void 0:n.id)||"").match(/soho|uplift|new|classic/);i=i?i[0]:"new",this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var a=this.canvas.getContext("2d");return a.font=t[i],a.measureText(e).width},de.calculatePercentage=function(e,t){return 100*e/t},de.getPercentage=function(e,t){return e*t/100},de.trimText=function(e,t){return e.length<=t?e:"".concat(e.substr(0,t),"...")},de.getLabel=function(e,t){var n=e.name;return t.xxsmall||t.xsmall||t.small?n=e.shortName||e.abbrName||e.name:t.medium&&(n=e.abbrName||e.name),n},de.wrap=function(e,t,n){n||(n=1.27),t||(n=60),e.each(function(){var i=d3.select(this),a=i.text().split(/\s+/).reverse(),s="",o=[],c=0;if(!(a.length<=1))for(var d=n,p=i.attr("y"),f=i.attr("x"),m=parseFloat(i.attr("dy")),b=i.text(null).append("tspan").attr("x",f).attr("y",p).attr("dy","".concat(m,"em"));s=a.pop();)o.push(s),b.text(o.join(" ")),b.node().getComputedTextLength()>t&&(o.pop(),b.text(o.join(" ")),o=[s],b=i.append("tspan").attr("x",f).attr("y",p).attr("dy","".concat(++c*d+m,"em")).text(s))})};var y={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function E(e,t){this.settings=_.mergeSettings(e,t,y),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}E.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e=this,t=this.settings.dataset[0],n=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var i=0,a=[],s=t.data[0]?t.data[0].tooltip:[],o=!1,c=this.element.parent(),b=c.width()-40-35,C=c.height()-30-35-30;C=C<0?50:C;for(var T=d3.select(this.element[0]).append("svg").attr("width",b+40+35).attr("height",C+30+35).append("g").attr("transform","translate(".concat(40,",").concat(30,")")),S=function(U,G,Z){function oe(le,re,J){var ce=le(re,J);return void 0!==ce?ce:re}return t.format&&"function"==typeof t.format[U]?oe(t.format[U],G,Z):t.format&&"string"==typeof t.format[U]?d3.format(t.format[U])(G):e.settings.format&&"function"==typeof e.settings.format[U]?oe(e.settings.format[U],G,Z):e.settings.format&&"string"==typeof e.settings.format[U]?d3.format(e.settings.format[U])(G):G},M=function(U,G){return S("ranges",U,G)},z=1===t.data.length,V=function(U){var G=e.settings.animate?400:0,Z=e,oe=t.data[U],le=oe.ranges.slice().sort(d3.descending),re=oe.markers?oe.markers.slice().sort(d3.descending):[],J=oe.measures?oe.measures.slice().sort(d3.descending):[],ce=oe.ranges.slice().sort(d3.ascending),ke=oe.markers?oe.markers.slice().sort(d3.ascending):[],_e=oe.measures?oe.measures.slice().sort(d3.ascending):[],Oe=z?"":"-group".concat(U);0===re.length&&(re=J,ke=_e,o=!0);var Qe=T.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*U,")"));Qe.append("g").append("text").attr("class","title").attr("dy","-10px").text(function(){return oe.title}).call(function(ze){_.addAttributes($(ze._groups[0][0]),t,t.attributes,"title".concat(Oe))}).append("tspan").attr("class","subtitle").attr("dx","15px").text(function(){return oe.subtitle}).call(function(ze){_.addAttributes($(ze._groups[0][0]),t,t.attributes,"subtitle".concat(Oe))});var nt=Math.max(le[0],re[0],J[0]),ot=Math.min(ce[0],ke[0],_e[0]);ot=ot<0?ot:0;var Ze,ft,Wt=d3.scaleLinear().domain([ot,nt]).range([0,b]).nice(),xt=(ft=(Ze=Wt)(0),function(ze){return Math.abs(Ze(ze)-ft)}),jt=Qe.selectAll("rect.range").data(le),Ut=!1,en=0;Z.element.off("dblclick.".concat(Z.namespace)).on("dblclick.".concat(Z.namespace),"*",function(ze){ze.stopImmediatePropagation()}),jt.enter().append("rect").call(function(ze){ze._groups.forEach(function(Et){Et.forEach(function(vn,Lt){_.addAttributes($(vn),t,t.attributes,"range".concat(Lt).concat(Oe))})})}).attr("class",function(ze,Et){return"range s".concat(Et)}).attr("data-idx",U).attr("width",0).attr("x",function(ze){return Wt(ze<0?ze:0)}).style("fill",function(ze,Et){return t.barColors?t.barColors[Et]:""}).attr("height",20).on("click.".concat(Z.namespace),function(){var ze=d3.select(this);en=setTimeout(function(){Ut||Z.element.trigger("selected",[ze,t.data[ze.attr("data-idx")]]),Ut=!1},200)}).on("dblclick.".concat(Z.namespace),function(){var ze=d3.select(this);clearTimeout(en),Ut=!0,Z.element.trigger("dblclick",[ze,t.data[ze.attr("data-idx")]])}).on("mouseenter.".concat(Z.namespace),function(ze,Et){var vn=d3.select(this),Lt=t.data[vn.attr("data-idx")],Nn=this.getBoundingClientRect(),Gt="<p>".concat(M(ze,Et),"</p>"),Fn=function(){var $n=de.tooltipSize(Gt),Hn=Nn.left+Nn.width-$n.width/2,ki=Nn.top-$n.height+$(window).scrollTop()-5;""!==Gt&&(de.tooltip&&de.tooltip.length&&de.tooltip[n?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(Hn,ki,Gt,"top"))};if(Lt.tooltip&&Lt.tooltip[Et]&&(Gt=Lt.tooltip[Lt.tooltip.length-Et-1]),s&&"function"==typeof s&&!a[Et]){Gt="";var ni=!0;i=setInterval(function(){ni&&(ni=!1,s(function($n){Gt=$n,a[U]=$n})),""!==Gt&&(clearInterval(i),Fn())},10)}else s="object"===Ge(s)?"":s,Gt=a[U]||s||Gt||"",Fn()}).on("mouseleave.".concat(Z.namespace),function(){clearInterval(i),de.hideTooltip()}).on("contextmenu.".concat(Z.namespace),function(ze){de.triggerContextMenu(Z.element,d3.select(this).nodes()[0],ze)}).merge(jt).transition().duration(G).attr("width",xt);var gn=Qe.selectAll("rect.measure").data(J);gn.enter().append("rect").call(function(ze){ze._groups.forEach(function(Et){Et.forEach(function(vn,Lt){_.addAttributes($(vn),t,t.attributes,"measure".concat(Lt).concat(Oe))})})}).attr("class",function(ze,Et){return"measure s".concat(Et)}).attr("width",0).attr("height",3).attr("x",function(ze){return Wt(ze<0?ze:0)}).style("fill",function(ze,Et){return t.lineColors?t.lineColors[Et]:""}).attr("y",8.5).merge(gn).transition().duration(G).attr("width",xt);var Pn=1===re.length,Dt=Qe.selectAll("line.marker").data(re);Dt.enter().append("line").call(function(ze){ze._groups.forEach(function(Et){Et.forEach(function(vn,Lt){var Nn=Pn?"marker".concat(Oe):"marker".concat(Lt).concat(Oe);_.addAttributes($(vn),t,t.attributes,Nn)})})}).attr("class",o?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",function(ze,Et){return t.markerColors?t.markerColors[Et]:""}).attr("y1",20/6).attr("y2",100/6).merge(Dt).transition().duration(G).attr("x1",Wt).attr("x2",Wt).attr("y1",20/6).attr("y2",100/6);var Be=(re[0]>J[0]?"-":"+")+Math.abs(re[0]-J[0]);0!==Math.abs(re[0]-J[0])&&Dt.enter().append("text").call(function(ze){_.addAttributes($(ze._groups[0][0]),t,t.attributes,"difference".concat(Oe))}).attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",de.isRTL?"-20px":"20px").attr("x",0).text(function(U){return S("difference",U)}(Be)).merge(Dt).transition().duration(G).attr("x",function(){var ze=0;return Qe.selectAll(".measure").each(function(Et){var vn=xt(Et),Lt=Wt(Et);vn>ze&&(ze=vn),Lt>ze&&(ze=Lt)}),de.isRTL?-ze:ze}).style("opacity",1);var Tt=Qe.selectAll("g.tick").data(Wt.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);Tt.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),Tt.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",function(ze){return ze<0?"negative-value":"positive-value"}).text(function(ze,Et){return M(ze,Et)}),Tt.transition().duration(G).attr("transform",function(ze){return"translate(".concat(Wt(ze),",0)")}).style("opacity",1),de.isRTL&&de.isIE&&T.selectAll("text").attr("transform","scale(-1, 1)")},N=0;N<t.data.length;N++)V(N);return de.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".range").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var O={dataset:[]};function F(e,t){this.settings=_.mergeSettings(e,t,O),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}F.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var e=this,t=this.settings.dataset[0];0===this.settings.dataset.length&&((t={}).data=[{name:{text:P?P.translate("NoData"):"No Data Available"},completed:{value:0}}]);var n=t.data[0],i="completion-target"===this.settings.type,a="targeted-achievement"===this.settings.type;this.element.addClass("completion-chart").addClass("".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")).attr("role","image"),n.total=$.extend({},{value:100},n.total);var s,o=function(J){return void 0===J},c=function(J,ce){var ke=ce?0:"";return o(J)?ke:J},d=function(J,ce){return ce=ce||n,Math.round(J/c(ce.total.value,!0)*100)},p=function(J){return P.formatNumber(J/100,{style:"percent",maximumFractionDigits:0})},f=function(J,ce){var ke=J.toString();return-1!==ke.indexOf("%")?ke.replace(/%/g,"")/100*c((ce||n).total.value,!0):J},m=function(J,ce,ke,_e){var Oe=d(ce,_e),Qe=(Oe=Oe<0?0:Oe)>100?100:Oe;if(J[0].style.width="".concat(Qe,"%"),ke>0){var nt=d(ke,_e);J[0].style.left="".concat(nt,"%")}0===Qe&&(J[0].className+="is-empty")},b=function(J,ce,ke){var Oe,Qe,_e=ke?J._value:J.value;return J&&!o(_e)&&J.format?(Oe=f(_e,ce),".0%"===(Qe=J.format)?p(d(Oe,ce)):d3.format(Qe||"m")(Oe)):J?f(_e,ce):0},C=this,T=$.extend({},{show:!1,color1:"",color2:"inverse"},n.percentText);o(T.color)||""!==T.color1||(T.color1=T.color);var S,J,ce,M={body:$('<div class="total bar" />')},L=(ce={},(J=J||n).info&&!o(J.info.color)&&0===n.info.color.indexOf("#")&&(ce.info=!0),J.completed&&!o(J.completed.color)&&0===J.completed.color.indexOf("#")&&(ce.completed=!0),J.remaining&&!o(J.remaining.color)&&0===J.remaining.color.indexOf("#")&&(ce.remaining=!0),J.targetline&&!o(J.targetline.color)&&0===J.targetline.color.indexOf("#")&&(ce.targetline=!0),ce);if(i||a){var z,V=function(J){var ce,ke={};return(J=J||n).total.difference&&(ke.value=J.total.value-J.completed.value,ke.format=n.total.format),ce=(J.total.textOnly?"":b(J.total.difference?ke:J.total))+(J.total.text||""),a&&J.remaining?(J.remaining.textOnly?"":b(J.remaining))+(J.remaining.text||""):ce}();M.body.addClass("chart-completion-target".concat(a?" chart-targeted-achievement":"")),z=n.completed.color&&"error"===n.completed.color&&n.completed.iconTooltip?n.completed.iconTooltip:"Critical",M.label='<span class="label">\n        <span class="name">'.concat(c(n.name.text)," ").concat(n.completed.color&&"error"===n.completed.color?'<svg class="icon-error icon" focusable="true" role="presentation" title="'.concat(z,'"><use href="#icon-error"></use></svg>'):"",'</span>\n        <span class="l-pull-right total value">').concat(V,"</span>\n      </span>"),$("svg[title]").tooltip()}else{M.body.addClass("chart-completion");var N=c(n.name.text),U=c(n.completed.color),G=c(n.info.color),Z=n.info.color&&!L.info?G:"",oe=c(n.info.text);L.completed||(Z=U);var le="";n.info.color&&L.info&&(le=G),L.completed&&(le=U);var re=n.info&&!o(n.info.value)?c(n.info.value):b(n.completed);M.label='<b class="label name">'.concat(N,'</b>\n      <b class="label info ').concat(Z,' colored">\n      <span class="value ').concat(Z,'" ').concat(le?'style="color:'.concat(le):"",'">').concat(re,'</span>\n      <span class="text ').concat(Z,'" ').concat(le?'style="color:'.concat(le):"",'">').concat(oe,"</span>\n      </b>")}return M.remaining=n.remaining?"".concat('<div class="target remaining bar').concat(L.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(L.remaining?' style="color:'.concat(n.remaining.color,";background-color:").concat(n.remaining.color,';"'):"",'">').concat(a?"":"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(L.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(L.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(b(n.remaining),"</span><br />")+'<span class="text'.concat(L.remaining?"":" ".concat(c(n.remaining.color)),'"').concat(L.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(c(n.remaining.text),"</span>")+"</span>","</div>"):'<div class="target remaining bar" style="opacity: 0"></div>',n.completed&&a&&(T._value=(S=S||n).completed?S.completed.value:0,T.percent=d(c(T._value,!0),S),T.format=".0%",T._text=void 0!==T.text?T.text:void 0!==T.value?p(T.value):b(T,S,!0),T.color=T[T.percent>55?"color2":"color1"],L.percentText=0===T.color.indexOf("#"),M.completed="".concat('<div class="completed bar').concat(L.completed?"":" ".concat(c(n.completed.color)),'"').concat(L.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",'"></div>').concat(T.show?'<div class="chart-percent-text'.concat(L.percentText||""===T.color?"":" ".concat(T.color),'"').concat(L.percentText?' style="color:'.concat(T.color,';"'):"",">").concat(T._text,"</div>"):"",'<span class="completed-label"').concat(i||a?"":' class="audible"',">")+'<span class="text">'.concat(c(n.completed.text),"</span>")+"</span>"),(n.completed.text||n.completed.format&&!a)&&this.element.addClass("chart-completion-target-padding"),n.completed&&!a&&(M.completed="".concat('<div class="completed bar').concat(L.completed?"":" ".concat(c(n.completed.color)),'"').concat(L.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",">")+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(L.completed?"":" ".concat(c(n.completed.color)),'"').concat(L.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(b(n.completed),"</span><br />")+'<span class="text'.concat(L.completed?"":" ".concat(c(n.completed.color)),'"').concat(L.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(c(n.completed.text),"</span>")+"</span></div>"),n.targetline&&(M.targetline="".concat('<div class="target-line targetline bar').concat(L.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(L.targetline?' style="color:'.concat(n.targetline.color,";background-color:").concat(n.targetline.color,';"'):"",'">')+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(L.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(L.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(b(n.targetline),"</span><br />")+'<span class="text'.concat(L.targetline?"":" ".concat(c(n.targetline.color)),'"').concat(L.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(c(n.targetline.text),"</span>")+"</span></div>"),ue.append(M.body,(M.remaining||"")+(M.completed||"")+(M.targetline||""),"<a><use><svg><div><span><br>"),ue.append(this.element,M.label+M.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),s={name:$(".name",e.element),info:{value:$(".info .value",e.element),text:$(".info .text",e.element)},plainInfo:{value:$(">.value",e.element),text:$(">.text",e.element)},completed:{bar:$(".completed.bar",e.element),value:$(".completed .value",e.element),text:$(".completed .text, .completed-label .text",e.element)},remaining:{bar:$(".remaining.bar",e.element),value:$(".remaining .value",e.element),text:$(".remaining .text",e.element)},targetline:{bar:$(".targetline",e.element),value:$(".targetline .value",e.element),text:$(".targetline .text",e.element)},total:{bar:$(".total.bar",e.element),value:$(".total.value",e.element)},percentText:$(".chart-percent-text",e.element)},function(){if(t.attributes){var J=function(ce,ke){return _.addAttributes(ce,t,t.attributes,ke)};J(s.name,"name"),J(s.info.value,"info-value"),J(s.info.text,"info-text"),J(s.plainInfo.value,"info-value"),J(s.plainInfo.text,"info-text"),J(s.completed.bar,"completed-bar"),J(s.completed.value,"completed-value"),J(s.completed.text,"completed-text"),J(s.remaining.bar,"remaining-bar"),J(s.remaining.value,"remaining-value"),J(s.remaining.text,"remaining-text"),J(s.targetline.bar,"targetline-bar"),J(s.targetline.value,"targetline-value"),J(s.targetline.text,"targetline-text"),J(s.total.bar,"total-bar"),J(s.total.value,"total-value"),J(s.percentText,"percent-text")}}(),function(J){s.name.data("jsonData",{name:(J=J||n).name}),s.info.value.add(s.info.text).data("jsonData",{info:J.info}),s.completed.bar.add(s.completed.value).add(s.completed.text).data("jsonData",{completed:J.completed}),s.remaining.bar.add(s.remaining.value).add(s.remaining.text).data("jsonData",{remaining:J.remaining}),s.targetline.bar.add(s.targetline.value).add(s.targetline.text).data("jsonData",{targetline:J.targetline}),s.total.bar.add(s.total.value).data("jsonData",{total:J.total}),s.percentText.data("jsonData",{percentText:J.percentText})}(),function(J){var ce,ot;if((J=J||n).completed){ce=f(J.completed.value,J),m(s.completed.bar,ce,0,J);var ke,_e=s.completed.bar.data("tooltip");ke=J.completed.tipText?J.completed.tipText:"string"==typeof J.completed.value?J.completed.value:"".concat(Math.round(J.completed.value/J.total.value*100),"%"),_e?_e.setContent(ke,!1):s.completed.bar.tooltip({content:ke})}if(J.remaining){ce=f(J.remaining.value,J),m(s.remaining.bar,ce,f(J.completed.value,J),J),i&&!a&&setTimeout(function(){var nt=$(".remaining",C.element),ot=$(".total",C.element),Ze=$(".completed .value",C.element)[0].getBoundingClientRect(),ft=nt.find(".value")[0].getBoundingClientRect();nt.add(ot)[Ze.right>ft.left-20?"addClass":"removeClass"]("overlap")},500);var Oe,Qe=s.remaining.bar.data("tooltip");Oe=J.remaining.tipText?J.remaining.tipText:"string"==typeof J.remaining.value?J.remaining.value:"".concat(Math.round(J.remaining.value/J.total.value*100),"%"),Qe?Qe.setContent(Oe,!1):s.remaining.bar.tooltip({content:Oe})}J.targetline&&(ce=f(J.targetline.value,J),s.targetline.bar[0].style.left="".concat((ot=ce)>100?100:ot<0?0:ot,"%"))}(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("completion-chart"),function(){e.updated()}),this},updated:function(e){var t=e.type||this.settings.type;return this.settings=e,this.settings.type=t,e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function(){this.element.empty().removeClass("completion-chart"),de.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var W={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function Q(e,t){this.settings=_.mergeSettings(e,t,W),this.element=$(e),this.init()}Q.prototype={init:function(){if(!this.settings.colors){var e=mt.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=e.azure[mt.uplift||mt.new?"80":"70"].value,this.settings.colors[1]=e.slate[40].value,this.settings.colors[2]=e.slate[30].value,this.settings.colors[3]=e.slate[20].value}return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var e,t,n,i=this,a=this,s=this.element.closest(".is-personalizable").length>0,o=[],c=[],d=a.settings.tooltip,p=0,f=0,m=0,b=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),C=b.width>300?4:3,T=a.settings.dataset;for(n=0;n<T.length;n++)f=d3.min([d3.min(T[n].data),f]),p=d3.max([d3.max(T[n].data),p]),m=d3.max([T[n].data.length,m]);var S=b.width,M=b.height,L=d3.scaleLinear().domain([0,m]).range([10,S-10]),z=d3.scaleLinear().domain([f,p]).range([M-10,10]),V=d3.line().x(function(ce,ke){return L(ke)}).y(function(ce){return z(ce)});de.appendTooltip();var N=d3.select(this.element[0]).append("svg").attr("height",M).attr("width",S);if(a.settings.isMedianRange){p=d3.max(T[0].data),f=d3.min(T[0].data);var U=S-45,G=d3.median(T[0].data),Z=p-f,oe=d3.scaleLinear().domain([f,p]).range([0,M]),le=M-oe(G>Z?G:Z),re=M-oe(G<Z?G:Z);N.append("g").attr("class","medianrange").attr("transform",function(){return"translate(".concat(10,",").concat(le,")")}).append("rect").attr("width",U).attr("height",re).style("opacity","0.06").call(function(ce){ce._groups.forEach(function(ke){ke.forEach(function(_e){var Oe=T[0];_.addAttributes($(_e),Oe,Oe.attributes,"medianrange")})})}).on("mouseenter.".concat(a.namespace),function(){var ce=this.getBoundingClientRect(),ke='<p class="sparkline-tooltip">'+P.translate("Median")+": <b>"+G+"</b><br>"+P.translate("Range")+": <b>"+Z+"</b>"+(a.settings.isPeakDot?"<br>"+P.translate("Peak")+": <b>"+p+"</b>":"")+"</p>",_e=function(){var Qe=de.tooltipSize(ke),nt=ce.left+(ce.width-Qe.width)/2,ot=ce.top-Qe.height-5;""!==ke&&(de.tooltip&&de.tooltip.length&&de.tooltip[s?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(nt,ot,ke,"top"))};if(d&&"function"==typeof d&&!o[n]){ke="";var Oe=!0;e=setInterval(function(){Oe&&(Oe=!1,d(function(Qe){ke=Qe,o[n]=Qe})),""!==ke&&(clearInterval(e),_e())},10)}else d="object"===Ge(d)?"":d,ke=o[n]||d||T[0].tooltip||ke||"",_e()}).on("mouseleave.".concat(a.namespace),function(){clearInterval(e),de.hideTooltip()})}var J=function(){var ce=T[n];N.append("g").append("path").attr("d",V(ce.data)).attr("stroke",a.settings.isMinMax?"#999999":i.sparklineColors(n)).attr("class","team connected-line").call(function(ke){ke._groups.forEach(function(_e){_e.forEach(function(Oe){_.addAttributes($(Oe),ce,ce.attributes,"connected-line")})})})};for(n=0;n<T.length;n++)J();return f=d3.min(T[0].data),N.selectAll(".point").data(T[0].data).enter().append("circle").attr("r",function(ce){return a.settings.isMinMax&&p===ce||a.settings.isMinMax&&f===ce?C+1:a.settings.isDots||a.settings.isPeakDot&&p===ce?C:0}).attr("class",function(ce){return a.settings.isPeakDot&&p===ce&&!a.settings.isMinMax?"point peak":a.settings.isMinMax&&p===ce?"point max":a.settings.isMinMax&&f===ce?"point min":"point"}).style("fill",function(ce){return a.settings.isPeakDot&&p===ce&&!a.settings.isMinMax?"#ffffff":a.settings.isMinMax&&p===ce?"#56932E":a.settings.isMinMax&&f===ce?"#941E1E":a.sparklineColors(0)}).style("stroke",function(ce){return a.settings.isPeakDot&&p===ce&&!a.settings.isMinMax?a.sparklineColors(0):a.settings.isMinMax&&p===ce||a.settings.isMinMax&&f===ce?"none":"#ffffff"}).style("cursor","pointer").attr("cx",function(ce,ke){return L(ke)}).attr("cy",function(ce){return z(ce)}).call(function(ce){ce._groups.forEach(function(ke){ke.forEach(function(_e,Oe){var Qe=T[0];_.addAttributes($(_e),Qe,Qe.attributes,"point-".concat(Oe))})})}).on("mouseenter.".concat(a.namespace),function(ce){var ke=this.getBoundingClientRect(),_e="<p>".concat(T[0].name?"".concat(T[0].name,"<br> ").concat(a.settings.isMinMax&&p===ce?"".concat(P.translate("Highest"),": "):a.settings.isMinMax&&f===ce?"".concat(P.translate("Lowest"),": "):a.settings.isPeakDot&&p===ce?"".concat(P.translate("Peak"),": "):""):"","<b>").concat(ce,"</b></p>"),Oe=function(){var nt=de.tooltipSize(_e),ot=ke.left-nt.width/2+6,Ze=ke.top-nt.height-8;""!==_e&&(de.tooltip&&de.tooltip.length&&de.tooltip[s?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(ot,Ze,_e,"top"))};if(d&&"function"==typeof d&&!c[n]){_e="";var Qe=!0;t=setInterval(function(){Qe&&(Qe=!1,d(function(nt){_e=nt,c[n]=nt})),""!==_e&&(clearInterval(t),Oe())},10)}else d="object"===Ge(d)?"":d,_e=c[n]||d||T[0].tooltip||_e||"",Oe();d3.select(this).attr("r",a.settings.isMinMax&&p===ce||a.settings.isMinMax&&f===ce?C+2:C+1)}).on("mouseleave.".concat(a.namespace),function(ce){clearInterval(t),de.hideTooltip(),d3.select(this).attr("r",a.settings.isMinMax&&p===ce||a.settings.isMinMax&&f===ce?C+1:C)}).on("contextmenu.".concat(a.namespace),function(ce){var ke={value:ce,name:T[0].name||""};a.settings.isMinMax&&p===ce&&(ke.highest=!0),a.settings.isMinMax&&f===ce&&(ke.lowest=!0),a.settings.isPeakDot&&p===ce&&(ke.peak=!0),de.triggerContextMenu(a.element,d3.select(this).nodes()[0],ke)}),this.element.trigger("rendered",N),this},calculateAspectRatioFit:function(e){var t=Math.min(e.maxWidth/e.srcWidth,e.maxHeight/e.srcHeight);return{width:e.srcWidth*t,height:e.srcHeight*t}},handleEvents:function(){var e=this;return this.element.on("updated.".concat("sparkline"),function(t,n){e.updated(n)}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".medianrange").off(t(["mouseenter","mouseleave"])),this.element.find(".point").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var ee={title:null,info:null,icon:null,button:null,height:null,color:"slate",attributes:null};function ge(e,t){this.settings=_.mergeSettings(e,t,ee),this.element=$(e),this.init()}ge.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var e,t=this.settings,n="small"===t.height;if(null!=t&&null!==(e=t?.button)&&void 0!==e&&e?.isPrimary&&(this.settings.color="azure"),t.icon&&!n&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(t.icon,'"></use>\n          </svg></div>')).appendTo(this.element),t.title&&("[NoData]"===t.title&&(t.title=P?P.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(t.title,"</div>")).appendTo(this.element)),t.info&&!n&&$('<div class="empty-info">'.concat(t.info,"</div>")).appendTo(this.element),t.button&&!n){var i='<div class="empty-actions">\n          <button type="button" class="'.concat(t.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(t.button.cssClass,' hide-focus" ').concat(t.button.id?'id="'.concat(t.button.id,'"'):"",">\n            <span>").concat(t.button.text,"</span>\n          </button>\n        </div>");$(i).appendTo(this.element),t.button.click&&this.element.off("click").on("click","button",t.button.click)}return _.addAttributes(this.element,this,t.attributes,"",!0),_.addAttributes(this.element.find(".empty-actions button"),this,t.attributes,"btn",!0),this},updated:function(e){this.settings=_.mergeSettings(this.element,e,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(e){return this.each(function(){var t=$.data(this,"emptymessage");t?t.updated(e):t=$.data(this,"emptymessage",new ge(this,e))})};var pe={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,selectable:!0,hideDots:!1,animate:!0,redrawOnResize:!0,fitHeight:!0,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function xe(e,t){this.settings=_.mergeSettings(e,t,pe),this.element=$(e),de.destroy(e),this.init()}xe.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,n,i,a=this,s=this.settings,o=this.element.closest(".is-personalizable").length>0,c="line-chart";c+=s.isBubble?" bubble":"",this.element.addClass(c+=s.isScatterPlot?" scatterplot":"");var d=0===s.dataset.length;if(!d){var p=0;s.dataset.forEach(function(Ne){0===Ne.data.length&&p++}),d=p===s.dataset.length}if(d)return a.element.emptymessage(s.emptyMessage),this;var f,m={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};s.isBubble&&(m.radius=0,m.radiusOnHover=0,m.strokeWidth=0),s.isScatterPlot&&(m.radius=0,m.strokeWidth=50),$.extend(!0,m,s.dots),a.dots=m,this.isRTL=P.isRTL();var b,C,T=[],S=s.tooltip,M={},L={atLeastOne:!1},z=["left","top","right","bottom"];if(s.axisLabels&&$.extend(!0,M,s.axisLabels),!$.isEmptyObject(M))for(b=0,C=z.length;b<C;b++){var V=M[z[b]];V&&"string"==typeof V&&""!==$.trim(V)&&(L[z[b]]=!0,L.atLeastOne=!0)}var N="",U=0,G=s.dataset,Z=s.hideDots,oe=this.element.parent(),le=!!$(".widget-chart-action",oe).length,re=oe.width()<450,J=function(Ne){return void 0!==Ne&&"function"!=typeof Ne&&null!==Ne?"boolean"==typeof Ne?Ne?"-45":null:Ne:null},ce={large:J(null===(e=s.xAxis)||void 0===e||null==e?void 0:e.rotate),small:J(null===(t=s.xAxis)||void 0===t||null==t?void 0:t.rotateOnSmallView)},ke=!!ce.large;ke&&(ce.use=ce.large),re&&ce.small&&(ke=!0,ce.use=ce.small),le&&(s.fitHeight=!1);var _e=function(Ne,bt){return d3.max(Ne.data,function(_t){return bt?_t.value[bt]:_t.value})};if(ke){G[0].data.forEach(function(Ne){Ne.name.length>N.length&&(N=Ne.name)});var Oe=Math.abs(ce.use);Oe=isNaN(Oe)?0:Oe,U=N.length*(Oe>50?5:2)}var Qe={top:L.top?le?15:40:le?5:30,right:L.right?65:55,bottom:L.bottom?ke?60:50:U+35,left:L.left?75:65},nt=_.getParentAvailableHeight(a.element[0]),ot=s.fitHeight?nt:parseInt(oe.height(),10),Ze=oe.width()-Qe.left-Qe.right,ft=ot-Qe.top-Qe.bottom-30;le&&(ft-=42),a.svg=d3.select(this.element[0]).append("svg").attr("width",Ze+Qe.left+Qe.right).attr("height",ft+Qe.top+Qe.bottom).append("g").attr("transform","translate(".concat(Qe.left,",").concat(Qe.top,")"));var Wt=G[0].data.map(function(Ne){return Ne.name}),xt={};G[0]&&G[0].valueFormatterString&&$.extend(!0,xt,G[0].valueFormatterString);var jt,Ut=function(Ne,bt){return!$.isEmptyObject(xt)&&Ne?d3.format(Ne)("0.0%"===Ne?bt/100:bt):bt},en={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};G[0]&&G[0].labels&&$.extend(!0,en,G[0].labels);var gn=(s.xAxis&&s.xAxis.scale?s.xAxis.scale:d3.scaleLinear()).range([0,Ze]),Pn=d3.scaleLinear().range([ft,0]),Dt=d3.scaleLinear().range([1,25]);jt=s.isBubble?{x:G.map(function(Ne){return _e(Ne,"x")}),y:G.map(function(Ne){return _e(Ne,"y")}),z:G.map(function(Ne){return _e(Ne,"z")})}:s.isScatterPlot?{x:G.map(function(Ne){return _e(Ne,"x")}),y:G.map(function(Ne){return _e(Ne,"y")})}:G.map(function(Ne){return _e(Ne)});var Be,Tt,ze=d3.max(G.map(function(Ne){return Ne.data.length})),Et=ze<=1?ze:ze-1,vn=gn.domain(s.xAxis&&s.xAxis.domain?s.xAxis.domain:[0,s.isBubble||s.isScatterPlot?d3.max(jt.x):Et]),Lt=Pn.domain([0,d3.max(s.isBubble||s.isScatterPlot?jt.y:jt)]).nice(),Nn=Dt.domain([0,d3.max(s.isBubble?jt.z:jt)]).nice(),Gt=Et;s.xAxis&&s.xAxis.ticks&&(Gt="auto"===s.xAxis.ticks?Math.max(Ze/85,2):s.xAxis.ticks,(s.isBubble||s.isScatterPlot&&re)&&(Gt=Math.round(Et/2))),re&&null!==(Be=s.xAxis)&&void 0!==Be&&Be?.numTicksOnSmallView&&(Gt=null===(Tt=s.xAxis)||void 0===Tt||null==Tt?void 0:Tt.numTicksOnSmallView);var Fn,ni=d3.axisBottom(vn).ticks(Gt).tickPadding(10).tickSize(s.isBubble||s.isScatterPlot?-(ft+10):0).tickFormat(function(Ne,bt){var _t,mn;return"function"==typeof(null===(_t=s.xAxis)||void 0===_t||null==_t?void 0:_t.formatter)?s.xAxis.formatter(Ne,bt):"auto"===(null===(mn=s.xAxis)||void 0===mn||null==mn?void 0:mn.ticks)?Wt[Ne]:s.isBubble||s.isScatterPlot?Ne:Wt[Ne]}),$n=d3.axisLeft(Lt).ticks(8).tickSize(-(Ze+20)).tickPadding(a.isRTL?-18:20);if(null!==(n=s.yAxis)&&void 0!==n&&n?.formatter&&$n.tickFormat(function(Ne,bt){return"function"==typeof s.yAxis.formatter?s.yAxis.formatter(Ne,bt):Ne}),null!==(i=s.yAxis)&&void 0!==i&&i?.ticks&&$n.ticks(s.yAxis.ticks.number,s.yAxis.ticks.format),L.atLeastOne){var Hn=a.svg.append("g").attr("class","axis-labels"),ki={top:"translate(".concat(Ze/2,",").concat(-10,")"),right:"translate(".concat(Ze+28,",").concat(ft/2,")rotate(90)"),bottom:"translate(".concat(Ze/2,",").concat(ft+40,")"),left:"translate(".concat(-40,",").concat(ft/2,")rotate(-90)")},qa={top:"rotate(0deg) scaleX(-1) translate(-".concat(Ze/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(ft/2+5,"px, -").concat(Ze+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(Ze/2,"px, ").concat(ft+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(ft/2-5,"px, ",55,"px)")};for(b=0,C=z.length;b<C;b++)L[Fn=z[b]]&&Hn.append("text").attr("class","axis-label-".concat(Fn)).attr("text-anchor","middle").attr("transform",a.isRTL?"":ki[Fn]).style("font-size","1.25em").style("transform",a.isRTL?qa[Fn]:"").text(M[Fn])}if(a.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(ft,")")).call(ni),a.svg.append("g").attr("class","y axis").call($n),a.svg.selectAll(".tick line").attr("x1","-10"),s.isBubble||s.isScatterPlot){a.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var Yt=a.svg.select(".x.axis .tick line");Yt.attr("x2","-10"),(!s.xAxis||s.xAxis&&!s.xAxis.hideLine)&&Yt.style("opacity",1),(!s.yAxis||s.yAxis&&!s.yAxis.hideLine)&&a.svg.select(".y.axis .tick line").style("opacity",1)}a.isRTL&&(a.svg.selectAll("text").attr("transform","scale(-1, 1)"),a.svg.selectAll(".y.axis text").style("text-anchor","end")),ke&&a.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return-(this.getBBox().width+10)}).attr("dy","1em").attr("transform","rotate(".concat(ce.use,")")).style("text-anchor","start"),s.xAxis&&s.xAxis.formatText&&a.svg.selectAll(".x.axis .tick text").each(function(Ne){var bt=d3.select(this),_t=d3.select(this).text(),mn=s.xAxis.formatText(_t,Ne);ue.html(bt.node(),mn,"<tspan><text><glyph>")});var je=d3.line().x(function(Ne,bt){var _t;return vn("function"==typeof(null===(_t=s.xAxis)||void 0===_t||null==_t?void 0:_t.parser)?s.xAxis.parser(Ne,bt):s.isBubble||s.isScatterPlot?Ne.value.x:bt)}).y(function(Ne){return Lt(s.isBubble||s.isScatterPlot?Ne.value.y:Ne.value)}),Ke={line:{delay:200,prevent:!1,timer:0},dot:{delay:200,prevent:!1,timer:0},symbol:{delay:200,prevent:!1,timer:0}};a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(Ne){Ne.stopImmediatePropagation()}),G.forEach(function(Ne,bt){var _t=a.svg.append("g").attr("data-group-id",bt).attr("class","line-group");if(s.isArea){var mn=d3.area().x(function(yt,Pt){return vn(Pt)}).y0(ft).y1(function(yt){return Lt(s.isBubble||s.isScatterPlot?yt.value.y:yt.value)});_t.append("path").datum(Ne.data).attr("fill",function(){return de.chartColor(bt,"line",Ne)}).style("opacity",".2").attr("class","area").attr("d",mn).call(function(yt){yt._groups.forEach(function(Pt){Pt.forEach(function($t){_.addAttributes($($t),Ne,Ne.attributes,"area")})})})}var kn=_t.append("path").datum(Ne.data).attr("d",je(Ne.data)).attr("stroke",function(){return s.isBubble||s.isScatterPlot?"":de.chartColor(bt,"line",Ne)}).attr("stroke-width",2).attr("fill","none").attr("class","line").call(function(yt){yt._groups.forEach(function(Pt){Pt.forEach(function($t){_.addAttributes($($t),Ne,Ne.attributes,"line")})})}).on("click.".concat(a.namespace),function(){var yt=this;a.settings.selectable&&(Ke.line.timer=setTimeout(function(){Ke.line.prevent||de.selectElement(d3.select(yt.parentNode),a.svg.selectAll(".line-group"),Ne,a.element,G,a.initialSelectCall,a.settings.selectable),Ke.line.prevent=!1},Ke.line.delay))}).on("dblclick.".concat(a.namespace),function(){clearTimeout(Ke.line.timer),Ke.line.prevent=!0,a.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:Ne}]])}).on("contextmenu.".concat(a.namespace),function(){de.triggerContextMenu(a.element,d3.select(this).nodes()[0],Ne)}),Kt=kn.node().getTotalLength();kn.attr("stroke-dasharray","".concat(Kt," ").concat(Kt)).attr("stroke-dashoffset",Kt).transition().duration(s.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var ii=function(yt,Pt){var $t,Rn=yt.getBoundingClientRect(),Dn="<p><b>".concat(Pt.name," </b> ").concat(($t=Pt.value,d3.format(s.formatterString||",")($t)),"</p>"),qn=function(){var Xn=de.tooltipSize(Dn),Cn=Rn.left-Xn.width/2+6,In=Rn.top-Xn.height-18;Cn=s.isBubble||s.isScatterPlot?Rn.left+Rn.width/2-Xn.width/2:Cn,""!==Dn&&(de.tooltip&&de.tooltip.length&&de.tooltip[o?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(Cn,In,Dn,"top"))};if(s.isBubble||s.isScatterPlot){for(var Ti in Dn='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(Pt.name,"</b></div>"),Pt)if(Pt.hasOwnProperty(Ti))if("object"!==Ge(Pt[Ti]))en[Ti]&&(Dn+="".concat('<div class="swatch-row"><span>').concat(en[Ti],"</span>")+"<b>".concat(Ne.name,"</b>")+"</div>");else{var ba=Pt[Ti];for(var Bi in ba)ba.hasOwnProperty(Bi)&&en[Ti]&&(Dn+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(en[Ti][Bi],"</span>")+"<b>".concat(Ut(xt[Bi],ba[Bi]),"</b>")+"</div>")}Dn+="</div>"}if(S&&"function"==typeof S&&!T[b]){Dn="";var Ai=!0;f=setInterval(function(){Ai&&(Ai=!1,S(function(Xn){Dn=Xn,T[b]=Xn})),""!==Dn&&(clearInterval(f),qn())},10)}else{S="object"===Ge(S)?"":S,Dn=T[b]||S||Pt.tooltip||Ne.tooltip||Dn||"",qn();for(var ya=document.querySelectorAll("#svg-tooltip .swatch-caption span"),la=0;la<ya.length;la++)ya[la].style.backgroundColor=de.chartColor(s.isBubble||s.isScatterPlot?Pt.lineIdx:la,"line",Pt)}d3.select(this).attr("r",function(Xn){return s.isBubble?2+Nn(Xn.value.z):m.radiusOnHover})};Z||(s.isScatterPlot||_t.selectAll("circle").data(Ne.data).enter().append("circle").attr("class",m.class).call(function(yt){yt._groups.forEach(function(Pt){Pt.forEach(function($t){var Rn=$t.__data__;_.addAttributes($($t),Rn,Rn.attributes,"dot")})})}).attr("cx",function(yt,Pt){return vn(s.xAxis&&s.xAxis.parser?s.xAxis.parser(yt,Pt):s.isBubble||s.isScatterPlot?yt.value.x:Pt)}).attr("cy",function(yt){return Lt(s.isBubble||s.isScatterPlot?0:yt.value)}).attr("r",m.radius).style("stroke-width",m.strokeWidth).style("cursor",a.settings.selectable?"pointer":"inherit").style("fill",function(){return de.chartColor(bt,"line",Ne)}).style("opacity",s.isBubble||s.isScatterPlot?".7":"1").on("mouseenter.".concat(a.namespace),function(yt){yt.lineIdx=bt,ii(this,yt)}).on("mouseleave.".concat(a.namespace),function(){clearInterval(f),de.hideTooltip(),d3.select(this).attr("r",function(yt){return s.isBubble?Nn(yt.value.z):m.radius})}).on("click.".concat(a.namespace),function(yt){var Pt=this;a.settings.selectable&&(Ke.dot.timer=setTimeout(function(){Ke.dot.prevent||de.selectElement(d3.select(Pt.parentNode),a.svg.selectAll(".line-group"),yt,a.element,G,a.initialSelectCall,a.settings.selectable),Ke.dot.prevent=!1},Ke.dot.delay))}).on("dblclick.".concat(a.namespace),function(yt){clearTimeout(Ke.dot.timer),Ke.dot.prevent=!0,a.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:yt}]])}).on("contextmenu.".concat(a.namespace),function(yt){de.triggerContextMenu(a.element,d3.select(this).nodes()[0],yt)}),s.isScatterPlot&&_t.selectAll(".symbol").data(Ne.data).enter().append("path").attr("class","symbol").call(function(yt){yt._groups.forEach(function(Pt){Pt.forEach(function($t){var Rn=$t.__data__;_.addAttributes($($t),Rn,Rn.attributes,"symbol")})})}).attr("transform",function(yt){return"translate(".concat(vn(yt.value.x),",").concat(Lt(yt.value.y),")")}).attr("d",d3.symbol().size(m.strokeWidth).type(function(){return d3.symbols[bt]})).style("opacity",0).style("fill",function(){return de.chartColor(bt,"line",Ne)}).on("mouseenter.".concat(a.namespace),function(yt){yt.lineIdx=bt,ii(this,yt)}).on("mouseleave.".concat(a.namespace),function(){clearInterval(f),de.hideTooltip(),d3.select(this).attr("r",function(){return m.radius})}).on("click.".concat(a.namespace),function(yt){var Pt=this;a.settings.selectable&&(Ke.symbol.timer=setTimeout(function(){Ke.symbol.prevent||de.selectElement(d3.select(Pt.parentNode),a.svg.selectAll(".line-group"),yt,a.element,G,a.initialSelectCall,a.settings.selectable),Ke.symbol.prevent=!1},Ke.symbol.delay))}).on("dblclick.".concat(a.namespace),function(yt){clearTimeout(Ke.symbol.timer),Ke.symbol.prevent=!0,a.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:yt}]])}).on("contextmenu.".concat(a.namespace),function(yt){de.triggerContextMenu(a.element,d3.select(this).nodes()[0],yt)}),s.isBubble&&_t.selectAll("circle").attr("cy",function(yt){return Lt(yt.value.y)}).transition().duration(s.animate?750:0).ease(d3.easeCubic).attr("r",function(yt){return Nn(yt.value.z)}),s.isScatterPlot&&_t.selectAll(".symbol").transition().duration(s.animate?750:0).ease(d3.easeCubic).style("opacity",1))}),a.svg.selectAll(".y.axis .tick").attr("class",function(Ne){return"tick".concat(0===Ne?" tick0":"")});var tt=G.map(function(Ne){return{color:Ne.color,name:Ne.name,selectionObj:a.svg.selectAll(".line-group"),selectionInverse:a.svg.selectAll(".line-group"),data:Ne}});return s.showLegend&&de.addLegend(tt,s.isScatterPlot?"scatterplot":"line",s,this.element),de.appendTooltip(),de.setSelected=function(Ne,bt){var _t,mn,kn,Kt=0,ii=_.equals,yt=function(Pt,$t,Rn,Dn){Rn?(kn=a.svg.select('[data-group-id="'.concat($t,'"]')).select(".dot:nth-child(".concat(Dn+2,")")),("number"==typeof Ne.groupIndex&&void 0!==Ne.fieldName&&void 0!==Ne.fieldValue&&Ne.groupIndex===$t&&Ne.fieldValue===Rn[Ne.fieldName]||void 0!==Ne.index&&"number"==typeof Ne.groupIndex&&Ne.groupIndex===$t&&Ne.index===Dn||Ne.elem&&$(kn.node()).is(Ne.elem)||Ne.data&&ii(Ne.data,Rn))&&(Kt++,mn=Rn,_t=a.svg.select('[data-group-id="'.concat($t,'"]')))):(kn=a.svg.select('[data-group-id="'.concat($t,'"]')),(void 0!==Ne.groupName&&void 0!==Ne.groupValue&&Ne.groupValue===Pt[Ne.groupName]||void 0!==Ne.groupIndex&&Ne.groupIndex===$t||Ne.elem&&$(kn.node()).is(Ne.elem)||Ne.data&&ii(Ne.data,Pt))&&(Kt++,mn=Pt,_t=kn))};G.forEach(function(Pt,$t){Kt<1&&Pt&&Pt.data&&(Pt.data.forEach(function(Rn,Dn){Kt<1&&Rn&&yt(Pt,$t,Rn,Dn)}),Kt<1&&yt(Pt,$t))}),Kt>0&&(bt||!_t.classed("is-selected"))&&a.settings.selectable&&de.selectElement(_t,a.svg.selectAll(".line-group"),mn,a.element,G,a.initialSelectCall)},a.svg._groups.forEach(function(Ne){Ne.forEach(function(bt){var _t=$(bt).find("g.y.axis .tick"),mn=$(bt).find("g.line-group"),kn=$(bt).find("g.y.axis"),Kt=_t.attr("transform"),ii=a.getTransformYAxisValue(Kt);_t.length<2&&kn.add(mn).attr("transform","translate(0,".concat(ii,")"))})}),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},getTransformYAxisValue:function(e){if(e){var t=e.split(",");return t.splice(0,1).join(""),t.join(",").slice(0,-1)}return"0"},setInitialSelected:function(){var e,t,n=this,i=0,a=function(s,o,c){s.selected&&i<1&&(i++,e=d3.select(n.svg.selectAll(".line-group").nodes()[c]),t=o)};this.settings.dataset.forEach(function(s,o){s&&a(s,s,o)}),this.settings.dataset.forEach(function(s,o){(s||s.data)&&s.data.forEach(function(c){a(c,s,o)})}),i>0&&n.settings.selectable&&(n.initialSelectCall=!0,de.selectElement(e,n.svg.selectAll(".line-group"),t,n.element,n.settings.dataset,n.initialSelectCall)),n.initialSelectCall=!1},setTextValues:function(){var e,t,n,i,a,s,o,c,d=this,p=this,f={el:this.element[0].querySelector(".line-chart .axis.y")},m={el:f.el.querySelector(".tick line")},b=[].slice.call(f.el.querySelectorAll(".tick text")),C=null===(e=this.settings)||void 0===e||null===(t=e?.axisLabels)||void 0===t||null==t?void 0:t.left,T="string"==typeof C&&""!==C.trim(),S={maxWidth:this.element.width(),boxWidth:T?23:43,transMatrix:null===(n=this.svg)||void 0===n||null===(i=n?.node())||void 0===i||null===(a=i?.transform)||void 0===a||null===(s=a?.baseVal)||void 0===s||null===(o=s?.consolidate())||void 0===o||null==o?void 0:o.matrix};if(S.transY=(null===(c=S.transMatrix)||void 0===c||null==c?void 0:c.f)||30,S.customCss=function(){return{tooltip:{maxWidth:"".concat(S.maxWidth,"px")},arrow:{left:d.isRTL?"calc(100% - 20px)":"20px"}}},f.width=f.el.getBBox().width,m.width=m.el?m.el.getBBox().width:0,S.xDiff=f.width-m.width,this.settings.selectable||this.element.find(".line").css("cursor","inherit"),b.forEach(function(L,z){var V=L.textContent,N=de.calculateTextRenderWidth(V),U=L.parentNode;if(N>=S.boxWidth){if(S.elem=L,Ie.browser.isIE11())L.textContent=de.trimText(V,5);else{L.classList.add("hidden"),d3.select(U).append("foreignObject").attr("overflow","visible").attr("width","".concat(S.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(z)).attr("x","-".concat(S.boxWidth+(d.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var G=U.querySelector(".text.ellipsis");if(G){var Z=document.createTextNode(V);G.appendChild(Z)}S.elem=U.querySelector(".text")}d3.select(S.elem).on("mouseover.".concat(p.namespace),function(){var oe,le,re,J,ce=(oe=this.getBoundingClientRect(),le=Math.ceil(N/S.maxWidth),re=(re=oe.left)<0?30:re,J=((J=oe.top)<0?30:J)-36,le>1&&(J-=.5*(le-1)*33),d.isRTL&&(re=oe.left-N+5),{x:re,y:J});de.showTooltip(ce.x,ce.y,V,"top",S.customCss())}).on("mouseout.".concat(d.namespace),function(){return de.hideTooltip()})}}),!T){f.width=f.el.getBBox().width,m.width=m.el?m.el.getBBox().width:0,S.xDiff=f.width-m.width;var M=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter(function(L){return S.xDiff>=L.min&&S.xDiff<L.max});M.length&&(S.newX=M[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(S.newX,",").concat(S.transY,")")),Ie.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",S.boxWidth+3))}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},width:0,getSelected:function(){return de.selected},setSelected:function(e,t){de.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this.element.empty(),e&&e.dataset&&(this.settings.dataset=e.dataset),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".line-group .line").off(t(["click","dblclick","contextmenu"])),this.element.find(".line-group .symbol").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var Pe={dataset:[],isStacked:!1,showLegend:!0,animate:!0,selectable:!0,format:null,redrawOnResize:!0,useLine:!1,hideDots:!1,ticks:9,fitHeight:!0,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ve(e,t){this.settings=_.mergeSettings(e,t,Pe),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Ve.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e,t,n,i,a,s=this,o=this.settings,c=this.element.closest(".is-personalizable").length>0,d=function(be){return d3.format(s.settings.formatterString||",")(be)},p=this.settings.dataset;if(this.dataset=p,0===p.length)return s.element.emptymessage(s.settings.emptyMessage),this;var f="",m=0,b=this.element.parent();$(".widget-chart-action",b);var C,T,S=b.width()<450,M=function(be){return void 0!==be&&"function"!=typeof be&&null!==be?"boolean"==typeof be?be?"-45":null:be:null},L={large:M(null===(e=this.settings.xAxis)||void 0===e||null==e?void 0:e.rotate),small:M(null===(t=this.settings.xAxis)||void 0===t||null==t?void 0:t.rotateOnSmallView)},z=!!L.large;if(z&&(L.use=L.large),S&&L.small&&(z=!0,L.use=L.small),z){p[0].data.forEach(function(be){be.name.length>f.length&&(f=be.name)});var V=Math.abs(L.use);V=isNaN(V)?0:V,m=f.length*(V>50?5:2)}var N={},U={atLeastOne:!1},G=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,N,o.axisLabels),!$.isEmptyObject(N))for(C=0,T=G.length;C<T;C++){var Z=N[G[C]];Z&&"string"==typeof Z&&""!==$.trim(Z)&&(U[G[C]]=!0,U.atLeastOne=!0)}var oe=P.isRTL(),le="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,re=1===p.length;this.isSingle=re;var J=!(re||!re&&s.settings.isStacked);this.isGrouped=J;var ce,ke,_e,Oe,Qe,nt,ot,Ze,ft,Wt,Ut=re&&void 0===p[0].name?s.settings.isStacked?20:z?m+35:50:35,gn=_.getParentAvailableHeight(s.element[0]),Pn=o.fitHeight?gn:parseInt(b.height(),10),Dt=b.width()-45-40-10,Be=Pn-40-Ut-(re&&void 0===p[0].name?s.settings.isStacked||le?30:0:40),Tt=d3.min(p,function(be){return d3.min(be.data,function(Re){return Re.value})}),ze=d3.max(p,function(be){return d3.max(be.data,function(Re){return Re.value})});le&&(ce=d3.min(p,function(be){return d3.min(be.data,function(Re){return Re.target})}),ke=d3.max(p,function(be){return d3.max(be.data,function(Re){return Re.target})}),Tt=d3.min([Tt,ce]),ze=d3.max([ze,ke]),Qe={target:null,positive:null,negative:null},Ze={target:"Target",positive:"Positive",negative:"Negative"},nt={target:"neutral",positive:"good",negative:"error"},ot={},p[0]&&(p[0].attributes&&$.extend(!0,Qe,p[0].attributes),p[0].colors&&$.extend(!0,nt,p[0].colors),p[0].legends&&$.extend(!0,Ze,p[0].legends),p[0].patterns&&$.extend(!0,ot,p[0].patterns)),ft=[],$.each(Ze,function(be,Re){var At={name:Re,color:nt[be],pattern:ot[be],option:be};Qe[be]&&(At.data={attributes:Qe[be]}),ft.push(At)})),this.element.addClass("column-chart");var Et=[],vn=s.settings.tooltip,Lt=d3.scaleBand().range([0,Dt]).round(!0).padding("column-grouped"===this.settings.type?.1:0),Nn=d3.scaleBand(),Gt=d3.scaleLinear().range([Be,0]),Fn=null,ni=null;if(s.settings.isStacked){var $n={y1:[],y2:[]};a=re?p[0].data.map(function(be,Re){var At=0;return 0===Re?($n.y1.push(be.value),$n.y2.push(0)):(At=$n.y1[0]+$n.y2[0],$n.y1[0]=be.value,$n.y2[0]=At),[$.extend({},be,{y0:At,y:be.value,x:be.name,color:be.color,pattern:be.pattern,parentName:be.name,tooltip:be.tooltip})]}):p.map(function(be,Re){return be.data.map(function(At,lt){var Nt=0;return 0===Re?($n.y1.push(At.value),$n.y2.push(0)):(Nt=$n.y1[lt]+$n.y2[lt],$n.y1[lt]=At.value,$n.y2[lt]=Nt),$.extend({},At,{y0:Nt,y:At.value,x:At.name,color:At.color,pattern:At.pattern,parentName:be.name,tooltip:be.tooltip})})}),d3.stack()(a),Fn=d3.scaleBand().domain(d3.range(a[0].length)).rangeRound([0,Dt],.05),re&&s.settings.isStacked&&Fn.paddingInner(.095),ni=d3.scaleLinear().domain([0,d3.max(a,function(be){return d3.max(be,function(Re){return Re.y0+Re.y})})]).range([0,Be])}var Hn=p[0].data.map(function(be){return be.name}),ki=d3.axisBottom(Lt).tickSize(0).tickPadding(12),qa=d3.axisLeft(Gt).tickSize(-Dt).tickPadding(oe?-12:12).ticks(s.settings.ticks||9,d3.format(s.settings.format||"s"));s.settings.yAxis&&(s.settings.yAxis.formatter&&qa.tickFormat(function(be,Re){return"function"==typeof s.settings.yAxis.formatter?s.settings.yAxis.formatter(be,Re):be}),s.settings.yAxis.ticks&&s.settings.yAxis.ticks.number>1&&s.settings.yAxis.ticks.format&&qa.ticks(s.settings.yAxis.ticks.number,s.settings.yAxis.ticks.format));var Yt=d3.select(this.element[0]).append("svg").attr("width",Dt+45+40).attr("height",Be+40+Ut+(U.atLeastOne?12:0)).append("g").attr("transform","translate(".concat(oe?50:U.atLeastOne?56:45,"\n        ,").concat(40-(U.atLeastOne?5:0),")"));this.svg=Yt;var je,Ke,tt=p.map(function(be){return be.name}),Ne=p.map(function(be){return d3.max(be.data,function(Re){return le?Re.target:Re.value})});if(s.settings.isStacked&&(je=a.map(function(be){return d3.max(be,function(Re){return Re.y+Re.y0})})),re&&(tt=p[0].data.map(function(be){return be.name})),le&&(Tt+=Tt/Gt.ticks().length,Ne[0]+=Ne[0]/(Gt.ticks().length/2)),function(){if(s.settings.isStacked&&re)_e=p[0].data;else for(var be,Re=p.length-1;Re>-1;Re--)be=p[Re].data.map(function(At){return At}),$.extend(!0,_e,be),_e=$.map(_e,function(At){return At})}(),s.settings.isStacked&&!re&&(Oe=tt.map(function(be,Re){return p[Re]})),Lt.domain(s.settings.isStacked?Hn:tt),Nn.domain(Hn).rangeRound([0,re||s.settings.isStacked?Dt:Lt.bandwidth()]),Gt.domain([Tt<0?Tt:s.settings.minValue||0,d3.max(s.settings.isStacked?je:Ne)]).nice(),(!re||re&&!s.settings.isStacked)&&Yt.append("g").attr("class","x axis").attr("transform","translate(0,".concat(Be+(le?10:0),")")).call(ki),Yt.append("g").attr("class","y axis").call(qa),oe&&Tt<0){var bt,_t=0;Yt.selectAll(".axis.y text").attr("class",function(be){return bt=d3.select(this).text().length,_t=bt>_t?bt:_t,be<0?"negative-value":"positive-value"}).attr("x",function(be){return _t*(be<0?9:5)})}if(U.atLeastOne){var mn=s.svg.append("g").attr("class","axis-labels"),kn=Dt-45,Kt={top:"translate(".concat(kn/2,",").concat(-10,")"),right:"translate(".concat(kn+53,",").concat(Be/2,")rotate(90)"),bottom:"translate(".concat(kn/2,",").concat(Be+47,")"),left:"translate(".concat(-35,",").concat(Be/2,")rotate(-90)")},ii={top:"rotate(0deg) scaleX(-1) translate(-".concat(kn/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(Be/2+5,"px, -").concat(kn+(oe?55:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(kn/2,"px, ").concat(Be+47,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(Be/2-5,"px, ").concat(oe?35:55,"px)")};for(C=0,T=G.length;C<T;C++)U[Ke=G[C]]&&mn.append("text").attr("class","axis-label-".concat(Ke)).attr("text-anchor","middle").attr("transform",oe?"":Kt[Ke]).style("font-size","1.25em").style("transform",oe?ii[Ke]:"").text(N[Ke])}var yt,Pt,$t=[];p.forEach(function(be){$t.push($.extend({},be,{values:be.data}))}),re&&($t=[],tt=p[0].data.forEach(function(be){$t.push(be)}));var Dn=Dt/$t.length>35*(($t[0]&&$t[0].values?$t[0].values.length:0)+1),qn=function(be){return de.chartColor(0,"",{color:be})},Ti=function(be,Re){var At;be.empty()?Re():(At=be.size(),be.on("end.".concat(s.namespace),function(){0==--At&&Re()}))},ba=function(be){var Re;if(be=le&&be,re||le){var At=be?"target-bar":"bar";Re=s.svg.selectAll("rect.".concat(At)).data(s.settings.isStacked?a:$t).enter().append("rect").call(function(Ye){Ye._groups.forEach(function(Xe){Xe.forEach(function(et){var tn=et.__data__;_.addAttributes($(et),tn,tn.attributes,At)})})}).attr("class",function(Ye,Xe){var et="bar series-".concat(Xe);return le&&(et=(be?"target-bar series-".concat(Xe):et)+(Ye.value>0?" positive":" negative")),et}).attr("width",Math.min.apply(null,[Nn.bandwidth()-2,35])).attr("x",function(Ye){return s.settings.isStacked?Fn(0):Nn(Ye.name)+(Nn.bandwidth()-35)/2}).attr("y",function(){return Gt(0)>Be?Be:Gt(0)}).attr("height",function(){return 0}).attr("mask",function(Ye){return le?be?ot.target?"url(#".concat(ot.target,")"):null:Ye.value<0?ot.negative?"url(#".concat(ot.negative,")"):null:ot.positive?"url(#".concat(ot.positive,")"):null:null}).style("cursor",s.settings.selectable?"pointer":"inherit").style("fill",function(Ye){return le?qn(be?nt.target:Ye.value<0?nt.negative:nt.positive):null}),le&&Yt.selectAll(be?".target-bartext":".bartext").data($t).enter().append("text").attr("class",function(Ye){return(be?"target-bartext":"bartext")+(Ye.value>0?" positive":" negative")}).attr("text-anchor","middle").attr("x",function(Ye){return(Nn(Ye.name)+Nn.bandwidth()/2)*(oe?-1:1)}).attr("y",function(Ye){return be?Gt(Ye.target)-6:Gt(Ye.value>0?0:Ye.value)+12}).style("opacity",0).style("fill",function(Ye){return be?"":qn(Ye.value<0?nt.negative:nt.positive)}).style("font-weight","bold").text(function(Ye){return d(be?Ye.target:Ye.value)}),Re.transition().duration(s.settings.animate?1e3:0).call(Ti,function(){Yt.selectAll(".target-bartext, .bartext").transition().duration(s.settings.animate?300:0).style("opacity",1)}).attr("y",function(Ye){var Xe=s.settings.isStacked?Be-ni(Ye[0].y)-ni(Ye[0].y0):Gt(Ye.value<0?0:Ye.value);return be?Gt(Ye.target):Ye.value<0?Xe:Xe>Be-3?Be-2:Xe}).attr("height",function(Ye){var Xe;return Xe=s.settings.isStacked?ni(Ye[0].y):Ye.value<0?Be-Gt(0)-(Be-Gt(Ye.value)):Be-Gt(Ye.value)-(Be-Gt(0)),Xe=Ye.value<0?Xe:Xe<3?2:Xe>Be?Be-Gt(Ye.value):Xe,be?Be-Gt(Ye.target)-(Be-Gt(0)):Xe})}else{if(Re=Yt.selectAll(".x-value").data(s.settings.isStacked?a:$t).enter().append("g").attr("class","series-group g").attr("data-group-id",function(Ye,Xe){return Xe}).attr("transform",function(Ye){var Xe=Lt(s.settings.isStacked?Hn[0]:Ye.name),et=Lt.bandwidth();if(!s.settings.isStacked&&Dn&&et>35*$t.length*2&&(Xe+=et/2/$t.length/2),s.isGrouped&&!s.settings.isStacked&&(2===Ye.data.length?et<120?Xe-=13.5:Xe=Lt(Ye.name):Xe-=35/(et>150?2:4)),s.settings.isStacked&&Dt<290&&et<40){var tn,On,_i=(null===(tn=$t[0])||void 0===tn||null===(On=tn?.data)||void 0===On||null==On?void 0:On.length)||0;Xe=(Dt-et*_i)/_i/2}return"translate(".concat(Xe,",0)")}).selectAll("rect").data(function(Ye){return s.settings.isStacked?Ye:Ye.values}).enter().append("rect").call(function(Ye){Ye._groups.forEach(function(Xe){Xe.forEach(function(et){var tn=et.__data__;_.addAttributes($(et),tn,tn.attributes,"bar")})})}).attr("class",function(Ye,Xe){return"series-".concat(Xe," bar")}).attr("width",Math.min.apply(null,[Nn.bandwidth()-2,35])).attr("x",function(Ye,Xe){var et=Math.min.apply(null,[Nn.bandwidth()-2,35]);return s.settings.isStacked?Fn(Xe):Nn.bandwidth()/2+(et+2)*Xe-(1===$t[0].values.length||5===$t[0].values.length||4===$t[0].values.length?et/2:0)}).attr("y",function(){return Gt(0)>Be?Be:Gt(0)}).attr("height",function(){return 0}),s.settings.useLine&&p.length===p.map(function(Ye){return Ye.line}).length){var lt=d3.scaleBand().rangeRound([0,Dt]).domain(p.map(function(Ye){return Ye.name})),Nt=d3.scaleLinear().range([Be,0]).domain([0,d3.max(Ne)]).nice(),ca=d3.line().x(function(Ye){return lt(Ye.name)+lt.bandwidth()/2}).y(function(Ye){return Nt(Ye.line.value)}),Tn=Yt.append("g").attr("class","line-group"),zt=p.map(function(Ye){return Ye.line}).filter(function(Ye){return null==Ye||null==Ye?void 0:Ye.attributes}),kt="dark"===mt.currentTheme.modeId&&mt.new,Xt="dark"===mt.currentTheme.modeId&&!mt.new;Tn.append("path").call(function(Ye){Ye._groups.forEach(function(Xe){Xe.forEach(function(et){var tn;_.addAttributes($(et),zt[0],null===(tn=zt[0])||void 0===tn||null==tn?void 0:tn.attributes)})})}).datum(p).attr("d",ca(p)).attr("class","line").style("opacity",0).attr("stroke",Xt?"#BDBDBD":kt?"#B7B7BA":mt.new&&"dark"!==mt.currentTheme.modeId?"#47474c":"#313236").attr("stroke-width",2).attr("fill","none"),s.settings.hideDots||Tn.selectAll("circle").data(p).enter().append("circle").call(function(Ye){Ye._groups.forEach(function(Xe){Xe.forEach(function(et,tn){_.addAttributes($(et),zt[0],zt[0].attributes,"dot-".concat(tn+1))})})}).attr("class","dot").style("opacity",0).attr("cx",function(Ye){return lt(Ye.name)+lt.bandwidth()/2}).attr("cy",function(Ye){return Nt(Ye.line.value)}).attr("r",5).style("fill",Xt?"#BDBDBD":kt?"#B7B7BA":mt.new&&"dark"!==mt.currentTheme.modeId?"#47474c":"#313236").style("stroke-width",2).style("cursor","default").on("mouseenter.".concat(s.namespace),function(Ye){var et,tn,On,_i,Zn,ht;et=Ye.line,Zn=this.getBoundingClientRect(),ht="<p><b>".concat(et.name,"</b> ").concat(et.value,"</p>"),tn=de.tooltipSize(ht),On=Zn.left-tn.width/2+6,_i=Zn.top-tn.height-18,""!==ht&&(de.tooltip&&de.tooltip.length&&de.tooltip[c?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(On,_i,ht,"top"))}).on("mouseleave.".concat(s.namespace),function(){de.hideTooltip()})}Re.transition().duration(s.settings.animate?600:0).call(Ti,function(){if(s.settings.useLine){var Ye=Yt.select(".line"),Xe=Ye.node().getTotalLength();Ye.style("opacity",1).attr("stroke-dasharray","".concat(Xe," ").concat(Xe)).attr("stroke-dashoffset",Xe).transition().duration(s.settings.animate?300:0).ease(d3.easeCubic).attr("stroke-dashoffset",0).call(Ti,function(){Yt.selectAll(".dot").transition().duration(s.settings.animate?100:0).style("opacity",1)})}}).attr("y",function(Ye){var Xe=s.settings.isStacked?Be-ni(Ye.y)-ni(Ye.y0):Gt(Ye.value<0?0:Ye.value);return Ye.value<0?Xe:Xe>Be-3?Be-2:Xe}).attr("height",function(Ye){var Xe;if(s.settings.isStacked)Xe=ni(Ye.y);else{if(Ye.value<=0)return Be-Gt(0)-(Be-Gt(Ye.value));Xe=Be-Gt(Ye.value)-(Be-Gt(0))}return Ye.value<0?Xe:Xe<3?2:Xe>Be?Be-Gt(Ye.value):Xe})}return Re};le&&(yt=ba(!0));var Bi=ba();le&&(Pt=d3.selectAll([].concat(Un(yt.nodes()),Un(Bi.nodes())))),le||(s.settings.isStacked?s.settings.isStacked&&!re?Bi.style("cursor",s.settings.selectable?"pointer":"inherit").style("fill",function(){var be=d3.select(this.parentNode).attr("data-group-id");return de.chartColor(be,"bar",p[be])}).attr("mask",function(){var be=d3.select(this.parentNode).attr("data-group-id");return p[be].pattern?"url(#".concat(p[be].pattern,")"):null}):s.settings.isStacked&&re&&Bi.style("fill",function(be,Re){return de.chartColor(Re,"bar",be[0])}).attr("mask",function(be){return be[0].pattern?"url(#".concat(be[0].pattern,")"):null}):Bi.style("fill",function(be,Re){return re?de.chartColor(Re,"column-single",p[0].data[Re]):de.chartColor(Re,"bar",_e[Re])}).style("cursor",s.settings.selectable?"pointer":"inherit").attr("mask",function(be,Re){return re?p[0].data[Re].pattern?"url(#".concat(p[0].data[Re].pattern,")"):null:_e[Re].pattern?"url(#".concat(_e[Re].pattern,")"):null})),$.extend(de.settings,{svg:Yt,chartType:"Column",isSingle:re,isGrouped:J,isStacked:s.settings.isStacked});var Ai=!1,ya=0;if(s.element.off("dblclick.".concat(s.namespace)).on("dblclick.".concat(s.namespace),"*",function(be){be.stopImmediatePropagation()}),(le?Pt:Bi).on("mouseenter.".concat(s.namespace),function(be,Re){var At,lt,Nt,ca,Tn,zt,kt,Xt=this,Ye=$(this),Xe="",et=null,tn=d3.event.pageY,On=function(ji,cn){return ji&&cn?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(cn,'" mask="url(#').concat(ji,')" height="12" width="12" />')+"</svg>":""},_i=Re,Zn=null;s.isGrouped&&((Zn={elem:d3.select(this.parentNode)}).data=Zn.elem.datum().values,Zn.items=Zn.elem.selectAll(".bar"),Zn.idx=parseInt(Zn.elem.attr("data-group-id"),10),_i=Zn.idx*Zn.data.length+Re);var ht=function(ji){zt=de.tooltipSize(Xe);var cn=de.tooltip.outerHeight(),bn=null;ue.isValidElement(et)?(bn=et.getBoundingClientRect(),At=bn.left-zt.width/2+bn.width/2,et!==Zn.elem.node()?lt=bn.top-zt.height-10:(lt=tn-cn-25,ji?(lt+=cn+50)>bn.bottom+10&&(lt=bn.bottom+10):lt=bn.top-cn+25)):(bn=Ye[0].getBoundingClientRect(),At=bn.left-zt.width/2+Ye.attr("width")/2,s.settings.isStacked?lt=bn.top-zt.height-10:(bn=Xt.parentNode.getBoundingClientRect(),lt=tn-cn-25,p.length>1&&(At=bn.left-zt.width/2+bn.width/2,ji?(lt+=cn+50)>bn.bottom+10&&(lt=bn.bottom+10):lt=bn.top-cn+25))),""!==Xe&&(de.tooltip&&de.tooltip.length&&de.tooltip[c?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(At,lt,Xe,ji?"bottom":"top"))},wa=function(){"string"==typeof Xe?Xe=function(ji,cn,bn){if(null==bn?bn=/{{(\w+)}}/g:"string"==typeof bn&&(bn=new RegExp(bn,"g")),"string"==typeof ji&&bn instanceof RegExp)for(var Mn=9999;bn.test(ji)&&Mn>0;)ji=ji.replace(bn,function(er,Dl){return cn(0,Dl)}),Mn--;return ji}(Xe,function(ji,cn){var bn=d(be[cn]);return isNaN(bn)?be[cn]:bn}):"number"==typeof Xe&&(Xe=Xe.toString())},ai=function(ji){Xe="";var cn={elem:Xt,index:Re,data:be};s.isGrouped&&(cn.groupElem=Zn.elem.node(),cn.groupItems=Zn.items.nodes(),cn.groupIndex=Zn.idx,cn.groupData=Zn.data);var bn=function(er,Dl){"string"!=typeof er&&"number"!=typeof er||(Xe=er,et=Dl,wa())},Mn=!0;Wt=setInterval(function(){Mn&&(Mn=!1,ji(bn,cn)),""!==Xe&&(clearInterval(Wt),ht())},10)};if(s.settings.isStacked){if(re)Xe="<p><b>".concat(d(be[0].value),"</b> ").concat(be[0].name,"</p>");else{for(Xe="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(a[0][Re].name,"</b></div>"),Nt=a.length-1,ca=0;Nt>=ca;Nt--)Tn=de.chartColor(Nt,"bar",p[Nt]),Xe+="".concat('<div class="swatch-row"><div style="background-color:').concat(p[Nt].pattern?"transparent":Tn,';">').concat(On(p[Nt].pattern,Tn),"</div>")+"<span>".concat(a[Nt][Re].parentName,"</span><b>").concat(d(a[Nt][Re].value),"</b>")+"</div>";Xe+="</div>"}zt=de.tooltipSize(Xe),At=Ye[0].getBoundingClientRect().left-zt.width/2+Ye.attr("width")/2,lt=Ye[0].getBoundingClientRect().top-zt.height-10}else{if(le)Xe="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(be.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(ot.target?"transparent":qn(nt.target),';">').concat(On(ot.target,qn(nt.target)),"</div>")+"<span>".concat(Ze.target,"</span><b>").concat(d(be.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(be.value<0?ot.negative?"transparent":qn(nt.negative):ot.positive?"transparent":qn(nt.positive),';">').concat(be.value<0?On(ot.negative,qn(nt.negative)):On(ot.positive,qn(nt.positive)),"</div>")+"<span>".concat(Ze[be.value<0?"negative":"positive"],"</span><b>").concat(d(be.value),"</b>")+"</div></div>";else if(1===p.length)Xe="<p><b>".concat(d(be.value),"</b> ").concat(be.name,"</p>");else{var uo=d3.select(this.parentNode).datum().values;for(Xe='<div class="chart-swatch">',Nt=0,ca=uo.length;Nt<ca;Nt++)Tn=de.chartColor(Nt,"bar",_e[Nt]),Xe+="".concat('<div class="swatch-row"><div style="background-color:').concat(_e[Nt].pattern?"transparent":Tn,';">').concat(On(_e[Nt].pattern,Tn),"</div>")+"<span>".concat(uo[Nt].name,"</span><b>").concat(d(uo[Nt].value),"</b>")+"</div>";Xe+="</div>",kt=uo.length>6}zt=de.tooltipSize(Xe),At=Ye[0].getBoundingClientRect().left-zt.width/2+Ye.attr("width")/2,lt=tn-de.tooltip.outerHeight()-25,p.length>1&&(At=this.parentNode.getBoundingClientRect().left-zt.width/2+this.parentNode.getBoundingClientRect().width/2,lt=this.parentNode.getBoundingClientRect().top-de.tooltip.outerHeight()+25)}vn&&"function"==typeof vn&&void 0===be.tooltip&&!Et[_i]?ai(vn):(Xe=Et[_i]||vn||Xe||"",Et[_i]||!1===be.tooltip||null==be.tooltip||("function"==typeof be.tooltip?ai(be.tooltip):(Xe=be.tooltip.toString(),wa(),Et[_i]=Xe)),"string"==typeof Xe&&""!==Xe&&ht(kt))}).on("mouseleave.".concat(s.namespace),function(){clearInterval(Wt),de.hideTooltip()}).on("contextmenu.".concat(s.namespace),function(be){de.triggerContextMenu(s.element,d3.select(this).nodes()[0],be)}).on("click.".concat(s.namespace),function(be,Re,At){var lt=this;s.settings.selectable&&(ya=setTimeout(function(){Ai||s.doClickAction(be,Re,lt,At),Ai=!1},200))}).on("dblclick.".concat(s.namespace),function(be,Re){clearTimeout(ya),Ai=!0,s.doDoubleClickAction(be,Re,this)}),s.settings.isGrouped=J,s.settings.isSingle=re,s.settings.svg=this.svg,s.settings.showLegend){var la,Xn=p.map(function(be){return be.line});if(re&&p[0].name)de.addLegend(p,"column-single",s.settings,s.element);else if(le)de.addLegend(ft,s.settings.type,s.settings,s.element);else if(s.settings.isStacked&&re)de.addLegend(_e,s.settings.type,s.settings,s.element);else if(!re){var Cn=s.settings.isStacked?Oe:_e;s.settings.useLine&&(la=Xn.filter(function(be){return be.name}),Cn.push(la[0])),Cn=Cn.map(function(be){var Re;return!be.attributes||null!==(Re=be.data)&&void 0!==Re&&Re?.attributes||(be.data?be.data.attributes=be.attributes:be.data={attributes:be.attributes}),be}),de.addLegend(Cn,s.settings.type,s.settings,s.element)}if(s.settings.useLine&&Xn.length){var In=$(".chart-legend-item-text");la[0].name===In.last().text()&&($(".chart-legend-color").last().addClass("dark"===mt.currentTheme.modeId?"slate03":"slate08"),s.element.find(".chart-legend-item").last().attr("style","pointer-events: none"))}}return z&&s.settings.xAxis&&null!==(n=s.settings.xAxis)&&void 0!==n&&n?.rotate&&s.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return-(this.getBBox().width+10)}).attr("dy","1em").attr("transform","rotate(".concat(L.use,")")).style("text-anchor","start"),s.settings.xAxis&&s.settings.xAxis.formatText&&s.svg.selectAll(".x.axis .tick text").each(function(be){var Re=d3.select(this),At=d3.select(this).text(),lt=s.settings.xAxis.formatText(At,be);ue.html(Re.node(),lt,"<tspan>")}),de.isRTL&&de.isIE&&(Yt.selectAll("text").attr("transform","scale(-1, 1)"),Yt.selectAll(".y.axis text").style("text-anchor","start"),le&&Yt.selectAll(".negative-value").style("text-anchor","end")),Yt.selectAll(".y.axis .tick").attr("class",function(be){return"tick".concat(0===be?" tick0":"")}),de.appendTooltip(),z||s.settings.xAxis||null!==(i=s.settings.xAxis)&&void 0!==i&&i?.rotate||(de.labelsColide(Yt)&&de.applyAltLabels(Yt,$t,"shortName"),de.labelsColide(Yt)&&de.applyAltLabels(Yt,$t,"abbrName"),de.labelsColide(Yt)&&(de.applyAltLabels(Yt,$t,null,null,!0),le&&Yt.selectAll(".target-bartext, .bartext").attr("x",function(){return+d3.select(this).attr("x")-(oe?-6:6)}))),de.setSelected=function(be,Re){var At,lt,Nt,ca,Tn,zt=0,kt=_.equals,Xt=Yt.node().parentNode.nextSibling,Ye=d3.select(Xt),Xe=Ye.node()&&Ye.classed("chart-legend"),et=function(tn,On){var _i=!!tn;tn=_i?d3.select(tn):Yt,On=void 0!==On?On:0,tn.selectAll(".bar").each(function(Zn,ht){Zn&&zt<1&&(void 0!==be.fieldName&&void 0!==be.fieldValue&&be.fieldValue===(re&&s.settings.isStacked?Zn[0][be.fieldName]:Zn[be.fieldName])||void 0!==be.index&&be.index===ht||be.data&&kt(be.data,p[On].data[ht])||be.elem&&$(this).is(be.elem))&&(zt++,lt=d3.select(this),At=ht,_i&&!s.settings.isStacked&&(Nt=!0))})};J||s.settings.isStacked&&!re&&!J?(p.forEach(function(tn,On){zt<1&&(ca=$(Yt.select('[data-group-id="'.concat(On,'"]')).node()),(void 0!==be.groupName&&void 0!==be.groupValue&&be.groupValue===tn[be.groupName]||void 0!==be.groupIndex&&be.groupIndex===On||be.data&&kt(be.data,tn)||be.elem&&ca.is(be.elem))&&void 0===be.fieldName&&void 0===be.fieldValue&&void 0===be.index&&(zt++,lt=Yt.select('[data-group-id="'.concat(On,'"]')).select(".bar"),At=On,s.settings.isStacked&&!J&&(Nt=!0)))}),zt<1&&(Tn=Yt.selectAll(".series-group")).nodes().length&&Tn.each(function(tn,On){et(this,On)})):et(),zt>0&&(Re||!lt.classed("is-selected"))&&(Nt?Xe&&$(Ye.selectAll(".chart-legend-item")[0][At]).trigger("click.chart"):lt.on("click.".concat(s.namespace)).call(lt.node(),lt.datum(),At))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var e,t,n,i,a=this,s=/positive-negative/.test(a.settings.type),o=a.svg.node().parentNode.nextSibling,c=d3.select(o),d=c.node()&&c.classed("chart-legend"),p=!1,f=0,m=function(T){(T=T?d3.select(T):a.svg).selectAll(".bar").each(function(S,M){S&&(a.isSingle&&a.settings.isStacked?S[0]:S).selected&&f<1&&(f++,t=d3.select(this),e=M)})};if(s){var b=function(T){p=!0,e=T,f++};if(a.dataset[0].targetBarsSelected)b(0);else{var C={selected:0,i:-1};a.dataset[0].data.forEach(function(T,S){T.selected&&(C.selected++,C.i=S)}),C.selected>1&&(C.elem=a.svg.select(".target-bar.series-".concat(C.i)),b(C.elem.classed("positive")?1:2))}}p||!a.isGrouped&&(!a.settings.isStacked||a.isSingle||a.isGrouped)?m():(a.dataset.forEach(function(T,S){T.selected&&f<1&&(f++,t=a.svg.select('[data-group-id="'.concat(S,'"]')).select(".bar"),e=S,!a.settings.isStacked||a.isSingle||a.isGrouped||(i=!0))}),f<1&&function(){var T=a.svg.selectAll(".series-group");if(T.nodes().length){var S={groups:[],itemsInGroup:0};if(T.each(function(L,z){var V;m(this),((n=Array.isArray(L))||null!=L&&L?.data&&Array.isArray(null==L||null==L?void 0:L.data))&&(S.itemsInGroup=(n?L:L.data).length,f>0&&S.groups.push({i:z,totalSel:(V=n?L:L.data,V.reduce(function(N,U){return U.selected?N+1:N},0))}))}),S.gLen=S.groups.length,!p&&(n&&S.gLen&&S.groups[0].totalSel>1||S.gLen===T.size()&&!n)){var M=S.groups.filter(function(L){return(null==L||null==L?void 0:L.totalSel)>1}).length;p=n?!!M:!M,n&&(e=S.groups[0].i)}}}()),f>0&&(i||p?d&&(this.initialSelectCall=!0,$(c.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,t.on("click.".concat(a.namespace)).call(t.node(),t.datum(),e))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return de.selected},setSelected:function(e,t){de.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(e,t,n,i){var a=n&&d3.select(n).classed("target-bar"),s=n&&d3.select(n).classed("is-selected"),o=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);if(a)for(var c=this.svg.selectAll(".bar").nodes(),d=c.length,p=0;p<d;p++)if(d3.select(c[p]).classed("is-selected")){s=!1;break}de.setSelectedElement({task:s?"unselected":"selected",container:this.element,selector:n,isTrigger:!this.initialSelectCall&&!s,isTargetBar:a,triggerGroup:this.isGrouped,d:e,i:t,type:this.settings.type,dataset:this.dataset,isSingle:this.isSingle,isGrouped:this.isGrouped,isStacked:this.settings.isStacked,svg:this.svg,clickedLegend:!0===i}),s&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},this.isGrouped?o:t])},doDoubleClickAction:function(e,t,n){var i;if(this.settings.isGrouped){var a=d3.select(n.parentNode),s=parseInt(null==a||null==a?void 0:a.attr("data-group-id"),10),o=[];a.selectAll(".bar").each(function(p,f){o.push({elem:this,data:p,index:f})}),i=[{groupElem:a.node(),groupIndex:s,groupItems:o}]}else if(this.isSingle&&this.settings.isStacked){var c,d=this.dataset&&null!==(c=this.dataset[0])&&void 0!==c&&c?.data&&this.dataset[0].data[t]?this.dataset[0].data[t]:e;i=[{data:d,index:t,elem:[n]}]}else this.settings.isStacked?(i=[],this.svg.selectAll(".series-group").each(function(){var p=d3.select(this).selectAll(".bar").nodes()[t];i.push({elem:p,data:d3.select(p).datum(),index:t})})):i=[{data:e,index:t,elem:n}];this.element.triggerHandler("dblclick",[i])},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var Le={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,selectable:!0,showLines:!0,labelFactor:1.27,wrapWidth:60,fitHeight:!0,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function De(e,t){this.settings=_.mergeSettings(e,t,Le),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),de.destroy(e),this.init()}De.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,n,i,a,s,o,c,d,p,f=this,m=this.settings,b=this.element.parent(),C=this.element.closest(".is-personalizable").length>0,T=!!m.formatterString,S=function(je){return d3.format(f.settings.formatterString||",")(je)},M=[],L=[],z=m.tooltip,V=0,N=30,U=b.width()<450,G=m.dataset;this.isRTL=P.isRTL(),this.dataset=G;var Z=window.innerWidth;this.viewport={xxsmall:Z<=380,xsmall:Z>=381&&Z<=450,small:Z>=451&&Z<=480,medium:Z>=481&&Z<=992,large:Z>992};var oe,le,re={top:20,left:30,right:30,bottom:1===G.length?5:30};if(m.isGrouped&&1===G.length&&(re.bottom=30,V=2),this.element.addClass("bar-chart"),m.isGrouped&&this.element.addClass("bar-chart-grouped"),m.isStacked&&this.element.addClass("bar-chart-stacked"),0===G.length)return f.element.emptymessage(m.emptyMessage),this;var J={},ce={atLeastOne:!1},ke=["left","top","right","bottom"];if(m.axisLabels&&$.extend(!0,J,m.axisLabels),!$.isEmptyObject(J))for(oe=0,le=ke.length;oe<le;oe++){var _e=J[ke[oe]];_e&&"string"==typeof _e&&""!==$.trim(_e)&&(ce[ke[oe]]=!0,ce.atLeastOne=!0)}var Oe=G.map(function(je){return{name:je.name,color:je.color,pattern:je.pattern,attributes:je.attributes}});this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var Qe={y1:[],y2:[]};G=G.map(function(je,Ke){return je.data.map(function(tt,Ne){var bt=0;return 0===Ke?(Qe.y1.push(tt.value),Qe.y2.push(0)):(bt=Qe.y1[Ne]+Qe.y2[Ne],Qe.y1[Ne]=tt.value,Qe.y2[Ne]=bt),$.extend({},tt,{y0:bt,y:tt.value,x:de.getLabel(tt,f.viewport),color:tt.color,pattern:tt.pattern})})}),e=0,t="",G=G.map(function(je,Ke){if(!m.isStacked&&Oe[Ke]){var tt=de.getLabel(Oe[Ke],f.viewport),Ne=tt.length;t=Ne>e?tt:t,e=Ne>e?Ne:e}return je.map(function(bt){if(m.isStacked){var _t=bt.x.length;t=_t>e?bt.x:t,e=_t>e?_t:e}return $.extend({},bt,{x:bt.y,y:bt.x,x0:bt.y0,color:bt.color,pattern:bt.pattern})})});var nt=_.getParentAvailableHeight(f.element[0]),ot=m.fitHeight?nt:parseInt(b.height(),10),Ze=ot-re.top-re.bottom-30,ft=ot-re.bottom-(m.isStacked?0:15),Wt=parseInt(b.width(),10)-re.left,xt=de.calculateTextRenderWidth(t);xt<200&&(xt+=26),de.calculatePercentage(xt,Wt)>55&&(xt=de.getPercentage(Wt,this.ellipsis.percentageWidth),this.ellipsis.use=!0),f.svg=d3.select(this.element[0]).append("svg").attr("width",Wt+(ce.atLeastOne?20:0)).attr("height",ft+(ce.atLeastOne?5:0)).append("g").attr("class","group").attr("aria-label","".concat(m.dataset[0].name?m.dataset[0].name:"Name Group")).attr("transform","translate(".concat(xt,",").concat(re.top-(ce.atLeastOne?3:0),")")),"bar"===f.settings.type&&(f.svg.append("title"),f.svg.append("title").text("Bar Chart"));var jt=d3.min(G,function(je){return d3.min(je,function(Ke){return m.isStacked?Ke.x+Ke.x0:Ke.x})}),Ut=d3.max(G,function(je){return d3.max(je,function(Ke){return m.isStacked?Ke.x+Ke.x0:Ke.x})});if(m.isStacked&&m.isNormalized){var en=[];G.forEach(function(je){je.forEach(function(Ke,tt){en[tt]=(void 0===en[tt]?0:en[tt])+Ke.x})}),G.forEach(function(je){je.forEach(function(Ke,tt){var Ne=en[tt]/100;Ke.x/=Ne,Ke.x0/=Ne})}),Ut=100}var gn,Pn=Wt-xt-re.left;gn=m.useLogScale?d3.scaleLog().domain([jt>0?jt:1,Ut]).range([1,Pn]).nice():d3.scaleLinear().domain([jt<0?jt:0,Ut]).range([0,Pn]).nice(),m.isStacked?(n=G[0].map(function(je){return je.y}),d=.32):(n=Oe.map(function(je){return je.name}),function(){for(var je,Ke=G.length-1;Ke>-1;Ke--)je=G[Ke].map(function(tt){return tt}),$.extend(!0,M,je),M=$.map(M,function(tt){return tt})}(),i=0,d=(s=Ze/n.length)/(a=M.length),c=s-(o=a>1?s-.6*d:N),N=o/a,d=0);var Dt=d3.scaleBand().domain(n).rangeRound([0,Ze]).padding(d,d),Be=d3.axisBottom().scale(gn).tickSize(-Ze);U&&Be.ticks(xt<100?5:3),m.isStacked&&m.isNormalized&&Be.tickFormat(function(je){return"".concat(je,"%")}),m.useLogScale&&(Be.ticks(10,",.1s"),!1===m.showLines&&Be.tickSize(0)),m.ticks&&!m.useLogScale&&(f.viewport.small?Be.ticks(m.ticks.smallNumber,m.ticks.format):f.viewport.medium?Be.ticks(m.ticks.mediumNumber,m.ticks.format):f.viewport.large&&Be.ticks(m.ticks.largeNumber,m.ticks.format));var Tt=d3.axisLeft().scale(Dt).tickPadding(15).tickSize(0);f.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(Ze,")")).call(Be),f.svg.append("g").attr("class","axis y").call(Tt);var ze=f.svg.selectAll("g.group").data(G).enter().append("g").attr("class","series-group").attr("role","list").attr("title","".concat(m.type)).attr("tabindex",0).attr("data-group-id",function(je,Ke){return Ke});m.isGrouped=f.svg.selectAll(".series-group").nodes().length>1&&!m.isStacked||m.isGrouped&&1===G.length,m.isSingle=1===f.svg.selectAll(".series-group").nodes().length&&m.isStacked;var Et,vn=!1,Lt=0,Nn=ze.selectAll("rect").data(function(je,Ke){return je.forEach(function(tt){tt.index=Ke,m.isStacked||(tt.gindex=i++)}),je}).enter();if(this.settings.isSingle&&(Nn=Nn.append("g").attr("role","listitem")),Nn.append("rect").call(function(je){je._groups.forEach(function(Ke){Ke.forEach(function(tt){var Ne=tt.__data__;_.addAttributes($(tt),Ne,Ne.attributes,"bar")})})}).attr("class",function(je,Ke){return"bar series-".concat(Ke)}).attr("aria-hidden",!0).style("fill",function(je,Ke){return m.isStacked?1===Oe.length?de.chartColor(Ke,"bar-single",je):de.chartColor(je.index,"bar",Oe[je.index]):de.chartColor(Ke,"bar",M[Ke])}).attr("mask",function(je,Ke){return 1===G.length&&G[0][Ke].pattern?"url(#".concat(G[0][Ke].pattern,")"):m.isStacked&&Oe[je.index].pattern?"url(#".concat(Oe[je.index].pattern,")"):!m.isStacked&&M[Ke]&&M[Ke].pattern?"url(#".concat(M[Ke].pattern,")"):""}).attr("x",function(je){return m.useLogScale?0:m.isStacked&&!m.isSingle?gn(je.x0)+1:gn(0)+1}).attr("y",function(je){return m.isStacked?Dt(je.y):(s-o)/2+(je.gindex*N+je.gindex*V)+je.index*c}).attr("height",function(){return m.isStacked?Dt.bandwidth():N}).attr("width",0).on("mouseenter.".concat(f.namespace),function(je,Ke){var tt,Ne,bt,_t=this,mn=0,kn=[],Kt="",ii=null,yt=d3.select(this),Pt=this.parentNode,$t=d3.select(Pt).datum(),Rn=Math.round($t.length/2),Dn=function(Cn,In){return Cn&&In?'<svg width="12" height="12"><rect mask="url(#'.concat(Cn,')" height="12" width="12" /></svg>'):""},qn=null;m.isGrouped&&((qn={elem:d3.select(Pt)}).data=$t,qn.items=qn.elem.selectAll(".bar"),qn.idx=parseInt(Pt.getAttribute("data-group-id"),10));var Ti=function(){var Cn=!m.isStacked&&$t.length>6,In=$(".series-".concat(Rn),Pt)[0],be=(ue.isValidElement(ii)?ii===qn.elem.node()?In:ii:m.isGrouped?In:yt.node()).getBoundingClientRect(),Re=$(window),At=be.top+Re.scrollTop(),lt=be.left+Re.scrollLeft(),Nt=de.tooltipSize(Kt),ca=lt+be.width/2-Nt.width/2,Tn=Cn?At:At-Nt.height-13;""!==Kt&&(de.tooltip&&de.tooltip.length&&de.tooltip[C?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(ca,Tn,Kt,Cn?"bottom":"top"))},ba=function(){"string"==typeof Kt?Kt=function(Cn,In,be){if(null==be?be=/{{(\w+)}}/g:"string"==typeof be&&(be=new RegExp(be,"g")),"string"==typeof Cn&&be instanceof RegExp)for(var Re=9999;be.test(Cn)&&Re>0;)Cn=Cn.replace(be,function(At,lt){return In(0,lt)}),Re--;return Cn}(Kt,function(Cn,In){var be=S(je[In]);return isNaN(be)?je[In]:be}):"number"==typeof Kt&&(Kt=Kt.toString())},Bi=function(Cn){Kt="";var In={elem:_t,index:Ke,data:je};m.isGrouped&&(In.groupElem=qn.elem.node(),In.groupItems=qn.items.nodes(),In.groupIndex=qn.idx,In.groupData=qn.data);var be=function(At,lt){"string"!=typeof At&&"number"!=typeof At||(Kt=At,ii=lt,ba())},Re=!0;p=setInterval(function(){Re&&(Re=!1,Cn(be,In)),""!==Kt&&(clearInterval(p),Ti())},10)};if(1===G.length)Kt="<p><b>".concat(je.y," </b>").concat(je.x,"</p>");else{if(Kt='<div class="chart-swatch">',m.isStacked)for(tt=0,Ne=G.length;tt<Ne;tt++){mn=0,bt=de.chartColor(tt,"bar",Oe[tt]);for(var Ai=0,ya=G.length;Ai<ya;Ai++)m.isNormalized?(mn+=G[Ai][Ke].value,kn[Ai]=G[Ai][Ke].value):(mn+=G[Ai][Ke].x,kn[Ai]=G[Ai][Ke].x);Kt+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(Dn(Oe[tt].pattern,bt),"</div>\n                  <span>").concat(Oe[tt].name,"</span>\n                  <b> ").concat(T?S(kn[tt]):"".concat(Math.round(kn[tt]/mn*100),"%")," </b>\n                </div>")}else for(tt=0,Ne=$t.length;tt<Ne;tt++)bt=de.chartColor(tt,"bar",M[tt]),Kt+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(Dn(M[tt].pattern,bt),"</div>\n                  <span>").concat($t[tt].name,"</span><b>").concat(S($t[tt].value),"</b>\n                </div>");Kt+="</div>"}if(mn>0&&(Kt='<span class="chart-tooltip-value"><b>'.concat(je.value,'</b> Value</span><span class="chart-tooltip-total"><b>').concat(Math.round(mn),"</b> ").concat(P.translate("Total"),"</span>").concat(Kt)),z&&"function"==typeof z&&!L[Ke])Bi(z);else if(Kt=L[Ke]||z||Kt||"",L[Ke]||!1===je.tooltip||null==je.tooltip||("function"==typeof je.tooltip?Bi(je.tooltip):(Kt=je.tooltip.toString(),ba(),L[Ke]=Kt)),"string"==typeof Kt&&""!==Kt&&Ti(),m.isStacked)for(tt=0,Ne=G.length;tt<Ne;tt++){bt=de.chartColor(tt,"bar",Oe[tt]);var la=$("#svg-tooltip").find(".swatch-row").eq(tt);Oe[tt].pattern||la.find("div").css("background-color",bt),la.find("rect").css("fill",bt)}else for(tt=0,Ne=$t.length;tt<Ne;tt++){bt=de.chartColor(tt,"bar",M[tt]);var Xn=$("#svg-tooltip").find(".swatch-row").eq(tt);M[tt].pattern||Xn.find("div").css("background-color",bt),Xn.find("rect").css("fill",bt)}}).on("mouseleave.".concat(f.namespace),function(){clearInterval(p),de.hideTooltip()}).on("contextmenu.".concat(f.namespace),function(je){de.triggerContextMenu(f.element,d3.select(this).nodes()[0],je)}).on("click.".concat(f.namespace),function(je,Ke){var tt=this;Lt=setTimeout(function(){vn||f.settings.selectable&&f.doClickAction(je,Ke,tt),vn=!1},200)}).on("dblclick.".concat(f.namespace),function(je,Ke){clearTimeout(Lt),vn=!0,f.doDoubleClickAction(je,Ke,this)}),$(Nn._parents).each(function(je,Ke){var tt=$(Ke),Ne=je;tt.attr("aria-label","".concat(m.dataset[je].name?m.dataset[je].name:"Name Label")),tt.children(".bar").each(function(bt,_t){var mn=m.dataset[Ne].name;$(_t).attr("aria-label","".concat(m.dataset[Ne].data[bt].value?"".concat(mn," ").concat(m.dataset[Ne].data[bt].value):"Name Label"))})}),f.settings.isSingle&&f.svg.selectAll(".series-group g").append("text").attr("class","audible").text(function(je,Ke){var tt,Ne;return"".concat(null===(tt=m.dataset[0].data[Ke])||void 0===tt||null==tt?void 0:tt.name," ").concat(null===(Ne=m.dataset[0].data[Ke])||void 0===Ne||null==Ne?void 0:Ne.value)}).attr("x",function(je){return m.useLogScale?0:m.isStacked&&!m.isSingle?gn(je.x0)+1:gn(0)+1}).attr("y",function(je){return m.isStacked?Dt(je.y):(s-o)/2+(je.gindex*N+je.gindex*V)+je.index*c}).lower(),f.element.off("dblclick.".concat(f.namespace)).on("dblclick.".concat(f.namespace),"*",function(je){je.stopImmediatePropagation()}),f.svg.selectAll(".axis.y text").attr("aria-hidden",!0).attr("x",function(){return f.isRTL?ce.atLeastOne?5:15:ce.atLeastOne?-5:-15}),f.svg.selectAll(".axis.x text").attr("aria-hidden",!0).attr("class",function(je){return je<0?"negative-value":"positive-value"}),f.isRTL&&(de.isIE||de.isIEEdge)&&(f.svg.selectAll("text").attr("transform","scale(-1, 1)"),f.svg.selectAll(".y.axis text").style("text-anchor","last")),ce.atLeastOne){var Gt=f.svg.append("g").attr("class","axis-labels"),Fn=Wt-95,ni=Ze-60,$n={top:"translate(".concat(Fn/2,",").concat(-4,")"),right:"translate(".concat(Fn+53,",").concat(Ze/2,")rotate(90)"),bottom:"translate(".concat(Fn/2,",").concat(ni+89,")"),left:"translate(".concat(-35,",").concat(Ze/2,")rotate(-90)")},Hn={top:"rotate(0deg) scaleX(-1) translate(-".concat(Fn/2,"px, ").concat(-4,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(Ze/2+5,"px, -").concat(Fn+(this.isRTL?45:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(Fn/2,"px, ").concat(ni+89,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(Ze/2-5,"px, ").concat(this.isRTL?45:55,"px)")};for(oe=0,le=ke.length;oe<le;oe++)ce[Et=ke[oe]]&&Gt.append("text").attr("class","axis-label-".concat(Et)).attr("text-anchor","middle").attr("transform",f.isRTL?"":$n[Et]).style("font-size","1.2em").style("transform",f.isRTL?Hn[Et]:"").text(J[Et])}if(U&&m.useLogScale){var ki=d3.selectAll(".x .tick text"),qa=!1;ki.attr("class",function(je,Ke){var tt=Math.round(ki.size()/2);Ke>=tt&&!qa&&je.toString().startsWith("1")&&(qa=!0,tt=je),0!==Ke&&Ke!==ki.size()-1&&(m.useLogScale?je!==tt:Ke!==tt)&&d3.select(this).remove()})}if(f.svg.selectAll(".x.axis .tick").attr("class",function(je){return"tick".concat(0===je?" tick0":"")}),f.svg.selectAll(".bar").transition().duration(m.animate?600:0).attr("width",function(je){var Ke=gn(je.x),tt=gn(0);return!isNaN(Ke)&&Aa.isFinite(Ke)||(Ke=0),!isNaN(tt)&&Aa.isFinite(tt)||(tt=0),Math.abs(Ke-tt)}).attr("x",function(je){return m.useLogScale?0:m.isStacked&&!m.isSingle?gn(je.x0)+1:je.x<0?gn(je.x)+1:gn(0)+1}),m.svg=f.svg,m.showLegend){var Yt=m.isStacked?Oe:M;Yt=Yt.map(function(je){var Ke;return!je.attributes||null!==(Ke=je.data)&&void 0!==Ke&&Ke?.attributes||(je.data?je.data.attributes=je.attributes:je.data={attributes:je.attributes}),je}),de.addLegend(Yt,m.type,m,this.element)}return de.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var e,t=this,n=null===(e=this.settings)||void 0===e||null==e?void 0:e.dataset;if(n&&(!n||n.constructor===Array)){var i,a,s,o,c,d,p=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),f={};this.ellipsis.use&&(f.maxWidth=this.element.width(),f.transX=(null===(i=this.svg)||void 0===i||null===(a=i?.node())||void 0===a||null===(s=a?.transform)||void 0===s||null===(o=s?.baseVal)||void 0===o||null===(c=o?.consolidate())||void 0===c||null===(d=c?.matrix)||void 0===d||null==d?void 0:d.e)||1,f.customCss=function(){return{tooltip:{maxWidth:"".concat(f.maxWidth,"px")},arrow:{left:t.isRTL?"calc(100% - 20px)":"20px"}}});var m=function(b,C){var T;if(t.ellipsis.use){if("..."===(T=de.trimText(b.name,t.ellipsis.threshold)).substr(-3)){var S=de.calculateTextRenderWidth(b.name),M=de.calculateTextRenderWidth(T),L=p[C].parentNode;if(!Ie.browser.isIE11()){T=b.name,p[C].classList.add("hidden"),d3.select(L).append("foreignObject").attr("overflow","visible").attr("width","".concat(f.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(C)).attr("x","-".concat(f.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var z=L.querySelector(".text.ellipsis");if(z){var V=document.createTextNode(b.name);z.appendChild(V)}}d3.select(L).on("mouseover.".concat(t.namespace),function(){var N,U,G,Z,oe=(N=L.getBoundingClientRect(),U=Math.ceil(S/f.maxWidth),G=((G=f.transX-M)<0?30:G)+20,Z=((Z=N.top)<0?30:Z)-36,U>1&&(Z-=.5*(U-1)*33),t.isRTL&&(G=N.left-S+f.transX),{x:G,y:Z});de.showTooltip(oe.x,oe.y,b.name,"top",f.customCss())}).on("mouseout.".concat(t.namespace),function(){return de.hideTooltip()})}}else T=de.getLabel(b,t.viewport);return T};this.settings.selectable||this.element.find(".bar").css("cursor","inherit"),n.forEach(this.settings.isGrouped?function(b,C){p[C].textContent=m(b,C)}:function(b){var C=Object.keys(b).map(function(T){return T});Object.keys(b).map(function(T){return b[T]}).forEach(function(T,S){T&&T.constructor===Array&&T.forEach(function(M,L){"attributes"!==C[S]&&(p[L].textContent=m(M,L))})})})}},setInitialSelected:function(){var e,t,n,i=this,a=i.svg.node().parentNode.nextSibling,s=d3.select(a),o=s.node()&&s.classed("chart-legend"),c=!1,d=0,p=function(f){(f=f?d3.select(f):i.svg).selectAll(".bar").each(function(m,b){m&&m.selected&&d<1&&(d++,t=d3.select(this),e=b)})};i.settings.isGrouped||i.settings.isStacked&&!i.settings.isSingle?(i.settings.dataset.forEach(function(f,m){f.selected&&d<1&&(d++,t=i.svg.select('[data-group-id="'.concat(m,'"]')).select(".bar"),e=m,i.settings.isStacked&&!i.settings.isGrouped&&(n=!0))}),d<1&&function(){var f=i.svg.selectAll(".series-group");if(f.nodes().length){var m,b={groups:[],itemsInGroup:0};if(f.each(function(S,M){var L;p(this),Array.isArray(S)&&(b.itemsInGroup=S.length,d>0&&b.groups.push({i:M,d:S,totalSel:(L=S,L.reduce(function(z,V){return V.selected?z+1:z},0))}))}),b.gLen=b.groups.length,!c&&i.settings.isGrouped&&b.gLen===f.size()&&1===(null===(m=b.groups[0])||void 0===m||null==m?void 0:m.totalSel)){c=!0;for(var C=0,T=b.groups[0].d;C<T;C++)if(b.groups[0].d[C].selected){e=C;break}}}}()):p(),d>0&&(n||c?o&&(this.initialSelectCall=!0,$(s.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,t.dispatch("click"))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return de.selected},setSelected:function(e,t){de.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle})},toggleSelected:function(e){this.setSelected(e,!0)},doClickAction:function(e,t,n){var i=this.settings,a=n&&d3.select(n).classed("is-selected"),s=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);de.setSelectedElement({task:a?"unselected":"selected",container:this.element,selector:n,isTrigger:!this.initialSelectCall&&!a,triggerGroup:i.isGrouped,d:e,i:t,type:i.type,dataset:i.dataset,isSingle:this.isSingular,isGrouped:i.isGrouped,isStacked:i.isStacked,svg:this.svg,clickedLegend:i.clickedLegend}),a&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},i.isGrouped?s:t])},doDoubleClickAction:function(e,t,n){var i,a=this.settings;if(a.isGrouped){var s=d3.select(n.parentNode),o=parseInt(null==s||null==s?void 0:s.attr("data-group-id"),10),c=[];s.selectAll(".bar").each(function(d,p){c.push({elem:this,data:d,index:p})}),i=[{groupElem:s.node(),groupIndex:o,groupItems:c}]}else"bar-stacked"===a.type?(i=[],this.svg.selectAll(".series-group").each(function(){var d=d3.select(this).selectAll(".bar").nodes()[t];i.push({elem:d,data:d3.select(d).datum(),index:t})})):i=[{data:e,index:t,elem:n}];this.element.triggerHandler("dblclick",[i])},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var ut={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,selectable:!0,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},showCenterTooltip:!1,fitHeight:!0,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function wt(e,t){this.settings=_.mergeSettings(e,t,ut),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),de.destroy(e),this.init()}wt.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===Ie.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var e=this,t=this.settings;e.svg=d3.select(this.element[0]).append("svg"),e.mainGroup=e.svg.append("g"),e.mainGroup.append("g").attr("class","slices"),e.mainGroup.append("g").attr("class","labels"),e.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),t.showMobile&&(t.legendPlacement="bottom"),t.legendPlacement&&this.element.addClass("has-".concat(t.legendPlacement,"-legend"));var n=parseInt(this.element.width(),10),i=parseInt(this.element.height(),10),a={height:i,width:n};a.isSmallView=a.width<360;var s="bottom"===t.legendPlacement&&a.isSmallView&&!t.showMobile;s&&(this.element.closest(".widget-content").css({height:"","min-height":""}),i=parseInt(this.element.height(),10),a.height=i),!s&&t.fitHeight&&a.isSmallView&&(i=_.getParentAvailableHeight(e.element[0]),a.height=i),("label"===t.lines.show&&"bottom"===t.legendPlacement||"label"===t.lines.show&&"false"===t.showLegend)&&e.mainGroup.attr("transform","translate(".concat(.67777*a.width,", ").concat(a.height/2,")")),"right"===t.legendPlacement&&(a.width=.75*n),t.showMobile&&(a.height=.8*i,this.element.addClass("is-mobile"));var o=0;if(s){o=35,this.element.closest(".widget-content").css({height:"auto","min-height":"auto"});var c=a.height-(23+25*Math.round(t.dataset[0].data.length/2));this.element.closest(".auto-height ").length&&(c+=78),t.fitHeight&&(c-=_.getSiblingsHeight(e.element[0])),$(this.svg.node()).css({"min-height":c}),a.height=parseInt(this.element.height(),10)+o}a.radius=Math.min(a.width,a.height)/2,e.dims=a,e.pie=d3.pie().sort(null).value(function(S){return S.value}),e.arc=d3.arc().outerRadius(.75*a.radius).innerRadius(t.isDonut?.5*a.radius:0),e.outerArc=d3.arc().innerRadius(.75*a.radius).outerRadius(.75*a.radius+20),e.svg.attr("width","right"===t.legendPlacement?"75%":"100%").attr("height",t.showMobile?"80%":"100%"),e.mainGroup.attr("transform","translate(".concat(a.width/2,",").concat((a.height-o)/2,")")),a.isSmallView?(s||(e.svg.attr("height","".concat(a.height,"px")),this.element.css({height:"auto"})),t.fitHeight||(this.element.closest(".widget-content").css({height:""}),this.element.css({height:"auto"}))):"auto"===this.element[0].style.height&&this.element.css({height:""}),a.center={x:a.width/2,y:a.height/2},e.key=function(S){return S.data.name};var d=!t.dataset||0===t.dataset.length;this.chartData=d?[]:t.dataset[0].data,this.sum=d3.sum(this.chartData,function(S){return S.value});var p=this.chartData.map(function(S){return S.value/e.sum*100}),f=this.roundLargestRemainer(p);this.chartData=this.chartData.map(function(S,M){return S.percent=S.value/e.sum,S.percentRound=f[M],S});var m=0;if(this.chartData.map(function(S){m+=S.percentRound}),d||0===m||isNaN(m)){var b=mt.themeColors().palette;this.chartData.push({data:{},color:b.slate[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(e.updateData(e.chartData),(t.showTooltips||t.showCenterTooltip)&&de.appendTooltip("is-pie"),t.showLegend){var C=e.chartData.map(function(S){var M=de.formatToSettings(S,t.legend);return t.legendFormatter&&(M="".concat(S.name," (").concat(d3.format(t.legendFormatter)(S.value),")")),"Empty-Pie"===S.name&&(M=""),{name:M,display:"twocolumn",placement:t.legendPlacement,color:S.color,data:S}});t.svg=e.svg,de.addLegend(C,"pie",t,this.element);var T=o>0?"addClass":"removeClass";this.element.find(".chart-legend")[T]("adjusted-height")}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(e){var t=this;this.chartData=this.chartData.map(function(a){return a.value=e?0:Math.random(),a}),this.sum=d3.sum(this.chartData,function(a){return a.value});var n=this.chartData.map(function(a){return a.value/t.sum*100}),i=this.roundLargestRemainer(n);return this.chartData=this.chartData.map(function(a,s){return a.percent=a.value/t.sum,a.percentRound=i[s],a}),this.chartData},addCenterLabel:function(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var e=this.settings.dataset[0].centerLabel,t=this.svg.selectAll(".slices");if(t.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(e),de.isIE&&!de.isIEEdge)if(_.isHTML(e)){var n=t.select(".chart-donut-text"),i=document.createElement("text");i.innerHTML=e,Array.prototype.slice.call(i.childNodes).forEach(function(a){n.append("tspan").attr("style",a.getAttribute&&a.getAttribute("style")).attr("x",a.getAttribute&&a.getAttribute("x")).attr("dy",a.getAttribute&&a.getAttribute("dy")).text(a.textContent)})}else t.select(".chart-donut-text").text(e)}},updateData:function(e){var t,n,i,a=this,s=this.element.closest(".is-personalizable").length>0,o=!a.settings.dataset||0===a.settings.dataset.length,c=a.svg.select(".slices").selectAll("path.slice").data(a.pie(e),a.key),d={str:null,isTooltip:(null===(t=a.settings.tooltip)||void 0===t||null==t?void 0:t.formatter)&&a.settings.tooltip.formatter!==ut.tooltip.formatter,isLines:(null===(n=a.settings.lines)||void 0===n||null==n?void 0:n.formatter)&&a.settings.lines.formatter!==ut.lines.formatter};d.isTooltip?d.str=a.settings.tooltip.formatter:d.isLines&&(d.str=a.settings.lines.formatter);var p=function(L){var z,V=document.body;if(a.isFirefox&&0===a.settings.dotSize){var N=d3.select(L);N.attr("r",2),z=L.getBoundingClientRect(),N.attr("r",a.settings.dotSize)}else z=L.getBoundingClientRect();return{top:z.top+V.scrollTop,left:z.left+V.scrollLeft}};a.isRTL=P.isRTL();var f=!1,m=0;if(setTimeout(function(){var L;null!==(L=a.settings)&&void 0!==L&&L?.showCenterTooltip&&(a.element.find(".chart-donut-text").off("mouseenter.text").on("mouseenter.text",function(){var z,V=a.element.find(".slices").get(0),N=p(V),U=null===(z=a.settings.dataset[0])||void 0===z||null==z?void 0:z.centerTooltip,G=N.left,Z=N.top+15;$(".is-pie").addClass("is-center"),de.showTooltip(G,Z,U,"top")}),a.element.find(".chart-donut-text").off("mouseleave.text").on("mouseleave.text",function(){de.hideTooltip(),$(".is-pie").removeClass("is-center")})),a.settings.attributes&&(_.addAttributes(a.element.find(".chart-donut-text"),a,a.settings.attributes,"text",!0),_.addAttributes(a.element.find(".slices"),a,a.settings.attributes,"slices",!0),_.addAttributes(a.element.find(".labels"),a,a.settings.attributes,"labels",!0),_.addAttributes(a.element.find(".labels").children(),a,a.settings.attributes,"label",!0),_.addAttributes(a.element.find(".lines"),a,a.settings.attributes,"lines",!0),_.addAttributes(a.element.find(".lines").children("polyline"),a,a.settings.attributes,"polyline",!0),_.addAttributes(a.element.find(".lines").children(".circles"),a,a.settings.attributes,"circle",!0))},100),a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(L){L.stopImmediatePropagation()}),c.enter().insert("path").style("fill",function(L,z){return de.chartColor(z,"pie",L.data)}).attr("class","slice").call(function(L){L._groups.forEach(function(z){z.forEach(function(V,N){var U=V.__data__,G="slice-".concat(N);_.addAttributes($(V),U,a.settings.attributes?a.settings.attributes:U.data.attributes,G,!0)})})}).on("contextmenu.".concat(a.namespace),function(L){de.triggerContextMenu(a.element,d3.select(this).nodes()[0],L)}).on("click.".concat(a.namespace),function(L,z){var V=this;a.settings.selectable&&(m=setTimeout(function(){f||a.doClickAction(L,z,V,i),f=!1},200))}).on("dblclick.".concat(a.namespace),function(L,z){clearTimeout(m),f=!0,a.doDoubleClickAction(L,z,this,i)}).on("mouseenter.".concat(a.namespace),function(L,z){if(a.settings.showTooltips){var V=a.svg.selectAll("circle").nodes()[z],N=p(V),U=a.midAngle(L),G=U<=Math.PI/4&&U>=0||U>7*Math.PI/4,Z=U<=3*Math.PI/4&&U>=Math.PI/4,oe=U<=5*Math.PI/4&&U>=3*Math.PI/4,le=U<=7*Math.PI/4&&U>=5*Math.PI/4,re="",J=de.formatToSettings(L,a.settings.tooltip),ce={value:d.str&&!d.isTooltip?d3.format(d.str)(L.value):J,percent:d.str?d3.format(d.str)(L.data.percent):"".concat(isNaN(L.data.percentRound)?0:L.data.percentRound,"%")};-1===(re=(re=(re=(re=(re=L.data.tooltip||ce.value).replace("{{percent}}","".concat(ce.percent))).replace("{{value}}",L.value)).replace("%percent%","".concat(ce.percent))).replace("%value%",L.value)).indexOf("<b>")&&(re=(re=re.replace("(","<b>")).replace(")","</b>")),null!=i&&clearTimeout(i),i=setTimeout(function(){!function(){if(""!==re){var ke=de.tooltipSize(re),_e=N.left,Oe=N.top;de.tooltip&&de.tooltip.length&&(G||Z||oe||le)&&de.tooltip[s?"addClass":"removeClass"]("is-personalizable"),G&&de.showTooltip(_e-=ke.width/2,Oe-=ke.height-5,re,"top"),Z&&de.showTooltip(_e,Oe-=ke.height/2,re,"right"),oe&&de.showTooltip(_e-=ke.width/2,Oe,re,"bottom"),le&&de.showTooltip(_e-=ke.width-5,Oe-=ke.height/2,re,"left")}}()},300)}}).on("mouseleave.".concat(a.namespace),function(){clearTimeout(i),de.hideTooltip()}).merge(c).transition().duration(a.settings.animationSpeed).attrTween("d",function(L){this.current=this.current||L;var z=d3.interpolate(this.current,L);return this.current=z(0),function(V){return a.arc(z(V))}}),c.exit().remove(),!o){var b=a.element.parent().width()<520,C=a.settings.showLines;if(!a.settings.showLinesMobile&&C&&(C=!b),a.settings.dotSize=C?2:0,C){var T=a.svg.select(".labels").selectAll("text").data(a.pie(e),a.key);T.enter().append("text").attr("dy",".35em").text(function(L){return b?L.data.shortName:de.formatToSettings(L,a.settings.lines)}).merge(T).transition().duration(a.settings.animationSpeed).attrTween("transform",function(L){this.current=this.current||L;var z=d3.interpolate(this.current,L);return this.current=z(0),function(V){var N=z(V),U=a.outerArc.centroid(N);return U[0]=a.dims.radius*(a.midAngle(N)<Math.PI?1:-1),U[0]-=a.midAngle(N)<Math.PI?20:-20,"translate(".concat(U,")")}}).styleTween("text-anchor",function(L){this.current=this.current||L;var z=d3.interpolate(this.current,L);return this.current=z(0),function(V){var N=z(V);return a.isRTL?a.midAngle(N)>Math.PI?"start":"end":a.midAngle(N)<Math.PI?"start":"end"}}),T.exit().remove();var S=a.svg.select(".lines").selectAll("polyline").data(a.pie(e),a.key);S.enter().append("polyline").merge(S).transition().duration(a.settings.animationSpeed).attrTween("points",function(L){this.current=this.current||L;var z=d3.interpolate(this.current,L);return this.current=z(0),function(V){var N=z(V),U=a.outerArc.centroid(N);return U[0]=.85*a.dims.radius*(a.midAngle(N)<Math.PI?1:-1),[a.outerArc.centroid(N),a.outerArc.centroid(N),U]}}),S.exit().remove()}var M=a.svg.select(".lines").selectAll("circle").data(a.pie(e),a.key);M.enter().append("circle").attr("class","circles").attr("r",a.settings.dotSize).merge(M).transition().duration(a.settings.animationSpeed).attrTween("transform",function(L){this.current=this.current||L;var z=d3.interpolate(this.current,L);return this.current=z(0),function(V){var N=z(V);return"translate(".concat(a.outerArc.centroid(N)," )")}}),M.exit().remove()}},setInitialSelected:function(){var e,t=this,n=0;this.svg.selectAll(".slice").each(function(i,a){i&&i.data&&i.data.selected&&n<1&&(n++,t.initialSelectCall=!0,(e=d3.select(this)).on("click.".concat(t.namespace)).call(e.node(),e.datum(),a))}),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return de.selected},setSelected:function(e,t){var n,i,a=this,s=0,o=_.equals;this.svg.selectAll(".slice").each(function(c,d){c&&c.data&&s<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===c.data[e.fieldName]||void 0!==e.index&&e.index===d||e.data&&o(e.data,a.chartData[d].data)||e.elem&&$(this).is(e.elem))&&(s++,n=d3.select(this),i=d)}),s>0&&(t||!n.classed("is-selected"))&&n.on("click.".concat(a.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(e){for(var t=0,i=0,a=[],s=0;s<e.length;s++)t+=parseInt(e[s],10),a[s]=s;var o=100-t;a.sort(function(f,m){return i=e[f]-parseInt(e[f],10),e[m]-parseInt(e[m],10)-i}),e.sort(function(f,m){return i=f-parseInt(f,10),m-parseInt(m,10)-i});for(var c=0;c<e.length;c++)e[c]=c<o?parseInt(e[c],10)+1:parseInt(e[c],10);for(var d=[],p=0;p<e.length;p++)d[a[p]]=e[p];return d},doClickAction:function(e,t,n,i){clearTimeout(i);var a=n&&d3.select(n).classed("is-selected");de.setSelectedElement({task:a?"unselected":"selected",container:this.element,selector:a?".chart-container .is-selected":n,isTrigger:!this.initialSelectCall&&!a,d:e.data,i:t,type:this.settings.type,dataset:this.settings.dataset,svg:this.svg}),a&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},t])},doDoubleClickAction:function(e,t,n,i){var a;clearTimeout(i);var s=this.settings.dataset,o=s&&null!==(a=s[0])&&void 0!==a&&a?.data?s[0].data[t]:e.data||e;o=o||{};var c=[{elem:d3.select(n).nodes(),data:o,index:t}];this.element.triggerHandler("dblclick",[c])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".slice").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var vt={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,selectable:!0,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Sn(e,t){this.settings=_.mergeSettings(e,t,vt),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Sn.prototype={init:function(){return this.namespace=_.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=de.colorRange(),this.useBuiltInColors=!0),this},updateData:function(e){var t=this,n=this.settings,i=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==e.length){var s=this.element.parent(),o={w:s.width(),h:s.height(),extra:.957};"right"===n.legendPlacement&&(o.w*=.75),(mt.uplift||mt.new)&&o.w>=420&&(o.extra-=.12),n.showLegend&&o.w<420&&!n.margin.bottom&&(o.h-=(420-o.w)*(o.w>405?5:o.w>390?3:o.w>350?.9:.5)),o.transform={x:o.w/2+(n.margin.left+n.margin.right)/2,y:o.h/2*o.extra+(n.margin.top+n.margin.bottom)/2};var c,d=d3.scaleOrdinal(n.colors),p=Math.max(n.maxValue,d3.max(e,function(J){return d3.max(J.data.map(function(ce){return ce.value}))})),f=e[0].data.map(function(J){return ce=J,Oe="",o.w<=328?Oe=ce.shortName||ce.abbrName||ce.name||"":o.w>=329&&o.w<=469?Oe=ce.abbrName||ce.name||"":o.w>469&&(Oe=ce.name||""),Oe;var ce,Oe}),b=2*Math.PI/f.length,C=Math.min(o.w/3,o.h/3)*o.extra,T=d3.scaleLinear().range([0,C]).domain([0,p]),S=this.element[0];d3.select(S).select("svg").remove();var M=d3.select(S).append("svg").attr("width",o.w+(n.margin.left+n.margin.right)).attr("height",o.h+(n.margin.top+n.margin.bottom)).attr("class","chart-radar");this.svg=M;var L=M.append("g").attr("transform","translate(".concat(o.transform.x,",").concat(o.transform.y,")"));if(n.opacityCircles>0){var z=L.append("defs").append("filter").attr("id","glow");z.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var V=z.append("feMerge");V.append("feMergeNode").attr("in","coloredBlur"),V.append("feMergeNode").attr("in","SourceGraphic")}var N=L.append("g").attr("class","chart-radar-axis-wrapper");N.selectAll(".levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",function(J){return C/n.levels*J}).style("fill-opacity",n.opacityCircles).style("filter",n.opacityCircles>0?"url(#glow)":""),n.showAxisLabels&&N.selectAll(".axis-label").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",function(J){return-J*C/n.levels}).attr("dy","0.4em").style("font-size",mt.uplift||mt.new?"12px":"10px").attr("fill","#737373").text(function(J){var ce=Math.round(10*p)/10;return n.axisFormatter.indexOf("%")>-1?d3.format(n.axisFormatter)(ce*J/n.levels):d3.format(n.axisFormatter)(J/n.levels)});var U=N.selectAll(".axis").data(f).enter().append("g").attr("class","axis");n.showCrosslines&&U.append("line").attr("x1",0).attr("y1",0).attr("x2",function(J,ce){return T(1.05*p)*Math.cos(b*ce-Math.PI/2)}).attr("y2",function(J,ce){return T(1.05*p)*Math.sin(b*ce-Math.PI/2)}).attr("class","chart-radar-crossline").style("stroke-width","1px"),U.append("text").attr("class","legend").style("font-size",mt.uplift||mt.new?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(J,ce){return T(p*n.labelFactor)*Math.cos(b*ce-Math.PI/2)}).attr("y",function(J,ce){return T(p*n.labelFactor)*Math.sin(b*ce-Math.PI/2)}).text(function(J){return J}),this.element[o.w<420?"addClass":"removeClass"]("is-small"),o.w>456&&M.selectAll(".chart-radar-axis-wrapper .axis .legend").each(function(){de.wrap(d3.select(this),n.wrapWidth,n.labelFactor)});var G=d3.lineRadial().curve(d3.curveBasisClosed).radius(function(J){return T(J.value)}).angle(function(J,ce){return ce*b});n.roundStrokes&&G.curve(d3.curveCardinalClosed);var Z=L.selectAll(".radarWrapper").data(e.map(function(J){return J.data})).enter().append("g").attr("class","chart-radar-wrapper"),oe=!1,le=0;if(t.element.off("dblclick.".concat(t.namespace)).on("dblclick.".concat(t.namespace),"*",function(J){J.stopImmediatePropagation()}),Z.append("path").attr("class","chart-radar-area").call(function(J){J._groups.forEach(function(ce){ce.forEach(function(ke,_e){var Oe=e[_e];_.addAttributes($(ke),Oe,Oe.attributes,"area")})})}).attr("d",function(J){return G(J)}).style("fill",function(J,ce){return d(ce)}).style("fill-opacity",n.opacityArea).style("cursor",t.settings.selectable?"pointer":"inherit").on("contextmenu.".concat(t.namespace),function(J){de.triggerContextMenu(t.element,d3.select(this).nodes()[0],J)}).on("click.".concat(t.namespace),function(J,ce){var ke=this;t.settings.selectable&&(le=setTimeout(function(){oe||t.doClickAction(J,ce,ke,c,M),oe=!1},200))}).on("dblclick.".concat(t.namespace),function(J,ce){clearTimeout(le),oe=!0,t.doDoubleClickAction(J,ce,this)}),Z.append("path").attr("class","chart-radar-stroke").call(function(J){J._groups.forEach(function(ce){ce.forEach(function(ke,_e){var Oe=e[_e];_.addAttributes($(ke),Oe,Oe.attributes,"stroke")})})}).attr("d",function(J){return G(J)}).style("stroke-width","".concat(n.strokeWidth,"px")).style("stroke",function(J,ce){return d(ce)}).style("cursor",t.settings.selectable?"pointer":"inherit").style("fill","none").style("filter",n.opacityCircles>0?"url(#glow)":""),Z.selectAll(".chart-radar-circle").data(function(J){return J}).enter().append("circle").call(function(J){J._groups.forEach(function(ce){ce.forEach(function(ke){var _e=ke.__data__;_.addAttributes($(ke),_e,_e.attributes,"circle")})})}).attr("class","chart-radar-circle").attr("r",n.dotRadius).attr("cx",function(J,ce){return T(J.value)*Math.cos(b*ce-Math.PI/2)}).attr("cy",function(J,ce){return T(J.value)*Math.sin(b*ce-Math.PI/2)}).style("fill",function(){return d($(this.parentNode).index()-1)}).style("fill-opacity",.6),L.selectAll(".radar-circle-wrapper").data(e.map(function(J){return J.data})).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data(function(J){return J}).enter().append("circle").call(function(J){J._groups.forEach(function(ce){ce.forEach(function(ke){var _e=ke.__data__;_.addAttributes($(ke),_e,_e.attributes,"invisible-circle")})})}).attr("class","radar-invisible-circle").attr("r",1.5*n.dotRadius).attr("cx",function(J,ce){return T(J.value)*Math.cos(b*ce-Math.PI/2)}).attr("cy",function(J,ce){return T(J.value)*Math.sin(b*ce-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(t.namespace),function(J){if(n.showTooltips){var ce=$(this).offset(),ke=de.formatToSettings(J,n.tooltip);-1===ke.indexOf("<b>")&&(ke=(ke=ke.replace("(","<b>")).replace(")","</b>"));var _e=de.tooltipSize(ke),Oe=ce.left,Qe=ce.top;Oe-=_e.width/2-6,Qe-=_e.height+6,null!=c&&clearTimeout(c),c=setTimeout(function(){de.tooltip&&de.tooltip.length&&de.tooltip[i?"addClass":"removeClass"]("is-personalizable"),de.showTooltip(Oe,Qe,ke,"top")},300)}}).on("mouseleave.".concat(t.namespace),function(){clearTimeout(c),de.hideTooltip()}).on("contextmenu.".concat(t.namespace),function(J){de.triggerContextMenu(t.element,d3.select(this).nodes()[0],J)}),n.showTooltips&&de.appendTooltip("is-pie"),n.showLegend){n.legendPlacement&&this.element.addClass("has-".concat(n.legendPlacement,"-legend"));var re=n.dataset.map(function(J,ce){var ke={name:J.name,display:"twocolumn",placement:n.legendPlacement,color:d(ce)};return J.attributes&&(ke.data={attributes:J.attributes}),ke});n.svg=t.svg,de.addLegend(re,"pie",n,this.element)}}else t.element.emptymessage(n.emptyMessage)},setInitialSelected:function(){var e=this.settings;if(Array.isArray(e.dataset))for(var t=0,n=e.dataset.length;t<n;t++)if(e.dataset[t].selected){var i=this.svg.selectAll(".chart-radar-area").nodes(),a=d3.select(i[t]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),a.classed("is-selected",!0).classed("is-not-selected",!1),a.style("fill-opacity",e.opacityArea);break}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return de.selected},setSelected:function(e,t){var n,i,a=0,s=this;this.svg.selectAll(".chart-radar-area").each(function(o,c){var d=s.settings.dataset[c];d&&d.data&&a<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===d[e.fieldName]||void 0!==e.index&&e.index===c||e.elem&&$(this).is(e.elem))&&(a++,n=d3.select(this),i=c)}),a>0&&(t||!n.classed("is-selected"))&&n.on("click.".concat(s.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(e,t,n,i,a){clearTimeout(i);var s=this.settings,o=d3.select(n),c=o.classed("is-selected");a.selectAll(".is-selected").classed("is-selected",!1),a.selectAll(".is-not-selected").classed("is-not-selected",!1),de.clearSelected(s.dataset),c||(a.selectAll(".chart-radar-area").classed("is-not-selected",!0),o.classed("is-selected",!0).classed("is-not-selected",!1),o.style("fill-opacity",s.opacityArea),s.dataset[t].selected=!0);var d={elem:o.nodes(),data:e,index:t};this.element.triggerHandler(c?"deselected":"selected",d),de.selected=c?[]:d},doDoubleClickAction:function(e,t,n){this.element.triggerHandler("dblclick",{elem:[n],data:e,index:t})},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=e.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(t(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),de.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(e){var t=null;switch(this.empty(),e.type){case"targeted-achievement":case"completion":case"completion-target":if(t=this.data(e.type))return t.updated(e),this;var n=new F(this,e);this.data("completion-chart",n),this.data("chart",n),this.data(e.type,n);break;case"bullet":if(t=this.data("bullet"))return t.updated(e),this;var i=new E(this,e);this.data("bullet",i),this.data("chart",i);break;case"radar":if(t=this.data("radar"))return t.updated(e),this;var a=new Sn(this,e);this.data("radar",a),this.data("chart",a);break;case"sparkline":if(t=this.data("sparkline"))return t.updated(e),this;var s=new Q(this,e);this.data("sparkline",s),this.data("chart",s);break;case"sparkline-dots":if(e.isDots=!0,t=this.data("sparkline"))return t.updated(e),this;var o=new Q(this,e);this.data("sparkline",o),this.data("chart",o);break;case"sparkline-peak":if(e.isPeakDot=!0,t=this.data("sparkline"))return t.updated(e),this;var c=new Q(this,e);this.data("sparkline",c),this.data("chart",c);break;case"sparkline-dots-n-peak":if(e.isPeakDot=!0,e.isDots=!0,t=this.data("sparkline"))return t.updated(e),this;var d=new Q(this,e);this.data("sparkline",d),this.data("chart",d);break;case"sparkline-minmax":if(e.isMinMax=!0,t=this.data("sparkline"))return t.updated(e),this;var p=new Q(this,e);this.data("sparkline",p),this.data("chart",p);break;case"sparkline-medianrange":if(e.isMedianRange=!0,t=this.data("sparkline"))return t.updated(e),this;var f=new Q(this,e);this.data("sparkline",f),this.data("chart",f);break;case"sparkline-medianrange-n-peak":if(e.isMedianRange=!0,e.isPeakDot=!0,t=this.data("sparkline"))return t.updated(e),this;var m=new Q(this,e);this.data("sparkline",m),this.data("chart",m);break;case"line":if(t=this.data("line"))return t.updated(e),this;var b=new xe(this,e);this.data("line",b),this.data("chart",b);break;case"area":if(e.isArea=!0,t=this.data("line"))return t.updated(e),this;var C=new xe(this,e);this.data("line",C),this.data("chart",C);break;case"bubble":if(e.isBubble=!0,t=this.data("line"))return t.updated(e),this;var T=new xe(this,e);this.data("line",T),this.data("chart",T);break;case"scatterplot":if(e.isScatterPlot=!0,t=this.data("line"))return t.updated(e),this;var S=new xe(this,e);this.data("line",S),this.data("chart",S);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(t=this.data("column"))return t.updated(e),this;var M=new Ve(this,e);this.data("column",M),this.data("chart",M);break;case"column-stacked":if(e.isStacked=!0,t=this.data("column"))return t.updated(e),this;var L=new Ve(this,e);this.data("column",L),this.data("chart",L);break;case"bar":if(e.isStacked=!0,t=this.data("bar"))return t.updated(e),this;var z=new De(this,e);this.data("bar",z),this.data("chart",z);break;case"bar-stacked":if(e.isStacked=!0,t=this.data("bar"))return t.updated(e),this;var V=new De(this,e);this.data("bar",V),this.data("chart",V);break;case"bar-normalized":if(e.isNormalized=!0,t=this.data("bar"))return t.updated(e),this;var N=new De(this,e);this.data("bar",N),this.data("chart",N);break;case"bar-grouped":if(e.isStacked=!1,e.isGrouped=!0,t=this.data("bar"))return t.updated(e),this;var U=new De(this,e);this.data("bar",U),this.data("chart",U);break;case"pie":if(t=this.data("pie"))return t.updated(e),this;var G=new wt(this,e);this.data("pie",G),this.data("chart",G);break;case"donut":if(e.isDonut=!0,t=this.data("pie"))return t.updated(e),this;var Z=new wt(this,e);this.data("pie",Z),this.data("chart",Z);break;default:t=null}return this};var Ft={isToday:function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},firstDayOfWeek:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getDay(),a=new Date(e),s=i>=t||n?i-t:6-i;return a.setDate(e.getDate()-s),a.setHours(0,0,0,0),a},lastDayOfWeek:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.firstDayOfWeek(e,t);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),n},dateDiff:function(e,t,n){var i=new Date;return Math.round((t-e)/(36e5*(n?1:Math.abs(i.getTimezoneOffset()))))},monthDiff:function(e,t){var n;return n=12*(t.getFullYear()-e.getFullYear()),n-=e.getMonth(),(n+=t.getMonth())<=0?0:n},add:function(e,t,n){var i=null,a=e instanceof Date?new Date(e.toISOString()):new Date(e);return"days"===n&&(i=new Date(a.setDate(a.getDate()+t))),i},subtract:function(e,t,n){var i=null,a=e instanceof Date?new Date(e.toISOString()):new Date(e);return"days"===n&&(i=new Date(a.setDate(a.getDate()-t))),i},isDaylightSavingTime:function(e){var t=new Date(e.getFullYear(),0,1).getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();return Math.max(t,n)!==e.getTimezoneOffset()}},Ln={addCalculatedFields:function(e,t,n,i){var a=function(N,U){return P.formatDate(N,_.extend(!0,{locale:t.name},U))},s={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:t.name},o=function(N){var U=P.parseDate(N,s);return P.isIslamic(t.name)&&(U=new Date(U[0],U[1],U[2],U[3],U[4],U[5],U[6])),U},c=function(N){return P.translate(N,{locale:t.name,language:n})};e.color=this.getEventTypeColor(e,i),e.borderColor=this.getEventTypeBorderColor(e,i),e.duration=Math.abs(Ft.dateDiff(new Date(e.ends),new Date(e.starts),!1));var d=new Date,p=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f=new Date(e.starts),m=Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),b="".concat(f.getDate(),"-").concat(f.getMonth()+1,"-").concat(f.getFullYear()),C="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear());e.durationUnits=c(e.duration>1?"Days":"Day"),e.daysUntil=e.starts?Ft.dateDiff(m,p):0;var T,S,M=(new Date(e.ends)-new Date(e.starts))/36e5;if(e.durationHours=M>0&&M<.5?1:Math.round(M),e.isDays=!0,p>m&&b!==C&&(e.daysUntil=1),void 0===e.isAllDay&&(e.isAllDay=!0),e.durationHours<24&&(e.isDays=!1,e.isAllDay=!1,e.durationUnits=c(e.durationHours>1?"Hours":"Hour")),"true"===e.isAllDay.toString()&&(e.duration=(T=new Date(e.starts),S=new Date(e.ends),Math.abs(Math.round((S-T)/864e5))||1),e.durationUnits=c(e.duration>1?"Days":"Day"),e.isDays=!0,delete e.durationHours),e.starts){var L=o(e.starts);e.startsLocale=a(L),P.isIslamic(t.name)&&(e.startsLocale=a(P.gregorianToUmalqura(L))),e.startsHourLocale=a(L,{date:"hour"}),e.startsHour=Array.isArray(L)?parseFloat(L[3]+L[4]/60):parseFloat(L.getHours()+L.getMinutes()/60)}if(e.ends){var z=o(e.ends);e.endsLocale=a(z),P.isIslamic(t.name)&&(e.endsLocale=a(P.gregorianToUmalqura(z))),e.endsHourLocale=a(z,{date:"hour"}),e.endsHour=Array.isArray(z)?parseFloat(z[3]+z[4]/60):parseFloat(z.getHours()+z.getMinutes()/60)}if(e.eventTypes=i,e.isAllDay=e.isAllDay.toString(),"false"===e.isAllDay.toString()&&delete e.isAllDay,!e.isAllDay&&e.durationHours>=24&&(e.isAllDay=!1,e.durationUnits=c("Hours"),e.isDays=!1,delete e.duration),e.starts&&e.ends){var V=this.timeDiffInSeconds(o(e.starts),o(e.ends));e.durationInTime=this.timeBySeconds(V)}else e.durationInTime&&delete e.durationInTime;return e},timeDiffInSeconds:function(e,t){var n=Math.abs(t.getTime()-e.getTime());return Math.ceil(n/1e3)},timeBySeconds:function(e){return e=Number(e),{days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}},formateTimeString:function(e,t,n){if(e.durationInTime){var i=function(f){return P.translate(f,{locale:t.name,language:n})},a=e.durationInTime,s="";if(a.days){var o=i(a.days>1?"Days":"Day");s+="".concat(a.days," ").concat(o)}if(a.hours){var c=i(a.hours>1?"Hours":"Hour");a.days&&(s+="".concat(a.minutes||a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.hours," ").concat(c)}if(a.minutes){var d=i(a.minutes>1?"Minutes":"Minute");(a.days||a.hours)&&(s+="".concat(a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.minutes," ").concat(d)}if(a.seconds){var p=i(a.seconds>1?"Seconds":"Second");s+="".concat(a.days||a.hours||a.minutes?" ".concat(i("And")," "):""),s+="".concat(a.seconds," ").concat(p)}""!==s&&(e.duration="",e.durationUnits="",e.durationHours=s)}},getEventTypeColor:function(e,t){var n,i="azure";if(!e.type&&!e.color)return i;var a=t.filter(function(s){return s.id===e.type});return void 0!==e.color&&1===a.length&&a[0].color!==e.color?a[0].color:"#"===(null===(n=e.color)||void 0===n||null==n?void 0:n.substr(0,1))||e.color?e.color:1===a.length?i=a[0].color||"azure":i},getEventTypeBorderColor:function(e,t){var n,i="",a=t.filter(function(s){return s.id===e.type});return void 0!==e.borderColor&&1===a.length&&a[0].borderColor!==e.borderColor?a[0].borderColor:"#"===(null===(n=e.borderColor)||void 0===n||null==n?void 0:n.substr(0,1))||e.borderColor?e.borderColor:1===a.length?i=a[0].borderColor||"azure":i},cleanEventData:function(e,t,n,i,a,s,o){var c={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:i.name},d=function(M){return P.formatDate(M,c)},p=function(M,L){return P.parseDate(M,_.extend(!0,{locale:i.name},L))},f="on"===e.isAllDay||"true"===e.isAllDay||e.isAllDay,m=n,b=n;if(e.startsLocale&&e.endsLocale&&(m=new Date(p(e.startsLocale)),b=new Date(p(e.endsLocale))),"string"!=typeof e.starts||e.startsLocale||(m=new Date(e.starts)),"string"!=typeof e.ends||e.endsLocale||(b=new Date(e.ends)),P.isValidDate(m)||(m=n),P.isValidDate(b)||(b=n),f)m.setHours(0,0,0,0),e.starts=d(new Date(m)),b.setHours(23,59,59,999),e.ends=d(new Date(b)),e.duration=e.starts===e.ends?1:null,e.isAllDay=!0;else{if(m===b)b.setHours(b.getHours()+parseInt(e.durationHours,10)),e.ends=d("safari"===Ie.browser.name?b:b.toISOString()),e.duration=null;else if(e.endsHourLocale&&e.startsHourLocale){var C=p(e.startsHourLocale,{date:"hour"}),T=p(e.endsHourLocale,{date:"hour"});m.setHours(C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds()),b.setHours(T.getHours(),T.getMinutes(),T.getSeconds(),T.getMilliseconds()),"safari"===Ie.browser.name?(e.starts=d(m),e.ends=d(b)):(e.starts=d(m.toISOString()),e.ends=d(b.toISOString())),e.duration=Ft.dateDiff(new Date(e.starts),new Date(e.ends))}else e.ends=d(new Date(b));e.starts=d(new Date(m)),e.isAllDay=!1}if(void 0===e.comments&&t&&(e.comments=P.translate("NoCommentsEntered",{locale:i.name,language:a}),e.noComments=!0),!e.subject&&t&&(e.subject=P.translate("NoTitle",{locale:i.name,language:a})),e.type||(e.type=o[0].id),void 0===e.id&&t){var S=0===s.length?0:parseInt(s[s.length-1].id,10);e.id=(S+1).toString()}"NewEvent"===e.title&&(e.title=P.translate("NewEvent",{locale:i.name,language:a}))}},hn=["default","neutral","secondary","error","alert","good","info"],Ht={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:hn[0],value:void 0};function pn(e,t){var n;if(this.settings=_.mergeSettings(e,t,Ht),e instanceof HTMLElement?e.querySelector(".tag-content")?n=e:((n=document.createElement("span")).className+="".concat(e.className),e.id&&e.id.length?(n.id=e.id,e.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id),e.insertAdjacentElement("beforebegin",n),n.appendChild(e),n.classList.add("tag"),e.className="",e.classList.add("tag-content")):((n=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(n),"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id)),e){var i=e.querySelector(".audible");i&&n.insertAdjacentElement("afterbegin",i)}this.element=n,this.getSettingsFromElement(),this.init()}pn.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var e=this.element.classList,t=_.getArrayFromList(this.element.classList),n=this.settings.style;t.forEach(function(b){hn.indexOf(b)>-1&&e.remove(b)}),-1===this.element.className.indexOf(n)&&"default"!==n&&e.add(n),this.settings.disabled&&e.add("is-disabled");var i="";this.settings.audibleContent&&(i='<span class="audible">'.concat($e.stripHTML(this.settings.audibleContent),"</span>"));var a="span",s="",o="",c="",d=this.settings.href&&this.settings.href.length;(d||this.originallyAnchor)&&(a="a",this.settings.disabled&&(c=' tabIndex="-1"')),d&&(s=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(e.add("is-linkable"),o='<button class="btn-linkable" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),'\n        <span class="audible">').concat(P.translate("Link"),"</span>\n      </button>"));var p=0===this.settings.content.length?this.contentElement.textContent:this.settings.content,f="<".concat(a,' class="tag-content"').concat(s).concat(c,">").concat($e.sanitizeHTML(p),"</").concat(a,">"),m="";this.settings.dismissible&&(e.add("is-dismissible"),m='<button class="btn-dismissible" focusable="false" tabindex="-1" type="button">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(P.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(i).concat(f).concat(o).concat(m),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".btn-dismissible")},getSettingsFromElement:function(){var e=this.element.className,t="";hn.forEach(function(f){e.indexOf(f)>-1&&(t=f)}),t&&(this.settings.style=t),this.settings.disabled=this.disabled;var n=this.dismissibleBtn,i=this.element.className.indexOf("is-dismissible")>-1;(n||i)&&(this.settings.dismissible=!0);var a=this.element.querySelector("a"),s=this.element.className.indexOf("is-linkable")>-1,o=this.element.querySelector(".btn-linkable");if(a||s||o){this.originallyAnchor=!0;var c=a.getAttribute("href");c&&c.length&&(c=$e.stripTags(c),this.settings.href=c)}(s||o)&&(this.settings.clickable=!0);var d=this.element.querySelector(".audible");d instanceof HTMLElement&&(this.settings.audibleContent=$e.stripHTML(d.innerText));var p=this.contentElement;p&&(this.settings.content=$e.sanitizeHTML(p.innerText))},remove:function(){var e=this.element,t=e.parentNode;this.settings.parentAPI&&(t=this.settings.parentAPI.element),$(t).triggerHandler("beforetagremove",[this]),this.destroy(),e.remove(),$(t).triggerHandler("aftertagremove",[this])},dismiss:function(e){if(!this.disabled){this.remove(e),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var t=this.settings.parentAPI;t&&t.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var e=$(this.element);e.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var t=this.dismissibleBtn;t&&t.parentNode.removeChild(t);var n=e.data("hidefocus");return n&&"function"==typeof n.destroy&&n.destroy(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,Ht)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var e=this;$(this.element).on("focusin.tag",function(){e.element.classList.add("is-focused")}).on("focusout.tag",function(){e.element.classList.remove("is-focused")});var t=this;$(this.element).on("click.tag","a, .btn-linkable",function(n){var i;return"function"==typeof t.settings.clickHandler&&(i=t.settings.clickHandler(t)),!(!1===i||t.settings.href&&"#"===t.settings.href)||(n.preventDefault(),!1)}),this.settings.dismissible&&($(this.element).on("click.tag",".btn-dismissible",function(n){e.dismiss(n)}),$(this.element).on("keydown.tag","a",function(n){8===n.keyCode&&e.dismiss(n)}))}};var an={tags:[]};function yn(e,t){var n=this;if(!(e instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=_.mergeSettings(e,t,an),this.element=e;var i=_.getArrayFromList(this.element.querySelectorAll(".tag"));i.length&&(this.settings.tags=[],i.forEach(function(a){n.settings.tags.push(new pn(a))})),this.init()}yn.prototype={get length(){return this.tags.length},get elements(){return this.tags.map(function(e){return e.element})},init:function(){var e=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach(function(t){e.add(t)}),this.render()},getTargetProp:function(){return"content"},add:function(e){var t,n=this;if(!e)throw new Error("No object was provided");if(Array.isArray(e)){var i=[];return e.forEach(function(a){i.push(n.add(a))}),i}if(Fr.isEmpty(e))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return e instanceof pn?(t=e,e.settings.parentAPI=this):(e.parent=this.element,e.parentAPI=this,t=new pn(void 0,e)),-1===this.tags.indexOf(t)&&this.tags.push(t),t},remove:function(e,t){e instanceof pn&&(e=e.settings);var n,i=this.getTargetProp(e),a=this.tags.filter(function(s){return s.settings[i]===e[i]||(n=s,!1)});return a.length<this.tags.length&&(this.tags=a),t&&n.remove(),n},removeAll:function(){this.tags.forEach(function(e){e.remove()}),this.tags=[]},render:function(){var e=this;this.tags.forEach(function(t){0===$(e.element).has(t.element).length?($(e.element).append(t.element),t.init()):t.render()}),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.elements,n=0,i=t.length;e<n&&(e=n),e>i&&(e=i);var a=t[e],s=a.querySelector("a");return s&&s.focus(),a},focusPreviousElement:function(e){if(!(e instanceof HTMLElement))throw new Error("".concat(e," is not an HTMLElement"));var t=this.elements.indexOf(e);if(!(t>-1))throw new Error("".concat(e," does not exist within this TagList"));return this.focusByIndex(t-1)},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings),Array.isArray(e.tags)&&(this.settings.tags=e.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach(function(e){e.remove()}),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var ss={height:300,itemHeight:50,bufferSize:20,data:[],scrollTop:0,itemCount:0,itemTemplate:null,startIndex:0};function _a(e,t){this.settings=_.mergeSettings(e,t,ss),this.element=$(e),this.init()}_a.prototype={init:function(){return this.container=this.element.find(".ids-virtual-scroll")[0],this.stringTemplate='<div class="ids-virtual-scroll-item">${productName}</div>',this.itemCount=this.settings.data.length,this.itemTemplate=this.settings.itemTemplate||this.itemTemplate,this.handleEvents(),this.applyHeight(),this.renderItems(!1),this},handleEvents:function(){var e=this;return this.timeout=null,this.scrollHandler=function(t){e.handleScroll(t)},this.container.addEventListener("scroll",this.scrollHandler,{passive:!0}),this},handleScroll:function(e){var t=this;this.timeout&&cancelAnimationFrame(this.timeout);var n=e.target;this.timeout=requestAnimationFrame(function(){t.scrollTop=n.scrollTop})},renderItems:function(e){var t=this;if(this.settings.data&&(e||0!==this.data.length)){var n=this.startIndex,i=this.startIndex+this.visibleItemCount();if(this.lastStart!==n||this.lastEnd!==i){this.lastStart=n,this.lastEnd=i;var a=this.settings.data.slice(n,i),s="";a.map(function(o,c){var d=t.itemTemplate(o,c);return s+=d,d}),this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.itemContainer.innerHTML=s,this.element.trigger("afterrendered",this,{elem:this,startIndex:n,endIndex:i})}}},applyHeight:function(){this.container.style.height="".concat(this.settings.height,"px"),this.container.querySelector(".ids-virtual-scroll-viewport").style.height="".concat(this.viewPortHeight,"px"),this.itemContainer=this.element.find(".contents")[0],this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.isTable=this.element.find(".ids-data-grid-container").length>0,this.isTable&&(this.element.find(".ids-virtual-scroll")[0].style.overflow="inherit")},visibleItemCount:function(){var e=Math.ceil(this.height/this.itemHeight)+2*this.bufferSize;return Math.min(Number(this.itemCount)-this.startIndex,e)},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,ss)),this.unbind().init()},unbind:function(){this.container.removeEventListener("scroll",this.scrollHandler),$.removeData(this.element[0],"virtual-scroll")},destroy:function(){this.unbind(),$.removeData(this.element[0],"virtual-scroll")},set height(e){this.settings.height=e},get height(){return 0===this.data.length?0:this.settings.height},set itemHeight(e){this.settings.itemHeight=e},get itemHeight(){return this.settings.itemHeight},set bufferSize(e){this.settings.bufferSize=e},get bufferSize(){return this.settings.bufferSize||20},set scrollTop(e){this.container.scrollTop===e?(this.settings.scrollTop=e,this.renderItems(!1)):this.container.scrollTop=e},get scrollTop(){return this.settings.scrollTop||0},scrollTo:function(e){this.scrollTop=Number(e)*this.itemHeight},get viewPortHeight(){return Number(this.itemCount)*Number(this.itemHeight)},set itemCount(e){this.settings.itemCount=e},get itemCount(){return this.settings.itemCount},get offsetY(){return Number(this.startIndex)*Number(this.itemHeight)},get startIndex(){var e=Math.floor(Number(this.scrollTop)/Number(this.itemHeight))-Number(this.bufferSize);return Math.max(0,e)},itemTemplate:function(e){return this.injectTemplate(this.stringTemplate,e)},injectTemplate:function(e,t){return e.replace(/\${(.*?)}/g,function(n,i){return t[i]})},set data(e){if(e)return this.settings.data=e,this.itemCount=e.length,this.lastStart=null,this.lastEnd=null,this.scrollTop=0,this.applyHeight(),void this.renderItems(!0);this.settings.data=null},get data(){var e;return null==this||null===(e=null==this?void 0:this.settings)||void 0===e||null==e?void 0:e.data}};var hi=["none","all","group"],rs={closeOnSelect:!0,cssClass:null,filterMode:"contains",virtualScroll:!1,maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,showSearchUnderSelected:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{},tagListMaxHeight:120,allTextString:null,selectedTextString:null,selectAllFilterOnly:!0,attributes:null};function sa(e,t){this.settings=_.mergeSettings(e,t,rs),this.element=$(e),this.init()}sa.prototype={get value(){var t=this.settings.multiple;if("typeahead"===this.settings.reload)return t?this.selectedValues:this.element.val();for(var n,i=[],a=this.element[0].options,s=0;s<a.length;s++)(n=a[s]).selected&&i.push(n.value||n.text);return t||1!==i.length?i:i[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var e=this.pseudoElem.find("span").css("max-width","");if(Math.round(e.width())>Math.round(this.pseudoElem.width()))return e.css("max-width","100%"),!0}return!1},get isFocused(){var e=document.activeElement,t=this.pseudoElem.length&&this.pseudoElem.is($(e)),n=this.list&&this.list.length&&this.list[0].contains(e),i=this.tagListAPI&&this.tagListAPI.element.contains(e);return!!(t||n||i)},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map(function(e){return e.value})},get selectedOptions(){return _.getArrayFromList(this.element[0].querySelectorAll("option")).filter(function(e){return e.selected})},init:function(){var e=this,t=this.element.attr("id");t=t?$e.stripTags(t):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",t||(t=_.uniqueId(this.element,"dropdown"),ue.setAttribute(this.element[0],"id",t),ue.setAttribute(this.element.parent().find("label").first()[0],"for",t)),"ios"!==Ie.os.name&&"android"!==Ie.os.name||(this.settings.noSearch=!0),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled");var n=this.element[0].classList;0===n.length&&(this.element[0].classList="dropdown");var i=n.contains("dropdown-xs")?"dropdown input-xs":n.contains("dropdown-sm")?"dropdown input-sm":n.contains("dropdown-lg")?"dropdown input-lg":"dropdown",a=this.element.attr("style");this.isHidden=a&&a.indexOf("display: none")>=0;var s=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=s.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(s)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(i)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(t,"-shdo")),n.contains("text-align-reverse")?i+=" text-align-reverse":n.contains("text-align-center")&&(i+=" text-align-center"),this.label=$('label[for="'.concat($e.stripTags(t),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",i):this.pseudoElem=$('<div class="'.concat(i,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var z,V,N,o=ue.getAttributes(this.element[0]),c=this.getDataAttributes(o,["data-validate"]);this.pseudoElem.attr(c.obj).attr({role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":"false"}),this.renderPseudoElemLabel(),this.settings.attributes&&_.addAttributes(this.pseudoElem,this,this.settings.attributes,"dropdown",!0),V=(z=this).element.prop("disabled"),N=z.element.prop("readonly"),V?z.disable():N?z.readonly():z.enable(),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.settings.showSearchUnderSelected=!0,this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var d=this.element.attr("data-source");d&&"source"!==d&&(this.settings.source=d);var p=this.element.attr("data-maxselected");function f(z,V){switch(z){case!V||"true":return"all";case!!V&&"false":return"none";default:return hi.indexOf(z)>-1?z:"none"}}p&&!isNaN(p)&&(this.settings.maxSelected=parseInt(p,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var m=this.element.attr("data-move-selected");this.settings.moveSelected=m?f(m,!0):f(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var b=this.element.attr("data-close-on-select");b&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===b);var C=this.element.attr("data-no-search");C&&!this.settings.noSearch&&(this.settings.noSearch="true"===C);for(var T=["-xs","-sm","-mm","-md","-lg"],S=this.element.attr("class"),M=null,L=0;L<T.length;L++)S.match(M=T[L])&&this.pseudoElem.addClass("dropdown".concat(M));return this.dataset=[],this.listfilter=new ns({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout(function(){e.toggleTooltip()},0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var e=this;function t(s){e.settings.dismissHandler&&e.settings.dismissHandler(s);var o=e.selectedOptions.filter(function(c){return $e.stripHTML(c.value)===s.settings.value});o.length&&e.deselect(o[0]),e.tagListAPI.element.classList[e.selectedOptions.length?"remove":"add"]("empty"),e.isOpen()&&e.updateList()}var n=this.toTagData();n.forEach(function(s){s.dismissHandler=t,e.settings.clickHandler&&(s.clickHandler=e.settings.clickHandler),e.isDisabled()&&(s.disabled=!0)});var i=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:n}):(this.tagListAPI=new yn(i,{tags:n}),i.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),isNaN(this.settings.tagListMaxHeight)||(i.classList.add("scrollable"),i.style.maxHeight=n.length?"".concat(this.settings.tagListMaxHeight,"px"):""),this.pseudoElem[0].classList[i.scrollHeight>i.clientHeight?"add":"remove"]("has-scrollbar"),this.isOpen()&&this.position()},renderPseudoElemLabel:function(){var e,t=this.element.prev(),n=this.element.parent().find(".error-message .message-text"),i=null===(e=this.pseudoElem)||void 0===e||null==e?void 0:e.hasClass("error"),a=n.text(),s="";this.selectedOptions.forEach(function(o){s.length&&(s+=", "),s+=$(o).text().trim()}),this.pseudoElem.attr({"aria-label":"".concat(t.text(),", ").concat(i?a:s)})},inputTimer:function(){if(this.inputTimeout)return!1;var e=this;return this.inputTimeout=setTimeout(function(){clearTimeout(e.inputTimeout),e.inputTimeout=null},200),!0},setWidth:function(){var e=this.element[0].style;e.width&&(this.pseudoElem[0].style.width=e.width),"absolute"===e.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=e.left,this.pseudoElem[0].style.top=e.top,this.pseudoElem[0].style.bottom=e.bottom,this.pseudoElem[0].style.right=e.right)},setItemIcon:function(e){if(!e.icon)return e.isIcon=!1,e.html="",void this.listIcon.items.push(e);"object"===Ge(e.icon)&&(e.obj=e.icon,e.icon=e.icon.icon,e.obj.color?0===e.obj.color.indexOf("#")?e.specColor=e.obj.color:e.classList=" ".concat(e.obj.color):e.obj.class&&(0===e.obj.class.indexOf("#")?e.specColor=e.obj.class:e.classList=" ".concat(e.obj.class)),e.obj.colorOver?0===e.obj.colorOver.indexOf("#")?e.specColorOver=e.obj.colorOver:e.classListOver=" ".concat(e.obj.colorOver):e.obj.classOver&&(0===e.obj.classOver.indexOf("#")?e.specColorOver=e.obj.classOver:e.classListOver=" ".concat(e.obj.classOver))),e.isIcon=e.icon&&e.icon.length,e.classList&&e.classList.length&&(e.isClassList=!0),e.classListOver&&e.classListOver.length&&(e.isClassListOver=!0),e.html=$.createIcon({icon:e.isIcon?e.icon:"",class:"listoption-icon".concat(e.isClassList?" ".concat(e.classList):"")}),"swatch"===e.icon&&(e.isSwatch=!0,e.html='<span class="swatch '.concat(e.isClassList?e.classList:"",'"></span>')),this.listIcon.items.push(e)},setListIcon:function(){var e=this,t=!e.settings.multiple&&e.element.find("[data-icon]").length>0,n=t?this.element.find("option"):[];if(e.listIcon={hasIcons:t,items:[]},t){var i=0;n.each(function(a){var s=$(this).attr("data-icon"),o=null;"string"==typeof s&&s.length&&(o=0!==s.indexOf("{")?s:$.fn.parseOptions(this,"data-icon"),e.setItemIcon({html:"",icon:o}),e.listIcon.items[a]&&e.listIcon.items[a].isIcon&&i++)}),t=i>0}t&&(e.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),e.listIcon.pseudoElemIcon=e.pseudoElem.find("> .listoption-icon"),e.listIcon.idx=-1),e.listIcon.hasIcons=t},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var e=this,t=$(this.element[0].selectedOptions),n=this.getOptionText(t);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:$e.escapeHTML(n),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",function(){e.removeTooltip()}).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(e){var t=this;if(t.listIcon.hasIcons){var n=e?e.find(".listoption-icon"):null;t.list.find("li").each(function(i){var a=$(this),s=a.find(".listoption-icon"),o=t.listIcon.items[i];o&&(a.is(".is-focused")&&o.isClassListOver&&s.removeClass(o.classListOver).addClass(o.classList),n&&a.is(e)&&o.isClassListOver&&(n.removeClass(o.classList),n.addClass(o.classListOver)))})}},updateItemIcon:function(e){if(this.listIcon.hasIcons){var t=this.listIcon.pseudoElemIcon,n=e.index(),i=this.listIcon.idx,a=this.listIcon.items[n],s=a&&a.isIcon?a.icon:"";if(!a)return;if(i>-1){var o=this.listIcon.items[i];o&&(t.removeClass("".concat(o.classList," ").concat(o.classListOver)),t[0].style.fill="")}this.listIcon.idx=n,t.changeIcon(s),a.isClassList&&t.addClass(a.classList)}},updateList:function(e){var t=this,n=this.settings,i=t.isMobile(),a=null!=t.list&&t.list.length>0,s="",o="",c=0,d=this.element.find("optgroup").length,p="",f=!0===this.settings.multiple,m="".concat(this.settings.moveSelected),b=!0===this.settings.showSelectAll,C={all:P.translate("All"),selected:P.translate("Selected"),labelText:t.isInlineLabel?t.inlineLabelText.text():this.label.text()};C.all="string"==typeof n.allTextString&&""!==n.allTextString?t.settings.allTextString:"".concat(C.all),C.selected="string"==typeof n.selectedTextString&&""!==n.selectedTextString?t.settings.selectedTextString:"".concat(C.selected);var T=_.getAttribute(this,"id",this.settings.attributes),S="".concat(T?"".concat(T,"-"):"","dropdown-list"),M="".concat(T?"".concat(T,"-"):"","listbox");this.element[0].classList.contains("text-align-reverse")?p=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(p=" text-align-center"),a?(this.list.attr("id",S),this.listUl.attr("id","".concat(M))):(s='<div class="dropdown-list'.concat(p).concat(i?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="').concat(S,'" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(P.translate(this.settings.noSearch?"PressDown":"TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(p,'" ').concat(this.settings.noSearch?'aria-readonly="true"':"",' id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(i?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),"</span>"),s+=this.settings.virtualScroll?'<div class="virtual-scroll-container">\n            <div class="ids-virtual-scroll">\n              <div class="ids-virtual-scroll-viewport">\n                <ul id="'.concat(M,'"').concat(' role="listbox"',' class="contents" aria-label="').concat(P.translate("Dropdown"),'"></ul>\n              </div>\n            </div>\n          </div>'):'<ul id="'.concat(M,'"').concat(' role="listbox"',' aria-label="').concat(P.translate("Dropdown"),'">'));var L=this.element.find("option"),z=this.element.find("optgroup"),V=function(Z,oe){return oe.selected},N=[];"typeahead"===this.settings.reload&&(V=function(Z,oe){return!!t.selectedValues&&t.selectedValues.indexOf(oe.value)>-1});var U=L.filter(V);if("typeahead"===this.settings.reload&&U.prop("selected",!0),f&&b&&L.length){var G=L.not("[disabled], .hidden").length===U.not("[disabled], .hidden").length;o+='<li role="none" class="dropdown-select-all-list-item'.concat(G?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(P.translate("SelectAll"),"</a>")+"</li>"}"group"===m&&(z&&z.length?z.each(function(Z,oe){var le=U.filter(function(){return $.contains(oe,this)});N.push(le)}):m="all"),"all"===m&&(L=L.not(U),U.length>0&&(o+=t.buildLiHeader(C.selected)),U.each(function(Z){o+=t.buildLiOption(this,Z,e),c++}),!d&&L.length>0&&(o+=t.buildLiHeader(C.all))),this.settings.virtualScroll?o="":L.each(function(Z){var oe,le=Z+c,re=$(this),J=re.parent();J.is("optgroup")&&z.length&&(oe=J.index(),z.index(J)>-1&&(z=z.not(J),o+=t.buildLiHeader("".concat(J.attr("label"))),"group"===m&&N[oe].each(function(ce){o+=t.buildLiOption(this,ce,e),c++}))),"none"!==m&&re.is(":selected")||(o+=t.buildLiOption(this,le,e))}),a?(this.listUl.html(o),t.settings.attributes&&this.listUl.find(".dropdown-option a").each(function(Z){var oe=$(this);_.addAttributes(oe,t,t.settings.attributes,"option-".concat(Z),!0)})):(s+="".concat(o,this.settings.virtualScroll?"</div>":"</ul></div>"),this.list=$(s),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),"ios"!==Ie.os.name&&"android"!==Ie.os.name||this.searchInput.attr("readonly","readonly"),this.virtualScrollElem=this.listUl.closest(".virtual-scroll-container"),this.opts=L,this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),d&&this.listUl.addClass("has-groups"),this.hasTooltips=this.listUl.find("[title]").length>0||this.element.find("[title]").length>0,this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},buildLiHeader:function(e){return'<li role="none" class="group-label" focusable="false">\n      '.concat(e,"\n    </li>")},buildLiOption:function(e,t,n){var a=e.innerHTML,s=ue.getAttributes(e),o=s.getNamedItem("value"),c=s.getNamedItem("title"),d=c?' title="'.concat(c.value,'"'):"",p=s.getNamedItem("data-badge"),f=s.getNamedItem("data-badge-color"),m="",b=e.selected?" is-selected":"",C=e.disabled?" is-disabled":"",T=e.className?" ".concat(e.className.value):"",S=T.indexOf("clear")>-1?' class="clear-selection"':"",M=' tabIndex="'.concat(t&&0===t?0:-1,'"'),L=" ".concat(this.getDataAttributes(s,["data-badge","data-badge-color","data-val","data-icon"]).str),z=(o&&"value"in o?o.value:a).replace(/"/g,"/quot/"),V="";if(this.listIcon.hasIcons&&this.listIcon.items[t]&&(V=this.listIcon.items[t].html)," "===L&&(L=""),p&&(m='<span class="badge '.concat(f?f.value:"azure07",'">').concat(p.value,"</span>")),T.indexOf("clear")>-1&&""===a&&(a=P.translate("ClearSelection")),n&&n.length>0){var N=this.getSearchRegex(n);a=a.replace(N,'<span class="dropdown-highlight">$1</span>').trim()}return this.listIcon.hasIcons&&this.listIcon.items[t]&&this.listIcon.items[t].isSwatch&&(T+=" is-swatch"),""+'<li class="dropdown-option'.concat(b).concat(C).concat(T,'" data-val="').concat(z,'" ').concat(L).concat(d,' role="none">\n      <a id="list-option-').concat(t,'" href="#" ').concat(S,' role="option" ').concat(b?'aria-selected="true"':'aria-selected="false"').concat(M,">").concat(V).concat(a).concat(m,"</a></li>")},setDisplayedValues:function(){var e=$(this.element[0].selectedOptions),t=this.getOptionText(e);if(e.hasClass("clear")&&(t=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===e.length){var n=this.pseudoElem.find("span").first();return ue.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),n=$("#".concat(this.element.attr("id"))).next().find("span").first(),ue.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),this.setPlaceholder(t),void this.scrollRelease(this.listUl)}var i=this.element.attr("maxlength");i&&(t=t.substr(0,i)),t=t.trim();var a=this.pseudoElem.find("span");a.length>0&&(a[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat($e.escapeHTML(t))),this.settings.showSearchUnderSelected||this.setPlaceholder(t)}this.previousActiveDescendant=e.first().val(),this.renderPseudoElemLabel(),this.updateItemIcon(e),this.setBadge(e)},copyClass:function(e,t,n){e.hasClass(n)&&t.addClass(n)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function(e){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var t="string"!=typeof e||"string"==typeof e&&""===e;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",t?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(e,t){var n=t.which;return t.altKey&&38===n||n>111&&n<124&&!this.settings.onKeyDown?(t.stopPropagation(),t.preventDefault(),!1):e.is(":disabled")||e.hasClass("is-readonly")?void 0:!t.ctrlKey||!this.settings.onKeyDown||!1!==this.settings.onKeyDown(t)||(t.stopPropagation(),t.preventDefault(),!1)},handleSearchEvents:function(){var e=this;this.filterTerm||(this.searchKeyMode=!1);var t,n=this.searchInput[0].value;"ie"===Ie.browser.name&&"11"===Ie.browser.version||(t=String.fromCodePoint(8)),"."!==n&&n!==t||(this.searchInput[0].value=""),this.searchInput.on("keydown.".concat("dropdown"),function(i){var a=$(e);return e.handleKeyDown(a,i)}).on("input.".concat("dropdown"),function(i){e.isFiltering=!0,e.handleAutoComplete(i)})},filterList:function(e){var t=this,n=!1;this.settings.source&&"typeahead"===this.settings.reload&&(n=!0,this.callSource());var i,a=this,s=!1,o=$(".dropdown-option",this.listUl),c=$(".group-label",this.listUl);if(o.length&&this.list&&(!this.list||this.list.length)){e||(e="");var d=function(){if(i=!n&&e&&e.length?t.listfilter.filter(o,e):o,t.list.addClass("search-mode"),t.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),t.searchInput.removeAttr("aria-activedescendant"),t.unhighlightOptions(),i&&(i.length||e)){i.removeClass("hidden"),o.not(i).add(c).addClass("hidden"),t.filteredItems=o.filter(i),t.filteredItems.each(function(f){var m=$(this);m.children("a").attr("tabindex",0===f?"0":"-1"),s||(a.highlightOption(m),s=!0),a.highlightSearchTerm(m,e)}),c.each(function(){var f=$(this).nextUntil(".group-label, .selector").not(".hidden");(a.settings.showEmptyGroupHeaders||f.length)&&$(this).removeClass("hidden")}),e="";var p=document.body.scrollHeight;window.scrollY+window.innerHeight>=p?a.position():a.shrinkTop(a)}else t.resetList()};if(this.settings.virtualScroll)return $(this.virtualScroller.element).one("afterrendered",function(){o=$(".dropdown-option",t.listUl),d()}),this.virtualScroller.data=this.listfilter.filter(this.opts,e),void(o=$(".dropdown-option",this.listUl));d()}},shrinkTop:function(e){if(e.list&&e.list[0].classList.contains("is-ontop")){var t=parseInt(e.list[0].offsetHeight,10),n=parseInt(e.searchInput[0].offsetHeight,10);e.list[0].style.top="".concat(e.wrapper[0].offsetParent.offsetTop+(t-n)+4,"px")}},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var e=this.listUl.find("li");e.removeAttr("style").each(function(){var t=$(this).children("a"),n=$(this),i=$e.escapeHTML(t.text()),a=0!==n.children("a").find("svg").length?(new XMLSerializer).serializeToString(n.children("a").find("svg")[0]):"",s=n.children("a").find(".swatch");t[0]&&(t[0].innerHTML=(0!==s.length?s[0].outerHTML:"")+a+i)}),this.list[0].style.top=this.list.hasClass("is-ontop")?"".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px"):"",delete this.filteredItems,this.settings.multiple&&this.updateList(),this.settings.virtualScroll&&(this.virtualScroller.data=this.opts),e.removeClass("hidden"),this.position(),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var e=this.element.find("option").filter(function(){return!this.value||0===$.trim(this.value).length});e.length&&(e[0].selected=!0,e[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.trigger("change").triggerHandler("selected"))},handleKeyDown:function(e,t){var n,i=this,a=this.element[0].selectedIndex||-1,s=this.element[0].options,o=t.which,c=this;if(!this.ignoreKeys(e,t))return!1;if(this.isLoading())return!0;if(c.settings.onKeyDown&&!1===c.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;if(c.isOpen()){s=c.settings.virtualScroll?this.opts:this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),a=-1,$(s).each(function(T){($(this).is(".is-focused")||c.settings.virtualScroll&&$(this).is(":selected"))&&(a=T)});var d="mac"===Ie.os.name;if((!d&&"Delete"===t.key||d&&"Backspace"===t.key||"Backspace"===t.key)&&this.settings.noSearch){var p=$(s[0]);this.highlightOption(p),"Backspace"===t.key&&(t.stopPropagation(),t.preventDefault())}}switch(o){case 37:case 8:case 46:if(!c.isOpen())return c.selectBlank(),t.stopPropagation(),t.preventDefault(),!1;break;case 9:return c.isOpen()?(1===c.filterTerm.length?c.selectStartsWith(c.filterTerm):!this.settings.multiple&&s.length&&a>-1&&c.selectOption(this.correctValue($(s[a]))),c.closeList("tab"),this.activate()):1===c.filterTerm.length&&c.selectStartsWith(c.filterTerm),!0;case 27:if(c.isOpen()){c.element.closest(".modal.is-visible").data("listclosed",!0);var f=c.pseudoElem?c.pseudoElem.parents("td"):null;return c.closeList("cancel"),c.activate(),f&&f.focus(),t.stopPropagation(),!1}break;case 32:case 13:if(c.isOpen()){if(32===o&&!0===c.searchKeyMode)break;if(t.preventDefault(),s.length&&a>-1){var m=$(s[a]);c.selectListItem(m)}}return t.stopPropagation(),!1;case 38:return!!t.shiftKey||(this.searchKeyMode=!1,a>0&&(n=$(s[a-1]),this.highlightOption(n),c.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),t.stopPropagation(),t.preventDefault(),!1);case 40:return!!t.shiftKey||(this.searchKeyMode=!1,a<s.length-1&&(n=$(s[a+1]),this.highlightOption(n),c.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),t.stopPropagation(),t.preventDefault(),!1);case 35:this.searchKeyMode=!1;var b=$(s[s.length-1]);return this.highlightOption(b),t.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var C=$(s[0]);return this.highlightOption(C),t.stopPropagation(),!1}return c.isOpen()?!0!==this.settings.noSearch||c.isControl(o)||this.handleAutoComplete(t):c.isControl(o)||this.settings.source||this.settings.noSearch||(c.isFiltering=!0,c.filterTerm=$.actualChar(t),c.searchInput&&c.searchInput.length&&c.searchInput.val($.actualChar(t)),c.toggle()),this.searchKeyMode=!0,c.searchInput&&c.searchInput.attr("aria-activedescendant",""),!0},handlePseudoElemKeydown:function(e){var t=$(e.target),n=e.key;if(t.is(".is-readonly"))return!0;var i="Esc"===n||"Escape"===n;if(["Alt","Shift","Control","Meta"].indexOf(n)>-1||!this.ignoreKeys(t,e))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(n)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!e.ctrlKey&&this.handleKeyDown(t,e),!1;var a="mac"===Ie.os.name;return!a&&"Delete"===n||a&&"Backspace"===n||"Backspace"===n&&this.settings.noSearch?(this.selectBlank(),"Backspace"===n&&(e.stopPropagation(),e.preventDefault()),!0):i||"Tab"===n?!(1===this.filterTerm.length||this.settings.noSearch&&this.isOpen())||this.handleKeyDown(t,e):(this.handleAutoComplete(e),!0)},handleAutoComplete:function(e){var t=this;if(!this.isLoading()){var n=this;if(this.timer&&clearTimeout(this.timer),"input"===e.type)this.filterTerm=n.settings.noSearch?this.searchInput.val().toLowerCase():this.searchInput.val();else{if(this.filterTerm+=$.actualChar(e).toLowerCase(),""===this.filterTerm)return;e.key===this.filterTerm||e.key.toLowerCase()!==this.filterTerm||n.settings.noSearch||(this.filterTerm=e.key)}this.timer=setTimeout(function(){var a,s;if(n.settings.noSearch&&""!==n.filterTerm)return n.isOpen()?n.highlightStartsWith(n.filterTerm):n.selectStartsWith(n.filterTerm),void(n.filterTerm="");n.searchKeyMode=!0,n.isOpen()||""===n.filterTerm?(0===(null===(a=t.list)||void 0===a||null==a?void 0:a.find("ul li.hidden").length)&&(null===(s=t.list)||void 0===s||null==s||s.find(" > svg.listoption-icon:not(.swatch)").changeIcon("icon-empty-circle")),i()):n.open(i)},n.settings.delay)}function i(){""===n.filterTerm?n.resetList():n.filterList(n.filterTerm.toLowerCase())}},isControl:function(e){return e>7&&e<48||e>90&&e<94||e>111&&e<146},activate:function(e){var t=this,n=this.pseudoElem;(e||t.isMobile())&&(n=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),e&&n&&(n.hasClass("is-readonly")||!0===n.prop("readonly"))||(t.isMobile()||t.filterTerm||!n||(n[0].setSelectionRange?n[0].setSelectionRange(0,n[0].value.length):"INPUT"===n[0].tagName&&n[0].select()),n&&"INPUT"!==document.activeElement.tagName&&n[0].focus())},getSearchRegex:function(e){var t;try{t=new RegExp("(".concat(at.escapeRegExp(e),")"),"i")}catch{t=/[\s\S]*/i}return t},getOptionText:function(e){var t="";return e||(e=this.element.find("option:selected")),e.each(function(){t.length>0&&(t+=", "),t+=$(this).text().trim()}),t},open:function(e){var t=this;function n(){t.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),t.updateList(),t.openList(),e&&"function"==typeof e&&e.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||t.callSource(n)||n())},openList:function(){var e,t=this,n=this.list.find(this.previousActiveDescendant?'.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]'):".is-selected"),i=this;if(this.touchPrevented=!1,this.scrollLock(this.listUl),$("select").each(function(){var Z=$(this).data();Z.dropdown&&Z.dropdown.closeList("cancel")}),$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).each(function(){var Z=$(this).data("trigger");if(Z&&Z.length){var oe=$(this).data("trigger").data("popupmenu");oe&&"function"==typeof oe.close&&oe.close()}}),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.list.attr("data-element-id",this.element.attr("id")),this.isShortField&&this.list[0].classList.add("dropdown-short"),i.settings.attributes){_.addAttributes(this.list.find("input"),this,this.settings.attributes,"search",!0),this.list.find("label").attr("for",this.list.find("input").attr("id")),_.addAttributes(this.list.find("label"),this,this.settings.attributes,"search-label"),_.addAttributes(this.list.find(".trigger svg"),this,this.settings.attributes,"trigger",!0),_.addAttributes(this.listUl,this,this.settings.attributes,"listbox",!0),_.addAttributes(this.list,this,this.settings.attributes,"list"),this.list.find(".dropdown-option a").each(function(Z){var oe=$(this);_.addAttributes(oe,i,i.settings.attributes,"option-".concat(Z),!0)});var a=_.getAttribute(this,"id",this.settings.attributes);this.pseudoElem.attr("aria-controls",a?"".concat(a,"-listbox"):"dropdown-list"),this.pseudoElem.attr("aria-expanded")}if(this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",n.children("a").attr("id")),this.searchInput.prop("readonly",this.settings.noSearch),this.settings.showSearchUnderSelected&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var s=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(s))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var o=this.settings.cssClass;if(o&&"string"==typeof o&&this.list.addClass(o),this.position(),this.list.hasClass("datagrid-filter-dropdown")&&null!==document.querySelector(".datagrid-container")){var c=this.dropdownParent.closest(".datagrid-container").getBoundingClientRect(),d=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),p=document.querySelector('[role="main"]').getBoundingClientRect().right-c.right,f=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),m=!1;P.isRTL()&&f.left+20<0&&(m=!0),f.right+20>(window.innerWidth||document.documentElement.clientWidth)&&(m=!0),c.right<d.right&&m&&(this.list[0].style.right="".concat(p,"px"),this.list[0].style.left=""),P.isRTL()&&d.left<0&&(this.list[0].style.left="".concat(c.left,"px"))}if(this.settings.virtualScroll){var b=-1,C=null;this.opts.toArray().filter(function(Z,oe){return Z.selected?(b=oe,C=Z,Z):null}),this.virtualScroller=new _a(this.virtualScrollElem,{height:304,itemHeight:32,itemTemplate:function(Z,oe){var le=i.buildLiOption(oe,Z);return oe.selected&&(C=oe,n=$(C)),i.highlightSearchTerm($(le),i.filterTerm)},data:this.opts}),setTimeout(function(){$(t.virtualScroller.element).on("afterrendered",function(){t.highlightOption($(C))}),t.virtualScroller.scrollTo(b)})}if(this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),this.settings.width&&this.list.css("width","".concat(this.settings.width,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showSearchUnderSelected){var T=$(this.selectedOptions),S=this.getOptionText(T);this.searchInput.val(S)}if(this.highlightOption(n,this.settings.multiple),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout(function(){i.listUl.scrollTop(0)},0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",function(Z){13===Z.which&&i.closeList("select")}),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",function(Z){if(!i.touchPrevented){var oe=i.selectListItem($(this));Z.preventDefault(),oe&&Z.stopPropagation()}}).on("mouseenter.list","li",function(){i.highlightOption($(this),!0)}),this.hasTooltips){var L=function(){i.timer&&i.timer.destroy&&i.timer.destroy(!0)},z=function(Z,oe){$(Z).tooltip({trigger:"immediate",content:oe}),$(Z).focus()};i.list.on("mouseover.tooltip","li[title], li[data-title]",function(Z){var oe;oe=Z.currentTarget,L(),i.timer=new nn({duration:50,timeoutCallback:function(){var le=oe.getAttribute("title");if(!le)return le=oe.getAttribute("data-title"),void z(oe,le);oe.setAttribute("data-title",le),oe.removeAttribute("title"),z(oe,le)}}),dt.register(i.timer)}).on("mouseleave.tooltip, mousewheel.tooltip, click.tooltip","li[title], li[data-title]",function(Z){var oe;L(),$("#tooltip").hide(),null===(oe=$("#tooltip").data("tooltip"))||void 0===oe||null==oe||oe.destroy()})}function N(Z){var oe=$(Z.target);if(i.touchPrevented||i.isDropdownElement(oe)&&!oe.is(".icon"))return Z.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}this.scrollRelease(this.listUl),setTimeout(function(){i.list.addClass("is-closable")},100),$(document).on("touchstart.dropdown",function(Z){i.touchPrevented=!1,e={x:Z.originalEvent.touches[0].pageX,y:Z.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",function(oe){var le=oe.originalEvent.touches[0].pageX,re=oe.originalEvent.touches[0].pageY;(le>=e.x+10||le<=e.x-10||re>=e.y+10||re<=e.y-10)&&(i.touchPrevented=!0)})}).on("touchend.dropdown touchcancel.dropdown",function(Z){if($(document).off("touchmove.dropdown"),Z.preventDefault(),i.touchPrevented)return Z.stopPropagation(),!1;N(Z)}).on("click.dropdown",N);var U=$(".modal.is-visible .modal-body-wrapper"),G=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");G.length&&(U=G),U.length&&(this.parentScrollableArea=U,this.parentScrollableArea.on("scroll.dropdown",function(Z){t.scrollDocument(Z)}),this.parentScrollableArea.css("overscroll-behavior","none")),$("body").on("resize.dropdown",function(){i.position(),void 0===window.orientation&&i.closeList("cancel")}).on("keydown.dropdown",function(Z){var oe=$(Z.target);!t.isOpen()||oe.hasClass("dropdown-search")||oe.hasClass("dropdown")||t.handleKeyDown(oe,Z)}),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",function(){i.closeList("cancel")})},isDropdownElement:function(e){return e.closest(".dropdown, .multiselect").length>0||e.closest(".dropdown-list").length>0||!0===self.touchmove},scrollDocument:function(e){var t=$("*:focus");this.touchPrevented||this.isDropdownElement($(e.target))||t.is(".timepicker")?this.touchPrevented=!1:this.closeList("cancel")},position:function(){var e=this,t={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var n=this.pseudoElem;this.isInGrid&&(n=this.element.closest(".datagrid-cell-wrapper"));var i=window.getComputedStyle(n[0]),a=2*parseInt(i.borderLeftWidth,10),s=Math.round(parseInt(n[0].clientWidth,10)+a);this.searchInput[0].style.cssText="width: ".concat(s,"px !important");var o=Math.round(this.list.width())<=s;if(this.searchInput[0].style.width="",t.parent=n,t.useParentWidth=o,!this.settings.showSearchUnderSelected){var c=window.devicePixelRatio>1,d="chrome"===Ie.browser.name;t.y=-(parseInt(n[0].clientHeight,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)-(!d&&c?1:0)),t.x=0}e.settings.placementOpts&&e.settings.placementOpts.x&&(t.x=e.settings.placementOpts.x),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),this.settings.width&&this.list.css("width","".concat(this.settings.width,"px")),this.list.one("afterplace.dropdown",function(p,f){e.list[!0===f.wasFlipped?"addClass":"removeClass"]("is-ontop"),e.settings.virtualScroll||e.listUl[!0===f.wasFlipped?"prependTo":"appendTo"](e.list);var m=window.getComputedStyle(e.list[0]),b=m.top?parseInt(m.top,10):0,C=0;"firefox"===Ie.browser.name&&(C=4);var T,S=parseInt(e.listUl[0].offsetHeight,10),M=parseInt(e.list[0].offsetHeight,10)+5,L=parseInt(e.searchInput[0].offsetHeight,10),z=parseInt(e.list[0].offsetTop,10)+parseInt(e.list[0].offsetHeight,10)>=window.innerHeight;return L<M-2*L&&S+L>=M&&(T="".concat(M-L-5,"px"),z&&(e.list[0].style.maxHeight="".concat(parseInt(M,10)-5,"px"))),f.wasFlipped&&(T="".concat(M-L-C-5,"px"),e.isShortField||(e.list[0].style.top="".concat(b,"px"))),T&&!e.settings.virtualScroll&&(e.listUl[0].style.maxHeight=T),void 0===T&&e.list[0].classList.contains("is-ontop")&&(T="".concat(M-L-C-7),e.list[0].style.top="".concat(b-T,"px")),f}).place(t),this.list.data("place").place(t)},selectListItem:function(e){var t=e.closest("li");if(t.length&&(e=t),e.is(".separator, .group-label"))return!1;e.is(".dropdown-select-all-anchor")&&(e=e.parent());var n=e[0].querySelector("a");if(this.settings.multiple&&e[0].classList.contains("dropdown-select-all-list-item")){var i=!e[0].classList.contains("is-selected");return e[0].classList[i?"add":"remove"]("is-selected"),n.setAttribute("aria-selected",i?"true":"false"),this.selectAll(i),!0}var a=this.correctValue(e);if(a.is(":disabled"))return!1;if(this.selectOption(a),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var s=this.element.find("option"),o=s.filter(":selected");s.length>o.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").attr("aria-selected","false"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(e){var t=e.attr("data-val")||e.attr("value");if(!t)return e;t=t.replace(/"/g,"/quot/");var n=this.element.find('option[value="'.concat(t,'"]'));return(0===n.length||n.length>1)&&(n=this.element.find("option").filter(function(){var i=$(this),a=i.attr("value");return i.text()===t||a&&a.replace(/"/g,"/quot/")===t})),n},close:function(){return this.closeList("cancel")},closeList:function(e){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),delete this.filteredItems,this.tagListAPI&&this.scrollTagList(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").attr("aria-expanded","false"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",e),"click"!==e&&this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function(e){e&&0!==e.length&&(this.scrollLock(this.listUl),this.settings.virtualScroll?(e[0].closest(".ids-virtual-scroll").scrollTop=e[0].offsetTop-e[0].closest(".ids-virtual-scroll").offsetTop,e[0].scrollIntoView({block:"center"})):e[0].parentNode.scrollTop=e[0].offsetTop-e[0].parentNode.offsetTop,e.focus(),this.searchInput.focus(),this.scrollRelease(this.listUl))},scrollLock:function(){var e;null===(e=this.parentScrollableArea)||void 0===e||null==e||e.off("scroll.dropdown")},scrollRelease:function(){var e=this;setTimeout(function(){var t;null===(t=e.parentScrollableArea)||void 0===t||null==t||t.off("scroll.dropdown").on("scroll.dropdown",function(n){e.scrollDocument(n)})},"ios"===Ie.os.name?800:400)},scrollTagList:function(){var e=this;this.tagListAPI&&setTimeout(function(){e.isFocused||(e.tagListAPI.element.scrollTop=0)},5)},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return Sa(this.toggle,this.toggleList).apply(this)},highlightOption:function(e,t){var n;this.isOpen()&&e&&(0===e.length&&(e=this.list.find(".dropdown-option").eq(0)),e.is(".separator, .group-label")||(e.is("option")?e=this.listUl.find('li[data-val="'.concat((n=e).val(),'"]')):n=this.element.find("option").filter(function(i,a){return a.value===e.attr("data-val")}),this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").children("a").attr({tabindex:"-1"}),e.length&&n.length&&!n.hasClass(".is-disabled")&&!n.is(":disabled")&&(this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),this.setItemIconOverColor(e),e.addClass("is-focused").children("a").attr({tabindex:"0"}),t&&!1!==t&&void 0!==t||this.scrollToOption(e))))},highlightSearchTerm:function(e,t){if(!e)return"";if(!t)return e[0].outerHTML;var n=e.children("a"),i=this.getSearchRegex(t),a=e.text();a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=$e.escapeHTML(a)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(i,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var s=0!==e.children("a").find("svg").length?(new XMLSerializer).serializeToString(e.children("a").find("svg")[0]):"",o=e.children("a").find(".swatch");return n[0]&&(n[0].innerHTML=(0!==o.length?o[0].outerHTML:"")+s+a),e[0].outerHTML},unhighlightOptions:function(e,t){e&&e.length||(e=this.list.find(".is-selected")),this.setItemIconOverColor(),e.removeClass("is-focused").children("a").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),t&&!1!==t&&void 0!==t||this.scrollToOption(e.first())},renderListItem:function(e){var n=e.selected,i=this.listUl.find('li[data-val="'.concat(e.value,'"]')),a=i.children("a");if(i){if(n)return i[0].classList.add("is-selected"),void a[0].setAttribute("aria-selected","true");i[0].classList.remove("is-selected"),a[0].setAttribute("aria-selected","false")}},selectAll:function(e){var t=this,a=_.getArrayFromList(this.element[0].querySelectorAll("option:not(.is-disabled):not(:disabled)")),s=_.getArrayFromList(this.listUl[0].querySelectorAll("li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)")),o=a[a.length-1];this.settings.selectAllFilterOnly&&this.filteredItems&&(a=[],(s=$.makeArray(this.filteredItems)).forEach(function(c){var d=c.getAttribute("data-val");if(d){var p=t.element[0].querySelector('option[value="'.concat(d,'"]'));p&&a.push(p)}})),e?(s.forEach(function(c){c.classList.add("is-selected"),c.querySelector("a").setAttribute("aria-selected","true")}),a.forEach(function(c){c.selected=!0,c.setAttribute("selected",!0)})):(s.forEach(function(c){c.classList.remove("is-selected"),c.querySelector("a").setAttribute("aria-selected","false")}),a.forEach(function(c){c.selected=!1,c.setAttribute("selected",!1),c.removeAttribute("selected")})),this.previousActiveDescendant=o.value||"",this.setDisplayedValues(),this.updateItemIcon(o),!this.settings.selectAllFilterOnly&&this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(o),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(e,t){Array.isArray(e)&&(e=$(e));var n=this;e.each(function(){n.selectOption($(this),t)}),n.element.trigger("change").triggerHandler("selected")},selectOption:function(e,t){var n;if(e&&e.length)if(this.scrollLock(this.listUl),e.is("li")&&(n=e,0===(e=this.element.find('option[value="'.concat(e.attr("data-val"),'"]'))).length&&(e=this.element.find("option").filter(function(){return $(this).text()===n.attr("data-val")})),e.prop("disabled")))this.scrollRelease(this.listUl);else{var i=e.val();"string"==typeof e?(n=this.listUl.find('li[data-val="'.concat(e,'"]')),e=this.element.find('option[value="'.concat(i=e,'"]'))):"string"==typeof i&&(i=i.replace(/"/g,"/quot/"),n=this.listUl.find('li[data-val="'.concat(i,'"]')));var a=this.listUl.find("li").first().hasClass("is-selected"),s=!0,o=!0,c=this.selectedValues,d=!1;!e.hasClass("clear")&&n||(d=!0),d&&this.deselectAll(),Array.isArray(c)||(c=[c]);var p=c.indexOf(i)>-1;this.settings.multiple&&p&&(s=!1),s?p&&!a?o=!1:(this.select(e[0]),this.previousActiveDescendant=i,this.settings.noSearch&&this.searchMatches&&delete this.searchMatches):(this.deselect(e[0]),this.previousActiveDescendant=void 0);var f=this.listUl[0].scrollTop;f>0&&(this.currentlyScrolledPos=f),this.renderListItem(e[0]),this.setDisplayedValues(),this.updateItemIcon(e),!t&&o&&(this.element.trigger("change").triggerHandler("selected",[e,s]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(e);var m=this.element.attr("id");if(Ie.browser.isIE11()&&m){var b=$("#".concat(m)).html(),C=$("#".concat(m)).val();b&&this.element.html(b),C&&this.element.val(C)}$(".tooltip:not(.is-hidden)").hide(),this.scrollRelease(this.listUl)}},select:function(e){e&&e instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(e.selected=!0))},selectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.select(t[0]),this.updated())}},deselect:function(e){e&&e instanceof HTMLOptionElement&&(e.selected=!1,this.element.trigger("change"))},deselectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.deselect(t[0]),this.updated())}},deselectAll:function(){var e=this;this.element.find("option").each(function(t,n){$(n).prop("selected",!1),e.deselectValue(n)})},firstOptionStartingWith:function(e){if("string"==typeof e){var t=this.element[0],n=-1,i=0;this.searchMatches&&this.searchMatches[e]||(this.searchMatches={},this.searchMatches[e]=[]);for(var a=0;a<t.options.length;a++)if(0===t.options[a].innerText.toLowerCase().indexOf(e)){if(-1===this.searchMatches[e].indexOf(a)){this.searchMatches[e].push(a),n=a;break}i++}if(-1===n){if(!this.searchMatches[e].length)return;i===this.searchMatches[e].length&&(n=this.searchMatches[e][0],this.searchMatches[e].length=1)}return t.options[n]}},selectStartsWith:function(e){this.filterTerm="";var t=this.firstOptionStartingWith(e);this.select(t),this.updated(),this.element.trigger("change")},highlightStartsWith:function(e){if(this.isOpen()){var t=this.firstOptionStartingWith(e);this.highlightOption($(t))}},setBadge:function(e){if(this.badges){var t=this.element.parent().find(".badge");0===t.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),t=this.element.parent().find(".badge")),t.attr("class","badge ".concat(e.attr("data-badge-color")?e.attr("data-badge-color"):"azure07")).text(e.attr("data-badge"))}},callSource:function(e,t){var n=this,i="";if(t||!this.isOpen()||this.element.hasClass("search-mode")||(i=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var a=Ge(this.settings.source),s=function(d,p){var f="",m=n.element.val();function b(L){return L.replace(/"/g,"'")}function C(L){if(null!=L){var z="",V="",N="",U="";"string"==typeof L&&(L={value:L}),void 0!==L.value&&(L.value=b(L.value)),void 0!==L.id&&(isNaN(L.id)||(L.id="".concat(L.id)),L.id=b(L.id),z=' id="'.concat(L.id,'"')),void 0!==L.label&&L.label.length&&(L.label=b(L.label),N=L.label);var G=n.selectedValues.indexOf(m)>-1;n.settings.multiple?m.forEach(function(Z){Z===L.value&&(L.selected=!0)}):(L.value===m||G)&&(L.selected=!0),L.selected&&(V=" selected"),L.disabled&&(U=" disabled"),N.length||N===L.value||(N+=L.value),f+="<option".concat(z,' value="').concat(L.value,'"').concat(V).concat(U,">\n          ").concat(N,"\n        </option>")}}if(!n.isFiltering&&!_.equals(d,n.dataset)&&(n.dataset=d,!p)){n.element.empty();for(var T=0;T<d.length;T++){var S=void 0;if(d[T].group){S=d[T].options,f+='<optgroup label="'.concat(d[T].group,'">');for(var M=0;M<S.length;M++)C(S[M]);f+="</optgroup>"}else C(d[T])}n.element.append(f)}n.element.triggerHandler("complete"),n.element.trigger("requestend",[i,d]),"function"==typeof e?e():n.updateList(i)};if(n.element.triggerHandler("start"),n.element.trigger("requeststart"),"function"===a)this.settings.source(s,i,this.settings.sourceArguments);else if("object"===a){var o=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];s(o)}else{var c=this.settings.source.toString();$.getJSON(c).done(function(d){s(d)}).fail(function(){s([])})}return!0},getDataAttributes:function(e,t){if(e){"string"==typeof e&&(e=[e]);var n=t||[];"string"==typeof n&&(n=[n]);var i={obj:{},str:"",isExclude:function(s){return $.inArray(s,n)>-1}};for(var a in e)e.hasOwnProperty(a)&&(i.name="".concat(e[a].name),i.isData="data-"===i.name.substr(0,5),i.isData&&!i.isExclude(i.name)&&(i.obj[i.name]=e[a].value,i.str+=" ".concat(i.name,'="').concat(e[a].value,'"')));return{str:i.str,obj:i.obj}}},setCode:function(e){var t=this,n=function(){t.element.val(e),t.updated()};t.callSource(n)||n()},isMobile:function(){return["ios","android"].indexOf(Ie.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var e=[],t=this.element[0].id;return t||(t=_.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach(function(n){e.push({content:n.innerText.trim(),dismissible:!0,href:"#",id:"".concat(t,"-tag-").concat(n.value),style:"secondary",value:n.value})}),e},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.addClass("is-disabled"),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("aria-readonly","true").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.element.prop("multiple",!(!this.settings.multiple||!0!==this.settings.multiple)),!0===this.element.prop("readonly")?this.readonly():(this.pseudoElem.removeClass("is-readonly"),this.pseudoElem.removeAttr("aria-readonly")),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var e=document.body.querySelector("#dropdown-list");e&&this.isOpen()&&e.parentNode.removeChild(e)},handleEvents:function(){var e=this,t=this;function n(a){var s=$(a.target).parents(".tag").length>0,o=!1;return a.target instanceof HTMLElement&&"string"==typeof a.target.className&&(o=a.target.classList.contains("tag")),!(!o&&!s)}var i=!1;this.pseudoElem.on("keydown.dropdown",function(a){return e.handlePseudoElemKeydown(a)}).on("click.dropdown touchstart.dropdown",function(a){a.originalEvent.ctrlKey&&a.originalEvent.shiftKey||a.stopPropagation(),i||(t.dropdownParent=a.currentTarget,t.toggle())}).on("mouseup.dropdown touchend.dropdown",function(a){2===a.button&&a.stopPropagation()}).on("mousedown.dropdown touchstart.dropdown",function(a){i=n(a)}).on("touchcancel.dropdown",function(a){n(a)||(a.stopPropagation(),t.toggle(),a.preventDefault())}),this.tagListAPI&&this.pseudoElem.on("focusout.dropdown",function(){e.scrollTagList()}),t.element.on("activated.dropdown",function(){t.label.trigger("click")}).on("updated.dropdown",function(a){a.stopPropagation(),t.updated()}).on("openlist.dropdown",function(){t.toggle()}),t.element.closest("form").on("reset.dropdown",function(){setTimeout(function(){t.element.triggerHandler("updated")},1)}),this.label.on("click",function(){t.isDisabled()||t.pseudoElem.focus()})}},$.fn.dropdown=function(e){return this.each(function(){var t=$.data(this,"dropdown");t?t.updated(e):t=$.data(this,"dropdown",new sa(this,e))})};var pi={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function za(e,t){this.settings=_.mergeSettings(e,t,pi),t&&t.colors&&(this.settings.colors=t.colors),this.element=$(e),this.init()}za.prototype={init:function(){this.isIe="ie"===Ie.browser.name,this.isIeEdge="edge"===Ie.browser.name,this.isIe11=this.isIe&&"11"===Ie.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=P?P.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var e=this.element,t=this.isEditor?this.element.attr("data-value"):this.element.val(),n="swatch".concat(t&&""!==$.trim(t)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),e.wrap(this.container)),this.container=e.parent(),this.swatch=$('<span class="'.concat(n,'"></span>')).prependTo(this.container),this.settings.showLabel){var i=e.data("mask");i&&"function"==typeof i.destroy&&i.destroy()}else e.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]});var a=this.element.children(".trigger");this.container&&this.container.length&&(a=this.container.children(".trigger")),a&&a.length&&a.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),t&&this.setColor(t),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.is(":disabled")&&this.container&&this.container.closest(".field").addClass("is-disabled"),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria(),_.addAttributes(this.element,this,this.settings.attributes,"colorpicker"),_.addAttributes(this.element.parent().find(".trigger"),this,this.settings.attributes,"trigger")},getHexFromLabel:function(e){for(var t=0;t<this.settings.colors.length;t++){var n=this.settings.colors[t],i=P.translate(n.label,!0);if(e===n.label+n.number||e===i+n.number){var a=n.value;return"#"!==a.substr(0,1)&&(a="#".concat(a)),a}}return""},getLabelFromHex:function(e){if(!e)return"";for(var t=0;t<this.settings.colors.length;t++){var n=this.settings.colors[t];if(e.replace("#","")===n.value.replace("#",""))return this.translateColorLabel(n.label)+n.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var e,t=parseInt(this.element[0].style.width,10);this.container.css({width:t}),this.element.css({width:t-4-(null===(e=this.swatch)||void 0===e||null==e?void 0:e.width())})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(P.translate("UseArrow"),"</span>"))},toggleList:function(){var e=this,t=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||t.length&&this.isPickerOpen)){t=this.updateColorMenu();var n=_.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:P.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(n).on("open.colorpicker",function(){e.element.parent().addClass("is-open"),e.isPickerOpen=!0}).on("close.colorpicker",function(){[].slice.call(e.menu[0].querySelectorAll("a")).forEach(function(i){var a=$(i).data("tooltip");a&&a.hide()}),t.on("destroy.colorpicker",function(){e.element.off("open.colorpicker selected.colorpicker close.colorpicker"),e.menu.off("destroy.colorpicker").remove()}),e.element.parent().removeClass("is-open"),e.isPickerOpen=!1,e.element.trigger("listclosed","select")}).on("selected.colorpicker",function(i,a){e.element.is(".colorpicker-editor-button")||(e.itemLabel=a.data("label")),e.isEditor||e.setColor(a.data("value"),e.itemLabel);var s=!1;if(e.element.is(".colorpicker-editor-button")){var o=e.element.data("toolbaritem")||e.element.data("toolbarflexitem"),c=o?o.toolbarAPI:null;c&&c.overflowedItems.forEach(function(d){"colorpicker"===d.type&&(s=!0)})}s||e.element.focus(),e.element.trigger("change")}),this.menu=$("#colorpicker-menu"),setTimeout(function(){e.menu.find(".is-selected").focus()},1)}},setColor:function(e,t){var n=this.settings,i=e=e||"",a=t;"#"!==e.toString().substr(0,1)&&""!==e&&(i="#".concat(i));var s=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(i);if(n.showLabel&&t===n.clearableText)this.setValueOnField({hex:i,label:n.clearableText,isEmpty:!0});else{if(!s){if(!n.showLabel)return void this.setValueOnField({hex:i="#"!==i?i:"",invalid:!0});a=e.replace("#",""),i=this.getHexFromLabel(a)}a||(a=this.getLabelFromHex(i)),this.setValueOnField({hex:i,label:a})}},setValueOnField:function(e){var t=this.settings,n=this.isEditor?"data-value":"value",i="";e.isEmpty||"string"!=typeof e.hex||(i=t.uppercase?e.hex.toUpperCase():e.hex.toLowerCase()),this.swatch&&(e.isEmpty||e.invalid?(this.swatch.addClass(e.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=i)),this.element[0].value=t.showLabel?e.label:i,this.element[0].setAttribute(n,i),this.element[0].setAttribute("aria-describedby",e.label||"")},translateColorLabel:function(e){return e?"string"==typeof P.translate(e,!0)?P.translate(e,!0):e:""},getThemeMode:function(e){var t=Object.keys(pi.themes).filter(function(i){return e.indexOf(i)>-1}),n="light";return t.length>0&&(n=t[0]),n},getThemeVariant:function(e){return this.getThemeMode(e)},updateColorMenu:function(){var e=this,t=this.settings,n=!!$("#colorpicker-menu").length,i=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),a=Ci.currentTheme,s=this.getThemeMode(a),o="all"===t.themes[s].border,c=t.themes[s].checkmark,d="";$("#colorpicker-menu").remove();for(var p=function(S,M){var L=$("<li></li>"),z=$('<a href="#"><span class="swatch"></span></a>').appendTo(L),V=(e.translateColorLabel(t.colors[S].label)||t.colors[S].label)+(t.colors[S].number||""),N=parseInt(t.colors[S].number,10),U=new RegExp("\\b".concat(a,"\\b")),G=t.colors[S].value,Z=!1,oe=e.isEditor?e.element.attr("data-value"):e.element.val();t.showLabel&&!e.isEditor&&(oe=e.getHexFromLabel(oe)),(o||U.test(t.colors[S].border))&&(Z=!0),oe&&"".concat(oe).toLowerCase().replace("#","")==="".concat(G).toLowerCase()&&(c&&$.each(c,function(re,J){N>=J[0]&&N<=J[1]&&(d=" checkmark-".concat(re))}),V!==e.itemLabel&&void 0!==e.itemLabel||z.addClass("is-selected".concat(d))),G=t.uppercase?G.toUpperCase():G.toLowerCase();var le=z.find(".swatch");le[0]&&(le[0].style.backgroundColor="#".concat(G)),null==le||null==le||le.addClass(Z?"is-border":""),z[0].setAttribute("data-label",V),z[0].setAttribute("data-value",G),z[0].setAttribute("title","".concat(V," #").concat(G)),z.tooltip(),_.addAttributes(z,e,e.settings.attributes,V),n||i.append(L)},f=0,m=t.colors.length;f<m;f++)p(f);if(!n){if(t.clearable){var b=$("<li></li>"),C="foreColor"===this.element.attr("data-action")?"000000":"",T=$('<a href="#" title="'.concat(t.clearableText,'"><span class="swatch is-empty').concat(o?" is-border":"",'"></span></a>')).appendTo(b);T.data("label",t.clearableText).data("value",C).tooltip(),_.addAttributes(T,this,this.settings.attributes,"clear"),i.append(b)}$("body").append(i)}return i},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(e){return"number"!=typeof e?e:"rgb(".concat(255&e,", ").concat((65280&e)>>8,", ").concat((16711680&e)>>16,")")},rgb2hex:function(e){if(!e||-1===e.search("rgb"))return e;if("rgba(0, 0, 0, 0)"===e)return"transparent";var t=function(i){return"0".concat(parseInt(i,10).toString(16)).slice(-2)},n=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(t(n[1])).concat(t(n[2])).concat(t(n[3]))},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var e=this.element.data("mask");if(e&&e.destroy(),this.icon&&this.icon.length){var t=this.icon.parent(".trigger");this.icon.off().remove(),t.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function(){var e,t,n,i,a,s,o=this,c=this.element,d=c.parent();null===(e=(t=this.icon).parent)||void 0===e||null===(n=null==(i=e.call)?void 0:i.call(e,t))||void 0===n||null==n||n.on("click.colorpicker",function(){return o.toggleList()}),null===(a=this.swatch)||void 0===a||null==a||a.on("click.colorpicker",function(){return o.toggleList()}),c.on("focus.colorpicker",function(){s=c.val(),d.addClass("is-focused")}).on("blur.colorpicker",function(){d.removeClass("is-focused"),o.isIeEdge&&!c.is(".is-open")&&s!==c.val()&&c.triggerHandler("change")}).on("openlist.colorpicker",function(){o.toggleList()});var p="blur.colorpicker paste.colorpicker change.colorpicker";c.on(p+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",function(){var f=o.isEditor?c.attr("data-value"):c.val();o.settings.showLabel?o.setColor(c.attr("value"),f):o.setColor(f)}),c.on("keydown.colorpicker",function(f){38!==f.keyCode&&40!==f.keyCode||o.toggleList(),13===f.keyCode&&o.setColor(c.val())})}},$.fn.colorpicker=function(e){return this.each(function(){var t=$.data(this,"colorpicker");t?t.updated(e):t=$.data(this,"colorpicker",new za(this,e))})};var fi=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(e){return!$(e).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(e){if("A"!==e.nodeName)throw new Error("Unspecified error occured");return $(e).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],En={button:"button",actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},Li={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1,attributes:null};function gi(e,t){this.element=e,this.settings=_.mergeSettings(this.element,t,Li),this.init()}gi.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(e){var t=!1;if(fi.forEach(function(n){$(e).is(n.selector)&&("function"!=typeof n.filter||n.filter(e))&&(t=n.type)}),!t)throw new Error("Element ".concat(e," is not a valid Toolbar Item Type."));return t}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&!0!==this.overflowed&&this.visible)},get focused(){return 0===this.element.tabIndex},set focused(e){this.element.tabIndex=e?0:-1},get selected(){return this.trueSelected},set selected(e){if(e)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var e=$(this.element),t=En[this.type];if(t)return e.data(t)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var e=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&e.push(this.selectedAnchor),$(this.element).trigger("selected",e,e[1])}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(e){var t="searchfield"===this.type||"toolbarsearchfield"===this.type;if(e)return t&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");t&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(e){if(e)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(e){if(this.hasReadOnly)return e?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var e=Ie.rtl,t=this.element.getBoundingClientRect(),n=this.section.getBoundingClientRect();return e?t.left<n.left:t.right>n.right},set hasNoOverflowedItems(e){if("actionbutton"===this.type&&this.componentAPI){var t=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(e&&t)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},get index(){return this.toolbarAPI.items.indexOf(this)},handleEvents:function(){var e=this,t=this,n=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&n.on("selected.".concat("toolbarflexitem"),function(i,a){if(!e.selectedAnchor){if(i.stopPropagation(),"actionbutton"===e.type){var s,o=$(a).parent(),c=o.data("originalButton"),d=$(c).data("toolbarflexitem");if(o.parents("ul").length>1&&(s=o.data("original-menu-element"),c=o.parents("li").last().data("originalButton"),d=$(c).data("toolbarflexitem")),d)return s?(i.preventDefault(),d.selectedAnchor=$(s).children("a")):d.selectedAnchor=a,void(d.selected=!0)}t.selectedAnchor=a,t.selected=!0}}),"actionbutton"===this.type&&(n.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||n.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(e){e.target&&e.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){var e,t=this;this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly),Array.isArray(this.settings.attributes)&&(this.settings.componentSettings||(this.settings.componentSettings={}),this.settings.componentSettings.attributes?(e=[],this.settings.attributes.forEach(function(s){var o=t.settings.componentSettings.attributes.find(function(c){return c.name===s.name});e.push(o||{name:s.name,value:"".concat(s.value,"-").concat(t.type,"-").concat(t.index)})})):e=this.settings.attributes.map(function(s){return{name:s.name,value:"".concat(s.value,"-").concat(t.type,"-").concat(t.index)}}),this.settings.componentSettings.attributes=e);var n,i=$(this.element),a=En[this.type];a&&((n=i.data(a))?n.updated(this.settings.componentSettings):i[a](this.settings.componentSettings)),"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var e=this.componentAPI;if(e&&this.toolbarAPI){var t=e.menu;t&&t.length||(t=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var n=this.toolbarAPI.toPopupmenuData();!function a(s,o){s.menuId&&delete s.menuId;var c=o?"submenu":"menu";Array.isArray(s[c])&&s[c].forEach(function(d){a(d,!0)})}(n);var i=$(e.renderItem(n));this.predefinedItems=i,this.linkToolbarItems(n),t.prepend(this.predefinedItems),e.updated({menu:t,predefined:i}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var e=this.componentAPI;if(e&&this.toolbarAPI&&!e.isOpen){e.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var t=!0;this.toolbarAPI.items.forEach(function(i){if(i.actionButtonLink){var a=i.toPopupmenuData();a.overflowed=i.overflowed,a.id&&delete a.id,e.refreshMenuItem(i.actionButtonLink,a,n)}}),this.hasNoOverflowedItems=t}}function n(i,a){if(!a.isSubmenuItem){if(!0===a.overflowed)return i.classList.add("is-overflowed"),a.visible&&i.classList.remove("hidden"),void(t=!1);i.classList.remove("is-overflowed"),i.classList.add("hidden")}}},unlinkToolbarItems:function(){function e(t){var n=$($(t).data("original-menu-element"));if(n.removeData("action-button-link"),$(t).removeData("original-menu-element"),n.hasClass("submenu"))for(var i=t.querySelector(".popupmenu").children,a=0;a<i.length;a++)e(i[a])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each(function(t,n){var i=$(n).data("originalButton"),a=$(i).data("toolbarflexitem");if(a&&(a.actionButtonLink=null,$(n).removeData("original-button"),"menubutton"===a.type))for(var s=n.querySelector(".popupmenu").children,o=0;o<s.length;o++)e(s[o])})},linkToolbarItems:function(e){function t(n,i){var a=n.elementLink;$(a).data("action-button-link",i),$(i).data("original-menu-element",a);var s=n.submenu;if(s&&s.length)for(var o=i.querySelector(".popupmenu").children,c=0;c<o.length;c++)t(s[c],o[c])}"actionbutton"===this.type&&e&&(Array.isArray(e)||(e=e.menu),this.predefinedItems.each(function(n,i){var a=e[n].itemLink;a.actionButtonLink=i,$(i).data("original-button",a.element);var s=e[n].submenu;if(s&&s.length)for(var o=i.querySelector(".popupmenu").children,c=0;c<o.length;c++)t(s[c],o[c])}))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var e={itemLink:this,disabled:this.disabled,visible:this.visible},t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),"menubutton"===this.type){var n=this.componentAPI.menu;if(n.length){var i=this.componentAPI.toData({noMenuWrap:!0}),a=this.componentAPI.element[0].id;a&&(e.id="".concat(this.toolbarAPI.uniqueId,"-").concat(a)),e.submenu=function s(o,c){var d=o.querySelectorAll(":scope > li:not(.heading)");return c.forEach(function(p,f){if(p.elementLink=d[f],p.submenu){var m=d[f].querySelector(".popupmenu");p.submenu=s(m,p.submenu)}}),c}(n[0],i)}else e.submenu=[]}return e}},toData:function(){var e={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(e.readOnly=this.readOnly),this.actionButtonLink&&(e.actionButtonLink=this.actionButtonLink),this.componentAPI&&(e.componentAPI=this.componentAPI);var t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),"actionbutton"===this.type&&(e.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(e.submenu=this.componentAPI.toData({noMenuWrap:!0})),e},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered},destroy:function(){var e=$(this.element).data("popupmenu");e&&e.destroy&&e.destroy();var t=$(this.element).data("searchfield");t&&t.destroy&&t.destroy(),this.teardown()}},$.fn.toolbarflexitem=function(e){return this.each(function(){var t=$.data(this,"toolbarflexitem");if(t)t.updated(e);else{var n=(t=$.data(this,"toolbarflexitem",new gi(this,e))).destroy;t.destroy=function(){"function"==typeof n&&n.call(this),this.element&&$.removeData(this.element,"toolbarflexitem"),this.element=void 0}}})};var ma={allowTabs:!1,attributes:null,beforeMoreMenuOpen:null,moreMenuSettings:{}};function qt(e,t){this.element=e,this.settings=_.mergeSettings(this.element,t,ma),this.init()}qt.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var e=this;this.uniqueId=_.uniqueId(this.element),this.items=this.getElements().map(function(t){var n={};return $(t).hasClass("btn-actions")&&(n=e.settings.moreMenuSettings||n,e.settings.beforeMoreMenuOpen&&(n.beforeOpen=e.settings.beforeMoreMenuOpen)),$(t).toolbarflexitem({toolbarAPI:e,componentSettings:n,allowTabs:e.settings.allowTabs,attributes:e.settings.attributes}),$(t).data("toolbarflexitem")}),this.items&&(this.sections=_.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.sections.forEach(function(t){t.classList.contains("buttonset")&&$(t).buttonset({detectHTMLButtons:!0})}),this.settings.allowTabs||(this.items.forEach(function(t){t.focused&&(void 0===e.focusedItem?e.focusedItem=t:t.focused=!1)}),this.focusedItem||(this.focusedItem=this.items[0]),this.focusedItem&&(this.focusedItem.focused=!0)),this.render(),this.handleEvents())},render:function(){this.element.setAttribute("role","toolbar"),Array.isArray(this.settings.attributes)&&_.addAttributes($(this.element),this,this.settings.attributes),this.items.forEach(function(e){e.render()})},handleEvents:function(){var e=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a]}),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),function(t,n){t.stopPropagation(),e.navigate(n,null,!0)})},handleKeydown:function(e){$(e.target).data("toolbarflexitem")&&this.handleItemKeydown(e)},handleItemKeydown:function(e){var t=P.isRTL(),n=e.key,i=this.getItemFromElement(e.target);function a(){e.preventDefault()}if("Enter"!==n)if(" "!==n){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(n)>-1)return"searchfield"!==i.type||"ArrowLeft"!==n&&"Left"!==n?(this.navigate(t?1:-1,void 0,!0),void a()):void 0;if(["ArrowRight","Right","ArrowDown","Down"].indexOf(n)>-1){if("searchfield"===i.type&&("ArrowRight"===n||"Right"===n))return;this.navigate(t?-1:1,void 0,!0),a()}}else"hyperlink"===i.type&&this.select(e.target);else this.clickByEnterKey=!0},handleKeyup:function(e){this.clearClickByEnter(e)},handleClick:function(e){$(e.target).data("toolbarflexitem")&&this.handleItemClick(e),this.clearClickByEnter()},handleItemClick:function(e){var t=this.getItemFromElement(e.target);this.select(t),this.focusedItem=t},clearClickByEnter:function(e){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||e.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var e=[],t=[];return fi.forEach(function(n){t.push(n.selector)}),t=t.join(", "),_.getArrayFromList(this.element.querySelectorAll(t)).forEach(function(n){var i=!1;fi.forEach(function(a){!i&&$(n).is(a.selector)&&("function"!=typeof a.filter||a.filter(n))&&(i=!0,e.push(n))})}),e},getItemFromElement:function(e){if(e instanceof gi||e.isToolbarFlexItem)return e;for(var t,n=0;n<this.items.length;n++)this.items[n].element.innerHTML===e.innerHTML&&(t=this.items[n]);if(!t)throw new Error("No Toolbar Item instance available for element ".concat(e,"."));return t},get buttonsets(){return this.sections.filter(function(e){return e.classList.contains("buttonset")})},get buttonsetAPIs(){return this.buttonsets.map(function(e){return $(e).data("buttonset")})},get searchfieldAPI(){for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type)return this.items[e].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var e=0;e<this.items.length;e++)if(!0===this.items[e].focused)return this.items[e]},set focusedItem(e){if(0!==this.items.length){for(var t=0;t<this.items.length;t++)this.items[t].focused=!!this.items[t].settings.allowTabs;e.focused=!0,this.trueFocusedItem=e}},get hasFocusableItems(){for(var e=0;e<this.items.length;e++)if(!0===this.items[e].focusable)return!0;return!1},get canManageFocus(){var e=document.activeElement;if(this.element.contains(e))return!0;for(var t=0;t<this.items.length;t++)if("searchfield"===this.items[t].type&&this.items[t].componentAPI.isFocused)return!0;return"BODY"===e.tagName},get overflowedItems(){for(var e=[],t=0;t<this.items.length;t++)!0===this.items[t].overflowed&&e.push(this.items[t]);return e},navigate:function(e,t,n){if(!1!==this.hasFocusableItems){var i=0+e;for(null==t&&(t=this.items.indexOf(this.focusedItem));0!==e;)e>0&&(t===this.items.length-1?t=0:t++,--e),e<0&&(0===t?t=this.items.length-1:--t,e++);var a=this.items[t];!1!==a.focusable?(this.focusedItem=a,n&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(i>0?1:-1,t,n)}},select:function(e){var t=this.getItemFromElement(e);switch(t.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;t.selected=!0;break;default:t.selected=!0}},toPopupmenuData:function(){var e={noMenuWrap:!0};return e.menu=this.items.filter(function(t){return"actionbutton"!==t.type&&"searchfield"!==t.type}).map(function(t){return(i=t.toPopupmenuData())&&(i.icon&&(e.hasIcons=!0),i.selectable&&(e.selectable=i.selectable)),i;var i}),e},toData:function(){var e={};return e.items=this.items.map(function(t){return t.toData()}),e},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,!0!==e?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(e){if(!e)return!1;var t;if(e instanceof HTMLElement||e instanceof $){if(!(t=$(e).data("toolbarflexitem")))return!1;e=t}return!(this.items.indexOf(e)<0)&&e.overflowed},updated:function(e){"object"===Ge(e)&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e,t,n;this.settings.allowTabs||(null===(e=this.element)||void 0===e||null==e||e.removeEventListener("keydown",this.keydownListener),null===(t=this.element)||void 0===t||null==t||t.removeEventListener("keyup",this.keyupListener),null===(n=this.element)||void 0===n||null==n||n.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach(function(i){i.teardown()}),delete this.items,delete this.sections,delete this.trueFocusedItem},destroy:function(){this.items.forEach(function(e){e.destroy()}),this.teardown()}},$.fn.toolbarflex=function(e){return this.each(function(){var t=$.data(this,"toolbar-flex");if(t)t.updated(e);else{var n=(t=$.data(this,"toolbar-flex",new qt(this,e))).destroy;t.destroy=function(){"function"==typeof n&&n.call(this),this.element&&$.removeData(this.element,"toolbar-flex"),this.element=void 0}}})};var on={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,showNextPrevious:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1,inPage:!1,inPageTitleAsButton:!0,hitbox:!1};function wn(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,on),this.init()}wn.prototype={init:function(){this.setLocale().build().handleEvents().handleResize()},build:function(){var e=this,t=this.settings,n=function(M){return P.translate(M,{locale:e.locale.name,language:e.language})};this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false");var i={text:n("Today"),class:"today"},a=t.inPage?" is-ripple":"";t.inPage=at.toBoolean(t.inPage),t.inPageTitleAsButton=at.toBoolean(t.inPageTitleAsButton),t.inPage&&(this.element.addClass("is-inpage"),t.showToday||(a="",i.text=n("Apply"),i.class="apply is-apply hidden")),i.class+=" hyperlink".concat(a).concat(t.disableToday?" is-disabled":"");var s=t.showToday||t.inPage?'<a class="'.concat(i.class,'" href="#">').concat(i.text,"</a>"):"",o=t.hitbox?'data-options="{hitbox: true}"':"",c=t.showNextPrevious?"":" no-next-previous",d=t.showNextPrevious?'<button type="button" class="btn-icon prev" '.concat(o,'>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-caret-left"></use>\n        </svg>\n        <span>').concat(n("PreviousMonth"),'</span>\n      </button>\n      <button type="button" class="btn-icon next" ').concat(o,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-right"></use>\n          </svg>\n          <span>').concat(n("NextMonth"),"</span>\n      </button>"):"",p=t.showNextPrevious?'<button type="button" class="btn-icon prev">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-caret-left"></use>\n        </svg>\n        <span>'.concat(n("PreviousMonth"),'</span>\n      </button>\n      <button type="button" class="btn-icon next">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-right"></use>\n          </svg>\n          <span>').concat(n("NextMonth"),"</span>\n      </button>"):"";if(t.isAlternate||t.inPage){t.isAlternate&&this.element[0].classList.add("is-alternate");var f='\n        <button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n          <span class="month">november</span>\n          <span class="year">2019</span>\n          <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n          <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n        </button>',m=t.isMenuButton?f:'<span class="month">november</span><span class="year">2015</span>',b='\n        <div class="toolbar-section buttonset l-align-'.concat(this.isRTL?"left":"right").concat(c,'">\n          ').concat(s,"\n          ").concat(p,"\n        </div>"),C="";if(t.inPage){var T='\n          <button type="button" class="btn btn-cal-month-year" id="btn-cal-month-year">\n            '.concat($.createIcon("calendar"),'\n            <span class="month">november</span>\n            <span class="year">2019</span>\n          </button>'),S='\n          <button class="btn-icon btn-inpage-cal" type="button" id="btn-inpage-cal">\n            <span class="audible"></span>\n            '.concat($.createIcon("calendar"),"\n          </button>");C=t.inPageTitleAsButton?t.isMenuButton?"".concat(S," ").concat(f):T:"".concat(S,' <span class="month">november</span><span class="year">2015</span>')}this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(t.inPage?C:m,"\n        </div>\n        ").concat(b)}else this.element[0].innerHTML='\n        <div class="toolbar-section'.concat(c,'">\n          ').concat(d,'\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(n("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(n("Today"),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(s,'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(t.showViewChanger?'<label for="'.concat(t.viewChangerValue,'-calendar-view-changer" class="label audible">').concat(n("ChangeView"),'</label>\n            <select id="').concat(t.viewChangerValue,'-calendar-view-changer" name="').concat(t.viewChangerValue,'-calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===t.viewChangerValue?" selected":"",">").concat(n("Month"),'</option>\n              <option value="week"').concat("week"===t.viewChangerValue?" selected":"",">").concat(n("Week"),'</option>\n              <option value="day" ').concat("day"===t.viewChangerValue?" selected":"",">").concat(n("Day"),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:P.calendar(this.locale.name,t.language,t.calendarName).dateFormat.year,locale:t.locale,language:t.language,onOpenCalendar:t.onOpenCalendar,isMonthPicker:t.isMonthPicker,showToday:t.showToday,hitbox:t.hitbox}),t.showViewChanger&&(this.viewChanger=this.element.find("#".concat(t.viewChangerValue,"-calendar-view-changer")).dropdown()),this.todayLink=this.element.find(".hyperlink.today, .hyperlink.is-apply"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(this.isIslamic?[t.year,t.month,1]:new Date(t.year,t.month,1)),_.addAttributes(this.element.find(".next"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-next")),_.addAttributes(this.element.find(".prev"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-prev")),_.addAttributes(this.element.find(".today"),this,t.attributes,"".concat(t.viewChangerValue,"-view-today")),_.addAttributes(this.element.find("#monthview-datepicker-field + .trigger"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker-trigger"),!0),_.addAttributes(this.element.find("#monthview-datepicker-field"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker"),!0),_.addAttributes($('.monthview-header #month-calendar-view-changer [value="month"]'),this,t.attributes,"month-view-changer-month"),_.addAttributes($('.monthview-header #month-calendar-view-changer [value="week"]'),this,t.attributes,"month-view-changer-week"),_.addAttributes($('.monthview-header #month-calendar-view-changer [value="day"]'),this,t.attributes,"month-view-changer-day"),_.addAttributes($(".monthview-header #month-calendar-view-changer"),this,t.attributes,"month-view-changer"),_.addAttributes($('.week-view-header #week-calendar-view-changer [value="month"]'),this,t.attributes,"week-view-changer-month"),_.addAttributes($('.week-view-header #week-calendar-view-changer [value="week"]'),this,t.attributes,"week-view-changer-week"),_.addAttributes($('.week-view-header #week-calendar-view-changer [value="day"]'),this,t.attributes,"week-view-changer-day"),_.addAttributes($(".week-view-header #week-calendar-view-changer"),this,t.attributes,"week-view-changer"),this},setInternalDate:function(e){P.isIslamic(this.locale.name)?(this.currentYear=e[0],this.currentMonth=e[1],this.currentDay=e[2],this.currentDateIslamic=e):(this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate(),this.currentDate=e),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=P.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var t=it.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):P.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(t);var n=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(n),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var i=P.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" "),a=i[0];3===i.length&&this.element.find("span.month").attr("data-month",this.currentMonth).text("".concat(i[1]," ").concat(i[2])),this.element.find("span.year").text("".concat(a," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=P.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var e=this;return this.settings.language?(P.getLocale(this.settings.language),this.language=this.settings.language):this.language=P.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=P.currentLocale,this.setCurrentCalendar()):P.getLocale(this.settings.locale).done(function(t){e.locale=P.cultures[t],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar()}),this},setViewChangerValue:function(e){this.settings.viewChangerValue=e,this.viewChanger.val(e).trigger("updated")},handleEvents:function(){var e=this,t=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",function(){var n=$(this).data("datepicker");t.setInternalDate(n.isIslamic?n.currentDateIslamic:n.currentDate),t.element.trigger("change-date",{selectedDate:n.currentDate,isToday:!1})}),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",function(n){var i={selectedDate:e.currentDate,isToday:!0};!n.target.classList.contains("today")&&n.target.classList.contains("apply")&&(i.isToday=!1,i.isApply=!0),e.element.trigger("change-date",i),n.preventDefault()}),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-prev",{selectedDate:e.currentDate,isToday:!1})}),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-next",{selectedDate:e.currentDate,isToday:!1})}),this.settings.onChangeView&&this.viewChanger&&this.viewChanger.off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",function(n){e.settings.onChangeView({viewName:n.currentTarget.value,elem:n.currentTarget,api:e})}),this},resize:function(){if(this.viewChanger&&(it.isBelow("phablet")?(this.viewChanger.next().addClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").css({width:"".concat(it.isBelow("phone")?"60":"90","px")}),$(".today").css(it.isBelow("slim")?{display:"none"}:{})):(this.viewChanger.next().removeClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").removeAttr("style"),$(".today").removeAttr("style"))),this.monthPicker){var e=it.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):P.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(e)}},handleResize:function(){return this.resize(),$(window).on("resize",this.resize),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,on)),this.teardown().init()},teardown:function(){return $(window).off("resize",this.resize),this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"calendartoolbar")}};var Pi=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],Yn={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,inPage:!1,inPageTitleAsButton:!0,inPageToggleable:!0,inPageExpanded:!0,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[],hideDays:!1,showMonthYearPicker:!0,yearsAhead:3,yearsBack:2,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},displayRange:{start:"",end:"",months:{showAbbr:!1}},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,showNextPrevious:!0,onChangeView:null,isMonthPicker:!1,hitbox:!1};function mi(e,t){this.settings=_.mergeSettings(e,t,Yn),this.settings.legend&&0===this.settings.legend.length&&(this.settings.legend=Pi),this.element=$(e),this.init()}mi.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=P.getLocale(this.settings.language),n=P.getLocale(this.settings.locale);$.when(n,t).done(function(i,a){e.locale=P.cultures[i]||P.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.settings.displayRange.start&&e.settings.displayRange.end?e.buildRange():e.build()})},build:function(){var e=this;if("false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.settings.inPage=at.toBoolean(this.settings.inPage),this.settings.inPage){var t="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(t),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(P.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(P.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(P.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var n="";this.settings.inPage&&this.settings.inPageToggleable&&(n=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var i=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?n:this.table;this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(P.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,i),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend();var a=new Date,s={onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton,hitbox:this.settings.hitbox};return"function"==typeof this.settings.disable.callback?$.when(this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate())).then(function(o){s.disableToday=o}):s.disableToday=this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate()),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new wn(this.calendarToolbarEl[0],s),this.handleEvents(),_.addAttributes(this.element,this,this.settings.attributes),this},buildRange:function(){var e=this,t=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end),i=Ft.isDaylightSavingTime(t)&&!Ft.isDaylightSavingTime(n)?n:new Date(n.getTime()+864e5),a=Ft.firstDayOfWeek(t,this.settings.firstDayOfWeek,!0),s=Math.ceil((i-a)/6048e5);if(this.settings.showMonthYearPicker=!1,this.settings.inPage=at.toBoolean(this.settings.inPage),this.settings.inPage){var o="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(o),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.table=$('<table class="monthview-table" aria-label="'.concat(P.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.day="\n    <tr>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n    </tr>\n    ",this.days=$(""+"<tbody>\n       ".concat(Array(s).fill(this.day).join(""),"\n      </tbody>")).appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var c="";this.settings.inPage&&this.settings.inPageToggleable&&(c=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var d=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?c:this.table;return this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),this.header.addClass("hidden"),this.showRange(this.settings.displayRange.start,this.settings.displayRange.end),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,d),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new wn(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton}),this.handleEvents(),_.addAttributes(this.element,this,this.settings.attributes),this},setCurrentCalendar:function(){this.currentCalendar=P.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},setMonthYearFromPane:function(){var e=parseInt(this.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),t=parseInt(this.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);isNaN(t)||isNaN(e)||this.showMonth(t,e),this.monthYearPane.data("expandablearea").close()},loadLegend:function(e){if(!(void 0===e||e.length<1)){this.settings.legend=e,this.addLegend();var t=this,n=this.currentMonth,i=this.currentYear;this.days.find("td").removeClass("is-colored"),e.forEach(function(a){if(a.dates&&a.dates.forEach(function(d){var p=new Date(d),f=p.getMonth(),m=p.getDate(),b=p.getFullYear(),C=t.days.find("td[data-key=".concat(at.padDate(b,f,m),"]"));C.length&&t.setLegendColor(C,b,f,m)}),a.dayOfWeek){var s=new Date(i,n+1,0),o=s.getDate(),c=s.getDay();a.dayOfWeek.forEach(function(d){var p;c===d?(p=t.days.find("td[data-key=".concat(at.padDate(i,n,o),"]")),t.setLegendColor(p,i,n,o)):c>d&&(p=t.days.find("td[data-key=".concat(at.padDate(i,n,o-(c-d)),"]")),t.setLegendColor(p,i,n,o-(c-d)));for(var f=o-(c+1);f-(6-d)>0;f-=7)p=t.days.find("td[data-key=".concat(at.padDate(i,n,f-(6-d)),"]")),t.setLegendColor(p,i,n,f-(6-d))})}})}},showMonth:function(e,t){var n=this;this.element.trigger("beforemonthrendered");var i,a=this,s=this.settings,o=new Date;if(o.setHours(0),o.setMinutes(0),o.setSeconds(0),i=this.isIslamic?s.activeDate||P.gregorianToUmalqura(o):s.activeDate&&s.activeDate.getDate()?s.activeDate:o,this.setCurrentCalendar(),this.isIslamic)if(s.activeDateIslamic)i=s.activeDateIslamic;else{var c=new Date(t,e,this.currentDay||this.settings.day),d=P.gregorianToUmalqura(c);this.todayDateIslamic=P.gregorianToUmalqura(o),s.activeDateIslamic=[],s.activeDateIslamic[0]=d[0],s.activeDateIslamic[1]=d[1],s.activeDateIslamic[2]=d[2],t=d[0],e=d[1],i=d,this.currentDay=d[2]}t.toString().length<4&&(t=(new Date).getFullYear()),12===e&&(t++,this.currentMonth=e=0,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),e<0&&(t--,this.currentMonth=e=11,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=P.calendar(this.locale.name,this.language,this.settings.calendarName));var p=this.currentCalendar.days.narrow;p=p||this.currentCalendar.days.abbreviated,s.isPopup||s.inPage||(p=this.currentCalendar.days.abbreviated);var f=this.currentCalendar.months.wide[e];this.currentMonth=e,this.currentYear=t;var m=this.currentCalendar.firstDayofWeek||0;if(s.firstDayOfWeek&&(m=s.firstDayOfWeek),this.dayNames.find("th").each(function(le){$(this).text(p[(le+m)%7])}),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",e).text("".concat($e.stripTags(f)," ")),this.header.find(".year").text(" ".concat(t)),this.yearFirst&&!this.isIslamic&&!this.isRTL){i.setFullYear(t);var b=P.formatDate(i,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(b," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===s.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,e,1]:new Date(t,e,1)),this.appendMonthYearPicker(e,t);var C,T,S,M=(this.firstDayOfMonth(t,e)-m+7)%7,L=this.daysInMonth(t,e+(this.isIslamic?1:0)),z=this.daysInMonth(t,e+(this.isIslamic?0:1)),V=1,N=1,U=!1,G=function(le,re){U=re,le.addClass("is-selected".concat(s.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each(function(le){var re=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),J=s.inPage?" is-ripple":"";if(re.removeAttr("aria-selected"),re.removeAttr("tabindex"),le<M&&(a.setDisabled(re,C=0===e?t-1:t,T=0===e?11:e-1,S=L-M+1+le),a.setLegendColor(re,C,T,S),a.dayMap.push({key:at.padDate(C,T,S),elem:re}),re.addClass("alternate prev-month").html('<span class="day-container'.concat(J,'"><span aria-hidden="true" class="day-text">').concat($e.stripTags(S),"</span></span>")),re.attr("data-key",at.padDate(C,T,S))),le>=M&&N<=z){if(a.dayMap.push({key:at.padDate(t,e,N),elem:re}),re.html('<span class="day-container'.concat(J,'"><span aria-hidden="true" class="day-text">').concat($e.stripTags(N),"</span></span>")),re.attr("data-key",at.padDate(t,e,N)),a.isIslamic)N===i[2]&&G(re,!0);else{var ce=i.getHours(),ke=i.getMinutes(),_e=a.isSeconds?i.getSeconds():0,Oe=function(nt){return nt?nt.setHours(ce,ke,_e,0):0};Oe(new Date(t,e,N))===Oe(a.currentDate||i)&&G(re,!0)}N===a.todayDay&&a.currentMonth===a.todayMonth&&a.currentYear===a.todayYear&&re.addClass("is-today"),re.attr("aria-label",P.formatDate(new Date(a.currentYear,a.currentMonth,N),{date:"full",locale:a.locale.name}));var Qe=at.padDate(a.currentYear,a.currentMonth,N);return re.attr("data-key",Qe),a.setDisabled(re,t,e,N),a.setLegendColor(re,t,e,N),re.attr("role","link"),void N++}N>=z+1&&(a.dayMap.push({key:at.padDate(C=11===e?t+1:t,T=11===e?0:e+1,S=V),elem:re}),a.setDisabled(re,C,T,S),a.setLegendColor(re,C,T,S),re.addClass("alternate next-month").html('<span class="day-container'.concat(J,'"><span aria-hidden="true" class="day-text">').concat(V,"</span></span>")),re.attr("data-key",at.padDate(C,T,S)),V++)}),!U&&!s.range.useRange){var Z=a.dayMap.filter(function(le){return le.key===at.padDate(t,e,n.settings.day)});Z.length&&G(Z[0].elem,!1)}var oe=this.days.find("tr").eq(5);7===oe.find("td.alternate").length?oe.hide():oe.show(),this.currentDate||(this.isIslamic?(this.currentDateIslamic=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=P.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),s.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:t,month:e,elem:this.element,api:this}),this.element.trigger("aftermonthrendered")},showRange:function(e,t){var n,i=this,a=new Date,s=new Date(e),o=new Date(t),c=parseInt(s.getMonth(),10),d=parseInt(s.getFullYear(),10),p=Ft.monthDiff(s,o),f=this.settings;if(f.disable.minDate||f.disable.MaxDate||(f.disable.minDate=Ft.subtract(s,1,"days").toISOString(),f.disable.maxDate=Ft.add(o,1,"days").toISOString()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),n=this.isIslamic?f.activeDate||P.gregorianToUmalqura(a):f.activeDate&&f.activeDate.getDate()?f.activeDate:a,this.setCurrentCalendar(),this.isIslamic)if(f.activeDateIslamic)n=f.activeDateIslamic;else{var m=new Date(d,c,this.currentDay||this.settings.day),b=P.gregorianToUmalqura(m);this.todayDateIslamic=P.gregorianToUmalqura(a),f.activeDateIslamic=[],f.activeDateIslamic[0]=b[0],f.activeDateIslamic[1]=b[1],f.activeDateIslamic[2]=b[2],d=b[0],c=b[1],n=b,this.currentDay=b[2]}d.toString().length<4&&(d=(new Date).getFullYear()),this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=P.calendar(this.locale.name,this.language,this.settings.calendarName));var C=this.currentCalendar.days.narrow;C=C||this.currentCalendar.days.abbreviated,f.isPopup||f.inPage||(C=this.currentCalendar.days.abbreviated);var T=this.currentCalendar.firstDayofWeek||0;f.firstDayOfWeek&&(T=f.firstDayOfWeek),this.dayNames.find("th").each(function(ce){$(this).text(C[(ce+T)%7])});var S=Ft.firstDayOfWeek(s,this.settings.firstDayOfWeek,!0),M=S.getDate(),L=!1,z=S.getMonth(),V=S.getFullYear(),N=z,U=V;p=Ft.monthDiff(S,o);for(var G=new Map,Z=0;Z<=p;Z++)(N=z+Z)>11&&(U+=1,N%=12),G.set(N,this.daysInMonth(U,N+(this.isIslamic?0:1)));var oe=function(ce,ke){L=ke,ce.addClass("is-selected".concat(f.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")},le=G.get(z),re=new Set(G.keys());if(this.dayMap=[],this.days.find("td").each(function(){var ce,ke=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),_e=f.inPage?" is-ripple":"";if(ke.removeAttr("aria-selected"),ke.removeAttr("tabindex"),i.isIslamic)M===n[2]&&oe(ke,!0);else{var Oe=n.getHours(),Qe=n.getMinutes(),nt=i.isSeconds?n.getSeconds():0,ot=function(Ut){return Ut?Ut.setHours(Oe,Qe,nt,0):0};ot(new Date(V,z,M))===ot(i.currentDate||n)&&oe(ke,!0)}if(M>le&&(++z>11&&(z=0,V++),le=G.get(z),M=1),M===i.todayDay&&z===i.todayMonth&&V===i.todayYear&&ke.addClass("is-today"),i.dayMap.push({key:at.padDate(V,z,M),elem:ke}),ke.html('<span class="day-container'.concat(_e,'"><span aria-hidden="true" class="day-text">').concat($e.stripTags(M),"</span></span>")),ke.attr("data-key",at.padDate(V,z,M)),i.isIslamic)M===n[2]&&oe(ke,!0);else{var Ze=n.getHours(),ft=n.getMinutes(),Wt=i.isSeconds?n.getSeconds():0,xt=function(Ut){return Ut?Ut.setHours(Ze,ft,Wt,0):0};xt(new Date(U,N,M))===xt(i.currentDate||n)&&oe(ke,!0)}M===i.todayDay&&z===i.todayMonth&&V===i.todayYear&&ke.addClass("is-today"),ke.attr("aria-label",P.formatDate(new Date(V,z,M),{date:"full",locale:i.locale.name}));var jt=at.padDate(V,z,M);ke.attr("data-key",jt),i.setDisabled(ke,V,z,M),i.setLegendColor(ke,V,z,M),i.setMonthLabel(ke,V,z,M,re,null===(ce=f.displayRange.months)||void 0===ce||null==ce?void 0:ce.showAbbr),ke.attr("role","link"),M++}),!L){var J=i.dayMap.filter(function(ce){return ce.key===at.padDate(a.getFullYear(),a.getMonth(),a.getDate())});J.length&&oe(J[0].elem,!1)}this.element.trigger("rangerendered",{year:d,month:c,elem:this.element,api:this})},getTime:function(e,t){if(this.isIslamic)return e[0]+"0".concat(e[1]).slice(-2)+"0".concat(e[2]).slice(-2);if(t){var n=new Date(e);return n.setHours(0,0,0),n.getTime()}return e.getTime()},setRangeSelection:function(){if(this.settings.range.useRange){var e={};e.date=new Date(this.currentYear,this.currentMonth,1),e.date.setDate(e.date.getDate()-(this.days.find(".prev-month:visible").length+1));var t=at.padDate(e.date.year||e.date[0],e.date.month||e.date[1],e.date.day||e.date[2]);e.cell=this.days.find('[data-key="'.concat(t,'"]')),this.setRangeOnCell(!this.settings.range.second&&e.cell)}},appendMonthYearPicker:function(e,t){var n=this;if(this.settings.showMonthYearPicker){var i='<ul class="picklist is-month">',a=this.settings.inPage?' class="is-ripple"':"",s=this.currentCalendar.months.wide;i+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(P.translate("PreviousMonth"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var o=e<6?0:6,c=0;c<6;c++){var d=c+o,p=s[d];i+='<li class="picklist-item'.concat(d===e?" is-selected ":"",'"><a href="#" tabindex="').concat(d===e?"0":"-1",'" data-month="').concat(d,'"').concat(a,">").concat(p,"</a></li>")}i+='<li class="picklist-item down">\n        <a tabindex="0"'.concat(a,'>\n          <span class="audible">').concat(P.translate("NextMonth"),'</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-down"></use>\n          </svg>\n        </a>\n      </li></ul>'),this.monthYearPane.find(".picklist-section.is-month").empty().append(i);var f=[],m='<ul class="picklist is-year">';m+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(P.translate("PreviousYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var b=this.settings.yearsBack;b>=1;b--)f.push(parseInt(t,10)-b);f.push(t);for(var C=1;C<=this.settings.yearsAhead;C++)f.push(parseInt(t,10)+C);f.map(function(T){m+='<li class="picklist-item'.concat(t===T?" is-selected ":"",'"><a href="#" tabindex="').concat(t===T?"0":"-1",'" data-year="').concat(T,'"').concat(a,">").concat(T,"</a></li>")}),m+='<li class="picklist-item down">\n        <a tabindex="0"'.concat(a,'>\n          <span class="audible">').concat(P.translate("NextYear"),'</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-down"></use>\n          </svg>\n        </a>\n      </li></ul>'),this.monthYearPane.find(".picklist-section.is-year").empty().append(m),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst"),_.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-year-up"),_.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-year-down"),this.settings.inPage&&(_.addAttributes(this.monthYearPane.find(".btn-inpage-cal"),this,this.settings.attributes,"btn-inpage-cal"),_.addAttributes(this.monthYearPane.find(".btn-cal-month-year"),this,this.settings.attributes,"btn-cal-month-year"),_.addAttributes(this.monthYearPane.find(".btn-monthyear-pane"),this,this.settings.attributes,"btn-monthyear"),_.addAttributes(this.monthYearPane.find(".apply"),this,this.settings.attributes,"btn-apply"),_.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-month-up"),_.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-month-down")),this.monthYearPane.find(".is-year .picklist-item").not(".up, .down").each(function(){var T=$(this).find("a");_.addAttributes(T,n,n.settings.attributes,"btn-picklist-".concat(T.text().toLowerCase()))}),this.monthYearPane.find(".is-month .picklist-item").not(".up, .down").each(function(T){_.addAttributes($(this).find("a"),n,n.settings.attributes,"btn-picklist-".concat(T))})}},firstDayOfMonth:function(e,t){if(this.isIslamic){var n=P.umalquraToGregorian(e,t,1);return null===n?1:n.getDay()}return new Date(e,t,1).getDay()},daysInMonth:function(e,t){if(this.isIslamic){for(var n=this.conversions.yearInfo[this.islamicYearIndex(e)][0],i=0;i<=t;i++){if(i===t)return 29+(1&n);n>>=1}return 0}return new Date(e,t,0).getDate()},islamicYearIndex:function(e){var t=e-1318;return t<0||t>=this.conversions.yearInfo.length?0:t},setDisabled:function(e,t,n,i){var a=this.settings;function s(){e.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(e.removeClass("is-disabled").removeAttr("aria-disabled"),"function"==typeof a.disable.callback)$.when(this.isDateDisabled(t,n,i)).then(function(c){c&&s()});else{var o=this.isDateDisabled(t,n,i);(o&&!a.disable.isEnable||!o&&a.disable.isEnable)&&s()}},setMonthLabel:function(e,t,n,i,a,s){var o=this.settings.inPage?' class="is-ripple"':"";if(a.has(n)){var c=e.text(),d=s?this.currentCalendar.months.abbreviated[n]:this.currentCalendar.months.wide[n];a.delete(n),e.html('<span class="day-container'.concat(o,'"><span aria-hidden="true" class="day-text month-label">').concat(d," ").concat(c,"</span></span>"))}},isDateDisabled:function(e,t,n){var i=this.settings;if("function"==typeof i.disable.callback){var a=$.Deferred();return $.when(i.disable.callback(e,t,n)).then(function(S){a.resolve(S)}),a.promise()}var s="string"==typeof i.disable.minDate?i.disable.minDate.replace(/-/g,"/"):i.disable.minDate,o="string"==typeof i.disable.maxDate?i.disable.maxDate.replace(/-/g,"/"):i.disable.maxDate,c=new Date(s).setHours(0,0,0,0),d=new Date(o).setHours(0,0,0,0),p=this.isIslamic?P.umalquraToGregorian(e,t,n):new Date(e,t,n);if(!p)return!1;if(-1!==i.disable.dayOfWeek.indexOf(p.getDay()))return!0;var f=p.getFullYear();if((p=p.setHours(0,0,0,0))<=c||p>=d)return!0;/string|number/.test(Ge(i.disable.years))&&(i.disable.years=[i.disable.years]);for(var m=0,b=i.disable.years.length;m<b;m++)if(f===Number(i.disable.years[m]))return!0;i.disable.dates.length&&"string"==typeof i.disable.dates&&(i.disable.dates=[i.disable.dates]);for(var C=0,T=i.disable.dates.length;C<T;C++)if(p===new Date(i.disable.dates[C]).setHours(0,0,0,0))return!0;return!1},getDateRange:function(e,t,n){var i=[],a=this.isIslamic?Un(e):new Date(e);for(n=void 0!==n?n:this.settings.range.includeDisabled;this.getTime(t)>=this.getTime(a);)(n||!n&&!this.isDateDisabled(this.isIslamic?a[0]:a.getFullYear(),this.isIslamic?a[1]:a.getMonth(),this.isIslamic?a[2]:a.getDate()))&&i.push(this.isIslamic?a:new Date(a)),this.isIslamic?a[2]+=1:a.setDate(a.getDate()+1);return i},setLegendColor:function(e,t,n,i){if(this.settings.showLegend&&e[0]){var a=this,s=this.settings.inPage?e.find(".day-text"):e;if(s[0]){var o=this.getLegendColor(t,n,i);if(s[0].style.backgroundColor="",s.off("mouseenter.legend mouseleave.legend"),o){var c;if(-1===o.indexOf("#")){var d=o.replace(/[0-9]/g,""),p=10*o.substr(o.length-2,2);o=mt.themeColors().palette[d][p].value}var f=pt.hexToRgba(o,.3),m=pt.hexToRgba(o,.7),b=null===(c=this.table[0])||void 0===c||null==c?void 0:c.querySelector("thead th");e.addClass("is-colored"),s[0].setAttribute("data-hex",o),a.settings.inPage?s[0].style.setProperty("--legendcolor",f):s[0].style.backgroundColor=f,s.on("mouseenter.legend",function(){var C=$(this),T=C.find("span")[0],S=C.find(".day-text")[0],M=window.getComputedStyle(b).getPropertyValue("color");this.style.backgroundColor=m,a.settings.inPage&&(this.style.color=M),T&&(T.style.backgroundColor="transparent"),S&&(S.style.backgroundColor="transparent")}).on("mouseleave.legend",function(){var C=$(this),T=C.find("span")[0],S=C.find(".day-text")[0];a.settings.inPage?(this.style.color="",this.style.backgroundColor=""):this.style.backgroundColor=f,T&&(T.style.backgroundColor=""),S&&(S.style.backgroundColor="")})}}}},getLegendColor:function(e,t,n){var i=this.settings;if(i.showLegend&&i.legend){for(var a=new Date(e,t,n),s=a.setHours(0,0,0,0),o=0;o<i.legend.length;o++){var c=i.legend[o];if(c.dayOfWeek&&-1!==c.dayOfWeek.indexOf(a.getDay()))return c.color;if(c.dates)for(var d=0;d<c.dates.length;d++)if(s===new Date(c.dates[d]).setHours(0,0,0,0))return c.color}return""}},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),function(){e.updated()}),this.header.off("click.monthview").on("click.monthview",".btn-icon.prev, .btn-icon.next",function(){var o=$(this).is(".next"),c={},d={month:t.currentMonth,year:t.currentYear};n.range.useRange?(o?c.date=new Date(d.year,d.month+1,t.element.find(".next-month:visible").length+1):(c.date=new Date(d.year,d.month,1),c.date.setDate(c.date.getDate()-(t.days.find(".prev-month:visible").length+1))),d.month+=o?1:-1):(t.currentMonth+=o?1:-1,t.currentDate.setMonth(t.currentMonth),t.currentYear=parseInt(t.element[0].querySelector("span.year").innerText,10),t.currentDate.setFullYear(t.currentYear),d.month=t.currentMonth,d.year=t.currentYear),t.showMonth(d.month,d.year),n.range.useRange&&(c.formatedDate=P.formatDate(c.date,{date:"full",locale:t.locale.name}),c.cell=t.days.find('[aria-label="'.concat(c.formatedDate,'"]')),t.setRangeOnCell(!n.range.second&&c.cell))}),n.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",function(){n.range.extra&&t.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",function(){n.range.extra&&t.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",function(){t.setRangeOnCell(this)})),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",function(o,c){c.isToday&&e.settings.isPopup||(c.isApply?e.setMonthYearFromPane():c.isToday?e.setToday():e.selectDay(c.selectedDate,!1,!0))}),n.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",function(o){var c=o.currentTarget.getAttribute("data-key");e.lastClickedKey=c,o.currentTarget.classList.contains("is-disabled")||e.selectDay(c,!1,!0)}),n.inPage){var i=this.element.find(".monthview-inpage-calendar");i.expandablearea({animationSpeed:150,trigger:this.element.find(n.showMonthYearPicker?"#btn-inpage-cal":"#btn-cal-month-year")});var a=i.data("expandablearea");if(n.showMonthYearPicker){var s=this.element.find(".monthview-monthyear-pane");s.expandablearea({animationSpeed:150,trigger:this.element.find("#btn-monthyear-pane")}).on("beforeexpand",function(){var o=a&&!a.isExpanded();s.css("position",o?"static":"")})}this.element.off("click.monthview-ripple").on("click.monthview-ripple",".is-ripple",function(o){t.setRipple(this,o)})}return this.handleMonthYearPane().handleKeys(),this},setRipple:function(e,t){var n;if(e&&null!==(n=e.classList)&&void 0!==n&&n?.contains("is-ripple")){var i=t.touches?t.touches[0]:t,a=e.getBoundingClientRect(),s=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),o=i.clientX?i.clientX-a.left:e.offsetWidth/2,c=i.clientY?i.clientY-a.top:e.offsetHeight/2,d=e.style.cssText,p=e.getAttribute("data-hex"),f=pt.getContrastColor(p),m={ripple:pt.getLuminousColorShade(p,"white"===f?"0.3":"-0.3"),elem:pt.hexToRgba(p,.7)},b=null!==p?"--ripple-background: ".concat(m.ripple,"; background-color: ").concat(m.elem,"; "):"";e.style.cssText="".concat(b,"--s: 0; --o: 1"),e.style.cssText="".concat(b,"--t: 1; --o: 0; --d: ").concat(s,"; --x:").concat(o,"; --y:").concat(c,";"),$(e).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(C){var T;"transform"===(C.propertyName||(null===(T=C.originalEvent)||void 0===T||null==T?void 0:T.propertyName))&&(e.style.cssText=d)})}},handleMonthYearPane:function(){var e=this,t=this.settings,n=t.inPage?' class="is-ripple"':"",i=function(d){var p=e.monthYearPane[0].querySelector(".picklist.is-month"),f=e.currentCalendar.months.wide,m=p.children,b=m.length-2,C=parseInt(m["up"===d?1:b].querySelector("a").getAttribute("data-month"),10),T=$(p),S=T.find("li.is-selected"),M=S.index();S.removeClass("is-selected");var L=m[1],z=m[b],V=$('<li class="picklist-item"></li>');if("up"===d){var N=0===C?11:C-1,U='<a href="#" tabindex="-1" data-month="'.concat(N,'"').concat(n,">").concat(f[N],"</a>");V.append(U),z.remove(),V.insertBefore(L)}else{var G=11===C?0:C+1,Z='<a href="#" tabindex="-1" data-month="'.concat(G,'"').concat(n,">").concat(f[G],"</a>");V.append(Z),L.remove(),V.insertAfter(z)}t.inPage||$(T.find("li.picklist-item").get(M)).addClass("is-selected").attr("tabindex","0")},a=function(d){var p=e.monthYearPane[0].querySelector(".picklist.is-year"),f=p.children,m=f.length-2,b=parseInt(f["up"===d?1:m].querySelector("a").getAttribute("data-year"),10),C=$(p),T=C.find("li.is-selected"),S=T.index();T.removeClass("is-selected");var M=f[1],L=f[m],z=$('<li class="picklist-item"></li>');if("up"===d){var V=b-1,N=$('<a href="#" tabindex="-1" data-year="'.concat(V,'"').concat(n,">").concat(V,"</a>"));_.addAttributes(N,e,t.attributes,"btn-picklist-".concat(V)),z.append(N),L.remove(),z.insertBefore(M)}else{var U=b+1,G=$('<a href="#" tabindex="-1" data-year="'.concat(U,'"').concat(n,">").concat(U,"</a>"));_.addAttributes(G,e,t.attributes,"btn-picklist-".concat(U)),z.append(G),M.remove(),z.insertAfter(L)}t.inPage||$(C.find("li.picklist-item").get(S)).addClass("is-selected").attr("tabindex","0")},s=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",function(d){return t.inPage&&"li"===d.target.tagName.toLowerCase()||(s=setInterval(function(){return d.currentTarget.classList.contains("up")&&a("up"),d.currentTarget.classList.contains("down")&&a("down"),d.stopImmediatePropagation(),d.stopPropagation(),!1},200)),!0}).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",function(){return clearInterval(s),!0});var o=function(d,p){var f,b,T,m=function(b){var C=e.monthYearPane[0].querySelector(".is-".concat(b," .is-selected a"));return!C&&t.inPage?e.monthYearPane[0].querySelector(".is-".concat(b," .picklist-item:last-child a")):C};f=t.inPage?{month:parseInt(m("month").getAttribute("data-month"),10),year:parseInt(m("year").getAttribute("data-year"),10)}:"is-month"===p?{month:parseInt(d.getAttribute("data-month"),10),year:parseInt(m("year").getAttribute("data-year"),10)}:{month:parseInt(m("month").getAttribute("data-month"),10),year:parseInt(d.getAttribute("data-year"),10)},t.range.useRange||(e.currentMonth=f.month,e.currentDate.setMonth(e.currentMonth),e.currentYear=f.year,e.currentDate.setFullYear(e.currentYear),f.month=e.currentMonth,f.year=e.currentYear),b=d,T=e.monthYearPane[0].querySelector(".picklist.".concat(p," .is-selected")),ue.removeClass(T,"is-selected"),T&&T.querySelector("a").setAttribute("tabindex","-1"),ue.addClass(b.parentNode,"is-selected"),b.setAttribute("tabindex","0"),e.element.hasClass("".concat(p,"only"))&&e.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",function(d){t.inPage&&"li"===d.target.tagName.toLowerCase()||(d.currentTarget.classList.contains("up")?i("up"):d.currentTarget.classList.contains("down")?i("down"):(o(d.target,"is-month"),d.preventDefault()))}),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",function(d){d.preventDefault()}),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",function(d){t.inPage&&"li"===d.target.tagName.toLowerCase()||(d.currentTarget.classList.contains("up")?a("up"):d.currentTarget.classList.contains("down")?a("down"):(o(d.target,"is-year"),d.preventDefault()))}),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",function(d){d.preventDefault()}),this.monthYearPane.on("expand.monthviewpane",function(){if(!t.hideDays){if(e.element.find(".btn-icon, td.is-selected").attr("disabled","true"),e.element.find("td.is-selected").removeAttr("tabindex"),t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").hide();var d=e.element.find(".hyperlink.today, .hyperlink.apply");d.hasClass("is-apply")?d.removeClass("hidden"):d.removeClass("today is-ripple").addClass("apply").text(P.translate("Apply",{locale:e.locale.name,language:e.language}))}else e.monthYearPane.find(".content").css("height",e.header.parent().height()-e.header.height()-55),e.element.find(".hyperlink.today").hide();e.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),e.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(P.translate("Cancel",{locale:e.locale.name,language:e.language}))}setTimeout(function(){e.monthYearPane.find(".is-month .is-selected a").focus(),e.monthYearPane.parent().hasClass("is-yearonly")&&e.monthYearPane.find(".is-year .is-selected a").focus()})}).on("collapse.monthviewpane",function(){if(!t.hideDays){if(t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").show();var d=e.element.find(".hyperlink.apply");d.hasClass("is-apply")?d.addClass("hidden"):d.removeClass("apply").addClass("today").text(P.translate("Today",{locale:e.locale.name,language:e.language}))}else e.element.find(".hyperlink.today").show();e.element.find(".btn-icon").removeAttr("disabled"),e.element.find("td.is-selected").attr("tabindex","0"),e.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),e.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(P.translate("Clear",{locale:e.locale.name,language:e.language}))}}).on("aftercollapse.monthviewpane",function(){e.element.find(".hyperlink.today").addClass("is-ripple")});var c=function(d,p){var f,m=d.currentTarget,b=d.currentTarget.parentNode,C="prev"===p?b.previousSibling:b.nextSibling;C||(C=b.parentNode.children["prev"===p?b.parentNode.children.length-1:0]);var T=C.querySelector("a");m.setAttribute("tabindex","-1"),null===(f=b.parentNode.querySelector(".is-selected"))||void 0===f||null==f||f.classList.remove("is-selected"),ue.addClass(C,"is-selected"),T.setAttribute("tabindex","0"),T.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",function(d){var p=d.currentTarget.parentNode.classList.contains("up"),f=d.currentTarget.parentNode.classList.contains("down"),m=d.currentTarget.parentNode.parentNode.classList.contains("is-year"),b=d.currentTarget.parentNode.parentNode.classList.contains("is-month"),C=!1;"ArrowUp"===d.key&&(m||b)?(c(d,"prev"),C=!0):"ArrowDown"===d.key&&(m||b)?(c(d,"next"),C=!0):"Enter"===d.key&&(p||f?(m?a(p?"up":"down"):b&&i(p?"up":"down"),C=!0):(m||b)&&(o(d.target,m?"is-year":"is-month"),C=!0)),C&&(d.preventDefault(),e.setRipple(d.currentTarget,d))}),this},selectDay:function(e,t,n){this.isIslamic&&"string"!=typeof e&&(this.currentDateIslamic=P.gregorianToUmalqura(e),e=at.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||"string"==typeof e||(e=at.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var i=this.dayMap.filter(function(p){return p.key===e}),a=parseInt(e.substr(0,4),10),s=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10);if(this.isIslamic?(this.currentDateIslamic=e,this.currentDate=P.umalquraToGregorian(a,s,o)):this.currentDate=new Date(a,s,o),this.currentYear=a,this.currentMonth=s,this.currentDay=o,(0===i.length||i[0].elem.hasClass("alternate"))&&(this.showMonth(s,a),i=this.dayMap.filter(function(p){return p.key===e})),0!==!i.length){var c=i[0].elem[0],d={node:c,key:e,day:o,month:s,year:a,close:t};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(c).addClass("is-selected").attr("tabindex","0").focus(),(n="full"===this.settings.headerStyle||n)&&this.settings.onSelected&&this.settings.onSelected(c,d),n&&this.element.trigger("selected",d)}},setToday:function(){this.selectDay(new Date,!1,!0)},handleKeys:function(){var e=this,t=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",function(n){var i=n.keyCode||n.charCode||0,a=$(n.target),s=e.days.find("td:visible"),o=s.length,c=null,d=null,p=!1,f=new Date(t.disable.minDate),m=new Date(t.disable.maxDate),b=function(){e.datepickerApi&&t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&e.datepickerApi.resetRange({isData:!0})};if(e.settings.onKeyDown&&!1===e.settings.onKeyDown({e:n,key:i,cell:a,node:e.element}))return n.stopPropagation(),n.preventDefault(),!1;if(40===i){if(p=!0,!e.validateDisplayRange(Ft.add(e.currentDate,7,"days")))return!1;t.range.useRange?(c=s.index(n.target)+7,d=s.eq(c),c<o&&(b(),e.setRangeOnCell(d.is(".is-selected")?null:d),e.setRangeSelBeforeFirstSel(d),e.activeTabindex(d,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()<m.getMonth()||m.getDate()-1>=e.currentDate.getDate()+7)&&e.currentDate.setDate(e.currentDate.getDate()+7),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()+7),e.selectDay(e.currentDate,!1,!1))}if(38===i){if(p=!0,!e.validateDisplayRange(Ft.subtract(e.currentDate,7,"days")))return!1;t.range.useRange?(c=s.index(n.target)-7,d=s.eq(c),c>-1&&(b(),e.setRangeOnCell(d.is(".is-selected")?null:d),e.setRangeSelBeforeFirstSel(d),e.activeTabindex(d,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()>f.getMonth()||f.getDate()+1<=e.currentDate.getDate()-7)&&e.currentDate.setDate(e.currentDate.getDate()-7),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()-7),e.selectDay(e.currentDate,!1,!1))}if(37===i||189===i&&!n.shiftKey){if(p=!0,!e.validateDisplayRange(Ft.subtract(e.currentDate,1,"days")))return!1;t.range.useRange?(c=s.index(n.target)-1,d=s.eq(c),c>-1&&(b(),e.setRangeOnCell(d.is(".is-selected")?null:d),e.setRangeSelBeforeFirstSel(d),e.activeTabindex(d,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()>f.getMonth()||f.getDate()+1!==e.currentDate.getDate())&&e.currentDate.setDate(e.currentDate.getDate()-1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()-1),e.selectDay(e.currentDate,!1,!1))}if(39===i||187===i&&n.shiftKey){if(p=!0,!e.validateDisplayRange(Ft.add(e.currentDate,1,"days")))return!1;t.range.useRange?(c=s.index(n.target)+1,d=s.eq(c),c<o&&(b(),e.setRangeOnCell(d.is(".is-selected")?null:d),e.setRangeSelBeforeFirstSel(d),e.activeTabindex(d,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()<m.getMonth()||m.getDate()-1!==e.currentDate.getDate())&&e.currentDate.setDate(e.currentDate.getDate()+1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()+1),e.selectDay(e.currentDate,!1,!1))}if(33!==i||n.altKey||(p=!0,b(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?f.getMonth()!==e.currentDate.getMonth()&&(e.currentDate.setMonth(e.currentDate.getMonth()-1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setMonth(e.currentDate.getMonth()-1),e.selectDay(e.currentDate,!1,!1))),34!==i||n.altKey||(p=!0,b(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.currentDate.getMonth()!==m.getMonth()&&(e.currentDate.setMonth(e.currentDate.getMonth()+1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setMonth(e.currentDate.getMonth()+1),e.selectDay(e.currentDate,!1,!1))),33===i&&n.ctrlKey&&(p=!0,b(),e.currentDate.setFullYear(e.currentDate.getFullYear()-1),e.selectDay(e.currentDate,!1,!1)),34===i&&n.ctrlKey&&(p=!0,b(),e.currentDate.setFullYear(e.currentDate.getFullYear()+1),e.selectDay(e.currentDate,!1,!1)),36===i){p=!0;var C,T=e.currentDate;b(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?f.getMonth()!==e.currentDate.getMonth()?C=new Date(T.getFullYear(),T.getMonth(),1):(C=new Date(f.getFullYear(),f.getMonth(),f.getDate())).setDate(C.getDate()+1):C=new Date(T.getFullYear(),T.getMonth(),1),e.currentDate=C,e.isIslamic&&(e.currentDateIslamic=P.gregorianToUmalqura(e.currentDate)),e.selectDay(e.currentDate,!1,!1)}if(35===i){p=!0;var S,M=e.currentDate;b(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.currentDate.getMonth()!==m.getMonth()?S=new Date(M.getFullYear(),M.getMonth()+1,0):(S=new Date(m.getFullYear(),m.getMonth(),m.getDate())).setDate(S.getDate()-1):S=new Date(M.getFullYear(),M.getMonth()+1,0),e.currentDate=S,e.isIslamic&&(e.currentDateIslamic=P.gregorianToUmalqura(e.currentDate)),e.selectDay(e.currentDate,!1,!1)}if(84===i){if(t.range.useRange&&e.datepickerApi){b();var L=!(t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date));e.datepickerApi.setToday(L),!L&&e.datepickerApi&&"function"==typeof e.datepickerApi.closeCalendar&&e.datepickerApi.closeCalendar()}else e.setToday();p=!0}if(32===i||13===i){var z;if(p=!0,t.range.useRange)return(!t.range.first||t.range.first&&!t.range.first.date)&&s.removeClass("is-selected"),a.focus().trigger("click"),!1;var V=e.getCellDate(a);e.isIslamic?(e.currentDateIslamic=[V.year,V.month,V.day],e.currentDate=P.umalquraToGregorian(e.currentDateIslamic[0],e.currentDateIslamic[1],e.currentDateIslamic[2])):e.currentDate=new Date(V.year,V.month,V.day),e.selectDay(e.currentDate,!0,!0),e.setRipple(null===(z=n.target)||void 0===z||null==z?void 0:z.querySelector(".is-ripple"),n)}return!p||(n.stopPropagation(),n.preventDefault(),!1)})},validateDisplayRange:function(e){var t,n,i=at.padDate(e.getFullYear(),e.getMonth(),e.getDate());return this.settings.disable.minDate&&this.settings.disable.maxDate?(t=new Date(this.settings.disable.minDate),n=new Date(this.settings.disable.maxDate)):this.settings.displayRange.start&&this.settings.displayRange.end&&(t=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end)),!(this.settings.displayRange.start&&this.settings.displayRange.end&&(!this.dayMap.map(function(a){return a.key}).includes(i)||t&&n&&(t.getDate()>=e.getDate()&&t.getMonth()===e.getMonth()||t.getMonth()>e.getMonth()||n.getDate()<=e.getDate()&&n.getMonth()===e.getMonth()||n.getMonth()<e.getMonth())))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var e=new Date(this.settings.disable.minDate),t=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),e.getFullYear()>this.currentYear||this.currentYear>t.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<e.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>t.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var e=this.settings;if(e.showLegend&&e.legend){this.legend&&this.legend.length?this.legend.empty():this.legend=$('<div class="monthview-legend"></div>');for(var t=0;t<e.legend.length;t++){var n=e.legend[t],i=n.color;if(-1===i.indexOf("#")){var a=i.replace(/[0-9]/g,""),s=10*i.substr(i.length-2,2);i=mt.themeColors().palette[a][s].value}var o=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(pt.hexToRgba(i,.3),'"></span>\n          <span class="monthview-legend-text">').concat(n.name,"</span>\n        </div>");this.legend.append(o)}if(this.table.after(this.legend),e.inPage){var c=this.legend[0].querySelector(".monthview-legend-item:first-child"),d=this.legend[0].querySelector(".monthview-legend-item:last-child");if(c&&d){var p=function(f){return null==f||null==f?void 0:f.getBoundingClientRect().top};this.legend[p(c)!==p(d)?"addClass":"removeClass"]("is-wrapped")}}}},setRangeOnCell:function(e){var t=this,n=this.settings;if(n.range.useRange&&n.range.first&&!n.range.second){var i=n.range.first,a=n.range.extra,s=a.cellLength-1,o=i.rowIdx+i.cellIdx+s*i.rowIdx;if((e=$(e)).length&&!e.is(".is-disabled, .is-selected")){var c=e.closest("tr"),d=e.index(),p=c.index(),f=p+d+s*p,m=t.getCellDate(e),b=this.getTime(this.isIslamic?[m.year,m.month,m.day]:new Date(m.year,m.month,m.day)),C=this.getDifferenceToDate(n.range.first.date,n.range.maxDays);t.days.find("td:visible").each(function(T){var S=$(this);b>t.getTime(n.range.first.date)&&!n.range.selectBackward&&(!n.range.maxDays||n.range.maxDays>0&&b<=C.aftertime)&&(T>o&&T<=f||b>t.getTime(a.max)&&T<=f)?S.addClass("range-next"):b<t.getTime(n.range.first.date)&&!n.range.selectForward&&(!n.range.maxDays||n.range.maxDays>0&&b>=C.beforetime)&&(T<o&&T>=f||b<t.getTime(a.min)&&T>=f)?S.addClass("range-prev"):S.removeClass("range-next range-prev")})}else e.length||t.days.find("td").removeClass("range-next range-prev")}!e&&n.range.second&&t.setRangeSelected()},getDifferenceToDate:function(e,t,n){var i=this,a={},s=function(o,c,d){for(o=i.isIslamic?P.umalquraToGregorian(o):new Date(o);c>0;)o.setDate(o.getDate()+(d?1:-1)),(n||!n&&!i.isDateDisabled(o.getFullYear(),o.getMonth(),o.getDate()))&&(c--,a[d?"after":"before"]=i.isIslamic?P.gregorianToUmalqura(new Date(o)):new Date(o));d&&a.after?a.aftertime=i.getTime(a.after):a.before&&(a.beforetime=i.getTime(a.before))};return n=void 0!==n?n:this.settings.range.includeDisabled,s(e,t),s(e,t,!0),a},setRangeSelected:function(){var e=this,t=this,n=this.settings;n.range.useRange&&n.range.second&&n.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each(function(){var i,a=$(this),s=a.is(".is-disabled")&&!n.range.includeDisabled,o=a.is(".is-disabled")&&n.range.includeDisabled?" include-disabled":"",c=t.getTime((i=t.getCellDate(a),e.isIslamic?[i.year,i.month,i.day]:new Date(i.year,i.month,i.day))),d=t.getTime(n.range.first.date,!0),p=t.getTime(n.range.second.date,!0);c!==d&&c!==p||s?(!t.isIslamic&&c>d&&c<p&&!s||t.isIslamic&&(d>c&&p<c||d<c&&p>c)&&!s)&&a.addClass("range-selection".concat(o)):a.addClass("is-selected".concat(o).concat(d!==p?" range-selection".concat(c!==p||t.isIslamic?"":" end-date"):""))}))},setRangeSelByClick:function(){var e=0,t=this.settings;if(t.range.useRange)if(t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date){if(t.showTime&&this.datepickerApi){var n={time1:this.getTime(t.range.first.date),time2:this.getTime(t.range.second.date),first:this.datepickerApi.setTime(t.range.first.date),second:this.datepickerApi.setTime(t.range.second.date)};n.time1!==this.getTime(n.first)&&(this.datepickerApi.setRangeToElem(n.first,!0),this.datepickerApi.setRangeToElem(n.second,!1),e=2)}e=0===e?1:e}else{var i;!t.range.first||t.range.first&&!t.range.first.date?(i=this.dayMap.filter(function(a){return a.elem.is(".is-selected")}))&&i.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),i[0].elem.focus().trigger("click"),e=3):(!t.range.second||t.range.second&&!t.range.second.date)&&((i=this.days.find("td.range-prev:visible").first()).length||(i=this.days.find("td.range-next:visible").last()),i.length||(i=this.dayMap.filter(function(a){return a.elem.is(".is-selected")})),i&&i.length&&((i[0].elem||i).focus().trigger("click"),e=3))}return e},getCellDate:function(e){var t=parseInt(e.text(),10),n=parseInt(this.header.find(".month").attr("data-month"),10),i=parseInt(this.header.find(".year").text(),10);return e.hasClass("prev-month")?0===n?(n=11,i--):n--:e.hasClass("next-month")&&(11===n?(n=0,i++):n++),{year:i,month:n,day:t}},setRangeSelBeforeFirstSel:function(e){var t=this.settings;t.range.useRange&&$("#monthview-popup:visible")&&(t.range.first||($("td",this.element).removeClass("is-selected"),e.addClass("is-selected")))},activeTabindex:function(e,t){return $("td",this.element).removeAttr("tabindex"),e.attr("tabindex",0),t&&e.focus(),e},updated:function(){return this.teardown().init()},teardown:function(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){var e;if(null===(e=this.calendarToolbarAPI)||void 0===e||null==e||e.destroy(),this.teardown(),this.element&&this.element.empty(),this.element&&this.element[0])try{$.removeData(this.element[0],"monthview")}catch{}return this}};var Ts={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,disable:{dayOfWeek:[]},showToday:!0,showViewChanger:!0,hitbox:!1,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function os(e,t){this.settings=_.mergeSettings(e,t,Ts),this.element=$(e),this.init()}os.prototype={init:function(){return this.settings.startDate||(this.settings.startDate=Ft.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=Ft.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=P.getLocale(this.settings.language),n=P.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=P.cultures[i]||P.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build()}),this},setCurrentCalendar:function(){return this.currentCalendar=P.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),_.addAttributes(this.element,this,this.settings.attributes),this},renderAllEvents:function(e){if(!this.settings.onRenderWeek||e){var t=this.settings.events.slice(0);t.sort(function(a,s){return a.starts<s.starts?-1:a.starts>s.starts?1:0}),this.removeAllEvents();for(var n=0;n<t.length;n++){var i=t[n];this.settings.filteredTypes.indexOf(i.type)>-1||this.renderEvent(i)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var e=this;this.settings.onRenderWeek(this.element,function(t,n){n&&n.length>0&&(e.settings.eventTypes=n),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0))},{api:e,settings:this.settings})},removeAllEvents:function(){for(var e=this.element[0].querySelectorAll(".calendar-event"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var n=0;n<this.dayMap.length;n++)this.dayMap[n].events=[]},renderEvent:function(e){var t=new Date(e.starts),n=at.padDate(t.getFullYear(),t.getMonth(),t.getDate());if(P.isIslamic(this.locale.name)){var i=P.gregorianToUmalqura(t);n=at.padDate(i[0],i[1],i[2])}var a=new Date(e.ends),s=at.padDate(a.getFullYear(),a.getMonth(),a.getDate());if(P.isIslamic(this.locale.name)){var o=P.gregorianToUmalqura(a);s=at.padDate(o[0],o[1],o[2])}var c=this.dayMap.filter(function(f){return f.key>=n&&f.key<=s});if(e.endKey=s,e.startKey=n,e=Ln.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),1!==c.length||e.isAllDay||this.appendEventToHours(c[0].elem,e),1===c.length&&e.isAllDay&&this.appendEventToAllDay(c[0].elem,e),c.length>1)for(var d=0;d<c.length;d++){var p=0===d?"calendar-event-start":"calendar-event-continue";d===c.length-1&&(p="calendar-event-ends"),this.appendEventToAllDay(c[d].elem,e,p)}},appendEventToAllDay:function(e,t,n){var i=e.querySelector(".week-view-all-day-wrapper");if(i){var a=document.createElement("a");ue.addClass(a,"calendar-event",t.color,n),a.setAttribute("data-id",t.id),a.setAttribute("data-key",t.startKey),a.setAttribute("href","#"),"calendar-event-continue"!==n&&"calendar-event-ends"!==n||a.setAttribute("tabindex","-1"),a.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>");var s=i.querySelectorAll(".calendar-event").length;if(s>=1&&(a.style.top="".concat(22*s,"px")),s>2)for(var o=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),c=0;c<o.length;c++)o[c].style.height="".concat(44+23*(s-1),"px");i.appendChild(a),_.addAttributes($(a),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(a,t)}},appendEventToHours:function(e,t){for(var n=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),i=0;i<n.length;i++){var a=n[i],s=parseFloat(a.parentNode.getAttribute("data-hour"),10),o=Math.round(t.startsHour);if(o>t.startsHour?s===o-.5:s===o){var c=t.endsHour-t.startsHour,d="",p=document.createElement("a");ue.addClass(p,"calendar-event",t.color),p.setAttribute("data-id",t.id),p.setAttribute("data-key",t.startKey),p.setAttribute("href","#"),c<.5&&ue.addClass(p,"reduced-padding",t.color),c<1.5&&ue.addClass(p,"is-ellipsis"),c>2&&(d=" ".concat(P.formatHourRange(t.startsHour,t.endsHour,{locale:this.locale}))),t.startsHour+c>this.settings.endHour&&(ue.addClass(p,"is-cutoff",t.color),c=this.settings.endHour+1-t.startsHour),c<.25&&(c=.25),t.startsHour>s&&(p.style.top="".concat((t.startsHour-s)/.016666666666666784*(a.parentNode.offsetHeight/30),"px")),p.style.height="".concat(2*c*25+1.5*c,"px"),p.innerHTML='<div class="calendar-event-content">\n          '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(t.shortSubject||t.subject).concat(d,"</span>\n        </div>");var b=a.querySelector(".week-view-cell-wrapper"),C=a.querySelectorAll(".calendar-event"),T=C.length;if(T>0){var S=100/(T+1),M=0;for(M=0;M<T;M++)C[M].style.width="".concat(S,"%"),M>0&&this.isRTL&&(C[M].style.right="".concat(S*M,"%")),M>0&&!this.isRTL&&(C[M].style.left="".concat(S*M,"%"));p.style.width="".concat(S,"%"),this.isRTL?p.style.right="".concat(S*M,"%"):p.style.left="".concat(S*M,"%")}b.appendChild(p),_.addAttributes($(p),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(p,t)}}},attachTooltip:function(e,t){var n=this;if("overflow"!==this.settings.iconTooltip){var i=e.querySelector(".calendar-event-icon");i&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:t}):t[this.settings.iconTooltip]&&(i.setAttribute("title",t[this.settings.iconTooltip]),$(i).tooltip({content:i.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:t}):t[this.settings.eventTooltip]&&(e.setAttribute("title",t[this.settings.eventTooltip]),$(e).tooltip({content:e.innerText}))),t.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(e.setAttribute("title",t.subject),$(e).tooltip({beforeShow:function(a,s){var o=s[0].querySelector(".calendar-event-title"),c=s[0].querySelector(".calendar-event-icon"),d=c?c.querySelector(".icon").getAttribute("data-status"):"";a(o.offsetWidth>s[0].scrollWidth-(c?c.offsetWidth:0)&&"".concat(o.innerText).concat(d?" (".concat(P.translate(d,{locale:n.locale.name},!1),")"):""))}}))},showWeek:function(e,t){var n=this;this.numberOfDays=Math.round((t-e)/864e5);var i=new Date(e.getTime()),a=new Date(t.getTime());P.isIslamic(this.locale.name)&&(e=P.gregorianToUmalqura(e),e=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),t=P.gregorianToUmalqura(t),t=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6])),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(P.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(P.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var s=new Date(e.getTime());s<=t;s.setDate(s.getDate()+1)){var o=P.formatDate(s,{pattern:"d",locale:this.locale.name}),c=P.formatDate(s,{pattern:"EEE",locale:this.locale.name}),d=this.currentCalendar.dateFormat.dayOfWeek,p=d?"EEE"===d.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(at.padDate(s.getFullYear(),s.getMonth(),s.getDate()),'"><div class="week-view-header-wrapper').concat(Ft.isToday(s)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(p?"":" is-emphasis",'">').concat(p?c:o,'</span><span class="week-view-header-day-of-week').concat(p?" is-emphasis":"",'">').concat(p?o:c,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var f=this.settings.startHour;f<=this.settings.endHour;f++){for(var m='<tr class="week-view-hour-row" data-hour="'.concat(f,'"><td><div class="week-view-cell-wrapper">').concat(P.formatHour(f,{locale:this.locale}),"</div></td>"),b='<tr class="week-view-half-hour-row" data-hour="'.concat(f,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),C=new Date(e.getTime());C<=t;C.setDate(C.getDate()+1))m+='<td><div class="week-view-cell-wrapper"></div></td>',b+='<td><div class="week-view-cell-wrapper"></div></td>';this.weekBody+=(m+="</tr>")+(b+="</tr>")}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var T={isDayView:this.isDayView,startDate:P.isIslamic(this.locale.name)?i:e,endDate:P.isIslamic(this.locale.name)?a:t,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",T),this.settings.onChangeWeek&&this.settings.onChangeWeek(T),this.element.find("th").each(function(S,M){var L=M.getAttribute("data-key");L&&n.dayMap.push({key:L,elem:M})}),this.addTimeLine(),this.showToolbarMonth(e,t),this.renderDisable(),this.renderLegend(),this.renderAllEvents(),this.settings.startDate=P.isIslamic(this.locale.name)?i:e,this.settings.endDate=P.isIslamic(this.locale.name)?a:t},renderDisable:function(){if(!(!this.settings.disable.dayOfWeek.length>0)){var e=this.settings.disable.dayOfWeek;if(1===this.dayMap.length){var t=this.dayMap[0],n=t.key,i=n.substring(0,4),a=n.substring(4,6),s=n.substring(6,8),o=new Date(i,a-1,s);e.includes(o.getDay())&&this.renderDisableToContainer(t.elem)}else for(var d=0;d<e.length;d++)this.renderDisableToContainer(this.dayMap[e[d]].elem)}},renderDisableToContainer:function(e){for(var t=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),n=0;n<t.length;n++)$(t[n].querySelector(".week-view-cell-wrapper")).addClass("is-disabled");var a=e.querySelector(".week-view-all-day-wrapper");a&&a.classList.add("is-disabled")},renderLegend:function(){var e=this;if(this.settings.showLegend)for(var t=this.settings.legend,n=0;n<t.length;n++)for(var i=t[n].dates,a=function(o){var c=new Date(i[o]),d=at.padDate(c.getFullYear(),c.getMonth(),c.getDate());if(P.isIslamic(e.locale.name)){var p=P.gregorianToUmalqura(c);d=at.padDate(p[0],p[1],p[2])}var f=new Date(i[o]),m=at.padDate(f.getFullYear(),f.getMonth(),f.getDate());if(P.isIslamic(e.locale.name)){var b=P.gregorianToUmalqura(f);m=at.padDate(b[0],b[1],b[2])}var C=e.dayMap.filter(function(oe){return oe.key>=d&&oe.key<=m});if(C.length>0){var T=t[n].color;if(-1===T.indexOf("#")){var S=T.replace(/[0-9]/g,""),M=10*T.substr(T.length-2,2);T=mt.themeColors().palette[S][M].value}for(var L=pt.hexToRgba(T,.3),z=C[0].elem,V=e.element[0].querySelectorAll("td:nth-child(".concat(z.cellIndex+1,")")),N=0;N<V.length;N++){var G=$(V[N].querySelector(".week-view-cell-wrapper"));G.addClass("is-colored"),G[0].setAttribute("data-hex",T),G[0].style.backgroundColor=L}var Z=$(z.querySelector(".week-view-all-day-wrapper"));Z&&(Z.addClass("is-colored"),Z[0].setAttribute("data-hex",T),Z[0].style.backgroundColor=L)}},s=0;s<i.length;s++)a(s)},showToolbarMonth:function(e,t){var n=P.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),i=P.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),a=P.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),s=P.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),o=P.formatDate(t,{date:"year",locale:this.locale.name});i!==n&&(o="".concat(P.formatDate(e,{pattern:"MMM",locale:this.locale.name})," - ").concat(P.formatDate(t,{pattern:"MMMM yyyy",locale:this.locale.name}))),s!==a&&(o="".concat(P.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(P.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(o)},addTimeLine:function(){var e=this;if(this.settings.showTimeLine){var t=function(){var n=new Date,i=n.getHours(),a=n.getMinutes();e.markers.css("top",52*(i-e.settings.startHour+a/60))};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),t(),this.timer=setInterval(function(){t()},3e4))}},addToolbar:function(){var e=this,t=this.isDayView?"day":"week";this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new wn(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.settings.onChangeView,viewChangerValue:t,attributes:this.settings.attributes}),this.monthField=this.header.find(this.settings.attributes?"#".concat(this.settings.attributes[0].value,"-").concat(t,"-view-datepicker"):"#monthview-datepicker-field")},setToday:function(){var e=new Date;this.isIslamic&&"string"!=typeof e&&(this.currentDateIslamic=P.gregorianToUmalqura(e),e=at.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||"string"==typeof e||(e=at.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var t=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1;this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,n,1]:new Date(t,n,1))},handleEvents:function(){var e=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),function(){e.updated()}),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),function(n,i){var a=i.isToday?new Date:i.selectedDate;e.isDayView?(e.settings.startDate=a,e.settings.endDate=a):(e.settings.startDate=e.hasIrregularDays?a:Ft.firstDayOfWeek(a,e.settings.firstDayOfWeek),e.settings.startDate.setHours(0,0,0,0),e.settings.endDate=new Date(e.settings.startDate),e.settings.endDate.setDate(e.settings.endDate.getDate()+e.numberOfDays-1),e.settings.endDate.setHours(23,59,59,59)),e.showWeek(e.settings.startDate,e.settings.endDate),i.isToday&&e.setToday()}),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),function(){e.advanceDays(!0)}),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),function(){e.advanceDays(!1)});var t=function(n,i){var a=n.getAttribute("data-id"),s=e.settings.events.filter(function(o){return o.id===a});s&&0!==s.length&&e.element.trigger(i,{settings:e.settings,event:s[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",function(n){t(n.currentTarget,"eventclick"),n.preventDefault()}),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",function(n){t(n.currentTarget,"eventdblclick")}),this},advanceDays:function(e){var t=this.isDayView?1:this.numberOfDays;e||(t=-t),this.settings.startDate.setDate(this.settings.startDate.getDate()+t),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+t),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(e){e.startsLocale||(e=Ln.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes)),Ln.cleanEventData(e,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e)},selectHeader:function(e){var t=e instanceof Date?at.padDate(e.getFullYear(),e.getMonth(),e.getDate()):e,n={all:".week-view-table-header th"};n.current="".concat(n.all,'[data-key="').concat(t,'"]'),[].slice.call(this.element[0].querySelectorAll(n.all)).forEach(function(a){a.classList.remove("is-selected")});var i=this.element[0].querySelector(n.current);i&&i.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&(this.settings.events[n]=_.extend(!0,this.settings.events[n],e),Ln.cleanEventData(this.settings.events[n],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&this.settings.events.splice(n,1);this.renderAllEvents()},updated:function(e){return e||(e={}),e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),e.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),$.removeData(this.element[0],"init"),$.removeData(this.element[0],"automationId"),this}};var gl={eventTypes:[],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,hitbox:!1,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0},disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showEventLegend:!0,dayLegend:null,displayRange:{start:"",end:"",months:{showAbbr:!1}}};function _o(e,t){this.settings=_.mergeSettings(e,t,gl),this.element=$(e),this.init()}_o.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents().renderEventLegend(),this},setLocaleThenBuild:function(){var e=this,t=P.getLocale(this.settings.language),n=P.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=P.cultures[i]||P.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()}),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},renderEventLegend:function(){var e=this.settings;if($(".calendar-event-legend").remove(),e.showEventLegend){this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var t=0;t<e.eventTypes.length;t++){var n=e.eventTypes[t],i=n.color,a=$('<div class="calendar-event-legend-item"></div>');a.append('<span class="calendar-event-legend-swatch '.concat(i,'"></span>\n          <span class="calendar-event-legend-text">').concat(n.label,"</span>")),this.eventLegend.append(a),_.addAttributes(a,this,this.settings.attributes,"legend-mobile-".concat(n.id),!0)}this.monthviewTable.after(this.eventLegend)}},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var e=0;e<this.settings.eventTypes.length;e++){var t=this.settings.eventTypes[e],n=t.custom?t.color:"".concat(t.color,"07"),i='<input type="checkbox" class="checkbox '.concat(n,'" name="').concat(t.id,'" id="').concat(t.id,'" ').concat(t.checked?'checked="true"':""," ").concat(t.disabled?'disabled="true"':"",' />\n          <label for="').concat(t.id,'" class="checkbox-label">').concat(t.translationKey?P.translate(t.translationKey,{locale:this.locale.name,language:this.language}):t.label,"</label><br/>");this.eventTypeContainer.insertAdjacentHTML("beforeend",i);var a=$(this.eventTypeContainer).find("#".concat(t.id));_.addAttributes($(this.eventTypeContainer).find("#".concat(t.id)),this,this.settings.attributes,"legend-".concat(t.id),!0),a.next("label").attr("for",a[0].id)}return this},renderMonthView:function(){var e=this;return this.monthViewContainer=this.element[0].querySelector(".calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(t){e.settings.onChangeView?e.settings.onChangeView(t):e.changeView(t.viewName)},this.monthView=new mi(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,hitbox:this.settings.hitbox,attributes:this.settings.attributes,firstDayOfWeek:this.settings.firstDayOfWeek,displayRange:{start:this.settings.displayRange.start,end:this.settings.displayRange.end,months:{showAbbr:this.settings.displayRange.months.showAbbr}}}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),_.addAttributes($(".calendar"),this,this.settings.attributes),_.addAttributes($(".calendar-monthview"),this,this.settings.attributes,"monthview"),this},renderWeekView:function(){var e=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(i){e.settings.onChangeView?e.settings.onChangeView(i):e.changeView(i.viewName)};var t=Ft.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),n=Ft.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return t.setHours(0,0,0,0),n.setHours(23,59,59,999),this.weekView=new os(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:t,endDate:n,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip,attributes:this.settings.attributes}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(i){e.monthView.selectDay(i.startDate,!1,!0)},this.weekView.renderAllEvents(),_.addAttributes($(".calendar-weekview"),this,this.settings.attributes,"weekview"),this},changeView:function(e){if(e!==this.activeView&&this.weekViewContainer){var t=this.currentDate(),n=new Date(t),i=new Date(t);switch(n.setHours(0,0,0,0),i.setHours(23,59,59,999),e){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",n=Ft.firstDayOfWeek(n,this.settings.firstDayOfWeek),i=Ft.lastDayOfWeek(n,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(t,!1,!0),this.weekView.selectHeader(t);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(t,!1,!0)}}},appendUpcomingEvent:function(e){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(e.daysUntil>0)){var t=Math.abs(e.daysUntil);if(!(t<0||t>this.settings.upcomingEventDays)){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-key",e.startKey),ue.addClass(n,"calendar-upcoming-event");var i="",a=P.formatDate(e.starts,{pattern:"d",locale:this.locale.name}),s=P.formatDate(e.ends,{pattern:"d",locale:this.locale.name}),o="".concat(P.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a===s?a:"".concat(a,"-").concat(s),", ").concat(P.formatDate(e.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(s,10)<parseInt(a,10)){var c=new Date(e.starts);c.setDate(1),c.setMonth(c.getMonth()+1);var d=c.getFullYear();o="".concat(P.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a," - ").concat(P.formatDate(c,{pattern:"MMMM",locale:this.locale.name})," ").concat(s,", ").concat(d)}i+='\n      <span class="calendar-upcoming-date">'.concat(o,'</span>\n      <span class="calendar-upcoming-event-color ').concat(e.color||"",'">').concat(e.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(e.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(e.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(e.isDays?e.duration:e.durationHours," ").concat(e.durationUnits||"","</span>"),n.innerHTML=i,this.upcomingEventsContainer.appendChild(n),_.addAttributes($(n),this,this.settings.attributes,"upcoming-event-".concat(e.id))}}},renderEventDetails:function(e,t){if(this.settings.events&&"month"===this.activeView){var n=this.settings.events.filter(function(s){return s.id===e});if(n&&0!==n.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var i=$.extend(!0,{},n[0]);i.durationHours&&!i.isDays&&Ln.formateTimeString(i,this.locale,this.language),this.renderTmpl(i,this.settings.template,this.eventDetailsContainer,t>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(i,this.settings.mobileTemplate,this.eventDetailsMobileContainer,t>1);var a=$(this.eventDetailsContainer).data("accordion");a&&a.destroy(),this.eventDetailsMobileContainer&&this.translate(this.eventDetailsMobileContainer),this.translate(this.eventDetailsContainer)}}},translate:function(e){var t=this;$(e).find('[data-translate="text"]').each(function(n,i){var a=$(i);a.text(P.translate(a.attr("data-translate-key")||a.text(),{showAsUndefined:!1,showBrackets:!1,language:t.settings.language,locale:t.settings.locale}))})},renderSelectedEventDetails:function(){var e=this.getDayEvents();if(this.clearEventDetails(),e.events&&0!==e.events.length){for(var t=0;t<e.events.length;t++)this.renderEventDetails(e.events[t].id,e.events.length);$(".calendar .list-detail",this.element).css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),ue.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click"),$(".accordion-pane.no-transition",this.element).removeClass("no-transition")}},renderDay:function(e){this.monthView.selectDay(e);var t=new Date(this.currentDate()),n=new Date(this.currentDate());t.setHours(0,0,0,0),n.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(t,n),"week"===this.activeView&&(t=Ft.firstDayOfWeek(t,this.settings.firstDayOfWeek),n=Ft.lastDayOfWeek(t,this.settings.firstDayOfWeek),this.weekView.showWeek(t,n))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var e=[];if(!this.eventTypeContainer)return e;for(var t=this.eventTypeContainer.querySelectorAll(".checkbox"),n=0;n<t.length;n++){var i=t[n];i.checked||e.push(i.getAttribute("name"))}return e},renderAllEvents:function(e){if(this.settings.onRenderMonth&&!e)return this.callOnRenderMonth(),this;var t=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var n=this.settings.events.slice(0);n.sort(function(s,o){return s.starts<o.starts?-1:s.starts>o.starts?1:0});for(var i=0;i<n.length;i++){var a=n[i];t.indexOf(a.type)>-1||this.renderEvent(a)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=t,this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents()),this},renderEvent:function(e){var t=P.newDateObj(e.starts),n=P.isIslamic(this.locale.name),i=at.padDate(t.getFullYear(),t.getMonth(),t.getDate());if(n){var a=P.gregorianToUmalqura(t);i=at.padDate(a[0],a[1],a[2])}var s=P.newDateObj(e.ends),o=at.padDate(s.getFullYear(),s.getMonth(),s.getDate());if(n){var c=P.gregorianToUmalqura(s);o=at.padDate(c[0],c[1],c[2])}var d=this.monthView.dayMap.filter(function(C){return C.key>=i&&C.key<=o});e.endKey=o,e.startKey=i,e=Ln.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes);for(var p=-1,f=0;f<this.monthView.dayMap.length;++f)if(this.monthView.dayMap[f].key>=i&&this.monthView.dayMap[f].key<=o){p=f;break}if(1===d.length&&this.appendEvent(d[0].elem[0],e,"event-day-start-end",p),d.length>1)for(var m=0;m<d.length;m++){var b=0===m?"event-day-start":"event-day-span";d.length-1===m&&(b="event-day-end"),this.appendEvent(d[m].elem[0],e,b,p+m)}this.appendUpcomingEvent(e,d,p)},removeAllEvents:function(){for(var e=this.monthViewContainer.querySelectorAll(".calendar-event-more"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var n=this.monthViewContainer.querySelectorAll(".calendar-event"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);for(var a=this.monthViewContainer.querySelectorAll(".calendar-event-spacer"),s=0;s<a.length;s++)a[s].parentNode.removeChild(a[s]);for(var o=0;o<this.monthView.dayMap.length;o++)this.monthView.dayMap[o].events=[]},appendEvent:function(e,t,n,i){var a,s,o,c,d=this,p=e.querySelectorAll(".calendar-event").length;if(i>-1&&(this.monthView.dayMap[i].events||(this.monthView.dayMap[i].events=[]),this.monthView.dayMap[i].events.push(t)),p>=3){var f=e.querySelector(".calendar-event-more"),m=function(z,V){z.setAttribute("data-count",V),z.innerHTML="<span>+ ".concat(V," ").concat(P.translate("More",{locale:d.locale.name,language:d.language}).replace("...",""),"</span>")};return f?m(f,parseInt(f.getAttribute("data-count"),10)+1):(c=document.createElement("span"),ue.addClass(c,"calendar-event-more"),m(c,1),e.querySelector(".day-container").appendChild(c),$(e).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",function(){d.monthView.selectDay(d.monthView.dayMap[i].key,!1,!0),d.changeView("day")})),this}c=document.createElement("a"),ue.addClass(c,"calendar-event",null!==(a=t.cssClass)&&void 0!==a?a:t.color,n),c.setAttribute("data-id",t.id),c.setAttribute("data-key",t.startKey),("#"===(null===(s=t.color)||void 0===s||null==s?void 0:s.substr(0,1))||t.color)&&["ruby","amber","emerald","azure","turqoise","amethyst","graphite","slate"].indexOf(t.color)<0&&(c.style.backgroundColor=t.color,c.classList.remove(t.color)),("#"===(null===(o=t.borderColor)||void 0===o||null==o?void 0:o.substr(0,1))||t.borderColor)&&(c.style.borderLeftColor=t.borderColor),c.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>");var b=this.monthViewContainer.querySelectorAll('.calendar-event.event-day-start[data-id="'.concat(t.id,'"]'));if(b[0])for(var C=b[0].parentNode.children,T=e.querySelector(".day-container").children.length;T<C.length;T++){var S=C[T].getAttribute("data-id");if(this.getString(S)===this.getString(t.id))break;if(!C[T].classList.contains("day-text")){var M=document.createElement("span");M.classList.add("calendar-event-spacer"),e.querySelector(".day-container").appendChild(M)}}if(e.querySelector(".day-container").appendChild(c),_.addAttributes($(c),this,this.settings.attributes,"event-".concat(t.id)),"overflow"!==this.settings.iconTooltip){var L=c.querySelector(".calendar-event-icon");L&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.iconTooltip]&&(L.setAttribute("title",t[this.settings.iconTooltip]),$(L).tooltip({content:L.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.eventTooltip]&&(c.setAttribute("title",t[this.settings.eventTooltip]),$(c).tooltip({content:c.innerText}))),t.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(c.setAttribute("title",t.subject),$(c).tooltip({beforeShow:function(z,V){var N=V[0].querySelector(".calendar-event-title"),U=V[0].querySelector(".calendar-event-icon"),G=U?U.querySelector(".icon").getAttribute("data-status"):"";z(N.offsetWidth>V[0].scrollWidth-(U?U.offsetWidth:0)&&"".concat(N.innerText).concat(G?" (".concat(P.translate(G,{locale:d.locale.name,language:d.language},!1),")"):""))}})),this},getString:function(e){return"string"==typeof e?e:e?e.toString():null},getEventTypeLabel:function(e){var t="";if(!e)return t;var n=this.settings.eventTypes.filter(function(i){return i.id===e});return 1===n.length&&(t=n[0].label),t},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),function(){e.updated()}),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),function(a,s){e.isSwitchingMonth=!0,e.modalVisible()&&e.removeModal(),e.settings.year=s.year,e.settings.month=s.month,e.renderAllEvents(),setTimeout(function(){e.isSwitchingMonth=!1},500)}),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",function(){e.renderAllEvents(!0)}),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),function(){e.renderSelectedEventDetails()}),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",function(a){var s=a.currentTarget.getAttribute("data-key");e.renderDay(s)}),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",function(a){a.stopPropagation();var s=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0},o=a.currentTarget.getAttribute("data-id"),c=e.settings.events.filter(function(p){return p.id===o});if(e.element.triggerHandler("contextmenu",{originalEvent:a,month:e.settings.month,year:e.settings.year,event:c[0]}),!_.isSubscribedTo(t.element[0],a,"contextmenu","calendar")&&!s()||(a.preventDefault(),t.closePrevPopupmenu(),!s()))return!0;var d=$(a.currentTarget);return d.popupmenu({attachToBody:!0,menuId:e.settings.menuId,eventObj:a,trigger:"immediate",offset:{y:5}}),d.off("selected.calendar").on("selected.calendar",function(p,f){if(t.settings.menuSelected&&t.settings.menuSelected(p,f,o),"delete-event"===f.attr("data-action")&&t.deleteEvent({id:o}),"show-event"===f.attr("data-action")){var m=this.getAttribute("data-key");t.monthView.selectDay(m)}}),!1});var n=0,i=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",function(a){n=setTimeout(function(){if(!i){var s=a.currentTarget.getAttribute("data-id"),o=e.settings.events.filter(function(p){return p.id===s});if(!o||0===o.length)return;var c=$(a.currentTarget),d=c.find(".calendar-event-title");(a.currentTarget.classList.contains("event-day-span")||a.currentTarget.classList.contains("event-day-end"))&&(d=t.element.find('.event-day-start[data-id="'.concat(c.attr("data-id"),'"] .calendar-event-title'))),e.showModalWithCallback(o[0],!1,d),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:o[0]})}i=!1},100)}),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",function(a){clearTimeout(n),i=!0;var s=a.currentTarget.getAttribute("data-id"),o=e.settings.events.filter(function(c){return c.id===s});o&&0!==o.length&&e.element.trigger("eventdblclick",{month:e.settings.month,year:e.settings.year,event:o[0]})}),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",function(a){var s=a.currentTarget.getAttribute("data-key");if(s&&!e.isSwitchingMonth){var o=new Date(s.substr(0,4),s.substr(4,2)-1,s.substr(6,2)),c=_.extend({},e.settings.newEventDefaults);c.startKey=s,c.endKey=s,c.starts=o,c.ends=o,a.stopPropagation(),Ln.cleanEventData(c,!1,e.currentDate(),e.locale,e.language,e.settings.events,e.settings.eventTypes),e.showModalWithCallback(c,!0),e.element.triggerHandler("dblclick",{eventData:c,api:e})}}),this.element.find(".listview").off("click.".concat("calendar","-mobile")).on("click.".concat("calendar","-mobile"),function(a){var s=$(a.target).closest("li"),o=s.attr("data-id"),c=e.settings.events.filter(function(d){return d.id===o});c&&0!==c.length&&(e.showModalWithCallback(c[0],!1,s),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:c[0]}))}),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")})},callOnRenderMonth:function(){var e=this;this.settings.onRenderMonth(this.element,function(t,n){n&&n.length>0&&(e.settings.eventTypes=n,e.weekView&&(e.weekView.settings.eventTypes=n),e.renderEventLegend(),e.renderEventTypes()),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0),e.weekView&&(e.weekView.settings.events=t,e.weekView.renderAllEvents(!0)))},{api:e,month:this.settings.month,year:this.settings.year})},currentDate:function(){var e=this.isIslamic?this.monthView.currentDateIslamic:this.monthView.currentDate;return P.isValidDate(e)?e:new Date},getDayEvents:function(e){if(e||(e=this.currentDate()),"string"==typeof e||this.isRTL||(e=at.padDate(e.getFullYear(),e.getMonth(),e.getDate())),P.isIslamic(this.locale.name)){var t=P.gregorianToUmalqura(e);e=at.padDate(t[0],t[1],t[2])}var n=this.monthView.dayMap.filter(function(a){return a.key===e});"month"!==this.activeView&&(n=this.weekView.dayMap.filter(function(a){return a.key===e}));var i={date:this.monthView.currentDate,events:[]};return 0===n.length?[]:(i.events=n[0].events,i.elem=n[0].elem,i)},renderTmpl:function(e,t,n,i){if("object"===Ge(ui)&&t){if(t instanceof $?t="".concat(t.html()):"string"==typeof t&&(at.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Ln.getEventTypeColor(e,this.settings.eventTypes),e.startsLong=P.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=P.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(P.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(P.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(P.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(P.formatDate(e.ends,{date:"hour",locale:this.locale.name})),P.isIslamic(this.locale.name)){var a=P.gregorianToUmalqura(new Date(e.starts)),s=P.gregorianToUmalqura(new Date(e.ends));e.startsLong=P.formatDate(a,{date:"long",locale:this.locale.name}),e.endsLong=P.formatDate(s,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(P.formatDate(a,{date:"long",locale:this.locale.name})," ").concat(P.formatDate(a,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(P.formatDate(s,{date:"long",locale:this.locale.name})," ").concat(P.formatDate(s,{date:"hour",locale:this.locale.name}))}e.typeLabel=this.getEventTypeLabel(e.type);var o=ui.compile(t,{event:e});n.classList.remove("has-only-one"),i?ue.append(n,o,"*"):(n.innerHTML=o,n.classList.add("has-only-one"))}},addEvent:function(e){Ln.cleanEventData(e,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e),this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents())},updateEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&(this.settings.events[n]=_.extend(!0,this.settings.events[n],e),Ln.cleanEventData(this.settings.events[n],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(e)},deleteEvent:function(e){for(var t=e.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===t&&this.settings.events.splice(n,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(e)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function(e,t,n){var i=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),ue.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),e=Ln.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(e||{},this.settings.modalTemplate,this.modalContents);var a=this.getDayEvents(),s=!0;a.elem=$(a.elem);var o=6===a.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";n||"day"!==this.activeView||(n=$(".week-view-header-wrapper"),o=this.isRTL?"left":"right"),n||(n=a.elem);var c=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:n,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:o},title:e.title||e.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:e.color,initializeContent:!1};n.off("hide.calendar").on("hide.calendar",function(){s?i.removeModal():(t(i.modalContents,e),i.element.trigger("hidemodal",{elem:i.modalContents,event:e}),i.removeModal(),s=!0)}).popover(c).off("show.calendar").on("show.calendar",function(d,p){i.element.trigger("showmodal",{elem:i.modalContents,event:e}),p.find("#isAllDay").off().on("click.calendar",function(f){$(f.currentTarget).prop("checked")?(p.find("#durationHours").prop("disabled",!0),p.find("#endsHourLocale").prop("disabled",!0),p.find("#startsHourLocale").prop("disabled",!0)):(p.find("#durationHours").prop("disabled",!1),p.find("#endsHourLocale").prop("disabled",!1),p.find("#startsHourLocale").prop("disabled",!1))}),p.find("#type").val(e.type).dropdown(),p.find("#comments").val(e.comments),p.find("#subject").focus(),p.find("button").on("click",function(f){var m=n.data("popover"),b=f.currentTarget.getAttribute("data-action");s="submit"!==b,m&&m.hide(!0)}),p.find(".datepicker").datepicker({locale:i.settings.locale,language:i.settings.language}),p.find(".timepicker").timepicker({locale:i.settings.locale,language:i.settings.language}),i.translate(p)}),$("#calendar-popup").one("tooltipafterplace.calendar",function(d,p){var f=p.element.find(".arrow"),m=parseInt(f.css("margin-top"),10);if(a.elem.parent().index()>=3){var b=parseInt(p.element.offset().top,10),C=b+p.element.height(),T=$("html").height()+10;if(C>T){var S=b-(C-T)-25;p.element.css("top","".concat(S,"px")),f.css("margin-top","".concat(m+(b-S)-18,"px"))}}else p.element.height()>580&&f.css("margin-top","".concat(m-18,"px"))}),this.activeElem=n}},showModalWithCallback:function(e,t,n){var i=this;this.showEventModal(e,function(a,s){for(var o=a.querySelectorAll("input, textarea, select"),c=0;c<o.length;c++)s[o[c].id]="checkbox"===o[c].getAttribute("type")?o[c].checked:o[c].value;t?i.addEvent(s):i.updateEvent(s)},n)},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),ue.remove(document.getElementById("calendar-popup")),ue.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),e.locale||e.template||e.upcomingEventDays||e.mobileTemplate?(this.destroy().init(),this):(this.weekView&&e.events&&(this.weekView.settings.events=e.events),this.weekView&&e.eventTypes&&(this.weekView.settings.events=e.events),this.weekView&&e.weekViewSettings&&(this.weekView.settings=_.mergeSettings(this.element[0],e.weekViewSettings,this.weekViews.settings)),this.settings.displayRange.start&&this.settings.displayRange.end?this.monthView.showRange(this.settings.displayRange.start,this.settings.displayRange.end):this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&e.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element&&this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(e){return this.each(function(){var t=$.data(this,"calendar");t?t.updated(e):t=$.data(this,"calendar",new _o(this,e))})};var ml={slidesToShow:1,startingSlide:null,loop:!1,attributes:null,showArrows:!1,footerContainment:!1,hideBulletsOnOverflow:!1,pageSelectorInputText:null};function js(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,ml),this.init()}js.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView(),this.addAttributes())},setElements:function(){var e=this.settings;this.setResponsiveSlidesToShow(),this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=e.slidesToShow,this.slides=[],this.isVisible=!0;for(var t=0,n=this.slidesJQ.length;t<n;t++)this.slides.push({node:$(this.slidesJQ[t])});this.activeIndex=null!==e.startingSlide&&e.startingSlide>-1&&e.startingSlide<this.slides.length?e.startingSlide:0,_.addAttributes(this.element,this,this.settings.attributes)},createControls:function(){for(var e,t,n,i,a,s,o,c,d,p=this.slides.length,f={bullets:""},m=[],b=0,C=0,T=p;C<T;C+=this.slidesToShow){t="",b++,i=P.translate((c=1===this.slidesToShow||p-C==1)?"SlideOf":"SlidesOf"),n=c?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var S=0;S<this.slidesToShow&&C+S<p;S++)t+="".concat(C+S+1,", ");i=i.replace(c?"{1}":"{2}",p),n=n.replace(c?"{1}":"{2}",p),o=(t=t.slice(0,-2)).lastIndexOf(","),s=t.substr(o+2),c?(d="",(e=this.slides[C].node).is(".is-disabled, [disabled]")&&!e.is('[disabled="false"]')&&(d=' disabled tabindex="-1"',this.slides[C].isDisabled=!0),e.is(".active")&&null===this.settings.startingSlide&&""===d&&(this.activeIndex=C),i=(a=e.attr("data-button-text"))&&a.length?a:i.replace("{0}",t),n=n.replace("{0}",t)):(t=t.substr(0,o),i=i.replace("{1}",s).replace("{0}",t),n=n.replace("{1}",s).replace("{0}",t)),n=n.toLowerCase().replace(/[\s,--]+/g,"-"),f.bullets+='<a href="'.concat(n,'" class="control-button hyperlink hide-focus is-ripple"').concat(d,'><span class="audible">').concat(i,"</span></a>"),m.push({href:n,text:i,isDisabled:d})}var M=$(".btn-previous",this.element),L=$(".btn-next",this.element),z=this.element.width();this.isBulletsNav=z>44*b;var V=!this.isBulletsNav;if(!this.isBulletsNav&&this.settings.hideBulletsOnOverflow)M.length||(f.previous=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(P.translate("Previous"),"</span>\n          </button>")),L.length||(f.next=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(P.translate("Next"),"</span>\n          </button>"));else{var N;null===(N=this.pagerApi)||void 0===N||null==N||N.destroy();var U=$(".controls .btn-controls-previous, .btn-controls-next, .pager-container",this.element);M.add(L).add(U).remove(),this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls").remove(),this.settings.showArrows&&(V=z<44*b+100,f.controlsPrevious=""+'<button class="btn-icon btn-controls-previous" type="button">\n            '.concat($.createIcon("previous-page"),'\n            <span class="audible"> ').concat(P.translate("Previous"),"</span>\n          </button>"),f.controlsNext=""+'<button class="btn-icon btn-controls-next" type="button">\n            '.concat($.createIcon("next-page"),'\n            <span class="audible">').concat(P.translate("Next"),"</span>\n          </button>"))}if(this.activeIndex>0&&this.activeIndex>b-1&&(this.activeIndex=b-1),b>1){var G=!0;f.all='<div class="controls circlepager-controls">',f.previous||f.next?(G=!1,f.all+="".concat(f.bullets,"</div>").concat(f.previous||"").concat(f.next||"")):V?(G=!1,f.all+='<div class="pager-container" data-init="false"></div></div>'):f.all+="".concat(f.controlsPrevious||"").concat(f.bullets).concat(f.controlsNext||"","</div>"),this.element.append(f.all).find("button").button(),G&&this.SetFooterContainment(),this.pagerApi=this.element.find(".pager-container").pager({type:"standalone",dataset:m,pagesize:1,showPageSizeSelector:!1,showPageSelectorInput:!0,footerContainmentClass:"footer-circlepager",footerContainment:this.settings.footerContainment,pageSelectorInputText:this.settings.pageSelectorInputText}).data("pager"),this.setPagerButtonsState()}},SetFooterContainment:function(){var e=this;this.element.closest(".card, .widget").length&&this.settings.footerContainment&&["widget","card"].forEach(function(t){var n=e.element.closest(".".concat(t,"-content"));if(n.length){var i=n.next(".".concat(t,"-footer"));i.find(".circlepager-controls").remove(),i.length||(i=$('<div class="'.concat(t,'-footer footer-circlepager"></div>')).insertAfter(n)),e.element.find(".circlepager-controls").appendTo(i)}})},setPagerButtonsState:function(){if(this.pagerApi){var e={prevAndFirst:this.pagerApi.state.activePage>1,nextAndLast:this.pagerApi.state.activePage<this.pagerApi.state.pages};this.pagerApi.updated({enableFirstButton:e.prevAndFirst,enablePreviousButton:e.prevAndFirst,enableNextButton:e.nextAndLast,enableLastButton:e.nextAndLast,activePage:this.pagerApi.state.activePage})}},isVisibleInContainer:function(e){if(e&&e[0]){var t=e[0].getBoundingClientRect(),n=this.element[0].getBoundingClientRect();return t.left>n.left&&t.left<n.left+n.width&&t.top>n.top&&t.top<n.top+n.height}return-1},updateSlidesToShow:function(e){if(this.isActive)return this.settings.slidesToShow=e||1,this.updated(),this},setResponsiveSlidesToShow:function(){var e=this.element.width();this.resSlidesToShow=this.resSlidesToShow||this.settings.slidesToShow,this.settings.slidesToShow=e<300&&this.settings.slidesToShow>1?1:this.resSlidesToShow},responsiveSlidesToShow:function(e){var t=this;this.isActive&&(this.setResponsiveSlidesToShow(),this.slidesToShow=e||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout(function(){t.createControls(),t.handleEvents(),t.initActiveSlide(),t.showCollapsedView(),t.removeOverflowedControls()},0))},show:function(e){if(this.isActive){this.activeIndex=e=void 0!==e?e:this.activeIndex;var t=this.slides.length,n=e>-1?"".concat(P.isRTL()?100*(t-e-1):0-100*e,"%"):0;this.controlButtons.removeClass("is-active").eq(e).addClass("is-active"),this.container[0].style.left=n,!this.isBulletsNav&&this.settings.hideBulletsOnOverflow?(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(e).find("span").removeClass("audible")):(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(e).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var e,t=this;if(e=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[e].isDisabled)return setTimeout(function(){t.prev()},0),this.activeIndex=e,!1;this.show(e)},next:function(){var e,t=this;if(e=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[e].isDisabled)return setTimeout(function(){t.next()},0),this.activeIndex=e,!1;this.show(e)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var e=0,t=this.slidesJQ.length;e<t;e++)this.slidesJQ[e].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},removeOverflowedControls:function(){var e,t=this.controlButtons.parent(),n=null===(e=t[0])||void 0===e||null==e?void 0:e.nextElementSibling;t.length>1&&n&&n.remove()},addAttributes:function(){for(var e=0,t=this.controlButtons.length;e<t;e++){var n=$(this.controlButtons[e]);_.addAttributes(n,this,this.settings.attributes,"control-".concat(e+1))}},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},setRipple:function(e,t){var n;if(e&&null!==(n=e.classList)&&void 0!==n&&n?.contains("is-ripple")){var i=t&&t.touches?t.touches[0]:t||{},a=e.getBoundingClientRect(),s=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),o=i.clientX?i.clientX-a.left:e.offsetWidth/2,c=i.clientY?i.clientY-a.top:e.offsetHeight/2,d=e.style.cssText,p=e.getAttribute("data-hex"),f=pt.getContrastColor(p),m={ripple:pt.getLuminousColorShade(p,"white"===f?"0.3":"-0.3"),elem:pt.hexToRgba(p,.7)},b=null!==p?"--ripple-background: ".concat(m.ripple,"; background-color: ").concat(m.elem,"; "):"";e.style.cssText="".concat(b,"--s: 0; --o: 1"),e.style.cssText="".concat(b,"--t: 1; --o: 0; --d: ").concat(s,"; --x:").concat(o,"; --y:").concat(c,";"),$(e).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(C){var T;"transform"===(C.propertyName||(null===(T=C.originalEvent)||void 0===T||null==T?void 0:T.propertyName))&&(e.style.cssText=d)})}},unbind:function(){var e,t=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");if(this.controlButtons&&!this.controlButtons.length&&(this.controlButtons=t.find(".control-button")),null===(e=this.pagerApi)||void 0===e||null==e||e.destroy(),$("body").off("resize.circlepager"),this.element.find(".pager-container").off("page.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons){for(var n=0,i=this.controlButtons.length;n<i;n++)$(this.controlButtons[n]).off("click.circlepager");this.controlButtons.off("click.circlepager keydown.circlepager")}return $(".btn-previous, .btn-controls-previous",this.element).add(t.find(".btn-controls-previous")).off("click.circlepager"),$(".btn-next, .btn-controls-next",this.element).add(t.find(".btn-controls-next")).off("click.circlepager"),$(".controls",this.element).remove(),this.element.closest(".card, .widget").find(".footer-circlepager").remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,ml)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function(){var e=this,t=this,n=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");this.controlButtons=$(".control-button",this.element),this.controlButtons.length||(this.controlButtons=n.find(".control-button")),$(".btn-previous, .btn-controls-previous",this.element).add(n.find(".btn-controls-previous")).off("click.circlepager").on("click.circlepager",function(o){e.prev(),o.stopImmediatePropagation()}),$(".btn-next, .btn-controls-next",this.element).add(n.find(".btn-controls-next")).off("click.circlepager").on("click.circlepager",function(o){e.next(),o.stopImmediatePropagation()});for(var i=function(o,c){var d=$(e.controlButtons[o]);d.hideFocus(),d.off("click.circlepager").on("click.circlepager",function(p){p.preventDefault(),e.slides[o].isDisabled||(e.setRipple(d[0],p),e.show(o))})},a=0,s=this.controlButtons.length;a<s;a++)i(a);this.element.off("focus.circlepager","*").on("focus.circlepager","*",function(o){var c=!1;if(!t.isVisibleInContainer($(this)))for(var d=t.element.find(":focusable"),p=0,f=d.length;p<f;p++)if(t.isVisibleInContainer(d.eq(p))){d.eq(p).focus(),c=!0;break}if(o.stopPropagation(),c)return!1}),this.element.off("keydown.circlepager","*").on("keydown.circlepager","*",function(o){var c=!1,d=o.which||o.keyCode||o.charCode||0,p=$(":focusable"),f=p.index(this);if(9===d)if(o.shiftKey){for(var m=f-1;m>=0;m--)if(t.element.has(p.eq(m)).length<1||t.isVisibleInContainer(p.eq(m))){p.eq(m).focus(),c=!0;break}}else t.isVisibleInContainer(p.eq(f+1))||(t.controlButtons.first().focus(),c=!0);if(o.stopPropagation(),c)return!1}),this.controlButtons.off("keydown.circlepager").on("keydown.circlepager",function(o){var c=!1,d=o.which||o.keyCode||o.charCode||0,p=P.isRTL();if(-1!==[37,39].indexOf(d)&&(t.isFocus=!0,o.altKey?37===d&&!p||39===d&&p?t.first():t.last():(!p&&37===d||p&&39===d?t.prev():t.next(),c=!0)),c)return o.preventDefault(),o.stopPropagation(),e.setRipple(o.currentTarget,o),!1}),$("body").off("resize.circlepager").on("resize.circlepager",function(){t.responsiveSlidesToShow()}),t.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",function(){t.responsiveSlidesToShow()}),this.element.find(".pager-container").off("page.circlepager").on("page.circlepager",function(o,c){e.setPagerButtonsState(),e.show(c.activePage-1)})}},$.fn.circlepager=function(e){return this.each(function(){var t=$.data(this,"circlepager");t?t.updated(e):t=$.data(this,"circlepager",new js(this,e))})},$.fn.calendartoolbar=function(e){return this.each(function(){var t=$.data(this,"calendartoolbar");t?t.updated(e):t=$.data(this,"calendartoolbar",new wn(this,e))})};var Kl={breakpoint:"phone-to-tablet",trigger:null,expandedText:P.translate("ShowLess"),collapsedText:P.translate("ShowMore")};function zo(e,t){this.settings=_.mergeSettings(e,t,Kl),this.element=$(e),this.init(),Ga("CompositeForm")}zo.prototype={init:function(){return this.build().handleEvents()},build:function(){var e=this.element[0].classList;e.contains("composite-form")||e.add("composite-form");var t=this.element.find(".expandable-area");return t.length?(this.hasSummary=!0,this.expandableArea=t,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var e=this;function t(){var n=e.expandableAreaAPI.isExpanded();e.setExpanderText(e.settings[n?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),function(n){e.checkResponsive(n)}),this.element.on("updated.".concat("compositeform"),function(){e.updated()}),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),t).on("collapse.".concat("compositeform"),t),this},checkResponsive:function(){var e=this.element[0].classList;it.isBelow(this.settings.breakpoint)?e.add("is-in-responsive-mode"):(e.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(e){if(this.hasSummary&&e instanceof String&&e.length){var t=this.expander.find("span");t||(t=this.expander),t.text(e)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(e){return this.each(function(){var t=$.data(this,"compositeform");t?t.updated(e):t=$.data(this,"compositeform",new zo(this,e))})};var vl={content:null,initializeContent:!0,title:"Contextual Action Panel",cssClass:null,modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,title:void 0,trigger:"click",useFlexToolbar:!1}},wr=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function xr(e){var t={showCloseButton:"showCloseBtn"};return wr.forEach(function(n){if(-1===[null,void 0].indexOf(e[n])){var i=n;e.modalSettings||(e.modalSettings={}),t[n]?e.modalSettings[i=t[n]]=e[n]:e.modalSettings[n]=e[n],delete e[n],ei("settings.modalSettings.".concat(i),"settings.".concat(n))}}),e}function ls(e,t){this.settings=_.mergeSettings(e,t,vl),this.settings=xr(this.settings),this.element=$(e),this.init()}ls.prototype={get modalAPI(){var e;return this.panel&&this.panel.length&&(e=this.panel.data("modal")),e},get toolbarAPI(){var e;return this.toolbar&&this.toolbar.length&&(e=this.toolbar[0].classList.contains("flex-toolbar")?this.toolbar.data("toolbar-flex"):this.toolbar.data("toolbar")),e},get buttonsetAPI(){var e=_.getArrayFromList(this.panel[0].querySelectorAll(".buttonset"));return $(e[0]).data("buttonset")},init:function(){this.setup().build().handleEvents()},setup:function(){var e,t=this.element.next(".contextual-action-panel");return"string"==typeof dataModal&&(e=$("#".concat(this.id))).length&&(t=e),1===this.element.closest(".popupmenu").length&&(t=this.element.closest(".popupmenu").next(".contextual-action-panel")),t[0]&&(t[0].style.display="none",t.addClass("is-animating"),this.panel=t),this},build:function(){var e,t,n,i,a=this,s=this.settings.content;if(this.id=(null===(e=this.settings)||void 0===e||null===(t=e?.modalSettings)||void 0===t||null==t?void 0:t.id)||(null==s||null==s?void 0:s.attr("id"))||_.uniqueId(this.element,"contextual-action-modal"),null!==(n=this.settings)&&void 0!==n&&null!==(i=n?.modalSettings)&&void 0!==i&&i?.id||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(s instanceof jQuery){if(s.is(".contextual-action-panel")?this.panel=s:(s.wrap('<div class="contextual-action-panel"></div>'),this.panel=s.parent()),this.panel.addClass("modal").appendTo("body"),s.is("iframe"))return s.ready(function(){a.completeBuild(),s.show()}),a;s.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(s,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.settings.modalSettings.cssClass&&this.panel.addClass("".concat(this.settings.modalSettings.cssClass)),this.completeBuild(),this},completeBuild:function(){var e,t,n=!1,i=!1,a=!0;this.title=this.settings.modalSettings.title?this.settings.modalSettings.title:this.settings.title,this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((e=this.panel.children()).is("iframe")&&(t=e.contents(),this.toolbar=t.find(".toolbar, .flex-toolbar"),n=!0),n||(e.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var s=this.panel.find(".modal-header");0===s.length&&(s=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=s;var o=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset").first();if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar").first()),!this.toolbar.length)if(a=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach(function(U){"input"===U.type&&(i=!0)}),this.settings.title&&this.settings.modalSettings.centerTitle||this.settings.modalSettings.title&&this.settings.modalSettings.centerTitle){var c=i?'<div class="toolbar-section search"></div>':"",d='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.title,"</h2>\n          </div>\n          ").concat(c,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(d)}else if(!o.length){var p=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",f=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.title,"</h2></div>"):"",b='<div class="'.concat(this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",'"></div>'),C=this.settings.modalSettings.useFlexToolbar&&i?'<div class="toolbar-section search"></div>':"",T='<div class="'.concat(p,'">\n          ').concat(f,"\n          ").concat(C,"\n          ").concat(b,"\n        </div>"),S=$(T);S.appendTo(this.panel.find(".modal-header")),this.toolbar=S,o=S.children(".buttonset")}if(this.toolbar.appendTo(this.header),!a){o&&(o.length||this.settings.modalSettings.centerTitle)||(o=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var M=this.toolbar.find(".title");M.length||(M=$('\n          <div class="toolbar-section title'.concat(this.settings.modalSettings.centerTitle?" center-text":"",'">\n            <h2>').concat(this.title,"</h2>\n          </div>\n        ")),o?M.insertBefore(o):this.toolbar.prepend(M)),M.length||(M=$('\n          <div class="title">\n            '.concat(this.title,"\n          </div>\n        ")),this.toolbar.prepend(M))}if(n||this.panel.detach().appendTo("body"),this.element.attr("data-modal")||this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var z=P.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(z,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(z,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var V=$('<div class="toolbar-section static"></div>').append(this.closeButton),N=this.toolbar.find(".toolbar-section.more");V.insertAfter(N.length?N:o)}else o.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),_.fixSVGIcons(this.element),this},handleEvents:function(){var e=this,t=this;function n(i){t.element.triggerHandler(i.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",function(i){n(i),t.panel.removeClass("is-animating")}).off("close.contextualactionpanel").on("close.contextualactionpanel",function(i){n(i)}).off("beforeclose.contextualactionpanel").on("beforeclose.contextualactionpanel",function(i){n(i)}).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",function(i){t.settings.initializeContent&&$(e).initialize(),n(i)}).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",function(){if(t.toolbar&&t.toolbar.trigger("recalculate-buttons"),t.toolbar.length){var i=t.toolbar.find(".buttonset > .is-selected");if(i.length||(i=t.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(i=i.children(".searchfield")),!i.length&&t.toolbar.is(".flex-toolbar"))return void(i=t.toolbar.find("button").first()).focus();var a=t.toolbar.data("toolbar");a&&a.setActiveButton(i,!0)}t.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),_.fixSVGIcons(t.panel)}),t.closeButton&&t.closeButton.length&&t.closeButton.on("click.contextualactionpanel",function(){t.handleToolbarSelected()}),this},handleToolbarSelected:function(){this.close(!0)},teardown:function(){var e=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeclose.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),e.children("*:not(.searchfield)").off("click.contextualactionpanel"),e.children(".btn-menu").each(function(){var t=$(this).data("popupmenu");t&&t.destroy()}),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"immediate"===this.settings.modalSettings.trigger&&(e=!0),this.modalAPI&&this.modalAPI.close(e,!1,t)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this.settings=xr(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel"),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){qi.destroyAll(!0)}},$.fn.contextualactionpanel=function(e){return this.each(function(){var t,n,i=null==e||null===(t=e?.modalSettings)||void 0===t||null==t?void 0:t.id;!i&&null!=e&&e?.content&&(null==e||null==e?void 0:e.content)instanceof jQuery&&(i=null==e||null===(n=e?.content)||void 0===n||null==n?void 0:n.attr("id"));var a=qi.findById(i);a?a.updated(e):$.data(this,"contextualactionpanel",new ls(this,e))})};var Qi=["standard","range"],vi=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:Qi[0],roundToInterval:!0,parentElement:null,returnFocus:!0,attributes:null,tabbable:!0,hourRange:[0,24]}};function cs(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,vi),this.init()}cs.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=P.getLocale(this.settings.language),n=P.getLocale(this.settings.locale);return $.when(n,t).done(function(i,a){e.locale=P.cultures[i]||P.currentLocale,e.language=a||e.settings.language||e.locale.language||null,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents().addAttributes()}),this},setCurrentCalendar:function(){return this.currentCalendar=P.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function e(i,a){(!a||["minute","second"].indexOf(a)<0)&&(a="minute");var s=vi()["".concat(a,"Interval")];if(void 0===i||isNaN(i))return s;var o=parseInt(i,10);return o>0&&o<60?o:s}function t(i){return!0===i}var n,i;return this.id="".concat(_.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=t(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=e(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(n=24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat)&&n.toUpperCase().match("H")&&n.match("mm")?n:vi().timeFormat,this.settings.minuteInterval=e(this.settings.minuteInterval,"minute"),this.settings.secondInterval=e(this.settings.secondInterval,"second"),this.settings.mode=(i=this.settings.mode,$.inArray(i,["standard","range"])>-1?i:vi().mode),this.settings.roundToInterval=t(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){if(this.setup(),this.element.attr("autocomplete","off"),this.settings.parentElement)return this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this;var e=this.element.next();return this.trigger=e.is("button.trigger")?e:$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon("clock"),"\n      </button>")).insertAfter(this.element),this.element.is(":disabled")&&this.disable(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.addAria().addMask().handleEvents().roundMinutes(),this},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(P.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>"));var e=P.translate("TimepickerTriggerButton");return this.trigger.children("span.audible").text(e),this},addAttributes:function(){_.addAttributes(this.element,this,this.settings.attributes),_.addAttributes(this.trigger,this,this.settings.attributes,"trigger")},handleKeys:function(){var e=this;this.element.on("keydown.timepicker",function(t){var n=!1;return 27===t.which&&e.isOpen()&&(n=!0,e.closeTimePopup()),40!==t.which||e.isOpen()||(n=!0,e.openTimePopup()),!n||(t.stopPropagation(),t.preventDefault(),!1)})},handleBlur:function(){var e=this;this.element.on("blur.timepicker",function(){e.roundMinutes(),setTimeout(function(){e.isOpen()&&0===e.popup.find(":focus").length&&e.closeTimePopup()},20)})},is24HourFormat:function(e){return e||(e=this.settings.timeFormat),!!e&&(e.match("H")||[]).length>0},hourText:function(e){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&e<10?"0":"")+e},hasSeconds:function(e){return e||(e=this.settings.timeFormat),(e.match("ss")||[]).length>0},hasDayPeriods:function(e){return e||(e=this.settings.timeFormat),(e.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(at.toBoolean(this.settings.roundToInterval)){var e=this.element.val(),t=this.getTimeSeparator(),n=e?e.split(t):[],i=this.settings.minuteInterval;if(n[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var a=n[1].split(" ");n[1]=a[0],a[1]&&n.push(a[1])}if(n[1]=parseInt(n[1],10),n[1]%i!=0){n[1]=Math.round(n[1]/i)*i,n[1]=n[1].toString(),n[1]=(n[1].length<2?"0":"")+n[1],"60"===n[1]&&(n[1]="00",n[0]=(parseInt(n[0],10)+1).toString());var s="".concat(n[0]+t+n[1]," ").concat(n[2]?n[2]:"");this.element.val(s)}}}},addMask:function(){this.element.data("mask")&&"object"===Ge(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var e={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),e&&this.element.mask(e),this},getMaxHourRange:function(e,t,n){return t?"AM"===(n||e.period)?this.settings.hourRange[1]>12?12:this.settings.hourRange[1]:this.settings.hourRange[1]>12?this.settings.hourRange[1]-12:12:this.settings.hourRange[1]},buildStandardPopup:function(){var e,t=this,n=$('<div class="timepicker-popup-content"></div>'),i=this.getTimeSeparator(),a="";this.initValues=t.getTimeFromField();var s=$('<div class="time-parts"></div>').appendTo(n),o=this.is24HourFormat(),c=this.hasSeconds(),d=this.hasDayPeriods(),p=o?0:1,f=o?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));p<f&&(e="",!(p>t.getMaxHourRange(this.initValues,d)));)parseInt(t.initValues.hours,10)===p&&(e=" selected"),t.hourSelect.append($("<option".concat(e,">").concat(t.hourText(p),"</option>"))),p++;var m=$('<div class="time-part"></div>');m.append($('<label for="'.concat(this.hoursId,'">').concat(P.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),m.append(this.hourSelect),m.append($('<span class="label colons">'.concat(i,"</span>"))),s.append(m);var b=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));b<=59;)a=b<10?"0".concat(b):b,e="",parseInt(t.initValues.minutes,10)===b&&(e=" selected"),t.minuteSelect.append($("<option".concat(e,">").concat(a,"</option>"))),b+=t.settings.minuteInterval;this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(t.initValues.minutes,"</option>")));var C=$('<div class="time-part"></div>');if(C.append($('<label for="'.concat(this.minutesId,'">').concat(P.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),C.append(this.minuteSelect),c&&C.append($('<span class="label colons">'.concat(i,"</span>"))),s.append(C),c){var T=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));T<=59;)a=T<10?"0".concat(T):T,e="",(parseInt(t.initValues.seconds,10)===T||!t.initValues.seconds&&"00"===a)&&(e=" selected"),this.secondSelect.append($("<option".concat(e,">").concat(a,"</option>"))),T+=t.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(t.initValues.seconds,"</option>")));var S=$('<div class="time-part"></div>');S.append($('<label for="'.concat(this.secondsId,'">').concat(P.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),S.append(this.secondSelect),s.append(S)}if(!o&&d){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),s.append($('<span class="label colons"></span>'));for(var M=this.currentCalendar.dayPeriods,L=0,z=new RegExp(t.initValues.period,"i");L<2;)e="",z.test(M[L])&&(e=" selected"),this.periodSelect.append($('<option value="'.concat(M[L],'"').concat(e,">").concat(M[L],"</option>"))),L++;var V=$('<div class="time-part"></div>');V.append($('<label for="'.concat(this.periodId,'">').concat(P.translate("Period",{locale:this.locale.name,language:this.language}),"</label>"))),V.append(this.periodSelect),s.append(V)}if(this.settings.parentElement)this.settings.parentElement.append(n),t.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{n.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(P.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var N=this.element,U=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(U="center",N=this.element.next(".icon, .trigger")),this.trigger.popover({content:n,trigger:"immediate",placement:"bottom",placementOpts:{parent:N,parentXAlignment:U,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",function(G,Z){t.afterShow(Z)}).on("hide.timepicker",function(){t.settings.returnFocus&&t.element.focus()})}this.trigger.data("popover")&&(t.popup=this.trigger.data("popover").tooltip,t.popup.addClass("timepicker-popup"))},afterShow:function(e){var t=this;e.find("button").button();var n=this.hourSelect.data("dropdown");this.hourSelect.val(this.initValues.hours),n.pseudoElem.find("span").text(this.initValues.hours),n.renderPseudoElemLabel(),_.addAttributes(n.wrapper.find(".dropdown"),this,this.settings.attributes,"hours");var i=this.minuteSelect.data("dropdown");if(this.minuteSelect.val(this.initValues.minutes),i.pseudoElem.find("span").text(this.initValues.minutes),i.renderPseudoElemLabel(),_.addAttributes(i.wrapper.find(".dropdown"),this,this.settings.attributes,"minutes"),this.secondSelect){var a=this.secondSelect.data("dropdown");this.secondSelect.val(this.initValues.seconds),a.pseudoElem.find("span").text(this.initValues.seconds),a.renderPseudoElemLabel(),_.addAttributes(a.wrapper.find(".dropdown"),this,this.settings.attributes,"seconds")}if(t.hasDayPeriods()){var s=this.periodSelect.data("dropdown");this.periodSelect.val(this.initValues.period),s.pseudoElem.find("span").text(this.initValues.period),s.renderPseudoElemLabel(),_.addAttributes(s.wrapper.find(".dropdown"),this,this.settings.attributes,"period")}e.find("div.dropdown").first().focus(),e.find(".set-time").off("click.timepicker").on("click.timepicker",function(o){o.preventDefault(),t.setTimeOnField(),t.closeTimePopup()}),_.addAttributes(e.find(".set-time"),this,this.settings.attributes,"btn"),this.settings.parentElement||e.on("keydown.timepicker","button, div.dropdown",function(o){return 9!==(o.keyCode||o.charCode||0)||(t.containFocus(o),o.stopPropagation(),o.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,n=this.popup.find(":focusable"),i=n.index($(":focus"));n.eq(i=t?i-1<0?n.length:i-1:i+1>=n.length?0:i+1).focus()},setupStandardEvents:function(){var e=this;e.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",function(t){t.preventDefault(),t.target.click()}).on("keydown.timepicker","input.dropdown",function(t){var n=!1;if(27===t.which&&(n=!0,e.closeTimePopup(),e.element.focus()),32===t.which&&(n=!0,e.popup.find(".set-time").click()),37===t.which||39===t.which){n=!0;var i=e.popup.find('input[id$="-shdo"]');if(37===t.which){var a=i.eq(i.index(this)-1);a&&0!==a.length||(a=i.eq(i.length)),a.focus()}if(39===t.which){var s=i.eq(i.index(this)+1);s&&0!==s.length||(s=i.eq(0)),s.focus()}}return!n||(t.preventDefault(),t.stopPropagation(),!1)}),e.trigger.on("hide.timepicker",function(){e.onPopupHide()})},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(e){var t,n,i=this,a=e||this.element.val(),s=this.getTimeSeparator(),o={},c=this.settings.timeFormat,d=!!this.dayPeriods.filter(function(M){return M.indexOf(".")>-1}).length&&a.indexOf(".")>-1&&c.indexOf("a")>-1&&c.indexOf("ah")<0&&!this.is24HourFormat();(a=a.replace(d?/[T\s:-]/g:/[T\s:.-]/g,s).replace(/z/i,"")).indexOf(s)<0&&4===a.length&&"HHmm"===i.settings.timeFormat&&(a="".concat(a.substr(0,2)).concat(s).concat(a.substr(2))),t=(a=a.replace("\u5348","\u5348".concat(s))).split(s);var p="ah"===c.slice(0,2)&&!$(".datepicker").length>0,f=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),m=-1!==f&&f<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");this.is24HourFormat()||!m||p||(t=[t[1],t[2],t[0]]);var b,C=this.currentCalendar.dayPeriods;function T(M){return M.replace(/^\s+|\s+$/g,"")}function S(M){return!M||isNaN(M)?"00":M=(M=parseInt(M,10))<10?"0".concat(M):M}return t[2]&&(C[0].indexOf(".")>-1||C[1].indexOf(".")>-1)&&(C[0].replace(".","")===t[2]&&(t[2]=C[0]),C[1].replace(".","")===t[2]&&(t[2]=C[1])),this.is24HourFormat()||m||(n=t[t.length-1].split(" "),t.pop(),t=t.concat(n)),t[0]&&t[0].length&&!isNaN(t[0])||(t[0]="1"),t[0]=parseInt(t[0],10),isNaN(t[0])||(t[0]="".concat(parseInt(t[0],10))),o.hours=i.hourText(t[0]),t[1]?(t[1]=T(t[1]),t[1]=S(t[1]),o.minutes=t[1]):o.minutes="00",(b=t[2])?(b=T(b),i.hasSeconds()?(b=S(b),o.seconds=b):(i.dayPeriods.indexOf(b)>-1||(b=i.translateDayPeriod("AM")),o.period=b)):(i.hasSeconds()&&(o.seconds=b="00"),i.is24HourFormat()||(b=i.translateDayPeriod("AM"),o.period=b)),t[3]?(t[3]=T(t[3]),o.period=t[3]):!this.is24HourFormat()&&this.hasSeconds()&&(o.period=this.translateDayPeriod("AM")),o},getTimeFromField2:function(e){function t(f){return!f||isNaN(f)?"00":f=(f=parseInt(f,10))<10?"0".concat(f):f}var n=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,i=this.hasSeconds()?"timestamp":"hour",a=P.parseDate(e||this.element.val(),{date:i}),s=(a?a.getHours():"1").toString(),o=this.translateDayPeriod(s>=12?"PM":"AM").toString();!this.is24HourFormat()&&s>12&&(s=(parseInt(s,10)-12).toString()),this.is24HourFormat()||"0"!==s||(s="12");var c=n.indexOf("a")>-1?o:void 0,d=a?a.getMinutes():"00",p=a?a.getSeconds():"00";return{hours:t(s),minutes:t(d),seconds:t(p),period:c}},translateDayPeriod:function(e){return/am|pm|AM|PM/i.test(e)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(e)?0:1]:e},setTimeOnField:function(){var e,t,n,i,a=this.hourSelect?null===(e=this.hourSelect[0])||void 0===e||null==e?void 0:e.value:"",s=this.minuteSelect?null===(t=this.minuteSelect[0])||void 0===t||null==t?void 0:t.value:"",o=this.secondSelect?null===(n=this.secondSelect[0])||void 0===n||null==n?void 0:n.value:"",c=this.periodSelect?null===(i=this.periodSelect[0])||void 0===i||null==i?void 0:i.value:"",d=this.getTimeSeparator(),p="".concat(a).concat(d).concat(s).concat(this.hasSeconds()?d+o:"");(p+=(c=this.is24HourFormat()||""!==c?c:document.querySelector("#".concat(this.periodId,"-shdo")).value)?" ".concat(this.translateDayPeriod(c)):"").indexOf(d)>-1&&"HHmm"===this.settings.timeFormat&&(p=p.replace(d,"")),this.element.val(p).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){var e=this,t=this;t.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&t.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===t.settings.mode?(t.buildRangePopup(),t.setupRangeEvents()):(t.buildStandardPopup(),t.setupStandardEvents()),this.trigger.data("popover")&&this.element.attr("aria-expanded","true"),this.popup.find("div.dropdown").first().focus(),setTimeout(function(){$("select.period.dropdown").on("change",function(n){var i,a=$(n.target).find(":checked").val();e.initValues=t.getTimeFromField();var s=e.is24HourFormat(),o=s?0:1,c=s?24:13,d=$("select.hours.dropdown"),p=d.siblings(".dropdown-wrapper").find(".dropdown").children("span").text();p.indexOf("Hours")>-1&&(p=p.split(" ")[1]),d.empty();for(var f=t.getMaxHourRange(e.initValues,e.hasDayPeriods(),a);o<c&&!(o>f);)i="",parseInt(p,10)===o&&(i=" selected"),d.append($("<option".concat(i,">").concat(t.hourText(o),"</option>"))),o++;p>f&&(p=1),$("select.hours.dropdown").siblings(".dropdown-wrapper").find(".dropdown").children("span").html(p)})},10))},closeTimePopup:function(){this.trigger.data("popover")&&(this.trigger.data("popover").hide(),this.element.attr("aria-expanded","false"))},onPopupHide:function(){if("standard"===this.settings.mode){var e=this.hourSelect,t=this.minuteSelect,n=this.secondSelect,i=this.periodSelect;e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),this.hasSeconds()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.hasDayPeriods()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("popover").destroy(),this.trigger.data("popover",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(e){var t=this.element.val();if(!e||!1===e)return t;var i=new RegExp(this.currentCalendar.dateFormat.timeSeparator,"g"),a=(t=t.replace(i,"")).split(" ");return a[0].length<4&&(t="0".concat(a[0]).concat(a[1]?a[1]:"")),t},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker click.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var e=this.element.data("mask");return e&&"function"==typeof e.destroy&&e.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function(){var e=this;return this.trigger.off("click.timepicker").on("click.timepicker",function(){e.toggleTimePopup()}),this.label&&this.label.off("click.timepicker").on("click.timepicker",function(){e.element[0].focus()}),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(e){return this.each(function(){var t=$.data(this,"timepicker");t?t.updated(e):t=$.data(this,"timepicker",new cs(this,e))})};var Ni=new function(){var e=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,n){return!(!("placeholder"in document.createElement("input"))&&n&&(t===n.attr("placeholder")||t===P.translate("Required")))&&("string"==typeof t?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),0!==$.trim(t).length):"number"==typeof t?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var n=t.attr("name");return n&&n.length&&$('input[name="'.concat(n,'"]:radio:checked')).length},check:function(t,n){return this.message=P.translate("Required"),!(!$(n).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(n.is(":radio")?this.isRadioChecked(n):this.isNotEmpty(t,n))},message:"Required",type:"error",id:"required"},date:{check:function(t,n,i){if(this.message=P.translate("InvalidDate"),i&&i.column){var a=i.column.formatter(i.row,i.cell,t,i.column,!0);if(a instanceof Date)return a&&a.getTime&&!isNaN(a.getTime())}if(t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var s=t.indexOf(":")>-1?P.calendar().dateFormat.datetime:P.calendar().dateFormat.short,o=null;if(n&&n.data("datepicker")&&((o=n.data("datepicker")).settings.showTime&&(this.message=P.translate("InvalidDateTime")),s=o.pattern),i&&i.column){var c=i.column;"string"==typeof c.sourceFormat?s=i.column.sourceFormat:"string"==typeof c.dateFormat&&(s=i.column.dateFormat)}var d=!("MMMM"===s||"MMM"===s||"MM"===s||"MMMM d"===s||"d MMMM"===s||"yyyy"===s);return o&&(s={locale:o.locale.name,pattern:s,calendarName:o.currentCalendar.name}),!(void 0===P.parseDate(t,s,d)&&""!==t)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(t,n,i){this.message=P.translate("UnavailableDate");var a=!0;if(""===t)return a;if(!e.rules.date.check(t,n))return a=!1,this.message="",a;var s=n.data("datepicker"),o=s?s.settings:{};if(i&&i.column){var c=i.column.formatter(i.row,i.cell,t,i.column,!0);c instanceof Date&&(t=c),i.column.editorOptions&&(o=i.column.editorOptions)}if(!o||!o.disable)return!0;var d,p,f,m,b=Object.keys(o.disable).length>0,C=t;if("string"==typeof C){var T="locale"!==o.dateFormat?o.dateFormat:P.calendar().dateFormat.short;if(o.showTime){var S=o.timeFormat||P.calendar().timeFormat;T.indexOf(S)<0&&(T+=" ".concat(S))}if(s&&s.isIslamic&&(T={pattern:s.pattern,locale:s.locale.name}),i&&i.column){var M=i.column;M.sourceFormat?T="string"==typeof M.sourceFormat?{pattern:M.sourceFormat}:M.sourceFormat:M.dateFormat&&(T="string"==typeof M.dateFormat?{pattern:M.dateFormat}:M.dateFormat)}C=P.parseDate(C,T)}s&&s.isIslamic&&C instanceof Date&&(C=P.umalquraToGregorian(C.getFullYear(),C.getMonth(),C.getDate()));var L=o.useUTC?P.dateToUTC(C):C;if(L&&b&&"function"==typeof o.disable.callback)return!o.disable.callback(L.getFullYear(),L.getMonth(),L.getDate());if(L instanceof Array)return a;if(L&&b){f=o.useUTC?P.dateToUTC(new Date(o.disable.minDate)).setHours(0,0,0,0):new Date(o.disable.minDate).setHours(0,0,0,0),m=o.useUTC?P.dateToUTC(new Date(o.disable.maxDate)).setHours(0,0,0,0):new Date(o.disable.maxDate).setHours(0,0,0,0),o.disable.dayOfWeek&&-1!==o.disable.dayOfWeek.indexOf(L.getDay())&&(a=!1);var z=L.getFullYear();if(((L=L.setHours(0,0,0,0))<=f||L>=m)&&(a=!1),/string|number/.test(Ge(o.disable.years))&&(o.disable.years=[o.disable.years]),o.disable.years)for(var V=0,N=o.disable.years.length;V<N;V++)if(z===Number(o.disable.years[V])){a=!1;break}if(o.disable.dates)for(o.disable.dates.length&&"string"==typeof o.disable.dates&&(o.disable.dates=[o.disable.dates]),d=0,p=o.disable.dates.length;d<p;d++)if(L===(o.useUTC?P.dateToUTC(o.disable.dates[d]):new Date(o.disable.dates[d])).setHours(0,0,0,0)){a=!1;break}}return b&&(a=!!(a&&!o.disable.isEnable||!a&&o.disable.isEnable)),a},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(t,n){var i=this;this.message=P.translate("rangeDate");var a=!0,s=n.data("datepicker");if(s){var c=t.split(s.settings.range.separator),d=function(f,m){n.val(m),i.message="".concat(e.rules[f].message," (").concat(m,")"),e.rules[f].check(m,n)||(a=!1)};if(t.indexOf(s.pattern)>-1){if(1===c.length)d("date",c[0]);else if(2===c.length){var p=c[0]===s.pattern?1:0;d("date",c[p]),a&&d("availableDate",c[p])}}else 1===c.length?(d("date",c[0]),a&&d("availableDate",c[0])):2===c.length&&(d("date",c[0]),a&&d("date",c[1]),a&&d("availableDate",c[0]),a&&d("availableDate",c[1]))}return n.val(t),a},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){return this.message=P.translate("EmailValidation"),!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(t,n){var i=n.closest(".signin").find('button[type="submit"]');return t.length&&(e.rules.email.check(t)||e.rules.passwordConfirm.check(t,n))?i.enable():i.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(t,n){if($.trim(t).length&&!n.is("[readonly]")){e.rules.emailPositive.positive=!0,this.message=P.translate("EmailValidation");var i=e.rules.email.check(t,n);return i&&(this.message=""),i}return e.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){return this.message=P.translate("PasswordValidation"),!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(t,n){this.message=P.translate("PasswordConfirmValidation");var i=$('input[type="password"]:not('.concat(n.attr("id"),")"),n.closest(".signin")).eq(0).val(),a=t===i&&e.rules.passwordReq.check(i);return!t.length||a},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,n){t=t.replace(/ /g,""),this.message=P.translate("InvalidTime");var i=n&&n.data("timepicker"),a=i?n.data("timepicker").settings:{},s=a&&a.timeFormat?a.timeFormat:P.calendar().timeFormat;if(n.attr("data-options")&&a&&!a.timeFormat){var o=JSON.parse(n.attr("data-options"));o.patternOptions&&o.patternOptions.format&&(s=o.patternOptions.format)}var c,d=(s.match("HH")||s.match("H")||[]).length>0,p=d?24:12,f=t.indexOf(P.calendar().dateFormat.timeSeparator),m=0,b=0,C=0;if(""===t)return!0;if(m=parseInt(t.substring(0,f),10),b=parseInt(t.substring(f+1,f+3),10),i&&(m=(c=i.getTimeFromField()).hours,b=c.minutes,i.hasSeconds()&&(C=c.seconds)),m.toString().length<1||isNaN(m)||parseInt(m,10)<0||parseInt(m,10)>p||b.toString().length<1||isNaN(b)||parseInt(b,10)<0||parseInt(b,10)>59||C.toString().length<1||isNaN(C)||parseInt(C,10)<0||parseInt(C,10)>59)return!1;if(!d){if(parseInt(m,10)<1)return!1;var T=new RegExp(P.calendar().dayPeriods[0],"i"),S=new RegExp(P.calendar().dayPeriods[1],"i");if(0===(t.match(T)||t.match(S)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return"1"===t},message:"Value is not valid (test).",type:"error",id:"test"}}},Jr={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Ws(e,t){this.element=$(e),this.settings=_.mergeSettings(e,t,Jr),this.init()}Ws.prototype={init:function(){this.show()},show:function(){var e=this,t=this.settings,n=parseFloat(Aa.convertDelayToFPS(t.timeout)),i=t.allowLink?$e.stripTags(t.message,"<a><br><p>"):$e.stripHTML(t.message),a=!1,s=100;this.uniqueId=t.uniqueid?this.generateUniqueId("usersettings-position"):"";var o=$("#toast-container".concat(this.uniqueId)),c=$('\n      <div class="toast">\n        <span aria-relevant="additions text" aria-live="polite">\n          <span class="toast-title">'.concat($e.stripHTML(t.title),'</span>\n          <span class="toast-message">').concat(i,"</span>\n        </span>\n      </div>")),d=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(P.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(P.translate("Close"),"</span>\n      </button>\n    ")),p=$('<div class="toast-progress"></div>');o.length||(o=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container"></div>')).appendTo("body")),o.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(t.position.replace(" ","-"))),t.timeout=t.audibleOnly?100:t.timeout,t.progressBar&&c.append(p),o.append(c),c.addClass(t.audibleOnly?"audible":"effect-scale"),c.append(d),e.createDraggable(c,o);var f=o.children().length;this.toastIndex=f;for(var m=0,b=this.element.find(".toast-container").children();m<b.length;m++)f=b.length;_.addAttributes(c,this,this.settings.attributes),_.addAttributes(c.find("button"),this,this.settings.attributes,"btn-close");var C=new nn({duration:Aa.convertDelayToFPS(t.timeout),timeoutCallback:function(){e.remove(c,f)},updateCallback:function(S){s=(S.duration-S.elapsedTime)/n*100,P.isRTL()&&(s=100-s),t.progressBar&&(p[0].style.width="".concat(s,"%"))}});function T(S){C.destroy(!0),e.remove(S,f)}dt.register(C),$(document).on("keydown.toast-".concat(f," keyup.toast-").concat(f),function(S){var M=(S=S||window.event).which||S.keyCode;S.ctrlKey&&80===M&&C[(a="keydown"===S.type)?"pause":"resume"](),"keydown"===S.type&&27===M&&(S.stopImmediatePropagation(),S.preventDefault(),T(c))}),c.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",function(S){a=!!/mousedown|touchstart/i.test(S.type),C[a?"pause":"resume"]()}),d.on("click.toast",function(){T(c)})},createDraggable:function(e,t){var n=this;if(this.settings.draggable&&e[0]&&t[0]){var i=Ie.features.touch,a=t.parent();t.css({top:"",left:"",right:""});var s=t[0].getBoundingClientRect(),o=this.restorePosition(),c=s;o&&((c={top:o.top,left:o.left,width:e.outerWidth(),height:e.outerHeight()}).right=c.left+c.width,c.bottom=c.top+c.height,this.isPosInViewport(c)||(c=s));var d={top:"".concat(c.top,"px"),left:"".concat(c.left,"px")};t.is(".toast-bottom-right, .toast-top-right")&&(d.right="auto"),t.css(d),t.addClass("is-draggable"),e.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",function(b){i||b.preventDefault(),$(b.target).is("a, .btn-close")||t.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",function(){b.stopImmediatePropagation(),t.attr("aria-grabbed","true"),a.attr("aria-dropeffect","move")}).off("dragend.toast").on("dragend.toast",function(){t.removeAttr("aria-grabbed"),a.removeAttr("aria-dropeffect"),n.savePosition({left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))});var C=t.data("drag");C&&"function"==typeof C.destroy&&C.destroy()})});var p=function(b){var M=b.dragApi.getElementsFromPoint(b.x,b.y)[0];return!$(M).closest(".toast").length},f=function(b){var C=$.Event("keyup");$.extend(C,{ctrlKey:!0,altKey:!0,keyCode:80}),b.trigger(C)},m=$(document);m.off("mouseup.toast").on("mouseup.toast",function(b){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var C=t.data("drag");C&&"function"==typeof C.getElementsFromPoint&&p({dragApi:C,x:b.pageX,y:b.pageY})&&f(m)}}).off("touchend.toast").on("touchend.toast",function(b){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var C=t.data("drag");if(C&&"function"==typeof C.getElementsFromPoint){var T=b.originalEvent;if(T.targetTouches.length>1)return;var S=T.changedTouches[0];p({dragApi:C,x:S.pageX,y:S.pageY})&&f(m)}}})}},savePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(e)&&(localStorage[this.uniqueId]=JSON.stringify(e),this.element.triggerHandler("settingschanged",[e]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var e=localStorage[this.uniqueId];return e?JSON.parse(e):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},generateUniqueId:function(e){return e=e??"","toast-".concat(this.settings.uniqueid||"","-").concat(e).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(e){return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(e,t){return e.closest(".toast-container").off("dragstart.toast dragend.toast"),e.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),e.find(".btn-close").off("click.toast"),void 0!==t&&$(document).off(["keydown.toast-".concat(t),"keyup.toast-".concat(t)].join(" ")),this},remove:function(e,t){var n=this,i=function(){e.remove(),!$("#toast-container".concat(n.uniqueId," .toast")).length&&n.destroy()};if(this.unbind(e,t),this.settings.audibleOnly)i();else{e.attr("aria-live","").attr("aria-relevent","").hide(),e.addClass("effect-scale-hide");var a=new nn({duration:20,updateCallback:function(){},timeoutCallback:function(){i()}});dt.register(a)}},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,Jr)),this.show()},destroy:function(){var e=this,t=$("#toast-container".concat(this.uniqueId));t[0]&&[].slice.call(t[0].querySelectorAll(".toast")).forEach(function(n){e.settings.audibleOnly=!0,e.remove($(n))}),$(document).off(["mouseup.toast","touchend.toast"].join(" ")),t.remove(),delete this.toastIndex,delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(e){return this.each(function(){var t=$.data(this,"toast");t?t.updated(e):t=$.data(this,"toast",new Ws(this,e))})};var ln={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function ra(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,ln),this.init()}ra.prototype={init:function(){this.fields="input[data-validate], input[data-validation], textarea[data-validate], textarea[data-validation], select[data-validate], select[data-validation], div[data-validate], div[data-validation]",this.isPlaceholderSupport="placeholder"in document.createElement("input"),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(e){if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===Ge(e)){var t="";for(var n in e)-1===t.indexOf(e[n])&&(t+="".concat(e[n]," "));e=t=t.split(" ").join(".validate ")}return e},filterValidations:function(e,t){var n=[];if(!e)return[];if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===Ge(e))for(var i in e)t&&e[i].indexOf(t)>-1&&n.push(i);return n},setErrorIconOpacity:function(e){if(e.is(":text")&&e.is('[data-error-type="tooltip"]')){var t=this.calculateTextWidth(e.val()),n=e.outerWidth()-35;e.closest(".field, .field-short").find(".icon-error")[t>n?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");return n.font=t||"14px arial",n.measureText(e).width},attachEvents:function(){var e=this,t="[data-validate],[data-validation]";this.inputs.each(function(){var i=$(this),a=i.attr("data-validate")||i.attr("data-validation");a&&a.indexOf("required")>-1&&i.addClass("required")}),this.inputs.filter("input, textarea, div").filter(t).not("input[type=file]").each(function(){var i=$(this),a=i.attr("data-validation-events"),s=e.extractEvents(a||"blur.validate change.validate keyup.validate");s.indexOf("enter.validate")>-1&&i.off("keypress.enter.validate").on("keypress.enter.validate",function(o){var c=$(this);13===o.which&&e.validate(c,!0,o)}),i.off(s).on(s,function(o){if("keyup"===o.type){if(9===o.keyCode)return;e.setErrorIconOpacity(i)}var c=$(this),d=c.data("handleEvent".concat([o.type||""]));(!c.is("[readonly]")||c.parent().is(".field-fileupload")||c.is(".lookup.is-not-editable"))&&(!d||d.type!==o.type||"validate"!==o.handleObj.namespace||c.is(".lookup")||c.closest(".modal:visible").length)&&(c.data("handleEvent".concat([o.type||""]),o.handleObj),setTimeout(function(){c.closest(".modal-engaged").length&&!c.closest(".modal-body").length||e.validate(i,!0,o)},300))})}),this.inputs.filter("input[type=checkbox]").filter(t).off("click.validate").on("click.validate",function(i){e.validate($(this),!0,i)}),this.inputs.filter(":radio").off("click.validate").on("click.validate",function(i){var a=$(this).parent().find(".radio").first();e.validate(a,!0,i)});var n=this.inputs.filter("select").filter(t);n.length&&(n.off("change.validate listopened.validate listclosed.validate").on("change.validate",function(i){e.validate($(this),!0,i)}).on("listopened.validate",function(){var i=$(this),a=i.data("tooltip");a&&document.activeElement===i.data("dropdown").searchInput[0]&&a.hide(),$("#validation-tooltip").hide()}).on("listclosed.validate",function(){var i=$(this),a=i.data("tooltip"),s=i.data("dropdown");Ie.features.touch&&(s.pseudoElem.focus(),setTimeout(function(){s.pseudoElem.blur()},100)),s&&s.wrapper&&(a=s.wrapper.find(".icon-error").data("tooltip")),a&&document.activeElement!==i.data("dropdown").searchInput[0]&&a.show()}),n.filter(function(){return void 0!==$(this).data("dropdown")}).each(function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",function(i){var a=$(this).closest(".field, .field-short").find("select");e.validate(a,!0,i)})})),this.element.is("form")&&this.element.attr("data-validate-on")&&this.element.off("submit.validate").on("submit.validate",function i(a){a.stopPropagation(),a.preventDefault(),e.validateForm(function(s){e.element.off("submit.validate"),e.element.triggerHandler("validated",s),e.element.data("isValid",s),e.element.on("submit.validate",i)})})},validateForm:function(e){var t,n=this,i=[];n.inputs=this.element.find(n.fields),n.inputs.each(function(a){var s=$(this);if(s.attr("data-validate")){if("true"===s.attr("data-disable-validation")||s.hasClass("disable-validation"))return;for(var o=n.validate(s,!1,a),c=0;c<o.length;c++)i.push(o[c])}}),(t=$).when.apply(t,i).then(function(){e(!0)},function(){e(!1)})},setPrimaryBtn:function(e,t){var n=e.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),i=!0;n.length>0&&n.each(function(){var a=$(this);if(!(a.closest(".datagrid-filter-wrapper").length>0)){var s=null!==a[0].offsetParent;a.is(".required")&&(s&&a.is(".editor")&&!a.html()&&(i=!1),!s&&!a.is("select, :checkbox")||a.val()||a.is(".editor")||(i=!1)),!s&&!a.is("select, :checkbox")||a.isValid()||(i=!1)}}),i?t.removeAttr("disabled"):t.attr("disabled","disabled")},value:function(e){return e.is("input[type=checkbox]")?e.prop("checked"):e.is("div")?e[0].innerHTML:e.val()},getTypes:function(e,t){var n,i=this.filterValidations(e.attr("data-validation-events"),t.type);return n=e.is("input.dropdown")&&e.prev().prev("select").attr("data-validate")?e.prev().prev("select").attr("data-validate").split(" "):e.is("input.dropdown")&&e.prev().prev("select").attr("data-validation")?e.prev().prev("select").attr("data-validation").split(" "):e.attr("data-validation")?e.attr("data-validation").split(" "):e.attr("data-validate")?e.attr("data-validate").split(" "):[],i.length>0&&(n=n.filter(function(a){return-1!==i.indexOf(a)})),"keyup"===t.type&&(n=n.filter(function(a){return"date"!==a&&"time"!==a})),n},setIconOnParent:function(e,t){var n,i,a,s=$.createIcon({classes:["icon-".concat(t)],icon:"".concat(t)}),o=e.closest(".tab-panel, .expandable-pane"),c=e.closest(".row.flex-align-bottom"),d=o.attr("id"),p=e.closest(".tab-container, .tab-panel-container, .expandable-area");if(c&&c.length&&($(".".concat(t),c).length?c.addClass("has-messages"):c.removeClass("has-messages")),p.is(".tab-panel-container")&&(p=p.prev(".tab-container")),p.is(".tab-container"))(n=$('.tab-list a[href="#'.concat(d,'"]'),p).closest(".tab")).length?$(".count",n).length&&(n=$(".count",n)):(d=$('a[href="#'.concat(d,'"]'),".popupmenu").closest(".popupmenu").attr("id"),n=$('.tab-list .tab[aria-controls="'.concat(d,'"]'),p),i=d);else{if(!p.is(".expandable-area"))return;n=$('.expandable-header[aria-controls="'.concat(d,'"] .title'),p)}i&&i.length&&(a=o.add($($(i).attr("href"))),$('a[role="menuitem"]',"#".concat(i)).each(function(){a=a.add($($(this).attr("href")))}));var f=$('a[href="#'.concat(o.attr("id"),'"]'),"#".concat(d));o&&$(".".concat(t),o).length||a&&$(".".concat(t),a).length?($(".".concat(t),o).length||(f.removeClass("is-".concat(t)),$(".icon-".concat(t),f).remove()),$(".".concat(t),o).length&&$(".".concat(t),a).length&&!$(".icon-".concat(t),f).length&&f.addClass("is-".concat(t)).append(s),$(".icon-".concat(t),n).length||p.hasClass("module-tabs")||n.addClass("is-".concat(t)).append(s)):((n=n.add(f)).removeClass("is-".concat(t)),$(".icon-".concat(t),n).remove())},validate:function(e,t,n){if(e.data("handleEvent".concat([n.type||""]),null),"true"===e.attr("data-disable-validation")||e.hasClass("disable-validation")||e.is(":disabled"))return[];var i,a,s,o,c,d=this,p=d.getTypes(e,n)||[],f=[],m=[],b=d.value(e),C=e.attr("placeholder");function T(S,M,L,z){!1===(i=Ni.rules[L]).positive&&d.removePositive(e);var V="tooltip"!==e.attr("data-".concat((c=Ni.ValidationTypes[i.type]||Ni.ValidationTypes.error).type,"-type"));if(S)0===$.grep(m,function(Z){return Z===c.type}).length?(z.resolve(),i.positive&&(d.addMessage(e,i,V,M),d.removeMessage(e,i,!0),z.resolve(),d.addPositive(e))):c.errorsForm||z.resolve();else{if(!d.isPlaceholderSupport&&b===C&&i.message!==P.translate("Required"))return;d.addMessage(e,i,V,M),m.push(i.type),c.errorsForm?z.reject():z.resolve()}d.setIconOnParent(e,i.type);var N=d.getField(e).data("".concat(c.type,"message"));S&&N&&N.filter(function(Z){return Z.id===i.id||i.message}).length>0&&d.removeMessage(e,i,!0);var U=e.closest(".modal").find(".btn-modal-primary").not(".no-validation");U.length&&d.setPrimaryBtn(e.closest(".modal"),U);var G=e.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");G.length&&d.setPrimaryBtn(e.closest("#calendar-popup"),G),"error"===i.type&&e.closest("form").triggerHandler("aftervalidate",{field:e,rule:i,isValid:S})}for(s=0,o=p.length;s<o;s++)i=Ni.rules[p[s]],a=$.Deferred(),i&&(i.async?i.check(b,e,T,a):T(i.check(b,e),t,p[s],a),f.push(a));return f},getField:function(e){return e.is("select")&&void 0!==e.data("dropdown")&&(e=e.data("dropdown").pseudoElem),e},hasError:function(e){return this.getField(e).hasClass("error")},addMessage:function(e,t,n,i,a){if(!(""===t.message||e.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){a=a||!1;var s=this.getField(e),o=s.data("".concat(t.type,"message")),c=Ni.ValidationTypes[t.type]||Ni.ValidationTypes.error;if(a||s.addClass("icon"===t.type?"custom-icon":t.type),!(o&&o===t.message||o&&o.filter(function(f){return(f.id||f.message)===(t.id||t.message)&&f.message===t.message}).length>0)){var d=t.message;if(o){for(var p=0;p<o.length;p++)d="\u2022 ".concat(o[p].message);d+="<br>\u2022 ".concat(t.message)}o||(o=[]),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),(o=o.filter(function(f){return f.id!==t.id})).push({id:t.id,message:t.message,type:t.type}),s.data("".concat(c.type,"message"),o),void 0!==$.fn.toast&&$("body").toast({title:P.translate(c.titleMessageID),audibleOnly:!0,message:d}),n?(e.data("isValid",!1),n&&this.showInlineMessage(e,t,a)):this.showTooltipMessage(e,d,c.type,i)}}},showIcon:function(e,t){var n=this.getField(e).addClass("icon"===t?"custom-icon":t),i=$.createIconElement({classes:["icon-".concat(t)],icon:t}),a=n.closest(".field, .field-short"),s=e.parent();return 0===a.find("svg.icon-".concat(t)).length?(s.is(".editor-container")&&e.parent().addClass("is-error"),1===e.parent(":not(.editor-container)").find(".btn-actions").length?s.find(".btn-actions").before(i):1===s.find(".data-description").length?s.find(".data-description").before(i):1===s.find(".field-info").length?s.find(".field-info").before(i):e.is("textarea")?e.after(i):e.is(".dropdown, .multiselect")?s.find(".dropdown-wrapper").append(i):(e.is(".spinbox")||e.is(".lookup"),s.append(i)),$(".icon-success",a).remove()):i=a.find("svg.icon-error"),i},showTooltipMessage:function(e,t,n,i){if(!e.is(":radio")){var a=e.is("button")?e:this.showIcon(e,n),s=a.data("tooltip"),o=e;if(e.is(".dropdown, .multiselect")&&void 0!==e.data("dropdown")){var c=e.data("dropdown").pseudoElem;o=c,c.addClass("icon"===n?"custom-icon":n)}e.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===n?"custom-icon":n),s?s.content=t:(a.tooltip({content:t,placement:"bottom",placementOpts:{callback:function(d){var p=o[0].getBoundingClientRect(),f=s.tooltip[0].getBoundingClientRect(),C=0;return $("html").is('[dir="rtl"]')?f.left<p.left&&(C+=p.left-f.left):f.right>p.right&&(C+=-1*(f.right-p.right)),d.setCoordinate("x",d.x+C),d.nudges||(d.nudges={}),d.nudges.x=C,d}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),s=a.data("tooltip")),e.on("focus.validate",function(){s&&s.show()}).on("blur.validate",function(){s&&s.hide()}),s&&e.attr("data-error-type","tooltip"),this.setErrorIconOpacity(e),i&&s&&s.show()}},toggleRadioMessage:function(e,t,n,i,a){var s,o,c=e.attr("name");c&&c.length&&(s=$(':radio[name="'.concat(c,'"], :radio[name="').concat(c,'"] + label')),o=e.parent().is(".inline")?$(':radio[name="'.concat(c,'"]:last')).parent():$(':radio[name="'.concat(c,'"]:last + label')),a?(s.addClass("icon"===n?"custom-icon":n),$(i).addClass("radio-group-".concat(n)).insertAfter(o)):(s.removeClass(n),o.next(".radio-group-".concat(n)).remove()))},showInlineMessage:function(e,t,n){n=n||!1;var i,a,s=this.getField(e),o=Ni.ValidationTypes[t.type]||Ni.ValidationTypes.error;t.icon=t.icon||o.icon;var c="".concat(e.attr("id")||"id","-").concat(t.type);a="".concat(o.type),i="icon"===t.type?""+'<div id="'.concat(c,'" class="custom-icon-message" data-rule-id="').concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:t.icon}),'\n          <pre class="audible">\n            ').concat(P.translate(o.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"):""+'<div id="'.concat(c,'" class="').concat(o.type,'-message" data-rule-id="').concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(o.type)],icon:a}),'\n          <pre class="audible">\n            ').concat(P.translate(o.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"),e.is(":radio")?this.toggleRadioMessage(e,t.message,o.type,i,!0):(s.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===o.type?"custom-icon":o.type),s.closest(".field, .field-short").append(i),s.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===o.type?"custom-icon":o.type)),n||s.addClass("icon"===t.type?"custom-icon":t.type),e.is(".spinbox")&&s.closest(".spinbox-wrapper").addClass("icon"===o.type?"custom-icon":o.type),"error"===o.type&&e.parent().find(".icon-success").remove(),e.attr("aria-describedby",c),e.attr("aria-invalid","true");var d=e.parent().find(".dropdown.error"),p=d.attr("aria-label"),f="".concat(p).concat(t.message);d&&d.attr("aria-label",f),e.triggerHandler(o.type,{field:e,message:t.message}),e.closest("form").triggerHandler(o.type,{field:e,message:t.message})},addPositive:function(e){var t=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",e.parent(".field, .field-short")).length||e.parent(".field, .field-short").append(t)},removeMessage:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getField(e),a=i.data("".concat(t.type,"message")),s=t.id||t.message;if(t&&("error"!==t.type||a)&&0!==a.filter(function(f){return f.id===s}).length){var o=a.filter(function(f){return f.id!==s}),c=0===o.length;if(c?i.removeData("".concat(t.type,"message")):i.data("".concat(t.type,"message"),o),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),c&&"error"===t.type&&n&&(e.triggerHandler("valid",{field:e,message:""}),e.closest("form").triggerHandler("valid",{field:e,message:""})),c&&(e.removeClass("".concat(t.type," custom-icon")).data("isValid",!0),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&(e.next().next().removeClass("".concat(t.type," custom-icon")),e.next().find("div.dropdown").removeClass("".concat(t.type," custom-icon"))),e.is(":radio")&&this.toggleRadioMessage(e,"",t.type,"",!1),e.hasClass("spinbox")&&e.closest(".spinbox-wrapper").removeClass("".concat(t.type," custom-icon")),e.hasClass("colorpicker")&&e.parent(".colorpicker-container").removeClass(t.type),e.closest(".field-fileupload").length>0&&e.closest(".field-fileupload").find("input.".concat(t.type)).removeClass(t.type),e.removeAttr("aria-describedby").removeAttr("aria-invalid"),"tooltip"===e.attr("data-".concat(t.type,"-type")))){var d=e.closest(".field, .field-short").find(".icon-error"),p=d.data("tooltip");p&&p.destroy(),void 0!==e&&this.hideTooltipMessage(e),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),e.parent().find(".dropdown-wrapper > .icon-".concat(t.type)).off("click.validate").remove(),e.parent().find(".icon-".concat(t.type)).remove(),e.next(".icon-".concat(t.type)).off("click.validate").remove(),e.parent(".field, .field-short").find(".icon-".concat(t.type)).remove(),e.next(".inforCheckboxLabel").next(".icon-".concat(t.type)).remove()}}},hideTooltipMessage:function(e){var t=e.data("tooltip");t&&t.destroy(),e.off("focus.validate"),e.off("blur.validate")},removePositive:function(e){$(".icon-success",e.parent(".field, .field-short")).remove()},resetForm:function(e){var t=e.find("input, select, textarea, div.dropdown, div.editor");t.removeClass("error"),e.find(".error").removeClass("error"),e.find(".icon-error").remove(),e.find(".icon-success").remove(),e.find(".error-message").remove(),t.removeClass("alert"),e.find(".alert").removeClass("alert"),e.find(".icon-alert").remove(),e.find(".alert-message").remove(),t.removeClass("info"),e.find(".info").removeClass("info"),e.find(".icon-info").remove(),e.find(".info-message").remove(),setTimeout(function(){$("#validation-errors").addClass("is-hidden")},300),t.data("isDirty",!1).removeClass("isDirty"),e.find(".isDirty").removeClass("isDirty"),e.is("form")&&e[0].reset();var n=$.fn.validation.ValidationTypes;Object.keys(n).forEach(function(i){t.removeData("".concat(i,"message"))}),t.removeData("isValid")},isFormValid:function(e){if($(e).find(".error-message").length>0)return!1;for(var t=$(e).find('[data-validate*="required"]'),n=0;n<t.length;n++){var i=$(t[n]),a=this.value(i);if((i.is(":visible")||i.is("select"))&&!a)return!1}return!0},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.init()},destroy:function(){this.inputs=null}};var bi={type:"error",inline:!0};$.fn.validation=Ni,$.fn.getMessage=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),n=$.fn.getField($(this)).data(t),i="";if(n){if(1===n.length)return n[0].message;for(var a=0;a<n.length;a++)i+="\u2022 ".concat(n[a].message)}return i},$.fn.getMessages=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),n=$.fn.getField($(this)).data(t);return n||(n=[]),n},$.fn.getField=function(e){return e.is("select")&&void 0!==e.data("dropdown")&&(e=e.data("dropdown").pseudoElem),e},$.fn.getErrorMessage=function(e){return ei("$.fn.getMessage","$.fn.getErrorMessage"),e=_.extend({},e,bi),$(this).getMessage(e)},$.fn.scrollIntoView=function(e,t){"boolean"!=typeof e&&(e=void 0);var n=new ra(this,t).getField($(this));n[0].scrollIntoView(e),n.focus(),n.is("input.checkbox")&&(n=n.next(".checkbox-label"))[0]&&n[0].scrollIntoView(e)},$.fn.addMessage=function(e){return this.each(function(){var t=$.data(this,"Validator");t||(t=$.data(this,"Validator",new ra(this,e)));var n={message:e.message,type:e.type,triggerEvents:e.triggerEvents,icon:e.icon,id:e.id||e.message},i=$(this);t.addMessage(i,n,e.inline,e.showTooltip,e.isAlert),t.setIconOnParent(i,e.type)})},$.fn.addError=function(e){ei("$.fn.addMessage","$.fn.addError");var t=!0;return"boolean"==typeof e.inline&&!1===e.inline&&(t=!1),(e=_.extend({},e,bi)).inline=t,this.each(function(){$(this).addMessage(e)})},$.fn.removeMessage=function(e){return e||(e={type:"error"}),this.each(function(){var t=$.data(this,"Validator");t||(t=$.data(this,"Validator",new ra(this,e)));var n=$(this),i="".concat(e.type,"message"),a=$.fn.getField(n).data(i);if(n.hasClass("error")&&"error"===e.type&&n.removeClass("error"),a){for(var s=0;s<a.length;s++)t.removeMessage(n,a[s],e.triggerEvents);t.setIconOnParent(n,e.type),$.removeData(this,"Validator")}})},$.fn.removeError=function(e){return ei("$.fn.removeMessage","$.fn.removeError"),e=_.extend({},e,bi),this.each(function(){return $(this).removeMessage(e)})},$.fn.validate=function(e,t){var n="string"==typeof e;return this.each(function(){var i=$.data(this,"validate");if(i&&"string"!=typeof i){if(n)return void("function"==typeof i[e]&&i[e](t));i.updated(e)}else i=$.data(this,"validate",new ra(this,e))})},$.fn.isValid=function(){var e=$(this).data("isValid");return null==e||e},$.fn.validateField=function(){var e=$(this),t=Soho.components.Validator.prototype;t&&t.validate&&t.validate(e,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var oa=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],va={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,hitbox:!1,yearsAhead:3,yearsBack:2,legend:[],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1,attributes:null,autocompleteAttribute:"off",useMask:!0,tabbable:!0,incrementWithKeyboard:!1,todayWithKeyboard:!1};function Zr(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,va),this.settings.legend&&0===this.settings.legend.length&&(this.settings.legend=oa),this.init()}Zr.prototype={init:function(){this.build(),this.handleEvents()},build:function(){var e,t=this.settings.autocompleteAttribute;"string"==typeof t&&t.length?this.element.attr("autocomplete","".concat($e.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.next();this.trigger=n.is("button.trigger")?n:$('<button class="btn-icon trigger" type="button" '.concat(this.settings.hitbox?'data-options="{hitbox: true}"':"",'>\n        <span class="audible"></span>\n        ').concat($.createIcon("calendar"),"\n      </button>")).insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.setExtraAttributes(),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar(),null!==(e=this.trigger)&&void 0!==e&&e?.data("button")||this.trigger.button()},setLocale:function(){var e=this,t=this.settings;this.locale=P.currentLocale,this.settings.language?(P.getLocale(this.settings.language),this.language=this.settings.language):this.language=P.currentLanguage.name,t.locale&&P.getLocale(t.locale).done(function(n){var i=e.getSimilarApi("locale",n);i.forEach(function(a){a.locale=P.cultures[n],a.language=e.settings.language||a.locale.language,a.setCurrentCalendar()}),0===i.length&&(e.locale=P.cultures[n],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar())}),t.language&&P.getLocale(t.language).done(function(){e.getSimilarApi("language",t.language).forEach(function(n){n.language=t.language})})},getSimilarApi:function(e,t){var n=[].slice.call(document.querySelectorAll(".datepicker")),i=[];return n.forEach(function(a){var s=$(a).data("datepicker");s&&s.settings[e]===t&&i.push(s)}),i},setCurrentCalendar:function(){this.currentCalendar=P.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]'));var e=". ".concat(P.translate("PressDown",{locale:this.locale.name,language:this.language})),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>")),this.trigger.children(".audible").text(P.translate("DatePickerTriggerButton"))},handleKeys:function(e){var t=this,n=this.settings;if(e.is("#monthview-popup"))return e.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",function(i){var a=!1,s=i.keyCode||i.charCode||0;return 9===s&&(t.containFocus(i),a=!0),27===s&&(t.closeCalendar(),t.element.focus(),i.stopImmediatePropagation(),a=!0),84===s&&(t.closeCalendar(),t.element.focus(),a=!0),!a||(i.stopPropagation(),i.preventDefault(),!1)}),void e.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",function(i){return 9!==(i.keyCode||i.charCode||0)||(n.range.useRange&&$(i.target).is(".next")&&!n.range.selectWeek?t.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():t.containFocus(i),i.stopPropagation(),i.preventDefault(),!1)});e.off("keydown.datepicker").on("keydown.datepicker",function(i){var a,s,o=!1,c=i.keyCode||i.charCode||0,d=(null===(a=t.settings)||void 0===a||null===(s=a?.dateFormat)||void 0===s||null==s?void 0:s.indexOf("-"))>-1;if(40!==c||t.isOpen()||(o=!0,t.openCalendar(),setTimeout(function(){t.setFocusAfterOpen()},200)),84===c&&t.settings.todayWithKeyboard&&(o=!0,t.setToday()),!d&&t.settings.incrementWithKeyboard){var p=$(i.currentTarget).val();(189===c||109===c||Ie.browser.isFirefox()&&173===c)&&(o=!0,t.adjustDay(!1,p)),(187===c||107===c||Ie.browser.isFirefox()&&61===c)&&(o=!0,t.adjustDay(!0,p))}return!o||(i.stopPropagation(),i.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,n=this.popup.find(":focusable"),i=$(e.currentTarget);(i.is(".monthview-monthyear-pane, #btn-monthyear-pane")||i.closest(".is-monthyear.is-monthonly").length>0)&&(n=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var a=n.index($(":focus"));n.eq(a=t?a-1<0?n.length-1:a-1:a+1>=n.length?0:a+1).focus()},setFormat:function(){var e=this.settings,t="object"===Ge(P)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,n="object"===Ge(P)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===Ge(P)&&this.settings.calendarName&&(t=P.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,n=P.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===Ge(t)&&void 0!==t.short&&(t=t.short),"locale"===e.dateFormat?(this.pattern=t+(e.showTime?" ".concat(e.timeFormat||n):""),e.dateFormat=this.pattern):this.pattern=e.dateFormat+(e.showTime&&e.timeFormat?" ".concat(e.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){if(this.settings.useMask){this.setFormat();var e=this.settings,t={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},n="date availableDate",i={date:"change blur enter",availableDate:"change blur"};e.range.useRange&&(t.process="rangeDate",t.patternOptions.delimeter=e.range.separator,n="rangeDate",i={rangeDate:"change blur"}),t.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(t),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":n,"data-validation-events":JSON.stringify(i)}).validate()),this.setPlaceholder()}},setPlaceholder:function(){var n=this.settings,i=this.pattern;!n.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(n.range.useRange&&(i=n.range.first&&n.range.first.date?P.formatDate(n.range.first.date,{pattern:this.pattern,locale:this.locale.name})+n.range.separator+this.pattern:this.pattern+n.range.separator+this.pattern),this.element[0].setAttribute("placeholder",i))},setExtraAttributes:function(){this.settings.attributes&&(_.addAttributes(this.element,this,this.settings.attributes),_.addAttributes(this.trigger,this,this.settings.attributes,"trigger"))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},loadLegend:function(e){void 0===e||e.length<1||this.calendarAPI.loadLegend(e)},openCalendar:function(){var e=this,t=this,n=this.settings,i={};if(!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var a='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(P.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),s=' <button type="button" class="is-select btn-primary">\n      '.concat(P.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?s+a:a+s,"\n      </div>")),n.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(P.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(P.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),n.hideButtons&&(this.footer=$("")),n.showTime&&(i.timeFormat=void 0===n.timeFormat?this.pattern.slice(this.pattern.indexOf(" ")).trim():n.timeFormat,void 0!==n.minuteInterval&&(i.minuteInterval=n.minuteInterval),void 0!==n.secondInterval&&(i.secondInterval=n.minuteInterval),void 0!==n.mode&&(i.mode=n.mode),void 0!==n.roundToInterval&&(i.roundToInterval=n.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var o=this.settings.timeFormat?this.settings.timeFormat:null;o||(o=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),i.parentElement=this.timepickerContainer,i.locale=this.settings.locale,i.language=this.settings.language,this.time=P.formatDate(this.currentDate,{pattern:o,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(i).data("timepicker"),this.setUseCurrentTime(),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",function(){var b=e.setTime(t.isIslamic?t.currentDateIslamic:t.currentDate);e.setValue(b,!0,!0)}),setTimeout(function(){e.timepicker.initValues=e.timepicker.getTimeFromField(e.time),e.timepicker.afterShow(e.timepickerContainer)},1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=P.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.year=this.currentYear,this.settings.month=this.currentMonth,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?P.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.isIslamic?(this.settings.activeDateIslamic=P.gregorianToUmalqura(this.settings.activeDate),this.settings.year=this.settings.activeDateIslamic[0],this.settings.month=this.settings.activeDateIslamic[1]):(this.settings.year=this.settings.activeDate.getFullYear(),this.settings.month=this.settings.activeDate.getMonth())):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentDateIslamic||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(b,C){if(e.currentDate=new Date(C.year,C.month,C.day),t.settings.range.useRange&&t.settings.range.first&&t.settings.range.selectWeek){var T=Ft.firstDayOfWeek(new Date,e.settings.firstDayOfWeek),S=Ft.lastDayOfWeek(new Date,e.settings.firstDayOfWeek);return t.settings.range.first={},t.settings.range.second=void 0,t.setWeekRange({day:T.getDate(),month:T.getMonth(),year:T.getFullYear()},{day:S.getDate(),month:S.getMonth(),year:S.getFullYear()}),t.closeCalendar(),void t.element.focus()}t.settings.range.useRange&&t.settings.range.first&&!t.settings.range.selectWeek||(t.insertDate(e.currentDate),C.close&&(t.closeCalendar(),t.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(b){return 37!==b.key&&39!==b.key&&38!==b.key&&40!==b.key&&13!==b.key}),this.calendarAPI=new mi(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,this.calendar.on("beforemonthrendered",function(){e.element.trigger("beforemonthrendered")}),this.calendar.on("monthrendered",function(b,C){e.element.trigger("monthrendered",C)}),this.element.trigger("monthrendered",{year:this.calendarAPI.currentYear,month:this.calendarAPI.currentMonth,elem:this.calendar,api:this.calendarAPI}),n.showTime&&this.calendar.addClass("is-timepicker"),n.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==n.dateFormat&&"MMM"!==n.dateFormat&&"MM"!==n.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===n.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(n.showTime?this.timepickerContainer:"",this.footer);var c=this.element,d=this.isRTL?"right":"left",p=this.element.parent();p.is(".datagrid-cell-wrapper")&&(d="center",c=this.element.next(".icon, .trigger"));var f="bottom";p.offset().top<400&&p.offset().top>185&&window.innerHeight<800&&(f=P.isRTL()?"left":"right"),this.trigger.popover({content:this.calendar,placementOpts:{parent:c,parentXAlignment:d,strategies:["flip","nudge","shrink"]},placement:f,popover:!0,trigger:"immediate",isRangeDatepicker:n.range.useRange,extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1}).off("show.datepicker").on("show.datepicker",function(){if(window.innerHeight<400&&e.popupClosestScrollable&&1===e.popupClosestScrollable.length&&(e.popup.find(".arrow").hide(),e.popup.css({"min-height":$("html").hasClass("theme-new-light")?"":"".concat(e.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popupClosestScrollable.children().not(".popover").css("padding-top","80px"),e.popupClosestScrollable.css("min-height","375px")),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popup.css({top:"".concat(e.popup.position().top<0?0:e.popup.position().top+50,"px")}),e.settings.hideButtons&&e.popup.addClass("hide-buttons"),e.settings.showMonthYearPicker&&(e.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),e.popup.find(".btn-monthyear-pane").button()),e.settings.range.selectWeek){var b=e.popup.find("tbody");e.popup.find(".monthview-table tr").hover(function(C){var T=$(C.currentTarget);b.find("td").removeClass("is-selected range-selection end-date"),T.find("td").addClass("range-selection")})}}).off("hide.datepicker").on("hide.datepicker",function(){setTimeout(function(){e.popupClosestScrollable.children().not(".popover").css("padding-top",""),e.popupClosestScrollable.add(e.popup).css("min-height",""),e.closeCalendar()},1)}),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentDateIslamic=this.currentDateIslamic,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",function(){var b=$(this);if(b.hasClass("is-disabled"))t.calendarAPI.activeTabindex(b,!0);else{if(!n.range.useRange||n.range.first&&!n.range.second||n.range.selectWeek||t.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),n.range.useRange&&n.range.selectWeek){var C=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").first()),T=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").last());return void t.setWeekRange(C,T)}n.range.useRange||t.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var S=$(this);S.addClass("is-selected".concat(n.range.useRange?" range":"")).attr("aria-selected","true"),t.lastValue=null,t.insertSelectedDate(S),n.range.useRange?t.isFocusAfterClose=!0:(t.closeCalendar(),t.element.focus())}}),this.footer.off("click.datepicker").on("click.datepicker","button",function(b){var C=$(this);if(C.hasClass("is-cancel")&&(t.settings.isMonthPicker||(t.element.val("").trigger("change").trigger("input"),t.currentDate=null,t.clearRangeDates()),t.closeCalendar(),t.element.focus()),C.hasClass("is-cancel-month-pane")&&t.calendarAPI.monthYearPane.data("expandablearea").close(),C.hasClass("is-select-month")||C.hasClass("is-select-month-pane")){var T=parseInt(t.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),S=parseInt(t.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);t.currentDate=new Date(T,S,1),t.isIslamic&&(t.currentDateIslamic[0]=T,t.currentDateIslamic[1]=S,t.currentDateIslamic[2]=1,t.currentYear=T,t.currentMonth=S,t.currentDay=1,t.currentDate=P.umalquraToGregorian(T,S,1)),n.range.useRange?t.isFocusAfterClose=!1:C.hasClass("is-select-month")&&(t.insertDate(t.isIslamic?t.currentDateIslamic:t.currentDate),t.closeCalendar()),C.hasClass("is-select-month-pane")&&t.calendarAPI.showMonth(S,T)}if(C.hasClass("is-select")){var M=t.calendarAPI.setRangeSelByClick();if(1===M)t.closeCalendar();else if(2===M)t.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]),t.closeCalendar();else{if(3===M)return void b.preventDefault();t.insertSelectedDate(),t.closeCalendar()}C.hasClass("is-select-month-pane")||t.element.focus()}b.preventDefault(),C.hasClass("is-select-month-pane")&&(t.calendarAPI.monthYearPane.data("expandablearea").close(),t.popup.find(".btn-primary.is-select").focus())}),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today:not(.is-disabled)",function(b){b.preventDefault(),n.range.useRange?(t.setToday(!0),(!n.range.second||n.range.second&&!n.range.second.date)&&b.preventDefault()):(t.setToday(),t.closeCalendar())}),setTimeout(function(){_.addAttributes(e.popup.find(".btn-monthyear-pane"),e,e.settings.attributes,"btn-monthyear"),_.addAttributes(e.popup.find(".is-cancel"),e,e.settings.attributes,"btn-cancel"),_.addAttributes(e.popup.find(".is-select"),e,e.settings.attributes,"btn-select"),t.calendarAPI.validatePrevNext(),t.setFocusAfterOpen()},50)}},setUseCurrentTime:function(){if(this.settings.useCurrentTime&&this.timepicker.minuteSelect.length){var e=this.isSeconds&&this.timepicker.secondSelect.length,t=function(a){return(a<10?"0":"")+a},n=function(a,s){a.find("option:contains(".concat(s,")")).length||(a.find("option:selected").prop("selected",!1),a.prepend($("<option selected >".concat(s,"</option>"))))},i=new Date;n(this.timepicker.minuteSelect,t(i.getMinutes())),e&&n(this.timepicker.secondSelect,t(i.getSeconds())),"string"==typeof this.time&&""!==this.time&&this.currentDate&&this.currentDate.getDate()&&(n(this.timepicker.minuteSelect,t(this.currentDate.getMinutes())),e&&n(this.timepicker.secondSelect,t(this.currentDate.getSeconds())))}},clearRangeDates:function(){var e=this.settings;e.range.useRange&&(e.range.start=va.range.start,e.range.end=va.range.end,e.range.data&&delete e.range.data)},insertSelectedDate:function(e){var t=this.calendarAPI.getCellDate(e||this.calendar.find("td.is-selected").last()),n=t.day,i=t.month,a=t.year;this.currentDate=new Date(a,i,n),this.isIslamic&&(this.currentDateIslamic[0]=a,this.currentDateIslamic[1]=i,this.currentDateIslamic[2]=n,this.currentYear=a,this.currentMonth=i,this.currentDay=n,this.currentDate=P.umalquraToGregorian(a,i,n)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function(e,t){var n=this.settings;n.range.first.date=new Date(e.year,e.month,e.day),n.range.second=void 0,this.setValue(new Date(t.year,t.month,t.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){this.closeCalendar()},closeCalendar:function(){var e=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:e}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var t=this.trigger.data("popover");t&&t.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var e=this.settings;if(this.calendar){if(e.range.useRange&&(e.range.first&&e.range.first.label&&(!e.range.second||e.range.second&&!e.range.second.date)&&this.setRangeFirstPart(e.range.first.date),this.calendarAPI.setRangeSelected(),e.range.second&&e.range.first.date&&e.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,e.range.useRange&&e.range.selectWeek){var t=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void t.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(e){var t=this.settings,n=function(f){return new Date(f.year,f.month,f.day)},i=this.calendarAPI.days.find("td:visible:first"),a=this.calendarAPI.days.find("td:visible:last"),s=this.isIslamic?at.padDate(e[0],e[1],e[2]):at.padDate(e.getFullYear(),e.getMonth(),e.getDate()),o=this.calendarAPI.days.find('[data-key="'.concat(s,'"]')),c=o.closest("tr");this.isIslamic?(this.currentDate=P.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e;var d=this.calendarAPI.getCellDate(i),p=this.calendarAPI.getCellDate(a);t.range.first={date:this.isIslamic?Un(e):e,cell:o,row:c,rowIdx:c.index(),cellIdx:o.index()},t.range.extra={minCell:i,maxCell:a,min:this.isIslamic?[d.year,d.month,d.day]:n(d),max:this.isIslamic?[p.year,p.month,p.day]:n(p),cellLength:c.children("td").length},this.calendarAPI.settings.range.first=t.range.first,this.calendarAPI.settings.range.extra=t.range.extra},insertDate:function(e,t){var n=this.settings,i="",a="",s="";if(e instanceof Array)i=e[0],a=e[1],s=e[2].toString();else{if(!(e instanceof Date)||isNaN(this.getTime(e)))return;i=e.getFullYear(),a=e.getMonth(),s=e.getDate().toString()}if(this.calendarAPI.currentMonth===a&&this.calendarAPI.currentYear===i||this.calendarAPI.showMonth(a,i),this.isOpen()){var o=this.calendarAPI.days.find("td:not(.alternate)").filter(function(){return $(this).text().toLowerCase()===s});o.hasClass("is-disabled")||(this.settings.showTime&&(t?(this.time=P.formatDate(e,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),e=this.setTime(e))):e=this.setTime(e)),this.setValue(e,!0),n.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),o.addClass("is-selected".concat(n.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(o,!0)}},setValue:function(e,t,n){var i=this.settings;if(this.currentDate=e,""===this.currentDate||void 0===this.currentDate)return this.element.val(""),void this.clearRangeDates();e instanceof Array&&(this.currentDateIslamic=e,this.currentDate=P.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5])),i.range.useRange?n||this.setRangeToElem(e,!1):this.element.val(P.formatDate(e,{pattern:this.pattern,locale:this.locale.name})),t&&(i.range.useRange?n||this.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]):this.element.trigger("change").trigger("input"))},getTime:function(e){return Array.isArray(e)?e.join(""):e.getTime()},setRangeToElem:function(e,t){var n=this,i=this.settings,a=function(b){return P.formatDate(b,{pattern:n.pattern,locale:n.locale.name})},s=a(e),o=!1;if(this.isOpen()){var c=this.isIslamic?at.padDate(e[0],e[1],e[2]):at.padDate(e.getFullYear(),e.getMonth(),e.getDate()),d=this.calendarAPI.days.find('[data-key="'.concat(c,'"]')),p=d.closest("tr");i.range.second&&(i.range.second.date?this.resetRange({cell:d}):(delete i.range.second.date,$.isEmptyObject(i.range.second)&&delete i.range.second));var f={};i.range.first&&(f.date=this.getTime(e),f.firstdate=this.getTime(i.range.first.date),f.min=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.minDays),f.max=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.maxDays)),!i.range.first||t?(this.setRangeFirstPart(e),s=this.getRangeValue(),this.setPlaceholder()):!i.range.second&&i.range.selectBackward&&f.date>f.firstdate||i.range.selectForward&&f.date<f.firstdate||i.range.maxDays>0&&f.date>f.max.aftertime||f.date<f.max.beforetime?(this.resetRange({cell:d}),this.setRangeFirstPart(e),s=this.getRangeValue(),this.setPlaceholder()):(o=!0,this.isIslamic?(this.currentDate=P.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e,i.range.minDays>0&&(f.date>=f.firstdate&&f.date<f.min.aftertime?(e=f.min.after,f.date===f.firstdate&&(f.date=this.getTime(e))):f.date<f.firstdate&&f.date>f.min.beforetime&&(e=f.min.before),c=this.isIslamic?at.padDate(e[0],e[1],e[2]):at.padDate(e.getFullYear(),e.getMonth(),e.getDate()),p=(d=this.calendarAPI.days.find('[data-key="'.concat(c,'"]'))).closest("tr")),f.date>f.firstdate?i.range.second={date:e,cell:d,row:p,rowIdx:p.index(),cellIdx:d.index()}:(i.range.second=i.range.first,i.range.first={date:e,cell:d,row:p,rowIdx:p.index(),cellIdx:d.index()}),s=this.getRangeValue())}else if(!t){o=!0;var m=e||new Date;this.currentMonth=m.getMonth(),this.currentYear=m.getFullYear(),this.currentDay=m.getDate(),this.currentDate=m,i.range.first=i.range.first||{},i.range.second=i.range.second||{},i.range.first.date=m,i.range.second.date=m,i.range.end&&e&&(i.range.second.date="string"==typeof i.range.end?P.parseDate(i.range.end,{pattern:this.pattern,locale:this.locale.name},!1):i.range.end),s=this.getRangeValue()}this.element.val(s),o?(i.range.data={value:s,dates:this.calendarAPI?this.calendarAPI.getDateRange(i.range.first.date,i.range.second.date):[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date),endDate:i.range.second.date,end:a(i.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):i.range.data={value:s,dates:[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date)}},resetRange:function(e){e=e||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,e.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,e.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),e.cell&&e.cell.addClass("is-selected"))},setRangeValueFromField:function(){var e,t=this,n=function(p){return P.formatDate(p,{pattern:t.pattern,locale:t.locale.name})},i=function(p){return P.parseDate(p,{pattern:t.pattern,locale:t.locale.name},!1)},a=function(p){return p&&"function"==typeof p.getTime?p:new Date},s=function(p){var f=i(p[0]),m=i(p[1]),b=t.isIslamic&&Array.isArray(f);return b||(f=P.gregorianToUmalqura(new Date(p[0])),m=P.gregorianToUmalqura(new Date(p[1]))),f&&m?(f=t.getTime(a(f)),m=t.getTime(a(m)),t.isIslamic&&!b&&(p[0]=P.gregorianToUmalqura(new Date(p[0])),p[1]=P.gregorianToUmalqura(new Date(p[1]))),f>m?[p[1],p[0]]:[p[0],p[1]]):p},o=this.settings,c={};if(c.value=o.range.value||this.element.val().trim(),c.isEmpty=""===c.value,!c.isEmpty&&c.value.indexOf(o.range.separator)>-1?c.dates=s(c.value.split(o.range.separator)):!c.isEmpty&&c.value.indexOf(o.range.separator.slice(0,-1))>-1?c.dates=c.value.split(o.range.separator.slice(0,-1)):c.isEmpty||-1!==c.value.indexOf(o.range.separator)||(c.dates=[n(c.value)]),!o.range.data&&o.range.start&&o.range.end&&c.isEmpty&&(e=s("string"==typeof o.range.start&&"string"==typeof o.range.end?[o.range.start,o.range.end]:"string"!=typeof o.range.start&&"string"==typeof o.range.end?[n(o.range.start),o.range.end]:"string"==typeof o.range.start&&"string"!=typeof o.range.end?[o.range.start,n(o.range.end)]:[n(o.range.start),n(o.range.end)]),o.range.start=n(e[0]),o.range.end=n(e[1])),o.range.first=o.range.first||{},o.range.second=o.range.second||{},o.range.data&&o.range.data.startDate?o.range.first.date=o.range.data.startDate:o.range.start&&"string"==typeof o.range.start?o.range.first.date=i(o.range.start):c.dates&&(o.range.first.date=this.isIslamic&&Array.isArray(c.dates[0])?c.dates[0]:i(c.dates[0])),o.range.data&&o.range.data.endDate?o.range.second.date=o.range.data.endDate:o.range.end&&"string"==typeof o.range.end?o.range.second.date=i(o.range.end):c.dates&&(o.range.second.date=this.isIslamic&&Array.isArray(c.dates[1])?c.dates[1]:i(c.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!c.isEmpty&&(c.isEmpty||o.range.data))return!1;var d=n(o.range.first.date);return d&&this.element.val(d),!0},setValueFromField:function(){var e=this,t=this.settings;if(this.setCurrentCalendar(),t.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),t.range.useRange&&(""!==this.element.val().trim()||t.range.start&&t.range.end||t.range.data&&t.range.data.startDate&&t.range.data.endDate)&&!this.setRangeValueFromField())return this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate()),void(this.currentDate&&this.isIslamic&&(this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]));var n=this.element.val(),i=n;if(this.isIslamic&&n){var a=P.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});a instanceof Date?i=P.umalquraToGregorian(a.getFullYear(),a.getMonth(),a.getDate()):a instanceof Array&&(i=P.umalquraToGregorian(a[0],a[1],a[2],a[3],a[4],a[5]))}var s=function(){var m=(new Date).getDate();if(e.calendarAPI){var b=e.calendarAPI.dayMap.filter(function(C){return C.elem.is(".is-selected")});b.length&&(m=parseInt(b[0].key.substr(6),10))}return m}();this.currentDate=i||new Date,"string"==typeof this.currentDate&&(this.currentDate=P.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(s)),void 0===this.currentDate&&(this.currentDate=P.parseDate(i,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=P.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var o=this.pattern,c=!(o.indexOf("MMMM")>-1||o.indexOf("MMM")>-1||"yyyy"===o||"MMMM"===o||"MMM"===o||"MM"===o),d=this.element.val().trim();if(""!==d&&!t.range.useRange){var p=P.parseDate(d,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},c),f=0;f=this.isIslamic?p[3]:null==p||null==p?void 0:p.getHours(),!this.isIslamic&&p&&f<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&""!==this.currentCalendar.dayPeriods[1]&&p.setHours(f+12),this.isIslamic&&p&&f<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&(f+=12),!this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&p.setDate(s),this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&(p[2]=s),void 0===p||""===this.element.val().trim()||t.range.useRange||(this.setValue(p),d!==this.element.val().trim()&&this.element.trigger("change").trigger("input"))}t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&(t.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.prop("disabled",!1)},disable:function(){this.element.removeAttr("readonly").attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly"),this.trigger.prop("disabled",!1)},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},setToday:function(e){var t=this.settings;if(this.lastValue=null,this.currentDate=new Date,!this.isReadonly()&&!this.isDisabled()){if(this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var n=P.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=n}var i=this.isIslamic?this.currentDateIslamic:this.currentDate,a=!1;if(this.isOpen())if(t.range.useRange)if(!t.range.first||t.range.first&&!t.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(i,!0),e&&this.calendarAPI){var s=this.calendarAPI.dayMap.filter(function(d){return d.elem.is(".is-selected")});s&&s.length&&setTimeout(function(){s[0].elem.focus()},0)}}else t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date)?(this.setRangeToElem(i,!1),a=!0):t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(i,!0));else this.insertDate(i,!0);else{if(t.range.useRange)this.setRangeToElem(this.currentDate);else{var c=P.formatDate(i,{pattern:this.pattern,locale:this.locale.name});this.element.val(c)}a=!0}a&&(t.range.useRange?this.element.trigger("change",[t.range.data]).trigger("input",[t.range.data]):this.element.trigger("change").trigger("input"))}},adjustDay:function(e,t){if(!this.isReadonly()&&!this.isDisabled()){this.currentDate||(t.length>0&&/(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}/.test(t)?this.setValue(new Date(t),!0,!0):this.setToday());var n={pattern:this.pattern,locale:this.locale.name},i=this.isIslamic?this.currentDateIslamic:this.currentDate;this.isIslamic?(i[2]+=e?1:-1,(i=P.umalquraToGregorian(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2],this.currentDateIslamic[3],this.currentDateIslamic[4],this.currentDateIslamic[5],this.currentDateIslamic[6])).setDate(i.getDate()+(e?1:-1)),i=P.gregorianToUmalqura(i)):i.setDate(i.getDate()+(e?1:-1)),this.element.val(P.formatDate(i,n)),this.element.trigger("change").trigger("input")}},setTime:function(e){if(!this.timepicker||void 0===this.popup)return this.settings.useCurrentTime||e.setHours(0,0,0,0),e;var n=this.popup.find(".dropdown.hours").val(),i=this.popup.find(".dropdown.minutes").val(),a=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,s=this.popup.find(".dropdown.period"),o=s.val();return n=s.length&&o===this.currentCalendar.dayPeriods[1]&&n<12?parseInt(n,10)+12:n,n=!s.length||o!==this.currentCalendar.dayPeriods[0]&&o||12!==parseInt(n,10)?n:0,e instanceof Array?(e[3]=n?parseInt(n,10):e[3],e[4]=i?parseInt(i,10):e[4],e[5]=a?parseInt(a,10):e[5]):(e=new Date(e)).setHours(n,i,a),e},getCurrentDate:function(){return this.currentDate},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,va)),this.teardown().init()},getRangeValue:function(){var e=this,t=this.settings,n=function(i){return P.formatDate(i,{pattern:e.pattern,locale:e.locale.name})};return t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date?"".concat(n(t.range.first.date)+t.range.separator+n(t.range.second.date)):t.range.useRange&&t.range.first&&t.range.first.date?t.placeholder?"".concat(n(t.range.first.date)+t.range.separator+this.pattern):n(t.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var e=this.element.data("mask");return e&&e.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.trigger.on("click.datepicker",function(){t.isOpen()?t.closeCalendar():t.openCalendar()}),this.handleKeys(this.element),t.element.on("blur.datepicker",function(){""!==e.element.val().trim()&&e.setValueFromField()}),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",function(){e.isOpen()||""!==e.element.val().trim()||t.clearRangeDates()}),!this.isOpen()&&n.range.useRange&&!n.range.first){this.setRangeValueFromField();var i=this.getRangeValue();i&&this.element.val(i)}}},$.fn.datepicker=function(e){return this.each(function(){var t=$.data(this,"datepicker");t?t.updated(e):t=$.data(this,"datepicker",new Zr(this,e))})};var Cr=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function Ri(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;if(!e||"string"!=typeof e||!t.length)throw new Error('"id" property must be defined and unique.');if(this.id=e,!t||"string"!=typeof t||!t.length)throw new Error('"displayName" property must be defined.');return this.displayName=t,n=n.toLowerCase(),-1===Cr.indexOf(n)&&(n="p"),this.tagName=n,"string"==typeof i&&i.length&&(this.className=i),a instanceof CSSStyleDeclaration&&(this.styleProps=a),this}function eo(){return{popupmenuSettings:{offset:{y:10}},styles:[new Ri("default",P.translate("FontPickerNormal")),new Ri("header1",P.translate("FontPickerHeader").replace("{0}","1"),"h3"),new Ri("header2",P.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function Da(e,t){if(!(e instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=_.mergeSettings(e,t,eo()),t&&Array.isArray(t.styles)&&(this.settings.styles=t.styles),this.element=e,this.init()}Ri.prototype={render:function(e){return e=$e.stripHTML(e),"<".concat(this.tagName,">").concat(e,"</").concat(this.tagName,">")}},Da.prototype={get menuAPI(){var e=$(this.element).data("popupmenu");if(e)return e},get selected(){var e;return this.settings.styles.forEach(function(t){t.selected&&(e=t)}),e||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(e){var t;if(this.settings.styles.forEach(function(n){n.id===e&&(t=n)}),!t)throw new Error('No FontPickerStyle available with id "'.concat(e,'"'));return t},getStyleByTagName:function(e){var t;if(this.settings.styles.forEach(function(n){n.tagName===e&&(t=n)}),!t)throw new Error('No FontPickerStyle available with tagName "'.concat(e,'"'));return t},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,this.element.disabled=!0===e},get supportedTagNames(){var e=[];return this.settings.styles.forEach(function(t){e.push(t.tagName)}),e},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=eo().styles),this.build().handleEvents()},build:function(){var e=$(this.element),t=this.element.querySelector("svg.icon.icon-dropdown");t||(t=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",t)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),e.button();var n=e.next(".popupmenu");n&&n.length||(n=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),n.html(this.buildMenuHTML());var i=_.extend({},this.settings.popupmenuSettings,{menu:n,stretchToWidestMenuItem:!0});return e.popupmenu(i),this.render(),this.audible=$('<span class="audible">'.concat(P.translate("FontPickerStyle"),"</span>")),this.element.prepend(this.audible[0]),this},render:function(){var e=this.selected,t=this.element.querySelector("span:not(.audible)");$(t).html(e.displayName)},buildMenuHTML:function(){var e="";return this.settings.styles.forEach(function(t){var n=t.render(t.displayName);e+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(t.id,'">').concat(n,"</a>\n      </li>")}),"".concat(e)},handleEvents:function(){var e=this,t=this;return $(this.element).on("selected.".concat("fontpicker"),function(n,i){var a=i.attr("data-val");e.select(a)}).on("updated.".concat("fontpicker"),function(n,i){t.updated(i)}),this},select:function(e,t){if(!e||"string"!=typeof e&&!(e instanceof Ri))throw new Error('"id" property must be defined in order to select.');var n;n=e instanceof Ri?e:this.getStyleById(e),this.settings.styles.forEach(function(i){i.selected=!1}),n.selected=!0,this.render(n),t||$(this.element).triggerHandler("font-selected",[n])},updated:function(e){var t;return void 0!==e&&(Array.isArray(e.styles)&&(t=e.styles),this.settings=_.mergeSettings(this.element,e,this.settings),t&&(this.settings.styles=t)),this.teardown().init()},teardown:function(){var e=this.element.querySelector("svg.icon.icon-dropdown");e.parentNode.removeChild(e);var t=this.menuAPI;t&&"function"==typeof t.destroy&&t.destroy();var n=$(this.element).data("button");return n&&"function"==typeof n.destroy&&n.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,"fontpicker")}},$.fn.fontpicker=function(e){return this.each(function(){var t=$.data(this,"fontpicker");t?t.updated(e):t=$.data(this,"fontpicker",new Da(this,e))})};var to={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1,attributes:null};function Us(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,to),this.init()}Us.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=to.maxVisibleButtons),this},build:function(){var e,t=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),Array.isArray(this.settings.attributes)&&_.addAttributes(this.element,this,this.settings.attributes),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",function(){return t.cutoffTitle}).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var n=this.element.find(".more");n.length||(n=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(P.translate("MoreActions"),"</span>")).attr("title",P.translate("More")).appendTo(n)}this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each(function(f){var m=$(this);m.data("button")||m.button(),!$(this).data("tooltip")&&m.attr("title")&&m.tooltip(),!m.is(".btn-menu")&&Array.isArray(t.settings.attributes)&&_.addAttributes(m,t,t.settings.attributes,"button-".concat(f))}),this.settings.noSearchfieldReinvoke||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each(function(f,m){var b=$(m);if(b.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(b=b.children(".searchfield")),!b.data("searchfield")){var C=$.extend({},_.parseSettings(b[0]));b.searchfield(C)}_.addAttributes(b,t,t.settings.attributes,"searchfield")});var i=this.more.data("popupmenu"),a=this.more.attr("aria-controls");i?this.moreMenu=i.menu:(this.moreMenu=$("#".concat(a)),this.moreMenu.length&&void 0!==a||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var s,o=[];this.items.not(this.more).not(".ignore-in-menu").filter(function(){return $(this).parent(".buttonset, .inline").length}).each(function(){o.push(t.buildMoreActionsMenuItem($(this)))}),o.reverse(),$.each(o,function(f,m){""!==m.text()&&m.prependTo(t.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(s=this.settings.moreMenuSettings.attributes),s&&s.length||!Array.isArray(this.settings.attributes)||(s=this.settings.attributes.map(function(f){var m="".concat(f.value,"-actionbutton");return{name:f.name,value:m}})),null!==(e=s)&&void 0!==e&&e?.length||(s=null);var c=_.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:s},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});i?this.more.on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}).triggerHandler("updated",[c]):this.more.popupmenu(c).on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}),function(){t.items.attr("tabindex","0");var f=t.buttonset.children("button");f&&f.attr("tabindex","0");var m=t.items.filter(".is-selected");if(m.length)return t.activeButton=m.first().attr("tabindex","0"),void t.items.not(t.activeButton).removeClass("is-selected");m=t.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),t.activeButton=m,t.element.is(":hidden, .is-hidden")?t.activeButton=t.items.filter(":not(:disabled)").first().attr("tabindex","0"):t.isItemOverflowed(m)&&(m.attr("tabindex","-1"),t.activeButton=t.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var d=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");d.length&&d.trigger("reanimate");var p=this.buttonset.find(".toolbar-searchfield-wrapper .searchfield");return p.length&&p[0].setAttribute("tabindex","0"),this},buildMoreActionsMenuItem:function(e){var t;if(!0===e.data("skipit"))return e.data("skipit",void 0),t;var n=e.data("action-button-link");n&&n.length?t=n.parent():(t=$("<li></li>"),n=$('<a href="#"></a>').appendTo(t),e.data("action-button-link",n),n.data("original-button",e)),e.hasClass("hidden")&&t.addClass("hidden"),e.is(":disabled")?(t.addClass("is-disabled"),n.prop("disabled",!0)):(t.removeClass("is-disabled"),n.prop("disabled",!1)),n.text(this.getItemText(e));var i=$.getBaseURL("#icon-dropdown"),a=e.children(".icon").filter(function(){var m=$(this).getIconName();return m&&m!==i&&-1===m.indexOf("dropdown")});a&&a.length&&(n.html("<span>".concat(n.text(),"</span>")),a.clone().detach().prependTo(n));var s=t.find("b");s.length&&(this.moreMenu.addClass("has-icons"),s.detach().prependTo(t));var o=this.items.not(this.more).not(".searchfield").index(e);if(e.is(".btn-menu")){var c,d;this.settings.attributes&&this.settings.attributes.length&&(d=this.settings.attributes.map(function(m){return{name:m.name,value:"".concat(m.value,"-menubutton-").concat(o)}})),null!==(c=d)&&void 0!==c&&c?.length||(d=null),e.data("popupmenu")?n.children(".icon.arrow").length||n.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu({attributes:d});var p=e.data("popupmenu").menu,f=p.clone();!function m(b,C,T){var S,M=b.children("li"),L=C.attr("id");C.children("li").each(function(z,V){var N=$(V),U=M.eq(z),G=N.children("a"),Z=U.children("a"),oe=N.attr("id"),le=G.attr("id");oe&&N.removeAttr("id").attr("data-original-menu-item",oe),le&&G.removeAttr("id").attr("data-original-menu-anchor",le),Z.data("action-button-link",G),G.data("original-button",Z);var re=U.children(".wrapper").children(".popupmenu"),J=N.children(".wrapper").children(".popupmenu");re.length&&J.length&&m(re,J,N)}),C.removeAttr("id").attr("data-original-menu",L),T.addClass("submenu"),T.is(t)&&((S=T.children(".wrapper"))&&S.length||(S=$('<div class="wrapper"></div>')),S.html(C),T.append(S))}(p,f,t)}return e.is("[data-popdown]")&&e.popdown(),t},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each(function(){var n,i=$(this),a=i.parent(),s=i.data("originalButton"),o=t.getItemText(s);s&&(i.find("span").length?i.find("span").text(o.trim()):i.text(o.trim()),s.isHiddenAtBreakpoint()||s.parent().isHiddenAtBreakpoint()?a.addClass("hidden"):a.removeClass("hidden"),s.parent().is(".is-disabled")||s.is(":disabled")?(a.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(a.removeClass("is-disabled"),i.prop("disabled",!1)),s.is("a")&&(s.parent("li").is(".is-checked")?a.addClass("is-checked"):a.removeClass("is-checked")),s.is(".btn-menu")&&(n=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(n)))})},getItemText:function(e){if(!e)return"";var t,n=e.find("span").first(),i=e.attr("title"),a=e.data("tooltip");return t=""!==i&&void 0!==i?i:(a&&"string"==typeof a.content?a.content:void 0)||(n.length?n.text():e.text()),$e.stripHTML(t)},handleEvents:function(){var e=this;return this.items.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("click.toolbar",function(t){e.handleClick(t)}).on("collapsed.toolbar.searchfield",function(){setTimeout(function(){e.handleResize()},150)}),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",function(){var t,n=$(this);n.is(".is-overflowed")?(t=e.getLastVisibleButton())&&t.length&&t[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(n&&n.focus(),e.buttonset.scrollTop(0))}),this.items.not(this.more).on("selected.toolbar",function(t,n){t.stopPropagation(),e.handleSelected(t,n)}),this.more.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("beforeopen.toolbar",function(){e.adjustMenuItemVisibility()}).on("selected.toolbar",function(t,n){t.stopPropagation(),e.handleSelected(t,n)}),this.more.on("show-submenu.toolbar",function(t,n){e.handleTransferToMenuButtonItem(t,n)}),this.element.on("updated.toolbar",function(t,n){t.stopPropagation(),e.updated(n)}).on("recalculate-buttons.toolbar",function(t,n){e.handleResize(n)}).on("scrollup.toolbar",function(){var t=e.element.parents(".tab-container.module-tabs");t.length&&t.scrollTop(0)}),$("body").on("resize.toolbar-".concat(this.id),function(){e.handleResize()}),this.handleResize(),this},handleTransferToMenuButtonItem:function(e,t){var n=t.children("a").data("original-button");if(n){var i=n.data("popupmenu");i&&"function"==typeof i.settings.beforeOpen&&(i.callSource(e),this.buildMoreActionsMenuItem(n))}},handleSelected:function(e,t){var n,i,a,s,o=t.data("original-button");if(t.parent().is(".hidden, .is-disabled")||t.is("[readonly], [disabled]"))e.preventDefault();else{if(o&&o.length>0){if(n=o.listEvents(),i=this.element.listEvents(),this.setActiveButton(o),o.is("[data-popdown]")&&(s=o.data("popdown"),this.isItemOverflowed(o)&&(s.settings.trigger=this.more,s.updated())),o.attr("ng-click")||o.attr("data-ng-click"))return void o.trigger("click");for(var c=["click","touchend","touchcancel"],d=0;d<c.length;d++){var p=c[d];if(i&&i[p]&&i[p].delegateCount>0){var f=this.element,m=$.Event(p);return m.target=f.find(o)[0],void f.trigger(m)}if(n&&n[p]||o[0]["on".concat(p)])return void o.trigger(p)}return s=(a=o.parents(".popupmenu")).data("trigger"),a.length&&s instanceof $&&s.length?void s.triggerHandler("selected",[o]):void this.triggerSelect(o)}this.triggerSelect(t)}},handleClick:function(e){return this.setActiveButton($(e.currentTarget)),this.triggerSelect($(e.currentTarget)),!1},handleKeys:function(e){var t=e.which,n=$(e.target),i=n.is(".btn-actions"),a=P.isRTL();(37===t&&n.is(":not(input)")||38===t&&n.is(":not(input.is-open)"))&&(e.preventDefault(),i?this.setActiveButton(a?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(a?1:-1)),(39===t&&n.is(":not(input)")||40===t&&n.is(":not(input.is-open)"))&&(e.preventDefault(),i?this.setActiveButton(a?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(a?-1:1))},handleResize:function(e){for(var t=this.getButtonsetButtons(),n=0;n<t.length;n++)t[n].removeClass("is-overflowed");this.settings.resizeContainers&&this.sizeContainers(e?e.title:void 0,e?e.buttonset:void 0),this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(e,t){var n=this.element[0],i=this.title[0],a=this.buttonset[0],s=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return a.style.width="",i.style.width="",void n.classList.remove("do-resize");a.style.width="",i.style.width="",n.classList.contains("do-resize")||n.classList.add("do-resize");var o=$(n).getHiddenSize(),c=$(a).getHiddenSize(),d=$(i).getHiddenSize(),p=$(s).getHiddenSize(),f=parseInt(o.padding.left,10)+parseInt(o.padding.right,10);isNaN(p.width)&&(p.width=50),(isNaN(c.width)||c.width<0)&&(c.width=0);var m,b=this,C=void 0!==e&&!isNaN(e),T=void 0!==t&&!isNaN(t);this.cutoffTitle=!1;var S=function(){if(C)return parseInt(e,10);if(!0===b.settings.favorButtonset){var V=z();return V=V>0?V:$(a).width(),$(window).width()-(f+V+p.width-10)}return d.scrollWidth}(),M=z();if(this.settings.favorButtonset)return S<74&&(this.cutoffTitle=!0,m=Math.abs(S-74),S=74,M-=m),a.style.width=L(M+2),i.style.width=L(S-2),this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu(a.offsetWidth<a.scrollWidth)),i.textContent&&S<at.textWidth(i.textContent.trim())&&(this.cutoffTitle=!0),void(S>at.textWidth($(i).find("h1").text().trim())&&(this.cutoffTitle=!1));M<0&&(this.cutoffTitle=!0,m=Math.abs(M-0),M=0,S-=m),i.style.width=L(S+2),a.style.width=L(M-2)}function L(V){return"".concat(V,"px")}function z(){var V;V=T?parseInt(t,10):!0===b.settings.favorButtonset?c.width:o.width,!T&&o.width-V<d.width&&(V-=f+(C?parseInt(e,10):d.scrollWidth)+p.width);var N=b.buttonsetItems.filter(".searchfield").data("searchfield");return N&&!0===N.settings.showGoButton&&(V=V+N.goButton.width()>V?V+N.goButton.width():V),V}},navigate:function(e){var t,n=this.items.filter(":visible:not(:disabled)"),i=n.index(this.activeButton)+e;i>=0&&i<n.length&&(t=n.eq(i)),i>=n.length&&(t=n.first()),-1===i&&(t=n.last()),this.isItemOverflowed(t)&&(t=this.more),this.setActiveButton(t)},getLastVisibleButton:function(){for(var e,t,n=$(this.items.get().reverse()).not(this.more),i=0;!e&&i<n.length;){if(t=$(n[i]),!this.isItemOverflowed(t)){e=t;break}i++}for(e&&0!==e.length||(e=n.first());e.length&&e.is(".separator, *:disabled, *:hidden");)e=e.prev();return e},getFirstVisibleButton:function(){for(var e=0,t=this.items,n=t.eq(e);n.is(".separator, *:disabled, *:hidden");)e++,n=t.eq(e);return n},setActiveButton:function(e,t){if(e[0]!==this.activeButton[0]){var n=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(e.is("a"))return i();var a=n.more.data("tooltip");return e[0]===n.more[0]?(a&&a.tooltip.is(":not(.hidden)")&&a.hide(),i()):n.isItemOverflowed(e)&&!e.is(".searchfield")?i():e}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!t&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function i(){return n.moreButtonIsDisabled()||!n.element.hasClass("has-more-button")?n.getLastVisibleButton():n.more}},triggerSelect:function(e){var t=$(e);t.is(this.more)||t.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[t])},getButtonsetButtons:function(){for(var e,t=[],n=this.buttonsetItems,i=0;i<n.length;i++)void 0!==(e=n.eq(i)).data("action-button-link")&&e.is(":not(.searchfield)")&&t.push(e);return t},getVisibleButtons:function(e){var t,i=[],a=[];e&&Array.isArray(e)||(e=this.getButtonsetButtons());for(var s=0;s<e.length;s++)e[s][0].classList.remove("is-overflowed");for(var o=0;o<e.length;o++)this.isItemOverflowed(t=e[o])?i.push(t):a.push(t);return{visible:a,hidden:i}},adjustMenuItemVisibility:function(e){var t="removeClass";function n(s,o){var c=s[0],d=s.data("action-button-link").parent()[0],p=s.isHiddenAtBreakpoint();if(o)return d.classList.add("hidden"),void c.classList.remove("is-overflowed");p||d.classList.remove("hidden"),c.classList.add("is-overflowed"),s.find(".icon").length&&(t="addClass")}e||(e=this.getVisibleButtons());for(var i=0;i<e.visible.length;i++)n(e.visible[i],!0);for(i=0;i<e.hidden.length;i++)n(e.hidden[i],!1);var a=0;this.moreMenu.find(".icon").each(function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||a++}),a>0&&(t="addClass"),this.moreMenu[t]("has-icons")},isItemOverflowed:function(e){if(this.moreButtonIsDisabled())return!1;if(!e||0===e.length)return!0;var t=this.buttonsetItems.filter(":not(.hidden)").index(e),n=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(n-=1),this.title.length&&t>=n)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),e instanceof $&&e.length&&(e=e[0]);var i=e.classList,a=window.getComputedStyle(e);if(i.contains("btn-actions"))return!0;if(i.contains("searchfield")||"INPUT"===e.nodeName)return!1;if("none"===a.display)return!0;var s=P.isRTL(),o=e.getBoundingClientRect(),c=this.buttonset[0].getBoundingClientRect();return o.bottom>=c.bottom||!0==(s?o.left<=c.left:o.right>=c.right)},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return Sa(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.moreButtonIsDisabled()){var t=this.moreMenu.children("li:not(.separator)"),n=t.not(".hidden"),i="removeClass";(n.length>0||e)&&(i="addClass"),this.element[i]("has-more-button");var a=this.more.data("popupmenu");if("removeClass"===i){if(!a)return;a.close();var s=a.menu.find("li:not(.separator)").children("a"),o=!1;if(s.add(this.more).each(function(){document.activeElement===this&&(o=!0)}),o){var c=this.getLastVisibleButton()[0];c&&c.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var e=1===this.element.closest(".header").length,t=this.element.attr("id")||"",n=this.element.children(".title"),i=this.element.prev("label"),a=this.element.prev(".label"),s=e?$("header.header").find("h1").text():n.length?n.filter("div").text():i.length?i.text():a.length?a.text():"".concat(t," ").concat(P.translate("Toolbar"));this.element.attr("aria-label",s.replace(/\s+/g," ").trim())}},updated:function(e){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var e=this;$("body").off("resize.toolbar-".concat(this.id));var t=void 0===this.moreMenu?[]:this.moreMenu.children("li");if(t.each(function(){e.teardownMoreActionsMenuItem($(this),!0)}),t.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each(function(s,o){var c=$(o).data("tooltip");c&&"function"==typeof c.destroy&&c.destroy();var d=$(o).data("button");d&&"function"==typeof d.destroy&&d.destroy(),o.classList.remove("is-overflowed"),o.removeAttribute("tabindex")}),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var n=this.title.off("beforeshow.toolbar").data("tooltip");n&&"function"==typeof n.destroy&&n.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var i=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),a=i.data("searchfield");a&&"function"==typeof a.destroy&&i.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(e,t){var n=this,i=$(e),a=i.children("a"),s=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var o,c=i.find(".icon");c.length&&c.remove(),i.is(".submenu")&&(o=i.children(".wrapper").children(".popupmenu")).children("li").each(function(){n.teardownMoreActionsMenuItem($(this),!0)}),s&&s.length&&($.removeData(a[0],"original-button"),$.removeData(s[0],"action-button-link"),a.remove(),o&&o.off().parent(".wrapper").off().remove(),t&&i.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(e){return this.each(function(){var t=$.data(this,"toolbar");t?t.updated(e):t=$.data(this,"toolbar",new Us(this,e))})};var Ia=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],As={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!0,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}},attributes:null};function no(e,t){this.settings=_.mergeSettings(e,t,As),null!=t&&t?.buttons&&(this.settings.buttons=t.buttons),this.element=$(e),this.init()}no.prototype={get toolbarAPI(){var e;return this.toolbar&&this.toolbar.length&&(e=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),e},init:function(){var e=this;if(this.id="".concat(_.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var t=this.settings;if(t.anchor=$.extend({},As.anchor,t.anchor),t.image=$.extend({},As.image,t.image),t.anchor.defaultUrl=t.anchor.url,t.anchor.defaultClass=t.anchor.class,t.anchor.defaultTargetText=t.anchor.target,t.anchor.defaultIsClickable=t.anchor.isClickable,t.anchor.targets=t.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,function(c,d){e.settings.anchor.defaultTargetText.toLowerCase()===c.toLowerCase()&&(e.settings.anchor.target=d,e.settings.anchor.defaultTarget=d)}),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new Ri("legacyDefault","Default")),this.settings.firstHeader&&(ei("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Ri("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(ei("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Ri("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),t.buttons&&t.buttons.editor){for(var n=!1,i=[new Ri("default","Default","p")],a=t.buttons.editor.filter(function(c){return"header"===c.substr(0,6)}),s=0;s<a.length;s++){var o=a[s].substr(6,1);n=!0,i.push(new Ri("header".concat(o),"Header ".concat(o),"h".concat(o)))}"separator"===t.buttons.editor[0]&&t.buttons.editor.splice(0,1),n&&(t.buttons.editor=t.buttons.editor.filter(function(c){return"header"!==c.substr(0,6)}),t.fontpickerSettings={styles:i}),n&&(t.buttons.editor=["fontPicker"].concat(t.buttons.editor))}return t.anchor.defaultTarget||(t.anchor.target&&$.trim(t.anchor.target).length?t.anchor.defaultTarget=t.anchor.target:(t.anchor.defaultTargetText=P.translate("SameWindow"),t.anchor.defaultTarget=t.anchor.targets[t.anchor.defaultTargetText])),this.setup(),"string"==typeof t.paragraphSeparator&&/^(p|br|div)$/.test(t.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,t.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox","aria-labelledby":this.container.find(".label").length?this.container.find(".label")[0].id:"no-id"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindSelection:function(e){var t=this;clearTimeout(e),e=setTimeout(function(){t.checkSelection()},this.settings.delay)},bindSelect:function(){var e=this;return this.getCurrentElement().on("mouseup.editor",function(){e.bindSelection("")}),this},bindParagraphCreation:function(){var e=this;return this.getCurrentElement().on("keyup.editor",function(t){var n=e.getSelectionStart(),i=n.tagName.toLowerCase();if(n&&n.getAttribute("data-editor")&&0===n.children.length&&document.execCommand("formatBlock",!1,"p"),13===t.which){if(n=e.getSelectionStart(),"blockquote"===i)return;"li"===i||e.isListItemChild(n)||(t.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===i&&document.execCommand("unlink",!1,null))}e.bindSelection("")}),this},bindTab:function(){var e=this;return this.getCurrentElement().on("keydown.editor",function(t){if(9===t.which){var n=e.getSelectionStart();if(!n||!n.tagName)return;var i=n.tagName.toLowerCase();"pre"===i&&(t.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===i&&(t.preventDefault(),document.execCommand(t.shiftKey?"outdent":"indent",t))}if(8===t.which){var a=e.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===a&&e.element.html("")}}),this},setExcludedButtons:function(){var e,t,n,a=function(s,o){var c=-1,d=0;return s.filter(function(p,f){var m=!0;return o.indexOf(p)>-1&&"separator"!==p?(d++,m=!1):"separator"===p&&f-d-1===c&&(d=0,m=!1),"separator"===p&&(c=f),m})};return t=(e=this.settings).buttons,n=e.excludeButtons,this.sourceViewActive()?n&&n.source&&n.source.length?a(t.source,n.source):t.source:n&&n.editor&&n.editor.length?a(t.editor,n.editor):t.editor},createToolbar:function(){var e=this;if(this.toolbar)return this;var t=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),n="",i="";this.settings.useFlexToolbar&&(n="toolbar-section ",i='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var a=this.setExcludedButtons(),s="",o=0,c=a.length;o<c;o+=1){var d=this.buttonTemplate(a[o]);d&&this.element.hasClass("source-view-active")&&"visual"!==a[o]&&(d=d.replace('type="button"','type="button" disabled')),d&&(s+=d)}var p="";this.settings.attributes&&(p=this.getAutomationAttributes("-editor-toolbar"),p=JSON.stringify(p),p=' data-options=\'{"attributes": '.concat(p,"}'"));var f='<div class="'.concat(t,'" data-init="false" id="editor-toolbar-').concat(this.id,'"').concat(p,'>\n      <div class="').concat(n,'buttonset">\n        ').concat(s,"\n      </div>\n      ").concat(i,"\n    </div>");this.toolbar=this.element.parent().find(".icon-dirty").length?$(f).insertBefore(this.element.parent().find(".icon-dirty")):$(f).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var m=this.toolbar.find('[data-action="fontStyle"]').first();if(m&&m.length){if(this.settings.attributes){var b=this.getAutomationAttributes("-editor-fontpicker");"object"===Ge(this.settings.fontpickerSettings.popupmenuSettings)?this.settings.fontpickerSettings.popupmenuSettings.attributes=b:this.settings.fontpickerSettings.popupmenuSettings||(this.settings.fontpickerSettings.popupmenuSettings={attributes:b})}m.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=m,this.fontPickerElem.tooltip({placementOpts:{x:40}})}var C=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return C.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",C).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),C.on("beforeopen.editor",function(T,S){var M=e.toolbar.data("toolbar")||e.toolbar.data("toolbar-flex");M&&M.overflowedItems.forEach(function(L){"colorpicker"===L.type&&S&&S.parent(".popupmenu-wrapper").off("afterplace.editor").one("afterplace.editor",function(z,V){if(void 0===V.width){var N,U,G=(((null===(N=V.container)||void 0===N||null==N?void 0:N.outerWidth())||-1)-((null===(U=V.element)||void 0===U||null==U?void 0:U.outerWidth())||-1))/2;G>-1&&V.element.css("left","".concat(G,"px"))}})})}),this},getAutomationAttributes:function(e){var t=this,n=this.settings,i=n.attributes;if(n.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(n.attributes))i=[],n.attributes.forEach(function(s){var o="function"==typeof s.value?s.value(t):s.value;i.push({name:s.name,value:o+e})});else{var a="function"==typeof n.attributes.value?n.attributes.value(this):n.attributes.value;i={name:n.attributes.name,value:a+e}}return i},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var e=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text($e.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",Ms(function(t){72!==t.keyCode&&!t.ctrlKey&&$(".modal.is-visible").length<1&&(e.textarea.text($e.sanitizeHTML(e.element.html().toString())),e.resetEmptyEditor(t),e.element.trigger("change"))},400)),$("html").on("themechanged.".concat("editor"),function(){e.setRowsHeight(),e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var e,t,n,i,a,s,o,c,d=mt.currentTheme.id&&(mt.currentTheme.id.indexOf("uplift")>-1||mt.currentTheme.id.indexOf("new")>-1);null!==(e=this.settings)&&void 0!==e&&null!==(t=e?.rows)&&void 0!==t&&t?.editor&&this.element.height((null===(a=this.settings)||void 0===a||null===(s=a?.rows)||void 0===s||null==s?void 0:s.editor)*(d?26:22.2)),null!==(n=this.settings)&&void 0!==n&&null!==(i=n?.rows)&&void 0!==i&&i?.source&&this.element.parent().find(".editor-source").height(26*(null===(o=this.settings)||void 0===o||null===(c=o?.rows)||void 0===c||null==c?void 0:c.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var e="p"===this.settings.paragraphSeparator?"p":"div",t=this.element.html().toString().trim();"<br>"!==(t=this.element.html().toString().trim())&&t!=="<".concat(e,"><br></").concat(e,">")||this.element.html(""),this.element.contents().filter(function(){return 3===this.nodeType&&""!==this.textContent.trim()}).wrap("<".concat(e,"></").concat(e,">")),t=this.element.html().toString().trim(),this.textarea.html($e.sanitizeHTML(t));var n=this.saveSelection(),i=function(c){return"number"==typeof c},a=function(c){return(d=c)&&d[0]&&i(d[0].startOffset)&&i(d[0].endOffset)?{start:c[0].startOffset,end:c[0].endOffset}:null;var d},s=a(this.savedSelection),o=a(n);null!==s&&null!==o&&s.start===o.start&&s.end===o.end||this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var e=this.element.html().toString().trim();((e||"").match(/>\s+</g)||[]).length>0&&this.element.html(e.replace(/>\s+</g,"><"))},orderedListTypeStyling:function(){var e=this.getCurrentElement(),t=this.element;switch(e.find("ol").attr("type")){case"a":t.addClass("type-l-alpha"),t.removeClass("type-u-alpha");break;case"A":t.addClass("type-u-alpha"),t.removeClass("type-l-alpha");break;case"i":t.addClass("type-l-roman"),t.removeClass("type-u-roman");break;case"I":t.addClass("type-u-roman"),t.removeClass("type-l-roman")}},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var e=$('<div class="text-container"></div>').appendTo(this.sourceView),t="source-textarea-".concat($('[id^="source-textarea-"]').length+1),n="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(t,'">').concat(n,"</label>")).appendTo(e),$('<textarea id="'.concat(t,'" class="editable"></textarea>')).appendTo(e)},triggerClick:function(e,t){$('button[data-action="'.concat(t,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var e=this,t=this.getCurrentElement(),n={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return t.on("keydown.editor",function(i){switch(n.charCode=(i=i||window.event).which?i.which:!!i.keyCode&&i.keyCode,i.ctrlKey&&n.charCode){case n.h3:e.triggerClick(i,"append-".concat(e.settings.firstHeader));break;case n.h4:e.triggerClick(i,"append-".concat(e.settings.secondHeader));break;case n.b:e.triggerClick(i,"bold"),i.preventDefault();break;case n.e:e.triggerClick(i,"justifyCenter");break;case n.h:e.triggerClick(i,"anchor"),i.preventDefault();break;case n.i:e.triggerClick(i,i.shiftKey?"image":"italic"),i.shiftKey||i.preventDefault();break;case n.bl:i.shiftKey&&e.triggerClick(i,"insertunorderedlist"),i.preventDefault();break;case n.l:i.shiftKey||e.triggerClick(i,"justifyLeft"),i.preventDefault();break;case n.n:i.shiftKey&&e.triggerClick(i,"insertorderedlist");break;case n.q:e.triggerClick(i,"append-blockquote");break;case n.r:e.triggerClick(i,"justifyRight");break;case n.u:e.triggerClick(i,"underline"),i.preventDefault();break;case n.space:e.triggerClick(i,"clearFormatting");break;case n.sv:e.triggerClick(i,t===e.element?"source":"visual")}}),this.element.on("mousedown.editor","a",function(i){var a=$(this).attr("href");"firefox"!==Ie.browser.name&&"mac"===Ie.os.name&&(i.metaKey||i.ctrlKey)&&(window.open(a,"_blank"),i.preventDefault())}),this.element.on("updated.editor",function(){e.updated()}),this},setupTextareaEvents:function(){var e=this;return this.textarea.off(".editor").on("input.editor keyup.editor",function(){e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}).on("focus.editor",function(){e.sourceView.addClass("is-focused")}).on("blur.editor",function(t){e.sourceView.removeClass("is-focused"),e.element.empty().html($e.sanitizeHTML(e.textarea.val())),e.element.data("validate")&&e.element.data("validate").validate(e.element,!0,t)}),this},adjustSourceLineNumbers:function(){var e=this.textarea.parent(),t=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),n=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var i=this.textarea[0].scrollHeight,a=Math.floor((i-n)/t),s=this.sourceView.find(".line-numbers"),o=s.find("li").length,c="",d=0;if(!this.lineNumbers||a!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<a){for(;d<a-this.lineNumbers;)c+='<li role="presentation"><span>'.concat(o+d+1,"</span></li>"),d++;s.append(c)}else this.lineNumbers>a&&(d=this.lineNumbers-a,s.find("li").slice(-d).remove());else{for(this.lineNumbers=a;d<this.lineNumbers;)c+='<li role="presentation"><span>'.concat(d+1,"</span></li>"),d++;s.append(c)}this.lineNumbers=a}e[0].style.width="calc(100% - ".concat(s.outerWidth()+2,"px)"),i===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(s[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(e,t,n){var i,a;switch(n){case"bold":i=["<b>","</b>"];break;case"italic":i=["<i>","</i>"];break;case"underline":i=["<u>","</u>"];break;case"strikethrough":i=["<strike>","</strike>"];break;case"append-blockquote":i=["<blockquote>","</blockquote>"];break;default:i=["",""]}if("anchor"===n){var s=$('<a href="'.concat(e,'">').concat(t,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&s.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&s.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?s.attr("contenteditable",!1):s.removeAttr("contenteditable"),a=s[0].outerHTML}else a=i[0]+e+t+i[1];return a},insertTextAreaContent:function(e,t){var n,i,a,s,o=this.textarea[0],c=o.value;e=e||"",document.selection&&"TEXTAREA"===o.tagName?($(o).focus(),(n=document.selection.createRange()).text=this.wrapTextInTags(e,n.text,t),$(o).focus()):o.selectionStart||"0"===o.selectionStart?(s=o.scrollTop,n=this.wrapTextInTags(e,c.substring(i=o.selectionStart,a=o.selectionEnd),t),o.value=c.substring(0,i)+n+c.substring(a,c.length),$(o).focus(),o.selectionStart=i+n.length,o.selectionEnd=i+n.length,o.scrollTop=s):(o.value+=this.wrapTextInTags(e,o.value,t),$(o).focus(),o.value=o.value)},buttonTemplate:function(e){var t=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(t.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(t.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(P.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(t.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(t.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(P.translate("TextColor"),'" data-action="foreColor" data-element="foreColor" data-init="false">').concat(t.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(P.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(t.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(t.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(t.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("InsertLink"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(t.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(t.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(t.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(t.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(t.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(t.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(t.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" title="'.concat(P.translate("ChooseFont"),'" data-action="fontStyle" data-init="false"><span>',"FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(t.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(t.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("JustifyRight"),'" data-action="justifyRight" >').concat(t.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(t.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ViewSource"),'" data-action="source" >').concat(t.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(P.translate("ViewVisual"),'" data-action="visual" >').concat(t.visual,"</button>")}[e]||!1},getIcon:function(e,t,n){return'<span class="audible">'.concat(P.translate(e),"</span>").concat($.createIcon({classes:n||"",icon:t}))},getButtonLabels:function(e){var t,n={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertLink","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewVisual","visual","visual-icon")};if("object"===Ge(e)&&(t=e),"object"===Ge(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},activateButton:function(e){this.toolbar.find('[data-element="'.concat(e,'"]')).addClass("is-active")},bindButtons:function(){var e=this,t=this;function n(i,a){var s=a instanceof gi?$(a.element):$(i.target);if(!s.is(".btn-actions")){var o=s.attr("data-action"),c=t.getCurrentElement();return i.preventDefault(),c.focus(),t.checkSelection(),t.sourceViewActive()||s.toggleClass("is-active"),o&&t.execAction(o,i),("ie"===Ie.browser.name||Ie.browser.isEdge())&&c.trigger("change"),!s[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",n),this.toolbar.on("click.editor",".colorpicker-editor-button",n)):this.toolbar.on("click.editor","button",n),this.fontPickerElem&&this.fontPickerElem.on("font-selected",function(i,a){e.execFormatBlock(a.tagName)}),this},bindModals:function(){var e=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!1}).on("beforeopen",function(){e.savedSelection=e.saveSelection(),$(this).attr("id"),"modal-url-".concat(e.id)}).off("open").on("open",function(){var t=Ie.features.touch,n=$(this).attr("id"),i=$("input:first",this),a=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(e.id,'"]')).val(e.settings.anchor.url),$('[name="em-class-'.concat(e.id,'"]')).val(e.settings.anchor.class),$('[name="em-target-'.concat(e.id,'"]')).val(e.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",e.settings.anchor.isClickable),setTimeout(function(){t&&n==="modal-image-".concat(e.id)?a.focus():i.focus().select()},10)}).off("beforeclose").on("beforeclose",function(){var t=$(this).is(".editor-modal-image")?"image":"anchor";if(e.toolbar){var n=e.toolbar.find('[data-action="'.concat(t,'"]')),i=$(this).data("modal");n&&i&&(i.settings.noRefocus=e.isBtnOverflowedItem(n))}}).off("close").on("close",function(t,n){if(e.restoreSelection(e.savedSelection),!n)if($(this).attr("id")==="modal-url-".concat(e.id)){var i=$(e.findElementInSelection("a",e.element[0]));i.length?e.updateCurrentLink(i):e.createLink($('[name="em-url-'.concat(e.id,'"]'),this))}else e.insertImage(e.settings.attributes?e.settings.attributes.length>1?$('[data-automation-id="'.concat(e.settings.attributes[e.settings.attributes.length-1].value,'-editor-modal-input0"')).val():$("input[name=image-".concat(e.id,"]")).val():$('input[id*="image-editor"]').val())}),this},createURLModal:function(){var e=this,t=this.settings,n=$("#modal-url-".concat(this.id));if(n.length>0)return n;var i,a="",s=!0;$.each(t.anchor.targets,function(f,m){a+='<option value="'.concat(m,'">').concat(P.translate(f),"</option>"),e.settings.anchor.defaultTargetText.toLowerCase()===f.toLowerCase()&&(s=!1)}),s&&(a+='<option value="'.concat(t.anchor.target,'">').concat(t.anchor.target,"</option>"));var o="";t.attributes&&(i=this.getAutomationAttributes("-editor-modal"),o=JSON.stringify(i),o=' data-options=\'{"attributes": '.concat(o,"}'"));var c=$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(P.translate("InsertLink"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(P.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(t.anchor.url,'">\n          </div>\n          ').concat(t.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(t.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(P.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(P.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(t.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(P.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown"').concat(o,">\n              ").concat(a,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(P.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(P.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(t.attributes){var d=[].slice.call(c[0].querySelectorAll('[type="text"]')),p=[].slice.call(c[0].querySelectorAll("button"));d.forEach(function(f,m){return _.addAttributes($(f),e,i,"input".concat(m),!0)}),p.forEach(function(f,m){return _.addAttributes($(f),e,i,"button".concat(m),!0)})}return c.appendTo("body")},createImageModal:function(){var e=this,t=$("#modal-image-".concat(this.id));if(t.length>0)return t;var n=$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(P.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(P.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(P.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(P.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(this.settings.attributes){var i=this.getAutomationAttributes("-editor-modal"),a=[].slice.call(n[0].querySelectorAll('[type="text"]')),s=[].slice.call(n[0].querySelectorAll("button"));a.forEach(function(o,c){return _.addAttributes($(o),e,i,"input".concat(c),!0)}),s.forEach(function(o,c){return _.addAttributes($(o),e,i,"button".concat(c),!0)})}return n.appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(e){var t=$e.stripTags(document.querySelector('[name="em-url-'.concat(this.id,'"]')).value),n=$e.stripTags(document.querySelector('[name="em-class-'.concat(this.id,'"]')).value),i=$e.stripTags(document.querySelector('[name="em-target-'.concat(this.id,'"]')).value),a=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;e&&(e[0].setAttribute("href",this.fixLinkFormat(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl)),e[0].setAttribute("class",n&&$.trim(n).length?n:this.settings.anchor.defaultClass),e[0].setAttribute("data-url",(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl).replace("http://",""))),a?e.attr("contenteditable",!1):e.removeAttr("contenteditable"),i&&$.trim(i).length?e.attr("target",i):e.removeAttr("target")},createLink:function(e){var t=this;this.restoreSelection(this.savedSelection);var n=$e.stripTags(this.fixLinkFormat(e[0].value));e.val(n),this.settings.anchor.url=e.val(),this.settings.anchor.class=document.querySelector('[name="em-class-'.concat(this.id,'"]')).value,this.settings.anchor.target=document.querySelector('[name="em-target-'.concat(this.id,'"]')).value,this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;var i=$('<a data-url="'.concat(n,'" href="').concat(n,'">').concat(n,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&i.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&i.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?i.attr("contenteditable",!1):i.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(e.val(),"anchor");else{var a,s,o,c,d;if(!this.selection.isCollapsed||Ie.browser.isIE11()){if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){s=a.getRangeAt(0),""!==(c="".concat(s)).trim()&&i.html(c);for(var p=(o=s.commonAncestorContainer.children)?o.length:0,f=0;f<p;f++){var m=o[f];m instanceof HTMLImageElement&&(d=m)}d&&i.html(d.outerHTML),s.deleteContents();var b=document.createElement("div");b.innerHTML=i[0].outerHTML;for(var C,T,S=document.createDocumentFragment();C=b.firstChild;)T=S.appendChild(C);s.insertNode(S),T&&((s=s.cloneRange()).setStartAfter(T),s.collapse(!0),a.removeAllRanges(),a.addRange(s))}}else document.execCommand("insertHtml",null,i[0].outerHTML),setTimeout(function(){t.getCurrentElement().focus()},1);this.element.trigger("change"),this.bindAnchorPreview()}},fixLinkFormat:function(e){return e.match(/^https?:\/\//)?e:"http://".concat(e)},checkSelection:function(){var e;if(void 0===this.selection&&this.sourceViewActive())return e=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();e=window.getSelection();var t=this.getSelectionElement();return t?this.checkSelectionElement(e,t):this.hideToolbarActions(),this},getSelectionElement:function(){var e,t,n,i=window.getSelection(),a=function(s){var o=s;try{for(;!o.getAttribute("data-editor");)o=o.parentNode}catch{return!1}return o};try{t=(e=i.getRangeAt(0).commonAncestorContainer).parentNode,n=e.getAttribute("data-editor")?e:a(t)}catch{n=a(t)}return n},checkSelectionElement:function(e,t){var n=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=e,this.selectionRange=this.selection.getRangeAt(0),n!==t?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var e=this.getSelectedParentElement();void 0!==e.tagName&&-1===Ia.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),!this.element.is(e));)e=e.parentNode},checkButtonState:function(e){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===e){for(var t,n,i=this.fontPickerElem.data("fontpicker"),a=i.supportedTagNames,s=this.getSelectionParentElement(),o=$(s).add($(s).parentsUntil(this.element)),c=0;c<o.length&&void 0===n;c++)if(t=o[c].tagName.toLowerCase(),a.indexOf(t)>-1){n=i.getStyleByTagName(t),i.select(n,!0);break}}else document.queryCommandState(e)?this.toolbar.find('[data-action="'.concat(e,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(e,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var e=this.selectionRange;return this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var e=this,t=e.getCurrentElement();return this.pasteWrapper=function(n){var i,a,s;i=n.originalEvent.clipboardData&&n.originalEvent.clipboardData.getData?n.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var o="";if(e.sourceViewActive())return this;if(i&&!n.defaultPrevented){for(n.preventDefault(),s=i.split(/[\r\n]/g),a=0;a<s.length;a+=1)""!==s[a]&&(navigator.userAgent.match(/firefox/i)&&0===a?o+="<p>".concat(e.htmlEntities(s[a]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(s[a])?o+='<img src="'.concat(e.htmlEntities(s[a]),'" />'):o+="<p>".concat(e.htmlEntities(s[a]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,o),!1;e.pasteHtmlAtCaret(o)}},this.pasteWrapperHtml=function(n){if(e.sourceViewActive())return this;var i,a,s,o,c;if((n.clipboardData||n.originalEvent)&&(n.clipboardData&&n.clipboardData.types?a=n.clipboardData:n.originalEvent&&n.originalEvent.clipboardData&&n.originalEvent.clipboardData.getData&&(a=n.originalEvent.clipboardData)),a&&a.types)((i=a.types)instanceof DOMStringList&&i.contains("text/html")||i.indexOf&&-1!==i.indexOf("text/html")||Ie.browser.isEdge())&&(s=n.originalEvent.clipboardData.getData("text/html")),i instanceof DOMStringList&&i.contains("text/plain")&&(s=n.originalEvent.clipboardData.getData("text/plain")),"object"===Ge(i)&&i[0]&&"text/plain"===i[0]&&!i[1]&&(s=$e.escapeHTML(n.originalEvent.clipboardData.getData("text/plain"))),i instanceof Array&&i.indexOf("text/plain")>-1&&i.indexOf("text/html")<0&&(s=$e.escapeHTML(n.originalEvent.clipboardData.getData("text/plain")));else for(c=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),s="",o=0;o<c.length;o+=1)""!==c[o]&&(navigator.userAgent.match(/firefox/i)&&0===o?s+="<p>".concat(e.htmlEntities(c[o]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(c[o])?s+='<img src="'.concat(e.htmlEntities(c[o]),'" />'):s+="<p>".concat(e.htmlEntities(c[o]),"</p>"));return e.pastedData=Ie.browser.isIE11()?s:e.getCleanedHtml(s),$.when(e.element.triggerHandler("beforepaste",[{pastedData:e.pastedData}])).done(function(){if(e.pastedData&&!n.defaultPrevented){if(Ie.browser.isIE11()||Ie.browser.isEdge()||n.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,e.pastedData),!1;e.pasteHtmlAtCaret(e.pastedData)}e.element.triggerHandler("afterpaste",[{pastedData:e.pastedData}]),e.pastedData=null}),!!Ie.browser.isIE11()&&void 0},t.on("paste.editor",e.settings.pasteAsPlainText?e.pasteWrapper:e.pasteWrapperHtml),this},pasteHtmlAtCaret:function(e){var t,n,i=this,a="x-text-content-templ-x";if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents(),Ie.browser.isIE11()&&(e=a);var s=document.createElement("div");s.innerHTML=e;for(var o,c,d=document.createDocumentFragment();o=s.firstChild;)c=d.appendChild(o);if(n.insertNode(d),c&&((n=n.cloneRange()).setStartAfter(c),n.collapse(!0),t.removeAllRanges(),t.addRange(n)),Ie.browser.isIE11()){for(var p=50,f=$.Deferred(),m=document.createDocumentFragment();i.element[0].childNodes.length>0;)m.appendChild(i.element[0].childNodes[0]);(function b(C,T){--p<0?f.reject():C.childNodes&&C.childNodes.length>0?(e=C.innerHTML,C.innerHTML="",C.appendChild(T),f.resolve()):setTimeout(function(){b(C,T)},5)})(i.element[0],m),$.when(f).done(function(){var b="",C=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent===a});C.length||(C=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent.indexOf(a)>-1&&"UL"!==this.tagName})),e=i.getCleanedHtml(e);var T="";/(^(\s+?)?<li)/gi.test(e)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)?(C.is("li")||(e="<ul>".concat(e,"</ul>")),T=e):T=C.is("li")?"".concat(e,"</li>"):(b=e.match(/<\/ul|<\/ol/gi)||[]).length?e:"".concat(e,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)&&(C.is("li")?T="<li>".concat(e):((b=e.match(/<ul|<ol/gi)||[]).length?e+=b[b.length-1].replace(/<(ul|ol)/gi,"<$1>"):e="<ul>".concat(e,"</ul>"),T=e)),T&&ue.html(C,T,"*"),(b=i.element[0].innerHTML).indexOf(a)>-1&&(b=b.replace(a,e)),i.element[0].innerHTML=i.getCleanedHtml(b)})}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)},getCleanedHtml:function(e){var t,n=e||"",i=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(n)&&(n=this.cleanWordHtml(n));for(var a=0,s=i.length;a<s;a++)t=new RegExp(" ".concat(i[a],'="(.*?)"'),"gi"),n=this.stripAttribute(n,i[a],t),t=new RegExp(" ".concat(i[a],"='(.*?)'"),"gi"),n=this.stripAttribute(n,i[a],t);return(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<(div|span|p)> <\/(div|span|p)>/gi," ")).replace(/<[^(br|/>)]+>[\s]*<\/[^>]+>/gi,"")).indexOf("\xb7")>-1&&(n=[(n=[(n=(n=(n=n.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>\xb7<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,n.indexOf("<li>")),"<ul>",n.slice(n.indexOf("<li>"))].join("")).slice(0,n.lastIndexOf("</li>")),"</ul>",n.slice(n.lastIndexOf("</li>"))].join("")),n},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var e=this,t=this.container,n=this.getCurrentElement(),i=this;return this.element.on("DOMNodeInserted",function(a){var s=$(a.target),o=$("<b>helper</b>");"IMG"===a.target.tagName?s.removeAttr("id style srcset"):"SPAN"===a.target.tagName&&(s.before(o),o.after(s.contents()),o.add(s).remove())}),this.container.on("focusin.".concat("editor"),".editor, .editor-source",function(){var a=$(this);t.addClass("is-active"),setTimeout(function(){a.hasClass("error")&&(t.parent().find(".editor-toolbar").addClass("error"),t.parent().find(".editor-source").addClass("error"))},100)}).on("focusout.".concat("editor"),".editor, .editor-source",function(){t.removeClass("is-active"),t.parent().find(".editor-toolbar").removeClass("error"),t.parent().find(".editor-source").removeClass("error")}),this.container.on("mouseenter.".concat("editor"),function(){e.element.hasClass("error")||e.container.addClass("is-hover")}).on("mouseleave.".concat("editor"),function(){e.container.removeClass("is-hover")}),i.settings.onLinkClick&&t.on("click.editorlinks","a",function(a){i.settings.onLinkClick(a,{elem:e,url:a.currentTarget.getAttribute("data-url")}),a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation()}),this.label.on("click.editor",function(){n.focus()}),n.attr("aria-label",this.label.text()),this},restoreSelection:function(e){var t=window.getSelection();if(e||(e=this.savedSelection),e){t.removeAllRanges();for(var n=0,i=e.length;n<i;n+=1)t.addRange(e[n])}},saveSelection:function(){var e,t=window.getSelection();if(t.getRangeAt&&t.rangeCount){e=[];for(var n=0,i=t.rangeCount;n<i;n+=1)e.push(t.getRangeAt(n));return e}return null},getSelectionStart:function(){var e=document.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(e,t){var n,i,a,s=this.getrange();if(s){for(n=a=s.commonAncestorContainer||s.parentElement();n!==t;n=n.parentNode)if(n&&n.tagName&&n.tagName.toLowerCase()===e)return n;if(!s.collapsed&&(void 0===s.text||s.text)&&a.getElementsByTagName){n=a.getElementsByTagName(e),i=document.createRange?document.createRange():document.body.createTextRange();for(var o=0,c=n.length;o<c;o++)if(document.createRange){if(i.selectNodeContents(n[o]),s.compareBoundaryPoints(Range.END_TO_START,i)<0&&s.compareBoundaryPoints(Range.START_TO_END,i)>0)return n[o]}else if(i.moveToElementText(n[o]),s.compareEndPoints("StartToEnd",i)<0&&s.compareEndPoints("EndToStart",i)>0)return n[o]}}},restoreLinkSelection:function(){var e=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,e.length){this.settings.anchor.url=e.attr("href"),this.settings.anchor.class=e.attr("class"),this.settings.anchor.target=e.attr("target");var t=e.attr("contenteditable");!1!==t&&"false"!==t||(this.settings.anchor.isClickable=!0)}},execAction:function(e){if(this.getCurrentElement()===this.element)e.indexOf("append-")>-1?this.execFormatBlock(e.replace("append-","")):"anchor"===e?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===e?this.modals.image.data("modal").open():"foreColor"===e||"backColor"===e?this.execColorActions(e):"clearFormatting"===e?this.clearFormatting():"source"===e||"visual"===e?this.toggleSource():document.execCommand(e,!1,null);else switch(e){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,e)}this.checkSelection()},insertImage:function(e){document.execCommand("insertImage",!1,e)},toggleSource:function(e){var t=this,n=function(s){return"string"==typeof s&&"false"===s.toLowerCase()||"boolean"==typeof s&&!1===s||"number"==typeof s&&0===s};if(this.sourceViewActive()&&!e){var i=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",i)).done(function(s){var c;n(s)||(c=s||t.textarea.val(),c=$e.sanitizeHTML(c),c=t.getCleanedHtml(c),t.element.empty().removeClass("source-view-active hidden"),t.sourceView.addClass("hidden").removeClass("is-focused"),t.element.trigger("focus.editor"),t.switchToolbars(),t.textarea.off("input.editor-firechange"),setTimeout(function(){var d;t.orderedListTypeStyling(),t.element[0].innerHTML=c,t.element.triggerHandler("afterpreviewmode",c=t.element[0].innerHTML);var p=null===(d=t.toolbar)||void 0===d||null==d?void 0:d.find('[data-action="source"]');p&&!t.isBtnOverflowedItem(p)&&p.focus()},0))})}else{var a=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",a)).done(function(s){n(s)||function(o){var c,d=o||t.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");t.settings.useSourceFormatter&&(d=t.formatHtml(d)),t.element.addClass("source-view-active"),t.switchToolbars(),t.textarea.val(d).focus(),t.sourceView.removeClass("hidden"),t.element.addClass("hidden"),t.adjustSourceLineNumbers(),t.textarea.focus(),d=t.textarea.val(),t.textarea.off("input.editor-firechange").on("input.editor-firechange",function(){t.element.trigger("change")}),t.element.triggerHandler("aftersourcemode",d);var p=null===(c=t.toolbar)||void 0===c||null==c?void 0:c.find('[data-action="visual"]');p&&!t.isBtnOverflowedItem(p)&&p.focus()}(s)})}},isBtnOverflowedItem:function(e){var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex"),n=!1;return t&&t.overflowedItems.forEach(function(i){e.is(i.element)&&(n=!0)}),n},clearFormatting:function(){var e,t=this,n=this.getSelectionParentElement(),i=n.tagName,a={},s=function(c){var d=window.getSelection(),p=!1;if(Ie.browser.isIE11()){var f=d.getRangeAt(0),m=document.createRange();m.selectNode(c);var b=f.compareBoundaryPoints(Range.START_TO_END,m),C=f.compareBoundaryPoints(Range.START_TO_START,m),T=f.compareBoundaryPoints(Range.END_TO_START,m),S=f.compareBoundaryPoints(Range.END_TO_END,m);p=b!==C||T!==S||b!==S}else p=d.containsNode(c,!0);return p};n&&i&&(i=i.toLowerCase(),a=function(){for(var c=function(b){return b&&b.style&&""!==b.style.textAlign},d=n,p=c(d),f=9999;!p&&f>0;)f--,p=(d=d?d.parentNode:null)&&d===t.element[0]||c(d);var m={found:d&&d!==n&&d!==t.element[0]};return m.found&&(m.elem=d,m.textAlign=d.style.textAlign),m}(),function(){var c=function(p){var f=[].slice.call(p.querySelectorAll("li"));if(f.length>0){var m=document.createDocumentFragment();f.forEach(function(C){var T=document.createTextNode(C.textContent);m.appendChild(T),m.appendChild(document.createElement("br"))});var b=f[0].parentNode;b.parentNode.insertBefore(m,b.nextSibling),b.parentNode.removeChild(b)}};if("li"===i)c(n.parentNode);else if(/ul|ol/.test(i))c(n);else{var d=n.classList.contains("editor")?n:$(n).closest(".editor").length?n.parentNode:null;d&&[].slice.call(d.querySelectorAll("ul, ol")).forEach(function(p){s(p)&&c(p)})}}(),function(){var b,T,c=function(b){var C=b.parentNode,T=document.createElement("p");T.innerHTML=b.innerHTML,C.replaceChild(T,b)};Ia.indexOf(i)>-1?"p"!==i&&(document.execCommand("removeFormat",!1,null),c(n)):Ia.forEach(function(b){"p"!==b&&[].slice.call(n.querySelectorAll(b)).forEach(function(C){return c(C)})});for(var d=[].slice.call(t.element[0].querySelectorAll("blockquote, pre")),f=0,m=d.length;f<m;f++)T=void 0,T=!1,function S(M){for(var L=0,z=M.length;L<z;L++){var V=M[L],N=[].slice.call(V.children);V===n&&(T=!0),N.length&&!T&&S(N)}}([].slice.call(d[b=f].children)),T&&(document.execCommand("removeFormat",!1,null),c(d[b]))}(),e=function(c){var d=c.parentNode;d.insertBefore(c.firstChild,c),d.removeChild(c),d.normalize()},"a"===i?e(n):[].slice.call(n.querySelectorAll("a")).forEach(function(c){s(c)&&e(c)}));var o=n.parentNode;o&&o!==this.element[0]&&[].slice.call(o.querySelectorAll("[align]")).forEach(function(c){return c.removeAttribute("align")}),document.execCommand("removeFormat",!1,null),a.found&&(a.elem.style.textAlign=a.textAlign)},getSelectionParentElement:function(){var e,t=null;return window.getSelection?(e=window.getSelection()).rangeCount&&1!==(t=e.getRangeAt(0).commonAncestorContainer).nodeType&&(t=t.parentNode):(e=document.selection)&&"Control"!==e.type&&(t=e.createRange().parentElement()),t},checkColorButtonState:function(e){var t=$('[data-action="'.concat(e,'"]'),this.toolbar),n=t.data("colorpicker"),i=document.queryCommandValue(e);return n&&"rgb(0, 0, 0)"!==i&&("firefox"===Ie.browser.name&&"backColor"===e&&(i=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof i&&(i=n.decimal2rgb(i)),i=i?n.rgb2hex(i):"",t.attr("data-value",i).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(i.toLowerCase())>-1?"":i)),{cpBtn:t,cpApi:n,color:i}},execColorActions:function(e){var t=this,n=this.checkColorButtonState(e),i=n.cpBtn,a=n.cpApi;i.one("selected.editor",function(s,o){var c=o;if(void 0===c||c instanceof $||!c.element||(c=$(o.element)),c.is("a")){var d="".concat(c.data("value")).toLowerCase();if(-1===(d="#"!==d?d:"").indexOf("#")&&(d="#".concat(d)),"#"===d&&(d=""),i.attr("data-value",d).find(".icon").css("color",d),"ie"===Ie.browser.name||"foreColor"===e)d?document.execCommand(e,!1,d):document.execCommand("removeFormat",!1,e);else{document.execCommand("fontSize",!1,"2");for(var p=t.getSelectionParentElement().parentNode.getElementsByTagName("font"),f=0,m=p.length;f<m;f++)p[f].hasAttribute("style")&&(p[f].style.backgroundColor="");setTimeout(function(){for(var b=0,C=p.length;b<C;b++)p[b].hasAttribute("size")&&(p[b].style.backgroundColor=d,p[b].removeAttribute("size"))},0)}}}),a.toggleList()},execFormatBlock:function(e){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection&&this.element.get(0)===$(this.selection.anchorNode.parentNode).parent().get(0)){var t=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&t.el&&"blockquote"===t.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(t.tagName===e&&(e="p"),"ie"===Ie.browser.name){if("blockquote"===e)return document.execCommand("indent",!1,e);e="<".concat(e,">")}document.queryCommandState("bold")&&document.execCommand("bold",!1,e),document.queryCommandState("italic")&&document.execCommand("italic",!1,e),document.queryCommandState("underline")&&document.execCommand("underline",!1,e),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,e),t.el&&t.el.innerHTML&&t.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),t.el&&t.el.innerHTML&&"<ul>"===t.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),t.el&&t.el.innerHTML&&"<ol>"===t.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),document.execCommand("formatBlock",!1,e),this.checkActiveButtons()}},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===Ia.indexOf(t);)(e=e.parentNode)&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},isListItemChild:function(e){for(var t=e.parentNode,n=t.tagName.toLowerCase();-1===Ia.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(!(t=t.parentNode)||!t.tagName)return!1;n=t.tagName.toLowerCase()}return!1},destroyToolbar:function(){var e=function(N){return N||$()};this.toolbar=e(this.toolbar),this.element=e(this.element),this.textarea=e(this.textarea);var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");t&&t.destroy();for(var n=this.toolbar.find("button"),i=0,a=n.length;i<a;i++){var s=$(n[i]).data("tooltip");s&&"function"==typeof s.destroy&&s.destroy();var o=$(n[i]).data("button");o&&"function"==typeof o.destroy&&o.destroy()}for(var c=$('[data-action="foreColor"], [data-action="backColor"]',this.element),d=0,p=c.length;d<p;d++){var f=$(c[d]).data("colorpicker");f&&"function"==typeof f.destroy&&f.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var m=this.fontPickerElem.data("fontpicker");m&&m.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var b=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(b),this.textarea.off(b),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var C=this.checkColorButtonState("foreColor"),T=C.cpBtn;if(T.off("selected.editor"),(T=(C=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var S=Object.keys(this.modals),M=0,L=S.length;M<L;M++){var z=$("#modal-".concat(S[M],"-").concat(this.id)),V=z.data("modal");z.off("beforeclose.editor close.editor open.editor beforeopen.editor"),V&&"function"==typeof V.destroy&&V.destroy(),z.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var e=this.container[0].classList,t=this.element[0].classList;if(!e.contains("is-preview")){if(!this.isEditable()){var n=["is-disabled","is-readonly","is-preview"];e.remove.apply(e,n),t.remove.apply(t,n)}this.sourceViewActive()&&this.toggleSource(),e.add("is-preview"),t.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(i){var a=$(i).data("tooltip");a&&"function"==typeof a.destroy&&a.destroy()})}},destroyPreviewMode:function(){if(this.container[0]){var e=this.container[0].classList;e.contains("is-preview")&&(e.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var e=this,t=!0,n=function(i,a){return i.classList.contains(a)};return["is-disabled","is-readonly","is-preview"].forEach(function(i){(n(e.container[0],i)||n(e.element[0],i))&&(t=!1)}),t},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,As)),this.teardown().init()},teardown:function(){this.destroyToolbar();var e=this.getCurrentElement();return this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,e.off("keyup.editor"),e.off("mouseup.editor"),this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==Ie.browser.name&&document.addEventListener&&document.addEventListener("paste",function(e){if(void 0!==e.clipboardData){var t=e.clipboardData.items[0];if(0===t.type.indexOf("image")){var n=t.getAsFile(),i=new FileReader;i.onload=function(a){document.execCommand("insertImage",!1,a.target.result)},i.readAsDataURL(n)}}},!1)},isWordFormat:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},cleanWordHtml:function(e){var t=e;t=(t=(t=(t=(t=(t=t.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"\xa0")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,c){return c.length>0?c.replace(/./," ").slice(Math.floor(c.length/2)).split("").join("\xa0"):""})).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var n=["style","script","applet","embed","noframes","noscript"],i=0,a=n.length;i<a;i++){var s=new RegExp("<".concat(n[i],".*?").concat(n[i],"(.*?)>"),"gi");t=t.replace(s,"")}return t},stripAttribute:function(e,t,n){return"style"===t?this.stripStyles(e,n):e.replace(n,"")},stripStyles:function(e,t){var n=["color","font-size","background","font-weight","font-style","text-decoration","text-align"];return e.replace(t,function(i){for(var a=(i=i.replace(/( style=|("|\'))/gi,"")).split(";"),s="",o=0;o<a.length;o++){var c=a[o].split(":");s+=n.indexOf((c[0]||"").trim())>-1?"".concat(c[0],":").concat(c[1],";"):""}return""!==s?' style="'.concat(s,'"'):""})},formatHtml:function(e){e=e.trim();var t=this.settings,n=e.split(/</),i=0,a="";function s(p){var f="",m=p*("number"==typeof t.formatterTabsize?t.formatterTabsize:4);if(p>-1)for(;m--;)f+=" ";return f}for(var o=0,c=n.length;o<c;o++){var d=n[o].split(/>/);2===d.length?("/"===n[o][0]&&i--,a+=s(i),"/"!==n[o][0]&&i++,o>0&&(a+="<"),a+="".concat(d[0].trim(),">\n"),""!==d[1].trim()&&(a+="".concat(s(i)+d[1].trim().replace(/\s+/g," "),"\n")),d[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&i--):a+="".concat(s(i)+d[0],"\n")}return a.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(e){return this.each(function(){var t=$.data(this,"editor");t?t.updated(e):t=$.data(this,"editor",new no(this,e))})};var Gs={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ys(e,t){this.settings=_.mergeSettings(e,t,Gs),this.element=$(e),this.init()}Ys.prototype={init:function(){var e=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",e.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==e.dataset&&0!==e.dataset.length&&Array.isArray(e.dataset)){if(e.dataset[0]&&e.dataset[0].children&&e.dataset[0].children.length>0||this.isStackedLayout()?this.render(e.dataset[0]):e.dataset&&e.dataset.children.length>0&&this.render(e.dataset),null!==e.leafHeight&&null!==e.leafWidth){var t="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(e.leafWidth,"px;  height: ").concat(e.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(t,"</style>")).appendTo("body")}e.layout&&this.setLayout(e.layout),this.setAutomationAttributes()}else this.element.emptymessage(e.emptyMessage)},setAutomationAttributes:function(){var e=this;[].slice.call(this.element[0].querySelectorAll(".leaf")).forEach(function(t){var n=$(t),i=n.data();if(i&&i.attributes){var a=n.find(".btn-expand, .btn-collapse");_.addAttributes(n,e,i.attributes,"hierarchy-leaf"),_.addAttributes(a,e,i.attributes,"hierarchy-btn-toggle")}})},setLayout:function(e){switch(this.isPagingLayout()&&(e="paging"),this.isMobileOnly()&&(e="mobile-only"),e){case"horizontal":default:this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only")}},handleEvents:function(){var e=this,t=this,n=this.settings;t.element.off("click.hierarchy").on("click.hierarchy",".btn",function(i){if(!t.isStackedLayout()){n.newData.length>0&&(n.newData=[]);var a=$(this).closest(".leaf").attr("id"),s=$("#".concat(a)).data(),o={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};s.isExpanded?t.collapse(i,s,o):t.expand(i,s,o)}}),this.element.on("keypress",".leaf",function(i){var a=$(this).attr("id"),s=$("#".concat(a));13===i.which&&(s.isExpanded?t.collapse(i,s):t.expand(i,s))}),t.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",function(i){var s={event:i,data:$("#".concat(i.currentTarget.id)).data()};i.stopImmediatePropagation(),e.element.trigger("dblclick",s)}),t.element.on("mouseup",".leaf, .back button",function(i){var a=$(this),s=$(i.target),o=a.closest(".hierarchy").data("hierarchy"),c=a.data(),d=$(this).attr("id"),p={target:i.target,pageX:i.pageX,pageY:i.pageY},f=s.is("button"),m=!s.hasClass("btn-back"),b=s.is(".btn-back"),C=s.find("use").prop("href"),T=!!C&&"#icon-caret-up"===C.baseVal,S=!!C&&"#icon-caret-down"===C.baseVal,M=!!C&&"#icon-caret-right"===C.baseVal,L=s.hasClass("btn-actions"),z=s.is("a")&&s.parent().parent().is("ul.popupmenu"),V=a.hasClass("ancestor"),N="selected";if(i.stopImmediatePropagation(),(!z||!$(s).parent().data("disabled"))&&($(".leaf.is-selected").removeClass("is-selected"),$("#".concat(d)).addClass("is-selected"),f&&T&&m&&(N=V?"back":"collapse"),f&&S&&m&&(N="expand"),b&&(N="back"),L&&(N="actions",o.buildActionsMenu(c,a)),z&&(N="action"),f&&M&&m&&(N="forward"),3===i.which&&(N="rightClick"),o)){var U={id:d,data:c,actionReference:z?s.data("actionReference"):null,targetInfo:p,eventType:N,isForwardEvent:o.isForwardEvent(N),isBackEvent:o.isBackEvent(N),isAddEvent:o.isAddEvent(N),isExpandEvent:o.isExpandEvent(N),isCollapseEvent:o.isCollapseEvent(N),isSelectedEvent:o.isSelectedEvent(N),isActionsEvent:o.isActionsEvent(N),isActionEvent:o.isActionEvent(N),allowLazyLoad:o.allowLazyLoad(c,N)};a.trigger("selected",U)}})},selectLeaf:function(e){var t=$("#".concat(e));$(".leaf.is-selected").removeClass("is-selected"),t.addClass("is-selected");var n={data:t.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};t.trigger("selected",n)},updateActions:function(e,t){var n=$(e.targetInfo.target).closest(".leaf"),i=e.data,a=$(n).find(".popupmenu"),s=a.data("trigger").data().popupmenu,o=a.find("li").not(":eq(0)");$(o).each(function(c,d){$(d).remove()}),i.menu.actions=t,a.append(this.getActionMenuItems(i)),s.keydownThenClick=!0,s.open(),s.handleAfterPlace(null,{element:a.parent(),parent:$(n).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(e,t){var n=$(t).find(".popupmenu"),i=[];void 0!==e.menu&&(n.empty(),e.menu.details&&(n.addClass("has-detail-fields"),i.push('<li><div class="detail-fields">'.concat(e.menu.details.map(function(a){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(a.key,'</div><div class="dt-fields-cell">').concat(a.value,"</div></div>")}).join(""),"</div></li>"))),e.menu.actions&&i.push(this.getActionMenuItems(e)),i.forEach(function(a){n.append(a)}))},getActionMenuItems:function(e){var t,n=this,i=e.menu.actions.map(function(s){return void 0===s.disabled&&(s.disabled=!1),s}),a=function(s){return _.stringAttributes(n,t,"option-".concat(s))};return e.attributes&&(t=this.getAutomationAttributes(e,"-hierarchy-popupmenu")),i.map(function(s,o){return s.hasOwnProperty("data")&&"separator"===s.data.type?'<li class="separator"></li>':'\n        <li data-disabled="'.concat(s.disabled,'" class="').concat(s.menu?"submenu":"",'">\n          <a href="').concat(s.url,'"').concat(a(o)," data-action-reference='")+JSON.stringify(s.data)+"'>\n            ".concat(s.value,"\n            ").concat(s.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n          </a>\n          ").concat(s.menu?'<div class="wrapper" role="application" aria-hidden="true">\n            <ul class="popupmenu">\n              '.concat(s.menu.map(function(c,d){return'\n              <li data-disabled="'.concat(s.disabled,'">\n                <a href="').concat(s.url,'"').concat(a("".concat(o,"-").concat(d)),' data-action-reference="').concat(JSON.stringify(s.data),'">').concat(c.value,"</a>\n              </li>")}).join(""),"\n            </ul>\n          </div>"):"","\n        </li>")}).join("")},isBackEvent:function(e){return"back"===e},isForwardEvent:function(e){return"forward"===e},isAddEvent:function(e){return"add"===e},isExpandEvent:function(e){return"expand"===e},isCollapseEvent:function(e){return"collapse"===e},isSelectedEvent:function(e){return"selected"===e},isActionsEvent:function(e){return"actions"===e},isActionEvent:function(e){return"action"===e},allowLazyLoad:function(e,t){return void 0!==e&&void 0!==t&&!e.isLoaded&&!e.isLeaf&&"expand"===t},data:function(e,t,n,i){void 0===i&&(i={});var a=this.settings,s=t.isRootNode?t:t[0],o=[];function c(p,f,m){Object.keys(f).forEach(function(b){var C,T;"id"===b&&e===f.id&&(f.isLoaded||f.isRootNode||(C=f,(T=i).insert&&(delete C.isLeaf,C.isExpanded=!0),C.children=0!==n.length&&T.insert?[n]:n),o.push(f))}),f.children&&d(p,f.children)}function d(p,f,m){if(void 0===f.length)c(p,f);else for(var b=0,C=f.length;b<C;b++)c(p,f[b])}return a.newData.length>0&&(a.newData=[]),void 0!==n&&d(this,s),0!==o.length&&$("#".concat(o[0].id)).data(o[0]),o[0]},add:function(e,t,n){var i=this.settings,s=$("#".concat(void 0!==t.id?t.id:e)),o=s.parent().hasClass("leaf-container")?s.parent().parent():s.parent(),c={},d="sub-level"!==o.parent().attr("class"),p=1===o.children(".sublist").length;if(d?p?c.element=o.children(".sublist"):(c.el=o.append("<ul class='sublist'></ul>"),c.element=$(c.el).find(".sublist")):(c.el=o.children("ul"),c.element=$(c.el)),0===c.element.length&&(c.el=o.append("<ul></ul>"),c.element=$(c.el).find("ul")),!t.isRootNode){for(var f=0,m=n.length;f<m;f++)i.newData.push(n[f]);this.createLeaf(n,c.element)}this.updateState(s,!1,null,"add")},closePopupMenu:function(e){var t=e.find(".btn-actions");0!==t.length&&t.data("popupmenu").close()},expand:function(e,t,n){var i=this.settings,a=n.leaf,s=a.next();this.closePopupMenu(a),s.animateOpen(),this.element.trigger("expanded",[t,i.dataset]),a.hasClass("root")&&(s=s.next("ul")).animateOpen(),a.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(a,!1,null,"expand")},collapse:function(e,t,n){var i=this,a=this.settings,s=n.leaf,o=s.next();this.closePopupMenu(s),o.animateClosed().on("animateclosedcomplete",function(){i.element.trigger("collapsed",[t,a.dataset])}),s.hasClass("root")&&(o=o.next("ul")).animateClosed(),s.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(s,!1,null,"collapse")},render:function(e){var t=this,n=this.settings,i=n.legend,a=e.children,s=[],o="".concat(_.uniqueId(this.element,"hierarchy")),c={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(c.chart);var d=$("#".concat(this.settings.rootId," .chart"));if(0!==i.length){$("#".concat(this.settings.rootId)).prepend(c.legend);var p=$("#".concat(this.settings.rootId," legend"));this.createLegend(p)}if(this.isSingleChildWithChildren()&&$(d).addClass("has-single-child"),this.setColor(e),this.isPagingLayout()&&e.parentDataSet){var f=' id="'.concat(o,'-back-button" data-automation-id="automation-id-').concat(o,'-back-button"'),m='<div class="back">\n        <button type="button" class="btn-icon hide-focus btn-back"'.concat(f,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-left"></use>\n          </svg>\n          <span>Back</span>\n        </button></div>'),b=$(m).appendTo(d);setTimeout(function(){return b.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')}),b.children("button").data(e),$(d).addClass("has-back")}if(e.isMultiRoot){var C='<div class="leaf multiRoot"><div><h2>'.concat(e.multiRootText,"</h2></div></div>");C=$e.sanitizeHTML(C),s.push(C),$(s[0]).addClass("root").appendTo(d)}else if(null!=e.ancestorPath){e.ancestorPath.push(e.centeredNode);var T="".concat(e.ancestorPath.map(function(le){return" ".concat(t.getTemplate(le)," ")}).join(""));T=$e.sanitizeHTML(T),s.push(T),$(s[0]).addClass("root ancestor").appendTo(d);var S=this.element.find(".leaf.root");S.each(function(le,re){t.updateState(re,!1,e.ancestorPath[le],"add"),le===S.length-1&&$(re).addClass("is-selected")})}else{var M,L=e.centeredNode;this.isStackedLayout()&&null!==L?M=this.getTemplate(L):this.isStackedLayout()||(M=this.getTemplate(e)),M&&(M=$e.sanitizeHTML(M),s.push(M),$(s[0]).addClass("root is-selected").appendTo(d)),this.updateState(this.element.find(".leaf.root"),!0,L&&null!==L?L:e,void 0)}function z(le,re,J){if(null!=re)for(var ce=0,ke=re.length;ce<ke;ce++)G(le,re[ce])}if(a&&a.length>0)for(var V=0,N=a.length;V<N;V++){var U=e.children[V].children;this.isLeaf(a[V])&&!this.isPagingLayout()&&n.renderSubLevel||this.isPagingLayout()?this.createLeaf(e.children[V],$(c.toplevel)):this.createLeaf(e.children[V],$(c.sublevel)),null!=U&&z(this,e.children[V].children)}function G(le,re,J){Object.keys(re).forEach(function(ce){if("children"===ce){var Oe=re.children;return null!=Oe&&Oe.length>0&&le.add(re.id,re,Oe),z(le,Oe)}return!0})}var Z=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(Z);var oe=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===oe.length&&oe.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var e=this.settings;if(e.dataset&&e.dataset[0]&&e.dataset[0].children){for(var t=e.dataset[0].children.length,n=0;t--;)e.dataset[0].children[t].isLeaf||n++;return 1===n}return!1},getAutomationAttributes:function(e,t){var n=this,i=e.attributes;if(e.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(e.attributes))i=[],e.attributes.forEach(function(s){var o="function"==typeof s.value?s.value(n):s.value;i.push({name:s.name,value:o+t})});else{var a="function"==typeof e.attributes.value?e.attributes.value(this):e.attributes.value;i={name:e.attributes.name,value:a+t}}return i},getTemplate:function(e){var t=this,n=ui.compile("{{#dataset}}".concat($("#".concat($e.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:e});return setTimeout(function(){var i=$("#btn-".concat($e.stripTags(e.id)));if(0!==i.length){var a=t.getAutomationAttributes(e,"-hierarchy-popupmenu");i.hideFocus().popupmenu({attachToBody:!1,attributes:a})}},1),$(n).prop("outerHTML")},createLegend:function(e){for(var t=this.settings,n=0,i=0,a=t.legend.length;i<a;i++){var s=t.legend[i].label,o=t.colorClass[i];i-1+1==4&&(e.append("<ul></ul>"),n++),e.children("ul").eq(n).append(""+'<li>\n          <span class="key '.concat(o,'"></span>\n          <span>').concat(s,"</span>\n        </li>"))}},createLeaf:function(e,t){var n=this,i=$("#".concat(n.settings.rootId," .chart"),n.container),a=t.attr("class"),s=void 0!==a?$("#".concat(n.settings.rootId," .").concat(a)):t;function o(p){n.setColor(p);var f=n.getTemplate(p),m=n.settings.rootId,b=1===s.length?s:t,C=p.isExpanded||void 0===p.isExpanded?"branch-expanded":"branch-collapsed";if(p.isLeaf&&(C=""),1!==$("#".concat(m," #").concat(p.id)).length&&(b.append("<li class=".concat(C,">").concat($(f)[0].outerHTML,"</li>")),p.children)){for(var T="",S=0,M=p.children.length;S<M;S++){n.setColor(p.children[S]);var L=n.getTemplate(p.children[S]);T+="<li>".concat($(L)[0].outerHTML,"</li>")}(b=$("#".concat(m," #").concat($e.stripTags(p.id))).parent()).append("<ul>".concat(T,"</ul>"));for(var z=p.children.length;z--;){var V=$("#".concat(m," #").concat($e.stripTags(p.children[z].id)));n.updateState(V,!1,p.children[z],void 0)}}}if(s.length<1&&("top-level"===a?t.insertAfter(".root"):t.appendTo(i)),e.length)for(var c=0,d=e.length;c<d;c++)o(e[c]),n.updateState($("#".concat(n.settings.rootId," #").concat($e.stripTags(e[c].id))),!1,e[c],void 0);else o(e),n.updateState($("#".concat(n.settings.rootId," #").concat($e.stripTags(e.id))),!1,e,void 0)},setColor:function(e){var t=this,n=this.settings;if(this.setRootColor(e),this.isStackedLayout()&&(e.ancestorPath&&null!==e.ancestorPath&&e.ancestorPath.forEach(function(c){t.setRootColor(c)}),e.centeredNode&&null!==e.centeredNode&&this.setRootColor(e.centeredNode)),e.children&&!e.isRootNode)for(var i=0,a=e.children.length;i<a;i++)for(var s=0,o=n.legend.length;s<o;s++)e.children[i][n.legendKey]===n.legend[s].value&&(e.children[i].colorClass=n.colorClass[s])},setRootColor:function(e){for(var t=this.settings,n=0,i=t.legend.length;n<i;n++){if(e[t.legendKey]===t.legend[n].value){e.colorClass=t.colorClass[n];break}""===e[t.legendKey]&&(e.colorClass="default-color")}},isLeaf:function(e){return e.isLeaf||this.settings.beforeExpand?e.isLeaf:!(e.children&&e.children.length>0)},updateState:function(e,t,n,i){if($.isEmptyObject($(e).data())&&n){var a=void 0===n?{}:n;$(e).data(a)}var s=this.settings,o=$(e).find(".btn"),c=this.isPagingLayout()?"caret-right":"caret-up",d=$(e).data();void 0===d&&void 0!==n&&(d=n),(d.children&&0!==d.children.length||"add"===i)&&(d.isExpanded=!0,d.isLoaded=!0),t&&(d.isRootNode=!0,d.isLoaded=!0),(void 0===d.isExpanded&&d.children||"expand"===i)&&(d.isExpanded=!0),void 0!==d.isExpanded&&"collapse"!==i||(d.isExpanded=!1),d.isExpanded?(o.find("svg.icon").changeIcon(c),o.addClass("btn-expand").removeClass("btn-collapse")):(o.find("svg.icon").changeIcon("caret-down"),o.addClass("btn-collapse").removeClass("btn-expand")),(d.isLeaf||d.isRootNode)&&o.addClass("btn-hidden"),d.isLeaf&&(d.isLoaded=!1,d.isExpanded=!1),this.isPagingLayout()&&(d.parentDataSet=s.dataset),$(e).data(d)},reload:function(e){this.destroy(),this.element.hierarchy(e)},unbind:function(){this.element.empty()},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,Gs)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(e){return this.each(function(){var t=$.data(this,"hierarchy");t?t.updated(e):t=$.data(this,"hierarchy",new Ys(this,e))})};var Ks={dataset:[],dropdownOpts:{},template:""+"<label>".concat(P.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function ae(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Ks),this.init()}ae.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(e){var t=this.settings;if(e=e||t.dataset,"object"===Ge(ui)&&e&&t.template){t.template instanceof $?t.template="".concat(t.template.html()):"string"==typeof t.template&&(at.containsHTML(t.template)||(t.template=$("#".concat(t.template)).html()));var n=ui.compile(t.template,{dataset:t.dropdownOpts.source?[]:e}),i=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(P.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');e.length>0?this.element.before(n):0===e.length&&this.element.before(n||i);var a=this.element.attr("id")||this.element.attr("name");void 0===a&&(a=_.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",a));var s="".concat(a,"-ff");this.field=this.element.closest(".field, .field-short");var o=P.isRTL();t.dropdownOpts=t.dropdownOpts||{},o&&"object"===Ge(t.dropdownOpts)&&(t.dropdownOpts.placementOpts?t.dropdownOpts.placementOpts.x=this.element.outerWidth():t.dropdownOpts.placementOpts={x:this.element.outerWidth()}),t.dropdownOpts.cssClass=t.dropdownOpts.cssClass?"".concat(t.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",t.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(t.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",s),this.ffdropdown[0].setAttribute("name",s),this.ffdropdown.prev("label")[0].setAttribute("for",s);var c=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(c),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon"),_.addAttributes(this.field,this,this.settings.attributes,"",!0),_.addAttributes(this.field.find("label:not(.audible)"),this,this.settings.attributes,"label",!0),_.addAttributes(this.field.find("select"),this,this.settings.attributes,"select",!0)}},setFiltered:function(){if(this.ddApi){var e=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(e)}return this},getTriggerData:function(e){var t=this.settings,n=t.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:t.dataset;return{idx:e.index(),item:e,data:n[e.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(e){if(this.ddApi){var t=-1,n=this.settings;if("number"==typeof e&&e>-1&&e<(n.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:n.dataset).length)t=e;else if("string"==typeof e){var a=this.ffdropdown.find('option[value="'.concat(e,'"]'));a.length||(a=this.ffdropdown.find("option").filter(function(){return $(this).text()===e})),a.length&&(t=a.index())}-1!==t&&t!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=t,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var e=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),function(){var t=e.field.is(".field-short")?42:52;$("#dropdown-list ul").width(e.element.outerWidth()+t)}).on("selected.".concat("fieldfilter"),function(t,n){var i=e.getTriggerData(n);e.element.triggerHandler("filtered",[i])}),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element[0],e,Ks)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(e){return this.each(function(){var t=$.data(this,"fieldfilter");t?t.updated(e):t=$.data(this,"fieldfilter",new ae(this,e))})};var he={};function ye(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,he),this.init(),Ga("FieldOptions")}ye.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var e=this;this.isFirefox="firefox"===Ie.browser.name,this.isSafari=Ie.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var t=this.field.find("label");return t&&(this.label=t),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),function(n){9!==(n.which||n.keyCode||n.charCode||0)&&(n.preventDefault(),n.stopPropagation())})),setTimeout(function(){e.popupmenuApi=e.trigger.data("popupmenu"),e.popupmenuApi&&(e.popupmenuApi.settings.returnFocus=!1,e.popupmenuApi.settings.offset.y=10)},100),this},handleEvents:function(){var U,e=this,t=this,n=this.element.data("datepicker"),i=this.element.data("timepicker"),a=this.element.data("dropdown"),s=this.element.data("lookup")||this.element.hasClass("lookup"),o=this.element.is(".checkbox"),c=this.element.is(".fileupload"),d=this.element.is(".searchfield"),p=this.element.is(".colorpicker"),f=this.element.closest(".radio-group").length>0,m=this.element.is(".data")&&this.element.closest(".summary-form").length>0,b=function(U){return $(":focus").is(U)},C=function(U){(U||e.element).addClass("is-focused")},T=function(U){(U||e.element).removeClass("is-focused")},S=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).addClass("is-active")},M=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).removeClass("is-active")},L=function(U){var G=!b(e.element);return G=!e.trigger.is(U.relatedTarget)&&G,G=!e.trigger.is(".is-open")&&G,G=(!n||!n.isOpen())&&G,G=(!i||!i.isOpen())&&G,G=!$(U.relatedTarget).prev().is(e.element)&&G,G=(!a||!a.isOpen())&&G,G=!(s&&s.modal&&s.modal.isOpen())&&G,(!p||!e.element.is(".is-open"))&&G},V=function(){var U,G=e.element.height();if(m){var Z=parseInt(e.element.css("line-height"),10);if(G>Z){e.element.removeClass("is-singleline"),U=-1*((e.element.outerHeight()-e.trigger.height())/2+0);var oe=Z-16;U+=oe?oe/2:0}else e.element.addClass("is-singleline"),U=2}else f&&(U=(G-10-e.trigger.height())/2*-1);return U},N=function(){e.trigger.css({top:"".concat(V()-1,"px")})};return Ie.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),function(U){var G;G=b(e.element),G=(!n||!n.isOpen())&&G,G=(!i||!i.isOpen())&&G,(G=(!a||!a.isOpen())&&G)&&S()}).on("close.".concat("fieldoptions"),function(U){L(U)&&M()})):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),function(){t.element.prop("disabled")||t.element.closest("is-disabled").length||t.field[0].className.indexOf("visible")<0&&t.field[0].classList.add("visible")}).on("mouseout.".concat("fieldoptions"),function(){t.field[0].className.indexOf("visible")>-1&&t.field[0].classList.remove("visible")})),a&&setTimeout(function(){var U=e.trigger.data("popupmenu");U&&U.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})},0),(n||i)&&(U=n||i).trigger&&U.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),function(){S()}).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),function(G){L(G)&&(M(),e.element.removeClass("is-open"))}),i&&(i.settings.returnFocus=!1),(s||p)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",function(){S()}),p&&this.element.on("beforeopen.".concat("fieldoptions"),function(){S()})),o&&(this.trigger.addClass("is-checkbox"),!Ie.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",function(){S()}).on("mouseout.".concat("fieldoptions"),".checkbox-label",function(){M()})),c&&(this.element.on("change.".concat("fieldoptions"),function(){e.targetElem.focus()}),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",function(){S()})),d&&setTimeout(function(){e.trigger.add(e.trigger.next(".popupmenu")).appendTo(e.element.closest(".searchfield-wrapper"))},0),m&&(N(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),function(U){13===(U.which||U.keyCode||U.charCode||0)&&setTimeout(function(){S()},0)}),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),function(){S()}),$(document).on("click.".concat("fieldoptions"),function(U){$(U.target).is(e.element)||M()}),$("body").on("resize.".concat("fieldoptions"),function(){N()})),f&&(N(),this.element.on("focusin.".concat("fieldoptions"),".radio",function(){var U=e.isSafari?200:0;C(),setTimeout(function(){S()},U)}).on("focusout.".concat("fieldoptions"),".radio",function(){T()}),$("body").on("resize.".concat("fieldoptions"),function(){N()})),this.targetElem.on("focusin.".concat("fieldoptions"),function(){S(),f&&e.isSafari&&C()}).on("focusout.".concat("fieldoptions"),function(U){var G=e.isSafari?200:0;f&&e.isSafari&&T(),setTimeout(function(){L(U)&&M()},G)}),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),function(){S()}).on("focusout.".concat("fieldoptions"),function(U){L(U)&&M()}).on("selected.".concat("fieldoptions"),function(){e.popupmenuApi.settings.returnFocus=!0}).on("close.".concat("fieldoptions"),function(U){L(U)&&M()}),(this.isSafari||c)&&(f&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),function(U){9!==(U.which||U.keyCode||U.charCode||0)||U.shiftKey||(f?(e.targetElem.find(":checked, .radio:first").not(":disabled").focus(),e.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),function(G){9!==(G.which||G.keyCode||G.charCode||0)||U.shiftKey||setTimeout(function(){e.trigger.focus()},0)})):e.trigger.focus(),S(),U.preventDefault(),U.stopPropagation())})),this.element.on("listopened.".concat("fieldoptions"),function(){S()}).on("listclosed.".concat("fieldoptions"),function(){M()}),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,he)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(e){return this.each(function(){var t=$.data(this,"fieldoptions");t?t.updated(e):t=$.data(this,"fieldoptions",new ye(this,e))})};var He={};function Te(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,He),this.init()}Te.prototype={init:function(){this.build()},build:function(){var e=this,t=this,n=this.element,i=!n.is("input.fileupload");this.fileInput=i?n.find("input"):n,n.closest(".field, .field-short").addClass("field-fileupload");var a=n.find("input").attr("name");i||(a=n.attr("id")||n.attr("name"));var s=i?n.find("input").attr("class"):n.attr("class");s=s?" ".concat(s):"";var o=P.translate("FileUpload");this.shadowLabel=$('<label for="'.concat(a,'-filename">').concat(n.text(),' <span class="audible">').concat(o,"</span></label>")),this.shadowField=$('<input readonly id="'.concat(a,'-filename" class="fileupload-background-transparent').concat(s,'" type="text">'));var c='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),d='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!i){var p=n.prev("label");0===p.length&&(p=n.parent().prev("label")),p.hasClass("required")&&this.shadowLabel.addClass("required"),this.shadowLabel.html("".concat(p.text(),' <span class="audible">').concat(o,"</span>")),p.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}0===n.parent().find('input[type="text"]').length&&(n.before(this.shadowLabel,this.shadowField),this.fileInput.after(c,d));var f=this.fileInput.attr("value");f&&f.length>0&&(this.shadowField.val(f),this.fileInput.attr("value","")),this.textInput=this.shadowField,this.svg=n.parent().find(".trigger"),this.svgClose=n.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",function(m){var b=!1;13===m.which||32===m.which?(n.parent().find('[type="file"]').trigger("click"),b=!0):8===m.which&&(Ie.browser.isIE11()&&m.preventDefault(),e.clearUploadFile(),b=!0),b&&m.stopPropagation()}),this.svg.on("click.fileupload",function(m){e.fileInput.trigger("click"),i&&e.fileInput.data("handleEvent".concat([m.type||""]),m.handleObj)}),this.svgClose.on("click.fileupload",function(m){e.clearUploadFile(),i&&e.fileInput.data("handleEvent +".concat([m.type||""]),m.handleObj)}),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),n.hasClass("required")&&(this.shadowLabel.addClass("required"),n.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate(),this.shadowLabel.addClass(this.fileInput.attr("data-validate"))),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",function(){this.files.length>0?(t.textInput.val(this.files[0].name).trigger("change"),t.svgClose.show().addClass("is-visible")):t.clearing||t.clearUploadFile()}),this.fileInput.on("click.fileupload",function(m){var b=e.fileInput.data("handleEvent".concat([m.type||""]));b&&b.type===m.type&&"fileupload"===m.handleObj.namespace&&(e.fileInput.data("handleEvent".concat([m.type||""]),null),m.preventDefault())}),this.textInput.on("dragenter.fileupload",function(){e.fileInput.css("z-index","1")}),this.textInput.on("dragleave.fileupload, dragend.fileupload, drop.fileupload",function(){setTimeout(function(){e.fileInput.css("z-index","-1")},1)}),_.addAttributes(n,this,this.settings.attributes),_.addAttributes(this.svg,this,this.settings.attributes,"btn-trigger"),_.addAttributes(this.svgClose,this,this.settings.attributes,"btn-trigger-close")},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.fileInput.prev("label"),this.textInput.off(),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,He)),this},destroy:function(){this.unbind(),this.shadowField.remove(),this.shadowLabel.remove(),$.removeData(this.element[0],"fileupload")},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(e){return this.each(function(){var t=$.data(this,"fileupload");t?t.updated(e):t=$.data(this,"fileupload",new Te(this,e))})};var We={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function Ue(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,We),this.init()}Ue.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var e,t=this.settings,n=t.isStandalone?t.standaloneClass:"";if(t.textDropArea=t.textDropArea||P.translate("TextDropArea"),t.textDropAreaWithBrowse=t.textDropAreaWithBrowse||P.translate("TextDropAreaWithBrowse"),t.textBtnCancel=t.textBtnCancel||P.translate("TextBtnCancel"),t.textBtnCloseError=t.textBtnCloseError||P.translate("TextBtnCloseError"),t.textBtnRemove=t.textBtnRemove||P.translate("TextBtnRemove"),t.errorAllowedTypes=t.errorAllowedTypes||"<em>".concat(P.translate("Error"),"</em>: ").concat(P.translate("ErrorAllowedTypes")),t.errorMaxFileSize=t.errorMaxFileSize||"<em>".concat(P.translate("Error"),"</em>: ").concat(P.translate("ErrorMaxFileSize")),t.errorMaxFiles=t.errorMaxFiles||"<em>".concat(P.translate("Error"),"</em>: ").concat(P.translate("ErrorMaxFiles")),t.errorMaxFiles=t.errorMaxFiles.replace("{n}",t.maxFiles),t.errorMaxFilesInProcess=t.errorMaxFilesInProcess||"<em>".concat(P.translate("Error"),"</em>: ").concat(P.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(t.isDisabled=!0),t.isDisabled&&(n+=" is-disabled"),t.showBrowseButton){var i="",a=_.uniqueId(this.element,"fileupload-adv-"),s=t.allowedTypes.split(/[\s|]+/g),o=t.maxFilesInProcess>1?" multiple":"";if(o+=t.isDisabled?" disabled":"",1===s.length)"*"!==s[0]&&(i=".".concat(s[0]));else for(var c=0,d=s.length;c<d;c++)i+=".".concat(s[c]+(c!==d-1?",":""));e=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(t.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(a,'" accept="').concat(i,'"').concat(o," />\n            </label>\n          </div>\n        </div>")}else e=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(t.textDropArea,"</p>\n          </div>\n        </div>");ue.append(this.element,e,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element),_.addAttributes(this.dropArea,this,this.settings.attributes),_.addAttributes(this.dropArea.find("svg"),this,this.settings.attributes,"icon"),_.addAttributes(this.dropArea.find("label"),this,this.settings.attributes,"label")},handleEvents:function(){var e=this,t=this,n=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",function(s){t.element.triggerHandler("filesdragenter"),s.stopPropagation(),s.preventDefault(),n.isDisabled||$(this).addClass("hover")}).on("dragover.fileuploadadvanced",function(s){s.stopPropagation(),s.preventDefault()}).on("drop.fileuploadadvanced",function(s){var o=s.originalEvent.dataTransfer.files;s.preventDefault(),n.isDisabled||(t.element.triggerHandler("filesdroped",[o]),$(this).removeClass("hover is-focus"),t.handleFileUpload(o))}),n.showBrowseButton&&!n.isDisabled){var i=this.dropArea.find(".fileupload-adv-browse-lbl"),a=i.find('input[type="file"]');i.click(function(s){$(s.target).is('.hyperlink, input[type="file"]')||s.preventDefault()}),a.hideFocus(),a.on("hidefocusremove.fileuploadadvanced",function(s){s.stopPropagation(),e.dropArea.addClass("is-focus")}).on("hidefocusadd.fileuploadadvanced",function(s){s.stopPropagation(),e.dropArea.removeClass("is-focus")}).on("change.fileuploadadvanced",function(s){s.stopPropagation(),t.handleFileUpload(this.files),this.value=""})}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",function(s){s.stopPropagation(),s.preventDefault(),"dragover"===s.type&&t.dropArea.removeClass("hover")})},handleFileUpload:function(e){if(null!=e&&e?.length){var t=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0,this.totalFileList=this.totalFileList||[],this.counter=this.counter||0;var n=$(".progress",this.element).length;if(this.totalCompleted+e.length+n>t.maxFiles)this.showError(t.errorMaxFiles);else if(n>=t.maxFilesInProcess)this.showError(t.errorMaxFilesInProcess);else{for(var i=t.fileName.replace("[]",""),a=0,s=e.length;a<s;a++)if(this.isFileTypeAllowed(e[a].name))if(-1!==t.maxFileSize&&e[a].size>t.maxFileSize)this.showError(t.errorMaxFileSize,e[a]);else{this.element.triggerHandler("beforecreatestatus",[e[a]]);var o=new FormData;o.append("".concat(i,"[]"),e[a]);var c=this.createStatus(e[a]);c.container.find(".status-icon .action").focus(),this.totalFileList.push(c),this.element.triggerHandler("aftercreatestatus",[e[a]]),"function"==typeof t.send?t.send(o,c):this.sendFileToServer(o,c)}else this.showError(t.errorAllowedTypes,e[a]);t.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}}},createStatus:function(e){var t=this,n=this,i=this.settings,a=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(i.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(e.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(e.size),'<span id="bar"> | </span><span class="percent">0%</span></span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),s=$(".action",a).button(),o=$(".l-pull-right",a),c=$(".progress-bar",a).progress({animationLength:10}),d=$(".percent",a),p=$("#bar",a),f=this.counter;this.dropArea.after(a);var m=function(){if(t.totalFileList){var b=t.totalFileList.findIndex(function(C){return C.index===f});b>=0&&t.totalFileList.splice(b,1)}};return this.counter++,{file:e,container:a,index:f,setProgress:function(b){t.element.triggerHandler("fileprogress",[{file:e,progress:b}]),d.text(b<=100?"".concat(b,"%"):""),b>100&&p.text(""),c.attr("data-value",b).triggerHandler("updated")},setAbort:function(b){s.on("click.fileuploadadvanced",function(){t.element.triggerHandler("fileaborted",[e]),b&&"function"==typeof b.abort&&b.abort(),s.off("click.fileuploadadvanced"),a.remove(),n.totalCompleted--,m()})},setCompleted:function(b){b=b&&"function"==typeof b.remove?b:{remove:function(){}},a.addClass("completed"),s.after($.createIcon("check")),o.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(i.textBtnRemove,"</span>\n        </button>")),$(".action",o).button().on("click.fileuploadadvanced",function(){$(this).off("click.fileuploadadvanced"),n.element.triggerHandler("beforefileremove",[e]),a.hasClass("completed")&&n.totalCompleted--,a.remove(),b.remove(),n.element.triggerHandler("fileremoved",[e])}),c.destroy(),s.off("click.fileuploadadvanced"),s.add(c.closest(".progress-row")).remove(),n.totalCompleted++,m(),n.element.triggerHandler("filecompleteuploading",[e])},setFailed:function(b){n.element.triggerHandler("filefailed",[{error:b,file:e}]),m(),a.remove(),n.showError(b,e)}}},sendFileToServer:function(e,t){var n={remove:function(){}},i=0,a=parseFloat(t.file.size),s=new $.fn.timer(function(){t.setCompleted(n)},a);$(s.event).on("update",function(o,c){i=Math.ceil(c.counter/a*100),t.setProgress(i)}),t.setAbort({abort:function(){}})},setFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.totalFileList&&this.totalFileList.length>0&&this.totalFileList[t].setFailed(e)},showError:function(e,t){var n,i=this,a=this.settings;n=e===a.errorMaxFiles||e===a.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon file-error">\n              '.concat($.createIcon({classes:["icon-error"],icon:"error"}),'\n            </span>\n            <span class="msg">').concat(e,'</span>\n            <div class="l-pull-right">\n              <button type="button" class="btn-icon action">\n                ').concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n              </button>\n            </div>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon file-error">\n              '.concat($.createIcon({classes:["icon-error"],icon:"error"}),'\n            </span>\n            <span class="description">').concat(t.name,'</span>\n            <div class="l-pull-right file-error">\n              <span class="size">').concat(this.formatFileSize(t.size),'</span>\n              <button type="button" class="btn-icon action">\n                ').concat($.createIcon({classes:["icon-close"],icon:"close"}),'\n              </button>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(e,"</p>\n          </div>\n        </div>")),$(".action",n).button().on("click.fileuploadadvanced",function(){i.element.triggerHandler("beforeerrormessageremove",[{error:e,file:t}]),n.remove()}),this.dropArea.after(n)},isFileTypeAllowed:function(e){var t=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),n=e.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(n,t)<0)},formatFileSize:function(e){var t=1e9,n=1e6;return"number"!=typeof e?"":e>=t?"".concat((e/t).toFixed(2)," GB"):e>=n?"".concat((e/n).toFixed(2)," MB"):"".concat((e/1e3).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled")},disable:function(){this.settings.isDisabled=!0,this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled")},unbind:function(){this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced");var e=$(".fileupload-wrapper",this.element);return e.off().find("*").off(),e.remove(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,We)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(e){return this.each(function(){var t=$.data(this,"fileuploadadvanced");t?t.updated(e):t=$.data(this,"fileuploadadvanced",new Ue(this,e))})};var Je={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,useSmall:!1,timeout:100};function rt(e,t){this.settings=_.mergeSettings(e,t,Je),this.element=$(e),this.init()}rt.prototype={get state(){var e=this.rowsAndCols.length,t=e?this.rowsAndCols[0].length:0,n=this.settings;return-1===this.rowsAndCols[e-1].indexOf(!1)&&(e-=1),void 0===this.editing&&(this.editing=n.editing),{rows:e,cols:t,containerHeight:n.gutterSize+(n.gutterSize+n.widgetHeight)*e,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){this.isTransitionsSupports=this.supportsTransitions(),this.setSmall(),this.setColumns(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},setColumns:function(){var e=this.settings.columns,t=parseInt(this.element.attr("data-columns"),10);isNaN(t)||e===t||e!==Je.columns||(e=t),this.columns=e},setSmall:function(){var e=this.settings,t=this.element.attr("data-use-small");if(e.useSmall||t&&"true"===t.toString().toLowerCase()){var n=Je,i={gutterSize:24,widgetWidth:260,widgetHeight:260};e.useSmall=!0,e.gutterSize===n.gutterSize&&(e.gutterSize=i.gutterSize),e.widgetWidth===n.widgetWidth&&(e.widgetWidth=i.widgetWidth),e.widgetHeight===n.widgetHeight&&(e.widgetHeight=i.widgetHeight)}},initColumns:function(e){this.rowsAndCols[e=e||0]=[];for(var t=0,n=this.columns;t<n;t++)this.rowsAndCols[e][t]=!0},initHeroWidget:function(){var e=$(".hero-widget");e.length>1&&(e=e.not(":first").remove()),this.heroWidget=e},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var e=this,t=this,n=t.element.find(".card, .widget, .small-widget");void 0===t.editing&&(t.editing=t.settings.editing),t.editing?(n.attr("draggable",!0),n.css("cursor","move"),t.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),n.each(function(i,a){var s=$(a),o=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!s.hasClass("no-remove")){var c=s.children(".widget-header");o.insertBefore(c).on("click.card-remove",function(){var d=function(){var f=s.clone(!0);s.remove(),t.refresh(!1),setTimeout(function(){t.element.triggerHandler("removecard",[s,t.state]),f.triggerHandler("removecard",[s,t.state]),f.remove()},0)};if(e.settings&&"function"==typeof e.settings.onBeforeRemoveCard){var p=e.settings.onBeforeRemoveCard(s);p&&p.then&&"function"==typeof p.then?p.then(function(){return d()}):p&&d()}else d()})}}),n.on("mouseenter.card",function(){var i=$(this),a=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",function(o){o.stopPropagation(),o.preventDefault(),i.addClass("ui-resize-passive"),i.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(c){var d=c.clientX-i.offset().left;d<t.settings.widgetWidth/2?a.css({left:t.settings.widgetWidth/2}):i.width(d)}).on("mouseup.handle",function(){i.removeClass("ui-resize-passive"),i.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),i.removeClass("double-width triple-width quad-width quintuple-width");var c=i.width()/t.settings.widgetWidth;c>4.5?i.addClass("quintuple-width"):c>3.5?i.addClass("quad-width"):c>2.5?i.addClass("triple-width"):c>1.5&&i.addClass("double-width"),$(".ui-resizable-handle").remove(),i.css({opacity:1,width:""}),t.refresh(!1),setTimeout(function(){i.triggerHandler("resizecard",[i,t.state]),t.element.triggerHandler("resizecard",[i,t.state])},0)})}),s=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",function(o){o.stopPropagation(),o.preventDefault(),i.addClass("ui-resize-passive"),i.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(c){var d=c.clientY-i.offset().top;d<t.settings.widgetHeight?s.css({top:t.settings.widgetHeight}):i.height(d)}).on("mouseup.handle",function(){i.removeClass("ui-resize-passive"),i.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),i.removeClass("double-height"),i.height()/t.settings.widgetHeight>1.5&&i.addClass("double-height"),$(".ui-resizable-handle").remove(),i.css({opacity:1,height:""}),t.refresh(!1),setTimeout(function(){i.triggerHandler("resizecard",[i,t.state]),t.element.triggerHandler("resizecard",[i,t.state])},0)})});0===i.has(".ui-resizable-handle").length&&i.append(a,s),i.addClass("editable-hover-border")}).on("mouseleave.card",function(){var i=$(this);i.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),i.removeClass("editable-hover-border")}).on("dragstart.card",function(){var i=$(this);i.addClass("is-dragging"),i.css("opacity","0.99")}).on("dragover.card",function(i){i.preventDefault()}).on("dragenter.card",function(i){i.preventDefault();var a=$(this),s=$(".is-dragging");a.is(s)&&0===$(".drop-indicator").length||(s.index()<a.index()?(t.guide.css("right","-14px"),t.guide.css("left","")):(t.guide.css("left","-14px"),t.guide.css("right","")),a.append(t.guide),t.refresh(!1))}).on("dragend.card",function(){var i=$(this);if(i.hasClass("is-dragging")){var a=$(n).has(".drop-indicator");i.css("opacity",""),i.index()<a.index()?i.insertAfter(a):i.insertBefore(a),i.removeClass("is-dragging"),t.guide.remove(),t.refresh(!1),setTimeout(function(){i.triggerHandler("reordercard",[i,t.state]),t.element.triggerHandler("reordercard",[i,t.state])},0)}})):(n.attr("draggable",!1),n.css("cursor","auto"),n.children(".card-remove").remove(),n.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function(e){void 0!==e&&(this.editing=e,this.initEdit(),this.refresh(!1))},getAvailability:function(e){for(var t=!1,n={},i=this.rowsAndCols.length,a=0,s=i;a<s&&!t;a++)for(var o=0,c=!0,d=this.rowsAndCols[a].length;o<d&&!t;o++)if(this.rowsAndCols[a][o]&&e.w+o<=d){if(e.w>1&&d>o+1)for(var p=0;p<e.w;p++)if(!this.rowsAndCols[a][o+p]){c=!1;break}if(e.h>1&&i>a+1)for(var f=0;f<e.h;f++)if(!this.rowsAndCols[a+f][o]){c=!1;break}c&&(n.row=a,n.col=o,t=!0)}return Object.getOwnPropertyNames(n).length||(this.initColumns(i),n.row=i,n.col=0),n},fitBlock:function(e,t,n){var i=!0;if(n.x=t,n.y=e,1===n.w&&1===n.h)this.rowsAndCols[e][t]=!1;else if(1!==n.w)for(var a=e,s=n.h+e;a<s;a++)for(var o=t,c=n.w+t;o<c;o++)this.rowsAndCols[a]||this.initColumns(a),this.rowsAndCols[a][o]=!1;else for(var d=e,p=n.h+e;d<p;d++)for(var f=t,m=n.h+t;f<m;f++)this.rowsAndCols[d]||this.initColumns(d),this.rowsAndCols[d][t]=!1;for(var b=0,C=this.rowsAndCols[e].length;b<C;b++)this.rowsAndCols[e][b]&&(i=!1);i&&(this.rowsAndCols[e+1]||this.initColumns(e+1))},setBlocks:function(){var e=this.element.find(".card, .widget, .small-widget");this.blocks=[];for(var t=0,n=e.length;t<n;t++){var s,i=$(e[t]),a=i.hasClass("double-height")?2:1;s=i.hasClass("sextuple-width")?6:i.hasClass("quintuple-width")?5:i.hasClass("quad-width")?4:i.hasClass("triple-width")?3:i.hasClass("double-width")?2:1,this.blocks.push({w:s,h:a,elem:i,text:i.text()})}if(this.columns>1)for(var o=0,c=0,d=0,p=this.blocks.length;o<p;o++)this.blocks[o].w>=this.columns&&o&&d&&d<=this.columns/2&&this.arrayIndexMove(this.blocks,o,c),(d+=this.blocks[o].w)>=this.columns&&(d=0,c=this.blocks[c].w>=this.columns?c+1:o)},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},resize:function(e,t){var n,i=6*e.settings.widgetWidth+5*e.settings.gutterSize,a=5*e.settings.widgetWidth+4*e.settings.gutterSize,s=4*e.settings.widgetWidth+3*e.settings.gutterSize,o=3*e.settings.widgetWidth+2*e.settings.gutterSize,c=2*e.settings.widgetWidth+e.settings.gutterSize,d=e.settings.widgetWidth,p=i,f=e.element.outerWidth(),m=f>=i,b=f>=a&&f<=i,C=f>=s&&f<=a,T=f>=o&&f<=s,S=f>=c&&f<=o,M=f<=c,L=e.element.find("> .content");this.setColumns(),(m||6===e.columns)&&(n=6,p=i),(b||5===e.columns)&&(n=5,p=a),(C||4===e.columns)&&(n=4,p=s),(T||3===e.columns)&&(n=3,p=o),(S||2===e.columns)&&(n=2,p=c),(M||1===e.columns)&&(n=1,p=d),e.columns=n||this.settings.columns,L.length&&(L[0].style.marginLeft="-".concat(p/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var z=0,V=e.blocks.length;z<V;z++){var N=e.blocks[z];N.elem.removeClass("to-single to-double to-triple to-quad to-quintuple"),N.w>e.columns&&(N.w=e.columns,1===e.columns?N.elem.addClass("to-single"):2===e.columns?N.elem.addClass("to-double"):3===e.columns?N.elem.addClass("to-triple"):4===e.columns?N.elem.addClass("to-quad"):5===e.columns&&N.elem.addClass("to-quintuple"));var U=e.getAvailability(N),G=e.settings.widgetWidth+e.settings.gutterSize,Z=G*e.columns,oe={left:P.isRTL()?Z-(G*N.w+G*U.col):G*U.col,top:(e.settings.widgetHeight+e.settings.gutterSize)*U.row};if(t&&!this.editing){var le=e.settings.easing;"blockslide"===le?e.isTransitionsSupports?(e.applyCubicBezier(N.elem,[.09,.11,.24,.91]),N.elem[0].style.left="".concat(oe.left,"px"),N.elem[0].style.top="".concat(oe.top,"px")):N.elem.animate(oe,e.settings.timeout):N.elem.animate(oe,e.settings.timeout,le)}else e.isTransitionsSupports&&e.applyCubicBezier(N.elem,null),N.elem[0].style.left="".concat(oe.left,"px"),N.elem[0].style.top="".concat(oe.top,"px");e.fitBlock(U.row,U.col,N)}e.element.triggerHandler("resize",[e.columns,e.state])},applyCubicBezier:function(e,t){var n=t?"all .3s cubic-bezier(".concat(t,")"):"none";e[0].style["-webkit-transition"]=n,e[0].style["-moz-transition"]=n,e[0].style["-ms-transition"]=n,e[0].style["-o-transition"]=n,e[0].style.transition=n},supportsTransitions:function(){var e=document.createElement("p").style,t="transition";if("string"==typeof e[t])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var i=0,a=n.length;i<a;i++)if("string"==typeof e[n[i]+t])return!0;return!1},refresh:function(e){var t=this;setTimeout(function(){t.resize(t,e=void 0!==e?e:t.settings.animate)},0)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,Je)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function(){var e=this;$("body").on("resize.homepage",function(){e.resize(e,e.settings.animate)}),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",function(){e.resize(e,e.settings.animate)})}},$.fn.homepage=function(e){return this.each(function(){var t=$.data(this,"homepage");t?t.updated(e):t=$.data(this,"homepage",new rt(this,e))})};var Bt=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),Mt={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],footerContainment:!0,footerContainmentClass:null,pageSelectorInputText:null,showPageSelectorInput:!1,showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",pageSizeSelectorTextNoToken:"RecordsPerPageNoToken",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1},attributes:null,tabbable:!0};function Rt(e,t){this.settings=_.mergeSettings(e,t,Mt),this.settings.dataset=t.dataset,this.element=$(e),this.init()}Rt.prototype={get state(){var e,t,n,i=0,a=1,s=this.settings.indeterminate,o=this.settings.pagesize,c=this.previousOperation,d=this.previousTrigger,p=this.settings.dataset;return isNaN(this.serverDatasetTotal)?p&&p.length&&(i=p.length,this.isFilteredClientside&&(i=p.filter(function(f){return!f._isFilteredOut}).length)):i=this.serverDatasetTotal,this.grandTotal&&(n=this.grandTotal),a=s?999999999:i<1?1:Math.ceil(i/o),isNaN(this.filteredTotal)||(t=this.filteredTotal,s?a=999999999:e=t<1?1:Math.ceil(t/o)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:n,pagesize:o,pages:a,trigger:d,total:i,type:c,filteredActivePage:this.filteredActivePage,filteredTotal:t,filteredPages:e}},get pagingInfo(){return ei("state","pagingInfo"),this.state},get focusableElements(){return _.getArrayFromList(this.pagerBar[0].querySelectorAll(Bt))},get numberButtons(){if(!this.isTable){var e=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return _.getArrayFromList(e)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var e=Number(this.element.attr("data-pagesize"));isNaN(e)||(this.settings.pagesize=e),this.element.removeAttr("data-pagesize")}-1===this.settings.pagesizes.indexOf(this.settings.pagesize)&&(this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort(function(n,i){return n-i})),this.handleDeprecatedSettings();var t=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),t.length&&t[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":P.translate("Pagination")}),this},createPagerBar:function(){var e=this;if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length&&this.settings.footerContainment)){var t=this;["widget","card"].forEach(function(n){var i=t.element.closest(".".concat(n,"-content"));if(i.length){var a=i.next(".".concat(n,"-footer"));a.length||(a=$('<div class="'.concat(n,'-footer"></div>')).insertAfter(i)),e.settings.footerContainmentClass&&a.addClass(e.settings.footerContainmentClass.toString()),t.pagerBar.appendTo(a)}})}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(ei("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var e=this;this.pagerBar.on("click.pager",".btn-icon",function(t){var n=t.currentTarget,i=n.parentNode,a=document.querySelector(".datagrid-cell-wrapper .dropdown"),s=document.querySelector(".datagrid-dropdown-list");if(t.preventDefault(),$(this).attr("disabled"))return!1;if(s){var o=a.parentNode.parentNode;s.remove(),o.classList.remove("is-editing")}var c=e.state,d=c.activePage;if(c.filteredTotal&&(d=c.filteredActivePage),ue.hasClass(i,"pager-prev"))return e.setActivePage(d-1,!1,"prev"),e.triggerPagingEvents(d),!1;if(ue.hasClass(i,"pager-next"))return e.setActivePage((-1===d?1:d)+1,!1,"next"),e.triggerPagingEvents(d),!1;if(ue.hasClass(i,"pager-first"))return e.setActivePage(1,!1,"first"),e.triggerPagingEvents(d),!1;if(ue.hasClass(i,"pager-last"))return e.setActivePage(e.pageCount(),!1,"last"),e.triggerPagingEvents(d),!1;var p=Number(n.getAttribute("data-page"));return(isNaN(p)||p<1)&&(p=1),e.setActivePage(p,!1,"page"),e.triggerPagingEvents(d),!1}),e.pagerBar.on("keydown.pager",$(e.focusableElements),function(t){if($(".popupmenu.is-open").length>0||e.settings.tabbable)return!0;var n=(t=t||window.event).which||t.keyCode||t.charCode||!1,i=37===n||40===n,a=39===n||38===n,s=t.target;if("INPUT"===s.nodeName&&(i=40===n,a=38===n),!i&&!a)return!0;var o="INPUT"===s.nodeName?s.parentNode.parentNode:s.parentNode,c=o.nextSibling,d=o.previousSibling,p=null===d,f=null===c;if(t.preventDefault(),i&&!p){var m=d.querySelector("button, input");return m.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),m.focus(),!1}if(i&&p){var b=o.parentNode.lastChild.querySelector("button, input");return b.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),b.focus(),!1}if(a&&!f){var C=c.querySelector("button, input");return C.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),C.focus(),!1}if(a&&f){var T=o.parentNode.firstChild.querySelector("button, input");T.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),T.focus()}return!1})},reset:function(e,t){this.activePage=this.settings.activePage,this.previousOperation=e,this.previousTrigger=t,this.teardown(),this.init()},showPageSizeSelector:function(e){e="true"==="".concat(e).toLowerCase(),this.settings.showPageSizeSelector=e,e&&(this.isShowPageSizeSelectorCall=e)},showButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var n=".pager-".concat(e," .btn-icon");"previous"===e&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);t="true"==="".concat(t).toLowerCase(),this.settings["show".concat(at.capitalize(e),"Button")]=t,i&&(t?i.parentNode.classList.remove("hidden"):i.parentNode.classList.add("hidden"))}},enableButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var n=".pager-".concat(e," .btn-icon");"previous"===e&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);if(t="true"==="".concat(t).toLowerCase(),this.settings["enable".concat(at.capitalize(e),"Button")]=t,i){var a=$(i),s=this.settings["".concat(e,"PageTooltip")];if(t){i.disabled=!1,i.parentNode.classList.remove("is-disabled"),a.removeAttr("disabled aria-disabled");var o=a.data("tooltip");o&&!o.content&&(o.content=s)}else i.disabled=!0,i.parentNode.classList.add("is-disabled"),a.attr({disabled:"disabled","aria-disabled":"true"}),!a.find(".disabled-tooltip").length&&(a.data("tooltip").destroy(),a.append('<div class="disabled-tooltip" title="'.concat(s,'"></div>')),a.find(".disabled-tooltip").tooltip())}}},setActivePage:function(e,t,n){var i="number"==typeof e.searchActivePage||"number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage,a=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===Ge(e)?a=i?e.filteredActivePage||e.searchActivePage:e.activePage?e.activePage:1:isNaN(e)||(a=e),i?this.filteredActivePage=a:this.activePage=a,this.previousOperation=n,this.render(),void 0===a||0===a||isNaN(a)||a===this.activePage&&!t?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),a)},adjustPageCount:function(e){var t=this.state,i=t.pages;return("number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage)&&t.filteredPages&&(i=t.filteredPages),(e<1||e>i)&&(e=this.filteredActivePage||this.activePage),e},pageCount:function(e){var t=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===e&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==e||this.settings.source||t?(void 0!==e&&(this._pageCount=e),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function(){var e,t=this.activePage,n=this.state.pages,i="",a=!1,s=!1,o=!1,c=!1,d=!this.settings.enableFirstButton,p=!this.settings.enablePreviousButton,f=!this.settings.enableNextButton,m=!this.settings.enableLastButton,b=this.settings.indeterminate&&!0===this.firstPage,C=this.settings.indeterminate&&!0===this.lastPage,T=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(t=this.state.filteredActivePage,n=this.state.filteredPages),this.pagerBar&&(null===(e=this.pagerBar)||void 0===e||null==e||e.children("li").find("> .btn-icon, > .btn-icon[disabled] .disabled-tooltip").each(function(le,re){var J=$(re);J.data("tooltip")&&J.data("tooltip").destroy()})),this.settings.showFirstButton&&((b||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===t)&&(d=!0),a=!0),this.settings.showPreviousButton&&((b||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===t)&&(p=!0),s=!0),this.settings.showNextButton&&((C||!this.settings.indeterminate&&"standalone"!==this.settings.type&&t===n)&&(f=!0),o=!0),this.settings.showLastButton&&((C||!this.settings.indeterminate&&"standalone"!==this.settings.type&&t===n)&&(m=!0),c=!0);var S=[],M=this.settings.showPageSizeSelector?190:0,L=(this.pagerBar.width()-M)/40,z=Math.floor(L);if((s||o)&&(z-=1),(c||a)&&(z-=1),!this.isTable&&"standalone"!==this.settings.type&&T&&z>=n&&(d=!0,m=!0),!this.settings.indeterminate){for(var V=Math.floor(z/2),N=t-V,U=t+V;N<1;)++N,U<n&&++U;for(;U>n;)N>1&&--N,--U;for(var G=N;G<U+1;G++)S.push(G)}function Z(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",re=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",J=arguments.length>2?arguments[2]:void 0,ce=arguments.length>3?arguments[3]:void 0,ke=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",_e=arguments.length>5&&void 0!==arguments[5]&&arguments[5],Oe=arguments.length>6&&void 0!==arguments[6]&&arguments[6],Qe=arguments.length>7&&void 0!==arguments[7]&&arguments[7],nt="",ot="",Ze="",ft="",Wt="";ce&&(Wt=' data-page="'.concat(ce,'"')),J&&(ft=' title="'.concat(J,'"')),Qe&&(ke+=" hidden"),_e&&(ke+=" selected",nt=' aria-disabled="true"'),Oe&&(ot=" disabled",nt=' aria-disabled="true"',Ze='<div class="disabled-tooltip"'.concat(ft,"></div>"),ce||(ft=""));var xt='<li class="'.concat(ke,'">\n        <button type="button" class="btn-icon"').concat(ft).concat(Wt).concat(nt).concat(ot,">\n          ").concat(Ze,"<span>").concat(re,"</span>\n          ").concat(le,"\n        </button>\n      </li>");return xt}if($(this.numberButtons).remove(),a&&(i+=Z($.createIcon({icon:"first-page"}),P.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,d,!1)),s&&(i+=Z($.createIcon({icon:"previous-page"}),P.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,p,!1)),!this.isTable&&T&&!this.settings.showPageSelectorInput){var oe="";S.forEach(function(le){oe+=le===(t||1)?Z(le,P.translate("PageOn"),null,le,"pager-no",!0,!1,!1):Z(le,P.translate("Page"),null,le,"pager-no",!1,!1,!1)}),i+=oe}o&&(i+=Z($.createIcon({icon:"next-page"}),P.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,f,!1)),c&&(i+=Z($.createIcon({icon:"last-page"}),P.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,m,!1)),this.pagerBar[0].innerHTML=i,c||a||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate||this.settings.showPageSelectorInput){var e=this.activePage,t=this.state.pages||1;if(this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.pageSelectorInput)t>1&&this.pagerBar.find(".pager-total-pages").text(t),this.pagerBar.find(".pager-count input").val(e);else{var n=this.settings.pageSelectorInputText||P.translate("PageOf");n=(n=n.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(e,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(t,"</span>")),$('<li class="pager-count"><label>'.concat(n," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var i=null,a="".concat(t).replace(/\d/g,"#"),s=this,o={pattern:a,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(o).on("focus",function(){i=parseInt($(this).val(),10)}).on("blur",function(){c($(this)),i=null}).on("keydown",function(d){return 13!==d.which||(c($(this)),d.stopPropagation(),d.preventDefault(),!1)})}function c(d){var p=s.adjustPageCount(parseInt(d.val(),10));if(i!==p){var f=s.activePage;s.state.filteredPages&&(f=s.state.filteredActivePage),d.val(s.setActivePage(p,!1,"page")),s.triggerPagingEvents(f)}else d.val(i)}},renderPageSizeSelectorButton:function(){var e=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var t=$('<li class="pager-pagesize"></li>'),n=$.createIcon({icon:"dropdown"}),i=P.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),a="",s="<span>".concat(i,"</span>");this.showSmallPageSizeSelector&&(a=' class="audible"',i=P.translate(this.settings.pageSizeSelectorTextNoToken),s='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(a,">").concat(i,"</span>"));var o=$('<button type="button" class="btn-menu">\n        '.concat(s,"\n        ").concat(n,"\n      </button>")).appendTo(t);t.appendTo(this.pagerBar);var c="";this.showSmallPageSizeSelector&&(c='<li class="heading">'.concat(i,"</li>"));for(var d=0;d<this.settings.pagesizes.length;d++){var p=this.settings.pagesizes[d];c+='<li class="'.concat(p===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(p,"</a></li>")}var f=$('<ul class="popupmenu is-selectable">'.concat(c,"</ul>"));o.after(f)}var m=$(this.pageSizeSelectorButton),b=_.extend({},{placementOpts:{parent:m,parentXAlignment:P.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);if(m.popupmenu(b),m.on("selected.pager",function(T,S){e.changePageSize(S)}),this.settings.tabbable){var C=m.data("popupmenu");this.pagerBar.off("keydown.".concat("pager"),".pager-pagesize button").on("keydown.".concat("pager"),".pager-pagesize button",function(T){40===(T.which||T.keyCode||T.charCode)&&C&&!C.isOpen&&(C.open(),T.preventDefault(),T.stopPropagation())})}}},render:function(){var e=this.state,t=e.pages;this.preserveFocus=this.preserveFocus||!1;var n=$(":focus").closest(".pager-pagesize").length>0;!this.preserveFocus&&n&&(this.preserveFocus=!0),e.filteredPages&&(t=e.filteredPages),this.pageCount(t),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar(),this.preserveFocus&&this.element.find(".pager-pagesize button").focus()},renderBar:function(e){var t,n,i=this,a=(e=e?_.extend({},this.state,e):this.state).activePage;e.filteredActivePage&&(a=e.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==e.firstPage&&(!1===e.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==e.firstPage&&1!==a||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==e.lastPage&&(!1===e.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==e.lastPage&&a!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var s=this.pagerBar[0]?this.pagerBar[0].classList:null,o=[".pager-first",".pager-prev",".pager-next",".pager-last",".pager-count"],c=function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p.forEach(function(m){f?i.pagerBar.find(m).addClass("hidden"):i.pagerBar.find(m).removeClass("hidden")})};this.settings.hideOnOnePage&&e.total<=e.pagesize?c(o):this.hidePagerBar(e)&&s?s.add("hidden"):this.settings.hideOnOnePage&&s&&s.contains("hidden")&&(s.remove("hidden"),c(o,!1)),this.initTabIndexes(),_.addAttributes(this.pagerBar,this,this.settings.attributes),_.addAttributes(this.pagerBar.find(".pager-first button"),this,this.settings.attributes,"btn-first"),_.addAttributes(this.pagerBar.find(".pager-prev button"),this,this.settings.attributes,"btn-prev"),_.addAttributes(this.pagerBar.find(".pager-next button"),this,this.settings.attributes,"btn-next"),_.addAttributes(this.pagerBar.find(".pager-last button"),this,this.settings.attributes,"btn-last"),_.addAttributes(this.pagerBar.find(".pager-pagesize button"),this,this.settings.attributes,"btn-pagesize"),_.addAttributes(this.pagerBar.find("input"),this,this.settings.attributes,"pagesize-input"),this.pagerBar.find(".pager-pagesize .popupmenu li").each(function(){var p=$(this).find("a"),f=p.text();_.addAttributes(p,i,i.settings.attributes,"pagesize-opt-".concat(f))});var d=null===(t=this.pagerBar.find(".btn-menu"))||void 0===t||null===(n=t?.data("popupmenu"))||void 0===n||null==n?void 0:n.menu;d&&d.find("li").each(function(){var p=$(this).find("a"),f=p.text();_.addAttributes(p,i,i.settings.attributes,"pagesize-opt-".concat(f))})},initTabIndexes:function(){if(!this.settings.tabbable){var e=$(this.focusableElements);e.attr("tabindex","-1"),e.filter(":not([disabled])").first().removeAttr("tabindex")}},triggerPagingEvents:function(e){var t=this.state;e||(e=this.state.activePage),"first"===t.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,t),this.element.trigger("firstpage",t)),"prev"===t.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,t),this.element.trigger("previouspage",t)),"next"===t.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,t),this.element.trigger("nextpage",t)),"last"===t.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,t),this.element.trigger("lastpage",t)),"pageinfo"!==t.type&&this.element.trigger("page",t)},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),Array.isArray(e.pagesizes)&&e.pagesizes.length&&(this.settings.pagesizes=e.pagesizes);var t={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(t),this},changePageSize:function(e){var t=e;t.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),t.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(t.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:e,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:e,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(e,t){if(e){if(e.pagesize&&(this.settings.pagesize=e.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=e.pagesize)),e.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==e.firstPage&&(this.firstPage=e.firstPage,this.settings.enableFirstButton=!e.firstPage,this.settings.enablePreviousButton=!e.firstPage),void 0!==e.lastPage&&(this.lastPage=e.lastPage,this.settings.enableNextButton=!e.lastPage,this.settings.enableLastButton=!e.lastPage),isNaN(e.grandTotal)||(this.grandTotal=e.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=e.total),isNaN(e.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=e.filteredTotal,this.filteredActivePage=e.searchActivePage||e.filteredActivePage||1),e.type||(e.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(e,!1,e.type),void("initial"===e.type||t||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(e){return!(!e||!0!==e.firstPage||!0!==e.lastPage||!e.hideDisabledPagers)},teardown:function(){var e;this.numberButtons&&this.numberButtons.forEach(function(t){var n=t.querySelector(".btn-icon"),i=$(n).data("button"),a=$(n).data("tooltip");i&&i.destroy(),a&&a.destroy()}),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),null===(e=$(this.pageSelectorInput).data("mask"))||void 0===e||null==e||e.destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var e=$(this.pageSizeSelectorButton).data("popupmenu");if(e&&e.menu){var t=e.menu;e.destroy(),t.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(e){return this.each(function(){var t=$.data(this,"pager");t?t.updated(e):t=$.data(this,"pager",new Rt(this,e))})};var Zt={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,allowDeselect:!0,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1,attributes:null,attributesOverride:null};function zn(e,t){return this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Zt),this.init(),this}zn.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var e={};this.settings.pagerSettings&&(e=this.settings.pagerSettings),e.dataset=this.settings.dataset,e.source=this.settings.source,e.type="list";for(var t=["pagesize","showPageSizeSelector"],n=0;n<t.length;n++)void 0===this.settings[t[n]]||e[t[n]]||(e[t[n]]=this.settings[t[n]]);return e},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var e=this,t=this.element.closest(".card, .widget"),n=this.element.attr("data-selectable"),i=this.element.attr("data-select-onfocus");if($(".listview-filter-wrapper").length>0){var a=$(".listview-filter-wrapper"),s=a.siblings(".searchfield-wrapper");s.addClass("no-animate");var o=a.css("width");s.addClass("has-listview-filters"),s.css("width","calc(100% - ".concat(o,")"))}if(this.element.attr("data-pagesize")){var c=Number(this.element.attr("data-pagesize"));isNaN(c)||(this.settings.pagesize=c),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var d=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),d.each(function(b,C){e.settings.dataset.push({text:$(C).text()})}),d.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var p=window[this.settings.dataset];p&&p.length&&(this.settings.dataset=p)}n&&n.length&&(this.settings.selectable=n),i&&i.length&&(this.settings.selectOnFocus=JSON.parse(i)),this.actionButton=t.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),this.settings.attributes&&_.addAttributes(this.element,this,this.settings.attributes,"listview",this.settings.attributesOverride),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var f=this.element.parent(".card-content, .widget-content");if(f[0]&&(f[0].style.overflow="visible",f.css({display:"flex","justify-content":"flex-end","flex-direction":"column"})),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete");var m={filterMode:"contains"};"object"===Ge(this.settings.listFilterSettings)&&(m=_.extend({},m,this.settings.listFilterSettings)),this.listfilter=new ns(m)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(e){var t,n={count:e.length};if(e[0]){for(t in e[0])n[t]=0;for(var i=0;i<e.length;i++)for(t in e[i])n[t]+=parseFloat(e[i][t]);return n}},render:function(e,t){var n=this,a={},s=e,o=0,d=this.settings.pagesize,p=e.length;if(t&&(d=t.pagesize||d,p=t.filteredTotal||p),!("function"==typeof this.settings.source)&&this.pagerAPI&&(this.renderPager(t,!0),t=this.pagerAPI.state),p>d&&(this.filteredDataset?t.filteredPages:t.pages)>1){var f=t.activePage>0?t.activePage-1:0;this.filteredDataset&&(f=t.filteredActivePage-1),s=e.slice(o=t.pagesize*f,t.pagesize*(f+1))}if("object"===Ge(ui)&&s&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(at.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(e));var m=ui.compile(this.settings.template,{dataset:s,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),s.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(m):n.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),ue.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):n.emptyMessageContainer?(this.element.empty(),ue.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===s.length&&this.element.html(m||"<ul></ul>")}var b=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||b.find(".card-title, .widget-title").text()||"List"});var C=this.element.find("li, tbody > tr").first(),T=this.element.find("li, tr"),S="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=C.attr("tabindex",0),this.settings.selectable||1!==C.find("a").length||C.removeAttr("tabindex");var M=T.length>s.length;T.each(function(L){var z=$(this);if(z.attr("role","option"),Ie.features.touch&&z.addClass("is-touch"),n.settings.attributes&&_.addAttributes(z,n,n.settings.attributes,"listview-item-".concat(L),n.settings.attributesOverride),S){n.element.addClass("is-multiselect");var V=n.element.prevAll(".toolbar, .contextual-toolbar");V.length&&V.data("toolbar")&&V.data("toolbar").toggleMoreMenu(),n.settings.showCheckboxes&&0===z.children(".listview-selection-checkbox").length&&z.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(P.translate("Checkbox")," ").concat(P.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}else n.element.removeClass("is-multiselect"),z.find(".listview-selection-checkbox").remove();if(M){var N=o+L;if(N<n.settings.dataset.length){var U=n.settings.dataset[N];z.css("display",void 0===U._isFilteredOut||U._isFilteredOut?"":"none")}}else z.css("display","");z.attr({"aria-posinset":o+L+1,"aria-setsize":p}),z.hasClass("is-disabled")&&z.attr("aria-disabled","true"),n.settings.highlight&&n.searchTerm&&z.highlight(n.searchTerm)}),n.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[s]),this.element.off("updated.listview").on("updated.listview",function(L,z){n.updated(z)})},renderPager:function(e,t){this.pagerAPI&&this.pagerAPI.updatePagingInfo(e,t)},getPageableElements:function(){var e=this.element.children();return e.is("ul")&&(e=e.children()),e},refresh:function(e,t){this.loadData(e,t),this.list&&this.render(this.list.data)},loadData:function(e,t,n){var i=!1,a=this;if(e=e||this.settings.dataset,this.filteredDataset&&(e=this.filteredDataset),t||(this.pagerAPI?(e.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:e}),t=this.pagerAPI.state):t={activePage:1}),this.filteredDataset?t.filteredTotal=e.length:t.total=e.length,Array.isArray(e)){var s=this.settings.source;if("string"!=typeof e||0!==e.indexOf("http")&&0!==e.indexOf("/")||(s=e,i=!0),!s&&!i||this.filteredDataset||n)this.render(e,t);else switch(Ge(s)){case"function":s(t,o);break;case"string":return void(0!==s.indexOf("http")&&0!==s.indexOf("/")||$.getJSON(s,o));default:this.settings.dataset=s,e=s,this.render(s,t)}}function o(c,d){a.settings.dataset=c,e=c,"string"==typeof d&&(d={activePage:a.pagerAPI?a.pagerAPI.activePage:1,pagesize:a.settings.pagesize,total:e.length,type:d}),a.pagerAPI&&(a.renderPager(d,!0),d=a.pagerAPI.state),a.render(e,d)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(e){_.clearSelection(),e.sort(function(i,a){return i-a});for(var t=e[0];t<=e[1];t++){var n=$("li, tbody tr",this.element).eq(t);n.is(".is-disabled, .is-selected")||this.select(n)}},deselectItemsBetweenIndexes:function(e){e.sort(function(i,a){return i-a});for(var t=e[0];t<=e[1];t++){var n=$("li, tbody tr",this.element).eq(t);!n.is(".is-disabled")&&n.is(".is-selected")&&this.select(n)}},handleResize:function(){var e=$("li .listview-heading, tr .listview-heading",this.element),t=e.eq(1),n=t.width();t.length&&n&&(e[0].style.width="".concat(n,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(e,t){this.filter(t)},filter:function(e){if(e){var t=(e=$(e)).val().trim(),n={searchActivePage:1};if(t){if(t.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==t){this.searchTerm=t,this.element.unhighlight(),this.settings.dataset.forEach(function(a){a._isFilteredOut=!1});var i=this.listfilter.filter(this.settings.dataset,this.searchTerm,!0);i.length||(i=[]),n.filteredTotal=i.length,n.searchActivePage=1,i.forEach(function(a){a._isFilteredOut=!0}),this.filteredDataset=i,this.loadData(null,n),this.element.trigger("filtered",{elem:this.element,filteredResults:i,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach(function(t){delete t._isFilteredOut}),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this.refresh(null,{activePage:1,filteredTotal:void 0,searchActivePage:void 0})},focus:function(e){e.is(":hidden")||e.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=e.attr("tabindex",0).focus(),this.settings.selectable||1!==e.find("a").length||(e.find("a").focus(),e.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(e))},remove:function(e){"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e,!0),e.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,n){e.remove(n)})},clearAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,n){e.select(n)})},sortInit:function(e,t,n){n&&""!==$.trim(n)&&$("[".concat(n,"]")).each(function(){var i=$(this),a=$.fn.parseOptions(i,n);i.on(t,function(s){$(a.list).data(e).setSortColumn(a),s.preventDefault()})})},setSortColumn:function(e){var t=e.orderBy||this.list.sort.field,n=e.order;if(this.list.data||t){n=n?"desc"===n:!(this.list.sort&&this.list.sort[t]&&this.list.sort[t].reverse),(e.reloadApi||e.reloadApiNoSort)&&this.loadData(),e.reloadApiNoSort&&(n=this.list.sort[t=this.list.sort.field].reverse);var i=this.sortFunction(t,n);this.list.data.sort(i),this.render(this.list.data),this.list.sort={field:t},this.list.sort[t]={reverse:n},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(e,t,n){n||(n=function(a){return"string"==typeof(a=a??"")&&(a=a.toUpperCase(),isNaN(parseFloat(a))||(a=parseFloat(a))),a});var i=n?function(a){return n(a[e])}:function(a){return a[e]};return t=t?-1:1,function(a,s){return a=i(a),s=i(s),t*((a>s)-(s>a))}},deselect:function(e){this.settings.allowDeselect&&("number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e))},unselect:function(e){return Sa(this.deselect,this.unselect).apply(this,[e])},select:function(e,t){var n,i=this,a="mixed"===i.settings.selectable;if(i.selectedItems=[],"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),(!(n=e.hasClass("is-selected"))||this.settings.allowDeselect)&&(e.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),e.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable)){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(e.parent().children().removeAttr("aria-selected"),e.parent().find(".is-selected").removeClass("is-selected"),i.selectedItems[0]=$(this)),n?(i.selectedItems=[],e.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(e.addClass("is-selected".concat(a?" hide-selected-color":"")),i.lastSelectedItem=e.index()),e.parent().find(".is-selected").each(function(S){i.selectedItems[S]=$(this)}),e.find(".listview-selection-checkbox input").prop("checked",!n),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var s=n?"NotSelected":"Selected";e.attr("aria-selected",!n),e.find(".label-text .audible").text("".concat(P.translate("Checkbox")," ").concat(s,"."))}if(!t){for(var o=n?"unselected":"selected",c=[],d=0;d<this.selectedItems.length;d++){var p=this.selectedItems[d][0].getAttribute("aria-posinset");c.push(this.settings.dataset[p-1])}this.element.triggerHandler(o,{selectedItems:this.selectedItems,elem:e,selectedData:c}),"unselected"===o&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:e,selectedData:c})}var f=this.element.closest(".card, .widget");f.length||(f=this.element.parent());var m=f.find(".listview-toolbar, .contextual-toolbar"),b=m.data("toolbar");if(i.selectedItems.length>0){if(b&&b.toggleMoreMenu(),m.one("animateopencomplete",function(){i.element.addClass("is-toolbar-open"),m.trigger("recalculate-buttons").removeClass("is-hidden")}),m[0]){var C=m[0].classList.contains("contextual-toolbar");m[0].style.display=C?"block":""}m.animateOpen({distance:40});var T=m.find(".title, .selection-count");T&&T.length||(T=$(m.hasClass("contextual-toolbar")?'<div class="toolbar-section title selection-count"></div>':'<div class="title selection-count"></div>'),m.prepend(T)),T.text("".concat(i.selectedItems.length," ").concat(P?P.translate("Selected"):"Selected"))}else m.addClass("is-hidden").one("animateclosedcomplete",function(S){S.stopPropagation(),this.style.display="none",i.element.removeClass("is-toolbar-open")}).animateClosed()}},toggleItemActivation:function(e){e.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(e):this.activateItem(e)},activateItem:function(e){var t="number"==typeof e?e:e.index(),n=this.element.find("li.is-activated");"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),this.deactivateItem(n),!1!==this.element.triggerHandler("beforeactivate",[{index:t,elem:e,data:this.settings.dataset[t]}])&&(e.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:t,elem:e,data:this.settings.dataset[t]}]))},activatedItem:function(){var e=this.element.find("li.is-activated"),t=e.index();return{index:t,elem:e,data:this.settings.dataset[t]}},deactivateItem:function(e){"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),void 0===e&&(e=this.element.find("li.is-activated")),e.removeClass("is-activated");var t=e.index();t<0||this.element.triggerHandler("itemdeactivated",[{index:t,elem:e,data:this.settings.dataset[t]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e=this.searchfield.data("searchfield");e&&e.xButton&&e.xButton.trigger("click")}},updated:function(e){return(null==e||null==e?void 0:e.selectable)!==this.settings.selectable&&$(this.element.children()[0]).find("li").removeClass("is-selected is-activated"),e&&(this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset)),this.updateSearch(),this.refresh(e&&e.dataset?e.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview longpress.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData("listview")},handleEvents:function(){var e=this,t=!1,n=!1,i="multiple"===e.settings.selectable||"mixed"===e.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",function(s){var o=$(this);if(!(s.originalEvent&&s.originalEvent.target&&$(s.originalEvent.target).is(".icon-favorite"))){if(o.is(":first-child")&&o.hasClass("is-disabled")){var c=$.Event("keydown.listview");c.keyCode=40,t=!0,o.trigger(c)}t||o.hasClass("is-disabled")||!e.settings.selectOnFocus||"multiple"===e.settings.selectable||"mixed"===e.settings.selectable||(e.select(o),t=!0,n=!0)}}),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",function(s){var o=$(this),c=o.is("a")?o.closest("li"):$(this),d=c.is("a")?c.closest("ul"):c.parent(),p=s.keyCode||s.charCode||0,f=s.metaKey;if(0===c.index()&&38===s.keyCode)return!1;if((40===p||38===p)&&!f){var m=40===s.keyCode?c.nextAll(":not(.is-disabled):visible:first"):c.prevAll(":not(.is-disabled):visible:first");m.length&&($(s.target).is(c)||s.shiftKey||o.is("a"))&&e.focus(m),s.preventDefault(),s.stopPropagation()}if(35===p||40===p&&f){var b=d.children().last();return e.focus(b),s.stopPropagation(),!1}if(36===p||38===p&&f){var C=d.children().first();return e.focus(C),s.stopPropagation(),!1}return 32===p&&$(s.target).is(c)&&(i&&s.shiftKey?e.selectItemsBetweenIndexes([e.lastSelectedItem,c.index()]):e.select(c),s.preventDefault()),i&&(s.ctrlKey||s.metaKey)&&65===p&&(e.toggleAll(),e.focus(c),s.preventDefault()),!0}),this.settings.selectable){this.element.addClass("is-selectable");var a=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",function(s){var o=$(this),c=$(s.target).closest(".listview-selection-checkbox").length>0,d="mixed"===e.settings.selectable,p=$(s.target);p.hasClass("icon-favorite")||p.hasClass("hyperlink")||(!o.hasClass("is-selected")&&n&&(n=!1),n||o.hasClass("is-disabled")||d&&!c||(t=!0,i&&s.shiftKey?(e.selectItemsBetweenIndexes([e.lastSelectedItem,o.index()]),s.preventDefault()):e.select(o),o.focus()),o.hasClass("is-disabled")||!d||c||(o.focus(),e.toggleItemActivation(o)),a.length>0&&$(window).outerWidth()<767&&!o.hasClass("is-disabled")&&!c&&e.element.trigger("drilldown",[o]),n=!1,s.preventDefault(),s.stopPropagation(),e.element.trigger("click",[{elem:o,data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:s}]))}),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",function(s){var o=$(this);return s.preventDefault(),s.stopPropagation(),e.element.trigger("dblclick",[{elem:$(this),data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:s}]),!1}),this.element.off("contextmenu.listview longpress.listview","li, tr").on("contextmenu.listview longpress.listview","li, tr",function(s){var o=$(this);return s.preventDefault(),s.stopPropagation(),e.element.trigger("contextmenu",[{elem:$(this),data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:s}]),!1})}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",function(s){$(this).parent().trigger("click"),s.stopPropagation()}),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",function(s){e.handleSearch(s,$(this))}).off("cleared.searchable-listview").on("cleared.searchable-listview",function(){e.resetSearch(),e.element.trigger("filtered",{elem:e.element,filteredResults:[],term:""})}),this.pagerAPI&&this.element.off("page.listview").on("page.listview",function(s,o){e.handlePageChange(o)}).off("pagesizechange.listview").on("pagesizechange.listview",function(s,o){e.handlePageSizeChange(o)}),$("body").off("resize.listview").on("resize.listview",function(s){e.handleResize(s)}),e.element.prev(".listview-header").off("click.listview").on("click.listview",function(){var s=$(this).find(".plus-minus");s.hasClass("active")?(s.removeClass("active"),e.element.animateClosed()):(s.addClass("active"),e.element.animateOpen())})},handlePageSizeChange:function(e){e.activePage=1,this.loadData(void 0,e)},handlePageChange:function(e){this.loadData(void 0,e)}},$.fn.listview=function(e){var t=$(this),n=t.attr("data-dataset"),i=t.attr("data-tmpl"),a=_.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var s=_.extend({},e,a);return this.each(function(){var o=$.data(this,"listview");o?o.updated(s):o=$.data(this,"listview",new zn(this,s))})};var St={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",attributes:null,template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function jn(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,St),t&&t.dataset&&(this.settings.dataset=t.dataset),this.init()}jn.prototype={init:function(){var e=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout(function(){e.setSelected()},0)},loadListview:function(){var e,t=this.settings,n=$(".listview",this.element);return t.attributes&&(e=this.getLvAutomationAttributes("-listbuilder")),!t.dataset.length&&n.length&&$("li",n).length?this.listApi=n.listview({selectable:"single",attributes:e}).data("listview"):n.length&&(this.listApi=n.listview({dataset:t.dataset,template:t.template,selectable:"single",attributes:e}).data("listview")),this},getLvAutomationAttributes:function(e){var t,n=this,i=this.settings;if(i.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(i.attributes))t=[],i.attributes.forEach(function(s){var o="function"==typeof s.value?s.value(n):s.value;t.push({name:s.name,value:o+e})});else{var a="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;t={name:i.attributes.name,value:a+e}}return t},updateLvAutomationAttributes:function(e){if(this.settings.attributes&&e){for(var t,n=this.dataset.length-1,i=!0,a=1e3;i&&a>0;){var s="-listbuilder-listview-item-".concat(n);t=this.getLvAutomationAttributes(s),i=this.findAutomationAttributesItem(t),n++,a--}_.addAttributes(e,this,t)}},findAutomationAttributesItem:function(e){var t=!1;if(this.settings.attributes&&e&&Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var a=e[n];if(this.listApi.element.find("[".concat(a.name,'="').concat(a.value,'"]')).length){t=!0;break}}return t},initDataset:function(){var e=this.settings,t=$(".listview li",this.element);this.dataset=[];for(var n=0,i=t.length;n<i;n++){var a=void 0,s=$(t[n]);e.dataset?(a=JSON.parse(JSON.stringify(e.dataset[n]))).node=s:a=this.extractNodeData(s),this.dataset.push(a)}return this},extractNodeData:function(e){var t={node:e,text:$.trim($(".item-content",e).text())},n=e.attr("data-value");return void 0!==n&&(t.value=n),t},setElements:function(){var e=this,t=this.settings,n=function(a){return e.isjQuery(a)?a:"string"==typeof a?$('[data-action="'.concat(a,'"]'),e.element):null};t.btnAdd=n(t.btnAdd),t.btnGoUp=n(t.btnGoUp),t.btnGoDown=n(t.btnGoDown),t.btnEdit=n(t.btnEdit),t.btnDelete=n(t.btnDelete);var i="listbuilder-btn";return _.addAttributes(t.btnAdd,this,t.attributes,"".concat(i,"-add")),_.addAttributes(t.btnGoUp,this,t.attributes,"".concat(i,"-goup")),_.addAttributes(t.btnGoDown,this,t.attributes,"".concat(i,"-godown")),_.addAttributes(t.btnEdit,this,t.attributes,"".concat(i,"-edit")),_.addAttributes(t.btnDelete,this,t.attributes,"".concat(i,"-delete")),this.topButtons=t.btnAdd.add(t.btnGoUp).add(t.btnGoDown).add(t.btnEdit).add(t.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:t.handle,placeholder:t.templateNewItem}).data("arrange"),this},handleEvents:function(){var e,t=this,n=this,i=n.settings,a=function(s,o){s.off("click.listbuilder").on("click.listbuilder",function(){n[o]()})};return a(i.btnAdd,"addItem"),a(i.btnGoUp,"moveItemUp"),a(i.btnGoDown,"moveItemDown"),a(i.btnEdit,"editItem"),a(i.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",function(s,o){var c=t.getDataByNode(o.start),d=i.templateItemContent.replace(/{{text}}/g,c.data.text);t.arrangeApi.placeholders.attr("data-value",c.data.text).find(".item-content").html(d)}).on("arrangeupdate.listbuilder",function(s,o){t.updateAttributes(),t.arrayIndexMove(t.dataset,o.startIndex,o.endIndex),(e=t.getDataByNode(o.end)).indexBeforeMove=o.startIndex,t.element.triggerHandler("arrangeupdate",[e])}),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",function(){var s=$(this);s.is(".is-selected")||s.trigger("click")}),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",function(s,o){e=t.getDataByNode(o.elem[0]),t.element.triggerHandler("selected",[e])}),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,function(s,o){t.element.triggerHandler("updated",[o])}),this},addItem:function(){var e=this,t=this.settings;$.when(this.element.triggerHandler("beforeadd")).done(function(){var n,a=0,s=e.listApi.selectedItems[0],o=t.templateNewItem.replace(/{{text}}/g,P.translate("NewItem"));s&&s.length>0?(a=e.getDataByNode(s).index+1,$(o).insertAfter(s),n=$("li",e.ul).eq(a)):(e.ul.prepend(o),n=$("li:first-child",e.ul)),e.dataset.push(e.extractNodeData(n)),e.arrayIndexMove(e.dataset,e.dataset.length-1,a),e.updateAttributes(),e.updateLvAutomationAttributes(n),n.trigger("click"),e.arrangeApi.updated(),e.editItem(!0),e.element.triggerHandler("afteradd",[{index:a,data:e.dataset[a]}])})},moveItemUp:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);void 0!==n.index&&n.index>0&&$.when(e.element.triggerHandler("beforegoup",[n])).done(function(){var i=t.prev();t.insertBefore(i),e.updateAttributes(),e.arrayIndexMove(e.dataset,n.index,n.index-1),n.indexBeforeMove=n.index,n.index--,e.element.triggerHandler("aftergoup",[n])})}},moveItemDown:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);void 0!==n.index&&n.index<e.dataset.length-1&&$.when(e.element.triggerHandler("beforegodown",[n])).done(function(){var i=t.next();t.insertAfter(i),e.updateAttributes(),e.arrayIndexMove(e.dataset,n.index,n.index+1),n.indexBeforeMove=n.index,n.index++,e.element.triggerHandler("aftergodown",[n])})}},editItem:function(e){var t=this.listApi.selectedItems[0];t&&t.length>0&&(t.is(".is-editing")?this.commitEdit(t,e):this.makeEditable(t,e))},makeEditable:function(e,t){var n=this,i=n.getDataByNode(e),a=$(".item-content",e);void 0!==i.index&&i.index<n.dataset.length&&$.when(n.element.triggerHandler("beforeedit",[i])).done(function(){var s=$e.escapeHTML((a.text().trim()||"").toString()),o=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(s,'" />'));e.addClass("is-editing"),a.html(o),setTimeout(function(){o.focus().select()},0),o.on("click.listbuilder",function(){return!1}).on("blur.listbuilder",function(){return n.commitEdit(e,t)}).on("keypress.listbuilder",function(c){13===(c.keyCode||c.charCode||0)&&(n.commitEdit(e,t),e.focus())}),n.element.triggerHandler("entereditmode",[i])})},commitEdit:function(e,t){var n=this.settings,i=this.getDataByNode(e),a=$(".item-content",e),s=$(".edit-input",a);s.val($e.escapeHTML((s.val()||"").toString())),t&&(i.data.value=s.val()),i.data.text=s.val(),s.off("click.listbuilder blur.listbuilder keypress.listbuilder"),a.html(n.templateItemContent.replace(/{{text}}/g,s.val())),e.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[i])},deleteItem:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var n=e.getDataByNode(t);void 0!==n.index&&$.when(e.element.triggerHandler("beforedelete",[n])).done(function(){e.listApi.removeAllSelected(),e.updateAttributes(),e.dataset.splice(n.index,1),e.element.triggerHandler("afterdelete",[n])})}},getDataByNode:function(e){for(var t={},n=0,i=this.dataset.length;n<i;n++){var a=this.dataset[n];if($(a.node).is(e)){t={index:n,data:a};break}}return t},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},moveCursorToEnd:function(e){setTimeout(function(){if("number"==typeof e.selectionStart)e.selectionEnd=e.value.length,e.selectionStart=e.value.length;else if(void 0!==e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}},100)},updateAttributes:function(){for(var e=$("li",this.ul),t=0,n=e.length;t<n;t++)$(e[t]).attr({"aria-posinset":t+1,"aria-setsize":n})},updateDataset:function(e){var t=this,n=$("li",this.ul),i=$(".listview",this.element).data("listview");i.deselectItemsBetweenIndexes([0,n.length-1]),this.settings.dataset=e,i.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout(function(){t.setSelected()},0)},setSelected:function(){for(var e=$("li[selected]",this.ul),t=0,n=e.length;t<n;t++){var i=$(e[t]);i.removeAttr("selected"),i.is(".is-selected")||i.trigger("click")}return this},select:function(e){var t=this.getListItem(e);t&&!t.is(".is-selected")&&t.trigger("click")},unselect:function(e){var t=this.getListItem(e);t&&t.is(".is-selected")&&t.trigger("click")},getListItem:function(e){var t=$();if(this.isElement(e)&&$.contains(this.ul,e))t=this.isjQuery(e)?e:$(e);else{var n=parseInt(e,10),i=$("li",this.ul);!isNaN(n)&&n>-1&&n<i.length?t=i.eq(n):"first"==="".concat(e).toLowerCase()?t=i.first():"last"==="".concat(e).toLowerCase()&&(t=i.last())}return t.length<1?null:t.length>1?t.eq(0):t},isElement:function(e){return this.isjQuery(e)&&e.get(0)instanceof Element||e instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var e=0,t=this.topButtons.length;e<t;e++){var n=$(this.topButtons[e]).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,St)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(e){return this.each(function(){var t=$.data(this,"listbuilder");t?t.updated(e):t=$.data(this,"listbuilder",new jn(this,e))})};var ti=["click","immediate"],Kn=[!1,"responsive","always"],fn={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:0,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,closeBtnOptions:{attributes:[],closeBtnTooltip:"Close"},maxWidth:null,fullsize:Kn[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null,hideUnderneath:!1,suppressEnterKey:!1,icon:null,iconClass:null};function Ji(e){return e.trigger&&-1===ti.indexOf(e.trigger)&&(e.trigger=fn.trigger),e.fullsize&&-1===Kn.indexOf(e.fullsize)&&(e.fullsize=fn.fullsize),e.breakpoint&&-1===it.available.indexOf(e.breakpoint)&&(e.breakpoint=fn.breakpoint),e}function ci(e,t){this.settings=_.mergeSettings(e,t,fn),this.settings=Ji(this.settings),this.originalElement=$(e),this.element=$(e),this.init(),this.reStructure()}ci.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var e;return this.trigger&&this.trigger.length?e=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(e=this.mainContent.data("contextualactionpanel")),e},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(e){this.element[0].classList[!0===e?"add":"remove"]("is-visible")},set active(e){this.element[0].classList[!0===e?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var e=0,t=this.element;return $(".modal.is-visible").each(function(){e<this.style.zIndex&&(e=this.style.zIndex)}),e===t[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&it.isBelow(this.settings.breakpoint)||"responsive"===this.settings.fullsize&&this.isAndroid()&&"phone-to-tablet"===this.settings.breakpoint},get closeBtn(){var e=this.capAPI;return e&&e.element instanceof $?e.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var e=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(e.namespace),function(i){$(i.currentTarget).is(e.trigger)&&e.open()}),"immediate"===this.settings.trigger){var t=new nn({duration:1,timeoutCallback:function(){e.open()}});dt.register(t)}if(e.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var n=new nn({duration:1,timeoutCallback:function(){e.open()}});dt.register(n)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element[0].classList[this.settings.hideUnderneath?"add":"remove"]("hide-underneath"),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function(){var e=this,t=!1,n=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(n,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var i=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(P.translate(this.settings.closeBtnOptions.closeBtnTooltip,{showAsUndefined:!1,showBrackets:!1}),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(P.translate("Close"),"</span>\n        </button>\n      "));$(window).width()>=400&&this.element.addClass("has-close-btn"),this.element.find(".modal-content").append(i),i.on("click.".concat(this.namespace),function(){return e.close()}).tooltip(),this.settings.closeBtnOptions.attributes&&_.addAttributes(i,this,this.settings.closeBtnOptions.attributes,"",!0)}if(this.settings.id&&(this.element.attr("id",this.settings.id),_.addAttributes(this.element,this,this.settings.attributes,"",!0)),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),t=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(t=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),t||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=$e.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),t||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),this.settings.icon){var a=this.settings.iconClass?" icon-".concat(this.settings.iconClass):"",s=$('<svg class="icon'.concat(a,'"\n        focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.icon,'"></use>\n      </svg>'));this.element.find(".modal-title svg.icon").length>0||this.element.find(".modal-title").prepend(s)}_.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),qi.register(this)},reStructure:function(){var e=$(".modal-body",this.element),t=$("hr:first-child",e),n=$(".modal-buttonset",this.element);e&&e.length&&!e.parent().hasClass("modal-body-wrapper")&&e.wrap('<div class="modal-body-wrapper"></div>'),t&&t.length&&!t.parent().hasClass("modal-content")&&t.insertAfter(this.element.find(".modal-header")),n&&n.length&&!n.parent().hasClass("modal-content")&&n.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var e=this.element,t=e.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),n=e.find("select.dropdown[data-validate]"),i=e.find("[data-validate]:visible");if(n.each(function(){$(this).next(".dropdown-wrapper").is(":visible")&&(i=i.add(this))}),i.length>0){t.removeAttr("disabled");var a=!0;i.each(function(){var s=$(this);if(!(s.closest(".datagrid-filter-wrapper").length>0)){var o=s.is(".dropdown")&&s.next(".dropdown-wrapper").is(":visible")||null!==s[0].offsetParent;s.is(".required")?o&&!s.val()&&(a=!1):(s.validateField(),o&&!s.isValid()&&(a=!1)),o&&s.is(".error")&&(a=!1),a&&t.removeAttr("disabled")}}),a||t.is(":disabled")||t.attr("disabled","true")}},renderButtonset:function(){var e=this,t=this.settings.buttons,n={style:"modal"},i=this;if(!this.buttonsetElem){var a=this.element.find(".modal-buttonset");if(a&&a.length)n.detectHTMLButtons=!0;else{if(!Array.isArray(t)||!t.length)return;var s=this.element.find(".modal-body").parent(),c='<div class="'.concat(this.settings.useFlexToolbar?"toolbar-section ":"",'modal-buttonset"></div>');(a=$(c)).insertAfter(s),n.buttons=t}this.buttonsetElem=a,a.buttonset(n),this.buttonsetAPI=a.data("buttonset"),t=this.buttonsetAPI.toData().buttons}var d=this.buttonsetAPI.buttons,p=$(),f=100/d.length;d.forEach(function(m,b){var C=Array.isArray(t)&&t.length?t[b]:void 0,T=!1;if(C)if(m.element[0].setAttribute("id",t[b].id||_.uniqueId(m.element,"button","modal")),t[b].tabindex&&m.element[0].setAttribute("tabindex",t[b].tabindex),$(m.element).on("click.".concat(i.namespace),function(M){var L=C.click;L&&(L.apply(i.element[0],[M,i]),T=!0)}),$(m.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(i.namespace),function(M){T||($(M.target).is(".btn-cancel")&&(i.isCancelled=!0),0===e.openSubComponents.length&&i.close())}),C.validate&&m.element[0].classList.add("no-validation"),C.attributes)_.addAttributes(m.element,e,C.attributes,"",e);else if(m.element.is("[class*=primary]"))_.addAttributes(m.element,e,i.settings.attributes,"primary",!0);else if(m.element.is("[class*=cancel]")||m.element.text()===P.translate("Cancel"))_.addAttributes(m.element,e,i.settings.attributes,"cancel",!0);else{var S;_.addAttributes(m.element,e,i.settings.attributes,null===(S=m.element)||void 0===S||null==S?void 0:S.prop("id"),!0)}m.element[0].style.width="".concat(f,"%"),p.add(m)})},addButtons:function(e){var t,n=this,i=this,a=this.element.find(".modal-body").parent(),s=this.element.find(".flex-toolbar"),o=100,c=!1;if(this.modalButtons=e,!e){var d=this.element.find(".modal-buttonset button");o=100/d.length;for(var p=0,f=d.length;p<f;p++)d[p].style.width="".concat(o,"%");return d.button(),void d.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(i.namespace),function(C){$(C.target).is(".btn-cancel")&&(i.isCancelled=!0),0===n.openSubComponents.length&&i.close()})}this.isCAP?(c=!0,t=this.element.find(".buttonset")):(t=this.element.find(".modal-buttonset")).length||(t=$('<div class="modal-buttonset"></div>').insertAfter(a)),o=100/e.length,e&&t.empty();for(var m=function(C,T){var S=this,M=$('<button type="button">\n        <span></span>\n      </button>'),L=M.find("span");L.text(C.text),M.attr("type",C.type||"button"),"separator"===C.cssClass&&(M=$('<div class="separator"></div>')),C.cssClass?M.attr("class",C.cssClass):M.addClass(C.isDefault?"btn-modal-primary":"btn-modal"),C.disabled&&(M[0].disabled=!0===C.disabled),C.audible&&L.addClass("audible"),void 0===C.validate||C.validate||M.addClass("no-validation"),_.addAttributes(M,i,C.attributes,"",!0);for(var z={},V=["id","name","text","tabindex"],N=0;N<V.length;N++)C[V[N]]&&(z[V[N]]=C[V[N]]);if("input"===C.type){var U=$('<label class="audible" for="filter">'.concat(C.text,"</label>")),G=$('<input class="searchfield">').attr(z);return s.length?s.find(".toolbar-section.search").append(U,G):t.append(U,G),void G.searchfield(C.searchfieldSettings)}C.icon&&"#"===C.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===C.icon?"icon-close":""],icon:C.icon.substr(6)}).prependTo(M),M[0].setAttribute("id",C.id||_.uniqueId(i.element,"button","modal"));var Z=e[T].click;M.on("click.".concat(i.namespace),function(oe){Z?Z.apply(i.element[0],[oe,i]):0===S.openSubComponents.length&&i.close()}),c||(M[0].style.width="".concat(o,"%")),M.button(),(i.settings.useFlexToolbar||i.settings.centerTitle)&&C.align?("left"===C.align&&s.find(".toolbar-section").eq(0).append(M),"center"===C.align&&s.find(".toolbar-section").eq(1).find("h2").append(M),"right"===C.align&&s.find(".toolbar-section").eq(2).append(M)):t.append(M)},b=0;b<e.length;b++)m(e[b],b)},isAndroid:function(){return"android"===(Ie&&Ie.os&&Ie.os.name?Ie.os.name:"")},sizeInner:function(){var e=this.element.find(".detailed-message"),t=$(window).height()-e.offset().top-150;e[0].style.maxHeight="".concat(t,"px"),e[0].style.overflow="auto",e[0].style.width="".concat(e.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var e=this;this.settings.beforeShow(function(t){return!1!==t&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===t?(e.busyIndicator&&(e.busyIndicator.remove(),delete e.busyIndicator),!0):(t instanceof jQuery||(t=$(t)),e.open(!0),e.element.find(".modal-body").empty(),e.element.find(".modal-body").append(t),t.show(),!0))},{})}},open:function(e){var t,n=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(qi.overlayElem)),this.root||(this.root=$(qi.rootElem));var i=this.element.parent();if(i.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),i=this.element.parent()),i.parent().is(this.root)||i.insertAfter(this.overlay),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),function(){n.sizeInner()}),this.sizeInner()),t=this.element.triggerHandler("beforeopen",[this]),this.settings.isAlert||$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1!==t&&(e||(this.callSource(),!this.settings.beforeShow))){var a=$(".resize-app-menu-container");if(a.length>0&&a.append(this.root),qi.currentlyActive=this,this.settings.isAlert){var s=this.element.find("#message-title");_.addAttributes(s,this,this.settings.attributes,"title",!0);var o=this.element.find("#message-text");_.addAttributes(o,this,this.settings.attributes,"message",!0),_.addAttributes(this.element,this,this.settings.attributes,"modal",!0),this.element.attr("aria-labelledby",s.attr("id")),this.element.attr("aria-describedby",o.attr("id"))}else{var c=this.element.find("h1:first");_.addAttributes(c,this,this.settings.attributes,"title",!0),_.addAttributes(this.element.find(".btn-close"),this,this.settings.attributes,"btn-close",!0);var d=c.attr("id");d||(d="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),c.attr("id",d));var p=this.element.find(".modal-body"),f="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",d),_.addAttributes(this.element,this,this.settings.attributes,"",!0),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",f),this.element.attr("aria-describedby",f)):(p.attr("id",f),this.element.attr("aria-describedby",f))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),function(){n.resize()}),this.element[0].style.display="";var m=this,b=new nn({duration:1,timeoutCallback:function(){m.resize(),m.element.attr("role",m.settings.isAlert?"alertdialog":"dialog"),m.element.attr("aria-modal","true")}}),C=new nn({duration:qi.modalFadeDuration,timeoutCallback:function(){m.visible=!0}});dt.register(b),dt.register(C),$(this.element).off("keypress.".concat(this.namespace)).on("keypress.".concat(this.namespace),function(L){var z=$(L.target);z.is(".editor, .searchfield, textarea, :button")||z.closest(".tab-list").length||$("#dropdown-list").length||13===L.which&&n.isOnTop&&!z.closest("form").find(":submit").length&&n.element.find(".btn-modal-primary:enabled").length&&(L.stopPropagation(),L.preventDefault(),m.settings.suppressEnterKey||z.hasClass("fileupload")&&!z.hasClass("colorpicker")||n.element.find(".btn-modal-primary:enabled").trigger("click"))}),$(".skip-link").on("focus.".concat(this.namespace),function(L){L.preventDefault();var z=n.element.find(":focusable").first();z.focus(),"function"==typeof m.settings.onFocusChange&&m.settings.onFocusChange(m,z[0])}),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),function(){n.resize()});var T=new nn({duration:5,timeoutCallback:function(){m.disableSubmit()}});dt.register(T),this.element.find("[data-validate]").removeClass("disable-validation");var S=new nn({duration:20,timeoutCallback:function(){m.element.trigger("open",[m]),function(z){if(m.settings.autoFocus){m.changeObserver=new MutationObserver(function(){m.setFocusableElems()}),m.changeObserver.observe(m.element[0],{childList:!0,subtree:!0}),m.setFocusableElems();var V,N,U=$(m.focusableElems).not(":hidden").first();if(0===U.length&&(U=z.element.find(".btn-modal-primary")),1===U.length&&U.is(".btn-modal")&&(U=z.element.find(".btn-modal-primary")),m.buttonsetAPI&&0===z.buttonsetElem.find(".btn-modal-primary").length){var G=$(".modal-buttonset button")[0];U=z.buttonsetElem.find(G)}if(U.is(".modal-wrapper a")&&(U=z.element.find(".modal-content .message a").removeClass("hide-focus")),U.is(".tab:not(.is-selected) a")&&(V=(N=U.closest(".tab-container")).find(".is-selected")).length)return U=V,void N.data("tabs").select(V.children("a").attr("href"));U.is("input")&&U.closest(".modal-header").length>0||U.focus(),"function"==typeof m.settings.onFocusChange&&m.settings.onFocusChange(m,U[0])}}(m)}});dt.register(S);var M=new nn({duration:30,timeoutCallback:function(){m.element.trigger("afteropen")}});dt.register(M)}},resize:function(){var e,t,n=this.currentlyNeedsFullsize;n?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),e=.9*$(window).height()-this.settings.frameHeight,t=1*$(window).width()-this.settings.frameWidth);var i=this.element.find(".modal-body-wrapper");if(i.length&&(n?(i[0].style.maxHeight="",i[0].style.maxWidth=""):(i[0].style.maxHeight="".concat(e,"px"),i[0].style.maxWidth="".concat(t,"px"))),this.element.hasClass("lookup-modal")){var a=this.element.find(".datagrid-wrapper"),s=this.element.find(".pager-toolbar"),o=a.closest(".datagrid-container");e=e-(o.prev().is(".toolbar")?130:67)-(o.next().is(".pager-toolbar")?35:0)+(s.length?-15:0),void 0!==a[0]&&(n?(a[0].style.maxHeight="",a[0].style.maxWidth=""):void 0!==e&&void 0!==t&&(a[0].style.maxHeight="".concat(e,"px"),a[0].style.maxWidth="".concat(t,"px")))}this.element.hasClass("datagrid-columns-dialog")&&(i[0].style.overflow="hidden",e>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(e,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0)),this.settings.showCloseBtn&&!this.isCAP&&($(window).width()<400&&this.element.hasClass("has-close-btn")?this.element.removeClass("has-close-btn"):$(window).width()>=400&&!this.element.hasClass("has-close-btn")&&this.element.addClass("has-close-btn"));var c=this.element.find(".toolbar");c.length&&c.triggerHandler("recalculate-buttons")},isOpen:function(){return ei("visible","isOpen"),this.visible},get openSubComponents(){var e=Ki(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),t=[];return e.forEach(function(n){var i=n.control,a="boolean"==typeof i.isPopover&&!0===i.isPopover;("function"==typeof i.isOpen&&i.isOpen()||"boolean"==typeof i.isOpen&&!0===i.isOpen||a&&"boolean"==typeof i.visible&&!0===i.visible)&&t.push(i)}),t},get isFocused(){var e=!1,t=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(i){if(!e){var a,s,o,c,d=$(i);(d.is($(t))||"function"==typeof i.contains&&i.contains(t))&&(e=!0),d.is("div.dropdown, div.multiselect")&&(e=null===(a=d.parent().prev("select").data("dropdown"))||void 0===a||null==a?void 0:a.isFocused),d.is(".lookup")&&(e=null===(s=d.data("lookup"))||void 0===s||null==s?void 0:s.isFocused),d.is(".btn-menu, .btn-actions")&&(e=null===(o=d.data("popupmenu"))||void 0===o||null==o?void 0:o.isFocused),d.is(".searchfield")&&(e=null===(c=d.data("searchfield"))||void 0===c||null==c?void 0:c.isFocused)}});var n=$(t).parents(".tooltip, .popover");return n.length&&n.each(function(i,a){var s=a.className.contains("popover")?"popover":"tooltip",o=$(a).data(s);o&&o.isFocused&&(e=!0)}),e},setFocusableElems:function(){var e=ue.focusableElems(this.element[0],[],["option"]);this.focusableElems=e,this.focusableElems.first=e[0],this.focusableElems.last=e[e.length-1]},setFocus:function(e){if(-1!==["last","first"].indexOf(e)){var t;switch(this.focusableElems||this.setFocusableElems(),e){case"last":t=this.focusableElems.last;break;case"first":t=this.focusableElems.first}t&&(t.focus(),t.classList.remove("hide-focus"),"function"==typeof this.settings.onFocusChange&&this.settings.onFocusChange(this,t))}},close:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;if(!n&&!this.visible)return!0;var a=this.element.triggerHandler("beforeclose");if(!1===a)return!1;var s=this,o=this.element.find("[data-validate]");o.addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(s.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.visible=!1,this.active=!1,delete this.dontCheckFocus,s.element.trigger(i?"close.".concat(i):"close",s.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var c=$(this.closeBtn),d=c.data("tooltip");d&&(d.hide(),d.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var p=new nn({duration:qi.modalFadeDuration,timeoutCallback:function(){i?s.element.trigger("afterclose.".concat(i),s.isCancelled):s.element.trigger("afterclose"),d&&delete d.reopenDelay,("immediate"===s.settings.trigger||e)&&(!s.isCAP||s.isCAP&&!s.capAPI)&&s.destroy(),t||qi.refresh(),s.settings.noRefocus||(!s.oldActive&&s.settings.triggerButton&&(s.oldActive=s.useJqEl(s.settings.triggerButton)),s.oldActive&&$(s.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?s.oldActive.focus():s.trigger.parents(".toolbar, .formatter-toolbar").length<1&&s.trigger.focus())}});return dt.register(p),!1},useJqEl:function(e){return e instanceof jQuery?e:$(e)},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element,e,this.settings),this.settings=Ji(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(){var e=this;function t(){e.trigger.off("click.".concat(e.namespace)),e.element.off("keypress.".concat(e.namespace," keydown.").concat(e.namespace," beforeclose.").concat(e.namespace," afterclose.").concat(e.namespace)),e.element.find("button, .btn-close").off("click.".concat(e.namespace)),e.element.find(".paginated").off("afterpaging.".concat(e.namespace)),$(".skip-link").off("focus.".concat(e.namespace)),$("body").off("resize.".concat(e.namespace)),$(e.element).off("keydown.".concat(e.namespace)),1===e.element.find(".detailed-message").length&&$("body").off("resize.".concat(e.namespace)),e.isCAP&&e.capAPI&&e.capAPI.destroy(),e.aboutAPI&&e.aboutAPI.destroy(!0),e.buttonsetAPI&&(e.buttonsetAPI.buttons.forEach(function(a){$(a.element).off("click.".concat(e.namespace))}),e.buttonsetAPI.destroy(),e.buttonsetElem.remove(),delete e.buttonsetAPI,delete e.buttonsetElem),delete e.focusableElems,e.trigger.off("click.".concat(e.namespace)),e.element[0].removeAttribute("data-modal");var n=e.element.parent(".modal-wrapper");n.length&&n.remove();var i=new nn({duration:21,timeoutCallback:function(){var a=null,s=e.element?e.element.data("modal"):null;s?a=e.element[0]:(s=e.trigger?e.trigger.data("modal"):null)&&(a=e.trigger[0]),a&&s&&s.overlay&&$.removeData(a,"modal")}});dt.register(i),qi.unregister(e),e.originalElement instanceof $&&$.removeData(e.originalElement[0],"modalElementLink"),$.removeData(e.element[0],"modal")}this.element.trigger("beforedestroy")&&(this.visible?(this.element.on("afterclose.".concat(e.namespace),function(){t()}),this.close(!0)):t())}};var Jn={title:"Message Title",status:"",message:"Message Summary",width:"auto",maxWidth:null,buttons:null,showCloseBtn:!1,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7,hideUnderneath:!1,attributes:null,noRefocus:!1};function Vi(e,t){this.element=$(e),this.settings=_.mergeSettings(e,t,Jn),this.init()}Vi.prototype={init:function(){var e,t=this,n=this,i=this.settings.allowedTags,a=!0;if(this.settings.allowedTags.length>0||(a=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(a?$e.stripTags(this.settings.title,i):$e.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><div class="message" id="message-text">'.concat(a?$e.stripTags(this.settings.message,i):$e.stripHTML(this.settings.message),"</div></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(P.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(e=this.element,this.content.empty().append(e.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,showCloseBtn:this.settings.showCloseBtn,isAlert:!0,overlayOpacity:this.settings.overlayOpacity,hideUnderneath:this.settings.hideUnderneath,attributes:this.settings.attributes,noRefocus:this.settings.noRefocus}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.maxWidth&&(this.content.find(".message")[0].style.maxWidth=this.settings.maxWidth),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.settings.showCloseBtn){var s=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(P.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(P.translate("Close"),"</span>\n        </button>\n      "));this.message.find(".modal-content").append(s),s.on("click",function(){return t.destroy()})}this.message.on("beforeclose.message",function(){return n.element.triggerHandler("beforeclose")}).on("beforeopen.message",function(){return n.element.triggerHandler("beforeopen")}).on("open.message",function(){n.element.trigger("open")}).on("afterclose.message",function(){n.destroy(),n.settings.returnFocus&&n.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")}),$(document).on("keypress.message keydown.message",function(o){27===(o.which||o.keyCode)&&setTimeout(function(){var c=n.message.data("modal");void 0!==c&&c.close()},0)}),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):"info"===this.settings.status?this.title.addClass("has-status is-info").prepend($.createIconElement("info")):this.title.removeClass("has-status is-error is-alert is-success is-info").find("svg").remove()},destroy:function(){var e=this.message.data("modal");void 0!==e&&e.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(e){return this.each(function(){return new Vi(this,e)})},$.fn.modal=function(e){return this.each(function(){var t=$.data(this,"modal"),n=$(this);if(n.is(".modal")||(t=n.closest(".modal").data("modal")),t&&e)return t.updated(e),void("function"==typeof t[e]&&t[e]());t&&!e||(t=$.data(this,"modal",new ci(this,e)))})},$.fn.monthview=function(e){return this.each(function(){var t=$.data(this,"monthview");t?t.updated(e):t=$.data(this,"monthview",new mi(this,e))})};var kr={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,allTextString:null,selectedTextString:null};function Tr(e,t){this.settings=_.mergeSettings(e,t,kr),this.element=$(e),this.init()}Tr.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(e){return this.each(function(){var t=$.data(this,"multiselect");t?t.updated(e):t=$.data(this,"multiselect",new Tr(this,e))})};var io={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view.",attributes:null};function ao(e,t){this.settings=_.mergeSettings(e,t,io),this.element=$(e),this.init()}ao.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var e='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),t=this.settings.linkText?'<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>"):"",n='<p class="notification-text">'.concat(Ie.rtl?"".concat(t).concat(this.settings.message,"&lrm;"):"".concat(this.settings.message).concat(t),"</p>"),i='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(P.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=e.concat(n,i);var a=document.querySelector(this.settings.parent);return $(this.settings.parent).closest(".contextual-action-panel").length>0?($(this.notificationEl).css({"max-width":"".concat($(a).width(),"px")}),$(a).closest(".modal-body-wrapper").prepend(this.notificationEl)):a.parentNode.insertBefore(this.notificationEl,a.nextSibling),$(this.notificationEl).animateOpen(),_.addAttributes($(this.notificationEl),this,this.settings.attributes),_.addAttributes($(this.notificationEl).find(".notification-icon"),this,this.settings.attributes,"icon"),_.addAttributes($(this.notificationEl).find(".notification-text"),this,this.settings.attributes,"text"),_.addAttributes($(this.notificationEl).find(".notification-text a"),this,this.settings.attributes,"link"),_.addAttributes($(this.notificationEl).find("button.notification-close"),this,this.settings.attributes,"btn-close"),_.addAttributes($(this.notificationEl).find("button.notification-close .icon"),this,this.settings.attributes,"icon-close"),this.setTooltip(),this},handleEvents:function(){var e=this,t=this;return $(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",function(){t.destroy()}),$(window).on("resize.".concat("notification"),function(){e.setTooltip()}),this},setTooltip:function(){var e=$(this.notificationEl).find(".notification-text")[0],t=$(this.notificationEl).data("tooltip");e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth?t?t.setContent(this.settings.message):$(this.notificationEl).tooltip({content:this.settings.message}):t&&t.destroy()},registerNotification:function(){Di.register(this)},close:function(e){e?Di.closeById(e):this.destroy()},closeLatest:function(){Di.closeLatest()},closeAll:function(){Di.closeAll()},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,io)),this.teardown().init()},teardown:function(){return this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),Di.unregister(this),this.teardown(),$.removeData(this.element[0],"notification")}},$.fn.notification=function(e){return this.each(function(){$.data(this,"notification",new ao(this,e))})};var id={value:0};function bl(e,t){this.settings=_.mergeSettings(e,t,id),this.element=$(e),this.init()}bl.prototype={init:function(){var e=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",function(t){t.stopPropagation(),e.update()}),this},updateAria:function(e){var t=this;this.element.attr({role:"progressbar","aria-valuenow":e,"aria-valuemax":"100"});var n=this.element.parent();this.tooltipApi=this.tooltipApi||n.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(e,"%"),this.tooltipApi.visible&&e<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(n[0].setAttribute("title","".concat(e,"%")),n.tooltip(),this.tooltipApi=n.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,n.on("aftershow.progress",function(){t.tooltipApi.tooltip.addClass("process".concat(t.tooltipId))}).on("hide.progress mouseout.progress",function(){t.tooltipApi.tooltip.removeClass("process".concat(t.tooltipId))}))},unbind:function(){var e=this.element.parent();return e.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||e.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(e){var t=this.element[0].getAttribute("data-value")||0;/number|string/.test(Ge(e))&&(this.element[0].setAttribute("data-value",e),t=e),this.element[0].style.width="".concat(t,"%"),this.updateAria(t)},updated:function(e){return void 0!==e&&e.value&&(this.settings.value=e.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(e){return this.each(function(){var t=$.data(this,"progress");t?t.updated(e):t=$.data(this,"progress",new bl(this,e))})};var $u={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function Xl(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,$u),this.init()}Xl.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this;function t(n){return!!n&&("string"==typeof n&&(n.match("#")&&0===n.indexOf("#")||(n="#".concat(n)),n=$(n)),!!n.length&&(e.popdown=n,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||ue.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),t(this.trigger.attr("data-popdown"))||t(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var e=this.trigger.attr("aria-expanded");return e&&void 0!==e||this.trigger.removeAttr("aria-expanded"),"true"===e&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var e=this,t=this;return this.trigger.on("click.popdown",function(){t.toggle()}).on("updated.popdown",function(){t.updated()}).on("clickoutside.popdown",function(n){t.settings.keepOpen||t.handleFocusOut(n)}),this.setFirstLastTab(),this.changeObserver=new MutationObserver(function(){e.setFocusableElems()}),this.changeObserver.observe(this.element[0],{childList:!0,subtree:!0}),this.setFocusableElems(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",function(){e.toggle()}),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||ue.isElement(this.settings.trigger)},get isFocused(){return this.hasFocus()},hasFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=!1,n=document.activeElement;if(e instanceof HTMLElement||(e=void 0),this.trigger.is($(n))||this.popdown[0].contains(n)||e&&(e.classList.contains("overlay")||this.popdown[0].contains(e)))return!0;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(a){if(!t){var s,o,c,d=$(a);if((d.is($(n))||"function"==typeof a.contains&&a.contains(n))&&(t=!0),d.is("div.dropdown, div.multiselect")&&(t=null===(s=d.parent().prev("select").data("dropdown"))||void 0===s||null==s?void 0:s.isFocused),d.is(".lookup")){var p,f=d.data("lookup");!(t=null==f||null==f?void 0:f.isFocused)&&e&&(t=null==f||null===(p=f?.modal)||void 0===p||null==p?void 0:p.element[0].contains(e))}d.is(".btn-menu, .btn-actions")&&(t=null===(o=d.data("popupmenu"))||void 0===o||null==o?void 0:o.isFocused),d.is(".searchfield")&&(t=null===(c=d.data("searchfield"))||void 0===c||null==c?void 0:c.isFocused)}});var i=$(n).parents(".tooltip, .popover");return i.length&&i.each(function(a,s){var o=s.className.contains("popover")?"popover":"tooltip",c=$(s).data(o);c&&c.isFocused&&(t=!0)}),t},setFirstLastTab:function(){var e=this,t=this.settings;if(t.firstLastTab&&/function|boolean|object/.test(Ge(t.firstLastTab))){var n=null,i=null,a=null;if("object"===Ge(t.firstLastTab)?(t.firstLastTab.first&&((n=t.firstLastTab.first instanceof jQuery?t.firstLastTab.first:$(t.firstLastTab.first)).first(),this.popdown[0].contains(n[0])||(n=null)),t.firstLastTab.last&&((i=t.firstLastTab.last instanceof jQuery?t.firstLastTab.last:$(t.firstLastTab.last)).first(),this.popdown[0].contains(i[0])||(i=null)),"function"==typeof t.firstLastTab.callback&&(a=t.firstLastTab.callback)):"function"==typeof t.firstLastTab?a=t.firstLastTab:("boolean"==typeof t.firstLastTab||t.firstLastTab)&&(a=this.closeAndContinue),a){if(!n||!i||n&&!n.length||i&&!i.length){var s=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!n||n&&!n.length)&&(n=s.first()),(!i||i&&!i.length)&&(i=s.last())}this.focusableElem={first:n,last:i},n.on("keydown.popdown",function(o){9===o.keyCode&&o.shiftKey&&(o.preventDefault(),a({e:o,self:e,first:n}))}),i.on("keydown.popdown",function(o){9!==o.keyCode||o.shiftKey||(o.preventDefault(),a({e:o,self:e,last:i}))})}}},setFocusableElems:function(){var e=ue.focusableElems(this.popdown[0],["div.dropdown","div.multiselect",".lookup-wrapper > span.trigger"],["select","option"]);this.focusableElems=e,this.focusableElems.first=e[0],this.focusableElems.last=e[e.length-1]},closeAndContinue:function(e){var t=$(document).find(":focusable"),n=t.index(e.self.trigger);-1!==(n=e.e.shiftKey?n-1<0?-1:n-1:n+1>=t.length?-1:n+1)&&t.eq(n).focus(),e.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},handleFocusOut:function(e){this.focusableElems.includes(e.target)||this.hasFocus(e.target)?this.keyTarget=e.target:"BODY"===e.target.tagName&&this.keyTarget?delete this.keyTarget:this.close()},open:function(){if(!this.isAnimating){var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus&&(this.focusableElems?this.focusableElems.first:this.popdown.find(":focusable").first()).focus(),this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.addEventsTimer=new nn({duration:30,timeoutCallback:function(){$("body").on("resize.popdown",function(t){e.handleFocusOut(t)}),$(document).on("click.popdown",function(){e.element.trigger("clickoutside.popdown")}),$(document).on("keydown.popdown",function(t){var n=$(t.target).parents(".popdown");switch(t.which||t.keyCode){case 27:n.length&&e.close();break;case 9:e.handleFocusOut(t)}}),e.isAnimating=!1}}),dt.register(this.addEventsTimer)}},close:function(){if(!this.isAnimating){this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.keyTarget&&delete this.keyTarget;var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusout.popdown keydown.popdown"),this.closeTimer&&(this.closeTimer.destroy(!0),delete this.closeTimer),this.closeTimer=new nn({duration:30,timeoutCallback:function(){e.popdown[0].style.display="none",e.isAnimating=!1}}),dt.register(this.closeTimer)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var e={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},t=window.innerHeight+$(document).scrollTop(),n=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(e.offset=this.scrollparent.offset(),e.scrollDistance.top=this.scrollparent.scrollTop(),e.scrollDistance.left=this.scrollparent.scrollLeft(),t-=e.offset.top+e.scrollDistance.top,n-=e.offset.left+e.scrollDistance.left);var i,a=!1,s=!1,o=this.trigger,c=o.offset(),d=0,p=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(c.left,"px"),this.popdown[0].style.top="".concat(c.top+o.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(o.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(i=this.popdown.offset()).left<0&&(a=!0,d=0-i.left);var f=i.left+this.popdown.outerWidth(!0);if(f>n&&(a=!0,d=f-n+(P.isRTL()?20:0)),a){this.popdown[0].style.left="".concat(i.left+-1*d,"px");var m=this.popdown[0].getBoundingClientRect(),b=o[0].getBoundingClientRect(),C=m.right-b.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(C,"px"),i=this.popdown.offset()}i.top<0&&(s=!0,p=0-i.top);var T=i.top+this.popdown.outerHeight(!0);T>t&&(s=!0,p=T-t),s&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(i.top+-1*p,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*p,"px"),i=this.popdown.offset()),(i.top<0||i.top+this.popdown.outerHeight(!0)>t)&&(this.popdown[0].style.top=0,T=(i=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(T-t),"px"))},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger&&this.trigger.off("updated.popdown click.popdown focus.popdown clickoutside.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.focusableElem&&this.focusableElem.first instanceof jQuery&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.focusableElems&&this.focusableElems.first instanceof jQuery&&(this.focusableElems.first.off("keydown.popdown"),this.focusableElems.last.off("keydown.popdown"),delete this.focusableElems),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(e){return this.each(function(){var t=$.data(this,"popdown");t?t.updated(e):t=$.data(this,"popdown",new Xl(this,e))})};var ad={};function sd(e,t){this.settings=_.mergeSettings(e,t,ad),this.element=$(e),this.init()}sd.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.enable()},handleEvents:function(){for(var e=this,t=$("input",this.element),n=function(s,o){var c=$(t[s]),d=$(t[s+1]),p=function(f){return f.is(".is-filled")||f.is(".is-half")};c.on("click.".concat("rating"),function(){e.element.is(".is-readonly")||e.val(p(c)&&!p(d)?s:s+1)})},i=0,a=t.length;i<a;i++)n(i)},fillStar:function(e,t){$(e).addClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-filled")},emptyStar:function(e,t){$(e).removeClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-outlined")},halfStar:function(e,t){$(e).addClass("is-half").removeClass("is-filled").next(t).find("svg").changeIcon("star-half")},val:function(e){if(0===arguments.length||""===e||isNaN(e)||-1===Aa.sign(e))return this.currentValue;this.currentValue=parseFloat(e,10);for(var t=Math.floor(this.currentValue),n=0,i=this.allInputs.length;n<i;n++){var a=$(this.allInputs[n]),s=a.parent().is(".inline")?"svg":"label",o=e%1!=0&&t===n;o?this.halfStar(a,s):n<e?this.fillStar(a,s):this.emptyStar(a,s),n+1===t&&a.prop("checked",!0)}return t<=0&&e>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var e=$(this.element);e.addClass("is-readonly"),e.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("click.".concat("rating")),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,ad)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(e){return this.each(function(){var t=$.data(this,"rating");t?t.updated(e):t=$.data(this,"rating",new sd(this,e))})};var rd={};function od(e,t){this.settings=_.mergeSettings(e,t,rd),this.element=$(e),this.init()}od.prototype={init:function(){this.handleKeys()},isCapslock:function(e){var t=!1,n=!1;return(e=e||window.event).which?t=e.which:e.keyCode&&(t=e.keyCode),e.shiftKey?n=e.shiftKey:e.modifiers&&(n=!!(4&e.modifiers)),!!(t>=97&&t<=122&&n)||t>=65&&t<=90&&!n},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,rd)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function(){var e=this,t=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',function(n){var i=$(this),a=i.parent(".field"),s=$(".icon-capslock",a);e.isCapslock(n)&&!i.hasClass("error")?s.length||(a.append(t),$("body").toast({audibleOnly:!0,message:P.translate("CapsLockOn")})):s.remove()}).on("blur.signin change.signin",'[type="password"]',function(){var n=$(this),i=n.closest(".field"),a=$(".icon-capslock",i);setTimeout(function(){a&&a.length&&(n.hasClass("error")?a.remove():i.append(t))},150)})}},$.fn.signin=function(e){return this.each(function(){var t=$.data(this,"signin");t?t.updated(e):t=$.data(this,"signin",new od(this,e))})};var Du={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,tooltipPosition:"top",persistTooltip:!1,showTooltipOnLoad:!1,sliderBox:!1,attributes:null};function Ql(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Du),this.init()}function Ar(e){return e%1==0}function Xs(e,t){return t&&!isNaN(t)&&0!==t||(t=1),Math.round(e/t)*t}function ld(e,t){var i=e[1],s=t[1];return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(s-i,2))}Ql.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var e,t=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),1===this.settings.step&&(this.settings.step=void 0),void 0!==this.element.attr("data-ticks")){try{e=JSON.parse(t.element.attr("data-ticks"))}catch{e=[]}$.isArray(e)&&(this.settings.ticks=e)}var n="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?n:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{t.settings.tooltip=JSON.parse(t.element.attr("data-tooltip-content"))}catch{t.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var i=this.settings.tooltip.split(",");this.settings.tooltip=[i[0]],this.settings.tooltip.push(i[1]?i[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var a={value:this.settings.min,description:t.getModifiedTextValue(this.settings.min)},s={value:this.settings.max,description:t.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var o=t.settings.ticks||[];if($.isArray(o)&&o.length>0){var c=o.filter(function(b){return b.value===t.settings.min}),d=o.filter(function(b){return b.value===t.settings.max});c.length>0&&(a.description=c[0].description,a.color=c[0].color,o=$.grep(o,function(b){return b!==c[0]})),d.length>0&&(s.description=d[0].description,s.color=d[0].color,o=$.grep(o,function(b){return b!==d[0]}))}t.ticks.push(a);for(var p=0;p<o.length;p++){var f={};void 0!==o[p].value&&(f.value=o[p].value,f.description=void 0!==o[p].description?o[p].description:"",f.color=o[p].color,t.ticks.push(f))}t.ticks.push(s)}else this.ticks.push(a,s);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var m=this.settings.value.split(",");m[0]=isNaN(m[0])?this.settings.min:parseInt(m[0],10),m[1]=isNaN(m[1])?this.settings.max:parseInt(m[1],10),this.settings.value=m}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var e=this,t=!1;if("INPUT"!==e.element[0].tagName)throw new Error('Element with ID "'.concat(e.element.id,"\" cannot invoke a slider;  it's not an Input element."));e.originalElement={type:e.element.attr("type")},e.element.attr("type","hidden"),e.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(e.element.attr("id"),"-slider")).insertAfter(e.element),e.hitarea=$('<div class="slider-hit-area"></div>').appendTo(e.wrapper),e.range=$('<div class="slider-range"></div>').appendTo(e.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),t=!0),this.isRtlHorizontal=P.isRTL()&&!t,this.isRtlVertical=P.isRTL()&&t;var n=this.element.attr("style");n&&(n.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,n=n.replace("min-height","")),n.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),n.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,n=n.replace("min-width","")),n.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),e.handles=[];var i=e.element.prev("label").text(),a=$('<div class="slider-handle'.concat(e.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(P.translate(e.settings.range?"SliderMinimumHandle":"SliderHandle")," ").concat(i));if(e.handles.push(a),e.settings.range){var s=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(P.translate("SliderMaximumHandle")," ").concat(i));e.handles.push(s)}$.each(e.handles,function(p,f){f.attr({role:"slider","aria-orientation":t?"vertical":"horizontal","aria-valuemin":e.settings.min,"aria-valuemax":e.settings.max}).hideFocus(),f.appendTo(e.wrapper)}),e.ticks.forEach(function(p){var f,m,b;f=p,m=e.isRtlHorizontal?100-e.convertValueToPercentage(f.value):e.convertValueToPercentage(f.value),b="calc(".concat(m,"% - 4px)"),f.element=$('<div class="tick" data-value="'.concat(f.value,'"></div>')),f.label=$('<span class="label">'.concat(f.description,"</span>")),f.element[0].style[t?"bottom":"left"]=b,f.element.append(f.label),e.wrapper.append(f.element),t||(f.label[0].style.left="".concat(-(f.label.outerWidth()/2-f.element.width()/2),"px"))}),this.settings.sliderBox&&(e.wrapper.addClass("has-slider-box"),$('<input type="text" class="slider-box" aria-required="true" data-mask data-options="{ \'pattern\' : \'###\' }" ></input>').insertAfter(e.wrapper)),e.value(e.settings.value),e.updateRange(),$.each(e.handles,function(p,f){e.settings.tooltip&&(f.tooltip({content:function(){return"".concat(e.getModifiedTextValue(Math.floor(e.value()[p])))},placement:t?"right":e.settings.tooltipPosition,trigger:"focus",keepOpen:e.settings.persistTooltip}),f.removeAttr("aria-describedby"))}),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),_.addAttributes(this.element,this,this.settings.attributes,"",!0),_.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),_.addAttributes(this.hitarea,this,this.settings.attributes,"hitarea",!0),_.addAttributes(this.range,this,this.settings.attributes,"range",!0),_.addAttributes.apply(_,Un(this.handles).concat([this,this.settings.attributes,"handle",!0]));for(var o=0,c=this.ticks.length;o<c;o++){var d=$(this.ticks[o].element);_.addAttributes(d,this,this.settings.attributes,"tick-".concat(o+1))}return this.settings.showTooltipOnLoad&&setTimeout(function(){$.each(e.handles,function(p,f){f.data("tooltip").show()})}),e},handleRangeClick:function(e){if(e.preventDefault(),!this.isDisabled()){var t=this,n=this.wrapper.hasClass("vertical"),a="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageY:e.pageY,s=("click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageX:e.pageX)-t.wrapper.offset().left-$(document).scrollLeft(),o=a-t.wrapper.offset().top-$(document).scrollTop(),c=[s,o],d=[t.handles[0].offset().left+t.handles[0].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[0].offset().top+t.handles[0].height()/2-t.wrapper.offset().top-$(document).scrollTop()],p=t.value(),f=ld(c,d),m=p[0],b=t.handles[0];b.addClass("hide-focus");var C=function(){if(n){var M=t.wrapper.height();return(M-o)/M*100}return s/t.wrapper.width()*100}(),T=t.convertPercentageToValue(C);t.handles[1]&&(f>ld(c,[t.handles[1].offset().left+t.handles[1].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[1].offset().top+t.handles[1].height()/2-t.wrapper.offset().top-$(document).scrollTop()])?(t.value([void 0,T]),b=t.handles[1],m=p[1]):t.value([T])),t.checkHandleDifference(b,m,T);var S=t.settings.step?t.settings.step:0;T<m?t.decreaseValue(e,b,T,S):t.increaseValue(e,b,T,S),t.settings.tooltip||b.focus()}},activateHandle:function(e){e.addClass("is-active")},deactivateHandle:function(e){e.removeClass("is-active")},enableHandleDrag:function(e){if(!this.isDisabled()){var t=this,n={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};e.drag(n).on("drag.slider",function(i,a){!function(s,o,c){if(!t.isDisabled()){var d=function(){if(t.isVertical()){var m=t.wrapper.height()-o.outerHeight();return(m-c.top)/m*100}return c.left/(t.wrapper.width()-o.outerWidth())*100}(),p=t.convertPercentageToValue(d);if(t.settings.range){var f=t.value();o.hasClass("higher")&&p<=f[0]&&(p=f[0]),o.hasClass("lower")&&p>=f[1]&&(p=f[1])}t.settings.step&&(p=Math.round(p/t.settings.step)*t.settings.step),s.defaultPrevented||(t.value(o.hasClass("higher")?[void 0,p]:[p]),t.updateRange(),t.updateTooltip(o),t.element.trigger("sliding",o,p))}}(i,$(i.currentTarget),a)}).on("dragstart",function(){$(this).addClass("is-dragging"),t.range.addClass("is-dragging"),t.element.trigger("slidestart",e)}).on("dragend",function(){$(this).removeClass("is-dragging"),t.range.removeClass("is-dragging"),t.element.trigger("slidestop",e)})}},disableHandleDrag:function(e){e.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),e.removeClass("is-dragging");var t=e.data("drag");t&&t.destroy()},bindInputSliderEvent:function(e,t){var n=this;if(this.settings.sliderBox){var i=e.parent().siblings(".slider-box");i.on("keyup.slider".concat(t),function(a){if(13===a.keyCode){var s=$(a.currentTarget).val();n.value(s),n.updateRange(),n.updateTooltip(e)}}),i.on("blur.slider".concat(t),function(a){var s=$(a.currentTarget).val();n.value(s),n.updateRange(),n.updateTooltip(e)})}},convertValueToPercentage:function(e){return(e-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(e){var t=e/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-t+this.settings.min:t},getIncrement:function(){var e=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&e<=this.settings.step&&(e=this.settings.step),e},handleKeys:function(e,t){if(!t.isDisabled()){var n=e.which,i=$(e.currentTarget);switch(i.removeClass("hide-focus"),n){case 33:t.increaseValue(e,i,void 0,this.getIncrement());break;case 34:t.decreaseValue(e,i,void 0,this.getIncrement());break;case 35:t.increaseValue(e,i,this.settings.max);break;case 36:t.decreaseValue(e,i,this.settings.min);break;case 38:case 39:t.isRtlHorizontal&&39===n?t.decreaseValue(e,i):t.increaseValue(e,i);break;case 37:case 40:t.isRtlHorizontal&&37===n?t.increaseValue(e,i):t.decreaseValue(e,i)}}},increaseValue:function(e,t,n,i){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var a,s,o,c=this.value().slice(0),d=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher"))o=(s=(a=void 0!==n?n:c[1])+(d=Ar(a)?d:isNaN(a%d)?0:a%d)<this.settings.max?a+d:this.settings.max)%d?s:Xs(s,d),this.value([void 0,o]);else{var p=void 0===c[1]?this.settings.max:c[1];o=(s=(a=void 0!==n?n:c[0])+(d=Ar(a)?d:isNaN(a%d)?0:d-a%d)<p?a+d:p)%d?s:Xs(s,d),this.value([o])}this.checkHandleDifference(t,a,o),this.updateRange(),this.updateTooltip(t)},decreaseValue:function(e,t,n,i){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var a,s,o,c=this.value(),d=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher")){var p=void 0===c[0]?this.settings.min:c[0];o=(s=(a=void 0!==n?n:c[1])-(d=Ar(a)?d:isNaN(a%d)?0:d-a%d)>p?a-d:p)%d?s:Xs(s,d),this.value([void 0,o])}else o=(s=(a=void 0!==n?n:c[0])-(d=Ar(a)?d:isNaN(a%d)?0:a%d)>this.settings.min?a-d:this.settings.min)%d?s:Xs(s,d),this.value([o]);this.checkHandleDifference(t,a,o),this.updateRange(),this.updateTooltip(t)},updateRange:function(){for(var e=this,t=this.value(),n=[],i=this.getColorClosestToValue(),a=e.wrapper.hasClass("vertical"),s=0;s<this.ticks.length;s++)(this.settings.range?t[0]<this.ticks[s].value&&this.ticks[s].value<=t[1]:this.ticks[s].value<=t[0])?(this.ticks[s].element.addClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor=i,this.ticks[s].element.addClass("inherit"))):(this.ticks[s].element.removeClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor="",this.ticks[s].element.removeClass("inherit")));i&&(this.range[0].style.backgroundColor=i,$.each(this.handles,function(p,f){f[0].style.backgroundColor=i,f[0].style.borderColor=i})),$.each(e.ticks,function(p){e.ticks[p].label[0].style.color=""}),n[0]=this.convertValueToPercentage(t[0]),void 0!==t[1]&&(n[1]=this.convertValueToPercentage(t[1]));var o=a?["bottom","top"]:e.isRtlHorizontal?["right","left"]:["left","right"],c={};function d(p,f){p.css(a?o[1]:o[0],"calc(".concat(a?100-f:f,"% - ").concat(p.outerWidth()/2,"px)"))}this.handles[1]?(c[o[0]]="".concat(n[0],"%"),c[o[1]]="".concat(100-n[1],"%")):(c[o[0]]="0%",c[o[1]]="".concat(100-n[0],"%")),this.range.css(c),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout(function(){e.handles[0].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),d(this.handles[0],n[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout(function(){e.handles[1].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),d(this.handles[1],n[1]),this.handles[0].attr("aria-valuemax",t[1]),this.handles[1].attr("aria-valuemin",t[0])),this.settings.sliderBox&&e.wrapper.siblings(".slider-box").val(Math.trunc(n[0]))},checkHandleDifference:function(e,t,n){var i=this.convertValueToPercentage(t),a=this.convertValueToPercentage(n);Math.abs(i-a)>3&&(e.addClass("is-animated"),this.range.addClass("is-animated"))},updateTooltip:function(e){if(this.settings.tooltip){if(!e){var t,n=this.handles[0].data("tooltip");return this.handles[1]&&(t=this.handles[1].data("tooltip")),n.hide(),void(t&&t.hide())}var i=e.data("tooltip");e.hasClass("is-animated")?(i.hide(),e.one("slide-animation-end",function(){a()})):a()}function a(){i.position(),e.focus()}},getColorClosestToValue:function(){for(var e,t,n={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[mt.currentTheme.id.split("-")[2]],i=this.value()[0],a=0;a<this.ticks.length;a++)(t=this.ticks[a].color)&&i>=this.ticks[a].value&&(e=t,e=t.indexOf("#")>-1?t:n[t]||n.default);return e},value:function(e,t){var n=this;return void 0===e&&void 0===t||(e&&$.isArray(e)&&(void 0===e[1]||isNaN(e[1])||(t=e[1]),isNaN(e[0])||(e=e[0])),(void 0===e||isNaN(e))&&$.isArray(n._value)&&void 0!==n._value[0]&&(e=n._value[0]),(void 0===t||isNaN(t))&&$.isArray(n._value)&&void 0!==n._value[1]&&(t=n._value[1]),n._value=[e,t],n.element.val(void 0!==t?n._value:n._value[0]),$.each(n.handles,function(i,a){var s=n._value[i],o=n.getModifiedTextValue(s);$.each(n.ticks,function(c,d){d.value===s&&(o=d.description)}),a.attr({"aria-valuenow":n._value[i],"aria-valuetext":o})}),0===this.element.next().find(".slider-handle.is-dragging").length&&n.element.trigger("change",{element:n.element,value:n._value})),n._value},getModifiedTextValue:function(e){return this.settings.tooltip?this.settings.tooltip[0]+e+this.settings.tooltip[1]:e},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var e=this;return $.each(this.handles,function(t,n){e.enableHandleDrag(n)}),this.wrapper.find("[tabindex]").attr("tabindex","0"),this},disable:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),setTimeout(function(){e.wrapper.addClass("is-disabled");var t=e;$.each(e.handles,function(n,i){t.disableHandleDrag(i)})}),this.wrapper.find("[tabindex]").attr("tabindex","-1"),this},readonly:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,function(t,n){e.disableHandleDrag(n)}),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(e,t){var n=this.value();this.checkHandleDifference(this.handles[0],n[0],e),this.handles[1]&&this.checkHandleDifference(this.handles[1],n[1],t);var i=this.value(e,t);return this.updateRange(),this.updateTooltip(),i},refresh:function(e,t){return Sa(this.setValue,this.refresh).apply(this,[e,t])},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var e=this;return $.each(e.handles,function(t,n){e.disableHandleDrag(n),n.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")}),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",$e.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function(){var e=this;return $.each(e.handles,function(t,n){n.on("mousedown.slider",function(){e.isDisabled()||$(this).focus()}).on("click.slider",function(i){i.preventDefault()}).on("keydown.slider",function(i){e.activateHandle(n),e.handleKeys(i,e)}).on("keyup.slider blur.slider",function(){e.deactivateHandle(n)}),e.enableHandleDrag(n),e.bindInputSliderEvent(n,t)}),e.wrapper.on("click.slider touchend.slider touchcancel.slider",function(t){e.handleRangeClick(t)}),e.element.on("updated.slider",function(){e.updated()}),e}},$.fn.slider=function(e){return this.each(function(){var t=$.data(this,"slider");t?t.updated(e):t=$.data(this,"slider",new Ql(this,e))})};var Iu={autocorrectOnBlur:!0,min:-2147483647,max:2147483647,step:null,maskOptions:null,attributes:null};function yl(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Iu),this.init()}yl.prototype={get isTouch(){return Ie.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var e=this.element[0].style;return e.width&&(this.element.parent()[0].style.width="".concat(parseInt(e.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var e=this.checkForNumeric(this.element.val());return this.element.val(e),this.element.attr("data-trackdirty")&&this.element.data("original",e),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.step=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.min=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var e=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped)if(this.element.is(".field-options")){var t=this.element.closest(".field").find(".btn-actions");this.element.add(t).add(t.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>');this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var n=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach(function(c){if(n.indexOf(c)>-1){var d=c.replace("input","spinbox");e.isWrapped?e.element.parent(".spinbox-wrapper").addClass(d):e.isInlineLabel&&e.inlineLabel.addClass(d)}});var i=this.element.attr("min"),a=this.element.attr("max"),s={role:"spinbutton"};i||a||(a="9999999"),s.min=i||0,s.max=a,this.element.data("mask")&&"object"===Ge(this.element.data("mask"))&&this.element.data("mask").destroy(),s["aria-valuemin"]=i||0,s["aria-valuemax"]=a||0,this.element.attr(s),this.updateAria(this.element.val());var o={process:"number",patternOptions:{allowDecimal:!1,allowThousandsSeparator:!1,allowNegative:Math.min(this.settings.min,this.settings.max)<0,decimalLimit:0,integerLimit:String(this.settings.max).length}};return this.element.mask(this.settings.maskOptions||o),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),_.addAttributes(this.element.parent(),this,this.settings.attributes,"wrapper",!0),_.addAttributes(this.element,this,this.settings.attributes,"spinbox",!0),_.addAttributes(this.buttons.down,this,this.settings.attributes,"btn-down",!0),_.addAttributes(this.buttons.up,this,this.settings.attributes,"btn-up",!0),this},enableLongPress:function(e,t){t.addButtonStyle(e),t.longPressInterval=setInterval(function(){$(e.currentTarget).is(":hover")&&t.handleClick(e)},250)},disableLongPress:function(e,t){t.removeButtonStyle(e),clearInterval(t.longPressInterval),t.longPressInterval=null},handleClick:function(e){e.preventDefault(),this.isDisabled()||1!==e.which||this.isReadonly()||($(e.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(e,t){var n=e.which;if(13!==n){if(-1!==$.inArray(n,[37,38,39,40])&&!this.isReadonly())switch(n){case 38:t.addButtonStyle(t.buttons.up),t.increaseValue();break;case 40:t.addButtonStyle(t.buttons.down),t.decreaseValue()}}else t.correctValue()},handleKeyup:function(e,t){if(!t.isDisabled()&&!this.isReadonly()){var n=e.which;switch(n){case 38:case 39:P.isRTL()&&39===n?t.removeButtonStyle(t.buttons.down):t.removeButtonStyle(t.buttons.up);break;case 37:case 40:P.isRTL()&&39===n?t.removeButtonStyle(t.buttons.up):t.removeButtonStyle(t.buttons.down)}t.updateAria(t.element.val())}},handleAfterPaste:function(e){var t=Number(e.element.attr("min")),n=Number(e.element.attr("max")),i=Number(e.element.val());i<t&&(i=t),i>n&&(i=n),e.updateVal(i)},correctValue:function(e){var t=Number(this.element.val()),n=parseInt(this.element.attr("min"),10),i=parseInt(this.element.attr("max"),10);return t<n?(e&&e.preventDefault(),this.updateVal(n)):t>i?(e&&e.preventDefault(),this.updateVal(i)):void 0},increaseValue:function(){var e=this.element.attr("max"),t=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return this.updateVal(e&&t>e?e:t)},decreaseValue:function(){var e=this.element.attr("min"),t=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return this.updateVal(e&&t<e?e:t)},updateVal:function(e){this.element.val(e).trigger("change"),this.updateAria(e)},checkForNumeric:function(e){return""===e?e:$.isNumeric(e)?Number(e):(e=parseInt(e,10),$.isNumeric(e)?Number(e):0)},updateAria:function(e){var t=this.element.attr("min"),n=this.element.attr("max");e=this.checkForNumeric(e),this.element[0].setAttribute("aria-valuenow",e||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==e&&n&&e>=n?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==e&&t&&e<=t?"disable":"enable")},addButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.addClass("is-active")}},removeButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){var e=this;this.element.prop("disabled",!0),this.element.attr("disabled","disabled"),this.element.parent(".spinbox-wrapper").addClass("is-disabled"),setTimeout(function(){e.element.parent(".spinbox-wrapper").addClass("is-disabled")})},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(e,t){e[(t=void 0===t||!(!t||"enable"===t))?"addClass":"removeClass"]("is-disabled"),e[0].disabled=t},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this},destroy:function(){var e=this.element.data("mask");for(var t in e&&"function"==typeof e.destroy&&e.destroy(),this.buttons){var n=$(t).data("button");n&&n.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.up.add(this.buttons.down).off("click.spinbox-control"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function(){var e=this,t=!1;this.element.on("focus.spinbox",function(){e.element.addClass("no-hover"),e.element.parent(".spinbox-wrapper").addClass("is-focused"),e.element.removeClass("is-hovered")}).on("blur.spinbox",function(){e.element.removeClass("no-hover"),e.element.parent(".spinbox-wrapper").removeClass("is-focused"),e.element.removeClass("is-hovered"),e.settings.autocorrectOnBlur&&e.correctValue()}).on("keydown.spinbox",function(i){e.handleKeyDown(i,e)}).on("keyup.spinbox",function(i){e.handleKeyup(i,e)}).on("mouseover.spinbox",function(){e.element.parent(".spinbox-wrapper").hasClass("is-focused")||e.element.addClass("is-hovered")}).on("mouseleave.spinbox",function(){e.element.removeClass("is-hovered")}).on("afterpaste.mask",function(){e.handleAfterPaste(e)});var n=this.buttons.up.add(this.buttons.down[0]);return n.on("touchstart.spinbox mousedown.spinbox",function(i){if(1===i.which){if(t||e.handleClick(i),e.isTouch)return;t=!0,e.enableLongPress(i,e),$(document).one("mouseup",function(){e.disableLongPress(i,e),t=!1,e.element.focus()})}}),n.on("click.spinbox-control",function(){n.hasClass("is-disabled")&&$("svg.ripple-effect").remove()}),this}},$.fn.spinbox=function(e){return this.each(function(){var t=$.data(this,"spinbox");t?t.updated(e):t=$.data(this,"spinbox",new yl(this,e))})};var Sr={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"},attributes:null};function Jl(e,t){this.settings=_.mergeSettings(e,t,Sr),this.element=$(e),this.init()}Jl.prototype={init:function(){return this.build().handleEvents()},build:function(){var e,t=this,n=this,i=this.settings,a=this.element,s=a.parent(),o="x"===i.axis?"left":"top",c=s.is(".content")?s.parent():s,d=a.find(".splitter-drag-handle"),p=299,f=s.width();this.isRTL=P.isRTL(),setTimeout(function(){e=s.height()},0),this.docBody=$("body"),this.isSplitterRightSide=a.is(".splitter-right")||"x"===i.axis&&"right"===i.side,this.isSplitterHorizontal=a.is(".splitter-horizontal")||"y"===i.axis,i.uniqueId=_.uniqueId(this.element,"splitter"),d.length||(d=$('<div class="splitter-drag-handle"><span class="audible">'.concat(P.translate("SplitterDragHandle"),"</span>").concat($.createIcon("drag"),"</div>"))).appendTo(a);var m=function(){var T=0,S=!1,M=function(L,z,V){n.splitTo(L,e),$(z)[V?"addClass":"removeClass"]("rotate")};t.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><span class="audible">'.concat(P.translate("SplitterCollapseButton"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>')),t.splitterCollapseButton.appendTo(a),a[0].offsetLeft>10&&t.splitterCollapseButton.addClass("rotate"),t.splitterCollapseButton.click(function(){if(!a.is("is-dragging")){if(n.isRTL&&!n.isSplitterHorizontal||!n.isSplitterRightSide&&"left"===i.side||n.isSplitterRightSide&&"right"===i.side){var L=n.getContainerWidth()-a.outerWidth(),z=L;S||(T=L-T,p=L-p);var V=a[0].offsetLeft;n.isSplitterRightSide&&"right"===i.side&&(V=a[0].offsetLeft+1),T>=z?V>=L?M(p,this,!0):(T=V,M(z,this,!1)):V<L?(T=V,M(z,this,!1)):(M(T,this,!0),T=z)}else{var N=a[0].offsetLeft;T<=0?N<=10?M(p,this,!0):(T=N,M(0,this,!1)):N>10?(T=N,M(0,this,!1)):(M(T,this,!0),T=0)}S=!0}})};if(this.isSplitterRightSide){var b=c.prev();b.is(".main")?(this.leftSide=b,f=c.parent().outerWidth()-f):(this.leftSide=c,a.addClass("splitter-right")),c.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),i.collapseButton&&m(),this.setSplitterContainer(c.parent())}else this.isSplitterHorizontal?(this.topPanel=a.prev(),f=this.topPanel.height(),s.addClass("splitter-container is-horizontal"),a.next().addClass("flex-grow-shrink"),a.addClass("splitter-horizontal")):(this.rightSide=c,this.leftSide=c.prev().parent(),c.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"),i.collapseButton&&m(),this.setSplitterContainer(c.parent()));if(this.isRTL&&!this.isSplitterHorizontal){var C=this.getContainerWidth();f=C>=f?C-f:f}return localStorage&&i.save&&!isNaN(parseInt(localStorage[i.uniqueId],10))&&(f=localStorage[i.uniqueId]),f=parseInt(f,10),a[0].style.top=this.isSplitterHorizontal?"".concat(f,"px"):0,this.splitTo(f,e),f<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:i.axis,containment:i.containment||"x"===i.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",function(){var T=c.parent().find("iframe");if(n.documentWidth=$(document).width(),T.length>0)for(var S=0,M=T.length;S<M;S++){var L=$(T[S]),z="".concat(parseInt(getComputedStyle(L.parent()[0]).width,10),"px"),V=$('<div class="overlay splitter-overlay"></div>');V.css("width",z),L.before(V)}}).on("dragend.splitter",function(T,S){c.parent().find(".splitter-overlay").remove();var M=a[0].getBoundingClientRect(),L=window.innerWidth-M.left,z=t.isSplitterRightSide&&"right"===t.settings.side||!t.isSplitterRightSide&&"left"===t.settings.side;0===M.left&&(c[0].style.width="0px",S[o]=10),i.collapseButton&&(S[o]<=10||z&&L<=21?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===i.resize&&n.splitTo(S[o],e),"immediate"===i.resize&&t.isRTL&&!t.isSplitterHorizontal&&setTimeout(function(){var V=parseInt(t.element.css("left"),10);n.splitTo(V,e)},0)}).on("drag.splitter",function(T,S){return!(S.left<=0||("immediate"===i.resize&&n.splitTo(S[o],s.height()),0))}),"y"===i.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),_.addAttributes(this.element,this,this.settings.attributes,"",!0),_.addAttributes(this.element.find(".splitter-drag-handle"),this,this.settings.attributes,"handle",!0),_.addAttributes(this.element.find(".splitter-drag-handle svg.icon"),this,this.settings.attributes,"icon",!0),this},setSplitterContainer:function(e){this.container=this.element.closest(".splitter-container"),!this.container.length&&e&&e.length&&(e.addClass("splitter-container"),this.container=this.element.closest(".splitter-container"))},getContainerWidth:function(){var e;return(null===(e=this.container)||void 0===e||null==e?void 0:e.outerWidth())||0},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(e,t,n){(t>n||t<0)&&(t=parseInt(n,10)/2),this.topPanel[0].style.height="".concat(t,"px")},resizeLeft:function(e,t){var n=this.isRTL?t+20:this.leftSide.outerWidth()-t;this.rightSide[0].style.width="".concat(n,"px"),e[0].style.left=""},resizeRight:function(e,t){var n=e.parent(),i=n.is(".content")?n.parent():n,a=t,s=t-1;if(this.isRTL&&!this.isSplitterHorizontal){var o=this.getContainerWidth();a=o>=t?o-t-20:t,s=t}(!this.isSplitterRightSide&&"left"===this.settings.side||this.isSplitterRightSide&&"right"===this.settings.side)&&(i[0].style.width="0px"),this.leftSide[0].style.width="".concat(a,"px"),e[0].style.left="".concat(s,"px")},splitTo:function(e,t){var n=this.settings,i=this.element;this.isSplitterRightSide?((!this.isRTL&&e>n.maxWidth.right||this.isRTL&&e<n.maxWidth.right)&&(e=n.maxWidth.right),this.resizeRight(i,e)):this.isSplitterHorizontal?this.resizeTop(i,e,t):((!this.isRTL&&e>n.maxWidth.left||this.isRTL&&e<n.maxWidth.left)&&(e=n.maxWidth.left),this.resizeLeft(i,e)),this.element.trigger("split",[e]),this.docBody.triggerHandler("resize",[this]),this.settings.save&&localStorage&&(localStorage[this.settings.uniqueId]=e),this.split=e,this.parentHeight=t},unbind:function(){return this.element.off("updated.".concat("splitter")),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,Sr)),this.unbind().init()},destroy:function(){return this.unbind(),$.removeData(this.element[0],"splitter"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("splitter"),function(){e.updated()}).on("keydown.".concat("splitter"),function(t){32===t.which&&(e.toggleSelection(),t.preventDefault()),37===t.which&&e.splitTo(e.split-15,e.parentHeight),39===t.which&&e.splitTo(e.split+15,e.parentHeight)}),this}},$.fn.splitter=function(e){return this.each(function(){var t=$.data(this,"splitter");t?t.updated(e):t=$.data(this,"splitter",new Jl(this,e))})};var wl={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},keepInList:{available:!1,selected:!1,additional:!1},attributes:null,attributesOverride:!0,template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function cd(e,t){this.settings=_.mergeSettings(e,t,wl),this.element=$(e),this.init()}cd.prototype={init:function(){var e=this,t=this.settings;t.draggable=$.extend(!0,wl.draggable,t.draggable),this.isTouch=Ie.features.touch,this.isAdditional=$("".concat(t.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout(function(){e.makeDraggable(),e.handleEvents(),e.initSelected(t.availableClass),e.initSelected(t.additionalClass)},0)},loadListview:function(){for(var e=this.settings,t=[{dataset:e.available,class:e.availableClass,draggable:e.draggable.available},{dataset:e.selected,class:e.selectedClass,draggable:e.draggable.selected},{dataset:e.additional,class:e.additionalClass,draggable:e.draggable.additional}],n=0,i=t.length;n<i;n++){var a=t[n],s=$("".concat(a.class," .listview"),this.element),o=s.data("listview"),c={dataset:a.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===e.searchable||"true"===e.searchable)&&$("".concat(a.class," .searchfield"),this.element).length>0&&(c.searchable=!0),!a.dataset&&s.length&&$("li",s).length?s.listview(c):s.length&&(o&&o.destroy(),-1===e.template.indexOf('data-id="{{id}}"')&&(e.template=e.template.replace("<li",'<li data-id="{{id}}"')),c.template=e.template,c.dataset=a.dataset||[],c.dataset.forEach(function(d){/string|number/.test(Ge(d.id))&&""!==d.id||(d.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))}),0===c.dataset.length&&(c.forceToRenderOnEmptyDs=!0),c.attributesOverride=e.attributesOverride,c.attributes=this.getLvAutomationAttributes(a.class),s.listview(c)),a.draggable||$("ul",s).addClass("is-not-droppable")}},getLvAutomationAttributes:function(e){var t,n=this,i=this.settings;if(i.attributes&&"string"==typeof e&&e.length>1){var a="-swaplist-".concat(e.substring(1));if(Array.isArray(i.attributes))t=[],i.attributes.forEach(function(o){var c="function"==typeof o.value?o.value(n):o.value;t.push({name:o.name,value:c+a})});else{var s="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;t={name:i.attributes.name,value:s+a}}}return t},setElements:function(){var e=this,t=this.settings,n="";if(this.offset=null,this.containers=$("".concat(t.availableClass,",").concat(t.selectedClass,",").concat(t.additionalClass),this.element),this.actionButtons=$("".concat(t.availableBtn,",").concat(t.additionalBtn,",").concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.selectedButtons=$("".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.tabButtonsStr="".concat(t.availableBtn,", ").concat(t.additionalBtn,", ").concat(this.selectedButtons.length>1?t.selectedBtnRight:t.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},t.numOfSelectionsClass="num-of-selections",t.itemContentClass="swaplist-item-content",t.itemContentTempl=$('<div><p><span class="'.concat(t.numOfSelectionsClass,'">###</span>\n      <span class="').concat(t.numOfSelectionsClass,'-text">&nbsp;</span></p><div/>')),t.attributes){var i=[{btn:$("".concat(t.availableClass," ").concat(t.availableBtn),this.element),suffix:(t.availableClass||"").substring(1)},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnLeft),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-left")},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnRight),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-right")},{btn:$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element),suffix:(t.additionalClass||"").substring(1)}];i.forEach(function(a){a.suffix="swaplist-btn-".concat(a.suffix)}),i.forEach(function(a){return _.addAttributes(a.btn,e,t.attributes,a.suffix,t.attributesOverride)}),_.addAttributes(this.element,this,t.attributes,"swaplist",t.attributesOverride)}t.draggable.available||(n="".concat(t.availableClass," ").concat(t.availableBtn,",").concat(t.selectedBtnLeft),$(n,this.element).prop("disabled",!0)),t.draggable.selected||(n="".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),t.draggable.available||(n+=",".concat(t.additionalClass," ").concat(t.additionalBtn)),this.isAdditional&&t.draggable.additional||(n+=",".concat(t.availableClass," ").concat(t.availableBtn)),$(n,this.element).prop("disabled",!0),$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element).addClass("is-rotate")),t.draggable.additional||$("".concat(t.additionalClass," ").concat(t.additionalBtn,",").concat(t.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var e=this.settings,t=[e.availableClass,e.selectedClass,e.additionalClass],n=0,i=t.length;n<i;n++){var a=$("".concat(t[n]," .listview"),this.element);$("li",a).length||a.addClass("is-multiselect")}},initSelected:function(e){if((e=this.isjQuery(e)?e:$(e,this.element)).length){for(var t=$(".listview",e).data("listview"),n=$("li[selected]",e),i=0,a=n.length;i<a;i++){var s=$(n[i]);s.removeAttr("selected"),t.select(s)}this.moveElements(e,this.settings.selectedClass)}},moveElements:function(e,t){var n=this;if(null!==t){e="string"!=typeof e?e:$(e,this.element),t="string"!=typeof t?t:$(t,this.element);var i=$(".listview",e).data("listview");if(this.clearSelections(),this.selections.owner=e,this.selections.droptarget=t,this.isTouch){if(i.selectedItems)for(var a=0,s=i.selectedItems.length;a<s;a++)this.selections.items[a]=i.selectedItems[a].closest("li")}else this.selections.items=i.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(i),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var o=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof o&&!o||"string"==typeof o&&"false"===o.toLowerCase())return;var c=$("ul",t),d=$("li",c).length,p=this.selections.items.length+d;if(this.selections.items)for(var f=this.getDataList(t),m=function(T,S){var M=$(n.selections.items[T]);if(n.isKeepInList(t)&&f.some(function(z){return z.id===M.data().id}))M.remove();else{var L=n.isKeepInList(e)?M.clone():M;L.attr({"aria-posinset":d+T+1,"aria-setsize":p}).find("mark.highlight").contents().unwrap(),c.append(L)}},b=0,C=this.selections.items.length;b<C;b++)m(b);this.afterUpdate($(".listview",t).data("listview"))}}},getContainer:function(e){var t=this.settings;if("object"===Ge(e[0])&&e[0].node){var n=e[0].node.closest(".card"),i="";return n.is(t.availableClass)?i=t.availableClass:n.is(t.selectedClass)?i=t.selectedClass:n.is(t.additionalClass)&&(i=t.additionalClass),{container:n,class:i}}return null},unselectElements:function(e){if(e.selectedItems)for(var t=0,n=e.selectedItems.length;t<n;t++)e.select($(e.selectedItems[t]));e&&e.element&&e.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},isMatchMediaSupports:function(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e["".concat(t,"Width")],height:e["".concat(t,"Height")]}},isMaxWidth:function(e){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(e,"px)")).matches||this.viewport().width<=e},makeDraggable:function(){var e=this,t=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=t.first().attr("data-swap-handle"),this.handle=!this.isTouch&&$(this.handle,t).length>0?this.handle:null,$(this.handle,t).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",function(){e.selections.isHandle=!0}).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",function(){e.selections.isHandle=!1}),this.targets=t.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",function(){return this.dragDrop&&this.dragDrop(),!1}).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(e,t,n){for(var i=!1,a=$(e),s=0,o=a.length;s<o;s++){var c=$(a[s]),d=c.offset();t<=d.left||t>=d.left+c.outerWidth()||n<=d.top||n>=d.top+c.outerHeight()||(i=c)}return i},draggTouchElement:function(e,t){var n=e.originalEvent.changedTouches[0];t[0].style.top="".concat(n.pageY-this.offset.y,"px"),t[0].style.left="".concat(n.pageX-this.offset.x,"px")},hasModifier:function(e){return e.ctrlKey||e.metaKey||e.shiftKey},addDropeffects:function(){if(this.targets)for(var e=0,t=this.targets.length;e<t;e++)$(this.targets[e]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var n=0,i=this.selections.items.length;n<i;n++)$(this.selections.items[n]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var e=0,t=this.selections.items.length;e<t;e++){var n=$(this.selections.items[e]);n.removeAttr("aria-grabbed".concat(n.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(e){e=this.isjQuery(e)?e:$(e,this.element);var t=$(".listview li",e),n=e.find(".listview").data("listview"),i=this.getDataList(e),a=!1;n&&n.filteredDataset&&(i=Un(n.filteredDataset),a=!0);for(var s=0,o=t.length;s<o;s++){var c=$(t[s]),d=i[s];a&&(d.node=c,delete d._isFilteredOut),c.is(".is-selected")&&this.selections.itemsData.push(d)}},initDataset:function(){var e=this.settings,t=[{type:"available",dataset:e.available,class:e.availableClass},{type:"selected",dataset:e.selected,class:e.selectedClass},{type:"additional",dataset:e.additional,class:e.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var n=0,i=t.length;n<i;n++)for(var a=t[n],s=$("".concat(a.class," .listview li"),this.element),o=0,c=s.length;o<c;o++){var d=void 0,p=void 0,f=$(s[o]);a.dataset?delete(d=JSON.parse(JSON.stringify(a.dataset[o]))).selected:(d={text:$.trim($(".swaplist-item-content",f).text())},(p=f.attr("data-value"))&&(d.value=p)),this.dataset[a.type]&&(d.node=f,this.dataset[a.type].push(d))}},getDataList:function(e){var t=this.settings,n=this.dataset;return(e=this.isjQuery(e)?e:$(e,this.element)).is(t.additionalClass)?n.additional:e.is(t.selectedClass)?n.selected:e.is(t.availableClass)?n.available:[]},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},syncDataset:function(e,t){var n=this,i=$(".listview li",t),a=e.find(".listview").data("listview"),s=t.find(".listview").data("listview"),o=this.getDataList(e),c=this.getDataList(t),d=function(J,ce){if(J&&ce){var ke={owner:J.getAttribute("data-id"),item:ce.getAttribute("data-id")};return void 0!==ke.owner&&void 0!==ke.item&&ke.owner===ke.item}return!1};if(e.is(t)){for(var p=[],f=0,m=i.length;f<m;f++)for(var b=i[f],C=0,T=o.length;C<T;C++){var S=o[C];if(d(S.node[0],b)){p.push(S);break}}o.splice(0,o.length);for(var M=0,L=p.length;M<L;M++)o.push(p[M])}else for(var z=0,V=this.selections.items.length;z<V;z++)for(var N=this.selections.items[z],U=!0,G=0,Z=i.length;G<Z&&U;G++)if($(i[G]).data().id===N.data().id)for(var oe=function(J,ce){var ke=o[ce];if(d(ke.node[0],N[0]))return n.isKeepInList(t)&&c.some(function(_e){return _e.id===ke.id})||(c.push(ke),n.arrayIndexMove(c,c.length-1,G)),n.isKeepInList(e)||o.splice(ce,1),U=!1,"break"},le=0,re=o.length;le<re&&"break"!==oe(0,le);le++);a.updated({dataset:o}),s.updated({dataset:c}),this.makeDraggable()},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},isKeepInList:function(e){var t=this.settings;return e.is(t.availableClass)&&t.keepInList.available||e.is(t.selectedClass)&&t.keepInList.selected||e.is(t.additionalClass)&&t.keepInList.additional},updateAttributes:function(e){for(var t=$("li",e),n=0,i=t.length;n<i;n++)$(t[n]).attr({"aria-posinset":n+1,"aria-setsize":i})},afterUpdate:function(e){var t=this.selections.droptarget.find("li:focus").index(),n=".card.".concat(this.selections.droptarget[0].classList[1]," li");e&&(this.selections.placeholder&&(e.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(e),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach(function(i){i.show()}),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),t>=0&&this.element.find(n).eq(t).focus()},getItems:function(e){return e=this.isjQuery(e)?e:$(e,this.element),this.getDataList(e)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(e,t){var n=!1;if(!this.selections.isInSelection){if(e.selectedItems)for(var i=0,a=e.selectedItems.length;i<a;i++)if(t.is(e.selectedItems[i]))return n=!0,!1;n||(e.select(t),this.selections.isInSelection=!0)}return!0},updateDataset:function(e){for(var t=this.settings,n=[{type:"available",dataset:e.available,class:t.availableClass},{type:"selected",dataset:e.selected,class:t.selectedClass},{type:"additional",dataset:e.additional,class:t.additionalClass}],i=0,a=n.length;i<a;i++){var s=n[i],o=$("".concat(s.class," .listview"),this.element),c=o.data("listview");c&&(c.deselectItemsBetweenIndexes([0,$("li",o).length-1]),t[s.type]=s.dataset||[],c.loadData(t[s.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(t.availableClass),this.initSelected(t.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,wl)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function(){var e=this,t=e.settings,n=e.selections;e.actionButtons.off("click.swaplist").on("click.swaplist",function(){var i=$(this),a=i.closest(".card");a.is(t.availableClass)?e.moveElements(t.availableClass,t.draggable.selected?t.selectedClass:e.isAdditional&&t.draggable.additional?t.additionalClass:null):a.is(t.additionalClass)?e.moveElements(t.additionalClass,t.draggable.selected?t.selectedClass:t.draggable.available?t.availableClass:null):a.is(t.selectedClass)&&(i.is(t.selectedBtnLeft)?e.moveElements(t.selectedClass,t.availableClass):i.is(t.selectedBtnRight)&&e.moveElements(t.selectedClass,t.additionalClass))}),e.containers.on("keydown.swaplist",".listview",function(i){var a=$(this).closest(e.containers);77===(i=i||window.event).keyCode&&e.hasModifier(i)&&(!a.is(t.selectedClass)||a.is(t.selectedClass)&&1===e.selectedButtons.length?a.find(e.actionButtons).trigger("click.swaplist"):e.selectedButtons.first().focus(),i.preventDefault())}),e.selectedButtons.on("keydown.swaplist",function(i){var a,o=$(this);13!==(i=i||window.event).keyCode&&32!==i.keyCode||(o.trigger("click.swaplist"),i.preventDefault()),(37===i.keyCode||39===i.keyCode)&&e.selectedButtons.length>1&&(a=e.selectedButtons.index(this),e.selectedButtons[37===i.keyCode?a>0?a-1:e.selectedButtons.length-1:a<e.selectedButtons.length-1?a+1:0].focus())}),e.element.on("keydown.swaplist",e.tabButtonsStr,function(i){var a=$(this);if(9===(i.keyCode||i.which)&&!i.shiftKey){var s=a.closest(".card")[0],o=[].slice.call(s.querySelectorAll("li[tabindex]")),d=!1;if(o.length&&o.forEach(function(f){-1!==parseInt(f.getAttribute("tabindex"),10)&&(d=!0)}),!d){var p=s.querySelector("li");p&&p.setAttribute("tabindex",0)}}}),e.containers.on("filtered.swaplist",".listview",function(){e.makeDraggable()}),e.element.on("mousedown.swaplist",e.dragElements,function(i){e.handle&&$(i.target).closest("li").attr({draggable:$(i.target).is(".draggable")}),i.stopPropagation()}).on(e.dragStart,e.dragElements,function(i){if(i.stopImmediatePropagation(),!e.handle||n.isHandle){var a,s,o=$(i.target).closest("li"),c=$(".listview",o.closest(".card")).data("listview");if(c){e.isTouch||e.draggedMakeSelected(c,o),e.clearSelections(),n.owner=o.closest(".card"),n.dragged=o,n.draggedIndex=o.index(),n.placeholder=o.clone(!0),n.placeholder.attr("id","sl-placeholder"),e.setSelectionsItems(n.owner),n.items=c.selectedItems,e.selections.move={items:e.selections.itemsData,from:e.getContainer(e.selections.itemsData)};var d=e.element.triggerHandler("beforeswap",[e.selections.move]);if("boolean"==typeof d&&!d||"string"==typeof d&&"false"===d.toLowerCase())n.dragged=null;else{if($(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(n.items.length),$(".".concat(t.numOfSelectionsClass,"-text"),t.itemContentTempl).text(P.translate("ItemsSelected")),e.addDropeffects(),e.isTouch){a=o[0].getBoundingClientRect(),e.offset={x:(s=i.originalEvent.changedTouches[0]).pageX-a.left,y:s.pageY-a.top};for(var p=0,f=e.containers.length;p<f;p++)e.containers[p].style.zIndex="1";n.placeholderTouch=n.dragged.clone(!0),n.items.length>1&&!$("#sl-placeholder-touch2").length&&n.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(n.dragged).hide(),n.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(e.element.is(".one-third")&&e.isMaxWidth(766)?e.element.parent():e.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(n.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(n.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(n.owner.width(),"px"),e.draggTouchElement(i,n.placeholderTouch)}else n.dragged.addClass("is-dragging"),i.originalEvent.dataTransfer.setData("text",""),n.items.length>1&&$(".".concat(t.itemContentClass),n.dragged).html(t.itemContentTempl.html());i.stopPropagation()}}}else i.stopPropagation()}).on(e.dragEnterWhileDragging,e.dragElements,function(i){n.dragged&&(e.element.triggerHandler("draggingswap",[n.move]),n.related=i.target,$("ul, li",e.element).removeClass("over"),$(i.target).closest("ul, li").addClass("over"),n.droptarget=$(n.related).closest(".card"),$('[aria-grabbed="true"]',e.element).not(n.dragged).slideUp(),i.stopPropagation())}).on(e.dragOverWhileDragging,e.dragElements,function(i){if(n.dragged){var a,s=$(this),o=$(".listview",n.dragged.closest(".card")).data("listview");if(e.isTouch){if(e.handle&&!n.isHandle)return;n.isInSelection||(e.draggedMakeSelected(o,n.dragged),n.items=o.selectedItems,$(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(n.items.length)),a=i.originalEvent.touches[0],s=e.getElementByTouchInList($("ul, li",e.element),a.pageX,a.pageY)||s,n.dragged.addClass("is-dragging"),n.placeholderTouch.addClass("is-dragging is-dragging-touch"),n.placeholderTouch.show(),$('[aria-grabbed="true"]',e.element).not(n.dragged).not(n.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),n.items.length>1&&($(".".concat(t.itemContentClass),n.placeholderTouch.add("#sl-placeholder-touch2")).html(t.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),n.dragged.hide()),e.draggTouchElement(i,n.placeholderTouch),e.element.triggerHandler("draggingswap",[n.move]),n.related=s,$("ul, li",this.element).removeClass("over"),s.closest("ul, li").addClass("over"),n.droptarget=n.related.closest(".card")}i.preventDefault(),i.stopPropagation()}}).on(e.dragEnd,e.dragElements,function(i){if(n.dragged&&n.droptarget){var a=$(n.related).closest("li"),s=$("ul",n.droptarget),o=$("li",s).length,c=n.items.length+o;if(e.unselectElements($(".listview",n.owner).data("listview")),$.each(n.items,function(f,m){if((m=$(m)).find("mark.highlight").contents().unwrap(),o&&!$(n.related).is("ul")){var b=a.index()<n.draggedIndex&&n.owner.is(n.droptarget),C=b?m:$(n.items[n.items.length-1-f]),T=a.index()+(b?f+1:f+2);m.attr({"aria-posinset":T,"aria-setsize":c}),a[b?"before":"after"](C)}else m.attr({"aria-posinset":o+f+1,"aria-setsize":c}),s.append(m);m.focus()}),n.items.length>1&&($(".".concat(t.itemContentClass),n.dragged).html($(".".concat(t.itemContentClass),n.placeholder).html()),e.isTouch&&n.dragged.show()),e.isTouch)for(var d=0,p=e.containers.length;d<p;d++)e.containers[d].style.zIndex="";e.makeDraggable(),n.isHandle=null,$('[aria-grabbed="true"]',e.element).show(),e.afterUpdate($(".listview",n.droptarget).data("listview")),i.preventDefault(),i.stopPropagation()}})}},$.fn.swaplist=function(e){return this.each(function(){var t=$.data(this,"swaplist");t?t.updated(e):t=$.data(this,"swaplist",new cd(this,e))})};var Zl={swipeType:"reveal"};function ec(e,t){return this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Zl),this.init()}ec.prototype={init:function(){this.render(),this.handleEvents()},render:function(){this.container=this.element[0].querySelector(".swipe-container"),this.swipeType=this.settings.swipeType;var e=this.element[0].querySelector(".btn-swipe-action-left"),t=this.element[0].querySelector(".btn-swipe-action-right");e&&"reveal"===this.swipeType&&(e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")),t&&"reveal"===this.swipeType&&(t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true")),e&&"reveal"===this.swipeType&&(this.container.scrollLeft=85)},handleEvents:function(){var e=this,t=0,n=0,i=0;if("reveal"===this.swipeType)return this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").on("click.swipe-action",function(){e.container.scrollLeft=85,e.element.focus()}),void $(this.container).on("scroll.swipe-action",function(){var a,s;null===(a=e.element.find(".btn-actions"))||void 0===a||null===(s=a?.data("popupmenu"))||void 0===s||null==s||s.close()});this.element.on("touchstart.swipe-action",function(a){t=a.changedTouches[0].screenX},{passive:!0}),this.element.on("touchend.swipe-action",function(a){var s,o,c="";(n=a.changedTouches[0].screenX)<t&&(c="left"),n>t&&(c="right"),c&&(e.element.find(".swipe-action-".concat("left"===c?"right":"left"," button")).click(),null===(s=e.element.find(".btn-actions"))||void 0===s||null===(o=s?.data("popupmenu"))||void 0===o||null==o||o.close())},{passive:!0}),$(this.container).on("scroll.swipe-action",function(a){var s,o,c=a.target,d=c.scrollLeft/(c.scrollWidth-c.clientWidth)*100;if(null===(s=e.element.find(".btn-actions"))||void 0===s||null===(o=s?.data("popupmenu"))||void 0===o||null==o||o.close(),!(Math.abs(i-d)<1)){i=d;var p="";0===d&&(p="right"),d>98&&(p="left"),p&&e.element.find(".swipe-action-".concat("left"===p?"right":"left"," button")).click()}})},set swipeType(e){if("continuous"===e)return this.settings.swipeType=e,void this.container.classList.add("continuous");this.settings.swipeType="reveal",this.container.classList.remove("continuous")},get swipeType(){return this.settings.swipeType},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").off("click.swipe-action"),this.element.off("scroll.swipe-action").off("click.swipe-action"),this.element.off("touchstart.swipe-action"),this.element.off("touchend.swipe-action"),$(this.container).off("scroll.swipe-action")},destroy:function(){this.teardown(),$.removeData(this.element[0],"swipeaction")}},$.fn.swipeaction=function(e){return this.each(function(){var t=$.data(this,"swipe-container");return t?t.updated(e):t=$.data(this,"swipe-container",new ec(this,e)),t})};var dd={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function xl(e,t){this.settings=_.mergeSettings(e,t,dd),this.element=$(e),this.init()}xl.prototype={init:function(){this.handleEvents()},unbind:function(){var e=this.settings;return this.element.off("scroll.scrollaction"),e&&$(e.scrollActionTarget).removeClass(e.classToAdd),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,dd)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function(){var e=this,t=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",function(){var n=e.element.scrollTop();n>e.lastScrollTop?$(t.scrollActionTarget).addClass(t.classToAdd):$(t.scrollActionTarget).removeClass(t.classToAdd),e.lastScrollTop=n})}},$.fn.scrollaction=function(e){return this.each(function(){var t=$.data(this,"scrollaction");t?t.updated(e):t=$.data(this,"scrollaction",new xl(this,e))})};var Mu={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null,attributes:null};function Cl(e,t){return this.init(e,t)}Cl.prototype={init:function(e,t){return!this.element&&e instanceof HTMLElement&&(this.element=$(e)),("object"===Ge(t)||void 0===this.settings)&&(this.settings=_.mergeSettings(this.element[0],t,this.settings||Mu)),this.render()},render:function(){var e=$('<div class="step-chart-steps"></div>'),t='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',n=null===this.settings.completed&&null===this.settings.steps;if(n&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=_.parseSettings(this.element)),this.element.children().length>0)return this;for(var i=0;i<this.settings.steps;i++){var a=$('<div class="step-chart-step"></div>');_.addAttributes(a,this.settings,this.settings.attributes,"step".concat(i)),i<this.settings.completed&&(a.addClass("is-complete"),this.settings.completedColor&&a.css("background-color",this.settings.completedColor)),i===this.settings.inProgress-1&&(a.addClass("is-inprogress"),this.settings.inProgressColor&&a.css("background-color",this.settings.inProgressColor)),e.append(a)}var s=this.settings.completedText||P.translate("StepsCompleted");s=(s=s.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),n&&(s=P?P.translate("NoData"):"No Data Available");var o=$('<span class="step-chart-label">'.concat(s,"</span>"));if(this.settings.steps===this.settings.completed&&(e.addClass("is-complete"),o.append(t.replace("{icon-name}","icon-success"))),this.settings.iconType&&o.append(t.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var c=this.settings.extraText;c=(c=(c="{1} Days Overdue"===(c="{0} Days Remaining"===c?P.translate("DaysRemaining"):c)?P.translate("DaysOverdue"):c).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),o.append('<span class="step-chart-label-small">'.concat(c,"</span>"))}return this.element.append(o,e),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(e.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),o.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),_.addAttributes(o,this.settings,this.settings.attributes,"label"),_.addAttributes(o.find(".icon"),this.settings,this.settings.attributes,"icon"),_.addAttributes(o.find(".step-chart-label-small"),this.settings,this.settings.attributes,"label-small"),this},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),this.element.empty(),this.render()},teardown:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this},destroy:function(){return this.teardown(),this}},$.fn.stepchart=function(e){return this.each(function(){var t=$.data(this,"stepchart");t?t.updated(e):(t=$.data(this,"stepchart",new Cl(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,"stepchart"),$.removeData(this.element,"options")}})};var kl=["horizontal","vertical","module-tabs","header-tabs"],ud={addTabButton:!1,addTabButtonCallback:null,addTabButtonTooltip:!1,appMenuTrigger:!1,appMenuTriggerText:void 0,appMenuTriggerTextAudible:!1,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,countsPosition:void 0,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1,attributes:null,sortable:!1};function Fo(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,ud),this.init()}Fo.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var e,t=this,n=this,i=!1,a=["en-US","de-DE","ja-JP","zh-CN","zh-Hans","zh-TW","zh-Hant"];(e=this.element.next(".tab-panel-container")).length||(e=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(i=!0));var s=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&s.length&&(e=s),this.element.next(".application-menu").length&&(e=this.element.next().next(".page-container"),i=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(e=$(this.settings.containerElement),i=!1),e&&e.length||(e=$('<div class="tab-panel-container"></div>'),i=!0),e[0].classList.contains("tab-panel-container")||e[0].classList.add("tab-panel-container"),i&&e.insertAfter(this.element),this.container=e;var o=this.element.children(".tab-list-container");!o.length&&this.isScrollableTabs()&&(o=$('<div class="tab-list-container" tabindex="-1"></div>').prependTo(this.element)),o.length&&(this.tablistContainer=o);var c=!0,d=this.element.closest(".header");kl.forEach(function(S,M){t.element.hasClass(kl[M])&&(c=!1)}),c&&n.element.addClass(d.length?"header-tabs":"horizontal"),n.settings.tabCounts&&n.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablist.appendTo(this.tablistContainer?this.tablistContainer:this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",function(S){S.deltaY&&(this.scrollLeft+=S.deltaY)})),n.tablist.attr({class:"tab-list",role:"tablist"}),this.checkResponsive(!1),this.renderHelperMarkup(),n.anchors=n.tablist.children("li:not(.separator)").children("a"),n.anchors.each(function(){var S,M=$(this),L=M[0].textContent.toLowerCase().trim().split(" ").join("-");M.attr({role:"tab","aria-selected":"false",tabindex:"-1"}).parent().attr("role","tab").addClass("tab"),M.parent().hasClass("dismissible")&&!M.parent().children(".icon").length&&(S=$.createIconElement({icon:"close",classes:"icon close"})).insertAfter(M),n.settings.attributes&&(_.addAttributes(M,n,n.settings.attributes,"".concat(L,"-a")),S&&_.addAttributes(S,n,n.settings.attributes,"".concat(L,"-close-btn")));var z=M.nextAll("ul").first();z.length>0&&(z.addClass("dropdown-tab"),M.parent().addClass("has-popupmenu").popupmenu({menu:z,trigger:"click",attachToBody:!0,attributes:n.settings.attributes}),M.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),M.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(M)),n.settings.tabCounts&&0===$(this).find(".count").length&&(a.includes(P.currentLocale.name)&&"bottom"!==n.settings.countsPosition||"top"===n.settings.countsPosition?$(this).prepend('<span class="count">0 </span>'):$(this).append('<span class="count">0 </span>')),(n.settings.moduleTabsTooltips||n.settings.multiTabsTooltips)&&M.on("beforeshow.toolbar",function(){return"yes"===M.data("cutoffTitle")}).tooltip({content:"".concat(M.text().trim())})}),n.panels=$(),n.anchors.each(function(){var S,M=$(this),L=M.parent(),z=L.data("popupmenu"),V=M.attr("href");if("#"===V.substr(0,1)){if("#/"===V.substr(0,2)&&(V=V.replace("#/","#")),void 0!==V&&"#"!==V){if(V=V.replace(/\//g,"\\/"),S=$(V),L.is(":not(.has-popupmenu)")&&!S.length)return;if(n.settings.attributes){var N=M[0].textContent.toLowerCase().trim().split(" ").join("-");_.addAttributes(S,n,n.settings.attributes,"".concat(N,"-panel"))}M.data("panel-link",S),S.data("tab-link",M),n.panels=n.panels.add(S)}z&&z.menu.children("li").each(function(){var U=$(this),G=U.children("a"),Z=G.attr("href"),oe=$(Z);if(G.data("panel-link",oe),oe.data("tab-link",G),n.panels=n.panels.add(oe),n.anchors=n.anchors.add(G),U.hasClass("dismissible")){var le=U.children(".icon");le.length||(le=$.createIconElement({icon:"close",classes:"icon close"})),le.detach().appendTo(G)}}).on("click.popupmenu",".icon",function(U){var G=$(this),Z=G.closest("li");Z.is(".dismissible")&&G.is(".icon")&&(U.preventDefault(),U.stopPropagation(),n.closeDismissibleTab(Z.children("a").attr("href")))})}}),n.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),n.panels.each(function(){var S=$(this);S.parent().is(n.container)||n.container.append(S)});var p,f,m=":not(.separator):not(.is-disabled):not(.is-hidden)",b=this.tablist.children("li".concat(m)),C=this.tablist.children("li.is-selected".concat(m)),T=C.children("a");return n.nestedTabControls=n.panels.find(".tab-container"),b.length&&(this.settings.changeTabOnHashChange&&(p=window.location.hash)&&p.length&&(f=b.find('a[href="'.concat(p,'"]'))).length&&(T=(C=f.first().parent()).children("a")),C.length||(T=(C=b.not(".add-tab-button, .application-menu-trigger").first()).children("a")),C.length&&this.activate(T.attr("href"),T)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.isModuleTabs()&&b.filter(".application-menu-trigger").length>0&&(b.find('a[tabindex="0"]').attr("tabindex","-1"),b.filter(".application-menu-trigger").find("a").attr("tabindex","0")),this.setOverflow(),this.positionFocusState(T),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",function(){t.renderEdgeFading()}),this.renderEdgeFading()),this.createSortable(),typeof ResizeObserver<"u"&&(this.ro=new ResizeObserver(function(){$("body").triggerHandler("resize")}),this.ro.observe(this.element[0]),this.containerElement&&this.ro.observe(this.containerElement[0])),this},createSortable:function(){var e=this;if(this.settings.sortable&&(!Ie.features.touch||this.isModuleTabs()||this.isVerticalTabs())){var t=this.tablist?this.tablist[0]:null,n=$(".tab-panel-container");if(t){[].slice.call(t.querySelectorAll(".is-disabled, .separator, .application-menu-trigger")).forEach(function(s){return s.setAttribute("data-arrange-exclude","true")}),t.setAttribute("data-options",'{"placeholderCssClass": "tab arrange-placeholder", "useItemDimensions": "true"}'),t.classList.add("arrange");var i=this.tablist.data("arrange");i||(i=this.tablist.arrange().data("arrange"));var a=null;this.isModuleTabs()||this.isVerticalTabs()||this.isHeaderTabs()||this.tablist.on("beforearrange.tabs",function(){a=$(this).closest(".tab-container")[0]}).on("draggingarrange.tabs",function(){var s;null===(s=a)||void 0===s||null==s||s.classList.add("has-placeholder")}),this.tablist.on("dragover.tabs",function(s){s.preventDefault()}),n.on("dragover.tabpanel",function(s){s.preventDefault()}),this.tablist.on("drag.tabs",function(s){if($(".multitabs-section.is-hidden").length){var o=$(s.target).parents(".multitabs-section");o.hasClass("alternate")?o.find(".overlay-left").addClass("has-overlay"):o.find(".overlay-right").addClass("has-overlay")}}),this.tablist.on("dragend.tabs",function(s){var o=$(s.target),c=$(document.elementFromPoint(s.pageX,s.pageY)),d=o.parents(".multitabs-section");d.find(".overlay-left").removeClass("has-overlay"),d.find(".overlay-right").removeClass("has-overlay");var p=c.parents(".module-tabs");o.get(0)!==c.get(0)&&d[0]===c.parents(".multitabs-section")[0]&&$(".multitabs-section").each(function(S,M){d[0]!==M&&$(M).hasClass("is-hidden")&&(p=$(M).children(".module-tabs"))});var f=o.attr("href").replace("#",""),m=p.data("tabs");if(void 0!==m){var b=m.getTab(null,o);if(e.element.parent()[0]!==m.element.parent()[0]){var C=b.clone(),T=e.getPanel(f).children();e.remove(f),m.add(f,{name:C.children("a").text().trim(),content:T,doActivate:!0}),e.element.children(".tab-list").children().length<1&&e.element.parent().addClass("is-hidden"),m.element.children(".tab-list").children().length>0&&m.element.parent().removeClass("is-hidden")}}}),this.tablist.on("arrangeupdate.tabs",function(){var s;null===(s=a)||void 0===s||null==s||s.classList.remove("has-placeholder")}),this.element.on("aftertabadded.tabs",function(){var s;null===(s=i)||void 0===s||null==s||s.updated()})}}},renderHelperMarkup:function(){var e,t,n=this.tablistContainer||this.tablist;this.isModuleTabs()&&(n=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=n.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(P.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),n.after(this.moreButton)),null!==(e=this.moreButton)&&void 0!==e&&e?.length&&this.settings.attributes&&_.addAttributes(this.moreButton,this,this.settings.attributes,"btn-more");var i,a=this.tablist.find(".application-menu-trigger");!0===this.settings.appMenuTrigger?this.isModuleTabs()?a.length||(a=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span'.concat(this.settings.appMenuTriggerTextAudible?' class="audible"':"",">").concat(this.settings.appMenuTriggerText||P.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(a)):this.isVerticalTabs()&&a.length&&a.off().removeData().remove():a.length&&(this.isVerticalTabs()?a.off().removeData().remove():this.tablist.prepend(a)),a.length&&(this.settings.attributes&&_.addAttributes(a,this,this.settings.attributes,"appmenu-trigger-btn"),null===(i=$("#application-menu").data("applicationmenu"))||void 0===i||null==i||i.modifyTriggers([a.children("a")],null,!0)),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="-1" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(P.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),null!==(t=this.addTabButton)&&void 0!==t&&t?.length&&this.settings.attributes&&_.addAttributes(this.addTabButton,this,this.settings.attributes,"btn-add");var o=this.element.find(".more-actions-button .btn-actions");return o.length&&(this.moreActionsBtn=o),this.settings.addTabButtonTooltip&&this.addTabButton.tooltip({content:P.translate("AddNewTab")}),this},setupEvents:function(){var e=this,t=this;return this.tablist.on("mousedown.tabs","> li",function(n){if(t.handleAddFocusData(n,$(this)),$(n.target).hasClass("close")&&$(n.target).parent().hasClass("has-popupmenu")){var i=$(this).data("popupmenu").menu,a=[];$.each(i[0].children,function(s,o){a.push(o.children[0].href)}),t.closeDismissibleTabs(a)}return 3!==n.which&&!$(n.target).hasClass("close")&&t.handleTabClick(n,$(this))}).on("click.tabs","a",function(n){var i=$(n.currentTarget);!0!==this.wasTapped?("touchend"===n.type&&(this.wasTapped=!0),"#"===i.attr("href").substr(0,1)&&n.preventDefault()):this.wasTapped=!1}).on("click.tabs",".icon",function(n){var i=$(this);if(!i.is("[disabled]")&&!i.parent().hasClass("is-disabled")){var a=$(i).parent();a.hasClass("dismissible")&&(n.preventDefault(),n.stopPropagation(),t.closeDismissibleTab(a.children("a").attr("href")))}}).on("focus.tabs","a",function(n){return t.handleTabFocus(n,$(this))}).on("blur.tabs","a",function(){$(this).parent().removeClass("is-focused")}).on("keydown.tabs","a",function(n){return e.handleTabKeyDown(n)}),t.tablist.find("li").filter(".has-popupmenu").each(function(n,i){var a=$(i),s=a.children("a");a.data("popupmenu").menu.on("keydown.popupmenu","a",function(c){switch(c.which){case 27:a.addClass("is-selected"),s.focus();break;case 8:case 46:!function o(c){c.altKey&&a.is(".dismissible")&&t.closeDismissibleTab(s.attr("href"))}(c)}}),a.on("selected.tabs",function(c,d){var p=$(this),f=$(d).attr("href");return!!t.activate(f,$(d))&&(t.positionFocusState(s),s.focus(),t.scrollTabList(p),p.addClass("is-selected"),!1)})}),t.tablist.find("li").filter(".dismissible").each(function(n,i){$(i).children("a").on("keydown.tabs",function(a){t.handleDismissibleTabKeydown(a)})}),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",function(n){t.handlePanelKeydown(n)}),this.element.on("focusout.tabs",function(){var n=!$.contains(t.element[0],document.activeElement),i=0===t.tablist.children(".has-popupmenu.is-open").length;n&&i&&!t.moreButton.is(".is-selected, .popup-is-open")&&t.hideFocusState()}).on("updated.tabs",function(n,i){t.updated(i)}).on("activated.tabs",function(n){n.stopPropagation()}).on("add.tabs",function(n,i,a,s){t.add(i,a,s)}).on("remove.tabs",function(n,i){t.remove(i)}),$("body").on("resize.tabs".concat(this.tabsIndex),function(){t.handleResize()}),t.handleResize(!0),this},setupHelperMarkupEvents:function(){var e,t=this;this.moreButton.on("click.tabs",function(n){t.handleMoreButtonClick(n)}).on("keydown.tabs",function(n){t.handleMoreButtonKeydown(n)}).on("focus.tabs",function(n){t.handleMoreButtonFocus(n)}).on("mousedown.tabs",function(n){t.handleAddFocusData(n,$(this))}),this.settings.addTabButton&&this.addTabButton.on("click.tabs",function(){t.handleAddButton()}).on("keydown.tabs",function(n){t.handleAddButtonKeydown(n)}).on("focus.tabs",function(n){t.handleAddButtonFocus(n)}),null!==(e=this.moreActionsBtn)&&void 0!==e&&e?.length&&this.moreActionsBtn.on("keydown.tabs",function(n){t.handleMoreActionsButtonKeydown(n)})},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(e,t){var n=t;return n.is(".is-disabled")?(e.preventDefault(),!1):(n.is(this.moreButton)||(n=n.children("a")),this.hideFocusState(),n.data("focused-by-click",!0),!0)},handleTabClick:function(e,t){if(this.element.is(".is-disabled")||t&&(t.is(".is-disabled")||t.is(".separator")))return e.stopPropagation(),e.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(e))return!0;var n=t.children("a");if(n.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),t.is(".has-popupmenu"))return this.positionFocusState(n),!0;var i=n.attr("href");return t.is(".add-tab-button")&&(t=(n=this.handleAddButton()).parent(),i=n.attr("href"),this.element.trigger("tab-added",[n])),2===e.which?(t.is(".dismissible")&&$(e.target).is(".close")&&this.closeDismissibleTab(i),e.preventDefault(),!0):!this.activate(i,n)||(this.changeHash(i),this.focusState.removeClass("is-visible"),n.focus(),this.isScrollableTabs()&&this.scrollTabList(t),this.positionFocusState(n),!0!==this.settings.lazyLoad||!this.isURL(i))},handleMoreButtonClick:function(e){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(e.preventDefault(),e.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||e.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},hasMoreActions:function(){var e=this.element.find(".more-actions-button > .btn-actions");return e&&e.length>0},handleMoreActionsButtonKeydown:function(e){if(this.element.is(".is-disabled")||this.moreActionsBtn.is(".is-disabled"))return e.stopPropagation(),e.preventDefault(),!1;var n,i,t=this,a=this.addTabButton&&this.addTabButton.length,s=this.tablist.children("li".concat(":not(.separator):not(.is-disabled):not(:hidden)"));switch(e.which){case 37:case 38:if(a)this.addTabButton.focus();else{var o=this.findLastVisibleTab();this.hasMoreButton()?(i=o.attr("href"),e.preventDefault(),setTimeout(function(){t.buildPopupMenu(i),t.positionFocusState(t.moreButton,!0)},0)):n=o}break;case 39:case 40:n=s.first()}return n&&(e.preventDefault(),n.children("a").focus(),this.isScrollableTabs()&&this.scrollTabList(n)),!0},handleTabFocus:function(e,t){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var n=t.parent(),i=t.data("focused-by-click"),a=void 0===i||i&&!1===i;return $.removeData(t[0],"focused-by-click"),this.isTabOverflowed(n)?(this.buildPopupMenu(t.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(n.addClass("is-focused"),this.positionFocusState(t,a)),!0},handleMoreButtonFocus:function(e){if(this.element.is(".is-disabled"))e.preventDefault();else{var t=this.moreButton.data("focused-by-click"),n=t&&!1===t;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,n)}},handleTabKeyDown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey&&8!==e.which)return!0;var t=this,n=[8,13,32];function i(){return $.inArray(e.which,n)>-1}if(e.which<32&&!i()||e.which>46||i()&&!this.handleAppMenuTabKeydown(e))return!0;function a(L){e.preventDefault(),setTimeout(function(){t.buildPopupMenu(L)},0)}var s,o=":not(.separator):not(.is-disabled):not(:hidden)",c=$(e.currentTarget).parent(),d=c.children("a"),p=t.tablist.children("li".concat(o)),f=P.isRTL();function m(){for(var L=p.index(c)-1;L>-1&&!s;){if(p.eq(L).is(o))return p.eq(L);L-=1}if(t.hasMoreActions())return t.moreActionsBtn;if(t.settings.addTabButton)return t.addTabButton;var z=t.tablist.children("li".concat(o)).last();return t.hasMoreButton()&&t.isScrollableTabs()&&a(z.find("a").attr("href")),z}function b(){for(var L=p.index(c)+1;L<p.length&&!s;){if(p.eq(L).is(o))return p.eq(L);L++}var z=t.tablist.children("li".concat(o)).first();return t.hasMoreButton()&&t.isScrollableTabs()?(a(z.find("a").attr("href")),z):t.settings.addTabButton?t.addTabButton:t.hasMoreActions()?t.moreActionsBtn:z}switch(e.which){case 8:return e.altKey&&c.is(".dismissible")&&(e.preventDefault(),t.closeDismissibleTab(d.attr("href"))),!0;case 13:case 32:return function C(){if(c.hasClass("has-popupmenu"))c.data("popupmenu").open();else{var L=d.attr("href");c.is(".add-tab-button")&&(d=t.handleAddButton(),c=d.parent(),L=d.attr("href"),t.element.trigger("tab-added",[d])),t.activate(L)&&(t.changeHash(L),(d.attr("ng-click")||d.attr("data-ng-click"))&&d.click(),d[0].focus(),t.hideFocusState(),t.handleOutboundLink(L))}}(),this.positionFocusState(),!1;case 38:s=m(),e.preventDefault();break;case 37:s=f?b():m(),e.preventDefault();break;case 40:s=b(),e.preventDefault();break;case 39:s=f?m():b(),e.preventDefault()}if(s){var T=s.is(".add-tab-button"),S=s.is(".btn-actions"),M=T||S?s:s.children("a");if(this.isTabOverflowed(s))return a(s.children("a").attr("href"));T?t.addTabButton.focus():S?t.moreActionsBtn.focus():(M.focus(),this.isScrollableTabs()&&(this.scrollTabList(M),t.positionFocusState(M,!0)))}return!0},handleDismissibleTabKeydown:function(e){var t=e.which,n=$(e.target);if(n.is("a")&&(n=n.parent()),e.altKey&&46===t){if(n.children("a").is("[disabled]")||n.hasClass("is-disabled"))return;e.preventDefault(),this.closeDismissibleTab(n.children("a").attr("href"))}},handleAppMenuTabKeydown:function(e){var t=$(e.target);if(!t.parent().is(".application-menu-trigger")&&!t.is(".application-menu-trigger"))return!0;var n=$("#application-menu");return!!n.length&&(e.preventDefault(),n.hasClass("is-open")?(n.trigger("close-applicationmenu",[!0]),!1):(n.trigger("open-applicationmenu",[!0,!0]),!1))},handleMoreButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=this,n=P.isRTL();function i(){e.preventDefault(),t.buildPopupMenu(t.tablist.find(".is-selected").children("a").attr("href")),t.positionFocusState(t.moreButton,!0)}function a(){e.preventDefault(),t.findLastVisibleTab()}switch(e.which){case 37:if(n){i();break}a();break;case 38:a();break;case 13:case 32:e.preventDefault();break;case 39:if(n){a();break}i();break;case 40:i()}return!0},handlePanelKeydown:function(e){var t=e.which,n=$(e.target),i=this.anchors.filter("#".concat(n.attr("id")));return this.anchors.filter("#".concat(n.attr("id"))).parent().is(".dismissible")&&e.altKey&&46===t?(e.preventDefault(),this.closeDismissibleTab(i.attr("href"))):e.ctrlKey&&38===t&&$.contains(document.activeElement,n[0])?(e.preventDefault(),this.activate(i.attr("href"),i)):void 0},triggerEventAfterTabAdded:function(e){var t=this.anchors.filter('[href="#'.concat(e,'"]'));this.element.triggerHandler("aftertabadded",[t])},handleAddButton:function(){var e=this,t=this.settings.addTabButtonCallback;if(t&&"function"==typeof t){var n=t();return this.triggerEventAfterTabAdded("newTabId"),this.anchors.filter('[href="#'.concat(n,'"]'))}var i,a=this.tablist.children().index(this.addTabButton),s=(e.idCounter="number"==typeof e.idCounter?e.idCounter:-1,e.idCounter++,"new-tab-".concat(e.idCounter)),o={name:((i=s.toString().split("-")).forEach(function(d,p){i[p]=d.charAt(0).toUpperCase()+d.slice(1)}),i.join(" ")),content:"&nbsp;",isDismissible:!0};a<0&&(a=this.tablist.find("li:not(.separator)").length);var c=this.element.triggerHandler("before-tab-added",[s,o,a]);return c?(c.newId&&c.newId.length&&"string"==typeof c.newId&&(s=c.newId),c.settings&&"object"===Ge(c.settings)&&(o=c.settings),isNaN(c.newIndex)||(a=c.newIndex),this.add(s,o,a),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(s,'"]'))):(this.add(s,o,a),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(s,'"]')))},handleAddButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=e.which;if([13,32,37,38,39,40].indexOf(t)<0)return!1;var n,i=this,a=P.isRTL(),s="li:not(.separator):not(.is-disabled):not(:hidden)";function o(){e.preventDefault(),n=i.tablist.find(s).last(),setTimeout(function(){i.buildPopupMenu(n.children("a").attr("href")),i.positionFocusState(i.moreButton,!0)},0)}function c(){i.hasMoreActions()?i.moreActionsBtn.focus():n=i.tablist.find(s).first()}switch(t){case 37:if(a){c();break}o();break;case 38:o();break;case 13:case 32:return e.preventDefault(),this.handleAddButton();case 39:if(a){o();break}c();break;case 40:c()}return n&&(n.children("a").focus(),this.isScrollableTabs&&(e.preventDefault(),this.scrollTabList(n))),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function(e){e||this.checkResponsive(!0),this.setOverflow();var t=this.tablist.find(".is-selected");(!t.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(t))&&(t=this.moreButton);var n=this.element.find(".application-menu-trigger");n.length>0&&n.hasClass("is-focused")&&(t=n.find("a")),t.length?this.positionFocusState(t):this.hideFocusState(),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(e){var t=this,n=t.element[0].classList;function i(){t.removeHelperMarkupEvents(),t.renderHelperMarkup(),t.setupHelperMarkupEvents()}this.isResponsiveVerticalTabs()&&it.isBelow("phone-to-tablet")?n.contains("is-in-responsive-mode")||(n.add("is-in-responsive-mode"),n.add("header-tabs"),n.contains("is-personalizable")||n.add("alternate"),n.remove("vertical"),e&&i()):function a(){n.contains("is-in-responsive-mode")&&(n.add("vertical"),n.remove("is-in-responsive-mode"),n.remove("header-tabs"),n.remove("alternate"),e&&i())}()},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var e=window.getComputedStyle(this.element[0]),t=e.getPropertyValue("height")+e.getPropertyValue("margin-top")+e.getPropertyValue("margin-bottom");this.tablist[0].style.height=t}},handleOutboundLink:function(e,t){"#"!==e.charAt(0)&&("/"!==e.charAt(0)||t&&!1!==t||(e=window.location.origin+e),window.location=e)},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(e){return!(!e||!e.length||1===e.length&&e.indexOf("#")<1)&&this.getPanel(e)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var e=this.element.closest(".module-tabs").length,t=this.element.closest(".header-tabs").length,n=this.element.closest(".tab-panel-container").length;return e>0||t>0||n>0},isTab:function(e){return e instanceof jQuery&&e.length&&e.is("li.tab")},isAnchor:function(e){return e instanceof jQuery&&e.length&&e.is("a")},getAnchor:function(e){return this.isAnchor(e)?e:(-1===e.indexOf("#")&&"/"!==e.charAt(0)&&(e="#".concat(e)),this.anchors.filter('[href="'.concat(e,'"]')))},getPanel:function(e){return this.isTab(e)&&(e=e.children("a")),this.isAnchor(e)&&(e=e.attr("href")),e&&""!==e&&"#"!==e?("#/"===e.substr(0,2)&&(e=e.replace("#/","#")),this.panels.filter('[id="'.concat(e.replace(/#/g,""),'"]'))):$()},getMenuItem:function(e){return this.isAnchor(e)&&(e=e.attr("href")),-1===e.indexOf("#")&&(e="#".concat(e)),this.moreMenu.children().children().filter('[data-href="'.concat(e,'"]')).parent()},getPreviousTab:function(e){for(var t=this.getTab(null,e),n="li:not(.separator):not(:hidden):not(.is-disabled)",i=this.tablist.find(n),a=i.index(t),s=i.eq(0===a?1:a-1);s.length&&!s.is(n);)s=i.eq(i.index(s)-1);if(s.is(".has-popupmenu")){var o=s.data("popupmenu");o&&(s=o.menu.children("li").first())}return s},activateAdjacentTab:function(e,t){var n=this.doGetTab(e,t);"string"==typeof e&&(t=e),n.is(".is-selected")?n.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(n.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):n.nextAll("li.tab").not(".hidden").length>0&&this.select($(n.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(e,t){var n=this.getTab(null,e);if(t&&t instanceof jQuery||(t=this.getPreviousTab(e)),!t.length)return this.hideFocusState(),t;var i=t.children("a");if(n.is(".is-selected")){if(!this.activate(i.attr("href"),i))return t;i.focus()}return this.positionFocusState(i),t},isURL:function(e){return!(!e||0===e.indexOf("#"))},activate:function(e,t){var n=this;if(n.isURL(e))return this.callSource(e,t,!0);for(var i,a,s,o=n.getAnchor(e),c=o.parent(),d=n.getPanel(e),p=d[0],f=n.anchors.parents().filter(".is-selected"),m=0;m<n.panels.length;m++)n.panels[m].classList.contains("is-visible")&&(i=$(n.panels[m]));if(i||(i=n.panels),!n.element.trigger("beforeactivated",[o]))return!1;function b(C){if(d.length<1){if(n.settings.source)return n.callSource(e,o),!0}else{i[0].classList.remove("can-show"),i[0].classList.remove("is-visible"),i.closeChildren(),n.element.trigger("activated",[o]),p.classList.add("can-show"),n.renderVisiblePanel();var T=new nn({duration:Aa.convertDelayToFPS(150),timeoutCallback:function(){n.element.trigger("afteractivated",[o])}});dt.register(T),p.classList.add("is-visible")}n.updateAria(o),f.add(n.moreButton).removeClass("is-selected"),c[0]&&c[0].classList.contains("tab")&&(a=c,s=c);var S,M=c.parents(".popupmenu");M.length&&(S=M.data("trigger")).length&&(a=S,s=S),n.isTabOverflowed(s)&&(s=n.moreButton,a=n.moreButton),a&&a.addClass("is-selected");var L=d.find(".toolbar");return L.length&&L.each(function(){var z=$(this).data("toolbar");z&&"function"==typeof z.handleResize&&z.handleResize()}),_.fixSVGIcons(d[0]),C||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(f,c,b):b(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var e=this.tablistContainer[0],t=Math.abs(e.scrollLeft),n=e.scrollWidth,i=parseInt(window.getComputedStyle(e).getPropertyValue("width"),10);this.element[0].classList[t>1?"add":"remove"]("scrolled-right"),this.element[0].classList[n-t-1<=i?"remove":"add"]("scrolled-left")}},callSource:function(e,t,n){var i=this;if((null==n||!1===n)&&!this.settings.source||!0!==this.settings.lazyLoad)return!1;var a=Ge(this.settings.source),s=function(C){if(null!=C){if(C=$e.sanitizeHTML(C),n){var S=_.uniqueId(t,"tab",i.element[0].id||"");e="#".concat(S),t[0].setAttribute("href",e)}i.createTabPanel(e,C,!0),i.activate(e),i.element.triggerHandler("complete"),i.element.trigger("requestend",[e,C])}};function o(C,T){var S=$.extend({dataType:"html"},T,{url:C}),M=$.ajax(S);return M.done(s),M}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),n)return o(e,this.ajaxOptions);if("function"===a)return this.settings.source(s,e,this.settings.sourceArguments);if("string"===a){var c=e.replace(/#/g,""),d=this.settings.source.toString();if(!(d.indexOf(c)>-1)){var p="tab=".concat(c),f=d.indexOf("?"),m=d.indexOf("#"),b=d.length;f<0?(p="?".concat(p),m>-1&&(b=m+1)):(p+="&",b=f+1),d=at.splice(d,b,0,p)}return o(d,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(e){if(this.settings.changeTabOnHashChange){e||(e=""),e.replace(/#/g,"");var t=this.settings.hashChangeCallback;t&&"function"==typeof t?t(e):window.location.hash=e,this.element.triggerHandler("hash-change",[e])}},updateAria:function(e){e&&(this.anchors.attr({"aria-selected":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),e.length&&this.element.is(":not(.is-disabled)")&&(e.parent().removeClass("is-selected"),this.isTabOverflowed(e.parent())?this.moreButton.attr({tabindex:"0"}):e.attr({"aria-selected":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each(function(e,t){var n=$(t).data("tabs");n&&n.handleResize&&"function"==typeof n.handleResize&&n.handleResize(!0)})},add:function(e,t,n){if(!e)return this;t||(t={});var i=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function a(f){if("string"===Ge(f)&&null!==f.match(/^#/g)){var m=$(f);f=m.length?m:f}return f}e="".concat(e.replace(/#/g,"")),t.name=t.name?t.name.toString():"&nbsp;",t.isDismissible=!!t.isDismissible&&!0===t.isDismissible,t.isDropdown=!!t.isDropdown&&!0===t.isDropdown,t.content&&(t.content=a(t.content)),t.dropdown&&(t.dropdown=a(t.dropdown));var s,o=$('<li class="tab" role="presentation"></li>'),c=$('<a id="#'.concat(e,'" href="#').concat(e,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat($e.escapeHTML(t.name),"</a>")),d=this.createTabPanel(e,t.content);o.html(c),t.isDismissible&&(s=$.createIconElement({icon:"close",classes:"close icon"}),_.addAttributes(s,this,t.attributes,"close-btn"),o.addClass("dismissible"),o.append(s)),this.settings.tabCounts&&c.prepend('<span class="count">0 </span>');var p=this.settings.attributes||[];if(Array.isArray(t.attributes)&&(p=p.concat(t.attributes)),p.length&&(_.addAttributes(c,this,p,"".concat(e,"-a")),_.addAttributes(d,this,p,"".concat(e,"-panel"))),function(f,m){var b,C=f.tablist.children("li"),T=C.not(".application-menu-trigger, .add-tab-button"),S=C.length-1;if(!C.length)return o.appendTo(f.tablist),void d.appendTo(f.container);var M=C.filter(".add-tab-button"),L=C.filter(".application-menu-trigger");(null==m||isNaN(m))&&(m=C.length),C.length>T.length&&(m>C.length-1&&M&&M.length&&(m-=1),m<=0&&L&&L.length&&(m+=1));var z=C.eq(m).length>0;b="insertAfter",z&&(b="insertBefore"),o[b](C.eq(S=z?m:S)),d.appendTo(f.container)}(this,n),this.panels=$(this.panels.add(d)),this.anchors=$(this.anchors.add(c)),c.data("panel-link",d),d.data("tab-link",c),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&c.on("beforeshow.toolbar",function(){return"yes"===c.data("cutoffTitle")}).tooltip({content:"".concat(c.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),i){if(this.positionFocusState(c),!this.activate(c.attr("href")))return this.triggerEventAfterTabAdded(e),this;c.focus()}return t.doActivate&&this.activate(c.attr("href")),this.triggerEventAfterTabAdded(e),this},remove:function(e,t){var n=this,i=this.doGetTab(null,e);if(!i||!i.length)return!1;var a=i.children("a"),s=this.getPanel(e),o=s&&s.length,c=this.tablist.children("li").index(i),d=".application-menu-trigger, .separator, .is-disabled",p=i.prev();if(!t&&!1===this.element.triggerHandler("beforeclose",[a]))return!1;var f=!1;i.hasClass("is-selected")?f=!0:p=$(this.tablist.children("li").not(d).filter(".is-selected")),o&&(this.panels=$(this.panels.not(s))),this.anchors=$(this.anchors.not(a)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&a.off("beforeshow.toolbar").data("tooltip").destroy();var m=i.data("popupmenu");i.hasClass("has-popupmenu")&&m&&(m.menu.children("li").each(function(){n.remove($(this).children("a").attr("href"))}),m.destroy());var b=i.closest(".dropdown-tab"),C=b.data("trigger");i.find(".icon").off().removeData().remove(),i.off(),a.off(),i.removeData().empty(),i.remove(),o&&(s.removeData().empty(),s.removeData(),s.remove());var T,S=a.data("moremenu-link");S&&(S.parent().off().removeData().remove(),a.removeData()),(T=b).length&&0===T.children("li:not(.separator)").length&&(p=this.getPreviousTab(C),setTimeout(function(){n.remove(C)},1)),C&&C.length&&C.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[i]);for(var M=c-1;M>-1;)M=-1,p.is(d)&&(p=this.tablist.children("li").not(d)[0],M-=1);if(p&&p.length||(p=this.tablist.children("li").not(d).first()),!p.length)return this.hideFocusState(),this.element.trigger("afterclose",[i]),this;var L=p.children("a"),z=L;return this.positionFocusState(L),f&&(p.is(".has-popupmenu")&&p.data("popupmenu")&&(z=p.data("popupmenu").menu.children().first().children("a")),!this.activate(z.attr("href")))||(L.focus(),this.element.trigger("afterclose",[i])),this},createTabPanel:function(e,t,n){e=e.replace(/#/g,"");var i=$('<div id="'.concat($e.stripTags(e),'" class="tab-panel" role="tabpanel"></div>'));return t instanceof $&&(t=t[0].outerHTML),ue.html(i[0],t||"","*"),!0===n&&this.container.append(i),this.panels=$(this.panels.add(i)),i},checkPopupMenuItems:function(e){function t(i){if(!i||!i.menu)return $();var a=i.menu.children("li");return a.length?a:(i.destroy(),$())}if(e.is(".has-popupmenu"))return t(e.data("popupmenu"));var n=e.closest(".dropdown-tab");return n.length?t(n.data("popupmenu")):$()},getTab:function(e,t){var n,i=this,a=$();return t instanceof $&&t.length>0?t.is("a")?t.parent():t:e?(n=$(e.currentTarget)).is(".tab")?n:n.closest(".tab").length?n.closest(".tab").first():null:t?function(s){if(!s||""===s||"#"===s)return null;-1===s.indexOf("#")&&(s="#".concat(s));var o=i.anchors.filter('[href="'.concat(s,'"]'));return o.length?o.parent():null}(t):a},doGetTab:function(e,t){return(e||t)&&(!e||e instanceof $.Event||"string"==typeof e)?e?"string"!=typeof e?this.getTab(e):this.getTab(null,e):this.getTab(null,t):$()},hide:function(e,t){var n=this.doGetTab(e,t);this.activateAdjacentTab(e,t),n.addClass("hidden");var i=$(this.element.find("li.tab.is-selected")[0]).find("a");return i[0]&&this.select(i[0].hash),this.positionFocusState(),this},show:function(e,t){this.doGetTab(e,t).removeClass("hidden");var n=$(this.element.find("li.tab.is-selected")[0]).find("a");return n[0]&&this.select(n[0].hash),this.positionFocusState(),this},disableTab:function(e,t){var n=this.doGetTab(e,t);return this.activateAdjacentTab(e,t),n.addClass("is-disabled"),this.positionFocusState(),this},enableTab:function(e,t){return this.doGetTab(e,t).removeClass("is-disabled"),this.positionFocusState(),this},rename:function(e,t,n){if(e&&"string"==typeof e&&(n=t,t=e),n){n=n.toString();var i,a=this.doGetTab(e,t),s=this.settings.tabCounts,o=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,c=a.hasClass("dismissible"),d=a.children("a");if(s&&(i=d.find(".count").clone()),d.text(n),this.popupmenu){var p="#"!==t.charAt(0)?"#".concat(t):t,f=this.popupmenu.menu.find('a[href="'.concat(p,'"]'));f.text(n),c&&f.append($.createIconElement({icon:"close",classes:"icon close"}))}s&&d.prepend(i),o&&d.data("tooltip").setContent(n.trim());var m=this.tablist.children("li").length<2?a:void 0;this.positionFocusState(m)}},updateCount:function(e,t,n){if(e&&"string"==typeof e&&(n=t,t=e),this.settings.tabCounts&&n){var i=this.doGetTab(e,t);i.children("a").find(".count").text("".concat(n.toString()," "));var a=this.tablist.children("li").length<2?i:void 0;this.positionFocusState(a)}},getActiveTab:function(){var e=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(e.first().attr("id"),'"]'))},getVisibleTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)||(t=t.add(n))}),t},getOverflowTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)&&(t=t.add(n))}),t},setOverflow:function(){var e,t,n,i=this,a=this.element[0],s=this.tablist[0],o=this.hasMoreButton(),c=this.isScrollableTabs();function d(){i.isModuleTabs()&&i.adjustModuleTabs()}d(),c?n=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(e=window.getComputedStyle(s,null),t=parseInt(e.getPropertyValue("height"),10)+1,n=s.scrollHeight>t),n?o||(a.classList.add("has-more-button"),d()):o&&(a.classList.remove("has-more-button"),d()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),n=this.tablist.find(".application-menu-trigger"),i=n.length>0,a=this.tablist.outerWidth(),s=120,o=i?n.outerWidth():0;if(t.children("a").removeAttr("style"),t.removeAttr("style").each(function(){var T=$(this);e.isTabOverflowed(T)&&(t=t.not(T))}),t.length){var c,d=window.getComputedStyle(t.eq(0).children()[0]),p=parseInt(d.paddingLeft,10)+parseInt(d.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(s=(a-o)/t.length-1)<120&&(s=120);for(var f="no",m=1===this.element.closest(".side-by-side").length,b=0;b<t.length;b++){(c=t.eq(b).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(f="no",parseInt(window.getComputedStyle(t[b]).width,10)>s-p&&(f="yes"),c.data("cutoffTitle",f));var C=0;"ios"===Ie.os.name&&Ie.devicespecs.isMobile&&m&&(C=25),t[b].style.width="".concat(s-C,"px"),c[0].style.width="".concat(s-C,"px")}this.adjustSpilloverNumber()}else this.moreButton[0].style.width="".concat(s=a-o+101,"px")},adjustSpilloverNumber:function(){var e=this.moreButton.find(".more-text"),t=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),n=this.getOverflowTabs();e.text("".concat(P.translate(t.length<=n.length?"Tabs":"More")));var i=this.moreButton.find(".count");i.length||(i=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(i)),i.text("".concat(n.length," "))},select:function(e,t){var n=e.replace(/#/g,""),i=this.getAnchor(n);this.positionFocusState(void 0,!1),this.activate(i.attr("href"))&&(this.changeHash(n),t||i.focus())},buildPopupMenu:function(e){var t=this;t.popupmenu&&(t.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var n=$("#tab-container-popupmenu"),i="";this.isScrollableTabs()&&(i=" is-selectable"),0===n.length?n=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(i,'">')).appendTo("body"):n.html("");var a=t.tablist.children("li"),s=P.isRTL();function o(b){var C=$(b),T=C.children("a");if(!C.is(":hidden")&&(t.isScrollableTabs()||t.isTabOverflowed(C)))if(C.is(".separator"))C.clone().appendTo(n);else{var S=C.clone(),M=S.children("a");if(S[0].classList.remove("tab"),S[0].classList.contains("is-selected")&&(S[0].classList.remove("is-selected"),t.isScrollableTabs()&&S[0].classList.add("is-checked")),S[0].removeAttribute("style"),S.children(".icon").off().appendTo(M),S.appendTo(n),C.data("moremenu-link",M),M.find(".icon-more").removeData().remove(),M.data("original-tab",T),M.onclick=void 0,C.is(".has-popupmenu")){var L=$("#".concat(b.getAttribute("aria-controls"))),z=L.clone(),V=z.children("li");z[0].classList.remove("has-popupmenu"),V.each(function(N){var U=$(this).children("a"),G=L.children("li").eq(N).children("a");U.data("original-tab",G),G.data("moremenu-link",U)}),z.insertAfter(M)}}}for(var c=0;c<a.length;c++)o(a[c]);t.tablist.children("li:not(.separator)").removeClass("is-focused");var d=1;this.isScrollableTabs()||(d=3),t.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:d},attributes:t.settings.attributes}),t.moreButton.addClass("popup-is-open"),t.popupmenu=t.moreButton.data("popupmenu"),t.positionFocusState(t.moreButton),t.moreButton.on("close.tabs",function(){$(this).off("close.tabs selected.tabs"),t.moreButton.removeClass("popup-is-open"),t.positionFocusState(void 0)}).on("selected.tabs",function(b,C){var T=C.attr("href"),S=T.substr(1,T.length),M=t.doGetTab(S)||$(),L=M?M.children("a"):$(),z=C.data("original-tab").parent();z.is(".add-tab-button")&&(z=(L=t.handleAddButton()).parent(),T=L.attr("href"),t.element.trigger("tab-added",[L])),t.activate(T),M.length&&L.length&&"function"==typeof L[0].onclick&&L[0].onclick.apply(L[0]),t.moreButton.focus(),t.scrollTabList(M)});var f=t.popupmenu.menu;function m(b){var C=$(this),T=C.closest("li");if(T.is(".dismissible")&&C.is(".close")){if(b.preventDefault(),b.stopPropagation(),T.is(".dismissible")&&T.is(".has-popupmenu")&&T.is(".submenu")){var S=T.find(".wrapper").children().children(),M=[];$.each(S,function(L,z){M.push(z.children[0].href)}),t.closeDismissibleTabs(M)}else t.closeDismissibleTab(T.children("a").attr("href"));t.popupmenu.close()}}f.on("destroy.popupmenu",function(){f.off(),t.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()}).on("touchend.popupmenu touchcancel.popupmenu",".icon",m).on("click.popupmenu",".icon",m),e?t.popupmenu.highlight(f.find('a[href="'.concat(e,'"]'))):t.tablist.children(".is-selected").length>0?t.popupmenu.highlight(f.find('a[href="'.concat(t.tablist.children(".is-selected").children("a").attr("href"),'"]'))):t.popupmenu.highlight(f.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",function(b){var C,T=b.which,S=$(b.target);function M(){return this===document.activeElement}switch(T){case 8:case 46:b.altKey&&S.parent().is(".dismissible")&&t.closeDismissibleTab(S.attr("href"));break;case 37:C=s?40:38,S.is("a")&&(S.parent().is(":not(:first-child)")&&b.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:C}));break;case 38:f.find("li:first-child > a").filter(M).length>0&&(b.preventDefault(),$(document).off(b),t.popupmenu.close(),t.findLastVisibleTab());break;case 39:C=s?38:40,S.is("a")&&!S.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:C});break;case 40:!function(){var L=f.find("li:last-child > a");if(L.filter(M).length>0&&L.parent().is(":not(.submenu)")){if(b.preventDefault(),$(document).off(b),t.popupmenu.close(),t.settings.addTabButton)return void t.addTabButton.focus();if(t.hasMoreActions())return void t.moreActionsBtn.focus();t.focusFirstVisibleTab()}}()}})},isTabOverflowed:function(e){if(this.isVerticalTabs()||this.isScrollableTabs()||this.tablist.find(".arrange-dragging").length)return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var t=Math.round(e[0].getBoundingClientRect().top),n=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(n+=1),t>n},findLastVisibleTab:function(){var e=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),t=e.first();if(this.isScrollableTabs())return e.last().find("a").focus();for(;!this.isTabOverflowed(t);)t=e.eq(e.index(t)+1);return e.eq(e.index(t)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},scrollTabList:function(e){if(this.tablistContainer&&e&&e instanceof $&&e.length){var t,n=ue.getDimensions(e[0]),i=ue.getDimensions(this.tablistContainer[0]),a=n.left,s=n.right;a<i.left+40&&(t=-1*Math.round(Math.abs(i.left-a))-40),s>i.right-40&&(t=Math.round(Math.abs(s-i.right))+40),0===t&&(t=void 0),this.tablistContainer.smoothScroll(t,250)}},hideFocusState:function(){this.focusState.removeClass("is-visible")},positionFocusState:function(e,t){var n=this;if(void 0!==e?e=$(e):n.moreButton.hasClass("is-selected")?e=n.moreButton:n.tablist.children(".is-selected").length>0&&(e=n.tablist.children(".is-selected").children("a")),!e||void 0===e||!e.length||e.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{e.is("a")&&(e=e.parent()),e.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var i,a,s,o,c,d,p,f=this.focusState[0],m=ue.getDimensions(e[0]),b=e[0].classList,C=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),T=this.isVerticalTabs(),S=P.isRTL(),M=T?0:this.moreButton.outerWidth(!0)-8,L=this.element,z=this.tablistContainer,V=L.parents(".composite-form").length,N=L.parents(".header.has-tabs").length,U=z&&this.focusState.parent().is(z),G=e[0].getBoundingClientRect().width/e[0].offsetWidth*100,Z=$('html[class*="classic-"]').length>0,oe=L.hasClass("alternate"),le=L.hasClass("header-tabs");i=m,s=z,o=G,p=(a=L)[0].getBoundingClientRect(),i.top-=p.top-2,T&&(i.top+=a[0].scrollTop),S?i.right=p.right-i.right:i.left-=p.left,s&&(d=s?Math.abs(s[0].scrollLeft):0,i.left+=d,i.right+=d,S&&!C&&(i.left-=M,i.right-=M),S&&V&&!N&&(i.right-=42,S&&(i.width+=1)),o<99&&(i.width=100*i.width/o,i.left=100*i.left/o,i.right=100*i.right/o),U&&(c=parseInt(window.getComputedStyle(a[0])["padding".concat(S?"Right":"Left")],10),i.left+=S?c:-1*c,i.right+=S?c:-1*c),i.right<0&&(i.right=0)),!C||T||n.isModuleTabs()||(i.top+=2),i.height-=4,Z||oe||!le||(i.top-=9),Z&&oe&&le&&(i.height-=4),m=i;var re="";Object.keys(m).forEach(function(_e){re.length&&(re+=" "),re+="".concat(_e,": ").concat(m[_e],"px;")}),f.style.cssText=re;var J=b.contains("is-selected")?"add":"remove";f.classList[J]("is-selected"),f.classList[!0===t?"add":"remove"]("is-visible");var ke=this.element.find(".application-menu-trigger, .tab");ke.length>0&&ke.hasClass("is-focused")&&f.classList.add("is-visible")}},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},disableOtherTabs:function(){return this.disable(!0)},disable:function(e){e||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var t=this,n=this.tablist.children("li:not(.separator)");e&&(n=n.filter(":not(.application-menu-trigger)")),n.each(function(){var i=$(this),a=i.children("a");if(!(e&&t.isActive(a.attr("href"))||((i.is(".is-disabled")||!0===a.prop("disabled"))&&t.disabledElems.push({elem:i,originalTabindex:i.attr("tabindex"),originalDisabled:a.prop("disabled")}),i.addClass("is-disabled"),a.prop("disabled",!0),i.is(".application-menu-trigger")||i.is(".add-tab-button")))){var s=$(a.attr("href"));s.addClass("is-disabled"),s.find("*").each(function(){var o=$(this);o.is("input.dropdown, input.multiselect")||(("-1"===o.attr("tabindex")||o.attr("disabled"))&&t.disabledElems.push({elem:o,originalTabindex:o.attr("tabindex"),originalDisabled:o.prop("disabled")}),o.disable())})}}),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!e&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var e=this;this.tablist.children("li:not(.separator)").each(function(){var t=$(this),n=t.children("a");if(t.removeClass("is-disabled"),n.prop("disabled",!1),!t.is(".application-menu-trigger")&&!t.is(".add-tab-button")){var i=$(n.attr("href"));i.removeClass("is-disabled"),i.find("*").each(function(){var a=$(this);a.enable&&"function"==typeof a.enable&&a.enable()}),$.each(e.disabledElems,function(a,s){var o=s.elem.is(".tab")?s.elem.children("a"):s.elem;s.elem.disable&&"function"==typeof s.elem.disable&&s.elem.disable(),s.elem.is("li")?s.elem.addClass("is-disabled"):s.elem.is("input.dropdown, input.multiselect")||(s.elem.attr("tabindex",s.originalTabindex),o.prop("disabled",s.originalDisabled))})}}),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(e){return this.remove(e)},closeDismissibleTabs:function(e){var t=this;e.forEach(function(n){var i=n.match(/#.*/);return t.remove(i[0])})},teardown:function(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var e=this.tablist.children("li");if(e.off().removeAttr("role").removeClass("is-selected"),e.filter(".has-popupmenu").each(function(){var n=$(this).data("popupmenu");n&&(n.menu.children("li:not(.separator)").each(function(){var i=$(this).children("a"),a=i.data("panel-link");$.removeData(i[0],"panel-link"),a&&a.length&&$.removeData(a[0],"tab-link")}),n.destroy())}),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),this.ro&&(this.ro.disconnect(),delete this.ro),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each(function(){var n=$(this).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy()}),this.element.off("focusout.tabs updated.tabs activated.tabs aftertabadded.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var t=this.moreButton.data("popupmenu");t.menu.find("li:not(.separator)").each(function(){var n=$(this).children("a");n.data("original-tab")&&$.removeData(n[0],"original-tab")}),t.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,$(".tab-panel input").off("error.tabs valid.tabs"),this.addTabButton&&(this.settings.addTabButtonTooltip&&this.addTabButton.data("tooltip").destroy(),this.addTabButton.remove(),this.addTabButton=void 0),this.element.find(".close.icon").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(e){return this.each(function(){var t=$.data(this,"tabs");t?t.updated(e):(t=$.data(this,"tabs",new Fo(this,e)),this.element=void 0)})},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(e){return this.each(function(){var t=$.data(this,"tag");t?t.updated(e):t=$.data(this,"tag",new pn(this,e))})},$.fn.taglist=function(e){return this.each(function(){var t=$.data(this,"taglist");t?t.updated(e):t=$.data(this,"taglist",new yn(this,e))})};var so={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null,attributes:null};function Qs(e,t){this.settings=_.mergeSettings(e,t,so),this.element=$(e),this.init()}Qs.prototype={init:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-def")?"input-md":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(e){return"number"==typeof e.selectionStart?0===e.selectionStart&&e.selectionEnd===e.value.length:void 0!==document.selection&&document.selection.createRange().text===e.value},isPrintable:function(e,t){return t?e>64&&e<91||e>=33&&e<=38||e>=40&&e<=43||126===e||58===e||60===e||e>=123&&e<=125||94===e||95===e||e>=62&&e<=64:13===e||e>=48&&e<=57||e>=97&&e<=122||59===e||61===e||e>=44&&e<=47||96===e||e>=91&&e<=93||39===e},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var e=this.element[0];this.settings.autoGrowMaxHeight&&(e.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),e.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var e=this.element[0],t=e.offSetHeight,n=this.settings.autoGrowMaxHeight||0,i=e.scrollHeight;if(n>0&&n<i){if(i=n,e.style.overflow="",t===i)return}else e.style.overflow="hidden";e.style.height="5px",e.style.height="".concat(e.scrollHeight+2,"px")}},countLinebreaks:function(e){return(e.match(/\n/g)||[]).length},updateCounter:function(){var e=this.element.val(),n=e.length+(this.isChrome||this.isSafari?this.countLinebreaks(e):0),i=this.getMaxLength(),a=parseInt(i,10)-n,s=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===P.translate("CharactersLeft")?"Characters Left":P.translate("CharactersLeft")).replace("{0}",a.toString());this.counter&&(n>=i?(s=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",i):P.translate("CharactersMax")+i,this.counter.text(s),this.counter.removeClass("almost-empty")):(this.counter.text(s),a<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.destroy(),this.init(),this.element.data("validate")&&this.element.validate()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var e=this,t=this;this.element.on("paste.textarea",function(n){var i=e.element[0].selectionStart,a=e.element[0].selectionEnd,s=e.element.val(),o=n.originalEvent.clipboardData.getData("text/plain"),c=t.getMaxLength(),d=(s.slice(0,i)+o+s.slice(a,s.length-1)).substring(0,c),p=t.isChrome||t.isSafari,f=p?t.countLinebreaks(d):0;if(d.length+(p?t.countLinebreaks(d):0)>c){var m=d.substring(0,c-f);t.element.val(m),t.updateCounter(),n.preventDefault()}}).on("keyup.textarea",function(n){var i=t.element.val(),s=i.length+(t.isChrome||t.isSafari?t.countLinebreaks(i):0),o=t.getMaxLength();return t.updateCounter(),s>=o?(n.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)}).on("focus.textarea",function(){t.counter&&t.counter.addClass("focus")}).on("updated.textarea",function(){t.updated()}).on("keypress.textarea",function(n){var i=t.element.val(),s=i.length+(t.isChrome||t.isSafari?t.countLinebreaks(i):0),o=t.getMaxLength();[97,99,118,120].indexOf(n.which)>-1&&(n.metaKey||n.ctrlKey)?t.updateCounter():t.isPrintable(n.which,n.shiftKey)&&s>=o&&!t.isSelected(this)&&n.preventDefault()}).on("blur.textarea",function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")})}},$.fn.textarea=function(e){return this.each(function(){var t=$.data(this,"textarea");t?t.updated(e):t=$.data(this,"textarea",new Qs(this,e))})},$.fn.toolbarsearchfield=$.fn.searchfield;var tc={};function Ho(e,t){this.settings=_.mergeSettings(e,t,tc),this.element=$(e),this.init()}Ho.prototype={init:function(){this.isIe="ie"===Ie.browser.name,this.isIeEdge="edge"===Ie.browser.name,this.handleEvents()},valMethod:function(e,t){switch(e.attr("type")){case"checkbox":case"radio":return e.prop("checked");case"file":if("boolean"==typeof t&&t){var n=e.attr("original");return void 0!==n?n:""}return e.parent().find('[type="text"]').val();default:if(e.is("textarea")&&1===e.closest(".editor-source").length){var i=e.is(":visible")?e.val():e.text();return this.trimEditorText(i)}return e.val()}},trimEditorText:function(e){return e.trim().replace(/>\s+</g,"><").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br(\s+)?\/?>/g,"<br>\n").replace(/<\/p>(\s+)/g,"</p>\n\n").replace(/<\/blockquote>(\s+)?/g,"</blockquote>\n\n").replaceAll("&nbsp;"," ")},getAbsolutePosition:function(e){var t=e.position();return e.parents().each(function(){if("relative"===window.getComputedStyle(this,null).position)return!1;t.left+=this.scrollLeft,t.top+=this.scrollTop}),{left:t.left,top:t.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===Ge(this.settings.d)){var e=this.settings.d;$(".icon-dirty, .msg-dirty",e.field).add(e.icon).add(e.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,tc)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function(){var e=this,t=this.element;if(t.is(".editor")){var n=t.parent().find("textarea");n.data("original",this.valMethod(n))}t.data("original",this.valMethod(t,!0)).on("resetdirty.dirty",function(){if(t.is(".editor")){var i=t.parent().find("textarea");i.data("original",e.valMethod(i))}t.data("original",e.valMethod(t)).triggerHandler("doresetdirty.dirty")}).on("change.dirty doresetdirty.dirty",function(i){var a,s=t,o=t.closest(".field, .radio-group"),c=$("label:visible",o),d={class:"",style:""};if(o.is(".field-fileupload")&&(s=o.find("input.fileupload-background-transparent")),o.is(".editor-container")&&(s=o.find(".editor-source")),c[0]||(c=t.next("label")),"true"===t.attr("data-trackdirty")){if(t.addClass("dirty"),t.is('[type="checkbox"], [type="radio"]')&&(d.class+=" dirty-".concat(t.attr("type")),d.class+=t.is(":checked")?" is-checked":""),t.is("select")&&(d.class+=" is-select",s=t.next(".dropdown-wrapper").find(".dropdown")),d.icon=s.prev(),null==d||null===(a=d?.icon)||void 0===a||!a?.is(".icon-dirty")){t.is(".colorpicker")&&!P.isRTL()&&(d.rect=e.getAbsolutePosition(t),d.style="left:".concat(d.rect.left,"px; top:").concat(d.rect.top,"px;")),d.icon='<span class="icon-dirty'.concat(d.class,'"></span>'),d.msg=P.translate("MsgDirty")||"",d.msg='<span class="audible msg-dirty">'.concat(d.msg,"</span>");var p=$($(s[0].parentElement).find("input")[0]);s=t.is('[type="radio"]')?p:s,0===$(s[0].parentElement).find(".icon-dirty").length&&(s.before(d.icon),c.append(d.msg),d.style&&s.prev(".icon-dirty")[0]&&(s.prev(".icon-dirty")[0].style.cssText=d.style)),d.icon=s.prev(),d.msg=c.find(".msg-dirty")}var f=t.data("original"),m=e.valMethod(t);if(d.field=o,e.settings.d=d,o.is(".editor-container")){var b=o.find("textarea");f=e.trimEditorText(b.data("original")),m=o.find(".editor-source").is(":visible")?b.val():b.text(),m=e.trimEditorText(m)}if(m===f||t.attr("multiple")&&_.equals(m,f))return t.removeClass("dirty"),$(".icon-dirty, .msg-dirty",o).add(d.icon).add(d.msg).remove(),void t.trigger("doresetdirty"===i.type?"afterresetdirty":"pristine");t.trigger("dirty")}})}},$.fn.trackdirty=function(e){return this.each(function(){var t=$.data(this,"trackdirty");t&&t instanceof Ho?t.updated(e):t=$.data(this,"trackdirty",new Ho(this,e))})};var qo={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null,expandTarget:"node",useExpandTarget:!1,expandIconOpen:"plusminus-folder-open",expandIconClosed:"plusminus-folder-closed",expandPlusminusRotate:!0,showChildrenCount:!1,childrenAutoCount:!0};function ro(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,qo),this.init()}function hd(e,t){var n=$(e),i=n.data("".concat("tree","Api"));if(i){var a={collapse:i.collapseNode,expand:i.expandNode};"function"==typeof a[t]&&a[t].apply(i,n)}}ro.prototype={init:function(){this.isIe11="ie"===Ie.browser.name&&"11"===Ie.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable(),this.childrenCountInit())},initTree:function(){var e=this,t=this.settings,n=this.element.find("a"),i=this.element.attr("data-selectable");t.useExpandTarget&&(t.expandTarget="icon"),t.selectable=void 0===i||"single"!==i.toLowerCase()&&"multiple"!==i.toLowerCase()?t.selectable:i,this.isMultiselect="multiple"===t.selectable,t.hideCheckboxes=t.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),n.each(function(){var a=$(this);e.decorateNode(a)})},initSelected:function(){var e=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(t){t.setAttribute("role","none"),e.setNodeStatus($(t.querySelector("a")))}),this.syncDataset()},focusFirst:function(){var e=this.element[0].querySelector("a");e&&e.setAttribute("tabindex","0")},setFocus:function(e){(e=this.isjQuery(e)?e[0]:e)&&(e.focus(),ue.removeClass(e,"hide-focus"))},decorateNode:function(e,t,n,i){var a,s=(e=this.isjQuery(e)?e:$(e))[0].getAttribute("data-badge"),o=e[0].getAttribute("data-alert-icon"),c=e.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,d=ue.hasClass(e[0],"is-disabled")||c;if(void 0!==s&&(s=_.parseSettings(e,"data-badge")),e[0].setAttribute("role","treeitem"),e[0].setAttribute("tabindex","-1"),e[0].setAttribute("aria-selected","false"),d){ue.addClass(e[0],"is-disabled"),e[0].setAttribute("aria-disabled","true");var p=e.next();p[0]&&"ul"===p[0].tagName.toLowerCase()&&ue.hasClass(p[0],"is-open")&&([].slice.call(p[0].querySelectorAll("a")).forEach(function(V){ue.addClass(V,"is-disabled"),V.setAttribute("aria-disabled","true")}),[].slice.call(e[0].parentNode.querySelectorAll("ul")).forEach(function(V){return ue.addClass(V,"is-disabled")}))}a=e.parentsUntil(this.element,"ul").length-1,e[0].setAttribute("aria-level",a+1);var f=e.parent().index();e[0].setAttribute("aria-posinset",f+1);var m=e.closest("li").siblings().length+1;e[0].setAttribute("aria-setsize",m);var b=e.next("ul"),C=!1;b[0]&&b.children().length>0&&(C=ue.hasClass(b[0],"is-open"),e[0].setAttribute("aria-expanded",C?"true":"false"));var T=e.contents().filter(function(){return!$(this).is(".tree-badge, .tree-children-count")}).text();e[0].textContent="",0===e.children("svg.icon-tree").length&&(e[0].insertAdjacentHTML("afterbegin",t||""===t?$.createIcon({icon:t,classes:["icon-tree"]}):$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:o,classes:["step-alert","icon-".concat(o)]}))),b[0]&&e[0].insertAdjacentHTML("beforeend",this.getExpandTargetHtml(C)),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==n||e[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var S=this.getBadgeHtml(s);""!==S&&e[0].insertAdjacentHTML("beforeend",S);var M=document.createElement("span");if(ue.addClass(M,"tree-text"),M.textContent=T,M.innerHTML.indexOf("&lt;svg")>0&&(M.innerHTML=$e.unescapeHTML(M.innerHTML)),e[0].appendChild(M),b[0]&&e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml(i)),this.hasIconClass(e)&&this.setTreeIcon(e.find("svg.icon-tree"),e[0].getAttribute("class")),b[0]&&"ul"===b[0].tagName.toLowerCase()){var L=e[0].getAttribute("class");if(this.settings.useExpandTarget&&L&&!i){var z=L.match(/(icon-)[^\s]+/g);z&&(i={icon:z[0]})}b[0].setAttribute("role","group"),ue.addClass(b[0].parentNode,"folder"),this.setFolderIcon(e,ue.hasClass(b[0],"is-open"),i),L&&-1===L.indexOf("open")&&-1===L.indexOf("closed")&&(d&&ue.addClass(e[0],"is-disabled"),this.setFolderIcon(e,ue.hasClass(b[0],"is-open"),i)),this.hasIconClass(e)&&(L=e[0].getAttribute("class"),(/open|close/g.test(L)||!b[0]||this.settings.useExpandTarget)&&this.setTreeIcon(e.find("svg.icon-tree"),ue.hasClass(b[0],"is-open")?L:L.replace("open","closed")))}e.hideFocus()},setTreeIcon:function(e,t){if(e&&"string"==typeof t){e=this.isjQuery(e)?e:$(e);var n=t.replace(/#?icon-|hide-focus|is-selected|is-active|\s?/gi,"");e.changeIcon(n)}},expandAll:function(e){var t=this,n=e;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(i){var a=i.previousElementSibling;if(ue.addClass(i.parentNode,"is-open"),ue.addClass(i,"is-open"),i.style.height="",a&&"a"===a.tagName.toLowerCase()){var s=a.querySelector("svg.icon-tree");t.setTreeIcon(s,t.settings.folderIconOpen),a.setAttribute("aria-expanded",!0),t.hasIconClass(a)&&t.setTreeIcon(s,a.getAttribute("class"))}})},collapseAll:function(e){var t=this,n=e;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(i){var a=i.previousElementSibling;if(ue.removeClass(i.parentNode,"is-open"),ue.removeClass(i,"is-open"),i.style.height=0,a&&"a"===a.tagName.toLowerCase()){var s=a.querySelector("svg.icon-tree");t.setTreeIcon(s,t.settings.folderIconClosed),a.setAttribute("aria-expanded",!1),ue.removeClass(a,"is-selected"),t.hasIconClass(a)&&t.setTreeIcon(s,a.getAttribute("class").replace("open","closed"))}})},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},selectNodeById:function(e){this.selectNodeByJquerySelector("#".concat(e))},selectNodeByJquerySelector:function(e){var t=this.isjQuery(e)?e:$(e);if(t.length&&!t.is(".is-disabled")){var n=t.parentsUntil(this.element,"ul[role=group]");this.expandAll(n),this.selectNode(t,!0)}},unSelectedNode:function(e,t){if(0!==e.length){var n=this;$("a",this.element).attr("tabindex","-1"),e.attr("tabindex","0"),$("a:not(.is-disabled)",e.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(e),this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(i){return ue.removeClass(i,"is-active")}),ue.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var i=e.data("jsonData")||{};n.element.triggerHandler("unselected",{node:e,data:i})},0)}},selectNode:function(e,t){var n,i=this,a=this.settings;0!==e.length&&("function"==typeof a.onBeforeSelect?(n=a.onBeforeSelect(e))&&n.done&&"function"==typeof n.done?n.done(function(s){s&&i.selectNodeFinish(e,t)}):n&&i.selectNodeFinish(e,t):i.selectNodeFinish(e,t))},selectNodeFinish:function(e,t,n){if((this.isMultiselect||"icon"===this.settings.expandTarget)&&n)if("click"===n.type||"touch"===n.type){if(ue.hasClass(n.target,"icon")&&ue.hasClass(e[0].parentNode,"folder"))return}else if("keydown"===n.type){var i=n.charCode||n.keyCode;if(37===i||39===i)return}var a=this,s=[].slice.call(this.element[0].querySelectorAll("a"));if(s.forEach(function(o){return o.setAttribute("tabindex","-1")}),e[0].setAttribute("tabindex","0"),this.isMultiselect)[].slice.call(e[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach(function(o){o.setAttribute("aria-selected","true"),ue.addClass(o,"is-selected"),ue.addClass(o.parentNode,"is-selected")});else{if(ue.hasClass(e[0],"is-selected"))return;s.forEach(function(o){var c=$(o),d=c.data("jsonData");d&&(delete d.selected,c.data("jsonData",d)),o.setAttribute("aria-selected","false"),ue.removeClass(o,"is-selected"),ue.removeClass(o.parentNode,"is-selected")}),e[0].setAttribute("aria-selected","true"),ue.addClass(e[0],"is-selected"),ue.addClass(e[0].parentNode,"is-selected")}this.syncNode(e),this.loading||this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(o){return ue.removeClass(o,"is-active")}),ue.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var o=e.data("jsonData")||{};a.element.triggerHandler("selected",{node:e,data:o})},0)},setNodeStatus:function(e){var t,n=this,i=e.data("jsonData");if(this.isMultiselect){var a=function(d,p){d.forEach(function(f){var m=$(f.querySelector("a")),b=n.getSelectedStatus(m,p);"mixed"===b?(ue.removeClass(f,"is-selected","is-partial"),ue.addClass(f,"is-partial")):b?(ue.removeClass(f,"is-selected","is-partial"),ue.addClass(f,"is-selected")):ue.removeClass(f,"is-selected","is-partial"),n.syncNode(m)})},s=!1;a(t=[].slice.call(e[0].parentNode.querySelectorAll("li.folder")),s),s=!(!t.length&&i&&!i.selected),t=e.parentsUntil(this.element,"li.folder"),a(t=[].slice.call(t.toArray()),s)}else{var o=e[0],c=o.parentNode;i&&i.selected?(ue.addClass(c,"is-selected"),ue.addClass(o,"is-selected"),o.setAttribute("aria-selected",!0)):(ue.removeClass(c,"is-selected","is-partial"),ue.removeClass(o,"is-selected","is-partial"),o.setAttribute("aria-selected",!1))}},getSelectedStatus:function(e,t){var n,i=0,a=0,s=0;return e.parent().find("a").each(function(o){t&&0===o||(i++,(n=$(this).data("jsonData"))&&n.selected?a++:s++)}),i===a||i!==s&&"mixed"},getNodeAsJQ:function(e){return"string"==typeof e?$("#".concat(e)):this.isjQuery(e)?e:$(e)},expandNode:function(e,t){var n=this.getNodeAsJQ(e),i=!this.isTrue(t);this.toggleNode(n,null,{isExpandNode:!0,noSelect:i})},collapseNode:function(e,t){var n=this.getNodeAsJQ(e),i=!this.isTrue(t);this.toggleNode(n,null,{isExpandNode:!1,noSelect:i})},toggleNode:function(e,t,n){var i,a=e.next(),s=this,o=this.settings;if(a[0]&&"ul"===a[0].tagName.toLowerCase()&&"group"===a[0].getAttribute("role")){var c=e.find("svg.icon-tree").getIconName(),d=function(m){if("function"==typeof o.onCollapse)(i=o.onCollapse(e))&&i.done&&"function"==typeof i.done?i.done(function(L){L&&!m&&s.selectNodeFinish(e,focus,t)}):i&&!m&&s.selectNodeFinish(e,focus,t);else if("icon"!==o.expandTarget||m)m||s.selectNodeFinish(e,focus,t);else{var b=e[0].parentNode;t&&ue.hasClass(t.target,"icon")&&ue.hasClass(b,"folder")&&s.selectNodeFinish(e,focus,t)}if(e.closest(".folder").removeClass("is-open"),c===o.folderIconOpen||o.useExpandTarget)s.setFolderIcon(e,!1,!1,o.expandPlusminusRotate);else if(/open|close/g.test(c)&&!o.useExpandTarget){var C=c.replace("open","closed");m||(C=C.replace(/\s?is-selected/,"")),s.setTreeIcon(e.find("svg.icon-tree"),C)}var T=e.closest(".folder a");if(s.hasIconClass(T)){var S=T.attr("class");if(/open|close/g.test(S)||o.useExpandTarget){var M=S.replace("open","closed");m||(M=M.replace(/\s?is-selected/,"")),s.setTreeIcon(T.find("svg.icon-tree"),M)}}s.isAnimating=!0,s.isMultiselect||"icon"!==!o.expandTarget||m||(s.unSelectedNode(e.parent().find("li.is-selected"),!1),ue.removeClass(e[0],"is-selected")),a.one("animateclosedcomplete",function(){ue.removeClass(a[0],"is-open"),s.isAnimating=!1}).animateClosed(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded")),s.element.triggerHandler("collapsed",{node:e,data:e.data("jsonData")})},p=function(m){if("function"==typeof o.onExpand)(i=o.onExpand(e))&&i.done&&"function"==typeof i.done?i.done(function(M){M&&!m&&s.selectNodeFinish(e,focus,t)}):i&&!m&&s.selectNodeFinish(e,focus,t);else if("icon"!==o.expandTarget||m)m||s.selectNodeFinish(e,focus,t);else{var b=e[0].parentNode;t&&ue.hasClass(t.target,"icon")&&ue.hasClass(b,"folder")&&s.selectNodeFinish(e,focus,t)}var C=e.data("jsonData");if(o.source&&C.children&&0===C.children.length){var T={node:e,data:e.data("jsonData")};return ue.addClass(e[0],"is-loading"),s.loading=!0,s.settings.source(T,function(M){var z=s.findById(C.id);z.children=M,s.addChildNodes(z,e.parent()),ue.removeClass(e[0],"is-loading"),s.loading=!1,s.accessNode(a,e),C.children=M,e.data("jsonData",C),e.data("".concat("tree","Api"),s),ue.hasClass(e[0].parentNode,"folder")&&s.childrenCountInit(e[0].parentNode),s.isMultiselect||"icon"!==!o.expandTarget||m||s.selectNode(e,!0),m||s.initSelected()}),void s.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})}if(c===o.folderIconClosed||o.useExpandTarget)s.setFolderIcon(e,!0,!1,o.expandPlusminusRotate);else if(/open|close/g.test(c)&&!o.useExpandTarget){var S=c.replace("closed","open");m||(S=S.replace(/\s?is-selected/,"")),s.setTreeIcon(e.find("svg.icon-tree"),S)}s.accessNode(a,e),s.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})};if("object"===Ge(n)&&function(m){var b=!1;if("boolean"==typeof m)b=!0;else if("string"==typeof m){var C=m.toLowerCase();"true"!==C&&"false"!==C||(b=!0)}return b}(n.isExpandNode))if(n.isExpandNode){p(n.noSelect);var f=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(f)}else d(n.noSelect);else ue.hasClass(a[0],"is-open")?d():p()}},accessNode:function(e,t){var n=this,i=t.attr("class");t.closest(".folder").addClass("is-open");var a=t.find("svg.icon-tree").getIconName();if(a===this.settings.folderIconClosed||this.settings.useExpandTarget?this.setFolderIcon(t,!0,!1,this.settings.expandPlusminusRotate):/open|close/g.test(a)&&!this.settings.useExpandTarget&&this.setTreeIcon(t.find("svg.icon-tree"),a.replace("closed","open").replace(/\s?is-selected/,"")),this.hasIconClass(i)){var s=e[0]&&"ul"===e[0].tagName.toLowerCase();(/open|close/g.test(i)||!s||this.settings.useExpandTarget)&&this.setTreeIcon(t.find("svg.icon-tree"),i.replace("is-selected",""))}this.isAnimating=!0,e.one("animateopencomplete",function(){n.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded"))},openNode:function(e,t){var n=this,i=t.data("jsonData");if(n.settings.source&&i.children&&0===i.children.length){var a={node:t,data:t.data("jsonData")};return t.addClass("is-loading"),n.loading=!0,void n.settings.source(a,function(s){var c=n.findById(i.id);c.children=s,n.addChildNodes(c,t.parent()),t.removeClass("is-loading"),n.loading=!1,n.accessNode(e,t),i.children=s,t.data("jsonData",i),t.data("".concat("tree","Api"),n),n.selectNode(t,!0),n.initSelected()})}n.accessNode(e,t)},hasIconClass:function(e){return"string"!=typeof e&&(this.isjQuery(e)&&(e=e.length>1?e.first()[0]:e[0]),e=e.getAttribute("class")),e&&e.indexOf("icon")>-1},closeNode:function(e,t){var n=this;n.setTreeIcon(t.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),n.settings.folderIconClosed),n.hasIconClass(t.closest(".folder a"))&&n.setTreeIcon(t.closest(".folder a").find("svg.icon-tree"),t.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),n.isAnimating=!0,n.isMultiselect||(n.unSelectedNode(t.parent().find("li.is-selected"),!1),t.removeClass("is-selected")),e.one("animateclosedcomplete",function(){e.removeClass("is-open"),n.isAnimating=!1}).animateClosed(),t.attr("aria-expanded","true"!==t.attr("aria-expanded"))},setupEvents:function(){var e=this;e.element.on("updated.tree",function(t,n){e.updated(n),e.initTree()})},handleKeys:function(){var e=this;this.element.on("click.tree","a:not(.is-clone)",function(t){var n=$(this),i=this.parentNode;return _.clearSelection(),ue.hasClass(n[0],"is-disabled")||ue.hasClass(n[0],"is-loading")||(e.isMultiselect||"icon"===e.settings.expandTarget?ue.hasClass(t.target,"icon")&&ue.hasClass(i,"folder")?e.toggleNode(n,t):ue.hasClass(i,"is-selected")||ue.hasClass(i,"is-partial")?e.unSelectedNode(n,!0):e.selectNode(n,!0):(e.selectNode(n,!0),e.toggleNode(n,t)),t.stopPropagation()),e.popupEl&&e.popupEl.data("popupmenu")&&(e.popupEl.data("popupmenu").close(),e.popupEl=null),e.syncDataset(),!1}),this.element.on("focus.tree","a",function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&ue.hasClass(this,"is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}}),this.element.on("keydown.tree","a",function(t){var n,i,a=t.charCode||t.keyCode,s=$(this);if(!e.isAnimating){if(40===a){var o=e.getNextNode(s);e.setFocus(o)}if(38===a){var c=e.getPreviousNode(s);e.setFocus(c)}if(32===t.keyCode&&s.trigger("click.tree"),37===a)return P.isRTL()?s.next().hasClass("is-open")?(i=s.next().find("a:first"),e.setFocus(i)):e.toggleNode(s,t):s.next().hasClass("is-open")?e.toggleNode(s,t):(i=s.closest(".folder").find("a:first"),e.setFocus(i)),t.stopPropagation(),!1;if(39===a)return P.isRTL()?s.next().hasClass("is-open")?e.toggleNode(s,t):(n=s.closest(".folder").find("a:first"),e.setFocus(n)):s.next().hasClass("is-open")?(n=s.next().find("a:first"),e.setFocus(n)):(e.toggleNode(s,t),e.setFocus(s)),t.stopPropagation(),!1;36===a&&(n=e.element.find("a:first:visible"),e.setFocus(n)),35===a&&(n=e.element.find("a:last:visible"),e.setFocus(n))}}),this.element.on("keypress.tree","a",function(t){var n=t.charCode||t.keyCode,i=$(this);if(n>=37&&n<=40||32===n)return t.stopPropagation(),!1;0!==t.which&&i.closest("li").nextAll().find("a:visible").each(function(){var a=$(this);if(a.text().substr(0,1).toLowerCase()===String.fromCharCode(t.which).toLowerCase())return e.setFocus(a),!1})})},loadData:function(e){if(!e)return-1;var t=this;t.element.empty(),t.loading=!0,e=this.arrangeDataset(e);var n="";t.jsonData=[];for(var i=0,a=e.length;i<a;i++)n+=t.getNodeHtml(e[i],i);t.element[0].insertAdjacentHTML("beforeend",n),[].slice.call(t.element[0].querySelectorAll('a[role="treeitem"]')).forEach(function(d,p){var f=$(d),m=t.jsonData[p];f.data("jsonData",m),f.data("".concat("tree","Api"),t),m.selected&&t.selectNode(f,m.focus),t.addAutomationAttributes(f,m),f.is(".hide-focus")&&f.hideFocus()});for(var s=[].slice.call(t.element[0].querySelectorAll("select.dropdown")),o=0;o<s.length;o++){var c=s[o];t.jsonData[o].disabled?$(c).dropdown().disable():$(c).dropdown().on("selected.tree",function(){var d=t.findById(this.parentElement.previousElementSibling.id);d.text=this.value,t.updateNode(d)})}t.jsonData=void 0,t.loading=!1,t.syncDataset(),t.initSelected(),t.focusFirst(),t.attachMenu(t.settings.menuId),t.createSortable(),this.childrenCountInit()},arrangeDataset:function(e){if(!this.hasKeyInData("parent",e))return e;e=e||this.settings.dataset;var t=JSON.parse(JSON.stringify(e));return function n(i){for(var a=0;a<i.length;a++)void 0!==i[a].parent&&(s=i[a],o=void 0,o=!1,function c(d){for(var p=0;p<d.length&&!o;p++)d[p].id===s.parent&&((f=d[p]).children=f.children||[],f.children.push(s),o=!0),void 0!==d[p].children&&c(d[p].children);var f}(t)),void 0!==i[a].children&&n(i[a].children);var s,o}(e),function n(i,a){for(var s=0;s<i.length;s++)void 0!==i[s].children&&n(i[s].children,i[s].id),void 0===a&&void 0!==i[s].parent||void 0!==a&&void 0!==i[s].parent&&a!==i[s].parent?(i.splice(s,1),s--):delete i[s].parent}(t),this.settings.dataset=t,t},hasKeyInData:function(e,t){for(var n=!1,i=function o(c){for(var d in c)if(c.hasOwnProperty(d)){var p=c[d];if("object"!==Ge(p)||n?e===d&&(n=!0):o(p),n)break}},a=0,s=(t=t||this.settings.dataset).length;a<s&&!n;a++)i(t[a]);return n},getNodeHtml:function(e,t,n,i){var a="",s="";n=n||0,t+=1;var o=this.settings,c=i||e.disabled||!1,d=e.children&&Array.isArray(e.children),p={id:void 0!==e.id?' id="'.concat(e.id,'"'):"",href:' href="'.concat(void 0!==e.href?e.href:"#",'"'),expanded:' aria-expanded="'.concat(e.open?"true":"false",'"'),icon:e.icon||""===e.icon?e.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==e.alertIcon?' data-alert-icon="'.concat(e.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(e.text,"</span>"),class:["hide-focus"],ariaDisabled:c?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==e.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===Ge(e.badge)?this.getBadgeHtml(e.badge):"",expandTarget:d?this.getExpandTargetHtml(e.open):"",childrenCount:d?this.getChildrenCountHtml(e):""};this.jsonData.push(e),o.useStepUI&&(p.alertIcon='<svg class="icon step-alert icon-'.concat(e.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(e.alertIcon,'"></use>'));var f=d?"folder":"";if(""!=(f+=e.selected?" is-selected":"")&&(f=' class="'.concat(f+=e.open?" is-open":"",'"')),c&&p.class.push("is-disabled"),e.icon&&(p.icon=e.icon,(!d||d&&/open|closed/i.test(e.icon))&&p.class.push(e.icon)),d&&(!o.useExpandTarget||o.useExpandTarget&&!e.icon)&&(e.open?(p.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon:o.folderIconOpen,i=c):p.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon.replace("open","closed"):o.folderIconClosed),p.icon="#icon-".concat(p.icon.replace(/^#?icon-?/,"")),p.class=' class="'.concat(p.class.join(" "),'"'),p.style="","dropdown"===e.type&&(p.style='style="display: none"',e.data)){a='<select class="dropdown" close-on-select="true">';for(var m=0;m<e.data.length;m++){var b=e.data[m];b.value===e.text?(s=b.text,a+='<option value="'.concat(b.value,'" selected>').concat(b.text,"</option>")):a+='<option value="'.concat(b.value,'">').concat(b.text,"</option>")}a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(s),a='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var C="\n      <li".concat(f,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(p.style,'\n          aria-level="').concat(n,'"\n          aria-position="').concat(t,'"\n          aria-setsize="').concat(t,'"\n          ').concat(p.id+p.href+p.class+p.expanded+p.ariaDisabled+p.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(p.icon,'"></use>\n            </svg>').concat(p.expandTarget+p.checkbox+p.alertIcon+p.badge+p.text+p.childrenCount,"\n        </a>\n        ").concat(a);if(d){C+='<ul class="folder'.concat(e.open?" is-open":"",'" role="group">');for(var T=0,S=e.children.length;T<S;T++)C+=this.getNodeHtml(e.children[T],T,n+1,i);C+="</ul>"}return C+"</li>"},getExpandTargetHtml:function(e){var t="";if(this.settings.useExpandTarget){var n=e?{icon:this.settings.expandIconOpen,class:"open"}:{icon:this.settings.expandIconClosed,class:"close"};t=$.createIcon({icon:n.icon,classes:["icon-expand-target","".concat("icon-expand-target","-").concat(n.class)]})}return t},getChildrenCountHtml:function(e){var t="";return this.settings.showChildrenCount&&(t='<span class="tree-children-count">\n          (<span class="tree-children-count-text">'.concat(this.getDataChildrenCount(e),"</span>)\n        </span>")),t},getDataChildrenCount:function(e){return e&&/string|number/.test(Ge(e.childrenCount))?parseInt(e.childrenCount,10):0},getActualChildrenCount:function(e){var t=0;if(e){var n=e.nextElementSibling;n&&"ul"===n.tagName.toLowerCase()&&(t=n.childElementCount)}return t},updateChildrenCount:function(e,t){if(e){var n=e.querySelector(".tree-children-count-text");n&&(0===(t=/string|number/.test(Ge(t))?parseInt(t,10):this.getActualChildrenCount(e))&&parseInt(n.textContent,10)>0&&"function"==typeof this.settings.source&&!ue.hasClass(e.nextElementSibling,"is-open")||(n.textContent=t))}},updateAutoChildrenCount:function(e){var t=this;this.settings.showChildrenCount&&e&&[].slice.call(e.querySelectorAll("a")).forEach(function(n){return t.updateChildrenCount(n)})},childrenCountInit:function(e){var t=this;e=this.isjQuery(e=e||this.element)?e[0]:e,this.settings.showChildrenCount&&e&&(this.settings.childrenAutoCount?this.updateAutoChildrenCount(e):[].slice.call(e.querySelectorAll("a[data-children-count]")).forEach(function(n){var i=n.getAttribute("data-children-count");void 0!==i&&t.updateChildrenCount(n,i)}))},setFolderIcon:function(e,t,n,i){var a=this.settings,s=this.isjQuery(e)?e:$(e);if(e=s[0]){var o,c={el:{tree:e.querySelector("svg.icon-tree"),expand:e.querySelector("svg.icon-expand-target")},icon:t?{tree:a.folderIconOpen,expand:a.expandIconOpen,rotate:"forward"}:{tree:a.folderIconClosed,expand:a.expandIconClosed,rotate:"backward"}};a.useExpandTarget?(o={el:c.el.expand,icon:c.icon.expand,rotateClass:"rotate-".concat(c.icon.rotate)},this.setTreeIcon(o.el,o.icon),i&&this.rotatePlusminus(o),(!(n=n||s.data("jsonData"))||n&&!n.icon)&&this.setTreeIcon((o={el:c.el.tree,icon:c.icon.tree}).el,o.icon)):this.setTreeIcon((o={el:c.el.tree,icon:c.icon.tree}).el,o.icon)}},rotatePlusminus:function(e){this.settings.useExpandTarget&&this.settings.expandPlusminusRotate&&(ue.addClass(e.el,e.rotateClass),$(e.el).one("webkitAnimationEnd.tree oAnimationEnd.tree msAnimationEnd.tree animationend.tree",function(){ue.removeClass(e.el,e.rotateClass)}))},getBadgeHtml:function(e){var t={html:"",style:"",class:["badge","tree-badge"]};return e&&!e.remove&&(t.text="",void 0!==e.text&&(t.text=e.text.toString(),1===t.text.length&&t.class.push("round")),/info|good|error|alert|pending/i.test(e.type)?t.class.push(e.type):e.type&&"#"===e.type.charAt(0)&&7===e.type.length&&(t.style="background-color: ".concat(e.type," !important;")),e.backColor&&(t.style="background-color: ".concat(e.backColor," !important;")),e.foreColor&&(t.style+="color: ".concat(e.foreColor," !important;")),""!==t.style&&(t.style=' style="'.concat(t.style,'"')),""!==t.text&&(e.type&&-1!==e.type.indexOf("pending")&&(t.text=""),t.html='<span class="'.concat(t.class.join(" "),'"').concat(t.style,">").concat(t.text,"</span>"))),t.html},addToDataset:function(e,t){var n,i,a;if(e.parent&&(n=this.findById(e.parent)),t instanceof jQuery&&t.is("li")){var s=(i=this.findById($(t[0].parentNode.parentNode).find("a")[0].id)).children||i.node.data("jsonData").children;a=s.findIndex(function(o){return o.text.trim()===$(t).text().trim()}),s.splice(a,0,e)}return"bottom"!==t||e.parent||n||this.settings.dataset.push(e),"top"!==t||e.parent||n||this.settings.dataset.unshift(e),e.parent&&n&&(n.children||(n.children=[]),"bottom"===t?n.children.push(e):n.children.unshift(e)),!(e.parent&&!n)},findById:function(e,t){for(var n in t||(t=this.settings.dataset),t){var i,a,s=t[n];if(s.id===e)return s;if(s.children||null!==(i=s.node)&&void 0!==i&&null!==(a=i?.data("jsonData"))&&void 0!==a&&a?.children){var o,c,d=this.findById(e,s.children||(null===(o=s.node)||void 0===o||null===(c=o?.data("jsonData"))||void 0===c||null==c?void 0:c.children));if(d)return d}}return null},getNodeByIdIfSelected:function(e,t){var n=this.findById(e,t);return n&&n.selected?n:null},getSelectedNodes:function(){var e,t,n=[];return $("li.is-selected",this.element).each(function(){e=$("a:first",this),t=e.data("jsonData"),n.push({node:e,data:t})}),n},getNextNode:function(e){var t=e.parent().next().find("a:first"),n=e.next();if(n.is("ul.is-open")&&(t=n.find("a:first")),t.hasClass("is-disabled")&&(t=t.parent().next().find("a:first")),0===t.length)for(var i=0,a=e;i<1e3&&!(t=(a=a.parent().closest(".folder")).next().find("a:first")).length;i++);return t.hasClass("is-disabled")&&(t=this.getNextNode(t)),t},getPreviousNode:function(e){var t=e.parent().prev().find("a:first"),n=t.parent();return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(t=n.find("ul.is-open a:last")),t.hasClass("is-disabled")&&(n=(t=t.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(t=n.find("ul.is-open a:last")),0===t.length&&(t=e.closest("ul").prev("a")),t.hasClass("is-disabled")&&(t=this.getPreviousNode(t)),t},syncDataset:function(e){var t=[],n=this;[].slice.call((e=e||this.element).children("li").toArray()).forEach(function(i){var a=i.querySelector("a");a&&t.push(n.syncNode(a))}),this.settings.dataset=t,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(e){var t,n=this,i=this.isjQuery(e)?e:$(e);if(e=i[0]){var a=e.parentNode,s=function(m,b){return ue.hasClass(m,b)};t={node:i,id:e.getAttribute("id"),text:e.querySelector(".tree-text").textContent},(s(e,"is-open")||a&&"li"===a.tagName.toLowerCase()&&s(a,"is-open"))&&(t.open=!0);var o=e.getAttribute("href");o&&(t.href=o),s(a,"is-selected")&&(t.selected=!0),s(e,"is-disabled")&&(t.disabled=!0);var c=e.getAttribute("class");c&&c.indexOf("icon")>-1&&(t.icon=c.replace(/\s?hide-focus\s?/g,""));var d=i.next();d[0]&&"ul"===d[0].tagName.toLowerCase()&&(t.children=[],[].slice.call(d.children("li").toArray()).forEach(function(m){var b=m.querySelector("a");b&&t.children.push(n.syncNode(b))}));var p=i.data("jsonData");p&&(delete p.selected,delete p.children,t=$.extend({},p,t));var f=_.parseSettings(i,"data-automation-attributes");f.attributes&&p&&(_.extend(p,f),this.addAutomationAttributes(i,p)),i.data("jsonData",t),i.data("".concat("tree","Api"),n)}return t},addAutomationAttributes:function(e,t){if((e=this.isjQuery(e)?e:$(e)).length&&t.attributes){var n=e.find(".tree-text"),i=e.find(".icon-tree"),a=e.find(".icon-expand-target"),s=e.find(".tree-checkbox");_.addAttributes(e,this,t.attributes,"tree-link"),_.addAttributes(n,this,t.attributes,"tree-link-text"),_.addAttributes(i,this,t.attributes,"tree-icon"),_.addAttributes(a,this,t.attributes,"tree-icon-expand-target"),_.addAttributes(s,this,t.attributes,"tree-checkbox")}},addNode:function(e,t,n){var i,a,s,o,c=this,d="object"===Ge(e.badge)?JSON.stringify(e.badge):e.badge;e.href=void 0!==e.href?e.href:"#",t=t||"bottom";var p=document.createElement("a");void 0!==e.id&&p.setAttribute("id",e.id),p.setAttribute("href",e.href),void 0!==d&&p.setAttribute("data-badge",d),void 0!==e.alertIcon&&p.setAttribute("data-alert-icon",e.alertIcon),e.text&&(p.textContent=/&#?[^\s].{1,9};/g.test(e.text)?$e.unescapeHTML(e.text):e.text),e.disabled&&ue.addClass(p,"is-disabled"),e.icon&&ue.addClass(p,e.icon);var f=document.createElement("li");if(f.setAttribute("role","none"),o=f,e.open&&ue.addClass(f,"is-open"),f.appendChild(p),"dropdown"===e.type&&(p.setAttribute("style","display: none"),e.data)){a='<select class="dropdown" close-on-select="true">';for(var m=0;m<e.data.length;m++)(s=e.data[m]).value===e.text?(i=s.text,a+='<option value="'.concat(s.value,'" selected>').concat(s.text,"</option>")):a+='<option value="'.concat(s.value,'">').concat(s.text,"</option>");a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(i),a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a,"</div>")).appendTo(f),e.disabled?$(f).find("select.dropdown").dropdown().disable():$(f).find("select.dropdown").dropdown().on("selected.tree",function(){var S=c.findById(this.parentElement.previousElementSibling.id);S.text=this.value,c.updateNode(S)})}var b,C=!!this.loading||this.addToDataset(e,t);if(e.parent instanceof jQuery&&(C=!0),t&&(b="string"!=typeof t||/^(top|bottom|before|after)$/g.test(t)?t instanceof jQuery?t:$(t):$(/\.|#/.test(t[0])?t:"#".concat(t)).first()).length&&("before"===n&&($(f).insertBefore(b.is("li")?b:b.closest("li")),C=!0),"after"===n&&($(f).insertAfter(b.is("li")?b:b.closest("li")),C=!0),"top"===n&&b.is("ul")&&(b.prepend(f),C=!0)),!(t instanceof jQuery)||e.parent&&C||e.parent instanceof jQuery||/^(top|bottom|before|after)$/g.test(n)||(t[0].appendChild(f),C=!0),"bottom"!==t||e.parent&&C||this.element[0].appendChild(f),"top"!==t||e.parent&&C||this.element.prepend(f),e.parent){var T="top"===t?t:null;C&&"string"==typeof e.parent&&(f=this.element.find("#".concat(e.parent)).parent(),!e.disabled&&f.is(".is-selected")&&void 0===e.selected&&(e.selected=!0),o=this.addAsChild(e,f,T)),e.parent&&e.parent instanceof jQuery&&(f=e.parent,e.parent.is("a")&&(f=e.parent.parent()),o=this.addAsChild(e,f,T)),this.isjQuery(f)&&(e.node=f.find("ul li a#".concat(e.id)))}else void 0!==e.tempidsparent&&(e.parent=e.tempidsparent,delete e.tempidsparent),f=$(f),this.addChildNodes(e,f),e.node=f.children("a").first();return p=$(p),this.decorateNode(p,e.icon,e.hideCheckbox,e),this.childrenCountInit(p.parentsUntil(this.element,".folder:last")),e.selected&&this.selectNode(p,e.focus),p.data("jsonData",e),p.data("".concat("tree","Api"),c),this.addAutomationAttributes(p,e),this.createSortable(),$(o)},addAsChild:function(e,t,n){var i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul"),a=!!i;return a||(t.insertAdjacentHTML("beforeend",'<ul class="folder" role="group"></ul>'),i=t.querySelector("ul")),e.open&&ue.addClass(i,"is-open"),a||this.decorateNode(t.querySelector("a")),void 0!==e.parent&&(e.tempidsparent=e.parent),e.parent="",this.addNode(e,$(i),n)},addChildNodes:function(e,t){var n=this,i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");e.children?(i||(t.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(e.open?" is-open":"",'" role="group"></ul>')),i=t.querySelector("ul")),i.innerHTML="",e.children&&e.children.forEach(function(a){return n.addNode(a,$(i))})):i&&i.parentNode.removeChild(i)},isTrue:function(e){return null!=e&&("boolean"==typeof e&&!0===e||"string"==typeof e&&"true"===e.toLowerCase())},isFalse:function(e){return null!=e&&("boolean"==typeof e&&!1===e||"string"==typeof e&&"false"===e.toLowerCase())},updateNode:function(e){var t=e.node?{node:e.node}:this.findById(e.id);if(t&&t.node[0]){var n,i=t.node[0].parentNode,a=t.node[0].querySelector(".tree-text"),s=this.isTrue(e.disabled)||this.isFalse(e.enabled),o=this.isTrue(e.enabled)||this.isFalse(e.disabled),c=null===e.children;if(e.badge){var d=t.node[0].querySelector(".tree-badge");if(!d&&!e.badge.remove&&void 0!==e.badge.text&&""!==$.trim(e.badge.text)){var p=document.createElement("span");ue.addClass(p,"tree-badge","badge"),a.parentNode.insertBefore(p,a),d=t.node[0].querySelector(".tree-badge")}d&&(void 0!==e.badge.text&&(e.badge.text=e.badge.text.toString(),d.textContent=e.badge.text,ue.removeClass(d,"round"),1===e.badge.text.length&&ue.addClass(d,"round")),void 0!==e.badge.type&&(ue.removeClass(d,"info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(e.badge.type)?ue.addClass(d,e.badge.type):"#"===e.badge.type.charAt(0)&&7===e.badge.type.length&&(d.style.backgroundColor=e.badge.type),-1!==e.badge.type.indexOf("pending")&&(d.textContent="")),t.badge=e.badge,this.parseBool(e.badge.remove)&&(d.parentNode.removeChild(d),void 0!==t.badge&&delete t.badge))}if(e.text&&(a.textContent=e.text,t.text=e.text),null===e.icon){var f=t.node[0].nextElementSibling;f&&"ul"===f.tagName.toLowerCase()?this.setFolderIcon(t.node[0],ue.hasClass(f,"is-open"),!1,this.settings.expandPlusminusRotate):this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),"icon-tree-node")}else if(e.icon){this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),e.icon),t.icon=e.icon;var m=t.node.data("jsonData");m&&(m.icon=e.icon,t.node.data("jsonData",m),t.node.data("".concat("tree","Api"),this))}else e.children&&e.children.length&&!ue.hasClass(i,"folder")&&this.convertFileToFolder(t.node);s&&(ue.addClass(t.node[0],"is-disabled"),t.node[0].setAttribute("aria-disabled","true"),ue.hasClass(i,"folder")&&ue.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(b){ue.addClass(b,"is-disabled"),b.setAttribute("aria-disabled","true")})),o&&(t.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0||(ue.removeClass(t.node[0],"is-disabled"),t.node[0].removeAttribute("aria-disabled"),ue.hasClass(i,"folder")&&ue.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(b){ue.removeClass(b,"is-disabled"),b.removeAttribute("aria-disabled")}))),e.childrenCount&&this.updateChildrenCount(t.node[0],e.childrenCount),e.node&&this.syncDataset(),(e.children||c)&&(null!==(n=e.children)&&void 0!==n&&n?.length?this.addChildNodes(e,i):this.removeChildren(e,i)),this.syncDataset(),this.createSortable()}},parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},removeChildren:function(e,t){var n=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");this.setTreeIcon(t.querySelector("svg.icon-tree"),e.icon||"icon-tree-node"),ue.removeClass(t,"folder","is-open"),n&&n.parentNode.removeChild(n)},removeNode:function(e){var t=this.findById(e.id),n=null;e instanceof jQuery?(n=(t=e).parentsUntil(this.element,".folder:last"),t.parent().remove()):t&&(n=t.node.parentsUntil(this.element,".folder:last"),t.node.parent().remove()),this.childrenCountInit(n),t&&this.syncDataset()},attachMenu:function(e){var t=this;function n(i,a){void 0===$(":focus")[0]&&null!=a&&a?.triggerElement&&a.triggerElement.focus()}e&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",function(i){var a=$(this);return i.preventDefault(),t.popupEl=$(i.currentTarget).popupmenu({menuId:e,eventObj:i,trigger:"immediate",attachToBody:!0,returnFocus:n}).off("selected").on("selected",function(s,o){t.element.triggerHandler("menuselect",{node:a,item:o})}),t.element.triggerHandler("menuopen",{menu:$("#".concat(e)),node:a}),!1})},createSortable:function(){if(this.settings.sortable){var e,t,n,i=this;if(i.targetArrow=i.element[0].previousElementSibling,i.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!i.targetArrow||i.targetArrow&&!ue.hasClass(i.targetArrow,"tree-drag-target-arrow")){var a=document.createElement("div");ue.addClass(a,"tree-drag-target-arrow"),i.element[0].parentNode.insertBefore(a,i.element[0]),i.targetArrow=i.element[0].previousElementSibling}t=setInterval(function(){i.loading||(clearInterval(t),[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(s){var o=$(s);o.data("drag")||o.on("mousedown.tree",function(c){c.preventDefault(),n=!(3===c.which||ue.hasClass(c.target,"icon")&&ue.hasClass(s.parentNode,"folder"))}).drag({clone:!0,cloneAppendTo:o.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",function(c,d,p){if(!p||!n)return ue.removeClass(s,"is-dragging"),void(p&&p[0].parentNode.removeChild(p[0]));(e=p)[0].removeAttribute("id"),ue.addClass(e[0],"is-dragging-clone"),[].slice.call(e[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach(function(m){return m.parentNode.removeChild(m)});var f=o.closest("ul");i.sortable={startIndex:$(i.linkSelector,i.element).index(o),startNode:o,startIcon:$("svg.icon-tree",o).getIconName(),startUl:f,startLi:o.closest("li"),startFolderNode:f.prev("a"),startWidth:o.outerWidth()},i.element.triggerHandler("sortstart",i.sortable),c.preventDefault(),c.stopImmediatePropagation()}).on("drag.tree",function(c,d){e&&(e[0].style.left="".concat(d.left,"px"),e[0].style.top="".concat(d.top,"px"),e[0].style.opacity="1",i.setDragOver(e,d))}).on("dragend.tree",function(c,d){var p;if(i.targetArrow.style.display="none",[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(b){return ue.removeClass(b,"is-over")}),e&&null!==(p=i.sortable)&&void 0!==p&&p?.overDirection){e[0].style.left="".concat(d.left,"px"),e[0].style.top="".concat(d.top,"px");var f=i.sortable.startNode.parent(),m=i.sortable.overNode.parent();"over"===i.sortable.overDirection?(ue.hasClass(m[0],"folder")||i.convertFileToFolder(i.sortable.overNode),m[0].querySelector("ul").appendChild(f[0]),ue.hasClass(m[0],"is-open")||i.toggleNode(i.sortable.overNode,c)):"up"===i.sortable.overDirection?f.insertBefore(m):"down"===i.sortable.overDirection&&(ue.hasClass(m[0],"is-open")&&ue.hasClass(m[0],"folder")?$("ul:first",m).prepend(f):f.insertAfter(m)),!i.sortable.startUl[0].querySelector("li")&&i.sortable.startFolderNode.data("oldData")&&"file"===i.sortable.startFolderNode.data("oldData").type&&i.convertFolderToFile(i.sortable.startFolderNode),_.fixSVGIcons(f),i.element.triggerHandler("sortend",i.sortable),i.syncDataset(),i.isMultiselect&&i.initSelected(),i.updateAutoChildrenCount(i.element[0]),delete i.sortable}})}))},10)}},setDragOver:function(e,t){var n,i,a,s,o,c,d,p,f,m,b,C,T=this,S=e[0].querySelector("svg.icon-tree"),M=T.element[0].getBoundingClientRect(),L=20;if(T.sortable){var z=function(){T.sortable.overNode=null,T.sortable.overIndex=null,T.sortable.overDirection=null,T.targetArrow.style.display="none",T.setTreeIcon(S,"icon-cancel")};t.top>M.top-L&&t.top<M.bottom+L&&t.left>M.left-L-T.sortable.startWidth&&t.left<M.left+M.height+L?(L=2,(d=[].slice.call(T.element[0].querySelectorAll(T.linkSelector))).forEach(function(V,N){if(b=null,p=V.getBoundingClientRect(),t.top>p.top-L&&t.top<p.bottom+L){if((o=$(V)).parentsUntil(T.element,".folder").filter(function(){return $("a:first",this).is(T.sortable.startNode)&&T.sortable.startLi.is(".folder")}).length)return void z();s=V.parentNode,f=p.left,c=o.closest("ul"),n=parseInt(s.style.marginTop,10)>0?2:0,i=N-1===T.sortable.startIndex&&c.is(T.sortable.startUl),a=N+1===T.sortable.startIndex&&c.is(T.sortable.startUl),d.forEach(function(U){return ue.removeClass(U,"is-over")}),C=function(){b?(T.setTreeIcon(S,T.sortable.startIcon),"over"===b?(T.targetArrow.style.display="none",ue.hasClass(V,"is-disabled")||ue.addClass(V,"is-over")):(d.forEach(function(U){return ue.removeClass(U,"is-over")}),m="up"===b?p.top-1.5-(ue.hasClass(s,"is-active")?3:0):p.bottom+(s.nextElementSibling&&ue.hasClass(s.nextElementSibling,"is-active")?-1:1.5)+n,T.targetArrow.style.left="".concat(f,"px"),T.targetArrow.style.top="".concat(m,"px"),T.targetArrow.style.display="block"),T.sortable.overNode=o,T.sortable.overIndex=N,T.sortable.overDirection=b):z()},N!==T.sortable.startIndex&&(t.left>p.left-L-T.sortable.startWidth&&t.left<p.right+L?b=!i&&t.top<p.top?"up":!a&&t.top>p.top+2*L?"down":"over":!i&&t.top<p.top?b="up":a||(b="down")),C()}})):z()}},convertFileToFolder:function(e){var t=$("svg.icon-tree",e),n=document.createElement("ul");n.setAttribute("role","group"),ue.addClass(n,"folder");var i={icon:t.getIconName(),type:"file"};if(this.hasIconClass(e)){var a=e.attr("class").replace(/\s?is-selected/,"");i.iconClass=a,this.settings.useExpandTarget||e.removeClass(a)}e.data("oldData",i);var s=e[0].parentNode;s&&"li"===s.tagName.toLowerCase()&&(ue.addClass(s,"folder"),s.appendChild(n)),t[0].insertAdjacentHTML("afterend",this.getExpandTargetHtml(!1)),e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml()),this.setTreeIcon(t,this.settings.folderIconClosed)},convertFolderToFile:function(e){var t=e.parent(".folder");t.removeClass("folder is-open"),$(".icon-expand-target, .tree-children-count",e).remove(),$("ul:first",t).remove(),t.length&&(this.setTreeIcon($("svg.icon-tree",e),e.data("oldData")?e.data("oldData").icon:"tree-node"),e.data("oldData")&&e.data("oldData").iconClass&&e.addClass(e.data("oldData").iconClass),e.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each(function(){var e=$(this),t=e.data("drag");e.off("mousedown.tree"),t&&t.destroy&&t.destroy()}),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,qo)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(e){ue.addClass(e,"is-disabled"),e.setAttribute("aria-disabled","true")})},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(e){ue.removeClass(e,"is-disabled"),e.removeAttribute("aria-disabled")})},preserveEnablementState:function(){var e=[].slice.call(this.element[0].querySelectorAll("a")),t=[];return e.forEach(function(n){ue.hasClass(n,"is-disabled")||!0===n.getAttribute("aria-disabled")?t.push({nodeId:n.id,state:"disabled"}):t.push({nodeId:n.id,state:"enabled"})}),this.settings.originalEnablementState=t,t},restoreEnablementState:function(){var e=this.settings,t=[].slice.call(this.element[0].querySelectorAll("a"));null!=e.originalEnablementState&&t.forEach(function(n){e.originalEnablementState.forEach(function(i){i.nodeId===n.id&&("disabled"===i.state?(ue.addClass(n,"is-disabled"),n.setAttribute("aria-disabled","true")):(ue.removeClass(n,"is-disabled"),n.removeAttribute("aria-disabled")))})})}},$.fn.tree=function(e){return this.each(function(){var t=$.data(this,"tree");t?t.updated(e):t=$.data(this,"tree",new ro(this,e))})},$.fn.collapse=function(){return this.each(function(){hd(this,"collapse")})},$.fn.expand=function(){return this.each(function(){hd(this,"expand")})};var Ss={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Tl(e,t){this.settings=_.mergeSettings(e,t,Ss),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Tl.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var e=mt.themeColors().palette;this.settings.colors=[e.azure[100].value,e.azure[90].value,e.azure[80].value,e.azure[70].value,e.azure[60].value,e.azure[40].value,e.azure[30].value,e.azure[20].value,e.amethyst[100].value,e.amethyst[90].value,e.amethyst[80].value,e.amethyst[70].value,e.amethyst[60].value,e.amethyst[50].value,e.amethyst[40].value,e.amethyst[40].value,e.amethyst[30].value,e.amethyst[20].value,e.turquoise[100].value,e.turquoise[90].value,e.turquoise[80].value,e.turquoise[70].value,e.turquoise[60].value,e.turquoise[50].value,e.turquoise[40].value,e.turquoise[40].value,e.turquoise[30].value,e.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(e){var t=this,n=Object.create(this.settings.margin),i=this.element.parent().width()-n.left-n.right,a=this.element.parent().height()-n.top-n.bottom,s=d3.scaleOrdinal().range(this.settings.colors);if(0!==e.length){_.addAttributes(this.element,e,this.settings.attributes,"",!0),this.settings.showTitle&&e.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(e.name),a-=35,n.top-=19);var o=d3.treemap().size([i,a]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(i+n.left+n.right,"px")).style("height","".concat(a+n.top+n.bottom,"px")).style("left","".concat(n.left,"px")).style("top","".concat(n.top,"px"));var c=d3.hierarchy(e,function(p){return p.children}).sum(function(p){return p.value}),d=o(c);this.total=d3.sum(d.leaves(),function(p){return p.value}),de.appendTooltip(),this.root.datum(c).selectAll(".chart-treemap-node").data(d.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",function(p){return"".concat(p.x0,"px")}).style("top",function(p){return"".concat(p.y0,"px")}).style("width",function(p){return"".concat(Math.max(0,p.x1-p.x0-1),"px")}).style("height",function(p){return"".concat(Math.max(0,p.y1-p.y0-1),"px")}).style("background",function(p){return p&&p.parent&&p.parent.data?s(p.parent.data.name):""}).call(function(p){p._groups.forEach(function(f){f.forEach(function(m){var b,C=m.__data__;_.addAttributes($(m),C,t.settings.attributes,null===(b=C.data.name)||void 0===b||null==b?void 0:b.toLowerCase(),!0)})})}).on("mouseenter.treemap",function(p){var f=this.getBoundingClientRect(),m=this.querySelector(".chart-treemap-percent").innerText,b=p.parent.data.tooltip;if(!(!b&&f.width>60&&f.height>50)){b=b?(b=b.replace("%percent%",m)).replace("{{percent}}",m):"<p><b>".concat(p.data.name," </b> ").concat(m,"</p>");var C=de.tooltipSize(b);de.showTooltip(f.left-C.width/2+12,f.top-C.height-6,b,"top")}}).on("mouseleave.treemap",function(){clearInterval(void 0),de.hideTooltip()}),this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-text").text(function(p){return p.data.name}),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text(function(p){return d3.format(t.settings.labelFormatter)(p.value/t.total)})}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var e=this;return this.element.on("updated.".concat("treemap"),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),function(){e.handleResize()}),this.element.on("resize.".concat("treemap"),function(){e.handleResize()})),$("html").on("themechanged.".concat("treemap"),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=_.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),de.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(e){return this.each(function(){var t=$.data(this,"treemap");t?t.updated(e):t=$.data(this,"treemap",new Tl(this,e))})},$.fn.virtualscroll=function(e){return this.each(function(){var t=$.data(this,"virtual-scroll");t?t.updated(e):t=$.data(this,"virtual-scroll",new _a(this,e))})},$.fn.weekview=function(e){return this.each(function(){var t=$.data(this,"weekview");t?t.updated(e):t=$.data(this,"weekview",new os(this,e))})};var pd={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function nc(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,pd),this.init()}function Vo(e,t,n,i,a,s){var o=a.placeholder;return o&&""===e?("[object Function]"==={}.toString.call(o)?o=o(t,n,i,a,s):s&&o in s&&(o=s[o]),o):""}function oo(e,t,n,i,a){var s,o=i?i.disabled:null;return"function"==typeof o?o(e,t,n,i,a):null!=(s=o)&&("boolean"==typeof s&&!0===s||"string"==typeof s&&"true"===s.toLowerCase())}nc.prototype={init:function(){this.namespace=_.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var e=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&e.ticks){for(var t=function(o,c){return o.replace(/{{(\w+)}}/g,function(d,p){return c[p]})},n={state:"",href:"#",label:""},i=0;i<e.ticks.length;i++){var a=t(e.ticksTemplate,$.extend({},n,e.ticks[i]));a=a.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var s=$(a);e.ticks[i].ngClick&&s.attr("ng-click",e.ticks[i].ngClick),this.bar.append(s)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach(function(o){o.classList.contains("is-disabled")&&["onclick","ng-click"].forEach(function(c){return o.removeAttribute(c)})}),this.header[0].style.opacity="1",this},setLabelsData:function(){var e=this,t=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],t.forEach(function(n){var i=n.textContent,a=n.getAttribute("data-shortlabel");a||(a=n.getAttribute("shortlabel"));var s={label:i,shortLabel:a,node:n,jqEl:$(n)};a&&"undefined"!==a||(n.removeAttribute("data-shortlabel"),n.removeAttribute("shortlabel"),delete s.shortLabel),e.labels.push(s)}),this},adjustLabels:function(){var e=this,t=this.header[0].getBoundingClientRect(),n=parseFloat(window.getComputedStyle(this.bar[0]).width),i=100/(this.labels.length-1)/100*n-15,a=[],s=[],o=function(b){delete b.isEllipsis,b.node.classList.remove("is-ellipsis"),b.node.style.width="",e.removeTooltip(b)},c=function(b){var C=e.labels[b].node;if(-1===a.indexOf(b)){var T=e.labels[b].shortLabel;T?(C.textContent=T,a.push(b),o(e.labels[b])):(C.classList.add("is-ellipsis"),C.style.width="".concat(i,"px"),e.setTooltip(e.labels[b]),e.labels[b].isEllipsis=!0)}C.style.left="-".concat((C.offsetWidth-C.parentNode.offsetWidth)/2,"px")},d=function(){var b=function(S,M,L){if(S.isEllipsis){var z=parseFloat(S.node.style.width)-M;S.node.style.width="".concat(z,"px"),S.node.style.left="-".concat((z-S.node.parentNode.offsetWidth)/2,"px")}else{var V=parseFloat(S.node.style.left)+M*(L?-1:1);S.node.style.left="".concat(V,"px")}},C=e.labels[0],T=C.node.rect||C.node.getBoundingClientRect();t.left>T.left&&b(C,t.left-T.left),T=(C=e.labels[e.labels.length-1]).node.rect||C.node.getBoundingClientRect(),t.right<T.right&&b(C,T.right-t.right,!0)};this.labels.forEach(function(b){var C=b.node;C.textContent=b.label,C.style.left="-".concat((C.offsetWidth-C.parentNode.offsetWidth)/2,"px"),o(b)}),d();var p=function(b,C){return!(b.right<C.left||b.left>C.right||b.bottom<C.top||b.top>C.bottom)},f=function(){e.labels.forEach(function(S){S.rect=S.node.getBoundingClientRect()}),s=[];for(var b=0,C=e.labels.length;b<C;b++)if(b<C-1){var T=b+1;p(e.labels[b].rect,e.labels[T].rect)&&s.push([b,T])}},m=50;do{f(),s.forEach(function(b){var S=e.labels[b[0]].node.offsetWidth>e.labels[b[1]].node.offsetWidth?0:1,M=b[S],L=S?b[0]:b[1];c(M),p(e.labels[M].rect,e.labels[L].rect)&&c(L)}),d(),f(),m--}while(s.length&&m>0);return d(),this.labels.forEach(function(b){delete b.isEllipsis,delete b.rect}),this},setTooltip:function(e){var t=this;e.jqEl.tooltip({content:e.label,placement:"bottom"}).on("blur.".concat("wizard"),function(){return t.removeTooltip(e)})},removeTooltip:function(e){var t=e.jqEl.data("tooltip");t&&(t.element.off("blur.".concat("wizard")),t.destroy())},positionTicks:function(){var e=this.ticks.length,t=100/(e-1);this.ticks.toArray().forEach(function(n,i){var o,a=(o=i)===e-1?100:t*o,s=P&&P.isRTL()?100-a:a;n.style.left="".concat(s,"%"),n.classList.contains("is-disabled")&&n.setAttribute("tabindex","-1")})},updateRange:function(){var e=function(i,a){return parseFloat(window.getComputedStyle(i)[a])},t=this.ticks.filter(".current").last(),n=0;return t.length&&(n=100*e(t[0],"left")/e(t.parent()[0],"width"),n=P&&P.isRTL()?100-n:n),this.completedRange[0].style.width="".concat(n,"%"),this},updated:function(e){return e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var e=this;return this.labels.forEach(function(t){e.removeTooltip(t),t.jqEl.off().removeData()}),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(e,t){return Sa(this.activate,this.select).apply(this,[e,t])},activate:function(e,t){if(void 0===e&&!t)return this;var n,i=this;if(void 0===e||null!=e&&e.type&&e.target||t||(t=e),t=void 0===t?(n=$(e.target)).is(".label")?n.parent():n:"number"==typeof t?i.ticks.eq(t):t,e&&(t.is("[disabled], .is-disabled")||!t.is("a")))return e.preventDefault(),e.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[t]))return this;var a=this.ticks.index(t);return this.ticks.removeClass("complete current").eq(a).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[t]),setTimeout(function(){i.element.trigger("afteractivated",[t])},300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat("wizard"),function(){t.updated()}),this.ticks.on("click.".concat("wizard"),function(n){t.activate(n,$(this))}),$("body").on("resize.".concat(this.namespace),function(){e.adjustLabels()}),this}},$.fn.wizard=function(e){return this.each(function(){var t=$.data(this,"wizard");t?t.updated(e):t=$.data(this,"wizard",new nc(this,e))})};var fd,gd,md,lo,xn={Text:function(e,t,n){return null==n||""===n?"":n.toString()},Input:function(e,t,n,i){return i.inlineEditor?'<label for="datagrid-inline-input-'.concat(e,"-").concat(t,'" class="audible">').concat(i.name,'</label><input id="datagrid-inline-input-').concat(e,"-").concat(t,'" class="').concat("right"===i.align?"is-number-mask":"",'" value="').concat(n,'">'):null==n||""===n?"":n.toString()},Placeholder:function(e,t,n,i,a){var s=Vo(n,e,t,n,i,a);return""!==s?'<span class="is-placeholder">'.concat(s,"</span>"):null==n||""===n?"":n.toString()},Ellipsis:function(e,t,n,i){var a=null==n||""===n?"":n.toString();return i.textOverflow="ellipsis",a},Password:function(e,t,n){return(null==n||""===n?"":n.toString()).replace(/./g,"*")},Readonly:function(e,t,n){return'<span class="is-readonly">'.concat(n??"","</span>")},RowNumber:function(e,t,n,i,a,s){var o,c=s.runningCount||1;return(null==s||null===(o=s?.pagerAPI)||void 0===o||null==o?void 0:o.activePage)>1&&(c+=(s.pagerAPI.activePage-1)*s.pagerAPI.settings.pagesize),'<span class="is-readonly">'.concat(c,"</span>")},Date:function(e,t,n,i,a,s){var o,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=n??"",p=c?null:i.dateFormat;return"string"==typeof n&&n?(o=P.parseDate(n,i.sourceFormat?"string"==typeof i.sourceFormat?{pattern:i.sourceFormat}:i.sourceFormat:"string"==typeof p?{pattern:p}:p))?d=P.formatDate(o,"string"==typeof p?{pattern:p}:p):"NaN/NaN/NaN"!==(d=P.formatDate(n,"string"==typeof p?{pattern:p}:p))&&d||""===d||(d=n):n&&(d=P.formatDate(n,"string"==typeof p?{pattern:p}:p)),i.editor&&!0!==a?'<span class="trigger">'.concat(d,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):d},Time:function(e,t,n,i,a){var s,o=n??"",c="object"===Ge(P)&&P.calendar().dateFormat?P.calendar().dateFormat.short:null,d="object"===Ge(P)&&P.calendar().timeFormat?P.calendar().timeFormat:null;return"string"==typeof n&&n?(s=P.formatDate(function(p){if(""===p)return null;var f=p.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===f)return null;var m=function(S){return isNaN(parseInt(S,10))?0:parseInt(S,10)},b=P.currentLocale.data.calendars[0].dayPeriods,C=new Date,T=m(f[1]);return(p.indexOf(b[0])>-1||p.indexOf(b[1])>-1)&&(T-=12===T?12:0,T+=p.indexOf(b[1])>-1?12:0),C.setHours(T),C.setMinutes(m(f[2])),C.setSeconds(m(f[3])),C}(n),{pattern:"".concat(c," ").concat(i.sourceFormat||i.timeFormat||d)}))&&(o=s.slice(s.indexOf(" "))):n&&(s=P.formatDate(n,{pattern:"".concat(c," ").concat(i.sourceFormat||i.timeFormat||d)}))&&(o=s.slice(s.indexOf(" "))),o=o.replace(/^\s/,""),i.editor&&!0!==a?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(e,t,n){return n??""},Lookup:function(e,t,n,i,a){var s=n??"",o=!1,c=Vo(s,e,t,n,i,a);return""!==c&&(o=!0),i.editor?(i.editorOptions&&"function"==typeof i.editorOptions.field&&(s=i.editorOptions.field(a,null,null),o=!1),null!=s&&""!==s||(s="",c&&(o=!0,s=c)),'<span class="trigger '.concat(o?"is-placeholder":"").concat("right"===i.align?"align-text-right":"",'">').concat(s,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):o?'<span class="is-placeholder">'.concat(c,"</span>"):s},Decimal:function(e,t,n,i,a){var s=n,o=/[\s]*($)?[#,0-9\s\.]+%?[\s]*/;void 0!==P&&null!=s&&""!==s&&o.test(s)&&(s=P.formatNumber(n,i.numberFormat));var c=Vo(s=null!=s&&"NaN"!==s&&o.test(s)?s:"",e,t,n,i,a);return""!==c?'<span class="is-placeholder">'.concat(c,"</span>"):s},Integer:function(e,t,n,i){var a=n;return void 0!==P&&null!=a&&""!==a&&(a=P.formatNumber(n,i.numberFormat||{style:"integer"})),null==a||"NaN"===a?"":a},Hyperlink:function(e,t,n,i,a,s){var o=oo(e,t,n,i,a)?" disabled":"",c=i.href||"#";if(i.href&&"function"==typeof i.href){if(null==(c=i.href(e,t,a,i)))return i.text||n}else c=c.replace("{{value}}",n);var d=i.text||n;return d||i.icon?i.icon?'<a href="'.concat(c,'"').concat(o,' class="btn-icon row-btn ').concat(i.cssClass||"",'" ').concat(s.settings.rowNavigation?'tabindex="-1"':"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:i.icon,file:i.iconFile}),'\n          <span class="audible">').concat(d,"</span>\n        </a>"):'<a href="'.concat(c,'"').concat(o," ").concat(s.settings.rowNavigation?'tabindex="-1"':"",' class="hyperlink ').concat(i.cssClass||"",'"').concat(i.target?' target="'.concat(i.target,'"'):"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">").concat(d,"</a>"):""},Template:function(e,t,n,i,a){var s=i.template,o="";return ui&&a&&s&&(o=ui.compile("{{#dataset}}".concat(s,"{{/dataset}}"),{dataset:a})),o},Drilldown:function(){var e=P.translate("Drilldown");return void 0===e&&(e=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(e,"</span>\n      </button>")},RowReorder:function(){var e=P.translate("ReorderRows");return void 0===e&&(e="Reorder Rows"),'<div class="datagrid-reorder-icon draggable">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(e,"</span>\n      </div>")},Checkbox:function(e,t,n,i,a,s){var o;o=i.isChecked?i.isChecked(n):void 0!==n&&(!0===n||1===parseInt(n,10));var c='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(P.translate(o?"Yes":"No"),"</span>"),d=s.wasJustUpdated;return s.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" class="datagrid-checkbox'.concat(o?" is-checked ".concat(d?" ":" no-animation"):"",'"></span>').concat(c,"</div>")},SelectionCheckbox:function(e,t,n,i,a,s){var o=void 0!==n&&!0===n;n||(o=s.isRowSelected(a));var c=" ";if(s.settings.columnIds.length>0)for(var d=0;d<s.settings.columnIds.length;d++)c+=a[s.settings.columnIds[d]];return c=$e.ensureAlphaNumericWithSpaces(c),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(i.name?i.name:P.translate("Select")+c,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(o?" is-checked no-animate":"",'"></span></div>')},SelectionRadio:function(e,t,n,i,a,s){var o=void 0!==n&&!0===n;n||(o=s.isRowSelected(a));var c=" ";if(s.settings.columnIds.length>0)for(var d=0;d<s.settings.columnIds.length;d++)c+=a[s.settings.columnIds[d]];return c=$e.ensureAlphaNumericWithSpaces(c),'<div class="datagrid-checkbox-wrapper"><span role="radio" aria-label="'.concat(i.name?i.name:P.translate("Select")+c,'" class="datagrid-radio datagrid-selection-radio ').concat(o?" is-checked":"",'"></span></div>')},Actions:function(e,t,n,i){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(i.menuId,'">\n        <span class="audible">').concat(i.title||P.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(e,t,n){return'<span class="datagrid-multiline-text">'.concat(n??"","</span>")},Editor:function(e,t,n,i){var a=n??"",s="is-editor";return s+=i.singleline?" is-singleline":" datagrid-multiline-text",'<div class="'.concat(s+=i.contentTooltip?" content-tooltip":"",'">').concat($e.unescapeHTML(a),"</div>")},Expander:function(e,t,n,i,a,s){var o=_.stringAttributes(s,s.settings.attributes,"btn-expand-row-".concat(e));return"<button ".concat(o,' type="button" aria-label="').concat(P.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(n?"<span> ".concat(n,"</span>"):"")},GroupRow:function(e,t,n,i,a,s){var o,c=s.settings.groupable,d={left:"",center:"",right:""},p=null!=s&&null!==(o=s?.settings)&&void 0!==o&&o?.rowReorder?this.RowReorder():"",f="",m=void 0===c.expanded||c.expanded;c.expanded&&"function"==typeof c.expanded&&(m=c.expanded(e,t,n,i,a,s));for(var b=0;b<c.fields.length;b++)f+=a[c.fields[b]]+(0===b?"":",");c.groupRowFormatter&&(f=c.groupRowFormatter(e,t,n,i,a,s));var C='<button type="button" class="btn-icon datagrid-expand-btn'.concat(m?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(m?" active":"",'"></span>\n    <span class="audible">').concat(P.translate("ExpandCollapse"),"</span>\n    </button>").concat(p,"<span> ").concat(f,"</span>");return d[s.getContainer(c.fields?c.fields[0]:"")]=C,d},GroupFooterRow:function(e,t,n,i,a,s){var o=s.settings.groupable,c={left:"",center:"",right:""},d=s.settings.frozenColumns.left.length,p=s.settings.frozenColumns.right.length,f=s.columnIdxById(o.aggregate),m=s.getContainer(o.aggregate);return c.left='<td role="gridcell" colspan="'.concat(d,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===m?a.sum:"<span>&nbsp;</span>","</div></td>"),c.center='<td role="gridcell" colspan="'.concat(f-d-p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===m?a.sum:"<span>&nbsp;</span>","</div></td>"),c.right='<td role="gridcell" colspan="'.concat(p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===m?a.sum:"<span>&nbsp;</span>","</div></td>"),o.groupFooterRowFormatter&&(c[m]=o.groupFooterRowFormatter(f,e,t,n,i,a,s)),c},SummaryRow:function(e,t,n,i){var a="",s=i.summaryText||"";return"after"===i.summaryTextPlacement&&(a=s,s=""),void 0!==P&&i.numberFormat&&null!=n&&""!==n&&(n=P.formatNumber(+n,i.numberFormat)),s+(null==n||""===n?"":n.toString())+a},Tree:function(e,t,n,i,a,s){var o=!a||a.expanded,c=s&&s.settings.treeDepth&&s.settings.treeDepth[e]?s.settings.treeDepth[e].depth:0,d=a&&a.isAllChildrenFiltered,p=d?" disabled":"";o&&d&&(o=!1);var f="extra-small"===s.settings.rowHeight||"small"===s.settings.rowHeight?24:27,m='<button type="button" class="btn-icon datagrid-expand-btn'.concat(o?" is-expanded":"",'" tabindex="-1"').concat(c?' style="margin-left: '.concat(c?"".concat(f*(c-1),"px"):"",'"'):"").concat(p,'>\n      <span class="icon plus-minus ').concat(o?" active":"",'"></span>\n      <span class="audible">').concat(P.translate("ExpandCollapse"),"</span>\n      </button>").concat(n?" <span>".concat(n,"</span>"):""),b=' <span class="datagrid-tree-node"'.concat(c?' style="margin-left: '.concat(c?"".concat(f*c,"px"):"",'"'):"",">").concat(n,"</span>");return a&&a[i.children?i.children:"children"]?m:b},ClassRange:function(e,t,n,i){var a=i.ranges,s="",o="";if(!a)return{};for(var c=0;c<a.length;c++)n>=a[c].min&&n<=a[c].max&&(s=a[c].classes,o=a[c].text?a[c].text:s.split(" ")[0]),n===$e.escapeHTML(a[c].value)&&(s=a[c].classes,o=a[c].text?a[c].text:n);return{classes:s,text:o}},Badge:function(e,t,n,i){var a=i.color,s=i.name;if(i.ranges){var o=xn.ClassRange(e,t,n,i);a=o.classes,s=o.text}return'<span class="badge '.concat(a,'">').concat(n,' <span class="audible">').concat(s,"</span></span>")},Tag:function(e,t,n,i){var a,s=xn.ClassRange(e,t,n,i);return null!=i&&null!==(a=i?.editorOptions)&&void 0!==a&&a?.clickable?'<span class="tag is-linkable hide-focus '.concat(s.classes,'"><a class="tag-content" href="#">#').concat(n,'</a><button class="btn-linkable" focusable="false" tabindex="-1">\n        <svg class="icon caret-right" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n      </button></span>'):'<span class="tag '.concat(s.classes,' hide-focus"><span class="tag-content">').concat(n,"</span></span>")},Alert:function(e,t,n,i){var a=xn.ClassRange(e,t,n,i),s=$.createIcon({icon:"".concat(a.classes),classes:["icon","datagrid-alert-icon","icon-".concat(a.classes)]});return"".concat(s,'<span class="datagrid-alert-text">').concat("value"===a.text?n:a.text,"</span>")},Image:function(e,t,n,i){return'<img class="datagrid-img" src="'.concat(n,'" alt="').concat(i.alt?i.alt:P.translate("Image"),'"').concat(i.dimensions?' style="height:'.concat(i.dimensions.height,";width:").concat(i.dimensions.height,'"'):"","/>")},Color:function(e,t,n,i){var a=xn.ClassRange(e,t,n,i),s=null==n||""===n?"":n.toString();return'<span class="'.concat(a.classes,'">').concat(s,"</span>")},Colorpicker:function(e,t,n,i){var a=null==n||""===n?"":n.toString();if(i.inlineEditor)return a;var s="swatch".concat(""===n?" is-empty":"");return(a='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(s,'" style="background-color: ').concat(n,'"></span><input class="colorpicker" id="colorpicker-').concat(t,'" name="colorpicker-').concat(t,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(n,'">'))+'<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(e,t,n,i,a,s){var o,c=oo(e,t,n,i,a)?" disabled":"";o=i.text?i.text:null==n||""===n?"":n.toString();var d='<button type="button"'.concat(c,' class="').concat(i.icon?"btn-icon":"btn-secondary"," row-btn ").concat(i.cssClass?i.cssClass:"",'"').concat(s.settings.rowNavigation?' tabindex="-1"':""," >");return i.icon&&(d+=$.createIcon({icon:i.icon,file:i.iconFile})),d+"<span>".concat(o,"</span></button>")},MultiSelect:function(e,t,n,i,a){var s,o,c,d=n,p=!1;if(i.options&&void 0!==n){("object"===Ge(s=i.caseInsensitive&&"string"==typeof n?n.toLowerCase():n)||Array.isArray(s))&&(d="");for(var f=0,m=i.options.length;f<m;f++){if(o=i.options[f],c=i.caseInsensitive&&"string"==typeof o.value?o.value.toLowerCase():o.value,("object"===Ge(s)||Array.isArray(s))&&i.editorOptions.multiple)for(var b=0;b<s.length;b++)i.options[f].value===s[b]&&(d+="".concat(o.label,", "));if(c===s){d=o.label;break}}d=d.replace(/,\s*$/,"")}var C=Vo(d,e,t,n,i,a);""!==C&&(p=!0,d=C);var T='<span class="trigger dropdown-trigger '.concat(p?"is-placeholder":"",'">').concat(d,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){T='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var S=0,M=i.options.length;S<M;S++){var z,L=i.options[S];z=void 0!==L.label?L.label:void 0!==L.value?L.value:"",T+="<option".concat(void 0===L.id?"":' id="'.concat(L.id,'"'),'  value="').concat(L.value,'"').concat(L.selected||L.value===s?" selected ":"",">").concat(z,"</option>")}T+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(d,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return T},Dropdown:function(e,t,n,i,a){var s,o,c=n,d=!1;if(i.options&&void 0!==n){s=i.caseInsensitive&&"string"==typeof n?n.toLowerCase():n;for(var p=0,f=i.options.length;p<f;p++)if(o=i.options[p],(i.caseInsensitive&&"string"==typeof o.value?o.value.toLowerCase():o.value)===s){c=o.label;break}}var m=Vo(c,e,t,n,i,a);""!==m&&(d=!0,c=m);var b='<span class="trigger dropdown-trigger '.concat(d?"is-placeholder":"",'">').concat(c,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){b='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var C=0,T=i.options.length;C<T;C++){var M,S=i.options[C];M=void 0!==S.label?S.label:void 0!==S.value?S.value:"",b+="<option".concat(void 0===S.id?"":' id="'.concat(S.id,'"'),'  value="').concat(S.value,'"').concat(S.selected||S.value===s?" selected ":"",">").concat(M,"</option>")}b+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(c,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return b},Fileupload:function(e,t,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor||(a=""===$.trim(a)?'<span class="trigger">'.concat(a,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(a,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),a},Spinbox:function(e,t,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor&&(a='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="').concat(n,'">\n        <span class="spinbox-control up">+</span></span>')),a},Favorite:function(e,t,n,i,a,s){var o;o=i.isChecked?i.isChecked(n):void 0!==n&&!0===n;var c=i.editor&&s.settings.editable;return o?'<span aria-label="'.concat(P.translate("Favorite"),'" class="icon-favorite').concat(c?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):i.showEmpty?'<span aria-label="'.concat(P.translate("Favorite"),'" class="icon-favorite').concat(c?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(e,t,n,i,a){return a&&a.rowStatus?"".concat($.createIcon({icon:a.rowStatus.icon,classes:["icon","icon-".concat(a.rowStatus.icon)]}),'<span class="audible">').concat(a.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(e,t,n,i){var a=P.formatNumber(100*n,i.numberFormat||{minimumFractionDigits:2,maximumFractionDigits:2}),s=a.replace(",","."),o="".concat(a,"%"),c=xn.ClassRange(e,t,s,i),d=i.target;i.text&&(o=(o=(o=(o=(o=(o=(o=i.text).replace("{{value}}",n)).replace("<% value %>",n)).replace("<%value%>",n)).replace("{{percent}}",a)).replace("<% percent %>",a)).replace("<%percent%>",a),i.showPercentText=!0);var p=i.ranges&&c.classes?c.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(d||0,'%;"></div>\n              <div class="completed bar ').concat(p,'" style="width: ').concat(s,'%;"></div>\n              ').concat(i.showPercentText?'<div class="chart-targeted-text l-center">'.concat(o,"</div>\n            </div>"):'<div class="audible">'.concat(a,"%</div>"))},ProcessIndicator:function(e,t,n){if(!n.steps)return"";for(var i='<div class="process-indicator compact responsive"><div class="display">',a=0;a<n.steps;a++)i+='<div class="step">\n        <div class="lines">\n          <span class="indicator '.concat(a===(null==n||null==n?void 0:n.current)-1?" current processing":""," ").concat(a<(null==n||null==n?void 0:n.current)?" darker":"",'"></span>\n          <span class="separator ').concat(a<(null==n||null==n?void 0:n.current)?" darker":"",'"></span>\n        </div>\n      </div>');return i+"</div></div>"}},Fa={cleanExtra:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(S){var M=function(z){z.parentNode&&z.parentNode.removeChild(z)},L=[];return[].slice.call(S[0].querySelectorAll("tr")).forEach(function(z){z.classList.contains("is-hidden")||z.classList.contains("datagrid-expandable-row")?M(z):[].slice.call(z.querySelectorAll("th, td, div, span")).forEach(function(V){if(V.classList.contains("is-hidden"))M(V);else{var N=V.getAttribute("data-exportable");if(N&&"no"===N){var U=V.id.match(/-header-\d+/g);return U=(U=U?U[0].match(/\d+/g):null)?U[0]:V.id.slice(-1),U=parseInt(U,10),L.push(U+1),void M(V)}var G=V.getAttribute("aria-colindex");if("td"===V.tagName.toLowerCase()&&G&&-1!==L.indexOf(parseInt(G,10)))M(V);else{for([].slice.call(V.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach(function(oe){return M(oe)});V.attributes.length>0;)V.removeAttribute(V.attributes[0].name);var Z=V.textContent;"="===Z.substr(0,1)&&""!==Z.substr(1,1)&&(V.textContent="'".concat(Z,"'"))}}})}),S},a=[];if(!t&&e)a=Fa.datasetToHtml(e,n);else{var s=t.settings.groupable?t.originalDataset:t.settings.dataset,o=t.table.clone(!0);(t.settings.frozenColumns.left.length||t.settings.frozenColumns.right.length)&&o.find(".datagrid-header tr:first()").html(t.headerNodes().clone(!0)),a=Fa.appendRows(s,o[0],t,n)}if(!e&&!a[0].querySelector("thead")){for(var c=a[0].querySelector("tbody"),d=a[0].createTHead(),p=d.insertRow(0),f=t.headerNodes(),m=0;m<f.length;m++){var b=f[m],C=p.insertCell(m);C.innerHTML=b.querySelector(".datagrid-header-text").textContent.trim(),C.setAttribute("class",b.classList),C.setAttribute("id",b.getAttribute("id")),b.getAttribute("data-exportable")&&C.setAttribute("data-exportable",b.getAttribute("data-exportable"))}c.parentNode.insertBefore(d,c)}if(a=i(a),t&&t.settings.exportConvertNegative){var T=[].slice.call(a[0].querySelectorAll("td"));T.forEach(function(S){S.textContent=S.textContent.replace(/^(.+)(-$)/,"$2$1")})}return a},save:function(e,t,n){var i=(t.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],a="string"==typeof i&&/\b(xlsx|xls)\b/g.test(i),s=new Blob([e],{type:"application/csv;charset=utf-8;"});if(n&&!a){for(var o=[255,254],c=0;c<e.length;++c){var d=e.charCodeAt(c);o.push(255&d),o.push(d/256>>>0)}s=new Blob([new Uint8Array(o)],{type:"text/plain;charset=UTF-16LE;"})}if(window.URL.createObjectURL){a&&(s=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8;"}));var p=URL.createObjectURL(s),f=document.createElement("a");f.href=p,f.download=t,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)}else{var m=document.createElement("a");m.href=this.base64(e),m.download=t,document.body.appendChild(m),m.click(),document.body.removeChild(m)}},datasetToHtml:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="<tbody>",i=function(o,c){n+="<tr>",Object.keys(e[o]).forEach(function(d,p){var f=e[o];if(t&&"id"!==d&&!d.includes("Id"))if(isNaN(f[d])){var m=Date.parse(f[d]);isNaN(m)||(f[d]=P.formatDate(m))}else{var b=parseFloat(f[d]);f[d]=P.formatNumber(b,{style:Number.isInteger(b)?"integer":"decimal"})}f&&Object.prototype.hasOwnProperty.call(f,d)&&(n+="<td>".concat(f[d],"</td>"))}),n+="</tr>"},a=0,s=e.length;a<s;a++)i(a);return n=$e.sanitizeHTML(n+="</tbody>"),$("<table></table>").append(n)},appendRows:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function(p){return p&&(p instanceof jQuery||p.constructor.prototype.jquery)},s=a(t)?t:$(t),o="",c=(t=s[0]).querySelector("tbody");c.innerHTML="";var d=function p(f,m){if(!f._isFilteredOut){var b=n.rowHtml(f,m,m,!1,!1,m,!0,i),C=document.createElement("tr");if(C.innerHTML=b.left+b.center+b.right,o+=C.outerHTML,f.children)for(var T=0,S=f.children.length;T<S;T++)p(f.children[T],T)}};return e.forEach(function(p,f){d(p,f)}),o=$e.sanitizeHTML(o),c.insertAdjacentHTML("beforeend",o),s},base64:function(e){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(e)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(e)))},copyToDataSet:function(e,t,n,i,a){for(var s=function(T,S,M,L){for(var z=0,V=T.length;z<V;z++){var N=S.columns[L];N.formatter!==xn.Readonly&&("input"===N.editor.name?("integer"===N.filterType||"decimal"===N.filterType||"number"===N.filterType)&&isNaN(T[z].trim())||(M[N.field]=T[z]):"input"===N.editor.name&&(isNaN(Date.parse(T[z]))||(M[N.field]=new Date(T[z])))),L++}},o=e.length,c=a.settings.columns.length,d=0;d<o;d++){var p=e[d].split("\t"),f=n;if(t<i.length)s(p,a.settings,i[t],f);else{for(var b={},C=0;C<c;C++)b[a.settings.columns[C].field]="";s(p,a.settings,b,f),i.push(b)}t++}a.renderRows(),a.syncSelectedUI(),a.pagerRefresh("bottom")},exportToExcel:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>',o=function(p,f){return p.replace(/{(\w+)}/g,function(m,b){return f[b]})},c=Fa.cleanExtra(n,a,i),d={worksheet:t||"Worksheet",table:c[0].innerHTML};e="".concat(e||a.element[0].id||"Export",".xls"),Fa.save(o(s,d),e)},exportToCsv:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s=function(T){return T&&"object"===Ge(T)&&T.constructor===Object},o=function(T){return/^(false|0+|null)$/gi.test(T)},c={firstLine:!0,char:",",flexChar:!0,flexUtf8:!0};if("sep=,"!==n&&!o(n)){var d=function(T){return'"'!==T?T:c.char};if(s(n))c.firstLine=!o(n.firstLine),c.flexChar=!o(n.flexChar),c.flexUtf8=!o(n.flexUtf8),"string"!=typeof n.char||1!==n.char.length||o(n.char)||(c.char=d(n.char));else if("string"==typeof n)if(1!==n.length||o(n)){if(/^sep=.$/.test(n)){var p=n.replace("sep=","");c.char=o(p)?c.char:d(p)}}else c.char=d(n)}var f=function(T,S){var M=S&&c.flexChar?"\t":c.char,L=[];return[].slice.call(T[0].querySelectorAll("tr")).forEach(function(z){var V=[];[].slice.call(z.querySelectorAll("td, th")).forEach(function(N){return V.push(N.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())}),L.push(V.join('"'.concat(M,'"')))}),c.firstLine&&(c.flexUtf8&&!S||!c.flexUtf8&&","!==c.char)&&L.unshift(["sep=".concat(c.char)]),"".concat(c.flexUtf8?"":"\ufeff",'"').concat(L.join('"\n"'),'"')},m=Fa.cleanExtra(t,a,i),b=!/^[\u0000-\u007f]*$/.test(m[0].textContent)&&c.flexUtf8,C=f(m,b);e="".concat(e||a.element[0].id||"Export",".csv"),Fa.save(C,e,b)}},Oi=(fd=_.equals,gd=function(e,t){return e.reduce(function(n,i){var a,s=function(o,c){for(var d={},p=0,f=c.length;p<f;p++)d[c[p]]=o[c[p]];return d}(i,t);return a=s,n.some(function(o){return fd(o,a)})||n.push(s),n},[])},md=function(e,t){var n=[];return e.map(function(i,a){for(var s in t)if(t[s]!==i[s])return;i.idx=a,n.push(i)}),n},(lo=function(e,t){return gd(e,t).map(function(n){return{key:n,values:md(e,n).map(function(i){return i})}})}).register=function(e,t){return lo[e]=function(n,i,a){return this.extra=a,lo(n,i).map(t,this)}},lo);Oi.register("none",function(e){return $.extend({},e.key,{values:e.values})}),Oi.register("sum",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return null!=i});return $.extend({},e.key,{values:e.values},{sum:n.reduce(function(i,a){return Number(i)+Number(a)},0)})}),Oi.register("max",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{max:Math.max.apply(Math,Un(e.values.map(function(n){return n[t]}).filter(function(n){return null!=n})))})}),Oi.register("min",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{min:Math.min.apply(Math,Un(e.values.map(function(n){return n[t]}).filter(function(n){return null!=n})))})}),Oi.register("avg",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return null!=i});return $.extend({},e.key,{values:e.values},{avg:n.reduce(function(i,a){return Number(i)+Number(a)},0)/n.length})}),Oi.register("count",function(e){var t=this.extra,n=e.values.map(function(i){return i[t]}).filter(function(i){return null!=i});return $.extend({},e.key,{values:e.values},{count:n.length})}),Oi.register("list",function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{list:e.values.map(function(n){for(var i=[],a=0,s=t.list.length;a<s;a++)n[t.list[a]]&&(!t.exclude||!n[t.exclude])&&i.push({value:n[t.list[a]],key:t.list[a]});return i})})});var vd={aggregate:function(e,t){for(var n={},i=this,a=0,s=t.length;a<s;a++)t[a].aggregator&&function(){var o=t[a].field;i.sum=function(m,b){if(b._isFilteredOut)return m;var C;C=o.indexOf(".")>-1?o.split(".").reduce(function(M,L){return M?M[L]:""},b):b[o],C=Number(C);var T=fs.decimalPlaces(C),S=fs.decimalPlaces(m);return Number((m+C).toFixed(Math.max(T,S)))};var c=e.reduce(i[t[a].aggregator],0);if(o.indexOf(".")>-1)for(var d=n,p=0,f=o.split(".").length;p<f;p++)p===o.split(".").length-1?d[o.split(".")[p]]=c:(o.split(".")[p]in d||(d[o.split(".")[p]]={}),d=d[o.split(".")[p]]);else n[o]=c}();return n}},co="lookup-datagrid";function ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=[];return null!=e&&e?.length||null!=t&&t?.length?null!=t&&t?.length?e.length?(e.forEach(function(a){var s=t.find(function(o){return o.name===a.name});i.push(s||{name:a.name,value:"".concat(a.value,"-").concat(n)})}),i):t:i=e.map(function(a){return{name:a.name,value:"".concat(a.value,"-").concat(n)}}):i}var bd={click:null,field:"id",title:null,icon:"icon-search-list",buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null,clearable:!1,attributes:null,tabbable:!0,dblClickApply:!1,allowDuplicates:!1};function ac(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,bd),this.init()}function yd(e,t,n,i,a,s,o,c,d){if(s.align&&e.addClass("l-".concat(s.align,"-text")),s.maxLength&&e.attr("maxlength",s.maxLength),s.uppercase&&e.addClass("uppercase-text"),s.mask&&"function"==typeof s.mask){var p=s.mask(t,n,i,s,d);e.mask({pattern:p,mode:s.maskMode})}else if(s.maskOptions&&"function"==typeof s.maskOptions){var f=s.maskOptions(t,n,i,s,d);e.mask(f)}else s.mask&&e.mask({pattern:s.mask,mode:s.maskMode});var m={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:P.currentLocale.data.numbers?P.currentLocale.data.numbers.group:",",decimal:P.currentLocale.data.numbers?P.currentLocale.data.numbers.decimal:".",negative:P.currentLocale.data.numbers?P.currentLocale.data.numbers.minusSign:"-"}},process:"number"},b=!1;s.maskOptions&&(b=!0),s.numberFormat&&(b=!0,m={patternOptions:{decimalLimit:s.numberFormat.maximumFractionDigits}}),s.maskOptions&&"function"==typeof s.maskOptions&&(b=!1),b&&(s.maskOptions=_.extend(!0,{},m,s.maskOptions),e.mask(s.maskOptions)),s.align&&"right"===s.align||e.removeClass("is-number-mask")}ac.prototype={get isFocused(){var e,t,n=document.activeElement,i=this.element.is(n),a=null===(e=this.element.parent(".lookup-wrapper")[0])||void 0===e||null==e?void 0:e.contains(n),s=null===(t=this.modal)||void 0===t||null==t?void 0:t.element[0].contains(n);return i||a||s},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var n,e=this,t=this.element,i=(n="lookup-wrapper",t.is(".input-xs")&&(n+=" xs"),t.is(".input-sm")&&(n+=" sm"),t.is(".input-lg")&&(n+=" lg"),n);if(this.element.is(".has-actions")&&(i+=" has-actions-wrapper"),this.isInlineLabel)this.inlineLabel.addClass(i);else if(this.container=$('<span class="'.concat(i,'"></span>')),this.element.is(".field-options")){var a=this.element.closest(".field").find(".btn-actions");t.add(a).add(a.next(".popupmenu")).wrapAll(this.container)}else t.wrap(this.container);var s=this.element.next();if(s.is("button.trigger"))this.icon=s;else{this.icon=$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon(this.settings.icon),"\n      </button>"));var o=this.icon.children(".icon");"icon-search-list"!==this.settings.icon?o.addClass("has-custom-icon"):Ie.rtl&&o.addClass("icon-rtl-rotate")}t.after(this.icon),t.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),t.attr("data-mask")&&t.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.settings.clearable&&t.searchfield({clearable:!0,attributes:this.settings.attributes,tabbable:!1}),this.settings.clearable&&this.settings.clear&&t.on("cleared",function(c){e.settings.clear(c,e,e.settings.clearArguments)}),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===t.attr("autocomplete")&&t.attr("autocomplete","off"),Array.isArray(this.settings.attributes)&&(_.addAttributes(t,this,this.settings.attributes,"input"),_.addAttributes(this.icon,this,this.settings.attributes,"trigger"))},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'));var e="".concat(P.translate("Lookup"),". ").concat(P.translate("PressDown")),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>"));var n=P.translate("LookupTriggerButton");this.icon.children("span.audible").text(n)},handleEvents:function(){var e=this;this.icon.on("click.lookup",function(t){e.openDialog(t)}),this.element.on("keyup.lookup",function(t){$("#autocomplete-list").length>0||40===t.which&&e.openDialog(t)})},setTooltip:function(){var e=this;setTimeout(function(){var t=e.element[0].scrollWidth>e.element[0].offsetWidth,n=e.element.data("tooltip");t?e.element.tooltip({content:e.element.val()}):n&&!t&&n.destroy()},100)},openDialog:function(e){var t=this;if(this.isChanged=!1,!this.isOpen&&!1!==t.element.triggerHandler("beforeopen")&&!(t.isDisabled()||t.isReadonly()&&!t.element.hasClass("is-not-editable")))if(t.settings.click)t.settings.click(e,this,t.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow)return this.element.triggerHandler("start"),void this.settings.beforeShow(this,function(i){var a=t.element&&t.element.is(":visible");return i&&t.createGrid(i),!a||"boolean"==typeof i&&!1===i?(t.isOpen=!1,!1):(t.createModal(),t.element.triggerHandler("complete"),t.element.trigger("open",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid),!0)});if(this.settings.options){t.createModal(),t.element.trigger("open",[t.modal,t.grid]),t.modal.element.find(".btn-actions").removeClass("is-selected"),t.grid&&t.grid.cellNode(0,0,!0).attr("tabindex","0");var n=t.modal.element.find(".toolbar .more > .btn-actions");n.length&&setTimeout(function(){_.fixSVGIcons(n)},600),t.element.trigger("afteropen",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid)}}},createModal:function(){var i,a,s,o,c,d,e=this,t='<div id="'.concat(co,'"></div>'),n=$('label[for="'.concat(e.element.attr("id"),'"]')),p=e.isInlineLabel?e.inlineLabelText:n.length?n.clone().find("span").remove().end().text():e.settings.title?e.settings.title:null!==(i=e.settings)&&void 0!==i&&null!==(a=i?.options)&&void 0!==a&&null!==(s=a?.toolbar)&&void 0!==s&&s?.title?null===(o=e.settings)||void 0===o||null===(c=o?.options)||void 0===c||null===(d=c?.toolbar)||void 0===d||null==d?void 0:d.title:"",f=this.settings.modalContent;f&&f instanceof jQuery&&(t=f,f.show()),!f||f instanceof jQuery||(t=f);var m=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===m.length||!e.settings.autoApply&&0===m.length)&&(m=[{text:P.translate("Cancel"),click:function(T,S){S.oldActive=e.icon,S.close()}},{text:P.translate("Apply"),click:function(T,S){e.insertRows(),S.oldActive=e.icon,S.close()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===m.length&&e.settings.autoApply&&(m=[{text:P.translate("Cancel"),click:function(T,S){S.oldActive=e.icon,S.close()}},{text:P.translate("Apply"),click:function(T,S){S.oldActive=e.icon,S.close(),e.insertRows()},isDefault:!0}]);var C={triggerButton:this.element,title:p,content:t,buttons:m,cssClass:"lookup-modal".concat(this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter?"":" lookup-no-search"),attributes:ic(this.settings.attributes,[],"modal")};e.settings.modalSettings&&(C=La(La({},C),e.settings.modalSettings)),$("body").modal(C).off("open.lookup").on("open.lookup",function(){e.createGrid()}).off("close.lookup").on("close.lookup",function(){delete e.isOpen,e.element.triggerHandler("close",[e.modal,e.grid]),e.setTooltip()}),e.modal=$("body").data("modal"),this.settings.title||e.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),e.modal.element.off("afterclose.lookup").on("afterclose.lookup",function(){e.closeTearDown()}),setTimeout(function(){$(".modal.is-visible .searchfield").on("keypress.lookup",function(T){return 13!==T.keyCode})},300)},closeTearDown:function(){var e=$(".modal.is-visible .searchfield").off("keypress.lookup");e.data()&&e.data("searchfield")&&e.data("searchfield").destroy(),e.data()&&e.data("searchfield")&&(e.data("searchfield").destroy(),e.removeData()),e=null,this.grid&&this.grid.destroy&&($(this.grid.element).off("selected.lookup"),this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var e={},t=[],n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var s=0;s<i.length;s++)for(var o=0;o<i[s].length;o++)!0!==e[i[s][o]]&&(t[t.length]=i[s][o],e[i[s][o]]=!0);return t},createGrid:function(e){var t,n,i,a,s=this,o=this;e?(a=e,co=e.attr("id"),o.settings.options=e.data("datagrid").settings):a=o.modal.element.find("#".concat(co)),this.settings.minWidth&&(a=this.applyMinWidth(a)),o.settings.dblClickApply&&(o.settings.options.dblClickApply=o.settings.dblClickApply),o.settings.options&&("single"===o.settings.options.selectable&&o.settings.autoApply&&(o.settings.options.cellNavigation=!1,a.find("tr").addClass("is-clickable")),o.settings.options.isList=!0,o.settings.attributes&&(o.settings.options.attributes=ic(o.settings.attributes,[],"datagrid")),a.data("datagrid")||a.datagrid(o.settings.options)),o.grid=a.data("datagrid"),!this.settings.title&&o.modal&&o.modal.element.find(".title").not(".selection-count").remove();var c=null===(t=this.settings)||void 0===t||null===(n=t?.options)||void 0===n||null===(i=n?.toolbar)||void 0===i||null==i?void 0:i.keywordFilter;if(!c&&o.modal&&o.modal.element.find(".toolbar").appendTo(o.modal.element.find(".modal-header")),c&&o.grid&&(!o.grid.filterExpr||o.grid.filterExpr&&o.grid.filterExpr[0]&&""!==o.grid.filterExpr[0].value)&&o.grid.keywordSearch(""),a.off("selected.lookup"),o.initValues)o.initValues.forEach(function(p){return o.selectGridRows(p.value.toString())}),delete o.initValues;else{var d=o.element.val();d&&!o.settings.options.source&&("multiple"===o.settings.options.selectable&&d.indexOf(this.settings.delimiter)>1?d.split(this.settings.delimiter):[d]).forEach(function(p){return o.selectGridRows(p.toString())})}this.settings.options.source&&a.off("afterpaging.lookup").on("afterpaging.lookup",function(p,f){if(!o.settings.options.source||"multiple"!==o.settings.options.selectable){var m=o.element.val();s.selectGridRows(m)}s.element.trigger("afterpaging",[f,s])}),this.settings.options&&(this.settings.dblClickApply&&"single"===this.settings.options.selectable&&a.on("ischanged.lookup",function(){s.isChanged=!0}),a.on("selected.lookup",function(p,f,m,b){o.settings.options.source&&"multiple"===o.settings.options.selectable?o.element.trigger("selected",[f,m,b,o]):(s.isChanged=!0,"deselect"===m&&(o.grid.recentlyRemoved||(o.grid.recentlyRemoved=[]),o.grid.recentlyRemoved.push(b)),f&&0!==f.length?(o.settings.validator&&o.settings.validator(o.element,o.modal,o.grid),"single"===o.settings.options.selectable&&o.settings.autoApply&&"deselectall"!==m&&(o.modal.close(),o.insertRows()),o.element.trigger("selected",[f,m,b,o])):"deselect"===m&&o.element.trigger("selected",[f,m,b,o]))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",function(){var p,f=s.settings.options.source&&(null===(p=s.selectedRows)||void 0===p||null==p?void 0:p.length);if(!s.initValues||s.initValues&&!s.initValues.length||f)if(s.initValues=[],f)setTimeout(function(){var b,C,T=null===(b=s.grid)||void 0===b||null===(C=b?.pagerAPI)||void 0===C||null==C?void 0:C.state;if(T){var S={min:T.activePage*T.pagesize-T.pagesize,max:T.activePage*T.pagesize-1};s.selectedRows.forEach(function(M){var L;s.initValues.push({value:M.data[s.settings.field],visited:(L=M,L.pagingIdx>=S.min&&L.pagingIdx<=S.max)})}),s.grid._selectedRows=s.selectedRows.slice(),s.grid.syncSelectedRows(),s.grid.syncSelectedUI()}},310);else{var m=s.element.val();m&&(m.indexOf(s.settings.delimiter)>1?m.split(s.settings.delimiter):[m]).forEach(function(b){s.initValues.push({value:b,visited:!!s.grid.settings.dataset.filter(function(C){return S=b,(C[s.settings.field]||"").toString()===S.toString();var S}).length})})}})},updateSelectedRows:function(e){var t=this;if(this.settings.options.source&&(e=Array.isArray(e)?e:[],this.selectedRows.length!==e.length)){this.selectedRows=e.slice();var n=this.selectedRows.map(function(i){return i.data?i.data[t.settings.field]:""}).join(this.settings.delimiter);this.grid&&(this.grid._selectedRows=this.selectedRows.slice(),this.grid.syncSelectedRows(),this.grid.syncSelectedUI()),this.element.val(n).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows])}},selectGridRows:function(e){var t=e,n=!1;if(e){if(this.grid&&this.settings.options.source)for(var i=this.grid._selectedRows.length-1;i>-1;i--)isNaN(this.grid._selectedRows[i].idx)&&this.grid._selectedRows.splice(i,1);if(t.indexOf(this.settings.delimiter)>1){for(var a=t.split(this.settings.delimiter),s=!1,o=!1,c=0;c<a.length;c++){if(o=!1,this.grid.recentlyRemoved)for(var d=0;d<this.grid.recentlyRemoved.length;d++)this.grid.recentlyRemoved[d][this.settings.field].toString()===a[c].toString()&&(o=!0);if(!o&&(s=this.selectRowByValue(this.settings.field,a[c]),this.grid&&this.settings.options.source&&!s)){for(var p=!1,f=0;f<this.grid._selectedRows.length;f++)this.grid._selectedRows[f].data[this.settings.field].toString()===a[c].toString()&&(p=!0);if(this.grid.recentlyRemoved)for(var m=0;m<this.grid.recentlyRemoved.length;m++)this.grid.recentlyRemoved[m][this.settings.field].toString()===a[c].toString()&&(p=!0);if(!p){var b={};b[this.settings.field]=a[c],this.grid._selectedRows.push({data:b})}n=!0}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(a.length," ").concat(P.translate("Selected"))),this.grid.syncSelectedUI()),this.selectRowByValue(this.settings.field,t)}else{var C=[];C.push(t);for(var T=!1,S=!1,M=0;M<C.length;M++){if(this.grid.recentlyRemoved)for(var L=0;L<this.grid.recentlyRemoved.length;L++)this.grid.recentlyRemoved[L][this.settings.field].toString()===C[M].toString()&&(S=!0);if(!S){if(T=this.selectRowByValue(this.settings.field,C[M]),this.grid&&this.settings.options.source&&!T){for(var V=0;V<this.grid._selectedRows.length;V++)this.grid._selectedRows[V].data[this.settings.field].toString(),C[M].toString();if(this.grid.recentlyRemoved)for(var N=0;N<this.grid.recentlyRemoved.length;N++)this.grid.recentlyRemoved[N][this.settings.field].toString(),C[M].toString();n=!0}if(T&&this.grid.recentlyRemoved)for(var U=0;U<this.grid.recentlyRemoved.length;U++)this.grid.recentlyRemoved[U][this.settings.field].toString()===C[M].toString()&&(n=!1)}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(C.length," ").concat(P.translate("Selected"))),this.grid.syncSelectedUI())}}},selectRowByValue:function(e,t){if(!this.settings.options)return!1;var n=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,i=[];if(!n)return!1;for(var a=0;a<n.length;a++){var s,o=!1;if("function"==typeof this.settings.match&&this.settings.match(t,n[a],this.element,this.grid)&&(o=!0),"function"!=typeof this.settings.match&&(null===(s=n[a][e])||void 0===s||null==s?void 0:s.toString())===(null==t||null==t?void 0:t.toString())&&(o=!0),o){var c=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(a)):a;i.push(c)}}return!!(this.grid&&i.length>0)&&(this.grid.selectRows(i,!1,!0),!0)},insertRows:function(){if(this.isChanged||this.settings.options.source){var e=[];this.selectedRows=this.grid.selectedRows().slice();for(var t=0;t<this.selectedRows.length;t++){var n;n="function"==typeof this.settings.field?this.settings.field(this.selectedRows[t].data,this.element,this.grid):this.selectedRows[t].data[this.settings.field],e.push(n);var i=this.selectedRows[t].idx;this.settings.options.dataset&&this.settings.options.dataset[i]&&delete this.settings.options.dataset[i]._selected}this.settings.allowDuplicates||(e=e.filter(function(a,s){return e.indexOf(a)===s})),this.element.val(e.join(this.settings.delimiter)).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()}},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1).removeClass("is-not-editable"),this.element.closest(".field").removeClass("is-disabled"),this.icon.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.element.closest(".field").addClass("is-disabled"),this.icon.prop("disabled",!0)},readonly:function(){this.element.prop("readonly",!0),this.icon.prop("disabled",!1)},applyAutoWidth:function(){var e=this.element.val(),t=e.length,n=e===e.toUpperCase(),i=!isNaN(e);this.element.attr("size",t+(n&&!i?2:1))},applyMinWidth:function(e){if(null==this.settings.minWidth)return e;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var t="".concat(this.settings.minWidth,"px");e.css({"min-width":t})}return e},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.icon.attr("tabIndex",e?0:-1)},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings))},updateDataset:function(e,t){this.settings.options.dataset=e,t&&t.activePage&&(this.settings.options.activePage=t.activePage),t&&t.pagesize&&(this.settings.options.pagesize=t.pagesize),this.grid&&this.grid.updateDataset(e,t)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),$.removeData(this.element[0],"lookup")}},$.fn.lookup=function(e){return this.each(function(){var t=$.data(this,"lookup");t?t.updated(e):t=$.data(this,"lookup",new ac(this,e))})};var Er={Input:function(e,t,n,i,a,s,o,c){this.name="input",this.originalValue=n,this.useValue=!!a.inlineEditor,this.init=function(){this.input=a.inlineEditor?i.find("input"):$('<input type="'.concat(a.inputType||"text",'" autocomplete="off"/>')).appendTo(i),yd(this.input,e,t,n,0,a,0,0,c)},this.val=function(d){var p;return d&&this.input.val(d),a&&a.numberFormat&&"percent"===a.numberFormat.style?(p=this.input.val().trim().replace(/(\s%?|%)$/g,""),P.parseNumber(p)/100):a.numberFormat?P.parseNumber(this.input.val(),a.numberFormat):this.input.val()},a.inlineEditor||(this.focus=function(){this.input.focus(),o.settings.selectOnEdit&&this.input.select()}),this.destroy=function(){var d=this;a.inlineEditor||setTimeout(function(){d.input.remove()},0)},this.init()},Textarea:function(e,t,n,i,a,s,o){this.name="textarea",this.originalValue=n,this.init=function(){i.addClass("datagrid-textarea-cell-wrapper");var c=i.get(0).scrollHeight,d=a.editorOptions&&a.editorOptions.minHeight?'style="min-height: '.concat(a.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(d,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(i);var p=a.editorOptions?a.editorOptions:{};"characterCounter"in p||(p.characterCounter=!1),this.api=this.input.data("autogrow-start-height",c).textarea(a.editorOptions).data("textarea"),this.input.on("click.textareaeditor",function(f){f.stopPropagation()}),a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text")},this.val=function(c){return c&&this.input.focus().val(c),this.input.val()},this.focus=function(){this.input.focus(),o.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var c=this;i.removeClass("datagrid-textarea-cell-wrapper"),setTimeout(function(){c.input.off("click.textareaeditor"),c.input.remove()},0)},this.init()},Editor:function(e,t,n,i,a,s,o){this.name="editor",this.originalValue=n,this.init=function(){var c=this,d=$.extend({},{buttons:{editor:["header1","header2","separator","bold","italic","underline","separator","foreColor","separator","justifyLeft","justifyCenter","justifyRight"],source:[]},excludeButtons:{editor:[]}},a.editorOptions);this.editorWidth=o.setUnit(d.width||i.outerWidth()),delete d.width,i[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat($e.sanitizeHTML($e.unescapeHTML(n)),"</div>\n        </div>"),this.td=i.closest("td"),this.input=$(".editor",i),this.input.popover({content:$(".editor-wrapper",i),placementOpts:{x:0,y:"-".concat(parseInt(i[0].style.height,10)+35),parent:this.td,parentXAlignment:P.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup",onHidden:function(){o.commitCellEdit(c.input)}}).editor(d).on("keydown.editor",function(p){var f=p.which||p.keyCode||p.charCode||0;if((p.ctrlKey||p.metaKey)&&(13===f||10===f)){var m=c.input.data("tooltip");m&&(m.hide(),o.setNextActiveCell(p))}}),_.fixSVGIcons($("#editor-popup"))},this.val=function(){return $e.escapeHTML(this.input.html())},this.focus=function(){var c=this;setTimeout(function(){c.input.focus()},0)},this.destroy=function(){i.removeAttr("style"),o.quickEditMode=!1,this.input.data("editor")&&(this.input.destroy(),this.input.remove())},this.init()},Checkbox:function(e,t,n,i,a,s,o){this.name="checkbox",this.originalValue=n,this.useValue=!0,this.container=i,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(i),this.input.after('<label class="checkbox-label"></label>'),a.align&&this.input.addClass("l-".concat(a.align,"-text"))},this.val=function(c){var d;if(void 0===c)return this.input.prop("checked");d=a.isChecked?a.isChecked(c):c,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(d=!d,o.setNextActiveCell(s)),this.input.prop("checked",d)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var c=this;setTimeout(function(){c.input.next(".checkbox-label").remove(),c.input.remove()},0)},this.init()},Colorpicker:function(e,t,n,i,a,s,o){this.name="colorpicker",this.originalValue=n,this.useValue=!0,n=$e.stripTags(n),this.init=function(){this.input=$('<input id="colorpicker-'.concat(t,'" name="colorpicker-').concat(t,'" class="colorpicker" value="').concat(n,'" type="text" autocomplete="off"/>')).appendTo(i),this.input.colorpicker(a.editorOptions)},this.val=function(c){return c?this.input.val(c):this.input.val()},this.focus=function(){var c=this;this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),this.input.focus(),o.settings.selectOnEdit&&this.input.select(),this.input.off("listclosed").on("listclosed",function(){o.commitCellEdit(c.input),i.parent("td").focus()})},this.destroy=function(){},this.init()},MultiSelect:function(e,t,n,i,a,s,o,c){this.name="multiselect",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){if(a.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="multiselect"></select>').appendTo(i),a.options){var d,p,f;n=o.fieldValue(c,a.field);for(var m=a.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,b=0;b<a.options.length;b++)d=$("<option></option>"),p=a.options[b],f=a.caseInsensitive&&"string"==typeof p.value?p.value.toLowerCase():p.value,(p.selected||m===f)&&(d.attr("selected","true"),this.originalValue=f),d.attr("value",p.value).attr("id",p.id).attr("data-type",Ge(p.value)),d.text(p.label),this.input.append(d)}var C=a.editorOptions||{};C.cssClass&&/is-editing/g.test(C.cssClass)||(C.cssClass=C.cssClass||"",C.cssClass+=" is-editing"),this.input.multiselect(C),this.input.data("multiselect").settings.sourceArguments={column:a,container:i,grid:o,cell:t,event:s,row:e,rowData:c,value:n}}},this.val=function(d){if(this.datasetValue=d,void 0!==d){var p=a.caseInsensitive&&"string"==typeof d?d.toLowerCase():d;this.input.val(d),this.input.find("option").each(function(){var C=$(this),T=C.attr("value"),S=C.attr("data-type"),M=T;"number"===S?M=parseFloat(T):"boolean"===S?M="true"===T:"string"===S&&a.caseInsensitive&&(M=T.toLowerCase()),M===p&&C.attr("selected","true")})}var f=this.input.find(":selected"),m=f.attr("value"),b=f.attr("data-type");return f.length>1&&(m=[],f.map(function(C,T){return m.push(T.value)})),"number"===b?m=parseFloat(m):"boolean"===b&&(m="true"===m),void 0===m&&(m=f.text()),m},this.focus=function(){var d=this;if("click"===s.type?(this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var p=$("#dropdown-search")[0];if(p)if("number"==typeof p.selectionStart)p.selectionEnd=p.value.length,p.selectionStart=p.selectionEnd;else if(void 0!==p.createTextRange){var f=p.createTextRange();f.collapse(!1),f.select()}}this.input.off("listclosed").on("listclosed",function(m,b){o.commitCellEdit(d.input),"select"!==b?"tab"===b&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Dropdown:function(e,t,n,i,a,s,o,c){this.name="dropdown",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){var d=this;if(a.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(i),a.options){var p,f,m;n=o.fieldValue(c,a.field);for(var b=a.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,C=0;C<a.options.length;C++)p=$("<option></option>"),f=a.options[C],m=a.caseInsensitive&&"string"==typeof f.value?f.value.toLowerCase():f.value,(f.selected||b===m)&&(p.attr("selected","true"),this.originalValue=m),p.attr("value",f.value).attr("id",f.id).attr("data-type",Ge(f.value)),p.text(f.label),this.input.append(p)}var T=a.editorOptions||{};T.cssClass&&/is-editing/g.test(T.cssClass)||(T.cssClass=T.cssClass||"",T.cssClass+=" is-editing"),this.input.dropdown(T),this.input.on("requestend",function(){d.val(d.datasetValue)}),this.input.data("dropdown").settings.sourceArguments={column:a,container:i,grid:o,cell:t,event:s,row:e,rowData:c,value:n}}},this.val=function(d){if(this.datasetValue=d,void 0!==d){var p=a.caseInsensitive&&"string"==typeof d?d.toLowerCase():d;this.input.val(d),this.input.find("option").each(function(){var C=$(this),T=C.attr("value"),S=C.attr("data-type"),M=T;"number"===S?M=parseFloat(T):"boolean"===S?M="true"===T:"string"===S&&a.caseInsensitive&&(M=T.toLowerCase()),M===p&&C.attr("selected","true")})}var f=this.input.find(":selected"),m=f.attr("value"),b=f.attr("data-type");return"number"===b?m=parseFloat(m):"boolean"===b&&(m="true"===m),void 0===m&&(m=f.text()),m},this.focus=function(){var d=this;if("click"===s.type?(this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var p=$("#dropdown-search")[0];if(p)if("number"==typeof p.selectionStart)p.selectionEnd=p.value.length,p.selectionStart=p.selectionEnd;else if(void 0!==p.createTextRange){var f=p.createTextRange();f.collapse(!1),f.select()}}this.input.off("listclosed").on("listclosed",function(m,b){o.commitCellEdit(d.input),"select"!==b?"tab"===b&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Date:function(e,t,n,i,a,s,o){this.name="date",this.originalValue=n,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.dateFormat||(a.editorOptions.dateFormat=a.dateFormat),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.datepicker(a.editorOptions)},this.val=function(c){return"0000"!==c&&"000000"!==c&&"00000000"!==c||(c=""),c&&this.input.val(c),xn.Date(e,t,this.input.val(),a,!0)},this.focus=function(){var c=this;this.input.focus(),o.settings.selectOnEdit&&this.input.select(),"click"===s.type&&$(s.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.input.on("listclosed",function(){setTimeout(function(){c.input.trigger("focusout"),i.parent().focus(),o.setNextActiveCell(s)},1)})},this.destroy=function(){var c=this;setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Fileupload:function(e,t,n,i,a,s,o){var c=this,d=_.mergeSettings(void 0,a.editorOptions,{allowedTypes:"*"}),p=d.allowedTypes.split(/[\s|]+/g),f=_.uniqueId(this,"fileupload-".concat(e,"-").concat(t,"-")),m=d.useMultiple?" multiple":"",b=d.isDisabled?" disabled":"",C="";if(1===p.length)"*"!==p[0]&&(C=".".concat($e.ensureAlphaNumeric(p[0])));else for(var T=0,S=p.length;T<S;T++)C+=".".concat($e.ensureAlphaNumeric(p[T])+(T!==S-1?",":""));""!==C&&(C=' accept="'.concat(C,'"')),this.name="fileupload",this.originalValue=n,this.status="init",this.useValue=!0,this.init=function(){f=$e.ensureAlphaNumeric(f),m=$e.ensureAlphaNumeric(m),b=$e.ensureAlphaNumeric(b),this.input=$('<input id="'.concat(f,'" name="').concat(f,'" class="fileupload" type="file" ').concat(C).concat(m).concat(b,' autocomplete="off"/>')),i.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(a.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(M){var L=this;return new Promise(function(z){setTimeout(function(){var V;M?(M=$e.stripTags(M),L.input.attr("value",M),V=M):V=L.input.val(),z(V)},300)})},this.focus=function(){var M=function(){""!==c.originalValue&&(c.status="clear"),o.commitCellEdit(c.input)},L=function(){c.api&&($("body").one("focusin.fileuploadeditor",function(){setTimeout(function(){"change"!==c.status&&(c.status="cancel",o.commitCellEdit(c.input))},100)}),c.api.fileInput.trigger("click"))};if(c.input.on("change.fileuploadeditor",function(){c.status="change",o.commitCellEdit(c.input)}),"keydown"===s.type){var z=s.which||s.keyCode||s.charCode||0;8===z||46===z?M():13===z||10===z?L():o.commitCellEdit(c.input)}if("click"===s.type){var V=$(s.target);V.is(".icon-close")?M():V.is(".icon-fileupload")?L():o.commitCellEdit(c.input)}},this.destroy=function(){c.input.off("change.fileuploadeditor"),o.quickEditMode=!1,c.api&&c.api.destroy()},this.init()},Time:function(e,t,n,i,a,s,o){this.name="time",this.originalValue=n,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.api=this.input.timepicker(a.editorOptions).data("timepicker")},this.val=function(c){return c&&this.input.val(c),this.input.val()},this.focus=function(){var c=this;this.input.focus(),o.settings.selectOnEdit&&this.input.select(),"click"===s.type&&$(s.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.api.trigger.on("hide.editortime",function(){setTimeout(function(){c.input.trigger("focusout"),i.parent().focus(),o.setNextActiveCell(s)},1)})},this.destroy=function(){var c=this;c.api&&c.api.trigger&&c.api.trigger.off("hide.editortime"),setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Lookup:function(e,t,n,i,a,s,o,c){this.name="lookup",this.originalValue=n,this.init=function(){this.input=$('<input class="lookup '.concat("right"===a.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(i),yd(this.input,e,t,n,0,a,0,0,c),a.editorOptions||(a.editorOptions={}),a.editorOptions.options||(a.editorOptions.options={}),a.editorOptions.options.toolbar||(a.editorOptions.options.toolbar={}),a.editorOptions.options.toolbar.title||(a.editorOptions.options.toolbar.title=a.name),void 0===a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.lookup(a.editorOptions),i.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:a,container:i,grid:o,cell:t,event:s,row:e,rowData:c,value:n}},this.val=function(d){return d?this.input.val(d):this.input.val()},this.focus=function(){var d=this.input.data("lookup"),p=this.input.closest("td");"keydown"===s.type&&(this.input.focus(),o.settings.selectOnEdit&&this.input.select(),p.on("keydown.editorlookup",function(f){40===f.keyCode&&(f.preventDefault(),f.stopPropagation())})),"click"===s.type&&($(s.target).is("svg")?d.openDialog(s):(this.input.focus(),o.settings.selectOnEdit&&this.input.select(),p.on("touchcancel.editorlookup touchend.editorlookup",".trigger",function(){d.openDialog()}))),this.input.on("change.editorlookup",function(){o.quickEditMode=!1})},this.destroy=function(){var d=this,p=this.input.closest("td");setTimeout(function(){o.quickEditMode=!1,p.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),d.input.remove()},0)},this.init()},Autocomplete:function(e,t,n,i,a,s,o){this.name="autocomplete",this.originalValue=n,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.width=i.parent().width(),a.editorOptions.offset={left:-1,top:"medium"===o.settings.rowHeight?1:5},a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(a.editorOptions)},this.val=function(c){return c?this.input.val(c):this.input.val()},this.focus=function(){o.quickEditMode=!0,this.input.focus(),o.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var c=this;setTimeout(function(){o.quickEditMode=!1,c.input.remove()},0)},this.init()},Spinbox:function(e,t,n,i,a,s,o){var c=this;this.name="spinbox",this.originalValue=n,this.useValue=!0,this.init=function(){if(a.inlineEditor)c.input=i.find("input");else{var d='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="\'+ ').concat(n,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');ue.append(i,d,"<label><span><input>"),c.input=i.find("input"),a.editorOptions||(a.editorOptions={}),c.input.spinbox(a.editorOptions)}},this.val=function(d){return d&&c.input.val(d),parseInt(c.input.val(),10)},this.focus=function(){o.quickEditMode=!0,c.input.focus(),o.settings.selectOnEdit&&c.input.select()},this.destroy=function(){a.inlineEditor||setTimeout(function(){o.quickEditMode=!1;var d=c.val();c.input&&c.input.data("spinbox")&&c.input.data("spinbox").destroy(),c.input&&c.input.remove(),i.text(d)},0)},this.init()},Favorite:function(e,t,n,i,a,s,o){this.name="favorite",this.useValue=!0,this.originalValue=n,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:n?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(i),this.input=this.input.find("input")},this.val=function(c){var d;if(void 0===c)return this.input.prop("checked");d=a.isChecked?a.isChecked(c):c,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-cell-wrapper")||(d=!d,o.setNextActiveCell(s)),this.input.prop("checked",d),this.input.find("use").attr("href",d?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var c=this;setTimeout(function(){c.input.parent().remove()},0)},this.init()}},Al={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,selectOnEdit:!0,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"large",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,selectAllCurrentPage:!1,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,spacerColumn:!1,stickyHeader:!1,columnSizing:"all",twoLineHeader:!1,clickToSelect:!0,keyRowSelect:!1,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,disableRowDeselection:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:P?P.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data",height:null},searchExpandableRow:!0,allowChildExpandOnMatchOnly:!1,allowChildExpandOnMatch:!1,activeCheckboxSelection:!1,dblClickApply:!1,attributes:null,allowPasteFromExcel:!1,fallbackImage:"insert-image",fallbackSize:{height:40,width:40},fallbackTooltip:{content:"Image could not load",delay:200},headerBackgroundColor:"dark"};function jo(e,t){this.settings=_.mergeSettings(e,t,Al),this.element=$(e),t.dataset&&(this.settings.dataset=t.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=Al.frozenColumns.expandRowAcrossAllCells),this.init()}jo.prototype={get pagerAPI(){var e;return this.tableBody&&this.tableBody.length&&(e=this.tableBody.data("pager")),e},init:function(){var e=$("html");this.isTouch=Ie.features.touch,this.isSafari=e.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.hasScrollbarY(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerAPI])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(e){var t=this.settings;if(e&&t.columns&&(!t.columns||t.columns.length)){for(var n={index:-1},i=0,a=t.columns.length;i<a;i++)t.columns[i].id===e&&(n.index=i);n.index>-1&&t.columns.splice(n.index,1)}},setInlineActionableMode:function(){var e=this.settings;if(e.columns&&(!e.columns||e.columns.length)){for(var t={index:-1},n=0,i=e.columns.length;n<i;n++)e.columns[n].inlineEditor&&(t.index=n);this.inlineMode=t.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(e,t){if(t||(t={}),e&&(t.type="filterrow"),this.settings.source)return t.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(t);this.loadData(this.settings.dataset,t)},firstRender:function(){if(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),this.settings.stickyHeader&&this.element.removeClass("datagrid").addClass("is-sticky"),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight){var e="short"===this.settings.rowHeight?"small":this.settings.rowHeight;e="normal"===this.settings.rowHeight?"large":e,this.hasLeftPane&&this.tableLeft.addClass("".concat(e,"-rowheight")),this.table.addClass("".concat(e,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(e,"-rowheight")),this.element.addClass("".concat(e,"-rowheight"))}this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},hasScrollbarY:function(){var e=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),t=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>e+2||this.element[0].scrollHeight>this.element[0].clientHeight;this.hasVerticalScrollbar=!1!==t},editCell:function(e,t,n){var i=this;setTimeout(function(){i.setActiveCell(e,t),i.makeCellEditable(e,t,n)},100)},renderRow:function(e,t){var n=this,i="bottom"!==t,a="",s="",o="";function c(){i?(n.hasLeftPane&&ue.prepend(n.tableBodyLeft,s,"*"),ue.prepend(n.tableBody,a,"*"),n.hasRightPane&&ue.prepend(n.tableBodyRight,o,"*")):(n.hasLeftPane&&ue.append(n.tableBodyLeft,s,"*"),ue.append(n.tableBody,a,"*"),n.hasRightPane&&ue.append(n.tableBodyRight,o,"*"))}n.emptyMessageContainer&&n.emptyMessageContainer.hide();var d="bottom"===t?"last":"first",m=n.rowHtml(e,"last"===d?n.settings.dataset.length-1:0,n.settings.dataset.length-1);if(n.hasLeftPane&&m.left&&(s+=m.left),m.center&&(a+=m.center),n.hasRightPane&&m.right&&(o+=m.right),n.settings.groupable)for(var b=$(".datagrid-rowgroup-header").find("span:not([class])"),C=0;C<b.length;C++){var T=$(b[C]);if(e.type===T.text().trim()){ue.after(T.parents("tr"),m.center,"*");break}}if(n.settings.paging&&!n.settings.groupable){var S=n.settings.dataset.length-n.pagerAPI.pageCount()*n.pagerAPI.settings.pagesize==1?1:0,M=("bottom"===t?n.pagerAPI.pageCount():1)+S;"bottom"!==t&&1===n.pagerAPI.activePage?c():(n.pagerAPI.setActivePage(M,!1,d),n.pagerAPI.triggerPagingEvents(n.pagerAPI.currentPage))}n.settings.paging||n.settings.groupable||c(),n.settings.paging&&n.tableBody.children().length>n.pagerAPI.settings.pagesize&&n.tableBody.children().last().remove(),n.refreshIndexes(),n.afterRender()},refreshIndexes:function(){this.element.find("tr").removeAttr("aria-rowindex"),this.element.find("tr").removeAttr("data-index"),this.hasLeftPane&&this.element.find(".datagrid-wrapper.left tbody > tr").each(function(e,t){var n=$(t);n.attr("aria-rowindex",e+1),n.attr("data-index",e)}),this.element.find(".datagrid-wrapper.center tbody > tr").each(function(e,t){var n=$(t);n.attr("aria-rowindex",e+1),n.attr("data-index",e)}),this.hasRightPane&&this.element.find(".datagrid-wrapper.right tbody > tr").each(function(e,t){var n=$(t);n.attr("aria-rowindex",e+1),n.attr("data-index",e)})},addRow:function(e,t){var i,a=this,s=this;this.saveDirtyRows();var o=this.addToDataset([e],t)[0];this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(c){void 0!==c.pagingIdx&&c.pagingIdx>=o&&(c.idx++,c.pagingIdx++)}),this.clearCache(),this.renderRow(e,t),this.settings.groupable&&(i=this.dataRowNode(o),o=this.visualRowIndex(i)),this.syncSelectedUI(),setTimeout(function(){s.setActiveCell(o,0),a.settings.groupable||(i=a.visualRowNode(o)),s.element.triggerHandler("addrow",{row:o,cell:0,target:i,value:e,oldValue:{}})},100)},addRows:function(e,t){var i=this,a=this;this.saveDirtyRows();var s=this.addToDataset(e,t);if(-1!==s){this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(c){s.forEach(function(d){void 0!==c.pagingIdx&&c.pagingIdx>=d&&(c.idx++,c.pagingIdx++)})}),this.clearCache(),this.renderRows();var o=[];this.settings.groupable&&s.forEach(function(c,d){var p=i.dataRowNode(c);o.push(p),s[d]=i.visualRowIndex(p)}),this.syncSelectedUI(),setTimeout(function(){a.setActiveCell(s[0],0),i.settings.groupable||s.forEach(function(c){o.push(i.visualRowNode(c))}),a.element.triggerHandler("addrow",{rows:s,cell:0,target:o,value:e,oldValue:{}})},100)}},addToDataset:function(e,t){if(e&&0===e.length)return-1;var n=this.settings,i=[],a={icon:"new",text:P.translate("NewRow"),tooltip:P.translate("NewRow")},s=!1,o=this.settings.dataset;function c(p,f){p.rowStatus=p.rowStatus||a,o.splice(f,0,p),i.push(f)}if(t&&"top"!==t||(t="top",s=!0),n.groupable)if(o=this.originalDataset||o,"string"==typeof t){var d=this.settings.groupable.fields[0];e.forEach(function(p){var f=function(m,b,C,T){for(var S=0,M=m.length;S<M;S++){var L=T?M-1-S:S;if(m[L][b]===C)return L}return-1}(o,d,p[d],!s);c(p,f>-1?s?f:f+1:0)})}else e.forEach(function(p,f){c(p,t+f)});else e.forEach("string"==typeof t?function(p,f){c(p,s?f:o.length)}:function(p,f){c(p,t+f)});return i},pagerRefresh:function(e,t){if(this.pagerAPI){var n={};if("string"==typeof e?n.activePage="top"===e?1:this.pagerAPI.state.pages:"number"==typeof e&&(n.activePage=Math.floor(e/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(n.total=this.settings.dataset.length,n.pagesize=this.settings.pagesize),t){var i=Math.ceil(this.settings.dataset.length/this.settings.pagesize);n.activePage=this.pagerAPI.activePage>i?i:this.pagerAPI.activePage}this.renderPager(n,!0)}},removeRow:function(e,t,n){var i=this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')),a=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,s=a[e];this.saveDirtyRows(),this.unselectRow(e,t),a.splice(e,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,t||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(c){return c.row!==e}),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var o={row:e,cell:null,target:i,item:s,oldValue:s};return n?o:(this.element.trigger("rowremove",o),!0)},removeSelected:function(e){this._selectedRows.sort(function(i,a){return i.idx<a.idx?-1:i.idx>a.idx?1:0});for(var t=[],n=this._selectedRows.length-1;n>=0;n--)t.push({row:this._selectedRows[n].idx,item:this._selectedRows[n],cell:null,target:null}),this.removeRow(this._selectedRows[n].idx,n>0,e);e&&this.element.trigger("rowremove",t)},updateDataset:function(e,t){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var n=this.element.parent().find(".toolbar").find(".searchfield");n.val(""),n.parent().removeClass("has-text"),this.clearFilter()}this.loadData(e,t),this.syncSelectedRowsIdx()},triggerSource:function(e,t,n){if(this.settings.source){var i=this,a={};this.pagerAPI&&(a=this.pagerAPI.state),"string"==typeof e?(a.type=e,a.trigger=n):e&&(a=_.extend({},a,e)),t&&"function"!=typeof t&&"string"==typeof t.type&&(a.type=t.type),!1!==this.element.triggerHandler("beforepaging",a)&&(this.sortColumn&&this.sortColumn.sortId&&(a.sortAsc=this.sortColumn.sortAsc,a.sortField=this.sortColumn.sortField,a.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(a.filterExpr=this.filterExpr),this.element.trigger("paging",a),this.settings.source(a,function(s,o){o.activePage>-1&&(i.activePage=o.activePage),o.grandTotal&&(i.grandTotal=o.grandTotal),i.loadData(s,o),t&&"function"==typeof t&&t(!0),setTimeout(function(){i.afterPaging(a),i.element.trigger("afterpaging",a)})}))}},afterPaging:function(e){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(e)?this.element.removeClass("paginated"):this.element.addClass("paginated"),e.total&&(this.recordCount=e.total,this.displayCounts(e.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(e,t){var n,i;this.settings.dataset=e,t||(t={}),"filterrow"===t.type&&(t.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,t.pagesize=this.settings.pagesize,t.total=t.total||-1,t.type="filterrow"),t.activePage||(t.activePage=1,t.pagesize=this.settings.pagesize,t.total=-1,this.settings.treeGrid&&(t.preserveSelected=!0)),this.grandTotal=this.settings.source&&t.grandTotal?t.grandTotal:null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(t.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),t.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),t.preserveSelected||"initial"!==t.type&&t.type||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===t.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(t,!0),this.displayCounts(),this.settings.paging&&this.settings.source&&null!==(n=t)&&void 0!==n&&n?.filterExpr&&"all"===(null===(i=t.filterExpr[0])||void 0===i||null==i?void 0:i.column)&&this.highlightSearchRows(t.filterExpr[0].value)},uniqueId:function(e){return e=e??"",(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(e):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(e)).replace(/--/g,"-")},visibleColumns:function(e){for(var t=[],n=0;n<this.settings.columns.length;n++){var i=this.settings.columns[n];i.hidden||e&&"selectionCheckbox"===i.id||t.push(i)}return t},getColumnGroup:function(e){for(var t=0,n=this.settings.columnGroups,i=0;i<n.length;i++)if(!n[i].hidden&&(t+=n[i].colspan)>=e)return this.uniqueId("-header-group-".concat(i));return""},updateColumnGroup:function(e,t){var n=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=_.deepCopy(n)),this.settings.groupable)for(var i=this.tableBody.find(".datagrid-rowgroup-header"),a=this.visibleColumns().length,s=0;s<i.length;s++)i[s].children[0].setAttribute("colspan",a);else if(n&&this.colGroups){var o=0,c=-1;this.originalColGroups.forEach(function(f,m){var b=parseInt(f.colspan,10);e>=o&&e<=o+b&&(c=m),o+=b});var d=parseInt(this.colGroups[c].getAttribute("colspan"),10),p=this.colGroups[c].classList.contains("is-hidden");if(!t||!p)return t&&!p?(this.colGroups[c].classList.remove("is-hidden"),void this.colGroups[c].setAttribute("colspan",d+1)):void(d-1!=0?this.colGroups[c].setAttribute("colspan",d-1):this.colGroups[c].classList.add("is-hidden"));this.colGroups[c].classList.remove("is-hidden")}},updateGroupHeadersAfterColumnReorder:function(e,t){var n=this.settings.columnGroups;if(n){this.originalColGroups||(this.originalColGroups=_.deepCopy(n));var i=n.map(function(s){return parseInt(s.colspan,10)}),a={from:null,to:null,total:0};i.forEach(function(s,o){a.total+=s,a.total>e&&null===a.from&&(a.from=o),a.total>t&&null===a.to&&(a.to=o)}),a.from!==a.to&&(n[a.from].colspan-=1,n[a.to].colspan+=1)}},headerText:function(e){var t=e.name?$e.stripTags(e.name,"<div><span><a><small><svg><i><b><use><br><strong><em>"):"";return t||"drilldown"!==e.id?t:(t=P.translate("Drilldown"),'<span class="audible">'.concat(t,"</span>"))},getContainer:function(e){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(e)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(e)>-1?"right":"center"},renderHeader:function(){var e,t,n,i,a,s,o,c,xt,d=this,p={left:"",center:"",right:""},f=this.settings.columnGroups;if(f){this.element.addClass("has-group-headers");var m,b=this.settings.columns,C=b.length,T=this.visibleColumns().length,S=f.map(function(xt){return parseInt(xt.colspan,10)}),M=function(){return S.reduce(function(xt,jt){return xt+jt},0)};if(p.left+='<tr role="row" class="datagrid-header-groups">',p.center+='<tr role="row" class="datagrid-header-groups">',p.right+='<tr role="row" class="datagrid-header-groups">',M()>C)for(var z=!0,V=S.length-1;V>=0&&z;V--)void 0,xt=M(),S[V]>=(m=xt>C?xt-C:C-xt)?(S[V]-=m,z=!1):S[V]=0;var N=0,U=0;if(S.forEach(function(xt,jt){for(var Ut=xt,en=N+xt;N<en;N++)N<C&&b[N].hidden&&Ut--;var gn=f[jt].hidden||Ut<1?' class="is-hidden"':"",Pn=' colspan="'.concat(Ut>0?Ut:1,'"'),Dt=f[jt].align?"l-".concat(f[jt].align,"-text"):"";c=d.uniqueId("-header-group-".concat(jt)),Ut>0&&(U+=Ut);var Be=d.getContainer(d.settings.columns[jt].id);p[Be]+="<th".concat(gn).concat(Pn,' id="').concat(c,'" class="').concat(Dt,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(f[jt].name,"</span></div></th>")}),U<T){var G=' colspan="'.concat((m=T-U)>0?m:1,'"');d.hasRightPane?p.right+="<th".concat(G,"></th>"):p.center+="<th".concat(G,"></th>")}this.settings.spacerColumn&&(p.center+='<th class="datagrid-header-groups-spacer-column"></th>'),p.left+="</tr><tr>",p.center+="</tr><tr>",p.right+="</tr><tr>"}else p.left+='<tr role="row">',p.center+='<tr role="row">',p.right+='<tr role="row">';for(var Z=0;Z<this.settings.columns.length;Z++){var oe,le,re=d.settings.columns[Z],J=d.getContainer(re.id),ce=d.uniqueId("-header-".concat(Z)),ke=void 0===re.sortable||re.sortable,_e=void 0===re.resizable||re.resizable,Oe=void 0===re.exportable||re.exportable,Qe="selectionCheckbox"===re.id,nt=this.getHeaderAlignmentClass(re);(d.hasLeftPane||d.hasRightPane)&&(d.settings.frozenColumns.left&&d.settings.frozenColumns.left.indexOf(re.id)>-1||d.settings.frozenColumns.right&&d.settings.frozenColumns.right.indexOf(re.id)>-1)&&(re.hideable=!1),void 0===re.hideable&&(re.hideable=!0);var ot="";ot+=ke?" is-sortable":"",ot+=_e?" is-resizable":"",ot+=re.hidden?" is-hidden":"",ot+=re.filterType?" is-filterable":"",ot+="ellipsis"===re.textOverflow?" text-ellipsis":"",ot+=null!=re&&re?.headerIcon?" header-icon":"",ot+=null!=re&&re?.headerCssClass?" ".concat(re.headerCssClass):"",ot=""!==(ot+=""!==nt?nt:"")?' class="'.concat(ot.substr(1),'"'):"";var Ze=_.stringAttributes(this,this.settings.attributes,"col-".concat(null===(oe=re.id)||void 0===oe||null==oe?void 0:oe.toLowerCase()));Ze||(Ze='id="'.concat(ce,'"')),p[J]+='<th scope="col" role="columnheader" '.concat(Ze," ").concat(Qe?' aria-checked= "false"':"",' data-column-id="').concat(re.id,'"').concat(re.field?' data-field="'.concat(re.field,'"'):"").concat(re.headerTooltip?' title="'.concat(re.headerTooltip,'"'):"").concat(re.headerTooltipCssClass?' tooltipClass="'.concat(re.headerTooltipCssClass,'"'):"").concat(!1===re.reorderable?' data-reorder="false"':"").concat(f?' headers="'.concat(d.getColumnGroup(Z),'"'):"",' data-exportable="').concat(Oe?"yes":"no",'"').concat(ot,">");var ft="";ke&&(ft="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>"));var Wt='\n        <svg class="icon datagrid-header-icon" focusable="false" aria-hidden="true" role="presentation" title="'.concat(null==re||null==re?void 0:re.headerIconTooltip,'">\n          <use href="#icon-').concat(re.headerIcon,'"></use>\n        </svg>\n      ');p[J]+='<div class="'.concat(Qe?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(nt,'">\n      <span class="datagrid-header-text').concat(re.required?" required":"",'">').concat(d.headerText(this.settings.columns[Z])).concat(" l-center-text"===nt?ft:"","</span>\n      ").concat(null!==(le=this.settings.columns[Z])&&void 0!==le&&le?.headerIcon?Wt:""),Qe&&(p[J]+=d.settings.showSelectAllCheckBox?'<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" tabindex="0"></span>':'<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none" tabindex="0"></span>'),ke&&" l-center-text"!==nt&&(p[J]+=ft),p[J]+="</div>".concat(d.filterRowHtml(re,Z),"</th>")}this.settings.spacerColumn&&(p.center+='<th class="datagrid-header-spacer-column"></th>'),p.left+="</tr>",p.center+="</tr>",p.right+="</tr>",void 0===d.headerRow?(d.hasLeftPane&&(d.headerRowLeft=$('<thead class="datagrid-header left" role="rowgroup">'.concat(p.left,"</thead>")),d.tableLeft.find("colgroup").after(d.headerRowLeft)),d.headerRow=$('<thead class="datagrid-header center"> role="rowgroup"'.concat(p.center,"</thead>")),d.table.find("colgroup").after(d.headerRow),d.hasRightPane&&(d.headerRowRight=$('<thead class="datagrid-header right" role="rowgroup">'.concat(p.right,"</thead>")),d.tableRight.find("colgroup").after(d.headerRowRight))):(d.hasLeftPane&&ue.html(d.headerRowLeft,p.left,"*"),ue.html(d.headerRow,p.center,"*"),d.hasRightPane&&ue.html(d.headerRowRight,p.right,"*")),f&&d.headerRow&&(d.colGroups=$.makeArray(this.container.find(".datagrid-header-groups th"))),d.syncHeaderCheckbox(this.settings.dataset),d.setScrollClass(),d.attachFilterRowEvents(),d.settings.columnReorder&&d.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll(),"light"===(null==d||null===(e=d?.settings)||void 0===e||null==e?void 0:e.headerBackgroundColor)?(null!=d&&null!==(t=d?.headerRowLeft)&&void 0!==t&&t?.addClass("light"),null!=d&&null!==(n=d?.headerRow)&&void 0!==n&&n?.addClass("light"),null==d||null===(i=d?.headerRowRight)||void 0===i||null==i||i.addClass("light")):(null!=d&&null!==(a=d?.headerRow)&&void 0!==a&&a?.addClass("dark"),null!=d&&null!==(s=d?.headerRowRight)&&void 0!==s&&s?.addClass("dark"),null==d||null===(o=d?.headerRowLeft)||void 0===o||null==o||o.addClass("dark"))},getHeaderAlignmentClass:function(e){return void 0===e.headerAlign?e.align?" l-".concat(e.align,"-text"):"":" l-".concat(e.headerAlign,"-text")},filterSetDatepicker:function(e,t,n){var i=e.data("datepicker"),a=e.data("is-range");n=n||{};var s=function(){i&&"function"==typeof i.destroy&&i.destroy(),e.datepicker(n)};if(i&&a||"in-range"!==t)i&&!a||"in-range"===t||(n.range={useRange:!1},e.removeData("is-range"),e.val(e.val().split(" - ")[0]),s());else{if(e.data("is-range",!0),0!==e.val().length&&-1===e.val().indexOf("-")){var o=e.parents("th").attr("data-column-id"),c=this.columnById(o)[0].dateFormat,d=P.formatDate("MM/dd/yyyy"===c?new Date(e.val()):e.val(),{pattern:c});e.val("".concat(d," - ").concat(d)),n.range={useRange:!0,start:d,end:d}}else n.range={useRange:!0};s()}},filterRowHtml:function(e,t){var n="",i=this.getHeaderAlignmentClass(e);if(e.filterType){var a,s,o=e,c=this.uniqueId("-header-filter-".concat(t)),d=Array.isArray(o.filterRowEditorOptions)?o.filterRowEditorOptions:o.options,p="";if("select"===o.filterType&&d){for(var f=!1,m=0,b=d.length;m<b;m++)if(!d[m].label){f=!0;break}f||(p="<option></option>")}n='<div class="datagrid-filter-wrapper'.concat(i,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(o),'<label class="audible" for="').concat(c,'">').concat(o.name,"</label>");var C=_.stringAttributes(this,this.settings.attributes,"filter-".concat(null===(a=o.id)||void 0===a||null==a?void 0:a.toLowerCase()));switch(C||(C='id="'.concat(c,'"')),o.filterType){case"checkbox":break;case"date":n+="<input ".concat(o.filterDisabled?" disabled":"",' type="text" class="datepicker" ').concat(C,"/>");break;case"integer":s={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:P.currentLocale.data.numbers?P.currentLocale.data.numbers.group:",",decimal:P.currentLocale.data.numbers?P.currentLocale.data.numbers.decimal:".",negative:P.currentLocale.data.numbers?P.currentLocale.data.numbers.minusSign:"-"}},process:"number"},o.filterMaskOptions&&(o.filterMaskOptions=_.extend(!0,{},s,o.filterMaskOptions)),o.maskOptions&&(o.maskOptions=_.extend(!0,{},s,o.maskOptions)),n+="<input".concat(o.filterDisabled?" disabled":"",' type="text" ').concat(C," />");break;case"percent":case"decimal":var T={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:P.currentLocale.data.numbers?P.currentLocale.data.numbers.group:",",decimal:P.currentLocale.data.numbers?P.currentLocale.data.numbers.decimal:".",negative:P.currentLocale.data.numbers?P.currentLocale.data.numbers.minusSign:"-"}},process:"number"};o.numberFormat?(s={patternOptions:{decimalLimit:o.numberFormat.maximumFractionDigits}},o.filterMaskOptions&&(o.filterMaskOptions=_.extend(!0,{},s,T,o.filterMaskOptions)),o.maskOptions&&(o.maskOptions=_.extend(!0,{},s,T,o.maskOptions))):(o.filterMaskOptions&&"function"!=typeof o.filterMaskOptions&&(o.filterMaskOptions=_.extend(!0,{},T,o.filterMaskOptions)),o.maskOptions&&"function"!=typeof o.maskOptions&&(o.maskOptions=_.extend(!0,{},T,o.maskOptions))),n+="<input".concat(o.filterDisabled?" disabled":"",' type="text" ').concat(C," />");break;case"contents":case"select":if(n+="<select ".concat(C," ").concat("select"===o.filterType?'class="dropdown"':'multiple class="multiselect"').concat(o.filterDisabled?" disabled":"",">").concat(p),d)for(var S=0,M=d.length;S<M;S++){var L=d[S],z=o.caseInsensitive&&"string"==typeof L.value?L.value.toLowerCase():L.value;L&&""!==z&&(n+='<option value = "'.concat(z,'">').concat(L.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(n+="<select ".concat(C,' class="multiselect" multiple').concat(o.filterDisabled?" disabled":"",">"),d)for(var V=0,N=d.length;V<N;V++){var U=d[V],G=o.caseInsensitive&&"string"==typeof U.value?U.value.toLowerCase():U.value;U&&"string"==typeof U.label&&(n+='<option value = "'.concat(G,'">').concat(U.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":n+="<input ".concat(o.filterDisabled?" disabled":"",' type="text" class="timepicker" ').concat(C,"/>");break;case"lookup":n+="<input ".concat(o.filterDisabled?" disabled":"",' type="text" class="lookup" ').concat(C," >");break;default:n+="<input".concat(o.filterDisabled?" disabled":"",' tabindex="0" type="text" ').concat(C,"/>")}n+="</div>"}return e.filterType||(n='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(i),'"></div>')),n},attachFilterRowEvents:function(){var e=this,t=this;if(this.settings.filterable){this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header");var n,i=null;this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",function(){var a=this,s=$(this),o=s.data("popupmenu"),c=s.closest('th[role="columnheader"]'),d="";return o?o.close(!0,!0):s.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",function(p,f,m){t.hideTooltip(),i=m,d=c.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","")}).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",function(){var p=$(a).data("popupmenu");p&&p.destroy(),i=null;var f=t.columnById(c.attr("data-column-id"))[0],m=c.find("input"),b=c.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");if(f&&/date|integer|decimal/.test(f.filterType))if("date"===f.filterType){var C=f.editorOptions||{};f.dateFormat&&(C.dateFormat=f.dateFormat),t.filterSetDatepicker(m,b,C)}else{var T=f.filterMaskOptions?f.filterMaskOptions:f.maskOptions,S=(null==T||null==T?void 0:T.rangeNumberDelimeter)||"-",M="in-range"===b,L=m.data("mask"),z=M?{process:"rangeNumber",patternOptions:{delimeter:S}}:{process:"number",patternOptions:{delimeter:""}};L&&L.settings.process!==z.process&&(f.filterMaskOptions&&(f.filterMaskOptions=_.extend(!0,{},f.filterMaskOptions,z)),f.maskOptions&&(f.maskOptions=_.extend(!0,{},f.maskOptions,z)),L.updated(z))}var V=m.val(),N=c.attr("data-column-id");t.element.triggerHandler("filteroperatorchanged",[{operator:b,defaultOperator:d,value:V,columnId:N}]),t.applyFilter(null,"selected")}),!1}),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){return clearTimeout(n),a.stopPropagation(),13!==a.which||(t.applyFilter(null,"enter"),a.preventDefault(),a.stopPropagation(),!1)}),this.element.off("focus.datagrid-filter-focus").on("focus.datagrid-filter-focus",".datagrid-filter-wrapper input",function(){var a;null===(a=i)||void 0===a||null==a||a.close();var s=$("#dropdown-list").attr("data-element-id"),o=$("#".concat(s)).data("dropdown");o&&o.isOpen()&&o.closeList("click")}),this.element.off("click.datagrid-filter-click").on("click.datagrid-filter-click","th",function(){var a;null===(a=i)||void 0===a||null==a||a.close();var s=$("#dropdown-list").attr("data-element-id"),o=$("#".concat(s)).data("dropdown");o&&o.isOpen()&&o.closeList("click")}),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){13!==a.which&&(e.activeCell&&e.activeCell.isFocused&&(e.activeCell.isFocused=!1),clearTimeout(n),n=setTimeout(function(){t.applyFilter(null,"keyup")},400))}),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each(function(){var a=t.columnById($(this).attr("data-column-id"))[0],s=$(this);if(!a)return!0;s.find("select.dropdown").each(function(){var p=$(this);p.dropdown(a.editorOptions).on("selected.datagrid",function(){t.applyFilter(null,"selected")}).on("listopened.datagrid",function(){var f=p.data("dropdown");f&&(_.isInViewport(f.list[0])||t.adjustPosLeft(f.list[0]))}),p.data("dropdown").settings.sourceArguments={column:a,container:s,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),s.find("select.multiselect").each(function(){var p=this,f=$(this);f.multiselect(a.editorOptions).on("selected.datagrid",function(){var m=$(p);$("#".concat(m.attr("id"))).val(m.val()),t.applyFilter(null,"selected")}),f.data("dropdown").settings.sourceArguments={column:a,container:s,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),a.filterMaskOptions?s.find("input").mask(a.filterMaskOptions):a.maskOptions&&s.find("input").mask(a.maskOptions),a.filterMask?s.find("input").mask(a.filterMask):a.mask&&s.find("input").mask(a.mask);var o=s.find(".datepicker");o.length&&"function"==typeof $().datepicker&&o.datepicker(a.editorOptions||{dateFormat:a.dateFormat}).on("listclosed.datepicker",function(){t.applyFilter(null,"selected")});var c=s.find(".lookup");c.length&&"function"==typeof $().lookup&&(a.editorOptions&&(a.editorOptions.clickArguments?a.editorOptions.clickArguments.grid=t:a.editorOptions.clickArguments={grid:t},a.editorOptions.clearArguments?a.editorOptions.clearArguments.grid=t:a.editorOptions.clearArguments={grid:t}),c.lookup(a.editorOptions||{}),t.settings.filterWhenTyping&&c.on("change",function(){t.applyFilter(null,"selected")}));var d=s.find(".timepicker");return d.length&&"function"==typeof $().timepicker&&(d.timepicker(a.editorOptions||{timeFormat:a.timeFormat}),d.on("change",function(){t.applyFilter(null,"enter")})),a.filterMask?s.find("input").mask({pattern:a.filterMask,mode:a.maskMode}):a.mask&&s.find("input").mask({pattern:a.mask,mode:a.maskMode}),null}),t.filterRowRendered=!0}},filterItemHtml:function(e,t,n){var i=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(e)});return'<li class="'.concat(e," ").concat(n?" is-checked":"",'"><a href="#">').concat(i,"<span>").concat(P.translate(t),"</span></a></li>")},filterButtonHtml:function(e){var t;if(!e.filterType)return"";var C,n=this,i=e.filterDisabled,a=$.isArray(e.filterConditions)?e.filterConditions:[],s=!a.some(function(m){return"string"!=typeof m&&m.selected}),o=function(m,b,C){var T,S;s?(T=!(!a.length||a[0]!==m)||C,S=a):(S=[],T="string"!=typeof m&&m.selected,a.forEach(function(V){S.push("string"==typeof V?V:V.value)}));var L,z="string"==typeof m?m:m.value;return!a.length||(L=(L=S)||a,$.inArray(z,L)>-1)?n.filterItemHtml(z,b,T):""},c=_.stringAttributes(this,this.settings.attributes,"btn-filter-".concat(null===(t=e.id)||void 0===t||null==t?void 0:t.toLowerCase())),d=function(m,b){return'<button type="button" '.concat(c,' class="btn-menu btn-filter').concat(b?" ".concat(b):"",'" data-init="false" ').concat(i?" disabled":"").concat(m?' data-default="'.concat(m,'"'):"",' tabindex="0" type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},p="",f="";return"contents"===e.filterType||"select"===e.filterType||"multiselect"===e.filterType?"":("text"===e.filterType&&(C=a.length?a[0]:"contains",a.forEach(function(T){"string"!=typeof T&&T.selected&&(C=T.value)}),f=C,p=0===a.length?(p=d(f)+o("contains","Contains",!0)+o("does-not-contain","DoesNotContain")+o("equals","Equals")+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")+o("end-with","EndsWith")+o("does-not-end-with","DoesNotEndWith")+o("start-with","StartsWith")+o("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",f):(p=d(f)+a.map(function(m){return o(m,function(b){var C=b;switch("string"!=typeof C&&(C=b.value),b=C.split("-").map(function(T){return T.charAt(0).toUpperCase()+T.slice(1)}).join("")){case"StartWith":b=b.replace("StartWith","StartsWith");break;case"EndWith":b=b.replace("EndWith","EndsWith");break;case"LessEquals":b=b.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":b=b.replace("GreaterEquals","GreaterOrEquals")}return b}(m))}).join("")).replace("{{icon}}",f)),"checkbox"===e.filterType&&(p=(p+=d(f=a.length?a[0]:"selected-notselected","btn-filter-checkbox")+o("selected-notselected","All",!0)+o("selected","Selected")+o("not-selected","NotSelected")).replace("{{icon}}",f)),"checkbox"!==e.filterType&&"text"!==e.filterType&&(p=(p+=d(f=a.length?a[0]:"equals")+o("equals","Equals","lookup"===e.filterType||"integer"===e.filterType||"decimal"===e.filterType||"date"===e.filterType||"time"===e.filterType)+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")).replace("{{icon}}",f)),/\b(date|integer|decimal|percent)\b/g.test(e.filterType)&&(p+=o("in-range","InRange")),/\b(date|time)\b/g.test(e.filterType)&&(p=(p+="".concat(o("less-than","EarlyThan")).concat(o("less-equals","EarlyOrEquals")).concat(o("greater-than","LaterThan")).concat(o("greater-equals","LaterOrEquals"))).replace("{{icon}}","less-than")),/\b(integer|decimal|percent)\b/g.test(e.filterType)&&(p=(p+="".concat(o("less-than","LessThan")).concat(o("less-equals","LessOrEquals")).concat(o("greater-than","GreaterThan")).concat(o("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"lookup"===e.filterType&&(p=(p=d(f=a.length?a[0]:"contains")+o("contains","Contains",!0)+o("does-not-contain","DoesNotContain")+o("equals","Equals")+o("does-not-equal","DoesNotEqual")+o("is-empty","IsEmpty")+o("is-not-empty","IsNotEmpty")+o("end-with","EndsWith")+o("does-not-end-with","DoesNotEndWith")+o("start-with","StartsWith")+o("does-not-start-with","DoesNotStartWith")+o("less-than","LessThan")+o("less-equals","LessOrEquals")+o("greater-than","GreaterThan")+o("greater-equals","GreaterOrEquals")).replace("{{icon}}",f)),p+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(e,t){var n=this,i=this,a=!1,s=function L(z){for(var V=0,N=z.length;V<N;V++)void 0!==z[V]._isFilteredOut&&delete z[V]._isFilteredOut,z[V].children&&L(z[V].children)};e?this.setFilterConditions(e):e=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(e)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=e,a=!0,this.settings.treeGrid&&s(this.settings.dataset));var o=function(L){for(var z=!0,V=function(G){var Z=i.columnById(e[G].columnId)[0];if(void 0===Z)return{v:!1};var oe,le=L&&void 0!==L[Z.field]?L[Z.field]:i.fieldValue(L,Z.field),re=null==le?"":le.toString().toLowerCase(),J=e[G].value.toString().toLowerCase(),ce=null,ke=null,_e=null,Oe=!1;if("percent"===Z.filterType&&(J=(J/100).toString(),"decimal"==="".concat(Z.name).toLowerCase()?(le=xn.Decimal(!1,!1,le,Z),J=xn.Decimal(!1,!1,J,Z)):"integer"==="".concat(Z.name).toLowerCase()&&(le=xn.Integer(!1,!1,le,Z),J=xn.Integer(!1,!1,J,Z))),"text"===Z.filterType&&(re=null==(le=(le=i.formatValue(Z.formatter,G,e[G].columnId,le,Z,L,i)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":le.toString().toLowerCase()),"contents"!==Z.filterType&&"select"!==Z.filterType&&"multiselect"!==Z.filterType||(le=null==le?"":le.toString().toLowerCase()),!("number"!=typeof le&&(isNaN(le)||""===le||e[G].value instanceof Array)||/^(date|time|text)$/.test(Z.filterType)))if(le=null===le?le:parseFloat(le),Z&&"rangeNumber"===(null===(oe=Z.maskOptions)||void 0===oe||null==oe?void 0:oe.process)){var ot,Ze=null===(ot=Z.maskOptions.patternOptions)||void 0===ot||null==ot?void 0:ot.delimeter;Ze=")".concat(Ze,"("),"("===J.substr(0,1)&&(J=J.substr(1)),")"===J.substr(-1)&&(J=J.substr(0,J.length-1)),J=J.split(Ze).map(function(Tt){return P.parseNumber(Tt)}).sort(function(Tt,ze){return Tt-ze}),Oe=!0}else J=P.parseNumber(J),Oe=!1;if("date"===Z.filterType||"time"===Z.filterType){"string"==typeof le&&(le=Z.formatter(!1,!1,le,Z,!0));var ft=function(Tt,ze){return(ze=P.parseDate(ze,e[G].format))&&("time"===Z.filterType&&(ze.setDate(1),ze.setMonth(0),ze.setYear(0)),ze=ze.getTime()),Tt instanceof Date?(Tt=new Date(Tt.getTime()),"time"===Z.filterType?(Tt.setDate(1),Tt.setMonth(0),Tt.setYear(0)):Z.editorOptions&&Z.editorOptions.showTime||(Tt.setHours(0),Tt.setMinutes(0),Tt.setSeconds(0),Tt.setMilliseconds(0)),Tt=Tt.getTime()):"string"==typeof Tt&&Tt&&(Tt=P.parseDate(Tt,Z.sourceFormat?"string"==typeof Z.sourceFormat?{pattern:Z.sourceFormat}:Z.sourceFormat:{pattern:e[G].format}))&&("time"===Z.filterType?(Tt.setDate(1),Tt.setMonth(0),Tt.setYear(0)):Z.editorOptions&&Z.editorOptions.showTime||(Tt.setHours(0),Tt.setMinutes(0),Tt.setSeconds(0),Tt.setMilliseconds(0)),Tt=Tt.getTime()),{rValue:Tt,cValue:ze}},Wt=null;if("in-range"===e[G].operator){var xt=i.settings.columns.indexOf(Z),jt=i.element.find(".datagrid-header th:eq(".concat(xt,") .datagrid-filter-wrapper input")).data("datepicker");jt&&(ke=jt.settings.range.separator,(ce=jt.settings.range.data)&&ce.start?Wt=ft(le,ce.start):ke&&J.indexOf(ke)>-1&&(Wt=ft(le,(_e=J.split(ke))[0])))}else Wt=ft(le,e[G].value);le=Wt?Wt.rValue:le,J=Wt?Wt.cValue:J}switch(e[G].operator){case"equals":if(e[G].value instanceof Array){z=!1;for(var Ut=0;Ut<e[G].value.length;Ut++)e[G].value[Ut].toLowerCase()===le&&(""!==le.toString()||""===e[G].value[Ut])&&(z=!0)}else z=le===J&&""!==le;break;case"does-not-equal":z=le!==J;break;case"contains":z=re.indexOf(J)>-1&&""!==le.toString();break;case"does-not-contain":z=-1===re.indexOf(J);break;case"end-with":z=re.lastIndexOf(J)===re.length-J.toString().length&&""!==re&&re.length>=J.toString().length;break;case"start-with":z=0===re.indexOf(J)&&""!==re;break;case"does-not-end-with":z=!(z=re.lastIndexOf(J)===re.length-J.toString().length&&""!==re&&re.length>=J.toString().length);break;case"does-not-start-with":z=!(0===re.indexOf(J)&&""!==re);break;case"is-empty":z=""===re;break;case"is-not-empty":if(""===le){z=""!==le;break}z=null!==le;break;case"in-range":if(z=!1,ce&&ce.startDate&&ce.endDate){var en=ce.startDate.getTime(),gn=ce.endDate.getTime();z=le>=en&&le<=gn&&null!==le}else if(_e){var Pn=P.parseDate(_e[0],e[G].format),Dt=P.parseDate(_e[1],e[G].format);Pn&&Dt&&(Pn=Pn.getTime(),Dt=Dt.getTime(),z=le>=Pn&&le<=Dt&&null!==le)}Oe&&(z=le>=J[0]&&le<=J[1]&&""!==le&&null!==le);break;case"less-than":z=le<J&&""!==le&&null!==le;break;case"less-equals":z=le<=J&&""!==le&&null!==le;break;case"greater-than":z=le>J&&""!==le&&null!==le;break;case"greater-equals":z=le>=J&&""!==le&&null!==le;break;case"selected":if(Z&&Z.isChecked){z=Z.isChecked(le);break}z=("1"===re||"true"===re||!0===le||1===le)&&""!==re;break;case"not-selected":if(Z&&Z.isChecked){z=!Z.isChecked(le);break}z="0"===re||"false"===re||!1===le||0===le||""===re;break;case"selected-notselected":z=!0}return z?void 0:{v:!1}},N=0;N<e.length;N++){var U=V(N);if("object"===Ge(U))return U.v}return z};if(!this.settings.disableClientFilter)if(this.settings.treeGrid)s(this.settings.dataset),function(){for(var L=!0,z=0,V=e.length;z<V;z++)"checkbox"!==e[z].filterType&&""===e[z].value.toString().trim()||(L=!1),"text"===e[z].filterType&&"is-empty"===e[z].operator&&(L=!1);return L}()||function L(z){for(var V=!0,N=0,U=z.length;N<U;N++){var G=z[N],Z=!0;if(G.children)if(n.settings.allowChildExpandOnMatch&&n.settings.allowChildExpandOnMatchOnly){var oe=o(G);oe||(Z=L(G.children)),oe?(G._isFilteredOut=!1,V=!1):Z?(G._isFilteredOut=!o(G),G._isFilteredOut||(V=!1)):V=!1}else(Z=L(G.children))?(G._isFilteredOut=!o(G),G._isFilteredOut||(V=!1)):V=!1;else G._isFilteredOut=!o(G),G._isFilteredOut||(V=!1)}return V}(this.settings.dataset);else if(this.settings.groupable)for(var c,d=0,p=this.settings.dataset.length;d<p;d++){for(var f=!0,m=0,b=this.settings.dataset[d].values.length;m<b;m++)c=!o(this.settings.dataset[d].values[m]),this.settings.dataset[d].values[m]._isFilteredOut=c,c||(f=!1);this.settings.dataset[d]._isFilteredOut=f}else for(var C,T=0,S=this.settings.dataset.length;T<S;T++)C=!o(this.settings.dataset[T]),this.settings.dataset[T]._isFilteredOut=C;if(this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),a){var M={trigger:t,type:"filtered"};this.settings.source&&(M.preserveSelected=this.settings.allowSelectAcrossPages),this.setSearchActivePage(M)}this.settings.disableClientFilter&&"restore"===t||(this.element.trigger("filtered",{op:"apply",conditions:e,trigger:t}),this.saveUserSettings())},adjustPosLeft:function(e){var t=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth;t.left<0&&t.right<=n?e.style.left="".concat(20,"px"):t.left>=0&&!(t.right<=n)&&(e.style.left="".concat(n-t.width-20,"px"))},setChildExpandOnMatch:function(){var e=this.settings;e.treeGrid&&(function t(n){for(var i=!1,a=0,s=n.length;a<s;a++){var o,c=n[a];c._isFilteredOut&&!i&&null!==(o=c.children)&&void 0!==o&&o?.length&&(c._isFilteredOut=!t(c.children)),"boolean"!=typeof c._isFilteredOut||c._isFilteredOut||(i=!0)}return i}(e.dataset),function t(n,i){for(var a=0,s=n.length;a<s;a++){var o=n[a],c=o.children,d=c?c.length:0;if(d){if(!o._isFilteredOut)if(e.allowChildExpandOnMatch&&!e.allowChildExpandOnMatchOnly)for(var p=0;p<d;p++)c[p]._isFilteredOut=!1;else{for(var f=!0,m=0;m<d;m++)c[m]._isFilteredOut||(f=!1);o.isAllChildrenFiltered=f}t(c)}}}(e.dataset))},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each(function(){var e=$(this);e.val(""),e.is("select")&&e.find("option").each(function(){$(this).prop("selected",!1)}),e.trigger("updated")}),this.element.find(".datagrid-header .btn-filter").each(function(){var e=$(this),t=e.next(),n=t.find("li:first");e.find("svg:first > use").attr("href","#icon-filter-".concat(e.attr("data-default"))),t.find(".is-checked").removeClass("is-checked"),n.addClass("is-checked")}))},setFilterConditions:function(e){this.clearFilterFields();for(var t=0;t<e.length;t++){var n=this.element.find('.datagrid-header th[data-column-id="'.concat(e[t].columnId,'"]')),i=n.find("input, select"),a=n.find(".btn-filter"),s=a.next();if(void 0===e[t].value&&(e[t].value=""),i.val(e[t].value),i.is(".lookup")&&1===i.parent().find("svg.close").length&&e[t].value&&i.parent().find("svg.close").removeClass("is-empty"),i.is("select")){var o=e[t].value instanceof Array?e[t].value[0]:e[t].value;if(e[t].innerHTML&&(i[0].innerHTML=e[t].innerHTML),i.find('option[value="'.concat(o,'"]')).length)if(e[t].value instanceof Array&&!e[t].selectedOptions){var c=i[0].querySelectorAll("option");i.val("");for(var d=0;d<c.length;d++)c[d].selected=!1;for(var p=0;p<e[t].value.length;p++)i.find('option[value="'.concat(e[t].value[p],'"]')).prop("selected",!0)}else i.find('option[value="'.concat(e[t].value,'"]')).prop("selected",!0);else{var f=i.data("dropdown");f&&f.setCode(e[t].value)}i.trigger("updated")}a.find("svg:first > use").attr("href","#icon-filter-".concat(e[t].operator)),s.find(".is-checked").removeClass("is-checked"),s.find(".".concat(e[t].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var e=[],t=this;return this.element.find("th.is-filterable").each(function(){var n,i=$(this),a=i.find(".btn-filter"),s=i.find("input, select"),o=s.is("select"),c=a.find(".icon-dropdown:first"),d=null;if((a.length||o)&&"selected-notselected"!==(n=o?"equals":c.getIconName().replace("filter-",""))&&!(""===s.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(n)||s.val()instanceof Array&&0===s.val().length)){var p=s.val()?s.val():"";s.attr("data-mask-mode")&&"number"===s.attr("data-mask-mode")&&(p=P.parseNumber(p));var f={columnId:i.attr("data-column-id"),operator:n,value:p};s.data("datepicker")&&(d=s.data("datepicker").pattern,f.format=d),s.data("timepicker")&&(d=s.data("timepicker").settings.timeFormat,f.format=d),s.is("select")&&(f.innerHTML=s[0].innerHTML);var m=t.columnById(f.columnId);m&&m[0]&&(f.filterType=m[0].filterType),e.push(f)}}),e},getExtraTop:function(){var e=this.settings,t={default:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},filterable:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},group:{extraSmall:-22,short:-25,small:-25,medium:-30,normal:-39,large:-39},groupFilter:{extraSmall:-28,short:-29,small:-29,medium:-32,normal:-39,large:-39}},n="extra-small"===e.rowHeight?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable?t.groupFilter[n]:t.group[n]:e.filterable?t.filterable[n]:t.default[n]},getTargetHeight:function(){var e=this.settings,t={default:{extraSmall:20,short:20,small:20,medium:28,normal:35,large:35},filterable:{extraSmall:47,short:53,small:53,medium:54,normal:60,large:60},group:{extraSmall:43,short:46,small:46,medium:56,normal:74,large:74},groupFilter:{extraSmall:80,small:80,short:83,medium:87,normal:103,large:103}},n="extra-small"===e.rowHeight?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable&&this.filterRowRendered?t.groupFilter[n]:t.group[n]:e.filterable&&this.filterRowRendered?t.filterable[n]:t.default[n]},getCellPadding:function(){return{"extra-small":8,short:8,small:8,medium:16,normal:16,large:16}[this.settings.rowHeight]},createDraggableColumns:function(){var e=this,t=e.headerNodes().not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column"),n=$(".drag-target-arrows",e.element);n.length||(e.element.prepend('<span class="drag-target-arrows" style="height: '.concat(e.getTargetHeight(),'px;"></span>')),n=$(".drag-target-arrows",e.element)),t.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),t.prepend('<span class="is-draggable-target"></span>'),t.last().append('<span class="is-draggable-target last"></span>'),e.element.addClass("has-draggable-columns"),$(".handle",t).each(function(){var i=null,a=null,s=null,o=0,c=$(this),d=c.parent();c.on("mousedown.datagrid",function(p){p.preventDefault(),e.editor&&e.editor.input&&e.commitCellEdit(),d.drag({clone:!0,cloneAppendTo:t.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",function(f,m,b){(i=b).removeAttr("id").addClass("is-dragging-clone").css({left:P.isRTL()?m.right-i.width():m.left,top:m.top,height:d.height(),border:0}),$(".is-draggable-target",i).remove(),e.setDraggableColumnTargets(),o=e.getExtraTop(),a=d.position(),s={top:m.top-a.top,left:m.left-a.left};var C=e.targetColumn(a);e.draggableStatus.startIndex=C,p.stopImmediatePropagation()}).on("drag.datagrid",function(f,m){i[0].style.left="".concat(parseInt(P.isRTL()?m.left+m.offset.x-m.clone.width():m.left,10),"px"),i[0].style.top="".concat(parseInt(m.top,10),"px"),a={top:m.top-s.top,left:m.left-s.left},P.isRTL()&&(a.left=parseInt(i[0].style.left,10));var b=0,C=null,T=null,S=e.targetColumn(a);if($(".is-draggable-target",t).add(n).removeClass("is-over"),-1!==S)for(var M=0,L=e.draggableColumnTargets.length;M<L;M++)if(b=M+1,(C=e.draggableColumnTargets[M]).index===S&&C.index!==e.draggableStatus.startIndex){C.index>e.draggableStatus.startIndex&&b<L&&(C=e.draggableColumnTargets[b]),C.el.addClass("is-over"),n.addClass("is-over"),T=C.el[0].getBoundingClientRect(),n[0].style.left="".concat(parseInt(T.left+(P.isRTL()?2:0),10),"px");var z=0;C.el.hasClass("last")&&(z=-(d.height()-3)),n[0].style.top="".concat(parseInt(T.top,10)+1+o+z,"px")}p.stopImmediatePropagation()}).on("dragend.datagrid",function(f,m){P.isRTL()||(i[0].style.left="".concat(parseInt(m.left,10),"px"),i[0].style.top="".concat(parseInt(m.top,10),"px")),a={top:m.top-s.top,left:m.left-s.left},P.isRTL()&&(a.left=parseInt(i[0].style.left,10));var b,C,T,S,M=e.targetColumn(a),L=d.data("drag"),z=[];if(L&&L.destroy&&L.destroy(),e.draggableStatus.endIndex=M,$(".is-draggable-target",t).add(n).removeClass("is-over"),-1!==e.draggableStatus.endIndex&&e.draggableStatus.startIndex!==e.draggableStatus.endIndex){for(b=0,C=e.settings.columns.length;b<C;b++)e.settings.columns[b].hidden||"selectionCheckbox"===e.settings.columns[b].id||z.push(b);if(T=z[e.draggableStatus.startIndex]||0,S=z[e.draggableStatus.endIndex]||0,e.settings.showDirty&&e.dirtyArray){var V=function(U,G,Z,oe){for(var le=[],re=Z;re<=oe;re++)G[re]&&"object"===Ge(G[re])?e.setDirtyCell(U,re,G[re]):!1===G[re]&&le.push(re);le.forEach(function(J){return e.clearDirtyCell(U,J)})},N=function(U,G,Z,oe,le){e.dirtyArray[U][le]&&e.dirtyArray[U][le].isDirty?Z[le]=!0:(Z[le]=La({},G[oe]),Z[le].cell=le,Z[le].column=e.settings.columns[le])};T>S?e.dirtyArray.forEach(function(U,G){for(var Z=Array(T+1).fill(!1),oe=S;oe<=T;oe++)U&&U[oe]&&U[oe].isDirty&&(oe===T?N(G,U,Z,T,S):N(G,U,Z,oe,oe+1));V(G,Z,S,T)}):T<S&&e.dirtyArray.forEach(function(U,G){for(var Z=Array(S+2).fill(!1),oe=S;oe>=T;oe--)U&&U[oe]&&U[oe].isDirty&&(oe===T?N(G,U,Z,T,S):N(G,U,Z,oe,oe-1));V(G,Z,T,S)})}e.updateGroupHeadersAfterColumnReorder(T,S),e.arrayIndexMove(e.settings.columns,T,S),e.updateColumns(e.settings.columns)}})})})},setDraggableColumnTargets:function(){var e,t,n=this,i=n.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column");n.draggableColumnTargets=[],n.draggableStatus={},$(".is-draggable-target.last",i.last()).length||i.last().append($(".is-draggable-target.last",n.headerNodes())),$(".is-draggable-target",i).each(function(a){var s=$(this).is(".last")?a-1:a;e=i.eq(s),t=e.position(),n.draggableColumnTargets.push({el:$(this),index:s,pos:t,width:e.outerWidth(),height:e.outerHeight(),dropArea:{x1:t.left-20,x2:t.left+e.outerWidth()+20,y1:t.top-20+n.getExtraTop(),y2:t.top+e.outerHeight()+20}})})},targetColumn:function(e){var t,n,i,a=-1;for(n=0,i=this.draggableColumnTargets.length-1;n<i;n++)if(e.left>(t=this.draggableColumnTargets[n]).dropArea.x1&&e.left<t.dropArea.x2&&e.top>t.dropArea.y1&&e.top<t.dropArea.y2&&(a=t.index,P.isRTL()))return a;return a},arrayIndexMove:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},resetGroupArray:function(){if(this.settings.groupable){this.groupArray=[];for(var e=0,t=this.settings.dataset.length;e<t;e++)for(var n=0,i=this.settings.dataset[e].values.length;n<i;n++)this.groupArray.push({group:e,node:n})}},resequenceGroupRows:function(){if(this.settings.groupable)for(var e=this.tableBody.find("tr:not(.datagrid-rowgroup-header)"),t=0;t<e.length;t++)e[t].setAttribute("aria-rowindex",this.pagingRowIndex(t+1))},createDraggableRowsGroupable:function(){var e=this,t=this,n=this.settings;if(n.rowReorder&&n.groupable){"rowReorder"===n.columns[0].id&&(n.columns[0].resizable=!1,this.tableBody.find('> [role="row"] td:first-child').removeClass("l-center-text").addClass("reorder-group-child-col"));var i,a="> tr:not(.is-dragging-clone)",s=function(o){for(var c=0,d=i.length;c<d;c++){var p=i[c].rect;if(o.top>=p.top&&o.top<p.bottom)return La({},i[c])}return null};this.tableBody.find(a).find(".datagrid-reorder-icon").each(function(){var o=null,c=null,d=null,p=!1,f=$(this);f.off("mousedown.datagrid").on("mousedown.datagrid",function(m){var b;m.preventDefault(),!((b=m).metaKey||b.ctrlKey||b.altKey||b.shiftKey)&&1===(b.buttons||b.which||b.button)&&f.closest("tr").drag({axis:"y",clone:!0,cloneAppendTo:f.closest("tbody"),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(b,C,T){(o=T).removeAttr("id").addClass("is-dragging-clone groupable"),o.css({top:"".concat(C.top,"px")});var S=o.find("> td");$(this).find("> td").each(function(L,z){return S.eq(L).width($(z).width())}),function(){i=[];for(var L=e.tableBody.find(a),z=0,V=-1,N=-1,U=L.length;z<U;z++){var G=L[z];"rowgroup"===G.getAttribute("role")?(V++,N=-1):N++,i.push({group:V,node:N,row:G,idx:z,rect:G.getBoundingClientRect(),role:G.getAttribute("role")})}}(),(d={idx:t.tableBody.find(a).index(this),rect:this.getBoundingClientRect(),role:this.getAttribute("role"),row:this}).group=i[d.idx].group,d.node=i[d.idx].node;var M=$(this);"rowgroup"===d.role?c=M.add(M.nextUntil(".datagrid-rowgroup-header")):"row"===d.role&&(c=M),c.css("opacity",".4"),p=!0}).on("drag.datagrid",function(b,C){if(o&&p){p=!1;var T=!1,S=s(C);null!==S&&("rowgroup"===d.role&&(T=d.group!==S.group),"row"===d.role&&(T=d.role===S.role&&d.group===S.group));var M=T?"":"not-allowed";o.add(o.find(".datagrid-reorder-icon")).css("cursor",M),p=!0}}).off("dragend.datagrid").on("dragend.datagrid",function(b,C){var T=C.top>d.rect.top,S=s(C),M=!1;if(null!==S){var L;if("rowgroup"===d.role&&d.group!==S.group){var z=".datagrid-rowgroup-header";T?(L=$(S.row).nextUntil(z).last(),c.insertAfter(L)):(L="rowgroup"===S.role?S.row:$(S.row).prevUntil(z).last().prev(z),c.insertBefore(L)),t.arrayIndexMove(n.dataset,d.group,S.group),M=!0}else"row"===d.role&&d.role===S.role&&d.group===S.group&&(t.arrayIndexMove(n.dataset[d.group].values,d.node,S.node),c[T?"insertAfter":"insertBefore"](L=S.row),M=!0);M&&(t.resetGroupArray(),t.resequenceGroupRows(),t.syncSelectedRowsIdx(),t.element.trigger("rowreorder",[{start:{rowIndex:d.idx,group:d.group,node:-1!==d.node?d.node:null},end:{rowIndex:S.idx,group:S.group,node:-1!==d.node?S.node:null},rowreorderRows:c,role:d.role}]))}c.css("opacity",""),p=!1;var N=f.closest("tr").data("drag");null==N||null==N||N.destroy()})})})}},createDraggableRows:function(){var e=this;this.settings.rowReorder&&(this.settings.groupable?this.createDraggableRowsGroupable():(this.tableBody.children().filter(function(){return $(this).find(".datagrid-reorder-icon").length<1}).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",function(t,n){e.isSafari&&n.start.css({display:"inline-block"})}).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",function(t,n){e.isSafari&&n.end.css({display:""}),e.reorderRow(n.startIndex,n.endIndex,n)})))},reorderRow:function(e,t,n){var i=t>e,a=this.tableBody.find("tr").eq(e),s=this.tableBody.find("tr").eq(t),o={start:this.dataRowIndex(n?n.start:s)};o.end=o.start+(t-e),this.arrayIndexMove(this.settings.dataset,o.start,o.end),n?(this.settings.rowTemplate||this.settings.expandableRow)&&(i?(this.tableBody.find("tr").eq(2*e).insertAfter(n.end),n.end.next().next().insertAfter(n.over)):this.tableBody.find("tr").eq(2*e).next().insertAfter(n.end)):a[i?"insertAfter":"insertBefore"](s);for(var c=this.tableBody.find("tr:not(.datagrid-expandable-row)"),d=0;d<c.length;d++)c[d].setAttribute("data-index",d),c[d].setAttribute("aria-rowindex",this.pagingRowIndex(d+1));this.element.trigger("rowreorder",[{endIndex:t,startIndex:e,over:s,start:a}]),this.syncSelectedRowsIdx()},fieldValue:function(e,t){if(!t||!e)return"";var n,i=(n=t.indexOf(".")>-1?t.split(".").reduce(function(a,s){return a?a[s]:""},e):e[t])||0===n||!1===n?n:"";return $e.escapeHTML(i)},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter(function(e){return 1===e.depth}))},setTreeDepth:function(e){if(this.settings.treeGrid){var t=this,n=0,i=function o(c,d){var p,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n++,t.settings.treeDepth.push({idx:n,depth:d,parents:f.slice(),node:c});var m=null==c||null===(p=c?.children)||void 0===p||null==p?void 0:p.length;if(m){f.push(n-1);for(var b=0;b<m;b++)o(c.children[b],d+1,f.slice())}};e=e||this.settings.dataset,t.settings.treeDepth=[];for(var a=0,s=e.length;a<s;a++)i(e[a],1)}},setRowGrouping:function(){var e=this.settings.groupable;e&&(this.originalDataset?(!this.settings.dataset||this.settings.dataset.length>0)&&(this.settings.dataset=this.originalDataset):this.originalDataset=this.settings.dataset.slice(),this.settings.dataset=e.aggregator&&"none"!==e.aggregator?"sum"!==e.aggregator?"max"!==e.aggregator?"min"!==e.aggregator?"avg"!==e.aggregator?"count"!==e.aggregator?"list"!==e.aggregator?Oi(this.settings.dataset,e.fields):Oi.list(this.settings.dataset,e.fields,e.aggregatorOptions):Oi.count(this.settings.dataset,e.fields,e.aggregate):Oi.avg(this.settings.dataset,e.fields,e.aggregate):Oi.min(this.settings.dataset,e.fields,e.aggregate):Oi.max(this.settings.dataset,e.fields,e.aggregate):Oi.sum(this.settings.dataset,e.fields,e.aggregate):Oi.none(this.settings.dataset,e.fields))},renderRows:function(){var e="",t="",n="",i=0,a=this.settings,s=this.table.find("tbody"),o=1;if(this.pagerAPI){var c=this.pagerAPI.state;o=c.filteredActivePage?c.filteredActivePage:c.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),this.currentPageRows=[],i=0;i<this.settings.columns.length;i++){var d=this.settings.columns[i],p=this.getContainer(d.id),f=this.columnWidth(d,i);switch(p){case"left":this.bodyColGroupHtmlLeft+="<col".concat(f).concat(d.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(f).concat(d.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(f).concat(d.hidden?' class="is-hidden"':"","></col>")}d.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===s.length&&(this.hasLeftPane&&(this.tableBodyLeft=$('<tbody role="rowgroup"></tbody>'),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$('<tbody role="rowgroup"></tbody>'),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$('<tbody role="rowgroup"></tbody>'),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,this.runningCount=0,a.treeGrid&&a.paging&&!a.source&&o>1&&(this.recordCount=a.treeRootNodes[a.pagesize*o-a.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();var m=!1;this.originalDataset&&!a.groupable&&a.dataset.length>0&&(a.dataset=this.originalDataset);for(var b=0;b<a.dataset.length;b++){var C,T;if(a.paging&&!a.source){if(1===o&&b-this.filteredCount>=a.pagesize){a.dataset[b]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(o>1&&!(b-this.filteredCount>=a.pagesize*(o-1)&&b-this.filteredCount<a.pagesize*o)){a.dataset[b]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!a.virtualized||this.isRowVisible(this.recordCount))if((!a.treeGrid&&a.dataset[b])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(a.dataset[b].values){for(var S=a.dataset[b].values.length,M=0,L=0;L<S;L++)a.dataset[b].values[L]._isFilteredOut&&M++;if(M===S)continue}if(!this.settings.groupable.suppressGroupRow){var z=this.rowHtml(a.dataset[b],this.recordCount,b,!0);this.hasLeftPane&&z.left&&(t+=z.left),z.center&&(e+=z.center),this.hasRightPane&&z.right&&(n+=z.right)}if(this.settings.groupable.showOnlyGroupRow&&a.dataset[b].values[0]){var V=a.dataset[b].values[0];a.dataset[b].list&&(V.list=a.dataset[b].list),V.values=a.dataset[b].values;var N=this.rowHtml(V,this.recordCount,b);this.hasLeftPane&&N.left&&(t+=N.left),N.center&&(e+=N.center),this.hasRightPane&&N.right&&(n+=N.right),this.recordCount++,this.groupArray.push({group:b,node:0});continue}for(var U=0;U<a.dataset[b].values.length;U++)if(!a.dataset[b].values[U]._isFilteredOut){var G=this.rowHtml(a.dataset[b].values[U],this.recordCount,a.dataset[b].values[U].idx);this.hasLeftPane&&G.left&&(t+=G.left),G.center&&(e+=G.center),this.hasRightPane&&G.right&&(n+=G.right),this.recordCount++,this.groupArray.push({group:b,node:U})}if(this.settings.groupable.groupFooterRow){var Z=this.rowHtml(a.dataset[b],this.recordCount,b,!0,!0);this.hasLeftPane&&Z.left&&(t+=Z.left),Z.center&&(e+=Z.center),this.hasRightPane&&Z.right&&(n+=Z.right)}}else{var oe=b;a.treeGrid&&(oe=this.recordCount),this.runningCount++;var le,re=this.rowHtml(a.dataset[b],oe,b);this.hasLeftPane&&re.left&&(t+=re.left),re.center&&(e+=re.center,a.treeGrid&&null!==(le=this.filterExpr)&&void 0!==le&&le?.length&&$("<table>".concat(re.center,"</table>")).find("tr:first").is(".is-hidden")&&this.filteredCount++),this.hasRightPane&&re.right&&(n+=re.right),null!==(C=a.dataset[b])&&void 0!==C&&C?._isFilteredOut||this.recordCount++,this.visibleRowCount=oe+1,null!==(T=a.dataset[b])&&void 0!==T&&T?.rowStatus&&(m=!0)}else this.recordCount++}if(this.settings.summaryRow){this.element.addClass("has-summary-row");var J=this.calculateTotals(),ce=this.rowHtml(J,this.recordCount,null,!1,!0);this.hasLeftPane&&ce.left&&(t+=ce.left),ce.center&&(e+=ce.center),this.hasRightPane&&ce.right&&(n+=ce.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.settings.spacerColumn&&(this.bodyColGroupHtml+='<col style="width: 100%">'),this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.tableBodyLeft||this.headerRowLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.tableBodyRight||this.headerRowRight).before(this.bodyColGroupRight))),this.hasLeftPane&&ue.html(this.tableBodyLeft,t,"*"),ue.html(this.tableBody,e,"*"),this.hasRightPane&&ue.html(this.tableBodyRight,n,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(m),this.afterRender()},afterRender:function(){var e=this,t=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&t.tableBody.find("tr").each(function(c){var d,p=0,f=0,m=$(this);d=m.height(),t.tableBodyLeft&&(p=t.tableBodyLeft.find("tr").eq(c).height()),t.tableBodyRight&&(f=t.tableBodyLeft.find("tr").eq(c).height());var b=Math.max(p,d,f);return m.css("height",b),t.tableBodyLeft&&(p=t.tableBodyLeft.find("tr").eq(c).css("height",b)),t.tableBodyRight&&(f=t.tableBodyLeft.find("tr").eq(c).css("height",b)),!0}),this.settings.onPostRenderCell)for(var n=function(c){var d=t.settings.columns[c];d.component&&t.tableBody.find("tr").each(function(){var p,f,m=$(this),b=t.settings.treeGrid?t.actualPagingRowIndex(t.actualRowIndex(m)):t.dataRowIndex(m),C=m.attr("data-lineage"),T=t.rowData(b),S=t.columnIdxById(d.id)-((null===(p=t.settings.frozenColumns)||void 0===p||null===(f=p?.left)||void 0===f||null==f?void 0:f.length)||0),M={row:C||b,cell:S,value:T,rowData:T,col:d,api:t};t.settings.onPostRenderCell(m.find("td").eq(S).find(".datagrid-cell-wrapper .content")[0],M)})},i=0;i<this.settings.columns.length;i++)n(i);var a=t.tableBody.find("select.dropdown");a.dropdown&&a.dropdown(),t.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",function(){var c=$(this),d=c.val(),p=c.closest("tr");t.updateCellNode(p.attr("aria-rowindex"),c.closest("td").index(),d,!1,!0)});var s=t.tableBody.find(".spinbox");s.spinbox&&s.spinbox(),t.settings.source||t.displayCounts(),t.setAlternateRowShading(),t.createDraggableRows();var o=document.activeElement;t.activeCell.isFocused&&(!o||o&&"body"===o.tagName.toLowerCase())&&t.setActiveCell(t.activeCell.row,t.activeCell.cell),t.settings.paging&&t.settings.source&&!t.settings.allowSelectAcrossPages&&(t.preventSelection||(t._selectedRows=[]),t.syncSelectedUI()),t.settings.paging&&t.settings.source&&t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),t.settings.paging&&!t.settings.source&&null===t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.element.find(".datagrid-img").off("error.datagrid").on("error.datagrid",function(c){var d=$(c.target),p=d.parent(),f=$('<svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-'.concat(e.settings.fallbackImage,'"></use></svg>'));f.tooltip(e.settings.fallbackTooltip),f.css(e.settings.fallbackSize),p.append(f),d.remove()}),setTimeout(function(){t.element.trigger("afterrender",{body:t.container.find("tbody"),header:t.container.find("thead"),pager:t.pagerAPI}),e.activateFirstCell()})},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var e=this,t=this;if(t.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var n=t.tableBody.find("tr");if(0===n.length)return;for(var i=function(s){var o=e.settings.columns[s];o.component&&n.each(function(){var c=$(this),d=c.index(),p=t.columnIdxById(o.id),f={row:c.index(),cell:p,value:t.settings.dataset[d],col:o,api:t};t.settings.onDestroyCell(c.find("td").eq(p).find(".datagrid-cell-wrapper .content")[0],f)})},a=0;a<this.settings.columns.length;a++)i(a)}},cacheVirtualStats:function(){var t=this.bodyWrapperCenter[0].scrollTop,n="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25,i=this.element[0].offsetHeight-n,a="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;"extra-small"===this.settings.rowHeight&&(n=22,a=27),this.virtualRange={rowHeight:a,top:Math.max(t-(this.settings.virtualRowBuffer-1)*a,0),bottom:t+i+(this.settings.virtualRowBuffer-1)*a,totalHeight:a*this.settings.dataset.length,bodyHeight:i}},isRowVisible:function(e){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&e&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=e&&this.pagerAPI.activePage*this.settings.pagesize>=e;0===e&&this.cacheVirtualStats();var t=e*this.virtualRange.rowHeight;return t>=this.virtualRange.top&&t<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var e=this.virtualRange.totalHeight-this.virtualRange.bottom,t=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),t>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),t>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(t,"px")),0===t&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),e>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),e>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(e,"px")),e<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(e,t,n,i,a,s,o){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return o=o||this,void 0===e&&(e=this.defaultFormatter),"string"==typeof e?xn[e](t,n,i,a,s,o,c).toString():e(t,n,i,a,s,o,c).toString()},rowHtml:function(e,t,n,i,a,s,o){var c,d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=!1,f=this,m=this.settings.summaryRow&&!i&&a,b=f.pagerAPI?f.pagerAPI.activePage:1,C={left:"",center:"",right:""},T=f.settings.treeDepth?f.settings.treeDepth[t]:0,S=null,M=0,L=!1,z=function In(be){var Re=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Re+=be.length;for(var At=0,lt=be.length;At<lt;At++)be[At].children&&(Re=In(be[At].children,Re));return Re};if(!e)return"";var V=f.settings.enableTooltips,N=!1;if(f.settings.isRowDisabled&&"function"==typeof f.settings.isRowDisabled){var U=f.settings.isRowDisabled(n,e);U&&(N=!0)}if(e.isRowDisabled&&(N=!0),S=T=T?T.depth:0,f.settings.treeDepth&&f.settings.treeDepth.length)if(e._isFilteredOut)L=!0;else{var G,Z=f.settings.treeDepth[t];if(Z&&Z.depth>1&&null!==(G=Z.parents)&&void 0!==G&&G?.length)for(var oe=0,le=Z.parents.length;oe<le;oe++){var re=Z.parents[oe],J=f.settings.treeDepth[re];if(J.node&&void 0!==J.node.expanded&&!J.node.expanded){L=!0;break}}}if(this.settings.groupable&&!a){var ce=this.settings.groupable;L=void 0!==ce.expanded&&!ce.expanded,ce.expanded&&"function"==typeof ce.expanded&&(L=!ce.expanded(t,0,null,null,e,this),this.isFooterHidden=L)}var ke=this.settings.frozenColumns.left.length,_e=this.settings.frozenColumns.right.length,Oe=this.visibleColumns().length-ke-_e;if(this.settings.groupable&&i&&!a){var Qe=xn.GroupRow(t,0,null,null,e,this);return C.left='<tr class="datagrid-rowgroup-header'.concat(L?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(ke,'">').concat(Qe.left||"<span>&nbsp;</span>","</td></tr>"),C.center='<tr class="datagrid-rowgroup-header'.concat(L?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(Oe,'">').concat(Qe.center||"<span>&nbsp;</span>","</td></tr>"),C.right='<tr class="datagrid-rowgroup-header'.concat(L?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(_e,'">').concat(Qe.right||"<span>&nbsp;</span>","</td></tr>"),C}if(this.settings.groupable&&i&&a){var nt=xn.GroupFooterRow(t,0,null,null,e,this);return C.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(nt.left||"<span>&nbsp;</span>","</tr>"),C.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(nt.center||"<span>&nbsp;</span>","</tr>"),C.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(nt.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,C}var ot=f.settings.treeGrid||m?t:n,Ze=ot+1+(f.settings.source&&!f.settings.indeterminate?(b-1)*f.settings.pagesize:0);p=this.recordCount%2==0;var ft=this.isRowSelected(e),Wt=e._rowactivated,xt={class:"",svg:""};e&&e.rowStatus&&("new"!==e.rowStatus.icon||f.settings.showNewRowIndicator)&&(xt.show=!0,xt.class=" rowstatus-row-".concat(e.rowStatus.icon),xt.icon="success"===e.rowStatus.icon?"#icon-check":"#icon-exclamation",xt.title=""!==e.rowStatus.tooltip?' title="'.concat(e.rowStatus.tooltip,'"'):"",xt.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(xt.title,'><use href="').concat(xt.icon,'"></use></svg>'));var jt="";if(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(jt=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,Ze,n,e),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(jt=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),this.currentPageRows){var Ut={ariaRowindex:Ze,actualIndexLineage:s,dataIndex:n,isFilteredOut:e._isFilteredOut};this.currentPageRows.push(Ut)}for(C.center='<tr role="row" aria-rowindex="'.concat(Ze,'"')+' data-index="'.concat(n,'"').concat(s?' data-lineage="'.concat(s,'"'):"").concat(f.settings.treeGrid&&e.children?' aria-expanded="'.concat(e.expanded?'true"':'false"'):"").concat(f.settings.treeGrid?' aria-level="'.concat(S,'"'):"").concat(N?' aria-disabled="true"':"").concat(ft?' aria-selected="true"':"",' class="datagrid-row').concat(xt.class).concat(L?" is-hidden":"").concat(e._isFilteredOut?" is-filtered":"").concat(Wt?" is-rowactivated":"").concat(N?" is-rowdisabled":"").concat(V?" is-tooltips-enabled":"").concat(ft?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(f.settings.alternateRowShading&&!p?" alt-shading":"").concat(m?" datagrid-summary-row":"").concat(f.settings.treeGrid?e.children?" datagrid-tree-parent":S>1?" datagrid-tree-child":"":"",'"').concat(jt,">"),C.left=C.center,C.right=C.center,M=0;M<f.settings.columns.length;M++){var en,gn,Pn,Dt,Be=f.settings.columns[M],Tt=this.getContainer(Be.id),ze="",Et=Be.summaryRowFormatter||Be.formatter||f.defaultFormatter,vn=m?Et:Be.formatter||f.defaultFormatter,Lt=f.formatValue(vn,t,M,f.fieldValue(e,f.settings.columns[M].field),f.settings.columns[M],e,f,d);if(0===Lt.indexOf('<span class="is-readonly">')&&(Be.readonly=!0),(Lt.indexOf("datagrid-checkbox")>-1||Lt.indexOf("btn-actions")>-1)&&(ze+=" l-center-text"),Lt.indexOf("trigger")>-1&&(ze+=" datagrid-trigger-cell"),-1===Lt.indexOf("trigger")&&Be&&Be.editor){var Nn=this.getEditorName(Be.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(Nn)>=0&&(ze+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(vn.name&&"Fileupload"===vn.name&&(ze+=" is-fileupload"),Be.editor&&this.settings.editable&&(ze+=" has-editor"),Be.expanded&&(f.treeExpansionField=Be.expanded),Be.align&&(ze+=" l-".concat(Be.align,"-text")),"ellipsis"===Be.textOverflow&&(ze+=" text-ellipsis"),Be.uppercase&&(ze+=" uppercase-text"),ze+=Be.readonly?" is-readonly":"",ze+=Be.hidden?" is-hidden":"",Be.isEditable&&!Be.readonly){var Gt=f.fieldValue(e,f.settings.columns[M].field),Fn=Be.isEditable(Ze-1,M,Gt,Be,e);Fn||(ze+=" is-readonly")}var ni="selectionCheckbox"===Be.id||!Be.readonly&&void 0!==Be.editor?"":'aria-readonly="true"';if(ze.indexOf("is-readonly")>-1&&(ni='aria-readonly="true"'),Be.isReadonly&&!Be.readonly&&"selectionCheckbox"!==Be.id){var $n=f.fieldValue(e,f.settings.columns[M].field),Hn=Be.isReadonly(this.recordCount,M,$n,Be,e);Hn&&(ze+=" is-cell-readonly",ni='aria-readonly="true"')}var ki=f.fieldValue(e,f.settings.columns[M].field);Be.cssClass&&"function"==typeof Be.cssClass&&(ze+=" ".concat(Be.cssClass(this.recordCount,M,ki,Be,e))),Be.cssClass&&"string"==typeof Be.cssClass&&(ze+=" ".concat(Be.cssClass)),ze+=Be.focusable?" is-focusable":"",ze+="Actions"===vn.name?" has-btn-actions":"";var qa=this.calculateRowspan(ki,t,Be);if(""!==qa){var Yt=0;if(c>0&&!Be.hidden){var je,Ke;c-=1,ze+=" is-spanned-hidden";var tt=null===(je=this.settings)||void 0===je||null===(Ke=je?.frozenColumns)||void 0===Ke||null==Ke?void 0:Ke.left.length;tt>0&&M===tt&&(ze=ze.replace(" is-spanned-hidden"," is-spanned-invisible"),(Yt=c+1)>0&&this.visibleColumns().length-M===Yt&&(ze+=" is-spanned-last")),tt>0&&M<tt&&(ze=ze.replace(" is-spanned-hidden"," is-spanned-last"))}if(Be.colspan&&"function"==typeof Be.colspan&&!c){var Ne=f.fieldValue(e,f.settings.columns[M].field);if((Yt=Be.colspan(Ze-1,M,Ne,Be,e,f))>0){var bt,_t;c=Yt-1;var mn=null===(bt=this.settings)||void 0===bt||null===(_t=bt?.frozenColumns)||void 0===_t||null==_t?void 0:_t.left.length;mn>0&&M<mn&&(ze+=" is-spanned-last")}if(Yt>0){var kn,Kt;c=Yt-1;var ii=null===(kn=this.settings)||void 0===kn||null===(Kt=kn?.frozenColumns)||void 0===Kt||null==Kt?void 0:Kt.left.length;ii>0&&M<ii&&-1===ze.indexOf("is-spanned-last")&&(ze+=" is-spanned-last")}Yt>0&&-1===ze.indexOf("is-spanned-last")&&this.visibleColumns().length-1===Yt&&(ze+=" is-spanned-last")}0!==M&&(xt.class="",xt.svg=""),""!==xt.class&&(ze+=" rowstatus-cell"),f.isCellDirty(f.settings.groupable?n:t,M)&&(ze+=" is-dirty-cell"),f.uniqueId().indexOf("inline")>0&&(ze+=" has-inline-editor"),""!==ze&&(ze=ze.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "));var yt=null===(en=this.settings.attributes)||void 0===en||null==en?void 0:en.filter(function(In){return"id"===In.name}),Pt='aria-describedby="'.concat(1===(null==yt||null==yt?void 0:yt.length)?"".concat(yt[0].value,"-col-").concat(null===(gn=Be.id)||void 0===gn||null==gn?void 0:gn.toLowerCase()):f.uniqueId("-header-".concat(M)),'"'),$t="";if(null!=Be&&Be?.ariaDescribedBy&&(Pt="aria-describedBy=".concat(Be.ariaDescribedBy(e.id,M))),0===(null===(Pn=Be.formatter)||void 0===Pn||null==Pn?void 0:Pn.toString().indexOf("function Checkbox"))){var Rn=void 0;Rn=Be.isChecked?Be.isChecked(ki):void 0!==ki&&(!0===ki||1===parseInt(ki,10)),$t=' aria-checked="'.concat(Rn,'"')}if(0===(null===(Dt=Be.formatter)||void 0===Dt||null==Dt?void 0:Dt.toString().indexOf("function SelectionCheckbox("))&&($t=' aria-checked="'.concat(this.isRowSelected(e),'"')),C[Tt]+='<td role="gridcell" '.concat(ni,' aria-colindex="').concat(M+1,'"')+" ".concat(Pt).concat($t).concat(ft?' aria-selected="true"':"").concat(ze?' class="'.concat(ze,'"'):"").concat(Yt?' colspan="'.concat(Yt,'"'):"").concat(Be.tooltip&&"string"==typeof Be.tooltip?' title="'.concat(Be.tooltip.replace("{{value}}",ki),'"'):"").concat(f.settings.columnGroups?'headers = "'.concat(f.uniqueId("-header-".concat(M))," ").concat(f.getColumnGroup(M),'"'):"").concat(qa||"",">").concat(xt.svg,'<div class="datagrid-cell-wrapper">'),Be.contentVisible){var Dn=Be.contentVisible(t+1,M,ki,Be,e);Dn||(Lt="")}f.settings.onPostRenderCell&&Be.component&&(C[Tt]+='<div class="content"></div>',Lt=""),C[Tt]+="".concat(Lt,"</div></td>")}}if(this.settings.spacerColumn&&(C.center+='<td class="datagrid-spacer-column"></td>'),C.left+="</tr>",C.center+="</tr>",C.right+="</tr>",f.settings.rowTemplate){var qn=f.settings.rowTemplate,Ti=e,ba=f.settings.rowTemplateHeight||107,Bi="";ui&&Ti&&(Bi=ui.compile("{{#dataset}}".concat(qn,"{{/dataset}}"),{dataset:Ti})),this.hasLeftPane&&(C.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(ke,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(ba,'px"></div></div>\n          </td></tr>')),C.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(Oe+(this.settings.spacerColumn?1:0),'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(Bi,"</div></div>\n        </td></tr>"),this.hasRightPane&&(C.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(_e,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(ba,'px"></div></div>\n          </td></tr>'))}if(f.settings.expandableRow&&(this.hasLeftPane&&(C.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(ke,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),C.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(Oe,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(C.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(_e,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),!e.children||o||e._isFilteredOut){if(this.settings.treeGrid&&!o&&e._isFilteredOut)if(e.children){var Ai=z(e.children);this.recordCount+=Ai+(e._isFilteredOut&&1===S?1:0)}else 1===S&&this.recordCount++}else for(var ya=0,la=e.children.length;ya<la;ya++){var Xn=s?"".concat(s,".").concat(n):"".concat(n);this.recordCount++;var Cn=f.rowHtml(e.children[ya],this.recordCount,ya,!1,!1,Xn);C.left+=Cn.left,C.center+=Cn.center,C.right+=Cn.right}return C},getEditorName:function(e){if(!e)return"";var t=e.name;return function(){}.name||(t=(e.toString().match(/function (.+?)\(/)||[,""])[1]),t?t.toLowerCase():""},calculateTextWidth:function(e){var t=e.name||"",n=0,i=0,a=0,s="",o=!1;if(e.formatter===xn.Colorpicker)s="";else if(e.formatter===xn.Dropdown&&e.options&&"data"!==this.settings.columnSizing){for(var c="",d=0;d<e.options.length;d++)e.options[d].label.length>c.length&&(c=e.options[d].label);c=this.formatValue(e.formatter,0,0,c,e,null,this),s=c=$e.stripHTML(c)}else{var p=0,f=this.settings.dataset;this.settings.groupable&&(f=this.originalDataset);for(var m=0;m<f.length;m++){var b=this.fieldValue(f[m],e.field),C=f[m];if(o=(b=this.formatValue(e.formatter,m,0,b,e,C,this)).toString().indexOf("btn-secondary")>-1,p=(b=$e.stripHTML(b)).toString().length,this.settings.groupable&&C)for(var T=0;T<C.length;T++){var S=this.fieldValue(C[T],e.field);S=this.formatValue(e.formatter,m,0,S,e,C,this),(p=(S=$e.stripHTML(S)).toString().length)>n&&(n=p,s=S)}p>n&&(n=p,s=b)}if(this.filterExpr&&this.filterExpr.length>0){var M=$.grep(this.filterExpr,function(oe){return oe.columnId===e.id});if(M&&1===M.length){var L=M[0].value;(p=L.toString().length)>n&&(n=p,s=L)}}if(""===s&&(e.formatter===xn.Date||e.formatter===xn.Time)){var z=new Date(9999,11,31,23,59,59,999);z=this.formatValue(e.formatter,0,0,z,e,null,this),s=z=$e.stripHTML(z)}}var V=!!e.formatter&&e.formatter.toString().indexOf('<span class="tag')>-1,N=!!e.formatter&&e.formatter.toString().indexOf("datagrid-alert-icon")>-1,U=e.formatter===xn.Date||e.formatter===xn.Time||e.formatter===xn.Lookup||e.formatter===xn.Colorpicker||e.formatter===xn.Dropdown;a+=2*this.getCellPadding(),N&&(a+=20),V&&(a+=10),o&&(a+=50),this.settings.editable&&e.editor===Er.Spinbox&&(a+=46),!this.settings.editable||e.formatter!==xn.Dropdown&&e.formatter!==xn.Lookup&&e.editor!==Er.Time||(a+=10),this.settings.editable&&e.editor===Er.Date&&(a+=5),i=this.calculateTextRenderWidth(s)+a,e.formatter===xn.Colorpicker&&(i=150);var G=void 0===e.sortable||e.sortable?2*this.getCellPadding()+15:2*this.getCellPadding(),Z=this.calculateTextRenderWidth(t,!0)+G;return e.filterType&&this.settings.filterable&&(Z<2*this.getCellPadding()&&(Z=5*this.getCellPadding()+i+36),"checkbox"!==e.filterType&&(""!==s?Z<i+(2*this.getCellPadding()+32)&&""!==s&&(Z=i+(2*this.getCellPadding()+32)):Z<100&&(Z=100)),"ellipsis"!==(null==e||null==e?void 0:e.textOverflow)||"small"!==this.settings.rowHeight&&"extra-small"!==this.settings.rowHeight||(Z+=6)),"data"===this.settings.columnSizing&&(Z=50+2*this.getCellPadding()+(U?25:0)),"header"===this.settings.columnSizing&&(i=0),Math.ceil(Math.max(i,Z))},calculateTextRenderWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d"),i=mt.currentTheme.id.indexOf("uplift")>-1||mt.currentTheme.id.indexOf("new")>-1;return this.fontCached&&this.fontHeaderCached||(this.fontCached=mt.currentTheme.id&&i?"400 16px arial":"400 14px arial",this.fontHeaderCached=mt.currentTheme.id&&i?"600 14px arial":"700 12px arial","extra-small"===this.settings.rowHeight&&(this.fontCached=mt.currentTheme.id&&i?"400 14px arial":"400 12px arial",this.fontHeaderCached=mt.currentTheme.id&&i?"600 14px arial":"700 12px arial")),n.font=this.fontCached,t&&(n.font=this.fontHeaderCached),n.measureText(e).width},setScrollClass:function(){var e=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),t=this.headerRow?this.headerRow[0].offsetHeight:0,n=parseInt(this.tableBody[0].offsetHeight,10);if(this.element.removeClass("has-vertical-scroll has-visible-last-row has-horizontal-scroll"),n<e-t&&this.element.addClass("has-visible-last-row"),this.hasLeftPane||this.hasRightPane){var i=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>e+2,a=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),s=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>a;i&&this.element.addClass("has-vertical-scroll"),s&&this.element.addClass("has-horizontal-scroll")}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fontCached=null,this.fontHeaderCached=null,this.fixColumnIds()},fixColumnIds:function(){for(var e=0;e<this.settings.columns.length;e++){var n=this.columnById(this.settings.columns[e].id);if(n.length>1)for(var i=1;i<n.length;i++)n[i].id="".concat(n[i].id,"-").concat(i)}},getStretchColumnIdx:function(){var e=this,t=e.stretchColumnIdx;return-1===t&&"last"!==e.settings.stretchColumn&&e.headerNodes().each(function(n){$(this).attr("data-column-id")===e.settings.stretchColumn&&(t=n)}),t},columnWidth:function(e,t){return this.elemWidth||(this.elemWidth=this.element.parents(".modal").length>0&&!1===this.element.parents(".modal").hasClass("is-visible")?void 0:this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1,this.widthPixel=!1),this.calculateColumnWidth(e,t)},calculateColumnWidth:function(e,t){var n,i,a,s=this.visibleColumns(!0),o=t===this.visibleColumns().length-1,c=this.getContainer(e.id);e.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&e.width&&(this.widthPixel="string"!=typeof e.width);var d=e.width;"string"==typeof e.width&&-1===e.width.indexOf("px")&&(this.widthPercent=!0,a=e.width.replace("%",""));var p=this.calculateTextWidth(e);if(this.widthSpecified&&d||(d=Math.max(p,d||0)),(!this.widthSpecified||void 0===e.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(e.id)){var f=Math.round(this.elemWidth/s.length);d=f-(o?2:0),f<p&&(d=p)}if("selectionCheckbox"!==e.id&&"selectionRadio"!==e.id&&"favorite"!==e.id||(e.width=d=43),"favorite"===e.id&&(e.width=d=62),!e.width&&(null===(n=e.formatter)||void 0===n||null===(i=n?.toString())||void 0===i||null==i?void 0:i.indexOf("ProcessIndicator"))>-1&&(e.width=d=155),"expander"===e.id&&(e.width=d=55),"rowStatus"===e.id&&(e.width=d=62),"rowReorder"===e.id&&(e.width=d=this.settings.groupable?105:62),"drilldown"===e.id&&(e.width=d=62),e.minWidth&&d<e.minWidth&&(d=e.minWidth),e.minWidth&&d>e.maxWidth&&(d=e.maxWidth),this.totalWidths[c]+=e.hidden?0:d,o){var m=this.elemWidth-this.totalWidths[c];"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=m),"last"!==this.settings.stretchColumn&&this.settings.stretchColumn!==e.id||(this.stretchColumnIdx=t,m<d?this.stretchColumnWidth=d:this.stretchColumnDiff=d=m),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===e.id?(this.stretchColumnIdx=t,this.stretchColumnWidth=d,' style="width: 99%"'):this.widthPercent||void 0!==d?' style="width: '.concat(this.widthPercent?"".concat(a,"%"):"".concat(d,"px"),'"'):""},calculateRowspan:function(e,t,n){var i=0,a=null;if(!n.rowspan)return null;for(var s=0;s<this.settings.dataset.length;s++)e===this.settings.dataset[s][n.field]&&(i++,null===a&&(a=s));return t===a?' rowspan ="'.concat(i,'"'):""},calculateTotals:function(){return this.settings.totals=vd.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(e){return e+(/(px|%)/i.test("".concat(e))?"":"px")},setupTooltips:function(e,t){var n=this;if(e||t||this.settings.enableTooltips){var i,a=this,s=a.element.find(".datagrid-header-icon").length>0,o={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus',headerIcon:".datagrid-header th .datagrid-header-icon"};this.settings.filterable?(o.headerColumn="".concat(o.th," .datagrid-column-wrapper"),o.headerFilter="".concat(o.th," .datagrid-filter-wrapper .btn-menu"),o.header="".concat(o.headerColumn,", ").concat(o.headerFilter)):o.header=s?o.headerIcon:o.th,o.iconAlert="".concat(o.td," .icon-alert"),o.iconSuccess="".concat(o.td," .icon-success"),o.iconError="".concat(o.td," .icon-error"),o.iconInfo="".concat(o.td," .icon-info"),o.icons="".concat(o.iconAlert,", ").concat(o.iconSuccess,", ").concat(o.iconError,", ").concat(o.iconInfo),o.str=e&&this.settings.enableTooltips?"".concat(o.header,", ").concat(o.td,", ").concat(o.icons,", ").concat(o.rowstatus):e?"".concat(o.header,", ").concat(o.rowstatus):"".concat(o.header,", ").concat(o.td,", ").concat(o.icons);var c=function(p,f){f=void 0===f?400:f,i=setTimeout(function(){var m=ue.hasClass(p,"datagrid-column-wrapper"),b=ue.hasClass(p.parentNode,"datagrid-filter-wrapper"),C=ue.hasClass(p,"datagrid-header-icon"),T=!!b&&p.parentNode.querySelectorAll(".popupmenu.is-open").length>0,S=$(p).data("gridtooltip")||a.cacheTooltip(p),L=a.getOuterWidth(m||C?p.parentNode:p);S&&(S.forced||S.textwidth>L-35)&&!T&&a.showTooltip(S)},f)},d=function(p,f){f=void 0===f?400:f,clearTimeout(i),setTimeout(function(){$(".grid-tooltip:hover").length>0||(a.hideTooltip(),ue.hasClass(p.parentNode,"datagrid-filter-wrapper")&&a.removeTooltipData(p))},f)};this.element.off("mouseenter.gridtooltip focus.gridtooltip",o.str).on("mouseenter.gridtooltip focus.gridtooltip",o.str,function(){c(this)}).off("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",o.str).on("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",o.str,function(){d(this)}).off("longpress.gridtooltip",o.str).on("longpress.gridtooltip",o.str,function(){c(this,0)}).off("keydown.gridtooltip",o.str).on("keydown.gridtooltip",o.str,function(p){var f=p.which||p.keyCode||p.charCode||0,m=!1;return p.shiftKey&&112===f?c(this,0):27===f&&(m=a.isGridtooltip(),d(this,0)),m&&p.preventDefault(),!m}).off("mousemove.gridtooltip").on("mousemove.gridtooltip",function(p){$(p.target).parents(".datagrid").length>0||!$(".grid-tooltip").hasClass("is-hidden")&&!$(".grid-tooltip:hover").length>0&&d(n)}),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",function(){c(this)}).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",function(){d(this)}).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",function(){c(this,0)}),this.element.find(".datagrid-header-icon").length>0&&this.element.find(".datagrid-header-icon").off("mouseenter.headericon").on("mouseenter.headericon",function(){c(this)}).off("mouseleave.headericon").on("mouseleave.headericon",function(){d(this)})}},getOuterWidth:function(e){var t=getComputedStyle(e);return e.offsetWidth+(parseInt(t.marginLeft,10)+parseInt(t.marginRight,10))},closest:function(e,t){return e&&(t(e)?e:this.closest(e.parentNode,t))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(e,t){var n=this.settings,i=t;i||(i=n.treeGrid?n.treeDepth[e].node:this.getActiveDataset()[e]);for(var a=0;a<this.settings.columns.length;a++){var s=this.settings.columns[a];s.hidden||this.updateCellNode(e,a,this.fieldValue(i,s.field),!0)}n.treeGrid||void 0===n.dataset[e]||(this.settings.dataset[e]=_.extend(!0,this.settings.dataset[e],t)),this.settings.rowReorder&&this.tableBody.data("arrange")&&this.tableBody.data("arrange").updated()},updateColumns:function(e,t){void 0===t&&(t=null);var n=[];this.settings.filterable&&this.filterRowRendered&&(n=this.filterConditions()),this.settings.columns=e,t&&(this.settings.columnGroups=t),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(n)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var e=this.settings.saveUserSettings;!$.isEmptyObject(e)&&this.canUseLocalStorage()&&(e.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),e.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),e.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),e.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),e.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),e.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),e.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},setOriginalColumns:function(){this.originalColumns=_.deepCopy(this.settings.columns)},columnsFromString:function(e,t){if(!e)return[];var n=JSON.parse(e);if(!n)return[];for(var i=0;i<n.length;i++){var a=void 0,s=this.columnById(n[i].id),o=s.width;s&&(a=n[i].hidden,$.extend(n[i],s[0]),void 0!==a?n[i].hidden=a:delete n[i].hidden,t&&(n[i].width=o))}return n},restoreColumns:function(e){if(this.settings.saveColumns&&this.canUseLocalStorage())if(e)this.updateColumns(e);else{var t=localStorage[this.uniqueId("columns")];!e&&t&&(this.originalColumns=_.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(t))}},restoreUserSettings:function(e){var t=this.settings.saveUserSettings;if(e||!$.isEmptyObject(t)&&this.canUseLocalStorage())if(e){if(e.columns&&this.updateColumns(e.columns),e.rowHeight&&this.rowHeight(e.rowHeight),e.sortOrder&&this.setSortColumn(e.sortOrder.sortId,e.sortOrder.sortAsc),e.pagesize&&(this.settings.pagesize=parseInt(e.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(e.pagesize,10),e.activePage||this.pagerAPI.setActivePage(1,!0)),e.showPageSizeSelector&&(this.settings.showPageSizeSelector=e.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(e.showPageSizeSelector)),e.filter&&this.applyFilter(e.filter,"restore"),e.activePage){var n=parseInt(e.activePage,10);this.pagerAPI.setActivePage(n,!0),this.restoreActivePage=!0}}else{if(t.columns){var i=localStorage[this.uniqueId("usersettings-columns")];i&&(this.settings.columns=this.columnsFromString(i))}if(t.rowHeight){var a=localStorage[this.uniqueId("usersettings-row-height")];a&&(this.settings.rowHeight=a)}if(t.sortOrder){var s=localStorage[this.uniqueId("usersettings-sort-order")];s&&(this.sortColumn=JSON.parse(s),this.restoreSortOrder=!0)}if(t.pagesize){var o=localStorage[this.uniqueId("usersettings-pagesize")];o&&(this.settings.pagesize=parseInt(o,10))}if(t.showPageSizeSelector){var c=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(c="true"===c.toString().toLowerCase())&&(this.settings.showPageSizeSelector=c)}if(t.activePage){var d=localStorage[this.uniqueId("usersettings-active-page")];d&&(this.savedActivePage=parseInt(d,10),this.restoreActivePage=!0)}if(t.filter){var p=localStorage[this.uniqueId("usersettings-filter")];p&&(this.savedFilter=JSON.parse(p),this.restoreFilter=!0)}}},copyThenStringify:function(e){if(!e)return JSON.stringify(e);var t=e.map(function(n){var i=_.extend({},n);return i.editorOptions&&delete i.editorOptions,i});return JSON.stringify(t)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var e=_.deepCopy(this.originalColumns);this.updateColumns(e,this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null)}this.clearFilter()},hideColumn:function(e){var t,n,i,a,s,o,c,d,p=this.columnIdxById(e);if(!(-1===p||null!==(t=this.settings.columns[p])&&void 0!==t&&t?.hidden)){this.settings.columns[p].hidden=!0,this.headerNodeCheckbox=this.headerNodes().eq(p),null!==(n=this.settings)&&void 0!==n&&null!==(i=n?.frozenColumns)&&void 0!==i&&i?.left.length||this.headerNodes().eq(p).addClass("is-hidden"),0===p&&"selectionCheckbox"===e&&null!==(a=this.settings)&&void 0!==a&&null!==(s=a?.frozenColumns)&&void 0!==s&&s?.left.length?this.headerNodes().eq(p).off().remove():this.headerNodes().eq(p).addClass("is-hidden"),this.colGroupNodes().eq(p).addClass("is-hidden");var f=(null===(o=this.settings)||void 0===o||null===(c=o?.frozenColumns)||void 0===c||null==c?void 0:c.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(p-f+1,")")).addClass("is-hidden"),this.bodyColGroup.find("col").eq(p-f).addClass("is-hidden"),null!==(d=this.tableBodyLeft)&&void 0!==d&&d?.find("> tr > td .datagrid-checkbox-wrapper")&&(this.bodyNodeCheckboxes=this.tableBodyLeft.find("> tr > td:nth-child(".concat(p+1,")")),this.tableBodyLeft.find("> tr > td:nth-child(".concat(p+1,")")).remove()),this.updateColumnGroup(p,!1),this.hasColSpans){var m=this.element.find(".datagrid-header th").eq(p).attr("colspan");if(m&&m>0){m-=1;for(var b=0;b<m;b++)this.tableBody.find("> tr > td:nth-child(".concat((p+=m)+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:p,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var e=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",e)},showColumn:function(e){var t,n,i=this.columnIdxById(e);if(-1!==i&&this.settings.columns[i].hidden){this.settings.columns[i].hidden=!1,this.headerNodes().eq(i).removeClass("is-hidden"),this.colGroupNodes().eq(i).removeClass("is-hidden");var s,o,a=(null===(t=this.settings)||void 0===t||null===(n=t?.frozenColumns)||void 0===n||null==n?void 0:n.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(i-a+1,")")).removeClass("is-hidden"),this.bodyColGroup.find("col").eq(i-a).removeClass("is-hidden"),a&&(this.tableBodyLeft.find("> tr > td:nth-child(".concat(i+1,")")).removeClass("is-hidden"),this.headerNodeCheckbox&&!this.headerRowLeft.find("> tr th:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(s=this.headerRowLeft)||void 0===s||null==s||s.find("> tr").prepend(this.headerNodeCheckbox)),this.bodyNodeCheckboxes&&!this.tableBodyLeft.find("> tr td:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(o=this.tableBodyLeft)||void 0===o||null==o||o.find("> tr").prepend(this.bodyNodeCheckboxes[i]))),this.updateColumnGroup(i,!0),this.hasColSpans){var c=this.element.find(".datagrid-header th").eq(i).attr("colspan");if(c&&c>0){c-=1;for(var d=0;d<c;d++)this.tableBody.find("> tr > td:nth-child(".concat((i+=c)+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:i,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Fa.exportToCsv(e,t,n,i,this)},exportToExcel:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Fa.exportToExcel(e,t,n,i,this)},copyToDataSet:function(e,t,n,i){Fa.copyToDataSet(e,t,n,i,this)},personalizeColumns:function(){var e=this,t='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(P.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');t+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:P.translate("PersonalizeColumns"),content:t,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:P.translate("Close"),click:function(n,i){i.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",function(n,i){i&&(e.isColumnsChanged=!1,i.element.find(".searchfield").searchfield({clearable:!0,tabbable:!1}),i.element.find(".listview").listview({source:e.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(a){return a.name||a.id}}}).off("selected.datagrid").on("selected.datagrid",function(a,s){var o=s.elem.find(".checkbox"),c=o.attr("data-column-id"),d=o.prop("checked");if(s.elem.removeClass("is-selected hide-selected-color"),!o.is(":disabled")){e.isColumnsChanged=!0;var p={node:{},api:$(this).data("listview")};if(p.api){var f=e.columnIdxById(c);-1!==f&&p.api.settings.dataset[f]&&(p.node=p.api.settings.dataset[f])}d?(e.hideColumn(c),o.prop("checked",!1),p.node.hidden=!0):(e.showColumn(c),o.prop("checked",!0),p.node.hidden=!1),e.settings.groupable&&e.rerender()}}),i.element.on("close.datagrid",function(){e.isColumnsChanged=!1}),i.element.on("keydown.datagrid",function(a){27===a.keyCode&&(i.close(),$("body").off("beforeopen.datagrid"))}))})},setColumnWidth:function(e,t,n){var i=parseFloat(t),a=this.columnById(e)[0],s=-1;i&&e&&("string"==typeof e&&this.headerNodes().each(function(o){$(this).attr("data-column-id")===e&&(s=o)}),"number"!=typeof t&&(t=i/100*this.element.width()),!(Math.abs(t-a.width)<2))&&("number"==typeof a.colspan&&(t/=a.colspan),a&&(a.width=t),n&&(this.bodyColGroup.find("col").eq(s)[0].style.width="".concat(t,"px")),this.element.trigger("columnchange",[{type:"resizecolumn",index:s,columns:this.settings.columns}]),this.saveUserSettings())},isEllipsisActiveHeader:function(e){return(void 0===(e=e||{}).sortable||e.sortable)&&"ellipsis"===e.textOverflow},activeEllipsisHeaderAll:function(){for(var e=0,t=this.settings.columns.length;e<t;e++){var n=this.settings.columns[e].id,i=this.columnById(n)[0];if(this.isEllipsisActiveHeader(i)){var a=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(n,'"]'));this.activeEllipsisHeader(a)}}},activeEllipsisHeader:function(e){if(e){var t=e.querySelector(".datagrid-column-wrapper .datagrid-header-text");e.classList[e.scrollWidth<t.scrollWidth+65?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var e=this,t=this;if(!this.resizeHandle){var n,i,a,s,o;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var c=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",function(){t.currentHeader&&(t.dragging=!0,c=!1,i=t.currentHeader.attr("data-column-id"),n=t.columnById(i)[0],t.isEllipsisActiveHeader(n)&&t.currentHeader[0].classList.add("is-ellipsis-active"))}).on("drag.datagrid",function(d,p){if(t.currentHeader&&n){var f=n.minWidth||12,m=n.maxWidth||2e3,b=t.currentHeader,C=b.index(),T="left"===t.getContainer(b.attr("data-column-id"));e.dragging=!0;var S=p.left+5,M=e.bodyColGroup.find("col").eq(C)[0];T&&(M=e.bodyColGroupLeft.find("col").eq(C)[0]);var L=parseInt(t.currentHeader.width(),10),z=parseInt(M.style.width||L,10);M.style.width.indexOf("%")>-1&&(z=L);var V=parseFloat(t.currentHeader.offsetParent().offset().left),N=parseFloat(t.currentHeader.offset().left),U=0===C?0:N-V-2;t.hasLeftPane&&!T&&0===C&&(U=N-V-2);var G=L-(S-U);if((a=z-G)<f||a>m)t.resizeHandle.css("cursor","inherit");else if(a!==z&&(M.style.width="".concat(a,"px"),(C===e.settings.frozenColumns.left.length-1||C<=e.settings.frozenColumns.left.length-1&&G>0)&&"left"===e.getContainer(i)&&(e.totalWidths.left+=G<0?Math.abs(G):-G,e.tableLeft.css("width",e.totalWidths.left)),ko.pressedKeys.get("Shift")&&(c=!0),"fit"===e.settings.resizeMode&&!c||"flex"===e.settings.resizeMode&&c)){var Z=P.isRTL()?C+1:C-1,oe=t.settings.columns[Z];if(!oe)return;var le=oe.minWidth||12,re=oe.maxWidth||1e3,J=P.isRTL()?ue.getPreviousSibling(t.currentHeader,":not(.is-hidden)"):ue.getNextSibling(t.currentHeader,":not(.is-hidden)");o=J.getAttribute("data-column-id");var ce=P.isRTL()?ue.getPreviousSibling(M,":not(.is-hidden)"):ue.getNextSibling(M,":not(.is-hidden)"),ke=parseInt(J.offsetWidth,10),_e=parseInt(ce.style.width||ke,10);if(ce.style.width.indexOf("%")>-1&&(_e=ke),(s=_e+G)<le||s>re)return void t.resizeHandle.css("cursor","inherit");if(s===_e||!ce)return;ce.style.width="".concat(s,"px")}}}).on("dragend.datagrid",function(){e.dragging=!1,t.isEllipsisActiveHeader(n)&&t.activeEllipsisHeader(t.currentHeader[0]),t.setColumnWidth(i,a),o&&("fit"===e.settings.resizeMode&&!c||"flex"===e.settings.resizeMode&&c)&&t.setColumnWidth(o,s)})}},displayCounts:function(e){var t,n,i,a,s,o=this,c=o.tableBody.find("tr:visible").length,d=0,p="",f=[],m=o.settings.paging&&!o.settings.source,b=function(M){return P.formatNumber(M,{style:"integer"})};if(!m&&e||(this.recordCount=o.settings.dataset.length,c=o.settings.dataset.length),(this.settings.treeGrid&&m||!e)&&(this.filteredCount=o.settings.dataset.filter(function(M){return M._isFilteredOut}).length,c=o.settings.dataset.length,this.recordCount=o.settings.dataset.filter(function(M){return!M._isFilteredOut}).length),o.settings.groupable&&(d=c,c=o.originalDataset.length,p=(p="({0} ".concat(P.translate(1===d?"Group":"Groups"),")")).replace("{0}",b(d))),o.contextualToolbar&&o.contextualToolbar.length&&(o._selectedRows.forEach(function(M){f.push(M.idx);var L=f.filter(function(z,V){return f.indexOf(z)===V});o.contextualToolbar.find(".selection-count").text("".concat(L.length," ").concat(P.translate("Selected")))}),o.settings.allowSelectAcrossPages&&o.contextualToolbar.find(".selection-count").text("".concat(o._selectedRows.length," ").concat(P.translate("Selected")))),e&&-1!==e&&(c=e),void 0===e&&this.settings.source&&(c=o.settings.dataset.length),void 0===e&&this.settings.source&&null!==(t=this.pagerAPI)&&void 0!==t&&null!==(n=t?.state)&&void 0!==n&&n?.total&&(c=null===(i=this.pagerAPI)||void 0===i||null===(a=i?.state)||void 0===a||null==a?void 0:a.total),o.settings.showFilterTotal&&o.filteredCount>0)s=(s=(s="(".concat(P.translate(1===c?"ResultOf":"ResultsOf"),")")).replace("{0}",b(c-o.filteredCount))).replace("{1}",b(c));else{var C=P.translate(1===c?"Result":"Results");s=(s=-1===C.indexOf("{0}")?"({0} ".concat(C,")"):C).replace("{0}",b(c))}if(o.settings.resultsText&&(s="function"==typeof o.settings.resultsText?o.grandTotal?o.settings.resultsText(o,o.grandTotal,c===o.grandTotal?0:c):o.settings.resultsText(o,c,0===o.filteredCount?0:c-o.filteredCount):o.settings.resultsText),o.toolbar){ue.html(o.toolbar.find(".datagrid-result-count"),s,"<span>"),ue.html(o.toolbar.find(".datagrid-group-count"),p,"<span>"),o.toolbar[0].setAttribute("aria-label",o.toolbar.find(".title").text()),o.toolbar.find(".datagrid-row-count").text(c),_.addAttributes(o.toolbar.find(".title"),this,this.settings.attributes,"title"),_.addAttributes(o.toolbar.find(".btn-actions"),this,this.settings.attributes,"actions");var S=o.toolbar.find("#gridfilter");_.addAttributes(S,this,this.settings.attributes,"search"),S.prev("label").attr("for",S.attr("id"))}ue.html(o.element.closest(".modal").find(".datagrid-result-count"),s,"<span>"),this.lastCount=c,this.checkEmptyMessage()},setEmptyMessage:function(e){this.element["small"===(null==e||null==e?void 0:e.height)?"addClass":"removeClass"]("empty-message-height-small"),this.emptyMessage?(this.emptyMessage.settings=e,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(e).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(e,t,n){var i=$(t.target),a=i.closest("tr"),s=i.closest("td"),o=s.index(),c=this.settings.treeGrid?this.actualRowIndex(a):this.dataRowIndex(a),d=!0;(i.is("a")||i.closest("a").length)&&(n=!1),n&&(t.stopPropagation(),t.preventDefault());var p=this.settings.dataset[c];return this.settings.groupable&&(a.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?d=!1:(c=this.actualPagingRowIndex(this.actualRowIndex(a)),(p=this.settings.dataset[this.groupArray[c].group])&&p.values&&(p=p.values[this.groupArray[c].node]))),d&&this.element.trigger(e,[{row:c,rowElem:a,cell:o,cellElem:s,item:p,originalEvent:t}]),!1},verticalScrollToEnd:function(e){var t=e.currentTarget,i=Math.round((t.scrollTop+t.clientHeight)/t.scrollHeight*100),a=t.scrollHeight-t.scrollTop-t.clientHeight<1&&100===i;this.element.trigger("scroll",{percent:i,percentScrolled:100}),this.isVerticalScrollToEnd=!1!==a},handleScrollY:function(e){var t=e.currentTarget.scrollTop;t!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=t,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var e=this,t=this;if($("body").on("open.modal.datagrid",function(s){var o=$(s.target);o.find(e.table).length>0&&e.table.width()>o.width()&&e.widthSpecified&&e.table.width(466)}),t.element.on("focus.datagrid","tbody > tr",function(){if(!t.settings.cellNavigation&&t.settings.rowNavigation){var s=t.rowNodes($(this));if(!s.hasClass("is-active-row")){s.addClass("is-active-row");var o=t.actualRowIndex(s);t.settings.keyRowSelect&&t.selectRow(o)}}}).on("blur.datagrid","tbody > tr",function(){if(!t.settings.cellNavigation&&t.settings.rowNavigation){var s=t.rowNodes($(this));s.hasClass("is-active-row")&&s.removeClass("is-active-row")}}),this.settings.paging&&(this.pagerId=$(".pager-toolbar .btn-menu").attr("aria-controls"),this.tableBody.on("page.".concat("datagrid"),function(s,o){"filtered"===o.type&&e.settings.source||(t.closePopupmenuOnPaging(),t.saveUserSettings(),t.render(null,o),t.afterPaging(o))}).on("pagesizechange.".concat("datagrid"),function(s,o){o.preserveSelected=!0,t.closePopupmenuOnPaging(),t.render(null,o),t.afterPaging(o)})),t.settings.showHoverState&&t.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",function(){var s=t.rowNodes($(this));s.addClass("is-hover-row").removeClass("is-clickable"),t.settings.cellNavigation||!1===t.settings.selectable||s.addClass("is-clickable")}).on("mouseleave.datagrid","tbody > tr",function(){t.rowNodes($(this)).removeClass("is-hover-row")}),(this.hasLeftPane||this.hasRightPane||this.hasVerticalScrollbar)&&(t.element.find(".datagrid-wrapper").on("scroll.table",function(s){t.handleScrollY(s),t.verticalScrollToEnd(s)}),t.element.find(".datagrid-wrapper").on("wheel.table",function(s){0!==s.originalEvent.deltaY&&(s.currentTarget.scrollTop+=s.originalEvent.deltaY,s.preventDefault(),t.handleScrollY(s),t.verticalScrollToEnd(s))})),this.settings.virtualized){var n=0,i=0;t.bodyWrapperCenter.on("scroll.vtable",Ms(function(){var s=this.scrollTop;s!==n&&(s<t.virtualRange.top+25||s>t.virtualRange.bottom-t.virtualRange.bodyHeight-25)&&(n=this.scrollTop,t.clearCache(),t.renderRows())},0)),$("body").on("resize.vtable",function(){this.offsetHeight!==i&&(i=this.scrollTop,t.clearCache(),t.renderRows())})}t.settings.frozenColumns.left.length&&$("body").on("resize.frozencolumns",function(){t.setScrollClass()}),this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",function(s){var o=$(s.target).parent();return o.is(".datagrid-filter-wrapper")||o.is(".lookup-wrapper")||o.is(".has-close-icon-button")||(s.stopPropagation(),t.editor=null,t.setSortColumn($(this).attr("data-column-id"))),!1}),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",function(s){var o=s.currentTarget.getAttribute("href");o&&"#"!==o||s.preventDefault()}),t.settings.allowPasteFromExcel&&t.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",function(s){var o;o=s.originalEvent.clipboardData&&s.originalEvent.clipboardData.getData?s.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var c=/\n/.exec(o),d=/\r/.exec(o),p=/\r\n/.exec(o);if((!t.activeCell||!t.activeCell.node.hasClass("is-readonly"))&&(o&&d||c||p)){var f=o.split(c?"\n":"\r");p&&(f=o.split("\r\n")),f.pop();var m=parseInt($(s.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),b=parseInt($(s.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;t.editor&&t.editor.input&&t.commitCellEdit(),t.copyToDataSet(f,m,b,t.settings.dataset)}});var a=t.settings.dblClickApply?"dblclick.datagrid, click.datagrid, select.datagrid":"click.datagrid, select.datagrid";this.element.off(a).on(a,"tbody td",function(s){var o=null,c=null,d=$(s.target),p=d.closest("td"),f=p.closest("table").find("thead > tr > th:not([colspan])").eq(p.index()).attr("data-column-id"),m=t.settings.columns[t.columnIdxById(f)];if(("select"!==s.type||null!=m&&m?.inlineEditor)&&(1!==$(s.currentTarget).closest(".datagrid-expandable-row").length||"gridcell"===$(s.currentTarget).attr("role")))if(!p.is(".has-btn-actions")||d.is(".btn-actions")){if(d.parents("td").length>1&&(s.preventDefault(),s.stopPropagation()),t.triggerRowEvent(t.settings.dblClickApply?s.type:"click",s,!0),t.setActiveCell(p),d.is(".datagrid-expand-btn"))return o=$(this).closest("tr"),c=t.actualRowIndex(o),t.toggleRowDetail(c),t.toggleGroupChildren(o),t.toggleChildren(s,c),!1;var b=d.is(".datagrid-selection-checkbox")||1===d.find(".datagrid-selection-checkbox").length,C=d.is(".datagrid-selection-radio")||1===d.find(".datagrid-selection-radio").length,T=!!t.settings.clickToSelect||!!b||C;if(d.is(".datagrid-drilldown")&&(T=!1),"mixed"===t.settings.selectable&&((T=b)||(s.shiftKey&&t.activatedRow().length&&(t.selectRowsBetweenIndexes([t.activatedRow()[0].row,d.closest("tr").attr("aria-rowindex")-1]),s.preventDefault()),t.toggleRowActivation(d.closest("tr")))),T&&("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&s.shiftKey)t.selectRowsBetweenIndexes([t.lastSelectedRow,d.closest("tr").attr("aria-rowindex")-1]),s.preventDefault();else if(T&&t.settings.dblClickApply){var S="dblclick"===s.type;t.toggleRowSelection(d.closest("tr"),S),"dblclick"!==s.type&&t.element.triggerHandler("ischanged")}else T&&t.toggleRowSelection(d.closest("tr"));var M=p.attr("aria-colindex")-1,L=t.columnSettings(M);if(!L||d.is(".datagrid-checkbox")||L.editor!==Er.Checkbox){var z=t.makeCellEditable(t.activeCell.rowIndex,t.activeCell.cell,s);if(L.click&&"function"==typeof L.click&&d.is("button, input[checkbox], a, a.search-mode i")||d.parent().is("button:not(.trigger)")){var V=$(this).closest("tr"),N=t.actualRowIndex(V);c=t.dataRowIndex(V);var U=t.settings.treeGrid?t.settings.treeDepth[N].node:t.settings.dataset[c];if(p.hasClass("is-focusable")&&!d.is(t.buttonSelector)&&!d.parent("button").is(t.buttonSelector))return;t.settings.groupable&&(V.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(N=t.actualPagingRowIndex(t.actualRowIndex(V)),(U=t.settings.dataset[t.groupArray[N].group])&&U.values&&(U=U.values[t.groupArray[N].node]))),(!p.hasClass("is-cell-readonly")&&!d.is("[disabled]")&&d.is("button, input[checkbox], a, a.search-mode i")||d.parent().is("button"))&&L.click(s,[{row:N,cell:t.activeCell.cell,item:U,originalEvent:s}]),d.is("[disabled]")&&L.formatter===xn.Hyperlink&&(s.stopImmediatePropagation(),s.preventDefault())}if(m.inlineEditor&&"click"===s.type&&"input"===s.target.nodeName.toLowerCase()){var G=s.target;G.focus(),G.select(),s.preventDefault(),s.stopPropagation()}if(L.menuId){t.closePrevPopupmenu();var Z=$(this).find("button");Z.popupmenu({attachToBody:!0,menuId:L.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return p.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",function(){var oe=$(this);oe.data("popupmenu")&&!oe.data("tooltip")&&oe.data("popupmenu").destroy()}),L.selected&&Z.off("selected.gridpopupbtn").on("selected.gridpopupbtn",L.selected)}z&&setTimeout(function(){$("textarea, input",p).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",p).length&&(t.quickEditMode=!0)},0)}}else t.setActiveCell(p)}),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",function(){e.rerender()}),$(window).on("resize.datagrid",function(){var s=0;for(e.clearCache(),s=0;s<t.settings.columns.length;s++)t.columnWidth(t.settings.columns[s],s);(t.stretchColumnDiff>0||t.stretchColumnWidth>0)&&(t.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat("".concat(t.stretchColumnDiff>0?t.stretchColumnDiff:t.stretchColumnWidth,"px")))})),this.settings.dblClickApply||this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",function(s){t.triggerRowEvent("dblclick",s,!0)}),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody td",function(s){var o=$(s.currentTarget);s.stopPropagation(),t.closePrevPopupmenu(),t.triggerRowEvent("contextmenu",s,!!t.settings.menuId);var c=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0};return!c()||!_.isSubscribedTo(t.element[0],s,"contextmenu","datagrid")&&!c()||(s.preventDefault(),t.setActiveCell(parseInt(o.parent().attr("aria-rowindex"),10)-1,parseInt(o.attr("aria-colindex"),10)-1),t.activeCell.node.focus(),o.popupmenu({menuId:t.settings.menuId,eventObj:s,beforeOpen:t.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",function(d,p){t.settings.menuSelected&&t.settings.menuSelected(d,p)}).off("close.gridpopuptr").on("close.gridpopuptr",function(){var d=$(this);d.data("popupmenu")&&d.data("popupmenu").destroy()}),!1)}),this.headerRow.add(this.headerRowLeft).off("mousemove.datagrid").on("mousemove.datagrid","th",function(s){if(!t.dragging&&(t.currentHeader=$(s.target).closest("th"),t.currentHeader.hasClass("is-resizable")&&!t.currentHeader.hasClass("datagrid-header-spacer-column"))){var o=t.currentHeader.closest(".header-detail"),c=o.length?parseInt(o.css("margin-left"),10):0,d=parseInt(t.currentHeader.position().left,10)-(c||0)+t.element.scrollLeft(),p=d+t.currentHeader.outerWidth(),f=s.pageX-d>p-s.pageX,m=0;m=f?p-5:d-5;var b=t.currentHeader.parent().find("th:visible").index(t.currentHeader);(0===b&&(P.isRTL()?f:!f)||b===t.visibleColumns().length)&&(m="-999"),P.isRTL()||f||(t.currentHeader=t.currentHeader.prevAll(":visible").not(".is-hidden").first()),P.isRTL()&&!f&&(t.currentHeader=t.currentHeader.nextAll(":visible").not(".is-hidden").first()),t.currentHeader.hasClass("is-resizable")&&(t.createResizeHandle(),t.resizeHandle[0].style.left="".concat(m,"px"),t.resizeHandle[0].style.cursor="")}}).off("contextmenu.datagrid").on("contextmenu.datagrid","th",function(s){return!t.settings.headerMenuId||(s.preventDefault(),t.closePrevPopupmenu(),$(s.currentTarget).popupmenu({menuId:t.settings.headerMenuId,eventObj:s,attachToBody:!0,beforeOpen:t.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",function(o,c){t.settings.headerMenuSelected(o,c)}).off("close.gridpopupth").on("close.gridpopupth",function(){var o=$(this);o.data("popupmenu")&&o.data("popupmenu").destroy()}),!1)}),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",function(){var s=$(this);s.hasClass("is-checked")?(s.removeClass("is-checked").attr("aria-checked","false"),t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows()):(s.addClass("is-checked").attr("aria-checked","true"),t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows())}),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",function(s){var o=s.target;$(o).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout(function(){var c=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&t.editor){if(c.is(".spinbox, .trigger, .code-block-actions")||!$(o).is(":visible")||c&&t.editor.className&&c.closest(t.editor.className).length>0)return;t.commitCellEdit()}},150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||t.editor&&t.editor.input&&t.commitCellEdit()})},closePopupmenuOnPaging:function(){var e=this.element.find(".datagrid-filter-wrapper .btn-filter.is-open"),t=null==e||null==e?void 0:e.data("popupmenu");$(".pager-toolbar .btn-menu").attr("aria-controls",this.pagerId).length&&(null==t||null==t||t.close(!0,!0))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")})},refreshSelectedRowHeight:function(){var e=this.element.parent().find(".toolbar:not(.contextual-toolbar)").find(".btn-actions").data("popupmenu");if(null!=e&&e?.wrapper){var t=e.wrapper.find('[data-option="row-extra-small"]'),n=e.wrapper.find('[data-option="row-small"]'),i=e.wrapper.find('[data-option="row-short"]'),a=e.wrapper.find('[data-option="row-medium"]'),s=e.wrapper.find('[data-option="row-normal"]'),o=e.wrapper.find('[data-option="row-large"]');"extra-small"===this.settings.rowHeight&&(t.parent().addClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),"short"!==this.settings.rowHeight&&"small"!==this.settings.rowHeight||(t.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(t.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().addClass("is-checked"),s.parent().removeClass("is-checked"),o.parent().removeClass("is-checked")),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight||(t.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().addClass("is-checked"),o.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))}},appendToolbar:function(){var e=null,t="",n=null,i=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)").length)e=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{e=$('<div class="toolbar datagrid-toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(t=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),t||(t=e.find(".title")),e.append(t),this.settings.toolbar.results&&t.append('<span class="datagrid-result-count"></span>');var a=$('<div class="buttonset"></div>').appendTo(e);if(this.settings.toolbar.keywordFilter){var s=$('<label class="audible" for="gridfilter">'.concat(P.translate("Keyword"),"</label>")),o=$('<input class="searchfield" name="searchfield" placeholder="'.concat(P.translate("Keyword"),'" id="gridfilter">'));a.append(s),this.settings.toolbar.collapsibleFilter||o.attr("data-options",'{ "collapsible": false }'),a.append(o)}this.settings.toolbar.dateFilter&&a.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(P.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((n=$('<div class="more"></div>').insertAfter(a)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),e.addClass("has-more-button"));var c=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&c.append('<li><a href="#" data-option="personalize-columns">'.concat(P.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&c.append('<li><a href="#" data-option="reset-layout">'.concat(P.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&c.append('<li><a href="#" data-option="export-to-excel">'.concat(P.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.exportToCsv&&c.append('<li><a href="#" data-option="export-to-csv">'.concat(P.translate("ExportToCsv"),"</a></li>")),this.settings.toolbar.advancedFilter&&c.append('<li><a href="#">'.concat(P.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&c.append('<li><a href="#">'.concat(P.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(P.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&c.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(P.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("extra-small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-extra-small">').concat(P.translate("ExtraSmall"),"</a></li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight||"small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-small">').concat(P.translate("Small"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(P.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-large">').concat(P.translate("Large"),"</a></li>")),!0===this.settings.toolbar.filterRow&&c.append("".concat('<li class="separator"></li><li class="heading">').concat(P.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(P.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(P.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(P.translate("ClearFilter"),"</a></li>")),"object"===Ge(this.settings.toolbar.filterRow)){var d='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(d+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(P.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(d+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(P.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(d+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(P.translate("ClearFilter"),"</a></li>")),c.append(d)}this.settings.toolbar.actions&&n.append(c),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(e):this.element.before(e)}var p=e.find(".btn-actions"),f=e.is(".flex-toolbar");if(this.settings.stickyHeader&&e.addClass("is-sticky"),f||p.popupmenu(),(f?e:p).on("selected",function(S,M,L){var z=null!=M&&M?.attr?null==M||null==M?void 0:M.attr("data-option"):null==L||null==L?void 0:L.attr("data-option");z&&("row-extra-small"!==z&&"row-small"!==z&&"row-short"!==z&&"row-medium"!==z&&"row-normal"!==z&&"row-large"!==z||i.rowHeight(z.substr(4)),"personalize-columns"===z&&i.personalizeColumns(),"reset-layout"===z&&i.resetColumns(),"export-to-excel"===z&&i.exportToExcel(),"export-to-csv"===z&&i.exportToCsv(),"show-filter-row"===z&&i.toggleFilterRow(),"run-filter"===z&&i.applyFilter(null,"menu"),"clear-filter"===z&&i.clearFilter())}),this.settings.initializeToolbar&&!e.data("toolbar")&&!e.hasClass("flex-toolbar")){var m=$.fn.parseOptions(e);this.settings.toolbar.fullWidth&&(m.rightAligned=!0),e.toolbar(m)}if(this.settings.initializeToolbar&&e.hasClass("flex-toolbar")&&!e.data("toolbarFlex")){var b=$.fn.parseOptions(e);e.toolbarFlex(b)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var C=e.find(".searchfield"),T=C.parent().find(".close.icon");C.off("keypress.datagrid").on("keypress.datagrid",function(S){13!==S.keyCode&&"change"!==S.type||(S.preventDefault(),i.keywordSearch(C.val()))}),T.off("click.datagrid").on("click.datagrid",function(){i.keywordSearch(C.val())})}this.settings.toolbar&&this.settings.toolbar.contextualToolbar&&(this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")),this.toolbar=e,this.element.addClass("has-toolbar")}},rowHeight:function(e){var t=[];return e&&(this.settings.rowHeight!==e&&t.push({before:this.settings.rowHeight,after:e}),this.settings.rowHeight=e),this.setRowHeightClass(),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===e||"large"===e?40:"medium"===e?30:25,"extra-small"===e&&(this.virtualRange.rowHeight=22)),this.saveUserSettings(),this.refreshSelectedRowHeight(),this.rerender(),t.length&&this.element.triggerHandler("rowheightchanged",t),this.settings.rowHeight},setRowHeightClass:function(){var e=this.settings.rowHeight;"short"===e&&(e="small"),"large"===e&&(e="normal"),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("extra-small-rowheight small-rowheight short-rowheight medium-rowheight normal-rowheight large-rowheight").addClass("".concat(e,"-rowheight")),this.refreshSelectedRowHeight()},keywordSearch:function(e){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each(function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")}),this.element.find(".search-mode").each(function(){var t=$(this),n=t.text();t.text(n.replace("<i>","").replace("</i>",""))}),e=(e||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:e,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched",type:"filtered"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(e)},setSearchActivePage:function(e){if(this.pagerAPI){var t=this;e||(e={});var n=!0;this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?(e.activePage=this.pagerAPI.filteredActivePage||1,this.settings.source&&this.settings.allowSelectAcrossPages&&e.activePage!==this.activePage&&(n=!1)):""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(e=i(e)):this.restoreActivePage||(e=i(e),this.restoreActivePage=!1),n&&(e.activePage=this.activePage),this.renderPager(e)}function i(a){return a.activePage=1,t.grandTotal&&(a.grandTotal=t.grandTotal),a}},filterKeywordSearch:function(){var e,t,n,i,a=this,s=a.filterExpr,o=function(c,d){var p=!1,f=function(m){var b=a.columnById(m)[0],C=a.fieldValue(c,b.field),T=a.settings.columns.indexOf(b);return a.formatValue(b.formatter,d,T,C,b,c,a).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(s.value)>-1};return"all"===s.column?a.element.find("th:visible").each(function(){var m=$(this).attr("data-column-id");if(m&&(p=f(m)))return!1}):s.columnId&&(p=f(s.columnId)),p};if(s&&1===s.length)if(s=s[0],a.settings.treeGrid)for(n=0,i=(e=a.settings.treeDepth).length;n<i;n++)t=""!==s.value&&!o(e[n].node,n),e[n].node._isFilteredOut=t;else for(n=0,i=(e=a.settings.dataset).length;n<i;n++)t=""!==s.value&&!o(e[n],n),e[n]._isFilteredOut=t},highlightSearchRows:function(e){var t=this,n=this;e&&""!==e&&n.tableBody.find("tr").toArray().forEach(function(i){var c,a=n.rowNodes(i.getAttribute("aria-rowindex")-1),s=(c=!1,a.toArray().forEach(function(d){[].slice.call(d.querySelectorAll("td")).forEach(function(p){var f=p.innerText.toLowerCase(),m=!!n.settings.searchExpandableRow||!ue.hasClass(t,"datagrid-expandable-row");f.indexOf(e)>-1&&m&&(c=!0,[].slice.call(p.querySelectorAll("*")).forEach(function(b){[].slice.call(b.childNodes).forEach(function(C){var T=C.parentElement;if(3===C.nodeType&&"i"!==T.tagName.toLowerCase()&&$e.unescapeHTML(T.innerHTML)===C.textContent){var S=C.textContent,M=new RegExp("(".concat(at.escapeRegExp(e),")"),"gi");ue.addClass(T,"search-mode"),ue.html(T,S.replace(M,"<i>$1</i>"))}})}))})}),c);s||a.find(".datagrid-row-detail").length?n.settings.searchExpandableRow&&s&&a.is(".datagrid-expandable-row")&&""!==e&&(a.prev().show(),a.prev().find(".datagrid-expand-btn").addClass("is-expanded"),a.prev().find(".plus-minus").addClass("active"),a.addClass("is-expanded").css("display","table-row"),a.find(".datagrid-row-detail").css("height","auto")):a.addClass("is-filtered").hide()})},getActiveDataset:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;return e.groupable&&(t=this.originalDataset),t},getDataset:function(){return this.settings.dataset.map(function(e){return delete e._isFilteredOut,e})},selectAllRows:function(){for(var e=[],t=this.getActiveDataset(),n=0,i=t.length;n<i;n++){var a=this.settings.groupable?n:this.pagingRowIndex(n);this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch?t[n]._isFilteredOut||t[n]._selected||e.push(a):t[n]._selected||e.push(a)}this.dontSyncUi=!0,this.selectRows(e,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(e,t){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var n=this._selectedRows.length-1;n>=0;n--)if(this._selectedRows[n]){var i=this.settings.groupable?this._selectedRows[n].idx:this.pagingRowIndex(this._selectedRows[n].idx);this.unselectRow(i,!0,!0)}this.settings.dataset.map(function(s){delete s._selected}),this.dontSyncUi=!1;var a=this.element.closest(".lookup-modal");this._selectedRows=1===a.length?this._selectedRows:[],this.displayCounts(),e||this.syncSelectedUI(),t||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map(function(s){delete s._selected})},unSelectAllRowsCurrentPage:function(e){var t,n,i=this,a=this.settings;this.dontSyncUi=!0,null===(t=this.currentPageRows)||void 0===t||null==t||t.forEach(function(c){var d=a.groupable?c.dataIndex:i.pagingRowIndex(c.dataIndex);i.unselectRow(d,!0,!0)});var s=this.getActiveDataset(),o=(null===(n=this.currentPageRows)||void 0===n||null==n?void 0:n.map(function(c){return c.dataIndex}))||[];s.filter(function(c,d){return o.indexOf(d)>-1}).map(function(c){return delete c._selected}),this.dontSyncUi=!1,e||this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])},selectAllRowsCurrentPage:function(e){var t;this.dontSyncUi=!0;var n=(null===(t=this.currentPageRows)||void 0===t||null==t?void 0:t.map(function(i){return i.dataIndex}))||[];n.length&&this.selectRowsBetweenIndexes([n[0],n[n.length-1]]),this.dontSyncUi=!1,e||this.syncSelectedUI()},isRowSelected:function(e){return!!e&&!0===e._selected},selectNode:function(e,t,n,i){var a=null,s=null,o="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(n&&!this.isRowSelected(n)||i)&&(e.addClass(o).attr("aria-selected","true"),(a=e.find(".datagrid-selection-checkbox").closest("td")).length&&(a.attr("aria-checked","true"),a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked")),(s=e.find(".datagrid-selection-radio").closest("td")).length&&(this.unSelectAllRows(),s.attr("aria-checked","true"),s.find(".datagrid-cell-wrapper .datagrid-radio").addClass("is-checked")),n&&(n._selected=!0))},selectRow:function(e,t,n){var i,a=this,s=null,o=this,c=this.settings,d={};if(void 0!==e&&-1!==e&&c.selectable&&!this.isRowDisabled(e)&&(s=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),i=this.dataRowIndex(s),isNaN(i)&&(i=e),s&&(s.length||!c.source))){if("function"==typeof c.onBeforeSelect&&!n&&!1===c.onBeforeSelect({node:s,idx:i}))return;var p=function(U,G){return!!a._selectedRows.filter(function(Z){return(re=Z)&&re.idx===U&&re.elem&&re.elem.is(G);var re}).length};if("single"===c.selectable){var f=-1;this._selectedRows.length>0?f=this._selectedRows[0].pagingIdx:s[0]&&s[0].classList.contains("is-selected")&&(f=i),-1!==f&&(this.unselectRow(f,!0,!0),!s.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var m=c.source&&"multiple"===c.selectable&&c.allowSelectAcrossPages;if(!s.hasClass("is-selected")||m){var b;if(c.treeGrid&&c.treeDepth&&c.treeDepth.length>0){var C=parseInt(s.attr("aria-level"),10);if(b=c.treeDepth[o.pagerAPI&&c.source?s.index():e].node,s.is(".datagrid-tree-parent")&&"multiple"===c.selectable)s.add(s.nextUntil('[aria-level="'.concat(C,'"]'))).each(function(U){var G=$(this),Z=G.attr("aria-rowindex")-1,oe=o.actualPagingRowIndex(Z),le=c.treeDepth[oe].node;if(c.selectChildren||!c.selectChildren&&0===U){var re=!G.is(s)&&!G.hasClass("is-selected");if(o.selectNode(G,Z,le),re&&!p(oe,G)){if(d={idx:oe,data:le,elem:G,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:oe,pagesize:c.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var J=o.getUniqueRowID(le);J&&(d.uniqueRowID=J)}o._selectedRows.push(d)}}});else if("siblings"===c.selectable){var T,S;o.settings.selectAllCurrentPage?o.unSelectAllRowsCurrentPage(!0):o.unSelectAllRows(!0,!0),1===C?T=s.parent().find('[aria-level="1"]'):C>1&&(T=s.nextUntil('[aria-level="'.concat(C-1,'"]')).filter('[aria-level="'.concat(C,'"]')),S=s.prevUntil('[aria-level="'.concat(C-1,'"]')).filter('[aria-level="'.concat(C,'"]'))),s.add(T).add(S).each(function(U){var G=$(this),Z=G.attr("aria-rowindex")-1,oe=o.actualPagingRowIndex(Z),le=c.treeDepth[oe].node;if(c.selectChildren||!c.selectChildren&&0===U){var re=!G.is(s)&&!G.hasClass("is-selected");if(o.selectNode(G,Z,le),re&&!p(oe,G)){if(d={idx:oe,data:le,elem:G,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:oe,pagesize:c.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var J=o.getUniqueRowID(le);J&&(d.uniqueRowID=J)}o._selectedRows.push(d)}}})}else o.selectNode(s,e,b);o.setNodeStatus(s),o.lastSelectedRow=e}else{if(b=c.dataset[i],c.groupable){var M=o.actualPagingRowIndex(o.actualRowIndex(s));if(isNaN(M))return;var L=o.groupArray[M];if(!p((b=o.settings.dataset[L.group].values[L.node]).idx,s)){if(d={idx:b.idx,data:b,elem:s,group:c.dataset[o.groupArray[M].group],page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.settings.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var z=o.getUniqueRowID(b);z&&(d.uniqueRowID=z)}this._selectedRows.push(d)}}o.selectNode(s,i,b),o.lastSelectedRow=e}if(!c.groupable){var V=o.actualPagingRowIndex(e);if(-1===V&&(V=e),!p(V,o.visualRowNode(V))){if(d={idx:V,data:b,elem:o.visualRowNode(V),page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:e,pagesize:o.settings.pagesize},o.settings.source&&o.settings.allowSelectAcrossPages){var N=o.getUniqueRowID(b);N&&(d.uniqueRowID=N)}this._selectedRows.push(d)}}}t||o.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(e){e.sort(function(n,i){return n-i});for(var t=e[0];t<=e[1];t++)this.selectRow(t);this.displayCounts()},syncHeaderCheckbox:function(e){if(0!==this.headerNodes().length){var t=this.settings,n=this.getActiveDataset(),i=this.headerNodes().find(".datagrid-checkbox"),a=e.length,s=this._selectedRows.length,o=i.data("selected");if(t.selectAllCurrentPage&&this.currentPageRows&&n.length!==e.length){var c,d=(null===(c=this.currentPageRows)||void 0===c||null==c?void 0:c.map(function(p){return p.dataIndex}))||[];s=n.filter(function(p,f){return d.indexOf(f)>-1}).filter(function(p){return p._selected}).length}t.source&&t.allowSelectAcrossPages&&(s=n.filter(function(p){return p._selected}).length),s!==a&&s>0&&"partial"===o||s===a&&"all"===o&&0!==s||0===s&&"none"===o||(s>0&&i.data("selected","partial").addClass("is-checked is-partial").attr("aria-checked","mixed"),s===a&&i.data("selected","all").addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),0===s&&i.data("selected","none").removeClass("is-checked is-partial").attr("aria-checked","false"))}},getUniqueRowID:function(e){var t=null;if(this.settings.columnIds.length>0){t="rowId";for(var n=0;n<this.settings.columnIds.length;n++)t+=" ".concat(e[this.settings.columnIds[n]]);t=t.replace(/([0-9A-Z]+)/g,function(i,a){return" ".concat(a)}).replace(/([0-9a-z]+)/g,function(i,a){return"".concat(a," ")}).trim(),t=$e.toCamelCase(t)}return t},syncSelectedRows:function(){for(var e,t=this,n=this.settings,i=n.groupable&&this.originalDataset?this.originalDataset:n.dataset,a=null,s=function(b){var C=n.groupable?t.dataRowNode(a):t.visualRowNode(a);C[0]&&(t._selectedRows[b].elem=C,t.selectNode(C,a,i[a],!0))},o=0,c=this._selectedRows.length;o<c;o++){var d=(e=this._selectedRows[o])?e.uniqueRowID:null;if(this.settings.source&&this.settings.allowSelectAcrossPages&&d){for(var p=0,f=i.length;p<f;p++)if(d===this.getUniqueRowID(i[p])){var m=n.groupable?this.dataRowNode(p):this.visualRowNode(p);m[0]&&(this._selectedRows[o].elem=m,this.selectNode(m,p,i[p],!0))}}else this.pagerAPI&&this._selectedRows[o].page===this.pagerAPI.activePage&&(a=this._selectedRows[o].idx,s(o)),this._selectedRows[o].pagesize===n.pagesize||n.groupable||(n.dataset[a=this._selectedRows[o].pagingIdx]?(s(o),this._selectedRows[o].idx=a,this._selectedRows[o].page=this.pagerAPI.activePage,this._selectedRows[o].pagesize=n.pagesize):(this._selectedRows[o].idx=a%n.pagesize,this._selectedRows[o].page=Math.round(a/n.pagesize)+1,this._selectedRows[o].pagesize=n.pagesize))}},calculatePagerInfo:function(e,t,n){for(var i=this.settings,s={idx:e,page:1,pagesize:n="number"==typeof n&&n>0?n:i.pagesize,numOfPages:Math.ceil((t||i.treeGrid?i.treeDepth:i.dataset).length/n)},o=0;o<s.numOfPages;o++){if(e>=(s.page-1)*s.pagesize&&e<s.page*s.pagesize){s.pagingIdx=e-s.pagesize*o;break}s.page++}return s},syncSelectedRowsIdx:function(){var e=this.getActiveDataset();if(0!==this._selectedRows.length&&0!==e.length){this._selectedRows=[];for(var t=0;t<e.length;t++){var n=this.settings.treeGrid?e[t].node:e[t];if(n._selected){var i={idx:t,data:n,elem:this.dataRowNode(t),pagingIdx:t,pagesize:this.settings.pagesize};if(this.settings.groupable){var a=this.rowNodesByDataIndex(t);if(a.length){var s=this.actualPagingRowIndex(this.actualRowIndex(a)),o=this.groupArray[s].group;i.group=this.settings.dataset[o],i.page=this.calculatePagerInfo(o).page}}else i.page=this.calculatePagerInfo(t).page;this._selectedRows.push(i)}}}},syncSelectedUI:function(){var e,t,n,i,a,s,o=this,c=this.getActiveDataset(),d=c;if(this.settings.selectAllCurrentPage){var p,f=(null===(p=this.currentPageRows)||void 0===p||null==p?void 0:p.map(function(S){return S.dataIndex}))||[];d=c.filter(function(S,M){return f.indexOf(M)>-1})}var m=d;if(this.filterRowRendered){m=[];for(var b=0,C=null===(T=d)||void 0===T||null==T?void 0:T.length;b<C;b++){var T;d[b]._isFilteredOut||m.push(b)}}this.syncHeaderCheckbox(m),1!==(null===(e=this.contextualToolbar)||void 0===e||null==e?void 0:e.length)||this.dontSyncUi||(0===(null===(t=this._selectedRows)||void 0===t||null==t?void 0:t.length)&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){o.contextualToolbar.css("display","none")}).animateClosed(),!((null===(n=this._selectedRows)||void 0===n||null==n?void 0:n.length)>0)||0!==(null===(i=this.contextualToolbar)||void 0===i||null==i?void 0:i.height())&&null!==(a=this.contextualToolbar)&&void 0!==a&&a?.is(":visible")&&null!==(s=this.contextualToolbar)&&void 0!==s&&s?.hasClass("is-hidden")||(this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(P.translate("Selected"))),this.contextualToolbar.removeClass("is-hidden").css("display","block").one("animateopencomplete.datagrid",function(){$(this).removeClass("is-hidden").triggerHandler("recalculate-buttons")}).animateOpen()))},activateRow:function(e){this.activatedRow()[0].row!==e&&this.toggleRowActivation(e)},deactivateRow:function(){var e=this.activatedRow()[0].row;e>=0&&this.toggleRowActivation(e)},activatedRow:function(){var e=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var t=this.settings,n=t.treeGrid?t.treeDepth:t.dataset,i=this.tableBody.find("tr.is-rowactivated");if(i.length){var a=this.dataRowIndex(i),s=t.indeterminate?a:this.actualRowIndex(i);e=[{row:s,item:n[s],elem:i}]}else{e=null;for(var o=0;o<n.length;o++)if(n[o]._rowactivated){e=[{row:o,item:n[o],elem:void 0}];break}null===e&&(e=[{row:-1,item:void 0,elem:i}])}}return e},toggleRowActivation:function(e){var t,n,i,a=this.settings,s=a.treeGrid?a.treeDepth:a.dataset;"number"==typeof e?(t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+1,'"]')),i=e,this.pagerAPI&&a.source&&a.indeterminate&&(t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+(this.pagerAPI.activePage-1)*a.pagesize+1,'"]')))):(t=(n=e instanceof jQuery?e:$(e))[0],i=a.treeGrid||a.groupable?this.actualRowIndex(n):this.dataRowIndex(n)),a.indeterminate&&!t&&(t=(n=this.actualRowNode(i))[0]),s[i]&&s[i]._rowactivated?this.deactivateRowNode(i,s):(this.deactivateAllRowNodes(s),this.activateAllRowNodes(i,s))},activateAllRowNodes:function(e,t){var n=this;if(!("number"!=typeof e||e<0)){var i=this.settings;void 0===t&&(t=i.treeGrid?i.treeDepth:i.dataset);var a=[{row:e,item:t[e]}];t[e]&&$.when(this.element.triggerHandler("beforerowactivated",a)).done(function(s){var o;"string"==typeof(o=s)&&"false"===o.toLowerCase()||"boolean"==typeof o&&!1===o||"number"==typeof o&&0===o||((i.paging&&i.source&&"mixed"===i.selectable?n.rowNodesByDataIndex(e).toArray():n.rowNodes(e).toArray()).forEach(function(c){c.classList.add("is-rowactivated")}),t[e]._rowactivated=!0,n.element.triggerHandler("rowactivated",a=[{row:e,item:t[e]}]))})}},deactivateRowNode:function(e,t){if(!("number"!=typeof e||e<0)){var n=this.settings;void 0===t&&(t=n.treeGrid?n.treeDepth:n.dataset),t[e]&&!n.disableRowDeactivation&&(this.rowNodes(e).toArray().forEach(function(i){i.classList.remove("is-rowactivated")}),delete t[e]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:e,item:t[e]}]))}},deactivateAllRowNodes:function(e){var t=this.settings,n=null;void 0===e&&(e=t.treeGrid?t.treeDepth:t.dataset);var i=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(i.length>0){i.forEach(function(c){c.classList.remove("is-rowactivated")});var a=t.treeGrid||t.groupable?this.actualRowIndex($(i)):this.dataRowIndex($(i));n={row:a,item:e[a]},e[a]&&delete e[a]._rowactivated}else for(var s=0;s<e.length;s++){var o=e[s];if(o._rowactivated){delete o._rowactivated,n={row:s,item:o};break}}null!==n&&this.element.triggerHandler("rowdeactivated",[n])},toggleRowSelection:function(e,t){var n="number"==typeof e?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):e,i="number"==typeof e?e:this.actualRowIndex(n);if(this.settings.groupable&&(i=this.dataRowIndex(n)),!(!1===this.settings.selectable||this.editor&&n.hasClass("is-selected")))return this.settings.dblClickApply||"single"!==this.settings.selectable||!n.hasClass("is-selected")||this.settings.disableRowDeselection?(n.hasClass("is-selected")?this.settings.disableRowDeselection||this.unselectRow(i):this.settings.dblClickApply?this.selectRow(i,!1,!0):this.selectRow(i),this.settings.dblClickApply&&t&&this.selectRow(i),this.displayCounts(),this._selectedRows):(this.unselectRow(i),this.displayCounts(),this._selectedRows)},unselectRow:function(e,t,n){var i=this,a=i.settings,s=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),o=a.source&&"multiple"===a.selectable&&a.allowSelectAcrossPages,c=null,d=null;if(s&&void 0!==e){var p=a.treeGrid?a.treeDepth[e].node:a.dataset[e],f=function(T){return T?T.uniqueRowID:null},m=function(T,S){var M=function(V,N){delete V._selected,void 0===N&&(N=S);for(var U=0;U<i._selectedRows.length;U++){var G=f(i._selectedRows[U]);if(a.source&&a.allowSelectAcrossPages&&G){if(G===i.getUniqueRowID(V)){i._selectedRows.splice(U,1);break}}else if(i._selectedRows[U].idx===N){if(o&&i._selectedRows[U].elem&&!i._selectedRows[U].elem.is(T))continue;i._selectedRows.splice(U,1);break}}};if(T.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==i.columnIdxById("selectionCheckbox")&&((c=i.cellNode(T,i.columnIdxById("selectionCheckbox"))).attr("aria-checked","false"),c.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").removeAttr("aria-label")),-1!==i.columnIdxById("selectionRadio")&&((d=i.cellNode(T,i.columnIdxById("selectionRadio"))).attr("aria-checked","false"),d.find(".datagrid-cell-wrapper .datagrid-radio").removeClass("is-checked no-animate").removeAttr("aria-label")),a.treeGrid)for(var L=0;L<a.treeDepth.length;L++)i.isRowSelected(a.treeDepth[L].node)&&(void 0!==S?S===a.treeDepth[L].idx-1&&M(a.treeDepth[L].node):M(a.treeDepth[L].node));else{var z=T.length?i.dataRowIndex(T):S;void 0!==z&&z>-1&&(p=a.dataset[z]),a.groupable&&(p=i.originalDataset[z]),void 0!==p&&(a.paging&&a.source?M(p,z):M(p))}};if(a.treeGrid){var b=parseInt(s.attr("aria-level"),10);if(s.is(".datagrid-tree-parent")&&"multiple"===a.selectable)s.add(s.nextUntil('[aria-level="'.concat(b,'"]'))).each(function(T){var S=$(this),M=S.attr("aria-rowindex")-1,L=i.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&0===T)&&m(S,L)});else if("siblings"===a.selectable)s.parent().find(".is-selected").each(function(T){var S=$(this),M=S.attr("aria-rowindex")-1,L=i.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&0===T)&&m(S,L)});else{var C=i.actualPagingRowIndex(e);m(s,C)}i.setNodeStatus(s)}else m(s,e);t||i.syncSelectedUI(),n||i.element.triggerHandler("selected",[i._selectedRows,"deselect",p])}},setNodeStatus:function(e){var t,n=this,i="multiple"===n.settings.selectable,a=n.settings,s=n.cellNode(e,n.columnIdxById("selectionCheckbox"));if(!i)return s.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),s.attr("aria-checked","false"),void(e.is(".is-selected")&&(s.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"),s.attr("aria-checked","true")));var o=function(c,d){c.each(function(){var p=$(this),f=n.cellNode(p,n.columnIdxById("selectionCheckbox")),m=n.getSelectedStatus(p,d);f.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),f.attr("aria-checked","false"),"mixed"===m?(f.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"),f.attr("aria-checked","mixed")):m&&(f.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked"),f.attr("aria-checked","true"))})};t=e.add(e.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),a.selectChildren&&o(t),t=e,+e.attr("aria-level")>1&&(t=t.add(e.prevUntil('[aria-level="1"]')).add(e.prevAll('[aria-level="1"]:first'))),t=t.filter(".datagrid-tree-parent"),a.selectChildren&&o(t)},getSelectedStatus:function(e){var t=this.settings,n=0,i=0,a=0,s=e.add(e.nextUntil('[aria-level="1"]'));if(t.treeGrid&&"multiple"===t.selectable){var o=e.attr("aria-level");s=e.add(e.nextUntil('[aria-level="'.concat(o,'"]')))}return s.each(function(){n++,$(this).is(".is-selected")?i++:a++}),n===i||n!==a&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(e,t,n){var i=-1,a=this.settings,s="siblings"===a.selectable,o=this.getActiveDataset();if("number"==typeof e&&(e=[e]),!e||0===e.length)return this._selectedRows;if("single"===a.selectable&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),i="[object Array]"===Object.prototype.toString.call(e)?e[0]:e.index(),this.selectRow(i,!0,!0)),"multiple"===a.selectable||"mixed"===a.selectable||s)if("[object Array]"===Object.prototype.toString.call(e)){for(var c=0;c<e.length;c++)this.selectRow(e[c],!0,!0);if(0===e.length)for(var d=0,p=o.length;d<p;d++)this.unselectRow(d,!0,!0)}else this.selectRow(e.index(),!0,!0);return this.displayCounts(),t||this.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(e,t){for(var n=this.settings,i=this.getActiveDataset(),a=-1,s=[],o=0;o<i.length;o++)if(n.groupable)for(var c=0;c<i[o].values.length;c++)a++,i[o].values[c][e]===t&&s.push(a);else(n.treeGrid?i[o].node:i[o])[e]===t&&s.push(o);return s},rowStatus:function(e,t,n){var i=this.getActiveDataset();if(!t)return delete i[e].rowStatus,void this.updateRow(e);if(!/dirty/.test(t)&&i[e]){i[e].rowStatus={};var a=i[e].rowStatus;a.icon=t,t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace("-progress","Progress"),a.text=P.translate(t),n=n?n.charAt(0).toUpperCase()+n.slice(1):a.text,a.tooltip=n,this.updateRow(e),this.setupTooltips(!0)}},columnById:function(e){return $.grep(this.settings.columns,function(t){return t.id===e})},columnIdxById:function(e){for(var t=this.settings.columns,n=-1,i=0;i<t.length;i++)if(t[i].id===e){n=i;break}return n},handleKeys:function(){var e=this,t=this,n=$("th .datagrid-checkbox",t.headerRow);t.element.on("keydown.datagrid","th",function(i){var a,s,o=i.which||i.keyCode||i.charCode||0,c=$(this),d=t.columnIdxById(c.attr("data-column-id")),p=t.visibleColumns().length-1,f=$(i.target);if(!(f.closest(".popupmenu").length>0)){if(13===o||32===o){if(a="multiple"===t.settings.selectable&&0===d?$(".datagrid-checkbox",c):c,f.is(".btn-menu.btn-filter"))return void a.trigger("click.datagrid");var m=function(C){var T;return C&&"selectionCheckbox"===(null===(T=C[0])||void 0===T||null==T?void 0:T.dataset.columnId)},b=m(a)||m(a.prevObject);if(f.is("th.is-sortable")&&t.setSortColumn($(this).attr("data-column-id")),("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&b){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows()}32===o&&i.preventDefault()}-1!==[35,36,37,39].indexOf(o)&&(s=/35|36/i.test(o)||(i.ctrlKey||i.metaKey)&&/37|39/i.test(o)?P.isRTL()?36===o||(i.ctrlKey||i.metaKey)&&37===o?p:0:35===o||(i.ctrlKey||i.metaKey)&&39===o?p:0:P.isRTL()?39===o?d>0?d-1:d:d<p?d+1:p:37===o?d>0?d-1:d:d<p?d+1:p,t.activeCell.cell=s,c.removeAttr("tabindex").removeClass("is-active"),i.preventDefault()),40===o&&(c.removeAttr("tabindex"),t.activeCell.node=t.cellNode(0,t.settings.groupable?0:t.activeCell.cell).attr("tabindex","0").focus(),i.preventDefault()),f.parents(".modal").length>0&&f.hasClass("btn-filter")&&(i.shiftKey&&9===o?f.parents("th").prev("th").length>0?(i.preventDefault(),f.parents("th").prev("th").find("[tabindex=0]").trigger("focus")):f.parents(".modal-content").find(".toolbar").length>0&&(i.preventDefault(),i.stopPropagation(),f.parents(".modal-content").find(".toolbar").find("button[tabindex=0]").trigger("focus")):9===o&&(i.preventDefault(),f.siblings("input").trigger("focus")))}}),t.element.on("keydown.datagrid","td, input",function(i){var a=i.which||i.keyCode||i.charCode||0,s=!1;113!==a||e.inlineMode||(t.settings.actionableMode=!t.settings.actionableMode,s=!0);var o=t.element.parents(".modal");if(27===a&&0!==o.length&&o.data().modal.close(),s)return i.preventDefault(),i.stopPropagation(),s}),t.element.on("keydown.datagrid","td",function(i){var a=i.which||i.keyCode||i.charCode||0,s=!1,o=$(i.target),c=P.isRTL(),d=t.activeCell.node,p=$(this).parent(),f=p.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),m=p.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),b=t.activeCell.row,C=t.activeCell.cell,T=t.columnSettings(C),S=p.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),M=t.settings.dataset[t.dataRowIndex(p)],L=t.tableBody.find("tr:visible"),z=function(Qe){var nt=L.filter('[aria-rowindex="'.concat(Qe+1,'"]'));return nt.is(".datagrid-rowgroup-header")?nt.index():t.dataRowIndex(nt)};d.length||(t.activeCell.node=t.cellNode(b,C),d=t.activeCell.node);var V,N,U=function(Qe,nt,ot){if(S)return jt=t.activeCell.groupNode||d,Qe+((xt=ot)?-1:1)>nt?xt?jt.prevAll(":visible").last():jt.nextAll(":visible").last():xt?jt.prevAll(":visible").first():jt.nextAll(":visible").first();var xt,jt,Ze=Qe+(ot?-1:1);if(Ze>nt)return nt;for(;t.settings.columns[Ze]&&t.settings.columns[Ze].hidden;)Ze=ot?Ze-1:Ze+1;return Ze},G=!!$(".datagrid-selection-checkbox",d).length,Z=L.last(),oe=t.settings.columns.length-1;if(t.settings.onKeyDown){var le=function(Qe){Qe||(i.stopPropagation(),i.preventDefault())};if(!1===t.settings.onKeyDown(i,{activeCell:t.activeCell,row:b,cell:C},le)||!le)return i.stopPropagation(),void i.preventDefault()}if(121===a&&i.shiftKey&&o.trigger("contextmenu"),-1===[9,37,38,39,40].indexOf(a)||(!o.closest(".code-block").length||9===a&&i.shiftKey&&0===t.getFocusables(d).index)&&(9===a||!o.is(".code-block-actions")&&!o.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))){if(-1!==[9,37,39].indexOf(a)){if(9===a&&!t.settings.actionableMode||!t.settings.cellNavigation)return;if(9!==a&&i.altKey)t.setActiveCell(b,C=37===a&&!c||39===a&&c?0:oe);else if(!t.quickEditMode||9===a){if(9===a&&i.shiftKey&&o.is(".code-block-actions")?t.focusNextPrev("prev",d):C=!c&&(37===a||9===a&&i.shiftKey)||c&&(39===a||9===a)?U(C,oe,!0):U(C,oe),-1===C&&!t.settings.actionableMode||!t.settings.cellNavigation||-1===C&&t.settings.actionableMode&&(C=oe,-1==--b)||C===oe&&oe===t.activeCell.cell&&t.settings.actionableMode&&(C=0,++b===t.visibleRowCount))return;C instanceof jQuery?t.setActiveCell(C):t.setActiveCell(b,C),t.settings.actionableMode&&(t.makeCellEditable(t.activeCell.rowIndex,C,i),t.containsTextField(d)&&t.containsTriggerField(d)&&(t.quickEditMode=!0)),t.quickEditMode=!1,s=!0}}if(38===a&&!t.quickEditMode)if(i.altKey||i.metaKey){var J=z(0);t.setActiveCell(J,C),s=!0}else{if(0===b&&!f.is(".datagrid-rowgroup-header"))return d.removeAttr("tabindex"),void t.element.find("th").eq(C).attr("tabindex","0").focus();t.setActiveCell(f,C),s=!0}if(40!==a||t.quickEditMode||(i.altKey||i.metaKey?(t.setActiveCell(Z,C),s=!0):(t.setActiveCell(m,C),s=!0)),32===a&&i.ctrlKey&&d){var ce="";(b=d.closest("tr")).children().each(function(){var Qe=$(this);ce+="".concat(Qe.text()," ")}),$("body").toast({title:"",audibleOnly:!0,message:ce}),s=!0}if(36!==a||d.hasClass("is-editing")||(t.setActiveCell(b,0),s=!0),35!==a||d.hasClass("is-editing")||(t.setActiveCell(b,oe),s=!0),34===a&&(t.setActiveCell(Z,C),s=!0),33===a&&(t.setActiveCell(z(0),C),s=!0),32===a&&(!t.settings.editable||G)){if(b=d.closest("tr"),1===o.closest(".datagrid-row-detail").length)return;i.preventDefault();var ke=o.find(".datagrid-expand-btn, .datagrid-drilldown");if(ke&&ke.length)return ke.trigger("click"),void i.preventDefault();"multiple"!==t.settings.selectable&&"mixed"!==t.settings.selectable||!i.shiftKey?t.toggleRowSelection(b):t.selectRowsBetweenIndexes([t.lastSelectedRow,b.attr("aria-rowindex")-1])}if(t.settings.editable&&32===a){var _e=null==o||null==o?void 0:o.find(".datagrid-expand-btn");_e.length>0&&(_e.trigger("click"),i.preventDefault()),t.editor||t.makeCellEditable(t.activeCell.rowIndex,C,i)}if(13===a&&d.is(".has-btn-actions")){var Oe=d.find(".btn-actions");Oe.length&&Oe.trigger("click")}if(13===a&&T.click&&"function"==typeof T.click&&(d.hasClass("is-cell-readonly")||T.click(i,[{row:b,cell:C,item:M,originalEvent:i}])),t.settings.editable&&13===a){if(o.is("textarea")&&i.shiftKey||o.is(".btn-menu")||o.closest(".popupmenu.is-open").length)return;t.editor?(t.quickEditMode=!1,t.commitCellEdit(),t.setNextActiveCell(i)):(t.makeCellEditable(t.activeCell.rowIndex,C,i),t.containsTextField(d)&&t.containsTriggerField(d)&&(t.quickEditMode=!0)),s=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(a)||i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||!t.settings.editable||t.editor||null!==(V=i.currentTarget)&&void 0!==V&&null!==(N=V?.parentElement)&&void 0!==N&&N?.classList.contains("datagrid-expandable-row")||t.makeCellEditable(t.activeCell.rowIndex,C,i),("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&!t.editor&&(i.ctrlKey||i.metaKey)&&65===a){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows(),s=!0}if(s)return i.preventDefault(),i.stopPropagation(),!1}})},getFocusables:function(e){var t=$(":focusable",e);return{elements:t,index:t.index($(":focus"))}},focusNextPrev:function(e,t){if(t&&"string"==typeof e){e=e.toLowerCase();var n=this.getFocusables(t),i=n.elements,a=i.length,s=n.index;/\b(next|prev)\b/g.test(e)&&i.eq(s="next"===e?s+1>=a?0:s+1:s-1<0?a:s-1).focus()}},containsTextField:function(e){var t,n=["image","button","submit","reset","checkbox","radio"],i="textarea, input",a=n.length;for(i+=a?":not(":"",t=0;t<a;t++)i+="[type=".concat(n[t],"],");return i=a?"".concat(i.slice(0,-1),")"):"",!!$(i,e).length},containsTriggerField:function(e){return!$(".dropdown, .datepicker, .lookup",e).length},isRowDisabled:function(e){return!(!this.settings.isRowDisabled||"function"!=typeof this.settings.isRowDisabled||"true"!==this.rowNodes(e).attr("aria-disabled"))},isCellEditable:function(e,t){if(!this.settings.editable)return!1;var n=this.columnSettings(t);if(n.readonly||this.isRowDisabled(e)||!this.activeCell.node)return!1;var i=this.activeCell.node.find(".datagrid-cell-wrapper"),a=i.text()?i.text():this.fieldValue(this.settings.dataset[e],n.field);if(n.isEditable){var s=this.settings.dataset[e];if(this.settings.treeDepth&&this.settings.treeDepth[e]&&(s=this.settings.treeDepth[e].node),!n.isEditable(e,t,a,n,s,this,"is-editable"))return!1}return!!n.editor},makeCellEditable:function(e,t,n){var i,a;if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var s=this.activeCell.node.find(".datagrid-cell-wrapper"),o=s.parent("td"),c=$(".datagrid-tree-node",s).length>0,d=$(".datagrid-expand-btn",s).length>0;if(o.hasClass("is-editing")||o.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var p=this.columnSettings(t);if(!p.editor)return 32!==n.keyCode||$(n.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var f=this.actualRowNode(e),m=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(f)):this.dataRowIndex(f),b=this.rowData(m),C=$(".is-editor",o).length>0,T=$(".is-placeholder",s).length>0,S=s.text()?s.text():this.fieldValue(b,p.field);if((C||T)&&(S=this.fieldValue(b,p.field)),!this.isCellEditable(m,t))return!1;(d||c)&&(d&&(S=$("> span",s).text()),"string"==typeof S&&(S=S.replace(/^\s/,""))),p.inlineEditor?o.addClass("is-editing-inline"):(C&&s.css({position:"static",height:s.outerHeight()}),o.addClass("is-editing"),p.doNotEmptyCellWhenEditing||o.hasClass("is-fileupload")||s.empty()),S=$e.sanitizeConsoleMethods(S),this.element.triggerHandler("beforeentereditmode",[{row:m,cell:t,item:b,target:s,value:S,column:p,editor:this.editor}]),1===this.visibleColumns().length&&o.addClass("has-singlecolumn"),this.editor=new p.editor(m,t,S,s,p,n,this,b),this.editor.row=m,this.editor.cell=t;var M=(null===(i=p.formatter)||void 0===i||null==i?void 0:i.toString())||"";if(0!==M.indexOf("function Badge")&&0!==M.indexOf("function Alert")||(this.editor.useValue=!0),this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(S=this.fieldValue(b,p.field)),this.editor.val(S),this.settings.showDirty){var L=S;""===L&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(L=!1),this.addToDirtyArray(m,t,{originalVal:L,isDirty:!1})}return"function"==typeof this.editor.focus&&this.editor.focus(),null!==(a=this.editor)&&void 0!==a&&a?.input.is(".dropdown")&&n.keyCode&&![9,13,32,37,38,39,40].includes(n.keyCode)&&this.editor.input.data("dropdown").handleAutoComplete(n),this.element.triggerHandler("entereditmode",[{row:m,cell:t,item:b,target:s,value:S,column:p,editor:this.editor}]),!0}},rowData:function(e){if(this.settings.groupable)return this.originalDataset[e];var t=this.settings.treeGrid?this.settings.treeDepth[e].node:this.settings.dataset[e];return this.settings.treeGrid&&this.settings.treeDepth[e].rowStatus&&(this.settings.treeDepth[e].node.rowStatus=this.settings.treeDepth[e].rowStatus),t},commitCellEdit:function(e){var t=this;if(this.editor){var n,i=this.editor.input,a=this.getEditorName(this.editor),s="editor"===a,o="fileupload"===a,c=!i.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");o?("function"==typeof this.editor.val&&(n=this.editor.val()),Promise.resolve(n).then(function(d){t.commitCellEditUtil(i,d,s,o,c,e)})):("function"==typeof this.editor.val&&(n=this.editor.val()),this.commitCellEditUtil(i,n,s,o,c,e))}},commitCellEditUtil:function(e,t,n,i,a,s){if(this.editor){var o,c,d;n?o=this.editor.td:i?("clear"===this.editor.status?t="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(t=this.editor.originalValue),o=this.tableBody.find("#".concat(e.attr("id"))).closest("td"),t=$e.escapeHTML(t)):(o=e.closest("td"),t=$e.escapeHTML(t)),null!==this.settings.source&&a?(c=this.activeCell.rowIndex,d=this.activeCell.dataRow):(c=this.actualRowIndex(o.parent()),d=this.dataRowIndex(o.parent()));var p=o.attr("aria-colindex")-1,f=this.columnSettings(p),m=this.settings.treeGrid?this.settings.treeDepth[d].node:this.getActiveDataset()[d],b=this.fieldValue(m,f.field);if(f.beforeCommitCellEdit&&(i||!s)&&!1===f.beforeCommitCellEdit({cell:p,row:d,item:m,editor:this.editor,api:this}))return;if(this.editor){b=$e.sanitizeConsoleMethods(b),t=$e.sanitizeConsoleMethods(t);var C=o.hasClass("is-editing-inline");o.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?d:c,p,t,!1,C);var T=this.fieldValue(m,f.field);this.element.triggerHandler("exiteditmode",[{row:c,cell:p,item:m,target:o,value:T,oldValue:b,column:f,editor:this.editor}])}}},validateCell:function(e,t){var n,i,a=this,s=this,o=this.columnSettings(t);if(o.validate){var c,d,p=[],f=o.validate.split(" "),m=$.fn.validation,b=this.fieldValue(this.settings.dataset[e],o.field),C=[],T="";for(d=0;d<f.length;d++){var S=m.rules[f[d]],M={row:e,cell:t,item:this.settings.dataset[e],column:o,grid:s};c=$.Deferred(),S.async?S.check(b,$("<input>").val(b),M,L,c):L(S.check(b,$("<input>").val(b),M),!0,f[d],c),p.push(c)}(n=$).when.apply(n,p).then(function(){var z=$.fn.validation.ValidationTypes;for(var V in z)if(T="",C[(i=z[V]).type]&&(T=C[i.type]),""!==T){s.showCellError(e,t,T,i.type);var N=a.dataRowNode(e);s.element.trigger("cell".concat(i.type),{row:e,cell:t,message:T,target:a.cellNode(N,t),value:b,column:o})}else s.clearCellError(e,t,i.type)})}function L(z,V,N,U){var G=m.rules[N];i=$.fn.validation.ValidationTypes[G.type]||$.fn.validation.ValidationTypes.error,T="",C[i.type]&&(T=C[i.type]),!z&&V&&(T?(T=(/^\u2022/.test(T)?"":"\u2022 ")+T,T+="<br/>".concat("\u2022 ",G.message)):T=G.message,C[i.type]=T),U.resolve()}},showCellError:function(e,t,n,i){var a=this.dataRowNode(e),s=this.cellNode(a,t);if(this.clearNonVisibleCellErrors(e,t,i),!s.length)return this.nonVisibleCellErrors.push({row:e,cell:t,message:n,type:i}),void this.showNonVisibleCellErrors();s.addClass(i).attr("data-".concat(i,"message"),n);var o=s.find(".icon-".concat(i));if(!o.length){s.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(i)],icon:i})));var c={forced:!0,placement:"bottom",content:n,isError:"error"===i||"dirtyerror"===i,wrapper:o=s.find(".icon-".concat(i))};this.cacheTooltip(o,c),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function(){var e=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove(),this.removeToolbar();else{var t=function(i){var a=$.fn.validation.ValidationTypes[i].type,s=$.grep(e.nonVisibleCellErrors,function(o){return o.type===a});e.showNonVisibleCellErrorType(s,a)};for(var n in $.fn.validation.ValidationTypes)t(n)}},removeToolbar:function(){this.toolbar.find(".buttonset").children().length<1&&this.toolbar.find(".title").text().trim().length<1&&(this.toolbar.destroy(),this.toolbar.remove(),delete this.toolbar)},showNonVisibleCellErrorType:function(e,t){var n,i,a,s,o=[],c=$.fn.validation.ValidationTypes[t]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(i=this.toolbar.parent().find(".table-errors")),0!==e.length){for(s=0;s<e.length;s++){var d=Math.floor((e[s].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(d,o)&&o.push(d)}for(s=0;s<o.length;s++)n="".concat((n?"".concat(n,"<br>"):"")+P.translate(c.pagingMessageID)," ").concat(o[s]);0===this.toolbar.parent().find(".table-errors").length&&(i=$('<div class="table-errors"></div>')),(a=i.find(".icon-".concat(t))).length||(i.append($($.createIcon({classes:["icon-".concat(t)],icon:t}))),a=i.find(".icon-".concat(t))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(i),this.cacheTooltip(a,{forced:!0,placement:"bottom",content:n,isError:"error"===t||"dirtyerror"===t,wrapper:a}),this.setupTooltips(!1,!0)}else i&&i.length&&(a=i.find(".icon-".concat(c.type)),this.hideTooltip(),i.find(".icon-".concat(c.type)).remove())},clearAllCellError:function(e,t){var n=$.fn.validation.ValidationTypes;for(var i in n)this.clearCellError(e,t,n[i].type)},clearCellError:function(e,t,n){this.clearNonVisibleCellErrors(e,t,n);var i=this.dataRowNode(e),a=this.cellNode(i,t);a.length&&this.clearNodeErrors(a,n)},clearNonVisibleCellErrors:function(e,t,n){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var i=this.toolbar.parent().find(".table-errors").find(".icon-".concat(n));i.length&&($.grep(this.nonVisibleCellErrors,function(a){return a.type===n?a:""}).length||i.remove())}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(a){return a.row!==e||a.cell!==t||a.type!==n?a:""}),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(e){this.dataRowNode(e).removeClass("error alert rowstatus-row-new rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(e,"","");for(var t=0;t<this.settings.columns.length;t++)this.clearAllCellError(e,t)},clearAllErrors:function(){for(var e=0,t=0;t<this.settings.dataset.length;t++){this.settings.dataset[t].rowStatus&&(delete this.settings.dataset[t].rowStatus,e++);for(var n=0;n<this.settings.columns.length;n++)this.clearAllCellError(t,n)}e>0&&this.render()},clearNodeErrors:function(e,t){var n;(e=e instanceof jQuery?e[0]:e).classList.remove(t),e.removeAttribute("data-".concat(t,"message"));var i=e.querySelector(".icon-".concat(t));null===(n=e)||void 0===n||null==n||n.classList.remove("rowstatus-cell"),i&&(i.parentNode.removeChild(i),this.hideTooltip())},resetRowStatus:function(){for(var e=this.settings.dataset.filter(function(s){return s.rowStatus}),t=0;t<e.length;t++){var n,i;if(delete e[t].rowStatus,null!==(n=e[t])&&void 0!==n&&null!==(i=n?.children)&&void 0!==i&&i?.length)for(var a=0;a<e[t].children.length;a++)delete e[t].children[a].rowStatus}e.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(e){e instanceof jQuery&&e.length<0||e.each(function(t,n){[].slice.call(n.querySelectorAll(".is-dirty-cell")).forEach(function(i){i.classList.remove("is-dirty-cell")})})},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(e){if(this.settings.showDirty&&"number"==typeof e){var t=this.rowNodes(e);this.clearDirtyClass(t),this.dirtyArray&&(this.dirtyArray[e]=void 0)}},clearDirtyCell:function(e,t){this.settings.showDirty&&this.dirtyArray&&"number"==typeof e&&"number"==typeof t&&void 0!==this.dirtyArray[e]&&(this.cellNode(e,t).removeClass("is-dirty-cell"),this.dirtyArray[e][t]=void 0)},dirtyCells:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,n=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=t.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var o=0,c=s.length;o<c;o++){var d=s[o];void 0!==d&&d.isDirty&&n.push(e.treeGrid?t[i].node:t[i])}}return n},dirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,n=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=t.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var o=0,c=s.length;o<c;o++){var d=s[o];if(void 0!==d&&d.isDirty){n.push(e.treeGrid?t[i].node:t[i]);break}}}return n},getModifiedRows:function(e){for(var t=this.settings,n=t.treeGrid?t.treeDepth:t.dataset,i=[],a=0;a<n.length;a++){var s=t.treeGrid?n[a].node:n[a],o={row:a,data:s,cells:[]};if(this.isRowDirty(a)){o.type="dirty";for(var c=0;!e&&c<this.dirtyArray[a].length;c++){var d=this.dirtyArray[a][c];void 0!==d&&d.isDirty&&o.cells.push({row:a,col:c,cellData:d})}}void 0===s.rowStatus||"error"!==s.rowStatus.icon&&"in-progress"!==s.rowStatus.icon||(o.type="dirty"===o.type?["dirty",s.rowStatus.icon]:s.rowStatus.icon),void 0!==o.type&&i.push(e?s:o)}return i},showRowError:function(e,t,n){var i=n||"error";this.dataRowNode(e).addClass(n),this.rowStatus(e,i,t)},validateRow:function(e){if(void 0!==e)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},validateAll:function(){for(var e=0;e<this.settings.dataset.length;e++)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},columnSettings:function(e){return this.settings.columns[e]||{}},coerceValue:function(e,t,n,i,a){var s;if(n.serialize){var o=this.settings,c=o.treeGrid?o.treeDepth:o.dataset;return this.settings.groupable&&(c=this.originalDataset||c),n.serialize(e,t,n,i,a,o.treeGrid?c[i].node:c[i])}return n.sourceFormat?s=e instanceof Date?P.parseDate(e,n.sourceFormat):P.formatDate(e,{pattern:n.sourceFormat}):"number"==typeof t&&e&&"number"!=typeof e&&!/[A-Za-z!@#$%^&*()_+\-=\[\]{};':"\\|<>/?]/.test(e)&&(s=P.parseNumber(e)),s},updateCell:function(e,t,n){var i=this.columnSettings(t);void 0===n&&(n=this.fieldValue(this.settings.dataset[e],i.field)),this.updateCellNode(e,t,n,!0)},updateColumn:function(e){if(e&&e.length){var t=this,n=t.columnIdxById(e);$.each(t.settings.dataset,function(i,a){t.updateCell(i,n,a[e])})}},updateCellNode:function(e,t,n,i,a){var s,o=this,c=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),d=c.find("td").eq(t),p=this.settings.columns[t]||{},f="",m=p.formatter?p.formatter:this.defaultFormatter,b=$(".editor",d).length>0,C=this.settings.treeGrid,T=C?this.actualPagingRowIndex(this.actualRowIndex(c)):this.dataRowIndex(c);(null==T||isNaN(T))&&(T=e);var S=this.rowData(T);0===c.length&&this.settings.paging&&(d=(c=this.visualRowNode(e)).find("td").eq(t));var M=this.fieldValue(S,p.field);if((i||M===n||void 0===(s=this.coerceValue(n,M,p,e,t)))&&(s=n),c.length&&S&&!S.rowStatus){var L=c.find("svg.icon-rowstatus");L.length&&L.remove()}if(this.removeTooltipData(d),0===t&&S&&S.rowStatus){var z=d.find("svg.icon-rowstatus");if(c&&d[0]){for(var V=0;V<c.length;V++)c[V].classList.add("rowstatus-row-".concat(S.rowStatus.icon));d[0].classList.add("rowstatus-cell"),z.length||d.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat("success"===S.rowStatus.icon?"#icon-check":"#icon-exclamation",'"></use></svg>'))}if(S.rowStatus.tooltip){z=d.find("svg.icon-rowstatus");var U=S.rowStatus.icon;this.cacheTooltip(z,{forced:!0,placement:"right",content:S.rowStatus.tooltip,isError:"error"===U||"dirtyerror"===U,wrapper:d})}}if(s=$e.unescapeHTML(s),p.field&&s!==M)if(p.field.indexOf(".")>-1){var G=S,Z=p.field.split(".").length;p.field.split(".").forEach(function(Oe,Qe){Qe===Z-1?G[Oe]=s:G=G[Oe]})}else S[p.field]=s;var oe,le=function(Oe,Qe){var nt=("string"==typeof Oe?Oe.match(Qe):[""])||[""];return o.settings.trimSpaces||(nt=nt[0].replace(/\s/g,"&nbsp;")),nt},re=$e.escapeHTML(s),J=b?s:re;if("string"==typeof J&&(J="".concat(le(J,/^\s*/)).concat(J.trim()).concat(le(J,/\s*$/))),f=this.formatValue(m,e,t,J,p,S),p.contentVisible&&(p.contentVisible(e,t,re,p,S)||(f="")),a||d.find(".datagrid-cell-wrapper").html(f),i||(this.validateCell(T,t),this.isDirtyCellUndefined(e,t)||(this.dirtyArray[e][t].value=n,this.dirtyArray[e][t].coercedVal=s,this.dirtyArray[e][t].escapedCoercedVal=$e.escapeHTML(s),this.dirtyArray[e][t].cellNodeText=d.text(),this.dirtyArray[e][t].cell=t,this.dirtyArray[e][t].column=this.settings.columns[t],this.setDirtyCell(e,t))),this.settings.stretchColumnOnChange&&p){var ce=this.calculateTextWidth(p);p.minWidth&&ce<p.minWidth&&(ce=p.minWidth),p.minWidth&&ce>p.maxWidth&&(ce=p.maxWidth),ce>0&&ce-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=ce,this.stretchColumnDiff=0,this.setColumnWidth(p.id,ce,!0))}if(M=$e.sanitizeConsoleMethods(M),s=$e.sanitizeConsoleMethods(s),"string"==typeof M&&"string"==typeof s){var ke={oldVal:"".concat(le(M,/^\s*/)).concat(M.trim()).concat(le(M,/\s*$/)),coercedVal:"".concat(le(s,/^\s*/)).concat(s.trim()).concat(le(s,/\s*$/))};oe=ke.coercedVal!==ke.oldVal&&!i}else oe=s!==M&&!i;if(oe){var _e={row:null!==this.settings.source?T:e,relativeRow:e,cell:t,target:d,value:s,oldValue:M,column:p,api:this};_e.rowData=C&&this.settings.treeDepth[e]?this.settings.treeDepth[e].node:S,this.isCellDirty(e,t)||this.setActiveCell(e,t),this.element.trigger("cellchange",_e),this.wasJustUpdated=!0}},isRowDirty:function(e){var t=!1;if("number"==typeof e&&this.dirtyArray&&this.dirtyArray.length){var n=this.dirtyArray[e];if(void 0!==n)for(var i=0,a=n.length;i<a;i++){var s=n[i];if(void 0!==s&&s.isDirty){t=!0;break}}}return t},isCellDirty:function(e,t){return!this.isDirtyCellUndefined(e,t)&&this.dirtyArray[e][t].isDirty},addToDirtyArray:function(e,t,n){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[e]?(this.dirtyArray[e]=[],this.dirtyArray[e][t]=n):void 0===this.dirtyArray[e][t]&&(this.dirtyArray[e][t]=n)},setDirtyCell:function(e,t,n){var i=this.cellNode(e,t);n&&this.addToDirtyArray(e,t,n);var a=this.dirtyArray[e][t];a.originalVal!==a.value&&a.originalVal!==a.coercedVal&&a.originalVal!==a.escapedCoercedVal&&a.originalVal!==a.cellNodeText||a.originalVal.length!==a.value.length?(this.dirtyArray[e][t].isDirty=!0,i[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(e,t,!0)):(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1)),("string"==typeof a.originalVal||a.originalVal instanceof String)&&(null==a||null==a?void 0:a.originalVal)===(null==a||null==a?void 0:a.value)&&(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1))},setDirtyIndicator:function(e,t,n,i){var a=this.cellNode(e,t);i&&this.addToDirtyArray(e,t,i),e<0||t<0||!a.length||(n?a[0].classList.add("is-dirty-cell"):a[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(e,t){return!(this.settings.showDirty&&"number"==typeof e&&"number"==typeof t&&e>-1&&t>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[e]&&void 0!==this.dirtyArray[e][t])},visualRowIndex:function(e){var t="tr:visible:not(.is-hidden, .datagrid-expandable-row)",n=this.tableBody.find(t).index(e);return-1===n&&this.tableBodyLeft&&(n=this.tableBodyLeft.find(t).index(e)),-1===n&&this.tableBodyRight&&(n=this.tableBodyRight.find(t).index(e)),n},visualRowNode:function(e){var t=e;return this.settings.paging&&this.settings.source&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(e)?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):$([])},actualRowNode:function(e){return this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodes:function(e){var t=this.element;return e instanceof jQuery&&(t=e.closest(".datagrid-container"),e=e.attr("aria-rowindex")-1),t.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodesByDataIndex:function(e){e instanceof jQuery&&(e=e.attr("data-index"));var t=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(e,'"]')):$(),n=this.tableBody.find('tr[data-index="'.concat(e,'"]')),i=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(e,'"]')):$();return $(n).add(t).add(i)},cellNode:function(e,t){var n=this.settings.groupable?this.rowNodesByDataIndex(e).find("td"):this.rowNodes(e).find("td");return n.eq(t>=n.length?n.length-1:t)},actualRowIndex:function(e){return(e=e instanceof jQuery?e:$(e)).attr("aria-rowindex")-1},pagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},actualPagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t-=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},dataRowNode:function(e){return this.tableBody.find('tr[data-index="'.concat(e,'"]'))},dataRowIndex:function(e){return e=e instanceof jQuery?e:$(e),parseInt(e.attr("data-index"),10)},setActiveCell:function(e,t){var n,i,a,s=this.activeCell,o=e,c=e instanceof jQuery&&e.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(e instanceof jQuery&&0===e.length||("number"==typeof e&&(n=e,o=this.tableBody.find("tr:visible").eq(e),i=this.actualRowIndex(o),a=this.dataRowIndex(o)),e instanceof jQuery&&e.is("td")&&((c=e.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(o=e.parent()),t=e.attr("aria-colindex")-1,n=this.visualRowIndex(e.parent()),i=this.actualRowIndex(e.parent()),a=this.dataRowIndex(e.parent()),o=e.parent()),e instanceof jQuery&&e.is("tr")&&(n=this.visualRowIndex(e),i=this.actualRowIndex(e),a=this.dataRowIndex(e),o=e),n<0||t<0))){s.node&&1===s.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),s.cell===t&&s.row===e||this.hideTooltip(),this.activeCell.node=this.cellNode(c||o?o:i>-1?i:n,t).attr("tabindex","0"),this.activeCell.node&&1===s.node.length?(this.activeCell.row=n,this.activeCell.cell=t,i=this.actualRowIndex(this.activeCell.node.parent()),a=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=s,(!$("input, select, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),c&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==a&&(this.activeCell.dataRow=a),void 0!==i&&(this.activeCell.rowIndex=i);var d=+o.find("td[colspan]").attr("colspan");if(c&&this.activeCell.node&&s.node&&!(e instanceof jQuery&&e.is("td"))&&(t<d?(o.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td[colspan]")):t>=d?(o.find("td").eq(t-d+1).attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td").eq(t-d+1)):(o.find("td").eq(t).attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td").eq(t))),c&&e instanceof jQuery&&e.is("td")&&(this.activeCell.cell=d-1+t,e.is("[colspan]")&&(this.activeCell.cell=t)),this.settings.cellNavigation){var p=this.headerNodes(),f=0;this.hasColSpans&&(f=0,p.eq(t).prevAll("[colspan]").each(function(b,C){var T=$(C).attr("colspan")-1;f+=T}),t-=f),this.settings.activeCheckboxSelection&&(p.removeClass("is-active"),p.eq(t).addClass("is-active"))}this.activeCell.isFocused=!0;var m=this.settings.columns[t];m&&m.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell,api:this})}},setNextActiveCell:function(e){var t=this;if("keydown"===e.type)if(this.settings.actionableMode){var n=13===e.keyCode?40:e.keyCode;if(32===n)return;setTimeout(function(){var i=$.Event("keydown.datagrid");i.keyCode=n,t.activeCell.node.trigger(i)},0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(e,t){if(!(!t||t&&!t.length||e<0)){var n=this.settings.treeDepth[e].node;n.children=n.children||[];for(var i=0,a=(t=JSON.parse(JSON.stringify(t))).length;i<a;i++)n.children.push(t[i]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(e,t){this.settings.treeDepth[e].node.expanded=t},toggleChildren:function(e,t){if(!this.settings.groupable){var n=this,i=this.settings,a=this.rowNodes(t),s=a.find(".datagrid-expand-btn"),o=parseInt(a.attr("aria-level"),10),c=s.hasClass("is-expanded"),d=[{grid:n,row:t,item:a}];if(n.settings.treeDepth&&n.settings.treeDepth[t]&&(d[0].rowData=n.settings.treeDepth[t].node),a.hasClass("datagrid-tree-parent")&&($(e.target).is(s)||!n.settings.editable&&!n.settings.selectable)){var p=function(){a=n.rowNodes(t),s=a.find(".datagrid-expand-btn");var m=a.nextUntil('[aria-level="'.concat(o,'"]')),b=n.settings.treeGrid&&n.settings.source&&n.settings.paging?n.dataRowIndex(a):t;c?(a.attr("aria-expanded",!1),s.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(a.attr("aria-expanded",!0),s.addClass("is-expanded").find(".plus-minus").addClass("active")),n.setExpandedInDataset(b,!c),function C(T,S,M){T.nextUntil('[aria-level="'.concat(S,'"]')).each(M?function(){var z=$(this);parseInt(z.attr("aria-level"),10)>S&&z.addClass("is-hidden")}:function(){var z=$(this),V=parseInt(z.attr("aria-level"),10);if(V===S+1){if(!z.hasClass("is-filtered")&&(z.removeClass("is-hidden"),n.settings.frozenColumns)){var N=z.attr("aria-rowindex");n.tableBody.find('[aria-rowindex="'.concat(N,'"]')).removeClass("is-hidden")}if(z.is(".datagrid-tree-parent")){var U=z.find(".datagrid-expand-btn.is-expanded").length>0;U&&C(z,V,!U)}}})}(a,o,c),n.setAlternateRowShading(),d.children=m};$.when(n.element.triggerHandler(c?"collapserow":"expandrow",d)).done(function(m){var b=function(C){return"string"==typeof C&&"false"===C.toLowerCase()||"boolean"==typeof C&&!1===C||"number"==typeof C&&0===C};b(m)||("function"!=typeof i.onExpandChildren||c?"function"==typeof i.onCollapseChildren&&c?$.when(i.onCollapseChildren(d[0])).done(function(C){b(C)||p()}):p():$.when(i.onExpandChildren(d[0])).done(function(C){b(C)||p()}))})}}},toggleRowDetail:function(e){var t=this,n=t.rowNodes(e);!n.length&&t.settings.paging&&(t.settings.rowTemplate||t.settings.expandableRow)&&(n=t.dataRowNode(e+=(t.pagerAPI.activePage-1)*t.settings.pagesize));var i=n.next(),a=n.find(".datagrid-expand-btn"),s=i.find(".datagrid-row-detail"),o=t.settings.dataset[t.dataRowIndex(n)];if(!n.hasClass("datagrid-tree-parent")){if(t.settings.allowOneExpandedRow&&null===t.settings.groupable){var c=t.tableBody.add(t.tableBodyLeft).add(t.tableBodyRight).find("tr.is-expanded"),d=c.prev().find(".datagrid-expand-btn"),p=c.prev(),f=t.actualRowNode(p),m=t.dataRowIndex(p);if(c.length&&i.index()!==c.index()){var b=c.find(".datagrid-row-detail");c.add(d).removeClass("is-expanded"),p.removeClass("is-rowactivated"),p.find(".plus-minus").removeClass("active"),b.animateClosed().on("animateclosedcomplete",function(){c.removeClass("is-expanded"),t.element.triggerHandler("collapserow",[{grid:t,row:f,detail:b,item:t.settings.dataset[m]}])});var C=c.prev().find(".btn-primary");C.length&&C.attr("class",C.attr("class").replace("btn-primary","btn-secondary"))}var T=!i.hasClass("is-expanded"),S=i.prev().find(T?".btn-secondary":".btn-primary");if(S.length>0&&p&&S){var M=S.attr("class")||"";S.attr("class",M.replace(T?"btn-secondary":"btn-primary",T?"btn-primary":"btn-secondary"))}}if(i.hasClass("is-expanded"))s.one("animateclosedcomplete",function(){i.removeClass("is-expanded")}).animateClosed(),a.removeClass("is-expanded").find(".plus-minus").removeClass("active"),t.settings.allowOneExpandedRow&&n.removeClass("is-rowactivated"),t.element.triggerHandler("collapserow",[{grid:t,row:e,detail:s,item:o}]);else{i.addClass("is-expanded"),a.addClass("is-expanded").find(".plus-minus").addClass("active"),i.find(".constrained-width").css("max-width",this.element.outerWidth());var L=[{grid:t,row:e,detail:s,item:o}];if(t.element.triggerHandler("expandrow",L),t.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&n.addClass("is-rowactivated"),t.settings.onExpandRow?t.settings.onExpandRow(L[0],function(N){N&&s.find(".datagrid-row-detail-padding").empty().append(N),t.adjustExpandRowHeight(s),s.animateOpen()}):(t.adjustExpandRowHeight(s),s.animateOpen()),t.settings.frozenColumns.expandRowAcrossAllCells&&t.frozenExpandRowAcrossAllCells(),t.settings.frozenColumns.left.length||t.settings.frozenColumns.right.length){var z={left:s.eq(0)[0],center:s.eq(1)[0],right:s.eq(2)[0]},V={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(V.theme).on(V.theme,function(){t.frozenExpandRowSetHeight(z)}),t.element.off(V.rowheight).on(V.rowheight,function(){t.frozenExpandRowSetHeight(z)})}}}},adjustExpandRowHeight:function(e){if(e.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var t={left:e.eq(0)[0]?e.eq(0)[0].children[0]:null,center:e.eq(1)[0],right:e.eq(2)[0]?e.eq(2)[0].children[0]:null},n=0;t.center&&(t.center.style.height="auto",n=t.center.offsetHeight-1,t.center.style.height=""),n>0&&(t.left&&(t.left.style.height="".concat(n,"px")),t.right&&(t.right.style.height="".concat(n,"px")))}},frozenExpandRowSetHeight:function(e){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t=0;if(e&&e.center&&(e.padding=e.center.querySelector(".datagrid-row-detail-padding"),t=e.padding.offsetHeight),t&&(e.center.style.height="".concat(t,"px"),e.left&&(e.left.style.height="".concat(t,"px")),e.right&&(e.right.style.height="".concat(t,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var n={container:this.element[0].getBoundingClientRect(),centerEl:e.center.getBoundingClientRect()},i="".concat(n.centerEl.top-n.container.top,"px");e.padding.style.top=i}}},frozenExpandRowAcrossAllCells:function(){var e=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t={row:".datagrid-expandable-row.is-expanded"};t.detail="".concat(t.row," > td .datagrid-row-detail"),t.padding="".concat(t.detail," .datagrid-row-detail-padding");var n={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},i={rows:{left:n.left?n.left.querySelector(t.row):null,center:n.center?n.center.querySelector(t.row):null,right:n.right?n.right.querySelector(t.row):null},details:{left:n.left?n.left.querySelector(t.detail):null,center:n.center?n.center.querySelector(t.detail):null,right:n.right?n.right.querySelector(t.detail):null},padding:this.tableBody[0].querySelector(t.padding)};if(i.padding&&(i.details.left||i.details.right)){var a="is-expanded-frozen";i.padding.style.opacity="0",i.rows.left&&i.rows.left.classList.add(a),i.rows.right&&i.rows.right.classList.add(a),$(i.details.center).one("animateopencomplete.datagrid.expandedfrozen",function(){(i.details.left||i.details.right)&&setTimeout(function(){i.rows.center.classList.add(a),e.frozenExpandRowSetHeight(i.details),i.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",function(){e.frozenExpandRowSetHeight(i.details)})},10)}).one("animateclosedstart.datagrid.expandedfrozen",function(){$(window).off("resize.datagrid.expandedfrozen"),i.padding.style.opacity="0",i.padding.style.top="",i.rows.center.classList.remove(a),i.rows.left&&i.rows.left.classList.remove(a),i.rows.right&&i.rows.right.classList.remove(a)}).one("animateclosedcomplete.datagrid.expandedfrozen",function(){i.padding.style.opacity=""})}}},toggleGroupChildren:function(e){if(this.settings.groupable){var t=e.index(),n=$(),i=$(),a=$();this.hasLeftPane&&(n=this.tableLeft.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header")),i=this.table.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(a=this.tableRight.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header"));var s=e.find(".datagrid-expand-btn");e.hasClass("is-expanded")?(s.removeClass("is-expanded").find(".plus-minus").removeClass("active"),n.hide(),n.addClass("is-hidden"),i.hide(),i.addClass("is-hidden"),a.hide(),a.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:e.index(),detail:i,item:{}}]),e.removeClass("is-expanded")):(s.addClass("is-expanded").find(".plus-minus").addClass("active"),n.show(),n.removeClass("is-hidden"),i.show(),i.removeClass("is-hidden"),a.show(),a.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:e.index(),detail:i,item:{}}]),e.addClass("is-expanded"))}},setSortColumn:function(e,t){var n=!0;if(void 0!==t?(this.sortColumn.sortAsc===t&&this.sortColumn.sortId===e&&(n=!1),this.sortColumn.sortAsc=t):(this.sortColumn.sortAsc=this.sortColumn.sortId!==e||!this.sortColumn.sortAsc,t=this.sortColumn.sortAsc),this.sortColumn.sortId=e,this.sortColumn.sortField=this.columnById(e)[0]?this.columnById(e)[0].field:e,this.sortColumn.sortAsc=t,this.setSortIndicator(e,t),n&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),n){var i=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),i&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var e=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(e),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,i=t.length;n<i;n++)void 0!==this.dirtyArray[n]&&((e.treeGrid?t[n].node:t[n]).tempNodeIndex=n)},restoreDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var n=[],i=0,a=t.length;i<a;i++){var s=e.treeGrid?t[i].node:t[i];void 0!==s.tempNodeIndex&&(n.push({newIdx:i,oldIdx:s.tempNodeIndex}),delete s.tempNodeIndex)}for(var o=[],c=0,d=n.length;c<d;c++)o[n[c].newIdx]=this.dirtyArray[n[c].oldIdx];this.dirtyArray=o}},syncDatasetWithSelectedRows:function(){var e,t=this,n=this.settings;if(!(n.source&&n.paging&&n.allowSelectAcrossPages&&null!==(e=n.columnIds)&&void 0!==e&&e?.length)){this._selectedRows=[];for(var i,a=n.treeGrid?n.treeDepth:n.dataset,s=-1,o=function(d,p){if(n.groupable&&!t.originalDataset)for(var f=0;f<Object.keys(a[d]).length;f++)s++,p=Object.keys(a[d]).map(function(m){return a[d][m]}),t.isRowSelected(p)&&t._selectedRows.push({idx:s,data:p,elem:t.dataRowNode(s),group:a[d],page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:s,pagesize:t.settings.pagesize});else t.isRowSelected(p=n.treeGrid?a[d].node:a[d])&&t._selectedRows.push({idx:d,data:p,elem:t.visualRowNode(d),pagesize:t.settings.pagesize,page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:d});i=p},c=0;c<a.length;c++)o(c,i)}},setSortIndicator:function(e,t){this.headerRow&&(this.sortColumn={sortId:e,sortAsc:t,sortField:this.columnById(e)[0]?this.columnById(e)[0].field:e},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(e,'"]')).addClass(t?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",t?"ascending":"descending"))},sortFunction:function(e,t){var n=this.columnById(e),i=0===n.length?null:n[0],a=null===i?e:i.field,s=this,o=function(c){return"string"==typeof(d=null==(d=s.fieldValue(c,a))?"":d)&&(d=d.toUpperCase(),$.isNumeric(d)&&(d=parseFloat(d))),d;var d};return i&&i.sortFunction&&(o=function(c){return i.sortFunction(s.fieldValue(c,a))}),t=t?1:-1,function(c,d){return c=o(c),d=o(d),Ge(c)!==Ge(d)&&(c=c.toString().toLowerCase(),d=d.toString().toLowerCase()),!isNaN(c)&&isNaN(d)||isNaN(c)&&!isNaN(d)?t*(!(c>d)-!(d>c)):t*((c>d)-(d>c))}},defaultFormatter:function(e,t,n,i,a,s){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(o){var c=parseFloat(n);if(isNaN(c)){var d=Date.parse(n);isNaN(d)||(n=P.formatDate(d))}else n=P.formatNumber(c,{style:Number.isInteger(c)?"integer":"decimal"})}return null==n||""===n?"":n.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(e,t,n){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,e.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(e,t),t||this.triggerSource(e,n),this.syncSelectedUI())},getPageableElements:function(){var e=this.element.children().not(".datagrid-expandable-row");return e.is("table")&&(e=e.find("tbody tr")),e},appendTooltip:function(e){var t=this,n=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof e?n.test(e)||(e+=" ".concat("grid-tooltip")):e="grid-tooltip";var i=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(i),!this.tooltip){var a=""+'<div id="'.concat(i,'" class="tooltip ').concat(e,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",a),this.tooltip=document.getElementById(i),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",function(){t.hideTooltip()}))}},cacheTooltip:function(e,t){if(void 0===t){var n,i,a,s,o=e.querySelector(".is-editor.content-tooltip"),c=e.querySelector("a[title]"),d=ue.hasClass(e,"rowstatus-cell"),p="svg"===e.tagName.toLowerCase(),f=e.classList.contains("datagrid-header-icon"),m="th"===e.tagName.toLowerCase(),b=ue.hasClass(e,"datagrid-column-wrapper"),C=ue.hasClass(e.parentNode,"datagrid-filter-wrapper"),T=e.getAttribute("aria-colindex")-1,S=this.columnSettings(T);(t={content:"",wrapper:e.querySelector(".datagrid-cell-wrapper")}).extraClassList=[];var M=$(e).index();if(b){var L=$(e).attr("data-column-id");s=this.settings.columns[this.columnIdxById(L)]}else{var z=$(e).closest("table").find("thead > tr > th").eq(M).attr("data-column-id");s=this.settings.columns[this.columnIdxById(z)]}if((m||b||C||f)&&(t.wrapper=e,t.distance=C||f?15:null,t.placement=b||f?"top":"bottom"),d||p&&!f){var V=this.closest(e,function(Dt){return ue.hasClass(Dt,"datagrid-row")});t.isError=(V?V.classList:[]).contains("rowstatus-row-error"),t.placement="right",p&&(t.wrapper=this.closest(e,function(Dt){return"td"===Dt.tagName.toLowerCase()}))}if(o){var U=!(!S.editorOptions||!S.editorOptions.width)&&this.setUnit(S.editorOptions.width),G=$(o).clone()[0];G.style.width=U||"".concat(e.offsetWidth,"px");var Z=G.outerHTML;""!==$e.stripHTML(Z)&&(t.content=Z,t.extraClassList=["popover","alternate","content-tooltip"])}else if(c)t.content=c.getAttribute("title"),c.removeAttribute("title");else if(a=e.getAttribute("title")){var oe=e.querySelector(".row-btn[disabled]");t.content=oe?"":a,e.removeAttribute("title")}else if(m&&!C){var le=e.querySelector(".datagrid-header-text");t.content=le?$e.stripHTML(le.textContent):""}else if(C){if(!(e.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var re=e.parentNode.querySelector(".is-checked");t.content=re?$e.stripHTML(re.textContent):""}}else if(f){var J=$(e).parents("th").attr("data-column-id"),ce=e.previousElementSibling.textContent,ke=this.settings.columns[this.columnIdxById(J)].headerIconTooltip;t.content=$e.stripHTML(ke),t.headerText=$e.stripHTML(ce)}else t.wrapper.querySelector(".datagrid-expand-btn")?Array.prototype.filter.call(t.wrapper.children,function(Dt){return!Dt.matches(".datagrid-expand-btn")}).forEach(function(Dt){t.content=Dt.textContent}):t.content=t.wrapper.textContent,t.content=$e.stripHTML(t.content).trim();var _e=e.getAttribute("tooltipClass");_e&&t.extraClassList.push(_e);var Oe=null===(n=t.wrapper)||void 0===n||null==n?void 0:n.querySelector("select");if(Oe&&Oe.selectedIndex&&Oe.options[Oe.selectedIndex]&&Oe.options[Oe.selectedIndex].innerHTML&&(t.content=Ie.features.touch?"":Oe.options[Oe.selectedIndex].innerHTML.trim()),m&&(t.content=t.content.trim()),""!==t.content){var Qe=ue.hasClass(b?e.parentNode:e,"text-ellipsis"),nt=[].slice.call(e.querySelectorAll(".icon")),ot=Qe?8:0;if(nt.forEach(function(Dt){var Be="function"==typeof Dt.getBBox?Dt.getBBox():Dt.getBoundingClientRect();ot+=Be.width+8}),this.settings.treeGrid){var Ze=function(Dt){return!!t.wrapper.querySelector(Dt)};if(Ze(".datagrid-tree-node")||Ze(".datagrid-expand-btn")){var ft=this.closest(t.wrapper,function(Dt){return ue.hasClass(Dt,"datagrid-row")}),Wt=parseInt(ft.getAttribute("aria-level"),10);Wt&&(ot+=30*Wt)}}if(Qe&&b){var xt=e.querySelector(".datagrid-header-text");t.textwidth=xt.scrollWidth+(Oe?0:ot)}else t.textwidth=at.textWidth(t.content)+(Oe?0:ot);m&&(t.textwidth=at.textWidth(t.content)),t.content=o?t.content:"<p>".concat(t.content,"</p>"),f&&(t.content='<p class="align-text-left text-strong">'.concat(e.previousElementSibling.textContent,"</p>").concat(t.content)),(a||C||f)&&(t.forced=!0)}if("function"==typeof S.tooltip){var Ut,en,gn=this.closest(e,function(Dt){return ue.hasClass(Dt,"datagrid-row")});this.settings.treeGrid&&this.settings.treeDepth?(Ut=this.actualRowIndex(gn),en=this.settings.treeDepth[Ut].node):(Ut=this.dataRowIndex(gn),en=this.rowData(Ut));var Pn=this.fieldValue(en,S.field);t.content=S.tooltip(Ut,T,Pn,S,en,this),t.textwidth=at.textWidth(t.content)+20,null!=t.content&&""!==t.content&&(t.forced=!0)}null!==(i=s)&&void 0!==i&&i?.tooltipOptions&&(s.tooltipOptions.placement&&(t.placement=s.tooltipOptions.placement),s.tooltipOptions.x&&(t.x=s.tooltipOptions.x),s.tooltipOptions.y&&(t.y=s.tooltipOptions.y))}return(e=e instanceof jQuery?e:$(e)).data("gridtooltip",t),t},showTooltip:function(e){var t=this;if(this.tooltip){var n=$(this.tooltip),i=this.tooltip.querySelector(".tooltip-content");if(i){var a;i.innerHTML=$e.sanitizeHTML(e.content),this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(e.placement||"top"),e.isError&&this.tooltip.classList.add("is-error"),e.extraClassList&&e.extraClassList.length>0&&e.extraClassList.map(function(d){return t.tooltip.classList.add(d)});var s=null===(a=e.wrapper.classList)||void 0===a||null==a?void 0:a.contains("datagrid-header-icon");i.classList[s?"add":"remove"]("header-icon");var o="number"==typeof e.distance?e.distance:0,c={x:e.x||0,y:e.y||o,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:e.wrapper.offsetLeft,containerOffsetY:e.wrapper.offsetTop,parent:$(null==e||null==e?void 0:e.wrapper),placement:e.placement||"top",strategies:["flip","nudge"]};"left"!==c.placement&&"right"!==c.placement||(c.x=o,c.y=0),n.one("afterplace.gridtooltip",function(d,p){t.handleAfterPlaceTooltip(d,n,p)}).on("click.gridtooltip",function(){t.hideTooltip()}),n.data("place")||n.place(c),n.data("place").place(c),n.data("gridtooltip",!0),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",function(){t.hideTooltip()})}}},handleAfterPlaceTooltip:function(e,t,n){var i=t||$("#tooltip");i[0]&&(i.data("place").setArrowPosition(e,n,i),i.triggerHandler("tooltipafterplace",[n]))},hideTooltip:function(){var e=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",function(){e.hideTooltip()})},isGridtooltip:function(){var e=!1;return this.tooltip&&(this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(e=!0),e},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("gridtooltip")&&$.removeData(e[0],"gridtooltip")},removeTooltip:function(){var e=this;if(this.tooltip){var t=$(this.tooltip),n={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};n.str="".concat(n.th,", ").concat(n.td,", ").concat(n.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),t.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",n.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var i=t.data("place");i&&i.destroy(),[].slice.call(this.element[0].querySelectorAll(n.str)).forEach(function(a){return e.removeTooltipData(a)}),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){var e,t,n,i,a=this.element.prev(".toolbar, .contextual-toolbar");a=a.add(a.find("*"));var s=this.element.next(".pager-toolbar");s=s.add(s.find("*")),this.element.add(a).add(s).find("*").each(function(f,m){Object.values($(m).data()).forEach(function(b){"function"==typeof(null==b||null==b?void 0:b.destroy)&&b.destroy()})}),null===(e=this.canvas)||void 0===e||null===(t=e?.parentNode)||void 0===t||null===(n=t?.removeChild)||void 0===n||null==(i=n.call)||i.call(n,t,this.canvas),this.canvas=null,this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.find(".datagrid-img").off("error.datagrid"),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var o=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var c=o.find(".searchfield"),d=c.data("searchfield"),p=c.parent().find(".close.icon");c.off("keypress.datagrid"),p.off("click.datagrid"),d&&"function"==typeof d.destroy&&d.destroy(),c.removeData("options")}return this.removeToolbarOnDestroy&&(o.data("toolbar")&&o.data("toolbar").destroy(),o.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid resize.frozencolumns"),$("body").off("open.modal.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(e,t){if(this.settings=_.mergeSettings(this.element,e,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),e&&e.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),e&&e.dataset&&(this.settings.dataset=e.dataset),e&&e.columns&&(this.settings.columns=e.columns),e&&e.toolbar&&!this.toolbar&&this.appendToolbar(),e&&e.toolbar&&this.toolbar&&this.toolbar.hasClass("datagrid-toolbar")){var n=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),i=this.toolbar.data("toolbar")?this.toolbar.data("toolbar"):this.toolbar.data("toolbarFlex");i&&i.destroy(),n.remove(),this.appendToolbar()}return this.setRowHeightClass(),this.render(null,t),this.renderHeader(),this.handlePaging(),this}},$.fn.datagrid=function(e){return this.each(function(){var t=$.data(this,"datagrid");t?t.updated(e):t=$.data(this,"datagrid",new jo(this,e))})};var Lu={};function Wo(e,t){if(!(e instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=_.mergeSettings(e,t,Lu),this.element=e,this.init()}Wo.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=_.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var e=this;if(this.inputs&&this.inputs.length){var t=["disabled","readonly"];this.inputs.forEach(function(n){t.forEach(function(i){e.setState(i,n)})})}},handleEvents:function(){var e=this;$(this.form).on("focusin.".concat("formcompact"),"input",function(i){return e.handleFocusIn(i)}).on("focusout.".concat("formcompact"),"input",function(i){return e.handleFocusOut(i)});var t=["disabled","readonly"];this.inputsObserver=new MutationObserver(function(i){i.length&&i.forEach(function(a){"attributes"===a.type&&t.indexOf(a.attributeName)>-1&&e.setState(a.attributeName,a.target)})});var n={attributes:!0};this.inputs.forEach(function(i){e.inputsObserver.observe(i,n)})},handleFocusIn:function(e){ue.parents(e.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function(e){ue.parents(e.target,".column, .columns",!0).classList.remove("is-focused")},setState:function(e,t){"string"==typeof e&&t instanceof HTMLElement&&!(["checkbox","radio"].indexOf(t.type)>-1)&&("readonly"===e&&(e="readOnly"),t.parentNode.classList[!0===t[e]?"add":"remove"]("is-".concat(e.toLowerCase())))},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(e){return this.each(function(){var t=$.data(this,"formcompact");t?t.updated(e):t=$.data(this,"formcompact",new Wo(this,e))})};var Js={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function sc(e,t){this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Js),this.init()}sc.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return ei("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var e=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(e=".toolbar-section:first-child > button"),this.element.find(e)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var e=!1,t=this.element.find(".toolbar, .flex-toolbar");if(!t.length)return this;if(t.is(".flex-toolbar")&&(e=!0),this.toolbarElem=t,this.toolbarElem[e?"toolbarflex":"toolbar"](this.settings.toolbarSettings),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var i=$(this.element),a=$(this.element).next(".scrollable"),s=1===a.length?a:$(window),o=this.settings.scrollThreshold?this.settings.scrollThreshold:15;s.on("scroll.header",function(){this.scrollTop>o?i.addClass("is-scrolled-down"):i.removeClass("is-scrolled-down")}),s.scrollTop()>o&&i.addClass("is-scrolled-down")}return this},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var e=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(P.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),t=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var n=t.prev(".toolbar-section");n.length||(n=$('<div class="toolbar-section"></div>').insertBefore(t)),e.prependTo(n)}else e.prependTo(t);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var i=$("#application-menu").data("applicationmenu");i?i.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},getCurrentBreadcrumbData:function(){var e=this;function t(){var n=this.index;if(!this.current)if(0!==n){var a,s=e.breadcrumbAPI.list.childNodes.length-1;if(n<s)for(a=s-n;a>0;)e.drillup(),e.breadcrumbAPI.remove(s,!1,!0),a-=1,s-=1;e.breadcrumbAPI.render()}else e.reset()}return this.levelsDeep.map(function(n,i){var a="header-breadcrumb-".concat(n.replace(" ","-").toLowerCase());return{callback:t,content:n,current:i+1===e.levelsDeep.length,id:a}})},buildBreadcrumb:function(){var e="has-breadcrumb",t="default";this.settings.useAlternate&&(e="has-alternate-breadcrumb",t="alternate"),this.element.addClass(e),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.breadcrumb({breadcrumbs:this.getCurrentBreadcrumbData(),style:t}),this.breadcrumbAPI=this.breadcrumb.data("breadcrumb")),this.adjustBreadcrumb()},adjustBreadcrumb:function(){this.breadcrumbAPI&&this.breadcrumbAPI.updated({breadcrumbs:this.getCurrentBreadcrumbData()})},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var e=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(e)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var e=$('<div class="wizard-header"></div>').appendTo(this.wizard),t=$('<div class="bar"></div>').appendTo(e);$('<div class="completed-range"></div>').appendTo(t),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(t)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var e=this.toolbarElem.children(".title");if(this.titlePopup=e.find(".btn-menu"),!this.titlePopup.length){var t=e.find("h1");t.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=t.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var n=this.titlePopupMenu.children(".is-checked").first().text();n||(n=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(n),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat("header"),function(n,i){t.updated(i)}).on("reset.".concat("header"),function(){t.reset()}).on("drilldown.".concat("header"),function(n,i){t.drilldown(i)}).on("drillup.".concat("header"),function(n,i){t.drillup(i)}),$("html").on("themechanged.".concat("header"),function(){e.updatePageChanger()}),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),function(n,i){var a;a=i instanceof $?i.text():$(i.element).text(),$(this).children("h1").text(a)}),this},handleTitleButtonEvents:function(){var e=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),function(t){e.levelsDeep.length>1&&(t.stopImmediatePropagation(),e.drillup(),t.returnValue=!1)})},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var e=this.changer.data("popupmenu").menu,t=e.find("li.personalization-colors");if(t.length>0){var n=mt.personalizationColors(),i=t.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach(function(c){return i+='<li class="is-selectable'.concat("Default"===n[c].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[c].value,'">').concat(n[c].name,"</a></li>"),c}),t.replaceWith(i)}this.changer.on("selected.header",function(c,d){c.preventDefault(),void 0!==d&&!(d instanceof $)&&d.element instanceof HTMLElement&&(d=$(d.element));var p=d.attr("data-theme-name"),f=d.attr("data-theme-mode");if(p||f){var m=e.find(".is-checked a[data-theme-name]").attr("data-theme-name"),b=e.find(".is-checked a[data-theme-mode]").attr("data-theme-mode");m&&b&&Ci.setTheme("".concat(m,"-").concat(b))}else{var C=d.attr("data-theme");if(C)Ci.setTheme(C);else if(d.parent().hasClass("is-default"))Ci.setColorsToDefault();else{var T=d.attr("data-rgbcolor");Ci.setColors(T)}}});var a=mt.currentTheme;if("theme-new-light"!==a.id||"theme-uplift-light"!==a.id){var s=a.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(s[0],"-").concat(s[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-mode]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-mode="'.concat(s[2],'"]')).parent().addClass("is-checked")}if(Ci.settings.colors){var o="object"===Ge(Ci.settings.colors)?Ci.settings.colors.header:Ci.settings.colors;o=o.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(o,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&0!==this.changer.length)for(var e=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),t=mt.personalizationColors(),n=Object.keys(t),i=0;i<e.length;i++)e[i].setAttribute("data-rgbcolor",t[n[i]].value)},drilldown:function(e){this.element.addClass("is-drilldown"),this.levelsDeep.push(e.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(e){var t;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),t=this.levelsDeep[this.levelsDeep.length-1]),void 0!==e&&(t=e),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(t);t=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(t),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var e=$("#application-menu").data("applicationmenu");e&&e.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var e,t=this,n=$.fn.transitionEndName();t.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(n,".breadcrumb-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".breadcrumb-header")),t.breadcrumbAPI.destroy(),t.breadcrumb.remove(),delete t.breadcrumbAPI,delete t.breadcrumb}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var e,t=this,n=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(n,".tabs-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".tabs-header")),t.tabsContainer.data("tabs").destroy(),t.tabsContainer.remove(),t.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var e,t=this,n=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(n,".wizard-header"),i),e=setTimeout(i,300)):i()}function i(){e&&(clearTimeout(e),e=null),t.element.off("".concat(n,".wizard-header")),t.wizard.data("wizard").destroy(),t.wizard.remove(),t.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var e=this.changer.data("popupmenu");e&&"function"==typeof e.destroy&&e.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(e){return this.each(function(){var t=$.data(this,"header");t?t.updated(e):t=$.data(this,"header",new sc(this,e))})};var Pu={tabContainers:[],sortable:!1},Sl=["primary","secondary","tertiary"];function rc(e,t){return this.element=$(e),this.settings=_.mergeSettings(this.element[0],t,Pu),this.tabContainers={},this.init()}rc.prototype={init:function(){var t,e=this;t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter(function(){return!$(this).parents(".tab-panel-container").length}),$(t).each(function(){e.setupTabsInstance($(this))})},setupTabsInstance:function(e){if(e instanceof $){var t=this,n=!1;if(Sl.forEach(function(i){if(!n&&!Object.prototype.hasOwnProperty.call(t.tabContainers,i)){var a=e.data("tabs");a||(e.tabs(),a=e.data("tabs")),a.settings.sortable=t.settings.sortable,a.multitabsID=i,a.createSortable(),e.attr("data-multitabs",i),t.tabContainers[i]=e,n=!0}}),t.settings.sortable&&$(e.siblings(".tab-panel-container")).prepend('<div class="tab-overlay"><div class="overlay-left"></div><div class="overlay-right"></div></div>'),!n)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(e,t,n,i){return(e=this.checkForValidTabContainer(e)).data("tabs").add(t,n,i)},remove:function(e,t,n){return(e=this.checkForValidTabContainer(e)).data("tabs").remove(t,n)},move:function(e,t,n){if(!e||!t)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var i,a,s;if(this.getFilterableTabContainers().each(function(){var o=$(this).data("tabs"),c=o.getTab(null,e);null!==c&&(s=o.multitabsID,i=c.clone(),a=o.getPanel(e).children())}),!i)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(e,'"'));this.remove(s,e),this.add(t,e,{name:i.children("a").text().trim(),content:a,doActivate:n})},getTabContainer:function(e){var t,n=this;return Sl.forEach(function(i){!t&&n.tabContainers[i]&&e===i&&(t=n.tabContainers[i])}),t},getFilterableTabContainers:function(){var e=$();return this.performOnAllContainers(function(t,n){e=e.add(n)}),e},checkForValidTabContainer:function(e){if(!e)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof e&&(e=this.getTabContainer(e)),!(e instanceof $&&e.length))throw new Error("No matching tabContainer could be found and hidden.");return e},performOnAllContainers:function(e,t){var n=this;Array.isArray(t)||(t=t?[t]:[]),Sl.forEach(function(i){var a=n.tabContainers[i],s=[];a&&(s.push(i,a),s=s.concat(t),e.apply(this,s))})},adjustModuleTabContainers:function(){this.performOnAllContainers(function(e,t){var n=t.data("tabs");n.isModuleTabs()&&n.adjustModuleTabs()})},hideTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(e){if(e instanceof $&&e.data("tabs")&&"function"==typeof e.data("tabs").destroy){var t=this,n=!1;if(Sl.forEach(function(i){if(!n&&t.tabContainers[i].is(e)){var a=e.data("tabs");delete a.multitabsID,e.removeAttr("data-multitabs"),a.destroy(),delete t.tabContainers[i],n=!0}}),!n)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(e){return(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").is(".hidden")},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings))},teardown:function(){var e=this;return Object.keys(this.tabContainers).forEach(function(t){e.destroyTabsInstance(t)}),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(e){return this.each(function(){var t=$.data(this,"multitabs");t?t.updated(e):t=$.data(this,"multitabs",new rc(this,e))})};var Nu={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,toggleElement:void 0,detailElement:void 0},El=["accordion","listview"];function ds(e){var t;if(e instanceof HTMLElement)return Object.keys($(e).data()).forEach(function(n){El.indexOf(n)>-1&&(t=n)}),t}function oc(e,t){e instanceof HTMLElement&&(this.element=e,this.settings=_.mergeSettings(this.element,t,Nu),this.init())}oc.prototype={init:function(){var e=this;if(this.setInternalElementReference("listElement",function(s){return(o=e.settings[s])instanceof HTMLElement&&void 0!==ds(o);var o}),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.setInternalElementReference("toggleElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.showSidebar=!0,this.listElement){this.listComponentType=ds(this.listElement);var t=this.getListAPI();t&&(t.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var n=this.backElement.querySelector(".icon");n&&(this.backElementIcon=n),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}if(this.toggleElement){this.mainElement=this.element.querySelector(".main"),this.sidebarElement=this.element.querySelector(".sidebar"),this.toggleElement.classList.add("list-detail-toggle-button");var i=this.toggleElement.querySelector(".icon");i&&(this.toggleElementIcon=i,this.toggleElementIcon.classList.add("go-back"))}var a=this.element.querySelectorAll(".list-detail");a&&(this.childrenListDetailElements=a),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=it.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=it.isAbove("desktop")},setInternalElementReference:function(e,t){if("string"==typeof this.settings[e]&&this.settings[e].length){var n=document.querySelector(this.settings[e]);n&&(this.settings[e]=n)}t="function"!=typeof t||t(e),this.settings[e]instanceof HTMLElement&&t&&(this[e]=this.settings[e])},handleEvents:function(){var e=this;$(this.element).on("drilldown.".concat("listdetail"),function(t,n){t.stopPropagation(),e.drilldown(n,t.target)}).on("drillup.".concat("listdetail"),function(t){t.stopPropagation(),e.drillup()}),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.toggleElement&&this.toggleElement.addEventListener("click",this.handleToggleClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),function(){e.handleResize()})},drilldown:function(e,t){this.showDetail||t&&t.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[e]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},toggleSidebar:function(e){e?(this.sidebarElement.classList.add("hidden"),this.mainElement.style.width="100%",this.toggleElementIcon.classList.remove("go-back")):(this.sidebarElement.classList.remove("hidden"),this.mainElement.style.width="",this.toggleElementIcon.classList.add("go-back")),this.showSidebar=!e},handleBackClick:function(e){function t(){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var n=this.getCurrentSelectedListItem();if(n)return this.drilldown(n),t(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach(function(i){var a=$(i).data("listdetail");a&&"function"==typeof a.drillup&&a.drillup()}),t(),!1},handleToggleClick:function(){this.toggleSidebar(this.showSidebar)},handleClose:function(){if(!this.showDetail){var e=this.getCurrentSelectedListItem();this.drilldown(e)}},handleResize:function(){this.setBreakpointChecks();var e=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&e.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&e.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():(this.addBackElementIconContext(),this.toggleElement&&this.toggleSidebar(!1)),it.isAbove("desktop")&&e.enable()},isAboveBreakpoint:function(){return this["above".concat(at.capitalize(this.settings.edgeBleedBreakpoint),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){return this.listElement?(e=this.getListAPI().getSelected(),ue.convertToHTMLElement(e)):"";var e},updated:function(e){e&&(this.settings=_.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var e=this.getListAPI();e&&delete e.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.mainElement,delete this.sidebarElement,delete this.toggleElement,delete this.toggleElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail,delete this.showSidebar},destroy:function(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(e){return this.each(function(){var t=$.data(this,"listdetail");t?t.updated(e):(t=$.data(this,"listdetail",new oc(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,"listdetail"),$.removeData(this.element,"options")}})};var wd={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function $l(e,t){this.settings=_.mergeSettings(e,t,wd),this.element=$(e),this.init(),Ga("Stepprocess")}$l.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var e=this.stepListJq.find(this.settings.stepLi),t=0,n=e.length;t<n;t++)this.decorateNode(e[t]);var i=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(i)},decorateNode:function(e){var t=$(e),n=t.children(this.settings.stepLink),i=t.children(this.settings.stepFolder),a=n.hasClass("is-disabled"),s=i.hasClass("is-open");if(a&&n.attr("aria-disabled","true"),i.length){if(t.addClass("folder"),i.attr("role","group"),a&&(i.addClass("disabled"),s))for(var o=i.children(),c=0,d=o.length;c<d;c++)$(o[c]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");n.attr("aria-expanded",s)}var p=n.parentsUntil(this.stepListJq,"ul").length-1,f=t.index(),m=t.siblings().addBack().length;n.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":p+1,"aria-posinset":f+1,"aria-setsize":m,"aria-disabled":a}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(e){var t=this,n=$(e),i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder),s=i.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(s,this.settings.folderIconClosed),this.isAnimating=!0,a.one("animateclosedcomplete",function(){a.removeClass("is-open"),t.isAnimating=!1}).animateClosed(),i.attr("aria-expanded","false")},folderOpen:function(e){var t=this,n=$(e);if(!this.isOpen(n)){var i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder);n.addClass("is-open"),i.attr("aria-expanded","true");var s=i.find("svg.icon-tree");this.setIcon(s,this.settings.folderIconOpen),this.isAnimating=!0,a.one("animateopencomplete",function(){t.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(e){var t=e.closest(this.settings.stepLi);if(this.isFolder(t)){var n=t.children(this.settings.stepFolder);this.isOpen(n)?this.folderClose(t):this.folderOpen(t)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(e){var t=this.settings,n=e.parent().next().find("".concat(t.stepLink,":first"));if(e.next().is(t.stepFolder)&&e.next().hasClass("is-open")&&(n=e.next().find("".concat(t.stepLink,":first"))),n.hasClass("is-disabled")&&(n=this.getNextNode(n)),0===n.length)for(var i=0,a=e;i<2&&!(n=(a=a.parent().closest(".folder")).next().find("".concat(t.stepLink,":first"))).length;i++);return n},getNextStep:function(e){var t=e.children(this.settings.stepLink),n=e.next(this.settings.stepFolder),i=this.getNextNode(t),a=i.next(this.settings.stepFolder),s=null,o=null;return(s=n.length?(o=n).children().length?o.find(this.settings.stepLink).first():i:a.length&&(o=a).children().length?o.find(this.settings.stepLink).first():i).hasClass("is-disabled")&&(s=this.getNextStep(s.parent())),s},getPreviousNode:function(e){var t=this.settings,n=e.parent().prev().find("".concat(t.stepLink,":first")),i=n.closest(t.stepLi);return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(n=i.find("ul.is-open ".concat(t.stepLink,":last"))),n.hasClass("is-disabled")&&this.getPreviousNode(n),0===n.length&&(n=e.closest(t.stepFolder).prev(t.stepLink)),n},getPreviousStep:function(e){var t=this.settings,n=e.children(t.stepLink),i=this.getPreviousNode(n),a=i.closest(t.stepLi),s=i;if(this.isFolder(a))if(this.isOpen(a))s=this.getPreviousNode(i);else{var o=a.children(t.stepFolder);o.children().length&&(s=o.find(t.stepLink).last())}return s.hasClass("is-disabled")&&(s=this.getPreviousStep(s.parent())),s},goToNextStep:function(){var e=this,t=this.getSelectedStep(),n=e.getNextStep(t);if(n.length)e.selectStep(n,"next");else if("function"==typeof e.settings.beforeSelectStep){var i=e.settings.beforeSelectStep({isStepping:"next"});i.done&&"function"==typeof i.done?i.done(function(a,s){a&&s&&e.selectStepFinish(s)}):i&&e.selectStepFinish(n)}},goToPreviousStep:function(){var e=this.getSelectedStep(),t=this.getPreviousStep(e);t.length&&this.selectStep(t,"prev")},handleKeys:function(){var e=this,t=this.settings;this.stepListJq.on("focus.stepprocess",t.stepLink,function(){var n=$(this);if(0===parseInt(n.attr("aria-level"),10)&&1===parseInt(n.attr("aria-posinset"),10)&&n.hasClass("is-disabled")){var i=$.Event("keydown.stepprocess");return i.keyCode=40,void n.trigger(i)}}),this.stepListJq.on("keydown.stepprocess",t.stepLink,function(n){var i,a,s=n.charCode||n.keyCode,o=$(this);if(!e.isAnimating){if(40===s){var c=e.getNextNode(o);e.setFocus(c)}if(38===s){var d=e.getPreviousNode(o);e.setFocus(d)}if(32===n.keyCode&&o.trigger("click.stepprocess"),37===s)return P.isRTL()?o.next().hasClass("is-open")?(a=o.next().find("".concat(t.stepLink,":first")),e.setFocus(a)):e.folderToggle(o):o.next().hasClass("is-open")?e.folderToggle(o):(a=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(a)),n.stopPropagation(),!1;if(39===s)return P.isRTL()?o.next().hasClass("is-open")?e.folderToggle(o):(i=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(i)):o.next().hasClass("is-open")?(i=o.next().find("".concat(t.stepLink,":first")),e.setFocus(i)):(e.folderToggle(o),e.setFocus(o)),n.stopPropagation(),!1;36===s&&(i=e.stepListJq.find("".concat(t.stepLink,":first:visible")),e.setFocus(i)),35===s&&(i=e.stepListJq.find("".concat(t.stepLink,":last:visible")),e.setFocus(i))}}),this.stepListJq.on("keypress.stepprocess",t.stepLink,function(n){var i=n.charCode||n.keyCode,a=$(this);if(i>=37&&i<=40||32===i)return n.stopPropagation(),!1;0!==n.which&&a.closest(t.stepLi).nextAll().find(".js-step-link:visible").each(function(){var s=$(this);if(s.text().substr(0,1).toLowerCase()===String.fromCharCode(n.which).toLowerCase())return e.setFocus(s),!1})})},isFolder:function(e){return $(e).hasClass("folder")},isInFolder:function(e){return $(e).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(e){return $(e).hasClass("is-open")},setFocus:function(e){e.focus()},setIcon:function(e,t){var n=t.replace(/icon-|hide-focus|\s?/gi,"");e.changeIcon(n)},selectStep:function(e,t){var n,i=this;void 0===t&&(t="none"),"function"==typeof i.settings.beforeSelectStep?(n=i.settings.beforeSelectStep({stepLink:e,isStepping:t})).done&&"function"==typeof n.done?n.done(function(s,o){s&&(o&&(e=o),i.selectStepFinish(e,t))}):n&&i.selectStepFinish(e,t):i.selectStepFinish(e,t)},selectStepFinish:function(e,t){var n=this,i=$(this.settings.stepLink,this.stepListJq),a=e.closest(this.settings.stepLi);if(this.isFolder(a)||(i.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),e.attr({tabindex:"0","aria-selected":"true"}),a.addClass("is-selected")),this.isFolder(a))"none"===t?this.folderToggle(a):this.folderOpen(a);else{var s=a.closest(this.settings.stepFolder,this.stepListJq);s.length&&this.folderOpen(s.closest(this.settings.stepLi)),this.showStepPanel(e.attr("href"))}e.focus(),setTimeout(function(){n.element.triggerHandler("selected",e)},0)},unSelectedNode:function(e){var t=$(this.settings.stepLink,this.stepListJq),n=$(e),i=n.children(this.settings.stepLink);t.attr("tabindex","-1"),i.attr("tabindex","0"),n.removeClass("is-selected"),i.attr("aria-selected","false")},setupEvents:function(){var e=this,t=this,n=this.settings;this.stepListJq.on("updated.stepprocess",function(){e.initStepprocess()}).on("click.stepprocess","".concat(n.stepLink,":not(.is-clone)"),function(i){if(i.preventDefault(),!n.linearProgression){var a=$(this);a.is(".is-disabled, .is-loading")||(t.selectStep(a),i.stopPropagation())}}),$(n.btnPrev).on("click",function(i){i.preventDefault(),e.goToPreviousStep.call(t)}),$(n.btnNext).on("click",function(i){i.preventDefault(),e.goToNextStep.call(t)}),$(n.contentScroll).scrollaction({scrollActionTarget:".main"}),$(n.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click(function(i){i.preventDefault(),e.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")})},showStepPanel:function(e){$(".step-panel-active").removeClass("step-panel-active"),$(e).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(e){return void 0!==e&&(this.settings=_.mergeSettings(this.element,e,wd)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(e){return this.each(function(){var t=$.data(this,"stepprocess");t?t.updated(e):t=$.data(this,"stepprocess",new $l(this,e))})};var xd={locale:"en-US",language:null};function Ha(e,t,n){return $(e)[t](n)}function Wn(e,t){var n=e.find(t).not(".no-init, [data-init]");return e.filter(t).length&&(n=n.add(e)),n}var lc=[["texttranslations",'[data-translate="text"]',function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.attr("data-translate-key",s.text()),s.text(P.translate(s.text(),!0))})}],["texttranslations",'[data-translate="value"]',function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.attr("data-translate-key",s.attr("value")),s.attr("value",P.translate(s.attr("value"),!0))})}],["texttranslations",'[data-translate="placeholder"]',function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.attr("data-translate-key",s.attr("placeholder")),s.attr("placeholder",P.translate(s.attr("placeholder"),!0))})}],["applicationmenu","#application-menu",function(e,t,n){Wn(e,n).each(function(i,a){$(a).applicationmenu({triggers:e.find(".application-menu-trigger")})})}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(e,t,n){Wn(e,n).change(function(){if(this.checked){var i=$(this).closest(".option"),a=i.siblings(),s='button, select, input[type="text"]';$(s,i).removeAttr("disabled"),$(s,a).attr("disabled","disabled")}})}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["revealText","input.input-password-reveal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["cards",".card:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(e,t,n){Wn(e,n).each(function(i,a){$(a).parents(".modal").length||$(a).button()})}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",['[data-clearable="true"]'].join(", "),function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a).attr("data-tabbable");void 0===s?$(a).clearable({tabbable:!0}):$(a).clearable({tabbable:"true"===s})})}],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload",'input.fileupload:not(.fileupload-background-transparent):not([type="text"])'],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["virtualscroll",".virtual-scroll"],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a),o=$.extend({},_.parseOptions(s)),c=s.attr("data-popupmenu");c&&(o.menuId=c),Ha(s,t,o)})}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.parents(".toolbar, .flex-toolbar").length>0||Ha(s,t)})}],["popover","[data-popover]",function(e,t,n){Wn(e,n).each(function(){var i=_.parseOptions(this),a=$(this),s=a.attr("data-trigger"),o=a.attr("data-title"),c=a.attr("data-placement");$.isEmptyObject(i)?a.popover({content:$("#".concat(a.attr("data-popover"))),popover:!0,trigger:s||"click",title:o||void 0,placement:c||"right",extraClass:i.extraClass||void 0}):a.popover({content:$(i.content),popover:!0,trigger:i.trigger||"click",title:i.title||void 0,placement:i.placement||"right",extraClass:i.extraClass||void 0})})}],["searchfield",".searchfield",function(e,t,n){var i=Wn(e,n),a=i.filter(function(){return $(this).parents(".toolbar").length});(i=i.not(a)).each(function(){Ha(this,"searchfield")})}],["toolbar",".toolbar",function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.parents(".header, .contextual-action-panel .modal-header").length&&!e.is(".toolbar")||Ha(s,"toolbar")})}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(e,t,n){Wn(e,n).each(function(i,a){var s=$(a);s.parents(".application-menu").length||Ha(s,"accordion")})}],["taglist",".tag-list"],["breadcrumb",".breadcrumb"],["swipeaction",".swipe-action"],["formcompact",".form-compact-container",function(e,t,n){Wn(e,n).each(function(i,a){Ha($(a),"formcompact")})}],["listdetail",".list-detail",function(e,t,n){Wn(e,n).each(function(i,a){Ha($(a),"listdetail")})}],["breadcrumblabels",".breadcrumb ol",function(e,t,n){Wn(e,n).attr("aria-label",P.translate("Breadcrumb"))}],["validate","[data-validate]",function(e,t,n){Wn(e,n).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function Cd(e,t,n,i){($.fn[t]||"texttranslations"===t)&&(void 0===n&&(n=".".concat(t)),"function"!=typeof i?Wn(e,n).each(function(){var a=$(this);a.is(".no-init, [data-init]")||a.parents(".no-init, [data-init]").length||Ha(this,t)}):i(e,t,n))}function cc(e,t){var n=t;"string"==typeof t&&(n={locale:t}),this.element=$(e),P.currentLocale&&P.currentLocale.name&&!t&&(n={locale:P.currentLocale.name}),P.currentLanguage&&P.currentLanguage.name&&P.currentLocale.name.substr(0,2)!==P.currentLanguage.name&&!t&&(n.language=P.currentLanguage.name),this.settings=_.mergeSettings(this.element[0],n,xd),this.init()}cc.prototype={init:function(){var e=this,t=this;return P.set(this.settings.locale).done(function(){e.settings.language?P.setLanguage(e.settings.language).done(function(){t.initAll()}):t.initAll()}),this},initAll:function(){return this.element.each(function(){for(var e=0;e<lc.length;e++)Cd.apply(void 0,[$(this)].concat(Un(lc[e])))}),this.element.triggerHandler("initialized",{locale:P.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(e){return this.each(function(){return new cc(this,e)})};var Zs={delay:400,mouseEvents:!1};function kd(e){return this.settings=_.mergeSettings(this.element,e,Zs),this.init()}kd.prototype={timer:null,init:function(){var e=this,t=this.getInputEventNames(),n=this;$(document).on("".concat(t.mousedown,".").concat("longpress"),function(i){var a=i.target;e.timer=new nn({id:"".concat("longpress","-timer"),duration:Aa.convertDelayToFPS(e.settings.delay),timeoutCallback:function(){n.fire(a,i)}}),dt.register(e.timer)}),$(document).on(["".concat(t.mouseup,".").concat("longpress"),"".concat(t.mouseout,".").concat("longpress"),"".concat(t.mousemove,".").concat("longpress")].join(" "),function(){e.killTimer()})},fire:function(e,t){$(e).trigger("".concat("longpress"),[t])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var n=Ie.features.touch||!this.settings.mouseEvents;return{mousedown:n?"touchstart":"mousedown",mouseout:n?"touchcancel":"mouseout",mouseup:n?"touchend":"mouseup",mousemove:n?"touchmove":"mousemove"}},updated:function(e){e&&(this.settings=_.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(e.mousedown,".").concat("longpress"),"".concat(e.mouseup,".").concat("longpress"),"".concat(e.mouseout,".").concat("longpress"),"".concat(e.mousemove,".").concat("longpress")].join(" "))}};var Ru=new kd,Ou=Object.freeze({__proto__:null,Button:Ja,ButtonSet:Ra,Hyperlink:hr,Icon:bs,ListFilter:ns,MaskInput:Gr,Modal:ci,PopupMenu:Oa,Tmpl:ui,About:li,Accordion:Io,ActionSheet:Yr,ApplicationMenu:is,Autocomplete:br,Bar:De,Blockgrid:Hs,Breadcrumb:Xi,Bullet:E,BusyIndicator:Vs,Cards:yr,ColorPicker:za,Column:Ve,CompletionChart:F,ContextualActionPanel:ls,Drag:So,DatePicker:Zr,Dropdown:sa,EmptyMessage:ge,ExpandableArea:ga,FontPicker:Da,FontPickerStyle:Ri,Line:xe,ListBuilder:jn,ListView:zn,Message:Vi,MultiSelect:Tr,Notification:ao,Pager:Rt,Pie:wt,Popdown:Xl,Radar:Sn,SearchField:No,Slider:Ql,Sparkline:Q,Spinbox:yl,Splitter:Jl,StepChart:Cl,SwipeAction:ec,Tabs:Fo,Tag:pn,TagList:yn,Textarea:Qs,TimePicker:cs,Toast:Ws,Toolbar:Us,ToolbarFlex:qt,Tooltip:Bs,Tree:ro,Treemap:Tl,Validator:ra,VirtualScroll:_a,Wizard:nc,Calendar:_o,CalendarToolbar:wn,CompositeForm:zo,Datagrid:jo,FormCompact:Wo,Header:sc,Lookup:ac,MonthView:mi,WeekView:os,MultiTabs:rc,ListDetail:oc,Stepprocess:$l});return R.DOM=ue,R.Editors=Er,R.Formatters=xn,R.GroupBy=Oi,R.HideFocus=ps,R.Initialize=cc,R.Locale=P,R.Place=jr,R.RenderLoopItem=nn,R.Validation=Ni,R.base=Ya,R.breakpoints=it,R.colors=pt,R.components=Ou,R.debug=yo,R.defer=Ta,R.env=Ie,R.excel=Fa,R.getColorStyleSheet=function(e){return Ci.getColorStyleSheet(e)},R.keyboard=ko,R.longPress=Ru,R.masks=st,R.modalManager=qi,R.notificationManager=Di,R.number=fs,R.object=Fr,R.personalization=Ci,R.renderLoop=dt,R.setColors=function(e){return Ci.setColors(e)},R.setTheme=function(e){return Ci.setTheme(e)},R.smoothScrollTo=H,R.string=at,R.theme=mt,R.uniqueIdCount=Ui,R.utils=_,R.version="4.80.2",R.xss=$e,Object.defineProperty(R,"__esModule",{value:!0}),R}({});