/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],i=Object.getPrototypeOf,a=n.slice,s=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},r=n.push,o=n.indexOf,l={},c=l.toString,d=l.hasOwnProperty,u=d.toString,h=u.call(Object),p={},f=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},g=function(t){return null!=t&&t===t.window},m=t.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,a,s=(n=n||m).createElement("script");if(s.text=t,e)for(i in v)(a=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,a);n.head.appendChild(s).parentNode.removeChild(s)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t}var w="3.6.0",x=function(t,e){return new x.fn.init(t,e)};function C(t){var e=!!t&&"length"in t&&t.length,n=y(t);return!f(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}x.fn=x.prototype={jquery:w,constructor:x,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,i,a,s,r=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[o]||{},o++),"object"==typeof r||f(r)||(r={}),o===l&&(r=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&(c&&i&&(x.isPlainObject(i)||(a=Array.isArray(i)))?(n=r[e],s=a&&!Array.isArray(n)?[]:a||x.isPlainObject(n)?n:{},a=!1,r[e]=x.extend(c,s,i)):void 0!==i&&(r[e]=i));return r},x.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==c.call(t)||(e=i(t))&&("function"!=typeof(n=d.call(e,"constructor")&&e.constructor)||u.call(n)!==h))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(C(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(C(Object(t))?x.merge(n,"string"==typeof t?[t]:t):r.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,a=t.length;i<n;i++)t[a++]=e[i];return t.length=a,t},grep:function(t,e,n){for(var i=[],a=0,s=t.length,r=!n;a<s;a++)!e(t[a],a)!==r&&i.push(t[a]);return i},map:function(t,e,n){var i,a,r=0,o=[];if(C(t))for(i=t.length;r<i;r++)null!=(a=e(t[r],r,n))&&o.push(a);else for(r in t)null!=(a=e(t[r],r,n))&&o.push(a);return s(o)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()});var k=function(t){var e,n,i,a,s,r,o,l,c,d,u,h,p,f,g,m,v,b,y,w="sizzle"+1*new Date,x=t.document,C=0,k=0,T=lt(),A=lt(),S=lt(),E=lt(),$=function(t,e){return t===e&&(u=!0),0},D={}.hasOwnProperty,I=[],M=I.pop,L=I.push,P=I.push,N=I.slice,R=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",_="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+B+"*("+_+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+_+"))|)"+B+"*\\]",z=":("+_+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(B+"+","g"),q=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),V=new RegExp("^"+B+"*,"+B+"*"),j=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp(B+"|>"),U=new RegExp(z),G=new RegExp("^"+_+"$"),Y={ID:new RegExp("^#("+_+")"),CLASS:new RegExp("^\\.("+_+")"),TAG:new RegExp("^("+_+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,at=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){h()},rt=wt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{P.apply(I=N.call(x.childNodes),x.childNodes),I[x.childNodes.length].nodeType}catch(e){P={apply:I.length?function(t,e){L.apply(t,N.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,i,a){var s,o,c,d,u,f,v,b=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!a&&(h(e),e=e||p,g)){if(11!==x&&(u=Z.exec(t)))if(s=u[1]){if(9===x){if(!(c=e.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(b&&(c=b.getElementById(s))&&y(e,c)&&c.id===s)return i.push(c),i}else{if(u[2])return P.apply(i,e.getElementsByTagName(t)),i;if((s=u[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!E[t+" "]&&(!m||!m.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(v=t,b=e,1===x&&(W.test(t)||j.test(t))){for((b=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((d=e.getAttribute("id"))?d=d.replace(it,at):e.setAttribute("id",d=w)),o=(f=r(t)).length;o--;)f[o]=(d?"#"+d:":scope")+" "+yt(f[o]);v=f.join(",")}try{return P.apply(i,b.querySelectorAll(v)),i}catch(e){E(t,!0)}finally{d===w&&e.removeAttribute("id")}}}return l(t.replace(q,"$1"),e,i,a)}function lt(){var t=[];return function e(n,a){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=a}}function ct(t){return t[w]=!0,t}function dt(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),a=n.length;a--;)i.attrHandle[n[a]]=e}function ht(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct(function(e){return e=+e,ct(function(n,i){for(var a,s=t([],n.length,e),r=s.length;r--;)n[a=s[r]]&&(n[a]=!(i[a]=n[a]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},s=ot.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!K.test(e||n&&n.nodeName||"HTML")},h=ot.setDocument=function(t){var e,a,r=t?t.ownerDocument||t:x;return r!=p&&9===r.nodeType&&r.documentElement&&(f=(p=r).documentElement,g=!s(p),x!=p&&(a=p.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",st,!1):a.attachEvent&&a.attachEvent("onunload",st)),n.scope=dt(function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),n.attributes=dt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=dt(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=dt(function(t){return f.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,a,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(a=e.getElementsByName(t),i=0;s=a[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],a=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(p.querySelectorAll))&&(dt(function(t){var e;f.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+B+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),dt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=J.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&dt(function(t){n.disconnectedMatch=b.call(t,"*"),b.call(t,"[s!='']:x"),v.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(f.compareDocumentPosition),y=e||J.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return u=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==p||t.ownerDocument==x&&y(x,t)?-1:e==p||e.ownerDocument==x&&y(x,e)?1:d?R(d,t)-R(d,e):0:4&i?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,a=t.parentNode,s=e.parentNode,r=[t],o=[e];if(!a||!s)return t==p?-1:e==p?1:a?-1:s?1:d?R(d,t)-R(d,e):0;if(a===s)return ht(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;r[i]===o[i];)i++;return i?ht(r[i],o[i]):r[i]==x?-1:o[i]==x?1:0}),p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if(h(t),n.matchesSelector&&g&&!E[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=b.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){E(e,!0)}return 0<ot(e,p,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!=p&&h(t),y(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!=p&&h(t);var a=i.attrHandle[e.toLowerCase()],s=a&&D.call(i.attrHandle,e.toLowerCase())?a(t,e,!g):void 0;return void 0!==s?s:n.attributes||!g?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},ot.escape=function(t){return(t+"").replace(it,at)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],a=0,s=0;if(u=!n.detectDuplicates,d=!n.sortStable&&t.slice(0),t.sort($),u){for(;e=t[s++];)e===t[s]&&(a=i.push(s));for(;a--;)t.splice(i[a],1)}return d=null,t},a=ot.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=a(e);return n},(i=ot.selectors={cacheLength:50,createPseudo:ct,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=r(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&T(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var a=ot.attr(i,t);return null==a?"!="===e:!e||(a+="","="===e?a===n:"!="===e?a!==n:"^="===e?n&&0===a.indexOf(n):"*="===e?n&&-1<a.indexOf(n):"$="===e?n&&a.slice(-n.length)===n:"~="===e?-1<(" "+a.replace(H," ")+" ").indexOf(n):"|="===e&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,a){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===a?function(t){return!!t.parentNode}:function(e,n,l){var c,d,u,h,p,f,g=s!==r?"nextSibling":"previousSibling",m=e.parentNode,v=o&&e.nodeName.toLowerCase(),b=!l&&!o,y=!1;if(m){if(s){for(;g;){for(h=e;h=h[g];)if(o?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&b){for(y=(p=(c=(d=(u=(h=m)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===C&&c[1])&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===e){d[t]=[C,p,y];break}}else if(b&&(y=p=(c=(d=(u=(h=e)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===C&&c[1]),!1===y)for(;(h=++p&&h&&h[g]||(y=p=0)||f.pop())&&((o?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&((d=(u=h[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]=[C,y]),h!==e)););return(y-=a)===i||y%i==0&&0<=y/i}}},PSEUDO:function(t,e){var n,a=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return a[w]?a(e):1<a.length?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,n){for(var i,s=a(t,e),r=s.length;r--;)t[i=R(t,s[r])]=!(n[i]=s[r])}):function(t){return a(t,0,n)}):a}},pseudos:{not:ct(function(t){var e=[],n=[],i=o(t.replace(q,"$1"));return i[w]?ct(function(t,e,n,a){for(var s,r=i(t,null,a,[]),o=t.length;o--;)(s=r[o])&&(t[o]=!(e[o]=s))}):function(t,a,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}}),has:ct(function(t){return function(e){return 0<ot(t,e).length}}),contains:ct(function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||a(e)).indexOf(t)}}),lang:ct(function(t){return G.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,n){return[n<0?n+e:n]}),even:mt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:mt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:mt(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:mt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function bt(){}function yt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,a=e.next,s=a||i,r=n&&"parentNode"===s,o=k++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,a);return!1}:function(e,n,l){var c,d,u,h=[C,o];if(l){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(d=(u=e[w]||(e[w]={}))[e.uniqueID]||(u[e.uniqueID]={}),a&&a===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=d[s])&&c[0]===C&&c[1]===o)return h[2]=c[2];if((d[s]=h)[2]=t(e,n,l))return!0}return!1}}function xt(t){return 1<t.length?function(e,n,i){for(var a=t.length;a--;)if(!t[a](e,n,i))return!1;return!0}:t[0]}function Ct(t,e,n,i,a){for(var s,r=[],o=0,l=t.length,c=null!=e;o<l;o++)(s=t[o])&&(n&&!n(s,i,a)||(r.push(s),c&&e.push(o)));return r}function kt(t,e,n,i,a,s){return i&&!i[w]&&(i=kt(i)),a&&!a[w]&&(a=kt(a,s)),ct(function(s,r,o,l){var c,d,u,h=[],p=[],f=r.length,g=s||function(t,e,n){for(var i=0,a=e.length;i<a;i++)ot(t,e[i],n);return n}(e||"*",o.nodeType?[o]:o,[]),m=!t||!s&&e?g:Ct(g,h,t,o,l),v=n?a||(s?t:f||i)?[]:r:m;if(n&&n(m,v,o,l),i)for(c=Ct(v,p),i(c,[],o,l),d=c.length;d--;)(u=c[d])&&(v[p[d]]=!(m[p[d]]=u));if(s){if(a||t){if(a){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(m[d]=u);a(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&-1<(c=a?R(s,u):h[d])&&(s[c]=!(r[c]=u))}}else v=Ct(v===r?v.splice(f,v.length):v),a?a(null,r,v,l):P.apply(r,v)})}function Tt(t){for(var e,n,a,s=t.length,r=i.relative[t[0].type],o=r||i.relative[" "],l=r?1:0,d=wt(function(t){return t===e},o,!0),u=wt(function(t){return-1<R(e,t)},o,!0),h=[function(t,n,i){var a=!r&&(i||n!==c)||((e=n).nodeType?d(t,n,i):u(t,n,i));return e=null,a}];l<s;l++)if(n=i.relative[t[l].type])h=[wt(xt(h),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[w]){for(a=++l;a<s&&!i.relative[t[a].type];a++);return kt(1<l&&xt(h),1<l&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,l<a&&Tt(t.slice(l,a)),a<s&&Tt(t=t.slice(a)),a<s&&yt(t))}h.push(n)}return xt(h)}return bt.prototype=i.filters=i.pseudos,i.setFilters=new bt,r=ot.tokenize=function(t,e){var n,a,s,r,o,l,c,d=A[t+" "];if(d)return e?0:d.slice(0);for(o=t,l=[],c=i.preFilter;o;){for(r in n&&!(a=V.exec(o))||(a&&(o=o.slice(a[0].length)||o),l.push(s=[])),n=!1,(a=j.exec(o))&&(n=a.shift(),s.push({value:n,type:a[0].replace(q," ")}),o=o.slice(n.length)),i.filter)!(a=Y[r].exec(o))||c[r]&&!(a=c[r](a))||(n=a.shift(),s.push({value:n,type:r,matches:a}),o=o.slice(n.length));if(!n)break}return e?o.length:o?ot.error(t):A(t,l).slice(0)},o=ot.compile=function(t,e){var n,a,s,o,l,d,u=[],f=[],m=S[t+" "];if(!m){for(e||(e=r(t)),n=e.length;n--;)(m=Tt(e[n]))[w]?u.push(m):f.push(m);(m=S(t,(a=f,o=0<(s=u).length,l=0<a.length,d=function(t,e,n,r,d){var u,f,m,v=0,b="0",y=t&&[],w=[],x=c,k=t||l&&i.find.TAG("*",d),T=C+=null==x?1:Math.random()||.1,A=k.length;for(d&&(c=e==p||e||d);b!==A&&null!=(u=k[b]);b++){if(l&&u){for(f=0,e||u.ownerDocument==p||(h(u),n=!g);m=a[f++];)if(m(u,e||p,n)){r.push(u);break}d&&(C=T)}o&&((u=!m&&u)&&v--,t&&y.push(u))}if(v+=b,o&&b!==v){for(f=0;m=s[f++];)m(y,w,e,n);if(t){if(0<v)for(;b--;)y[b]||w[b]||(w[b]=M.call(r));w=Ct(w)}P.apply(r,w),d&&!t&&0<w.length&&1<v+s.length&&ot.uniqueSort(r)}return d&&(C=T,c=x),y},o?ct(d):d))).selector=t}return m},l=ot.select=function(t,e,n,a){var s,l,c,d,u,h="function"==typeof t&&t,p=!a&&r(t=h.selector||t);if(n=n||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(c=l[0]).type&&9===e.nodeType&&g&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=Y.needsContext.test(t)?0:l.length;s--&&(c=l[s],!i.relative[d=c.type]);)if((u=i.find[d])&&(a=u(c.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(s,1),!(t=a.length&&yt(l)))return P.apply(n,a),n;break}}return(h||o(t,p))(a,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=w.split("").sort($).join("")===w,n.detectDuplicates=!!u,h(),n.sortDetached=dt(function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))}),dt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&dt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),dt(function(t){return null==t.getAttribute("disabled")})||ut(O,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(t);x.find=k,x.expr=k.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=k.uniqueSort,x.text=k.getText,x.isXMLDoc=k.isXML,x.contains=k.contains,x.escapeSelector=k.escape;var T=function(t,e,n){for(var i=[],a=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&x(t).is(n))break;i.push(t)}return i},A=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},S=x.expr.match.needsContext;function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var $=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,n){return f(e)?x.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return-1<o.call(e,t)!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,i=this.length,a=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<i;e++)if(x.contains(a[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)x.find(t,a[e],n);return 1<i?x.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&S.test(t)?x(t):t||[],!1).length}});var I,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var i,a;if(!t)return this;if(n=n||I,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:M.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),$.test(i[1])&&x.isPlainObject(e))for(i in e)f(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(a=m.getElementById(i[2]))&&(this[0]=a,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):f(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,I=x(m);var L=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,a=this.length,s=[],r="string"!=typeof t&&x(t);if(!S.test(t))for(;i<a;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&x.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(1<s.length?x.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?o.call(x(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(E(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,i){var a=x.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=x.filter(i,a)),1<this.length&&(P[t]||x.uniqueSort(a),L.test(t)&&a.reverse()),this.pushStack(a)}});var R=/[^\x20\t\r\n\f]+/g;function O(t){return t}function B(t){throw t}function _(t,e,n,i){var a;try{t&&f(a=t.promise)?a.call(t).done(e).fail(n):t&&f(a=t.then)?a.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},x.each(e.match(R)||[],function(t,e){n[e]=!0}),n):x.extend({},t);var i,a,s,r,o=[],l=[],c=-1,d=function(){for(r=r||t.once,s=i=!0;l.length;c=-1)for(a=l.shift();++c<o.length;)!1===o[c].apply(a[0],a[1])&&t.stopOnFalse&&(c=o.length,a=!1);t.memory||(a=!1),i=!1,r&&(o=a?[]:"")},u={add:function(){return o&&(a&&!i&&(c=o.length-1,l.push(a)),function e(n){x.each(n,function(n,i){f(i)?t.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==y(i)&&e(i)})}(arguments),a&&!i&&d()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;-1<(n=x.inArray(e,o,n));)o.splice(n,1),n<=c&&c--}),this},has:function(t){return t?-1<x.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return r=l=[],o=a="",this},disabled:function(){return!o},lock:function(){return r=l=[],a||i||(o=a=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||d()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(n,function(n,i){var a=f(t[i[4]])&&t[i[4]];s[i[1]](function(){var t=a&&a.apply(this,arguments);t&&f(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,a?[t]:arguments)})}),t=null}).promise()},then:function(e,i,a){var s=0;function r(e,n,i,a){return function(){var o=this,l=arguments,c=function(){var t,c;if(!(e<s)){if((t=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,f(c)?a?c.call(t,r(s,n,O,a),r(s,n,B,a)):(s++,c.call(t,r(s,n,O,a),r(s,n,B,a),r(s,n,O,n.notifyWith))):(i!==O&&(o=void 0,l=[t]),(a||n.resolveWith)(o,l))}},d=a?c:function(){try{c()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,d.stackTrace),s<=e+1&&(i!==B&&(o=void 0,l=[t]),n.rejectWith(o,l))}};e?d():(x.Deferred.getStackHook&&(d.stackTrace=x.Deferred.getStackHook()),t.setTimeout(d))}}return x.Deferred(function(t){n[0][3].add(r(0,t,f(a)?a:O,t.notifyWith)),n[1][3].add(r(0,t,f(e)?e:O)),n[2][3].add(r(0,t,f(i)?i:B))}).promise()},promise:function(t){return null!=t?x.extend(t,a):a}},s={};return x.each(n,function(t,e){var r=e[2],o=e[5];a[e[1]]=r.add,o&&r.add(function(){i=o},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),r.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=r.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),s=a.call(arguments),r=x.Deferred(),o=function(t){return function(n){i[t]=this,s[t]=1<arguments.length?a.call(arguments):n,--e||r.resolveWith(i,s)}};if(e<=1&&(_(t,r.done(o(n)).resolve,r.reject,!e),"pending"===r.state()||f(s[n]&&s[n].then)))return r.then();for(;n--;)_(s[n],o(n),r.reject);return r.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&F.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout(function(){throw e})};var z=x.Deferred();function H(){m.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),x.ready()}x.fn.ready=function(t){return z.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0)!==t&&0<--x.readyWait||z.resolveWith(m,[x])}}),x.ready.then=z.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?t.setTimeout(x.ready):(m.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var q=function(t,e,n,i,a,s,r){var o=0,l=t.length,c=null==n;if("object"===y(n))for(o in a=!0,n)q(t,e,o,n[o],!0,s,r);else if(void 0!==i&&(a=!0,f(i)||(r=!0),c&&(r?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(x(t),n)})),e))for(;o<l;o++)e(t[o],n,r?i:i.call(t[o],o,e(t[o],n)));return a?t:c?e.call(t):l?e(t[0],n):s},V=/^-ms-/,j=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function U(t){return t.replace(V,"ms-").replace(j,W)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=x.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,a=this.cache(t);if("string"==typeof e)a[U(e)]=n;else for(i in e)a[U(i)]=e[i];return a},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][U(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(U):(e=U(e))in i?[e]:e.match(R)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var K=new Y,X=new Y,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(t,e,n){var i,a;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(a=n)||"false"!==a&&("null"===a?null:a===+a+""?+a:Q.test(a)?JSON.parse(a):a)}catch(t){}X.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return X.hasData(t)||K.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return K.access(t,e,n)},_removeData:function(t,e){K.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,i,a,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(a=X.get(s),1===s.nodeType&&!K.get(s,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&(i=U(i.slice(5)),Z(s,i,a[i]));K.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof t?this.each(function(){X.set(this,t)}):q(this,function(e){var n;if(s&&void 0===e)return void 0!==(n=X.get(s,t))||void 0!==(n=Z(s,t))?n:void 0;this.each(function(){X.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){X.remove(this,t)})}}),x.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=K.get(t,e),n&&(!i||Array.isArray(n)?i=K.access(t,e,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),i=n.length,a=n.shift(),s=x._queueHooks(t,e);"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===e&&n.unshift("inprogress"),delete s.stop,a.call(t,function(){x.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return K.get(t,n)||K.access(t,n,{empty:x.Callbacks("once memory").add(function(){K.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,a=x.Deferred(),s=this,r=this.length,o=function(){--i||a.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=K.get(s[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),a.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=m.documentElement,at=function(t){return x.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(at=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===x.css(t,"display")};function ot(t,e,n,i){var a,s,r=20,o=i?function(){return i.cur()}:function(){return x.css(t,e,"")},l=o(),c=n&&n[3]||(x.cssNumber[e]?"":"px"),d=t.nodeType&&(x.cssNumber[e]||"px"!==c&&+l)&&et.exec(x.css(t,e));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;r--;)x.style(t,e,d+c),(1-s)*(1-(s=o()/l||.5))<=0&&(r=0),d/=s;d*=2,x.style(t,e,d+c),n=n||[]}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}var lt={};function ct(t,e){for(var n,i,a,s,r,o,l,c=[],d=0,u=t.length;d<u;d++)(i=t[d]).style&&(n=i.style.display,e?("none"===n&&(c[d]=K.get(i,"display")||null,c[d]||(i.style.display="")),""===i.style.display&&rt(i)&&(c[d]=(l=r=s=void 0,r=(a=i).ownerDocument,o=a.nodeName,(l=lt[o])||(s=r.body.appendChild(r.createElement(o)),l=x.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),lt[o]=l)))):"none"!==n&&(c[d]="none",K.set(i,"display",n)));for(d=0;d<u;d++)null!=c[d]&&(t[d].style.display=c[d]);return t}x.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?x(this).show():x(this).hide()})}});var dt,ut,ht=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i;dt=m.createDocumentFragment().appendChild(m.createElement("div")),(ut=m.createElement("input")).setAttribute("type","radio"),ut.setAttribute("checked","checked"),ut.setAttribute("name","t"),dt.appendChild(ut),p.checkClone=dt.cloneNode(!0).cloneNode(!0).lastChild.checked,dt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!dt.cloneNode(!0).lastChild.defaultValue,dt.innerHTML="<option></option>",p.option=!!dt.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E(t,e)?x.merge([t],n):n}function vt(t,e){for(var n=0,i=t.length;n<i;n++)K.set(t[n],"globalEval",!e||K.get(e[n],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,p.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var bt=/<|&#?\w+;/;function yt(t,e,n,i,a){for(var s,r,o,l,c,d,u=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===y(s))x.merge(h,s.nodeType?[s]:s);else if(bt.test(s)){for(r=r||u.appendChild(e.createElement("div")),o=(pt.exec(s)||["",""])[1].toLowerCase(),l=gt[o]||gt._default,r.innerHTML=l[1]+x.htmlPrefilter(s)+l[2],d=l[0];d--;)r=r.lastChild;x.merge(h,r.childNodes),(r=u.firstChild).textContent=""}else h.push(e.createTextNode(s));for(u.textContent="",p=0;s=h[p++];)if(i&&-1<x.inArray(s,i))a&&a.push(s);else if(c=at(s),r=mt(u.appendChild(s),"script"),c&&vt(r),n)for(d=0;s=r[d++];)ft.test(s.type||"")&&n.push(s);return u}var wt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Ct(){return!1}function kt(t,e){return t===function(){try{return m.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,n,i,a,s){var r,o;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=void 0),e)Tt(t,o,n,i,e[o],s);return t}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),!1===a)a=Ct;else if(!a)return t;return 1===s&&(r=a,(a=function(t){return x().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=x.guid++)),t.each(function(){x.event.add(this,e,a,i,n)})}function At(t,e,n){n?(K.set(t,e,!1),x.event.add(t,e,{namespace:!1,handler:function(t){var i,s,r=K.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(x.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),K.set(this,e,r),i=n(this,e),this[e](),r!==(s=K.get(this,e))||i?K.set(this,e,!1):s={},r!==s)return t.stopImmediatePropagation(),t.preventDefault(),s&&s.value}else r.length&&(K.set(this,e,{value:x.event.trigger(x.extend(r[0],x.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===K.get(t,e)&&x.event.add(t,e,xt)}x.event={global:{},add:function(t,e,n,i,a){var s,r,o,l,c,d,u,h,p,f,g,m=K.get(t);if(G(t))for(n.handler&&(n=(s=n).handler,a=s.selector),a&&x.find.matchesSelector(it,a),n.guid||(n.guid=x.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(R)||[""]).length;c--;)p=g=(o=wt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),p&&(u=x.event.special[p]||{},p=(a?u.delegateType:u.bindType)||p,u=x.event.special[p]||{},d=x.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,f,r)||t.addEventListener&&t.addEventListener(p,r)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[p]=!0)},remove:function(t,e,n,i,a){var s,r,o,l,c,d,u,h,p,f,g,m=K.hasData(t)&&K.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(R)||[""]).length;c--;)if(p=g=(o=wt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=x.event.special[p]||{},h=l[p=(i?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=h.length;s--;)d=h[s],!a&&g!==d.origType||n&&n.guid!==d.guid||o&&!o.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(s,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(t,d));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(t,f,m.handle)||x.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)x.event.remove(t,p+e[c],n,i,!0);x.isEmptyObject(l)&&K.remove(t,"handle events")}},dispatch:function(t){var e,n,i,a,s,r,o=new Array(arguments.length),l=x.event.fix(t),c=(K.get(this,"events")||Object.create(null))[l.type]||[],d=x.event.special[l.type]||{};for(o[0]=l,e=1;e<arguments.length;e++)o[e]=arguments[e];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(r=x.event.handlers.call(this,l,c),e=0;(a=r[e++])&&!l.isPropagationStopped();)for(l.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((x.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,a,s,r,o=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],r={},n=0;n<l;n++)void 0===r[a=(i=e[n]).selector+" "]&&(r[a]=i.needsContext?-1<x(a,this).index(c):x.find(a,this,null,[c]).length),r[a]&&s.push(i);s.length&&o.push({elem:c,handlers:s})}return c=this,l<e.length&&o.push({elem:c,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:f(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&E(e,"input")&&At(e,"click",xt),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&E(e,"input")&&At(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&E(e,"input")&&K.get(e,"click")||E(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(t,e){x.event.special[t]={setup:function(){return At(this,t,kt),!1},trigger:function(){return At(this,t),!0},_default:function(){return!0},delegateType:e}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,a=t.handleObj;return i&&(i===this||x.contains(this,i))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,i){return Tt(this,t,e,n,i)},one:function(t,e,n,i){return Tt(this,t,e,n,i,1)},off:function(t,e,n){var i,a;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each(function(){x.event.remove(this,t,n,e)})}});var St=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return E(t,"table")&&E(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,i,a,s,r,o;if(1===e.nodeType){if(K.hasData(t)&&(o=K.get(t).events))for(a in K.remove(e,"handle events"),o)for(n=0,i=o[a].length;n<i;n++)x.event.add(e,a,o[a][n]);X.hasData(t)&&(s=X.access(t),r=x.extend({},s),X.set(e,r))}}function Pt(t,e,n,i){e=s(e);var a,r,o,l,c,d,u=0,h=t.length,g=h-1,m=e[0],v=f(m);if(v||1<h&&"string"==typeof m&&!p.checkClone&&Et.test(m))return t.each(function(a){var s=t.eq(a);v&&(e[0]=m.call(this,a,s.html())),Pt(s,e,n,i)});if(h&&(r=(a=yt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===a.childNodes.length&&(a=r),r||i)){for(l=(o=x.map(mt(a,"script"),It)).length;u<h;u++)c=a,u!==g&&(c=x.clone(c,!0,!0),l&&x.merge(o,mt(c,"script"))),n.call(t[u],c,u);if(l)for(d=o[o.length-1].ownerDocument,x.map(o,Mt),u=0;u<l;u++)c=o[u],ft.test(c.type||"")&&!K.access(c,"globalEval")&&x.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&!c.noModule&&x._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):b(c.textContent.replace($t,""),c,d))}return t}function Nt(t,e,n){for(var i,a=e?x.filter(e,t):t,s=0;null!=(i=a[s]);s++)n||1!==i.nodeType||x.cleanData(mt(i)),i.parentNode&&(n&&at(i)&&vt(mt(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,a,s,r,o,l,c,d=t.cloneNode(!0),u=at(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(r=mt(d),i=0,a=(s=mt(t)).length;i<a;i++)o=s[i],"input"===(c=(l=r[i]).nodeName.toLowerCase())&&ht.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(e)if(n)for(s=s||mt(t),r=r||mt(d),i=0,a=s.length;i<a;i++)Lt(s[i],r[i]);else Lt(t,d);return 0<(r=mt(d,"script")).length&&vt(r,!u&&mt(t,"script")),d},cleanData:function(t){for(var e,n,i,a=x.event.special,s=0;void 0!==(n=t[s]);s++)if(G(n)){if(e=n[K.expando]){if(e.events)for(i in e.events)a[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);n[K.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Nt(this,t,!0)},remove:function(t){return Nt(this,t)},text:function(t){return q(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Pt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Pt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return q(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!St.test(t)&&!gt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Pt(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(mt(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,i=[],a=x(t),s=a.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),x(a[o])[e](n),r.apply(i,n.get());return this.pushStack(i)}});var Rt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ot=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Bt=function(t,e,n){var i,a,s={};for(a in e)s[a]=t.style[a],t.style[a]=e[a];for(a in i=n.call(t),e)t.style[a]=s[a];return i},_t=new RegExp(nt.join("|"),"i");function Ft(t,e,n){var i,a,s,r,o=t.style;return(n=n||Ot(t))&&(""!==(r=n.getPropertyValue(e)||n[e])||at(t)||(r=x.style(t,e)),!p.pixelBoxStyles()&&Rt.test(r)&&_t.test(e)&&(i=o.width,a=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=i,o.minWidth=a,o.maxWidth=s)),void 0!==r?r+"":r}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(c).appendChild(d);var e=t.getComputedStyle(d);i="1%"!==e.top,l=12===n(e.marginLeft),d.style.right="60%",r=36===n(e.right),a=36===n(e.width),d.style.position="absolute",s=12===n(d.offsetWidth/3),it.removeChild(c),d=null}}function n(t){return Math.round(parseFloat(t))}var i,a,s,r,o,l,c=m.createElement("div"),d=m.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===d.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,n,i,a;return null==o&&(e=m.createElement("table"),n=m.createElement("tr"),i=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",it.appendChild(e).appendChild(n).appendChild(i),a=t.getComputedStyle(n),o=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===n.offsetHeight,it.removeChild(e)),o}}))}();var Ht=["Webkit","Moz","ms"],qt=m.createElement("div").style,Vt={};function jt(t){return x.cssProps[t]||Vt[t]||(t in qt?t:Vt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Ht.length;n--;)if((t=Ht[n]+e)in qt)return t}(t)||t)}var Wt=/^(none|table(?!-c[ea]).+)/,Ut=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"};function Kt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Xt(t,e,n,i,a,s){var r="width"===e?1:0,o=0,l=0;if(n===(i?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=x.css(t,n+nt[r],!0,a)),i?("content"===n&&(l-=x.css(t,"padding"+nt[r],!0,a)),"margin"!==n&&(l-=x.css(t,"border"+nt[r]+"Width",!0,a))):(l+=x.css(t,"padding"+nt[r],!0,a),"padding"!==n?l+=x.css(t,"border"+nt[r]+"Width",!0,a):o+=x.css(t,"border"+nt[r]+"Width",!0,a));return!i&&0<=s&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))||0),l}function Qt(t,e,n){var i=Ot(t),a=(!p.boxSizingReliable()||n)&&"border-box"===x.css(t,"boxSizing",!1,i),s=a,r=Ft(t,e,i),o="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(r)){if(!n)return r;r="auto"}return(!p.boxSizingReliable()&&a||!p.reliableTrDimensions()&&E(t,"tr")||"auto"===r||!parseFloat(r)&&"inline"===x.css(t,"display",!1,i))&&t.getClientRects().length&&(a="border-box"===x.css(t,"boxSizing",!1,i),(s=o in t)&&(r=t[o])),(r=parseFloat(r)||0)+Xt(t,e,n||(a?"border":"content"),s,i,r)+"px"}function Jt(t,e,n,i,a){return new Jt.prototype.init(t,e,n,i,a)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ft(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,s,r,o=U(e),l=Ut.test(e),c=t.style;if(l||(e=jt(o)),r=x.cssHooks[e]||x.cssHooks[o],void 0===n)return r&&"get"in r&&void 0!==(a=r.get(t,!1,i))?a:c[e];"string"==(s=typeof n)&&(a=et.exec(n))&&a[1]&&(n=ot(t,e,a),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=a&&a[3]||(x.cssNumber[o]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var a,s,r,o=U(e);return Ut.test(e)||(e=jt(o)),(r=x.cssHooks[e]||x.cssHooks[o])&&"get"in r&&(a=r.get(t,!0,n)),void 0===a&&(a=Ft(t,e,i)),"normal"===a&&e in Yt&&(a=Yt[e]),""===n||n?(s=parseFloat(a),!0===n||isFinite(s)?s||0:a):a}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,i){if(n)return!Wt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,i):Bt(t,Gt,function(){return Qt(t,e,i)})},set:function(t,n,i){var a,s=Ot(t),r=!p.scrollboxSize()&&"absolute"===s.position,o=(r||i)&&"border-box"===x.css(t,"boxSizing",!1,s),l=i?Xt(t,e,i,o,s):0;return o&&r&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-Xt(t,e,"border",!1,s)-.5)),l&&(a=et.exec(n))&&"px"!==(a[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Kt(0,n,l)}}}),x.cssHooks.marginLeft=zt(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ft(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];i<4;i++)a[t+nt[i]+e]=s[i]||s[i-2]||s[0];return a}},"margin"!==t&&(x.cssHooks[t+e].set=Kt)}),x.fn.extend({css:function(t,e){return q(this,function(t,e,n){var i,a,s={},r=0;if(Array.isArray(e)){for(i=Ot(t),a=e.length;r<a;r++)s[e[r]]=x.css(t,e[r],!1,i);return s}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,1<arguments.length)}}),((x.Tween=Jt).prototype={constructor:Jt,init:function(t,e,n,i,a,s){this.elem=t,this.prop=n,this.easing=a||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(x.cssNumber[n]?"":"px")},cur:function(){var t=Jt.propHooks[this.prop];return t&&t.get?t.get(this):Jt.propHooks._default.get(this)},run:function(t){var e,n=Jt.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Jt.propHooks._default.set(this),this}}).init.prototype=Jt.prototype,(Jt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[jt(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Jt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Jt.prototype.init,x.fx.step={};var Zt,te,ee,ne,ie=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function se(){te&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(se):t.setTimeout(se,x.fx.interval),x.fx.tick())}function re(){return t.setTimeout(function(){Zt=void 0}),Zt=Date.now()}function oe(t,e){var n,i=0,a={height:t};for(e=e?1:0;i<4;i+=2-e)a["margin"+(n=nt[i])]=a["padding"+n]=t;return e&&(a.opacity=a.width=t),a}function le(t,e,n){for(var i,a=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),s=0,r=a.length;s<r;s++)if(i=a[s].call(n,e,t))return i}function ce(t,e,n){var i,a,s=0,r=ce.prefilters.length,o=x.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=Zt||re(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),s=0,r=c.tweens.length;s<r;s++)c.tweens[s].run(i);return o.notifyWith(t,[c,i,n]),i<1&&r?n:(r||o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c]),!1)},c=o.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:Zt||re(),duration:n.duration,tweens:[],createTween:function(e,n){var i=x.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return e?(o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c,e])):o.rejectWith(t,[c,e]),this}}),d=c.props;for(function(t,e){var n,i,a,s,r;for(n in t)if(a=e[i=U(n)],s=t[n],Array.isArray(s)&&(a=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(r=x.cssHooks[i])&&"expand"in r)for(n in s=r.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=a);else e[i]=a}(d,c.opts.specialEasing);s<r;s++)if(i=ce.prefilters[s].call(c,t,d,c.opts))return f(i.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return x.map(d,le,c),f(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(ce,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){f(t)?(e=t,t=["*"]):t=t.match(R);for(var n,i=0,a=t.length;i<a;i++)n=t[i],ce.tweeners[n]=ce.tweeners[n]||[],ce.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,a,s,r,o,l,c,d,u="width"in e||"height"in e,h=this,p={},f=t.style,g=t.nodeType&&rt(t),m=K.get(t,"fxshow");for(i in n.queue||(null==(r=x._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,o=r.empty.fire,r.empty.fire=function(){r.unqueued||o()}),r.unqueued++,h.always(function(){h.always(function(){r.unqueued--,x.queue(t,"fx").length||r.empty.fire()})})),e)if(a=e[i],ie.test(a)){if(delete e[i],s=s||"toggle"===a,a===(g?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||x.style(t,i)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(p))for(i in u&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=K.get(t,"display")),"none"===(d=x.css(t,"display"))&&(c?d=c:(ct([t],!0),c=t.style.display||c,d=x.css(t,"display"),ct([t]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===x.css(t,"float")&&(l||(h.done(function(){f.display=c}),null==c&&(d=f.display,c="none"===d?"":d)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=K.access(t,"fxshow",{display:c}),s&&(m.hidden=!g),g&&ct([t],!0),h.done(function(){for(i in g||ct([t]),K.remove(t,"fxshow"),p)x.style(t,i,p[i])})),l=le(g?m[i]:0,i,h),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||f(t)&&t,duration:t,easing:n&&e||e&&!f(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var a=x.isEmptyObject(t),s=x.speed(e,n,i),r=function(){var e=ce(this,x.extend({},t),s);(a||K.get(this,"finish"))&&e.stop(!0)};return r.finish=r,a||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,a=null!=t&&t+"queueHooks",s=x.timers,r=K.get(this);if(a)r[a]&&r[a].stop&&i(r[a]);else for(a in r)r[a]&&r[a].stop&&ae.test(a)&&i(r[a]);for(a=s.length;a--;)s[a].elem!==this||null!=t&&s[a].queue!==t||(s[a].anim.stop(n),e=!1,s.splice(a,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=K.get(this),i=n[t+"queue"],a=n[t+"queueHooks"],s=x.timers,r=i?i.length:0;for(n.finish=!0,x.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,i,a){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(oe(e,!0),t,i,a)}}),x.each({slideDown:oe("show"),slideUp:oe("hide"),slideToggle:oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(Zt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),Zt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){te||(te=!0,se())},x.fx.stop=function(){te=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,i){var a=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(a)}})},ee=m.createElement("input"),ne=m.createElement("select").appendChild(m.createElement("option")),ee.type="checkbox",p.checkOn=""!==ee.value,p.optSelected=ne.selected,(ee=m.createElement("input")).value="t",ee.type="radio",p.radioValue="t"===ee.value;var de,ue=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return q(this,x.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var i,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?x.prop(t,e,n):(1===s&&x.isXMLDoc(t)||(a=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?de:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:(t.setAttribute(e,n+""),n):a&&"get"in a&&null!==(i=a.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&E(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,a=e&&e.match(R);if(a&&1===t.nodeType)for(;n=a[i++];)t.removeAttribute(n)}}),de={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ue[e]||x.find.attr;ue[e]=function(t,e,i){var a,s,r=e.toLowerCase();return i||(s=ue[r],ue[r]=a,a=null!=n(t,e,i)?r:null,ue[r]=s),a}});var he=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function fe(t){return(t.match(R)||[]).join(" ")}function ge(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}x.fn.extend({prop:function(t,e){return q(this,x.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var i,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&x.isXMLDoc(t)||(e=x.propFix[e]||e,a=x.propHooks[e]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:t[e]=n:a&&"get"in a&&null!==(i=a.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):he.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,i,a,s,r,o,l=0;if(f(t))return this.each(function(e){x(this).addClass(t.call(this,e,ge(this)))});if((e=me(t)).length)for(;n=this[l++];)if(a=ge(n),i=1===n.nodeType&&" "+fe(a)+" "){for(r=0;s=e[r++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a!==(o=fe(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,a,s,r,o,l=0;if(f(t))return this.each(function(e){x(this).removeClass(t.call(this,e,ge(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[l++];)if(a=ge(n),i=1===n.nodeType&&" "+fe(a)+" "){for(r=0;s=e[r++];)for(;-1<i.indexOf(" "+s+" ");)i=i.replace(" "+s+" "," ");a!==(o=fe(i))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):f(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,ge(this),e),e)}):this.each(function(){var e,a,s,r;if(i)for(a=0,s=x(this),r=me(t);e=r[a++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=ge(this))&&K.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":K.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+fe(ge(n))+" ").indexOf(e))return!0;return!1}});var ve=/\r/g;x.fn.extend({val:function(t){var e,n,i,a=this[0];return arguments.length?(i=f(t),this.each(function(n){var a;1===this.nodeType&&(null==(a=i?t.call(this,n,x(this).val()):t)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=x.map(a,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,a,"value")||(this.value=a))})):a?(e=x.valHooks[a.type]||x.valHooks[a.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(ve,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:fe(x.text(t))}},select:{get:function(t){var e,n,i,a=t.options,s=t.selectedIndex,r="select-one"===t.type,o=r?null:[],l=r?s+1:a.length;for(i=s<0?l:r?s:0;i<l;i++)if(((n=a[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(e=x(n).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,a=t.options,s=x.makeArray(e),r=a.length;r--;)((i=a[r]).selected=-1<x.inArray(x.valHooks.option.get(i),s))&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<x.inArray(x(t).val(),e)}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),p.focusin="onfocusin"in t;var be=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,i,a){var s,r,o,l,c,u,h,p,v=[i||m],b=d.call(e,"type")?e.type:e,y=d.call(e,"namespace")?e.namespace.split("."):[];if(r=p=o=i=i||m,3!==i.nodeType&&8!==i.nodeType&&!be.test(b+x.event.triggered)&&(-1<b.indexOf(".")&&(b=(y=b.split(".")).shift(),y.sort()),c=b.indexOf(":")<0&&"on"+b,(e=e[x.expando]?e:new x.Event(b,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:x.makeArray(n,[e]),h=x.event.special[b]||{},a||!h.trigger||!1!==h.trigger.apply(i,n))){if(!a&&!h.noBubble&&!g(i)){for(l=h.delegateType||b,be.test(l+b)||(r=r.parentNode);r;r=r.parentNode)v.push(r),o=r;o===(i.ownerDocument||m)&&v.push(o.defaultView||o.parentWindow||t)}for(s=0;(r=v[s++])&&!e.isPropagationStopped();)p=r,e.type=1<s?l:h.bindType||b,(u=(K.get(r,"events")||Object.create(null))[e.type]&&K.get(r,"handle"))&&u.apply(r,n),(u=c&&r[c])&&u.apply&&G(r)&&(e.result=u.apply(r,n),!1===e.result&&e.preventDefault());return e.type=b,a||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),n)||!G(i)||c&&f(i[b])&&!g(i)&&((o=i[c])&&(i[c]=null),x.event.triggered=b,e.isPropagationStopped()&&p.addEventListener(b,ye),i[b](),e.isPropagationStopped()&&p.removeEventListener(b,ye),x.event.triggered=void 0,o&&(i[c]=o)),e.result}},simulate:function(t,e,n){var i=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,a=K.access(i,e);a||i.addEventListener(t,n,!0),K.access(i,e,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,a=K.access(i,e)-1;a?K.access(i,e,a):(i.removeEventListener(t,n,!0),K.remove(i,e))}}});var we=t.location,xe={guid:Date.now()},Ce=/\?/;x.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||x.error("Invalid XML: "+(i?x.map(i.childNodes,function(t){return t.textContent}).join("\n"):e)),n};var ke=/\[\]$/,Te=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Se=/^(?:input|select|textarea|keygen)/i;function Ee(t,e,n,i){var a;if(Array.isArray(e))x.each(e,function(e,a){n||ke.test(t)?i(t,a):Ee(t+"["+("object"==typeof a&&null!=a?e:"")+"]",a,n,i)});else if(n||"object"!==y(e))i(t,e);else for(a in e)Ee(t+"["+a+"]",e[a],n,i)}x.param=function(t,e){var n,i=[],a=function(t,e){var n=f(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){a(this.name,this.value)});else for(n in t)Ee(n,t[n],e,a);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Se.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}});var $e=/%20/g,De=/#.*$/,Ie=/([?&])_=[^&]*/,Me=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ne={},Re={},Oe="*/".concat("*"),Be=m.createElement("a");function _e(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,a=0,s=e.toLowerCase().match(R)||[];if(f(n))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Fe(t,e,n,i){var a={},s=t===Re;function r(o){var l;return a[o]=!0,x.each(t[o]||[],function(t,o){var c=o(e,n,i);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}return r(e.dataTypes[0])||!a["*"]&&r("*")}function ze(t,e){var n,i,a=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((a[n]?t:i||(i={}))[n]=e[n]);return i&&x.extend(!0,t,i),t}Be.href=we.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,x.ajaxSettings),e):ze(x.ajaxSettings,t)},ajaxPrefilter:_e(Ne),ajaxTransport:_e(Re),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,a,s,r,o,l,c,d,u,h,p=x.ajaxSetup({},n),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?x(f):x.event,v=x.Deferred(),b=x.Callbacks("once memory"),y=p.statusCode||{},w={},C={},k="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!r)for(r={};e=Me.exec(s);)r[e[1].toLowerCase()+" "]=(r[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=r[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)T.always(t[T.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||k;return i&&i.abort(e),A(0,e),this}};if(v.promise(T),p.url=((e||p.url||we.href)+"").replace(Pe,we.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(R)||[""],null==p.crossDomain){l=m.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Be.protocol+"//"+Be.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Fe(Ne,p,n,T),c)return T;for(u in(d=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),a=p.url.replace(De,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace($e,"+")):(h=p.url.slice(a.length),p.data&&(p.processData||"string"==typeof p.data)&&(a+=(Ce.test(a)?"&":"?")+p.data,delete p.data),!1===p.cache&&(a=a.replace(Ie,"$1"),h=(Ce.test(a)?"&":"?")+"_="+xe.guid+++h),p.url=a+h),p.ifModified&&(x.lastModified[a]&&T.setRequestHeader("If-Modified-Since",x.lastModified[a]),x.etag[a]&&T.setRequestHeader("If-None-Match",x.etag[a])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Oe+"; q=0.01":""):p.accepts["*"]),p.headers)T.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,T,p)||c))return T.abort();if(k="abort",b.add(p.complete),T.done(p.success),T.fail(p.error),i=Fe(Re,p,n,T)){if(T.readyState=1,d&&g.trigger("ajaxSend",[T,p]),c)return T;p.async&&0<p.timeout&&(o=t.setTimeout(function(){T.abort("timeout")},p.timeout));try{c=!1,i.send(w,A)}catch(e){if(c)throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,n,r,l){var u,h,m,w,C,k=n;c||(c=!0,o&&t.clearTimeout(o),i=void 0,s=l||"",T.readyState=0<e?4:0,u=200<=e&&e<300||304===e,r&&(w=function(t,e,n){for(var i,a,s,r,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in o)if(o[a]&&o[a].test(i)){l.unshift(a);break}if(l[0]in n)s=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){s=a;break}r||(r=a)}s=s||r}if(s)return s!==l[0]&&l.unshift(s),n[s]}(p,T,r)),!u&&-1<x.inArray("script",p.dataTypes)&&x.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(t,e,n,i){var a,s,r,o,l,c={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=d.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(a in c)if((o=a.split(" "))[1]===s&&(r=c[l+" "+o[0]]||c["* "+o[0]])){!0===r?r=c[a]:!0!==c[a]&&(s=o[0],d.unshift(o[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(p,w,T,u),u?(p.ifModified&&((C=T.getResponseHeader("Last-Modified"))&&(x.lastModified[a]=C),(C=T.getResponseHeader("etag"))&&(x.etag[a]=C)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=w.state,h=w.data,u=!(m=w.error))):(m=k,!e&&k||(k="error",e<0&&(e=0))),T.status=e,T.statusText=(n||k)+"",u?v.resolveWith(f,[h,k,T]):v.rejectWith(f,[T,k,m]),T.statusCode(y),y=void 0,d&&g.trigger(u?"ajaxSuccess":"ajaxError",[T,p,u?h:m]),b.fireWith(f,[T,k]),d&&(g.trigger("ajaxComplete",[T,p]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,i,a){return f(n)&&(a=a||i,i=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:a,data:n,success:i},x.isPlainObject(t)&&t))}}),x.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),x._evalUrl=function(t,e,n){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e,n)}})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(f(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return f(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=f(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},qe=x.ajaxSettings.xhr();p.cors=!!qe&&"withCredentials"in qe,p.ajax=qe=!!qe,x.ajaxTransport(function(e){var n,i;if(p.cors||qe&&!e.crossDomain)return{send:function(a,s){var r,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];for(r in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)o.setRequestHeader(r,a[r]);n=function(t){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(He[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(n)throw a}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,a){e=x("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&a("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ve,je=[],We=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=je.pop()||x.expando+"_"+xe.guid++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,n,i){var a,s,r,o=!1!==e.jsonp&&(We.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=f(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(We,"$1"+a):!1!==e.jsonp&&(e.url+=(Ce.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return r||x.error(a+" was not called"),r[0]},e.dataTypes[0]="json",s=t[a],t[a]=function(){r=arguments},i.always(function(){void 0===s?x(t).removeProp(a):t[a]=s,e[a]&&(e.jsonpCallback=n.jsonpCallback,je.push(a)),r&&f(s)&&s(r[0]),r=s=void 0}),"script"}),p.createHTMLDocument=((Ve=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((i=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(i)):e=m),s=!n&&[],(a=$.exec(t))?[e.createElement(a[1])]:(a=yt([t],e,s),s&&s.length&&x(s).remove(),x.merge([],a.childNodes)));var i,a,s},x.fn.load=function(t,e,n){var i,a,s,r=this,o=t.indexOf(" ");return-1<o&&(i=fe(t.slice(o)),t=t.slice(0,o)),f(e)?(n=e,e=void 0):e&&"object"==typeof e&&(a="POST"),0<r.length&&x.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done(function(t){s=arguments,r.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).always(n&&function(t,e){r.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var i,a,s,r,o,l,c=x.css(t,"position"),d=x(t),u={};"static"===c&&(t.style.position="relative"),o=d.offset(),s=x.css(t,"top"),l=x.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(s+l).indexOf("auto")?(r=(i=d.position()).top,a=i.left):(r=parseFloat(s)||0,a=parseFloat(l)||0),f(e)&&(e=e.call(t,n,x.extend({},o))),null!=e.top&&(u.top=e.top-o.top+r),null!=e.left&&(u.left=e.left-o.left+a),"using"in e?e.using.call(t,u):d.css(u)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],a={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((a=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),a.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-a.top-x.css(i,"marginTop",!0),left:e.left-a.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||it})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(i){return q(this,function(t,i,a){var s;if(g(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===a)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:a,n?a:s.pageYOffset):t[i]=a},t,i,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=zt(p.pixelPosition,function(t,n){if(n)return n=Ft(t,e),Rt.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){x.fn[i]=function(a,s){var r=arguments.length&&(n||"boolean"!=typeof a),o=n||(!0===a||!0===s?"margin":"border");return q(this,function(e,n,a){var s;return g(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===a?x.css(e,n,o):x.style(e,n,a,o)},e,r?a:void 0,r)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}});var Ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(t,e){var n,i,s;if("string"==typeof e&&(n=t[e],e=t,t=n),f(t))return i=a.call(arguments,2),(s=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||x.guid++,s},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=E,x.isFunction=f,x.isWindow=g,x.camelCase=U,x.type=y,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},x.trim=function(t){return null==t?"":(t+"").replace(Ue,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ge=t.jQuery,Ye=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Ye),e&&t.jQuery===x&&(t.jQuery=Ge),x},void 0===e&&(t.jQuery=t.$=x),x}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,i){return e(n(t),i)}),{left:function(e,n,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){var s=i+a>>>1;t(e[s],n)<0?i=s+1:a=s}return i},right:function(e,n,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){var s=i+a>>>1;t(e[s],n)>0?a=s:i=s+1}return i}}}var i=n(e),a=i.right,s=i.left;function r(t,e){return[t,e]}function o(t){return null===t?NaN:+t}function l(t,e){var n,i,a=t.length,s=0,r=-1,l=0,c=0;if(null==e)for(;++r<a;)isNaN(n=o(t[r]))||(c+=(i=n-l)*(n-(l+=i/++s)));else for(;++r<a;)isNaN(n=o(e(t[r],r,t)))||(c+=(i=n-l)*(n-(l+=i/++s)));if(s>1)return c/(s-1)}function c(t,e){var n=l(t,e);return n?Math.sqrt(n):n}function d(t,e){var n,i,a,s=t.length,r=-1;if(null==e){for(;++r<s;)if(null!=(n=t[r])&&n>=n)for(i=a=n;++r<s;)null!=(n=t[r])&&(i>n&&(i=n),a<n&&(a=n))}else for(;++r<s;)if(null!=(n=e(t[r],r,t))&&n>=n)for(i=a=n;++r<s;)null!=(n=e(t[r],r,t))&&(i>n&&(i=n),a<n&&(a=n));return[i,a]}var u=Array.prototype,h=u.slice,p=u.map;function f(t){return function(){return t}}function g(t){return t}function m(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(a);++i<a;)s[i]=t+i*n;return s}var v=Math.sqrt(50),b=Math.sqrt(10),y=Math.sqrt(2);function w(t,e,n){var i,a,s,r,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),0===(r=x(t,e,n))||!isFinite(r))return[];if(r>0)for(t=Math.ceil(t/r),e=Math.floor(e/r),s=new Array(a=Math.ceil(e-t+1));++o<a;)s[o]=(t+o)*r;else for(t=Math.floor(t*r),e=Math.ceil(e*r),s=new Array(a=Math.ceil(t-e+1));++o<a;)s[o]=(t-o)/r;return i&&s.reverse(),s}function x(t,e,n){var i=(e-t)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,a);return a>=0?(s>=v?10:s>=b?5:s>=y?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(s>=v?10:s>=b?5:s>=y?2:1)}function C(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/a;return s>=v?a*=10:s>=b?a*=5:s>=y&&(a*=2),e<t?-a:a}function k(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function T(t,e,n){if(null==n&&(n=o),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,s=Math.floor(a),r=+n(t[s],s,t);return r+(+n(t[s+1],s+1,t)-r)*(a-s)}}function A(t,e){var n,i,a=t.length,s=-1;if(null==e){for(;++s<a;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<a;)null!=(n=t[s])&&n>i&&(i=n)}else for(;++s<a;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<a;)null!=(n=e(t[s],s,t))&&n>i&&(i=n);return i}function S(t){for(var e,n,i,a=t.length,s=-1,r=0;++s<a;)r+=t[s].length;for(n=new Array(r);--a>=0;)for(e=(i=t[a]).length;--e>=0;)n[--r]=i[e];return n}function E(t,e){var n,i,a=t.length,s=-1;if(null==e){for(;++s<a;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<a;)null!=(n=t[s])&&i>n&&(i=n)}else for(;++s<a;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<a;)null!=(n=e(t[s],s,t))&&i>n&&(i=n);return i}function $(t){if(!(a=t.length))return[];for(var e=-1,n=E(t,D),i=new Array(n);++e<n;)for(var a,s=-1,r=i[e]=new Array(a);++s<a;)r[s]=t[s][e];return i}function D(t){return t.length}var I=Array.prototype.slice;function M(t){return t}var L=1e-6;function P(t){return"translate("+(t+.5)+",0)"}function N(t){return"translate(0,"+(t+.5)+")"}function R(){return!this.__axis}function O(t,e){var n=[],i=null,a=null,s=6,r=6,o=3,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",d=1===t||3===t?P:N;function u(u){var h=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==a?e.tickFormat?e.tickFormat.apply(e,n):M:a,f=Math.max(s,0)+o,g=e.range(),m=+g[0]+.5,v=+g[g.length-1]+.5,b=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),y=u.selection?u.selection():u,w=y.selectAll(".domain").data([null]),x=y.selectAll(".tick").data(h,e).order(),C=x.exit(),k=x.enter().append("g").attr("class","tick"),T=x.select("line"),A=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),T=T.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),A=A.merge(k.append("text").attr("fill","currentColor").attr(c,l*f).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),u!==y&&(w=w.transition(u),x=x.transition(u),T=T.transition(u),A=A.transition(u),C=C.transition(u).attr("opacity",L).attr("transform",function(t){return isFinite(t=b(t))?d(t):this.getAttribute("transform")}),k.attr("opacity",L).attr("transform",function(t){var e=this.parentNode.__axis;return d(e&&isFinite(e=e(t))?e:b(t))})),C.remove(),w.attr("d",4===t||2==t?r?"M"+l*r+","+m+"H0.5V"+v+"H"+l*r:"M0.5,"+m+"V"+v:r?"M"+m+","+l*r+"V0.5H"+v+"V"+l*r:"M"+m+",0.5H"+v),x.attr("opacity",1).attr("transform",function(t){return d(b(t))}),T.attr(c+"2",l*s),A.attr(c,l*f).text(p),y.filter(R).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),y.each(function(){this.__axis=b})}return u.scale=function(t){return arguments.length?(e=t,u):e},u.ticks=function(){return n=I.call(arguments),u},u.tickArguments=function(t){return arguments.length?(n=null==t?[]:I.call(t),u):n.slice()},u.tickValues=function(t){return arguments.length?(i=null==t?null:I.call(t),u):i&&i.slice()},u.tickFormat=function(t){return arguments.length?(a=t,u):a},u.tickSize=function(t){return arguments.length?(s=r=+t,u):s},u.tickSizeInner=function(t){return arguments.length?(s=+t,u):s},u.tickSizeOuter=function(t){return arguments.length?(r=+t,u):r},u.tickPadding=function(t){return arguments.length?(o=+t,u):o},u}var B={value:function(){}};function _(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new F(i)}function F(t){this._=t}function z(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function H(t,e){for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).name===e)return n.value}function q(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=B,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}F.prototype=_.prototype={constructor:F,on:function(t,e){var n,i=this._,a=z(t+"",i),s=-1,r=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(t=a[s]).type)i[n]=q(i[n],t.name,e);else if(null==e)for(n in i)i[n]=q(i[n],t.name,null);return this}for(;++s<r;)if((n=(t=a[s]).type)&&(n=H(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,a=new Array(n),s=0;s<n;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,s=i.length;a<s;++a)i[a].value.apply(e,n)}};var V="http://www.w3.org/1999/xhtml",j={svg:"http://www.w3.org/2000/svg",xhtml:V,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function W(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),j.hasOwnProperty(e)?{space:j[e],local:t}:t}function U(t){var e=W(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===V&&e.documentElement.namespaceURI===V?e.createElement(t):e.createElementNS(n,t)}})(e)}function G(){}function Y(t){return null==t?G:function(){return this.querySelector(t)}}function K(){return[]}function X(t){return null==t?K:function(){return this.querySelectorAll(t)}}function Q(t){return function(){return this.matches(t)}}function J(t){return new Array(t.length)}function Z(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Z.prototype={constructor:Z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tt(t,e,n,i,a,s){for(var r,o=0,l=e.length,c=s.length;o<c;++o)(r=e[o])?(r.__data__=s[o],i[o]=r):n[o]=new Z(t,s[o]);for(;o<l;++o)(r=e[o])&&(a[o]=r)}function et(t,e,n,i,a,s,r){var o,l,c,d={},u=e.length,h=s.length,p=new Array(u);for(o=0;o<u;++o)(l=e[o])&&(p[o]=c="$"+r.call(l,l.__data__,o,e),c in d?a[o]=l:d[c]=l);for(o=0;o<h;++o)(l=d[c="$"+r.call(t,s[o],o,s)])?(i[o]=l,l.__data__=s[o],d[c]=null):n[o]=new Z(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&d[p[o]]===l&&(a[o]=l)}function nt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function it(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function at(t,e){return t.style.getPropertyValue(e)||it(t).getComputedStyle(t,null).getPropertyValue(e)}function st(t){return t.trim().split(/^|\s+/)}function rt(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=st(t.getAttribute("class")||"")}function lt(t,e){for(var n=rt(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function ct(t,e){for(var n=rt(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function dt(){this.textContent=""}function ut(){this.innerHTML=""}function ht(){this.nextSibling&&this.parentNode.appendChild(this)}function pt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ft(){return null}function gt(){var t=this.parentNode;t&&t.removeChild(this)}function mt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}ot.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bt={};function yt(t,e,n){return t=wt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function wt(e,n,i){return function(a){var s=t.event;t.event=a;try{e.call(this,this.__data__,n,i)}finally{t.event=s}}}function xt(t){return function(){var e=this.__on;if(e){for(var n,i=0,a=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?e.length=a:delete this.__on}}}function Ct(t,e,n){var i=bt.hasOwnProperty(t.type)?yt:wt;return function(a,s,r){var o,l=this.__on,c=i(e,s,r);if(l)for(var d=0,u=l.length;d<u;++d)if((o=l[d]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=n),void(o.value=e);this.addEventListener(t.type,c,n),o={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(o):this.__on=[o]}}function kt(e,n,i,a){var s=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,a)}finally{t.event=s}}function Tt(t,e,n){var i=it(t),a=i.CustomEvent;"function"==typeof a?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(bt={mouseenter:"mouseover",mouseleave:"mouseout"}));var At=[null];function St(t,e){this._groups=t,this._parents=e}function Et(){return new St([[document.documentElement]],At)}function $t(t){return"string"==typeof t?new St([[document.querySelector(t)]],[document.documentElement]):new St([[t]],At)}St.prototype=Et.prototype={constructor:St,select:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r,o=e[a],l=o.length,c=i[a]=new Array(l),d=0;d<l;++d)(s=o[d])&&(r=t.call(s,s.__data__,d,o))&&("__data__"in s&&(r.__data__=s.__data__),c[d]=r);return new St(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,i=[],a=[],s=0;s<n;++s)for(var r,o=e[s],l=o.length,c=0;c<l;++c)(r=o[c])&&(i.push(t.call(r,r.__data__,c,o)),a.push(r));return new St(i,a)},filter:function(t){"function"!=typeof t&&(t=Q(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r=e[a],o=r.length,l=i[a]=[],c=0;c<o;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&l.push(s);return new St(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var n=e?et:tt,i=this._parents,a=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=a.length,r=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var d=i[c],u=a[c],h=u.length,p=t.call(d,d&&d.__data__,c,i),f=p.length,g=o[c]=new Array(f),m=r[c]=new Array(f);n(d,u,g,m,l[c]=new Array(h),p,e);for(var v,b,y=0,w=0;y<f;++y)if(v=g[y]){for(y>=w&&(w=y+1);!(b=m[w])&&++w<f;);v._next=b||null}}return(r=new St(r,i))._enter=o,r._exit=l,r},enter:function(){return new St(this._enter||this._groups.map(J),this._parents)},exit:function(){return new St(this._exit||this._groups.map(J),this._parents)},join:function(t,e,n){var i=this.enter(),a=this,s=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(a=e(a)),null==n?s.remove():n(s),i&&a?i.merge(a).order():a},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,a=n.length,s=Math.min(i,a),r=new Array(i),o=0;o<s;++o)for(var l,c=e[o],d=n[o],u=c.length,h=r[o]=new Array(u),p=0;p<u;++p)(l=c[p]||d[p])&&(h[p]=l);for(;o<i;++o)r[o]=e[o];return new St(r,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,a=t[e],s=a.length-1,r=a[s];--s>=0;)(i=a[s])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=nt);for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var r,o=n[s],l=o.length,c=a[s]=new Array(l),d=0;d<l;++d)(r=o[d])&&(c[d]=r);c.sort(e)}return new St(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,s=i.length;a<s;++a){var r=i[a];if(r)return r}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a,s=e[n],r=0,o=s.length;r<o;++r)(a=s[r])&&t.call(a,a.__data__,r,s);return this},attr:function(t,e){var n=W(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):at(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=st(t+"");if(arguments.length<2){for(var i=rt(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?lt:ct)(this,t)}}:e?function(t){return function(){lt(this,t)}}:function(t){return function(){ct(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?dt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ut:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(ht)},lower:function(){return this.each(pt)},append:function(t){var e="function"==typeof t?t:U(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:U(t),i=null==e?ft:"function"==typeof e?e:Y(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(gt)},clone:function(t){return this.select(t?vt:mt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,a,s=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),r=s.length;if(!(arguments.length<2)){for(o=e?Ct:xt,null==n&&(n=!1),i=0;i<r;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var l,c=0,d=o.length;c<d;++c)for(i=0,l=o[c];i<r;++i)if((a=s[i]).type===l.type&&a.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Tt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Tt(this,t,e)}})(t,e))}};var Dt=0;function It(){return new Mt}function Mt(){this._="@"+(++Dt).toString(36)}function Lt(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function Pt(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function Nt(t){var e=Lt();return e.changedTouches&&(e=e.changedTouches[0]),Pt(t,e)}function Rt(t,e,n){arguments.length<3&&(n=e,e=Lt().changedTouches);for(var i,a=0,s=e?e.length:0;a<s;++a)if((i=e[a]).identifier===n)return Pt(t,i);return null}function Ot(){t.event.stopImmediatePropagation()}function Bt(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function _t(t){var e=t.document.documentElement,n=$t(t).on("dragstart.drag",Bt,!0);"onselectstart"in e?n.on("selectstart.drag",Bt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ft(t,e){var n=t.document.documentElement,i=$t(t).on("dragstart.drag",null);e&&(i.on("click.drag",Bt,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function zt(t){return function(){return t}}function Ht(t,e,n,i,a,s,r,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=s,this.y=r,this.dx=o,this.dy=l,this._=c}function qt(){return!t.event.ctrlKey&&!t.event.button}function Vt(){return this.parentNode}function jt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Wt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ut(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Yt(){}Mt.prototype=It.prototype={constructor:Mt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Ht.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Kt="\\s*([+-]?\\d+)\\s*",Xt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jt=/^#([0-9a-f]{3,8})$/,Zt=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),te=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),ee=new RegExp("^rgba\\("+[Kt,Kt,Kt,Xt]+"\\)$"),ne=new RegExp("^rgba\\("+[Qt,Qt,Qt,Xt]+"\\)$"),ie=new RegExp("^hsl\\("+[Xt,Qt,Qt]+"\\)$"),ae=new RegExp("^hsla\\("+[Xt,Qt,Qt,Xt]+"\\)$"),se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function re(){return this.rgb().formatHex()}function oe(){return this.rgb().formatRgb()}function le(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Jt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ce(e):3===n?new pe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?de(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?de(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Zt.exec(t))?new pe(e[1],e[2],e[3],1):(e=te.exec(t))?new pe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ee.exec(t))?de(e[1],e[2],e[3],e[4]):(e=ne.exec(t))?de(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ie.exec(t))?ve(e[1],e[2]/100,e[3]/100,1):(e=ae.exec(t))?ve(e[1],e[2]/100,e[3]/100,e[4]):se.hasOwnProperty(t)?ce(se[t]):"transparent"===t?new pe(NaN,NaN,NaN,0):null}function ce(t){return new pe(t>>16&255,t>>8&255,255&t,1)}function de(t,e,n,i){return i<=0&&(t=e=n=NaN),new pe(t,e,n,i)}function ue(t){return t instanceof Yt||(t=le(t)),t?new pe((t=t.rgb()).r,t.g,t.b,t.opacity):new pe}function he(t,e,n,i){return 1===arguments.length?ue(t):new pe(t,e,n,null==i?1:i)}function pe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function fe(){return"#"+me(this.r)+me(this.g)+me(this.b)}function ge(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function me(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ve(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new we(t,e,n,i)}function be(t){if(t instanceof we)return new we(t.h,t.s,t.l,t.opacity);if(t instanceof Yt||(t=le(t)),!t)return new we;if(t instanceof we)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),s=Math.max(e,n,i),r=NaN,o=s-a,l=(s+a)/2;return o?(r=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=l<.5?s+a:2-s-a,r*=60):o=l>0&&l<1?0:r,new we(r,o,l,t.opacity)}function ye(t,e,n,i){return 1===arguments.length?be(t):new we(t,e,n,null==i?1:i)}function we(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function xe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ut(Yt,le,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:re,formatHex:re,formatHsl:function(){return be(this).formatHsl()},formatRgb:oe,toString:oe}),Ut(pe,he,Gt(Yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fe,formatHex:fe,formatRgb:ge,toString:ge})),Ut(we,ye,Gt(Yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new we(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new we(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new pe(xe(t>=240?t-240:t+120,a,i),xe(t,a,i),xe(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ce=Math.PI/180,ke=180/Math.PI,Te=.96422,Ae=.82521,Se=4/29,Ee=6/29,$e=3*Ee*Ee;function De(t){if(t instanceof Me)return new Me(t.l,t.a,t.b,t.opacity);if(t instanceof _e)return Fe(t);t instanceof pe||(t=ue(t));var e,n,i=Re(t.r),a=Re(t.g),s=Re(t.b),r=Le((.2225045*i+.7168786*a+.0606169*s)/1);return i===a&&a===s?e=n=r:(e=Le((.4360747*i+.3850649*a+.1430804*s)/Te),n=Le((.0139322*i+.0971045*a+.7141733*s)/Ae)),new Me(116*r-16,500*(e-r),200*(r-n),t.opacity)}function Ie(t,e,n,i){return 1===arguments.length?De(t):new Me(t,e,n,null==i?1:i)}function Me(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Le(t){return t>.008856451679035631?Math.pow(t,1/3):t/$e+Se}function Pe(t){return t>Ee?t*t*t:$e*(t-Se)}function Ne(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Re(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oe(t){if(t instanceof _e)return new _e(t.h,t.c,t.l,t.opacity);if(t instanceof Me||(t=De(t)),0===t.a&&0===t.b)return new _e(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ke;return new _e(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Be(t,e,n,i){return 1===arguments.length?Oe(t):new _e(t,e,n,null==i?1:i)}function _e(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Fe(t){if(isNaN(t.h))return new Me(t.l,0,0,t.opacity);var e=t.h*Ce;return new Me(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ut(Me,Ie,Gt(Yt,{brighter:function(t){return new Me(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Me(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new pe(Ne(3.1338561*(e=Te*Pe(e))-1.6168667*(t=1*Pe(t))-.4906146*(n=Ae*Pe(n))),Ne(-.9787684*e+1.9161415*t+.033454*n),Ne(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ut(_e,Be,Gt(Yt,{brighter:function(t){return new _e(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new _e(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Fe(this).rgb()}}));var ze=-.14861,He=1.78277,qe=-.29227,Ve=-.90649,je=1.97294,We=je*Ve,Ue=je*He,Ge=He*qe-Ve*ze;function Ye(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ke)return new Ke(t.h,t.s,t.l,t.opacity);t instanceof pe||(t=ue(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(Ge*i+We*e-Ue*n)/(Ge+We-Ue),s=i-a,r=(je*(n-a)-qe*s)/Ve,o=Math.sqrt(r*r+s*s)/(je*a*(1-a)),l=o?Math.atan2(r,s)*ke-120:NaN;return new Ke(l<0?l+360:l,o,a,t.opacity)}(t):new Ke(t,e,n,null==i?1:i)}function Ke(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Xe(t,e,n,i,a){var s=t*t,r=s*t;return((1-3*t+3*s-r)*e+(4-6*s+3*r)*n+(1+3*t+3*s-3*r)*i+r*a)/6}function Qe(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],s=t[i+1],r=i>0?t[i-1]:2*a-s,o=i<e-1?t[i+2]:2*s-a;return Xe((n-i/e)*e,r,a,s,o)}}function Je(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],s=t[i%e],r=t[(i+1)%e],o=t[(i+2)%e];return Xe((n-i/e)*e,a,s,r,o)}}function Ze(t){return function(){return t}}function tn(t,e){return function(n){return t+n*e}}function en(t,e){var n=e-t;return n?tn(t,n>180||n<-180?n-360*Math.round(n/360):n):Ze(isNaN(t)?e:t)}function nn(t,e){var n=e-t;return n?tn(t,n):Ze(isNaN(t)?e:t)}Ut(Ke,Ye,Gt(Yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ce,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new pe(255*(e+n*(ze*i+He*a)),255*(e+n*(qe*i+Ve*a)),255*(e+n*(je*i)),this.opacity)}}));var an=function t(e){var n=function(t){return 1==(t=+t)?nn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Ze(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=he(t)).r,(e=he(e)).r),a=n(t.g,e.g),s=n(t.b,e.b),r=nn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=a(e),t.b=s(e),t.opacity=r(e),t+""}}return i.gamma=t,i}(1);function sn(t){return function(e){var n,i,a=e.length,s=new Array(a),r=new Array(a),o=new Array(a);for(n=0;n<a;++n)i=he(e[n]),s[n]=i.r||0,r[n]=i.g||0,o[n]=i.b||0;return s=t(s),r=t(r),o=t(o),i.opacity=1,function(t){return i.r=s(t),i.g=r(t),i.b=o(t),i+""}}}var rn=sn(Qe),on=sn(Je);function ln(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,a=e.slice();return function(s){for(n=0;n<i;++n)a[n]=t[n]*(1-s)+e[n]*s;return a}}function cn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dn(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,s=new Array(a),r=new Array(i);for(n=0;n<a;++n)s[n]=vn(t[n],e[n]);for(;n<i;++n)r[n]=e[n];return function(t){for(n=0;n<a;++n)r[n]=s[n](t);return r}}function un(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function hn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pn(t,e){var n,i={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=vn(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}}var fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gn=new RegExp(fn.source,"g");function mn(t,e){var n,i,a,s=fn.lastIndex=gn.lastIndex=0,r=-1,o=[],l=[];for(t+="",e+="";(n=fn.exec(t))&&(i=gn.exec(e));)(a=i.index)>s&&(a=e.slice(s,a),o[r]?o[r]+=a:o[++r]=a),(n=n[0])===(i=i[0])?o[r]?o[r]+=i:o[++r]=i:(o[++r]=null,l.push({i:r,x:hn(n,i)})),s=gn.lastIndex;return s<e.length&&(a=e.slice(s),o[r]?o[r]+=a:o[++r]=a),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)o[(n=l[i]).i]=n.x(t);return o.join("")})}function vn(t,e){var n,i=typeof e;return null==e||"boolean"===i?Ze(e):("number"===i?hn:"string"===i?(n=le(e))?(e=n,an):mn:e instanceof le?an:e instanceof Date?un:cn(e)?ln:Array.isArray(e)?dn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?pn:hn)(t,e)}function bn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var yn,wn,xn,Cn,kn=180/Math.PI,Tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function An(t,e,n,i,a,s){var r,o,l;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,r=-r),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*kn,skewX:Math.atan(l)*kn,scaleX:r,scaleY:o}}function Sn(t,e,n,i){function a(t){return t.length?t.pop()+" ":""}return function(s,r){var o=[],l=[];return s=t(s),r=t(r),function(t,i,a,s,r,o){if(t!==a||i!==s){var l=r.push("translate(",null,e,null,n);o.push({i:l-4,x:hn(t,a)},{i:l-2,x:hn(i,s)})}else(a||s)&&r.push("translate("+a+e+s+n)}(s.translateX,s.translateY,r.translateX,r.translateY,o,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(a(n)+"rotate(",null,i)-2,x:hn(t,e)})):e&&n.push(a(n)+"rotate("+e+i)}(s.rotate,r.rotate,o,l),function(t,e,n,s){t!==e?s.push({i:n.push(a(n)+"skewX(",null,i)-2,x:hn(t,e)}):e&&n.push(a(n)+"skewX("+e+i)}(s.skewX,r.skewX,o,l),function(t,e,n,i,s,r){if(t!==n||e!==i){var o=s.push(a(s)+"scale(",null,",",null,")");r.push({i:o-4,x:hn(t,n)},{i:o-2,x:hn(e,i)})}else 1===n&&1===i||s.push(a(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,r.scaleX,r.scaleY,o,l),s=r=null,function(t){for(var e,n=-1,i=l.length;++n<i;)o[(e=l[n]).i]=e.x(t);return o.join("")}}}var En=Sn(function(t){return"none"===t?Tn:(yn||(yn=document.createElement("DIV"),wn=document.documentElement,xn=document.defaultView),yn.style.transform=t,t=xn.getComputedStyle(wn.appendChild(yn),null).getPropertyValue("transform"),wn.removeChild(yn),An(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),$n=Sn(function(t){return null==t?Tn:(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",t),(t=Cn.transform.baseVal.consolidate())?An((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Tn)},", ",")",")"),Dn=Math.SQRT2;function In(t){return((t=Math.exp(t))+1/t)/2}function Mn(t,e){var n,i,a=t[0],s=t[1],r=t[2],o=e[0],l=e[1],c=e[2],d=o-a,u=l-s,h=d*d+u*u;if(h<1e-12)i=Math.log(c/r)/Dn,n=function(t){return[a+t*d,s+t*u,r*Math.exp(Dn*t*i)]};else{var p=Math.sqrt(h),f=(c*c-r*r+4*h)/(2*r*2*p),g=(c*c-r*r-4*h)/(2*c*2*p),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Dn,n=function(t){var e=t*i,n=In(m),o=r/(2*p)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Dn*e+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[a+o*d,s+o*u,r*n/In(Dn*e+m)]}}return n.duration=1e3*i,n}function Ln(t){return function(e,n){var i=t((e=ye(e)).h,(n=ye(n)).h),a=nn(e.s,n.s),s=nn(e.l,n.l),r=nn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=s(t),e.opacity=r(t),e+""}}}var Pn=Ln(en),Nn=Ln(nn);function Rn(t){return function(e,n){var i=t((e=Be(e)).h,(n=Be(n)).h),a=nn(e.c,n.c),s=nn(e.l,n.l),r=nn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=a(t),e.l=s(t),e.opacity=r(t),e+""}}}var On=Rn(en),Bn=Rn(nn);function _n(t){return function e(n){function i(e,i){var a=t((e=Ye(e)).h,(i=Ye(i)).h),s=nn(e.s,i.s),r=nn(e.l,i.l),o=nn(e.opacity,i.opacity);return function(t){return e.h=a(t),e.s=s(t),e.l=r(Math.pow(t,n)),e.opacity=o(t),e+""}}return n=+n,i.gamma=e,i}(1)}var Fn,zn,Hn=_n(en),qn=_n(nn),Vn=0,jn=0,Wn=0,Un=0,Gn=0,Yn=0,Kn="object"==typeof performance&&performance.now?performance:Date,Xn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qn(){return Gn||(Xn(Jn),Gn=Kn.now()+Yn)}function Jn(){Gn=0}function Zn(){this._call=this._time=this._next=null}function ti(t,e,n){var i=new Zn;return i.restart(t,e,n),i}function ei(){Qn(),++Vn;for(var t,e=Fn;e;)(t=Gn-e._time)>=0&&e._call.call(null,t),e=e._next;--Vn}function ni(){Gn=(Un=Kn.now())+Yn,Vn=jn=0;try{ei()}finally{Vn=0,function(){for(var t,e,n=Fn,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Fn=e);zn=t,ai(i)}(),Gn=0}}function ii(){var t=Kn.now(),e=t-Un;e>1e3&&(Yn-=e,Un=t)}function ai(t){Vn||(jn&&(jn=clearTimeout(jn)),t-Gn>24?(t<1/0&&(jn=setTimeout(ni,t-Kn.now()-Yn)),Wn&&(Wn=clearInterval(Wn))):(Wn||(Un=Kn.now(),Wn=setInterval(ii,1e3)),Vn=1,Xn(ni)))}function si(t,e,n){var i=new Zn;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}Zn.prototype=ti.prototype={constructor:Zn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qn():+n)+(null==e?0:+e),this._next||zn===this||(zn?zn._next=this:Fn=this,zn=this),this._call=t,this._time=n,ai()},stop:function(){this._call&&(this._call=null,this._time=1/0,ai())}};var ri=_("start","end","cancel","interrupt"),oi=[];function li(t,e,n,i,a,s){var r=t.__transition;if(r){if(n in r)return}else t.__transition={};!function(t,e,n){var i,a=t.__transition;function s(l){var c,d,u,h;if(1!==n.state)return o();for(c in a)if((h=a[c]).name===n.name){if(3===h.state)return si(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete a[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete a[c])}if(si(function(){3===n.state&&(n.state=4,n.timer.restart(r,n.delay,n.time),r(l))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function r(e){for(var a=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=5,1),s=-1,r=i.length;++s<r;)i[s].call(t,a);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var i in n.state=6,n.timer.stop(),delete a[e],a)return;delete t.__transition}a[e]=n,n.timer=ti(function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:a,on:ri,tween:oi,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function ci(t,e){var n=ui(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function di(t,e){var n=ui(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ui(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function hi(t,e){var n,i,a,s=t.__transition,r=!0;if(s){for(a in e=null==e?null:e+"",s)(n=s[a]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[a]):r=!1;r&&delete t.__transition}}function pi(t,e,n){var i=t._id;return t.each(function(){var t=di(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ui(t,i).value[e]}}function fi(t,e){var n;return("number"==typeof e?hn:e instanceof le?an:(n=le(e))?(e=n,an):mn)(t,e)}var gi=Et.prototype.constructor;function mi(t){return function(){this.style.removeProperty(t)}}var vi=0;function bi(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function yi(t){return Et().transition(t)}function wi(){return++vi}var xi=Et.prototype;function Ci(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function ki(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}bi.prototype=yi.prototype={constructor:bi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Y(t));for(var i=this._groups,a=i.length,s=new Array(a),r=0;r<a;++r)for(var o,l,c=i[r],d=c.length,u=s[r]=new Array(d),h=0;h<d;++h)(o=c[h])&&(l=t.call(o,o.__data__,h,c))&&("__data__"in o&&(l.__data__=o.__data__),u[h]=l,li(u[h],e,n,h,u,ui(o,n)));return new bi(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=X(t));for(var i=this._groups,a=i.length,s=[],r=[],o=0;o<a;++o)for(var l,c=i[o],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,p=t.call(l,l.__data__,u,c),f=ui(l,n),g=0,m=p.length;g<m;++g)(h=p[g])&&li(h,e,n,g,p,f);s.push(p),r.push(l)}return new bi(s,r,e,n)},filter:function(t){"function"!=typeof t&&(t=Q(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s,r=e[a],o=r.length,l=i[a]=[],c=0;c<o;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&l.push(s);return new bi(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,s=Math.min(i,a),r=new Array(i),o=0;o<s;++o)for(var l,c=e[o],d=n[o],u=c.length,h=r[o]=new Array(u),p=0;p<u;++p)(l=c[p]||d[p])&&(h[p]=l);for(;o<i;++o)r[o]=e[o];return new bi(r,this._parents,this._name,this._id)},selection:function(){return new gi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=wi(),i=this._groups,a=i.length,s=0;s<a;++s)for(var r,o=i[s],l=o.length,c=0;c<l;++c)if(r=o[c]){var d=ui(r,e);li(r,t,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new bi(i,this._parents,t,n)},call:xi.call,nodes:xi.nodes,node:xi.node,size:xi.size,empty:xi.empty,each:xi.each,on:function(t,e){var n=this._id;return arguments.length<2?ui(this.node(),n).on.on(t):this.each(function(t,e,n){var i,a,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?ci:di;return function(){var r=s(this,t),o=r.on;o!==i&&(a=(i=o).copy()).on(e,n),r.on=a}}(n,t,e))},attr:function(t,e){var n=W(t),i="transform"===n?$n:fi;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,a,s;return function(){var r,o,l=n(this);if(null!=l)return(r=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:r===i&&o===a?s:(a=o,s=e(i=r,l));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var i,a,s;return function(){var r,o,l=n(this);if(null!=l)return(r=this.getAttribute(t))===(o=l+"")?null:r===i&&o===a?s:(a=o,s=e(i=r,l));this.removeAttribute(t)}})(n,i,pi(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,a,s=n+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===s?null:r===i?a:a=e(i=r,n)}}:function(t,e,n){var i,a,s=n+"";return function(){var r=this.getAttribute(t);return r===s?null:r===i?a:a=e(i=r,n)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=W(t);return this.tween(n,(i.local?function(t,e){var n,i;function a(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,a)),n}return a._value=e,a}:function(t,e){var n,i;function a(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,a)),n}return a._value=e,a})(i,e))},style:function(t,e,n){var i="transform"==(t+="")?En:fi;return null==e?this.styleTween(t,function(t,e){var n,i,a;return function(){var s=at(this,t),r=(this.style.removeProperty(t),at(this,t));return s===r?null:s===n&&r===i?a:a=e(n=s,i=r)}}(t,i)).on("end.style."+t,mi(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,a,s;return function(){var r=at(this,t),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=at(this,t)),r===l?null:r===i&&l===a?s:(a=l,s=e(i=r,o))}}(t,i,pi(this,"style."+t,e))).each(function(t,e){var n,i,a,s,r="style."+e,o="end."+r;return function(){var l=di(this,t),c=l.on,d=null==l.value[r]?s||(s=mi(e)):void 0;c===n&&a===d||(i=(n=c).copy()).on(o,a=d),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,a,s=n+"";return function(){var r=at(this,t);return r===s?null:r===i?a:a=e(i=r,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,a;function s(){var s=e.apply(this,arguments);return s!==a&&(i=(a=s)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,s,n)),i}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(pi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,a=ui(this.node(),n).tween,s=0,r=a.length;s<r;++s)if((i=a[s]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var a=di(this,t),s=a.tween;if(s!==n)for(var r=0,o=(i=n=s).length;r<o;++r)if(i[r].name===e){(i=i.slice()).splice(r,1);break}a.tween=i}}:function(t,e,n){var i,a;if("function"!=typeof n)throw new Error;return function(){var s=di(this,t),r=s.tween;if(r!==i){a=(i=r).slice();for(var o={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=o;break}l===c&&a.push(o)}s.tween=a}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ci(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ci(this,t).delay=e}})(e,t)):ui(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){di(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){di(this,t).duration=e}})(e,t)):ui(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){di(this,t).ease=e}}(e,t)):ui(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(s,r){var o={value:r},l={value:function(){0==--a&&s()}};n.each(function(){var n=di(this,i),a=n.on;a!==t&&((e=(t=a).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),n.on=e})})}};var Ti=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Ai=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Si=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Ei=Math.PI,$i=Ei/2;function Di(t){return(1-Math.cos(Ei*t))/2}function Ii(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Mi(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Li=4/11,Pi=7.5625;function Ni(t){return(t=+t)<Li?Pi*t*t:t<.7272727272727273?Pi*(t-=.5454545454545454)*t+.75:t<.9090909090909091?Pi*(t-=.8181818181818182)*t+.9375:Pi*(t-=.9545454545454546)*t+.984375}var Ri=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Oi=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Bi=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),_i=2*Math.PI,Fi=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=_i);function a(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return a.amplitude=function(e){return t(e,n*_i)},a.period=function(n){return t(e,n)},a}(1,.3),zi=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=_i);function a(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return a.amplitude=function(e){return t(e,n*_i)},a.period=function(n){return t(e,n)},a}(1,.3),Hi=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=_i);function a(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return a.amplitude=function(e){return t(e,n*_i)},a.period=function(n){return t(e,n)},a}(1,.3),qi={time:null,delay:0,duration:250,ease:ki};function Vi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return qi.time=Qn(),qi;return n}Et.prototype.interrupt=function(t){return this.each(function(){hi(this,t)})},Et.prototype.transition=function(t){var e,n;t instanceof bi?(e=t._id,t=t._name):(e=wi(),(n=qi).time=Qn(),t=null==t?null:t+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var r,o=i[s],l=o.length,c=0;c<l;++c)(r=o[c])&&li(r,t,e,c,o,n||Vi(r,e));return new bi(i,this._parents,t,e)};var ji=[null];function Wi(t){return function(){return t}}function Ui(t,e,n){this.target=t,this.type=e,this.selection=n}function Gi(){t.event.stopImmediatePropagation()}function Yi(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var Ki={name:"drag"},Xi={name:"space"},Qi={name:"handle"},Ji={name:"center"};function Zi(t){return[+t[0],+t[1]]}function ta(t){return[Zi(t[0]),Zi(t[1])]}var ea={name:"x",handles:["w","e"].map(ca),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},na={name:"y",handles:["n","s"].map(ca),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ia={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ca),input:function(t){return null==t?null:ta(t)},output:function(t){return t}},aa={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ra={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},oa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},la={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ca(t){return{type:t}}function da(){return!t.event.ctrlKey&&!t.event.button}function ua(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ha(){return navigator.maxTouchPoints||"ontouchstart"in this}function pa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function fa(e){var n,i=ua,a=da,s=ha,r=!0,o=_("start","brush","end"),l=6;function c(t){var n=t.property("__brush",m).selectAll(".overlay").data([ca("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",aa.overlay).merge(n).each(function(){var t=pa(this).extent;$t(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([ca("selection")]).enter().append("rect").attr("class","selection").attr("cursor",aa.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return aa[t.type]}),t.each(d).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(s).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){var t=$t(this),e=pa(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function p(){if((!n||t.event.touches)&&a.apply(this,arguments)){var i,s,o,l,c,h,p,f,g,m,v,b,y=this,w=t.event.target.__data__.type,x="selection"===(r&&t.event.metaKey?w="overlay":w)?Ki:r&&t.event.altKey?Ji:Qi,C=e===na?null:oa[w],k=e===ea?null:la[w],T=pa(y),A=T.extent,S=T.selection,E=A[0][0],$=A[0][1],D=A[1][0],I=A[1][1],M=0,L=0,P=C&&k&&r&&t.event.shiftKey,N=t.event.touches?(b=t.event.changedTouches[0].identifier,function(e){return Rt(e,t.event.touches,b)}):Nt,R=N(y),O=R,B=u(y,arguments,!0).beforestart();"overlay"===w?(S&&(g=!0),T.selection=S=[[i=e===na?E:R[0],o=e===ea?$:R[1]],[c=e===na?D:i,p=e===ea?I:o]]):(i=S[0][0],o=S[0][1],c=S[1][0],p=S[1][1]),s=i,l=o,h=c,f=p;var _=$t(y).attr("pointer-events","none"),F=_.selectAll(".overlay").attr("cursor",aa[w]);if(t.event.touches)B.moved=H,B.ended=V;else{var z=$t(t.event.view).on("mousemove.brush",H,!0).on("mouseup.brush",V,!0);r&&z.on("keydown.brush",function(){switch(t.event.keyCode){case 16:P=C&&k;break;case 18:x===Qi&&(C&&(c=h-M*C,i=s+M*C),k&&(p=f-L*k,o=l+L*k),x=Ji,q());break;case 32:x!==Qi&&x!==Ji||(C<0?c=h-M:C>0&&(i=s-M),k<0?p=f-L:k>0&&(o=l-L),x=Xi,F.attr("cursor",aa.selection),q());break;default:return}Yi()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:P&&(m=v=P=!1,q());break;case 18:x===Ji&&(C<0?c=h:C>0&&(i=s),k<0?p=f:k>0&&(o=l),x=Qi,q());break;case 32:x===Xi&&(t.event.altKey?(C&&(c=h-M*C,i=s+M*C),k&&(p=f-L*k,o=l+L*k),x=Ji):(C<0?c=h:C>0&&(i=s),k<0?p=f:k>0&&(o=l),x=Qi),F.attr("cursor",aa[w]),q());break;default:return}Yi()},!0),_t(t.event.view)}Gi(),hi(y),d.call(y),B.start()}function H(){var t=N(y);!P||m||v||(Math.abs(t[0]-O[0])>Math.abs(t[1]-O[1])?v=!0:m=!0),O=t,g=!0,Yi(),q()}function q(){var t;switch(M=O[0]-R[0],L=O[1]-R[1],x){case Xi:case Ki:C&&(M=Math.max(E-i,Math.min(D-c,M)),s=i+M,h=c+M),k&&(L=Math.max($-o,Math.min(I-p,L)),l=o+L,f=p+L);break;case Qi:C<0?(M=Math.max(E-i,Math.min(D-i,M)),s=i+M,h=c):C>0&&(M=Math.max(E-c,Math.min(D-c,M)),s=i,h=c+M),k<0?(L=Math.max($-o,Math.min(I-o,L)),l=o+L,f=p):k>0&&(L=Math.max($-p,Math.min(I-p,L)),l=o,f=p+L);break;case Ji:C&&(s=Math.max(E,Math.min(D,i-M*C)),h=Math.max(E,Math.min(D,c+M*C))),k&&(l=Math.max($,Math.min(I,o-L*k)),f=Math.max($,Math.min(I,p+L*k)))}h<s&&(C*=-1,t=i,i=c,c=t,t=s,s=h,h=t,w in sa&&F.attr("cursor",aa[w=sa[w]])),f<l&&(k*=-1,t=o,o=p,p=t,t=l,l=f,f=t,w in ra&&F.attr("cursor",aa[w=ra[w]])),T.selection&&(S=T.selection),m&&(s=S[0][0],h=S[1][0]),v&&(l=S[0][1],f=S[1][1]),S[0][0]===s&&S[0][1]===l&&S[1][0]===h&&S[1][1]===f||(T.selection=[[s,l],[h,f]],d.call(y),B.brush())}function V(){if(Gi(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500)}else Ft(t.event.view,g),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);_.attr("pointer-events","all"),F.attr("cursor",aa.overlay),T.selection&&(S=T.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(S)&&(T.selection=null,d.call(y)),B.end()}}function f(){u(this,arguments).moved()}function g(){u(this,arguments).ended()}function m(){var t=this.__brush||{selection:null};return t.extent=ta(i.apply(this,arguments)),t.dim=e,t}return c.move=function(t,n){t.selection?t.on("start.brush",function(){u(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){u(this,arguments).end()}).tween("brush",function(){var t=this,i=t.__brush,a=u(t,arguments),s=i.selection,r=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),o=vn(s,r);function l(e){i.selection=1===e&&null===r?null:o(e),d.call(t),a.brush()}return null!==s&&null!==r?l:l(1)}):t.each(function(){var t=this,i=arguments,a=t.__brush,s=e.input("function"==typeof n?n.apply(t,i):n,a.extent),r=u(t,i).beforestart();hi(t),a.selection=null===s?null:s,d.call(t),r.start().brush().end()})},c.clear=function(t){c.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){kt(new Ui(c,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},c.extent=function(t){return arguments.length?(i="function"==typeof t?t:Wi(ta(t)),c):i},c.filter=function(t){return arguments.length?(a="function"==typeof t?t:Wi(!!t),c):a},c.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Wi(!!t),c):s},c.handleSize=function(t){return arguments.length?(l=+t,c):l},c.keyModifiers=function(t){return arguments.length?(r=!!t,c):r},c.on=function(){var t=o.on.apply(o,arguments);return t===o?c:t},c}var ga=Math.cos,ma=Math.sin,va=Math.PI,ba=va/2,ya=2*va,wa=Math.max;function xa(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Ca=Array.prototype.slice;function ka(t){return function(){return t}}var Ta=Math.PI,Aa=2*Ta,Sa=Aa-1e-6;function Ea(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function $a(){return new Ea}function Da(t){return t.source}function Ia(t){return t.target}function Ma(t){return t.radius}function La(t){return t.startAngle}function Pa(t){return t.endAngle}function Na(){}function Ra(t,e){var n=new Na;if(t instanceof Na)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,s=t.length;if(null==e)for(;++a<s;)n.set(a,t[a]);else for(;++a<s;)n.set(e(i=t[a],a,t),i)}else if(t)for(var r in t)n.set(r,t[r]);return n}function Oa(){return{}}function Ba(t,e,n){t[e]=n}function _a(){return Ra()}function Fa(t,e,n){t.set(e,n)}function za(){}Ea.prototype=$a.prototype={constructor:Ea,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+s)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var s=this._x1,r=this._y1,o=n-t,l=i-e,c=s-t,d=r-e,u=c*c+d*d;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>1e-6)if(Math.abs(d*o-l*c)>1e-6&&a){var h=n-s,p=i-r,f=o*o+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(u),b=a*Math.tan((Ta-Math.acos((f+u-g)/(2*m*v)))/2),y=b/v,w=b/m;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*c)+","+(e+y*d)),this._+="A"+a+","+a+",0,0,"+ +(d*h>c*p)+","+(this._x1=t+w*o)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,a,s){t=+t,e=+e,s=!!s;var r=(n=+n)*Math.cos(i),o=n*Math.sin(i),l=t+r,c=e+o,d=1^s,u=s?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(u<0&&(u=u%Aa+Aa),u>Sa?this._+="A"+n+","+n+",0,1,"+d+","+(t-r)+","+(e-o)+"A"+n+","+n+",0,1,"+d+","+(this._x1=l)+","+(this._y1=c):u>1e-6&&(this._+="A"+n+","+n+",0,"+ +(u>=Ta)+","+d+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},Na.prototype=Ra.prototype={constructor:Na,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ha=Ra.prototype;function qa(t,e){var n=new za;if(t instanceof za)t.each(function(t){n.add(t)});else if(t){var i=-1,a=t.length;if(null==e)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}za.prototype=qa.prototype={constructor:za,has:Ha.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ha.remove,clear:Ha.clear,values:Ha.keys,size:Ha.size,empty:Ha.empty,each:Ha.each};var Va=Array.prototype.slice;function ja(t,e){return t-e}function Wa(t){return function(){return t}}function Ua(t,e){for(var n,i=-1,a=e.length;++i<a;)if(n=Ga(t,e[i]))return n;return 0}function Ga(t,e){for(var n=e[0],i=e[1],a=-1,s=0,r=t.length,o=r-1;s<r;o=s++){var l=t[s],c=l[0],d=l[1],u=t[o],h=u[0],p=u[1];if(Ya(l,u,e))return 0;d>i!=p>i&&n<(h-c)*(i-d)/(p-d)+c&&(a=-a)}return a}function Ya(t,e,n){var i,a,s,r;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(a=t[i=+(t[0]===e[0])],s=n[i],r=e[i],a<=s&&s<=r||r<=s&&s<=a)}function Ka(){}var Xa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Qa(){var t=1,e=1,n=k,i=o;function a(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(ja);else{var i=d(t),a=i[0],r=i[1];e=C(a,r,e),e=m(Math.floor(a/e)*e,Math.floor(r/e)*e,e)}return e.map(function(e){return s(t,e)})}function s(n,a){var s=[],o=[];return function(n,i,a){var s,o,l,c,d,u,h=new Array,p=new Array;for(s=o=-1,c=n[0]>=i,Xa[c<<1].forEach(f);++s<t-1;)l=c,c=n[s+1]>=i,Xa[l|c<<1].forEach(f);for(Xa[c<<0].forEach(f);++o<e-1;){for(s=-1,c=n[o*t+t]>=i,d=n[o*t]>=i,Xa[c<<1|d<<2].forEach(f);++s<t-1;)l=c,c=n[o*t+t+s+1]>=i,u=d,d=n[o*t+s+1]>=i,Xa[l|c<<1|d<<2|u<<3].forEach(f);Xa[c|d<<3].forEach(f)}for(s=-1,d=n[o*t]>=i,Xa[d<<2].forEach(f);++s<t-1;)u=d,d=n[o*t+s+1]>=i,Xa[d<<2|u<<3].forEach(f);function f(t){var e,n,i=[t[0][0]+s,t[0][1]+o],l=[t[1][0]+s,t[1][1]+o],c=r(i),d=r(l);(e=p[c])?(n=h[d])?(delete p[e.end],delete h[n.start],e===n?(e.ring.push(l),a(e.ring)):h[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(l),p[e.end=d]=e):(e=h[d])?(n=p[c])?(delete h[e.start],delete p[n.end],e===n?(e.ring.push(l),a(e.ring)):h[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(i),h[e.start=c]=e):h[c]=p[d]={start:c,end:d,ring:[i,l]}}Xa[d<<3].forEach(f)}(n,a,function(t){i(t,n,a),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?s.push([t]):o.push(t)}),o.forEach(function(t){for(var e,n=0,i=s.length;n<i;++n)if(-1!==Ua((e=s[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:a,coordinates:s}}function r(e){return 2*e[0]+e[1]*(t+1)*4}function o(n,i,a){n.forEach(function(n){var s,r=n[0],o=n[1],l=0|r,c=0|o,d=i[c*t+l];r>0&&r<t&&l===r&&(s=i[c*t+l-1],n[0]=r+(a-s)/(d-s)-.5),o>0&&o<e&&c===o&&(s=i[(c-1)*t+l],n[1]=o+(a-s)/(d-s)-.5)})}return a.contour=s,a.size=function(n){if(!arguments.length)return[t,e];var i=Math.ceil(n[0]),s=Math.ceil(n[1]);if(!(i>0&&s>0))throw new Error("invalid size");return t=i,e=s,a},a.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Wa(Va.call(t)):Wa(t),a):n},a.smooth=function(t){return arguments.length?(i=t?o:Ka,a):i===o},a}function Ja(t,e,n){for(var i=t.width,a=t.height,s=1+(n<<1),r=0;r<a;++r)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[o+r*i]),o>=n&&(o>=s&&(l-=t.data[o-s+r*i]),e.data[o-n+r*i]=l/Math.min(o+1,i-1+s-o,s))}function Za(t,e,n){for(var i=t.width,a=t.height,s=1+(n<<1),r=0;r<i;++r)for(var o=0,l=0;o<a+n;++o)o<a&&(l+=t.data[r+o*i]),o>=n&&(o>=s&&(l-=t.data[r+(o-s)*i]),e.data[r+(o-n)*i]=l/Math.min(o+1,a-1+s-o,s))}function ts(t){return t[0]}function es(t){return t[1]}function ns(){return 1}var is={},as={};function ss(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function rs(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}function os(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function ls(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,a=[],s=t.length,r=0,o=0,l=s<=0,c=!1;function d(){if(l)return as;if(c)return c=!1,is;var e,i,a=r;if(34===t.charCodeAt(a)){for(;r++<s&&34!==t.charCodeAt(r)||34===t.charCodeAt(++r););return(e=r)>=s?l=!0:10===(i=t.charCodeAt(r++))?c=!0:13===i&&(c=!0,10===t.charCodeAt(r)&&++r),t.slice(a+1,e-1).replace(/""/g,'"')}for(;r<s;){if(10===(i=t.charCodeAt(e=r++)))c=!0;else if(13===i)c=!0,10===t.charCodeAt(r)&&++r;else if(i!==n)continue;return t.slice(a,e)}return l=!0,t.slice(a,s)}for(10===t.charCodeAt(s-1)&&--s,13===t.charCodeAt(s-1)&&--s;(i=d())!==as;){for(var u=[];i!==is&&i!==as;)u.push(i),i=d();e&&null==(u=e(u,o++))||a.push(u)}return a}function a(e,n){return e.map(function(e){return n.map(function(t){return r(e[t])}).join(t)})}function s(e){return e.map(r).join(t)}function r(t){return null==t?"":t instanceof Date?function(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+os(-t,6):t>9999?"+"+os(t,6):os(t,4)}(t.getUTCFullYear())+"-"+os(t.getUTCMonth()+1,2)+"-"+os(t.getUTCDate(),2)+(a?"T"+os(e,2)+":"+os(n,2)+":"+os(i,2)+"."+os(a,3)+"Z":i?"T"+os(e,2)+":"+os(n,2)+":"+os(i,2)+"Z":n||e?"T"+os(e,2)+":"+os(n,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,a,s=i(t,function(t,i){if(n)return n(t,i-1);a=t,n=e?function(t,e){var n=ss(t);return function(i,a){return e(n(i),a,t)}}(t,e):ss(t)});return s.columns=a||[],s},parseRows:i,format:function(e,n){return null==n&&(n=rs(e)),[n.map(r).join(t)].concat(a(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=rs(t)),a(t,e).join("\n")},formatRows:function(t){return t.map(s).join("\n")},formatRow:s,formatValue:r}}var cs=ls(","),ds=cs.parse,us=cs.parseRows,hs=cs.format,ps=cs.formatBody,fs=cs.formatRows,gs=cs.formatRow,ms=cs.formatValue,vs=ls("\t"),bs=vs.parse,ys=vs.parseRows,ws=vs.format,xs=vs.formatBody,Cs=vs.formatRows,ks=vs.formatRow,Ts=vs.formatValue,As=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ss(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Es(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function $s(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ds(t,e){return fetch(t,e).then($s)}function Is(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),Ds(e,n).then(function(e){return t(e,i)})}}var Ms=Is(ds),Ls=Is(bs);function Ps(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function Ns(t){return function(e,n){return Ds(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var Rs=Ns("application/xml"),Os=Ns("text/html"),Bs=Ns("image/svg+xml");function _s(t){return function(){return t}}function Fs(){return 1e-6*(Math.random()-.5)}function zs(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,s,r,o,l,c,d,u,h,p=t._root,f={data:i},g=t._x0,m=t._y0,v=t._x1,b=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(s=(g+v)/2))?g=s:v=s,(d=n>=(r=(m+b)/2))?m=r:b=r,a=p,!(p=p[u=d<<1|c]))return a[u]=f,t;if(o=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===o&&n===l)return f.next=p,a?a[u]=f:t._root=f,t;do{a=a?a[u]=new Array(4):t._root=new Array(4),(c=e>=(s=(g+v)/2))?g=s:v=s,(d=n>=(r=(m+b)/2))?m=r:b=r}while((u=d<<1|c)==(h=(l>=r)<<1|o>=s));return a[h]=p,a[u]=f,t}function Hs(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function qs(t){return t[0]}function Vs(t){return t[1]}function js(t,e,n){var i=new Ws(null==e?qs:e,null==n?Vs:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Ws(t,e,n,i,a,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=s,this._root=void 0}function Us(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Gs=js.prototype=Ws.prototype;function Ys(t){return t.x+t.vx}function Ks(t){return t.y+t.vy}function Xs(t){return t.index}function Qs(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Js(t){return t.x}function Zs(t){return t.y}Gs.copy=function(){var t,e,n=new Ws(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Us(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var a=0;a<4;++a)(e=i.source[a])&&(e.length?t.push({source:e,target:i.target[a]=new Array(4)}):i.target[a]=Us(e));return n},Gs.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return zs(this.cover(e,n),e,n,t)},Gs.addAll=function(t){var e,n,i,a,s=t.length,r=new Array(s),o=new Array(s),l=1/0,c=1/0,d=-1/0,u=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(r[n]=i,o[n]=a,i<l&&(l=i),i>d&&(d=i),a<c&&(c=a),a>u&&(u=a));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),n=0;n<s;++n)zs(this,r[n],o[n],t[n]);return this},Gs.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,s=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var r,o,l=a-n,c=this._root;n>t||t>=a||i>e||e>=s;)switch(o=(e<i)<<1|t<n,(r=new Array(4))[o]=c,c=r,l*=2,o){case 0:a=n+l,s=i+l;break;case 1:n=a-l,s=i+l;break;case 2:a=n+l,i=s-l;break;case 3:n=a-l,i=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=a,this._y1=s,this},Gs.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Gs.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gs.find=function(t,e,n){var i,a,s,r,o,l,c,d=this._x0,u=this._y0,h=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new Hs(g,d,u,h,p)),null==n?n=1/0:(d=t-n,u=e-n,h=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(a=l.x0)>h||(s=l.y0)>p||(r=l.x1)<d||(o=l.y1)<u))if(g.length){var m=(a+r)/2,v=(s+o)/2;f.push(new Hs(g[3],m,v,r,o),new Hs(g[2],a,v,m,o),new Hs(g[1],m,s,r,v),new Hs(g[0],a,s,m,v)),(c=(e>=v)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var b=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),w=b*b+y*y;if(w<n){var x=Math.sqrt(n=w);d=t-x,u=e-x,h=t+x,p=e+x,i=g.data}}return i},Gs.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t)))return this;var e,n,i,a,s,r,o,l,c,d,u,h,p=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=s>=(o=(f+m)/2))?f=o:m=o,(d=r>=(l=(g+v)/2))?g=l:v=l,e=p,!(p=p[u=d<<1|c]))return this;if(!p.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,h=u)}for(;p.data!==t;)if(i=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,i?(a?i.next=a:delete i.next,this):e?(a?e[u]=a:delete e[u],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=a,this)},Gs.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Gs.root=function(){return this._root},Gs.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Gs.visit=function(t){var e,n,i,a,s,r,o=[],l=this._root;for(l&&o.push(new Hs(l,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(l=e.node,i=e.x0,a=e.y0,s=e.x1,r=e.y1)&&l.length){var c=(i+s)/2,d=(a+r)/2;(n=l[3])&&o.push(new Hs(n,c,d,s,r)),(n=l[2])&&o.push(new Hs(n,i,d,c,r)),(n=l[1])&&o.push(new Hs(n,c,a,s,d)),(n=l[0])&&o.push(new Hs(n,i,a,c,d))}return this},Gs.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Hs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var s,r=e.x0,o=e.y0,l=e.x1,c=e.y1,d=(r+l)/2,u=(o+c)/2;(s=a[0])&&n.push(new Hs(s,r,o,d,u)),(s=a[1])&&n.push(new Hs(s,d,o,l,u)),(s=a[2])&&n.push(new Hs(s,r,u,d,c)),(s=a[3])&&n.push(new Hs(s,d,u,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Gs.x=function(t){return arguments.length?(this._x=t,this):this._x},Gs.y=function(t){return arguments.length?(this._y=t,this):this._y};var tr=Math.PI*(3-Math.sqrt(5));function er(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function nr(t){return(t=er(Math.abs(t)))?t[1]:NaN}var ir,ar=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sr(t){if(!(e=ar.exec(t)))throw new Error("invalid format: "+t);var e;return new rr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function rr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function or(t,e){var n=er(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}sr.prototype=rr.prototype,rr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var lr={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return or(100*t,e)},r:or,s:function(t,e){var n=er(t,e);if(!n)return t+"";var i=n[0],a=n[1],s=a-(ir=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,r=i.length;return s===r?i:s>r?i+new Array(s-r+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+er(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function cr(t){return t}var dr,ur=Array.prototype.map,hr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function pr(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?cr:(e=ur.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var a=t.length,s=[],r=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(t.substring(a-=o,a+o)),!((l+=o+1)>i));)o=e[r=(r+1)%e.length];return s.reverse().join(n)}),a=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?cr:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(ur.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",d=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=sr(t)).fill,n=t.align,u=t.sign,h=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,v=t.trim,b=t.type;"n"===b?(g=!0,b="g"):lr[b]||(void 0===m&&(m=12),v=!0,b="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var y="$"===h?a:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===h?s:/[%p]/.test(b)?l:"",x=lr[b],C=/[defgprs%]/.test(b);function k(t){var a,s,l,h=y,k=w;if("c"===b)k=x(t)+k,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?d:x(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,i=1,a=-1;i<n;++i)switch(t[i]){case".":a=e=i;break;case"0":0===a&&(a=i),e=i;break;default:if(!+t[i])break t;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==u&&(T=!1),h=(T?"("===u?u:c:"-"===u||"("===u?"":u)+h,k=("s"===b?hr[8+ir/3]:"")+k+(T&&"("===u?")":""),C)for(a=-1,s=t.length;++a<s;)if(48>(l=t.charCodeAt(a))||l>57){k=(46===l?r+t.slice(a+1):t.slice(a))+k,t=t.slice(0,a);break}}g&&!p&&(t=i(t,1/0));var A=h.length+t.length+k.length,S=A<f?new Array(f-A+1).join(e):"";switch(g&&p&&(t=i(S+t,S.length?f-k.length:1/0),S=""),n){case"<":t=h+t+k+S;break;case"=":t=h+S+t+k;break;case"^":t=S.slice(0,A=S.length>>1)+h+t+k+S.slice(A);break;default:t=S+h+t+k}return o(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return t+""},k}return{format:u,formatPrefix:function(t,e){var n=u(((t=sr(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(nr(e)/3))),a=Math.pow(10,-i),s=hr[8+i/3];return function(t){return n(a*t)+s}}}}function fr(e){return dr=pr(e),t.format=dr.format,t.formatPrefix=dr.formatPrefix,dr}function gr(t){return Math.max(0,-nr(Math.abs(t)))}function mr(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nr(e)/3)))-nr(Math.abs(t)))}function vr(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nr(e)-nr(t))+1}function br(){return new yr}function yr(){this.reset()}fr({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),yr.prototype={constructor:yr,reset:function(){this.s=this.t=0},add:function(t){xr(wr,t,this.t),xr(this,wr.s,this.s),this.s?this.t+=wr.t:this.s=wr.t},valueOf:function(){return this.s}};var wr=new yr;function xr(t,e,n){var i=t.s=e+n,a=i-e,s=i-a;t.t=e-s+(n-a)}var Cr=1e-6,kr=1e-12,Tr=Math.PI,Ar=Tr/2,Sr=Tr/4,Er=2*Tr,$r=180/Tr,Dr=Tr/180,Ir=Math.abs,Mr=Math.atan,Lr=Math.atan2,Pr=Math.cos,Nr=Math.ceil,Rr=Math.exp,Or=Math.log,Br=Math.pow,_r=Math.sin,Fr=Math.sign||function(t){return t>0?1:t<0?-1:0},zr=Math.sqrt,Hr=Math.tan;function qr(t){return t>1?0:t<-1?Tr:Math.acos(t)}function Vr(t){return t>1?Ar:t<-1?-Ar:Math.asin(t)}function jr(t){return(t=_r(t/2))*t}function Wr(){}function Ur(t,e){t&&Yr.hasOwnProperty(t.type)&&Yr[t.type](t,e)}var Gr={Feature:function(t,e){Ur(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)Ur(n[i].geometry,e)}},Yr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Kr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)Kr(n[i],e,0)},Polygon:function(t,e){Xr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)Xr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)Ur(n[i],e)}};function Kr(t,e,n){var i,a=-1,s=t.length-n;for(e.lineStart();++a<s;)i=t[a],e.point(i[0],i[1],i[2]);e.lineEnd()}function Xr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Kr(t[n],e,1);e.polygonEnd()}function Qr(t,e){t&&Gr.hasOwnProperty(t.type)?Gr[t.type](t,e):Ur(t,e)}var Jr,Zr,to,eo,no,io=br(),ao=br(),so={point:Wr,lineStart:Wr,lineEnd:Wr,polygonStart:function(){io.reset(),so.lineStart=ro,so.lineEnd=oo},polygonEnd:function(){var t=+io;ao.add(t<0?Er+t:t),this.lineStart=this.lineEnd=this.point=Wr},sphere:function(){ao.add(Er)}};function ro(){so.point=lo}function oo(){co(Jr,Zr)}function lo(t,e){so.point=co,Jr=t,Zr=e,to=t*=Dr,eo=Pr(e=(e*=Dr)/2+Sr),no=_r(e)}function co(t,e){var n=(t*=Dr)-to,i=n>=0?1:-1,a=i*n,s=Pr(e=(e*=Dr)/2+Sr),r=_r(e),o=no*r,l=eo*s+o*Pr(a),c=o*i*_r(a);io.add(Lr(c,l)),to=t,eo=s,no=r}function uo(t){return[Lr(t[1],t[0]),Vr(t[2])]}function ho(t){var e=t[0],n=t[1],i=Pr(n);return[i*Pr(e),i*_r(e),_r(n)]}function po(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function go(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function vo(t){var e=zr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var bo,yo,wo,xo,Co,ko,To,Ao,So,Eo,$o,Do,Io,Mo,Lo,Po,No,Ro,Oo,Bo,_o,Fo,zo,Ho,qo,Vo,jo=br(),Wo={point:Uo,lineStart:Yo,lineEnd:Ko,polygonStart:function(){Wo.point=Xo,Wo.lineStart=Qo,Wo.lineEnd=Jo,jo.reset(),so.polygonStart()},polygonEnd:function(){so.polygonEnd(),Wo.point=Uo,Wo.lineStart=Yo,Wo.lineEnd=Ko,io<0?(bo=-(wo=180),yo=-(xo=90)):jo>Cr?xo=90:jo<-Cr&&(yo=-90),Eo[0]=bo,Eo[1]=wo},sphere:function(){bo=-(wo=180),yo=-(xo=90)}};function Uo(t,e){So.push(Eo=[bo=t,wo=t]),e<yo&&(yo=e),e>xo&&(xo=e)}function Go(t,e){var n=ho([t*Dr,e*Dr]);if(Ao){var i=fo(Ao,n),a=fo([i[1],-i[0],0],i);vo(a),a=uo(a);var s,r=t-Co,o=r>0?1:-1,l=a[0]*$r*o,c=Ir(r)>180;c^(o*Co<l&&l<o*t)?(s=a[1]*$r)>xo&&(xo=s):c^(o*Co<(l=(l+360)%360-180)&&l<o*t)?(s=-a[1]*$r)<yo&&(yo=s):(e<yo&&(yo=e),e>xo&&(xo=e)),c?t<Co?Zo(bo,t)>Zo(bo,wo)&&(wo=t):Zo(t,wo)>Zo(bo,wo)&&(bo=t):wo>=bo?(t<bo&&(bo=t),t>wo&&(wo=t)):t>Co?Zo(bo,t)>Zo(bo,wo)&&(wo=t):Zo(t,wo)>Zo(bo,wo)&&(bo=t)}else So.push(Eo=[bo=t,wo=t]);e<yo&&(yo=e),e>xo&&(xo=e),Ao=n,Co=t}function Yo(){Wo.point=Go}function Ko(){Eo[0]=bo,Eo[1]=wo,Wo.point=Uo,Ao=null}function Xo(t,e){if(Ao){var n=t-Co;jo.add(Ir(n)>180?n+(n>0?360:-360):n)}else ko=t,To=e;so.point(t,e),Go(t,e)}function Qo(){so.lineStart()}function Jo(){Xo(ko,To),so.lineEnd(),Ir(jo)>Cr&&(bo=-(wo=180)),Eo[0]=bo,Eo[1]=wo,Ao=null}function Zo(t,e){return(e-=t)<0?e+360:e}function tl(t,e){return t[0]-e[0]}function el(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var nl={sphere:Wr,point:il,lineStart:sl,lineEnd:ll,polygonStart:function(){nl.lineStart=cl,nl.lineEnd=dl},polygonEnd:function(){nl.lineStart=sl,nl.lineEnd=ll}};function il(t,e){t*=Dr;var n=Pr(e*=Dr);al(n*Pr(t),n*_r(t),_r(e))}function al(t,e,n){Io+=(t-Io)/++$o,Mo+=(e-Mo)/$o,Lo+=(n-Lo)/$o}function sl(){nl.point=rl}function rl(t,e){t*=Dr;var n=Pr(e*=Dr);Ho=n*Pr(t),qo=n*_r(t),Vo=_r(e),nl.point=ol,al(Ho,qo,Vo)}function ol(t,e){t*=Dr;var n=Pr(e*=Dr),i=n*Pr(t),a=n*_r(t),s=_r(e),r=Lr(zr((r=qo*s-Vo*a)*r+(r=Vo*i-Ho*s)*r+(r=Ho*a-qo*i)*r),Ho*i+qo*a+Vo*s);Do+=r,Po+=r*(Ho+(Ho=i)),No+=r*(qo+(qo=a)),Ro+=r*(Vo+(Vo=s)),al(Ho,qo,Vo)}function ll(){nl.point=il}function cl(){nl.point=ul}function dl(){hl(Fo,zo),nl.point=il}function ul(t,e){Fo=t,zo=e,t*=Dr,e*=Dr,nl.point=hl;var n=Pr(e);Ho=n*Pr(t),qo=n*_r(t),Vo=_r(e),al(Ho,qo,Vo)}function hl(t,e){t*=Dr;var n=Pr(e*=Dr),i=n*Pr(t),a=n*_r(t),s=_r(e),r=qo*s-Vo*a,o=Vo*i-Ho*s,l=Ho*a-qo*i,c=zr(r*r+o*o+l*l),d=Vr(c),u=c&&-d/c;Oo+=u*r,Bo+=u*o,_o+=u*l,Do+=d,Po+=d*(Ho+(Ho=i)),No+=d*(qo+(qo=a)),Ro+=d*(Vo+(Vo=s)),al(Ho,qo,Vo)}function pl(t){return function(){return t}}function fl(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function gl(t,e){return[Ir(t)>Tr?t+Math.round(-t/Er)*Er:t,e]}function ml(t,e,n){return(t%=Er)?e||n?fl(bl(t),yl(e,n)):bl(t):e||n?yl(e,n):gl}function vl(t){return function(e,n){return[(e+=t)>Tr?e-Er:e<-Tr?e+Er:e,n]}}function bl(t){var e=vl(t);return e.invert=vl(-t),e}function yl(t,e){var n=Pr(t),i=_r(t),a=Pr(e),s=_r(e);function r(t,e){var r=Pr(e),o=Pr(t)*r,l=_r(t)*r,c=_r(e),d=c*n+o*i;return[Lr(l*a-d*s,o*n-c*i),Vr(d*a+l*s)]}return r.invert=function(t,e){var r=Pr(e),o=Pr(t)*r,l=_r(t)*r,c=_r(e),d=c*a-l*s;return[Lr(l*a+c*s,o*n+d*i),Vr(d*n-o*i)]},r}function wl(t){function e(e){return(e=t(e[0]*Dr,e[1]*Dr))[0]*=$r,e[1]*=$r,e}return t=ml(t[0]*Dr,t[1]*Dr,t.length>2?t[2]*Dr:0),e.invert=function(e){return(e=t.invert(e[0]*Dr,e[1]*Dr))[0]*=$r,e[1]*=$r,e},e}function xl(t,e,n,i,a,s){if(n){var r=Pr(e),o=_r(e),l=i*n;null==a?(a=e+i*Er,s=e-l/2):(a=Cl(r,a),s=Cl(r,s),(i>0?a<s:a>s)&&(a+=i*Er));for(var c,d=a;i>0?d>s:d<s;d-=l)c=uo([r,-o*Pr(d),-o*_r(d)]),t.point(c[0],c[1])}}function Cl(t,e){(e=ho(e))[0]-=t,vo(e);var n=qr(-e[1]);return((-e[2]<0?-n:n)+Er-Cr)%Er}function kl(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Wr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Tl(t,e){return Ir(t[0]-e[0])<Cr&&Ir(t[1]-e[1])<Cr}function Al(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Sl(t,e,n,i,a){var s,r,o=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(Tl(i,r)){for(a.lineStart(),s=0;s<e;++s)a.point((i=t[s])[0],i[1]);a.lineEnd()}else o.push(n=new Al(i,t,null,!0)),l.push(n.o=new Al(i,null,n,!1)),o.push(n=new Al(r,t,null,!1)),l.push(n.o=new Al(r,null,n,!0))}}),o.length){for(l.sort(e),El(o),El(l),s=0,r=l.length;s<r;++s)l[s].e=n=!n;for(var c,d,u=o[0];;){for(var h=u,p=!0;h.v;)if((h=h.n)===u)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,r=c.length;s<r;++s)a.point((d=c[s])[0],d[1]);else i(h.x,h.n.x,1,a);h=h.n}else{if(p)for(c=h.p.z,s=c.length-1;s>=0;--s)a.point((d=c[s])[0],d[1]);else i(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);a.lineEnd()}}}function El(t){if(e=t.length){for(var e,n,i=0,a=t[0];++i<e;)a.n=n=t[i],n.p=a,a=n;a.n=n=t[0],n.p=a}}gl.invert=gl;var $l=br();function Dl(t){return Ir(t[0])<=Tr?t[0]:Fr(t[0])*((Ir(t[0])+Tr)%Er-Tr)}function Il(t,e){var n=Dl(e),i=e[1],a=_r(i),s=[_r(n),-Pr(n),0],r=0,o=0;$l.reset(),1===a?i=Ar+Cr:-1===a&&(i=-Ar-Cr);for(var l=0,c=t.length;l<c;++l)if(u=(d=t[l]).length)for(var d,u,h=d[u-1],p=Dl(h),f=h[1]/2+Sr,g=_r(f),m=Pr(f),v=0;v<u;++v,p=y,g=x,m=C,h=b){var b=d[v],y=Dl(b),w=b[1]/2+Sr,x=_r(w),C=Pr(w),k=y-p,T=k>=0?1:-1,A=T*k,S=A>Tr,E=g*x;if($l.add(Lr(E*T*_r(A),m*C+E*Pr(A))),r+=S?k+T*Er:k,S^p>=n^y>=n){var $=fo(ho(h),ho(b));vo($);var D=fo(s,$);vo(D);var I=(S^k>=0?-1:1)*Vr(D[2]);(i>I||i===I&&($[0]||$[1]))&&(o+=S^k>=0?1:-1)}}return(r<-Cr||r<Cr&&$l<-Cr)^1&o}function Ml(t,e,n,i){return function(a){var s,r,o,l=e(a),c=kl(),d=e(c),u=!1,h={point:p,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=y,r=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=m,r=S(r);var t=Il(s,i);r.length?(u||(a.polygonStart(),u=!0),Sl(r,Pl,t,n,a)):t&&(u||(a.polygonStart(),u=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),u&&(a.polygonEnd(),u=!1),r=s=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(e,n){t(e,n)&&a.point(e,n)}function f(t,e){l.point(t,e)}function g(){h.point=f,l.lineStart()}function m(){h.point=p,l.lineEnd()}function v(t,e){o.push([t,e]),d.point(t,e)}function b(){d.lineStart(),o=[]}function y(){v(o[0][0],o[0][1]),d.lineEnd();var t,e,n,i,l=d.clean(),h=c.result(),p=h.length;if(o.pop(),s.push(o),o=null,p)if(1&l){if((e=(n=h[0]).length-1)>0){for(u||(a.polygonStart(),u=!0),a.lineStart(),t=0;t<e;++t)a.point((i=n[t])[0],i[1]);a.lineEnd()}}else p>1&&2&l&&h.push(h.pop().concat(h.shift())),r.push(h.filter(Ll))}return h}}function Ll(t){return t.length>1}function Pl(t,e){return((t=t.x)[0]<0?t[1]-Ar-Cr:Ar-t[1])-((e=e.x)[0]<0?e[1]-Ar-Cr:Ar-e[1])}var Nl=Ml(function(){return!0},function(t){var e,n=NaN,i=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,r){var o=s>0?Tr:-Tr,l=Ir(s-n);Ir(l-Tr)<Cr?(t.point(n,i=(i+r)/2>0?Ar:-Ar),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(o,i),t.point(s,i),e=0):a!==o&&l>=Tr&&(Ir(n-a)<Cr&&(n-=a*Cr),Ir(s-o)<Cr&&(s-=o*Cr),i=function(t,e,n,i){var a,s,r=_r(t-n);return Ir(r)>Cr?Mr((_r(e)*(s=Pr(i))*_r(n)-_r(i)*(a=Pr(e))*_r(t))/(a*s*r)):(e+i)/2}(n,i,s,r),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(o,i),e=0),t.point(n=s,i=r),a=o},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var a;if(null==t)a=n*Ar,i.point(-Tr,a),i.point(0,a),i.point(Tr,a),i.point(Tr,0),i.point(Tr,-a),i.point(0,-a),i.point(-Tr,-a),i.point(-Tr,0),i.point(-Tr,a);else if(Ir(t[0]-e[0])>Cr){var s=t[0]<e[0]?Tr:-Tr;a=n*s/2,i.point(-s,a),i.point(0,a),i.point(s,a)}else i.point(e[0],e[1])},[-Tr,-Ar]);function Rl(t){var e=Pr(t),n=6*Dr,i=e>0,a=Ir(e)>Cr;function s(t,n){return Pr(t)*Pr(n)>e}function r(t,n,i){var a=[1,0,0],s=fo(ho(t),ho(n)),r=po(s,s),o=s[0],l=r-o*o;if(!l)return!i&&t;var c=e*r/l,d=-e*o/l,u=fo(a,s),h=mo(a,c);go(h,mo(s,d));var p=u,f=po(h,p),g=po(p,p),m=f*f-g*(po(h,h)-1);if(!(m<0)){var v=zr(m),b=mo(p,(-f-v)/g);if(go(b,h),b=uo(b),!i)return b;var y,w=t[0],x=n[0],C=t[1],k=n[1];x<w&&(y=w,w=x,x=y);var T=x-w,A=Ir(T-Tr)<Cr;if(!A&&k<C&&(y=C,C=k,k=y),A||T<Cr?A?C+k>0^b[1]<(Ir(b[0]-w)<Cr?C:k):C<=b[1]&&b[1]<=k:T>Tr^(w<=b[0]&&b[0]<=x)){var S=mo(p,(-f+v)/g);return go(S,h),[b,uo(S)]}}}function o(e,n){var a=i?t:Tr-t,s=0;return e<-a?s|=1:e>a&&(s|=2),n<-a?s|=4:n>a&&(s|=8),s}return Ml(s,function(t){var e,n,l,c,d;return{lineStart:function(){c=l=!1,d=1},point:function(u,h){var p,f=[u,h],g=s(u,h),m=i?g?0:o(u,h):g?o(u+(u<0?Tr:-Tr),h):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(p=r(e,f))||Tl(e,p)||Tl(f,p))&&(f[0]+=Cr,f[1]+=Cr,g=s(f[0],f[1])),g!==l)d=0,g?(t.lineStart(),p=r(f,e),t.point(p[0],p[1])):(p=r(e,f),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(a&&e&&i^g){var v;m&n||!(v=r(f,e,!0))||(d=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Tl(e,f)||t.point(f[0],f[1]),e=f,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return d|(c&&l)<<1}}},function(e,i,a,s){xl(s,t,n,a,e,i)},i?[0,-t]:[-Tr,t-Tr])}var Ol=1e9,Bl=-Ol;function _l(t,e,n,i){function a(a,s){return t<=a&&a<=n&&e<=s&&s<=i}function s(a,s,o,c){var d=0,u=0;if(null==a||(d=r(a,o))!==(u=r(s,o))||l(a,s)<0^o>0)do{c.point(0===d||3===d?t:n,d>1?i:e)}while((d=(d+o+4)%4)!==u);else c.point(s[0],s[1])}function r(i,a){return Ir(i[0]-t)<Cr?a>0?0:3:Ir(i[0]-n)<Cr?a>0?2:1:Ir(i[1]-e)<Cr?a>0?1:0:a>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var l,c,d,u,h,p,f,g,m,v,b,y=r,w=kl(),x={point:C,lineStart:function(){x.point=k,c&&c.push(d=[]),v=!0,m=!1,f=g=NaN},lineEnd:function(){l&&(k(u,h),p&&m&&w.rejoin(),l.push(w.result())),x.point=C,m&&y.lineEnd()},polygonStart:function(){y=w,l=[],c=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,a=c.length;n<a;++n)for(var s,r,o=c[n],l=1,d=o.length,u=o[0],h=u[0],p=u[1];l<d;++l)s=h,r=p,h=(u=o[l])[0],p=u[1],r<=i?p>i&&(h-s)*(i-r)>(p-r)*(t-s)&&++e:p<=i&&(h-s)*(i-r)<(p-r)*(t-s)&&--e;return e}(),n=b&&e,a=(l=S(l)).length;(n||a)&&(r.polygonStart(),n&&(r.lineStart(),s(null,null,1,r),r.lineEnd()),a&&Sl(l,o,e,s,r),r.polygonEnd()),y=r,l=c=d=null}};function C(t,e){a(t,e)&&y.point(t,e)}function k(s,r){var o=a(s,r);if(c&&d.push([s,r]),v)u=s,h=r,p=o,v=!1,o&&(y.lineStart(),y.point(s,r));else if(o&&m)y.point(s,r);else{var l=[f=Math.max(Bl,Math.min(Ol,f)),g=Math.max(Bl,Math.min(Ol,g))],w=[s=Math.max(Bl,Math.min(Ol,s)),r=Math.max(Bl,Math.min(Ol,r))];!function(t,e,n,i,a,s){var r,o=t[0],l=t[1],c=0,d=1,u=e[0]-o,h=e[1]-l;if(r=n-o,u||!(r>0)){if(r/=u,u<0){if(r<c)return;r<d&&(d=r)}else if(u>0){if(r>d)return;r>c&&(c=r)}if(r=a-o,u||!(r<0)){if(r/=u,u<0){if(r>d)return;r>c&&(c=r)}else if(u>0){if(r<c)return;r<d&&(d=r)}if(r=i-l,h||!(r>0)){if(r/=h,h<0){if(r<c)return;r<d&&(d=r)}else if(h>0){if(r>d)return;r>c&&(c=r)}if(r=s-l,h||!(r<0)){if(r/=h,h<0){if(r>d)return;r>c&&(c=r)}else if(h>0){if(r<c)return;r<d&&(d=r)}return c>0&&(t[0]=o+c*u,t[1]=l+c*h),d<1&&(e[0]=o+d*u,e[1]=l+d*h),!0}}}}}(l,w,t,e,n,i)?o&&(y.lineStart(),y.point(s,r),b=!1):(m||(y.lineStart(),y.point(l[0],l[1])),y.point(w[0],w[1]),o||y.lineEnd(),b=!1)}f=s,g=r,m=o}return x}}var Fl,zl,Hl,ql=br(),Vl={sphere:Wr,point:Wr,lineStart:function(){Vl.point=Wl,Vl.lineEnd=jl},lineEnd:Wr,polygonStart:Wr,polygonEnd:Wr};function jl(){Vl.point=Vl.lineEnd=Wr}function Wl(t,e){Fl=t*=Dr,zl=_r(e*=Dr),Hl=Pr(e),Vl.point=Ul}function Ul(t,e){t*=Dr;var n=_r(e*=Dr),i=Pr(e),a=Ir(t-Fl),s=Pr(a),r=i*_r(a),o=Hl*n-zl*i*s,l=zl*n+Hl*i*s;ql.add(Lr(zr(r*r+o*o),l)),Fl=t,zl=n,Hl=i}function Gl(t){return ql.reset(),Qr(t,Vl),+ql}var Yl=[null,null],Kl={type:"LineString",coordinates:Yl};function Xl(t,e){return Yl[0]=t,Yl[1]=e,Gl(Kl)}var Ql={Feature:function(t,e){return Zl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(Zl(n[i].geometry,e))return!0;return!1}},Jl={Sphere:function(){return!0},Point:function(t,e){return tc(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(tc(n[i],e))return!0;return!1},LineString:function(t,e){return ec(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(ec(n[i],e))return!0;return!1},Polygon:function(t,e){return nc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(nc(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(Zl(n[i],e))return!0;return!1}};function Zl(t,e){return!(!t||!Jl.hasOwnProperty(t.type))&&Jl[t.type](t,e)}function tc(t,e){return 0===Xl(t,e)}function ec(t,e){for(var n,i,a,s=0,r=t.length;s<r;s++){if(0===(i=Xl(t[s],e)))return!0;if(s>0&&(a=Xl(t[s],t[s-1]))>0&&n<=a&&i<=a&&(n+i-a)*(1-Math.pow((n-i)/a,2))<kr*a)return!0;n=i}return!1}function nc(t,e){return!!Il(t.map(ic),ac(e))}function ic(t){return(t=t.map(ac)).pop(),t}function ac(t){return[t[0]*Dr,t[1]*Dr]}function sc(t,e,n){var i=m(t,e-Cr,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function rc(t,e,n){var i=m(t,e-Cr,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function oc(){var t,e,n,i,a,s,r,o,l,c,d,u,h=10,p=h,f=90,g=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return m(Nr(i/f)*f,n,f).map(d).concat(m(Nr(o/g)*g,r,g).map(u)).concat(m(Nr(e/h)*h,t,h).filter(function(t){return Ir(t%f)>Cr}).map(l)).concat(m(Nr(s/p)*p,a,p).filter(function(t){return Ir(t%g)>Cr}).map(c))}return b.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(u(r).slice(1),d(n).reverse().slice(1),u(o).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],o=+t[0][1],r=+t[1][1],i>n&&(t=i,i=n,n=t),o>r&&(t=o,o=r,r=t),b.precision(v)):[[i,o],[n,r]]},b.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],s=+n[0][1],a=+n[1][1],e>t&&(n=e,e=t,t=n),s>a&&(n=s,s=a,a=n),b.precision(v)):[[e,s],[t,a]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(f=+t[0],g=+t[1],b):[f,g]},b.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],b):[h,p]},b.precision=function(h){return arguments.length?(v=+h,l=sc(s,a,90),c=rc(e,t,v),d=sc(o,r,90),u=rc(i,n,v),b):v},b.extentMajor([[-180,-90+Cr],[180,90-Cr]]).extentMinor([[-180,-80-Cr],[180,80+Cr]])}function lc(t){return t}var cc,dc,uc,hc,pc=br(),fc=br(),gc={point:Wr,lineStart:Wr,lineEnd:Wr,polygonStart:function(){gc.lineStart=mc,gc.lineEnd=yc},polygonEnd:function(){gc.lineStart=gc.lineEnd=gc.point=Wr,pc.add(Ir(fc)),fc.reset()},result:function(){var t=pc/2;return pc.reset(),t}};function mc(){gc.point=vc}function vc(t,e){gc.point=bc,cc=uc=t,dc=hc=e}function bc(t,e){fc.add(hc*t-uc*e),uc=t,hc=e}function yc(){bc(cc,dc)}var wc,xc,Cc,kc,Tc=1/0,Ac=Tc,Sc=-Tc,Ec=Sc,$c={point:function(t,e){t<Tc&&(Tc=t),t>Sc&&(Sc=t),e<Ac&&(Ac=e),e>Ec&&(Ec=e)},lineStart:Wr,lineEnd:Wr,polygonStart:Wr,polygonEnd:Wr,result:function(){var t=[[Tc,Ac],[Sc,Ec]];return Sc=Ec=-(Ac=Tc=1/0),t}},Dc=0,Ic=0,Mc=0,Lc=0,Pc=0,Nc=0,Rc=0,Oc=0,Bc=0,_c={point:Fc,lineStart:zc,lineEnd:Vc,polygonStart:function(){_c.lineStart=jc,_c.lineEnd=Wc},polygonEnd:function(){_c.point=Fc,_c.lineStart=zc,_c.lineEnd=Vc},result:function(){var t=Bc?[Rc/Bc,Oc/Bc]:Nc?[Lc/Nc,Pc/Nc]:Mc?[Dc/Mc,Ic/Mc]:[NaN,NaN];return Dc=Ic=Mc=Lc=Pc=Nc=Rc=Oc=Bc=0,t}};function Fc(t,e){Dc+=t,Ic+=e,++Mc}function zc(){_c.point=Hc}function Hc(t,e){_c.point=qc,Fc(Cc=t,kc=e)}function qc(t,e){var n=t-Cc,i=e-kc,a=zr(n*n+i*i);Lc+=a*(Cc+t)/2,Pc+=a*(kc+e)/2,Nc+=a,Fc(Cc=t,kc=e)}function Vc(){_c.point=Fc}function jc(){_c.point=Uc}function Wc(){Gc(wc,xc)}function Uc(t,e){_c.point=Gc,Fc(wc=Cc=t,xc=kc=e)}function Gc(t,e){var n=t-Cc,i=e-kc,a=zr(n*n+i*i);Lc+=a*(Cc+t)/2,Pc+=a*(kc+e)/2,Nc+=a,Rc+=(a=kc*t-Cc*e)*(Cc+t),Oc+=a*(kc+e),Bc+=3*a,Fc(Cc=t,kc=e)}function Yc(t){this._context=t}Yc.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Er)}},result:Wr};var Kc,Xc,Qc,Jc,Zc,td=br(),ed={point:Wr,lineStart:function(){ed.point=nd},lineEnd:function(){Kc&&id(Xc,Qc),ed.point=Wr},polygonStart:function(){Kc=!0},polygonEnd:function(){Kc=null},result:function(){var t=+td;return td.reset(),t}};function nd(t,e){ed.point=id,Xc=Jc=t,Qc=Zc=e}function id(t,e){Jc-=t,Zc-=e,td.add(zr(Jc*Jc+Zc*Zc)),Jc=t,Zc=e}function ad(){this._string=[]}function sd(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function rd(t){return function(e){var n=new od;for(var i in t)n[i]=t[i];return n.stream=e,n}}function od(){}function ld(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Qr(n,t.stream($c)),e($c.result()),null!=i&&t.clipExtent(i),t}function cd(t,e,n){return ld(t,function(n){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),r=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+e[0][1]+(a-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([r,o])},n)}function dd(t,e,n){return cd(t,[[0,0],e],n)}function ud(t,e,n){return ld(t,function(n){var i=+e,a=i/(n[1][0]-n[0][0]),s=(i-a*(n[1][0]+n[0][0]))/2,r=-a*n[0][1];t.scale(150*a).translate([s,r])},n)}function hd(t,e,n){return ld(t,function(n){var i=+e,a=i/(n[1][1]-n[0][1]),s=-a*n[0][0],r=(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([s,r])},n)}ad.prototype={_radius:4.5,_circle:sd(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=sd(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},od.prototype={constructor:od,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pd=Pr(30*Dr);function fd(t,e){return+e?function(t,e){function n(i,a,s,r,o,l,c,d,u,h,p,f,g,m){var v=c-i,b=d-a,y=v*v+b*b;if(y>4*e&&g--){var w=r+h,x=o+p,C=l+f,k=zr(w*w+x*x+C*C),T=Vr(C/=k),A=Ir(Ir(C)-1)<Cr||Ir(s-u)<Cr?(s+u)/2:Lr(x,w),S=t(A,T),E=S[0],$=S[1],D=E-i,I=$-a,M=b*D-v*I;(M*M/y>e||Ir((v*D+b*I)/y-.5)>.3||r*h+o*p+l*f<pd)&&(n(i,a,s,r,o,l,E,$,A,w/=k,x/=k,C,g,m),m.point(E,$),n(E,$,A,w,x,C,c,d,u,h,p,f,g,m))}}return function(e){var i,a,s,r,o,l,c,d,u,h,p,f,g={point:m,lineStart:v,lineEnd:y,polygonStart:function(){e.polygonStart(),g.lineStart=w},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){d=NaN,g.point=b,e.lineStart()}function b(i,a){var s=ho([i,a]),r=t(i,a);n(d,u,c,h,p,f,d=r[0],u=r[1],c=i,h=s[0],p=s[1],f=s[2],16,e),e.point(d,u)}function y(){g.point=m,e.lineEnd()}function w(){v(),g.point=x,g.lineEnd=C}function x(t,e){b(i=t,e),a=d,s=u,r=h,o=p,l=f,g.point=b}function C(){n(d,u,c,h,p,f,a,s,i,r,o,l,16,e),g.lineEnd=y,y()}return g}}(t,e):function(t){return rd({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var gd=rd({point:function(t,e){this.stream.point(t*Dr,e*Dr)}});function md(t,e,n,i,a,s){var r=Pr(s),o=_r(s),l=r*t,c=o*t,d=r/t,u=o/t,h=(o*n-r*e)/t,p=(o*e+r*n)/t;function f(t,s){return[l*(t*=i)-c*(s*=a)+e,n-c*t-l*s]}return f.invert=function(t,e){return[i*(d*t-u*e+h),a*(p-u*t-d*e)]},f}function vd(t){return bd(function(){return t})()}function bd(t){var e,n,i,a,s,r,o,l,c,d,u=150,h=480,p=250,f=0,g=0,m=0,v=0,b=0,y=0,w=1,x=1,C=null,k=Nl,T=null,A=lc,S=.5;function E(t){return l(t[0]*Dr,t[1]*Dr)}function $(t){return(t=l.invert(t[0],t[1]))&&[t[0]*$r,t[1]*$r]}function D(){var t=md(u,0,0,w,x,y).apply(null,e(f,g)),i=(y?md:function(t,e,n,i,a){function s(s,r){return[e+t*(s*=i),n-t*(r*=a)]}return s.invert=function(s,r){return[(s-e)/t*i,(n-r)/t*a]},s})(u,h-t[0],p-t[1],w,x,y);return n=ml(m,v,b),o=fl(e,i),l=fl(n,o),r=fd(o,S),I()}function I(){return c=d=null,E}return E.stream=function(t){return c&&d===t?c:c=gd(function(t){return rd({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(k(r(A(d=t)))))},E.preclip=function(t){return arguments.length?(k=t,C=void 0,I()):k},E.postclip=function(t){return arguments.length?(A=t,T=i=a=s=null,I()):A},E.clipAngle=function(t){return arguments.length?(k=+t?Rl(C=t*Dr):(C=null,Nl),I()):C*$r},E.clipExtent=function(t){return arguments.length?(A=null==t?(T=i=a=s=null,lc):_l(T=+t[0][0],i=+t[0][1],a=+t[1][0],s=+t[1][1]),I()):null==T?null:[[T,i],[a,s]]},E.scale=function(t){return arguments.length?(u=+t,D()):u},E.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],D()):[h,p]},E.center=function(t){return arguments.length?(f=t[0]%360*Dr,g=t[1]%360*Dr,D()):[f*$r,g*$r]},E.rotate=function(t){return arguments.length?(m=t[0]%360*Dr,v=t[1]%360*Dr,b=t.length>2?t[2]%360*Dr:0,D()):[m*$r,v*$r,b*$r]},E.angle=function(t){return arguments.length?(y=t%360*Dr,D()):y*$r},E.reflectX=function(t){return arguments.length?(w=t?-1:1,D()):w<0},E.reflectY=function(t){return arguments.length?(x=t?-1:1,D()):x<0},E.precision=function(t){return arguments.length?(r=fd(o,S=t*t),I()):zr(S)},E.fitExtent=function(t,e){return cd(E,t,e)},E.fitSize=function(t,e){return dd(E,t,e)},E.fitWidth=function(t,e){return ud(E,t,e)},E.fitHeight=function(t,e){return hd(E,t,e)},function(){return e=t.apply(this,arguments),E.invert=e.invert&&$,D()}}function yd(t){var e=0,n=Tr/3,i=bd(t),a=i(e,n);return a.parallels=function(t){return arguments.length?i(e=t[0]*Dr,n=t[1]*Dr):[e*$r,n*$r]},a}function wd(t,e){var n=_r(t),i=(n+_r(e))/2;if(Ir(i)<Cr)return function(t){var e=Pr(t);function n(t,n){return[t*e,_r(n)/e]}return n.invert=function(t,n){return[t/e,Vr(n*e)]},n}(t);var a=1+n*(2*i-n),s=zr(a)/i;function r(t,e){var n=zr(a-2*i*_r(e))/i;return[n*_r(t*=i),s-n*Pr(t)]}return r.invert=function(t,e){var n=s-e,r=Lr(t,Ir(n))*Fr(n);return n*i<0&&(r-=Tr*Fr(t)*Fr(n)),[r/i,Vr((a-(t*t+n*n)*i*i)/(2*i))]},r}function xd(){return yd(wd).scale(155.424).center([0,33.6442])}function Cd(){return xd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function kd(t){return function(e,n){var i=Pr(e),a=Pr(n),s=t(i*a);return[s*a*_r(e),s*_r(n)]}}function Td(t){return function(e,n){var i=zr(e*e+n*n),a=t(i),s=_r(a),r=Pr(a);return[Lr(e*s,i*r),Vr(i&&n*s/i)]}}var Ad=kd(function(t){return zr(2/(1+t))});Ad.invert=Td(function(t){return 2*Vr(t/2)});var Sd=kd(function(t){return(t=qr(t))&&t/_r(t)});function Ed(t,e){return[t,Or(Hr((Ar+e)/2))]}function $d(t){var e,n,i,a=vd(t),s=a.center,r=a.scale,o=a.translate,l=a.clipExtent,c=null;function d(){var s=Tr*r(),o=a(wl(a.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:t===Ed?[[Math.max(o[0]-s,c),e],[Math.min(o[0]+s,n),i]]:[[c,Math.max(o[1]-s,e)],[n,Math.min(o[1]+s,i)]])}return a.scale=function(t){return arguments.length?(r(t),d()):r()},a.translate=function(t){return arguments.length?(o(t),d()):o()},a.center=function(t){return arguments.length?(s(t),d()):s()},a.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),d()):null==c?null:[[c,e],[n,i]]},d()}function Dd(t){return Hr((Ar+t)/2)}function Id(t,e){var n=Pr(t),i=t===e?_r(t):Or(n/Pr(e))/Or(Dd(e)/Dd(t)),a=n*Br(Dd(t),i)/i;if(!i)return Ed;function s(t,e){a>0?e<-Ar+Cr&&(e=-Ar+Cr):e>Ar-Cr&&(e=Ar-Cr);var n=a/Br(Dd(e),i);return[n*_r(i*t),a-n*Pr(i*t)]}return s.invert=function(t,e){var n=a-e,s=Fr(i)*zr(t*t+n*n),r=Lr(t,Ir(n))*Fr(n);return n*i<0&&(r-=Tr*Fr(t)*Fr(n)),[r/i,2*Mr(Br(a/s,1/i))-Ar]},s}function Md(t,e){return[t,e]}function Ld(t,e){var n=Pr(t),i=t===e?_r(t):(n-Pr(e))/(e-t),a=n/i+t;if(Ir(i)<Cr)return Md;function s(t,e){var n=a-e,s=i*t;return[n*_r(s),a-n*Pr(s)]}return s.invert=function(t,e){var n=a-e,s=Lr(t,Ir(n))*Fr(n);return n*i<0&&(s-=Tr*Fr(t)*Fr(n)),[s/i,a-Fr(i)*zr(t*t+n*n)]},s}Sd.invert=Td(function(t){return t}),Ed.invert=function(t,e){return[t,2*Mr(Rr(e))-Ar]},Md.invert=Md;var Pd=1.340264,Nd=-.081106,Rd=893e-6,Od=.003796,Bd=zr(3)/2;function _d(t,e){var n=Vr(Bd*_r(e)),i=n*n,a=i*i*i;return[t*Pr(n)/(Bd*(Pd+3*Nd*i+a*(7*Rd+9*Od*i))),n*(Pd+Nd*i+a*(Rd+Od*i))]}function Fd(t,e){var n=Pr(e),i=Pr(t)*n;return[n*_r(t)/i,_r(e)/i]}function zd(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Hd(t,e){return[Pr(e)*_r(t),_r(e)]}function qd(t,e){var n=Pr(e),i=1+Pr(t)*n;return[n*_r(t)/i,_r(e)/i]}function Vd(t,e){return[Or(Hr((Ar+e)/2)),-t]}function jd(t,e){return t.parent===e.parent?1:2}function Wd(t,e){return t+e.x}function Ud(t,e){return Math.max(t,e.y)}function Gd(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Yd(t,e){var n,i,a,s,r,o=new Jd(t),l=+t.value&&(o.value=t.value),c=[o];for(null==e&&(e=Kd);n=c.pop();)if(l&&(n.value=+n.data.value),(a=e(n.data))&&(r=a.length))for(n.children=new Array(r),s=r-1;s>=0;--s)c.push(i=n.children[s]=new Jd(a[s])),i.parent=n,i.depth=n.depth+1;return o.eachBefore(Qd)}function Kd(t){return t.children}function Xd(t){t.data=t.data.data}function Qd(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Jd(t){this.data=t,this.depth=this.height=0,this.parent=null}_d.invert=function(t,e){for(var n,i=e,a=i*i,s=a*a*a,r=0;r<12&&(s=(a=(i-=n=(i*(Pd+Nd*a+s*(Rd+Od*a))-e)/(Pd+3*Nd*a+s*(7*Rd+9*Od*a)))*i)*a*a,!(Ir(n)<kr));++r);return[Bd*t*(Pd+3*Nd*a+s*(7*Rd+9*Od*a))/Pr(i),Vr(_r(i)/Bd)]},Fd.invert=Td(Mr),zd.invert=function(t,e){var n,i=e,a=25;do{var s=i*i,r=s*s;i-=n=(i*(1.007226+s*(.015085+r*(.028874*s-.044475-.005916*r)))-e)/(1.007226+s*(.045255+r*(.259866*s-.311325-.005916*11*r)))}while(Ir(n)>Cr&&--a>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},Hd.invert=Td(Vr),qd.invert=Td(function(t){return 2*Mr(t)}),Vd.invert=function(t,e){return[-e,2*Mr(Rr(t))-Ar]},Jd.prototype=Yd.prototype={constructor:Jd,count:function(){return this.eachAfter(Gd)},each:function(t){var e,n,i,a,s=this,r=[s];do{for(e=r.reverse(),r=[];s=e.pop();)if(t(s),n=s.children)for(i=0,a=n.length;i<a;++i)r.push(n[i])}while(r.length);return this},eachAfter:function(t){for(var e,n,i,a=this,s=[a],r=[];a=s.pop();)if(r.push(a),e=a.children)for(n=0,i=e.length;n<i;++n)s.push(e[n]);for(;a=r.pop();)t(a);return this},eachBefore:function(t){for(var e,n,i=this,a=[i];i=a.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)a.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Yd(this).eachBefore(Xd)}};var Zd=Array.prototype.slice;function tu(t){for(var e,n,i=0,a=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Zd.call(t))).length,s=[];i<a;)e=t[i],n&&iu(n,e)?++i:(n=su(s=eu(s,e)),i=0);return n}function eu(t,e){var n,i;if(au(e,t))return[e];for(n=0;n<t.length;++n)if(nu(e,t[n])&&au(ru(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(nu(ru(t[n],t[i]),e)&&nu(ru(t[n],e),t[i])&&nu(ru(t[i],e),t[n])&&au(ou(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function nu(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function iu(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function au(t,e){for(var n=0;n<e.length;++n)if(!iu(t,e[n]))return!1;return!0}function su(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return ru(t[0],t[1]);case 3:return ou(t[0],t[1],t[2])}}function ru(t,e){var n=t.x,i=t.y,a=t.r,s=e.x,r=e.y,o=e.r,l=s-n,c=r-i,d=o-a,u=Math.sqrt(l*l+c*c);return{x:(n+s+l/u*d)/2,y:(i+r+c/u*d)/2,r:(u+a+o)/2}}function ou(t,e,n){var i=t.x,a=t.y,s=t.r,r=e.x,o=e.y,l=e.r,c=n.x,d=n.y,u=n.r,h=i-r,p=i-c,f=a-o,g=a-d,m=l-s,v=u-s,b=i*i+a*a-s*s,y=b-r*r-o*o+l*l,w=b-c*c-d*d+u*u,x=p*f-h*g,C=(f*w-g*y)/(2*x)-i,k=(g*m-f*v)/x,T=(p*y-h*w)/(2*x)-a,A=(h*v-p*m)/x,S=k*k+A*A-1,E=2*(s+C*k+T*A),$=C*C+T*T-s*s,D=-(S?(E+Math.sqrt(E*E-4*S*$))/(2*S):$/E);return{x:i+C+k*D,y:a+T+A*D,r:D}}function lu(t,e,n){var i,a,s,r,o=t.x-e.x,l=t.y-e.y,c=o*o+l*l;c?(a=e.r+n.r,a*=a,r=t.r+n.r,a>(r*=r)?(i=(c+r-a)/(2*c),s=Math.sqrt(Math.max(0,r/c-i*i)),n.x=t.x-i*o-s*l,n.y=t.y-i*l+s*o):(i=(c+a-r)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),n.x=e.x+i*o-s*l,n.y=e.y+i*l+s*o)):(n.x=e.x+n.r,n.y=e.y)}function cu(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function du(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return a*a+s*s}function uu(t){this._=t,this.next=null,this.previous=null}function hu(t){if(!(a=t.length))return 0;var e,n,i,a,s,r,o,l,c,d,u;if((e=t[0]).x=0,e.y=0,!(a>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;lu(n,e,i=t[2]),e=new uu(e),n=new uu(n),i=new uu(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<a;++o){lu(e._,n._,i=t[o]),i=new uu(i),l=n.next,c=e.previous,d=n._.r,u=e._.r;do{if(d<=u){if(cu(l._,i._)){n=l,e.next=n,n.previous=e,--o;continue t}d+=l._.r,l=l.next}else{if(cu(c._,i._)){(e=c).next=n,n.previous=e,--o;continue t}u+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,s=du(e);(i=i.next)!==n;)(r=du(i))<s&&(e=i,s=r);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=tu(e),o=0;o<a;++o)(e=t[o]).x-=i.x,e.y-=i.y;return i.r}function pu(t){return null==t?null:fu(t)}function fu(t){if("function"!=typeof t)throw new Error;return t}function gu(){return 0}function mu(t){return function(){return t}}function vu(t){return Math.sqrt(t.value)}function bu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function yu(t,e){return function(n){if(i=n.children){var i,a,s,r=i.length,o=t(n)*e||0;if(o)for(a=0;a<r;++a)i[a].r+=o;if(s=hu(i),o)for(a=0;a<r;++a)i[a].r-=o;n.r=s+o}}}function wu(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function xu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Cu(t,e,n,i,a){for(var s,r=t.children,o=-1,l=r.length,c=t.value&&(i-e)/t.value;++o<l;)(s=r[o]).y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*c}var ku={depth:-1},Tu={};function Au(t){return t.id}function Su(t){return t.parentId}function Eu(t,e){return t.parent===e.parent?1:2}function $u(t){var e=t.children;return e?e[0]:t.t}function Du(t){var e=t.children;return e?e[e.length-1]:t.t}function Iu(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Mu(t,e,n){return t.a.parent===e.parent?t.a:n}function Lu(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Pu(t,e,n,i,a){for(var s,r=t.children,o=-1,l=r.length,c=t.value&&(a-n)/t.value;++o<l;)(s=r[o]).x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}Lu.prototype=Object.create(Jd.prototype);var Nu=(1+Math.sqrt(5))/2;function Ru(t,e,n,i,a,s){for(var r,o,l,c,d,u,h,p,f,g,m,v=[],b=e.children,y=0,w=0,x=b.length,C=e.value;y<x;){l=a-n,c=s-i;do{d=b[w++].value}while(!d&&w<x);for(u=h=d,m=d*d*(g=Math.max(c/l,l/c)/(C*t)),f=Math.max(h/m,m/u);w<x;++w){if(d+=o=b[w].value,o<u&&(u=o),o>h&&(h=o),m=d*d*g,(p=Math.max(h/m,m/u))>f){d-=o;break}f=p}v.push(r={value:d,dice:l<c,children:b.slice(y,w)}),r.dice?Cu(r,n,i,a,C?i+=c*d/C:s):Pu(r,n,i,C?n+=l*d/C:a,s),C-=d,y=w}return v}var Ou=function t(e){function n(t,n,i,a,s){Ru(e,t,n,i,a,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Nu),Bu=function t(e){function n(t,n,i,a,s){if((r=t._squarify)&&r.ratio===e)for(var r,o,l,c,d,u=-1,h=r.length,p=t.value;++u<h;){for(l=(o=r[u]).children,c=o.value=0,d=l.length;c<d;++c)o.value+=l[c].value;o.dice?Cu(o,n,i,a,i+=(s-i)*o.value/p):Pu(o,n,i,n+=(a-n)*o.value/p,s),p-=o.value}else t._squarify=r=Ru(e,t,n,i,a,s),r.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Nu);function _u(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Fu(t,e){return t[0]-e[0]||t[1]-e[1]}function zu(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;++a){for(;i>1&&_u(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function Hu(){return Math.random()}var qu=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Hu),Vu=function t(e){function n(t,n){var i,a;return t=null==t?0:+t,n=null==n?1:+n,function(){var s;if(null!=i)s=i,i=null;else do{i=2*e()-1,s=2*e()-1,a=i*i+s*s}while(!a||a>1);return t+n*s*Math.sqrt(-2*Math.log(a)/a)}}return n.source=t,n}(Hu),ju=function t(e){function n(){var t=Vu.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Hu),Wu=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(Hu),Uu=function t(e){function n(t){var n=Wu.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Hu),Gu=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Hu);function Yu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ku(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Xu=Array.prototype,Qu=Xu.map,Ju=Xu.slice,Zu={name:"implicit"};function th(){var t=Ra(),e=[],n=[],i=Zu;function a(a){var s=a+"",r=t.get(s);if(!r){if(i!==Zu)return i;t.set(s,r=e.push(a))}return n[(r-1)%n.length]}return a.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Ra();for(var i,s,r=-1,o=n.length;++r<o;)t.has(s=(i=n[r])+"")||t.set(s,e.push(i));return a},a.range=function(t){return arguments.length?(n=Ju.call(t),a):n.slice()},a.unknown=function(t){return arguments.length?(i=t,a):i},a.copy=function(){return th(e,n).unknown(i)},Yu.apply(a,arguments),a}function eh(){var t,e,n=th().unknown(void 0),i=n.domain,a=n.range,s=[0,1],r=!1,o=0,l=0,c=.5;function d(){var n=i().length,d=s[1]<s[0],u=s[d-0],h=s[1-d];t=(h-u)/Math.max(1,n-o+2*l),r&&(t=Math.floor(t)),u+=(h-u-t*(n-o))*c,e=t*(1-o),r&&(u=Math.round(u),e=Math.round(e));var p=m(n).map(function(e){return u+t*e});return a(d?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),d()):i()},n.range=function(t){return arguments.length?(s=[+t[0],+t[1]],d()):s.slice()},n.rangeRound=function(t){return s=[+t[0],+t[1]],r=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(r=!!t,d()):r},n.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),d()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),d()):o},n.paddingOuter=function(t){return arguments.length?(l=+t,d()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),d()):c},n.copy=function(){return eh(i(),s).round(r).paddingInner(o).paddingOuter(l).align(c)},Yu.apply(d(),arguments)}function nh(t){return+t}var ih=[0,1];function ah(t){return t}function sh(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function rh(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function oh(t,e,n){var i=t[0],a=t[1],s=e[0],r=e[1];return a<i?(i=sh(a,i),s=n(r,s)):(i=sh(i,a),s=n(s,r)),function(t){return s(i(t))}}function lh(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),r=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)s[o]=sh(t[o],t[o+1]),r[o]=n(e[o],e[o+1]);return function(e){var n=a(t,e,1,i)-1;return r[n](s[n](e))}}function ch(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dh(){var t,e,n,i,a,s,r=ih,o=ih,l=vn,c=ah;function d(){return i=Math.min(r.length,o.length)>2?lh:oh,a=s=null,u}function u(e){return isNaN(e=+e)?n:(a||(a=i(r.map(t),o,l)))(t(c(e)))}return u.invert=function(n){return c(e((s||(s=i(o,r.map(t),hn)))(n)))},u.domain=function(t){return arguments.length?(r=Qu.call(t,nh),c===ah||(c=rh(r)),d()):r.slice()},u.range=function(t){return arguments.length?(o=Ju.call(t),d()):o.slice()},u.rangeRound=function(t){return o=Ju.call(t),l=bn,d()},u.clamp=function(t){return arguments.length?(c=t?rh(r):ah,u):c!==ah},u.interpolate=function(t){return arguments.length?(l=t,d()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,d()}}function uh(t,e){return dh()(t,e)}function hh(e,n,i,a){var s,r=C(e,n,i);switch((a=sr(null==a?",f":a)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(n));return null!=a.precision||isNaN(s=mr(r,o))||(a.precision=s),t.formatPrefix(a,o);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(s=vr(r,Math.max(Math.abs(e),Math.abs(n))))||(a.precision=s-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(s=gr(r))||(a.precision=s-2*("%"===a.type))}return t.format(a)}function ph(t){var e=t.domain;return t.ticks=function(t){var n=e();return w(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return hh(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,a=e(),s=0,r=a.length-1,o=a[s],l=a[r];return l<o&&(i=o,o=l,l=i,i=s,s=r,r=i),(i=x(o,l,n))>0?i=x(o=Math.floor(o/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=x(o=Math.ceil(o*i)/i,l=Math.floor(l*i)/i,n)),i>0?(a[s]=Math.floor(o/i)*i,a[r]=Math.ceil(l/i)*i,e(a)):i<0&&(a[s]=Math.ceil(o*i)/i,a[r]=Math.floor(l*i)/i,e(a)),t},t}function fh(t,e){var n,i=0,a=(t=t.slice()).length-1,s=t[i],r=t[a];return r<s&&(n=i,i=a,a=n,n=s,s=r,r=n),t[i]=e.floor(s),t[a]=e.ceil(r),t}function gh(t){return Math.log(t)}function mh(t){return Math.exp(t)}function vh(t){return-Math.log(-t)}function bh(t){return-Math.exp(-t)}function yh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function wh(t){return function(e){return-t(-e)}}function xh(e){var n,i,a=e(gh,mh),s=a.domain,r=10;function o(){return n=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(r),i=function(t){return 10===t?yh:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(r),s()[0]<0?(n=wh(n),i=wh(i),e(vh,bh)):e(gh,mh),a}return a.base=function(t){return arguments.length?(r=+t,o()):r},a.domain=function(t){return arguments.length?(s(t),o()):s()},a.ticks=function(t){var e,a=s(),o=a[0],l=a[a.length-1];(e=l<o)&&(h=o,o=l,l=h);var c,d,u,h=n(o),p=n(l),f=null==t?10:+t,g=[];if(!(r%1)&&p-h<f){if(h=Math.round(h)-1,p=Math.round(p)+1,o>0){for(;h<p;++h)for(d=1,c=i(h);d<r;++d)if(!((u=c*d)<o)){if(u>l)break;g.push(u)}}else for(;h<p;++h)for(d=r-1,c=i(h);d>=1;--d)if(!((u=c*d)<o)){if(u>l)break;g.push(u)}}else g=w(h,p,Math.min(p-h,f)).map(i);return e?g.reverse():g},a.tickFormat=function(e,s){if(null==s&&(s=10===r?".0e":","),"function"!=typeof s&&(s=t.format(s)),e===1/0)return s;null==e&&(e=10);var o=Math.max(1,r*e/a.ticks().length);return function(t){var e=t/i(Math.round(n(t)));return e*r<r-.5&&(e*=r),e<=o?s(t):""}},a.nice=function(){return s(fh(s(),{floor:function(t){return i(Math.floor(n(t)))},ceil:function(t){return i(Math.ceil(n(t)))}}))},a}function Ch(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function kh(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Th(t){var e=1,n=t(Ch(e),kh(e));return n.constant=function(n){return arguments.length?t(Ch(e=+n),kh(e)):e},ph(n)}function Ah(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sh(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Eh(t){return t<0?-t*t:t*t}function $h(t){var e=t(ah,ah),n=1;function i(){return 1===n?t(ah,ah):.5===n?t(Sh,Eh):t(Ah(n),Ah(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},ph(e)}function Dh(){var t=$h(dh());return t.copy=function(){return ch(t,Dh()).exponent(t.exponent())},Yu.apply(t,arguments),t}var Ih=new Date,Mh=new Date;function Lh(t,e,n,i){function a(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return a.floor=function(e){return t(e=new Date(+e)),e},a.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(n,i,s){var r,o=[];if(n=a.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return o;do{o.push(r=new Date(+n)),e(n,s),t(n)}while(r<n&&n<i);return o},a.filter=function(n){return Lh(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(a.count=function(e,i){return Ih.setTime(+e),Mh.setTime(+i),t(Ih),t(Mh),Math.floor(n(Ih,Mh))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(i?function(e){return i(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}var Ph=Lh(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ph.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Lh(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ph:null};var Nh=Ph.range,Rh=6e4,Oh=6048e5,Bh=Lh(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),_h=Bh.range,Fh=Lh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Rh)},function(t,e){return(e-t)/Rh},function(t){return t.getMinutes()}),zh=Fh.range,Hh=Lh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Rh)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),qh=Hh.range,Vh=Lh(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Rh)/864e5},function(t){return t.getDate()-1}),jh=Vh.range;function Wh(t){return Lh(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Rh)/Oh})}var Uh=Wh(0),Gh=Wh(1),Yh=Wh(2),Kh=Wh(3),Xh=Wh(4),Qh=Wh(5),Jh=Wh(6),Zh=Uh.range,tp=Gh.range,ep=Yh.range,np=Kh.range,ip=Xh.range,ap=Qh.range,sp=Jh.range,rp=Lh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),op=rp.range,lp=Lh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});lp.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Lh(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var cp=lp.range,dp=Lh(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Rh)},function(t,e){return(e-t)/Rh},function(t){return t.getUTCMinutes()}),up=dp.range,hp=Lh(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),pp=hp.range,fp=Lh(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),gp=fp.range;function mp(t){return Lh(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Oh})}var vp=mp(0),bp=mp(1),yp=mp(2),wp=mp(3),xp=mp(4),Cp=mp(5),kp=mp(6),Tp=vp.range,Ap=bp.range,Sp=yp.range,Ep=wp.range,$p=xp.range,Dp=Cp.range,Ip=kp.range,Mp=Lh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Lp=Mp.range,Pp=Lh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Pp.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Lh(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Np=Pp.range;function Rp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Op(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _p(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,s=t.days,r=t.shortDays,o=t.months,l=t.shortMonths,c=Up(a),d=Gp(a),u=Up(s),h=Gp(s),p=Up(r),f=Gp(r),g=Up(o),m=Gp(o),v=Up(l),b=Gp(l),y={a:function(t){return r[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:gf,e:gf,f:wf,H:mf,I:vf,j:bf,L:yf,m:xf,M:Cf,p:function(t){return a[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Xf,s:Qf,S:kf,u:Tf,U:Af,V:Sf,w:Ef,W:$f,x:null,X:null,y:Df,Y:If,Z:Mf,"%":Kf},w={a:function(t){return r[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Lf,e:Lf,f:Bf,H:Pf,I:Nf,j:Rf,L:Of,m:_f,M:Ff,p:function(t){return a[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Xf,s:Qf,S:zf,u:Hf,U:qf,V:Vf,w:jf,W:Wf,x:null,X:null,y:Uf,Y:Gf,Z:Yf,"%":Kf},x={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.w=h[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=b[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return T(t,e,n,i)},d:sf,e:sf,f:uf,H:of,I:of,j:rf,L:df,m:af,M:lf,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=d[i[0].toLowerCase()],n+i[0].length):-1},q:nf,Q:pf,s:ff,S:cf,u:Kp,U:Xp,V:Qp,w:Yp,W:Jp,x:function(t,e,i){return T(t,n,e,i)},X:function(t,e,n){return T(t,i,e,n)},y:tf,Y:Zp,Z:ef,"%":hf};function C(t,e){return function(n){var i,a,s,r=[],o=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===t.charCodeAt(o)&&(r.push(t.slice(l,o)),null!=(a=zp[i=t.charAt(++o)])?i=t.charAt(++o):a="e"===i?" ":"0",(s=e[i])&&(i=s(n,a)),r.push(i),l=o+1);return r.push(t.slice(l,o)),r.join("")}}function k(t,e){return function(n){var i,a,s=Bp(1900,void 0,1);if(T(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!e||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(i=Op(Bp(s.y,0,1))).getUTCDay(),i=a>4||0===a?bp.ceil(i):bp(i),i=fp.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(a=(i=Rp(Bp(s.y,0,1))).getDay(),i=a>4||0===a?Gh.ceil(i):Gh(i),i=Vh.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?Op(Bp(s.y,0,1)).getUTCDay():Rp(Bp(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Op(s)):Rp(s)}}function T(t,e,n,i){for(var a,s,r=0,o=e.length,l=n.length;r<o;){if(i>=l)return-1;if(37===(a=e.charCodeAt(r++))){if(a=e.charAt(r++),!(s=x[a in zp?e.charAt(r++):a])||(i=s(t,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}return y.x=C(n,y),y.X=C(i,y),y.c=C(e,y),w.x=C(n,w),w.X=C(i,w),w.c=C(e,w),{format:function(t){var e=C(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=C(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var Fp,zp={"-":"",_:" ",0:"0"},Hp=/^\s*\d+/,qp=/^%/,Vp=/[\\^$*+?|[\]().{}]/g;function jp(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(e)+a:a)}function Wp(t){return t.replace(Vp,"\\$&")}function Up(t){return new RegExp("^(?:"+t.map(Wp).join("|")+")","i")}function Gp(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Yp(t,e,n){var i=Hp.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Kp(t,e,n){var i=Hp.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Xp(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Qp(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Jp(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Zp(t,e,n){var i=Hp.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function tf(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function ef(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function nf(t,e,n){var i=Hp.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function af(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function sf(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function rf(t,e,n){var i=Hp.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function of(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function lf(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function cf(t,e,n){var i=Hp.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function df(t,e,n){var i=Hp.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function uf(t,e,n){var i=Hp.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function hf(t,e,n){var i=qp.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function pf(t,e,n){var i=Hp.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ff(t,e,n){var i=Hp.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function gf(t,e){return jp(t.getDate(),e,2)}function mf(t,e){return jp(t.getHours(),e,2)}function vf(t,e){return jp(t.getHours()%12||12,e,2)}function bf(t,e){return jp(1+Vh.count(lp(t),t),e,3)}function yf(t,e){return jp(t.getMilliseconds(),e,3)}function wf(t,e){return yf(t,e)+"000"}function xf(t,e){return jp(t.getMonth()+1,e,2)}function Cf(t,e){return jp(t.getMinutes(),e,2)}function kf(t,e){return jp(t.getSeconds(),e,2)}function Tf(t){var e=t.getDay();return 0===e?7:e}function Af(t,e){return jp(Uh.count(lp(t)-1,t),e,2)}function Sf(t,e){var n=t.getDay();return t=n>=4||0===n?Xh(t):Xh.ceil(t),jp(Xh.count(lp(t),t)+(4===lp(t).getDay()),e,2)}function Ef(t){return t.getDay()}function $f(t,e){return jp(Gh.count(lp(t)-1,t),e,2)}function Df(t,e){return jp(t.getFullYear()%100,e,2)}function If(t,e){return jp(t.getFullYear()%1e4,e,4)}function Mf(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jp(e/60|0,"0",2)+jp(e%60,"0",2)}function Lf(t,e){return jp(t.getUTCDate(),e,2)}function Pf(t,e){return jp(t.getUTCHours(),e,2)}function Nf(t,e){return jp(t.getUTCHours()%12||12,e,2)}function Rf(t,e){return jp(1+fp.count(Pp(t),t),e,3)}function Of(t,e){return jp(t.getUTCMilliseconds(),e,3)}function Bf(t,e){return Of(t,e)+"000"}function _f(t,e){return jp(t.getUTCMonth()+1,e,2)}function Ff(t,e){return jp(t.getUTCMinutes(),e,2)}function zf(t,e){return jp(t.getUTCSeconds(),e,2)}function Hf(t){var e=t.getUTCDay();return 0===e?7:e}function qf(t,e){return jp(vp.count(Pp(t)-1,t),e,2)}function Vf(t,e){var n=t.getUTCDay();return t=n>=4||0===n?xp(t):xp.ceil(t),jp(xp.count(Pp(t),t)+(4===Pp(t).getUTCDay()),e,2)}function jf(t){return t.getUTCDay()}function Wf(t,e){return jp(bp.count(Pp(t)-1,t),e,2)}function Uf(t,e){return jp(t.getUTCFullYear()%100,e,2)}function Gf(t,e){return jp(t.getUTCFullYear()%1e4,e,4)}function Yf(){return"+0000"}function Kf(){return"%"}function Xf(t){return+t}function Qf(t){return Math.floor(+t/1e3)}function Jf(e){return Fp=_p(e),t.timeFormat=Fp.format,t.timeParse=Fp.parse,t.utcFormat=Fp.utcFormat,t.utcParse=Fp.utcParse,Fp}Jf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Zf=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),tg=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),eg=1e3,ng=6e4,ig=60*ng,ag=24*ig,sg=30*ag,rg=365*ag;function og(t){return new Date(t)}function lg(t){return t instanceof Date?+t:+new Date(+t)}function cg(t,e,i,a,s,r,o,l,c){var d=uh(ah,ah),u=d.invert,h=d.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),y=c("%B"),w=c("%Y"),x=[[o,1,eg],[o,5,5e3],[o,15,15e3],[o,30,3e4],[r,1,ng],[r,5,5*ng],[r,15,15*ng],[r,30,30*ng],[s,1,ig],[s,3,3*ig],[s,6,6*ig],[s,12,12*ig],[a,1,ag],[a,2,2*ag],[i,1,6048e5],[e,1,sg],[e,3,3*sg],[t,1,rg]];function k(n){return(o(n)<n?p:r(n)<n?f:s(n)<n?g:a(n)<n?m:e(n)<n?i(n)<n?v:b:t(n)<n?y:w)(n)}function T(e,i,a,s){if(null==e&&(e=10),"number"==typeof e){var r=Math.abs(a-i)/e,o=n(function(t){return t[2]}).right(x,r);o===x.length?(s=C(i/rg,a/rg,e),e=t):o?(s=(o=x[r/x[o-1][2]<x[o][2]/r?o-1:o])[1],e=o[0]):(s=Math.max(C(i,a,e),1),e=l)}return null==s?e:e.every(s)}return d.invert=function(t){return new Date(u(t))},d.domain=function(t){return arguments.length?h(Qu.call(t,lg)):h().map(og)},d.ticks=function(t,e){var n,i=h(),a=i[0],s=i[i.length-1],r=s<a;return r&&(n=a,a=s,s=n),n=(n=T(t,a,s,e))?n.range(a,s+1):[],r?n.reverse():n},d.tickFormat=function(t,e){return null==e?k:c(e)},d.nice=function(t,e){var n=h();return(t=T(t,n[0],n[n.length-1],e))?h(fh(n,t)):d},d.copy=function(){return ch(d,cg(t,e,i,a,s,r,o,l,c))},d}function dg(){var t,e,n,i,a,s=0,r=1,o=ah,l=!1;function c(e){return isNaN(e=+e)?a:o(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}return c.domain=function(a){return arguments.length?(t=i(s=+a[0]),e=i(r=+a[1]),n=t===e?0:1/(e-t),c):[s,r]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(o=t,c):o},c.unknown=function(t){return arguments.length?(a=t,c):a},function(a){return i=a,t=a(s),e=a(r),n=t===e?0:1/(e-t),c}}function ug(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hg(){var t=$h(dg());return t.copy=function(){return ug(t,hg()).exponent(t.exponent())},Ku.apply(t,arguments)}function pg(){var t,e,n,i,a,s,r,o=0,l=.5,c=1,d=ah,u=!1;function h(t){return isNaN(t=+t)?r:(t=.5+((t=+s(t))-e)*(t<e?i:a),d(u?Math.max(0,Math.min(1,t)):t))}return h.domain=function(r){return arguments.length?(t=s(o=+r[0]),e=s(l=+r[1]),n=s(c=+r[2]),i=t===e?0:.5/(e-t),a=e===n?0:.5/(n-e),h):[o,l,c]},h.clamp=function(t){return arguments.length?(u=!!t,h):u},h.interpolator=function(t){return arguments.length?(d=t,h):d},h.unknown=function(t){return arguments.length?(r=t,h):r},function(r){return s=r,t=r(o),e=r(l),n=r(c),i=t===e?0:.5/(e-t),a=e===n?0:.5/(n-e),h}}function fg(){var t=$h(pg());return t.copy=function(){return ug(t,fg()).exponent(t.exponent())},Ku.apply(t,arguments)}function gg(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var mg=gg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vg=gg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),bg=gg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),yg=gg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),wg=gg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xg=gg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Cg=gg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),kg=gg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Tg=gg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ag=gg("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Sg(t){return rn(t[t.length-1])}var Eg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(gg),$g=Sg(Eg),Dg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(gg),Ig=Sg(Dg),Mg=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(gg),Lg=Sg(Mg),Pg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(gg),Ng=Sg(Pg),Rg=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(gg),Og=Sg(Rg),Bg=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(gg),_g=Sg(Bg),Fg=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(gg),zg=Sg(Fg),Hg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(gg),qg=Sg(Hg),Vg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gg),jg=Sg(Vg),Wg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(gg),Ug=Sg(Wg),Gg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(gg),Yg=Sg(Gg),Kg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(gg),Xg=Sg(Kg),Qg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(gg),Jg=Sg(Qg),Zg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(gg),tm=Sg(Zg),em=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(gg),nm=Sg(em),im=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(gg),am=Sg(im),sm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(gg),rm=Sg(sm),om=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(gg),lm=Sg(om),cm=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(gg),dm=Sg(cm),um=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(gg),hm=Sg(um),pm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(gg),fm=Sg(pm),gm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(gg),mm=Sg(gm),vm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(gg),bm=Sg(vm),ym=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(gg),wm=Sg(ym),xm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(gg),Cm=Sg(xm),km=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(gg),Tm=Sg(km),Am=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(gg),Sm=Sg(Am),Em=qn(Ye(300,.5,0),Ye(-240,.5,1)),$m=qn(Ye(-100,.75,.35),Ye(80,1.5,.8)),Dm=qn(Ye(260,.75,.35),Ye(80,1.5,.8)),Im=Ye(),Mm=he(),Lm=Math.PI/3,Pm=2*Math.PI/3;function Nm(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Rm=Nm(gg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Om=Nm(gg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Bm=Nm(gg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),_m=Nm(gg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Fm(t){return function(){return t}}var zm=Math.abs,Hm=Math.atan2,qm=Math.cos,Vm=Math.max,jm=Math.min,Wm=Math.sin,Um=Math.sqrt,Gm=1e-12,Ym=Math.PI,Km=Ym/2,Xm=2*Ym;function Qm(t){return t>=1?Km:t<=-1?-Km:Math.asin(t)}function Jm(t){return t.innerRadius}function Zm(t){return t.outerRadius}function tv(t){return t.startAngle}function ev(t){return t.endAngle}function nv(t){return t&&t.padAngle}function iv(t,e,n,i,a,s,r){var o=t-n,l=e-i,c=(r?s:-s)/Um(o*o+l*l),d=c*l,u=-c*o,h=t+d,p=e+u,f=n+d,g=i+u,m=(h+f)/2,v=(p+g)/2,b=f-h,y=g-p,w=b*b+y*y,x=a-s,C=h*g-f*p,k=(y<0?-1:1)*Um(Vm(0,x*x*w-C*C)),T=(C*y-b*k)/w,A=(-C*b-y*k)/w,S=(C*y+b*k)/w,E=(-C*b+y*k)/w,$=T-m,D=A-v,I=S-m,M=E-v;return $*$+D*D>I*I+M*M&&(T=S,A=E),{cx:T,cy:A,x01:-d,y01:-u,x11:T*(a/x-1),y11:A*(a/x-1)}}function av(t){this._context=t}function sv(t){return new av(t)}function rv(t){return t[0]}function ov(t){return t[1]}function lv(){var t=rv,e=ov,n=Fm(!0),i=null,a=sv,s=null;function r(r){var o,l,c,d=r.length,u=!1;for(null==i&&(s=a(c=$a())),o=0;o<=d;++o)!(o<d&&n(l=r[o],o,r))===u&&((u=!u)?s.lineStart():s.lineEnd()),u&&s.point(+t(l,o,r),+e(l,o,r));if(c)return s=null,c+""||null}return r.x=function(e){return arguments.length?(t="function"==typeof e?e:Fm(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Fm(+t),r):e},r.defined=function(t){return arguments.length?(n="function"==typeof t?t:Fm(!!t),r):n},r.curve=function(t){return arguments.length?(a=t,null!=i&&(s=a(i)),r):a},r.context=function(t){return arguments.length?(null==t?i=s=null:s=a(i=t),r):i},r}function cv(){var t=rv,e=null,n=Fm(0),i=ov,a=Fm(!0),s=null,r=sv,o=null;function l(l){var c,d,u,h,p,f=l.length,g=!1,m=new Array(f),v=new Array(f);for(null==s&&(o=r(p=$a())),c=0;c<=f;++c){if(!(c<f&&a(h=l[c],c,l))===g)if(g=!g)d=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),u=c-1;u>=d;--u)o.point(m[u],v[u]);o.lineEnd(),o.areaEnd()}g&&(m[c]=+t(h,c,l),v[c]=+n(h,c,l),o.point(e?+e(h,c,l):m[c],i?+i(h,c,l):v[c]))}if(p)return o=null,p+""||null}function c(){return lv().defined(a).curve(r).context(s)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:Fm(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Fm(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:Fm(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:Fm(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:Fm(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Fm(+t),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(t){return arguments.length?(a="function"==typeof t?t:Fm(!!t),l):a},l.curve=function(t){return arguments.length?(r=t,null!=s&&(o=r(s)),l):r},l.context=function(t){return arguments.length?(null==t?s=o=null:o=r(s=t),l):s},l}function dv(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function uv(t){return t}av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var hv=fv(sv);function pv(t){this._curve=t}function fv(t){function e(e){return new pv(t(e))}return e._curve=t,e}function gv(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(fv(t)):e()._curve},t}function mv(){return gv(lv().curve(hv))}function vv(){var t=cv().curve(hv),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,s=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return gv(n())},delete t.lineX0,t.lineEndAngle=function(){return gv(i())},delete t.lineX1,t.lineInnerRadius=function(){return gv(a())},delete t.lineY0,t.lineOuterRadius=function(){return gv(s())},delete t.lineY1,t.curve=function(t){return arguments.length?e(fv(t)):e()._curve},t}function bv(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}pv.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var yv=Array.prototype.slice;function wv(t){return t.source}function xv(t){return t.target}function Cv(t){var e=wv,n=xv,i=rv,a=ov,s=null;function r(){var r,o=yv.call(arguments),l=e.apply(this,o),c=n.apply(this,o);if(s||(s=r=$a()),t(s,+i.apply(this,(o[0]=l,o)),+a.apply(this,o),+i.apply(this,(o[0]=c,o)),+a.apply(this,o)),r)return s=null,r+""||null}return r.source=function(t){return arguments.length?(e=t,r):e},r.target=function(t){return arguments.length?(n=t,r):n},r.x=function(t){return arguments.length?(i="function"==typeof t?t:Fm(+t),r):i},r.y=function(t){return arguments.length?(a="function"==typeof t?t:Fm(+t),r):a},r.context=function(t){return arguments.length?(s=null==t?null:t,r):s},r}function kv(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function Tv(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function Av(t,e,n,i,a){var s=bv(e,n),r=bv(e,n=(n+a)/2),o=bv(i,n),l=bv(i,a);t.moveTo(s[0],s[1]),t.bezierCurveTo(r[0],r[1],o[0],o[1],l[0],l[1])}var Sv={draw:function(t,e){var n=Math.sqrt(e/Ym);t.moveTo(n,0),t.arc(0,0,n,0,Xm)}},Ev={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},$v=Math.sqrt(1/3),Dv=2*$v,Iv={draw:function(t,e){var n=Math.sqrt(e/Dv),i=n*$v;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Mv=Math.sin(Ym/10)/Math.sin(7*Ym/10),Lv=Math.sin(Xm/10)*Mv,Pv=-Math.cos(Xm/10)*Mv,Nv={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=Lv*n,a=Pv*n;t.moveTo(0,-n),t.lineTo(i,a);for(var s=1;s<5;++s){var r=Xm*s/5,o=Math.cos(r),l=Math.sin(r);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*a,l*i+o*a)}t.closePath()}},Rv={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},Ov=Math.sqrt(3),Bv={draw:function(t,e){var n=-Math.sqrt(e/(3*Ov));t.moveTo(0,2*n),t.lineTo(-Ov*n,-n),t.lineTo(Ov*n,-n),t.closePath()}},_v=Math.sqrt(3)/2,Fv=1/Math.sqrt(12),zv=3*(Fv/2+1),Hv={draw:function(t,e){var n=Math.sqrt(e/zv),i=n/2,a=n*Fv,s=i,r=n*Fv+n,o=-s,l=r;t.moveTo(i,a),t.lineTo(s,r),t.lineTo(o,l),t.lineTo(-.5*i-_v*a,_v*i+-.5*a),t.lineTo(-.5*s-_v*r,_v*s+-.5*r),t.lineTo(-.5*o-_v*l,_v*o+-.5*l),t.lineTo(-.5*i+_v*a,-.5*a-_v*i),t.lineTo(-.5*s+_v*r,-.5*r-_v*s),t.lineTo(-.5*o+_v*l,-.5*l-_v*o),t.closePath()}},qv=[Sv,Ev,Iv,Rv,Nv,Bv,Hv];function Vv(){}function jv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Wv(t){this._context=t}function Uv(t){this._context=t}function Gv(t){this._context=t}function Yv(t,e){this._basis=new Wv(t),this._beta=e}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Uv.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:jv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:jv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Yv.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,a=t[0],s=e[0],r=t[n]-a,o=e[n]-s,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(a+i*r),this._beta*e[l]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Kv=function t(e){function n(t){return 1===e?new Wv(t):new Yv(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Xv(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Qv(t,e){this._context=t,this._k=(1-e)/6}Qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xv(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Jv=function t(e){function n(t){return new Qv(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Zv(t,e){this._context=t,this._k=(1-e)/6}Zv.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var tb=function t(e){function n(t){return new Zv(t,e)}return n.tension=function(e){return t(+e)},n}(0);function eb(t,e){this._context=t,this._k=(1-e)/6}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nb=function t(e){function n(t){return new eb(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ib(t,e,n){var i=t._x1,a=t._y1,s=t._x2,r=t._y2;if(t._l01_a>Gm){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Gm){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/d,r=(r*c+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(i,a,s,r,t._x2,t._y2)}function ab(t,e){this._context=t,this._alpha=e}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ib(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sb=function t(e){function n(t){return e?new ab(t,e):new Qv(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function rb(t,e){this._context=t,this._alpha=e}rb.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ib(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ob=function t(e){function n(t){return e?new rb(t,e):new Zv(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function lb(t,e){this._context=t,this._alpha=e}lb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ib(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var cb=function t(e){function n(t){return e?new lb(t,e):new eb(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function db(t){this._context=t}function ub(t){return t<0?-1:1}function hb(t,e,n){var i=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(i||a<0&&-0),r=(n-t._y1)/(a||i<0&&-0),o=(s*a+r*i)/(i+a);return(ub(s)+ub(r))*Math.min(Math.abs(s),Math.abs(r),.5*Math.abs(o))||0}function pb(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fb(t,e,n){var i=t._x0,a=t._y0,s=t._x1,r=t._y1,o=(s-i)/3;t._context.bezierCurveTo(i+o,a+o*e,s-o,r-o*n,s,r)}function gb(t){this._context=t}function mb(t){this._context=new vb(t)}function vb(t){this._context=t}function bb(t){this._context=t}function yb(t){var e,n,i=t.length-1,a=new Array(i),s=new Array(i),r=new Array(i);for(a[0]=0,s[0]=2,r[0]=t[0]+2*t[1],e=1;e<i-1;++e)a[e]=1,s[e]=4,r[e]=4*t[e]+2*t[e+1];for(a[i-1]=2,s[i-1]=7,r[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=a[e]/s[e-1],s[e]-=n,r[e]-=n*r[e-1];for(a[i-1]=r[i-1]/s[i-1],e=i-2;e>=0;--e)a[e]=(r[e]-a[e+1])/s[e];for(s[i-1]=(t[i]+a[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function wb(t,e){this._context=t,this._t=e}function xb(t,e){if((a=t.length)>1)for(var n,i,a,s=1,r=t[e[0]],o=r.length;s<a;++s)for(i=r,r=t[e[s]],n=0;n<o;++n)r[n][1]+=r[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Cb(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function kb(t,e){return t[e]}function Tb(t){var e=t.map(Ab);return Cb(t).sort(function(t,n){return e[t]-e[n]})}function Ab(t){for(var e,n=-1,i=0,a=t.length,s=-1/0;++n<a;)(e=+t[n][1])>s&&(s=e,i=n);return i}function Sb(t){var e=t.map(Eb);return Cb(t).sort(function(t,n){return e[t]-e[n]})}function Eb(t){for(var e,n=0,i=-1,a=t.length;++i<a;)(e=+t[i][1])&&(n+=e);return n}function $b(t){return function(){return t}}function Db(t){return t[0]}function Ib(t){return t[1]}function Mb(){this._=null}function Lb(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pb(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Nb(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Rb(t){for(;t.L;)t=t.L;return t}function Ob(t,e,n,i){var a=[null,null],s=ry.push(a)-1;return a.left=t,a.right=e,n&&_b(a,t,e,n),i&&_b(a,e,t,i),ay[t.index].halfedges.push(s),ay[e.index].halfedges.push(s),a}function Bb(t,e,n){var i=[e,n];return i.left=t,i}function _b(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Fb(t,e,n,i,a){var s,r=t[0],o=t[1],l=r[0],c=r[1],d=0,u=1,h=o[0]-l,p=o[1]-c;if(s=e-l,h||!(s>0)){if(s/=h,h<0){if(s<d)return;s<u&&(u=s)}else if(h>0){if(s>u)return;s>d&&(d=s)}if(s=i-l,h||!(s<0)){if(s/=h,h<0){if(s>u)return;s>d&&(d=s)}else if(h>0){if(s<d)return;s<u&&(u=s)}if(s=n-c,p||!(s>0)){if(s/=p,p<0){if(s<d)return;s<u&&(u=s)}else if(p>0){if(s>u)return;s>d&&(d=s)}if(s=a-c,p||!(s<0)){if(s/=p,p<0){if(s>u)return;s>d&&(d=s)}else if(p>0){if(s<d)return;s<u&&(u=s)}return!(d>0||u<1)||(d>0&&(t[0]=[l+d*h,c+d*p]),u<1&&(t[1]=[l+u*h,c+u*p]),!0)}}}}}function zb(t,e,n,i,a){var s=t[1];if(s)return!0;var r,o,l=t[0],c=t.left,d=t.right,u=c[0],h=c[1],p=d[0],f=d[1],g=(u+p)/2,m=(h+f)/2;if(f===h){if(g<e||g>=i)return;if(u>p){if(l){if(l[1]>=a)return}else l=[g,n];s=[g,a]}else{if(l){if(l[1]<n)return}else l=[g,a];s=[g,n]}}else if(o=m-(r=(u-p)/(f-h))*g,r<-1||r>1)if(u>p){if(l){if(l[1]>=a)return}else l=[(n-o)/r,n];s=[(a-o)/r,a]}else{if(l){if(l[1]<n)return}else l=[(a-o)/r,a];s=[(n-o)/r,n]}else if(h<f){if(l){if(l[0]>=i)return}else l=[e,r*e+o];s=[i,r*i+o]}else{if(l){if(l[0]<e)return}else l=[i,r*i+o];s=[e,r*e+o]}return t[0]=l,t[1]=s,!0}function Hb(t,e){var n=t.site,i=e.left,a=e.right;return n===a&&(a=i,i=n),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(n===i?(i=e[1],a=e[0]):(i=e[0],a=e[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function qb(t,e){return e[+(e.left!==t.site)]}function Vb(t,e){return e[+(e.left===t.site)]}db.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},gb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fb(this,this._t0,pb(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fb(this,pb(this,n=hb(this,t,e)),n);break;default:fb(this,this._t0,n=hb(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(mb.prototype=Object.create(gb.prototype)).point=function(t,e){gb.prototype.point.call(this,e,t)},vb.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,s){this._context.bezierCurveTo(e,t,i,n,s,a)}},bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=yb(t),a=yb(e),s=0,r=1;r<n;++s,++r)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],t[r],e[r]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Mb.prototype={constructor:Mb,insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Rb(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(a=i.R)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(Pb(this,n),n=(t=n).U),n.C=!1,i.C=!0,Nb(this,i)):(a=i.L)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(Nb(this,n),n=(t=n).U),n.C=!1,i.C=!0,Pb(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,a=t.U,s=t.L,r=t.R;if(n=s?r?Rb(r):s:r,a?a.L===t?a.L=n:a.R=n:this._=n,s&&r?(i=n.C,n.C=t.C,n.L=s,s.U=n,n!==r?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=r,r.U=n):(n.U=a,a=n,t=n.R)):(i=t.C,t=n),t&&(t.U=a),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Pb(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Nb(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Pb(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,Nb(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pb(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,Nb(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}};var jb,Wb=[];function Ub(){Lb(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gb(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,a=t.site,s=n.site;if(i!==s){var r=a[0],o=a[1],l=i[0]-r,c=i[1]-o,d=s[0]-r,u=s[1]-o,h=2*(l*u-c*d);if(!(h>=-ly)){var p=l*l+c*c,f=d*d+u*u,g=(u*p-c*f)/h,m=(l*f-d*p)/h,v=Wb.pop()||new Ub;v.arc=t,v.site=a,v.x=g+r,v.y=(v.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=v;for(var b=null,y=sy._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}sy.insert(b,v),b||(jb=v)}}}}function Yb(t){var e=t.circle;e&&(e.P||(jb=e.N),sy.remove(e),Wb.push(e),Lb(e),t.circle=null)}var Kb=[];function Xb(){Lb(this),this.edge=this.site=this.circle=null}function Qb(t){var e=Kb.pop()||new Xb;return e.site=t,e}function Jb(t){Yb(t),iy.remove(t),Kb.push(t),Lb(t)}function Zb(t){var e=t.circle,n=e.x,i=e.cy,a=[n,i],s=t.P,r=t.N,o=[t];Jb(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<oy&&Math.abs(i-l.circle.cy)<oy;)s=l.P,o.unshift(l),Jb(l),l=s;o.unshift(l),Yb(l);for(var c=r;c.circle&&Math.abs(n-c.circle.x)<oy&&Math.abs(i-c.circle.cy)<oy;)r=c.N,o.push(c),Jb(c),c=r;o.push(c),Yb(c);var d,u=o.length;for(d=1;d<u;++d)c=o[d],l=o[d-1],_b(c.edge,l.site,c.site,a);l=o[0],(c=o[u-1]).edge=Ob(l.site,c.site,null,a),Gb(l),Gb(c)}function ty(t){for(var e,n,i,a,s=t[0],r=t[1],o=iy._;o;)if((i=ey(o,r)-s)>oy)o=o.L;else{if(!((a=s-ny(o,r))>oy)){i>-oy?(e=o.P,n=o):a>-oy?(e=o,n=o.N):e=n=o;break}if(!o.R){e=o;break}o=o.R}!function(t){ay[t.index]={site:t,halfedges:[]}}(t);var l=Qb(t);if(iy.insert(e,l),e||n){if(e===n)return Yb(e),n=Qb(e.site),iy.insert(l,n),l.edge=n.edge=Ob(e.site,l.site),Gb(e),void Gb(n);if(n){Yb(e),Yb(n);var c=e.site,d=c[0],u=c[1],h=t[0]-d,p=t[1]-u,f=n.site,g=f[0]-d,m=f[1]-u,v=2*(h*m-p*g),b=h*h+p*p,y=g*g+m*m,w=[(m*b-p*y)/v+d,(h*y-g*b)/v+u];_b(n.edge,c,f,w),l.edge=Ob(c,t,null,w),n.edge=Ob(t,f,null,w),Gb(e),Gb(n)}else l.edge=Ob(e.site,l.site)}}function ey(t,e){var n=t.site,i=n[0],a=n[1],s=a-e;if(!s)return i;var r=t.P;if(!r)return-1/0;var o=(n=r.site)[0],l=n[1],c=l-e;if(!c)return o;var d=o-i,u=1/s-1/c,h=d/c;return u?(-h+Math.sqrt(h*h-2*u*(d*d/(-2*c)-l+c/2+a-s/2)))/u+i:(i+o)/2}function ny(t,e){var n=t.N;if(n)return ey(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var iy,ay,sy,ry,oy=1e-6,ly=1e-12;function cy(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function dy(t,e){return e[1]-t[1]||e[0]-t[0]}function uy(t,e){var n,i,a,s=t.sort(dy).pop();for(ry=[],ay=new Array(t.length),iy=new Mb,sy=new Mb;;)if(a=jb,s&&(!a||s[1]<a.y||s[1]===a.y&&s[0]<a.x))s[0]===n&&s[1]===i||(ty(s),n=s[0],i=s[1]),s=t.pop();else{if(!a)break;Zb(a.arc)}if(function(){for(var t,e,n,i,a=0,s=ay.length;a<s;++a)if((t=ay[a])&&(i=(e=t.halfedges).length)){var r=new Array(i),o=new Array(i);for(n=0;n<i;++n)r[n]=n,o[n]=Hb(t,ry[e[n]]);for(r.sort(function(t,e){return o[e]-o[t]}),n=0;n<i;++n)o[n]=e[r[n]];for(n=0;n<i;++n)e[n]=o[n]}}(),e){var r=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var a,s=ry.length;s--;)zb(a=ry[s],t,e,n,i)&&Fb(a,t,e,n,i)&&(Math.abs(a[0][0]-a[1][0])>oy||Math.abs(a[0][1]-a[1][1])>oy)||delete ry[s]}(r,o,l,c),function(t,e,n,i){var a,s,r,o,l,c,d,u,h,p,f,g,m=ay.length,v=!0;for(a=0;a<m;++a)if(s=ay[a]){for(r=s.site,o=(l=s.halfedges).length;o--;)ry[l[o]]||l.splice(o,1);for(o=0,c=l.length;o<c;)f=(p=Vb(s,ry[l[o]]))[0],g=p[1],u=(d=qb(s,ry[l[++o%c]]))[0],h=d[1],(Math.abs(f-u)>oy||Math.abs(g-h)>oy)&&(l.splice(o,0,ry.push(Bb(r,p,Math.abs(f-t)<oy&&i-g>oy?[t,Math.abs(u-t)<oy?h:i]:Math.abs(g-i)<oy&&n-f>oy?[Math.abs(h-i)<oy?u:n,i]:Math.abs(f-n)<oy&&g-e>oy?[n,Math.abs(u-n)<oy?h:e]:Math.abs(g-e)<oy&&f-t>oy?[Math.abs(h-e)<oy?u:t,e]:null))-1),++c);c&&(v=!1)}if(v){var b,y,w,x=1/0;for(a=0,v=null;a<m;++a)(s=ay[a])&&(w=(b=(r=s.site)[0]-t)*b+(y=r[1]-e)*y)<x&&(x=w,v=s);if(v){var C=[t,e],k=[t,i],T=[n,i],A=[n,e];v.halfedges.push(ry.push(Bb(r=v.site,C,k))-1,ry.push(Bb(r,k,T))-1,ry.push(Bb(r,T,A))-1,ry.push(Bb(r,A,C))-1)}}for(a=0;a<m;++a)(s=ay[a])&&(s.halfedges.length||delete ay[a])}(r,o,l,c)}this.edges=ry,this.cells=ay,iy=sy=ry=ay=null}function hy(t){return function(){return t}}function py(t,e,n){this.target=t,this.type=e,this.transform=n}function fy(t,e,n){this.k=t,this.x=e,this.y=n}uy.prototype={constructor:uy,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return qb(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(s=(a=n.halfedges).length)for(var a,s,r,o=n.site,l=-1,c=e[a[s-1]],d=c.left===o?c.right:c.left;++l<s;)r=d,d=(c=e[a[l]]).left===o?c.right:c.left,r&&d&&i<r.index&&i<d.index&&cy(o,r,d)<0&&t.push([o.data,r.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,a,s=this,r=s._found||0,o=s.cells.length;!(a=s.cells[r]);)if(++r>=o)return null;var l=t-a.site[0],c=e-a.site[1],d=l*l+c*c;do{a=s.cells[i=r],r=null,a.halfedges.forEach(function(n){var i=s.edges[n],o=i.left;if(o!==a.site&&o||(o=i.right)){var l=t-o[0],c=e-o[1],u=l*l+c*c;u<d&&(d=u,r=o.index)}})}while(null!==r);return s._found=i,null==n||d<=n*n?a.site:null}},fy.prototype={constructor:fy,scale:function(t){return 1===t?this:new fy(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new fy(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gy=new fy(1,0,0);function my(t){for(;!t.__zoom;)if(!(t=t.parentNode))return gy;return t.__zoom}function vy(){t.event.stopImmediatePropagation()}function by(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function yy(){return!t.event.ctrlKey&&!t.event.button}function wy(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function xy(){return this.__zoom||gy}function Cy(){return-t.event.deltaY*(1===t.event.deltaMode?.05:t.event.deltaMode?1:.002)}function ky(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ty(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}my.prototype=fy.prototype,t.FormatSpecifier=rr,t.active=function(t,e){var n,i,a=t.__transition;if(a)for(i in e=null==e?null:e+"",a)if((n=a[i]).state>1&&n.name===e)return new bi([[t]],ji,e,+i);return null},t.arc=function(){var t=Jm,e=Zm,n=Fm(0),i=null,a=tv,s=ev,r=nv,o=null;function l(){var l,c,d=+t.apply(this,arguments),u=+e.apply(this,arguments),h=a.apply(this,arguments)-Km,p=s.apply(this,arguments)-Km,f=zm(p-h),g=p>h;if(o||(o=l=$a()),u<d&&(c=u,u=d,d=c),u>Gm)if(f>Xm-Gm)o.moveTo(u*qm(h),u*Wm(h)),o.arc(0,0,u,h,p,!g),d>Gm&&(o.moveTo(d*qm(p),d*Wm(p)),o.arc(0,0,d,p,h,g));else{var m,v,b=h,y=p,w=h,x=p,C=f,k=f,T=r.apply(this,arguments)/2,A=T>Gm&&(i?+i.apply(this,arguments):Um(d*d+u*u)),S=jm(zm(u-d)/2,+n.apply(this,arguments)),E=S,$=S;if(A>Gm){var D=Qm(A/d*Wm(T)),I=Qm(A/u*Wm(T));(C-=2*D)>Gm?(w+=D*=g?1:-1,x-=D):(C=0,w=x=(h+p)/2),(k-=2*I)>Gm?(b+=I*=g?1:-1,y-=I):(k=0,b=y=(h+p)/2)}var M=u*qm(b),L=u*Wm(b),P=d*qm(x),N=d*Wm(x);if(S>Gm){var R,O=u*qm(y),B=u*Wm(y),_=d*qm(w),F=d*Wm(w);if(f<Ym&&(R=function(t,e,n,i,a,s,r,o){var l=n-t,c=i-e,d=r-a,u=o-s,h=u*l-d*c;if(!(h*h<Gm))return[t+(h=(d*(e-s)-u*(t-a))/h)*l,e+h*c]}(M,L,_,F,O,B,P,N))){var z=M-R[0],H=L-R[1],q=O-R[0],V=B-R[1],j=1/Wm(function(t){return t>1?0:t<-1?Ym:Math.acos(t)}((z*q+H*V)/(Um(z*z+H*H)*Um(q*q+V*V)))/2),W=Um(R[0]*R[0]+R[1]*R[1]);E=jm(S,(d-W)/(j-1)),$=jm(S,(u-W)/(j+1))}}k>Gm?$>Gm?(m=iv(_,F,M,L,u,$,g),v=iv(O,B,P,N,u,$,g),o.moveTo(m.cx+m.x01,m.cy+m.y01),$<S?o.arc(m.cx,m.cy,$,Hm(m.y01,m.x01),Hm(v.y01,v.x01),!g):(o.arc(m.cx,m.cy,$,Hm(m.y01,m.x01),Hm(m.y11,m.x11),!g),o.arc(0,0,u,Hm(m.cy+m.y11,m.cx+m.x11),Hm(v.cy+v.y11,v.cx+v.x11),!g),o.arc(v.cx,v.cy,$,Hm(v.y11,v.x11),Hm(v.y01,v.x01),!g))):(o.moveTo(M,L),o.arc(0,0,u,b,y,!g)):o.moveTo(M,L),d>Gm&&C>Gm?E>Gm?(m=iv(P,N,O,B,d,-E,g),v=iv(M,L,_,F,d,-E,g),o.lineTo(m.cx+m.x01,m.cy+m.y01),E<S?o.arc(m.cx,m.cy,E,Hm(m.y01,m.x01),Hm(v.y01,v.x01),!g):(o.arc(m.cx,m.cy,E,Hm(m.y01,m.x01),Hm(m.y11,m.x11),!g),o.arc(0,0,d,Hm(m.cy+m.y11,m.cx+m.x11),Hm(v.cy+v.y11,v.cx+v.x11),g),o.arc(v.cx,v.cy,E,Hm(v.y11,v.x11),Hm(v.y01,v.x01),!g))):o.arc(0,0,d,x,w,g):o.lineTo(P,N)}else o.moveTo(0,0);if(o.closePath(),l)return o=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ym/2;return[qm(i)*n,Wm(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Fm(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Fm(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Fm(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Fm(+t),l):i},l.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Fm(+t),l):a},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Fm(+t),l):s},l.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:Fm(+t),l):r},l.context=function(t){return arguments.length?(o=null==t?null:t,l):o},l},t.area=cv,t.areaRadial=vv,t.ascending=e,t.autoType=function(t){for(var e in t){var n,i,a=t[e].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(i=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;As&&i[4]&&!i[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;t[e]=a}return t},t.axisBottom=function(t){return O(3,t)},t.axisLeft=function(t){return O(4,t)},t.axisRight=function(t){return O(2,t)},t.axisTop=function(t){return O(1,t)},t.bisect=a,t.bisectLeft=s,t.bisectRight=a,t.bisector=n,t.blob=function(t,e){return fetch(t,e).then(Ss)},t.brush=function(){return fa(ia)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.brushX=function(){return fa(ea)},t.brushY=function(){return fa(na)},t.buffer=function(t,e){return fetch(t,e).then(Es)},t.chord=function(){var t=0,e=null,n=null,i=null;function a(a){var s,r,o,l,c,d,u=a.length,h=[],p=m(u),f=[],g=[],v=g.groups=new Array(u),b=new Array(u*u);for(s=0,c=-1;++c<u;){for(r=0,d=-1;++d<u;)r+=a[c][d];h.push(r),f.push(m(u)),s+=r}for(e&&p.sort(function(t,n){return e(h[t],h[n])}),n&&f.forEach(function(t,e){t.sort(function(t,i){return n(a[e][t],a[e][i])})}),l=(s=wa(0,ya-t*u)/s)?t:ya/u,r=0,c=-1;++c<u;){for(o=r,d=-1;++d<u;){var y=p[c],w=f[y][d],x=a[y][w],C=r,k=r+=x*s;b[w*u+y]={index:y,subindex:w,startAngle:C,endAngle:k,value:x}}v[y]={index:y,startAngle:o,endAngle:r,value:h[y]},r+=l}for(c=-1;++c<u;)for(d=c-1;++d<u;){var T=b[d*u+c],A=b[c*u+d];(T.value||A.value)&&g.push(T.value<A.value?{source:A,target:T}:{source:T,target:A})}return i?g.sort(i):g}return a.padAngle=function(e){return arguments.length?(t=wa(0,e),a):t},a.sortGroups=function(t){return arguments.length?(e=t,a):e},a.sortSubgroups=function(t){return arguments.length?(n=t,a):n},a.sortChords=function(t){return arguments.length?(null==t?i=null:(i=xa(t))._=t,a):i&&i._},a},t.clientPoint=Pt,t.cluster=function(){var t=jd,e=1,n=1,i=!1;function a(a){var s,r=0;a.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Wd,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Ud,0)}(n)):(e.x=s?r+=t(e,s):0,e.y=0,s=e)});var o=function(t){for(var e;e=t.children;)t=e[0];return t}(a),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(a),c=o.x-t(o,l)/2,d=l.x+t(l,o)/2;return a.eachAfter(i?function(t){t.x=(t.x-a.x)*e,t.y=(a.y-t.y)*n}:function(t){t.x=(t.x-c)/(d-c)*e,t.y=(1-(a.y?t.y/a.y:1))*n})}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],a):i?null:[e,n]},a.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],a):i?[e,n]:null},a},t.color=le,t.contourDensity=function(){var t=ts,e=es,n=ns,i=960,a=500,s=20,r=2,o=3*s,l=i+2*o>>r,c=a+2*o>>r,d=Wa(20);function u(i){var a=new Float32Array(l*c),u=new Float32Array(l*c);i.forEach(function(i,s,d){var u=+t(i,s,d)+o>>r,h=+e(i,s,d)+o>>r,p=+n(i,s,d);u>=0&&u<l&&h>=0&&h<c&&(a[u+h*l]+=p)}),Ja({width:l,height:c,data:a},{width:l,height:c,data:u},s>>r),Za({width:l,height:c,data:u},{width:l,height:c,data:a},s>>r),Ja({width:l,height:c,data:a},{width:l,height:c,data:u},s>>r),Za({width:l,height:c,data:u},{width:l,height:c,data:a},s>>r),Ja({width:l,height:c,data:a},{width:l,height:c,data:u},s>>r),Za({width:l,height:c,data:u},{width:l,height:c,data:a},s>>r);var p=d(a);if(!Array.isArray(p)){var f=A(a);p=C(0,f,p),(p=m(0,Math.floor(f/p)*p,p)).shift()}return Qa().thresholds(p).size([l,c])(a).map(h)}function h(t){return t.value*=Math.pow(2,-2*r),t.coordinates.forEach(p),t}function p(t){t.forEach(f)}function f(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,r)-o,t[1]=t[1]*Math.pow(2,r)-o}function v(){return l=i+2*(o=3*s)>>r,c=a+2*o>>r,u}return u.x=function(e){return arguments.length?(t="function"==typeof e?e:Wa(+e),u):t},u.y=function(t){return arguments.length?(e="function"==typeof t?t:Wa(+t),u):e},u.weight=function(t){return arguments.length?(n="function"==typeof t?t:Wa(+t),u):n},u.size=function(t){if(!arguments.length)return[i,a];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return i=e,a=n,v()},u.cellSize=function(t){if(!arguments.length)return 1<<r;if(!((t=+t)>=1))throw new Error("invalid cell size");return r=Math.floor(Math.log(t)/Math.LN2),v()},u.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?Wa(Va.call(t)):Wa(t),u):d},u.bandwidth=function(t){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},u},t.contours=Qa,t.create=function(t){return $t(U(t).call(document.documentElement))},t.creator=U,t.cross=function(t,e,n){var i,a,s,o,l=t.length,c=e.length,d=new Array(l*c);for(null==n&&(n=r),i=s=0;i<l;++i)for(o=t[i],a=0;a<c;++a,++s)d[s]=n(o,e[a]);return d},t.csv=Ms,t.csvFormat=hs,t.csvFormatBody=ps,t.csvFormatRow=gs,t.csvFormatRows=fs,t.csvFormatValue=ms,t.csvParse=ds,t.csvParseRows=us,t.cubehelix=Ye,t.curveBasis=function(t){return new Wv(t)},t.curveBasisClosed=function(t){return new Uv(t)},t.curveBasisOpen=function(t){return new Gv(t)},t.curveBundle=Kv,t.curveCardinal=Jv,t.curveCardinalClosed=tb,t.curveCardinalOpen=nb,t.curveCatmullRom=sb,t.curveCatmullRomClosed=ob,t.curveCatmullRomOpen=cb,t.curveLinear=sv,t.curveLinearClosed=function(t){return new db(t)},t.curveMonotoneX=function(t){return new gb(t)},t.curveMonotoneY=function(t){return new mb(t)},t.curveNatural=function(t){return new bb(t)},t.curveStep=function(t){return new wb(t,.5)},t.curveStepAfter=function(t){return new wb(t,1)},t.curveStepBefore=function(t){return new wb(t,0)},t.customEvent=kt,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=c,t.dispatch=_,t.drag=function(){var e,n,i,a,s=qt,r=Vt,o=jt,l=Wt,c={},d=_("start","drag","end"),u=0,h=0;function p(t){t.on("mousedown.drag",f).filter(l).on("touchstart.drag",v).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!a&&s.apply(this,arguments)){var o=w("mouse",r.apply(this,arguments),Nt,this,arguments);o&&($t(t.event.view).on("mousemove.drag",g,!0).on("mouseup.drag",m,!0),_t(t.event.view),Ot(),i=!1,e=t.event.clientX,n=t.event.clientY,o("start"))}}function g(){if(Bt(),!i){var a=t.event.clientX-e,s=t.event.clientY-n;i=a*a+s*s>h}c.mouse("drag")}function m(){$t(t.event.view).on("mousemove.drag mouseup.drag",null),Ft(t.event.view,i),Bt(),c.mouse("end")}function v(){if(s.apply(this,arguments)){var e,n,i=t.event.changedTouches,a=r.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(n=w(i[e].identifier,a,Rt,this,arguments))&&(Ot(),n("start"))}}function b(){var e,n,i=t.event.changedTouches,a=i.length;for(e=0;e<a;++e)(n=c[i[e].identifier])&&(Bt(),n("drag"))}function y(){var e,n,i=t.event.changedTouches,s=i.length;for(a&&clearTimeout(a),a=setTimeout(function(){a=null},500),e=0;e<s;++e)(n=c[i[e].identifier])&&(Ot(),n("end"))}function w(e,n,i,a,s){var r,l,h,f=i(n,e),g=d.copy();if(kt(new Ht(p,"beforestart",r,e,u,f[0],f[1],0,0,g),function(){return null!=(t.event.subject=r=o.apply(a,s))&&(l=r.x-f[0]||0,h=r.y-f[1]||0,!0)}))return function t(o){var d,m=f;switch(o){case"start":c[e]=t,d=u++;break;case"end":delete c[e],--u;case"drag":f=i(n,e),d=u}kt(new Ht(p,o,r,e,d,f[0]+l,f[1]+h,f[0]-m[0],f[1]-m[1],g),g.apply,g,[o,a,s])}}return p.filter=function(t){return arguments.length?(s="function"==typeof t?t:zt(!!t),p):s},p.container=function(t){return arguments.length?(r="function"==typeof t?t:zt(t),p):r},p.subject=function(t){return arguments.length?(o="function"==typeof t?t:zt(t),p):o},p.touchable=function(t){return arguments.length?(l="function"==typeof t?t:zt(!!t),p):l},p.on=function(){var t=d.on.apply(d,arguments);return t===d?p:t},p.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,p):Math.sqrt(h)},p},t.dragDisable=_t,t.dragEnable=Ft,t.dsv=function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var a=ls(t);return Ds(e,n).then(function(t){return a.parse(t,i)})},t.dsvFormat=ls,t.easeBack=Bi,t.easeBackIn=Ri,t.easeBackInOut=Bi,t.easeBackOut=Oi,t.easeBounce=Ni,t.easeBounceIn=function(t){return 1-Ni(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-Ni(1-t):Ni(t-1)+1)/2},t.easeBounceOut=Ni,t.easeCircle=Mi,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=Mi,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=ki,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=ki,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=zi,t.easeElasticIn=Fi,t.easeElasticInOut=Hi,t.easeElasticOut=zi,t.easeExp=Ii,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpInOut=Ii,t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeLinear=function(t){return+t},t.easePoly=Si,t.easePolyIn=Ti,t.easePolyInOut=Si,t.easePolyOut=Ai,t.easeQuad=Ci,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=Ci,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=Di,t.easeSinIn=function(t){return 1-Math.cos(t*$i)},t.easeSinInOut=Di,t.easeSinOut=function(t){return Math.sin(t*$i)},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.extent=d,t.forceCenter=function(t,e){var n;function i(){var i,a,s=n.length,r=0,o=0;for(i=0;i<s;++i)r+=(a=n[i]).x,o+=a.y;for(r=r/s-t,o=o/s-e,i=0;i<s;++i)(a=n[i]).x-=r,a.y-=o}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},t.forceCollide=function(t){var e,n,i=1,a=1;function s(){for(var t,s,o,l,c,d,u,h=e.length,p=0;p<a;++p)for(s=js(e,Ys,Ks).visitAfter(r),t=0;t<h;++t)o=e[t],d=n[o.index],u=d*d,l=o.x+o.vx,c=o.y+o.vy,s.visit(f);function f(t,e,n,a,s){var r=t.data,h=t.r,p=d+h;if(!r)return e>l+p||a<l-p||n>c+p||s<c-p;if(r.index>o.index){var f=l-r.x-r.vx,g=c-r.y-r.vy,m=f*f+g*g;m<p*p&&(0===f&&(m+=(f=Fs())*f),0===g&&(m+=(g=Fs())*g),m=(p-(m=Math.sqrt(m)))/m*i,o.vx+=(f*=m)*(p=(h*=h)/(u+h)),o.vy+=(g*=m)*p,r.vx-=f*(p=1-p),r.vy-=g*p)}}}function r(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function o(){if(e){var i,a,s=e.length;for(n=new Array(s),i=0;i<s;++i)a=e[i],n[a.index]=+t(a,i,e)}}return"function"!=typeof t&&(t=_s(null==t?1:+t)),s.initialize=function(t){e=t,o()},s.iterations=function(t){return arguments.length?(a=+t,s):a},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),o(),s):t},s},t.forceLink=function(t){var e,n,i,a,s,r=Xs,o=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},l=_s(30),c=1;function d(i){for(var a=0,r=t.length;a<c;++a)for(var o,l,d,u,h,p,f,g=0;g<r;++g)l=(o=t[g]).source,u=(d=o.target).x+d.vx-l.x-l.vx||Fs(),h=d.y+d.vy-l.y-l.vy||Fs(),u*=p=((p=Math.sqrt(u*u+h*h))-n[g])/p*i*e[g],h*=p,d.vx-=u*(f=s[g]),d.vy-=h*f,l.vx+=u*(f=1-f),l.vy+=h*f}function u(){if(i){var o,l,c=i.length,d=t.length,u=Ra(i,r);for(o=0,a=new Array(c);o<d;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=Qs(u,l.source)),"object"!=typeof l.target&&(l.target=Qs(u,l.target)),a[l.source.index]=(a[l.source.index]||0)+1,a[l.target.index]=(a[l.target.index]||0)+1;for(o=0,s=new Array(d);o<d;++o)l=t[o],s[o]=a[l.source.index]/(a[l.source.index]+a[l.target.index]);e=new Array(d),h(),n=new Array(d),p()}}function h(){if(i)for(var n=0,a=t.length;n<a;++n)e[n]=+o(t[n],n,t)}function p(){if(i)for(var e=0,a=t.length;e<a;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t){i=t,u()},d.links=function(e){return arguments.length?(t=e,u(),d):t},d.id=function(t){return arguments.length?(r=t,d):r},d.iterations=function(t){return arguments.length?(c=+t,d):c},d.strength=function(t){return arguments.length?(o="function"==typeof t?t:_s(+t),h(),d):o},d.distance=function(t){return arguments.length?(l="function"==typeof t?t:_s(+t),p(),d):l},d},t.forceManyBody=function(){var t,e,n,i,a=_s(-30),s=1,r=1/0,o=.81;function l(i){var a,s=t.length,r=js(t,Js,Zs).visitAfter(d);for(n=i,a=0;a<s;++a)e=t[a],r.visit(u)}function c(){if(t){var e,n,s=t.length;for(i=new Array(s),e=0;e<s;++e)n=t[e],i[n.index]=+a(n,e,t)}}function d(t){var e,n,a,s,r,o=0,l=0;if(t.length){for(a=s=r=0;r<4;++r)(e=t[r])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,a+=n*e.x,s+=n*e.y);t.x=a/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=i[e.data.index]}while(e=e.next)}t.value=o}function u(t,a,l,c){if(!t.value)return!0;var d=t.x-e.x,u=t.y-e.y,h=c-a,p=d*d+u*u;if(h*h/o<p)return p<r&&(0===d&&(p+=(d=Fs())*d),0===u&&(p+=(u=Fs())*u),p<s&&(p=Math.sqrt(s*p)),e.vx+=d*t.value*n/p,e.vy+=u*t.value*n/p),!0;if(!(t.length||p>=r)){(t.data!==e||t.next)&&(0===d&&(p+=(d=Fs())*d),0===u&&(p+=(u=Fs())*u),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(h=i[t.data.index]*n/p,e.vx+=d*h,e.vy+=u*h)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:_s(+t),c(),l):a},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(r=t*t,l):Math.sqrt(r)},l.theta=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l},t.forceRadial=function(t,e,n){var i,a,s,r=_s(.1);function o(t){for(var r=0,o=i.length;r<o;++r){var l=i[r],c=l.x-e||1e-6,d=l.y-n||1e-6,u=Math.sqrt(c*c+d*d),h=(s[r]-u)*a[r]*t/u;l.vx+=c*h,l.vy+=d*h}}function l(){if(i){var e,n=i.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(i[e],e,i),a[e]=isNaN(s[e])?0:+r(i[e],e,i)}}return"function"!=typeof t&&(t=_s(+t)),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){i=t,l()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:_s(+t),l(),o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),l(),o):t},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(t){return arguments.length?(n=+t,o):n},o},t.forceSimulation=function(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),s=0,r=.6,o=Ra(),l=ti(d),c=_("tick","end");function d(){u(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function u(i){var l,c,d=t.length;void 0===i&&(i=1);for(var u=0;u<i;++u)for(n+=(s-n)*a,o.each(function(t){t(n)}),l=0;l<d;++l)null==(c=t[l]).fx?c.x+=c.vx*=r:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=r:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var a=10*Math.sqrt(n),s=n*tr;e.x=a*Math.cos(s),e.y=a*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:u,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),o.each(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(a=+t,e):+a},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(r=1-t,e):1-r},force:function(t,n){return arguments.length>1?(null==n?o.remove(t):o.set(t,p(n)),e):o.get(t)},find:function(e,n,i){var a,s,r,o,l,c=0,d=t.length;for(null==i?i=1/0:i*=i,c=0;c<d;++c)(r=(a=e-(o=t[c]).x)*a+(s=n-o.y)*s)<i&&(l=o,i=r);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},t.forceX=function(t){var e,n,i,a=_s(.1);function s(t){for(var a,s=0,r=e.length;s<r;++s)(a=e[s]).vx+=(i[s]-a.x)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+a(e[s],s,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:_s(+t),r(),s):a},s.x=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),r(),s):t},s},t.forceY=function(t){var e,n,i,a=_s(.1);function s(t){for(var a,s=0,r=e.length;s<r;++s)(a=e[s]).vy+=(i[s]-a.y)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+a(e[s],s,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:_s(+t),r(),s):a},s.y=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),r(),s):t},s},t.formatDefaultLocale=fr,t.formatLocale=pr,t.formatSpecifier=sr,t.geoAlbers=Cd,t.geoAlbersUsa=function(){var t,e,n,i,a,s,r=Cd(),o=xd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=xd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){s=[t,e]}};function d(t){var e=t[0],r=t[1];return s=null,n.point(e,r),s||(i.point(e,r),s)||(a.point(e,r),s)}function u(){return t=e=null,d}return d.invert=function(t){var e=r.scale(),n=r.translate(),i=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&i>=-.425&&i<-.214?o:a>=.166&&a<.234&&i>=-.214&&i<-.115?l:r).invert(t)},d.stream=function(n){return t&&e===n?t:(i=[r.stream(e=n),o.stream(n),l.stream(n)],a=i.length,t={point:function(t,e){for(var n=-1;++n<a;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<a;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<a;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<a;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<a;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<a;)i[t].polygonEnd()}});var i,a},d.precision=function(t){return arguments.length?(r.precision(t),o.precision(t),l.precision(t),u()):r.precision()},d.scale=function(t){return arguments.length?(r.scale(t),o.scale(.35*t),l.scale(t),d.translate(r.translate())):r.scale()},d.translate=function(t){if(!arguments.length)return r.translate();var e=r.scale(),s=+t[0],d=+t[1];return n=r.translate(t).clipExtent([[s-.455*e,d-.238*e],[s+.455*e,d+.238*e]]).stream(c),i=o.translate([s-.307*e,d+.201*e]).clipExtent([[s-.425*e+Cr,d+.12*e+Cr],[s-.214*e-Cr,d+.234*e-Cr]]).stream(c),a=l.translate([s-.205*e,d+.212*e]).clipExtent([[s-.214*e+Cr,d+.166*e+Cr],[s-.115*e-Cr,d+.234*e-Cr]]).stream(c),u()},d.fitExtent=function(t,e){return cd(d,t,e)},d.fitSize=function(t,e){return dd(d,t,e)},d.fitWidth=function(t,e){return ud(d,t,e)},d.fitHeight=function(t,e){return hd(d,t,e)},d.scale(1070)},t.geoArea=function(t){return ao.reset(),Qr(t,so),2*ao},t.geoAzimuthalEqualArea=function(){return vd(Ad).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Ad,t.geoAzimuthalEquidistant=function(){return vd(Sd).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Sd,t.geoBounds=function(t){var e,n,i,a,s,r,o;if(xo=wo=-(bo=yo=1/0),So=[],Qr(t,Wo),n=So.length){for(So.sort(tl),e=1,s=[i=So[0]];e<n;++e)el(i,(a=So[e])[0])||el(i,a[1])?(Zo(i[0],a[1])>Zo(i[0],i[1])&&(i[1]=a[1]),Zo(a[0],i[1])>Zo(i[0],i[1])&&(i[0]=a[0])):s.push(i=a);for(r=-1/0,e=0,i=s[n=s.length-1];e<=n;i=a,++e)a=s[e],(o=Zo(i[1],a[0]))>r&&(r=o,bo=a[0],wo=i[1])}return So=Eo=null,bo===1/0||yo===1/0?[[NaN,NaN],[NaN,NaN]]:[[bo,yo],[wo,xo]]},t.geoCentroid=function(t){$o=Do=Io=Mo=Lo=Po=No=Ro=Oo=Bo=_o=0,Qr(t,nl);var e=Oo,n=Bo,i=_o,a=e*e+n*n+i*i;return a<kr&&(e=Po,n=No,i=Ro,Do<Cr&&(e=Io,n=Mo,i=Lo),(a=e*e+n*n+i*i)<kr)?[NaN,NaN]:[Lr(n,e)*$r,Vr(i/zr(a))*$r]},t.geoCircle=function(){var t,e,n=pl([0,0]),i=pl(90),a=pl(6),s={point:function(n,i){t.push(n=e(n,i)),n[0]*=$r,n[1]*=$r}};function r(){var r=n.apply(this,arguments),o=i.apply(this,arguments)*Dr,l=a.apply(this,arguments)*Dr;return t=[],e=ml(-r[0]*Dr,-r[1]*Dr,0).invert,xl(s,o,l,1),r={type:"Polygon",coordinates:[t]},t=e=null,r}return r.center=function(t){return arguments.length?(n="function"==typeof t?t:pl([+t[0],+t[1]]),r):n},r.radius=function(t){return arguments.length?(i="function"==typeof t?t:pl(+t),r):i},r.precision=function(t){return arguments.length?(a="function"==typeof t?t:pl(+t),r):a},r},t.geoClipAntimeridian=Nl,t.geoClipCircle=Rl,t.geoClipExtent=function(){var t,e,n,i=0,a=0,s=960,r=500;return n={stream:function(n){return t&&e===n?t:t=_l(i,a,s,r)(e=n)},extent:function(o){return arguments.length?(i=+o[0][0],a=+o[0][1],s=+o[1][0],r=+o[1][1],t=e=null,n):[[i,a],[s,r]]}}},t.geoClipRectangle=_l,t.geoConicConformal=function(){return yd(Id).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Id,t.geoConicEqualArea=xd,t.geoConicEqualAreaRaw=wd,t.geoConicEquidistant=function(){return yd(Ld).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Ld,t.geoContains=function(t,e){return(t&&Ql.hasOwnProperty(t.type)?Ql[t.type]:Zl)(t,e)},t.geoDistance=Xl,t.geoEqualEarth=function(){return vd(_d).scale(177.158)},t.geoEqualEarthRaw=_d,t.geoEquirectangular=function(){return vd(Md).scale(152.63)},t.geoEquirectangularRaw=Md,t.geoGnomonic=function(){return vd(Fd).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Fd,t.geoGraticule=oc,t.geoGraticule10=function(){return oc()()},t.geoIdentity=function(){var t,e,n,i,a,s,r,o=1,l=0,c=0,d=1,u=1,h=0,p=null,f=1,g=1,m=rd({point:function(t,e){var n=y([t,e]);this.stream.point(n[0],n[1])}}),v=lc;function b(){return f=o*d,g=o*u,s=r=null,y}function y(n){var i=n[0]*f,a=n[1]*g;if(h){var s=a*t-i*e;i=i*t+a*e,a=s}return[i+l,a+c]}return y.invert=function(n){var i=n[0]-l,a=n[1]-c;if(h){var s=a*t+i*e;i=i*t-a*e,a=s}return[i/f,a/g]},y.stream=function(t){return s&&r===t?s:s=m(v(r=t))},y.postclip=function(t){return arguments.length?(v=t,p=n=i=a=null,b()):v},y.clipExtent=function(t){return arguments.length?(v=null==t?(p=n=i=a=null,lc):_l(p=+t[0][0],n=+t[0][1],i=+t[1][0],a=+t[1][1]),b()):null==p?null:[[p,n],[i,a]]},y.scale=function(t){return arguments.length?(o=+t,b()):o},y.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],b()):[l,c]},y.angle=function(n){return arguments.length?(e=_r(h=n%360*Dr),t=Pr(h),b()):h*$r},y.reflectX=function(t){return arguments.length?(d=t?-1:1,b()):d<0},y.reflectY=function(t){return arguments.length?(u=t?-1:1,b()):u<0},y.fitExtent=function(t,e){return cd(y,t,e)},y.fitSize=function(t,e){return dd(y,t,e)},y.fitWidth=function(t,e){return ud(y,t,e)},y.fitHeight=function(t,e){return hd(y,t,e)},y},t.geoInterpolate=function(t,e){var n=t[0]*Dr,i=t[1]*Dr,a=e[0]*Dr,s=e[1]*Dr,r=Pr(i),o=_r(i),l=Pr(s),c=_r(s),d=r*Pr(n),u=r*_r(n),h=l*Pr(a),p=l*_r(a),f=2*Vr(zr(jr(s-i)+r*l*jr(a-n))),g=_r(f),m=f?function(t){var e=_r(t*=f)/g,n=_r(f-t)/g,i=n*d+e*h,a=n*u+e*p,s=n*o+e*c;return[Lr(a,i)*$r,Lr(s,zr(i*i+a*a))*$r]}:function(){return[n*$r,i*$r]};return m.distance=f,m},t.geoLength=Gl,t.geoMercator=function(){return $d(Ed).scale(961/Er)},t.geoMercatorRaw=Ed,t.geoNaturalEarth1=function(){return vd(zd).scale(175.295)},t.geoNaturalEarth1Raw=zd,t.geoOrthographic=function(){return vd(Hd).scale(249.5).clipAngle(90+Cr)},t.geoOrthographicRaw=Hd,t.geoPath=function(t,e){var n,i,a=4.5;function s(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Qr(t,n(i))),i.result()}return s.area=function(t){return Qr(t,n(gc)),gc.result()},s.measure=function(t){return Qr(t,n(ed)),ed.result()},s.bounds=function(t){return Qr(t,n($c)),$c.result()},s.centroid=function(t){return Qr(t,n(_c)),_c.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,lc):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new ad):new Yc(e=t),"function"!=typeof a&&i.pointRadius(a),s):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t).context(e)},t.geoProjection=vd,t.geoProjectionMutator=bd,t.geoRotation=wl,t.geoStereographic=function(){return vd(qd).scale(250).clipAngle(142)},t.geoStereographicRaw=qd,t.geoStream=Qr,t.geoTransform=function(t){return{stream:rd(t)}},t.geoTransverseMercator=function(){var t=$d(Vd),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Vd,t.gray=function(t,e){return new Me(t,0,0,null==e?1:e)},t.hcl=Be,t.hierarchy=Yd,t.histogram=function(){var t=g,e=d,n=k;function i(i){var s,r,o=i.length,l=new Array(o);for(s=0;s<o;++s)l[s]=t(i[s],s,i);var c=e(l),d=c[0],u=c[1],h=n(l,d,u);Array.isArray(h)||(h=C(d,u,h),h=m(Math.ceil(d/h)*h,u,h));for(var p=h.length;h[0]<=d;)h.shift(),--p;for(;h[p-1]>u;)h.pop(),--p;var f,g=new Array(p+1);for(s=0;s<=p;++s)(f=g[s]=[]).x0=s>0?h[s-1]:d,f.x1=s<p?h[s]:u;for(s=0;s<o;++s)d<=(r=l[s])&&r<=u&&g[a(h,r,0,p)].push(i[s]);return g}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:f(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:f([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?f(h.call(t)):f(t),i):n},i},t.hsl=ye,t.html=Os,t.image=function(t,e){return new Promise(function(n,i){var a=new Image;for(var s in e)a[s]=e[s];a.onerror=i,a.onload=function(){n(a)},a.src=t})},t.interpolate=vn,t.interpolateArray=function(t,e){return(cn(e)?ln:dn)(t,e)},t.interpolateBasis=Qe,t.interpolateBasisClosed=Je,t.interpolateBlues=mm,t.interpolateBrBG=$g,t.interpolateBuGn=Ug,t.interpolateBuPu=Yg,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=Dm,t.interpolateCubehelix=Hn,t.interpolateCubehelixDefault=Em,t.interpolateCubehelixLong=qn,t.interpolateDate=un,t.interpolateDiscrete=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},t.interpolateGnBu=Xg,t.interpolateGreens=bm,t.interpolateGreys=wm,t.interpolateHcl=On,t.interpolateHclLong=Bn,t.interpolateHsl=Pn,t.interpolateHslLong=Nn,t.interpolateHue=function(t,e){var n=en(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},t.interpolateInferno=Bm,t.interpolateLab=function(t,e){var n=nn((t=Ie(t)).l,(e=Ie(e)).l),i=nn(t.a,e.a),a=nn(t.b,e.b),s=nn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=a(e),t.opacity=s(e),t+""}},t.interpolateMagma=Om,t.interpolateNumber=hn,t.interpolateNumberArray=ln,t.interpolateObject=pn,t.interpolateOrRd=Jg,t.interpolateOranges=Sm,t.interpolatePRGn=Ig,t.interpolatePiYG=Lg,t.interpolatePlasma=_m,t.interpolatePuBu=nm,t.interpolatePuBuGn=tm,t.interpolatePuOr=Ng,t.interpolatePuRd=am,t.interpolatePurples=Cm,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Im.h=360*t-100,Im.s=1.5-1.5*e,Im.l=.8-.9*e,Im+""},t.interpolateRdBu=Og,t.interpolateRdGy=_g,t.interpolateRdPu=rm,t.interpolateRdYlBu=zg,t.interpolateRdYlGn=qg,t.interpolateReds=Tm,t.interpolateRgb=an,t.interpolateRgbBasis=rn,t.interpolateRgbBasisClosed=on,t.interpolateRound=bn,t.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,Mm.r=255*(e=Math.sin(t))*e,Mm.g=255*(e=Math.sin(t+Lm))*e,Mm.b=255*(e=Math.sin(t+Pm))*e,Mm+""},t.interpolateSpectral=jg,t.interpolateString=mn,t.interpolateTransformCss=En,t.interpolateTransformSvg=$n,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=Rm,t.interpolateWarm=$m,t.interpolateYlGn=dm,t.interpolateYlGnBu=lm,t.interpolateYlOrBr=hm,t.interpolateYlOrRd=fm,t.interpolateZoom=Mn,t.interrupt=hi,t.interval=function(t,e,n){var i=new Zn,a=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Qn():+n,i.restart(function s(r){r+=a,i.restart(s,a+=e,n),t(r)},e,n),i)},t.isoFormat=Zf,t.isoParse=tg,t.json=function(t,e){return fetch(t,e).then(Ps)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.lab=Ie,t.lch=function(t,e,n,i){return 1===arguments.length?Oe(t):new _e(n,e,t,null==i?1:i)},t.line=lv,t.lineRadial=mv,t.linkHorizontal=function(){return Cv(kv)},t.linkRadial=function(){var t=Cv(Av);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return Cv(Tv)},t.local=It,t.map=Ra,t.matcher=Q,t.max=A,t.mean=function(t,e){var n,i=t.length,a=i,s=-1,r=0;if(null==e)for(;++s<i;)isNaN(n=o(t[s]))?--a:r+=n;else for(;++s<i;)isNaN(n=o(e(t[s],s,t)))?--a:r+=n;if(a)return r/a},t.median=function(t,n){var i,a=t.length,s=-1,r=[];if(null==n)for(;++s<a;)isNaN(i=o(t[s]))||r.push(i);else for(;++s<a;)isNaN(i=o(n(t[s],s,t)))||r.push(i);return T(r.sort(e),.5)},t.merge=S,t.min=E,t.mouse=Nt,t.namespace=W,t.namespaces=j,t.nest=function(){var t,e,n,i=[],a=[];function s(n,a,r,o){if(a>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,c,d,u=-1,h=n.length,p=i[a++],f=Ra(),g=r();++u<h;)(d=f.get(l=p(c=n[u])+""))?d.push(c):f.set(l,[c]);return f.each(function(t,e){o(g,e,s(t,a,r,o))}),g}return n={object:function(t){return s(t,0,Oa,Ba)},map:function(t){return s(t,0,_a,Fa)},entries:function(t){return function t(n,s){if(++s>i.length)return n;var r,o=a[s-1];return null!=e&&s>=i.length?r=n.entries():(r=[],n.each(function(e,n){r.push({key:n,values:t(e,s)})})),null!=o?r.sort(function(t,e){return o(t.key,e.key)}):r}(s(t,0,_a,Fa),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return a[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.now=Qn,t.pack=function(){var t=null,e=1,n=1,i=gu;function a(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(bu(t)).eachAfter(yu(i,.5)).eachBefore(wu(1)):a.eachBefore(bu(vu)).eachAfter(yu(gu,1)).eachAfter(yu(i,a.r/Math.min(e,n))).eachBefore(wu(Math.min(e,n)/(2*a.r))),a}return a.radius=function(e){return arguments.length?(t=pu(e),a):t},a.size=function(t){return arguments.length?(e=+t[0],n=+t[1],a):[e,n]},a.padding=function(t){return arguments.length?(i="function"==typeof t?t:mu(+t),a):i},a},t.packEnclose=tu,t.packSiblings=function(t){return hu(t),t},t.pairs=function(t,e){null==e&&(e=r);for(var n=0,i=t.length-1,a=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(a,a=t[++n]);return s},t.partition=function(){var t=1,e=1,n=0,i=!1;function a(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/s,a.eachBefore(function(t,e){return function(i){i.children&&Cu(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var a=i.x0,s=i.y0,r=i.x1-n,o=i.y1-n;r<a&&(a=r=(a+r)/2),o<s&&(s=o=(s+o)/2),i.x0=a,i.y0=s,i.x1=r,i.y1=o}}(e,s)),i&&a.eachBefore(xu),a}return a.round=function(t){return arguments.length?(i=!!t,a):i},a.size=function(n){return arguments.length?(t=+n[0],e=+n[1],a):[t,e]},a.padding=function(t){return arguments.length?(n=+t,a):n},a},t.path=$a,t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.pie=function(){var t=uv,e=dv,n=null,i=Fm(0),a=Fm(Xm),s=Fm(0);function r(r){var o,l,c,d,u,h=r.length,p=0,f=new Array(h),g=new Array(h),m=+i.apply(this,arguments),v=Math.min(Xm,Math.max(-Xm,a.apply(this,arguments)-m)),b=Math.min(Math.abs(v)/h,s.apply(this,arguments)),y=b*(v<0?-1:1);for(o=0;o<h;++o)(u=g[f[o]=o]=+t(r[o],o,r))>0&&(p+=u);for(null!=e?f.sort(function(t,n){return e(g[t],g[n])}):null!=n&&f.sort(function(t,e){return n(r[t],r[e])}),o=0,c=p?(v-h*y)/p:0;o<h;++o,m=d)l=f[o],d=m+((u=g[l])>0?u*c:0)+y,g[l]={data:r[l],index:o,value:u,startAngle:m,endAngle:d,padAngle:b};return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:Fm(+e),r):t},r.sortValues=function(t){return arguments.length?(e=t,n=null,r):e},r.sort=function(t){return arguments.length?(n=t,e=null,r):n},r.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Fm(+t),r):i},r.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Fm(+t),r):a},r.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Fm(+t),r):s},r},t.piecewise=function(t,e){for(var n=0,i=e.length-1,a=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(a,a=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return s[e](t-e)}},t.pointRadial=bv,t.polygonArea=function(t){for(var e,n=-1,i=t.length,a=t[i-1],s=0;++n<i;)e=a,a=t[n],s+=e[1]*a[0]-e[0]*a[1];return s/2},t.polygonCentroid=function(t){for(var e,n,i=-1,a=t.length,s=0,r=0,o=t[a-1],l=0;++i<a;)e=o,o=t[i],l+=n=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*n,r+=(e[1]+o[1])*n;return[s/(l*=3),r/l]},t.polygonContains=function(t,e){for(var n,i,a=t.length,s=t[a-1],r=e[0],o=e[1],l=s[0],c=s[1],d=!1,u=0;u<a;++u)n=(s=t[u])[0],(i=s[1])>o!=c>o&&r<(l-n)*(o-i)/(c-i)+n&&(d=!d),l=n,c=i;return d},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),a=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Fu),e=0;e<n;++e)a[e]=[i[e][0],-i[e][1]];var s=zu(i),r=zu(a),o=r[0]===s[0],l=r[r.length-1]===s[s.length-1],c=[];for(e=s.length-1;e>=0;--e)c.push(t[i[s[e]][2]]);for(e=+o;e<r.length-l;++e)c.push(t[i[r[e]][2]]);return c},t.polygonLength=function(t){for(var e,n,i=-1,a=t.length,s=t[a-1],r=s[0],o=s[1],l=0;++i<a;)e=r,n=o,e-=r=(s=t[i])[0],n-=o=s[1],l+=Math.sqrt(e*e+n*n);return l},t.precisionFixed=gr,t.precisionPrefix=mr,t.precisionRound=vr,t.quadtree=js,t.quantile=T,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.radialArea=vv,t.radialLine=mv,t.randomBates=Uu,t.randomExponential=Gu,t.randomIrwinHall=Wu,t.randomLogNormal=ju,t.randomNormal=Vu,t.randomUniform=qu,t.range=m,t.rgb=he,t.ribbon=function(){var t=Da,e=Ia,n=Ma,i=La,a=Pa,s=null;function r(){var r,o=Ca.call(arguments),l=t.apply(this,o),c=e.apply(this,o),d=+n.apply(this,(o[0]=l,o)),u=i.apply(this,o)-ba,h=a.apply(this,o)-ba,p=d*ga(u),f=d*ma(u),g=+n.apply(this,(o[0]=c,o)),m=i.apply(this,o)-ba,v=a.apply(this,o)-ba;if(s||(s=r=$a()),s.moveTo(p,f),s.arc(0,0,d,u,h),u===m&&h===v||(s.quadraticCurveTo(0,0,g*ga(m),g*ma(m)),s.arc(0,0,g,m,v)),s.quadraticCurveTo(0,0,p,f),s.closePath(),r)return s=null,r+""||null}return r.radius=function(t){return arguments.length?(n="function"==typeof t?t:ka(+t),r):n},r.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ka(+t),r):i},r.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ka(+t),r):a},r.source=function(e){return arguments.length?(t=e,r):t},r.target=function(t){return arguments.length?(e=t,r):e},r.context=function(t){return arguments.length?(s=null==t?null:t,r):s},r},t.scaleBand=eh,t.scaleDiverging=function t(){var e=ph(pg()(ah));return e.copy=function(){return ug(e,t())},Ku.apply(e,arguments)},t.scaleDivergingLog=function t(){var e=xh(pg()).domain([.1,1,10]);return e.copy=function(){return ug(e,t()).base(e.base())},Ku.apply(e,arguments)},t.scaleDivergingPow=fg,t.scaleDivergingSqrt=function(){return fg.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var e=Th(pg());return e.copy=function(){return ug(e,t()).constant(e.constant())},Ku.apply(e,arguments)},t.scaleIdentity=function t(e){var n;function i(t){return isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Qu.call(t,nh),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Qu.call(e,nh):[0,1],ph(i)},t.scaleImplicit=Zu,t.scaleLinear=function t(){var e=uh(ah,ah);return e.copy=function(){return ch(e,t())},Yu.apply(e,arguments),ph(e)},t.scaleLog=function t(){var e=xh(dh()).domain([1,10]);return e.copy=function(){return ch(e,t()).base(e.base())},Yu.apply(e,arguments),e},t.scaleOrdinal=th,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(eh.apply(null,arguments).paddingInner(1))},t.scalePow=Dh,t.scaleQuantile=function t(){var n,i=[],s=[],r=[];function o(){var t=0,e=Math.max(1,s.length);for(r=new Array(e-1);++t<e;)r[t-1]=T(i,t/e);return l}function l(t){return isNaN(t=+t)?n:s[a(r,t)]}return l.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:[e>0?r[e-1]:i[0],e<r.length?r[e]:i[i.length-1]]},l.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var n,a=0,s=t.length;a<s;++a)null==(n=t[a])||isNaN(n=+n)||i.push(n);return i.sort(e),o()},l.range=function(t){return arguments.length?(s=Ju.call(t),o()):s.slice()},l.unknown=function(t){return arguments.length?(n=t,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return t().domain(i).range(s).unknown(n)},Yu.apply(l,arguments)},t.scaleQuantize=function t(){var e,n=0,i=1,s=1,r=[.5],o=[0,1];function l(t){return t<=t?o[a(r,t,0,s)]:e}function c(){var t=-1;for(r=new Array(s);++t<s;)r[t]=((t+1)*i-(t-s)*n)/(s+1);return l}return l.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],c()):[n,i]},l.range=function(t){return arguments.length?(s=(o=Ju.call(t)).length-1,c()):o.slice()},l.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,r[0]]:e>=s?[r[s-1],i]:[r[e-1],r[e]]},l.unknown=function(t){return arguments.length?(e=t,l):l},l.thresholds=function(){return r.slice()},l.copy=function(){return t().domain([n,i]).range(o).unknown(e)},Yu.apply(ph(l),arguments)},t.scaleSequential=function t(){var e=ph(dg()(ah));return e.copy=function(){return ug(e,t())},Ku.apply(e,arguments)},t.scaleSequentialLog=function t(){var e=xh(dg()).domain([1,10]);return e.copy=function(){return ug(e,t()).base(e.base())},Ku.apply(e,arguments)},t.scaleSequentialPow=hg,t.scaleSequentialQuantile=function t(){var n=[],i=ah;function s(t){if(!isNaN(t=+t))return i((a(n,t)-1)/(n.length-1))}return s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var i,a=0,r=t.length;a<r;++a)null==(i=t[a])||isNaN(i=+i)||n.push(i);return n.sort(e),s},s.interpolator=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return t(i).domain(n)},Ku.apply(s,arguments)},t.scaleSequentialSqrt=function(){return hg.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var e=Th(dg());return e.copy=function(){return ug(e,t()).constant(e.constant())},Ku.apply(e,arguments)},t.scaleSqrt=function(){return Dh.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var e=Th(dh());return e.copy=function(){return ch(e,t()).constant(e.constant())},Yu.apply(e,arguments)},t.scaleThreshold=function t(){var e,n=[.5],i=[0,1],s=1;function r(t){return t<=t?i[a(n,t,0,s)]:e}return r.domain=function(t){return arguments.length?(n=Ju.call(t),s=Math.min(n.length,i.length-1),r):n.slice()},r.range=function(t){return arguments.length?(i=Ju.call(t),s=Math.min(n.length,i.length-1),r):i.slice()},r.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t().domain(n).range(i).unknown(e)},Yu.apply(r,arguments)},t.scaleTime=function(){return Yu.apply(cg(lp,rp,Uh,Vh,Hh,Fh,Bh,Ph,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return Yu.apply(cg(Pp,Mp,vp,fp,hp,dp,Bh,Ph,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){if(i=t.length){var i,a,s=0,r=0,o=t[r];for(null==n&&(n=e);++s<i;)(n(a=t[s],o)<0||0!==n(o,o))&&(o=a,r=s);return 0===n(o,o)?r:void 0}},t.schemeAccent=vg,t.schemeBlues=gm,t.schemeBrBG=Eg,t.schemeBuGn=Wg,t.schemeBuPu=Gg,t.schemeCategory10=mg,t.schemeDark2=bg,t.schemeGnBu=Kg,t.schemeGreens=vm,t.schemeGreys=ym,t.schemeOrRd=Qg,t.schemeOranges=Am,t.schemePRGn=Dg,t.schemePaired=yg,t.schemePastel1=wg,t.schemePastel2=xg,t.schemePiYG=Mg,t.schemePuBu=em,t.schemePuBuGn=Zg,t.schemePuOr=Pg,t.schemePuRd=im,t.schemePurples=xm,t.schemeRdBu=Rg,t.schemeRdGy=Bg,t.schemeRdPu=sm,t.schemeRdYlBu=Fg,t.schemeRdYlGn=Hg,t.schemeReds=km,t.schemeSet1=Cg,t.schemeSet2=kg,t.schemeSet3=Tg,t.schemeSpectral=Vg,t.schemeTableau10=Ag,t.schemeYlGn=cm,t.schemeYlGnBu=om,t.schemeYlOrBr=um,t.schemeYlOrRd=pm,t.select=$t,t.selectAll=function(t){return"string"==typeof t?new St([document.querySelectorAll(t)],[document.documentElement]):new St([null==t?[]:t],At)},t.selection=Et,t.selector=Y,t.selectorAll=X,t.set=qa,t.shuffle=function(t,e,n){for(var i,a,s=(null==n?t.length:n)-(e=null==e?0:+e);s;)a=Math.random()*s--|0,i=t[s+e],t[s+e]=t[a+e],t[a+e]=i;return t},t.stack=function(){var t=Fm([]),e=Cb,n=xb,i=kb;function a(a){var s,r,o=t.apply(this,arguments),l=a.length,c=o.length,d=new Array(c);for(s=0;s<c;++s){for(var u,h=o[s],p=d[s]=new Array(l),f=0;f<l;++f)p[f]=u=[0,+i(a[f],h,f,a)],u.data=a[f];p.key=h}for(s=0,r=e(d);s<c;++s)d[r[s]].index=s;return n(d,r),d}return a.keys=function(e){return arguments.length?(t="function"==typeof e?e:Fm(yv.call(e)),a):t},a.value=function(t){return arguments.length?(i="function"==typeof t?t:Fm(+t),a):i},a.order=function(t){return arguments.length?(e=null==t?Cb:"function"==typeof t?t:Fm(yv.call(t)),a):e},a.offset=function(t){return arguments.length?(n=null==t?xb:t,a):n},a},t.stackOffsetDiverging=function(t,e){if((o=t.length)>0)for(var n,i,a,s,r,o,l=0,c=t[e[0]].length;l<c;++l)for(s=r=0,n=0;n<o;++n)(a=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=r,i[0]=r+=a):(i[0]=0,i[1]=a)},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,a,s=0,r=t[0].length;s<r;++s){for(a=n=0;n<i;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<i;++n)t[n][s][1]/=a}xb(t,e)}},t.stackOffsetNone=xb,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,a=t[e[0]],s=a.length;i<s;++i){for(var r=0,o=0;r<n;++r)o+=t[r][i][1]||0;a[i][1]+=a[i][0]=-o/2}xb(t,e)}},t.stackOffsetWiggle=function(t,e){if((a=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,a,s=0,r=1;r<i;++r){for(var o=0,l=0,c=0;o<a;++o){for(var d=t[e[o]],u=d[r][1]||0,h=(u-(d[r-1][1]||0))/2,p=0;p<o;++p){var f=t[e[p]];h+=(f[r][1]||0)-(f[r-1][1]||0)}l+=u,c+=h*u}n[r-1][1]+=n[r-1][0]=s,l&&(s-=c/l)}n[r-1][1]+=n[r-1][0]=s,xb(t,e)}},t.stackOrderAppearance=Tb,t.stackOrderAscending=Sb,t.stackOrderDescending=function(t){return Sb(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,a=t.map(Eb),s=Tb(t),r=0,o=0,l=[],c=[];for(e=0;e<i;++e)n=s[e],r<o?(r+=a[n],l.push(n)):(o+=a[n],c.push(n));return c.reverse().concat(l)},t.stackOrderNone=Cb,t.stackOrderReverse=function(t){return Cb(t).reverse()},t.stratify=function(){var t=Au,e=Su;function n(n){var i,a,s,r,o,l,c,d=n.length,u=new Array(d),h={};for(a=0;a<d;++a)i=n[a],o=u[a]=new Jd(i),null!=(l=t(i,a,n))&&(l+="")&&(h[c="$"+(o.id=l)]=c in h?Tu:o);for(a=0;a<d;++a)if(o=u[a],null!=(l=e(n[a],a,n))&&(l+="")){if(!(r=h["$"+l]))throw new Error("missing: "+l);if(r===Tu)throw new Error("ambiguous: "+l);r.children?r.children.push(o):r.children=[o],o.parent=r}else{if(s)throw new Error("multiple roots");s=o}if(!s)throw new Error("no root");if(s.parent=ku,s.eachBefore(function(t){t.depth=t.parent.depth+1,--d}).eachBefore(Qd),s.parent=null,d>0)throw new Error("cycle");return s}return n.id=function(e){return arguments.length?(t=fu(e),n):t},n.parentId=function(t){return arguments.length?(e=fu(t),n):e},n},t.style=at,t.sum=function(t,e){var n,i=t.length,a=-1,s=0;if(null==e)for(;++a<i;)(n=+t[a])&&(s+=n);else for(;++a<i;)(n=+e(t[a],a,t))&&(s+=n);return s},t.svg=Bs,t.symbol=function(){var t=Fm(Sv),e=Fm(64),n=null;function i(){var i;if(n||(n=i=$a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:Fm(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Fm(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},t.symbolCircle=Sv,t.symbolCross=Ev,t.symbolDiamond=Iv,t.symbolSquare=Rv,t.symbolStar=Nv,t.symbolTriangle=Bv,t.symbolWye=Hv,t.symbols=qv,t.text=Ds,t.thresholdFreedmanDiaconis=function(t,n,i){return t=p.call(t,o).sort(e),Math.ceil((i-n)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*c(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=k,t.tickFormat=hh,t.tickIncrement=x,t.tickStep=C,t.ticks=w,t.timeDay=Vh,t.timeDays=jh,t.timeFormatDefaultLocale=Jf,t.timeFormatLocale=_p,t.timeFriday=Qh,t.timeFridays=ap,t.timeHour=Hh,t.timeHours=qh,t.timeInterval=Lh,t.timeMillisecond=Ph,t.timeMilliseconds=Nh,t.timeMinute=Fh,t.timeMinutes=zh,t.timeMonday=Gh,t.timeMondays=tp,t.timeMonth=rp,t.timeMonths=op,t.timeSaturday=Jh,t.timeSaturdays=sp,t.timeSecond=Bh,t.timeSeconds=_h,t.timeSunday=Uh,t.timeSundays=Zh,t.timeThursday=Xh,t.timeThursdays=ip,t.timeTuesday=Yh,t.timeTuesdays=ep,t.timeWednesday=Kh,t.timeWednesdays=np,t.timeWeek=Uh,t.timeWeeks=Zh,t.timeYear=lp,t.timeYears=cp,t.timeout=si,t.timer=ti,t.timerFlush=ei,t.touch=Rt,t.touches=function(t,e){null==e&&(e=Lt().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=Pt(t,e[n]);return a},t.transition=yi,t.transpose=$,t.tree=function(){var t=Eu,e=1,n=1,i=null;function a(a){var l=function(t){for(var e,n,i,a,s,r=new Lu(t,0),o=[r];e=o.pop();)if(i=e._.children)for(e.children=new Array(s=i.length),a=s-1;a>=0;--a)o.push(n=e.children[a]=new Lu(i[a],a)),n.parent=e;return(r.parent=new Lu(null,0)).children=[r],r}(a);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(r),i)a.eachBefore(o);else{var c=a,d=a,u=a;a.eachBefore(function(t){t.x<c.x&&(c=t),t.x>d.x&&(d=t),t.depth>u.depth&&(u=t)});var h=c===d?1:t(c,d)/2,p=h-c.x,f=e/(d.x+h+p),g=n/(u.depth||1);a.eachBefore(function(t){t.x=(t.x+p)*f,t.y=t.depth*g})}return a}function s(e){var n=e.children,i=e.parent.children,a=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,a=t.children,s=a.length;--s>=0;)(e=a[s]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var s=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+t(e._,a._),e.m=e.z-s):e.z=s}else a&&(e.z=a.z+t(e._,a._));e.parent.A=function(e,n,i){if(n){for(var a,s=e,r=e,o=n,l=s.parent.children[0],c=s.m,d=r.m,u=o.m,h=l.m;o=Du(o),s=$u(s),o&&s;)l=$u(l),(r=Du(r)).a=e,(a=o.z+u-s.z-c+t(o._,s._))>0&&(Iu(Mu(o,e,i),e,a),c+=a,d+=a),u+=o.m,c+=s.m,h+=l.m,d+=r.m;o&&!Du(r)&&(r.t=o,r.m+=u-d),s&&!$u(l)&&(l.t=s,l.m+=c-h,i=e)}return i}(e,a,e.parent.A||i[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t){t.x*=e,t.y=t.depth*n}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],a):i?null:[e,n]},a.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],a):i?[e,n]:null},a},t.treemap=function(){var t=Ou,e=!1,n=1,i=1,a=[0],s=gu,r=gu,o=gu,l=gu,c=gu;function d(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(u),a=[0],e&&t.eachBefore(xu),t}function u(e){var n=a[e.depth],i=e.x0+n,d=e.y0+n,u=e.x1-n,h=e.y1-n;u<i&&(i=u=(i+u)/2),h<d&&(d=h=(d+h)/2),e.x0=i,e.y0=d,e.x1=u,e.y1=h,e.children&&(n=a[e.depth+1]=s(e)/2,i+=c(e)-n,d+=r(e)-n,(u-=o(e)-n)<i&&(i=u=(i+u)/2),(h-=l(e)-n)<d&&(d=h=(d+h)/2),t(e,i,d,u,h))}return d.round=function(t){return arguments.length?(e=!!t,d):e},d.size=function(t){return arguments.length?(n=+t[0],i=+t[1],d):[n,i]},d.tile=function(e){return arguments.length?(t=fu(e),d):t},d.padding=function(t){return arguments.length?d.paddingInner(t).paddingOuter(t):d.paddingInner()},d.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:mu(+t),d):s},d.paddingOuter=function(t){return arguments.length?d.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):d.paddingTop()},d.paddingTop=function(t){return arguments.length?(r="function"==typeof t?t:mu(+t),d):r},d.paddingRight=function(t){return arguments.length?(o="function"==typeof t?t:mu(+t),d):o},d.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:mu(+t),d):l},d.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:mu(+t),d):c},d},t.treemapBinary=function(t,e,n,i,a){var s,r,o=t.children,l=o.length,c=new Array(l+1);for(c[0]=r=s=0;s<l;++s)c[s+1]=r+=o[s].value;!function t(e,n,i,a,s,r,l){if(e>=n-1){var d=o[e];return d.x0=a,d.y0=s,d.x1=r,void(d.y1=l)}for(var u=c[e],h=i/2+u,p=e+1,f=n-1;p<f;){var g=p+f>>>1;c[g]<h?p=g+1:f=g}h-c[p-1]<c[p]-h&&e+1<p&&--p;var m=c[p]-u,v=i-m;if(r-a>l-s){var b=(a*v+r*m)/i;t(e,p,m,a,s,b,l),t(p,n,v,b,s,r,l)}else{var y=(s*v+l*m)/i;t(e,p,m,a,s,r,y),t(p,n,v,a,y,r,l)}}(0,l,t.value,e,n,i,a)},t.treemapDice=Cu,t.treemapResquarify=Bu,t.treemapSlice=Pu,t.treemapSliceDice=function(t,e,n,i,a){(1&t.depth?Pu:Cu)(t,e,n,i,a)},t.treemapSquarify=Ou,t.tsv=Ls,t.tsvFormat=ws,t.tsvFormatBody=xs,t.tsvFormatRow=ks,t.tsvFormatRows=Cs,t.tsvFormatValue=Ts,t.tsvParse=bs,t.tsvParseRows=ys,t.utcDay=fp,t.utcDays=gp,t.utcFriday=Cp,t.utcFridays=Dp,t.utcHour=hp,t.utcHours=pp,t.utcMillisecond=Ph,t.utcMilliseconds=Nh,t.utcMinute=dp,t.utcMinutes=up,t.utcMonday=bp,t.utcMondays=Ap,t.utcMonth=Mp,t.utcMonths=Lp,t.utcSaturday=kp,t.utcSaturdays=Ip,t.utcSecond=Bh,t.utcSeconds=_h,t.utcSunday=vp,t.utcSundays=Tp,t.utcThursday=xp,t.utcThursdays=$p,t.utcTuesday=yp,t.utcTuesdays=Sp,t.utcWednesday=wp,t.utcWednesdays=Ep,t.utcWeek=vp,t.utcWeeks=Tp,t.utcYear=Pp,t.utcYears=Np,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.variance=l,t.version="5.16.0",t.voronoi=function(){var t=Db,e=Ib,n=null;function i(i){return new uy(i.map(function(n,a){var s=[Math.round(t(n,a,i)/oy)*oy,Math.round(e(n,a,i)/oy)*oy];return s.index=a,s.data=n,s}),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:$b(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:$b(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},t.window=it,t.xml=Rs,t.zip=function(){return $(arguments)},t.zoom=function(){var e,n,i=yy,a=wy,s=Ty,r=Cy,o=ky,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=Mn,h=_("start","zoom","end"),p=500,f=0;function g(t){t.property("__zoom",xy).on("wheel.zoom",C).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",A).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new fy(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,a=e[1]-n[1]*t.k;return i===t.x&&a===t.y?t:new fy(t.k,i,a)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=this,i=arguments,s=w(t,i),r=a.apply(t,i),o=null==n?b(r):"function"==typeof n?n.apply(t,i):n,l=Math.max(r[1][0]-r[0][0],r[1][1]-r[0][1]),c=t.__zoom,d="function"==typeof e?e.apply(t,i):e,h=u(c.invert(o).concat(l/c.k),d.invert(o).concat(l/d.k));return function(t){if(1===t)t=d;else{var e=h(t),n=l/e[2];t=new fy(n,o[0]-e[0]*n,o[1]-e[1]*n)}s.zoom(null,t)}})}function w(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.extent=a.apply(t,e),this.taps=0}function C(){if(i.apply(this,arguments)){var t=w(this,arguments),e=this.__zoom,n=Math.max(l[0],Math.min(l[1],e.k*Math.pow(2,r.apply(this,arguments)))),a=Nt(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[a,e.invert(a)],hi(this),t.start()}by(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},150),t.zoom("mouse",s(v(m(e,n),t.mouse[0],t.mouse[1]),t.extent,c))}}function k(){if(!n&&i.apply(this,arguments)){var e=w(this,arguments,!0),a=$t(t.event.view).on("mousemove.zoom",function(){if(by(),!e.moved){var n=t.event.clientX-o,i=t.event.clientY-l;e.moved=n*n+i*i>f}e.zoom("mouse",s(v(e.that.__zoom,e.mouse[0]=Nt(e.that),e.mouse[1]),e.extent,c))},!0).on("mouseup.zoom",function(){a.on("mousemove.zoom mouseup.zoom",null),Ft(t.event.view,e.moved),by(),e.end()},!0),r=Nt(this),o=t.event.clientX,l=t.event.clientY;_t(t.event.view),vy(),e.mouse=[r,this.__zoom.invert(r)],hi(this),e.start()}}function T(){if(i.apply(this,arguments)){var e=this.__zoom,n=Nt(this),r=e.invert(n),o=e.k*(t.event.shiftKey?.5:2),l=s(v(m(e,o),n,r),a.apply(this,arguments),c);by(),d>0?$t(this).transition().duration(d).call(y,l,n):$t(this).call(g.transform,l)}}function A(){if(i.apply(this,arguments)){var n,a,s,r,o=t.event.touches,l=o.length,c=w(this,arguments,t.event.changedTouches.length===l);for(vy(),a=0;a<l;++a)r=[r=Rt(this,o,(s=o[a]).identifier),this.__zoom.invert(r),s.identifier],c.touch0?c.touch1||c.touch0[2]===r[2]||(c.touch1=r,c.taps=0):(c.touch0=r,n=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),n&&(c.taps<2&&(e=setTimeout(function(){e=null},p)),hi(this),c.start())}}function S(){if(this.__zooming){var n,i,a,r,o=w(this,arguments),l=t.event.changedTouches,d=l.length;for(by(),e&&(e=clearTimeout(e)),o.taps=0,n=0;n<d;++n)a=Rt(this,l,(i=l[n]).identifier),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=a:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=a);if(i=o.that.__zoom,o.touch1){var u=o.touch0[0],h=o.touch0[1],p=o.touch1[0],f=o.touch1[1],g=(g=p[0]-u[0])*g+(g=p[1]-u[1])*g,b=(b=f[0]-h[0])*b+(b=f[1]-h[1])*b;i=m(i,Math.sqrt(g/b)),a=[(u[0]+p[0])/2,(u[1]+p[1])/2],r=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!o.touch0)return;a=o.touch0[0],r=o.touch0[1]}o.zoom("touch",s(v(i,a,r),o.extent,c))}}function E(){if(this.__zooming){var e,i,a=w(this,arguments),s=t.event.changedTouches,r=s.length;for(vy(),n&&clearTimeout(n),n=setTimeout(function(){n=null},p),e=0;e<r;++e)i=s[e],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps){var o=$t(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return g.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",xy),t!==i?y(t,e,n):i.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},g.scaleBy=function(t,e,n){g.scaleTo(t,function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n},n)},g.scaleTo=function(t,e,n){g.transform(t,function(){var t=a.apply(this,arguments),i=this.__zoom,r=null==n?b(t):"function"==typeof n?n.apply(this,arguments):n,o=i.invert(r),l="function"==typeof e?e.apply(this,arguments):e;return s(v(m(i,l),r,o),t,c)},n)},g.translateBy=function(t,e,n){g.transform(t,function(){return s(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),c)})},g.translateTo=function(t,e,n,i){g.transform(t,function(){var t=a.apply(this,arguments),r=this.__zoom,o=null==i?b(t):"function"==typeof i?i.apply(this,arguments):i;return s(gy.translate(o[0],o[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)},i)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){kt(new py(g,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},g.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:hy(+t),g):r},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:hy(!!t),g):i},g.touchable=function(t){return arguments.length?(o="function"==typeof t?t:hy(!!t),g):o},g.extent=function(t){return arguments.length?(a="function"==typeof t?t:hy([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):a},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(s=t,g):s},g.duration=function(t){return arguments.length?(d=+t,g):d},g.interpolate=function(t){return arguments.length?(u=t,g):u},g.on=function(){var t=h.on.apply(h,arguments);return t===h?g:t},g.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,g):Math.sqrt(f)},g},t.zoomIdentity=gy,t.zoomTransform=my,Object.defineProperty(t,"__esModule",{value:!0})});
/*! 
 *  IDS Enterprise Components - v4.55.2
 *  Date: 2021-09-20T16:46:33.728Z
 *  Revision: 18883f17075484a0bad45b566be19a0a5ea5e43b
 *  
 *  
 *  Apache License
 *  Version 2.0, January 2004
 *  http://www.apache.org/licenses/
 *  
 *  TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *  
 *  1. Definitions.
 *  
 *  "License" shall mean the terms and conditions for use, reproduction,
 *  and distribution as defined by Sections 1 through 9 of this document.
 *  
 *  "Licensor" shall mean the copyright owner or entity authorized by
 *  the copyright owner that is granting the License.
 *  
 *  "Legal Entity" shall mean the union of the acting entity and all
 *  other entities that control, are controlled by, or are under common
 *  control with that entity. For the purposes of this definition,
 *  "control" means (i) the power, direct or indirect, to cause the
 *  direction or management of such entity, whether by contract or
 *  otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *  outstanding shares, or (iii) beneficial ownership of such entity.
 *  
 *  "You" (or "Your") shall mean an individual or Legal Entity
 *  exercising permissions granted by this License.
 *  
 *  "Source" form shall mean the preferred form for making modifications,
 *  including but not limited to software source code, documentation
 *  source, and configuration files.
 *  
 *  "Object" form shall mean any form resulting from mechanical
 *  transformation or translation of a Source form, including but
 *  not limited to compiled object code, generated documentation,
 *  and conversions to other media types.
 *  
 *  "Work" shall mean the work of authorship, whether in Source or
 *  Object form, made available under the License, as indicated by a
 *  copyright notice that is included in or attached to the work
 *  (an example is provided in the Appendix below).
 *  
 *  "Derivative Works" shall mean any work, whether in Source or Object
 *  form, that is based on (or derived from) the Work and for which the
 *  editorial revisions, annotations, elaborations, or other modifications
 *  represent, as a whole, an original work of authorship. For the purposes
 *  of this License, Derivative Works shall not include works that remain
 *  separable from, or merely link (or bind by name) to the interfaces of,
 *  the Work and Derivative Works thereof.
 *  
 *  "Contribution" shall mean any work of authorship, including
 *  the original version of the Work and any modifications or additions
 *  to that Work or Derivative Works thereof, that is intentionally
 *  submitted to Licensor for inclusion in the Work by the copyright owner
 *  or by an individual or Legal Entity authorized to submit on behalf of
 *  the copyright owner. For the purposes of this definition, "submitted"
 *  means any form of electronic, verbal, or written communication sent
 *  to the Licensor or its representatives, including but not limited to
 *  communication on electronic mailing lists, source code control systems,
 *  and issue tracking systems that are managed by, or on behalf of, the
 *  Licensor for the purpose of discussing and improving the Work, but
 *  excluding communication that is conspicuously marked or otherwise
 *  designated in writing by the copyright owner as "Not a Contribution."
 *  
 *  "Contributor" shall mean Licensor and any individual or Legal Entity
 *  on behalf of whom a Contribution has been received by Licensor and
 *  subsequently incorporated within the Work.
 *  
 *  2. Grant of Copyright License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  copyright license to reproduce, prepare Derivative Works of,
 *  publicly display, publicly perform, sublicense, and distribute the
 *  Work and such Derivative Works in Source or Object form.
 *  
 *  3. Grant of Patent License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  (except as stated in this section) patent license to make, have made,
 *  use, offer to sell, sell, import, and otherwise transfer the Work,
 *  where such license applies only to those patent claims licensable
 *  by such Contributor that are necessarily infringed by their
 *  Contribution(s) alone or by combination of their Contribution(s)
 *  with the Work to which such Contribution(s) was submitted. If You
 *  institute patent litigation against any entity (including a
 *  cross-claim or counterclaim in a lawsuit) alleging that the Work
 *  or a Contribution incorporated within the Work constitutes direct
 *  or contributory patent infringement, then any patent licenses
 *  granted to You under this License for that Work shall terminate
 *  as of the date such litigation is filed.
 *  
 *  4. Redistribution. You may reproduce and distribute copies of the
 *  Work or Derivative Works thereof in any medium, with or without
 *  modifications, and in Source or Object form, provided that You
 *  meet the following conditions:
 *  
 *  (a) You must give any other recipients of the Work or
 *  Derivative Works a copy of this License; and
 *  
 *  (b) You must cause any modified files to carry prominent notices
 *  stating that You changed the files; and
 *  
 *  (c) You must retain, in the Source form of any Derivative Works
 *  that You distribute, all copyright, patent, trademark, and
 *  attribution notices from the Source form of the Work,
 *  excluding those notices that do not pertain to any part of
 *  the Derivative Works; and
 *  
 *  (d) If the Work includes a "NOTICE" text file as part of its
 *  distribution, then any Derivative Works that You distribute must
 *  include a readable copy of the attribution notices contained
 *  within such NOTICE file, excluding those notices that do not
 *  pertain to any part of the Derivative Works, in at least one
 *  of the following places: within a NOTICE text file distributed
 *  as part of the Derivative Works; within the Source form or
 *  documentation, if provided along with the Derivative Works; or,
 *  within a display generated by the Derivative Works, if and
 *  wherever such third-party notices normally appear. The contents
 *  of the NOTICE file are for informational purposes only and
 *  do not modify the License. You may add Your own attribution
 *  notices within Derivative Works that You distribute, alongside
 *  or as an addendum to the NOTICE text from the Work, provided
 *  that such additional attribution notices cannot be construed
 *  as modifying the License.
 *  
 *  You may add Your own copyright statement to Your modifications and
 *  may provide additional or different license terms and conditions
 *  for use, reproduction, or distribution of Your modifications, or
 *  for any such Derivative Works as a whole, provided Your use,
 *  reproduction, and distribution of the Work otherwise complies with
 *  the conditions stated in this License.
 *  
 *  5. Submission of Contributions. Unless You explicitly state otherwise,
 *  any Contribution intentionally submitted for inclusion in the Work
 *  by You to the Licensor shall be under the terms and conditions of
 *  this License, without any additional terms or conditions.
 *  Notwithstanding the above, nothing herein shall supersede or modify
 *  the terms of any separate license agreement you may have executed
 *  with Licensor regarding such Contributions.
 *  
 *  6. Trademarks. This License does not grant permission to use the trade
 *  names, trademarks, service marks, or product names of the Licensor,
 *  except as required for reasonable and customary use in describing the
 *  origin of the Work and reproducing the content of the NOTICE file.
 *  
 *  7. Disclaimer of Warranty. Unless required by applicable law or
 *  agreed to in writing, Licensor provides the Work (and each
 *  Contributor provides its Contributions) on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *  implied, including, without limitation, any warranties or conditions
 *  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *  PARTICULAR PURPOSE. You are solely responsible for determining the
 *  appropriateness of using or redistributing the Work and assume any
 *  risks associated with Your exercise of permissions under this License.
 *  
 *  8. Limitation of Liability. In no event and under no legal theory,
 *  whether in tort (including negligence), contract, or otherwise,
 *  unless required by applicable law (such as deliberate and grossly
 *  negligent acts) or agreed to in writing, shall any Contributor be
 *  liable to You for damages, including any direct, indirect, special,
 *  incidental, or consequential damages of any character arising as a
 *  result of this License or out of the use or inability to use the
 *  Work (including but not limited to damages for loss of goodwill,
 *  work stoppage, computer failure or malfunction, or any and all
 *  other commercial damages or losses), even if such Contributor
 *  has been advised of the possibility of such damages.
 *  
 *  9. Accepting Warranty or Additional Liability. While redistributing
 *  the Work or Derivative Works thereof, You may choose to offer,
 *  and charge a fee for, acceptance of support, warranty, indemnity,
 *  or other liability obligations and/or rights consistent with this
 *  License. However, in accepting such obligations, You may act only
 *  on Your own behalf and on Your sole responsibility, not on behalf
 *  of any other Contributor, and only if You agree to indemnify,
 *  defend, and hold each Contributor harmless for any liability
 *  incurred by, or claims asserted against, such Contributor by reason
 *  of your accepting any such warranty or additional liability.
 *  
 *  END OF TERMS AND CONDITIONS
 *  
 *  APPENDIX: How to apply the Apache License to your work.
 *  
 *  To apply the Apache License to your work, attach the following
 *  boilerplate notice, with the fields enclosed by brackets "[]"
 *  replaced with your own identifying information. (Don't include
 *  the brackets!)  The text should be enclosed in the appropriate
 *  comment syntax for the file format. We also recommend that a
 *  file or class name and description of purpose be included on the
 *  same "printed page" as the copyright notice for easier
 *  identification within third-party archives.
 *  
 *  Copyright 2018  Infor, Inc.
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *  
 */
var Soho=function(t){"use strict";var e=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function(t){},logTimeEnd:function(t){},enableConsoleLogging:!1,log:function(t,e){},getComponents:function(t){var e=(t?$(t):$("body")).find("*"),n=[];return e.each(function(t,e){var i=$(e).data();i&&Object.keys(i).length&&n.push({data:i,element:e})}),n}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),window.MSInputMethodContext&&document.documentMode||(jQuery.event.special.touchstart={setup:function(t,e,n){this.addEventListener("touchstart",n,{passive:!0})}},jQuery.event.special.touchmove={setup:function(t,e,n){this.addEventListener("touchmove",n,{passive:!0})}},jQuery.event.special.mousewheel={setup:function(t,e,n){this.addEventListener("mousewheel",n,{passive:!0})}});function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){s(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,e,n){return(l=o()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a}).apply(null,arguments)}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={stripHTML:function(t){return t?t.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(t,e){if(!t)return"";if("number"==typeof t)return t;var n=("".concat(e||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(i,function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""}).replace(i,function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""}).replace(i,function(t,e){return n.indexOf("<"+e.toLowerCase()+">")>-1?t:""})},sanitizeConsoleMethods:function(t){var e=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof t?t:t.replace(e,"")},sanitizeHTML:function(t){var e=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"");return e=e.replace(/<[^>]+/g,function(t){var e=/(\/|\s)on\w+=('|")?/g,n=t;return(n.match(e)||[]).length>0&&(n=n.replace(/(\/|\s)title=('|")(.*)('|")/g,function(t){return(t.match(e)||[]).length>0?t.replace(e,function(t){return t.replace("on","")}):t})),n.replace(/(\/|\s)on\w+=('|")?[^"]*('|")?/g,"")}),(e=this.sanitizeConsoleMethods(e)).replace(/<\/script>/g,"")},ensureAlphaNumeric:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9 ]/gi,"","")},toCamelCase:function(t){return"string"!=typeof t?t:(t=this.stripTags(t).replace(/[^a-z0-9 ]/gi,"","")).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,function(t,e){return e.toUpperCase()})},escapeHTML:function(t){var e=t;if("string"==typeof e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return e.replace(/[&<>"']/gi,function(t){return n[t]})}return e},unescapeHTML:function(t){if(""===t)return"";if("string"==typeof t){var e=function(e){return(t.match(e)||[""])[0]},n=(new DOMParser).parseFromString(t,"text/html");return"".concat(e(/^\s*/)).concat(n.documentElement.textContent.trim()).concat(e(/\s*$/))}return t},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},isUrlLocal:function(t){return!(""===t)&&("/"===t[0]&&(1===t.length||"/"!==t[1]&&"\\"!==t[1])||t.length>1&&"~"===t[0]&&"/"===t[1])||t.length>=1&&"#"===t[0]}},h={isValidElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement},getAttributes:function(t){return t&&(t instanceof HTMLElement||t instanceof SVGElement)?t.attributes:{}},hasAnyClass:function(t){var e=t.className;return e&&e.length>0},hasClass:function(t,e){var n=!1;if(null==t||!(null==t?void 0:t.getAttribute))return n;if("classList"in t)n=t.classList.contains(e);else{var i=t.getAttribute("class");n=!!i&&-1!==i.split(/\s+/).indexOf(e)}return n},addClass:function(t){if(t){for(var e="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)t.classList?t.classList.add(i[s]):h.hasClass(t,[s])||(e.length&&(e+=" "),e+=i[s]);e.length&&$(t).addClass(e)}},removeClass:function(t){if(t){for(var e="",n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)t.classList?t.classList.remove(i[s]):h.hasClass(t,[s])||(e.length&&(e+=" "),e+=i[s]);e.length&&$(t).removeClass(e)}},isElement:function(t){return!!(t instanceof HTMLElement||t instanceof SVGElement||t instanceof $&&t.length)},getDimensions:function(t){if(!h.isElement(t))return{};if(t instanceof $){if(!t.length)return{};t=t[0]}var e=t.getBoundingClientRect(),n={};for(var i in e)isNaN(e[i])||(n[i]=e[i]);return n},append:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.insertAdjacentHTML("beforeend",this.xssClean(e,n))},remove:function(t){var e=t;t instanceof $&&t.length&&(e=e[0]),(e instanceof HTMLElement||e instanceof SVGElement)&&t.parentNode&&t.parentNode.removeChild(t)},setAttribute:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&i.setAttribute("attribute",n)},xssClean:function(t,e){var n=t;return e&&"*"!==e&&(n=u.stripTags(t,e)),"*"===e&&(n=u.sanitizeHTML(t)),n},html:function(t,e,n){var i=t;t instanceof $&&t.length&&(i=i[0]),(i instanceof HTMLElement||i instanceof SVGElement)&&(i.innerHTML=this.xssClean(e,n))},parents:function(t,e,n){var i,a=[];if(!h.isValidElement(t))return a;for(;t.parentNode&&(!n||!a.length);)(i=t=t.parentNode)!==document&&i.matches(e)&&a.push(i);return n?a[0]:a},getNextSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var n=t.nextElementSibling;if(!e)return n;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}},getPreviousSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var n=t.previousElementSibling;if(!e)return n;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}},getSiblings:function(t){return t instanceof $&&t.length&&(t=t[0]),[].slice.call(t.parentNode.children).filter(function(e){return e!==t})},getSimpleSelector:function(t){var e=t.tagName.toLowerCase(),n=t.id?"#".concat(t.id):"",i=t.className?".".concat(t.className.split(" ").join(".")):"";return"".concat(e).concat(n).concat(i)}},p={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},f=Object.keys(p);function g(t,e,n){var i;return function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var o=this;function l(){n||t.apply(o,s),i=null}i?clearTimeout(i):n&&t.apply(o,s),i=setTimeout(l,e||250)}}p.available=f,p.current=function(){var t=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return t?(t.getPropertyValue("content")||"").replace(/"/g,""):""},p.isAbove=function(t){var e=p[t];return!!e&&$(window).width()>e-1},p.isBelow=function(t){var e=p[t];return!!e&&$(window).width()<e},p.compare=function(){this.last||(this.last="");var t=this.current();this.last!==t&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:t}]),this.last=t)},p.isHidden=function(t){if(!t||!h.isElement(t))return!1;var e=t.classList;if(!e.length)return!1;if(e.contains("hidden"))return!0;var n={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],i="hidden-".concat(n),a="visible-".concat(n,"-");return!!e.contains(i)||(e.toString().indexOf(a),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&p.isHidden($(this).first()[0])},$.fn.debouncedResize=function(t){return t?this.bind("resize",g(t)):this.trigger("debouncedResize")};var m={browser:{},features:{resizeObserver:"undefined"!=typeof ResizeObserver,touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.55.2"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var t=navigator.userAgent||navigator.vendor||window.opera,e=navigator.platform,n=$("html"),i="";if(-1!==t.indexOf("Safari")&&-1===t.indexOf("Chrome")&&-1===t.indexOf("Android")&&(i+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)||m.browser.isIPad()){var a=/constructor/i.test(window.HTMLElement),s=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!a||s)&&(this.browser.name="wkwebview",i+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}if(-1!==t.indexOf("Chrome")&&(i+="is-chrome ",this.browser.name="chrome"),["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)>-1&&!/Linux/.test(e)&&(i+="is-mac ",this.os.name="Mac OS X"),t.indexOf("Firefox")>0&&(i+="is-firefox ",this.browser.name="firefox"),t.match(/Edg\//)&&(i+="ie ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",i+="ie-edge".concat(this.browser.version)),t.match(/Trident/)&&(i+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||t.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(i+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(i+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(i+="ie10 ",this.browser.version="10"):t.match(/Trident\/7\./)&&(i+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(t)||m.browser.isIPad()){i+="ios ",this.os.name="ios";for(var r=["iPod","iPad","iPhone"],o=0;o<r.length;o++)new RegExp(r[o]).test(t)&&(i+="".concat(r[o].toLowerCase()," "),this.device=r[o])}/Android/.test(t)&&(i+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(e)&&(this.os.name="linux"),n.addClass(i)},addDeviceSpecs:function(){var t,e,n,i=navigator.appVersion,a=navigator.userAgent,s=navigator.appName,r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10),l="";-1!==(e=a.indexOf("Opera"))&&(s="Opera",r=a.substring(e+6),-1!==(e=a.indexOf("Version"))&&(r=a.substring(e+8))),-1!==(e=a.indexOf("OPR"))?(s="Opera",r=a.substring(e+4)):-1!==(e=a.indexOf("Edg"))?(s="Microsoft Edge",r=a.substring(e+4)):-1!==(e=a.indexOf("MSIE"))?(s="Microsoft Internet Explorer",r=a.substring(e+5)):-1!==(e=a.indexOf("Chrome"))?(s="Chrome",r=a.substring(e+7),a.indexOf("Edg")>-1&&(l="Microsoft Edge")):-1!==(e=a.indexOf("Safari"))?(s="Safari",r=a.substring(e+7),-1!==(e=a.indexOf("Version"))&&(r=a.substring(e+8))):this.browser.isWKWebView()?(s="WKWebView",r="",o=""):-1!==(e=a.indexOf("Firefox"))?(s="Firefox",r=a.substring(e+8)):-1!==a.indexOf("Trident/")?(s="Microsoft Internet Explorer",r=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(e=a.lastIndexOf("/"))&&(s=a.substring(t,e),r=a.substring(e+1),s.toLowerCase()===s.toUpperCase()&&(s=navigator.appName)),-1!==(n=r.indexOf(";"))&&(r=r.substring(0,n)),-1!==(n=r.indexOf(" "))&&(r=r.substring(0,n)),-1!==(n=r.indexOf(")"))&&(r=r.substring(0,n)),o=" ".concat(parseInt(r,10)),isNaN(o)&&(r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),d="-",u=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var h in u){var p=u[h];if(p.r.test(a)){d=p.s;break}}var f="-";switch(/Windows/.test(d)&&(f=/Windows (.*)/.exec(d)[1]),d){case"Mac OS X":f=/Mac OS X ([1-9][0-9][\.\_\d]+)/.exec(a)[1].replace(/\_/g,".");break;case"Android":f=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":f=/OS (\d+)_?(\d+)?/.exec(a),f="".concat(f[1],".").concat(f[2],".").concat(0|f[3])}m.browser.isIPad()&&(f=a.substr(a.indexOf("Version"),a.substr(a.indexOf("Version")).indexOf(" ")).replace("Version/",""),d="IOS"),this.devicespecs={currentBrowser:s,browserVersion:r.trim(),browserMajorVersion:o,isMobile:c||m.browser.isIPad(),os:d,currentOSVersion:f,browserVersionName:l}},addGlobalResize:function(){$(window).debouncedResize(function(){$("body").triggerHandler("resize",[window]),p.compare()}),$(window).on("orientationchange load",function(){return p.compare()})},removeGlobalEvents:function(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function v(t){return this.init(t)}function b(t,e,n){var i=$.Deferred();if(!h.isElement(t))return i.reject();if(t instanceof $&&t.length&&(t=t[0]),null==e)return i.resolve();if(isNaN(n)&&(n=0),e=Math.round(e),(n=Math.round(n))<0)return i.fail();if(0===n)return t.scrollLeft+=e,i.resolve();var a=Date.now(),s=a+n,r=t.scrollLeft,o=e,l=t.scrollLeft;return setTimeout(function e(){if(t.scrollLeft===l){var n=Date.now(),c=function(t,e,n){if(n<=t)return 0;if(n>=e)return 1;var i=(n-t)/(e-t);return i*i*(3-2*i)}(a,s,n),d=Math.round(r+o*c);t.scrollLeft=d,n>=s?i.resolve():t.scrollLeft!==l||t.scrollLeft===d?(l=t.scrollLeft,setTimeout(e,0)):i.resolve()}else i.reject()},0),i}function y(t,e){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(t,e)}m.browser.isEdge=function(){return"edge"===m.browser.name},m.browser.isIE11=function(){return"ie"===m.browser.name&&"11"===m.browser.version},m.browser.isSafari=function(){return"safari"===m.browser.name||"wkwebview"===m.browser.name},m.browser.isIE10=function(){return"ie"===m.browser.name&&"10"===m.browser.version},m.browser.isIPad=function(){return!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&void 0!==navigator.standalone)},m.set(),v.prototype={init:function(t){!this.element&&(t instanceof HTMLElement||t instanceof SVGElement)&&(this.element=t);var e=$(this.element),n=!1,i=!1,a=!1;if(e.is(".checkbox, .radio, .switch")){var s=e.next();s.is('[type="hidden"]')&&(s=s.next()),this.label=s[0],e.addClass("hide-focus").on("focusin.hide-focus",function(t){n||i||a||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),n=!1,i=!0,a=!1}).on("focusout.hide-focus",function(t){e.addClass("hide-focus"),a=s.is(a),n=!1,i=!1,e.triggerHandler("hidefocusadd",[t])}),s.on("mousedown.hide-focus",function(t){a=this,n=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])})}else{var r=function(t){n=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])};m.features.touch&&e.on("touchstart.hide-focus",function(t){r(t)}),e.addClass("hide-focus").on("mousedown.hide-focus",function(t){r(t)}).on("focusin.hide-focus",function(t){n||i||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),n=!1,i=!0}).on("focusout.hide-focus",function(t){e.addClass("hide-focus"),n=!1,i=!1,e.triggerHandler("hidefocusadd",[t])})}return this},updated:function(){return this.teardown().init()},teardown:function(){return this.label&&$(this.label).off("mousedown.hide-focus"),$(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),this.element.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each(function(){var t=$.data(this,"hidefocus");t?t.updated():(t=$.data(this,"hidefocus",new v(this))).destroy=function(){this.teardown(),$.removeData(this,"hidefocus")}})},$.fn.smoothScroll=function(t,e){return b(this,t,e)},$.fn.bindFirst=function(t,e){this.on(t,e),this.each(function(){var e=$._data(this,"events")[t.split(".")[0]],n=e.pop();e.splice(0,0,n)})};var w=[];function x(t){return $.expr.filters.visible(t)&&!$(t).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.fn.cssPropSupport=function(t){if(!t)return null;var e=$("<div></div>")[0],n=t.toString(),i=["Moz","Webkit","O","ms"],a=n.charAt(0).toUpperCase()+n.substr(1);if(t in e.style)return $(e).remove(),t;for(var s=0;s<i.length;s++){var r=i[s]+a;if(r in e.style)return $(e).remove(),r}return $(e).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(t){return function(t){var e,n,i,a=t.nodeName.toLowerCase(),s=!isNaN($.attr(t,"tabindex"));return"area"===a?(n=(e=t.parentNode).name,!(!t.href||!n||"map"!==e.nodeName.toLowerCase())&&!!(i=$("img[usemap=#".concat(n,"]"))[0])&&x(i)):!!x(t)&&(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a&&void 0!==t.href||s)}(t,isNaN($.attr(t,"tabindex")))}}),$.fn.listEvents=function(){var t={};return this.each(function(){t=$._data(this,"events")}),t};var C={};function k(t){return"object"===a(t)||"function"==typeof t}function T(t){return"function"==typeof t?t():t}C.uniqueId=function(t,e,n,i){var a=t.id;if(a&&$("#".concat(a)).length<2)return a;n=n?"".concat(n,"-"):"",i=i?"-".concat(i):"",e=e||C.getArrayFromList(t.classList).join("-"),w[e]||(w[e]=1);var s="".concat(n).concat(e,"-").concat(w[e]).concat(i);return w[e]+=1,s},C.parseSettings=function(t,e){var n={};if(!t||!(t instanceof HTMLElement)&&!(t instanceof $)||t instanceof $&&!t.length)return n;t instanceof $&&(t=t[0]),e=e||"data-options";var i,a,s=t.getAttribute(e);if(!s||"string"!=typeof s||-1===s.indexOf("{"))return n;function r(t){return t.replace(/'/g,'"')}try{n=JSON.parse(r(s))}catch(t){n=JSON.parse((a=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,i=(i=s).replace(a,'$1"$2":'),a=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,i=r(i=i.replace(a,':"$2"'))))}return n},C.parseOptions=function(t,e){return C.parseSettings(t,e)},$.fn.parseOptions=function(t,e){var n=[],i=this;return t instanceof HTMLElement||t instanceof SVGElement||t instanceof $?i=$(t):(e=t,t=void 0),i.each(function(t,i){n.push({element:this,options:C.parseOptions(i,e)})}),1===n.length?n[0].options:n},C.coerceToBoolean=function(t){return!/^(false|0)$/i.test(t)&&!!t},C.coerceSettingsToBoolean=function(t,e){var n,i;for(e&&Array.isArray(e)||Object.keys(t).forEach(function(t){e.push(t)}),n=0,i=e.length;n<i;n++)t[e[n]]=C.coerceToBoolean(t[e[n]]);return t},$.fn.timer=function(t,e){var n,i=$(this),a=0;function s(){n=setInterval(function(){a+=10,i.triggerHandler("update",[{counter:a}]),a>e&&(i.triggerHandler("timeout"),t.apply(arguments),clearInterval(n),a=0)},10)}return s(),{event:this,cancel:function(){i.triggerHandler("cancel"),clearInterval(n),a=0},pause:function(){i.triggerHandler("pause"),clearInterval(n)},resume:function(){i.triggerHandler("resume"),s()}}},$.copyToClipboard=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(t){return!1}finally{document.body.removeChild(e)}}},$.fn.clearable=function(t){var e=this;this.element=$(this),this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),null!=t&&(null==t?void 0:t.tabbable)&&(this.xButton=$('<button type="button" class="btn-icon hide-focus close"></button>').append($.createIconElement({classes:"close",icon:"close"}).icon())),this.clear=function(){e.element.val("").trigger("change").focus().trigger("cleared"),e.checkContents()},this.handleKeydown=function(t){var n=t.key;("Enter"===n||t.altKey&&("Delete"===n||"Backspace"===n))&&(t.preventDefault(),e.clear())},this.checkContents=function(){var t=e.element.val();t&&t.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(e.element),this.xButton[0].tabIndex=null!=t&&(null==t?void 0:t.tabbable)?0:-1,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown),null!=t&&(null==t?void 0:t.tabbable)&&this.xButton.hideFocus();var n=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(n).on(n,function(){e.checkContents()}),this.checkContents()},C.actualChar=function(t){var e=t.which,n={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},i={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(n,e)&&(e=n[e]),e>=96&&e<=105&&(e-=48),!t.shiftKey&&e>=65&&e<=90?String.fromCharCode(e+32):!t.shiftKey&&e>=37&&e<=40?"":t.shiftKey&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:String.fromCharCode(e)},$.actualChar=function(t){return C.actualChar(t)},C.equals=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},h.convertToHTMLElement=function(t){return t instanceof HTMLElement?t:t instanceof $?t=t.length?t[0]:void 0:void 0},h.focusableElems=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=['button:not([disabled]):not([tabindex="-1"])','[href]:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','div.dropdown:not(.is-disabled):not([tabindex="-1"])','div.multiselect:not(.is-disabled):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(e).filter(function(t){return-1===n.indexOf(t)}),a=c(t.querySelectorAll(i.join(", ")));return a.filter(function(t){return"use"!==t.tagName.toLowerCase()})},C.isPlainObject=function(t){return!(!t||"[object Object]"!==Object.prototype.toString.call(t)||Object.getPrototypeOf(t)&&(null===t||"object"!==a(t)||Object.getPrototypeOf(t)!==Object.prototype))},C.mergeByPosition=function(t,e){var n,i=Math.max((null===(n=t)||void 0===n||null==n?void 0:n.length)||0,(null==e||null==e?void 0:e.length)||0);if(t||(t=[]),0===i)return[];for(var a=0;a<i;a++)void 0!==e[a]&&null!==e[a]&&(t[a]=e[a]);return t||[]},C.extend=function t(){var e=arguments[0]||{},n=!1,i=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e=Array.isArray(arguments[1])?[]:{},i++);for(var a=function(i){for(var a in i){if(i.hasOwnProperty(a))if(i[a]instanceof jQuery)e[a]=$(i[a]);else if(n&&"[object Object]"===Object.prototype.toString.call(i[a])){var s=i[a],r=C.isPlainObject(s),o=Array.isArray(s)?[]:{};e[a]=r?t(!0,o,e[a],s):s}else Array.isArray(i[a])?e[a]=C.mergeByPosition(e[a],i[a]):void 0!==i[a]&&(e[a]=void 0===i[a]&&void 0!==e[a]?e[a]:i[a]);i.hasOwnProperty(a)||e[a]||"[object Function]"!==Object.prototype.toString.call(i[a])||(e[a]=i[a])}};i<arguments.length;i++)a(arguments[i]);return e},C.fixSVGIcons=function t(e){if(("ie"===m.browser.name||"11"===m.browser.version)&&void 0!==e){var n="http://www.w3.org/1999/xlink";if(e instanceof $){if(!e.length)return;if(1!==e.length)return void e.each(function(e,n){t(n)});e=e[0]}e instanceof NodeList?Array.prototype.forEach.call(e,function(e){t(e)}):setTimeout(function(){for(var t=e.getElementsByTagName("use"),i=0;i<t.length;i++){var a=t[i].getAttributeNS(n,"href");t[i].setAttributeNS(n,"href","x"),t[i].setAttributeNS(n,"href",a)}},1)}},C.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},C.getContainerScrollDistance=function(t){if(!h.isElement(t))return[];var e=[];return $(t).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each(function(){e.push({element:this,left:this.scrollLeft,top:this.scrollTop})}),document.body.classList.contains("no-scroll")||e.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),e},C.getHiddenSize=function(t,e){var n={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!h.isElement(t))return n.dims;t=$(t),e=i(i({},n),e);var a=h.isElement(e.parentElement);a&&(t=t.clone().appendTo(e.parentElement));var s=e.dims,r=t.parents().add(t),o={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},l=[];return r.each(function(){var t=this,e={};Object.keys(o).forEach(function(n){t.style[n]&&(e[n]=t.style[n],t.style[n]=o[n])}),l.push(e)}),s.padding={bottom:t.css("padding-bottom"),left:t.css("padding-left"),right:t.css("padding-right"),top:t.css("padding-top")},s.width=t.width(),s.outerWidth=t.outerWidth(e.includeMargin),s.innerWidth=t.innerWidth(),s.scrollWidth=t[0].scrollWidth,s.height=t.height(),s.innerHeight=t.innerHeight(),s.outerHeight=t.outerHeight(e.includeMargin),s.scrollHeight=t[0].scrollHeight,r.each(function(t){var e=this,n=l[t];Object.keys(o).forEach(function(t){n[t]&&(e.style[t]=n[t])})}),a&&t.remove(),s},$.fn.getHiddenSize=function(t){return C.getHiddenSize(this,t)},C.isString=function(t){return"string"==typeof t||t instanceof String},C.isNumber=function(t){return"number"==typeof t&&void 0===t.length&&!isNaN(t)},C.safeSetSelection=function(t,e,n){t instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(t.type)&&(e&&void 0===n&&(n=e),document.activeElement===t&&("android"===m.os.name?y(function(){t.setSelectionRange(e,n,"none")},0):t.setSelectionRange(e,n,"none")))},C.mergeSettings=function(t,e,n){return e&&k(e)||(e=k(n)?n:{}),C.extend(!0,{},T(n),T(e),void 0!==t?C.parseSettings(t):{})},C.isHTML=function(t){return/(<([^>]+)>)/i.test(t)};var A={convertDelayToFPS:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return t/16.7},convertFPSToDelay:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return 16.7*t},isFinite:function(t){return"number"==typeof t&&t==t&&t!==1/0&&t!==-1/0}};C.forEach=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n,t[i],i,t)},A.sign=function(t){return Math.sign?Math.sign(t):0==(t=+t)||isNaN(t)?t:t>0?1:-1},C.getArrayFromList=function(t){var e=Array.prototype.slice;return Function.prototype.call.bind(e)(t)},C.getScrollbarWidth=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var i=n.offsetWidth;return t.parentNode.removeChild(t),e-i},C.deepCopy=function(t){return C.extend(!0,Array.isArray(t)?[]:{},t)},C.isSubscribedTo=function(t,e,n,i){var a=$._data(t).events;for(var s in a)if(s===n&&(1!==a[s].length||a[s][0].namespace!==i))return!0;return!1},C.isInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},C.getSiblingsHeight=function(t){return h.getSiblings(t).map(function(t){return t.offsetHeight}).reduce(function(t,e){return t+e},0)},C.getParentAvailableHeight=function(t){return t.parentNode.offsetHeight-C.getSiblingsHeight(t)},C.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},C.toggleCompactMode=function(t){var e="form-layout-compact",n=t.classList.contains(e);n?t.classList.remove(e):t.classList.add(e);for(var i=t.querySelectorAll(".datagrid-container"),a=0;a<i.length;a++){var s=$(i[a]).data("datagrid");if(!s.rowHeight)return;n?s.rowHeight(s.oldRowHeight||"large"):(s.oldRowHeight=s.settings.rowHeight,s.rowHeight("extra-small"))}},C.addAttributes=function(t,e,n,i,a){if(n){var s=function(e,n){!t[0]||!a&&t[0].hasAttribute(e)||t.attr(e,n+(i?"-".concat(i.toLowerCase()):""))};if(Array.isArray(n))n.forEach(function(t){var n="function"==typeof t.value?t.value(e):t.value;s(t.name,n)});else{var r="function"==typeof n.value?n.value(e):n.value;s(n.name,r)}}},C.stringAttributes=function(t,e,n){var i="";if(!e)return i;if(Array.isArray(e))return e.forEach(function(e){var a="function"==typeof e.value?e.value(t):e.value;i+=" ".concat(e.name,'="').concat(a+(n?"-".concat(n):""),'"')}),i;var a="function"==typeof e.value?e.value(t):e.value;return i+=" ".concat(e.name,'="').concat(a+(n?"-".concat(n.toLowerCase()):""),'"')},C.getAttribute=function(t,e,n){var i;return"string"==typeof e&&e.length&&Array.isArray(n)?(n.forEach(function(n){i||n.name!==e||(i="function"==typeof n.value?n.value(t):n.value)}),i):i},C.waitForTransitionEnd=function(t,e){return new Promise(function(n){t.addEventListener("transitionend",function i(a){a.propertyName===e&&(t.removeEventListener("transitionend",i),n())})})};var S={isEmpty:function(t){return 0===Object.keys(t).length&&t.constructor===Object}},E={EMPTY:"",splice:function(t,e,n,i){return t.slice(0,e)+i+t.slice(e+Math.abs(n))},removeDuplicates:function(t){return t.split("").filter(function(t,e,n){return n.indexOf(t)===e}).join("")},containsHTML:function(t){return/<[a-z][\s\S]*>/i.test(t)},stripWhitespace:function(t){return t.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toBoolean:function(t){var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},textWidth:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");n.font="".concat(e,"px arial");var i=n.measureText(t);return Math.round(i.width)},padDate:function(t,e,n){return t+"0".concat(e+1).slice(-2)+"0".concat(n).slice(-2)}};E.textWidth=function(t,e,n){this.canvasTW=this.canvasTW||(this.canvasTW=document.createElement("canvas"));var i=this.canvasTW.getContext("2d");i.font=n||"14px arial";var a=i.measureText(t);return Math.round(a.width+(e||0))},E.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},E.count=function(t,e){return t.split(e).length-1};var D={truncate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString(),i=n.split(".");return i[1]=i[1]?i[1].substr(0,e):"","".concat(i[0],".").concat(i[1])},round:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return D.toFixed(t,e)},fixTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(+(Math.round(+(t+"e"+e))+"e"+-e)).toFixed(e)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString(),i=!1;"-"===n.substr(0,1)&&(i=!0,n=n.replace("-",""));var a="",s=n.split("."),r=[s[0].substr(0,10),s[0].substr(10),s[1]],o=r[0],l=r[1];return a=this.fixTo((l||o)+(r[2]?".".concat(r[2]):""),e).toString(),l&&11===a.length&&"10000000000"===a&&(a="0000000000",o=(parseInt(o,10)+1).toString()),l&&"0"!==l.substr(0,1)&&(a=o+a),l&&"0"===l.substr(0,1)&&(a="".concat(o).concat(a)),i?"-".concat(a):a},decimalPlaces:function(t){return Math.floor(t)===t||-1===t.toString().indexOf(".")?0:t.toString().split(".")[1].length||0}},I={};function M(t){var e=Number(t).toString(16);return 1===e.length?"0".concat(e):e}I.hexToRgba=function(t,e){var n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3===(n=t.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x".concat(n.join("")),"rgba(".concat([n>>16&255,n>>8&255,255&n].join(","),",").concat(e.toString(),")")):""},I.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},I.rgbToHex=function(t,e,n){return"object"!==a(t)||"number"!=typeof t.r&&"string"!=typeof t.r||(e=t.g,n=t.b,t=t.r),"#".concat(M(t)).concat(M(e)).concat(M(n))},I.rgbToHsl=function(t,e,n){"object"!==a(t)||"number"!=typeof t.r&&"string"!=typeof t.r||(e=t.g,n=t.b,t=t.r),t=Number(t),e=Number(e),n=Number(n),t/=255,e/=255,n/=255;var i=Math.min(t,e,n),s=Math.max(t,e,n),r=s-i,o=0,l=0,c=0;return o=0===r?0:s===t?(e-n)/r%6:s===e?(n-t)/r+2:(t-e)/r+4,(o=Math.round(60*o))<0&&(o+=360),c=(s+i)/2,0!==r&&(l=r/(1-Math.abs(2*c-1))),{h:o,s:l=+(100*l).toFixed(1),l:c=+(100*c).toFixed(1)}},I.hslToRgb=function(t,e,n){"object"!==a(t)||"number"!=typeof t.h&&"string"!=typeof t.h||(e=(t=t.h).s,n=t.l),t=Number(t),e=Number(e),n=Number(n),e/=100,n/=100;var i=(1-Math.abs(2*n-1))*e,s=i*(1-Math.abs(t/60%2-1)),r=n-i/2,o=0,l=0,c=0;return 0<=t&&t<60?(o=i,l=s,c=0):60<=t&&t<120?(o=s,l=i,c=0):120<=t&&t<180||180<=t&&t<240?(o=0,l=s,c=i):240<=t&&t<300?(o=s,l=0,c=i):300<=t&&t<360&&(o=i,l=0,c=s),{r:o=Math.round(255*(o+r)),g:l=Math.round(255*(l+r)),b:c=Math.round(255*(c+r))}},I.getLuminousColorShade=function(t,e){t=this.validateHex(t).substr(1),e=e||0;var n,i,a="#";for(i=0;i<3;i++)n=parseInt(t.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),a+="00".concat(n).substr(n.length);return a},I.validateHex=function(t){return(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#".concat(t)},I.getContrastColor=function(t,e,n){t=t?t.replace("#",""):"";var i=function(e){return parseInt(t.substr(e,2),16)};return(299*i(0)+587*i(2)+114*i(4))/1e3>=128?n||"black":e||"white"},I.getDesaturatedColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t=t?t.replace("#",""):"";var n=I.hexToRgb(t),i=.3086*n.r+.6094*n.g+.082*n.b;return n.r=Math.round(n.r*e+i*(1-e)),n.g=Math.round(n.g*e+i*(1-e)),n.b=Math.round(n.b*e+i*(1-e)),I.rgbToHex(n.r,n.g,n.b)},I.isLighter=function(t,e){var n=I.hexToRgb(t),i=I.hexToRgb(e),a=I.rgbToHsl(n),s=I.rgbToHsl(i);return a.l<=s.l};var L=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],P="",N=!1;"object"===a(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(P=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(N=window.SohoConfig.minifyCultures));var R={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:P,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pt-BR","pt-PT"],defaultLocale:"en-US",minify:N,updateLanguageTag:function(t){var e=$("html");2===t.length&&(t=this.defaultLocales.filter(function(e){return e.lang===t})),e.attr("lang",t),this.isRTL()?e.attr("dir","rtl"):e.removeAttr("dir"),this.isRTL()&&R.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var t=document.getElementsByTagName("script"),e=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,n=0;n<t.length;n++){var i=t[n].src,a=i.indexOf("?");if(""!==i&&a>-1&&(i=i.substr(0,a)),"sohoxi-script"===t[n].id)return"".concat(i.substring(0,i.lastIndexOf("/")),"/");i.match(e)&&(this.culturesPath="".concat(i.replace(e,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var t=!1,e=document.getElementsByTagName("script"),n=0;n<e.length;n++)e[n].src.indexOf("cultures")>-1&&(t=!0);return t},correctLocale:function(t){"in-ID"===t&&(t="id-ID"),"iw"===t.substr(0,2)&&(t="he-IL");var e=t.split("-")[0];if(-1===this.supportedLocales.indexOf(t)){if((t=this.defaultLocales.filter(function(t){return t.lang===e}))&&t[0])return t[0].default;t=this.defaultLocale}return t},correctLanguage:function(t){var e;"en-"===(null===(e=t)||void 0===e||null==e?void 0:e.substr(0,3))&&(t=t.substr(0,2));var n=this.defaultLocales.filter(function(e){return e.lang===t});return n&&n[0]?this.remapLanguage(t):n=this.remapLanguage(t)},remapLanguage:function(t){var e=t;return"in"===t&&(e="id"),"iw"===t&&(e="he"),"nb"!==t&&"nn"!==t&&"nb-NO"!==t&&"nn-NO"!==t||(e="no"),e},addCulture:function(t,e,n){var i=t.substr(0,2);if(this.cultures[t]=e,this.cultures[t].name=t,!this.languages[i]&&e.messages)this.languages[i]={name:i,direction:e.direction||(n?n.direction:""),nativeName:e.nativeName||(n?n.nativeName:""),messages:e.messages||(n?n.messages:{})},this.languages[t]={name:t,direction:e.direction||(n?n.direction:""),nativeName:e.nativeName||(n?n.nativeName:""),messages:e.messages||(n?n.messages:{})};else if(!this.languages[i]&&!e.messages){var a=this.parentLocale(t);a.default&&a.default!==t&&!this.cultures[a.default]&&this.appendLocaleScript(a.default)}},parentLocale:function(t){var e=t.substr(0,2),n=this.defaultLocales.filter(function(t){return t.lang===e})[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(t)>-1?{lang:"fr",default:"fr-CA"}:n},appendedLocales:[],appendLocaleScript:function(t,e,n,i){var s=this,r=document.createElement("script"),o=this.minify?".min":"";r.async=!1,this.appendedLocales.indexOf(t)>-1||(this.appendedLocales.push(t),r.src=i?"".concat(this.getCulturesPath()+i).concat(o,".js"):"".concat(this.getCulturesPath()+t).concat(o,".js"),r.onload=function(){e&&!n&&(s.setCurrentLocale(t,s.cultures[t]),s.dff[t].resolve(t)),n&&s.dff[n]&&(s.setCurrentLocale(t,s.cultures[t]),s.setCurrentLocale(n,s.cultures[n]),s.dff[n].resolve(n)),n&&s.dff[t]&&s.cultures[t]&&(s.setCurrentLocale(t,s.cultures[t]),s.dff[t].resolve(t)),e||n||!s.dff[t]||s.dff[t].resolve(t)},r.onerror=function(){s.dff[t]&&s.dff[t].reject()},"object"===a(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&r.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(r))},set:function(t){if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===t);var e=!1,n=this.parentLocale(t);return n.default&&n.default!==t&&!this.cultures[n.default]&&(e=!0),e||!t||this.cultures[t]||this.currentLocale.name===t||"en-US"===t||(this.setCurrentLocale(t),this.appendLocaleScript(t,!0)),e&&("en-US"!==n.default&&this.appendLocaleScript(n.default,!1),this.appendLocaleScript(t,!1,n.default)),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(this.currentLocale.name),this.setCurrentLocale(t,this.cultures[t]),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(this.currentLocale.name),this.dff[t].promise()},getLocale:function(t,e){if(!t)return null;if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t){var n=$.Deferred();return n.resolve(),n.promise()}return t&&"en-US"!==t&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),t&&!this.cultures[t]&&this.currentLocale.name!==t&&"en-US"!==t&&this.appendLocaleScript(t,!1,!1,e),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(t),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(t),this.dff[t].promise()},setLanguage:function(t){var e=this,n=this.currentLocale.name;t=this.correctLanguage(t),this.languages[t]||this.set(t).done(function(){e.set(n),e.setLanguage(t)});var i=this.correctLocale(t);return this.languages[t]?(this.currentLanguage=this.languages[t],this.updateLanguageTag(t),this.dff[i]=$.Deferred(),this.dff[i].resolve()):(this.currentLanguage.name=t,this.dff[i])},setCurrentLocale:function(t,e){var n,i,s,r,o,l=this.remapLanguage(t.substr(0,2));this.currentLocale.name=t,e&&(this.currentLocale.data=e,this.currentLocale.dataName=t,this.currentLanguage={},this.currentLanguage.name=l,this.languages[l]&&(this.currentLanguage=this.languages[l],this.updateLanguageTag(t)),this.translatedLocales.indexOf(t)>-1&&(this.languages[l].direction=e.direction,this.languages[l].messages=e.messages,this.languages[l].name=l,this.languages[l].nativeName=e.nativeName,this.languages[t]={direction:e.direction,messages:e.messages,name:t,nativeName:e.nativeName}),"object"===("undefined"==typeof d3?"undefined":a(d3))&&d3.formatDefaultLocale({decimal:(null==e||null===(n=null==e?void 0:e.numbers)||void 0===n||null==n?void 0:n.decimal)||".",thousands:(null==e||null===(i=null==e?void 0:e.numbers)||void 0===i||null==i?void 0:i.group)||",",grouping:(null==e||null===(s=null==e?void 0:e.numbers)||void 0===s||null==s?void 0:s.groupSizes)||[3],percent:(null==e||null===(r=null==e?void 0:e.numbers)||void 0===r||null==r?void 0:r.percentSign)||"%",currency:null!=e&&(null==e?void 0:e.currencySign)?""===e.currencyFormat.split("\xa4")[0]?[e.currencySign,""]:["",e.currencySign]:["$",""],minus:(null==e||null===(o=null==e?void 0:e.numbers)||void 0===o||null==o?void 0:o.minusSign)||"-"}))},formatDate:function(t,e){e||(e={date:"short"});var n=this.useLocale(e);if(t){if("0000"===t||"000000"===t||"00000000"===t)return"";if("string"==typeof t&&/T|Z/g.test(t)&&(t=this.newDateObj(t)),!(t instanceof Date)&&"string"==typeof t){var i=R.parseDate(t,e);isNaN(i)&&"datetime"===e.date&&"-"===t.substr(4,1)&&"-"===t.substr(7,1)&&(i=new Date(t.substr(0,4),t.substr(5,2)-1,t.substr(8,2),t.substr(11,2),t.substr(14,2),t.substr(17,2))),t=i}if(t instanceof Date||"number"!=typeof t||(t=new Date(t)),t){var a,s="",r=n.calendars?n.calendars[0]:null;e.pattern&&(a=e.pattern),e.date&&(a=r.dateFormat[e.date]),"string"==typeof e&&""!==e&&(a=e),a||(a=r.dateFormat.short);var o=t instanceof Array?t[0]:t.getFullYear(),l=t instanceof Array?t[1]:t.getMonth(),c=t instanceof Array?t[2]:t.getDate(),d=t.getDay?t.getDay():"",u=t instanceof Array?t[3]:t.getHours(),h=t instanceof Array?t[4]:t.getMinutes(),p=t instanceof Array?t[5]:t.getSeconds(),f=t instanceof Array?t[6]:t.getMilliseconds();if(e.fromGregorian||e.toUmalqura){var g=this.gregorianToUmalqura(t);c=g[2],l=g[1],o=g[0]}if(e.toGregorian||e.fromUmalqura){var m=this.umalquraToGregorian(o,l,c);c=m.getDate(),l=m.getMonth(),o=m.getFullYear()}var v=(s=(s=(s=(s=(s=(a=(a=(a=(a=a.replace("de","nnnnn")).replace("ng\xe0y","nnnn")).replace("th\xe1ng","t1\xe1ng")).replace("den","nnn")).replace("dd",this.pad(c,2))).replace("d",c)).replace("yyyy",o)).replace("yy",o.toString().substr(2))).replace("y",o)).indexOf(" a")>-1||0===s.indexOf("a");if(v&&0===u&&(s=(s=s.replace("hh",12)).replace("h",12)),s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace("hh",u>12?this.pad(u-12,2):this.pad(u,2))).replace("h",u>12?u-12:u)).replace("HH",this.pad(u,2))).replace("H",u)).replace("mm",this.pad(h,2))).replace("ss",this.pad(p,2))).replace("SSS",this.pad(f,3))).replace("MMMM",r?r.months.wide[l]:null)).replace("MMM",r?r.months.abbreviated[l]:null),-1===a.indexOf("MMM")&&(s=(s=s.replace("MM",this.pad(l+1,2))).replace("M",l+1)),v&&r&&(0===(s=s.replace(" a"," ".concat(u>=12?r.dayPeriods[1]:r.dayPeriods[0]))).indexOf("a")&&(s=s.replace("a"," ".concat(u>=12?r.dayPeriods[1]:r.dayPeriods[0]))),s=s.replace("EEEE",r.days.wide[d])),r&&(s=s.replace("EEEE",r.days.wide[d])),r&&(s=s.replace("EEE",r.days.abbreviated[d])),r&&(s=s.replace("EE",r.days.narrow[d])),(s=(s=(s=(s=s.replace("nnnnn","de")).replace("nnnn","ng\xe0y")).replace("t1\xe1ng","th\xe1ng")).replace("nnn","den")).indexOf("zz")>-1){var b=new Date,y=this.getTimeZone(b,"short"),w=this.getTimeZone(b,"long");s=(s=s.replace("zzzz",w)).replace("zz",y)}return(s=s.replace(/&lrm;|\u200E/gi," ")).trim()}}},newDateObj:function(t){var e=new Date(t);if("safari"===m.browser.name&&"string"==typeof t&&/T|Z/g.test(t)){var n=t.replace(/Z/,"").replace(/T|:/g,"-").split("-");n=n.map(function(t,e){return+(1===e?t-1:t)}),e=l(Date,c(n))}return e},formatHour:function(t,e){var n=this.calendar().dateFormat.timeSeparator,i=this.currentLocale.name;"object"===a(e)&&(i=e.locale||i,n=e.timeSeparator||this.calendar(i).dateFormat.timeSeparator),"string"==typeof t&&-1===t.indexOf(n)&&(n=":");var s=new Date;if("number"==typeof t){var r=t.toString().split(".");s.setHours(r[0]),s.setMinutes(r[1]?60*parseFloat("0.".concat(r[1])):0)}else{var o=t.split(n);s.setHours(o[0]),s.setMinutes(o[1]||0)}return this.formatDate(s,{date:"hour"})},formatHourRange:function(t,e,n){var i=this.currentLocale.name,s=this.calendar(i).dayPeriods,r=!1;"object"===a(n)&&(i=n.locale||i,s=this.calendar(i).dayPeriods);var o="".concat(R.formatHour(t,n)," - ").concat(R.formatHour(e,n));return(o.indexOf(":00 AM -")>-1||o.indexOf(":00 PM -")>-1)&&(r=!0),E.count(o,s[0])>1&&(o=o.replace(s[0],"")),E.count(o,s[1])>1&&(o=o.replace(" ".concat(s[1]),"")),o=o.replace("  "," "),r&&(o=o.replace(":00 -"," -")),o},getTimeZone:function(t,e){var n=R.currentLocale.name||"en-US";if("ie"===m.browser.name&&"11"===m.browser.version)return t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("");var i=t.toLocaleDateString(n),a=t.toLocaleDateString(n,{timeZoneName:"long"===e?"long":"short"}),s=a.indexOf(i);return s>=0?(a.substring(0,s)+a.substring(s+i.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):a},dateToTimeZone:function(t,e,n){return"ie"===m.browser.name&&"11"===m.browser.version?"".concat(t.toLocaleString(R.currentLocale.name)," ").concat(t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):t.toLocaleString(R.currentLocale.name,{timeZone:e,timeZoneName:n})},dateToUTC:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},toLocaleString:function(t,e,n,i){if("number"!=typeof t)return"";var s={locale:e||R.currentLocale.name,options:n||void 0},r=t.toLocaleString(s.locale,s.options);if(!/undefined|null/.test(a(i))){var o=this.getSeparator(s.locale,"group");"."!==o&&(r=r.replace(new RegExp(o,"g"),i.toString()))}return r},getSeparator:function(t,e){return Intl.NumberFormat(t).formatToParts(1000.1).find(function(t){return t.type===e}).value},convertNumberToEnglish:function(t){for(var e=["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],n=["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],i=["\u96f6","\u58f9","\u8cb3","\u53c4","\u8086","\u4f0d","\u9678","\u67d2","\u634c","\u7396"],a=["\u96f6","\u58f9","\u8d30","\u53c1","\u8086","\u4f0d","\u9646","\u67d2","\u634c","\u7396"],s=["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],r=0;r<=9;r++)t=(t=(t=(t=(t=(t=(t=t.replace(e[r],r)).replace("\u066c","")).replace(",","")).replace(n[r],r)).replace(i[r],r)).replace(a[r],r)).replace(s[r],r),0===r&&(t=t.replace("\u96f6",r));return parseFloat(t)},isValidDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},parseDate:function(t,e,n){if(t){var i=e,s=this.currentLocale.name,r=this.calendar();"object"===a(e)&&(s=e.locale||s,i=e.dateFormat||this.calendar(s).dateFormat[i.date]),"object"===a(e)&&e.pattern&&(i=e.dateFormat||e.pattern),"object"===a(e)&&e.calendarName&&e.locale&&(r=this.calendar(e.locale,e.language,e.calendarName)),i||(i=this.calendar(s).dateFormat.short);var o=t;if("0000"!==t&&"000000"!==t&&"00000000"!==t){var l,c;i.pattern&&(i=i.pattern);var d,u,h={},p=i.toLowerCase().indexOf("h")>-1,f=t.toLowerCase().indexOf("z")>-1,g=!!r.dayPeriods.filter(function(t){return t.indexOf(".")>-1}).length&&i.indexOf("a")>-1&&i.indexOf("ah")<0&&i.indexOf("H")<0,m=3===(i.match(/M/g)||[]).length&&r&&r.months&&r.months.abbreviated&&r.months.abbreviated.filter(function(t){return/\./.test(t)}).length;if(p){var v=R.getTimeZone(new Date,"short"),b=R.getTimeZone(new Date,"long");t=(t=t.replace(" ".concat(v),"")).replace(" ".concat(b),"");var y=m?/[T\s:-]/g:/[T\s:.-]/g;i=(i=i.replace(" zzzz","").replace(" zz","")).replace(y,"/").replace(/z/i,""),i=g?i.replace("//","/"):i,t=t.replace(g?/[T\s:-]/g:y,"/").replace(/z/i,"")}i=i.replace(" de "," "),t=t.replace(" de "," "),i=i.replace("/ah/","/a/h/"),t=t.replace("\u5348","\u5348/"),i=i.replace(",",""),t=t.replace(",","");var w=i.indexOf("Mdyyyy"),x=i.indexOf("dMyyyy"),C=-1,k=-1;if((w>-1||x>-1)&&(k=(C=w>-1?w:x>-1?x:0)+t.indexOf("/")>-1?t.indexOf("/"):t.length,t="".concat(t.substr(C,k-4),"/").concat(t.substr(k-4,t.length)),t="".concat(t.substr(C,t.indexOf("/")/2),"/").concat(t.substr(t.indexOf("/")/2,t.length))),w>-1&&(i=i.replace("Mdyyyy","M/d/yyyy")),x>-1&&(i=i.replace("dMyyyy","d/M/yyyy")),-1!==i.indexOf(" ")){var T=m?/[\s:]/g:/[\s:.]/g;i=i.replace(T,"/"),t=t.replace(T,"/")}if(i.indexOf("MMMM")>-1&&R.isRTL()&&i&&"MMMM/dd"!==i&&"dd/MMMM"!==i){var A=t.lastIndexOf("/");t=t.substr(0,A-1).replace("/"," ")+t.substr(A)}if(-1===i.indexOf(" ")&&-1===i.indexOf(".")&&-1===i.indexOf("/")&&-1===i.indexOf("-")){-1!==t.indexOf(" ")?t=t.split(" ").join(""):-1!==t.indexOf(".")?t=t.split(".").join(""):-1!==t.indexOf("/")?t=t.split("/").join(""):-1!==t.indexOf("-")&&(t=t.split("-").join(""));var S=i[0],E="",D="";for(d=0,u=i.length;d<u;d++)D+=i[d]!==S?"/".concat(t[d]):t[d],E+=i[d]!==S?"/".concat(i[d]):i[d],d>1&&(S=i[d]);t=D,i=E}l=i.split("/"),c=t.split("/"),1===l.length&&(l=i.split(".")),1===c.length&&(c=t.split(".")),1===l.length&&(l=i.split("-")),1===c.length&&(c=t.split("-")),1===l.length&&(l=i.split(" ")),1===c.length&&(c=t.split(" "));var I=this.getDatePart(l,c,"M","MM","MMM","MMMM"),M=this.getDatePart(l,c,"y","yy","yyyy"),L=!1,P=!1,N=r.dayPeriods[0],O=r.dayPeriods[1];for(g||(N=N.replace(/\./g,""),O=O.replace(/\./g,"")),d=0,u=c.length;d<u;d++){var B="".concat(l[d]),_=c[d],F=parseInt(_,10);L||(L=B.toLowerCase().indexOf("d")>-1);var z=void 0,H=void 0,q=void 0;switch(B){case"d":if(z=new Date(M,I,0).getDate(),F<1||F>31||F>z)return;h.day=_;break;case"dd":if(F<1||F>31||F<10&&"0"!==_.substr(0,1))return;h.day=_;break;case"M":if(F<1||F>12)return;h.month=_-1;break;case"MM":if(F<1||F>12||F<10&&"0"!==_.substr(0,1))return;h.month=_-1;break;case"MMM":H=this.calendar(s).months.abbreviated;for(var V=0;V<H.length;V++)o.indexOf(H[V])>-1&&(h.month=V);break;case"MMMM":q=this.calendar(s).months.wide;for(var j=0;j<q.length;j++)o.indexOf(q[j])>-1&&(h.month=j);break;case"yy":h.year=this.twoToFourDigitYear(_);break;case"y":case"yyyy":h.year=2===_.length?this.twoToFourDigitYear(_):_;break;case"h":if(F<0||F>12)return;h.h=P?h.h:_;break;case"hh":if(F<0||F>12)return;h.h=P?h.h:1===_.length?"0".concat(_):_;break;case"H":if(F<0||F>24)return;h.h=P?h.h:_;break;case"HH":if(F<0||F>24)return;h.h=P?h.h:1===_.length?"0".concat(_):_;break;case"ss":if(F<0||F>60){h.ss=0;break}h.ss=_;break;case"SSS":h.ms=_;break;case"mm":if(F<0||F>60){h.mm=0;break}h.mm=_;break;case"a":_.toLowerCase()!==N&&_.toUpperCase()!==N||(h.a="AM",!h.h&&l[d+1]&&"h"===l[d+1].toLowerCase().substr(0,1)&&(h.h=c[d+1],P=!0),h.h&&(12!==h.h&&"12"!==h.h||(h.h=0))),_.toLowerCase()!==O&&_.toUpperCase()!==O||(h.a="PM",h.h&&h.h<12&&(h.h=parseInt(h.h,10)+12))}}var W=function(t){return t%4==0&&t%100!=0||t%400==0};if(h.return=void 0,h.leapYear=W(h.year),!p||h.h||h.mm){if(!h.year&&0!==h.year&&!n){for(h.isUndefindedYear=!0,d=0,u=l.length;d<u;d++)if(l[d].indexOf("y")>-1&&void 0!==c[d]){h.isUndefindedYear=!1;break}if(h.isUndefindedYear){var U=29===parseInt(h.day,10)&&1===parseInt(h.month,10);if(h.year=U?function(t){for(var e=(new Date).getFullYear(),n=0;n<4&&!W(e);n++)e--;return e}():(new Date).getFullYear(),"islamic-umalqura"===r.name){var G=this.gregorianToUmalqura(new Date(h.year,0,1));h.year=G[0]}}else delete h.year}if(h.year&&2===h.year.length&&(h.year="20".concat(h.year)),h.year=$.trim(h.year),h.day=$.trim(h.day),(""===h.year||h.year&&2!=="".concat(h.year).length&&4!=="".concat(h.year).length)&&delete h.year,!h.month&&0!==h.month&&!n){for(h.isUndefindedMonth=!0,d=0,u=l.length;d<u;d++)if(l[d].indexOf("M")>-1&&void 0!==c[d]){h.isUndefindedMonth=!1;break}h.isUndefindedMonth&&(h.month=(new Date).getMonth())}if(!(h.day||0===h.day||n&&L)){for(h.isUndefindedDay=!0,d=0,u=l.length;d<u;d++)if(l[d].indexOf("d")>-1&&void 0!==c[d]){h.isUndefindedDay=!1;break}h.isUndefindedDay?h.day=1:delete h.day}return p?f?(void 0!==h.h&&(h.return=new Date(Date.UTC(h.year,h.month,h.day,h.h,h.mm))),void 0!==h.ss&&(h.return=new Date(Date.UTC(h.year,h.month,h.day,h.h,h.mm,h.ss))),void 0!==h.ms&&(h.return=new Date(Date.UTC(h.year,h.month,h.day,h.h,h.mm,h.ss,h.ms)))):(void 0!==h.h&&(h.return=new Date(h.year,h.month,h.day,h.h,h.mm)),void 0!==h.ss&&(h.return=new Date(h.year,h.month,h.day,h.h,h.mm,h.ss)),void 0!==h.ms&&(h.return=new Date(h.year,h.month,h.day,h.h,h.mm,h.ss,h.ms))):h.return=new Date(h.year,h.month,h.day),"islamic-umalqura"===r.name?[parseInt(h.year,10),parseInt(h.month,10),parseInt(h.day,10),parseInt(h.h||0,10),parseInt(h.mm||0,10),parseInt(h.ss||0,10),parseInt(h.ms||0,10)]:this.isValidDate(h.return)?h.return:void 0}}}},twoToFourDigitYear:function(t){return parseInt((t>39?"19":"20")+t,10)},getDatePart:function(t,e,n,i,a,s){var r=0;return $.each(e,function(o){n!==t[o]&&i!==t[o]&&a!==t[o]&&s!==t[o]||(r=e[o])}),r},useLocale:function(t){var e=this.currentLocale.data;if(t&&t.locale&&this.cultures[t.locale]&&(e=this.cultures[t.locale]),t&&t.language&&this.languages[t.language]){var n=C.extend(!0,{},this.currentLocale.data);if(n.calendars)return n.calendars[0]=this.calendar(t.locale||this.currentLocale.name,t.language),n}return e.numbers||(e.numbers=this.numbers()),e},useLanguage:function(t){var e=this.currentLanguage;if(t&&t.locale){var n=t.locale.split("-")[0];e=this.languages[n]}return t&&t.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(e=this.languages[this.currentLanguage.name]),t&&t.language&&this.languages[t.language]&&(e=this.languages[t.language]),e},formatNumber:function(t,e){var n,i,a,s=this.useLocale(e),r=e&&e.decimal?e.decimal:s.numbers.decimal,o=e&&void 0!==e.minimumFractionDigits?e.minimumFractionDigits:e&&e.style&&"currency"===e.style?2:e&&e.style&&"percent"===e.style?0:2,l=e&&void 0!==e.maximumFractionDigits?e.maximumFractionDigits:e&&e.style&&("currency"===e.style||"percent"===e.style)?2:e&&e.minimumFractionDigits?e.minimumFractionDigits:3;if(null!=t&&""!==t){if(e&&"integer"===e.style&&(l=0,o=0),e&&"currency"===e.style){var c=e&&e.currencySign?e.currencySign:s.currencySign,d=e&&e.currencyFormat?e.currencyFormat:s.currencyFormat;d||(d="\xa4#,##0.00"),i=d.replace("\xa4",c)}if(e&&"percent"===e.style){var u=s.numbers?s.numbers.percentSign:"%";a=(a=s.numbers?s.numbers.percentFormat:"### %").replace("\xa4",u)}"string"==typeof t&&(t=R.parseNumber(t)),t.toString().indexOf("e")>-1&&(t=t.toFixed(l+1)),e&&"percent"===e.style&&(t=(100*t).toFixed(o));var h=this.truncateDecimals(t,o,l,e&&e.round).split("."),p=[3,3];s&&s.numbers&&s.numbers.groupSizes&&(p=s.numbers.groupSizes),e&&e.groupSizes&&(p=e.groupSizes);var f=e&&void 0!==e.group?e.group:s.numbers.group,g=this.expandNumber(h[0],p,f);h[0]=g,n=h.join(r);var m=s&&s.numbers&&s.numbers.minusSign?s.numbers.minusSign:"-",v=n.indexOf(m)>-1;n=n.replace(m,"");var b=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},y="";return 0===o&&(y=new RegExp("(".concat(b(r),"[0-9]*?)0+$")),n=n.replace(y,"$1")),o>0&&(y=new RegExp("(".concat(b(r),".{").concat(o,"}[0-9]*?)0+$")),n=n.replace(y,"$1")),y=new RegExp("".concat(b(r),"$")),n=n.replace(y,""),e&&"currency"===e.style&&(n=i.replace("###",n)),e&&"percent"===e.style&&(n=a.replace("###",n)),v&&(n=m+n),n}},expandNumber:function(t,e,n){var i=t.length,a=!1;if("-"===t.substr(0,1)&&(i=(t=t.substr(1)).length,a=!0),i<=3)return(a?"-":"")+t;if(0===e[0])return(a?"-":"")+t;var s=t.substr(t.length-e[0]),r=t.substr(0,t.length-e[0]);if(0===e[1])return(a?"-":"")+r+(""===r?"":n)+s;var o=r.split("").reverse().join(""),l=new RegExp(".{1,".concat(e[1],"}"),"g");return(a?"-":"")+o.match(l).join(n).split("").reverse().join("")+n+s},truncateDecimals:function(t,e,n,i){var a=t;a=i?D.round(t,n):D.truncate(t,n);var s=D.decimalPlaces(a);return s<e&&(a=a.toString()+new Array(e-s+1).join("0")),a.toString()},parseNumber:function(t,e){var n,i=this.useLocale(e),a=i.numbers;if(!(n=t))return NaN;"number"==typeof t&&(n=n.toString());var s=e&&e.group?e.group:a?a.group:",",r=e&&e.decimal?e.decimal:a?a.decimal:".",o=e&&e.percentSign?e.percentSign:a?a.percentSign:"%",l=e&&e.currencySign?e.currencySign:i.currencySign||"$",c=" "===s?new RegExp(/\s/g):new RegExp("\\".concat(s),"g");return(n=(n=(n=(n=(n=(n=n.replace(c,"")).replace(r,".")).replace(o,"")).replace(l,"")).replace("$","")).replace(" ","")).length>=18?n:parseFloat(n)},translate:function(t,e){var n=this.useLanguage(e),i=!1,s=!0;return"&nsbp;"===t?"":("boolean"==typeof e&&(i=e),"object"===a(e)&&void 0!==e.showAsUndefined&&(i=e.showAsUndefined),"object"===a(e)&&void 0!==e.showBrackets&&(s=e.showBrackets),void 0===n||void 0===n.messages?i?void 0:"".concat(s?"[":"").concat(t).concat(s?"]":""):void 0===n.messages[t]?this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[t]?this.languages.en.messages[t].value:i?void 0:"".concat(s?"[":"").concat(t).concat(s?"]":""):n.messages[t].value)},extendTranslations:function(t,e){if(this.languages[t]){var n=this.languages[t].messages;this.languages[t].messages=C.extend(!0,n,e)}},calendar:function(t,e,n){var i=[];if(this.currentLocale.data.calendars&&!t&&(i=this.currentLocale.data.calendars),e&&e.length>2&&(e=e.substr(0,2)),t&&this.cultures[t]&&(i=this.cultures[t].calendars),n&&i)for(var a=0;a<i.length;a++){var s=i[a];if(s.name===n)return s}if(!i[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var r=C.extend(!0,{},i[0]);if(e&&t.substr(0,2)!==e){var o=this.defaultLocales.filter(function(t){return t.lang===e});if(o[0]){var l=this.cultures[o[0].default];r.days=l.calendars[0].days,r.months=l.calendars[0].months,r.dayPeriods=l.calendars[0].dayPeriods}}return r},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},isIslamic:function(t){var e;return"islamic-umalqura"===(null===(e=this.calendar(t))||void 0===e||null==e?void 0:e.name)},toUpperCase:function(t){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(t):t.toLocaleUpperCase()},toLowerCase:function(t){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(t):t.toString().toLocaleLowerCase()},capitalize:function(t){return this.toUpperCase(t.charAt(0))+t.slice(1)},capitalizeWords:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)e[n]=this.capitalize(e[n]);return e.join(" ")},gregorianToUmalqura:function(t){if("function"!=typeof t.getMonth)return null;var e=function(t){for(var e=t-24e5+.5,n=0,i=0;i<L.length&&!(L[i]>e);i++)n++;var a=n+15292,s=Math.floor((a-1)/12);return{year:s+1,month:a-12*s-1,day:e-L[n-1]+1}}(function(t,e,n){t<0&&t++,e<3&&(e+=12,t--);var i=Math.floor(t/100),a=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+n+a-1524.5}(t.getFullYear(),t.getMonth()+1,t.getDate()));return[e.year,e.month,e.day,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]},umalquraToGregorian:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Array.isArray(t)&&(e=t[1],n=t[2]||0,i=t[3]||0,a=t[4]||0,s=t[5]||0,r=t[6]||0,t=t[0]);var o=function(t){return"number"==typeof t&&!isNaN(t)};if(!o(t)||!o(e)||!o(n))return null;var l=function(t,e,n){return n+L[12*(t-1)+e-15292-1]-1+24e5-.5},c=l(t,e+1,n),d=function(t){var e=Math.floor(t+.5),n=Math.floor((e-1867216.25)/36524.25),i=1524+(n=e+1+n-Math.floor(n/4)),a=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*a),r=Math.floor((i-s)/30.6001),o=r-(r>13.5?13:1),l=a-(o>2.5?4716:4715);return l<=0&&l--,{year:l,month:o-1,day:i-s-Math.floor(30.6001*r)}},u=d(c),h=new Date(u.year,u.month,u.day,i,a,s,r);return h},flipIconsHorizontally:function(){var t=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each(function(){var e=$(this).getIconName();e&&-1!==$.inArray(e,t)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")})}};function O(t){if("function"!=typeof t){if("string"==typeof t)return t;throw new Error("".concat(a(t)," was provided where a function was expected."))}if("string"==typeof t.name)return"".concat(t.name,"()");var e=/^function\s+([\w$]+)\s*\(/.exec(t.toString());return e?"".concat(e[1],"()"):"(anonymous function)"}function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===("undefined"==typeof console?"undefined":a(console))){var i=O(t),s=O(e);n.length&&(n=" (".concat(n,")")),console.warn("IDS Enterprise".concat(n,': "').concat(s,'" is deprecated. Please use "').concat(i,'" instead.'))}}function _(t){"object"===("undefined"==typeof console?"undefined":a(console))&&console.warn('IDS Enterprise: "'.concat(t,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function F(t,e){var n=function(){B(t,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.apply(this,i)};return n.prototype=t.prototype,n}function z(t){return this.element=$(t),this}z.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return B("url","getCurrentURL"),this.url},getBaseURL:function(t){return this.element.length&&this.href&&"/"!==this.href?t?0===t.indexOf("/")?t:(t=(-1===t.indexOf("#")?"#":"")+t,this.url+t):this.url:t||""}};var H=new z($("base[href]"));$.getBaseURL=function(t){return H.getBaseURL(t)};var q={noAutoStart:!1},V={};function j(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function W(t){if(this.id=t.id,this.duration=t.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=t.updateDuration||1,this.setFuncs(t),this.paused=!1,this.elapsedTime=0,this.startTime=j(),this}function U(t){return this.items=[],this.element=$("body"),this.settings=C.mergeSettings(null,t,q),!0!==this.settings.noAutoStart&&this.start(),this}"object"===a(window.SohoConfig)&&"object"===a(window.SohoConfig.renderLoop)&&(V=C.extend({},q,window.SohoConfig.renderLoop)),W.prototype={setFuncs:function(t){if("function"!=typeof t.updateCallback&&"function"!=typeof t.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof t.updateCallback&&(this.updateCallback=t.updateCallback),"function"==typeof t.timeoutCallback&&(this.timeoutCallback=t.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(t){t&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},U.prototype={start:function(){this.doLoop=!0,this.startTime=j();var t,e,n=this,i=j();!function a(){n.doLoop&&(t=j(),e=(t-i)/1e3,n.items.forEach(function(a){var s;if(a.doRemoveOnNextTick)n.remove(a);else if(a.paused||a.elapsedTime++,"number"==typeof a.duration&&a.duration>-1&&(a.startTime||(a.startTime=t),a.elapsedTime>=a.duration))a.destroy();else if("function"==typeof a.updateCallback){if(a.updateDuration&&a.updateDuration>1&&(isNaN(a.timeUntilNextUpdate)&&(a.timeUntilNextUpdate=a.updateDuration),a.timeUntilNextUpdate>0))return void--a.timeUntilNextUpdate;s=[a,{last:i,delta:e,now:t}],a.updateCallback.apply(null,s)}}),i=t,requestAnimationFrame(a))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return j()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(t,e,n,i){var a="string"!=typeof i||!i.length;if("string"==typeof n)if(a)i=n,n=-1,a=!1;else{var s=Number(n);isNaN(s)||(n=s)}else"number"!=typeof n&&(n=-1);return"string"==typeof i&&i.length||(i=""),new W({id:i,updateCallback:t,timeoutCallback:e,duration:n})},register:function(t,e,n,i){return t instanceof W||(t=this.buildRenderLoopItem(t,e,n,i)),this.items.push(t),t},unregister:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof t&&(e=t,t=void 0),this.remove({cb:t,id:e})},getFromQueue:function(t,e){var n;return"string"==typeof callback&&(e=t,t=void 0),"function"==typeof callback?this.items.forEach(function(e){return"".concat(e.updateCallback)!=="".concat(t)||(n=e,!1)}):"string"==typeof e&&this.items.forEach(function(t){return t.id!==e||(n=t,!1)}),n},remove:function(t){var e;return t instanceof W?(e=t,this.items=this.items.filter(function(e){return e!==t})):"function"==typeof t.updateCallback?this.items=this.items.filter(function(n){return"".concat(n.updateCallback)!=="".concat(t.updateCallback)||(e=n,!1)}):"string"==typeof t.id&&(this.items=this.items.filter(function(n){return n.id!==t.id||(e=n,!1)})),"function"!=typeof e.timeoutCallback||e.noTimeout||e.timeoutCallback.apply(null,e),this.element.triggerHandler("remove.renderLoop",[e]),e},pause:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(t,e);return n.pause(),n},resume:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var n=this.getFromQueue(t,e);return n.resume(),n}};var G=new U(V);function Y(){this.pressedKeys=new Map,this.init()}Y.prototype={init:function(){var t=this;$(document).on("keydown.".concat("keyboard"),function(e){t.press(e.key),t.announceKeys()}).on("keyup.".concat("keyboard"),function(e){t.unpress(e.key),t.announceKeys()})},announceKeys:function(){var t=[];this.pressedKeys.forEach(function(e,n){t.push(n)}),$("body").triggerHandler("keys",[t])},press:function(t){return this.pressedKeys.set("".concat(t),!0)},unpress:function(t){return this.pressedKeys.delete("".concat(t))},isPressed:function(t){return this.pressedKeys.has("".concat(t))}};var K=new Y;function X(t){return void 0!==t&&t.element instanceof $&&"function"==typeof t.destroy}function Q(){return this.modals=[],this.handleEvents(),this}Q.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter(function(t){return t.visible})},get currentlyActive(){var t;return this.modals.forEach(function(e){e.active&&(t=e)}),t},set currentlyActive(t){if(!X(t))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach(function(e,n){e.active=$(e.element).is(t.element),e.active?e.element[0].style.zIndex="".concat(1020+n):e.visible?e.element[0].style.zIndex="".concat(920+n):e.element[0].style.zIndex=""}),this.refresh()},get last(){var t,e=this.currentlyOpen,n=e.length;return n&&(t=e[n-1]),t},render:function(){var t=document.createDocumentFragment(),e=document.createElement("div"),n=document.createElement("div");e.id="ids-modal-root",e.classList.add("modal-page-container"),e.setAttribute("aria-hidden",!0),t.appendChild(e),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),e.appendChild(n),document.body.appendChild(e),this.rootElem=e,this.overlayElem=n},refresh:function(){var t=this.currentlyActive;t||(t=this.activateLast()),this.checkOverlayVisibility(),t?this.showContainers(t):this.hideContainers(t)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(t){if(!X(t))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter(function(e){return $(e.element).is(t)})>0||this.modals.push(t)},unregister:function(t){if(!X(t))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter(function(e){return!$(e.element).is(t.element)})},checkOverlayVisibility:function(){var t=0;this.currentlyActive&&(t=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.opacity=t?"".concat(t):""},checkRootElements:function(){var t=document.querySelector("#ids-modal-root");if(t instanceof HTMLElement){this.rootElem=t;var e=t.querySelector(".overlay");e instanceof HTMLElement&&(this.overlayElem=e)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=t&&(t instanceof HTMLElement||t instanceof $&&t.length)?$(t).data("modal"):this.last)&&(n&&(e.isCancelled=!0),e.close())},closeAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(e){t&&(e.isCancelled=!0),e.close(void 0,!0)}),this.refresh()},destroyAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(e){(!t||e.capAPI)&&(e.close(void 0,!0),e.destroy())}),this.refresh()},closeLast:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close(void 0,t)},activateLast:function(){var t=this.last;return t&&(this.currentlyActive=t),t},findById:function(t){if(t)return this.modals.filter(function(e){return e.id===t})[0]||void 0},handleEvents:function(){var t=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat("modalmanager"),function(e){var n=$(e.target).parents(".modal");switch(e.which||e.keyCode){case 27:t.close(n,!0);break;case 9:t.setModalFocus(e.shiftKey?"last":"first",e)}});var e=this;this.preRendered?this.checkRootElements():$(document).ready(function(){e.checkRootElements(),e.preRendered=!0}),this.hasEstablishedEvents=!0},setModalFocus:function(t,e){var n=this.currentlyActive;n&&(!n.isFocused||$(n.focusableElems.last).is(document.activeElement)&&"first"===t||$(n.focusableElems.first).is(document.activeElement)&&"last"===t)&&(e.preventDefault(),n.setFocus(t))},teardown:function(){$(document).off("keydown.".concat("modalmanager")),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var J=new Q,Z={themeName:"theme-classic",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#f0f0f0"},font:{name:"body-color-primary-font",value:"#1a1a1a"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},tt={themeName:"theme-classic-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#313236"},font:{name:"body-color-primary-font",value:"#ffffff"}},secondary:{background:{name:"body-color-secondary-background",value:"#414247"}}}}},et={themeName:"theme-classic-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#133c59",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#134d71"},alt:{name:"ids-color-brand-primary-alt",value:"#133c59"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#d8d8d8"},font:{name:"body-color-primary-font",value:"#000000"}},secondary:{background:{name:"body-color-secondary-background",value:"#d8d8d8"}}}}},nt={themeName:"theme-new",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0066D4",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#606066"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#EFEFF0"},font:{name:"body-color-primary-font",value:"#2F2F32"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},it={themeName:"theme-new-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0072ED",paletteName:"{ids.color.brand.primary.base.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#606066"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#3E3E42"},font:{name:"body-color-primary-font",value:"#EFEFF0"}},secondary:{background:{name:"body-color-secondary-background",value:"#47474C"}}}}},at={themeName:"theme-new-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#003876",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#7B0F11",paletteName:"#7B0F11"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#004A99"},alt:{name:"ids-color-brand-primary-alt",value:"#003876"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#47474C"},base:{name:"ids-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"ids-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#EFEFF0"},font:{name:"body-color-primary-font",value:"#3E3E42"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},st={currentTheme:{id:"theme-new-light",name:R.translate("NewLightTheme")},allColors:[{id:"theme-classic-light",colors:Z},{id:"theme-classic-dark",colors:tt},{id:"theme-classic-contrast",colors:et},{id:"theme-new-light",colors:nt},{id:"theme-new-dark",colors:it},{id:"theme-new-contrast",colors:at}],themes:function(){return[{id:"theme-classic-light",name:R.translate("ClassicLightTheme"),themeId:"theme-classic",modeId:"light",modeName:R.translate("Light")},{id:"theme-classic-dark",name:R.translate("ClassicDarkTheme"),themeId:"theme-classic",modeId:"dark",modeName:R.translate("Dark")},{id:"theme-classic-contrast",name:R.translate("ClassicHighContrastTheme"),themeId:"theme-classic",modeId:"contrast",modeName:R.translate("Contrast")},{id:"theme-new-light",name:R.translate("NewLightTheme"),themeId:"theme-new",modeId:"light",modeName:R.translate("Light")},{id:"theme-new-dark",name:R.translate("NewDarkTheme"),themeId:"theme-new",modeId:"dark",modeName:R.translate("Dark")},{id:"theme-new-contrast",name:R.translate("NewHighContrastTheme"),themeId:"theme-new",modeId:"contrast",modeName:R.translate("Contrast")}]},themeColors:function(){var t=this,e=this.allColors.filter(function(e){return e.id===t.currentTheme.id});return e[0]?e[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var t=this.themeColors().palette,e=this.themeColors().brand,n={},i={showBrackets:!1};return n.default={id:"default",name:R.translate("Default",i),backgroundColorClass:"primary-bg-color",value:e.primary.base.value},n.amber={id:"amber",name:R.translate("Amber",i),backgroundColorClass:"amber09",value:t.amber[90].value},n.amethyst={id:"amethyst",name:R.translate("Amethyst",i),backgroundColorClass:"amethyst06",value:t.amethyst[60].value},n.azure={id:"azure",name:R.translate("Azure",i),backgroundColorClass:"azure07",value:t.azure[70].value},n.emerald={id:"emerald",name:R.translate("Emerald",i),backgroundColorClass:"emerald08",value:t.emerald[80].value},n.graphite={id:"graphite",name:R.translate("Graphite",i),backgroundColorClass:"graphite06",value:t.graphite[60].value},n.ruby={id:"ruby",name:R.translate("Ruby",i),backgroundColorClass:"ruby09",value:t.ruby[90].value},n.slate={id:"slate",name:R.translate("Slate",i),backgroundColorClass:"slate06",value:t.slate[60].value},n.turquoise={id:"turquoise",name:R.translate("Turquoise",i),backgroundColorClass:"turquoise09",value:t.turquoise[90].value},n},setTheme:function(t){t=t.replace("soho","classic").replace("uplift","new");var e=this.themes().filter(function(e){return e.id===t});return 0===e.length?"":(this.currentTheme=e[0],e)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1},get new(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1}},rt={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function ot(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,rt),this.init()}ot.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.settings.theme?this.setTheme(this.settings.theme):this.setTheme(this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var t=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),function(){t.updated()}),this},appendStyleSheet:function(t){var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),(e=document.createElement("style")).setAttribute("id","soho-personalization"),e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},getColorStyleSheet:function(t){if(t||(t={}),"string"==typeof t&&(t={header:t}),!t||""===t)return this;var e={header:"2578A9"},n=st.themeColors();t.theme={},t.theme.bg=n.components.body.primary.background.value,t.theme.altbg=n.components.body.secondary.background.value,t.theme.text=n.components.body.primary.font.value,t.theme.altText=n.components.body.secondary.background.value,t.theme.disabledText=n.brand.secondary.alt.value;var i=!1,a=!1,s=!1;n.themeName.indexOf("contrast")>-1&&(a=!0),n.themeName.indexOf("dark")>-1&&(i=!0),(n.themeName.indexOf("uplift")>-1||n.themeName.indexOf("new")>-1)&&(s=!0),t.theme.props={contrast:a,dark:i,newTheme:s};var r={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","#368AC0","#368ac0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},o=!1,l="".concat(t.header||e.header).toLowerCase();l=I.validateHex(l),Object.keys(r).forEach(function(t){o=o||r[t].indexOf(l)>-1}),l=o?"white":null;var c=I.validateHex(t.lightest||I.getLuminousColorShade(t.header||e.header,.3));"white"===I.getContrastColor(c,null,l)?(e.text="ffffff",e.subtext="f0f0f0"):(e.text="000000",e.subtext="292929"),t.header=I.validateHex(t.header||e.header),t.text=I.validateHex(t.text||e.text),t.subtext=I.validateHex(t.subtext||e.subtext),t.btnColorHeader=I.validateHex(t.btnColorHeader||I.getLuminousColorShade(t.header,.3)),t.subheader=I.validateHex(t.subheader||I.getLuminousColorShade(t.header,.2)),t.verticalBorder=I.validateHex(t.verticalBorder||I.getLuminousColorShade(t.header,.1)),t.btnColorSubheader=I.validateHex(t.btnColorSubheader||I.getLuminousColorShade(t.header,-.1)),t.inactive=I.validateHex(t.inactive||I.getLuminousColorShade(t.header,-.2)),t.horizontalBorder=I.validateHex(t.horizontalBorder||I.getLuminousColorShade(t.header,-.3)),t.hover=I.validateHex(t.hover||I.getLuminousColorShade(t.header,-.5)),t.button=I.validateHex(t.button||I.getLuminousColorShade(t.text,-.8)),t.lightest=t.btnColorHeader,t.lighter=t.subheader,t.light=t.verticalBorder,t.base=t.header,t.contrast=t.text,t.dark=t.btnColorSubheader,t.darker=t.inactive,t.darkest=t.horizontalBorder;var d={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],emerald:["#56932e","#1f9254"],slate:["#50535a","#98949e"]},u=!1,h=I.validateHex("".concat(t.header||e.header).toLowerCase());Object.keys(d).forEach(function(t){u=u||d[t].indexOf(h)>-1});var p=t.light,f=u?.5:.7,g=u?.3:.5;s?(f=u?.6:.8,g=u?.6:.8,i?(p=t.darkest,f=.1):a&&(f=.8,g=.4)):i?(p=t.darkest,f=-.1):a&&(f=.3);var m=I.getLuminousColorShade(p,f);m=I.getDesaturatedColor(m,g),t.baseDisabled=m,t.hyperlinkText=i?t.dark:t.lighter,t.hyperlinkTextHover=i?t.darker:t.lightest,t.selection=i?t.darker:t.lightest;var v=I.getContrastColor(t.darkest);return e.tooltipText="white"===v?"ffffff":"000000",t.tooltipText=I.validateHex(t.tooltipText||e.tooltipText),function(t){var e=I.hexToRgb(t.base),n=I.hexToRgb(t.hyperlinkText);return"\n\n.is-personalizable ::selection {\n  background: ".concat(t.selection," !important;\n}\n\n.is-personalizable .header::selection {\n  background-color: ").concat(t.darker," !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\n.btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable {\n  background-color: ").concat(t.base," !important;\n  border-color: ").concat(t.base," !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\n.btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled {\n  background-color: ").concat(t.baseDisabled," !important;\n  border-color: ").concat(t.baseDisabled," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled),\n.btn-link.is-personalizable:not(:disabled) {\n  color: ").concat(t.light," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled) .icon,\n.btn-link.is-personalizable:not(:disabled) .icon {\n  color: ").concat(t.light," !important;\n}\n\n.is-personalizable button.is-pressed,\nbutton.is-personalizable.is-pressed {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable button.is-pressed .icon,\nbutton.is-personalizable.is-pressed .icon {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(t.darker," !important;\n  border-color: ").concat(t.darker," !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(t.darker," !important;\n  border-color: ").concat(t.darker," !important;\n}\n\n.is-personalizable button:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):focus:not(.hide-focus),\nbutton.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable a.btn:focus:not(.hide-focus),\na.btn.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-menu:focus:not(.hide-focus),\na.btn-menu.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-icon:focus:not(.hide-focus),\na.btn-icon.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-tertiary:focus:not(.hide-focus),\na.btn-tertiary.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-close:focus:not(.hide-focus),\na.btn-close.is-personalizable:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.base,",\n    0 0 4px 2px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):focus:not(.hide-focus),\n.btn-primary.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable .btn-secondary:focus:not(.hide-focus),\n.btn-secondary.is-personalizable button:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px ").concat(t.theme.bg,",\n    0 0 0 3px ").concat(t.base,",\n    0 0 4px 2px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .hyperlink:not(.today),\n.hyperlink:not(.today).is-personalizable {\n  color: ").concat(t.hyperlinkText,"\n}\n.is-personalizable .hyperlink:not(.today):hover,\n.hyperlink:not(.today).is-personalizable:hover {\n  color: ").concat(t.hyperlinkTextHover,";\n}\n.is-personalizable .hyperlink:not(.today):focus:not(.hide-focus),\n.hyperlink:not(.today).is-personalizable:focus:not(.hide-focus) {\n  border-color: ").concat(t.hyperlinkText,";\n  box-shadow: 0 0 4px 3px rgba(").concat(n.r,", ").concat(n.g,", ").concat(n.b,", 0.3);\n}\n\n.is-personalizable button:not(.btn-monthyear-pane):not(.btn-editor) svg.ripple-effect,\nbutton:not(.btn-monthyear-pane):not(.btn-editor).is-personalizable svg.ripple-effect,\n.is-personalizable a svg.ripple-effect,\na.is-personalizable svg.ripple-effect {\n  background-color: ").concat(t.base," !important;\n}\n\n.is-personalizable .btn-primary svg.ripple-effect,\n.btn-primary.is-personalizable svg.ripple-effect,\n.is-personalizable .btn-secondary svg.ripple-effect,\n.btn-secondary.is-personalizable svg.ripple-effect {\n  background-color: ").concat(t.contrast," !important;\n  border-color: ").concat(t.contrast," !important;\n}\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ").concat(t.darkest," !important;\n  border-bottom: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible {\n  border-color: ").concat(t.base," !important;\n  box-shadow: 0 0 4px 3px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.accordion.panel .accordion-header.is-selected {\n  color: ").concat(t.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(t.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(t.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable h1 {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable button svg.ripple-effect {\n  background-color: ").concat(t.contrast," !important;\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable .header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable button:not(:disabled):hover,\n.header.is-personalizable button:not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class^='btn']:hover:not([disabled]) {\n  color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.lightest,";\n  border-color:").concat(t.lightest,";\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(t.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(t.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-new-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ').concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(t.contrast," !important;\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.dark,";\n  border-color: ").concat(t.dark,";\n  color: ").concat(t.contrast,";\n}\n\n.is-personalizable .breadcrumb .hyperlink,\n.breadcrumb.is-personalizable .hyperlink {\n  color: ").concat(t.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:hover,\n.breadcrumb.is-personalizable .hyperlink:hover {\n  color: ").concat(t.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:focus:not(.hide-focus),\n.breadcrumb.is-personalizable .hyperlink:focus:not(.hide-focus) {\n  box-shadow: none;\n}\n.is-personalizable .breadcrumb .hyperlink[disabled],\n.breadcrumb.is-personalizable .hyperlink[disabled],\n.is-personalizable .breadcrumb .hyperlink[disabled]:hover,\n.breadcrumb.is-personalizable .hyperlink[disabled]:hover {\n  color: ").concat(t.theme.disabledText,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) {\n  background-color: ").concat(t.base,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\n.scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(t.base,", ").concat(I.hexToRgba(t.base,0),");\n}\nhtml[dir='rtl'] .is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\nhtml[dir='rtl'] .scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(I.hexToRgba(t.base,0),", ").concat(t.base,");\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink {\n  color: ").concat(t.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink:hover  {\n  color: ").concat(t.contrast,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions.is-open .icon,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions.is-open .icon {\n  color: ").concat(t.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent, 0 0 0 1px ").concat(t.contrast,", 0 0 1px 2px ").concat(I.hexToRgba(t.contrast,.3)," !important;\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(t.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent !important;\n  color: ').concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(t.darker," !important;\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(t.base," , ").concat(I.hexToRgba(t.base,0),") !important;\n}\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::before,\nhtml[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to left, ").concat(I.hexToRgba(t.base,0),", ").concat(t.base,");\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(I.hexToRgba(t.base,0),", ").concat(t.base,") !important;\n}\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::after,\nhtml[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to left, ").concat(I.hexToRgba(t.base,0),", ").concat(t.base,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(t.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(t.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(t.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button .icon,\nhtml[class*="theme-new-"] .application-menu.is-personalizable button span,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink {\n  color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:not(:disabled):hover .icon,\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:not(:disabled):hover span,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:hover {\n  color: ').concat(t.contrast,';\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel {\n  background-color: ').concat(t.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .name-xl,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .name,\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion-heading {\n  color: ').concat(t.contrast,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ').concat(t.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(t.contrast,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ').concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .btn-icon:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.lighter,",\n    0 0 2px 1px ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover {\n  border-bottom-color: ").concat(t.dark," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected button .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected button .icon.plus-minus::after {\n  background-color: ").concat(t.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(t.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ').concat(t.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ').concat(t.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:focus:not(.hide-focus),\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ').concat(t.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-new-"] .application-menu .application-menu-header button:hover,\nhtml[class*="theme-new-"] .application-menu .application-menu-footer button:hover {\n  background-color: ').concat(t.base,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ').concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(t.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(t.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(t.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(t.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(t.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(t.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(t.lighter,";\n  border-left: ").concat(t.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button svg.ripple-effect {\n  background-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable {\n  background-color: ').concat(t.lighter,";\n  border-right: ").concat(t.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .application-menu-header {\n  background-color: ').concat(t.lighter,";\n  border-bottom-color: ").concat(t.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .application-menu-footer {\n  background-color: ').concat(t.lighter,";\n  border-top-color: ").concat(t.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(t.dark,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(t.dark," !important;\n  color: ").concat(t.subtext,' !important;\n}\n\nhtml[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(t.darker," !important;\n  border-color: ").concat(t.darker,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(t.dark,' !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(t.darkest," !important;\n  background-color: ").concat(t.darkest," !important;\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(t.base," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg {\n  color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(t.contrast," !important;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(t.contrast," !important;\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(t.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(t.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(t.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(t.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(t.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(t.text,";\n  fill: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n.header.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n/*\n.tooltip.is-personalizable {\n  background-color: ").concat(t.darkest,";\n  border-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(t.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(t.darkest,";\n}\n*/\n    ")}(t)},setFont:function(t){$("html").addClass("font-".concat(t))},setColors:function(t){return""===t?(this.setColorsToDefault(),this):t?(this.appendStyleSheet(this.getColorStyleSheet(t)),this.settings.colors=t,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||st.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-new-light"}),this):this},setColorsToDefault:function(){this.settings.colors="";var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),this.element.triggerHandler("colorschanged",{colors:st.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-new-light"})},getThemeFromStylesheet:function(){var t=$("#stylesheet, #sohoxi-stylesheet"),e="";if(t.length>0){var n=t.attr("href"),i=(e=n.substring(n.lastIndexOf("/")+1)).lastIndexOf("?");i>-1&&(e=e.slice(0,i)),e=e.replace(".min","").replace(".css","")}return e},setTheme:function(t){var e=$("html");if(t)if(t=t.replace("soho","classic").replace("uplift","new"),this.currentTheme=t,st.currentTheme.id!==t){["light","dark","high-contrast"].indexOf(t)>-1&&(t+="-theme"),e.removeClass(function(t,e){return e.split(" ").filter(function(t){return t.indexOf("theme")>-1}).join()}).addClass(t),this.blockUi();var n=this,i=$("#stylesheet, #sohoxi-stylesheet"),a=$('<link rel="stylesheet">'),s=i.attr("href");a.on("load",function(){i.remove(),n.unBlockUi(),n.triggerEvent(t)}).on("error",function(){n.unBlockUi()});var r=s?s.substring(0,s.lastIndexOf("/")):"",o=!!s&&s.indexOf(".min")>-1;a.attr({id:i.attr("id"),href:u.stripTags("".concat(r,"/").concat(t).concat(o?".min":"",".css"))}),i.removeAttr("id"),i.before(a),this.settings.theme=t,st.setTheme(t),this.setColors(this.settings.colors)}else e.hasClass(t)||e.addClass(t)},blockUi:function(){if(this.settings.blockUI){var t="#bdbdbd";switch(st){case"light":t="#f0f0f0";break;case"dark":t="#313236";break;case"high-contrast":t="#d8d8d8";break;default:t="#f0f0f0"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",t),$("body").append(this.pageOverlay)}},triggerEvent:function(t){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||st.themeColors().brand.primary.alt.value,theme:t||"theme-new-light"}),$("body").trigger("resize")},unBlockUi:function(){var t=this;t.settings.blockUI&&t.pageOverlay&&t.pageOverlay.fadeOut(300,function(){t.pageOverlay.remove(),t.pageOverlay=void 0})},updated:function(t){if(!t)return this;var e=C.extend({},this.settings);return this.settings=C.mergeSettings(this.element[0],t,this.settings),this.settingsDidChange(e,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(e,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(e,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(t,e){return this.settings[e]&&this.settings[e]!==t[e]},teardown:function(){return this.element.off("updated.".concat("personalize")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"personalize")}};var lt={theme:"theme-new-light"};"object"===a(window.SohoConfig)&&"object"===a(window.SohoConfig.personalize)&&(lt=window.SohoConfig.personalize);var ct=new ot(document.documentElement,lt);$.fn.personalize=function(t){return this.each(function(){var e=$.data(this,"personalize");e||(e=$.data(this,"personalize",ct)),e.updated(t)})},$.fn.disable=function(){return $.each(this.data(),function(t,e){e instanceof jQuery||e&&e.disable&&e.disable()}),this.prop("disabled",!0),this.attr("disabled",!0).closest(".field").addClass("is-disabled"),this},$.fn.enable=function(){return $.each(this.data(),function(t,e){e instanceof jQuery||e&&e.enable&&e.enable()}),this.prop({disabled:!1,readonly:!1}),this.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this},$.fn.readonly=function(){return $.each(this.data(),function(t,e){e instanceof jQuery||e&&e.readonly&&e.readonly()}),this.prop("readonly",!0),this},$.fn.revealText=function(t){if(!this)return this;var e=this;e.addClass("show"===(null==t||null==t?void 0:t.initialState)?"input-show-text":"input-hide-text");var n=$('<span class="input-hideshow-text">'.concat(Soho.Locale.translate("show"===(null==t||null==t?void 0:t.initialState)?"Hide":"Show"),"</span>"));e.after(n);var i=function(){if(e.hasClass("input-hide-text"))return e.removeClass("input-hide-text").addClass("input-show-text"),e.attr("type","text"),void n.text(Soho.Locale.translate("Hide"));e.removeClass("input-show-text").addClass("input-hide-text"),e.attr("type","text"),n.text(Soho.Locale.translate("Show"))};return n.on("click",function(){i()}),e.on("keypress",function(t){18===t.keyCode&&t.ctrlKey&&i()}),this},$(function(){var t,e;$(".label-text").closest("label, .label").each(function(){e=$("input, textarea, select",this),t=e.attr("class"),$(this).addClass(function(){return"inline".concat(t?" inline-".concat(-1===t.indexOf(" ")?t:t.substr(0,t.indexOf(" "))):"")})})}),$(function(){$("input:radio").on("click.radios",function(){this.focus()})}),$(function(){var t=function(t,e){for(var n=0,i=t.length;n<i;n++)$(t[n]).parent().addClass(e)};t($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),t($(".field > input:radio, .field > .inline-radio"),"field-radio")}),$(function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach(function(t){-1!==t.className.indexOf("accessible")&&(t.querySelector(".required-asterisk")||t.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))});var t=[].slice.call(document.body.querySelectorAll("[data-validate]"));t.forEach(function(t){var e=t.getAttribute("data-validate");e&&e.indexOf("required")>-1&&t.setAttribute("aria-required",!0)}),(t=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach(function(t){var e=t.getAttribute("id");if(e){var n=document.body.querySelector('label[for="'.concat(e,'"]'));n&&n.setAttribute("aria-hidden",!0)}})}),$(function(){var t=$('input[type="text"]');t.length&&t.each(function(){$(this).is(":disabled")&&$(this).closest(".field").addClass("is-disabled")})}),$.fn.highlight=function(t){return this.length&&t&&t.length?this.each(function(){!function t(e,n){var i,a,s,r,o=0;if(3===e.nodeType)i=e.data.toUpperCase().indexOf(n),(i-=e.data.substr(0,i).toUpperCase().length-e.data.substr(0,i).length)>=0&&((a=document.createElement("mark")).className="highlight",(s=e.splitText(i)).splitText(n.length),r=s.cloneNode(!0),a.appendChild(r),s.parentNode.replaceChild(a,s),o=1);else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=t(e.childNodes[l],n);return o}(this,t.toUpperCase())}):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each(function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var dt={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder",useItemDimensions:!1};function ut(t,e){this.settings=C.mergeSettings(t,e,dt),this.element=$(t),this.init()}ut.prototype={init:function(){this.isTouch=m.features.touch,this.isIe="ie"===m.browser.name,this.handleEvents()},getElementByTouchInList:function(t,e,n){for(var i=!1,a=$(t),s=0,r=a.length;s<r;s++){var o=$(a[s]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||n<=l.top||n>=l.top+o.outerHeight()||(i=o)}return i},dragTouchElement:function(t,e){var n=t.originalEvent.changedTouches;e&&e[0]&&n&&n[0]&&this.offset&&(e[0].style.top="".concat(n[0].pageY-this.offset.y,"px"),e[0].style.left="".concat(n[0].pageX-this.offset.x,"px"))},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,dt)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function(t){var e=this.settings,n=null;if(e.isVisualItems){var i=this.element.children().not('[data-arrange-exclude="true"]');e.itemsSelector&&(i=$(e.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),n=i.index(t)}return n},handleEvents:function(){var t,e,n=this,i=this.settings,a={},s=this.element.children().not('[data-arrange-exclude="true"]'),r=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));i.itemsSelector&&(s=$(i.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),r=$("<".concat(s.first()[0].tagName," />"))),i.placeholder&&(r=$(i.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=i.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=r,this.isTouch||this.placeholders.addClass("".concat(i.placeholderCssClass," draggable")),$(this.handle,s).addClass("draggable").on("mousedown.arrange touchstart.arrange",function(){e=!0}).on("mouseup.arrange touchend.arrange",function(){e=!1}),this.connectWith&&(s=s.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=s,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,r]).not("a[href], img").on("selectstart.arrange",function(){return this.dragDrop&&this.dragDrop(),this.isIe}),this.items.add(r).each(function(){$(this).on(n.dragStart,function(s){if(n.handle&&!e){if(n.isTouch)return;return!1}e=!1,n.dragging=$(this),t=n.dragging.addClass("arrange-dragging").index();var o=i.isVisualItems?n.getVisualIndex(n.dragging):t;$.extend(a,{start:n.dragging,startIndex:o});var l=n.element.triggerHandler("beforearrange",a);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())n.dragging=null;else{var d,u=n.dragging[0].getBoundingClientRect();if(i.useItemDimensions&&(r[0].style.width="".concat(u.width,"px"),r[0].style.height="".concat(u.height,"px"),(d=r[0].classList).add.apply(d,c(i.placeholderCssClass.split(" ")))),n.isTouch){var h=s.originalEvent.changedTouches;h&&h[0]&&(n.offset={x:h[0].pageX-u.left,y:h[0].pageY-u.top})}else{var p=s.originalEvent.dataTransfer,f={x:s.originalEvent.clientX-u.left,y:s.originalEvent.clientY-u.top};p.effectAllowed="move",p.setData("Text","sample"),p.setDragImage(n.dragging[0],f.x,f.y)}}}).on(n.dragEnd,function(){if(n.dragging){if(n.isTouch){var e,s={opacity:1};i.useItemDimensions&&(s.position=""),n.dragging.css(s),null===(e=n.placeholderTouch)||void 0===e||null==e||e.remove()}if(n.element.removeClass("has-arrange-placeholder"),n.placeholders.filter(":visible").after(n.dragging),n.dragging.removeClass("arrange-dragging").show(),n.placeholders.detach(),t!==n.dragging.index()){var r=i.isVisualItems?n.getVisualIndex(n.dragging):n.dragging.index();$.extend(a,{end:n.dragging,endIndex:r}),n.element.triggerHandler("arrangeupdate",a)}n.dragging=null,n.placeholderTouch=null}}).on(n.dragWhileDragging,function(t){if(n.dragging){var e,o=this;if(t.preventDefault(),n.isTouch&&!n.placeholderTouch&&(n.placeholderTouch=n.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(n.dragging),n.dragTouchElement(t,n.placeholderTouch)),"drop"===t.type)return t.stopPropagation(),n.dragging.trigger("dragend.arrange"),!1;if(n.isTouch){var l=t.originalEvent.touches[0];o=n.getElementByTouchInList(s,l.pageX,l.pageY)||o}if(o=$(o),n.isTouch||(t.originalEvent.dataTransfer.dropEffect="move"),s.is(o)&&r.index()!==o.index()){if(n.isTouch){var c={opacity:0};i.useItemDimensions&&(c.position="fixed"),n.dragging.css(c)}else n.dragging.hide();var d;r.index()<o.index()?(r.insertAfter(o),e=o.index(),d=i.isVisualItems?n.getVisualIndex(o):e):(r.insertBefore(o),e=r.index(),d=i.isVisualItems?n.getVisualIndex(r):e),n.element.addClass("has-arrange-placeholder"),$.extend(a,{over:o,overIndex:d}),n.element.triggerHandler("draggingarrange",a),C.fixSVGIcons(o),n.placeholders.not(r).detach()}else n.placeholders.is(this)||(n.placeholders.detach(),n.element.append(r));if(!n.isTouch)return!1;n.dragTouchElement(t,n.placeholderTouch)}})})}},$.fn.arrange=function(t){return this.each(function(){var e=$.data(this,"arrange");e?e.updated(t):e=$.data(this,"arrange",new ut(this,t))})};var ht={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function pt(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,ht),this.init()}pt.prototype={init:function(){this.handleEvents()},finish:function(t,e){var n={top:e,left:t};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("dragend",n),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(t,e){var n={left:t,top:e};if("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:"parent"===this.settings.containment?this.container=this.element.parent():"window"===this.settings.containment?this.container=$(window):"container"===this.settings.containment?this.container=this.element.closest(".page-container"):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),n.top>this.upperYLimit&&(n.top=this.upperYLimit),n.left>this.upperXLimit&&(n.left=this.upperXLimit),n.top<0&&(n.top=0),n.left<0&&(n.left=0),"container"===this.settings.containment&&n.left<=1&&(n.left=1)),this.settings.obstacle){var i=this.clone?this.clone.offset():this.element.offset(),a=this.clone?this.clone.outerWidth():this.element.outerWidth(),s=n.left>i.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var r=$(this.obstacle).offset();this.constraints={top:r.top,left:r.left,bottom:r.top+this.obstacle.outerHeight(),right:r.left+this.obstacle.outerWidth()}}!s&&this.originalPos.left>this.constraints.left&&n.left<=this.constraints.right&&(n.left=this.constraints.right),s&&this.originalPos.left+a<=this.constraints.left&&n.left+a>=this.constraints.left&&(n.left=this.constraints.left-this.obstacle.outerWidth())}var o=function(t,e,n){void 0!==e[n]&&(t[0].style[n]="".concat(e[n],"px"))};o(this.clone||this.element,n,"top"),o(this.clone||this.element,n,"left"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("drag",n)},getElementsFromPoint:function(t,e){var n=[];if(document.elementsFromPoint)n=document.elementsFromPoint(t,e);else if(document.msElementsFromPoint)n=document.msElementsFromPoint(t,e);else{for(var i,a,s,r,o=999,l=[];(r=document.elementFromPoint(t,e))&&-1===n.indexOf(r)&&null!==r&&o>-1;)o--,n.push(r),l.push({value:r.style.getPropertyValue("pointer-events")||"",priority:r.style.getPropertyPriority("pointer-events")}),r.style.setProperty("pointer-events","none","important");for(i=0,a=n.length;i<a;i++)s=l[i],n[i].style.setProperty("pointer-events",s.value,s.priority)}return n},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},destroy:function(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var t=this;t.offset=null,t.element.attr("draggable",!m.features.touch),"onpointerdown"in window||"onmspointerdown"in window||t.element.on("touchstart.draggable gesturestart.draggable",function(e){var n=$(this).position(),i=e.originalEvent;t.offset={x:i.changedTouches[0].pageX-n.left,y:i.changedTouches[0].pageY-n.top},t.originalPos=n,t.element.addClass("is-dragging"),n.offset=t.offset,n.clone=t.clone,t.element.trigger("dragstart",n)}).on("touchmove.draggable gesturechange.draggable",function(e){e.preventDefault();var n=e.originalEvent;if(!(n.targetTouches.length>1)){var i=n.changedTouches[0].pageX-t.offset.x,a=n.changedTouches[0].pageY-t.offset.y;t.move(i,a)}}).on("touchend.draggable gestureend.draggable touchcancel.draggable",function(e){e.preventDefault();var n=e.originalEvent.changedTouches[0];t.finish(n.pageX-t.offset.x,n.pageY-t.offset.y)}),t.element.on("mousedown.draggable",function(e){e.preventDefault();var n=t.settings.clonePosIsFixed?t.element[0].getBoundingClientRect():t.element.position();t.offset={x:e.pageX-n.left,y:e.pageY-n.top},t.originalPos=n,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",function(e){e.preventDefault(),t.move(e.pageX-t.offset.x,e.pageY-t.offset.y)}),$(document).on("mouseup.draggable",function(n){n.preventDefault(),t.finish(e.pageX-t.offset.x,n.pageY-t.offset.y)}),t.element.on("mouseup.draggable",function(e){e.preventDefault(),t.finish(e.pageX-t.offset.x,e.pageY-t.offset.y)}),!t.clone&&t.settings.clone&&(t.clone=t.element.clone(!0),"parent"===t.settings.cloneAppendTo&&(t.settings.cloneAppendTo=t.element.parent()),t.clone.addClass(t.settings.cloneCssClass).appendTo(t.settings.cloneAppendTo||"body")),t.element.addClass("is-dragging"),t.element.trigger("dragstart",[n,t.clone])})}},$.fn.drag=function(t){return this.each(function(){var e=$.data(this,"drag");e?e.updated(t):e=$.data(this,"drag",new pt(this,t))})};var ft={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},gt=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],mt=["top","left","right","bottom","center"],vt=["left","center","right"],bt=["top","center","bottom"],yt=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function wt(t){var e=this;return yt.forEach(function(n){if(null!==t[n])return"x"===n||"y"===n?(e.setCoordinate(n,t[n]),void(e["original".concat(n)]=t[n])):void(e[n]=t[n])}),this.modified=!1,this.sanitize()}function xt(t,e){this.settings=C.mergeSettings(t,e,ft),this.element=$(t),this.init()}wt.prototype={isReasonableDefault:function(t,e){return $.inArray(t,e)>-1},sanitize:function(){var t=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:ft.callback,this.container=this.container instanceof $&&this.container.length?this.container:ft.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:ft.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,vt)?this.parentXAlignment:ft.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,bt)?this.parentYAlignment:ft.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,mt)?this.placement:ft.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach(function(e,n){t.strategies[n]=t.isReasonableDefault(e,gt)?e:t.strategies[n]})},setCoordinate:function(t,e){this.isReasonableDefault(t,["x","y"])&&(isNaN(e)&&(e=0),this[t]=Math.round(e))}},xt.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var t=this.element[0].style.height,e=this.element[0].style.width;return t&&(this.originalStyles.height=t),e&&(this.originalStyles.width=e),this},handleEvents:function(){var t=this;return this.element.on("place.".concat("place"),function(e,n,i){t.place(new wt({x:n,y:i}))}).on("updated.".concat("place"),function(){t.updated()}),this},render:function(t){var e=/(px|%)/i;this.element.offset({left:t.x,top:t.y}),t.height&&(this.element[0].style.height=t.height+(e.test("".concat(t.height))?"":"px")),t.width&&(this.element[0].style.width=t.width+(e.test("".concat(t.width))?"":"px"))},place:function(t){var e=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[e])?(t instanceof wt||(t=new wt(t)),null==t.x&&null==t.y?e:(this.clearOldStyles(),t.parent?this.placeWithParent(t):this.placeWithCoords(t))):e},placeWithParent:function(t){if(!t.parent||!t.parent.length)return[void 0,void 0];var e,n=this,i=this.getContainer(t),a=i.length&&i[0]===document.body;m.rtl&&i.length&&(e=h.getDimensions(i[0]),this.element.css({left:"".concat(e.left,"px"),top:"".concat(e.right,"px")}));var s=h.getDimensions(t.parent[0]),r=h.getDimensions(this.element[0]),o=a?$(window).scrollLeft():i.scrollLeft(),l=a?$(window).scrollTop():i.scrollTop();function c(t){var e=function(t){var e,n,i=t.placement,c=t.parentXAlignment,d=t.parentYAlignment;switch(i){case"top":n=s.top-r.height-t.y+(a?l:0);break;case"left":e=s.left-r.width-t.x+(a?o:0);break;case"right":e=s.right+t.x+(a?o:0);break;default:n=s.bottom+t.y+(a?l:0)}if("top"===i||"bottom"===i){var u=Math.round(a?document.body.offsetWidth:null);switch(c){case"left":e=a&&u<Math.round(r.left)+Math.round(r.width)?s.left+t.x+o:s.left-t.x+(a?o:0);break;case"right":e=a&&Math.round(r.right)-Math.round(r.width)<0?s.left-t.x+o:s.right-r.width+t.x+(a?o:0);break;default:e=s.left+(s.width-r.width)/2+t.x+(a?o:0)}}if("right"===i||"left"===i)switch(d){case"top":n=s.top-t.y+(a?l:0);break;case"bottom":n=s.bottom-r.height+t.y+(a?l:0);break;default:n=s.top+(s.height-r.height)/2+t.y+(a?l:0)}return[e,n]}(t);return t.setCoordinate("x",e[0]),t.setCoordinate("y",e[1]),n.render(t),n.handlePlacementCallback(t)}return t.useParentWidth&&(t.width=s.width),t.useParentHeight&&(t.height=s.height),(t=c(t)).strategies.forEach(function(e){(t=n.checkBleeds(t)).bleeds&&(t=function(){switch(e){case"nudge":return n.nudge(t);case"clockwise":return n.clockwise(t);case"flip":return(t=n.flip(t)).setCoordinate("x",t.originalx),t.setCoordinate("y",t.originaly),t=c(t);case"shrink":return n.shrink(t);case"shrink-x":return n.shrink(t,"x");case"shrink-y":return n.shrink(t,"y");default:return t}}(),n.render(t))}),t.element=this.element,this.element.trigger("afterplace",[t]),t},placeWithCoords:function(t){return this.render(t),t=this.handlePlacementCallback(t),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.nudge(t)),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.shrink(t)),this.render(t),this.element.trigger("afterplace",[t]),t},handlePlacementCallback:function(t){var e=t.callback||this.settings.callback;return t.element=this.element,e&&"function"==typeof e&&(t=e(t)),this.render(t),t},accountForScrolling:function(t){var e=t.container,n=window.getComputedStyle(this.element[0]).position;if("fixed"===n)return!1;if(e&&e.length||(e=this.element.parents().filter(function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===n})),!e||!e.length)return!0;if(e[0]===document.body)return!1;var i=window.getComputedStyle(e[0]);return"fixed"!==(n=i.position)&&("absolute"!==n||"hidden"!==i.overflow)},getContainer:function(t){if(t.container instanceof $&&t.container.length)return t.container;var e=this.element.parents(".modal");return e.length?e:$(document.body)},checkBleeds:function(t){var e,n=this.settings.bleedFromContainer,i=this.getContainer(t),a=i.length&&i[0]===document.body,s=this.element[0].getBoundingClientRect(),r={},o=i?i[0].getBoundingClientRect():{},l=a?$(window).scrollLeft():i.scrollLeft(),c=a?$(window).scrollTop():i.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),u=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function h(t){switch(t){case"top":return(n?0:o.top)-(a?-1*c:0);case"left":return(n?0:o.left)-(a?-1*l:0);case"right":return(n?u:o.right)-(a?-1*l:0);default:return(n?d:o.bottom)-(a?-1*c:0)}}r.width=s.width,r.height=s.height,r.top=s.top,r.right=s.right,r.bottom=s.bottom,r.left=s.left;var p=h("right");if(r.width>=p){e=r.width-p+20;var f=r.width-e;t.width=f,this.element[0].style.width="".concat(f,"px"),r.width=f}var g=h("bottom");if(r.height>=g){e=r.height-g+20;var m=r.height-e;t.height=m,this.element[0].style.height="".concat(m,"px"),r.height=m}var v=r.right>h("right"),b=r.left<h("left"),y=r.top<h("top"),w=r.bottom>h("bottom");return v||b||y||w?(t.bleeds={},t.bleeds.right=v?r.right-h("right"):null,t.bleeds.left=b?-(r.left-h("left")):null,t.bleeds.top=y?-(r.top-h("top")):null,t.bleeds.bottom=w?r.bottom-h("bottom"):null,t):(t.bleeds=void 0,t)},nudge:function(t){t.nudges||(t.nudges={x:0,y:0});var e=0;return t.bleeds.right&&(e=Math.abs(t.bleeds.right)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x-e),t.nudges.x-=e),t.bleeds.left&&(e=Math.abs(t.bleeds.left)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x+e),t.nudges.x+=e),t.bleeds.top&&(e=Math.abs(t.bleeds.top)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y+e),t.nudges.y+=e),t.bleeds.bottom&&(e=Math.abs(t.bleeds.bottom)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y-e),t.nudges.y-=e),t.wasNudged=!0,t.bleeds=void 0,t},flip:function(t){if(!t.bleeds[t.placement])return t;if(t.attemptedFlips||(t.attemptedFlips=[]),t.attemptedFlips.push(t.placement),t.attemptedFlips.length>3)return t=this.giveup(t);var e=this.accountForScrolling(t),n=["left","right"].indexOf(t.placement)>-1,i=this.settings.bleedFromContainer,a=this.getContainer(t),s=a.length&&a[0]===document.body,r=a?a[0].getBoundingClientRect():{},o=t.parent[0].getBoundingClientRect(),l=s?$(window).scrollLeft():a.scrollLeft(),c=s?$(window).scrollTop():a.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),u=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function h(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function p(n){var a=0;switch(n){case"left":a=(i?0:r.left)-(e?l:0)-o.left+t.containerOffsetX;break;case"right":a=(i?u:r.right)-(e?l:0)-o.right-t.containerOffsetX;break;case"top":a=(i?0:r.top)-(e?c:0)-o.top+t.containerOffsetY;break;default:a=(i?d:r.bottom)-(e?c:0)-o.bottom-t.containerOffsetY}return Math.abs(a)}function f(e){return $.inArray(e,t.attemptedFlips)>-1}return t.placement=function(e){var i=h(e),a=n?"top":"left",s=h(a),r=p(e),o=p(i);if(!f(i))return r>=o?e:(t.wasFlipped=!0,i);var l=t.originalx;t.originalx=t.originaly,t.originaly=l;var c=p(a),d=p(s);if(!f(a)){if(c>=d)return a;if(!f(s))return s}return e}(t.placement),t},clockwise:function(t){return t},shrink:function(t,e){var n=0,i=0,a=null==e||"x"===e,s=null==e||"y"===e,r=this.accountForScrolling(t),o=h.getDimensions(this.element[0]),l=this.settings.bleedFromContainer,c=this.getContainer(t),d=c?c[0].getBoundingClientRect():{},u=c.length&&c[0]===document.body,p=null===t.parent,f=u?$(window).scrollLeft():c.scrollLeft(),g=u?$(window).scrollTop():c.scrollTop(),m=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=(r?f:0)+(l?0:d.left)+t.containerOffsetX,y=(r?g:0)+(l?0:d.top)+t.containerOffsetY,w=(r?f:0)+(l?v:d.right)-t.containerOffsetX,x=(r?g:0)+(l?m:d.bottom)-t.containerOffsetY,C=w-b,k=x-y;if(!p){var T=h.getDimensions(t.parent[0]),A=T.top-y,S=x-T.bottom,E=T.left-b,D=w-T.right;C=E>D?E:D,k=A>S?A:S}return a&&(o.width>C&&(t.width=C),o.left<b&&(n=b-o.left,t.setCoordinate("x",t.x+n))),s&&(o.height>k&&(t.height=k),o.top<y&&(i=y-o.top,t.setCoordinate("y",t.y+i))),t},giveup:function(t){return t.giveup=!0,t.strategy=this.settings.strategy,t.placement=this.settings.placement,t},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var t=this.originalStyles;return t&&(t.width&&(this.element[0].style.width=t.width),t.height&&(this.element[0].style.height=t.height)),this},setArrowPosition:function(t,e,n){var i=e.parent,a=n.find("div.arrow"),s=e.placement,r={},o=n[0].getBoundingClientRect(),l={},c={},d=!1;if(i&&i.length&&a.length){a[0].removeAttribute("style"),n.removeClass("top right bottom left").addClass(s),i.is(".colorpicker, .datepicker, .timepicker")&&(i=i.next(".trigger")),i.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(i=i.find(".icon").last()),i.is(".searchfield-category-button")&&(i=i.find(".icon.icon-dropdown")),i.is(".colorpicker-editor-button")&&(i=i.find(".trigger .icon")),i.is(".fontpicker")&&(i=i.find(".icon.icon-dropdown")),i.length||(i=e.parent),r=i.length?i[0].getBoundingClientRect():r,l=a.length?a[0].getBoundingClientRect():l,c={};var u,h,p={};p[(h=s,"right"===h||"left"===h?"margin-top":"margin-left")]=(u=0,"left"!==s&&"right"!==s||(u=r.top+r.height/2-(l.top+l.height/2),c.top=l.top+u,c.bottom=l.bottom+u,(c.top<=o.top||c.bottom>=o.bottom)&&(d=!0)),"top"!==s&&"bottom"!==s||(u=r.left+r.width/2-(l.left+l.width/2),c.left=l.left+u,c.right=l.right+u,(c.left<=o.left||c.right>=o.right)&&(d=!0)),u),d&&(p.display="none"),a.css(p)}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(t){return this.each(function(){var e=$.data(this,"place");e?e.updated(t):e=$.data(this,"place",new xt(this,t))})};var Ct={use:"user-profile",focusable:!1};function kt(t,e){this.settings=C.mergeSettings(t,e,Ct),this.element=$(t),this.init()}kt.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var t=this.element[0].getElementsByTagName("use")[0];return t?(t.getAttribute("href")!==this.getBasedUseTag()&&t.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return H.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var t=this.element.children("use");if(!t.length)return this;var e=t.attr("href");!e&&t.attr("xlink:href")&&(e=t.attr("xlink:href"));var n=H.url;return e&&H.element.length&&n.length&&(e=e.replace(n,"")),e=e.replace("#icon-",""),this.settings.use=e,this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("icon"),function(){t.updated()}),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("icon")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(t){return this.each(function(){var e=$.data(this,"icon");e?e.updated(t):e=$.data(this,"icon",new kt(this,t))})},function(){function t(t){var e={icon:"user-profile",classes:["icon"]};return"string"==typeof(t=t||$.extend({},e))&&(t=$.extend({},e,{icon:t.replace("icon-","")})),!t.classes&&t.class&&(t.classes=t.class,delete t.class),t.classes||(t.classes=[].concat(e.classes)),"string"==typeof t.classes&&(t.classes=t.classes.split(" ")),-1===t.classes.indexOf("icon")&&t.classes.push("icon"),t.icon||(t.icon=""),t}$.createIcon=function(e){return e=t(e),['<svg class="'.concat(e.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(e.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(e){return e=t(e),$.getBaseURL("#icon-".concat(e.icon.replace("icon-","")))},$.fn.changeIcon=function(t){t&&$(this).find("use").attr("href",$.createIconPath({icon:t}))},$.fn.getIconName=function(){var t=$(this),e=t.find("use");return 1===e.length&&e.attr("href")?e.attr("href").substr(e.attr("href").indexOf("#icon-")+6):1===e.length&&e.attr("xlink:href")?e.attr("xlink:href").substr(e.attr("xlink:href").indexOf("#icon-")+6):t.attr("data-icon")}}();var Tt={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",showOnKeyboardFocus:!0,title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null,delay:500,onHidden:null,attachToBody:!0,attributes:null};function At(t,e){this.settings=C.mergeSettings(t,e,Tt),this.element=$(t),this.componentName,this.init(),this.componentName}At.prototype={get componentName(){return this._componentName||(this._componentName=this.isPopover?"popover":"tooltip"),this._componentName},get isPopover(){return null!==this.settings.content&&"object"===a(this.settings.content)||!0===this.settings.popover},get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!h.hasClass(this.element[0],"hidden")&&!h.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var t=document.activeElement;return!!this.activeElement.is($(t))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(t))},init:function(){this.uniqueId=C.uniqueId(this.element,this.componentName),this.isTouch=m.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var t=this.element.attr("title");(!this.settings.popover&&t&&t.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:t,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes,"trigger"),this.isRTL=R.isRTL(),h.addClass(this.element[0],"has-tooltip")},addAria:function(){if(this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.attr("aria-describedby",this.description.attr("id")),this.isPopover)){var t=this.element.prev("input.timepicker").length;if(t||"click"!==this.settings.trigger||this.element.attr("aria-haspopup",!0),t){var e=this.tooltip.attr("id"),n=this.element.prev("input.timepicker");n.attr("role","combobox"),n.attr("aria-haspopup","dialog"),n.attr("aria-owns",e),this.element.attr("role","button"),this.element.attr("aria-controls",e),this.tooltip.attr("role","dialog"),this.tooltip.attr("aria-label",R.translate("TimepickerPopup"))}}},addClassToLinks:function(t,e){if(t instanceof $&&t.length>0)return t;var n=$("<div/>").html(t);return $("a",n).addClass(e),n.html()},appendTooltip:function(){var t=this.settings.tooltipElement,e=this.isPopover?"popover":"tooltip";if(this.tooltip=t?$(t):$("#".concat(this.componentName)),!this.tooltip.length){var n=t?t.substring(1,t.length):this.componentName;this.tooltip=$('<div class="'.concat(e,' bottom is-hidden" id="').concat(n,'">\n        <div class="arrow"></div>\n        <div class="tooltip-content"></div>\n      </div>'))}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],this.componentName,this),this.setTargetContainer(),this.addAria()},handleEvents:function(){var t=this,e=t.settings.delay/10;function n(){t.timer&&t.timer.destroy&&t.timer.destroy(!0)}function i(){n(),t.timer=new W({duration:e,timeoutCallback:function(){t.show()}}),G.register(t.timer)}function a(){n(),t.show()}function s(){n(),t.hide()}function r(){t.visible?s():a()}"hover"!==this.settings.trigger||this.settings.isError||((this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),function(){t.isTouch||i()}).on("mouseleave.".concat("tooltip"),function(){t.visible?s():n()}).on("click.".concat("tooltip"),function(){t.isTouch||s()}).on("longpress.".concat("tooltip"),function(){a()}).on("updated.".concat("tooltip"),function(){t.updated()}),this.settings.showOnKeyboardFocus&&(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("focus.".concat("tooltip"),function(){t.isTouch&&!K.pressedKeys.get("Tab")||i()}).on("blur.".concat("tooltip"),function(){t.settings.keepOpen||s()})),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),function(){r()}),"immediate"===this.settings.trigger&&setTimeout(function(){r()},1),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),function(){a()}).on("blur.".concat("tooltip"),function(){t.settings.keepOpen||s()}),$(window).on("orientationchange.".concat("tooltip"),function(){t.visible&&s()},!1)},setContent:function(t,e){var n=this,i=this.settings.content,a=null==t;function s(){!0!==e&&(n.addAria(),n.render())}if(a&&null==i)return!1;if("function"==typeof i&&(t=i),a&&(t=i),t===this.content)return s(),!0;if(t instanceof $&&t.length)return this.content=t.addClass("hidden"),s(),!0;if("string"==typeof t){if(!t.length)return!1;if(0===(t=R.translate(t,{showAsUndefined:!0})||t).indexOf("#")){var r=$("".concat(t));return r.length?(this.content=r,s(),!0):(this.content=t,s(),!0)}}else{if("function"!=typeof t)return!1;var o=t.call(this.element);if(!o||"string"!=typeof o||!o.length)return!1;t=o}return this.content=u.sanitizeHTML(t),this.content="<p>".concat(this.content,"</p>"),s(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var t=this.tooltip[0].querySelectorAll(".tooltip-title")[0],e=this.tooltip[0].querySelectorAll(".tooltip-content")[0],n=this.settings.extraClass,i=this.content,a=this.tooltip[0],s="tooltip is-hidden";n&&(s+=" ".concat(n)),a.setAttribute("class",s),Array.isArray(this.settings.attributes)&&C.addAttributes(this.tooltip,this,this.settings.attributes),t&&(t.style.display="none"),e&&e.previousElementSibling&&!e.previousElementSibling.classList.contains("arrow")&&e.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>');var r="string"==typeof this.content?i:i[0].innerHTML;h.html(e,r,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var t=this,e=this.settings.extraClass,n=this.tooltip.find(".tooltip-content"),i=this.tooltip[0].querySelector(".tooltip-title"),a=this.content,s="popover is-hidden";e&&(s+=" ".concat(e)),this.tooltip[0].setAttribute("class",s),Array.isArray(this.settings.attributes)&&C.addAttributes(this.tooltip,this,this.settings.attributes);var r="ie"===m.browser.name&&m.browser.isIE11()&&a instanceof $&&a.length&&"hover"===this.settings.trigger;if("string"==typeof a)a=$(a),n.html(a),n.find(".hidden").removeClass("hidden");else if(r){var o=a[0].cloneNode(!0),l=o.id;l&&(o.id="".concat(l,"-").concat(this.uniqueId)),n.html(o.outerHTML)}else n.html(a);var c=n.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),r||a[0].classList.remove("hidden"),n[0].firstElementChild.classList.remove("hidden");var d=this.settings.placementOpts.parent.width();if(R.isRTL()?this.settings.placementOpts.parentXAlignment=d>c?"left":"right":this.settings.placementOpts.parentXAlignment=d>c?"right":"left",null!==this.settings.title)if(i)i.style.display="",i.childNodes[0].nodeValue=this.settings.title;else{var u=document.createDocumentFragment();i=document.createElement("div"),h.html(i,this.settings.title,"*"),i.classList.add("tooltip-title"),this.settings.headerClass&&h.addClass(i,this.settings.headerClass,"filled"),u.appendChild(i),this.tooltip[0].insertBefore(u,this.tooltip[0].firstChild)}else i&&(i.style.display="none");if(this.settings.closebutton&&i&&!i.firstElementChild){var p=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",function(){t.hide(!0)});i.appendChild(p[0]),Array.isArray(this.settings.attributes)&&C.addAttributes(p,this,this.settings.attributes,"btn-close",!0)}this.settings.initializeContent&&a.initialize()},open:function(){return this.show()},show:function(t,e){var n=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.settings.beforeShow&&!e){var i=function(t){("boolean"!=typeof t||t)&&(n.content=t,n.show({content:t},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](i,this.element):void this.settings.beforeShow(i,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),h.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),C.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var a=this.isTouch?"touchend":"mouseup";if(this.settings.popover)C.addAttributes(this.tooltip.find(".tooltip-title"),this,this.settings.attributes,"title",!0),C.addAttributes(this.tooltip.find(".btn-close"),this,this.settings.attributes,"btn-close",!0),this.element.attr("aria-expanded","true");else{var s=this.element.closest(".is-personalizable").length>0;this.tooltip[0].classList[s?"add":"remove"]("is-personalizable")}setTimeout(function(){$(document).on("".concat(a,".").concat("tooltip","-").concat(n.uniqueId),function(t){var e=$(t.target);n.settings.isError||"focus"===n.settings.trigger||e.is(n.element)&&e.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||1===$("#editor-popup").length&&1===e.closest(".popupmenu").length||(0===e.closest(".popover").length&&0===e.closest(".dropdown-list").length&&n.hide(),1===e.closest(".popover").length&&e.closest(".popover").not(".monthview-popup").length&&n.element.prev().is(".datepicker")&&n.hide())}).on("keydown.".concat("tooltip","-").concat(n.uniqueId),function(t){(27===t.which||n.settings.isError)&&n.hide()}),n.settings.isError&&!n.element.is(":visible, .dropdown")&&n.element.is("[aria-describedby]")&&n.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),function(){n.hide()}),$("body").on("scroll.".concat("tooltip"),function(){n.hide()}),n.element.closest(".modal-body-wrapper").on("scroll.tooltip",function(){n.hide()}),n.element.closest(".scrollable").on("scroll.tooltip",function(){n.hide()}),n.element.closest(".datagrid-wrapper").on("scroll.tooltip",function(){n.hide()}),n.settings.isError&&n.tooltip.on("click.".concat("tooltip"),function(){n.hide()}),n.element.trigger("aftershow",[n.tooltip])},n.settings.delay)}}},setTargetContainer:function(){var t=$("body");this.isPopover&&(t=$('[role="main"]')),t.length||(t=$("body"));var e=!1;this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(t=this.scrollparent);var n=this.element.closest(".modal");this.settings.attachToBody||(e=!0,t=n),this.settings.parentElement&&(t=this.settings.parentElement),e?this.tooltip.insertAfter(this.element):t[0].appendChild(this.tooltip[0])},handleAfterPlace:function(t,e){var n=this;this.tooltip.data("place").setArrowPosition(t,e,this.tooltip),setTimeout(function(){n.tooltip.triggerHandler("tooltipafterplace",[e])})},position:function(){this.setTargetContainer(),this.tooltip[0].classList.remove("is-hidden");var t=this,e=this.isPopover?20:10,n=this.settings.placementOpts||{},i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),s=this.tooltip[0].getBoundingClientRect(),r=$.extend({},{x:0,y:e,container:this.scrollparent,containerOffsetX:n.containerOffsetX||this.settings.offset.left,containerOffsetY:n.containerOffsetY||this.settings.offset.top,parent:n.parent||this.activeElement,placement:n.placement||this.settings.placement,strategies:["flip","nudge"]},n);return"left"!==r.placement&&"right"!==r.placement||(r.x=e,r.y=0),s.width>=i&&/left|right/g.test(r.placement)||s.height>=a&&/top|bottom/g.test(r.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",function(e,n){t.handleAfterPlace(e,n)}),this.tooltip.data("place")||this.tooltip.place(r),this.tooltip.data("place").place(r),this},close:function(){return this.hide()},hide:function(t){if((!this.settings.keepOpen||t)&&this.visible)if(this.isInPopup)this.settings.content.addClass("hidden");else{if(h.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.removeAttr("aria-owns"),this.isPopover){var e=this.element.prev("input");e.length&&e.attr("aria-expanded","false").removeAttr("aria-describedby").removeAttr("aria-haspopup").removeAttr("aria-owns")}this.element.triggerHandler("hide",[this.tooltip]),this.settings.onHidden&&this.settings.onHidden({api:this,elem:this.tooltip})}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings));var e=this;return"immediate"===e.settings.trigger?setTimeout(function(){e.show()},100):e.setContent(),this},detachOpenEvents:function(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(self.uniqueId),"mouseup.".concat("tooltip","-").concat(self.uniqueId),"touchend.".concat("tooltip","-").concat(self.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function(){return this.timer&&this.timer.destroy&&this.timer.destroy(!0),this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data(this.componentName)&&($.removeData(this.tooltip[0],this.componentName),delete this._componentName)),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),h.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],this.componentName),delete this._componentName}},$.fn.tooltip=function(t){return this.each(function(){var e=$.data(this,"tooltip");e?e.updated(t):e=$.data(this,"tooltip",new At(this,t))})};var St=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],Et=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],$t=["icon-favorite","btn-toggle"],Dt={style:St[0],type:Et[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,validate:!1,attributes:null};function It(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,Dt),this.init()}It.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element.parent().is(".spinbox-wrapper")?this.isDisabled(this.element.parent().find("input")):this.isDisabled(this.element)},set disabled(t){var e=!0===t;this.element[0].disabled=e},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},animateWithJS:function(t){var e=t[0].style,n="".concat(parseFloat(e.left)-100,"px"),i="".concat(parseFloat(e.top)-100,"px");t[0].style.opacity="0.4",t.animate({opacity:0,left:n,top:i,width:200,height:200},1e3)},createRipple:function(t){if(!(this.disabled||t&&(void 0!==t.which&&1!==t.which||-1===["click","touchstart"].indexOf(t.type)))){$("svg.ripple-effect",this.element).remove();var e,n,i=this.element.offset();t&&(t.originalEvent instanceof MouseEvent?(e=t.pageX-i.left,n=t.pageY-i.top):(t=t.originalEvent)&&t.touches&&1===t.touches.length&&(e=t.touches[0].pageX-i.left,n=t.touches[0].pageY-i.top)),e||(e=this.element.outerWidth()/2),n||(n=this.element.outerHeight()/2);var a=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');a[0].style.left="".concat(e,"px"),a[0].style.top="".concat(n,"px"),this.element.prepend(a),!$.fn.cssPropSupport("animation")||m.browser.isSafari&&!m.features.touch||"firefox"===m.browser.name?(a.removeClass("is-animation"),this.animateWithJS(a)):$("svg.ripple-effect",this.element).addClass("is-animation"),setTimeout(function(){a.remove()},1e3)}},render:function(){var t=this;this.renderAttributes();var e=this.element[0].classList;St.indexOf(this.settings.style)>0&&e.add(this.settings.style),Et.indexOf(this.settings.type)>0&&e.add(this.settings.type);var n=this.buttonsetAPI,i=!1;if(n&&("modal"===n.settings.style&&(i=!0),["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn"),e[i?"add":"remove"]("btn-modal")),["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn-primary"),e[i?"add":"remove"]("btn-modal-primary")),["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(e[i?"remove":"add"]("btn-secondary"),e[i?"add":"remove"]("btn-modal-secondary"))),this.settings.isDefault&&(this.settings.style="btn-primary",e.remove("btn-primary"),e.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=u.stripHTML(this.settings.cssClass)),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled),this.settings.text){var a=this.element[0].querySelector("span"),s=a instanceof HTMLElement;s||(a=this.element);var r=this.settings.text||$(a).text().trim();r=u.stripHTML(r),s||(this.element[0].innerText="",a=document.createElement("span"),this.element.append($(a)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&a.classList.add("audible")),a.innerText=r}var o,l=this.icon;if(this.settings.icon?o=this.settings.icon:"btn-toggle"===this.settings.type?o=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?o=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(o="icon-more"),o&&(o=u.stripHTML(o),l instanceof SVGElement||l instanceof HTMLElement?l.querySelector("use").setAttribute("href","#".concat(o)):(l=$.createIconElement({icon:o.replace("icon-","")}),this.element.prepend($(l)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var c=this.element.children("svg.icon"),d=c.find("use"),h=!1;if(c.length>0&&d.length>=1){var p=d.last().attr("href");!p&&d.last().attr("xlink:href")&&(p=d.last().attr("xlink:href")),h=p.indexOf("#icon-dropdown")>-1}h||(c=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(c)),c.hasClass("icon-dropdown")||c.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",function(t,e){$(this).find("span").text(e.text())}),this.settings.hideMenuArrow&&c.remove()}if($t.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",function(){t.toggle()}),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){if(!this.element.attr("title")){var f=R.translate("More");return void this.element.attr("title",f).tooltip({content:f})}this.settings.title&&""!==this.element.attr("title")||this.tooltipAPI.destroy()}e[this.settings.ripple?"remove":"add"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",function(e){t.createRipple(e)}),this.element.data("hidefocus")||this.element.hideFocus()},renderAttributes:function(){Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes)},getSettingsFromElement:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={},a=this.element.parents(".buttonset, .modal-buttonset");a.length&&(t=a.data("buttonset"))&&(this.buttonsetAPI=t);var s=this.element[0].classList||"";if(St.forEach(function(t){"default"!==t&&s.contains(t)&&(i.style=t)}),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var r={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(r).forEach(function(t){s.contains(t)&&(i.style=r[t])})}Et.forEach(function(t){"default"!==t&&s.contains(t)&&(i.type=t)}),this.settings.disabled||(i.disabled=this.disabled);var o=this.element[0].getAttribute("aria-pressed");void 0!==o&&(i.pressed=!0===o,"icon-favorite"===i.type&&(i.toggleOnIcon="icon-star-filled",i.toggleOffIcon="icon-star-outlined"));var l=this.element[0].id;"string"==typeof l&&l.length&&(i.id=l);var c=this.element[0].title;"string"==typeof c&&c.length&&(i.title=c),s.contains("no-ripple")&&(i.ripple=!1);var d=this.element[0].querySelector("span.audible");return d&&(i.audible=!0),n||Object.keys(i).forEach(function(t){e.settings[t]=i[t]}),i},toData:function(t){var e=this,n={};return Object.keys(this.settings).forEach(function(t){n[t]=e.settings[t]}),n.pressed=this.pressed,t&&(n.element=this.element[0]),n},get pressed(){return-1!==$t.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(t){var e,n=!0===t,i=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,a=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",n),this.element[0].classList[n?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":e=n?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":i&&(e=n?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==a.length&&"string"==typeof e&&(a.changeIcon(e),C.fixSVGIcons(a))},toggle:function(){this.pressed=!this.pressed},isDisabled:function(t){return(t=t instanceof jQuery?t:$(t)).is("[disabled]")&&!t.is('[disabled="false"]')},teardown:function(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var t=this.tooltipAPI;this.element.hasClass("btn-actions")&&t&&t.destroy();var e=this.element.data("hidefocus");return e&&e.destroy(),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function(t){return this.each(function(){var e=$.data(this,"button");e?e.updated(t):e=$.data(this,"button",new It(this,t))})};var Mt={buttons:[],detectHTMLButtons:!1,style:"default"};function Lt(t,e){if(!(t instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=t,this.settings=C.mergeSettings(t,e,Mt),this.init()}Lt.prototype={set disabled(t){t=!0===t,this.element.classList[t?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach(function(e){e.disabled=t})},init:function(){this.build(),this.render()},build:function(t){var e=this;this.buttons&&t||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach(function(t){e.add(t)}):this.detectHTMLButtons()},render:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.element.classList,i={default:"buttonset",modal:"modal-buttonset"};Object.keys(i).forEach(function(e){var a=i[e];t.settings.style!==e&&n.remove(a)}),n.add(i[this.settings.style]),e||this.buttons.forEach(function(t){t.render()})},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||"object"!==a(t))throw new Error("Settings object is required to add a new button to the ButtonSet");var n=t.element,i=n instanceof HTMLElement;i||(n=document.createElement("button"));var s=u.stripHTML(t.id);"string"==typeof s&&s.length>0&&(n.id=s);var r=$(n);!e&&i||$(this.element).append(r),t.buttonsetAPI=this,r.button(t);var o=r.data("button");this.buttons.push(o)},remove:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===n||"function"!=typeof n.destroy){if(n instanceof HTMLElement?t=n:"string"==typeof n&&(t=$(this.element).find("#".concat(n.replace("#","")))),e=$(t),void 0===(n=$(t).data("button"))||"function"!=typeof n.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else e=n.element;n.destroy(),i&&e.remove(),this.buttons=this.buttons.filter(function(t){return t!==n})},removeAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach(function(n){t.remove(n,e)})},reset:function(){this.buttons=[]},at:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[t]},detectHTMLButtons:function(){var t=this;this.settings.detectHTMLButtons&&(this.reset(),(C.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach(function(e){var n=$(e).data("button");n||($(e).button(),n=$(e).data("button"));var i=n.getSettingsFromElement(!0);i.element=e,t.add(i)}))},toData:function(){var t=C.extend({},this.settings);return this.buttons.forEach(function(e){t.buttons.push(e.toData())}),t},teardown:function(t){return this.removeAll(t),this.reset(),this},updated:function(t){var e=this.settings.buttons;return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),Array.isArray(t.buttons)&&e!==t.buttons?(this.settings.buttons=t.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach(function(t){t.updated()})),this},destroy:function(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function(t){return this.each(function(){var e=$.data(this,"buttonset");e?e.updated(t):e=$.data(this,"buttonset",new Lt(this,t))})};var Pt={};function Nt(t,e){return this.init(t,e)}Nt.prototype={init:function(t,e){if(!this.element&&t instanceof HTMLElement&&(this.element=t),"object"===a(e)){var n=this.settings||Pt;this.settings=C.mergeSettings(this.element,e,n)}return this.element.classList.add("hyperlink"),this.focusBehavior||(this.focusBehavior=new v(this.element)),this},handleEvents:function(){return this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(t){return this.each(function(){var e=$.data(this,"hyperlink");e?e.updated(t):(e=$.data(this,"hyperlink",new Nt(this,t))).destroy=function(){this.teardown(),$.removeData(this,"hyperlink")}})};var Rt={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};Rt.LEGACY_DEFS={"#":Rt.DIGITS_REGEX,0:Rt.DIGITS_REGEX,x:Rt.ALPHAS_REGEX,"*":Rt.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},Rt.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:Rt.EMPTY_STRING,placeholderChar:Rt.PLACEHOLDER_CHAR,placeholder:Rt.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var Ot={prefix:Rt.EMPTY_STRING,suffix:Rt.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function Bt(t){return t.split(Rt.EMPTY_STRING).map(function(t){return Rt.DIGITS_REGEX.test(t)?Rt.DIGITS_REGEX:t})}function _t(t,e){var n={any:Rt.ANY_REGEX,digits:Rt.DIGITS_REGEX,alphas:Rt.ALPHAS_REGEX};n[e]||(e="any");for(var i=t.toString().length,a=[];i>0;)a.push(n[e]),i-=1;return a}Rt.numberMask=function(t,e){(e=C.mergeSettings(void 0,e,Ot)).locale&&e.locale.length||(e.locale=R.currentLocale.name),e.allowLeadingZeroes&&(B("allowLeadingZeros","allowLeadingZeroes","Number Mask"),e.allowLeadingZeros=e.allowLeadingZeroes,e.allowLeadingZeroes=void 0);var n=e.prefix,i=e.suffix,a=e.symbols.decimal,s=e.symbols.thousands,r=n&&n.length||0,o=i&&i.length||0,l=s&&s.length||0;function c(t){"string"!=typeof t&&(t=Rt.EMPTY_STRING);var c=t.length;if(t===Rt.EMPTY_STRING||t[0]===n[0]&&1===c)return n.split(Rt.EMPTY_STRING).concat([Rt.DIGITS_REGEX]).concat(i.split(Rt.EMPTY_STRING));if(t===a&&e.allowDecimal)return n.split(Rt.EMPTY_STRING).concat(["0",Rt.CARET_TRAP,a,Rt.CARET_TRAP,Rt.DIGITS_REGEX]).concat(i.split(Rt.EMPTY_STRING));var d,u,h,p=t.lastIndexOf(a),f=-1!==p,g=t[0]===e.symbols.negative&&e.allowNegative;if(t.slice(-1*o)===i&&(t=t.slice(0,-1*o)),f?(d=t.slice(t.slice(0,r)===n?r:0,p),u=Bt((u=t.slice(p+1,c)).replace(Rt.NON_DIGITS_REGEX,Rt.EMPTY_STRING))):d=t.slice(0,r)===n?t.slice(r):t,e.integerLimit&&"number"==typeof e.integerLimit){var m="."===s?"[.]":"".concat(s),v=(d.match(new RegExp(m,"g"))||[]).length;d=d.slice(0,e.integerLimit+(g?1:0)+v*l)}d=d.replace(Rt.NON_DIGITS_REGEX,Rt.EMPTY_STRING),e.allowLeadingZeros||(d=d.replace(/^0+(0$|[^0])/,"$1"));var b={maximumFractionDigits:e.decimalLimit,style:"decimal",useGrouping:!0};return h=Bt(d=e.allowThousandsSeparator?function(t,e,n,i){if(""===t||isNaN(t))return t;var a=R.toLocaleString(Number(t),n.locale,i,e);if(n&&n.allowLeadingZeros&&0===t.indexOf("0")){var s="".concat(t).match(/^0*/)[0].length;for(0===a.indexOf("0")&&(a=a.substring(1));s>0;)s-=1,a="0".concat(a)}return a}(d,s,e,b):d),(f&&e.allowDecimal||!0===e.requireDecimal)&&(t[p-1]!==a&&h.push(Rt.CARET_TRAP),h.push(a,Rt.CARET_TRAP),u&&("number"==typeof e.decimalLimit&&(u=u.slice(0,e.decimalLimit)),h=h.concat(u)),!0===e.requireDecimal&&t[p-1]===a&&h.push(Rt.DIGITS_REGEX)),r>0&&(h=n.split(Rt.EMPTY_STRING).concat(h)),g&&(h.length===r&&h.push(Rt.DIGITS_REGEX),h=[/-/].concat(h)),i.length>0&&(h=h.concat(i.split(Rt.EMPTY_STRING))),{mask:h}}return c.instanceOf="createNumberMask",c(t)},Rt.rangeNumberMask=function(t,e){(e=e||{}).delimeter=e.delimeter||"-";var n=R.currentLocale.data.numbers.minusSign,i=function(t){return new RegExp("".concat(t),"g")},a=function(t,e){return(t.match(e)||[]).length},s=t.split(")".concat(e.delimeter,"(")),r=function(t){var s=t.substr(-1),r=a(t,/[\u0028]/g),o=(a(t,/[\u0029]/g),[]);if(1===r){var l=e.allowNegative&&t.substr(1,1)===n;(o=Rt.numberMask(l?t.substr(1):t,e)).splice(0,0,/[\u0028]/g),")"===s?o.push(/[\u0029]/g):s===e.delimeter&&(o.push(/[\u0029]/g),o.push(i("[".concat(e.delimeter,"]"))))}return o};"number"==typeof e.integerLimit&&(e.integerLimit*=2,e.integerLimit+=e.delimeter.length+4);var o,l=[],d=[];if("("===t.substr(0,1)&&s.length)if(2===a(t,/[\u0028]/g)&&2===a(t,/[\u0029]/g)&&1===a(t,i("\\u0029".concat(e.delimeter,"\\u0028")))&&s[1].indexOf(")")!==s[1].length-1){var u=s[1].substr(0,s[1].indexOf(")")+1);l=r("".concat(s[0],")")),d=[i("[".concat(e.delimeter,"]"))].concat(c(r("(".concat(u))))}else(l=r(2===s.length?"".concat(s[0],")"):s[0])).length&&2===s.length&&(o="".concat(s[0],")"),/^\u0028.+\u0029$/g.test(o))&&(d=[i("[".concat(e.delimeter,"]"))].concat(c(r("(".concat(s[1])))));return{mask:[].concat(c(l),c(d))}},Rt.adjustRangeNumber=function(t,e,n){if("rangeNumber"===n.settings.process){var i,a,s,r,o,l,c,d=n&&null!==(i=n.settings)&&void 0!==i&&null!==(a=null==i?void 0:i.patternOptions)&&void 0!==a&&(null==a?void 0:a.delimeter)?n.settings.patternOptions.delimeter:"-",u=e&&(null===(s=e.previousMaskResult)||void 0===s||null==s?void 0:s.substr(-1))===d;e&&1===(null===(r=e.selection)||void 0===r||null==r?void 0:r.start)&&1===(null===(o=e.selection)||void 0===o||null==o?void 0:o.end)&&"("!==t?(t="(".concat(t),e.selection.start++,e.selection.end++):e&&1!==(null===(l=e.selection)||void 0===l||null==l?void 0:l.start)&&1!==(null===(c=e.selection)||void 0===c||null==c?void 0:c.end)&&")"===t.substr(-1)&&1===(t.match(/\u0028/g)||[]).length&&!u&&(t="".concat(t).concat(d,"("),e.selection.start+=2,e.selection.end+=2)}return{rawValue:t,opts:e}};var Ft={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},zt={dd:31,d:31,MMM:void 0,MM:12,M:12,y:9999,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function Ht(t){return this.configure(t),this}Rt.dateMask=function(t,e){e=C.mergeSettings(void 0,e,Ft);var n=[],i=Rt.DIGITS_REGEX,a=e.format,s=E.removeDuplicates(a.replace(/[dMyHhmsa]+/g,"")),r=function(t){var e=t.split("").map(function(t){return" "===t&&(t="\\s"),"-"===t&&(t="\\-"),t});return new RegExp("[(".concat(e.join("|"),")]+"))}(s),o=a.match(/(d{1,2}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|a{1}|z{1, 4}|E{1, 4})/g),l=t.split(r),c=zt;return o.forEach(function(t,e){var s,r=c[t];if("a"===t||"ah"===t){var d="AM",u="PM";if(R.calendar()){d=R.calendar().dayPeriods[0],u=R.calendar().dayPeriods[1];for(var h=[],p=0;p<d.length;p++)d[p]&&u[p]&&d[p].toLowerCase()===u[p].toLowerCase()?h.push(d[p].toLowerCase()):h.push(d[p].toLowerCase()+(u[p]?u[p].toLowerCase():""));for(var f=0;f<h.length;f++)n.push(new RegExp("[".concat(h[f],"]"),"i"))}else n.push(/[aApP]/,/[Mm]/);if("ah"===t){var g=l[e].replace(d,"").replace(u,"");n=n.concat(_t(g,"digits"))}}else if(r)if(l[e]){var m=l[e].toString(),v=parseInt(m.substr(0,1),10),b=parseInt(c[t].toString().substr(0,1),10);1===t.length&&v>b||"0"!==m&&1===m.length&&v<=b&&void 0!==l[e+1]&&"HH"!==t.toUpperCase()?n.push(i):n=n.concat(_t(r,"digits"))}else for(s=r.toString().length;s>0;)n.push(i),s-=1;else n=n.concat(_t(t,"alphas"));var y=o[e+1];if(void 0!==y){var w=t.toString().length,x=a.indexOf(t)+w,C=a.indexOf(y),k=a.substring(x,C).split(Rt.EMPTY_STRING),T=[Rt.CARET_TRAP].concat(k.concat(Rt.CARET_TRAP));n=n.concat(T)}}),{mask:n,literals:s.split(""),literalRegex:r}},Rt.rangeDateMask=function(t,e){var n=t.split(e.delimeter),i=e.delimeter.split(""),a=Rt.dateMask(n[0],e),s=[];return n[1]&&(s=Rt.dateMask(n[1],e)),{mask:a.mask.concat(i.concat(s.mask)),literals:i,literalRegex:s.literalRegex}},Rt.autocorrectedDatePipe=function(t,e){e.dateFormat||(e.dateFormat=R.calendar().dateFormat.short);var n=[],i=e.dateFormat.split(/[^dMy]+/),a={d:31,M:12,yy:99,yyyy:9999},s={d:1,M:1,yy:0,yyyy:1},r=t.conformedValue.split("");i.forEach(function(t){var i=e.dateFormat.indexOf(t),s=parseInt(a[t].toString().substr(0,1),10);parseInt(r[i],10)>s&&(r[i+1]=r[i],r[i]=0,n.push(i))});var o=new RegExp("[^".concat(t.placeholderChar,"]")),l=t.placeholder.split(o),c=t.conformedValue.split(/\D/g);return!i.some(function(t,e){var n=l[e].length>t.length?l[e].length:t.length,i=c[e]||"",r=parseInt(i,10);return r>a[t]||i.length===n&&r<s[t]})&&{value:r.join(""),characterIndexes:n}},Ht.prototype={configure:function(t){if(this.settings||(this.settings={}),!t)return this;if(t.locale&&(this.locale=t.locale),t.pattern)if(Array.isArray(t.pattern)||"function"==typeof t.pattern)this.pattern=t.pattern;else if("string"==typeof t.pattern){var e=C.mergeSettings(void 0,t.definitions||{},Rt.LEGACY_DEFS);this.pattern=this._convertPatternFromString(t.pattern,e)}return t.patternOptions&&(this.patternOptions=t.patternOptions),this},process:function(t,e){if("string"!=typeof t)throw new Error("No string provided");var n={},i={originalValue:t,caretPos:e.selection.start,maskResult:!1};if("function"==typeof this.pattern){e.patternOptions||(e.patternOptions={});var a=C.extend({},this.patternOptions,e.patternOptions,{caretPos:e.selection.start,previousMaskResult:e.previousMaskResult});n=this.pattern(t,a),Array.isArray(n)&&(n={mask:n});var s=this._processCaretTraps(n.mask);n.mask=s.maskWithoutCaretTraps,n.caretTrapIndexes=s.indexes,e.caretTrapIndexes=s.indexes}else n={mask:this.pattern};if(!1===n.mask)return i;try{i=this._conformToMask(t,n,e)}catch(t){return i}if(e.patternOptions&&e.patternOptions.delimeter&&i.conformedValue&&i.conformedValue!==t&&(i.caretPos=i.conformedValue.length),"function"==typeof e.pipe){var r={};try{r=e.pipe(i,e)}catch(t){r=!1}!1===r?(i.pipeResult=!1,i.pipedValue=e.previousMaskResult):C.isString(r)?(i.pipeResult=!0,i.pipedValue=r,i.pipedCharIndexes=[]):i=C.extend({},i,{pipeResult:r.result,pipedValue:r.value,pipedCharIndexes:r.characterIndexes})}return i},_conformToMask:function(t,e,n){(n=C.mergeSettings(void 0,n,Rt.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(e.mask,n.placeholderChar);var i=!1,a=!1===n.guide&&void 0!==n.previousMaskResult,s=t.length,r=n.previousMaskResult.length,o=this.pattern.length,l=n.placeholder.length||0,c=n.placeholderChar,d=n.selection.start,u=Rt.EMPTY_STRING,h=s-r,p=h>0,f=d+(p?-h:0),g=f+Math.abs(h);if(!0===n.keepCharacterPositions&&!p){for(var m=Rt.EMPTY_STRING,v=f;v<g;v++)n.placeholder[v]===c&&(m+=c);t=t.slice(0,f)+m+t.slice(f,s)}for(var b=t.split(Rt.EMPTY_STRING).map(function(t,e){return{char:t,isNew:e>=f&&e<g}}),y=s-1;y>=0;y--){var w=b[y];if(w!==n.placeholderChar){var x=y>=f&&r===o;w===n.placeholder[x?y-h:y]&&b.splice(y,1)}}t:for(var k=0;k<l;k++){var T=n.placeholder[k];if(T===c){if(b.length>0)for(;b.length>0;){var A=b.shift(),S=t.slice(k,k+1);if(A.char===c&&!0!==a){u+=c;continue t}if(e.literalRegex&&e.literalRegex.test(A.char)&&S&&(S===A.char||S===c)){if(p&&e.literals.indexOf(t[k-1])>-1){d++;continue t}var E=new RegExp("(".concat(A.char,")"),"g"),$=n.placeholder.match(E).length;t.match(E).length<=$&&(u+=A.char);for(var D=n.placeholder.slice(k).indexOf(A.char);D>0;)k++,D--;continue t}if(e.mask[k].test(A.char)){if(!0===n.keepCharacterPositions&&!1!==A.isNew&&n.previousMaskResult!==Rt.EMPTY_STRING&&!1!==n.guide&&p){for(var I=b.length,M=null,L=0;L<I;L++){var P=b[L];if(P.char!==c&&!1===P.isNew)break;if(P.char===c){M=L;break}}null!==M?(u+=A.char,b.splice(M,1)):k--}else u+=A.char;continue t}i=!0}!1===a&&(u+=n.placeholder.substr(k,l));break}u+=T}if(a&&!1===p){for(var N=null,R=0;R<u.length;R++)n.placeholder[R]===c&&(N=R);null!==N?u=u.substr(0,N+1):""!==t&&u.indexOf(t)>-1?d+=t.length:u=Rt.EMPTY_STRING}return{caretPos:d,caretTrapIndexes:n.caretTrapIndexes,conformedValue:u,charactersRejected:i,placeholder:n.placeholder,placeholderChar:c,maskResult:!0}},_processCaretTraps:function(t){for(var e=[],n=t.indexOf(Rt.CARET_TRAP);-1!==n;)e.push(n),t.splice(n,1),n=t.indexOf(Rt.CARET_TRAP);return{maskWithoutCaretTraps:t,indexes:e}},_convertMaskToPlaceholder:function(t,e){if(Array.isArray(t)||(t=[]),e||(e=Rt.PLACEHOLDER_CHAR),-1!==t.indexOf(e))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(e),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(t)));return t.map(function(t){return t instanceof RegExp?e:t}).join(Rt.EMPTY_STRING)},adjustCaretPosition:function(t){if(0===t.caretPos)return 0;function e(t){return t!==e}var n=t.rawValue.length,i=t.previousMaskResult.length,a=t.placeholder?t.placeholder.length:0,s=t.conformedValue?t.conformedValue.length:0,r=n-i,o=r>0;if(r>1&&!o&&0!==i)return t.caretPos;var l,c,d=0;if(!o||t.previousMaskResult!==t.conformedValue&&t.conformedValue!==t.placeholder){var u=t.conformedValue.toLowerCase(),h=t.rawValue.toLowerCase().substr(0,t.caretPos).split(Rt.EMPTY_STRING).filter(function(t){return-1!==u.indexOf(t)});c=h[h.length-1];var p=t.previousPlaceholder.substr(0,h.length).split(Rt.EMPTY_STRING).filter(e).length,f=t.placeholder.substr(0,h.length).split(Rt.EMPTY_STRING).filter(e).length!==p,g=void 0!==t.previousPlaceholder[h.length-1]&&void 0!==t.placeholder[h.length-2]&&t.previousPlaceholder[h.length-1]!==t.placeholderChar&&t.previousPlaceholder[h.length-1]!==t.placeholder[h.length-1]&&t.previousPlaceholder[h.length-1]===t.placeholder[h.length-2];!o&&(f||g)&&p>0&&t.placeholder.indexOf(c)>-1&&void 0!==t.rawValue[t.caretPos]&&(l=!0,c=t.rawValue[t.caretPos]);var m=[];t.indexesOfPipedChars&&(m=t.indexesOfPipedChars.map(function(t){return u[t]}));for(var v=m.filter(function(t){return t===c}).length,b=h.filter(function(t){return t===c}).length,y=t.placeholder.substr(0,t.placeholder.indexOf(t.placeholderChar)).split(Rt.EMPTY_STRING).filter(function(e,n){return e===c&&t.rawValue[n]!==e}).length+b+v+(l?1:0),w=0,x=0;x<s&&(d=x+1,u[x]===c&&w++,!(w>=y));x++);}else d=t.caretPos-r;if(o)for(var C=d,k=d;k<=a;k++){if(!t.placeholder)return C;if(t.placeholder[k]===t.placeholderChar&&(C=k),t.placeholder[k]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(k)||k===a)return C}else if(l){for(var T=d-1;T>=0;T--)if(t.conformedValue[T]===c||-1!==t.caretTrapIndexes.indexOf(T)||0===T)return T}else for(var A=d;A>=0;A--)if(t.placeholder[A-1]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(A)||0===A)return A},_convertPatternFromString:function(t,e){for(var n,i,a=[],s=Object.keys(e),r=0;r<t.length;r++)a.push((n=t[r],void 0,(i=s.indexOf(n))>-1&&(n=e[s[i]]),n));return a}};var qt={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:Ht,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function Vt(t,e){return this.element=t,this.settings=C.mergeSettings(this.element,e,qt),this.init()}Vt.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){if(this._replaceLegacySettings(),"string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=Rt.numberMask,this.element.classList.add("is-number-mask");break;case"rangeNumber":this.settings.pattern=Rt.rangeNumberMask,this.element.classList.add("is-range-number-mask");break;case"date":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=t.settings.dateFormat)),this.settings.pattern=Rt.dateMask;break;case"rangeDate":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=e.settings.dateFormat),this.settings.pattern=Rt.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var t=this;this.locale=R.currentLocale,this.settings.locale?R.getLocale(this.settings.locale).done(function(e){t.locale=R.cultures[e],t.build()}):this.build()},handleEvents:function(){var t=this;return this.changeEventHandler=function(){t.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){t.state.previousMaskResult=t.element.value,t.state.initialValue=t.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(e){return t.hasTriggeredChangeEvent=!1,t.process(e)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(e){if(!0===this.processingJustHappenedOnInput)return e.preventDefault(),!1;if(t.settings.processOnBlur){if(t.element.readOnly)return e.preventDefault(),!1;!t._hasChangedValue()||!t._isEdgeIE()&&t.hasTriggeredChangeEvent||($(t.element).trigger("change"),t.hasTriggeredChangeEvent=!0)}return delete t.state.initialValue,t.process(e)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(t){if(!this.settings.pattern)return!0;var e=this.mask,n=this.settings.patternOptions||{},i=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(i=this.locale.data.numbers.decimal),n.symbols&&n.symbols.decimal&&(i=n.symbols.decimal),e.pattern||e.configure({pattern:this.settings.pattern,patternOptions:n});var a=this.element.value,s=!1;if(t&&"input"===t.type&&"insertText"===t.inputType&&(""===a?(a=this.state.previousMaskResult,s=!0):t.data===i&&a.indexOf(i)>-1&&(s=!0)),a===this.state.previousMaskResult)return s&&(this.element.value="",this.element.value="".concat(a)),!1;var r=this.element.selectionStart||0,o=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&r!==o&&(C.safeSetSelection(a.length,a.length),r=a.length,o=a.length),a=this._getSafeRawValue(a);var l={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:r,end:o}};r!==o&&(l.selection.contents=a.substring(r,o)),"function"==typeof this.settings.pipe&&(l.pipe=this.settings.pipe);var c=Rt.adjustRangeNumber(a,l,this);a=c.rawValue,l=c.opts;var d=e.process(a,l);if(!d.maskResult)return d.maskResult;var u=d.pipedValue?d.pipedValue:d.conformedValue;""!==u&&n&&n.suffix&&u.indexOf(n.suffix)<0&&(u+=this.settings.patternOptions.suffix),l.patternOptions&&l.patternOptions.delimeter&&u&&u!==a&&(a=u);var h={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:u,placeholder:d.placeholder,rawValue:a,caretPos:d.caretPos,placeholderChar:this.settings.placeholderChar};d.pipedCharIndexes&&(h.indexesOfPipedChars=d.pipedCharIndexes),d.caretTrapIndexes&&(h.caretTrapIndexes=d.caretTrapIndexes),d.caretPos=e.adjustCaretPosition(h);var p=this.state.previousMaskResult;return this.state.previousMaskResult=u,this.state.previousPlaceholder=d.placeholder,"firefox"===m.browser.name?this.element.value!==u&&(this.element.value=u):this.element.value=u,C.safeSetSelection(this.element,d.caretPos),p!==u&&($(this.element).trigger("write.mask",[u]),d.maskResult)},_isAndroid:function(){return"android"===(m&&m.os&&m.os.name?m.os.name:"")},_isEdgeIE:function(){var t=m&&m.browser&&m.browser.name?m.browser.name:"";return"ie"===t||"edge"===t},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(t){if(C.isString(t))return t;if(C.isNumber(t))return String(t);if(null==t)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(t)))},_replaceLegacySettings:function(){var t=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var e=this.element.getAttribute("data-mask")||!1;"string"==typeof e&&e.length&&(this.settings.pattern=e);var n=this.element.getAttribute("data-mask-mode")||!1;if(n&&t.indexOf(n)>-1&&(this.settings.mode=n),this.settings.mode&&(-1===t.indexOf(this.settings.mode)&&delete this.settings.mode,"group"===this.settings.mode?this.settings.process=void 0:"date"===this.settings.mode?this.settings.process="date":this.settings.process=this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var i=this.element.getAttribute("data-thousands")||!1;if(i&&(this.settings.patternOptions.allowThousandsSeparator="true"===i),"string"==typeof this.settings.pattern){var a=-1!==this.settings.pattern.indexOf("-");a&&(this.settings.patternOptions.allowNegative=a,this.settings.patternOptions.symbols.negative="-");var s=R.currentLocale.data.numbers?R.currentLocale.data.numbers.group:",",r=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:s,o=-1!==this.settings.pattern.indexOf(r);this.settings.patternOptions.allowThousandsSeparator=o,o&&(this.settings.patternOptions.symbols.thousands=r);var l="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",c=this.settings.pattern.split(l);void 0===this.settings.patternOptions.symbols.decimal&&(this.settings.patternOptions.symbols.decimal=R.currentLocale.data.numbers.decimal),this.settings.patternOptions.integerLimit=c[0].replace(/[^#0]/g,"").length,c[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=c[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=l))}}var d=this.element.getAttribute("data-must-complete")||!1;d&&(this.settings.mustComplete=d),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var u,h,p=this.settings.showSymbol;if(["currency","percent"].indexOf(p)>-1){u="currency"===(h=this.settings.showSymbol)?{char:R.currentLocale.data.currencySign,format:R.currentLocale.data.currencyFormat}:"percent"===h?{char:R.currentLocale.data.numbers.percentSign,format:R.currentLocale.data.numbers.percentFormat}:{};var f,g,m,v="currency"===p?"\xa4":u.char,b=new RegExp(v,"g").exec(u.format),y=-1;if(b&&b.length){if(0===(y=u.format.indexOf(b[0])))m="prefix",f=new RegExp("[^".concat(v,"]\\S"),"g"),g=u.format.replace(f,"");else if(y>0){for(m="suffix",f=new RegExp("\\S[^".concat(v,"]"),"g");/\s/.test(u.format.charAt(y-1));)--y;g=u.format.substr(y).replace(f,"")}"currency"===p&&(g=g.replace("\xa4",u.char)),this.settings.patternOptions[m]=g}}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),"rangeNumber"===this.settings.process&&this.element.classList.remove("is-range-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(t){return this.each(function(){var e=$.data(this,"mask");e?e.updated(t):(e=$.data(this,"mask",new Vt(this,t))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}})},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var jt={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new wt({containerOffsetX:10,containerOffsetY:"ios"===m.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1,attributes:null};function Wt(t,e){this.settings=C.mergeSettings(t,e,jt),this.element=$(t),this.init()}Wt.prototype={init:function(){this.isFirefox="firefox"===m.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return m.rtl},get isOpen(){return h.hasClass(this.element[0],"is-open")},get isFocused(){var t=document.activeElement,e=this.element.is(t),n=this.menu&&this.menu.length&&this.menu[0].contains(t);return!(!e&&!n)},setup:function(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(t){if(t&&t.length){var e=t.parent();e.is("body")||(this.menuOrgContainment={parent:e,index:e.children().index(t)})}},insertAtContainment:function(t,e){var n=function(t){return t&&t.length};if(e=e||this.menuOrgContainment||{},n(t)&&n(e.parent)){var i=e.index,a=e.parent,s=a.children().length;i<0&&(i=Math.max(0,s+1+i)),i<s?a.children().eq(i).before(t):a.append(t)}},addMarkup:function(){var t,e,n;if(!this.menu||!this.menu.length)switch(a(this.settings.menu)){case"string":t=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),n=this.menu.data("trigger")[0].id,e=this.menu.clone(),this.setMenuOrgContainment(e),e.detach().appendTo("body"),e.attr("data-trigger",n),this.menu.attr("data-trigger",n));break;case"object":null===this.settings.menu?this.menu=this.element.next(".popupmenu, .popupmenu-wrapper"):this.menu=$(this.settings.menu),(t=this.menu.attr("id"))&&""!==t||(this.menu.attr("id","popupmenu-".concat(this.id)),t=this.menu.attr("id")),n=this.element.attr("id")}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attributes&&(C.addAttributes(this.element,this,this.settings.attributes,"trigger"),C.addAttributes(this.menu,this,this.settings.attributes,"menu"));var i=this.menu.parent().not(".popupmenu-wrapper, body");this.settings.attachToBody&&i.length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu").attr("aria-labelledby",n),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each(function(){$(this).data("icon")||$(this).icon()}),0===this.wrapper.parents().filter(function(){var t=this?this.style.overflow:null;return"auto"!==t&&"visible"!==t&&"scroll"!==t}).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each(function(t,e){var n=$(e);n.parent().hasClass("wrapper")||n.wrap('<div class="wrapper"></div>')});var s=!1,r=this.element.parent().attr("class");if(!0===this.settings.showArrow)s=!1;else if(null===this.settings.showArrow){var o=this.element.closest(".toolbar"),l=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||o.length>0&&!o.is(".formatter-toolbar")||l.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||r&&r.indexOf("more")>=0||r&&r.indexOf("btn-group")>=0)&&(s=!0)}if(s){var c=$('<div class="arrow"></div>'),d=this.menu.parent(".popupmenu-wrapper");0===d.find(".arrow").length&&d.addClass("bottom").append(c)}var u=this.element.closest(".field-short").length>0;this.menu[u?"addClass":"removeClass"]("popupmenu-short"),void 0!==r&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",t),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem&&this.element.width(parseInt(this.getMaxMenuWidth(),10))}},renderItem:function(t){if(void 0===t)return"";var e=this;function n(t){var n="";return t.forEach(function(t){n+=e.renderItem(t)}),n}if(Array.isArray(t)){var i=n(t),a='<ul class="popupmenu">'.concat(i,"</ul>");return E.stripWhitespace(a)}var s="",r="";if(void 0!==t.separator)return t.heading&&(s+='<li class="heading">'.concat(t.heading,"</li>")),"single"===t.nextSectionSelect?r=" single-selectable-section":"multiple"===t.nextSectionSelect&&(r=" multi-selectable-section"),E.stripWhitespace('\n        <li class="separator'.concat(r,'"></li>\n        ').concat(s,"\n      "));if(t.menu){var o="";t.menuId&&(o=' id="'.concat(t.menuId,'"'));var l="";t.hasIcons&&(l+=" has-icons");var c="";return Array.isArray(t.menu)&&(c=n(t.menu)),t.noMenuWrap?c:E.stripWhitespace("\n        <ul".concat(o,' class="popupmenu').concat(l,'">\n          ').concat(c,"\n        </ul>\n      "))}var d="",u="",h="",p="",f="",g="",m="",v="";return t.disabled&&(d+=" is-disabled"),!1===t.visible&&(u+=" hidden"),t.id&&(p=' id="'.concat(t.id,'"')),"single"===t.selectable&&(f+=" is-selectable"),"multiple"===t.selectable&&(f+=" is-multiselectable"),t.icon&&(h='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(t.icon,'"></use>\n      </svg>')),Array.isArray(t.submenu)&&(g+=" submenu",m+=this.renderItem(t.submenu),v+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),E.stripWhitespace('<li class="popupmenu-item'.concat(d).concat(u).concat(f).concat(g,'">\n      <a').concat(p,' href="#">').concat(h,"<span>").concat(t.text,"</span>\n        ").concat(v,"\n      </a>\n      ").concat(m,"\n    </li>"))},toData:function(t){var e={},n=[],i=this;(t=t||{}).contextElement||(t.contextElement=this.menu),t.contextElement instanceof HTMLElement&&(t.contextElement=$(t.contextElement)),t.contextElement.is(".popupmenu-wrapper")&&(t.contextElement=t.contextElement.children("ul"));var a=t.contextElement.attr("id");a&&a.length&&(e.menuId="".concat(a));var s,r,o=t.contextElement.hasClass("has-icons");return e.hasIcons=o,t.contextElement.children("li").each(function(t,a){var o=function t(n){var a=$(n),o={};if(!a.hasClass("heading")){if(a.hasClass("separator")){o.separator=!0,a.hasClass("single-selectable-section")&&(s=!0,o.nextSectionSelect="single"),a.hasClass("multi-selectable-section")&&(r=!0,o.nextSectionSelect="multiple");var l=a.next();return l.hasClass("heading")&&(o.heading=l.text().trim()),o}var c=a.children("a"),d=c.children(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),u=c.attr("id");o.text=c.text().trim(),o.disabled=a.hasClass("is-disabled"),o.visible=!a.hasClass("hidden"),"string"==typeof u&&u.length&&(o.id=u),d.length&&d[0]instanceof SVGElement&&(o.icon=d[0].querySelector("use").getAttribute("href").replace("#icon-",""));var h=!s&&!r,p=!i.hasSelectableSeparator(a);o.selectable&&h&&p&&("single"===o.selectable?s=!0:"multiple"===o.selectable&&(r=!0),e.selectable=o.selectable);var f=a.find(".popupmenu");return f.length&&(o.submenu=[],f.first().children().each(function(e,n){var i=t(n);i&&o.submenu.push(i)})),o}}(a);o&&n.push(o)}),t.noMenuWrap?e=n:e.menu=n,e},markupItems:function(t){var e=this;t?t instanceof HTMLElement&&(t=$(t)):t=this.menu;var n=t.find("li:not(.heading):not(.separator)"),i=!1;t[0].setAttribute("role","menu"),t[0].setAttribute("aria-labelledby",this.element.attr("id")),n.each(function(t,n){var a=$(n).children("a")[0],s=$(a),r=$(n),o=s.children("span")[0],l=r.children("ul")[0],c=r.find(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),d=r.children(".wrapper")[0];if(n.setAttribute("role","none"),a){if(a.setAttribute("role",e.settings.ariaListbox?"option":"menuitem"),a.setAttribute("tabindex","-1"),e.settings.attributes&&C.addAttributes(s,e,e.settings.attributes,"option-".concat(function(t){var e=$(t),n=e.parents("li"),i=[];return e.add(n).each(function(t,e){i.push($(e).parent().children("li:not(.heading):not(.separator)").index(e))}),i.join("-")}(n))),r.hasClass("is-disabled")||"true"===a.getAttribute("disabled")||"disabled"===a.getAttribute("disabled")?(r.addClass("is-disabled"),a.setAttribute("aria-disabled","true"),a.setAttribute("disabled",!0)):(r.removeClass("is-disabled"),s.removeAttr("aria-disabled"),a.removeAttribute("disabled")),l instanceof HTMLElement&&l.classList.add("popupmenu"),d instanceof HTMLElement&&(n.className+="".concat(h.hasAnyClass(n)?" ":"","submenu"),(l=$(d).children("ul")[0])instanceof HTMLElement&&l.classList.add("popupmenu")),h.hasClass(n,"submenu")&&(o||(a.innerHTML="<span>".concat(a.innerHTML,"</span>"),o=s.children("span")[0]),0===s.find("svg.arrow").length&&s.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),a.setAttribute("aria-haspopup","true")),h.hasClass(n,"is-checked")&&(a.setAttribute("role","menuitemcheckbox"),a.setAttribute("aria-checked",!0),!e.hasSelectableSeparator(n))){var u="is-selectable";e.menu.is(".is-multiselectable")&&(u="is-multiselectable"),e.getAdjacentSelectables(n).addClass(u)}h.hasClass(n,"is-not-checked")&&(n.className=n.className.replace("is-not-checked",""),a.setAttribute("role","menuitemcheckbox"),a.removeAttribute("aria-checked"))}c&&c.length>0&&(i=!0)}),i?t.addClass("has-icons"):t.removeClass("has-icons")},refreshMenuItem:function(t,e,n){if(t&&t instanceof HTMLElement&&e&&$(this.menu)[0].contains(t)){var i,a=t.querySelector("a"),s=t.querySelector(".icon:not(.close):not(.icon-dropdown)");if(e.text&&a.innerText.trim()!==e.text&&(a.innerText="".concat(e.text)),!0===e.disabled?-1===t.className.indexOf("hidden")&&t.classList.add("is-disabled"):t.className.indexOf("is-disabled")>-1&&t.classList.remove("is-disabled"),!0===e.visible?t.className.indexOf("hidden")>-1&&t.classList.remove("hidden"):-1===t.className.indexOf("hidden")&&t.classList.add("visible"),e.icon?s&&((i=s.querySelector("use"))&&i.getAttribute("href").replace("#icon-","")!==e.icon&&s.remove(),i.setAttribute("href","#icon-".concat(e.icon))):s&&s.remove(),e.submenu){t.classList.add("submenu");var r=t.querySelector(".popupmenu");if(r)for(var o=r.children,l=0;l<e.submenu.length;l++)e.submenu[l].isSubmenuItem=!0,this.refreshMenuItem(o.item(l),e.submenu[l],n)}"function"==typeof n&&n.apply(this,[t,e])}},handleEvents:function(){var t=this,e="rightClick"!==this.settings.trigger;function n(t){return t.stopPropagation(),t.preventDefault(),!1}function i(e,n){if(t.keydownThenClick)delete t.keydownThenClick;else{var i=!0===n?0:2;e.button>i||t.element.is(":disabled")||(["android","ios"].indexOf(m.os.name)>-1&&(t.holdingDownClick=!0),function(e){if(t.element.hasClass("is-disabled"))return e.stopPropagation(),void e.preventDefault();var n="rightClick"===t.settings.trigger;if(e.stopPropagation(),e.preventDefault(),n&&t.menu.hasClass("is-open"))return t.close(),void t.open(e);t.menu.add(t.element).hasClass("is-open")?t.close():t.open(e)}(e))}}"immediate"===this.settings.trigger||(e&&this.element.off("click.popupmenu").on("click.popupmenu",function(t){i(t,!0)}),e)||(this.menu.parent().on("contextmenu.popupmenu",n),-1===["android","ios"].indexOf(m.os.name)?this.element.on("contextmenu.popupmenu",function(t){n(t),i(t)}):this.element.on("touchstart.popupmenu",function(t){"ios"===m.os.name&&"INPUT"!==t.target.tagName&&t.preventDefault(),$(t.target).addClass("longpress-target")}).on("touchend.popupmenu",function(t){$(t.target).removeClass("longpress-target")}).on("longpress.popupmenu",function(e,n){t.openedWithTouch=!0,i(n)})),this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",function(){return!1}),this.element.not(".autocomplete, ul").on("keydown.popupmenu",function(e){switch(e.which){case 13:case 32:"click"===t.settings.trigger&&(t.keydownThenClick=!0,t.open(e));break;case 121:e.shiftKey&&t.open(e)}}).on("updated.popupmenu",function(e,n){e.stopPropagation(),t.updated(n)})},handleKeys:function(){var t=this;this.menu.on("click.popupmenu","li",function(e){var n=$(this).find("a");t.handleItemClick(e,n)}),this.menu.on("click.btn-menu.".concat(this.id),function(t){t.preventDefault()});var e="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",function(){t.highlight($(this).children("a"))}),setTimeout(function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),function(n){var i=n.which;if(27===i)return n.stopPropagation(),n.stopImmediatePropagation(),t.close(!0),!1;if(9===i&&(n.stopPropagation(),t.close(!0)),32===i){n.stopPropagation();var a=$(n.target),s=a.find("input:checkbox");if(s.length)return s.trigger("click"),!0;var r=$();if(a.is(".tab")||a.parent().is(".tab")||a.is(".tab-more"))return n.preventDefault(),!0;if(a.is("li")&&(r=a.children("a")),a.is("a")&&(r=a),r.length)return r.trigger("click"),!0}var o=t.menu.find(":focus");o[0]||(o=$(t.menu[0].querySelector(".is-focused a")));var l,c,d,u,h="colorpicker-menu"===t.settings.menu,p=t.element.is(".autocomplete");37!==i||p||(n.stopPropagation(),n.preventDefault(),o.closest(".popupmenu")[0]!==t.menu[0]&&o.closest(".popupmenu").length>0&&(o.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),t.highlight(o.closest(".popupmenu").parent().prev("a")))),l=function(t){var n;return t.parent().prevAll(e).each(function(){if(!n){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(n=e)}}),n||u(t)},u=function(t){var n=t.parent().prevAll(e).last(),i=n.children("a");return n.is(".is-disabled")||!0===i.prop("disabled")?c(i):i},c=function(t){var n;return t.parent().nextAll(e).each(function(){if(!n){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(n=e)}}),n||u(t)},d=function(t){var n=t.parent().nextAll(e).last(),i=n.children("a");return n.is(".is-disabled")||!0===i.prop("disabled")?l(i):i};for(var f=0,g=t.menu.children(e),m=g.length,v=0,b=0;b<m;b++){var y=g[b];if(0===v&&(v=y.offsetTop),y.offsetTop!==v)break;f++}if(!h&&38===i||h&&i===(R.isRTL()?39:37)){if(n.stopPropagation(),n.preventDefault(),0===o.parent().prevAll(e).length)return void(0===o.length?t.highlight(t.menu.children(e).last().find("a")):t.highlight(d(o)));t.highlight(l(o))}if(h&&38===i&&(n.stopPropagation(),n.preventDefault(),o.parent().prevAll(e).length>0&&t.highlight($(o.parent().prevAll(e)[f-1]).find("a"))),39!==i||p||(n.stopPropagation(),n.preventDefault(),o.parent().hasClass("submenu")&&(t.openSubmenu(o.parent()),t.highlight(o.parent().find(".popupmenu a:first")))),!h&&40===i||h&&i===(R.isRTL()?37:39)&&!p){if(n.stopPropagation(),n.preventDefault(),0===o.parent().nextAll(e).length)return void(0===o.length?t.highlight(t.menu.children(e).first().find("a")):t.highlight(u(o)));t.highlight(c(o))}if(h&&40===i&&(n.stopPropagation(),n.preventDefault(),o.parent().nextAll(e).length>0&&t.highlight($(o.parent().nextAll(e)[f-1]).find("a"))),t.isFirefox&&p&&!/37|39|38|40/.test(i)){t.element.triggerHandler(n),t.element[0].focus();var w=t.element[0].value;t.element[0].value="",t.element[0].value=w}})},1)},handleItemClick:function(t,e){var n=e.attr("href"),i=[e];return!(!t&&!e||!e.length||(e.parent().is(".submenu, .hidden, .is-disabled")||e[0].disabled?(t.preventDefault(),1):e.find("input[checkbox]").length>0||(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(e),t.preventDefault()),this.isSelectable(e.parent())&&(i=this.select(e)),e.parent().hasClass("is-toggleable")&&e.parent().toggleClass("is-checked"),t&&this.settings.triggerSelect&&(1===i.length&&i.push(void 0),i.push(!0),this.element.triggerHandler("selected",i)),!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(e)&&(this.close(),!this.element.is(".autocomplete")&&(n&&"#"!==n.charAt(0)?("_blank"===e.attr("target")?window.open(n,"_blank"):window.location.href=n,0):(t&&(t.preventDefault(),t.stopPropagation()),0))))))},iconFilteringSetup:function(t){if(this.element.hasClass("btn-filter")){var e=this.element.find("svg.icon-dropdown"),n=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=n.find("span").text();1===e.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),e.first().changeIcon(n.find("svg").getIconName()),this.element.find(".audible").text(i)}},iconFilteringUpdate:function(t){if(this.element.hasClass("btn-filter")){var e=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=e.find("span").text();this.element.find(".audible").text(n),this.element.find("svg:not(.ripple-effect):first").changeIcon(e.find("svg").getIconName())}},getPositionFromEvent:function(t){var e=0,n=0;if(t||(t=window.event),!t)return{};if(t.changedTouches){var i=t.changedTouches[0];e=i.pageX,n=i.pageY}else t.pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:e,y:n}},position:function(t){var e=this,n=this.element,i=this.isRTL(),a=this.menu.parent(".popupmenu-wrapper"),s=this.getPositionFromEvent(t),r=this.menu[0].offsetWidth;if(this.menu[0].offsetHeight,a.length){var o=this.element[0].offsetWidth;"click"===this.settings.trigger&&o>r&&this.menu.width(o),n.is("svg, .icon")&&n.closest(".tab").length&&(n=n.closest(".tab")),a.find(".arrow").removeAttr("style");var l=$.extend({},this.settings.placementOpts),c=["flip"];c.push("shrink-y"),l.strategies=c,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(l.x=m(0,"x")-(i?r:0)+(i?-1:1)*this.settings.offset.x,l.y=m(0,"y")+this.settings.offset.y,0===l.x&&0===l.y&&(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.parentXAlignment=i?"right":"left")):(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.strategies.push("nudge"));var d=n.parents(".toolbar"),u=d.length>0,h=n.parents(".title").length>0,p=u&&d.children(".buttonset, .title").length>1,f=n.parents(".pager-pagesize").length>0;n.is(".btn-menu")?f?b():u&&p?h?v():b():v():n.is(".btn-actions")||n.is(".tab-more")?b():n.is(".btn-split-menu, .tab, .searchfield-category-button")&&!n.parent(".pager-pagesize").length&&v(),n.parents(".masthead").length>0&&(l.y+=15);var g=this.element.parents(".page-container:not(.tab-container)");g.length&&(l.container=g.first()),a.one("afterplace.popupmenu",function(t,n){e.handleAfterPlace(t,n)}),this.wrapperPlace=new xt(a,l),this.wrapperPlace.place(l)}function m(t,e){return s[e="x"===e||"y"===e?e:"x"]}function v(){l.parentXAlignment=i?"right":"left"}function b(){l.parentXAlignment=i?"left":"right"}},handleAfterPlace:function(t,e){var n=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(t,e,n),e.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),e.height&&(n[0].style.height="",this.menu[0].style.height=e.height+(/(px|%)/i.test("".concat(e.height))?"":"px")),e.width&&(n[0].style.width="",this.menu[0].style.width=e.width+(/(px|%)/i.test("".concat(e.width))?"":"px")),n.triggerHandler("popupmenuafterplace",[e]),e},callSource:function(t,e,n,i){if("function"==typeof this.settings.beforeOpen){var a=this,s=this.menu;if(!(h.isElement(n)&&$(n).is(".popupmenu, .submenu")&&(s=$(n),n.hasClass("is-open")))){var r=function(n){if(s.children().filter(function(t,e){return-1===a.predefinedItems.index(e)}).off().remove(),!1===n)return!1;var i=$(n);s.append(i);var r=s.parent(".wrapper, .popupmenu-wrapper");return r.length||(r=s.wrap('<div class="wrapper">').parent()),r.removeAttr("style"),a.markupItems(s),e&&(s.is(a.menu)?a.open(t,!0):a.openSubmenu(r.parent("li"),!0)),!0},o={};s.is(this.menu)||(o.contextElement=s),o.element=this.element,o.isSubmenu=i,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(r,o):window[this.settings.beforeOpen](r,o)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var t=!this.isOpen;t&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var e=this.menu.width();return t&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),e},open:function(t,e,n){var i=this;if(this.menu&&this.menu.length&&(this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu,this]))&&(e||(this.callSource(t,!0),!this.settings.beforeOpen)))if(n||"ios"!==m.os.name){$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).not(this.menu).each(function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}});var a=this.element.data("tooltip");a&&a.visible&&a.hide();var s=$(".dropdown.is-open");if(s.length>0){var r=s.parent().prev().data("dropdown");r&&r.closeList("cancel")}var o=document.querySelector(".application-menu.is-open");o instanceof HTMLElement&&!o.contains(this.element[0])&&!o.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(t),C.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each(function(){var t=$(this),e=t.parent();e.hasClass("is-disabled")?(e.addClass("is-disabled"),t.attr("aria-disabled","true"),t.attr("disabled","disabled")):(e.removeClass("is-disabled"),t.removeAttr("aria-disabled"),t.removeAttr("disabled"))}),setTimeout(function(){$(document).on("touchend.popupmenu.".concat(i.id," click.popupmenu.").concat(i.id),function(t){var e="colorpicker-menu"===i.settings.menu;2!==t.button&&(i.holdingDownClick?delete i.holdingDownClick:$(t.target).is(i.element)&&!e&&"rightClick"!==i.settings.trigger||(0===$(t.target).closest(".popupmenu").length&&i.close(!0,"rightClick"===i.settings.trigger),$(t.target).hasClass("swatch")&&setTimeout(function(){i.close()},150)))}),void 0===window.orientation&&$("body").on("resize.popupmenu",function(){i.handleCloseEvent()}),$(window).on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".datagrid-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){i.close()},150)}),i.element.triggerHandler("open",[i.menu])},300),$("iframe").each(function(){var t=$(this);t.ready(function(){try{t.contents().find("body").on("click.popupmenu",function(){i.close()})}catch(t){}})}),this.handleKeys();var l,c,d=0;i.menu.find(".popupmenu").removeClass("is-open"),i.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",function(t){if(!$(t.target).hasClass("popupmenu")){var e=$(this);l=t.pageX,clearTimeout(i.submenuOpenTimeout),i.submenuOpenTimeout=setTimeout(function(){i.openSubmenu(e)},300),$(document).on("mousemove.popupmenu.".concat(this.id),function(t){d=t.pageX})}}).on("mouseleave.popupmenu",".submenu",function(){$(document).off("mousemove.popupmenu.".concat(this.id));var t=((c=$(this).find("ul")).parent(".wrapper").length>0?parseInt(c.parent(".wrapper")[0].style.left,10):0)<0,e=d-l<3.5;t&&(e=d-l>=0),e&&(c.removeClass("is-open").removeAttr("style"),c.parent(".wrapper").removeAttr("style"),c.parent().parent().removeClass("is-submenu-open"),c=null),clearTimeout(i.submenuOpenTimeout)}),i.settings.autoFocus&&setTimeout(function(){var t=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",e=i.menu.children(t).find(".is-selected").children("a");e.length||(e=i.menu.children(t).first().children("a")),i.highlight(e),i.element.triggerHandler("afteropen",[i.menu])},1)}else setTimeout(function(){i.open(t,e,!0)},400)},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(t,e){if(!h.hasClass(t,"is-disabled")&&!t[0].disabled){var n=t.children(".wrapper, .popupmenu");n.length&&n.is(".wrapper")&&(n=n.children(".popupmenu"));var i=this.element.triggerHandler("beforeopen",[n,this]);!1!==i&&(!e&&(i=this.callSource(null,!0,n,!0),this.settings.beforeOpen)||this.showSubmenu(t))}},showSubmenu:function(t){this.element.triggerHandler("show-submenu",[t]);var e=t.children(".wrapper").filter(":first"),n=this.isRTL();if(0===e.length){var i=t.children("ul").filter(":first");i.wrap('<div class="wrapper"></div>'),e=i.parent()}var a,s=e.children(".popupmenu"),r=t.position().left+t.outerWidth();t.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),e.children(".popupmenu").addClass("is-open"),a=e.outerWidth(),n&&(r=t.position().left-a),e[0].style.left="".concat(r,"px"),e[0].style.top="".concat(parseInt(t.position().top,10)-5,"px");var o=s.outerWidth();(e.offset().left+o>$(window).width()+$(document).scrollLeft()||n&&e.offset().left<0)&&(e[0].style.left="-9999px",o=s.outerWidth(),r=t.position().left-o,n&&(r=e.closest(".popupmenu").outerWidth()-4),e[0].style.left="".concat(r,"px"),(e.offset().left<0||n&&e.offset().left+o>$(window).width()+$(document).scrollLeft())&&(r=t.position().left-o+Math.abs(e.offset().left)+40,n&&(r=t.position().left-o-30),e[0].style.left="".concat(r,"px"),o=s.outerWidth()),(e.offset().left+o>$(window).width()+$(document).scrollLeft()||n&&e.offset().left<0)&&(o-=e.offset().left+o-($(window).width()+$(document).scrollLeft()),s[0].style.width="".concat(o,"px")));var l=s.outerHeight(),c=this.settings.placementOpts.containerOffsetY;if(e.offset().top+l>window.innerHeight-c+$(document).scrollTop()){var d=e.offset().top+l-(window.innerHeight+$(document).scrollTop());if(e[0].style.top="".concat(e.position().top-d-c,"px"),e.offset().top+l>window.innerHeight+$(document).scrollTop()){var u=t.parents(".popupmenu-wrapper:first").offset().top;e[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-l-u,"px")}e.offset().top-$(document).scrollTop()<0&&(e[0].style.top=0,e[0].style.top="".concat(-1*e.offset().top,"px"),l=s.outerHeight()),e.offset().top+l>window.innerHeight+$(document).scrollTop()&&(l=l-(e.offset().top+l-(window.innerHeight+$(document).scrollTop()))-32,s[0].style.height="".concat(l,"px"))}t.parent().find(".is-submenu-open").removeClass("is-submenu-open"),t.addClass("is-submenu-open")},highlight:function(t){if(t&&t.length){var e=t.parent();e.parent().children("li").removeClass("is-focused"),e.addClass("is-focused"),t&&t.focus(),e.closest(".header").scrollTop(0)}},select:function(t){var e=this.menu.is(".is-selectable"),n=this.menu.is(".is-multiselectable"),i=this.isInSingleSelectSection(t),a=this.isInMultiselectSection(t),s=t.parent(),r=[t];return s.hasClass("is-selectable")&&!t.find(".icon").length||e||i?(s.prevUntil(".heading, .separator").add(s.nextUntil(".heading, .separator")).removeClass("is-checked"),s.addClass("is-checked"),r.push("selected"),r):s.hasClass("is-multiselectable")||n||a?s.hasClass("is-checked")?(s.removeClass("is-checked"),r.push("deselected"),r):(s.addClass("is-checked"),r.push("selected"),r):r},getSelected:function(){return this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(t){return $(t).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(t)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(t){return $(t).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(t){var e=this.getSelectableSeparator(t);return e&&e.length},getAdjacentSelectables:function(t){var e=this.getSelectableSeparator(t),n=":not(.heading):not(.separator):not(.submenu)";return e&&e.length?$(e).nextUntil(".separator").filter(n):$(t).parent().children("li".concat(n))},isInSelectableSection:function(t){B("hasSelectableSeparator()","isInSelectableSection()");var e=t.parent().prevAll().filter(".separator").first();return e.hasClass("multi-selectable-section")||e.hasClass("single-selectable-section")},isInSingleSelectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){var t=this;$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu dragstart.popupmenu"),setTimeout(function(){t.menu&&t.menu.length&&t.menu.off("click.btn-menu.".concat(t.id))},1),$("iframe").each(function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch(t){}})},close:function(t,e){if(t&&void 0!==t||(t=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var n=this.menu.parent(".popupmenu-wrapper"),i=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),n[0]&&(n[0].style.left="-999px",n[0].style.height="",n[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),i[0]&&(i[0].style.left="",i[0].style.top="",i[0].style.height="",i[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[t]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch;var a=!1;if(this.element.is(".colorpicker-editor-button")){var s=this.element.data("toolbaritem")||this.element.data("toolbarflexitem"),r=s?s.toolbarAPI:null;r&&r.overflowedItems.forEach(function(t){"colorpicker"===t.type&&(a=!0)})}e||!this.settings.returnFocus||m.features.touch||a||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){var t;if(!this.menu||!this.menu.length||!this.menu.parent())return this;var e=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var n=null===(t=this.menu[0])||void 0===t||null==t?void 0:t.id,i=$('[aria-controls="'.concat(n,'"]')).not(this.element),a=$(".datagrid-filter-wrapper");if(!i.length||a.length>0){var s=this.menu.parent();s.find(".arrow").remove(),s.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&s.removeClass("bottom"),this.preExistingWrapper||!this.menu.parent().is(".popupmenu-wrapper")||i.length||this.menu.unwrap();var r=this.element.parent().children(".searchfield");r.length?this.menu.insertAfter(r.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each(function(t,e){var n=$(e).find("span").text()||$(e).text();$(e).find("span, svg").remove(),$(e).text(n)}),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each(function(){var t;(t=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&t.unwrap()}),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),e.off().remove()}return this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(t){return this.settings=C.mergeSettings(this.element[0],t,this.settings),this.teardown().init()},destroy:function(){var t;this.menu&&(this.close(),this.teardown(),null===(t=this.menu)||void 0===t||null==t||t.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(t){return this.each(function(){var e=$.data(this,"popupmenu");e?e.updated(t):e=$.data(this,"popupmenu",new Wt(this,t))})};var Ut={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function Gt(t,e){this.settings=C.mergeSettings(t,e,Ut),this.element=$(t),this.init()}Gt.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==t?t.toString():this.settings.appName;var e=this.element.attr("data-about-content");this.settings.content=void 0!==e?e.toString():this.settings.content;var n=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==n?n.toString():this.settings.copyrightYear;var i=this.element.attr("data-device-specs");i&&(this.settings.deviceSpecs="true"===i);var a=this.element.attr("data-product-name");this.settings.productName=void 0!==a?a.toString():this.settings.productName;var s=this.element.attr("data-use-default");void 0!==s&&(this.settings.useDefaultCopyright="true"===s);var r=this.element.attr("data-version");return this.settings.version=void 0!==r?r.toString():this.settings.version,this.defaultCopyright="".concat(R.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var t=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon btn-close hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(R.translate("Close"),"'</span>"))).appendTo(t),$.createIconElement({icon:"logo-trademark",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(t),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var e=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var n=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(n).appendTo(e)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(e),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(e),this.settings.deviceSpecs){var i=this.getDeviceSpecs(),a='<span class="ds">'.concat(R.translate("OperatingSystem")," : ").concat(m.devicespecs.os.replace(m.devicespecs.currentOSVersion,"")," ").concat(m.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(R.translate("Platform")," : ").concat(i.os,'</span><br>\n        <span class="ds">').concat(R.translate("Mobile")," : ").concat(m.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(R.translate("Locale")," : ").concat(R.currentLocale.name,'</span><br>\n        <span class="locale">').concat(R.translate("Language")," : ").concat(R.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(R.translate("Browser")," :"," ".concat(m.devicespecs.browserVersionName)," ").concat(m.devicespecs.currentBrowser," (").concat(m.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(R.translate("BrowserLanguage")," : ").concat(i.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(R.translate("CookiesEnabled")," : ").concat(i.cookiesEnabled,'</span><br>\n        <span class="version">').concat(R.translate("Version")," : ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p".concat(R.isRTL()?' dir="rtl"':"","></p>")).html(a).appendTo(e)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",function(){$(this).removeClass("hide-focus")}),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click",attributes:this.settings.attributes}),this.modal.data("modal").aboutAPI=this,this},getDeviceSpecs:function(){var t,e,n,i="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(t=navigator.userAgent,e=[],n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE '".concat(e[1])):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:i}},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this},close:function(){if(this.isBody)this.destroy();else{var t=this.modal.data("modal");t&&t.close()}},destroy:function(t){if(this.buttons.off(),this.element.off("open.about"),!0!==t){var e=this.modal.data("modal");e&&(e.element.off("beforeopen.about"),e.aboutAPI=null,e.destroy())}this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function(){var t=this;return this.element.on("open.about",function(e){e.stopPropagation(),t.element.trigger("click")}),this.buttons.filter('[name="done"], [name="close"]').on("click.about",function(){t.close()}),this.modal.data("modal").element.on("beforeopen.about",function(){t.modal.find(".modal-body").scrollTop(0)}),this}},$.fn.about=function(t){return this.each(function(){var e=$.data(this,"about");e?e.updated(t):e=$.data(this,"about",new Gt(this,t))})};var Yt={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(t){var e=$.fn.transitionEndName();return t=C.mergeSettings(void 0,t,Yt),this.each(function(){var n,i=this,a=$(this),s="horizontal"===t.direction?"width":"height",r=s.charAt(0).toUpperCase()+s.slice(1),o=isNaN(t.distance)?"auto":"".concat(parseInt(t.distance,10),"px");function l(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(e,".animateopen")),i.style.transition="",i.style[s]=o,a.trigger("animateopencomplete")}a.one("animateopenstart.animation",function(t){t.stopPropagation(),a.off("".concat(e,".animateopen"))}),a.trigger("animateopenstart"),e&&a.one("".concat(e,".animateopen"),l),a.data("is-animating",!0);var c=this.style[s];this.style[s]=o;var d=getComputedStyle(this)[s];this.style[s]=c,this["offset".concat(r)],this.style.transition="".concat(s," ").concat(t.timing,"ms ").concat(t.transition),n=setTimeout(l,t.timing),this.style[s]=d,(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&l()})};var Kt={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(t){var e=$.fn.transitionEndName();return t=C.mergeSettings(void 0,t,Kt),this.each(function(){var n,i=this,a=$(this),s="horizontal"===t.direction?"width":"height",r=s.charAt(0).toUpperCase()+s.slice(1);function o(){n&&clearTimeout(n),a.data("ignore-animation-once")&&$.removeData(a[0],"ignore-animation-once"),a.data("is-animating")&&$.removeData(a[0],"is-animating"),a.off("".concat(e,".animatedclosed")),i.style.transition="",i.style[s]="0px",a.trigger("animateclosedcomplete")}a.one("animateclosedstart",function(t){t.stopPropagation(),a.off("".concat(e,".animatedclosed"))}),a.trigger("animateclosedstart"),e&&a.one("".concat(e,".animatedclosed"),o),a.data("is-animating",!0),this.style[s]=getComputedStyle(this)[s],this["offset".concat(r)],this.style.transition="".concat(s," ").concat(t.timing,"ms ").concat(t.transition),n=setTimeout(o,t.timing),this.style[s]="0px",(a.is(":hidden")||a.is(".no-transition")||a.data("ignore-animation-once"))&&o()})},$.fn.isAnimating=function(){return this.each(function(){return!0===$(this).data("is-animating")})};var Xt=["classic","plus-minus","chevron"],Qt={allowOnePane:!0,expanderDisplay:Xt[0],enableTooltips:!0,rerouteOnLinkClick:!0,source:null};function Jt(t){return void 0!==t.displayChevron&&(B("expanderDisplay setting","displayChevron setting"),!1===t.displayChevron?t.expanderDisplay=Xt[1]:t.expanderDisplay=Xt[0],delete t.displayChevron),t}function Zt(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Qt),this.settings=Jt(this.settings),this.init()}Zt.prototype={init:function(t){this.build(t).handleEvents(t).setupTooltips()},build:function(t,e){var n,i,a,s=this,r=this,o=!0;t&&t instanceof jQuery?(n=t.children("a"),a=(i=t.next(".accordion-pane")).children(".accordion-content"),o=!1,this.headers=this.headers.add(t),this.anchors=this.anchors.add(n),this.panes=this.panes.add(i),this.contentAreas=this.contentAreas.add(a)):(this.headers=this.element.find(".accordion-header"),t=this.element.find(".accordion-header"),this.anchors=t.children("a"),n=this.anchors,this.panes=t.next(".accordion-pane"),i=this.panes,this.contentAreas=i.children(".accordion-content"),a=this.contentAreas);var l=$(".accordion-content").find("textarea");l&&l.parents(".accordion-pane").attr("style","display: block");var c=!1;if(t.each(function(){var t=$(this),e=!1,n=t.parent(),i=n.is(".accordion");function a(){i||(e?n.addClass("has-icons"):t.addClass("no-icon"))}t.hideFocus(),t.children("a").find("svg").detach().insertBefore(t.children("a"));var s=t.children(".icon, svg");if(s.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),i&&s.length&&(c=!0),(t.is(".list-item")||!i&&t.find("button").length||!i&&t.find("svg").length)&&(e=!0),t.hasClass("is-disabled")&&t.children("a, button").attr("tabindex","-1"),t.next(".accordion-pane").length){e=!0;var o=t.children(".btn");if(!o.length){o=$('<button class="btn" type="button"></button>');var l="insertBefore";"plus-minus"!==r.settings.expanderDisplay&&i&&(t.addClass("has-chevron"),l="insertAfter"),o[l](t.children("a")),t.data("addedExpander",o)}o.hideFocus(),s.length&&"plus-minus"===r.settings.expanderDisplay&&s.appendTo(o);var d=o.children(".icon, .svg, .plus-minus");if(!d.length){if("classic"===r.settings.expanderDisplay&&i||"chevron"===r.settings.expanderDisplay)d=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var u=r.isExpanded(t)?" active":"";d=$('<span class="icon plus-minus'.concat(u,'" aria-hidden="true" role="presentation"></span>'))}d.appendTo(o)}var h={role:"presentation","aria-hidden":"true"};d.is("span")||(h.focusable="false"),d.attr(h),d.is(".chevron")&&i?(t.addClass("has-chevron"),o.insertAfter(t.children("a"))):(t.removeClass("has-chevron"),o.insertBefore(t.children("a"))),"plus-minus"===r.settings.expanderDisplay&&i&&(c=!0),a()}else a()}),c&&this.element.addClass("has-icons"),o&&!this.element.data("updating")){var d=t.filter(".is-selected, .is-expanded");d.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(d=d.first(),this.expand(d)):d.each(function(t){s.expand($(d[t]))}),this.select(d.last()),d.next(".accordion-pane").removeClass("no-transition")}return i.each(function(){var t=$(this),n=t.prev(".accordion-header");n.children("a").attr({"aria-haspopup":"true",role:"button"});var i=t.children(),a=!0;if(i.each(function(t,e){$(e).is(".accordion-header, .accordion-content")&&!$(e).hasClass("filtered")&&(a=!1)}),t[a?"addClass":"removeClass"]("all-children-filtered"),a&&(t.data("ignore-animation-once",!0),r.collapse(n,!1)),!e){var s="0px";r.isExpanded(n)&&(s="auto"),t.attr("style","height: ".concat(s))}}),e||(this.currentlyFiltered=$()),this},handleHeaderClick:function(t,e){if(!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||e.data("is-animating"))t.preventDefault();else{if(!$(t.target).is('[class^="btn"]')){var n=e.children("a");return this.handleAnchorClick(t,n)}t.preventDefault()}},handleAnchorClick:function(t,e){var n,i=this,a=e.parent(".accordion-header"),s=a.next(".accordion-pane"),r=e.attr("ng-reflect-href");return t&&!r&&t.preventDefault(),!(!a.length||this.isDisabled(a)||this.isFiltered(a))&&(!1!==this.element.triggerHandler("beforeselect",[e])?(this.originalSelection=e,this.select(e),this.closePopups(t),!(n=e.attr("href"))||""===n||"#"===n||i.settings.rerouteOnLinkClick&&(window.location.href=n,0)?s.length?(i.toggle(a),i.focusOriginalType(a),!0):(this.isControllingDetails?s.length||i.element.trigger("drilldown",[a[0]]):(i.orignalSelection=e,i.focusOriginalType(a)),this.element.trigger("selected",a),!0):(this.element.trigger("followlink",[e]),!0)):void 0)},closePopups:function(t){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each(function(){return $(this).data("popupmenu").close(),void 0!==t&&(t.stopPropagation(),t.stopImmediatePropagation()),!1})},handleExpanderClick:function(t,e){var n=e.parent(".accordion-header");if(n.length&&!this.isDisabled(n)&&!this.isFiltered(n)&&!n.data("is-animating"))return this.originalSelection=e,t&&t.stopPropagation(),this.closePopups(),n.next(".accordion-pane").length?(this.toggle(n),this.select(n),void this.focusOriginalType(n)):this.handleAnchorClick(t,n.children("a"))},handleKeys:function(t){var e=this,n=t.which,i=$(t.target),a=i.parent(),s=a.children('[class^="btn"]').first(),r=a.children("a"),o=document.querySelectorAll(".accordion-pane");function l(t){t||(t=i),e.originalSelection||(e.originalSelection=t)}if(9===n){this.headers.removeClass("is-selected");var d=c(o).filter(function(t){return!t.classList.contains("is-expanded")});c(o).filter(function(t){return t.classList.contains("is-expanded")}).forEach(function(t){c(t.children).forEach(function(t){$(t).hasClass("is-disabled")||($(t).find("a").removeAttr("tabindex"),$(t).find("button").removeAttr("tabindex"))})}),d.forEach(function(t){c(t.children).forEach(function(t){$(t).find("a").attr("tabindex","-1"),$(t).find("button").attr("tabindex","-1")})}),i.is("a")&&s.length?l(s):l(r)}if(32===n){if(t.preventDefault(),i.is('[class^="btn"]')&&(t.stopPropagation(),t.stopImmediatePropagation(),$("html").hasClass("is-firefox")))return;return s.length?(l(s),this.handleExpanderClick(null,i)):(l(r),this.handleAnchorClick(null,i))}return 37===n||38===n?(t.preventDefault(),l(),t.shiftKey?this.ascend(a):this.prevHeader(a)):39===n||40===n?(t.preventDefault(),l(),t.shiftKey?this.descend(a):this.nextHeader(a)):void 0},toData:function(t,e){var n=[];return this.element.children(".accordion-header").each(function(i,a){!function n(i,a,s,r){var o=$(i),l=$(i).next(".accordion-pane"),c=i.classList.contains("accordion-content"),d={index:"".concat(void 0!==s?"".concat(s,"."):"").concat(a),type:c?"content":"header"};e&&(d.element=i),i.getAttribute("id")&&(d.id=i.getAttribute("id")),c?(d.content="".concat(o.html()),d.contentText="".concat(o.text().trim().replace(/\n|\s{2,}/g," "))):d.text=o.children("a, span").text().trim();var u=o.children(".icon");if(u.length&&(d.icon="svg"===u[0].tagName.toLowerCase()?u[0].getElementsByTagName("use")[0].getAttribute("href"):""),o.hasClass("is-disabled")&&(d.disabled=!0),l.length){var h=l.children(".accordion-header, .accordion-content"),p=[];if(h.length){var f=p;t&&(f=r),h.each(function(t,e){n(e,t,d.index,f)}),d.children=p}}r.push(d)}(a,i,void 0,n)}),n},select:function(t){if(t&&t.length){var e=t,n=e.parent();t.is(".accordion-header")&&(e=(n=t).children("a")),e.is('[class^="btn"]')&&(e=t.next("a")),this.isDisabled(n)||this.isFiltered(n)||(this.headers.removeClass("child-selected").removeClass("is-selected"),n.addClass("is-selected"),n.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected"))}},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(t){return!!this.element.hasClass("is-disabled")||!!t&&t.hasClass("is-disabled")},isFiltered:function(t){if(!t||!t.length)return!1;var e=t[0].classList;return e.contains("filtered")&&!e.contains("has-filtered-children")},isExpanded:function(t){if(t&&t instanceof Element&&(t=$(t)),t&&t.length)return"true"===t.children("a").attr("aria-expanded")||t.hasClass("is-expanded")},toggle:function(t){var e=this;!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||this.isAnimating||(this.isAnimating=!0,setTimeout(function(){e.isAnimating=!1},500),this.isExpanded(t)?this.collapse(t):this.expand(t))},expand:function(t,e){if("string"==typeof t&&(t=this.element.find("#".concat(t)).first()),t&&t.length){var n=this,i=t.next(".accordion-pane"),a=t.children("a"),s=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[a])?s.reject():(this.callSource(a,r)||r.apply(this),s)}function r(){if(!(i=t.next(".accordion-pane"))||!i.length)return s.reject();var r=t.children(".btn");r.length&&(r.children(".plus-minus, .chevron").addClass("active"),r.children(".audible").text(R.translate("Collapse")));var o=t.parentsUntil(n.element).filter(".accordion-pane").prev(".accordion-header").add(t),l=[];n.settings.allowOnePane&&!e&&n.headers&&n.headers.not(o).each(function(){var t=$(this);n.isExpanded(t)&&l.push(n.collapse(t))});var c=[];function d(t){var e;t&&t.stopPropagation(),(e=$).when.apply(e,c.concat(l)).done(function(){s.resolve()}),i.triggerHandler("afterexpand",[a]),n.element.trigger("afterexpand",[a])}o&&o.not(t).each(function(){var t=$(this);n.isExpanded(t)||c.push(n.expand(t))}),t.add(i).addClass("is-expanded"),t.children("a").attr("aria-expanded","true"),n.element.trigger("expand",[a]),i.hasClass("no-transition")?d():i.one("animateopencomplete",d).animateOpen()}},expandAll:function(){var t;if(!0!==this.settings.allowOnePane){var e=this,n=$.Deferred(),i=[];return this.headers.each(function(){var t=$(this);e.isExpanded(t)||i.push(e.expand(t))}),(t=$).when.apply(t,i).always(function(){n.resolve()}),n}},collapse:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof t&&(t=this.element.find("#".concat(t)).first()),t&&t.length){var n=this,i=t.next(".accordion-pane"),a=t.children("a"),s=$.Deferred(),r=this.element.triggerHandler("beforecollapse",[a]);if(!1===r)return s.reject();var o=t.children(".btn");return o.length&&(o.children(".plus-minus, .chevron").removeClass("active"),o.children(".audible").text(R.translate("Expand"))),e&&i.closeChildren(),n.element.trigger("collapse",[a]),i.hasClass("no-transition")?l():i.one("animateclosedcomplete",l).animateClosed(),s}function l(e){e&&e.stopPropagation(),t.add(i).removeClass("is-expanded"),a.attr("aria-expanded","false"),i.triggerHandler("aftercollapse",[a]),n.element.trigger("aftercollapse",[a]),s.resolve()}},collapseAll:function(){var t,e=this,n=$.Deferred(),i=[];return this.headers.each(function(){var t=$(this);e.isExpanded(t)&&i.push(e.collapse(t))}),(t=$).when.apply(t,i).always(function(){n.resolve()}),n},callSource:function(t,e){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var n=this,i=t.parent(),a=i.next(".accordion-pane"),s={anchor:t,header:i,pane:a};return this.settings.source(s,function(t,i){!0!==t&&n.updated(i),setTimeout(function(){e.apply(n)},1)})},getElements:function(t){var e,n,i,a,s=$(t);return s.is(".accordion-header")&&(e=s,i=s.children('[class^="btn"]'),n=s.children("a")),s.is(".btn")&&(n=(e=(i=s).parent()).children("a")),s.is("a")&&(i=(e=(n=s).parent()).children(".btn")),a=e.next(".accordion-pane"),{header:e,expander:i,anchor:n,pane:a}},prevHeader:function(t,e){var n=this.getElements(t),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get(u.ensureAlphaNumeric(a)-1));if(!i.length||0===a){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);s=i.last()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":first-child"))return this.ascend(n.header);s=s.prev()}if(s.is(".accordion-pane")){var r=s.prev(".accordion-header");if(this.isExpanded(r)&&r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r,-1);if(!(s=r).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header);for(s=i.last();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.prev()}}this.focusOriginalType(s)},nextHeader:function(t,e){var n=this.getElements(t),i=n.header.parent().children(),a=i.index(n.header),s=$(i.get(u.ensureAlphaNumeric(a)+1));if(!i.length||a===i.length-1){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);s=i.first()}for(;s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);){if(s.is(":only-child")||s.is(":last-child"))return this.ascend(n.header);s=s.next()}if(s.is(".accordion-pane")){var r=s.prev(".accordion-header");if(this.isExpanded(r)&&r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r);if(!(s=$(i.get(u.ensureAlphaNumeric(a)+2))).length){if(n.header.parent(".accordion-pane").length)return this.ascend(n.header,-1);for(s=i.first();s.is(".accordion-content")||this.isDisabled(s)||this.isFiltered(s);)s=s.next()}}this.focusOriginalType(s)},ascend:function(t,e){e||(e=0);var n=t.parent(".accordion-pane"),i=n.prev();if(-1===e&&!(i=n.next(".accordion-header")).length)return n.parent(".accordion").length?this.nextHeader(n.prev().children("a"),!0):this.ascend(n.prev(),-1);this.focusOriginalType(i)},descend:function(t,e){e||(e=0);var n=t.next(".accordion-pane"),i=n.children(".accordion-header").first();return-1===e&&(i=n.children(".accordion-header").last()),i.length?this.isExpanded(i)?this.descend(i,-1):void this.focusOriginalType(i):this.focusOriginalType(t)},focusOriginalType:function(t){var e=t.children('[class*="btn"]');this.headers.not(t).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&e.length?e.first()[0].focus():(t.children("a")[0].focus(),t.addClass("is-focused").removeClass("hide-focus"))},filter:function(t){var e=this;if(t){var n=this;this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var i=t.not(this.currentlyFiltered),a=$(),s=$();this.headers.add(this.contentAreas).not(i).addClass("filtered"),i.each(function(t,e){var n=$(e).is(".accordion-content"),i=$(e).parents(".accordion-pane");if(n){s.push($(e));var r=$(i[0]).prev(".accordion-header").filter(function(t,e){return-1===a.index(e)});r.length&&(a=a.add(r))}if(i.length){var o=i.prev(".accordion-header").filter(function(t,e){return-1===i.index(e)});a=a.add(o)}}),a.addClass("has-filtered-children");var r=this.expand(a,!0);$.when(r).done(function(){e.currentlyFiltered=i,n.build(void 0,!0)})}},unfilter:function(t,e){var n=this;if(this.currentlyFiltered.length||e){t&&t.length||(t=this.currentlyFiltered);var i=$();this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),t.each(function(t,e){var n=$(e).parents(".accordion-pane");if(n.length){var a=n.prev(".accordion-header").filter(function(t,e){return-1===i.index(e)});i=i.add(a)}}),i.removeClass("has-filtered-children");var a=[this.collapse(t),this.collapse(i)];$.when(a).done(function(){n.currentlyFiltered=n.currentlyFiltered.not(t)})}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(t,e){this.element.data("updating",!0),e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings),this.settings=Jt(this.settings));var n=$(document.activeElement);return $.contains(this.element[0],n[0])||(n=void 0),t&&t instanceof jQuery?this.teardown(t).init(t):this.teardown().init(),n&&n.length&&n.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(t){var e=!1,n=t;return this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),t&&t instanceof jQuery||(n=this.headers,e=!0),n&&n.length&&(n.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each(function(){var t=$(this),e=t.children(".icon"),n=t.data("hidefocus");if(n&&n.destroy(),e.length){var i=e.data("icon");i&&i.destroy()}var a=t.data("addedExpander");a&&(a.remove(),$.removeData(this,"addedExpander"))}),n.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),n.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion")),e&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(t){var e=this,n=null,i=t,a=!1;function s(t,n){var i=function(t){var e="Header";return t.is("a")&&(e="Anchor"),t.is("button")&&(e="Expander"),e}(n);return $("body").children().not(".application-menu, .modal-page-container, .page-container").closeChildren(),e["handle".concat(i,"Click")](t,n)}return t&&t instanceof jQuery||(i=this.headers,a=!0),i.on("click.accordion",function(t){return s(t,$(this))}).on("focusin.accordion",function(t){var n=$(t.target);e.originalSelection||(e.originalSelection=n),i.not($(this)).removeClass("is-focused"),n.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")}).on("focusout.accordion",function(){$.contains(this,n)&&!$(this).is($(n))||$(this).removeClass("is-focused")}).on("keydown.accordion",function(t){e.handleKeys(t)}).on("mousedown.accordion",function(t){$(this).addClass("is-focused").removeClass("hide-focus"),n=t.target}).on("mouseup.accordion",function(){n=null}),i.children('[class^="btn"]').on("click.accordion",function(t){return s(t,$(this))}).on("keydown.accordion",function(t){e.handleKeys(t)}),a&&this.element.on("selected.accordion",function(t){t.stopPropagation()}).on("updated.accordion",function(t,n){t.stopPropagation(),e.updated(n)}),this},hideTooltip:function(){var t=this,e=window;e.tooltip&&(this.removeTooltipData(e.tooltip),e.tooltip.classList.add("is-hidden"),e.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",function(){t.hideTooltip()})},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("spantooltip")&&$.removeData(t[0],"spantooltip")},setupTooltips:function(){if(this.settings.enableTooltips){var t,e=this,n=".accordion-header a span";this.element.off("mouseenter.spantooltip",n).on("mouseenter.spantooltip",n,function(){var e;(e=this).style.width="auto",e.offsetWidth>e.parentElement.offsetWidth-parseInt($(e).parent().css("padding-left"),10)&&(e.style.width="",t=setTimeout(function(){$(e).tooltip({trigger:"immediate",content:"".concat(e.innerText),extraClass:"tooltip-accordion-style"})},400))}).off("mouseleave.spantooltip click.spantooltip",n).on("mouseleave.spantooltip click.spantooltip",n,function(){var n;(n=this).style.width="auto",n.offsetWidth>n.parentElement.offsetWidth-parseInt($(n).parent().css("padding-left"),10)&&(n.style.width="",e.hideTooltip(),clearTimeout(t))})}}},$.fn.accordion=function(t){return this.each(function(){var e=$.data(this,"accordion");e?e.updated(t):e=$.data(this,"accordion",new Zt(this,t))})};var te={actions:[],attributes:[],autoFocus:!0,breakpoint:"phone-to-tablet",displayAsActionSheet:"responsive",overlayOpacity:.7,onSelect:null,onCancel:null,showCancelButton:!0};function ee(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,te),this.init()}function ne(t,e){return!!function(t){return t&&!(t instanceof jQuery)}(t)&&void 0!==t[e]&&null!==t[e]}function ie(t,e){return!!function(t,e){return ne(t,e)&&"function"==typeof t[e]}(t,e)&&(t[e](),!0)}function ae(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];return"string"==typeof e&&(e=[e]),$.each(t,function(t,s){$.each($(s).data(),function(t,r){n.length&&-1===n.indexOf(t)||e.forEach(function(t){(i&&ie(r,t)||ne(r,t))&&a.push({elem:$(s),control:r})})})}),a}function se(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t&&e){var i=(t=$(t)).find("*").add(t).not(n.join(", ")),a=ae(i,e,void 0,!0);return t.trigger("sift-".concat(e,"-complete"),[a]),t}}ee.prototype={init:function(){this.render(),this.handleEvents()},render:function(){var t=this;document.querySelector("#".concat("ids-actionsheet-root"))||this.renderRootElems();var e=this.element[0];if(e.classList.add("ids-actionsheet-trigger"),C.addAttributes(this.element,this,this.settings.attributes,"trigger"),("BUTTON"===e.tagName||e.className.includes("btn"))&&this.element.button(),!this.actionSheetElem){var n="",i=!1;this.settings.actions.forEach(function(e,a){var s="",r=C.stringAttributes(t,t.settings.attributes,"action-".concat(a));e.icon&&(i=!0,s=$.createIcon({icon:e.icon}));var o='<button class="btn-tertiary ids-action" data-index="'.concat(a,'" ').concat(r,">\n          ").concat(s,'\n          <span class="ids-action-text">').concat(e.text,"</span>\n        </button>");n+=o}),this.settings.showCancelButton&&(n+='<div class="separator"></div>\n        <button class="btn-secondary btn-cancel ids-action">\n          <span>Cancel</span>\n        </button>'),this.actionSheetElem=document.createElement("div"),this.actionSheetElem.setAttribute("role","dialog"),C.addAttributes($(this.actionSheetElem),this,this.settings.attributes,"sheet");var a=this.actionSheetElem.classList;a.add("ids-actionsheet"),i&&a.add("has-icons"),this.actionSheetElem.insertAdjacentHTML("afterbegin",n),this.rootElem.append(this.actionSheetElem),$(this.actionSheetElem).find("button").button()}},renderRootElems:function(){var t=document.createDocumentFragment(),e=document.createElement("div"),n=document.createElement("div");e.id="ids-actionsheet-root",e.classList.add("ids-actionsheet-container"),e.setAttribute("aria-hidden",!0),t.appendChild(e),n.classList.add("overlay"),n.setAttribute("aria-hidden",!0),e.appendChild(n),document.body.appendChild(e),this.rootElem=e,this.overlayElem=n},handleEvents:function(){var t=this;this.element.on("click.trigger",function(){t.visible||t.open()})},get visible(){return this.popupmenuAPI?this.hasOpenPopupMenu:this.rootElem.classList.contains("engaged")},get actionElems(){return c(this.actionSheetElem.querySelectorAll("button")).filter(function(t){return!t.classList.contains("btn-cancel")})},open:function(){var t=this;this.visible||(this.currentlyNeedsActionSheet?(this.rootElem.classList.add("engaged"),this.overlayElem.removeAttribute("hidden"),window.requestAnimationFrame(function(){t.setOverlayVisibility(),t.addActionSheetOpenEvents(),t.element[0].removeAttribute("aria-hidden"),t.focus()})):this.openPopupMenu())},openPopupMenu:function(){var t=this,e=C.stringAttributes(this,this.settings.attributes,"menu"),n="<ul ".concat(e,">");this.settings.actions.forEach(function(t,e){var i="";t.icon&&(i=$.createIcon({icon:t.icon}));var a='<li class="ids-action-menu-item" data-index="'.concat(e,'">\n        <a>\n          ').concat(i,'\n          <span class="ids-action-text">').concat(t.text,"</span>\n        </a>\n      </li>");n+=a}),n+="</ul>";var i=$(n).insertAfter(this.element);this.element.popupmenu({autoFocus:this.settings.autoFocus,attributes:this.settings.attributes,menu:i,offset:{y:10},trigger:"immediate",removeOnDestroy:!0}),this.hasPopupmenuEvents=!0,$(this.element).on("selected.popupmenu",function(e,n){var i=parseInt($(n.parent()).attr("data-index"),10);if(!isNaN(i)){var a=t.actionSheetElem.children[i];a&&t.doSelect(a,null,!0)}}).on("afteropen.popupmenu",function(){t.focus()}).on("close.popupmenu",function(e,n){n?t.doCancel(null,!1,n):t.close()})},get popupmenuAPI(){return $(this.element).data("popupmenu")},get hasOpenPopupMenu(){var t;return null===(t=this.popupmenuAPI)||void 0===t||null==t?void 0:t.isOpen},close:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hasPopupmenuEvents)return this.closePopupMenu(e),void(n&&this.focus());this.visible&&(this.removeActionSheetOpenEvents(),this.element[0].setAttribute("aria-hidden","true"),this.rootElem.classList.remove("engaged"),this.setOverlayVisibility(),C.waitForTransitionEnd(this.overlayElem,"opacity").then(function(){t.overlayElem.setAttribute("hidden",""),t.triggerCloseEvent(e),n&&t.focus()}))},closePopupMenu:function(t){this.removePopupmenuEvents(),this.triggerCloseEvent(t)},removePopupmenuEvents:function(){this.hasPopupmenuEvents&&($(this.element).off("selected.popupmenu close.popupmenu afteropen.popupmenu"),delete this.hasPopupmenuEvents)},cancel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close("cancel",t)},triggerCloseEvent:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t="cancel"===e?jQuery.Event("cancelled"):jQuery.Event("close"),this.element.trigger(t,[$(this.actionSheetElem)])},focus:function(){if(this.settings.autoFocus)if(this.hasOpenPopupMenu){var t=this.popupmenuAPI.menu[0].querySelector("a");t&&(t.focus(),this.popupmenuAPI.highlight($(t)))}else if(this.visible){var e=this.actionSheetElem.querySelector("button");e&&(e.focus(),this.resetFocusState(e))}else this.element[0].focus()},get currentlyNeedsActionSheet(){var t=this.settings.breakpoint,e=this.settings.displayAsActionSheet;return"always"===e||"responsive"===e&&p.isBelow(t)},addActionSheetOpenEvents:function(){var t=this;$(document).on("click.disengage",function(e){e.target.closest(".ids-actionsheet")||t.doCancel(null,!1,!1)}),$(this.actionSheetElem).on("click.action","button",function(e){var n=e.currentTarget;n.classList.contains("btn-cancel")?t.doCancel(n,!1,!0):t.doSelect(n,!0),t.focus()}).on("keyup.action",function(e){if(e.target.closest(".ids-actionsheet"))switch(e.key){case"Escape":t.doCancel(null,!1,!1)}}).on("focusin.action","button",function(e){t.resetFocusState(e.target.closest(".ids-action"))}).on("focusout.action","button",function(e){t.resetFocusState(e.target.closest(".ids-action"))})},doSelect:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=$(t);"function"==typeof this.settings.onSelect&&this.settings.onSelect(i),this.close(null,n),e&&$(this.element).trigger("selected",[i,null,!0])},doCancel:function(t,e,n){var i=$(t);"function"==typeof this.settings.onCancel&&this.settings.onCancel(i),this.cancel(n),e&&$(this.element).trigger("cancelled",[i])},resetFocusState:function(t){var e=$(t);e.data("hide-focus")||e.hideFocus(),e.addClass("hide-focus")},removeActionSheetOpenEvents:function(){$(document).off("click.disengage"),$(this.actionSheetElem).off("click.action keyup.action")},setOverlayVisibility:function(){var t=0;this.visible&&(t=this.settings.overlayOpacity),this.overlayElem.style.opacity=t?"".concat(t):""},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.init()},teardown:function(){this.visible&&this.close(),this.element.off("click.trigger"),this.actionSheetElem&&($(this.actionSheetElem).find("button").destroy(),this.actionSheetElem.remove()),this.element[0].classList.remove("ids-actionsheet-trigger")},destroy:function(){this.teardown(),$.removeData(this.element[0],"actionsheet")}},$.fn.actionsheet=function(t){return this.each(function(){var e=$.data(this,"actionsheet");return e?e.updated(t):e=$.data(this,"actionsheet",new ee(this,t)),e})};var re=[".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],oe=[];$.fn.destroy=function(){return se($(this),"destroy")},$.fn.closeChildren=function(){return se($(this),"close",re)},$.fn.handleResize=function(){return se($(this),"handleResize",oe)};var le={trigger:null,bottomBorder:!1,animationSpeed:300,attributes:null};function ce(t,e){this.settings=C.mergeSettings(t,e,le),this.element=$(t),this.init()}ce.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var t,e,n=this,i=this.element.hasClass("is-expanded");return(this.expander||this.header).attr({"aria-expanded":"".concat(i),"aria-controls":"".concat(this.id,"-content")}),this.header.attr({id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=(t=this,!0===this.isCard?((e=t.header.find("expandable-expander")).length||(e=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(R.translate("ShowMore"),"</span>")+"</a>").appendTo(t.header)),e):((e=t.footer.find(".expandable-expander")).length||(e=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(R.translate("ShowMore"),"</span>")+"</a>").prependTo(t.footer)),e)),this.expander.attr("href","#").hideFocus(),this.expander.attr("role","button"),0===this.expander.length&&("string"==typeof this.settings.trigger?this.expander=$("#".concat(this.settings.trigger)):this.settings.trigger instanceof jQuery?this.expander=this.settings.trigger:this.expander=$(this.settings.trigger)),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),i&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",function(){n.content.removeClass("no-transition")}),this.open()),i||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",function(){n.content.removeClass("no-transition")}),this.close()),this.resize(),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.header,this,this.settings.attributes,"header",!0),C.addAttributes(this.content,this,this.settings.attributes,"content",!0),C.addAttributes(this.expander,this,this.settings.attributes,"expander",!0),C.addAttributes(this.footer,this,this.settings.attributes,"footer",!0),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var t=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),(this.expander||this.header).attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(R.translate("ShowLess")?R.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",function(){t.element.triggerHandler("afterexpand",[t.element])}).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var t=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(R.translate("ShowMore")?R.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",function(){t.element.removeClass("is-expanded"),(t.expander||t.header).attr("aria-expanded","false"),t.element.triggerHandler("aftercollapse",[t.element]),t.content[0].style.display="none"}).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var t=this,e=$("html").hasClass("ie11");setTimeout(function(){e&&t.element.hasClass("is-expanded")?t.element.css("min-height",t.element.children(".expandable-pane").outerHeight(!0)+t.element.children(".expandable-footer").outerHeight(!0)):e&&!t.element.hasClass("is-expanded")&&t.element.css("min-height","auto")},300)},resize:function(){var t=this;$("body").on("resize.expandablearea",function(){t.applyIE11Fix()})},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){(this.expander||this.header).removeAttr("aria-controls").removeAttr("aria-expanded"),this.header.children("a").off(),this.header.off(),this.header.removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this},handleEvents:function(){var t=this;return this.expander.on("click.expandablearea",function(e){t.isDisabled()||(e.preventDefault(),t.toggleExpanded())}),this}},$.fn.expandablearea=function(t){return this.each(function(){var e=$.data(this,"expandablearea");e?e.updated(t):e=$.data(this,"expandablearea",new ce(this,t))})};var de=setTimeout;function ue(t){return Boolean(t&&void 0!==t.length)}function he(){}function pe(t){if(!(this instanceof pe))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ye(t,this)}function fe(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,pe._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void me(e.promise,t)}ge(e.promise,i)}else(1===t._state?ge:me)(e.promise,t._value)})):t._deferreds.push(e)}function ge(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof pe)return t._state=3,t._value=e,void ve(t);if("function"==typeof n)return void ye((i=n,a=e,function(){i.apply(a,arguments)}),t)}t._state=1,t._value=e,ve(t)}catch(e){me(t,e)}var i,a}function me(t,e){t._state=2,t._value=e,ve(t)}function ve(t){2===t._state&&0===t._deferreds.length&&pe._immediateFn(function(){t._handled||pe._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)fe(t,t._deferreds[e]);t._deferreds=null}function be(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function ye(t,e){var n=!1;try{t(function(t){n||(n=!0,ge(e,t))},function(t){n||(n=!0,me(e,t))})}catch(t){if(n)return;n=!0,me(e,t)}}pe.prototype.catch=function(t){return this.then(null,t)},pe.prototype.then=function(t,e){var n=new this.constructor(he);return fe(this,new be(t,e,n)),n},pe.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},pe.all=function(t){return new pe(function(e,n){if(!ue(t))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var a=i.length;function s(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,function(e){s(t,e)},n)}i[t]=r,0==--a&&e(i)}catch(t){n(t)}}for(var r=0;r<i.length;r++)s(r,i[r])})},pe.allSettled=function(t){return new this(function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var a=i.length;function s(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void r.call(n,function(e){s(t,e)},function(n){i[t]={status:"rejected",reason:n},0==--a&&e(i)})}i[t]={status:"fulfilled",value:n},0==--a&&e(i)}for(var r=0;r<i.length;r++)s(r,i[r])})},pe.resolve=function(t){return t&&"object"==typeof t&&t.constructor===pe?t:new pe(function(e){e(t)})},pe.reject=function(t){return new pe(function(e,n){n(t)})},pe.race=function(t){return new pe(function(e,n){if(!ue(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,a=t.length;i<a;i++)pe.resolve(t[i]).then(e,n)})},pe._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){de(t,0)},pe._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var we=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"],xe={caseSensitive:!1,filterMode:we[3],searchableTextCallback:void 0};function Ce(t){this.settings=C.mergeSettings(void 0,t,xe),this.init()}Ce.prototype={init:function(){for(var t,e,n,i=[{setting:this.settings.filterMode,limits:we,preset:xe.filterMode}],a=0;a<i.length;a++)t=i[a].setting,e=i[a].limits,n=i[a].preset,-1===$.inArray(t,e)&&(t=n);return this.settings.filterMode===we[0]&&B("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(t,e){if(!t)return!1;if(!($.isArray(t)||t instanceof jQuery))return!1;if(!e||"string"!=typeof e||!e.length)return!1;var n=this,i=[],s=!1;return this.settings.caseSensitive||(e=e.toLowerCase()),$.isArray(t)||(t instanceof jQuery||"object"===a(t))&&(t=$.makeArray(t),s=!0),t.forEach(function(t){var a=function(t){var e,i,a,s=!0;if("function"==typeof n.settings.searchableTextCallback)return n.settings.searchableTextCallback(t);"string"==typeof t?e=t:t instanceof $?e=$(t).text():t instanceof HTMLElement?(s=!1,e=t.innerText):(i=t,a="",Object.keys(i).forEach(function(t){var e=a.length?" ":"";a+="".concat(e).concat(i[t])}),e=a);var r=e;return s&&(r=u.sanitizeHTML(e)),r}(t);n.settings.caseSensitive||(a=a.toLowerCase().trim());var s=!1;if(["startsWith","wordStartsWith"].indexOf(n.settings.filterMode)>-1&&(s=function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)if(0===n[i].indexOf(e))return!0;return 0===t.indexOf(e)||e.indexOf(" ")>0&&t.indexOf(e)>0}(a,e)),"phraseStartsWith"===n.settings.filterMode&&0===a.indexOf(e)&&(s=!0),"contains"===n.settings.filterMode&&a.indexOf(e)>=0&&(s=!0),"keyword"===n.settings.filterMode)for(var r=e.split(" "),o=0;o<r.length;o++){var l=r[o];if(a.indexOf(l)>=0){s=!0;break}}null===n.settings.filterMode&&(s=!0),s&&i.push(t)}),s&&(i=$(i)),!(!s&&!i.length)&&i},updated:function(t){return this.settings=C.mergeSettings(void 0,t,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var ke={compile:function t(e,n,i,s){var r,o=t,l="";function c(t,e){return t=t[(e=e.pop?e:e.split(".")).shift()]||"",0 in e?c(t,e):t}n=Array.isArray(n)?n:n?[n]:[],n=s?0 in n?[]:[1]:n;var d=function(){var t="",s=0,d=void 0,u="object"===a(n[r])?n[r]:{};(u=C.extend({},i,u))[""]={"":n[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(e,n,i,r,h,p,f){s?t+=s&&!h||s>1?e:n:(l+=n.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(t,e,n,i,a,s){return e?c(u,e):i?c(u,s):a?o(c(u,s),u):n?"":new Option(c(u,s)).innerHTML}),d=p),h?--s||(f=c(u,f),/^f/.test(a(f))?l+=f.call(u,t,function(t){return o(t,u)}):l+=o(t,f,u,d),t=""):++s})};for(r=0;r<n.length;r++)d();return l}},Te={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(t,e){var n=t,i=!1;if("string"==typeof e.alias&&void 0!==t[e.alias]&&(i=!0,n=t[e.alias]),"contains"===e.filterMode)n=n.replace(new RegExp("("+E.escapeRegExp(e.term)+")","ig"),"<i>$1</i>");else if("keyword"===e.filterMode)for(var a=e.term.split(" "),s=0;s<a.length;s++){var r=a[s];r&&(n=n.replace(new RegExp("("+E.escapeRegExp(r)+")","ig"),"<i>$1</i>"))}else{var o=n,l="".concat(o);e.caseSensitive||(l=R.toLowerCase(l));var c=E.escapeRegExp(e.term),d=l.indexOf(c);d>0?n=o.substr(0,d)+"<i>"+o.substr(d,c.length)+"</i>"+o.substr(c.length+d):0===d&&(n="<i>"+o.substr(0,c.length)+"</i>"+o.substr(c.length))}return i?t[e.alias]=n:t=n,t},resultIteratorCallback:function(t,e){var n="string"==typeof t,i={highlightTarget:"label",index:e,listItemId:"ac-list-option".concat(e)};return n?i.label=t:i=C.extend({},i,t),i.hasValue=void 0!==t.value,i.hasValue&&(i.value=t.value),i},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(t){return"string"==typeof t?t:t.label}};function Ae(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Te),this.init()}Ae.prototype={init:function(){var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"));var e={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(e):this.listFilter=new Ce(e),this.addMarkup(),this.handleEvents()},get isFocused(){var t=document.activeElement,e=this.element[0],n=this.list;return!!(e.isEqualNode(t)||n&&n.length&&n[0].contains(t))},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"}),C.addAttributes(this.element,this,this.settings.attributes)},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(t,e){var n=this;if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield")&&!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var i=this;this.settings.caseSensitive||(t=R.toLowerCase(t)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),C.addAttributes(this.list,this,this.settings.attributes,"list"),i.settings.attributes&&setTimeout(function(){n.list.find("li a").each(function(t){var e=$(this);C.addAttributes(e,i,i.settings.attributes,"list-option".concat(t))})}),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var a=$(this.element.attr("data-tmpl"));this.tmpl=$(a).length?$(a).text():"string"==typeof a?a:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var s=this.listFilter.filter(e,t),r=[];!1!==s&&s.forEach(function(e,n){"string"==typeof e&&(e={label:e,value:e});var a=C.extend(!0,{},e);if(a=i.settings.resultIteratorCallback(a,n),i.settings.highlightMatchedText){var s={filterMode:i.settings.filterMode,caseSensitive:i.settings.caseSensitive,term:t};a.highlightTarget&&(s.alias=a.highlightTarget),i.settings.displayResultsCallback||(a=i.settings.highlightCallback(a,s))}r.push(a)}),this.currentDataSet=r,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(t,e,r):this.settings.displayResultsCallback(r,function(){i.element.trigger("listopen",[r])},t)}},handleListResults:function(t,e,n){var i=this;n.forEach(function(t){if(void 0!==ke){var e=ke.compile(i.tmpl,t);h.append(i.list,e,"*")}}),this.element.trigger("beforepopulated",[n]);var a={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(t){return!0===t.wasFlipped&&(i.list.add(i.element).addClass("is-ontop"),t.y+=1),t}}};if(this.previouslyOpened){var s=this.element.data("popupmenu");s&&s.position()}else this.element.addClass("is-open").popupmenu(a).one("close.autocomplete",function(){i.closeList(!0)});var r=i.list.find("li"),o=$(r[0]).find("span").outerWidth()+20;if(o>parseInt(this.element.outerWidth(),10)){for(var l=0;l<r.length;l++)r.width(o+"px");this.maxWidth=o}if(i.settings.autoSelectFirstItem&&i.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[n]).focus(),!this.previouslyOpened){i.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",function(t){i.select(t)}).on("focusout.".concat("autocomplete"),function(){i.checkActiveElement()});var c=i.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),function(){i.highlight($(this),c)});if(this.settings.offset){var d=this.list.parent()[0];this.settings.offset.left&&(d.style.left="".concat(parseInt(d.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(d.style.top="".concat(parseInt(d.style.top,10)+this.settings.offset.top,"px"))}}var u=C.getArrayFromList(document.querySelectorAll("#ac-is-arialive"));u&&u.forEach(function(t){t.parentNode.removeChild(t)}),h.append(i.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[n])},closeList:function(t){if(this.list)if(this.list.off(["click.".concat("autocomplete"),"keydown.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var e=this.element.data("popupmenu");e&&(t||e.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(t){if(this.isLoading())return t.preventDefault(),!1;if(!this.listIsOpen())return null;function e(t){t.removeClass("is-selected is-focused")}function n(t){t.addClass("is-selected").find("a").focus()}var i=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),a=function(t){var e=t.filter(".is-selected");return 0===e.length&&(e=t.filter(".is-focused")),e}(i);return 40===t.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,e(a),n(i.eq(i.index(a)+1)),t.preventDefault(),t.stopPropagation()),38===t.keyCode&&this.listIsOpen()&&a.length&&(this.noSelect=!0,e(a),n(i.eq(i.index(a)-1)),t.preventDefault(),t.stopPropagation()),9!==t.keyCode&&13!==t.keyCode||!this.listIsOpen()||(a.length?(t.stopPropagation(),t.preventDefault(),this.noSelect=!0,this.select(a)):this.closeList()),null},handleAutocompleteInput:function(t){var e=this;return e.isLoading()?(t.preventDefault(),!1):(this.getDataFromSource().done(function(t,n){e.currentDataSet=n,e.openList(t,n)}),null)},checkActiveElement:function(){var t=this;setTimeout(function(){var e=document.activeElement;t.listIsOpen()&&$.contains(t.list[0],e)||t.element.is(e)||t.element.trigger("safe-blur")},0)},getDataFromSource:function(){var t=this;if(t.isLoading())return!1;var e,n=this.element,i=$.Deferred();function s(e,n,a){return t.lastTerm!==e?i.reject(e):(t.element.triggerHandler("complete"),t.element.trigger("requestend",[e,n]),!1===a?i.reject(e):i.resolve(u.stripTags(e),n))}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(function(){if(!t.isLoading()&&t.isFocused)if(""!==(e=n.val())){var r=a(t.settings.source);if(t.element.triggerHandler("start"),t.element.trigger("requeststart",[e]),t.lastTerm=e,"function"===r)t.settings.source(e,s,t.settings.sourceArguments);else if("object"===r){var o=$.isArray(t.settings.source)?t.settings.source:[t.settings.source];s(e,o,!0)}else if(t.settings.source)if("keyword"===t.settings.filterMode){var l=[],c=function(t){if(0===l.length)l=t;else for(var e=0;e<t.length;e++){for(var n=t[e],i=!1,a=0;a<l.length;a++)for(var s=l[a],r=0;r<Object.getOwnPropertyNames(s).length;r++)if(n[Object.getOwnPropertyNames(n)[r]]===s[Object.getOwnPropertyNames(s)[r]]){i=!0;break}i||l.push(n)}},d=function(t){c(t),s(e,l,!0)},u=e.split(" ");""===u[u.length-1]&&u.splice(-1,1);for(var h=0;h<u.length;h++){var p=u[h];if(p.length>0){var f=t.settings.source.toString(),g=$.getJSON(f+p);h<u.length-1?g.done(c).fail(c):g.done(d).fail(d)}}}else{var m=t.settings.source.toString();$.getJSON(m+e).done(function(t){s(e,t,!0)}).fail(function(){s(e,[],!1)})}else i.reject(e)}else t.element.data("popupmenu")&&t.element.data("popupmenu").close()},t.settings.delay),i},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(t,e){var n=this.element.val(),i=t.text().trim();t.find(".display-value").length>0&&(i=t.find(".display-value").text().trim()),e&&e.length&&e.parent("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(i).focus(),n!==i&&this.element.triggerHandler("change")},select:function(t,e){var n,i,s={},r=!1;t instanceof $.Event?(r=!0,n=$(t.currentTarget)):n=t,n.is("li")&&(i=n,n=n.children("a"));var o=(i=n.parent("li")).attr("data-index"),l=i.attr("data-value");if(this.element.attr("aria-activedescendant",i.attr("id")),e&&e.length||(e=this.currentDataSet),o)s=e[parseInt(o,10)];else if(l)for(var c,d=0;d<e.length;d++)(c="object"===a(e[d])&&void 0!==e[d].value?e[d].value.toString():e[d].toString())===l&&("object"===a(e[d])&&(s=e[d]),s.value=c);return s.value&&0!==!s.value.length||(s.value=n.text().trim()),this.highlight(n),this.noSelect=!0,s.label=u.stripHTML(s.label),s.highlightTarget||(s.highlightTarget="label",s.index=parseInt(o,10),s.listItemId="ac-list-option"+s.index,s.hasValue=!0),this.element.trigger("selected",[n,s]),r&&t.preventDefault(),this.closeList(),this.element.focus(),s},handleAfterListOpen:function(){var t=this;return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this.list.on("keydown.".concat("autocomplete"),function(e){"Enter"===e.key&&t.handleAutocompleteKeydown(e)}),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t&&t.source&&(this.settings.source=t.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var t=this.element.data("popupmenu");return t&&t.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function(){var t=this;this.element.on("updated.".concat("autocomplete"),function(){t.updated()}).on("keydown.".concat("autocomplete"),function(e){t.handleAutocompleteKeydown(e)}).on("input.".concat("autocomplete"),function(e){t.handleAutocompleteInput(e)}).on("focus.".concat("autocomplete"),function(){t.handleAutocompleteFocus()}).on("focusout.".concat("autocomplete"),function(){t.checkActiveElement()}).on("listopen.".concat("autocomplete"),function(){t.handleAfterListOpen()}).on("resetfilter.".concat("autocomplete"),function(){t.resetFilters()})}},$.fn.autocomplete=function(t){return this.each(function(){var e=$.data(this,"autocomplete");if("string"==typeof e){var n="".concat(e),i=C.extend({},t,{source:n||t.source});e=$.data(this,"autocomplete",new Ae(this,i))}else e?e.updated(t):e=$.data(this,"autocomplete",new Ae(this,t))})};var Se=[!1,"mobile",!0],Ee={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:Se[0],collapseSize:void 0,tabbable:!0,autocompleteAttribute:"off"};function $e(t,e){this.element=$(t),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==e&&(void 0===e.clearable&&(e.clearable=!0),void 0===e.collapsible&&(e.collapsible=!0,e.tabbable=!1)),this.settings=C.mergeSettings(t,e,Ee),this.settings.collapsible&&(this.settings.tabbable=!1),this.init()}$e.prototype={get toolbarParent(){var t=this.element.parents(".toolbar"),e=this.element.parents(".flex-toolbar");if(!(t.add(e).length<1))return e.length>0?e.first()[0]:t.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var t=this.element.closest(".module-tabs");return t.length?t.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var t;return this.isContainedByFlexToolbar&&(t=$(this.element).data("toolbarflexitem")),t},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=C.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete")));var e=this.settings.autocompleteAttribute;"string"==typeof e&&e.length?this.element.attr("autocomplete","".concat(u.ensureAlphaNumeric(e))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();n&&""!==n||(n=R.translate("Keyword")),this.element.attr({"aria-label":n}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.isInlineLabel?this.wrapper=this.inlineLabel.addClass("searchfield-wrapper"):this.wrapper=this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var i="remove";this.settings.collapsible&&this.settings.collapseSize&&(i="add"),this.wrapper[0].classList[i]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var a,s=["context","alternate"],r=0;r<s.length;r++)this.element.hasClass(s[r])&&(a=s[r],this.wrapper.addClass(a),this.element.removeClass(a));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=Se[1]),this.wrapper[0].classList[1==!this.settings.collapsible?"add":"remove"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var o=this.wrapper.find(".icon:not(.icon-dropdown)");if(o&&o.length||(o=$.createIconElement("search")),o[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),o.appendTo(this.categoryButton),o=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var l=o.find(".icon-dropdown");if(l.length||(l=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),l.appendTo(o),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>'));var c=this.settings.categoryMultiselect?"is-multiselectable":"is-selectable";this.list.addClass(c);var d="is-selectable";this.settings.categoryMultiselect||(d="is-multiselectable"),this.list.removeClass(d),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var h=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){h.isFocused&&h.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(R.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var f=this.wrapper.next(".go-button");f.length||(f=this.wrapper.find(".go-button")),f.length&&(this.settings.showGoButton=!0,this.goButton=f,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||R.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton[0].setAttribute("id",C.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&this.makeClearable();var g=this,m=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){g.calculateSearchfieldWidth()}});return G.register(m),$("body").on("resize.".concat(this.id),function(){g.calculateSearchfieldWidth()}),(!1===this.settings.collapsible||"mobile"===this.settings.collapsible&&p.isAbove("phone-to-tablet"))&&this.expand(!0),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var t=this,e=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){t.focusElem&&(t.focusElem.focus(),delete t.focusElem)}});G.register(e)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var t=this.wrapper.closest(".header"),e=!1;return t.length&&(e=t.width()<p.phone),e||p.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=C.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},setupEvents:function(){var t=this,e=this;return e.element.on("updated.".concat(this.id),function(t,n){e.updated(n)}).on("focus.".concat(this.id),function(t){e.handleFocus(t)}).on("blur.".concat(this.id),function(t){e.isContainedByFlexToolbar&&e.handleSafeBlur(t)}).on("click.".concat(this.id),function(t){e.handleClick(t)}).on("keydown.".concat(this.id),function(t){e.handleKeydown(t)}).on("beforeopen.".concat(this.id),function(t,n){e.handlePopupBeforeOpen(t,n)}).on("safe-blur.".concat(this.id),function(){e.handleSafeBlur()}).on("listclose.".concat(this.id),function(){e.handleSafeBlur()}).on("input.".concat(this.id),function(){e.checkContents()}),e.wrapper.on("mouseenter.".concat(this.id),function(){$(this).addClass("is-hovered")}).on("mouseleave.".concat(this.id),function(){$(this).removeClass("is-hovered")}),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),function(t,n){e.handleCategorySelected(t,n)}).on("focus.".concat(this.id),function(t){e.handleCategoryFocus(t)}).on("blur.".concat(this.id),function(){e.handleSafeBlur()}).on("close.".concat(this.id),function(){e.handleSafeBlur()}).on("beforeopen.".concat(this.id),function(t,n){e.handlePopupBeforeOpen(t,n)}),e.hasGoButton()&&e.goButton.on("click.".concat(this.id),function(t){return e.handleGoButtonClick(t)}).on("click.".concat(this.id),function(t){return e.handleGoButtonFocus(t)}).on("blur.".concat(this.id),function(){return e.handleSafeBlur()}),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),function(t){e.handleFocus(t)}).on("focusout.".concat(this.id),function(t){e.handleBlur(t)}).on("keydown.".concat(this.id),function(t){e.handleKeydown(t)}).on("collapse.".concat(this.id),function(){e.collapse()}),$("body").on("breakpoint-change",function(){e.adjustOnBreakpoint()}),e.adjustOnBreakpoint()):($("body").on("breakpoint-change",function(){e.simpleAdjustOnBreakpoint()}),e.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),function(t){e.collapseResponsive(t)}).on("click.".concat(this.id),function(t){e.collapseResponsive(t)}).on("blur.".concat(this.id),function(){return e.handleSafeBlur()}),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),function(){!e.isFocused&&e.isCurrentlyCollapsible&&e.collapse()}).on("rendered.".concat(this.id),function(){e.element.removeClass("no-transition no-animation"),e.wrapper.removeClass("no-transition no-animation")}),e.element.on("beforepopulated.".concat(this.id),function(t,n){n.length>0?e.settings.showAllResults&&e.addMoreLink():e.addNoneLink()}),e.settings.clearable&&(e.element.on("cleared.".concat(this.id),function(){e.autocomplete&&e.autocomplete.closeList()}),e.xButton.on("blur.".concat(this.id),function(t){e.handleSafeBlur(t)})),e.element.on("listopen.".concat(this.id),function(){var n=$("#autocomplete-list");e.wrapper.addClass("popup-is-open"),e.element.on("selected.".concat(t.id),function(t,n,i){if(n.hasClass("more-results")){var a=e.settings.allResultsCallback;a&&"function"==typeof a&&a(i)}}),n.find(".more-results, .no-results").on("focus.".concat(t.id),function(){var t=$(this);n.find("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),e.element.val("")})}).on("listclose.".concat(this.id),function(){var n=$("#autocomplete-list");e.element.off("selected.".concat(t.id)),n.off("focus.".concat(t.id))}),this},setAsActive:function(t,e){var n=this;if(t||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var i=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&i.push("is-open")),i.forEach(function(t){n.wrapper[0].classList.add(t)}),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===e&&this.element.focus()}},get isFocused(){var t=document.activeElement,e=this.wrapper[0];if(this.settings.tabbable&&e.contains(t)&&$(t).is("button.close"))return!0;if(e.contains(t))return!0;if(this.autocomplete){var n=this.autocomplete.list;if(n&&n[0].contains(t))return!0}return!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)||!!(this.xButton&&this.xButton.length&&this.xButton.has(t).length)},hasFocus:function(){return B("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var t=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){t.isFocused||(t.wrapper[0].classList.remove("has-focus","active"),t.removeDocumentDeactivationEvents(),t.clearResponsiveState(),t.isCurrentlyCollapsible?t.collapse():t.isContainedByFlexToolbar&&t.wrapper[0].classList.remove("is-open"))}}),G.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var t=this;$(document).on("click.".concat(this.id),function(e){t.handleOutsideClick(e)}).on("keydown.".concat(this.id),function(e){t.handleOutsideKeydown(e)}),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(t){var e=t.target;this.isSearchfieldElement(e)||this.handleSafeBlur()},handleKeydown:function(t){var e=t.which,n=t.key;27===e&&m.browser.isIE11()&&t.preventDefault(),t.ctrlKey&&8===e&&this.element.val(""),9===e&&this.handleSafeBlur(),this.isContainedByFlexToolbar&&["ArrowUp","Up","ArrowDown","Down"].indexOf(n)>-1&&this.collapse()},handleOutsideKeydown:function(t){var e=t.which,n=t.target;9!==e||this.isSearchfieldElement(n)||this.handleSafeBlur()},handlePopupBeforeOpen:function(t,e){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!e)return!1;var n=this.wrapper.hasClass("context")?"addClass":"removeClass",i=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return e[n]("context"),e[i]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(t){var e=this.settings.goButtonAction;if("function"==typeof e){var n,i=this.element.val();return this.hasCategories()&&(n=this.getCategoryData()),e(t,i,n)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(t){if(this.settings.showCategoryText&&this.categoryButton.length){var e="",n=this.wrapper.find(".btn"),i=n.find("span");if(i&&i.length||(i=$('<span class="category"></span>').insertAfter(n.find(".icon").first())),i.empty(),"string"==typeof t&&t.length)i.text(t.trim());else{var a=this.getSelectedCategories();a.length&&(e=a.length>1?"".concat(a.length," ").concat(R.translate("Selected")):a.text().trim(),i.text(e))}}},isSearchfieldElement:function(t){return!!$.contains(this.wrapper[0],t)||!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)},getFillSize:function(t,e){var n,i,a;function s(t){if(!t)return 0;if(!isNaN(parseInt(t,10)))return parseInt(t,10);if(t instanceof jQuery){if(!t.length)return 0;t.is(".title")&&(t=t.next(".buttonset")),t=t[0]}return t}function r(t,e){if(!isNaN(t))return null==t?0:t;e&&"string"==typeof e||(e="left");var n,i=["left","right"];return-1===$.inArray(e,i)&&(e=i[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t.getBoundingClientRect()),n[e]}if(t=s(t),e=s(e),n=r(t),i=r(e,(a="left",(t===e||$(e).length&&$(e).is(".buttonset"))&&(a="right"),a)),!n&&!i)return 280;var o=i-n;return o<=280?280:o>=450?450:o},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var t=0;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var e=window.getComputedStyle(this.categoryButton[0]);t+=this.categoryButton.width()+(parseInt(e.paddingLeft,10)+parseInt(e.paddingRight,10))+2*parseInt(e.borderLeftWidth,10)}if(this.hasGoButton()){var n=window.getComputedStyle(this.goButton[0]);t+=this.goButton.width()+(parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10))+2*parseInt(n.borderLeftWidth,10)}t>0&&(this.input.style.width="calc(100% - ".concat(t,"px)")),delete this.openWidth},calculateOpenWidth:function(){var t,e=this.element.parents(".toolbar").children(".buttonset"),n=this.wrapper.next();if(e.length){if(n.is(".title")&&(n=e),this.shouldBeFullWidth()){var i="100%";return p.isBelow("desktop")&&(i="90%"),t=i,$(this.toolbarParent).closest(".header").length&&(t="calc(".concat(i," - 40px)")),$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(t="calc(".concat(i," - 1px)")),void(this.openWidth=t)}var a=e.offset().left+10,s=n;s.length||(s=e.offset().left+10+e.outerWidth(!0)),t=this.getFillSize(a,s),this.openWidth="".concat(t-6,"px")}},calculateSearchfieldWidth:function(){var t,e="100%",n=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var i=window.getComputedStyle(this.element[0]);i.width&&!this.isContextSearch&&(e=i.width),this.hasCategories()&&(n+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(n+=this.goButton.outerWidth(!0)),n>0&&(t="calc(".concat(e," - ").concat(n,"px)")),t&&(this.element[0].style.width=t)},handleCategorySelected:function(t,e){this.element.trigger("selected",[e]),this.settings.showCategoryText&&(this.setCategoryButtonText(t,e.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(t){var e=this.getCategories(),n=[];return e.each(function(){var e=this.classList.contains("is-checked");if(!0!==t||!1!==e){var i={name:this.innerText,checked:e};this.id&&(i.id=this.id);var a=this.getAttribute("data-value");void 0!==a&&(i.value=a),n.push(i)}}),n},updateCategories:function(t){this.settings.categories=t,this.setCategories(this.settings.categories)},setCategories:function(t){this.list.empty();var e=this,n=["string","number"],i=!1;t.forEach(function(t){if("string"==typeof t&&(t={name:t}),t.name){var s="";"string"==typeof t.id&&t.id.length&&(s=' id="'.concat(t.id,'"'));var r="";n.indexOf(a(t.value))>-1&&(r=' data-value="'.concat(t.value,'"'));var o="";!0===t.checked&&!0!==i&&(o=' class="is-checked"',e.settings.categoryMultiselect||(i=!0)),e.list.append("<li".concat(o).concat(s).concat(r,'><a href="#">').concat(t.name,"</a></li>"))}});var s=this.categoryButton.data("popupmenu");s&&"function"==typeof s.updated&&s.updated()},expand:function(t){var e=this,n=this;return new pe(function(i){if(n.isExpanded||n.isExpanding||n.isCollapsing)i();else{var a=!n.shouldBeFullWidth();n.isExpanding=!0,a||n.appendToParent(),n.wrapper.removeAttr("style"),n.input.removeAttribute("style");var s=0;n.buttonsetElem&&(s=parseInt(window.getComputedStyle(n.buttonsetElem).width,10));var r={buttonset:s+280};e.isContainedByFlexToolbar&&!p.isAbove("phone-to-tablet")||e.wrapper[0].classList.add("is-open"),e.calculateOpenWidth(),e.setOpenWidth(),(!t||"ios"===m.os.name||n.isFocused&&document.activeElement!==n.input)&&(n.focusElem&&(n.focusElem=n.input),n.element.parents(".flex-toolbar").length||n.input.focus());var o=[];r&&o.push(r),n.element.trigger("beforeexpand"),$(n.toolbarParent).triggerHandler("recalculate-buttons",o);var l=new W({duration:10,updateCallback:function(){},timeoutCallback:function(){$(n.toolbarParent).triggerHandler("recalculate-buttons",o),n.element.trigger("expanded"),delete n.isExpanding,n.isExpanded=!0,!n.isCurrentlyCollapsible||n.isFocused||n.focusElem||n.handleSafeBlur()}});G.register(l)}})},collapse:function(){var t=this,e=this;return new pe(function(n){if(e.isExpanded||!e.isExpanding||e.isCollapsing){e.isCollapsing=!0,e.wrapper.removeAttr("style"),e.appendToButtonset(),e.checkContents(),e.toolbarParent&&e.setInitalWidth(),e.clearResponsiveState(),e.wrapper[0].classList.remove("active","is-open"),m.browser.isIE11&&e.wrapper[0].classList.remove("is-open"),!t.isContainedByFlexToolbar&&t.isFocused||e.wrapper[0].classList.remove("has-focus"),e.categoryButton&&e.categoryButton.length&&e.categoryButton.data("popupmenu").close(!1,!0),e.element.trigger("beforecollapse"),delete e.isExpanded,delete e.isExpanding;var i=new W({duration:10,updateCallback:function(){},timeoutCallback:function(){delete e.isCollapsing,$(e.toolbarParent).triggerHandler("recalculate-buttons"),e.element.trigger("collapsed"),n()}});G.register(i)}else n()})},collapseResponsive:function(t){if(this.previouslyCollapsedByKey&&"click"===t.type)delete this.previouslyCollapsedByKey;else{var e=this,n=1;t&&!t.key&&(n=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(n=1)),"keydown"===t.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then(function(){e.wrapper.trigger("collapsed-responsive",[n])})}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var t;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(t="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(t)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(t,"px")))},addMoreLink:function(){var t=$("#autocomplete-list"),e=this.element.val();if(!($(".more-results",t).length>0)){var n=$('<li class="separator" role="presentation"></li>').appendTo(t),i=$('<li role="presentation"></li>').appendTo(t);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(R.translate("AllResults"),' "').concat(u.ensureAlphaNumericWithSpaces(e),'"</span>')).appendTo(i),this.autocomplete.maxWidth&&n.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var t=$("#autocomplete-list");if(!($(".no-results",t).length>0)){var e=$('<li role="presentation" class="is-placeholder"></li>').appendTo(t);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(R.translate("NoResults"),"</span>")).appendTo(e)}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings),Object.prototype.hasOwnProperty.call(t,"collapseSize")&&void 0===t.collapseSize&&(this.settings.collapseSize=t.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){return this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.categoryButton&&this.categoryButton.length&&(this.categoryButton.off().remove(),delete this.categoryButton),this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("breakpoint-change"),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),this.xButton.remove()),this},makeClearable:function(){this.element.clearable({tabbable:this.settings.tabbable}),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close"),this.settings.tabbable||this.xButton[0].setAttribute("tabindex","-1"),C.addAttributes(this.xButton,this,this.settings.attributes,"btn-close",!0),C.addAttributes(this.element.xButton,this,this.settings.attributes,"btn-close",!0)},clear:function(){this.xButton&&this.xButton.click(),this.element.xButton&&this.element.xButton.click()},destroy:function(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(t){return this.each(function(){var e=$.data(this,"searchfield");e?e.updated(t):e=$.data(this,"searchfield",new $e(this,t))})};var De={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",resizable:!1,savePosition:!1,openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function Ie(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,De),this.init()}Ie.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var t=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==t?"true"===t:this.settings.openOnLarge;var e=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==p[e]?e:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var n=this.menu.prevAll(".masthead"),i=this.menu.prevAll(".module-tabs");n.length>0&&(this.scrollTarget=n,this.menu.addClass("short")),i.length>0&&(this.scrollTarget=i),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var a=this.accordion.data("accordion");if(a||(this.accordion.accordion(),a=this.accordion.data("accordion")),this.accordionAPI=a,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$('<input id="application-menu-searchfield" class="searchfield" placeholder="Search" />').prependTo(this.element),this.element.addClass("has-searchfield");var s=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function(t,e,n){e(t,s.accordion.data("accordion").toData(!0,!0),n)},searchableTextCallback:function(t){return t.text||t.contentText||""},resultIteratorCallback:function(t){return t.highlightTarget="text",t},clearResultsCallback:function(){s.searchfieldAPI&&!s.searchfieldAPI.isFocused&&s.accordionAPI.unfilter()},displayResultsCallback:function(t,e,n){return s.filterResultsCallback(t,e,n)}}),this.searchfield.on("cleared.".concat("applicationmenu"),function(){s.accordionAPI.unfilter(null,!0)})}this.renderResizableAppMenu(),this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var r=this.element.find(".application-menu-switcher-trigger");return r.length>0&&(this.switcherTrigger=r,this.switcherPanel=r.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea({trigger:r})),this},getAdjacentContainerElement:function(){var t=this.element.next(".page-container");return t.length||(t=$("body")),t},handleTriggerEvents:function(){var t=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",function(e){return!$(e.currentTarget).find(".icon.app-header").hasClass("go-back")&&!t.isAnimating&&(t.menu.hasClass("is-open")?t.closeMenu(!0):t.openMenu(void 0,!0),!0)}),$(document).on("keydown.applicationmenu",function(e){t.handleKeyDown(e)}),$(document).on("input.applicationmenu",function(){t.handleInput()})},handleInput:function(){var t;return this.element.find(".searchfield").val()||null!==(t=this.element.find(".searchfield").val())&&void 0!==t&&(null==t?void 0:t.length)?this.accordionAPI.unfilter(null):this.accordionAPI.unfilter(null,!0),!0},handleKeyDown:function(t){return!(121===t.which&&!t.shiftKey&&(t.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),1))},notify:function(t,e){if(t&&void 0!==t&&(t instanceof HTMLElement&&(t=$(t)),t.is("a"))){var n=t.find(".tag");if(e&&void 0!==e&&0!==parseInt(e,10))return n.length||(n=$('<span class="tag"></span>').appendTo(t)),n.text(e.toString()),n;n.length&&n.remove()}},adjustHeight:function(){var t=this.scrollTarget.is(".is-sticky"),e=this.scrollTarget.outerHeight(!0)-(t?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(e+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=e>0?"calc(100% - ".concat(e,"px)"):"100%"},toggleScrollClass:function(){if("ie"===m.browser.name&&"11"===m.browser.version){var t=this.element[0];t&&t.classList.contains("has-menu-footer")&&(t.scrollHeight>t.clientHeight?t.classList.add("has-scrollbar"):t.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return p.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(p.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else p.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},renderResizableAppMenu:function(){if(this.settings.resizable){this.openMenu(!1,!1,!1),this.element.after('<div class="resizer"></div>'),$("#application-menu, .resizer").wrapAll('<div class="resize-app-menu-container" />'),$(".page-container").wrapAll('<div class="resize-page-container" />'),$(".resize-page-container").insertAfter(".resizer");var t=document.querySelector(".resizer"),e=document.querySelector("#application-menu"),n=$(".tab-panel-container.page-container"),i=$(".page-container");t.addEventListener("mousedown",function(t){t.preventDefault(),window.addEventListener("mousemove",a),window.addEventListener("mouseup",s)}),localStorage&&localStorage.navMenuWidth&&this.settings.savePosition&&(e.style.flexBasis=localStorage.navMenuWidth),this.settings.savePosition&&(i.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")),n&&n.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")))}function a(t){e.style.flexBasis="".concat((t.pageX<300?300:t.pageX)-e.getBoundingClientRect().left,"px"),$(".page-container").css("width","calc(100% - ".concat(t.pageX<300?300:t.pageX,"px)"))}function s(){window.removeEventListener("mousemove",a,!1),localStorage&&(localStorage.navMenuWidth=e.style.flexBasis)}},openMenu:function(t,e,n){if(!0!==this.isAnimating){var i=this,a=$.fn.transitonEndName;if(n||(this.isAnimating=!0),this.adjustHeight(),this.settings.resizable){var s=parseInt(this.element[0].style.flexBasis,10);(s<300||isNaN(s))&&(s=300),this.settings.savePosition?$(".page-container").css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")):$(".page-container").css("width","calc(100% - ".concat(s,"px)"))}this.triggers.each(function(){var t=$(this);t.attr({"aria-expanded":!0}),(t.parents(".header").length>0||t.parents(".masthead").length>0)&&(t.find(".icon.app-header").removeClass("go-back"),t.trigger("icon-change"))}),n||(this.menu.off("".concat(a,".applicationmenu")),this.menu[0].style.display="",this.menu[0].offsetHeight,this.menu.addClass("is-open"),m.features.touch&&$("body").addClass("is-open-touch")),p.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),t&&!0===t||this.menu.find(".is-selected > a").focus(),"ios"===m.os.name&&this.getAdjacentContainerElement().addClass("ios-click-target"),n?r():(this.menu.one("".concat(a,".applicationmenu"),r),this.timeout=setTimeout(r,300)),setTimeout(function(){$(document).on("click.applicationmenu",function(t){$(t.target).parents(".application-menu").length<1&&!i.isLargerThanBreakpoint()&&i.closeMenu(!0)})},0)}function r(){null!==i.timeout&&(clearTimeout(i.timeout),i.timeout=null),e&&(i.userOpened=!0,i.userClosed=void 0),n||(i.isAnimating=!1,i.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),i.toggleScrollClass(),i.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(t){if(!0!==this.isAnimating){var e=this,n=$.fn.transitionEndName();this.isAnimating=!0,this.triggers.each(function(){var t=$(this);t.attr({"aria-expanded":!1}),(t.parents(".header").length>0||t.parents(".masthead").length>0)&&(t.find(".icon.app-header"),t.trigger("icon-change"))}),"ios"===m.os.name&&this.getAdjacentContainerElement().removeClass("ios-click-target"),this.menu.one("".concat(n,".applicationmenu"),i),this.timeout=setTimeout(i,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),this.settings.resizable&&$(".page-container").css("width","100%"),m.features.touch&&$("body").removeClass("is-open-touch")}function i(){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.menu.off("".concat(n,".applicationmenu")),e.menu[0].style.display="none",e.isAnimating=!1,t&&(e.userOpened=void 0,e.userClosed=!0),e.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(t,e,n){var i=this;if(t&&t.length){var a=$(),s=!this.element.is(":visible");$.each(t,function(t,e){a=a.add($(e))}),this.triggers=this.triggers[e?"not":"add"](a),this.handleTriggerEvents(),this.triggers.each(function(t,e){var n,a=$(e);a.attr("aria-controls","application-menu"),a.attr("aria-expanded","".concat(i.isOpen()));var s=null===(n=e.textContent)||void 0===n||null==n?void 0:n.length,r=a.find(".audible");if(!s){var o=R.translate("AppMenuTriggerTextAlt");r.length?r.text(o):e.insertAdjacentHTML("beforeend",'<span class="audible">'.concat(o,"</span>"))}}),n&&!0===n||(this.updated(),s&&this.element.css("display","none"))}},filterResultsCallback:function(t,e){if(!t)return this.accordionAPI.unfilter(),void e();var n=$(t.map(function(t){return t.element}));this.accordionAPI.filter(n,!0),this.element.triggerHandler("filtered",[t]),e()},handleSearchfieldInputEvent:function(){if(this.searchfield&&this.searchfield.length){var t=this.searchfield.val();if(!t||""===t){var e=this.accordion.find(".has-filtered-children");this.accordionAPI.headers.removeClass("filtered has-filtered-children"),this.accordionAPI.collapse(e),this.accordionAPI.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var t=this.switcherPanel.data("expandablearea");if(t&&(t.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu","input.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat("applicationmenu","-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.element.find(".application-menu-toolbar").off("click.".concat("applicationmenu")),this.accordionAPI&&"function"==typeof this.accordionAPI.destroy&&(this.isFiltered&&this.accordionAPI.collapse(),this.accordionAPI.destroy()),this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat("applicationmenu")].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var t=this.searchfield.data("searchfield");t&&t.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function(){var t=this,e=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",function(t,n,i){e.notify(n,i)}).on("updated.applicationmenu",function(){e.updated()}),"ie"===m.browser.name&&"11"===m.browser.version&&e.element.find(".expandable-area").on("beforeexpand.applicationmenu",function(){e.element[0].classList.remove("has-scrollbar")}).on("aftercollapse.applicationmenu",function(){e.toggleScrollClass()}),this.accordion.on("blur.applicationmenu",function(){e.closeMenu()}).on("selected.applicationmenu",function(){e.handleDismissOnClick()}).on("followlink.applicationmenu",function(){e.handleDismissOnClick()}).on("afterexpand.applicationmenu aftercollapse.applicationmenu",function(){e.toggleScrollClass()}),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",function(){var n=t.element.height();e.element.addClass("has-open-switcher"),e.switcherPanel.find(".content").height(n-71),e.settings.onExpandSwitcher&&e.settings.onExpandSwitcher(e,e.element,e.settings),e.element.on("keydown.".concat("applicationmenu","-switcher"),function(t){var n=t.key;"Escape"===n&&e.element[0].classList.contains("has-open-switcher")&&(t.preventDefault(),e.closeSwitcherPanel()),"Tab"===n&&(e.keyboardChangedFocus=!0)}),e.switcherPanel.one("afterexpand.".concat("applicationmenu"),function(){var n;t.keyboardChangedFocus||((n=h.focusableElems(e.switcherPanel[0]))[0].classList.remove("hide-focus"),n[0].focus())})}).on("aftercollapse.applicationmenu",function(){t.element.removeClass("has-open-switcher"),t.settings.onCollapseSwitcher&&t.settings.onCollapseSwitcher(t,t.element,t.settings),t.element.off("keydown.".concat("applicationmenu","-switcher")),t.switcherPanel.off("afterexpand.".concat("applicationmenu")),delete t.keyboardChangedFocus}),this.element.find(".application-menu-toolbar").on("click.".concat("applicationmenu"),"button",function(e){e.defaultPrevented||t.handleDismissOnClick()}),$(document).on("open-applicationmenu",function(t,n,i){e.openMenu(n,i)}).on("close-applicationmenu",function(t,n){e.closeMenu(n)}).on("dismiss-applicationmenu",function(){e.handleDismissOnClick()}),$(window).on("scroll.applicationmenu",function(){e.adjustHeight()}),$("body").on("resize.applicationmenu",function(){e.testWidth(),e.toggleScrollClass()}),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",function(t){e.handleSearchfieldInputEvent(t)}),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout(function(){e.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")},800),this}},$.fn.applicationmenu=function(t){return this.each(function(){var e=$.data(this,"applicationmenu");return e?e.updated(t):e=$.data(this,"applicationmenu",new Ie(this,t)),e})};var Me={dataset:[],selectable:!1,paging:!1,withImage:!0,pagerSettings:{pagesize:25,pagesizes:[10,25,50,75],showFirstButton:!1,showLastButton:!1},attributes:null};function Le(t,e){return e?(e.dataset&&(t.dataset=e.dataset),e.pagesize&&(B("`pagerSettings.pagesize` setting","`pagesize` setting"),t.pagerSettings.pagesize=e.pagesize,delete t.pagesize),e.pagesizes&&(B("`pagerSettings.pagesizes` setting","`pagesizes` setting"),t.pagerSettings.pagesizes=e.pagesizes,delete t.pagesizes),t):t}function Pe(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,Me),this.settings=Le(this.settings,e),this.init()}Pe.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var t=this,e=this;return this.element.on("click.".concat("blockgrid"),".block",function(t){var n=$(t.currentTarget),i=$(t.target),a=i.is(".checkbox-label")||i.is(".checkbox");setTimeout(function(){e.select(n,a)},0),t.stopPropagation(),t.preventDefault()}),this.element.on("focus.".concat("blockgrid"),".checkbox",function(t){$(t.currentTarget).parent().addClass("has-focus")}),this.element.on("blur.".concat("blockgrid"),".checkbox",function(t){$(t.currentTarget).parent().removeClass("has-focus")}),this.element.on("keypress.".concat("blockgrid"),".block",function(t){if(32===t.which){var n=$(t.target);e.select(n,!1)}}),this.element.on("updated.".concat("blockgrid"),function(){e.updated()}),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),function(){t.previousFocusedElement=!0,t.build()}).on("pagesizechange.".concat("blockgrid"),function(){t.previousFocusedElement=!0,t.build()}),this},handlePaging:function(){if(this.settings.paging){var t=C.extend({},this.settings.pagerSettings,{componentAPI:this,dataset:this.settings.dataset});this.element.addClass("paginated"),this.element.pager(t)}},selectBlock:function(t,e){return F(this.select,this.selectBlock).apply(this,[t,e])},select:function(t,e){var n=this.element.find(".block"),i=this.element.find(".checkbox"),a=t.find(".checkbox"),s=a.is(":checked"),r="",o=Number(a.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],n.removeClass("is-selected").removeAttr("aria-selected"),i.prop("checked",!1)),"multiple"===this.settings.selectable&&s||"mixed"===this.settings.selectable&&e&&s){t.removeClass("is-selected").removeAttr("aria-selected"),a.prop("checked",!1);for(var l=0;l<this.selectedRows.length;l++)o===this.selectedRows[l].idx&&this.selectedRows.splice(l,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!e||(s||(t.addClass("is-selected").attr("aria-selected","true"),a.prop("checked",!0)),this.selectedRows.push({idx:o,data:this.settings.dataset[o],elem:t}),r=s?"deselected":"selected"),"mixed"===this.settings.selectable&&!e){var c=t.hasClass("is-activated");return n.removeClass("is-activated"),void(c?(t.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:o,item:this.settings.dataset[o]}])):(t.addClass("is-activated"),this.element.triggerHandler("activated",[{row:o,item:this.settings.dataset[o]}])))}this.element.triggerHandler(s?"deselected":"selected",[{selectedRows:this.selectedRows,action:r}])}},render:function(){var t=this,e=this.settings,n=R?R.translate("Select"):"Select",i="",a=e.dataset;if(this.pagerAPI){var s=this.pagerAPI.state;if(s.pages>1){var r=s.activePage>0?s.activePage-1:0,o=s.pagesize*r,l=s.pagesize*(r+1);if((a=a.slice(o,l)).length!==e.dataset.length)for(var c=0;c<a.length&&!a[c].id;c++)a[c].id=o+c}}var d=[];this.selectedRows.forEach(function(t){d.push(t.idx)});for(var u=0;u<a.length;u++){var h=a[u],p="mixed"===e.selectable?"0":"-1",f="",g="";d.indexOf(h.id)>-1&&(f=" is-selected",g=" checked");var m=void 0;if(e.withImage){var v=h.imgAlt||h.imageAlt||"".concat(h.maintxt||h.title," ").concat(R.translate("Image"));m='<div class="block is-selectable'.concat(f,'" role="listitem" tabindex="0">\n          <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(u,'" tabindex="').concat(p,'" data-idx="').concat(h.id||u,'"').concat(g,'>\n          <label for="checkbox').concat(u,'" class="checkbox-label">\n            <span class="audible">').concat(n,'</span>\n          </label>\n          <img alt="').concat(v,'" src="').concat(h.img||h.image,'" class="image-round">\n          <p> ').concat(h.maintxt||h.title," <br> ").concat(h.subtxt||h.subtitle," </p>\n        </div>")}else{var b="";h.content&&h.content.forEach(function(t){b+="<br>".concat(t)}),m='<div class="block text-block is-selectable'.concat(f,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(u,'" tabindex="').concat(p,'" data-idx="').concat(h.id||u,'"').concat(g,'>\n        <label for="checkbox').concat(u,'" class="checkbox-label text-block">\n          <span class="audible">').concat(n,"</span>\n        </label>\n        <p><b>").concat(h.title,"</b>").concat(b,"</p>\n        </div>")}i+=m}if(this.element.attr("role","list").append(i),e.attributes)for(var y=0;y<a.length;y++){var w=this.element.find("#checkbox".concat(y)),x=this.element.find('.checkbox-label[for="checkbox'.concat(y,'"]'));C.addAttributes(w,this,e.attributes,"blockgrid-checkbox".concat(y)),C.addAttributes(x,this,e.attributes,"blockgrid-checkbox-label".concat(y))}this.previousFocusedElement&&setTimeout(function(){t.element.find(".block").first().focus(),delete t.previousFocusedElement},0)},renderBlock:function(){return F(this.render,this.renderBlock).apply(this)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=Le(this.settings,t),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(t){return this.each(function(){var e=$.data(this,"blockgrid");e?e.updated(t):e=$.data(this,"blockgrid",new Pe(this,t))})};var Ne={attributes:null,callback:void 0,content:"",current:!1,disabled:!1,href:void 0,id:void 0};function Re(t){return this.settings=C.mergeSettings(null,t,Ne),this.init()}Re.prototype={init:function(){return this.settings.element instanceof HTMLElement&&this.getSettingsFromElement(),this.settings.callback="function"==typeof this.settings.callback?this.settings.callback:null,this.settings.content="string"==typeof this.settings.content?u.stripHTML(this.settings.content):"",this.settings.current=!0===this.settings.current,this.settings.disabled=!0===this.settings.disabled,this.settings.id="string"==typeof this.settings.id?u.stripHTML(this.settings.id):void 0,this.settings.href="string"==typeof this.settings.href?u.stripHTML(this.settings.href):void 0,this},render:function(){var t,e,n=this.element;return n||(n=document.createElement("li"),this.settings.href?(t=document.createElement("a"),n.appendChild(t)):(e=document.createElement("span"),n.appendChild(e)),this.element=n),n.classList.add("breadcrumb-item"),n},refresh:function(){var t=this.element,e=t.querySelector("a"),n=t.querySelector("span:not(.audible)"),i=e?$(e):void 0;if(this.disabled=this.settings.disabled,this.current=this.settings.current,(e||t).id="string"==typeof this.settings.id?this.settings.id:"",(e||n||t).innerHTML="string"==typeof this.settings.content?this.settings.content:"",e){if("string"==typeof this.settings.href){var a="string"==typeof this.settings.href?u.stripHTML(this.settings.href):void 0;e.href=a,e.setAttribute("href",a)}else e.href=void 0,e.removeAttribute("href");i.hyperlink()}return n&&n.parentNode.isEqualNode(t)&&n.classList.add("breadcrumb-text"),Array.isArray(this.settings.attributes)&&C.addAttributes(i||$(t),this,this.settings.attributes),t},checkFocus:function(){var t=this.a;if(t){var e=this.overflowed;(m.browser.isIE11||m.browser.isEdge)&&(e=!1),t.tabIndex=e||this.disabled?-1:0,t.setAttribute("tabindex",t.tabIndex)}},get a(){return this.element.querySelector("a")},set current(t){var e=!0===t;this.settings.current=e,this.element.classList[e?"add":"remove"]("current")},get current(){return this.settings.current},set disabled(t){var e=!0===t;this.settings.disabled=e,this.element.classList[e?"add":"remove"]("is-disabled");var n=this.a;n&&(n.disabled=e,e?(n.setAttribute("disabled",e),n.setAttribute("aria-disabled",e)):(n.removeAttribute("disabled"),n.removeAttribute("aria-disabled")))},get disabled(){var t,e=null===(t=this.a)||void 0===t||null==t?void 0:t.getAttribute("disabled"),n=this.element.getAttribute("is-disabled");return e||n},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){var t=this.element,e=t.querySelector("a"),n=t.querySelector("span"),i=(e||n||t).getBoundingClientRect(),a=this.element.parentNode.getBoundingClientRect();return m.rtl?a.right<i.right:a.left>i.left},callback:function(t){if("function"!=typeof this.settings.callback)return!1;for(var e=this.settings.callback,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=e.apply(this,[t].concat(i));return s||t.preventDefault(),s},get index(){for(var t=this.element,e=0;null!==t.previousSibling;)t=t.previousSibling,e++;return e},getSettingsFromElement:function(){var t=this.settings.element,e=t.querySelector("a");function n(t){return t=t.replace('<span class="audible">Current</span>',""),u.stripHTML(t)}e?(this.settings.content=n(e.innerHTML),this.settings.href=e.href,this.settings.id=e.id):(this.settings.content=n(t.innerHTML),t.id&&(this.settings.id=t.id));var i=!0===t.classList.contains("current"),a=e&&!0===e.classList.contains("current");this.settings.current=i||a,this.settings.disabled=!0===t.classList.contains("is-disabled"),this.element=t,this.fromElement=!0,delete this.settings.element},destroy:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.element&&this.element.parentNode){if(!this.fromElement){var e=this.a;if(e){var n=$(e);n.off(),n.data("hyperlink").destroy()}}!t&&this.fromElement||(this.element.parentNode.removeChild(this.element),delete this.element)}}};var Oe=["default","alternate"],Be={breadcrumbs:[],style:Oe[0],truncate:!0};function _e(t,e){if(!(t instanceof HTMLElement))throw new Error("`element` argument must be of type `HTMLElement`");return this.element=t,this.settings=C.mergeSettings(t,e,Be),this.init(),this}_e.prototype={init:function(){var t=this;Array.isArray(this.breadcrumbs)||(this.breadcrumbs=[]);var e=this.element.querySelector("ol"),n=C.getArrayFromList(this.element.querySelectorAll("li"));e&&(this.list=e),n.length&&n.forEach(function(e){t.add({element:e})}),Array.isArray(this.settings.breadcrumbs)||(this.settings.breadcrumbs=[]),this.settings.breadcrumbs.forEach(function(e){t.add(e)}),this.element.classList.contains(Oe[1])&&(this.settings.style=Oe[1]),-1===Oe.indexOf(this.settings.style)&&(this.settings.style=Oe[0]),this.render()},render:function(){var t;this.list?(this.teardownEvents(),this.teardownBreadcrumbs()):(this.list=document.createElement("ol"),this.element.appendChild(this.list));var e=document.createDocumentFragment();if(this.breadcrumbs.forEach(function(t){if(!t.fromElement||!t.element){var n=t.render();e.appendChild(n)}}),this.canDetectResize){if(!this.overflowBtn){var n=document.createElement("div"),i=document.createElement("button"),a=document.createElement("ul"),s=document.createElement("span");n.classList.add("breadcrumb-overflow-container"),i.classList.add("btn-actions"),i.classList.add("overflow-btn"),s.innerText="More Breadcrumbs",s.classList.add("audible"),i.insertAdjacentHTML("afterbegin",$.createIcon({icon:"more"})),i.appendChild(s),n.appendChild(i),n.appendChild(a),this.overflowContainerElem=n,this.overflowBtn=i,this.overflowMenu=a}this.element.insertBefore(this.overflowContainerElem,this.list),$(this.overflowBtn).popupmenu({menu:$(this.overflowMenu),beforeOpen:function(t){var e="";this.overflowed.forEach(function(t,n){var i="",a="";t.settings.disabled&&(i=" is-disabled",a=" disabled");var s='<li class="'.concat(i,'">\n          <a href="#" data-breadcrumb-index="').concat(n,'"').concat(a,">").concat(t.settings.content||"","</a>\n        </li>");e+=s}),t(e)}.bind(this)})}null!==(t=e.childNodes)&&void 0!==t&&(null==t?void 0:t.length)&&this.list.appendChild(e),this.list.setAttribute("aria-label","Breadcrumb"),this.element.classList.add("breadcrumb"),this.list.classList.add("breadcrumb-list"),this.refresh(),this.handleEvents()},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw new Error("Settings for a new breadcrumb item must be provided.");this.breadcrumbs.forEach(function(e){if(t.id&&e.id===t.id)throw new Error("New breadcrumbs must have a unique ID attribute.")});var i=new Re(t);this.breadcrumbs.push(i),n&&this.settings.breadcrumbs.push(t),e&&(this.render(),!0===i.settings.current&&this.makeCurrent(i))},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getBreadcrumbItemAPI(t);i.api.destroy(!0),this.breadcrumbs.splice(i.i,1),n&&this.settings.breadcrumbs.splice(i.i,1),e&&this.render()},removeAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.breadcrumbs.forEach(function(t){t.destroy(!0)}),this.breadcrumbs=[],e&&(this.settings.breadcrumbs=[]),t?this.render():this.refresh()},makeCurrent:function(t){var e=this.getBreadcrumbItemAPI(t);this.breadcrumbs.forEach(function(t){var n=t.element;t.current=n.isEqualNode(e.api.element)})},get current(){var t,e;return this.breadcrumbs.forEach(function(n){!t&&n.current&&(e=(t=n).element)}),e},set disabled(t){var e=!0===t;this.element.classList[e?"add":"remove"]("is-disabled"),this.breadcrumbs.forEach(function(t){t.disabled=e})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){return this.breadcrumbs.filter(function(t){return t.overflowed})},get canDetectResize(){return this.settings.truncate&&m.features.resizeObserver},handleEvents:function(){var t=this,e=this;$(this.list).on("click.".concat("breadcrumb"),"li",function(e){var n=t.getBreadcrumbItemAPI(e.currentTarget);if(n&&n.api){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];n.api.callback(e,a)}}),this.canDetectResize&&(this.previousSize=this.list.getBoundingClientRect(),this.ro=new ResizeObserver(function(){t.detectCheck&&t.detectCheck.destroy(!0),t.detectCheck=new W({duration:1,timeoutCallback:function(){var t=e.list.getBoundingClientRect();t.width!==e.previousSize.width&&(e.previousSize=t,e.refresh(),delete e.detectCheck)}}),G.register(t.detectCheck)}),this.ro.observe(this.list)),this.overflowBtn&&$(this.overflowBtn).on("selected.".concat("breadcrumb"),function(e){var n=arguments.length<=1?void 0:arguments[1],i=n[0].getAttribute("data-breadcrumb-index"),a=t.overflowed[Number(i)];$(a.a).trigger("click")}),this.hasEvents=!0},getBreadcrumbItemAPI:function(t){var e,n,i,a=!1;if(t instanceof Re?(e=t,n=t.element,i=this.breadcrumbs.indexOf(t)):t instanceof HTMLAnchorElement?n=t.parentNode:t instanceof HTMLLIElement?n=t:!isNaN(t)&&t>-1&&(a=!0,i=t,e=this.breadcrumbs[i],n=e.element),!n||e||i||this.breadcrumbs.forEach(function(t,a){t.element.isEqualNode(n)&&(e=t,i=a)}),!e){var s=a?i:n;throw new Error("No matching Breadcrumb was found by ".concat(a?"at index ":" with matching HTML List Item",' "').concat(s,'"'))}return{api:e,li:n,i:i}},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.teardownEvents(),this.breadcrumbs.forEach(function(t){t.refresh()}),this.element.classList["alternate"===this.settings.style?"add":"remove"]("alternate"),this.canDetectResize?this.element.classList[this.overflowed.length?"add":"remove"]("truncated"):(this.element.classList.remove("truncated"),this.element.classList.add("no-truncate")),this.breadcrumbs.forEach(function(t){t.checkFocus()}),t&&this.handleEvents()},teardown:function(){if(this.teardownEvents(),this.teardownBreadcrumbs(),this.breadcrumbs=[],this.overflowContainerElem){var t=$(this.overflowBtn).data("popupmenu");t&&t.destroy(),this.overflowContainerElem.parentNode&&this.element.removeChild(this.overflowContainerElem)}return this},teardownEvents:function(){this.hasEvents&&(this.ro&&(this.ro.disconnect(),delete this.ro),this.overflowBtn&&$(this.overflowBtn).off(["beforeopen.".concat("breadcrumb"),"selected.".concat("breadcrumb")].join(" ")),$(this.list).off(),$(this.element).off(),delete this.hasEvents)},teardownBreadcrumbs:function(){this.breadcrumbs.forEach(function(t){t.destroy()})},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init(),this},destroy:function(){this.teardown(),$.removeData(this.element,"breadcrumb")}},$.fn.breadcrumb=function(t){return this.each(function(){var e=$.data(this,"breadcrumb");e?e.updated(t):e=$.data(this,"breadcrumb",new _e(this,t))})};var Fe={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1,attributes:null};function ze(t,e){this.settings=C.mergeSettings(t,e,Fe),this.element=$(t),this.init()}ze.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var t=this.element.attr("data-block-ui"),e=this.element.attr("data-display-delay"),n=this.element.attr("data-completion-time");this.blockUI=void 0!==t?t:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:R.translate("Loading"),this.label&&this.label.text(this.loadingText));var i=void 0!==e&&!isNaN(e)&&parseInt(e,10)>20,a=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=i?e:a,this.completionTime=void 0===n||isNaN(n)?this.settings.timeToComplete:parseInt(n,10),this},activate:function(){var t=this;if(!t.isActive()){if(this.container)return t.closeTimeout&&clearTimeout(t.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var e="";if(this.blockUI&&(this.settings.transparentOverlay&&(e=" transparent"),this.originalPositionProp=this.element[0].style.position,"absolute"!==window.getComputedStyle(this.element[0],null).getPropertyValue("position")&&(this.element[0].style.position="relative"),this.overlay=$('<div class="overlay busy is-hidden'.concat(e,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var n;this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input")?(n=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element)):(n=this.element.data("dropdown").pseudoElem,this.container.appendTo(n.parent())),this.overlay&&this.overlay.insertAfter(this.container);for(var i=n.position(),a=n.outerHeight(),s=n.outerWidth(),r=this.container.add(this.overlay),o=function(t,e,n){t.style[e]="".concat(n,"px")},l=0,c=r.length;l<c;l++)o(r[l],"left",i.left),o(r[l],"top",i.top),o(r[l],"bottom",i.bottom),o(r[l],"right",i.right),o(r[l],"height",a),o(r[l],"width",s)}else this.container.appendTo(this.element);setTimeout(function(){t.container&&t.container.removeClass("is-hidden"),t.overlay&&t.overlay.removeClass("is-hidden"),t.blockUI&&t.addScrollParent()},t.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(t.isAnimating=!0,t.animateWithJS()),this.completionTime>0&&setTimeout(function(){t.element.trigger("complete")},t.completionTime),C.addAttributes(this.container,this,this.settings.attributes),C.addAttributes(this.container.find(".busy-indicator.active"),this,this.settings.attributes,"busyindicator"),C.addAttributes(this.container.find("span"),this,this.settings.attributes,"text"),C.addAttributes(this.overlay,this,this.settings.attributes,"overlay")}},close:function(t){var e=this;e.isActive()&&(this.removeScrollParent(),t&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),e.closeTimeout=setTimeout(function(){clearTimeout(e.closeTimeout),e.container&&e.container.remove(),e.container=void 0,e.loader=void 0,e.label=void 0,e.overlay&&(e.overlay.remove(),e.element[0].style.position=e.originalPositionProp,e.originalPositionProp=void 0),e.overlay=void 0,e.element.trigger("aftercomplete.busyindicator"),e.element.off("complete.busyindicator")},600))},animateWithJS:function(){var t=this,e=this.container.find(".bar.one"),n=this.container.find(".bar.two"),i=this.container.find(".bar.three"),a=this.container.find(".bar.four"),s=this.container.find(".bar.five"),r=0;setInterval(function(){t.isAnimating?(1===(r+=1)&&e.addClass("half"),13===r&&(e.removeClass("half").addClass("full"),n.addClass("half")),26===r&&(e.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),i.addClass("half")),39===r&&(e.removeClass("half"),n.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),a.addClass("half")),51===r&&(n.removeClass("half"),i.removeClass("full").addClass("half"),a.removeClass("half").addClass("full"),s.addClass("half")),64===r&&(i.removeClass("half"),a.removeClass("full").addClass("half"),s.removeClass("half").addClass("full")),77===r&&(a.removeClass("half"),s.removeClass("full").addClass("half")),90===r&&s.removeClass("half"),103===r&&(r=0)):clearInterval(null)},10)},addScrollParent:function(){var t=this;if(this.blockUI){var e=this.element[0];this.scrollParent=$(this.getScrollParent(e));var n,i=this.scrollParent[0],a=i?i.offsetHeight:0;this.overlay&&this.overlay[0]&&(n=window.getComputedStyle(this.overlay[0],null).getPropertyValue("position"));var s="absolute"===n;if(a&&this.container&&a<=e.offsetHeight){var r=window.innerHeight||document.documentElement.clientHeight,o=a/2-58,l=function(){if(s&&t.element.is(i)){var n=e.scrollTop;t.overlay.css({top:n}),t.container.css({top:o+n})}else if(C.isInViewport(i)&&(u=i).scrollHeight>=u.clientHeight&&u.clientHeight<r-60)t.container[0].offsetHeight&&t.container.css({top:o+i.scrollTop});else{var a=0,l=0,c=e.getBoundingClientRect();if(c.top<0){var d=c.height+c.top;a=d>r?r:d,l=c.top}else a=r-c.top;t.container.css({top:(a-85)/2-l})}var u};l(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",function(){t.container&&l()})}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(t){var e=["overflow","overflow-x","overflow-y"],n=/(auto|scroll)/,i=function(t){return n.test(function(t){return e.reduce(function(e,n){return e+function(t,e){return getComputedStyle(t,null).getPropertyValue(e)}(t,n)},0)}(t))};return function(t){for(var e=!1,n=t;!e&&n&&n.tagName&&"body"!==n.tagName.toLowerCase();){if(i(n)){e=!0;break}n=n.parentNode}return e?n:null}(t)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function(){var t=this;return this.element.on("start.busyindicator",function(e){e.stopPropagation(),t.activate()}).on("afterstart.busyindicator",function(){t.element.on("complete.busyindicator",function(e){e.stopPropagation(),t.close(!0)})}).on("updated.busyindicator",function(){t.close(!0),t.updated()}),this}},$.fn.busyindicator=function(t){return this.each(function(){var e=$.data(this,"busyindicator");e?e.updated(t):e=$.data(this,"busyindicator",new ze(this,t))})};var He={dataset:[],template:null,selectable:!1,expandableHeader:!1,verticalButtonAction:!1,attributes:null};function qe(t,e){this.settings=C.mergeSettings(t,e,He),this.element=$(t),this.init()}qe.prototype={init:function(){this.selectedRows=[],this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-card-".concat($("body").find(".card").index(this.element)),this.element.attr("id",this.id)),this.settings.expandableHeader&&(this.element.addClass("expandable-card"),this.expandableCardHeader=this.element.children(".card-header").addClass("expandable-card-header")),this.cardHeader=this.element.children(".card-header"),this.cardContentPane=this.element.children(".card-pane"),this.buttonAction=this.cardHeader.children(".btn-actions"),!1!==this.settings.selectable&&(this.cards=this.element),this},build:function(){var t=this,e=this.element.hasClass("is-expanded"),n=R?R.translate("Select"):"Select",i="single"===this.settings.selectable;if(this.renderTemplate(),!1!==this.settings.selectable&&(this.cards.find(".card").addClass("is-selectable"),this.cards.addClass(i?"single":"multiple"),this.element.attr("role","list"),this.element.find(".card").attr({role:"listitem",tabindex:"0"})),"multiple"===this.settings.selectable&&this.cards.find(".card").each(function(t){$(this).find(".card-content").prepend('\n          <input type="checkbox" id="checkbox-'.concat(t,'" aria-hidden="true" tabindex="0" role="presentation"\n            class="checkbox">\n            <label for="checkbox-').concat(t,'" class="checkbox-label">\n              <span class="audible">').concat(n,"</span>\n            </label>\n        "))}),this.cardContentPane.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.settings.expandableHeader&&this.expandableCardHeader&&this.expandableCardHeader.attr("role","button"),this.buttonAction.length>0&&this.settings.verticalButtonAction&&this.buttonAction.addClass("vertical"),e&&(this.cardContentPane.addClass("no-transition"),this.element.one("afterexpand.expandable-card",function(){t.cardContentPane.removeClass("no-transition")}),this.open()),e||(this.cardContentPane.addClass("no-transition"),this.element.one("aftercollapse.expandable-card",function(){t.cardContentPane.removeClass("no-transition")}),this.close()),this.settings.expandableHeader||C.addAttributes(this.cardHeader,this,this.settings.attributes,"header",!0),C.addAttributes(this.element,this,this.settings.attributes,"card",!0),C.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"card-content",!0),this.settings.selectable||(C.addAttributes(this.expandableCardHeader,this,this.settings.attributes,"expander",!0),C.addAttributes(this.buttonAction,this,this.settings.attributes,"action",!0),C.addAttributes(this.cardContentPane,this,this.settings.attributes,"content",!0)),"multiple"===this.settings.selectable){var a=this;setTimeout(function(){t.cards.find(".card").each(function(t){var e=$(this);C.addAttributes(e.find(".checkbox-label"),a,a.settings.attributes,"checkbox-label-".concat(t),!0),C.addAttributes(e.find(".card-content .checkbox"),a,a.settings.attributes,"checkbox-".concat(t),!0)})},1)}return this},select:function(t){var e=this.element.find(".card"),n=t.find(".checkbox"),i=t.hasClass("is-selected"),a="";if("single"===this.settings.selectable&&(this.selectedRows=[],e.removeClass("is-selected").removeAttr("aria-selected")),"multiple"===this.settings.selectable&&i)return t.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1),void this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}]);!1!==this.settings.selectable&&(t.addClass("is-selected").attr("aria-selected","true"),"multiple"===this.settings.selectable&&n.prop("checked",!0),this.selectedRows.push({data:this.settings.dataset,elem:t}),a=i?"deselected":"selected"),this.element.triggerHandler(i?"deselected":"selected",[{selectedRows:this.selectedRows,action:a}])},renderTemplate:function(){if(this.settings.template){var t=this.settings;"object"===a(ke)&&t.dataset&&this.settings.template&&(this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(E.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())));var e=ke.compile(this.settings.template,{dataset:t.dataset});t.dataset.length>0?this.cards.html(e):0===t.dataset.length&&this.cards.html(e||'<div class="cards auto-height"></div>')}},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.teardown(),this},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},isDisabled:function(){return this.element.hasClass("is-disabled")},open:function(){var t=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),this.expandableCardHeader.attr("aria-expanded","true"),this.element.triggerHandler("expand",[this.element]),this.cardContentPane[0]&&(this.cardContentPane[0].style.display="block"),this.cardContentPane.one("animateopencomplete",function(){t.element.triggerHandler("afterexpand",[t.element])}).animateOpen({timing:300}))},close:function(){var t=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.element.triggerHandler("collapse",[this.element]),this.cardContentPane.one("animateclosedcomplete",function(){t.element.removeClass("is-expanded"),t.expandableCardHeader.attr("aria-expanded","false"),t.element.triggerHandler("aftercollapse",[t.element]),t.cardContentPane[0].style.display="none"}).animateClosed({timing:300}))},handleEvents:function(){var t,e=this;return null===(t=this.expandableCardHeader)||void 0===t||null==t||t.on("click.cards",function(t){e.isDisabled()||(t.preventDefault(),e.toggleExpanded())}),!1!==this.settings.selectable&&this.element.on("click.".concat("cards"),".card",function(t){var n=$(t.currentTarget),i=$(t.target).is(".checkbox");setTimeout(function(){e.select(n,i)},0),t.stopPropagation(),t.preventDefault()}),this},teardown:function(){return this.element.off("click.".concat("cards")),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"cards")}},$.fn.cards=function(t){var e=$(this),n=e.attr("data-dataset"),i=e.attr("data-tmpl"),a=C.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var s=C.extend({},t,a);return this.each(function(){var t=$.data(this,"cards");t?t.updated(s):t=$.data(this,"cards",new qe(this,s))})},$.fn.popover=function(t){return this.each(function(){var e=$.data(this,"popover");e?e.updated(t):e=$.data(this,"popover",new At(this,t))})};var Ve={destroy:function(t){var e,n;null===(e=t[0])||void 0===e||(n=null==e?void 0:e.classList).remove.apply(n,["line-chart","bar-chart","bar-chart-stacked","bar-chart-grouped","bubble","column-chart","completion-chart","chart-completion-target-padding","chart-pie","has-right-legend"])},tooltip:{}};Ve.isIE="ie"===m.browser.name,Ve.isIEEdge="edge"===m.browser.name,Ve.tooltipSize=function(t){return h.html(this.tooltip.find(".tooltip-content"),t,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},Ve.formatToSettings=function(t,e){var n=t.data?t.data:t,i=e.formatter&&".0f"!==e.formatter?d3.format(e.formatter)(n.percent):"".concat(isNaN(n.percentRound)?0:n.percentRound,"%");return"value"===e.show?e.formatter?d3.format(e.formatter)(n.value):n.value:"label"===e.show?n.name:"label (percent)"===e.show?"".concat(n.name," (").concat(i,")"):"label (value)"===e.show?"".concat(n.name," (").concat(e.formatter?d3.format(e.formatter)(n.value):n.value,")"):"percent"===e.show?i:"function"==typeof e.show?e.show(n):n.value},Ve.appendTooltip=function(t){var e=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(t=t?" ".concat(t):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(t,'">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",function(){e.hideTooltip()})))},Ve.hideTooltip=function(){var t=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",function(){t.hideTooltip()})},Ve.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},Ve.colorRange=function(){var t=st.themeColors().palette;return st.new?[t.azure[80].value,t.turquoise[40].value,t.amethyst[60].value,t.graphite[40].value,t.amber[40].value,t.emerald[70].value,t.ruby[60].value,t.azure[30].value,t.amber[70].value,t.graphite[60].value,t.turquoise[60].value,t.emerald[90].value,t.amethyst[30].value,t.azure[50].value,t.ruby[30].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[80].value,t.graphite[20].value,t.amber[90].value]:[t.azure[70].value,t.turquoise[30].value,t.amethyst[30].value,t.graphite[60].value,t.amber[50].value,t.emerald[60].value,t.ruby[60].value,t.azure[30].value,t.amber[90].value,t.turquoise[80].value,t.ruby[20].value,t.graphite[50].value,t.emerald[50].value,t.azure[50].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[50].value,t.amber[70].value,t.graphite[20].value,t.azure[20].value]},Ve.colorNameRange=function(){return st.new?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},Ve.chartColor=function(t,e,n){var i=Ve.colorRange(),a=n&&n.color?n.color:null;if(a){if("error"===a)return st.themeColors().status.danger.value;if("alert"===a)return st.themeColors().status.warning.value;if("alertYellow"===a)return st.themeColors().status.caution.value;if("good"===a)return st.themeColors().status.success.value;if("neutral"===a)return st.themeColors().palette.graphite[30].value;if(a&&0===a.indexOf("#"))return n.color}return/^(pie|donut)$/.test(e)?i[t]:/^(bar-single|column-single)$/.test(e)?i[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?i[t]:""},Ve.chartColorName=function(t,e,n){var i=n&&n.color?n.color:null;if(i){if("error"===i)return"alert01";if("alert"===i)return"alert02";if("alertYellow"===i)return"alert03";if("good"===i)return"alert04";if("neutral"===i)return"graphite03";if(i&&0===i.indexOf("#"))return n.color}return/^(pie|donut)$/.test(e)?this.colorNameRange()[t]:/^(bar-single|column-single)$/.test(e)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?this.colorNameRange()[t]:""},Ve.showTooltip=function(t,e,n,i,a){var s,r,o=this;t<0&&(t=2),this.tooltip[0].style.left="".concat(t,"px"),this.tooltip[0].style.top="".concat(e,"px"),h.html(this.tooltip.find(".tooltip-content"),n,"*"),this.tooltip.removeClass("bottom top left right").addClass(i),this.tooltip.css("max-width",(null==a||null===(s=null==a?void 0:a.tooltip)||void 0===s||null==s?void 0:s.maxWidth)||""),this.tooltip.find(".arrow").css("left",(null==a||null===(r=null==a?void 0:a.arrow)||void 0===r||null==r?void 0:r.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){o.hideTooltip()}),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){o.hideTooltip()})},Ve.addLegend=function(t,e,n,i){var a,s=this;if(0!==t.length){var r,o=0,l=0,c=t.length;for(a=0;a<t.length;a++)r=t[a].name?6*t[a].name.length:6,o=t[a].name&&r>o?r:o,(l+=r)/$(i).width()*100<=45&&(c=a+1);var d=(o+=55)/$(i).width()*100>45,h=d||t[0].placement&&"bottom"===t[0].placement;d||(c=t.length),h&&$(i).hasClass("has-right-legend")&&$(i).removeClass("has-right-legend");var p=t[0].display&&"twocolumn"===t[0].display,f=p?$('<div class="chart-legend '.concat(t[0].placement&&!h?"is-".concat(t[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');for("pie"!==e&&"donut"!==e||!n.showMobile||(f=$('<div class="chart-legend"><div class="container"></div></div>')),a=0;a<c;a++)if(t[a].name){var g="";(p||t[a].display&&"block"===t[a].display)&&(g+=" lg"),"column-positive-negative"===n.type&&t[a].option&&(g+=" ".concat(t[a].option));var m='<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(g,'" tabindex="0" role="button"></span>'),v=Ve.chartColor(a,e||(1===t.length?"bar-single":"bar"),t[a]),b=Ve.chartColorName(a,e||(1===t.length?"bar-single":"bar"),t[a]),y="";"#"===b.substr(0,1)?(y=$('<span class="chart-legend-color"></span>'),t[a].pattern||y.css("background-color",v)):y=$('<span class="chart-legend-color '.concat(t[a].pattern?"":b,'"></span>')),"scatterplot"===e&&(y=$('<span class="chart-legend-color"></span>'));var w=$('<span class="chart-legend-item-text">'.concat(u.stripTags(t[a].name),"</span>"));if(t[a].pattern&&(y.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(t[a].pattern,')"/></svg>')),y.find("rect").css("fill",v)),t[a].percent){var x=$('<span class="chart-legend-percent"></span>').text(t[a].percent);w.append(x)}t[a].display&&"block"===t[a].display&&(m='<span class="chart-legend-item'.concat(g,'" tabindex="0" role="button"></span>')),p&&(m=d&&h?'<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(g,' is-one-line" tabindex="0" role="button"></span>'):'<span index-id="chart-legend-'.concat(a,'" class="chart-legend-item').concat(g,' is-two-column" tabindex="0" role="button"></span>')),(m=$(m)).append(y,'<span class="audible">'.concat(R.translate("Highlight"),"</span>"),w);var k,T,A="legend-".concat(a);n.attributes?C.addAttributes(m,t[a],n.attributes,A,!0):C.addAttributes(m,t[a],null===(k=t[a])||void 0===k||null===(T=null==k?void 0:k.data)||void 0===T||null==T?void 0:T.attributes,A,!0),"pie"!==e&&"donut"!==e||!n.showMobile?f.append(m):f.find(".container").append(m),(t[a].display&&"block"===t[a].display||p&&d&&h)&&m.css({float:"none",display:"block",margin:"0 auto",width:"".concat(o,"px")}),"scatterplot"===e&&(self.svg=d3.select(y[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type(function(){return d3.symbols[a]})).style("fill",v)),innerWidth<=480&&t[a].data&&t[a].data.legendAbbrName&&w.replaceWith('<span class="chart-legend-item-text">'.concat(t[a].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&t[a].data&&t[a].data.legendShortName&&w.replaceWith('<span class="chart-legend-item-text">'.concat(t[a].data.legendShortName,"</span>"))}if(f instanceof $){var S=/^chart-legend-(.+)/;if(f.on("click.chart",".chart-legend-item",function(){var e=$(this).attr("index-id").match(S)[1];Ve.handleElementClick(e,this,t,n)}).on("keypress.chart",".chart-legend-item",function(e){if(13===e.which||32===e.which){var i=$(this).attr("index-id").match(S)[1];Ve.handleElementClick(i,this,t,n)}}),h&&d&&t.length>c){for(var E=$('\n      <button class="btn-actions list-button" type="button">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation" style="min-height: 0">\n          <use href="#icon-bullet-steps"></use>\n        </svg>\n      </button>\n      '),D=$('<ul class="popupmenu"></ul>'),I=c;I<t.length;I++){var M=$('<li><a index-id="chart-legend-'.concat(I,'" href="#"><div class="chart-popup-menu"></div></a></li>')),L=$('<span class="chart-popup-menu-text">'.concat(u.stripTags(t[I].name),"</span>")),P=Ve.chartColor(I,e||(1===t.length?"bar-single":"bar"),t[I]),N=Ve.chartColorName(I,e||(1===t.length?"bar-single":"bar"),t[I]),O="";"#"===N.substr(0,1)?(O=$('<span class="chart-popup-menu-color"></span>'),t[a].pattern||O.css("background-color",P)):O=$('<span class="chart-popup-menu-color '.concat(t[a].pattern?"":N,'"></span>')),M.find("div").append(O,L),D.append(M)}f.css({"min-height":"40px","max-height":"50px",display:"flex"}),$(i).addClass("auto-height"),f.append(E),$(i).append(f),D.insertAfter(E),E.popupmenu({menu:D}),E.on("selected",function(e,i){var a=$(i[0]).attr("index-id").match(S)[1];Ve.handleElementClick(a,s,t,n)})}else $(i).append(f)}}},Ve.handleElementClick=function(t,e,n,i){var a,s,r=$(null==i||null===(a=null==i?void 0:i.svg)||void 0===a||null==a?void 0:a.node()).closest(".chart-container").data("chart"),o=null==r||null==r?void 0:r.initialSelectCall,l=n[t];if("radar"===i.type&&(s=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[t])),"pie"===i.type||"donut"===i.type?s=d3.select(i.svg.selectAll(".slice").nodes()[t]):/positive-negative/.test(i.type)?s=!l.option||l.option&&"target"===l.option?i.svg.select(".target-bar"):i.svg.select(".bar.".concat(l.option)):-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&(i.isGrouped||i.isSingle?s=i.svg.select(".series-".concat(t)):i.isStacked&&!i.isSingle&&(s=d3.select(i.svg.selectAll("bar"===i.type||"bar-stacked"===i.type||"bar-normalized"===i.type?".series-group":".g").nodes()[t]).select(".bar"))),-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)){var c=$(e),d="true"===c.attr("aria-pressed");Ve.clickedLegend=!0,s.dispatch("click"),c.parent().find("[aria-pressed]").removeAttr("aria-pressed"),d||c.attr("aria-pressed","true")}l.selectionObj&&Ve.selectElement(d3.select(l.selectionObj.nodes()[t]),l.selectionInverse,l.data,void 0,i.dataset,o)},Ve.selected=[],Ve.clearSelected=function(t){if(t){var e=function(t){Object.prototype.hasOwnProperty.call(t,"selected")&&delete t.selected};!function t(n){Array.isArray(n)&&n.forEach(function(n){e(n),n.data&&t(n.data)}),e(n)}(t)}},Ve.selectElement=function(t,e,n,i,a,s){var r=t.node()&&t.classed("is-selected");Ve.clearSelected(a),r||(n.selected=!0);var o=[{elem:t.nodes(),data:r?{}:n}];e.classed("is-selected",!1).classed("is-not-selected",!r),t.classed("is-not-selected",!1).classed("is-selected",!r),Ve.selected=$.isEmptyObject(o[0].data)?[]:o,s||$(i).triggerHandler("selected",[o])},Ve.setSelectedElement=function(t){var e,n=t.dataset,i=/positive-negative/.test(t.type),a=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(t.type),s="pie"===t.type||"donut"===t.type,r=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(t.type),o=t.svg,l=t.isSingle,c=t.isGrouped,d=t.isStacked,u="selected"===t.task,h=d3.select(t.selector),p=h.classed("positive"),f=t.svg.selectAll(".axis.x .tick"),g=t.svg.selectAll(".axis.y .tick"),m=t.svg.selectAll(".bartext.positive, .target-bartext.positive"),v=t.svg.selectAll(".bartext.negative, .target-bartext.negative"),b=t.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),y=d3.select(t.selector.parentNode),w=parseInt(y.node()?y.attr("data-group-id"):0,10),x=[],C=[];if(n=d||s?n||null:n&&n[w]?n[w].data||n[w]:null,f.style("font-weight","normal"),g.style("font-weight","normal"),m.style("font-weight","normal"),v.style("font-weight","normal"),o.selectAll(".is-selected").classed("is-selected",!1),Ve.clearSelected(t.dataset),s&&o.selectAll(".is-not-selected").classed("is-not-selected",!1),i&&Object.prototype.hasOwnProperty.call(t.dataset[0],"targetBarsSelected")&&delete t.dataset[0].targetBarsSelected,u)if(o.selectAll(".bar, .target-bar").style("opacity",.6),Ve.clickedLegend&&!s)i?(t.isTargetBar?(t.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),b.style("font-weight","bolder"),t.dataset[0].targetBarsSelected=!0):(t.svg.selectAll(p?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(p?m:v).style("font-weight","bolder")),o.selectAll(".bar").each(function(t,e){var i=d3.select(this);if(i.classed("is-selected")){var a=n?n[e]:t;a.selected=!0,C.push({elem:i.node(),bardata:a})}}),x=C):(r||a)&&(c||l?t.svg.selectAll(".series-"+t.i).classed("is-selected",!0).style("opacity",1):y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each(function(n,i){var s=d3.select(this);(e=t.dataset)||(e=n),a&&!d?c?e=t.dataset[i].data[t.i]:(e[i][t.i]&&(e=e[i][t.i]),e[t.i]&&e[t.i][i]&&(e=e[t.i][i]),e[i]&&e[i][t.i]&&(e=e[i][t.i])):d&&!l?(e[w]&&e[w].data[i]&&(e=e[w].data[i]),a&&(t.dataset[w].selected=!0)):(e[i].data[t.i]&&(e=e[i].data[t.i]),e[t.i]&&e[t.i].data[i]&&(e=e[t.i].data[i]),e[i]&&e[i].data[t.i]&&(e=e[i].data[t.i])),e.selected=!0,C.push({elem:s.node(),data:e})}),x=C);else if(l&&d&&r)e=n[0]&&n[0].data?n[0].data:t.d,h.classed("is-selected",!0).style("opacity",1),x.push({elem:h.nodes(),data:e[t.i]});else if(!l&&!c||d||!r&&!a){if(r||a)o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat(t.i+2,")")).style("font-weight","bolder"),o.selectAll(".bar:nth-child(".concat(t.i+1,")")).classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each(function(e,i){var s=d3.select(this),r=e;n&&(r=a&&d&&void 0!==n[i][t.i]?n[i][t.i]:n[i].data[t.i]),r.selected=!0,C.push({elem:s.node(),data:r})}),x=C;else if(s){o.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var k=n&&n[0]&&n[0].data?n[0].data[t.i]:t.d?t.d.data:t.d;(k=k||{}).selected=!0,h.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),x.push({elem:h.nodes(),data:k,index:t.i})}}else{if(o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat((c?w:t.i)+2,")")).style("font-weight","bolder"),h.classed("is-selected",!0).style("opacity",1),i){var T=t.isTargetBar?t.i:t.i-t.dataset[0].data.length;o.select(".target-bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),o.select(".bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),d3.select(o.selectAll(".bartext").nodes()[T]).style("font-weight","bolder"),d3.select(o.selectAll(".target-bartext").nodes()[T]).style("font-weight","bolder")}(c||i||r)&&((!i&&!r||r&&c)&&y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),y.selectAll(".bar").each(function(t,e){var i=d3.select(this);if(i.classed("is-selected")){var a=n?n[e]:t;a.selected=!0,C.push({elem:i.node(),data:a})}}),c?x.push({groupIndex:w,groupElem:y.nodes()[0],groupItems:C}):x=C)}else o.selectAll(".bar, .target-bar").style("opacity",1),m.style("font-weight","bolder"),v.style("font-weight","bolder"),s&&h.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");Ve.clickedLegend&&(Ve.clickedLegend=!1),Ve.selected=x,t.isTrigger&&$(t.container).triggerHandler(u?"selected":"unselected",[x])},Ve.setSelected=function(t,e,n){if(t){var i,a,s,r,o,l=0,c=C.equals,d=n.isPie?n.svg.node().nextSibling:n.svg.node().parentNode.nextSibling,u=d3.select(d),h=u.node()&&u.classed("chart-legend"),p=function(e){var r=!!e;(e=r?d3.select(e):n.svg).selectAll(".bar").each(function(e,o){e&&l<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&c(t.data,n.chartData[e.index].data[o])||t.elem&&$(this).is(t.elem))&&(l++,a=d3.select(this),i=o,r&&!n.isStacked&&(s=!0))})};n.isGrouped||n.isStacked&&!n.isSingle?(n.chartData.forEach(function(e,o){l<1&&(r=$(n.svg.select('[data-group-id="'+o+'"]').node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===o||t.data&&c(t.data,e)||t.elem&&r.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(l++,a=n.svg.select('[data-group-id="'+o+'"]').select(".bar"),i=o,n.isStacked&&!n.isGrouped&&(s=!0)))}),l<1&&(o=n.svg.selectAll(".series-group")).nodes().length&&o.each(function(){p(this)})):p(),l>0&&(e||!a.classed("is-selected"))&&(s?h&&$(u.selectAll(".chart-legend-item").nodes()[i]).trigger("click.chart"):a.dispatch("click"))}},Ve.labelsColide=function(t){var e=t.selectAll(".x text"),n=!1;return e.each(function(t,i){var a,s=this.getBoundingClientRect();e.each(function(t,e){i!==e&&(a=this.getBoundingClientRect(),!(s.right<a.left||s.left>a.right||s.bottom<a.top||s.top>a.bottom)&&(n=!0))})}),n},Ve.applyAltLabels=function(t,e,n,i,a){(i?t.selectAll(i):t.selectAll(".x text")).each(function(t,i){var s=e[i]?e[i][n]:"";s=s||(a?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(s)})},Ve.triggerContextMenu=function(t,e,n){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var i=$.Event("contextmenu");i.target=e,i.pageX=d3.event.pageX,i.pageY=d3.event.pageY,$(t).trigger(i,[e,n])},Ve.calculateTextRenderWidth=function(t,e){var n;e=C.mergeSettings(void 0,e,{soho:"700 12px arial",uplift:"600 14px arial",classic:"700 12px arial",new:"600 14px arial"});var i=((null==st||null===(n=null==st?void 0:st.currentTheme)||void 0===n||null==n?void 0:n.id)||"").match(/soho|uplift|new|classic/);i=i?i[0]:"new",this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var a=this.canvas.getContext("2d");return a.font=e[i],a.measureText(t).width},Ve.calculatePercentage=function(t,e){return 100*t/e},Ve.getPercentage=function(t,e){return t*e/100},Ve.trimText=function(t,e){return t.length<=e?t:"".concat(t.substr(0,e),"...")},Ve.getLabel=function(t,e){var n=t.name;return e.xxsmall||e.xsmall||e.small?n=t.shortName||t.abbrName||t.name:e.medium&&(n=t.abbrName||t.name),n},Ve.wrap=function(t,e,n){n||(n=1.27),e||(n=60),t.each(function(){var t=d3.select(this),i=t.text().split(/\s+/).reverse(),a="",s=[],r=0;if(!(i.length<=1))for(var o=n,l=t.attr("y"),c=t.attr("x"),d=parseFloat(t.attr("dy")),u=t.text(null).append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(d,"em"));a=i.pop();)s.push(a),u.text(s.join(" ")),u.node().getComputedTextLength()>e&&(s.pop(),u.text(s.join(" ")),s=[a],u=t.append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(++r*o+d,"em")).text(a))})};var je={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function We(t,e){this.settings=C.mergeSettings(t,e,je),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}We.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t=this,e=this.settings.dataset[0],n=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var i=0,s=[],r=e.data[0]?e.data[0].tooltip:[],o=!1,l=this.element.parent(),c=l.width()-40-35,d=l.height()-30-35-30;d=d<0?50:d;for(var u=d3.select(this.element[0]).append("svg").attr("width",c+40+35).attr("height",d+30+35).append("g").attr("transform","translate(".concat(40,",").concat(30,")")),h=function(n,i,a){function s(t,e,n){var i=t(e,n);return void 0!==i?i:e}return e.format&&"function"==typeof e.format[n]?s(e.format[n],i,a):e.format&&"string"==typeof e.format[n]?d3.format(e.format[n])(i):t.settings.format&&"function"==typeof t.settings.format[n]?s(t.settings.format[n],i,a):t.settings.format&&"string"==typeof t.settings.format[n]?d3.format(t.settings.format[n])(i):i},p=function(t,e){return h("ranges",t,e)},f=function(t){return h("difference",t)},g=1===e.data.length,m=function(l){var d=t.settings.animate?400:0,h=t,m=e.data[l],v=m.ranges.slice().sort(d3.descending),b=m.markers?m.markers.slice().sort(d3.descending):[],y=m.measures?m.measures.slice().sort(d3.descending):[],w=m.ranges.slice().sort(d3.ascending),x=m.markers?m.markers.slice().sort(d3.ascending):[],k=m.measures?m.measures.slice().sort(d3.ascending):[],T=g?"":"-group".concat(l);0===b.length&&(b=y,x=k,o=!0);var A=u.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*l,")"));A.append("g").append("text").attr("class","title").attr("dy","-10px").text(function(){return m.title}).call(function(t){var n=t._groups[0][0];C.addAttributes($(n),e,e.attributes,"title".concat(T))}).append("tspan").attr("class","subtitle").attr("dx","15px").text(function(){return m.subtitle}).call(function(t){var n=t._groups[0][0];C.addAttributes($(n),e,e.attributes,"subtitle".concat(T))});var S=Math.max(v[0],b[0],y[0]),E=Math.min(w[0],x[0],k[0]);E=E<0?E:0;var D,I,M=d3.scaleLinear().domain([E,S]).range([0,c]).nice(),L=(I=(D=M)(0),function(t){return Math.abs(D(t)-I)}),P=A.selectAll("rect.range").data(v),N=!1,R=0;h.element.off("dblclick.".concat(h.namespace)).on("dblclick.".concat(h.namespace),"*",function(t){t.stopImmediatePropagation()}),P.enter().append("rect").call(function(t){t._groups.forEach(function(t){t.forEach(function(t,n){C.addAttributes($(t),e,e.attributes,"range".concat(n).concat(T))})})}).attr("class",function(t,e){return"range s".concat(e)}).attr("data-idx",l).attr("width",0).attr("x",function(t){return M(t<0?t:0)}).style("fill",function(t,n){return e.barColors?e.barColors[n]:""}).attr("height",20).on("click.".concat(h.namespace),function(){var t=d3.select(this);R=setTimeout(function(){N||h.element.trigger("selected",[t,e.data[t.attr("data-idx")]]),N=!1},200)}).on("dblclick.".concat(h.namespace),function(){var t=d3.select(this);clearTimeout(R),N=!0,h.element.trigger("dblclick",[t,e.data[t.attr("data-idx")]])}).on("mouseenter.".concat(h.namespace),function(t,o){var c=d3.select(this),d=e.data[c.attr("data-idx")],u=this.getBoundingClientRect(),h="<p>".concat(p(t,o),"</p>"),f=function(){var t=Ve.tooltipSize(h),e=u.left+u.width-t.width/2,i=u.top-t.height+$(window).scrollTop()-5;""!==h&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[n?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(e,i,h,"top"))};if(d.tooltip&&d.tooltip[o]&&(h=d.tooltip[d.tooltip.length-o-1]),r&&"function"==typeof r&&!s[o]){h="";var g=!0;i=setInterval(function(){g&&(g=!1,r(function(t){h=t,s[l]=t})),""!==h&&(clearInterval(i),f())},10)}else r="object"===a(r)?"":r,h=s[l]||r||h||"",f()}).on("mouseleave.".concat(h.namespace),function(){clearInterval(i),Ve.hideTooltip()}).on("contextmenu.".concat(h.namespace),function(t){Ve.triggerContextMenu(h.element,d3.select(this).nodes()[0],t)}).merge(P).transition().duration(d).attr("width",L);var O=A.selectAll("rect.measure").data(y);O.enter().append("rect").call(function(t){t._groups.forEach(function(t){t.forEach(function(t,n){C.addAttributes($(t),e,e.attributes,"measure".concat(n).concat(T))})})}).attr("class",function(t,e){return"measure s".concat(e)}).attr("width",0).attr("height",3).attr("x",function(t){return M(t<0?t:0)}).style("fill",function(t,n){return e.lineColors?e.lineColors[n]:""}).attr("y",8.5).merge(O).transition().duration(d).attr("width",L);var B=1===b.length,_=A.selectAll("line.marker").data(b);_.enter().append("line").call(function(t){t._groups.forEach(function(t){t.forEach(function(t,n){var i=B?"marker".concat(T):"marker".concat(n).concat(T);C.addAttributes($(t),e,e.attributes,i)})})}).attr("class",o?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",function(t,n){return e.markerColors?e.markerColors[n]:""}).attr("y1",20/6).attr("y2",100/6).merge(_).transition().duration(d).attr("x1",M).attr("x2",M).attr("y1",20/6).attr("y2",100/6);var F=(b[0]>y[0]?"-":"+")+Math.abs(b[0]-y[0]);0!==Math.abs(b[0]-y[0])&&_.enter().append("text").call(function(t){var n=t._groups[0][0];C.addAttributes($(n),e,e.attributes,"difference".concat(T))}).attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",Ve.isRTL?"-20px":"20px").attr("x",0).text(f(F)).merge(_).transition().duration(d).attr("x",function(){var t=0;return A.selectAll(".measure").each(function(e){var n=L(e),i=M(e);n>t&&(t=n),i>t&&(t=i)}),Ve.isRTL?-t:t}).style("opacity",1);var z=A.selectAll("g.tick").data(M.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);z.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),z.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",function(t){return t<0?"negative-value":"positive-value"}).text(function(t,e){return p(t,e)}),z.transition().duration(d).attr("transform",function(t){return"translate(".concat(M(t),",0)")}).style("opacity",1),Ve.isRTL&&Ve.isIE&&u.selectAll("text").attr("transform","scale(-1, 1)")},v=0;v<e.data.length;v++)m(v);return Ve.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".range").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var Ue={dataset:[]};function Ge(t,e){this.settings=C.mergeSettings(t,e,Ue),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ge.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var t=this,e=this.settings.dataset[0];0===this.settings.dataset.length&&((e={}).data=[{name:{text:R?R.translate("NoData"):"No Data Available"},completed:{value:0}}]);var n=e.data[0],i="completion-target"===this.settings.type,a="targeted-achievement"===this.settings.type;this.element.addClass("completion-chart").addClass("".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")).attr("role","image"),n.total=$.extend({},{value:100},n.total);var s,r=function(t){return void 0===t},o=function(t,e){var n=e?0:"";return r(t)?n:t},l=function(t,e){return e=e||n,Math.round(t/o(e.total.value,!0)*100)},c=function(t){return R.formatNumber(t/100,{style:"percent",maximumFractionDigits:0})},d=function(t,e){var i=t.toString();return-1!==i.indexOf("%")?function(t,e){return t/100*o((e=e||n).total.value,!0)}(i.replace(/%/g,""),e):t},u=function(t,e,n,i){var a=l(e,i),s=(a=a<0?0:a)>100?100:a;if(t[0].style.width="".concat(s,"%"),n>0){var r=l(n,i);t[0].style.left="".concat(r,"%")}0===s&&(t[0].className+="is-empty")},p=function(t,e,n){var i=n?t._value:t.value;return t&&!r(i)&&t.format?function(t,e,n){return".0%"===e?c(l(t,n)):d3.format(e||"m")(t)}(d(i,e),t.format,e):t?d(i,e):0},f=this,g=$.extend({},{show:!1,color1:"",color2:"inverse"},n.percentText);r(g.color)||""!==g.color1||(g.color1=g.color);var m,v={body:$('<div class="total bar" />')},b=function(t){var e={};return(t=t||n).info&&!r(t.info.color)&&0===n.info.color.indexOf("#")&&(e.info=!0),t.completed&&!r(t.completed.color)&&0===t.completed.color.indexOf("#")&&(e.completed=!0),t.remaining&&!r(t.remaining.color)&&0===t.remaining.color.indexOf("#")&&(e.remaining=!0),t.targetline&&!r(t.targetline.color)&&0===t.targetline.color.indexOf("#")&&(e.targetline=!0),e}();if(i||a){var y=function(t){var e="",i={};return(t=t||n).total.difference&&(i.value=t.total.value-t.completed.value,i.format=n.total.format),e=(t.total.textOnly?"":p(t.total.difference?i:t.total))+(t.total.text||""),a&&t.remaining?(t.remaining.textOnly?"":p(t.remaining))+(t.remaining.text||""):e}();v.body.addClass("chart-completion-target".concat(a?" chart-targeted-achievement":"")),v.label='<span class="label">\n        <span class="name">'.concat(o(n.name.text)," ").concat(n.completed.color&&"error"===n.completed.color?$.createIcon({icon:"error",classes:"icon-error"}):"",'</span>\n        <span class="l-pull-right total value">').concat(y,"</span>\n      </span>")}else{v.body.addClass("chart-completion");var w=o(n.name.text),x=o(n.completed.color),k=o(n.info.color),T=n.info.color&&!b.info?k:"",A=o(n.info.text);b.completed||(T=x);var S="";n.info.color&&b.info&&(S=k),b.completed&&(S=x);var E=n.info&&!r(n.info.value)?o(n.info.value):p(n.completed);v.label='<b class="label name">'.concat(w,'</b>\n      <b class="label info ').concat(T,' colored">\n      <span class="value ').concat(T,'" ').concat(S?'style="color:'.concat(S):"",'">').concat(E,'</span>\n      <span class="text ').concat(T,'" ').concat(S?'style="color:'.concat(S):"",'">').concat(A,"</span>\n      </b>")}return n.remaining?v.remaining="".concat('<div class="target remaining bar').concat(b.remaining?"":" ".concat(o(n.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(n.remaining.color,";background-color:").concat(n.remaining.color,';"'):"",'">').concat(a?"":"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(b.remaining?"":" ".concat(o(n.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(p(n.remaining),"</span><br />")+'<span class="text'.concat(b.remaining?"":" ".concat(o(n.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(n.remaining.color,';"'):"",'">').concat(o(n.remaining.text),"</span>")+"</span>","</div>"):v.remaining='<div class="target remaining bar" style="opacity: 0"></div>',n.completed&&a&&(m=m||n,g._value=m.completed?m.completed.value:0,g.percent=l(o(g._value,!0),m),g.format=".0%",g._text=void 0!==g.text?g.text:void 0!==g.value?c(g.value):p(g,m,!0),g.color=g[g.percent>55?"color2":"color1"],b.percentText=0===g.color.indexOf("#"),v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(o(n.completed.color)),'"').concat(b.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",'"></div>').concat(g.show?'<div class="chart-percent-text'.concat(b.percentText||""===g.color?"":" ".concat(g.color),'"').concat(b.percentText?' style="color:'.concat(g.color,';"'):"",">").concat(g._text,"</div>"):"",'<span class="completed-label"').concat(i||a?"":' class="audible"',">")+'<span class="text">'.concat(o(n.completed.text),"</span>")+"</span>"),(n.completed.text||n.completed.format&&!a)&&this.element.addClass("chart-completion-target-padding"),n.completed&&!a&&(v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(o(n.completed.color)),'"').concat(b.completed?' style="color:'.concat(n.completed.color,";background-color:").concat(n.completed.color,';"'):"",">")+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(b.completed?"":" ".concat(o(n.completed.color)),'"').concat(b.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(p(n.completed),"</span><br />")+'<span class="text'.concat(b.completed?"":" ".concat(o(n.completed.color)),'"').concat(b.completed?' style="color:'.concat(n.completed.color,';"'):"",'">').concat(o(n.completed.text),"</span>")+"</span></div>"),n.targetline&&(v.targetline="".concat('<div class="target-line targetline bar').concat(b.targetline?"":" ".concat(o(n.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(n.targetline.color,";background-color:").concat(n.targetline.color,';"'):"",'">')+"<span".concat(i||a?"":' class="audible"',">")+'<span class="value'.concat(b.targetline?"":" ".concat(o(n.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(p(n.targetline),"</span><br />")+'<span class="text'.concat(b.targetline?"":" ".concat(o(n.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(n.targetline.color,';"'):"",'">').concat(o(n.targetline.text),"</span>")+"</span></div>"),h.append(v.body,(v.remaining||"")+(v.completed||"")+(v.targetline||""),"<a><use><svg><div><span><br>"),h.append(this.element,v.label+v.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),s={name:$(".name",t.element),info:{value:$(".info .value",t.element),text:$(".info .text",t.element)},plainInfo:{value:$(">.value",t.element),text:$(">.text",t.element)},completed:{bar:$(".completed.bar",t.element),value:$(".completed .value",t.element),text:$(".completed .text, .completed-label .text",t.element)},remaining:{bar:$(".remaining.bar",t.element),value:$(".remaining .value",t.element),text:$(".remaining .text",t.element)},targetline:{bar:$(".targetline",t.element),value:$(".targetline .value",t.element),text:$(".targetline .text",t.element)},total:{bar:$(".total.bar",t.element),value:$(".total.value",t.element)},percentText:$(".chart-percent-text",t.element)},function(){if(e.attributes){var t=function(t,n){return C.addAttributes(t,e,e.attributes,n)};t(s.name,"name"),t(s.info.value,"info-value"),t(s.info.text,"info-text"),t(s.plainInfo.value,"info-value"),t(s.plainInfo.text,"info-text"),t(s.completed.bar,"completed-bar"),t(s.completed.value,"completed-value"),t(s.completed.text,"completed-text"),t(s.remaining.bar,"remaining-bar"),t(s.remaining.value,"remaining-value"),t(s.remaining.text,"remaining-text"),t(s.targetline.bar,"targetline-bar"),t(s.targetline.value,"targetline-value"),t(s.targetline.text,"targetline-text"),t(s.total.bar,"total-bar"),t(s.total.value,"total-value"),t(s.percentText,"percent-text")}}(),function(t){t=t||n,s.name.data("jsonData",{name:t.name}),s.info.value.add(s.info.text).data("jsonData",{info:t.info}),s.completed.bar.add(s.completed.value).add(s.completed.text).data("jsonData",{completed:t.completed}),s.remaining.bar.add(s.remaining.value).add(s.remaining.text).data("jsonData",{remaining:t.remaining}),s.targetline.bar.add(s.targetline.value).add(s.targetline.text).data("jsonData",{targetline:t.targetline}),s.total.bar.add(s.total.value).data("jsonData",{total:t.total}),s.percentText.data("jsonData",{percentText:t.percentText})}(),function(t){var e;if((t=t||n).completed){e=d(t.completed.value,t),u(s.completed.bar,e,0,t);var r,o=s.completed.bar.data("tooltip");r=t.completed.tipText?t.completed.tipText:"string"==typeof t.completed.value?t.completed.value:"".concat(Math.round(t.completed.value/t.total.value*100),"%"),o?o.setContent(r,!1):s.completed.bar.tooltip({content:r})}if(t.remaining){e=d(t.remaining.value,t),u(s.remaining.bar,e,d(t.completed.value,t),t),i&&!a&&setTimeout(function(){var t=$(".remaining",f.element),e=$(".total",f.element),n=$(".completed .value",f.element)[0].getBoundingClientRect(),i=t.find(".value")[0].getBoundingClientRect();t.add(e)[n.right>i.left-20?"addClass":"removeClass"]("overlap")},500);var l,c=s.remaining.bar.data("tooltip");l=t.remaining.tipText?t.remaining.tipText:"string"==typeof t.remaining.value?t.remaining.value:"".concat(Math.round(t.remaining.value/t.total.value*100),"%"),c?c.setContent(l,!1):s.remaining.bar.tooltip({content:l})}t.targetline&&(e=d(t.targetline.value,t),function(t,e){var n=e>100?100:e<0?0:e;t[0].style.left="".concat(n,"%")}(s.targetline.bar,e))}(),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("completion-chart"),function(){t.updated()}),this},updated:function(t){var e=t.type||this.settings.type;return this.settings=t,this.settings.type=e,t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function(){this.element.empty().removeClass("completion-chart"),Ve.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var Ye={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function Ke(t,e){this.settings=C.mergeSettings(t,e,Ye),this.element=$(t),this.init()}Ke.prototype={init:function(){if(!this.settings.colors){var t=st.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=t.azure[st.uplift||st.new?"80":"70"].value,this.settings.colors[1]=t.slate[40].value,this.settings.colors[2]=t.slate[30].value,this.settings.colors[3]=t.slate[20].value}return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var t,e,n,i=this,s=this,r=this.element.closest(".is-personalizable").length>0,o=[],l=[],c=s.settings.tooltip,d=0,u=0,h=0,p=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),f=p.width>300?4:3,g=s.settings.dataset;for(n=0;n<g.length;n++)u=d3.min([d3.min(g[n].data),u]),d=d3.max([d3.max(g[n].data),d]),h=d3.max([g[n].data.length,h]);var m=p.width,v=p.height,b=d3.scaleLinear().domain([0,h]).range([10,m-10]),y=d3.scaleLinear().domain([u,d]).range([v-10,10]),w=d3.line().x(function(t,e){return b(e)}).y(function(t){return y(t)});Ve.appendTooltip();var x=d3.select(this.element[0]).append("svg").attr("height",v).attr("width",m);if(s.settings.isMedianRange){d=d3.max(g[0].data),u=d3.min(g[0].data);var k=m-45,T=d3.median(g[0].data),A=d-u,S=d3.scaleLinear().domain([u,d]).range([0,v]),E=v-S(T>A?T:A),D=v-S(T<A?T:A);x.append("g").attr("class","medianrange").attr("transform",function(){return"translate(".concat(10,",").concat(E,")")}).append("rect").attr("width",k).attr("height",D).style("opacity","0.06").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=g[0];C.addAttributes($(t),e,e.attributes,"medianrange")})})}).on("mouseenter.".concat(s.namespace),function(){var e=this.getBoundingClientRect(),i='<p class="sparkline-tooltip">'+R.translate("Median")+": <b>"+T+"</b><br>"+R.translate("Range")+": <b>"+A+"</b>"+(s.settings.isPeakDot?"<br>"+R.translate("Peak")+": <b>"+d+"</b>":"")+"</p>",l=function(){var t=Ve.tooltipSize(i),n=e.left+(e.width-t.width)/2,a=e.top-t.height-5;""!==i&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[r?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(n,a,i,"top"))};if(c&&"function"==typeof c&&!o[n]){i="";var u=!0;t=setInterval(function(){u&&(u=!1,c(function(t){i=t,o[n]=t})),""!==i&&(clearInterval(t),l())},10)}else c="object"===a(c)?"":c,i=o[n]||c||g[0].tooltip||i||"",l()}).on("mouseleave.".concat(s.namespace),function(){clearInterval(t),Ve.hideTooltip()})}var I=function(){var t=g[n];x.append("g").append("path").attr("d",w(t.data)).attr("stroke",s.settings.isMinMax?"#999999":i.sparklineColors(n)).attr("class","team connected-line").call(function(e){e._groups.forEach(function(e){e.forEach(function(e){C.addAttributes($(e),t,t.attributes,"connected-line")})})})};for(n=0;n<g.length;n++)I();return u=d3.min(g[0].data),x.selectAll(".point").data(g[0].data).enter().append("circle").attr("r",function(t){return s.settings.isMinMax&&d===t||s.settings.isMinMax&&u===t?f+1:s.settings.isDots||s.settings.isPeakDot&&d===t?f:0}).attr("class",function(t){return s.settings.isPeakDot&&d===t&&!s.settings.isMinMax?"point peak":s.settings.isMinMax&&d===t?"point max":s.settings.isMinMax&&u===t?"point min":"point"}).style("fill",function(t){return s.settings.isPeakDot&&d===t&&!s.settings.isMinMax?"#ffffff":s.settings.isMinMax&&d===t?"#56932E":s.settings.isMinMax&&u===t?"#941E1E":s.sparklineColors(0)}).style("stroke",function(t){return s.settings.isPeakDot&&d===t&&!s.settings.isMinMax?s.sparklineColors(0):s.settings.isMinMax&&d===t||s.settings.isMinMax&&u===t?"none":"#ffffff"}).style("cursor","pointer").attr("cx",function(t,e){return b(e)}).attr("cy",function(t){return y(t)}).call(function(t){t._groups.forEach(function(t){t.forEach(function(t,e){var n=g[0];C.addAttributes($(t),n,n.attributes,"point-".concat(e))})})}).on("mouseenter.".concat(s.namespace),function(t){var i=this.getBoundingClientRect(),o="<p>".concat(g[0].name?"".concat(g[0].name,"<br> ").concat(s.settings.isMinMax&&d===t?"".concat(R.translate("Highest"),": "):s.settings.isMinMax&&u===t?"".concat(R.translate("Lowest"),": "):s.settings.isPeakDot&&d===t?"".concat(R.translate("Peak"),": "):""):"","<b>").concat(t,"</b></p>"),h=function(){var t=Ve.tooltipSize(o),e=i.left-t.width/2+6,n=i.top-t.height-8;""!==o&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[r?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(e,n,o,"top"))};if(c&&"function"==typeof c&&!l[n]){o="";var p=!0;e=setInterval(function(){p&&(p=!1,c(function(t){o=t,l[n]=t})),""!==o&&(clearInterval(e),h())},10)}else c="object"===a(c)?"":c,o=l[n]||c||g[0].tooltip||o||"",h();d3.select(this).attr("r",s.settings.isMinMax&&d===t||s.settings.isMinMax&&u===t?f+2:f+1)}).on("mouseleave.".concat(s.namespace),function(t){clearInterval(e),Ve.hideTooltip(),d3.select(this).attr("r",s.settings.isMinMax&&d===t||s.settings.isMinMax&&u===t?f+1:f)}).on("contextmenu.".concat(s.namespace),function(t){var e={value:t,name:g[0].name||""};s.settings.isMinMax&&d===t&&(e.highest=!0),s.settings.isMinMax&&u===t&&(e.lowest=!0),s.settings.isPeakDot&&d===t&&(e.peak=!0),Ve.triggerContextMenu(s.element,d3.select(this).nodes()[0],e)}),this.element.trigger("rendered",x),this},calculateAspectRatioFit:function(t){var e=Math.min(t.maxWidth/t.srcWidth,t.maxHeight/t.srcHeight);return{width:t.srcWidth*e,height:t.srcHeight*e}},handleEvents:function(){var t=this;return this.element.on("updated.".concat("sparkline"),function(e,n){t.updated(n)}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".medianrange").off(e(["mouseenter","mouseleave"])),this.element.find(".point").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var Xe={title:null,info:null,icon:null,button:null,height:null,color:"slate",attributes:null};function Qe(t,e){this.settings=C.mergeSettings(t,e,Xe),this.element=$(t),this.init()}Qe.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var t,e=this.settings,n="small"===e.height;if(null!=e&&null!==(t=null==e?void 0:e.button)&&void 0!==t&&(null==t?void 0:t.isPrimary)&&(this.settings.color="azure"),e.icon&&!n&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(e.icon,'"></use>\n          </svg></div>')).appendTo(this.element),e.title&&("[NoData]"===e.title&&(e.title=R?R.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(e.title,"</div>")).appendTo(this.element)),e.info&&!n&&$('<div class="empty-info">'.concat(e.info,"</div>")).appendTo(this.element),e.button&&!n){var i='<div class="empty-actions">\n          <button type="button" class="'.concat(e.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(e.button.cssClass,' hide-focus" id="').concat(e.button.id,'">\n            <span>').concat(e.button.text,"</span>\n          </button>\n        </div>");$(i).appendTo(this.element),e.button.click&&this.element.off("click").on("click","button",e.button.click)}return C.addAttributes(this.element,this,e.attributes,"",!0),C.addAttributes(this.element.find(".empty-actions button"),this,e.attributes,"btn",!0),this},updated:function(t){this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(t){return this.each(function(){var e=$.data(this,"emptymessage");e?e.updated(t):e=$.data(this,"emptymessage",new Qe(this,t))})};var Je={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,hideDots:!1,animate:!0,redrawOnResize:!0,fitHeight:!0,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ze(t,e){this.settings=C.mergeSettings(t,e,Je),this.element=$(t),Ve.destroy(t),this.init()}Ze.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,n,i,s=this,r=this.settings,o=this.element.closest(".is-personalizable").length>0,l="line-chart";if(l+=r.isBubble?" bubble":"",l+=r.isScatterPlot?" scatterplot":"",this.element.addClass(l),0===r.dataset.length)return s.element.emptymessage(r.emptyMessage),this;var c,d={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};r.isBubble&&(d.radius=0,d.radiusOnHover=0,d.strokeWidth=0),r.isScatterPlot&&(d.radius=0,d.strokeWidth=50),$.extend(!0,d,r.dots),s.dots=d,this.isRTL=R.isRTL();var u,p,f=[],g=r.tooltip,m={},v={atLeastOne:!1},b=["left","top","right","bottom"];if(r.axisLabels&&$.extend(!0,m,r.axisLabels),!$.isEmptyObject(m))for(u=0,p=b.length;u<p;u++){var y=m[b[u]];y&&"string"==typeof y&&""!==$.trim(y)&&(v[b[u]]=!0,v.atLeastOne=!0)}var w="",x=0,k=r.dataset,T=r.hideDots,A=this.element.parent(),S=!!$(".widget-chart-action",A).length,E=A.width()<450,D=function(t){return void 0!==t&&"function"!=typeof t&&null!==t?"boolean"==typeof t?t?"-45":null:t:null},I={large:D(null===(t=r.xAxis)||void 0===t||null==t?void 0:t.rotate),small:D(null===(e=r.xAxis)||void 0===e||null==e?void 0:e.rotateOnSmallView)},M=!!I.large;M&&(I.use=I.large),E&&I.small&&(M=!0,I.use=I.small),S&&(r.fitHeight=!1);var L=function(t,e){return d3.max(t.data,function(t){return e?t.value[e]:t.value})};if(M){k[0].data.forEach(function(t){t.name.length>w.length&&(w=t.name)});var P=Math.abs(I.use);P=isNaN(P)?0:P,x=w.length*(P>50?5:2)}var N={top:v.top?S?15:40:S?5:30,right:v.right?65:55,bottom:v.bottom?M?60:50:x+35,left:v.left?75:65},O=C.getParentAvailableHeight(s.element[0]),B=r.fitHeight?O:parseInt(A.height(),10),_=A.width()-N.left-N.right,F=B-N.top-N.bottom-30;S&&(F-=42),s.svg=d3.select(this.element[0]).append("svg").attr("width",_+N.left+N.right).attr("height",F+N.top+N.bottom).append("g").attr("transform","translate(".concat(N.left,",").concat(N.top,")"));var z=k[0].data.map(function(t){return t.name}),H={};k[0]&&k[0].valueFormatterString&&$.extend(!0,H,k[0].valueFormatterString);var q,V=function(t,e){return!$.isEmptyObject(H)&&t?d3.format(t)("0.0%"===t?e/100:e):e},j={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};k[0]&&k[0].labels&&$.extend(!0,j,k[0].labels);var W=(r.xAxis&&r.xAxis.scale?r.xAxis.scale:d3.scaleLinear()).range([0,_]),U=d3.scaleLinear().range([F,0]),G=d3.scaleLinear().range([1,25]);q=r.isBubble?{x:k.map(function(t){return L(t,"x")}),y:k.map(function(t){return L(t,"y")}),z:k.map(function(t){return L(t,"z")})}:r.isScatterPlot?{x:k.map(function(t){return L(t,"x")}),y:k.map(function(t){return L(t,"y")})}:k.map(function(t){return L(t)});var Y,K,X=d3.max(k.map(function(t){return t.data.length})),Q=X<=1?X:X-1,J=W.domain(r.xAxis&&r.xAxis.domain?r.xAxis.domain:[0,r.isBubble||r.isScatterPlot?d3.max(q.x):Q]),Z=U.domain([0,d3.max(r.isBubble||r.isScatterPlot?q.y:q)]).nice(),tt=G.domain([0,d3.max(r.isBubble?q.z:q)]).nice(),et=Q;r.xAxis&&r.xAxis.ticks&&(et="auto"===r.xAxis.ticks?Math.max(_/85,2):r.xAxis.ticks,(r.isBubble||r.isScatterPlot&&E)&&(et=Math.round(Q/2))),E&&null!==(Y=r.xAxis)&&void 0!==Y&&(null==Y?void 0:Y.numTicksOnSmallView)&&(et=null===(K=r.xAxis)||void 0===K||null==K?void 0:K.numTicksOnSmallView);var nt,it=d3.axisBottom(J).ticks(et).tickPadding(10).tickSize(r.isBubble||r.isScatterPlot?-(F+10):0).tickFormat(function(t,e){var n,i;return"function"==typeof(null===(n=r.xAxis)||void 0===n||null==n?void 0:n.formatter)?r.xAxis.formatter(t,e):"auto"===(null===(i=r.xAxis)||void 0===i||null==i?void 0:i.ticks)?z[t]:r.isBubble||r.isScatterPlot?t:z[t]}),at=d3.axisLeft(Z).ticks(8).tickSize(-(_+20)).tickPadding(s.isRTL?-18:20);if(null!==(n=r.yAxis)&&void 0!==n&&(null==n?void 0:n.formatter)&&at.tickFormat(function(t,e){return"function"==typeof r.yAxis.formatter?r.yAxis.formatter(t,e):t}),null!==(i=r.yAxis)&&void 0!==i&&(null==i?void 0:i.ticks)&&at.ticks(r.yAxis.ticks.number,r.yAxis.ticks.format),v.atLeastOne){var st=s.svg.append("g").attr("class","axis-labels"),rt={top:"translate(".concat(_/2,",").concat(-10,")"),right:"translate(".concat(_+28,",").concat(F/2,")rotate(90)"),bottom:"translate(".concat(_/2,",").concat(F+40,")"),left:"translate(".concat(-40,",").concat(F/2,")rotate(-90)")},ot={top:"rotate(0deg) scaleX(-1) translate(-".concat(_/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(F/2+5,"px, -").concat(_+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(_/2,"px, ").concat(F+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(F/2-5,"px, ",55,"px)")};for(u=0,p=b.length;u<p;u++)v[nt=b[u]]&&st.append("text").attr("class","axis-label-".concat(nt)).attr("text-anchor","middle").attr("transform",s.isRTL?"":rt[nt]).style("font-size","1.25em").style("transform",s.isRTL?ot[nt]:"").text(m[nt])}if(s.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(F,")")).call(it),s.svg.append("g").attr("class","y axis").call(at),s.svg.selectAll(".tick line").attr("x1","-10"),r.isBubble||r.isScatterPlot){s.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var lt=s.svg.select(".x.axis .tick line");lt.attr("x2","-10"),(!r.xAxis||r.xAxis&&!r.xAxis.hideLine)&&lt.style("opacity",1),(!r.yAxis||r.yAxis&&!r.yAxis.hideLine)&&s.svg.select(".y.axis .tick line").style("opacity",1)}s.isRTL&&(s.svg.selectAll("text").attr("transform","scale(-1, 1)"),s.svg.selectAll(".y.axis text").style("text-anchor","end")),M&&s.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return-(this.getBBox().width+10)}).attr("dy","1em").attr("transform","rotate(".concat(I.use,")")).style("text-anchor","start"),r.xAxis&&r.xAxis.formatText&&s.svg.selectAll(".x.axis .tick text").each(function(t){var e=d3.select(this),n=d3.select(this).text(),i=r.xAxis.formatText(n,t);h.html(e.node(),i,"<tspan><text><glyph>")});var ct=d3.line().x(function(t,e){var n;return J("function"==typeof(null===(n=r.xAxis)||void 0===n||null==n?void 0:n.parser)?r.xAxis.parser(t,e):r.isBubble||r.isScatterPlot?t.value.x:e)}).y(function(t){return Z(r.isBubble||r.isScatterPlot?t.value.y:t.value)}),dt={line:{delay:200,prevent:!1,timer:0},dot:{delay:200,prevent:!1,timer:0},symbol:{delay:200,prevent:!1,timer:0}};s.element.off("dblclick.".concat(s.namespace)).on("dblclick.".concat(s.namespace),"*",function(t){t.stopImmediatePropagation()}),k.forEach(function(t,e){var n=s.svg.append("g").attr("data-group-id",e).attr("class","line-group");if(r.isArea){var i=d3.area().x(function(t,e){return J(e)}).y0(F).y1(function(t){return Z(r.isBubble||r.isScatterPlot?t.value.y:t.value)});n.append("path").datum(t.data).attr("fill",function(){return Ve.chartColor(e,"line",t)}).style("opacity",".2").attr("class","area").attr("d",i).call(function(e){e._groups.forEach(function(e){e.forEach(function(e){C.addAttributes($(e),t,t.attributes,"area")})})})}var l=n.append("path").datum(t.data).attr("d",ct(t.data)).attr("stroke",function(){return r.isBubble||r.isScatterPlot?"":Ve.chartColor(e,"line",t)}).attr("stroke-width",2).attr("fill","none").attr("class","line").call(function(e){e._groups.forEach(function(e){e.forEach(function(e){C.addAttributes($(e),t,t.attributes,"line")})})}).on("click.".concat(s.namespace),function(){var e=this;dt.line.timer=setTimeout(function(){dt.line.prevent||Ve.selectElement(d3.select(e.parentNode),s.svg.selectAll(".line-group"),t,s.element,k,s.initialSelectCall),dt.line.prevent=!1},dt.line.delay)}).on("dblclick.".concat(s.namespace),function(){clearTimeout(dt.line.timer),dt.line.prevent=!0;var e=[{elem:[this.parentNode],data:t}];s.element.triggerHandler("dblclick",[e])}).on("contextmenu.".concat(s.namespace),function(){Ve.triggerContextMenu(s.element,d3.select(this).nodes()[0],t)}),h=l.node().getTotalLength();l.attr("stroke-dasharray","".concat(h," ").concat(h)).attr("stroke-dashoffset",h).transition().duration(r.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var p=function(e,n){var i,s=e.getBoundingClientRect(),l="<p><b>".concat(n.name," </b> ").concat((i=n.value,d3.format(r.formatterString||",")(i)),"</p>"),h=function(){var t=Ve.tooltipSize(l),e=s.left-t.width/2+6,n=s.top-t.height-18;e=r.isBubble||r.isScatterPlot?s.left+s.width/2-t.width/2:e,""!==l&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[o?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(e,n,l,"top"))};if(r.isBubble||r.isScatterPlot){for(var p in l='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(n.name,"</b></div>"),n)if(n.hasOwnProperty(p))if("object"!==a(n[p]))j[p]&&(l+="".concat('<div class="swatch-row"><span>').concat(j[p],"</span>")+"<b>".concat(t.name,"</b>")+"</div>");else{var m=n[p];for(var v in m)m.hasOwnProperty(v)&&j[p]&&(l+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(j[p][v],"</span>")+"<b>".concat(V(H[v],m[v]),"</b>")+"</div>")}l+="</div>"}if(g&&"function"==typeof g&&!f[u]){l="";var b=!0;c=setInterval(function(){b&&(b=!1,g(function(t){l=t,f[u]=t})),""!==l&&(clearInterval(c),h())},10)}else{g="object"===a(g)?"":g,l=f[u]||g||n.tooltip||t.tooltip||l||"",h();for(var y=document.querySelectorAll("#svg-tooltip .swatch-caption span"),w=0;w<y.length;w++)y[w].style.backgroundColor=Ve.chartColor(r.isBubble||r.isScatterPlot?n.lineIdx:w,"line",n)}d3.select(this).attr("r",function(t){return r.isBubble?2+tt(t.value.z):d.radiusOnHover})};T||(r.isScatterPlot||n.selectAll("circle").data(t.data).enter().append("circle").attr("class",d.class).call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"dot")})})}).attr("cx",function(t,e){return r.xAxis&&r.xAxis.parser?J(r.xAxis.parser(t,e)):J(r.isBubble||r.isScatterPlot?t.value.x:e)}).attr("cy",function(t){return Z(r.isBubble||r.isScatterPlot?0:t.value)}).attr("r",d.radius).style("stroke-width",d.strokeWidth).style("fill",function(){return Ve.chartColor(e,"line",t)}).style("opacity",r.isBubble||r.isScatterPlot?".7":"1").on("mouseenter.".concat(s.namespace),function(t){t.lineIdx=e,p(this,t)}).on("mouseleave.".concat(s.namespace),function(){clearInterval(c),Ve.hideTooltip(),d3.select(this).attr("r",function(t){return r.isBubble?tt(t.value.z):d.radius})}).on("click.".concat(s.namespace),function(t){var e=this;dt.dot.timer=setTimeout(function(){dt.dot.prevent||Ve.selectElement(d3.select(e.parentNode),s.svg.selectAll(".line-group"),t,s.element,k,s.initialSelectCall),dt.dot.prevent=!1},dt.dot.delay)}).on("dblclick.".concat(s.namespace),function(t){clearTimeout(dt.dot.timer),dt.dot.prevent=!0;var e=[{elem:[this.parentNode],data:t}];s.element.triggerHandler("dblclick",[e])}).on("contextmenu.".concat(s.namespace),function(t){Ve.triggerContextMenu(s.element,d3.select(this).nodes()[0],t)}),r.isScatterPlot&&n.selectAll(".symbol").data(t.data).enter().append("path").attr("class","symbol").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"symbol")})})}).attr("transform",function(t){return"translate(".concat(J(t.value.x),",").concat(Z(t.value.y),")")}).attr("d",d3.symbol().size(d.strokeWidth).type(function(){return d3.symbols[e]})).style("opacity",0).style("fill",function(){return Ve.chartColor(e,"line",t)}).on("mouseenter.".concat(s.namespace),function(t){t.lineIdx=e,p(this,t)}).on("mouseleave.".concat(s.namespace),function(){clearInterval(c),Ve.hideTooltip(),d3.select(this).attr("r",function(){return d.radius})}).on("click.".concat(s.namespace),function(t){var e=this;dt.symbol.timer=setTimeout(function(){dt.symbol.prevent||Ve.selectElement(d3.select(e.parentNode),s.svg.selectAll(".line-group"),t,s.element,k,s.initialSelectCall),dt.symbol.prevent=!1},dt.symbol.delay)}).on("dblclick.".concat(s.namespace),function(t){clearTimeout(dt.symbol.timer),dt.symbol.prevent=!0;var e=[{elem:[this.parentNode],data:t}];s.element.triggerHandler("dblclick",[e])}).on("contextmenu.".concat(s.namespace),function(t){Ve.triggerContextMenu(s.element,d3.select(this).nodes()[0],t)}),r.isBubble&&n.selectAll("circle").attr("cy",function(t){return Z(t.value.y)}).transition().duration(r.animate?750:0).ease(d3.easeCubic).attr("r",function(t){return tt(t.value.z)}),r.isScatterPlot&&n.selectAll(".symbol").transition().duration(r.animate?750:0).ease(d3.easeCubic).style("opacity",1))}),s.svg.selectAll(".y.axis .tick").attr("class",function(t){return"tick".concat(0===t?" tick0":"")});var ut=k.map(function(t){return{color:t.color,name:t.name,selectionObj:s.svg.selectAll(".line-group"),selectionInverse:s.svg.selectAll(".line-group"),data:t}});return r.showLegend&&Ve.addLegend(ut,r.isScatterPlot?"scatterplot":"line",r,this.element),Ve.appendTooltip(),Ve.setSelected=function(t,e){var n,i,a,r=0,o=C.equals,l=function(e,l,c,d){c?(a=s.svg.select('[data-group-id="'.concat(l,'"]')).select(".dot:nth-child(".concat(d+2,")")),("number"==typeof t.groupIndex&&void 0!==t.fieldName&&void 0!==t.fieldValue&&t.groupIndex===l&&t.fieldValue===c[t.fieldName]||void 0!==t.index&&"number"==typeof t.groupIndex&&t.groupIndex===l&&t.index===d||t.elem&&$(a.node()).is(t.elem)||t.data&&o(t.data,c))&&(r++,i=c,n=s.svg.select('[data-group-id="'.concat(l,'"]')))):(a=s.svg.select('[data-group-id="'.concat(l,'"]')),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===l||t.elem&&$(a.node()).is(t.elem)||t.data&&o(t.data,e))&&(r++,i=e,n=a))};k.forEach(function(t,e){r<1&&t&&t.data&&(t.data.forEach(function(n,i){r<1&&n&&l(t,e,n,i)}),r<1&&l(t,e))}),r>0&&(e||!n.classed("is-selected"))&&Ve.selectElement(n,s.svg.selectAll(".line-group"),i,s.element,k,s.initialSelectCall)},this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,n=this,i=0,a=function(a,s,r){a.selected&&i<1&&(i++,t=d3.select(n.svg.selectAll(".line-group").nodes()[r]),e=s)};this.settings.dataset.forEach(function(t,e){t&&a(t,t,e)}),this.settings.dataset.forEach(function(t,e){(t||t.data)&&t.data.forEach(function(n){a(n,t,e)})}),i>0&&(n.initialSelectCall=!0,Ve.selectElement(t,n.svg.selectAll(".line-group"),e,n.element,n.settings.dataset,n.initialSelectCall)),n.initialSelectCall=!1},setTextValues:function(){var t,e,n,i,a,s,r,o,l=this,c=this,d={el:this.element[0].querySelector(".line-chart .axis.y")},u={el:d.el.querySelector(".tick line")},h=[].slice.call(d.el.querySelectorAll(".tick text")),p=null===(t=this.settings)||void 0===t||null===(e=null==t?void 0:t.axisLabels)||void 0===e||null==e?void 0:e.left,f="string"==typeof p&&""!==p.trim(),g={maxWidth:this.element.width(),boxWidth:f?23:43,transMatrix:null===(n=this.svg)||void 0===n||null===(i=null==n?void 0:n.node())||void 0===i||null===(a=null==i?void 0:i.transform)||void 0===a||null===(s=null==a?void 0:a.baseVal)||void 0===s||null===(r=null==s?void 0:s.consolidate())||void 0===r||null==r?void 0:r.matrix};if(g.transY=(null===(o=g.transMatrix)||void 0===o||null==o?void 0:o.f)||30,g.customCss=function(){return{tooltip:{maxWidth:"".concat(g.maxWidth,"px")},arrow:{left:l.isRTL?"calc(100% - 20px)":"20px"}}},d.width=d.el.getBBox().width,u.width=u.el.getBBox().width,g.xDiff=d.width-u.width,h.forEach(function(t,e){var n=t.textContent,i=Ve.calculateTextRenderWidth(n),a=t.parentNode;if(i>=g.boxWidth){if(g.elem=t,m.browser.isIE11())t.textContent=Ve.trimText(n,5);else{t.classList.add("hidden"),d3.select(a).append("foreignObject").attr("overflow","visible").attr("width","".concat(g.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(e)).attr("x","-".concat(g.boxWidth+(l.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var s=a.querySelector(".text.ellipsis");if(s){var r=document.createTextNode(n);s.appendChild(r)}g.elem=a.querySelector(".text")}d3.select(g.elem).on("mouseover.".concat(c.namespace),function(){var t,e,a,s,r=(t=this.getBoundingClientRect(),e=Math.ceil(i/g.maxWidth),a=(a=t.left)<0?30:a,s=((s=t.top)<0?30:s)-36,e>1&&(s-=.5*(e-1)*33),l.isRTL&&(a=t.left-i+5),{x:a,y:s});Ve.showTooltip(r.x,r.y,n,"top",g.customCss())}).on("mouseout.".concat(l.namespace),function(){return Ve.hideTooltip()})}}),!f){d.width=d.el.getBBox().width,u.width=u.el.getBBox().width,g.xDiff=d.width-u.width;var v=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter(function(t){return g.xDiff>=t.min&&g.xDiff<t.max});v.length&&(g.newX=v[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(g.newX,",").concat(g.transY,")")),m.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",g.boxWidth+3))}},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},width:0,getSelected:function(){return Ve.selected},setSelected:function(t,e){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};Ve.setSelected(t,e,n)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout(function(){return e()},300):e()},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),t&&t.dataset&&(this.settings.dataset=t.dataset),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".line-group .line").off(e(["click","dblclick","contextmenu"])),this.element.find(".line-group .symbol").off(e(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(e(["mouseenter","mouseleave","click","dblclick","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var tn={dataset:[],isStacked:!1,showLegend:!0,animate:!0,format:null,redrawOnResize:!0,ticks:9,fitHeight:!0,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function en(t,e){this.settings=C.mergeSettings(t,e,tn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}en.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t,e=this,n=this.element.closest(".is-personalizable").length>0,i=function(t){return d3.format(e.settings.formatterString||",")(t)},a=this.settings.dataset;if(this.dataset=a,0===a.length)return e.element.emptymessage(e.settings.emptyMessage),this;var s=this.element.parent(),r=R.isRTL(),o="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,l=1===a.length;this.isSingle=l;var d=!(l||!l&&e.settings.isStacked);this.isGrouped=d;var u,p,f,g,m,v,b,y,w,x,k=l&&void 0===a[0].name?e.settings.isStacked?20:50:35,T=C.getParentAvailableHeight(e.element[0]),A=this.settings.fitHeight?T:parseInt(s.height(),10),S=s.width()-45-40-10,E=A-40-k-(l&&void 0===a[0].name?e.settings.isStacked||o?30:0:40),D=d3.min(a,function(t){return d3.min(t.data,function(t){return t.value})}),I=d3.max(a,function(t){return d3.max(t.data,function(t){return t.value})});o&&(u=d3.min(a,function(t){return d3.min(t.data,function(t){return t.target})}),p=d3.max(a,function(t){return d3.max(t.data,function(t){return t.target})}),D=d3.min([D,u]),I=d3.max([I,p]),m={target:null,positive:null,negative:null},y={target:"Target",positive:"Positive",negative:"Negative"},v={target:"neutral",positive:"good",negative:"error"},b={},a[0]&&(a[0].attributes&&$.extend(!0,m,a[0].attributes),a[0].colors&&$.extend(!0,v,a[0].colors),a[0].legends&&$.extend(!0,y,a[0].legends),a[0].patterns&&$.extend(!0,b,a[0].patterns)),w=[],$.each(y,function(t,e){var n={name:e,color:v[t],pattern:b[t],option:t};m[t]&&(n.data={attributes:m[t]}),w.push(n)})),this.element.addClass("column-chart");var M=[],L=e.settings.tooltip,P=d3.scaleBand().range([0,S]).round(!0).padding("column-grouped"===this.settings.type?.1:0),N=d3.scaleBand(),O=d3.scaleLinear().range([E,0]),B=null,_=null;if(e.settings.isStacked){var F={y1:[],y2:[]};t=l?a[0].data.map(function(t,e){var n=0;return 0===e?(F.y1.push(t.value),F.y2.push(0)):(n=F.y1[0]+F.y2[0],F.y1[0]=t.value,F.y2[0]=n),[$.extend({},t,{y0:n,y:t.value,x:t.name,color:t.color,pattern:t.pattern,parentName:t.name,tooltip:t.tooltip})]}):a.map(function(t,e){return t.data.map(function(n,i){var a=0;return 0===e?(F.y1.push(n.value),F.y2.push(0)):(a=F.y1[i]+F.y2[i],F.y1[i]=n.value,F.y2[i]=a),$.extend({},n,{y0:a,y:n.value,x:n.name,color:n.color,pattern:n.pattern,parentName:t.name,tooltip:t.tooltip})})}),d3.stack()(t),B=d3.scaleBand().domain(d3.range(t[0].length)).rangeRound([0,S],.05),l&&e.settings.isStacked&&B.paddingInner(.095),_=d3.scaleLinear().domain([0,d3.max(t,function(t){return d3.max(t,function(t){return t.y0+t.y})})]).range([0,E])}var z=a[0].data.map(function(t){return t.name}),H=d3.axisBottom(P).tickSize(0).tickPadding(12),q=d3.axisLeft(O).tickSize(-S).tickPadding(r?-12:12).ticks(e.settings.ticks||9,d3.format(e.settings.format||"s"));e.settings.yAxis&&(e.settings.yAxis.formatter&&q.tickFormat(function(t,n){return"function"==typeof e.settings.yAxis.formatter?e.settings.yAxis.formatter(t,n):t}),e.settings.yAxis.ticks&&e.settings.yAxis.ticks.number>1&&e.settings.yAxis.ticks.format&&q.ticks(e.settings.yAxis.ticks.number,e.settings.yAxis.ticks.format));var V=d3.select(this.element[0]).append("svg").attr("width",S+45+40).attr("height",E+40+k).append("g").attr("transform","translate(".concat(45,",").concat(40,")"));this.svg=V;var j,W=a.map(function(t){return t.name}),U=a.map(function(t){return d3.max(t.data,function(t){return o?t.target:t.value})});if(e.settings.isStacked&&(j=t.map(function(t){return d3.max(t,function(t){return t.y+t.y0})})),l&&(W=a[0].data.map(function(t){return t.name})),o&&(D+=D/O.ticks().length,U[0]+=U[0]/(O.ticks().length/2)),function(){if(e.settings.isStacked&&l)f=a[0].data;else for(var t,n=a.length-1;n>-1;n--)t=a[n].data.map(function(t){return t}),$.extend(!0,f,t),f=$.map(f,function(t){return t})}(),e.settings.isStacked&&!l&&(g=W.map(function(t,e){return a[e]})),P.domain(e.settings.isStacked?z:W),N.domain(z).rangeRound([0,l||e.settings.isStacked?S:P.bandwidth()]),O.domain([D<0?D:e.settings.minValue||0,d3.max(e.settings.isStacked?j:U)]).nice(),(!l||l&&!e.settings.isStacked)&&V.append("g").attr("class","x axis").attr("transform","translate(0,".concat(E+(o?10:0),")")).call(H),V.append("g").attr("class","y axis").call(q),r&&D<0){var G,Y=0;V.selectAll(".axis.y text").attr("class",function(t){return G=d3.select(this).text().length,Y=G>Y?G:Y,t<0?"negative-value":"positive-value"}).attr("x",function(t){return Y*(t<0?9:5)})}var K,X,Q=[];a.forEach(function(t){Q.push($.extend({},t,{values:t.data}))}),l&&(Q=[],W=a[0].data.forEach(function(t){Q.push(t)}));var J=Q[0]&&Q[0].values?Q[0].values.length:0,Z=S/Q.length>35*(J+1),tt=function(t){return Ve.chartColor(0,"",{color:t})},et=function(t,n){var i;t.empty()?n():(i=t.size(),t.on("end.".concat(e.namespace),function(){0==--i&&n()}))},nt=function(n){var a;if(n=o&&n,l||o){var s=n?"target-bar":"bar";a=e.svg.selectAll("rect.".concat(s)).data(e.settings.isStacked?t:Q).enter().append("rect").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,s)})})}).attr("class",function(t,e){var i="bar series-".concat(e);return o&&(i=(n?"target-bar series-".concat(e):i)+(t.value>0?" positive":" negative")),i}).attr("width",Math.min.apply(null,[N.bandwidth()-2,35])).attr("x",function(t){return e.settings.isStacked?B(0):N(t.name)+(N.bandwidth()-35)/2}).attr("y",function(){return O(0)>E?E:O(0)}).attr("height",function(){return 0}).attr("mask",function(t){return o?n?b.target?"url(#".concat(b.target,")"):null:t.value<0?b.negative?"url(#".concat(b.negative,")"):null:b.positive?"url(#".concat(b.positive,")"):null:null}).style("fill",function(t){return o?tt(n?v.target:t.value<0?v.negative:v.positive):null}),o&&V.selectAll(n?".target-bartext":".bartext").data(Q).enter().append("text").attr("class",function(t){return(n?"target-bartext":"bartext")+(t.value>0?" positive":" negative")}).attr("text-anchor","middle").attr("x",function(t){return(N(t.name)+N.bandwidth()/2)*(r?-1:1)}).attr("y",function(t){return n?O(t.target)-6:O(t.value>0?0:t.value)+12}).style("opacity",0).style("fill",function(t){return n?"":t.value<0?tt(v.negative):tt(v.positive)}).style("font-weight","bold").text(function(t){return i(n?t.target:t.value)}),a.transition().duration(e.settings.animate?1e3:0).call(et,function(){V.selectAll(".target-bartext, .bartext").transition().duration(e.settings.animate?300:0).style("opacity",1)}).attr("y",function(t){var i=e.settings.isStacked?E-_(t[0].y)-_(t[0].y0):t.value<0?O(0):O(t.value);return n?O(t.target):t.value<0?i:i>E-3?E-2:i}).attr("height",function(t){var i;return i=e.settings.isStacked?_(t[0].y):t.value<0?E-O(0)-(E-O(t.value)):E-O(t.value)-(E-O(0)),i=t.value<0?i:i<3?2:i>E?E-O(t.value):i,n?E-O(t.target)-(E-O(0)):i})}else(a=V.selectAll(".x-value").data(e.settings.isStacked?t:Q).enter().append("g").attr("class","series-group g").attr("data-group-id",function(t,e){return e}).attr("transform",function(t){var n=P(e.settings.isStacked?z[0]:t.name),i=P.bandwidth();if(!e.settings.isStacked&&Z&&i>35*Q.length*2&&(n+=i/2/Q.length/2),e.isGrouped&&!e.settings.isStacked&&(2===t.data.length?i<120?n-=13.5:n=P(t.name):n-=35/(i>150?2:4)),e.settings.isStacked&&S<290&&i<40){var a,s,r=(null===(a=Q[0])||void 0===a||null===(s=null==a?void 0:a.data)||void 0===s||null==s?void 0:s.length)||0;n=(S-i*r)/r/2}return"translate(".concat(n,",0)")}).selectAll("rect").data(function(t){return e.settings.isStacked?t:t.values}).enter().append("rect").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"bar")})})}).attr("class",function(t,e){return"series-".concat(e," bar")}).attr("width",Math.min.apply(null,[N.bandwidth()-2,35])).attr("x",function(t,n){var i=Math.min.apply(null,[N.bandwidth()-2,35]);return e.settings.isStacked?B(n):N.bandwidth()/2+(i+2)*n-(1===Q[0].values.length||5===Q[0].values.length||4===Q[0].values.length?i/2:0)}).attr("y",function(){return O(0)>E?E:O(0)}).attr("height",function(){return 0})).transition().duration(e.settings.animate?600:0).attr("y",function(t){var n=e.settings.isStacked?E-_(t.y)-_(t.y0):t.value<0?O(0):O(t.value);return t.value<0?n:n>E-3?E-2:n}).attr("height",function(t){var n;return n=e.settings.isStacked?_(t.y):t.value<0?E-O(0)-(E-O(t.value)):E-O(t.value)-(E-O(0)),t.value<0?n:n<3?2:n>E?E-O(t.value):n});return a};o&&(K=nt(!0));var it=nt();o&&(X=d3.selectAll([].concat(c(K.nodes()),c(it.nodes())))),o||(e.settings.isStacked?e.settings.isStacked&&!l?it.style("fill",function(){var t=d3.select(this.parentNode).attr("data-group-id");return Ve.chartColor(t,"bar",a[t])}).attr("mask",function(){var t=d3.select(this.parentNode).attr("data-group-id");return a[t].pattern?"url(#".concat(a[t].pattern,")"):null}):e.settings.isStacked&&l&&it.style("fill",function(t,e){return Ve.chartColor(e,"bar",t[0])}).attr("mask",function(t){return t[0].pattern?"url(#".concat(t[0].pattern,")"):null}):it.style("fill",function(t,e){return l?Ve.chartColor(e,"column-single",a[0].data[e]):Ve.chartColor(e,"bar",f[e])}).attr("mask",function(t,e){return l?a[0].data[e].pattern?"url(#".concat(a[0].data[e].pattern,")"):null:f[e].pattern?"url(#".concat(f[e].pattern,")"):null})),$.extend(Ve.settings,{svg:V,chartType:"Column",isSingle:l,isGrouped:d,isStacked:e.settings.isStacked});var at=!1,st=0;if(e.element.off("dblclick.".concat(e.namespace)).on("dblclick.".concat(e.namespace),"*",function(t){t.stopImmediatePropagation()}),(o?X:it).on("mouseenter.".concat(e.namespace),function(s,r){var c,d,u,p,g,m,w,C=this,k=$(this),T="",A=null,S=d3.event.pageY,E=function(t,e){return t&&e?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(e,'" mask="url(#').concat(t,')" height="12" width="12" />')+"</svg>":""},D=r,I=null;e.isGrouped&&((I={elem:d3.select(this.parentNode)}).data=I.elem.datum().values,I.items=I.elem.selectAll(".bar"),I.idx=parseInt(I.elem.attr("data-group-id"),10),D=I.idx*I.data.length+r);var P=function(t){m=Ve.tooltipSize(T);var i=Ve.tooltip.outerHeight(),s=null;h.isValidElement(A)?(s=A.getBoundingClientRect(),c=s.left-m.width/2+s.width/2,A!==I.elem.node()?d=s.top-m.height-10:(d=S-i-25,t?(d+=i+50)>s.bottom+10&&(d=s.bottom+10):d=s.top-i+25)):(s=k[0].getBoundingClientRect(),c=s.left-m.width/2+k.attr("width")/2,e.settings.isStacked?d=s.top-m.height-10:(s=C.parentNode.getBoundingClientRect(),d=S-i-25,a.length>1&&(c=s.left-m.width/2+s.width/2,t?(d+=i+50)>s.bottom+10&&(d=s.bottom+10):d=s.top-i+25))),""!==T&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[n?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(c,d,T,t?"bottom":"top"))},N=function(){"string"==typeof T?T=function(t,e,n){if(null==n?n=/{{(\w+)}}/g:"string"==typeof n&&(n=new RegExp(n,"g")),"string"==typeof t&&n instanceof RegExp)for(var i=9999;n.test(t)&&i>0;)t=t.replace(n,function(t,n){return e(t,n)}),i--;return t}(T,function(t,e){var n=i(s[e]);return isNaN(n)?s[e]:n}):"number"==typeof T&&(T=T.toString())},R=function(t){T="";var n={elem:C,index:r,data:s};e.isGrouped&&(n.groupElem=I.elem.node(),n.groupItems=I.items.nodes(),n.groupIndex=I.idx,n.groupData=I.data);var i=function(t,e){"string"!=typeof t&&"number"!=typeof t||(T=t,A=e,N())},a=!0;x=setInterval(function(){a&&(a=!1,t(i,n)),""!==T&&(clearInterval(x),P())},10)};if(e.settings.isStacked){if(l)T="<p><b>".concat(i(s[0].value),"</b> ").concat(s[0].name,"</p>");else{for(T="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(t[0][r].name,"</b></div>"),u=t.length-1,p=0;u>=p;u--)g=Ve.chartColor(u,"bar",a[u]),T+="".concat('<div class="swatch-row"><div style="background-color:').concat(a[u].pattern?"transparent":g,';">').concat(E(a[u].pattern,g),"</div>")+"<span>".concat(t[u][r].parentName,"</span><b>").concat(i(t[u][r].value),"</b>")+"</div>";T+="</div>"}m=Ve.tooltipSize(T),c=k[0].getBoundingClientRect().left-m.width/2+k.attr("width")/2,d=k[0].getBoundingClientRect().top-m.height-10}else{if(o)T="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(s.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(b.target?"transparent":tt(v.target),';">').concat(E(b.target,tt(v.target)),"</div>")+"<span>".concat(y.target,"</span><b>").concat(i(s.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(s.value<0?b.negative?"transparent":tt(v.negative):b.positive?"transparent":tt(v.positive),';">').concat(s.value<0?E(b.negative,tt(v.negative)):E(b.positive,tt(v.positive)),"</div>")+"<span>".concat(y[s.value<0?"negative":"positive"],"</span><b>").concat(i(s.value),"</b>")+"</div></div>";else if(1===a.length)T="<p><b>".concat(i(s.value),"</b> ").concat(s.name,"</p>");else{var O=d3.select(this.parentNode).datum().values;for(T='<div class="chart-swatch">',u=0,p=O.length;u<p;u++)g=Ve.chartColor(u,"bar",f[u]),T+="".concat('<div class="swatch-row"><div style="background-color:').concat(f[u].pattern?"transparent":g,';">').concat(E(f[u].pattern,g),"</div>")+"<span>".concat(O[u].name,"</span><b>").concat(i(O[u].value),"</b>")+"</div>";T+="</div>",w=O.length>6}m=Ve.tooltipSize(T),c=k[0].getBoundingClientRect().left-m.width/2+k.attr("width")/2,d=S-Ve.tooltip.outerHeight()-25,a.length>1&&(c=this.parentNode.getBoundingClientRect().left-m.width/2+this.parentNode.getBoundingClientRect().width/2,d=this.parentNode.getBoundingClientRect().top-Ve.tooltip.outerHeight()+25)}L&&"function"==typeof L&&void 0===s.tooltip&&!M[D]?R(L):(T=M[D]||L||T||"",M[D]||!1===s.tooltip||void 0===s.tooltip||null===s.tooltip||("function"==typeof s.tooltip?R(s.tooltip):(T=s.tooltip.toString(),N(),M[D]=T)),"string"==typeof T&&""!==T&&P(w))}).on("mouseleave.".concat(e.namespace),function(){clearInterval(x),Ve.hideTooltip()}).on("contextmenu.".concat(e.namespace),function(t){Ve.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)}).on("click.".concat(e.namespace),function(t,n,i){var a=this;st=setTimeout(function(){at||e.doClickAction(t,n,a,i),at=!1},200)}).on("dblclick.".concat(e.namespace),function(t,n){clearTimeout(st),at=!0,e.doDoubleClickAction(t,n,this)}),e.settings.isGrouped=d,e.settings.isSingle=l,e.settings.svg=this.svg,e.settings.showLegend)if(l&&a[0].name)Ve.addLegend(a,"column-single",e.settings,e.element);else if(o)Ve.addLegend(w,e.settings.type,e.settings,e.element);else if(e.settings.isStacked&&l)Ve.addLegend(f,e.settings.type,e.settings,e.element);else if(!l){var rt=e.settings.isStacked?g:f;rt=rt.map(function(t){var e;return!t.attributes||null!==(e=t.data)&&void 0!==e&&(null==e?void 0:e.attributes)||(t.data?t.data.attributes=t.attributes:t.data={attributes:t.attributes}),t}),Ve.addLegend(rt,e.settings.type,e.settings,e.element)}return e.settings.xAxis&&e.settings.xAxis.formatText&&e.svg.selectAll(".x.axis .tick text").each(function(t){var n=d3.select(this),i=d3.select(this).text(),a=e.settings.xAxis.formatText(i,t);h.html(n.node(),a,"<tspan>")}),Ve.isRTL&&Ve.isIE&&(V.selectAll("text").attr("transform","scale(-1, 1)"),V.selectAll(".y.axis text").style("text-anchor","start"),o&&V.selectAll(".negative-value").style("text-anchor","end")),V.selectAll(".y.axis .tick").attr("class",function(t){return"tick".concat(0===t?" tick0":"")}),Ve.appendTooltip(),Ve.labelsColide(V)&&Ve.applyAltLabels(V,Q,"shortName"),Ve.labelsColide(V)&&Ve.applyAltLabels(V,Q,"abbrName"),Ve.labelsColide(V)&&(Ve.applyAltLabels(V,Q,null,null,!0),o&&V.selectAll(".target-bartext, .bartext").attr("x",function(){return+d3.select(this).attr("x")-(r?-6:6)})),Ve.setSelected=function(t,n){var i,s,r,o,c,u=0,h=C.equals,p=V.node().parentNode.nextSibling,f=d3.select(p),g=f.node()&&f.classed("chart-legend"),m=function(n,o){var c=!!n;n=c?d3.select(n):V,o=void 0!==o?o:0,n.selectAll(".bar").each(function(n,d){n&&u<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===(l&&e.settings.isStacked?n[0][t.fieldName]:n[t.fieldName])||void 0!==t.index&&t.index===d||t.data&&h(t.data,a[o].data[d])||t.elem&&$(this).is(t.elem))&&(u++,s=d3.select(this),i=d,c&&!e.settings.isStacked&&(r=!0))})};d||e.settings.isStacked&&!l&&!d?(a.forEach(function(n,a){u<1&&(o=$(V.select('[data-group-id="'.concat(a,'"]')).node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===n[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===a||t.data&&h(t.data,n)||t.elem&&o.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(u++,s=V.select('[data-group-id="'.concat(a,'"]')).select(".bar"),i=a,e.settings.isStacked&&!d&&(r=!0)))}),u<1&&(c=V.selectAll(".series-group")).nodes().length&&c.each(function(t,e){m(this,e)})):m(),u>0&&(n||!s.classed("is-selected"))&&(r?g&&$(f.selectAll(".chart-legend-item")[0][i]).trigger("click.chart"):s.on("click.".concat(e.namespace)).call(s.node(),s.datum(),i))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,n,i,a=this,s=/positive-negative/.test(a.settings.type),r=a.svg.node().parentNode.nextSibling,o=d3.select(r),l=o.node()&&o.classed("chart-legend"),c=!1,d=0,u=function(n){(n=n?d3.select(n):a.svg).selectAll(".bar").each(function(n,i){n&&(a.isSingle&&a.settings.isStacked?n[0]:n).selected&&d<1&&(d++,e=d3.select(this),t=i)})};if(s){var h=function(e){c=!0,t=e,d++};if(a.dataset[0].targetBarsSelected)h(0);else{var p={selected:0,i:-1};a.dataset[0].data.forEach(function(t,e){t.selected&&(p.selected++,p.i=e)}),p.selected>1&&(p.elem=a.svg.select(".target-bar.series-".concat(p.i)),h(p.elem.classed("positive")?1:2))}}c||!a.isGrouped&&(!a.settings.isStacked||a.isSingle||a.isGrouped)?u():(a.dataset.forEach(function(n,s){n.selected&&d<1&&(d++,e=a.svg.select('[data-group-id="'.concat(s,'"]')).select(".bar"),t=s,!a.settings.isStacked||a.isSingle||a.isGrouped||(i=!0))}),d<1&&function(){var e=a.svg.selectAll(".series-group");if(e.nodes().length){var i={groups:[],itemsInGroup:0};if(e.each(function(t,e){var a;u(this),((n=Array.isArray(t))||null!=t&&(null==t?void 0:t.data)&&Array.isArray(null==t||null==t?void 0:t.data))&&(i.itemsInGroup=(n?t:t.data).length,d>0&&i.groups.push({i:e,totalSel:(a=n?t:t.data,a.reduce(function(t,e){return e.selected?t+1:t},0))}))}),i.gLen=i.groups.length,!c&&(n&&i.gLen&&i.groups[0].totalSel>1||i.gLen===e.size()&&!n)){var s=i.groups.filter(function(t){return(null==t||null==t?void 0:t.totalSel)>1}).length;c=n?!!s:!s,n&&(t=i.groups[0].i)}}}()),d>0&&(i||c?l&&(this.initialSelectCall=!0,$(o.node()).find(".chart-legend-item").eq(t).trigger("click.chart")):(this.initialSelectCall=!0,e.on("click.".concat(a.namespace)).call(e.node(),e.datum(),t))),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},getSelected:function(){return Ve.selected},setSelected:function(t,e){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};Ve.setSelected(t,e,n)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(t,e,n,i){var a=n&&d3.select(n).classed("target-bar"),s=n&&d3.select(n).classed("is-selected"),r=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);if(a)for(var o=this.svg.selectAll(".bar").nodes(),l=o.length,c=0;c<l;c++){var d=o[c];if(d3.select(d).classed("is-selected")){s=!1;break}}Ve.setSelectedElement({task:s?"unselected":"selected",container:this.element,selector:n,isTrigger:!this.initialSelectCall&&!s,isTargetBar:a,triggerGroup:this.isGrouped,d:t,i:e,type:this.settings.type,dataset:this.dataset,isSingle:this.isSingle,isGrouped:this.isGrouped,isStacked:this.settings.isStacked,svg:this.svg,clickedLegend:!0===i}),s&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},this.isGrouped?r:e])},doDoubleClickAction:function(t,e,n){var i;if(this.settings.isGrouped){var a=d3.select(n.parentNode),s=parseInt(null==a||null==a?void 0:a.attr("data-group-id"),10),r=[];a.selectAll(".bar").each(function(t,e){r.push({elem:this,data:t,index:e})}),i=[{groupElem:a.node(),groupIndex:s,groupItems:r}]}else if(this.isSingle&&this.settings.isStacked){var o,l=this.dataset&&null!==(o=this.dataset[0])&&void 0!==o&&(null==o?void 0:o.data)&&this.dataset[0].data[e]?this.dataset[0].data[e]:t;i=[{data:l,index:e,elem:[n]}]}else this.settings.isStacked?(i=[],this.svg.selectAll(".series-group").each(function(){var t=d3.select(this).selectAll(".bar").nodes()[e];i.push({elem:t,data:d3.select(t).datum(),index:e})})):i=[{data:t,index:e,elem:n}];this.element.triggerHandler("dblclick",[i])},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var nn={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,showLines:!0,labelFactor:1.27,wrapWidth:60,fitHeight:!0,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function an(t,e){this.settings=C.mergeSettings(t,e,nn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),Ve.destroy(t),this.init()}an.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,n,i,a,s,r,o,l,c,d=this,u=this.settings,p=this.element.parent(),f=this.element.closest(".is-personalizable").length>0,g=!!u.formatterString,m=function(t){return d3.format(d.settings.formatterString||",")(t)},v=[],b=[],y=u.tooltip,w=0,x=30,k=p.width()<450,T=u.dataset;this.isRTL=R.isRTL(),this.dataset=T;var S=window.innerWidth;this.viewport={xxsmall:S<=380,xsmall:S>=381&&S<=450,small:S>=451&&S<=480,medium:S>=481&&S<=992,large:S>992};var E={top:20,left:30,right:30,bottom:1===T.length?5:30};if(u.isGrouped&&1===T.length&&(E.bottom=30,w=2),this.element.addClass("bar-chart"),u.isGrouped&&this.element.addClass("bar-chart-grouped"),u.isStacked&&this.element.addClass("bar-chart-stacked"),0===T.length)return d.element.emptymessage(u.emptyMessage),this;var D=T.map(function(t){return{name:t.name,color:t.color,pattern:t.pattern,attributes:t.attributes}});this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var I={y1:[],y2:[]};T=T.map(function(t,e){return t.data.map(function(t,n){var i=0;return 0===e?(I.y1.push(t.value),I.y2.push(0)):(i=I.y1[n]+I.y2[n],I.y1[n]=t.value,I.y2[n]=i),$.extend({},t,{y0:i,y:t.value,x:Ve.getLabel(t,d.viewport),color:t.color,pattern:t.pattern})})}),t=0,e="",T=T.map(function(n,i){if(!u.isStacked&&D[i]){var a=Ve.getLabel(D[i],d.viewport),s=a.length;e=s>t?a:e,t=s>t?s:t}return n.map(function(n){if(u.isStacked){var i=n.x.length;e=i>t?n.x:e,t=i>t?i:t}return $.extend({},n,{x:n.y,y:n.x,x0:n.y0,color:n.color,pattern:n.pattern})})});var M=C.getParentAvailableHeight(d.element[0]),L=u.fitHeight?M:parseInt(p.height(),10),P=L-E.top-E.bottom-30,N=L-E.bottom-(u.isStacked?0:15),O=parseInt(p.width(),10)-E.left,B=Ve.calculateTextRenderWidth(e);B<200&&(B+=26),Ve.calculatePercentage(B,O)>55&&(B=Ve.getPercentage(O,this.ellipsis.percentageWidth),this.ellipsis.use=!0),d.svg=d3.select(this.element[0]).append("svg").attr("width",O).attr("height",N).append("g").attr("class","group").attr("transform","translate(".concat(B,",").concat(E.top,")"));var _=d3.min(T,function(t){return d3.min(t,function(t){return u.isStacked?t.x+t.x0:t.x})}),F=d3.max(T,function(t){return d3.max(t,function(t){return u.isStacked?t.x+t.x0:t.x})});if(u.isStacked&&u.isNormalized){var z=[];T.forEach(function(t){t.forEach(function(t,e){z[e]=(void 0===z[e]?0:z[e])+t.x})}),T.forEach(function(t){t.forEach(function(t,e){var n=z[e]/100;t.x/=n,t.x0/=n})}),F=100}var H,q=O-B-E.left;H=u.useLogScale?d3.scaleLog().domain([_>0?_:1,F]).range([1,q]).nice():d3.scaleLinear().domain([_<0?_:0,F]).range([0,q]).nice(),u.isStacked?(n=T[0].map(function(t){return t.y}),l=.32):(n=D.map(function(t){return t.name}),function(){for(var t,e=T.length-1;e>-1;e--)t=T[e].map(function(t){return t}),$.extend(!0,v,t),v=$.map(v,function(t){return t})}(),i=0,a=v.length,l=(s=P/n.length)/a,o=s-(r=a>1?s-.6*l:x),x=r/a,l=0);var V=d3.scaleBand().domain(n).rangeRound([0,P]).padding(l,l),j=d3.axisBottom().scale(H).tickSize(-P);k&&j.ticks(B<100?5:3),u.isStacked&&u.isNormalized&&j.tickFormat(function(t){return"".concat(t,"%")}),u.useLogScale&&(j.ticks(10,",.1s"),!1===u.showLines&&j.tickSize(0)),u.ticks&&!u.useLogScale&&(d.viewport.small?j.ticks(u.ticks.smallNumber,u.ticks.format):d.viewport.medium?j.ticks(u.ticks.mediumNumber,u.ticks.format):d.viewport.large&&j.ticks(u.ticks.largeNumber,u.ticks.format));var W=d3.axisLeft().scale(V).tickPadding(15).tickSize(0);d.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(P,")")).call(j),d.svg.append("g").attr("class","axis y").call(W);var U=d.svg.selectAll("g.group").data(T).enter().append("g").attr("class","series-group").attr("data-group-id",function(t,e){return e});u.isGrouped=d.svg.selectAll(".series-group").nodes().length>1&&!u.isStacked||u.isGrouped&&1===T.length,u.isSingle=1===d.svg.selectAll(".series-group").nodes().length&&u.isStacked;var G=!1,Y=0;if(U.selectAll("rect").data(function(t,e){return t.forEach(function(t){t.index=e,u.isStacked||(t.gindex=i++)}),t}).enter().append("rect").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"bar")})})}).attr("class",function(t,e){return"bar series-".concat(e)}).style("fill",function(t,e){return u.isStacked?1===D.length?Ve.chartColor(e,"bar-single",t):Ve.chartColor(t.index,"bar",D[t.index]):Ve.chartColor(e,"bar",v[e])}).attr("mask",function(t,e){return 1===T.length&&T[0][e].pattern?"url(#".concat(T[0][e].pattern,")"):u.isStacked&&D[t.index].pattern?"url(#".concat(D[t.index].pattern,")"):!u.isStacked&&v[e]&&v[e].pattern?"url(#".concat(v[e].pattern,")"):""}).attr("x",function(t){return u.useLogScale?0:u.isStacked&&!u.isSingle?H(t.x0)+1:H(0)+1}).attr("y",function(t){return u.isStacked?V(t.y):(s-r)/2+(t.gindex*x+t.gindex*w)+t.index*o}).attr("height",function(){return u.isStacked?V.bandwidth():x}).attr("width",0).on("mouseenter.".concat(d.namespace),function(t,e){var n,i,a,s=this,r=0,o=[],l="",d=null,p=d3.select(this),w=this.parentNode,x=d3.select(w).datum(),C=Math.round(x.length/2),k=function(t,e){return t&&e?'<svg width="12" height="12"><rect mask="url(#'.concat(t,')" height="12" width="12" /></svg>'):""},A=null;u.isGrouped&&((A={elem:d3.select(w)}).data=x,A.items=A.elem.selectAll(".bar"),A.idx=parseInt(w.getAttribute("data-group-id"),10));var S=function(){var t=!u.isStacked&&x.length>6,e=$(".series-".concat(C),w)[0],n=(h.isValidElement(d)?d===A.elem.node()?e:d:u.isGrouped?e:p.node()).getBoundingClientRect(),i=$(window),a=n.top+i.scrollTop(),s=n.left+i.scrollLeft(),r=Ve.tooltipSize(l),o=s+n.width/2-r.width/2,c=t?a:a-r.height-13;""!==l&&(Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[f?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(o,c,l,t?"bottom":"top"))},E=function(){"string"==typeof l?l=function(t,e,n){if(null==n?n=/{{(\w+)}}/g:"string"==typeof n&&(n=new RegExp(n,"g")),"string"==typeof t&&n instanceof RegExp)for(var i=9999;n.test(t)&&i>0;)t=t.replace(n,function(t,n){return e(t,n)}),i--;return t}(l,function(e,n){var i=m(t[n]);return isNaN(i)?t[n]:i}):"number"==typeof l&&(l=l.toString())},I=function(n){l="";var i={elem:s,index:e,data:t};u.isGrouped&&(i.groupElem=A.elem.node(),i.groupItems=A.items.nodes(),i.groupIndex=A.idx,i.groupData=A.data);var a=function(t,e){"string"!=typeof t&&"number"!=typeof t||(l=t,d=e,E())},r=!0;c=setInterval(function(){r&&(r=!1,n(a,i)),""!==l&&(clearInterval(c),S())},10)};if(1===T.length)l="<p><b>".concat(t.y," </b>").concat(t.x,"</p>");else{if(l='<div class="chart-swatch">',u.isStacked)for(n=0,i=T.length;n<i;n++){r=0,a=Ve.chartColor(n,"bar",D[n]);for(var M=0,L=T.length;M<L;M++)r+=T[M][e].x,o[M]=T[M][e].x;l+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(k(D[n].pattern,a),"</div>\n                  <span>").concat(D[n].name,"</span>\n                  <b> ").concat(g?m(o[n]):"".concat(Math.round(o[n]/r*100),"%")," </b>\n                </div>")}else for(n=0,i=x.length;n<i;n++)a=Ve.chartColor(n,"bar",v[n]),l+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(k(v[n].pattern,a),"</div>\n                  <span>").concat(x[n].name,"</span><b>").concat(m(x[n].value),"</b>\n                </div>");l+="</div>"}if(r>0&&(l='<span class="chart-tooltip-total"><b>'.concat(r,"</b> ").concat(R.translate("Total"),"</span>").concat(l)),y&&"function"==typeof y&&!b[e])I(y);else if(l=b[e]||y||l||"",b[e]||!1===t.tooltip||void 0===t.tooltip||null===t.tooltip||("function"==typeof t.tooltip?I(t.tooltip):(l=t.tooltip.toString(),E(),b[e]=l)),"string"==typeof l&&""!==l&&S(),u.isStacked)for(n=0,i=T.length;n<i;n++){a=Ve.chartColor(n,"bar",D[n]);var P=$("#svg-tooltip").find(".swatch-row").eq(n);D[n].pattern||P.find("div").css("background-color",a),P.find("rect").css("fill",a)}else for(n=0,i=x.length;n<i;n++){a=Ve.chartColor(n,"bar",v[n]);var N=$("#svg-tooltip").find(".swatch-row").eq(n);v[n].pattern||N.find("div").css("background-color",a),N.find("rect").css("fill",a)}}).on("mouseleave.".concat(d.namespace),function(){clearInterval(c),Ve.hideTooltip()}).on("contextmenu.".concat(d.namespace),function(t){Ve.triggerContextMenu(d.element,d3.select(this).nodes()[0],t)}).on("click.".concat(d.namespace),function(t,e){var n=this;Y=setTimeout(function(){G||d.doClickAction(t,e,n),G=!1},200)}).on("dblclick.".concat(d.namespace),function(t,e){clearTimeout(Y),G=!0,d.doDoubleClickAction(t,e,this)}),d.element.off("dblclick.".concat(d.namespace)).on("dblclick.".concat(d.namespace),"*",function(t){t.stopImmediatePropagation()}),d.svg.selectAll(".axis.y text").attr("x",function(){return d.isRTL?15:-15}),d.svg.selectAll(".axis.x text").attr("class",function(t){return t<0?"negative-value":"positive-value"}),d.isRTL&&(Ve.isIE||Ve.isIEEdge)&&(d.svg.selectAll("text").attr("transform","scale(-1, 1)"),d.svg.selectAll(".y.axis text").style("text-anchor","start")),k&&u.useLogScale){var K=d3.selectAll(".x .tick text"),X=!1;K.attr("class",function(t,e){var n=Math.round(K.size()/2);e>=n&&!X&&t.toString().startsWith("1")&&(X=!0,n=t),0!==e&&e!==K.size()-1&&(u.useLogScale?t!==n:e!==n)&&d3.select(this).remove()})}if(d.svg.selectAll(".x.axis .tick").attr("class",function(t){return"tick".concat(0===t?" tick0":"")}),d.svg.selectAll(".bar").transition().duration(u.animate?600:0).attr("width",function(t){var e=H(t.x),n=H(0);return!isNaN(e)&&A.isFinite(e)||(e=0),!isNaN(n)&&A.isFinite(n)||(n=0),Math.abs(e-n)}).attr("x",function(t){return u.useLogScale?0:u.isStacked&&!u.isSingle?H(t.x0)+1:t.x<0?H(t.x)+1:H(0)+1}),u.svg=d.svg,u.showLegend){var Q=u.isStacked?D:v;Q=Q.map(function(t){var e;return!t.attributes||null!==(e=t.data)&&void 0!==e&&(null==e?void 0:e.attributes)||(t.data?t.data.attributes=t.attributes:t.data={attributes:t.attributes}),t}),Ve.addLegend(Q,u.type,u,this.element)}return Ve.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var t,e=this,n=null===(t=this.settings)||void 0===t||null==t?void 0:t.dataset;if(n&&(!n||n.constructor===Array)){var i,a,s,r,o,l,c=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),d={};this.ellipsis.use&&(d.maxWidth=this.element.width(),d.transX=(null===(i=this.svg)||void 0===i||null===(a=null==i?void 0:i.node())||void 0===a||null===(s=null==a?void 0:a.transform)||void 0===s||null===(r=null==s?void 0:s.baseVal)||void 0===r||null===(o=null==r?void 0:r.consolidate())||void 0===o||null===(l=null==o?void 0:o.matrix)||void 0===l||null==l?void 0:l.e)||1,d.customCss=function(){return{tooltip:{maxWidth:"".concat(d.maxWidth,"px")},arrow:{left:e.isRTL?"calc(100% - 20px)":"20px"}}});var u=function(t,n){var i;if(e.ellipsis.use){if("..."===(i=Ve.trimText(t.name,e.ellipsis.threshold)).substr(-3)){var a=Ve.calculateTextRenderWidth(t.name),s=Ve.calculateTextRenderWidth(i),r=c[n].parentNode;if(!m.browser.isIE11()){i=t.name,c[n].classList.add("hidden"),d3.select(r).append("foreignObject").attr("overflow","visible").attr("width","".concat(d.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(n)).attr("x","-".concat(d.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var o=r.querySelector(".text.ellipsis");if(o){var l=document.createTextNode(t.name);o.appendChild(l)}}d3.select(r).on("mouseover.".concat(e.namespace),function(){var n,i,o,l,c=(n=r.getBoundingClientRect(),i=Math.ceil(a/d.maxWidth),o=((o=d.transX-s)<0?30:o)+20,l=((l=n.top)<0?30:l)-36,i>1&&(l-=.5*(i-1)*33),e.isRTL&&(o=n.left-a+d.transX),{x:o,y:l});Ve.showTooltip(c.x,c.y,t.name,"top",d.customCss())}).on("mouseout.".concat(e.namespace),function(){return Ve.hideTooltip()})}}else i=Ve.getLabel(t,e.viewport);return i};this.settings.isGrouped?n.forEach(function(t,e){c[e].textContent=u(t,e)}):n.forEach(function(t){var e=Object.keys(t).map(function(t){return t});Object.keys(t).map(function(e){return t[e]}).forEach(function(t,n){t&&t.constructor===Array&&t.forEach(function(t,i){"attributes"!==e[n]&&(c[i].textContent=u(t,i))})})})}},setInitialSelected:function(){var t,e,n,i=this,a=i.svg.node().parentNode.nextSibling,s=d3.select(a),r=s.node()&&s.classed("chart-legend"),o=!1,l=0,c=function(n){(n=n?d3.select(n):i.svg).selectAll(".bar").each(function(n,i){n&&n.selected&&l<1&&(l++,e=d3.select(this),t=i)})};i.settings.isGrouped||i.settings.isStacked&&!i.settings.isSingle?(i.settings.dataset.forEach(function(a,s){a.selected&&l<1&&(l++,e=i.svg.select('[data-group-id="'.concat(s,'"]')).select(".bar"),t=s,i.settings.isStacked&&!i.settings.isGrouped&&(n=!0))}),l<1&&function(){var e=i.svg.selectAll(".series-group");if(e.nodes().length){var n,a={groups:[],itemsInGroup:0};if(e.each(function(t,e){var n;c(this),Array.isArray(t)&&(a.itemsInGroup=t.length,l>0&&a.groups.push({i:e,d:t,totalSel:(n=t,n.reduce(function(t,e){return e.selected?t+1:t},0))}))}),a.gLen=a.groups.length,!o&&i.settings.isGrouped&&a.gLen===e.size()&&1===(null===(n=a.groups[0])||void 0===n||null==n?void 0:n.totalSel)){o=!0;for(var s=0,r=a.groups[0].d;s<r;s++)if(a.groups[0].d[s].selected){t=s;break}}}}()):c(),l>0&&(n||o?r&&(this.initialSelectCall=!0,$(s.node()).find(".chart-legend-item").eq(t).trigger("click.chart")):(this.initialSelectCall=!0,e.dispatch("click"))),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},getSelected:function(){return Ve.selected},setSelected:function(t,e){var n={svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle};Ve.setSelected(t,e,n)},toggleSelected:function(t){this.setSelected(t,!0)},doClickAction:function(t,e,n){var i=this.settings,a=n&&d3.select(n).classed("is-selected"),s=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);Ve.setSelectedElement({task:a?"unselected":"selected",container:this.element,selector:n,isTrigger:!this.initialSelectCall&&!a,triggerGroup:i.isGrouped,d:t,i:e,type:i.type,dataset:i.dataset,isSingle:this.isSingular,isGrouped:i.isGrouped,isStacked:i.isStacked,svg:this.svg,clickedLegend:i.clickedLegend}),a&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},i.isGrouped?s:e])},doDoubleClickAction:function(t,e,n){var i,a=this.settings;if(a.isGrouped){var s=d3.select(n.parentNode),r=parseInt(null==s||null==s?void 0:s.attr("data-group-id"),10),o=[];s.selectAll(".bar").each(function(t,e){o.push({elem:this,data:t,index:e})}),i=[{groupElem:s.node(),groupIndex:r,groupItems:o}]}else"bar-stacked"===a.type?(i=[],this.svg.selectAll(".series-group").each(function(){var t=d3.select(this).selectAll(".bar").nodes()[e];i.push({elem:t,data:d3.select(t).datum(),index:e})})):i=[{data:t,index:e,elem:n}];this.element.triggerHandler("dblclick",[i])},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout(function(){return e()},300):e()},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(e(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var sn={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},showCenterTooltip:!1,fitHeight:!0,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function rn(t,e){this.settings=C.mergeSettings(t,e,sn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),Ve.destroy(t),this.init()}rn.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===m.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var t=this,e=this.settings;t.svg=d3.select(this.element[0]).append("svg"),t.mainGroup=t.svg.append("g"),t.mainGroup.append("g").attr("class","slices"),t.mainGroup.append("g").attr("class","labels"),t.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),e.showMobile&&(e.legendPlacement="bottom"),e.legendPlacement&&this.element.addClass("has-".concat(e.legendPlacement,"-legend"));var n=parseInt(this.element.width(),10),i=parseInt(this.element.height(),10),a={height:i,width:n};a.isSmallView=a.width<360;var s="bottom"===e.legendPlacement&&a.isSmallView&&!e.showMobile;s&&(this.element.closest(".widget-content").css({height:"","min-height":""}),i=parseInt(this.element.height(),10),a.height=i),!s&&e.fitHeight&&a.isSmallView&&(i=C.getParentAvailableHeight(t.element[0]),a.height=i),("label"===e.lines.show&&"bottom"===e.legendPlacement||"label"===e.lines.show&&"false"===e.showLegend)&&t.mainGroup.attr("transform","translate(".concat(.67777*a.width,", ").concat(a.height/2,")")),"right"===e.legendPlacement&&(a.width=.75*n),e.showMobile&&(a.height=.8*i,this.element.addClass("is-mobile"));var r=0;if(s){r=35,this.element.closest(".widget-content").css({height:"auto","min-height":"auto"});var o=a.height-(23+25*Math.round(e.dataset[0].data.length/2));this.element.closest(".auto-height ").length&&(o+=78),e.fitHeight&&(o-=C.getSiblingsHeight(t.element[0])),$(this.svg.node()).css({"min-height":o}),a.height=parseInt(this.element.height(),10)+r}a.radius=Math.min(a.width,a.height)/2,t.dims=a,t.pie=d3.pie().sort(null).value(function(t){return t.value}),t.arc=d3.arc().outerRadius(.75*a.radius).innerRadius(e.isDonut?.5*a.radius:0),t.outerArc=d3.arc().innerRadius(.75*a.radius).outerRadius(.75*a.radius+20),t.svg.attr("width","right"===e.legendPlacement?"75%":"100%").attr("height",e.showMobile?"80%":"100%"),t.mainGroup.attr("transform","translate(".concat(a.width/2,",").concat((a.height-r)/2,")")),a.isSmallView?(s||(t.svg.attr("height","".concat(a.height,"px")),this.element.css({height:"auto"})),e.fitHeight||(this.element.closest(".widget-content").css({height:""}),this.element.css({height:"auto"}))):"auto"===this.element[0].style.height&&this.element.css({height:""}),a.center={x:a.width/2,y:a.height/2},t.key=function(t){return t.data.name};var l=!e.dataset||0===e.dataset.length;this.chartData=l?[]:e.dataset[0].data,this.sum=d3.sum(this.chartData,function(t){return t.value});var c=this.chartData.map(function(e){return e.value/t.sum*100}),d=this.roundLargestRemainer(c);this.chartData=this.chartData.map(function(e,n){return e.percent=e.value/t.sum,e.percentRound=d[n],e});var u=0;if(this.chartData.map(function(t){u+=t.percentRound}),l||0===u||isNaN(u)){var h=st.themeColors().palette;this.chartData.push({data:{},color:h.slate[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(t.updateData(t.chartData),(e.showTooltips||e.showCenterTooltip)&&Ve.appendTooltip("is-pie"),e.showLegend){var p=t.chartData.map(function(t){var n=Ve.formatToSettings(t,e.legend);return e.legendFormatter&&(n="".concat(t.name," (").concat(d3.format(e.legendFormatter)(t.value),")")),"Empty-Pie"===t.name&&(n=""),{name:n,display:"twocolumn",placement:e.legendPlacement,color:t.color,data:t}});e.svg=t.svg,Ve.addLegend(p,"pie",e,this.element);var f=r>0?"addClass":"removeClass";this.element.find(".chart-legend")[f]("adjusted-height")}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(t){var e=this;this.chartData=this.chartData.map(function(e){return e.value=t?0:Math.random(),e}),this.sum=d3.sum(this.chartData,function(t){return t.value});var n=this.chartData.map(function(t){return t.value/e.sum*100}),i=this.roundLargestRemainer(n);return this.chartData=this.chartData.map(function(t,n){return t.percent=t.value/e.sum,t.percentRound=i[n],t}),this.chartData},addCenterLabel:function(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var t=this.settings.dataset[0].centerLabel,e=this.svg.selectAll(".slices");if(e.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(t),Ve.isIE&&!Ve.isIEEdge)if(C.isHTML(t)){var n=e.select(".chart-donut-text"),i=document.createElement("text");i.innerHTML=t,Array.prototype.slice.call(i.childNodes).forEach(function(t){n.append("tspan").attr("style",t.getAttribute&&t.getAttribute("style")).attr("x",t.getAttribute&&t.getAttribute("x")).attr("dy",t.getAttribute&&t.getAttribute("dy")).text(t.textContent)})}else e.select(".chart-donut-text").text(t)}},updateData:function(t){var e,n,i,a=this,s=this.element.closest(".is-personalizable").length>0,r=!a.settings.dataset||0===a.settings.dataset.length,o=a.svg.select(".slices").selectAll("path.slice").data(a.pie(t),a.key),l={str:null,isTooltip:(null===(e=a.settings.tooltip)||void 0===e||null==e?void 0:e.formatter)&&a.settings.tooltip.formatter!==sn.tooltip.formatter,isLines:(null===(n=a.settings.lines)||void 0===n||null==n?void 0:n.formatter)&&a.settings.lines.formatter!==sn.lines.formatter};l.isTooltip?l.str=a.settings.tooltip.formatter:l.isLines&&(l.str=a.settings.lines.formatter);var c=function(t){var e,n=document.body;if(a.isFirefox&&0===a.settings.dotSize){var i=d3.select(t);i.attr("r",2),e=t.getBoundingClientRect(),i.attr("r",a.settings.dotSize)}else e=t.getBoundingClientRect();return{top:e.top+n.scrollTop,left:e.left+n.scrollLeft}};a.isRTL=R.isRTL();var d=!1,u=0;if(setTimeout(function(){var t;null!==(t=a.settings)&&void 0!==t&&(null==t?void 0:t.showCenterTooltip)&&($(".chart-donut-text").off("mouseenter.text").on("mouseenter.text",function(){var t,e=a.element.find(".slices").get(0),n=c(e),i=null===(t=a.settings.dataset[0])||void 0===t||null==t?void 0:t.centerTooltip,s=n.left,r=n.top+15;$(".is-pie").addClass("is-center"),Ve.showTooltip(s,r,i,"top")}),$(".chart-donut-text").off("mouseleave.text").on("mouseleave.text",function(){Ve.hideTooltip(),$(".is-pie").removeClass("is-center")})),a.settings.attributes&&(C.addAttributes($(".chart-donut-text"),a,a.settings.attributes,"text",!0),C.addAttributes(a.element.find(".slices"),a,a.settings.attributes,"slices",!0),C.addAttributes(a.element.find(".labels"),a,a.settings.attributes,"labels",!0),C.addAttributes(a.element.find(".labels").children(),a,a.settings.attributes,"label",!0),C.addAttributes(a.element.find(".lines"),a,a.settings.attributes,"lines",!0),C.addAttributes(a.element.find(".lines").children("polyline"),a,a.settings.attributes,"polyline",!0),C.addAttributes(a.element.find(".lines").children(".circles"),a,a.settings.attributes,"circle",!0))},100),a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(t){t.stopImmediatePropagation()}),o.enter().insert("path").style("fill",function(t,e){return Ve.chartColor(e,"pie",t.data)}).attr("class","slice").call(function(t){t._groups.forEach(function(t){t.forEach(function(t,e){var n=t.__data__,i="slice-".concat(e);a.settings.attributes?C.addAttributes($(t),n,a.settings.attributes,i,!0):C.addAttributes($(t),n,n.data.attributes,i,!0)})})}).on("contextmenu.".concat(a.namespace),function(t){Ve.triggerContextMenu(a.element,d3.select(this).nodes()[0],t)}).on("click.".concat(a.namespace),function(t,e){var n=this;u=setTimeout(function(){d||a.doClickAction(t,e,n,i),d=!1},200)}).on("dblclick.".concat(a.namespace),function(t,e){clearTimeout(u),d=!0,a.doDoubleClickAction(t,e,this,i)}).on("mouseenter.".concat(a.namespace),function(t,e){if(a.settings.showTooltips){var n=a.svg.selectAll("circle").nodes()[e],r=c(n),o=a.midAngle(t),d=o<=Math.PI/4&&o>=0||o>7*Math.PI/4,u=o<=3*Math.PI/4&&o>=Math.PI/4,h=o<=5*Math.PI/4&&o>=3*Math.PI/4,p=o<=7*Math.PI/4&&o>=5*Math.PI/4,f="",g=Ve.formatToSettings(t,a.settings.tooltip),m={value:l.str&&!l.isTooltip?d3.format(l.str)(t.value):g,percent:l.str?d3.format(l.str)(t.data.percent):"".concat(isNaN(t.data.percentRound)?0:t.data.percentRound,"%")};-1===(f=(f=(f=(f=(f=t.data.tooltip||m.value).replace("{{percent}}","".concat(m.percent))).replace("{{value}}",t.value)).replace("%percent%","".concat(m.percent))).replace("%value%",t.value)).indexOf("<b>")&&(f=(f=f.replace("(","<b>")).replace(")","</b>")),null!=i&&clearTimeout(i),i=setTimeout(function(){!function(){if(""!==f){var t=Ve.tooltipSize(f),e=r.left,n=r.top;Ve.tooltip&&Ve.tooltip.length&&(d||u||h||p)&&Ve.tooltip[s?"addClass":"removeClass"]("is-personalizable"),d&&(e-=t.width/2,n-=t.height-5,Ve.showTooltip(e,n,f,"top")),u&&(n-=t.height/2,Ve.showTooltip(e,n,f,"right")),h&&(e-=t.width/2,Ve.showTooltip(e,n,f,"bottom")),p&&(e-=t.width-5,n-=t.height/2,Ve.showTooltip(e,n,f,"left"))}}()},300)}}).on("mouseleave.".concat(a.namespace),function(){clearTimeout(i),Ve.hideTooltip()}).merge(o).transition().duration(a.settings.animationSpeed).attrTween("d",function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){return a.arc(e(t))}}),o.exit().remove(),!r){var h=a.element.parent().width()<520,p=a.settings.showLines;if(!a.settings.showLinesMobile&&p&&(p=!h),a.settings.dotSize=p?2:0,p){var f=a.svg.select(".labels").selectAll("text").data(a.pie(t),a.key);f.enter().append("text").attr("dy",".35em").text(function(t){return h?t.data.shortName:Ve.formatToSettings(t,a.settings.lines)}).merge(f).transition().duration(a.settings.animationSpeed).attrTween("transform",function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var n=e(t),i=a.outerArc.centroid(n);return i[0]=a.dims.radius*(a.midAngle(n)<Math.PI?1:-1),i[0]-=a.midAngle(n)<Math.PI?20:-20,"translate(".concat(i,")")}}).styleTween("text-anchor",function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var n=e(t);return a.isRTL?a.midAngle(n)>Math.PI?"start":"end":a.midAngle(n)<Math.PI?"start":"end"}}),f.exit().remove();var g=a.svg.select(".lines").selectAll("polyline").data(a.pie(t),a.key);g.enter().append("polyline").merge(g).transition().duration(a.settings.animationSpeed).attrTween("points",function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var n=e(t),i=a.outerArc.centroid(n);return i[0]=.85*a.dims.radius*(a.midAngle(n)<Math.PI?1:-1),[a.outerArc.centroid(n),a.outerArc.centroid(n),i]}}),g.exit().remove()}var m=a.svg.select(".lines").selectAll("circle").data(a.pie(t),a.key);m.enter().append("circle").attr("class","circles").attr("r",a.settings.dotSize).merge(m).transition().duration(a.settings.animationSpeed).attrTween("transform",function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var n=e(t);return"translate(".concat(a.outerArc.centroid(n)," )")}}),m.exit().remove()}},setInitialSelected:function(){var t,e=this,n=0;this.svg.selectAll(".slice").each(function(i,a){i&&i.data&&i.data.selected&&n<1&&(n++,e.initialSelectCall=!0,(t=d3.select(this)).on("click.".concat(e.namespace)).call(t.node(),t.datum(),a))}),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},getSelected:function(){return Ve.selected},setSelected:function(t,e){var n,i,a=this,s=0,r=C.equals;this.svg.selectAll(".slice").each(function(e,o){e&&e.data&&s<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e.data[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&r(t.data,a.chartData[o].data)||t.elem&&$(this).is(t.elem))&&(s++,n=d3.select(this),i=o)}),s>0&&(e||!n.classed("is-selected"))&&n.on("click.".concat(a.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(t){for(var e=0,n=0,i=0,a=[],s=0;s<t.length;s++)e+=parseInt(t[s],10),a[s]=s;var r=100-e;a.sort(function(e,n){return i=t[e]-parseInt(t[e],10),t[n]-parseInt(t[n],10)-i}),t.sort(function(t,e){return i=t-parseInt(t,10),e-parseInt(e,10)-i});for(var o=0;o<t.length;o++)n=o,t[o]=n<r?parseInt(t[o],10)+1:parseInt(t[o],10);for(var l=[],c=0;c<t.length;c++)l[a[c]]=t[c];return l},doClickAction:function(t,e,n,i){clearTimeout(i);var a=n&&d3.select(n).classed("is-selected");Ve.setSelectedElement({task:a?"unselected":"selected",container:this.element,selector:a?".chart-container .is-selected":n,isTrigger:!this.initialSelectCall&&!a,d:t.data,i:e,type:this.settings.type,dataset:this.settings.dataset,svg:this.svg}),a&&!this.initialSelectCall&&this.element.triggerHandler("selected",[d3.select(n).nodes(),{},e])},doDoubleClickAction:function(t,e,n,i){var a;clearTimeout(i);var s=this.settings.dataset,r=s&&null!==(a=s[0])&&void 0!==a&&(null==a?void 0:a.data)?s[0].data[e]:t.data||t;r=r||{};var o=[{elem:d3.select(n).nodes(),data:r,index:e}];this.element.triggerHandler("dblclick",[o])},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".slice").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var on={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function ln(t,e){this.settings=C.mergeSettings(t,e,on),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}ln.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=Ve.colorRange(),this.useBuiltInColors=!0),this},updateData:function(t){var e=this,n=this.settings,i=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==t.length){var a,s=this.element.parent(),r={w:s.width(),h:s.height(),extra:.957};"right"===n.legendPlacement&&(r.w*=.75),(st.uplift||st.new)&&r.w>=420&&(r.extra-=.12),n.showLegend&&r.w<420&&!n.margin.bottom&&(a=r.w>405?5:r.w>390?3:r.w>350?.9:.5,r.h-=(420-r.w)*a),r.transform={x:r.w/2+(n.margin.left+n.margin.right)/2,y:r.h/2*r.extra+(n.margin.top+n.margin.bottom)/2};var o,l=d3.scaleOrdinal(n.colors),c=Math.max(n.maxValue,d3.max(t,function(t){return d3.max(t.data.map(function(t){return t.value}))})),d=t[0].data.map(function(t){return function(t){var e="";return r.w<=328?e=t.shortName||t.abbrName||t.name||"":r.w>=329&&r.w<=469?e=t.abbrName||t.name||"":r.w>469&&(e=t.name||""),e}(t)}),u=d.length,h=2*Math.PI/u,p=Math.min(r.w/3,r.h/3)*r.extra,f=d3.scaleLinear().range([0,p]).domain([0,c]),g=this.element[0];d3.select(g).select("svg").remove();var m=d3.select(g).append("svg").attr("width",r.w+(n.margin.left+n.margin.right)).attr("height",r.h+(n.margin.top+n.margin.bottom)).attr("class","chart-radar");this.svg=m;var v=m.append("g").attr("transform","translate(".concat(r.transform.x,",").concat(r.transform.y,")"));if(n.opacityCircles>0){var b=v.append("defs").append("filter").attr("id","glow");b.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var y=b.append("feMerge");y.append("feMergeNode").attr("in","coloredBlur"),y.append("feMergeNode").attr("in","SourceGraphic")}var w=v.append("g").attr("class","chart-radar-axis-wrapper");w.selectAll(".levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",function(t){return p/n.levels*t}).style("fill-opacity",n.opacityCircles).style("filter",n.opacityCircles>0?"url(#glow)":""),n.showAxisLabels&&w.selectAll(".axis-label").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",function(t){return-t*p/n.levels}).attr("dy","0.4em").style("font-size",st.uplift||st.new?"12px":"10px").attr("fill","#737373").text(function(t){var e=Math.round(10*c)/10;return n.axisFormatter.indexOf("%")>-1?d3.format(n.axisFormatter)(e*t/n.levels):d3.format(n.axisFormatter)(t/n.levels)});var x=w.selectAll(".axis").data(d).enter().append("g").attr("class","axis");n.showCrosslines&&x.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return f(1.05*c)*Math.cos(h*e-Math.PI/2)}).attr("y2",function(t,e){return f(1.05*c)*Math.sin(h*e-Math.PI/2)}).attr("class","chart-radar-crossline").style("stroke-width","1px"),x.append("text").attr("class","legend").style("font-size",st.uplift||st.new?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return f(c*n.labelFactor)*Math.cos(h*e-Math.PI/2)}).attr("y",function(t,e){return f(c*n.labelFactor)*Math.sin(h*e-Math.PI/2)}).text(function(t){return t}),this.element[r.w<420?"addClass":"removeClass"]("is-small"),r.w>456&&m.selectAll(".chart-radar-axis-wrapper .axis .legend").each(function(){Ve.wrap(d3.select(this),n.wrapWidth,n.labelFactor)});var k=d3.lineRadial().curve(d3.curveBasisClosed).radius(function(t){return f(t.value)}).angle(function(t,e){return e*h});n.roundStrokes&&k.curve(d3.curveCardinalClosed);var T=v.selectAll(".radarWrapper").data(t.map(function(t){return t.data})).enter().append("g").attr("class","chart-radar-wrapper"),A=!1,S=0;if(e.element.off("dblclick.".concat(e.namespace)).on("dblclick.".concat(e.namespace),"*",function(t){t.stopImmediatePropagation()}),T.append("path").attr("class","chart-radar-area").call(function(e){e._groups.forEach(function(e){e.forEach(function(e,n){var i=t[n];C.addAttributes($(e),i,i.attributes,"area")})})}).attr("d",function(t){return k(t)}).style("fill",function(t,e){return l(e)}).style("fill-opacity",n.opacityArea).on("contextmenu.".concat(e.namespace),function(t){Ve.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)}).on("click.".concat(e.namespace),function(t,n){var i=this;S=setTimeout(function(){A||e.doClickAction(t,n,i,o,m),A=!1},200)}).on("dblclick.".concat(e.namespace),function(t,n){clearTimeout(S),A=!0,e.doDoubleClickAction(t,n,this)}),T.append("path").attr("class","chart-radar-stroke").call(function(e){e._groups.forEach(function(e){e.forEach(function(e,n){var i=t[n];C.addAttributes($(e),i,i.attributes,"stroke")})})}).attr("d",function(t){return k(t)}).style("stroke-width","".concat(n.strokeWidth,"px")).style("stroke",function(t,e){return l(e)}).style("fill","none").style("filter",n.opacityCircles>0?"url(#glow)":""),T.selectAll(".chart-radar-circle").data(function(t){return t}).enter().append("circle").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"circle")})})}).attr("class","chart-radar-circle").attr("r",n.dotRadius).attr("cx",function(t,e){return f(t.value)*Math.cos(h*e-Math.PI/2)}).attr("cy",function(t,e){return f(t.value)*Math.sin(h*e-Math.PI/2)}).style("fill",function(){return l($(this.parentNode).index()-1)}).style("fill-opacity",.6),v.selectAll(".radar-circle-wrapper").data(t.map(function(t){return t.data})).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data(function(t){return t}).enter().append("circle").call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"invisible-circle")})})}).attr("class","radar-invisible-circle").attr("r",1.5*n.dotRadius).attr("cx",function(t,e){return f(t.value)*Math.cos(h*e-Math.PI/2)}).attr("cy",function(t,e){return f(t.value)*Math.sin(h*e-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(e.namespace),function(t){if(n.showTooltips){var e=$(this).offset(),a=Ve.formatToSettings(t,n.tooltip);-1===a.indexOf("<b>")&&(a=(a=a.replace("(","<b>")).replace(")","</b>"));var s=Ve.tooltipSize(a),r=e.left,l=e.top;r-=s.width/2-6,l-=s.height+6,null!=o&&clearTimeout(o),o=setTimeout(function(){Ve.tooltip&&Ve.tooltip.length&&Ve.tooltip[i?"addClass":"removeClass"]("is-personalizable"),Ve.showTooltip(r,l,a,"top")},300)}}).on("mouseleave.".concat(e.namespace),function(){clearTimeout(o),Ve.hideTooltip()}).on("contextmenu.".concat(e.namespace),function(t){Ve.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)}),n.showTooltips&&Ve.appendTooltip("is-pie"),n.showLegend){n.legendPlacement&&this.element.addClass("has-".concat(n.legendPlacement,"-legend"));var E=n.dataset.map(function(t,e){var i={name:t.name,display:"twocolumn",placement:n.legendPlacement,color:l(e)};return t.attributes&&(i.data={attributes:t.attributes}),i});n.svg=e.svg,Ve.addLegend(E,"pie",n,this.element)}}else e.element.emptymessage(n.emptyMessage)},setInitialSelected:function(){var t=this.settings;if(Array.isArray(t.dataset))for(var e=0,n=t.dataset.length;e<n;e++)if(t.dataset[e].selected){var i=this.svg.selectAll(".chart-radar-area").nodes(),a=d3.select(i[e]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),a.classed("is-selected",!0).classed("is-not-selected",!1),a.style("fill-opacity",t.opacityArea);break}},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){t.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){t.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){t.updated()}),this},getSelected:function(){return Ve.selected},setSelected:function(t,e){var n,i,a=0,s=this;this.svg.selectAll(".chart-radar-area").each(function(e,r){var o=s.settings.dataset[r];o&&o.data&&a<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===o[t.fieldName]||void 0!==t.index&&t.index===r||t.elem&&$(this).is(t.elem))&&(a++,n=d3.select(this),i=r)}),a>0&&(e||!n.classed("is-selected"))&&n.on("click.".concat(s.namespace)).call(n.node(),n.datum(),i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(t,e,n,i,a){clearTimeout(i);var s=this.settings,r=d3.select(n),o=r.classed("is-selected");a.selectAll(".is-selected").classed("is-selected",!1),a.selectAll(".is-not-selected").classed("is-not-selected",!1),Ve.clearSelected(s.dataset),o||(a.selectAll(".chart-radar-area").classed("is-not-selected",!0),r.classed("is-selected",!0).classed("is-not-selected",!1),r.style("fill-opacity",s.opacityArea),s.dataset[e].selected=!0);var l={elem:r.nodes(),data:t,index:e};this.element.triggerHandler(o?"deselected":"selected",l),Ve.selected=o?[]:l},doDoubleClickAction:function(t,e,n){var i={elem:[n],data:t,index:e};this.element.triggerHandler("dblclick",i)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=t.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(e(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Ve.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(t){var e=null;switch(this.empty(),t.type){case"targeted-achievement":case"completion":case"completion-target":if(e=this.data(t.type))return e.updated(t),this;var n=new Ge(this,t);this.data("completion-chart",n),this.data("chart",n),this.data(t.type,n);break;case"bullet":if(e=this.data("bullet"))return e.updated(t),this;var i=new We(this,t);this.data("bullet",i),this.data("chart",i);break;case"radar":if(e=this.data("radar"))return e.updated(t),this;var a=new ln(this,t);this.data("radar",a),this.data("chart",a);break;case"sparkline":if(e=this.data("sparkline"))return e.updated(t),this;var s=new Ke(this,t);this.data("sparkline",s),this.data("chart",s);break;case"sparkline-dots":if(t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var r=new Ke(this,t);this.data("sparkline",r),this.data("chart",r);break;case"sparkline-peak":if(t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var o=new Ke(this,t);this.data("sparkline",o),this.data("chart",o);break;case"sparkline-dots-n-peak":if(t.isPeakDot=!0,t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var l=new Ke(this,t);this.data("sparkline",l),this.data("chart",l);break;case"sparkline-minmax":if(t.isMinMax=!0,e=this.data("sparkline"))return e.updated(t),this;var c=new Ke(this,t);this.data("sparkline",c),this.data("chart",c);break;case"sparkline-medianrange":if(t.isMedianRange=!0,e=this.data("sparkline"))return e.updated(t),this;var d=new Ke(this,t);this.data("sparkline",d),this.data("chart",d);break;case"sparkline-medianrange-n-peak":if(t.isMedianRange=!0,t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var u=new Ke(this,t);this.data("sparkline",u),this.data("chart",u);break;case"line":if(e=this.data("line"))return e.updated(t),this;var h=new Ze(this,t);this.data("line",h),this.data("chart",h);break;case"area":if(t.isArea=!0,e=this.data("line"))return e.updated(t),this;var p=new Ze(this,t);this.data("line",p),this.data("chart",p);break;case"bubble":if(t.isBubble=!0,e=this.data("line"))return e.updated(t),this;var f=new Ze(this,t);this.data("line",f),this.data("chart",f);break;case"scatterplot":if(t.isScatterPlot=!0,e=this.data("line"))return e.updated(t),this;var g=new Ze(this,t);this.data("line",g),this.data("chart",g);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(e=this.data("column"))return e.updated(t),this;var m=new en(this,t);this.data("column",m),this.data("chart",m);break;case"column-stacked":if(t.isStacked=!0,e=this.data("column"))return e.updated(t),this;var v=new en(this,t);this.data("column",v),this.data("chart",v);break;case"bar":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var b=new an(this,t);this.data("bar",b),this.data("chart",b);break;case"bar-stacked":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var y=new an(this,t);this.data("bar",y),this.data("chart",y);break;case"bar-normalized":if(t.isNormalized=!0,e=this.data("bar"))return e.updated(t),this;var w=new an(this,t);this.data("bar",w),this.data("chart",w);break;case"bar-grouped":if(t.isStacked=!1,t.isGrouped=!0,e=this.data("bar"))return e.updated(t),this;var x=new an(this,t);this.data("bar",x),this.data("chart",x);break;case"pie":if(e=this.data("pie"))return e.updated(t),this;var C=new rn(this,t);this.data("pie",C),this.data("chart",C);break;case"donut":if(t.isDonut=!0,e=this.data("pie"))return e.updated(t),this;var k=new rn(this,t);this.data("pie",k),this.data("chart",k);break;default:e=null}return this};var cn={isToday:function(t){var e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},firstDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getDay(),i=new Date(t),a=n>=e?n-e:6-n;return i.setDate(t.getDate()-a),i.setHours(0,0,0,0),i},lastDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.firstDayOfWeek(t,e);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),n},dateDiff:function(t,e,n){var i=new Date;return Math.round((e-t)/(36e5*(n?1:Math.abs(i.getTimezoneOffset()))))},monthDiff:function(t,e){var n;return n=12*(e.getFullYear()-t.getFullYear()),n-=t.getMonth(),(n+=e.getMonth())<=0?0:n},add:function(t,e,n){var i=null,a=t instanceof Date?new Date(t.toISOString()):new Date(t);switch(n){case"days":i=new Date(a.setDate(a.getDate()+e))}return i},subtract:function(t,e,n){var i=null,a=t instanceof Date?new Date(t.toISOString()):new Date(t);switch(n){case"days":i=new Date(a.setDate(a.getDate()-e))}return i}},dn={addCalculatedFields:function(t,e,n,i){var a=function(t,n){return R.formatDate(t,C.extend(!0,{locale:e.name},n))},s={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:e.name},r=function(t){var n=R.parseDate(t,s);return R.isIslamic(e.name)&&(n=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6])),n},o=function(t){return R.translate(t,{locale:e.name,language:n})};t.color=this.getEventTypeColor(t,i),t.duration=Math.abs(cn.dateDiff(new Date(t.ends),new Date(t.starts),!1));var l=new Date,c=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),d=new Date(t.starts),u=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear()),p="".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear());t.durationUnits=o(t.duration>1?"Days":"Day"),t.daysUntil=t.starts?cn.dateDiff(u,c):0;var f,g,m=(new Date(t.ends)-new Date(t.starts))/36e5;if(t.durationHours=m>0&&m<.5?1:Math.round(m),t.isDays=!0,c>u&&h!==p&&(t.daysUntil=1),void 0===t.isAllDay&&(t.isAllDay=!0),t.durationHours<24&&(t.isDays=!1,t.isAllDay=!1,t.durationUnits=o(t.durationHours>1?"Hours":"Hour")),"true"===t.isAllDay.toString()&&(t.duration=(f=new Date(t.starts),g=new Date(t.ends),Math.abs(Math.round((g-f)/864e5))||1),t.durationUnits=o(t.duration>1?"Days":"Day"),t.isDays=!0,delete t.durationHours),t.starts){var v=r(t.starts);t.startsLocale=a(v),R.isIslamic(e.name)&&(t.startsLocale=a(R.gregorianToUmalqura(v))),t.startsHourLocale=a(v,{date:"hour"}),Array.isArray(v)?t.startsHour=parseFloat(v[3]+v[4]/60):t.startsHour=parseFloat(v.getHours()+v.getMinutes()/60)}if(t.ends){var b=r(t.ends);t.endsLocale=a(b),R.isIslamic(e.name)&&(t.endsLocale=a(R.gregorianToUmalqura(b))),t.endsHourLocale=a(b,{date:"hour"}),Array.isArray(b)?t.endsHour=parseFloat(b[3]+b[4]/60):t.endsHour=parseFloat(b.getHours()+b.getMinutes()/60)}if(t.eventTypes=i,t.isAllDay=t.isAllDay.toString(),"false"===t.isAllDay.toString()&&delete t.isAllDay,!t.isAllDay&&t.durationHours>=24&&(t.isAllDay=!1,t.durationUnits=o("Hours"),t.isDays=!1,delete t.duration),t.starts&&t.ends){var y=this.timeDiffInSeconds(r(t.starts),r(t.ends));t.durationInTime=this.timeBySeconds(y)}else t.durationInTime&&delete t.durationInTime;return t},timeDiffInSeconds:function(t,e){var n=Math.abs(e.getTime()-t.getTime());return Math.ceil(n/1e3)},timeBySeconds:function(t){return t=Number(t),{days:Math.floor(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(t%3600/60),seconds:Math.floor(t%60)}},formateTimeString:function(t,e,n){if(t.durationInTime){var i=function(t){return R.translate(t,{locale:e.name,language:n})},a=t.durationInTime,s="";if(a.days){var r=i(a.days>1?"Days":"Day");s+="".concat(a.days," ").concat(r)}if(a.hours){var o=i(a.hours>1?"Hours":"Hour");a.days&&(s+="".concat(a.minutes||a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.hours," ").concat(o)}if(a.minutes){var l=i(a.minutes>1?"Minutes":"Minute");(a.days||a.hours)&&(s+="".concat(a.seconds?", ":" ".concat(i("And")," "))),s+="".concat(a.minutes," ").concat(l)}if(a.seconds){var c=i(a.seconds>1?"Seconds":"Second");s+="".concat(a.days||a.hours||a.minutes?" ".concat(i("And")," "):""),s+="".concat(a.seconds," ").concat(c)}""!==s&&(t.duration="",t.durationUnits="",t.durationHours=s)}},getEventTypeColor:function(t,e){var n,i="azure";if(!t.type&&!t.color)return i;if("#"===(null===(n=t.color)||void 0===n||null==n?void 0:n.substr(0,1)))return t.color;var a=e.filter(function(e){return e.id===t.type});return 1===a.length?i=a[0].color||"azure":i},cleanEventData:function(t,e,n,i,a,s,r){var o={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:i.name},l=function(t){return R.formatDate(t,o)},c=function(t,e){return R.parseDate(t,C.extend(!0,{locale:i.name},e))},d="on"===t.isAllDay||"true"===t.isAllDay||t.isAllDay,u=n,h=n;if(t.startsLocale&&t.endsLocale&&(u=new Date(c(t.startsLocale)),h=new Date(c(t.endsLocale))),"string"!=typeof t.starts||t.startsLocale||(u=new Date(t.starts)),"string"!=typeof t.ends||t.endsLocale||(h=new Date(t.ends)),R.isValidDate(u)||(u=n),R.isValidDate(h)||(h=n),d)u.setHours(0,0,0,0),t.starts=l(new Date(u)),h.setHours(23,59,59,999),t.ends=l(new Date(h)),t.duration=t.starts===t.ends?1:null,t.isAllDay=!0;else{if(u===h)h.setHours(h.getHours()+parseInt(t.durationHours,10)),t.ends=l("safari"===m.browser.name?h:h.toISOString()),t.duration=null;else if(t.endsHourLocale&&t.startsHourLocale){var p=c(t.startsHourLocale,{date:"hour"}),f=c(t.endsHourLocale,{date:"hour"});u.setHours(p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()),h.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()),"safari"===m.browser.name?(t.starts=l(u),t.ends=l(h)):(t.starts=l(u.toISOString()),t.ends=l(h.toISOString())),t.duration=cn.dateDiff(new Date(t.starts),new Date(t.ends))}else t.ends=l(new Date(h));t.starts=l(new Date(u)),t.isAllDay=!1}if(void 0===t.comments&&e&&(t.comments=R.translate("NoCommentsEntered",{locale:i.name,language:a}),t.noComments=!0),!t.subject&&e&&(t.subject=R.translate("NoTitle",{locale:i.name,language:a})),t.type||(t.type=r[0].id),void 0===t.id&&e){var g=0===s.length?0:parseInt(s[s.length-1].id,10);t.id=(g+1).toString()}"NewEvent"===t.title&&(t.title=R.translate("NewEvent",{locale:i.name,language:a}))}},un=["default","neutral","secondary","error","alert","good","info"],hn={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:un[0],value:void 0};function pn(t,e){var n;if(this.settings=C.mergeSettings(t,e,hn),t instanceof HTMLElement?t.querySelector(".tag-content")?n=t:((n=document.createElement("span")).className+="".concat(t.className),t.id&&t.id.length?(n.id=t.id,t.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id),t.insertAdjacentElement("beforebegin",n),n.appendChild(t),n.classList.add("tag"),t.className="",t.classList.add("tag-content")):((n=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(n),"string"==typeof this.settings.id&&this.settings.id.length&&(n.id=this.settings.id,delete this.settings.id)),t){var i=t.querySelector(".audible");i&&n.insertAdjacentElement("afterbegin",i)}this.element=n,this.getSettingsFromElement(),this.init()}pn.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var t=this.element.classList,e=C.getArrayFromList(this.element.classList),n=this.settings.style;e.forEach(function(e){un.indexOf(e)>-1&&t.remove(e)}),-1===this.element.className.indexOf(n)&&"default"!==n&&t.add(n),this.settings.disabled&&t.add("is-disabled");var i="";this.settings.audibleContent&&(i='<span class="audible">'.concat(u.stripHTML(this.settings.audibleContent),"</span>"));var a="span",s="",r="",o="",l=this.settings.href&&this.settings.href.length;(l||this.originallyAnchor)&&(a="a",this.settings.disabled&&(o=' tabIndex="-1"')),l&&(s=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(t.add("is-linkable"),r='<button class="btn-linkable" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),"\n      </button>"));var c="<".concat(a,' class="tag-content"').concat(s).concat(o,">").concat(u.sanitizeHTML(this.settings.content),"</").concat(a,">"),d="";this.settings.dismissible&&(t.add("is-dismissible"),d='<button class="btn-dismissible" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(R.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(i).concat(c).concat(r).concat(d),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".btn-dismissible")},getSettingsFromElement:function(){var t=this.element.className,e="";un.forEach(function(n){t.indexOf(n)>-1&&(e=n)}),e&&(this.settings.style=e),this.settings.disabled=this.disabled;var n=this.dismissibleBtn,i=this.element.className.indexOf("is-dismissible")>-1;(n||i)&&(this.settings.dismissible=!0);var a=this.element.querySelector("a"),s=this.element.className.indexOf("is-linkable")>-1,r=this.element.querySelector(".btn-linkable");if(a||s||r){this.originallyAnchor=!0;var o=a.getAttribute("href");o&&o.length&&(o=u.stripTags(o),this.settings.href=o)}(s||r)&&(this.settings.clickable=!0);var l=this.element.querySelector(".audible");l instanceof HTMLElement&&(this.settings.audibleContent=u.stripHTML(l.innerText));var c=this.contentElement;c&&(this.settings.content=u.sanitizeHTML(c.innerText))},remove:function(){var t=this.element,e=t.parentNode;this.settings.parentAPI&&(e=this.settings.parentAPI.element),$(e).triggerHandler("beforetagremove",[this]),this.destroy(),t.remove(),$(e).triggerHandler("aftertagremove",[this])},dismiss:function(t){if(!this.disabled){this.remove(t),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var e=this.settings.parentAPI;e&&e.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var t=$(this.element);t.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var e=this.dismissibleBtn;e&&e.parentNode.removeChild(e);var n=t.data("hidefocus");return n&&"function"==typeof n.destroy&&n.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,hn)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var t=this;$(this.element).on("focusin.tag",function(){t.element.classList.add("is-focused")}).on("focusout.tag",function(){t.element.classList.remove("is-focused")});var e=this;$(this.element).on("click.tag","a, .btn-linkable",function(t){var n;return"function"==typeof e.settings.clickHandler&&(n=e.settings.clickHandler(e)),!(!1===n||e.settings.href&&"#"===e.settings.href)||(t.preventDefault(),!1)}),this.settings.dismissible&&($(this.element).on("click.tag",".btn-dismissible",function(e){t.dismiss(e)}),$(this.element).on("keydown.tag","a",function(e){8===e.keyCode&&t.dismiss(e)}))}};var fn={tags:[]};function gn(t,e){var n=this;if(!(t instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=C.mergeSettings(t,e,fn),this.element=t;var i=C.getArrayFromList(this.element.querySelectorAll(".tag"));i.length&&(this.settings.tags=[],i.forEach(function(t){n.settings.tags.push(new pn(t))})),this.init()}gn.prototype={get length(){return this.tags.length},get elements(){return this.tags.map(function(t){return t.element})},init:function(){var t=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach(function(e){t.add(e)}),this.render()},getTargetProp:function(){return"content"},add:function(t){var e,n=this;if(!t)throw new Error("No object was provided");if(Array.isArray(t)){var i=[];return t.forEach(function(t){i.push(n.add(t))}),i}if(S.isEmpty(t))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return t instanceof pn?(e=t,t.settings.parentAPI=this):(t.parent=this.element,t.parentAPI=this,e=new pn(void 0,t)),-1===this.tags.indexOf(e)&&this.tags.push(e),e},remove:function(t,e){t instanceof pn&&(t=t.settings);var n,i=this.getTargetProp(t),a=this.tags.filter(function(e){return e.settings[i]===t[i]||(n=e,!1)});return a.length<this.tags.length&&(this.tags=a),e&&n.remove(),n},removeAll:function(){this.tags.forEach(function(t){t.remove()}),this.tags=[]},render:function(){this.tags.forEach(function(t){t.render()}),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.elements,n=0,i=e.length;t<n&&(t=n),t>i&&(t=i);var a=e[t],s=a.querySelector("a");return s&&s.focus(),a},focusPreviousElement:function(t){if(!(t instanceof HTMLElement))throw new Error("".concat(t," is not an HTMLElement"));var e=this.elements.indexOf(t);if(!(e>-1))throw new Error("".concat(t," does not exist within this TagList"));return this.focusByIndex(e-1)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings),Array.isArray(t.tags)&&(this.settings.tags=t.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach(function(t){t.remove()}),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var mn={height:300,itemHeight:50,bufferSize:20,data:[],scrollTop:0,itemCount:0,itemTemplate:null,startIndex:0};function vn(t,e){this.settings=C.mergeSettings(t,e,mn),this.element=$(t),this.init()}vn.prototype={init:function(){return this.container=this.element.find(".ids-virtual-scroll")[0],this.stringTemplate='<div class="ids-virtual-scroll-item">${productName}</div>',this.itemCount=this.settings.data.length,this.itemTemplate=this.settings.itemTemplate||this.itemTemplate,this.handleEvents(),this.applyHeight(),this.renderItems(!1),this},handleEvents:function(){var t=this;return this.timeout=null,this.scrollHandler=function(e){t.handleScroll(e)},this.container.addEventListener("scroll",this.scrollHandler,{passive:!0}),this},handleScroll:function(t){var e=this;this.timeout&&cancelAnimationFrame(this.timeout);var n=t.target;this.timeout=requestAnimationFrame(function(){e.scrollTop=n.scrollTop})},renderItems:function(t){var e=this;if(this.settings.data&&(t||0!==this.data.length)){var n=this.startIndex,i=this.startIndex+this.visibleItemCount();if(this.lastStart!==n||this.lastEnd!==i){this.lastStart=n,this.lastEnd=i;var a=this.settings.data.slice(n,i),s="";a.map(function(t,n){var i=e.itemTemplate(t,n);return s+=i,i}),this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.itemContainer.innerHTML=s,this.element.trigger("afterrendered",this,{elem:this,startIndex:n,endIndex:i})}}},applyHeight:function(){this.container.style.height="".concat(this.settings.height,"px"),this.container.querySelector(".ids-virtual-scroll-viewport").style.height="".concat(this.viewPortHeight,"px"),this.itemContainer=this.element.find(".contents")[0],this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.isTable=this.element.find(".ids-data-grid-container").length>0,this.isTable&&(this.element.find(".ids-virtual-scroll")[0].style.overflow="inherit")},visibleItemCount:function(){var t=Math.ceil(this.height/this.itemHeight)+2*this.bufferSize;return Math.min(Number(this.itemCount)-this.startIndex,t)},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,mn)),this.unbind().init()},unbind:function(){this.container.removeEventListener("scroll",this.scrollHandler),$.removeData(this.element[0],"virtual-scroll")},destroy:function(){this.unbind(),$.removeData(this.element[0],"virtual-scroll")},set height(t){this.settings.height=t},get height(){return 0===this.data.length?0:this.settings.height},set itemHeight(t){this.settings.itemHeight=t},get itemHeight(){return this.settings.itemHeight},set bufferSize(t){this.settings.bufferSize=t},get bufferSize(){return this.settings.bufferSize||20},set scrollTop(t){this.container.scrollTop===t?(this.settings.scrollTop=t,this.renderItems(!1)):this.container.scrollTop=t},get scrollTop(){return this.settings.scrollTop||0},scrollTo:function(t){this.scrollTop=Number(t)*this.itemHeight},get viewPortHeight(){return Number(this.itemCount)*Number(this.itemHeight)},set itemCount(t){this.settings.itemCount=t},get itemCount(){return this.settings.itemCount},get offsetY(){return Number(this.startIndex)*Number(this.itemHeight)},get startIndex(){var t=Math.floor(Number(this.scrollTop)/Number(this.itemHeight))-Number(this.bufferSize);return Math.max(0,t)},itemTemplate:function(t){return this.injectTemplate(this.stringTemplate,t)},injectTemplate:function(t,e){return t.replace(/\${(.*?)}/g,function(t,n){return e[n]})},set data(t){if(t)return this.settings.data=t,this.itemCount=t.length,this.lastStart=null,this.lastEnd=null,this.scrollTop=0,this.applyHeight(),void this.renderItems(!0);this.settings.data=null},get data(){var t;return null==this||null===(t=null==this?void 0:this.settings)||void 0===t||null==t?void 0:t.data}};var bn=["none","all","group"],yn={closeOnSelect:!0,cssClass:null,filterMode:"contains",virtualScroll:!1,maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,showSearchUnderSelected:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{},tagListMaxHeight:120,allTextString:null,selectedTextString:null,selectAllFilterOnly:!0,attributes:null};function wn(t,e){this.settings=C.mergeSettings(t,e,yn),this.element=$(t),this.init()}wn.prototype={get value(){var t=this.settings.reload,e=this.settings.multiple;if("typeahead"===t)return e?this.selectedValues:this.element.val();for(var n,i=[],a=this.element[0].options,s=0;s<a.length;s++)(n=a[s]).selected&&i.push(n.value||n.text);return e||1!==i.length?i:i[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var t=this.pseudoElem.find("span").css("max-width","");if(Math.round(t.width())>Math.round(this.pseudoElem.width()))return t.css("max-width","100%"),!0}return!1},get isFocused(){var t=document.activeElement,e=this.pseudoElem.length&&this.pseudoElem.is($(t)),n=this.list&&this.list.length&&this.list[0].contains(t),i=this.tagListAPI&&this.tagListAPI.element.contains(t);return!!(e||n||i)},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map(function(t){return t.value})},get selectedOptions(){return C.getArrayFromList(this.element[0].querySelectorAll("option")).filter(function(t){return t.selected})},init:function(){var t=this,e=this.element.attr("id");e=e?u.stripTags(e):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",e||(e=C.uniqueId(this.element,"dropdown"),h.setAttribute(this.element[0],"id",e),h.setAttribute(this.element.parent().find("label").first()[0],"for",e)),"ios"!==m.os.name&&"android"!==m.os.name||(this.settings.noSearch=!0),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled");var n=this.element[0].classList;0===n.length&&(this.element[0].classList="dropdown");var i=n.contains("dropdown-xs")?"dropdown input-xs":n.contains("dropdown-sm")?"dropdown input-sm":n.contains("dropdown-lg")?"dropdown input-lg":"dropdown",a=this.element.attr("style");this.isHidden=a&&a.indexOf("display: none")>=0;var s=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=s.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(s)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(i)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(e,"-shdo")),n.contains("text-align-reverse")?i+=" text-align-reverse":n.contains("text-align-center")&&(i+=" text-align-center"),this.label=$('label[for="'.concat(u.stripTags(e),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",i):this.pseudoElem=$('<div class="'.concat(i,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var r=h.getAttributes(this.element[0]),o=this.getDataAttributes(r,["data-validate"]);this.pseudoElem.attr(o.obj).attr({role:"button","aria-haspopup":"listbox","aria-expanded":"false"}),this.renderPseudoElemLabel(),this.settings.attributes&&C.addAttributes(this.pseudoElem,this,this.settings.attributes,"dropdown",!0),function(t){var e=t.element.prop("disabled"),n=t.element.prop("readonly");e?t.disable():n?t.readonly():t.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.settings.showSearchUnderSelected=!0,this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var l=this.element.attr("data-source");l&&"source"!==l&&(this.settings.source=l);var c=this.element.attr("data-maxselected");function d(t,e){switch(t){case!e||"true":return"all";case!!e&&"false":return"none";default:return bn.indexOf(t)>-1?t:"none"}}c&&!isNaN(c)&&(this.settings.maxSelected=parseInt(c,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var p=this.element.attr("data-move-selected");this.settings.moveSelected=p?d(p,!0):d(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var f=this.element.attr("data-close-on-select");f&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===f);var g=this.element.attr("data-no-search");g&&!this.settings.noSearch&&(this.settings.noSearch="true"===g);for(var v=["-xs","-sm","-mm","-md","-lg"],b=this.element.attr("class"),y=null,w=0;w<v.length;w++)y=v[w],b.match(y)&&this.pseudoElem.addClass("dropdown".concat(y));return this.dataset=[],this.listfilter=new Ce({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout(function(){t.toggleTooltip()},0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var t=this;function e(e){t.settings.dismissHandler&&t.settings.dismissHandler(e);var n=t.selectedOptions.filter(function(t){return u.stripHTML(t.value)===e.settings.value});n.length&&t.deselect(n[0]),t.tagListAPI.element.classList[t.selectedOptions.length?"remove":"add"]("empty"),t.isOpen()&&t.updateList()}var n=this.toTagData();n.forEach(function(n){n.dismissHandler=e,t.settings.clickHandler&&(n.clickHandler=t.settings.clickHandler),t.isDisabled()&&(n.disabled=!0)});var i=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:n}):(this.tagListAPI=new gn(i,{tags:n}),i.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),isNaN(this.settings.tagListMaxHeight)||(i.classList.add("scrollable"),i.style.maxHeight=n.length?"".concat(this.settings.tagListMaxHeight,"px"):"");var a=i.scrollHeight>i.clientHeight;this.pseudoElem[0].classList[a?"add":"remove"]("has-scrollbar"),this.isOpen()&&this.position()},renderPseudoElemLabel:function(){var t=this.element.prev(),e="";this.selectedOptions.forEach(function(t){e.length&&(e+=", "),e+=$(t).text().trim()}),this.pseudoElem.attr({"aria-label":"".concat(t.text(),", ").concat(e)})},inputTimer:function(){if(this.inputTimeout)return!1;var t=this;return this.inputTimeout=setTimeout(function(){clearTimeout(t.inputTimeout),t.inputTimeout=null},200),!0},setWidth:function(){var t=this.element[0].style;t.width&&(this.pseudoElem[0].style.width=t.width),"absolute"===t.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=t.left,this.pseudoElem[0].style.top=t.top,this.pseudoElem[0].style.bottom=t.bottom,this.pseudoElem[0].style.right=t.right)},setItemIcon:function(t){if(!t.icon)return t.isIcon=!1,t.html="",void this.listIcon.items.push(t);"object"===a(t.icon)&&(t.obj=t.icon,t.icon=t.icon.icon,t.obj.color?0===t.obj.color.indexOf("#")?t.specColor=t.obj.color:t.classList=" ".concat(t.obj.color):t.obj.class&&(0===t.obj.class.indexOf("#")?t.specColor=t.obj.class:t.classList=" ".concat(t.obj.class)),t.obj.colorOver?0===t.obj.colorOver.indexOf("#")?t.specColorOver=t.obj.colorOver:t.classListOver=" ".concat(t.obj.colorOver):t.obj.classOver&&(0===t.obj.classOver.indexOf("#")?t.specColorOver=t.obj.classOver:t.classListOver=" ".concat(t.obj.classOver))),t.isIcon=t.icon&&t.icon.length,t.classList&&t.classList.length&&(t.isClassList=!0),t.classListOver&&t.classListOver.length&&(t.isClassListOver=!0),t.html=$.createIcon({icon:t.isIcon?t.icon:"",class:"listoption-icon".concat(t.isClassList?" ".concat(t.classList):"")}),"swatch"===t.icon&&(t.isSwatch=!0,t.html='<span class="swatch '.concat(t.isClassList?t.classList:"",'"></span>')),this.listIcon.items.push(t)},setListIcon:function(){var t=this,e=!t.settings.multiple&&t.element.find("[data-icon]").length>0,n=e?this.element.find("option"):[];if(t.listIcon={hasIcons:e,items:[]},e){var i=0;n.each(function(e){var n=$(this).attr("data-icon"),a=null;"string"==typeof n&&n.length&&(a=0!==n.indexOf("{")?n:$.fn.parseOptions(this,"data-icon"),t.setItemIcon({html:"",icon:a}),t.listIcon.items[e]&&t.listIcon.items[e].isIcon&&i++)}),e=i>0}e&&(t.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),t.listIcon.pseudoElemIcon=t.pseudoElem.find("> .listoption-icon"),t.listIcon.idx=-1),t.listIcon.hasIcons=e},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var t=this,e=$(this.element[0].selectedOptions),n=this.getOptionText(e);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:u.escapeHTML(n),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",function(){t.removeTooltip()}).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(t){var e=this;if(e.listIcon.hasIcons){var n=t?t.find(".listoption-icon"):null;e.list.find("li").each(function(i){var a=$(this),s=a.find(".listoption-icon"),r=e.listIcon.items[i];r&&(a.is(".is-focused")&&r.isClassListOver&&s.removeClass(r.classListOver).addClass(r.classList),n&&a.is(t)&&r.isClassListOver&&(n.removeClass(r.classList),n.addClass(r.classListOver)))})}},updateItemIcon:function(t){if(this.listIcon.hasIcons){var e=this.listIcon.pseudoElemIcon,n=t.index(),i=this.listIcon.idx,a=this.listIcon.items[n],s=a&&a.isIcon?a.icon:"";if(!a)return;if(i>-1){var r=this.listIcon.items[i];r&&(e.removeClass("".concat(r.classList," ").concat(r.classListOver)),e[0].style.fill="")}this.listIcon.idx=n,e.changeIcon(s),a.isClassList&&e.addClass(a.classList)}},updateList:function(t){var e=this,n=this.settings,i=e.isMobile(),a=void 0!==e.list&&null!==e.list&&e.list.length>0,s="",r="",o=0,l=this.element.find("optgroup").length,c="",d=!0===this.settings.multiple,u="".concat(this.settings.moveSelected),h=!0===this.settings.showSelectAll,p={all:R.translate("All"),selected:R.translate("Selected"),labelText:e.isInlineLabel?e.inlineLabelText.text():this.label.text()};p.all="string"==typeof n.allTextString&&""!==n.allTextString?e.settings.allTextString:"".concat(p.all),p.selected="string"==typeof n.selectedTextString&&""!==n.selectedTextString?e.settings.selectedTextString:"".concat(p.selected);var f=C.getAttribute(this,"id",this.settings.attributes),g="".concat(f?"".concat(f,"-"):"","dropdown-list"),v="".concat(f?"".concat(f,"-"):"","listbox");this.element[0].classList.contains("text-align-reverse")?c=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(c=" text-align-center"),a?(this.list.attr("id",g),this.listUl.attr("id","".concat(v))):(s='<div class="dropdown-list'.concat(c).concat(i?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="').concat(g,'" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(this.settings.noSearch?R.translate("PressDown"):R.translate("TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(c,'" ').concat(this.settings.noSearch?'aria-readonly="true"':"",' id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(i?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),"</span>"),this.settings.virtualScroll?s+='<div class="virtual-scroll-container">\n            <div class="ids-virtual-scroll">\n              <div class="ids-virtual-scroll-viewport">\n                <ul id="'.concat(v,'"').concat(' role="listbox"',' class="contents" aria-label="').concat(R.translate("Dropdown"),'"></ul>\n              </div>\n            </div>\n          </div>'):s+='<ul id="'.concat(v,'"').concat(' role="listbox"',' aria-label="').concat(R.translate("Dropdown"),'">'));var b=this.element.find("option"),y=this.element.find("optgroup"),w=function(t,e){return e.selected},x=[];"typeahead"===this.settings.reload&&(w=function(t,n){return!!e.selectedValues&&e.selectedValues.indexOf(n.value)>-1});var k=b.filter(w);if("typeahead"===this.settings.reload&&k.prop("selected",!0),d&&h&&b.length){var T=b.not("[disabled], .hidden").length===k.not("[disabled], .hidden").length;r+='<li role="none" class="dropdown-select-all-list-item'.concat(T?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(R.translate("SelectAll"),"</a>")+"</li>"}"group"===u&&(y&&y.length?y.each(function(t,e){var n=k.filter(function(){return $.contains(e,this)});x.push(n)}):u="all"),"all"===u&&(b=b.not(k),k.length>0&&(r+=e.buildLiHeader(p.selected)),k.each(function(n){r+=e.buildLiOption(this,n,t),o++}),!l&&b.length>0&&(r+=e.buildLiHeader(p.all))),this.settings.virtualScroll?r="":b.each(function(n){var i,a=n+o,s=$(this),l=s.parent();l.is("optgroup")&&y.length&&(i=l.index(),y.index(l)>-1&&(y=y.not(l),r+=e.buildLiHeader("".concat(l.attr("label"))),"group"===u&&x[i].each(function(n){r+=e.buildLiOption(this,n,t),o++}))),"none"!==u&&s.is(":selected")||(r+=e.buildLiOption(this,a,t))}),a?(this.listUl.html(r),e.settings.attributes&&this.listUl.find(".dropdown-option a").each(function(t){var n=$(this);C.addAttributes(n,e,e.settings.attributes,"option-".concat(t),!0)})):(s+=this.settings.virtualScroll?"".concat(r,"</div>"):"".concat(r,"</ul></div>"),this.list=$(s),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),"ios"!==m.os.name&&"android"!==m.os.name||this.searchInput.attr("readonly","readonly"),this.virtualScrollElem=this.listUl.closest(".virtual-scroll-container"),this.opts=b,this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),l&&this.listUl.addClass("has-groups"),this.hasTooltips=this.listUl.find("[title]").length>0||this.element.find("[title]").length>0,this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},buildLiHeader:function(t){return'<li role="none" class="group-label" focusable="false">\n      '.concat(t,"\n    </li>")},buildLiOption:function(t,e,n){var i="",a=t.innerHTML,s=h.getAttributes(t),r=s.getNamedItem("value"),o=s.getNamedItem("title"),l=o?' title="'.concat(o.value,'"'):"",c=s.getNamedItem("data-badge"),d=s.getNamedItem("data-badge-color"),u="",p=t.selected?" is-selected":"",f=t.disabled?" is-disabled":"",g=t.className?" ".concat(t.className.value):"",m=g.indexOf("clear")>-1?' class="clear-selection"':"",v=' tabIndex="'.concat(e&&0===e?0:-1,'"'),b=" ".concat(this.getDataAttributes(s,["data-badge","data-badge-color","data-val","data-icon"]).str),y=(r&&"value"in r?r.value:a).replace(/"/g,"/quot/"),w="";if(this.listIcon.hasIcons&&this.listIcon.items[e]&&(w=this.listIcon.items[e].html)," "===b&&(b=""),c&&(u='<span class="badge '.concat(d?d.value:"azure07",'">').concat(c.value,"</span>")),g.indexOf("clear")>-1&&""===a&&(a=R.translate("ClearSelection")),n&&n.length>0){var x=this.getSearchRegex(n);a=a.replace(x,'<span class="dropdown-highlight">$1</span>').trim()}return this.listIcon.hasIcons&&this.listIcon.items[e]&&this.listIcon.items[e].isSwatch&&(g+=" is-swatch"),i+'<li class="dropdown-option'.concat(p).concat(f).concat(g,'" data-val="').concat(y,'" ').concat(b).concat(l,' role="none">\n      <a id="list-option-').concat(e,'" href="#" ').concat(m,' role="option" ').concat(p?'aria-selected="true"':"").concat(v,">").concat(w).concat(a).concat(u,"</a></li>")},setDisplayedValues:function(){var t=$(this.element[0].selectedOptions),e=this.getOptionText(t);if(t.hasClass("clear")&&(e=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===t.length){var n=this.pseudoElem.find("span").first();return h.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),n=$("#".concat(this.element.attr("id"))).next().find("span").first(),h.html(n,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),this.setPlaceholder(e),void this.scrollRelease(this.listUl)}var i=this.element.attr("maxlength");i&&(e=e.substr(0,i)),e=e.trim();var a=this.pseudoElem.find("span");a.length>0&&(a[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(u.escapeHTML(e))),this.settings.showSearchUnderSelected||this.setPlaceholder(e)}this.previousActiveDescendant=t.first().val(),this.renderPseudoElemLabel(),this.updateItemIcon(t),this.setBadge(t)},copyClass:function(t,e,n){t.hasClass(n)&&e.addClass(n)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function(t){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var e="string"!=typeof t||"string"==typeof t&&""===t;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",e?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(t,e){var n=e.which;return e.altKey&&38===n?(e.stopPropagation(),e.preventDefault(),!1):t.is(":disabled")||t.hasClass("is-readonly")?void 0:!e.ctrlKey||!this.settings.onKeyDown||!1!==this.settings.onKeyDown(e)||(e.stopPropagation(),e.preventDefault(),!1)},handleSearchEvents:function(){var t=this;this.filterTerm||(this.searchKeyMode=!1);var e,n=this.searchInput[0].value;"ie"===m.browser.name&&"11"===m.browser.version||(e=String.fromCodePoint(8)),"."!==n&&n!==e||(this.searchInput[0].value=""),this.searchInput.on("keydown.".concat("dropdown"),function(e){var n=$(t);return t.handleKeyDown(n,e)}).on("input.".concat("dropdown"),function(e){t.isFiltering=!0,t.handleAutoComplete(e)})},filterList:function(t){var e=this,n=!1;this.settings.source&&"typeahead"===this.settings.reload&&(n=!0,this.callSource());var i,a=this,s=!1,r=$(".dropdown-option",this.listUl),o=$(".group-label",this.listUl);if(r.length&&this.list&&(!this.list||this.list.length)){t||(t="");var l=function(){if(i=!n&&t&&t.length?e.listfilter.filter(r,t):r,e.list.addClass("search-mode"),e.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),e.searchInput.removeAttr("aria-activedescendant"),e.unhighlightOptions(),i&&(i.length||t)){i.removeClass("hidden"),r.not(i).add(o).addClass("hidden"),e.filteredItems=r.filter(i),e.filteredItems.each(function(e){var n=$(this);n.children("a").attr("tabindex",0===e?"0":"-1"),s||(a.highlightOption(n),s=!0),a.highlightSearchTerm(n,t)}),o.each(function(){var t=$(this).nextUntil(".group-label, .selector").not(".hidden");(a.settings.showEmptyGroupHeaders||t.length)&&$(this).removeClass("hidden")}),t="";var l=document.body.scrollHeight;window.scrollY+window.innerHeight>=l?a.position():a.shrinkTop(a)}else e.resetList()};if(this.settings.virtualScroll)return $(this.virtualScroller.element).one("afterrendered",function(){r=$(".dropdown-option",e.listUl),l()}),this.virtualScroller.data=this.listfilter.filter(this.opts,t),void(r=$(".dropdown-option",this.listUl));l()}},shrinkTop:function(t){if(t.list&&t.list[0].classList.contains("is-ontop")){var e=parseInt(t.list[0].offsetHeight,10),n=parseInt(t.searchInput[0].offsetHeight,10);t.list[0].style.top="".concat(t.wrapper[0].offsetParent.offsetTop+(e-n)+4,"px")}},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var t=this.listUl.find("li");t.removeAttr("style").each(function(){var t=$(this).children("a"),e=$(this),n=u.escapeHTML(t.text()),i=0!==e.children("a").find("svg").length?(new XMLSerializer).serializeToString(e.children("a").find("svg")[0]):"",a=e.children("a").find(".swatch"),s=0!==a.length?a[0].outerHTML:"";t[0]&&(t[0].innerHTML=s+i+n)}),this.list.hasClass("is-ontop")?this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px"):this.list[0].style.top="",delete this.filteredItems,this.settings.multiple&&this.updateList(),this.settings.virtualScroll&&(this.virtualScroller.data=this.opts),t.removeClass("hidden"),this.position(),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var t=this.element.find("option").filter(function(){return!this.value||0===$.trim(this.value).length});t.length&&(t[0].selected=!0,t[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.trigger("change").triggerHandler("selected"))},handleKeyDown:function(t,e){var n,i=this,a=this.element[0].selectedIndex||-1,s=this.element[0].options,r=e.which,o=this;if(!this.ignoreKeys(t,e))return!1;if(this.isLoading())return!0;if(o.settings.onKeyDown&&!1===o.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;switch(o.isOpen()&&(s=o.settings.virtualScroll?this.opts:this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),a=-1,$(s).each(function(t){($(this).is(".is-focused")||o.settings.virtualScroll&&$(this).is(":selected"))&&(a=t)})),r){case 37:case 8:case 46:if(!o.isOpen())return o.selectBlank(),e.stopPropagation(),e.preventDefault(),!1;break;case 9:return o.isOpen()&&(!this.settings.multiple&&s.length&&a>-1&&o.selectOption(this.correctValue($(s[a]))),o.closeList("tab"),this.activate()),!0;case 27:if(o.isOpen()){o.element.closest(".modal.is-visible").data("listclosed",!0);var l=o.pseudoElem?o.pseudoElem.parents("td"):null;return o.closeList("cancel"),o.activate(),l&&l.focus(),e.stopPropagation(),!1}break;case 32:case 13:if(o.isOpen()){if(32===r&&!0===o.searchKeyMode)break;if(e.preventDefault(),s.length&&a>-1){var c=$(s[a]);o.selectListItem(c)}}return e.stopPropagation(),!1;case 38:return!!e.shiftKey||(this.searchKeyMode=!1,a>0&&(n=$(s[a-1]),this.highlightOption(n),o.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),e.stopPropagation(),e.preventDefault(),!1);case 40:return!!e.shiftKey||(this.searchKeyMode=!1,a<s.length-1&&(n=$(s[a+1]),this.highlightOption(n),o.setItemIconOverColor(n),n.parent().find(".is-focused").removeClass("is-focused"),n.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(n)}),e.stopPropagation(),e.preventDefault(),!1);case 35:this.searchKeyMode=!1;var d=$(s[s.length-1]);return this.highlightOption(d),e.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var u=$(s[0]);return this.highlightOption(u),e.stopPropagation(),!1}return o.isOpen()?!0===this.settings.noSearch&&this.handleAutoComplete(e):o.isControl(r)||this.settings.source||this.settings.noSearch||(o.isFiltering=!0,o.filterTerm=$.actualChar(e),o.searchInput&&o.searchInput.length&&o.searchInput.val($.actualChar(e)),o.toggle()),this.searchKeyMode=!0,o.searchInput&&o.searchInput.attr("aria-activedescendant",""),!0},handlePseudoElemKeydown:function(t){var e=$(t.target),n=t.key;if(e.is(".is-readonly"))return!0;var i="Esc"===n||"Escape"===n;if(["Alt","Shift","Control","Meta"].indexOf(n)>-1)return!1;if(!this.ignoreKeys(e,t))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(n)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!t.ctrlKey&&this.handleKeyDown(e,t),!1;var a="Mac OS X"===m.os.name;return!a&&"Delete"===n||a&&"Backspace"===n||"Backspace"===n&&this.settings.noSearch?(this.selectBlank(),"Backspace"===n&&(t.stopPropagation(),t.preventDefault()),!0):i||"Tab"===n?!this.settings.noSearch||!this.isOpen()||this.handleKeyDown(e,t):(this.handleAutoComplete(t),!0)},handleAutoComplete:function(t){var e=this;if(!this.isLoading()){var n=this;if(this.timer&&clearTimeout(this.timer),"input"===t.type)this.filterTerm=n.settings.noSearch?this.searchInput.val().toLowerCase():this.searchInput.val();else{if(this.filterTerm+=$.actualChar(t).toLowerCase(),""===this.filterTerm)return;t.key===this.filterTerm||t.key.toLowerCase()!==this.filterTerm||n.settings.noSearch||(this.filterTerm=t.key)}this.timer=setTimeout(function(){if(n.settings.noSearch)return n.isOpen()?n.highlightStartsWith(n.filterTerm):n.selectStartsWith(n.filterTerm),void(n.filterTerm="");e.searchKeyMode=!0,n.isOpen()?(0===e.list.find("ul li.hidden").length&&e.list.find(" > svg.listoption-icon:not(.swatch)").changeIcon("icon-empty-circle"),i()):n.open(i)},n.settings.delay)}function i(){""===n.filterTerm?n.resetList():n.filterList(n.filterTerm.toLowerCase())}},isControl:function(t){return t>7&&t<48||t>90&&t<94||t>111&&t<146},activate:function(t){var e=this,n=this.pseudoElem;(t||e.isMobile())&&(n=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),t&&n&&(n.hasClass("is-readonly")||!0===n.prop("readonly"))||(e.isMobile()||e.filterTerm||!n||(n[0].setSelectionRange?n[0].setSelectionRange(0,n[0].value.length):"INPUT"===n[0].tagName&&n[0].select()),n&&"INPUT"!==document.activeElement.tagName&&n[0].focus())},getSearchRegex:function(t){var e;try{e=new RegExp("(".concat(E.escapeRegExp(t),")"),"i")}catch(t){e=/[\s\S]*/i}return e},getOptionText:function(t){var e="";return t||(t=this.element.find("option:selected")),t.each(function(){e.length>0&&(e+=", "),e+=$(this).text().trim()}),e},open:function(t){var e=this;function n(){e.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),e.updateList(),e.openList(),t&&"function"==typeof t&&t.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||e.callSource(n)||n())},openList:function(){var t,e=this,n=this.previousActiveDescendant?this.list.find('.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]')):this.list.find(".is-selected"),i=this;if(this.touchPrevented=!1,this.scrollLock(this.listUl),$("select").each(function(){var t=$(this).data();t.dropdown&&t.dropdown.closeList("cancel")}),$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).each(function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}}),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.list.attr("data-element-id",this.element.attr("id")),this.isShortField&&this.list[0].classList.add("dropdown-short"),i.settings.attributes){C.addAttributes(this.list.find("input"),this,this.settings.attributes,"search",!0),this.list.find("label").attr("for",this.list.find("input").attr("id")),C.addAttributes(this.list.find("label"),this,this.settings.attributes,"search-label"),C.addAttributes(this.list.find(".trigger svg"),this,this.settings.attributes,"trigger",!0),C.addAttributes(this.listUl,this,this.settings.attributes,"listbox",!0),C.addAttributes(this.list,this,this.settings.attributes,"list"),this.list.find(".dropdown-option a").each(function(t){var e=$(this);C.addAttributes(e,i,i.settings.attributes,"option-".concat(t),!0)});var a=C.getAttribute(this,"id",this.settings.attributes);this.pseudoElem.attr("aria-controls",a?"".concat(a,"-listbox"):"dropdown-list"),this.pseudoElem.attr("aria-expanded")}if(this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",n.children("a").attr("id")),this.searchInput.prop("readonly",this.settings.noSearch),this.settings.showSearchUnderSelected&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var s=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(s))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var r=this.settings.cssClass;if(r&&"string"==typeof r&&this.list.addClass(r),this.position(),this.settings.virtualScroll){var o=-1,l=null;this.opts.toArray().filter(function(t,e){return t.selected?(o=e,l=t,t):null}),this.virtualScroller=new vn(this.virtualScrollElem,{height:304,itemHeight:32,itemTemplate:function(t,e){var a=i.buildLiOption(e,t);return e.selected&&(l=e,n=$(l)),i.highlightSearchTerm($(a),i.filterTerm)},data:this.opts}),setTimeout(function(){$(e.virtualScroller.element).on("afterrendered",function(){e.highlightOption($(l))}),e.virtualScroller.scrollTo(o)})}if(this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),this.settings.width&&this.list.css("width","".concat(this.settings.width,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showSearchUnderSelected){var c=$(this.selectedOptions),d=this.getOptionText(c);this.searchInput.val(d)}var u=this.settings.multiple;if(this.highlightOption(n,u),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout(function(){i.listUl.scrollTop(0)},0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",function(t){13===t.which&&i.closeList("select")}),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",function(t){if(!i.touchPrevented){var e=i.selectListItem($(this));t.preventDefault(),e&&t.stopPropagation()}}).on("mouseenter.list","li",function(){i.highlightOption($(this),!0)}),this.hasTooltips){var h=function(){i.timer&&i.timer.destroy&&i.timer.destroy(!0)},p=function(t,e){$(t).tooltip({trigger:"immediate",content:e}),$(t).focus()};i.list.on("mouseover.tooltip","li[title], li[data-title]",function(t){var e;e=t.currentTarget,h(),i.timer=new W({duration:50,timeoutCallback:function(){var t=e.getAttribute("title");if(!t)return t=e.getAttribute("data-title"),void p(e,t);e.setAttribute("data-title",t),e.removeAttribute("title"),p(e,t)}}),G.register(i.timer)}).on("mouseleave.tooltip, mousewheel.tooltip, click.tooltip","li[title], li[data-title]",function(t){!function(t){var e;h(),$("#tooltip").hide(),null===(e=$("#tooltip").data("tooltip"))||void 0===e||null==e||e.destroy()}(t.currentTarget)})}function f(t){var e=$(t.target);if(i.touchPrevented||i.isDropdownElement(e)&&!e.is(".icon"))return t.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}this.scrollRelease(this.listUl),setTimeout(function(){i.list.addClass("is-closable")},100),$(document).on("touchstart.dropdown",function(e){i.touchPrevented=!1,t={x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",function(e){var n=e.originalEvent.touches[0].pageX,a=e.originalEvent.touches[0].pageY;(n>=t.x+10||n<=t.x-10||a>=t.y+10||a<=t.y-10)&&(i.touchPrevented=!0)})}).on("touchend.dropdown touchcancel.dropdown",function(t){if($(document).off("touchmove.dropdown"),t.preventDefault(),i.touchPrevented)return t.stopPropagation(),!1;f(t)}).on("click.dropdown",f);var g=$(".modal.is-visible .modal-body-wrapper"),m=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");m.length&&(g=m),g.length&&(this.parentScrollableArea=g,this.parentScrollableArea.on("scroll.dropdown",function(t){e.scrollDocument(t)}),this.parentScrollableArea.css("overscroll-behavior","none")),$("body").on("resize.dropdown",function(){i.position(),void 0===window.orientation&&i.closeList("cancel")}),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",function(){i.closeList("cancel")})},isDropdownElement:function(t){return t.closest(".dropdown, .multiselect").length>0||t.closest(".dropdown-list").length>0||!0===self.touchmove},scrollDocument:function(t){var e=$("*:focus");this.touchPrevented||this.isDropdownElement($(t.target))||e.is(".timepicker")?this.touchPrevented=!1:this.closeList("cancel")},position:function(){var t=this,e={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var n=this.pseudoElem;this.isInGrid&&(n=this.element.closest(".datagrid-cell-wrapper"));var i=window.getComputedStyle(n[0]),a=2*parseInt(i.borderLeftWidth,10),s=Math.round(parseInt(n[0].clientWidth,10)+a);this.searchInput[0].style.cssText="width: ".concat(s,"px !important");var r=Math.round(this.list.width())<=s;if(this.searchInput[0].style.width="",e.parent=n,e.useParentWidth=r,!this.settings.showSearchUnderSelected){var o=window.devicePixelRatio>1,l="chrome"===m.browser.name;e.y=-(parseInt(n[0].clientHeight,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)-(!l&&o?1:0)),e.x=0}t.settings.placementOpts&&t.settings.placementOpts.x&&(e.x=t.settings.placementOpts.x),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),this.settings.width&&this.list.css("width","".concat(this.settings.width,"px")),this.list.one("afterplace.dropdown",function(e,n){t.list[!0===n.wasFlipped?"addClass":"removeClass"]("is-ontop"),t.settings.virtualScroll||t.listUl[!0===n.wasFlipped?"prependTo":"appendTo"](t.list);var i=window.getComputedStyle(t.list[0]),a=i.top?parseInt(i.top,10):0,s=0;"firefox"===m.browser.name&&(s=4);var r,o=parseInt(t.listUl[0].offsetHeight,10),l=parseInt(t.list[0].offsetHeight,10)+5,c=parseInt(t.searchInput[0].offsetHeight,10),d=parseInt(t.list[0].offsetTop,10)+parseInt(t.list[0].offsetHeight,10)>=window.innerHeight;return c<l-2*c&&o+c>=l&&(r="".concat(l-c-5,"px"),d&&(t.list[0].style.maxHeight="".concat(parseInt(l,10)-5,"px"))),n.wasFlipped&&(r="".concat(l-c-s-5,"px"),t.isShortField||(t.list[0].style.top="".concat(a,"px"))),r&&!t.settings.virtualScroll&&(t.listUl[0].style.maxHeight=r),void 0===r&&t.list[0].classList.contains("is-ontop")&&(r="".concat(l-c-s-7),t.list[0].style.top="".concat(a-r,"px")),n}).place(e),this.list.data("place").place(e)},selectListItem:function(t){var e=t.closest("li");if(e.length&&(t=e),t.is(".separator, .group-label"))return!1;t.is(".dropdown-select-all-anchor")&&(t=t.parent());var n=t[0].querySelector("a");if(this.settings.multiple&&t[0].classList.contains("dropdown-select-all-list-item")){var i=!t[0].classList.contains("is-selected");return t[0].classList[i?"add":"remove"]("is-selected"),i?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"),this.selectAll(i),!0}var a=this.correctValue(t);if(a.is(":disabled"))return!1;if(this.selectOption(a),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var s=this.element.find("option"),r=s.filter(":selected");s.length>r.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").attr("aria-selected","false"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(t){var e=t.attr("data-val")||t.attr("value");if(!e)return t;e=e.replace(/"/g,"/quot/");var n=this.element.find('option[value="'.concat(e,'"]'));return(0===n.length||n.length>1)&&(n=this.element.find("option").filter(function(){var t=$(this),n=t.attr("value");return t.text()===e||n&&n.replace(/"/g,"/quot/")===e})),n},close:function(){return this.closeList("cancel")},closeList:function(t){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),delete this.filteredItems,this.tagListAPI&&this.scrollTagList(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",t),"click"!==t&&this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function(t){t&&0!==t.length&&(this.scrollLock(this.listUl),this.settings.virtualScroll?(t[0].closest(".ids-virtual-scroll").scrollTop=t[0].offsetTop-t[0].closest(".ids-virtual-scroll").offsetTop,t[0].scrollIntoView({block:"center"})):t[0].parentNode.scrollTop=t[0].offsetTop-t[0].parentNode.offsetTop,t.focus(),this.searchInput.focus(),this.scrollRelease(this.listUl))},scrollLock:function(){var t;null===(t=this.parentScrollableArea)||void 0===t||null==t||t.off("scroll.dropdown")},scrollRelease:function(){var t=this;setTimeout(function(){var e;null===(e=t.parentScrollableArea)||void 0===e||null==e||e.off("scroll.dropdown").on("scroll.dropdown",function(e){t.scrollDocument(e)})},"ios"===m.os.name?800:400)},scrollTagList:function(){var t=this;this.tagListAPI&&setTimeout(function(){t.isFocused||(t.tagListAPI.element.scrollTop=0)},5)},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return F(this.toggle,this.toggleList).apply(this)},highlightOption:function(t,e){var n;this.isOpen()&&t&&(0===t.length&&(t=this.list.find(".dropdown-option").eq(0)),t.is(".separator, .group-label")||(t.is("option")?(n=t,t=this.listUl.find('li[data-val="'.concat(n.val(),'"]'))):n=this.element.find("option").filter(function(e,n){return n.value===t.attr("data-val")}),this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").children("a").attr({tabindex:"-1"}),t.length&&n.length&&!n.hasClass(".is-disabled")&&!n.is(":disabled")&&(this.searchInput.attr("aria-activedescendant",t.children("a").attr("id")),this.setItemIconOverColor(t),t.addClass("is-focused").children("a").attr({tabindex:"0"}),e&&!1!==e&&void 0!==e||this.scrollToOption(t))))},highlightSearchTerm:function(t,e){if(!t)return"";if(!e)return t[0].outerHTML;var n=t.children("a"),i=this.getSearchRegex(e),a=t.text();a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=u.escapeHTML(a)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(i,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var s=0!==t.children("a").find("svg").length?(new XMLSerializer).serializeToString(t.children("a").find("svg")[0]):"",r=t.children("a").find(".swatch"),o=0!==r.length?r[0].outerHTML:"";return n[0]&&(n[0].innerHTML=o+s+a),t[0].outerHTML},unhighlightOptions:function(t,e){t&&t.length||(t=this.list.find(".is-selected")),this.setItemIconOverColor(),t.removeClass("is-focused").children("a").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),e&&!1!==e&&void 0!==e||this.scrollToOption(t.first())},renderListItem:function(t){var e=t.value,n=t.selected,i=this.listUl.find('li[data-val="'.concat(e,'"]')),a=i.children("a");if(i){if(n)return i[0].classList.add("is-selected"),void a[0].setAttribute("aria-selected","true");i[0].classList.remove("is-selected"),a[0].setAttribute("aria-selected","false")}},selectAll:function(t){var e=this,n=C.getArrayFromList(this.element[0].querySelectorAll("option:not(.is-disabled):not(:disabled)")),i=C.getArrayFromList(this.listUl[0].querySelectorAll("li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)")),a=n[n.length-1];this.settings.selectAllFilterOnly&&this.filteredItems&&(n=[],(i=$.makeArray(this.filteredItems)).forEach(function(t){var i=t.getAttribute("data-val");if(i){var a=e.element[0].querySelector('option[value="'.concat(i,'"]'));a&&n.push(a)}})),t?(i.forEach(function(t){t.classList.add("is-selected"),t.querySelector("a").setAttribute("aria-selected","true")}),n.forEach(function(t){t.selected=!0,t.setAttribute("selected",!0)})):(i.forEach(function(t){t.classList.remove("is-selected"),t.querySelector("a").setAttribute("aria-selected","false")}),n.forEach(function(t){t.selected=!1,t.setAttribute("selected",!1),t.removeAttribute("selected")})),this.previousActiveDescendant=a.value||"",this.setDisplayedValues(),this.updateItemIcon(a),!this.settings.selectAllFilterOnly&&this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(a),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(t,e){Array.isArray(t)&&(t=$(t));var n=this;t.each(function(){n.selectOption($(this),e)}),n.element.trigger("change").triggerHandler("selected")},selectOption:function(t,e){var n;if(t&&t.length)if(this.scrollLock(this.listUl),t.is("li")&&(n=t,0===(t=this.element.find('option[value="'.concat(t.attr("data-val"),'"]'))).length&&(t=this.element.find("option").filter(function(){return $(this).text()===n.attr("data-val")})),t.prop("disabled")))this.scrollRelease(this.listUl);else{var i=t.val();"string"==typeof t?(n=this.listUl.find('li[data-val="'.concat(t,'"]')),i=t,t=this.element.find('option[value="'.concat(i,'"]'))):"string"==typeof i&&(i=i.replace(/"/g,"/quot/"),n=this.listUl.find('li[data-val="'.concat(i,'"]')));var a=!0,s=!0,r=this.selectedValues,o=!1;!t.hasClass("clear")&&n||(o=!0),o&&this.deselectAll(),Array.isArray(r)||(r=[r]);var l=r.indexOf(i)>-1;this.settings.multiple&&l&&(a=!1),a?l?s=!1:(this.select(t[0]),this.previousActiveDescendant=i):(this.deselect(t[0]),this.previousActiveDescendant=void 0);var c=this.listUl[0].scrollTop;c>0&&(this.currentlyScrolledPos=c),this.renderListItem(t[0]),this.setDisplayedValues(),this.updateItemIcon(t),!e&&s&&(this.element.trigger("change").triggerHandler("selected",[t,a]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(t);var d=this.element.attr("id");if(m.browser.isIE11()&&d){var u=$("#".concat(d)).html(),h=$("#".concat(d)).val();u&&this.element.html(u),h&&this.element.val(h)}$(".tooltip:not(.is-hidden)").hide(),this.scrollRelease(this.listUl)}},select:function(t){t&&t instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(t.selected=!0))},selectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.select(e[0]),this.updated())}},deselect:function(t){t&&t instanceof HTMLOptionElement&&(t.selected=!1)},deselectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.deselect(e[0]),this.updated())}},deselectAll:function(){var t=this;this.element.find("option").each(function(e,n){$(n).prop("selected",!1),t.deselectValue(n)})},firstOptionStartingWith:function(t){if("string"==typeof t){var e=this.element[0],n=-1,i=0;this.searchMatches&&this.searchMatches[t]||(this.searchMatches={},this.searchMatches[t]=[]);for(var a=0;a<e.options.length;a++)if(0===e.options[a].innerText.toLowerCase().indexOf(t)){if(-1===this.searchMatches[t].indexOf(a)){this.searchMatches[t].push(a),n=a;break}i++}if(-1===n){if(!this.searchMatches[t].length)return;i===this.searchMatches[t].length&&(n=this.searchMatches[t][0],this.searchMatches[t].length=1)}return e.options[n]}},selectStartsWith:function(t){this.filterTerm="";var e=this.firstOptionStartingWith(t);this.select(e),this.updated(),this.element.trigger("change")},highlightStartsWith:function(t){if(this.isOpen()){var e=this.firstOptionStartingWith(t);this.highlightOption($(e))}},setBadge:function(t){if(this.badges){var e=this.element.parent().find(".badge");0===e.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),e=this.element.parent().find(".badge")),e.attr("class","badge ".concat(t.attr("data-badge-color")?t.attr("data-badge-color"):"azure07")).text(t.attr("data-badge"))}},callSource:function(t,e){var n=this,i="";if(e||!this.isOpen()||this.element.hasClass("search-mode")||(i=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var s=a(this.settings.source),r=function(e,a){var s="",r=n.element.val();function o(t){return t.replace(/"/g,"'")}function l(t){if(null!=t){var e="",i="",a="";"string"==typeof t&&(t={value:t}),void 0!==t.value&&(t.value=o(t.value)),void 0!==t.id&&(isNaN(t.id)||(t.id="".concat(t.id)),t.id=o(t.id),e=' id="'.concat(t.id,'"')),void 0!==t.label&&t.label.length&&(t.label=o(t.label),a=t.label);var l=n.selectedValues.indexOf(r)>-1;n.settings.multiple?r.forEach(function(e){e===t.value&&(t.selected=!0)}):(t.value===r||l)&&(t.selected=!0),t.selected&&(i=" selected"),a.length||a===t.value||(a+=t.value),s+="<option".concat(e,' value="').concat(t.value,'"').concat(i,">\n          ").concat(a,"\n        </option>")}}if(!n.isFiltering&&!C.equals(e,n.dataset)&&(n.dataset=e,!a)){n.element.empty();for(var c=0;c<e.length;c++){var d=void 0;if(e[c].group){d=e[c].options,s+='<optgroup label="'.concat(e[c].group,'">');for(var u=0;u<d.length;u++)l(d[u]);s+="</optgroup>"}else l(e[c])}n.element.append(s)}n.element.triggerHandler("complete"),n.element.trigger("requestend",[i,e]),"function"==typeof t?t():n.updateList(i)};if(n.element.triggerHandler("start"),n.element.trigger("requeststart"),"function"===s)this.settings.source(r,i,this.settings.sourceArguments);else if("object"===s){var o=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];r(o)}else{var l=this.settings.source.toString();$.getJSON(l).done(function(t){r(t)}).fail(function(){r([])})}return!0},getDataAttributes:function(t,e){if(t){"string"==typeof t&&(t=[t]);var n=e||[];"string"==typeof n&&(n=[n]);var i={obj:{},str:"",isExclude:function(t){return $.inArray(t,n)>-1}};for(var a in t)t.hasOwnProperty(a)&&(i.name="".concat(t[a].name),i.isData="data-"===i.name.substr(0,5),i.isData&&!i.isExclude(i.name)&&(i.obj[i.name]=t[a].value,i.str+=" ".concat(i.name,'="').concat(t[a].value,'"')));return{str:i.str,obj:i.obj}}},setCode:function(t){var e=this,n=function(){e.element.val(t),e.updated()};e.callSource(n)||n()},isMobile:function(){return["ios","android"].indexOf(m.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var t=[],e=this.element[0].id;return e||(e=C.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach(function(n){t.push({content:n.innerText.trim(),dismissible:!0,href:"#",id:"".concat(e,"-tag-").concat(n.value),style:"secondary",value:n.value})}),t},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.addClass("is-disabled"),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("aria-readonly","true").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.settings.multiple&&!0===this.settings.multiple?this.element.prop("multiple",!0):this.element.prop("multiple",!1),!0===this.element.prop("readonly")?this.readonly():(this.pseudoElem.removeClass("is-readonly"),this.pseudoElem.removeAttr("aria-readonly")),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var t=document.body.querySelector("#dropdown-list");t&&this.isOpen()&&t.parentNode.removeChild(t)},handleEvents:function(){var t=this,e=this;function n(t){var e=$(t.target).parents(".tag").length>0,n=!1;return t.target instanceof HTMLElement&&"string"==typeof t.target.className&&(n=t.target.classList.contains("tag")),!(!n&&!e)}var i=!1;this.pseudoElem.on("keydown.dropdown",function(e){return t.handlePseudoElemKeydown(e)}).on("click.dropdown touchstart.dropdown",function(t){t.originalEvent.ctrlKey&&t.originalEvent.shiftKey||t.stopPropagation(),i||e.toggle()}).on("mouseup.dropdown touchend.dropdown",function(t){2===t.button&&t.stopPropagation()}).on("mousedown.dropdown touchstart.dropdown",function(t){i=n(t)}).on("touchcancel.dropdown",function(t){n(t)||(t.stopPropagation(),e.toggle(),t.preventDefault())}),this.tagListAPI&&this.pseudoElem.on("focusout.dropdown",function(){t.scrollTagList()}),e.element.on("activated.dropdown",function(){e.label.trigger("click")}).on("updated.dropdown",function(t){t.stopPropagation(),e.updated()}).on("openlist.dropdown",function(){e.toggle()}),e.element.closest("form").on("reset.dropdown",function(){setTimeout(function(){e.element.triggerHandler("updated")},1)}),this.label.on("click",function(){e.isDisabled()||e.pseudoElem.focus()})}},$.fn.dropdown=function(t){return this.each(function(){var e=$.data(this,"dropdown");e?e.updated(t):e=$.data(this,"dropdown",new wn(this,t))})};var xn={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function Cn(t,e){this.settings=C.mergeSettings(t,e,xn),e&&e.colors&&(this.settings.colors=e.colors),this.element=$(t),this.init()}Cn.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.isIe11=this.isIe&&"11"===m.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=R?R.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var t=this.element,e=this.isEditor?this.element.attr("data-value"):this.element.val(),n="swatch".concat(e&&""!==$.trim(e)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),t.wrap(this.container)),this.container=t.parent(),this.swatch=$('<span class="'.concat(n,'"></span>')).prependTo(this.container),this.settings.showLabel){var i=t.data("mask");i&&"function"==typeof i.destroy&&i.destroy()}else t.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]});var a=this.element.children(".trigger");this.container&&this.container.length&&(a=this.container.children(".trigger")),a&&a.length&&a.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),e&&this.setColor(e),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.is(":disabled")&&this.container&&this.container.closest(".field").addClass("is-disabled"),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria(),C.addAttributes(this.element,this,this.settings.attributes,"colorpicker"),C.addAttributes(this.element.parent().find(".trigger"),this,this.settings.attributes,"trigger")},getHexFromLabel:function(t){for(var e=0;e<this.settings.colors.length;e++){var n=this.settings.colors[e],i=R.translate(n.label,!0);if(t===n.label+n.number||t===i+n.number){var a=n.value;return"#"!==a.substr(0,1)&&(a="#".concat(a)),a}}return""},getLabelFromHex:function(t){if(!t)return"";for(var e=0;e<this.settings.colors.length;e++){var n=this.settings.colors[e];if(t.replace("#","")===n.value.replace("#",""))return this.translateColorLabel(n.label)+n.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var t,e=parseInt(this.element[0].style.width,10);this.container.css({width:e}),this.element.css({width:e-4-(null===(t=this.swatch)||void 0===t||null==t?void 0:t.width())})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(R.translate("UseArrow"),"</span>"))},toggleList:function(){var t=this,e=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||e.length&&this.isPickerOpen)){e=this.updateColorMenu();var n=C.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:R.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(n).on("open.colorpicker",function(){t.element.parent().addClass("is-open"),t.isPickerOpen=!0}).on("close.colorpicker",function(){[].slice.call(t.menu[0].querySelectorAll("a")).forEach(function(t){var e=$(t).data("tooltip");e&&e.hide()}),e.on("destroy.colorpicker",function(){t.element.off("open.colorpicker selected.colorpicker close.colorpicker"),t.menu.off("destroy.colorpicker").remove()}),t.element.parent().removeClass("is-open"),t.isPickerOpen=!1,t.element.trigger("listclosed","select")}).on("selected.colorpicker",function(e,n){t.element.is(".colorpicker-editor-button")||(t.itemLabel=n.data("label")),t.isEditor||t.setColor(n.data("value"),t.itemLabel);var i=!1;if(t.element.is(".colorpicker-editor-button")){var a=t.element.data("toolbaritem")||t.element.data("toolbarflexitem"),s=a?a.toolbarAPI:null;s&&s.overflowedItems.forEach(function(t){"colorpicker"===t.type&&(i=!0)})}i||t.element.focus(),t.element.trigger("change")}),this.menu=$("#colorpicker-menu"),setTimeout(function(){t.menu.find(".is-selected").focus()},1)}},setColor:function(t,e){t=t||"";var n=this.settings,i=t,a=e;"#"!==t.toString().substr(0,1)&&""!==t&&(i="#".concat(i));var s=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(i);if(n.showLabel&&e===n.clearableText)this.setValueOnField({hex:i,label:n.clearableText,isEmpty:!0});else{if(!s){if(!n.showLabel)return i="#"!==i?i:"",void this.setValueOnField({hex:i,invalid:!0});a=t.replace("#",""),i=this.getHexFromLabel(a)}a||(a=this.getLabelFromHex(i)),this.setValueOnField({hex:i,label:a})}},setValueOnField:function(t){var e=this.settings,n=this.isEditor?"data-value":"value",i="";t.isEmpty||"string"!=typeof t.hex||(i=e.uppercase?t.hex.toUpperCase():t.hex.toLowerCase()),this.swatch&&(t.isEmpty||t.invalid?(this.swatch.addClass(t.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=i)),this.element[0].value=e.showLabel?t.label:i,this.element[0].setAttribute(n,i),this.element[0].setAttribute("aria-describedby",t.label||"")},translateColorLabel:function(t){return t?"string"==typeof R.translate(t,!0)?R.translate(t,!0):t:""},getThemeMode:function(t){var e=Object.keys(xn.themes).filter(function(e){return t.indexOf(e)>-1}),n="light";return e.length>0&&(n=e[0]),n},getThemeVariant:function(t){return this.getThemeMode(t)},updateColorMenu:function(){var t=this,e=this.settings,n=!!$("#colorpicker-menu").length,i=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),a=ct.currentTheme,s=this.getThemeMode(a),r="all"===e.themes[s].border,o=e.themes[s].checkmark,l="";$("#colorpicker-menu").remove();for(var c=function(s,c){var d=$("<li></li>"),u=$('<a href="#"><span class="swatch"></span></a>').appendTo(d),h=(t.translateColorLabel(e.colors[s].label)||e.colors[s].label)+(e.colors[s].number||""),p=parseInt(e.colors[s].number,10),f=new RegExp("\\b".concat(a,"\\b")),g=e.colors[s].value,m=!1,v=t.isEditor?t.element.attr("data-value"):t.element.val();e.showLabel&&!t.isEditor&&(v=t.getHexFromLabel(v)),(r||f.test(e.colors[s].border))&&(m=!0),v&&"".concat(v).toLowerCase().replace("#","")==="".concat(g).toLowerCase()&&(o&&$.each(o,function(t,e){p>=e[0]&&p<=e[1]&&(l=" checkmark-".concat(t))}),h!==t.itemLabel&&void 0!==t.itemLabel||u.addClass("is-selected".concat(l))),g=e.uppercase?g.toUpperCase():g.toLowerCase();var b=u.find(".swatch");b[0]&&(b[0].style.backgroundColor="#".concat(g)),null==b||null==b||b.addClass(m?"is-border":""),u[0].setAttribute("data-label",h),u[0].setAttribute("data-value",g),u[0].setAttribute("title","".concat(h," #").concat(g)),u.tooltip(),C.addAttributes(u,t,t.settings.attributes,h),n||i.append(d)},d=0,u=e.colors.length;d<u;d++)c(d);if(!n){if(e.clearable){var h=$("<li></li>"),p="foreColor"===this.element.attr("data-action")?"000000":"",f=$('<a href="#" title="'.concat(e.clearableText,'"><span class="swatch is-empty').concat(r?" is-border":"",'"></span></a>')).appendTo(h);f.data("label",e.clearableText).data("value",p).tooltip(),C.addAttributes(f,this,this.settings.attributes,"clear"),i.append(h)}$("body").append(i)}return i},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(t){return"number"!=typeof t?t:"rgb(".concat(255&t,", ").concat((65280&t)>>8,", ").concat((16711680&t)>>16,")")},rgb2hex:function(t){if(!t||-1===t.search("rgb"))return t;if("rgba(0, 0, 0, 0)"===t)return"transparent";var e=function(t){return"0".concat(parseInt(t,10).toString(16)).slice(-2)},n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(e(n[1])).concat(e(n[2])).concat(e(n[3]))},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var t=this.element.data("mask");if(t&&t.destroy(),this.icon&&this.icon.length){var e=this.icon.parent(".trigger");this.icon.off().remove(),e.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function(){var t,e,n,i,a,s,r=this,o=this.element,l=o.parent();null===(t=(e=this.icon).parent)||void 0===t||null===(n=null==(i=t.call)?void 0:i.call(t,e))||void 0===n||null==n||n.on("click.colorpicker",function(){return r.toggleList()}),null===(a=this.swatch)||void 0===a||null==a||a.on("click.colorpicker",function(){return r.toggleList()}),o.on("focus.colorpicker",function(){s=o.val(),l.addClass("is-focused")}).on("blur.colorpicker",function(){l.removeClass("is-focused"),r.isIeEdge&&!o.is(".is-open")&&s!==o.val()&&o.triggerHandler("change")}).on("openlist.colorpicker",function(){r.toggleList()});var c="blur.colorpicker paste.colorpicker change.colorpicker";c+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",o.on(c,function(){var t=r.isEditor?o.attr("data-value"):o.val();r.settings.showLabel?r.setColor(o.attr("value"),t):r.setColor(t)}),o.on("keydown.colorpicker",function(t){38!==t.keyCode&&40!==t.keyCode||r.toggleList(),13===t.keyCode&&r.setColor(o.val())})}},$.fn.colorpicker=function(t){return this.each(function(){var e=$.data(this,"colorpicker");e?e.updated(t):e=$.data(this,"colorpicker",new Cn(this,t))})};var kn=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(t){return!$(t).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(t){if("A"!==t.nodeName)throw new Error("Unspecified error occured");return $(t).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],Tn={button:"button",actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},An={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1,attributes:null};function Sn(t,e){this.element=t,this.settings=C.mergeSettings(this.element,e,An),this.init()}Sn.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(t){var e=!1;if(kn.forEach(function(n){$(t).is(n.selector)&&("function"!=typeof n.filter||n.filter(t))&&(e=n.type)}),!e)throw new Error("Element ".concat(t," is not a valid Toolbar Item Type."));return e}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&!0!==this.overflowed&&this.visible)},get focused(){return 0===this.element.tabIndex},set focused(t){this.element.tabIndex=t?0:-1},get selected(){return this.trueSelected},set selected(t){if(t)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var t=$(this.element),e=Tn[this.type];if(e)return t.data(e)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var t=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&t.push(this.selectedAnchor),$(this.element).trigger("selected",t,t[1])}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(t){var e="searchfield"===this.type||"toolbarsearchfield"===this.type;if(t)return e&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");e&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(t){if(t)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(t){if(this.hasReadOnly)return t?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var t=m.rtl,e=this.element.getBoundingClientRect(),n=this.section.getBoundingClientRect();return t?e.left<n.left:e.right>n.right},set hasNoOverflowedItems(t){if("actionbutton"===this.type&&this.componentAPI){var e=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(t&&e)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},get index(){return this.toolbarAPI.items.indexOf(this)},handleEvents:function(){var t=this,e=this,n=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&n.on("selected.".concat("toolbarflexitem"),function(n,i){if(!t.selectedAnchor){if(n.stopPropagation(),"actionbutton"===t.type){var a,s=$(i).parent(),r=s.data("originalButton"),o=$(r).data("toolbarflexitem");if(s.parents("ul").length>1&&(a=s.data("original-menu-element"),r=s.parents("li").last().data("originalButton"),o=$(r).data("toolbarflexitem")),o)return a?(n.preventDefault(),o.selectedAnchor=$(a).children("a")):o.selectedAnchor=i,void(o.selected=!0)}e.selectedAnchor=i,e.selected=!0}}),"actionbutton"===this.type&&(n.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||n.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(t){t.target&&t.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){var t,e=this;this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly),Array.isArray(this.settings.attributes)&&(this.settings.componentSettings||(this.settings.componentSettings={}),this.settings.componentSettings.attributes?(t=[],this.settings.attributes.forEach(function(n){var i=e.settings.componentSettings.attributes.find(function(t){return t.name===n.name});i?t.push(i):t.push({name:n.name,value:"".concat(n.value,"-").concat(e.type,"-").concat(e.index)})})):t=this.settings.attributes.map(function(t){return{name:t.name,value:"".concat(t.value,"-").concat(e.type,"-").concat(e.index)}}),this.settings.componentSettings.attributes=t);var n,i=$(this.element),a=Tn[this.type];a&&((n=i.data(a))?n.updated(this.settings.componentSettings):i[a](this.settings.componentSettings)),"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var t=this.componentAPI;if(t&&this.toolbarAPI){var e=t.menu;e&&e.length||(e=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var n=this.toolbarAPI.toPopupmenuData();!function t(e,n){e.menuId&&delete e.menuId;var i=n?"submenu":"menu";Array.isArray(e[i])&&e[i].forEach(function(e){t(e,!0)})}(n);var i=$(t.renderItem(n));this.predefinedItems=i,this.linkToolbarItems(n),e.prepend(this.predefinedItems),t.updated({menu:e,predefined:i}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var t=this.componentAPI;if(t&&this.toolbarAPI&&!t.isOpen){t.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var e=!0;this.toolbarAPI.items.forEach(function(e){if(e.actionButtonLink){var i=e.toPopupmenuData();i.overflowed=e.overflowed,i.id&&delete i.id,t.refreshMenuItem(e.actionButtonLink,i,n)}}),this.hasNoOverflowedItems=e}}function n(t,n){if(!n.isSubmenuItem){if(!0===n.overflowed)return t.classList.add("is-overflowed"),n.visible&&t.classList.remove("hidden"),void(e=!1);t.classList.remove("is-overflowed"),t.classList.add("hidden")}}},unlinkToolbarItems:function(){function t(e){var n=$($(e).data("original-menu-element"));if(n.removeData("action-button-link"),$(e).removeData("original-menu-element"),n.hasClass("submenu"))for(var i=e.querySelector(".popupmenu").children,a=0;a<i.length;a++)t(i[a])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each(function(e,n){var i=$(n).data("originalButton"),a=$(i).data("toolbarflexitem");if(a.actionButtonLink=null,$(n).removeData("original-button"),"menubutton"===a.type)for(var s=n.querySelector(".popupmenu").children,r=0;r<s.length;r++)t(s[r])})},linkToolbarItems:function(t){function e(t,n){var i=t.elementLink;$(i).data("action-button-link",n),$(n).data("original-menu-element",i);var a=t.submenu;if(a&&a.length)for(var s=n.querySelector(".popupmenu").children,r=0;r<s.length;r++)e(a[r],s[r])}"actionbutton"===this.type&&t&&(Array.isArray(t)||(t=t.menu),this.predefinedItems.each(function(n,i){var a=t[n].itemLink;a.actionButtonLink=i,$(i).data("original-button",a.element);var s=t[n].submenu;if(s&&s.length)for(var r=i.querySelector(".popupmenu").children,o=0;o<r.length;o++)e(s[o],r[o])}))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var t={itemLink:this,disabled:this.disabled,visible:this.visible},e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(t.text=this.element.textContent.trim()),"menubutton"===this.type){var n=this.componentAPI.menu;if(n.length){var i=this.componentAPI.toData({noMenuWrap:!0}),a=this.componentAPI.element[0].id;a&&(t.id="".concat(this.toolbarAPI.uniqueId,"-").concat(a)),t.submenu=function t(e,n){var i=e.querySelectorAll("li:not(.heading)");return n.forEach(function(e,n){if(e.elementLink=i[n],e.submenu){var a=i[n].querySelector(".popupmenu");e.submenu=t(a,e.submenu)}}),n}(n[0],i)}else t.submenu=[]}return t}},toData:function(){var t={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(t.readOnly=this.readOnly),this.actionButtonLink&&(t.actionButtonLink=this.actionButtonLink),this.componentAPI&&(t.componentAPI=this.componentAPI);var e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(t.text=this.element.textContent.trim()),"actionbutton"===this.type&&(t.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(t.submenu=this.componentAPI.toData({noMenuWrap:!0})),t},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered},destroy:function(){var t=$(this.element).data("popupmenu");t&&t.destroy&&t.destroy(),this.teardown()}},$.fn.toolbarflexitem=function(t){return this.each(function(){var e=$.data(this,"toolbarflexitem");if(e)e.updated(t);else{var n=(e=$.data(this,"toolbarflexitem",new Sn(this,t))).destroy;e.destroy=function(){"function"==typeof n&&n.call(this),$.removeData(this,"toolbarflexitem")}}})};var En={allowTabs:!1,attributes:null,beforeMoreMenuOpen:null,moreMenuSettings:{}};function $n(t,e){this.element=t,this.settings=C.mergeSettings(this.element,e,En),this.init()}$n.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var t=this;this.uniqueId=C.uniqueId(this.element),this.sections=C.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.items=this.getElements().map(function(e){var n={};return $(e).hasClass("btn-actions")&&(n=t.settings.moreMenuSettings||n,t.settings.beforeMoreMenuOpen&&(B("settings.moreMenuSettings.beforeOpen","settings.beforeMoreMenuOpen","Flex Toolbar"),n.beforeOpen=t.settings.beforeMoreMenuOpen)),$(e).toolbarflexitem({toolbarAPI:t,componentSettings:n,allowTabs:t.settings.allowTabs,attributes:t.settings.attributes}),$(e).data("toolbarflexitem")}),this.items&&(this.settings.allowTabs||(this.items.forEach(function(e){e.focused&&(void 0===t.focusedItem?t.focusedItem=e:e.focused=!1)}),this.focusedItem||(this.focusedItem=this.items[0]),this.focusedItem&&(this.focusedItem.focused=!0)),this.render(),this.handleEvents())},render:function(){this.element.setAttribute("role","toolbar"),Array.isArray(this.settings.attributes)&&C.addAttributes($(this.element),this,this.settings.attributes),this.items.forEach(function(t){t.render()})},handleEvents:function(){var t=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]}),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),function(e,n){e.stopPropagation(),t.navigate(n,null,!0)})},handleKeydown:function(t){var e=t.target;$(e).data("toolbarflexitem")&&this.handleItemKeydown(t)},handleItemKeydown:function(t){var e=R.isRTL(),n=t.key,i=this.getItemFromElement(t.target);function a(){t.preventDefault()}if("Enter"!==n)if(" "!==n){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(n)>-1){if("searchfield"===i.type&&("ArrowLeft"===n||"Left"===n))return;return this.navigate(e?1:-1,void 0,!0),void a()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(n)>-1){if("searchfield"===i.type&&("ArrowRight"===n||"Right"===n))return;this.navigate(e?-1:1,void 0,!0),a()}}else"hyperlink"===i.type&&this.select(t.target);else this.clickByEnterKey=!0},handleKeyup:function(t){this.clearClickByEnter(t)},handleClick:function(t){var e=t.target;$(e).data("toolbarflexitem")&&this.handleItemClick(t),this.clearClickByEnter()},handleItemClick:function(t){var e=this.getItemFromElement(t.target);this.select(e),this.focusedItem=e},clearClickByEnter:function(t){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||t.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var t=[],e=[];return kn.forEach(function(t){e.push(t.selector)}),e=e.join(", "),C.getArrayFromList(this.element.querySelectorAll(e)).forEach(function(e){var n=!1;kn.forEach(function(i){!n&&$(e).is(i.selector)&&("function"!=typeof i.filter||i.filter(e))&&(n=!0,t.push(e))})}),t},getItemFromElement:function(t){if(t instanceof Sn||t.isToolbarFlexItem)return t;for(var e,n=0;n<this.items.length;n++)this.items[n].element.innerHTML===t.innerHTML&&(e=this.items[n]);if(!e)throw new Error("No Toolbar Item instance available for element ".concat(t,"."));return e},get searchfieldAPI(){for(var t=0;t<this.items.length;t++)if("searchfield"===this.items[t].type)return this.items[t].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focused)return this.items[t]},set focusedItem(t){if(0!==this.items.length){for(var e=0;e<this.items.length;e++)this.items[e].settings.allowTabs?this.items[e].focused=!0:this.items[e].focused=!1;t.focused=!0,this.trueFocusedItem=t}},get hasFocusableItems(){for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focusable)return!0;return!1},get canManageFocus(){var t=document.activeElement;if(this.element.contains(t))return!0;for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type&&this.items[e].componentAPI.isFocused)return!0;return"BODY"===t.tagName},get overflowedItems(){for(var t=[],e=0;e<this.items.length;e++)!0===this.items[e].overflowed&&t.push(this.items[e]);return t},navigate:function(t,e,n){if(!1!==this.hasFocusableItems){var i=0+t;for(null==e&&(e=this.items.indexOf(this.focusedItem));0!==t;)t>0&&(e===this.items.length-1?e=0:e++,--t),t<0&&(0===e?e=this.items.length-1:--e,t++);var a=this.items[e];!1!==a.focusable?(this.focusedItem=a,n&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(i>0?1:-1,e,n)}},select:function(t){var e=this.getItemFromElement(t);switch(e.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;e.selected=!0;break;default:e.selected=!0}},toPopupmenuData:function(){var t={noMenuWrap:!0};return t.menu=this.items.filter(function(t){return"actionbutton"!==t.type&&"searchfield"!==t.type}).map(function(e){return function(e){var n=e.toPopupmenuData();return n&&(n.icon&&(t.hasIcons=!0),n.selectable&&(t.selectable=n.selectable)),n}(e)}),t},toData:function(){var t={};return t.items=this.items.map(function(t){return t.toData()}),t},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,!0!==t?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(t){if(!t)return!1;var e;if(t instanceof HTMLElement||t instanceof $){if(!(e=$(t).data("toolbarflexitem")))return!1;t=e}return!(this.items.indexOf(t)<0)&&t.overflowed},updated:function(t){"object"===a(t)&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.settings.allowTabs||(this.element.removeEventListener("keydown",this.keydownListener),this.element.removeEventListener("keyup",this.keyupListener),this.element.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach(function(t){t.teardown()}),delete this.items,delete this.sections},destroy:function(){this.items.forEach(function(t){t.destroy()}),this.teardown()}},$.fn.toolbarflex=function(t){return this.each(function(){var e=$.data(this,"toolbar-flex");if(e)e.updated(t);else{var n=(e=$.data(this,"toolbar-flex",new $n(this,t))).destroy;e.destroy=function(){"function"==typeof n&&n.call(this),$.removeData(this,"toolbar-flex")}}})};var Dn={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,showNextPrevious:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1,inPage:!1,inPageTitleAsButton:!0};function In(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Dn),this.init()}In.prototype={init:function(){this.setLocale().build().handleEvents().handleResize()},build:function(){var t=this,e=this.settings,n=function(e){return R.translate(e,{locale:t.locale.name,language:t.language})};this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false");var i={text:n("Today"),class:"today"},a=e.inPage?" is-ripple":"";e.inPage=E.toBoolean(e.inPage),e.inPageTitleAsButton=E.toBoolean(e.inPageTitleAsButton),e.inPage&&(this.element.addClass("is-inpage"),e.showToday||(a="",i.text=n("Apply"),i.class="apply is-apply hidden")),i.class+=" hyperlink".concat(a);var s=e.showToday||e.inPage?'<a class="'.concat(i.class,'}" href="#">').concat(i.text,"</a>"):"",r=e.showNextPrevious?"":" no-next-previous",o=e.showNextPrevious?'<button type="button" class="btn-icon prev">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-caret-left"></use>\n        </svg>\n        <span>'.concat(n("PreviousMonth"),'</span>\n      </button>\n      <button type="button" class="btn-icon next">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-right"></use>\n          </svg>\n          <span>').concat(n("NextMonth"),"</span>\n      </button>"):"";if(e.isAlternate||e.inPage){e.isAlternate&&this.element[0].classList.add("is-alternate");var l='\n        <button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n          <span class="month">november</span>\n          <span class="year">2019</span>\n          <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n          <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n        </button>',c=e.isMenuButton?l:'<span class="month">november</span><span class="year">2015</span>',d='\n        <div class="toolbar-section buttonset l-align-'.concat(this.isRTL?"left":"right").concat(r,'">\n          ').concat(s,"\n          ").concat(o,"\n        </div>"),u="";if(e.inPage){var h='\n          <button type="button" class="btn btn-cal-month-year" id="btn-cal-month-year">\n            '.concat($.createIcon("calendar"),'\n            <span class="month">november</span>\n            <span class="year">2019</span>\n          </button>'),p='\n          <button class="btn-icon btn-inpage-cal" type="button" id="btn-inpage-cal">\n            <span class="audible"></span>\n            '.concat($.createIcon("calendar"),"\n          </button>");u=e.inPageTitleAsButton?e.isMenuButton?"".concat(p," ").concat(l):h:"".concat(p,' <span class="month">november</span><span class="year">2015</span>')}this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(e.inPage?u:c,"\n        </div>\n        ").concat(d)}else this.element[0].innerHTML='\n        <div class="toolbar-section'.concat(r,'">\n          ').concat(o,'\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(n("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(n("Today"),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(s,'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(e.showViewChanger?'<label for="'.concat(e.viewChangerValue,'-calendar-view-changer" class="label audible">').concat(n("ChangeView"),'</label>\n            <select id="').concat(e.viewChangerValue,'-calendar-view-changer" name="').concat(e.viewChangerValue,'-calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===e.viewChangerValue?" selected":"",">").concat(n("Month"),'</option>\n              <option value="week"').concat("week"===e.viewChangerValue?" selected":"",">").concat(n("Week"),'</option>\n              <option value="day" ').concat("day"===e.viewChangerValue?" selected":"",">").concat(n("Day"),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:R.calendar(this.locale.name,e.language,e.calendarName).dateFormat.year,locale:e.locale,language:e.language,onOpenCalendar:e.onOpenCalendar,isMonthPicker:e.isMonthPicker,showToday:e.showToday}),e.showViewChanger&&(this.viewChanger=this.element.find("#".concat(e.viewChangerValue,"-calendar-view-changer")).dropdown()),this.todayLink=this.element.find(".hyperlink.today, .hyperlink.is-apply"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(this.isIslamic?[e.year,e.month,1]:new Date(e.year,e.month,1)),C.addAttributes(this.element.find(".next"),this,e.attributes,"".concat(e.viewChangerValue,"-view-btn-next")),C.addAttributes(this.element.find(".prev"),this,e.attributes,"".concat(e.viewChangerValue,"-view-btn-prev")),C.addAttributes(this.element.find(".today"),this,e.attributes,"".concat(e.viewChangerValue,"-view-today")),C.addAttributes(this.element.find("#monthview-datepicker-field + .trigger"),this,e.attributes,"".concat(e.viewChangerValue,"-view-datepicker-trigger"),!0),C.addAttributes(this.element.find("#monthview-datepicker-field"),this,e.attributes,"".concat(e.viewChangerValue,"-view-datepicker"),!0),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="month"]'),this,e.attributes,"month-view-changer-month"),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="week"]'),this,e.attributes,"month-view-changer-week"),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="day"]'),this,e.attributes,"month-view-changer-day"),C.addAttributes($(".monthview-header #month-calendar-view-changer"),this,e.attributes,"month-view-changer"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="month"]'),this,e.attributes,"week-view-changer-month"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="week"]'),this,e.attributes,"week-view-changer-week"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="day"]'),this,e.attributes,"week-view-changer-day"),C.addAttributes($(".week-view-header #week-calendar-view-changer"),this,e.attributes,"week-view-changer"),this},setInternalDate:function(t){R.isIslamic(this.locale.name)?(this.currentYear=t[0],this.currentMonth=t[1],this.currentDay=t[2],this.currentDateIslamic=t):(this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth(),this.currentDay=t.getDate(),this.currentDate=t),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=R.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var e=p.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):R.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(e);var n=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(n),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var i=R.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" "),a=i[0];3===i.length&&this.element.find("span.month").attr("data-month",this.currentMonth).text("".concat(i[1]," ").concat(i[2])),this.element.find("span.year").text("".concat(a," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=R.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var t=this;return this.settings.language?(R.getLocale(this.settings.language),this.language=this.settings.language):this.language=R.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=R.currentLocale,this.setCurrentCalendar()):R.getLocale(this.settings.locale).done(function(e){t.locale=R.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar()}),this},setViewChangerValue:function(t){this.settings.viewChangerValue=t,this.viewChanger.val(t).trigger("updated")},handleEvents:function(){var t=this,e=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",function(){var t=$(this).data("datepicker");e.setInternalDate(t.isIslamic?t.currentDateIslamic:t.currentDate),e.element.trigger("change-date",{selectedDate:t.currentDate,isToday:!1})}),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",function(e){var n={selectedDate:t.currentDate,isToday:!0};!e.target.classList.contains("today")&&e.target.classList.contains("apply")&&(n.isToday=!1,n.isApply=!0),t.element.trigger("change-date",n),e.preventDefault()}),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){t.element.trigger("change-prev",{selectedDate:t.currentDate,isToday:!1})}),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){t.element.trigger("change-next",{selectedDate:t.currentDate,isToday:!1})}),this.settings.onChangeView&&this.viewChanger&&this.viewChanger.off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",function(e){t.settings.onChangeView({viewName:e.currentTarget.value,elem:e.currentTarget,api:t})}),this},handleResize:function(){var t=this,e=function(){if(t.viewChanger&&(p.isBelow("phablet")?(t.viewChanger.next().addClass("dropdown-wrapper-small"),t.viewChanger.next().find(".dropdown").css({width:"".concat(p.isBelow("phone")?"60":"90","px")}),$(".today").css(p.isBelow("slim")?{display:"none"}:{})):(t.viewChanger.next().removeClass("dropdown-wrapper-small"),t.viewChanger.next().find(".dropdown").removeAttr("style"),$(".today").removeAttr("style"))),t.monthPicker){var e=p.isBelow("slim")&&t.currentCalendar.months?"".concat(t.currentCalendar.months.abbreviated[t.currentMonth]," ").concat(t.currentYear):R.formatDate(new Date(t.currentYear,t.currentMonth,t.currentDay),{date:"year",locale:t.locale.name,language:t.settings.language});t.monthPicker.text(e)}};return e(),$(window).on("resize",function(){e()}),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Dn)),this.teardown().init()},teardown:function(){return this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"calendartoolbar")}};var Mn={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,inPage:!1,inPageTitleAsButton:!0,inPageToggleable:!0,inPageExpanded:!0,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],hideDays:!1,showMonthYearPicker:!0,yearsAhead:5,yearsBack:4,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},displayRange:{start:"",end:""},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,showNextPrevious:!0,onChangeView:null,isMonthPicker:!1};function Ln(t,e){this.settings=C.mergeSettings(t,e,Mn),this.element=$(t),this.init()}Ln.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=R.getLocale(this.settings.language),n=R.getLocale(this.settings.locale);$.when(n,e).done(function(e,n){t.locale=R.cultures[e]||R.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.settings.displayRange.start&&t.settings.displayRange.end?t.buildRange():t.build()})},build:function(){var t=this;if("false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.settings.inPage=E.toBoolean(this.settings.inPage),this.settings.inPage){var e="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(e),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(R.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(R.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(R.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var n="";this.settings.inPage&&this.settings.inPageToggleable&&(n=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var i=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?n:this.table;return this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(R.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,i),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new In(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton}),this.handleEvents(),C.addAttributes(this.element,this,this.settings.attributes),this},buildRange:function(){var t=this,e=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end),i=new Date(n.getTime()+864e5),a=cn.firstDayOfWeek(e),s=Math.ceil((i-a)/6048e5);if(this.settings.showMonthYearPicker=!1,this.settings.inPage=E.toBoolean(this.settings.inPage),this.settings.inPage){var r="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(r),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.table=$('<table class="monthview-table" aria-label="'.concat(R.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.day="\n    <tr>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n    </tr>\n    ",this.days=$(""+"<tbody>\n       ".concat(Array(s).fill(this.day).join(""),"\n      </tbody>")).appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var o="";this.settings.inPage&&this.settings.inPageToggleable&&(o=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var l=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?o:this.table;return this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),this.header.addClass("hidden"),this.showRange(this.settings.displayRange.start,this.settings.displayRange.end),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,l),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new In(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton}),this.handleEvents(),C.addAttributes(this.element,this,this.settings.attributes),this},setCurrentCalendar:function(){this.currentCalendar=R.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},setMonthYearFromPane:function(){var t=parseInt(this.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),e=parseInt(this.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);isNaN(e)||isNaN(t)||this.showMonth(e,t),this.monthYearPane.data("expandablearea").close()},showMonth:function(t,e){var n,i=this,a=this,s=this.settings,r=new Date;if(r.setHours(0),r.setMinutes(0),r.setSeconds(0),n=this.isIslamic?s.activeDate||R.gregorianToUmalqura(r):s.activeDate&&s.activeDate.getDate()?s.activeDate:r,this.setCurrentCalendar(),this.isIslamic)if(s.activeDateIslamic)n=s.activeDateIslamic;else{var o=new Date(e,t,this.currentDay||this.settings.day),l=R.gregorianToUmalqura(o);this.todayDateIslamic=R.gregorianToUmalqura(r),s.activeDateIslamic=[],s.activeDateIslamic[0]=l[0],s.activeDateIslamic[1]=l[1],s.activeDateIslamic[2]=l[2],e=l[0],t=l[1],n=l,this.currentDay=l[2]}e.toString().length<4&&(e=(new Date).getFullYear()),12===t&&(e++,t=0,this.currentMonth=t,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),t<0&&(e--,t=11,this.currentMonth=t,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=R.calendar(this.locale.name,this.language,this.settings.calendarName));var c=this.currentCalendar.days.narrow;c=c||this.currentCalendar.days.abbreviated,s.isPopup||s.inPage||(c=this.currentCalendar.days.abbreviated);var d=this.currentCalendar.months.wide[t];this.currentMonth=t,this.currentYear=e;var h=this.currentCalendar.firstDayofWeek||0;if(s.firstDayOfWeek&&(h=s.firstDayOfWeek),this.dayNames.find("th").each(function(t){$(this).text(c[(t+h)%7])}),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",t).text("".concat(u.stripTags(d)," ")),this.header.find(".year").text(" ".concat(e)),this.yearFirst&&!this.isIslamic&&!this.isRTL){n.setFullYear(e);var p=R.formatDate(n,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(p," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===s.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(this.isIslamic?[e,t,1]:new Date(e,t,1)),this.appendMonthYearPicker(t,e);var f,g,m,v=(this.firstDayOfMonth(e,t)-h+7)%7,b=this.daysInMonth(e,t+(this.isIslamic?1:0)),y=this.daysInMonth(e,t+(this.isIslamic?0:1)),w=1,x=1,C=!1,k=function(t,e){C=e,t.addClass("is-selected".concat(s.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each(function(i){var r=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),o=s.inPage?" is-ripple":"";if(r.removeAttr("aria-selected"),r.removeAttr("tabindex"),i<v&&(m=b-v+1+i,g=0===t?11:t-1,f=0===t?e-1:e,a.setDisabled(r,f,g,m),a.setLegendColor(r,f,g,m),a.dayMap.push({key:E.padDate(f,g,m),elem:r}),r.addClass("alternate prev-month").html('<span class="day-container'.concat(o,'"><span aria-hidden="true" class="day-text">').concat(u.stripTags(m),"</span></span>")),r.attr("data-key",E.padDate(f,g,m))),i>=v&&x<=y){if(a.dayMap.push({key:E.padDate(e,t,x),elem:r}),r.html('<span class="day-container'.concat(o,'"><span aria-hidden="true" class="day-text">').concat(u.stripTags(x),"</span></span>")),r.attr("data-key",E.padDate(e,t,x)),a.isIslamic)x===n[2]&&k(r,!0);else{var l=n.getHours(),c=n.getMinutes(),d=a.isSeconds?n.getSeconds():0,h=function(t){return t?t.setHours(l,c,d,0):0};h(new Date(e,t,x))===h(a.currentDate||n)&&k(r,!0)}x===a.todayDay&&a.currentMonth===a.todayMonth&&a.currentYear===a.todayYear&&r.addClass("is-today"),r.attr("aria-label",R.formatDate(new Date(a.currentYear,a.currentMonth,x),{date:"full",locale:a.locale.name}));var p=E.padDate(a.currentYear,a.currentMonth,x);return r.attr("data-key",p),a.setDisabled(r,e,t,x),a.setLegendColor(r,e,t,x),r.attr("role","link"),void x++}x>=y+1&&(m=w,g=11===t?0:t+1,f=11===t?e+1:e,a.dayMap.push({key:E.padDate(f,g,m),elem:r}),a.setDisabled(r,f,g,m),a.setLegendColor(r,f,g,m),r.addClass("alternate next-month").html('<span class="day-container'.concat(o,'"><span aria-hidden="true" class="day-text">').concat(w,"</span></span>")),r.attr("data-key",E.padDate(f,g,m)),w++)}),!C&&!s.range.useRange){var T=a.dayMap.filter(function(n){return n.key===E.padDate(e,t,i.settings.day)});T.length&&k(T[0].elem,!1)}var A=this.days.find("tr").eq(5);7===A.find("td.alternate").length?A.hide():A.show(),this.currentDate||(this.isIslamic?(this.currentDateIslamic=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=R.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),s.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:e,month:t,elem:this.element,api:this})},showRange:function(t,e){var n,i=this,a=new Date,s=new Date(t),r=new Date(e),o=parseInt(s.getMonth(),10),l=parseInt(s.getFullYear(),10),c=cn.monthDiff(s,r),d=this.settings;if(d.disable.minDate||d.disable.MaxDate||(d.disable.minDate=cn.subtract(s,1,"days").toISOString(),d.disable.maxDate=cn.add(r,1,"days").toISOString()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),n=this.isIslamic?d.activeDate||R.gregorianToUmalqura(a):d.activeDate&&d.activeDate.getDate()?d.activeDate:a,this.setCurrentCalendar(),this.isIslamic)if(d.activeDateIslamic)n=d.activeDateIslamic;else{var h=new Date(l,o,this.currentDay||this.settings.day),p=R.gregorianToUmalqura(h);this.todayDateIslamic=R.gregorianToUmalqura(a),d.activeDateIslamic=[],d.activeDateIslamic[0]=p[0],d.activeDateIslamic[1]=p[1],d.activeDateIslamic[2]=p[2],l=p[0],o=p[1],n=p,this.currentDay=p[2]}l.toString().length<4&&(l=(new Date).getFullYear()),this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=R.calendar(this.locale.name,this.language,this.settings.calendarName));var f=this.currentCalendar.days.narrow;f=f||this.currentCalendar.days.abbreviated;var g=this.currentCalendar.firstDayofWeek||0;d.firstDayOfWeek&&(g=d.firstDayOfWeek),this.dayNames.find("th").each(function(t){$(this).text(f[(t+g)%7])});for(var m=cn.firstDayOfWeek(s).getDate(),v=!1,b=o,y=l,w=o,x=l,C=new Map,k=0;k<=c;k++)(w=o+k)>11&&(x+=1,w=0),C.set(w,this.daysInMonth(x,w+(this.isIslamic?0:1)));var T=function(t,e){v=e,t.addClass("is-selected".concat(d.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")},A=C.get(b),S=new Set(C.keys());if(this.dayMap=[],this.days.find("td").each(function(){var t=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),e=d.inPage?" is-ripple":"";if(t.removeAttr("aria-selected"),t.removeAttr("tabindex"),i.isIslamic)m===n[2]&&T(t,!0);else{var a=n.getHours(),s=n.getMinutes(),r=i.isSeconds?n.getSeconds():0,c=function(t){return t?t.setHours(a,s,r,0):0};c(new Date(l,o,m))===c(i.currentDate||n)&&T(t,!0)}if(m>A&&(++b>11&&(b=0,y++),A=C.get(b),m=1),m===i.todayDay&&b===i.todayMonth&&y===i.todayYear&&t.addClass("is-today"),i.dayMap.push({key:E.padDate(y,b,m),elem:t}),t.html('<span class="day-container'.concat(e,'"><span aria-hidden="true" class="day-text">').concat(u.stripTags(m),"</span></span>")),t.attr("data-key",E.padDate(y,b,m)),i.isIslamic)m===n[2]&&T(t,!0);else{var h=n.getHours(),p=n.getMinutes(),f=i.isSeconds?n.getSeconds():0,g=function(t){return t?t.setHours(h,p,f,0):0};g(new Date(x,w,m))===g(i.currentDate||n)&&T(t,!0)}m===i.todayDay&&b===i.todayMonth&&y===i.todayYear&&t.addClass("is-today"),t.attr("aria-label",R.formatDate(new Date(y,b,m),{date:"full",locale:i.locale.name}));var v=E.padDate(y,b,m);t.attr("data-key",v),i.setDisabled(t,y,b,m),i.setLegendColor(t,y,b,m),i.setMonthLabel(t,y,b,m,S),t.attr("role","link"),m++}),!v){var D=i.dayMap.filter(function(t){return t.key===E.padDate(a.getFullYear(),a.getMonth(),a.getDate())});D.length&&T(D[0].elem,!1)}this.element.trigger("rangerendered",{year:l,month:o,elem:this.element,api:this})},getTime:function(t,e){if(this.isIslamic)return t[0]+"0".concat(t[1]).slice(-2)+"0".concat(t[2]).slice(-2);if(e){var n=new Date(t);return n.setHours(0,0,0),n.getTime()}return t.getTime()},setRangeSelection:function(){if(this.settings.range.useRange){var t={};t.date=new Date(this.currentYear,this.currentMonth,1),t.date.setDate(t.date.getDate()-(this.days.find(".prev-month:visible").length+1));var e=E.padDate(t.date.year||t.date[0],t.date.month||t.date[1],t.date.day||t.date[2]);t.cell=this.days.find('[data-key="'.concat(e,'"]')),this.setRangeOnCell(!this.settings.range.second&&t.cell)}},appendMonthYearPicker:function(t,e){var n=this;if(this.settings.showMonthYearPicker){var i='<ul class="picklist is-month">',a=this.settings.inPage?' class="is-ripple"':"",s=this.currentCalendar.months.wide;if(this.settings.inPage){i+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(R.translate("PreviousMonth"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var r=t<6?0:6,o=0;o<6;o++){var l=o+r,c=s[l];i+='<li class="picklist-item'.concat(l===t?" is-selected ":"",'"><a href="#" tabindex="').concat(l===t?"0":"-1",'" data-month="').concat(l,'"').concat(a,">").concat(c,"</a></li>")}i+='<li class="picklist-item down"><a tabindex="0"'.concat(a,'><span class="audible">').concat(R.translate("NextMonth"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>')}else s.map(function(e,n){i+='<li class="picklist-item'.concat(n===t?" is-selected ":"",'"><a href="#" tabindex="').concat(n===t?"0":"-1",'" data-month="').concat(n,'"').concat(a,">").concat(e,"</a></li>")});i+="</ul>",this.monthYearPane.find(".picklist-section.is-month").empty().append(i);var d=[],u='<ul class="picklist is-year">';u+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(R.translate("PreviousYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var h=this.settings.yearsBack;h>=1;h--)d.push(parseInt(e,10)-h);d.push(e);for(var p=1;p<=this.settings.yearsAhead;p++)d.push(parseInt(e,10)+p);d.map(function(t){u+='<li class="picklist-item'.concat(e===t?" is-selected ":"",'"><a href="#" tabindex="').concat(e===t?"0":"-1",'" data-year="').concat(t,'"').concat(a,">").concat(t,"</a></li>")}),u+='<li class="picklist-item down"><a tabindex="0"'.concat(a,'><span class="audible">').concat(R.translate("NextYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>'),u+="</ul>",this.monthYearPane.find(".picklist-section.is-year").empty().append(u),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst"),C.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-year-up"),C.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-year-down"),this.settings.inPage&&(C.addAttributes(this.monthYearPane.find(".btn-inpage-cal"),this,this.settings.attributes,"btn-inpage-cal"),C.addAttributes(this.monthYearPane.find(".btn-cal-month-year"),this,this.settings.attributes,"btn-cal-month-year"),C.addAttributes(this.monthYearPane.find(".btn-monthyear-pane"),this,this.settings.attributes,"btn-monthyear"),C.addAttributes(this.monthYearPane.find(".apply"),this,this.settings.attributes,"btn-apply"),C.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-month-up"),C.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-month-down")),this.monthYearPane.find(".is-year .picklist-item").not(".up, .down").each(function(){var t=$(this).find("a");C.addAttributes(t,n,n.settings.attributes,"btn-picklist-".concat(t.text().toLowerCase()))}),this.monthYearPane.find(".is-month .picklist-item").not(".up, .down").each(function(t){C.addAttributes($(this).find("a"),n,n.settings.attributes,"btn-picklist-".concat(t))})}},firstDayOfMonth:function(t,e){if(this.isIslamic){var n=R.umalquraToGregorian(t,e,1);return null===n?1:n.getDay()}return new Date(t,e,1).getDay()},daysInMonth:function(t,e){if(this.isIslamic){for(var n=this.conversions.yearInfo[this.islamicYearIndex(t)][0],i=0;i<=e;i++){if(i===e)return 29+(1&n);n>>=1}return 0}return new Date(t,e,0).getDate()},islamicYearIndex:function(t){var e=t-1318;return e<0||e>=this.conversions.yearInfo.length?0:e},setDisabled:function(t,e,n,i){var a=this.settings;function s(){t.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(t.removeClass("is-disabled").removeAttr("aria-disabled"),"function"==typeof a.disable.callback)$.when(this.isDateDisabled(e,n,i)).then(function(t){t&&s()});else{var r=this.isDateDisabled(e,n,i);(r&&!a.disable.isEnable||!r&&a.disable.isEnable)&&s()}},setMonthLabel:function(t,e,n,i,a){var s=this.settings.inPage?' class="is-ripple"':"";if(!this.isDateDisabled(e,n,i)&&a.has(n)){var r=t.text();a.delete(n),t.html('<span class="day-container'.concat(s,'"><span aria-hidden="true" class="day-text month-label">').concat(this.currentCalendar.months.wide[n]," ").concat(r,"</span></span>"))}},isDateDisabled:function(t,e,n){var i=this.settings;if("function"==typeof i.disable.callback){var s=$.Deferred();return $.when(i.disable.callback(t,e,n)).then(function(t){s.resolve(t)}),s.promise()}var r=new Date(i.disable.minDate).setHours(0,0,0,0),o=new Date(i.disable.maxDate).setHours(0,0,0,0),l=this.isIslamic?R.umalquraToGregorian(t,e,n):new Date(t,e,n);if(!l)return!1;if(-1!==i.disable.dayOfWeek.indexOf(l.getDay()))return!0;var c=l.getFullYear();if((l=l.setHours(0,0,0,0))<=r||l>=o)return!0;/string|number/.test(a(i.disable.years))&&(i.disable.years=[i.disable.years]);for(var d=0,u=i.disable.years.length;d<u;d++)if(c===Number(i.disable.years[d]))return!0;i.disable.dates.length&&"string"==typeof i.disable.dates&&(i.disable.dates=[i.disable.dates]);for(var h=0,p=i.disable.dates.length;h<p;h++)if(l===new Date(i.disable.dates[h]).setHours(0,0,0,0))return!0;return!1},getDateRange:function(t,e,n){var i=[],a=this.isIslamic?c(t):new Date(t);for(n=void 0!==n?n:this.settings.range.includeDisabled;this.getTime(e)>=this.getTime(a);)(n||!n&&!this.isDateDisabled(this.isIslamic?a[0]:a.getFullYear(),this.isIslamic?a[1]:a.getMonth(),this.isIslamic?a[2]:a.getDate()))&&(this.isIslamic?i.push(a):i.push(new Date(a))),this.isIslamic?a[2]+=1:a.setDate(a.getDate()+1);return i},setLegendColor:function(t,e,n,i){if(this.settings.showLegend&&t[0]){var a=this,s=this.settings.inPage?t.find(".day-text"):t;if(s[0]){var r=this.getLegendColor(e,n,i);if(s[0].style.backgroundColor="",s.off("mouseenter.legend mouseleave.legend"),r){var o;if(-1===r.indexOf("#")){var l=r.replace(/[0-9]/g,""),c=10*r.substr(r.length-2,2);r=st.themeColors().palette[l][c].value}var d=I.hexToRgba(r,.3),u=I.hexToRgba(r,.7),h=null===(o=this.table[0])||void 0===o||null==o?void 0:o.querySelector("thead th");t.addClass("is-colored"),s[0].setAttribute("data-hex",r),a.settings.inPage?s[0].style.setProperty("--legendcolor",d):s[0].style.backgroundColor=d,s.on("mouseenter.legend",function(){var t=$(this),e=t.find("span")[0],n=t.find(".day-text")[0],i=window.getComputedStyle(h).getPropertyValue("color");this.style.backgroundColor=u,a.settings.inPage&&(this.style.color=i),e&&(e.style.backgroundColor="transparent"),n&&(n.style.backgroundColor="transparent")}).on("mouseleave.legend",function(){var t=$(this),e=t.find("span")[0],n=t.find(".day-text")[0];a.settings.inPage?(this.style.color="",this.style.backgroundColor=""):this.style.backgroundColor=d,e&&(e.style.backgroundColor=""),n&&(n.style.backgroundColor="")})}}}},getLegendColor:function(t,e,n){var i=this.settings;if(i.showLegend){for(var a=new Date(t,e,n),s=a.setHours(0,0,0,0),r=0;r<i.legend.length;r++){var o=i.legend[r];if(o.dayOfWeek&&-1!==o.dayOfWeek.indexOf(a.getDay()))return o.color;if(o.dates)for(var l=0;l<o.dates.length;l++)if(s===new Date(o.dates[l]).setHours(0,0,0,0))return o.color}return""}},handleEvents:function(){var t=this,e=this,n=this.settings;if(this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),function(){t.updated()}),this.header.off("click.monthview").on("click.monthview",".btn-icon.prev, .btn-icon.next",function(){var t=$(this).is(".next"),i={},a={month:e.currentMonth,year:e.currentYear};n.range.useRange?(t?i.date=new Date(a.year,a.month+1,e.element.find(".next-month:visible").length+1):(i.date=new Date(a.year,a.month,1),i.date.setDate(i.date.getDate()-(e.days.find(".prev-month:visible").length+1))),a.month+=t?1:-1):(e.currentMonth+=t?1:-1,e.currentDate.setMonth(e.currentMonth),e.currentYear=parseInt(e.element[0].querySelector("span.year").innerText,10),e.currentDate.setFullYear(e.currentYear),a.month=e.currentMonth,a.year=e.currentYear),e.showMonth(a.month,a.year),n.range.useRange&&(i.formatedDate=R.formatDate(i.date,{date:"full",locale:e.locale.name}),i.cell=e.days.find('[aria-label="'.concat(i.formatedDate,'"]')),e.setRangeOnCell(!n.range.second&&i.cell))}),n.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",function(){n.range.extra&&e.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",function(){n.range.extra&&e.setRangeOnCell($(this).is(".next")?n.range.extra.maxCell:n.range.extra.minCell)}),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",function(){e.setRangeOnCell(this)})),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",function(e,n){n.isToday&&t.settings.isPopup||(n.isApply?t.setMonthYearFromPane():n.isToday?t.setToday():t.selectDay(n.selectedDate,!1,!0))}),n.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",function(e){var n=e.currentTarget.getAttribute("data-key");t.lastClickedKey=n,e.currentTarget.classList.contains("is-disabled")||t.selectDay(n,!1,!0)}),n.inPage){var i=this.element.find(".monthview-inpage-calendar");i.expandablearea({animationSpeed:150,trigger:this.element.find(n.showMonthYearPicker?"#btn-inpage-cal":"#btn-cal-month-year")});var a=i.data("expandablearea");if(n.showMonthYearPicker){var s=this.element.find(".monthview-monthyear-pane");s.expandablearea({animationSpeed:150,trigger:this.element.find("#btn-monthyear-pane")}).on("beforeexpand",function(){var t=a&&!a.isExpanded();s.css("position",t?"static":"")})}this.element.off("click.monthview-ripple").on("click.monthview-ripple",".is-ripple",function(t){e.setRipple(this,t)})}return this.handleMonthYearPane().handleKeys(),this},setRipple:function(t,e){var n;if(t&&null!==(n=t.classList)&&void 0!==n&&(null==n?void 0:n.contains("is-ripple"))){var i=e.touches?e.touches[0]:e,a=t.getBoundingClientRect(),s=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),r=i.clientX?i.clientX-a.left:t.offsetWidth/2,o=i.clientY?i.clientY-a.top:t.offsetHeight/2,l=t.style.cssText,c=t.getAttribute("data-hex"),d=I.getContrastColor(c),u={ripple:I.getLuminousColorShade(c,"white"===d?"0.3":"-0.3"),elem:I.hexToRgba(c,.7)},h=null!==c?"--ripple-background: ".concat(u.ripple,"; background-color: ").concat(u.elem,"; "):"";t.style.cssText="".concat(h,"--s: 0; --o: 1"),t.offsetTop,t.style.cssText="".concat(h,"--t: 1; --o: 0; --d: ").concat(s,"; --x:").concat(r,"; --y:").concat(o,";"),$(t).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(e){var n;"transform"===(e.propertyName||(null===(n=e.originalEvent)||void 0===n||null==n?void 0:n.propertyName))&&(t.style.cssText=l)})}},handleMonthYearPane:function(){var t=this,e=this.settings,n=e.inPage?' class="is-ripple"':"",i=function(i){var a=t.monthYearPane[0].querySelector(".picklist.is-month"),s=t.currentCalendar.months.wide,r=a.children,o=r.length-2,l=r["up"===i?1:o].querySelector("a").getAttribute("data-month");h.remove(r["up"===i?o:1]);var c=$(a);c.find(".picklist-item").not(".up, .down").remove();for(var d=l>=6?0:6,u=0;u<6;u++){var p=u+d,f=s[p],g=$('<a href="#" tabindex="-1" data-month="'.concat(p,'"').concat(n,">").concat(f,"</a>")),m=$('<li class="picklist-item"></li>');m.append(g),c.find(".picklist-item.down").before(m),C.addAttributes(g,t,e.attributes,"btn-picklist-".concat(p))}e.inPage||c.find(".picklist-item").eq(5).addClass("is-selected").attr("tabindex","0")},a=function(i){var a=t.monthYearPane[0].querySelector(".picklist.is-year"),s=a.children,r=s.length-2,o=s["up"===i?1:r].querySelector("a").getAttribute("data-year");h.remove(s["up"===i?r:1]);var l=$(a);if(l.find(".picklist-item").not(".up, .down").remove(),"up"===i)for(var c=r;c>0;c--){var d=parseInt(o,10)-c,u=$('<a href="#" tabindex="-1" data-year="'.concat(d,'"').concat(n,">").concat(d,"</a>")),p=$('<li class="picklist-item"></li>');p.append(u),l.find(".picklist-item.down").before(p),C.addAttributes(u,t,e.attributes,"btn-picklist-".concat(d))}if("down"===i)for(var f=1;f<r+1;f++){var g=parseInt(o,10)+f,m=$('<a href="#" tabindex="-1" data-year="'.concat(g,'"').concat(n,">").concat(g,"</a>")),v=$('<li class="picklist-item"></li>');v.append(m),l.find(".picklist-item.down").before(v),C.addAttributes(m,t,e.attributes,"btn-picklist-".concat(g))}e.inPage||l.find(".picklist-item").eq(5).addClass("is-selected").attr("tabindex","0")},s=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",function(t){return e.inPage&&"li"===t.target.tagName.toLowerCase()||(s=setInterval(function(){return t.currentTarget.classList.contains("up")&&a("up"),t.currentTarget.classList.contains("down")&&a("down"),t.stopImmediatePropagation(),t.stopPropagation(),!1},200)),!0}).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",function(){return clearInterval(s),!0});var r=function(n,i){var a,s=function(n){var i=t.monthYearPane[0].querySelector(".is-".concat(n," .is-selected a"));return!i&&e.inPage?t.monthYearPane[0].querySelector(".is-".concat(n," .picklist-item:last-child a")):i};a=e.inPage?{month:parseInt(s("month").getAttribute("data-month"),10),year:parseInt(s("year").getAttribute("data-year"),10)}:"is-month"===i?{month:parseInt(n.getAttribute("data-month"),10),year:parseInt(s("year").getAttribute("data-year"),10)}:{month:parseInt(s("month").getAttribute("data-month"),10),year:parseInt(n.getAttribute("data-year"),10)},e.range.useRange||(t.currentMonth=a.month,t.currentDate.setMonth(t.currentMonth),t.currentYear=a.year,t.currentDate.setFullYear(t.currentYear),a.month=t.currentMonth,a.year=t.currentYear),function(e,n){var i=t.monthYearPane[0].querySelector(".picklist.".concat(n," .is-selected"));h.removeClass(i,"is-selected"),i&&i.querySelector("a").setAttribute("tabindex","-1"),h.addClass(e.parentNode,"is-selected"),e.setAttribute("tabindex","0")}(n,i),t.element.hasClass("".concat(i,"only"))&&t.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",function(t){e.inPage&&"li"===t.target.tagName.toLowerCase()||(t.currentTarget.classList.contains("up")?i("up"):t.currentTarget.classList.contains("down")?i("down"):(r(t.target,"is-month"),t.preventDefault()))}),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",function(t){t.preventDefault()}),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",function(t){e.inPage&&"li"===t.target.tagName.toLowerCase()||(t.currentTarget.classList.contains("up")?a("up"):t.currentTarget.classList.contains("down")?a("down"):(r(t.target,"is-year"),t.preventDefault()))}),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",function(t){t.preventDefault()}),this.monthYearPane.on("expand.monthviewpane",function(){if(!e.hideDays){if(t.element.find(".btn-icon, td.is-selected").attr("disabled","true"),t.element.find("td.is-selected").removeAttr("tabindex"),e.inPage){t.element.find(".btn-icon.prev, .btn-icon.next").hide();var n=t.element.find(".hyperlink.today, .hyperlink.apply");n.hasClass("is-apply")?n.removeClass("hidden"):n.removeClass("today is-ripple").addClass("apply").text(R.translate("Apply",{locale:t.locale.name,language:t.language}))}else t.monthYearPane.find(".content").css("height",t.header.parent().height()-t.header.height()-55),t.element.find(".hyperlink.today").hide();t.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),t.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(R.translate("Cancel",{locale:t.locale.name,language:t.language}))}setTimeout(function(){t.monthYearPane.find(".is-month .is-selected a").focus(),t.monthYearPane.parent().hasClass("is-yearonly")&&t.monthYearPane.find(".is-year .is-selected a").focus()})}).on("collapse.monthviewpane",function(){if(!e.hideDays){if(e.inPage){t.element.find(".btn-icon.prev, .btn-icon.next").show();var n=t.element.find(".hyperlink.apply");n.hasClass("is-apply")?n.addClass("hidden"):n.removeClass("apply").addClass("today").text(R.translate("Today",{locale:t.locale.name,language:t.language}))}else t.element.find(".hyperlink.today").show();t.element.find(".btn-icon").removeAttr("disabled"),t.element.find("td.is-selected").attr("tabindex","0"),t.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),t.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(R.translate("Clear",{locale:t.locale.name,language:t.language}))}}).on("aftercollapse.monthviewpane",function(){t.element.find(".hyperlink.today").addClass("is-ripple")});var o=function(t,e){var n,i=t.currentTarget,a=t.currentTarget.parentNode,s="prev"===e?a.previousSibling:a.nextSibling;s||(s=a.parentNode.children["prev"===e?a.parentNode.children.length-1:0]);var r=s.querySelector("a");i.setAttribute("tabindex","-1"),null===(n=a.parentNode.querySelector(".is-selected"))||void 0===n||null==n||n.classList.remove("is-selected"),h.addClass(s,"is-selected"),r.setAttribute("tabindex","0"),r.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",function(e){var n=e.currentTarget.parentNode.classList.contains("up"),s=e.currentTarget.parentNode.classList.contains("down"),l=e.currentTarget.parentNode.parentNode.classList.contains("is-year"),c=e.currentTarget.parentNode.parentNode.classList.contains("is-month"),d=!1;"ArrowUp"===e.key&&(l||c)?(o(e,"prev"),d=!0):"ArrowDown"===e.key&&(l||c)?(o(e,"next"),d=!0):"Enter"===e.key&&(n||s?(l?a(n?"up":"down"):c&&i(n?"up":"down"),d=!0):(l||c)&&(r(e.target,l?"is-year":"is-month"),d=!0)),d&&(e.preventDefault(),t.setRipple(e.currentTarget,e))}),this},selectDay:function(t,e,n){this.isIslamic&&"string"!=typeof t&&(this.currentDateIslamic=R.gregorianToUmalqura(t),t=E.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||"string"==typeof t||(t=E.padDate(t.getFullYear(),t.getMonth(),t.getDate()));var i=this.dayMap.filter(function(e){return e.key===t}),a=parseInt(t.substr(0,4),10),s=parseInt(t.substr(4,2),10)-1,r=parseInt(t.substr(6,2),10);if(this.isIslamic?(this.currentDateIslamic=t,this.currentDate=R.umalquraToGregorian(a,s,r)):this.currentDate=new Date(a,s,r),this.currentYear=a,this.currentMonth=s,this.currentDay=r,(0===i.length||i[0].elem.hasClass("alternate"))&&(this.showMonth(s,a),i=this.dayMap.filter(function(e){return e.key===t})),0!==!i.length){var o=i[0].elem[0],l={node:o,key:t,day:r,month:s,year:a,close:e};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(o).addClass("is-selected").attr("tabindex","0").focus(),(n="full"===this.settings.headerStyle||n)&&this.settings.onSelected&&this.settings.onSelected(o,l),n&&this.element.trigger("selected",l)}},setToday:function(){this.selectDay(new Date,!1,!0)},handleKeys:function(){var t=this,e=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",function(n){var i=n.keyCode||n.charCode||0,a=$(n.target),s=t.days.find("td:visible"),r=s.length,o=null,l=null,c=!1,d=new Date(e.disable.minDate),u=new Date(e.disable.maxDate),h=function(){t.datepickerApi&&e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&t.datepickerApi.resetRange({isData:!0})};if(t.settings.onKeyDown&&!1===t.settings.onKeyDown({e:n,key:i,cell:a,node:t.element}))return n.stopPropagation(),n.preventDefault(),!1;if(40===i){if(c=!0,!t.validateDisplayRange(cn.add(t.currentDate,7,"days")))return!1;e.range.useRange?(o=s.index(n.target)+7,l=s.eq(o),o<r&&(h(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<u.getMonth()||u.getDate()-1>=t.currentDate.getDate()+7)&&t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1))}if(38===i){if(c=!0,!t.validateDisplayRange(cn.subtract(t.currentDate,7,"days")))return!1;e.range.useRange?(o=s.index(n.target)-7,l=s.eq(o),o>-1&&(h(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1<=t.currentDate.getDate()-7)&&t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1))}if(37===i||189===i&&!n.shiftKey){if(c=!0,!t.validateDisplayRange(cn.subtract(t.currentDate,1,"days")))return!1;e.range.useRange?(o=s.index(n.target)-1,l=s.eq(o),o>-1&&(h(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1))}if(39===i||187===i&&n.shiftKey){if(c=!0,!t.validateDisplayRange(cn.add(t.currentDate,1,"days")))return!1;e.range.useRange?(o=s.index(n.target)+1,l=s.eq(o),o<r&&(h(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<u.getMonth()||u.getDate()-1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1))}if(33!==i||n.altKey||(c=!0,h(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1))),34!==i||n.altKey||(c=!0,h(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==u.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1))),33===i&&n.ctrlKey&&(c=!0,h(),t.currentDate.setFullYear(t.currentDate.getFullYear()-1),t.selectDay(t.currentDate,!1,!1)),34===i&&n.ctrlKey&&(c=!0,h(),t.currentDate.setFullYear(t.currentDate.getFullYear()+1),t.selectDay(t.currentDate,!1,!1)),36===i){c=!0;var p,f=t.currentDate;h(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()?p=new Date(f.getFullYear(),f.getMonth(),1):(p=new Date(d.getFullYear(),d.getMonth(),d.getDate())).setDate(p.getDate()+1):p=new Date(f.getFullYear(),f.getMonth(),1),t.currentDate=p,t.isIslamic&&(t.currentDateIslamic=R.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(35===i){c=!0;var g,m=t.currentDate;h(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==u.getMonth()?g=new Date(m.getFullYear(),m.getMonth()+1,0):(g=new Date(u.getFullYear(),u.getMonth(),u.getDate())).setDate(g.getDate()-1):g=new Date(m.getFullYear(),m.getMonth()+1,0),t.currentDate=g,t.isIslamic&&(t.currentDateIslamic=R.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(84===i){if(e.range.useRange&&t.datepickerApi){h();var v=!(e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date));t.datepickerApi.setToday(v),!v&&t.datepickerApi&&"function"==typeof t.datepickerApi.closeCalendar&&t.datepickerApi.closeCalendar()}else t.setToday();c=!0}if(32===i||13===i){var b;if(c=!0,e.range.useRange)return(!e.range.first||e.range.first&&!e.range.first.date)&&s.removeClass("is-selected"),a.focus().trigger("click"),!1;var y=t.getCellDate(a);t.isIslamic?(t.currentDateIslamic=[y.year,y.month,y.day],t.currentDate=R.umalquraToGregorian(t.currentDateIslamic[0],t.currentDateIslamic[1],t.currentDateIslamic[2])):t.currentDate=new Date(y.year,y.month,y.day),t.selectDay(t.currentDate,!0,!0),t.setRipple(null===(b=n.target)||void 0===b||null==b?void 0:b.querySelector(".is-ripple"),n)}return!c||(n.stopPropagation(),n.preventDefault(),!1)})},validateDisplayRange:function(t){var e,n,i=E.padDate(t.getFullYear(),t.getMonth(),t.getDate());if(this.settings.disable.minDate&&this.settings.disable.maxDate?(e=new Date(this.settings.disable.minDate),n=new Date(this.settings.disable.maxDate)):this.settings.displayRange.start&&this.settings.displayRange.end&&(e=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end)),this.settings.displayRange.start&&this.settings.displayRange.end){if(!this.dayMap.map(function(t){return t.key}).includes(i))return!1;if(e&&n){if(e.getDate()>=t.getDate()&&e.getMonth()===t.getMonth()||e.getMonth()>t.getMonth())return!1;if(n.getDate()<=t.getDate()&&n.getMonth()===t.getMonth()||n.getMonth()<t.getMonth())return!1}}return!0},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var t=new Date(this.settings.disable.minDate),e=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),t.getFullYear()>this.currentYear||this.currentYear>e.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<t.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>e.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var t=this.settings;if(t.showLegend){this.legend&&this.legend.length&&this.legend.remove(),this.legend=$('<div class="monthview-legend"></div>');for(var e=0;e<t.legend.length;e++){var n=t.legend[e],i=n.color;if(-1===i.indexOf("#")){var a=i.replace(/[0-9]/g,""),s=10*i.substr(i.length-2,2);i=st.themeColors().palette[a][s].value}var r=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(I.hexToRgba(i,.3),'"></span>\n          <span class="monthview-legend-text">').concat(n.name,"</span>\n        </div>");this.legend.append(r)}if(this.table.after(this.legend),t.inPage){var o=this.legend[0].querySelector(".monthview-legend-item:first-child"),l=this.legend[0].querySelector(".monthview-legend-item:last-child");if(o&&l){var c=function(t){return null==t||null==t?void 0:t.getBoundingClientRect().top};this.legend[c(o)!==c(l)?"addClass":"removeClass"]("is-wrapped")}}}},setRangeOnCell:function(t){var e=this,n=this.settings;if(n.range.useRange&&n.range.first&&!n.range.second){var i=n.range.first,a=n.range.extra,s=a.cellLength-1,r=i.rowIdx+i.cellIdx+s*i.rowIdx;if((t=$(t)).length&&!t.is(".is-disabled, .is-selected")){var o=t.closest("tr"),l=t.index(),c=o.index(),d=c+l+s*c,u=e.getCellDate(t),h=this.getTime(this.isIslamic?[u.year,u.month,u.day]:new Date(u.year,u.month,u.day)),p=this.getDifferenceToDate(n.range.first.date,n.range.maxDays);e.days.find("td:visible").each(function(t){var i=$(this);h>e.getTime(n.range.first.date)&&!n.range.selectBackward&&(!n.range.maxDays||n.range.maxDays>0&&h<=p.aftertime)&&(t>r&&t<=d||h>e.getTime(a.max)&&t<=d)?i.addClass("range-next"):h<e.getTime(n.range.first.date)&&!n.range.selectForward&&(!n.range.maxDays||n.range.maxDays>0&&h>=p.beforetime)&&(t<r&&t>=d||h<e.getTime(a.min)&&t>=d)?i.addClass("range-prev"):i.removeClass("range-next range-prev")})}else t.length||e.days.find("td").removeClass("range-next range-prev")}!t&&n.range.second&&e.setRangeSelected()},getDifferenceToDate:function(t,e,n){var i=this,a={},s=function(t,e,s){for(t=i.isIslamic?R.umalquraToGregorian(t):new Date(t);e>0;)t.setDate(t.getDate()+(s?1:-1)),(n||!n&&!i.isDateDisabled(t.getFullYear(),t.getMonth(),t.getDate()))&&(e--,a[s?"after":"before"]=i.isIslamic?R.gregorianToUmalqura(new Date(t)):new Date(t));s&&a.after?a.aftertime=i.getTime(a.after):a.before&&(a.beforetime=i.getTime(a.before))};return n=void 0!==n?n:this.settings.range.includeDisabled,s(t,e),s(t,e,!0),a},setRangeSelected:function(){var t=this,e=this,n=this.settings;n.range.useRange&&n.range.second&&n.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each(function(){var i,a=$(this),s=a.is(".is-disabled")&&!n.range.includeDisabled,r=a.is(".is-disabled")&&n.range.includeDisabled?" include-disabled":"",o=e.getTime((i=e.getCellDate(a),t.isIslamic?[i.year,i.month,i.day]:new Date(i.year,i.month,i.day))),l=e.getTime(n.range.first.date,!0),c=e.getTime(n.range.second.date,!0);o!==l&&o!==c||s?(!e.isIslamic&&o>l&&o<c&&!s||e.isIslamic&&(l>o&&c<o||l<o&&c>o)&&!s)&&a.addClass("range-selection".concat(r)):a.addClass("is-selected".concat(r).concat(l!==c?" range-selection".concat(o!==c||e.isIslamic?"":" end-date"):""))}))},setRangeSelByClick:function(){var t=0,e=this.settings;if(e.range.useRange)if(e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date){if(e.showTime&&this.datepickerApi){var n={time1:this.getTime(e.range.first.date),time2:this.getTime(e.range.second.date),first:this.datepickerApi.setTime(e.range.first.date),second:this.datepickerApi.setTime(e.range.second.date)};n.time1!==this.getTime(n.first)&&(this.datepickerApi.setRangeToElem(n.first,!0),this.datepickerApi.setRangeToElem(n.second,!1),t=2)}t=0===t?1:t}else{var i;!e.range.first||e.range.first&&!e.range.first.date?(i=this.dayMap.filter(function(t){return t.elem.is(".is-selected")}))&&i.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),i[0].elem.focus().trigger("click"),t=3):(!e.range.second||e.range.second&&!e.range.second.date)&&((i=this.days.find("td.range-prev:visible").first()).length||(i=this.days.find("td.range-next:visible").last()),i.length||(i=this.dayMap.filter(function(t){return t.elem.is(".is-selected")})),i&&i.length&&((i[0].elem||i).focus().trigger("click"),t=3))}return t},getCellDate:function(t){var e=parseInt(t.text(),10),n=parseInt(this.header.find(".month").attr("data-month"),10),i=parseInt(this.header.find(".year").text(),10);return t.hasClass("prev-month")?0===n?(n=11,i--):n--:t.hasClass("next-month")&&(11===n?(n=0,i++):n++),{year:i,month:n,day:e}},setRangeSelBeforeFirstSel:function(t){var e=this.settings;e.range.useRange&&$("#monthview-popup:visible")&&(e.range.first||($("td",this.element).removeClass("is-selected"),t.addClass("is-selected")))},activeTabindex:function(t,e){return $("td",this.element).removeAttr("tabindex"),t.attr("tabindex",0),e&&t.focus(),t},updated:function(){return this.teardown().init()},teardown:function(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){if(this.teardown(),this.element&&this.element.empty(),this.element&&this.element[0])try{$.removeData(this.element[0],"monthview")}catch(t){}return this}};var Pn={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,showToday:!0,showViewChanger:!0,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function Nn(t,e){this.settings=C.mergeSettings(t,e,Pn),this.element=$(t),this.init()}Nn.prototype={init:function(){return this.settings.startDate||(this.settings.startDate=cn.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=cn.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=R.getLocale(this.settings.language),n=R.getLocale(this.settings.locale);return $.when(n,e).done(function(e,n){t.locale=R.cultures[e]||R.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build()}),this},setCurrentCalendar:function(){return this.currentCalendar=R.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),C.addAttributes(this.element,this,this.settings.attributes),this},renderAllEvents:function(t){if(!this.settings.onRenderWeek||t){var e=this.settings.events.slice(0);e.sort(function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0}),this.removeAllEvents();for(var n=0;n<e.length;n++){var i=e[n];this.settings.filteredTypes.indexOf(i.type)>-1||this.renderEvent(i)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var t=this;this.settings.onRenderWeek(this.element,function(e,n){n&&n.length>0&&(t.settings.eventTypes=n),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0))},{api:t,settings:this.settings})},removeAllEvents:function(){for(var t=this.element[0].querySelectorAll(".calendar-event"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var n=0;n<this.dayMap.length;n++)this.dayMap[n].events=[]},renderEvent:function(t){var e=new Date(t.starts),n=E.padDate(e.getFullYear(),e.getMonth(),e.getDate());if(R.isIslamic(this.locale.name)){var i=R.gregorianToUmalqura(e);n=E.padDate(i[0],i[1],i[2])}var a=new Date(t.ends),s=E.padDate(a.getFullYear(),a.getMonth(),a.getDate());if(R.isIslamic(this.locale.name)){var r=R.gregorianToUmalqura(a);s=E.padDate(r[0],r[1],r[2])}var o=this.dayMap.filter(function(t){return t.key>=n&&t.key<=s});if(t.endKey=s,t.startKey=n,t=dn.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),1!==o.length||t.isAllDay||this.appendEventToHours(o[0].elem,t),1===o.length&&t.isAllDay&&this.appendEventToAllDay(o[0].elem,t),o.length>1)for(var l=0;l<o.length;l++){var c=0===l?"calendar-event-start":"calendar-event-continue";l===o.length-1&&(c="calendar-event-ends"),this.appendEventToAllDay(o[l].elem,t,c)}},appendEventToAllDay:function(t,e,n){var i=t.querySelector(".week-view-all-day-wrapper");if(i){var a=document.createElement("a");h.addClass(a,"calendar-event",e.color,n),a.setAttribute("data-id",e.id),a.setAttribute("data-key",e.startKey),a.setAttribute("href","#"),"calendar-event-continue"!==n&&"calendar-event-ends"!==n||a.setAttribute("tabindex","-1"),a.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>");var s=i.querySelectorAll(".calendar-event").length;if(s>=1&&(a.style.top="".concat(22*s,"px")),s>2)for(var r=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),o=0;o<r.length;o++)r[o].style.height="".concat(44+23*(s-1),"px");i.appendChild(a),C.addAttributes($(a),this,this.settings.attributes,"week-view-event-".concat(e.id)),this.attachTooltip(a,e)}},appendEventToHours:function(t,e){for(var n=this.element[0].querySelectorAll("td:nth-child(".concat(t.cellIndex+1,")")),i=0;i<n.length;i++){var a=n[i],s=parseFloat(a.parentNode.getAttribute("data-hour"),10),r=Math.round(e.startsHour);if(r>e.startsHour?s===r-.5:s===r){var o=e.endsHour-e.startsHour,l="",c=document.createElement("a");if(h.addClass(c,"calendar-event",e.color),c.setAttribute("data-id",e.id),c.setAttribute("data-key",e.startKey),c.setAttribute("href","#"),o<.5&&h.addClass(c,"reduced-padding",e.color),o<1.5&&h.addClass(c,"is-ellipsis"),o>2&&(l=" ".concat(R.formatHourRange(e.startsHour,e.endsHour,{locale:this.locale}))),e.startsHour+o>this.settings.endHour&&(h.addClass(c,"is-cutoff",e.color),o=this.settings.endHour+1-e.startsHour),o<.25&&(o=.25),e.startsHour>s){var d=e.startsHour-s,u=a.parentNode.offsetHeight;c.style.top="".concat(d/.016666666666666784*(u/30),"px")}c.style.height="".concat(2*o*25+1.5*o,"px"),c.innerHTML='<div class="calendar-event-content">\n          '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(e.shortSubject||e.subject).concat(l,"</span>\n        </div>");var p=a.querySelector(".week-view-cell-wrapper"),f=a.querySelectorAll(".calendar-event"),g=f.length;if(g>0){var m=100/(g+1),v=0;for(v=0;v<g;v++)f[v].style.width="".concat(m,"%"),v>0&&this.isRTL&&(f[v].style.right="".concat(m*v,"%")),v>0&&!this.isRTL&&(f[v].style.left="".concat(m*v,"%"));c.style.width="".concat(m,"%"),this.isRTL?c.style.right="".concat(m*v,"%"):c.style.left="".concat(m*v,"%")}p.appendChild(c),C.addAttributes($(c),this,this.settings.attributes,"week-view-event-".concat(e.id)),this.attachTooltip(c,e)}}},attachTooltip:function(t,e){var n=this;if("overflow"!==this.settings.iconTooltip){var i=t.querySelector(".calendar-event-icon");i&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:e}):e[this.settings.iconTooltip]&&(i.setAttribute("title",e[this.settings.iconTooltip]),$(i).tooltip({content:i.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:e}):e[this.settings.eventTooltip]&&(t.setAttribute("title",e[this.settings.eventTooltip]),$(t).tooltip({content:t.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(t.setAttribute("title",e.subject),$(t).tooltip({beforeShow:function(t,e){var i=e[0].querySelector(".calendar-event-title"),a=e[0].querySelector(".calendar-event-icon"),s=a?a.querySelector(".icon").getAttribute("data-status"):"";i.offsetWidth>e[0].scrollWidth-(a?a.offsetWidth:0)?t("".concat(i.innerText).concat(s?" (".concat(R.translate(s,{locale:n.locale.name},!1),")"):"")):t(!1)}}))},showWeek:function(t,e){var n=this;this.numberOfDays=Math.round((e-t)/864e5);var i=new Date(t.getTime()),a=new Date(e.getTime());R.isIslamic(this.locale.name)&&(t=R.gregorianToUmalqura(t),t=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),e=R.gregorianToUmalqura(e),e=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6])),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(R.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(R.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var s=new Date(t.getTime());s<=e;s.setDate(s.getDate()+1)){var r=R.formatDate(s,{pattern:"d",locale:this.locale.name}),o=R.formatDate(s,{pattern:"EEE",locale:this.locale.name}),l=this.currentCalendar.dateFormat.dayOfWeek,c=l?"EEE"===l.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(E.padDate(s.getFullYear(),s.getMonth(),s.getDate()),'"><div class="week-view-header-wrapper').concat(cn.isToday(s)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(c?"":" is-emphasis",'">').concat(c?o:r,'</span><span class="week-view-header-day-of-week').concat(c?" is-emphasis":"",'">').concat(c?r:o,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var d=this.settings.startHour;d<=this.settings.endHour;d++){for(var u='<tr class="week-view-hour-row" data-hour="'.concat(d,'"><td><div class="week-view-cell-wrapper">').concat(R.formatHour(d,{locale:this.locale}),"</div></td>"),h='<tr class="week-view-half-hour-row" data-hour="'.concat(d,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),p=new Date(t.getTime());p<=e;p.setDate(p.getDate()+1))u+='<td><div class="week-view-cell-wrapper"></div></td>',h+='<td><div class="week-view-cell-wrapper"></div></td>';u+="</tr>",h+="</tr>",this.weekBody+=u+h}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var f={isDayView:this.isDayView,startDate:R.isIslamic(this.locale.name)?i:t,endDate:R.isIslamic(this.locale.name)?a:e,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",f),this.settings.onChangeWeek&&this.settings.onChangeWeek(f),this.element.find("th").each(function(t,e){var i=e.getAttribute("data-key");i&&n.dayMap.push({key:i,elem:e})}),this.addTimeLine(),this.showToolbarMonth(t,e),this.renderAllEvents(),this.settings.startDate=R.isIslamic(this.locale.name)?i:t,this.settings.endDate=R.isIslamic(this.locale.name)?a:e},showToolbarMonth:function(t,e){var n=R.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),i=R.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),a=R.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),s=R.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),r=R.formatDate(e,{date:"year",locale:this.locale.name});i!==n&&(r="".concat(R.formatDate(t,{pattern:"MMM",locale:this.locale.name})," - ").concat(R.formatDate(e,{pattern:"MMMM yyyy",locale:this.locale.name}))),s!==a&&(r="".concat(R.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(R.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(r)},addTimeLine:function(){var t=this;if(this.settings.showTimeLine){var e=function(){var e=new Date,n=e.getHours(),i=e.getMinutes(),a=n-t.settings.startHour+i/60;t.markers.css("top",52*a)};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),e(),this.timer=setInterval(function(){e()},3e4))}},addToolbar:function(){var t=this;this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new In(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,viewChangerValue:this.isDayView?"day":"week",attributes:this.settings.attributes}),this.monthField=this.header.find("#monthview-datepicker-field")},handleEvents:function(){var t=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),function(){t.updated()}),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),function(e,n){var i=n.isToday?new Date:n.selectedDate;t.isDayView?(t.settings.startDate=i,t.settings.endDate=i):(t.settings.startDate=t.hasIrregularDays?i:cn.firstDayOfWeek(i,t.settings.firstDayOfWeek),t.settings.startDate.setHours(0,0,0,0),t.settings.endDate=new Date(t.settings.startDate),t.settings.endDate.setDate(t.settings.endDate.getDate()+t.numberOfDays-1),t.settings.endDate.setHours(23,59,59,59)),t.showWeek(t.settings.startDate,t.settings.endDate)}),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),function(){t.advanceDays(!0)}),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),function(){t.advanceDays(!1)});var e=function(e,n){var i=e.getAttribute("data-id"),a=t.settings.events.filter(function(t){return t.id===i});a&&0!==a.length&&t.element.trigger(n,{settings:t.settings,event:a[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",function(t){e(t.currentTarget,"eventclick"),t.preventDefault()}),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",function(t){e(t.currentTarget,"eventdblclick")}),this},advanceDays:function(t){var e=this.isDayView?1:this.numberOfDays;t||(e=-e),this.settings.startDate.setDate(this.settings.startDate.getDate()+e),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+e),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(t){t.startsLocale||(t=dn.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes)),dn.cleanEventData(t,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t)},selectHeader:function(t){var e=t instanceof Date?E.padDate(t.getFullYear(),t.getMonth(),t.getDate()):t,n={all:".week-view-table-header th"};n.current="".concat(n.all,'[data-key="').concat(e,'"]'),[].slice.call(this.element[0].querySelectorAll(n.all)).forEach(function(t){t.classList.remove("is-selected")});var i=this.element[0].querySelector(n.current);i&&i.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&(this.settings.events[n]=C.extend(!0,this.settings.events[n],t),dn.cleanEventData(this.settings.events[n],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&this.settings.events.splice(n,1);this.renderAllEvents()},updated:function(t){return t||(t={}),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),this}};var Rn={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0},disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},dayLegend:null,displayRange:{start:"",end:""}};function On(t,e){this.settings=C.mergeSettings(t,e,Rn),this.element=$(t),this.init()}On.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents().addEventLegend(),this},setLocaleThenBuild:function(){var t=this,e=R.getLocale(this.settings.language),n=R.getLocale(this.settings.locale);return $.when(n,e).done(function(e,n){t.locale=R.cultures[e]||R.currentLocale,t.language=n||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()}),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},addEventLegend:function(){var t=this.settings;this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var e=0;e<t.eventTypes.length;e++){var n=t.eventTypes[e],i=n.color,a=$('<div class="calendar-event-legend-item"></div>');a.append('<span class="calendar-event-legend-swatch '.concat(i,'"></span>\n          <span class="calendar-event-legend-text">').concat(n.label,"</span>")),this.eventLegend.append(a),C.addAttributes(a,this,this.settings.attributes,"legend-mobile-".concat(n.id),!0)}this.monthviewTable.after(this.eventLegend)},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var t=0;t<this.settings.eventTypes.length;t++){var e=this.settings.eventTypes[t],n='<input type="checkbox" class="checkbox '.concat(e.color,'07" name="').concat(e.id,'" id="').concat(e.id,'" ').concat(e.checked?'checked="true"':""," ").concat(e.disabled?'disabled="true"':"",' />\n        <label for="').concat(e.id,'" class="checkbox-label">').concat(e.translationKey?R.translate(e.translationKey,{locale:this.locale.name,language:this.language}):e.label,"</label><br/>");this.eventTypeContainer.insertAdjacentHTML("beforeend",n);var i=$(this.eventTypeContainer).find("#".concat(e.id));C.addAttributes($(this.eventTypeContainer).find("#".concat(e.id)),this,this.settings.attributes,"legend-".concat(e.id),!0),i.next("label").attr("for",i[0].id)}return this},renderMonthView:function(){var t=this;return this.monthViewContainer=document.querySelector(".calendar .calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)},this.monthView=new Ln(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,attributes:this.settings.attributes,displayRange:{start:this.settings.displayRange.start,end:this.settings.displayRange.end}}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),C.addAttributes($(".calendar"),this,this.settings.attributes),C.addAttributes($(".calendar-monthview"),this,this.settings.attributes,"monthview"),this},renderWeekView:function(){var t=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)};var e=cn.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),n=cn.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return e.setHours(0,0,0,0),n.setHours(23,59,59,999),this.weekView=new Nn(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:e,endDate:n,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip,attributes:this.settings.attributes}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(e){t.monthView.selectDay(e.startDate,!1,!0)},this.weekView.renderAllEvents(),C.addAttributes($(".calendar-weekview"),this,this.settings.attributes,"weekview"),this},changeView:function(t){if(t!==this.activeView&&this.weekViewContainer){var e=this.currentDate(),n=new Date(e),i=new Date(e);switch(n.setHours(0,0,0,0),i.setHours(23,59,59,999),t){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",n=cn.firstDayOfWeek(n,this.settings.firstDayOfWeek),i=cn.lastDayOfWeek(n,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(n,i),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(e,!1,!0),this.weekView.selectHeader(e);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(e,!1,!0)}}},appendUpcomingEvent:function(t){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(t.daysUntil>0)){var e=Math.abs(t.daysUntil);if(!(e<0||e>this.settings.upcomingEventDays)){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-key",t.startKey),h.addClass(n,"calendar-upcoming-event");var i="",a=R.formatDate(t.starts,{pattern:"d",locale:this.locale.name}),s=R.formatDate(t.ends,{pattern:"d",locale:this.locale.name}),r="".concat(R.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a===s?a:"".concat(a,"-").concat(s),", ").concat(R.formatDate(t.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(s,10)<parseInt(a,10)){var o=new Date(t.starts);o.setDate(1),o.setMonth(o.getMonth()+1);var l=o.getFullYear();r="".concat(R.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a," - ").concat(R.formatDate(o,{pattern:"MMMM",locale:this.locale.name})," ").concat(s,", ").concat(l)}i+='\n      <span class="calendar-upcoming-date">'.concat(r,'</span>\n      <span class="calendar-upcoming-event-color ').concat(t.color||"",'">').concat(t.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(t.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(t.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(t.isDays?t.duration:t.durationHours," ").concat(t.durationUnits||"","</span>"),n.innerHTML=i,this.upcomingEventsContainer.appendChild(n),C.addAttributes($(n),this,this.settings.attributes,"upcoming-event-".concat(t.id))}}},renderEventDetails:function(t,e){if(this.settings.events&&"month"===this.activeView){var n=this.settings.events.filter(function(e){return e.id===t});if(n&&0!==n.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var i=$.extend(!0,{},n[0]);i.durationHours&&!i.isDays&&dn.formateTimeString(i,this.locale,this.language),this.renderTmpl(i,this.settings.template,this.eventDetailsContainer,e>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(i,this.settings.mobileTemplate,this.eventDetailsMobileContainer,e>1);var a=$(this.eventDetailsContainer).data("accordion");a&&a.destroy(),this.eventDetailsMobileContainer&&this.translate(this.eventDetailsMobileContainer),this.translate(this.eventDetailsContainer)}}},translate:function(t){var e=this;$(t).find('[data-translate="text"]').each(function(t,n){var i=$(n);i.text(R.translate(i.attr("data-translate-key")||i.text(),{showAsUndefined:!1,showBrackets:!1,language:e.settings.language,locale:e.settings.locale}))})},renderSelectedEventDetails:function(){var t=this.getDayEvents();if(this.clearEventDetails(),t.events&&0!==t.events.length){for(var e=0;e<t.events.length;e++)this.renderEventDetails(t.events[e].id,t.events.length);$(".calendar .list-detail",this.element).css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),h.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click"),$(".accordion-pane.no-transition",this.element).removeClass("no-transition")}},renderDay:function(t){this.monthView.selectDay(t);var e=new Date(this.currentDate()),n=new Date(this.currentDate());e.setHours(0,0,0,0),n.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(e,n),"week"===this.activeView&&(e=cn.firstDayOfWeek(e,this.settings.firstDayOfWeek),n=cn.lastDayOfWeek(e,this.settings.firstDayOfWeek),this.weekView.showWeek(e,n))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var t=[];if(!this.eventTypeContainer)return t;for(var e=this.eventTypeContainer.querySelectorAll(".checkbox"),n=0;n<e.length;n++){var i=e[n];i.checked||t.push(i.getAttribute("name"))}return t},renderAllEvents:function(t){if(this.settings.onRenderMonth&&!t)return this.callOnRenderMonth(),this;var e=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var n=this.settings.events.slice(0);n.sort(function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0});for(var i=0;i<n.length;i++){var a=n[i];e.indexOf(a.type)>-1||this.renderEvent(a)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=e,this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents()),this},renderEvent:function(t){var e=R.newDateObj(t.starts),n=R.isIslamic(this.locale.name),i=E.padDate(e.getFullYear(),e.getMonth(),e.getDate());if(n){var a=R.gregorianToUmalqura(e);i=E.padDate(a[0],a[1],a[2])}var s=R.newDateObj(t.ends),r=E.padDate(s.getFullYear(),s.getMonth(),s.getDate());if(n){var o=R.gregorianToUmalqura(s);r=E.padDate(o[0],o[1],o[2])}var l=this.monthView.dayMap.filter(function(t){return t.key>=i&&t.key<=r});t.endKey=r,t.startKey=i,t=dn.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes);for(var c=-1,d=0;d<this.monthView.dayMap.length;++d)if(this.monthView.dayMap[d].key>=i&&this.monthView.dayMap[d].key<=r){c=d;break}if(1===l.length&&this.appendEvent(l[0].elem[0],t,"event-day-start-end",c),l.length>1)for(var u=0;u<l.length;u++){var h=0===u?"event-day-start":"event-day-span";l.length-1===u&&(h="event-day-end"),this.appendEvent(l[u].elem[0],t,h,c+u)}this.appendUpcomingEvent(t,l,c)},removeAllEvents:function(){for(var t=this.monthViewContainer.querySelectorAll(".calendar-event-more"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var n=this.monthViewContainer.querySelectorAll(".calendar-event"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);for(var a=this.monthViewContainer.querySelectorAll(".calendar-event-spacer"),s=0;s<a.length;s++)a[s].parentNode.removeChild(a[s]);for(var r=0;r<this.monthView.dayMap.length;r++)this.monthView.dayMap[r].events=[]},appendEvent:function(t,e,n,i){var a,s,r,o=this,l=t.querySelectorAll(".calendar-event").length;if(i>-1&&(this.monthView.dayMap[i].events||(this.monthView.dayMap[i].events=[]),this.monthView.dayMap[i].events.push(e)),l>=3){var c=t.querySelector(".calendar-event-more"),d=function(t,e){t.setAttribute("data-count",e),t.innerHTML="<span>+ ".concat(e," ").concat(R.translate("More",{locale:o.locale.name,language:o.language}).replace("...",""),"</span>")};return c?d(c,parseInt(c.getAttribute("data-count"),10)+1):(r=document.createElement("span"),h.addClass(r,"calendar-event-more"),d(r,1),t.querySelector(".day-container").appendChild(r),$(t).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",function(){var t=o.monthView.dayMap[i].key;o.monthView.selectDay(t,!1,!0),o.changeView("day")})),this}r=document.createElement("a"),h.addClass(r,"calendar-event",e.color,n),r.setAttribute("data-id",e.id),r.setAttribute("data-key",e.startKey),"#"===(null===(a=e.color)||void 0===a||null==a?void 0:a.substr(0,1))&&(r.style.backgroundColor=e.color,r.classList.remove(e.color)),"#"===(null===(s=e.borderColor)||void 0===s||null==s?void 0:s.substr(0,1))&&(r.style.borderLeftColor=e.borderColor),r.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>");var u=this.monthViewContainer.querySelectorAll('.calendar-event.event-day-start[data-id="'.concat(e.id,'"]'));if(u[0])for(var p=u[0].parentNode.children,f=t.querySelector(".day-container").children.length;f<p.length&&p[f].getAttribute("data-id")!==e.id;f++)if(!p[f].classList.contains("day-text")){var g=document.createElement("span");g.classList.add("calendar-event-spacer"),t.querySelector(".day-container").appendChild(g)}if(t.querySelector(".day-container").appendChild(r),C.addAttributes($(r),this,this.settings.attributes,"event-".concat(e.id)),"overflow"!==this.settings.iconTooltip){var m=r.querySelector(".calendar-event-icon");m&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.iconTooltip]&&(m.setAttribute("title",e[this.settings.iconTooltip]),$(m).tooltip({content:m.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.eventTooltip]&&(r.setAttribute("title",e[this.settings.eventTooltip]),$(r).tooltip({content:r.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(r.setAttribute("title",e.subject),$(r).tooltip({beforeShow:function(t,e){var n=e[0].querySelector(".calendar-event-title"),i=e[0].querySelector(".calendar-event-icon"),a=i?i.querySelector(".icon").getAttribute("data-status"):"";n.offsetWidth>e[0].scrollWidth-(i?i.offsetWidth:0)?t("".concat(n.innerText).concat(a?" (".concat(R.translate(a,{locale:o.locale.name,language:o.language},!1),")"):"")):t(!1)}})),this},getEventTypeLabel:function(t){var e="";if(!t)return e;var n=this.settings.eventTypes.filter(function(e){return e.id===t});return 1===n.length&&(e=n[0].label),e},handleEvents:function(){var t=this,e=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),function(){t.updated()}),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),function(e,n){t.isSwitchingMonth=!0,t.modalVisible()&&t.removeModal(),t.settings.year=n.year,t.settings.month=n.month,t.renderAllEvents(),setTimeout(function(){t.isSwitchingMonth=!1},500)}),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",function(){t.renderAllEvents(!0)}),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),function(){t.renderSelectedEventDetails()}),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",function(e){var n=e.currentTarget.getAttribute("data-key");t.renderDay(n)}),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",function(n){n.stopPropagation();var i=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0},a=n.currentTarget.getAttribute("data-id"),s=t.settings.events.filter(function(t){return t.id===a});if(t.element.triggerHandler("contextmenu",{originalEvent:n,month:t.settings.month,year:t.settings.year,event:s[0]}),!C.isSubscribedTo(e.element[0],n,"contextmenu","calendar")&&!i())return!0;if(n.preventDefault(),e.closePrevPopupmenu(),!i())return!0;var r=$(n.currentTarget);return r.popupmenu({attachToBody:!0,menuId:t.settings.menuId,eventObj:n,trigger:"immediate",offset:{y:5}}),r.off("selected.calendar").on("selected.calendar",function(t,n){if(e.settings.menuSelected&&e.settings.menuSelected(t,n,a),"delete-event"===n.attr("data-action")&&e.deleteEvent({id:a}),"show-event"===n.attr("data-action")){var i=this.getAttribute("data-key");e.monthView.selectDay(i)}}),!1});var n=0,i=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",function(a){n=setTimeout(function(){if(!i){var n=a.currentTarget.getAttribute("data-id"),s=t.settings.events.filter(function(t){return t.id===n});if(!s||0===s.length)return;var r=$(a.currentTarget),o=r.find(".calendar-event-title");(a.currentTarget.classList.contains("event-day-span")||a.currentTarget.classList.contains("event-day-end"))&&(o=e.element.find('.event-day-start[data-id="'.concat(r.attr("data-id"),'"] .calendar-event-title'))),t.showModalWithCallback(s[0],!1,o),t.element.triggerHandler("eventclick",{month:t.settings.month,year:t.settings.year,event:s[0]})}i=!1},100)}),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",function(e){clearTimeout(n),i=!0;var a=e.currentTarget.getAttribute("data-id"),s=t.settings.events.filter(function(t){return t.id===a});s&&0!==s.length&&t.element.trigger("eventdblclick",{month:t.settings.month,year:t.settings.year,event:s[0]})}),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",function(e){var n=e.currentTarget.getAttribute("data-key");if(n&&!t.isSwitchingMonth){var i=new Date(n.substr(0,4),n.substr(4,2)-1,n.substr(6,2)),a=C.extend({},t.settings.newEventDefaults);a.startKey=n,a.endKey=n,a.starts=i,a.ends=i,e.stopPropagation(),dn.cleanEventData(a,!1,t.currentDate(),t.locale,t.language,t.settings.events,t.settings.eventTypes),t.showModalWithCallback(a,!0),t.element.triggerHandler("dblclick",{eventData:a,api:t})}}),this.element.find(".listview").off("click.".concat("calendar","-mobile")).on("click.".concat("calendar","-mobile"),function(e){var n=$(e.target).closest("li"),i=n.attr("data-id"),a=t.settings.events.filter(function(t){return t.id===i});a&&0!==a.length&&(t.showModalWithCallback(a[0],!1,n),t.element.triggerHandler("eventclick",{month:t.settings.month,year:t.settings.year,event:a[0]}))}),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")})},callOnRenderMonth:function(){var t=this;this.settings.onRenderMonth(this.element,function(e,n){n&&n.length>0&&(t.settings.eventTypes=n,t.weekView&&(t.weekView.settings.eventTypes=n),t.renderEventTypes()),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0),t.weekView&&(t.weekView.settings.events=e,t.weekView.renderAllEvents(!0)))},{api:t,month:this.settings.month,year:this.settings.year})},currentDate:function(){var t=this.isIslamic?this.monthView.currentDateIslamic:this.monthView.currentDate;return R.isValidDate(t)?t:new Date},getDayEvents:function(t){if(t||(t=this.currentDate()),"string"==typeof t||this.isRTL||(t=E.padDate(t.getFullYear(),t.getMonth(),t.getDate())),R.isIslamic(this.locale.name)){var e=R.gregorianToUmalqura(t);t=E.padDate(e[0],e[1],e[2])}var n=this.monthView.dayMap.filter(function(e){return e.key===t});"month"!==this.activeView&&(n=this.weekView.dayMap.filter(function(e){return e.key===t}));var i={date:this.monthView.currentDate,events:[]};return 0===n.length?[]:(i.events=n[0].events,i.elem=n[0].elem,i)},renderTmpl:function(t,e,n,i){if("object"===a(ke)&&e){if(e instanceof $?e="".concat(e.html()):"string"==typeof e&&(E.containsHTML(e)||(e=$("#".concat(e)).html())),t.color=dn.getEventTypeColor(t,this.settings.eventTypes),t.startsLong=R.formatDate(t.starts,{date:"long",locale:this.locale.name}),t.endsLong=R.formatDate(t.ends,{date:"long",locale:this.locale.name}),t.startsHoursLong="".concat(R.formatDate(t.starts,{date:"long",locale:this.locale.name})," ").concat(R.formatDate(t.starts,{date:"hour",locale:this.locale.name})),t.endsHoursLong="".concat(R.formatDate(t.ends,{date:"long",locale:this.locale.name})," ").concat(R.formatDate(t.ends,{date:"hour",locale:this.locale.name})),R.isIslamic(this.locale.name)){var s=R.gregorianToUmalqura(new Date(t.starts)),r=R.gregorianToUmalqura(new Date(t.ends));t.startsLong=R.formatDate(s,{date:"long",locale:this.locale.name}),t.endsLong=R.formatDate(r,{date:"long",locale:this.locale.name}),t.startsHoursLong="".concat(R.formatDate(s,{date:"long",locale:this.locale.name})," ").concat(R.formatDate(s,{date:"hour",locale:this.locale.name})),t.endsHoursLong="".concat(R.formatDate(r,{date:"long",locale:this.locale.name})," ").concat(R.formatDate(r,{date:"hour",locale:this.locale.name}))}t.typeLabel=this.getEventTypeLabel(t.type);var o=ke.compile(e,{event:t});n.classList.remove("has-only-one"),i?h.append(n,o,"*"):(n.innerHTML=o,n.classList.add("has-only-one"))}},addEvent:function(t){dn.cleanEventData(t,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t),this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents())},updateEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&(this.settings.events[n]=C.extend(!0,this.settings.events[n],t),dn.cleanEventData(this.settings.events[n],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(t)},deleteEvent:function(t){for(var e=t.id,n=this.settings.events.length-1;n>=0;n--)this.settings.events[n].id===e&&this.settings.events.splice(n,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(t)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function(t,e,n){var i=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),h.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),t=dn.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(t||{},this.settings.modalTemplate,this.modalContents);var a=this.getDayEvents(),s=!0;a.elem=$(a.elem);var r=6===a.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";n||"day"!==this.activeView||(n=$(".week-view-header-wrapper"),r=this.isRTL?"left":"right"),n||(n=a.elem);var o=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:n,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:r},title:t.title||t.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:t.color,initializeContent:!1};n.off("hide.calendar").on("hide.calendar",function(){s?i.removeModal():(e(i.modalContents,t),i.element.trigger("hidemodal",{elem:i.modalContents,event:t}),i.removeModal(),s=!0)}).popover(o).off("show.calendar").on("show.calendar",function(e,a){i.element.trigger("showmodal",{elem:i.modalContents,event:t}),a.find("#isAllDay").off().on("click.calendar",function(t){$(t.currentTarget).prop("checked")?(a.find("#durationHours").prop("disabled",!0),a.find("#endsHourLocale").prop("disabled",!0),a.find("#startsHourLocale").prop("disabled",!0)):(a.find("#durationHours").prop("disabled",!1),a.find("#endsHourLocale").prop("disabled",!1),a.find("#startsHourLocale").prop("disabled",!1))}),a.find("#type").val(t.type).dropdown(),a.find("#comments").val(t.comments),a.find("#subject").focus(),a.find("button").on("click",function(t){var e=n.data("popover"),i=t.currentTarget.getAttribute("data-action");s="submit"!==i,e&&e.hide(!0)}),a.find(".datepicker").datepicker({locale:i.settings.locale,language:i.settings.language}),a.find(".timepicker").timepicker({locale:i.settings.locale,language:i.settings.language}),i.translate(a)}),$("#calendar-popup").one("tooltipafterplace.calendar",function(t,e){var n=e.element.find(".arrow"),i=parseInt(n.css("margin-top"),10);if(a.elem.parent().index()>=3){var s=parseInt(e.element.offset().top,10),r=s+e.element.height(),o=$("html").height()+10;if(r>o){var l=s-(r-o)-25;e.element.css("top","".concat(l,"px")),n.css("margin-top","".concat(i+(s-l)-18,"px"))}}else e.element.height()>580&&n.css("margin-top","".concat(i-18,"px"))}),this.activeElem=n}},showModalWithCallback:function(t,e,n){var i=this;this.showEventModal(t,function(t,n){for(var a=t.querySelectorAll("input, textarea, select"),s=0;s<a.length;s++)n[a[s].id]="checkbox"===a[s].getAttribute("type")?a[s].checked:a[s].value;e?i.addEvent(n):i.updateEvent(n)},n)},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),h.remove(document.getElementById("calendar-popup")),h.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t||(t={}),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t.locale||t.template||t.upcomingEventDays||t.mobileTemplate?(this.destroy().init(),this):(this.weekView&&t.events&&(this.weekView.settings.events=t.events),this.weekView&&t.eventTypes&&(this.weekView.settings.events=t.events),this.weekView&&t.weekViewSettings&&(this.weekView.settings=C.mergeSettings(this.element[0],t.weekViewSettings,this.weekViews.settings)),this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&t.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element&&this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(t){return this.each(function(){var e=$.data(this,"calendar");e?e.updated(t):e=$.data(this,"calendar",new On(this,t))})};var Bn={slidesToShow:1,startingSlide:null,loop:!1,attributes:null,showArrows:!1,footerContainment:!1,hideBulletsOnOverflow:!1,pageSelectorInputText:null};function _n(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Bn),this.init()}_n.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView(),this.addAttributes())},setElements:function(){var t=this.settings;this.setResponsiveSlidesToShow(),this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=t.slidesToShow,this.slides=[],this.isVisible=!0;for(var e=0,n=this.slidesJQ.length;e<n;e++)this.slides.push({node:$(this.slidesJQ[e])});this.activeIndex=null!==t.startingSlide&&t.startingSlide>-1&&t.startingSlide<this.slides.length?t.startingSlide:0,C.addAttributes(this.element,this,this.settings.attributes)},createControls:function(){for(var t,e,n,i,a,s,r,o,l,c=this.slides.length,d={bullets:""},u=[],h=0,p=0,f=c;p<f;p+=this.slidesToShow){e="",h++,o=1===this.slidesToShow||c-p==1,i=R.translate(o?"SlideOf":"SlidesOf"),n=o?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var g=0;g<this.slidesToShow&&p+g<c;g++)e+="".concat(p+g+1,", ");i=i.replace(o?"{1}":"{2}",c),n=n.replace(o?"{1}":"{2}",c),r=(e=e.slice(0,-2)).lastIndexOf(","),s=e.substr(r+2),o?(l="",(t=this.slides[p].node).is(".is-disabled, [disabled]")&&!t.is('[disabled="false"]')&&(l=' disabled tabindex="-1"',this.slides[p].isDisabled=!0),t.is(".active")&&null===this.settings.startingSlide&&""===l&&(this.activeIndex=p),i=(a=t.attr("data-button-text"))&&a.length?a:i.replace("{0}",e),n=n.replace("{0}",e)):(e=e.substr(0,r),i=i.replace("{1}",s).replace("{0}",e),n=n.replace("{1}",s).replace("{0}",e)),n=n.toLowerCase().replace(/[\s,--]+/g,"-"),d.bullets+='<a href="'.concat(n,'" class="control-button hyperlink hide-focus is-ripple"').concat(l,'><span class="audible">').concat(i,"</span></a>"),u.push({href:n,text:i,isDisabled:l})}var m=$(".btn-previous",this.element),v=$(".btn-next",this.element),b=this.element.width();this.isBulletsNav=b>44*h;var y=!this.isBulletsNav;if(!this.isBulletsNav&&this.settings.hideBulletsOnOverflow)m.length||(d.previous=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(R.translate("Previous"),"</span>\n          </button>")),v.length||(d.next=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(R.translate("Next"),"</span>\n          </button>"));else{var w;null===(w=this.pagerApi)||void 0===w||null==w||w.destroy();var x=$(".controls .btn-controls-previous, .btn-controls-next, .pager-container",this.element);m.add(v).add(x).remove(),this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls").remove(),this.settings.showArrows&&(y=b<44*h+100,d.controlsPrevious=""+'<button class="btn-icon btn-controls-previous" type="button">\n            '.concat($.createIcon("previous-page"),'\n            <span class="audible"> ').concat(R.translate("Previous"),"</span>\n          </button>"),d.controlsNext=""+'<button class="btn-icon btn-controls-next" type="button">\n            '.concat($.createIcon("next-page"),'\n            <span class="audible">').concat(R.translate("Next"),"</span>\n          </button>"))}if(this.activeIndex>0&&this.activeIndex>h-1&&(this.activeIndex=h-1),h>1){var C=!0;d.all='<div class="controls circlepager-controls">',d.previous||d.next?(C=!1,d.all+="".concat(d.bullets,"</div>").concat(d.previous||"").concat(d.next||"")):y?(C=!1,d.all+='<div class="pager-container" data-init="false"></div></div>'):d.all+="".concat(d.controlsPrevious||"").concat(d.bullets).concat(d.controlsNext||"","</div>"),this.element.append(d.all).find("button").button(),C&&this.SetFooterContainment(),this.pagerApi=this.element.find(".pager-container").pager({type:"standalone",dataset:u,pagesize:1,showPageSizeSelector:!1,showPageSelectorInput:!0,footerContainmentClass:"footer-circlepager",footerContainment:this.settings.footerContainment,pageSelectorInputText:this.settings.pageSelectorInputText}).data("pager"),this.setPagerButtonsState()}},SetFooterContainment:function(){var t=this;this.element.closest(".card, .widget").length&&this.settings.footerContainment&&["widget","card"].forEach(function(e){var n=t.element.closest(".".concat(e,"-content"));if(n.length){var i=n.next(".".concat(e,"-footer"));i.find(".circlepager-controls").remove(),i.length||(i=$('<div class="'.concat(e,'-footer footer-circlepager"></div>')).insertAfter(n)),t.element.find(".circlepager-controls").appendTo(i)}})},setPagerButtonsState:function(){if(this.pagerApi){var t={prevAndFirst:this.pagerApi.state.activePage>1,nextAndLast:this.pagerApi.state.activePage<this.pagerApi.state.pages};this.pagerApi.updated({enableFirstButton:t.prevAndFirst,enablePreviousButton:t.prevAndFirst,enableNextButton:t.nextAndLast,enableLastButton:t.nextAndLast,activePage:this.pagerApi.state.activePage})}},isVisibleInContainer:function(t){if(t&&t[0]){var e=t[0].getBoundingClientRect(),n=this.element[0].getBoundingClientRect();return e.left>n.left&&e.left<n.left+n.width&&e.top>n.top&&e.top<n.top+n.height}return-1},updateSlidesToShow:function(t){if(this.isActive)return this.settings.slidesToShow=t||1,this.updated(),this},setResponsiveSlidesToShow:function(){var t=this.element.width();this.resSlidesToShow=this.resSlidesToShow||this.settings.slidesToShow,t<300&&this.settings.slidesToShow>1?this.settings.slidesToShow=1:this.settings.slidesToShow=this.resSlidesToShow},responsiveSlidesToShow:function(t){var e=this;this.isActive&&(this.setResponsiveSlidesToShow(),this.slidesToShow=t||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout(function(){e.createControls(),e.handleEvents(),e.initActiveSlide(),e.showCollapsedView(),e.removeOverflowedControls()},0))},show:function(t){if(this.isActive){t=void 0!==t?t:this.activeIndex,this.activeIndex=t;var e=this.slides.length,n=t>-1?"".concat(R.isRTL()?100*(e-t-1):0-100*t,"%"):0;this.controlButtons.removeClass("is-active").eq(t).addClass("is-active"),this.container[0].style.left=n,!this.isBulletsNav&&this.settings.hideBulletsOnOverflow?(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(t).find("span").removeClass("audible")):(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(t).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var t,e=this;if(t=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[t].isDisabled)return setTimeout(function(){e.prev()},0),this.activeIndex=t,!1;this.show(t)},next:function(){var t,e=this;if(t=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[t].isDisabled)return setTimeout(function(){e.next()},0),this.activeIndex=t,!1;this.show(t)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var t=0,e=this.slidesJQ.length;t<e;t++)this.slidesJQ[t].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},removeOverflowedControls:function(){var t,e=this.controlButtons.parent(),n=null===(t=e[0])||void 0===t||null==t?void 0:t.nextElementSibling;e.length>1&&n&&n.remove()},addAttributes:function(){for(var t=0,e=this.controlButtons.length;t<e;t++){var n=$(this.controlButtons[t]);C.addAttributes(n,this,this.settings.attributes,"control-".concat(t+1))}},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},setRipple:function(t,e){var n;if(t&&null!==(n=t.classList)&&void 0!==n&&(null==n?void 0:n.contains("is-ripple"))){var i=e&&e.touches?e.touches[0]:e||{},a=t.getBoundingClientRect(),s=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),r=i.clientX?i.clientX-a.left:t.offsetWidth/2,o=i.clientY?i.clientY-a.top:t.offsetHeight/2,l=t.style.cssText,c=t.getAttribute("data-hex"),d=I.getContrastColor(c),u={ripple:I.getLuminousColorShade(c,"white"===d?"0.3":"-0.3"),elem:I.hexToRgba(c,.7)},h=null!==c?"--ripple-background: ".concat(u.ripple,"; background-color: ").concat(u.elem,"; "):"";t.style.cssText="".concat(h,"--s: 0; --o: 1"),t.offsetTop,t.style.cssText="".concat(h,"--t: 1; --o: 0; --d: ").concat(s,"; --x:").concat(r,"; --y:").concat(o,";"),$(t).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(e){var n;"transform"===(e.propertyName||(null===(n=e.originalEvent)||void 0===n||null==n?void 0:n.propertyName))&&(t.style.cssText=l)})}},unbind:function(){var t,e=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");if(this.controlButtons&&!this.controlButtons.length&&(this.controlButtons=e.find(".control-button")),null===(t=this.pagerApi)||void 0===t||null==t||t.destroy(),$("body").off("resize.circlepager"),this.element.find(".pager-container").off("page.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons){for(var n=0,i=this.controlButtons.length;n<i;n++)$(this.controlButtons[n]).off("click.circlepager");this.controlButtons.off("click.circlepager keydown.circlepager")}return $(".btn-previous, .btn-controls-previous",this.element).add(e.find(".btn-controls-previous")).off("click.circlepager"),$(".btn-next, .btn-controls-next",this.element).add(e.find(".btn-controls-next")).off("click.circlepager"),$(".controls",this.element).remove(),this.element.closest(".card, .widget").find(".footer-circlepager").remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Bn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function(){var t=this,e=this,n=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");this.controlButtons=$(".control-button",this.element),this.controlButtons.length||(this.controlButtons=n.find(".control-button")),$(".btn-previous, .btn-controls-previous",this.element).add(n.find(".btn-controls-previous")).off("click.circlepager").on("click.circlepager",function(e){t.prev(),e.stopImmediatePropagation()}),$(".btn-next, .btn-controls-next",this.element).add(n.find(".btn-controls-next")).off("click.circlepager").on("click.circlepager",function(e){t.next(),e.stopImmediatePropagation()});for(var i=function(e,n){var i=$(t.controlButtons[e]);i.hideFocus(),i.off("click.circlepager").on("click.circlepager",function(n){n.preventDefault(),t.slides[e].isDisabled||(t.setRipple(i[0],n),t.show(e))})},a=0,s=this.controlButtons.length;a<s;a++)i(a);this.element.off("focus.circlepager","*").on("focus.circlepager","*",function(t){var n=!1;if(!e.isVisibleInContainer($(this)))for(var i=e.element.find(":focusable"),a=0,s=i.length;a<s;a++)if(e.isVisibleInContainer(i.eq(a))){i.eq(a).focus(),n=!0;break}if(t.stopPropagation(),n)return!1}),this.element.off("keydown.circlepager","*").on("keydown.circlepager","*",function(t){var n=!1,i=t.which||t.keyCode||t.charCode||0,a=$(":focusable"),s=a.index(this);if(9===i)if(t.shiftKey){for(var r=s-1;r>=0;r--)if(e.element.has(a.eq(r)).length<1||e.isVisibleInContainer(a.eq(r))){a.eq(r).focus(),n=!0;break}}else e.isVisibleInContainer(a.eq(s+1))||(e.controlButtons.first().focus(),n=!0);if(t.stopPropagation(),n)return!1}),this.controlButtons.off("keydown.circlepager").on("keydown.circlepager",function(n){var i=!1,a=n.which||n.keyCode||n.charCode||0,s=R.isRTL();if(-1!==[37,39].indexOf(a)&&(e.isFocus=!0,n.altKey?37===a&&!s||39===a&&s?e.first():e.last():(!s&&37===a||s&&39===a?e.prev():e.next(),i=!0)),i)return n.preventDefault(),n.stopPropagation(),t.setRipple(n.currentTarget,n),!1}),$("body").off("resize.circlepager").on("resize.circlepager",function(){e.responsiveSlidesToShow()}),e.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",function(){e.responsiveSlidesToShow()}),this.element.find(".pager-container").off("page.circlepager").on("page.circlepager",function(e,n){t.setPagerButtonsState(),t.show(n.activePage-1)})}},$.fn.circlepager=function(t){return this.each(function(){var e=$.data(this,"circlepager");e?e.updated(t):e=$.data(this,"circlepager",new _n(this,t))})},$.fn.calendartoolbar=function(t){return this.each(function(){var e=$.data(this,"calendartoolbar");e?e.updated(t):e=$.data(this,"calendartoolbar",new In(this,t))})};var Fn={breakpoint:"phone-to-tablet",trigger:null,expandedText:R.translate("ShowLess"),collapsedText:R.translate("ShowMore")};function zn(t,e){this.settings=C.mergeSettings(t,e,Fn),this.element=$(t),this.init(),_("CompositeForm")}zn.prototype={init:function(){return this.build().handleEvents()},build:function(){var t=this.element[0].classList;t.contains("composite-form")||t.add("composite-form");var e=this.element.find(".expandable-area");return e.length?(this.hasSummary=!0,this.expandableArea=e,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var t=this;function e(){var e=t.expandableAreaAPI.isExpanded();t.setExpanderText(t.settings[e?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),function(e){t.checkResponsive(e)}),this.element.on("updated.".concat("compositeform"),function(){t.updated()}),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),e).on("collapse.".concat("compositeform"),e),this},checkResponsive:function(){var t=this.element[0].classList;p.isBelow(this.settings.breakpoint)?t.add("is-in-responsive-mode"):(t.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(t){if(this.hasSummary&&t instanceof String&&t.length){var e=this.expander.find("span");e||(e=this.expander),e.text(t)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(t){return this.each(function(){var e=$.data(this,"compositeform");e?e.updated(t):e=$.data(this,"compositeform",new zn(this,t))})};var Hn={content:null,initializeContent:!0,title:"Contextual Action Panel",modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,title:void 0,trigger:"click",useFlexToolbar:!1}},qn=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function Vn(t){var e={showCloseButton:"showCloseBtn"};return qn.forEach(function(n){if(-1===[null,void 0].indexOf(t[n])){var i=n;t.modalSettings||(t.modalSettings={}),e[n]?(i=e[n],t.modalSettings[i]=t[n]):t.modalSettings[n]=t[n],delete t[n],B("settings.modalSettings.".concat(i),"settings.".concat(n))}}),t}function jn(t,e){this.settings=C.mergeSettings(t,e,Hn),this.settings=Vn(this.settings),this.element=$(t),this.init()}jn.prototype={get modalAPI(){var t;return this.panel&&this.panel.length&&(t=this.panel.data("modal")),t},get toolbarAPI(){var t;return this.toolbar&&this.toolbar.length&&(t=this.toolbar[0].classList.contains("flex-toolbar")?this.toolbar.data("toolbar-flex"):this.toolbar.data("toolbar")),t},init:function(){this.setup().build().handleEvents()},setup:function(){var t,e=this.element.next(".contextual-action-panel"),n=this.id;return"string"==typeof dataModal&&(t=$("#".concat(n))).length&&(e=t),1===this.element.closest(".popupmenu").length&&(e=this.element.closest(".popupmenu").next(".contextual-action-panel")),e[0]&&(e[0].style.display="none",e.addClass("is-animating"),this.panel=e),this},build:function(){var t,e,n,i,a=this,s=this.settings.content;if(this.id=(null===(t=this.settings)||void 0===t||null===(e=null==t?void 0:t.modalSettings)||void 0===e||null==e?void 0:e.id)||(null==s||null==s?void 0:s.attr("id"))||C.uniqueId(this.element,"contextual-action-modal"),null!==(n=this.settings)&&void 0!==n&&null!==(i=null==n?void 0:n.modalSettings)&&void 0!==i&&(null==i?void 0:i.id)||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(s instanceof jQuery){if(s.is(".contextual-action-panel")?this.panel=s:(s.wrap('<div class="contextual-action-panel"></div>'),this.panel=s.parent()),this.panel.addClass("modal").appendTo("body"),s.is("iframe"))return s.ready(function(){a.completeBuild(),s.show()}),a;s.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(s,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.completeBuild(),this},completeBuild:function(){var t,e,n=!1,i=!1,a=!0;this.title=this.settings.modalSettings.title?this.settings.modalSettings.title:this.settings.title,this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((t=this.panel.children()).is("iframe")&&(e=t.contents(),this.toolbar=e.find(".toolbar, .flex-toolbar"),n=!0),n||(t.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var s=this.panel.find(".modal-header");0===s.length&&(s=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=s;var r=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset");if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar")),!this.toolbar.length)if(a=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach(function(t){"input"===t.type&&(i=!0)}),this.settings.title&&this.settings.modalSettings.centerTitle||this.settings.modalSettings.title&&this.settings.modalSettings.centerTitle){var o=i?'<div class="toolbar-section search"></div>':"",l='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.title,"</h2>\n          </div>\n          ").concat(o,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(l)}else if(!r.length){var c=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",d=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.title,"</h2></div>"):"",u=this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",h='<div class="'.concat(u,'"></div>'),p=this.settings.modalSettings.useFlexToolbar&&i?'<div class="toolbar-section search"></div>':"",f='<div class="'.concat(c,'">\n          ').concat(d,"\n          ").concat(p,"\n          ").concat(h,"\n        </div>"),g=$(f);g.appendTo(this.panel.find(".modal-header")),this.toolbar=g,r=g.children(".buttonset")}if(this.toolbar.appendTo(this.header),!a){r&&(r.length||this.settings.modalSettings.centerTitle)||(r=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var m=this.toolbar.find(".title");if(!m.length){var v=this.settings.modalSettings.centerTitle?" center-text":"";m=$('\n          <div class="toolbar-section title'.concat(v,'">\n            <h2>').concat(this.title,"</h2>\n          </div>\n        ")),r?m.insertBefore(r):this.toolbar.prepend(m)}m.length||(m=$('\n          <div class="title">\n            '.concat(this.title,"\n          </div>\n        ")),this.toolbar.prepend(m))}if(n||this.panel.detach().appendTo("body"),this.element.attr("data-modal")||this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var b=R.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(b,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(b,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var y=$('<div class="toolbar-section static"></div>').append(this.closeButton),w=this.toolbar.find(".toolbar-section.more");y.insertAfter(w.length?w:r)}else r.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),C.fixSVGIcons(this.element),this},handleEvents:function(){var t=this,e=this;function n(t){e.element.triggerHandler(t.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",function(t){n(t),e.panel.removeClass("is-animating")}).off("close.contextualactionpanel").on("close.contextualactionpanel",function(t){n(t)}).off("beforeclose.contextualactionpanel").on("beforeclose.contextualactionpanel",function(t){n(t)}).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",function(i){e.settings.initializeContent&&$(t).initialize(),n(i)}).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",function(){if(e.toolbar&&e.toolbar.trigger("recalculate-buttons"),e.toolbar.length){var t=e.toolbar.find(".buttonset > .is-selected");if(t.length||(t=e.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(t=t.children(".searchfield")),!t.length&&e.toolbar.is(".flex-toolbar"))return void(t=e.toolbar.find("button").first()).focus();var n=e.toolbar.data("toolbar");n&&n.setActiveButton(t,!0)}e.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),C.fixSVGIcons(e.panel)}),e.closeButton&&e.closeButton.length&&e.closeButton.on("click.contextualactionpanel",function(){e.handleToolbarSelected()}),this},handleToolbarSelected:function(){this.close(!0)},teardown:function(){var t=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeclose.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),t.children("*:not(.searchfield)").off("click.contextualactionpanel"),t.children(".btn-menu").each(function(){var t=$(this).data("popupmenu");t&&t.destroy()}),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"immediate"===this.settings.modalSettings.trigger&&(t=!0),this.modalAPI&&this.modalAPI.close(t,!1,e)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=Vn(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel"),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){J.destroyAll(!0)}},$.fn.contextualactionpanel=function(t){return this.each(function(){var e,n,i=null==t||null===(e=null==t?void 0:t.modalSettings)||void 0===e||null==e?void 0:e.id;!i&&null!=t&&(null==t?void 0:t.content)&&(null==t||null==t?void 0:t.content)instanceof jQuery&&(i=null==t||null===(n=null==t?void 0:t.content)||void 0===n||null==n?void 0:n.attr("id"));var a=J.findById(i);a?a.updated(t):$.data(this,"contextualactionpanel",new jn(this,t))})};var Wn=["standard","range"],Un=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:Wn[0],roundToInterval:!0,parentElement:null,returnFocus:!0,attributes:null,tabbable:!0}};function Gn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Un),this.init()}Gn.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=R.getLocale(this.settings.language),n=R.getLocale(this.settings.locale);return $.when(n,e).done(function(e,n){t.locale=R.cultures[e]||R.currentLocale,t.language=n||t.settings.language||t.locale.language||null,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents().addAttributes()}),this},setCurrentCalendar:function(){return this.currentCalendar=R.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function t(t,e){(!e||["minute","second"].indexOf(e)<0)&&(e="minute");var n=Un()["".concat(e,"Interval")];if(void 0===t||isNaN(t))return n;var i=parseInt(t,10);return i>0&&i<60?i:n}function e(t){return!0===t}var n;return this.id="".concat(C.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=e(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=t(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(n=24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat)&&n.toUpperCase().match("H")&&n.match("mm")?n:Un().timeFormat,this.settings.minuteInterval=t(this.settings.minuteInterval,"minute"),this.settings.secondInterval=t(this.settings.secondInterval,"second"),this.settings.mode=function(t){return $.inArray(t,["standard","range"])>-1?t:Un().mode}(this.settings.mode),this.settings.roundToInterval=e(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){if(this.setup(),this.element.attr("autocomplete","off"),this.settings.parentElement)return this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this;var t=this.element.next();return t.is("button.trigger")?this.trigger=t:this.trigger=$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon("clock"),"\n      </button>")).insertAfter(this.element),this.element.is(":disabled")&&this.disable(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.addAria().addMask().handleEvents().roundMinutes(),this},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(R.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>"));var t=R.translate("TimepickerTriggerButton");return this.trigger.children("span.audible").text(t),this},addAttributes:function(){C.addAttributes(this.element,this,this.settings.attributes),C.addAttributes(this.trigger,this,this.settings.attributes,"trigger")},handleKeys:function(){var t=this;this.element.on("keydown.timepicker",function(e){var n=!1;return 27===e.which&&t.isOpen()&&(n=!0,t.closeTimePopup()),40!==e.which||t.isOpen()||(n=!0,t.openTimePopup()),!n||(e.stopPropagation(),e.preventDefault(),!1)})},handleBlur:function(){var t=this;this.element.on("blur.timepicker",function(){t.roundMinutes(),setTimeout(function(){t.isOpen()&&0===t.popup.find(":focus").length&&t.closeTimePopup()},20)})},is24HourFormat:function(t){return t||(t=this.settings.timeFormat),!!t&&(t.match("H")||[]).length>0},hourText:function(t){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&t<10?"0":"")+t},hasSeconds:function(t){return t||(t=this.settings.timeFormat),(t.match("ss")||[]).length>0},hasDayPeriods:function(t){return t||(t=this.settings.timeFormat),(t.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(E.toBoolean(this.settings.roundToInterval)){var t=this.element.val(),e=this.getTimeSeparator(),n=t?t.split(e):[],i=this.settings.minuteInterval;if(n[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var a=n[1].split(" ");n[1]=a[0],a[1]&&n.push(a[1])}if(n[1]=parseInt(n[1],10),n[1]%i!=0){n[1]=Math.round(n[1]/i)*i,n[1]=n[1].toString(),n[1]=(n[1].length<2?"0":"")+n[1],"60"===n[1]&&(n[1]="00",n[0]=(parseInt(n[0],10)+1).toString());var s="".concat(n[0]+e+n[1]," ").concat(n[2]?n[2]:"");this.element.val(s)}}}},addMask:function(){this.element.data("mask")&&"object"===a(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var t={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),t&&this.element.mask(t),this},buildStandardPopup:function(){var t,e=this,n=$('<div class="timepicker-popup-content"></div>'),i=this.getTimeSeparator(),a="";this.initValues=e.getTimeFromField();var s=$('<div class="time-parts"></div>').appendTo(n),r=this.is24HourFormat(),o=this.hasSeconds(),l=this.hasDayPeriods(),c=r?0:1,d=r?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));c<d;)t="",parseInt(e.initValues.hours,10)===c&&(t=" selected"),e.hourSelect.append($("<option".concat(t,">").concat(e.hourText(c),"</option>"))),c++;var u=$('<div class="time-part"></div>');u.append($('<label for="'.concat(this.hoursId,'">').concat(R.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),u.append(this.hourSelect),u.append($('<span class="label colons">'.concat(i,"</span>"))),s.append(u);var h=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));h<=59;)a=h<10?"0".concat(h):h,t="",parseInt(e.initValues.minutes,10)===h&&(t=" selected"),e.minuteSelect.append($("<option".concat(t,">").concat(a,"</option>"))),h+=e.settings.minuteInterval;this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(e.initValues.minutes,"</option>")));var p=$('<div class="time-part"></div>');if(p.append($('<label for="'.concat(this.minutesId,'">').concat(R.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),p.append(this.minuteSelect),o&&p.append($('<span class="label colons">'.concat(i,"</span>"))),s.append(p),o){var f=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));f<=59;)a=f<10?"0".concat(f):f,t="",(parseInt(e.initValues.seconds,10)===f||!e.initValues.seconds&&"00"===a)&&(t=" selected"),this.secondSelect.append($("<option".concat(t,">").concat(a,"</option>"))),f+=e.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(e.initValues.seconds,"</option>")));var g=$('<div class="time-part"></div>');g.append($('<label for="'.concat(this.secondsId,'">').concat(R.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),g.append(this.secondSelect),s.append(g)}if(!r&&l){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),s.append($('<span class="label colons"></span>'));for(var m=this.currentCalendar.dayPeriods,v=0,b=new RegExp(e.initValues.period,"i");v<2;)t="",b.test(m[v])&&(t=" selected"),this.periodSelect.append($('<option value="'.concat(m[v],'"').concat(t,">").concat(m[v],"</option>"))),v++;var y=$('<div class="time-part"></div>');y.append($('<label for="'.concat(this.periodId,'">').concat(R.translate("Period",{locale:this.locale.name,language:this.language}),"</label>"))),y.append(this.periodSelect),s.append(y)}if(this.settings.parentElement)this.settings.parentElement.append(n),e.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{n.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(R.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var w=this.element,x=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(x="center",w=this.element.next(".icon, .trigger")),this.trigger.popover({content:n,trigger:"immediate",placement:"bottom",placementOpts:{parent:w,parentXAlignment:x,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",function(t,n){e.afterShow(n)}).on("hide.timepicker",function(){e.settings.returnFocus&&e.element.focus()})}this.trigger.data("popover")&&(e.popup=this.trigger.data("popover").tooltip,e.popup.addClass("timepicker-popup"))},afterShow:function(t){var e=this;t.find("button").button();var n=this.hourSelect.data("dropdown");this.hourSelect.val(this.initValues.hours),n.pseudoElem.find("span").text(this.initValues.hours),n.renderPseudoElemLabel(),C.addAttributes(n.wrapper.find(".dropdown"),this,this.settings.attributes,"hours");var i=this.minuteSelect.data("dropdown");if(this.minuteSelect.val(this.initValues.minutes),i.pseudoElem.find("span").text(this.initValues.minutes),i.renderPseudoElemLabel(),C.addAttributes(i.wrapper.find(".dropdown"),this,this.settings.attributes,"minutes"),this.secondSelect){var a=this.secondSelect.data("dropdown");this.secondSelect.val(this.initValues.seconds),a.pseudoElem.find("span").text(this.initValues.seconds),a.renderPseudoElemLabel(),C.addAttributes(a.wrapper.find(".dropdown"),this,this.settings.attributes,"seconds")}if(e.hasDayPeriods()){var s=this.periodSelect.data("dropdown");this.periodSelect.val(this.initValues.period),s.pseudoElem.find("span").text(this.initValues.period),s.renderPseudoElemLabel(),C.addAttributes(s.wrapper.find(".dropdown"),this,this.settings.attributes,"period")}t.find("div.dropdown").first().focus(),t.find(".set-time").off("click.timepicker").on("click.timepicker",function(t){t.preventDefault(),e.setTimeOnField(),e.closeTimePopup()}),C.addAttributes(t.find(".set-time"),this,this.settings.attributes,"btn"),this.settings.parentElement||t.on("keydown.timepicker","button, div.dropdown",function(t){return 9!==(t.keyCode||t.charCode||0)||(e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)})},containFocus:function(t){var e=t.shiftKey,n=this.popup.find(":focusable"),i=n.index($(":focus")),a=i+1>=n.length?0:i+1,s=i-1<0?n.length:i-1;i=e?s:a,n.eq(i).focus()},setupStandardEvents:function(){var t=this;t.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",function(t){t.preventDefault(),t.target.click()}).on("keydown.timepicker","input.dropdown",function(e){var n=!1;if(27===e.which&&(n=!0,t.closeTimePopup(),t.element.focus()),32===e.which&&(n=!0,t.popup.find(".set-time").click()),37===e.which||39===e.which){n=!0;var i=t.popup.find('input[id$="-shdo"]');if(37===e.which){var a=i.eq(i.index(this)-1);a&&0!==a.length||(a=i.eq(i.length)),a.focus()}if(39===e.which){var s=i.eq(i.index(this)+1);s&&0!==s.length||(s=i.eq(0)),s.focus()}}return!n||(e.preventDefault(),e.stopPropagation(),!1)}),t.trigger.on("hide.timepicker",function(){t.onPopupHide()})},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(t){var e,n,i=this,a=t||this.element.val(),s=this.getTimeSeparator(),r={},o=this.settings.timeFormat,l=!!this.dayPeriods.filter(function(t){return t.indexOf(".")>-1}).length&&a.indexOf(".")>-1&&o.indexOf("a")>-1&&o.indexOf("ah")<0&&!this.is24HourFormat();(a=a.replace(l?/[T\s:-]/g:/[T\s:.-]/g,s).replace(/z/i,"")).indexOf(s)<0&&4===a.length&&"HHmm"===i.settings.timeFormat&&(a="".concat(a.substr(0,2)).concat(s).concat(a.substr(2))),e=(a=a.replace("\u5348","\u5348".concat(s))).split(s);var c="ah"===o.slice(0,2)&&!$(".datepicker").length>0,d=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),u=-1!==d&&d<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");this.is24HourFormat()||!u||c||(e=[e[1],e[2],e[0]]);var h,p=this.currentCalendar.dayPeriods;function f(t){return t.replace(/^\s+|\s+$/g,"")}function g(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}return e[2]&&(p[0].indexOf(".")>-1||p[1].indexOf(".")>-1)&&(p[0].replace(".","")===e[2]&&(e[2]=p[0]),p[1].replace(".","")===e[2]&&(e[2]=p[1])),this.is24HourFormat()||u||(n=e[e.length-1].split(" "),e.pop(),e=e.concat(n)),e[0]&&e[0].length&&!isNaN(e[0])||(e[0]="1"),e[0]=parseInt(e[0],10),isNaN(e[0])||(e[0]="".concat(parseInt(e[0],10))),r.hours=i.hourText(e[0]),e[1]?(e[1]=f(e[1]),e[1]=g(e[1]),r.minutes=e[1]):r.minutes="00",(h=e[2])?(h=f(h),i.hasSeconds()?(h=g(h),r.seconds=h):(function(t){return i.dayPeriods.indexOf(t)>-1}(h)||(h=i.translateDayPeriod("AM")),r.period=h)):(i.hasSeconds()&&(h="00",r.seconds=h),i.is24HourFormat()||(h=i.translateDayPeriod("AM"),r.period=h)),e[3]?(e[3]=f(e[3]),r.period=e[3]):!this.is24HourFormat()&&this.hasSeconds()&&(r.period=this.translateDayPeriod("AM")),r},getTimeFromField2:function(t){function e(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}var n=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,i=this.hasSeconds()?"timestamp":"hour",a=R.parseDate(t||this.element.val(),{date:i}),s=(a?a.getHours():"1").toString(),r=(s>=12?this.translateDayPeriod("PM"):this.translateDayPeriod("AM")).toString();!this.is24HourFormat()&&s>12&&(s=(parseInt(s,10)-12).toString()),this.is24HourFormat()||"0"!==s||(s="12");var o=n.indexOf("a")>-1?r:void 0,l=a?a.getMinutes():"00",c=a?a.getSeconds():"00";return{hours:e(s),minutes:e(l),seconds:e(c),period:o}},translateDayPeriod:function(t){return/am|pm|AM|PM/i.test(t)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(t)?0:1]:t},setTimeOnField:function(){var t,e,n,i,a=this.hourSelect?null===(t=this.hourSelect[0])||void 0===t||null==t?void 0:t.value:"",s=this.minuteSelect?null===(e=this.minuteSelect[0])||void 0===e||null==e?void 0:e.value:"",r=this.secondSelect?null===(n=this.secondSelect[0])||void 0===n||null==n?void 0:n.value:"",o=this.periodSelect?null===(i=this.periodSelect[0])||void 0===i||null==i?void 0:i.value:"",l=this.getTimeSeparator(),c="".concat(a).concat(l).concat(s).concat(this.hasSeconds()?l+r:"");(c+=(o=this.is24HourFormat()||""!==o?o:document.querySelector("#".concat(this.periodId,"-shdo")).value)?" ".concat(this.translateDayPeriod(o)):"").indexOf(l)>-1&&"HHmm"===this.settings.timeFormat&&(c=c.replace(l,"")),this.element.val(c).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){this.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&this.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===this.settings.mode?(this.buildRangePopup(),this.setupRangeEvents()):(this.buildStandardPopup(),this.setupStandardEvents()),this.trigger.data("popover")&&this.element.attr("aria-expanded","true"),this.popup.find("div.dropdown").first().focus())},closeTimePopup:function(){this.trigger.data("popover")&&(this.trigger.data("popover").hide(),this.element.attr("aria-expanded","false"))},onPopupHide:function(){if("standard"===this.settings.mode){var t=this.hourSelect,e=this.minuteSelect,n=this.secondSelect,i=this.periodSelect;t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),this.hasSeconds()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.hasDayPeriods()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("popover").destroy(),this.trigger.data("popover",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(t){var e=this.element.val();if(!t||!1===t)return e;var n=this.currentCalendar.dateFormat.timeSeparator,i=new RegExp(n,"g"),a=(e=e.replace(i,"")).split(" ");return a[0].length<4&&(e="0".concat(a[0]).concat(a[1]?a[1]:"")),e},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},makeTabbable:function(t){this.trigger.attr("tabIndex",t?0:-1)},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker click.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var t=this.element.data("mask");return t&&"function"==typeof t.destroy&&t.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function(){var t=this;return this.trigger.off("click.timepicker").on("click.timepicker",function(){t.toggleTimePopup()}),this.label&&this.label.off("click.timepicker").on("click.timepicker",function(){t.element[0].focus()}),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(t){return this.each(function(){var e=$.data(this,"timepicker");e?e.updated(t):e=$.data(this,"timepicker",new Gn(this,t))})};var Yn=new function(){var t=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,e){return!(!("placeholder"in document.createElement("input"))&&e&&(t===e.attr("placeholder")||t===R.translate("Required")))&&("string"==typeof t?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),0!==$.trim(t).length):"number"==typeof t?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var e=t.attr("name");return e&&e.length&&$('input[name="'.concat(e,'"]:radio:checked')).length},check:function(t,e){return this.message=R.translate("Required"),!(!$(e).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(e.is(":radio")?this.isRadioChecked(e):this.isNotEmpty(t,e))},message:"Required",type:"error",id:"required"},date:{check:function(t,e,n){if(this.message=R.translate("InvalidDate"),n&&n.column){var i=n.column.formatter(n.row,n.cell,t,n.column,!0);if(i instanceof Date)return i&&i.getTime&&!isNaN(i.getTime())}if(t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var a=t.indexOf(":")>-1?R.calendar().dateFormat.datetime:R.calendar().dateFormat.short,s=null;if(e&&e.data("datepicker")&&((s=e.data("datepicker")).settings.showTime&&(this.message=R.translate("InvalidDateTime")),a=s.pattern),n&&n.column){var r=n.column;"string"==typeof r.sourceFormat?a=n.column.sourceFormat:"string"==typeof r.dateFormat&&(a=n.column.dateFormat)}var o=!("MMMM"===a||"MMM"===a||"MM"===a||"MMMM d"===a||"d MMMM"===a||"yyyy"===a);return s&&(a={locale:s.locale.name,pattern:a,calendarName:s.currentCalendar.name}),!(void 0===R.parseDate(t,a,o)&&""!==t)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(e,n,i){this.message=R.translate("UnavailableDate");var s=!0;if(""===e)return s;if(!t.rules.date.check(e,n))return s=!1,this.message="",s;var r=n.data("datepicker"),o=r?r.settings:{};if(i&&i.column){var l=i.column.formatter(i.row,i.cell,e,i.column,!0);l instanceof Date&&(e=l),i.column.editorOptions&&(o=i.column.editorOptions)}if(!o||!o.disable)return!0;var c,d,u,h,p=Object.keys(o.disable).length>0,f=e;if("string"==typeof f){var g="locale"!==o.dateFormat?o.dateFormat:R.calendar().dateFormat.short;if(o.showTime){var m=o.timeFormat||R.calendar().timeFormat;g.indexOf(m)<0&&(g+=" ".concat(m))}if(r&&r.isIslamic&&(g={pattern:r.pattern,locale:r.locale.name}),i&&i.column){var v=i.column;v.sourceFormat?g="string"==typeof v.sourceFormat?{pattern:v.sourceFormat}:v.sourceFormat:v.dateFormat&&(g="string"==typeof v.dateFormat?{pattern:v.dateFormat}:v.dateFormat)}f=R.parseDate(f,g)}r&&r.isIslamic&&f instanceof Date&&(f=R.umalquraToGregorian(f.getFullYear(),f.getMonth(),f.getDate()));var b=o.useUTC?R.dateToUTC(f):f;if(b&&p&&"function"==typeof o.disable.callback)return!o.disable.callback(b.getFullYear(),b.getMonth(),b.getDate());if(b instanceof Array)return s;if(b&&p){u=o.useUTC?R.dateToUTC(new Date(o.disable.minDate)).setHours(0,0,0,0):new Date(o.disable.minDate).setHours(0,0,0,0),h=o.useUTC?R.dateToUTC(new Date(o.disable.maxDate)).setHours(0,0,0,0):new Date(o.disable.maxDate).setHours(0,0,0,0),o.disable.dayOfWeek&&-1!==o.disable.dayOfWeek.indexOf(b.getDay())&&(s=!1);var y=b.getFullYear();if(((b=b.setHours(0,0,0,0))<=u||b>=h)&&(s=!1),/string|number/.test(a(o.disable.years))&&(o.disable.years=[o.disable.years]),o.disable.years)for(var w=0,x=o.disable.years.length;w<x;w++)if(y===Number(o.disable.years[w])){s=!1;break}if(o.disable.dates)for(o.disable.dates.length&&"string"==typeof o.disable.dates&&(o.disable.dates=[o.disable.dates]),c=0,d=o.disable.dates.length;c<d;c++)if(b===(o.useUTC?R.dateToUTC(o.disable.dates[c]):new Date(o.disable.dates[c])).setHours(0,0,0,0)){s=!1;break}}return p&&(s=!!(s&&!o.disable.isEnable||!s&&o.disable.isEnable)),s},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(e,n){var i=this;this.message=R.translate("rangeDate");var a=!0,s=n.data("datepicker");if(s){var r=s.settings,o=e.split(r.range.separator),l=function(e,s){n.val(s),i.message="".concat(t.rules[e].message," (").concat(s,")"),t.rules[e].check(s,n)||(a=!1)};if(e.indexOf(s.pattern)>-1){if(1===o.length)l("date",o[0]);else if(2===o.length){var c=o[0]===s.pattern?1:0;l("date",o[c]),a&&l("availableDate",o[c])}}else 1===o.length?(l("date",o[0]),a&&l("availableDate",o[0])):2===o.length&&(l("date",o[0]),a&&l("date",o[1]),a&&l("availableDate",o[0]),a&&l("availableDate",o[1]))}return n.val(e),a},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){return this.message=R.translate("EmailValidation"),!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(e,n){var i=n.closest(".signin").find('button[type="submit"]');return e.length&&(t.rules.email.check(e)||t.rules.passwordConfirm.check(e,n))?i.enable():i.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(e,n){if($.trim(e).length&&!n.is("[readonly]")){t.rules.emailPositive.positive=!0,this.message=R.translate("EmailValidation");var i=t.rules.email.check(e,n);return i&&(this.message=""),i}return t.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){return this.message=R.translate("PasswordValidation"),!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(e,n){this.message=R.translate("PasswordConfirmValidation");var i=$('input[type="password"]:not('.concat(n.attr("id"),")"),n.closest(".signin")).eq(0).val(),a=e===i&&t.rules.passwordReq.check(i);return!e.length||a},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,e){t=t.replace(/ /g,""),this.message=R.translate("InvalidTime");var n=e&&e.data("timepicker"),i=n?e.data("timepicker").settings:{},a=i&&i.timeFormat?i.timeFormat:R.calendar().timeFormat;if(e.attr("data-options")&&i&&!i.timeFormat){var s=JSON.parse(e.attr("data-options"));s.patternOptions&&s.patternOptions.format&&(a=s.patternOptions.format)}var r,o=(a.match("HH")||a.match("H")||[]).length>0,l=o?24:12,c=t.indexOf(R.calendar().dateFormat.timeSeparator),d=0,u=0,h=0;if(""===t)return!0;if(d=parseInt(t.substring(0,c),10),u=parseInt(t.substring(c+1,c+3),10),n&&(d=(r=n.getTimeFromField()).hours,u=r.minutes,n.hasSeconds()&&(h=r.seconds)),d.toString().length<1||isNaN(d)||parseInt(d,10)<0||parseInt(d,10)>l)return!1;if(u.toString().length<1||isNaN(u)||parseInt(u,10)<0||parseInt(u,10)>59)return!1;if(h.toString().length<1||isNaN(h)||parseInt(h,10)<0||parseInt(h,10)>59)return!1;if(!o){if(parseInt(d,10)<1)return!1;var p=new RegExp(R.calendar().dayPeriods[0],"i"),f=new RegExp(R.calendar().dayPeriods[1],"i");if(0===(t.match(p)||t.match(f)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return"1"===t},message:"Value is not valid (test).",type:"error",id:"test"}}},Kn={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Xn(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,Kn),this.init()}Xn.prototype={init:function(){this.show()},show:function(){var t=this,e=this.settings,n=parseFloat(A.convertDelayToFPS(e.timeout)),i=e.allowLink?u.stripTags(e.message,"<a><br><p>"):u.stripHTML(e.message),a=!1,s=100;this.uniqueId=e.uniqueid?this.generateUniqueId("usersettings-position"):"";var r=$("#toast-container".concat(this.uniqueId)),o=$('\n      <div class="toast">\n        <span aria-relevant="additions text" aria-live="polite">\n          <span class="toast-title">'.concat(u.stripHTML(e.title),'</span>\n          <span class="toast-message">').concat(i,"</span>\n        </span>\n      </div>")),l=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(R.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(R.translate("Close"),"</span>\n      </button>\n    ")),c=$('<div class="toast-progress"></div>');r.length||(r=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container"></div>')).appendTo("body")),r.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(e.position.replace(" ","-"))),e.timeout=e.audibleOnly?100:e.timeout,e.progressBar&&o.append(c),r.append(o),o.addClass(e.audibleOnly?"audible":"effect-scale"),o.append(l),t.createDraggable(o,r);var d=r.children().length;this.toastIndex=d;for(var h=0,p=this.element.find(".toast-container").children();h<p.length;h++)d=p.length;C.addAttributes(o,this,this.settings.attributes),C.addAttributes(o.find("button"),this,this.settings.attributes,"btn-close");var f=new W({duration:A.convertDelayToFPS(e.timeout),timeoutCallback:function(){t.remove(o,d)},updateCallback:function(t){s=(t.duration-t.elapsedTime)/n*100,R.isRTL()&&(s=100-s),e.progressBar&&(c[0].style.width="".concat(s,"%"))}});function g(e){f.destroy(!0),t.remove(e,d)}G.register(f),$(document).on("keydown.toast-".concat(d," keyup.toast-").concat(d),function(t){var e=(t=t||window.event).which||t.keyCode;t.ctrlKey&&80===e&&(a="keydown"===t.type,f[a?"pause":"resume"]()),"keydown"===t.type&&27===e&&(t.stopImmediatePropagation(),t.preventDefault(),g(o))}),o.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",function(t){a=!!/mousedown|touchstart/i.test(t.type),f[a?"pause":"resume"]()}),l.on("click.toast",function(){g(o)})},createDraggable:function(t,e){var n=this;if(this.settings.draggable&&t[0]&&e[0]){var i=m.features.touch,a=e.parent();e.css({top:"",left:"",right:""});var s=e[0].getBoundingClientRect(),r=this.restorePosition(),o=s;r&&((o={top:r.top,left:r.left,width:t.outerWidth(),height:t.outerHeight()}).right=o.left+o.width,o.bottom=o.top+o.height,this.isPosInViewport(o)||(o=s));var l={top:"".concat(o.top,"px"),left:"".concat(o.left,"px")};e.is(".toast-bottom-right, .toast-top-right")&&(l.right="auto"),e.css(l),e.addClass("is-draggable"),t.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",function(t){i||t.preventDefault(),$(t.target).is("a, .btn-close")||e.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",function(){t.stopImmediatePropagation(),e.attr("aria-grabbed","true"),a.attr("aria-dropeffect","move")}).off("dragend.toast").on("dragend.toast",function(){e.removeAttr("aria-grabbed"),a.removeAttr("aria-dropeffect"),n.savePosition({left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))});var t=e.data("drag");t&&"function"==typeof t.destroy&&t.destroy()})});var c=function(t){var e=t.dragApi,n=t.x,i=t.y,a=e.getElementsFromPoint(n,i)[0];return!$(a).closest(".toast").length},d=function(t){var e=$.Event("keyup");$.extend(e,{ctrlKey:!0,altKey:!0,keyCode:80}),t.trigger(e)},u=$(document);u.off("mouseup.toast").on("mouseup.toast",function(t){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var i=e.data("drag");if(i&&"function"==typeof i.getElementsFromPoint){var a={dragApi:i,x:t.pageX,y:t.pageY};c(a)&&d(u)}}}).off("touchend.toast").on("touchend.toast",function(t){if(1===$("#toast-container".concat(n.uniqueId," .toast")).length){var i=e.data("drag");if(i&&"function"==typeof i.getElementsFromPoint){var a=t.originalEvent;if(a.targetTouches.length>1)return;var s=a.changedTouches[0],r={dragApi:i,x:s.pageX,y:s.pageY};c(r)&&d(u)}}})}},savePosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(t)&&(localStorage[this.uniqueId]=JSON.stringify(t),this.element.triggerHandler("settingschanged",[t]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var t=localStorage[this.uniqueId];return t?JSON.parse(t):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},generateUniqueId:function(t){return t=null==t?"":t,"toast-".concat(this.settings.uniqueid||"","-").concat(t).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(t){return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(t,e){return t.closest(".toast-container").off("dragstart.toast dragend.toast"),t.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),t.find(".btn-close").off("click.toast"),void 0!==e&&$(document).off(["keydown.toast-".concat(e),"keyup.toast-".concat(e)].join(" ")),this},remove:function(t,e){var n=this,i=function(){t.remove(),!$("#toast-container".concat(n.uniqueId," .toast")).length&&n.destroy()};if(this.unbind(t,e),this.settings.audibleOnly)i();else{t.attr("aria-live","").attr("aria-relevent","").hide(),t.addClass("effect-scale-hide");var a=new W({duration:20,updateCallback:function(){},timeoutCallback:function(){i()}});G.register(a)}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,Kn)),this.show()},destroy:function(){var t=this,e=$("#toast-container".concat(this.uniqueId));e[0]&&[].slice.call(e[0].querySelectorAll(".toast")).forEach(function(e){t.settings.audibleOnly=!0,t.remove($(e))}),$(document).off(["mouseup.toast","touchend.toast"].join(" ")),e.remove(),delete this.toastIndex,delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(t){return this.each(function(){var e=$.data(this,"toast");e?e.updated(t):e=$.data(this,"toast",new Xn(this,t))})};var Qn={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function Jn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Qn),this.init()}Jn.prototype={init:function(){this.fields="input, textarea, select, div[data-validate], div[data-validation]",this.isPlaceholderSupport=!!("placeholder"in document.createElement("input")),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(t){if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===a(t)){var e="";for(var n in t)-1===e.indexOf(t[n])&&(e+="".concat(t[n]," "));t=e=e.split(" ").join(".validate ")}return t},filterValidations:function(t,e){var n=[];if(!t)return[];if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===a(t))for(var i in t)e&&t[i].indexOf(e)>-1&&n.push(i);return n},setErrorIconOpacity:function(t){if(t.is(":text")&&t.is('[data-error-type="tooltip"]')){var e=this.calculateTextWidth(t.val()),n=t.outerWidth()-35;t.closest(".field, .field-short").find(".icon-error")[e>n?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d");return n.font=e||"14px arial",n.measureText(t).width},attachEvents:function(){var t=this,e="[data-validate],[data-validation]";this.inputs.each(function(){var t=$(this),e=t.attr("data-validate")||t.attr("data-validation");e&&e.indexOf("required")>-1&&t.addClass("required")}),this.inputs.filter("input, textarea, div").filter(e).not("input[type=file]").each(function(){var e=$(this),n=e.attr("data-validation-events"),i=t.extractEvents(n||"blur.validate change.validate keyup.validate");i.indexOf("enter.validate")>-1&&e.off("keypress.enter.validate").on("keypress.enter.validate",function(e){var n=$(this);13===e.which&&t.validate(n,!0,e)}),e.off(i).on(i,function(n){if("keyup"===n.type){if(9===n.keyCode)return;t.setErrorIconOpacity(e)}var i=$(this),a=i.data("handleEvent".concat([n.type||""]));(!i.is("[readonly]")||i.parent().is(".field-fileupload")||i.is(".lookup.is-not-editable"))&&(!a||a.type!==n.type||"validate"!==n.handleObj.namespace||i.is(".lookup")||i.closest(".modal:visible").length)&&(i.data("handleEvent".concat([n.type||""]),n.handleObj),setTimeout(function(){i.closest(".modal-engaged").length&&!i.closest(".modal-body").length||t.validate(e,!0,n)},300))})}),this.inputs.filter("input[type=checkbox]").filter(e).off("click.validate").on("click.validate",function(e){t.validate($(this),!0,e)}),this.inputs.filter(":radio").off("click.validate").on("click.validate",function(e){var n=$(this).parent().find(".radio").first();t.validate(n,!0,e)});var n=this.inputs.filter("select").filter(e);n.length&&(n.off("change.validate listopened.validate listclosed.validate").on("change.validate",function(e){t.validate($(this),!0,e)}).on("listopened.validate",function(){var t=$(this),e=t.data("tooltip");e&&document.activeElement===t.data("dropdown").searchInput[0]&&e.hide(),$("#validation-tooltip").hide()}).on("listclosed.validate",function(){var t=$(this),e=t.data("tooltip"),n=t.data("dropdown");m.features.touch&&(n.pseudoElem.focus(),setTimeout(function(){n.pseudoElem.blur()},100)),n&&n.wrapper&&(e=n.wrapper.find(".icon-error").data("tooltip")),e&&document.activeElement!==t.data("dropdown").searchInput[0]&&e.show()}),n.filter(function(){return void 0!==$(this).data("dropdown")}).each(function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",function(e){var n=$(this).closest(".field, .field-short").find("select");t.validate(n,!0,e)})})),this.element.is("form")&&this.element.attr("data-validate-on")&&this.element.off("submit.validate").on("submit.validate",function e(n){n.stopPropagation(),n.preventDefault(),t.validateForm(function(n){t.element.off("submit.validate"),t.element.triggerHandler("validated",n),t.element.data("isValid",n),t.element.on("submit.validate",e)})})},validateForm:function(t){var e,n=this,i=[];n.inputs=this.element.find(n.fields),n.inputs.each(function(t){var e=$(this);if(e.attr("data-validate")){if("true"===e.attr("data-disable-validation")||e.hasClass("disable-validation"))return;for(var a=n.validate(e,!1,t),s=0;s<a.length;s++)i.push(a[s])}}),(e=$).when.apply(e,i).then(function(){t(!0)},function(){t(!1)})},setPrimaryBtn:function(t,e){var n=t.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),i=!0;n.length>0&&n.each(function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var e=null!==t[0].offsetParent;t.is(".required")&&(e&&t.is(".editor")&&!t.html()&&(i=!1),!e&&!t.is("select, :checkbox")||t.val()||t.is(".editor")||(i=!1)),!e&&!t.is("select, :checkbox")||t.isValid()||(i=!1)}}),i?e.removeAttr("disabled"):e.attr("disabled","disabled")},value:function(t){return t.is("input[type=checkbox]")?t.prop("checked"):t.is("div")?t[0].innerHTML:t.val()},getTypes:function(t,e){var n,i=this.filterValidations(t.attr("data-validation-events"),e.type);return n=t.is("input.dropdown")&&t.prev().prev("select").attr("data-validate")?t.prev().prev("select").attr("data-validate").split(" "):t.is("input.dropdown")&&t.prev().prev("select").attr("data-validation")?t.prev().prev("select").attr("data-validation").split(" "):t.attr("data-validation")?t.attr("data-validation").split(" "):t.attr("data-validate")?t.attr("data-validate").split(" "):[],i.length>0&&(n=n.filter(function(t){return-1!==i.indexOf(t)})),"keyup"===e.type&&(n=n.filter(function(t){return"date"!==t&&"time"!==t})),n},setIconOnParent:function(t,e){var n,i,a,s=$.createIcon({classes:["icon-".concat(e)],icon:"".concat(e,"-alert")}),r=t.closest(".tab-panel, .expandable-pane"),o=t.closest(".row.flex-align-bottom"),l=r.attr("id"),c=t.closest(".tab-container, .tab-panel-container, .expandable-area");if(o&&o.length&&($(".".concat(e),o).length?o.addClass("has-messages"):o.removeClass("has-messages")),c.is(".tab-panel-container")&&(c=c.prev(".tab-container")),c.is(".tab-container"))(n=$('.tab-list a[href="#'.concat(l,'"]'),c).closest(".tab")).length?$(".count",n).length&&(n=$(".count",n)):(l=$('a[href="#'.concat(l,'"]'),".popupmenu").closest(".popupmenu").attr("id"),n=$('.tab-list .tab[aria-controls="'.concat(l,'"]'),c),i=l);else{if(!c.is(".expandable-area"))return;n=$('.expandable-header[aria-controls="'.concat(l,'"] .title'),c)}i&&i.length&&(a=r.add($($(i).attr("href"))),$('a[role="menuitem"]',"#".concat(i)).each(function(){a=a.add($($(this).attr("href")))}));var d=$('a[href="#'.concat(r.attr("id"),'"]'),"#".concat(l));r&&$(".".concat(e),r).length||a&&$(".".concat(e),a).length?($(".".concat(e),r).length||(d.removeClass("is-".concat(e)),$(".icon-".concat(e),d).remove()),$(".".concat(e),r).length&&$(".".concat(e),a).length&&!$(".icon-".concat(e),d).length&&d.addClass("is-".concat(e)).append(s),$(".icon-".concat(e),n).length||c.hasClass("module-tabs")||n.addClass("is-".concat(e)).append(s)):((n=n.add(d)).removeClass("is-".concat(e)),$(".icon-".concat(e),n).remove())},validate:function(t,e,n){if(t.data("handleEvent".concat([n.type||""]),null),"true"===t.attr("data-disable-validation")||t.hasClass("disable-validation")||t.is(":disabled"))return[];var i,a,s,r,o,l=this,c=l.getTypes(t,n)||[],d=[],u=[],h=l.value(t),p=t.attr("placeholder");function f(e,n,a,s){!1===(i=Yn.rules[a]).positive&&l.removePositive(t),o=Yn.ValidationTypes[i.type]||Yn.ValidationTypes.error;var r="tooltip"!==t.attr("data-".concat(o.type,"-type"));if(e)0===$.grep(u,function(t){return t===o.type}).length?(s.resolve(),i.positive&&(l.addMessage(t,i,r,n),l.removeMessage(t,i,!0),s.resolve(),l.addPositive(t))):o.errorsForm||s.resolve();else{if(!l.isPlaceholderSupport&&h===p&&i.message!==R.translate("Required"))return;l.addMessage(t,i,r,n),u.push(i.type),o.errorsForm?s.reject():s.resolve()}l.setIconOnParent(t,i.type);var c=l.getField(t).data("".concat(o.type,"message"));e&&c&&c.filter(function(t){return t.id===i.id||i.message}).length>0&&l.removeMessage(t,i,!0);var d=t.closest(".modal").find(".btn-modal-primary").not(".no-validation");d.length&&l.setPrimaryBtn(t.closest(".modal"),d);var f=t.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");f.length&&l.setPrimaryBtn(t.closest("#calendar-popup"),f),"error"===i.type&&t.closest("form").triggerHandler("aftervalidate",{field:t,rule:i,isValid:e})}for(s=0,r=c.length;s<r;s++)i=Yn.rules[c[s]],a=$.Deferred(),i&&(i.async?i.check(h,t,f,a):f(i.check(h,t),e,c[s],a),d.push(a));return d},getField:function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},hasError:function(t){return this.getField(t).hasClass("error")},addMessage:function(t,e,n,i,a){if(!(""===e.message||t.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){a=a||!1;var s=this.getField(t),r=s.data("".concat(e.type,"message")),o=Yn.ValidationTypes[e.type]||Yn.ValidationTypes.error;if(a||s.addClass("icon"===e.type?"custom-icon":e.type),!(r&&r===e.message||r&&r.filter(function(t){return(t.id||t.message)===(e.id||e.message)&&t.message===e.message}).length>0)){var l=e.message;if(r){for(var c=0;c<r.length;c++)l="\u2022 ".concat(r[c].message);l+="<br>\u2022 ".concat(e.message)}r||(r=[]),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),(r=r.filter(function(t){return t.id!==e.id})).push({id:e.id,message:e.message,type:e.type}),s.data("".concat(o.type,"message"),r),void 0!==$.fn.toast&&$("body").toast({title:R.translate(o.titleMessageID),audibleOnly:!0,message:l}),n?(t.data("isValid",!1),this.showInlineMessage(t,e,a)):this.showTooltipMessage(t,l,o.type,i)}}},showIcon:function(t,e){var n=this.getField(t).addClass("icon"===e?"custom-icon":e),i=$.createIconElement({classes:["icon-".concat(e)],icon:e}),a=n.closest(".field, .field-short"),s=t.parent();return 0===a.find("svg.icon-".concat(e)).length?(s.is(".editor-container")&&t.parent().addClass("is-error"),1===t.parent(":not(.editor-container)").find(".btn-actions").length?s.find(".btn-actions").before(i):1===s.find(".data-description").length?s.find(".data-description").before(i):1===s.find(".field-info").length?s.find(".field-info").before(i):t.is("textarea")?t.after(i):t.is(".dropdown, .multiselect")?s.find(".dropdown-wrapper").append(i):(t.is(".spinbox")||t.is(".lookup"),s.append(i)),$(".icon-success",a).remove()):i=a.find("svg.icon-error"),i},showTooltipMessage:function(t,e,n,i){if(!t.is(":radio")){var a=this.showIcon(t,n),s=t;if(t.is(".dropdown, .multiselect")&&void 0!==t.data("dropdown")){var r=t.data("dropdown").pseudoElem;s=r,r.addClass("icon"===n?"custom-icon":n)}t.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===n?"custom-icon":n);var o=a.data("tooltip");o?o.content=e:(a.tooltip({content:e,placement:"bottom",placementOpts:{callback:function(t){var e=s[0].getBoundingClientRect(),n=o.tooltip[0].getBoundingClientRect(),i=$("html").is('[dir="rtl"]'),a=t.x,r=0;return i?n.left<e.left&&(r+=e.left-n.left):n.right>e.right&&(r+=-1*(n.right-e.right)),t.setCoordinate("x",a+r),t.nudges||(t.nudges={}),t.nudges.x=r,t}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),o=a.data("tooltip")),t.on("focus.validate",function(){o&&o.show()}).on("blur.validate",function(){o&&o.hide()}),o&&t.attr("data-error-type","tooltip"),this.setErrorIconOpacity(t),i&&o&&o.show()}},toggleRadioMessage:function(t,e,n,i,a){var s,r,o=t.attr("name");o&&o.length&&(s=$(':radio[name="'.concat(o,'"], :radio[name="').concat(o,'"] + label')),r=t.parent().is(".inline")?$(':radio[name="'.concat(o,'"]:last')).parent():$(':radio[name="'.concat(o,'"]:last + label')),a?(s.addClass("icon"===n?"custom-icon":n),$(i).addClass("radio-group-".concat(n)).insertAfter(r)):(s.removeClass(n),r.next(".radio-group-".concat(n)).remove()))},showInlineMessage:function(t,e,n){n=n||!1;var i,a,s=this.getField(t),r=Yn.ValidationTypes[e.type]||Yn.ValidationTypes.error;e.icon=e.icon||r.icon;var o="".concat(t.attr("id")||"id","-").concat(e.type);a="error"===e.type||st.currentTheme.id&&st.new?"".concat(r.type,"-alert"):"".concat(r.type),i="icon"===e.type?""+'<div id="'.concat(o,'" class="custom-icon-message" data-rule-id="').concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:e.icon}),'\n          <pre class="audible">\n            ').concat(R.translate(r.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"):""+'<div id="'.concat(o,'" class="').concat(r.type,'-message" data-rule-id="').concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(r.type)],icon:a}),'\n          <pre class="audible">\n            ').concat(R.translate(r.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"),t.is(":radio")?this.toggleRadioMessage(t,e.message,r.type,i,!0):(s.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===r.type?"custom-icon":r.type),s.closest(".field, .field-short").append(i),s.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===r.type?"custom-icon":r.type)),n||s.addClass("icon"===e.type?"custom-icon":e.type),t.is(".spinbox")&&s.closest(".spinbox-wrapper").addClass("icon"===r.type?"custom-icon":r.type),"error"===r.type&&t.parent().find(".icon-success").remove(),t.attr("aria-describedby",o),t.attr("aria-invalid","true"),t.triggerHandler(r.type,{field:t,message:e.message}),t.closest("form").triggerHandler(r.type,{field:t,message:e.message})},addPositive:function(t){var e=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",t.parent(".field, .field-short")).length||t.parent(".field, .field-short").append(e)},removeMessage:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getField(t),a=i.data("".concat(e.type,"message")),s=e.id||e.message;if(e&&("error"!==e.type||a)&&0!==a.filter(function(t){return t.id===s}).length){var r=a.filter(function(t){return t.id!==s}),o=0===r.length;if(o?i.removeData("".concat(e.type,"message")):i.data("".concat(e.type,"message"),r),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),o&&"error"===e.type&&n&&(t.triggerHandler("valid",{field:t,message:""}),t.closest("form").triggerHandler("valid",{field:t,message:""})),o&&(t.removeClass("".concat(e.type," custom-icon")).data("isValid",!0),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&(t.next().next().removeClass("".concat(e.type," custom-icon")),t.next().find("div.dropdown").removeClass("".concat(e.type," custom-icon"))),t.is(":radio")&&this.toggleRadioMessage(t,"",e.type,"",!1),t.hasClass("spinbox")&&t.closest(".spinbox-wrapper").removeClass("".concat(e.type," custom-icon")),t.hasClass("colorpicker")&&t.parent(".colorpicker-container").removeClass(e.type),t.closest(".field-fileupload").length>0&&t.closest(".field-fileupload").find("input.".concat(e.type)).removeClass(e.type),t.removeAttr("aria-describedby").removeAttr("aria-invalid"),"tooltip"===t.attr("data-".concat(e.type,"-type")))){var l=t.closest(".field, .field-short").find(".icon-error"),c=l.data("tooltip");c&&c.destroy(),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),t.parent().find(".dropdown-wrapper > .icon-".concat(e.type)).off("click.validate").remove(),t.parent().find(".icon-".concat(e.type)).remove(),t.next(".icon-".concat(e.type)).off("click.validate").remove(),t.parent(".field, .field-short").find(".icon-".concat(e.type)).remove(),t.next(".inforCheckboxLabel").next(".icon-".concat(e.type)).remove()}}},removePositive:function(t){$(".icon-success",t.parent(".field, .field-short")).remove()},resetForm:function(t){var e=t.find("input, select, textarea, div.dropdown, div.editor");e.removeClass("error"),t.find(".error").removeClass("error"),t.find(".icon-error").remove(),t.find(".icon-success").remove(),t.find(".error-message").remove(),e.removeClass("alert"),t.find(".alert").removeClass("alert"),t.find(".icon-alert").remove(),t.find(".alert-message").remove(),e.removeClass("info"),t.find(".info").removeClass("info"),t.find(".icon-info").remove(),t.find(".info-message").remove(),setTimeout(function(){$("#validation-errors").addClass("is-hidden")},300),e.data("isDirty",!1).removeClass("isDirty"),t.find(".isDirty").removeClass("isDirty"),t.is("form")&&t[0].reset();var n=$.fn.validation.ValidationTypes;Object.keys(n).forEach(function(t){e.removeData("".concat(t,"message"))}),e.removeData("isValid")},isFormValid:function(t){if($(t).find(".error-message").length>0)return!1;for(var e=$(t).find('[data-validate*="required"]'),n=0;n<e.length;n++){var i=$(e[n]),a=this.value(i);if((i.is(":visible")||i.is("select"))&&!a)return!1}return!0},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.init()}};var Zn={type:"error",inline:!0};$.fn.validation=Yn,$.fn.getMessage=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),n=$.fn.getField($(this)).data(e),i="";if(n){if(1===n.length)return n[0].message;for(var a=0;a<n.length;a++)i+="\u2022 ".concat(n[a].message)}return i},$.fn.getMessages=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),n=$.fn.getField($(this)).data(e);return n||(n=[]),n},$.fn.getField=function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},$.fn.getErrorMessage=function(t){return B("$.fn.getMessage","$.fn.getErrorMessage"),t=C.extend({},t,Zn),$(this).getMessage(t)},$.fn.scrollIntoView=function(t,e){"boolean"!=typeof t&&(t=void 0);var n=new Jn(this,e).getField($(this));n[0].scrollIntoView(t),n.focus(),n.is("input.checkbox")&&(n=n.next(".checkbox-label"))[0]&&n[0].scrollIntoView(t)},$.fn.addMessage=function(t){return this.each(function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new Jn(this,t)));var n={message:t.message,type:t.type,triggerEvents:t.triggerEvents,icon:t.icon,id:t.id||t.message},i=$(this);e.addMessage(i,n,t.inline,t.showTooltip,t.isAlert),e.setIconOnParent(i,t.type)})},$.fn.addError=function(t){B("$.fn.addMessage","$.fn.addError");var e=!0;return"boolean"==typeof t.inline&&!1===t.inline&&(e=!1),(t=C.extend({},t,Zn)).inline=e,this.each(function(){$(this).addMessage(t)})},$.fn.removeMessage=function(t){return t||(t={type:"error"}),this.each(function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new Jn(this,t)));var n=$(this),i="".concat(t.type,"message"),a=$.fn.getField(n).data(i);if(n.hasClass("error")&&"error"===t.type&&n.removeClass("error"),a){for(var s=0;s<a.length;s++)e.removeMessage(n,a[s],t.triggerEvents);e.setIconOnParent(n,t.type),$.removeData(this,"Validator")}})},$.fn.removeError=function(t){return B("$.fn.removeMessage","$.fn.removeError"),t=C.extend({},t,Zn),this.each(function(){return $(this).removeMessage(t)})},$.fn.validate=function(t,e){var n="string"==typeof t;return this.each(function(){var i=$.data(this,"validate");if(i&&"string"!=typeof i){if(n)return void("function"==typeof i[t]&&i[t](e));i.updated(t)}else i=$.data(this,"validate",new Jn(this,t))})},$.fn.isValid=function(){var t=$(this).data("isValid");return null==t||t},$.fn.validateField=function(){var t=$(this),e=Soho.components.Validator.prototype;e&&e.validate&&e.validate(t,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var ti={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,yearsAhead:5,yearsBack:4,legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1,attributes:null,autocompleteAttribute:"off",tabbable:!0};function ei(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,ti),this.init()}ei.prototype={init:function(){this.build(),this.handleEvents()},build:function(){var t,e=this.settings.autocompleteAttribute;"string"==typeof e&&e.length?this.element.attr("autocomplete","".concat(u.ensureAlphaNumeric(e))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var n=this.element.next();n.is("button.trigger")?this.trigger=n:this.trigger=$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon("calendar"),"\n      </button>")).insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.setExtraAttributes(),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar(),null!==(t=this.trigger)&&void 0!==t&&(null==t?void 0:t.data("button"))||this.trigger.button()},setLocale:function(){var t=this,e=this.settings;this.locale=R.currentLocale,this.settings.language?(R.getLocale(this.settings.language),this.language=this.settings.language):this.language=R.currentLanguage.name,e.locale&&R.getLocale(e.locale).done(function(e){var n=t.getSimilarApi("locale",e);n.forEach(function(n){n.locale=R.cultures[e],n.language=t.settings.language||n.locale.language,n.setCurrentCalendar()}),0===n.length&&(t.locale=R.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar())}),e.language&&R.getLocale(e.language).done(function(){t.getSimilarApi("language",e.language).forEach(function(t){t.language=e.language})})},getSimilarApi:function(t,e){var n=[].slice.call(document.querySelectorAll(".datepicker")),i=[];return n.forEach(function(n){var a=$(n).data("datepicker");a&&a.settings[t]===e&&i.push(a)}),i},setCurrentCalendar:function(){this.currentCalendar=R.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]'));var t=". ".concat(R.translate("PressDown",{locale:this.locale.name,language:this.language})),e=this.label.children("span.audible");e.length?e.text(t):this.label.append('<span class="audible">'.concat(t,"</span>")),this.trigger.children(".audible").text(R.translate("DatePickerTriggerButton"))},handleKeys:function(t){var e=this,n=this.settings;if(t.is("#monthview-popup"))return t.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",function(t){var n=!1,i=t.keyCode||t.charCode||0;return 9===i&&(e.containFocus(t),n=!0),27===i&&(e.closeCalendar(),e.element.focus(),t.stopImmediatePropagation(),n=!0),84===i&&(e.closeCalendar(),e.element.focus(),n=!0),!n||(t.stopPropagation(),t.preventDefault(),!1)}),void t.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",function(t){return 9!==(t.keyCode||t.charCode||0)||(n.range.useRange&&$(t.target).is(".next")&&!n.range.selectWeek?e.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)});t.off("keydown.datepicker").on("keydown.datepicker",function(t){var n,i,a=!1,s=t.keyCode||t.charCode||0,r=(null===(n=e.settings)||void 0===n||null===(i=null==n?void 0:n.dateFormat)||void 0===i||null==i?void 0:i.indexOf("-"))>-1;if(40!==s||e.isOpen()||(a=!0,e.openCalendar(),setTimeout(function(){e.setFocusAfterOpen()},200)),84===s&&(a=!0,e.setToday()),!r){var o=$(t.currentTarget).val();189!==s&&109!==s||(a=!0,e.adjustDay(!1,o)),187!==s&&107!==s||(a=!0,e.adjustDay(!0,o))}return!a||(t.stopPropagation(),t.preventDefault(),!1)})},containFocus:function(t){var e=t.shiftKey,n=this.popup.find(":focusable"),i=$(t.currentTarget);(i.is(".monthview-monthyear-pane, #btn-monthyear-pane")||i.closest(".is-monthyear.is-monthonly").length>0)&&(n=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var a=n.index($(":focus"));a=e?a-1<0?n.length-1:a-1:a+1>=n.length?0:a+1,n.eq(a).focus()},setFormat:function(){var t=this.settings,e="object"===a(R)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,n="object"===a(R)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===a(R)&&this.settings.calendarName&&(e=R.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,n=R.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===a(e)&&void 0!==e.short&&(e=e.short),"locale"===t.dateFormat?(this.pattern=e+(t.showTime?" ".concat(t.timeFormat||n):""),t.dateFormat=this.pattern):this.pattern=t.dateFormat+(t.showTime&&t.timeFormat?" ".concat(t.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){this.setFormat();var t=this.settings,e={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},n="date availableDate",i={date:"change blur enter",availableDate:"change blur"};t.range.useRange&&(e.process="rangeDate",e.patternOptions.delimeter=t.range.separator,n="rangeDate",i={rangeDate:"change blur"}),e.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(e),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":n,"data-validation-events":JSON.stringify(i)}).validate()),this.setPlaceholder()},setPlaceholder:function(){var t,e=this.settings,n=this.pattern;!e.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(e.range.useRange&&(n=e.range.first&&e.range.first.date?(t=e.range.first.date,R.formatDate(t,{pattern:this.pattern,locale:this.locale.name})+e.range.separator+this.pattern):this.pattern+e.range.separator+this.pattern),this.element[0].setAttribute("placeholder",n))},setExtraAttributes:function(){this.settings.attributes&&(C.addAttributes(this.element,this,this.settings.attributes),C.addAttributes(this.trigger,this,this.settings.attributes,"trigger"))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},openCalendar:function(){var t=this,e=this,n=this.settings,i={};if(!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var a='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(R.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),s=' <button type="button" class="is-select btn-primary">\n      '.concat(R.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?s+a:a+s,"\n      </div>")),n.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(R.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(R.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),n.hideButtons&&(this.footer=$("")),n.showTime&&(void 0===n.timeFormat?i.timeFormat=this.pattern.slice(this.pattern.indexOf(" ")).trim():i.timeFormat=n.timeFormat,void 0!==n.minuteInterval&&(i.minuteInterval=n.minuteInterval),void 0!==n.secondInterval&&(i.secondInterval=n.minuteInterval),void 0!==n.mode&&(i.mode=n.mode),void 0!==n.roundToInterval&&(i.roundToInterval=n.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var r=this.settings.timeFormat?this.settings.timeFormat:null;r||(r=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),i.parentElement=this.timepickerContainer,i.locale=this.settings.locale,i.language=this.settings.language,this.time=R.formatDate(this.currentDate,{pattern:r,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(i).data("timepicker"),this.setUseCurrentTime(),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",function(){t.currentDate=t.setTime(t.currentDate),t.setValue(t.currentDate,!0,!0)}),setTimeout(function(){t.timepicker.initValues=t.timepicker.getTimeFromField(t.time),t.timepicker.afterShow(t.timepickerContainer)},1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=R.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.year=this.currentYear,this.settings.month=this.currentMonth,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?R.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.isIslamic?(this.settings.activeDateIslamic=R.gregorianToUmalqura(this.settings.activeDate),this.settings.year=this.settings.activeDateIslamic[0],this.settings.month=this.settings.activeDateIslamic[1]):(this.settings.year=this.settings.activeDate.getFullYear(),this.settings.month=this.settings.activeDate.getMonth())):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentDateIslamic||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(n,i){if(t.currentDate=new Date(i.year,i.month,i.day),e.settings.range.useRange&&e.settings.range.first&&e.settings.range.selectWeek){var a=cn.firstDayOfWeek(new Date,t.settings.firstDayOfWeek),s=cn.lastDayOfWeek(new Date,t.settings.firstDayOfWeek);return e.settings.range.first={},e.settings.range.second=void 0,e.setWeekRange({day:a.getDate(),month:a.getMonth(),year:a.getFullYear()},{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()}),e.closeCalendar(),void e.element.focus()}e.settings.range.useRange&&e.settings.range.first&&!e.settings.range.selectWeek||(e.insertDate(t.currentDate),i.close&&(e.closeCalendar(),e.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(t){return 37!==t.key&&39!==t.key&&38!==t.key&&40!==t.key&&13!==t.key}),this.calendarAPI=new Ln(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,n.showTime&&this.calendar.addClass("is-timepicker"),n.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==n.dateFormat&&"MMM"!==n.dateFormat&&"MM"!==n.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===n.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(n.showTime?this.timepickerContainer:"",this.footer);var o=this.element,l=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(l="center",o=this.element.next(".icon, .trigger"));var c={content:this.calendar,placementOpts:{parent:o,parentXAlignment:l,strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1};this.trigger.popover(c).off("show.datepicker").on("show.datepicker",function(){if(window.innerHeight<400&&t.popupClosestScrollable&&1===t.popupClosestScrollable.length&&(t.popup.find(".arrow").hide(),t.popup.css({"min-height":$("html").hasClass("theme-new-light")?"":"".concat(t.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),t.popupClosestScrollable.css("min-height","375px")),n.range.useRange&&n.range.first&&n.range.first.date&&n.range.second&&n.range.second.date&&t.popup.addClass("is-hidden"),t.settings.hideButtons&&t.popup.addClass("hide-buttons"),t.settings.showMonthYearPicker&&(t.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),t.popup.find(".btn-monthyear-pane").button()),t.settings.range.selectWeek){var e=t.popup.find("tbody");t.popup.find(".monthview-table tr").hover(function(t){var n=$(t.currentTarget);e.find("td").removeClass("is-selected range-selection end-date"),n.find("td").addClass("range-selection")})}}).off("hide.datepicker").on("hide.datepicker",function(){t.popupClosestScrollable.add(t.popup).css("min-height",""),t.closeCalendar()}),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentDateIslamic=this.currentDateIslamic,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",function(){var t=$(this);if(t.hasClass("is-disabled"))e.calendarAPI.activeTabindex(t,!0);else{if(!n.range.useRange||n.range.first&&!n.range.second||n.range.selectWeek||e.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),n.range.useRange&&n.range.selectWeek){var i=e.calendarAPI.getCellDate(e.calendar.find("td.range-selection").first()),a=e.calendarAPI.getCellDate(e.calendar.find("td.range-selection").last());return void e.setWeekRange(i,a)}n.range.useRange||e.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var s=$(this);s.addClass("is-selected".concat(n.range.useRange?" range":"")).attr("aria-selected","true"),e.lastValue=null,e.insertSelectedDate(s),n.range.useRange?e.isFocusAfterClose=!0:(e.closeCalendar(),e.element.focus())}}),this.footer.off("click.datepicker").on("click.datepicker","button",function(t){var i=$(this);if(i.hasClass("is-cancel")&&(e.settings.isMonthPicker||(e.element.val("").trigger("change").trigger("input"),e.currentDate=null,e.clearRangeDates()),e.closeCalendar(),e.element.focus()),i.hasClass("is-cancel-month-pane")&&e.calendarAPI.monthYearPane.data("expandablearea").close(),i.hasClass("is-select-month")||i.hasClass("is-select-month-pane")){var a=parseInt(e.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),s=parseInt(e.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);e.currentDate=new Date(a,s,1),e.isIslamic&&(e.currentDateIslamic[0]=a,e.currentDateIslamic[1]=s,e.currentDateIslamic[2]=1,e.currentYear=a,e.currentMonth=s,e.currentDay=1,e.currentDate=R.umalquraToGregorian(a,s,1)),n.range.useRange?e.isFocusAfterClose=!1:i.hasClass("is-select-month")&&(e.insertDate(e.isIslamic?e.currentDateIslamic:e.currentDate),e.closeCalendar()),i.hasClass("is-select-month-pane")&&e.calendarAPI.showMonth(s,a)}if(i.hasClass("is-select")){var r=e.calendarAPI.setRangeSelByClick();if(1===r)e.closeCalendar();else if(2===r)e.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]),e.closeCalendar();else{if(3===r)return void t.preventDefault();e.insertSelectedDate(),e.closeCalendar()}i.hasClass("is-select-month-pane")||e.element.focus()}t.preventDefault(),i.hasClass("is-select-month-pane")&&(e.calendarAPI.monthYearPane.data("expandablearea").close(),e.popup.find(".btn-primary.is-select").focus())}),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today",function(t){t.preventDefault(),n.range.useRange?(e.setToday(!0),(!n.range.second||n.range.second&&!n.range.second.date)&&t.preventDefault()):(e.setToday(),e.closeCalendar())}),setTimeout(function(){C.addAttributes(t.popup.find(".btn-monthyear-pane"),t,t.settings.attributes,"btn-monthyear"),C.addAttributes(t.popup.find(".is-cancel"),t,t.settings.attributes,"btn-cancel"),C.addAttributes(t.popup.find(".is-select"),t,t.settings.attributes,"btn-select"),e.calendarAPI.validatePrevNext(),e.setFocusAfterOpen()},50)}},setUseCurrentTime:function(){if(this.settings.useCurrentTime&&this.timepicker.minuteSelect.length){var t=this.isSeconds&&this.timepicker.secondSelect.length,e=function(t){return(t<10?"0":"")+t},n=function(t,e){t.find("option:contains(".concat(e,")")).length||(t.find("option:selected").prop("selected",!1),t.prepend($("<option selected >".concat(e,"</option>"))))},i=new Date;n(this.timepicker.minuteSelect,e(i.getMinutes())),t&&n(this.timepicker.secondSelect,e(i.getSeconds())),"string"==typeof this.time&&""!==this.time&&this.currentDate&&this.currentDate.getDate()&&(n(this.timepicker.minuteSelect,e(this.currentDate.getMinutes())),t&&n(this.timepicker.secondSelect,e(this.currentDate.getSeconds())))}},clearRangeDates:function(){var t=this.settings;t.range.useRange&&(t.range.start=ti.range.start,t.range.end=ti.range.end,t.range.data&&delete t.range.data)},insertSelectedDate:function(t){var e=this.calendarAPI.getCellDate(t||this.calendar.find("td.is-selected").last()),n=e.day,i=e.month,a=e.year;this.currentDate=new Date(a,i,n),this.isIslamic&&(this.currentDateIslamic[0]=a,this.currentDateIslamic[1]=i,this.currentDateIslamic[2]=n,this.currentYear=a,this.currentMonth=i,this.currentDay=n,this.currentDate=R.umalquraToGregorian(a,i,n)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function(t,e){var n=this.settings;n.range.first.date=new Date(t.year,t.month,t.day),n.range.second=void 0,this.setValue(new Date(e.year,e.month,e.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){this.closeCalendar()},closeCalendar:function(){var t=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:t}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var e=this.trigger.data("popover");e&&e.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var t=this.settings;if(this.calendar){if(t.range.useRange&&(t.range.first&&t.range.first.label&&(!t.range.second||t.range.second&&!t.range.second.date)&&this.setRangeFirstPart(t.range.first.date),this.calendarAPI.setRangeSelected(),t.range.second&&t.range.first.date&&t.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,t.range.useRange&&t.range.selectWeek){var e=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void e.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(t){var e=this.settings,n=function(t){return new Date(t.year,t.month,t.day)},i=this.calendarAPI.days.find("td:visible:first"),a=this.calendarAPI.days.find("td:visible:last"),s=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),r=this.calendarAPI.days.find('[data-key="'.concat(s,'"]')),o=r.closest("tr");this.isIslamic?(this.currentDate=R.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),this.currentDateIslamic=t):this.currentDate=t;var l=this.calendarAPI.getCellDate(i),d=this.calendarAPI.getCellDate(a);e.range.first={date:this.isIslamic?c(t):t,cell:r,row:o,rowIdx:o.index(),cellIdx:r.index()},e.range.extra={minCell:i,maxCell:a,min:this.isIslamic?[l.year,l.month,l.day]:n(l),max:this.isIslamic?[d.year,d.month,d.day]:n(d),cellLength:o.children("td").length},this.calendarAPI.settings.range.first=e.range.first,this.calendarAPI.settings.range.extra=e.range.extra},insertDate:function(t,e){var n=this.settings,i="",a="",s="";if(t instanceof Array)i=t[0],a=t[1],s=t[2].toString();else{if(!(t instanceof Date)||isNaN(this.getTime(t)))return;i=t.getFullYear(),a=t.getMonth(),s=t.getDate().toString()}if(this.calendarAPI.currentMonth===a&&this.calendarAPI.currentYear===i||this.calendarAPI.showMonth(a,i),this.isOpen()){var r=this.calendarAPI.days.find("td:not(.alternate)").filter(function(){return $(this).text().toLowerCase()===s});r.hasClass("is-disabled")||(this.settings.showTime&&(e?(this.time=R.formatDate(t,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),t=this.setTime(t))):t=this.setTime(t)),this.setValue(t,!0),n.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),r.addClass("is-selected".concat(n.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(r,!0)}},setValue:function(t,e,n){var i=this.settings;this.currentDate=t,t instanceof Array&&(this.currentDateIslamic=t,this.currentDate=R.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5])),i.range.useRange?n||this.setRangeToElem(t,!1):this.element.val(R.formatDate(t,{pattern:this.pattern,locale:this.locale.name})),e&&(i.range.useRange?n||this.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]):this.element.trigger("change").trigger("input"))},getTime:function(t){return Array.isArray(t)?t.join(""):t.getTime()},setRangeToElem:function(t,e){var n=this,i=this.settings,a=function(t){return R.formatDate(t,{pattern:n.pattern,locale:n.locale.name})},s=a(t),r=!1;if(this.isOpen()){var o=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),l=this.calendarAPI.days.find('[data-key="'.concat(o,'"]')),c=l.closest("tr");i.range.second&&(i.range.second.date?this.resetRange({cell:l}):(delete i.range.second.date,$.isEmptyObject(i.range.second)&&delete i.range.second));var d={};i.range.first&&(d.date=this.getTime(t),d.firstdate=this.getTime(i.range.first.date),d.min=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.minDays),d.max=this.calendarAPI.getDifferenceToDate(i.range.first.date,i.range.maxDays)),!i.range.first||e?(this.setRangeFirstPart(t),s=this.getRangeValue(),this.setPlaceholder()):!i.range.second&&i.range.selectBackward&&d.date>d.firstdate||i.range.selectForward&&d.date<d.firstdate||i.range.maxDays>0&&d.date>d.max.aftertime||d.date<d.max.beforetime?(this.resetRange({cell:l}),this.setRangeFirstPart(t),s=this.getRangeValue(),this.setPlaceholder()):(r=!0,this.isIslamic?(this.currentDate=R.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),this.currentDateIslamic=t):this.currentDate=t,i.range.minDays>0&&(d.date>=d.firstdate&&d.date<d.min.aftertime?(t=d.min.after,d.date===d.firstdate&&(d.date=this.getTime(t))):d.date<d.firstdate&&d.date>d.min.beforetime&&(t=d.min.before),o=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),c=(l=this.calendarAPI.days.find('[data-key="'.concat(o,'"]'))).closest("tr")),d.date>d.firstdate?i.range.second={date:t,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}:(i.range.second=i.range.first,i.range.first={date:t,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}),s=this.getRangeValue())}else if(!e){r=!0;var u=t||new Date;this.currentMonth=u.getMonth(),this.currentYear=u.getFullYear(),this.currentDay=u.getDate(),this.currentDate=u,i.range.first=i.range.first||{},i.range.second=i.range.second||{},i.range.first.date=u,i.range.second.date=u,s=this.getRangeValue()}this.element.val(s),r?(i.range.data={value:s,dates:this.calendarAPI?this.calendarAPI.getDateRange(i.range.first.date,i.range.second.date):[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date),endDate:i.range.second.date,end:a(i.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):i.range.data={value:s,dates:[i.range.first.date],startDate:i.range.first.date,start:a(i.range.first.date)}},resetRange:function(t){t=t||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,t.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,t.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),t.cell&&t.cell.addClass("is-selected"))},setRangeValueFromField:function(){var t,e=this,n=function(t){return R.formatDate(t,{pattern:e.pattern,locale:e.locale.name})},i=function(t){return R.parseDate(t,{pattern:e.pattern,locale:e.locale.name},!1)},a=function(t){return t&&"function"==typeof t.getTime?t:new Date},s=function(t){var n=i(t[0]),s=i(t[1]),r=e.isIslamic&&Array.isArray(n);return r||(n=R.gregorianToUmalqura(new Date(t[0])),s=R.gregorianToUmalqura(new Date(t[1]))),n&&s?(n=e.getTime(a(n)),s=e.getTime(a(s)),e.isIslamic&&!r&&(t[0]=R.gregorianToUmalqura(new Date(t[0])),t[1]=R.gregorianToUmalqura(new Date(t[1]))),n>s?[t[1],t[0]]:[t[0],t[1]]):t},r=this.settings,o={};if(o.value=r.range.value||this.element.val().trim(),o.isEmpty=""===o.value,!o.isEmpty&&o.value.indexOf(r.range.separator)>-1?o.dates=s(o.value.split(r.range.separator)):!o.isEmpty&&o.value.indexOf(r.range.separator.slice(0,-1))>-1?o.dates=o.value.split(r.range.separator.slice(0,-1)):o.isEmpty||-1!==o.value.indexOf(r.range.separator)||(o.dates=[n(o.value)]),!r.range.data&&r.range.start&&r.range.end&&o.isEmpty&&(t="string"==typeof r.range.start&&"string"==typeof r.range.end?s([r.range.start,r.range.end]):"string"!=typeof r.range.start&&"string"==typeof r.range.end?s([n(r.range.start),r.range.end]):"string"==typeof r.range.start&&"string"!=typeof r.range.end?s([r.range.start,n(r.range.end)]):s([n(r.range.start),n(r.range.end)]),r.range.start=n(t[0]),r.range.end=n(t[1])),r.range.first=r.range.first||{},r.range.second=r.range.second||{},r.range.data&&r.range.data.startDate?r.range.first.date=r.range.data.startDate:r.range.start&&"string"==typeof r.range.start?r.range.first.date=i(r.range.start):o.dates&&(r.range.first.date=this.isIslamic&&Array.isArray(o.dates[0])?o.dates[0]:i(o.dates[0])),r.range.data&&r.range.data.endDate?r.range.second.date=r.range.data.endDate:r.range.end&&"string"==typeof r.range.end?r.range.second.date=i(r.range.end):o.dates&&(r.range.second.date=this.isIslamic&&Array.isArray(o.dates[1])?o.dates[1]:i(o.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!o.isEmpty&&(o.isEmpty||r.range.data))return!1;var l=n(r.range.first.date);return l&&this.element.val(l),!0},setValueFromField:function(){var t=this,e=this.settings;if(this.setCurrentCalendar(),e.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),e.range.useRange&&(""!==this.element.val().trim()||e.range.start&&e.range.end||e.range.data&&e.range.data.startDate&&e.range.data.endDate)&&!this.setRangeValueFromField())return this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate()),void(this.currentDate&&this.isIslamic&&(this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]));var n=this.element.val(),i=n;if(this.isIslamic&&n){var a=R.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});a instanceof Date?i=R.umalquraToGregorian(a.getFullYear(),a.getMonth(),a.getDate()):a instanceof Array&&(i=R.umalquraToGregorian(a[0],a[1],a[2],a[3],a[4],a[5]))}var s=function(){var e=(new Date).getDate();if(t.calendarAPI){var n=t.calendarAPI.dayMap.filter(function(t){return t.elem.is(".is-selected")});n.length&&(e=parseInt(n[0].key.substr(6),10))}return e}();this.currentDate=i||new Date,"string"==typeof this.currentDate&&(this.currentDate=R.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(s)),void 0===this.currentDate&&(this.currentDate=R.parseDate(i,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=R.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var r=this.pattern,o=!(r.indexOf("MMMM")>-1||r.indexOf("MMM")>-1||"yyyy"===r||"MMMM"===r||"MMM"===r||"MM"===r),l=this.element.val().trim();if(""!==l&&!e.range.useRange){var c=R.parseDate(l,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},o),d=0;d=this.isIslamic?c[3]:null==c||null==c?void 0:c.getHours(),!this.isIslamic&&c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&""!==this.currentCalendar.dayPeriods[1]&&c.setHours(d+12),this.isIslamic&&c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&(d+=12),!this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&c.setDate(s),this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&(c[2]=s),void 0===c||""===this.element.val().trim()||e.range.useRange||(this.setValue(c),l!==this.element.val().trim()&&this.element.trigger("change").trigger("input"))}e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&(e.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.prop("disabled",!1)},disable:function(){this.element.removeAttr("readonly").attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly"),this.trigger.prop("disabled",!1)},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(t){this.trigger.attr("tabIndex",t?0:-1)},setToday:function(t){var e=this.settings;if(this.lastValue=null,this.currentDate=new Date,!this.isReadonly()&&!this.isDisabled()){if(this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var n=R.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=n}var i=this.isIslamic?this.currentDateIslamic:this.currentDate;if(this.isOpen())if(e.range.useRange)if(!e.range.first||e.range.first&&!e.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(i,!0),t&&this.calendarAPI){var a=this.calendarAPI.dayMap.filter(function(t){return t.elem.is(".is-selected")});a&&a.length&&setTimeout(function(){a[0].elem.focus()},0)}}else e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date)?this.setRangeToElem(i,!1):e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(i,!0));else this.insertDate(i,!0);else{if(e.range.useRange)this.setRangeToElem(this.currentDate);else{var s={pattern:this.pattern,locale:this.locale.name},r=R.formatDate(i,s);this.element.val(r)}e.range.useRange?this.element.trigger("change",[e.range.data]).trigger("input",[e.range.data]):this.element.trigger("change").trigger("input")}}},adjustDay:function(t,e){if(!this.isReadonly()&&!this.isDisabled()){this.currentDate||(e.length>0&&/(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}/.test(e)?this.setValue(new Date(e),!0,!0):this.setToday());var n={pattern:this.pattern,locale:this.locale.name},i=this.isIslamic?this.currentDateIslamic:this.currentDate;this.isIslamic?(i[2]+=t?1:-1,(i=R.umalquraToGregorian(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2],this.currentDateIslamic[3],this.currentDateIslamic[4],this.currentDateIslamic[5],this.currentDateIslamic[6])).setDate(i.getDate()+(t?1:-1)),i=R.gregorianToUmalqura(i)):i.setDate(i.getDate()+(t?1:-1)),this.element.val(R.formatDate(i,n)),this.element.trigger("change").trigger("input")}},setTime:function(t){var e=void 0!==this.popup;if(!this.timepicker||!e)return this.settings.useCurrentTime||t.setHours(0,0,0,0),t;var n=this.popup.find(".dropdown.hours").val(),i=this.popup.find(".dropdown.minutes").val(),a=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,s=this.popup.find(".dropdown.period"),r=s.val();return n=s.length&&r===this.currentCalendar.dayPeriods[1]&&n<12?parseInt(n,10)+12:n,n=!s.length||r!==this.currentCalendar.dayPeriods[0]&&r||12!==parseInt(n,10)?n:0,t instanceof Array?(t[3]=n?parseInt(n,10):t[3],t[4]=i?parseInt(i,10):t[4],t[5]=a?parseInt(a,10):t[5]):(t=new Date(t)).setHours(n,i,a),t},getCurrentDate:function(){return this.currentDate},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ti)),this.teardown().init()},getRangeValue:function(){var t=this,e=this.settings,n=function(e){return R.formatDate(e,{pattern:t.pattern,locale:t.locale.name})};return e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date?"".concat(n(e.range.first.date)+e.range.separator+n(e.range.second.date)):e.range.useRange&&e.range.first&&e.range.first.date?e.placeholder?"".concat(n(e.range.first.date)+e.range.separator+this.pattern):n(e.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var t=this.element.data("mask");return t&&t.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function(){var t=this,e=this,n=this.settings;if(this.trigger.on("click.datepicker",function(){e.isOpen()?e.closeCalendar():e.openCalendar()}),this.handleKeys(this.element),e.element.on("blur.datepicker",function(){""!==t.element.val().trim()&&t.setValueFromField()}),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",function(){t.isOpen()||""!==t.element.val().trim()||e.clearRangeDates()}),!this.isOpen()&&n.range.useRange&&!n.range.first){this.setRangeValueFromField();var i=this.getRangeValue();i&&this.element.val(i)}}},$.fn.datepicker=function(t){return this.each(function(){var e=$.data(this,"datepicker");e?e.updated(t):e=$.data(this,"datepicker",new ei(this,t))})};var ni=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function ii(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;if(!t||"string"!=typeof t||!e.length)throw new Error('"id" property must be defined and unique.');if(this.id=t,!e||"string"!=typeof e||!e.length)throw new Error('"displayName" property must be defined.');return this.displayName=e,n=n.toLowerCase(),-1===ni.indexOf(n)&&(n="p"),this.tagName=n,"string"==typeof i&&i.length&&(this.className=i),a instanceof CSSStyleDeclaration&&(this.styleProps=a),this}function ai(){return{popupmenuSettings:{offset:{y:10}},styles:[new ii("default",R.translate("FontPickerNormal")),new ii("header1",R.translate("FontPickerHeader").replace("{0}","1"),"h3"),new ii("header2",R.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function si(t,e){if(!(t instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=C.mergeSettings(t,e,ai()),e&&Array.isArray(e.styles)&&(this.settings.styles=e.styles),this.element=t,this.init()}ii.prototype={render:function(t){return t=u.stripHTML(t),"<".concat(this.tagName,">").concat(t,"</").concat(this.tagName,">")}},si.prototype={get menuAPI(){var t=$(this.element).data("popupmenu");if(t)return t},get selected(){var t;return this.settings.styles.forEach(function(e){e.selected&&(t=e)}),t||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(t){var e;if(this.settings.styles.forEach(function(n){n.id===t&&(e=n)}),!e)throw new Error('No FontPickerStyle available with id "'.concat(t,'"'));return e},getStyleByTagName:function(t){var e;if(this.settings.styles.forEach(function(n){n.tagName===t&&(e=n)}),!e)throw new Error('No FontPickerStyle available with tagName "'.concat(t,'"'));return e},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,this.element.disabled=!0===t},get supportedTagNames(){var t=[];return this.settings.styles.forEach(function(e){t.push(e.tagName)}),t},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=ai().styles),this.build().handleEvents()},build:function(){var t=$(this.element),e=this.element.querySelector("svg.icon.icon-dropdown");e||(e=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",e)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),t.button();var n=t.next(".popupmenu");n&&n.length||(n=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),n.html(this.buildMenuHTML());var i=C.extend({},this.settings.popupmenuSettings,{menu:n,stretchToWidestMenuItem:!0});return t.popupmenu(i),this.render(),this.audible=$('<span class="audible">'.concat(R.translate("FontPickerStyle"),"</span>")),this.element.prepend(this.audible[0]),this},render:function(){var t=this.selected,e=this.element.querySelector("span:not(.audible)");$(e).html(t.displayName)},buildMenuHTML:function(){var t="";return this.settings.styles.forEach(function(e){var n=e.render(e.displayName);t+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(e.id,'">').concat(n,"</a>\n      </li>")}),"".concat(t)},handleEvents:function(){var t=this,e=this;return $(this.element).on("selected.".concat("fontpicker"),function(e,n){var i=n.attr("data-val");t.select(i)}).on("updated.".concat("fontpicker"),function(t,n){e.updated(n)}),this},select:function(t,e){if(!t||"string"!=typeof t&&!(t instanceof ii))throw new Error('"id" property must be defined in order to select.');var n;n=t instanceof ii?t:this.getStyleById(t),this.settings.styles.forEach(function(t){t.selected=!1}),n.selected=!0,this.render(n),e||$(this.element).triggerHandler("font-selected",[n])},updated:function(t){var e;return void 0!==t&&(Array.isArray(t.styles)&&(e=t.styles),this.settings=C.mergeSettings(this.element,t,this.settings),e&&(this.settings.styles=e)),this.teardown().init()},teardown:function(){var t=this.element.querySelector("svg.icon.icon-dropdown");t.parentNode.removeChild(t);var e=this.menuAPI;e&&"function"==typeof e.destroy&&e.destroy();var n=$(this.element).data("button");return n&&"function"==typeof n.destroy&&n.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,"fontpicker")}},$.fn.fontpicker=function(t){return this.each(function(){var e=$.data(this,"fontpicker");e?e.updated(t):e=$.data(this,"fontpicker",new si(this,t))})};var ri={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1,attributes:null};function oi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,ri),this.init()}oi.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=ri.maxVisibleButtons),this},build:function(){var t,e=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",function(){return e.cutoffTitle}).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var n=this.element.find(".more");n.length||(n=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(R.translate("MoreActions"),"</span>")).attr("title",R.translate("More")).appendTo(n)}this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each(function(t){var n=$(this);n.data("button")||n.button(),!$(this).data("tooltip")&&n.attr("title")&&n.tooltip(),!n.is(".btn-menu")&&Array.isArray(e.settings.attributes)&&C.addAttributes(n,e,e.settings.attributes,"button-".concat(t))}),this.settings.noSearchfieldReinvoke||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each(function(t,n){var i=$(n);if(i.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(i=i.children(".searchfield")),!i.data("searchfield")){var a=$.extend({},C.parseSettings(i[0]));i.searchfield(a)}C.addAttributes(i,e,e.settings.attributes,"searchfield")});var i=this.more.data("popupmenu"),a=this.more.attr("aria-controls");i?this.moreMenu=i.menu:(this.moreMenu=$("#".concat(a)),this.moreMenu.length||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var s,r=[];this.items.not(this.more).not(".ignore-in-menu").filter(function(){return $(this).parent(".buttonset, .inline").length}).each(function(){r.push(e.buildMoreActionsMenuItem($(this)))}),r.reverse(),$.each(r,function(t,n){""!==n.text()&&n.prependTo(e.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(s=this.settings.moreMenuSettings.attributes),s&&s.length||!Array.isArray(this.settings.attributes)||(s=this.settings.attributes.map(function(t){var e="".concat(t.value,"-actionbutton");return{name:t.name,value:e}})),null!==(t=s)&&void 0!==t&&(null==t?void 0:t.length)||(s=null);var o=C.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:s},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});i?this.more.on("beforeopen.toolbar",function(){e.refreshMoreActionsMenu(e.moreMenu)}).triggerHandler("updated",[o]):this.more.popupmenu(o).on("beforeopen.toolbar",function(){e.refreshMoreActionsMenu(e.moreMenu)}),function(){e.items.attr("tabindex","-1");var t=e.buttonset.children("button");t&&t.attr("tabindex","0");var n=e.items.filter(".is-selected");if(n.length)return e.activeButton=n.first().attr("tabindex","0"),void e.items.not(e.activeButton).removeClass("is-selected");n=e.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),e.activeButton=n,e.element.is(":hidden, .is-hidden")?e.activeButton=e.items.filter(":not(:disabled)").first().attr("tabindex","0"):e.isItemOverflowed(n)&&(n.attr("tabindex","-1"),e.activeButton=e.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var l=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");l.length&&l.trigger("reanimate");var c=this.buttonset.find(".toolbar-searchfield-wrapper .searchfield");return c.length&&c[0].setAttribute("tabindex","0"),this},buildMoreActionsMenuItem:function(t){var e;if(!0===t.data("skipit"))return t.data("skipit",void 0),e;var n=t.data("action-button-link");n&&n.length?e=n.parent():(e=$("<li></li>"),n=$('<a href="#"></a>').appendTo(e),t.data("action-button-link",n),n.data("original-button",t)),t.hasClass("hidden")&&e.addClass("hidden"),t.is(":disabled")?(e.addClass("is-disabled"),n.prop("disabled",!0)):(e.removeClass("is-disabled"),n.prop("disabled",!1)),n.text(this.getItemText(t));var i=$.getBaseURL("#icon-dropdown"),a=t.children(".icon").filter(function(){var t=$(this).getIconName();return t&&t!==i&&-1===t.indexOf("dropdown")});a&&a.length&&(n.html("<span>".concat(n.text(),"</span>")),a.clone().detach().prependTo(n));var s=e.find("b");s.length&&(this.moreMenu.addClass("has-icons"),s.detach().prependTo(e));var r=this.items.not(this.more).not(".searchfield").index(t);if(t.is(".btn-menu")){var o,l;this.settings.attributes&&this.settings.attributes.length&&(l=this.settings.attributes.map(function(t){return{name:t.name,value:"".concat(t.value,"-menubutton-").concat(r)}})),null!==(o=l)&&void 0!==o&&(null==o?void 0:o.length)||(l=null),t.data("popupmenu")?n.children(".icon.arrow").length||n.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):t.popupmenu({attributes:l});var c=t.data("popupmenu").menu,d=c.clone();!function t(n,i,a){var s,r=n.children("li"),o=i.attr("id");i.children("li").each(function(e,n){var i=$(n),a=r.eq(e),s=i.children("a"),o=a.children("a"),l=i.attr("id"),c=s.attr("id");l&&i.removeAttr("id").attr("data-original-menu-item",l),c&&s.removeAttr("id").attr("data-original-menu-anchor",c),o.data("action-button-link",s),s.data("original-button",o);var d=a.children(".wrapper").children(".popupmenu"),u=i.children(".wrapper").children(".popupmenu");d.length&&u.length&&t(d,u,i)}),i.removeAttr("id").attr("data-original-menu",o),a.addClass("submenu"),a.is(e)&&((s=a.children(".wrapper"))&&s.length||(s=$('<div class="wrapper"></div>')),s.html(i),a.append(s))}(c,d,e)}return t.is("[data-popdown]")&&t.popdown(),e},refreshMoreActionsMenu:function(t){var e=this;$("li > a",t).each(function(){var t,n=$(this),i=n.parent(),a=n.data("originalButton"),s=e.getItemText(a);a&&(n.find("span").length?n.find("span").text(s.trim()):n.text(s.trim()),a.isHiddenAtBreakpoint()||a.parent().isHiddenAtBreakpoint()?i.addClass("hidden"):i.removeClass("hidden"),a.parent().is(".is-disabled")||a.is(":disabled")?(i.addClass("is-disabled"),n.prop("disabled",!0),n.attr("tabindex","-1")):(i.removeClass("is-disabled"),n.prop("disabled",!1)),a.is("a")&&(a.parent("li").is(".is-checked")?i.addClass("is-checked"):i.removeClass("is-checked")),a.is(".btn-menu")&&(t=n.parent().find(".popupmenu").first(),e.refreshMoreActionsMenu(t)))})},getItemText:function(t){if(!t)return"";var e,n=t.find("span").first(),i=t.attr("title"),a=t.data("tooltip"),s=a&&"string"==typeof a.content?a.content:void 0;return e=""!==i&&void 0!==i?i:s||(n.length?n.text():t.text()),u.stripHTML(e)},handleEvents:function(){var t=this;return this.items.on("keydown.toolbar",function(e){t.handleKeys(e)}).on("click.toolbar",function(e){t.handleClick(e)}),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",function(){var e,n=$(this);n.is(".is-overflowed")?(e=t.getLastVisibleButton())&&e.length&&e[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(n&&n.focus(),t.buttonset.scrollTop(0))}),this.items.not(this.more).on("selected.toolbar",function(e,n){e.stopPropagation(),t.handleSelected(e,n)}),this.more.on("keydown.toolbar",function(e){t.handleKeys(e)}).on("beforeopen.toolbar",function(){t.adjustMenuItemVisibility()}).on("selected.toolbar",function(e,n){e.stopPropagation(),t.handleSelected(e,n)}),this.more.on("show-submenu.toolbar",function(e,n){t.handleTransferToMenuButtonItem(e,n)}),this.element.on("updated.toolbar",function(e,n){e.stopPropagation(),t.updated(n)}).on("recalculate-buttons.toolbar",function(e,n){t.handleResize(n)}).on("scrollup.toolbar",function(){var e=t.element.parents(".tab-container.module-tabs");e.length&&e.scrollTop(0)}),$("body").on("resize.toolbar-".concat(this.id),function(){t.handleResize()}),this.handleResize(),this},handleTransferToMenuButtonItem:function(t,e){var n=e.children("a").data("original-button");if(n){var i=n.data("popupmenu");i&&"function"==typeof i.settings.beforeOpen&&(i.callSource(t),this.buildMoreActionsMenuItem(n))}},handleSelected:function(t,e){var n,i,a,s,r=e.data("original-button");if(e.parent().is(".hidden, .is-disabled")||e.is("[readonly], [disabled]"))t.preventDefault();else{if(r&&r.length>0){if(n=r.listEvents(),i=this.element.listEvents(),this.setActiveButton(r),r.is("[data-popdown]")&&(s=r.data("popdown"),this.isItemOverflowed(r)&&(s.settings.trigger=this.more,s.updated())),r.attr("ng-click")||r.attr("data-ng-click"))return void r.trigger("click");for(var o=["click","touchend","touchcancel"],l=0;l<o.length;l++){var c=o[l];if(i&&i[c]&&i[c].delegateCount>0){var d=this.element,u=$.Event(c);return u.target=d.find(r)[0],void d.trigger(u)}if(n&&n[c]||r[0]["on".concat(c)])return void r.trigger(c)}return s=(a=r.parents(".popupmenu")).data("trigger"),a.length&&s instanceof $&&s.length?void s.triggerHandler("selected",[r]):void this.triggerSelect(r)}this.triggerSelect(e)}},handleClick:function(t){return this.setActiveButton($(t.currentTarget)),this.triggerSelect($(t.currentTarget)),!1},handleKeys:function(t){var e=t.which,n=$(t.target),i=n.is(".btn-actions"),a=R.isRTL();(37===e&&n.is(":not(input)")||38===e&&n.is(":not(input.is-open)"))&&(t.preventDefault(),i?this.setActiveButton(a?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(a?1:-1)),(39===e&&n.is(":not(input)")||40===e&&n.is(":not(input.is-open)"))&&(t.preventDefault(),i?this.setActiveButton(a?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(a?-1:1))},handleResize:function(t){for(var e=this.getButtonsetButtons(),n=0;n<e.length;n++)e[n].removeClass("is-overflowed");if(this.settings.resizeContainers){var i=t?t.title:void 0,a=t?t.buttonset:void 0;this.sizeContainers(i,a)}this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(t,e){var n=this.element[0],i=this.title[0],a=this.buttonset[0],s=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return a.style.width="",i.style.width="",void n.classList.remove("do-resize");a.style.width="",i.style.width="",n.classList.contains("do-resize")||n.classList.add("do-resize");var r=$(n).getHiddenSize(),o=$(a).getHiddenSize(),l=$(i).getHiddenSize(),c=$(s).getHiddenSize(),d=parseInt(r.padding.left,10)+parseInt(r.padding.right,10);isNaN(c.width)&&(c.width=50),(isNaN(o.width)||o.width<0)&&(o.width=0);var u,h=void 0!==t&&!isNaN(t),p=void 0!==e&&!isNaN(e);this.cutoffTitle=!1;var f=h?parseInt(t,10):!0===this.settings.favorButtonset?r.width-(d+(p?parseInt(e,10):o.width)+c.width):l.scrollWidth,g=p?parseInt(e,10):!0===this.settings.favorButtonset?o.width:r.width-(d+(h?parseInt(t,10):l.scrollWidth)+c.width);if(this.settings.favorButtonset)return f<74&&(this.cutoffTitle=!0,u=Math.abs(f-74),f=74,g-=u),a.style.width=m(g+2),i.style.width=m(f-2),i.textContent&&f<E.textWidth(i.textContent.trim())&&(this.cutoffTitle=!0),void(f>E.textWidth($(i).find("h1").text().trim())&&(this.cutoffTitle=!1));g<0&&(this.cutoffTitle=!0,u=Math.abs(g-0),g=0,f-=u),i.style.width=m(f+2),a.style.width=m(g-2)}function m(t){return"".concat(t,"px")}},navigate:function(t){var e,n=this.items.filter(":visible:not(:disabled)"),i=n.index(this.activeButton)+t;i>=0&&i<n.length&&(e=n.eq(i)),i>=n.length&&(e=n.first()),-1===i&&(e=n.last()),this.isItemOverflowed(e)&&(e=this.more),this.setActiveButton(e)},getLastVisibleButton:function(){for(var t,e,n=$(this.items.get().reverse()).not(this.more),i=0;!t&&i<n.length;){if(e=$(n[i]),!this.isItemOverflowed(e)){t=e;break}i++}for(t&&0!==t.length||(t=n.first());t.length&&t.is(".separator, *:disabled, *:hidden");)t=t.prev();return t},getFirstVisibleButton:function(){for(var t=0,e=this.items,n=e.eq(t);n.is(".separator, *:disabled, *:hidden");)t++,n=e.eq(t);return n},setActiveButton:function(t,e){if(t[0]!==this.activeButton[0]){var n=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(t.is("a"))return i();var e=n.more.data("tooltip");return t[0]===n.more[0]?(e&&e.tooltip.is(":not(.hidden)")&&e.hide(),i()):n.isItemOverflowed(t)&&!t.is(".searchfield")?i():t}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!e&&this.activeButton[0]&&(this.buttonsetItems.length>1&&this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function i(){return n.moreButtonIsDisabled()||!n.element.hasClass("has-more-button")?n.getLastVisibleButton():n.more}},triggerSelect:function(t){var e=$(t);e.is(this.more)||e.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[e])},getButtonsetButtons:function(){for(var t,e=[],n=this.buttonsetItems,i=0;i<n.length;i++)void 0!==(t=n.eq(i)).data("action-button-link")&&t.is(":not(.searchfield)")&&e.push(t);return e},getVisibleButtons:function(t){var e,n=[],i=[];t&&Array.isArray(t)||(t=this.getButtonsetButtons());for(var a=0;a<t.length;a++)t[a][0].classList.remove("is-overflowed");for(var s=0;s<t.length;s++)e=t[s],this.isItemOverflowed(e)?n.push(e):i.push(e);return{visible:i,hidden:n}},adjustMenuItemVisibility:function(t){var e="removeClass";function n(t,n){var i=t[0],a=t.data("action-button-link").parent()[0],s=t.isHiddenAtBreakpoint();if(n)return a.classList.add("hidden"),void i.classList.remove("is-overflowed");s||a.classList.remove("hidden"),i.classList.add("is-overflowed"),t.find(".icon").length&&(e="addClass")}t||(t=this.getVisibleButtons());for(var i=0;i<t.visible.length;i++)n(t.visible[i],!0);for(i=0;i<t.hidden.length;i++)n(t.hidden[i],!1);var a=0;this.moreMenu.find(".icon").each(function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||a++}),a>0&&(e="addClass"),this.moreMenu[e]("has-icons")},isItemOverflowed:function(t){if(this.moreButtonIsDisabled())return!1;if(!t||0===t.length)return!0;var e=this.buttonsetItems.filter(":not(.hidden)").index(t),n=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(n-=1),this.title.length&&e>=n)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),t instanceof $&&t.length&&(t=t[0]);var i=t.classList,a=window.getComputedStyle(t);if(i.contains("btn-actions"))return!0;if(i.contains("searchfield")||"INPUT"===t.nodeName)return!1;if("none"===a.display)return!0;var s=R.isRTL(),r=t.getBoundingClientRect(),o=this.buttonset[0].getBoundingClientRect(),l=s?r.left<=o.left:r.right>=o.right;return!0==r.bottom>=o.bottom||!0===l},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return F(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){if(!this.moreButtonIsDisabled()){var t="removeClass";this.moreMenu.children("li:not(.separator)").not(".hidden").length>0&&(t="addClass"),this.element[t]("has-more-button");var e=this.more.data("popupmenu");if("removeClass"===t){if(!e)return;e.close();var n=e.menu.find("li:not(.separator)").children("a"),i=!1;if(n.add(this.more).each(function(){document.activeElement===this&&(i=!0)}),i){var a=this.getLastVisibleButton()[0];a&&a.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var t=1===this.element.closest(".header").length,e=this.element.attr("id")||"",n=this.element.children(".title"),i=this.element.prev("label"),a=this.element.prev(".label"),s=t?$("header.header").find("h1").text():n.length?n.filter("div").text():i.length?i.text():a.length?a.text():"".concat(e," ").concat(R.translate("Toolbar"));this.element.attr("aria-label",s.replace(/\s+/g," ").trim())}},updated:function(t){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var t=this;$("body").off("resize.toolbar-".concat(this.id));var e=void 0===this.moreMenu?[]:this.moreMenu.children("li");if(e.each(function(){t.teardownMoreActionsMenuItem($(this),!0)}),e.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each(function(t,e){var n=$(e).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy();var i=$(e).data("button");i&&"function"==typeof i.destroy&&i.destroy(),e.classList.remove("is-overflowed"),e.removeAttribute("tabindex")}),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var n=this.title.off("beforeshow.toolbar").data("tooltip");n&&"function"==typeof n.destroy&&n.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var i=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),a=i.data("searchfield");a&&"function"==typeof a.destroy&&i.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(t,e){var n=this,i=$(t),a=i.children("a"),s=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var r,o=i.find(".icon");o.length&&o.remove(),i.is(".submenu")&&(r=i.children(".wrapper").children(".popupmenu")).children("li").each(function(){n.teardownMoreActionsMenuItem($(this),!0)}),s&&s.length&&($.removeData(a[0],"original-button"),$.removeData(s[0],"action-button-link"),a.remove(),r&&r.off().parent(".wrapper").off().remove(),e&&i.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(t){return this.each(function(){var e=$.data(this,"toolbar");e?e.updated(t):e=$.data(this,"toolbar",new oi(this,t))})};var li=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],ci={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!0,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}},attributes:null};function di(t,e){this.settings=C.mergeSettings(t,e,ci),null!=e&&(null==e?void 0:e.buttons)&&(this.settings.buttons=e.buttons),this.element=$(t),this.init()}di.prototype={get toolbarAPI(){var t;return this.toolbar&&this.toolbar.length&&(t=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),t},init:function(){var t=this;if(this.id="".concat(C.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var e=this.settings;if(e.anchor=$.extend({},ci.anchor,e.anchor),e.image=$.extend({},ci.image,e.image),e.anchor.defaultUrl=e.anchor.url,e.anchor.defaultClass=e.anchor.class,e.anchor.defaultTargetText=e.anchor.target,e.anchor.defaultIsClickable=e.anchor.isClickable,e.anchor.targets=e.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,function(e,n){t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(t.settings.anchor.target=n,t.settings.anchor.defaultTarget=n)}),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new ii("legacyDefault","Default")),this.settings.firstHeader&&(B("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new ii("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(B("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new ii("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),e.buttons&&e.buttons.editor){for(var n=!1,i=[new ii("default","Default","p")],a=e.buttons.editor.filter(function(t){return"header"===t.substr(0,6)}),s=0;s<a.length;s++){var r=a[s].substr(6,1);n=!0,i.push(new ii("header".concat(r),"Header ".concat(r),"h".concat(r)))}"separator"===e.buttons.editor[0]&&e.buttons.editor.splice(0,1),n&&(e.buttons.editor=e.buttons.editor.filter(function(t){return"header"!==t.substr(0,6)}),e.fontpickerSettings={styles:i}),n&&(e.buttons.editor=["fontPicker"].concat(e.buttons.editor))}return e.anchor.defaultTarget||(e.anchor.target&&$.trim(e.anchor.target).length?e.anchor.defaultTarget=e.anchor.target:(e.anchor.defaultTargetText=R.translate("SameWindow"),e.anchor.defaultTarget=e.anchor.targets[e.anchor.defaultTargetText])),this.setup(),"string"==typeof e.paragraphSeparator&&/^(p|br|div)$/.test(e.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,e.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox","aria-labelledby":this.container.find(".label").length?this.container.find(".label")[0].id:"no-id"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindParagraphCreation:function(){var t=this;return this.getCurrentElement().on("keyup.editor",function(e){var n,i=t.getSelectionStart();i&&i.getAttribute("data-editor")&&0===i.children.length&&document.execCommand("formatBlock",!1,"p"),13===e.which&&("li"===(n=(i=t.getSelectionStart()).tagName.toLowerCase())||t.isListItemChild(i)||(e.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===n&&document.execCommand("unlink",!1,null)))}),this},bindTab:function(){var t=this;return this.getCurrentElement().on("keydown.editor",function(e){if(9===e.which){var n=t.getSelectionStart();if(!n||!n.tagName)return;var i=n.tagName.toLowerCase();"pre"===i&&(e.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===i&&(e.preventDefault(),document.execCommand(e.shiftKey?"outdent":"indent",e))}if(8===e.which){var a=t.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===a&&t.element.html("")}}),this},setExcludedButtons:function(){var t,e,n,i=function(t,e){var n=-1,i=0;return t.filter(function(t,a){var s=!0;return e.indexOf(t)>-1&&"separator"!==t?(i++,s=!1):"separator"===t&&a-i-1===n&&(i=0,s=!1),"separator"===t&&(n=a),s})};return e=(t=this.settings).buttons,n=t.excludeButtons,this.sourceViewActive()?n&&n.source&&n.source.length?i(e.source,n.source):e.source:n&&n.editor&&n.editor.length?i(e.editor,n.editor):e.editor},createToolbar:function(){var t=this;if(this.toolbar)return this;var e=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),n="",i="";this.settings.useFlexToolbar&&(n="toolbar-section ",i='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var s=this.setExcludedButtons(),r="",o=0,l=s.length;o<l;o+=1){var c=this.buttonTemplate(s[o]);c&&this.element.hasClass("source-view-active")&&"visual"!==s[o]&&(c=c.replace('type="button"','type="button" disabled')),c&&(r+=c)}var d="";this.settings.attributes&&(d=this.getAutomationAttributes("-editor-toolbar"),d=JSON.stringify(d),d=' data-options=\'{"attributes": '.concat(d,"}'"));var u='<div class="'.concat(e,'" data-init="false" id="editor-toolbar-').concat(this.id,'"').concat(d,'>\n      <div class="').concat(n,'buttonset">\n        ').concat(r,"\n      </div>\n      ").concat(i,"\n    </div>");this.element.parent().find(".icon-dirty").length?this.toolbar=$(u).insertBefore(this.element.parent().find(".icon-dirty")):this.toolbar=$(u).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var h=this.toolbar.find('[data-action="fontStyle"]').first();if(h&&h.length){if(this.settings.attributes){var p=this.getAutomationAttributes("-editor-fontpicker");"object"===a(this.settings.fontpickerSettings.popupmenuSettings)?this.settings.fontpickerSettings.popupmenuSettings.attributes=p:this.settings.fontpickerSettings.popupmenuSettings||(this.settings.fontpickerSettings.popupmenuSettings={attributes:p})}h.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=h,this.fontPickerElem.tooltip({placementOpts:{x:40}})}var f=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return f.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",f).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),f.on("beforeopen.editor",function(e,n){var i=t.toolbar.data("toolbar")||t.toolbar.data("toolbar-flex");i&&i.overflowedItems.forEach(function(t){"colorpicker"===t.type&&n&&n.parent(".popupmenu-wrapper").off("afterplace.editor").one("afterplace.editor",function(t,e){if(void 0===e.width){var n,i,a=(((null===(n=e.container)||void 0===n||null==n?void 0:n.outerWidth())||-1)-((null===(i=e.element)||void 0===i||null==i?void 0:i.outerWidth())||-1))/2;a>-1&&e.element.css("left","".concat(a,"px"))}})})}),this},getAutomationAttributes:function(t){var e=this,n=this.settings,i=n.attributes;if(n.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(n.attributes))i=[],n.attributes.forEach(function(n){var a="function"==typeof n.value?n.value(e):n.value;i.push({name:n.name,value:a+t})});else{var a="function"==typeof n.attributes.value?n.attributes.value(this):n.attributes.value;i={name:n.attributes.name,value:a+t}}return i},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var t=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(u.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",g(function(e){t.textarea.text(u.sanitizeHTML(t.element.html().toString())),t.resetEmptyEditor(e),t.element.trigger("change")},400)),$("html").on("themechanged.".concat("editor"),function(){t.setRowsHeight(),t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()}),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var t,e,n,i,a,s,r,o,l=st.currentTheme.id&&(st.currentTheme.id.indexOf("uplift")>-1||st.currentTheme.id.indexOf("new")>-1);null!==(t=this.settings)&&void 0!==t&&null!==(e=null==t?void 0:t.rows)&&void 0!==e&&(null==e?void 0:e.editor)&&this.element.height((null===(a=this.settings)||void 0===a||null===(s=null==a?void 0:a.rows)||void 0===s||null==s?void 0:s.editor)*(l?26:22.2)),null!==(n=this.settings)&&void 0!==n&&null!==(i=null==n?void 0:n.rows)&&void 0!==i&&(null==i?void 0:i.source)&&this.element.parent().find(".editor-source").height(26*(null===(r=this.settings)||void 0===r||null===(o=null==r?void 0:r.rows)||void 0===o||null==o?void 0:o.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var t="p"===this.settings.paragraphSeparator?"p":"div",e=this.element.html().toString().trim();"<br>"!==(e=this.element.html().toString().trim())&&e!=="<".concat(t,"><br></").concat(t,">")||this.element.html(""),this.element.contents().filter(function(){return 3===this.nodeType&&""!==this.textContent.trim()}).wrap("<".concat(t,"></").concat(t,">")),e=this.element.html().toString().trim(),this.textarea.html(u.sanitizeHTML(e));var n=this.saveSelection(),i=function(t){return"number"==typeof t},a=function(t){return function(t){return t&&t[0]&&i(t[0].startOffset)&&i(t[0].endOffset)}(t)?{start:t[0].startOffset,end:t[0].endOffset}:null},s=a(this.savedSelection),r=a(n);null!==s&&null!==r&&s.start===r.start&&s.end===r.end||this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var t=this.element.html().toString().trim();((t||"").match(/>\s+</g)||[]).length>0&&this.element.html(t.replace(/>\s+</g,"><"))},orderedListTypeStyling:function(){var t=this.getCurrentElement(),e=this.element;switch(t.find("ol").attr("type")){case"a":e.addClass("type-l-alpha"),e.removeClass("type-u-alpha");break;case"A":e.addClass("type-u-alpha"),e.removeClass("type-l-alpha");break;case"i":e.addClass("type-l-roman"),e.removeClass("type-u-roman");break;case"I":e.addClass("type-u-roman"),e.removeClass("type-l-roman")}},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var t=$('<div class="text-container"></div>').appendTo(this.sourceView),e="source-textarea-".concat($('[id^="source-textarea-"]').length+1),n="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(e,'">').concat(n,"</label>")).appendTo(t),$('<textarea id="'.concat(e,'" class="editable"></textarea>')).appendTo(t)},triggerClick:function(t,e){$('button[data-action="'.concat(e,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var t=this,e=this.getCurrentElement(),n={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return e.on("keydown.editor",function(i){switch((i=i||window.event).which?n.charCode=i.which:i.keyCode?n.charCode=i.keyCode:n.charCode=!1,i.ctrlKey&&n.charCode){case n.h3:t.triggerClick(i,"append-".concat(t.settings.firstHeader));break;case n.h4:t.triggerClick(i,"append-".concat(t.settings.secondHeader));break;case n.b:t.triggerClick(i,"bold"),i.preventDefault();break;case n.e:t.triggerClick(i,"justifyCenter");break;case n.h:t.triggerClick(i,"anchor"),i.preventDefault();break;case n.i:t.triggerClick(i,i.shiftKey?"image":"italic"),i.shiftKey||i.preventDefault();break;case n.bl:i.shiftKey&&t.triggerClick(i,"insertunorderedlist"),i.preventDefault();break;case n.l:i.shiftKey||t.triggerClick(i,"justifyLeft"),i.preventDefault();break;case n.n:i.shiftKey&&t.triggerClick(i,"insertorderedlist");break;case n.q:t.triggerClick(i,"append-blockquote");break;case n.r:t.triggerClick(i,"justifyRight");break;case n.u:t.triggerClick(i,"underline"),i.preventDefault();break;case n.space:t.triggerClick(i,"clearFormatting");break;case n.sv:t.triggerClick(i,e===t.element?"source":"visual")}}),this.element.on("mousedown.editor","a",function(t){var e=$(this).attr("href");"firefox"!==m.browser.name&&"Mac OS X"===m.os.name&&(t.metaKey||t.ctrlKey)&&(window.open(e,"_blank"),t.preventDefault())}),this.element.on("updated.editor",function(){t.updated()}),this},setupTextareaEvents:function(){var t=this;return this.textarea.off(".editor").on("input.editor keyup.editor",function(){t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()}).on("focus.editor",function(){t.sourceView.addClass("is-focused")}).on("blur.editor",function(e){t.sourceView.removeClass("is-focused"),t.element.empty().html(u.sanitizeHTML(t.textarea.val())),t.element.data("validate")&&t.element.data("validate").validate(t.element,!0,e)}),this},adjustSourceLineNumbers:function(){var t=this.textarea.parent(),e=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),n=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var i=this.textarea[0].scrollHeight,a=Math.floor((i-n)/e),s=this.sourceView.find(".line-numbers"),r=s.find("li").length,o="",l=0;if(!this.lineNumbers||a!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<a){for(;l<a-this.lineNumbers;)o+='<li role="presentation"><span>'.concat(r+l+1,"</span></li>"),l++;s.append(o)}else this.lineNumbers>a&&(l=this.lineNumbers-a,s.find("li").slice(-l).remove());else{for(this.lineNumbers=a;l<this.lineNumbers;)o+='<li role="presentation"><span>'.concat(l+1,"</span></li>"),l++;s.append(o)}this.lineNumbers=a}t[0].style.width="calc(100% - ".concat(s.outerWidth()+2,"px)"),i===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(s[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(t,e,n){var i,a;switch(n){case"bold":i=["<b>","</b>"];break;case"italic":i=["<i>","</i>"];break;case"underline":i=["<u>","</u>"];break;case"strikethrough":i=["<strike>","</strike>"];break;case"append-blockquote":i=["<blockquote>","</blockquote>"];break;default:i=["",""]}if("anchor"===n){var s=$('<a href="'.concat(t,'">').concat(e,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&s.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&s.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?s.attr("contenteditable",!1):s.removeAttr("contenteditable"),a=s[0].outerHTML}else a=i[0]+t+e+i[1];return a},insertTextAreaContent:function(t,e){var n,i,a,s,r=this.textarea[0],o=r.value;t=t||"",document.selection&&"TEXTAREA"===r.tagName?($(r).focus(),(n=document.selection.createRange()).text=this.wrapTextInTags(t,n.text,e),$(r).focus()):r.selectionStart||"0"===r.selectionStart?(i=r.selectionStart,a=r.selectionEnd,s=r.scrollTop,n=this.wrapTextInTags(t,o.substring(i,a),e),r.value=o.substring(0,i)+n+o.substring(a,o.length),$(r).focus(),r.selectionStart=i+n.length,r.selectionEnd=i+n.length,r.scrollTop=s):(r.value+=this.wrapTextInTags(t,r.value,e),$(r).focus(),r.value=r.value)},buttonTemplate:function(t){var e=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(e.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(e.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(R.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(e.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(e.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(R.translate("TextColor"),'" data-action="foreColor" data-element="foreColor" data-init="false">').concat(e.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(R.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(e.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(e.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(e.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("InsertAnchor"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(e.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(e.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(e.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(e.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(e.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(e.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(e.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" title="'.concat(R.translate("ChooseFont"),'" data-action="fontStyle" data-init="false"><span>',"FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(e.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(e.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("JustifyRight"),'" data-action="justifyRight" >').concat(e.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(e.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ViewSource"),'" data-action="source" >').concat(e.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(R.translate("ViewVisual"),'" data-action="visual" >').concat(e.visual,"</button>")}[t]||!1},getIcon:function(t,e,n){return'<span class="audible">'.concat(R.translate(t),"</span>").concat($.createIcon({classes:n||"",icon:e}))},getButtonLabels:function(t){var e,n={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertAnchor","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewVisual","visual","visual-icon")};if("object"===a(t)&&(e=t),"object"===a(e))for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},activateButton:function(t){this.toolbar.find('[data-element="'.concat(t,'"]')).addClass("is-active")},bindButtons:function(){var t=this,e=this;function n(t,n){var i=n instanceof Sn?$(n.element):$(t.target);if(!i.is(".btn-actions")){var a=i.attr("data-action"),s=e.getCurrentElement();return t.preventDefault(),s.focus(),void 0===e.selection&&e.checkSelection(),e.sourceViewActive()||i.toggleClass("is-active"),a&&(e.execAction(a,t),i&&!e.isBtnOverflowedItem(i)&&i.focus()),("ie"===m.browser.name||m.browser.isEdge())&&s.trigger("change"),!i[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",n),this.toolbar.on("click.editor",".colorpicker-editor-button",n)):this.toolbar.on("click.editor","button",n),this.fontPickerElem&&this.fontPickerElem.on("font-selected",function(e,n){t.execFormatBlock(n.tagName)}),this},bindModals:function(){var t=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!1}).on("beforeopen",function(){t.savedSelection=t.saveSelection(),$(this).attr("id")!=="modal-url-".concat(t.id)||t.selectionRange}).off("open").on("open",function(){var e=m.features.touch,n=$(this).attr("id"),i=$("input:first",this),a=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(t.id,'"]')).val(t.settings.anchor.url),$('[name="em-class-'.concat(t.id,'"]')).val(t.settings.anchor.class),$('[name="em-target-'.concat(t.id,'"]')).val(t.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",t.settings.anchor.isClickable),setTimeout(function(){e&&n==="modal-image-".concat(t.id)?a.focus():i.focus().select()},10)}).off("beforeclose").on("beforeclose",function(){var e=$(this).is(".editor-modal-image")?"image":"anchor";if(t.toolbar){var n=t.toolbar.find('[data-action="'.concat(e,'"]')),i=$(this).data("modal");n&&i&&(i.settings.noRefocus=t.isBtnOverflowedItem(n))}}).off("close").on("close",function(e,n){if(t.restoreSelection(t.savedSelection),!n)if($(this).attr("id")==="modal-url-".concat(t.id)){var i=$(t.findElementInSelection("a",t.element[0]));i.length?t.updateCurrentLink(i):t.createLink($('[name="em-url-'.concat(t.id,'"]'),this))}else t.insertImage($("#image-".concat(t.id)).val())}),this},createURLModal:function(){var t=this,e=this.settings,n=$("#modal-url-".concat(this.id));if(n.length>0)return n;var i,a="",s=!0;$.each(e.anchor.targets,function(e,n){a+='<option value="'.concat(n,'">').concat(R.translate(e),"</option>"),t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(s=!1)}),s&&(a+='<option value="'.concat(e.anchor.target,'">').concat(e.anchor.target,"</option>"));var r="";e.attributes&&(i=this.getAutomationAttributes("-editor-modal"),r=JSON.stringify(i),r=' data-options=\'{"attributes": '.concat(r,"}'"));var o=$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(R.translate("InsertAnchor"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(R.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(e.anchor.url,'">\n          </div>\n          ').concat(e.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(e.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(R.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(R.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(e.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(R.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown"').concat(r,">\n              ").concat(a,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(R.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(R.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(e.attributes){var l=[].slice.call(o[0].querySelectorAll('[type="text"]')),c=[].slice.call(o[0].querySelectorAll("button"));l.forEach(function(e,n){return C.addAttributes($(e),t,i,"input".concat(n),!0)}),c.forEach(function(e,n){return C.addAttributes($(e),t,i,"button".concat(n),!0)})}return o.appendTo("body")},createImageModal:function(){var t=this,e=$("#modal-image-".concat(this.id));if(e.length>0)return e;var n=$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(R.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(R.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(R.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(R.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(this.settings.attributes){var i=this.getAutomationAttributes("-editor-modal"),a=[].slice.call(n[0].querySelectorAll('[type="text"]')),s=[].slice.call(n[0].querySelectorAll("button"));a.forEach(function(e,n){return C.addAttributes($(e),t,i,"input".concat(n),!0)}),s.forEach(function(e,n){return C.addAttributes($(e),t,i,"button".concat(n),!0)})}return n.appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(t){var e=u.stripTags(document.querySelector('[name="em-url-'.concat(this.id,'"]')).value),n=u.stripTags(document.querySelector('[name="em-class-'.concat(this.id,'"]')).value),i=u.stripTags(document.querySelector('[name="em-target-'.concat(this.id,'"]')).value),a=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;t&&(t[0].setAttribute("href",this.fixLinkFormat(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl)),t[0].setAttribute("class",n&&$.trim(n).length?n:this.settings.anchor.defaultClass),t[0].setAttribute("data-url",(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl).replace("http://",""))),a?t.attr("contenteditable",!1):t.removeAttr("contenteditable"),i&&$.trim(i).length?t.attr("target",i):t.removeAttr("target")},createLink:function(t){var e=this;this.restoreSelection(this.savedSelection);var n=u.stripTags(this.fixLinkFormat(t[0].value));t.val(n),this.settings.anchor.url=t.val(),this.settings.anchor.class=document.querySelector('[name="em-class-'.concat(this.id,'"]')).value,this.settings.anchor.target=document.querySelector('[name="em-target-'.concat(this.id,'"]')).value,this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;var i=$('<a data-url="'.concat(n,'" href="').concat(n,'">').concat(n,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&i.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&i.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?i.attr("contenteditable",!1):i.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(t.val(),"anchor");else{var a,s,r,o,l;if(!this.selection.isCollapsed||m.browser.isIE11()){if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){s=a.getRangeAt(0),""!==(o="".concat(s)).trim()&&i.html(o);for(var c=(r=s.commonAncestorContainer.children)?r.length:0,d=0;d<c;d++){var h=r[d];h instanceof HTMLImageElement&&(l=h)}l&&i.html(l.outerHTML),s.deleteContents();var p=document.createElement("div");p.innerHTML=i[0].outerHTML;for(var f,g,v=document.createDocumentFragment();f=p.firstChild;)g=v.appendChild(f);s.insertNode(v),g&&((s=s.cloneRange()).setStartAfter(g),s.collapse(!0),a.removeAllRanges(),a.addRange(s))}}else document.execCommand("insertHtml",null,i[0].outerHTML),setTimeout(function(){e.getCurrentElement().focus()},1);this.element.trigger("change"),this.bindAnchorPreview()}},fixLinkFormat:function(t){return t.match(/^https?:\/\//)?t:"http://".concat(t)},bindSelect:function(){var t=this,e="";return this.selectionHandler=function(){clearTimeout(e),e=setTimeout(function(){t.checkSelection()},t.settings.delay)},this.getCurrentElement().off("mouseup.editor keyup.editor").on("mouseup.editor keyup.editor",this.selectionHandler),this},checkSelection:function(){var t;if(void 0===this.selection&&this.sourceViewActive())return t=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();t=window.getSelection();var e=this.getSelectionElement();return e?this.checkSelectionElement(t,e):this.hideToolbarActions(),this},getSelectionElement:function(){var t,e,n,i=window.getSelection(),a=function(t){var e=t;try{for(;!e.getAttribute("data-editor");)e=e.parentNode}catch(t){return!1}return e};try{e=(t=i.getRangeAt(0).commonAncestorContainer).parentNode,n=t.getAttribute("data-editor")?t:a(e)}catch(t){n=a(e)}return n},checkSelectionElement:function(t,e){var n=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=t,this.selectionRange=this.selection.getRangeAt(0),n!==e?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var t=this.getSelectedParentElement();void 0!==t.tagName&&-1===li.indexOf(t.tagName.toLowerCase)&&(this.activateButton(t.tagName.toLowerCase()),!this.element.is(t));)t=t.parentNode},checkButtonState:function(t){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===t){for(var e,n,i=this.fontPickerElem.data("fontpicker"),a=i.supportedTagNames,s=this.getSelectionParentElement(),r=$(s).add($(s).parentsUntil(this.element)),o=0;o<r.length&&void 0===n;o++)if(e=r[o].tagName.toLowerCase(),a.indexOf(e)>-1){n=i.getStyleByTagName(e),i.select(n,!0);break}}else document.queryCommandState(t)?this.toolbar.find('[data-action="'.concat(t,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(t,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=this.selectionRange;return this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var t=this,e=t.getCurrentElement();return this.pasteWrapper=function(e){var n,i,a;n=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var s="";if(t.sourceViewActive())return this;if(n&&!e.defaultPrevented){for(e.preventDefault(),a=n.split(/[\r\n]/g),i=0;i<a.length;i+=1)""!==a[i]&&(navigator.userAgent.match(/firefox/i)&&0===i?s+="<p>".concat(t.htmlEntities(a[i]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(a[i])?s+='<img src="'.concat(t.htmlEntities(a[i]),'" />'):s+="<p>".concat(t.htmlEntities(a[i]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,s),!1;t.pasteHtmlAtCaret(s)}},this.pasteWrapperHtml=function(e){if(t.sourceViewActive())return this;var n,i,s,r,o;if((e.clipboardData||e.originalEvent)&&(e.clipboardData&&e.clipboardData.types?i=e.clipboardData:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(i=e.originalEvent.clipboardData)),i&&i.types)((n=i.types)instanceof DOMStringList&&n.contains("text/html")||n.indexOf&&-1!==n.indexOf("text/html")||m.browser.isEdge())&&(s=e.originalEvent.clipboardData.getData("text/html")),n instanceof DOMStringList&&n.contains("text/plain")&&(s=e.originalEvent.clipboardData.getData("text/plain")),"object"===a(n)&&n[0]&&"text/plain"===n[0]&&!n[1]&&(s=e.originalEvent.clipboardData.getData("text/plain"));else for(o=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),s="",r=0;r<o.length;r+=1)""!==o[r]&&(navigator.userAgent.match(/firefox/i)&&0===r?s+="<p>".concat(t.htmlEntities(o[r]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(o[r])?s+='<img src="'.concat(t.htmlEntities(o[r]),'" />'):s+="<p>".concat(t.htmlEntities(o[r]),"</p>"));return t.pastedData=m.browser.isIE11()?s:t.getCleanedHtml(s),$.when(t.element.triggerHandler("beforepaste",[{pastedData:t.pastedData}])).done(function(){if(t.pastedData&&!e.defaultPrevented){if(m.browser.isIE11()||m.browser.isEdge()||e.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,t.pastedData),!1;t.pasteHtmlAtCaret(t.pastedData)}t.element.triggerHandler("afterpaste",[{pastedData:t.pastedData}]),t.pastedData=null}),!!m.browser.isIE11()&&void 0},e.on("paste.editor",t.settings.pasteAsPlainText?t.pasteWrapper:t.pasteWrapperHtml),this},pasteHtmlAtCaret:function(t){var e,n,i=this,a="x-text-content-templ-x";if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents(),m.browser.isIE11()&&(t=a);var s=document.createElement("div");s.innerHTML=t;for(var r,o,l=document.createDocumentFragment();r=s.firstChild;)o=l.appendChild(r);if(n.insertNode(l),o&&((n=n.cloneRange()).setStartAfter(o),n.collapse(!0),e.removeAllRanges(),e.addRange(n)),m.browser.isIE11()){for(var c=50,d=$.Deferred(),u=document.createDocumentFragment();i.element[0].childNodes.length>0;)u.appendChild(i.element[0].childNodes[0]);!function e(n,i){--c<0?d.reject():n.childNodes&&n.childNodes.length>0?(t=n.innerHTML,n.innerHTML="",n.appendChild(i),d.resolve()):setTimeout(function(){e(n,i)},5)}(i.element[0],u),$.when(d).done(function(){var e="",n=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent===a});n.length||(n=i.element.find(":contains(+ ".concat(a,")")).filter(function(){return this.textContent.indexOf(a)>-1&&"UL"!==this.tagName})),t=i.getCleanedHtml(t);var s="";/(^(\s+?)?<li)/gi.test(t)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)?(n.is("li")||(t="<ul>".concat(t,"</ul>")),s=t):s=n.is("li")?"".concat(t,"</li>"):(e=t.match(/<\/ul|<\/ol/gi)||[]).length?t:"".concat(t,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)&&(n.is("li")?s="<li>".concat(t):((e=t.match(/<ul|<ol/gi)||[]).length?t+=e[e.length-1].replace(/<(ul|ol)/gi,"<$1>"):t="<ul>".concat(t,"</ul>"),s=t)),s&&h.html(n,s,"*"),(e=i.element[0].innerHTML).indexOf(a)>-1&&(e=e.replace(a,t)),i.element[0].innerHTML=i.getCleanedHtml(e)})}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(t)},getCleanedHtml:function(t){var e,n=t||"",i=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(n)&&(n=this.cleanWordHtml(n));for(var a=0,s=i.length;a<s;a++)e=new RegExp(" ".concat(i[a],'="(.*?)"'),"gi"),n=this.stripAttribute(n,i[a],e),e=new RegExp(" ".concat(i[a],"='(.*?)'"),"gi"),n=this.stripAttribute(n,i[a],e);return(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<(div|span|p)> <\/(div|span|p)>/gi," ")).replace(/<[^(br|/>)]+>[\s]*<\/[^>]+>/gi,"")).indexOf("\xb7")>-1&&(n=[(n=[(n=(n=(n=n.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>\xb7<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,n.indexOf("<li>")),"<ul>",n.slice(n.indexOf("<li>"))].join("")).slice(0,n.lastIndexOf("</li>")),"</ul>",n.slice(n.lastIndexOf("</li>"))].join("")),n},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var t=this,e=this.container,n=this.getCurrentElement(),i=this;return this.element.on("DOMNodeInserted",function(t){var e=$(t.target),n=$("<b>helper</b>");"IMG"===t.target.tagName?e.removeAttr("id style srcset"):"SPAN"===t.target.tagName&&(e.before(n),n.after(e.contents()),n.add(e).remove())}),this.container.on("focusin.".concat("editor"),".editor, .editor-source",function(){var t=$(this);e.addClass("is-active"),setTimeout(function(){t.hasClass("error")&&(e.parent().find(".editor-toolbar").addClass("error"),e.parent().find(".editor-source").addClass("error"))},100)}).on("focusout.".concat("editor"),".editor, .editor-source",function(){e.removeClass("is-active"),e.parent().find(".editor-toolbar").removeClass("error"),e.parent().find(".editor-source").removeClass("error")}),this.container.on("mouseenter.".concat("editor"),function(){t.element.hasClass("error")||t.container.addClass("is-hover")}).on("mouseleave.".concat("editor"),function(){t.container.removeClass("is-hover")}),i.settings.onLinkClick&&e.on("click.editorlinks","a",function(e){i.settings.onLinkClick(e,{elem:t,url:e.currentTarget.getAttribute("data-url")}),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}),this.label.on("click.editor",function(){n.focus()}),n.attr("aria-label",this.label.text()),this},restoreSelection:function(t){var e=window.getSelection();if(t||(t=this.savedSelection),t){e.removeAllRanges();for(var n=0,i=t.length;n<i;n+=1)e.addRange(t[n])}},saveSelection:function(){var t,e=window.getSelection();if(e.getRangeAt&&e.rangeCount){t=[];for(var n=0,i=e.rangeCount;n<i;n+=1)t.push(e.getRangeAt(n));return t}return null},getSelectionStart:function(){var t=document.getSelection().anchorNode;return t&&3===t.nodeType?t.parentNode:t},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(t,e){var n,i,a,s=this.getrange();if(s){for(n=a=s.commonAncestorContainer||s.parentElement();n!==e;n=n.parentNode)if(n&&n.tagName&&n.tagName.toLowerCase()===t)return n;if(!s.collapsed&&(void 0===s.text||s.text)&&a.getElementsByTagName){n=a.getElementsByTagName(t),i=document.createRange?document.createRange():document.body.createTextRange();for(var r=0,o=n.length;r<o;r++)if(document.createRange){if(i.selectNodeContents(n[r]),s.compareBoundaryPoints(Range.END_TO_START,i)<0&&s.compareBoundaryPoints(Range.START_TO_END,i)>0)return n[r]}else if(i.moveToElementText(n[r]),s.compareEndPoints("StartToEnd",i)<0&&s.compareEndPoints("EndToStart",i)>0)return n[r]}}},restoreLinkSelection:function(){var t=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,t.length){this.settings.anchor.url=t.attr("href"),this.settings.anchor.class=t.attr("class"),this.settings.anchor.target=t.attr("target");var e=t.attr("contenteditable");!1!==e&&"false"!==e||(this.settings.anchor.isClickable=!0)}},execAction:function(t){if(this.getCurrentElement()===this.element)t.indexOf("append-")>-1?this.execFormatBlock(t.replace("append-","")):"anchor"===t?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===t?this.modals.image.data("modal").open():"foreColor"===t||"backColor"===t?this.execColorActions(t):"clearFormatting"===t?this.clearFormatting():"source"===t||"visual"===t?this.toggleSource():document.execCommand(t,!1,null);else switch(t){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,t)}this.checkSelection()},insertImage:function(t){document.execCommand("insertImage",!1,t)},toggleSource:function(t){var e=this,n=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};if(this.sourceViewActive()&&!t){var i=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",i)).done(function(t){n(t)||function(t){var n=t||e.textarea.val();n=u.sanitizeHTML(n),n=e.getCleanedHtml(n),e.element.empty().removeClass("source-view-active hidden"),e.sourceView.addClass("hidden").removeClass("is-focused"),e.element.trigger("focus.editor"),e.switchToolbars(),e.textarea.off("input.editor-firechange"),setTimeout(function(){var t;e.orderedListTypeStyling(),e.element[0].innerHTML=n,n=e.element[0].innerHTML,e.element.triggerHandler("afterpreviewmode",n);var i=null===(t=e.toolbar)||void 0===t||null==t?void 0:t.find('[data-action="source"]');i&&!e.isBtnOverflowedItem(i)&&i.focus()},0)}(t)})}else{var a=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",a)).done(function(t){n(t)||function(t){var n,i=t||e.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");e.settings.useSourceFormatter&&(i=e.formatHtml(i)),e.element.addClass("source-view-active"),e.switchToolbars(),e.textarea.val(i).focus(),e.sourceView.removeClass("hidden"),e.element.addClass("hidden"),e.adjustSourceLineNumbers(),e.textarea.focus(),i=e.textarea.val(),e.textarea.off("input.editor-firechange").on("input.editor-firechange",function(){e.element.trigger("change")}),e.element.triggerHandler("aftersourcemode",i);var a=null===(n=e.toolbar)||void 0===n||null==n?void 0:n.find('[data-action="visual"]');a&&!e.isBtnOverflowedItem(a)&&a.focus()}(t)})}},isBtnOverflowedItem:function(t){var e=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex"),n=!1;return e&&e.overflowedItems.forEach(function(e){t.is(e.element)&&(n=!0)}),n},clearFormatting:function(){var t,e=this,n=this.getSelectionParentElement(),i=n.tagName,a={};n&&i&&(i=i.toLowerCase(),a=function(){for(var t=function(t){return t&&t.style&&""!==t.style.textAlign},i=n,a=t(i),s=9999;!a&&s>0;)s--,a=(i=i?i.parentNode:null)&&i===e.element[0]||t(i);var r={found:i&&i!==n&&i!==e.element[0]};return r.found&&(r.elem=i,r.textAlign=i.style.textAlign),r}(),function(){var t=function(t){var e=[].slice.call(t.querySelectorAll("li"));if(e.length>0){var n=document.createDocumentFragment();e.forEach(function(t){var e=document.createTextNode(t.textContent);n.appendChild(e),n.appendChild(document.createElement("br"))});var i=e[0].parentNode;i.parentNode.insertBefore(n,i.nextSibling),i.parentNode.removeChild(i)}};if("li"===i)t(n.parentNode);else if(/ul|ol/.test(i))t(n);else{var e=n.classList.contains("editor")?n:$(n).closest(".editor").length?n.parentNode:null;e&&[].slice.call(e.querySelectorAll("ul, ol")).forEach(function(e){return t(e)})}}(),function(){var t=function(t){var e=t.parentNode,n=document.createElement("p");n.innerHTML=t.innerHTML,e.replaceChild(n,t)};li.indexOf(i)>-1?"p"!==i&&(document.execCommand("removeFormat",!1,null),t(n)):li.forEach(function(e){"p"!==e&&[].slice.call(n.querySelectorAll(e)).forEach(function(e){return t(e)})});for(var a=[].slice.call(e.element[0].querySelectorAll("blockquote, pre")),s=function(e,i){var s=!1;!function t(e){for(var i=0,a=e.length;i<a;i++){var r=e[i],o=[].slice.call(r.children);r===n&&(s=!0),o.length&&!s&&t(o)}}([].slice.call(a[e].children)),s&&(document.execCommand("removeFormat",!1,null),t(a[e]))},r=0,o=a.length;r<o;r++)s(r)}(),t=function(t){var e=t.parentNode,n=t.firstChild;e.insertBefore(n,t),e.removeChild(t),e.normalize()},"a"===i?t(n):[].slice.call(n.querySelectorAll("a")).forEach(function(e){(function(t){var e=window.getSelection(),n=!1;if(m.browser.isIE11()){var i=e.getRangeAt(0),a=document.createRange();a.selectNode(t);var s=i.compareBoundaryPoints(Range.START_TO_END,a),r=i.compareBoundaryPoints(Range.START_TO_START,a),o=i.compareBoundaryPoints(Range.END_TO_START,a),l=i.compareBoundaryPoints(Range.END_TO_END,a);n=s!==r||o!==l||s!==l}else n=e.containsNode(t,!0);return n})(e)&&t(e)}));var s=n.parentNode;s&&s!==this.element[0]&&[].slice.call(s.querySelectorAll("[align]")).forEach(function(t){return t.removeAttribute("align")}),document.execCommand("removeFormat",!1,null),a.found&&(a.elem.style.textAlign=a.textAlign)},getSelectionParentElement:function(){var t,e=null;return window.getSelection?(t=window.getSelection()).rangeCount&&1!==(e=t.getRangeAt(0).commonAncestorContainer).nodeType&&(e=e.parentNode):(t=document.selection)&&"Control"!==t.type&&(e=t.createRange().parentElement()),e},checkColorButtonState:function(t){var e=$('[data-action="'.concat(t,'"]'),this.toolbar),n=e.data("colorpicker"),i=document.queryCommandValue(t);return n&&"rgb(0, 0, 0)"!==i&&("firefox"===m.browser.name&&"backColor"===t&&(i=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof i&&(i=n.decimal2rgb(i)),i=i?n.rgb2hex(i):"",e.attr("data-value",i).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(i.toLowerCase())>-1?"":i)),{cpBtn:e,cpApi:n,color:i}},execColorActions:function(t){var e=this,n=this.checkColorButtonState(t),i=n.cpBtn,a=n.cpApi;i.one("selected.editor",function(n,a){var s=a;void 0===s||s instanceof $||!s.element||(s=$(a.element));var r="".concat(s.data("value")).toLowerCase();if(-1===(r="#"!==r?r:"").indexOf("#")&&(r="#".concat(r)),"#"===r&&(r=""),i.attr("data-value",r).find(".icon").css("color",r),"ie"===m.browser.name||"foreColor"===t)r?document.execCommand(t,!1,r):document.execCommand("removeFormat",!1,t);else{document.execCommand("fontSize",!1,"2");for(var o=e.getSelectionParentElement().parentNode.getElementsByTagName("font"),l=0,c=o.length;l<c;l++)o[l].hasAttribute("style")&&(o[l].style.backgroundColor="");setTimeout(function(){for(var t=0,e=o.length;t<e;t++)o[t].hasAttribute("size")&&(o[t].style.backgroundColor=r,o[t].removeAttribute("size"))},0)}}),a.toggleList()},execFormatBlock:function(t){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var e=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&e.el&&"blockquote"===e.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(e.tagName===t&&(t="p"),"ie"===m.browser.name){if("blockquote"===t)return document.execCommand("indent",!1,t);t="<".concat(t,">")}document.queryCommandState("bold")&&document.execCommand("bold",!1,t),document.queryCommandState("italic")&&document.execCommand("italic",!1,t),document.queryCommandState("underline")&&document.execCommand("underline",!1,t),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,t),e.el&&e.el.innerHTML&&e.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),e.el&&e.el.innerHTML&&"<ul>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),e.el&&e.el.innerHTML&&"<ol>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),document.execCommand("formatBlock",!1,t),this.checkActiveButtons()}},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===li.indexOf(e);)(t=t.parentNode)&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},isListItemChild:function(t){for(var e=t.parentNode,n=e.tagName.toLowerCase();-1===li.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(!(e=e.parentNode)||!e.tagName)return!1;n=e.tagName.toLowerCase()}return!1},destroyToolbar:function(){var t=function(t){return t||$()};this.toolbar=t(this.toolbar),this.element=t(this.element),this.textarea=t(this.textarea);var e=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");e&&e.destroy();for(var n=this.toolbar.find("button"),i=0,a=n.length;i<a;i++){var s=$(n[i]).data("tooltip");s&&"function"==typeof s.destroy&&s.destroy();var r=$(n[i]).data("button");r&&"function"==typeof r.destroy&&r.destroy()}for(var o=$('[data-action="foreColor"], [data-action="backColor"]',this.element),l=0,c=o.length;l<c;l++){var d=$(o[l]).data("colorpicker");d&&"function"==typeof d.destroy&&d.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var u=this.fontPickerElem.data("fontpicker");u&&u.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var h=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(h),this.textarea.off(h),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var p=this.checkColorButtonState("foreColor"),f=p.cpBtn;if(f.off("selected.editor"),(f=(p=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var g=Object.keys(this.modals),m=0,v=g.length;m<v;m++){var b=$("#modal-".concat(g[m],"-").concat(this.id)),y=b.data("modal");b.off("beforeclose.editor close.editor open.editor beforeopen.editor"),y&&"function"==typeof y.destroy&&y.destroy(),b.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var t=this.container[0].classList,e=this.element[0].classList;if(!t.contains("is-preview")){if(!this.isEditable()){var n=["is-disabled","is-readonly","is-preview"];t.remove.apply(t,n),e.remove.apply(e,n)}this.sourceViewActive()&&this.toggleSource(),t.add("is-preview"),e.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(t){var e=$(t).data("tooltip");e&&"function"==typeof e.destroy&&e.destroy()})}},destroyPreviewMode:function(){if(this.container[0]){var t=this.container[0].classList;t.contains("is-preview")&&(t.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var t=this,e=!0,n=function(t,e){return t.classList.contains(e)};return["is-disabled","is-readonly","is-preview"].forEach(function(i){(n(t.container[0],i)||n(t.element[0],i))&&(e=!1)}),e},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ci)),this.teardown().init()},teardown:function(){return this.destroyToolbar(),this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==m.browser.name&&document.addEventListener&&document.addEventListener("paste",function(t){if(void 0!==t.clipboardData){var e=t.clipboardData.items[0];if(0===e.type.indexOf("image")){var n=e.getAsFile(),i=new FileReader;i.onload=function(t){var e=t.target.result;document.execCommand("insertImage",!1,e)},i.readAsDataURL(n)}}},!1)},isWordFormat:function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)},cleanWordHtml:function(t){var e=t;e=(e=(e=(e=(e=(e=e.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"\xa0")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join("\xa0"):""})).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var n=["style","script","applet","embed","noframes","noscript"],i=0,a=n.length;i<a;i++){var s=new RegExp("<".concat(n[i],".*?").concat(n[i],"(.*?)>"),"gi");e=e.replace(s,"")}return e},stripAttribute:function(t,e,n){return"style"===e?this.stripStyles(t,n):t.replace(n,"")},stripStyles:function(t,e){var n=["color","font-size","background","font-weight","font-style","text-decoration","text-align"];return t.replace(e,function(t){for(var e=(t=t.replace(/( style=|("|\'))/gi,"")).split(";"),i="",a=0;a<e.length;a++){var s=e[a].split(":");i+=n.indexOf((s[0]||"").trim())>-1?"".concat(s[0],":").concat(s[1],";"):""}return""!==i?' style="'.concat(i,'"'):""})},formatHtml:function(t){t=t.trim();var e=this.settings,n=t.split(/</),i=0,a="";function s(t){var n="",i=t*("number"==typeof e.formatterTabsize?e.formatterTabsize:4);if(t>-1)for(;i--;)n+=" ";return n}for(var r=0,o=n.length;r<o;r++){var l=n[r].split(/>/);2===l.length?("/"===n[r][0]&&i--,a+=s(i),"/"!==n[r][0]&&i++,r>0&&(a+="<"),a+="".concat(l[0].trim(),">\n"),""!==l[1].trim()&&(a+="".concat(s(i)+l[1].trim().replace(/\s+/g," "),"\n")),l[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&i--):a+="".concat(s(i)+l[0],"\n")}return a.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(t){return this.each(function(){var e=$.data(this,"editor");e?e.updated(t):e=$.data(this,"editor",new di(this,t))})};var ui={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function hi(t,e){this.settings=C.mergeSettings(t,e,ui),this.element=$(t),this.init()}hi.prototype={init:function(){var t=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",t.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==t.dataset&&0!==t.dataset.length&&Array.isArray(t.dataset)){if(t.dataset[0]&&t.dataset[0].children&&t.dataset[0].children.length>0||this.isStackedLayout()?this.render(t.dataset[0]):t.dataset&&t.dataset.children.length>0&&this.render(t.dataset),null!==t.leafHeight&&null!==t.leafWidth){var e="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(t.leafWidth,"px;  height: ").concat(t.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(e,"</style>")).appendTo("body")}t.layout&&this.setLayout(t.layout),this.setAutomationAttributes()}else this.element.emptymessage(t.emptyMessage)},setAutomationAttributes:function(){var t=this;[].slice.call(this.element[0].querySelectorAll(".leaf")).forEach(function(e){var n=$(e),i=n.data();if(i&&i.attributes){var a=n.find(".btn-expand, .btn-collapse");C.addAttributes(n,t,i.attributes,"hierarchy-leaf"),C.addAttributes(a,t,i.attributes,"hierarchy-btn-toggle")}})},setLayout:function(t){switch(this.isPagingLayout()&&(t="paging"),this.isMobileOnly()&&(t="mobile-only"),t){case"horizontal":this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only");break;default:this.element.addClass("layout-is-horizontal")}},handleEvents:function(){var t=this,e=this,n=this.settings;e.element.off("click.hierarchy").on("click.hierarchy",".btn",function(t){if(!e.isStackedLayout()){n.newData.length>0&&(n.newData=[]);var i=$(this).closest(".leaf").attr("id"),a=$("#".concat(i)).data(),s={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};a.isExpanded?e.collapse(t,a,s):e.expand(t,a,s)}}),this.element.on("keypress",".leaf",function(t){var n=$(this).attr("id"),i=$("#".concat(n));13===t.which&&(i.isExpanded?e.collapse(t,i):e.expand(t,i))}),e.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",function(e){var n=e.currentTarget.id,i={event:e,data:$("#".concat(n)).data()};e.stopImmediatePropagation(),t.element.trigger("dblclick",i)}),e.element.on("mouseup",".leaf, .back button",function(t){var e=$(this),n=$(t.target),i=e.closest(".hierarchy").data("hierarchy"),a=e.data(),s=$(this).attr("id"),r={target:t.target,pageX:t.pageX,pageY:t.pageY},o=n.is("button"),l=!n.hasClass("btn-back"),c=n.is(".btn-back"),d=n.find("use").prop("href"),u=!!d&&"#icon-caret-up"===d.baseVal,h=!!d&&"#icon-caret-down"===d.baseVal,p=!!d&&"#icon-caret-right"===d.baseVal,f=n.hasClass("btn-actions"),g=n.is("a")&&n.parent().parent().is("ul.popupmenu"),m=e.hasClass("ancestor"),v="selected";if(t.stopImmediatePropagation(),(!g||!$(n).parent().data("disabled"))&&($(".leaf.is-selected").removeClass("is-selected"),$("#".concat(s)).addClass("is-selected"),o&&u&&l&&(v=m?"back":"collapse"),o&&h&&l&&(v="expand"),c&&(v="back"),f&&(v="actions",i.buildActionsMenu(a,e)),g&&(v="action"),o&&p&&l&&(v="forward"),3===t.which&&(v="rightClick"),i)){var b={id:s,data:a,actionReference:g?n.data("actionReference"):null,targetInfo:r,eventType:v,isForwardEvent:i.isForwardEvent(v),isBackEvent:i.isBackEvent(v),isAddEvent:i.isAddEvent(v),isExpandEvent:i.isExpandEvent(v),isCollapseEvent:i.isCollapseEvent(v),isSelectedEvent:i.isSelectedEvent(v),isActionsEvent:i.isActionsEvent(v),isActionEvent:i.isActionEvent(v),allowLazyLoad:i.allowLazyLoad(a,v)};e.trigger("selected",b)}})},selectLeaf:function(t){var e=$("#".concat(t));$(".leaf.is-selected").removeClass("is-selected"),e.addClass("is-selected");var n={data:e.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};e.trigger("selected",n)},updateActions:function(t,e){var n=$(t.targetInfo.target).closest(".leaf"),i=t.data,a=$(n).find(".popupmenu"),s=a.data("trigger").data().popupmenu,r=a.find("li").not(":eq(0)");$(r).each(function(t,e){$(e).remove()}),i.menu.actions=e,a.append(this.getActionMenuItems(i)),s.keydownThenClick=!0,s.open(),s.handleAfterPlace(null,{element:a.parent(),parent:$(n).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(t,e){var n=$(e).find(".popupmenu"),i=[];void 0!==t.menu&&(n.empty(),t.menu.details&&(n.addClass("has-detail-fields"),i.push('<li><div class="detail-fields">'.concat(t.menu.details.map(function(t){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(t.key,'</div><div class="dt-fields-cell">').concat(t.value,"</div></div>")}).join(""),"</div></li>"))),t.menu.actions&&i.push(this.getActionMenuItems(t)),i.forEach(function(t){n.append(t)}))},getActionMenuItems:function(t){var e,n=this,i=t.menu.actions.map(function(t){return void 0===t.disabled&&(t.disabled=!1),t}),a=function(t){return C.stringAttributes(n,e,"option-".concat(t))};return t.attributes&&(e=this.getAutomationAttributes(t,"-hierarchy-popupmenu")),i.map(function(t,e){return t.hasOwnProperty("data")&&"separator"===t.data.type?'<li class="separator"></li>':'\n        <li data-disabled="'.concat(t.disabled,'" class="').concat(t.menu?"submenu":"",'">\n          <a href="').concat(t.url,'"').concat(a(e)," data-action-reference='")+JSON.stringify(t.data)+"'>\n            ".concat(t.value,"\n            ").concat(t.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n          </a>\n          ").concat(t.menu?'<div class="wrapper" role="application" aria-hidden="true">\n            <ul class="popupmenu">\n              '.concat(t.menu.map(function(n,i){return'\n              <li data-disabled="'.concat(t.disabled,'">\n                <a href="').concat(t.url,'"').concat(a("".concat(e,"-").concat(i)),' data-action-reference="').concat(JSON.stringify(t.data),'">').concat(n.value,"</a>\n              </li>")}).join(""),"\n            </ul>\n          </div>"):"","\n        </li>")}).join("")},isBackEvent:function(t){return"back"===t},isForwardEvent:function(t){return"forward"===t},isAddEvent:function(t){return"add"===t},isExpandEvent:function(t){return"expand"===t},isCollapseEvent:function(t){return"collapse"===t},isSelectedEvent:function(t){return"selected"===t},isActionsEvent:function(t){return"actions"===t},isActionEvent:function(t){return"action"===t},allowLazyLoad:function(t,e){return void 0!==t&&void 0!==e&&!t.isLoaded&&!t.isLeaf&&"expand"===e},data:function(t,e,n,i){void 0===i&&(i={});var a=this.settings,s=e.isRootNode?e:e[0],r=[];function o(e,a,s){Object.keys(a).forEach(function(e){"id"===e&&t===a.id&&(a.isLoaded||a.isRootNode||function(t,e){e.insert&&(delete t.isLeaf,t.isExpanded=!0),0!==n.length&&e.insert?t.children=[n]:t.children=n}(a,i),r.push(a))}),a.children&&l(e,a.children)}function l(t,e,n){if(void 0===e.length)o(t,e);else for(var i=0,a=e.length;i<a;i++)o(t,e[i])}return a.newData.length>0&&(a.newData=[]),void 0!==n&&l(this,s),0!==r.length&&$("#".concat(r[0].id)).data(r[0]),r[0]},add:function(t,e,n){var i=this.settings,a=void 0!==e.id?e.id:t,s=$("#".concat(a)),r=s.parent().hasClass("leaf-container")?s.parent().parent():s.parent(),o={},l="sub-level"!==r.parent().attr("class"),c=1===r.children(".sublist").length;if(l?c?o.element=r.children(".sublist"):(o.el=r.append("<ul class='sublist'></ul>"),o.element=$(o.el).find(".sublist")):(o.el=r.children("ul"),o.element=$(o.el)),0===o.element.length&&(o.el=r.append("<ul></ul>"),o.element=$(o.el).find("ul")),!e.isRootNode){for(var d=0,u=n.length;d<u;d++)i.newData.push(n[d]);this.createLeaf(n,o.element)}this.updateState(s,!1,null,"add")},closePopupMenu:function(t){var e=t.find(".btn-actions");0!==e.length&&e.data("popupmenu").close()},expand:function(t,e,n){var i=this.settings,a=n.leaf,s=a.next();this.closePopupMenu(a),s.animateOpen(),this.element.trigger("expanded",[e,i.dataset]),a.hasClass("root")&&(s=s.next("ul")).animateOpen(),a.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(a,!1,null,"expand")},collapse:function(t,e,n){var i=this,a=this.settings,s=n.leaf,r=s.next();this.closePopupMenu(s),r.animateClosed().on("animateclosedcomplete",function(){i.element.trigger("collapsed",[e,a.dataset])}),s.hasClass("root")&&(r=r.next("ul")).animateClosed(),s.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(s,!1,null,"collapse")},render:function(t){var e=this,n=this.settings,i=n.legend,a=t.children,s=[],r="".concat(C.uniqueId(this.element,"hierarchy")),o={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(o.chart);var l=$("#".concat(this.settings.rootId," .chart"));if(0!==i.length){$("#".concat(this.settings.rootId)).prepend(o.legend);var c=$("#".concat(this.settings.rootId," legend"));this.createLegend(c)}if(this.isSingleChildWithChildren()&&$(l).addClass("has-single-child"),this.setColor(t),this.isPagingLayout()&&t.parentDataSet){var d=' id="'.concat(r,'-back-button" data-automation-id="automation-id-').concat(r,'-back-button"'),h='<div class="back">\n        <button type="button" class="btn-icon hide-focus btn-back"'.concat(d,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-left"></use>\n          </svg>\n          <span>Back</span>\n        </button></div>'),p=$(h).appendTo(l);setTimeout(function(){return p.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')}),p.children("button").data(t),$(l).addClass("has-back")}if(t.isMultiRoot){var f='<div class="leaf multiRoot"><div><h2>'.concat(t.multiRootText,"</h2></div></div>");f=u.sanitizeHTML(f),s.push(f),$(s[0]).addClass("root").appendTo(l)}else if(null!==t.ancestorPath&&void 0!==t.ancestorPath){t.ancestorPath.push(t.centeredNode);var g="".concat(t.ancestorPath.map(function(t){return" ".concat(e.getTemplate(t)," ")}).join(""));g=u.sanitizeHTML(g),s.push(g),$(s[0]).addClass("root ancestor").appendTo(l);var m=this.element.find(".leaf.root");m.each(function(n,i){e.updateState(i,!1,t.ancestorPath[n],"add"),n===m.length-1&&$(i).addClass("is-selected")})}else{var v,b=t.centeredNode;this.isStackedLayout()&&null!==b?v=this.getTemplate(b):this.isStackedLayout()||(v=this.getTemplate(t)),v&&(v=u.sanitizeHTML(v),s.push(v),$(s[0]).addClass("root is-selected").appendTo(l)),b&&null!==b?this.updateState(this.element.find(".leaf.root"),!0,b,void 0):this.updateState(this.element.find(".leaf.root"),!0,t,void 0)}function y(t,e,n){if(null!=e)for(var i=0,a=e.length;i<a;i++)T(t,e[i])}if(a&&a.length>0)for(var w=0,x=a.length;w<x;w++){var k=t.children[w].children;this.isLeaf(a[w])&&!this.isPagingLayout()&&n.renderSubLevel||this.isPagingLayout()?this.createLeaf(t.children[w],$(o.toplevel)):this.createLeaf(t.children[w],$(o.sublevel)),null!=k&&y(this,t.children[w].children)}function T(t,e,n){Object.keys(e).forEach(function(n){if("children"===n){var i=e.id,a=e,s=e.children;return null!=s&&s.length>0&&t.add(i,a,s),y(t,s)}return!0})}var A=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(A);var S=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===S.length&&S.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var t=this.settings;if(t.dataset&&t.dataset[0]&&t.dataset[0].children){for(var e=t.dataset[0].children.length,n=0;e--;)t.dataset[0].children[e].isLeaf||n++;return 1===n}return!1},getAutomationAttributes:function(t,e){var n=this,i=t.attributes;if(t.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(t.attributes))i=[],t.attributes.forEach(function(t){var a="function"==typeof t.value?t.value(n):t.value;i.push({name:t.name,value:a+e})});else{var a="function"==typeof t.attributes.value?t.attributes.value(this):t.attributes.value;i={name:t.attributes.name,value:a+e}}return i},getTemplate:function(t){var e=this,n=ke.compile("{{#dataset}}".concat($("#".concat(u.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:t});return setTimeout(function(){var n=$("#btn-".concat(u.stripTags(t.id)));if(0!==n.length){var i=e.getAutomationAttributes(t,"-hierarchy-popupmenu");n.hideFocus().popupmenu({attachToBody:!1,attributes:i})}},1),$(n).prop("outerHTML")},createLegend:function(t){for(var e=this.settings,n=0,i=0,a=e.legend.length;i<a;i++){var s=e.legend[i].label,r=e.colorClass[i];i-1+1==4&&(t.append("<ul></ul>"),n++),t.children("ul").eq(n).append(""+'<li>\n          <span class="key '.concat(r,'"></span>\n          <span>').concat(s,"</span>\n        </li>"))}},createLeaf:function(t,e){var n=this,i=$("#".concat(n.settings.rootId," .chart"),n.container),a=e.attr("class"),s=void 0!==a?$("#".concat(n.settings.rootId," .").concat(a)):e;function r(t){n.setColor(t);var i=n.getTemplate(t),a=n.settings.rootId,r=1===s.length?s:e,o=t.isExpanded||void 0===t.isExpanded?"branch-expanded":"branch-collapsed";if(t.isLeaf&&(o=""),1!==$("#".concat(a," #").concat(t.id)).length&&(r.append("<li class=".concat(o,">").concat($(i)[0].outerHTML,"</li>")),t.children)){for(var l="",c=0,d=t.children.length;c<d;c++){n.setColor(t.children[c]);var h=n.getTemplate(t.children[c]);t.children.length,l+="<li>".concat($(h)[0].outerHTML,"</li>")}(r=$("#".concat(a," #").concat(u.stripTags(t.id))).parent()).append("<ul>".concat(l,"</ul>"));for(var p=t.children.length;p--;){var f=$("#".concat(a," #").concat(u.stripTags(t.children[p].id)));n.updateState(f,!1,t.children[p],void 0)}}}if(s.length<1&&("top-level"===a?e.insertAfter(".root"):e.appendTo(i)),t.length)for(var o=0,l=t.length;o<l;o++)t.length,r(t[o]),n.updateState($("#".concat(n.settings.rootId," #").concat(u.stripTags(t[o].id))),!1,t[o],void 0);else r(t),n.updateState($("#".concat(n.settings.rootId," #").concat(u.stripTags(t.id))),!1,t,void 0)},setColor:function(t){var e=this,n=this.settings;if(this.setRootColor(t),this.isStackedLayout()&&(t.ancestorPath&&null!==t.ancestorPath&&t.ancestorPath.forEach(function(t){e.setRootColor(t)}),t.centeredNode&&null!==t.centeredNode&&this.setRootColor(t.centeredNode)),t.children&&!t.isRootNode)for(var i=0,a=t.children.length;i<a;i++)for(var s=0,r=n.legend.length;s<r;s++)t.children[i][n.legendKey]===n.legend[s].value&&(t.children[i].colorClass=n.colorClass[s])},setRootColor:function(t){for(var e=this.settings,n=0,i=e.legend.length;n<i;n++){if(t[e.legendKey]===e.legend[n].value){t.colorClass=e.colorClass[n];break}""===t[e.legendKey]&&(t.colorClass="default-color")}},isLeaf:function(t){var e=this.settings;return t.isLeaf||e.beforeExpand?t.isLeaf:!(t.children&&t.children.length>0)},updateState:function(t,e,n,i){if($.isEmptyObject($(t).data())&&n){var a=void 0===n?{}:n;$(t).data(a)}var s=this.settings,r=$(t).find(".btn"),o=this.isPagingLayout()?"caret-right":"caret-up",l=$(t).data();void 0===l&&void 0!==n&&(l=n),(l.children&&0!==l.children.length||"add"===i)&&(l.isExpanded=!0,l.isLoaded=!0),e&&(l.isRootNode=!0,l.isLoaded=!0),(void 0===l.isExpanded&&l.children||"expand"===i)&&(l.isExpanded=!0),void 0!==l.isExpanded&&"collapse"!==i||(l.isExpanded=!1),l.isExpanded?(r.find("svg.icon").changeIcon(o),r.addClass("btn-expand").removeClass("btn-collapse")):(r.find("svg.icon").changeIcon("caret-down"),r.addClass("btn-collapse").removeClass("btn-expand")),(l.isLeaf||l.isRootNode)&&r.addClass("btn-hidden"),l.isLeaf&&(l.isLoaded=!1,l.isExpanded=!1),this.isPagingLayout()&&(l.parentDataSet=s.dataset),$(t).data(l)},reload:function(t){this.destroy(),this.element.hierarchy(t)},unbind:function(){this.element.empty()},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ui)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(t){return this.each(function(){var e=$.data(this,"hierarchy");e?e.updated(t):e=$.data(this,"hierarchy",new hi(this,t))})};var pi={dataset:[],dropdownOpts:{},template:""+"<label>".concat(R.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function fi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,pi),this.init()}fi.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(t){var e=this.settings;if(t=t||e.dataset,"object"===a(ke)&&t&&e.template){e.template instanceof $?e.template="".concat(e.template.html()):"string"==typeof e.template&&(E.containsHTML(e.template)||(e.template=$("#".concat(e.template)).html()));var n=ke.compile(e.template,{dataset:e.dropdownOpts.source?[]:t}),i=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(R.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');t.length>0?this.element.before(n):0===t.length&&this.element.before(n||i);var s=this.element.attr("id")||this.element.attr("name");void 0===s&&(s=C.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",s));var r="".concat(s,"-ff");this.field=this.element.closest(".field, .field-short");var o=R.isRTL();e.dropdownOpts=e.dropdownOpts||{},o&&"object"===a(e.dropdownOpts)&&(e.dropdownOpts.placementOpts?e.dropdownOpts.placementOpts.x=this.element.outerWidth():e.dropdownOpts.placementOpts={x:this.element.outerWidth()}),e.dropdownOpts.cssClass=e.dropdownOpts.cssClass?"".concat(e.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",e.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(e.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",r),this.ffdropdown[0].setAttribute("name",r),this.ffdropdown.prev("label")[0].setAttribute("for",r);var l=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(l),this.field.find("div.dropdown span").addClass("audible"),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon"),C.addAttributes(this.field,this,this.settings.attributes,"",!0),C.addAttributes(this.field.find("label:not(.audible)"),this,this.settings.attributes,"label",!0),C.addAttributes(this.field.find("select"),this,this.settings.attributes,"select",!0)}},setFiltered:function(){if(this.ddApi){var t=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(t)}return this},getTriggerData:function(t){var e=this.settings,n=e.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:e.dataset;return{idx:t.index(),item:t,data:n[t.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(t){if(this.ddApi){var e=-1,n=this.settings,i=n.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:n.dataset;if("number"==typeof t&&t>-1&&t<i.length)e=t;else if("string"==typeof t){var a=this.ffdropdown.find('option[value="'.concat(t,'"]'));a.length||(a=this.ffdropdown.find("option").filter(function(){return $(this).text()===t})),a.length&&(e=a.index())}-1!==e&&e!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=e,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var t=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),function(){var e=t.field.is(".field-short")?42:52;$("#dropdown-list ul").width(t.element.outerWidth()+e)}).on("selected.".concat("fieldfilter"),function(e,n){var i=t.getTriggerData(n);t.element.triggerHandler("filtered",[i])}),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element[0],t,pi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(t){return this.each(function(){var e=$.data(this,"fieldfilter");e?e.updated(t):e=$.data(this,"fieldfilter",new fi(this,t))})};var gi={};function mi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,gi),this.init(),_("FieldOptions")}mi.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var t=this;this.isFirefox="firefox"===m.browser.name,this.isSafari=m.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var e=this.field.find("label");return e&&(this.label=e),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),function(t){9!==(t.which||t.keyCode||t.charCode||0)&&(t.preventDefault(),t.stopPropagation())})),setTimeout(function(){t.popupmenuApi=t.trigger.data("popupmenu"),t.popupmenuApi&&(t.popupmenuApi.settings.returnFocus=!1,t.popupmenuApi.settings.offset.y=10)},100),this},handleEvents:function(){var t=this,e=this,n=this.element.data("datepicker"),i=this.element.data("timepicker"),a=this.element.data("dropdown"),s=this.element.data("lookup")||this.element.hasClass("lookup"),r=this.element.is(".checkbox"),o=this.element.is(".fileupload"),l=this.element.is(".searchfield"),c=this.element.is(".colorpicker"),d=this.element.closest(".radio-group").length>0,u=this.element.is(".data")&&this.element.closest(".summary-form").length>0,h=function(t){return $(":focus").is(t)},p=function(e){(e||t.element).addClass("is-focused")},f=function(e){(e||t.element).removeClass("is-focused")},g=function(){e.element.add(e.trigger).add(e.field).add(e.fieldParent).addClass("is-active")},v=function(){e.element.add(e.trigger).add(e.field).add(e.fieldParent).removeClass("is-active")},b=function(e){var r=!h(t.element);return r=!t.trigger.is(e.relatedTarget)&&r,r=!t.trigger.is(".is-open")&&r,r=(!n||!n.isOpen())&&r,r=(!i||!i.isOpen())&&r,r=!$(e.relatedTarget).prev().is(t.element)&&r,r=(!a||!a.isOpen())&&r,r=!(s&&s.modal&&s.modal.isOpen())&&r,(!c||!t.element.is(".is-open"))&&r},y=function(){var e,n=t.element.height();if(u){var i=parseInt(t.element.css("line-height"),10);if(n>i){t.element.removeClass("is-singleline"),e=-1*((t.element.outerHeight()-t.trigger.height())/2+0);var a=i-16;e+=a?a/2:0}else t.element.addClass("is-singleline"),e=2}else d&&(e=(n-10-t.trigger.height())/2*-1);return e},w=function(){t.trigger.css({top:"".concat(y()-1,"px")})};return m.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),function(e){var s;s=h(t.element),s=(!n||!n.isOpen())&&s,s=(!i||!i.isOpen())&&s,(s=(!a||!a.isOpen())&&s)&&g()}).on("close.".concat("fieldoptions"),function(t){b(t)&&v()})):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),function(){e.element.prop("disabled")||e.element.closest("is-disabled").length||e.field[0].className.indexOf("visible")<0&&e.field[0].classList.add("visible")}).on("mouseout.".concat("fieldoptions"),function(){e.field[0].className.indexOf("visible")>-1&&e.field[0].classList.remove("visible")})),a&&setTimeout(function(){var e=t.trigger.data("popupmenu");e&&e.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})},0),(n||i)&&function(e){e.trigger&&e.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),function(){g()}).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),function(e){b(e)&&(v(),t.element.removeClass("is-open"))})}(n||i),i&&(i.settings.returnFocus=!1),(s||c)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",function(){g()}),c&&this.element.on("beforeopen.".concat("fieldoptions"),function(){g()})),r&&(this.trigger.addClass("is-checkbox"),!m.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",function(){g()}).on("mouseout.".concat("fieldoptions"),".checkbox-label",function(){v()})),o&&(this.element.on("change.".concat("fieldoptions"),function(){t.targetElem.focus()}),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",function(){g()})),l&&setTimeout(function(){t.trigger.add(t.trigger.next(".popupmenu")).appendTo(t.element.closest(".searchfield-wrapper"))},0),u&&(w(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),function(t){13===(t.which||t.keyCode||t.charCode||0)&&setTimeout(function(){g()},0)}),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),function(){g()}),$(document).on("click.".concat("fieldoptions"),function(e){$(e.target).is(t.element)||v()}),$("body").on("resize.".concat("fieldoptions"),function(){w()})),d&&(w(),this.element.on("focusin.".concat("fieldoptions"),".radio",function(){var e=t.isSafari?200:0;p(),setTimeout(function(){g()},e)}).on("focusout.".concat("fieldoptions"),".radio",function(){f()}),$("body").on("resize.".concat("fieldoptions"),function(){w()})),this.targetElem.on("focusin.".concat("fieldoptions"),function(){g(),d&&t.isSafari&&p()}).on("focusout.".concat("fieldoptions"),function(e){var n=t.isSafari?200:0;d&&t.isSafari&&f(),setTimeout(function(){b(e)&&v()},n)}),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),function(){g()}).on("focusout.".concat("fieldoptions"),function(t){b(t)&&v()}).on("selected.".concat("fieldoptions"),function(){t.popupmenuApi.settings.returnFocus=!0}).on("close.".concat("fieldoptions"),function(t){b(t)&&v()}),(this.isSafari||o)&&(d&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),function(e){9!==(e.which||e.keyCode||e.charCode||0)||e.shiftKey||(d?(t.targetElem.find(":checked, .radio:first").not(":disabled").focus(),t.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),function(n){9!==(n.which||n.keyCode||n.charCode||0)||e.shiftKey||setTimeout(function(){t.trigger.focus()},0)})):t.trigger.focus(),g(),e.preventDefault(),e.stopPropagation())})),this.element.on("listopened.".concat("fieldoptions"),function(){g()}).on("listclosed.".concat("fieldoptions"),function(){v()}),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,gi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(t){return this.each(function(){var e=$.data(this,"fieldoptions");e?e.updated(t):e=$.data(this,"fieldoptions",new mi(this,t))})};var vi={};function bi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,vi),this.init()}bi.prototype={init:function(){this.build()},build:function(){var t=this,e=this,n=this.element,i=!n.is("input.fileupload");this.fileInput=i?n.find("input"):n,n.closest(".field, .field-short").addClass("field-fileupload");var a=n.find("input").attr("name");i||(a=n.attr("id")||n.attr("name"));var s=i?n.find("input").attr("class"):n.attr("class");s=s?" ".concat(s):"";var r=R.translate("FileUpload");this.shadowLabel=$('<label for="'.concat(a,'-filename">').concat(n.text(),' <span class="audible">').concat(r,"</span></label>")),this.shadowField=$('<input readonly id="'.concat(a,'-filename" class="fileupload-background-transparent').concat(s,'" type="text">'));var o='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),l='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!i){var c=n.prev("label");0===c.length&&(c=n.parent().prev("label")),c.hasClass("required")&&this.shadowLabel.addClass("required"),this.shadowLabel.html("".concat(c.text(),' <span class="audible">').concat(r,"</span>")),c.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}0===n.parent().find('input[type="text"]').length&&(n.before(this.shadowLabel,this.shadowField),this.fileInput.after(o,l));var d=this.fileInput.attr("value");d&&d.length>0&&(this.shadowField.val(d),this.fileInput.attr("value","")),this.textInput=this.shadowField,this.svg=n.parent().find(".trigger"),this.svgClose=n.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",function(e){var i=!1;13===e.which||32===e.which?(n.parent().find('[type="file"]').trigger("click"),i=!0):8===e.which&&(m.browser.isIE11()&&e.preventDefault(),t.clearUploadFile(),i=!0),i&&e.stopPropagation()}),this.svg.on("click.fileupload",function(e){t.fileInput.trigger("click"),i&&t.fileInput.data("handleEvent".concat([e.type||""]),e.handleObj)}),this.svgClose.on("click.fileupload",function(e){t.clearUploadFile(),i&&t.fileInput.data("handleEvent +".concat([e.type||""]),e.handleObj)}),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),n.hasClass("required")&&(this.shadowLabel.addClass("required"),n.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate(),this.shadowLabel.addClass(this.fileInput.attr("data-validate"))),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",function(){this.files.length>0?(e.textInput.val(this.files[0].name).trigger("change"),e.svgClose.show().addClass("is-visible")):e.clearing||e.clearUploadFile()}),this.fileInput.on("click.fileupload",function(e){var n=t.fileInput.data("handleEvent".concat([e.type||""]));n&&n.type===e.type&&"fileupload"===e.handleObj.namespace&&(t.fileInput.data("handleEvent".concat([e.type||""]),null),e.preventDefault())}),this.textInput.on("dragenter.fileupload",function(){t.fileInput.css("z-index","1")}),this.textInput.on("dragleave.fileupload, dragend.fileupload, drop.fileupload",function(){setTimeout(function(){t.fileInput.css("z-index","-1")},1)}),C.addAttributes(n,this,this.settings.attributes),C.addAttributes(this.svg,this,this.settings.attributes,"btn-trigger"),C.addAttributes(this.svgClose,this,this.settings.attributes,"btn-trigger-close")},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.fileInput.prev("label"),this.textInput.off(),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,vi)),this},destroy:function(){this.unbind(),this.shadowField.remove(),this.shadowLabel.remove(),$.removeData(this.element[0],"fileupload")},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(t){return this.each(function(){var e=$.data(this,"fileupload");e?e.updated(t):e=$.data(this,"fileupload",new bi(this,t))})};var yi={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function wi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,yi),this.init()}wi.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var t,e=this.settings,n=e.isStandalone?e.standaloneClass:"";if(e.textDropArea=e.textDropArea||R.translate("TextDropArea"),e.textDropAreaWithBrowse=e.textDropAreaWithBrowse||R.translate("TextDropAreaWithBrowse"),e.textBtnCancel=e.textBtnCancel||R.translate("TextBtnCancel"),e.textBtnCloseError=e.textBtnCloseError||R.translate("TextBtnCloseError"),e.textBtnRemove=e.textBtnRemove||R.translate("TextBtnRemove"),e.errorAllowedTypes=e.errorAllowedTypes||"<em>".concat(R.translate("Error"),"</em>: ").concat(R.translate("ErrorAllowedTypes")),e.errorMaxFileSize=e.errorMaxFileSize||"<em>".concat(R.translate("Error"),"</em>: ").concat(R.translate("ErrorMaxFileSize")),e.errorMaxFiles=e.errorMaxFiles||"<em>".concat(R.translate("Error"),"</em>: ").concat(R.translate("ErrorMaxFiles")),e.errorMaxFiles=e.errorMaxFiles.replace("{n}",e.maxFiles),e.errorMaxFilesInProcess=e.errorMaxFilesInProcess||"<em>".concat(R.translate("Error"),"</em>: ").concat(R.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(e.isDisabled=!0),e.isDisabled&&(n+=" is-disabled"),e.showBrowseButton){var i="",a=C.uniqueId(this.element,"fileupload-adv-"),s=e.allowedTypes.split(/[\s|]+/g),r=e.maxFilesInProcess>1?" multiple":"";if(r+=e.isDisabled?" disabled":"",1===s.length)"*"!==s[0]&&(i=".".concat(s[0]));else for(var o=0,l=s.length;o<l;o++)i+=".".concat(s[o]+(o!==l-1?",":""));t=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(e.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(a,'" accept="').concat(i,'"').concat(r," />\n            </label>\n          </div>\n        </div>")}else t=""+'<div class="fileupload-wrapper '.concat(n,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(e.textDropArea,"</p>\n          </div>\n        </div>");h.append(this.element,t,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element),C.addAttributes(this.dropArea,this,this.settings.attributes),C.addAttributes(this.dropArea.find("svg"),this,this.settings.attributes,"icon"),C.addAttributes(this.dropArea.find("label"),this,this.settings.attributes,"label")},handleEvents:function(){var t=this,e=this,n=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",function(t){e.element.triggerHandler("filesdragenter"),t.stopPropagation(),t.preventDefault(),n.isDisabled||$(this).addClass("hover")}).on("dragover.fileuploadadvanced",function(t){t.stopPropagation(),t.preventDefault()}).on("drop.fileuploadadvanced",function(t){var i=t.originalEvent.dataTransfer.files;t.preventDefault(),n.isDisabled||(e.element.triggerHandler("filesdroped",[i]),$(this).removeClass("hover is-focus"),e.handleFileUpload(i))}),n.showBrowseButton&&!n.isDisabled){var i=this.dropArea.find(".fileupload-adv-browse-lbl"),a=i.find('input[type="file"]');i.click(function(t){$(t.target).is('.hyperlink, input[type="file"]')||t.preventDefault()}),a.hideFocus(),a.on("hidefocusremove.fileuploadadvanced",function(e){e.stopPropagation(),t.dropArea.addClass("is-focus")}).on("hidefocusadd.fileuploadadvanced",function(e){e.stopPropagation(),t.dropArea.removeClass("is-focus")}).on("change.fileuploadadvanced",function(t){t.stopPropagation(),e.handleFileUpload(this.files)})}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",function(t){t.stopPropagation(),t.preventDefault(),"dragover"===t.type&&e.dropArea.removeClass("hover")})},handleFileUpload:function(t){var e=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0;var n=this.totalCompleted+t.length+$(".progress",this.element).length;if(n>e.maxFiles)this.showError(e.errorMaxFiles);else if(n>e.maxFilesInProcess)this.showError(e.errorMaxFilesInProcess);else{for(var i=e.fileName.replace("[]",""),a=0,s=t.length;a<s;a++)if(this.isFileTypeAllowed(t[a].name))if(-1!==e.maxFileSize&&t[a].size>e.maxFileSize)this.showError(e.errorMaxFileSize,t[a]);else{this.element.triggerHandler("beforecreatestatus",[t[a]]);var r=new FormData;r.append("".concat(i,"[]"),t[a]);var o=this.createStatus(t[a]);o.container.find(".status-icon .action").focus(),this.element.triggerHandler("aftercreatestatus",[t[a]]),"function"==typeof e.send?e.send(r,o):this.sendFileToServer(r,o)}else this.showError(e.errorAllowedTypes,t[a]);e.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}},createStatus:function(t){var e=this,n=this,i=this.settings,a=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(i.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(t.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(t.size),'</span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),s=$(".action",a).button(),r=$(".l-pull-right",a),o=$(".progress-bar",a).progress({animationLength:10});return this.dropArea.after(a),{file:t,container:a,setProgress:function(n){e.element.triggerHandler("fileprogress",[{file:t,progress:n}]),o.attr("data-value",n).triggerHandler("updated")},setAbort:function(n){s.on("click.fileuploadadvanced",function(){e.element.triggerHandler("fileaborted",[t]),n&&"function"==typeof n.abort&&n.abort(),s.off("click.fileuploadadvanced"),a.remove()})},setCompleted:function(e){e=e&&"function"==typeof e.remove?e:{remove:function(){}},a.addClass("completed"),s.after($.createIcon("check")),r.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(i.textBtnRemove,"</span>\n        </button>")),$(".action",r).button().on("click.fileuploadadvanced",function(){$(this).off("click.fileuploadadvanced"),a.remove(),e.remove(),n.element.triggerHandler("fileremoved",[t])}),o.destroy(),s.off("click.fileuploadadvanced"),s.add(o.closest(".progress-row")).remove(),n.totalCompleted++,n.element.triggerHandler("filecompleteuploading",[t])}}},sendFileToServer:function(t,e){var n={remove:function(){}},i=0,a=parseFloat(e.file.size),s=new $.fn.timer(function(){e.setCompleted(n)},a);$(s.event).on("update",function(t,n){i=Math.ceil(n.counter/a*100),e.setProgress(i)}),e.setAbort({abort:function(){}})},showError:function(t,e){var n,i=this.settings;n=t===i.errorMaxFiles||t===i.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(i.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="msg">').concat(t,"</span>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(i.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="description">').concat(e.name,'</span>\n            <div class="l-pull-right">\n              <span class="size">').concat(this.formatFileSize(e.size),'</span>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(t,"</p>\n          </div>\n        </div>")),$(".action",n).button().on("click.fileuploadadvanced",function(){n.remove()}),this.dropArea.after(n)},isFileTypeAllowed:function(t){var e=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),n=t.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(n,e)<0)},formatFileSize:function(t){var e=1e9,n=1e6;return"number"!=typeof t?"":t>=e?"".concat((t/e).toFixed(2)," GB"):t>=n?"".concat((t/n).toFixed(2)," MB"):"".concat((t/1e3).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled")},disable:function(){this.settings.isDisabled=!0,this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled")},unbind:function(){this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced");var t=$(".fileupload-wrapper",this.element);return t.off().find("*").off(),t.remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,yi)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(t){return this.each(function(){var e=$.data(this,"fileuploadadvanced");e?e.updated(t):e=$.data(this,"fileuploadadvanced",new wi(this,t))})};var xi={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,useSmall:!1,timeout:100};function Ci(t,e){this.settings=C.mergeSettings(t,e,xi),this.element=$(t),this.init()}Ci.prototype={get state(){var t=this.rowsAndCols.length,e=t?this.rowsAndCols[0].length:0,n=this.settings;return-1===this.rowsAndCols[t-1].indexOf(!1)&&(t-=1),void 0===this.editing&&(this.editing=n.editing),{rows:t,cols:e,containerHeight:n.gutterSize+(n.gutterSize+n.widgetHeight)*t,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){this.isTransitionsSupports=this.supportsTransitions(),this.setSmall(),this.setColumns(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},setColumns:function(){var t=this.settings.columns,e=parseInt(this.element.attr("data-columns"),10);isNaN(e)||t===e||t!==xi.columns||(t=e),this.columns=t},setSmall:function(){var t=this.settings,e=this.element.attr("data-use-small");if(t.useSmall||e&&"true"===e.toString().toLowerCase()){var n=xi,i={gutterSize:24,widgetWidth:260,widgetHeight:260};t.useSmall=!0,t.gutterSize===n.gutterSize&&(t.gutterSize=i.gutterSize),t.widgetWidth===n.widgetWidth&&(t.widgetWidth=i.widgetWidth),t.widgetHeight===n.widgetHeight&&(t.widgetHeight=i.widgetHeight)}},initColumns:function(t){t=t||0,this.rowsAndCols[t]=[];for(var e=0,n=this.columns;e<n;e++)this.rowsAndCols[t][e]=!0},initHeroWidget:function(){var t=$(".hero-widget");t.length>1&&(t=t.not(":first").remove()),this.heroWidget=t},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var t=this,e=this,n=e.element.find(".card, .widget, .small-widget");void 0===e.editing&&(e.editing=e.settings.editing),e.editing?(n.attr("draggable",!0),n.css("cursor","move"),e.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),n.each(function(n,i){var a=$(i),s=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!a.hasClass("no-remove")){var r=a.children(".widget-header");s.insertBefore(r).on("click.card-remove",function(){var n=function(){var t=a.clone(!0);a.remove(),e.refresh(!1),setTimeout(function(){e.element.triggerHandler("removecard",[a,e.state]),t.triggerHandler("removecard",[a,e.state]),t.remove()},0)};if(t.settings&&"function"==typeof t.settings.onBeforeRemoveCard){var i=t.settings.onBeforeRemoveCard(a);i&&i.then&&"function"==typeof i.then?i.then(function(){return n()}):i&&n()}else n()})}}),n.on("mouseenter.card",function(){var t=$(this),n=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",function(i){i.stopPropagation(),i.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(i){var a=i.clientX-t.offset().left;a<e.settings.widgetWidth/2?n.css({left:e.settings.widgetWidth/2}):t.width(a)}).on("mouseup.handle",function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-width triple-width quad-width quintuple-width");var n=t.width()/e.settings.widgetWidth;n>4.5?t.addClass("quintuple-width"):n>3.5?t.addClass("quad-width"):n>2.5?t.addClass("triple-width"):n>1.5&&t.addClass("double-width"),$(".ui-resizable-handle").remove(),t.css({opacity:1,width:""}),e.refresh(!1),setTimeout(function(){t.triggerHandler("resizecard",[t,e.state]),e.element.triggerHandler("resizecard",[t,e.state])},0)})}),i=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",function(n){n.stopPropagation(),n.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(n){var a=n.clientY-t.offset().top;a<e.settings.widgetHeight?i.css({top:e.settings.widgetHeight}):t.height(a)}).on("mouseup.handle",function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-height"),t.height()/e.settings.widgetHeight>1.5&&t.addClass("double-height"),$(".ui-resizable-handle").remove(),t.css({opacity:1,height:""}),e.refresh(!1),setTimeout(function(){t.triggerHandler("resizecard",[t,e.state]),e.element.triggerHandler("resizecard",[t,e.state])},0)})});0===t.has(".ui-resizable-handle").length&&t.append(n,i),t.addClass("editable-hover-border")}).on("mouseleave.card",function(){var t=$(this);t.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),t.removeClass("editable-hover-border")}).on("dragstart.card",function(){$(this).addClass("is-dragging")}).on("dragover.card",function(t){t.preventDefault()}).on("dragenter.card",function(t){t.preventDefault();var n=$(this),i=$(".is-dragging");n.is(i)&&0===$(".drop-indicator").length||(i.index()<n.index()?(e.guide.css("right","-14px"),e.guide.css("left","")):(e.guide.css("left","-14px"),e.guide.css("right","")),n.append(e.guide),e.refresh(!1))}).on("dragend.card",function(){var t=$(this);if(t.hasClass("is-dragging")){var i=$(n).has(".drop-indicator");t.index()<i.index()?t.insertAfter(i):t.insertBefore(i),t.removeClass("is-dragging"),e.guide.remove(),e.refresh(!1),setTimeout(function(){t.triggerHandler("reordercard",[t,e.state]),e.element.triggerHandler("reordercard",[t,e.state])},0)}})):(n.attr("draggable",!1),n.css("cursor","auto"),n.children(".card-remove").remove(),n.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function(t){void 0!==t&&(this.editing=t,this.initEdit(),this.refresh(!1))},getAvailability:function(t){for(var e=!1,n={},i=this.rowsAndCols.length,a=0,s=i;a<s&&!e;a++)for(var r=0,o=!0,l=this.rowsAndCols[a].length;r<l&&!e;r++)if(this.rowsAndCols[a][r]&&t.w+r<=l){if(t.w>1&&l>r+1)for(var c=0;c<t.w;c++)if(!this.rowsAndCols[a][r+c]){o=!1;break}if(t.h>1&&i>a+1)for(var d=0;d<t.h;d++)if(!this.rowsAndCols[a+d][r]){o=!1;break}o&&(n.row=a,n.col=r,e=!0)}return Object.getOwnPropertyNames(n).length||(this.initColumns(i),n.row=i,n.col=0),n},fitBlock:function(t,e,n){var i=!0;if(n.x=e,n.y=t,1===n.w&&1===n.h)this.rowsAndCols[t][e]=!1;else if(1!==n.w)for(var a=t,s=n.h+t;a<s;a++)for(var r=e,o=n.w+e;r<o;r++)this.rowsAndCols[a]||this.initColumns(a),this.rowsAndCols[a][r]=!1;else for(var l=t,c=n.h+t;l<c;l++)for(var d=e,u=n.h+e;d<u;d++)this.rowsAndCols[l]||this.initColumns(l),this.rowsAndCols[l][e]=!1;for(var h=0,p=this.rowsAndCols[t].length;h<p;h++)this.rowsAndCols[t][h]&&(i=!1);i&&(this.rowsAndCols[t+1]||this.initColumns(t+1))},setBlocks:function(){var t=this.element.find(".card, .widget, .small-widget");this.blocks=[];for(var e=0,n=t.length;e<n;e++){var i,a=$(t[e]),s=a.hasClass("double-height")?2:1;i=a.hasClass("sextuple-width")?6:a.hasClass("quintuple-width")?5:a.hasClass("quad-width")?4:a.hasClass("triple-width")?3:a.hasClass("double-width")?2:1,this.blocks.push({w:i,h:s,elem:a,text:a.text()})}if(this.columns>1)for(var r=0,o=0,l=0,c=this.blocks.length;r<c;r++)this.blocks[r].w>=this.columns&&r&&l&&l<=this.columns/2&&this.arrayIndexMove(this.blocks,r,o),(l+=this.blocks[r].w)>=this.columns&&(l=0,o=this.blocks[o].w>=this.columns?o+1:r)},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},resize:function(t,e){var n,i=6*t.settings.widgetWidth+5*t.settings.gutterSize,a=5*t.settings.widgetWidth+4*t.settings.gutterSize,s=4*t.settings.widgetWidth+3*t.settings.gutterSize,r=3*t.settings.widgetWidth+2*t.settings.gutterSize,o=2*t.settings.widgetWidth+t.settings.gutterSize,l=t.settings.widgetWidth,c=i,d=t.element.outerWidth(),u=d>=i,h=d>=a&&d<=i,p=d>=s&&d<=a,f=d>=r&&d<=s,g=d>=o&&d<=r,m=d<=o,v=t.element.find("> .content");this.setColumns(),(u||6===t.columns)&&(n=6,c=i),(h||5===t.columns)&&(n=5,c=a),(p||4===t.columns)&&(n=4,c=s),(f||3===t.columns)&&(n=3,c=r),(g||2===t.columns)&&(n=2,c=o),(m||1===t.columns)&&(n=1,c=l),t.columns=n||this.settings.columns,v.length&&(v[0].style.marginLeft="-".concat(c/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var b=0,y=t.blocks.length;b<y;b++){var w=t.blocks[b];w.elem.removeClass("to-single to-double to-triple to-quad to-quintuple"),w.w>t.columns&&(w.w=t.columns,1===t.columns?w.elem.addClass("to-single"):2===t.columns?w.elem.addClass("to-double"):3===t.columns?w.elem.addClass("to-triple"):4===t.columns?w.elem.addClass("to-quad"):5===t.columns&&w.elem.addClass("to-quintuple"));var x=t.getAvailability(w),C=t.settings.widgetWidth+t.settings.gutterSize,k=C*t.columns,T={left:R.isRTL()?k-(C*w.w+C*x.col):C*x.col,top:(t.settings.widgetHeight+t.settings.gutterSize)*x.row};if(e&&!this.editing){var A=t.settings.easing;"blockslide"===A?t.isTransitionsSupports?(t.applyCubicBezier(w.elem,[.09,.11,.24,.91]),w.elem[0].style.left="".concat(T.left,"px"),w.elem[0].style.top="".concat(T.top,"px")):w.elem.animate(T,t.settings.timeout):w.elem.animate(T,t.settings.timeout,A)}else t.isTransitionsSupports&&t.applyCubicBezier(w.elem,null),w.elem[0].style.left="".concat(T.left,"px"),w.elem[0].style.top="".concat(T.top,"px");t.fitBlock(x.row,x.col,w)}t.element.triggerHandler("resize",[t.columns,t.state])},applyCubicBezier:function(t,e){var n=e?"all .3s cubic-bezier(".concat(e,")"):"none";t[0].style["-webkit-transition"]=n,t[0].style["-moz-transition"]=n,t[0].style["-ms-transition"]=n,t[0].style["-o-transition"]=n,t[0].style.transition=n},supportsTransitions:function(){var t=document.createElement("p").style,e="transition";if("string"==typeof t[e])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0,a=n.length;i<a;i++)if("string"==typeof t[n[i]+e])return!0;return!1},refresh:function(t){var e=this;setTimeout(function(){t=void 0!==t?t:e.settings.animate,e.resize(e,t)},0)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,xi)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function(){var t=this;$("body").on("resize.homepage",function(){t.resize(t,t.settings.animate)}),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",function(){t.resize(t,t.settings.animate)})}},$.fn.homepage=function(t){return this.each(function(){var e=$.data(this,"homepage");e?e.updated(t):e=$.data(this,"homepage",new Ci(this,t))})};var ki=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),Ti={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],footerContainment:!0,footerContainmentClass:null,pageSelectorInputText:null,showPageSelectorInput:!1,showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",pageSizeSelectorTextNoToken:"RecordsPerPageNoToken",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1},attributes:null,tabbable:!0};function Ai(t,e){this.settings=C.mergeSettings(t,e,Ti),this.settings.dataset=e.dataset,this.element=$(t),this.init()}Ai.prototype={get state(){var t,e,n,i=0,a=1,s=this.settings.indeterminate,r=this.settings.pagesize,o=this.previousOperation,l=this.previousTrigger,c=this.settings.dataset;return isNaN(this.serverDatasetTotal)?c&&c.length&&(i=c.length,this.isFilteredClientside&&(i=c.filter(function(t){return!t._isFilteredOut}).length)):i=this.serverDatasetTotal,this.grandTotal&&(n=this.grandTotal),a=s?999999999:i<1?1:Math.ceil(i/r),isNaN(this.filteredTotal)||(e=this.filteredTotal,s?a=999999999:t=e<1?1:Math.ceil(e/r)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:n,pagesize:r,pages:a,trigger:l,total:i,type:o,filteredActivePage:this.filteredActivePage,filteredTotal:e,filteredPages:t}},get pagingInfo(){return B("state","pagingInfo"),this.state},get focusableElements(){return C.getArrayFromList(this.pagerBar[0].querySelectorAll(ki))},get numberButtons(){if(!this.isTable){var t=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return C.getArrayFromList(t)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var t=Number(this.element.attr("data-pagesize"));isNaN(t)||(this.settings.pagesize=t),this.element.removeAttr("data-pagesize")}-1===this.settings.pagesizes.indexOf(this.settings.pagesize)&&(this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort(function(t,e){return t-e})),this.handleDeprecatedSettings();var e=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),e.length&&e[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":R.translate("Pagination")}),this},createPagerBar:function(){var t=this;if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length&&this.settings.footerContainment)){var e=this;["widget","card"].forEach(function(n){var i=e.element.closest(".".concat(n,"-content"));if(i.length){var a=i.next(".".concat(n,"-footer"));a.length||(a=$('<div class="'.concat(n,'-footer"></div>')).insertAfter(i)),t.settings.footerContainmentClass&&a.addClass(t.settings.footerContainmentClass.toString()),e.pagerBar.appendTo(a)}})}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(B("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var t=this;this.pagerBar.on("click.pager",".btn-icon",function(e){var n=e.currentTarget,i=n.parentNode,a=document.querySelector(".datagrid-cell-wrapper .dropdown"),s=document.querySelector(".datagrid-dropdown-list");if(e.preventDefault(),$(this).attr("disabled"))return!1;if(s){var r=a.parentNode.parentNode;s.remove(),r.classList.remove("is-editing")}var o=t.state,l=o.activePage;if(o.filteredTotal&&(l=o.filteredActivePage),h.hasClass(i,"pager-prev"))return t.setActivePage(l-1,!1,"prev"),t.triggerPagingEvents(l),!1;if(h.hasClass(i,"pager-next"))return t.setActivePage((-1===l?1:l)+1,!1,"next"),t.triggerPagingEvents(l),!1;if(h.hasClass(i,"pager-first"))return t.setActivePage(1,!1,"first"),t.triggerPagingEvents(l),!1;if(h.hasClass(i,"pager-last"))return t.setActivePage(t.pageCount(),!1,"last"),t.triggerPagingEvents(l),!1;var c=Number(n.getAttribute("data-page"));return(isNaN(c)||c<1)&&(c=1),t.setActivePage(c,!1,"page"),t.triggerPagingEvents(l),!1}),t.pagerBar.on("keydown.pager",$(t.focusableElements),function(e){if($(".popupmenu.is-open").length>0||t.settings.tabbable)return!0;var n=(e=e||window.event).which||e.keyCode||e.charCode||!1,i=37===n||40===n,a=39===n||38===n,s=e.target;if("INPUT"===s.nodeName&&(i=40===n,a=38===n),!i&&!a)return!0;var r="INPUT"===s.nodeName?s.parentNode.parentNode:s.parentNode,o=r.nextSibling,l=r.previousSibling,c=null===l,d=null===o;if(e.preventDefault(),i&&!c){var u=l.querySelector("button, input");return u.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),u.focus(),!1}if(i&&c){var h=r.parentNode.lastChild.querySelector("button, input");return h.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),h.focus(),!1}if(a&&!d){var p=o.querySelector("button, input");return p.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),p.focus(),!1}if(a&&d){var f=r.parentNode.firstChild.querySelector("button, input");f.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),f.focus()}return!1})},reset:function(t,e){this.activePage=this.settings.activePage,this.previousOperation=t,this.previousTrigger=e,this.teardown(),this.init()},showPageSizeSelector:function(t){t="true"==="".concat(t).toLowerCase(),this.settings.showPageSizeSelector=t,t&&(this.isShowPageSizeSelectorCall=t)},showButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var n=".pager-".concat(t," .btn-icon");"previous"===t&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);e="true"==="".concat(e).toLowerCase(),this.settings["show".concat(E.capitalize(t),"Button")]=e,i&&(e?i.parentNode.classList.remove("hidden"):i.parentNode.classList.add("hidden"))}},enableButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var n=".pager-".concat(t," .btn-icon");"previous"===t&&(n=".pager-prev .btn-icon");var i=this.pagerBar[0].querySelector(n);if(e="true"==="".concat(e).toLowerCase(),this.settings["enable".concat(E.capitalize(t),"Button")]=e,i){var a=$(i),s=this.settings["".concat(t,"PageTooltip")];if(e){i.disabled=!1,i.parentNode.classList.remove("is-disabled"),a.removeAttr("disabled aria-disabled");var r=a.data("tooltip");r&&!r.content&&(r.content=s)}else i.disabled=!0,i.parentNode.classList.add("is-disabled"),a.attr({disabled:"disabled","aria-disabled":"true"}),a.find(".disabled-tooltip").length||(a.data("tooltip").destroy(),a.append('<div class="disabled-tooltip" title="'.concat(s,'"></div>')),a.find(".disabled-tooltip").tooltip())}}},setActivePage:function(t,e,n){var i="number"==typeof t.searchActivePage||"number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage,s=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===a(t)?s=i?t.filteredActivePage||t.searchActivePage:t.activePage?t.activePage:1:isNaN(t)||(s=t),i?this.filteredActivePage=s:this.activePage=s,this.previousOperation=n,this.render(),void 0===s||0===s||isNaN(s)||s===this.activePage&&!e?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),s)},adjustPageCount:function(t){var e=this.state,n="number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage,i=e.pages;return n&&e.filteredPages&&(i=e.filteredPages),(t<1||t>i)&&(t=this.filteredActivePage||this.activePage),t},pageCount:function(t){var e=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===t&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==t||this.settings.source||e?(void 0!==t&&(this._pageCount=t),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function(){var t,e=this.activePage,n=this.state.pages,i="",a=!1,s=!1,r=!1,o=!1,l=!this.settings.enableFirstButton,c=!this.settings.enablePreviousButton,d=!this.settings.enableNextButton,u=!this.settings.enableLastButton,h=this.settings.indeterminate&&!0===this.firstPage,p=this.settings.indeterminate&&!0===this.lastPage,f=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(e=this.state.filteredActivePage,n=this.state.filteredPages),this.pagerBar&&(null===(t=this.pagerBar)||void 0===t||null==t||t.children("li").find("> .btn-icon, > .btn-icon[disabled] .disabled-tooltip").each(function(t,e){var n=$(e);n.data("tooltip")&&n.data("tooltip").destroy()})),this.settings.showFirstButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(l=!0),a=!0),this.settings.showPreviousButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(c=!0),s=!0),this.settings.showNextButton&&((p||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===n)&&(d=!0),r=!0),this.settings.showLastButton&&((p||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===n)&&(u=!0),o=!0);var g=[],m=this.settings.showPageSizeSelector?190:0,v=(this.pagerBar.width()-m)/40,b=Math.floor(v);if((s||r)&&(b-=1),(o||a)&&(b-=1),!this.isTable&&"standalone"!==this.settings.type&&f&&b>=n&&(l=!0,u=!0),!this.settings.indeterminate){for(var y=Math.floor(b/2),w=e-y,x=e+y;w<1;)++w,x<n&&++x;for(;x>n;)w>1&&--w,--x;for(var C=w;C<x+1;C++)g.push(C)}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="",c="",d="",u="",h="";i&&(h=' data-page="'.concat(i,'"')),n&&(u=' title="'.concat(n,'"')),o&&(a+=" hidden"),s&&(a+=" selected",l=' aria-disabled="true"'),r&&(c=" disabled",l=' aria-disabled="true"',d='<div class="disabled-tooltip"'.concat(u,"></div>"),i||(u=""));var p='<li class="'.concat(a,'">\n        <button type="button" class="btn-icon"').concat(u).concat(h).concat(l).concat(c,">\n          ").concat(d,"<span>").concat(e,"</span>\n          ").concat(t,"\n        </button>\n      </li>");return p}if($(this.numberButtons).remove(),a&&(i+=k($.createIcon({icon:"first-page"}),R.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,l,!1)),s&&(i+=k($.createIcon({icon:"previous-page"}),R.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,c,!1)),!this.isTable&&f&&!this.settings.showPageSelectorInput){var T="";g.forEach(function(t){T+=t===(e||1)?k(t,R.translate("PageOn"),null,t,"pager-no",!0,!1,!1):k(t,R.translate("Page"),null,t,"pager-no",!1,!1,!1)}),i+=T}r&&(i+=k($.createIcon({icon:"next-page"}),R.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,d,!1)),o&&(i+=k($.createIcon({icon:"last-page"}),R.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,u,!1)),this.pagerBar[0].innerHTML=i,o||a||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate||this.settings.showPageSelectorInput){var t=this.activePage,e=this.state.pages||1;if(this.state.filteredPages&&(t=this.state.filteredActivePage,e=this.state.filteredPages),this.pageSelectorInput)e>1&&this.pagerBar.find(".pager-total-pages").text(e),this.pagerBar.find(".pager-count input").val(t);else{var n=this.settings.pageSelectorInputText||R.translate("PageOf");n=(n=n.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(t,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(e,"</span>")),$('<li class="pager-count"><label>'.concat(n," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var i=null,a="".concat(e).replace(/\d/g,"#"),s=this,r={pattern:a,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(r).on("focus",function(){i=parseInt($(this).val(),10)}).on("blur",function(){o($(this)),i=null}).on("keydown",function(t){return 13!==t.which||(o($(this)),t.stopPropagation(),t.preventDefault(),!1)})}function o(t){var e=s.adjustPageCount(parseInt(t.val(),10));if(i!==e){var n=s.activePage;s.state.filteredPages&&(n=s.state.filteredActivePage),t.val(s.setActivePage(e,!1,"page")),s.triggerPagingEvents(n)}else t.val(i)}},renderPageSizeSelectorButton:function(){var t=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var e=$('<li class="pager-pagesize"></li>'),n=$.createIcon({icon:"dropdown"}),i=R.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),a="",s="<span>".concat(i,"</span>");this.showSmallPageSizeSelector&&(a=' class="audible"',i=R.translate(this.settings.pageSizeSelectorTextNoToken),s='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(a,">").concat(i,"</span>"));var r=$('<button type="button" class="btn-menu">\n        '.concat(s,"\n        ").concat(n,"\n      </button>")).appendTo(e);e.appendTo(this.pagerBar);var o="";this.showSmallPageSizeSelector&&(o='<li class="heading">'.concat(i,"</li>"));for(var l=0;l<this.settings.pagesizes.length;l++){var c=this.settings.pagesizes[l];o+='<li class="'.concat(c===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(c,"</a></li>")}var d=$('<ul class="popupmenu is-selectable">'.concat(o,"</ul>"));r.after(d)}var u=$(this.pageSizeSelectorButton),h=C.extend({},{placementOpts:{parent:u,parentXAlignment:R.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);if(u.popupmenu(h),u.on("selected.pager",function(e,n){t.changePageSize(n)}),this.settings.tabbable){var p=u.data("popupmenu");this.pagerBar.off("keydown.".concat("pager"),".pager-pagesize button").on("keydown.".concat("pager"),".pager-pagesize button",function(t){40===(t.which||t.keyCode||t.charCode)&&p&&!p.isOpen&&(p.open(),t.preventDefault(),t.stopPropagation())})}}},render:function(){var t=this.state,e=t.pages;this.preserveFocus=this.preserveFocus||!1;var n=$(":focus").closest(".pager-pagesize").length>0;!this.preserveFocus&&n&&(this.preserveFocus=!0),t.filteredPages&&(e=t.filteredPages),this.pageCount(e),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar(),this.preserveFocus&&this.element.find(".pager-pagesize button").focus()},renderBar:function(t){var e,n,i=this,a=(t=t?C.extend({},this.state,t):this.state).activePage;t.filteredActivePage&&(a=t.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==t.firstPage&&(!1===t.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==t.firstPage&&1!==a||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==t.lastPage&&(!1===t.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==t.lastPage&&a!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var s=this.pagerBar[0]?this.pagerBar[0].classList:null;this.hidePagerBar(t)&&s?s.add("hidden"):this.settings.hideOnOnePage&&s&&s.contains("hidden")&&s.remove("hidden"),this.initTabIndexes(),C.addAttributes(this.pagerBar,this,this.settings.attributes),C.addAttributes(this.pagerBar.find(".pager-first button"),this,this.settings.attributes,"btn-first"),C.addAttributes(this.pagerBar.find(".pager-prev button"),this,this.settings.attributes,"btn-prev"),C.addAttributes(this.pagerBar.find(".pager-next button"),this,this.settings.attributes,"btn-next"),C.addAttributes(this.pagerBar.find(".pager-last button"),this,this.settings.attributes,"btn-last"),C.addAttributes(this.pagerBar.find(".pager-pagesize button"),this,this.settings.attributes,"btn-pagesize"),C.addAttributes(this.pagerBar.find("input"),this,this.settings.attributes,"pagesize-input"),this.pagerBar.find(".pager-pagesize .popupmenu li").each(function(){var t=$(this).find("a"),e=t.text();C.addAttributes(t,i,i.settings.attributes,"pagesize-opt-".concat(e))});var r=null===(e=this.pagerBar.find(".btn-menu"))||void 0===e||null===(n=null==e?void 0:e.data("popupmenu"))||void 0===n||null==n?void 0:n.menu;r&&r.find("li").each(function(){var t=$(this).find("a"),e=t.text();C.addAttributes(t,i,i.settings.attributes,"pagesize-opt-".concat(e))})},initTabIndexes:function(){if(!this.settings.tabbable){var t=$(this.focusableElements);t.attr("tabindex","-1"),t.filter(":not([disabled])").first().removeAttr("tabindex")}},triggerPagingEvents:function(t){var e=this.state;t||(t=this.state.activePage),"first"===e.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,e),this.element.trigger("firstpage",e)),"prev"===e.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,e),this.element.trigger("previouspage",e)),"next"===e.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,e),this.element.trigger("nextpage",e)),"last"===e.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,e),this.element.trigger("lastpage",e)),"pageinfo"!==e.type&&this.element.trigger("page",e)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),Array.isArray(t.pagesizes)&&t.pagesizes.length&&(this.settings.pagesizes=t.pagesizes);var e={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(e),this},changePageSize:function(t){var e=t;e.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),e.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(e.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:t,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:t,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(t,e){if(t){if(t.pagesize&&(this.settings.pagesize=t.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=t.pagesize)),t.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==t.firstPage&&(this.firstPage=t.firstPage,this.settings.enableFirstButton=!t.firstPage,this.settings.enablePreviousButton=!t.firstPage),void 0!==t.lastPage&&(this.lastPage=t.lastPage,this.settings.enableNextButton=!t.lastPage,this.settings.enableLastButton=!t.lastPage),isNaN(t.grandTotal)||(this.grandTotal=t.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=t.total),isNaN(t.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=t.filteredTotal,this.filteredActivePage=t.searchActivePage||t.filteredActivePage||1),t.type||(t.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(t,!1,t.type),void("initial"===t.type||e||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(t){return!!(this.settings.hideOnOnePage&&t.total<=t.pagesize)||!(!t||!0!==t.firstPage||!0!==t.lastPage||!t.hideDisabledPagers)},teardown:function(){var t;this.numberButtons&&this.numberButtons.forEach(function(t){var e=t.querySelector(".btn-icon"),n=$(e).data("button"),i=$(e).data("tooltip");n&&n.destroy(),i&&i.destroy()}),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),null===(t=$(this.pageSelectorInput).data("mask"))||void 0===t||null==t||t.destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var t=$(this.pageSizeSelectorButton).data("popupmenu");if(t&&t.menu){var e=t.menu;t.destroy(),e.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(t){return this.each(function(){var e=$.data(this,"pager");e?e.updated(t):e=$.data(this,"pager",new Ai(this,t))})};var Si={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,allowDeselect:!0,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1,attributes:null,attributesOverride:null};function Ei(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Si),this.init(),this}Ei.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var t={};this.settings.pagerSettings&&(t=this.settings.pagerSettings),t.dataset=this.settings.dataset,t.source=this.settings.source,t.type="list";for(var e=["pagesize","showPageSizeSelector"],n=0;n<e.length;n++)void 0===this.settings[e[n]]||t[e[n]]||(t[e[n]]=this.settings[e[n]]);return t},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var t=this,e=this.element.closest(".card, .widget"),n=this.element.attr("data-selectable"),i=this.element.attr("data-select-onfocus");if(this.element.attr("data-pagesize")){var s=Number(this.element.attr("data-pagesize"));isNaN(s)||(this.settings.pagesize=s),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var r=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),r.each(function(e,n){t.settings.dataset.push({text:$(n).text()})}),r.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var o=window[this.settings.dataset];o&&o.length&&(this.settings.dataset=o)}n&&n.length&&(this.settings.selectable=n),i&&i.length&&(this.settings.selectOnFocus=JSON.parse(i)),this.actionButton=e.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),this.settings.attributes&&C.addAttributes(this.element,this,this.settings.attributes,"listview",this.settings.attributesOverride),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var l=this.element.parent(".card-content, .widget-content");if(l[0]&&(l[0].style.overflow="hidden",l.css({display:"flex","justify-content":"flex-end","flex-direction":"column"})),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete"),this.searchfield.length;var c={filterMode:"contains"};"object"===a(this.settings.listFilterSettings)&&(c=C.extend({},c,this.settings.listFilterSettings)),this.listfilter=new Ce(c)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(t){var e,n={count:t.length};if(t[0]){for(e in t[0])n[e]=0;for(var i=0;i<t.length;i++)for(e in t[i])n[e]+=parseFloat(t[i][e]);return n}},render:function(t,e){var n=this,i="function"==typeof this.settings.source,s={},r=t,o=0,l=r?r.length:0,c=this.settings.pagesize,d=t.length;if(e&&(c=e.pagesize||c,d=e.filteredTotal||d),!i&&this.pagerAPI&&(this.renderPager(e,!0),e=this.pagerAPI.state),d>c&&(this.filteredDataset?e.filteredPages:e.pages)>1){var u=e.activePage>0?e.activePage-1:0;this.filteredDataset&&(u=e.filteredActivePage-1),o=e.pagesize*u,l=e.pagesize*(u+1),r=t.slice(o,l)}if("object"===a(ke)&&r&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(E.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(s=this.getTotals(t));var p=ke.compile(this.settings.template,{dataset:r,totals:s});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),r.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(p):n.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),h.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):n.emptyMessageContainer?(this.element.empty(),h.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===r.length&&this.element.html(p||"<ul></ul>")}var f=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||f.find(".card-title, .widget-title").text()||"List"});var g=this.element.find("li, tbody > tr").first(),v=this.element.find("li, tr"),b="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=g.attr("tabindex",0),this.settings.selectable||1!==g.find("a").length||g.removeAttr("tabindex");var y=v.length>r.length;v.each(function(t){var e=$(this);if(e.attr("role","option"),m.features.touch&&e.addClass("is-touch"),n.settings.attributes&&C.addAttributes(e,n,n.settings.attributes,"listview-item-".concat(t),n.settings.attributesOverride),b){n.element.addClass("is-multiselect");var i=n.element.prevAll(".toolbar");i.length&&i.data("toolbar")&&i.data("toolbar").toggleMoreMenu(),n.settings.showCheckboxes&&0===e.children(".listview-selection-checkbox").length&&e.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(R.translate("Checkbox")," ").concat(R.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}else n.element.removeClass("is-multiselect"),e.find(".listview-selection-checkbox").remove();if(y){var a=o+t;if(a<n.settings.dataset.length){var s=n.settings.dataset[a];e.css("display",void 0===s._isFilteredOut||s._isFilteredOut?"":"none")}}else e.css("display","");e.attr({"aria-posinset":o+t+1,"aria-setsize":d}),e.hasClass("is-disabled")&&e.attr("aria-disabled","true"),n.settings.highlight&&n.searchTerm&&e.highlight(n.searchTerm)}),n.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[r]),this.element.off("updated.listview").on("updated.listview",function(t,e){n.updated(e)})},renderPager:function(t,e){this.pagerAPI&&this.pagerAPI.updatePagingInfo(t,e)},getPageableElements:function(){var t=this.element.children();return t.is("ul")&&(t=t.children()),t},refresh:function(t,e){this.loadData(t,e),this.list&&this.render(this.list.data)},loadData:function(t,e,n){var i=!1,s=this;if(t=t||this.settings.dataset,this.filteredDataset&&(t=this.filteredDataset),e||(this.pagerAPI?(t.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:t}),e=this.pagerAPI.state):e={activePage:1}),this.filteredDataset?e.filteredTotal=t.length:e.total=t.length,Array.isArray(t)){var r=this.settings.source;if("string"!=typeof t||0!==t.indexOf("http")&&0!==t.indexOf("/")||(r=t,i=!0),!r&&!i||this.filteredDataset||n)this.render(t,e);else switch(a(r)){case"function":r(e,o);break;case"string":return void(0!==r.indexOf("http")&&0!==r.indexOf("/")||$.getJSON(r,o));default:this.settings.dataset=r,t=r,this.render(r,e)}}function o(e,n){s.settings.dataset=e,t=e;var i=s.pagerAPI?s.pagerAPI.activePage:1;"string"==typeof n&&(n={activePage:i,pagesize:s.settings.pagesize,total:t.length,type:n}),s.pagerAPI&&(s.renderPager(n,!0),n=s.pagerAPI.state),s.render(t,n)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(t){C.clearSelection(),t.sort(function(t,e){return t-e});for(var e=t[0];e<=t[1];e++){var n=$("li, tbody tr",this.element).eq(e);n.is(".is-disabled, .is-selected")||this.select(n)}},deselectItemsBetweenIndexes:function(t){t.sort(function(t,e){return t-e});for(var e=t[0];e<=t[1];e++){var n=$("li, tbody tr",this.element).eq(e);!n.is(".is-disabled")&&n.is(".is-selected")&&this.select(n)}},handleResize:function(){var t=$("li .listview-heading, tr .listview-heading",this.element),e=t.eq(1),n=e.width();e.length&&n&&(t[0].style.width="".concat(n,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(t,e){this.filter(e)},filter:function(t){if(t){var e=(t=$(t)).val().trim(),n={searchActivePage:1};if(e){if(e.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==e){this.searchTerm=e,this.element.unhighlight(),this.settings.dataset.forEach(function(t){t._isFilteredOut=!1});var i=this.listfilter.filter(this.settings.dataset,this.searchTerm);i.length||(i=[]),n.filteredTotal=i.length,n.searchActivePage=1,i.forEach(function(t){t._isFilteredOut=!0}),this.filteredDataset=i,this.loadData(null,n),this.element.trigger("filtered",{elem:this.element,filteredResults:i,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach(function(t){delete t._isFilteredOut}),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;this.refresh(null,{activePage:1,filteredTotal:void 0,searchActivePage:void 0})},focus:function(t){t.is(":hidden")||t.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=t.attr("tabindex",0).focus(),this.settings.selectable||1!==t.find("a").length||(t.find("a").focus(),t.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(t))},remove:function(t){"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t,!0),t.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var t=this;$.each(this.selectedItems,function(e,n){t.remove(n)})},clearAllSelected:function(){var t=this;$.each(this.selectedItems,function(e,n){t.select(n)})},sortInit:function(t,e,n){n&&""!==$.trim(n)&&$("[".concat(n,"]")).each(function(){var i=$(this),a=$.fn.parseOptions(i,n);i.on(e,function(e){$(a.list).data(t).setSortColumn(a),e.preventDefault()})})},setSortColumn:function(t){var e=t.orderBy||this.list.sort.field,n=t.order;if(this.list.data||e){n=n?"desc"===n:!(this.list.sort&&this.list.sort[e]&&this.list.sort[e].reverse),(t.reloadApi||t.reloadApiNoSort)&&this.loadData(),t.reloadApiNoSort&&(e=this.list.sort.field,n=this.list.sort[e].reverse);var i=this.sortFunction(e,n);this.list.data.sort(i),this.render(this.list.data),this.list.sort={field:e},this.list.sort[e]={reverse:n},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(t,e,n){n||(n=function(t){return"string"==typeof(t=null==t?"":t)&&(t=t.toUpperCase(),isNaN(parseFloat(t))||(t=parseFloat(t))),t});var i=n?function(e){return n(e[t])}:function(e){return e[t]};return e=e?-1:1,function(t,n){return t=i(t),n=i(n),e*((t>n)-(n>t))}},deselect:function(t){this.settings.allowDeselect&&("number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t))},unselect:function(t){return F(this.deselect,this.unselect).apply(this,[t])},select:function(t,e){var n,i=this,a="mixed"===i.settings.selectable;if(i.selectedItems=[],"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),(!(n=t.hasClass("is-selected"))||this.settings.allowDeselect)&&(t.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),t.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable)){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(t.parent().children().removeAttr("aria-selected"),t.parent().find(".is-selected").removeClass("is-selected"),i.selectedItems[0]=$(this)),n?(i.selectedItems=[],t.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(t.addClass("is-selected".concat(a?" hide-selected-color":"")),i.lastSelectedItem=t.index()),t.parent().find(".is-selected").each(function(t){i.selectedItems[t]=$(this)}),t.find(".listview-selection-checkbox input").prop("checked",!n),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var s=n?"NotSelected":"Selected";t.attr("aria-selected",!n),t.find(".label-text .audible").text("".concat(R.translate("Checkbox")," ").concat(s,"."))}if(!e){for(var r=n?"unselected":"selected",o=[],l=0;l<this.selectedItems.length;l++){var c=this.selectedItems[l][0].getAttribute("aria-posinset");o.push(this.settings.dataset[c-1])}this.element.triggerHandler(r,{selectedItems:this.selectedItems,elem:t,selectedData:o}),"unselected"===r&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:t,selectedData:o})}var d=this.element.closest(".card, .widget");d.length||(d=this.element.parent());var u=d.find(".listview-toolbar, .contextual-toolbar"),h=u.data("toolbar");if(i.selectedItems.length>0){h&&h.toggleMoreMenu(),u.one("animateopencomplete",function(){i.element.addClass("is-toolbar-open"),u.trigger("recalculate-buttons").removeClass("is-hidden")}),u[0]&&(u[0].style.display="block"),u.animateOpen({distance:40});var p=u.find(".title, .selection-count");p&&p.length||(p=$('<div class="title selection-count"></div>'),u.prepend(p)),p.text("".concat(i.selectedItems.length," ").concat(R?R.translate("Selected"):"Selected"))}else u.addClass("is-hidden").one("animateclosedcomplete",function(t){t.stopPropagation(),this.style.display="none",i.element.removeClass("is-toolbar-open")}).animateClosed()}},toggleItemActivation:function(t){t.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(t):this.activateItem(t)},activateItem:function(t){var e="number"==typeof t?t:t.index(),n=this.element.find("li.is-activated");"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),this.deactivateItem(n),!1!==this.element.triggerHandler("beforeactivate",[{index:e,elem:t,data:this.settings.dataset[e]}])&&(t.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:e,elem:t,data:this.settings.dataset[e]}]))},activatedItem:function(){var t=this.element.find("li.is-activated"),e=t.index();return{index:e,elem:t,data:this.settings.dataset[e]}},deactivateItem:function(t){"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),void 0===t&&(t=this.element.find("li.is-activated")),t.removeClass("is-activated");var e=t.index();e<0||this.element.triggerHandler("itemdeactivated",[{index:e,elem:t,data:this.settings.dataset[e]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var t=this.searchfield.data("searchfield");t&&t.xButton&&t.xButton.trigger("click")}},updated:function(t){return(null==t||null==t?void 0:t.selectable)!==this.settings.selectable&&$(this.element.children()[0]).find("li").removeClass("is-selected is-activated"),t&&(this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset)),this.updateSearch(),this.refresh(t&&t.dataset?t.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview longpress.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData("listview")},handleEvents:function(){var t=this,e=!1,n=!1,i="multiple"===t.settings.selectable||"mixed"===t.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",function(i){var a=$(this);if(!(i.originalEvent&&i.originalEvent.target&&$(i.originalEvent.target).is(".icon-favorite"))){if(a.is(":first-child")&&a.hasClass("is-disabled")){var s=$.Event("keydown.listview");s.keyCode=40,e=!0,a.trigger(s)}e||a.hasClass("is-disabled")||!t.settings.selectOnFocus||"multiple"===t.settings.selectable||"mixed"===t.settings.selectable||(t.select(a),e=!0,n=!0)}}),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",function(e){var n=$(this),a=n.is("a")?n.closest("li"):$(this),s=a.is("a")?a.closest("ul"):a.parent(),r=e.keyCode||e.charCode||0,o=e.metaKey;if(0===a.index()&&38===e.keyCode)return!1;if((40===r||38===r)&&!o){var l=40===e.keyCode?a.nextAll(":not(.is-disabled):visible:first"):a.prevAll(":not(.is-disabled):visible:first");l.length&&($(e.target).is(a)||e.shiftKey||n.is("a"))&&t.focus(l),e.preventDefault(),e.stopPropagation()}if(35===r||40===r&&o){var c=s.children().last();return t.focus(c),e.stopPropagation(),!1}if(36===r||38===r&&o){var d=s.children().first();return t.focus(d),e.stopPropagation(),!1}return 32===r&&$(e.target).is(a)&&(i&&e.shiftKey?t.selectItemsBetweenIndexes([t.lastSelectedItem,a.index()]):t.select(a),e.preventDefault()),i&&(e.ctrlKey||e.metaKey)&&65===r&&(t.toggleAll(),t.focus(a),e.preventDefault()),!0}),this.settings.selectable){this.element.addClass("is-selectable");var a=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",function(s){var r=$(this),o=$(s.target).closest(".listview-selection-checkbox").length>0,l="mixed"===t.settings.selectable,c=$(s.target);c.hasClass("icon-favorite")||c.hasClass("hyperlink")||(!r.hasClass("is-selected")&&n&&(n=!1),n||r.hasClass("is-disabled")||l&&!o||(e=!0,i&&s.shiftKey?(t.selectItemsBetweenIndexes([t.lastSelectedItem,r.index()]),s.preventDefault()):t.select(r),r.focus()),r.hasClass("is-disabled")||!l||o||(r.focus(),t.toggleItemActivation(r)),a.length>0&&$(window).outerWidth()<767&&!r.hasClass("is-disabled")&&!o&&t.element.trigger("drilldown",[r]),n=!1,s.preventDefault(),s.stopPropagation(),t.element.trigger("click",[{elem:r,data:t.settings.dataset[r.attr("aria-posinset")-1],index:r.index(),originalEvent:s}]))}),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",function(e){var n=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("dblclick",[{elem:$(this),data:t.settings.dataset[n.attr("aria-posinset")-1],index:n.index(),originalEvent:e}]),!1}),this.element.off("contextmenu.listview longpress.listview","li, tr").on("contextmenu.listview longpress.listview","li, tr",function(e){var n=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("contextmenu",[{elem:$(this),data:t.settings.dataset[n.attr("aria-posinset")-1],index:n.index(),originalEvent:e}]),!1})}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",function(t){$(this).parent().trigger("click"),t.stopPropagation()}),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",function(e){t.handleSearch(e,$(this))}).off("cleared.searchable-listview").on("cleared.searchable-listview",function(){t.resetSearch(),t.element.trigger("filtered",{elem:t.element,filteredResults:[],term:""})}),this.pagerAPI&&this.element.off("page.listview").on("page.listview",function(e,n){t.handlePageChange(n)}).off("pagesizechange.listview").on("pagesizechange.listview",function(e,n){t.handlePageSizeChange(n)}),$("body").off("resize.listview").on("resize.listview",function(e){t.handleResize(e)}),t.element.prev(".listview-header").off("click.listview").on("click.listview",function(){var e=$(this).find(".plus-minus");e.hasClass("active")?(e.removeClass("active"),t.element.animateClosed()):(e.addClass("active"),t.element.animateOpen())})},handlePageSizeChange:function(t){t.activePage=1,this.loadData(void 0,t)},handlePageChange:function(t){this.loadData(void 0,t)}},$.fn.listview=function(t){var e=$(this),n=e.attr("data-dataset"),i=e.attr("data-tmpl"),a=C.parseOptions(this)||{};a.dataset=a.dataset||n,a.template=a.template||i,window[a.dataset]&&(a.dataset=window[a.dataset]),a.template&&a.template.length&&(a.template=$("#".concat(a.template)).html());var s=C.extend({},t,a);return this.each(function(){var t=$.data(this,"listview");t?t.updated(s):t=$.data(this,"listview",new Ei(this,s))})};var $i={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",attributes:null,template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function Di(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,$i),e&&e.dataset&&(this.settings.dataset=e.dataset),this.init()}Di.prototype={init:function(){var t=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout(function(){t.setSelected()},0)},loadListview:function(){var t,e=this.settings,n=$(".listview",this.element);return e.attributes&&(t=this.getLvAutomationAttributes("-listbuilder")),!e.dataset.length&&n.length&&$("li",n).length?this.listApi=n.listview({selectable:"single",attributes:t}).data("listview"):n.length&&(this.listApi=n.listview({dataset:e.dataset,template:e.template,selectable:"single",attributes:t}).data("listview")),this},getLvAutomationAttributes:function(t){var e,n=this,i=this.settings;if(i.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(i.attributes))e=[],i.attributes.forEach(function(i){var a="function"==typeof i.value?i.value(n):i.value;e.push({name:i.name,value:a+t})});else{var a="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;e={name:i.attributes.name,value:a+t}}return e},updateLvAutomationAttributes:function(t){if(this.settings.attributes&&t){for(var e,n=this.dataset.length-1,i=!0,a=1e3;i&&a>0;){var s="-listbuilder-listview-item-".concat(n);e=this.getLvAutomationAttributes(s),i=this.findAutomationAttributesItem(e),n++,a--}C.addAttributes(t,this,e)}},findAutomationAttributesItem:function(t){var e=!1;if(this.settings.attributes&&t&&Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];if(this.listApi.element.find("[".concat(a.name,'="').concat(a.value,'"]')).length){e=!0;break}}return e},initDataset:function(){var t=this.settings,e=$(".listview li",this.element);this.dataset=[];for(var n=0,i=e.length;n<i;n++){var a=void 0,s=$(e[n]);t.dataset?(a=JSON.parse(JSON.stringify(t.dataset[n]))).node=s:a=this.extractNodeData(s),this.dataset.push(a)}return this},extractNodeData:function(t){var e={node:t,text:$.trim($(".item-content",t).text())},n=t.attr("data-value");return void 0!==n&&(e.value=n),e},setElements:function(){var t=this,e=this.settings,n=function(e){return t.isjQuery(e)?e:"string"==typeof e?$('[data-action="'.concat(e,'"]'),t.element):null};e.btnAdd=n(e.btnAdd),e.btnGoUp=n(e.btnGoUp),e.btnGoDown=n(e.btnGoDown),e.btnEdit=n(e.btnEdit),e.btnDelete=n(e.btnDelete);var i="listbuilder-btn";return C.addAttributes(e.btnAdd,this,e.attributes,"".concat(i,"-add")),C.addAttributes(e.btnGoUp,this,e.attributes,"".concat(i,"-goup")),C.addAttributes(e.btnGoDown,this,e.attributes,"".concat(i,"-godown")),C.addAttributes(e.btnEdit,this,e.attributes,"".concat(i,"-edit")),C.addAttributes(e.btnDelete,this,e.attributes,"".concat(i,"-delete")),this.topButtons=e.btnAdd.add(e.btnGoUp).add(e.btnGoDown).add(e.btnEdit).add(e.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:e.handle,placeholder:e.templateNewItem}).data("arrange"),this},handleEvents:function(){var t,e=this,n=this,i=n.settings,a=function(t,e){t.off("click.listbuilder").on("click.listbuilder",function(){n[e]()})};return a(i.btnAdd,"addItem"),a(i.btnGoUp,"moveItemUp"),a(i.btnGoDown,"moveItemDown"),a(i.btnEdit,"editItem"),a(i.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",function(t,n){var a=e.getDataByNode(n.start),s=i.templateItemContent.replace(/{{text}}/g,a.data.text);e.arrangeApi.placeholders.attr("data-value",a.data.text).find(".item-content").html(s)}).on("arrangeupdate.listbuilder",function(n,i){e.updateAttributes(),e.arrayIndexMove(e.dataset,i.startIndex,i.endIndex),(t=e.getDataByNode(i.end)).indexBeforeMove=i.startIndex,e.element.triggerHandler("arrangeupdate",[t])}),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",function(){var t=$(this);t.is(".is-selected")||t.trigger("click")}),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",function(n,i){t=e.getDataByNode(i.elem[0]),e.element.triggerHandler("selected",[t])}),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,function(t,n){e.element.triggerHandler("updated",[n])}),this},addItem:function(){var t=this,e=this.settings;$.when(this.element.triggerHandler("beforeadd")).done(function(){var n,i,a=0,s=t.listApi.selectedItems[0],r=e.templateNewItem.replace(/{{text}}/g,R.translate("NewItem"));s&&s.length>0?(a=(i=t.getDataByNode(s)).index+1,$(r).insertAfter(s),n=$("li",t.ul).eq(a)):(t.ul.prepend(r),n=$("li:first-child",t.ul)),t.dataset.push(t.extractNodeData(n)),t.arrayIndexMove(t.dataset,t.dataset.length-1,a),t.updateAttributes(),t.updateLvAutomationAttributes(n),n.trigger("click"),t.arrangeApi.updated(),t.editItem(!0),i={index:a,data:t.dataset[a]},t.element.triggerHandler("afteradd",[i])})},moveItemUp:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&n.index>0&&$.when(t.element.triggerHandler("beforegoup",[n])).done(function(){var i=e.prev();e.insertBefore(i),t.updateAttributes(),t.arrayIndexMove(t.dataset,n.index,n.index-1),n.indexBeforeMove=n.index,n.index--,t.element.triggerHandler("aftergoup",[n])})}},moveItemDown:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&n.index<t.dataset.length-1&&$.when(t.element.triggerHandler("beforegodown",[n])).done(function(){var i=e.next();e.insertAfter(i),t.updateAttributes(),t.arrayIndexMove(t.dataset,n.index,n.index+1),n.indexBeforeMove=n.index,n.index++,t.element.triggerHandler("aftergodown",[n])})}},editItem:function(t){var e=this.listApi.selectedItems[0];e&&e.length>0&&(e.is(".is-editing")?this.commitEdit(e,t):this.makeEditable(e,t))},makeEditable:function(t,e){var n=this,i=n.getDataByNode(t),a=$(".item-content",t);void 0!==i.index&&i.index<n.dataset.length&&$.when(n.element.triggerHandler("beforeedit",[i])).done(function(){var s=u.escapeHTML((a.text().trim()||"").toString()),r=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(s,'" />'));t.addClass("is-editing"),a.html(r),setTimeout(function(){r.focus().select()},0),r.on("click.listbuilder",function(){return!1}).on("blur.listbuilder",function(){return n.commitEdit(t,e)}).on("keypress.listbuilder",function(i){13===(i.keyCode||i.charCode||0)&&(n.commitEdit(t,e),t.focus())}),n.element.triggerHandler("entereditmode",[i])})},commitEdit:function(t,e){var n=this.settings,i=this.getDataByNode(t),a=$(".item-content",t),s=$(".edit-input",a);s.val(u.escapeHTML((s.val()||"").toString())),e&&(i.data.value=s.val()),i.data.text=s.val(),s.off("click.listbuilder blur.listbuilder keypress.listbuilder"),a.html(n.templateItemContent.replace(/{{text}}/g,s.val())),t.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[i])},deleteItem:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var n=t.getDataByNode(e);void 0!==n.index&&$.when(t.element.triggerHandler("beforedelete",[n])).done(function(){t.listApi.removeAllSelected(),t.updateAttributes(),t.dataset.splice(n.index,1),t.element.triggerHandler("afterdelete",[n])})}},getDataByNode:function(t){for(var e={},n=0,i=this.dataset.length;n<i;n++){var a=this.dataset[n];if($(a.node).is(t)){e={index:n,data:a};break}}return e},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},moveCursorToEnd:function(t){setTimeout(function(){if("number"==typeof t.selectionStart)t.selectionEnd=t.value.length,t.selectionStart=t.value.length;else if(void 0!==t.createTextRange){var e=t.createTextRange();e.collapse(!1),e.select()}},100)},updateAttributes:function(){for(var t=$("li",this.ul),e=0,n=t.length;e<n;e++)$(t[e]).attr({"aria-posinset":e+1,"aria-setsize":n})},updateDataset:function(t){var e=this,n=$("li",this.ul),i=$(".listview",this.element).data("listview");i.deselectItemsBetweenIndexes([0,n.length-1]),this.settings.dataset=t,i.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout(function(){e.setSelected()},0)},setSelected:function(){for(var t=$("li[selected]",this.ul),e=0,n=t.length;e<n;e++){var i=$(t[e]);i.removeAttr("selected"),i.is(".is-selected")||i.trigger("click")}return this},select:function(t){var e=this.getListItem(t);e&&!e.is(".is-selected")&&e.trigger("click")},unselect:function(t){var e=this.getListItem(t);e&&e.is(".is-selected")&&e.trigger("click")},getListItem:function(t){var e=$();if(this.isElement(t)&&$.contains(this.ul,t))e=this.isjQuery(t)?t:$(t);else{var n=parseInt(t,10),i=$("li",this.ul);!isNaN(n)&&n>-1&&n<i.length?e=i.eq(n):"first"==="".concat(t).toLowerCase()?e=i.first():"last"==="".concat(t).toLowerCase()&&(e=i.last())}return e.length<1?null:e.length>1?e.eq(0):e},isElement:function(t){return this.isjQuery(t)&&t.get(0)instanceof Element||t instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").addClass("is-disabled").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var t=0,e=this.topButtons.length;t<e;t++){var n=$(this.topButtons[t]).data("tooltip");n&&"function"==typeof n.destroy&&n.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,$i)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(t){return this.each(function(){var e=$.data(this,"listbuilder");e?e.updated(t):e=$.data(this,"listbuilder",new Di(this,t))})};var Ii=["click","immediate"],Mi=[!1,"responsive","always"],Li={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:46,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,closeBtnOptions:{attributes:[],closeBtnTooltip:"Close"},maxWidth:null,fullsize:Mi[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null,hideUnderneath:!1};function Pi(t){return t.trigger&&-1===Ii.indexOf(t.trigger)&&(t.trigger=Li.trigger),t.fullsize&&-1===Mi.indexOf(t.fullsize)&&(t.fullsize=Li.fullsize),t.breakpoint&&-1===p.available.indexOf(t.breakpoint)&&(t.breakpoint=Li.breakpoint),t}function Ni(t,e){this.settings=C.mergeSettings(t,e,Li),this.settings=Pi(this.settings),this.originalElement=$(t),this.element=$(t),this.init(),this.reStructure()}Ni.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var t;return this.trigger&&this.trigger.length?t=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(t=this.mainContent.data("contextualactionpanel")),t},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(t){this.element[0].classList[!0===t?"add":"remove"]("is-visible")},set active(t){this.element[0].classList[!0===t?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var t=0,e=this.element;return $(".modal.is-visible").each(function(){t<this.style.zIndex&&(t=this.style.zIndex)}),t===e[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&p.isBelow(this.settings.breakpoint)||"responsive"===this.settings.fullsize&&this.isAndroid()&&"phone-to-tablet"===this.settings.breakpoint},get closeBtn(){var t=this.capAPI;return t&&t.element instanceof $?t.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var t=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(t.namespace),function(e){$(e.currentTarget).is(t.trigger)&&t.open()}),"immediate"===this.settings.trigger){var e=new W({duration:1,timeoutCallback:function(){t.open()}});G.register(e)}if(t.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var n=new W({duration:1,timeoutCallback:function(){t.open()}});G.register(n)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element[0].classList[this.settings.hideUnderneath?"add":"remove"]("hide-underneath"),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function(){var t=this,e=!1,n=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(n,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var i=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(R.translate(this.settings.closeBtnOptions.closeBtnTooltip,{showAsUndefined:!1,showBrackets:!1}),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(R.translate("Close"),"</span>\n        </button>\n      "));this.element.find(".modal-content").append(i),i.on("click.".concat(this.namespace),function(){return t.close()}).tooltip(),this.settings.closeBtnOptions.attributes&&C.addAttributes(i,this,this.settings.closeBtnOptions.attributes,"",!0)}this.settings.id&&(this.element.attr("id",this.settings.id),C.addAttributes(this.element,this,this.settings.attributes,"",!0)),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),e=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(e=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),e||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=u.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),e||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),C.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),J.register(this)},reStructure:function(){var t=$(".modal-body",this.element),e=$("hr:first-child",t),n=$(".modal-buttonset",this.element);t&&t.length&&!t.parent().hasClass("modal-body-wrapper")&&t.wrap('<div class="modal-body-wrapper"></div>'),e&&e.length&&!e.parent().hasClass("modal-content")&&e.insertAfter(this.element.find(".modal-header")),n&&n.length&&!n.parent().hasClass("modal-content")&&n.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var t=this.element,e=t.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),n=t.find("select.dropdown[data-validate]"),i=t.find("[data-validate]:visible");if(n.each(function(){$(this).next(".dropdown-wrapper").is(":visible")&&(i=i.add(this))}),i.length>0){e.removeAttr("disabled");var a=!0;i.each(function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var n=t.is(".dropdown")&&t.next(".dropdown-wrapper").is(":visible")||null!==t[0].offsetParent;t.is(".required")?n&&!t.val()&&(a=!1):(t.validateField(),n&&!t.isValid()&&(a=!1)),n&&t.is(".error")&&(a=!1),a&&e.removeAttr("disabled")}}),a||e.is(":disabled")||e.attr("disabled","true")}},renderButtonset:function(){var t=this,e=this.settings.buttons,n={style:"modal"},i=this;if(!this.buttonsetElem){var a=this.element.find(".modal-buttonset");if(a&&a.length)n.detectHTMLButtons=!0;else{if(!Array.isArray(e)||!e.length)return;var s=this.element.find(".modal-body").parent(),r=this.settings.useFlexToolbar?"toolbar-section ":"",o='<div class="'.concat(r,'modal-buttonset"></div>');(a=$(o)).insertAfter(s),n.buttons=e}this.buttonsetElem=a,a.buttonset(n),this.buttonsetAPI=a.data("buttonset"),e=this.buttonsetAPI.toData().buttons}var l=this.buttonsetAPI.buttons,c=$(),d=100/l.length;l.forEach(function(n,a){var s=Array.isArray(e)&&e.length?e[a]:void 0,r=!1;if(s)if(n.element[0].setAttribute("id",e[a].id||C.uniqueId(n.element,"button","modal")),e[a].tabindex&&n.element[0].setAttribute("tabindex",e[a].tabindex),$(n.element).on("click.".concat(i.namespace),function(t){var e=s.click;e&&(e.apply(i.element[0],[t,i]),r=!0)}),$(n.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(i.namespace),function(t){r||($(t.target).is(".btn-cancel")&&(i.isCancelled=!0),i.close())}),s.validate&&n.element[0].classList.add("no-validation"),s.attributes)C.addAttributes(n.element,t,s.attributes,"",t);else if(n.element.is("[class*=primary]"))C.addAttributes(n.element,t,i.settings.attributes,"primary",!0);else if(n.element.is("[class*=cancel]")||n.element.text()===R.translate("Cancel"))C.addAttributes(n.element,t,i.settings.attributes,"cancel",!0);else{var o;C.addAttributes(n.element,t,i.settings.attributes,null===(o=n.element)||void 0===o||null==o?void 0:o.prop("id"),!0)}n.element[0].style.width="".concat(d,"%"),c.add(n)})},addButtons:function(t){var e,n=this,i=this.element.find(".modal-body").parent(),a=this.element.find(".flex-toolbar"),s=100,r=!1;if(this.modalButtons=t,!t){var o=this.element.find(".modal-buttonset button");s=100/o.length;for(var l=0,c=o.length;l<c;l++)o[l].style.width="".concat(s,"%");return o.button(),void o.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(n.namespace),function(t){$(t.target).is(".btn-cancel")&&(n.isCancelled=!0),n.close()})}this.isCAP?(r=!0,e=this.element.find(".buttonset")):(e=this.element.find(".modal-buttonset")).length||(e=$('<div class="modal-buttonset"></div>').insertAfter(i)),s=100/t.length,t&&e.empty();for(var d=function(i,o){var l=$('<button type="button">\n        <span></span>\n      </button>'),c=l.find("span");c.text(i.text),l.attr("type",i.type||"button"),"separator"===i.cssClass&&(l=$('<div class="separator"></div>')),i.cssClass?l.attr("class",i.cssClass):i.isDefault?l.addClass("btn-modal-primary"):l.addClass("btn-modal"),i.disabled&&(l[0].disabled=!0===i.disabled),i.audible&&c.addClass("audible"),void 0===i.validate||i.validate||l.addClass("no-validation"),C.addAttributes(l,n,i.attributes,"",!0);for(var d={},u=["id","name","text","tabindex"],h=0;h<u.length;h++)i[u[h]]&&(d[u[h]]=i[u[h]]);if("input"===i.type){var p=$('<label class="audible" for="filter">'.concat(i.text,"</label>")),f=$('<input class="searchfield">').attr(d);return a.length?a.find(".toolbar-section.search").append(p,f):e.append(p,f),void f.searchfield(i.searchfieldSettings)}i.icon&&"#"===i.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===i.icon?"icon-close":""],icon:i.icon.substr("#icon-".length)}).prependTo(l),l[0].setAttribute("id",i.id||C.uniqueId(n.element,"button","modal"));var g=t[o].click;l.on("click.".concat(n.namespace),function(t){g?g.apply(n.element[0],[t,n]):n.close()}),r||(l[0].style.width="".concat(s,"%")),l.button(),(n.settings.useFlexToolbar||n.settings.centerTitle)&&i.align?("left"===i.align&&a.find(".toolbar-section").eq(0).append(l),"center"===i.align&&a.find(".toolbar-section").eq(1).find("h2").append(l),"right"===i.align&&a.find(".toolbar-section").eq(2).append(l)):e.append(l)},u=0;u<t.length;u++)d(t[u],u)},isAndroid:function(){return"android"===(m&&m.os&&m.os.name?m.os.name:"")},sizeInner:function(){var t=this.element.find(".detailed-message"),e=$(window).height()-t.offset().top-150;t[0].style.maxHeight="".concat(e,"px"),t[0].style.overflow="auto",t[0].style.width="".concat(t.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var t=this;this.settings.beforeShow(function(e){return!1!==e&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===e?(t.busyIndicator&&(t.busyIndicator.remove(),delete t.busyIndicator),!0):(e instanceof jQuery||(e=$(e)),t.open(!0),t.element.find(".modal-body").empty(),t.element.find(".modal-body").append(e),e.show(),!0))},{})}},open:function(t){var e,n=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(J.overlayElem)),this.root||(this.root=$(J.rootElem));var i=this.element.parent();if(i.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),i=this.element.parent()),i.parent().is(this.root)||i.insertAfter(this.overlay),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),function(){n.sizeInner()}),this.sizeInner()),e=this.element.triggerHandler("beforeopen",[this]),this.settings.isAlert||$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1!==e&&(t||(this.callSource(),!this.settings.beforeShow))){if(J.currentlyActive=this,this.settings.isAlert){var a=this.element.find("#message-title");C.addAttributes(a,this,this.settings.attributes,"title",!0);var s=this.element.find("#message-text");C.addAttributes(s,this,this.settings.attributes,"message",!0),C.addAttributes(this.element,this,this.settings.attributes,"modal",!0),this.element.attr("aria-labelledby",a.attr("id")),this.element.attr("aria-describedby",s.attr("id"))}else{var r=this.element.find("h1:first");C.addAttributes(r,this,this.settings.attributes,"title",!0),C.addAttributes(this.element.find(".btn-close"),this,this.settings.attributes,"btn-close",!0);var o=r.attr("id");o||(o="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),r.attr("id",o));var l=this.element.find(".modal-body"),c="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",o),C.addAttributes(this.element,this,this.settings.attributes,"",!0),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",c),this.element.attr("aria-describedby",c)):(l.attr("id",c),this.element.attr("aria-describedby",c))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),function(){n.resize()}),this.element[0].style.display="";var d=this,u=new W({duration:1,timeoutCallback:function(){d.resize(),d.element.attr("role",d.settings.isAlert?"alertdialog":"dialog"),d.element.attr("aria-modal","true")}}),h=new W({duration:J.modalFadeDuration,timeoutCallback:function(){d.visible=!0}});G.register(u),G.register(h),$(this.element).on("keypress.".concat(this.namespace),function(t){var e=$(t.target);e.is(".editor, .searchfield, textarea, :button")||e.closest(".tab-list").length||$("#dropdown-list").length||13===t.which&&n.isOnTop&&!e.closest("form").find(":submit").length&&n.element.find(".btn-modal-primary:enabled").length&&(t.stopPropagation(),t.preventDefault(),e.hasClass("fileupload")&&!e.hasClass("colorpicker")||n.element.find(".btn-modal-primary:enabled").trigger("click"))}),$(".skip-link").on("focus.".concat(this.namespace),function(t){t.preventDefault(),n.element.find(":focusable").first().focus()}),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),function(){n.resize()});var p=new W({duration:5,timeoutCallback:function(){d.disableSubmit()}});G.register(p),this.element.find("[data-validate]").removeClass("disable-validation");var f=new W({duration:20,timeoutCallback:function(){var t;t=d,d.element.trigger("open",[t]),function(t){if(d.settings.autoFocus){d.changeObserver=new MutationObserver(function(){d.setFocusableElems()}),d.changeObserver.observe(d.element[0],{childList:!0,subtree:!0}),d.setFocusableElems();var e,n,i=$(d.focusableElems).not(".modal-header .searchfield").first();if(0===i.length&&(i=t.element.find(".btn-modal-primary")),1===i.length&&i.is(".btn-modal")&&(i=t.element.find(".btn-modal-primary")),!d.capAPI&&d.buttonsetAPI&&0===t.buttonsetElem.find(".btn-modal-primary").length){var a=$(".modal-buttonset button")[0];i=t.buttonsetElem.find(a)}if(i.is(".modal-wrapper a")&&(i=t.element.find(".modal-content .message a").removeClass("hide-focus")),i.is(".tab:not(.is-selected) a")&&(e=(n=i.closest(".tab-container")).find(".is-selected")).length)return i=e,void n.data("tabs").select(e.children("a").attr("href"));i.focus()}}(d)}});G.register(f);var g=new W({duration:30,timeoutCallback:function(){d.element.trigger("afteropen")}});G.register(g)}},resize:function(){var t,e,n=this.currentlyNeedsFullsize;n?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),t=.9*$(window).height()-this.settings.frameHeight,e=1*$(window).width()-this.settings.frameWidth);var i=this.element.find(".modal-body-wrapper");if(i.length&&(n?(i[0].style.maxHeight="",i[0].style.maxWidth=""):(i[0].style.maxHeight="".concat(t,"px"),i[0].style.maxWidth="".concat(e,"px"))),this.element.hasClass("lookup-modal")){var a=this.element.find(".datagrid-wrapper"),s=this.element.find(".pager-toolbar"),r=a.closest(".datagrid-container");t=t-(r.prev().is(".toolbar")?130:67)-(r.next().is(".pager-toolbar")?35:0)+(s.length?-15:0),n?(a[0].style.maxHeight="",a[0].style.maxWidth=""):(a[0].style.maxHeight="".concat(t,"px"),a[0].style.maxWidth="".concat(e,"px"))}this.element.hasClass("datagrid-columns-dialog")&&(i[0].style.overflow="hidden",t>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(t,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0));var o=this.element.find(".toolbar");o.length&&o.triggerHandler("recalculate-buttons")},isOpen:function(){return B("visible","isOpen"),this.visible},get openSubComponents(){var t=ae(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),e=[];return t.forEach(function(t){var n=t.control,i="boolean"==typeof n.isPopover&&!0===n.isPopover,a="function"==typeof n.isOpen&&n.isOpen(),s="boolean"==typeof n.isOpen&&!0===n.isOpen,r=!!i&&"boolean"==typeof n.visible&&!0===n.visible;(a||s||r)&&e.push(n)}),e},get isFocused(){var t=!1,e=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(n){if(!t){var i,a,s,r,o=$(n);(o.is($(e))||"function"==typeof n.contains&&n.contains(e))&&(t=!0),o.is("div.dropdown, div.multiselect")&&(t=null===(i=o.parent().prev("select").data("dropdown"))||void 0===i||null==i?void 0:i.isFocused),o.is(".lookup")&&(t=null===(a=o.data("lookup"))||void 0===a||null==a?void 0:a.isFocused),o.is(".btn-menu, .btn-actions")&&(t=null===(s=o.data("popupmenu"))||void 0===s||null==s?void 0:s.isFocused),o.is(".searchfield")&&(t=null===(r=o.data("searchfield"))||void 0===r||null==r?void 0:r.isFocused)}});var n=$(e).parents(".tooltip, .popover");return n.length&&n.each(function(e,n){var i=n.className.contains("popover")?"popover":"tooltip",a=$(n).data(i);a&&a.isFocused&&(t=!0)}),t},setFocusableElems:function(){var t=h.focusableElems(this.element[0],[],["option"]);this.focusableElems=t,this.focusableElems.first=t[0],this.focusableElems.last=t[t.length-1]},setFocus:function(t){if(-1!==["last","first"].indexOf(t)){var e;switch(this.focusableElems||this.setFocusableElems(),t){case"last":e=this.focusableElems.last;break;case"first":e=this.focusableElems.first}e&&(e.focus(),e.classList.remove("hide-focus"))}},close:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;if(!n&&(!this.visible||this.openSubComponents.length))return!0;var a=this.element.triggerHandler("beforeclose");if(!1===a)return!1;var s=this,r=this.element.find("[data-validate]");r.addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(s.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.visible=!1,this.active=!1,delete this.dontCheckFocus,i?s.element.trigger("close.".concat(i),s.isCancelled):s.element.trigger("close",s.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var o=$(this.closeBtn),l=o.data("tooltip");l&&(l.hide(),l.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var c=new W({duration:J.modalFadeDuration,timeoutCallback:function(){i?s.element.trigger("afterclose.".concat(i),s.isCancelled):s.element.trigger("afterclose"),l&&delete l.reopenDelay,("immediate"===s.settings.trigger||t)&&(!s.isCAP||s.isCAP&&!s.capAPI)&&s.destroy(),e||J.refresh(),s.settings.noRefocus||(!s.oldActive&&s.settings.triggerButton&&(s.oldActive=s.useJqEl(s.settings.triggerButton)),s.oldActive&&$(s.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?s.oldActive.focus():s.trigger.parents(".toolbar, .formatter-toolbar").length<1&&s.trigger.focus())}});return G.register(c),!1},useJqEl:function(t){return t instanceof jQuery?t:$(t)},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=Pi(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(){var t=this;function e(){t.trigger.off("click.".concat(t.namespace)),t.element.off("keypress.".concat(t.namespace," keydown.").concat(t.namespace," beforeclose.").concat(t.namespace," afterclose.").concat(t.namespace)),t.element.find("button, .btn-close").off("click.".concat(t.namespace)),t.element.find(".paginated").off("afterpaging.".concat(t.namespace)),$(".skip-link").off("focus.".concat(t.namespace)),$("body").off("resize.".concat(t.namespace)),$(t.element).off("keydown.".concat(t.namespace)),1===t.element.find(".detailed-message").length&&$("body").off("resize.".concat(t.namespace)),t.isCAP&&t.capAPI&&t.capAPI.destroy(),t.aboutAPI&&t.aboutAPI.destroy(!0),t.buttonsetAPI&&(t.buttonsetAPI.buttons.forEach(function(e){$(e.element).off("click.".concat(t.namespace))}),t.buttonsetAPI.destroy(),t.buttonsetElem.remove(),delete t.buttonsetAPI,delete t.buttonsetElem),delete t.focusableElems,t.trigger.off("click.".concat(t.namespace)),t.element[0].removeAttribute("data-modal");var e=t.element.parent(".modal-wrapper");e.length&&e.remove();var n=new W({duration:21,timeoutCallback:function(){var e=null,n=t.element?t.element.data("modal"):null;n?e=t.element[0]:(n=t.trigger?t.trigger.data("modal"):null)&&(e=t.trigger[0]),e&&n&&n.overlay&&$.removeData(e,"modal")}});G.register(n),J.unregister(t),t.originalElement instanceof $&&$.removeData(t.originalElement[0],"modalElementLink"),$.removeData(t.element[0],"modal")}this.element.trigger("beforedestroy")&&(this.visible?(this.element.on("afterclose.".concat(t.namespace),function(){e()}),this.close(!0)):e())}};var Ri={title:"Message Title",status:"",message:"Message Summary",width:"auto",maxWidth:null,buttons:null,showCloseBtn:!1,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7,hideUnderneath:!1,attributes:null,noRefocus:!1};function Oi(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,Ri),this.init()}Oi.prototype={init:function(){var t,e=this,n=this,i=this.settings.allowedTags,a=!0;if(this.settings.allowedTags.length>0||(a=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(a?u.stripTags(this.settings.title,i):u.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><div class="message" id="message-text">'.concat(a?u.stripTags(this.settings.message,i):u.stripHTML(this.settings.message),"</div></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(R.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(t=this.element,this.content.empty().append(t.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,showCloseBtn:this.settings.showCloseBtn,isAlert:!0,overlayOpacity:this.settings.overlayOpacity,hideUnderneath:this.settings.hideUnderneath,attributes:this.settings.attributes,noRefocus:this.settings.noRefocus}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.maxWidth&&(this.content.find(".message")[0].style.maxWidth=this.settings.maxWidth),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.settings.showCloseBtn){var s=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(R.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(R.translate("Close"),"</span>\n        </button>\n      "));this.message.find(".modal-content").append(s),s.on("click",function(){return e.destroy()})}this.message.on("beforeclose.message",function(){return n.element.triggerHandler("beforeclose")}).on("beforeopen.message",function(){return n.element.triggerHandler("beforeopen")}).on("open.message",function(){n.element.trigger("open")}).on("afterclose.message",function(){n.destroy(),n.settings.returnFocus&&n.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")}),$(document).on("keypress.message keydown.message",function(t){27===(t.which||t.keyCode)&&setTimeout(function(){var t=n.message.data("modal");void 0!==t&&t.close()},0)}),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):"info"===this.settings.status?this.title.addClass("has-status is-info").prepend($.createIconElement("info")):this.title.removeClass("has-status is-error is-alert is-success is-info").find("svg").remove()},destroy:function(){var t=this.message.data("modal");void 0!==t&&t.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(t){return this.each(function(){return new Oi(this,t)})},$.fn.modal=function(t){return this.each(function(){var e=$.data(this,"modal"),n=$(this);if(n.is(".modal")||(e=n.closest(".modal").data("modal")),e&&t)return e.updated(t),void("function"==typeof e[t]&&e[t]());e&&!t||(e=$.data(this,"modal",new Ni(this,t)))})},$.fn.monthview=function(t){return this.each(function(){var e=$.data(this,"monthview");e?e.updated(t):e=$.data(this,"monthview",new Ln(this,t))})};var Bi={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,allTextString:null,selectedTextString:null};function _i(t,e){this.settings=C.mergeSettings(t,e,Bi),this.element=$(t),this.init()}_i.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(t){return this.each(function(){var e=$.data(this,"multiselect");e?e.updated(t):e=$.data(this,"multiselect",new _i(this,t))})};var Fi={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view.",attributes:null};function zi(t,e){this.settings=C.mergeSettings(t,e,Fi),this.element=$(t),this.init()}zi.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var t='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),e='<p class="notification-text">'.concat(this.settings.message);this.settings.linkText&&(e+='<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>")),e+="</p>";var n='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(R.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=t.concat(e,n);var i=document.querySelector(this.settings.parent);return i.parentNode.insertBefore(this.notificationEl,i.nextSibling),$(this.notificationEl).animateOpen(),C.addAttributes($(this.notificationEl),this,this.settings.attributes),C.addAttributes($(this.notificationEl).find(".notification-icon"),this,this.settings.attributes,"icon"),C.addAttributes($(this.notificationEl).find(".notification-text"),this,this.settings.attributes,"text"),C.addAttributes($(this.notificationEl).find(".notification-text a"),this,this.settings.attributes,"link"),C.addAttributes($(this.notificationEl).find("button.notification-close"),this,this.settings.attributes,"btn-close"),C.addAttributes($(this.notificationEl).find("button.notification-close .icon"),this,this.settings.attributes,"icon-close"),this},handleEvents:function(){var t=this;return $(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",function(){t.destroy()}),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,Fi)),this.teardown().init()},teardown:function(){return this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),this.teardown(),$.removeData(this.element[0],"notification")},close:function(){this.destroy()}},$.fn.notification=function(t){return this.each(function(){$.data(this,"notification",new zi(this,t))})};var Hi={position:"upper-right",icon:"menu",color:"alert",attribute:null};function qi(t,e){this.settings=C.mergeSettings(t,e,Hi),this.element=$(t),this.init()}qi.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationBadgeContainerEl=this.element.append('<span class="notification-badge-container"></span>');var t='\n      <svg class="icon notification-badge-'.concat(this.settings.icon,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.icon,'"></use>\n      </svg>'),e='\n      <span class="notification-dot notification-dot-'.concat(this.settings.position," notification-dot-").concat(this.settings.color,'"></span>');return this.notificationBadgeContainerEl.find(".notification-badge-container").append(t,e),C.addAttributes(this.notificationBadgeContainerEl.find(".notification-badge-container"),this,this.settings.attributes,"container"),C.addAttributes(this.notificationBadgeContainerEl.find(".notification-badge-container svg.icon"),this,this.settings.attributes,"icon"),C.addAttributes(this.notificationBadgeContainerEl.find(".notification-badge-container .notification-dot"),this,this.settings.attributes,"dot"),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("notificationbadge"),function(){t.updated()}),this},updated:function(){return this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("notificationbadge")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"notificationbadge")}},$.fn.notificationbadge=function(t){return this.each(function(){var e=$.data(this,"notificationbadge");e?e.updated(t):e=$.data(this,"notificationbadge",new qi(this,t))})};var Vi={value:0};function ji(t,e){this.settings=C.mergeSettings(t,e,Vi),this.element=$(t),this.init()}ji.prototype={init:function(){var t=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",function(e){e.stopPropagation(),t.update()}),this},updateAria:function(t){var e=this;this.element.attr({role:"progressbar","aria-valuenow":t,"aria-valuemax":"100"});var n=this.element.parent();this.tooltipApi=this.tooltipApi||n.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(t,"%"),this.tooltipApi.visible&&t<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(n[0].setAttribute("title","".concat(t,"%")),n.tooltip(),this.tooltipApi=n.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,n.on("aftershow.progress",function(){e.tooltipApi.tooltip.addClass("process".concat(e.tooltipId))}).on("hide.progress mouseout.progress",function(){e.tooltipApi.tooltip.removeClass("process".concat(e.tooltipId))}))},unbind:function(){var t=this.element.parent();return t.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||t.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(t){var e=this.element[0].getAttribute("data-value")||0;/number|string/.test(a(t))&&(this.element[0].setAttribute("data-value",t),e=t),this.element[0].style.width="".concat(e,"%"),this.updateAria(e)},updated:function(t){return void 0!==t&&t.value&&(this.settings.value=t.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(t){return this.each(function(){var e=$.data(this,"progress");e?e.updated(t):e=$.data(this,"progress",new ji(this,t))})};var Wi={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function Ui(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Wi),this.init()}Ui.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this;function e(e){return!!e&&("string"==typeof e&&(e.match("#")&&0===e.indexOf("#")||(e="#".concat(e)),e=$(e)),!!e.length&&(t.popdown=e,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||h.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),e(this.trigger.attr("data-popdown"))||e(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var t=this.trigger.attr("aria-expanded");return t&&void 0!==t||this.trigger.attr("aria-expanded",""),"true"===t&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var t=this,e=this;return this.trigger.on("click.popdown",function(){e.toggle()}).on("updated.popdown",function(){e.updated()}).on("clickoutside.popdown",function(t){e.settings.keepOpen||e.handleFocusOut(t)}),this.setFirstLastTab(),this.changeObserver=new MutationObserver(function(){t.setFocusableElems()}),this.changeObserver.observe(this.element[0],{childList:!0,subtree:!0}),this.setFocusableElems(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",function(){t.toggle()}),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||h.isElement(this.settings.trigger)},get isFocused(){return this.hasFocus()},hasFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=!1,n=document.activeElement;if(t instanceof HTMLElement||(t=void 0),this.trigger.is($(n)))return!0;if(this.popdown[0].contains(n))return!0;if(t){if(t.classList.contains("overlay"))return!0;if(this.popdown[0].contains(t))return!0}this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(i){if(!e){var a,s,r,o=$(i);if((o.is($(n))||"function"==typeof i.contains&&i.contains(n))&&(e=!0),o.is("div.dropdown, div.multiselect")&&(e=null===(a=o.parent().prev("select").data("dropdown"))||void 0===a||null==a?void 0:a.isFocused),o.is(".lookup")){var l,c=o.data("lookup");!(e=null==c||null==c?void 0:c.isFocused)&&t&&(e=null==c||null===(l=null==c?void 0:c.modal)||void 0===l||null==l?void 0:l.element[0].contains(t))}o.is(".btn-menu, .btn-actions")&&(e=null===(s=o.data("popupmenu"))||void 0===s||null==s?void 0:s.isFocused),o.is(".searchfield")&&(e=null===(r=o.data("searchfield"))||void 0===r||null==r?void 0:r.isFocused)}});var i=$(n).parents(".tooltip, .popover");return i.length&&i.each(function(t,n){var i=n.className.contains("popover")?"popover":"tooltip",a=$(n).data(i);a&&a.isFocused&&(e=!0)}),e},setFirstLastTab:function(){var t=this,e=this.settings;if(e.firstLastTab&&/function|boolean|object/.test(a(e.firstLastTab))){var n=null,i=null,s=null;if("object"===a(e.firstLastTab)?(e.firstLastTab.first&&((n=e.firstLastTab.first instanceof jQuery?e.firstLastTab.first:$(e.firstLastTab.first)).first(),this.popdown[0].contains(n[0])||(n=null)),e.firstLastTab.last&&((i=e.firstLastTab.last instanceof jQuery?e.firstLastTab.last:$(e.firstLastTab.last)).first(),this.popdown[0].contains(i[0])||(i=null)),"function"==typeof e.firstLastTab.callback&&(s=e.firstLastTab.callback)):"function"==typeof e.firstLastTab?s=e.firstLastTab:("boolean"==typeof e.firstLastTab||e.firstLastTab)&&(s=this.closeAndContinue),s){if(!n||!i||n&&!n.length||i&&!i.length){var r=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!n||n&&!n.length)&&(n=r.first()),(!i||i&&!i.length)&&(i=r.last())}this.focusableElem={first:n,last:i},n.on("keydown.popdown",function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),s({e:e,self:t,first:n}))}),i.on("keydown.popdown",function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),s({e:e,self:t,last:i}))})}}},setFocusableElems:function(){var t=h.focusableElems(this.popdown[0],["div.dropdown","div.multiselect",".lookup-wrapper > span.trigger"],["select","option"]);this.focusableElems=t,this.focusableElems.first=t[0],this.focusableElems.last=t[t.length-1]},closeAndContinue:function(t){var e=$(document).find(":focusable"),n=e.index(t.self.trigger);-1!==(n=t.e.shiftKey?n-1<0?-1:n-1:n+1>=e.length?-1:n+1)&&e.eq(n).focus(),t.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},handleFocusOut:function(t){this.focusableElems.includes(t.target)||this.hasFocus(t.target)?this.keyTarget=t.target:"BODY"===t.target.tagName&&this.keyTarget?delete this.keyTarget:this.close()},open:function(){if(!this.isAnimating){var t=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus&&(this.focusableElems?this.focusableElems.first:this.popdown.find(":focusable").first()).focus(),this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.addEventsTimer=new W({duration:30,timeoutCallback:function(){$("body").on("resize.popdown",function(e){t.handleFocusOut(e)}),$(document).on("click.popdown",function(){$("#popdown-example-trigger").trigger("clickoutside.popdown")}),$(document).on("keydown.popdown",function(e){var n=$(e.target).parents(".popdown");switch(e.which||e.keyCode){case 27:n.length&&t.close();break;case 9:t.handleFocusOut(e)}}),t.isAnimating=!1}}),G.register(this.addEventsTimer)}},close:function(){if(!this.isAnimating){this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.keyTarget&&delete this.keyTarget;var t=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusout.popdown keydown.popdown"),this.closeTimer&&(this.closeTimer.destroy(!0),delete this.closeTimer),this.closeTimer=new W({duration:30,timeoutCallback:function(){t.popdown[0].style.display="none",t.isAnimating=!1}}),G.register(this.closeTimer)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var t={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},e=window.innerHeight+$(document).scrollTop(),n=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(t.offset=this.scrollparent.offset(),t.scrollDistance.top=this.scrollparent.scrollTop(),t.scrollDistance.left=this.scrollparent.scrollLeft(),e-=t.offset.top+t.scrollDistance.top,n-=t.offset.left+t.scrollDistance.left);var i,a=!1,s=!1,r=this.trigger,o=r.offset(),l=0,c=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(o.left,"px"),this.popdown[0].style.top="".concat(o.top+r.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(r.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(i=this.popdown.offset()).left<0&&(a=!0,l=0-i.left);var d=i.left+this.popdown.outerWidth(!0);if(d>n&&(a=!0,l=d-n+(R.isRTL()?20:0)),a){this.popdown[0].style.left="".concat(i.left+-1*l,"px");var u=this.popdown[0].getBoundingClientRect(),h=r[0].getBoundingClientRect(),p=u.right-h.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(p,"px"),i=this.popdown.offset()}i.top<0&&(s=!0,c=0-i.top);var f=i.top+this.popdown.outerHeight(!0);f>e&&(s=!0,c=f-e),s&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(i.top+-1*c,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*c,"px"),i=this.popdown.offset()),(i.top<0||i.top+this.popdown.outerHeight(!0)>e)&&(this.popdown[0].style.top=0,f=(i=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(f-e),"px"))},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger&&this.trigger.off("updated.popdown click.popdown focus.popdown clickoutside.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.focusableElem&&this.focusableElem.first instanceof jQuery&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.focusableElems&&this.focusableElems.first instanceof jQuery&&(this.focusableElems.first.off("keydown.popdown"),this.focusableElems.last.off("keydown.popdown"),delete this.focusableElems),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(t){return this.each(function(){var e=$.data(this,"popdown");e?e.updated(t):e=$.data(this,"popdown",new Ui(this,t))})};var Gi={};function Yi(t,e){this.settings=C.mergeSettings(t,e,Gi),this.element=$(t),this.init()}Yi.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.enable()},handleEvents:function(){for(var t=this,e=$("input",this.element),n=function(n,i){var a=$(e[n]),s=$(e[n+1]),r=function(t){return t.is(".is-filled")||t.is(".is-half")};a.on("click.".concat("rating"),function(){t.element.is(".is-readonly")||t.val(r(a)&&!r(s)?n:n+1)})},i=0,a=e.length;i<a;i++)n(i)},fillStar:function(t,e){$(t).addClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-filled")},emptyStar:function(t,e){$(t).removeClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-outlined")},halfStar:function(t,e){$(t).addClass("is-half").removeClass("is-filled").next(e).find("svg").changeIcon("star-half")},val:function(t){if(0===arguments.length||""===t||isNaN(t)||-1===A.sign(t))return this.currentValue;this.currentValue=parseFloat(t,10);for(var e=Math.floor(this.currentValue),n=0,i=this.allInputs.length;n<i;n++){var a=$(this.allInputs[n]),s=a.parent().is(".inline")?"svg":"label",r=t%1!=0&&e===n;r?this.halfStar(a,s):n<t?this.fillStar(a,s):this.emptyStar(a,s),n+1===e&&a.prop("checked",!0)}return e<=0&&t>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var t=$(this.element);t.addClass("is-readonly"),t.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("click.".concat("rating")),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Gi)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(t){return this.each(function(){var e=$.data(this,"rating");e?e.updated(t):e=$.data(this,"rating",new Yi(this,t))})};var Ki={};function Xi(t,e){this.settings=C.mergeSettings(t,e,Ki),this.element=$(t),this.init()}Xi.prototype={init:function(){this.handleKeys()},isCapslock:function(t){var e=!1,n=!1;return(t=t||window.event).which?e=t.which:t.keyCode&&(e=t.keyCode),t.shiftKey?n=t.shiftKey:t.modifiers&&(n=!!(4&t.modifiers)),!!(e>=97&&e<=122&&n)||e>=65&&e<=90&&!n},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Ki)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function(){var t=this,e=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',function(n){var i=$(this),a=i.parent(".field"),s=$(".icon-capslock",a);t.isCapslock(n)&&!i.hasClass("error")?s.length||(a.append(e),$("body").toast({audibleOnly:!0,message:R.translate("CapsLockOn")})):s.remove()}).on("blur.signin change.signin",'[type="password"]',function(){var t=$(this),n=t.closest(".field"),i=$(".icon-capslock",n);setTimeout(function(){i&&i.length&&(t.hasClass("error")?i.remove():n.append(e))},150)})}},$.fn.signin=function(t){return this.each(function(){var e=$.data(this,"signin");e?e.updated(t):e=$.data(this,"signin",new Xi(this,t))})};var Qi={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,tooltipPosition:"top",persistTooltip:!1,attributes:null};function Ji(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Qi),this.init()}function Zi(t){return t%1==0}function ta(t,e){return e&&!isNaN(e)&&0!==e||(e=1),Math.round(t/e)*e}function ea(t,e){var n=t[0],i=t[1],a=e[0],s=e[1];return Math.sqrt(Math.pow(a-n,2)+Math.pow(s-i,2))}Ji.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var t,e=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),1===this.settings.step&&(this.settings.step=void 0),void 0!==this.element.attr("data-ticks")){try{t=JSON.parse(e.element.attr("data-ticks"))}catch(e){t=[]}$.isArray(t)&&(this.settings.ticks=t)}var n="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?n:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{e.settings.tooltip=JSON.parse(e.element.attr("data-tooltip-content"))}catch(t){e.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var i=this.settings.tooltip.split(",");this.settings.tooltip=[i[0]],this.settings.tooltip.push(i[1]?i[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var a={value:this.settings.min,description:e.getModifiedTextValue(this.settings.min)},s={value:this.settings.max,description:e.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var r=e.settings.ticks||[];if($.isArray(r)&&r.length>0){var o=r.filter(function(t){return t.value===e.settings.min}),l=r.filter(function(t){return t.value===e.settings.max});o.length>0&&(a.description=o[0].description,a.color=o[0].color,r=$.grep(r,function(t){return t!==o[0]})),l.length>0&&(s.description=l[0].description,s.color=l[0].color,r=$.grep(r,function(t){return t!==l[0]}))}e.ticks.push(a);for(var c=0;c<r.length;c++){var d={};void 0!==r[c].value&&(d.value=r[c].value,d.description=void 0!==r[c].description?r[c].description:"",d.color=r[c].color,e.ticks.push(d))}e.ticks.push(s)}else this.ticks.push(a,s);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var u=this.settings.value.split(",");u[0]=isNaN(u[0])?this.settings.min:parseInt(u[0],10),u[1]=isNaN(u[1])?this.settings.max:parseInt(u[1],10),this.settings.value=u}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var t=this,e=!1;if("INPUT"!==t.element[0].tagName)throw new Error('Element with ID "'.concat(t.element.id,"\" cannot invoke a slider;  it's not an Input element."));t.originalElement={type:t.element.attr("type")},t.element.attr("type","hidden"),t.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(t.element.attr("id"),"-slider")).insertAfter(t.element),t.hitarea=$('<div class="slider-hit-area"></div>').appendTo(t.wrapper),t.range=$('<div class="slider-range"></div>').appendTo(t.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),e=!0),this.isRtlHorizontal=R.isRTL()&&!e,this.isRtlVertical=R.isRTL()&&e;var n=this.element.attr("style");n&&(n.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,n=n.replace("min-height","")),n.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),n.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,n=n.replace("min-width","")),n.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),t.handles=[];var i=t.element.prev("label").text(),a=$('<div class="slider-handle'.concat(t.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(t.settings.range?R.translate("SliderMinimumHandle"):R.translate("SliderHandle")," ").concat(i));if(t.handles.push(a),t.settings.range){var s=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(R.translate("SliderMaximumHandle")," ").concat(i));t.handles.push(s)}$.each(t.handles,function(n,i){i.attr({role:"slider","aria-orientation":e?"vertical":"horizontal","aria-valuemin":t.settings.min,"aria-valuemax":t.settings.max}).hideFocus(),i.appendTo(t.wrapper)}),t.ticks.forEach(function(n){!function(n){var i=t.isRtlHorizontal?100-t.convertValueToPercentage(n.value):t.convertValueToPercentage(n.value),a="calc(".concat(i,"% - 4px)");n.element=$('<div class="tick" data-value="'.concat(n.value,'"></div>')),n.label=$('<span class="label">'.concat(n.description,"</span>")),n.element[0].style[e?"bottom":"left"]=a,n.element.append(n.label),t.wrapper.append(n.element),e||(n.label[0].style.left="".concat(-(n.label.outerWidth()/2-n.element.width()/2),"px"))}(n)}),t.value(t.settings.value),t.updateRange(),$.each(t.handles,function(n,i){t.settings.tooltip&&(i.tooltip({content:function(){return"".concat(t.getModifiedTextValue(Math.floor(t.value()[n])))},placement:e?"right":t.settings.tooltipPosition,trigger:"focus",keepOpen:t.settings.persistTooltip}),i.removeAttr("aria-describedby"))}),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),C.addAttributes(this.hitarea,this,this.settings.attributes,"hitarea",!0),C.addAttributes(this.range,this,this.settings.attributes,"range",!0),C.addAttributes.apply(C,c(this.handles).concat([this,this.settings.attributes,"handle",!0]));for(var r=0,o=this.ticks.length;r<o;r++){var l=$(this.ticks[r].element);C.addAttributes(l,this,this.settings.attributes,"tick-".concat(r+1))}return t},handleRangeClick:function(t){if(t.preventDefault(),!this.isDisabled()){var e=this,n=this.wrapper.hasClass("vertical"),i="click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageX:t.pageX,a="click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageY:t.pageY,s=i-e.wrapper.offset().left-$(document).scrollLeft(),r=a-e.wrapper.offset().top-$(document).scrollTop(),o=[s,r],l=[e.handles[0].offset().left+e.handles[0].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[0].offset().top+e.handles[0].height()/2-e.wrapper.offset().top-$(document).scrollTop()],c=e.value(),d=ea(o,l),u=c[0],h=e.handles[0];h.addClass("hide-focus");var p=function(){if(n){var t=e.wrapper.height();return(t-r)/t*100}return s/e.wrapper.width()*100}(),f=e.convertPercentageToValue(p);e.handles[1]&&(d>ea(o,[e.handles[1].offset().left+e.handles[1].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[1].offset().top+e.handles[1].height()/2-e.wrapper.offset().top-$(document).scrollTop()])?(e.value([void 0,f]),h=e.handles[1],u=c[1]):e.value([f])),e.checkHandleDifference(h,u,f);var g=e.settings.step?e.settings.step:0;f<u?e.decreaseValue(t,h,f,g):e.increaseValue(t,h,f,g),e.settings.tooltip||h.focus()}},activateHandle:function(t){t.addClass("is-active")},deactivateHandle:function(t){t.removeClass("is-active")},enableHandleDrag:function(t){if(!this.isDisabled()){var e=this,n={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};t.drag(n).on("drag.slider",function(t,n){!function(t,n,i){if(!e.isDisabled()){var a=function(){if(e.isVertical()){var t=e.wrapper.height()-n.outerHeight();return(t-i.top)/t*100}return i.left/(e.wrapper.width()-n.outerWidth())*100}(),s=e.convertPercentageToValue(a);if(e.settings.range){var r=e.value();n.hasClass("higher")&&s<=r[0]&&(s=r[0]),n.hasClass("lower")&&s>=r[1]&&(s=r[1])}e.settings.step&&(s=Math.round(s/e.settings.step)*e.settings.step),t.defaultPrevented||(e.value(n.hasClass("higher")?[void 0,s]:[s]),e.updateRange(),e.updateTooltip(n),e.element.trigger("sliding",n,s))}}(t,$(t.currentTarget),n)}).on("dragstart",function(){$(this).addClass("is-dragging"),e.range.addClass("is-dragging"),e.element.trigger("slidestart",t)}).on("dragend",function(){$(this).removeClass("is-dragging"),e.range.removeClass("is-dragging"),e.element.trigger("slidestop",t)})}},disableHandleDrag:function(t){t.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),t.removeClass("is-dragging");var e=t.data("drag");e&&e.destroy()},convertValueToPercentage:function(t){return(t-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(t){var e=t/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-e+this.settings.min:e},getIncrement:function(){var t=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&t<=this.settings.step&&(t=this.settings.step),t},handleKeys:function(t,e){if(!e.isDisabled()){var n=t.which,i=$(t.currentTarget);switch(i.removeClass("hide-focus"),n){case 33:e.increaseValue(t,i,void 0,this.getIncrement());break;case 34:e.decreaseValue(t,i,void 0,this.getIncrement());break;case 35:e.increaseValue(t,i,this.settings.max);break;case 36:e.decreaseValue(t,i,this.settings.min);break;case 38:case 39:e.isRtlHorizontal&&39===n?e.decreaseValue(t,i):e.increaseValue(t,i);break;case 37:case 40:e.isRtlHorizontal&&37===n?e.increaseValue(t,i):e.decreaseValue(t,i)}}},increaseValue:function(t,e,n,i){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var a,s,r,o=this.value().slice(0),l=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher"))r=(s=(a=void 0!==n?n:o[1])+(l=Zi(a)?l:isNaN(a%l)?0:a%l)<this.settings.max?a+l:this.settings.max)%l?s:ta(s,l),this.value([void 0,r]);else{a=void 0!==n?n:o[0];var c=void 0===o[1]?this.settings.max:o[1];r=(s=a+(l=Zi(a)?l:isNaN(a%l)?0:l-a%l)<c?a+l:c)%l?s:ta(s,l),this.value([r])}this.checkHandleDifference(e,a,r),this.updateRange(),this.updateTooltip(e)},decreaseValue:function(t,e,n,i){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var a,s,r,o=this.value(),l=void 0!==i?i:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher")){a=void 0!==n?n:o[1];var c=void 0===o[0]?this.settings.min:o[0];r=(s=a-(l=Zi(a)?l:isNaN(a%l)?0:l-a%l)>c?a-l:c)%l?s:ta(s,l),this.value([void 0,r])}else r=(s=(a=void 0!==n?n:o[0])-(l=Zi(a)?l:isNaN(a%l)?0:a%l)>this.settings.min?a-l:this.settings.min)%l?s:ta(s,l),this.value([r]);this.checkHandleDifference(e,a,r),this.updateRange(),this.updateTooltip(e)},updateRange:function(){for(var t=this,e=this.value(),n=[],i=this.getColorClosestToValue(),a=t.wrapper.hasClass("vertical"),s=0;s<this.ticks.length;s++)(this.settings.range?e[0]<this.ticks[s].value&&this.ticks[s].value<=e[1]:this.ticks[s].value<=e[0])?(this.ticks[s].element.addClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor=i,this.ticks[s].element.addClass("inherit"))):(this.ticks[s].element.removeClass("complete"),i&&(this.ticks[s].element[0].style.backgroundColor="",this.ticks[s].element.removeClass("inherit")));i&&(this.range[0].style.backgroundColor=i,$.each(this.handles,function(t,e){e[0].style.backgroundColor=i,e[0].style.borderColor=i})),$.each(t.ticks,function(e){t.ticks[e].label[0].style.color=""}),n[0]=this.convertValueToPercentage(e[0]),void 0!==e[1]&&(n[1]=this.convertValueToPercentage(e[1]));var r=a?["bottom","top"]:t.isRtlHorizontal?["right","left"]:["left","right"],o={};function l(t,e){var n=a?r[1]:r[0],i=a?100-e:e;t.css(n,"calc(".concat(i,"% - ").concat(t.outerWidth()/2,"px)"))}this.handles[1]?(o[r[0]]="".concat(n[0],"%"),o[r[1]]="".concat(100-n[1],"%")):(o[r[0]]="0%",o[r[1]]="".concat(100-n[0],"%")),this.range.css(o),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout(function(){t.handles[0].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")},201)),l(this.handles[0],n[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout(function(){t.handles[1].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")},201)),l(this.handles[1],n[1]),this.handles[0].attr("aria-valuemax",e[1]),this.handles[1].attr("aria-valuemin",e[0]))},checkHandleDifference:function(t,e,n){var i=this.convertValueToPercentage(e),a=this.convertValueToPercentage(n);Math.abs(i-a)>3&&(t.addClass("is-animated"),this.range.addClass("is-animated"))},updateTooltip:function(t){if(this.settings.tooltip){if(!t){var e,n=this.handles[0].data("tooltip");return this.handles[1]&&(e=this.handles[1].data("tooltip")),n.hide(),void(e&&e.hide())}var i=t.data("tooltip");t.hasClass("is-animated")?(i.hide(),t.one("slide-animation-end",function(){a()})):a()}function a(){i.position(),t.focus()}},getColorClosestToValue:function(){for(var t,e,n={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[st.currentTheme.id.split("-")[2]],i=this.value()[0],a=0;a<this.ticks.length;a++)(e=this.ticks[a].color)&&i>=this.ticks[a].value&&(t=e,t=e.indexOf("#")>-1?e:n[e]||n.default);return t},value:function(t,e){var n=this;return void 0===t&&void 0===e||(t&&$.isArray(t)&&(void 0===t[1]||isNaN(t[1])||(e=t[1]),isNaN(t[0])||(t=t[0])),(void 0===t||isNaN(t))&&$.isArray(n._value)&&void 0!==n._value[0]&&(t=n._value[0]),(void 0===e||isNaN(e))&&$.isArray(n._value)&&void 0!==n._value[1]&&(e=n._value[1]),n._value=[t,e],n.element.val(void 0!==e?n._value:n._value[0]),$.each(n.handles,function(t,e){var i=n._value[t],a=n.getModifiedTextValue(i);$.each(n.ticks,function(t,e){e.value===i&&(a=e.description)}),e.attr({"aria-valuenow":n._value[t],"aria-valuetext":a})}),0===this.element.next().find(".slider-handle.is-dragging").length&&n.element.trigger("change",{element:n.element,value:n._value})),n._value},getModifiedTextValue:function(t){return this.settings.tooltip?this.settings.tooltip[0]+t+this.settings.tooltip[1]:t},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var t=this;return $.each(this.handles,function(e,n){t.enableHandleDrag(n)}),this.wrapper.find("[tabindex]").attr("tabindex","0"),this},disable:function(){var t=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),setTimeout(function(){t.wrapper.addClass("is-disabled");var e=t;$.each(t.handles,function(t,n){e.disableHandleDrag(n)})}),this.wrapper.find("[tabindex]").attr("tabindex","-1"),this},readonly:function(){var t=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,function(e,n){t.disableHandleDrag(n)}),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(t,e){var n=this.value();this.checkHandleDifference(this.handles[0],n[0],t),this.handles[1]&&this.checkHandleDifference(this.handles[1],n[1],e);var i=this.value(t,e);return this.updateRange(),this.updateTooltip(),i},refresh:function(t,e){return F(this.setValue,this.refresh).apply(this,[t,e])},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var t=this;return $.each(t.handles,function(e,n){t.disableHandleDrag(n),n.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")}),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",u.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function(){var t=this;return $.each(t.handles,function(e,n){n.on("mousedown.slider",function(){t.isDisabled()||$(this).focus()}).on("click.slider",function(t){t.preventDefault()}).on("keydown.slider",function(e){t.activateHandle(n),t.handleKeys(e,t)}).on("keyup.slider blur.slider",function(){t.deactivateHandle(n)}),t.enableHandleDrag(n)}),t.wrapper.on("click.slider touchend.slider touchcancel.slider",function(e){t.handleRangeClick(e)}),t.element.on("updated.slider",function(){t.updated()}),t}},$.fn.slider=function(t){return this.each(function(){var e=$.data(this,"slider");e?e.updated(t):e=$.data(this,"slider",new Ji(this,t))})};var na={autocorrectOnBlur:!0,min:-2147483647,max:2147483647,step:null,maskOptions:null,attributes:null};function ia(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,na),this.init()}ia.prototype={get isTouch(){return m.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var t=this.element[0].style;return t.width&&(this.element.parent()[0].style.width="".concat(parseInt(t.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var t=this.checkForNumeric(this.element.val());return this.element.val(t),this.element.attr("data-trackdirty")&&this.element.data("original",t),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.step=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.min=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var t=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped)if(this.element.is(".field-options")){var e=this.element.closest(".field").find(".btn-actions");this.element.add(e).add(e.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>');this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var n=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach(function(e){if(n.indexOf(e)>-1){var i=e.replace("input","spinbox");t.isWrapped?t.element.parent(".spinbox-wrapper").addClass(i):t.isInlineLabel&&t.inlineLabel.addClass(i)}});var i=this.element.attr("min"),s=this.element.attr("max"),r={role:"spinbutton"};i||s||(s="9999999"),r.min=i||0,r.max=s,this.element.data("mask")&&"object"===a(this.element.data("mask"))&&this.element.data("mask").destroy(),r["aria-valuemin"]=i||0,r["aria-valuemax"]=s||0,this.element.attr(r),this.updateAria(this.element.val());var o={process:"number",patternOptions:{allowDecimal:!1,allowThousandsSeparator:!1,allowNegative:Math.min(this.settings.min,this.settings.max)<0,decimalLimit:0,integerLimit:String(this.settings.max).length}};return this.element.mask(this.settings.maskOptions||o),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),C.addAttributes(this.element.parent(),this,this.settings.attributes,"wrapper",!0),C.addAttributes(this.element,this,this.settings.attributes,"spinbox",!0),C.addAttributes(this.buttons.down,this,this.settings.attributes,"btn-down",!0),C.addAttributes(this.buttons.up,this,this.settings.attributes,"btn-up",!0),this},enableLongPress:function(t,e){e.addButtonStyle(t),e.longPressInterval=setInterval(function(){$(t.currentTarget).is(":hover")&&e.handleClick(t)},250)},disableLongPress:function(t,e){e.removeButtonStyle(t),clearInterval(e.longPressInterval),e.longPressInterval=null},handleClick:function(t){t.preventDefault(),this.isDisabled()||1!==t.which||this.isReadonly()||($(t.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(t,e){var n=t.which;if(-1!==$.inArray(n,[35,36,37,38,39,40])&&!this.isReadonly())switch(n){case 35:e.element.attr("min")&&e.element.val(e.element.attr("min"));break;case 36:e.element.attr("max")&&e.element.val(e.element.attr("max"));break;case 38:e.addButtonStyle(e.buttons.up),e.increaseValue();break;case 40:e.addButtonStyle(e.buttons.down),e.decreaseValue()}},handleKeyup:function(t,e){if(!e.isDisabled()&&!this.isReadonly()){var n=t.which;switch(n){case 38:case 39:R.isRTL()&&39===n?e.removeButtonStyle(e.buttons.down):e.removeButtonStyle(e.buttons.up);break;case 37:case 40:R.isRTL()&&39===n?e.removeButtonStyle(e.buttons.up):e.removeButtonStyle(e.buttons.down)}e.updateAria(e.element.val())}},handleAfterPaste:function(t){var e=Number(t.element.attr("min")),n=Number(t.element.attr("max")),i=Number(t.element.val());i<e&&(i=e),i>n&&(i=n),t.updateVal(i)},correctValue:function(t){var e=Number(this.element.val()),n=parseInt(this.element.attr("min"),10),i=parseInt(this.element.attr("max"),10);return e<n?(t&&t.preventDefault(),this.updateVal(n)):e>i?(t&&t.preventDefault(),this.updateVal(i)):void 0},increaseValue:function(){var t=this.element.attr("max"),e=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return t&&e>t?this.updateVal(t):this.updateVal(e)},decreaseValue:function(){var t=this.element.attr("min"),e=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return t&&e<t?this.updateVal(t):this.updateVal(e)},updateVal:function(t){this.element.val(t).trigger("change"),this.updateAria(t)},checkForNumeric:function(t){return""===t?t:$.isNumeric(t)?Number(t):(t=parseInt(t,10),$.isNumeric(t)?Number(t):0)},updateAria:function(t){var e=this.element.attr("min"),n=this.element.attr("max");t=this.checkForNumeric(t),this.element[0].setAttribute("aria-valuenow",t||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==t&&n&&t>=n?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==t&&e&&t<=e?"disable":"enable")},addButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.addClass("is-active")}},removeButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){var t=this;this.element.prop("disabled",!0),this.element.attr("disabled","disabled"),this.element.parent(".spinbox-wrapper").addClass("is-disabled"),setTimeout(function(){t.element.parent(".spinbox-wrapper").addClass("is-disabled")})},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(t,e){t[(e=void 0===e||!(!e||"enable"===e))?"addClass":"removeClass"]("is-disabled")},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this},destroy:function(){var t=this.element.data("mask");for(var e in t&&"function"==typeof t.destroy&&t.destroy(),this.buttons){var n=$(e).data("button");n&&n.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function(){var t=this,e=!1;return this.element.on("focus.spinbox",function(){t.element.addClass("no-hover"),t.element.parent(".spinbox-wrapper").addClass("is-focused"),t.element.removeClass("is-hovered")}).on("blur.spinbox",function(){t.element.removeClass("no-hover"),t.element.parent(".spinbox-wrapper").removeClass("is-focused"),t.element.removeClass("is-hovered"),t.settings.autocorrectOnBlur&&t.correctValue()}).on("keydown.spinbox",function(e){t.handleKeyDown(e,t)}).on("keyup.spinbox",function(e){t.handleKeyup(e,t)}).on("mouseover.spinbox",function(){t.element.parent(".spinbox-wrapper").hasClass("is-focused")||t.element.addClass("is-hovered")}).on("mouseleave.spinbox",function(){t.element.removeClass("is-hovered")}).on("afterpaste.mask",function(){t.handleAfterPaste(t)}),this.buttons.up.add(this.buttons.down[0]).on("touchstart.spinbox mousedown.spinbox",function(n){if(1===n.which){if(e||t.handleClick(n),t.isTouch)return;e=!0,t.enableLongPress(n,t),$(document).one("mouseup",function(){t.disableLongPress(n,t),e=!1,t.element.focus()})}}),this}},$.fn.spinbox=function(t){return this.each(function(){var e=$.data(this,"spinbox");e?e.updated(t):e=$.data(this,"spinbox",new ia(this,t))})};var aa={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"},attributes:null};function sa(t,e){this.settings=C.mergeSettings(t,e,aa),this.element=$(t),this.init()}sa.prototype={init:function(){return this.build().handleEvents()},build:function(){var t,e=this,n=this,i=this.settings,a=this.element,s=a.parent(),r="x"===i.axis?"left":"top",o=s.is(".content")?s.parent():s,l=a.find(".splitter-drag-handle"),c=299,d=s.width();this.isRTL=R.isRTL(),setTimeout(function(){t=s.height()},0),this.docBody=$("body"),this.isSplitterRightSide=a.is(".splitter-right")||"x"===i.axis&&"right"===i.side,this.isSplitterHorizontal=a.is(".splitter-horizontal")||"y"===i.axis,i.uniqueId=C.uniqueId(this.element,"splitter"),l.length||(l=$('<div class="splitter-drag-handle"><span class="audible">'.concat(R.translate("SplitterDragHandle"),"</span>").concat($.createIcon("drag"),"</div>"))).appendTo(a);var u=function(){var s=0,r=!1,o=function(e,i,a){n.splitTo(e,t),$(i)[a?"addClass":"removeClass"]("rotate")};e.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><span class="audible">'.concat(R.translate("SplitterCollapseButton"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>')),e.splitterCollapseButton.appendTo(a),a[0].offsetLeft>10&&e.splitterCollapseButton.addClass("rotate"),e.splitterCollapseButton.click(function(){if(!a.is("is-dragging")){if(n.isRTL&&!n.isSplitterHorizontal||!n.isSplitterRightSide&&"left"===i.side||n.isSplitterRightSide&&"right"===i.side){var t=n.getContainerWidth()-a.outerWidth(),e=t;r||(s=t-s,c=t-c);var l=a[0].offsetLeft;n.isSplitterRightSide&&"right"===i.side&&(l=a[0].offsetLeft+1),s>=e?l>=t?o(c,this,!0):(s=l,o(e,this,!1)):l<t?(s=l,o(e,this,!1)):(o(s,this,!0),s=e)}else{var d=a[0].offsetLeft;s<=0?d<=10?o(c,this,!0):(s=d,o(0,this,!1)):d>10?(s=d,o(0,this,!1)):(o(s,this,!0),s=0)}r=!0}})};if(this.isSplitterRightSide){var h=o.prev();h.is(".main")?(this.leftSide=h,d=o.parent().outerWidth()-d):(this.leftSide=o,a.addClass("splitter-right")),o.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),i.collapseButton&&u(),this.setSplitterContainer(o.parent())}else this.isSplitterHorizontal?(this.topPanel=a.prev(),d=this.topPanel.height(),s.addClass("splitter-container is-horizontal"),a.next().addClass("flex-grow-shrink"),a.addClass("splitter-horizontal")):(this.rightSide=o,this.leftSide=o.prev().parent(),o.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"),i.collapseButton&&u(),this.setSplitterContainer(o.parent()));if(this.isRTL&&!this.isSplitterHorizontal){var p=this.getContainerWidth();d=p>=d?p-d:d}return localStorage&&i.save&&!isNaN(parseInt(localStorage[i.uniqueId],10))&&(d=localStorage[i.uniqueId]),d=parseInt(d,10),this.isSplitterHorizontal?a[0].style.top="".concat(d,"px"):a[0].style.top=0,this.splitTo(d,t),d<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:i.axis,containment:i.containment||"x"===i.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",function(){var t=o.parent().find("iframe");if(n.documentWidth=$(document).width(),t.length>0)for(var e=0,i=t.length;e<i;e++){var a=$(t[e]),s="".concat(parseInt(getComputedStyle(a.parent()[0]).width,10),"px"),r=$('<div class="overlay splitter-overlay"></div>');r.css("width",s),a.before(r)}}).on("dragend.splitter",function(s,l){o.parent().find(".splitter-overlay").remove();var c=a[0].getBoundingClientRect(),d=window.innerWidth-c.left,u=e.isSplitterRightSide&&"right"===e.settings.side||!e.isSplitterRightSide&&"left"===e.settings.side;0===c.left&&(o[0].style.width="0px",l[r]=10),i.collapseButton&&(l[r]<=10||u&&d<=21?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===i.resize&&n.splitTo(l[r],t),"immediate"===i.resize&&e.isRTL&&!e.isSplitterHorizontal&&setTimeout(function(){var i=parseInt(e.element.css("left"),10);n.splitTo(i,t)},0)}).on("drag.splitter",function(e,a){return!(a.left<=0||("immediate"===i.resize&&n.splitTo(a[r],t),0))}),"y"===i.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.element.find(".splitter-drag-handle"),this,this.settings.attributes,"handle",!0),C.addAttributes(this.element.find(".splitter-drag-handle svg.icon"),this,this.settings.attributes,"icon",!0),this},setSplitterContainer:function(t){this.container=this.element.closest(".splitter-container"),!this.container.length&&t&&t.length&&(t.addClass("splitter-container"),this.container=this.element.closest(".splitter-container"))},getContainerWidth:function(){var t;return(null===(t=this.container)||void 0===t||null==t?void 0:t.outerWidth())||0},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(t,e,n){(e>n||e<0)&&(e=parseInt(n,10)/2),this.topPanel[0].style.height="".concat(e,"px")},resizeLeft:function(t,e){var n=this.isRTL?e+20:this.leftSide.outerWidth()-e;this.rightSide[0].style.width="".concat(n,"px"),t[0].style.left=""},resizeRight:function(t,e){var n=t.parent(),i=n.is(".content")?n.parent():n,a=e,s=e-1;if(this.isRTL&&!this.isSplitterHorizontal){var r=this.getContainerWidth();a=r>=e?r-e-20:e,s=e}(!this.isSplitterRightSide&&"left"===this.settings.side||this.isSplitterRightSide&&"right"===this.settings.side)&&(i[0].style.width="0px"),this.leftSide[0].style.width="".concat(a,"px"),t[0].style.left="".concat(s,"px")},splitTo:function(t,e){var n=this.settings,i=this.element;this.isSplitterRightSide?((!this.isRTL&&t>n.maxWidth.right||this.isRTL&&t<n.maxWidth.right)&&(t=n.maxWidth.right),this.resizeRight(i,t)):this.isSplitterHorizontal?this.resizeTop(i,t,e):((!this.isRTL&&t>n.maxWidth.left||this.isRTL&&t<n.maxWidth.left)&&(t=n.maxWidth.left),this.resizeLeft(i,t)),this.element.trigger("split",[t]),this.docBody.triggerHandler("resize",[this]),localStorage&&(localStorage[this.settings.uniqueId]=t),this.split=t,this.parentHeight=e},unbind:function(){return this.element.off("updated.".concat("splitter")),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,aa)),this.unbind().init()},destroy:function(){return this.unbind(),$.removeData(this.element[0],"splitter"),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("splitter"),function(){t.updated()}).on("keydown.".concat("splitter"),function(e){32===e.which&&(t.toggleSelection(),e.preventDefault()),37===e.which&&t.splitTo(t.split-15,t.parentHeight),39===e.which&&t.splitTo(t.split+15,t.parentHeight)}),this}},$.fn.splitter=function(t){return this.each(function(){var e=$.data(this,"splitter");e?e.updated(t):e=$.data(this,"splitter",new sa(this,t))})};var ra={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},keepInList:{available:!1,selected:!1,additional:!1},attributes:null,attributesOverride:!0,template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function oa(t,e){this.settings=C.mergeSettings(t,e,ra),this.element=$(t),this.init()}oa.prototype={init:function(){var t=this,e=this.settings;e.draggable=$.extend(!0,ra.draggable,e.draggable),this.isTouch=m.features.touch,this.isAdditional=$("".concat(e.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout(function(){t.makeDraggable(),t.handleEvents(),t.initSelected(e.availableClass),t.initSelected(e.additionalClass)},0)},loadListview:function(){for(var t=this.settings,e=[{dataset:t.available,class:t.availableClass,draggable:t.draggable.available},{dataset:t.selected,class:t.selectedClass,draggable:t.draggable.selected},{dataset:t.additional,class:t.additionalClass,draggable:t.draggable.additional}],n=0,i=e.length;n<i;n++){var s=e[n],r=$("".concat(s.class," .listview"),this.element),o=r.data("listview"),l={dataset:s.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===t.searchable||"true"===t.searchable)&&$("".concat(s.class," .searchfield"),this.element).length>0&&(l.searchable=!0),!s.dataset&&r.length&&$("li",r).length?r.listview(l):r.length&&(o&&o.destroy(),-1===t.template.indexOf('data-id="{{id}}"')&&(t.template=t.template.replace("<li",'<li data-id="{{id}}"')),l.template=t.template,l.dataset=s.dataset||[],l.dataset.forEach(function(t){/string|number/.test(a(t.id))&&""!==t.id||(t.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))}),0===l.dataset.length&&(l.forceToRenderOnEmptyDs=!0),l.attributesOverride=t.attributesOverride,l.attributes=this.getLvAutomationAttributes(s.class),r.listview(l)),s.draggable||$("ul",r).addClass("is-not-droppable")}},getLvAutomationAttributes:function(t){var e,n=this,i=this.settings;if(i.attributes&&"string"==typeof t&&t.length>1){var a="-swaplist-".concat(t.substring(1));if(Array.isArray(i.attributes))e=[],i.attributes.forEach(function(t){var i="function"==typeof t.value?t.value(n):t.value;e.push({name:t.name,value:i+a})});else{var s="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;e={name:i.attributes.name,value:s+a}}}return e},setElements:function(){var t=this,e=this.settings,n="";if(this.offset=null,this.containers=$("".concat(e.availableClass,",").concat(e.selectedClass,",").concat(e.additionalClass),this.element),this.actionButtons=$("".concat(e.availableBtn,",").concat(e.additionalBtn,",").concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.selectedButtons=$("".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.tabButtonsStr="".concat(e.availableBtn,", ").concat(e.additionalBtn,", ").concat(this.selectedButtons.length>1?e.selectedBtnRight:e.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},e.numOfSelectionsClass="num-of-selections",e.itemContentClass="swaplist-item-content",e.itemContentTempl=$('<div><p><span class="'.concat(e.numOfSelectionsClass,'">###</span>\n      <span class="').concat(e.numOfSelectionsClass,'-text">&nbsp;</span></p><div/>')),e.attributes){var i=[{btn:$("".concat(e.availableClass," ").concat(e.availableBtn),this.element),suffix:(e.availableClass||"").substring(1)},{btn:$("".concat(e.selectedClass," ").concat(e.selectedBtnLeft),this.element),suffix:"".concat((e.selectedClass||"").substring(1),"-left")},{btn:$("".concat(e.selectedClass," ").concat(e.selectedBtnRight),this.element),suffix:"".concat((e.selectedClass||"").substring(1),"-right")},{btn:$("".concat(e.additionalClass," ").concat(e.additionalBtn),this.element),suffix:(e.additionalClass||"").substring(1)}];i.forEach(function(t){t.suffix="swaplist-btn-".concat(t.suffix)}),i.forEach(function(n){return C.addAttributes(n.btn,t,e.attributes,n.suffix,e.attributesOverride)}),C.addAttributes(this.element,this,e.attributes,"swaplist",e.attributesOverride)}e.draggable.available||(n="".concat(e.availableClass," ").concat(e.availableBtn,",").concat(e.selectedBtnLeft),$(n,this.element).prop("disabled",!0)),e.draggable.selected||(n="".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),e.draggable.available||(n+=",".concat(e.additionalClass," ").concat(e.additionalBtn)),this.isAdditional&&e.draggable.additional||(n+=",".concat(e.availableClass," ").concat(e.availableBtn)),$(n,this.element).prop("disabled",!0),$("".concat(e.additionalClass," ").concat(e.additionalBtn),this.element).addClass("is-rotate")),e.draggable.additional||$("".concat(e.additionalClass," ").concat(e.additionalBtn,",").concat(e.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var t=this.settings,e=[t.availableClass,t.selectedClass,t.additionalClass],n=0,i=e.length;n<i;n++){var a=$("".concat(e[n]," .listview"),this.element);$("li",a).length||a.addClass("is-multiselect")}},initSelected:function(t){if((t=this.isjQuery(t)?t:$(t,this.element)).length){for(var e=$(".listview",t).data("listview"),n=$("li[selected]",t),i=0,a=n.length;i<a;i++){var s=$(n[i]);s.removeAttr("selected"),e.select(s)}this.moveElements(t,this.settings.selectedClass)}},moveElements:function(t,e){var n=this;if(null!==e){t="string"!=typeof t?t:$(t,this.element),e="string"!=typeof e?e:$(e,this.element);var i=$(".listview",t).data("listview");if(this.clearSelections(),this.selections.owner=t,this.selections.droptarget=e,this.isTouch){if(i.selectedItems)for(var a=0,s=i.selectedItems.length;a<s;a++)this.selections.items[a]=i.selectedItems[a].closest("li")}else this.selections.items=i.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(i),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var r=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof r&&!r||"string"==typeof r&&"false"===r.toLowerCase())return;var o=$("ul",e),l=$("li",o).length,c=this.selections.items.length+l;if(this.selections.items)for(var d=this.getDataList(e),u=function(i,a){var s=$(n.selections.items[i]);if(n.isKeepInList(e)&&d.some(function(t){return t.id===s.data().id}))s.remove();else{var r=n.isKeepInList(t)?s.clone():s;r.attr({"aria-posinset":l+i+1,"aria-setsize":c}).find("mark.highlight").contents().unwrap(),o.append(r)}},h=0,p=this.selections.items.length;h<p;h++)u(h);this.afterUpdate($(".listview",e).data("listview"))}}},getContainer:function(t){var e=this.settings;if("object"===a(t[0])&&t[0].node){var n=t[0].node.closest(".card"),i="";return n.is(e.availableClass)?i=e.availableClass:n.is(e.selectedClass)?i=e.selectedClass:n.is(e.additionalClass)&&(i=e.additionalClass),{container:n,class:i}}return null},unselectElements:function(t){if(t.selectedItems)for(var e=0,n=t.selectedItems.length;e<n;e++)t.select($(t.selectedItems[e]));t&&t.element&&t.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var t=document.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},isMatchMediaSupports:function(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t["".concat(e,"Width")],height:t["".concat(e,"Height")]}},isMaxWidth:function(t){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(t,"px)")).matches||this.viewport().width<=t},makeDraggable:function(){var t=this,e=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=e.first().attr("data-swap-handle"),this.handle=!this.isTouch&&$(this.handle,e).length>0?this.handle:null,$(this.handle,e).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",function(){t.selections.isHandle=!0}).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",function(){t.selections.isHandle=!1}),this.targets=e.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",function(){return this.dragDrop&&this.dragDrop(),!1}).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(t,e,n){for(var i=!1,a=$(t),s=0,r=a.length;s<r;s++){var o=$(a[s]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||n<=l.top||n>=l.top+o.outerHeight()||(i=o)}return i},draggTouchElement:function(t,e){var n=t.originalEvent.changedTouches[0];e[0].style.top="".concat(n.pageY-this.offset.y,"px"),e[0].style.left="".concat(n.pageX-this.offset.x,"px")},hasModifier:function(t){return t.ctrlKey||t.metaKey||t.shiftKey},addDropeffects:function(){if(this.targets)for(var t=0,e=this.targets.length;t<e;t++)$(this.targets[t]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var n=0,i=this.selections.items.length;n<i;n++)$(this.selections.items[n]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var t=0,e=this.selections.items.length;t<e;t++){var n=$(this.selections.items[t]);n.removeAttr("aria-grabbed".concat(n.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(t){t=this.isjQuery(t)?t:$(t,this.element);var e=$(".listview li",t),n=t.find(".listview").data("listview"),i=this.getDataList(t),a=!1;n&&n.filteredDataset&&(i=c(n.filteredDataset),a=!0);for(var s=0,r=e.length;s<r;s++){var o=$(e[s]),l=i[s];a&&(l.node=o,delete l._isFilteredOut),o.is(".is-selected")&&this.selections.itemsData.push(l)}},initDataset:function(){var t=this.settings,e=[{type:"available",dataset:t.available,class:t.availableClass},{type:"selected",dataset:t.selected,class:t.selectedClass},{type:"additional",dataset:t.additional,class:t.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var n=0,i=e.length;n<i;n++)for(var a=e[n],s=$("".concat(a.class," .listview li"),this.element),r=0,o=s.length;r<o;r++){var l=void 0,c=void 0,d=$(s[r]);a.dataset?delete(l=JSON.parse(JSON.stringify(a.dataset[r]))).selected:(l={text:$.trim($(".swaplist-item-content",d).text())},(c=d.attr("data-value"))&&(l.value=c)),this.dataset[a.type]&&(l.node=d,this.dataset[a.type].push(l))}},getDataList:function(t){var e=this.settings,n=this.dataset;return(t=this.isjQuery(t)?t:$(t,this.element)).is(e.additionalClass)?n.additional:t.is(e.selectedClass)?n.selected:t.is(e.availableClass)?n.available:[]},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},syncDataset:function(t,e){var n=this,i=$(".listview li",e),a=t.find(".listview").data("listview"),s=e.find(".listview").data("listview"),r=this.getDataList(t),o=this.getDataList(e),l=function(t,e){if(t&&e){var n={owner:t.getAttribute("data-id"),item:e.getAttribute("data-id")};return void 0!==n.owner&&void 0!==n.item&&n.owner===n.item}return!1};if(t.is(e)){for(var c=[],d=0,u=i.length;d<u;d++)for(var h=i[d],p=0,f=r.length;p<f;p++){var g=r[p];if(l(g.node[0],h)){c.push(g);break}}r.splice(0,r.length);for(var m=0,v=c.length;m<v;m++)r.push(c[m])}else for(var b=0,y=this.selections.items.length;b<y;b++)for(var w=this.selections.items[b],x=!0,C=0,k=i.length;C<k&&x;C++)if($(i[C]).data().id===w.data().id)for(var T=function(i,a){var s=r[a];if(l(s.node[0],w[0]))return n.isKeepInList(e)&&o.some(function(t){return t.id===s.id})||(o.push(s),n.arrayIndexMove(o,o.length-1,C)),n.isKeepInList(t)||r.splice(a,1),x=!1,"break"},A=0,S=r.length;A<S&&"break"!==T(0,A);A++);a.updated({dataset:r}),s.updated({dataset:o}),this.makeDraggable()},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},isKeepInList:function(t){var e=this.settings;return t.is(e.availableClass)&&e.keepInList.available||t.is(e.selectedClass)&&e.keepInList.selected||t.is(e.additionalClass)&&e.keepInList.additional},updateAttributes:function(t){for(var e=$("li",t),n=0,i=e.length;n<i;n++)$(e[n]).attr({"aria-posinset":n+1,"aria-setsize":i})},afterUpdate:function(t){var e=this.selections.droptarget.find("li:focus").index(),n=".card.".concat(this.selections.droptarget[0].classList[1]," li");t&&(this.selections.placeholder&&(t.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(t),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach(function(t){t.show()}),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),e>=0&&this.element.find(n).eq(e).focus()},getItems:function(t){return t=this.isjQuery(t)?t:$(t,this.element),this.getDataList(t)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(t,e){var n=!1;if(!this.selections.isInSelection){if(t.selectedItems)for(var i=0,a=t.selectedItems.length;i<a;i++)if(e.is(t.selectedItems[i]))return n=!0,!1;n||(t.select(e),this.selections.isInSelection=!0)}return!0},updateDataset:function(t){for(var e=this.settings,n=[{type:"available",dataset:t.available,class:e.availableClass},{type:"selected",dataset:t.selected,class:e.selectedClass},{type:"additional",dataset:t.additional,class:e.additionalClass}],i=0,a=n.length;i<a;i++){var s=n[i],r=$("".concat(s.class," .listview"),this.element),o=r.data("listview");o&&(o.deselectItemsBetweenIndexes([0,$("li",r).length-1]),e[s.type]=s.dataset||[],o.loadData(e[s.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(e.availableClass),this.initSelected(e.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ra)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function(){var t=this,e=t.settings,n=t.selections;t.actionButtons.off("click.swaplist").on("click.swaplist",function(){var n=$(this),i=n.closest(".card"),a=null;i.is(e.availableClass)?(a=e.draggable.selected?e.selectedClass:t.isAdditional&&e.draggable.additional?e.additionalClass:null,t.moveElements(e.availableClass,a)):i.is(e.additionalClass)?(a=e.draggable.selected?e.selectedClass:e.draggable.available?e.availableClass:null,t.moveElements(e.additionalClass,a)):i.is(e.selectedClass)&&(n.is(e.selectedBtnLeft)?t.moveElements(e.selectedClass,e.availableClass):n.is(e.selectedBtnRight)&&t.moveElements(e.selectedClass,e.additionalClass))}),t.containers.on("keydown.swaplist",".listview",function(n){var i=$(this).closest(t.containers);77===(n=n||window.event).keyCode&&t.hasModifier(n)&&(!i.is(e.selectedClass)||i.is(e.selectedClass)&&1===t.selectedButtons.length?i.find(t.actionButtons).trigger("click.swaplist"):t.selectedButtons.first().focus(),n.preventDefault())}),t.selectedButtons.on("keydown.swaplist",function(e){var n,i,a=$(this);13!==(e=e||window.event).keyCode&&32!==e.keyCode||(a.trigger("click.swaplist"),e.preventDefault()),(37===e.keyCode||39===e.keyCode)&&t.selectedButtons.length>1&&(n=t.selectedButtons.index(this),i=37===e.keyCode?n>0?n-1:t.selectedButtons.length-1:n<t.selectedButtons.length-1?n+1:0,t.selectedButtons[i].focus())}),t.element.on("keydown.swaplist",t.tabButtonsStr,function(t){var e=$(this);if(9===(t.keyCode||t.which)&&!t.shiftKey){var n=e.closest(".card")[0],i=[].slice.call(n.querySelectorAll("li[tabindex]")),a=i.length,s=!1;if(a&&i.forEach(function(t){-1!==parseInt(t.getAttribute("tabindex"),10)&&(s=!0)}),!s){var r=n.querySelector("li");r&&r.setAttribute("tabindex",0)}}}),t.containers.on("filtered.swaplist",".listview",function(){t.makeDraggable()}),t.element.on("mousedown.swaplist",t.dragElements,function(e){t.handle&&$(e.target).closest("li").attr({draggable:$(e.target).is(".draggable")}),e.stopPropagation()}).on(t.dragStart,t.dragElements,function(i){if(i.stopImmediatePropagation(),!t.handle||n.isHandle){var a,s,r=$(i.target).closest("li"),o=$(".listview",r.closest(".card")).data("listview");if(o){t.isTouch||t.draggedMakeSelected(o,r),t.clearSelections(),n.owner=r.closest(".card"),n.dragged=r,n.draggedIndex=r.index(),n.placeholder=r.clone(!0),n.placeholder.attr("id","sl-placeholder"),t.setSelectionsItems(n.owner),n.items=o.selectedItems,t.selections.move={items:t.selections.itemsData,from:t.getContainer(t.selections.itemsData)};var l=t.element.triggerHandler("beforeswap",[t.selections.move]);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())n.dragged=null;else{if($(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(n.items.length),$(".".concat(e.numOfSelectionsClass,"-text"),e.itemContentTempl).text(R.translate("ItemsSelected")),t.addDropeffects(),t.isTouch){a=r[0].getBoundingClientRect(),s=i.originalEvent.changedTouches[0],t.offset={x:s.pageX-a.left,y:s.pageY-a.top};for(var c=0,d=t.containers.length;c<d;c++)t.containers[c].style.zIndex="1";n.placeholderTouch=n.dragged.clone(!0),n.items.length>1&&!$("#sl-placeholder-touch2").length&&n.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(n.dragged).hide(),n.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(t.element.is(".one-third")&&t.isMaxWidth(766)?t.element.parent():t.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(n.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(n.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(n.owner.width(),"px"),t.draggTouchElement(i,n.placeholderTouch)}else n.dragged.addClass("is-dragging"),i.originalEvent.dataTransfer.setData("text",""),n.items.length>1&&$(".".concat(e.itemContentClass),n.dragged).html(e.itemContentTempl.html());i.stopPropagation()}}}else i.stopPropagation()}).on(t.dragEnterWhileDragging,t.dragElements,function(e){n.dragged&&(t.element.triggerHandler("draggingswap",[n.move]),n.related=e.target,$("ul, li",t.element).removeClass("over"),$(e.target).closest("ul, li").addClass("over"),n.droptarget=$(n.related).closest(".card"),$('[aria-grabbed="true"]',t.element).not(n.dragged).slideUp(),e.stopPropagation())}).on(t.dragOverWhileDragging,t.dragElements,function(i){if(n.dragged){var a,s=$(this),r=$(".listview",n.dragged.closest(".card")).data("listview");if(t.isTouch){if(t.handle&&!n.isHandle)return;n.isInSelection||(t.draggedMakeSelected(r,n.dragged),n.items=r.selectedItems,$(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(n.items.length)),a=i.originalEvent.touches[0],s=t.getElementByTouchInList($("ul, li",t.element),a.pageX,a.pageY)||s,n.dragged.addClass("is-dragging"),n.placeholderTouch.addClass("is-dragging is-dragging-touch"),n.placeholderTouch.show(),$('[aria-grabbed="true"]',t.element).not(n.dragged).not(n.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),n.items.length>1&&($(".".concat(e.itemContentClass),n.placeholderTouch.add("#sl-placeholder-touch2")).html(e.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),n.dragged.hide()),t.draggTouchElement(i,n.placeholderTouch),t.element.triggerHandler("draggingswap",[n.move]),n.related=s,$("ul, li",this.element).removeClass("over"),s.closest("ul, li").addClass("over"),n.droptarget=n.related.closest(".card")}i.preventDefault(),i.stopPropagation()}}).on(t.dragEnd,t.dragElements,function(i){if(n.dragged&&n.droptarget){var a=$(n.related).closest("li"),s=$("ul",n.droptarget),r=$("li",s).length,o=n.items.length+r;if(t.unselectElements($(".listview",n.owner).data("listview")),$.each(n.items,function(t,e){if((e=$(e)).find("mark.highlight").contents().unwrap(),r&&!$(n.related).is("ul")){var i=a.index()<n.draggedIndex&&n.owner.is(n.droptarget),l=i?e:$(n.items[n.items.length-1-t]),c=a.index()+(i?t+1:t+2);e.attr({"aria-posinset":c,"aria-setsize":o}),a[i?"before":"after"](l)}else e.attr({"aria-posinset":r+t+1,"aria-setsize":o}),s.append(e);e.focus()}),n.items.length>1&&($(".".concat(e.itemContentClass),n.dragged).html($(".".concat(e.itemContentClass),n.placeholder).html()),t.isTouch&&n.dragged.show()),t.isTouch)for(var l=0,c=t.containers.length;l<c;l++)t.containers[l].style.zIndex="";t.makeDraggable(),n.isHandle=null,$('[aria-grabbed="true"]',t.element).show(),t.afterUpdate($(".listview",n.droptarget).data("listview")),i.preventDefault(),i.stopPropagation()}})}},$.fn.swaplist=function(t){return this.each(function(){var e=$.data(this,"swaplist");e?e.updated(t):e=$.data(this,"swaplist",new oa(this,t))})};var la={swipeType:"reveal"};function ca(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,la),this.init()}ca.prototype={init:function(){this.render(),this.handleEvents()},render:function(){this.container=this.element[0].querySelector(".swipe-container"),this.swipeType=this.settings.swipeType;var t=this.element[0].querySelector(".btn-swipe-action-left"),e=this.element[0].querySelector(".btn-swipe-action-right");t&&"reveal"===this.swipeType&&(t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true")),e&&"reveal"===this.swipeType&&(e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")),t&&"reveal"===this.swipeType&&(this.container.scrollLeft=85)},handleEvents:function(){var t=this,e=0,n=0,i=0;if("reveal"===this.swipeType)return this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").on("click.swipe-action",function(){t.container.scrollLeft=85,t.element.focus()}),void $(this.container).on("scroll.swipe-action",function(){var e,n;null===(e=t.element.find(".btn-actions"))||void 0===e||null===(n=null==e?void 0:e.data("popupmenu"))||void 0===n||null==n||n.close()});this.element.on("touchstart.swipe-action",function(t){e=t.changedTouches[0].screenX},{passive:!0}),this.element.on("touchend.swipe-action",function(i){var a,s,r="";(n=i.changedTouches[0].screenX)<e&&(r="left"),n>e&&(r="right"),r&&(t.element.find(".swipe-action-".concat("left"===r?"right":"left"," button")).click(),null===(a=t.element.find(".btn-actions"))||void 0===a||null===(s=null==a?void 0:a.data("popupmenu"))||void 0===s||null==s||s.close())},{passive:!0}),$(this.container).on("scroll.swipe-action",function(e){var n,a,s=e.target,r=s.scrollLeft/(s.scrollWidth-s.clientWidth)*100;if(null===(n=t.element.find(".btn-actions"))||void 0===n||null===(a=null==n?void 0:n.data("popupmenu"))||void 0===a||null==a||a.close(),!(Math.abs(i-r)<1)){i=r;var o="";0===r&&(o="right"),r>98&&(o="left"),o&&t.element.find(".swipe-action-".concat("left"===o?"right":"left"," button")).click()}})},set swipeType(t){if("continuous"===t)return this.settings.swipeType=t,void this.container.classList.add("continuous");this.settings.swipeType="reveal",this.container.classList.remove("continuous")},get swipeType(){return this.settings.swipeType},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").off("click.swipe-action"),this.element.off("scroll.swipe-action").off("click.swipe-action"),this.element.off("touchstart.swipe-action"),this.element.off("touchend.swipe-action"),$(this.container).off("scroll.swipe-action")},destroy:function(){this.teardown(),$.removeData(this.element[0],"swipeaction")}},$.fn.swipeaction=function(t){return this.each(function(){var e=$.data(this,"swipe-container");return e?e.updated(t):e=$.data(this,"swipe-container",new ca(this,t)),e})};var da={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function ua(t,e){this.settings=C.mergeSettings(t,e,da),this.element=$(t),this.init()}ua.prototype={init:function(){this.handleEvents()},unbind:function(){var t=this.settings;return this.element.off("scroll.scrollaction"),t&&$(t.scrollActionTarget).removeClass(t.classToAdd),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,da)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function(){var t=this,e=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",function(){var n=t.element.scrollTop();n>t.lastScrollTop?$(e.scrollActionTarget).addClass(e.classToAdd):$(e.scrollActionTarget).removeClass(e.classToAdd),t.lastScrollTop=n})}},$.fn.scrollaction=function(t){return this.each(function(){var e=$.data(this,"scrollaction");e?e.updated(t):e=$.data(this,"scrollaction",new ua(this,t))})};var ha={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null,attributes:null};function pa(t,e){return this.init(t,e)}pa.prototype={init:function(t,e){if(!this.element&&t instanceof HTMLElement&&(this.element=$(t)),"object"===a(e)||void 0===this.settings){var n=this.settings||ha;this.settings=C.mergeSettings(this.element[0],e,n)}return this.render()},render:function(){var t=$('<div class="step-chart-steps"></div>'),e='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',n=null===this.settings.completed&&null===this.settings.steps;if(n&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=C.parseSettings(this.element)),this.element.children().length>0)return this;for(var i=0;i<this.settings.steps;i++){var a=$('<div class="step-chart-step"></div>');C.addAttributes(a,this.settings,this.settings.attributes,"step".concat(i)),i<this.settings.completed&&(a.addClass("is-complete"),this.settings.completedColor&&a.css("background-color",this.settings.completedColor)),i===this.settings.inProgress-1&&(a.addClass("is-inprogress"),this.settings.inProgressColor&&a.css("background-color",this.settings.inProgressColor)),t.append(a)}var s=this.settings.completedText||R.translate("StepsCompleted");s=(s=s.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),n&&(s=R?R.translate("NoData"):"No Data Available");var r=$('<span class="step-chart-label">'.concat(s,"</span>"));if(this.settings.steps===this.settings.completed&&(t.addClass("is-complete"),r.append(e.replace("{icon-name}","icon-success"))),this.settings.iconType&&r.append(e.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var o=this.settings.extraText;o=(o=(o="{1} Days Overdue"===(o="{0} Days Remaining"===o?R.translate("DaysRemaining"):o)?R.translate("DaysOverdue"):o).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),r.append('<span class="step-chart-label-small">'.concat(o,"</span>"))}return this.element.append(r,t),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(t.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),r.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),C.addAttributes(r,this.settings,this.settings.attributes,"label"),C.addAttributes(r.find(".icon"),this.settings,this.settings.attributes,"icon"),C.addAttributes(r.find(".step-chart-label-small"),this.settings,this.settings.attributes,"label-small"),this},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),this.render()},destroy:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this}},$.fn.stepchart=function(t){return this.each(function(){var e=$.data(this,"stepchart");e?e.updated(t):(e=$.data(this,"stepchart",new pa(this,t))).destroy=function(){this.teardown(),$.removeData(this,"stepchart")}})};var fa=["horizontal","vertical","module-tabs","header-tabs"],ga={addTabButton:!1,addTabButtonCallback:null,appMenuTrigger:!1,appMenuTriggerText:void 0,appMenuTriggerTextAudible:!1,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1,attributes:null,sortable:!1};function ma(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,ga),this.init()}ma.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var t,e=this,n=this,i=!1;(t=this.element.next(".tab-panel-container")).length||(t=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(i=!0));var a=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&a.length&&(t=a),this.element.next(".application-menu").length&&(t=this.element.next().next(".page-container"),i=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(t=$(this.settings.containerElement),i=!1),t&&t.length||(t=$('<div class="tab-panel-container"></div>'),i=!0),t[0].classList.contains("tab-panel-container")||t[0].classList.add("tab-panel-container"),i&&t.insertAfter(this.element),this.container=t;var s=this.element.children(".tab-list-container");!s.length&&this.isScrollableTabs()&&(s=$('<div class="tab-list-container"></div>').prependTo(this.element)),s.length&&(this.tablistContainer=s);var r=!0,o=this.element.closest(".header");fa.forEach(function(t,n){e.element.hasClass(fa[n])&&(r=!1)}),r&&(o.length?n.element.addClass("header-tabs"):n.element.addClass("horizontal")),n.settings.tabCounts&&n.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablistContainer?this.tablist.appendTo(this.tablistContainer):this.tablist.appendTo(this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",function(t){t.deltaY&&(this.scrollLeft+=t.deltaY)})),n.tablist.attr({class:"tab-list",role:"tablist","aria-multiselectable":"false"}),this.checkResponsive(!1),this.renderHelperMarkup(),n.anchors=n.tablist.children("li:not(.separator)").children("a"),n.anchors.each(function(){var t,e=$(this),i=e[0].textContent.toLowerCase().trim().split(" ").join("-");e.attr({role:"tab","aria-expanded":"false","aria-selected":"false",tabindex:"-1"}).parent().attr("role","presentation").addClass("tab"),e.parent().hasClass("dismissible")&&!e.parent().children(".icon").length&&(t=$.createIconElement({icon:"close",classes:"icon close"})).insertAfter(e),n.settings.attributes&&(C.addAttributes(e,n,n.settings.attributes,"".concat(i,"-a")),t&&C.addAttributes(t,n,n.settings.attributes,"".concat(i,"-close-btn")));var a=e.nextAll("ul").first();a.length>0&&(a.addClass("dropdown-tab"),e.parent().addClass("has-popupmenu").popupmenu({menu:a,trigger:"click",attachToBody:!0,attributes:n.settings.attributes}),e.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),e.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(e)),n.settings.tabCounts&&0===$(this).find(".count").length&&$(this).prepend('<span class="count">0 </span>'),(n.settings.moduleTabsTooltips||n.settings.multiTabsTooltips)&&e.on("beforeshow.toolbar",function(){return"yes"===e.data("cutoffTitle")}).tooltip({content:"".concat(e.text().trim())})}),n.panels=$(),n.anchors.each(function(){var t,e=$(this),i=e.parent(),a=i.data("popupmenu"),s=e.attr("href");if("#"===s.substr(0,1)){if("#/"===s.substr(0,2)&&(s=s.replace("#/","#")),void 0!==s&&"#"!==s){if(s=s.replace(/\//g,"\\/"),t=$(s),i.is(":not(.has-popupmenu)")&&!t.length)return;if(n.settings.attributes){var r=e[0].textContent.toLowerCase().trim().split(" ").join("-");C.addAttributes(t,n,n.settings.attributes,"".concat(r,"-panel"))}e.data("panel-link",t),t.data("tab-link",e),n.panels=n.panels.add(t)}a&&a.menu.children("li").each(function(){var t=$(this),e=t.children("a"),i=e.attr("href"),a=$(i);if(e.data("panel-link",a),a.data("tab-link",e),n.panels=n.panels.add(a),n.anchors=n.anchors.add(e),t.hasClass("dismissible")){var s=t.children(".icon");s.length||(s=$.createIconElement({icon:"close",classes:"icon close"})),s.detach().appendTo(e)}}).on("click.popupmenu",".icon",function(t){var e=$(this),i=e.closest("li");i.is(".dismissible")&&e.is(".icon")&&(t.preventDefault(),t.stopPropagation(),n.closeDismissibleTab(i.children("a").attr("href")))})}}),n.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),n.panels.each(function(){var t=$(this);t.parent().is(n.container)||n.container.append(t)});var l,c,d=":not(.separator):not(.is-disabled):not(.is-hidden)",u=this.tablist.children("li".concat(d)),h=this.tablist.children("li.is-selected".concat(d)),p=h.children("a");return n.nestedTabControls=n.panels.find(".tab-container"),u.length&&(this.settings.changeTabOnHashChange&&(l=window.location.hash)&&l.length&&(c=u.find('a[href="'.concat(l,'"]'))).length&&(p=(h=c.first().parent()).children("a")),h.length||(p=(h=u.not(".add-tab-button, .application-menu-trigger").first()).children("a")),h.length&&this.activate(p.attr("href"),p)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.isModuleTabs()&&u.filter(".application-menu-trigger").length>0&&(u.find('a[tabindex="0"]').attr("tabindex","-1"),u.filter(".application-menu-trigger").find("a").attr("tabindex","0")),this.setOverflow(),this.positionFocusState(p),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",function(){e.renderEdgeFading()}),this.renderEdgeFading()),this.createSortable(),"undefined"!=typeof ResizeObserver&&(this.ro=new ResizeObserver(function(){$("body").triggerHandler("resize")}),this.ro.observe(this.element[0]),this.containerElement&&this.ro.observe(this.containerElement[0])),this},createSortable:function(){if(this.settings.sortable&&(!m.features.touch||this.isModuleTabs()||this.isVerticalTabs())){var t=this.tablist?this.tablist[0]:null;if(t){[].slice.call(t.querySelectorAll(".is-disabled, .separator, .application-menu-trigger")).forEach(function(t){return t.setAttribute("data-arrange-exclude","true")}),t.setAttribute("data-options",'{"placeholderCssClass": "tab arrange-placeholder", "useItemDimensions": "true"}'),t.classList.add("arrange");var e=this.tablist.data("arrange");e||(e=this.tablist.arrange().data("arrange"));var n=null;this.isModuleTabs()||this.isVerticalTabs()||this.isHeaderTabs()||this.tablist.on("beforearrange.tabs",function(){n=$(this).closest(".tab-container")[0]}).on("draggingarrange.tabs",function(){var t;null===(t=n)||void 0===t||null==t||t.classList.add("has-placeholder")}),this.tablist.on("arrangeupdate.tabs",function(){var t;null===(t=n)||void 0===t||null==t||t.classList.remove("has-placeholder")}),this.element.on("aftertabadded.tabs",function(){var t;null===(t=e)||void 0===t||null==t||t.updated()})}}},renderHelperMarkup:function(){var t,e,n=this.tablistContainer||this.tablist;this.isModuleTabs()&&(n=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=n.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(R.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),n.after(this.moreButton)),null!==(t=this.moreButton)&&void 0!==t&&(null==t?void 0:t.length)&&this.settings.attributes&&C.addAttributes(this.moreButton,this,this.settings.attributes,"btn-more");var i,a=this.tablist.find(".application-menu-trigger");if(!0===this.settings.appMenuTrigger)if(this.isModuleTabs()){if(!a.length){var s=this.settings.appMenuTriggerTextAudible?' class="audible"':"";a=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span'.concat(s,">").concat(this.settings.appMenuTriggerText||R.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(a)}}else this.isVerticalTabs()&&a.length&&a.off().removeData().remove();else a.length&&(this.isVerticalTabs()?a.off().removeData().remove():this.tablist.prepend(a));a.length&&(this.settings.attributes&&C.addAttributes(a,this,this.settings.attributes,"appmenu-trigger-btn"),null===(i=$("#application-menu").data("applicationmenu"))||void 0===i||null==i||i.modifyTriggers([a.children("a")])),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="-1" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(R.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),null!==(e=this.addTabButton)&&void 0!==e&&(null==e?void 0:e.length)&&this.settings.attributes&&C.addAttributes(this.addTabButton,this,this.settings.attributes,"btn-add");var r=this.element.find(".more-actions-button .btn-actions");return r.length&&(this.moreActionsBtn=r),this},setupEvents:function(){var t=this,e=this;return this.tablist.on("mousedown.tabs","> li",function(t){if(e.handleAddFocusData(t,$(this)),$(t.target).hasClass("close")&&$(t.target).parent().hasClass("has-popupmenu")){var n=$(this).data("popupmenu").menu,i=[];$.each(n[0].children,function(t,e){i.push(e.children[0].href)}),e.closeDismissibleTabs(i)}return 3!==t.which&&e.handleTabClick(t,$(this))}).on("click.tabs","a",function(t){var e=$(t.currentTarget);!0!==this.wasTapped?("touchend"===t.type&&(this.wasTapped=!0),"#"===e.attr("href").substr(0,1)&&t.preventDefault()):this.wasTapped=!1}).on("click.tabs",".icon",function(t){var n=$(this);if(!n.is("[disabled]")&&!n.parent().hasClass("is-disabled")){var i=$(n).parent();i.hasClass("dismissible")&&(t.preventDefault(),t.stopPropagation(),e.closeDismissibleTab(i.children("a").attr("href")))}}).on("focus.tabs","a",function(t){return e.handleTabFocus(t,$(this))}).on("blur.tabs","a",function(){$(this).parent().removeClass("is-focused")}).on("keydown.tabs","a",function(e){return t.handleTabKeyDown(e)}),e.tablist.find("li").filter(".has-popupmenu").each(function(t,n){var i=$(n),a=i.children("a");i.data("popupmenu").menu.on("keydown.popupmenu","a",function(t){switch(t.which){case 27:i.addClass("is-selected"),a.focus();break;case 8:case 46:!function(t){t.altKey&&i.is(".dismissible")&&e.closeDismissibleTab(a.attr("href"))}(t)}}),i.on("selected.tabs",function(t,n){var i=$(this),s=$(n).attr("href");return!!e.activate(s,$(n))&&(e.positionFocusState(a),a.focus(),e.scrollTabList(i),i.addClass("is-selected"),!1)})}),e.tablist.find("li").filter(".dismissible").each(function(t,n){$(n).children("a").on("keydown.tabs",function(t){e.handleDismissibleTabKeydown(t)})}),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",function(t){e.handlePanelKeydown(t)}),this.element.on("focusout.tabs",function(){var t=!$.contains(e.element[0],document.activeElement),n=0===e.tablist.children(".has-popupmenu.is-open").length;t&&n&&!e.moreButton.is(".is-selected, .popup-is-open")&&e.hideFocusState()}).on("updated.tabs",function(t,n){e.updated(n)}).on("activated.tabs",function(t){t.stopPropagation()}).on("add.tabs",function(t,n,i,a){e.add(n,i,a)}).on("remove.tabs",function(t,n){e.remove(n)}),$("body").on("resize.tabs".concat(this.tabsIndex),function(){e.handleResize()}),e.handleResize(!0),this},setupHelperMarkupEvents:function(){var t,e=this;this.moreButton.on("click.tabs",function(t){e.handleMoreButtonClick(t)}).on("keydown.tabs",function(t){e.handleMoreButtonKeydown(t)}).on("focus.tabs",function(t){e.handleMoreButtonFocus(t)}).on("mousedown.tabs",function(t){e.handleAddFocusData(t,$(this))}),this.settings.addTabButton&&this.addTabButton.on("click.tabs",function(){e.handleAddButton()}).on("keydown.tabs",function(t){e.handleAddButtonKeydown(t)}).on("focus.tabs",function(t){e.handleAddButtonFocus(t)}),null!==(t=this.moreActionsBtn)&&void 0!==t&&(null==t?void 0:t.length)&&this.moreActionsBtn.on("keydown.tabs",function(t){e.handleMoreActionsButtonKeydown(t)})},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(t,e){var n=e;return n.is(".is-disabled")?(t.preventDefault(),!1):(n.is(this.moreButton)||(n=n.children("a")),this.hideFocusState(),n.data("focused-by-click",!0),!0)},handleTabClick:function(t,e){if(this.element.is(".is-disabled")||e&&(e.is(".is-disabled")||e.is(".separator")))return t.stopPropagation(),t.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(t))return!0;var n=e.children("a");if(n.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),e.is(".has-popupmenu"))return this.positionFocusState(n),!0;var i=n.attr("href");return e.is(".add-tab-button")&&(e=(n=this.handleAddButton()).parent(),i=n.attr("href"),this.element.trigger("tab-added",[n])),2===t.which?(e.is(".dismissible")&&$(t.target).is(".close")&&this.closeDismissibleTab(i),t.preventDefault(),!0):!this.activate(i,n)||(this.changeHash(i),this.focusState.removeClass("is-visible"),n.focus(),this.isScrollableTabs()&&this.scrollTabList(e),this.positionFocusState(n),!0!==this.settings.lazyLoad||!this.isURL(i))},handleMoreButtonClick:function(t){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(t.preventDefault(),t.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||t.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},hasMoreActions:function(){var t=this.element.find(".more-actions-button > .btn-actions");return t&&t.length>0},handleMoreActionsButtonKeydown:function(t){if(this.element.is(".is-disabled")||this.moreActionsBtn.is(".is-disabled"))return t.stopPropagation(),t.preventDefault(),!1;var e,n,i=this,a=this.addTabButton&&this.addTabButton.length,s=this.tablist.children("li".concat(":not(.separator):not(.is-disabled):not(:hidden)"));switch(t.which){case 37:case 38:if(a)this.addTabButton.focus();else{var r=this.findLastVisibleTab();this.hasMoreButton()?(n=r.attr("href"),t.preventDefault(),setTimeout(function(){i.buildPopupMenu(n),i.positionFocusState(i.moreButton,!0)},0)):e=r}break;case 39:case 40:e=s.first()}return e&&(t.preventDefault(),e.children("a").focus(),this.isScrollableTabs()&&this.scrollTabList(e)),!0},handleTabFocus:function(t,e){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var n=e.parent(),i=e.data("focused-by-click"),a=void 0===i||i&&!1===i;return $.removeData(e[0],"focused-by-click"),this.isTabOverflowed(n)?(this.buildPopupMenu(e.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(n.addClass("is-focused"),this.positionFocusState(e,a)),!0},handleMoreButtonFocus:function(t){if(this.element.is(".is-disabled"))t.preventDefault();else{var e=this.moreButton.data("focused-by-click"),n=e&&!1===e;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,n)}},handleTabKeyDown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey&&8!==t.which)return!0;var e=this,n=[8,13,32];function i(){return $.inArray(t.which,n)>-1}if(t.which<32&&!i()||t.which>46)return!0;if(i()&&!this.handleAppMenuTabKeydown(t))return!0;function a(n){t.preventDefault(),setTimeout(function(){e.buildPopupMenu(n)},0)}var s,r=":not(.separator):not(.is-disabled):not(:hidden)",o=$(t.currentTarget).parent(),l=o.children("a"),c=e.tablist.children("li".concat(r)),d=R.isRTL();function u(){for(var t=c.index(o)-1;t>-1&&!s;){if(c.eq(t).is(r))return c.eq(t);t-=1}if(e.hasMoreActions())return e.moreActionsBtn;if(e.settings.addTabButton)return e.addTabButton;var n=e.tablist.children("li".concat(r)).last();return e.hasMoreButton()&&e.isScrollableTabs()&&a(n.find("a").attr("href")),n}function h(){for(var t=c.index(o)+1;t<c.length&&!s;){if(c.eq(t).is(r))return c.eq(t);t++}var n=e.tablist.children("li".concat(r)).first();return e.hasMoreButton()&&e.isScrollableTabs()?(a(n.find("a").attr("href")),n):e.settings.addTabButton?e.addTabButton:e.hasMoreActions()?e.moreActionsBtn:n}switch(t.which){case 8:return t.altKey&&o.is(".dismissible")&&(t.preventDefault(),e.closeDismissibleTab(l.attr("href"))),!0;case 13:case 32:return function(){if(o.hasClass("has-popupmenu"))o.data("popupmenu").open();else{var t=l.attr("href");o.is(".add-tab-button")&&(l=e.handleAddButton(),o=l.parent(),t=l.attr("href"),e.element.trigger("tab-added",[l])),e.activate(t)&&(e.changeHash(t),(l.attr("ng-click")||l.attr("data-ng-click"))&&l.click(),l[0].focus(),e.hideFocusState(),e.handleOutboundLink(t))}}(),this.positionFocusState(),!1;case 38:s=u(),t.preventDefault();break;case 37:s=d?h():u(),t.preventDefault();break;case 40:s=h(),t.preventDefault();break;case 39:s=d?u():h(),t.preventDefault()}if(s){var p=s.is(".add-tab-button"),f=s.is(".btn-actions"),g=p||f?s:s.children("a");if(this.isTabOverflowed(s))return a(s.children("a").attr("href"));p?e.addTabButton.focus():f?e.moreActionsBtn.focus():(g.focus(),this.isScrollableTabs()&&(this.scrollTabList(g),e.positionFocusState(g,!0)))}return!0},handleDismissibleTabKeydown:function(t){var e=t.which,n=$(t.target);if(n.is("a")&&(n=n.parent()),t.altKey&&46===e){if(n.children("a").is("[disabled]")||n.hasClass("is-disabled"))return;t.preventDefault(),this.closeDismissibleTab(n.children("a").attr("href"))}},handleAppMenuTabKeydown:function(t){var e=$(t.target);if(!e.parent().is(".application-menu-trigger")&&!e.is(".application-menu-trigger"))return!0;var n=$("#application-menu");return!!n.length&&(t.preventDefault(),n.hasClass("is-open")?(n.trigger("close-applicationmenu",[!0]),!1):(n.trigger("open-applicationmenu",[!0,!0]),!1))},handleMoreButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=this,n=R.isRTL();function i(){t.preventDefault(),e.buildPopupMenu(e.tablist.find(".is-selected").children("a").attr("href")),e.positionFocusState(e.moreButton,!0)}function a(){t.preventDefault(),e.findLastVisibleTab()}switch(t.which){case 37:if(n){i();break}a();break;case 38:a();break;case 13:case 32:t.preventDefault();break;case 39:if(n){a();break}i();break;case 40:i()}return!0},handlePanelKeydown:function(t){var e=t.which,n=$(t.target),i=this.anchors.filter("#".concat(n.attr("id")));return this.anchors.filter("#".concat(n.attr("id"))).parent().is(".dismissible")&&t.altKey&&46===e?(t.preventDefault(),this.closeDismissibleTab(i.attr("href"))):t.ctrlKey&&38===e&&$.contains(document.activeElement,n[0])?(t.preventDefault(),this.activate(i.attr("href"),i)):void 0},triggerEventAfterTabAdded:function(t){var e=this.anchors.filter('[href="#'.concat(t,'"]'));this.element.triggerHandler("aftertabadded",[e])},handleAddButton:function(){var t=this,e=this.settings.addTabButtonCallback;if(e&&"function"==typeof e){var n=e();return this.triggerEventAfterTabAdded("newTabId"),this.anchors.filter('[href="#'.concat(n,'"]'))}var i,s=this.tablist.children().index(this.addTabButton),r=(t.idCounter="number"==typeof t.idCounter?t.idCounter:-1,t.idCounter++,"new-tab-".concat(t.idCounter)),o={name:((i=r.toString().split("-")).forEach(function(t,e){i[e]=t.charAt(0).toUpperCase()+t.slice(1)}),i.join(" ")),content:"&nbsp;",isDismissible:!0};s<0&&(s=this.tablist.find("li:not(.separator)").length);var l=this.element.triggerHandler("before-tab-added",[r,o,s]);return l?(l.newId&&l.newId.length&&"string"==typeof l.newId&&(r=l.newId),l.settings&&"object"===a(l.settings)&&(o=l.settings),isNaN(l.newIndex)||(s=l.newIndex),this.add(r,o,s),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(r,'"]'))):(this.add(r,o,s),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(r,'"]')))},handleAddButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=t.which;if([13,32,37,38,39,40].indexOf(e)<0)return!1;var n,i=this,a=R.isRTL(),s="li:not(.separator):not(.is-disabled):not(:hidden)";function r(){t.preventDefault(),n=i.tablist.find(s).last(),setTimeout(function(){i.buildPopupMenu(n.children("a").attr("href")),i.positionFocusState(i.moreButton,!0)},0)}function o(){i.hasMoreActions()?i.moreActionsBtn.focus():n=i.tablist.find(s).first()}switch(e){case 37:if(a){o();break}r();break;case 38:r();break;case 13:case 32:return t.preventDefault(),this.handleAddButton();case 39:if(a){r();break}o();break;case 40:o()}return n&&(n.children("a").focus(),this.isScrollableTabs&&(t.preventDefault(),this.scrollTabList(n))),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function(t){t||this.checkResponsive(!0),this.setOverflow();var e=this.tablist.find(".is-selected");(!e.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(e))&&(e=this.moreButton);var n=this.element.find(".application-menu-trigger");n.length>0&&n.hasClass("is-focused")&&(e=n.find("a")),e.length?this.positionFocusState(e):this.hideFocusState(),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(t){var e=this,n=e.element[0].classList;function i(){e.removeHelperMarkupEvents(),e.renderHelperMarkup(),e.setupHelperMarkupEvents()}this.isResponsiveVerticalTabs()&&p.isBelow("phone-to-tablet")?n.contains("is-in-responsive-mode")||(n.add("is-in-responsive-mode"),n.add("header-tabs"),n.contains("is-personalizable")||n.add("alternate"),n.remove("vertical"),t&&i()):n.contains("is-in-responsive-mode")&&(n.add("vertical"),n.remove("is-in-responsive-mode"),n.remove("header-tabs"),n.remove("alternate"),t&&i())},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var t=window.getComputedStyle(this.element[0]),e=t.getPropertyValue("height")+t.getPropertyValue("margin-top")+t.getPropertyValue("margin-bottom");this.tablist[0].style.height=e}},handleOutboundLink:function(t,e){"#"!==t.charAt(0)&&("/"!==t.charAt(0)||e&&!1!==e||(t=window.location.origin+t),window.location=t)},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(t){return!(!t||!t.length||1===t.length&&t.indexOf("#")<1)&&this.getPanel(t)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var t=this.element.closest(".module-tabs").length,e=this.element.closest(".header-tabs").length,n=this.element.closest(".tab-panel-container").length;return t>0||e>0||n>0},isTab:function(t){return t instanceof jQuery&&t.length&&t.is("li.tab")},isAnchor:function(t){return t instanceof jQuery&&t.length&&t.is("a")},getAnchor:function(t){return this.isAnchor(t)?t:(-1===t.indexOf("#")&&"/"!==t.charAt(0)&&(t="#".concat(t)),this.anchors.filter('[href="'.concat(t,'"]')))},getPanel:function(t){return this.isTab(t)&&(t=t.children("a")),this.isAnchor(t)&&(t=t.attr("href")),t&&""!==t&&"#"!==t?("#/"===t.substr(0,2)&&(t=t.replace("#/","#")),this.panels.filter('[id="'.concat(t.replace(/#/g,""),'"]'))):$()},getMenuItem:function(t){return this.isAnchor(t)&&(t=t.attr("href")),-1===t.indexOf("#")&&(t="#".concat(t)),this.moreMenu.children().children().filter('[data-href="'.concat(t,'"]')).parent()},getPreviousTab:function(t){for(var e=this.getTab(null,t),n="li:not(.separator):not(:hidden):not(.is-disabled)",i=this.tablist.find(n),a=i.index(e),s=i.eq(0===a?1:a-1);s.length&&!s.is(n);)s=i.eq(i.index(s)-1);if(s.is(".has-popupmenu")){var r=s.data("popupmenu");r&&(s=r.menu.children("li").first())}return s},activateAdjacentTab:function(t,e){var n=this.doGetTab(t,e);"string"==typeof t&&(e=t),n.is(".is-selected")?n.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(n.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):n.nextAll("li.tab").not(".hidden").length>0&&this.select($(n.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(t,e){var n=this.getTab(null,t);if(e&&e instanceof jQuery||(e=this.getPreviousTab(t)),!e.length)return this.hideFocusState(),e;var i=e.children("a");if(n.is(".is-selected")){if(!this.activate(i.attr("href"),i))return e;i.focus()}return this.positionFocusState(i),e},isURL:function(t){return!(!t||0===t.indexOf("#"))},activate:function(t,e){var n=this;if(n.isURL(t))return this.callSource(t,e,!0);for(var i,a,s,r=n.getAnchor(t),o=r.parent(),l=n.getPanel(t),c=l[0],d=n.anchors.parents().filter(".is-selected"),u=0;u<n.panels.length;u++)n.panels[u].classList.contains("is-visible")&&(i=$(n.panels[u]));if(i||(i=n.panels),!n.element.trigger("beforeactivated",[r]))return!1;function h(e){if(l.length<1){if(n.settings.source)return n.callSource(t,r),!0}else{i[0].classList.remove("can-show"),i[0].classList.remove("is-visible"),i.closeChildren(),n.element.trigger("activated",[r]),c.classList.add("can-show"),n.renderVisiblePanel(),c.offsetHeight;var u=new W({duration:A.convertDelayToFPS(150),timeoutCallback:function(){n.element.trigger("afteractivated",[r])}});G.register(u),c.classList.add("is-visible")}n.updateAria(r),d.add(n.moreButton).removeClass("is-selected"),o[0]&&o[0].classList.contains("tab")&&(a=o,s=o);var h,p=o.parents(".popupmenu");p.length&&(h=p.data("trigger")).length&&(a=h,s=h),n.isTabOverflowed(s)&&(s=n.moreButton,a=n.moreButton),a&&a.addClass("is-selected");var f=l.find(".toolbar");return f.length&&f.each(function(){var t=$(this).data("toolbar");t&&"function"==typeof t.handleResize&&t.handleResize()}),C.fixSVGIcons(l[0]),e||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(d,o,h):h(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var t=this.tablistContainer[0],e=Math.abs(t.scrollLeft),n=t.scrollWidth,i=parseInt(window.getComputedStyle(t).getPropertyValue("width"),10);this.element[0].classList[e>1?"add":"remove"]("scrolled-right"),this.element[0].classList[n-e-1<=i?"remove":"add"]("scrolled-left")}},callSource:function(t,e,n){var i=this;if((null==n||!1===n)&&!this.settings.source)return!1;if(!0!==this.settings.lazyLoad)return!1;var s=a(this.settings.source),r=function(a){if(null!=a){if(a=u.sanitizeHTML(a),n){var s=i.element[0].id||"",r=C.uniqueId(e,"tab",s);t="#".concat(r),e[0].setAttribute("href",t)}i.createTabPanel(t,a,!0),i.activate(t),i.element.triggerHandler("complete"),i.element.trigger("requestend",[t,a])}};function o(t,e){var n=$.extend({dataType:"html"},e,{url:t}),i=$.ajax(n);return i.done(r),i}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),n)return o(t,this.ajaxOptions);if("function"===s)return this.settings.source(r,t,this.settings.sourceArguments);if("string"===s){var l=t.replace(/#/g,""),c=this.settings.source.toString();if(!(c.indexOf(l)>-1)){var d="tab=".concat(l),h=c.indexOf("?"),p=c.indexOf("#"),f=c.length;h<0?(d="?".concat(d),p>-1&&(f=p+1)):(d+="&",f=h+1),c=E.splice(c,f,0,d)}return o(c,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(t){if(this.settings.changeTabOnHashChange){t||(t=""),t.replace(/#/g,"");var e=this.settings.hashChangeCallback;e&&"function"==typeof e?e(t):window.location.hash=t,this.element.triggerHandler("hash-change",[t])}},updateAria:function(t){t&&(this.anchors.attr({"aria-selected":"false","aria-expanded":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),t.length&&this.element.is(":not(.is-disabled)")&&(t.parent().removeClass("is-selected"),this.isTabOverflowed(t.parent())?this.moreButton.attr({tabindex:"0"}):t.attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each(function(t,e){var n=$(e).data("tabs");n&&n.handleResize&&"function"==typeof n.handleResize&&n.handleResize(!0)})},add:function(t,e,n){if(!t)return this;e||(e={});var i=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function s(t){switch(a(t)){case"string":if(null!==t.match(/^#/g)){var e=$(t);t=e.length?e:t}}return t}t="".concat(t.replace(/#/g,"")),e.name=e.name?e.name.toString():"&nbsp;",e.isDismissible=!!e.isDismissible&&!0===e.isDismissible,e.isDropdown=!!e.isDropdown&&!0===e.isDropdown,e.content&&(e.content=s(e.content)),e.dropdown&&(e.dropdown=s(e.dropdown));var r,o=$('<li role="presentation" class="tab"></li>'),l=$('<a href="#'.concat(t,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(u.escapeHTML(e.name),"</a>")),c=this.createTabPanel(t,e.content);o.html(l),e.isDismissible&&(r=$.createIconElement({icon:"close",classes:"close icon"}),C.addAttributes(r,this,e.attributes,"close-btn"),o.addClass("dismissible"),o.append(r)),this.settings.tabCounts&&l.prepend('<span class="count">0 </span>'),e.dropdown;var d=this.settings.attributes||[];if(Array.isArray(e.attributes)&&(d=d.concat(e.attributes)),d.length&&(C.addAttributes(l,this,d,"".concat(t,"-a")),C.addAttributes(c,this,d,"".concat(t,"-panel"))),function(t,e){var n,i=t.tablist.children("li"),a=i.not(".application-menu-trigger, .add-tab-button"),s=i.length-1;if(!i.length)return o.appendTo(t.tablist),void c.appendTo(t.container);var r=i.filter(".add-tab-button"),l=i.filter(".application-menu-trigger");(null==e||isNaN(e))&&(e=i.length),i.length>a.length&&(e>i.length-1&&r&&r.length&&(e-=1),function(t){return t<=0}(e)&&l&&l.length&&(e+=1));var d=i.eq(e).length>0;s=d?e:s,n="insertAfter",d&&(n="insertBefore"),o[n](i.eq(s)),c.appendTo(t.container)}(this,n),this.panels=$(this.panels.add(c)),this.anchors=$(this.anchors.add(l)),l.data("panel-link",c),c.data("tab-link",l),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&l.on("beforeshow.toolbar",function(){return"yes"===l.data("cutoffTitle")}).tooltip({content:"".concat(l.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),i){if(this.positionFocusState(l),!this.activate(l.attr("href")))return this.triggerEventAfterTabAdded(t),this;l.focus()}return e.doActivate&&this.activate(l.attr("href")),this.triggerEventAfterTabAdded(t),this},remove:function(t,e){var n=this,i=this.doGetTab(null,t);if(!i||!i.length)return!1;var a=i.children("a"),s=this.getPanel(t),r=s&&s.length,o=this.tablist.children("li").index(i),l=".application-menu-trigger, .separator, .is-disabled",c=i.prev();if(!e&&!1===this.element.triggerHandler("beforeclose",[a]))return!1;var d=!1;i.hasClass("is-selected")?d=!0:c=$(this.tablist.children("li").not(l).filter(".is-selected")),r&&(this.panels=$(this.panels.not(s))),this.anchors=$(this.anchors.not(a)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&a.off("beforeshow.toolbar").data("tooltip").destroy();var u=i.data("popupmenu");i.hasClass("has-popupmenu")&&u&&(u.menu.children("li").each(function(){n.remove($(this).children("a").attr("href"))}),u.destroy());var h=i.closest(".dropdown-tab"),p=h.data("trigger");i.find(".icon").off().removeData().remove(),i.off(),a.off(),i.removeData().remove(),r&&s.removeData().remove();var f,g=a.data("moremenu-link");g&&(g.parent().off().removeData().remove(),a.removeData()),(f=h).length&&0===f.children("li:not(.separator)").length&&(c=this.getPreviousTab(p),setTimeout(function(){n.remove(p)},1)),p&&p.length&&p.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[i]);for(var m=o-1;m>-1;)m=-1,c.is(l)&&(c=this.tablist.children("li").not(l)[0],m-=1);if(c&&c.length||(c=this.tablist.children("li").not(l).first()),!c.length)return this.hideFocusState(),this.element.trigger("afterclose",[i]),this;var v=c.children("a"),b=v;return this.positionFocusState(v),d&&(c.is(".has-popupmenu")&&c.data("popupmenu")&&(b=c.data("popupmenu").menu.children().first().children("a")),!this.activate(b.attr("href")))||(v.focus(),this.element.trigger("afterclose",[i])),this},createTabPanel:function(t,e,n){t=t.replace(/#/g,"");var i=$('<div id="'.concat(u.stripTags(t),'" class="tab-panel" role="tabpanel"></div>'));return e instanceof $&&(e=e[0]),h.html(i[0],e||"","*"),!0===n&&this.container.append(i),this.panels=$(this.panels.add(i)),i},checkPopupMenuItems:function(t){function e(t){if(!t||!t.menu)return $();var e=t.menu.children("li");return e.length?e:(t.destroy(),$())}if(t.is(".has-popupmenu"))return e(t.data("popupmenu"));var n=t.closest(".dropdown-tab");return n.length?e(n.data("popupmenu")):$()},getTab:function(t,e){var n,i=this,a=$();return e instanceof $&&e.length>0?e.is("a")?e.parent():e:t?(n=$(t.currentTarget)).is(".tab")?n:n.closest(".tab").length?n.closest(".tab").first():null:e?function(t){if(!t||""===t||"#"===t)return null;-1===t.indexOf("#")&&(t="#".concat(t));var e=i.anchors.filter('[href="'.concat(t,'"]'));return e.length?e.parent():null}(e):a},doGetTab:function(t,e){return(t||e)&&(!t||t instanceof $.Event||"string"==typeof t)?t?"string"!=typeof t?this.getTab(t):this.getTab(null,t):this.getTab(null,e):$()},hide:function(t,e){var n=this.doGetTab(t,e);this.activateAdjacentTab(t,e),n.addClass("hidden");var i=$(this.element.find("li.tab.is-selected")[0]).find("a");return i[0]&&this.select(i[0].hash),this.positionFocusState(),this},show:function(t,e){this.doGetTab(t,e).removeClass("hidden");var n=$(this.element.find("li.tab.is-selected")[0]).find("a");return n[0]&&this.select(n[0].hash),this.positionFocusState(),this},disableTab:function(t,e){var n=this.doGetTab(t,e);return this.activateAdjacentTab(t,e),n.addClass("is-disabled"),this.positionFocusState(),this},enableTab:function(t,e){return this.doGetTab(t,e).removeClass("is-disabled"),this.positionFocusState(),this},rename:function(t,e,n){if(t&&"string"==typeof t&&(n=e,e=t),n){n=n.toString();var i,a=this.doGetTab(t,e),s=this.settings.tabCounts,r=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,o=a.hasClass("dismissible"),l=a.children("a");if(s&&(i=l.find(".count").clone()),l.text(n),this.popupmenu){var c="#"!==e.charAt(0)?"#".concat(e):e,d=this.popupmenu.menu.find('a[href="'.concat(c,'"]'));d.text(n),o&&d.append($.createIconElement({icon:"close",classes:"icon close"}))}s&&l.prepend(i),r&&l.data("tooltip").setContent(n.trim());var u=this.tablist.children("li").length<2?a:void 0;this.positionFocusState(u)}},updateCount:function(t,e,n){if(t&&"string"==typeof t&&(n=e,e=t),this.settings.tabCounts&&n){var i=this.doGetTab(t,e);i.children("a").find(".count").text("".concat(n.toString()," "));var a=this.tablist.children("li").length<2?i:void 0;this.positionFocusState(a)}},getActiveTab:function(){var t=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(t.first().attr("id"),'"]'))},getVisibleTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);t.isTabOverflowed(n)||(e=e.add(n))}),e},getOverflowTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);t.isTabOverflowed(n)&&(e=e.add(n))}),e},setOverflow:function(){var t,e,n,i=this,a=this.element[0],s=this.tablist[0],r=this.hasMoreButton(),o=this.isScrollableTabs();function l(){i.isModuleTabs()&&i.adjustModuleTabs()}l(),o?n=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(t=window.getComputedStyle(s,null),e=parseInt(t.getPropertyValue("height"),10)+1,n=s.scrollHeight>e),n?r||(a.classList.add("has-more-button"),l()):r&&(a.classList.remove("has-more-button"),l()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var t=this,e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),n=this.tablist.find(".application-menu-trigger"),i=n.length>0,a=this.tablist.outerWidth(),s=120,r=i?n.outerWidth():0;if(e.children("a").removeAttr("style"),e.removeAttr("style").each(function(){var n=$(this);t.isTabOverflowed(n)&&(e=e.not(n))}),!e.length)return s=a-r+101,void(this.moreButton[0].style.width="".concat(s,"px"));var o,l=window.getComputedStyle(e.eq(0).children()[0]),c=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(s=(a-r)/e.length-1)<120&&(s=120);for(var d="no",u=1===this.element.closest(".side-by-side").length,h=0;h<e.length;h++){(o=e.eq(h).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(d="no",parseInt(window.getComputedStyle(e[h]).width,10)>s-c&&(d="yes"),o.data("cutoffTitle",d));var p=0;"ios"===m.os.name&&m.devicespecs.isMobile&&u&&(p=25),e[h].style.width="".concat(s-p,"px"),o[0].style.width="".concat(s-p,"px")}this.adjustSpilloverNumber()},adjustSpilloverNumber:function(){var t=this.moreButton.find(".more-text"),e=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),n=this.getOverflowTabs();e.length<=n.length?t.text("".concat(R.translate("Tabs"))):t.text("".concat(R.translate("More")));var i=this.moreButton.find(".count");i.length||(i=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(i)),i.text("".concat(n.length," "))},select:function(t,e){var n=t.replace(/#/g,""),i=this.getAnchor(n);this.positionFocusState(void 0,!1),this.activate(i.attr("href"))&&(this.changeHash(n),e||i.focus())},buildPopupMenu:function(t){var e=this;e.popupmenu&&(e.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var n=$("#tab-container-popupmenu"),i="";this.isScrollableTabs()&&(i=" is-selectable"),0===n.length?n=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(i,'">')).appendTo("body"):n.html("");var a=e.tablist.children("li"),s=R.isRTL();function r(t){var i=$(t),a=i.children("a");if(!i.is(":hidden")&&(e.isScrollableTabs()||e.isTabOverflowed(i)))if(i.is(".separator"))i.clone().appendTo(n);else{var s=i.clone(),r=s.children("a");if(s[0].classList.remove("tab"),s[0].classList.contains("is-selected")&&(s[0].classList.remove("is-selected"),e.isScrollableTabs()&&s[0].classList.add("is-checked")),s[0].removeAttribute("style"),s.children(".icon").off().appendTo(r),s.appendTo(n),i.data("moremenu-link",r),r.find(".icon-more").removeData().remove(),r.data("original-tab",a),r.onclick=void 0,i.is(".has-popupmenu")){var o=$("#".concat(t.getAttribute("aria-controls"))),l=o.clone(),c=l.children("li");l[0].classList.remove("has-popupmenu"),c.each(function(t){var e=$(this).children("a"),n=o.children("li").eq(t).children("a");e.data("original-tab",n),n.data("moremenu-link",e)}),l.insertAfter(r)}}}for(var o=0;o<a.length;o++)r(a[o]);e.tablist.children("li:not(.separator)").removeClass("is-focused");var l=1;this.isScrollableTabs()||(l=3);var c=e.settings.attributes;e.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:l},attributes:c}),e.moreButton.addClass("popup-is-open"),e.popupmenu=e.moreButton.data("popupmenu"),e.positionFocusState(e.moreButton),e.moreButton.on("close.tabs",function(){$(this).off("close.tabs selected.tabs"),e.moreButton.removeClass("popup-is-open"),e.positionFocusState(void 0)}).on("selected.tabs",function(t,n){var i=n.attr("href"),a=i.substr(1,i.length),s=e.doGetTab(a)||$(),r=s?s.children("a"):$(),o=n.data("original-tab").parent();o.is(".add-tab-button")&&(o=(r=e.handleAddButton()).parent(),i=r.attr("href"),e.element.trigger("tab-added",[r])),e.activate(i),s.length&&r.length&&"function"==typeof r[0].onclick&&r[0].onclick.apply(r[0]),e.moreButton.focus(),e.scrollTabList(s)});var d=e.popupmenu.menu;function u(t){var n=$(this),i=n.closest("li");if(i.is(".dismissible")&&n.is(".close")){if(t.preventDefault(),t.stopPropagation(),i.is(".dismissible")&&i.is(".has-popupmenu")&&i.is(".submenu")){var a=i.find(".wrapper").children().children(),s=[];$.each(a,function(t,e){s.push(e.children[0].href)}),e.closeDismissibleTabs(s)}else e.closeDismissibleTab(i.children("a").attr("href"));e.popupmenu.close()}}d.on("destroy.popupmenu",function(){d.off(),e.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()}).on("touchend.popupmenu touchcancel.popupmenu",".icon",u).on("click.popupmenu",".icon",u),t?e.popupmenu.highlight(d.find('a[href="'.concat(t,'"]'))):e.tablist.children(".is-selected").length>0?e.popupmenu.highlight(d.find('a[href="'.concat(e.tablist.children(".is-selected").children("a").attr("href"),'"]'))):e.popupmenu.highlight(d.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",function(t){var n,i=t.which,a=$(t.target);function r(){return this===document.activeElement}switch(i){case 8:case 46:t.altKey&&a.parent().is(".dismissible")&&e.closeDismissibleTab(a.attr("href"));break;case 37:n=s?40:38,a.is("a")&&(a.parent().is(":not(:first-child)")&&t.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:n}));break;case 38:d.find("li:first-child > a").filter(r).length>0&&(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.findLastVisibleTab());break;case 39:n=s?38:40,a.is("a")&&!a.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:n});break;case 40:!function(){var n=d.find("li:last-child > a");if(n.filter(r).length>0&&n.parent().is(":not(.submenu)")){if(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.settings.addTabButton)return void e.addTabButton.focus();if(e.hasMoreActions())return void e.moreActionsBtn.focus();e.focusFirstVisibleTab()}}()}})},isTabOverflowed:function(t){if(this.isVerticalTabs()||this.isScrollableTabs()||this.tablist.find(".arrange-dragging").length)return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var e=Math.round(t[0].getBoundingClientRect().top),n=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(n+=1),e>n},findLastVisibleTab:function(){var t=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),e=t.first();if(this.isScrollableTabs())return t.last().find("a").focus();for(;!this.isTabOverflowed(e);)e=t.eq(t.index(e)+1);return t.eq(t.index(e)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},scrollTabList:function(t){if(this.tablistContainer&&t&&t instanceof $&&t.length){var e,n=h.getDimensions(t[0]),i=h.getDimensions(this.tablistContainer[0]),a=n.left,s=n.right;a<i.left+40&&(e=-1*Math.round(Math.abs(i.left-a))-40),s>i.right-40&&(e=Math.round(Math.abs(s-i.right))+40),0===e&&(e=void 0),this.tablistContainer.smoothScroll(e,250)}},hideFocusState:function(){this.focusState.removeClass("is-visible")},positionFocusState:function(t,e){if(void 0!==t?t=$(t):this.moreButton.hasClass("is-selected")?t=this.moreButton:this.tablist.children(".is-selected").length>0&&(t=this.tablist.children(".is-selected").children("a")),!t||void 0===t||!t.length||t.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{t.is("a")&&(t=t.parent()),t.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var n,i,a,s,r,o,l=this.focusState[0],c=h.getDimensions(t[0]),d=t[0].classList,u=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),p=this.isVerticalTabs(),f=R.isRTL(),g=p?0:this.moreButton.outerWidth(!0)-8,m=this.element,v=this.tablistContainer,b=v&&this.focusState.parent().is(v);n=c,a=v,o=(i=m)[0].getBoundingClientRect(),n.top-=o.top,p&&(n.top+=i[0].scrollTop),f?n.right=o.right-n.right:n.left-=o.left,a&&(r=a?Math.abs(a[0].scrollLeft):0,n.left+=r,n.right+=r,f&&!u&&(n.left-=g,n.right-=g),b&&(s=parseInt(window.getComputedStyle(i[0])["padding".concat(f?"Right":"Left")],10),n.left+=f?s:-1*s,n.right+=f?s:-1*s)),u&&!p&&(n.height+=23),c=n;var y="";Object.keys(c).forEach(function(t){y.length&&(y+=" "),y+="".concat(t,": ").concat(c[t],"px;")}),l.style.cssText=y;var w=d.contains("is-selected")?"add":"remove";l.classList[w]("is-selected");var x=!0===e?"add":"remove";l.classList[x]("is-visible");var C=this.element.find(".application-menu-trigger, .tab");C.length>0&&C.hasClass("is-focused")&&l.classList.add("is-visible")}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},disableOtherTabs:function(){return this.disable(!0)},disable:function(t){t||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var e=this,n=this.tablist.children("li:not(.separator)");t&&(n=n.filter(":not(.application-menu-trigger)")),n.each(function(){var n=$(this),i=n.children("a");if(!(t&&e.isActive(i.attr("href"))||((n.is(".is-disabled")||!0===i.prop("disabled"))&&e.disabledElems.push({elem:n,originalTabindex:n.attr("tabindex"),originalDisabled:i.prop("disabled")}),n.addClass("is-disabled"),i.prop("disabled",!0),n.is(".application-menu-trigger")||n.is(".add-tab-button")))){var a=$(i.attr("href"));a.addClass("is-disabled"),a.find("*").each(function(){var t=$(this);t.is("input.dropdown, input.multiselect")||(("-1"===t.attr("tabindex")||t.attr("disabled"))&&e.disabledElems.push({elem:t,originalTabindex:t.attr("tabindex"),originalDisabled:t.prop("disabled")}),t.disable())})}}),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!t&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var t=this;this.tablist.children("li:not(.separator)").each(function(){var e=$(this),n=e.children("a");if(e.removeClass("is-disabled"),n.prop("disabled",!1),!e.is(".application-menu-trigger")&&!e.is(".add-tab-button")){var i=$(n.attr("href"));i.removeClass("is-disabled"),i.find("*").each(function(){var t=$(this);t.enable&&"function"==typeof t.enable&&t.enable()}),$.each(t.disabledElems,function(t,e){var n=e.elem.is(".tab")?e.elem.children("a"):e.elem;e.elem.disable&&"function"==typeof e.elem.disable&&e.elem.disable(),e.elem.is("li")?e.elem.addClass("is-disabled"):e.elem.is("input.dropdown, input.multiselect")||(e.elem.attr("tabindex",e.originalTabindex),n.prop("disabled",e.originalDisabled))})}}),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(t){return this.remove(t)},closeDismissibleTabs:function(t){var e=this;t.forEach(function(t){var n=t.match(/#.*/);return e.remove(n[0])})},teardown:function(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var t=this.tablist.children("li");if(t.off().removeAttr("role").removeClass("is-selected"),t.filter(".has-popupmenu").each(function(){var t=$(this).data("popupmenu");t&&(t.menu.children("li:not(.separator)").each(function(){var t=$(this).children("a"),e=t.data("panel-link");$.removeData(t[0],"panel-link"),e&&e.length&&$.removeData(e[0],"tab-link")}),t.destroy())}),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),this.ro&&(this.ro.disconnect(),delete this.ro),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each(function(){var t=$(this).data("tooltip");t&&"function"==typeof t.destroy&&t.destroy()}),this.element.off("focusout.tabs updated.tabs activated.tabs aftertabadded.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var e=this.moreButton.data("popupmenu");e.menu.find("li:not(.separator)").each(function(){var t=$(this).children("a");t.data("original-tab")&&$.removeData(t[0],"original-tab")}),e.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,$(".tab-panel input").off("error.tabs valid.tabs"),this.addTabButton&&(this.addTabButton.remove(),this.addTabButton=void 0),this.element.find(".close.icon").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(t){return this.each(function(){var e=$.data(this,"tabs");e?e.updated(t):e=$.data(this,"tabs",new ma(this,t))})},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(t){return this.each(function(){var e=$.data(this,"tag");e?e.updated(t):e=$.data(this,"tag",new pn(this,t))})},$.fn.taglist=function(t){return this.each(function(){var e=$.data(this,"taglist");e?e.updated(t):e=$.data(this,"taglist",new gn(this,t))})};var va={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null,attributes:null};function ba(t,e){this.settings=C.mergeSettings(t,e,va),this.element=$(t),this.init()}ba.prototype={init:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(t){return"number"==typeof t.selectionStart?0===t.selectionStart&&t.selectionEnd===t.value.length:void 0!==document.selection&&document.selection.createRange().text===t.value},isPrintable:function(t,e){return e?t>64&&t<91||t>=33&&t<=38||t>=40&&t<=43||126===t||58===t||60===t||t>=123&&t<=125||94===t||95===t||t>=62&&t<=64:13===t||t>=48&&t<=57||t>=97&&t<=122||59===t||61===t||t>=44&&t<=47||96===t||t>=91&&t<=93||39===t},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var t=this.element[0];this.settings.autoGrowMaxHeight&&(t.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),t.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var t=this.element[0],e=t.offSetHeight,n=this.settings.autoGrowMaxHeight||0,i=t.scrollHeight;if(n>0&&n<i){if(i=n,t.style.overflow="",e===i)return}else t.style.overflow="hidden";t.style.height="5px",t.style.height="".concat(t.scrollHeight+2,"px")}},countLinebreaks:function(t){return(t.match(/\n/g)||[]).length},updateCounter:function(){var t=this.element.val(),e=this.isChrome||this.isSafari,n=t.length+(e?this.countLinebreaks(t):0),i=this.getMaxLength(),a=parseInt(i,10)-n,s=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===R.translate("CharactersLeft")?"Characters Left":R.translate("CharactersLeft")).replace("{0}",a.toString());this.counter&&(n>=i?(s=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",i):R.translate("CharactersMax")+i,this.counter.text(s),this.counter.removeClass("almost-empty")):(this.counter.text(s),a<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.destroy(),this.init()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var t=this;this.element.on("keyup.textarea",function(e){var n=t.element.val(),i=t.isChrome||t.isSafari,a=n.length+(i?t.countLinebreaks(n):0),s=t.getMaxLength();return t.updateCounter(),a>=s?(e.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)}).on("focus.textarea",function(){t.counter&&t.counter.addClass("focus")}).on("updated.textarea",function(){t.updated()}).on("keypress.textarea",function(e){var n=t.element.val(),i=t.isChrome||t.isSafari,a=n.length+(i?t.countLinebreaks(n):0),s=t.getMaxLength();[97,99,118,120].indexOf(e.which)>-1&&(e.metaKey||e.ctrlKey)?t.updateCounter():t.isPrintable(e.which,e.shiftKey)&&a>=s&&!t.isSelected(this)&&e.preventDefault()}).on("blur.textarea",function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")})}},$.fn.textarea=function(t){return this.each(function(){var e=$.data(this,"textarea");e?e.updated(t):e=$.data(this,"textarea",new ba(this,t))})},$.fn.toolbarsearchfield=$.fn.searchfield;var ya={};function wa(t,e){this.settings=C.mergeSettings(t,e,ya),this.element=$(t),this.init()}wa.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.handleEvents()},valMethod:function(t,e){switch(t.attr("type")){case"checkbox":case"radio":return t.prop("checked");case"file":if("boolean"==typeof e&&e){var n=t.attr("original");return void 0!==n?n:""}return t.parent().find('[type="text"]').val();default:if(t.is("textarea")&&1===t.closest(".editor-source").length){var i=t.is(":visible")?t.val():t.text();return this.trimEditorText(i)}return t.val()}},trimEditorText:function(t){return t.trim().replace(/>\s+</g,"><").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br(\s+)?\/?>/g,"<br>\n").replace(/<\/p>(\s+)/g,"</p>\n\n").replace(/<\/blockquote>(\s+)?/g,"</blockquote>\n\n")},getAbsolutePosition:function(t){var e=t.position();return t.parents().each(function(){if("relative"===window.getComputedStyle(this,null).position)return!1;e.left+=this.scrollLeft,e.top+=this.scrollTop}),{left:e.left,top:e.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===a(this.settings.d)){var t=this.settings.d;$(".icon-dirty, .msg-dirty",t.field).add(t.icon).add(t.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ya)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function(){var t=this,e=this.element;if(e.is(".editor")){var n=e.parent().find("textarea");n.data("original",this.valMethod(n))}e.data("original",this.valMethod(e,!0)).on("resetdirty.dirty",function(){if(e.is(".editor")){var n=e.parent().find("textarea");n.data("original",t.valMethod(n))}e.data("original",t.valMethod(e)).triggerHandler("doresetdirty.dirty")}).on("change.dirty doresetdirty.dirty",function(n){var i=e,a=e.closest(".field, .radio-group"),s=$("label:visible",a),r={class:"",style:""};if(a.is(".field-fileupload")&&(i=a.find("input.fileupload-background-transparent")),a.is(".editor-container")&&(i=a.find(".editor-source")),s[0]||(s=e.next("label")),"true"===e.attr("data-trackdirty")){if(e.addClass("dirty"),e.is('[type="checkbox"], [type="radio"]')&&(r.class+=" dirty-".concat(e.attr("type")),r.class+=e.is(":checked")?" is-checked":""),e.is("select")&&(r.class+=" is-select",i=e.next(".dropdown-wrapper").find(".dropdown")),r.icon=i.prev(),!r.icon.is(".icon-dirty")){e.is(".colorpicker")&&!R.isRTL()&&(r.rect=t.getAbsolutePosition(e),r.style="left:".concat(r.rect.left,"px; top:").concat(r.rect.top,"px;")),r.icon='<span class="icon-dirty'.concat(r.class,'"></span>'),r.msg=R.translate("MsgDirty")||"",r.msg='<span class="audible msg-dirty">'.concat(r.msg,"</span>");var o=$($(i[0].parentElement).find("input")[0]);i=e.is('[type="radio"]')?o:i,0===$(i[0].parentElement).find(".icon-dirty").length&&(i.before(r.icon),s.append(r.msg),r.style&&i.prev(".icon-dirty")[0]&&(i.prev(".icon-dirty")[0].style.cssText=r.style)),r.icon=i.prev(),r.msg=s.find(".msg-dirty")}var l=e.data("original"),c=t.valMethod(e);if(r.field=a,t.settings.d=r,a.is(".editor-container")){var d=a.find("textarea");l=d.data("original"),c=a.find(".editor-source").is(":visible")?d.val():t.isIe||t.isIeEdge?e[0].innerHTML:d.text(),c=t.trimEditorText(c)}if(c===l||e.attr("multiple")&&C.equals(c,l))return e.removeClass("dirty"),$(".icon-dirty, .msg-dirty",a).add(r.icon).add(r.msg).remove(),void e.trigger("doresetdirty"===n.type?"afterresetdirty":"pristine");e.trigger("dirty")}})}},$.fn.trackdirty=function(t){return this.each(function(){var e=$.data(this,"trackdirty");e&&e instanceof wa?e.updated(t):e=$.data(this,"trackdirty",new wa(this,t))})};var xa={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null,expandTarget:"node",useExpandTarget:!1,expandIconOpen:"plusminus-folder-open",expandIconClosed:"plusminus-folder-closed",expandPlusminusRotate:!0,showChildrenCount:!1,childrenAutoCount:!0};function Ca(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,xa),this.init()}function ka(t,e){var n=$(t),i=n.data("".concat("tree","Api"));if(i){var a={collapse:i.collapseNode,expand:i.expandNode};"function"==typeof a[e]&&a[e].apply(i,n)}}Ca.prototype={init:function(){this.isIe11="ie"===m.browser.name&&"11"===m.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable(),this.childrenCountInit())},initTree:function(){var t=this,e=this.settings,n=this.element.find("a"),i=this.element.attr("data-selectable");e.useExpandTarget&&(e.expandTarget="icon"),e.selectable=void 0===i||"single"!==i.toLowerCase()&&"multiple"!==i.toLowerCase()?e.selectable:i,this.isMultiselect="multiple"===e.selectable,e.hideCheckboxes=e.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),n.each(function(){var e=$(this);t.decorateNode(e)})},initSelected:function(){var t=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(e){e.setAttribute("role","none"),t.setNodeStatus($(e.querySelector("a")))}),this.syncDataset()},focusFirst:function(){var t=this.element[0].querySelector("a");t&&t.setAttribute("tabindex","0")},setFocus:function(t){(t=this.isjQuery(t)?t[0]:t)&&(t.focus(),h.removeClass(t,"hide-focus"))},decorateNode:function(t,e,n,i){var a,s=(t=this.isjQuery(t)?t:$(t))[0].getAttribute("data-badge"),r=t[0].getAttribute("data-alert-icon"),o=t.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,l=h.hasClass(t[0],"is-disabled")||o;if(void 0!==s&&(s=C.parseSettings(t,"data-badge")),t[0].setAttribute("role","treeitem"),t[0].setAttribute("tabindex","-1"),t[0].setAttribute("aria-selected","false"),l){h.addClass(t[0],"is-disabled"),t[0].setAttribute("aria-disabled","true");var c=t.next();c[0]&&"ul"===c[0].tagName.toLowerCase()&&h.hasClass(c[0],"is-open")&&([].slice.call(c[0].querySelectorAll("a")).forEach(function(t){h.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")}),[].slice.call(t[0].parentNode.querySelectorAll("ul")).forEach(function(t){return h.addClass(t,"is-disabled")}))}a=t.parentsUntil(this.element,"ul").length-1,t[0].setAttribute("aria-level",a+1);var d=t.parent().index();t[0].setAttribute("aria-posinset",d+1);var p=t.closest("li").siblings().length+1;t[0].setAttribute("aria-setsize",p);var f=t.next("ul"),g=!1;f[0]&&f.children().length>0&&(g=h.hasClass(f[0],"is-open"),t[0].setAttribute("aria-expanded",g?"true":"false"));var m=t.contents().filter(function(){return!$(this).is(".tree-badge, .tree-children-count")}).text();t[0].textContent="",0===t.children("svg.icon-tree").length&&(e||""===e?t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:e,classes:["icon-tree"]})):t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:r,classes:["step-alert","icon-".concat(r)]}))),f[0]&&t[0].insertAdjacentHTML("beforeend",this.getExpandTargetHtml(g)),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==n||t[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var v=this.getBadgeHtml(s);""!==v&&t[0].insertAdjacentHTML("beforeend",v);var b=document.createElement("span");if(h.addClass(b,"tree-text"),b.textContent=m,b.innerHTML.indexOf("&lt;svg")>0&&(b.innerHTML=u.unescapeHTML(b.innerHTML)),t[0].appendChild(b),f[0]&&t[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml(i)),this.hasIconClass(t)&&this.setTreeIcon(t.find("svg.icon-tree"),t[0].getAttribute("class")),f[0]&&"ul"===f[0].tagName.toLowerCase()){var y=t[0].getAttribute("class");if(this.settings.useExpandTarget&&y&&!i){var w=y.match(/(icon-)[^\s]+/g);w&&(i={icon:w[0]})}f[0].setAttribute("role","group"),h.addClass(f[0].parentNode,"folder"),this.setFolderIcon(t,h.hasClass(f[0],"is-open"),i),y&&-1===y.indexOf("open")&&-1===y.indexOf("closed")&&(l&&h.addClass(t[0],"is-disabled"),this.setFolderIcon(t,h.hasClass(f[0],"is-open"),i)),this.hasIconClass(t)&&(y=t[0].getAttribute("class"),(/open|close/g.test(y)||!f[0]||this.settings.useExpandTarget)&&this.setTreeIcon(t.find("svg.icon-tree"),h.hasClass(f[0],"is-open")?y:y.replace("open","closed")))}t.hideFocus()},setTreeIcon:function(t,e){if(t&&"string"==typeof e){t=this.isjQuery(t)?t:$(t);var n=e.replace(/#?icon-|hide-focus|is-selected|is-active|\s?/gi,"");t.changeIcon(n)}},expandAll:function(t){var e=this,n=t;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(t){var n=t.previousElementSibling;if(h.addClass(t.parentNode,"is-open"),h.addClass(t,"is-open"),t.style.height="",n&&"a"===n.tagName.toLowerCase()){var i=n.querySelector("svg.icon-tree");e.setTreeIcon(i,e.settings.folderIconOpen),n.setAttribute("aria-expanded",!0),e.hasIconClass(n)&&e.setTreeIcon(i,n.getAttribute("class"))}})},collapseAll:function(t){var e=this,n=t;(n=void 0!==n?this.isjQuery(n)?$.makeArray(n):n:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(t){var n=t.previousElementSibling;if(h.removeClass(t.parentNode,"is-open"),h.removeClass(t,"is-open"),t.style.height=0,n&&"a"===n.tagName.toLowerCase()){var i=n.querySelector("svg.icon-tree");e.setTreeIcon(i,e.settings.folderIconClosed),n.setAttribute("aria-expanded",!1),h.removeClass(n,"is-selected"),e.hasIconClass(n)&&e.setTreeIcon(i,n.getAttribute("class").replace("open","closed"))}})},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},selectNodeById:function(t){this.selectNodeByJquerySelector("#".concat(t))},selectNodeByJquerySelector:function(t){var e=this.isjQuery(t)?t:$(t);if(e.length&&!e.is(".is-disabled")){var n=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(n),this.selectNode(e,!0)}},unSelectedNode:function(t,e){if(0!==t.length){var n=this;$("a",this.element).attr("tabindex","-1"),t.attr("tabindex","0"),$("a:not(.is-disabled)",t.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(t),this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(t){return h.removeClass(t,"is-active")}),h.addClass(t[0].parentNode,"is-active"),setTimeout(function(){var e=t.data("jsonData")||{};n.element.triggerHandler("unselected",{node:t,data:e})},0)}},selectNode:function(t,e){var n,i=this,a=this.settings;0!==t.length&&("function"==typeof a.onBeforeSelect?(n=a.onBeforeSelect(t))&&n.done&&"function"==typeof n.done?n.done(function(n){n&&i.selectNodeFinish(t,e)}):n&&i.selectNodeFinish(t,e):i.selectNodeFinish(t,e))},selectNodeFinish:function(t,e,n){if((this.isMultiselect||"icon"===this.settings.expandTarget)&&n)if("click"===n.type||"touch"===n.type){if(h.hasClass(n.target,"icon")&&h.hasClass(t[0].parentNode,"folder"))return}else if("keydown"===n.type){var i=n.charCode||n.keyCode;if(37===i||39===i)return}var a=this,s=[].slice.call(this.element[0].querySelectorAll("a"));if(s.forEach(function(t){return t.setAttribute("tabindex","-1")}),t[0].setAttribute("tabindex","0"),this.isMultiselect)[].slice.call(t[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach(function(t){t.setAttribute("aria-selected","true"),h.addClass(t,"is-selected"),h.addClass(t.parentNode,"is-selected")});else{if(h.hasClass(t[0],"is-selected"))return;s.forEach(function(t){var e=$(t),n=e.data("jsonData");n&&(delete n.selected,e.data("jsonData",n)),t.setAttribute("aria-selected","false"),h.removeClass(t,"is-selected"),h.removeClass(t.parentNode,"is-selected")}),t[0].setAttribute("aria-selected","true"),h.addClass(t[0],"is-selected"),h.addClass(t[0].parentNode,"is-selected")}this.syncNode(t),this.loading||this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(t){return h.removeClass(t,"is-active")}),h.addClass(t[0].parentNode,"is-active"),setTimeout(function(){var e=t.data("jsonData")||{};a.element.triggerHandler("selected",{node:t,data:e})},0)},setNodeStatus:function(t){var e,n=this,i=t.data("jsonData");if(this.isMultiselect){var a=function(t,e){t.forEach(function(t){var i=$(t.querySelector("a")),a=n.getSelectedStatus(i,e);"mixed"===a?(h.removeClass(t,"is-selected","is-partial"),h.addClass(t,"is-partial")):a?(h.removeClass(t,"is-selected","is-partial"),h.addClass(t,"is-selected")):h.removeClass(t,"is-selected","is-partial"),n.syncNode(i)})},s=!1;a(e=[].slice.call(t[0].parentNode.querySelectorAll("li.folder")),s),s=!(!e.length&&i&&!i.selected),e=t.parentsUntil(this.element,"li.folder"),a(e=[].slice.call(e.toArray()),s)}else{var r=t[0],o=r.parentNode;i&&i.selected?(h.addClass(o,"is-selected"),h.addClass(r,"is-selected"),r.setAttribute("aria-selected",!0)):(h.removeClass(o,"is-selected","is-partial"),h.removeClass(r,"is-selected","is-partial"),r.setAttribute("aria-selected",!1))}},getSelectedStatus:function(t,e){var n,i=0,a=0,s=0;return t.parent().find("a").each(function(t){e&&0===t||(i++,(n=$(this).data("jsonData"))&&n.selected?a++:s++)}),i===a||i!==s&&"mixed"},getNodeAsJQ:function(t){return"string"==typeof t?$("#".concat(t)):this.isjQuery(t)?t:$(t)},expandNode:function(t,e){var n=this.getNodeAsJQ(t),i=!this.isTrue(e);this.toggleNode(n,null,{isExpandNode:!0,noSelect:i})},collapseNode:function(t,e){var n=this.getNodeAsJQ(t),i=!this.isTrue(e);this.toggleNode(n,null,{isExpandNode:!1,noSelect:i})},toggleNode:function(t,e,n){var i,s=t.next(),r=this,o=this.settings;if(s[0]&&"ul"===s[0].tagName.toLowerCase()&&"group"===s[0].getAttribute("role")){var l=t.find("svg.icon-tree").getIconName(),c=function(n){if("function"==typeof o.onCollapse)(i=o.onCollapse(t))&&i.done&&"function"==typeof i.done?i.done(function(i){i&&!n&&r.selectNodeFinish(t,focus,e)}):i&&!n&&r.selectNodeFinish(t,focus,e);else if("icon"!==o.expandTarget||n)n||r.selectNodeFinish(t,focus,e);else{var a=t[0].parentNode;e&&h.hasClass(e.target,"icon")&&h.hasClass(a,"folder")&&r.selectNodeFinish(t,focus,e)}if(t.closest(".folder").removeClass("is-open"),l===o.folderIconOpen||o.useExpandTarget)r.setFolderIcon(t,!1,!1,o.expandPlusminusRotate);else if(/open|close/g.test(l)&&!o.useExpandTarget){var c=l.replace("open","closed");n||(c=c.replace(/\s?is-selected/,"")),r.setTreeIcon(t.find("svg.icon-tree"),c)}var d=t.closest(".folder a");if(r.hasIconClass(d)){var u=d.attr("class");if(/open|close/g.test(u)||o.useExpandTarget){var p=u.replace("open","closed");n||(p=p.replace(/\s?is-selected/,"")),r.setTreeIcon(d.find("svg.icon-tree"),p)}}r.isAnimating=!0,r.isMultiselect||"icon"!==!o.expandTarget||n||(r.unSelectedNode(t.parent().find("li.is-selected"),!1),h.removeClass(t[0],"is-selected")),s.one("animateclosedcomplete",function(){h.removeClass(s[0],"is-open"),r.isAnimating=!1}).animateClosed(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded")),r.element.triggerHandler("collapsed",{node:t,data:t.data("jsonData")})},d=function(n){if("function"==typeof o.onExpand)(i=o.onExpand(t))&&i.done&&"function"==typeof i.done?i.done(function(i){i&&!n&&r.selectNodeFinish(t,focus,e)}):i&&!n&&r.selectNodeFinish(t,focus,e);else if("icon"!==o.expandTarget||n)n||r.selectNodeFinish(t,focus,e);else{var a=t[0].parentNode;e&&h.hasClass(e.target,"icon")&&h.hasClass(a,"folder")&&r.selectNodeFinish(t,focus,e)}var c=t.data("jsonData");if(o.source&&c.children&&0===c.children.length){var d={node:t,data:t.data("jsonData")};return h.addClass(t[0],"is-loading"),r.loading=!0,void r.settings.source(d,function(e){var i=c.id,a=r.findById(i);a.children=e,r.addChildNodes(a,t.parent()),h.removeClass(t[0],"is-loading"),r.loading=!1,r.accessNode(s,t),c.children=e,t.data("jsonData",c),t.data("".concat("tree","Api"),r),h.hasClass(t[0].parentNode,"folder")&&r.childrenCountInit(t[0].parentNode),r.isMultiselect||"icon"!==!o.expandTarget||n||r.selectNode(t,!0),n||r.initSelected()})}if(l===o.folderIconClosed||o.useExpandTarget)r.setFolderIcon(t,!0,!1,o.expandPlusminusRotate);else if(/open|close/g.test(l)&&!o.useExpandTarget){var u=l.replace("closed","open");n||(u=u.replace(/\s?is-selected/,"")),r.setTreeIcon(t.find("svg.icon-tree"),u)}r.accessNode(s,t),r.element.triggerHandler("expanded",{node:t,data:t.data("jsonData")})};if("object"===a(n)&&function(t){var e=!1;if("boolean"==typeof t)e=!0;else if("string"==typeof t){var n=t.toLowerCase();"true"!==n&&"false"!==n||(e=!0)}return e}(n.isExpandNode))if(n.isExpandNode){d(n.noSelect);var u=t.parentsUntil(this.element,"ul[role=group]");this.expandAll(u)}else c(n.noSelect);else h.hasClass(s[0],"is-open")?c():d()}},accessNode:function(t,e){var n=this,i=e.attr("class");e.closest(".folder").addClass("is-open");var a=e.find("svg.icon-tree").getIconName();if(a===this.settings.folderIconClosed||this.settings.useExpandTarget?this.setFolderIcon(e,!0,!1,this.settings.expandPlusminusRotate):/open|close/g.test(a)&&!this.settings.useExpandTarget&&this.setTreeIcon(e.find("svg.icon-tree"),a.replace("closed","open").replace(/\s?is-selected/,"")),this.hasIconClass(i)){var s=t[0]&&"ul"===t[0].tagName.toLowerCase();(/open|close/g.test(i)||!s||this.settings.useExpandTarget)&&this.setTreeIcon(e.find("svg.icon-tree"),i.replace("is-selected",""))}this.isAnimating=!0,t.one("animateopencomplete",function(){n.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded"))},openNode:function(t,e){var n=this,i=e.data("jsonData");if(n.settings.source&&i.children&&0===i.children.length){var a={node:e,data:e.data("jsonData")};return e.addClass("is-loading"),n.loading=!0,void n.settings.source(a,function(a){var s=i.id,r=n.findById(s);r.children=a,n.addChildNodes(r,e.parent()),e.removeClass("is-loading"),n.loading=!1,n.accessNode(t,e),i.children=a,e.data("jsonData",i),e.data("".concat("tree","Api"),n),n.selectNode(e,!0),n.initSelected()})}n.accessNode(t,e)},hasIconClass:function(t){return"string"!=typeof t&&(this.isjQuery(t)&&(t=t.length>1?t.first()[0]:t[0]),t=t.getAttribute("class")),t&&t.indexOf("icon")>-1},closeNode:function(t,e){var n=this;n.setTreeIcon(e.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),n.settings.folderIconClosed),n.hasIconClass(e.closest(".folder a"))&&n.setTreeIcon(e.closest(".folder a").find("svg.icon-tree"),e.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),n.isAnimating=!0,n.isMultiselect||(n.unSelectedNode(e.parent().find("li.is-selected"),!1),e.removeClass("is-selected")),t.one("animateclosedcomplete",function(){t.removeClass("is-open"),n.isAnimating=!1}).animateClosed(),e.attr("aria-expanded","true"!==e.attr("aria-expanded"))},setupEvents:function(){var t=this;t.element.on("updated.tree",function(e,n){t.updated(n),t.initTree()})},handleKeys:function(){var t=this;this.element.on("click.tree","a:not(.is-clone)",function(e){var n=$(this),i=this.parentNode;return C.clearSelection(),h.hasClass(n[0],"is-disabled")||h.hasClass(n[0],"is-loading")||(t.isMultiselect||"icon"===t.settings.expandTarget?h.hasClass(e.target,"icon")&&h.hasClass(i,"folder")?t.toggleNode(n,e):h.hasClass(i,"is-selected")||h.hasClass(i,"is-partial")?t.unSelectedNode(n,!0):t.selectNode(n,!0):(t.selectNode(n,!0),t.toggleNode(n,e)),e.stopPropagation()),t.popupEl&&t.popupEl.data("popupmenu")&&(t.popupEl.data("popupmenu").close(),t.popupEl=null),t.syncDataset(),!1}),this.element.on("focus.tree","a",function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&h.hasClass(this,"is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}}),this.element.on("keydown.tree","a",function(e){var n,i,a=e.charCode||e.keyCode,s=$(this);if(!t.isAnimating){if(40===a){var r=t.getNextNode(s);t.setFocus(r)}if(38===a){var o=t.getPreviousNode(s);t.setFocus(o)}if(32===e.keyCode&&s.trigger("click.tree"),37===a)return R.isRTL()?s.next().hasClass("is-open")?(i=s.next().find("a:first"),t.setFocus(i)):t.toggleNode(s,e):s.next().hasClass("is-open")?t.toggleNode(s,e):(i=s.closest(".folder").find("a:first"),t.setFocus(i)),e.stopPropagation(),!1;if(39===a)return R.isRTL()?s.next().hasClass("is-open")?t.toggleNode(s,e):(n=s.closest(".folder").find("a:first"),t.setFocus(n)):s.next().hasClass("is-open")?(n=s.next().find("a:first"),t.setFocus(n)):(t.toggleNode(s,e),t.setFocus(s)),e.stopPropagation(),!1;36===a&&(n=t.element.find("a:first:visible"),t.setFocus(n)),35===a&&(n=t.element.find("a:last:visible"),t.setFocus(n))}}),this.element.on("keypress.tree","a",function(e){var n=e.charCode||e.keyCode,i=$(this);if(n>=37&&n<=40||32===n)return e.stopPropagation(),!1;0!==e.which&&i.closest("li").nextAll().find("a:visible").each(function(){var n=$(this);if(n.text().substr(0,1).toLowerCase()===String.fromCharCode(e.which).toLowerCase())return t.setFocus(n),!1})})},loadData:function(t){if(!t)return-1;var e=this;e.element.empty(),e.loading=!0,t=this.arrangeDataset(t);var n="";e.jsonData=[];for(var i=0,a=t.length;i<a;i++)n+=e.getNodeHtml(t[i],i);e.element[0].insertAdjacentHTML("beforeend",n),[].slice.call(e.element[0].querySelectorAll('a[role="treeitem"]')).forEach(function(t,n){var i=$(t),a=e.jsonData[n];i.data("jsonData",a),i.data("".concat("tree","Api"),e),a.selected&&e.selectNode(i,a.focus),e.addAutomationAttributes(i,a),i.is(".hide-focus")&&i.hideFocus()});for(var s=[].slice.call(e.element[0].querySelectorAll("select.dropdown")),r=0;r<s.length;r++){var o=s[r];e.jsonData[r].disabled?$(o).dropdown().disable():$(o).dropdown().on("selected.tree",function(){var t=e.findById(this.parentElement.previousElementSibling.id);t.text=this.value,e.updateNode(t)})}e.jsonData=void 0,e.loading=!1,e.syncDataset(),e.initSelected(),e.focusFirst(),e.attachMenu(e.settings.menuId),e.createSortable(),this.childrenCountInit()},arrangeDataset:function(t){if(!this.hasKeyInData("parent",t))return t;t=t||this.settings.dataset;var e=JSON.parse(JSON.stringify(t));return function t(n){for(var i=0;i<n.length;i++)void 0!==n[i].parent&&(a=n[i],s=void 0,s=!1,function t(e){for(var n=0;n<e.length&&!s;n++)e[n].id===a.parent&&((i=e[n]).children=i.children||[],i.children.push(a),s=!0),void 0!==e[n].children&&t(e[n].children);var i}(e)),void 0!==n[i].children&&t(n[i].children);var a,s}(t),function t(e,n){for(var i=0;i<e.length;i++)void 0!==e[i].children&&t(e[i].children,e[i].id),void 0===n&&void 0!==e[i].parent||void 0!==n&&void 0!==e[i].parent&&n!==e[i].parent?(e.splice(i,1),i--):delete e[i].parent}(e),this.settings.dataset=e,e},hasKeyInData:function(t,e){for(var n=!1,i=function e(i){for(var s in i)if(i.hasOwnProperty(s)){var r=i[s];if("object"!==a(r)||n?t===s&&(n=!0):e(r),n)break}},s=0,r=(e=e||this.settings.dataset).length;s<r&&!n;s++)i(e[s]);return n},getNodeHtml:function(t,e,n,i){var s="",r="";n=n||0,e+=1;var o=this.settings,l=i||t.disabled||!1,c=t.children&&Array.isArray(t.children),d={id:void 0!==t.id?' id="'.concat(t.id,'"'):"",href:' href="'.concat(void 0!==t.href?t.href:"#",'"'),expanded:' aria-expanded="'.concat(t.open?"true":"false",'"'),icon:t.icon||""===t.icon?t.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==t.alertIcon?' data-alert-icon="'.concat(t.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(t.text,"</span>"),class:["hide-focus"],ariaDisabled:l?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==t.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===a(t.badge)?this.getBadgeHtml(t.badge):"",expandTarget:c?this.getExpandTargetHtml(t.open):"",childrenCount:c?this.getChildrenCountHtml(t):""};this.jsonData.push(t),o.useStepUI&&(d.alertIcon='<svg class="icon step-alert icon-'.concat(t.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(t.alertIcon,'"></use>'));var u=c?"folder":"";if(""!=(u+=t.selected?" is-selected":"")&&(u+=t.open?" is-open":"",u=' class="'.concat(u,'"')),l&&d.class.push("is-disabled"),t.icon&&(d.icon=t.icon,(!c||c&&/open|closed/i.test(t.icon))&&d.class.push(t.icon)),c&&(!o.useExpandTarget||o.useExpandTarget&&!t.icon)&&(t.open?(d.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon:o.folderIconOpen,i=l):d.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon.replace("open","closed"):o.folderIconClosed),d.icon="#icon-".concat(d.icon.replace(/^#?icon-?/,"")),d.class=' class="'.concat(d.class.join(" "),'"'),d.style="","dropdown"===t.type&&(d.style='style="display: none"',t.data)){s='<select class="dropdown" close-on-select="true">';for(var h=0;h<t.data.length;h++){var p=t.data[h];p.value===t.text?(r=p.text,s+='<option value="'.concat(p.value,'" selected>').concat(p.text,"</option>")):s+='<option value="'.concat(p.value,'">').concat(p.text,"</option>")}s+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(r),s='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(s+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var f="\n      <li".concat(u,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(d.style,'\n          aria-level="').concat(n,'"\n          aria-position="').concat(e,'"\n          aria-setsize="').concat(e,'"\n          ').concat(d.id+d.href+d.class+d.expanded+d.ariaDisabled+d.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(d.icon,'"></use>\n            </svg>').concat(d.expandTarget+d.checkbox+d.alertIcon+d.badge+d.text+d.childrenCount,"\n        </a>\n        ").concat(s);if(c){f+='<ul class="folder'.concat(t.open?" is-open":"",'" role="group">');for(var g=0,m=t.children.length;g<m;g++)f+=this.getNodeHtml(t.children[g],g,n+1,i);f+="</ul>"}return f+"</li>"},getExpandTargetHtml:function(t){var e="";if(this.settings.useExpandTarget){var n=t?{icon:this.settings.expandIconOpen,class:"open"}:{icon:this.settings.expandIconClosed,class:"close"};e=$.createIcon({icon:n.icon,classes:["icon-expand-target","".concat("icon-expand-target","-").concat(n.class)]})}return e},getChildrenCountHtml:function(t){var e="";return this.settings.showChildrenCount&&(e='<span class="tree-children-count">\n          (<span class="tree-children-count-text">'.concat(this.getDataChildrenCount(t),"</span>)\n        </span>")),e},getDataChildrenCount:function(t){return t&&/string|number/.test(a(t.childrenCount))?parseInt(t.childrenCount,10):0},getActualChildrenCount:function(t){var e=0;if(t){var n=t.nextElementSibling;n&&"ul"===n.tagName.toLowerCase()&&(e=n.childElementCount)}return e},updateChildrenCount:function(t,e){if(t){var n=t.querySelector(".tree-children-count-text");n&&(0===(e=/string|number/.test(a(e))?parseInt(e,10):this.getActualChildrenCount(t))&&parseInt(n.textContent,10)>0&&"function"==typeof this.settings.source&&!h.hasClass(t.nextElementSibling,"is-open")||(n.textContent=e))}},updateAutoChildrenCount:function(t){var e=this;this.settings.showChildrenCount&&t&&[].slice.call(t.querySelectorAll("a")).forEach(function(t){return e.updateChildrenCount(t)})},childrenCountInit:function(t){var e=this;t=t||this.element,t=this.isjQuery(t)?t[0]:t,this.settings.showChildrenCount&&t&&(this.settings.childrenAutoCount?this.updateAutoChildrenCount(t):[].slice.call(t.querySelectorAll("a[data-children-count]")).forEach(function(t){var n=t.getAttribute("data-children-count");void 0!==n&&e.updateChildrenCount(t,n)}))},setFolderIcon:function(t,e,n,i){var a=this.settings,s=this.isjQuery(t)?t:$(t);if(t=s[0]){var r,o={el:{tree:t.querySelector("svg.icon-tree"),expand:t.querySelector("svg.icon-expand-target")},icon:e?{tree:a.folderIconOpen,expand:a.expandIconOpen,rotate:"forward"}:{tree:a.folderIconClosed,expand:a.expandIconClosed,rotate:"backward"}};a.useExpandTarget?(r={el:o.el.expand,icon:o.icon.expand,rotateClass:"rotate-".concat(o.icon.rotate)},this.setTreeIcon(r.el,r.icon),i&&this.rotatePlusminus(r),(!(n=n||s.data("jsonData"))||n&&!n.icon)&&(r={el:o.el.tree,icon:o.icon.tree},this.setTreeIcon(r.el,r.icon))):(r={el:o.el.tree,icon:o.icon.tree},this.setTreeIcon(r.el,r.icon))}},rotatePlusminus:function(t){this.settings.useExpandTarget&&this.settings.expandPlusminusRotate&&(h.addClass(t.el,t.rotateClass),$(t.el).one("webkitAnimationEnd.tree oAnimationEnd.tree msAnimationEnd.tree animationend.tree",function(){h.removeClass(t.el,t.rotateClass)}))},getBadgeHtml:function(t){var e={html:"",style:"",class:["badge","tree-badge"]};return t&&!t.remove&&(e.text="",void 0!==t.text&&(e.text=t.text.toString(),1===e.text.length&&e.class.push("round")),/info|good|error|alert|pending/i.test(t.type)?e.class.push(t.type):t.type&&"#"===t.type.charAt(0)&&7===t.type.length&&(e.style="background-color: ".concat(t.type," !important;")),t.backColor&&(e.style="background-color: ".concat(t.backColor," !important;")),t.foreColor&&(e.style+="color: ".concat(t.foreColor," !important;")),""!==e.style&&(e.style=' style="'.concat(e.style,'"')),""!==e.text&&(t.type&&-1!==t.type.indexOf("pending")&&(e.text=""),e.html='<span class="'.concat(e.class.join(" "),'"').concat(e.style,">").concat(e.text,"</span>"))),e.html},addToDataset:function(t,e){var n,i,a;if(t.parent&&(n=this.findById(t.parent)),e instanceof jQuery&&e.is("li")){var s=(i=this.findById($(e[0].parentNode.parentNode).find("a")[0].id)).children||i.node.data("jsonData").children;a=s.findIndex(function(t){return t.text.trim()===$(e).text().trim()}),s.splice(a,0,t)}return"bottom"!==e||t.parent||n||this.settings.dataset.push(t),"top"!==e||t.parent||n||this.settings.dataset.unshift(t),t.parent&&n&&(n.children||(n.children=[]),"bottom"===e?n.children.push(t):n.children.unshift(t)),!(t.parent&&!n)},findById:function(t,e){for(var n in e||(e=this.settings.dataset),e){var i,a,s=e[n];if(s.id===t)return s;if(s.children||null!==(i=s.node)&&void 0!==i&&null!==(a=null==i?void 0:i.data("jsonData"))&&void 0!==a&&(null==a?void 0:a.children)){var r,o,l=this.findById(t,s.children||(null===(r=s.node)||void 0===r||null===(o=null==r?void 0:r.data("jsonData"))||void 0===o||null==o?void 0:o.children));if(l)return l}}return null},getNodeByIdIfSelected:function(t,e){var n=this.findById(t,e);return n&&n.selected?n:null},getSelectedNodes:function(){var t,e,n=[];return $("li.is-selected",this.element).each(function(){t=$("a:first",this),e=t.data("jsonData"),n.push({node:t,data:e})}),n},getNextNode:function(t){var e=t.parent().next().find("a:first"),n=t.next();if(n.is("ul.is-open")&&(e=n.find("a:first")),e.hasClass("is-disabled")&&(e=e.parent().next().find("a:first")),0===e.length)for(var i=0,a=t;i<1e3&&!(e=(a=a.parent().closest(".folder")).next().find("a:first")).length;i++);return e.hasClass("is-disabled")&&(e=this.getNextNode(e)),e},getPreviousNode:function(t){var e=t.parent().prev().find("a:first"),n=e.parent();return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(e=n.find("ul.is-open a:last")),e.hasClass("is-disabled")&&(n=(e=e.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(e=n.find("ul.is-open a:last")),0===e.length&&(e=t.closest("ul").prev("a")),e.hasClass("is-disabled")&&(e=this.getPreviousNode(e)),e},syncDataset:function(t){var e=[],n=this;t=t||this.element,[].slice.call(t.children("li").toArray()).forEach(function(t){var i=t.querySelector("a");i&&e.push(n.syncNode(i))}),this.settings.dataset=e,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(t){var e,n=this,i=this.isjQuery(t)?t:$(t);if(t=i[0]){var a=t.parentNode,s=function(t,e){return h.hasClass(t,e)};e={node:i,id:t.getAttribute("id"),text:t.querySelector(".tree-text").textContent},(s(t,"is-open")||a&&"li"===a.tagName.toLowerCase()&&s(a,"is-open"))&&(e.open=!0);var r=t.getAttribute("href");r&&(e.href=r),s(a,"is-selected")&&(e.selected=!0),s(t,"is-disabled")&&(e.disabled=!0);var o=t.getAttribute("class");o&&o.indexOf("icon")>-1&&(e.icon=o);var l=i.next();l[0]&&"ul"===l[0].tagName.toLowerCase()&&(e.children=[],[].slice.call(l.children("li").toArray()).forEach(function(t){var i=t.querySelector("a");i&&e.children.push(n.syncNode(i))}));var c=i.data("jsonData");c&&(delete c.selected,delete c.children,e=$.extend({},c,e));var d=C.parseSettings(i,"data-automation-attributes");d.attributes&&c&&(C.extend(c,d),this.addAutomationAttributes(i,c)),i.data("jsonData",e),i.data("".concat("tree","Api"),n)}return e},addAutomationAttributes:function(t,e){if((t=this.isjQuery(t)?t:$(t)).length&&e.attributes){var n=t.find(".tree-text"),i=t.find(".icon-tree"),a=t.find(".icon-expand-target"),s=t.find(".tree-checkbox");C.addAttributes(t,this,e.attributes,"tree-link"),C.addAttributes(n,this,e.attributes,"tree-link-text"),C.addAttributes(i,this,e.attributes,"tree-icon"),C.addAttributes(a,this,e.attributes,"tree-icon-expand-target"),C.addAttributes(s,this,e.attributes,"tree-checkbox")}},addNode:function(t,e,n){var i,s,r,o=this,l="object"===a(t.badge)?JSON.stringify(t.badge):t.badge;t.href=void 0!==t.href?t.href:"#",e=e||"bottom";var c=document.createElement("a");void 0!==t.id&&c.setAttribute("id",t.id),c.setAttribute("href",t.href),void 0!==l&&c.setAttribute("data-badge",l),void 0!==t.alertIcon&&c.setAttribute("data-alert-icon",t.alertIcon),t.text&&(c.textContent=/&#?[^\s].{1,9};/g.test(t.text)?u.unescapeHTML(t.text):t.text),t.disabled&&h.addClass(c,"is-disabled"),t.icon&&h.addClass(c,t.icon);var d=document.createElement("li");if(d.setAttribute("role","none"),t.open&&h.addClass(d,"is-open"),d.appendChild(c),"dropdown"===t.type&&(c.setAttribute("style","display: none"),t.data)){s='<select class="dropdown" close-on-select="true">';for(var p=0;p<t.data.length;p++)(r=t.data[p]).value===t.text?(i=r.text,s+='<option value="'.concat(r.value,'" selected>').concat(r.text,"</option>")):s+='<option value="'.concat(r.value,'">').concat(r.text,"</option>");s+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(i),s+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(s,"</div>")).appendTo(d),t.disabled?$(d).find("select.dropdown").dropdown().disable():$(d).find("select.dropdown").dropdown().on("selected.tree",function(){var t=o.findById(this.parentElement.previousElementSibling.id);t.text=this.value,o.updateNode(t)})}var f,g=!!this.loading||this.addToDataset(t,e);if(t.parent instanceof jQuery&&(g=!0),e&&(f="string"!=typeof e||/^(top|bottom|before|after)$/g.test(e)?e instanceof jQuery?e:$(e):$(/\.|#/.test(e[0])?e:"#".concat(e)).first()).length&&("before"===n&&($(d).insertBefore(f.is("li")?f:f.closest("li")),g=!0),"after"===n&&($(d).insertAfter(f.is("li")?f:f.closest("li")),g=!0),"top"===n&&f.is("ul")&&(f.prepend(d),g=!0)),!(e instanceof jQuery)||t.parent&&g||t.parent instanceof jQuery||/^(top|bottom|before|after)$/g.test(n)||(e[0].appendChild(d),g=!0),"bottom"!==e||t.parent&&g||this.element[0].appendChild(d),"top"!==e||t.parent&&g||this.element.prepend(d),t.parent){var m="top"===e?e:null;g&&"string"==typeof t.parent&&(d=this.element.find("#".concat(t.parent)).parent(),!t.disabled&&d.is(".is-selected")&&void 0===t.selected&&(t.selected=!0),this.addAsChild(t,d,m)),t.parent&&t.parent instanceof jQuery&&(d=t.parent,t.parent.is("a")&&(d=t.parent.parent()),this.addAsChild(t,d,m)),this.isjQuery(d)&&(t.node=d.find("ul li a#".concat(t.id)))}else void 0!==t.tempidsparent&&(t.parent=t.tempidsparent,delete t.tempidsparent),d=$(d),this.addChildNodes(t,d),t.node=d.children("a").first();return c=$(c),this.decorateNode(c,t.icon,t.hideCheckbox,t),this.childrenCountInit(c.parentsUntil(this.element,".folder:last")),t.selected&&this.selectNode(c,t.focus),c.data("jsonData",t),c.data("".concat("tree","Api"),o),this.addAutomationAttributes(c,t),this.createSortable(),d},addAsChild:function(t,e,n){var i=(e=this.isjQuery(e)?e[0]:e).querySelector("ul"),a=!!i;a||(e.insertAdjacentHTML("beforeend",'<ul class="folder" role="group"></ul>'),i=e.querySelector("ul")),t.open&&h.addClass(i,"is-open"),a||this.decorateNode(e.querySelector("a")),void 0!==t.parent&&(t.tempidsparent=t.parent),t.parent="",this.addNode(t,$(i),n)},addChildNodes:function(t,e){var n=this,i=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");t.children?(i||(e.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(t.open?" is-open":"",'" role="group"></ul>')),i=e.querySelector("ul")),i.innerHTML="",t.children&&t.children.forEach(function(t){return n.addNode(t,$(i))})):i&&i.parentNode.removeChild(i)},isTrue:function(t){return null!=t&&("boolean"==typeof t&&!0===t||"string"==typeof t&&"true"===t.toLowerCase())},isFalse:function(t){return null!=t&&("boolean"==typeof t&&!1===t||"string"==typeof t&&"false"===t.toLowerCase())},updateNode:function(t){var e=t.node?{node:t.node}:this.findById(t.id);if(e&&e.node[0]){var n,i=e.node[0].parentNode,a=e.node[0].querySelector(".tree-text"),s=this.isTrue(t.disabled)||this.isFalse(t.enabled),r=this.isTrue(t.enabled)||this.isFalse(t.disabled),o=null===t.children;if(t.badge){var l=e.node[0].querySelector(".tree-badge");if(!l&&!t.badge.remove&&void 0!==t.badge.text&&""!==$.trim(t.badge.text)){var c=document.createElement("span");h.addClass(c,"tree-badge","badge"),a.parentNode.insertBefore(c,a),l=e.node[0].querySelector(".tree-badge")}l&&(void 0!==t.badge.text&&(t.badge.text=t.badge.text.toString(),l.textContent=t.badge.text,h.removeClass(l,"round"),1===t.badge.text.length&&h.addClass(l,"round")),void 0!==t.badge.type&&(h.removeClass(l,"info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(t.badge.type)?h.addClass(l,t.badge.type):"#"===t.badge.type.charAt(0)&&7===t.badge.type.length&&(l.style.backgroundColor=t.badge.type),-1!==t.badge.type.indexOf("pending")&&(l.textContent="")),e.badge=t.badge,this.parseBool(t.badge.remove)&&(l.parentNode.removeChild(l),void 0!==e.badge&&delete e.badge))}if(t.text&&(a.textContent=t.text,e.text=t.text),null===t.icon){var d=e.node[0].nextElementSibling;d&&"ul"===d.tagName.toLowerCase()?this.setFolderIcon(e.node[0],h.hasClass(d,"is-open"),!1,this.settings.expandPlusminusRotate):this.setTreeIcon(e.node[0].querySelector("svg.icon-tree"),"icon-tree-node")}else if(t.icon){this.setTreeIcon(e.node[0].querySelector("svg.icon-tree"),t.icon),e.icon=t.icon;var u=e.node.data("jsonData");u&&(u.icon=t.icon,e.node.data("jsonData",u),e.node.data("".concat("tree","Api"),this))}else t.children&&t.children.length&&!h.hasClass(i,"folder")&&this.convertFileToFolder(e.node);s&&(h.addClass(e.node[0],"is-disabled"),e.node[0].setAttribute("aria-disabled","true"),h.hasClass(i,"folder")&&h.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(t){h.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")})),r&&(e.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0||(h.removeClass(e.node[0],"is-disabled"),e.node[0].removeAttribute("aria-disabled"),h.hasClass(i,"folder")&&h.hasClass(i,"is-open")&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(t){h.removeClass(t,"is-disabled"),t.removeAttribute("aria-disabled")}))),t.childrenCount&&this.updateChildrenCount(e.node[0],t.childrenCount),t.node&&this.syncDataset(),(t.children||o)&&(null!==(n=t.children)&&void 0!==n&&(null==n?void 0:n.length)?this.addChildNodes(t,i):this.removeChildren(t,i)),this.syncDataset(),this.createSortable()}},parseBool:function(t){return!/^(false|0)$/i.test(t)&&!!t},removeChildren:function(t,e){var n=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");this.setTreeIcon(e.querySelector("svg.icon-tree"),t.icon||"icon-tree-node"),h.removeClass(e,"folder","is-open"),n&&n.parentNode.removeChild(n)},removeNode:function(t){var e=this.findById(t.id),n=null;t instanceof jQuery?(n=(e=t).parentsUntil(this.element,".folder:last"),e.parent().remove()):e&&(n=e.node.parentsUntil(this.element,".folder:last"),e.node.parent().remove()),this.childrenCountInit(n),e&&this.syncDataset()},attachMenu:function(t){var e=this;function n(t,e){void 0===$(":focus")[0]&&null!=e&&(null==e?void 0:e.triggerElement)&&e.triggerElement.focus()}t&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",function(i){var a=$(this);return i.preventDefault(),e.popupEl=$(i.currentTarget).popupmenu({menuId:t,eventObj:i,trigger:"immediate",attachToBody:!0,returnFocus:n}).off("selected").on("selected",function(t,n){e.element.triggerHandler("menuselect",{node:a,item:n})}),e.element.triggerHandler("menuopen",{menu:$("#".concat(t)),node:a}),!1})},createSortable:function(){if(this.settings.sortable){var t,e,n,i=this;if(i.targetArrow=i.element[0].previousElementSibling,i.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!i.targetArrow||i.targetArrow&&!h.hasClass(i.targetArrow,"tree-drag-target-arrow")){var a=document.createElement("div");h.addClass(a,"tree-drag-target-arrow"),i.element[0].parentNode.insertBefore(a,i.element[0]),i.targetArrow=i.element[0].previousElementSibling}e=setInterval(function(){i.loading||(clearInterval(e),[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(e){var a=$(e);a.data("drag")||a.on("mousedown.tree",function(t){t.preventDefault(),n=!(3===t.which||h.hasClass(t.target,"icon")&&h.hasClass(e.parentNode,"folder"))}).drag({clone:!0,cloneAppendTo:a.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",function(s,r,o){if(!o||!n)return h.removeClass(e,"is-dragging"),void(o&&o[0].parentNode.removeChild(o[0]));(t=o)[0].removeAttribute("id"),h.addClass(t[0],"is-dragging-clone"),[].slice.call(t[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach(function(t){return t.parentNode.removeChild(t)});var l=a.closest("ul");i.sortable={startIndex:$(i.linkSelector,i.element).index(a),startNode:a,startIcon:$("svg.icon-tree",a).getIconName(),startUl:l,startLi:a.closest("li"),startFolderNode:l.prev("a"),startWidth:a.outerWidth()},i.element.triggerHandler("sortstart",i.sortable),s.preventDefault(),s.stopImmediatePropagation()}).on("drag.tree",function(e,n){t&&(t[0].style.left="".concat(n.left,"px"),t[0].style.top="".concat(n.top,"px"),t[0].style.opacity="1",i.setDragOver(t,n))}).on("dragend.tree",function(e,n){var a;if(i.targetArrow.style.display="none",[].slice.call(i.element[0].querySelectorAll(i.linkSelector)).forEach(function(t){return h.removeClass(t,"is-over")}),t&&null!==(a=i.sortable)&&void 0!==a&&(null==a?void 0:a.overDirection)){t[0].style.left="".concat(n.left,"px"),t[0].style.top="".concat(n.top,"px");var s=i.sortable.startNode.parent(),r=i.sortable.overNode.parent();"over"===i.sortable.overDirection?(h.hasClass(r[0],"folder")||i.convertFileToFolder(i.sortable.overNode),r[0].querySelector("ul").appendChild(s[0]),h.hasClass(r[0],"is-open")||i.toggleNode(i.sortable.overNode,e)):"up"===i.sortable.overDirection?s.insertBefore(r):"down"===i.sortable.overDirection&&(h.hasClass(r[0],"is-open")&&h.hasClass(r[0],"folder")?$("ul:first",r).prepend(s):s.insertAfter(r)),!i.sortable.startUl[0].querySelector("li")&&i.sortable.startFolderNode.data("oldData")&&"file"===i.sortable.startFolderNode.data("oldData").type&&i.convertFolderToFile(i.sortable.startFolderNode),C.fixSVGIcons(s),i.element.triggerHandler("sortend",i.sortable),i.syncDataset(),i.isMultiselect&&i.initSelected(),i.updateAutoChildrenCount(i.element[0]),delete i.sortable}})}))},10)}},setDragOver:function(t,e){var n,i,a,s,r,o,l,c,d,u,p,f,g=this,m=t[0].querySelector("svg.icon-tree"),v=g.element[0].getBoundingClientRect(),b=20;if(g.sortable){var y=function(){g.sortable.overNode=null,g.sortable.overIndex=null,g.sortable.overDirection=null,g.targetArrow.style.display="none",g.setTreeIcon(m,"icon-cancel")};e.top>v.top-b&&e.top<v.bottom+b&&e.left>v.left-b-g.sortable.startWidth&&e.left<v.left+v.height+b?(b=2,(l=[].slice.call(g.element[0].querySelectorAll(g.linkSelector))).forEach(function(t,v){if(p=null,c=t.getBoundingClientRect(),e.top>c.top-b&&e.top<c.bottom+b){if((r=$(t)).parentsUntil(g.element,".folder").filter(function(){return $("a:first",this).is(g.sortable.startNode)&&g.sortable.startLi.is(".folder")}).length)return void y();s=t.parentNode,d=c.left,o=r.closest("ul"),n=parseInt(s.style.marginTop,10)>0?2:0,i=v-1===g.sortable.startIndex&&o.is(g.sortable.startUl),a=v+1===g.sortable.startIndex&&o.is(g.sortable.startUl),l.forEach(function(t){return h.removeClass(t,"is-over")}),f=function(){p?(g.setTreeIcon(m,g.sortable.startIcon),"over"===p?(g.targetArrow.style.display="none",h.hasClass(t,"is-disabled")||h.addClass(t,"is-over")):(l.forEach(function(t){return h.removeClass(t,"is-over")}),u="up"===p?c.top-1.5-(h.hasClass(s,"is-active")?3:0):c.bottom+(s.nextElementSibling&&h.hasClass(s.nextElementSibling,"is-active")?-1:1.5)+n,g.targetArrow.style.left="".concat(d,"px"),g.targetArrow.style.top="".concat(u,"px"),g.targetArrow.style.display="block"),g.sortable.overNode=r,g.sortable.overIndex=v,g.sortable.overDirection=p):y()},v!==g.sortable.startIndex&&(e.left>c.left-b-g.sortable.startWidth&&e.left<c.right+b?p=!i&&e.top<c.top?"up":!a&&e.top>c.top+2*b?"down":"over":!i&&e.top<c.top?p="up":a||(p="down")),f()}})):y()}},convertFileToFolder:function(t){var e=$("svg.icon-tree",t),n=document.createElement("ul");n.setAttribute("role","group"),h.addClass(n,"folder");var i={icon:e.getIconName(),type:"file"};if(this.hasIconClass(t)){var a=t.attr("class").replace(/\s?is-selected/,"");i.iconClass=a,this.settings.useExpandTarget||t.removeClass(a)}t.data("oldData",i);var s=t[0].parentNode;s&&"li"===s.tagName.toLowerCase()&&(h.addClass(s,"folder"),s.appendChild(n)),e[0].insertAdjacentHTML("afterend",this.getExpandTargetHtml(!1)),t[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml()),this.setTreeIcon(e,this.settings.folderIconClosed)},convertFolderToFile:function(t){var e=t.parent(".folder");e.removeClass("folder is-open"),$(".icon-expand-target, .tree-children-count",t).remove(),$("ul:first",e).remove(),e.length&&(this.setTreeIcon($("svg.icon-tree",t),t.data("oldData")?t.data("oldData").icon:"tree-node"),t.data("oldData")&&t.data("oldData").iconClass&&t.addClass(t.data("oldData").iconClass),t.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each(function(){var t=$(this),e=t.data("drag");t.off("mousedown.tree"),e&&e.destroy&&e.destroy()}),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,xa)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(t){h.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")})},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(t){h.removeClass(t,"is-disabled"),t.removeAttribute("aria-disabled")})},preserveEnablementState:function(){var t=[].slice.call(this.element[0].querySelectorAll("a")),e=[];return t.forEach(function(t){h.hasClass(t,"is-disabled")||!0===t.getAttribute("aria-disabled")?e.push({nodeId:t.id,state:"disabled"}):e.push({nodeId:t.id,state:"enabled"})}),this.settings.originalEnablementState=e,e},restoreEnablementState:function(){var t=this.settings,e=[].slice.call(this.element[0].querySelectorAll("a"));void 0!==t.originalEnablementState&&null!==t.originalEnablementState&&e.forEach(function(e){t.originalEnablementState.forEach(function(t){t.nodeId===e.id&&("disabled"===t.state?(h.addClass(e,"is-disabled"),e.setAttribute("aria-disabled","true")):(h.removeClass(e,"is-disabled"),e.removeAttribute("aria-disabled")))})})}},$.fn.tree=function(t){return this.each(function(){var e=$.data(this,"tree");e?e.updated(t):e=$.data(this,"tree",new Ca(this,t))})},$.fn.collapse=function(){return this.each(function(){ka(this,"collapse")})},$.fn.expand=function(){return this.each(function(){ka(this,"expand")})};var Ta={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Aa(t,e){this.settings=C.mergeSettings(t,e,Ta),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Aa.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var t=st.themeColors().palette;this.settings.colors=[t.azure[100].value,t.azure[90].value,t.azure[80].value,t.azure[70].value,t.azure[60].value,t.azure[40].value,t.azure[30].value,t.azure[20].value,t.amethyst[100].value,t.amethyst[90].value,t.amethyst[80].value,t.amethyst[70].value,t.amethyst[60].value,t.amethyst[50].value,t.amethyst[40].value,t.amethyst[40].value,t.amethyst[30].value,t.amethyst[20].value,t.turquoise[100].value,t.turquoise[90].value,t.turquoise[80].value,t.turquoise[70].value,t.turquoise[60].value,t.turquoise[50].value,t.turquoise[40].value,t.turquoise[40].value,t.turquoise[30].value,t.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(t){var e=this,n=Object.create(this.settings.margin),i=this.element.parent().width()-n.left-n.right,a=this.element.parent().height()-n.top-n.bottom,s=d3.scaleOrdinal().range(this.settings.colors);if(0!==t.length){C.addAttributes(this.element,t,this.settings.attributes,"",!0),this.settings.showTitle&&t.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(t.name),a-=35,n.top-=19);var r=d3.treemap().size([i,a]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(i+n.left+n.right,"px")).style("height","".concat(a+n.top+n.bottom,"px")).style("left","".concat(n.left,"px")).style("top","".concat(n.top,"px"));var o=d3.hierarchy(t,function(t){return t.children}).sum(function(t){return t.value}),l=r(o);this.total=d3.sum(l.leaves(),function(t){return t.value}),Ve.appendTooltip(),this.root.datum(o).selectAll(".chart-treemap-node").data(l.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",function(t){return"".concat(t.x0,"px")}).style("top",function(t){return"".concat(t.y0,"px")}).style("width",function(t){return"".concat(Math.max(0,t.x1-t.x0-1),"px")}).style("height",function(t){return"".concat(Math.max(0,t.y1-t.y0-1),"px")}).style("background",function(t){return t&&t.parent&&t.parent.data?s(t.parent.data.name):""}).call(function(t){t._groups.forEach(function(t){t.forEach(function(t){var n,i=t.__data__;C.addAttributes($(t),i,e.settings.attributes,null===(n=i.data.name)||void 0===n||null==n?void 0:n.toLowerCase(),!0)})})}).on("mouseenter.treemap",function(t){var e=this.getBoundingClientRect(),n=this.querySelector(".chart-treemap-percent").innerText,i=t.parent.data.tooltip;if(!(!i&&e.width>60&&e.height>50)){i=i?(i=i.replace("%percent%",n)).replace("{{percent}}",n):"<p><b>".concat(t.data.name," </b> ").concat(n,"</p>");var a=Ve.tooltipSize(i),s=e.left-a.width/2+12,r=e.top-a.height-6;Ve.showTooltip(s,r,i,"top")}}).on("mouseleave.treemap",function(){clearInterval(void 0),Ve.hideTooltip()}),this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-text").text(function(t){return t.data.name}),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text(function(t){return d3.format(e.settings.labelFormatter)(t.value/e.total)})}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var t=this;return this.element.on("updated.".concat("treemap"),function(){t.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),function(){t.handleResize()}),this.element.on("resize.".concat("treemap"),function(){t.handleResize()})),$("html").on("themechanged.".concat("treemap"),function(){t.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),Ve.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(t){return this.each(function(){var e=$.data(this,"treemap");e?e.updated(t):e=$.data(this,"treemap",new Aa(this,t))})},$.fn.virtualscroll=function(t){return this.each(function(){var e=$.data(this,"virtual-scroll");e?e.updated(t):e=$.data(this,"virtual-scroll",new vn(this,t))})},$.fn.weekview=function(t){return this.each(function(){var e=$.data(this,"weekview");e?e.updated(t):e=$.data(this,"weekview",new Nn(this,t))})};var Sa={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function Ea(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Sa),this.init()}function $a(t,e,n,i,a,s){var r=a.placeholder;return r&&""===t?("[object Function]"==={}.toString.call(r)?r=r(e,n,i,a,s):s&&r in s&&(r=s[r]),r):""}function Da(t,e,n,i,a){var s,r=i?i.disabled:null;return"function"==typeof r?r(t,e,n,i,a):null!=(s=r)&&("boolean"==typeof s&&!0===s||"string"==typeof s&&"true"===s.toLowerCase())}Ea.prototype={init:function(){this.namespace=C.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var t=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&t.ticks){for(var e=function(t,e){return t.replace(/{{(\w+)}}/g,function(t,n){return e[n]})},n={state:"",href:"#",label:""},i=0;i<t.ticks.length;i++){var a=e(t.ticksTemplate,$.extend({},n,t.ticks[i]));a=a.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var s=$(a);t.ticks[i].ngClick&&s.attr("ng-click",t.ticks[i].ngClick),this.bar.append(s)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach(function(t){t.classList.contains("is-disabled")&&["onclick","ng-click"].forEach(function(e){return t.removeAttribute(e)})}),this.header[0].style.opacity="1",this},setLabelsData:function(){var t=this,e=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],e.forEach(function(e){var n=e.textContent,i=e.getAttribute("data-shortlabel");i||(i=e.getAttribute("shortlabel"));var a={label:n,shortLabel:i,node:e,jqEl:$(e)};i&&"undefined"!==i||(e.removeAttribute("data-shortlabel"),e.removeAttribute("shortlabel"),delete a.shortLabel),t.labels.push(a)}),this},adjustLabels:function(){var t=this,e=this.header[0].getBoundingClientRect(),n=parseFloat(window.getComputedStyle(this.bar[0]).width),i=100/(this.labels.length-1)/100*n-15,a=[],s=[],r=function(e){delete e.isEllipsis,e.node.classList.remove("is-ellipsis"),e.node.style.width="",t.removeTooltip(e)},o=function(e){var n=t.labels[e].node;if(-1===a.indexOf(e)){var s=t.labels[e].shortLabel;s?(n.textContent=s,a.push(e),r(t.labels[e])):(n.classList.add("is-ellipsis"),n.style.width="".concat(i,"px"),t.setTooltip(t.labels[e]),t.labels[e].isEllipsis=!0)}n.style.left="-".concat((n.offsetWidth-n.parentNode.offsetWidth)/2,"px")},l=function(){var n=function(t,e,n){if(t.isEllipsis){var i=parseFloat(t.node.style.width)-e;t.node.style.width="".concat(i,"px"),t.node.style.left="-".concat((i-t.node.parentNode.offsetWidth)/2,"px")}else{var a=parseFloat(t.node.style.left)+e*(n?-1:1);t.node.style.left="".concat(a,"px")}},i=t.labels[0],a=i.node.rect||i.node.getBoundingClientRect();e.left>a.left&&n(i,e.left-a.left),a=(i=t.labels[t.labels.length-1]).node.rect||i.node.getBoundingClientRect(),e.right<a.right&&n(i,a.right-e.right,!0)};this.labels.forEach(function(t){var e=t.node;e.textContent=t.label,e.style.left="-".concat((e.offsetWidth-e.parentNode.offsetWidth)/2,"px"),r(t)}),l();var c=function(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)},d=function(){t.labels.forEach(function(t){t.rect=t.node.getBoundingClientRect()}),s=[];for(var e=0,n=t.labels.length;e<n;e++)if(e<n-1){var i=e+1;c(t.labels[e].rect,t.labels[i].rect)&&s.push([e,i])}},u=50;do{d(),s.forEach(function(e){var n=t.labels[e[0]].node,i=t.labels[e[1]].node,a=n.offsetWidth>i.offsetWidth?0:1,s=e[a],r=a?e[0]:e[1];o(s),c(t.labels[s].rect,t.labels[r].rect)&&o(r)}),l(),d(),u--}while(s.length&&u>0);return l(),this.labels.forEach(function(t){delete t.isEllipsis,delete t.rect}),this},setTooltip:function(t){var e=this;t.jqEl.tooltip({content:t.label,placement:"bottom"}).on("blur.".concat("wizard"),function(){return e.removeTooltip(t)})},removeTooltip:function(t){var e=t.jqEl.data("tooltip");e&&(e.element.off("blur.".concat("wizard")),e.destroy())},positionTicks:function(){var t=this.ticks.length,e=100/(t-1);this.ticks.toArray().forEach(function(n,i){var a=function(n){return n===t-1?100:e*n}(i),s=R&&R.isRTL()?100-a:a;n.style.left="".concat(s,"%"),n.classList.contains("is-disabled")&&n.setAttribute("tabindex","-1")})},updateRange:function(){var t=function(t,e){return parseFloat(window.getComputedStyle(t)[e])},e=this.ticks.filter(".current").last(),n=0;return e.length&&(n=100*t(e[0],"left")/t(e.parent()[0],"width"),n=R&&R.isRTL()?100-n:n),this.completedRange[0].style.width="".concat(n,"%"),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var t=this;return this.labels.forEach(function(e){t.removeTooltip(e),e.jqEl.off().removeData()}),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(t,e){return F(this.activate,this.select).apply(this,[t,e])},activate:function(t,e){if(void 0===t&&!e)return this;var n,i=this;if(void 0===t||null!=t&&t.type&&t.target||e||(e=t),e=void 0===e?(n=$(t.target)).is(".label")?n.parent():n:"number"==typeof e?i.ticks.eq(e):e,t&&(e.is("[disabled], .is-disabled")||!e.is("a")))return t.preventDefault(),t.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[e]))return this;var a=this.ticks.index(e);return this.ticks.removeClass("complete current").eq(a).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[e]),setTimeout(function(){i.element.trigger("afteractivated",[e])},300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("wizard"),function(){e.updated()}),this.ticks.on("click.".concat("wizard"),function(t){e.activate(t,$(this))}),$("body").on("resize.".concat(this.namespace),function(){t.adjustLabels()}),this}},$.fn.wizard=function(t){return this.each(function(){var e=$.data(this,"wizard");e?e.updated(t):e=$.data(this,"wizard",new Ea(this,t))})};var Ia,Ma,La,Pa,Na={Text:function(t,e,n){return null==n||""===n?"":n.toString()},Input:function(t,e,n,i){return i.inlineEditor?'<label for="datagrid-inline-input-'.concat(t,"-").concat(e,'" class="audible">').concat(i.name,'</label><input id="datagrid-inline-input-').concat(t,"-").concat(e,'" class="').concat("right"===i.align?"is-number-mask":"",'" value="').concat(n,'">'):null==n||""===n?"":n.toString()},Placeholder:function(t,e,n,i,a){var s=$a(n,t,e,n,i,a);return""!==s?'<span class="is-placeholder">'.concat(s,"</span>"):null==n||""===n?"":n.toString()},Ellipsis:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.textOverflow="ellipsis",a},Password:function(t,e,n){return(null==n||""===n?"":n.toString()).replace(/./g,"*")},Readonly:function(t,e,n){return'<span class="is-readonly">'.concat(null==n?"":n,"</span>")},RowNumber:function(t,e,n,i,a,s){var r,o=s.runningCount||1;return(null==s||null===(r=null==s?void 0:s.pagerAPI)||void 0===r||null==r?void 0:r.activePage)>1&&(o+=(s.pagerAPI.activePage-1)*s.pagerAPI.settings.pagesize),'<span class="is-readonly">'.concat(o,"</span>")},Date:function(t,e,n,i,a){var s,r=null==n?"":n;return"string"==typeof n&&n?(s=i.sourceFormat?R.parseDate(n,"string"==typeof i.sourceFormat?{pattern:i.sourceFormat}:i.sourceFormat):R.parseDate(n,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat))?r=R.formatDate(s,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat):"NaN/NaN/NaN"!==(r=R.formatDate(n,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat))&&r||""===r||(r=n):n&&(r=R.formatDate(n,"string"==typeof i.dateFormat?{pattern:i.dateFormat}:i.dateFormat)),i.editor&&!0!==a?'<span class="trigger">'.concat(r,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):r},Time:function(t,e,n,i,s){var r,o=null==n?"":n,l="object"===a(R)&&R.calendar().dateFormat?R.calendar().dateFormat.short:null,c="object"===a(R)&&R.calendar().timeFormat?R.calendar().timeFormat:null;return"string"==typeof n&&n?(r=R.formatDate(function(t){if(""===t)return null;var e=t.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===e)return null;var n=function(t){return isNaN(parseInt(t,10))?0:parseInt(t,10)},i=new Date,a=n(e[1]);return a-=12===a?12:0,a+=e[4]?12:0,i.setHours(a),i.setMinutes(n(e[2])),i.setSeconds(n(e[3])),i}(n),{pattern:"".concat(l," ").concat(i.sourceFormat||i.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))):n&&(r=R.formatDate(n,{pattern:"".concat(l," ").concat(i.sourceFormat||i.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))),o=o.replace(/^\s/,""),i.editor&&!0!==s?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(t,e,n){return null==n?"":n},Lookup:function(t,e,n,i,a){var s=null==n?"":n,r=!1,o=$a(s,t,e,n,i,a);return""!==o&&(r=!0),i.editor?(i.editorOptions&&"function"==typeof i.editorOptions.field&&(s=i.editorOptions.field(a,null,null),r=!1),null!=s&&""!==s||(s="",o&&(r=!0,s=o)),'<span class="trigger '.concat(r?"is-placeholder":"").concat("right"===i.align?"align-text-right":"",'">').concat(s,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):r?'<span class="is-placeholder">'.concat(o,"</span>"):s},Decimal:function(t,e,n,i,a){var s=n,r=/[\s]*($)?[#,0-9\s\.]+%?[\s]*/;void 0!==R&&null!=s&&""!==s&&r.test(s)&&(s=R.formatNumber(n,i.numberFormat));var o=$a(s=null!=s&&"NaN"!==s&&r.test(s)?s:"",t,e,n,i,a);return""!==o?'<span class="is-placeholder">'.concat(o,"</span>"):s},Integer:function(t,e,n,i){var a=n;return void 0!==R&&null!=a&&""!==a&&(a=R.formatNumber(n,i.numberFormat||{style:"integer"})),null==a||"NaN"===a?"":a},Hyperlink:function(t,e,n,i,a,s){var r=Da(t,e,n,i,a)?" disabled":"",o=i.href||"#";if(i.href&&"function"==typeof i.href){if(null==(o=i.href(t,e,a,i)))return i.text||n}else o=o.replace("{{value}}",n);var l=i.text||n;return l||i.icon?i.icon?'<a href="'.concat(o,'"').concat(r,' class="btn-icon row-btn ').concat(i.cssClass||"",'" ').concat(s.settings.rowNavigation?'tabindex="-1"':"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:i.icon,file:i.iconFile}),'\n          <span class="audible">').concat(l,"</span>\n        </a>"):'<a href="'.concat(o,'"').concat(r," ").concat(s.settings.rowNavigation?'tabindex="-1"':"",' class="hyperlink ').concat(i.cssClass||"",'"').concat(i.target?' target="'.concat(i.target,'"'):"").concat(i.hyperlinkTooltip?' title="'.concat(i.hyperlinkTooltip,'"'):"",">").concat(l,"</a>"):""},Template:function(t,e,n,i,a){var s=i.template,r="";return ke&&a&&s&&(r=ke.compile("{{#dataset}}".concat(s,"{{/dataset}}"),{dataset:a})),r},Drilldown:function(){var t=R.translate("Drilldown");return void 0===t&&(t=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(t,"</span>\n      </button>")},RowReorder:function(){var t=R.translate("ReorderRows");return void 0===t&&(t="Reorder Rows"),'<div class="datagrid-reorder-icon draggable">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(t,"</span>\n      </div>")},Checkbox:function(t,e,n,i,a,s){var r;r=i.isChecked?i.isChecked(n):void 0!==n&&(!0===n||1===parseInt(n,10));var o='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(R.translate(r?"Yes":"No"),"</span>"),l=s.wasJustUpdated;return s.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" class="datagrid-checkbox'.concat(r?" is-checked ".concat(l?" ":" no-animation"):"",'"></span>').concat(o,"</div>")},SelectionCheckbox:function(t,e,n,i,a,s){var r=void 0!==n&&!0===n;n||(r=s.isRowSelected(a));var o=" ";if(s.settings.columnIds.length>0)for(var l=0;l<s.settings.columnIds.length;l++)o+=a[s.settings.columnIds[l]];return o=u.ensureAlphaNumericWithSpaces(o),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(i.name?i.name:R.translate("Select")+o,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(r?" is-checked no-animate":"",'"></span></div>')},SelectionRadio:function(t,e,n,i,a,s){var r=void 0!==n&&!0===n;n||(r=s.isRowSelected(a));var o=" ";if(s.settings.columnIds.length>0)for(var l=0;l<s.settings.columnIds.length;l++)o+=a[s.settings.columnIds[l]];return o=u.ensureAlphaNumericWithSpaces(o),'<div class="datagrid-checkbox-wrapper"><span role="radio" aria-label="'.concat(i.name?i.name:R.translate("Select")+o,'" class="datagrid-radio datagrid-selection-radio ').concat(r?" is-checked":"",'"></span></div>')},Actions:function(t,e,n,i){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(i.menuId,'">\n        <span class="audible">').concat(i.title||R.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(t,e,n){return'<span class="datagrid-multiline-text">'.concat(null==n?"":n,"</span>")},Editor:function(t,e,n,i){var a=null==n?"":n,s="is-editor";return s+=i.singleline?" is-singleline":" datagrid-multiline-text",s+=i.contentTooltip?" content-tooltip":"",'<div class="'.concat(s,'">').concat(u.unescapeHTML(a),"</div>")},Expander:function(t,e,n,i,a,s){var r=C.stringAttributes(s,s.settings.attributes,"btn-expand-row-".concat(t));return"<button ".concat(r,' type="button" aria-label="').concat(R.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(n?"<span> ".concat(n,"</span>"):"")},GroupRow:function(t,e,n,i,a,s){var r,o=s.settings.groupable,l={left:"",center:"",right:""},c=null!=s&&null!==(r=null==s?void 0:s.settings)&&void 0!==r&&(null==r?void 0:r.rowReorder)?this.RowReorder():"",d="",u=void 0===o.expanded||o.expanded;o.expanded&&"function"==typeof o.expanded&&(u=o.expanded(t,e,n,i,a,s));for(var h=0;h<o.fields.length;h++)d+=a[o.fields[h]]+(0===h?"":",");o.groupRowFormatter&&(d=o.groupRowFormatter(t,e,n,i,a,s));var p='<button type="button" class="btn-icon datagrid-expand-btn'.concat(u?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(u?" active":"",'"></span>\n    <span class="audible">').concat(R.translate("ExpandCollapse"),"</span>\n    </button>").concat(c,"<span> ").concat(d,"</span>");return l[s.getContainer(o.fields?o.fields[0]:"")]=p,l},GroupFooterRow:function(t,e,n,i,a,s){var r=s.settings.groupable,o={left:"",center:"",right:""},l=s.settings.frozenColumns.left.length,c=s.settings.frozenColumns.right.length,d=s.columnIdxById(r.aggregate),u=s.getContainer(r.aggregate);return o.left='<td role="gridcell" colspan="'.concat(l,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===u?a.sum:"<span>&nbsp;</span>","</div></td>"),o.center='<td role="gridcell" colspan="'.concat(d-l-c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===u?a.sum:"<span>&nbsp;</span>","</div></td>"),o.right='<td role="gridcell" colspan="'.concat(c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===u?a.sum:"<span>&nbsp;</span>","</div></td>"),r.groupFooterRowFormatter&&(o[u]=r.groupFooterRowFormatter(d,t,e,n,i,a,s)),o},SummaryRow:function(t,e,n,i){var a="",s=i.summaryText||"";return"after"===i.summaryTextPlacement&&(a=s,s=""),void 0!==R&&i.numberFormat&&null!=n&&""!==n&&(n=R.formatNumber(+n,i.numberFormat)),s+(null==n||""===n?"":n.toString())+a},Tree:function(t,e,n,i,a,s){var r=!a||a.expanded,o=s&&s.settings.treeDepth&&s.settings.treeDepth[t]?s.settings.treeDepth[t].depth:0,l=a&&a.isAllChildrenFiltered,c=l?" disabled":"";r&&l&&(r=!1);var d="extra-small"===s.settings.rowHeight||"small"===s.settings.rowHeight?24:27,u='<button type="button" class="btn-icon datagrid-expand-btn'.concat(r?" is-expanded":"",'" tabindex="-1"').concat(o?' style="margin-left: '.concat(o?"".concat(d*(o-1),"px"):"",'"'):"").concat(c,'>\n      <span class="icon plus-minus ').concat(r?" active":"",'"></span>\n      <span class="audible">').concat(R.translate("ExpandCollapse"),"</span>\n      </button>").concat(n?" <span>".concat(n,"</span>"):""),h=' <span class="datagrid-tree-node"'.concat(o?' style="margin-left: '.concat(o?"".concat(d*o,"px"):"",'"'):"",">").concat(n,"</span>");return a&&a[i.children?i.children:"children"]?u:h},ClassRange:function(t,e,n,i){var a=i.ranges,s="",r="";if(!a)return{};for(var o=0;o<a.length;o++)n>=a[o].min&&n<=a[o].max&&(s=a[o].classes,r=a[o].text?a[o].text:s.split(" ")[0]),n===u.escapeHTML(a[o].value)&&(s=a[o].classes,r=a[o].text?a[o].text:n);return{classes:s,text:r}},Badge:function(t,e,n,i){var a=i.color,s=i.name;if(i.ranges){var r=Na.ClassRange(t,e,n,i);a=r.classes,s=r.text}return'<span class="badge '.concat(a,'">').concat(n,' <span class="audible">').concat(s,"</span></span>")},Tag:function(t,e,n,i){var a,s=Na.ClassRange(t,e,n,i);return null!=i&&null!==(a=null==i?void 0:i.editorOptions)&&void 0!==a&&(null==a?void 0:a.clickable)?'<span class="tag is-linkable hide-focus '.concat(s.classes,'"><a class="tag-content" href="#">#').concat(n,'</a><button class="btn-linkable" focusable="false" tabindex="-1">\n        <svg class="icon caret-right" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n      </button></span>'):'<span class="tag '.concat(s.classes,' hide-focus"><span class="tag-content">').concat(n,"</span></span>")},Alert:function(t,e,n,i){var a=Na.ClassRange(t,e,n,i),s=$.createIcon({icon:"".concat(a.classes,"-alert"),classes:["icon","datagrid-alert-icon","icon-".concat(a.classes)]});return"".concat(s,'<span class="datagrid-alert-text">').concat("value"===a.text?n:a.text,"</span>")},Image:function(t,e,n,i){return'<img class="datagrid-img" src="'.concat(n,'" alt="').concat(i.alt?i.alt:R.translate("Image"),'"').concat(i.dimensions?' style="height:'.concat(i.dimensions.height,";width:").concat(i.dimensions.height,'"'):"","/>")},Color:function(t,e,n,i){var a=Na.ClassRange(t,e,n,i),s=null==n||""===n?"":n.toString();return'<span class="'.concat(a.classes,'">').concat(s,"</span>")},Colorpicker:function(t,e,n,i){var a=null==n||""===n?"":n.toString();if(i.inlineEditor)return a;var s="swatch".concat(""===n?" is-empty":"");return(a='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(s,'" style="background-color: ').concat(n,'"></span><input class="colorpicker" id="colorpicker-').concat(e,'" name="colorpicker-').concat(e,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(n,'">'))+'<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(t,e,n,i,a,s){var r,o=Da(t,e,n,i,a)?" disabled":"";r=i.text?i.text:null==n||""===n?"":n.toString();var l='<button type="button"'.concat(o,' class="').concat(i.icon?"btn-icon":"btn-secondary"," row-btn ").concat(i.cssClass?i.cssClass:"",'"').concat(s.settings.rowNavigation?' tabindex="-1"':""," >");return i.icon&&(l+=$.createIcon({icon:i.icon,file:i.iconFile})),l+"<span>".concat(r,"</span></button>")},MultiSelect:function(t,e,n,i,s){var r,o,l,c=n,d=!1;if(i.options&&void 0!==n){("object"===a(r=i.caseInsensitive&&"string"==typeof n?n.toLowerCase():n)||Array.isArray(r))&&(c="");for(var u=0,h=i.options.length;u<h;u++){if(o=i.options[u],l=i.caseInsensitive&&"string"==typeof o.value?o.value.toLowerCase():o.value,("object"===a(r)||Array.isArray(r))&&i.editorOptions.multiple)for(var p=0;p<r.length;p++)i.options[u].value===r[p]&&(c+="".concat(o.label,", "));if(l===r){c=o.label;break}}c=c.replace(/,\s*$/,"")}var f=$a(c,t,e,n,i,s);""!==f&&(d=!0,c=f);var g='<span class="trigger dropdown-trigger '.concat(d?"is-placeholder":"",'">').concat(c,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){g='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(t,'" class="dropdown">');for(var m=0,v=i.options.length;m<v;m++){var b,y=i.options[m];b=void 0!==y.label?y.label:void 0!==y.value?y.value:"",g+="<option".concat(void 0===y.id?"":' id="'.concat(y.id,'"'),'  value="').concat(y.value,'"').concat(y.selected||y.value===r?" selected ":"",">").concat(b,"</option>")}g+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(c,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return g},Dropdown:function(t,e,n,i,a){var s,r,o=n,l=!1;if(i.options&&void 0!==n){s=i.caseInsensitive&&"string"==typeof n?n.toLowerCase():n;for(var c=0,d=i.options.length;c<d;c++)if(r=i.options[c],(i.caseInsensitive&&"string"==typeof r.value?r.value.toLowerCase():r.value)===s){o=r.label;break}}var u=$a(o,t,e,n,i,a);""!==u&&(l=!0,o=u);var h='<span class="trigger dropdown-trigger '.concat(l?"is-placeholder":"",'">').concat(o,"</span>").concat($.createIcon({icon:"dropdown"}));if(i.inlineEditor){h='<label for="full-dropdown" class="audible">'.concat(i.name,'</label><select id="datagrid-dropdown').concat(t,'" class="dropdown">');for(var p=0,f=i.options.length;p<f;p++){var g,m=i.options[p];g=void 0!==m.label?m.label:void 0!==m.value?m.value:"",h+="<option".concat(void 0===m.id?"":' id="'.concat(m.id,'"'),'  value="').concat(m.value,'"').concat(m.selected||m.value===s?" selected ":"",">").concat(g,"</option>")}h+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(o,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return h},Fileupload:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor||(a=""===$.trim(a)?'<span class="trigger">'.concat(a,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(a,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),a},Spinbox:function(t,e,n,i){var a=null==n||""===n?"":n.toString();return i.inlineEditor&&(a='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="').concat(n,'">\n        <span class="spinbox-control up">+</span></span>')),a},Favorite:function(t,e,n,i,a,s){var r;r=i.isChecked?i.isChecked(n):void 0!==n&&!0===n;var o=i.editor&&s.settings.editable;return r?'<span aria-label="'.concat(R.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):i.showEmpty?'<span aria-label="'.concat(R.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(t,e,n,i,a){return a&&a.rowStatus?"".concat($.createIcon({icon:a.rowStatus.icon,classes:["icon","icon-".concat(a.rowStatus.icon)]}),'<span class="audible">').concat(a.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(t,e,n,i){var a=R.formatNumber(100*n,i.numberFormat||{minimumFractionDigits:2,maximumFractionDigits:2}),s="".concat(a,"%"),r=Na.ClassRange(t,e,a,i),o=i.target;i.text&&(s=(s=(s=(s=(s=(s=(s=i.text).replace("{{value}}",n)).replace("<% value %>",n)).replace("<%value%>",n)).replace("{{percent}}",a)).replace("<% percent %>",a)).replace("<%percent%>",a),i.showPercentText=!0);var l=i.ranges&&r.classes?r.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(o||0,'%;"></div>\n              <div class="completed bar ').concat(l,'" style="width: ').concat(a,'%;"></div>\n              ').concat(i.showPercentText?'<div class="chart-targeted-text l-center">'.concat(s,"</div>\n            </div>"):'<div class="audible">'.concat(a,"%</div>"))},ProcessIndicator:function(t,e,n){if(!n.steps)return"";for(var i='<div class="process-indicator compact responsive"><div class="display">',a=0;a<n.steps;a++){var s=a===(null==n||null==n?void 0:n.current)-1;i+='<div class="step">\n        <div class="lines">\n          <span class="indicator '.concat(s?" current processing":""," ").concat(a<(null==n||null==n?void 0:n.current)?" darker":"",'"></span>\n          <span class="separator ').concat(a<(null==n||null==n?void 0:n.current)?" darker":"",'"></span>\n        </div>\n      </div>')}return i+"</div></div>"}},Ra={cleanExtra:function(t,e){var n=[];if(!e&&t)n=Ra.datasetToHtml(t);else{var i=e.settings.groupable?e.originalDataset:e.settings.dataset,a=e.table.clone(!0);(e.settings.frozenColumns.left.length||e.settings.frozenColumns.right.length)&&a.find(".datagrid-header tr:first()").html(e.headerNodes().clone(!0)),n=Ra.appendRows(i,a[0],e)}if(!t&&!n[0].querySelector("thead")){for(var s=n[0].querySelector("tbody"),r=n[0].createTHead(),o=r.insertRow(0),l=e.headerNodes(),c=0;c<l.length;c++){var d=l[c],u=o.insertCell(c);u.innerHTML=d.querySelector(".datagrid-header-text").textContent.trim(),u.setAttribute("class",d.classList),u.setAttribute("id",d.getAttribute("id")),d.getAttribute("data-exportable")&&u.setAttribute("data-exportable",d.getAttribute("data-exportable"))}s.parentNode.insertBefore(r,s)}return n=function(t){var e=function(t){t.parentNode&&t.parentNode.removeChild(t)},n=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach(function(t){t.classList.contains("is-hidden")||t.classList.contains("datagrid-expandable-row")?e(t):[].slice.call(t.querySelectorAll("th, td, div, span")).forEach(function(t){if(t.classList.contains("is-hidden"))e(t);else{var i=t.getAttribute("data-exportable");if(i&&"no"===i){var a=t.id.match(/-header-\d+/g);return a=(a=a?a[0].match(/\d+/g):null)?a[0]:t.id.slice(-1),a=parseInt(a,10),n.push(a+1),void e(t)}var s=t.getAttribute("aria-colindex");if("td"===t.tagName.toLowerCase()&&s&&-1!==n.indexOf(parseInt(s,10)))e(t);else{for([].slice.call(t.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach(function(t){return e(t)});t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);var r=t.textContent;"="===r.substr(0,1)&&""!==r.substr(1,1)&&(t.textContent="'".concat(r,"'"))}}})}),t}(n),e&&e.settings.exportConvertNegative&&[].slice.call(n[0].querySelectorAll("td")).forEach(function(t){t.textContent=t.textContent.replace(/^(.+)(-$)/,"$2$1")}),n},save:function(t,e,n){var i=(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],a="string"==typeof i&&/\b(xlsx|xls)\b/g.test(i),s=new Blob([t],{type:"application/csv;charset=utf-8;"});if(n&&!a){for(var r=[255,254],o=0;o<t.length;++o){var l=t.charCodeAt(o);r.push(255&l),r.push(l/256>>>0)}s=new Blob([new Uint8Array(r)],{type:"text/plain;charset=UTF-16LE;"})}if(window.URL.createObjectURL){a&&(s=new Blob([t],{type:"application/vnd.ms-excel;charset=utf-8;"}));var c=URL.createObjectURL(s),d=document.createElement("a");d.href=c,d.download=e,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}else{var u=document.createElement("a");u.href=this.base64(t),u.download=e,document.body.appendChild(u),u.click(),document.body.removeChild(u)}},datasetToHtml:function(t){for(var e="<tbody>",n=function(n,i){e+="<tr>",Object.keys(t[n]).forEach(function(i,a){t[n]&&Object.prototype.hasOwnProperty.call(t[n],i)&&(e+="<td>".concat(t[n][i],"</td>"))}),e+="</tr>"},i=0,a=t.length;i<a;i++)n(i);return e+="</tbody>",$("<table></table>").append(e)},appendRows:function(t,e,n){var i,a=(i=e)&&(i instanceof jQuery||i.constructor.prototype.jquery)?e:$(e);e=a[0];var s="",r=e.querySelector("tbody");return r.innerHTML="",t.forEach(function(t,e){!function t(e,i){if(!e._isFilteredOut){var a=n.rowHtml(e,i,i,!1,!1,i,!0),r=document.createElement("tr");if(r.innerHTML=a.left+a.center+a.right,s+=r.outerHTML,e.children)for(var o=0,l=e.children.length;o<l;o++)t(e.children[o],o)}}(t,e)}),r.insertAdjacentHTML("beforeend",s),a},base64:function(t){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(t)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(t)))},copyToDataSet:function(t,e,n,i,a){for(var s=function(t,e,n,i){for(var a=0,s=t.length;a<s;a++){var r=e.columns[i];r.formatter!==Na.Readonly&&("input"===r.editor.name?("integer"===r.filterType||"decimal"===r.filterType||"number"===r.filterType)&&isNaN(t[a].trim())||(n[r.field]=t[a]):"input"===r.editor.name&&(isNaN(Date.parse(t[a]))||(n[r.field]=new Date(t[a])))),i++}},r=t.length,o=a.settings.columns.length,l=0;l<r;l++){var c=t[l].split("\t"),d=n;if(e<i.length){var u=i[e];s(c,a.settings,u,d)}else{for(var h={},p=0;p<o;p++)h[a.settings.columns[p].field]="";s(c,a.settings,h,d),i.push(h)}e++}a.renderRows(),a.syncSelectedUI(),a.pagerRefresh("bottom")},exportToExcel:function(t,e,n,i){var a,s={worksheet:e||"Worksheet",table:Ra.cleanExtra(n,i)[0].innerHTML};t="".concat(t||i.element[0].id||"Export",".xls"),Ra.save((a=s,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,function(t,e){return a[e]})),t)},exportToCsv:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",i=arguments.length>3?arguments[3]:void 0,s=function(t){return t&&"object"===a(t)&&t.constructor===Object},r=function(t){return/^(false|0+|null)$/gi.test(t)},o={firstLine:!0,char:",",flexChar:!0,flexUtf8:!0};if("sep=,"!==n&&!r(n)){var l=function(t){return'"'!==t?t:o.char};if(s(n))o.firstLine=!r(n.firstLine),o.flexChar=!r(n.flexChar),o.flexUtf8=!r(n.flexUtf8),"string"!=typeof n.char||1!==n.char.length||r(n.char)||(o.char=l(n.char));else if("string"==typeof n)if(1!==n.length||r(n)){if(/^sep=.$/.test(n)){var c=n.replace("sep=","");o.char=r(c)?o.char:l(c)}}else o.char=l(n)}var d=function(t,e){var n=e&&o.flexChar?"\t":o.char,i=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach(function(t){var e=[];[].slice.call(t.querySelectorAll("td, th")).forEach(function(t){return e.push(t.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())}),i.push(e.join('"'.concat(n,'"')))}),o.firstLine&&(o.flexUtf8&&!e||!o.flexUtf8&&","!==o.char)&&i.unshift(["sep=".concat(o.char)]),"".concat(o.flexUtf8?"":"\ufeff",'"').concat(i.join('"\n"'),'"')},u=Ra.cleanExtra(e,i),h=!/^[\u0000-\u007f]*$/.test(u[0].textContent)&&o.flexUtf8,p=d(u,h);t="".concat(t||i.element[0].id||"Export",".csv"),Ra.save(p,t,h)}},Oa=(Ia=C.equals,Ma=function(t,e){return t.reduce(function(t,n){var i,a=function(t,e){for(var n={},i=0,a=e.length;i<a;i++)n[e[i]]=t[e[i]];return n}(n,e);return i=a,t.some(function(t){return Ia(t,i)})||t.push(a),t},[])},La=function(t,e){var n=[];return t.map(function(t,i){for(var a in e)if(e[a]!==t[a])return;t.idx=i,n.push(t)}),n},(Pa=function(t,e){return Ma(t,e).map(function(e){return{key:e,values:La(t,e).map(function(t){return t})}})}).register=function(t,e){return Pa[t]=function(t,n,i){return this.extra=i,Pa(t,n).map(e,this)}},Pa);Oa.register("none",function(t){return $.extend({},t.key,{values:t.values})}),Oa.register("sum",function(t){var e=this.extra,n=t.values.map(function(t){return t[e]}).filter(function(t){return null!=t});return $.extend({},t.key,{values:t.values},{sum:n.reduce(function(t,e){return Number(t)+Number(e)},0)})}),Oa.register("max",function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{max:Math.max.apply(Math,c(t.values.map(function(t){return t[e]}).filter(function(t){return null!=t})))})}),Oa.register("min",function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{min:Math.min.apply(Math,c(t.values.map(function(t){return t[e]}).filter(function(t){return null!=t})))})}),Oa.register("avg",function(t){var e=this.extra,n=t.values.map(function(t){return t[e]}).filter(function(t){return null!=t});return $.extend({},t.key,{values:t.values},{avg:n.reduce(function(t,e){return Number(t)+Number(e)},0)/n.length})}),Oa.register("count",function(t){var e=this.extra,n=t.values.map(function(t){return t[e]}).filter(function(t){return null!=t});return $.extend({},t.key,{values:t.values},{count:n.length})}),Oa.register("list",function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{list:t.values.map(function(t){for(var n=[],i=0,a=e.list.length;i<a;i++){var s=!!e.exclude&&t[e.exclude];t[e.list[i]]&&!s&&n.push({value:t[e.list[i]],key:e.list[i]})}return n})})});var Ba={aggregate:function(t,e){for(var n={},i=this,a=0,s=e.length;a<s;a++)e[a].aggregator&&function(){var s=e[a].field;i.sum=function(t,e){if(e._isFilteredOut)return t;var n;n=s.indexOf(".")>-1?s.split(".").reduce(function(t,e){return t?t[e]:""},e):e[s],n=Number(n);var i=D.decimalPlaces(n),a=D.decimalPlaces(t);return Number((t+n).toFixed(Math.max(i,a)))};var r=t.reduce(i[e[a].aggregator],0);if(s.indexOf(".")>-1)for(var o=n,l=0,c=s.split(".").length;l<c;l++)l===s.split(".").length-1?o[s.split(".")[l]]=r:(s.split(".")[l]in o||(o[s.split(".")[l]]={}),o=o[s.split(".")[l]]);else n[s]=r}();return n}},_a="lookup-datagrid";function Fa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=[];return null!=t&&(null==t?void 0:t.length)||null!=e&&(null==e?void 0:e.length)?null!=e&&(null==e?void 0:e.length)?t.length?(t.forEach(function(t){var a=e.find(function(e){return e.name===t.name});i.push(a||{name:t.name,value:"".concat(t.value,"-").concat(n)})}),i):e:i=t.map(function(t){return{name:t.name,value:"".concat(t.value,"-").concat(n)}}):i}var za={click:null,field:"id",title:null,icon:"icon-search-list",buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null,clearable:!1,attributes:null,tabbable:!0,allowDuplicates:!1};function Ha(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,za),this.init()}function qa(t,e,n,i,a,s,r,o,l){if(s.align&&t.addClass("l-".concat(s.align,"-text")),s.maxLength&&t.attr("maxlength",s.maxLength),s.uppercase&&t.addClass("uppercase-text"),s.mask&&"function"==typeof s.mask){var c=s.mask(e,n,i,s,l);t.mask({pattern:c,mode:s.maskMode})}else if(s.maskOptions&&"function"==typeof s.maskOptions){var d=s.maskOptions(e,n,i,s,l);t.mask(d)}else s.mask&&t.mask({pattern:s.mask,mode:s.maskMode});var u={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:R.currentLocale.data.numbers?R.currentLocale.data.numbers.group:",",decimal:R.currentLocale.data.numbers?R.currentLocale.data.numbers.decimal:".",negative:R.currentLocale.data.numbers?R.currentLocale.data.numbers.minusSign:"-"}},process:"number"},h=!1;s.maskOptions&&(h=!0),s.numberFormat&&(h=!0,u={patternOptions:{decimalLimit:s.numberFormat.maximumFractionDigits}}),s.maskOptions&&"function"==typeof s.maskOptions&&(h=!1),h&&(s.maskOptions=C.extend(!0,{},u,s.maskOptions),t.mask(s.maskOptions)),s.align&&"right"===s.align||t.removeClass("is-number-mask")}Ha.prototype={get isFocused(){var t,e=document.activeElement,n=this.element.is(e),i=this.element.parent(".lookup-wrapper")[0].contains(e),a=null===(t=this.modal)||void 0===t||null==t?void 0:t.element[0].contains(e);return n||i||a},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var t,e=this,n=this.element,i=(t="lookup-wrapper",n.is(".input-xs")&&(t+=" xs"),n.is(".input-sm")&&(t+=" sm"),n.is(".input-lg")&&(t+=" lg"),t);if(this.element.is(".has-actions")&&(i+=" has-actions-wrapper"),this.isInlineLabel)this.inlineLabel.addClass(i);else if(this.container=$('<span class="'.concat(i,'"></span>')),this.element.is(".field-options")){var a=this.element.closest(".field").find(".btn-actions");n.add(a).add(a.next(".popupmenu")).wrapAll(this.container)}else n.wrap(this.container);var s=this.element.next();if(s.is("button.trigger"))this.icon=s;else{this.icon=$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon(this.settings.icon),"\n      </button>"));var r=this.icon.children(".icon");"icon-search-list"!==this.settings.icon?r.addClass("has-custom-icon"):m.rtl&&r.addClass("icon-rtl-rotate")}n.after(this.icon),n.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),n.attr("data-mask")&&n.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.settings.clearable&&n.searchfield({clearable:!0,attributes:this.settings.attributes,tabbable:!1}),this.settings.clearable&&this.settings.clear&&n.on("cleared",function(t){e.settings.clear(t,e,e.settings.clearArguments)}),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===n.attr("autocomplete")&&n.attr("autocomplete","off"),Array.isArray(this.settings.attributes)&&(C.addAttributes(n,this,this.settings.attributes,"input"),C.addAttributes(this.icon,this,this.settings.attributes,"trigger"))},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'));var t="".concat(R.translate("Lookup"),". ").concat(R.translate("PressDown")),e=this.label.children("span.audible");e.length?e.text(t):this.label.append('<span class="audible">'.concat(t,"</span>"));var n=R.translate("LookupTriggerButton");this.icon.children("span.audible").text(n)},handleEvents:function(){var t=this;this.icon.on("click.lookup",function(e){t.openDialog(e)}),this.element.on("keyup.lookup",function(e){$("#autocomplete-list").length>0||40===e.which&&t.openDialog(e)})},setTooltip:function(){var t=this;setTimeout(function(){var e=t.element[0].scrollWidth>t.element[0].offsetWidth,n=t.element.data("tooltip");e?t.element.tooltip({content:t.element.val()}):n&&!e&&n.destroy()},100)},openDialog:function(t){var e=this;if(!(this.isChanged=!1,this.isOpen||!1===e.element.triggerHandler("beforeopen")||e.isDisabled()||e.isReadonly()&&!e.element.hasClass("is-not-editable")))if(e.settings.click)e.settings.click(t,this,e.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow)return this.element.triggerHandler("start"),void this.settings.beforeShow(this,function(t){return t&&e.createGrid(t),"boolean"==typeof t&&!1===t?(e.isOpen=!1,!1):(e.createModal(),e.element.triggerHandler("complete"),e.element.trigger("open",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid),!0)});if(this.settings.options){e.createModal(),e.element.trigger("open",[e.modal,e.grid]),e.modal.element.find(".btn-actions").removeClass("is-selected"),e.grid&&e.grid.cellNode(0,0,!0).attr("tabindex","0");var n=e.modal.element.find(".toolbar .more > .btn-actions");n.length&&setTimeout(function(){C.fixSVGIcons(n)},600),e.element.trigger("afteropen",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid)}}},createModal:function(){var t,e,n,i,a,s,r=this,o='<div id="'.concat(_a,'"></div>'),l=$('label[for="'.concat(r.element.attr("id"),'"]')),c=r.isInlineLabel?r.inlineLabelText:l.length?l.clone().find("span").remove().end().text():r.settings.title?r.settings.title:null!==(t=r.settings)&&void 0!==t&&null!==(e=null==t?void 0:t.options)&&void 0!==e&&null!==(n=null==e?void 0:e.toolbar)&&void 0!==n&&(null==n?void 0:n.title)?null===(i=r.settings)||void 0===i||null===(a=null==i?void 0:i.options)||void 0===a||null===(s=null==a?void 0:a.toolbar)||void 0===s||null==s?void 0:s.title:"",d=this.settings.modalContent;d&&d instanceof jQuery&&(o=d,d.show()),!d||d instanceof jQuery||(o=d);var u=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===u.length||!r.settings.autoApply&&0===u.length)&&(u=[{text:R.translate("Cancel"),click:function(t,e){e.oldActive=r.icon,e.close()}},{text:R.translate("Apply"),click:function(t,e){r.insertRows(),e.oldActive=r.icon,e.close()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===u.length&&r.settings.autoApply&&(u=[{text:R.translate("Cancel"),click:function(t,e){e.oldActive=r.icon,e.close()}},{text:R.translate("Apply"),click:function(t,e){e.oldActive=r.icon,e.close(),r.insertRows()},isDefault:!0}]);var h=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;$("body").modal({triggerButton:this.element,title:c,content:o,buttons:u,cssClass:"lookup-modal".concat(h?"":" lookup-no-search"),attributes:Fa(this.settings.attributes,[],"modal")}).off("open.lookup").on("open.lookup",function(){r.createGrid()}).off("close.lookup").on("close.lookup",function(){delete r.isOpen,r.element.triggerHandler("close",[r.modal,r.grid]),r.setTooltip()}),r.modal=$("body").data("modal"),this.settings.title||r.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),r.modal.element.off("afterclose.lookup").on("afterclose.lookup",function(){r.closeTearDown()}),setTimeout(function(){$(".modal.is-visible .searchfield").on("keypress.lookup",function(t){return 13!==t.keyCode})},300)},closeTearDown:function(){var t=$(".modal.is-visible .searchfield").off("keypress.lookup");t.data()&&t.data("searchfield")&&t.data("searchfield").destroy(),t.data()&&t.data("searchfield")&&(t.data("searchfield").destroy(),t.removeData()),t=null,this.grid&&this.grid.destroy&&($(this.grid.element).off("selected.lookup"),this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var t={},e=[],n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var s=0;s<i.length;s++)for(var r=0;r<i[s].length;r++)!0!==t[i[s][r]]&&(e[e.length]=i[s][r],t[i[s][r]]=!0);return e},createGrid:function(t){var e,n,i,a,s=this,r=this;t?(a=t,_a=t.attr("id"),r.settings.options=t.data("datagrid").settings):a=r.modal.element.find("#".concat(_a)),this.settings.minWidth&&(a=this.applyMinWidth(a)),r.settings.options&&("single"===r.settings.options.selectable&&r.settings.autoApply&&(r.settings.options.cellNavigation=!1,a.find("tr").addClass("is-clickable")),r.settings.options.isList=!0,r.settings.attributes&&(r.settings.options.attributes=Fa(r.settings.attributes,[],"datagrid")),a.data("datagrid")||a.datagrid(r.settings.options)),r.grid=a.data("datagrid"),!this.settings.title&&r.modal&&r.modal.element.find(".title").not(".selection-count").remove();var o=null===(e=this.settings)||void 0===e||null===(n=null==e?void 0:e.options)||void 0===n||null===(i=null==n?void 0:n.toolbar)||void 0===i||null==i?void 0:i.keywordFilter;!o&&r.modal&&r.modal.element.find(".toolbar").appendTo(r.modal.element.find(".modal-header")),o&&r.grid&&(!r.grid.filterExpr||r.grid.filterExpr&&r.grid.filterExpr[0]&&""!==r.grid.filterExpr[0].value)&&r.grid.keywordSearch(""),a.off("selected.lookup");var l=r.element.val();l&&!this.settings.options.source&&r.selectGridRows(l),this.settings.options.source&&a.off("afterpaging.lookup").on("afterpaging.lookup",function(t,e){if(!r.settings.options.source||"multiple"!==r.settings.options.selectable){var n=r.element.val();s.selectGridRows(n)}s.element.trigger("afterpaging",[e,s])}),this.settings.options&&a.on("selected.lookup",function(t,e,n,i){r.settings.options.source&&"multiple"===r.settings.options.selectable?r.element.trigger("selected",[e,n,i,r]):(s.isChanged=!0,"deselect"===n&&(r.grid.recentlyRemoved||(r.grid.recentlyRemoved=[]),r.grid.recentlyRemoved.push(i)),e&&0!==e.length?(r.settings.validator&&r.settings.validator(r.element,r.modal,r.grid),"single"===r.settings.options.selectable&&r.settings.autoApply&&"deselectall"!==n&&(r.modal.close(),r.insertRows()),r.element.trigger("selected",[e,n,i,r])):"deselect"===n&&r.element.trigger("selected",[e,n,i,r]))}),this.settings.options.source&&this.grid.element.one("afterrender.lookup",function(){var t,e=s.settings.options.source&&(null===(t=s.selectedRows)||void 0===t||null==t?void 0:t.length);if(!s.initValues||s.initValues&&!s.initValues.length||e)if(s.initValues=[],e)setTimeout(function(){var t,e,n=null===(t=s.grid)||void 0===t||null===(e=null==t?void 0:t.pagerAPI)||void 0===e||null==e?void 0:e.state;if(n){var i={min:n.activePage*n.pagesize-n.pagesize,max:n.activePage*n.pagesize-1};s.selectedRows.forEach(function(t){var e;s.initValues.push({value:t.data[s.settings.field],visited:(e=t,e.pagingIdx>=i.min&&e.pagingIdx<=i.max)})}),s.grid._selectedRows=s.selectedRows.slice(),s.grid.syncSelectedRows(),s.grid.syncSelectedUI()}},310);else{var n=s.element.val();n&&(n.indexOf(s.settings.delimiter)>1?n.split(s.settings.delimiter):[n]).forEach(function(t){s.initValues.push({value:t,visited:!!s.grid.settings.dataset.filter(function(e){return function(t,e){return(t[s.settings.field]||"").toString()===e.toString()}(e,t)}).length})})}})},updateSelectedRows:function(t){var e=this;if(this.settings.options.source&&(t=Array.isArray(t)?t:[],this.selectedRows.length!==t.length)){this.selectedRows=t.slice();var n=this.selectedRows.map(function(t){return t.data?t.data[e.settings.field]:""}).join(this.settings.delimiter);this.grid&&(this.grid._selectedRows=this.selectedRows.slice(),this.grid.syncSelectedRows(),this.grid.syncSelectedUI()),this.element.val(n).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows])}},selectGridRows:function(t){var e=t,n=!1;if(t){if(this.grid&&this.settings.options.source)for(var i=this.grid._selectedRows.length-1;i>-1;i--)isNaN(this.grid._selectedRows[i].idx)&&this.grid._selectedRows.splice(i,1);if(e.indexOf(this.settings.delimiter)>1){for(var a=e.split(this.settings.delimiter),s=!1,r=!1,o=0;o<a.length;o++){if(r=!1,this.grid.recentlyRemoved)for(var l=0;l<this.grid.recentlyRemoved.length;l++)this.grid.recentlyRemoved[l][this.settings.field].toString()===a[o].toString()&&(r=!0);if(!r&&(s=this.selectRowByValue(this.settings.field,a[o]),this.grid&&this.settings.options.source&&!s)){for(var c=!1,d=0;d<this.grid._selectedRows.length;d++)this.grid._selectedRows[d].data[this.settings.field].toString()===a[o].toString()&&(c=!0);if(this.grid.recentlyRemoved)for(var u=0;u<this.grid.recentlyRemoved.length;u++)this.grid.recentlyRemoved[u][this.settings.field].toString()===a[o].toString()&&(c=!0);if(!c){var h={};h[this.settings.field]=a[o],this.grid._selectedRows.push({data:h})}n=!0}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(a.length," ").concat(R.translate("Selected"))),this.grid.syncSelectedUI()),this.selectRowByValue(this.settings.field,e)}else{var p=[];p.push(e);for(var f=!1,g=!1,m=0;m<p.length;m++){if(this.grid.recentlyRemoved)for(var v=0;v<this.grid.recentlyRemoved.length;v++)this.grid.recentlyRemoved[v][this.settings.field].toString()===p[m].toString()&&(g=!0);if(!g){if(f=this.selectRowByValue(this.settings.field,p[m]),this.grid&&this.settings.options.source&&!f){for(var b=!1,y=0;y<this.grid._selectedRows.length;y++)this.grid._selectedRows[y].data[this.settings.field].toString()===p[m].toString()&&(b=!0);if(this.grid.recentlyRemoved)for(var w=0;w<this.grid.recentlyRemoved.length;w++)this.grid.recentlyRemoved[w][this.settings.field].toString()===p[m].toString()&&(b=!0);b||({}[this.settings.field]=p[m]),n=!0}if(f&&this.grid.recentlyRemoved)for(var x=0;x<this.grid.recentlyRemoved.length;x++)this.grid.recentlyRemoved[x][this.settings.field].toString()===p[m].toString()&&(n=!1)}}n&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(p.length," ").concat(R.translate("Selected"))),this.grid.syncSelectedUI())}}},selectRowByValue:function(t,e){if(!this.settings.options)return!1;var n=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,i=[];if(!n)return!1;for(var a=0;a<n.length;a++){var s,r=!1;if("function"==typeof this.settings.match&&this.settings.match(e,n[a],this.element,this.grid)&&(r=!0),"function"!=typeof this.settings.match&&(null===(s=n[a][t])||void 0===s||null==s?void 0:s.toString())===(null==e||null==e?void 0:e.toString())&&(r=!0),r){var o=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(a)):a;i.push(o)}}return!!(this.grid&&i.length>0)&&(this.grid.selectRows(i,!1,!0),!0)},insertRows:function(){if(this.isChanged||this.settings.options.source){var t=[];this.selectedRows=this.grid.selectedRows().slice();for(var e=0;e<this.selectedRows.length;e++){var n;n="function"==typeof this.settings.field?this.settings.field(this.selectedRows[e].data,this.element,this.grid):this.selectedRows[e].data[this.settings.field],t.push(n);var i=this.selectedRows[e].idx;this.settings.options.dataset&&this.settings.options.dataset[i]&&delete this.settings.options.dataset[i]._selected}this.settings.allowDuplicates||(t=t.filter(function(e,n){return t.indexOf(e)===n})),this.element.val(t.join(this.settings.delimiter)).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()}},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1).removeClass("is-not-editable"),this.element.parent().removeClass("is-disabled"),this.icon.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.element.closest(".field").addClass("is-disabled"),this.icon.prop("disabled",!0)},readonly:function(){this.element.prop("readonly",!0),this.icon.prop("disabled",!1)},applyAutoWidth:function(){var t=this.element.val(),e=t.length,n=t===t.toUpperCase(),i=!isNaN(t);this.element.attr("size",e+(n&&!i?2:1))},applyMinWidth:function(t){if(null==this.settings.minWidth)return t;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var e="".concat(this.settings.minWidth,"px");t.css({"min-width":e})}return t},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(t){this.icon.attr("tabIndex",t?0:-1)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},updateDataset:function(t,e){this.settings.options.dataset=t,e&&e.activePage&&(this.settings.options.activePage=e.activePage),e&&e.pagesize&&(this.settings.options.pagesize=e.pagesize),this.grid&&this.grid.updateDataset(t,e)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),$.removeData(this.element[0],"lookup")}},$.fn.lookup=function(t){return this.each(function(){var e=$.data(this,"lookup");e?e.updated(t):e=$.data(this,"lookup",new Ha(this,t))})};var Va={Input:function(t,e,n,i,a,s,r,o){this.name="input",this.originalValue=n,this.useValue=!!a.inlineEditor,this.init=function(){a.inlineEditor?this.input=i.find("input"):this.input=$('<input type="'.concat(a.inputType||"text",'" autocomplete="off"/>')).appendTo(i),qa(this.input,t,e,n,0,a,0,0,o)},this.val=function(t){var e;return t&&this.input.val(t),a&&a.numberFormat&&"percent"===a.numberFormat.style?(e=this.input.val().trim().replace(/(\s%?|%)$/g,""),R.parseNumber(e)/100):a.numberFormat?R.parseNumber(this.input.val(),a.numberFormat):this.input.val()},this.focus=function(){this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;a.inlineEditor||setTimeout(function(){t.input.remove()},0)},this.init()},Textarea:function(t,e,n,i,a,s,r){this.name="textarea",this.originalValue=n,this.init=function(){i.addClass("datagrid-textarea-cell-wrapper");var t=i.get(0).scrollHeight,e=a.editorOptions&&a.editorOptions.minHeight?'style="min-height: '.concat(a.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(e,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(i);var n=a.editorOptions?a.editorOptions:{};"characterCounter"in n||(n.characterCounter=!1),this.api=this.input.data("autogrow-start-height",t).textarea(a.editorOptions).data("textarea"),this.input.on("click.textareaeditor",function(t){t.stopPropagation()}),a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text")},this.val=function(t){return t&&this.input.focus().val(t),this.input.val()},this.focus=function(){this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;i.removeClass("datagrid-textarea-cell-wrapper"),setTimeout(function(){t.input.off("click.textareaeditor"),t.input.remove()},0)},this.init()},Editor:function(t,e,n,i,a,s,r){this.name="editor",this.originalValue=n,this.init=function(){var t=this,e=$.extend({},{buttons:{editor:["header1","header2","separator","bold","italic","underline","separator","foreColor","separator","justifyLeft","justifyCenter","justifyRight"],source:[]},excludeButtons:{editor:[]}},a.editorOptions);this.editorWidth=r.setUnit(e.width||i.outerWidth()),delete e.width,i[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(u.unescapeHTML(n),"</div>\n        </div>"),this.td=i.closest("td"),this.input=$(".editor",i),this.input.popover({content:$(".editor-wrapper",i),placementOpts:{x:0,y:"-".concat(parseInt(i[0].style.height,10)+35),parent:this.td,parentXAlignment:R.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup",onHidden:function(){r.commitCellEdit(t.input)}}).editor(e).on("keydown.editor",function(e){var n=e.which||e.keyCode||e.charCode||0;if((e.ctrlKey||e.metaKey)&&(13===n||10===n)){var i=t.input.data("tooltip");i&&(i.hide(),r.setNextActiveCell(e))}}),C.fixSVGIcons($("#editor-popup"))},this.val=function(){return u.escapeHTML(this.input.html())},this.focus=function(){var t=this;setTimeout(function(){t.input.focus()},0)},this.destroy=function(){i.removeAttr("style"),r.quickEditMode=!1,this.input.data("editor")&&(this.input.destroy(),this.input.remove())},this.init()},Checkbox:function(t,e,n,i,a,s,r){this.name="checkbox",this.originalValue=n,this.useValue=!0,this.container=i,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(i),this.input.after('<label class="checkbox-label"></label>'),a.align&&this.input.addClass("l-".concat(a.align,"-text"))},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=a.isChecked?a.isChecked(t):t,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(s)),this.input.prop("checked",e)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var t=this;setTimeout(function(){t.input.next(".checkbox-label").remove(),t.input.remove()},0)},this.init()},Colorpicker:function(t,e,n,i,a,s,r){this.name="colorpicker",this.originalValue=n,this.useValue=!0,n=u.stripTags(n),this.init=function(){this.input=$('<input id="colorpicker-'.concat(e,'" name="colorpicker-').concat(e,'" class="colorpicker" value="').concat(n,'" type="text" autocomplete="off"/>')).appendTo(i),this.input.colorpicker(a.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var e=this;this.input.trigger("openlist"),r.rowNodes(t).removeClass("is-hover-row"),this.input.focus(),r.settings.selectOnEdit&&this.input.select(),this.input.off("listclosed").on("listclosed",function(){r.commitCellEdit(e.input),i.parent("td").focus()})},this.destroy=function(){},this.init()},MultiSelect:function(t,e,n,i,s,r,o,l){this.name="multiselect",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){if(s.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="multiselect"></select>').appendTo(i),s.options){var c,d,u;n=o.fieldValue(l,s.field);for(var h=s.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,p=0;p<s.options.length;p++)c=$("<option></option>"),d=s.options[p],u=s.caseInsensitive&&"string"==typeof d.value?d.value.toLowerCase():d.value,(d.selected||h===u)&&(c.attr("selected","true"),this.originalValue=u),c.attr("value",d.value).attr("id",d.id).attr("data-type",a(d.value)),c.text(d.label),this.input.append(c)}var f=s.editorOptions||{};f.cssClass&&/is-editing/g.test(f.cssClass)||(f.cssClass=f.cssClass||"",f.cssClass+=" is-editing"),this.input.multiselect(f),this.input.data("multiselect").settings.sourceArguments={column:s,container:i,grid:o,cell:e,event:r,row:t,rowData:l,value:n}}},this.val=function(t){if(this.datasetValue=t,void 0!==t){var e=s.caseInsensitive&&"string"==typeof t?t.toLowerCase():t;this.input.val(t),this.input.find("option").each(function(){var t=$(this),n=t.attr("value"),i=t.attr("data-type"),a=n;"number"===i?a=parseFloat(n):"boolean"===i?a="true"===n:"string"===i&&s.caseInsensitive&&(a=n.toLowerCase()),a===e&&t.attr("selected","true")})}var n=this.input.find(":selected"),i=n.attr("value"),a=n.attr("data-type");return n.length>1&&(i=[],n.map(function(t,e){return i.push(e.value)})),"number"===a?i=parseFloat(i):"boolean"===a&&(i="true"===i),void 0===i&&(i=n.text()),i},this.focus=function(){var e=this;if("click"===r.type?(this.input.trigger("openlist"),o.rowNodes(t).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var n=$("#dropdown-search")[0];if(n)if("number"==typeof n.selectionStart)n.selectionEnd=n.value.length,n.selectionStart=n.selectionEnd;else if(void 0!==n.createTextRange){var a=n.createTextRange();a.collapse(!1),a.select()}}this.input.off("listclosed").on("listclosed",function(t,n){o.commitCellEdit(e.input),"select"!==n?"tab"===n&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Dropdown:function(t,e,n,i,s,r,o,l){this.name="dropdown",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){var c=this;if(s.inlineEditor)this.input=i.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(i),s.options){var d,u,h;n=o.fieldValue(l,s.field);for(var p=s.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,f=0;f<s.options.length;f++)d=$("<option></option>"),u=s.options[f],h=s.caseInsensitive&&"string"==typeof u.value?u.value.toLowerCase():u.value,(u.selected||p===h)&&(d.attr("selected","true"),this.originalValue=h),d.attr("value",u.value).attr("id",u.id).attr("data-type",a(u.value)),d.text(u.label),this.input.append(d)}var g=s.editorOptions||{};g.cssClass&&/is-editing/g.test(g.cssClass)||(g.cssClass=g.cssClass||"",g.cssClass+=" is-editing"),this.input.dropdown(g),this.input.on("requestend",function(){c.val(c.datasetValue)}),this.input.data("dropdown").settings.sourceArguments={column:s,container:i,grid:o,cell:e,event:r,row:t,rowData:l,value:n}}},this.val=function(t){if(this.datasetValue=t,void 0!==t){var e=s.caseInsensitive&&"string"==typeof t?t.toLowerCase():t;this.input.val(t),this.input.find("option").each(function(){var t=$(this),n=t.attr("value"),i=t.attr("data-type"),a=n;"number"===i?a=parseFloat(n):"boolean"===i?a="true"===n:"string"===i&&s.caseInsensitive&&(a=n.toLowerCase()),a===e&&t.attr("selected","true")})}var n=this.input.find(":selected"),i=n.attr("value"),a=n.attr("data-type");return"number"===a?i=parseFloat(i):"boolean"===a&&(i="true"===i),void 0===i&&(i=n.text()),i},this.focus=function(){var e=this;if("click"===r.type?(this.input.trigger("openlist"),o.rowNodes(t).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!o.settings.selectOnEdit){var n=$("#dropdown-search")[0];if(n)if("number"==typeof n.selectionStart)n.selectionEnd=n.value.length,n.selectionStart=n.selectionEnd;else if(void 0!==n.createTextRange){var a=n.createTextRange();a.collapse(!1),a.select()}}this.input.off("listclosed").on("listclosed",function(t,n){o.commitCellEdit(e.input),"select"!==n?"tab"===n&&setTimeout(function(){i.parent("td").focus()},100):i.parent("td").focus()})},this.destroy=function(){},this.init()},Date:function(t,e,n,i,a,s,r){this.name="date",this.originalValue=n,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.dateFormat||(a.editorOptions.dateFormat=a.dateFormat),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.datepicker(a.editorOptions)},this.val=function(n){return"0000"!==n&&"000000"!==n&&"00000000"!==n||(n=""),n&&this.input.val(n),Na.Date(t,e,this.input.val(),a,!0)},this.focus=function(){var t=this;this.input.focus(),r.settings.selectOnEdit&&this.input.select(),"click"===s.type&&$(s.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.input.on("listclosed",function(){setTimeout(function(){t.input.trigger("focusout"),i.parent().focus(),r.setNextActiveCell(s)},1)})},this.destroy=function(){var t=this;setTimeout(function(){r.quickEditMode=!1,t.input.remove()},0)},this.init()},Fileupload:function(t,e,n,i,a,s,r){var o=this,l=C.mergeSettings(void 0,a.editorOptions,{allowedTypes:"*"}),c=l.allowedTypes.split(/[\s|]+/g),d=C.uniqueId(this,"fileupload-".concat(t,"-").concat(e,"-")),h=l.useMultiple?" multiple":"",p=l.isDisabled?" disabled":"",f="";if(1===c.length)"*"!==c[0]&&(f=".".concat(u.ensureAlphaNumeric(c[0])));else for(var g=0,m=c.length;g<m;g++)f+=".".concat(u.ensureAlphaNumeric(c[g])+(g!==m-1?",":""));""!==f&&(f=' accept="'.concat(f,'"')),this.name="fileupload",this.originalValue=n,this.status="init",this.useValue=!0,this.init=function(){d=u.ensureAlphaNumeric(d),h=u.ensureAlphaNumeric(h),p=u.ensureAlphaNumeric(p),this.input=$('<input id="'.concat(d,'" name="').concat(d,'" class="fileupload" type="file" ').concat(f).concat(h).concat(p,' autocomplete="off"/>')),i.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(a.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(t){return t?(t=u.stripTags(t),this.input.attr("value",t),t):this.input.val()},this.focus=function(){var t=function(){""!==o.originalValue&&(o.status="clear"),r.commitCellEdit(o.input)},e=function(){o.api&&($("body").one("focusin.fileuploadeditor",function(){setTimeout(function(){"change"!==o.status&&(o.status="cancel",r.commitCellEdit(o.input))},100)}),o.api.fileInput.trigger("click"))};if(o.input.on("change.fileuploadeditor",function(){o.status="change",r.commitCellEdit(o.input)}),"keydown"===s.type){var n=s.which||s.keyCode||s.charCode||0;8===n||46===n?t():13===n||10===n?e():r.commitCellEdit(o.input)}if("click"===s.type){var i=$(s.target);i.is(".icon-close")?t():i.is(".icon-fileupload")?e():r.commitCellEdit(o.input)}},this.destroy=function(){o.input.off("change.fileuploadeditor"),r.quickEditMode=!1,o.api&&o.api.destroy()},this.init()},Time:function(t,e,n,i,a,s,r){this.name="time",this.originalValue=n,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.api=this.input.timepicker(a.editorOptions).data("timepicker")},this.val=function(t){return t&&this.input.val(t),this.input.val()},this.focus=function(){var t=this;this.input.focus(),r.settings.selectOnEdit&&this.input.select(),"click"===s.type&&$(s.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.api.trigger.on("hide.editortime",function(){setTimeout(function(){t.input.trigger("focusout"),i.parent().focus(),r.setNextActiveCell(s)},1)})},this.destroy=function(){var t=this;t.api&&t.api.trigger&&t.api.trigger.off("hide.editortime"),setTimeout(function(){r.quickEditMode=!1,t.input.remove()},0)},this.init()},Lookup:function(t,e,n,i,a,s,r,o){this.name="lookup",this.originalValue=n,this.init=function(){this.input=$('<input class="lookup '.concat("right"===a.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(i),qa(this.input,t,e,n,0,a,0,0,o),a.editorOptions||(a.editorOptions={}),a.editorOptions.options||(a.editorOptions.options={}),a.editorOptions.options.toolbar||(a.editorOptions.options.toolbar={}),a.editorOptions.options.toolbar.title||(a.editorOptions.options.toolbar.title=a.name),void 0===a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.lookup(a.editorOptions),i.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:a,container:i,grid:r,cell:e,event:s,row:t,rowData:o,value:n}},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var t=this.input.data("lookup"),e=this.input.closest("td");"keydown"===s.type&&(this.input.focus(),r.settings.selectOnEdit&&this.input.select(),e.on("keydown.editorlookup",function(t){40===t.keyCode&&(t.preventDefault(),t.stopPropagation())})),"click"===s.type&&($(s.target).is("svg")?t.openDialog(s):(this.input.focus(),r.settings.selectOnEdit&&this.input.select(),e.on("touchcancel.editorlookup touchend.editorlookup",".trigger",function(){t.openDialog()}))),this.input.on("change.editorlookup",function(){r.quickEditMode=!1})},this.destroy=function(){var t=this,e=this.input.closest("td");setTimeout(function(){r.quickEditMode=!1,e.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),t.input.remove()},0)},this.init()},Autocomplete:function(t,e,n,i,a,s,r){this.name="autocomplete",this.originalValue=n,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(i),a.editorOptions||(a.editorOptions={}),a.editorOptions.width=i.parent().width(),a.editorOptions.offset={left:-1,top:"medium"===r.settings.rowHeight?1:5},a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(a.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){r.quickEditMode=!0,this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;setTimeout(function(){r.quickEditMode=!1,t.input.remove()},0)},this.init()},Spinbox:function(t,e,n,i,a,s,r){var o=this;this.name="spinbox",this.originalValue=n,this.useValue=!0,this.init=function(){if(a.inlineEditor)o.input=i.find("input");else{var t='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="\'+ ').concat(n,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');h.append(i,t,"<label><span><input>"),o.input=i.find("input"),a.editorOptions||(a.editorOptions={}),o.input.spinbox(a.editorOptions)}},this.val=function(t){return t&&o.input.val(t),parseInt(o.input.val(),10)},this.focus=function(){r.quickEditMode=!0,o.input.focus(),r.settings.selectOnEdit&&o.input.select()},this.destroy=function(){a.inlineEditor||setTimeout(function(){r.quickEditMode=!1;var t=o.val();o.input&&o.input.data("spinbox")&&o.input.data("spinbox").destroy(),o.input&&o.input.remove(),i.text(t)},0)},this.init()},Favorite:function(t,e,n,i,a,s,r){this.name="favorite",this.useValue=!0,this.originalValue=n,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:n?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(i),this.input=this.input.find("input")},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=a.isChecked?a.isChecked(t):t,"click"!==s.type&&("keydown"!==s.type||32!==s.keyCode)||$(s.target).is(".datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(s)),this.input.prop("checked",e),this.input.find("use").attr("href",e?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var t=this;setTimeout(function(){t.input.parent().remove()},0)},this.init()}},ja={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,selectOnEdit:!0,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"large",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,selectAllCurrentPage:!1,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,spacerColumn:!1,stickyHeader:!1,columnSizing:"all",twoLineHeader:!1,clickToSelect:!0,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,disableRowDeselection:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:R?R.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data",height:null},searchExpandableRow:!0,allowChildExpandOnMatchOnly:!1,allowChildExpandOnMatch:!1,attributes:null,allowPasteFromExcel:!1};function Wa(t,e){this.settings=C.mergeSettings(t,e,ja),this.element=$(t),e.dataset&&(this.settings.dataset=e.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=ja.frozenColumns.expandRowAcrossAllCells),this.init()}Wa.prototype={get pagerAPI(){var t;return this.tableBody&&this.tableBody.length&&(t=this.tableBody.data("pager")),t},init:function(){var t=$("html");this.isTouch=m.features.touch,this.isSafari=t.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.hasScrollbarY(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerAPI])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(t){var e=this.settings;if(t&&e.columns&&(!e.columns||e.columns.length)){for(var n={index:-1},i=0,a=e.columns.length;i<a;i++)e.columns[i].id===t&&(n.index=i);n.index>-1&&e.columns.splice(n.index,1)}},setInlineActionableMode:function(){var t=this.settings;if(t.columns&&(!t.columns||t.columns.length)){for(var e={index:-1},n=0,i=t.columns.length;n<i;n++)t.columns[n].inlineEditor&&(e.index=n);this.inlineMode=e.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(t,e){if(e||(e={}),t&&(e.type="filterrow"),this.settings.source)return e.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(e);this.loadData(this.settings.dataset,e)},firstRender:function(){if(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),this.settings.stickyHeader&&this.element.removeClass("datagrid").addClass("is-sticky"),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight){var t="short"===this.settings.rowHeight?"small":this.settings.rowHeight;t="normal"===this.settings.rowHeight?"large":t,this.hasLeftPane&&this.tableLeft.addClass("".concat(t,"-rowheight")),this.table.addClass("".concat(t,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(t,"-rowheight")),this.element.addClass("".concat(t,"-rowheight"))}this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},hasScrollbarY:function(){var t=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),e=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>t+2;this.hasVerticalScrollbar=!1!==e},addRow:function(t,e){var n,i,a=this,s=this,r=!1,o=0;e&&"top"!==e||(e="top",r=!0);var l={icon:"new",text:R.translate("New"),tooltip:R.translate("New")};(t=t||{}).rowStatus=t.rowStatus||l,this.saveDirtyRows();var c=this.settings.dataset;if(this.settings.groupable){c=this.originalDataset||c;var d=-1;if("string"==typeof e){var u=this.settings.groupable.fields[0],h=function(t,e,n,i){for(var a=0,s=t.length;a<s;a++){var r=i?s-1-a:a;if(t[r][e]===n)return r}return-1}(c,u,t[u],!r);d=h>-1?r?h:h+1:0,c.splice(d,0,t),o=d}else c.splice(e,0,t),o=e}else"string"==typeof e?(c[r?"unshift":"push"](t),o=r?o:c.length-1):(c.splice(e,0,t),o=e);this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(e),this._selectedRows.forEach(function(t){void 0!==t.pagingIdx&&t.pagingIdx>=o&&(t.idx++,t.pagingIdx++)}),this.clearCache(),this.renderRows(),this.settings.groupable&&(i=this.dataRowNode(o),o=this.visualRowIndex(i)),this.syncSelectedUI(),setTimeout(function(){s.setActiveCell(o,0),a.settings.groupable||(i=a.visualRowNode(o)),n={row:o,cell:0,target:i,value:t,oldValue:{}},s.element.triggerHandler("addrow",n)},100)},pagerRefresh:function(t,e){if(this.pagerAPI){var n={};"string"==typeof t?n.activePage="top"===t?1:this.pagerAPI.state.pages:"number"==typeof t&&(n.activePage=Math.floor(t/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(n.total=this.settings.dataset.length,n.pagesize=this.settings.pagesize),e&&(n.activePage=this.settings.pagesize*this.pagerAPI.activePage>this.settings.dataset.length?1:this.pagerAPI.activePage),this.renderPager(n,!0)}},removeRow:function(t,e,n){var i=this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')),a=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,s=a[t];this.saveDirtyRows(),this.unselectRow(t,e),a.splice(t,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,e||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(e){return e.row!==t}),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var r={row:t,cell:null,target:i,item:s,oldValue:s};return n?r:(this.element.trigger("rowremove",r),!0)},removeSelected:function(t){this._selectedRows.sort(function(t,e){return t.idx<e.idx?-1:t.idx>e.idx?1:0});for(var e=[],n=this._selectedRows.length-1;n>=0;n--)e.push({row:this._selectedRows[n].idx,item:this._selectedRows[n],cell:null,target:null}),this.removeRow(this._selectedRows[n].idx,n>0,t);t&&this.element.trigger("rowremove",e)},updateDataset:function(t,e){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var n=this.element.parent().find(".toolbar").find(".searchfield");n.val(""),n.parent().removeClass("has-text"),this.clearFilter()}this.loadData(t,e)},triggerSource:function(t,e,n){if(this.settings.source){var i=this,a={};this.pagerAPI&&(a=this.pagerAPI.state),"string"==typeof t?(a.type=t,a.trigger=n):t&&(a=C.extend({},a,t)),e&&"function"!=typeof e&&"string"==typeof e.type&&(a.type=e.type),!1!==this.element.triggerHandler("beforepaging",a)&&(this.sortColumn&&this.sortColumn.sortId&&(a.sortAsc=this.sortColumn.sortAsc,a.sortField=this.sortColumn.sortField,a.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(a.filterExpr=this.filterExpr),this.element.trigger("paging",a),this.settings.source(a,function(t,n){n.activePage>-1&&(i.activePage=n.activePage),n.grandTotal&&(i.grandTotal=n.grandTotal),i.loadData(t,n),e&&"function"==typeof e&&e(!0),setTimeout(function(){i.afterPaging(a),i.element.trigger("afterpaging",a)})}))}},afterPaging:function(t){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(t)?this.element.removeClass("paginated"):this.element.addClass("paginated"),t.total&&(this.recordCount=t.total,this.displayCounts(t.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(t,e){var n,i;this.settings.dataset=t,e||(e={}),"filterrow"===e.type&&(e.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,e.pagesize=this.settings.pagesize,e.total=e.total||-1,e.type="filterrow"),e.activePage||(e.activePage=1,e.pagesize=this.settings.pagesize,e.total=-1,this.settings.treeGrid&&(e.preserveSelected=!0)),this.settings.source&&e.grandTotal?this.grandTotal=e.grandTotal:this.grandTotal=null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(e.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),e.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),e.preserveSelected||"initial"!==e.type&&e.type||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===e.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(e,!0),this.displayCounts(),this.settings.paging&&this.settings.source&&null!==(n=e)&&void 0!==n&&(null==n?void 0:n.filterExpr)&&"all"===(null===(i=e.filterExpr[0])||void 0===i||null==i?void 0:i.column)&&this.highlightSearchRows(e.filterExpr[0].value)},uniqueId:function(t){return t=null==t?"":t,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(t):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(t)).replace(/--/g,"-")},visibleColumns:function(t){for(var e=[],n=0;n<this.settings.columns.length;n++){var i=this.settings.columns[n];i.hidden||t&&"selectionCheckbox"===i.id||e.push(i)}return e},getColumnGroup:function(t){for(var e=0,n=this.settings.columnGroups,i=0;i<n.length;i++)if(!n[i].hidden&&(e+=n[i].colspan)>=t)return this.uniqueId("-header-group-".concat(i));return""},updateColumnGroup:function(t,e){var n=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=C.deepCopy(n)),this.settings.groupable)for(var i=this.tableBody.find(".datagrid-rowgroup-header"),a=this.visibleColumns().length,s=0;s<i.length;s++)i[s].children[0].setAttribute("colspan",a);else if(n&&this.colGroups){var r=0,o=-1;this.originalColGroups.forEach(function(e,n){var i=parseInt(e.colspan,10);t>=r&&t<=r+i&&(o=n),r+=i});var l=parseInt(this.colGroups[o].getAttribute("colspan"),10),c=this.colGroups[o].classList.contains("is-hidden");if(!e||!c)return e&&!c?(this.colGroups[o].classList.remove("is-hidden"),void this.colGroups[o].setAttribute("colspan",l+1)):void(l-1!=0?this.colGroups[o].setAttribute("colspan",l-1):this.colGroups[o].classList.add("is-hidden"));this.colGroups[o].classList.remove("is-hidden")}},updateGroupHeadersAfterColumnReorder:function(t,e){var n=this.settings.columnGroups;if(n){this.originalColGroups||(this.originalColGroups=C.deepCopy(n));var i=n.map(function(t){return parseInt(t.colspan,10)}),a={from:null,to:null,total:0};i.forEach(function(n,i){a.total+=n,a.total>t&&null===a.from&&(a.from=i),a.total>e&&null===a.to&&(a.to=i)}),a.from!==a.to&&(n[a.from].colspan-=1,n[a.to].colspan+=1)}},headerText:function(t){var e=t.name?u.stripTags(t.name,"<div><span><a><small><svg><i><b><use><br><strong><em>"):"";return e||"drilldown"!==t.id?e:(e=R.translate("Drilldown"),'<span class="audible">'.concat(e,"</span>"))},getContainer:function(t){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(t)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(t)>-1?"right":"center"},renderHeader:function(){var t,e=this,n={left:"",center:"",right:""},i=this.settings.columnGroups;if(i){this.element.addClass("has-group-headers");var a,s=this.settings.columns,r=s.length,o=this.visibleColumns().length,l=i.map(function(t){return parseInt(t.colspan,10)}),c=function(){return l.reduce(function(t,e){return t+e},0)},d=function(){var t=c();return t>r?t-r:r-t};if(n.left+='<tr role="row" class="datagrid-header-groups">',n.center+='<tr role="row" class="datagrid-header-groups">',n.right+='<tr role="row" class="datagrid-header-groups">',c()>r)for(var u=!0,p=l.length-1;p>=0&&u;p--)a=d(),l[p]>=a?(l[p]-=a,u=!1):l[p]=0;var f=0,g=0;if(l.forEach(function(a,o){for(var l=a,c=f+a;f<c;f++)f<r&&s[f].hidden&&l--;var d=i[o].hidden||l<1?' class="is-hidden"':"",u=' colspan="'.concat(l>0?l:1,'"'),h=i[o].align?"l-".concat(i[o].align,"-text"):"";t=e.uniqueId("-header-group-".concat(o)),l>0&&(g+=l);var p=e.getContainer(e.settings.columns[o].id);n[p]+="<th".concat(d).concat(u,' id="').concat(t,'" class="').concat(h,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(i[o].name,"</span></div></th>")}),g<o){var m=' colspan="'.concat((a=o-g)>0?a:1,'"');e.hasRightPane?n.right+="<th".concat(m,"></th>"):n.center+="<th".concat(m,"></th>")}this.settings.spacerColumn&&(n.center+='<th class="datagrid-header-groups-spacer-column"></th>'),n.left+="</tr><tr>",n.center+="</tr><tr>",n.right+="</tr><tr>"}else n.left+='<tr role="row">',n.center+='<tr role="row">',n.right+='<tr role="row">';for(var v=0;v<this.settings.columns.length;v++){var b,y=e.settings.columns[v],w=e.getContainer(y.id),x=e.uniqueId("-header-".concat(v)),k=void 0===y.sortable||y.sortable,T=void 0===y.resizable||y.resizable,A=void 0===y.exportable||y.exportable,S="selectionCheckbox"===y.id,E=this.getHeaderAlignmentClass(y);(e.hasLeftPane||e.hasRightPane)&&(e.settings.frozenColumns.left&&e.settings.frozenColumns.left.indexOf(y.id)>-1||e.settings.frozenColumns.right&&e.settings.frozenColumns.right.indexOf(y.id)>-1)&&(y.hideable=!1),void 0===y.hideable&&(y.hideable=!0);var D="";D+=k?" is-sortable":"",D+=T?" is-resizable":"",D+=y.hidden?" is-hidden":"",D+=y.filterType?" is-filterable":"",D+="ellipsis"===y.textOverflow?" text-ellipsis":"",D=""!==(D+=""!==E?E:"")?' class="'.concat(D.substr(1),'"'):"";var I=C.stringAttributes(this,this.settings.attributes,"col-".concat(null===(b=y.id)||void 0===b||null==b?void 0:b.toLowerCase()));I||(I='id="'.concat(x,'"')),n[w]+='<th scope="col" role="columnheader" '.concat(I," ").concat(S?' aria-checked= "false"':"",' data-column-id="').concat(y.id,'"').concat(y.field?' data-field="'.concat(y.field,'"'):"").concat(y.headerTooltip?' title="'.concat(y.headerTooltip,'"'):"").concat(!1===y.reorderable?' data-reorder="false"':"").concat(i?' headers="'.concat(e.getColumnGroup(v),'"'):"",' data-exportable="').concat(A?"yes":"no",'"').concat(D,">");var M="";k&&(M="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>")),n[w]+='<div class="'.concat(S?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(E,'">\n      <span class="datagrid-header-text').concat(y.required?" required":"",'">').concat(e.headerText(this.settings.columns[v])).concat(" l-center-text"===E?M:"","</span>"),S&&(e.settings.showSelectAllCheckBox?n[w]+='<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" tabindex="0"></span>':n[w]+='<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none" tabindex="0"></span>'),k&&" l-center-text"!==E&&(n[w]+=M),n[w]+="</div>".concat(e.filterRowHtml(y,v),"</th>")}this.settings.spacerColumn&&(n.center+='<th class="datagrid-header-spacer-column"></th>'),n.left+="</tr>",n.center+="</tr>",n.right+="</tr>",void 0===e.headerRow?(e.hasLeftPane&&(e.headerRowLeft=$('<thead class="datagrid-header left" role="rowgroup">'.concat(n.left,"</thead>")),e.tableLeft.find("colgroup").after(e.headerRowLeft)),e.headerRow=$('<thead class="datagrid-header center"> role="rowgroup"'.concat(n.center,"</thead>")),e.table.find("colgroup").after(e.headerRow),e.hasRightPane&&(e.headerRowRight=$('<thead class="datagrid-header right" role="rowgroup">'.concat(n.right,"</thead>")),e.tableRight.find("colgroup").after(e.headerRowRight))):(e.hasLeftPane&&h.html(e.headerRowLeft,n.left,"*"),h.html(e.headerRow,n.center,"*"),e.hasRightPane&&h.html(e.headerRowRight,n.right,"*")),i&&e.headerRow&&(e.colGroups=$.makeArray(this.container.find(".datagrid-header-groups th"))),e.syncHeaderCheckbox(this.settings.dataset),e.setScrollClass(),e.attachFilterRowEvents(),e.settings.columnReorder&&e.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(t){return void 0===t.headerAlign?t.align?" l-".concat(t.align,"-text"):"":" l-".concat(t.headerAlign,"-text")},filterSetDatepicker:function(t,e,n){var i=t.data("datepicker"),a=t.data("is-range");n=n||{};var s=function(){i&&"function"==typeof i.destroy&&i.destroy(),t.datepicker(n)};i&&a||"in-range"!==e?i&&!a||"in-range"===e||(n.range={useRange:!1},t.removeData("is-range"),s()):(t.data("is-range",!0),n.range={useRange:!0},s())},filterRowHtml:function(t,e){var n="",i=this.getHeaderAlignmentClass(t);if(t.filterType){var a,s,r=t,o=this.uniqueId("-header-filter-".concat(e)),l=Array.isArray(r.filterRowEditorOptions)?r.filterRowEditorOptions:r.options,c="";if("select"===r.filterType&&l){for(var d=!1,u=0,h=l.length;u<h;u++)if(!l[u].label){d=!0;break}d||(c="<option></option>")}n='<div class="datagrid-filter-wrapper'.concat(i,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(r),'<label class="audible" for="').concat(o,'">').concat(r.name,"</label>");var p=C.stringAttributes(this,this.settings.attributes,"filter-".concat(null===(a=r.id)||void 0===a||null==a?void 0:a.toLowerCase()));switch(p||(p='id="'.concat(o,'"')),r.filterType){case"checkbox":break;case"date":n+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="datepicker" ').concat(p,"/>");break;case"integer":s={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:R.currentLocale.data.numbers?R.currentLocale.data.numbers.group:",",decimal:R.currentLocale.data.numbers?R.currentLocale.data.numbers.decimal:".",negative:R.currentLocale.data.numbers?R.currentLocale.data.numbers.minusSign:"-"}},process:"number"},r.filterMaskOptions&&(r.filterMaskOptions=C.extend(!0,{},s,r.filterMaskOptions)),r.maskOptions&&(r.maskOptions=C.extend(!0,{},s,r.maskOptions)),n+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p," />");break;case"percent":case"decimal":var f={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:R.currentLocale.data.numbers?R.currentLocale.data.numbers.group:",",decimal:R.currentLocale.data.numbers?R.currentLocale.data.numbers.decimal:".",negative:R.currentLocale.data.numbers?R.currentLocale.data.numbers.minusSign:"-"}},process:"number"};r.numberFormat?(s={patternOptions:{decimalLimit:r.numberFormat.maximumFractionDigits}},r.filterMaskOptions&&(r.filterMaskOptions=C.extend(!0,{},s,f,r.filterMaskOptions)),r.maskOptions&&(r.maskOptions=C.extend(!0,{},s,f,r.maskOptions))):(r.filterMaskOptions&&(r.filterMaskOptions=C.extend(!0,{},f,r.filterMaskOptions)),r.maskOptions&&(r.maskOptions=C.extend(!0,{},f,r.maskOptions))),n+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p," />");break;case"contents":case"select":if(n+="<select ".concat(p," ").concat("select"===r.filterType?'class="dropdown"':'multiple class="multiselect"').concat(r.filterDisabled?" disabled":"",">").concat(c),l)for(var g=0,m=l.length;g<m;g++){var v=l[g],b=r.caseInsensitive&&"string"==typeof v.value?v.value.toLowerCase():v.value;v&&""!==b&&(n+='<option value = "'.concat(b,'">').concat(v.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(n+="<select ".concat(p,' class="multiselect" multiple').concat(r.filterDisabled?" disabled":"",">"),l)for(var y=0,w=l.length;y<w;y++){var x=l[y],k=r.caseInsensitive&&"string"==typeof x.value?x.value.toLowerCase():x.value;x&&"string"==typeof x.label&&(n+='<option value = "'.concat(k,'">').concat(x.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":n+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="timepicker" ').concat(p,"/>");break;case"lookup":n+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="lookup" ').concat(p," >");break;default:n+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p,"/>")}n+="</div>"}return t.filterType||(n='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(i),'"></div>')),n},attachFilterRowEvents:function(){var t=this,e=this;if(this.settings.filterable){this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header");var n,i=null;this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",function(){var t=this,n=$(this),a=n.data("popupmenu");return a?a.close(!0,!0):n.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",function(t,n,a){e.hideTooltip(),i=a}).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",function(){var a=$(t).data("popupmenu");a&&a.destroy(),i=null;var s=n.closest('th[role="columnheader"]'),r=e.columnById(s.attr("data-column-id"))[0];if(r&&/date|integer|decimal/.test(r.filterType)){var o=s.find("input"),l=s.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");if("date"===r.filterType)e.filterSetDatepicker(o,l,r.editorOptions);else{var c=r.filterMaskOptions?r.filterMaskOptions:r.maskOptions,d=(null==c||null==c?void 0:c.rangeNumberDelimeter)||"-",u="in-range"===l,h=o.data("mask"),p=u?{process:"rangeNumber",patternOptions:{delimeter:d}}:{process:"number",patternOptions:{delimeter:""}};h&&h.settings.process!==p.process&&(r.filterMaskOptions&&(r.filterMaskOptions=C.extend(!0,{},r.filterMaskOptions,p)),r.maskOptions&&(r.maskOptions=C.extend(!0,{},r.maskOptions,p)),h.updated(p))}}e.applyFilter(null,"selected")}),!1}),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",function(t){return clearTimeout(n),t.stopPropagation(),13!==t.which||(e.applyFilter(null,"enter"),t.preventDefault(),t.stopPropagation(),!1)}),this.element.off("focus.datagrid-filter-focus").on("focus.datagrid-filter-focus",".datagrid-filter-wrapper input",function(){var t;null===(t=i)||void 0===t||null==t||t.close();var e=$("#dropdown-list").attr("data-element-id"),n=$("#".concat(e)).data("dropdown");n&&n.isOpen()&&n.closeList("click")}),this.element.off("click.datagrid-filter-click").on("click.datagrid-filter-click","th",function(){var t;null===(t=i)||void 0===t||null==t||t.close();var e=$("#dropdown-list").attr("data-element-id"),n=$("#".concat(e)).data("dropdown");n&&n.isOpen()&&n.closeList("click")}),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",function(i){13!==i.which&&(t.activeCell&&t.activeCell.isFocused&&(t.activeCell.isFocused=!1),clearTimeout(n),n=setTimeout(function(){e.applyFilter(null,"keyup")},400))}),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each(function(){var t=e.columnById($(this).attr("data-column-id"))[0],n=$(this);if(!t)return!0;n.find("select.dropdown").each(function(){var i=$(this);i.dropdown(t.editorOptions).on("selected.datagrid",function(){e.applyFilter(null,"selected")}).on("listopened.datagrid",function(){var t=i.data("dropdown");t&&(C.isInViewport(t.list[0])||e.adjustPosLeft(t.list[0]))}),i.data("dropdown").settings.sourceArguments={column:t,container:n,grid:e,cell:t,event:void 0,row:-1,rowData:{},value:void 0}}),n.find("select.multiselect").each(function(){var i=this,a=$(this);a.multiselect(t.editorOptions).on("selected.datagrid",function(){var t=$(i);$("#".concat(t.attr("id"))).val(t.val()),e.applyFilter(null,"selected")}),a.data("dropdown").settings.sourceArguments={column:t,container:n,grid:e,cell:t,event:void 0,row:-1,rowData:{},value:void 0}}),t.filterMaskOptions?n.find("input").mask(t.filterMaskOptions):t.maskOptions&&n.find("input").mask(t.maskOptions),t.filterMask?n.find("input").mask(t.filterMask):t.mask&&n.find("input").mask(t.mask);var i=n.find(".datepicker");i.length&&"function"==typeof $().datepicker&&i.datepicker(t.editorOptions||{dateFormat:t.dateFormat}).on("listclosed.datepicker",function(){e.applyFilter(null,"selected")});var a=n.find(".lookup");a.length&&"function"==typeof $().lookup&&(t.editorOptions&&(t.editorOptions.clickArguments?t.editorOptions.clickArguments.grid=e:t.editorOptions.clickArguments={grid:e},t.editorOptions.clearArguments?t.editorOptions.clearArguments.grid=e:t.editorOptions.clearArguments={grid:e}),a.lookup(t.editorOptions||{}),e.settings.filterWhenTyping&&a.on("change",function(){e.applyFilter(null,"selected")}));var s=n.find(".timepicker");return s.length&&"function"==typeof $().timepicker&&s.timepicker(t.editorOptions||{timeFormat:t.timeFormat}),t.filterMask?n.find("input").mask({pattern:t.filterMask,mode:t.maskMode}):t.mask&&n.find("input").mask({pattern:t.mask,mode:t.maskMode}),null}),e.filterRowRendered=!0}},filterItemHtml:function(t,e,n){var i=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(t)});return'<li class="'.concat(t," ").concat(n?" is-checked":"",'"><a href="#">').concat(i,"<span>").concat(R.translate(e),"</span></a></li>")},filterButtonHtml:function(t){var e;if(!t.filterType)return"";var n=this,i=t.filterDisabled,a=$.isArray(t.filterConditions)?t.filterConditions:[],s=function(t,e,i){var s,r,o=!(!a.length||a[0]!==t)||i;return!a.length||(s=t,r=r||a,$.inArray(s,r)>-1)?n.filterItemHtml(t,e,o):""},r=C.stringAttributes(this,this.settings.attributes,"btn-filter-".concat(null===(e=t.id)||void 0===e||null==e?void 0:e.toLowerCase())),o=function(t,e){return'<button type="button" '.concat(r,' class="btn-menu btn-filter').concat(e?" ".concat(e):"",'" data-init="false" ').concat(i?" disabled":"").concat(t?' data-default="'.concat(t,'"'):"",' type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},l="",c="";return"contents"===t.filterType||"select"===t.filterType||"multiselect"===t.filterType?"":("text"===t.filterType&&(c=a.length?a[0]:"contains",l=0===a.length?(l=o(c)+s("contains","Contains",!0)+s("does-not-contain","DoesNotContain")+s("equals","Equals")+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")+s("end-with","EndsWith")+s("does-not-end-with","DoesNotEndWith")+s("start-with","StartsWith")+s("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",c):(l=o(c)+a.map(function(t){return s(t,function(t){switch(t=t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("")){case"StartWith":t=t.replace("StartWith","StartsWith");break;case"EndWith":t=t.replace("EndWith","EndsWith");break;case"LessEquals":t=t.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":t=t.replace("GreaterEquals","GreaterOrEquals")}return t}(t))}).join("")).replace("{{icon}}",c)),"checkbox"===t.filterType&&(l=(l+=o(c=a.length?a[0]:"selected-notselected","btn-filter-checkbox")+s("selected-notselected","All",!0)+s("selected","Selected")+s("not-selected","NotSelected")).replace("{{icon}}",c)),"checkbox"!==t.filterType&&"text"!==t.filterType&&(l=(l+=o(c=a.length?a[0]:"equals")+s("equals","Equals","lookup"===t.filterType||"integer"===t.filterType||"decimal"===t.filterType||"date"===t.filterType||"time"===t.filterType)+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")).replace("{{icon}}",c)),/\b(date|integer|decimal|percent)\b/g.test(t.filterType)&&(l+=s("in-range","InRange")),/\b(integer|decimal|date|time|percent)\b/g.test(t.filterType)&&(l=(l+="".concat(s("less-than","LessThan")).concat(s("less-equals","LessOrEquals")).concat(s("greater-than","GreaterThan")).concat(s("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"lookup"===t.filterType&&(l=(l=o(c=a.length?a[0]:"contains")+s("contains","Contains",!0)+s("does-not-contain","DoesNotContain")+s("equals","Equals")+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")+s("end-with","EndsWith")+s("does-not-end-with","DoesNotEndWith")+s("start-with","StartsWith")+s("does-not-start-with","DoesNotStartWith")+s("less-than","LessThan")+s("less-equals","LessOrEquals")+s("greater-than","GreaterThan")+s("greater-equals","GreaterOrEquals")).replace("{{icon}}",c)),l+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(t,e){var n=this,i=this,s=!1,r=function t(e){for(var n=0,i=e.length;n<i;n++)void 0!==e[n]._isFilteredOut&&delete e[n]._isFilteredOut,e[n].children&&t(e[n].children)};t?this.setFilterConditions(t):t=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(t)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=t,s=!0,this.settings.treeGrid&&r(this.settings.dataset));var o=function(e){for(var n=!0,s=function(a){var s=i.columnById(t[a].columnId)[0];if(void 0===s)return{v:!1};var r,o=e&&void 0!==e[s.field]?e[s.field]:i.fieldValue(e,s.field),l=null==o?"":o.toString().toLowerCase(),c=t[a].value.toString().toLowerCase(),d=null,u=null,h=null,p=!1;if("percent"===s.filterType&&(c=(c/100).toString(),"decimal"==="".concat(s.name).toLowerCase()?(o=Na.Decimal(!1,!1,o,s),c=Na.Decimal(!1,!1,c,s)):"integer"==="".concat(s.name).toLowerCase()&&(o=Na.Integer(!1,!1,o,s),c=Na.Integer(!1,!1,c,s))),"text"===s.filterType){var f=s.formatter,g=t[a].columnId;l=null==(o=(o=i.formatValue(f,a,g,o,s,e,i)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":o.toString().toLowerCase()}if("contents"!==s.filterType&&"select"!==s.filterType&&"multiselect"!==s.filterType||(o=null==o?"":o.toString().toLowerCase()),!("number"!=typeof o&&(isNaN(o)||""===o||t[a].value instanceof Array)||/^(date|time|text)$/.test(s.filterType)))if(o=null===o?o:parseFloat(o),s&&"rangeNumber"===(null===(r=s.maskOptions)||void 0===r||null==r?void 0:r.process)){var m,v=null===(m=s.maskOptions.patternOptions)||void 0===m||null==m?void 0:m.delimeter;v=")".concat(v,"("),"("===c.substr(0,1)&&(c=c.substr(1)),")"===c.substr(-1)&&(c=c.substr(0,c.length-1)),c=c.split(v).map(function(t){return R.parseNumber(t)}).sort(function(t,e){return t-e}),p=!0}else c=R.parseNumber(c),p=!1;if("date"===s.filterType||"time"===s.filterType){"string"==typeof o&&(o=s.formatter(!1,!1,o,s,!0));var b=function(e,n){return(n=R.parseDate(n,t[a].format))&&("time"===s.filterType&&(n.setDate(1),n.setMonth(0),n.setYear(0)),n=n.getTime()),e instanceof Date?(e=new Date(e.getTime()),"time"===s.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):s.editorOptions&&s.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()):"string"==typeof e&&e&&(e=s.sourceFormat?R.parseDate(e,"string"==typeof s.sourceFormat?{pattern:s.sourceFormat}:s.sourceFormat):R.parseDate(e,{pattern:t[a].format}))&&("time"===s.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):s.editorOptions&&s.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()),{rValue:e,cValue:n}},y=null;if("in-range"===t[a].operator){var w=i.settings.columns.indexOf(s),x=i.element.find(".datagrid-header th:eq(".concat(w,") .datagrid-filter-wrapper input")).data("datepicker");x&&(u=x.settings.range.separator,(d=x.settings.range.data)&&d.start?y=b(o,d.start):u&&c.indexOf(u)>-1&&(y=b(o,(h=c.split(u))[0])))}else y=b(o,t[a].value);o=y?y.rValue:o,c=y?y.cValue:c}switch(t[a].operator){case"equals":if(t[a].value instanceof Array){n=!1;for(var C=0;C<t[a].value.length;C++)t[a].value[C].toLowerCase()===o&&(""!==o.toString()||""===t[a].value[C])&&(n=!0)}else n=o===c&&""!==o;break;case"does-not-equal":n=o!==c;break;case"contains":n=l.indexOf(c)>-1&&""!==o.toString();break;case"does-not-contain":n=-1===l.indexOf(c);break;case"end-with":n=l.lastIndexOf(c)===l.length-c.toString().length&&""!==l&&l.length>=c.toString().length;break;case"start-with":n=0===l.indexOf(c)&&""!==l;break;case"does-not-end-with":n=!(n=l.lastIndexOf(c)===l.length-c.toString().length&&""!==l&&l.length>=c.toString().length);break;case"does-not-start-with":n=!(0===l.indexOf(c)&&""!==l);break;case"is-empty":n=""===l;break;case"is-not-empty":if(""===o){n=""!==o;break}n=!(null===o);break;case"in-range":if(n=!1,d&&d.startDate&&d.endDate){var k=d.startDate.getTime(),T=d.endDate.getTime();n=o>=k&&o<=T&&null!==o}else if(h){var A=R.parseDate(h[0],t[a].format),S=R.parseDate(h[1],t[a].format);A&&S&&(A=A.getTime(),S=S.getTime(),n=o>=A&&o<=S&&null!==o)}if(p){var E=""!==o&&null!==o;n=o>=c[0]&&o<=c[1]&&E}break;case"less-than":n=o<c&&""!==o&&null!==o;break;case"less-equals":n=o<=c&&""!==o&&null!==o;break;case"greater-than":n=o>c&&""!==o&&null!==o;break;case"greater-equals":n=o>=c&&""!==o&&null!==o;break;case"selected":if(s&&s.isChecked){n=s.isChecked(o);break}n=("1"===l||"true"===l||!0===o||1===o)&&""!==l;break;case"not-selected":if(s&&s.isChecked){n=!s.isChecked(o);break}n="0"===l||"false"===l||!1===o||0===o||""===l;break;case"selected-notselected":n=!0}return n?void 0:{v:!1}},r=0;r<t.length;r++){var o=s(r);if("object"===a(o))return o.v}return n};if(!this.settings.disableClientFilter)if(this.settings.treeGrid)r(this.settings.dataset),function(){for(var e=!0,n=0,i=t.length;n<i;n++)"checkbox"!==t[n].filterType&&""===t[n].value.toString().trim()||(e=!1);return e}()||function t(e){for(var i=!0,a=0,s=e.length;a<s;a++){var r=e[a],l=!0;if(r.children)if(n.settings.allowChildExpandOnMatch&&n.settings.allowChildExpandOnMatchOnly){var c=o(r);c||(l=t(r.children)),c?(r._isFilteredOut=!1,i=!1):l?(r._isFilteredOut=!o(r),r._isFilteredOut||(i=!1)):i=!1}else(l=t(r.children))?(r._isFilteredOut=!o(r),r._isFilteredOut||(i=!1)):i=!1;else r._isFilteredOut=!o(r),r._isFilteredOut||(i=!1)}return i}(this.settings.dataset);else if(this.settings.groupable)for(var l,c=0,d=this.settings.dataset.length;c<d;c++){for(var u=!0,h=0,p=this.settings.dataset[c].values.length;h<p;h++)l=!o(this.settings.dataset[c].values[h]),this.settings.dataset[c].values[h]._isFilteredOut=l,l||(u=!1);this.settings.dataset[c]._isFilteredOut=u}else for(var f,g=0,m=this.settings.dataset.length;g<m;g++)f=!o(this.settings.dataset[g]),this.settings.dataset[g]._isFilteredOut=f;if(this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),s){var v={trigger:e,type:"filtered"};this.settings.source&&(v.preserveSelected=this.settings.allowSelectAcrossPages),this.setSearchActivePage(v)}this.settings.disableClientFilter&&"restore"===e||(this.element.trigger("filtered",{op:"apply",conditions:t,trigger:e}),this.saveUserSettings())},adjustPosLeft:function(t){var e=t.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth;e.left<0&&e.right<=n?t.style.left="".concat(20,"px"):e.left>=0&&!(e.right<=n)&&(t.style.left="".concat(n-e.width-20,"px"))},setChildExpandOnMatch:function(){var t=this.settings;t.treeGrid&&(!function t(e){for(var n=!1,i=0,a=e.length;i<a;i++){var s,r=e[i];r._isFilteredOut&&!n&&null!==(s=r.children)&&void 0!==s&&(null==s?void 0:s.length)&&(r._isFilteredOut=!t(r.children)),"boolean"!=typeof r._isFilteredOut||r._isFilteredOut||(n=!0)}return n}(t.dataset),function e(n,i){for(var a=0,s=n.length;a<s;a++){var r=n[a],o=r.children,l=o?o.length:0;if(l){if(!r._isFilteredOut)if(t.allowChildExpandOnMatch&&!t.allowChildExpandOnMatchOnly)for(var c=0;c<l;c++)o[c]._isFilteredOut=!1;else{for(var d=!0,u=0;u<l;u++)o[u]._isFilteredOut||(d=!1);r.isAllChildrenFiltered=d}e(o)}}}(t.dataset))},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each(function(){var t=$(this);t.val(""),t.is("select")&&t.find("option").each(function(){$(this).prop("selected",!1)}),t.trigger("updated")}),this.element.find(".datagrid-header .btn-filter").each(function(){var t=$(this),e=t.next(),n=e.find("li:first");t.find("svg:first > use").attr("href","#icon-filter-".concat(t.attr("data-default"))),e.find(".is-checked").removeClass("is-checked"),n.addClass("is-checked")}))},setFilterConditions:function(t){this.clearFilterFields();for(var e=0;e<t.length;e++){var n=this.element.find('.datagrid-header th[data-column-id="'.concat(t[e].columnId,'"]')),i=n.find("input, select"),a=n.find(".btn-filter"),s=a.next();if(void 0===t[e].value&&(t[e].value=""),i.val(t[e].value),i.is(".lookup")&&1===i.parent().find("svg.close").length&&t[e].value&&i.parent().find("svg.close").removeClass("is-empty"),i.is("select")){var r=t[e].value instanceof Array?t[e].value[0]:t[e].value;if(t[e].innerHTML&&(i[0].innerHTML=t[e].innerHTML),i.find('option[value="'.concat(r,'"]')).length)if(t[e].value instanceof Array&&!t[e].selectedOptions){var o=i[0].querySelectorAll("option");i.val("");for(var l=0;l<o.length;l++)o[l].selected=!1;for(var c=0;c<t[e].value.length;c++)i.find('option[value="'.concat(t[e].value[c],'"]')).prop("selected",!0)}else i.find('option[value="'.concat(t[e].value,'"]')).prop("selected",!0);else{var d=i.data("dropdown");d&&d.setCode(t[e].value)}i.trigger("updated")}a.find("svg:first > use").attr("href","#icon-filter-".concat(t[e].operator)),s.find(".is-checked").removeClass("is-checked"),s.find(".".concat(t[e].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var t=[],e=this;return this.element.find("th.is-filterable").each(function(){var n,i=$(this),a=i.find(".btn-filter"),s=i.find("input, select"),r=s.is("select"),o=a.find(".icon-dropdown:first"),l=null;if((a.length||r)&&"selected-notselected"!==(n=r?"equals":o.getIconName().replace("filter-",""))&&!(""===s.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(n)||s.val()instanceof Array&&0===s.val().length)){var c=s.val()?s.val():"";s.attr("data-mask-mode")&&"number"===s.attr("data-mask-mode")&&(c=R.parseNumber(c));var d={columnId:i.attr("data-column-id"),operator:n,value:c};s.data("datepicker")&&(l=s.data("datepicker").pattern,d.format=l),s.data("timepicker")&&(l=s.data("timepicker").settings.timeFormat,d.format=l),s.is("select")&&(d.innerHTML=s[0].innerHTML);var u=e.columnById(d.columnId);u&&u[0]&&(d.filterType=u[0].filterType),t.push(d)}}),t},getExtraTop:function(){var t=this.settings,e={default:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},filterable:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},group:{extraSmall:-22,short:-25,small:-25,medium:-30,normal:-39,large:-39},groupFilter:{extraSmall:-28,short:-29,small:-29,medium:-32,normal:-39,large:-39}},n="extra-small"===t.rowHeight?"extraSmall":t.rowHeight;return t.columnGroups?t.filterable?e.groupFilter[n]:e.group[n]:t.filterable?e.filterable[n]:e.default[n]},getTargetHeight:function(){var t=this.settings,e={default:{extraSmall:20,short:20,small:20,medium:28,normal:35,large:35},filterable:{extraSmall:47,short:53,small:53,medium:54,normal:60,large:60},group:{extraSmall:43,short:46,small:46,medium:56,normal:74,large:74},groupFilter:{extraSmall:80,small:80,short:83,medium:87,normal:103,large:103}},n="extra-small"===t.rowHeight?"extraSmall":t.rowHeight;return t.columnGroups?t.filterable&&this.filterRowRendered?e.groupFilter[n]:e.group[n]:t.filterable&&this.filterRowRendered?e.filterable[n]:e.default[n]},getCellPadding:function(){return{"extra-small":8,short:8,small:8,medium:16,normal:16,large:16}[this.settings.rowHeight]},createDraggableColumns:function(){var t=this,e=t.headerNodes().not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column"),n=$(".drag-target-arrows",t.element);n.length||(t.element.prepend('<span class="drag-target-arrows" style="height: '.concat(t.getTargetHeight(),'px;"></span>')),n=$(".drag-target-arrows",t.element)),e.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),e.prepend('<span class="is-draggable-target"></span>'),e.last().append('<span class="is-draggable-target last"></span>'),t.element.addClass("has-draggable-columns"),$(".handle",e).each(function(){var i=null,a=null,s=null,r=0,o=$(this),l=o.parent();o.on("mousedown.datagrid",function(o){o.preventDefault(),l.drag({clone:!0,cloneAppendTo:e.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",function(e,n,c){(i=c).removeAttr("id").addClass("is-dragging-clone").css({left:R.isRTL()?n.right-i.width():n.left,top:n.top,height:l.height(),border:0}),$(".is-draggable-target",i).remove(),t.setDraggableColumnTargets(),r=t.getExtraTop(),a=l.position(),s={top:n.top-a.top,left:n.left-a.left};var d=t.targetColumn(a);t.draggableStatus.startIndex=d,o.stopImmediatePropagation()}).on("drag.datagrid",function(c,d){i[0].style.left="".concat(parseInt(R.isRTL()?d.left+d.offset.x-d.clone.width():d.left,10),"px"),i[0].style.top="".concat(parseInt(d.top,10),"px"),a={top:d.top-s.top,left:d.left-s.left},R.isRTL()&&(a.left=parseInt(i[0].style.left,10));var u=0,h=null,p=null,f=t.targetColumn(a);if($(".is-draggable-target",e).add(n).removeClass("is-over"),-1!==f)for(var g=0,m=t.draggableColumnTargets.length;g<m;g++)if(u=g+1,(h=t.draggableColumnTargets[g]).index===f&&h.index!==t.draggableStatus.startIndex){h.index>t.draggableStatus.startIndex&&u<m&&(h=t.draggableColumnTargets[u]),h.el.addClass("is-over"),n.addClass("is-over"),p=h.el[0].getBoundingClientRect(),n[0].style.left="".concat(parseInt(p.left+(R.isRTL()?2:0),10),"px");var v=0;h.el.hasClass("last")&&(v=-(l.height()-3)),n[0].style.top="".concat(parseInt(p.top,10)+1+r+v,"px")}o.stopImmediatePropagation()}).on("dragend.datagrid",function(r,o){R.isRTL()||(i[0].style.left="".concat(parseInt(o.left,10),"px"),i[0].style.top="".concat(parseInt(o.top,10),"px")),a={top:o.top-s.top,left:o.left-s.left},R.isRTL()&&(a.left=parseInt(i[0].style.left,10));var c,d,u,h,p=t.targetColumn(a),f=l.data("drag"),g=[];if(f&&f.destroy&&f.destroy(),t.draggableStatus.endIndex=p,$(".is-draggable-target",e).add(n).removeClass("is-over"),-1!==t.draggableStatus.endIndex&&t.draggableStatus.startIndex!==t.draggableStatus.endIndex){for(c=0,d=t.settings.columns.length;c<d;c++)t.settings.columns[c].hidden||"selectionCheckbox"===t.settings.columns[c].id||g.push(c);u=g[t.draggableStatus.startIndex]||0,h=g[t.draggableStatus.endIndex]||0,t.updateGroupHeadersAfterColumnReorder(u,h),t.arrayIndexMove(t.settings.columns,u,h),t.updateColumns(t.settings.columns)}})})})},setDraggableColumnTargets:function(){var t,e,n=this,i=n.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column");n.draggableColumnTargets=[],n.draggableStatus={},$(".is-draggable-target.last",i.last()).length||i.last().append($(".is-draggable-target.last",n.headerNodes())),$(".is-draggable-target",i).each(function(a){var s=$(this).is(".last")?a-1:a;t=i.eq(s),e=t.position(),n.draggableColumnTargets.push({el:$(this),index:s,pos:e,width:t.outerWidth(),height:t.outerHeight(),dropArea:{x1:e.left-20,x2:e.left+t.outerWidth()+20,y1:e.top-20+n.getExtraTop(),y2:e.top+t.outerHeight()+20}})})},targetColumn:function(t){var e,n,i,a=-1;for(n=0,i=this.draggableColumnTargets.length-1;n<i;n++)if(e=this.draggableColumnTargets[n],t.left>e.dropArea.x1&&t.left<e.dropArea.x2&&t.top>e.dropArea.y1&&t.top<e.dropArea.y2&&(a=e.index,R.isRTL()))return a;return a},arrayIndexMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},resetGroupArray:function(){if(this.settings.groupable){this.groupArray=[];for(var t=0,e=this.settings.dataset.length;t<e;t++)for(var n=0,i=this.settings.dataset[t].values.length;n<i;n++)this.groupArray.push({group:t,node:n})}},resequenceGroupRows:function(){if(this.settings.groupable)for(var t=this.tableBody.find("tr:not(.datagrid-rowgroup-header)"),e=0;e<t.length;e++)t[e].setAttribute("aria-rowindex",this.pagingRowIndex(e+1))},createDraggableRowsGroupable:function(){var t=this,e=this,n=this.settings;if(n.rowReorder&&n.groupable){"rowReorder"===n.columns[0].id&&(n.columns[0].resizable=!1,this.tableBody.find('> [role="row"] td:first-child').removeClass("l-center-text").addClass("reorder-group-child-col"));var a,s="> tr:not(.is-dragging-clone)",r=function(t){for(var e=0,n=a.length;e<n;e++){var s=a[e].rect;if(t.top>=s.top&&t.top<s.bottom)return i({},a[e])}return null};this.tableBody.find(s).find(".datagrid-reorder-icon").each(function(){var i=null,o=null,l=null,c=!1,d=$(this);d.off("mousedown.datagrid").on("mousedown.datagrid",function(u){u.preventDefault(),function(t){var e=t.buttons||t.which||t.button;return!(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)&&1===e}(u)&&d.closest("tr").drag({axis:"y",clone:!0,cloneAppendTo:d.closest("tbody"),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(n,r,d){(i=d).removeAttr("id").addClass("is-dragging-clone groupable"),i.css({top:"".concat(r.top,"px")});var u=i.find("> td");$(this).find("> td").each(function(t,e){return u.eq(t).width($(e).width())}),function(){a=[];for(var e=t.tableBody.find(s),n=0,i=-1,r=-1,o=e.length;n<o;n++){var l=e[n];"rowgroup"===l.getAttribute("role")?(i++,r=-1):r++,a.push({group:i,node:r,row:l,idx:n,rect:l.getBoundingClientRect(),role:l.getAttribute("role")})}}(),(l={idx:e.tableBody.find(s).index(this),rect:this.getBoundingClientRect(),role:this.getAttribute("role"),row:this}).group=a[l.idx].group,l.node=a[l.idx].node;var h=$(this);"rowgroup"===l.role?o=h.add(h.nextUntil(".datagrid-rowgroup-header")):"row"===l.role&&(o=h),o.css("opacity",".4"),c=!0}).on("drag.datagrid",function(t,e){if(i&&c){c=!1;var n=!1,a=r(e);null!==a&&("rowgroup"===l.role&&(n=l.group!==a.group),"row"===l.role&&(n=l.role===a.role&&l.group===a.group));var s=n?"":"not-allowed";i.add(i.find(".datagrid-reorder-icon")).css("cursor",s),c=!0}}).off("dragend.datagrid").on("dragend.datagrid",function(t,i){var a=i.top>l.rect.top,s=r(i),u=!1;if(null!==s){var h;if("rowgroup"===l.role&&l.group!==s.group){var p=".datagrid-rowgroup-header";a?(h=$(s.row).nextUntil(p).last(),o.insertAfter(h)):(h="rowgroup"===s.role?s.row:$(s.row).prevUntil(p).last().prev(p),o.insertBefore(h)),e.arrayIndexMove(n.dataset,l.group,s.group),u=!0}else"row"===l.role&&l.role===s.role&&l.group===s.group&&(e.arrayIndexMove(n.dataset[l.group].values,l.node,s.node),h=s.row,o[a?"insertAfter":"insertBefore"](h),u=!0);if(u){e.resetGroupArray(),e.resequenceGroupRows(),e.syncSelectedRowsIdx();var f={start:{rowIndex:l.idx,group:l.group,node:-1!==l.node?l.node:null},end:{rowIndex:s.idx,group:s.group,node:-1!==l.node?s.node:null},rowreorderRows:o,role:l.role};e.element.trigger("rowreorder",[f])}}o.css("opacity",""),c=!1;var g=d.closest("tr").data("drag");null==g||null==g||g.destroy()})})})}},createDraggableRows:function(){var t=this;this.settings.rowReorder&&(this.settings.groupable?this.createDraggableRowsGroupable():(this.tableBody.children().filter(function(){return $(this).find(".datagrid-reorder-icon").length<1}).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",function(e,n){t.isSafari&&n.start.css({display:"inline-block"})}).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",function(e,n){t.isSafari&&n.end.css({display:""}),t.reorderRow(n.startIndex,n.endIndex,n)})))},reorderRow:function(t,e,n){var i=e>t,a=this.tableBody.find("tr").eq(t),s=this.tableBody.find("tr").eq(e),r={start:this.dataRowIndex(n?n.start:s)};r.end=r.start+(e-t),this.arrayIndexMove(this.settings.dataset,r.start,r.end),n?(this.settings.rowTemplate||this.settings.expandableRow)&&(i?(this.tableBody.find("tr").eq(2*t).insertAfter(n.end),n.end.next().next().insertAfter(n.over)):this.tableBody.find("tr").eq(2*t).next().insertAfter(n.end)):a[i?"insertAfter":"insertBefore"](s);for(var o=this.tableBody.find("tr:not(.datagrid-expandable-row)"),l=0;l<o.length;l++)o[l].setAttribute("data-index",l),o[l].setAttribute("aria-rowindex",this.pagingRowIndex(l+1));this.element.trigger("rowreorder",[{endIndex:e,startIndex:t,over:s,start:a}]),this.syncSelectedRowsIdx()},fieldValue:function(t,e){if(!e||!t)return"";var n,i=(n=e.indexOf(".")>-1?e.split(".").reduce(function(t,e){return t?t[e]:""},t):t[e])||0===n||!1===n?n:"";return u.escapeHTML(i)},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter(function(t){return 1===t.depth}))},setTreeDepth:function(t){if(this.settings.treeGrid){var e=this,n=0,i=function t(i,a){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n++,e.settings.treeDepth.push({idx:n,depth:a,parents:r.slice(),node:i});var o=null===(s=i.children)||void 0===s||null==s?void 0:s.length;if(o){r.push(n-1);for(var l=0;l<o;l++)t(i.children[l],a+1,r.slice())}};t=t||this.settings.dataset,e.settings.treeDepth=[];for(var a=0,s=t.length;a<s;a++)i(t[a],1)}},setRowGrouping:function(){var t=this.settings.groupable;t&&(this.originalDataset?this.settings.dataset=this.originalDataset:this.originalDataset=this.settings.dataset.slice(),t.aggregator&&"none"!==t.aggregator?"sum"!==t.aggregator?"max"!==t.aggregator?"min"!==t.aggregator?"avg"!==t.aggregator?"count"!==t.aggregator?"list"!==t.aggregator?this.settings.dataset=Oa(this.settings.dataset,t.fields):this.settings.dataset=Oa.list(this.settings.dataset,t.fields,t.aggregatorOptions):this.settings.dataset=Oa.count(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=Oa.avg(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=Oa.min(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=Oa.max(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=Oa.sum(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=Oa.none(this.settings.dataset,t.fields))},renderRows:function(){var t="",e="",n="",i=0,a=this.settings,s=this.table.find("tbody"),r=1;if(this.pagerAPI){var o=this.pagerAPI.state;r=o.filteredActivePage?o.filteredActivePage:o.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),this.currentPageRows=[],i=0;i<this.settings.columns.length;i++){var l=this.settings.columns[i],c=this.getContainer(l.id),d=this.columnWidth(l,i);switch(c){case"left":this.bodyColGroupHtmlLeft+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>")}l.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===s.length&&(this.hasLeftPane&&(this.tableBodyLeft=$('<tbody role="rowgroup"></tbody>'),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$('<tbody role="rowgroup"></tbody>'),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$('<tbody role="rowgroup"></tbody>'),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,this.runningCount=0,a.treeGrid&&a.paging&&!a.source&&r>1&&(this.recordCount=a.treeRootNodes[a.pagesize*r-a.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();for(var u=!1,p=0;p<a.dataset.length;p++){if(a.paging&&!a.source){if(1===r&&p-this.filteredCount>=a.pagesize){a.dataset[p]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(r>1&&!(p-this.filteredCount>=a.pagesize*(r-1)&&p-this.filteredCount<a.pagesize*r)){a.dataset[p]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!a.virtualized||this.isRowVisible(this.recordCount))if((!a.treeGrid&&a.dataset[p])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(a.dataset[p].values){for(var f=a.dataset[p].values.length,g=0,m=0;m<f;m++)a.dataset[p].values[m]._isFilteredOut&&g++;if(g===f)continue}if(!this.settings.groupable.suppressGroupRow){var v=this.rowHtml(a.dataset[p],this.recordCount,p,!0);this.hasLeftPane&&v.left&&(e+=v.left),v.center&&(t+=v.center),this.hasRightPane&&v.right&&(n+=v.right)}if(this.settings.groupable.showOnlyGroupRow&&a.dataset[p].values[0]){var b=a.dataset[p].values[0];a.dataset[p].list&&(b.list=a.dataset[p].list),b.values=a.dataset[p].values;var y=this.rowHtml(b,this.recordCount,p);this.hasLeftPane&&y.left&&(e+=y.left),y.center&&(t+=y.center),this.hasRightPane&&y.right&&(n+=y.right),this.recordCount++,this.groupArray.push({group:p,node:0});continue}for(var w=0;w<a.dataset[p].values.length;w++)if(!a.dataset[p].values[w]._isFilteredOut){var x=this.rowHtml(a.dataset[p].values[w],this.recordCount,a.dataset[p].values[w].idx);this.hasLeftPane&&x.left&&(e+=x.left),x.center&&(t+=x.center),this.hasRightPane&&x.right&&(n+=x.right),this.recordCount++,this.groupArray.push({group:p,node:w})}if(this.settings.groupable.groupFooterRow){var C=this.rowHtml(a.dataset[p],this.recordCount,p,!0,!0);this.hasLeftPane&&C.left&&(e+=C.left),C.center&&(t+=C.center),this.hasRightPane&&C.right&&(n+=C.right)}}else{var k=p;a.treeGrid&&(k=this.recordCount),this.runningCount++;var T,A=this.rowHtml(a.dataset[p],k,p);this.hasLeftPane&&A.left&&(e+=A.left),A.center&&(t+=A.center,a.treeGrid&&null!==(T=this.filterExpr)&&void 0!==T&&(null==T?void 0:T.length)&&$("<table>".concat(A.center,"</table>")).find("tr:first").is(".is-hidden")&&this.filteredCount++),this.hasRightPane&&A.right&&(n+=A.right),a.dataset[p]._isFilteredOut||this.recordCount++,this.visibleRowCount=k+1,a.dataset[p].rowStatus&&(u=!0)}else this.recordCount++}if(this.settings.summaryRow){this.element.addClass("has-summary-row");var S=this.calculateTotals(),E=this.rowHtml(S,this.recordCount,null,!1,!0);this.hasLeftPane&&E.left&&(e+=E.left),E.center&&(t+=E.center),this.hasRightPane&&E.right&&(n+=E.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.settings.spacerColumn&&(this.bodyColGroupHtml+='<col style="width: 100%">'),this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.headerRowLeft||this.tableBodyLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.headerRowRight||this.tableBodyRight).before(this.bodyColGroupRight))),this.hasLeftPane&&h.html(this.tableBodyLeft,e,"*"),h.html(this.tableBody,t,"*"),this.hasRightPane&&h.html(this.tableBodyRight,n,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(u),this.afterRender()},afterRender:function(){var t=this,e=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&e.tableBody.find("tr").each(function(t){var n,i=0,a=0,s=$(this);n=s.height(),e.tableBodyLeft&&(i=e.tableBodyLeft.find("tr").eq(t).height()),e.tableBodyRight&&(a=e.tableBodyLeft.find("tr").eq(t).height());var r=Math.max(i,n,a);return s.css("height",r),e.tableBodyLeft&&(i=e.tableBodyLeft.find("tr").eq(t).css("height",r)),e.tableBodyRight&&(a=e.tableBodyLeft.find("tr").eq(t).css("height",r)),!0}),this.settings.onPostRenderCell)for(var n=function(t){var n=e.settings.columns[t];n.component&&e.tableBody.find("tr").each(function(){var t,i,a=$(this),s=e.settings.treeGrid?e.actualPagingRowIndex(e.actualRowIndex(a)):e.dataRowIndex(a),r=a.attr("data-lineage"),o=e.rowData(s),l=e.columnIdxById(n.id)-((null===(t=e.settings.frozenColumns)||void 0===t||null===(i=null==t?void 0:t.left)||void 0===i||null==i?void 0:i.length)||0),c={row:r||s,cell:l,value:o,rowData:o,col:n,api:e};e.settings.onPostRenderCell(a.find("td").eq(l).find(".datagrid-cell-wrapper .content")[0],c)})},i=0;i<this.settings.columns.length;i++)n(i);var a=e.tableBody.find("select.dropdown");a.dropdown&&a.dropdown(),e.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",function(){var t=$(this),n=t.val(),i=t.closest("tr");e.updateCellNode(i.attr("aria-rowindex"),t.closest("td").index(),n,!1,!0)});var s=e.tableBody.find(".spinbox");s.spinbox&&s.spinbox(),e.settings.source||e.displayCounts(),e.setAlternateRowShading(),e.createDraggableRows();var r=document.activeElement;e.activeCell.isFocused&&(!r||r&&"body"===r.tagName.toLowerCase())&&e.setActiveCell(e.activeCell.row,e.activeCell.cell),e.settings.paging&&e.settings.source&&!e.settings.allowSelectAcrossPages&&(e.preventSelection||(e._selectedRows=[]),e.syncSelectedUI()),e.settings.paging&&e.settings.source&&e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),e.settings.paging&&!e.settings.source&&null===e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),this.stretchColumnDiff<0&&(this.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px")),setTimeout(function(){e.element.trigger("afterrender",{body:e.container.find("tbody"),header:e.container.find("thead"),pager:e.pagerAPI}),t.activateFirstCell()})},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var t=this,e=this;if(e.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var n=e.tableBody.find("tr");if(0===n.length)return;for(var i=function(i){var a=t.settings.columns[i];a.component&&n.each(function(){var t=$(this),n=t.index(),i=e.columnIdxById(a.id),s={row:t.index(),cell:i,value:e.settings.dataset[n],col:a,api:e};e.settings.onDestroyCell(t.find("td").eq(i).find(".datagrid-cell-wrapper .content")[0],s)})},a=0;a<this.settings.columns.length;a++)i(a)}},cacheVirtualStats:function(){var t=this.element[0].offsetHeight,e=this.bodyWrapperCenter[0].scrollTop,n="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25,i=t-n,a="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;"extra-small"===this.settings.rowHeight&&(n=22,a=27),this.virtualRange={rowHeight:a,top:Math.max(e-(this.settings.virtualRowBuffer-1)*a,0),bottom:e+i+(this.settings.virtualRowBuffer-1)*a,totalHeight:a*this.settings.dataset.length,bodyHeight:i}},isRowVisible:function(t){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&t&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=t&&this.pagerAPI.activePage*this.settings.pagesize>=t;0===t&&this.cacheVirtualStats();var e=t*this.virtualRange.rowHeight;return e>=this.virtualRange.top&&e<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var t=this.virtualRange.totalHeight-this.virtualRange.bottom,e=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),e>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),e>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(e,"px")),0===e&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),t>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),t>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(t,"px")),t<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(t,e,n,i,a,s,r){return r=r||this,void 0===t&&(t=this.defaultFormatter),"string"==typeof t?Na[t](e,n,i,a,s,r).toString():t(e,n,i,a,s,r).toString()},rowHtml:function(t,e,n,i,a,s,r){var o,l,c,d=this.settings.summaryRow&&!i&&a,u=this.pagerAPI?this.pagerAPI.activePage:1,h={left:"",center:"",right:""},p=this.settings.treeDepth?this.settings.treeDepth[e]:0,f=0,g=!1;if(!t)return"";var m=!1;if(this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&this.settings.isRowDisabled(n,t)&&(m=!0),t.isRowDisabled&&(m=!0),l=p=p?p.depth:0,this.settings.treeDepth&&this.settings.treeDepth.length)if(t._isFilteredOut)g=!0;else{var v,b=this.settings.treeDepth[e];if(b&&b.depth>1&&null!==(v=b.parents)&&void 0!==v&&(null==v?void 0:v.length))for(var y=0,w=b.parents.length;y<w;y++){var x=b.parents[y],C=this.settings.treeDepth[x];if(C.node&&void 0!==C.node.expanded&&!C.node.expanded){g=!0;break}}}if(this.settings.groupable&&!a){var k=this.settings.groupable;g=void 0!==k.expanded&&!k.expanded,k.expanded&&"function"==typeof k.expanded&&(g=!k.expanded(e,0,null,null,t,this),this.isFooterHidden=g)}var T=this.settings.frozenColumns.left.length,A=this.settings.frozenColumns.right.length,S=this.visibleColumns().length-T-A;if(this.settings.groupable&&i&&!a){var E=Na.GroupRow(e,0,null,null,t,this);return h.left='<tr class="datagrid-rowgroup-header'.concat(g?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(T,'">').concat(E.left||"<span>&nbsp;</span>","</td></tr>"),h.center='<tr class="datagrid-rowgroup-header'.concat(g?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(S,'">').concat(E.center||"<span>&nbsp;</span>","</td></tr>"),h.right='<tr class="datagrid-rowgroup-header'.concat(g?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(A,'">').concat(E.right||"<span>&nbsp;</span>","</td></tr>"),h}if(this.settings.groupable&&i&&a){var $=Na.GroupFooterRow(e,0,null,null,t,this);return h.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat($.left||"<span>&nbsp;</span>","</tr>"),h.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat($.center||"<span>&nbsp;</span>","</tr>"),h.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat($.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,h}var D=e+1+(this.settings.source&&!this.settings.indeterminate?(u-1)*this.settings.pagesize:0);o=this.recordCount%2==0;var I=this.isRowSelected(t),M=t._rowactivated,L={class:"",svg:""};t&&t.rowStatus&&("new"!==t.rowStatus.icon||this.settings.showNewRowIndicator)&&(L.show=!0,L.class=" rowstatus-row-".concat(t.rowStatus.icon),L.icon="success"===t.rowStatus.icon?"#icon-check":"#icon-exclamation",L.title=""!==t.rowStatus.tooltip?' title="'.concat(t.rowStatus.tooltip,'"'):"",L.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(L.title,'><use href="').concat(L.icon,'"></use></svg>'));var P="";if(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(P=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,D,n,t),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(P=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),this.currentPageRows){var N={ariaRowindex:D,actualIndexLineage:s,dataIndex:n,isFilteredOut:t._isFilteredOut};this.currentPageRows.push(N)}for(h.center='<tr role="row" aria-rowindex="'.concat(D,'"')+' data-index="'.concat(n,'"').concat(s?' data-lineage="'.concat(s,'"'):"").concat(this.settings.treeGrid&&t.children?' aria-expanded="'.concat(t.expanded?'true"':'false"'):"").concat(this.settings.treeGrid?' aria-level="'.concat(l,'"'):"").concat(m?' aria-disabled="true"':"").concat(I?' aria-selected="true"':"",' class="datagrid-row').concat(L.class).concat(g?" is-hidden":"").concat(t._isFilteredOut?" is-filtered":"").concat(M?" is-rowactivated":"").concat(m?" is-rowdisabled":"").concat(I?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(this.settings.alternateRowShading&&!o?" alt-shading":"").concat(d?" datagrid-summary-row":"").concat(this.settings.treeGrid?t.children?" datagrid-tree-parent":l>1?" datagrid-tree-child":"":"",'"').concat(P,">"),h.left=h.center,h.right=h.center,f=0;f<this.settings.columns.length;f++){var R,O,B,_,F=this.settings.columns[f],z=this.getContainer(F.id),H="",q=F.summaryRowFormatter||F.formatter||this.defaultFormatter,V=d?q:F.formatter||this.defaultFormatter,j=this.formatValue(V,e,f,this.fieldValue(t,this.settings.columns[f].field),this.settings.columns[f],t,this);if(0===j.indexOf('<span class="is-readonly">')&&(F.readonly=!0),(j.indexOf("datagrid-checkbox")>-1||j.indexOf("btn-actions")>-1)&&(H+=" l-center-text"),j.indexOf("trigger")>-1&&(H+=" datagrid-trigger-cell"),-1===j.indexOf("trigger")&&F&&F.editor){var W=this.getEditorName(F.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(W)>=0&&(H+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(F.editor&&this.settings.editable&&(H+=" has-editor"),F.expanded&&(this.treeExpansionField=F.expanded),F.align&&(H+=" l-".concat(F.align,"-text")),"ellipsis"===F.textOverflow&&(H+=" text-ellipsis"),F.uppercase&&(H+=" uppercase-text"),H+=F.readonly?" is-readonly":"",H+=F.hidden?" is-hidden":"",F.isEditable&&!F.readonly){var U=this.fieldValue(t,this.settings.columns[f].field);F.isEditable(D-1,f,U,F,t)||(H+=" is-readonly")}var G="selectionCheckbox"===F.id||!F.readonly&&void 0!==F.editor?"":'aria-readonly="true"';if(H.indexOf("is-readonly")>-1&&(G='aria-readonly="true"'),F.isReadonly&&!F.readonly&&"selectionCheckbox"!==F.id){var Y=this.fieldValue(t,this.settings.columns[f].field);F.isReadonly(this.recordCount,f,Y,F,t)&&(H+=" is-cell-readonly",G='aria-readonly="true"')}var K=this.fieldValue(t,this.settings.columns[f].field);F.cssClass&&"function"==typeof F.cssClass&&(H+=" ".concat(F.cssClass(this.recordCount,f,K,F,t))),F.cssClass&&"string"==typeof F.cssClass&&(H+=" ".concat(F.cssClass)),H+=F.focusable?" is-focusable":"",H+="Actions"===V.name?" has-btn-actions":"";var X=this.calculateRowspan(K,e,F);if(""!==X){var Q=0;if(c>0&&!F.hidden){var J,Z;c-=1,H+=" is-spanned-hidden";var tt=null===(J=this.settings)||void 0===J||null===(Z=null==J?void 0:J.frozenColumns)||void 0===Z||null==Z?void 0:Z.left.length;tt>0&&f===tt&&(H=H.replace(" is-spanned-hidden"," is-spanned-invisible"),(Q=c+1)>0&&this.visibleColumns().length-f===Q&&(H+=" is-spanned-last")),tt>0&&f<tt&&(H=H.replace(" is-spanned-hidden"," is-spanned-last"))}if(F.colspan&&"function"==typeof F.colspan&&!c){var et=this.fieldValue(t,this.settings.columns[f].field);if((Q=F.colspan(D-1,f,et,F,t,this))>0){var nt,it;c=Q-1;var at=null===(nt=this.settings)||void 0===nt||null===(it=null==nt?void 0:nt.frozenColumns)||void 0===it||null==it?void 0:it.left.length;at>0&&f<at&&(H+=" is-spanned-last")}if(Q>0){var st,rt;c=Q-1;var ot=null===(st=this.settings)||void 0===st||null===(rt=null==st?void 0:st.frozenColumns)||void 0===rt||null==rt?void 0:rt.left.length;ot>0&&f<ot&&-1===H.indexOf("is-spanned-last")&&(H+=" is-spanned-last")}Q>0&&-1===H.indexOf("is-spanned-last")&&this.visibleColumns().length-1===Q&&(H+=" is-spanned-last")}0!==f&&(L.class="",L.svg=""),""!==L.class&&(H+=" rowstatus-cell"),this.isCellDirty(this.settings.groupable?n:e,f)&&(H+=" is-dirty-cell"),""!==H&&(H=H.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "));var lt=null===(R=this.settings.attributes)||void 0===R||null==R?void 0:R.filter(function(t){return"id"===t.name}),ct='aria-describedby="'.concat(1===(null==lt||null==lt?void 0:lt.length)?"".concat(lt[0].value,"-col-").concat(null===(O=F.id)||void 0===O||null==O?void 0:O.toLowerCase()):this.uniqueId("-header-".concat(f)),'"'),dt="";if(0===(null===(B=F.formatter)||void 0===B||null==B?void 0:B.toString().indexOf("function Checkbox"))){var ut;ut=F.isChecked?F.isChecked(K):void 0!==K&&(!0===K||1===parseInt(K,10)),dt=' aria-checked="'.concat(ut,'"')}0===(null===(_=F.formatter)||void 0===_||null==_?void 0:_.toString().indexOf("function SelectionCheckbox("))&&(dt=' aria-checked="'.concat(this.isRowSelected(t),'"')),h[z]+='<td role="gridcell" '.concat(G,' aria-colindex="').concat(f+1,'"')+" ".concat(ct).concat(dt).concat(I?' aria-selected="true"':"").concat(H?' class="'.concat(H,'"'):"").concat(Q?' colspan="'.concat(Q,'"'):"").concat(F.tooltip&&"string"==typeof F.tooltip?' title="'.concat(F.tooltip.replace("{{value}}",K),'"'):"").concat(this.settings.columnGroups?'headers = "'.concat(this.uniqueId("-header-".concat(f))," ").concat(this.getColumnGroup(f),'"'):"").concat(X||"",">").concat(L.svg,'<div class="datagrid-cell-wrapper">'),F.contentVisible&&(F.contentVisible(e+1,f,K,F,t)||(j="")),this.settings.onPostRenderCell&&F.component&&(h[z]+='<div class="content"></div>',j=""),h[z]+="".concat(j,"</div></td>")}}if(this.settings.spacerColumn&&(h.center+='<td class="datagrid-spacer-column"></td>'),h.left+="</tr>",h.center+="</tr>",h.right+="</tr>",this.settings.rowTemplate){var ht=this.settings.rowTemplate,pt=t,ft=this.settings.rowTemplateHeight||107,gt="";ke&&pt&&(gt=ke.compile("{{#dataset}}".concat(ht,"{{/dataset}}"),{dataset:pt})),this.hasLeftPane&&(h.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(ft,'px"></div></div>\n          </td></tr>')),h.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(S+(this.settings.spacerColumn?1:0),'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(gt,"</div></div>\n        </td></tr>"),this.hasRightPane&&(h.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(A,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(ft,'px"></div></div>\n          </td></tr>'))}if(this.settings.expandableRow&&(this.hasLeftPane&&(h.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),h.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(S,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(h.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(A,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),!t.children||r||t._isFilteredOut){if(this.settings.treeGrid&&!r&&t._isFilteredOut)if(t.children){var mt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n+=e.length;for(var i=0,a=e.length;i<a;i++)e[i].children&&(n=t(e[i].children,n));return n}(t.children);this.recordCount+=mt+(t._isFilteredOut&&1===l?1:0)}else 1===l&&this.recordCount++}else for(var vt=0,bt=t.children.length;vt<bt;vt++){var yt=s?"".concat(s,".").concat(n):"".concat(n);this.recordCount++;var wt=this.rowHtml(t.children[vt],this.recordCount,vt,!1,!1,yt);h.left+=wt.left,h.center+=wt.center,h.right+=wt.right}return h},getEditorName:function(t){if(!t)return"";var e=t.name;return function(){}.name||(e=(t.toString().match(/function (.+?)\(/)||[,""])[1]),e?e.toLowerCase():""},calculateTextWidth:function(t){var e=t.name||"",n=0,i=0,a=0,s="",r=!1;if(t.formatter===Na.Colorpicker)s="";else if(t.formatter===Na.Dropdown&&t.options&&"data"!==this.settings.columnSizing){for(var o="",l=0;l<t.options.length;l++)t.options[l].label.length>o.length&&(o=t.options[l].label);o=this.formatValue(t.formatter,0,0,o,t,null,this),s=o=u.stripHTML(o)}else{var c=0,d=this.settings.dataset;this.settings.groupable&&(d=this.originalDataset);for(var h=0;h<d.length;h++){var p=this.fieldValue(d[h],t.field),f=d[h];if(r=(p=this.formatValue(t.formatter,h,0,p,t,f,this)).toString().indexOf("btn-secondary")>-1,c=(p=u.stripHTML(p)).toString().length,this.settings.groupable&&f)for(var g=0;g<f.length;g++){var m=this.fieldValue(f[g],t.field);m=this.formatValue(t.formatter,h,0,m,t,f,this),(c=(m=u.stripHTML(m)).toString().length)>n&&(n=c,s=m)}c>n&&(n=c,s=p)}if(this.filterExpr&&this.filterExpr.length>0){var v=$.grep(this.filterExpr,function(e){return e.columnId===t.id});if(v&&1===v.length){var b=v[0].value;(c=b.toString().length)>n&&(n=c,s=b)}}if(""===s&&(t.formatter===Na.Date||t.formatter===Na.Time)){var y=new Date(9999,11,31,23,59,59,999);y=this.formatValue(t.formatter,0,0,y,t,null,this),s=y=u.stripHTML(y)}}var w=!!t.formatter&&t.formatter.toString().indexOf('<span class="tag')>-1,x=!!t.formatter&&t.formatter.toString().indexOf("datagrid-alert-icon")>-1,C=t.formatter===Na.Date||t.formatter===Na.Time||t.formatter===Na.Lookup||t.formatter===Na.Colorpicker||t.formatter===Na.Dropdown;a+=2*this.getCellPadding(),x&&(a+=20),w&&(a+=10),r&&(a+=50),this.settings.editable&&t.editor===Va.Spinbox&&(a+=46),!this.settings.editable||t.formatter!==Na.Dropdown&&t.formatter!==Na.Lookup&&t.editor!==Va.Time||(a+=10),this.settings.editable&&t.editor===Va.Date&&(a+=5),i=this.calculateTextRenderWidth(s)+a,t.formatter===Na.Colorpicker&&(i=150);var k=void 0===t.sortable||t.sortable?2*this.getCellPadding()+15:2*this.getCellPadding(),T=this.calculateTextRenderWidth(e,!0)+k;return t.filterType&&this.settings.filterable&&(T<2*this.getCellPadding()&&(T=5*this.getCellPadding()+i+36),"checkbox"!==t.filterType&&(""!==s?T<i+(2*this.getCellPadding()+32)&&""!==s&&(T=i+(2*this.getCellPadding()+32)):T<100&&(T=100)),"ellipsis"!==(null==t||null==t?void 0:t.textOverflow)||"small"!==this.settings.rowHeight&&"extra-small"!==this.settings.rowHeight||(T+=6)),"data"===this.settings.columnSizing&&(T=50+2*this.getCellPadding()+(C?25:0)),"header"===this.settings.columnSizing&&(i=0),Math.ceil(Math.max(i,T))},calculateTextRenderWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var n=this.canvas.getContext("2d"),i=st.currentTheme.id.indexOf("uplift")>-1||st.currentTheme.id.indexOf("new")>-1;return this.fontCached&&this.fontHeaderCached||(this.fontCached=st.currentTheme.id&&i?"400 16px arial":"400 14px arial",this.fontHeaderCached=st.currentTheme.id&&i?"600 14px arial":"700 12px arial","extra-small"===this.settings.rowHeight&&(this.fontCached=st.currentTheme.id&&i?"400 14px arial":"400 12px arial",this.fontHeaderCached=st.currentTheme.id&&i?"600 14px arial":"700 12px arial")),n.font=this.fontCached,e&&(n.font=this.fontHeaderCached),n.measureText(t).width},setScrollClass:function(){var t=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),e=this.headerRow?this.headerRow[0].offsetHeight:0,n=parseInt(this.tableBody[0].offsetHeight,10);if(this.element.removeClass("has-vertical-scroll has-visible-last-row has-horizontal-scroll"),n<t-e&&this.element.addClass("has-visible-last-row"),this.hasLeftPane||this.hasRightPane){var i=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>t+2,a=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),s=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>a;i&&this.element.addClass("has-vertical-scroll"),s&&this.element.addClass("has-horizontal-scroll")}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fontCached=null,this.fontHeaderCached=null,this.fixColumnIds()},fixColumnIds:function(){for(var t=0;t<this.settings.columns.length;t++){var e=this.settings.columns[t],n=this.columnById(e.id);if(n.length>1)for(var i=1;i<n.length;i++)n[i].id="".concat(n[i].id,"-").concat(i)}},getStretchColumnIdx:function(){var t=this,e=t.stretchColumnIdx;return-1===e&&"last"!==t.settings.stretchColumn&&t.headerNodes().each(function(n){$(this).attr("data-column-id")===t.settings.stretchColumn&&(e=n)}),e},columnWidth:function(t,e){return this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1),this.calculateColumnWidth(t,e)},calculateColumnWidth:function(t,e){var n,i,a,s=this.visibleColumns(!0),r=e===this.visibleColumns().length-1,o=this.getContainer(t.id);this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1,this.widthPixel=!1),t.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&t.width&&(this.widthPixel="string"!=typeof t.width);var l=t.width;"string"==typeof t.width&&-1===t.width.indexOf("px")&&(this.widthPercent=!0,a=t.width.replace("%",""));var c=this.calculateTextWidth(t);if(this.widthSpecified&&l||(l=Math.max(c,l||0)),(!this.widthSpecified||void 0===t.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(t.id)){var d=Math.round(this.elemWidth/s.length);l=d-(r?2:0),d<c&&(l=c)}if("selectionCheckbox"!==t.id&&"selectionRadio"!==t.id&&"favorite"!==t.id||(l=43,t.width=l),"favorite"===t.id&&(l=62,t.width=l),!t.width&&(null===(n=t.formatter)||void 0===n||null===(i=null==n?void 0:n.toString())||void 0===i||null==i?void 0:i.indexOf("ProcessIndicator"))>-1&&(l=155,t.width=l),"expander"===t.id&&(l=55,t.width=l),"rowStatus"===t.id&&(l=62,t.width=l),"rowReorder"===t.id&&(l=this.settings.groupable?105:62,t.width=l),"drilldown"===t.id&&(l=62,t.width=l),t.minWidth&&l<t.minWidth&&(l=t.minWidth),t.minWidth&&l>t.maxWidth&&(l=t.maxWidth),this.totalWidths[o]+=t.hidden?0:l,r){var u=this.elemWidth-this.totalWidths[o];"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=u),"last"!==this.settings.stretchColumn&&this.settings.stretchColumn!==t.id||(this.stretchColumnIdx=e,u<l?this.stretchColumnWidth=l:(this.stretchColumnDiff=l,this.stretchColumnDiff=u)),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===t.id?(this.stretchColumnIdx=e,this.stretchColumnWidth=l,' style="width: 99%"'):this.widthPercent||void 0!==l?' style="width: '.concat(this.widthPercent?"".concat(a,"%"):"".concat(l,"px"),'"'):""},calculateRowspan:function(t,e,n){var i=0,a=null;if(!n.rowspan)return null;for(var s=0;s<this.settings.dataset.length;s++)t===this.settings.dataset[s][n.field]&&(i++,null===a&&(a=s));return e===a?' rowspan ="'.concat(i,'"'):""},calculateTotals:function(){return this.settings.totals=Ba.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(t){return t+(/(px|%)/i.test("".concat(t))?"":"px")},setupTooltips:function(t,e){if(t||e||this.settings.enableTooltips){var n,i=this,a={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};this.settings.filterable?(a.headerColumn="".concat(a.th," .datagrid-column-wrapper"),a.headerFilter="".concat(a.th," .datagrid-filter-wrapper .btn-menu"),a.header="".concat(a.headerColumn,", ").concat(a.headerFilter)):a.header=a.th,a.iconAlert="".concat(a.td," .icon-alert"),a.iconSuccess="".concat(a.td," .icon-success"),a.iconError="".concat(a.td," .icon-error"),a.iconInfo="".concat(a.td," .icon-info"),a.icons="".concat(a.iconAlert,", ").concat(a.iconSuccess,", ").concat(a.iconError,", ").concat(a.iconInfo),t&&this.settings.enableTooltips?a.str="".concat(a.header,", ").concat(a.td,", ").concat(a.icons,", ").concat(a.rowstatus):a.str=t?"".concat(a.header,", ").concat(a.rowstatus):"".concat(a.header,", ").concat(a.td,", ").concat(a.icons);var s=function(t,e){e=void 0===e?400:e,n=setTimeout(function(){var e=h.hasClass(t,"datagrid-column-wrapper"),n=!!h.hasClass(t.parentNode,"datagrid-filter-wrapper")&&t.parentNode.querySelectorAll(".popupmenu.is-open").length>0,a=$(t).data("gridtooltip")||i.cacheTooltip(t),s=e?t.parentNode:t,r=i.getOuterWidth(s);a&&(a.forced||a.textwidth>r-35)&&!n&&i.showTooltip(a)},e)},r=function(t,e){e=void 0===e?400:e,clearTimeout(n),setTimeout(function(){i.hideTooltip(),h.hasClass(t.parentNode,"datagrid-filter-wrapper")&&i.removeTooltipData(t)},e)};this.element.off("mouseenter.gridtooltip focus.gridtooltip",a.str).on("mouseenter.gridtooltip focus.gridtooltip",a.str,function(){s(this)}).off("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",a.str).on("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",a.str,function(){r(this)}).off("longpress.gridtooltip",a.str).on("longpress.gridtooltip",a.str,function(){s(this,0)}).off("keydown.gridtooltip",a.str).on("keydown.gridtooltip",a.str,function(t){var e=t.which||t.keyCode||t.charCode||0,n=!1;return t.shiftKey&&112===e?s(this,0):27===e&&(n=i.isGridtooltip(),r(this,0)),n&&t.preventDefault(),!n}),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",function(){s(this)}).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",function(){r(this)}).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",function(){s(this,0)})}},getOuterWidth:function(t){var e=getComputedStyle(t);return t.offsetWidth+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10))},closest:function(t,e){return t&&(e(t)?t:this.closest(t.parentNode,e))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(t,e){var n=this.settings,i=e;i||(i=n.treeGrid?n.treeDepth[t].node:this.getActiveDataset()[t]);for(var a=0;a<this.settings.columns.length;a++){var s=this.settings.columns[a];s.hidden||this.updateCellNode(t,a,this.fieldValue(i,s.field),!0)}this.settings.dataset[t]=C.extend(!0,this.settings.dataset[t],e),this.settings.rowReorder&&this.tableBody.data("arrange")&&this.tableBody.data("arrange").updated()},updateColumns:function(t,e){void 0===e&&(e=null);var n=[];this.settings.filterable&&this.filterRowRendered&&(n=this.filterConditions()),this.settings.columns=t,e&&(this.settings.columnGroups=e),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(n)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var t=this.settings.saveUserSettings;!$.isEmptyObject(t)&&this.canUseLocalStorage()&&(t.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),t.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),t.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),t.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),t.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),t.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),t.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},setOriginalColumns:function(){this.originalColumns=C.deepCopy(this.settings.columns)},columnsFromString:function(t,e){if(!t)return[];var n=JSON.parse(t);if(!n)return[];for(var i=0;i<n.length;i++){var a=void 0,s=this.columnById(n[i].id),r=s.width;s&&(a=n[i].hidden,$.extend(n[i],s[0]),void 0!==a?n[i].hidden=a:delete n[i].hidden,e&&(n[i].width=r))}return n},restoreColumns:function(t){if(this.settings.saveColumns&&this.canUseLocalStorage())if(t)this.updateColumns(t);else{var e=localStorage[this.uniqueId("columns")];!t&&e&&(this.originalColumns=C.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(e))}},restoreUserSettings:function(t){var e=this.settings.saveUserSettings;if(t||!$.isEmptyObject(e)&&this.canUseLocalStorage())if(t){if(t.columns&&this.updateColumns(t.columns),t.rowHeight&&this.rowHeight(t.rowHeight),t.sortOrder&&this.setSortColumn(t.sortOrder.sortId,t.sortOrder.sortAsc),t.pagesize&&(this.settings.pagesize=parseInt(t.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(t.pagesize,10),t.activePage||this.pagerAPI.setActivePage(1,!0)),t.showPageSizeSelector&&(this.settings.showPageSizeSelector=t.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(t.showPageSizeSelector)),t.filter&&this.applyFilter(t.filter,"restore"),t.activePage){var n=parseInt(t.activePage,10);this.pagerAPI.setActivePage(n,!0),this.restoreActivePage=!0}}else{if(e.columns){var i=localStorage[this.uniqueId("usersettings-columns")];i&&(this.settings.columns=this.columnsFromString(i))}if(e.rowHeight){var a=localStorage[this.uniqueId("usersettings-row-height")];a&&(this.settings.rowHeight=a)}if(e.sortOrder){var s=localStorage[this.uniqueId("usersettings-sort-order")];s&&(this.sortColumn=JSON.parse(s),this.restoreSortOrder=!0)}if(e.pagesize){var r=localStorage[this.uniqueId("usersettings-pagesize")];r&&(this.settings.pagesize=parseInt(r,10))}if(e.showPageSizeSelector){var o=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(o="true"===o.toString().toLowerCase())&&(this.settings.showPageSizeSelector=o)}if(e.activePage){var l=localStorage[this.uniqueId("usersettings-active-page")];l&&(this.savedActivePage=parseInt(l,10),this.restoreActivePage=!0)}if(e.filter){var c=localStorage[this.uniqueId("usersettings-filter")];c&&(this.savedFilter=JSON.parse(c),this.restoreFilter=!0)}}},copyThenStringify:function(t){if(!t)return JSON.stringify(t);var e=t.map(function(t){var e=C.extend({},t);return e.editorOptions&&delete e.editorOptions,e});return JSON.stringify(e)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var t=C.deepCopy(this.originalColumns),e=this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null;this.updateColumns(t,e)}this.clearFilter()},hideColumn:function(t){var e,n,i,a,s,r,o,l,c=this.columnIdxById(t);if(!(-1===c||null!==(e=this.settings.columns[c])&&void 0!==e&&(null==e?void 0:e.hidden))){this.settings.columns[c].hidden=!0,this.headerNodeCheckbox=this.headerNodes().eq(c),null!==(n=this.settings)&&void 0!==n&&null!==(i=null==n?void 0:n.frozenColumns)&&void 0!==i&&(null==i?void 0:i.left.length)||this.headerNodes().eq(c).addClass("is-hidden"),0===c&&"selectionCheckbox"===t&&null!==(a=this.settings)&&void 0!==a&&null!==(s=null==a?void 0:a.frozenColumns)&&void 0!==s&&(null==s?void 0:s.left.length)?this.headerNodes().eq(c).off().remove():this.headerNodes().eq(c).addClass("is-hidden"),this.colGroupNodes().eq(c).addClass("is-hidden");var d=(null===(r=this.settings)||void 0===r||null===(o=null==r?void 0:r.frozenColumns)||void 0===o||null==o?void 0:o.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(c-d+1,")")).addClass("is-hidden"),this.bodyColGroup.find("col").eq(c-d).addClass("is-hidden"),null!==(l=this.tableBodyLeft)&&void 0!==l&&(null==l?void 0:l.find("> tr > td .datagrid-checkbox-wrapper"))&&(this.bodyNodeCheckboxes=this.tableBodyLeft.find("> tr > td:nth-child(".concat(c+1,")")),this.tableBodyLeft.find("> tr > td:nth-child(".concat(c+1,")")).remove()),this.updateColumnGroup(c,!1),this.hasColSpans){var u=this.element.find(".datagrid-header th").eq(c).attr("colspan");if(u&&u>0){u-=1;for(var h=0;h<u;h++)c+=u,this.tableBody.find("> tr > td:nth-child(".concat(c+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:c,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var t=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",t)},showColumn:function(t){var e,n,i=this.columnIdxById(t);if(-1!==i&&this.settings.columns[i].hidden){this.settings.columns[i].hidden=!1,this.headerNodes().eq(i).removeClass("is-hidden"),this.colGroupNodes().eq(i).removeClass("is-hidden");var a,s,r=(null===(e=this.settings)||void 0===e||null===(n=null==e?void 0:e.frozenColumns)||void 0===n||null==n?void 0:n.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(i-r+1,")")).removeClass("is-hidden"),this.bodyColGroup.find("col").eq(i-r).removeClass("is-hidden"),r)this.tableBodyLeft.find("> tr > td:nth-child(".concat(i+1,")")).removeClass("is-hidden"),this.headerNodeCheckbox&&!this.headerRowLeft.find("> tr th:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(a=this.headerRowLeft)||void 0===a||null==a||a.find("> tr").prepend(this.headerNodeCheckbox)),this.bodyNodeCheckboxes&&!this.tableBodyLeft.find("> tr td:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(s=this.tableBodyLeft)||void 0===s||null==s||s.find("> tr").prepend(this.bodyNodeCheckboxes[i]));if(this.updateColumnGroup(i,!0),this.hasColSpans){var o=this.element.find(".datagrid-header th").eq(i).attr("colspan");if(o&&o>0){o-=1;for(var l=0;l<o;l++)i+=o,this.tableBody.find("> tr > td:nth-child(".concat(i+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:i,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(t,e,n){Ra.exportToCsv(t,e,n,this)},exportToExcel:function(t,e,n){Ra.exportToExcel(t,e,n,this)},copyToDataSet:function(t,e,n,i){Ra.copyToDataSet(t,e,n,i,this)},personalizeColumns:function(){var t=this,e=this,n='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(R.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');n+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:R.translate("PersonalizeColumns"),content:n,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:R.translate("Close"),click:function(t,e){e.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",function(n,i){i&&(e.isColumnsChanged=!1,i.element.find(".searchfield").searchfield({clearable:!0,tabbable:!1}),i.element.find(".listview").listview({source:t.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(t){return t.name||t.id}}}).off("selected.datagrid").on("selected.datagrid",function(t,n){var i=n.elem.find(".checkbox"),a=i.attr("data-column-id"),s=i.prop("checked");if(n.elem.removeClass("is-selected hide-selected-color"),!i.is(":disabled")){e.isColumnsChanged=!0;var r={node:{},api:$(this).data("listview")};if(r.api){var o=e.columnIdxById(a);-1!==o&&r.api.settings.dataset[o]&&(r.node=r.api.settings.dataset[o])}s?(e.hideColumn(a),i.prop("checked",!1),r.node.hidden=!0):(e.showColumn(a),i.prop("checked",!0),r.node.hidden=!1),e.settings.groupable&&e.rerender()}}),i.element.on("close.datagrid",function(){e.isColumnsChanged=!1}),i.element.on("keydown.datagrid",function(t){27===t.keyCode&&(i.close(),$("body").off("beforeopen.datagrid"))}))})},setColumnWidth:function(t,e,n){var i=parseFloat(e),a=this.columnById(t)[0],s=-1;!i||!t||("string"==typeof t&&this.headerNodes().each(function(e){$(this).attr("data-column-id")===t&&(s=e)}),"number"!=typeof e&&(e=i/100*this.element.width()),Math.abs(e-a.width)<2)||("number"==typeof a.colspan&&(e/=a.colspan),a&&(a.width=e),n&&(this.bodyColGroup.find("col").eq(s)[0].style.width="".concat(e,"px")),this.element.trigger("columnchange",[{type:"resizecolumn",index:s,columns:this.settings.columns}]),this.saveUserSettings())},isEllipsisActiveHeader:function(t){return(void 0===(t=t||{}).sortable||t.sortable)&&"ellipsis"===t.textOverflow},activeEllipsisHeaderAll:function(){for(var t=0,e=this.settings.columns.length;t<e;t++){var n=this.settings.columns[t].id,i=this.columnById(n)[0];if(this.isEllipsisActiveHeader(i)){var a=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(n,'"]'));this.activeEllipsisHeader(a)}}},activeEllipsisHeader:function(t){if(t){var e=t.querySelector(".datagrid-column-wrapper .datagrid-header-text"),n=t.scrollWidth<e.scrollWidth+65;t.classList[n?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var t=this,e=this;if(!this.resizeHandle){var n,i,a,s,r;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var o=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",function(){e.currentHeader&&(e.dragging=!0,o=!1,i=e.currentHeader.attr("data-column-id"),n=e.columnById(i)[0],e.isEllipsisActiveHeader(n)&&e.currentHeader[0].classList.add("is-ellipsis-active"))}).on("drag.datagrid",function(l,c){if(e.currentHeader&&n){var d=n.minWidth||12,u=n.maxWidth||2e3,p=e.currentHeader,f=p.index(),g="left"===e.getContainer(p.attr("data-column-id"));t.dragging=!0;var m=c.left+5,v=t.bodyColGroup.find("col").eq(f)[0];g&&(v=t.bodyColGroupLeft.find("col").eq(f)[0]);var b=parseInt(e.currentHeader.width(),10),y=parseInt(v.style.width||b,10);v.style.width.indexOf("%")>-1&&(y=b);var w=parseFloat(e.currentHeader.offsetParent().offset().left),x=parseFloat(e.currentHeader.offset().left),C=0===f?0:x-w-2;e.hasLeftPane&&!g&&0===f&&(C=x-w-2);var k=b-(m-C);if((a=y-k)<d||a>u)e.resizeHandle.css("cursor","inherit");else if(a!==y&&(v.style.width="".concat(a,"px"),(f===t.settings.frozenColumns.left.length-1||f<=t.settings.frozenColumns.left.length-1&&k>0)&&"left"===t.getContainer(i)&&(t.totalWidths.left+=k<0?Math.abs(k):-k,t.tableLeft.css("width",t.totalWidths.left)),K.pressedKeys.get("Shift")&&(o=!0),"fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o)){var T=R.isRTL()?f+1:f-1,A=e.settings.columns[T];if(!A)return;var S=A.minWidth||12,E=A.maxWidth||1e3,$=R.isRTL()?h.getPreviousSibling(e.currentHeader,":not(.is-hidden)"):h.getNextSibling(e.currentHeader,":not(.is-hidden)");r=$.getAttribute("data-column-id");var D=R.isRTL()?h.getPreviousSibling(v,":not(.is-hidden)"):h.getNextSibling(v,":not(.is-hidden)"),I=parseInt($.offsetWidth,10),M=parseInt(D.style.width||I,10);if(D.style.width.indexOf("%")>-1&&(M=I),(s=M+k)<S||s>E)return void e.resizeHandle.css("cursor","inherit");if(s===M||!D)return;D.style.width="".concat(s,"px")}}}).on("dragend.datagrid",function(){t.dragging=!1,e.isEllipsisActiveHeader(n)&&e.activeEllipsisHeader(e.currentHeader[0]),e.setColumnWidth(i,a),r&&("fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o)&&e.setColumnWidth(r,s)})}},displayCounts:function(t){var e,n,i,a,s,r=this,o=r.tableBody.find("tr:visible").length,l=0,c="",d=[],u=r.settings.paging&&!r.settings.source,p=function(t){return R.formatNumber(t,{style:"integer"})};if(!u&&t||(this.recordCount=r.settings.dataset.length,o=r.settings.dataset.length),(this.settings.treeGrid&&u||!t)&&(this.filteredCount=r.settings.dataset.filter(function(t){return t._isFilteredOut}).length,o=r.settings.dataset.length,this.recordCount=r.settings.dataset.filter(function(t){return!t._isFilteredOut}).length),r.settings.groupable&&(l=o,o=r.originalDataset.length,c=(c="({0} ".concat(R.translate(1===l?"Group":"Groups"),")")).replace("{0}",p(l))),r.contextualToolbar&&r.contextualToolbar.length&&(r._selectedRows.forEach(function(t){d.push(t.idx);var e=d.filter(function(t,e){return d.indexOf(t)===e});r.contextualToolbar.find(".selection-count").text("".concat(e.length," ").concat(R.translate("Selected")))}),r.settings.allowSelectAcrossPages&&r.contextualToolbar.find(".selection-count").text("".concat(r._selectedRows.length," ").concat(R.translate("Selected")))),t&&-1!==t&&(o=t),void 0===t&&this.settings.source&&(o=r.settings.dataset.length),void 0===t&&this.settings.source&&null!==(e=this.pagerAPI)&&void 0!==e&&null!==(n=null==e?void 0:e.state)&&void 0!==n&&(null==n?void 0:n.total)&&(o=null===(i=this.pagerAPI)||void 0===i||null===(a=null==i?void 0:i.state)||void 0===a||null==a?void 0:a.total),r.settings.showFilterTotal&&r.filteredCount>0)s=(s=(s="(".concat(R.translate(1===o?"ResultOf":"ResultsOf"),")")).replace("{0}",p(o-r.filteredCount))).replace("{1}",p(o));else{var f=R.translate(1===o?"Result":"Results");s=(s=-1===f.indexOf("{0}")?"({0} ".concat(f,")"):f).replace("{0}",p(o))}if(r.settings.resultsText)if("function"==typeof r.settings.resultsText)if(r.grandTotal)s=r.settings.resultsText(r,r.grandTotal,o===r.grandTotal?0:o);else{var g=0===r.filteredCount?0:o-r.filteredCount;s=r.settings.resultsText(r,o,g)}else s=r.settings.resultsText;if(r.toolbar){h.html(r.toolbar.find(".datagrid-result-count"),s,"<span>"),h.html(r.toolbar.find(".datagrid-group-count"),c,"<span>"),r.toolbar[0].setAttribute("aria-label",r.toolbar.find(".title").text()),r.toolbar.find(".datagrid-row-count").text(o),C.addAttributes(r.toolbar.find(".title"),this,this.settings.attributes,"title"),C.addAttributes(r.toolbar.find(".btn-actions"),this,this.settings.attributes,"actions");var m=r.toolbar.find("#gridfilter");C.addAttributes(m,this,this.settings.attributes,"search"),m.prev("label").attr("for",m.attr("id"))}h.html(r.element.closest(".modal").find(".datagrid-result-count"),s,"<span>"),this.lastCount=o,this.checkEmptyMessage()},setEmptyMessage:function(t){this.element["small"===(null==t||null==t?void 0:t.height)?"addClass":"removeClass"]("empty-message-height-small"),this.emptyMessage?(this.emptyMessage.settings=t,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(t).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(t,e,n){var i=$(e.target),a=i.closest("tr"),s=i.closest("td"),r=s.index(),o=this.settings.treeGrid?this.actualRowIndex(a):this.dataRowIndex(a),l=!0;(i.is("a")||i.closest("a").length)&&(n=!1),n&&(e.stopPropagation(),e.preventDefault());var c=this.settings.dataset[o];if(this.settings.groupable&&(a.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?l=!1:(o=this.actualPagingRowIndex(this.actualRowIndex(a)),(c=this.settings.dataset[this.groupArray[o].group])&&c.values&&(c=c.values[this.groupArray[o].node]))),l){var d={row:o,rowElem:a,cell:r,cellElem:s,item:c,originalEvent:e};this.element.trigger(t,[d])}return!1},verticalScrollToEnd:function(t){var e=t.currentTarget,n=(e.scrollTop+e.clientHeight)/e.scrollHeight*100,i=Math.round(n),a=e.scrollHeight-e.scrollTop-e.clientHeight<1&&100===i;this.element.trigger("scroll",{percent:i,percentScrolled:100}),this.isVerticalScrollToEnd=!1!==a},handleScrollY:function(t){var e=t.currentTarget.scrollTop;e!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=e,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var t=this,e=this;if(e.element.on("focus.datagrid","tbody > tr",function(){if(!e.settings.cellNavigation&&e.settings.rowNavigation){var t=e.rowNodes($(this));t.hasClass("is-active-row")||t.addClass("is-active-row")}}).on("blur.datagrid","tbody > tr",function(){if(!e.settings.cellNavigation&&e.settings.rowNavigation){var t=e.rowNodes($(this));t.hasClass("is-active-row")&&t.removeClass("is-active-row")}}),this.settings.paging&&(this.pagerId=$(".pager-toolbar .btn-menu").attr("aria-controls"),this.tableBody.on("page.".concat("datagrid"),function(n,i){"filtered"===i.type&&t.settings.source||(e.closePopupmenuOnPaging(),e.saveUserSettings(),e.render(null,i),e.afterPaging(i))}).on("pagesizechange.".concat("datagrid"),function(t,n){n.preserveSelected=!0,e.closePopupmenuOnPaging(),e.render(null,n),e.afterPaging(n)})),e.settings.showHoverState&&e.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",function(){var t=e.rowNodes($(this));t.addClass("is-hover-row").removeClass("is-clickable"),e.settings.cellNavigation||!1===e.settings.selectable||t.addClass("is-clickable")}).on("mouseleave.datagrid","tbody > tr",function(){e.rowNodes($(this)).removeClass("is-hover-row")}),(this.hasLeftPane||this.hasRightPane||this.hasVerticalScrollbar)&&(e.element.find(".datagrid-wrapper").on("scroll.table",function(t){e.handleScrollY(t),e.verticalScrollToEnd(t)}),e.element.find(".datagrid-wrapper").on("wheel.table",function(t){0!==t.originalEvent.deltaY&&(t.currentTarget.scrollTop+=t.originalEvent.deltaY,t.preventDefault(),e.handleScrollY(t),e.verticalScrollToEnd(t))})),this.settings.virtualized){var n=0,i=0;e.bodyWrapperCenter.on("scroll.vtable",g(function(){var t=this.scrollTop,i=t>e.virtualRange.bottom-e.virtualRange.bodyHeight-25,a=t<e.virtualRange.top+25;t!==n&&(a||i)&&(n=this.scrollTop,e.clearCache(),e.renderRows())},0)),$("body").on("resize.vtable",function(){this.offsetHeight!==i&&(i=this.scrollTop,e.clearCache(),e.renderRows())})}e.settings.frozenColumns.left.length&&$("body").on("resize.frozencolumns",function(){e.setScrollClass()}),this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",function(t){var n=$(t.target).parent();return n.is(".datagrid-filter-wrapper")||n.is(".lookup-wrapper")||n.is(".has-close-icon-button")||(t.stopPropagation(),e.setSortColumn($(this).attr("data-column-id"))),!1}),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",function(t){var e=t.currentTarget.getAttribute("href");e&&"#"!==e||t.preventDefault()}),e.settings.allowPasteFromExcel&&e.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",function(t){var n;n=t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData?t.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var i=/\n/.exec(n),a=/\r/.exec(n),s=/\r\n/.exec(n);if((!e.activeCell||!e.activeCell.node.hasClass("is-readonly"))&&(n&&a||i||s)){var r=i?n.split("\n"):n.split("\r");s&&(r=n.split("\r\n")),r.pop();var o=parseInt($(t.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),l=parseInt($(t.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;e.editor&&e.editor.input&&e.commitCellEdit(),e.copyToDataSet(r,o,l,e.settings.dataset)}}),this.element.off("click.datagrid").on("click.datagrid","tbody td",function(t){var n=null,i=null,a=$(t.target),s=a.closest("td");if(1!==$(t.currentTarget).closest(".datagrid-expandable-row").length||"gridcell"===$(t.currentTarget).attr("role"))if(!s.is(".has-btn-actions")||a.is(".btn-actions")){if(a.parents("td").length>1&&(t.preventDefault(),t.stopPropagation()),e.triggerRowEvent("click",t,!0),e.setActiveCell(s),a.is(".datagrid-expand-btn"))return n=$(this).closest("tr"),i=e.actualRowIndex(n),e.toggleRowDetail(i),e.toggleGroupChildren(n),e.toggleChildren(t,i),!1;var r=a.is(".datagrid-selection-checkbox")||1===a.find(".datagrid-selection-checkbox").length,o=a.is(".datagrid-selection-radio")||1===a.find(".datagrid-selection-radio").length,l=!!e.settings.clickToSelect||!!r||o;a.is(".datagrid-drilldown")&&(l=!1),"mixed"===e.settings.selectable&&((l=r)||(t.shiftKey&&e.activatedRow().length&&(e.selectRowsBetweenIndexes([e.activatedRow()[0].row,a.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()),e.toggleRowActivation(a.closest("tr")))),l&&("multiple"===e.settings.selectable||"mixed"===e.settings.selectable)&&t.shiftKey?(e.selectRowsBetweenIndexes([e.lastSelectedRow,a.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()):l&&e.toggleRowSelection(a.closest("tr"));var c=s.attr("aria-colindex")-1,d=e.columnSettings(c);if(!d||a.is(".datagrid-checkbox")||d.editor!==Va.Checkbox){var u=e.makeCellEditable(e.activeCell.rowIndex,e.activeCell.cell,t);if(d.click&&"function"==typeof d.click&&a.is("button, input[checkbox], a, a.search-mode i")||a.parent().is("button:not(.trigger)")){var h=$(this).closest("tr"),p=e.actualRowIndex(h);i=e.dataRowIndex(h);var f=e.settings.treeGrid?e.settings.treeDepth[p].node:e.settings.dataset[i];if(s.hasClass("is-focusable")&&!a.is(e.buttonSelector)&&!a.parent("button").is(e.buttonSelector))return;e.settings.groupable&&(h.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(p=e.actualPagingRowIndex(e.actualRowIndex(h)),(f=e.settings.dataset[e.groupArray[p].group])&&f.values&&(f=f.values[e.groupArray[p].node]))),(!s.hasClass("is-cell-readonly")&&!a.is("[disabled]")&&a.is("button, input[checkbox], a, a.search-mode i")||a.parent().is("button"))&&d.click(t,[{row:p,cell:e.activeCell.cell,item:f,originalEvent:t}]),a.is("[disabled]")&&d.formatter===Na.Hyperlink&&(t.stopImmediatePropagation(),t.preventDefault())}if(d.menuId){e.closePrevPopupmenu();var g=$(this).find("button");g.popupmenu({attachToBody:!0,menuId:d.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return s.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",function(){var t=$(this);t.data("popupmenu")&&!t.data("tooltip")&&t.data("popupmenu").destroy()}),d.selected&&g.off("selected.gridpopupbtn").on("selected.gridpopupbtn",d.selected)}u&&setTimeout(function(){$("textarea, input",s).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",s).length&&(e.quickEditMode=!0)},0)}}else e.setActiveCell(s)}),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",function(){t.rerender()}),$(window).on("resize.datagrid",function(){var n=0;for(t.clearCache(),n=0;n<e.settings.columns.length;n++){var i=e.settings.columns[n];e.columnWidth(i,n)}(e.stretchColumnDiff>0||e.stretchColumnWidth>0)&&(e.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(e.stretchColumnDiff>0?"".concat(e.stretchColumnDiff,"px"):"".concat(e.stretchColumnWidth,"px")))})),this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",function(t){e.triggerRowEvent("dblclick",t,!0)}),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody td",function(t){var n=$(t.currentTarget);t.stopPropagation(),e.closePrevPopupmenu(),e.triggerRowEvent("contextmenu",t,!!e.settings.menuId);var i=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0};return!i()||!C.isSubscribedTo(e.element[0],t,"contextmenu","datagrid")&&!i()||(t.preventDefault(),e.setActiveCell(parseInt(n.parent().attr("aria-rowindex"),10)-1,parseInt(n.attr("aria-colindex"),10)-1),e.activeCell.node.focus(),n.popupmenu({menuId:e.settings.menuId,eventObj:t,beforeOpen:e.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",function(t,n){e.settings.menuSelected&&e.settings.menuSelected(t,n)}).off("close.gridpopuptr").on("close.gridpopuptr",function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()}),!1)}),this.headerRow.add(this.headerRowLeft).off("mousemove.datagrid").on("mousemove.datagrid","th",function(t){if(!e.dragging&&(e.currentHeader=$(t.target).closest("th"),e.currentHeader.hasClass("is-resizable")&&!e.currentHeader.hasClass("datagrid-header-spacer-column"))){var n=e.currentHeader.closest(".header-detail"),i=n.length?parseInt(n.css("margin-left"),10):0,a=parseInt(e.currentHeader.position().left,10)-(i||0)+e.element.scrollLeft(),s=a+e.currentHeader.outerWidth(),r=t.pageX-a>s-t.pageX,o=0;o=r?s-5:a-5;var l=e.currentHeader.parent().find("th:visible").index(e.currentHeader);(0===l&&(R.isRTL()?r:!r)||l===e.visibleColumns().length)&&(o="-999"),R.isRTL()||r||(e.currentHeader=e.currentHeader.prevAll(":visible").not(".is-hidden").first()),R.isRTL()&&!r&&(e.currentHeader=e.currentHeader.nextAll(":visible").not(".is-hidden").first()),e.currentHeader.hasClass("is-resizable")&&(e.createResizeHandle(),e.resizeHandle[0].style.left="".concat(o,"px"),e.resizeHandle[0].style.cursor="")}}).off("contextmenu.datagrid").on("contextmenu.datagrid","th",function(t){return!e.settings.headerMenuId||(t.preventDefault(),e.closePrevPopupmenu(),$(t.currentTarget).popupmenu({menuId:e.settings.headerMenuId,eventObj:t,attachToBody:!0,beforeOpen:e.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",function(t,n){e.settings.headerMenuSelected(t,n)}).off("close.gridpopupth").on("close.gridpopupth",function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()}),!1)}),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",function(){var t=$(this);t.hasClass("is-checked")?(t.removeClass("is-checked").attr("aria-checked","false"),e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows()):(t.addClass("is-checked").attr("aria-checked","true"),e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows())}),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",function(t){var n=t.target;$(n).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout(function(){var t=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&e.editor){if(t.is(".spinbox, .trigger, .code-block-actions")||!$(n).is(":visible"))return;if(t&&e.editor.className&&t.closest(e.editor.className).length>0)return;e.commitCellEdit()}},150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||e.editor&&e.editor.input&&e.commitCellEdit()})},closePopupmenuOnPaging:function(){var t=this.element.find(".datagrid-filter-wrapper .btn-filter.is-open"),e=null==t||null==t?void 0:t.data("popupmenu");$(".pager-toolbar .btn-menu").attr("aria-controls",this.pagerId).length&&(null==e||null==e||e.close(!0,!0))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")})},refreshSelectedRowHeight:function(){var t=this.element.parent().find(".toolbar:not(.contextual-toolbar)").find(".btn-actions").data("popupmenu");if(null!=t&&(null==t?void 0:t.wrapper)){var e=t.wrapper.find('[data-option="row-extra-small"]'),n=t.wrapper.find('[data-option="row-small"]'),i=t.wrapper.find('[data-option="row-short"]'),a=t.wrapper.find('[data-option="row-medium"]'),s=t.wrapper.find('[data-option="row-normal"]'),r=t.wrapper.find('[data-option="row-large"]');"extra-small"===this.settings.rowHeight&&(e.parent().addClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"short"!==this.settings.rowHeight&&"small"!==this.settings.rowHeight||(e.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(e.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().addClass("is-checked"),s.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight||(e.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),s.parent().addClass("is-checked"),r.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))}},appendToolbar:function(){var t=null,e="",n=null,i=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)").length)t=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{t=$('<div class="toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(e=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),e||(e=t.find(".title")),t.append(e),this.settings.toolbar.results&&e.append('<span class="datagrid-result-count"></span>');var s=$('<div class="buttonset"></div>').appendTo(t);if(this.settings.toolbar.keywordFilter){var r=$('<label class="audible" for="gridfilter">'.concat(R.translate("Keyword"),"</label>")),o=$('<input class="searchfield" name="searchfield" placeholder="'.concat(R.translate("Keyword"),'" id="gridfilter">'));s.append(r),this.settings.toolbar.collapsibleFilter||o.attr("data-options",'{ "collapsible": false }'),s.append(o)}this.settings.toolbar.dateFilter&&s.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(R.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((n=$('<div class="more"></div>').insertAfter(s)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),t.addClass("has-more-button"));var l=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&l.append('<li><a href="#" data-option="personalize-columns">'.concat(R.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&l.append('<li><a href="#" data-option="reset-layout">'.concat(R.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&l.append('<li><a href="#" data-option="export-to-excel">'.concat(R.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.advancedFilter&&l.append('<li><a href="#">'.concat(R.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&l.append('<li><a href="#">'.concat(R.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(R.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&l.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(R.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("extra-small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-extra-small">').concat(R.translate("ExtraSmall"),"</a></li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight||"small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-small">').concat(R.translate("Small"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(R.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-large">').concat(R.translate("Large"),"</a></li>")),!0===this.settings.toolbar.filterRow&&l.append("".concat('<li class="separator"></li><li class="heading">').concat(R.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(R.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(R.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(R.translate("ClearFilter"),"</a></li>")),"object"===a(this.settings.toolbar.filterRow)){var c='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(c+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(R.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(c+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(R.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(c+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(R.translate("ClearFilter"),"</a></li>")),l.append(c)}this.settings.toolbar.actions&&n.append(l),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(t):this.element.before(t)}var d=t.find(".btn-actions"),u=t.is(".flex-toolbar");if(this.settings.stickyHeader&&t.addClass("is-sticky"),u||d.popupmenu(),(u?t:d).on("selected",function(t,e,n){var a=null!=e&&(null==e?void 0:e.attr)?null==e||null==e?void 0:e.attr("data-option"):null==n||null==n?void 0:n.attr("data-option");a&&("row-extra-small"!==a&&"row-small"!==a&&"row-short"!==a&&"row-medium"!==a&&"row-normal"!==a&&"row-large"!==a||i.rowHeight(a.substr(4)),"personalize-columns"===a&&i.personalizeColumns(),"reset-layout"===a&&i.resetColumns(),"export-to-excel"===a&&i.exportToExcel(),"show-filter-row"===a&&i.toggleFilterRow(),"run-filter"===a&&i.applyFilter(null,"menu"),"clear-filter"===a&&i.clearFilter())}),this.settings.initializeToolbar&&!t.data("toolbar")&&!t.hasClass("flex-toolbar")){var h=$.fn.parseOptions(t);this.settings.toolbar.fullWidth&&(h.rightAligned=!0),t.toolbar(h)}if(this.settings.initializeToolbar&&t.hasClass("flex-toolbar")&&!t.data("toolbarFlex")){var p=$.fn.parseOptions(t);t.toolbarFlex(p)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var f=t.find(".searchfield"),g=f.parent().find(".close.icon");f.off("keypress.datagrid").on("keypress.datagrid",function(t){13!==t.keyCode&&"change"!==t.type||(t.preventDefault(),i.keywordSearch(f.val()))}),g.off("click.datagrid").on("click.datagrid",function(){i.keywordSearch(f.val())})}this.settings.toolbar&&this.settings.toolbar.contextualToolbar&&(this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")),this.toolbar=t,this.element.addClass("has-toolbar")}},rowHeight:function(t){var e=[];t&&(this.settings.rowHeight!==t&&e.push({before:this.settings.rowHeight,after:t}),this.settings.rowHeight=t);var n=this.settings.rowHeight;return"short"===n&&(n="small"),"large"===n&&(n="normal"),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("extra-small-rowheight small-rowheight short-rowheight medium-rowheight normal-rowheight large-rowheight").addClass("".concat(n,"-rowheight")),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===t||"large"===t?40:"medium"===t?30:25,"extra-small"===t&&(this.virtualRange.rowHeight=22)),this.saveUserSettings(),this.refreshSelectedRowHeight(),this.rerender(),e.length&&this.element.triggerHandler("rowheightchanged",e),this.settings.rowHeight},keywordSearch:function(t){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each(function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")}),this.element.find(".search-mode").each(function(){var t=$(this),e=t.text();t.text(e.replace("<i>","").replace("</i>",""))}),t=(t||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:t,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched",type:"filtered"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(t)},setSearchActivePage:function(t){if(this.pagerAPI){var e=this;t||(t={});var n=!0;this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?(t.activePage=this.pagerAPI.filteredActivePage||1,this.settings.source&&this.settings.allowSelectAcrossPages&&t.activePage!==this.activePage&&(n=!1)):""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(t=i(t)):this.restoreActivePage||(t=i(t),this.restoreActivePage=!1),n&&(t.activePage=this.activePage),this.renderPager(t)}function i(t){return t.activePage=1,e.grandTotal&&(t.grandTotal=e.grandTotal),t}},filterKeywordSearch:function(){var t,e,n,i,a=this,s=a.filterExpr,r=function(t,e){var n=!1,i=function(n){var i=a.columnById(n)[0],r=a.fieldValue(t,i.field),o=a.settings.columns.indexOf(i);return a.formatValue(i.formatter,e,o,r,i,t,a).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(s.value)>-1};return"all"===s.column?a.element.find("th:visible").each(function(){var t=$(this).attr("data-column-id");if(t&&(n=i(t)))return!1}):s.columnId&&(n=i(s.columnId)),n};if(s&&1===s.length)if(s=s[0],a.settings.treeGrid)for(n=0,i=(t=a.settings.treeDepth).length;n<i;n++)e=""!==s.value&&!r(t[n].node,n),t[n].node._isFilteredOut=e;else for(n=0,i=(t=a.settings.dataset).length;n<i;n++)e=""!==s.value&&!r(t[n],n),t[n]._isFilteredOut=e},highlightSearchRows:function(t){var e=this,n=this;t&&""!==t&&n.tableBody.find("tr").toArray().forEach(function(i){var a=n.rowNodes(i.getAttribute("aria-rowindex")-1),s=function(i){var a=!1;return i.toArray().forEach(function(i){[].slice.call(i.querySelectorAll("td")).forEach(function(i){var s=i.innerText.toLowerCase(),r=!!n.settings.searchExpandableRow||!h.hasClass(e,"datagrid-expandable-row");s.indexOf(t)>-1&&r&&(a=!0,[].slice.call(i.querySelectorAll("*")).forEach(function(e){[].slice.call(e.childNodes).forEach(function(e){var n=e.parentElement;if(3===e.nodeType&&"i"!==n.tagName.toLowerCase()&&u.unescapeHTML(n.innerHTML)===e.textContent){var i=e.textContent,a=new RegExp("(".concat(E.escapeRegExp(t),")"),"gi");h.addClass(n,"search-mode"),h.html(n,i.replace(a,"<i>$1</i>"))}})}))})}),a}(a);s||a.find(".datagrid-row-detail").length?n.settings.searchExpandableRow&&s&&a.is(".datagrid-expandable-row")&&""!==t&&(a.prev().show(),a.prev().find(".datagrid-expand-btn").addClass("is-expanded"),a.prev().find(".plus-minus").addClass("active"),a.addClass("is-expanded").css("display","table-row"),a.find(".datagrid-row-detail").css("height","auto")):a.addClass("is-filtered").hide()})},getActiveDataset:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;return t.groupable&&(e=this.originalDataset),e},getDataset:function(){return this.settings.dataset.map(function(t){return delete t._isFilteredOut,t})},selectAllRows:function(){for(var t=[],e=this.getActiveDataset(),n=0,i=e.length;n<i;n++){var a=this.settings.groupable?n:this.pagingRowIndex(n);this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch?e[n]._isFilteredOut||e[n]._selected||t.push(a):e[n]._selected||t.push(a)}this.dontSyncUi=!0,this.selectRows(t,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(t,e){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var n=this._selectedRows.length-1;n>=0;n--)if(this._selectedRows[n]){var i=this.settings.groupable?this._selectedRows[n].idx:this.pagingRowIndex(this._selectedRows[n].idx);this.unselectRow(i,!0,!0)}this.settings.dataset.map(function(t){delete t._selected}),this.dontSyncUi=!1;var a=this.element.closest(".lookup-modal");this._selectedRows=1===a.length?this._selectedRows:[],this.displayCounts(),t||this.syncSelectedUI(),e||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map(function(t){delete t._selected})},unSelectAllRowsCurrentPage:function(t){var e,n,i=this,a=this.settings;this.dontSyncUi=!0,null===(e=this.currentPageRows)||void 0===e||null==e||e.forEach(function(t){var e=a.groupable?t.dataIndex:i.pagingRowIndex(t.dataIndex);i.unselectRow(e,!0,!0)});var s=this.getActiveDataset(),r=(null===(n=this.currentPageRows)||void 0===n||null==n?void 0:n.map(function(t){return t.dataIndex}))||[];s.filter(function(t,e){return r.indexOf(e)>-1}).map(function(t){return delete t._selected}),this.dontSyncUi=!1,t||this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])},selectAllRowsCurrentPage:function(t){var e;this.dontSyncUi=!0;var n=(null===(e=this.currentPageRows)||void 0===e||null==e?void 0:e.map(function(t){return t.dataIndex}))||[];n.length&&this.selectRowsBetweenIndexes([n[0],n[n.length-1]]),this.dontSyncUi=!1,t||this.syncSelectedUI()},isRowSelected:function(t){return!!t&&!0===t._selected},selectNode:function(t,e,n,i){var a=null,s=null,r="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(n&&!this.isRowSelected(n)||i)&&(t.addClass(r).attr("aria-selected","true"),(a=t.find(".datagrid-selection-checkbox").closest("td")).length&&(a.attr("aria-checked","true"),a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked")),(s=t.find(".datagrid-selection-radio").closest("td")).length&&(this.unSelectAllRows(),s.attr("aria-checked","true"),s.find(".datagrid-cell-wrapper .datagrid-radio").addClass("is-checked")),n&&(n._selected=!0))},selectRow:function(t,e,n){var i,a=this,s=null,r=this,o=this.settings,l={};if(void 0!==t&&-1!==t&&o.selectable&&!this.isRowDisabled(t)&&(s=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),i=this.dataRowIndex(s),isNaN(i)&&(i=t),s&&(s.length||!o.source))){if("function"==typeof o.onBeforeSelect&&!n&&!1===o.onBeforeSelect({node:s,idx:i}))return;var c=function(t,e){return!!a._selectedRows.filter(function(n){return function(t,e,n){return n&&n.idx===t&&n.elem&&n.elem.is(e)}(t,e,n)}).length};if("single"===o.selectable){var d=-1;this._selectedRows.length>0?d=this._selectedRows[0].pagingIdx:s[0]&&s[0].classList.contains("is-selected")&&(d=i),-1!==d&&(this.unselectRow(d,!0,!0),!s.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var u=o.source&&"multiple"===o.selectable&&o.allowSelectAcrossPages;if(!s.hasClass("is-selected")||u){var h;if(o.treeGrid){var p=parseInt(s.attr("aria-level"),10);if(h=o.treeDepth[r.pagerAPI&&o.source?s.index():t].node,s.is(".datagrid-tree-parent")&&"multiple"===o.selectable)s.add(s.nextUntil('[aria-level="'.concat(p,'"]'))).each(function(t){var e=$(this),n=e.attr("aria-rowindex")-1,i=r.actualPagingRowIndex(n),a=o.treeDepth[i].node;if(o.selectChildren||!o.selectChildren&&0===t){var d=!e.is(s)&&!e.hasClass("is-selected");if(r.selectNode(e,n,a),d&&!c(i,e)){if(l={idx:i,data:a,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var u=r.getUniqueRowID(a);u&&(l.uniqueRowID=u)}r._selectedRows.push(l)}}});else if("siblings"===o.selectable){var f,g;r.settings.selectAllCurrentPage?r.unSelectAllRowsCurrentPage(!0):r.unSelectAllRows(!0,!0),1===p?f=s.parent().find('[aria-level="1"]'):p>1&&(f=s.nextUntil('[aria-level="'.concat(p-1,'"]')).filter('[aria-level="'.concat(p,'"]')),g=s.prevUntil('[aria-level="'.concat(p-1,'"]')).filter('[aria-level="'.concat(p,'"]'))),s.add(f).add(g).each(function(t){var e=$(this),n=e.attr("aria-rowindex")-1,i=r.actualPagingRowIndex(n),a=o.treeDepth[i].node;if(o.selectChildren||!o.selectChildren&&0===t){var d=!e.is(s)&&!e.hasClass("is-selected");if(r.selectNode(e,n,a),d&&!c(i,e)){if(l={idx:i,data:a,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:o.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var u=r.getUniqueRowID(a);u&&(l.uniqueRowID=u)}r._selectedRows.push(l)}}})}else r.selectNode(s,t,h);r.setNodeStatus(s)}else{if(h=o.dataset[i],o.groupable){var m=r.actualPagingRowIndex(r.actualRowIndex(s));if(isNaN(m))return;var v=r.groupArray[m];if(h=r.settings.dataset[v.group].values[v.node],!c(h.idx,s)){if(l={idx:h.idx,data:h,elem:s,group:o.dataset[r.groupArray[m].group],page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:i,pagesize:r.settings.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var b=r.getUniqueRowID(h);b&&(l.uniqueRowID=b)}this._selectedRows.push(l)}}r.selectNode(s,i,h),r.lastSelectedRow=t}if(!o.groupable){var y=r.actualPagingRowIndex(t);if(-1===y&&(y=t),!c(y,r.visualRowNode(y))){if(l={idx:y,data:h,elem:r.visualRowNode(y),page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:t,pagesize:r.settings.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var w=r.getUniqueRowID(h);w&&(l.uniqueRowID=w)}this._selectedRows.push(l)}}}e||r.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(t){t.sort(function(t,e){return t-e});for(var e=t[0];e<=t[1];e++)this.selectRow(e);this.displayCounts()},syncHeaderCheckbox:function(t){if(0!==this.headerNodes().length){var e=this.settings,n=this.getActiveDataset(),i=this.headerNodes().find(".datagrid-checkbox"),a=t.length,s=this._selectedRows.length,r=i.data("selected");if(e.selectAllCurrentPage&&this.currentPageRows&&n.length!==t.length){var o,l=(null===(o=this.currentPageRows)||void 0===o||null==o?void 0:o.map(function(t){return t.dataIndex}))||[];s=n.filter(function(t,e){return l.indexOf(e)>-1}).filter(function(t){return t._selected}).length}e.source&&e.allowSelectAcrossPages&&(s=n.filter(function(t){return t._selected}).length),s!==a&&s>0&&"partial"===r||s===a&&"all"===r&&0!==s||0===s&&"none"===r||(s>0&&i.data("selected","partial").addClass("is-checked is-partial").attr("aria-checked","mixed"),s===a&&i.data("selected","all").addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),0===s&&i.data("selected","none").removeClass("is-checked is-partial").attr("aria-checked","false"))}},getUniqueRowID:function(t){var e=null;if(this.settings.columnIds.length>0){e="rowId";for(var n=0;n<this.settings.columnIds.length;n++)e+=" ".concat(t[this.settings.columnIds[n]]);e=e.replace(/([0-9A-Z]+)/g,function(t,e){return" ".concat(e)}).replace(/([0-9a-z]+)/g,function(t,e){return"".concat(e," ")}).trim(),e=u.toCamelCase(e)}return e},syncSelectedRows:function(){for(var t,e=this,n=this.settings,i=n.groupable&&this.originalDataset?this.originalDataset:n.dataset,a=null,s=function(t){var s=n.groupable?e.dataRowNode(a):e.visualRowNode(a);s[0]&&(e._selectedRows[t].elem=s,e.selectNode(s,a,i[a],!0))},r=0,o=this._selectedRows.length;r<o;r++){var l=(t=this._selectedRows[r])?t.uniqueRowID:null;if(this.settings.source&&this.settings.allowSelectAcrossPages&&l){for(var c=0,d=i.length;c<d;c++)if(l===this.getUniqueRowID(i[c])){var u=n.groupable?this.dataRowNode(c):this.visualRowNode(c);u[0]&&(this._selectedRows[r].elem=u,this.selectNode(u,c,i[c],!0))}}else this.pagerAPI&&this._selectedRows[r].page===this.pagerAPI.activePage&&(a=this._selectedRows[r].idx,s(r)),this._selectedRows[r].pagesize===n.pagesize||n.groupable||(a=this._selectedRows[r].pagingIdx,n.dataset[a]?(s(r),this._selectedRows[r].idx=a,this._selectedRows[r].page=this.pagerAPI.activePage,this._selectedRows[r].pagesize=n.pagesize):(this._selectedRows[r].idx=a%n.pagesize,this._selectedRows[r].page=Math.round(a/n.pagesize)+1,this._selectedRows[r].pagesize=n.pagesize))}},calculatePagerInfo:function(t,e,n){for(var i=this.settings,a=e||i.treeGrid?i.treeDepth:i.dataset,s={idx:t,page:1,pagesize:n="number"==typeof n&&n>0?n:i.pagesize,numOfPages:Math.ceil(a.length/n)},r=0;r<s.numOfPages;r++){if(t>=(s.page-1)*s.pagesize&&t<s.page*s.pagesize){s.pagingIdx=t-s.pagesize*r;break}s.page++}return s},syncSelectedRowsIdx:function(){var t=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset;if(0!==this._selectedRows.length&&0!==t.length){this._selectedRows=[];for(var e=0;e<t.length;e++)if(t[e]._selected){var n={idx:e,data:t[e],elem:this.dataRowNode(e),pagingIdx:e,pagesize:this.settings.pagesize};if(this.settings.groupable){var i=this.rowNodesByDataIndex(e);if(i.length){var a=this.actualPagingRowIndex(this.actualRowIndex(i)),s=this.groupArray[a].group;n.group=this.settings.dataset[s],n.page=this.calculatePagerInfo(s).page}}else n.page=this.calculatePagerInfo(e).page;this._selectedRows.push(n)}}},syncSelectedUI:function(){var t=this,e=this.getActiveDataset(),n=e;if(this.settings.selectAllCurrentPage){var i,a=(null===(i=this.currentPageRows)||void 0===i||null==i?void 0:i.map(function(t){return t.dataIndex}))||[];n=e.filter(function(t,e){return a.indexOf(e)>-1})}var s=n;if(this.filterRowRendered){s=[];for(var r=0,o=n.length;r<o;r++)n[r]._isFilteredOut||s.push(r)}this.syncHeaderCheckbox(s),1!==this.contextualToolbar.length||this.dontSyncUi||(0===this._selectedRows.length&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){t.contextualToolbar.css("display","none")}).animateClosed(),!(this._selectedRows.length>0)||0!==this.contextualToolbar.height()&&this.contextualToolbar.is(":visible")&&this.contextualToolbar.hasClass("is-hidden")||(this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(R.translate("Selected"))),this.contextualToolbar.removeClass("is-hidden").css("display","block").one("animateopencomplete.datagrid",function(){$(this).removeClass("is-hidden").triggerHandler("recalculate-buttons")}).animateOpen()))},activateRow:function(t){this.activatedRow()[0].row!==t&&this.toggleRowActivation(t)},deactivateRow:function(){var t=this.activatedRow()[0].row;t>=0&&this.toggleRowActivation(t)},activatedRow:function(){var t=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var e=this.settings,n=e.treeGrid?e.treeDepth:e.dataset,i=this.tableBody.find("tr.is-rowactivated");if(i.length){var a=this.dataRowIndex(i),s=e.indeterminate?a:this.actualRowIndex(i);t=[{row:s,item:n[s],elem:i}]}else{t=null;for(var r=0;r<n.length;r++)if(n[r]._rowactivated){t=[{row:r,item:n[r],elem:void 0}];break}null===t&&(t=[{row:-1,item:void 0,elem:i}])}}return t},toggleRowActivation:function(t){var e,n,i,a=this.settings,s=a.treeGrid?a.treeDepth:a.dataset;if("number"==typeof t){if(e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(t+1,'"]')),i=t,this.pagerAPI&&a.source&&a.indeterminate){var r=t+(this.pagerAPI.activePage-1)*a.pagesize;e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(r+1,'"]'))}}else e=(n=t instanceof jQuery?t:$(t))[0],i=a.treeGrid||a.groupable?this.actualRowIndex(n):this.dataRowIndex(n);a.indeterminate&&!e&&(e=(n=this.actualRowNode(i))[0]),s[i]&&s[i]._rowactivated?this.deactivateRowNode(i,s):(this.deactivateAllRowNodes(s),this.activateAllRowNodes(i,s))},activateAllRowNodes:function(t,e){var n=this;if(!("number"!=typeof t||t<0)){var i=this.settings;void 0===e&&(e=i.treeGrid?i.treeDepth:i.dataset);var a=[{row:t,item:e[t]}];e[t]&&$.when(this.element.triggerHandler("beforerowactivated",a)).done(function(s){var r;"string"==typeof(r=s)&&"false"===r.toLowerCase()||"boolean"==typeof r&&!1===r||"number"==typeof r&&0===r||((i.paging&&i.source&&"mixed"===i.selectable?n.rowNodesByDataIndex(t).toArray():n.rowNodes(t).toArray()).forEach(function(t){t.classList.add("is-rowactivated")}),e[t]._rowactivated=!0,a=[{row:t,item:e[t]}],n.element.triggerHandler("rowactivated",a))})}},deactivateRowNode:function(t,e){if(!("number"!=typeof t||t<0)){var n=this.settings;void 0===e&&(e=n.treeGrid?n.treeDepth:n.dataset),e[t]&&!n.disableRowDeactivation&&(this.rowNodes(t).toArray().forEach(function(t){t.classList.remove("is-rowactivated")}),delete e[t]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:t,item:e[t]}]))}},deactivateAllRowNodes:function(t){var e=this.settings,n=null;void 0===t&&(t=e.treeGrid?e.treeDepth:e.dataset);var i=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(i.length>0){i.forEach(function(t){t.classList.remove("is-rowactivated")});var a=e.treeGrid||e.groupable?this.actualRowIndex($(i)):this.dataRowIndex($(i));n={row:a,item:t[a]},t[a]&&delete t[a]._rowactivated}else for(var s=0;s<t.length;s++){var r=t[s];if(r._rowactivated){delete r._rowactivated,n={row:s,item:r};break}}null!==n&&this.element.triggerHandler("rowdeactivated",[n])},toggleRowSelection:function(t){var e="number"==typeof t?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):t,n="number"==typeof t?t:this.actualRowIndex(e);if(this.settings.groupable&&(n=this.dataRowIndex(e)),!(!1===this.settings.selectable||this.editor&&e.hasClass("is-selected")))return"single"===this.settings.selectable&&e.hasClass("is-selected")&&!this.settings.disableRowDeselection?(this.unselectRow(n),this.displayCounts(),this._selectedRows):(e.hasClass("is-selected")?this.settings.disableRowDeselection||this.unselectRow(n):this.selectRow(n),this.displayCounts(),this._selectedRows)},unselectRow:function(t,e,n){var i=this,a=i.settings,s=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),r=a.source&&"multiple"===a.selectable&&a.allowSelectAcrossPages,o=null,l=null;if(s&&void 0!==t){var c=a.dataset[t],d=function(t){return t?t.uniqueRowID:null},u=function(t,e){var n=function(n,s){delete n._selected,void 0===s&&(s=e);for(var o=0;o<i._selectedRows.length;o++){var l=d(i._selectedRows[o]);if(a.source&&a.allowSelectAcrossPages&&l){if(l===i.getUniqueRowID(n)){i._selectedRows.splice(o,1);break}}else if(i._selectedRows[o].idx===s){if(r&&i._selectedRows[o].elem&&!i._selectedRows[o].elem.is(t))continue;i._selectedRows.splice(o,1);break}}};if(t.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==i.columnIdxById("selectionCheckbox")&&((o=i.cellNode(t,i.columnIdxById("selectionCheckbox"))).attr("aria-checked","false"),o.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").removeAttr("aria-label")),-1!==i.columnIdxById("selectionRadio")&&((l=i.cellNode(t,i.columnIdxById("selectionRadio"))).attr("aria-checked","false"),l.find(".datagrid-cell-wrapper .datagrid-radio").removeClass("is-checked no-animate").removeAttr("aria-label")),a.treeGrid)for(var s=0;s<a.treeDepth.length;s++)i.isRowSelected(a.treeDepth[s].node)&&(void 0!==e?e===a.treeDepth[s].idx-1&&n(a.treeDepth[s].node):n(a.treeDepth[s].node));else{var u=t.length?i.dataRowIndex(t):e;void 0!==u&&u>-1&&(c=a.dataset[u]),a.groupable&&(c=i.originalDataset[u]),void 0!==c&&(a.paging&&a.source?n(c,u):n(c))}};if(a.treeGrid){var h=parseInt(s.attr("aria-level"),10);if(s.is(".datagrid-tree-parent")&&"multiple"===a.selectable)s.add(s.nextUntil('[aria-level="'.concat(h,'"]'))).each(function(t){var e=$(this),n=e.attr("aria-rowindex")-1,s=i.actualPagingRowIndex(n);(a.selectChildren||!a.selectChildren&&0===t)&&u(e,s)});else if("siblings"===a.selectable)s.parent().find(".is-selected").each(function(t){var e=$(this),n=e.attr("aria-rowindex")-1,s=i.actualPagingRowIndex(n);(a.selectChildren||!a.selectChildren&&0===t)&&u(e,s)});else{var p=i.actualPagingRowIndex(t);u(s,p)}i.setNodeStatus(s)}else u(s,t);e||i.syncSelectedUI(),n||i.element.triggerHandler("selected",[i._selectedRows,"deselect",c])}},setNodeStatus:function(t){var e,n=this,i="multiple"===n.settings.selectable,a=n.settings,s=n.cellNode(t,n.columnIdxById("selectionCheckbox"));if(!i)return s.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),s.attr("aria-checked","false"),void(t.is(".is-selected")&&(s.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"),s.attr("aria-checked","true")));var r=function(t,e){t.each(function(){var t=$(this),i=n.cellNode(t,n.columnIdxById("selectionCheckbox")),a=n.getSelectedStatus(t,e);i.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),i.attr("aria-checked","false"),"mixed"===a?(i.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"),i.attr("aria-checked","mixed")):a&&(i.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked"),i.attr("aria-checked","true"))})};e=t.add(t.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),a.selectChildren&&r(e),e=t,+t.attr("aria-level")>1&&(e=e.add(t.prevUntil('[aria-level="1"]')).add(t.prevAll('[aria-level="1"]:first'))),e=e.filter(".datagrid-tree-parent"),a.selectChildren&&r(e)},getSelectedStatus:function(t){var e=this.settings,n=0,i=0,a=0,s=t.add(t.nextUntil('[aria-level="1"]'));if(e.treeGrid&&"multiple"===e.selectable){var r=t.attr("aria-level");s=t.add(t.nextUntil('[aria-level="'.concat(r,'"]')))}return s.each(function(){n++,$(this).is(".is-selected")?i++:a++}),n===i||n!==a&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(t,e,n){var i=-1,a=this.settings,s="siblings"===a.selectable,r=this.getActiveDataset();if("number"==typeof t&&(t=[t]),!t||0===t.length)return this._selectedRows;if("single"===a.selectable&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),i="[object Array]"===Object.prototype.toString.call(t)?t[0]:t.index(),this.selectRow(i,!0,!0)),"multiple"===a.selectable||"mixed"===a.selectable||s)if("[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<t.length;o++)this.selectRow(t[o],!0,!0);if(0===t.length)for(var l=0,c=r.length;l<c;l++)this.unselectRow(l,!0,!0)}else this.selectRow(t.index(),!0,!0);return this.displayCounts(),e||this.syncSelectedUI(),n||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(t,e){for(var n=this.settings,i=this.getActiveDataset(),a=-1,s=[],r=0;r<i.length;r++)if(n.groupable)for(var o=0;o<i[r].values.length;o++)a++,i[r].values[o][t]===e&&s.push(a);else(n.treeGrid?i[r].node:i[r])[t]===e&&s.push(r);return s},rowStatus:function(t,e,n){var i=this.getActiveDataset();if(!e)return delete i[t].rowStatus,void this.updateRow(t);if(!/dirty/.test(e)&&i[t]){i[t].rowStatus={};var a=i[t].rowStatus;a.icon=e,e=(e=e.charAt(0).toUpperCase()+e.slice(1)).replace("-progress","Progress"),a.text=R.translate(e),n=n?n.charAt(0).toUpperCase()+n.slice(1):a.text,a.tooltip=n,this.updateRow(t),this.setupTooltips(!0)}},columnById:function(t){return $.grep(this.settings.columns,function(e){return e.id===t})},columnIdxById:function(t){for(var e=this.settings.columns,n=-1,i=0;i<e.length;i++)if(e[i].id===t){n=i;break}return n},handleKeys:function(){var t=this,e=this,n=$("th .datagrid-checkbox",e.headerRow);e.element.on("keydown.datagrid","th",function(t){var i,a,s=t.which||t.keyCode||t.charCode||0,r=$(this),o=e.columnIdxById(r.attr("data-column-id")),l=e.visibleColumns().length-1,c=$(t.target);if(!(c.closest(".popupmenu").length>0)){if(13===s||32===s){if(i="multiple"===e.settings.selectable&&0===o?$(".datagrid-checkbox",r):r,c.is(".btn-menu.btn-filter"))return void i.trigger("click.datagrid");var d=function(t){var e;return t&&"selectionCheckbox"===(null===(e=t[0])||void 0===e||null==e?void 0:e.dataset.columnId)},u=d(i)||d(i.prevObject);if(c.is("th.is-sortable")&&e.setSortColumn($(this).attr("data-column-id")),("multiple"===e.settings.selectable||"mixed"===e.settings.selectable)&&u){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),e.recordCount===e._selectedRows.length)return void(e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows());e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows()}32===s&&t.preventDefault()}-1!==[35,36,37,39].indexOf(s)&&(o,a=/35|36/i.test(s)||(t.ctrlKey||t.metaKey)&&/37|39/i.test(s)?R.isRTL()?36===s||(t.ctrlKey||t.metaKey)&&37===s?l:0:35===s||(t.ctrlKey||t.metaKey)&&39===s?l:0:R.isRTL()?39===s?o>0?o-1:o:o<l?o+1:l:37===s?o>0?o-1:o:o<l?o+1:l,e.activeCell.cell=a,r.removeAttr("tabindex").removeClass("is-active"),t.preventDefault()),40===s&&(r.removeAttr("tabindex"),e.activeCell.node=e.cellNode(0,e.settings.groupable?0:e.activeCell.cell).attr("tabindex","0").focus(),t.preventDefault())}}),e.element.on("keydown.datagrid","td, input",function(n){var i=!1;if(113!==(n.which||n.keyCode||n.charCode||0)||t.inlineMode||(e.settings.actionableMode=!e.settings.actionableMode,i=!0),i)return n.preventDefault(),n.stopPropagation(),i}),e.element.on("keydown.datagrid","td",function(t){var i=t.which||t.keyCode||t.charCode||0,a=!1,s=$(t.target),r=R.isRTL(),o=e.activeCell.node,l=$(this).parent(),c=l.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),d=l.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),u=e.activeCell.row,h=e.activeCell.cell,p=e.columnSettings(h),f=l.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),g=e.settings.dataset[e.dataRowIndex(l)],m=e.tableBody.find("tr:visible"),v=function(t){var n=m.filter('[aria-rowindex="'.concat(t+1,'"]'));return n.is(".datagrid-rowgroup-header")?n.index():e.dataRowIndex(n)};o.length||(e.activeCell.node=e.cellNode(u,h),o=e.activeCell.node);var b=function(t,n,i){if(f)return function(t,n,i){var a=e.activeCell.groupNode||o,s=t+(i?-1:1);return s>n?i?a.prevAll(":visible").last():a.nextAll(":visible").last():i?a.prevAll(":visible").first():a.nextAll(":visible").first()}(t,n,i);var a=t+(i?-1:1);if(a>n)return n;for(;e.settings.columns[a]&&e.settings.columns[a].hidden;)a=i?a-1:a+1;return a},y=!!$(".datagrid-selection-checkbox",o).length,w=m.last(),x=e.settings.columns.length-1;if(e.settings.onKeyDown){var C=function(e){e||(t.stopPropagation(),t.preventDefault())},k={activeCell:e.activeCell,row:u,cell:h};if(!1===e.settings.onKeyDown(t,k,C)||!C)return t.stopPropagation(),void t.preventDefault()}if(121===i&&t.shiftKey&&s.trigger("contextmenu"),-1!==[9,37,38,39,40].indexOf(i)){if(s.closest(".code-block").length&&(9!==i||!t.shiftKey||0!==e.getFocusables(o).index))return;if(9!==i){if(s.is(".code-block-actions"))return;if(s.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))return}}if(-1!==[9,37,39].indexOf(i)){if(9===i&&!e.settings.actionableMode)return;if(9!==i&&t.altKey)h=37===i&&!r||39===i&&r?0:x,e.setActiveCell(u,h);else if(!e.quickEditMode||9===i){if(9===i&&t.shiftKey&&s.is(".code-block-actions")?e.focusNextPrev("prev",o):h=!r&&(37===i||9===i&&t.shiftKey)||r&&(39===i||9===i)?b(h,x,!0):b(h,x),-1===h&&!e.settings.actionableMode)return;if(-1===h&&e.settings.actionableMode&&(h=x,-1==--u))return;if(h===x&&x===e.activeCell.cell&&e.settings.actionableMode&&(h=0,++u===e.visibleRowCount))return;h instanceof jQuery?e.setActiveCell(h):e.setActiveCell(u,h),e.settings.actionableMode&&(e.makeCellEditable(e.activeCell.rowIndex,h,t),e.containsTextField(o)&&e.containsTriggerField(o)&&(e.quickEditMode=!0)),e.quickEditMode=!1,a=!0}}if(38===i&&!e.quickEditMode)if(t.altKey||t.metaKey){var T=v(0);e.setActiveCell(T,h),a=!0}else{if(0===u&&!c.is(".datagrid-rowgroup-header"))return o.removeAttr("tabindex"),void e.element.find("th").eq(h).attr("tabindex","0").focus();e.setActiveCell(c,h),a=!0}if(40!==i||e.quickEditMode||(t.altKey||t.metaKey?(e.setActiveCell(w,h),a=!0):(e.setActiveCell(d,h),a=!0)),32===i&&t.ctrlKey&&o){var A="";(u=o.closest("tr")).children().each(function(){var t=$(this);A+="".concat(t.text()," ")}),$("body").toast({title:"",audibleOnly:!0,message:A}),a=!0}if(36!==i||o.hasClass("is-editing")||(e.setActiveCell(u,0),a=!0),35!==i||o.hasClass("is-editing")||(e.setActiveCell(u,x),a=!0),34===i&&(e.setActiveCell(w,h),a=!0),33===i&&(e.setActiveCell(v(0),h),a=!0),32===i&&(!e.settings.editable||y)){if(u=o.closest("tr"),1===s.closest(".datagrid-row-detail").length)return;t.preventDefault();var S=s.find(".datagrid-expand-btn, .datagrid-drilldown");if(S&&S.length)return S.trigger("click.datagrid"),void t.preventDefault();"multiple"!==e.settings.selectable&&"mixed"!==e.settings.selectable||!t.shiftKey?e.toggleRowSelection(u):e.selectRowsBetweenIndexes([e.lastSelectedRow,u.attr("aria-rowindex")-1])}if(e.settings.editable&&32===i&&(e.editor||e.makeCellEditable(e.activeCell.rowIndex,h,t)),13===i&&o.is(".has-btn-actions")){var E=o.find(".btn-actions");E.length&&E.trigger("click")}if(13===i&&p.click&&"function"==typeof p.click&&(o.hasClass("is-cell-readonly")||p.click(t,[{row:u,cell:h,item:g,originalEvent:t}])),e.settings.editable&&13===i){if(s.is("textarea")&&t.shiftKey)return;if(s.is(".btn-menu")||s.closest(".popupmenu.is-open").length)return;e.editor?(e.quickEditMode=!1,e.commitCellEdit(),e.setNextActiveCell(t)):(e.makeCellEditable(e.activeCell.rowIndex,h,t),e.containsTextField(o)&&e.containsTriggerField(o)&&(e.quickEditMode=!0)),a=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(i)||t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||!e.settings.editable||e.editor||e.makeCellEditable(e.activeCell.rowIndex,h,t),("multiple"===e.settings.selectable||"mixed"===e.settings.selectable)&&!e.editor&&(t.ctrlKey||t.metaKey)&&65===i){if(n.addClass("is-checked").removeClass("is-partial"),n.closest("th").attr("aria-checked","true"),e.recordCount===e._selectedRows.length)return void(e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows());e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows(),a=!0}if(a)return t.preventDefault(),t.stopPropagation(),!1})},getFocusables:function(t){var e=$(":focusable",t);return{elements:e,index:e.index($(":focus"))}},focusNextPrev:function(t,e){if(e&&"string"==typeof t){t=t.toLowerCase();var n=this.getFocusables(e),i=n.elements,a=i.length,s=n.index;/\b(next|prev)\b/g.test(t)&&(s="next"===t?s+1>=a?0:s+1:s-1<0?a:s-1,i.eq(s).focus())}},containsTextField:function(t){var e,n=["image","button","submit","reset","checkbox","radio"],i="textarea, input",a=n.length;for(i+=a?":not(":"",e=0;e<a;e++)i+="[type=".concat(n[e],"],");return i=a?"".concat(i.slice(0,-1),")"):"",!!$(i,t).length},containsTriggerField:function(t){return!$(".dropdown, .datepicker, .lookup",t).length},isRowDisabled:function(t){return!(!this.settings.isRowDisabled||"function"!=typeof this.settings.isRowDisabled||"true"!==this.rowNodes(t).attr("aria-disabled"))},isCellEditable:function(t,e){if(!this.settings.editable)return!1;var n=this.columnSettings(e);if(n.readonly)return!1;if(this.isRowDisabled(t)||!this.activeCell.node)return!1;var i=this.activeCell.node.find(".datagrid-cell-wrapper"),a=i.text()?i.text():this.fieldValue(this.settings.dataset[t],n.field);if(n.isEditable){var s=this.settings.dataset[t];if(this.settings.treeDepth&&this.settings.treeDepth[t]&&(s=this.settings.treeDepth[t].node),!n.isEditable(t,e,a,n,s,this,"is-editable"))return!1}return!!n.editor},makeCellEditable:function(t,e,n){var i,a;if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var s=this.activeCell.node.find(".datagrid-cell-wrapper"),r=s.parent("td"),o=$(".datagrid-tree-node",s).length>0,l=$(".datagrid-expand-btn",s).length>0;if(r.hasClass("is-editing")||r.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var c=this.columnSettings(e);if(!c.editor)return 32!==n.keyCode||$(n.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var d=this.actualRowNode(t),h=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(d)):this.dataRowIndex(d),p=this.rowData(h),f=$(".is-editor",r).length>0,g=$(".is-placeholder",s).length>0,m=s.text()?s.text():this.fieldValue(p,c.field);if((f||g)&&(m=this.fieldValue(p,c.field)),!this.isCellEditable(h,e))return!1;(l||o)&&(l&&(m=$("> span",s).text()),"string"==typeof m&&(m=m.replace(/^\s/,""))),c.inlineEditor?r.addClass("is-editing-inline"):(f&&s.css({position:"static",height:s.outerHeight()}),r.addClass("is-editing"),s.empty()),m=u.sanitizeConsoleMethods(m),this.element.triggerHandler("beforeentereditmode",[{row:h,cell:e,item:p,target:s,value:m,column:c,editor:this.editor}]),1===this.visibleColumns().length&&r.addClass("has-singlecolumn"),this.editor=new c.editor(h,e,m,s,c,n,this,p),this.editor.row=h,this.editor.cell=e;var v=(null===(i=c.formatter)||void 0===i||null==i?void 0:i.toString())||"";if(0!==v.indexOf("function Badge")&&0!==v.indexOf("function Alert")||(this.editor.useValue=!0),this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(m=this.fieldValue(p,c.field)),this.editor.val(m),this.settings.showDirty){var b=m;""===b&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(b=!1);var y={originalVal:b,isDirty:!1};this.addToDirtyArray(h,e,y)}return this.editor.focus(),null!==(a=this.editor)&&void 0!==a&&(null==a?void 0:a.input.is(".dropdown"))&&n.keyCode&&![9,13,32,37,38,39,40].includes(n.keyCode)&&this.editor.input.data("dropdown").handleAutoComplete(n),this.element.triggerHandler("entereditmode",[{row:h,cell:e,item:p,target:s,value:m,column:c,editor:this.editor}]),!0}},rowData:function(t){return this.settings.groupable?this.originalDataset[t]:this.settings.treeGrid?this.settings.treeDepth[t].node:this.settings.dataset[t]},commitCellEdit:function(t){if(this.editor){var e,n,i,a,s=this.editor.input,r=this.getEditorName(this.editor),o="editor"===r,l="fileupload"===r,c=!s.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");"function"==typeof this.editor.val&&(e=this.editor.val()),o?n=this.editor.td:l?("clear"===this.editor.status?e="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(e=this.editor.originalValue),n=this.tableBody.find("#".concat(s.attr("id"))).closest("td"),e=u.escapeHTML(e)):(n=s.closest("td"),e=u.escapeHTML(e)),null!==this.settings.source&&c?(i=this.activeCell.rowIndex,a=this.activeCell.dataRow):(i=this.actualRowIndex(n.parent()),a=this.dataRowIndex(n.parent()));var d=n.attr("aria-colindex")-1,h=this.columnSettings(d),p=this.settings.treeGrid?this.settings.treeDepth[a].node:this.getActiveDataset()[a],f=this.fieldValue(p,h.field);if(h.beforeCommitCellEdit&&!t&&!1===h.beforeCommitCellEdit({cell:d,row:a,item:p,editor:this.editor,api:this}))return;if(this.editor){f=u.sanitizeConsoleMethods(f),e=u.sanitizeConsoleMethods(e);var g=n.hasClass("is-editing-inline");n.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?a:i,d,e,!1,g);var m=this.fieldValue(p,h.field);this.element.triggerHandler("exiteditmode",[{row:i,cell:d,item:p,target:n,value:m,oldValue:f,column:h,editor:this.editor}])}}},validateCell:function(t,e){var n,i,a=this,s=this,r=this.columnSettings(e);if(r.validate){var o,l,c=[],d=r.validate.split(" "),u=$.fn.validation,h=this.fieldValue(this.settings.dataset[t],r.field),p=[],f="";for(l=0;l<d.length;l++){var g=u.rules[d[l]],m={row:t,cell:e,item:this.settings.dataset[t],column:r,grid:s};o=$.Deferred(),g.async?g.check(h,$("<input>").val(h),m,v,o):v(g.check(h,$("<input>").val(h),m),!0,d[l],o),c.push(o)}(n=$).when.apply(n,c).then(function(){var n=$.fn.validation.ValidationTypes;for(var o in n)if(f="",i=n[o],p[i.type]&&(f=p[i.type]),""!==f){s.showCellError(t,e,f,i.type);var l=a.dataRowNode(t);s.element.trigger("cell".concat(i.type),{row:t,cell:e,message:f,target:a.cellNode(l,e),value:h,column:r})}else s.clearCellError(t,e,i.type)})}function v(t,e,n,a){var s=u.rules[n];i=$.fn.validation.ValidationTypes[s.type]||$.fn.validation.ValidationTypes.error,f="",p[i.type]&&(f=p[i.type]),!t&&e&&(f?(f=(/^\u2022/.test(f)?"":"\u2022 ")+f,f+="<br/>".concat("\u2022 ",s.message)):f=s.message,p[i.type]=f),a.resolve()}},showCellError:function(t,e,n,i){var a=this.dataRowNode(t),s=this.cellNode(a,e);if(this.clearNonVisibleCellErrors(t,e,i),!s.length)return this.nonVisibleCellErrors.push({row:t,cell:e,message:n,type:i}),void this.showNonVisibleCellErrors();s.addClass(i).attr("data-".concat(i,"message"),n);var r=s.find(".icon-".concat(i));if(!r.length){s.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(i)],icon:i})));var o={forced:!0,placement:"bottom",content:n,isError:"error"===i||"dirtyerror"===i,wrapper:r=s.find(".icon-".concat(i))};this.cacheTooltip(r,o),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function(){var t=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove();else{var e=function(e){var n=$.fn.validation.ValidationTypes[e].type,i=$.grep(t.nonVisibleCellErrors,function(t){return t.type===n});t.showNonVisibleCellErrorType(i,n)};for(var n in $.fn.validation.ValidationTypes)e(n)}},showNonVisibleCellErrorType:function(t,e){var n,i,a,s,r=[],o=$.fn.validation.ValidationTypes[e]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(i=this.toolbar.parent().find(".table-errors")),0!==t.length){for(s=0;s<t.length;s++){var l=Math.floor((t[s].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(l,r)&&r.push(l)}for(s=0;s<r.length;s++)n="".concat((n?"".concat(n,"<br>"):"")+R.translate(o.pagingMessageID)," ").concat(r[s]);0===this.toolbar.parent().find(".table-errors").length&&(i=$('<div class="table-errors"></div>')),(a=i.find(".icon-".concat(e))).length||(i.append($($.createIcon({classes:["icon-".concat(e)],icon:e}))),a=i.find(".icon-".concat(e))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(i),this.cacheTooltip(a,{forced:!0,placement:"bottom",content:n,isError:"error"===e||"dirtyerror"===e,wrapper:a}),this.setupTooltips(!1,!0)}else i&&i.length&&(a=i.find(".icon-".concat(o.type)),this.hideTooltip(),i.find(".icon-".concat(o.type)).remove())},clearAllCellError:function(t,e){var n=$.fn.validation.ValidationTypes;for(var i in n){var a=n[i];this.clearCellError(t,e,a.type)}},clearCellError:function(t,e,n){this.clearNonVisibleCellErrors(t,e,n);var i=this.dataRowNode(t),a=this.cellNode(i,e);a.length&&this.clearNodeErrors(a,n)},clearNonVisibleCellErrors:function(t,e,n){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var i=this.toolbar.parent().find(".table-errors").find(".icon-".concat(n));i.length&&($.grep(this.nonVisibleCellErrors,function(t){return t.type===n?t:""}).length||i.remove())}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(i){return i.row!==t||i.cell!==e||i.type!==n?i:""}),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(t){this.dataRowNode(t).removeClass("error alert rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(t,"","");for(var e=0;e<this.settings.columns.length;e++)this.clearAllCellError(t,e)},clearAllErrors:function(){for(var t=0,e=0;e<this.settings.dataset.length;e++){this.settings.dataset[e].rowStatus&&(delete this.settings.dataset[e].rowStatus,t++);for(var n=0;n<this.settings.columns.length;n++)this.clearAllCellError(e,n)}t>0&&this.render()},clearNodeErrors:function(t,e){(t=t instanceof jQuery?t[0]:t).classList.remove(e),t.removeAttribute("data-".concat(e,"message"));var n=t.querySelector(".icon-".concat(e));n&&(n.parentNode.removeChild(n),this.hideTooltip())},resetRowStatus:function(){for(var t=this.settings.dataset.filter(function(t){return t.rowStatus}),e=0;e<t.length;e++)delete t[e].rowStatus;t.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(t){(t=t instanceof jQuery?t[0]:t)&&[].slice.call(t.querySelectorAll(".is-dirty-cell")).forEach(function(t){t.classList.remove("is-dirty-cell")})},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(t){if(this.settings.showDirty&&"number"==typeof t){var e=this.rowNodes(t);this.clearDirtyClass(e),this.dirtyArray&&(this.dirtyArray[t]=void 0)}},clearDirtyCell:function(t,e){this.settings.showDirty&&this.dirtyArray&&"number"==typeof t&&"number"==typeof e&&void 0!==this.dirtyArray[t]&&(this.cellNode(t,e).removeClass("is-dirty-cell"),this.dirtyArray[t][e]=void 0)},dirtyCells:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,n=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=e.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var r=0,o=s.length;r<o;r++){var l=s[r];void 0!==l&&l.isDirty&&n.push(t.treeGrid?e[i].node:e[i])}}return n},dirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,n=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,a=e.length;i<a;i++){var s=this.dirtyArray[i];if(void 0!==s)for(var r=0,o=s.length;r<o;r++){var l=s[r];if(void 0!==l&&l.isDirty){n.push(t.treeGrid?e[i].node:e[i]);break}}}return n},getModifiedRows:function(t){for(var e=this.settings,n=e.treeGrid?e.treeDepth:e.dataset,i=[],a=0;a<n.length;a++){var s=e.treeGrid?n[a].node:n[a],r={row:a,data:s,cells:[]};if(this.isRowDirty(a)){r.type="dirty";for(var o=0;!t&&o<this.dirtyArray[a].length;o++){var l=this.dirtyArray[a][o];void 0!==l&&l.isDirty&&r.cells.push({row:a,col:o,cellData:l})}}void 0===s.rowStatus||"error"!==s.rowStatus.icon&&"in-progress"!==s.rowStatus.icon||(r.type="dirty"===r.type?["dirty",s.rowStatus.icon]:s.rowStatus.icon),void 0!==r.type&&i.push(t?s:r)}return i},showRowError:function(t,e,n){var i=n||"error";this.dataRowNode(t).addClass(n),this.rowStatus(t,i,e)},validateRow:function(t){if(void 0!==t)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},validateAll:function(){for(var t=0;t<this.settings.dataset.length;t++)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},columnSettings:function(t){return this.settings.columns[t]||{}},coerceValue:function(t,e,n,i,a){var s;if(n.serialize){var r=this.settings,o=r.treeGrid?r.treeDepth:r.dataset;this.settings.groupable&&(o=this.originalDataset||o);var l=r.treeGrid?o[i].node:o[i];return n.serialize(t,e,n,i,a,l)}return n.sourceFormat?s=t instanceof Date?R.parseDate(t,n.sourceFormat):R.formatDate(t,{pattern:n.sourceFormat}):"number"==typeof e&&t&&!/[A-Za-z!@#$%^&*()_+\-=\[\]{};':"\\|<>/?]/.test(t)&&(s=R.parseNumber(t)),s},updateCell:function(t,e,n){var i=this.columnSettings(e);void 0===n&&(n=this.fieldValue(this.settings.dataset[t],i.field)),this.updateCellNode(t,e,n,!0)},updateCellNode:function(t,e,n,i,a){var s,r=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),o=r.find("td").eq(e),l=this.settings.columns[e]||{},c="",d=l.formatter?l.formatter:this.defaultFormatter,h=$(".editor",o).length>0,p=this.settings.treeGrid,f=p?this.actualPagingRowIndex(this.actualRowIndex(r)):this.dataRowIndex(r);(null==f||isNaN(f))&&(f=t);var g=this.rowData(f);0===r.length&&this.settings.paging&&(o=(r=this.visualRowNode(t)).find("td").eq(e));var m=this.fieldValue(g,l.field);if((i||void 0===(s=this.coerceValue(n,m,l,t,e)))&&(s=n),r.length&&g&&!g.rowStatus){var v=r.find("svg.icon-rowstatus");v.length&&v.remove()}if(this.removeTooltipData(o),0===e&&g&&g.rowStatus){var b=o.find("svg.icon-rowstatus");if(r&&o[0]){for(var y=0;y<r.length;y++)r[y].classList.add("rowstatus-row-".concat(g.rowStatus.icon));if(o[0].classList.add("rowstatus-cell"),!b.length){var w="success"===g.rowStatus.icon?"#icon-check":"#icon-exclamation";o.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat(w,'"></use></svg>'))}}if(g.rowStatus.tooltip){b=o.find("svg.icon-rowstatus");var x=g.rowStatus.icon;this.cacheTooltip(b,{forced:!0,placement:"right",content:g.rowStatus.tooltip,isError:"error"===x||"dirtyerror"===x,wrapper:o})}}if(s=u.unescapeHTML(s),l.field&&s!==m)if(l.field.indexOf(".")>-1){var C=g,k=l.field.split(".").length;l.field.split(".").forEach(function(t,e){e===k-1?C[t]=s:C=C[t]})}else g[l.field]=s;var T,A=function(t,e){return(("string"==typeof t?t.match(e):[""])||[""])[0].replace(/\s/g,"&nbsp;")},S=u.escapeHTML(s),E=h?s:S;if("string"==typeof E&&(E="".concat(A(E,/^\s*/)).concat(E.trim()).concat(A(E,/\s*$/))),c=this.formatValue(d,t,e,E,l,g),l.contentVisible&&(l.contentVisible(t,e,S,l,g)||(c="")),a||o.find(".datagrid-cell-wrapper").html(c),i||(this.validateCell(f,e),this.isDirtyCellUndefined(t,e)||(this.dirtyArray[t][e].value=n,this.dirtyArray[t][e].coercedVal=s,this.dirtyArray[t][e].escapedCoercedVal=u.escapeHTML(s),this.dirtyArray[t][e].cellNodeText=o.text(),this.dirtyArray[t][e].cell=e,this.dirtyArray[t][e].column=this.settings.columns[e],this.setDirtyCell(t,e))),this.settings.stretchColumnOnChange&&l){var D=this.calculateTextWidth(l);l.minWidth&&D<l.minWidth&&(D=l.minWidth),l.minWidth&&D>l.maxWidth&&(D=l.maxWidth),D>0&&D-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=D,this.stretchColumnDiff=0,this.setColumnWidth(l.id,D,!0))}if(m=u.sanitizeConsoleMethods(m),s=u.sanitizeConsoleMethods(s),"string"==typeof m&&"string"==typeof s){var I={oldVal:"".concat(A(m,/^\s*/)).concat(m.trim()).concat(A(m,/\s*$/)),coercedVal:"".concat(A(s,/^\s*/)).concat(s.trim()).concat(A(s,/\s*$/))};T=I.coercedVal!==I.oldVal&&!i}else T=s!==m&&!i;if(T){var M={row:null!==this.settings.source?f:t,relativeRow:t,cell:e,target:o,value:s,oldValue:m,column:l,api:this};M.rowData=p&&this.settings.treeDepth[t]?this.settings.treeDepth[t].node:g,this.element.trigger("cellchange",M),this.wasJustUpdated=!0}},isRowDirty:function(t){var e=!1;if("number"==typeof t&&this.dirtyArray&&this.dirtyArray.length){var n=this.dirtyArray[t];if(void 0!==n)for(var i=0,a=n.length;i<a;i++){var s=n[i];if(void 0!==s&&s.isDirty){e=!0;break}}}return e},isCellDirty:function(t,e){return!this.isDirtyCellUndefined(t,e)&&this.dirtyArray[t][e].isDirty},addToDirtyArray:function(t,e,n){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[t]?(this.dirtyArray[t]=[],this.dirtyArray[t][e]=n):void 0===this.dirtyArray[t][e]&&(this.dirtyArray[t][e]=n)},setDirtyCell:function(t,e,n){var i=this.cellNode(t,e);n&&this.addToDirtyArray(t,e,n);var a,s,r=this.dirtyArray[t][e];r.originalVal===r.value||r.originalVal===r.coercedVal||r.originalVal===r.escapedCoercedVal||r.originalVal===r.cellNodeText?(this.dirtyArray[t][e].isDirty=!1,this.setDirtyIndicator(t,e,!1)):(this.dirtyArray[t][e].isDirty=!0,i[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(t,e,!0)),("string"==typeof r.originalVal||r.originalVal instanceof String)&&(null===(a=r.originalVal)||void 0===a||null==a?void 0:a.trim())===(null===(s=r.value)||void 0===s||null==s?void 0:s.trim())&&(this.dirtyArray[t][e].isDirty=!1,this.setDirtyIndicator(t,e,!1))},setDirtyIndicator:function(t,e,n,i){var a=this.cellNode(t,e);i&&this.addToDirtyArray(t,e,i),t<0||e<0||!a.length||(n?a[0].classList.add("is-dirty-cell"):a[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(t,e){return!(this.settings.showDirty&&"number"==typeof t&&"number"==typeof e&&t>-1&&e>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[t]&&void 0!==this.dirtyArray[t][e])},visualRowIndex:function(t){var e="tr:visible:not(.is-hidden, .datagrid-expandable-row)",n=this.tableBody.find(e).index(t);return-1===n&&this.tableBodyLeft&&(n=this.tableBodyLeft.find(e).index(t)),-1===n&&this.tableBodyRight&&(n=this.tableBodyRight.find(e).index(t)),n},visualRowNode:function(t){var e=t;return this.settings.paging&&this.settings.source&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(t)?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):$([])},actualRowNode:function(t){return this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodes:function(t){var e=this.element;return t instanceof jQuery&&(e=t.closest(".datagrid-container"),t=t.attr("aria-rowindex")-1),e.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodesByDataIndex:function(t){t instanceof jQuery&&(t=t.attr("data-index"));var e=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(t,'"]')):$(),n=this.tableBody.find('tr[data-index="'.concat(t,'"]')),i=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(t,'"]')):$();return $(n).add(e).add(i)},cellNode:function(t,e){var n=this.settings.groupable?this.rowNodesByDataIndex(t).find("td"):this.rowNodes(t).find("td");return n.eq(e>=n.length?n.length-1:e)},actualRowIndex:function(t){return(t=t instanceof jQuery?t:$(t)).attr("aria-rowindex")-1},pagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},actualPagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e-=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},dataRowNode:function(t){return this.tableBody.find('tr[data-index="'.concat(t,'"]'))},dataRowIndex:function(t){return t=t instanceof jQuery?t:$(t),parseInt(t.attr("data-index"),10)},setActiveCell:function(t,e){var n,i,a,s=this.activeCell,r=t,o=t instanceof jQuery&&t.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(t instanceof jQuery&&0===t.length||("number"==typeof t&&(n=t,r=this.tableBody.find("tr:visible").eq(t),i=this.actualRowIndex(r),a=this.dataRowIndex(r)),t instanceof jQuery&&t.is("td")&&((o=t.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(r=t.parent()),e=t.attr("aria-colindex")-1,n=this.visualRowIndex(t.parent()),i=this.actualRowIndex(t.parent()),a=this.dataRowIndex(t.parent()),r=t.parent()),t instanceof jQuery&&t.is("tr")&&(n=this.visualRowIndex(t),i=this.actualRowIndex(t),a=this.dataRowIndex(t),r=t),n<0||e<0))){s.node&&1===s.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),s.cell===e&&s.row===t||this.hideTooltip(),this.activeCell.node=this.cellNode(o||r?r:i>-1?i:n,e).attr("tabindex","0"),this.activeCell.node&&1===s.node.length?(this.activeCell.row=n,this.activeCell.cell=e,i=this.actualRowIndex(this.activeCell.node.parent()),a=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=s,(!$("input, select, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),o&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==a&&(this.activeCell.dataRow=a),void 0!==i&&(this.activeCell.rowIndex=i);var l=+r.find("td[colspan]").attr("colspan");if(o&&this.activeCell.node&&s.node&&!(t instanceof jQuery&&t.is("td"))&&(e<l?(r.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td[colspan]")):e>=l?(r.find("td").eq(e-l+1).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e-l+1)):(r.find("td").eq(e).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e))),o&&t instanceof jQuery&&t.is("td")&&(this.activeCell.cell=l-1+e,t.is("[colspan]")&&(this.activeCell.cell=e)),this.settings.cellNavigation){var c=this.headerNodes(),d=0;this.hasColSpans&&(d=0,c.eq(e).prevAll("[colspan]").each(function(t,e){var n=$(e).attr("colspan")-1;d+=n}),e-=d),c.removeClass("is-active"),c.eq(e).addClass("is-active")}this.activeCell.isFocused=!0;var u=this.settings.columns[e];u&&u.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell,api:this})}},setNextActiveCell:function(t){var e=this;if("keydown"===t.type)if(this.settings.actionableMode){var n=13===t.keyCode?40:t.keyCode;if(32===n)return;setTimeout(function(){var t=$.Event("keydown.datagrid");t.keyCode=n,e.activeCell.node.trigger(t)},0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(t,e){if(!(!e||e&&!e.length||t<0)){var n=this.settings.treeDepth[t].node;n.children=n.children||[];for(var i=0,a=(e=JSON.parse(JSON.stringify(e))).length;i<a;i++)n.children.push(e[i]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(t,e){this.settings.treeDepth[t].node.expanded=e},toggleChildren:function(t,e){if(!this.settings.groupable){var n=this,i=this.settings,a=this.rowNodes(e),s=a.find(".datagrid-expand-btn"),r=parseInt(a.attr("aria-level"),10),o=s.hasClass("is-expanded"),l=[{grid:n,row:e,item:a}];if(n.settings.treeDepth&&n.settings.treeDepth[e]&&(l[0].rowData=n.settings.treeDepth[e].node),a.hasClass("datagrid-tree-parent")&&($(t.target).is(s)||!n.settings.editable&&!n.settings.selectable)){var c=function(){a=n.rowNodes(e),s=a.find(".datagrid-expand-btn");var t=a.nextUntil('[aria-level="'.concat(r,'"]')),i=n.settings.treeGrid&&n.settings.source&&n.settings.paging?n.dataRowIndex(a):e;o?(a.attr("aria-expanded",!1),s.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(a.attr("aria-expanded",!0),s.addClass("is-expanded").find(".plus-minus").addClass("active")),n.setExpandedInDataset(i,!o),function t(e,i,a){var s=e.nextUntil('[aria-level="'.concat(i,'"]'));a?s.each(function(){var t=$(this);parseInt(t.attr("aria-level"),10)>i&&t.addClass("is-hidden")}):s.each(function(){var e=$(this),a=parseInt(e.attr("aria-level"),10);if(a===i+1){if(!e.hasClass("is-filtered")&&(e.removeClass("is-hidden"),n.settings.frozenColumns)){var s=e.attr("aria-rowindex");n.tableBody.find('[aria-rowindex="'.concat(s,'"]')).removeClass("is-hidden")}if(e.is(".datagrid-tree-parent")){var r=e.find(".datagrid-expand-btn.is-expanded").length>0;r&&t(e,a,!r)}}})}(a,r,o),n.setAlternateRowShading(),l.children=t},d=o?"collapserow":"expandrow";$.when(n.element.triggerHandler(d,l)).done(function(t){var e=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};e(t)||("function"!=typeof i.onExpandChildren||o?"function"==typeof i.onCollapseChildren&&o?$.when(i.onCollapseChildren(l[0])).done(function(t){e(t)||c()}):c():$.when(i.onExpandChildren(l[0])).done(function(t){e(t)||c()}))})}}},toggleRowDetail:function(t){var e=this,n=e.rowNodes(t);!n.length&&e.settings.paging&&(e.settings.rowTemplate||e.settings.expandableRow)&&(t+=(e.pagerAPI.activePage-1)*e.settings.pagesize,n=e.dataRowNode(t));var i=n.next(),a=n.find(".datagrid-expand-btn"),s=i.find(".datagrid-row-detail"),r=e.settings.dataset[e.dataRowIndex(n)];if(!n.hasClass("datagrid-tree-parent")){if(e.settings.allowOneExpandedRow&&null===e.settings.groupable){var o=e.tableBody.add(e.tableBodyLeft).add(e.tableBodyRight).find("tr.is-expanded"),l=o.prev().find(".datagrid-expand-btn"),c=o.prev(),d=e.actualRowNode(c),u=e.dataRowIndex(c);if(o.length&&i.index()!==o.index()){var h=o.find(".datagrid-row-detail");o.add(l).removeClass("is-expanded"),c.removeClass("is-rowactivated"),c.find(".plus-minus").removeClass("active"),h.animateClosed().on("animateclosedcomplete",function(){o.removeClass("is-expanded"),e.element.triggerHandler("collapserow",[{grid:e,row:d,detail:h,item:e.settings.dataset[u]}])});var p=o.prev().find(".btn-primary");p.length&&p.attr("class",p.attr("class").replace("btn-primary","btn-secondary"))}var f=!i.hasClass("is-expanded"),g=i.prev().find(f?".btn-secondary":".btn-primary");if(g.length>0&&c&&g){var m=g.attr("class")||"";g.attr("class",m.replace(f?"btn-secondary":"btn-primary",f?"btn-primary":"btn-secondary"))}}if(i.hasClass("is-expanded"))s.one("animateclosedcomplete",function(){i.removeClass("is-expanded")}).animateClosed(),a.removeClass("is-expanded").find(".plus-minus").removeClass("active"),e.settings.allowOneExpandedRow&&n.removeClass("is-rowactivated"),e.element.triggerHandler("collapserow",[{grid:e,row:t,detail:s,item:r}]);else{i.addClass("is-expanded"),a.addClass("is-expanded").find(".plus-minus").addClass("active"),i.find(".constrained-width").css("max-width",this.element.outerWidth());var v=[{grid:e,row:t,detail:s,item:r}];if(e.element.triggerHandler("expandrow",v),e.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&n.addClass("is-rowactivated"),e.settings.onExpandRow?e.settings.onExpandRow(v[0],function(t){t&&s.find(".datagrid-row-detail-padding").empty().append(t),e.adjustExpandRowHeight(s),s.animateOpen()}):(e.adjustExpandRowHeight(s),s.animateOpen()),e.settings.frozenColumns.expandRowAcrossAllCells&&e.frozenExpandRowAcrossAllCells(),e.settings.frozenColumns.left.length||e.settings.frozenColumns.right.length){var b={left:s.eq(0)[0],center:s.eq(1)[0],right:s.eq(2)[0]},y={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(y.theme).on(y.theme,function(){e.frozenExpandRowSetHeight(b)}),e.element.off(y.rowheight).on(y.rowheight,function(){e.frozenExpandRowSetHeight(b)})}}}},adjustExpandRowHeight:function(t){if(t.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var e={left:t.eq(0)[0]?t.eq(0)[0].children[0]:null,center:t.eq(1)[0],right:t.eq(2)[0]?t.eq(2)[0].children[0]:null},n=0;e.center&&(e.center.style.height="auto",n=e.center.offsetHeight-1,e.center.style.height=""),n>0&&(e.left&&(e.left.style.height="".concat(n,"px")),e.right&&(e.right.style.height="".concat(n,"px")))}},frozenExpandRowSetHeight:function(t){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e=0;if(t&&t.center&&(t.padding=t.center.querySelector(".datagrid-row-detail-padding"),e=t.padding.offsetHeight),e&&(t.center.style.height="".concat(e,"px"),t.left&&(t.left.style.height="".concat(e,"px")),t.right&&(t.right.style.height="".concat(e,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var n={container:this.element[0].getBoundingClientRect(),centerEl:t.center.getBoundingClientRect()},i="".concat(n.centerEl.top-n.container.top,"px");t.padding.style.top=i}}},frozenExpandRowAcrossAllCells:function(){var t=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e={row:".datagrid-expandable-row.is-expanded"};e.detail="".concat(e.row," > td .datagrid-row-detail"),e.padding="".concat(e.detail," .datagrid-row-detail-padding");var n={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},i={rows:{left:n.left?n.left.querySelector(e.row):null,center:n.center?n.center.querySelector(e.row):null,right:n.right?n.right.querySelector(e.row):null},details:{left:n.left?n.left.querySelector(e.detail):null,center:n.center?n.center.querySelector(e.detail):null,right:n.right?n.right.querySelector(e.detail):null},padding:this.tableBody[0].querySelector(e.padding)};if(i.padding&&(i.details.left||i.details.right)){var a="is-expanded-frozen";i.padding.style.opacity="0",i.rows.left&&i.rows.left.classList.add(a),i.rows.right&&i.rows.right.classList.add(a),$(i.details.center).one("animateopencomplete.datagrid.expandedfrozen",function(){(i.details.left||i.details.right)&&setTimeout(function(){i.rows.center.classList.add(a),t.frozenExpandRowSetHeight(i.details),i.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",function(){t.frozenExpandRowSetHeight(i.details)})},10)}).one("animateclosedstart.datagrid.expandedfrozen",function(){$(window).off("resize.datagrid.expandedfrozen"),i.padding.style.opacity="0",i.padding.style.top="",i.rows.center.classList.remove(a),i.rows.left&&i.rows.left.classList.remove(a),i.rows.right&&i.rows.right.classList.remove(a)}).one("animateclosedcomplete.datagrid.expandedfrozen",function(){i.padding.style.opacity=""})}}},toggleGroupChildren:function(t){if(this.settings.groupable){var e=t.index(),n=$(),i=$(),a=$();this.hasLeftPane&&(n=this.tableLeft.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header")),i=this.table.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(a=this.tableRight.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"));var s=t.find(".datagrid-expand-btn");t.hasClass("is-expanded")?(s.removeClass("is-expanded").find(".plus-minus").removeClass("active"),n.hide(),n.addClass("is-hidden"),i.hide(),i.addClass("is-hidden"),a.hide(),a.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:t.index(),detail:i,item:{}}]),t.removeClass("is-expanded")):(s.addClass("is-expanded").find(".plus-minus").addClass("active"),n.show(),n.removeClass("is-hidden"),i.show(),i.removeClass("is-hidden"),a.show(),a.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:t.index(),detail:i,item:{}}]),t.addClass("is-expanded"))}},setSortColumn:function(t,e){var n=!0;if(void 0!==e?(this.sortColumn.sortAsc===e&&this.sortColumn.sortId===t&&(n=!1),this.sortColumn.sortAsc=e):(this.sortColumn.sortId===t?this.sortColumn.sortAsc=!this.sortColumn.sortAsc:this.sortColumn.sortAsc=!0,e=this.sortColumn.sortAsc),this.sortColumn.sortId=t,this.sortColumn.sortField=this.columnById(t)[0]?this.columnById(t)[0].field:t,this.sortColumn.sortAsc=e,this.setSortIndicator(t,e),n&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),n){var i=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),i&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var t=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(t),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,i=e.length;n<i;n++)void 0!==this.dirtyArray[n]&&((t.treeGrid?e[n].node:e[n]).tempNodeIndex=n)},restoreDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var n=[],i=0,a=e.length;i<a;i++){var s=t.treeGrid?e[i].node:e[i];void 0!==s.tempNodeIndex&&(n.push({newIdx:i,oldIdx:s.tempNodeIndex}),delete s.tempNodeIndex)}for(var r=[],o=0,l=n.length;o<l;o++)r[n[o].newIdx]=this.dirtyArray[n[o].oldIdx];this.dirtyArray=r}},syncDatasetWithSelectedRows:function(){var t,e=this,n=this.settings;if(!(n.source&&n.paging&&n.allowSelectAcrossPages&&null!==(t=n.columnIds)&&void 0!==t&&(null==t?void 0:t.length))){this._selectedRows=[];for(var i,a=n.treeGrid?n.treeDepth:n.dataset,s=-1,r=function(t,r){if(n.groupable&&!e.originalDataset)for(var o=0;o<Object.keys(a[t]).length;o++)s++,r=Object.keys(a[t]).map(function(e){return a[t][e]}),e.isRowSelected(r)&&e._selectedRows.push({idx:s,data:r,elem:e.dataRowNode(s),group:a[t],page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:s,pagesize:e.settings.pagesize});else r=n.treeGrid?a[t].node:a[t],e.isRowSelected(r)&&e._selectedRows.push({idx:t,data:r,elem:e.visualRowNode(t),pagesize:e.settings.pagesize,page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:t});i=r},o=0;o<a.length;o++)r(o,i)}},setSortIndicator:function(t,e){this.headerRow&&(this.sortColumn={sortId:t,sortAsc:e,sortField:this.columnById(t)[0]?this.columnById(t)[0].field:t},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(t,'"]')).addClass(e?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",e?"ascending":"descending"))},sortFunction:function(t,e){var n=this.columnById(t),i=0===n.length?null:n[0],s=null===i?t:i.field,r=this,o=function(t){return"string"==typeof(e=null==(e=r.fieldValue(t,s))?"":e)&&(e=e.toUpperCase(),$.isNumeric(e)&&(e=parseFloat(e))),e;var e};return i&&i.sortFunction&&(o=function(t){return i.sortFunction(r.fieldValue(t,s))}),e=e?1:-1,function(t,n){return t=o(t),n=o(n),a(t)!==a(n)&&(t=t.toString().toLowerCase(),n=n.toString().toLowerCase()),e*((t>n)-(n>t))}},defaultFormatter:function(t,e,n){return null==n||""===n?"":n.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(t,e,n){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,t.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(t,e),e||this.triggerSource(t,n),this.syncSelectedUI())},getPageableElements:function(){var t=this.element.children().not(".datagrid-expandable-row");return t.is("table")&&(t=t.find("tbody tr")),t},appendTooltip:function(t){var e=this,n=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof t?n.test(t)||(t+=" ".concat("grid-tooltip")):t="grid-tooltip";var i=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(i),!this.tooltip){var a=""+'<div id="'.concat(i,'" class="tooltip ').concat(t,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",a),this.tooltip=document.getElementById(i),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",function(){e.hideTooltip()}))}},cacheTooltip:function(t,e){if(void 0===e){var n,i=t.querySelector(".is-editor.content-tooltip"),a=t.querySelector("a[title]"),s=h.hasClass(t,"rowstatus-cell"),r="svg"===t.tagName.toLowerCase(),o="th"===t.tagName.toLowerCase(),l=h.hasClass(t,"datagrid-column-wrapper"),c=h.hasClass(t.parentNode,"datagrid-filter-wrapper"),d=t.getAttribute("aria-colindex")-1,p=this.columnSettings(d);if(e={content:"",wrapper:t.querySelector(".datagrid-cell-wrapper")},(o||l||c)&&(e.wrapper=t,e.distance=c?15:null,e.placement=l?"top":"bottom"),s||r){var f=this.closest(t,function(t){return h.hasClass(t,"datagrid-row")}),g=f?f.classList:[];e.isError=g.contains("rowstatus-row-error"),e.placement="right",r&&(e.wrapper=this.closest(t,function(t){return"td"===t.tagName.toLowerCase()}))}if(i){var v=!(!p.editorOptions||!p.editorOptions.width)&&this.setUnit(p.editorOptions.width),b=$(i).clone()[0];b.style.width=v||"".concat(t.offsetWidth,"px");var y=b.outerHTML;""!==u.stripHTML(y)&&(e.content=y,e.extraClassList=["popover","alternate","content-tooltip"])}else if(a)e.content=a.getAttribute("title"),a.removeAttribute("title");else if(n=t.getAttribute("title")){var w=t.querySelector(".row-btn[disabled]");e.content=w?"":n,t.removeAttribute("title")}else if(o&&!c){var x=t.querySelector(".datagrid-header-text");e.content=x?u.stripHTML(x.textContent):""}else if(c){if(!(t.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var C=t.parentNode.querySelector(".is-checked");e.content=C?u.stripHTML(C.textContent):""}}else e.wrapper.querySelector(".datagrid-expand-btn")?Array.prototype.filter.call(e.wrapper.children,function(t){return!t.matches(".datagrid-expand-btn")}).forEach(function(t){e.content=t.textContent}):e.content=e.wrapper.textContent,e.content=u.stripHTML(e.content).trim();var k=e.wrapper.querySelector("select");if(k&&k.selectedIndex&&k.options[k.selectedIndex]&&k.options[k.selectedIndex].innerHTML&&(e.content=m.features.touch?"":k.options[k.selectedIndex].innerHTML.trim()),o&&(e.content=e.content.trim()),""!==e.content){var T=h.hasClass(l?t.parentNode:t,"text-ellipsis"),A=[].slice.call(t.querySelectorAll(".icon")),S=T?8:0;if(A.forEach(function(t){var e="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect();S+=e.width+8}),this.settings.treeGrid){var D=function(t){return!!e.wrapper.querySelector(t)};if(D(".datagrid-tree-node")||D(".datagrid-expand-btn")){var I=this.closest(e.wrapper,function(t){return h.hasClass(t,"datagrid-row")}),M=parseInt(I.getAttribute("aria-level"),10);M&&(S+=30*M)}}if(T&&l){var L=t.querySelector(".datagrid-header-text");e.textwidth=L.scrollWidth+(k?0:S)}else e.textwidth=E.textWidth(e.content)+(k?0:S);o&&(e.textwidth=E.textWidth(e.content)),e.content=i?e.content:"<p>".concat(e.content,"</p>"),(n||c)&&(e.forced=!0)}if("function"==typeof p.tooltip){var P,N,R=this.closest(t,function(t){return h.hasClass(t,"datagrid-row")});this.settings.treeGrid&&this.settings.treeDepth?(P=this.actualRowIndex(R),N=this.settings.treeDepth[P].node):(P=this.dataRowIndex(R),N=this.settings.dataset[P]);var O=this.fieldValue(N,p.field);e.content=p.tooltip(P,d,O,p,N,this),e.textwidth=E.textWidth(e.content)+20,void 0!==e.content&&null!==e.content&&""!==e.content&&(e.forced=!0)}}return(t=t instanceof jQuery?t:$(t)).data("gridtooltip",e),e},showTooltip:function(t){var e=this;if(this.tooltip){var n=$(this.tooltip),i=this.tooltip.querySelector(".tooltip-content");if(i){i.innerHTML=t.content,this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(t.placement||"top"),t.isError&&this.tooltip.classList.add("is-error"),t.extraClassList&&t.extraClassList.map(function(t){return e.tooltip.classList.add(t)});var a="number"==typeof t.distance?t.distance:10,s={x:0,y:a,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:t.wrapper.offsetLeft,containerOffsetY:t.wrapper.offsetTop,parent:$(t.wrapper),placement:t.placement||"top",strategies:["flip","nudge"]};"left"!==s.placement&&"right"!==s.placement||(s.x=a,s.y=0),n.one("afterplace.gridtooltip",function(t,i){e.handleAfterPlaceTooltip(t,n,i)}).on("click.gridtooltip",function(){e.hideTooltip()}),n.data("place")||n.place(s),n.data("place").place(s),n.data("gridtooltip",!0),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",function(){e.hideTooltip()})}}},handleAfterPlaceTooltip:function(t,e,n){var i=e||$("#tooltip");i[0]&&(i.data("place").setArrowPosition(t,n,i),i.triggerHandler("tooltipafterplace",[n]))},hideTooltip:function(){var t=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",function(){t.hideTooltip()})},isGridtooltip:function(){var t=!1;return this.tooltip&&(this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(t=!0),t},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("gridtooltip")&&$.removeData(t[0],"gridtooltip")},removeTooltip:function(){var t=this;if(this.tooltip){var e=$(this.tooltip),n={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};n.str="".concat(n.th,", ").concat(n.td,", ").concat(n.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),e.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",n.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var i=e.data("place");i&&i.destroy(),[].slice.call(this.element[0].querySelectorAll(n.str)).forEach(function(e){return t.removeTooltipData(e)}),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var t=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var e=t.find(".searchfield"),n=e.data("searchfield"),i=e.parent().find(".close.icon");e.off("keypress.datagrid"),i.off("click.datagrid"),n&&"function"==typeof n.destroy&&n.destroy(),e.removeData("options")}return this.removeToolbarOnDestroy&&(t.data("toolbar")&&t.data("toolbar").destroy(),t.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid resize.frozencolumns"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),t&&t.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),t&&t.dataset&&(this.settings.dataset=t.dataset),t&&t.columns&&(this.settings.columns=t.columns),this.render(),this.handlePaging(),this}},$.fn.datagrid=function(t){return this.each(function(){var e=$.data(this,"datagrid");e?e.updated(t):e=$.data(this,"datagrid",new Wa(this,t))})};var Ua={};function Ga(t,e){if(!(t instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=C.mergeSettings(t,e,Ua),this.element=t,this.init()}Ga.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=C.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var t=this;if(this.inputs&&this.inputs.length){var e=["disabled","readonly"];this.inputs.forEach(function(n){e.forEach(function(e){t.setState(e,n)})})}},handleEvents:function(){var t=this;$(this.form).on("focusin.".concat("formcompact"),"input",function(e){return t.handleFocusIn(e)}).on("focusout.".concat("formcompact"),"input",function(e){return t.handleFocusOut(e)});var e=["disabled","readonly"];this.inputsObserver=new MutationObserver(function(n){n.length&&n.forEach(function(n){"attributes"===n.type&&e.indexOf(n.attributeName)>-1&&t.setState(n.attributeName,n.target)})});var n={attributes:!0};this.inputs.forEach(function(e){t.inputsObserver.observe(e,n)})},handleFocusIn:function(t){h.parents(t.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function(t){h.parents(t.target,".column, .columns",!0).classList.remove("is-focused")},setState:function(t,e){if("string"==typeof t&&e instanceof HTMLElement&&!(["checkbox","radio"].indexOf(e.type)>-1)){"readonly"===t&&(t="readOnly");var n=!0===e[t]?"add":"remove";e.parentNode.classList[n]("is-".concat(t.toLowerCase()))}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(t){return this.each(function(){var e=$.data(this,"formcompact");e?e.updated(t):e=$.data(this,"formcompact",new Ga(this,t))})};var Ya={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function Ka(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ya),this.init()}Ka.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return B("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var t=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(t=".toolbar-section:first-child > button"),this.element.find(t)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var t=!1,e=this.element.find(".toolbar, .flex-toolbar");if(!e.length)return this;e.is(".flex-toolbar")&&(t=!0),this.toolbarElem=e;var n=this.settings.toolbarSettings;if(this.toolbarElem[t?"toolbarflex":"toolbar"](n),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var i=$(this.element),a=$(this.element).next(".scrollable"),s=1===a.length?a:$(window),r=this.settings.scrollThreshold?this.settings.scrollThreshold:15;s.on("scroll.header",function(){this.scrollTop>r?i.addClass("is-scrolled-down"):i.removeClass("is-scrolled-down")}),s.scrollTop()>r&&i.addClass("is-scrolled-down")}return this},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var t=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(R.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),e=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var n=e.prev(".toolbar-section");n.length||(n=$('<div class="toolbar-section"></div>').insertBefore(e)),t.prependTo(n)}else t.prependTo(e);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var i=$("#application-menu").data("applicationmenu");i?i.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},getCurrentBreadcrumbData:function(){var t=this;function e(){var e=this.index,n=t.breadcrumbAPI.list;if(!this.current)if(0!==e){var i,a=n.childNodes.length-1;if(e<a)for(i=a-e;i>0;)t.drillup(),t.breadcrumbAPI.remove(a,!1,!0),i-=1,a-=1;t.breadcrumbAPI.render()}else t.reset()}return this.levelsDeep.map(function(n,i){var a="header-breadcrumb-".concat(n.replace(" ","-").toLowerCase());return{callback:e,content:n,current:i+1===t.levelsDeep.length,id:a}})},buildBreadcrumb:function(){var t="has-breadcrumb",e="default";this.settings.useAlternate&&(t="has-alternate-breadcrumb",e="alternate"),this.element.addClass(t),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.breadcrumb({breadcrumbs:this.getCurrentBreadcrumbData(),style:e}),this.breadcrumbAPI=this.breadcrumb.data("breadcrumb")),this.adjustBreadcrumb()},adjustBreadcrumb:function(){this.breadcrumbAPI&&this.breadcrumbAPI.updated({breadcrumbs:this.getCurrentBreadcrumbData()})},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var t=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(t)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var t=$('<div class="wizard-header"></div>').appendTo(this.wizard),e=$('<div class="bar"></div>').appendTo(t);$('<div class="completed-range"></div>').appendTo(e),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(e)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var t=this.toolbarElem.children(".title");if(this.titlePopup=t.find(".btn-menu"),!this.titlePopup.length){var e=t.find("h1");e.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=e.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var n=this.titlePopupMenu.children(".is-checked").first().text();n||(n=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(n),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("header"),function(t,n){e.updated(n)}).on("reset.".concat("header"),function(){e.reset()}).on("drilldown.".concat("header"),function(t,n){e.drilldown(n)}).on("drillup.".concat("header"),function(t,n){e.drillup(n)}),$("html").on("themechanged.".concat("header"),function(){t.updatePageChanger()}),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),function(t,e){var n;n=e instanceof $?e.text():$(e.element).text(),$(this).children("h1").text(n)}),this},handleTitleButtonEvents:function(){var t=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),function(e){t.levelsDeep.length>1&&(e.stopImmediatePropagation(),t.drillup(),e.returnValue=!1)})},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var t=this.changer.data("popupmenu").menu,e=t.find("li.personalization-colors");if(e.length>0){var n=st.personalizationColors(),i=e.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach(function(t){return i+='<li class="is-selectable'.concat("Default"===n[t].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[t].value,'">').concat(n[t].name,"</a></li>"),t}),e.replaceWith(i)}this.changer.on("selected.header",function(e,n){e.preventDefault(),void 0!==n&&!(n instanceof $)&&n.element instanceof HTMLElement&&(n=$(n.element));var i=n.attr("data-theme-name"),a=n.attr("data-theme-mode");if(i||a){var s=t.find(".is-checked a[data-theme-name]").attr("data-theme-name"),r=t.find(".is-checked a[data-theme-mode]").attr("data-theme-mode");s&&r&&ct.setTheme("".concat(s,"-").concat(r))}else{var o=n.attr("data-theme");if(o)ct.setTheme(o);else if(n.parent().hasClass("is-default"))ct.setColorsToDefault();else{var l=n.attr("data-rgbcolor");ct.setColors(l)}}});var s=st.currentTheme;if("theme-new-light"!==s.id||"theme-uplift-light"!==s.id){var r=s.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(r[0],"-").concat(r[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-mode]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-mode="'.concat(r[2],'"]')).parent().addClass("is-checked")}if(ct.settings.colors){var o="object"===a(ct.settings.colors)?ct.settings.colors.header:ct.settings.colors;o=o.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(o,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&0!==this.changer.length)for(var t=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),e=st.personalizationColors(),n=Object.keys(e),i=0;i<t.length;i++)t[i].setAttribute("data-rgbcolor",e[n[i]].value)},drilldown:function(t){this.element.addClass("is-drilldown"),this.levelsDeep.push(t.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(t){var e;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),e=this.levelsDeep[this.levelsDeep.length-1]),void 0!==t&&(e=t),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(e);e=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(e),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var t=$("#application-menu").data("applicationmenu");t&&t.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var t,e=this,n=$.fn.transitionEndName();e.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(n,".breadcrumb-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".breadcrumb-header")),e.breadcrumbAPI.destroy(),e.breadcrumb.remove(),delete e.breadcrumbAPI,delete e.breadcrumb}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var t,e=this,n=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(n,".tabs-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".tabs-header")),e.tabsContainer.data("tabs").destroy(),e.tabsContainer.remove(),e.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var t,e=this,n=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(n,".wizard-header"),i),t=setTimeout(i,300)):i()}function i(){t&&(clearTimeout(t),t=null),e.element.off("".concat(n,".wizard-header")),e.wizard.data("wizard").destroy(),e.wizard.remove(),e.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var t=this.changer.data("popupmenu");t&&"function"==typeof t.destroy&&t.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(t){return this.each(function(){var e=$.data(this,"header");e?e.updated(t):e=$.data(this,"header",new Ka(this,t))})};var Xa={tabContainers:[]},Qa=["primary","secondary","tertiary"];function Ja(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Xa),this.tabContainers={},this.init()}Ja.prototype={init:function(){var t,e=this;t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter(function(){return!$(this).parents(".tab-panel-container").length}),$(t).each(function(){e.setupTabsInstance($(this))})},setupTabsInstance:function(t){if(t instanceof $){var e=this,n=!1;if(Qa.forEach(function(i){if(!n&&!Object.prototype.hasOwnProperty.call(e.tabContainers,i)){var a=t.data("tabs");a||(t.tabs(),a=t.data("tabs")),a.multitabsID=i,t.attr("data-multitabs",i),e.tabContainers[i]=t,n=!0}}),!n)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(t,e,n,i){return(t=this.checkForValidTabContainer(t)).data("tabs").add(e,n,i)},remove:function(t,e,n){return(t=this.checkForValidTabContainer(t)).data("tabs").remove(e,n)},move:function(t,e,n){if(!t||!e)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var i,a,s;if(this.getFilterableTabContainers().each(function(){var e=$(this).data("tabs"),n=e.getTab(null,t);null!==n&&(s=e.multitabsID,i=n.clone(),a=e.getPanel(t).children())}),!i)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(t,'"'));this.remove(s,t),this.add(e,t,{name:i.children("a").text().trim(),content:a,doActivate:n})},getTabContainer:function(t){var e,n=this;return Qa.forEach(function(i){!e&&n.tabContainers[i]&&t===i&&(e=n.tabContainers[i])}),e},getFilterableTabContainers:function(){var t=$();return this.performOnAllContainers(function(e,n){t=t.add(n)}),t},checkForValidTabContainer:function(t){if(!t)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof t&&(t=this.getTabContainer(t)),!(t instanceof $&&t.length))throw new Error("No matching tabContainer could be found and hidden.");return t},performOnAllContainers:function(t,e){var n=this;Array.isArray(e)||(e=e?[e]:[]),Qa.forEach(function(i){var a=n.tabContainers[i],s=[];a&&(s.push(i,a),s=s.concat(e),t.apply(this,s))})},adjustModuleTabContainers:function(){this.performOnAllContainers(function(t,e){var n=e.data("tabs");n.isModuleTabs()&&n.adjustModuleTabs()})},hideTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(t){if(t instanceof $&&t.data("tabs")&&"function"==typeof t.data("tabs").destroy){var e=this,n=!1;if(Qa.forEach(function(i){if(!n&&e.tabContainers[i].is(t)){var a=t.data("tabs");delete a.multitabsID,t.removeAttr("data-multitabs"),a.destroy(),delete e.tabContainers[i],n=!0}}),!n)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(t){return(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").is(".hidden")},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},teardown:function(){var t=this;return Object.keys(this.tabContainers).forEach(function(e){t.destroyTabsInstance(e)}),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(t){return this.each(function(){var e=$.data(this,"multitabs");e?e.updated(t):e=$.data(this,"multitabs",new Ja(this,t))})};var Za={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,toggleElement:void 0,detailElement:void 0},ts=["accordion","listview"];function es(t){var e;if(t instanceof HTMLElement)return Object.keys($(t).data()).forEach(function(t){ts.indexOf(t)>-1&&(e=t)}),e}function ns(t,e){t instanceof HTMLElement&&(this.element=t,this.settings=C.mergeSettings(this.element,e,Za),this.init())}ns.prototype={init:function(){var t=this;if(this.setInternalElementReference("listElement",function(e){return(n=t.settings[e])instanceof HTMLElement&&void 0!==es(n);var n}),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.setInternalElementReference("toggleElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.showSidebar=!0,this.listElement){this.listComponentType=es(this.listElement);var e=this.getListAPI();e&&(e.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var n=this.backElement.querySelector(".icon");n&&(this.backElementIcon=n),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}if(this.toggleElement){this.mainElement=this.element.querySelector(".main"),this.sidebarElement=this.element.querySelector(".sidebar"),this.toggleElement.classList.add("list-detail-toggle-button");var i=this.toggleElement.querySelector(".icon");i&&(this.toggleElementIcon=i,this.toggleElementIcon.classList.add("go-back"))}var a=this.element.querySelectorAll(".list-detail");a&&(this.childrenListDetailElements=a),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=p.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=p.isAbove("desktop")},setInternalElementReference:function(t,e){if("string"==typeof this.settings[t]&&this.settings[t].length){var n=document.querySelector(this.settings[t]);n&&(this.settings[t]=n)}e="function"!=typeof e||e(t),this.settings[t]instanceof HTMLElement&&e&&(this[t]=this.settings[t])},handleEvents:function(){var t=this;$(this.element).on("drilldown.".concat("listdetail"),function(e,n){e.stopPropagation(),t.drilldown(n,e.target)}).on("drillup.".concat("listdetail"),function(e){e.stopPropagation(),t.drillup()}),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.toggleElement&&this.toggleElement.addEventListener("click",this.handleToggleClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),function(){t.handleResize()})},drilldown:function(t,e){this.showDetail||e&&e.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[t]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},toggleSidebar:function(t){t?(this.sidebarElement.classList.add("hidden"),this.mainElement.style.width="100%",this.toggleElementIcon.classList.remove("go-back")):(this.sidebarElement.classList.remove("hidden"),this.mainElement.style.width="",this.toggleElementIcon.classList.add("go-back")),this.showSidebar=!t},handleBackClick:function(t){function e(){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var n=this.getCurrentSelectedListItem();if(n)return this.drilldown(n),e(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach(function(t){var e=$(t).data("listdetail");e&&"function"==typeof e.drillup&&e.drillup()}),e(),!1},handleToggleClick:function(){this.toggleSidebar(this.showSidebar)},handleClose:function(){if(!this.showDetail){var t=this.getCurrentSelectedListItem();this.drilldown(t)}},handleResize:function(){this.setBreakpointChecks();var t=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&t.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&t.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():(this.addBackElementIconContext(),this.toggleElement&&this.toggleSidebar(!1)),p.isAbove("desktop")&&t.enable()},isAboveBreakpoint:function(){var t=this.settings.edgeBleedBreakpoint;return this["above".concat(E.capitalize(t),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){if(!this.listElement)return"";var t,e=this.getListAPI();switch(this.listComponentType){case"accordion":default:t=e.getSelected()}return h.convertToHTMLElement(t)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var t=this.getListAPI();t&&delete t.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.mainElement,delete this.sidebarElement,delete this.toggleElement,delete this.toggleElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail,delete this.showSidebar},destroy:function(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(t){return this.each(function(){var e=$.data(this,"listdetail");e?e.updated(t):(e=$.data(this,"listdetail",new ns(this,t))).destroy=function(){this.teardown(),$.removeData(this,"listdetail")}})};var is={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function as(t,e){this.settings=C.mergeSettings(t,e,is),this.element=$(t),this.init(),_("Stepprocess")}as.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var t=this.stepListJq.find(this.settings.stepLi),e=0,n=t.length;e<n;e++)this.decorateNode(t[e]);var i=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(i)},decorateNode:function(t){var e=$(t),n=e.children(this.settings.stepLink),i=e.children(this.settings.stepFolder),a=n.hasClass("is-disabled"),s=i.hasClass("is-open");if(a&&n.attr("aria-disabled","true"),i.length){if(e.addClass("folder"),i.attr("role","group"),a&&(i.addClass("disabled"),s))for(var r=i.children(),o=0,l=r.length;o<l;o++)$(r[o]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");n.attr("aria-expanded",s)}var c=n.parentsUntil(this.stepListJq,"ul").length-1,d=e.index(),u=e.siblings().addBack().length;n.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":c+1,"aria-posinset":d+1,"aria-setsize":u,"aria-disabled":a}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(t){var e=this,n=$(t),i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder),s=i.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(s,this.settings.folderIconClosed),this.isAnimating=!0,a.one("animateclosedcomplete",function(){a.removeClass("is-open"),e.isAnimating=!1}).animateClosed(),i.attr("aria-expanded","false")},folderOpen:function(t){var e=this,n=$(t);if(!this.isOpen(n)){var i=n.children(this.settings.stepLink),a=n.children(this.settings.stepFolder);n.addClass("is-open"),i.attr("aria-expanded","true");var s=i.find("svg.icon-tree");this.setIcon(s,this.settings.folderIconOpen),this.isAnimating=!0,a.one("animateopencomplete",function(){e.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(t){var e=t.closest(this.settings.stepLi);if(this.isFolder(e)){var n=e.children(this.settings.stepFolder);this.isOpen(n)?this.folderClose(e):this.folderOpen(e)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(t){var e=this.settings,n=t.parent().next().find("".concat(e.stepLink,":first"));if(t.next().is(e.stepFolder)&&t.next().hasClass("is-open")&&(n=t.next().find("".concat(e.stepLink,":first"))),n.hasClass("is-disabled")&&(n=this.getNextNode(n)),0===n.length)for(var i=0,a=t;i<2&&!(n=(a=a.parent().closest(".folder")).next().find("".concat(e.stepLink,":first"))).length;i++);return n},getNextStep:function(t){var e=t.children(this.settings.stepLink),n=t.next(this.settings.stepFolder),i=this.getNextNode(e),a=i.next(this.settings.stepFolder),s=null,r=null;return(s=n.length?(r=n).children().length?r.find(this.settings.stepLink).first():i:a.length&&(r=a).children().length?r.find(this.settings.stepLink).first():i).hasClass("is-disabled")&&(s=this.getNextStep(s.parent())),s},getPreviousNode:function(t){var e=this.settings,n=t.parent().prev().find("".concat(e.stepLink,":first")),i=n.closest(e.stepLi);return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(n=i.find("ul.is-open ".concat(e.stepLink,":last"))),n.hasClass("is-disabled")&&this.getPreviousNode(n),0===n.length&&(n=t.closest(e.stepFolder).prev(e.stepLink)),n},getPreviousStep:function(t){var e=this.settings,n=t.children(e.stepLink),i=this.getPreviousNode(n),a=i.closest(e.stepLi),s=i;if(this.isFolder(a))if(this.isOpen(a))s=this.getPreviousNode(i);else{var r=a.children(e.stepFolder);r.children().length&&(s=r.find(e.stepLink).last())}return s.hasClass("is-disabled")&&(s=this.getPreviousStep(s.parent())),s},goToNextStep:function(){var t=this,e=this.getSelectedStep(),n=t.getNextStep(e);if(n.length)t.selectStep(n,"next");else if("function"==typeof t.settings.beforeSelectStep){var i=t.settings.beforeSelectStep({isStepping:"next"});i.done&&"function"==typeof i.done?i.done(function(e,n){e&&n&&t.selectStepFinish(n)}):i&&t.selectStepFinish(n)}},goToPreviousStep:function(){var t=this.getSelectedStep(),e=this.getPreviousStep(t);e.length&&this.selectStep(e,"prev")},handleKeys:function(){var t=this,e=this.settings;this.stepListJq.on("focus.stepprocess",e.stepLink,function(){var t=$(this);if(0===parseInt(t.attr("aria-level"),10)&&1===parseInt(t.attr("aria-posinset"),10)&&t.hasClass("is-disabled")){var e=$.Event("keydown.stepprocess");return e.keyCode=40,void t.trigger(e)}}),this.stepListJq.on("keydown.stepprocess",e.stepLink,function(n){var i,a,s=n.charCode||n.keyCode,r=$(this);if(!t.isAnimating){if(40===s){var o=t.getNextNode(r);t.setFocus(o)}if(38===s){var l=t.getPreviousNode(r);t.setFocus(l)}if(32===n.keyCode&&r.trigger("click.stepprocess"),37===s)return R.isRTL()?r.next().hasClass("is-open")?(a=r.next().find("".concat(e.stepLink,":first")),t.setFocus(a)):t.folderToggle(r):r.next().hasClass("is-open")?t.folderToggle(r):(a=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(a)),n.stopPropagation(),!1;if(39===s)return R.isRTL()?r.next().hasClass("is-open")?t.folderToggle(r):(i=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(i)):r.next().hasClass("is-open")?(i=r.next().find("".concat(e.stepLink,":first")),t.setFocus(i)):(t.folderToggle(r),t.setFocus(r)),n.stopPropagation(),!1;36===s&&(i=t.stepListJq.find("".concat(e.stepLink,":first:visible")),t.setFocus(i)),35===s&&(i=t.stepListJq.find("".concat(e.stepLink,":last:visible")),t.setFocus(i))}}),this.stepListJq.on("keypress.stepprocess",e.stepLink,function(n){var i=n.charCode||n.keyCode,a=$(this);if(i>=37&&i<=40||32===i)return n.stopPropagation(),!1;0!==n.which&&a.closest(e.stepLi).nextAll().find(".js-step-link:visible").each(function(){var e=$(this);if(e.text().substr(0,1).toLowerCase()===String.fromCharCode(n.which).toLowerCase())return t.setFocus(e),!1})})},isFolder:function(t){return $(t).hasClass("folder")},isInFolder:function(t){return $(t).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(t){return $(t).hasClass("is-open")},setFocus:function(t){t.focus()},setIcon:function(t,e){var n=e.replace(/icon-|hide-focus|\s?/gi,"");t.changeIcon(n)},selectStep:function(t,e){var n,i=this;if(void 0===e&&(e="none"),"function"==typeof i.settings.beforeSelectStep){var a={stepLink:t,isStepping:e};(n=i.settings.beforeSelectStep(a)).done&&"function"==typeof n.done?n.done(function(n,a){n&&(a&&(t=a),i.selectStepFinish(t,e))}):n&&i.selectStepFinish(t,e)}else i.selectStepFinish(t,e)},selectStepFinish:function(t,e){var n=this,i=$(this.settings.stepLink,this.stepListJq),a=t.closest(this.settings.stepLi);if(this.isFolder(a)||(i.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),t.attr({tabindex:"0","aria-selected":"true"}),a.addClass("is-selected")),this.isFolder(a))"none"===e?this.folderToggle(a):this.folderOpen(a);else{var s=a.closest(this.settings.stepFolder,this.stepListJq);s.length&&this.folderOpen(s.closest(this.settings.stepLi)),this.showStepPanel(t.attr("href"))}t.focus(),setTimeout(function(){n.element.triggerHandler("selected",t)},0)},unSelectedNode:function(t){var e=$(this.settings.stepLink,this.stepListJq),n=$(t),i=n.children(this.settings.stepLink);e.attr("tabindex","-1"),i.attr("tabindex","0"),n.removeClass("is-selected"),i.attr("aria-selected","false")},setupEvents:function(){var t=this,e=this,n=this.settings;this.stepListJq.on("updated.stepprocess",function(){t.initStepprocess()}).on("click.stepprocess","".concat(n.stepLink,":not(.is-clone)"),function(t){if(t.preventDefault(),!n.linearProgression){var i=$(this);i.is(".is-disabled, .is-loading")||(e.selectStep(i),t.stopPropagation())}}),$(n.btnPrev).on("click",function(n){n.preventDefault(),t.goToPreviousStep.call(e)}),$(n.btnNext).on("click",function(n){n.preventDefault(),t.goToNextStep.call(e)}),$(n.contentScroll).scrollaction({scrollActionTarget:".main"}),$(n.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click(function(e){e.preventDefault(),t.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")})},showStepPanel:function(t){$(".step-panel-active").removeClass("step-panel-active"),$(t).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,is)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(t){return this.each(function(){var e=$.data(this,"stepprocess");e?e.updated(t):e=$.data(this,"stepprocess",new as(this,t))})};var ss={locale:"en-US",language:null};function rs(t,e,n){return $(t)[e](n)}function os(t,e){var n=t.find(e).not(".no-init, [data-init]");return t.filter(e).length&&(n=n.add(t)),n}var ls=[["texttranslations",'[data-translate="text"]',function(t,e,n){os(t,n).each(function(t,e){var n=$(e);n.attr("data-translate-key",n.text()),n.text(R.translate(n.text(),!0))})}],["texttranslations",'[data-translate="value"]',function(t,e,n){os(t,n).each(function(t,e){var n=$(e);n.attr("data-translate-key",n.attr("value")),n.attr("value",R.translate(n.attr("value"),!0))})}],["texttranslations",'[data-translate="placeholder"]',function(t,e,n){os(t,n).each(function(t,e){var n=$(e);n.attr("data-translate-key",n.attr("placeholder")),n.attr("placeholder",R.translate(n.attr("placeholder"),!0))})}],["applicationmenu","#application-menu",function(t,e,n){os(t,n).each(function(e,n){$(n).applicationmenu({triggers:t.find(".application-menu-trigger")})})}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(t,e,n){os(t,n).change(function(){if(this.checked){var t=$(this).closest(".option"),e=t.siblings(),n='button, select, input[type="text"]';$(n,t).removeAttr("disabled"),$(n,e).attr("disabled","disabled")}})}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["revealText","input.input-password-reveal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["cards",".card:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(t,e,n){os(t,n).each(function(t,e){$(e).parents(".modal").length||$(e).button()})}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",['[data-clearable="true"]'].join(", "),function(t,e,n){os(t,n).each(function(t,e){var n=$(e).attr("data-tabbable");void 0===n?$(e).clearable({tabbable:!0}):$(e).clearable({tabbable:"true"===n})})}],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload",'input.fileupload:not(.fileupload-background-transparent):not([type="text"])'],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["virtualscroll",".virtual-scroll"],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(t,e,n){os(t,n).each(function(t,n){var i=$(n),a=$.extend({},C.parseOptions(i)),s=i.attr("data-popupmenu");s&&(a.menuId=s),rs(i,e,a)})}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(t,e,n){os(t,n).each(function(t,n){var i=$(n);i.parents(".toolbar, .flex-toolbar").length>0||rs(i,e)})}],["popover","[data-popover]",function(t,e,n){os(t,n).each(function(){var t=C.parseOptions(this),e=$(this),n=e.attr("data-trigger"),i=e.attr("data-title"),a=e.attr("data-placement");$.isEmptyObject(t)?e.popover({content:$("#".concat(e.attr("data-popover"))),popover:!0,trigger:n||"click",title:i||void 0,placement:a||"right",extraClass:t.extraClass||void 0}):e.popover({content:$(t.content),popover:!0,trigger:t.trigger||"click",title:t.title||void 0,placement:t.placement||"right",extraClass:t.extraClass||void 0})})}],["searchfield",".searchfield",function(t,e,n){var i=os(t,n),a=i.filter(function(){return $(this).parents(".toolbar").length});(i=i.not(a)).each(function(){rs(this,"searchfield")})}],["toolbar",".toolbar",function(t,e,n){os(t,n).each(function(e,n){var i=$(n);i.parents(".header, .contextual-action-panel .modal-header").length&&!t.is(".toolbar")||rs(i,"toolbar")})}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(t,e,n){os(t,n).each(function(t,e){var n=$(e);n.parents(".application-menu").length||rs(n,"accordion")})}],["taglist",".tag-list"],["breadcrumb",".breadcrumb"],["swipeaction",".swipe-action"],["formcompact",".form-compact-container",function(t,e,n){os(t,n).each(function(t,e){rs($(e),"formcompact")})}],["listdetail",".list-detail",function(t,e,n){os(t,n).each(function(t,e){rs($(e),"listdetail")})}],["breadcrumblabels",".breadcrumb ol",function(t,e,n){os(t,n).attr("aria-label",R.translate("Breadcrumb"))}],["validate","[data-validate]",function(t,e,n){os(t,n).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function cs(t,e,n,i){($.fn[e]||"texttranslations"===e)&&(void 0===n&&(n=".".concat(e)),"function"!=typeof i?os(t,n).each(function(){var t=$(this);t.is(".no-init, [data-init]")||t.parents(".no-init, [data-init]").length||rs(this,e)}):i(t,e,n))}function ds(t,e){var n=e;"string"==typeof e&&(n={locale:e}),this.element=$(t),R.currentLocale&&R.currentLocale.name&&!e&&(n={locale:R.currentLocale.name}),R.currentLanguage&&R.currentLanguage.name&&R.currentLocale.name.substr(0,2)!==R.currentLanguage.name&&!e&&(n.language=R.currentLanguage.name),this.settings=C.mergeSettings(this.element[0],n,ss),this.init()}ds.prototype={init:function(){var t=this,e=this;return R.set(this.settings.locale).done(function(){t.settings.language?R.setLanguage(t.settings.language).done(function(){e.initAll()}):e.initAll()}),this},initAll:function(){return this.element.each(function(){for(var t=0;t<ls.length;t++)cs.apply(void 0,[$(this)].concat(c(ls[t])))}),this.element.triggerHandler("initialized",{locale:R.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(t){return this.each(function(){return new ds(this,t)})};var us={delay:400,mouseEvents:!1};function hs(t){return this.settings=C.mergeSettings(this.element,t,us),this.init()}hs.prototype={timer:null,init:function(){var t=this,e=this.getInputEventNames(),n=this;$(document).on("".concat(e.mousedown,".").concat("longpress"),function(e){var i=e.target;t.timer=new W({id:"".concat("longpress","-timer"),duration:A.convertDelayToFPS(t.settings.delay),timeoutCallback:function(){n.fire(i,e)}}),G.register(t.timer)}),$(document).on(["".concat(e.mouseup,".").concat("longpress"),"".concat(e.mouseout,".").concat("longpress"),"".concat(e.mousemove,".").concat("longpress")].join(" "),function(){t.killTimer()})},fire:function(t,e){$(t).trigger("".concat("longpress"),[e])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var t=m.features.touch,e=this.settings.mouseEvents,n=t||!e;return{mousedown:n?"touchstart":"mousedown",mouseout:n?"touchcancel":"mouseout",mouseup:n?"touchend":"mouseup",mousemove:n?"touchmove":"mousemove"}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){var t=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(t.mousedown,".").concat("longpress"),"".concat(t.mouseup,".").concat("longpress"),"".concat(t.mouseout,".").concat("longpress"),"".concat(t.mousemove,".").concat("longpress")].join(" "))}};var ps=new hs,fs=Object.freeze({__proto__:null,Button:It,ButtonSet:Lt,Hyperlink:Nt,Icon:kt,ListFilter:Ce,MaskInput:Vt,Modal:Ni,PopupMenu:Wt,Tmpl:ke,About:Gt,Accordion:Zt,ActionSheet:ee,ApplicationMenu:Ie,Autocomplete:Ae,Bar:an,Blockgrid:Pe,Breadcrumb:_e,Bullet:We,BusyIndicator:ze,Cards:qe,ColorPicker:Cn,Column:en,CompletionChart:Ge,ContextualActionPanel:jn,Drag:pt,DatePicker:ei,Dropdown:wn,EmptyMessage:Qe,ExpandableArea:ce,FontPicker:si,FontPickerStyle:ii,Line:Ze,ListBuilder:Di,ListView:Ei,Message:Oi,MultiSelect:_i,Notification:zi,Pager:Ai,Pie:rn,Popdown:Ui,Radar:ln,SearchField:$e,Slider:Ji,Sparkline:Ke,Spinbox:ia,Splitter:sa,StepChart:pa,SwipeAction:ca,Tabs:ma,Tag:pn,TagList:gn,Textarea:ba,TimePicker:Gn,Toast:Xn,Toolbar:oi,ToolbarFlex:$n,Tooltip:At,Tree:Ca,Treemap:Aa,Validator:Jn,VirtualScroll:vn,Wizard:Ea,Calendar:On,CalendarToolbar:In,CompositeForm:zn,Datagrid:Wa,FormCompact:Ga,Header:Ka,Lookup:Ha,MonthView:Ln,WeekView:Nn,MultiTabs:Ja,ListDetail:ns,Stepprocess:as});return t.DOM=h,t.Editors=Va,t.Formatters=Na,t.GroupBy=Oa,t.HideFocus=v,t.Initialize=ds,t.Locale=R,t.Place=xt,t.RenderLoopItem=W,t.Validation=Yn,t.base=H,t.breakpoints=p,t.colors=I,t.components=fs,t.debug=e,t.defer=y,t.env=m,t.excel=Ra,t.getColorStyleSheet=function(t){return ct.getColorStyleSheet(t)},t.keyboard=K,t.longPress=ps,t.masks=Rt,t.modalManager=J,t.number=D,t.object=S,t.personalization=ct,t.renderLoop=G,t.setColors=function(t){return ct.setColors(t)},t.setTheme=function(t){return ct.setTheme(t)},t.smoothScrollTo=b,t.string=E,t.theme=st,t.uniqueIdCount=w,t.utils=C,t.version="4.55.2",t.xss=u,Object.defineProperty(t,"__esModule",{value:!0}),t}({});